(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{4364:(fo,Gr,Rt)=>{"use strict";Rt.r(Gr),Rt.d(Gr,{CustomPagesModule:()=>OL});var k=Rt(2308),hn=Rt(3756),ze=Rt.n(hn),i=Rt(4496),V=Rt(6504),Oe=Rt(7048),Ae=Rt(6716);let De=(()=>{class r{constructor(e){this.http=e,this.apiUrl=Ae.O.apiUrl,this.headers=new Oe.UD({"Content-Type":"application/json; charset=utf-8"});const s=localStorage.getItem("access_token"),l=localStorage.getItem("userType");s&&(this.headers=this.headers.set("access_token",`Bearer ${s}`),this.headers=this.headers.set("userType",`${l}`))}fetchBannerSection(e,s){const l={headers:new Oe.UD({"Content-Type":"application/json",Authorization:"Auth "+e})};return this.http.get(this.apiUrl+"homebanner/"+s,l)}updateBannerSection(e,s,l){return this.http.patch(this.apiUrl+"homebanner/"+l,s)}updateData(e,s){return this.http.put(this.apiUrl,s)}deleteData(e){return this.http.delete(e)}put(e,s,l){return this.http.put(`${this.apiUrl+e}/${s}`,l)}postwithid(e,s,l){return this.http.post(`${this.apiUrl+e}/${s}`,l)}post(e,s){return this.http.post(`${this.apiUrl+e}`,s)}get(e,s){return this.http.get(`${this.apiUrl+e}/${s}`)}getwithoutid(e){return this.http.get(`${this.apiUrl+e}`)}deleteWithId(e,s){return this.http.delete(`${this.apiUrl+e}/${s}`)}static#e=this.\u0275fac=function(s){return new(s||r)(i.CoB(Oe.KK))};static#t=this.\u0275prov=i.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Fe=Rt(4400),Ue=Rt(1368),Je=Rt(6708),nt=Rt(8216);const mt=(r,t)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":t});function Pt(r,t){if(1&r){const e=i.KQA();i.I0R(0,"tr")(1,"td",38),i.OEk(2),i.C$Y(),i.wR5(3,"td",39)(4,"td",39),i.I0R(5,"td",40)(6,"div",41)(7,"input",42),i.qCj("change",function(l){const C=i.usT(e).$implicit,z=i.GaO();return i.CGJ(z.setStatus(C.id,l))}),i.C$Y(),i.I0R(8,"label",43)(9,"span",44),i.OEk(10),i.C$Y()()()(),i.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),i.wR5(15,"i",48),i.C$Y()(),i.I0R(16,"li")(17,"a",49),i.qCj("click",function(){const f=i.usT(e).$implicit,C=i.GaO();return i.CGJ(C.delete(f.id))}),i.wR5(18,"i",50),i.C$Y()()()()()}if(2&r){const e=t.$implicit,s=t.$index,l=i.GaO();i.yG2(2),i.oRS(" ",(l.currentPage-1)*l.itemsPerPage+s+1," "),i.yG2(),i.E7m("innerHtml",e.name,i.E3n),i.yG2(),i.E7m("innerHtml",e.cin_id,i.E3n),i.yG2(3),i.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),i.yG2(),i.E7m("for","customSwitchsizemd"+s),i.yG2(),i.E7m("ngClass",i.IBC(9,mt,"active"===e.status,"inactive"===e.status)),i.yG2(),i.oRS(" ",e.status," "),i.yG2(4),i.CI5("routerLink","/edit-company/",e.id,"")}}function ot(r,t){1&r&&(i.I0R(0,"div",37)(1,"div",51)(2,"span",52),i.OEk(3,"Loading..."),i.C$Y()()())}let gt=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.api=s,this.toastService=l,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.companyData=e.data||[],this.companyDataList=e.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const f=s.target.checked?"active":"inactive",C=new FormData;C.append("status",f),this.toggleSpinner(!0),this.api.put("company",e,C).subscribe(z=>this.handleStatusChangeResponse(z),z=>this.handleError(z))}toggleSpinner(e){this.spinnerStatus=e}delete(e){e&&ze().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&this.api.deleteWithId("company",e).subscribe(l=>this.handleStatusChangeResponse(l),l=>this.handleError(l))})}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(e),this.toastService.error(e.message))}handleError(e){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(e=>{const s=this.term.toLowerCase();return e.name.toLowerCase().includes(s)||e.cin_id.toLowerCase().includes(s)||e.status.toLowerCase().includes(s)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(e,this.endItem)}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(V.im),i.GI1(De),i.GI1(Fe.SA))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){1&s&&(i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),i.wR5(12,"div",10),i.C$Y()(),i.I0R(13,"div",11)(14,"div",12)(15,"input",13),i.iHE("ngModelChange",function(C){return i.kNx(l.term,C)||(l.term=C),C}),i.qCj("keyup",function(){return l.filterdata()}),i.C$Y(),i.wR5(16,"i",14),i.C$Y()(),i.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),i.wR5(21,"i",18),i.OEk(22,"Add"),i.C$Y()()()()()(),i.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),i.OEk(29,"S No."),i.C$Y(),i.I0R(30,"th",23),i.OEk(31,"Company Name"),i.C$Y(),i.I0R(32,"th",23),i.OEk(33,"CIN"),i.C$Y(),i.I0R(34,"th",23),i.OEk(35,"Status"),i.C$Y(),i.I0R(36,"th",24),i.OEk(37,"Action"),i.C$Y()()(),i.I0R(38,"tbody",25),i.c53(39,Pt,19,12,"tr",null,i.wJt),i.C$Y()(),i.I0R(41,"div",26)(42,"div",27),i.wR5(43,"i",28),i.I0R(44,"h5",29),i.OEk(45,"Sorry! No Result Found"),i.C$Y(),i.I0R(46,"p",30),i.OEk(47," We did not find any Details for you search. "),i.C$Y()()()(),i.I0R(48,"div",31)(49,"div",32)(50,"div",33),i.OEk(51," Showing "),i.I0R(52,"span",34),i.OEk(53),i.C$Y(),i.OEk(54," of "),i.I0R(55,"span",34),i.OEk(56),i.C$Y(),i.OEk(57," Results "),i.C$Y()(),i.I0R(58,"div",35)(59,"pagination",36),i.qCj("pageChanged",function(C){return l.pageChanged(C)}),i.C$Y()()()()()()(),i.yuY(60,ot,4,0,"div",37),i.C$Y()()()()),2&s&&(i.E7m("breadcrumbItems",l.breadCrumbItems),i.yG2(15),i.OKB("ngModel",l.term),i.yG2(24),i.oho(l.companyData),i.yG2(14),i.cNF(null==l.companyData?null:l.companyData.length),i.yG2(3),i.cNF(null==l.companyDataList?null:l.companyDataList.length),i.yG2(3),i.E7m("totalItems",null==l.companyDataList?null:l.companyDataList.length)("itemsPerPage",5),i.yG2(),i.C0Y(60,l.spinnerStatus?60:-1))},dependencies:[Ue.QF,Je.O,k.ER,V.ot,V.ue,V._G,nt.im]})}return r})();function wt(r,t){if(1&r&&(i.I0R(0,"div",9)(1,"div",91),i.wR5(2,"img",92),i.C$Y()()),2&r){const e=i.GaO(2);i.yG2(2),i.E7m("src",e.companyselectedImagePreview,i.K6U)}}function si(r,t){if(1&r&&i.yuY(0,wt,3,1,"div",90),2&r){const e=i.GaO();i.C0Y(0,e.companyselectedImagePreview?0:-1)}}function $e(r,t){if(1&r&&(i.I0R(0,"div",9)(1,"div",91),i.wR5(2,"img",92),i.C$Y()()),2&r){const e=i.GaO();i.yG2(2),i.E7m("src",e.companyuploadedImage,i.K6U)}}function ii(r,t){1&r&&(i.I0R(0,"div",9)(1,"div",91),i.wR5(2,"img",93),i.C$Y()())}function oi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Logo is required."),i.C$Y())}function at(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Company name is required."),i.C$Y())}function ri(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," Company name must be at most 45 characters "),i.C$Y())}function Xt(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Business type is required."),i.C$Y())}function Vt(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," Business type must be at most 45 characters "),i.C$Y())}function dt(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"TIN is required."),i.C$Y())}function Zt(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"CIN is required."),i.C$Y())}function ni(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"No. of Employee is required."),i.C$Y())}function gi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Website url is required."),i.C$Y())}function Gi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Contact person is required."),i.C$Y())}function vi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Email is required."),i.C$Y())}function Ei(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," Email must be a valid email address "),i.C$Y())}function Fi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Mobile is required."),i.C$Y())}function Ji(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," Please, Enter 10 digit Mobile Number. "),i.C$Y())}function bn(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"City is required."),i.C$Y())}function fn(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"State is required."),i.C$Y())}function Gn(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"zip_code is required."),i.C$Y())}function Qt(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Address is required."),i.C$Y())}function Yi(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," Address must be at most 100 characters "),i.C$Y())}function on(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Password is required."),i.C$Y())}function Zn(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1," password must be at minimum 5 characters "),i.C$Y())}function Nn(r,t){1&r&&(i.I0R(0,"div",94),i.OEk(1,"Status is required."),i.C$Y())}function Dn(r,t){1&r&&(i.I0R(0,"button",95),i.OEk(1,"Save"),i.C$Y())}function ji(r,t){1&r&&(i.I0R(0,"button",96),i.wR5(1,"span",97),i.OEk(2," Please wait "),i.C$Y())}function Mr(r,t){1&r&&(i.I0R(0,"div",89)(1,"div",98)(2,"span",99),i.OEk(3,"Loading..."),i.C$Y()()())}const or=r=>({"is-invalid":r}),gr=(r,t)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":t});let xn=(()=>{class r{constructor(e,s,l,f,C){this.route=e,this.formBuilder=s,this.api=l,this.router=f,this.toastService=C,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.mockLocationUpdates=[{lng:78.22045594790079,lat:26.230978491880894},{lng:78.22581623978483,lat:26.230717171669912},{lng:78.22831983563903,lat:26.229851080580822}]}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],address:["",[V.AQ.maxLength(100),V.AQ.required]],no_of_emp:["",[V.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[V.AQ.required]],tax_no:["",[V.AQ.required]],website_url:["",[V.AQ.required]],email:["",[V.AQ.required,V.AQ.email,V.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[V.AQ.required,V.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[V.AQ.maxLength(45),V.AQ.required]],password:["",[this.imageValidator(),V.AQ.minLength(5)]],status:["",[V.AQ.required]],city:["",[V.AQ.required]],state:["",[V.AQ.required]],zip_code:["",[V.AQ.required]],contact_person:["",[V.AQ.required]],check_out_time:["",[V.AQ.required]],check_in_time_start:["",[V.AQ.required]],check_in_time_end:["",[V.AQ.required]]})}imageValidator(){return e=>this.urlId?null:V.AQ.required(e)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setCompanyDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setCompanyDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,no_of_emp:e.no_of_emp,cin_id:e.cin_id,tax_no:e.tax_no,email:e.email,password:e.password,status:e.status,mobile:e.mobile,business_type:e.business_type,city:e.city,state:e.state,zip_code:e.zip_code,contact_person:e.contact_person,website_url:e.website_url,check_in_time_start:e.check_in_time_start,check_in_time_end:e.check_in_time_end,check_out_time:e.check_out_time}),this.companyuploadedImage=e.logo||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData(),s=this.f.check_in_time_start.value,l=this.f.check_in_time_end.value,f=this.f.check_out_time.value;if(s>l)return void this.toastService.error("Check-in start time must be before the end time.");if(f<=l)return void this.toastService.error("Check-out time must be after the check-in end time.");if(f<=s)return void this.toastService.error("Check-out time must be after the check-in start time.");this.urlId?this.updateCompany(e):this.addCompany(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("name",this.f.name.value),e.append("address",this.f.address.value),e.append("no_of_emp",this.f.no_of_emp.value),e.append("cin_id",this.f.cin_id.value),e.append("email",this.f.email.value),e.append("password",this.f.password.value),e.append("status",this.f.status.value),e.append("mobile",this.f.mobile.value),e.append("business_type",this.f.business_type.value),e.append("tax_no",this.f.tax_no.value),e.append("city",this.f.city.value),e.append("state",this.f.state.value),e.append("zip_code",this.f.zip_code.value),e.append("contact_person",this.f.contact_person.value),e.append("website_url",this.f.website_url.value),e.append("check_out_time",this.f.check_out_time.value),e.append("check_in_time_start",this.f.check_in_time_start.value),e.append("check_in_time_end",this.f.check_in_time_end.value),this.companyselectedImage&&e.append("logo",this.companyselectedImage),e}addCompany(e){this.api.post("company",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}updateCompany(e){this.api.put("company",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(e.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}companyimageSelect(e){const s=e.target.files[0];s&&(this.companyselectedImage=s,this.companyselectedImagePreview=URL.createObjectURL(s))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(k.gV),i.GI1(V.im),i.GI1(De),i.GI1(k.E5),i.GI1(Fe.SA))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-add-company"]],decls:244,vars:59,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],[1,"ratio","ratio-16x9"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6509156.773725123!2d-123.79622260161696!3d37.19312212390098!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1678106410566!5m2!1sen!2sin","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"card-body","pt-1"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"text-center","mt-4"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"hstack","gap-2","justify-content-center","list-unstyled","mt-4","pt-2","mb-0"],["href","javascript:void(0);",1,"btn","btn-success","btn-sm"],[1,"bi","bi-whatsapp"],["href","javascript:void(0);",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-facebook"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm"],[1,"bi","bi-twitter"],["href","javascript:void(0);",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-envelope"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],["for","checkInTimeStart",1,"form-label"],[1,"row","g-2"],[1,"col-lg-5"],["type","time","id","checkInTimeStart","formControlName","check_in_time_start",1,"form-control"],[1,"col-auto","align-self-center"],["type","time","id","checkInTimeEnd","formControlName","check_in_time_end",1,"form-control"],["for","checkOutTime",1,"form-label"],["type","time","id","checkOutTime","formControlName","check_out_time",1,"form-control"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","placeholder","Enter password","id","password-input",1,"form-control","pe-5","password-input",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon"],[1,"ri-eye-fill","align-middle",3,"ngClass","click"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg mt-n5 position-relative mx-auto"],[1,"avatar-title","bg-body-secondary","rounded","shadow"],["alt","",1,"avatar-sm",3,"src"],["src","assets/images/companies/img-1.png","alt","",1,"avatar-sm"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){1&s&&(i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"form",1),i.qCj("ngSubmit",function(){return l.onSubmit()}),i.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),i.wR5(6,"iframe",6),i.C$Y(),i.I0R(7,"div",7),i.yuY(8,si,1,1)(9,$e,3,1)(10,ii,3,0)(11,oi,2,0,"div",8),i.I0R(12,"div",9)(13,"input",10,11),i.qCj("change",function(C){return l.companyimageSelect(C)}),i.C$Y(),i.I0R(15,"div",12)(16,"label",13)(17,"span",14),i.wR5(18,"i",15),i.C$Y()()()(),i.I0R(19,"div",16)(20,"h5",17),i.OEk(21),i.C$Y(),i.I0R(22,"p",18),i.OEk(23),i.C$Y()(),i.I0R(24,"div",19)(25,"table",20)(26,"tbody")(27,"tr")(28,"th"),i.OEk(29,"TIN"),i.C$Y(),i.I0R(30,"td"),i.OEk(31),i.C$Y()(),i.I0R(32,"tr")(33,"th"),i.OEk(34,"CIN"),i.C$Y(),i.I0R(35,"td"),i.OEk(36),i.C$Y()(),i.I0R(37,"tr")(38,"th"),i.OEk(39,"Location"),i.C$Y(),i.I0R(40,"td"),i.OEk(41),i.C$Y()(),i.I0R(42,"tr")(43,"th"),i.OEk(44,"Website"),i.C$Y(),i.I0R(45,"td"),i.OEk(46),i.C$Y()(),i.I0R(47,"tr")(48,"th"),i.OEk(49,"Phone Number"),i.C$Y(),i.I0R(50,"td")(51,"a"),i.OEk(52),i.C$Y()()()()()(),i.I0R(53,"ul",21)(54,"li")(55,"a",22),i.wR5(56,"i",23),i.C$Y()(),i.I0R(57,"li")(58,"a",24),i.wR5(59,"i",25),i.C$Y()(),i.I0R(60,"li")(61,"a",26),i.wR5(62,"i",27),i.C$Y()(),i.I0R(63,"li")(64,"a",28),i.wR5(65,"i",29),i.C$Y()()()()()(),i.I0R(66,"div",30)(67,"div",31)(68,"div",32)(69,"h6",33),i.OEk(70,"Company Information"),i.C$Y()(),i.I0R(71,"div",34)(72,"div",35)(73,"div",2)(74,"div",36)(75,"div",37)(76,"label",38),i.OEk(77,"Company name "),i.I0R(78,"span",39),i.OEk(79,"*"),i.C$Y()(),i.wR5(80,"input",40),i.yuY(81,at,2,0,"div",8)(82,ri,2,0,"div",8),i.C$Y()(),i.I0R(83,"div",36)(84,"div",37)(85,"label",41),i.OEk(86,"Business type "),i.I0R(87,"span",39),i.OEk(88,"*"),i.C$Y()(),i.wR5(89,"input",42),i.yuY(90,Xt,2,0,"div",8)(91,Vt,2,0,"div",8),i.C$Y()(),i.I0R(92,"div",36)(93,"div",37)(94,"label",43),i.OEk(95,"Tax Identification Number (TIN) "),i.I0R(96,"span",39),i.OEk(97,"*"),i.C$Y()(),i.wR5(98,"input",44),i.yuY(99,dt,2,0,"div",8),i.C$Y()(),i.I0R(100,"div",36)(101,"div",37)(102,"label",45),i.OEk(103,"Corporate Identification Number (CIN) "),i.I0R(104,"span",39),i.OEk(105,"*"),i.C$Y()(),i.wR5(106,"input",46),i.yuY(107,Zt,2,0,"div",8),i.C$Y()(),i.I0R(108,"div",36)(109,"div",37)(110,"label",47),i.OEk(111,"No. of Employee "),i.I0R(112,"span",39),i.OEk(113,"*"),i.C$Y()(),i.wR5(114,"input",48),i.yuY(115,ni,2,0,"div",8),i.C$Y()(),i.I0R(116,"div",36)(117,"div",37)(118,"label",49),i.OEk(119,"Website Url"),i.I0R(120,"span",39),i.OEk(121,"*"),i.C$Y()(),i.wR5(122,"input",50),i.yuY(123,gi,2,0,"div",8),i.C$Y()(),i.I0R(124,"div",36)(125,"div",37)(126,"label",51),i.OEk(127,"Check-In Time"),i.C$Y(),i.I0R(128,"div",52)(129,"div",53),i.wR5(130,"input",54),i.C$Y(),i.I0R(131,"div",55),i.OEk(132,"to"),i.C$Y(),i.I0R(133,"div",53),i.wR5(134,"input",56),i.C$Y()()()(),i.I0R(135,"div",36)(136,"div",37)(137,"label",57),i.OEk(138,"Check-Out Time"),i.C$Y(),i.wR5(139,"input",58),i.C$Y()()()()()(),i.I0R(140,"div",59)(141,"div",32)(142,"h6",33),i.OEk(143,"Contact Information"),i.C$Y()(),i.I0R(144,"div",34)(145,"div",35)(146,"div",2)(147,"div",60)(148,"div",37)(149,"label",61),i.OEk(150,"Contact person "),i.I0R(151,"span",39),i.OEk(152,"*"),i.C$Y()(),i.wR5(153,"input",62),i.yuY(154,Gi,2,0,"div",8),i.C$Y()(),i.I0R(155,"div",60)(156,"div",37)(157,"label",63),i.OEk(158,"Email "),i.I0R(159,"span",39),i.OEk(160,"*"),i.C$Y()(),i.wR5(161,"input",64),i.yuY(162,vi,2,0,"div",8)(163,Ei,2,0,"div",8),i.C$Y()(),i.I0R(164,"div",60)(165,"div",37)(166,"label",65),i.OEk(167,"Contact Number "),i.I0R(168,"span",39),i.OEk(169,"*"),i.C$Y()(),i.wR5(170,"input",66),i.yuY(171,Fi,2,0,"div",8)(172,Ji,2,0,"div",8),i.C$Y()()()()()(),i.I0R(173,"div",59)(174,"div",32)(175,"h6",33),i.OEk(176,"Address Information"),i.C$Y()(),i.I0R(177,"div",34)(178,"div",35)(179,"div",2)(180,"div",60)(181,"div",37)(182,"label",67),i.OEk(183,"City "),i.I0R(184,"span",39),i.OEk(185,"*"),i.C$Y()(),i.wR5(186,"input",68),i.yuY(187,bn,2,0,"div",8),i.C$Y()(),i.I0R(188,"div",60)(189,"div",37)(190,"label",69),i.OEk(191,"State "),i.I0R(192,"span",39),i.OEk(193,"*"),i.C$Y()(),i.wR5(194,"input",70),i.yuY(195,fn,2,0,"div",8),i.C$Y()(),i.I0R(196,"div",60)(197,"div",37)(198,"label",71),i.OEk(199,"Zip code "),i.I0R(200,"span",39),i.OEk(201,"*"),i.C$Y()(),i.wR5(202,"input",72),i.yuY(203,Gn,2,0,"div",8),i.C$Y()(),i.I0R(204,"div",73)(205,"div",37)(206,"label",74),i.OEk(207," Address "),i.I0R(208,"span",39),i.OEk(209,"*"),i.C$Y()(),i.wR5(210,"textarea",75),i.yuY(211,Qt,2,0,"div",8)(212,Yi,2,0,"div",8),i.C$Y()(),i.I0R(213,"div",60)(214,"div",37)(215,"label",76),i.OEk(216,"Password "),i.I0R(217,"span",39),i.OEk(218,"*"),i.C$Y()(),i.I0R(219,"div",77),i.wR5(220,"input",78),i.I0R(221,"button",79)(222,"i",80),i.qCj("click",function(){return l.toggleFieldTextType()}),i.C$Y()(),i.yuY(223,on,2,0,"div",8)(224,Zn,2,0,"div",8),i.C$Y()()(),i.I0R(225,"div",60)(226,"div",37)(227,"label",81),i.OEk(228,"Status "),i.I0R(229,"span",39),i.OEk(230,"*"),i.C$Y()(),i.I0R(231,"select",82)(232,"option",83),i.OEk(233,"Select Status"),i.C$Y(),i.I0R(234,"option",84),i.OEk(235,"Active"),i.C$Y(),i.I0R(236,"option",85),i.OEk(237,"Inactive"),i.C$Y()(),i.yuY(238,Nn,2,0,"div",8),i.C$Y()(),i.I0R(239,"div",86)(240,"div",87),i.yuY(241,Dn,2,0,"button",88)(242,ji,3,0),i.C$Y()()()()()()(),i.yuY(243,Mr,4,0,"div",89),i.C$Y()()),2&s&&(i.E7m("title",l.urlId?"Edit Company":"Add Company")("breadcrumbItems",l.breadCrumbItems),i.yG2(),i.E7m("formGroup",l.formGroup),i.yG2(7),i.C0Y(8,l.companyselectedImage?8:l.companyuploadedImage?9:10),i.yG2(3),i.C0Y(11,l.f.logo&&l.f.logo.hasError("required")&&l.f.logo.touched?11:-1),i.yG2(10),i.cNF(l.f.name.value),i.yG2(2),i.cNF(l.f.business_type.value),i.yG2(8),i.cNF(l.f.tax_no.value),i.yG2(5),i.cNF(l.f.cin_id.value),i.yG2(5),i.cNF(l.f.address.value),i.yG2(5),i.cNF(l.f.website_url.value),i.yG2(6),i.cNF(l.f.mobile.value),i.yG2(28),i.E7m("ngClass",l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?"is-invalid":""),i.yG2(),i.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),i.yG2(),i.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),i.yG2(7),i.E7m("ngClass",l.f.business_type&&l.f.business_type.hasError("required")&&l.f.business_type.touched?"is-invalid":""),i.yG2(),i.C0Y(90,l.f.business_type&&l.f.business_type.hasError("required")&&l.f.business_type.touched?90:-1),i.yG2(),i.C0Y(91,l.f.business_type&&l.f.business_type.hasError("maxlength")&&l.f.business_type.touched?91:-1),i.yG2(7),i.E7m("ngClass",l.f.tax_no&&l.f.tax_no.hasError("required")&&l.f.tax_no.touched?"is-invalid":""),i.yG2(),i.C0Y(99,l.f.tax_no&&l.f.tax_no.hasError("required")&&l.f.tax_no.touched?99:-1),i.yG2(7),i.E7m("ngClass",l.f.cin_id&&l.f.cin_id.hasError("required")&&l.f.cin_id.touched?"is-invalid":""),i.yG2(),i.C0Y(107,l.f.cin_id&&l.f.cin_id.hasError("required")&&l.f.cin_id.touched?107:-1),i.yG2(7),i.E7m("ngClass",l.f.no_of_emp&&l.f.no_of_emp.hasError("required")&&l.f.no_of_emp.touched?"is-invalid":""),i.yG2(),i.C0Y(115,l.f.no_of_emp&&l.f.no_of_emp.hasError("required")&&l.f.no_of_emp.touched?115:-1),i.yG2(7),i.E7m("ngClass",l.f.website_url&&l.f.website_url.hasError("required")&&l.f.website_url.touched?"is-invalid":""),i.yG2(),i.C0Y(123,l.f.website_url&&l.f.website_url.hasError("required")&&l.f.website_url.touched?123:-1),i.yG2(30),i.E7m("ngClass",l.f.contact_person&&l.f.contact_person.hasError("required")&&l.f.contact_person.touched?"is-invalid":""),i.yG2(),i.C0Y(154,l.f.contact_person&&l.f.contact_person.hasError("required")&&l.f.contact_person.touched?154:-1),i.yG2(7),i.E7m("ngClass",l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?"is-invalid":""),i.yG2(),i.C0Y(162,l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?162:-1),i.yG2(),i.C0Y(163,l.f.email.hasError("pattern")?163:-1),i.yG2(7),i.E7m("ngClass",l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?"is-invalid":""),i.yG2(),i.C0Y(171,l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?171:-1),i.yG2(),i.C0Y(172,l.f.mobile.hasError("pattern")?172:-1),i.yG2(14),i.E7m("ngClass",l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?"is-invalid":""),i.yG2(),i.C0Y(187,l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?187:-1),i.yG2(7),i.E7m("ngClass",l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?"is-invalid":""),i.yG2(),i.C0Y(195,l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?195:-1),i.yG2(7),i.E7m("ngClass",l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?"is-invalid":""),i.yG2(),i.C0Y(203,l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?203:-1),i.yG2(7),i.E7m("ngClass",i.S45(52,or,l.f.address&&l.f.address.errors&&l.f.address.touched)),i.yG2(),i.C0Y(211,l.f.address&&l.f.address.hasError("required")&&l.f.address.touched?211:-1),i.yG2(),i.C0Y(212,l.f.address&&l.f.address.hasError("maxlength")&&l.f.address.touched?212:-1),i.yG2(8),i.E7m("type",l.fieldTextType?"text":"password")("ngClass",i.S45(54,or,l.submitted&&l.f.password.errors)),i.yG2(2),i.E7m("ngClass",i.IBC(56,gr,!l.fieldTextType,l.fieldTextType)),i.yG2(),i.C0Y(223,l.f.password&&l.f.password.hasError("required")&&l.f.password.touched?223:-1),i.yG2(),i.C0Y(224,l.f.password&&l.f.password.hasError("minlength")&&l.f.password.touched?224:-1),i.yG2(7),i.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(238,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?238:-1),i.yG2(3),i.C0Y(241,l.saveButtonActive?241:242),i.yG2(2),i.C0Y(243,l.spinnerStatus?243:-1))},dependencies:[Ue.QF,Je.O,V.sz,V.wd,V.GO,V.ot,V.O4,V.GC,V.ue,V.u,V.uW,V.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}"]})}return r})();var en=Rt(5140),_n=Rt(1768);const Zi=["showModal"],Ui=["deleteRecordModal"];function jn(r,t){if(1&r&&i.wR5(0,"img",79),2&r){const e=i.GaO().$implicit;i._6D("src",e.image,i.K6U)}}function tn(r,t){1&r&&i.wR5(0,"img",80)}const Si=()=>({tab:"personalDetails"});function mn(r,t){if(1&r){const e=i.KQA();i.I0R(0,"ul",81)(1,"li")(2,"a",82),i.wR5(3,"i",83),i.OEk(4," View"),i.C$Y()(),i.I0R(5,"li")(6,"a",84),i.wR5(7,"i",85),i.OEk(8," Edit"),i.C$Y()(),i.I0R(9,"li")(10,"a",86),i.qCj("click",function(){i.usT(e);const l=i.GaO().$implicit,f=i.GaO();return i.CGJ(f.removeItem(l.id))}),i.wR5(11,"i",87),i.OEk(12," Remove"),i.C$Y()()()}if(2&r){const e=i.GaO().$implicit;i.yG2(2),i.CI5("routerLink","/employee-detail/",e.id,""),i.E7m("queryParams",i.q4q(3,Si)),i.yG2(4),i.CI5("routerLink","/edit-employee/",e.id,"")}}const Pn=(r,t)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":t});function Lr(r,t){if(1&r){const e=i.KQA();i.I0R(0,"tr",58)(1,"td")(2,"div",23)(3,"input",59),i.iHE("ngModelChange",function(l){const C=i.usT(e).$implicit;return i.kNx(C.states,l)||(C.states=l),i.CGJ(l)}),i.qCj("change",function(l){i.usT(e);const f=i.GaO();return i.CGJ(f.onCheckboxChange(l))}),i.C$Y(),i.wR5(4,"label",60),i.C$Y()(),i.I0R(5,"td",61)(6,"a",62),i.OEk(7,"#TB01"),i.C$Y()(),i.I0R(8,"td",63)(9,"div",64)(10,"div",65),i.yuY(11,jn,1,1,"img",66)(12,tn,1,0),i.C$Y(),i.I0R(13,"div")(14,"h6",67)(15,"a",68),i.OEk(16),i.C$Y()()()()(),i.I0R(17,"td",69),i.OEk(18),i.C$Y(),i.I0R(19,"td",69),i.OEk(20),i.C$Y(),i.I0R(21,"td",69),i.OEk(22),i.C$Y(),i.I0R(23,"td",69),i.OEk(24),i.C$Y(),i.I0R(25,"td",70)(26,"div",71)(27,"input",72),i.qCj("change",function(l){const C=i.usT(e).$implicit,z=i.GaO();return i.CGJ(z.setStatus(C.id,l))}),i.C$Y(),i.I0R(28,"label",73)(29,"span",74),i.OEk(30),i.C$Y()()()(),i.I0R(31,"td")(32,"div",75)(33,"button",76),i.wR5(34,"i",77),i.C$Y(),i.yuY(35,mn,13,4,"ul",78),i.C$Y()()()}if(2&r){const e=t.$implicit,s=t.$index;i.CI5("id","p_",e._id,""),i.yG2(3),i._6D("value",e._id),i.OKB("ngModel",e.states),i.yG2(8),i.C0Y(11,e.image?11:12),i.yG2(5),i.cNF(e.name),i.yG2(2),i.oRS(" ",e.mobile," "),i.yG2(2),i.oRS(" ",e.employee_id," "),i.yG2(2),i.oRS(" ",e.designation," "),i.yG2(2),i.oRS(" ",e.department," "),i.yG2(3),i.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),i.yG2(),i.E7m("for","customSwitchsizemd"+s),i.yG2(),i.E7m("ngClass",i.IBC(14,Pn,"active"===e.status,"inactive"===e.status)),i.yG2(),i.oRS(" ",e.status," ")}}function Or(r,t){1&r&&(i.I0R(0,"div",28)(1,"div",88)(2,"span",89),i.OEk(3,"Loading..."),i.C$Y()()())}let Sr=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.api=s,this.toastService=l,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management",active:!0},{label:"Employees",active:!0}];const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.getemployeeData()}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(s=>{s&&s.status?(this.toggleSpinner(!1),this.employeeData=s.data||[],this.employeeDataList=s.data||[]):this.handleError("Unexpected response format")},s=>{this.handleError(s.message||"An error occurred while fetching data")})}setStatus(e,s){const f=s.target.checked?"active":"inactive",C=new FormData;C.append("status",f),this.toggleSpinner(!0),this.api.put("employees",e,C).subscribe(z=>this.handleStatusChangeResponse(z),z=>this.handleError(z))}toggleSpinner(e){this.spinnerStatus=e}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(e.message)}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("employees",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("employees-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Employee Data Delete Successfully!!"),this.getemployeeData(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.employeeData];s.sort((l,f)=>{const C=this.compare(l[e],f[e]);return"asc"===this.direction?C:-C}),this.employeeData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.employeeData=this.employeeDataList.slice(s,this.endItem)}filterdata(){this.employeeData=this.term?this.employeeDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())||e.mobile.toLowerCase().includes(this.term.toLowerCase())||e.email.toLowerCase().includes(this.term.toLowerCase())||e.designation.toLowerCase().includes(this.term.toLowerCase())||e.department.toLowerCase().includes(this.term.toLowerCase())||e.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.employeeDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.employeeData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}onCheckboxChange(e){for(var s=[],f=0;f<this.employeeData.length;f++)1==this.employeeData[f].states&&s.push(this.employeeData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.employeeData=this.employeeData.map(C=>({...C,states:e.target.checked}));for(var s=[],f=0;f<this.employeeData.length;f++)1==this.employeeData[f].states&&s.push(this.employeeData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(V.im),i.GI1(De),i.GI1(Fe.SA))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-employee-list"]],viewQuery:function(s,l){if(1&s&&(i.CC$(Zi,5),i.CC$(Ui,5)),2&s){let f;i.wto(f=i.Gqi())&&(l.showModal=f.first),i.wto(f=i.Gqi())&&(l.deleteRecordModal=f.first)}},decls:90,vars:10,consts:[["title","Employees List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile,etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button","routerLink","/add-employee",1,"btn","btn-primary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"text-danger"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","","class","img-fluid d-block",3,"src"],[1,"mb-0"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"category"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ph-pencil","align-middle","me-1"],[1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=i.KQA();i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),i.OEk(8," Employeess "),i.I0R(9,"span",8),i.OEk(10),i.C$Y()()(),i.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),i.iHE("ngModelChange",function(z){return i.kNx(l.term,z)||(l.term=z),z}),i.qCj("keyup",function(){return l.filterdata()}),i.C$Y(),i.wR5(16,"i",14),i.C$Y()(),i.I0R(17,"button",15),i.qCj("click",function(){i.usT(f);const z=i.Gew(71);return i.CGJ(z.show())}),i.wR5(18,"i",16),i.C$Y(),i.I0R(19,"button",17),i.wR5(20,"i",18),i.OEk(21," Add Employee "),i.C$Y()()()(),i.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),i.iHE("ngModelChange",function(z){return i.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),i.qCj("change",function(z){return l.checkUncheckAll(z)}),i.C$Y(),i.wR5(30,"label",25),i.C$Y()(),i.I0R(31,"th",26),i.qCj("click",function(){return l.onSort("name")}),i.OEk(32," Employee Name "),i.C$Y(),i.I0R(33,"th",26),i.qCj("click",function(){return l.onSort("mobile")}),i.OEk(34," Mobile "),i.C$Y(),i.I0R(35,"th",26),i.qCj("click",function(){return l.onSort("employee_id")}),i.OEk(36," Employee ID "),i.C$Y(),i.I0R(37,"th",26),i.qCj("click",function(){return l.onSort("designation")}),i.OEk(38," Designation "),i.C$Y(),i.I0R(39,"th",26),i.qCj("click",function(){return l.onSort("department")}),i.OEk(40," Department "),i.C$Y(),i.I0R(41,"th",26),i.qCj("click",function(){return l.onSort("status")}),i.OEk(42," Status "),i.C$Y(),i.I0R(43,"th"),i.OEk(44,"Action"),i.C$Y()()(),i.I0R(45,"tbody",27),i.c53(46,Lr,36,17,"tr",58,i.wJt),i.C$Y(),i.yuY(48,Or,4,0,"div",28),i.C$Y()(),i.I0R(49,"div",29)(50,"div",30)(51,"div",31)(52,"div",32),i.wR5(53,"i",33),i.C$Y()(),i.I0R(54,"h5",34),i.OEk(55,"Sorry! No Result Found"),i.C$Y(),i.I0R(56,"p",35),i.OEk(57),i.C$Y()()(),i.I0R(58,"div",36)(59,"div",37)(60,"div",38),i.OEk(61," Showing "),i.I0R(62,"span",39),i.OEk(63),i.C$Y(),i.OEk(64," of "),i.I0R(65,"span",39),i.OEk(66),i.C$Y(),i.OEk(67," Results "),i.C$Y()(),i.I0R(68,"div",40)(69,"pagination",41),i.qCj("pageChanged",function(z){return l.pageChanged(z)}),i.C$Y()()()()()()()(),i.I0R(70,"div",42,43)(72,"div",44)(73,"div",45)(74,"div",46)(75,"button",47),i.qCj("click",function(){i.usT(f);const z=i.Gew(71);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(76,"div",48)(77,"div",49)(78,"div",50),i.wR5(79,"i",51),i.C$Y(),i.I0R(80,"div",52)(81,"h3",53),i.OEk(82,"Are you sure ?"),i.C$Y(),i.I0R(83,"p",54),i.OEk(84," Are you sure you want to remove this record ? "),i.C$Y()()(),i.I0R(85,"div",55)(86,"button",56),i.qCj("click",function(){i.usT(f);const z=i.Gew(71);return i.CGJ(z.hide())}),i.OEk(87," Close "),i.C$Y(),i.I0R(88,"button",57),i.qCj("click",function(){return l.deleteData(l.deleteId)}),i.OEk(89," Yes, Delete It! "),i.C$Y()()()()()()}2&s&&(i.E7m("breadcrumbItems",l.breadCrumbItems),i.yG2(10),i.cNF(null==l.employeeDataList?null:l.employeeDataList.length),i.yG2(5),i.OKB("ngModel",l.term),i.yG2(14),i.OKB("ngModel",l.masterSelected),i.yG2(17),i.oho(l.employeeData),i.yG2(2),i.C0Y(48,l.spinnerStatus?48:-1),i.yG2(9),i.oRS(" We've searched ",l.employeeDataList.length," Department We did not find any Department for you search. "),i.yG2(6),i.cNF(null==l.employeeData?null:l.employeeData.length),i.yG2(3),i.cNF(null==l.employeeDataList?null:l.employeeDataList.length),i.yG2(3),i.E7m("totalItems",null==l.employeeDataList?null:l.employeeDataList.length)("itemsPerPage",10))},dependencies:[Ue.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.ot,V.SU,V.ue,V._G,nt.im,_n.uK],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return r})();var vr=Rt(7995);const ar=["showModal"],kn=["showModalDepartment"];function dr(r,t){if(1&r&&i.wR5(0,"img",98),2&r){const e=i.GaO(2);i.E7m("src",e.employeeselectedImagePreview,i.K6U)}}function Fr(r,t){if(1&r&&i.yuY(0,dr,1,1,"img",97),2&r){const e=i.GaO();i.C0Y(0,e.employeeselectedImagePreview?0:-1)}}function Cs(r,t){if(1&r&&i.wR5(0,"img",99),2&r){const e=i.GaO();i.E7m("src",e.employeeuploadedImage,i.K6U)}}function er(r,t){1&r&&i.wR5(0,"img",100)}function br(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Image is required."),i.C$Y())}function mr(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Empolyee name is required."),i.C$Y())}function Tr(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Empolyee name must be at most 45 characters "),i.C$Y())}function Xr(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Employee Id is required."),i.C$Y())}function Ct(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Email is required."),i.C$Y())}function Ie(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Email must be a valid email address "),i.C$Y())}function Be(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Mobile is required."),i.C$Y())}function ct(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Please, Enter 10 digit Mobile Number. "),i.C$Y())}function lt(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Date of Birth is required."),i.C$Y())}function zt(r,t){if(1&r&&(i.I0R(0,"option",102),i.OEk(1),i.C$Y()),2&r){const e=t.$implicit;i._6D("value",e.slug),i.yG2(),i.cNF(e.name)}}function qt(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Designation is required."),i.C$Y())}function Kt(r,t){if(1&r&&(i.I0R(0,"option",102),i.OEk(1),i.C$Y()),2&r){const e=t.$implicit;i._6D("value",e.slug),i.yG2(),i.cNF(e.name)}}function pt(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Department is required."),i.C$Y())}function ui(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Gender is required."),i.C$Y())}function Vi(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Address is required."),i.C$Y())}function $i(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Address must be at most 100 characters "),i.C$Y())}function di(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"City is required."),i.C$Y())}function un(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Zip code is required. "),i.C$Y())}function Et(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Invalid zip code. "),i.C$Y())}function St(r,t){if(1&r&&(i.I0R(0,"div"),i.yuY(1,un,2,0,"div",103)(2,Et,2,0,"div",103),i.C$Y()),2&r){const e=i.GaO();i.yG2(),i.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("required")),i.yG2(),i.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("maxlength"))}}function Ke(r,t){if(1&r&&(i.I0R(0,"option",102),i.OEk(1),i.C$Y()),2&r){const e=t.$implicit;i.E7m("value",e),i.yG2(),i.oRS(" ",e," ")}}function Ze(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"State is required."),i.C$Y())}function Re(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Status is required."),i.C$Y())}function He(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Password is required. "),i.C$Y())}const ft=r=>({"is-invalid":r}),Yt=(r,t)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":t});function xi(r,t){if(1&r){const e=i.KQA();i.I0R(0,"div",56)(1,"div",104)(2,"label",105),i.OEk(3,"New Password*"),i.C$Y(),i.I0R(4,"div",106)(5,"input",107),i.qCj("input",function(){i.usT(e);const l=i.GaO();return i.CGJ(l.checkPasswordPattern())}),i.C$Y(),i.I0R(6,"button",108),i.qCj("click",function(){i.usT(e);const l=i.GaO();return i.CGJ(l.toggleFieldTextType1())}),i.wR5(7,"i",109),i.C$Y()(),i.yuY(8,He,2,0,"div",103),i.C$Y()()}if(2&r){const e=i.GaO();i.yG2(5),i.E7m("type",e.fieldTextType1?"text":"password")("ngClass",i.S45(4,ft,e.f.password.hasError("required")&&e.f.password.touched)),i.yG2(2),i.E7m("ngClass",i.IBC(6,Yt,!e.fieldTextType1,e.fieldTextType1)),i.yG2(),i.E7m("ngIf",e.f.password.hasError("required")&&e.f.password.touched)}}function fi(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Confirm Password is required. "),i.C$Y())}function Pi(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Password and Confirm Password does not match. "),i.C$Y())}function rt(r,t){if(1&r){const e=i.KQA();i.I0R(0,"div",56)(1,"div",104)(2,"label",110),i.OEk(3,"Confirm Password*"),i.C$Y(),i.I0R(4,"div",106),i.wR5(5,"input",111),i.I0R(6,"button",108),i.qCj("click",function(){i.usT(e);const l=i.GaO();return i.CGJ(l.toggleFieldTextType2())}),i.wR5(7,"i",109),i.C$Y()(),i.yuY(8,fi,2,0,"div",103)(9,Pi,2,0,"div",103),i.C$Y()()}if(2&r){const e=i.GaO();i.yG2(5),i.E7m("type",e.fieldTextType2?"text":"password")("ngClass",i.S45(5,ft,e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched)),i.yG2(2),i.E7m("ngClass",i.IBC(7,Yt,!e.fieldTextType2,e.fieldTextType2)),i.yG2(),i.E7m("ngIf",e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched),i.yG2(),i.E7m("ngIf",e.formGroup.hasError("mismatch")&&(null==e.f.confirmPassword?null:e.f.confirmPassword.value)&&(null==e.f.password?null:e.f.password.value))}}function yt(r,t){if(1&r&&(i.I0R(0,"div",112)(1,"div",113)(2,"div",20)(3,"div",114)(4,"h5",115),i.OEk(5,"Password must contain:"),i.C$Y()(),i.I0R(6,"div")(7,"p",116),i.OEk(8," Minimum "),i.I0R(9,"b"),i.OEk(10,"8 characters"),i.C$Y()(),i.I0R(11,"p",117),i.OEk(12," At least "),i.I0R(13,"b"),i.OEk(14,"one lowercase"),i.C$Y(),i.OEk(15," letter (a-z) "),i.C$Y(),i.I0R(16,"p",118),i.OEk(17," At least "),i.I0R(18,"b"),i.OEk(19,"one uppercase"),i.C$Y(),i.OEk(20," letter (A-Z) "),i.C$Y(),i.I0R(21,"p",119),i.OEk(22," At least "),i.I0R(23,"b"),i.OEk(24,"one number"),i.C$Y(),i.OEk(25," (0-9) "),i.C$Y(),i.I0R(26,"p",120),i.OEk(27," At least "),i.I0R(28,"b"),i.OEk(29,"one special character"),i.C$Y(),i.OEk(30," (!@#$!%*?&) "),i.C$Y()()()()()),2&r){const e=i.GaO();i.yG2(7),i.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),i.yG2(4),i.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),i.yG2(5),i.eAK("valid",e.passwordValidations.upper),i.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),i.yG2(5),i.E7m("ngClass",e.passwordValidations.number?"valid":"invalid"),i.yG2(5),i.E7m("ngClass",e.passwordValidations.special?"valid":"invalid")}}function fe(r,t){1&r&&(i.I0R(0,"button",121),i.OEk(1,"Save"),i.C$Y())}function it(r,t){1&r&&(i.I0R(0,"button",122),i.wR5(1,"span",123),i.OEk(2," Please wait "),i.C$Y())}function Tt(r,t){1&r&&(i.I0R(0,"div",77)(1,"div",124)(2,"span",125),i.OEk(3,"Loading..."),i.C$Y()()())}function Pe(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Designation name is required."),i.C$Y())}function It(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Designation name must be at most 45 characters "),i.C$Y())}function le(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Status is required."),i.C$Y())}function o(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Department name is required."),i.C$Y())}function c(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1," Department name must be at most 45 characters "),i.C$Y())}function h(r,t){1&r&&(i.I0R(0,"div",101),i.OEk(1,"Status is required."),i.C$Y())}let _=(()=>{class r{constructor(e,s,l,f,C){this.route=e,this.formBuilder=s,this.api=l,this.router=f,this.toastService=C,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"],this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1,special:!1},this.useDefaultPassword=!0,this.departments=[],this.designations=[]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(s=>{this.urlId=s.id?Number(s.id):null}),this.initializeForm(),this.urlId&&(this.useDefaultPassword=!1,this.getemployeeData());const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.updateFormControls(),this.getDepartment(),this.getDesignation(),this.formGroupDesignation=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]}),this.formGroupDepartment=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],address:["",[V.AQ.maxLength(100),V.AQ.required]],dob:["",[V.AQ.required]],image:["",this.imageValidator()],emp_id:["",[V.AQ.required]],email:["",[V.AQ.required,V.AQ.email,V.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[V.AQ.required,V.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[V.AQ.required]],gender:["",[V.AQ.required]],state:["",[V.AQ.required]],city:["",[V.AQ.required]],zip_code:["",[V.AQ.required,V.AQ.maxLength(6)]],designation:["",[V.AQ.required]],department:["",[V.AQ.required]],joining_date:[""],password:[this.urlId?"":"123456",this.urlId?[V.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]:[V.AQ.required,V.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:[this.urlId?"":"123456",this.urlId?[]:[V.AQ.required]]},{validator:this.passwordMatchValidator})}imageValidator(){}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}passwordMatchValidator(e){const s=e.get("password")?.value,l=e.get("confirmPassword")?.value;return s&&l?s===l?null:{mismatch:!0}:null}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e),this.passwordValidations.special=/[@$!%*?&]/.test(e)}onCheckboxChange(e){this.useDefaultPassword=e.target.checked,this.updateFormControls()}updateFormControls(){this.useDefaultPassword?(this.formGroup.get("password")?.setValue("123456"),this.formGroup.get("confirmPassword")?.setValue("123456"),this.formGroup.get("password")?.disable(),this.formGroup.get("confirmPassword")?.disable()):(this.formGroup.get("password")?.enable(),this.formGroup.get("confirmPassword")?.enable(),this.formGroup.get("password")?.setValue(""),this.formGroup.get("confirmPassword")?.setValue(""))}get f(){return this.formGroup.controls}get d(){return this.formGroupDesignation.controls}get de(){return this.formGroupDepartment.controls}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department?status=active").subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid("designation?status=active").subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setemployeeDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setemployeeDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,dob:e.dob,emp_id:e.employee_id,email:e.email,password:e.password,status:e.status,mobile:e.mobile,joining_date:e.joining_date,gender:e.gender,designation:e.designation,department:e.department,state:e.state,city:e.city,zip_code:e.zip_code}),this.employeeuploadedImage=e.image||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.urlId?this.updateemployee(e):this.addemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.company_id),e.append("name",this.f.name.value),e.append("mobile",this.f.mobile.value),e.append("email",this.f.email.value),e.append("address",this.f.address.value),e.append("dob",this.f.dob.value),e.append("employee_id",this.f.emp_id.value),e.append("status",this.f.status.value),e.append("joining_date",this.f.joining_date.value),e.append("gender",this.f.gender.value),e.append("designation",this.f.designation.value),e.append("department",this.f.department.value),e.append("state",this.f.state.value),e.append("city",this.f.city.value),e.append("zip_code",this.f.zip_code.value),this.f.password.value&&e.append("password",this.f.password.value),this.employeeselectedImage&&e.append("image",this.employeeselectedImage),e}addemployee(e){this.api.post("employees",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(e.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}employeeimageSelect(e){const s=e.target.files[0];s&&(this.employeeselectedImage=s,this.employeeselectedImagePreview=URL.createObjectURL(s))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}onAdd(){this.resetFormDes(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDes(){this.formGroupDesignation.reset(),this.formGroupDesignation.patchValue({name:"",status:""})}onSubmitDes(){if(this.formGroupDesignation.valid){this.toggleSpinner(!0);const e=this.createFormDataDes();this.adddes(e)}else this.formGroupDesignation.markAllAsTouched()}createFormDataDes(){return{name:this.d.name.value,status:this.d.status.value}}adddes(e){this.api.post("designation",e).subscribe(s=>this.handleResponseDes(s),s=>this.handleError(s))}handleResponseDes(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDesignation.reset(),this.toastService.success("Designation Created Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}onAdddep(){this.resetFormDes(),this.showModalDepartment?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDep(){this.formGroupDepartment.reset(),this.formGroupDepartment.patchValue({name:"",status:""})}onSubmitDep(){if(this.formGroupDepartment.valid){this.toggleSpinner(!0);const e=this.createFormDataDep();this.adddep(e)}else this.formGroupDepartment.markAllAsTouched()}createFormDataDep(){return{name:this.de.name.value,status:this.de.status.value}}adddep(e){this.api.post("department",e).subscribe(s=>this.handleResponseDep(s),s=>this.handleError(s))}handleResponseDep(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDepartment.reset(),this.toastService.success("Department Created Successfully!!"),this.getDepartment(),this.showModalDepartment?.hide()):this.toastService.error(e.message)}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(k.gV),i.GI1(V.im),i.GI1(De),i.GI1(k.E5),i.GI1(Fe.SA))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-add-employee"]],viewQuery:function(s,l){if(1&s&&(i.CC$(ar,5),i.CC$(kn,5)),2&s){let f;i.wto(f=i.Gqi())&&(l.showModal=f.first),i.wto(f=i.Gqi())&&(l.showModalDepartment=f.first)}},decls:271,vars:52,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage","placement","right","tooltip","Select Employee Photo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],[1,"d-flex"],[1,"flex-grow-1"],["for","designation",1,"form-label"],[1,"flex-shrink-0"],[1,"link-effect",3,"click"],[1,"bi","bi-arrow-right","align-baseline","ms-1"],["id","designation","formControlName","designation","placeholder","Enter Designation",1,"form-select"],["selected",""],["for","departments",1,"form-label"],["id","departments","formControlName","department","placeholder","Enter Department",1,"form-select"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-lg-6","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage",1,"form-check-input",3,"checked","change"],["class","col-lg-4",4,"ngIf"],["class","col-lg-12 mt-4"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["showModalDepartment","bs-modal"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[3,"value"],["class","invalid-text",4,"ngIf"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=i.KQA();i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"form",1),i.qCj("ngSubmit",function(){return l.onSubmit()}),i.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),i.wR5(6,"img",5),i.C$Y(),i.I0R(7,"div",6)(8,"div",7)(9,"div",8),i.yuY(10,Fr,1,1)(11,Cs,1,1)(12,er,1,0)(13,br,2,0,"div",9),i.I0R(14,"input",10,11),i.qCj("change",function(z){return l.employeeimageSelect(z)}),i.C$Y(),i.I0R(16,"div",12)(17,"label",13)(18,"span",14),i.wR5(19,"i",15),i.C$Y()()()()()()()(),i.I0R(20,"div",16)(21,"div",17)(22,"div",18)(23,"h6",19),i.OEk(24,"Personal Details"),i.C$Y()(),i.I0R(25,"div",20)(26,"div",21)(27,"div",2)(28,"div",22)(29,"div",23)(30,"label",24),i.OEk(31,"Empolyee Name "),i.I0R(32,"span",25),i.OEk(33,"*"),i.C$Y()(),i.wR5(34,"input",26),i.yuY(35,mr,2,0,"div",9)(36,Tr,2,0,"div",9),i.C$Y()(),i.I0R(37,"div",22)(38,"div",23)(39,"label",27),i.OEk(40,"Employee Id "),i.I0R(41,"span",25),i.OEk(42,"*"),i.C$Y()(),i.wR5(43,"input",28),i.yuY(44,Xr,2,0,"div",9),i.C$Y()(),i.I0R(45,"div",22)(46,"div",23)(47,"label",29),i.OEk(48,"Email "),i.I0R(49,"span",25),i.OEk(50,"*"),i.C$Y()(),i.wR5(51,"input",30),i.yuY(52,Ct,2,0,"div",9)(53,Ie,2,0,"div",9),i.C$Y()(),i.I0R(54,"div",22)(55,"div",23)(56,"label",31),i.OEk(57,"Contact Number "),i.I0R(58,"span",25),i.OEk(59,"*"),i.C$Y()(),i.wR5(60,"input",32),i.yuY(61,Be,2,0,"div",9)(62,ct,2,0,"div",9),i.C$Y()(),i.I0R(63,"div",22)(64,"div",23)(65,"label",33),i.OEk(66,"Date of Birth "),i.I0R(67,"span",25),i.OEk(68,"*"),i.C$Y()(),i.wR5(69,"input",34),i.yuY(70,lt,2,0,"div",9),i.C$Y()(),i.I0R(71,"div",22)(72,"div",23)(73,"label",35),i.OEk(74,"Joining Date"),i.C$Y(),i.wR5(75,"input",36),i.C$Y()(),i.I0R(76,"div",22)(77,"div",23)(78,"div",37)(79,"div",38)(80,"label",39),i.OEk(81,"Designation "),i.I0R(82,"span",25),i.OEk(83,"*"),i.C$Y()()(),i.I0R(84,"div",40)(85,"a",41),i.qCj("click",function(){return l.onAdd()}),i.OEk(86,"Create New "),i.wR5(87,"i",42),i.C$Y()()(),i.I0R(88,"select",43)(89,"option",44),i.OEk(90,"Select Designation"),i.C$Y(),i.c53(91,zt,2,2,"option",102,i.wJt),i.C$Y(),i.yuY(93,qt,2,0,"div",9),i.C$Y()(),i.I0R(94,"div",22)(95,"div",23)(96,"div",37)(97,"div",38)(98,"label",45),i.OEk(99,"Department "),i.I0R(100,"span",25),i.OEk(101,"*"),i.C$Y()()(),i.I0R(102,"div",40)(103,"a",41),i.qCj("click",function(){return l.onAdddep()}),i.OEk(104,"Create New "),i.wR5(105,"i",42),i.C$Y()()(),i.I0R(106,"select",46)(107,"option",44),i.OEk(108,"Select Department"),i.C$Y(),i.c53(109,Kt,2,2,"option",102,i.wJt),i.C$Y(),i.yuY(111,pt,2,0,"div",9),i.C$Y()(),i.I0R(112,"div",22)(113,"div",23)(114,"label",47),i.OEk(115,"Gender "),i.I0R(116,"span",25),i.OEk(117,"*"),i.C$Y()(),i.I0R(118,"select",48)(119,"option",49),i.OEk(120,"Select Gender"),i.C$Y(),i.I0R(121,"option",50),i.OEk(122,"Male"),i.C$Y(),i.I0R(123,"option",51),i.OEk(124,"Female"),i.C$Y(),i.I0R(125,"option",52),i.OEk(126,"Other"),i.C$Y()(),i.yuY(127,ui,2,0,"div",9),i.C$Y()(),i.I0R(128,"div",53)(129,"div",23)(130,"label",54),i.OEk(131," Address "),i.I0R(132,"span",25),i.OEk(133,"*"),i.C$Y()(),i.wR5(134,"textarea",55),i.yuY(135,Vi,2,0,"div",9)(136,$i,2,0,"div",9),i.C$Y()(),i.I0R(137,"div",56)(138,"div",23)(139,"label",57),i.OEk(140,"City "),i.I0R(141,"span",25),i.OEk(142,"*"),i.C$Y()(),i.wR5(143,"input",58),i.yuY(144,di,2,0,"div",9),i.C$Y()(),i.I0R(145,"div",56)(146,"div",23)(147,"label",59),i.OEk(148,"Zip code "),i.I0R(149,"span",25),i.OEk(150,"*"),i.C$Y()(),i.wR5(151,"input",60),i.yuY(152,St,3,2,"div",61),i.C$Y()(),i.I0R(153,"div",56)(154,"div",23)(155,"label",62),i.OEk(156,"State "),i.I0R(157,"span",25),i.OEk(158,"*"),i.C$Y()(),i.I0R(159,"select",63)(160,"option",49),i.OEk(161,"Select State"),i.C$Y(),i.yuY(162,Ke,2,2,"option",64),i.C$Y(),i.yuY(163,Ze,2,0,"div",9),i.C$Y()(),i.I0R(164,"div",22)(165,"div",23)(166,"label",65),i.OEk(167,"Status "),i.I0R(168,"span",25),i.OEk(169,"*"),i.C$Y()(),i.I0R(170,"select",66)(171,"option",49),i.OEk(172,"Select Status"),i.C$Y(),i.I0R(173,"option",67),i.OEk(174,"Active"),i.C$Y(),i.I0R(175,"option",68),i.OEk(176,"Inactive"),i.C$Y()(),i.yuY(177,Re,2,0,"div",9),i.C$Y()(),i.I0R(178,"div",69)(179,"li",37)(180,"div",40)(181,"div",70)(182,"input",71),i.qCj("change",function(z){return l.onCheckboxChange(z)}),i.C$Y(),i.OEk(183," Use Default Password (Password : 123456) "),i.C$Y()()()(),i.yuY(184,xi,9,9,"div",72)(185,rt,10,10,"div",72)(186,yt,31,7,"div",73),i.C$Y(),i.I0R(187,"div",74)(188,"div",75),i.yuY(189,fe,2,0,"button",76)(190,it,3,0),i.C$Y()(),i.wR5(191,"div"),i.C$Y(),i.yuY(192,Tt,4,0,"div",77),i.C$Y()()()()(),i.I0R(193,"div",78,79),i.qCj("hidden.bs.modal",function(){return l.resetFormDes()}),i.I0R(195,"div",80)(196,"div",81)(197,"div",82)(198,"h5",83),i.OEk(199,"Add Designation"),i.C$Y(),i.I0R(200,"button",84),i.qCj("click",function(){i.usT(f);const z=i.Gew(194);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(201,"form",85),i.qCj("ngSubmit",function(){return l.onSubmitDes()}),i.I0R(202,"div",86),i.wR5(203,"div",87),i.I0R(204,"div",23)(205,"label",88),i.OEk(206,"Designation Name "),i.I0R(207,"span",25),i.OEk(208,"*"),i.C$Y()(),i.wR5(209,"input",89),i.yuY(210,Pe,2,0,"div",9)(211,It,2,0,"div",9),i.C$Y(),i.I0R(212,"div",23)(213,"label",65),i.OEk(214,"Status "),i.I0R(215,"span",25),i.OEk(216,"*"),i.C$Y()(),i.I0R(217,"select",66)(218,"option",49),i.OEk(219,"Select Status"),i.C$Y(),i.I0R(220,"option",67),i.OEk(221,"Active"),i.C$Y(),i.I0R(222,"option",68),i.OEk(223,"Inactive"),i.C$Y()(),i.yuY(224,le,2,0,"div",9),i.C$Y()(),i.I0R(225,"div",90)(226,"div",91)(227,"button",92),i.qCj("click",function(){i.usT(f);const z=i.Gew(194);return i.CGJ(z.hide())}),i.wR5(228,"i",93),i.OEk(229," Close "),i.C$Y(),i.I0R(230,"button",94),i.OEk(231," Add "),i.C$Y()()()()()()(),i.I0R(232,"div",78,95),i.qCj("hidden.bs.modal",function(){return l.resetFormDep()}),i.I0R(234,"div",80)(235,"div",81)(236,"div",82)(237,"h5",83),i.OEk(238,"Add Department"),i.C$Y(),i.I0R(239,"button",84),i.qCj("click",function(){i.usT(f);const z=i.Gew(233);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(240,"form",85),i.qCj("ngSubmit",function(){return l.onSubmitDep()}),i.I0R(241,"div",86),i.wR5(242,"div",87),i.I0R(243,"div",23)(244,"label",88),i.OEk(245,"Department Name "),i.I0R(246,"span",25),i.OEk(247,"*"),i.C$Y()(),i.wR5(248,"input",96),i.yuY(249,o,2,0,"div",9)(250,c,2,0,"div",9),i.C$Y(),i.I0R(251,"div",23)(252,"label",65),i.OEk(253,"Status "),i.I0R(254,"span",25),i.OEk(255,"*"),i.C$Y()(),i.I0R(256,"select",66)(257,"option",49),i.OEk(258,"Select Status"),i.C$Y(),i.I0R(259,"option",67),i.OEk(260,"Active"),i.C$Y(),i.I0R(261,"option",68),i.OEk(262,"Inactive"),i.C$Y()(),i.yuY(263,h,2,0,"div",9),i.C$Y()(),i.I0R(264,"div",90)(265,"div",91)(266,"button",92),i.qCj("click",function(){i.usT(f);const z=i.Gew(233);return i.CGJ(z.hide())}),i.wR5(267,"i",93),i.OEk(268," Close "),i.C$Y(),i.I0R(269,"button",94),i.OEk(270," Add "),i.C$Y()()()()()()()}2&s&&(i.E7m("title",l.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",l.breadCrumbItems),i.yG2(),i.E7m("formGroup",l.formGroup),i.yG2(9),i.C0Y(10,l.employeeselectedImage?10:l.employeeuploadedImage?11:12),i.yG2(3),i.C0Y(13,l.f.image&&l.f.image.hasError("required")&&l.f.image.touched?13:-1),i.yG2(21),i.E7m("ngClass",l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?"is-invalid":""),i.yG2(),i.C0Y(35,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?35:-1),i.yG2(),i.C0Y(36,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?36:-1),i.yG2(7),i.E7m("ngClass",l.f.emp_id&&l.f.emp_id.hasError("required")&&l.f.emp_id.touched?"is-invalid":""),i.yG2(),i.C0Y(44,l.f.emp_id&&l.f.emp_id.hasError("required")&&l.f.emp_id.touched?44:-1),i.yG2(7),i.E7m("ngClass",l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?"is-invalid":""),i.yG2(),i.C0Y(52,l.f.email&&l.f.email.hasError("required")&&l.f.email.touched?52:-1),i.yG2(),i.C0Y(53,l.f.email.hasError("pattern")?53:-1),i.yG2(7),i.E7m("ngClass",l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?"is-invalid":""),i.yG2(),i.C0Y(61,l.f.mobile&&l.f.mobile.hasError("required")&&l.f.mobile.touched?61:-1),i.yG2(),i.C0Y(62,l.f.mobile.hasError("pattern")?62:-1),i.yG2(7),i.E7m("ngClass",l.f.dob&&l.f.dob.hasError("required")&&l.f.dob.touched?"is-invalid":""),i.yG2(),i.C0Y(70,l.f.dob&&l.f.dob.hasError("required")&&l.f.dob.touched?70:-1),i.yG2(21),i.oho(l.designations),i.yG2(2),i.C0Y(93,l.f.designation&&l.f.designation.hasError("required")&&l.f.designation.touched?93:-1),i.yG2(16),i.oho(l.departments),i.yG2(2),i.C0Y(111,l.f.department&&l.f.department.hasError("required")&&l.f.department.touched?111:-1),i.yG2(7),i.E7m("ngClass",l.f.gender&&l.f.gender.hasError("required")&&l.f.gender.touched?"is-invalid":""),i.yG2(9),i.C0Y(127,l.f.gender&&l.f.gender.hasError("required")&&l.f.gender.touched?127:-1),i.yG2(7),i.E7m("ngClass",i.S45(50,ft,l.f.address&&l.f.address.errors&&l.f.address.touched)),i.yG2(),i.C0Y(135,l.f.address&&l.f.address.hasError("required")&&l.f.address.touched?135:-1),i.yG2(),i.C0Y(136,l.f.address&&l.f.address.hasError("maxlength")&&l.f.address.touched?136:-1),i.yG2(7),i.E7m("ngClass",l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?"is-invalid":""),i.yG2(),i.C0Y(144,l.f.city&&l.f.city.hasError("required")&&l.f.city.touched?144:-1),i.yG2(7),i.E7m("ngClass",l.f.zip_code&&l.f.zip_code.hasError("required")&&l.f.zip_code.touched?"is-invalid":""),i.yG2(),i.E7m("ngIf",(null==l.f.zip_code?null:l.f.zip_code.touched)&&(null==l.f.zip_code?null:l.f.zip_code.errors)),i.yG2(7),i.E7m("ngClass",l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?"is-invalid":""),i.yG2(3),i.E7m("ngForOf",l.states),i.yG2(),i.C0Y(163,l.f.state&&l.f.state.hasError("required")&&l.f.state.touched?163:-1),i.yG2(7),i.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(177,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?177:-1),i.yG2(5),i.E7m("checked",l.useDefaultPassword),i.yG2(2),i.E7m("ngIf",!l.useDefaultPassword),i.yG2(),i.E7m("ngIf",!l.useDefaultPassword),i.yG2(),i.C0Y(186,l.f.password&&l.f.password.hasError("pattern")?186:-1),i.yG2(3),i.C0Y(189,l.saveButtonActive?189:190),i.yG2(3),i.C0Y(192,l.spinnerStatus?192:-1),i.yG2(9),i.E7m("formGroup",l.formGroupDesignation),i.yG2(9),i.C0Y(210,l.d.name&&l.d.name.hasError("required")&&l.d.name.touched?210:-1),i.yG2(),i.C0Y(211,l.d.name&&l.d.name.hasError("maxlength")&&l.d.name.touched?211:-1),i.yG2(6),i.E7m("ngClass",l.d.status&&l.d.status.hasError("required")&&l.d.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(224,l.d.status&&l.d.status.hasError("required")&&l.d.status.touched?224:-1),i.yG2(16),i.E7m("formGroup",l.formGroupDepartment),i.yG2(9),i.C0Y(249,l.de.name&&l.de.name.hasError("required")&&l.de.name.touched?249:-1),i.yG2(),i.C0Y(250,l.de.name&&l.de.name.hasError("maxlength")&&l.de.name.touched?250:-1),i.yG2(6),i.E7m("ngClass",l.de.status&&l.de.status.hasError("required")&&l.de.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(263,l.de.status&&l.de.status.hasError("required")&&l.de.status.touched?263:-1))},dependencies:[Ue.QF,Ue.ay,Ue.u_,Je.O,V.sz,V.wd,V.GO,V.ot,V.O4,V.GC,V.ue,V.u,V.uW,V.Wo,_n.uK,vr.uM],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}']})}return r})();var b=Rt(4448),x=Rt(5657),A=Rt(4680),I=Rt(3304);function F(r,t){if(1&r&&(i.I0R(0,"div",17)(1,"p",18),i.OEk(2,"Check-In At"),i.C$Y(),i.wR5(3,"h5",32),i.C$Y()),2&r){const e=i.GaO();i.yG2(3),i.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_in_time),i.E3n)}}function U(r,t){if(1&r&&(i.I0R(0,"div",17)(1,"p",18),i.OEk(2,"Check-out At"),i.C$Y(),i.I0R(3,"h5",19),i.wR5(4,"span",33),i.C$Y()()),2&r){const e=i.GaO();i.yG2(4),i.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.check_out_time),i.E3n)}}function $(r,t){if(1&r&&(i.I0R(0,"div",17)(1,"p",18),i.OEk(2,"Total Time"),i.C$Y(),i.I0R(3,"h5",19)(4,"span",34),i.OEk(5),i.C$Y()()()),2&r){const e=i.GaO();i.yG2(5),i.cNF(e.formattedTotalTime)}}function q(r,t){if(1&r&&(i.I0R(0,"div",17)(1,"p",18),i.OEk(2,"Total Distance"),i.C$Y(),i.I0R(3,"h5",19)(4,"span",34),i.OEk(5),i.C$Y()()()),2&r){const e=i.GaO();i.yG2(5),i.oRS("",e.totaldistanceToshow," km")}}const ie=r=>({"selected-item":r});function ue(r,t){if(1&r){const e=i.KQA();i.I0R(0,"li",35),i.qCj("click",function(){const f=i.usT(e).$implicit,C=i.GaO();return i.CGJ(C.updateMarkerAndPath(f.end.longitude,f.end.latitude,f))}),i.I0R(1,"div",36)(2,"span",37),i.OEk(3),i.C$Y(),i.I0R(4,"button",38),i.wR5(5,"span",39),i.OEk(6),i.C$Y()(),i.I0R(7,"p",40),i.OEk(8),i.C$Y()()}if(2&r){const e=t.$implicit,s=i.GaO();i.E7m("ngClass",i.S45(5,ie,s.selectedItem===e)),i.yG2(3),i.cNF(e.end.formattedTime),i.yG2(),i.E7m("ngClass",s.getBatteryClass(e.end.battery_status)),i.yG2(2),i.oRS(" ",e.end.battery_status," % "),i.yG2(2),i.cNF(e.end.address)}}function ge(r,t){1&r&&(i.I0R(0,"div",41),i.wR5(1,"div",42),i.I0R(2,"button",43)(3,"span",44)(4,"span",45),i.OEk(5," Loading... "),i.C$Y(),i.I0R(6,"span",46)(7,"span",47),i.OEk(8,"Loading..."),i.C$Y()()()()())}const we=r=>({rotate:r});let me=(()=>{class r{constructor(e,s,l){this.route=e,this.api=s,this.cdr=l,this.urlId=null,this.dateChangeSubject=new x.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1}ngOnDestroy(){this.map&&this.map.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,A.o)(300)).subscribe(e=>{this.handleDateChange(e)})}onIntervalChange(){this.initializeMap()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],this.checkIndetails?.check_in_time&&this.checkIndetails?.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status&&e.data.length>0){if(this.employeeTimeline=e.data.map(s=>(s.formattedTime=this.formatTime(s.time),s)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let s=0;for(let C=1;C<this.employeeTimeline.length;C++)s+=this.calculateDistance(this.employeeTimeline[C-1].latitude,this.employeeTimeline[C-1].longitude,this.employeeTimeline[C].latitude,this.employeeTimeline[C].longitude);const l=this.calculateTimeSpent(),f=this.calculateRestPeriods();this.totaldistanceToshow=s.toFixed(1),console.log("Total Distance:",s,"km"),console.log("Time Spent:",l),console.log("Rest Periods:",f)}}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},e=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(e.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(e,s){const[l,f,C]=e.split(":").map(Number),W=[];let re=3600*l+60*f+C;const oe=Ut=>{const[li,Di,Sn]=Ut.split(":").map(Number);return 3600*li+60*Di+Sn},Ye=oe(this.employeeTimeline[this.employeeTimeline.length-1].time),Ve=this.employeeTimeline[0];for(W.push({start:Ve,end:Ve});re<=Ye;){re+=60*s;const Ut=this.employeeTimeline.find(li=>oe(li.time)>=re);if(!Ut)break;{const li=W[W.length-1];(!li||li.end.id!==Ut.id)&&W.push({start:W[W.length-1].end,end:Ut})}}const $t=this.employeeTimeline[this.employeeTimeline.length-1];return(0===W.length||W[W.length-1].end.id!==$t.id)&&W.push({start:W.length>0?W[W.length-1].end:$t,end:$t}),this.intervalTimeCoordinates=W,W}calculateDistance(e,s,l,f){const z=this.deg2rad(l-e),W=this.deg2rad(f-s),re=Math.sin(z/2)*Math.sin(z/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(l))*Math.sin(W/2)*Math.sin(W/2);return 2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re))*6371}deg2rad(e){return e*(Math.PI/180)}calculateTimeSpent(){const e={driving:0,cycling:0,walking:0,stationary:0};for(let l=1;l<this.employeeTimeline.length;l++){const f=this.employeeTimeline[l-1],C=this.employeeTimeline[l],z=new Date(`1970-01-01T${f.time}Z`),re=(new Date(`1970-01-01T${C.time}Z`).getTime()-z.getTime())/1e3/60,Ne=this.calculateDistance(f.latitude,f.longitude,C.latitude,C.longitude)/(re/60);Ne>25?e.driving+=re:Ne>15?e.cycling+=re:Ne>5?e.walking+=re:e.stationary+=re}const s=l=>`${Math.floor(l/60)} hours ${Math.round(l%60)} minutes`;return{driving:s(e.driving),cycling:s(e.cycling),walking:s(e.walking),stationary:s(e.stationary)}}geocodeCoordinates(e,s){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${s}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(f=>f.json()).then(f=>f.features[0].place_name).catch(f=>(console.error("Error fetching address:",f),""))}initializeMap(){this.map=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.addControl(new b.NavigationControl),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.map.resize();const e=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),s=this.employeeTimeline.map(l=>this.geocodeCoordinates(l.longitude,l.latitude).then(f=>{l.address=f}).catch(f=>{console.error("Error fetching address:",f)}));Promise.all(s).then(()=>{const l=this.employeeTimeline[0],f=this.employeeTimeline[this.employeeTimeline.length-1],C=new b.Popup({offset:25}).setHTML(`<h6>${l.formattedTime}</h6>\n              <p>Battery Percentage: ${l.battery_status}%</p>\n              <p>Address: ${l.address}</p>`),z=new b.Marker({color:"green"}).setLngLat([l.longitude,l.latitude]).setPopup(C).addTo(this.map),W=new b.Popup({offset:25}).setHTML(`<h6>${f.formattedTime}</h6>\n              <p>Battery Percentage: ${f.battery_status}%</p>\n              <p>Address: ${f.address}</p>`),re=new b.Marker({color:"red"}).setLngLat([f.longitude,f.latitude]).setPopup(W).addTo(this.map);this.markers.push(z,re),this.calculateRestPeriods().forEach((Ye,Ve)=>{const $t=new b.Popup({offset:25}).setHTML(`<h6>Rest Period ${Ve+1}</h6>\n                  <p>Duration: ${Ye.duration}</p>\n                  <p>From: ${Ye.startTime}</p>\n                  <p>To: ${Ye.endTime}</p>\n                  <p>Address: ${Ye.address}</p>`),Ut=new b.Marker({color:"blue"}).setLngLat([Ye.start.longitude,Ye.start.latitude]).setPopup($t).addTo(this.map);this.markers.push(Ut)}),e.forEach((Ye,Ve)=>{if(!Ye.start||!Ye.end)return void console.error(`Segment at index ${Ve} is missing start or end coordinates.`);const Ut=this.employeeTimeline.filter(Di=>{const Sn=this.getTimeInSeconds(Di.time),hr=this.getTimeInSeconds(Ye.start.time),yr=this.getTimeInSeconds(Ye.end.time);return Sn>=hr&&Sn<=yr}).map(Di=>[Di.longitude,Di.latitude,Di.time]).filter((Di,Sn,hr)=>0===Sn||Di[0]!==hr[Sn-1][0]||Di[1]!==hr[Sn-1][1]||Di[2]!==hr[Sn-1][2]).map(Di=>[Di[0],Di[1]]);(Ut[0][0]!==Ye.start.longitude||Ut[0][1]!==Ye.start.latitude)&&Ut.unshift([Ye.start.longitude,Ye.start.latitude]),(Ut[Ut.length-1][0]!==Ye.end.longitude||Ut[Ut.length-1][1]!==Ye.end.latitude)&&Ut.push([Ye.end.longitude,Ye.end.latitude]);const li=`path-${Ve}`;this.removeLayerIfExists(li),this.map.addLayer({id:li,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:Ut}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":4}})});const Ne=new b.LngLatBounds;this.markers.forEach(Ye=>Ne.extend(Ye.getLngLat())),this.map.fitBounds(Ne,{padding:50})})})}calculateRestPeriods(){const e=[];let l=null;for(let f=1;f<this.employeeTimeline.length;f++){const C=this.employeeTimeline[f-1],z=this.employeeTimeline[f];if(this.calculateDistance(C.latitude,C.longitude,z.latitude,z.longitude)<=.02)l||(l=C);else if(l){const re=this.getTimeInSeconds(z.time)-this.getTimeInSeconds(l.time),oe=re/60;oe>=5&&e.push({...l,start:l,end:z,duration:this.formatDuration(re),durationInMinutes:oe.toFixed(1),startTime:this.formatTime(l.time),endTime:this.formatTime(z.time)}),l=null}}return e}formatDuration(e){const s=Math.floor(e/3600),l=Math.floor(e%3600/60),f=Math.floor(e%60);return`${this.pad(s)}:${this.pad(l)}:${this.pad(f)}`}pad(e){return e.toString().padStart(2,"0")}getTimeInSeconds(e){const[s,l,f]=e.split(":").map(Number);return 3600*s+60*l+f}removeLayerIfExists(e){this.map.getLayer(e)&&this.map.removeLayer(e),this.map.getSource(e)&&this.map.removeSource(e)}initializeDefaultMap(){this.map=new b.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13}),this.map.addControl(new b.NavigationControl)}formatTime(e){const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}handleError(e){this.toggleSpinner(!1)}updateMarkerAndPath(e,s,l){this.marker&&this.marker.remove(),this.marker=new b.Marker({color:"#ffc703"}).setLngLat([e,s]).addTo(this.map);const f=new b.Popup({offset:25}).setHTML(`<h6>${l.end.formattedTime}</h6>\n        <p>Battery Percentage: ${l.end.battery_status}%</p>\n        <p>Address: ${l.end.address}</p>`);this.marker.setPopup(f),this.selectedItem=l}getBatteryClass(e){return e>=75?"battery-high":e>=35?"battery-mid":"battery-low"}calculateTotalTime(e,s){const[l,f]=e.split(":").map(Number),[C,z]=s.split(":").map(Number),W=new Date;W.setHours(l,f,0);const re=new Date;re.setHours(C,z,0);const oe=re.getTime()-W.getTime(),Ne=Math.floor(oe/6e4);return`${Math.floor(Ne/60)}h ${Ne%60}m`}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(k.gV),i.GI1(De),i.GI1(i.kD9))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},decls:47,vars:18,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","15"],["value","30"],["value","60"],[1,"col-8","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8",3,"ngClass"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","map",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(s,l){1&s&&(i.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),i.iHE("ngModelChange",function(C){return i.kNx(l.selectedDate,C)||(l.selectedDate=C),C}),i.qCj("bsValueChange",function(C){return l.onDateChange(C)}),i.C$Y(),i.I0R(5,"div",5)(6,"label",6),i.wR5(7,"i",7),i.C$Y()()()(),i.I0R(8,"div",2)(9,"select",8),i.iHE("ngModelChange",function(C){return i.kNx(l.selectedInterval,C)||(l.selectedInterval=C),C}),i.qCj("change",function(){return l.onIntervalChange()}),i.I0R(10,"option",9),i.OEk(11,"15 Minutes"),i.C$Y(),i.I0R(12,"option",10),i.OEk(13,"30 Minutes"),i.C$Y(),i.I0R(14,"option",11),i.OEk(15,"1 Hour"),i.C$Y()()(),i.I0R(16,"div",12)(17,"button",13),i.qCj("click",function(){return l.refreshTimeline()}),i.wR5(18,"i",14),i.C$Y()()()(),i.I0R(19,"div",15)(20,"div",16)(21,"div",17)(22,"p",18),i.OEk(23,"Date"),i.C$Y(),i.I0R(24,"h5",19)(25,"span",20),i.OEk(26),i.wVc(27,"date"),i.C$Y()()(),i.yuY(28,F,4,1,"div",21)(29,U,5,1,"div",21)(30,$,6,1,"div",21)(31,q,6,1,"div",21),i.C$Y()(),i.I0R(32,"div",1)(33,"div",22)(34,"ul",23),i.c53(35,ue,9,7,"li",48,i.wJt,!1,ge,9,0,"div",49),i.C$Y()(),i.I0R(38,"div",24),i.wR5(39,"div",25),i.C$Y(),i.I0R(40,"div",26)(41,"div",27)(42,"div",28),i.wR5(43,"img",29),i.C$Y(),i.I0R(44,"h3",30),i.OEk(45,"Sorry! No Result Found"),i.C$Y()()()(),i.wR5(46,"div",31)),2&s&&(i.yG2(4),i.E7m("bsConfig",l.bsConfig),i.OKB("ngModel",l.selectedDate),i.yG2(5),i.OKB("ngModel",l.selectedInterval),i.yG2(8),i.E7m("ngClass",i.S45(16,we,l.isRotating)),i.yG2(9),i.cNF(i.g7$(27,13,l.formattedDate,"dd/MMM/yyyy")),i.yG2(2),i.C0Y(28,null!=l.checkIndetails&&l.checkIndetails.check_in_time?28:-1),i.yG2(),i.C0Y(29,null!=l.checkIndetails&&l.checkIndetails.check_out_time?29:-1),i.yG2(),i.C0Y(30,null!=l.checkIndetails&&l.checkIndetails.check_in_time&&null!=l.checkIndetails&&l.checkIndetails.check_out_time?30:-1),i.yG2(),i.C0Y(31,l.totaldistanceToshow?31:-1),i.yG2(2),i.E7m("ngClass",l.employeeTimeline&&l.employeeTimeline.length>0?"d-block":"d-none"),i.yG2(2),i.oho(l.intervalTimeCoordinates),i.yG2(3),i.E7m("ngClass",l.employeeTimeline&&0==l.employeeTimeline.length?"d-none":"d-block"),i.yG2(3),i.E7m("ngClass",l.employeeTimeline&&0===l.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Ue.QF,V.wd,V.GO,V.ot,V.GC,V.ue,V._G,vr.uM,I.em,I.U5,Ue.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return r})();function Ee(r,t){1&r&&(i.I0R(0,"div",30),i.OEk(1,"Password is required."),i.C$Y())}function N(r,t){1&r&&(i.I0R(0,"div",30),i.OEk(1,"Confirm Password is required."),i.C$Y())}function Q(r,t){1&r&&(i.I0R(0,"div",30),i.OEk(1," Password and Confirm Password does not match. "),i.C$Y())}function pe(r,t){if(1&r&&(i.I0R(0,"div",18)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),i.OEk(5,"Password must contain:"),i.C$Y()(),i.I0R(6,"div")(7,"p",35),i.OEk(8," Minimum "),i.I0R(9,"b"),i.OEk(10,"8 characters"),i.C$Y()(),i.I0R(11,"p",36),i.OEk(12," At least "),i.I0R(13,"b"),i.OEk(14,"one lowercase"),i.C$Y(),i.OEk(15," letter (a-z) "),i.C$Y(),i.I0R(16,"p",37),i.OEk(17," At least "),i.I0R(18,"b"),i.OEk(19,"one uppercase"),i.C$Y(),i.OEk(20," letter (A-Z) "),i.C$Y(),i.I0R(21,"p",38),i.OEk(22," At least "),i.I0R(23,"b"),i.OEk(24,"one number"),i.C$Y(),i.OEk(25," (0-9) "),i.C$Y()()()()()),2&r){const e=i.GaO();i.yG2(7),i.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),i.yG2(4),i.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),i.yG2(5),i.eAK("valid",e.passwordValidations.upper),i.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),i.yG2(5),i.E7m("ngClass",e.passwordValidations.number?"valid":"invalid")}}function xe(r,t){if(1&r&&(i.I0R(0,"tr")(1,"td"),i.wR5(2,"i",39),i.OEk(3),i.C$Y(),i.I0R(4,"td"),i.OEk(5),i.C$Y(),i.I0R(6,"td"),i.OEk(7),i.wVc(8,"date"),i.C$Y(),i.I0R(9,"td"),i.OEk(10),i.C$Y(),i.I0R(11,"td")(12,"a",40),i.OEk(13,"Logout "),i.wR5(14,"i",41),i.C$Y()()()),2&r){const e=t.$implicit;i.yG2(3),i.oRS(" ",e.device," "),i.yG2(2),i.cNF(e.ip_address),i.yG2(2),i.cNF(i.g7$(8,4,e.date,"dd MMM , yyyy")),i.yG2(3),i.cNF(e.address)}}const Le=(r,t)=>({"mdi-eye-off-outline":r,"mdi-eye-outline":t});let qe=(()=>{class r{constructor(e,s,l,f){this.route=e,this.api=s,this.toastService=l,this.formBuilder=f,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnInit(){this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[V.AQ.required,V.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",V.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){const s=e.get("password")?.value,l=e.get("confirmPassword")?.value;return s===l?null:{mismatch:!0}}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.loginDetails=s.data,this.loginDetails=s.data||[],this.loginDetailsList=s.data||[],this.updatePagination(),this.updateDisplayedItems()):this.loginDetails=[]},s=>{this.toggleSpinner(!1),this.handleError(s.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.updateemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.companyId),e.append("password",this.f.password.value),e}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(e=>{const s=this.term.toLowerCase();return e.name.toLowerCase().includes(s)||e.employee_id.toLowerCase().includes(s)||e.status.toLowerCase().includes(s)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(e,this.endItem)}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(k.gV),i.GI1(De),i.GI1(Fe.SA),i.GI1(V.im))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-password-change"]],inputs:{companyId:"companyId"},decls:60,vars:19,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[1,"ri-logout-box-r-line"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"],["href","javascript:void(0);",1,"icon-link","icon-link-hover"],[1,"bi","bi-box-arrow-right"]],template:function(s,l){1&s&&(i.I0R(0,"form",0),i.qCj("ngSubmit",function(){return l.onSubmit()}),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),i.OEk(5,"New Password*"),i.C$Y(),i.I0R(6,"div",5)(7,"input",6),i.qCj("input",function(){return l.checkPasswordPattern()}),i.C$Y(),i.I0R(8,"button",7),i.qCj("click",function(){return l.toggleFieldTextType1()}),i.wR5(9,"i",8),i.C$Y()(),i.yuY(10,Ee,2,0,"div",9),i.C$Y()(),i.I0R(11,"div",2)(12,"div",3)(13,"label",10),i.OEk(14,"Confirm Password*"),i.C$Y(),i.I0R(15,"div",5),i.wR5(16,"input",11),i.I0R(17,"button",7),i.qCj("click",function(){return l.toggleFieldTextType2()}),i.wR5(18,"i",8),i.C$Y()(),i.yuY(19,N,2,0,"div",9)(20,Q,2,0,"div",9),i.C$Y()(),i.I0R(21,"div",12)(22,"div")(23,"button",13),i.OEk(24,"Change Password"),i.C$Y()()(),i.yuY(25,pe,26,6,"div",14),i.C$Y()(),i.I0R(26,"div",15)(27,"h5",16),i.OEk(28,"Login History"),i.C$Y()(),i.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),i.OEk(36,"Mobile"),i.C$Y(),i.I0R(37,"th",22),i.OEk(38,"IP Address"),i.C$Y(),i.I0R(39,"th",22),i.OEk(40,"Date"),i.C$Y(),i.I0R(41,"th",22),i.OEk(42,"Address"),i.C$Y(),i.I0R(43,"th",22),i.wR5(44,"i",23),i.C$Y()()(),i.I0R(45,"tbody"),i.c53(46,xe,15,7,"tr",null,i.wJt),i.C$Y()()(),i.I0R(48,"div",24)(49,"div",25)(50,"div",26),i.OEk(51," Showing "),i.I0R(52,"span",27),i.OEk(53),i.C$Y(),i.OEk(54," of "),i.I0R(55,"span",27),i.OEk(56),i.C$Y(),i.OEk(57," Results "),i.C$Y()(),i.I0R(58,"div",28)(59,"pagination",29),i.qCj("pageChanged",function(C){return l.pageChanged(C)}),i.C$Y()()()()()),2&s&&(i.E7m("formGroup",l.formGroup),i.yG2(7),i.E7m("type",l.fieldTextType1?"text":"password"),i.yG2(2),i.E7m("ngClass",i.IBC(13,Le,!l.fieldTextType1,l.fieldTextType1)),i.yG2(),i.C0Y(10,l.f.password&&l.f.password.hasError("required")&&l.f.password.touched?10:-1),i.yG2(6),i.E7m("type",l.fieldTextType2?"text":"password"),i.yG2(2),i.E7m("ngClass",i.IBC(16,Le,!l.fieldTextType2,l.fieldTextType2)),i.yG2(),i.C0Y(19,l.f.confirmPassword&&l.f.confirmPassword.hasError("required")&&l.f.confirmPassword.touched?19:-1),i.yG2(),i.C0Y(20,l.formGroup.hasError("mismatch")&&l.f.confirmPassword.value&&l.f.password.value?20:-1),i.yG2(5),i.C0Y(25,l.f.password&&l.f.password.hasError("pattern")?25:-1),i.yG2(21),i.oho(l.loginDetails),i.yG2(7),i.cNF(null==l.loginDetails?null:l.loginDetails.length),i.yG2(3),i.cNF(null==l.loginDetailsList?null:l.loginDetailsList.length),i.yG2(3),i.E7m("totalItems",null==l.loginDetailsList?null:l.loginDetailsList.length)("itemsPerPage",l.itemsPerPage))},dependencies:[Ue.QF,V.sz,V.ot,V.ue,V.u,V.eJ,V.uW,V.Wo,nt.im,Ue.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return r})();var kt=Rt(1528);const Dt=r=>({rotate:r});let ei=(()=>{class r{constructor(e,s){this.api=e,this.route=s,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1,this.isRotatinglive=!1,this.refreshInterval=3e4}ngOnDestroy(){this.livemap&&this.livemap.remove(),this.liveLocationTimeout&&clearTimeout(this.liveLocationTimeout)}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.companyId&&this.scheduleNextUpdate(),this.initializeMap()}refreshTimeline(){this.isRotatinglive=!0,this.getLiveLocation(),setTimeout(()=>{this.isRotatinglive=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.liveCoordinates=s.data,this.addMarkerToMap(this.liveCoordinates)):this.liveCoordinates=[],this.scheduleNextUpdate()},s=>{this.toggleSpinner(!1),this.handleError(s.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}scheduleNextUpdate(){this.liveLocationTimeout=setTimeout(()=>{this.getLiveLocation()},this.refreshInterval)}handleError(e){this.toggleSpinner(!1),console.error(e)}initializeMap(){b.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.livemap=new b.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),window.addEventListener("resize",()=>{this.livemap.resize()}),this.livemap.on("load",e=>{this.livemap.resize()}),this.livemap.addControl(new b.NavigationControl)}addMarkerToMap(e){var s=this;return(0,kt.c)(function*(){if(!e)return;const l=[e.longitude,e.latitude];try{const f=yield s.geocodeCoordinates(e.longitude,e.latitude),C=new b.Popup({offset:25}).setText(`Address: ${f}\nMotion: ${e.motion}`),z=document.createElement("div");z.className="custom-marker",z.style.backgroundImage=`url(${s.emp_image})`,z.style.width="42px",z.style.height="42px",z.style.backgroundSize="100%",z.style.borderRadius="50%",new b.Marker(z).setLngLat(l).setPopup(C).addTo(s.livemap).togglePopup(),s.livemap.flyTo({center:l,zoom:14})}catch(f){console.error("Error adding marker to map:",f)}})()}geocodeCoordinates(e,s){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${s}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(f=>f.json()).then(f=>f.features[0].place_name).catch(f=>(console.error("Error fetching address:",f),"Unknown location"))}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(De),i.GI1(k.gV))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image"},decls:13,vars:5,consts:[[1,"card"],[1,"row"],[1,"col-12","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12",3,"ngClass"],["id","mapId"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"]],template:function(s,l){1&s&&(i.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),i.qCj("click",function(){return l.refreshTimeline()}),i.wR5(4,"i",4),i.C$Y()(),i.I0R(5,"div",5),i.wR5(6,"div",6),i.C$Y(),i.I0R(7,"div",7)(8,"div",8)(9,"div",9),i.wR5(10,"img",10),i.C$Y(),i.I0R(11,"h3",11),i.OEk(12,"Sorry! No Result Found"),i.C$Y()()()()()),2&s&&(i.yG2(3),i.E7m("ngClass",i.S45(3,Dt,l.isRotatinglive)),i.yG2(2),i.E7m("ngClass",l.liveCoordinates&&0==l.liveCoordinates.length?"d-none":"d-block"),i.yG2(3),i.E7m("ngClass",l.liveCoordinates&&0===l.liveCoordinates.length?"d-block":"d-none"))},dependencies:[Ue.QF],styles:["[_nghost-%COMP%]     #mapId{width:100%!important;height:500px!important}.match-parent[_ngcontent-%COMP%]{height:100%}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return r})();function wi(r,t){if(1&r&&i.wR5(0,"img",45),2&r){const e=i.GaO();i._6D("src",null==e.employeeDetail?null:e.employeeDetail.image,i.K6U)}}function Mi(r,t){1&r&&i.wR5(0,"img",46)}function dn(r,t){if(1&r&&(i.I0R(0,"a",47)(1,"span",48),i.wR5(2,"i",49),i.C$Y()()),2&r){const e=i.GaO();i.CI5("href","tel:",null==e.employeeDetail?null:e.employeeDetail.mobile,"",i.K6U)}}function wn(r,t){if(1&r&&(i.I0R(0,"a",47)(1,"span",50),i.wR5(2,"i",51),i.C$Y()()),2&r){const e=i.GaO();i.CI5("href","mailto:",null==e.employeeDetail?null:e.employeeDetail.email,"",i.K6U)}}function Fn(r,t){if(1&r&&i.wR5(0,"div",52),2&r){const e=i.GaO();i.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),i.E3n)}}function Qn(r,t){1&r&&(i.I0R(0,"div",53),i.OEk(1,"Not Checked In Yet"),i.C$Y())}function lr(r,t){if(1&r&&i.wR5(0,"div",52),2&r){const e=i.GaO();i.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),i.E3n)}}function cr(r,t){1&r&&(i.I0R(0,"div",53),i.OEk(1,"Not Checked Out Yet"),i.C$Y())}function Pr(r,t){if(1&r&&(i.I0R(0,"div",54),i.OEk(1),i.C$Y()),2&r){const e=i.GaO();i.yG2(),i.oRS(" ",null==e.checkIndetails?null:e.checkIndetails.totalDuration," ")}}function jr(r,t){1&r&&i.OEk(0,"-")}function Wr(r,t){if(1&r&&i.wR5(0,"app-password-change",41),2&r){const e=i.GaO();i.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Dr(r,t){if(1&r&&i.wR5(0,"app-timeline",41),2&r){const e=i.GaO();i.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function Kn(r,t){if(1&r&&i.wR5(0,"app-live-location",44),2&r){const e=i.GaO();i.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)("emp_image",null==e.employeeDetail?null:e.employeeDetail.image)}}let ss=(()=>{class r{constructor(e,s,l){this.formBuilder=e,this.route=s,this.api=l,this.formGroups=[],this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={},this.route.queryParams.subscribe(f=>{this.currentTab=f.tab||"personalDetails"})}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.getemployeeData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),this.checkIndetails=e&&e.status?e.data:null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const e=this.formBuilder.group(this.educationForm.value);this.formGroups.push(e)}deleteForm(e){this.formGroups.splice(e,1)}calculateTimeDifference(e,s){const[l,f,C]=e.split(":").map(Number),[z,W,re]=s.split(":").map(Number),oe=new Date;oe.setHours(l,f,C);const Ne=new Date;Ne.setHours(z,W,re);const Ye=Ne.getTime()-oe.getTime();return Math.max(0,Math.floor(Ye/6e4))}calculateTotalTimeForAll(){if(!this.checkIndetails||0===this.checkIndetails.length)return"No check-in/check-out data available";let e=0;for(const f of this.checkIndetails)f.check_in_time&&f.check_out_time&&(e+=this.calculateTimeDifference(f.check_in_time,f.check_out_time));return`${Math.floor(e/60)}h ${e%60}m`}calculateTotalTime(e,s){const[l,f]=e.split(":").map(Number),[C,z]=s.split(":").map(Number),W=new Date;W.setHours(l,f,0);const re=new Date;re.setHours(C,z,0);const oe=re.getTime()-W.getTime(),Ne=Math.floor(oe/6e4);return`${Math.floor(Ne/60)}h ${Ne%60}m`}formatTime(e){if(!e)return"Invalid time";const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(V.im),i.GI1(k.gV),i.GI1(De))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-employee-detail"]],decls:157,vars:42,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function(s,l){1&s&&(i.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),i.wR5(4,"img",3)(5,"div"),i.C$Y(),i.I0R(6,"div",4)(7,"div",5)(8,"div",6),i.yuY(9,wi,1,1,"img",7)(10,Mi,1,0),i.C$Y(),i.I0R(11,"div",8)(12,"h5"),i.OEk(13),i.C$Y(),i.I0R(14,"p",9),i.OEk(15),i.C$Y()(),i.I0R(16,"div",10),i.yuY(17,dn,3,1,"a",11)(18,wn,3,1,"a",11),i.C$Y()()(),i.I0R(19,"div",12)(20,"div",13)(21,"h6",14),i.OEk(22,"Today Attendance"),i.C$Y()(),i.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),i.wR5(28,"i",19),i.OEk(29," Checkin Time "),i.C$Y(),i.yuY(30,Fn,1,1,"div",20)(31,Qn,2,0),i.C$Y()(),i.I0R(32,"li")(33,"div",17)(34,"div",18),i.wR5(35,"i",21),i.OEk(36," Checkout Time "),i.C$Y(),i.yuY(37,lr,1,1,"div",20)(38,cr,2,0),i.C$Y()(),i.I0R(39,"li")(40,"div",17)(41,"div",18),i.wR5(42,"i",22),i.OEk(43," Total Time "),i.C$Y(),i.yuY(44,Pr,2,1,"div",23)(45,jr,1,0),i.C$Y()()()()()()(),i.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),i.qCj("click",function(){return l.changeTab("timeline")}),i.OEk(51," Timeline "),i.C$Y()(),i.I0R(52,"li",27)(53,"a",29),i.qCj("click",function(){return l.changeTab("personalDetails")}),i.OEk(54," Personal Details "),i.C$Y()(),i.I0R(55,"li",27)(56,"a",28),i.qCj("click",function(){return l.changeTab("changePassword")}),i.OEk(57," Changes Password "),i.C$Y()(),i.I0R(58,"li",27)(59,"a",28),i.qCj("click",function(){return l.changeTab("liveLocation")}),i.OEk(60," Live Location "),i.C$Y()()(),i.I0R(61,"div",30)(62,"a",31),i.wR5(63,"i",32),i.OEk(64," Edit Profile"),i.C$Y()()(),i.I0R(65,"div",33)(66,"div",34)(67,"div",35)(68,"div",33)(69,"div",13)(70,"h6",14),i.OEk(71,"Personal Details"),i.C$Y()(),i.I0R(72,"div",36)(73,"div",37)(74,"div",38)(75,"table",39)(76,"tbody")(77,"tr")(78,"th"),i.OEk(79,"Name"),i.C$Y(),i.I0R(80,"td"),i.OEk(81),i.C$Y()(),i.I0R(82,"tr")(83,"th"),i.OEk(84,"Gender"),i.C$Y(),i.I0R(85,"td"),i.OEk(86),i.C$Y()(),i.I0R(87,"tr")(88,"th"),i.OEk(89,"Designation"),i.C$Y(),i.I0R(90,"td"),i.OEk(91),i.C$Y()(),i.I0R(92,"tr")(93,"th"),i.OEk(94,"Employee id"),i.C$Y(),i.I0R(95,"td"),i.OEk(96),i.C$Y()(),i.I0R(97,"tr")(98,"th"),i.OEk(99,"Email"),i.C$Y(),i.I0R(100,"td"),i.OEk(101),i.C$Y()(),i.I0R(102,"tr")(103,"th"),i.OEk(104,"Mobile"),i.C$Y(),i.I0R(105,"td"),i.OEk(106),i.C$Y()(),i.I0R(107,"tr")(108,"th"),i.OEk(109,"Date of Birth"),i.C$Y(),i.I0R(110,"td"),i.OEk(111),i.wVc(112,"date"),i.C$Y()(),i.I0R(113,"tr")(114,"th"),i.OEk(115,"Joining date"),i.C$Y(),i.I0R(116,"td"),i.OEk(117),i.wVc(118,"date"),i.C$Y()(),i.I0R(119,"tr")(120,"th"),i.OEk(121,"Address"),i.C$Y(),i.I0R(122,"td"),i.OEk(123),i.C$Y()(),i.I0R(124,"tr")(125,"th"),i.OEk(126,"City"),i.C$Y(),i.I0R(127,"td"),i.OEk(128),i.C$Y()(),i.I0R(129,"tr")(130,"th"),i.OEk(131,"State"),i.C$Y(),i.I0R(132,"td"),i.OEk(133),i.C$Y()(),i.I0R(134,"tr")(135,"th"),i.OEk(136,"Zip code"),i.C$Y(),i.I0R(137,"td"),i.OEk(138),i.C$Y()()()()()()()()(),i.I0R(139,"div",40)(140,"div",13)(141,"h6",14),i.OEk(142,"Changes Password"),i.C$Y()(),i.I0R(143,"div",15),i.yuY(144,Wr,1,1,"app-password-change",41),i.C$Y()(),i.I0R(145,"div",42)(146,"div",13)(147,"h6",14),i.OEk(148,"Timeline"),i.C$Y()(),i.I0R(149,"div",15),i.yuY(150,Dr,1,1,"app-timeline",41),i.C$Y()(),i.I0R(151,"div",43)(152,"div",13)(153,"h6",14),i.OEk(154,"Live Location"),i.C$Y()(),i.I0R(155,"div",15),i.yuY(156,Kn,1,2,"app-live-location",44),i.C$Y()()()()()()),2&s&&(i.yG2(9),i.C0Y(9,null!=l.employeeDetail&&l.employeeDetail.image?9:10),i.yG2(4),i.oRS(" ",null==l.employeeDetail?null:l.employeeDetail.name," "),i.yG2(2),i.cNF(null==l.employeeDetail?null:l.employeeDetail.designation),i.yG2(2),i.C0Y(17,null!=l.employeeDetail&&l.employeeDetail.mobile?17:-1),i.yG2(),i.C0Y(18,null!=l.employeeDetail&&l.employeeDetail.email?18:-1),i.yG2(12),i.C0Y(30,null!=l.checkIndetails&&l.checkIndetails.latestCheckInTime?30:31),i.yG2(7),i.C0Y(37,null!=l.checkIndetails&&l.checkIndetails.latestCheckOutTime?37:38),i.yG2(7),i.C0Y(44,null!=l.checkIndetails&&l.checkIndetails.latestCheckInTime&&null!=l.checkIndetails&&l.checkIndetails.latestCheckOutTime?44:45),i.yG2(6),i.eAK("active","timeline"===l.currentTab),i.yG2(3),i.eAK("active","personalDetails"===l.currentTab),i.yG2(3),i.eAK("active","changePassword"===l.currentTab),i.yG2(3),i.eAK("active","liveLocation"===l.currentTab),i.yG2(3),i.CI5("routerLink","/edit-employee/",l.urlId,""),i.yG2(5),i.E7m("hidden","personalDetails"!==l.currentTab),i.yG2(14),i.cNF(null==l.employeeDetail?null:l.employeeDetail.name),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.gender),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.designation),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.employee_id),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.email),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.mobile),i.yG2(5),i.oRS(" ",i.g7$(112,36,null==l.employeeDetail?null:l.employeeDetail.dob,"dd/MMM/yyyy")," "),i.yG2(6),i.oRS(" ",i.g7$(118,39,null==l.employeeDetail?null:l.employeeDetail.joining_date,"dd/MMM/yyyy")," "),i.yG2(6),i.cNF(null==l.employeeDetail?null:l.employeeDetail.address),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.city),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.state),i.yG2(5),i.cNF(null==l.employeeDetail?null:l.employeeDetail.zip_code),i.yG2(),i.E7m("hidden","changePassword"!==l.currentTab),i.yG2(5),i.C0Y(144,l.employeeDetail?144:-1),i.yG2(),i.E7m("hidden","timeline"!==l.currentTab),i.yG2(5),i.C0Y(150,l.employeeDetail?150:-1),i.yG2(),i.E7m("hidden","liveLocation"!==l.currentTab),i.yG2(5),i.C0Y(156,l.employeeDetail?156:-1))},dependencies:[k.ER,me,qe,ei,Ue.y]})}return r})();var $n=function(){return $n=Object.assign||function(r){for(var t,e=1,s=arguments.length;e<s;e++)for(var l in t=arguments[e])Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=t[l]);return r},$n.apply(this,arguments)},Zr=function(){function r(t,e,s){var l=this;this.endVal=e,this.options=s,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(f){l.startTime||(l.startTime=f);var C=f-l.startTime;l.remaining=l.duration-C,l.frameVal=l.useEasing?l.countDown?l.startVal-l.easingFn(C,0,l.startVal-l.endVal,l.duration):l.easingFn(C,l.startVal,l.endVal-l.startVal,l.duration):l.startVal+C/l.duration*(l.endVal-l.startVal),l.frameVal=(l.countDown?l.frameVal<l.endVal:l.frameVal>l.endVal)?l.endVal:l.frameVal,l.frameVal=Number(l.frameVal.toFixed(l.options.decimalPlaces)),l.printValue(l.frameVal),C<l.duration?l.rAF=requestAnimationFrame(l.count):null!==l.finalEndVal?l.update(l.finalEndVal):l.options.onCompleteCallback&&l.options.onCompleteCallback()},this.formatNumber=function(f){var C,z,W,re,oe=f<0?"-":"";C=Math.abs(f).toFixed(l.options.decimalPlaces);var Ne=(C+="").split(".");if(z=Ne[0],W=Ne.length>1?l.options.decimal+Ne[1]:"",l.options.useGrouping){re="";for(var Ye=3,Ve=0,$t=0,Ut=z.length;$t<Ut;++$t)l.options.useIndianSeparators&&4===$t&&(Ye=2,Ve=1),0!==$t&&Ve%Ye==0&&(re=l.options.separator+re),Ve++,re=z[Ut-$t-1]+re;z=re}return l.options.numerals&&l.options.numerals.length&&(z=z.replace(/[0-9]/g,function(li){return l.options.numerals[+li]}),W=W.replace(/[0-9]/g,function(li){return l.options.numerals[+li]})),oe+l.options.prefix+z+W+l.options.suffix},this.easeOutExpo=function(f,C,z,W){return z*(1-Math.pow(2,-10*f/W))*1024/1023+C},this.options=$n($n({},this.defaults),s),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof t?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return l.handleScroll(l)}),window.onscroll=function(){window.onScrollFns.forEach(function(f){return f()})},this.handleScroll(this)))}return r.prototype.handleScroll=function(t){if(t&&window&&!t.once){var e=window.innerHeight+window.scrollY,s=t.el.getBoundingClientRect(),l=s.top+window.pageYOffset,f=s.top+s.height+window.pageYOffset;f<e&&f>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>f||l>e)&&!t.paused&&t.reset()}},r.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t,Math.abs(t-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=t,this.endVal=t+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=t,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},r.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},r.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},r.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},r.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},r.prototype.printValue=function(t){var e;if(this.el){var s=this.formattingFn(t);null!==(e=this.options.plugin)&&void 0!==e&&e.render?this.options.plugin.render(this.el,s):"INPUT"===this.el.tagName?this.el.value=s:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=s:this.el.innerHTML=s}},r.prototype.ensureNumber=function(t){return"number"==typeof t&&!isNaN(t)},r.prototype.validateValue=function(t){var e=Number(t);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},r.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},r}();let fl=(()=>{class r{constructor(e,s,l){this.el=e,this.zone=s,this.platformId=l,this.options={},this.reanimateOnClick=!0,this.complete=new i._w7}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(e){if(!(0,Ue.c0)(this.platformId))return;const{options:s,endVal:l}=e;void 0!==l?.currentValue?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==s?.currentValue&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new Zr(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return r.\u0275fac=function(e){return new(e||r)(i.GI1(i.GMv),i.GI1(i.WW2),i.GI1(i.AHE))},r.\u0275dir=i.Sc5({type:r,selectors:[["","countUp",""]],hostBindings:function(e,s){1&e&&i.qCj("click",function(){return s.onClick()})},inputs:{endVal:[i.Wk5.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[i.SYr]}),r})(),va=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.a4G({type:r}),r.\u0275inj=i.s3X({imports:[[]]}),r})();var as=Rt(4884);function jo(r,t){if(1&r&&(i.I0R(0,"div",125),i.wR5(1,"img",126),i.C$Y()),2&r){const e=i.GaO().$implicit;i.yG2(),i._6D("src",e.image,i.K6U)}}function nc(r,t){1&r&&(i.I0R(0,"div",125),i.wR5(1,"img",127),i.C$Y())}const Oo=()=>({tab:"timeline"});function qr(r,t){if(1&r&&(i.I0R(0,"ul",128)(1,"li")(2,"a",129),i.wR5(3,"i",130),i.OEk(4," View Timeline"),i.C$Y()(),i.I0R(5,"li")(6,"a",131),i.wR5(7,"i",132),i.OEk(8,"Attendance Detail"),i.C$Y()()()),2&r){const e=i.GaO().$implicit,s=i.GaO();i.yG2(2),i.CI5("routerLink","/employee-detail/",e.id,""),i.E7m("queryParams",i.q4q(4,Oo)),i.yG2(4),i.u6R("routerLink","/attendance-calender/",e.id,"/",s.company_id,"")}}function mo(r,t){if(1&r){const e=i.KQA();i.I0R(0,"tr",106),i.wR5(1,"td"),i.I0R(2,"td",107)(3,"a",108),i.OEk(4,"#TB01"),i.C$Y()(),i.I0R(5,"td",109)(6,"div",110),i.yuY(7,jo,2,1,"div",111)(8,nc,2,0),i.I0R(9,"div")(10,"h6",14)(11,"a",112),i.OEk(12),i.C$Y()()()()(),i.I0R(13,"td",113),i.OEk(14),i.C$Y(),i.I0R(15,"td",114),i.OEk(16),i.C$Y(),i.I0R(17,"td",115),i.OEk(18),i.C$Y(),i.I0R(19,"td",116),i.OEk(20),i.C$Y(),i.I0R(21,"td",117),i.OEk(22),i.C$Y(),i.I0R(23,"td",117),i.OEk(24),i.wR5(25,"br"),i.I0R(26,"a",118),i.qCj("click",function(){const f=i.usT(e).$implicit,C=i.GaO();return i.Gew(138).show(),i.CGJ(C.updateCheckInDetal(f.checkIns,f.totalDuration))}),i.OEk(27,"Check Detail "),i.C$Y()(),i.I0R(28,"td",119)(29,"span",120),i.OEk(30),i.C$Y()(),i.I0R(31,"td")(32,"div",121)(33,"button",122),i.wR5(34,"i",123),i.C$Y(),i.yuY(35,qr,9,5,"ul",124),i.C$Y()()()}if(2&r){const e=t.$implicit,s=i.GaO();i.CI5("id","p_",e._id,""),i.yG2(7),i.C0Y(7,e.image?7:8),i.yG2(5),i.cNF(e.name),i.yG2(2),i.cNF(e.mobile),i.yG2(2),i.cNF(e.email),i.yG2(2),i.cNF(e.designation),i.yG2(2),i.oRS(" ",s.formatTime(e.latestCheckInTime)," "),i.yG2(2),i.oRS(" ",s.formatTime(e.latestCheckOutTime)," "),i.yG2(2),i.oRS(" ",e.totalDuration,""),i.yG2(5),i.E7m("ngClass","Present"==e.checkin_status?"bg-success":"bg-danger"),i.yG2(),i.cNF(e.checkin_status)}}function Sc(r,t){1&r&&(i.I0R(0,"div",51)(1,"div",133)(2,"span",134),i.OEk(3,"Loading..."),i.C$Y()()())}function La(r,t){if(1&r&&(i.I0R(0,"tr")(1,"th",82),i.OEk(2),i.C$Y(),i.I0R(3,"td"),i.OEk(4),i.C$Y(),i.I0R(5,"td"),i.OEk(6),i.C$Y(),i.I0R(7,"td",83),i.OEk(8),i.C$Y()()),2&r){const e=t.$implicit,s=t.$index,l=i.GaO();i.yG2(2),i.cNF(s+1),i.yG2(2),i.cNF(l.formatTime(e.check_in_time)),i.yG2(2),i.cNF(l.formatTime(e.check_out_time)),i.yG2(2),i.cNF(e.duration)}}const ea=()=>({standalone:!0});let Il=(()=>{class r{constructor(e){this.api=e,this.dateChangeSubject=new x.E,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.checkInDetails=[],this.selectValue=["Alaska","Hawaii","California","Nevada","Oregon","Washington","Arizona","Colorado","Idaho","Montana","Nebraska","New Mexico","North Dakota","Utah","Wyoming","Alabama","Arkansas","Illinois","Iowa"],this.departments=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.selectedStatus="",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.breadCrumbItems=[{label:"Attendance"},{label:"Employee",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const e=localStorage.getItem("currentUser");if(e){const s=JSON.parse(e);this.company_id=s.id}this.company_id&&this.getAttendance(),this.dateChangeSubject.pipe((0,A.o)(300)).subscribe(s=>{this.handleDateChange(s)}),this.getDepartment(),this.getDesignation()}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department?status=active").subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid("designation?status=active").subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getAttendance()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.attendanceData=s.data||[],this.attendanceDataList=s.data||[],this.attendanceCount=s.attendenceCount||[]):(this.attendanceData=[],this.attendanceDataList=[],this.attendanceCount=[],this.toggleSpinner(!1))},s=>{this.handleError(s.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}updateCheckInDetal(e,s){this.totalDuration=s,this.checkInDetails=e}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.attendanceData];s.sort((l,f)=>{const C=this.compare(l[e],f[e]);return"asc"===this.direction?C:-C}),this.attendanceData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.attendanceData=this.attendanceDataList.slice(s,this.endItem)}filterdata(){let e=this.attendanceDataList;const s=this.selectedDesignations?this.selectedDesignations.map(f=>f.toLowerCase()):[],l=this.selectedDepartments?this.selectedDepartments.map(f=>f.toLowerCase()):[];this.term&&(e=e.filter(f=>f.name.toLowerCase().includes(this.term.toLowerCase())||f.mobile.toLowerCase().includes(this.term.toLowerCase())||f.email.toLowerCase().includes(this.term.toLowerCase())||f.employee_id.toLowerCase().includes(this.term.toLowerCase()))),l.length>0&&(e=e.filter(f=>l.includes(f.department.toLowerCase()))),s.length>0&&(e=e.filter(f=>s.includes(f.designation.toLowerCase()))),this.selectedStatus&&(e=e.filter(f=>f.checkin_status===this.selectedStatus)),this.attendanceData=e,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.attendanceData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}formatTime(e){if(!e)return"-";const[s,l,f]=e.split(":");return`${+s%12||12}:${l}:${f} ${+s>=12?"PM":"AM"} `}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(De))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-attendance-list"]],decls:212,vars:32,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-xl-7"],[1,"card"],[1,"card-body"],[1,"row","g-4"],[1,"col-lg-3","col-sm-6","border-end-sm","ng-star-inserted"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-user-follow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-user-unfollow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-warning"],[1,"bi","bi-clock-history"],[1,"counter-value"],[1,"col-lg-12"],[1,"card-header","d-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","exampleModalPopovers",1,"modal","fade"],["tooltipmodal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive","mt-4"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-light"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",1,"text-end"],["id","products-list"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],[1,"text-end"],[1,"bi","bi-clock","align-baseline","me-1"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-light",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],["action","#!"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["value","Present"],["value","Absent"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100"],[1,"bi","bi-x-lg","align-baseline","me-1"],[1,"btn","btn-secondary","w-100"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],["class","avatar-sm bg-light rounded p-1 me-2"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"discount"],[1,"category"],[1,"stock"],[1,"price"],[1,"orders"],[1,"text-decoration-underline","ng-star-inserted",3,"click"],[1,"published"],[1,"badge",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);",1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ri-folder-reduce-line","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(s,l){if(1&s){const f=i.KQA();i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div")(9,"div",8)(10,"div",9)(11,"div",10),i.wR5(12,"i",11),i.C$Y()(),i.I0R(13,"div",12)(14,"p",13),i.OEk(15,"Total Employee"),i.C$Y()()(),i.I0R(16,"h3",14)(17,"span",15),i.OEk(18),i.C$Y()()()(),i.I0R(19,"div",7)(20,"div")(21,"div",8)(22,"div",9)(23,"div",16),i.wR5(24,"i",17),i.C$Y()(),i.I0R(25,"div",12)(26,"p",13),i.OEk(27,"Present"),i.C$Y()()(),i.I0R(28,"h3",14)(29,"span",15),i.OEk(30),i.C$Y()()()(),i.I0R(31,"div",7)(32,"div")(33,"div",8)(34,"div",9)(35,"div",18),i.wR5(36,"i",19),i.C$Y()(),i.I0R(37,"div",12)(38,"p",13),i.OEk(39,"Absent"),i.C$Y()()(),i.I0R(40,"h3",14)(41,"span",15),i.OEk(42),i.C$Y()()()(),i.I0R(43,"div",7)(44,"div")(45,"div",8)(46,"div",9)(47,"div",20),i.wR5(48,"i",21),i.C$Y()(),i.I0R(49,"div",12)(50,"p",13),i.OEk(51,"Total Duration"),i.C$Y()()(),i.I0R(52,"h3",14)(53,"span",22),i.OEk(54),i.C$Y()()()()()()()()(),i.I0R(55,"div",2)(56,"div",23)(57,"div",4)(58,"div",24)(59,"div",12)(60,"h5",25),i.OEk(61," Employees "),i.I0R(62,"span",26),i.OEk(63),i.C$Y()(),i.I0R(64,"p",27),i.OEk(65," Showing Result of Date: "),i.I0R(66,"span",28),i.OEk(67),i.wVc(68,"date"),i.C$Y()()(),i.I0R(69,"div",29)(70,"div",30)(71,"div",31)(72,"div",32)(73,"input",33),i.iHE("ngModelChange",function(z){return i.kNx(l.selectedDate,z)||(l.selectedDate=z),z}),i.qCj("bsValueChange",function(z){return l.onDateChange(z)}),i.C$Y(),i.I0R(74,"div",34)(75,"label",35),i.wR5(76,"i",36),i.C$Y()()()(),i.I0R(77,"div",37)(78,"input",38),i.iHE("ngModelChange",function(z){return i.kNx(l.term,z)||(l.term=z),z}),i.qCj("keyup",function(){return l.filterdata()}),i.C$Y(),i.wR5(79,"i",39),i.C$Y(),i.I0R(80,"div",40)(81,"div",41)(82,"div")(83,"button",42),i.qCj("click",function(){return l.openEnd()}),i.wR5(84,"i",43),i.OEk(85," Filter "),i.C$Y()()()()()()(),i.I0R(86,"div",5)(87,"div",44)(88,"table",45)(89,"thead",46)(90,"tr")(91,"th")(92,"div",47),i.wR5(93,"label",48),i.C$Y()(),i.I0R(94,"th",49),i.qCj("click",function(){return l.onSort("name")}),i.OEk(95," Name "),i.C$Y(),i.I0R(96,"th",49),i.qCj("click",function(){return l.onSort("mobile")}),i.OEk(97," Mobile "),i.C$Y(),i.I0R(98,"th",49),i.qCj("click",function(){return l.onSort("email")}),i.OEk(99," Email "),i.C$Y(),i.I0R(100,"th",49),i.qCj("click",function(){return l.onSort("designation")}),i.OEk(101," Designation "),i.C$Y(),i.I0R(102,"th",49),i.qCj("click",function(){return l.onSort("check_in_time")}),i.OEk(103," Check-in Time "),i.C$Y(),i.I0R(104,"th",49),i.qCj("click",function(){return l.onSort("check_out_time")}),i.OEk(105," Check-out Time "),i.C$Y(),i.I0R(106,"th",49),i.qCj("click",function(){return l.onSort("totalDuration")}),i.OEk(107," Total Duration "),i.C$Y(),i.I0R(108,"th",49),i.qCj("click",function(){return l.onSort("checkin_status")}),i.OEk(109," Attendance Status "),i.C$Y(),i.I0R(110,"th"),i.OEk(111,"Action"),i.C$Y()()(),i.I0R(112,"tbody",50),i.c53(113,mo,36,11,"tr",106,i.wJt),i.C$Y(),i.yuY(115,Sc,4,0,"div",51),i.C$Y()(),i.I0R(116,"div",52)(117,"div",53)(118,"div",54)(119,"div",55),i.wR5(120,"i",56),i.C$Y()(),i.I0R(121,"h5",57),i.OEk(122,"Sorry! No Result Found"),i.C$Y(),i.I0R(123,"p",13),i.OEk(124),i.C$Y()()(),i.I0R(125,"div",58)(126,"div",59)(127,"div",60),i.OEk(128," Showing "),i.I0R(129,"span",61),i.OEk(130),i.C$Y(),i.OEk(131," of "),i.I0R(132,"span",61),i.OEk(133),i.C$Y(),i.OEk(134," Results "),i.C$Y()(),i.I0R(135,"div",62)(136,"pagination",63),i.qCj("pageChanged",function(z){return l.pageChanged(z)}),i.C$Y()()()()()()()(),i.I0R(137,"div",64,65)(139,"div",66)(140,"div",67)(141,"div",68)(142,"h5",69),i.OEk(143,"Check-in Detail"),i.C$Y(),i.I0R(144,"button",70),i.qCj("click",function(){i.usT(f);const z=i.Gew(138);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(145,"div",71)(146,"div",72)(147,"table",73)(148,"thead")(149,"tr",74)(150,"th",75),i.OEk(151,"#"),i.C$Y(),i.I0R(152,"th",76),i.OEk(153,"Check-In Time"),i.C$Y(),i.I0R(154,"th",76),i.OEk(155,"Check-Out Time"),i.C$Y(),i.I0R(156,"th",77),i.OEk(157,"Duration"),i.C$Y()()(),i.I0R(158,"tbody",78),i.c53(159,La,9,4,"tr",null,i.wJt),i.C$Y()()(),i.I0R(161,"div",79)(162,"table",80)(163,"tbody")(164,"tr",81)(165,"th",82),i.OEk(166,"Total Duration"),i.C$Y(),i.I0R(167,"th",83),i.wR5(168,"i",84),i.OEk(169),i.C$Y()()()()()(),i.I0R(170,"div",85)(171,"div",23)(172,"div",86)(173,"button",87),i.qCj("click",function(){i.usT(f);const z=i.Gew(138);return i.CGJ(z.hide())}),i.OEk(174," Close "),i.C$Y()()()()()()(),i.I0R(175,"div",88)(176,"div",89)(177,"h5",90),i.OEk(178,"Attendance Filters"),i.C$Y(),i.I0R(179,"button",70),i.qCj("click",function(){return l.closeoffcanvas()}),i.C$Y()(),i.I0R(180,"div",91)(181,"form",92)(182,"div",2)(183,"div",23)(184,"div",93)(185,"p",94),i.OEk(186," Attendance Status "),i.C$Y(),i.I0R(187,"select",95),i.iHE("ngModelChange",function(z){return i.kNx(l.selectedStatus,z)||(l.selectedStatus=z),z}),i.qCj("change",function(){return l.filterdata()}),i.I0R(188,"option",96),i.OEk(189,"All"),i.C$Y(),i.I0R(190,"option",97),i.OEk(191,"Present"),i.C$Y(),i.I0R(192,"option",98),i.OEk(193,"Absent"),i.C$Y()()()(),i.I0R(194,"div",23)(195,"div",93)(196,"p",94),i.OEk(197,"Department"),i.C$Y(),i.I0R(198,"ng-select",99),i.qCj("change",function(){return l.filterdata()}),i.iHE("ngModelChange",function(z){return i.kNx(l.selectedDepartments,z)||(l.selectedDepartments=z),z}),i.C$Y()()(),i.I0R(199,"div",23)(200,"div",93)(201,"p",94),i.OEk(202,"Designation"),i.C$Y(),i.I0R(203,"ng-select",100),i.qCj("change",function(){return l.filterdata()}),i.iHE("ngModelChange",function(z){return i.kNx(l.selectedDesignations,z)||(l.selectedDesignations=z),z}),i.C$Y()()()()()(),i.I0R(204,"div",101)(205,"button",102),i.wR5(206,"i",103),i.OEk(207," Reset "),i.C$Y(),i.I0R(208,"button",104),i.wR5(209,"i",43),i.OEk(210," Filters "),i.C$Y()()(),i.I0R(211,"div",105),i.qCj("click",function(){return l.closeoffcanvas()}),i.C$Y()}2&s&&(i.E7m("breadcrumbItems",l.breadCrumbItems),i.yG2(17),i.E7m("countUp",null==l.attendanceDataList?null:l.attendanceDataList.length),i.yG2(),i.cNF(null==l.attendanceDataList?null:l.attendanceDataList.length),i.yG2(11),i.E7m("countUp",null==l.attendanceCount?null:l.attendanceCount.totalPresent),i.yG2(),i.cNF(null==l.attendanceCount?null:l.attendanceCount.totalPresent),i.yG2(11),i.E7m("countUp",null==l.attendanceCount?null:l.attendanceCount.totalAbsent),i.yG2(),i.cNF(null==l.attendanceCount?null:l.attendanceCount.totalAbsent),i.yG2(12),i.cNF(null==l.attendanceCount?null:l.attendanceCount.totalDuration),i.yG2(9),i.cNF(null==l.attendanceData?null:l.attendanceData.length),i.yG2(4),i.oRS(" ",i.g7$(68,28,l.formattedDate,"dd MMM , yyyy"),""),i.yG2(6),i.E7m("bsConfig",l.bsConfig),i.OKB("ngModel",l.selectedDate),i.yG2(5),i.OKB("ngModel",l.term),i.yG2(35),i.oho(l.attendanceData),i.yG2(2),i.C0Y(115,l.spinnerStatus?115:-1),i.yG2(9),i.oRS(" We've searched ",null==l.attendanceDataList?null:l.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),i.yG2(6),i.cNF(null==l.attendanceData?null:l.attendanceData.length),i.yG2(3),i.cNF(null==l.attendanceDataList?null:l.attendanceDataList.length),i.yG2(3),i.E7m("totalItems",null==l.attendanceDataList?null:l.attendanceDataList.length)("itemsPerPage",10),i.yG2(23),i.oho(l.checkInDetails),i.yG2(10),i.oRS(" ",l.totalDuration," "),i.yG2(18),i.OKB("ngModel",l.selectedStatus),i.E7m("ngModelOptions",i.q4q(31,ea)),i.yG2(11),i.E7m("items",l.departments)("multiple",!0),i.OKB("ngModel",l.selectedDepartments),i.yG2(5),i.E7m("items",l.designations)("multiple",!0),i.OKB("ngModel",l.selectedDesignations))},dependencies:[Ue.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.GC,V.ue,V.u,V._G,V.SC,nt.im,_n.uK,fl,as.UT,I.em,I.U5,Ue.y]})}return r})();const Yc=["showModal"],gu=["deleteRecordModal"];function Ll(r,t){if(1&r){const e=i.KQA();i.I0R(0,"ul",96)(1,"li")(2,"a",97),i.wR5(3,"i",98),i.OEk(4," View"),i.C$Y()(),i.I0R(5,"li")(6,"a",99),i.qCj("click",function(){i.usT(e);const l=i.GaO().$implicit,f=i.GaO();return i.CGJ(f.editList(l))}),i.wR5(7,"i",100),i.OEk(8," Edit"),i.C$Y()(),i.I0R(9,"li")(10,"a",101),i.qCj("click",function(){i.usT(e);const l=i.GaO().$implicit,f=i.GaO();return i.CGJ(f.removeItem(l.id))}),i.wR5(11,"i",102),i.OEk(12," Remove"),i.C$Y()()()}}const xr=(r,t)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":t});function Hc(r,t){if(1&r){const e=i.KQA();i.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),i.iHE("ngModelChange",function(l){const C=i.usT(e).$implicit;return i.kNx(C.states,l)||(C.states=l),i.CGJ(l)}),i.qCj("change",function(l){i.usT(e);const f=i.GaO();return i.CGJ(f.onCheckboxChange(l))}),i.C$Y(),i.wR5(4,"label",82),i.C$Y()(),i.I0R(5,"td",83)(6,"a",84),i.OEk(7,"#TB01"),i.C$Y()(),i.I0R(8,"td",85),i.OEk(9),i.C$Y(),i.I0R(10,"td",86)(11,"div",87)(12,"input",88),i.qCj("change",function(l){const C=i.usT(e).$implicit,z=i.GaO();return i.CGJ(z.setStatus(C,l))}),i.C$Y(),i.I0R(13,"label",89)(14,"span",90),i.OEk(15),i.C$Y()()()(),i.I0R(16,"td",91),i.OEk(17),i.wVc(18,"date"),i.C$Y(),i.I0R(19,"td")(20,"div",92)(21,"button",93),i.wR5(22,"i",94),i.C$Y(),i.yuY(23,Ll,13,0,"ul",95),i.C$Y()()()}if(2&r){const e=t.$implicit,s=t.$index;i.CI5("id","p_",e._id,""),i.yG2(3),i._6D("value",e._id),i.OKB("ngModel",e.states),i.yG2(6),i.oRS(" ",e.name," "),i.yG2(3),i.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),i.yG2(),i.E7m("for","customSwitchsizemd"+s),i.yG2(),i.E7m("ngClass",i.IBC(13,xr,"active"===e.status,"inactive"===e.status)),i.yG2(),i.oRS(" ",e.status," "),i.yG2(2),i.oRS(" ",i.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function Ks(r,t){1&r&&(i.I0R(0,"div",28)(1,"div",103)(2,"span",104),i.OEk(3,"Loading..."),i.C$Y()()())}function Ws(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1,"Department name is required."),i.C$Y())}function rc(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1," Department name must be at most 45 characters "),i.C$Y())}function ta(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1,"Status is required."),i.C$Y())}let ml=(()=>{class r{constructor(e,s,l){this.api=e,this.toastService=s,this.formBuilder=l,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Department",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.departmentData=e.data||[],this.departmentDataList=e.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const C={name:e.name,status:s.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",e.id,C).subscribe(z=>this.handleResponse(z),z=>this.handleError(z))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("department",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}update(e){this.api.put("department",this.id,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("department",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("department-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(C=>({...C,states:e.target.checked}));for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.departmentData];s.sort((l,f)=>{const C=this.compare(l[e],f[e]);return"asc"===this.direction?C:-C}),this.departmentData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(s,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(De),i.GI1(Fe.SA),i.GI1(V.im))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-department-list"]],viewQuery:function(s,l){if(1&s&&(i.CC$(Yc,5),i.CC$(gu,5)),2&s){let f;i.wto(f=i.Gqi())&&(l.showModal=f.first),i.wto(f=i.Gqi())&&(l.deleteRecordModal=f.first)}},decls:123,vars:15,consts:[["title","Department",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(s,l){if(1&s){const f=i.KQA();i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),i.OEk(8," Departments "),i.I0R(9,"span",8),i.OEk(10),i.C$Y()()(),i.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),i.iHE("ngModelChange",function(z){return i.kNx(l.term,z)||(l.term=z),z}),i.qCj("keyup",function(){return l.filterdata()}),i.C$Y(),i.wR5(16,"i",14),i.C$Y()(),i.I0R(17,"button",15),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.show())}),i.wR5(18,"i",16),i.C$Y(),i.I0R(19,"button",17),i.qCj("click",function(){return l.onAdd()}),i.wR5(20,"i",18),i.OEk(21," Add Department "),i.C$Y()()()(),i.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),i.iHE("ngModelChange",function(z){return i.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),i.qCj("change",function(z){return l.checkUncheckAll(z)}),i.C$Y(),i.wR5(30,"label",25),i.C$Y()(),i.I0R(31,"th",26),i.qCj("click",function(){return l.onSort("name")}),i.OEk(32," Department Name "),i.C$Y(),i.I0R(33,"th",26),i.qCj("click",function(){return l.onSort("status")}),i.OEk(34," Status "),i.C$Y(),i.I0R(35,"th",26),i.qCj("click",function(){return l.onSort("created_at")}),i.OEk(36," Created At "),i.C$Y(),i.I0R(37,"th"),i.OEk(38,"Action"),i.C$Y()()(),i.I0R(39,"tbody",27),i.c53(40,Hc,24,16,"tr",80,i.wJt),i.C$Y(),i.yuY(42,Ks,4,0,"div",28),i.C$Y()(),i.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),i.wR5(47,"i",33),i.C$Y()(),i.I0R(48,"h5",34),i.OEk(49,"Sorry! No Result Found"),i.C$Y(),i.I0R(50,"p",35),i.OEk(51),i.C$Y()()(),i.I0R(52,"div",36)(53,"div",37)(54,"div",38),i.OEk(55," Showing "),i.I0R(56,"span",39),i.OEk(57),i.C$Y(),i.OEk(58," of "),i.I0R(59,"span",39),i.OEk(60),i.C$Y(),i.OEk(61," Results "),i.C$Y()(),i.I0R(62,"div",40)(63,"pagination",41),i.qCj("pageChanged",function(z){return l.pageChanged(z)}),i.C$Y()()()()()()()(),i.I0R(64,"div",42,43),i.qCj("hidden.bs.modal",function(){return l.resetForm()}),i.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),i.OEk(70,"Add Department"),i.C$Y(),i.I0R(71,"button",48),i.qCj("click",function(){i.usT(f);const z=i.Gew(65);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(72,"form",49),i.qCj("ngSubmit",function(){return l.onSubmit()}),i.I0R(73,"div",50),i.wR5(74,"div",51),i.I0R(75,"div",52)(76,"label",53),i.OEk(77,"Department Name "),i.I0R(78,"span",54),i.OEk(79,"*"),i.C$Y()(),i.wR5(80,"input",55),i.yuY(81,Ws,2,0,"div",56)(82,rc,2,0,"div",56),i.C$Y(),i.I0R(83,"div",52)(84,"label",57),i.OEk(85,"Status "),i.I0R(86,"span",54),i.OEk(87,"*"),i.C$Y()(),i.I0R(88,"select",58)(89,"option",59),i.OEk(90,"Select Status"),i.C$Y(),i.I0R(91,"option",60),i.OEk(92,"Active"),i.C$Y(),i.I0R(93,"option",61),i.OEk(94,"Inactive"),i.C$Y()(),i.yuY(95,ta,2,0,"div",56),i.C$Y()(),i.I0R(96,"div",62)(97,"div",63)(98,"button",64),i.qCj("click",function(){i.usT(f);const z=i.Gew(65);return i.CGJ(z.hide())}),i.wR5(99,"i",65),i.OEk(100," Close "),i.C$Y(),i.I0R(101,"button",66),i.OEk(102," Add "),i.C$Y()()()()()()(),i.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(109,"div",71)(110,"div",72)(111,"div",54),i.wR5(112,"i",73),i.C$Y(),i.I0R(113,"div",74)(114,"h3",75),i.OEk(115,"Are you sure ?"),i.C$Y(),i.I0R(116,"p",76),i.OEk(117," Are you sure you want to remove this record ? "),i.C$Y()()(),i.I0R(118,"div",77)(119,"button",78),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.hide())}),i.OEk(120," Close "),i.C$Y(),i.I0R(121,"button",79),i.qCj("click",function(){return l.deleteData(l.deleteId)}),i.OEk(122," Yes, Delete It! "),i.C$Y()()()()()()}2&s&&(i.E7m("breadcrumbItems",l.breadCrumbItems),i.yG2(10),i.cNF(null==l.departmentData?null:l.departmentData.length),i.yG2(5),i.OKB("ngModel",l.term),i.yG2(14),i.OKB("ngModel",l.masterSelected),i.yG2(11),i.oho(l.departmentData),i.yG2(2),i.C0Y(42,l.spinnerStatus?42:-1),i.yG2(9),i.oRS(" We've searched ",l.departmentDataList.length," Department We did not find any Department for you search. "),i.yG2(6),i.cNF(null==l.departmentData?null:l.departmentData.length),i.yG2(3),i.cNF(null==l.departmentDataList?null:l.departmentDataList.length),i.yG2(3),i.E7m("totalItems",null==l.departmentDataList?null:l.departmentDataList.length)("itemsPerPage",10),i.yG2(9),i.E7m("formGroup",l.formGroup),i.yG2(9),i.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),i.yG2(),i.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),i.yG2(6),i.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(95,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?95:-1))},dependencies:[Ue.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.SU,V.GC,V.ue,V.u,V._G,V.uW,V.Wo,nt.im,_n.uK,Ue.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return r})();const Ol=["showModal"],Za=["deleteRecordModal"];function vu(r,t){if(1&r){const e=i.KQA();i.I0R(0,"ul",96)(1,"li")(2,"a",97),i.wR5(3,"i",98),i.OEk(4," View"),i.C$Y()(),i.I0R(5,"li")(6,"a",99),i.qCj("click",function(){i.usT(e);const l=i.GaO().$implicit,f=i.GaO();return i.CGJ(f.editList(l))}),i.wR5(7,"i",100),i.OEk(8," Edit"),i.C$Y()(),i.I0R(9,"li")(10,"a",101),i.qCj("click",function(){i.usT(e);const l=i.GaO().$implicit,f=i.GaO();return i.CGJ(f.removeItem(l.id))}),i.wR5(11,"i",102),i.OEk(12," Remove"),i.C$Y()()()}}const sc=(r,t)=>({"bg-info-subtle text-info":r,"bg-danger-subtle text-danger":t});function ia(r,t){if(1&r){const e=i.KQA();i.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),i.iHE("ngModelChange",function(l){const C=i.usT(e).$implicit;return i.kNx(C.states,l)||(C.states=l),i.CGJ(l)}),i.qCj("change",function(l){i.usT(e);const f=i.GaO();return i.CGJ(f.onCheckboxChange(l))}),i.C$Y(),i.wR5(4,"label",82),i.C$Y()(),i.I0R(5,"td",83)(6,"a",84),i.OEk(7,"#TB01"),i.C$Y()(),i.I0R(8,"td",85),i.OEk(9),i.C$Y(),i.I0R(10,"td",86)(11,"div",87)(12,"input",88),i.qCj("change",function(l){const C=i.usT(e).$implicit,z=i.GaO();return i.CGJ(z.setStatus(C,l))}),i.C$Y(),i.I0R(13,"label",89)(14,"span",90),i.OEk(15),i.C$Y()()()(),i.I0R(16,"td",91),i.OEk(17),i.wVc(18,"date"),i.C$Y(),i.I0R(19,"td")(20,"div",92)(21,"button",93),i.wR5(22,"i",94),i.C$Y(),i.yuY(23,vu,13,0,"ul",95),i.C$Y()()()}if(2&r){const e=t.$implicit,s=t.$index;i.CI5("id","p_",e._id,""),i.yG2(3),i._6D("value",e._id),i.OKB("ngModel",e.states),i.yG2(6),i.oRS(" ",e.name," "),i.yG2(3),i.E7m("checked","active"===e.status)("id","customSwitchsizemd"+s),i.yG2(),i.E7m("for","customSwitchsizemd"+s),i.yG2(),i.E7m("ngClass",i.IBC(13,sc,"active"===e.status,"inactive"===e.status)),i.yG2(),i.oRS(" ",e.status," "),i.yG2(2),i.oRS(" ",i.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function Pl(r,t){1&r&&(i.I0R(0,"div",28)(1,"div",103)(2,"span",104),i.OEk(3,"Loading..."),i.C$Y()()())}function Co(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1,"Designation name is required."),i.C$Y())}function Br(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1," Designation name must be at most 45 characters "),i.C$Y())}function ju(r,t){1&r&&(i.I0R(0,"div",105),i.OEk(1,"Status is required."),i.C$Y())}let Oa=(()=>{class r{constructor(e,s,l){this.api=e,this.toastService=s,this.formBuilder=l,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Designation",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[V.AQ.maxLength(45),V.AQ.required]],status:["",[V.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("designation").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.departmentData=e.data||[],this.departmentDataList=e.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,s){const C={name:e.name,status:s.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("designation",e.id,C).subscribe(z=>this.handleResponse(z),z=>this.handleError(z))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("designation",e).subscribe(s=>this.handleResponse(s),s=>this.handleError(s))}update(e){this.api.put("designation",this.id,e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Designation",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("designation",e).subscribe(l=>this.handleResponse(l),l=>this.handleError(l));const s=this.checkedValGet;s&&s.length>0&&this.api.post("designation-delete-multiple",{ids:s}).subscribe(l=>this.handleResponse(l),l=>this.handleError(l))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(C=>({...C,states:e.target.checked}));for(var s=[],f=0;f<this.departmentData.length;f++)1==this.departmentData[f].states&&s.push(this.departmentData[f].id);this.checkedValGet=s,s.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const s=[...this.departmentData];s.sort((l,f)=>{const C=this.compare(l[e],f[e]);return"asc"===this.direction?C:-C}),this.departmentData=s}compare(e,s){return e<s?-1:e>s?1:0}pageChanged(e){const s=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.departmentData=this.departmentDataList.slice(s,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(e=>e.name.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),s=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",s.classList.add("d-none")):(e.style.display="none",s.classList.remove("d-none"))}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(De),i.GI1(Fe.SA),i.GI1(V.im))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-designation-list"]],viewQuery:function(s,l){if(1&s&&(i.CC$(Ol,5),i.CC$(Za,5)),2&s){let f;i.wto(f=i.Gqi())&&(l.showModal=f.first),i.wto(f=i.Gqi())&&(l.deleteRecordModal=f.first)}},decls:123,vars:15,consts:[["title","Designation",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(s,l){if(1&s){const f=i.KQA();i.wR5(0,"app-breadcrumbs",0),i.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),i.OEk(8," Designation "),i.I0R(9,"span",8),i.OEk(10),i.C$Y()()(),i.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),i.iHE("ngModelChange",function(z){return i.kNx(l.term,z)||(l.term=z),z}),i.qCj("keyup",function(){return l.filterdata()}),i.C$Y(),i.wR5(16,"i",14),i.C$Y()(),i.I0R(17,"button",15),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.show())}),i.wR5(18,"i",16),i.C$Y(),i.I0R(19,"button",17),i.qCj("click",function(){return l.onAdd()}),i.wR5(20,"i",18),i.OEk(21," Add Designation "),i.C$Y()()()(),i.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),i.iHE("ngModelChange",function(z){return i.kNx(l.masterSelected,z)||(l.masterSelected=z),z}),i.qCj("change",function(z){return l.checkUncheckAll(z)}),i.C$Y(),i.wR5(30,"label",25),i.C$Y()(),i.I0R(31,"th",26),i.qCj("click",function(){return l.onSort("name")}),i.OEk(32," Designation Name "),i.C$Y(),i.I0R(33,"th",26),i.qCj("click",function(){return l.onSort("status")}),i.OEk(34," Status "),i.C$Y(),i.I0R(35,"th",26),i.qCj("click",function(){return l.onSort("created_at")}),i.OEk(36," Created At "),i.C$Y(),i.I0R(37,"th"),i.OEk(38,"Action"),i.C$Y()()(),i.I0R(39,"tbody",27),i.c53(40,ia,24,16,"tr",80,i.wJt),i.C$Y(),i.yuY(42,Pl,4,0,"div",28),i.C$Y()(),i.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),i.wR5(47,"i",33),i.C$Y()(),i.I0R(48,"h5",34),i.OEk(49,"Sorry! No Result Found"),i.C$Y(),i.I0R(50,"p",35),i.OEk(51),i.C$Y()()(),i.I0R(52,"div",36)(53,"div",37)(54,"div",38),i.OEk(55," Showing "),i.I0R(56,"span",39),i.OEk(57),i.C$Y(),i.OEk(58," of "),i.I0R(59,"span",39),i.OEk(60),i.C$Y(),i.OEk(61," Results "),i.C$Y()(),i.I0R(62,"div",40)(63,"pagination",41),i.qCj("pageChanged",function(z){return l.pageChanged(z)}),i.C$Y()()()()()()()(),i.I0R(64,"div",42,43),i.qCj("hidden.bs.modal",function(){return l.resetForm()}),i.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),i.OEk(70,"Add Designation"),i.C$Y(),i.I0R(71,"button",48),i.qCj("click",function(){i.usT(f);const z=i.Gew(65);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(72,"form",49),i.qCj("ngSubmit",function(){return l.onSubmit()}),i.I0R(73,"div",50),i.wR5(74,"div",51),i.I0R(75,"div",52)(76,"label",53),i.OEk(77,"Designation Name "),i.I0R(78,"span",54),i.OEk(79,"*"),i.C$Y()(),i.wR5(80,"input",55),i.yuY(81,Co,2,0,"div",56)(82,Br,2,0,"div",56),i.C$Y(),i.I0R(83,"div",52)(84,"label",57),i.OEk(85,"Status "),i.I0R(86,"span",54),i.OEk(87,"*"),i.C$Y()(),i.I0R(88,"select",58)(89,"option",59),i.OEk(90,"Select Status"),i.C$Y(),i.I0R(91,"option",60),i.OEk(92,"Active"),i.C$Y(),i.I0R(93,"option",61),i.OEk(94,"Inactive"),i.C$Y()(),i.yuY(95,ju,2,0,"div",56),i.C$Y()(),i.I0R(96,"div",62)(97,"div",63)(98,"button",64),i.qCj("click",function(){i.usT(f);const z=i.Gew(65);return i.CGJ(z.hide())}),i.wR5(99,"i",65),i.OEk(100," Close "),i.C$Y(),i.I0R(101,"button",66),i.OEk(102," Add "),i.C$Y()()()()()()(),i.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.hide())}),i.C$Y()(),i.I0R(109,"div",71)(110,"div",72)(111,"div",54),i.wR5(112,"i",73),i.C$Y(),i.I0R(113,"div",74)(114,"h3",75),i.OEk(115,"Are you sure ?"),i.C$Y(),i.I0R(116,"p",76),i.OEk(117," Are you sure you want to remove this record ? "),i.C$Y()()(),i.I0R(118,"div",77)(119,"button",78),i.qCj("click",function(){i.usT(f);const z=i.Gew(104);return i.CGJ(z.hide())}),i.OEk(120," Close "),i.C$Y(),i.I0R(121,"button",79),i.qCj("click",function(){return l.deleteData(l.deleteId)}),i.OEk(122," Yes, Delete It! "),i.C$Y()()()()()()}2&s&&(i.E7m("breadcrumbItems",l.breadCrumbItems),i.yG2(10),i.cNF(null==l.departmentData?null:l.departmentData.length),i.yG2(5),i.OKB("ngModel",l.term),i.yG2(14),i.OKB("ngModel",l.masterSelected),i.yG2(11),i.oho(l.departmentData),i.yG2(2),i.C0Y(42,l.spinnerStatus?42:-1),i.yG2(9),i.oRS(" We've searched ",l.departmentDataList.length," Department We did not find any Department for you search. "),i.yG2(6),i.cNF(null==l.departmentData?null:l.departmentData.length),i.yG2(3),i.cNF(null==l.departmentDataList?null:l.departmentDataList.length),i.yG2(3),i.E7m("totalItems",null==l.departmentDataList?null:l.departmentDataList.length)("itemsPerPage",10),i.yG2(9),i.E7m("formGroup",l.formGroup),i.yG2(9),i.C0Y(81,l.f.name&&l.f.name.hasError("required")&&l.f.name.touched?81:-1),i.yG2(),i.C0Y(82,l.f.name&&l.f.name.hasError("maxlength")&&l.f.name.touched?82:-1),i.yG2(6),i.E7m("ngClass",l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?"is-invalid":""),i.yG2(7),i.C0Y(95,l.f.status&&l.f.status.hasError("required")&&l.f.status.touched?95:-1))},dependencies:[Ue.QF,Je.O,k.ER,en.uo,en.M3,en.mY,V.sz,V.wd,V.GO,V.ot,V.SU,V.GC,V.ue,V.u,V._G,V.uW,V.Wo,nt.im,_n.uK,Ue.y]})}return r})();var qa,Un,Uo,Ls,Js,Vs,Ka,_a,na,Pa={},ra=[],gl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Po(r,t){for(var e in t)r[e]=t[e];return r}function ls(r){var t=r.parentNode;t&&t.removeChild(r)}function Ot(r,t,e){var s,l,f,C={};for(f in t)"key"==f?s=t[f]:"ref"==f?l=t[f]:C[f]=t[f];if(arguments.length>2&&(C.children=arguments.length>3?qa.call(arguments,2):e),"function"==typeof r&&null!=r.defaultProps)for(f in r.defaultProps)void 0===C[f]&&(C[f]=r.defaultProps[f]);return Wo(r,C,s,l,null)}function Wo(r,t,e,s,l){var f={type:r,props:t,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l??++Uo};return null==l&&null!=Un.vnode&&Un.vnode(f),f}function zn(r){return r.children}function Tc(r,t,e){"-"===t[0]?r.setProperty(t,e??""):r[t]=null==e?"":"number"!=typeof e||gl.test(t)?e:e+"px"}function Ja(r,t,e,s,l){var f;e:if("style"===t)if("string"==typeof e)r.style.cssText=e;else{if("string"==typeof s&&(r.style.cssText=s=""),s)for(t in s)e&&t in e||Tc(r.style,t,"");if(e)for(t in e)s&&e[t]===s[t]||Tc(r.style,t,e[t])}else if("o"===t[0]&&"n"===t[1])f=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in r?t.toLowerCase().slice(2):t.slice(2),r.l||(r.l={}),r.l[t+f]=e,e?s||r.addEventListener(t,f?sa:vl,f):r.removeEventListener(t,f?sa:vl,f);else if("dangerouslySetInnerHTML"!==t){if(l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in r)try{r[t]=e??"";break e}catch{}"function"==typeof e||(null==e||!1===e&&-1==t.indexOf("-")?r.removeAttribute(t):r.setAttribute(t,e))}}function vl(r){Js=!0;try{return this.l[r.type+!1](Un.event?Un.event(r):r)}finally{Js=!1}}function sa(r){Js=!0;try{return this.l[r.type+!0](Un.event?Un.event(r):r)}finally{Js=!1}}function ds(r,t){this.props=r,this.context=t}function go(r,t){if(null==t)return r.__?go(r.__,r.__.__k.indexOf(r)+1):null;for(var e;t<r.__k.length;t++)if(null!=(e=r.__k[t])&&null!=e.__e)return e.__e;return"function"==typeof r.type?go(r):null}function _u(r){var t,e;if(null!=(r=r.__)&&null!=r.__c){for(r.__e=r.__c.base=null,t=0;t<r.__k.length;t++)if(null!=(e=r.__k[t])&&null!=e.__e){r.__e=r.__c.base=e.__e;break}return _u(r)}}function oa(r){Js?setTimeout(r):_a(r)}function ya(r){(!r.__d&&(r.__d=!0)&&Vs.push(r)&&!oc.__r++||Ka!==Un.debounceRendering)&&((Ka=Un.debounceRendering)||oa)(oc)}function oc(){var r,t,e,s,l,f,C,z;for(Vs.sort(function(W,re){return W.__v.__b-re.__v.__b});r=Vs.shift();)r.__d&&(t=Vs.length,s=void 0,l=void 0,C=(f=(e=r).__v).__e,(z=e.__P)&&(s=[],(l=Po({},f)).__v=f.__v+1,el(z,f,l,e.__n,void 0!==z.ownerSVGElement,null!=f.__h?[C]:null,s,C??go(f),f.__h),aa(s,f),f.__e!=C&&_u(f)),Vs.length>t&&Vs.sort(function(W,re){return W.__v.__b-re.__v.__b}));oc.__r=0}function vo(r,t,e,s,l,f,C,z,W,re){var oe,Ne,Ye,Ve,$t,Ut,li,Di=s&&s.__k||ra,Sn=Di.length;for(e.__k=[],oe=0;oe<t.length;oe++)if(null!=(Ve=e.__k[oe]=null==(Ve=t[oe])||"boolean"==typeof Ve?null:"string"==typeof Ve||"number"==typeof Ve||"bigint"==typeof Ve?Wo(null,Ve,null,null,Ve):Array.isArray(Ve)?Wo(zn,{children:Ve},null,null,null):Ve.__b>0?Wo(Ve.type,Ve.props,Ve.key,Ve.ref?Ve.ref:null,Ve.__v):Ve)){if(Ve.__=e,Ve.__b=e.__b+1,null===(Ye=Di[oe])||Ye&&Ve.key==Ye.key&&Ve.type===Ye.type)Di[oe]=void 0;else for(Ne=0;Ne<Sn;Ne++){if((Ye=Di[Ne])&&Ve.key==Ye.key&&Ve.type===Ye.type){Di[Ne]=void 0;break}Ye=null}el(r,Ve,Ye=Ye||Pa,l,f,C,z,W,re),$t=Ve.__e,(Ne=Ve.ref)&&Ye.ref!=Ne&&(li||(li=[]),Ye.ref&&li.push(Ye.ref,null,Ve),li.push(Ne,Ve.__c||$t,Ve)),null!=$t?(null==Ut&&(Ut=$t),"function"==typeof Ve.type&&Ve.__k===Ye.__k?Ve.__d=W=zl(Ve,W,r):W=Qa(r,Ve,Ye,Di,$t,W),"function"==typeof e.type&&(e.__d=W)):W&&Ye.__e==W&&W.parentNode!=r&&(W=go(Ye))}for(e.__e=Ut,oe=Sn;oe--;)null!=Di[oe]&&("function"==typeof e.type&&null!=Di[oe].__e&&Di[oe].__e==e.__d&&(e.__d=Ra(s).nextSibling),ba(Di[oe],Di[oe]));if(li)for(oe=0;oe<li.length;oe++)Qs(li[oe],li[++oe],li[++oe])}function zl(r,t,e){for(var s,l=r.__k,f=0;l&&f<l.length;f++)(s=l[f])&&(s.__=r,t="function"==typeof s.type?zl(s,t,e):Qa(e,s,s,l,s.__e,t));return t}function $s(r,t){return t=t||[],null==r||"boolean"==typeof r||(Array.isArray(r)?r.some(function(e){$s(e,t)}):t.push(r)),t}function Qa(r,t,e,s,l,f){var C,z,W;if(void 0!==t.__d)C=t.__d,t.__d=void 0;else if(null==e||l!=f||null==l.parentNode)e:if(null==f||f.parentNode!==r)r.appendChild(l),C=null;else{for(z=f,W=0;(z=z.nextSibling)&&W<s.length;W+=1)if(z==l)break e;r.insertBefore(l,f),C=f}return void 0!==C?C:l.nextSibling}function Ra(r){var t,e,s;if(null==r.type||"string"==typeof r.type)return r.__e;if(r.__k)for(t=r.__k.length-1;t>=0;t--)if((e=r.__k[t])&&(s=Ra(e)))return s;return null}function el(r,t,e,s,l,f,C,z,W){var re,oe,Ne,Ye,Ve,$t,Ut,li,Di,Sn,hr,yr,ro,is,Bs,Qr=t.type;if(void 0!==t.constructor)return null;null!=e.__h&&(W=e.__h,z=t.__e=e.__e,t.__h=null,f=[z]),(re=Un.__b)&&re(t);try{e:if("function"==typeof Qr){if(li=t.props,Di=(re=Qr.contextType)&&s[re.__c],Sn=re?Di?Di.props.value:re.__:s,e.__c?Ut=(oe=t.__c=e.__c).__=oe.__E:("prototype"in Qr&&Qr.prototype.render?t.__c=oe=new Qr(li,Sn):(t.__c=oe=new ds(li,Sn),oe.constructor=Qr,oe.render=la),Di&&Di.sub(oe),oe.props=li,oe.state||(oe.state={}),oe.context=Sn,oe.__n=s,Ne=oe.__d=!0,oe.__h=[],oe._sb=[]),null==oe.__s&&(oe.__s=oe.state),null!=Qr.getDerivedStateFromProps&&(oe.__s==oe.state&&(oe.__s=Po({},oe.__s)),Po(oe.__s,Qr.getDerivedStateFromProps(li,oe.__s))),Ye=oe.props,Ve=oe.state,oe.__v=t,Ne)null==Qr.getDerivedStateFromProps&&null!=oe.componentWillMount&&oe.componentWillMount(),null!=oe.componentDidMount&&oe.__h.push(oe.componentDidMount);else{if(null==Qr.getDerivedStateFromProps&&li!==Ye&&null!=oe.componentWillReceiveProps&&oe.componentWillReceiveProps(li,Sn),!oe.__e&&null!=oe.shouldComponentUpdate&&!1===oe.shouldComponentUpdate(li,oe.__s,Sn)||t.__v===e.__v){for(t.__v!==e.__v&&(oe.props=li,oe.state=oe.__s,oe.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(Gu){Gu&&(Gu.__=t)}),hr=0;hr<oe._sb.length;hr++)oe.__h.push(oe._sb[hr]);oe._sb=[],oe.__h.length&&C.push(oe);break e}null!=oe.componentWillUpdate&&oe.componentWillUpdate(li,oe.__s,Sn),null!=oe.componentDidUpdate&&oe.__h.push(function(){oe.componentDidUpdate(Ye,Ve,$t)})}if(oe.context=Sn,oe.props=li,oe.__P=r,yr=Un.__r,ro=0,"prototype"in Qr&&Qr.prototype.render){for(oe.state=oe.__s,oe.__d=!1,yr&&yr(t),re=oe.render(oe.props,oe.state,oe.context),is=0;is<oe._sb.length;is++)oe.__h.push(oe._sb[is]);oe._sb=[]}else do{oe.__d=!1,yr&&yr(t),re=oe.render(oe.props,oe.state,oe.context),oe.state=oe.__s}while(oe.__d&&++ro<25);oe.state=oe.__s,null!=oe.getChildContext&&(s=Po(Po({},s),oe.getChildContext())),Ne||null==oe.getSnapshotBeforeUpdate||($t=oe.getSnapshotBeforeUpdate(Ye,Ve)),Bs=null!=re&&re.type===zn&&null==re.key?re.props.children:re,vo(r,Array.isArray(Bs)?Bs:[Bs],t,e,s,l,f,C,z,W),oe.base=t.__e,t.__h=null,oe.__h.length&&C.push(oe),Ut&&(oe.__E=oe.__=null),oe.__e=!1}else null==f&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=function kc(r,t,e,s,l,f,C,z){var W,re,oe,Ne=e.props,Ye=t.props,Ve=t.type,$t=0;if("svg"===Ve&&(l=!0),null!=f)for(;$t<f.length;$t++)if((W=f[$t])&&"setAttribute"in W==!!Ve&&(Ve?W.localName===Ve:3===W.nodeType)){r=W,f[$t]=null;break}if(null==r){if(null===Ve)return document.createTextNode(Ye);r=l?document.createElementNS("http://www.w3.org/2000/svg",Ve):document.createElement(Ve,Ye.is&&Ye),f=null,z=!1}if(null===Ve)Ne===Ye||z&&r.data===Ye||(r.data=Ye);else{if(f=f&&qa.call(r.childNodes),re=(Ne=e.props||Pa).dangerouslySetInnerHTML,oe=Ye.dangerouslySetInnerHTML,!z){if(null!=f)for(Ne={},$t=0;$t<r.attributes.length;$t++)Ne[r.attributes[$t].name]=r.attributes[$t].value;(oe||re)&&(oe&&(re&&oe.__html==re.__html||oe.__html===r.innerHTML)||(r.innerHTML=oe&&oe.__html||""))}if(function Rl(r,t,e,s,l){var f;for(f in e)"children"===f||"key"===f||f in t||Ja(r,f,null,e[f],s);for(f in t)l&&"function"!=typeof t[f]||"children"===f||"key"===f||"value"===f||"checked"===f||e[f]===t[f]||Ja(r,f,t[f],e[f],s)}(r,Ye,Ne,l,z),oe)t.__k=[];else if($t=t.props.children,vo(r,Array.isArray($t)?$t:[$t],t,e,s,l&&"foreignObject"!==Ve,f,C,f?f[0]:e.__k&&go(e,0),z),null!=f)for($t=f.length;$t--;)null!=f[$t]&&ls(f[$t]);z||("value"in Ye&&void 0!==($t=Ye.value)&&($t!==r.value||"progress"===Ve&&!$t||"option"===Ve&&$t!==Ne.value)&&Ja(r,"value",$t,Ne.value,!1),"checked"in Ye&&void 0!==($t=Ye.checked)&&$t!==r.checked&&Ja(r,"checked",$t,Ne.checked,!1))}return r}(e.__e,t,e,s,l,f,C,W);(re=Un.diffed)&&re(t)}catch(Gu){t.__v=null,(W||null!=f)&&(t.__e=z,t.__h=!!W,f[f.indexOf(z)]=null),Un.__e(Gu,t,e)}}function aa(r,t){Un.__c&&Un.__c(t,r),r.some(function(e){try{r=e.__h,e.__h=[],r.some(function(s){s.call(e)})}catch(s){Un.__e(s,e.__v)}})}function Qs(r,t,e){try{"function"==typeof r?r(t):r.current=t}catch(s){Un.__e(s,e)}}function ba(r,t,e){var s,l;if(Un.unmount&&Un.unmount(r),(s=r.ref)&&(s.current&&s.current!==r.__e||Qs(s,null,t)),null!=(s=r.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(f){Un.__e(f,t)}s.base=s.__P=null,r.__c=void 0}if(s=r.__k)for(l=0;l<s.length;l++)s[l]&&ba(s[l],t,e||"function"!=typeof r.type);e||null==r.__e||ls(r.__e),r.__=r.__e=r.__d=void 0}function la(r,t,e){return this.constructor(r,e)}function Eo(r,t,e){var s,l,f;Un.__&&Un.__(r,t),l=(s="function"==typeof e)?null:e&&e.__k||t.__k,f=[],el(t,r=(!s&&e||t).__k=Ot(zn,null,[r]),l||Pa,Pa,void 0!==t.ownerSVGElement,!s&&e?[e]:l?null:t.firstChild?qa.call(t.childNodes):null,f,!s&&e?e:l?l.__e:t.firstChild,s),aa(f,r)}qa=ra.slice,Un={__e:function(r,t,e,s){for(var l,f,C;t=t.__;)if((l=t.__c)&&!l.__)try{if((f=l.constructor)&&null!=f.getDerivedStateFromError&&(l.setState(f.getDerivedStateFromError(r)),C=l.__d),null!=l.componentDidCatch&&(l.componentDidCatch(r,s||{}),C=l.__d),C)return l.__E=l}catch(z){r=z}throw r}},Uo=0,Ls=function(r){return null!=r&&void 0===r.constructor},Js=!1,ds.prototype.setState=function(r,t){var e;e=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Po({},this.state),"function"==typeof r&&(r=r(Po({},e),this.props)),r&&Po(e,r),null!=r&&this.__v&&(t&&this._sb.push(t),ya(this))},ds.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),ya(this))},ds.prototype.render=zn,Vs=[],_a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oc.__r=0,na=0;var ms,Ro,tl,Fl=[],Os=[],Mc=Un.__b,il=Un.__r,Fo=Un.diffed,za=Un.__c,nl=Un.unmount;function da(){for(var r;r=Fl.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(eo),r.__H.__h.forEach(Ba),r.__H.__h=[]}catch(t){r.__H.__h=[],Un.__e(t,r.__v)}}Un.__b=function(r){ms=null,Mc&&Mc(r)},Un.__r=function(r){il&&il(r);var t=(ms=r.__c).__H;t&&(Ro===ms?(t.__h=[],ms.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=Os,e.__N=e.i=void 0})):(t.__h.forEach(eo),t.__h.forEach(Ba),t.__h=[])),Ro=ms},Un.diffed=function(r){Fo&&Fo(r);var t=r.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Fl.push(t)&&tl===Un.requestAnimationFrame||((tl=Un.requestAnimationFrame)||hs)(da)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==Os&&(e.__=e.__V),e.i=void 0,e.__V=Os})),Ro=ms=null},Un.__c=function(r,t){t.some(function(e){try{e.__h.forEach(eo),e.__h=e.__h.filter(function(s){return!s.__||Ba(s)})}catch(s){t.some(function(l){l.__h&&(l.__h=[])}),t=[],Un.__e(s,e.__v)}}),za&&za(r,t)},Un.unmount=function(r){nl&&nl(r);var t,e=r.__c;e&&e.__H&&(e.__H.__.forEach(function(s){try{eo(s)}catch(l){t=l}}),e.__H=void 0,t&&Un.__e(t,e.__v))};var rl="function"==typeof requestAnimationFrame;function hs(r){var t,e=function(){clearTimeout(s),rl&&cancelAnimationFrame(t),setTimeout(r)},s=setTimeout(e,100);rl&&(t=requestAnimationFrame(e))}function eo(r){var t=ms,e=r.__c;"function"==typeof e&&(r.__c=void 0,e()),ms=t}function Ba(r){var t=ms;r.__c=r.__(),ms=t}function Bo(r,t){for(var e in r)if("__source"!==e&&!(e in t))return!0;for(var s in t)if("__source"!==s&&r[s]!==t[s])return!0;return!1}function sl(r){this.props=r}(sl.prototype=new ds).isPureReactComponent=!0,sl.prototype.shouldComponentUpdate=function(r,t){return Bo(this.props,r)||Bo(this.state,t)};var Ya=Un.__b;Un.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),Ya&&Ya(r)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var Xo=Un.__e;Un.__e=function(r,t,e,s){if(r.then)for(var l,f=t;f=f.__;)if((l=f.__c)&&l.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),l.__c(r,t);Xo(r,t,e,s)};var Hl=Un.unmount;function Va(r,t,e){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(s){"function"==typeof s.__c&&s.__c()}),r.__c.__H=null),null!=(r=function lc(r,t){for(var e in t)r[e]=t[e];return r}({},r)).__c&&(r.__c.__P===e&&(r.__c.__P=t),r.__c=null),r.__k=r.__k&&r.__k.map(function(s){return Va(s,t,e)})),r}function ol(r,t,e){return r&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(s){return ol(s,t,e)}),r.__c&&r.__c.__P===t&&(r.__e&&e.insertBefore(r.__e,r.__d),r.__c.__e=!0,r.__c.__P=e)),r}function bl(){this.__u=0,this.t=null,this.__b=null}function xl(r){var t=r.__.__c;return t&&t.__a&&t.__a(r)}function No(){this.u=null,this.o=null}Un.unmount=function(r){var t=r.__c;t&&t.__R&&t.__R(),t&&!0===r.__h&&(r.type=null),Hl&&Hl(r)},(bl.prototype=new ds).__c=function(r,t){var e=t.__c,s=this;null==s.t&&(s.t=[]),s.t.push(e);var l=xl(s.__v),f=!1,C=function(){f||(f=!0,e.__R=null,l?l(z):z())};e.__R=C;var z=function(){if(! --s.__u){if(s.state.__a){var re=s.state.__a;s.__v.__k[0]=ol(re,re.__c.__P,re.__c.__O)}var oe;for(s.setState({__a:s.__b=null});oe=s.t.pop();)oe.forceUpdate()}},W=!0===t.__h;s.__u++||W||s.setState({__a:s.__b=s.__v.__k[0]}),r.then(C,C)},bl.prototype.componentWillUnmount=function(){this.t=[]},bl.prototype.render=function(r,t){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=Va(this.__b,e,s.__O=s.__P)}this.__b=null}var l=t.__a&&Ot(zn,null,r.fallback);return l&&(l.__h=null),[Ot(zn,null,t.__a?null:r.children),l]};var gs=function(r,t,e){if(++e[1]===e[0]&&r.o.delete(t),r.props.revealOrder&&("t"!==r.props.revealOrder[0]||!r.o.size))for(e=r.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;r.u=e=e[2]}};function gn(r){return this.getChildContext=function(){return r.context},r.children}function m(r){var t=this,e=r.i;t.componentWillUnmount=function(){Eo(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),r.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(s){this.childNodes.push(s),t.i.appendChild(s)},insertBefore:function(s,l){this.childNodes.push(s),t.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),t.i.removeChild(s)}}),Eo(Ot(gn,{context:t.context},r.__v),t.l)):t.l&&t.componentWillUnmount()}(No.prototype=new ds).__a=function(r){var t=this,e=xl(t.__v),s=t.o.get(r);return s[0]++,function(l){var f=function(){t.props.revealOrder?(s.push(l),gs(t,r,s)):l()};e?e(f):f()}},No.prototype.render=function(r){this.u=null,this.o=new Map;var t=$s(r.children);r.revealOrder&&"b"===r.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return r.children},No.prototype.componentDidUpdate=No.prototype.componentDidMount=function(){var r=this;this.o.forEach(function(t,e){gs(r,e,t)})};var G=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ne=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_e=typeof document<"u",We=function(r){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(r)};ds.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(ds.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(t){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:t})}})});var Ti=Un.event;function sn(){}function In(){return this.cancelBubble}function Yn(){return this.defaultPrevented}Un.event=function(r){return Ti&&(r=Ti(r)),r.persist=sn,r.isPropagationStopped=In,r.isDefaultPrevented=Yn,r.nativeEvent=r};var Yr={configurable:!0,get:function(){return this.class}},Ps=Un.vnode;Un.vnode=function(r){var t=r.type,e=r.props,s=e;if("string"==typeof t){var l=-1===t.indexOf("-");for(var f in s={},e){var C=e[f];_e&&"children"===f&&"noscript"===t||"value"===f&&"defaultValue"in e&&null==C||("defaultValue"===f&&"value"in e&&null==e.value?f="value":"download"===f&&!0===C?C="":/ondoubleclick/i.test(f)?f="ondblclick":/^onchange(textarea|input)/i.test(f+t)&&!We(e.type)?f="oninput":/^onfocus$/i.test(f)?f="onfocusin":/^onblur$/i.test(f)?f="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(f)?f=f.toLowerCase():l&&ne.test(f)?f=f.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===C&&(C=void 0),/^oninput$/i.test(f)&&(f=f.toLowerCase(),s[f]&&(f="oninputCapture")),s[f]=C)}"select"==t&&s.multiple&&Array.isArray(s.value)&&(s.value=$s(e.children).forEach(function(z){z.props.selected=-1!=s.value.indexOf(z.props.value)})),"select"==t&&null!=s.defaultValue&&(s.value=$s(e.children).forEach(function(z){z.props.selected=s.multiple?-1!=s.defaultValue.indexOf(z.props.value):s.defaultValue==z.props.value})),r.props=s,e.class!=e.className&&(Yr.enumerable="className"in e,null!=e.className&&(s.class=e.className),Object.defineProperty(s,"className",Yr))}r.$$typeof=G,Ps&&Ps(r)};var to=Un.__r;Un.__r=function(r){to&&to(r)};const zr=[],ys=new Map;function Ys(r){zr.push(r),ys.forEach(t=>{qd(t,r)})}function Zd(r){let t=ys.get(r);if(!t||!t.isConnected){if(t=r.querySelector("style[data-fullcalendar]"),!t){t=document.createElement("style"),t.setAttribute("data-fullcalendar","");const e=function up(){return void 0===Ea&&(Ea=function wl(){const r=document.querySelector('meta[name="csp-nonce"]');if(r&&r.hasAttribute("content"))return r.getAttribute("content");const t=document.querySelector("script[nonce]");return t&&t.nonce||""}()),Ea}();e&&(t.nonce=e);const s=r===document?document.head:r,l=r===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(t,l)}ys.set(r,t),function Tf(r){for(const t of zr)qd(r,t)}(t)}}function qd(r,t){const{sheet:e}=r,s=e.cssRules.length;t.split("}").forEach((l,f)=>{(l=l.trim())&&e.insertRule(l+"}",s+f)})}let Ea;typeof document<"u"&&Zd(document),Ys(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class pa{constructor(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==t?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))}pause(t=""){let{pauseDepths:e}=this;e[t]=(e[t]||0)+1,this.clearTimeout()}resume(t="",e){let{pauseDepths:s}=this;t in s&&(e?delete s[t]:(s[t]-=1,s[t]<=0&&delete s[t]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function uc(r){r.parentNode&&r.parentNode.removeChild(r)}function ps(r,t){if(r.closest)return r.closest(t);if(!document.documentElement.contains(r))return null;do{if(Tn(r,t))return r;r=r.parentElement||r.parentNode}while(null!==r&&1===r.nodeType);return null}function Tn(r,t){return(r.matches||r.matchesSelector||r.msMatchesSelector).call(r,t)}const jc=/(top|left|right|bottom|width|height)$/i;function Cl(r,t){for(let e in t)vn(r,e,t[e])}function vn(r,t,e){r.style[t]=null==e?"":"number"==typeof e&&jc.test(t)?`${e}px`:e}function Wu(r){var t,e;return null!==(e=null===(t=r.composedPath)||void 0===t?void 0:t.call(r)[0])&&void 0!==e?e:r.target}let hp=0;function Oc(){return hp+=1,"fc-dom-"+hp}function bu(r){r.preventDefault()}function Ih(r,t,e,s){let l=function Dh(r,t){return e=>{let s=ps(e.target,r);s&&t.call(s,e,s)}}(e,s);return r.addEventListener(t,l),()=>{r.removeEventListener(t,l)}}const ja=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function Kd(r){return Object.assign({onClick:r},Jd(r))}function Jd(r){return{tabIndex:0,onKeyDown(t){("Enter"===t.key||" "===t.key)&&(r(t),t.preventDefault())}}}let xu=0;function w(){return xu+=1,String(xu)}function d(){document.body.classList.add("fc-not-allowed")}function g(){document.body.classList.remove("fc-not-allowed")}function he(r,t,e){return e.func?e.func(r,t):function de(r,t){return r||t?null==t?-1:null==r?1:"string"==typeof r||"string"==typeof t?String(r).localeCompare(String(t)):r-t:0}(r[e.field],t[e.field])*(e.order||1)}function Ce(r,t){let e=String(r);return"000".substr(0,t-e.length)+e}function je(r,t,e){return"function"==typeof r?r(...t):"string"==typeof r?t.reduce((s,l,f)=>s.replace("$"+f,l||""),r):e}function Qe(r,t){return r-t}function et(r){return r%1==0}function tt(r){let t=r.querySelector(".fc-scrollgrid-shrink-frame"),e=r.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!e)throw new Error("needs fc-scrollgrid-shrink-cushion className");return r.getBoundingClientRect().width-t.getBoundingClientRect().width+e.getBoundingClientRect().width}const st=["years","months","days","milliseconds"],Te=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ge(r,t){return"string"==typeof r?function bt(r){let t=Te.exec(r);if(t){let e=t[1]?-1:1;return{years:0,months:0,days:e*(t[2]?parseInt(t[2],10):0),milliseconds:e*(60*(t[3]?parseInt(t[3],10):0)*60*1e3+60*(t[4]?parseInt(t[4],10):0)*1e3+1e3*(t[5]?parseInt(t[5],10):0)+(t[6]?parseInt(t[6],10):0))}}return null}(r):"object"==typeof r&&r?xt(r):"number"==typeof r?xt({[t||"milliseconds"]:r}):null}function xt(r){let t={years:r.years||r.year||0,months:r.months||r.month||0,days:r.days||r.day||0,milliseconds:60*(r.hours||r.hour||0)*60*1e3+60*(r.minutes||r.minute||0)*1e3+1e3*(r.seconds||r.second||0)+(r.milliseconds||r.millisecond||r.ms||0)},e=r.weeks||r.week;return e&&(t.days+=7*e,t.specifiedWeeks=!0),t}function Gt(r,t){return{years:r.years+t.years,months:r.months+t.months,days:r.days+t.days,milliseconds:r.milliseconds+t.milliseconds}}function ci(r){return Wi(r)/864e5}function Wi(r){return 31536e6*r.years+2592e6*r.months+864e5*r.days+r.milliseconds}function pi(r,t){let e=null;for(let s=0;s<st.length;s+=1){let l=st[s];if(t[l]){let f=r[l]/t[l];if(!et(f)||null!==e&&e!==f)return null;e=f}else if(r[l])return null}return e}function Ii(r){let t=r.milliseconds;if(t){if(t%1e3!=0)return{unit:"millisecond",value:t};if(t%6e4!=0)return{unit:"second",value:t/1e3};if(t%36e5!=0)return{unit:"minute",value:t/6e4};if(t)return{unit:"hour",value:t/36e5}}return r.days?r.specifiedWeeks&&r.days%7==0?{unit:"week",value:r.days/7}:{unit:"day",value:r.days}:r.months?{unit:"month",value:r.months}:r.years?{unit:"year",value:r.years}:{unit:"millisecond",value:0}}function Bi(r,t,e){if(r===t)return!0;let l,s=r.length;if(s!==t.length)return!1;for(l=0;l<s;l+=1)if(!(e?e(r[l],t[l]):r[l]===t[l]))return!1;return!0}const qi=["sun","mon","tue","wed","thu","fri","sat"];function Bn(r,t){let e=ns(r);return e[2]+=7*t,Is(e)}function Hn(r,t){let e=ns(r);return e[2]+=t,Is(e)}function En(r,t){let e=ns(r);return e[6]+=t,Is(e)}function rr(r,t){return(t.valueOf()-r.valueOf())/864e5}function cs(r,t){return ko(r)===ko(t)?Math.round(rr(r,t)):null}function Hr(r){return Is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()])}function Ur(r,t,e,s){let l=Is([t,0,1+Jr(t,e,s)]),f=Hr(r),C=Math.round(rr(l,f));return Math.floor(C/7)+1}function Jr(r,t,e){let s=7+t-e;return-(7+Is([r,0,s]).getUTCDay()-t)%7+s-1}function Es(r){return[r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()]}function fa(r){return new Date(r[0],r[1]||0,null==r[2]?1:r[2],r[3]||0,r[4]||0,r[5]||0)}function ns(r){return[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()]}function Is(r){return 1===r.length&&(r=r.concat([0])),new Date(Date.UTC(...r))}function Uc(r){return!isNaN(r.valueOf())}function ko(r){return 1e3*r.getUTCHours()*60*60+1e3*r.getUTCMinutes()*60+1e3*r.getUTCSeconds()+r.getUTCMilliseconds()}function El(r,t,e=!1){let s=r.toISOString();return s=s.replace(".000",""),e&&(s=s.replace("T00:00:00Z","")),s.length>10&&(null==t?s=s.replace("Z",""):0!==t&&(s=s.replace("Z",wu(t,!0)))),s}function Ua(r){return r.toISOString().replace(/T.*$/,"")}function Wc(r){return Ce(r.getUTCHours(),2)+":"+Ce(r.getUTCMinutes(),2)+":"+Ce(r.getUTCSeconds(),2)}function wu(r,t=!1){let e=r<0?"-":"+",s=Math.abs(r),l=Math.floor(s/60),f=Math.round(s%60);return t?`${e+Ce(l,2)}:${Ce(f,2)}`:`GMT${e}${l}${f?`:${Ce(f,2)}`:""}`}function tr(r,t,e){let s,l;return function(...f){if(s){if(!Bi(s,f)){e&&e(l);let C=r.apply(this,f);(!t||!t(C,l))&&(l=C)}}else l=r.apply(this,f);return s=f,l}}function pc(r,t,e){let s,l;return f=>{if(s){if(!Ta(s,f)){e&&e(l);let C=r.call(this,f);(!t||!t(C,l))&&(l=C)}}else l=r.call(this,f);return s=f,l}}const kf={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},md={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},$u=/\s*([ap])\.?m\.?/i,Af=/,/g,fp=/\s+/g,Lh=/\u200e/g,$c=/UTC|GMT/;class Oh{constructor(t){let e={},s={},l=0;for(let f in t)f in kf?(s[f]=t[f],l=Math.max(kf[f],l)):(e[f]=t[f],f in md&&(l=Math.max(md[f],l)));this.standardDateProps=e,this.extendedSettings=s,this.severity=l,this.buildFormattingFunc=tr(mp)}format(t,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(t)}formatRange(t,e,s,l){let{standardDateProps:f,extendedSettings:C}=this,z=function Qd(r,t,e){return e.getMarkerYear(r)!==e.getMarkerYear(t)?5:e.getMarkerMonth(r)!==e.getMarkerMonth(t)?4:e.getMarkerDay(r)!==e.getMarkerDay(t)?2:ko(r)!==ko(t)?1:0}(t.marker,e.marker,s.calendarSystem);if(!z)return this.format(t,s);let W=z;W>1&&("numeric"===f.year||"2-digit"===f.year)&&("numeric"===f.month||"2-digit"===f.month)&&("numeric"===f.day||"2-digit"===f.day)&&(W=1);let re=this.format(t,s),oe=this.format(e,s);if(re===oe)return re;let Ne=function gd(r,t){let e={};for(let s in r)(!(s in md)||md[s]<=t)&&(e[s]=r[s]);return e}(f,W),Ye=mp(Ne,C,s),Ve=Ye(t),$t=Ye(e),Ut=function Xc(r,t,e,s){let l=0;for(;l<r.length;){let f=r.indexOf(t,l);if(-1===f)break;let C=r.substr(0,f);l=f+t.length;let z=r.substr(l),W=0;for(;W<e.length;){let re=e.indexOf(s,W);if(-1===re)break;let oe=e.substr(0,re);W=re+s.length;let Ne=e.substr(W);if(C===oe&&z===Ne)return{before:C,after:z}}}return null}(re,Ve,oe,$t),li=C.separator||l||s.defaultSeparator||"";return Ut?Ut.before+Ve+li+$t+Ut.after:re+li+oe}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function mp(r,t,e){let s=Object.keys(r).length;return 1===s&&"short"===r.timeZoneName?l=>wu(l.timeZoneOffset):0===s&&t.week?l=>function gp(r,t,e,s,l){let f=[];return"long"===l?f.push(e):("short"===l||"narrow"===l)&&f.push(t),("long"===l||"short"===l)&&f.push(" "),f.push(s.simpleNumberFormat.format(r)),"rtl"===s.options.direction&&f.reverse(),f.join("")}(e.computeWeekNumber(l.marker),e.weekText,e.weekTextLong,e.locale,t.week):function Mf(r,t,e){r=Object.assign({},r),t=Object.assign({},t),function rg(r,t){r.timeZoneName&&(r.hour||(r.hour="2-digit"),r.minute||(r.minute="2-digit")),"long"===r.timeZoneName&&(r.timeZoneName="short"),t.omitZeroMinute&&(r.second||r.millisecond)&&delete t.omitZeroMinute}(r,t),r.timeZone="UTC";let l,s=new Intl.DateTimeFormat(e.locale.codes,r);if(t.omitZeroMinute){let f=Object.assign({},r);delete f.minute,l=new Intl.DateTimeFormat(e.locale.codes,f)}return f=>{let z,{marker:C}=f;return z=l&&!C.getUTCMinutes()?l:s,function sg(r,t,e,s,l){return r=r.replace(Lh,""),"short"===e.timeZoneName&&(r=function og(r,t){let e=!1;return r=r.replace($c,()=>(e=!0,t)),e||(r+=` ${t}`),r}(r,"UTC"===l.timeZone||null==t.timeZoneOffset?"UTC":wu(t.timeZoneOffset))),s.omitCommas&&(r=r.replace(Af,"").trim()),s.omitZeroMinute&&(r=r.replace(":00","")),!1===s.meridiem?r=r.replace($u,"").trim():"narrow"===s.meridiem?r=r.replace($u,(f,C)=>C.toLocaleLowerCase()):"short"===s.meridiem?r=r.replace($u,(f,C)=>`${C.toLocaleLowerCase()}m`):"lowercase"===s.meridiem&&(r=r.replace($u,f=>f.toLocaleLowerCase())),r=(r=r.replace(fp," ")).trim()}(z.format(C),f,r,t,e)}}(r,t,e)}function Ao(r,t){let e=t.markerToArray(r.marker);return{marker:r.marker,timeZoneOffset:r.timeZoneOffset,array:e,year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]}}function fc(r,t,e,s){let l=Ao(r,e.calendarSystem);return{date:l,start:l,end:t?Ao(t,e.calendarSystem):null,timeZone:e.timeZone,localeCodes:e.locale.codes,defaultSeparator:s||e.defaultSeparator}}class Cu{constructor(t){this.cmdStr=t}format(t,e,s){return e.cmdFormatter(this.cmdStr,fc(t,null,e,s))}formatRange(t,e,s,l){return s.cmdFormatter(this.cmdStr,fc(t,e,s,l))}}class Eu{constructor(t){this.func=t}format(t,e,s){return this.func(fc(t,null,e,s))}formatRange(t,e,s,l){return this.func(fc(t,e,s,l))}}function Gs(r){return"object"==typeof r&&r?new Oh(r):"string"==typeof r?new Cu(r):"function"==typeof r?new Eu(r):null}const Df={navLinkDayClick:ki,navLinkWeekClick:ki,duration:Ge,bootstrapFontAwesome:ki,buttonIcons:ki,customButtons:ki,defaultAllDayEventDuration:Ge,defaultTimedEventDuration:Ge,nextDayThreshold:Ge,scrollTime:Ge,scrollTimeReset:Boolean,slotMinTime:Ge,slotMaxTime:Ge,dayPopoverFormat:Gs,slotDuration:Ge,snapDuration:Ge,headerToolbar:ki,footerToolbar:ki,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Gs,dayHeaderClassNames:ki,dayHeaderContent:ki,dayHeaderDidMount:ki,dayHeaderWillUnmount:ki,dayCellClassNames:ki,dayCellContent:ki,dayCellDidMount:ki,dayCellWillUnmount:ki,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ki,weekNumbers:Boolean,weekNumberClassNames:ki,weekNumberContent:ki,weekNumberDidMount:ki,weekNumberWillUnmount:ki,editable:Boolean,viewClassNames:ki,viewDidMount:ki,viewWillUnmount:ki,nowIndicator:Boolean,nowIndicatorClassNames:ki,nowIndicatorContent:ki,nowIndicatorDidMount:ki,nowIndicatorWillUnmount:ki,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ki,locale:ki,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ki,eventOrder:function K(r){let s,l,t=[],e=[];for("string"==typeof r?e=r.split(/\s*,\s*/):"function"==typeof r?e=[r]:Array.isArray(r)&&(e=r),s=0;s<e.length;s+=1)l=e[s],"string"==typeof l?t.push("-"===l.charAt(0)?{field:l.substring(1),order:-1}:{field:l,order:1}):"function"==typeof l&&t.push({func:l});return t},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ki,contentHeight:ki,direction:String,weekNumberFormat:Gs,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ki,initialDate:ki,now:ki,eventDataTransform:ki,stickyHeaderDates:ki,stickyFooterScrollbar:ki,viewHeight:ki,defaultAllDay:Boolean,eventSourceFailure:ki,eventSourceSuccess:ki,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ki,eventConstraint:ki,eventAllow:ki,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ki,eventContent:ki,eventDidMount:ki,eventWillUnmount:ki,selectConstraint:ki,selectOverlap:ki,selectAllow:ki,droppable:Boolean,unselectCancel:String,slotLabelFormat:ki,slotLaneClassNames:ki,slotLaneContent:ki,slotLaneDidMount:ki,slotLaneWillUnmount:ki,slotLabelClassNames:ki,slotLabelContent:ki,slotLabelDidMount:ki,slotLabelWillUnmount:ki,dayMaxEvents:ki,dayMaxEventRows:ki,dayMinWidth:Number,slotLabelInterval:Ge,allDayText:String,allDayClassNames:ki,allDayContent:ki,allDayDidMount:ki,allDayWillUnmount:ki,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Gs,rerenderDelay:Number,moreLinkText:ki,moreLinkHint:ki,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ki,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ge,hiddenDays:ki,fixedWeekCount:Boolean,validRange:ki,visibleRange:ki,titleFormat:ki,eventInteractive:Boolean,noEventsText:String,viewHint:ki,navLinkHint:ki,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ki,moreLinkClassNames:ki,moreLinkContent:ki,moreLinkDidMount:ki,moreLinkWillUnmount:ki,monthStartFormat:Gs,handleCustomRendering:ki,customRenderingMetaMap:ki,customRenderingReplaces:Boolean},Xu={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},Ph={datesSet:ki,eventsSet:ki,eventAdd:ki,eventChange:ki,eventRemove:ki,windowResize:ki,eventClick:ki,eventMouseEnter:ki,eventMouseLeave:ki,select:ki,unselect:ki,loading:ki,_unmount:ki,_beforeprint:ki,_afterprint:ki,_noEventDrop:ki,_noEventResize:ki,_resize:ki,_scrollRequest:ki},Zc={buttonText:ki,buttonHints:ki,views:ki,plugins:ki,initialEvents:ki,events:ki,eventSources:ki},Zu={headerToolbar:Zo,footerToolbar:Zo,buttonText:Zo,buttonHints:Zo,buttonIcons:Zo,dateIncrement:Zo,plugins:eh,events:eh,eventSources:eh,resources:eh};function Zo(r,t){return"object"==typeof r&&"object"==typeof t&&r&&t?Ta(r,t):r===t}function eh(r,t){return Array.isArray(r)&&Array.isArray(t)?Bi(r,t):r===t}const If={type:String,component:ki,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ki,usesMinMaxTime:Boolean,classNames:ki,content:ki,didMount:ki,willUnmount:ki};function Hs(r){return qo(r,Zu)}function An(r,t){let e={},s={};for(let l in t)l in r&&(e[l]=t[l](r[l]));for(let l in r)l in t||(s[l]=r[l]);return{refined:e,extra:s}}function ki(r){return r}const{hasOwnProperty:Pc}=Object.prototype;function qo(r,t){let e={};if(t)for(let s in t)if(t[s]===Zo){let l=[];for(let f=r.length-1;f>=0;f-=1){let C=r[f][s];if("object"==typeof C&&C)l.unshift(C);else if(void 0!==C){e[s]=C;break}}l.length&&(e[s]=qo(l))}for(let s=r.length-1;s>=0;s-=1){let l=r[s];for(let f in l)f in e||(e[f]=l[f])}return e}function qc(r,t){let e={};for(let s in r)t(r[s],s)&&(e[s]=r[s]);return e}function mc(r,t){let e={};for(let s in r)e[s]=t(r[s],s);return e}function Sl(r){let t={};for(let e of r)t[e]=!0;return t}function th(r){let t=[];for(let e in r)t.push(r[e]);return t}function Ta(r,t){if(r===t)return!0;for(let e in r)if(Pc.call(r,e)&&!(e in t))return!1;for(let e in t)if(Pc.call(t,e)&&r[e]!==t[e])return!1;return!0}const vd=/^on[A-Z]/;function ih(r,t){let e=[];for(let s in r)Pc.call(r,s)&&(s in t||e.push(s));for(let s in t)Pc.call(t,s)&&r[s]!==t[s]&&e.push(s);return e}function _d(r,t,e={}){if(r===t)return!0;for(let s in t)if(!(s in r)||!Lf(r[s],t[s],e[s]))return!1;for(let s in r)if(!(s in t))return!1;return!0}function Lf(r,t,e){return r===t||!0===e||!!e&&e(r,t)}let Of={};!function Rh(r,t){Of[r]=t}("gregory",class yd{getMarkerYear(t){return t.getUTCFullYear()}getMarkerMonth(t){return t.getUTCMonth()}getMarkerDay(t){return t.getUTCDate()}arrayToMarker(t){return Is(t)}markerToArray(t){return ns(t)}});const Kc=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class nh{constructor(t){let e=this.timeZone=t.timeZone,s="local"!==e&&"UTC"!==e;t.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(e)),this.canComputeOffset=!(s&&!this.namedTimeZoneImpl),this.calendarSystem=function _p(r){return new Of[r]}(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,"ISO"===t.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof t.firstDay&&(this.weekDow=t.firstDay),"function"==typeof t.weekNumberCalculation&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=null!=t.weekText?t.weekText:t.locale.options.weekText,this.weekTextLong=(null!=t.weekTextLong?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}createMarker(t){let e=this.createMarkerMeta(t);return null===e?null:e.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):Is(Es(new Date))}createMarkerMeta(t){if("string"==typeof t)return this.parse(t);let e=null;return"number"==typeof t?e=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(e=this.timestampToMarker(t))):Array.isArray(t)&&(e=Is(t)),null!==e&&Uc(e)?{marker:e,isTimeUnspecified:!1,forcedTzo:null}:null}parse(t){let e=function Jc(r){let t=Kc.exec(r);if(t){let e=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?1e3*+`0.${t[12]}`:0));if(Uc(e)){let s=null;return t[13]&&(s=("-"===t[15]?-1:1)*(60*Number(t[16]||0)+Number(t[18]||0))),{marker:e,isTimeUnspecified:!t[6],timeZoneOffset:s}}}return null}(t);if(null===e)return null;let{marker:s}=e,l=null;return null!==e.timeZoneOffset&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-60*e.timeZoneOffset*1e3):l=e.timeZoneOffset),{marker:s,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:l}}getYear(t){return this.calendarSystem.getMarkerYear(t)}getMonth(t){return this.calendarSystem.getMarkerMonth(t)}getDay(t){return this.calendarSystem.getMarkerDay(t)}add(t,e){let s=this.calendarSystem.markerToArray(t);return s[0]+=e.years,s[1]+=e.months,s[2]+=e.days,s[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(t,e){let s=this.calendarSystem.markerToArray(t);return s[0]-=e.years,s[1]-=e.months,s[2]-=e.days,s[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(t,e){let s=this.calendarSystem.markerToArray(t);return s[0]+=e,this.calendarSystem.arrayToMarker(s)}addMonths(t,e){let s=this.calendarSystem.markerToArray(t);return s[1]+=e,this.calendarSystem.arrayToMarker(s)}diffWholeYears(t,e){let{calendarSystem:s}=this;return ko(t)===ko(e)&&s.getMarkerDay(t)===s.getMarkerDay(e)&&s.getMarkerMonth(t)===s.getMarkerMonth(e)?s.getMarkerYear(e)-s.getMarkerYear(t):null}diffWholeMonths(t,e){let{calendarSystem:s}=this;return ko(t)===ko(e)&&s.getMarkerDay(t)===s.getMarkerDay(e)?s.getMarkerMonth(e)-s.getMarkerMonth(t)+12*(s.getMarkerYear(e)-s.getMarkerYear(t)):null}greatestWholeUnit(t,e){let s=this.diffWholeYears(t,e);return null!==s?{unit:"year",value:s}:(s=this.diffWholeMonths(t,e),null!==s?{unit:"month",value:s}:(s=function _s(r,t){let e=cs(r,t);return null!==e&&e%7==0?e/7:null}(t,e),null!==s?{unit:"week",value:s}:(s=cs(t,e),null!==s?{unit:"day",value:s}:(s=function sr(r,t){return(t.valueOf()-r.valueOf())/36e5}(t,e),et(s)?{unit:"hour",value:s}:(s=function Vn(r,t){return(t.valueOf()-r.valueOf())/6e4}(t,e),et(s)?{unit:"minute",value:s}:(s=function Ir(r,t){return(t.valueOf()-r.valueOf())/1e3}(t,e),et(s)?{unit:"second",value:s}:{unit:"millisecond",value:e.valueOf()-t.valueOf()}))))))}countDurationsBetween(t,e,s){let l;return s.years&&(l=this.diffWholeYears(t,e),null!==l)?l/function _i(r){return ci(r)/365}(s):s.months&&(l=this.diffWholeMonths(t,e),null!==l)?l/function Qi(r){return ci(r)/30}(s):s.days&&(l=cs(t,e),null!==l)?l/ci(s):(e.valueOf()-t.valueOf())/Wi(s)}startOf(t,e){return"year"===e?this.startOfYear(t):"month"===e?this.startOfMonth(t):"week"===e?this.startOfWeek(t):"day"===e?Hr(t):"hour"===e?function _o(r){return Is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()])}(t):"minute"===e?function Sa(r){return Is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes()])}(t):"second"===e?function dc(r){return Is([r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()])}(t):null}startOfYear(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])}startOfMonth(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])}startOfWeek(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):function Ds(r,t,e){let s=r.getUTCFullYear(),l=Ur(r,s,t,e);if(l<1)return Ur(r,s-1,t,e);let f=Ur(r,s+1,t,e);return f>=1?Math.min(l,f):l}(t,this.weekDow,this.weekDoy)}format(t,e,s={}){return e.format({marker:t,timeZoneOffset:null!=s.forcedTzo?s.forcedTzo:this.offsetForMarker(t)},this)}formatRange(t,e,s,l={}){return l.isEndExclusive&&(e=En(e,-1)),s.formatRange({marker:t,timeZoneOffset:null!=l.forcedStartTzo?l.forcedStartTzo:this.offsetForMarker(t)},{marker:e,timeZoneOffset:null!=l.forcedEndTzo?l.forcedEndTzo:this.offsetForMarker(e)},this,l.defaultSeparator)}formatIso(t,e={}){let s=null;return e.omitTimeZoneOffset||(s=null!=e.forcedTzo?e.forcedTzo:this.offsetForMarker(t)),El(t,s,e.omitTime)}timestampToMarker(t){return"local"===this.timeZone?Is(Es(new Date(t))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?Is(this.namedTimeZoneImpl.timestampToArray(t)):new Date(t)}offsetForMarker(t){return"local"===this.timeZone?-fa(ns(t)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(ns(t)):null}toDate(t,e){return"local"===this.timeZone?fa(ns(t)):"UTC"===this.timeZone?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(ns(t))*60):new Date(t.valueOf()-(e||0))}}class bd{constructor(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}setIconOverride(t){let e,s;if("object"==typeof t&&t){for(s in e=Object.assign({},this.iconClasses),t)e[s]=this.applyIconOverridePrefix(t[s]);this.iconClasses=e}else!1===t&&(this.iconClasses={})}applyIconOverridePrefix(t){let e=this.iconOverridePrefix;return e&&0!==t.indexOf(e)&&(t=e+t),t}getClass(t){return this.classes[t]||""}getIconClass(t,e){let s;return s=e&&this.rtlIconClasses&&this.rtlIconClasses[t]||this.iconClasses[t],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(t){let e;return this.iconOverrideCustomButtonOption&&(e=t[this.iconOverrideCustomButtonOption],e)?`${this.baseIconClass} ${this.applyIconOverridePrefix(e)}`:""}}function Mo(r){r();let t=Un.debounceRendering,e=[];for(Un.debounceRendering=function s(l){e.push(l)},Eo(Ot(Su,{}),document.createElement("div"));e.length;)e.shift()();Un.debounceRendering=t}bd.prototype.classes={},bd.prototype.iconClasses={},bd.prototype.baseIconClass="",bd.prototype.iconOverridePrefix="";class Su extends ds{render(){return Ot("div",{})}componentDidMount(){this.setState({})}}function ll(r){let t=function Ac(r,t){var e={__c:t="__cC"+na++,__:r,Consumer:function(s,l){return s.children(l)},Provider:function(s){var l,f;return this.getChildContext||(l=[],(f={})[t]=this,this.getChildContext=function(){return f},this.shouldComponentUpdate=function(C){this.props.value!==C.value&&l.some(function(z){z.__e=!0,ya(z)})},this.sub=function(C){l.push(C);var z=C.componentWillUnmount;C.componentWillUnmount=function(){l.splice(l.indexOf(C),1),z&&z.call(C)}}),s.children}};return e.Provider.__=e.Consumer.contextType=e}(r),e=t.Provider;return t.Provider=function(){let s=!this.getChildContext,l=e.apply(this,arguments);if(s){let f=[];this.shouldComponentUpdate=C=>{this.props.value!==C.value&&f.forEach(z=>{z.context=C.value,z.forceUpdate()})},this.sub=C=>{f.push(C);let z=C.componentWillUnmount;C.componentWillUnmount=()=>{f.splice(f.indexOf(C),1),z&&z.call(C)}}}return l},t}class Qc{constructor(t,e,s,l){this.execFunc=t,this.emitter=e,this.scrollTime=s,this.scrollTimeReset=l,this.handleScrollRequest=f=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},f),this.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const js=ll({});function cl(r,t,e,s,l,f,C,z,W,re,oe,Ne,Ye){return{dateEnv:l,options:e,pluginHooks:C,emitter:re,dispatch:z,getCurrentData:W,calendarApi:oe,viewSpec:r,viewApi:t,dateProfileGenerator:s,theme:f,isRtl:"rtl"===e.direction,addResizeHandler(Ve){re.on("_resize",Ve)},removeResizeHandler(Ve){re.off("_resize",Ve)},createScrollResponder:Ve=>new Qc(Ve,re,Ge(e.scrollTime),e.scrollTimeReset),registerInteractiveComponent:Ne,unregisterInteractiveComponent:Ye}}let xd=(()=>{class r extends ds{shouldComponentUpdate(e,s){return this.debug&&console.log(ih(e,this.props),ih(s,this.state)),!_d(this.props,e,this.propEquality)||!_d(this.state,s,this.stateEquality)}safeSetState(e){_d(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}return r.addPropsEquality=Pf,r.addStateEquality=rh,r.contextType=js,r})();xd.prototype.propEquality={},xd.prototype.stateEquality={};let pr=(()=>{class r extends xd{}return r.contextType=js,r})();function Pf(r){let t=Object.create(this.prototype.propEquality);Object.assign(t,r),this.prototype.propEquality=t}function rh(r){let t=Object.create(this.prototype.stateEquality);Object.assign(t,r),this.prototype.stateEquality=t}function Yo(r,t){"function"==typeof r?r(t):r&&(r.current=t)}class yp extends pr{constructor(){super(...arguments),this.id=w(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=t=>{const{options:e}=this.context,{generatorName:s}=this.props;(!e.customRenderingReplaces||!bp(s,e))&&this.updateElRef(t)},this.updateElRef=t=>{this.props.elRef&&Yo(this.props.elRef,t)}}render(){const{props:t,context:e}=this,{options:s}=e,{customGenerator:l,defaultGenerator:f,renderProps:C}=t,z=xp(t,[],this.handleEl);let re,Ne,W=!1,oe=[];if(null!=l){const Ye="function"==typeof l?l(C,Ot):l;if(!0===Ye)W=!0;else{const Ve=Ye&&"object"==typeof Ye;Ve&&"html"in Ye?z.dangerouslySetInnerHTML={__html:Ye.html}:Ve&&"domNodes"in Ye?oe=Array.prototype.slice.call(Ye.domNodes):(Ve?Ls(Ye):"function"!=typeof Ye)?re=Ye:Ne=Ye}}else W=!bp(t.generatorName,s);return W&&f&&(re=f(C)),this.queuedDomNodes=oe,this.currentGeneratorMeta=Ne,Ot(t.elTag,z,re)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(t){var e;const{props:s,context:l}=this,{handleCustomRendering:f,customRenderingMetaMap:C}=l.options;if(f){const z=null!==(e=this.currentGeneratorMeta)&&void 0!==e?e:C?.[s.generatorName];z&&f(Object.assign(Object.assign({id:this.id,isActive:t,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:z},s),{elClasses:(s.elClasses||[]).filter(Rf)}))}}applyQueueudDomNodes(){const{queuedDomNodes:t,currentDomNodes:e}=this,s=this.base;if(!Bi(t,e)){e.forEach(uc);for(let l of t)s.appendChild(l);this.currentDomNodes=t}}}function bp(r,t){var e;return!!(t.handleCustomRendering&&r&&null!==(e=t.customRenderingMetaMap)&&void 0!==e&&e[r])}function xp(r,t,e){const s=Object.assign(Object.assign({},r.elAttrs),{ref:e});return(r.elClasses||t)&&(s.className=(r.elClasses||[]).concat(t||[]).concat(s.className||[]).filter(Boolean).join(" ")),r.elStyle&&(s.style=r.elStyle),s}function Rf(r){return!!r}yp.addPropsEquality({elClasses:Bi,elStyle:Ta,elAttrs:function Rc(r,t){const e=ih(r,t);for(let s of e)if(!vd.test(s))return!1;return!0},renderProps:Ta});const Tu=ll(0);let ka=(()=>{class r extends ds{constructor(){super(...arguments),this.InnerContent=zf.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Yo(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,s=function Ff(r,t){const e="function"==typeof r?r(t):r||[];return"string"==typeof e?[e]:e}(e.classNameGenerator,e.renderProps);if(e.children){const l=xp(e,s,this.handleEl),f=e.children(this.InnerContent,e.renderProps,l);return e.elTag?Ot(e.elTag,l,f):f}return Ot(yp,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(s),renderId:this.context}))}componentDidMount(){var e,s;this.el?null===(s=(e=this.props).didMount)||void 0===s||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,s;null===(s=(e=this.props).willUnmount)||void 0===s||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return r.contextType=Tu,r})();function zf(r,t){const e=r.props;return Ot(yp,Object.assign({renderProps:e.renderProps,generatorName:e.generatorName,customGenerator:e.customGenerator,defaultGenerator:e.defaultGenerator,renderId:r.context},t))}class wd extends pr{render(){let{props:t,context:e}=this,{options:s}=e,l={view:e.viewApi};return Ot(ka,Object.assign({},t,{elTag:t.elTag||"div",elClasses:[...Bf(t.viewSpec),...t.elClasses||[]],renderProps:l,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount}),()=>t.children)}}function Bf(r){return[`fc-${r.type}-view`,"fc-view"]}function wp(r,t){let l,f,e=[],{start:s}=t;for(r.sort(Nf),l=0;l<r.length;l+=1)f=r[l],f.start>s&&e.push({start:s,end:f.start}),f.end>s&&(s=f.end);return s<t.end&&e.push({start:s,end:t.end}),e}function Nf(r,t){return r.start.valueOf()-t.start.valueOf()}function jl(r,t){let{start:e,end:s}=r,l=null;return null!==t.start&&(e=null===e?t.start:new Date(Math.max(e.valueOf(),t.start.valueOf()))),null!=t.end&&(s=null===s?t.end:new Date(Math.min(s.valueOf(),t.end.valueOf()))),(null===e||null===s||e<s)&&(l={start:e,end:s}),l}function sh(r,t){return(null===r.end||null===t.start||r.end>t.start)&&(null===r.start||null===t.end||r.start<t.end)}function qu(r,t){return(null===r.start||null!==t.start&&t.start>=r.start)&&(null===r.end||null!==t.end&&t.end<=r.end)}function Zs(r,t){return(null===r.start||t>=r.start)&&(null===r.end||t<r.end)}function Sp(r){let t=Math.floor(rr(r.start,r.end))||1,e=Hr(r.start);return{start:e,end:Hn(e,t)}}function Ul(r,t=Ge(0)){let e=null,s=null;if(r.end){s=Hr(r.end);let l=r.end.valueOf()-s.valueOf();l&&l>=Wi(t)&&(s=Hn(s,1))}return r.start&&(e=Hr(r.start),s&&s<=e&&(s=Hn(e,1))),{start:e,end:s}}function Wl(r,t,e,s){return"year"===s?Ge(e.diffWholeYears(r,t),"year"):"month"===s?Ge(e.diffWholeMonths(r,t),"month"):function vs(r,t){let e=Hr(r),s=Hr(t);return{years:0,months:0,days:Math.round(rr(e,s)),milliseconds:t.valueOf()-s.valueOf()-(r.valueOf()-e.valueOf())}}(r,t)}function Aa(r,t){return"function"==typeof r&&(r=r()),null==r?t.createNowMarker():t.createMarker(r)}class Yf{constructor(t){this.props=t,this.nowDate=Aa(t.nowInput,t.dateEnv),this.initHiddenDays()}buildPrev(t,e,s){let{dateEnv:l}=this.props,f=l.subtract(l.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(f,-1,s)}buildNext(t,e,s){let{dateEnv:l}=this.props,f=l.add(l.startOf(e,t.currentRangeUnit),t.dateIncrement);return this.build(f,1,s)}build(t,e,s=!0){let f,C,z,W,re,oe,{props:l}=this;return f=this.buildValidRange(),f=this.trimHiddenDays(f),s&&(t=function Ep(r,t){return null!=t.start&&r<t.start?t.start:null!=t.end&&r>=t.end?new Date(t.end.valueOf()-1):r}(t,f)),C=this.buildCurrentRangeInfo(t,e),z=/^(year|month|week|day)$/.test(C.unit),W=this.buildRenderRange(this.trimHiddenDays(C.range),C.unit,z),W=this.trimHiddenDays(W),re=W,l.showNonCurrentDates||(re=jl(re,C.range)),re=this.adjustActiveRange(re),re=jl(re,f),oe=sh(C.range,f),Zs(W,t)||(t=W.start),{currentDate:t,validRange:f,currentRange:C.range,currentRangeUnit:C.unit,isRangeAllDay:z,activeRange:re,renderRange:W,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,isValid:oe,dateIncrement:this.buildDateIncrement(C.duration)}}buildValidRange(){let t=this.props.validRangeInput,e="function"==typeof t?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(e)||{start:null,end:null}}buildCurrentRangeInfo(t,e){let z,{props:s}=this,l=null,f=null,C=null;return s.duration?(l=s.duration,f=s.durationUnit,C=this.buildRangeFromDuration(t,e,l,f)):(z=this.props.dayCount)?(f="day",C=this.buildRangeFromDayCount(t,e,z)):(C=this.buildCustomVisibleRange(t))?f=s.dateEnv.greatestWholeUnit(C.start,C.end).unit:(l=this.getFallbackDuration(),f=Ii(l).unit,C=this.buildRangeFromDuration(t,e,l,f)),{duration:l,unit:f,range:C}}getFallbackDuration(){return Ge({day:1})}adjustActiveRange(t){let{dateEnv:e,usesMinMaxTime:s,slotMinTime:l,slotMaxTime:f}=this.props,{start:C,end:z}=t;return s&&(ci(l)<0&&(C=Hr(C),C=e.add(C,l)),ci(f)>1&&(z=Hr(z),z=Hn(z,-1),z=e.add(z,f))),{start:C,end:z}}buildRangeFromDuration(t,e,s,l){let z,W,re,{dateEnv:f,dateAlignment:C}=this.props;if(!C){let{dateIncrement:Ne}=this.props;C=Ne&&Wi(Ne)<Wi(s)?Ii(Ne).unit:l}function oe(){z=f.startOf(t,C),W=f.add(z,s),re={start:z,end:W}}return ci(s)<=1&&this.isHiddenDay(z)&&(z=this.skipHiddenDays(z,e),z=Hr(z)),oe(),this.trimHiddenDays(re)||(t=this.skipHiddenDays(t,e),oe()),re}buildRangeFromDayCount(t,e,s){let W,{dateEnv:l,dateAlignment:f}=this.props,C=0,z=t;f&&(z=l.startOf(z,f)),z=Hr(z),z=this.skipHiddenDays(z,e),W=z;do{W=Hn(W,1),this.isHiddenDay(W)||(C+=1)}while(C<s);return{start:z,end:W}}buildCustomVisibleRange(t){let{props:e}=this,s=e.visibleRangeInput,l="function"==typeof s?s.call(e.calendarApi,e.dateEnv.toDate(t)):s,f=this.refineRange(l);return!f||null!=f.start&&null!=f.end?f:null}buildRenderRange(t,e,s){return t}buildDateIncrement(t){let s,{dateIncrement:e}=this.props;return e||((s=this.props.dateAlignment)?Ge(1,s):t||Ge({days:1}))}refineRange(t){if(t){let e=function ag(r,t){let e=null,s=null;return r.start&&(e=t.createMarker(r.start)),r.end&&(s=t.createMarker(r.end)),!e&&!s||e&&s&&s<e?null:{start:e,end:s}}(t,this.props.dateEnv);return e&&(e=Ul(e)),e}return null}initHiddenDays(){let l,t=this.props.hiddenDays||[],e=[],s=0;for(!1===this.props.weekends&&t.push(0,6),l=0;l<7;l+=1)(e[l]=-1!==t.indexOf(l))||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=e}trimHiddenDays(t){let{start:e,end:s}=t;return e&&(e=this.skipHiddenDays(e)),s&&(s=this.skipHiddenDays(s,-1,!0)),null==e||null==s||e<s?{start:e,end:s}:null}isHiddenDay(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]}skipHiddenDays(t,e=1,s=!1){for(;this.isHiddenDayHash[(t.getUTCDay()+(s?e:0)+7)%7];)t=Hn(t,e);return t}}function Cd(r,t,e,s){return{instanceId:w(),defId:r,range:t,forcedStartTzo:e??null,forcedEndTzo:s??null}}function Ku(r,t,e){let{dateEnv:s,pluginHooks:l,options:f}=e,{defs:C,instances:z}=r;z=qc(z,W=>!C[W.defId].recurringDef);for(let W in C){let re=C[W];if(re.recurringDef){let{duration:oe}=re.recurringDef;oe||(oe=re.allDay?f.defaultAllDayEventDuration:f.defaultTimedEventDuration);let Ne=Tp(re,oe,t,s,l.recurringTypes);for(let Ye of Ne){let Ve=Cd(W,{start:Ye,end:s.add(Ye,oe)});z[Ve.instanceId]=Ve}}}return{defs:C,instances:z}}function Tp(r,t,e,s,l){let C=l[r.recurringDef.typeId].expand(r.recurringDef.typeData,{start:s.subtract(e.start,t),end:e.end},s);return r.allDay&&(C=C.map(Hr)),C}const Tl={id:String,groupId:String,title:String,url:String,interactive:Boolean},ku={start:ki,end:ki,date:ki,allDay:Boolean},Vf=Object.assign(Object.assign(Object.assign({},Tl),ku),{extendedProps:ki});function kp(r,t,e,s,l=Ed(e),f,C){let{refined:z,extra:W}=Gf(r,e,l),re=function Td(r,t){let e=null;return r&&(e=r.defaultAllDay),null==e&&(e=t.options.defaultAllDay),e}(t,e),oe=function Hf(r,t,e,s){for(let l=0;l<s.length;l+=1){let f=s[l].parse(r,e);if(f){let{allDay:C}=r;return null==C&&(C=t,null==C&&(C=f.allDayGuess,null==C&&(C=!1))),{allDay:C,duration:f.duration,typeData:f.typeData,typeId:l}}}return null}(z,re,e.dateEnv,e.pluginHooks.recurringTypes);if(oe){let Ye=ah(z,W,t?t.sourceId:"",oe.allDay,!!oe.duration,e,f);return Ye.recurringDef={typeId:oe.typeId,typeData:oe.typeData,duration:oe.duration},{def:Ye,instance:null}}let Ne=function Sd(r,t,e,s){let f,W,{allDay:l}=r,C=null,z=!1,re=null;if(f=e.dateEnv.createMarkerMeta(null!=r.start?r.start:r.date),f)C=f.marker;else if(!s)return null;return null!=r.end&&(W=e.dateEnv.createMarkerMeta(r.end)),null==l&&(l=null!=t?t:(!f||f.isTimeUnspecified)&&(!W||W.isTimeUnspecified)),l&&C&&(C=Hr(C)),W&&(re=W.marker,l&&(re=Hr(re)),C&&re<=C&&(re=null)),re?z=!0:s||(z=e.options.forceEventDuration||!1,re=e.dateEnv.add(C,l?e.options.defaultAllDayEventDuration:e.options.defaultTimedEventDuration)),{allDay:l,hasEnd:z,range:{start:C,end:re},forcedStartTzo:f?f.forcedTzo:null,forcedEndTzo:W?W.forcedTzo:null}}(z,re,e,s);if(Ne){let Ye=ah(z,W,t?t.sourceId:"",Ne.allDay,Ne.hasEnd,e,f),Ve=Cd(Ye.defId,Ne.range,Ne.forcedStartTzo,Ne.forcedEndTzo);return C&&Ye.publicId&&C[Ye.publicId]&&(Ve.instanceId=C[Ye.publicId]),{def:Ye,instance:Ve}}return null}function Gf(r,t,e=Ed(t)){return An(r,e)}function Ed(r){return Object.assign(Object.assign(Object.assign({},Bh),Vf),r.pluginHooks.eventRefiners)}function ah(r,t,e,s,l,f,C){let z={title:r.title||"",groupId:r.groupId||"",publicId:r.id||"",url:r.url||"",recurringDef:null,defId:(C&&r.id?C[r.id]:"")||w(),sourceId:e,allDay:s,hasEnd:l,interactive:r.interactive,ui:Au(r,f),extendedProps:Object.assign(Object.assign({},r.extendedProps||{}),t)};for(let W of f.pluginHooks.eventDefMemberAdders)Object.assign(z,W(r));return Object.freeze(z.ui.classNames),Object.freeze(z.extendedProps),z}function eu(r,t,e,s,l,f){let C={defs:{},instances:{}},z=Ed(e);for(let W of r){let re=kp(W,t,e,s,z,l,f);re&&kd(re,C)}return C}function kd(r,t={defs:{},instances:{}}){return t.defs[r.def.defId]=r.def,r.instance&&(t.instances[r.instance.instanceId]=r.instance),t}function zh(r,t){let e=r.instances[t];if(e){let s=r.defs[e.defId],l=tu(r,f=>function lh(r,t){return!(!r.groupId||r.groupId!==t.groupId)}(s,f));return l.defs[s.defId]=s,l.instances[e.instanceId]=e,l}return{defs:{},instances:{}}}function Fh(r,t){return{defs:Object.assign(Object.assign({},r.defs),t.defs),instances:Object.assign(Object.assign({},r.instances),t.instances)}}function tu(r,t){let e=qc(r.defs,t),s=qc(r.instances,l=>e[l.defId]);return{defs:e,instances:s}}function Mp(r){return Array.isArray(r)?r:"string"==typeof r?r.split(/\s+/):[]}const Bh={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ki,overlap:ki,allow:ki,className:Mp,classNames:Mp,color:String,backgroundColor:String,borderColor:String,textColor:String},cg={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Au(r,t){let e=function Ap(r,t){return Array.isArray(r)?eu(r,null,t,!0):"object"==typeof r&&r?eu([r],null,t,!0):null!=r?String(r):null}(r.constraint,t);return{display:r.display||null,startEditable:null!=r.startEditable?r.startEditable:r.editable,durationEditable:null!=r.durationEditable?r.durationEditable:r.editable,constraints:null!=e?[e]:[],overlap:null!=r.overlap?r.overlap:null,allows:null!=r.allow?[r.allow]:[],backgroundColor:r.backgroundColor||r.color||"",borderColor:r.borderColor||r.color||"",textColor:r.textColor||"",classNames:(r.className||[]).concat(r.classNames||[])}}function Dp(r){return r.reduce(Mu,cg)}function Mu(r,t){return{display:null!=t.display?t.display:r.display,startEditable:null!=t.startEditable?t.startEditable:r.startEditable,durationEditable:null!=t.durationEditable?t.durationEditable:r.durationEditable,constraints:r.constraints.concat(t.constraints),overlap:"boolean"==typeof t.overlap?t.overlap:r.overlap,allows:r.allows.concat(t.allows),backgroundColor:t.backgroundColor||r.backgroundColor,borderColor:t.borderColor||r.borderColor,textColor:t.textColor||r.textColor,classNames:r.classNames.concat(t.classNames)}}const fs={id:String,defaultAllDay:Boolean,url:String,format:String,events:ki,eventDataTransform:ki,success:ki,failure:ki};function Nh(r,t,e=gc(t)){let s;if("string"==typeof r?s={url:r}:"function"==typeof r||Array.isArray(r)?s={events:r}:"object"==typeof r&&r&&(s=r),s){let{refined:l,extra:f}=An(s,e),C=function zc(r,t){let e=t.pluginHooks.eventSourceDefs;for(let s=e.length-1;s>=0;s-=1){let f=e[s].parseMeta(r);if(f)return{sourceDefId:s,meta:f}}return null}(l,t);if(C)return{_raw:r,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:l.defaultAllDay,eventDataTransform:l.eventDataTransform,success:l.success,failure:l.failure,publicId:l.id||"",sourceId:w(),sourceDefId:C.sourceDefId,meta:C.meta,ui:Au(l,t),extendedProps:f}}return null}function gc(r){return Object.assign(Object.assign(Object.assign({},Bh),fs),r.pluginHooks.eventSourceRefiners)}function Ip(r,t,e){let s=e.options.eventDataTransform,l=t?t.eventDataTransform:null;return l&&(r=Ho(r,l)),s&&(r=Ho(r,s)),r}function Ho(r,t){let e;if(t){e=[];for(let s of r){let l=t(s);l?e.push(l):null==l&&e.push(s)}}else e=r;return e}function Ju(r,t,e){let{defs:s}=r,l=mc(r.instances,f=>s[f.defId].allDay?f:Object.assign(Object.assign({},f),{range:{start:e.createMarker(t.toDate(f.range.start,f.forcedStartTzo)),end:e.createMarker(t.toDate(f.range.end,f.forcedEndTzo))},forcedStartTzo:e.canComputeOffset?null:f.forcedStartTzo,forcedEndTzo:e.canComputeOffset?null:f.forcedEndTzo}));return{defs:s,instances:l}}function Yh(r,t){return tu(r,e=>e.sourceId!==t)}class Hh{constructor(){this.handlers={},this.thisContext=null}setThisContext(t){this.thisContext=t}setOptions(t){this.options=t}on(t,e){!function Op(r,t,e){(r[t]||(r[t]=[])).push(e)}(this.handlers,t,e)}off(t,e){!function $f(r,t,e){e?r[t]&&(r[t]=r[t].filter(s=>s!==e)):delete r[t]}(this.handlers,t,e)}trigger(t,...e){let f=[].concat(this.options&&this.options[t]||[],this.handlers[t]||[]);for(let C of f)C.apply(this.thisContext,e)}hasHandlers(t){return!!(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])}}const ug={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Ad(r,t,e){e.emitter.trigger("select",Object.assign(Object.assign({},Md(r,e)),{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view}))}function Md(r,t){let e={};for(let s of t.pluginHooks.dateSpanTransforms)Object.assign(e,s(r,t));return Object.assign(e,function hg(r,t){return Object.assign(Object.assign({},Qf(r.range,t,r.allDay)),{allDay:r.allDay})}(r,t.dateEnv)),e}function lo(r,t,e){let{dateEnv:s,options:l}=e,f=t;return r?(f=Hr(f),f=s.add(f,l.defaultAllDayEventDuration)):f=s.add(f,l.defaultTimedEventDuration),f}function Dd(r,t,e,s){let l=_c(r.defs,t),f={defs:{},instances:{}};for(let C in r.defs)f.defs[C]=Id(r.defs[C],l[C],e,s);for(let C in r.instances){let z=r.instances[C];f.instances[C]=dg(z,f.defs[z.defId],l[z.defId],e,s)}return f}function Id(r,t,e,s){let l=e.standardProps||{};null==l.hasEnd&&t.durationEditable&&(e.startDelta||e.endDelta)&&(l.hasEnd=!0);let f=Object.assign(Object.assign(Object.assign({},r),l),{ui:Object.assign(Object.assign({},r.ui),l.ui)});e.extendedProps&&(f.extendedProps=Object.assign(Object.assign({},f.extendedProps),e.extendedProps));for(let C of s.pluginHooks.eventDefMutationAppliers)C(f,e,s);return!f.hasEnd&&s.options.forceEventDuration&&(f.hasEnd=!0),f}function dg(r,t,e,s,l){let{dateEnv:f}=l,C=s.standardProps&&!0===s.standardProps.allDay,z=s.standardProps&&!1===s.standardProps.hasEnd,W=Object.assign({},r);return C&&(W.range=Sp(W.range)),s.datesDelta&&e.startEditable&&(W.range={start:f.add(W.range.start,s.datesDelta),end:f.add(W.range.end,s.datesDelta)}),s.startDelta&&e.durationEditable&&(W.range={start:f.add(W.range.start,s.startDelta),end:W.range.end}),s.endDelta&&e.durationEditable&&(W.range={start:W.range.start,end:f.add(W.range.end,s.endDelta)}),z&&(W.range={start:W.range.start,end:lo(t.allDay,W.range.start,l)}),t.allDay&&(W.range={start:Hr(W.range.start),end:Hr(W.range.end)}),W.range.end<W.range.start&&(W.range.end=lo(t.allDay,W.range.start,l)),W}class Iu{constructor(t,e){this.context=t,this.internalEventSource=e}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class io{constructor(t,e,s){this._context=t,this._def=e,this._instance=s||null}setProp(t,e){if(t in ku)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===t)e=Tl[t](e),this.mutate({standardProps:{publicId:e}});else if(t in Tl)e=Tl[t](e),this.mutate({standardProps:{[t]:e}});else if(t in Bh){let s=Bh[t](e);s="color"===t?{backgroundColor:e,borderColor:e}:"editable"===t?{startEditable:e,durationEditable:e}:{[t]:e},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${t}'. Use setExtendedProp instead.`)}setExtendedProp(t,e){this.mutate({extendedProps:{[t]:e}})}setStart(t,e={}){let{dateEnv:s}=this._context,l=s.createMarker(t);if(l&&this._instance){let C=Wl(this._instance.range.start,l,s,e.granularity);this.mutate(e.maintainDuration?{datesDelta:C}:{startDelta:C})}}setEnd(t,e={}){let l,{dateEnv:s}=this._context;if((null==t||(l=s.createMarker(t),l))&&this._instance)if(l){let f=Wl(this._instance.range.end,l,s,e.granularity);this.mutate({endDelta:f})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(t,e,s={}){let z,{dateEnv:l}=this._context,f={allDay:s.allDay},C=l.createMarker(t);if(C&&(null==e||(z=l.createMarker(e),z))&&this._instance){let W=this._instance.range;!0===s.allDay&&(W=Sp(W));let re=Wl(W.start,C,l,s.granularity);if(z){let oe=Wl(W.end,z,l,s.granularity);!function jt(r,t){return r.years===t.years&&r.months===t.months&&r.days===t.days&&r.milliseconds===t.milliseconds}(re,oe)?this.mutate({startDelta:re,endDelta:oe,standardProps:f}):this.mutate({datesDelta:re,standardProps:f})}else f.hasEnd=!1,this.mutate({datesDelta:re,standardProps:f})}}moveStart(t){let e=Ge(t);e&&this.mutate({startDelta:e})}moveEnd(t){let e=Ge(t);e&&this.mutate({endDelta:e})}moveDates(t){let e=Ge(t);e&&this.mutate({datesDelta:e})}setAllDay(t,e={}){let s={allDay:t},{maintainDuration:l}=e;null==l&&(l=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(s.hasEnd=l),this.mutate({standardProps:s})}formatRange(t){let{dateEnv:e}=this._context,s=this._instance,l=Gs(t);return this._def.hasEnd?e.formatRange(s.range.start,s.range.end,l,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):e.format(s.range.start,l,{forcedTzo:s.forcedStartTzo})}mutate(t){let e=this._instance;if(e){let s=this._def,l=this._context,{eventStore:f}=l.getCurrentData(),C=zh(f,e.instanceId);C=Dd(C,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,l);let W=new io(l,s,e);this._def=C.defs[s.defId],this._instance=C.instances[e.instanceId],l.dispatch({type:"MERGE_EVENTS",eventStore:C}),l.emitter.trigger("eventChange",{oldEvent:W,event:this,relatedEvents:iu(C,l,e),revert(){l.dispatch({type:"RESET_EVENTS",eventStore:f})}})}}remove(){let t=this._context,e=Vh(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:e}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){t.dispatch({type:"MERGE_EVENTS",eventStore:e})}})}get source(){let{sourceId:t}=this._def;return t?new Iu(this._context,this._context.getCurrentData().eventSources[t]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""}get endStr(){let t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(t={}){let e=this._def,{ui:s}=e,{startStr:l,endStr:f}=this,C={allDay:e.allDay};return e.title&&(C.title=e.title),l&&(C.start=l),f&&(C.end=f),e.publicId&&(C.id=e.publicId),e.groupId&&(C.groupId=e.groupId),e.url&&(C.url=e.url),s.display&&"auto"!==s.display&&(C.display=s.display),t.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?C.color=s.backgroundColor:(s.backgroundColor&&(C.backgroundColor=s.backgroundColor),s.borderColor&&(C.borderColor=s.borderColor)),s.textColor&&(C.textColor=s.textColor),s.classNames.length&&(C.classNames=s.classNames),Object.keys(e.extendedProps).length&&(t.collapseExtendedProps?Object.assign(C,e.extendedProps):C.extendedProps=e.extendedProps),C}toJSON(){return this.toPlainObject()}}function Vh(r){let t=r._def,e=r._instance;return{defs:{[t.defId]:t},instances:e?{[e.instanceId]:e}:{}}}function iu(r,t,e){let{defs:s,instances:l}=r,f=[],C=e?e.instanceId:"";for(let z in l){let W=l[z];W.instanceId!==C&&f.push(new io(t,s[W.defId],W))}return f}function Gh(r,t,e,s){let l={},f={},C={},z=[],W=[],re=_c(r.defs,t);for(let oe in r.defs){let Ne=r.defs[oe];"inverse-background"===re[Ne.defId].display&&(Ne.groupId?(l[Ne.groupId]=[],C[Ne.groupId]||(C[Ne.groupId]=Ne)):f[oe]=[])}for(let oe in r.instances){let Ne=r.instances[oe],Ye=r.defs[Ne.defId],Ve=re[Ye.defId],$t=Ne.range,Ut=!Ye.allDay&&s?Ul($t,s):$t,li=jl(Ut,e);li&&("inverse-background"===Ve.display?Ye.groupId?l[Ye.groupId].push(li):f[Ne.defId].push(li):"none"!==Ve.display&&("background"===Ve.display?z:W).push({def:Ye,ui:Ve,instance:Ne,range:li,isStart:Ut.start&&Ut.start.valueOf()===li.start.valueOf(),isEnd:Ut.end&&Ut.end.valueOf()===li.end.valueOf()}))}for(let oe in l){let Ye=wp(l[oe],e);for(let Ve of Ye){let $t=C[oe];z.push({def:$t,ui:re[$t.defId],instance:null,range:Ve,isStart:!1,isEnd:!1})}}for(let oe in f){let Ye=wp(f[oe],e);for(let Ve of Ye)z.push({def:r.defs[oe],ui:re[oe],instance:null,range:Ve,isStart:!1,isEnd:!1})}return{bg:z,fg:W}}function uh(r,t){r.fcSeg=t}function Fc(r){return r.fcSeg||r.parentNode.fcSeg||null}function _c(r,t){return mc(r,e=>ed(e,t))}function ed(r,t){let e=[];return t[""]&&e.push(t[""]),t[r.defId]&&e.push(t[r.defId]),e.push(r.ui),Dp(e)}function dh(r,t){let e=r.map(Xf);return e.sort((s,l)=>function te(r,t,e){let s,l;for(s=0;s<e.length;s+=1)if(l=he(r,t,e[s]),l)return l;return 0}(s,l,t)),e.map(s=>s._seg)}function Xf(r){let{eventRange:t}=r,e=t.def,s=t.instance?t.instance.range:t.range,l=s.start?s.start.valueOf():0,f=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},e.extendedProps),e),{id:e.publicId,start:l,end:f,duration:f-l,allDay:Number(e.allDay),_seg:r})}function Zf(r,t){let{pluginHooks:e}=t,s=e.isDraggableTransformers,{def:l,ui:f}=r.eventRange,C=f.startEditable;for(let z of s)C=z(C,l,f,t);return C}function qf(r,t){return r.isStart&&r.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function Ld(r,t,e,s,l,f,C){let{dateEnv:z,options:W}=e,{displayEventTime:re,displayEventEnd:oe}=W,Ne=r.eventRange.def,Ye=r.eventRange.instance;null==re&&(re=!1!==s),null==oe&&(oe=!1!==l);let Ve=Ye.range.start,$t=Ye.range.end,Ut=f||r.start||r.eventRange.range.start,li=C||r.end||r.eventRange.range.end,Di=Hr(Ve).valueOf()===Hr(Ut).valueOf(),Sn=Hr(En($t,-1)).valueOf()===Hr(En(li,-1)).valueOf();return re&&!Ne.allDay&&(Di||Sn)?(Ut=Di?Ve:Ut,li=Sn?$t:li,oe&&Ne.hasEnd?z.formatRange(Ut,li,t,{forcedStartTzo:f?null:Ye.forcedStartTzo,forcedEndTzo:C?null:Ye.forcedEndTzo}):z.format(Ut,t,{forcedTzo:f?null:Ye.forcedStartTzo})):""}function yc(r,t,e){let s=r.eventRange.range;return{isPast:s.end<=(e||t.start),isFuture:s.start>=(e||t.end),isToday:t&&Zs(t,s.start)}}function Rp(r){let t=["fc-event"];return r.isMirror&&t.push("fc-event-mirror"),r.isDraggable&&t.push("fc-event-draggable"),(r.isStartResizable||r.isEndResizable)&&t.push("fc-event-resizable"),r.isDragging&&t.push("fc-event-dragging"),r.isResizing&&t.push("fc-event-resizing"),r.isSelected&&t.push("fc-event-selected"),r.isStart&&t.push("fc-event-start"),r.isEnd&&t.push("fc-event-end"),r.isPast&&t.push("fc-event-past"),r.isToday&&t.push("fc-event-today"),r.isFuture&&t.push("fc-event-future"),t}function jh(r){return r.instance?r.instance.instanceId:`${r.def.defId}:${r.range.start.toISOString()}`}function Uh(r,t){let{def:e,instance:s}=r.eventRange,{url:l}=e;if(l)return{href:l};let{emitter:f,options:C}=t,{eventInteractive:z}=C;return null==z&&(z=e.interactive,null==z&&(z=!!f.hasHandlers("eventClick"))),z?Jd(W=>{f.trigger("eventClick",{el:W.target,event:new io(t,e,s),jsEvent:W,view:t.viewApi})}):{}}const Kf={start:ki,end:ki,allDay:Boolean};function Wh(r,t,e){return Object.assign(Object.assign({},Qf(r,t,e)),{timeZone:t.timeZone})}function Qf(r,t,e){return{start:t.toDate(r.start),end:t.toDate(r.end),startStr:t.formatIso(r.start,{omitTime:e}),endStr:t.formatIso(r.end,{omitTime:e})}}class Od extends Error{constructor(t,e){super(t),this.response=e}}let td;function ru(){return null==td&&(td=function hh(){if(typeof document>"u")return!0;let r=document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.innerHTML="<table><tr><td><div></div></td></tr></table>",r.querySelector("table").style.height="100px",r.querySelector("div").style.height="100%",document.body.appendChild(r);let e=r.querySelector("div").offsetHeight>0;return document.body.removeChild(r),e}()),td}class tm extends pr{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Mo(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Mo(()=>{this.setState({forPrint:!1})})}}render(){let{props:t}=this,{options:e}=t,{forPrint:s}=this.state,l=s||"auto"===e.height||"auto"===e.contentHeight,f=l||null==e.height?"":e.height,C=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${e.direction}`,t.theme.getClass("root")];return ru()||C.push("fc-liquid-hack"),t.children(C,f,l,s)}componentDidMount(){let{emitter:t}=this.props;t.on("_beforeprint",this.handleBeforePrint),t.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:t}=this.props;t.off("_beforeprint",this.handleBeforePrint),t.off("_afterprint",this.handleAfterPrint)}}class Rd{constructor(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}destroy(){}}function Fp(r){return{[r.component.uid]:r}}const ph={};class im{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(t){this.currentDataManager.dispatch(t)}get view(){return this.getCurrentData().viewApi}batchRendering(t){t()}updateSize(){this.trigger("_resize",!0)}setOption(t,e){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:e})}getOption(t){return this.currentDataManager.currentCalendarOptionsInput[t]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(t,e){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[t]?s.emitter.on(t,e):console.warn(`Unknown listener name '${t}'`)}off(t,e){this.currentDataManager.emitter.off(t,e)}trigger(t,...e){this.currentDataManager.emitter.trigger(t,...e)}changeView(t,e){this.batchRendering(()=>{if(this.unselect(),e)if(e.start&&e.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:s.createMarker(e)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})}zoomTo(t,e){let l;l=this.getCurrentData().viewSpecs[e=e||"day"]||this.getUnitViewSpec(e),this.unselect(),this.dispatch(l?{type:"CHANGE_VIEW_TYPE",viewType:l.type,dateMarker:t}:{type:"CHANGE_DATE",dateMarker:t})}getUnitViewSpec(t){let f,C,{viewSpecs:e,toolbarConfig:s}=this.getCurrentData(),l=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]);for(let z in e)l.push(z);for(f=0;f<l.length;f+=1)if(C=e[l[f]],C&&C.singleUnit===t)return C;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})}nextYear(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})}today(){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Aa(t.calendarOptions.now,t.dateEnv)})}gotoDate(t){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(t)})}incrementDate(t){let e=this.getCurrentData(),s=Ge(t);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,s)}))}getDate(){let t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)}formatDate(t,e){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(t),Gs(e))}formatRange(t,e,s){let{dateEnv:l}=this.getCurrentData();return l.formatRange(l.createMarker(t),l.createMarker(e),Gs(s),s)}formatIso(t,e){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(t),{omitTime:e})}select(t,e){let s;s=null==e?null!=t.start?t:{start:t,end:null}:{start:t,end:e};let l=this.getCurrentData(),f=function Jf(r,t,e){let s=function zp(r,t){let{refined:e,extra:s}=An(r,Kf),l=e.start?t.createMarkerMeta(e.start):null,f=e.end?t.createMarkerMeta(e.end):null,{allDay:C}=e;return null==C&&(C=l&&l.isTimeUnspecified&&(!f||f.isTimeUnspecified)),Object.assign({range:{start:l?l.marker:null,end:f?f.marker:null},allDay:C},s)}(r,t),{range:l}=s;if(!l.start)return null;if(!l.end){if(null==e)return null;l.end=t.add(l.start,e)}return s}(s,l.dateEnv,Ge({days:1}));f&&(this.dispatch({type:"SELECT_DATES",selection:f}),Ad(f,null,l))}unselect(t){let e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function ch(r,t){t.emitter.trigger("unselect",{jsEvent:r?r.origEvent:null,view:t.viewApi||t.calendarApi.view})}(t,e))}addEvent(t,e){if(t instanceof io){let C=t._def,z=t._instance;return this.getCurrentData().eventStore.defs[C.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:kd({def:C,instance:z})}),this.triggerEventAdd(t)),t}let l,s=this.getCurrentData();if(e instanceof Iu)l=e.internalEventSource;else if("boolean"==typeof e)e&&([l]=th(s.eventSources));else if(null!=e){let C=this.getEventSourceById(e);if(!C)return console.warn(`Could not find an event source with ID "${e}"`),null;l=C.internalEventSource}let f=kp(t,l,s,!1);if(f){let C=new io(s,f.def,f.def.recurringDef?null:f.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:kd(f)}),this.triggerEventAdd(C),C}return null}triggerEventAdd(t){let{emitter:e}=this.getCurrentData();e.trigger("eventAdd",{event:t,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Vh(t)})}})}getEventById(t){let e=this.getCurrentData(),{defs:s,instances:l}=e.eventStore;t=String(t);for(let f in s){let C=s[f];if(C.publicId===t){if(C.recurringDef)return new io(e,C,null);for(let z in l){let W=l[z];if(W.defId===C.defId)return new io(e,C,W)}}}return null}getEvents(){let t=this.getCurrentData();return iu(t.eventStore,t)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let t=this.getCurrentData(),e=t.eventSources,s=[];for(let l in e)s.push(new Iu(t,e[l]));return s}getEventSourceById(t){let e=this.getCurrentData(),s=e.eventSources;t=String(t);for(let l in s)if(s[l].publicId===t)return new Iu(e,s[l]);return null}addEventSource(t){let e=this.getCurrentData();if(t instanceof Iu)return e.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;let s=Nh(t,e);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Iu(e,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(t){let e=Ge(t);e&&this.trigger("_scrollRequest",{time:e})}}function mg(r,t){return r.left>=t.left&&r.left<t.right&&r.top>=t.top&&r.top<t.bottom}function $h(r,t){let e={left:Math.max(r.left,t.left),right:Math.min(r.right,t.right),top:Math.max(r.top,t.top),bottom:Math.min(r.bottom,t.bottom)};return e.left<e.right&&e.top<e.bottom&&e}const Lu={defs:{},instances:{}};class Bp{constructor(){this.getKeysForEventDefs=tr(this._getKeysForEventDefs),this.splitDateSelection=tr(this._splitDateSpan),this.splitEventStore=tr(this._splitEventStore),this.splitIndividualUi=tr(this._splitIndividualUi),this.splitEventDrag=tr(this._splitInteraction),this.splitEventResize=tr(this._splitInteraction),this.eventUiBuilders={}}splitProps(t){let e=this.getKeyInfo(t),s=this.getKeysForEventDefs(t.eventStore),l=this.splitDateSelection(t.dateSelection),f=this.splitIndividualUi(t.eventUiBases,s),C=this.splitEventStore(t.eventStore,s),z=this.splitEventDrag(t.eventDrag),W=this.splitEventResize(t.eventResize),re={};this.eventUiBuilders=mc(e,(oe,Ne)=>this.eventUiBuilders[Ne]||tr(Ou));for(let oe in e){let Ne=e[oe],Ye=C[oe]||Lu;re[oe]={businessHours:Ne.businessHours||t.businessHours,dateSelection:l[oe]||null,eventStore:Ye,eventUiBases:(0,this.eventUiBuilders[oe])(t.eventUiBases[""],Ne.ui,f[oe]),eventSelection:Ye.instances[t.eventSelection]?t.eventSelection:"",eventDrag:z[oe]||null,eventResize:W[oe]||null}}return re}_splitDateSpan(t){let e={};if(t){let s=this.getKeysForDateSpan(t);for(let l of s)e[l]=t}return e}_getKeysForEventDefs(t){return mc(t.defs,e=>this.getKeysForEventDef(e))}_splitEventStore(t,e){let{defs:s,instances:l}=t,f={};for(let C in s)for(let z of e[C])f[z]||(f[z]={defs:{},instances:{}}),f[z].defs[C]=s[C];for(let C in l){let z=l[C];for(let W of e[z.defId])f[W]&&(f[W].instances[C]=z)}return f}_splitIndividualUi(t,e){let s={};for(let l in t)if(l)for(let f of e[l])s[f]||(s[f]={}),s[f][l]=t[l];return s}_splitInteraction(t){let e={};if(t){let s=this._splitEventStore(t.affectedEvents,this._getKeysForEventDefs(t.affectedEvents)),l=this._getKeysForEventDefs(t.mutatedEvents),f=this._splitEventStore(t.mutatedEvents,l),C=z=>{e[z]||(e[z]={affectedEvents:s[z]||Lu,mutatedEvents:f[z]||Lu,isEvent:t.isEvent})};for(let z in s)C(z);for(let z in f)C(z)}return e}}function Ou(r,t,e){let s=[];r&&s.push(r),t&&s.push(t);let l={"":Dp(s)};return e&&Object.assign(l,e),l}function id(r,t,e,s){return{dow:r.getUTCDay(),isDisabled:!(!s||Zs(s.activeRange,r)),isOther:!(!s||Zs(s.currentRange,r)),isToday:!(!t||!Zs(t,r)),isPast:!!(e?r<e:t&&r<t.start),isFuture:!!(e?r>e:t&&r>=t.end)}}function Al(r,t){let e=["fc-day",`fc-day-${qi[r.dow]}`];return r.isDisabled?e.push("fc-day-disabled"):(r.isToday&&(e.push("fc-day-today"),e.push(t.getClass("today"))),r.isPast&&e.push("fc-day-past"),r.isFuture&&e.push("fc-day-future"),r.isOther&&e.push("fc-day-other")),e}const nm=Gs({year:"numeric",month:"long",day:"numeric"}),nd=Gs({week:"long"});function Pu(r,t,e="day",s=!0){const{dateEnv:l,options:f,calendarApi:C}=r;let z=l.format(t,"week"===e?nd:nm);if(f.navLinks){let W=l.toDate(t);const re=oe=>{let Ne="day"===e?f.navLinkDayClick:"week"===e?f.navLinkWeekClick:null;"function"==typeof Ne?Ne.call(C,l.toDate(t),oe):("string"==typeof Ne&&(e=Ne),C.zoomTo(t,e))};return Object.assign({title:je(f.navLinkHint,[z,W],z),"data-navlink":""},s?Kd(re):{onClick:re})}return{"aria-label":z}}let fh,rd=null;function gh(r){return{x:r.offsetHeight-r.clientHeight,y:r.offsetWidth-r.clientWidth}}function sm(r,t=!1,e){let s=e?r.getBoundingClientRect():Zh(r),l=function Dv(r,t=!1){let e=window.getComputedStyle(r),s=parseInt(e.borderLeftWidth,10)||0,l=parseInt(e.borderRightWidth,10)||0,f=parseInt(e.borderTopWidth,10)||0,C=parseInt(e.borderBottomWidth,10)||0,z=gh(r),W=z.y-s-l,oe={borderLeft:s,borderRight:l,borderTop:f,borderBottom:C,scrollbarBottom:z.x-f-C,scrollbarLeft:0,scrollbarRight:0};return function Xh(){return null===rd&&(rd=function rm(){let r=document.createElement("div");Cl(r,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),r.innerHTML="<div></div>",document.body.appendChild(r);let e=r.firstChild.getBoundingClientRect().left>r.getBoundingClientRect().left;return uc(r),e}()),rd}()&&"rtl"===e.direction?oe.scrollbarLeft=W:oe.scrollbarRight=W,t&&(oe.paddingLeft=parseInt(e.paddingLeft,10)||0,oe.paddingRight=parseInt(e.paddingRight,10)||0,oe.paddingTop=parseInt(e.paddingTop,10)||0,oe.paddingBottom=parseInt(e.paddingBottom,10)||0),oe}(r,t),f={left:s.left+l.borderLeft+l.scrollbarLeft,right:s.right-l.borderRight-l.scrollbarRight,top:s.top+l.borderTop,bottom:s.bottom-l.borderBottom-l.scrollbarBottom};return t&&(f.left+=l.paddingLeft,f.right-=l.paddingRight,f.top+=l.paddingTop,f.bottom-=l.paddingBottom),f}function Zh(r){let t=r.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function om(r){let t=[];for(;r instanceof HTMLElement;){let e=window.getComputedStyle(r);if("fixed"===e.position)break;/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&t.push(r),r=r.parentNode}return t}class vh{constructor(t,e,s,l){this.els=e;let f=this.originClientRect=t.getBoundingClientRect();s&&this.buildElHorizontals(f.left),l&&this.buildElVerticals(f.top)}buildElHorizontals(t){let e=[],s=[];for(let l of this.els){let f=l.getBoundingClientRect();e.push(f.left-t),s.push(f.right-t)}this.lefts=e,this.rights=s}buildElVerticals(t){let e=[],s=[];for(let l of this.els){let f=l.getBoundingClientRect();e.push(f.top-t),s.push(f.bottom-t)}this.tops=e,this.bottoms=s}leftToIndex(t){let f,{lefts:e,rights:s}=this,l=e.length;for(f=0;f<l;f+=1)if(t>=e[f]&&t<s[f])return f}topToIndex(t){let f,{tops:e,bottoms:s}=this,l=e.length;for(f=0;f<l;f+=1)if(t>=e[f]&&t<s[f])return f}getWidth(t){return this.rights[t]-this.lefts[t]}getHeight(t){return this.bottoms[t]-this.tops[t]}similarTo(t){return Yp(this.tops||[],t.tops||[])&&Yp(this.bottoms||[],t.bottoms||[])&&Yp(this.lefts||[],t.lefts||[])&&Yp(this.rights||[],t.rights||[])}}function Yp(r,t){const e=r.length;if(e!==t.length)return!1;for(let s=0;s<e;s++)if(Math.round(r[s])!==Math.round(t[s]))return!1;return!0}class Hp{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class _g extends Hp{constructor(t){super(),this.el=t}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(t){this.el.scrollTop=t}setScrollLeft(t){this.el.scrollLeft=t}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Vp extends Hp{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(t){window.scroll(window.pageXOffset,t)}setScrollLeft(t){window.scroll(t,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class dl extends pr{constructor(){super(...arguments),this.uid=w()}prepareHits(){}queryHit(t,e,s,l){return null}isValidSegDownEl(t){return!this.props.eventDrag&&!this.props.eventResize&&!ps(t,".fc-event-mirror")}isValidDateDownEl(t){return!(ps(t,".fc-event:not(.fc-bg-event)")||ps(t,".fc-more-link")||ps(t,"a[data-navlink]")||ps(t,".fc-popover"))}}class Gp{constructor(t=(e=>e.thickness||1)){this.getEntryThickness=t,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(t){let e=[];for(let s of t)this.insertEntry(s,e);return e}insertEntry(t,e){let s=this.findInsertion(t);this.isInsertionValid(s,t)?this.insertEntryAt(t,s):this.handleInvalidInsertion(s,t,e)}isInsertionValid(t,e){return(-1===this.maxCoord||t.levelCoord+this.getEntryThickness(e)<=this.maxCoord)&&(-1===this.maxStackCnt||t.stackCnt<this.maxStackCnt)}handleInvalidInsertion(t,e,s){if(this.allowReslicing&&t.touchingEntry){const l=Object.assign(Object.assign({},e),{span:y(e.span,t.touchingEntry.span)});s.push(l),this.splitEntry(e,t.touchingEntry,s)}else s.push(e)}splitEntry(t,e,s){let l=t.span,f=e.span;l.start<f.start&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:l.start,end:f.start}},s),l.end>f.end&&this.insertEntry({index:t.index,thickness:t.thickness,span:{start:f.end,end:l.end}},s)}insertEntryAt(t,e){let{entriesByLevel:s,levelCoords:l}=this;-1===e.lateral?(O(l,e.level,e.levelCoord),O(s,e.level,[t])):O(s[e.level],e.lateral,t),this.stackCnts[od(t)]=e.stackCnt}findInsertion(t){let{levelCoords:e,entriesByLevel:s,strictOrder:l,stackCnts:f}=this,C=e.length,z=0,W=-1,re=-1,oe=null,Ne=0;for(let $t=0;$t<C;$t+=1){const Ut=e[$t];if(!l&&Ut>=z+this.getEntryThickness(t))break;let Di,li=s[$t],Sn=S(li,t.span.start,Ru),hr=Sn[0]+Sn[1];for(;(Di=li[hr])&&Di.span.start<t.span.end;){let yr=Ut+this.getEntryThickness(Di);yr>z&&(z=yr,oe=Di,W=$t,re=hr),yr===z&&(Ne=Math.max(Ne,f[od(Di)]+1)),hr+=1}}let Ye=0;if(oe)for(Ye=W+1;Ye<C&&e[Ye]<z;)Ye+=1;let Ve=-1;return Ye<C&&e[Ye]===z&&(Ve=S(s[Ye],t.span.end,Ru)[0]),{touchingLevel:W,touchingLateral:re,touchingEntry:oe,stackCnt:Ne,levelCoord:z,level:Ye,lateral:Ve}}toRects(){let{entriesByLevel:t,levelCoords:e}=this,s=t.length,l=[];for(let f=0;f<s;f+=1){let C=t[f],z=e[f];for(let W of C)l.push(Object.assign(Object.assign({},W),{thickness:this.getEntryThickness(W),levelCoord:z}))}return l}}function Ru(r){return r.span.end}function od(r){return r.index+":"+r.span.start}function yg(r,t){return{start:Math.min(r.start,t.start),end:Math.max(r.end,t.end)}}function y(r,t){let e=Math.max(r.start,t.start),s=Math.min(r.end,t.end);return e<s?{start:e,end:s}:null}function O(r,t,e){r.splice(t,0,e)}function S(r,t,e){let s=0,l=r.length;if(!l||t<e(r[s]))return[0,0];if(t>e(r[l-1]))return[l,0];for(;s<l;){let f=Math.floor(s+(l-s)/2),C=e(r[f]);if(t<C)l=f;else{if(!(t>C))return[f,1];s=f+1}}return[s,0]}class H{constructor(t,e){this.emitter=new Hh}destroy(){}setMirrorIsVisible(t){}setMirrorNeedsRevert(t){}setAutoScrollEnabled(t){}}const Z={};Boolean;const pn="fc-col-header-cell";function Kr(r){return r.text}class Ss extends pr{render(){let{dateEnv:t,options:e,theme:s,viewApi:l}=this.context,{props:f}=this,{date:C,dateProfile:z}=f,W=id(C,f.todayRange,null,z),re=[pn].concat(Al(W,s)),oe=t.format(C,f.dayHeaderFormat),Ne=!W.isDisabled&&f.colCnt>1?Pu(this.context,C):{},Ye=Object.assign(Object.assign(Object.assign({date:t.toDate(C),view:l},f.extraRenderProps),{text:oe}),W);return Ot(ka,{elTag:"th",elClasses:re,elAttrs:Object.assign({role:"columnheader",colSpan:f.colSpan,"data-date":W.isDisabled?void 0:Ua(C)},f.extraDataAttrs),renderProps:Ye,generatorName:"dayHeaderContent",customGenerator:e.dayHeaderContent,defaultGenerator:Kr,classNameGenerator:e.dayHeaderClassNames,didMount:e.dayHeaderDidMount,willUnmount:e.dayHeaderWillUnmount},Ve=>Ot("div",{className:"fc-scrollgrid-sync-inner"},!W.isDisabled&&Ot(Ve,{elTag:"a",elAttrs:Ne,elClasses:["fc-col-header-cell-cushion",f.isSticky&&"fc-sticky"]})))}}const Do=Gs({weekday:"long"});class Ma extends pr{render(){let{props:t}=this,{dateEnv:e,theme:s,viewApi:l,options:f}=this.context,C=Hn(new Date(2592e5),t.dow),z={dow:t.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},W=e.format(C,t.dayHeaderFormat),re=Object.assign(Object.assign(Object.assign(Object.assign({date:C},z),{view:l}),t.extraRenderProps),{text:W});return Ot(ka,{elTag:"th",elClasses:[pn,...Al(z,s),...t.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:t.colSpan},t.extraDataAttrs),renderProps:re,generatorName:"dayHeaderContent",customGenerator:f.dayHeaderContent,defaultGenerator:Kr,classNameGenerator:f.dayHeaderClassNames,didMount:f.dayHeaderDidMount,willUnmount:f.dayHeaderWillUnmount},oe=>Ot("div",{className:"fc-scrollgrid-sync-inner"},Ot(oe,{elTag:"a",elClasses:["fc-col-header-cell-cushion",t.isSticky&&"fc-sticky"],elAttrs:{"aria-label":e.format(C,Do)}})))}}let bc=(()=>{class r extends ds{constructor(e,s){super(e,s),this.initialNowDate=Aa(s.options.now,s.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:s}=this;return e.children(s.nowDate,s.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:s}=this,l=En(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),f=s.dateEnv.startOf(l,e.unit),C=s.dateEnv.add(f,Ge(1,e.unit)),z=C.valueOf()-l.valueOf();return z=Math.min(864e5,z),{currentState:{nowDate:f,todayRange:jp(f)},nextState:{nowDate:C,todayRange:jp(C)},waitMs:z}}setTimeout(){let{nextState:e,waitMs:s}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},s)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return r.contextType=js,r})();function jp(r){let t=Hr(r);return{start:t,end:Hn(t,1)}}class lm extends pr{constructor(){super(...arguments),this.createDayHeaderFormatter=tr(xc)}render(){let{context:t}=this,{dates:e,dateProfile:s,datesRepDistinctDays:l,renderIntro:f}=this.props,C=this.createDayHeaderFormatter(t.options.dayHeaderFormat,l,e.length);return Ot(bc,{unit:"day"},(z,W)=>Ot("tr",{role:"row"},f&&f("day"),e.map(re=>l?Ot(Ss,{key:re.toISOString(),date:re,dateProfile:s,todayRange:W,colCnt:e.length,dayHeaderFormat:C}):Ot(Ma,{key:re.getUTCDay(),dow:re.getUTCDay(),dayHeaderFormat:C}))))}}function xc(r,t,e){return r||function Ai(r,t){return Gs(!r||t>10?{weekday:"short"}:t>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(t,e)}class Xl{constructor(t,e){let s=t.start,{end:l}=t,f=[],C=[],z=-1;for(;s<l;)e.isHiddenDay(s)?f.push(z+.5):(z+=1,f.push(z),C.push(s)),s=Hn(s,1);this.dates=C,this.indices=f,this.cnt=C.length}sliceRange(t){let e=this.getDateDayIndex(t.start),s=this.getDateDayIndex(Hn(t.end,-1)),l=Math.max(0,e),f=Math.min(this.cnt-1,s);return l=Math.ceil(l),f=Math.floor(f),l<=f?{firstIndex:l,lastIndex:f,isStart:e===l,isEnd:s===f}:null}getDateDayIndex(t){let{indices:e}=this,s=Math.floor(rr(this.dates[0],t));return s<0?e[0]-1:s>=e.length?e[e.length-1]+1:e[s]}}class _h{constructor(t,e){let l,f,C,{dates:s}=t;if(e){for(f=s[0].getUTCDay(),l=1;l<s.length&&s[l].getUTCDay()!==f;l+=1);C=Math.ceil(s.length/l)}else C=1,l=s.length;this.rowCnt=C,this.colCnt=l,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let t=[];for(let e=0;e<this.rowCnt;e+=1){let s=[];for(let l=0;l<this.colCnt;l+=1)s.push(this.buildCell(e,l));t.push(s)}return t}buildCell(t,e){let s=this.daySeries.dates[t*this.colCnt+e];return{key:s.toISOString(),date:s}}buildHeaderDates(){let t=[];for(let e=0;e<this.colCnt;e+=1)t.push(this.cells[0][e].date);return t}sliceRange(t){let{colCnt:e}=this,s=this.daySeries.sliceRange(t),l=[];if(s){let{firstIndex:f,lastIndex:C}=s,z=f;for(;z<=C;){let W=Math.floor(z/e),re=Math.min((W+1)*e,C+1);l.push({row:W,firstCol:z%e,lastCol:(re-1)%e,isStart:s.isStart&&z===f,isEnd:s.isEnd&&re-1===C}),z=re}}return l}}class bg{constructor(){this.sliceBusinessHours=tr(this._sliceBusinessHours),this.sliceDateSelection=tr(this._sliceDateSpan),this.sliceEventStore=tr(this._sliceEventStore),this.sliceEventDrag=tr(this._sliceInteraction),this.sliceEventResize=tr(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(t,e,s,l,...f){let{eventUiBases:C}=t,z=this.sliceEventStore(t.eventStore,C,e,s,...f);return{dateSelectionSegs:this.sliceDateSelection(t.dateSelection,e,s,C,l,...f),businessHourSegs:this.sliceBusinessHours(t.businessHours,e,s,l,...f),fgEventSegs:z.fg,bgEventSegs:z.bg,eventDrag:this.sliceEventDrag(t.eventDrag,C,e,s,...f),eventResize:this.sliceEventResize(t.eventResize,C,e,s,...f),eventSelection:t.eventSelection}}sliceNowDate(t,e,s,l,...f){return this._sliceDateSpan({range:{start:t,end:En(t,1)},allDay:!1},e,s,{},l,...f)}_sliceBusinessHours(t,e,s,l,...f){return t?this._sliceEventStore(Ku(t,Up(e,!!s),l),{},e,s,...f).bg:[]}_sliceEventStore(t,e,s,l,...f){if(t){let C=Gh(t,e,Up(s,!!l),l);return{bg:this.sliceEventRanges(C.bg,f),fg:this.sliceEventRanges(C.fg,f)}}return{bg:[],fg:[]}}_sliceInteraction(t,e,s,l,...f){if(!t)return null;let C=Gh(t.mutatedEvents,e,Up(s,!!l),l);return{segs:this.sliceEventRanges(C.fg,f),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}}_sliceDateSpan(t,e,s,l,f,...C){if(!t)return[];let z=Up(e,!!s),W=jl(t.range,z);if(W){let re=function em(r,t,e){let s=Gf({editable:!1},e),l=ah(s.refined,s.extra,"",r.allDay,!0,e);return{def:l,ui:ed(l,t),instance:Cd(l.defId,r.range),range:r.range,isStart:!0,isEnd:!0}}(t=Object.assign(Object.assign({},t),{range:W}),l,f),oe=this.sliceRange(t.range,...C);for(let Ne of oe)Ne.eventRange=re;return oe}return[]}sliceEventRanges(t,e){let s=[];for(let l of t)s.push(...this.sliceEventRange(l,e));return s}sliceEventRange(t,e){let s=t.range;this.forceDayIfListItem&&"list-item"===t.ui.display&&(s={start:s.start,end:Hn(s.start,1)});let l=this.sliceRange(s,...e);for(let f of l)f.eventRange=t,f.isStart=t.isStart&&f.isStart,f.isEnd=t.isEnd&&f.isEnd;return l}}function Up(r,t){let e=r.activeRange;return t?e:{start:En(e.start,r.slotMinTime.milliseconds),end:En(e.end,r.slotMaxTime.milliseconds-864e5)}}function xg(r,t,e){let{instances:s}=r.mutatedEvents;for(let l in s)if(!qu(t.validRange,s[l].range))return!1;return Iv({eventDrag:r},e)}function Iv(r,t){let e=t.getCurrentData(),s=Object.assign({businessHours:e.businessHours,dateSelection:"",eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},r);return(t.pluginHooks.isPropsValid||Lv)(s,t)}function Lv(r,t,e={},s){return!(r.eventDrag&&!function cm(r,t,e,s){let l=t.getCurrentData(),f=r.eventDrag,C=f.mutatedEvents,z=C.defs,W=C.instances,re=_c(z,f.isEvent?r.eventUiBases:{"":l.selectionConfig});s&&(re=mc(re,s));let oe=function Wf(r,t){return{defs:r.defs,instances:qc(r.instances,e=>!t[e.instanceId])}}(r.eventStore,f.affectedEvents.instances),Ne=oe.defs,Ye=oe.instances,Ve=_c(Ne,r.eventUiBases);for(let $t in W){let Ut=W[$t],li=Ut.range,Di=re[Ut.defId],Sn=z[Ut.defId];if(!Xa(Di.constraints,li,oe,r.businessHours,t))return!1;let{eventOverlap:hr}=t.options,yr="function"==typeof hr?hr:null;for(let is in Ye){let Bs=Ye[is];if(sh(li,Bs.range)&&(!1===Ve[Bs.defId].overlap&&f.isEvent||!1===Di.overlap||yr&&!yr(new io(t,Ne[Bs.defId],Bs),new io(t,Sn,Ut))))return!1}let ro=l.eventStore;for(let is of Di.allows){let pd,Bs=Object.assign(Object.assign({},e),{range:Ut.range,allDay:Sn.allDay}),Qr=ro.defs[Sn.defId];if(pd=Qr?new io(t,Qr,ro.instances[$t]):new io(t,Sn),!is(Md(Bs,t),pd))return!1}}return!0}(r,t,e,s)||r.dateSelection&&!function Ov(r,t,e,s){let l=r.eventStore,f=l.defs,C=l.instances,z=r.dateSelection,W=z.range,{selectionConfig:re}=t.getCurrentData();if(s&&(re=s(re)),!Xa(re.constraints,W,l,r.businessHours,t))return!1;let{selectOverlap:oe}=t.options,Ne="function"==typeof oe?oe:null;for(let Ye in C){let Ve=C[Ye];if(sh(W,Ve.range)&&(!1===re.overlap||Ne&&!Ne(new io(t,f[Ve.defId],Ve),null)))return!1}for(let Ye of re.allows)if(!Ye(Md(Object.assign(Object.assign({},e),z),t),null))return!1;return!0}(r,t,e,s))}function Xa(r,t,e,s,l){for(let f of r)if(!$p(Wp(f,t,e,s,l),t))return!1;return!0}function Wp(r,t,e,s,l){return"businessHours"===r?Bd(Ku(s,t,l)):"string"==typeof r?Bd(tu(e,f=>f.groupId===r)):"object"==typeof r&&r?Bd(Ku(r,t,l)):[]}function Bd(r){let{instances:t}=r,e=[];for(let s in t)e.push(t[s].range);return e}function $p(r,t){for(let e of r)if(qu(e,t))return!0;return!1}const Xp=/^(visible|hidden)$/;class wg extends pr{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,Yo(this.props.elRef,t)}}render(){let{props:t}=this,{liquid:e,liquidIsAbsolute:s}=t,l=e&&s,f=["fc-scroller"];return e&&f.push(s?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),Ot("div",{ref:this.handleEl,className:f.join(" "),style:{overflowX:t.overflowX,overflowY:t.overflowY,left:l&&-(t.overcomeLeft||0)||"",right:l&&-(t.overcomeRight||0)||"",bottom:l&&-(t.overcomeBottom||0)||"",marginLeft:!l&&-(t.overcomeLeft||0)||"",marginRight:!l&&-(t.overcomeRight||0)||"",marginBottom:!l&&-(t.overcomeBottom||0)||"",maxHeight:t.maxHeight||""}},t.children)}needsXScrolling(){if(Xp.test(this.props.overflowX))return!1;let{el:t}=this,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=t;for(let l=0;l<s.length;l+=1)if(s[l].getBoundingClientRect().width>e)return!0;return!1}needsYScrolling(){if(Xp.test(this.props.overflowY))return!1;let{el:t}=this,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=t;for(let l=0;l<s.length;l+=1)if(s[l].getBoundingClientRect().height>e)return!0;return!1}getXScrollbarWidth(){return Xp.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Xp.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ad{constructor(t){this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,s)=>{let{depths:l,currentMap:f}=this,C=!1,z=!1;null!==e?(C=s in f,f[s]=e,l[s]=(l[s]||0)+1,z=!0):(l[s]-=1,l[s]||(delete f[s],delete this.callbackMap[s],C=!0)),this.masterCallback&&(C&&this.masterCallback(null,String(s)),z&&this.masterCallback(e,String(s)))}}createRef(t){let e=this.callbackMap[t];return e||(e=this.callbackMap[t]=s=>{this.handleValue(s,String(t))}),e}collect(t,e,s){return function vp(r,t=0,e,s=1){let l=[];null==e&&(e=Object.keys(r).length);for(let f=t;f<e;f+=s){let C=r[f];void 0!==C&&l.push(C)}return l}(this.currentMap,t,e,s)}getAll(){return th(this.currentMap)}}function Pv(r,t){return r.liquid&&t.liquid}function Ay(r,t){return Bi(r,t,Ta)}function um(r,t){let e=[];for(let s of r){let l=s.span||1;for(let f=0;f<l;f+=1)e.push(Ot("col",{style:{width:"shrink"===s.width?My(t):s.width||"",minWidth:s.minWidth||""}}))}return Ot("colgroup",{},...e)}function My(r){return r??4}function Fv(r,t){let e=["fc-scrollgrid-section",`fc-scrollgrid-section-${r.type}`,r.className];return t&&r.liquid&&null==r.maxHeight&&e.push("fc-scrollgrid-section-liquid"),r.isSticky&&e.push("fc-scrollgrid-section-sticky"),e}function Cg(r){return Ot("div",{className:"fc-scrollgrid-sticky-shim",style:{width:r.clientWidth,minWidth:r.tableMinWidth}})}function dm(r){let{stickyHeaderDates:t}=r;return(null==t||"auto"===t)&&(t="auto"===r.height||"auto"===r.viewHeight),t}function Bv(r){let{stickyFooterScrollbar:t}=r;return(null==t||"auto"===t)&&(t="auto"===r.height||"auto"===r.viewHeight),t}class Eg extends pr{constructor(){super(...arguments),this.processCols=tr(t=>t,Ay),this.renderMicroColGroup=tr(um),this.scrollerRefs=new ad,this.scrollerElRefs=new ad(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:t,state:e,context:s}=this,l=t.sections||[],f=this.processCols(t.cols),C=this.renderMicroColGroup(f,e.shrinkWidth),z=function zv(r,t){let e=["fc-scrollgrid",t.theme.getClass("table")];return r&&e.push("fc-scrollgrid-liquid"),e}(t.liquid,s);t.collapsibleWidth&&z.push("fc-scrollgrid-collapsible");let oe,W=l.length,re=0,Ne=[],Ye=[],Ve=[];for(;re<W&&"header"===(oe=l[re]).type;)Ne.push(this.renderSection(oe,C,!0)),re+=1;for(;re<W&&"body"===(oe=l[re]).type;)Ye.push(this.renderSection(oe,C,!1)),re+=1;for(;re<W&&"footer"===(oe=l[re]).type;)Ve.push(this.renderSection(oe,C,!0)),re+=1;let $t=!ru();const Ut={role:"rowgroup"};return Ot("table",{role:"grid",className:z.join(" "),style:{height:t.height}},!($t||!Ne.length)&&Ot("thead",Ut,...Ne),!($t||!Ye.length)&&Ot("tbody",Ut,...Ye),!($t||!Ve.length)&&Ot("tfoot",Ut,...Ve),$t&&Ot("tbody",Ut,...Ne,...Ye,...Ve))}renderSection(t,e,s){return"outerContent"in t?Ot(zn,{key:t.key},t.outerContent):Ot("tr",{key:t.key,role:"presentation",className:Fv(t,this.props.liquid).join(" ")},this.renderChunkTd(t,e,t.chunk,s))}renderChunkTd(t,e,s,l){if("outerContent"in s)return s.outerContent;let{props:f}=this,{forceYScrollbars:C,scrollerClientWidths:z,scrollerClientHeights:W}=this.state,re=function Ty(r,t){return null!=t.maxHeight||Pv(r,t)}(f,t),oe=Pv(f,t),Ne=f.liquid?C?"scroll":re?"auto":"hidden":"visible",Ye=t.key,Ve=function ky(r,t,e,s){let{expandRows:l}=e;return"function"==typeof t.content?t.content(e):Ot("table",{role:"presentation",className:[t.tableClassName,r.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:l?e.clientHeight:""}},e.tableColGroupNode,Ot(s?"thead":"tbody",{role:"presentation"},"function"==typeof t.rowContent?t.rowContent(e):t.rowContent))}(t,s,{tableColGroupNode:e,tableMinWidth:"",clientWidth:f.collapsibleWidth||void 0===z[Ye]?null:z[Ye],clientHeight:void 0!==W[Ye]?W[Ye]:null,expandRows:t.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},l);return Ot(l?"th":"td",{ref:s.elRef,role:"presentation"},Ot("div",{className:"fc-scroller-harness"+(oe?" fc-scroller-harness-liquid":"")},Ot(wg,{ref:this.scrollerRefs.createRef(Ye),elRef:this.scrollerElRefs.createRef(Ye),overflowY:Ne,overflowX:f.liquid?"hidden":"visible",maxHeight:t.maxHeight,liquid:oe,liquidIsAbsolute:!0},Ve)))}_handleScrollerEl(t,e){let s=function Dy(r,t){for(let e of r)if(e.key===t)return e;return null}(this.props.sections,e);s&&Yo(s.chunk.scrollerElRef,t)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function Rv(r){for(let t of r)if("shrink"===t.width)return!0;return!1}(this.props.cols)?function Sy(r){let t=function Mh(r,t){let e=r instanceof HTMLElement?[r]:r,s=[];for(let l=0;l<e.length;l+=1){let f=e[l].querySelectorAll(t);for(let C=0;C<f.length;C+=1)s.push(f[C])}return s}(r,".fc-scrollgrid-shrink"),e=0;for(let s of t)e=Math.max(e,tt(s));return Math.ceil(e)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let t=function mh(){return fh||(fh=function Fd(){let r=document.createElement("div");r.style.overflow="scroll",r.style.position="absolute",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r);let t=gh(r);return document.body.removeChild(r),t}()),fh}(),{scrollerRefs:e,scrollerElRefs:s}=this,l=!1,f={},C={};for(let z in e.currentMap){let W=e.currentMap[z];if(W&&W.needsYScrolling()){l=!0;break}}for(let z of this.props.sections){let W=z.key,re=s.currentMap[W];if(re){let oe=re.parentNode;f[W]=Math.floor(oe.getBoundingClientRect().width-(l?t.y:0)),C[W]=Math.floor(oe.getBoundingClientRect().height)}}return{forceYScrollbars:l,scrollerClientWidths:f,scrollerClientHeights:C}}}Eg.addStateEquality({scrollerClientWidths:Ta,scrollerClientHeights:Ta});class Zp extends pr{constructor(){super(...arguments),this.handleEl=t=>{this.el=t,t&&uh(t,this.props.seg)}}render(){const{props:t,context:e}=this,{options:s}=e,{seg:l}=t,{eventRange:f}=l,{ui:C}=f,z={event:new io(e,f.def,f.instance),view:e.viewApi,timeText:t.timeText,textColor:C.textColor,backgroundColor:C.backgroundColor,borderColor:C.borderColor,isDraggable:!t.disableDragging&&Zf(l,e),isStartResizable:!t.disableResizing&&qf(l,e),isEndResizable:!t.disableResizing&&(r=l,r.isEnd&&r.eventRange.ui.durationEditable),isMirror:!!(t.isDragging||t.isResizing||t.isDateSelecting),isStart:!!l.isStart,isEnd:!!l.isEnd,isPast:!!t.isPast,isFuture:!!t.isFuture,isToday:!!t.isToday,isSelected:!!t.isSelected,isDragging:!!t.isDragging,isResizing:!!t.isResizing};var r;return Ot(ka,Object.assign({},t,{elRef:this.handleEl,elClasses:[...Rp(z),...l.eventRange.ui.classNames,...t.elClasses||[]],renderProps:z,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:t.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount}))}componentDidUpdate(t){this.el&&this.props.seg!==t.seg&&uh(this.el,this.props.seg)}}class Nv extends pr{render(){let{props:t,context:e}=this,{options:s}=e,{seg:l}=t,{ui:f}=l.eventRange,z=Ld(l,s.eventTimeFormat||t.defaultTimeFormat,e,t.defaultDisplayEventTime,t.defaultDisplayEventEnd);return Ot(Zp,Object.assign({},t,{elTag:"a",elStyle:{borderColor:f.borderColor,backgroundColor:f.backgroundColor},elAttrs:Uh(l,e),defaultGenerator:ma,timeText:z}),(W,re)=>Ot(zn,null,Ot(W,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:re.textColor}}),!!re.isStartResizable&&Ot("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!re.isEndResizable&&Ot("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function ma(r){return Ot("div",{className:"fc-event-main-frame"},r.timeText&&Ot("div",{className:"fc-event-time"},r.timeText),Ot("div",{className:"fc-event-title-container"},Ot("div",{className:"fc-event-title fc-sticky"},r.event.title||Ot(zn,null,"\xa0"))))}const wc=r=>Ot(js.Consumer,null,t=>{let{options:e}=t,s={isAxis:r.isAxis,date:t.dateEnv.toDate(r.date),view:t.viewApi};return Ot(ka,Object.assign({},r,{elTag:r.elTag||"div",renderProps:s,generatorName:"nowIndicatorContent",customGenerator:e.nowIndicatorContent,classNameGenerator:e.nowIndicatorClassNames,didMount:e.nowIndicatorDidMount,willUnmount:e.nowIndicatorWillUnmount}))}),Sg=Gs({day:"numeric"});class qh extends pr{constructor(){super(...arguments),this.refineRenderProps=pc(Iy)}render(){let{props:t,context:e}=this,{options:s}=e,l=this.refineRenderProps({date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,isMonthStart:t.isMonthStart||!1,showDayNumber:t.showDayNumber,extraRenderProps:t.extraRenderProps,viewApi:e.viewApi,dateEnv:e.dateEnv,monthStartFormat:s.monthStartFormat});return Ot(ka,Object.assign({},t,{elClasses:[...Al(l,e.theme),...t.elClasses||[]],elAttrs:Object.assign(Object.assign({},t.elAttrs),l.isDisabled?{}:{"data-date":Ua(t.date)}),renderProps:l,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:t.defaultGenerator,classNameGenerator:l.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount}))}}function Nd(r){return!(!r.dayCellContent&&!bp("dayCellContent",r))}function Iy(r){let{date:t,dateEnv:e,dateProfile:s,isMonthStart:l}=r,f=id(t,r.todayRange,null,s),C=r.showDayNumber?e.format(t,l?r.monthStartFormat:Sg):"";return Object.assign(Object.assign(Object.assign({date:e.toDate(t),view:r.viewApi},f),{isMonthStart:l,dayNumberText:C}),r.extraRenderProps)}class Yv extends pr{render(){let{props:t}=this,{seg:e}=t;return Ot(Zp,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:e.eventRange.ui.backgroundColor},defaultGenerator:qp,seg:e,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:t.isPast,isFuture:t.isFuture,isToday:t.isToday,disableDragging:!0,disableResizing:!0})}}function qp(r){let{title:t}=r.event;return t&&Ot("div",{className:"fc-event-title"},r.event.title)}function Hv(r){return Ot("div",{className:`fc-${r}`})}const Vv=r=>Ot(js.Consumer,null,t=>{let{dateEnv:e,options:s}=t,{date:l}=r,f=s.weekNumberFormat||r.defaultFormat,C=e.computeWeekNumber(l),z=e.format(l,f);return Ot(ka,Object.assign({},r,{renderProps:{num:C,text:z,date:l},generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:Gv,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount}))});function Gv(r){return r.text}class jv extends pr{constructor(){super(...arguments),this.state={titleId:Oc()},this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&Yo(this.props.elRef,t)},this.handleDocumentMouseDown=t=>{const e=Wu(t);this.rootEl.contains(e)||this.handleCloseClick()},this.handleDocumentKeyDown=t=>{"Escape"===t.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:t}=this.props;t&&t()}}render(){let{theme:t,options:e}=this.context,{props:s,state:l}=this,f=["fc-popover",t.getClass("popover")].concat(s.extraClassNames||[]);return function D(r,t){var e=Ot(m,{__v:r,i:t});return e.containerInfo=t,e}(Ot("div",Object.assign({},s.extraAttrs,{id:s.id,className:f.join(" "),"aria-labelledby":l.titleId,ref:this.handleRootEl}),Ot("div",{className:"fc-popover-header "+t.getClass("popoverHeader")},Ot("span",{className:"fc-popover-title",id:l.titleId},s.title),Ot("span",{className:"fc-popover-close "+t.getIconClass("close"),title:e.closeHint,onClick:this.handleCloseClick})),Ot("div",{className:"fc-popover-body "+t.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:t}=this.context,{alignmentEl:e,alignGridTop:s}=this.props,{rootEl:l}=this,f=function Np(r){let t=om(r),e=r.getBoundingClientRect();for(let s of t){let l=$h(e,s.getBoundingClientRect());if(!l)return null;e=l}return e}(e);if(f){let C=l.getBoundingClientRect(),z=s?ps(e,".fc-scrollgrid").getBoundingClientRect().top:f.top,W=t?f.right-C.width:f.left;z=Math.max(z,10),W=Math.min(W,document.documentElement.clientWidth-10-C.width),W=Math.max(W,10);let re=l.offsetParent.getBoundingClientRect();Cl(l,{top:z-re.top,left:W-re.left})}}}class Ts extends dl{constructor(){super(...arguments),this.handleRootEl=t=>{this.rootEl=t,t?this.context.registerInteractiveComponent(this,{el:t,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:t,dateEnv:e}=this.context,{props:s}=this,{startDate:l,todayRange:f,dateProfile:C}=s,z=e.format(l,t.dayPopoverFormat);return Ot(qh,{elRef:this.handleRootEl,date:l,dateProfile:C,todayRange:f},(W,re,oe)=>Ot(jv,{elRef:oe.ref,id:s.id,title:z,extraClassNames:["fc-more-popover"].concat(oe.className||[]),extraAttrs:oe,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},Nd(t)&&Ot(W,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(t,e,s,l){let{rootEl:f,props:C}=this;return t>=0&&t<s&&e>=0&&e<l?{dateProfile:C.dateProfile,dateSpan:Object.assign({allDay:!C.forceTimed,range:{start:C.startDate,end:C.endDate}},C.extraDateSpan),dayEl:f,rect:{left:0,top:0,right:s,bottom:l},layer:1}:null}}class pm extends pr{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Oc()},this.handleLinkEl=t=>{this.linkEl=t,this.props.elRef&&Yo(this.props.elRef,t)},this.handleClick=t=>{let{props:e,context:s}=this,{moreLinkClick:l}=s.options,f=Tg(e).start;function C(z){let{def:W,instance:re,range:oe}=z.eventRange;return{event:new io(s,W,re),start:s.dateEnv.toDate(oe.start),end:s.dateEnv.toDate(oe.end),isStart:z.isStart,isEnd:z.isEnd}}"function"==typeof l&&(l=l({date:f,allDay:!!e.allDayDate,allSegs:e.allSegs.map(C),hiddenSegs:e.hiddenSegs.map(C),jsEvent:t,view:s.viewApi})),l&&"popover"!==l?"string"==typeof l&&s.calendarApi.zoomTo(f,l):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:t,state:e}=this;return Ot(js.Consumer,null,s=>{let{viewApi:l,options:f,calendarApi:C}=s,{moreLinkText:z}=f,{moreCnt:W}=t,re=Tg(t),oe="function"==typeof z?z.call(C,W):`+${W} ${z}`,Ne=je(f.moreLinkHint,[W],oe),Ye={num:W,shortText:`+${W}`,text:oe,view:l};return Ot(zn,null,!!t.moreCnt&&Ot(ka,{elTag:t.elTag||"a",elRef:this.handleLinkEl,elClasses:[...t.elClasses||[],"fc-more-link"],elStyle:t.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},t.elAttrs),Kd(this.handleClick)),{title:Ne,"aria-expanded":e.isPopoverOpen,"aria-controls":e.isPopoverOpen?e.popoverId:""}),renderProps:Ye,generatorName:"moreLinkContent",customGenerator:f.moreLinkContent,defaultGenerator:t.defaultGenerator||Uv,classNameGenerator:f.moreLinkClassNames,didMount:f.moreLinkDidMount,willUnmount:f.moreLinkWillUnmount},t.children),e.isPopoverOpen&&Ot(Ts,{id:e.popoverId,startDate:re.start,endDate:re.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:this.parentEl,alignmentEl:t.alignmentElRef?t.alignmentElRef.current:this.linkEl,alignGridTop:t.alignGridTop,forceTimed:t.forceTimed,onClose:this.handlePopoverClose},t.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ps(this.linkEl,".fc-view-harness"))}}function Uv(r){return r.text}function Tg(r){if(r.allDayDate)return{start:r.allDayDate,end:Hn(r.allDayDate,1)};let{hiddenSegs:t}=r;return{start:zu(t),end:Wv(t)}}function zu(r){return r.reduce(Kh).eventRange.range.start}function Kh(r,t){return r.eventRange.range.start<t.eventRange.range.start?r:t}function Wv(r){return r.reduce(Ly).eventRange.range.end}function Ly(r,t){return r.eventRange.range.end>t.eventRange.range.end?r:t}class Oy{constructor(){this.handlers=[]}set(t){this.currentValue=t;for(let e of this.handlers)e(t)}subscribe(t){this.handlers.push(t),void 0!==this.currentValue&&t(this.currentValue)}}class Py extends Oy{constructor(){super(...arguments),this.map=new Map}handle(t){const{map:e}=this;let s=!1;t.isActive?(e.set(t.id,t),s=!0):e.has(t.id)&&(e.delete(t.id),s=!0),s&&this.set(e)}}const Ry=[],$v={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},Xv=Object.assign(Object.assign({},$v),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(r,t)=>"day"===t?"Today":`This ${r}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:r=>`Show ${r} more event${1===r?"":"s"}`});function Zv(r){let t=r.length>0?r[0].code:"en",e=Ry.concat(r),s={en:Xv};for(let l of e)s[l.code]=l;return{map:s,defaultCode:t}}function kg(r,t){return"object"!=typeof r||Array.isArray(r)?function zy(r,t){let e=[].concat(r||[]),s=function fm(r,t){for(let e=0;e<r.length;e+=1){let s=r[e].toLocaleLowerCase().split("-");for(let l=s.length;l>0;l-=1){let f=s.slice(0,l).join("-");if(t[f])return t[f]}}return null}(e,t)||Xv;return yh(r,e,s)}(r,t):yh(r.code,[r.code],r)}function yh(r,t,e){let s=qo([$v,e],["buttonText"]);delete s.code;let{week:l}=s;return delete s.week,{codeArg:r,codes:t,week:l,simpleNumberFormat:new Intl.NumberFormat(r),options:s}}function su(r){return{id:w(),name:r.name,premiumReleaseDate:r.premiumReleaseDate?new Date(r.premiumReleaseDate):void 0,deps:r.deps||[],reducers:r.reducers||[],isLoadingFuncs:r.isLoadingFuncs||[],contextInit:[].concat(r.contextInit||[]),eventRefiners:r.eventRefiners||{},eventDefMemberAdders:r.eventDefMemberAdders||[],eventSourceRefiners:r.eventSourceRefiners||{},isDraggableTransformers:r.isDraggableTransformers||[],eventDragMutationMassagers:r.eventDragMutationMassagers||[],eventDefMutationAppliers:r.eventDefMutationAppliers||[],dateSelectionTransformers:r.dateSelectionTransformers||[],datePointTransforms:r.datePointTransforms||[],dateSpanTransforms:r.dateSpanTransforms||[],views:r.views||{},viewPropsTransformers:r.viewPropsTransformers||[],isPropsValid:r.isPropsValid||null,externalDefTransforms:r.externalDefTransforms||[],viewContainerAppends:r.viewContainerAppends||[],eventDropTransformers:r.eventDropTransformers||[],componentInteractions:r.componentInteractions||[],calendarInteractions:r.calendarInteractions||[],themeClasses:r.themeClasses||{},eventSourceDefs:r.eventSourceDefs||[],cmdFormatter:r.cmdFormatter,recurringTypes:r.recurringTypes||[],namedTimeZonedImpl:r.namedTimeZonedImpl,initialView:r.initialView||"",elementDraggingImpl:r.elementDraggingImpl,optionChangeHandlers:r.optionChangeHandlers||{},scrollGridImpl:r.scrollGridImpl||null,listenerRefiners:r.listenerRefiners||{},optionRefiners:r.optionRefiners||{},propSetHandlers:r.propSetHandlers||{}}}function Fy(r,t){return{premiumReleaseDate:By(r.premiumReleaseDate,t.premiumReleaseDate),reducers:r.reducers.concat(t.reducers),isLoadingFuncs:r.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:r.contextInit.concat(t.contextInit),eventRefiners:Object.assign(Object.assign({},r.eventRefiners),t.eventRefiners),eventDefMemberAdders:r.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},r.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:r.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:r.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:r.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:r.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:r.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:r.dateSpanTransforms.concat(t.dateSpanTransforms),views:Object.assign(Object.assign({},r.views),t.views),viewPropsTransformers:r.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||r.isPropsValid,externalDefTransforms:r.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:r.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:r.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:r.calendarInteractions.concat(t.calendarInteractions),componentInteractions:r.componentInteractions.concat(t.componentInteractions),themeClasses:Object.assign(Object.assign({},r.themeClasses),t.themeClasses),eventSourceDefs:r.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||r.cmdFormatter,recurringTypes:r.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||r.namedTimeZonedImpl,initialView:r.initialView||t.initialView,elementDraggingImpl:r.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},r.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||r.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},r.listenerRefiners),t.listenerRefiners),optionRefiners:Object.assign(Object.assign({},r.optionRefiners),t.optionRefiners),propSetHandlers:Object.assign(Object.assign({},r.propSetHandlers),t.propSetHandlers)}}function By(r,t){return void 0===r?t:void 0===t?r:new Date(Math.max(r.valueOf(),t.valueOf()))}class Yd extends bd{}function Kp(r,t,e,s){if(t[r])return t[r];let l=function Ml(r,t,e,s){let l=e[r],f=s[r],C=oe=>l&&null!==l[oe]?l[oe]:f&&null!==f[oe]?f[oe]:null,z=C("component"),W=C("superType"),re=null;if(W){if(W===r)throw new Error("Can't have a custom view type that references itself");re=Kp(W,t,e,s)}return!z&&re&&(z=re.component),z?{type:r,component:z,defaults:Object.assign(Object.assign({},re?re.defaults:{}),l?l.rawOptions:{}),overrides:Object.assign(Object.assign({},re?re.overrides:{}),f?f.rawOptions:{})}:null}(r,t,e,s);return l&&(t[r]=l),l}function gm(r){return mc(r,Kv)}function Kv(r){let t="function"==typeof r?{component:r}:r,{component:e}=t;return t.content?e=Zl(t):e&&!(e.prototype instanceof pr)&&(e=Zl(Object.assign(Object.assign({},t),{content:e}))),{superType:t.type,component:e,rawOptions:t}}function Zl(r){return t=>Ot(js.Consumer,null,e=>Ot(ka,{elTag:"div",elClasses:Bf(e.viewSpec),renderProps:Object.assign(Object.assign({},t),{nextDayThreshold:e.options.nextDayThreshold}),generatorName:void 0,customGenerator:r.content,classNameGenerator:r.classNames,didMount:r.didMount,willUnmount:r.willUnmount}))}function Jv(r,t,e,s){let l=gm(r),f=gm(t.views),C=function qv(r,t){let s,e={};for(s in r)Kp(s,e,r,t);for(s in t)Kp(s,e,r,t);return e}(l,f);return mc(C,z=>function Jp(r,t,e,s,l){let f=r.overrides.duration||r.defaults.duration||s.duration||e.duration,C=null,z="",W="",re={};if(f&&(C=function Mg(r){let t=JSON.stringify(r),e=bh[t];return void 0===e&&(e=Ge(r),bh[t]=e),e}(f),C)){let Ye=Ii(C);z=Ye.unit,1===Ye.value&&(W=z,re=t[z]?t[z].rawOptions:{})}let oe=Ye=>{let Ve=Ye.buttonText||{},$t=r.defaults.buttonTextKey;return null!=$t&&null!=Ve[$t]?Ve[$t]:null!=Ve[r.type]?Ve[r.type]:null!=Ve[W]?Ve[W]:null},Ne=Ye=>{let Ve=Ye.buttonHints||{},$t=r.defaults.buttonTextKey;return null!=$t&&null!=Ve[$t]?Ve[$t]:null!=Ve[r.type]?Ve[r.type]:null!=Ve[W]?Ve[W]:null};return{type:r.type,component:r.component,duration:C,durationUnit:z,singleUnit:W,optionDefaults:r.defaults,optionOverrides:Object.assign(Object.assign({},re),r.overrides),buttonTextOverride:oe(s)||oe(e)||r.overrides.buttonText,buttonTextDefault:oe(l)||r.defaults.buttonText||oe(Xu)||r.type,buttonTitleOverride:Ne(s)||Ne(e)||r.overrides.buttonHint,buttonTitleDefault:Ne(l)||r.defaults.buttonHint||Ne(Xu)}}(z,f,t,e,s))}Yd.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},Yd.prototype.baseIconClass="fc-icon",Yd.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Yd.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},Yd.prototype.iconOverrideOption="buttonIcons",Yd.prototype.iconOverrideCustomButtonOption="icon",Yd.prototype.iconOverridePrefix="fc-icon-";let bh={};function Dg(r){for(let t in r)if(r[t].isFetching)return!0;return!1}function _m(r,t,e,s){let l={};for(let f of t)l[f.sourceId]=f;return e&&(l=n_(l,e,s)),Object.assign(Object.assign({},r),l)}function n_(r,t,e){return ou(r,qc(r,s=>function r_(r,t,e){return l_(r,e)?!e.options.lazyFetching||!r.fetchRange||r.isFetching||t.start<r.fetchRange.start||t.end>r.fetchRange.end:!r.latestFetchId}(s,t,e)),t,!1,e)}function ou(r,t,e,s,l){let f={};for(let C in r){let z=r[C];f[C]=t[C]?s_(z,e,s,l):z}return f}function s_(r,t,e,s){let{options:l,calendarApi:f}=s,C=s.pluginHooks.eventSourceDefs[r.sourceDefId],z=w();return C.fetch({eventSource:r,range:t,isRefetch:e,context:s},W=>{let{rawEvents:re}=W;l.eventSourceSuccess&&(re=l.eventSourceSuccess.call(f,re,W.response)||re),r.success&&(re=r.success.call(f,re,W.response)||re),s.dispatch({type:"RECEIVE_EVENTS",sourceId:r.sourceId,fetchId:z,fetchRange:t,rawEvents:re})},W=>{let re=!1;l.eventSourceFailure&&(l.eventSourceFailure.call(f,W),re=!0),r.failure&&(r.failure(W),re=!0),re||console.warn(W.message,W),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:r.sourceId,fetchId:z,fetchRange:t,error:W})}),Object.assign(Object.assign({},r),{isFetching:!0,latestFetchId:z})}function Ig(r,t){return qc(r,e=>l_(e,t))}function l_(r,t){return!t.pluginHooks.eventSourceDefs[r.sourceDefId].ignoreRange}function Hy(r,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return r}}function c_(r,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return r}}function u_(r,t){let e;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return e=t.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return r}}function Qp(r,t){let e;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return e=t.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return r}}function d_(r,t,e,s,l){return{header:r.headerToolbar?Lg(r.headerToolbar,r,t,e,s,l):null,footer:r.footerToolbar?Lg(r.footerToolbar,r,t,e,s,l):null}}function Lg(r,t,e,s,l,f){let C={},z=[],W=!1;for(let re in r){let Ne=au(r[re],t,e,s,l,f);C[re]=Ne.widgets,z.push(...Ne.viewsWithButtons),W=W||Ne.hasTitle}return{sectionWidgets:C,viewsWithButtons:z,hasTitle:W}}function au(r,t,e,s,l,f){let C="rtl"===t.direction,z=t.customButtons||{},W=e.buttonText||{},re=t.buttonText||{},oe=e.buttonHints||{},Ne=t.buttonHints||{},Ye=r?r.split(" "):[],Ve=[],$t=!1;return{widgets:Ye.map(li=>li.split(",").map(Di=>{if("title"===Di)return $t=!0,{buttonName:Di};let Sn,hr,yr,ro,is,Bs;if(Sn=z[Di])yr=Qr=>{Sn.click&&Sn.click.call(Qr.target,Qr,Qr.target)},(ro=s.getCustomButtonIconClass(Sn))||(ro=s.getIconClass(Di,C))||(is=Sn.text),Bs=Sn.hint||Sn.text;else if(hr=l[Di]){Ve.push(Di),yr=()=>{f.changeView(Di)},(is=hr.buttonTextOverride)||(ro=s.getIconClass(Di,C))||(is=hr.buttonTextDefault);let Qr=hr.buttonTextOverride||hr.buttonTextDefault;Bs=je(hr.buttonTitleOverride||hr.buttonTitleDefault||t.viewHint,[Qr,Di],Qr)}else if(f[Di])if(yr=()=>{f[Di]()},(is=W[Di])||(ro=s.getIconClass(Di,C))||(is=re[Di]),"prevYear"===Di||"nextYear"===Di){let Qr="prevYear"===Di?"prev":"next";Bs=je(oe[Qr]||Ne[Qr],[re.year||"year","year"],re[Di])}else Bs=Qr=>je(oe[Di]||Ne[Di],[re[Qr]||Qr,Qr],re[Di]);return{buttonName:Di,buttonClick:yr,buttonIcon:ro,buttonText:is,buttonHint:Bs}})),viewsWithButtons:Ve,hasTitle:$t}}class Og{constructor(t,e,s){this.type=t,this.getCurrentData=e,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(t){return this.getCurrentData().options[t]}}const Jh=su({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:r=>Array.isArray(r.events)?r.events:null,fetch(r,t){t({rawEvents:r.eventSource.meta})}}]}),ym=su({name:"func-event-source",eventSourceDefs:[{parseMeta:r=>"function"==typeof r.events?r.events:null,fetch(r,t,e){const{dateEnv:s}=r.context;!function pg(r,t,e){let s=!1,l=function(z){s||(s=!0,t(z))},f=function(z){s||(s=!0,e(z))},C=r(l,f);C&&"function"==typeof C.then&&C.then(l,f)}(r.eventSource.meta.bind(null,Wh(r.range,s)),f=>t({rawEvents:f}),e)}}]}),bm=su({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:ki,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:r=>!r.url||"json"!==r.format&&r.format?null:{url:r.url,format:"json",method:(r.method||"GET").toUpperCase(),extraParams:r.extraParams,startParam:r.startParam,endParam:r.endParam,timeZoneParam:r.timeZoneParam},fetch(r,t,e){const{meta:s}=r.eventSource,l=function jy(r,t,e){let f,C,z,W,{dateEnv:s,options:l}=e,re={};return f=r.startParam,null==f&&(f=l.startParam),C=r.endParam,null==C&&(C=l.endParam),z=r.timeZoneParam,null==z&&(z=l.timeZoneParam),W="function"==typeof r.extraParams?r.extraParams():r.extraParams||{},Object.assign(re,W),re[f]=s.formatIso(t.start),re[C]=s.formatIso(t.end),"local"!==s.timeZone&&(re[z]=s.timeZone),re}(s,r.range,r.context);(function Pd(r,t,e){const s={method:r=r.toUpperCase()};return"GET"===r?t+=(-1===t.indexOf("?")?"?":"&")+new URLSearchParams(e):(s.body=new URLSearchParams(e),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(t,s).then(l=>{if(l.ok)return l.json().then(f=>[f,l],()=>{throw new Od("Failure parsing JSON",l)});throw new Od("Request failed",l)})})(s.method,s.url,l).then(([f,C])=>{t({rawEvents:f,response:C})},e)}}]}),Uy=su({name:"simple-recurring-event",recurringTypes:[{parse(r,t){if(r.daysOfWeek||r.startTime||r.endTime||r.startRecur||r.endRecur){let s,e={daysOfWeek:r.daysOfWeek||null,startTime:r.startTime||null,endTime:r.endTime||null,startRecur:r.startRecur?t.createMarker(r.startRecur):null,endRecur:r.endRecur?t.createMarker(r.endRecur):null};return r.duration&&(s=r.duration),!s&&r.startTime&&r.endTime&&(s=function ti(r,t){return{years:r.years-t.years,months:r.months-t.months,days:r.days-t.days,milliseconds:r.milliseconds-t.milliseconds}}(r.endTime,r.startTime)),{allDayGuess:!r.startTime&&!r.endTime,duration:s,typeData:e}}return null},expand(r,t,e){let s=jl(t,{start:r.startRecur,end:r.endRecur});return s?function Wy(r,t,e,s){let l=r?Sl(r):null,f=Hr(e.start),C=e.end,z=[];for(;f<C;){let W;(!l||l[f.getUTCDay()])&&(W=t?s.add(f,t):f,z.push(W)),f=Hn(f,1)}return z}(r.daysOfWeek,r.startTime,s,e):[]}}],eventRefiners:{daysOfWeek:ki,startTime:Ge,endTime:Ge,duration:Ge,startRecur:ki,endRecur:ki}}),Qh=su({name:"change-handler",optionChangeHandlers:{events(r,t){xh([r],t)},eventSources:xh}});function xh(r,t){let e=th(t.getCurrentData().eventSources);if(1===e.length&&1===r.length&&Array.isArray(e[0]._raw)&&Array.isArray(r[0]))return void t.dispatch({type:"RESET_RAW_EVENTS",sourceId:e[0].sourceId,rawEvents:r[0]});let s=[];for(let l of r){let f=!1;for(let C=0;C<e.length;C+=1)if(e[C]._raw===l){e.splice(C,1),f=!0;break}f||s.push(l)}for(let l of e)t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:l.sourceId});for(let l of s)t.calendarApi.addEventSource(l)}const h_=[Jh,ym,bm,Uy,Qh,su({name:"misc",isLoadingFuncs:[r=>Dg(r.eventSources)],propSetHandlers:{dateProfile:function Rg(r,t){t.emitter.trigger("datesSet",Object.assign(Object.assign({},Wh(r.activeRange,t.dateEnv)),{view:t.viewApi}))},eventStore:function $y(r,t){let{emitter:e}=t;e.hasHandlers("eventsSet")&&e.trigger("eventsSet",iu(r,t))}}})];class Xy{constructor(t,e){this.runTaskOption=t,this.drainedOption=e,this.queue=[],this.delayedRunner=new pa(this.drain.bind(this))}request(t,e){this.queue.push(t),this.delayedRunner.request(e)}pause(t){this.delayedRunner.pause(t)}resume(t,e){this.delayedRunner.resume(t,e)}drain(){let{queue:t}=this;for(;t.length;){let s,e=[];for(;s=t.shift();)this.runTask(s),e.push(s);this.drained(e)}}runTask(t){this.runTaskOption&&this.runTaskOption(t)}drained(t){this.drainedOption&&this.drainedOption(t)}}function zg(r,t,e){let s;return s=/^(year|month)$/.test(r.currentRangeUnit)?r.currentRange:r.activeRange,e.formatRange(s.start,s.end,Gs(t.titleFormat||function Zy(r){let{currentRangeUnit:t}=r;if("year"===t)return{year:"numeric"};if("month"===t)return{year:"numeric",month:"long"};let e=cs(r.currentRange.start,r.currentRange.end);return null!==e&&e>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(r)),{isEndExclusive:r.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}class tf{constructor(t){this.computeCurrentViewData=tr(this._computeCurrentViewData),this.organizeRawLocales=tr(Zv),this.buildLocale=tr(kg),this.buildPluginHooks=function Ag(){let e,r=[],t=[];return(s,l)=>((!e||!Bi(s,r)||!Bi(l,t))&&(e=function mm(r,t){let e={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function l(f){for(let C of f){const z=C.name,W=e[z];void 0===W?(e[z]=C.id,l(C.deps),s=Fy(s,C)):W!==C.id&&console.warn(`Duplicate plugin '${z}'`)}}return r&&l(r),l(t),s}(s,l)),r=s,t=l,e)}(),this.buildDateEnv=tr(Hd),this.buildTheme=tr(p_),this.parseToolbars=tr(d_),this.buildViewSpecs=tr(Jv),this.buildDateProfileGenerator=pc(f_),this.buildViewApi=tr(xm),this.buildViewUiProps=pc(m_),this.buildEventUiBySource=tr(Fg,Ta),this.buildEventUiBases=tr(qy),this.parseContextBusinessHours=pc(Ky),this.buildTitle=tr(zg),this.emitter=new Hh,this.actionRunner=new Xy(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=Ye=>{this.actionRunner.request(Ye)},this.props=t,this.actionRunner.pause();let e={},s=this.computeOptionsData(t.optionOverrides,e,t.calendarApi),l=s.calendarOptions.initialView||s.pluginHooks.initialView,f=this.computeCurrentViewData(l,s,t.optionOverrides,e);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(f.options);let C=function $l(r,t){let e=r.initialDate;return null!=e?t.createMarker(e):Aa(r.now,t)}(s.calendarOptions,s.dateEnv),z=f.dateProfileGenerator.build(C);Zs(z.activeRange,C)||(C=z.currentRange.start);let W={dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let Ye of s.pluginHooks.contextInit)Ye(W);let re=function e_(r,t,e){let s=t?t.activeRange:null;return _m({},function a_(r,t){let e=gc(t),s=[].concat(r.eventSources||[]),l=[];r.initialEvents&&s.unshift(r.initialEvents),r.events&&s.unshift(r.events);for(let f of s){let C=Nh(f,t,e);C&&l.push(C)}return l}(r,e),s,e)}(s.calendarOptions,z,W),oe={dynamicOptionOverrides:e,currentViewType:l,currentDate:C,dateProfile:z,businessHours:this.parseContextBusinessHours(W),eventSources:re,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(W).selectionConfig},Ne=Object.assign(Object.assign({},W),oe);for(let Ye of s.pluginHooks.reducers)Object.assign(oe,Ye(null,null,Ne));ld(oe,W)&&this.emitter.trigger("loading",!0),this.state=oe,this.updateData(),this.actionRunner.resume()}resetOptions(t,e){let{props:s}=this;void 0===e?s.optionOverrides=t:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),t),this.optionsForRefining.push(...e)),(void 0===e||e.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(t){let{props:e,state:s,emitter:l}=this,f=function Ny(r,t){return"SET_OPTION"===t.type?Object.assign(Object.assign({},r),{[t.optionName]:t.rawOptionValue}):r}(s.dynamicOptionOverrides,t),C=this.computeOptionsData(e.optionOverrides,f,e.calendarApi),z=function vm(r,t){return"CHANGE_VIEW_TYPE"===t.type&&(r=t.viewType),r}(s.currentViewType,t),W=this.computeCurrentViewData(z,C,e.optionOverrides,f);e.calendarApi.currentDataManager=this,l.setThisContext(e.calendarApi),l.setOptions(W.options);let re={dateEnv:C.dateEnv,options:C.calendarOptions,pluginHooks:C.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:l,getCurrentData:this.getCurrentData},{currentDate:oe,dateProfile:Ne}=s;this.data&&this.data.dateProfileGenerator!==W.dateProfileGenerator&&(Ne=W.dateProfileGenerator.build(oe)),oe=function oh(r,t){return"CHANGE_DATE"===t.type?t.dateMarker:r}(oe,t),Ne=function Qv(r,t,e,s){let l;switch(t.type){case"CHANGE_VIEW_TYPE":return s.build(t.dateMarker||e);case"CHANGE_DATE":return s.build(t.dateMarker);case"PREV":if(l=s.buildPrev(r,e),l.isValid)return l;break;case"NEXT":if(l=s.buildNext(r,e),l.isValid)return l}return r}(Ne,t,oe,W.dateProfileGenerator),("PREV"===t.type||"NEXT"===t.type||!Zs(Ne.currentRange,oe))&&(oe=Ne.currentRange.start);let Ye=function Yy(r,t,e,s){let l=e?e.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return _m(r,t.sources,l,s);case"REMOVE_EVENT_SOURCE":return function i_(r,t){return qc(r,e=>e.sourceId!==t)}(r,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return e?n_(r,l,s):r;case"FETCH_EVENT_SOURCES":return ou(r,t.sourceIds?Sl(t.sourceIds):Ig(r,s),l,t.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function o_(r,t,e,s){let l=r[t];return l&&e===l.latestFetchId?Object.assign(Object.assign({},r),{[t]:Object.assign(Object.assign({},l),{isFetching:!1,fetchRange:s})}):r}(r,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return r}}(s.eventSources,t,Ne,re),Ve=function vc(r,t,e,s,l){switch(t.type){case"RECEIVE_EVENTS":return function kl(r,t,e,s,l,f){if(t&&e===t.latestFetchId){let C=eu(Ip(l,t,f),t,f);return s&&(C=Ku(C,s,f)),Fh(Yh(r,t.sourceId),C)}return r}(r,e[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,l);case"RESET_RAW_EVENTS":return function Ko(r,t,e,s,l){const{defIdMap:f,instanceIdMap:C}=function Lp(r){const{defs:t,instances:e}=r,s={},l={};for(let f in t){const C=t[f],{publicId:z}=C;z&&(s[z]=f)}for(let f in e){const z=t[e[f].defId],{publicId:W}=z;W&&(l[W]=f)}return{defIdMap:s,instanceIdMap:l}}(r);return Ku(eu(Ip(e,t,l),t,l,!1,f,C),s,l)}(r,e[t.sourceId],t.rawEvents,s.activeRange,l);case"ADD_EVENTS":return function Uf(r,t,e,s){return e&&(t=Ku(t,e,s)),Fh(r,t)}(r,t.eventStore,s?s.activeRange:null,l);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Fh(r,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?Ku(r,s.activeRange,l):r;case"REMOVE_EVENTS":return function jf(r,t){let{defs:e,instances:s}=r,l={},f={};for(let C in e)t.defs[C]||(l[C]=e[C]);for(let C in s)!t.instances[C]&&l[s[C].defId]&&(f[C]=s[C]);return{defs:l,instances:f}}(r,t.eventStore);case"REMOVE_EVENT_SOURCE":return Yh(r,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return tu(r,f=>!f.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return r}}(s.eventStore,t,Ye,Ne,re),Ut=Dg(Ye)&&!W.options.progressiveEventRendering&&s.renderableEventStore||Ve,{eventUiSingleBase:li,selectionConfig:Di}=this.buildViewUiProps(re),Sn=this.buildEventUiBySource(Ye),yr={dynamicOptionOverrides:f,currentViewType:z,currentDate:oe,dateProfile:Ne,eventSources:Ye,eventStore:Ve,renderableEventStore:Ut,selectionConfig:Di,eventUiBases:this.buildEventUiBases(Ut.defs,li,Sn),businessHours:this.parseContextBusinessHours(re),dateSelection:Hy(s.dateSelection,t),eventSelection:c_(s.eventSelection,t),eventDrag:u_(s.eventDrag,t),eventResize:Qp(s.eventResize,t)},ro=Object.assign(Object.assign({},re),yr);for(let Qr of C.pluginHooks.reducers)Object.assign(yr,Qr(s,t,ro));let is=ld(s,re),Bs=ld(yr,re);!is&&Bs?l.trigger("loading",!0):is&&!Bs&&l.trigger("loading",!1),this.state=yr,e.onAction&&e.onAction(t)}updateData(){let{props:t,state:e}=this,s=this.data,l=this.computeOptionsData(t.optionOverrides,e.dynamicOptionOverrides,t.calendarApi),f=this.computeCurrentViewData(e.currentViewType,l,t.optionOverrides,e.dynamicOptionOverrides),C=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(e.dateProfile,f.options,l.dateEnv),calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l),f),e),z=l.pluginHooks.optionChangeHandlers,W=s&&s.calendarOptions,re=l.calendarOptions;if(W&&W!==re){W.timeZone!==re.timeZone&&(e.eventSources=C.eventSources=function t_(r,t,e){let s=t?t.activeRange:null;return ou(r,Ig(r,e),s,!0,e)}(C.eventSources,e.dateProfile,C),e.eventStore=C.eventStore=Ju(C.eventStore,s.dateEnv,C.dateEnv),e.renderableEventStore=C.renderableEventStore=Ju(C.renderableEventStore,s.dateEnv,C.dateEnv));for(let oe in z)(-1!==this.optionsForHandling.indexOf(oe)||W[oe]!==re[oe])&&z[oe](re[oe],C)}this.optionsForHandling=[],t.onData&&t.onData(C)}computeOptionsData(t,e,s){if(!this.optionsForRefining.length&&t===this.stableOptionOverrides&&e===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:l,pluginHooks:f,localeDefaults:C,availableLocaleData:z,extra:W}=this.processRawCalendarOptions(t,e);cd(W);let re=this.buildDateEnv(l.timeZone,l.locale,l.weekNumberCalculation,l.firstDay,l.weekText,f,z,l.defaultRangeSeparator),oe=this.buildViewSpecs(f.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,C),Ne=this.buildTheme(l,f),Ye=this.parseToolbars(l,this.stableOptionOverrides,Ne,oe,s);return this.stableCalendarOptionsData={calendarOptions:l,pluginHooks:f,dateEnv:re,viewSpecs:oe,theme:Ne,toolbarConfig:Ye,localeDefaults:C,availableRawLocales:z.map}}processRawCalendarOptions(t,e){let{locales:s,locale:l}=Hs([Xu,t,e]),f=this.organizeRawLocales(s),z=this.buildLocale(l||f.defaultCode,f.map).options,W=this.buildPluginHooks(t.plugins||[],h_),re=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Df),Ph),Zc),W.listenerRefiners),W.optionRefiners),oe={},Ne=Hs([Xu,z,t,e]),Ye={},Ve=this.currentCalendarOptionsInput,$t=this.currentCalendarOptionsRefined,Ut=!1;for(let li in Ne)-1===this.optionsForRefining.indexOf(li)&&(Ne[li]===Ve[li]||Zu[li]&&li in Ve&&Zu[li](Ve[li],Ne[li]))?Ye[li]=$t[li]:re[li]?(Ye[li]=re[li](Ne[li]),Ut=!0):oe[li]=Ve[li];return Ut&&(this.currentCalendarOptionsInput=Ne,this.currentCalendarOptionsRefined=Ye,this.stableOptionOverrides=t,this.stableDynamicOptionOverrides=e),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:W,availableLocaleData:f,localeDefaults:z,extra:oe}}_computeCurrentViewData(t,e,s,l){let f=e.viewSpecs[t];if(!f)throw new Error(`viewType "${t}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:C,extra:z}=this.processRawViewOptions(f,e.pluginHooks,e.localeDefaults,s,l);return cd(z),{viewSpec:f,options:C,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:f.optionDefaults.dateProfileGeneratorClass,duration:f.duration,durationUnit:f.durationUnit,usesMinMaxTime:f.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:C.slotMinTime,slotMaxTime:C.slotMaxTime,showNonCurrentDates:C.showNonCurrentDates,dayCount:C.dayCount,dateAlignment:C.dateAlignment,dateIncrement:C.dateIncrement,hiddenDays:C.hiddenDays,weekends:C.weekends,nowInput:C.now,validRangeInput:C.validRange,visibleRangeInput:C.visibleRange,fixedWeekCount:C.fixedWeekCount}),viewApi:this.buildViewApi(t,this.getCurrentData,e.dateEnv)}}processRawViewOptions(t,e,s,l,f){let C=Hs([Xu,t.optionDefaults,s,l,t.optionOverrides,f]),z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Df),Ph),Zc),If),e.listenerRefiners),e.optionRefiners),W={},re=this.currentViewOptionsInput,oe=this.currentViewOptionsRefined,Ne=!1,Ye={};for(let Ve in C)C[Ve]===re[Ve]||Zu[Ve]&&Zu[Ve](C[Ve],re[Ve])?W[Ve]=oe[Ve]:(C[Ve]===this.currentCalendarOptionsInput[Ve]||Zu[Ve]&&Zu[Ve](C[Ve],this.currentCalendarOptionsInput[Ve])?Ve in this.currentCalendarOptionsRefined&&(W[Ve]=this.currentCalendarOptionsRefined[Ve]):z[Ve]?W[Ve]=z[Ve](C[Ve]):Ye[Ve]=C[Ve],Ne=!0);return Ne&&(this.currentViewOptionsInput=C,this.currentViewOptionsRefined=W),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:Ye}}}function Hd(r,t,e,s,l,f,C,z){let W=kg(t||C.defaultCode,C.map);return new nh({calendarSystem:"gregory",timeZone:r,namedTimeZoneImpl:f.namedTimeZonedImpl,locale:W,weekNumberCalculation:e,firstDay:s,weekText:l,cmdFormatter:f.cmdFormatter,defaultSeparator:z})}function p_(r,t){return new(t.themeClasses[r.themeSystem]||Yd)(r)}function f_(r){return new(r.dateProfileGeneratorClass||Yf)(r)}function xm(r,t,e){return new Og(r,t,e)}function Fg(r){return mc(r,t=>t.ui)}function qy(r,t,e){let s={"":t};for(let l in r){let f=r[l];f.sourceId&&e[f.sourceId]&&(s[l]=e[f.sourceId])}return s}function m_(r){let{options:t}=r;return{eventUiSingleBase:Au({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:"boolean"==typeof t.eventOverlap?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},r),selectionConfig:Au({constraint:t.selectConstraint,overlap:"boolean"==typeof t.selectOverlap?t.selectOverlap:void 0,allow:t.selectAllow},r)}}function ld(r,t){for(let e of t.pluginHooks.isLoadingFuncs)if(e(r))return!0;return!1}function Ky(r){return function Du(r,t){return eu(function Wa(r){let t;return t=!0===r?[{}]:Array.isArray(r)?r.filter(e=>e.daysOfWeek):"object"==typeof r&&r?[r]:[],t=t.map(e=>Object.assign(Object.assign({},ug),e)),t}(r),null,t)}(r.options.businessHours,r)}function cd(r,t){for(let e in r)console.warn(`Unknown option '${e}'`+(t?` for view '${t}'`:""))}class Jy extends pr{render(){return Ot("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(e=>this.renderWidgetGroup(e)))}renderWidgetGroup(t){let{props:e}=this,{theme:s}=this.context,l=[],f=!0;for(let C of t){let{buttonName:z,buttonClick:W,buttonText:re,buttonIcon:oe,buttonHint:Ne}=C;if("title"===z)f=!1,l.push(Ot("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{let Ye=z===e.activeButton,Ve=!e.isTodayEnabled&&"today"===z||!e.isPrevEnabled&&"prev"===z||!e.isNextEnabled&&"next"===z,$t=[`fc-${z}-button`,s.getClass("button")];Ye&&$t.push(s.getClass("buttonActive")),l.push(Ot("button",{type:"button",title:"function"==typeof Ne?Ne(e.navUnit):Ne,disabled:Ve,"aria-pressed":Ye,className:$t.join(" "),onClick:W},re||(oe?Ot("span",{className:oe,role:"img"}):"")))}}return l.length>1?Ot("div",{className:f&&s.getClass("buttonGroup")||""},...l):l[0]}}class ep extends pr{render(){let l,f,{model:t,extraClassName:e}=this.props,s=!1,C=t.sectionWidgets,z=C.center;return C.left?(s=!0,l=C.left):l=C.start,C.right?(s=!0,f=C.right):f=C.end,Ot("div",{className:[e||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",l||[]),this.renderSection("center",z||[]),this.renderSection("end",f||[]))}renderSection(t,e){let{props:s}=this;return Ot(Jy,{key:t,widgetGroups:e,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}}class nf extends pr{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=t=>{this.el=t,Yo(this.props.elRef,t),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:t,state:e}=this,{aspectRatio:s}=t,f="",C="";return s?null!==e.availableWidth?f=e.availableWidth/s:C=1/s*100+"%":f=t.height||"",Ot("div",{"aria-labelledby":t.labeledById,ref:this.handleEl,className:["fc-view-harness",s||t.liquid||t.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:f,paddingBottom:C}},t.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class rf extends Rd{constructor(t){super(t),this.handleSegClick=(e,s)=>{let{component:l}=this,{context:f}=l,C=Fc(s);if(C&&l.isValidSegDownEl(e.target)){let z=ps(e.target,".fc-event-forced-url"),W=z?z.querySelector("a[href]").href:"";f.emitter.trigger("eventClick",{el:s,event:new io(l.context,C.eventRange.def,C.eventRange.instance),jsEvent:e,view:f.viewApi}),W&&!e.defaultPrevented&&(window.location.href=W)}},this.destroy=Ih(t.el,"click",".fc-event",this.handleSegClick)}}class sf extends Rd{constructor(t){super(t),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,s)=>{Fc(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",e,s))},this.handleSegLeave=(e,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,s))},this.removeHoverListeners=function pp(r,t,e,s){let l;return Ih(r,"mouseover",t,(f,C)=>{if(C!==l){l=C,e(f,C);let z=W=>{l=null,s(W,C),C.removeEventListener("mouseleave",z)};C.addEventListener("mouseleave",z)}})}(t.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(t,e,s){let{component:l}=this,{context:f}=l,C=Fc(s);(!e||l.isValidSegDownEl(e.target))&&f.emitter.trigger(t,{el:s,event:new io(f,C.eventRange.def,C.eventRange.instance),jsEvent:e,view:f.viewApi})}}class wm extends xd{constructor(){super(...arguments),this.buildViewContext=tr(cl),this.buildViewPropTransformers=tr(e0),this.buildToolbarProps=tr(Qy),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:Oc()},this.registerInteractiveComponent=(t,e)=>{let s=function fg(r,t){return{component:r,el:t.el,useEventCenter:null==t.useEventCenter||t.useEventCenter,isHitComboAllowed:t.isHitComboAllowed||null}}(t,e),C=[rf,sf].concat(this.props.pluginHooks.componentInteractions).map(z=>new z(s));this.interactionsStore[t.uid]=C,ph[t.uid]=s},this.unregisterInteractiveComponent=t=>{let e=this.interactionsStore[t.uid];if(e){for(let s of e)s.destroy();delete this.interactionsStore[t.uid]}delete ph[t.uid]},this.resizeRunner=new pa(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=t=>{let{options:e}=this.props;e.handleWindowResize&&t.target===window&&this.resizeRunner.request(e.windowResizeDelay)}}render(){let z,{props:t}=this,{toolbarConfig:e,options:s}=t,l=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,Aa(t.options.now,t.dateEnv),t.viewTitle),f=!1,C="";t.isHeightAuto||t.forPrint?C="":null!=s.height?f=!0:null!=s.contentHeight?C=s.contentHeight:z=Math.max(s.aspectRatio,.5);let W=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),re=e.header&&e.header.hasTitle?this.state.viewLabelId:void 0;return Ot(js.Provider,{value:W},e.header&&Ot(ep,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:e.header,titleId:re},l)),Ot(nf,{liquid:f,height:C,aspectRatio:z,labeledById:re},this.renderView(t),this.buildAppendContent()),e.footer&&Ot(ep,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:e.footer,titleId:""},l)))}componentDidMount(){let{props:t}=this;this.calendarInteractions=t.pluginHooks.calendarInteractions.map(s=>new s(t)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:e}=t.pluginHooks;for(let s in e)e[s](t[s],t)}componentDidUpdate(t){let{props:e}=this,{propSetHandlers:s}=e.pluginHooks;for(let l in s)e[l]!==t[l]&&s[l](e[l],e)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let t of this.calendarInteractions)t.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:t}=this;return Ot(zn,{},...t.pluginHooks.viewContainerAppends.map(s=>s(t)))}renderView(t){let{pluginHooks:e}=t,{viewSpec:s}=t,l={dateProfile:t.dateProfile,businessHours:t.businessHours,eventStore:t.renderableEventStore,eventUiBases:t.eventUiBases,dateSelection:t.dateSelection,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,isHeightAuto:t.isHeightAuto,forPrint:t.forPrint},f=this.buildViewPropTransformers(e.viewPropsTransformers);for(let z of f)Object.assign(l,z.transform(l,t));return Ot(s.component,Object.assign({},l))}}function Qy(r,t,e,s,l,f){let C=e.build(l,void 0,!1),z=e.buildPrev(t,s,!1),W=e.buildNext(t,s,!1);return{title:f,activeButton:r.type,navUnit:r.singleUnit,isTodayEnabled:C.isValid&&!Zs(t.currentRange,l),isPrevEnabled:z.isValid,isNextEnabled:W.isValid}}function e0(r){return r.map(t=>new t)}class tp extends im{constructor(t,e={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;Mo(()=>{Eo(Ot(tm,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(l,f,C,z)=>(this.setClassNames(l),this.setHeight(f),Ot(Tu.Provider,{value:this.customContentRenderId},Ot(wm,Object.assign({isHeightAuto:C,forPrint:z},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Eo(null,this.el),this.setClassNames([]),this.setHeight(""))},function Ah(r){r.isConnected&&r.getRootNode&&Zd(r.getRootNode())}(t),this.el=t,this.renderRunner=new pa(this.handleRenderRequest),new tf({optionOverrides:e,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let t=this.isRendering;t?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),t&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Mo(()=>{super.updateSize()})}batchRendering(t){this.renderRunner.pause("batchRendering"),t(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(t,e){this.currentDataManager.resetOptions(t,e)}setClassNames(t){if(!Bi(t,this.currentClassNames)){let{classList:e}=this.el;for(let s of this.currentClassNames)e.remove(s);for(let s of t)e.add(s);this.currentClassNames=t}}setHeight(t){vn(this.el,"height",t)}}Z.touchMouseIgnoreWait=500;let Cm=0,Em=0,Sm=!1;class Yg{constructor(t){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function g_(r){return 0===r.button&&!r.ctrlKey}(e)&&this.tryStart(e)){let s=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let s=this.createEventFromMouse(e);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let s=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let l=e.target;this.shouldIgnoreMove||l.addEventListener("touchmove",this.handleTouchMove),l.addEventListener("touchend",this.handleTouchEnd),l.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let s=this.createEventFromTouch(e);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=e=>{if(this.isDragging){let s=e.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,function n0(){Cm+=1,setTimeout(()=>{Cm-=1},Z.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let s=window.pageXOffset-this.prevScrollX+this.prevPageX,l=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:l,deltaX:s-this.origPageX,deltaY:l-this.origPageY})}},this.containerEl=t,this.emitter=new Hh,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function r0(){Em+=1,1===Em&&window.addEventListener("touchmove",of,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function Tm(){Em-=1,Em||window.removeEventListener("touchmove",of,{passive:!1})}()}tryStart(t){let e=this.querySubjectEl(t);return!(!e||this.handleSelector&&!ps(t.target,this.handleSelector)||(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){Sm=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(t){return this.selector?ps(t.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Cm||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Sm=!0)}initScrollWatch(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(t,e){let s=0,l=0;return e?(this.origPageX=t.pageX,this.origPageY=t.pageY):(s=t.pageX-this.origPageX,l=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:s,deltaY:l}}createEventFromTouch(t,e){let l,f,s=t.touches,C=0,z=0;return s&&s.length?(l=s[0].pageX,f=s[0].pageY):(l=t.pageX,f=t.pageY),e?(this.origPageX=l,this.origPageY=f):(C=l-this.origPageX,z=f-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:l,pageY:f,deltaX:C,deltaY:z}}}function of(r){Sm&&r.preventDefault()}class km{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(t,e,s){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.pageXOffset,this.origScreenY=s-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(t,e){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=e-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)}stop(t,e){let s=()=>{this.cleanup(),e()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(t,e){let s=this.mirrorEl,l=this.sourceEl.getBoundingClientRect();s.style.transition="top "+e+"ms,left "+e+"ms",Cl(s,{left:l.left,top:l.top}),function fd(r,t){let e=s=>{t(s),ja.forEach(l=>{r.removeEventListener(l,e)})};ja.forEach(s=>{r.addEventListener(s,e)})}(s,()=>{s.style.transition="",t()})}cleanup(){this.mirrorEl&&(uc(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Cl(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let t=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.style.userSelect="none",e.style.webkitUserSelect="none",e.classList.add("fc-event-dragging"),Cl(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e}}class v_ extends Hp{constructor(t,e){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=t,this.doesListening=e,this.scrollTop=this.origScrollTop=t.getScrollTop(),this.scrollLeft=this.origScrollLeft=t.getScrollLeft(),this.scrollWidth=t.getScrollWidth(),this.scrollHeight=t.getScrollHeight(),this.clientWidth=t.getClientWidth(),this.clientHeight=t.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(t){this.scrollController.setScrollTop(t),this.doesListening||(this.scrollTop=Math.max(Math.min(t,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(t){this.scrollController.setScrollLeft(t),this.doesListening||(this.scrollLeft=Math.max(Math.min(t,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class Am extends v_{constructor(t,e){super(new _g(t),e)}getEventTarget(){return this.scrollController.el}computeClientRect(){return sm(this.scrollController.el)}}class Hg extends v_{constructor(t){super(new Vp,t)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const ud="function"==typeof performance?performance.now:Date.now;class s0{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let t=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(t){let e=ud();this.handleSide(t,(e-this.msSinceRequest)/1e3),this.requestAnimation(e)}else this.isAnimating=!1}}}start(t,e,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,e))}handleMove(t,e){if(this.isEnabled){let s=t-window.pageXOffset,l=e-window.pageYOffset,f=null===this.pointerScreenY?0:l-this.pointerScreenY,C=null===this.pointerScreenX?0:s-this.pointerScreenX;f<0?this.everMovedUp=!0:f>0&&(this.everMovedDown=!0),C<0?this.everMovedLeft=!0:C>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=l,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(ud()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let t of this.scrollCaches)t.destroy();this.scrollCaches=null}}requestAnimation(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)}handleSide(t,e){let{scrollCache:s}=t,{edgeThreshold:l}=this,f=l-t.distance,C=f*f/(l*l)*this.maxVelocity*e,z=1;switch(t.name){case"left":z=-1;case"right":s.setScrollLeft(s.getScrollLeft()+C*z);break;case"top":z=-1;case"bottom":s.setScrollTop(s.getScrollTop()+C*z)}}computeBestEdge(t,e){let{edgeThreshold:s}=this,l=null,f=this.scrollCaches||[];for(let C of f){let z=C.clientRect,W=t-z.left,re=z.right-t,oe=e-z.top,Ne=z.bottom-e;W>=0&&re>=0&&oe>=0&&Ne>=0&&(oe<=s&&this.everMovedUp&&C.canScrollUp()&&(!l||l.distance>oe)&&(l={scrollCache:C,name:"top",distance:oe}),Ne<=s&&this.everMovedDown&&C.canScrollDown()&&(!l||l.distance>Ne)&&(l={scrollCache:C,name:"bottom",distance:Ne}),W<=s&&this.everMovedLeft&&C.canScrollLeft()&&(!l||l.distance>W)&&(l={scrollCache:C,name:"left",distance:W}),re<=s&&this.everMovedRight&&C.canScrollRight()&&(!l||l.distance>re)&&(l={scrollCache:C,name:"right",distance:re}))}return l}buildCaches(t){return this.queryScrollEls(t).map(e=>e===window?new Hg(!1):new Am(e,!1))}queryScrollEls(t){let e=[];for(let s of this.scrollQuery)"object"==typeof s?e.push(s):e.push(...Array.prototype.slice.call(t.getRootNode().querySelectorAll(s)));return e}}class Vd extends H{constructor(t,e){super(t),this.containerEl=t,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=l=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,function T(r){r.style.userSelect="none",r.style.webkitUserSelect="none",r.addEventListener("selectstart",bu)}(document.body),function B(r){r.addEventListener("contextmenu",bu)}(document.body),l.isTouch||l.origEvent.preventDefault(),this.emitter.trigger("pointerdown",l),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(l.subjectEl,l.pageX,l.pageY),this.startDelay(l),this.minDistance||this.handleDistanceSurpassed(l)))},this.onPointerMove=l=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",l),!this.isDistanceSurpassed){let C,f=this.minDistance,{deltaX:z,deltaY:W}=l;C=z*z+W*W,C>=f*f&&this.handleDistanceSurpassed(l)}this.isDragging&&("scroll"!==l.origEvent.type&&(this.mirror.handleMove(l.pageX,l.pageY),this.autoScroller.handleMove(l.pageX,l.pageY)),this.emitter.trigger("dragmove",l))}},this.onPointerUp=l=>{this.isInteracting&&(this.isInteracting=!1,function P(r){r.style.userSelect="",r.style.webkitUserSelect="",r.removeEventListener("selectstart",bu)}(document.body),function X(r){r.removeEventListener("contextmenu",bu)}(document.body),this.emitter.trigger("pointerup",l),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(l)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new Yg(t);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),e&&(s.selector=e),this.mirror=new km,this.autoScroller=new s0}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(t){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(t)},this.delay):this.handleDelayEnd(t)}handleDelayEnd(t){this.isDelayEnded=!0,this.tryStartDrag(t)}handleDistanceSurpassed(t){this.isDistanceSurpassed=!0,this.tryStartDrag(t)}tryStartDrag(t){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(t.pageX,t.pageY,this.containerEl),this.emitter.trigger("dragstart",t),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(t){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,t))}stopDrag(t){this.isDragging=!1,this.emitter.trigger("dragend",t)}setIgnoreMove(t){this.pointer.shouldIgnoreMove=t}setMirrorIsVisible(t){this.mirror.setIsVisible(t)}setMirrorNeedsRevert(t){this.mirrorNeedsRevert=t}setAutoScrollEnabled(t){this.autoScroller.isEnabled=t}}class __{constructor(t){this.origRect=Zh(t),this.scrollCaches=om(t).map(e=>new Am(e,!0))}destroy(){for(let t of this.scrollCaches)t.destroy()}computeLeft(){let t=this.origRect.left;for(let e of this.scrollCaches)t+=e.origScrollLeft-e.getScrollLeft();return t}computeTop(){let t=this.origRect.top;for(let e of this.scrollCaches)t+=e.origScrollTop-e.getScrollTop();return t}isWithinClipping(t,e){let s={left:t,top:e};for(let l of this.scrollCaches)if(!Mm(l.getEventTarget())&&!mg(s,l.clientRect))return!1;return!0}}function Mm(r){let t=r.tagName;return"HTML"===t||"BODY"===t}class af{constructor(t,e){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:l}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(l.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):l.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=e,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new Hh}processFirstCoord(t){let f,e={left:t.pageX,top:t.pageY},s=e,l=t.subjectEl;l instanceof HTMLElement&&(f=Zh(l),s=function zd(r,t){return{left:Math.min(Math.max(r.left,t.left),t.right),top:Math.min(Math.max(r.top,t.top),t.bottom)}}(s,f));let C=this.initialHit=this.queryHitForOffset(s.left,s.top);if(C){if(this.useSubjectCenter&&f){let z=$h(f,C.rect);z&&(s=function gg(r){return{left:(r.left+r.right)/2,top:(r.top+r.bottom)/2}}(z))}this.coordAdjust=function Rs(r,t){return{left:r.left-t.left,top:r.top-t.top}}(s,e)}else this.coordAdjust={left:0,top:0}}handleMove(t,e){let s=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(e||!Dm(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,t))}prepareHits(){this.offsetTrackers=mc(this.droppableStore,t=>(t.component.prepareHits(),new __(t.el)))}releaseHits(){let{offsetTrackers:t}=this;for(let e in t)t[e].destroy();this.offsetTrackers={}}queryHitForOffset(t,e){let{droppableStore:s,offsetTrackers:l}=this,f=null;for(let C in s){let z=s[C].component,W=l[C];if(W&&W.isWithinClipping(t,e)){let re=W.computeLeft(),oe=W.computeTop(),Ne=t-re,Ye=e-oe,{origRect:Ve}=W,$t=Ve.right-Ve.left,Ut=Ve.bottom-Ve.top;if(Ne>=0&&Ne<$t&&Ye>=0&&Ye<Ut){let li=z.queryHit(Ne,Ye,$t,Ut);li&&qu(li.dateProfile.activeRange,li.dateSpan.range)&&(!f||li.layer>f.layer)&&(li.componentId=C,li.context=z.context,li.rect.left+=re,li.rect.right+=re,li.rect.top+=oe,li.rect.bottom+=oe,f=li)}}}return f}}function Dm(r,t){return!r&&!t||!!r==!!t&&function nu(r,t){return function Cp(r,t){return(null===r.start?null:r.start.valueOf())===(null===t.start?null:t.start.valueOf())&&(null===r.end?null:r.end.valueOf())===(null===t.end?null:t.end.valueOf())}(r.range,t.range)&&r.allDay===t.allDay&&function $a(r,t){for(let e in t)if("range"!==e&&"allDay"!==e&&r[e]!==t[e])return!1;for(let e in r)if(!(e in t))return!1;return!0}(r,t)}(r.dateSpan,t.dateSpan)}function Vg(r,t){let e={};for(let s of t.pluginHooks.datePointTransforms)Object.assign(e,s(r,t));return Object.assign(e,function o0(r,t){return{date:t.toDate(r.range.start),dateStr:t.formatIso(r.range.start,{omitTime:r.allDay}),allDay:r.allDay}}(r,t.dateEnv)),e}let y_=(()=>{class r extends Rd{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=z=>{let W=z.origEvent.target,{component:re,dragging:oe}=this,{mirror:Ne}=oe,{options:Ye}=re.context,Ve=re.context;this.subjectEl=z.subjectEl;let $t=this.subjectSeg=Fc(z.subjectEl),li=(this.eventRange=$t.eventRange).instance.instanceId;this.relevantEvents=zh(Ve.getCurrentData().eventStore,li),oe.minDistance=z.isTouch?0:Ye.eventDragMinDistance,oe.delay=z.isTouch&&li!==re.props.eventSelection?function c0(r){let{options:t}=r.context,e=t.eventLongPressDelay;return null==e&&(e=t.longPressDelay),e}(re):null,Ne.parentNode=Ye.fixedMirrorParent?Ye.fixedMirrorParent:ps(W,".fc"),Ne.revertDuration=Ye.dragRevertDuration;let Di=re.isValidSegDownEl(W)&&!ps(W,".fc-event-resizer");oe.setIgnoreMove(!Di),this.isDragging=Di&&z.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=z=>{let W=this.component.context,re=this.eventRange,oe=re.instance.instanceId;z.isTouch?oe!==this.component.props.eventSelection&&W.dispatch({type:"SELECT_EVENT",eventInstanceId:oe}):W.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(W.calendarApi.unselect(z),W.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new io(W,re.def,re.instance),jsEvent:z.origEvent,view:W.viewApi}))},this.handleHitUpdate=(z,W)=>{if(!this.isDragging)return;let re=this.relevantEvents,oe=this.hitDragging.initialHit,Ne=this.component.context,Ye=null,Ve=null,$t=null,Ut=!1,li={affectedEvents:re,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(z){Ye=z.context;let Di=Ye.options;Ne===Ye||Di.editable&&Di.droppable?(Ve=function b_(r,t,e){let s=r.dateSpan,l=t.dateSpan,f=s.range.start,C=l.range.start,z={};s.allDay!==l.allDay&&(z.allDay=l.allDay,z.hasEnd=t.context.options.allDayMaintainDuration,l.allDay&&(f=Hr(f)));let W=Wl(f,C,r.context.dateEnv,r.componentId===t.componentId?r.largeUnit:null);W.milliseconds&&(z.allDay=!1);let re={datesDelta:W,standardProps:z};for(let oe of e)oe(re,r,t);return re}(oe,z,Ye.getCurrentData().pluginHooks.eventDragMutationMassagers),Ve&&($t=Dd(re,Ye.getCurrentData().eventUiBases,Ve,Ye),li.mutatedEvents=$t,xg(li,z.dateProfile,Ye)||(Ut=!0,Ve=null,$t=null,li.mutatedEvents={defs:{},instances:{}}))):Ye=null}this.displayDrag(Ye,li),Ut?d():g(),W||(Ne===Ye&&Dm(oe,z)&&(Ve=null),this.dragging.setMirrorNeedsRevert(!Ve),this.dragging.setMirrorIsVisible(!z||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=Ye,this.validMutation=Ve,this.mutatedRelevantEvents=$t)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=z=>{if(this.isDragging){let W=this.component.context,re=W.viewApi,{receivingContext:oe,validMutation:Ne}=this,Ye=this.eventRange.def,Ve=this.eventRange.instance,$t=new io(W,Ye,Ve),Ut=this.relevantEvents,li=this.mutatedRelevantEvents,{finalHit:Di}=this.hitDragging;if(this.clearDrag(),W.emitter.trigger("eventDragStop",{el:this.subjectEl,event:$t,jsEvent:z.origEvent,view:re}),Ne){if(oe===W){let Sn=new io(W,li.defs[Ye.defId],Ve?li.instances[Ve.instanceId]:null);W.dispatch({type:"MERGE_EVENTS",eventStore:li});let hr={oldEvent:$t,event:Sn,relatedEvents:iu(li,W,Ve),revert(){W.dispatch({type:"MERGE_EVENTS",eventStore:Ut})}},yr={};for(let ro of W.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(yr,ro(Ne,W));W.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},hr),yr),{el:z.subjectEl,delta:Ne.datesDelta,jsEvent:z.origEvent,view:re})),W.emitter.trigger("eventChange",hr)}else if(oe){let Sn={event:$t,relatedEvents:iu(Ut,W,Ve),revert(){W.dispatch({type:"MERGE_EVENTS",eventStore:Ut})}};W.emitter.trigger("eventLeave",Object.assign(Object.assign({},Sn),{draggedEl:z.subjectEl,view:re})),W.dispatch({type:"REMOVE_EVENTS",eventStore:Ut}),W.emitter.trigger("eventRemove",Sn);let yr=li.instances[Ve.instanceId],ro=new io(oe,li.defs[Ye.defId],yr);oe.dispatch({type:"MERGE_EVENTS",eventStore:li});let is={event:ro,relatedEvents:iu(li,oe,yr),revert(){oe.dispatch({type:"REMOVE_EVENTS",eventStore:li})}};oe.emitter.trigger("eventAdd",is),z.isTouch&&oe.dispatch({type:"SELECT_EVENT",eventInstanceId:Ve.instanceId}),oe.emitter.trigger("drop",Object.assign(Object.assign({},Vg(Di.dateSpan,oe)),{draggedEl:z.subjectEl,jsEvent:z.origEvent,view:Di.context.viewApi})),oe.emitter.trigger("eventReceive",Object.assign(Object.assign({},is),{draggedEl:z.subjectEl,view:Di.context.viewApi}))}}else W.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:s}=this,{options:l}=s.context,f=this.dragging=new Vd(e.el);f.pointer.selector=r.SELECTOR,f.touchScrollAllowed=!1,f.autoScroller.isEnabled=l.dragScroll;let C=this.hitDragging=new af(this.dragging,ph);C.useSubjectCenter=e.useEventCenter,C.emitter.on("pointerdown",this.handlePointerDown),C.emitter.on("dragstart",this.handleDragStart),C.emitter.on("hitupdate",this.handleHitUpdate),C.emitter.on("pointerup",this.handlePointerUp),C.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,s){let f=this.receivingContext;f&&f!==e&&f.dispatch(f===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:s.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:s})}clearDrag(){let e=this.component.context,{receivingContext:s}=this;s&&s.dispatch({type:"UNSET_EVENT_DRAG"}),e!==s&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return r.SELECTOR=".fc-event-draggable, .fc-event-resizable",r})();const Gd={fixedMirrorParent:ki},Bu={dateClick:ki,eventDragStart:ki,eventDragStop:ki,eventDrop:ki,eventResizeStart:ki,eventResizeStop:ki,eventResize:ki,drop:ki,eventReceive:ki,eventLeave:ki};Z.dataAttrPrefix="";var E_=su({name:"@fullcalendar/interaction",componentInteractions:[class Gg extends Rd{constructor(t){super(t),this.handlePointerDown=s=>{let{dragging:l}=this;l.setIgnoreMove(!this.component.isValidDateDownEl(s.origEvent.target))},this.handleDragEnd=s=>{let{component:l}=this,{pointer:f}=this.dragging;if(!f.wasTouchScroll){let{initialHit:C,finalHit:z}=this.hitDragging;if(C&&z&&Dm(C,z)){let{context:W}=l,re=Object.assign(Object.assign({},Vg(C.dateSpan,W)),{dayEl:C.dayEl,jsEvent:s.origEvent,view:W.viewApi||W.calendarApi.view});W.emitter.trigger("dateClick",re)}}},this.dragging=new Vd(t.el),this.dragging.autoScroller.isEnabled=!1;let e=this.hitDragging=new af(this.dragging,Fp(t));e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class a0 extends Rd{constructor(t){super(t),this.dragSelection=null,this.handlePointerDown=C=>{let{component:z,dragging:W}=this,{options:re}=z.context,oe=re.selectable&&z.isValidDateDownEl(C.origEvent.target);W.setIgnoreMove(!oe),W.delay=C.isTouch?function lf(r){let{options:t}=r.context,e=t.selectLongPressDelay;return null==e&&(e=t.longPressDelay),e}(z):null},this.handleDragStart=C=>{this.component.context.calendarApi.unselect(C)},this.handleHitUpdate=(C,z)=>{let{context:W}=this.component,re=null,oe=!1;if(C){let Ne=this.hitDragging.initialHit;C.componentId===Ne.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(Ne,C)||(re=function l0(r,t,e){let s=r.dateSpan,l=t.dateSpan,f=[s.range.start,s.range.end,l.range.start,l.range.end];f.sort(Qe);let C={};for(let z of e){let W=z(r,t);if(!1===W)return null;W&&Object.assign(C,W)}return C.range={start:f[0],end:f[3]},C.allDay=s.allDay,C}(Ne,C,W.pluginHooks.dateSelectionTransformers)),(!re||!function Ey(r,t,e){return!!qu(t.validRange,r.range)&&Iv({dateSelection:r},e)}(re,C.dateProfile,W))&&(oe=!0,re=null)}re?W.dispatch({type:"SELECT_DATES",selection:re}):z||W.dispatch({type:"UNSELECT_DATES"}),oe?d():g(),z||(this.dragSelection=re)},this.handlePointerUp=C=>{this.dragSelection&&(Ad(this.dragSelection,C,this.component.context),this.dragSelection=null)};let{component:e}=t,{options:s}=e.context,l=this.dragging=new Vd(t.el);l.touchScrollAllowed=!1,l.minDistance=s.selectMinDistance||0,l.autoScroller.isEnabled=s.dragScroll;let f=this.hitDragging=new af(this.dragging,Fp(t));f.emitter.on("pointerdown",this.handlePointerDown),f.emitter.on("dragstart",this.handleDragStart),f.emitter.on("hitupdate",this.handleHitUpdate),f.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},y_,class x_ extends Rd{constructor(t){super(t),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=f=>{let{component:C}=this,W=Fc(this.querySegEl(f)),re=this.eventRange=W.eventRange;this.dragging.minDistance=C.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(f.origEvent.target)||f.isTouch&&this.component.props.eventSelection!==re.instance.instanceId)},this.handleDragStart=f=>{let{context:C}=this.component,z=this.eventRange;this.relevantEvents=zh(C.getCurrentData().eventStore,this.eventRange.instance.instanceId);let W=this.querySegEl(f);this.draggingSegEl=W,this.draggingSeg=Fc(W),C.calendarApi.unselect(),C.emitter.trigger("eventResizeStart",{el:W,event:new io(C,z.def,z.instance),jsEvent:f.origEvent,view:C.viewApi})},this.handleHitUpdate=(f,C,z)=>{let{context:W}=this.component,re=this.relevantEvents,oe=this.hitDragging.initialHit,Ne=this.eventRange.instance,Ye=null,Ve=null,$t=!1,Ut={affectedEvents:re,mutatedEvents:{defs:{},instances:{}},isEvent:!0};f&&(f.componentId===oe.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(oe,f)||(Ye=function Bc(r,t,e,s){let l=r.context.dateEnv,z=Wl(r.dateSpan.range.start,t.dateSpan.range.start,l,r.largeUnit);if(e){if(l.add(s.start,z)<s.end)return{startDelta:z}}else if(l.add(s.end,z)>s.start)return{endDelta:z};return null}(oe,f,z.subjectEl.classList.contains("fc-event-resizer-start"),Ne.range))),Ye&&(Ve=Dd(re,W.getCurrentData().eventUiBases,Ye,W),Ut.mutatedEvents=Ve,xg(Ut,f.dateProfile,W)||($t=!0,Ye=null,Ve=null,Ut.mutatedEvents=null)),W.dispatch(Ve?{type:"SET_EVENT_RESIZE",state:Ut}:{type:"UNSET_EVENT_RESIZE"}),$t?d():g(),C||(Ye&&Dm(oe,f)&&(Ye=null),this.validMutation=Ye,this.mutatedRelevantEvents=Ve)},this.handleDragEnd=f=>{let{context:C}=this.component,z=this.eventRange.def,W=this.eventRange.instance,re=new io(C,z,W),oe=this.relevantEvents,Ne=this.mutatedRelevantEvents;if(C.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:re,jsEvent:f.origEvent,view:C.viewApi}),this.validMutation){let Ye=new io(C,Ne.defs[z.defId],W?Ne.instances[W.instanceId]:null);C.dispatch({type:"MERGE_EVENTS",eventStore:Ne});let Ve={oldEvent:re,event:Ye,relatedEvents:iu(Ne,C,W),revert(){C.dispatch({type:"MERGE_EVENTS",eventStore:oe})}};C.emitter.trigger("eventResize",Object.assign(Object.assign({},Ve),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Ge(0),endDelta:this.validMutation.endDelta||Ge(0),jsEvent:f.origEvent,view:C.viewApi})),C.emitter.trigger("eventChange",Ve)}else C.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:e}=t,s=this.dragging=new Vd(t.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=e.context.options.dragScroll;let l=this.hitDragging=new af(this.dragging,Fp(t));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(t){return ps(t.subjectEl,".fc-event")}}],calendarInteractions:[class Fu{constructor(t){this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let l=this.context.options.unselectCancel,f=Wu(s.origEvent);this.matchesCancel=!!ps(f,l),this.matchesEvent=!!ps(f,y_.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:l}=this,{documentPointer:f}=this,C=l.getCurrentData();if(!f.wasTouchScroll){if(C.dateSelection&&!this.isRecentPointerDateSelect){let z=l.options.unselectAuto;z&&(!z||!this.matchesCancel)&&l.calendarApi.unselect(s)}C.eventSelection&&!this.matchesEvent&&l.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let e=this.documentPointer=new Yg(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:Vd,optionRefiners:Gd,listenerRefiners:Bu});class S_ extends dl{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(t,e){let{props:s,context:l}=this,f=[],C=dm(l.options);return t&&f.push({type:"header",key:"header",isSticky:C,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),f.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),Ot(wd,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},Ot(Eg,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:f}))}renderHScrollLayout(t,e,s,l){let f=this.context.pluginHooks.scrollGridImpl;if(!f)throw new Error("No ScrollGrid implementation");let{props:C,context:z}=this,W=!C.forPrint&&dm(z.options),re=!C.forPrint&&Bv(z.options),oe=[];return t&&oe.push({type:"header",key:"header",isSticky:W,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),oe.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),re&&oe.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Cg}]}),Ot(wd,{elClasses:["fc-daygrid"],viewSpec:z.viewSpec},Ot(f,{liquid:!C.isHeightAuto&&!C.forPrint,forPrint:C.forPrint,collapsibleWidth:C.forPrint,colGroups:[{cols:[{span:s,minWidth:l}]}],sections:oe}))}}function cf(r,t){let e=[];for(let s=0;s<t;s+=1)e[s]=[];for(let s of r)e[s.row].push(s);return e}function uf(r,t){let e=[];for(let s=0;s<t;s+=1)e[s]=[];for(let s of r)e[s.firstCol].push(s);return e}function Ug(r,t){let e=[];if(r){for(let s=0;s<t;s+=1)e[s]={affectedInstances:r.affectedInstances,isEvent:r.isEvent,segs:[]};for(let s of r.segs)e[s.row].segs.push(s)}else for(let s=0;s<t;s+=1)e[s]=null;return e}const Wg=Gs({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function $g(r){let{display:t}=r.eventRange.ui;return"list-item"===t||"auto"===t&&!r.eventRange.def.allDay&&r.firstCol===r.lastCol&&r.isStart&&r.isEnd}class hd extends pr{render(){let{props:t}=this;return Ot(Nv,Object.assign({},t,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Wg,defaultDisplayEventEnd:t.defaultDisplayEventEnd,disableResizing:!t.seg.eventRange.def.allDay}))}}class Xg extends pr{render(){let{props:t,context:e}=this,{options:s}=e,{seg:l}=t,C=Ld(l,s.eventTimeFormat||Wg,e,!0,t.defaultDisplayEventEnd);return Ot(Zp,Object.assign({},t,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Uh(t.seg,e),defaultGenerator:d0,timeText:C,isResizing:!1,isDateSelecting:!1}))}}function d0(r){return Ot(zn,null,Ot("div",{className:"fc-daygrid-event-dot",style:{borderColor:r.borderColor||r.backgroundColor}}),r.timeText&&Ot("div",{className:"fc-event-time"},r.timeText),Ot("div",{className:"fc-event-title"},r.event.title||Ot(zn,null,"\xa0")))}class h0 extends pr{constructor(){super(...arguments),this.compileSegs=tr(Lm)}render(){let{props:t}=this,{allSegs:e,invisibleSegs:s}=this.compileSegs(t.singlePlacements);return Ot(pm,{elClasses:["fc-daygrid-more-link"],dateProfile:t.dateProfile,todayRange:t.todayRange,allDayDate:t.allDayDate,moreCnt:t.moreCnt,allSegs:e,hiddenSegs:s,alignmentElRef:t.alignmentElRef,alignGridTop:t.alignGridTop,extraDateSpan:t.extraDateSpan,popoverContent:()=>{let l=(t.eventDrag?t.eventDrag.affectedInstances:null)||(t.eventResize?t.eventResize.affectedInstances:null)||{};return Ot(zn,null,e.map(f=>{let C=f.eventRange.instance.instanceId;return Ot("div",{className:"fc-daygrid-event-harness",key:C,style:{visibility:l[C]?"hidden":""}},$g(f)?Ot(Xg,Object.assign({seg:f,isDragging:!1,isSelected:C===t.eventSelection,defaultDisplayEventEnd:!1},yc(f,t.todayRange))):Ot(hd,Object.assign({seg:f,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:C===t.eventSelection,defaultDisplayEventEnd:!1},yc(f,t.todayRange))))}))}})}}function Lm(r){let t=[],e=[];for(let s of r)t.push(s.seg),s.isVisible||e.push(s.seg);return{allSegs:t,invisibleSegs:e}}const p0=Gs({week:"narrow"});class ip extends dl{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:Oc()},this.handleRootEl=t=>{Yo(this.rootElRef,t),Yo(this.props.elRef,t)}}render(){let{context:t,props:e,state:s,rootElRef:l}=this,{options:f,dateEnv:C}=t,{date:z,dateProfile:W}=e;const re=e.showDayNumber&&function qg(r,t,e){const{start:s,end:l}=t,f=En(l,-1),C=e.getYear(s),z=e.getMonth(s),W=e.getYear(f),re=e.getMonth(f);return!(C===W&&z===re)&&(r.valueOf()===s.valueOf()||1===e.getDay(r)&&r.valueOf()<l.valueOf())}(z,W.currentRange,C);return Ot(qh,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...e.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},e.extraDataAttrs),e.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Zg,date:z,dateProfile:W,todayRange:e.todayRange,showDayNumber:e.showDayNumber,isMonthStart:re,extraRenderProps:e.extraRenderProps},(oe,Ne)=>Ot("div",{ref:e.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:e.minHeight}},e.showWeekNumber&&Ot(Vv,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Pu(t,z,"week"),date:z,defaultFormat:p0}),!Ne.isDisabled&&(e.showDayNumber||Nd(f)||e.forceDayTop)?Ot("div",{className:"fc-daygrid-day-top"},Ot(oe,{elTag:"a",elClasses:["fc-daygrid-day-number",re&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Pu(t,z)),{id:s.dayNumberId})})):e.showDayNumber?Ot("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Ot("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,Ot("div",{className:"fc-daygrid-day-events",ref:e.fgContentElRef},e.fgContent,Ot("div",{className:"fc-daygrid-day-bottom",style:{marginTop:e.moreMarginTop}},Ot(h0,{allDayDate:z,singlePlacements:e.singlePlacements,moreCnt:e.moreCnt,alignmentElRef:l,alignGridTop:!e.showDayNumber,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange}))),Ot("div",{className:"fc-daygrid-day-bg"},e.bgContent)))}}function Zg(r){return r.dayNumberText||Ot(zn,null,"\xa0")}function lu(r){return r.eventRange.instance.instanceId+":"+r.firstCol}function Om(r){return lu(r)+":"+r.lastCol}function Ch(r,t,e,s){if(r.firstCol===t&&r.lastCol===e-1)return r;let l=r.eventRange,f=l.range,C=jl(f,{start:s[t].date,end:Hn(s[e-1].date,1)});return Object.assign(Object.assign({},r),{firstCol:t,lastCol:e-1,eventRange:{def:l.def,ui:Object.assign(Object.assign({},l.ui),{durationEditable:!1}),instance:l.instance,range:C},isStart:r.isStart&&C.start.valueOf()===f.start.valueOf(),isEnd:r.isEnd&&C.end.valueOf()===f.end.valueOf()})}class T_ extends Gp{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(t){const e=super.addSegs(t),{entriesByLevel:s}=this,l=f=>!this.forceHidden[od(f)];for(let f=0;f<s.length;f+=1)s[f]=s[f].filter(l);return e}handleInvalidInsertion(t,e,s){const{entriesByLevel:l,forceHidden:f}=this,{touchingEntry:C,touchingLevel:z,touchingLateral:W}=t;if(this.hiddenConsumes&&C){const re=od(C);if(!f[re])if(this.allowReslicing){const oe=Object.assign(Object.assign({},C),{span:y(C.span,e.span)});f[od(oe)]=!0,l[z][W]=oe,s.push(oe),this.splitEntry(C,e,s)}else f[re]=!0,s.push(C)}super.handleInvalidInsertion(t,e,s)}}class np extends dl{constructor(){super(...arguments),this.cellElRefs=new ad,this.frameElRefs=new ad,this.fgElRefs=new ad,this.segHarnessRefs=new ad,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=t=>{t&&this.updateSizing(!0)}}render(){let{props:t,state:e,context:s}=this,{options:l}=s,f=t.cells.length,C=uf(t.businessHourSegs,f),z=uf(t.bgEventSegs,f),W=uf(this.getHighlightSegs(),f),re=uf(this.getMirrorSegs(),f),{singleColPlacements:oe,multiColPlacements:Ne,moreCnts:Ye,moreMarginTops:Ve}=function Kg(r,t,e,s,l,f,C){let z=new T_(Di=>l[r[Di.index].eventRange.instance.instanceId+":"+Di.span.start+":"+(Di.span.end-1)]||1);z.allowReslicing=!0,z.strictOrder=s,!0===t||!0===e?(z.maxCoord=f,z.hiddenConsumes=!0):"number"==typeof t?z.maxStackCnt=t:"number"==typeof e&&(z.maxStackCnt=e,z.hiddenConsumes=!0);let W=[],re=[];for(let Di=0;Di<r.length;Di+=1){let Sn=r[Di],hr=Om(Sn);null!=l[hr]?W.push({index:Di,span:{start:Sn.firstCol,end:Sn.lastCol+1}}):re.push(Sn)}let oe=z.addSegs(W),Ne=z.toRects(),{singleColPlacements:Ye,multiColPlacements:Ve,leftoverMargins:$t}=function cu(r,t,e){let s=function wh(r,t){let e=[];for(let s=0;s<t;s+=1)e.push([]);for(let s of r)for(let l=s.span.start;l<s.span.end;l+=1)e[l].push(s);return e}(r,e.length),l=[],f=[],C=[];for(let z=0;z<e.length;z+=1){let W=s[z],re=[],oe=0,Ne=0;for(let Ve of W)re.push({seg:Ch(t[Ve.index],z,z+1,e),isVisible:!0,isAbsolute:!1,absoluteTop:Ve.levelCoord,marginTop:Ve.levelCoord-oe}),oe=Ve.levelCoord+Ve.thickness;let Ye=[];oe=0,Ne=0;for(let Ve of W){let $t=t[Ve.index],li=Ve.span.start===z;Ne+=Ve.levelCoord-oe,oe=Ve.levelCoord+Ve.thickness,Ve.span.end-Ve.span.start>1?(Ne+=Ve.thickness,li&&Ye.push({seg:Ch($t,Ve.span.start,Ve.span.end,e),isVisible:!0,isAbsolute:!0,absoluteTop:Ve.levelCoord,marginTop:0})):li&&(Ye.push({seg:Ch($t,Ve.span.start,Ve.span.end,e),isVisible:!0,isAbsolute:!1,absoluteTop:Ve.levelCoord,marginTop:Ne}),Ne=0)}l.push(re),f.push(Ye),C.push(Ne)}return{singleColPlacements:l,multiColPlacements:f,leftoverMargins:C}}(Ne,r,C),Ut=[],li=[];for(let Di of re){Ve[Di.firstCol].push({seg:Di,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Sn=Di.firstCol;Sn<=Di.lastCol;Sn+=1)Ye[Sn].push({seg:Ch(Di,Sn,Sn+1,C),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Di=0;Di<C.length;Di+=1)Ut.push(0);for(let Di of oe){let Sn=r[Di.index],hr=Di.span;Ve[hr.start].push({seg:Ch(Sn,hr.start,hr.end,C),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let yr=hr.start;yr<hr.end;yr+=1)Ut[yr]+=1,Ye[yr].push({seg:Ch(Sn,yr,yr+1,C),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let Di=0;Di<C.length;Di+=1)li.push($t[Di]);return{singleColPlacements:Ye,multiColPlacements:Ve,moreCnts:Ut,moreMarginTops:li}}(dh(t.fgEventSegs,l.eventOrder),t.dayMaxEvents,t.dayMaxEventRows,l.eventOrderStrict,e.segHeights,e.maxContentHeight,t.cells),$t=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{};return Ot("tr",{ref:this.rootElRef,role:"row"},t.renderIntro&&t.renderIntro(),t.cells.map((Ut,li)=>{let Di=this.renderFgSegs(li,t.forPrint?oe[li]:Ne[li],t.todayRange,$t),Sn=this.renderFgSegs(li,function Pm(r,t){if(!r.length)return[];let e=function k_(r){let t={};for(let e of r)for(let s of e)t[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return t}(t);return r.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:e[s.eventRange.instance.instanceId],marginTop:0}))}(re[li],Ne),t.todayRange,{},!!t.eventDrag,!!t.eventResize,!1);return Ot(ip,{key:Ut.key,elRef:this.cellElRefs.createRef(Ut.key),innerElRef:this.frameElRefs.createRef(Ut.key),dateProfile:t.dateProfile,date:Ut.date,showDayNumber:t.showDayNumbers,showWeekNumber:t.showWeekNumbers&&0===li,forceDayTop:t.showWeekNumbers,todayRange:t.todayRange,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,extraRenderProps:Ut.extraRenderProps,extraDataAttrs:Ut.extraDataAttrs,extraClassNames:Ut.extraClassNames,extraDateSpan:Ut.extraDateSpan,moreCnt:Ye[li],moreMarginTop:Ve[li],singlePlacements:oe[li],fgContentElRef:this.fgElRefs.createRef(Ut.key),fgContent:Ot(zn,null,Ot(zn,null,Di),Ot(zn,null,Sn)),bgContent:Ot(zn,null,this.renderFillSegs(W[li],"highlight"),this.renderFillSegs(C[li],"non-business"),this.renderFillSegs(z[li],"bg-event")),minHeight:t.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(t,e){this.updateSizing(!Ta(t,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:t}=this;return t.eventDrag&&t.eventDrag.segs.length?t.eventDrag.segs:t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:t.dateSelectionSegs}getMirrorSegs(){let{props:t}=this;return t.eventResize&&t.eventResize.segs.length?t.eventResize.segs:[]}renderFgSegs(t,e,s,l,f,C,z){let{context:W}=this,{eventSelection:re}=this.props,{framePositions:oe}=this.state,Ne=1===this.props.cells.length,Ye=f||C||z,Ve=[];if(oe)for(let $t of e){let{seg:Ut}=$t,{instanceId:li}=Ut.eventRange.instance,Di=$t.isVisible&&!l[li],Sn=$t.isAbsolute,hr="",yr="";Sn&&(W.isRtl?(yr=0,hr=oe.lefts[Ut.lastCol]-oe.lefts[Ut.firstCol]):(hr=0,yr=oe.rights[Ut.firstCol]-oe.rights[Ut.lastCol])),Ve.push(Ot("div",{className:"fc-daygrid-event-harness"+(Sn?" fc-daygrid-event-harness-abs":""),key:lu(Ut),ref:Ye?null:this.segHarnessRefs.createRef(Om(Ut)),style:{visibility:Di?"":"hidden",marginTop:Sn?"":$t.marginTop,top:Sn?$t.absoluteTop:"",left:hr,right:yr}},$g(Ut)?Ot(Xg,Object.assign({seg:Ut,isDragging:f,isSelected:li===re,defaultDisplayEventEnd:Ne},yc(Ut,s))):Ot(hd,Object.assign({seg:Ut,isDragging:f,isResizing:C,isDateSelecting:z,isSelected:li===re,defaultDisplayEventEnd:Ne},yc(Ut,s)))))}return Ve}renderFillSegs(t,e){let{isRtl:s}=this.context,{todayRange:l}=this.props,{framePositions:f}=this.state,C=[];if(f)for(let z of t){let W=s?{right:0,left:f.lefts[z.lastCol]-f.lefts[z.firstCol]}:{left:0,right:f.rights[z.firstCol]-f.rights[z.lastCol]};C.push(Ot("div",{key:jh(z.eventRange),className:"fc-daygrid-bg-harness",style:W},"bg-event"===e?Ot(Yv,Object.assign({seg:z},yc(z,l))):Hv(e)))}return Ot(zn,{},...C)}updateSizing(t){let{props:e,state:s,frameElRefs:l}=this;if(!e.forPrint&&null!==e.clientWidth){if(t){let W=e.cells.map(re=>l.currentMap[re.key]);if(W.length){let re=this.rootElRef.current,oe=new vh(re,W,!0,!1);(!s.framePositions||!s.framePositions.similarTo(oe))&&this.setState({framePositions:new vh(re,W,!0,!1)})}}const f=this.state.segHeights,C=this.querySegHeights(),z=!0===e.dayMaxEvents||!0===e.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},f),C),maxContentHeight:z?this.computeMaxContentHeight():null})}}querySegHeights(){let t=this.segHarnessRefs.currentMap,e={};for(let s in t){let l=Math.round(t[s].getBoundingClientRect().height);e[s]=Math.max(e[s]||0,l)}return e}computeMaxContentHeight(){let t=this.props.cells[0].key,s=this.fgElRefs.currentMap[t];return this.cellElRefs.currentMap[t].getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let t=this.cellElRefs.currentMap;return this.props.cells.map(e=>t[e.key])}}np.addStateEquality({segHeights:Ta});class A_ extends dl{constructor(){super(...arguments),this.splitBusinessHourSegs=tr(cf),this.splitBgEventSegs=tr(cf),this.splitFgEventSegs=tr(cf),this.splitDateSelectionSegs=tr(cf),this.splitEventDrag=tr(Ug),this.splitEventResize=tr(Ug),this.rowRefs=new ad}render(){let{props:t,context:e}=this,s=t.cells.length,l=this.splitBusinessHourSegs(t.businessHourSegs,s),f=this.splitBgEventSegs(t.bgEventSegs,s),C=this.splitFgEventSegs(t.fgEventSegs,s),z=this.splitDateSelectionSegs(t.dateSelectionSegs,s),W=this.splitEventDrag(t.eventDrag,s),re=this.splitEventResize(t.eventResize,s),oe=s>=7&&t.clientWidth?t.clientWidth/e.options.aspectRatio/6:null;return Ot(bc,{unit:"day"},(Ne,Ye)=>Ot(zn,null,t.cells.map((Ve,$t)=>Ot(np,{ref:this.rowRefs.createRef($t),key:Ve.length?Ve[0].date.toISOString():$t,showDayNumbers:s>1,showWeekNumbers:t.showWeekNumbers,todayRange:Ye,dateProfile:t.dateProfile,cells:Ve,renderIntro:t.renderRowIntro,businessHourSegs:l[$t],eventSelection:t.eventSelection,bgEventSegs:f[$t].filter(f0),fgEventSegs:C[$t],dateSelectionSegs:z[$t],eventDrag:W[$t],eventResize:re[$t],dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,clientWidth:t.clientWidth,clientHeight:t.clientHeight,cellMinHeight:oe,forPrint:t.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const t=this.rowRefs.currentMap[0].getCellEls()[0],e=t?t.closest(".fc-daygrid-body"):null;e&&(this.rootEl=e,this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new vh(this.rootEl,this.rowRefs.collect().map(t=>t.getCellEls()[0]),!1,!0),this.colPositions=new vh(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(t,e){let{colPositions:s,rowPositions:l}=this,f=s.leftToIndex(t),C=l.topToIndex(e);if(null!=C&&null!=f){let z=this.props.cells[C][f];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(C,f),allDay:!0},z.extraDateSpan),dayEl:this.getCellEl(C,f),rect:{left:s.lefts[f],right:s.rights[f],top:l.tops[C],bottom:l.bottoms[C]},layer:0}}return null}getCellEl(t,e){return this.rowRefs.currentMap[t].getCellEls()[e]}getCellRange(t,e){let s=this.props.cells[t][e].date;return{start:s,end:Hn(s,1)}}}function f0(r){return r.eventRange.def.allDay}class M_ extends dl{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:t}=this,{dayMaxEventRows:e,dayMaxEvents:s,expandRows:l}=t,f=!0===s||!0===e;return f&&!l&&(f=!1,e=null,s=null),Ot("div",{ref:this.elRef,className:["fc-daygrid-body",f?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",l?"":"fc-daygrid-body-natural"].join(" "),style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Ot("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:l?t.clientHeight:""}},t.colGroupNode,Ot("tbody",{role:"presentation"},Ot(A_,{dateProfile:t.dateProfile,cells:t.cells,renderRowIntro:t.renderRowIntro,showWeekNumbers:t.showWeekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,dayMaxEvents:s,dayMaxEventRows:e,forPrint:t.forPrint,isHitComboAllowed:t.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(t){t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const t=function D_(r,t){let e;return t.currentRangeUnit.match(/year|month/)&&(e=r.querySelector(`[data-date="${function hc(r){return r.toISOString().match(/^\d{4}-\d{2}/)[0]}(t.currentDate)}-01"]`)),e||(e=r.querySelector(`[data-date="${Ua(t.currentDate)}"]`)),e}(this.elRef.current,this.props.dateProfile);if(t){const e=t.closest(".fc-daygrid-body"),s=e.closest(".fc-scroller"),l=t.getBoundingClientRect().top-e.getBoundingClientRect().top;s.scrollTop=l?l+1:0}this.needsScrollReset=!1}}}class I_ extends bg{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(t,e){return e.sliceRange(t)}}class L_ extends dl{constructor(){super(...arguments),this.slicer=new I_,this.tableRef={current:null}}render(){let{props:t,context:e}=this;return Ot(M_,Object.assign({ref:this.tableRef},this.slicer.sliceProps(t,t.dateProfile,t.nextDayThreshold,e,t.dayTableModel),{dateProfile:t.dateProfile,cells:t.dayTableModel.cells,colGroupNode:t.colGroupNode,tableMinWidth:t.tableMinWidth,renderRowIntro:t.renderRowIntro,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.showWeekNumbers,expandRows:t.expandRows,headerAlignElRef:t.headerAlignElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint}))}}function O_(r,t){let e=new Xl(r.renderRange,t);return new _h(e,/year|month|week/.test(r.currentRangeUnit))}Ys(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var ev=su({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class Jg extends S_{constructor(){super(...arguments),this.buildDayTableModel=tr(O_),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:t,dateProfileGenerator:e}=this.context,{props:s}=this,l=this.buildDayTableModel(s.dateProfile,e),f=t.dayHeaders&&Ot(lm,{ref:this.headerRef,dateProfile:s.dateProfile,dates:l.headerDates,datesRepDistinctDays:1===l.rowCnt}),C=z=>Ot(L_,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:l,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:t.nextDayThreshold,colGroupNode:z.tableColGroupNode,tableMinWidth:z.tableMinWidth,dayMaxEvents:t.dayMaxEvents,dayMaxEventRows:t.dayMaxEventRows,showWeekNumbers:t.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:z.clientWidth,clientHeight:z.clientHeight,forPrint:s.forPrint});return t.dayMinWidth?this.renderHScrollLayout(f,C,l.colCnt,t.dayMinWidth):this.renderSimpleLayout(f,C)}},dateProfileGeneratorClass:class P_ extends Yf{buildRenderRange(t,e,s){let l=super.buildRenderRange(t,e,s),{props:f}=this;return function R_(r){let f,{dateEnv:t,currentRange:e}=r,{start:s,end:l}=e;if(r.snapToWeek&&(s=t.startOfWeek(s),f=t.startOfWeek(l),f.valueOf()!==l.valueOf()&&(l=Bn(f,1))),r.fixedWeekCount){let C=t.startOfWeek(t.startOfMonth(Hn(e.end,-1))),z=Math.ceil(function qn(r,t){return rr(r,t)/7}(C,l));l=Bn(l,6-z)}return{start:s,end:l}}({currentRange:l,snapToWeek:/^(year|month)$/.test(e),fixedWeekCount:f.fixedWeekCount,dateEnv:f.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class z_ extends Bp{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(t){return t.allDay?["allDay"]:["timed"]}getKeysForEventDef(t){return t.allDay?function Qu(r){return"background"===r.ui.display||"inverse-background"===r.ui.display}(t)?["timed","allDay"]:["allDay"]:["timed"]}}const df=Gs({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Rm(r){let t=["fc-timegrid-slot","fc-timegrid-slot-label",r.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Ot(js.Consumer,null,e=>{if(!r.isLabeled)return Ot("td",{className:t.join(" "),"data-time":r.isoTimeStr});let{dateEnv:s,options:l,viewApi:f}=e,C=null==l.slotLabelFormat?df:Array.isArray(l.slotLabelFormat)?Gs(l.slotLabelFormat[0]):Gs(l.slotLabelFormat),z={level:0,time:r.time,date:s.toDate(r.date),view:f,text:s.format(r.date,C)};return Ot(ka,{elTag:"td",elClasses:t,elAttrs:{"data-time":r.isoTimeStr},renderProps:z,generatorName:"slotLabelContent",customGenerator:l.slotLabelContent,defaultGenerator:F_,classNameGenerator:l.slotLabelClassNames,didMount:l.slotLabelDidMount,willUnmount:l.slotLabelWillUnmount},W=>Ot("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Ot(W,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function F_(r){return r.text}class a extends pr{render(){return this.props.slatMetas.map(t=>Ot("tr",{key:t.key},Ot(Rm,Object.assign({},t))))}}const n=Gs({week:"short"});class p extends dl{constructor(){super(...arguments),this.allDaySplitter=new z_,this.headerElRef={current:null},this.rootElRef={current:null},this.scrollerElRef={current:null},this.state={slatCoords:null},this.handleScrollTopRequest=t=>{let e=this.scrollerElRef.current;e&&(e.scrollTop=t)},this.renderHeadAxis=(t,e="")=>{let{options:s}=this.context,{dateProfile:l}=this.props,f=l.renderRange,z=1===rr(f.start,f.end)?Pu(this.context,f.start,"week"):{};return s.weekNumbers&&"day"===t?Ot(Vv,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:f.start,defaultFormat:n},W=>Ot("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:e}},Ot(W,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:z}))):Ot("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},Ot("div",{className:"fc-timegrid-axis-frame",style:{height:e}}))},this.renderTableRowAxis=t=>{let{options:e,viewApi:s}=this.context;return Ot(ka,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:e.allDayText,view:s},generatorName:"allDayContent",customGenerator:e.allDayContent,defaultGenerator:v,classNameGenerator:e.allDayClassNames,didMount:e.allDayDidMount,willUnmount:e.allDayWillUnmount},f=>Ot("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==t?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:t}},Ot(f,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=t=>{this.setState({slatCoords:t})}}renderSimpleLayout(t,e,s){let{context:l,props:f}=this,C=[],z=dm(l.options);return t&&C.push({type:"header",key:"header",isSticky:z,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}}),e&&(C.push({type:"body",key:"all-day",chunk:{content:e}}),C.push({type:"body",key:"all-day-divider",outerContent:Ot("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ot("td",{className:"fc-timegrid-divider "+l.theme.getClass("tableCellShaded")}))})),C.push({type:"body",key:"body",liquid:!0,expandRows:!!l.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),Ot(wd,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:l.viewSpec},Ot(Eg,{liquid:!f.isHeightAuto&&!f.forPrint,collapsibleWidth:f.forPrint,cols:[{width:"shrink"}],sections:C}))}renderHScrollLayout(t,e,s,l,f,C,z){let W=this.context.pluginHooks.scrollGridImpl;if(!W)throw new Error("No ScrollGrid implementation");let{context:re,props:oe}=this,Ne=!oe.forPrint&&dm(re.options),Ye=!oe.forPrint&&Bv(re.options),Ve=[];t&&Ve.push({type:"header",key:"header",isSticky:Ne,syncRowHeights:!0,chunks:[{key:"axis",rowContent:Ut=>Ot("tr",{role:"presentation"},this.renderHeadAxis("day",Ut.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:t}]}),e&&(Ve.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:Ut=>Ot("tr",{role:"presentation"},this.renderTableRowAxis(Ut.rowSyncHeights[0]))},{key:"cols",content:e}]}),Ve.push({key:"all-day-divider",type:"body",outerContent:Ot("tr",{role:"presentation",className:"fc-scrollgrid-section"},Ot("td",{colSpan:2,className:"fc-timegrid-divider "+re.theme.getClass("tableCellShaded")}))}));let $t=re.options.nowIndicator;return Ve.push({type:"body",key:"body",liquid:!0,expandRows:!!re.options.expandRows,chunks:[{key:"axis",content:Ut=>Ot("div",{className:"fc-timegrid-axis-chunk"},Ot("table",{"aria-hidden":!0,style:{height:Ut.expandRows?Ut.clientHeight:""}},Ut.tableColGroupNode,Ot("tbody",null,Ot(a,{slatMetas:C}))),Ot("div",{className:"fc-timegrid-now-indicator-container"},Ot(bc,{unit:$t?"minute":"day"},li=>{let Di=$t&&z&&z.safeComputeTop(li);return"number"==typeof Di?Ot(wc,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:Di},isAxis:!0,date:li}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),Ye&&Ve.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Cg},{key:"cols",content:Cg}]}),Ot(wd,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:re.viewSpec},Ot(W,{liquid:!oe.isHeightAuto&&!oe.forPrint,forPrint:oe.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:l,minWidth:f}]}],sections:Ve}))}getAllDayMaxEventProps(){let{dayMaxEvents:t,dayMaxEventRows:e}=this.context.options;return(!0===t||!0===e)&&(t=void 0,e=5),{dayMaxEvents:t,dayMaxEventRows:e}}}function v(r){return r.text}class E{constructor(t,e,s){this.positions=t,this.dateProfile=e,this.slotDuration=s}safeComputeTop(t){let{dateProfile:e}=this;if(Zs(e.currentRange,t)){let s=Hr(t),l=t.valueOf()-s.valueOf();if(l>=Wi(e.slotMinTime)&&l<Wi(e.slotMaxTime))return this.computeTimeTop(Ge(l))}return null}computeDateTop(t,e){return e||(e=Hr(t)),this.computeTimeTop(Ge(t.valueOf()-e.valueOf()))}computeTimeTop(t){let C,z,{positions:e,dateProfile:s}=this,l=e.els.length,f=(t.milliseconds-Wi(s.slotMinTime))/Wi(this.slotDuration);return f=Math.max(0,f),f=Math.min(l,f),C=Math.floor(f),C=Math.min(C,l-1),z=f-C,e.tops[C]+e.getHeight(C)*z}}class M extends pr{render(){let{props:t,context:e}=this,{options:s}=e,{slatElRefs:l}=t;return Ot("tbody",null,t.slatMetas.map((f,C)=>{let z={time:f.time,date:e.dateEnv.toDate(f.date),view:e.viewApi};return Ot("tr",{key:f.key,ref:l.createRef(f.key)},t.axis&&Ot(Rm,Object.assign({},f)),Ot(ka,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!f.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":f.isoTimeStr},renderProps:z,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class R extends pr{constructor(){super(...arguments),this.rootElRef={current:null},this.slatElRefs=new ad}render(){let{props:t,context:e}=this;return Ot("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},Ot("table",{"aria-hidden":!0,className:e.theme.getClass("table"),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:t.minHeight}},t.tableColGroupNode,Ot(M,{slatElRefs:this.slatElRefs,axis:t.axis,slatMetas:t.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:t,props:e}=this;e.onCoords&&null!==e.clientWidth&&this.rootElRef.current.offsetHeight&&e.onCoords(new E(new vh(this.rootElRef.current,function Y(r,t){return t.map(e=>r[e.key])}(this.slatElRefs.currentMap,e.slatMetas),!1,!0),this.props.dateProfile,t.options.slotDuration))}}function j(r,t){let s,e=[];for(s=0;s<t;s+=1)e.push([]);if(r)for(s=0;s<r.length;s+=1)e[r[s].col].push(r[s]);return e}function ee(r,t){let e=[];if(r){for(let s=0;s<t;s+=1)e[s]={affectedInstances:r.affectedInstances,isEvent:r.isEvent,segs:[]};for(let s of r.segs)e[s.col].segs.push(s)}else for(let s=0;s<t;s+=1)e[s]=null;return e}class se extends pr{render(){let{props:t}=this;return Ot(pm,{elClasses:["fc-timegrid-more-link"],elStyle:{top:t.top,bottom:t.bottom},allDayDate:null,moreCnt:t.hiddenSegs.length,allSegs:t.hiddenSegs,hiddenSegs:t.hiddenSegs,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,todayRange:t.todayRange,popoverContent:()=>Ci(t.hiddenSegs,t),defaultGenerator:ce,forceTimed:!0},e=>Ot(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function ce(r){return r.shortText}function Me(r,t){if(!r)return[[],0];let{level:e,lateralStart:s,lateralEnd:l}=r,f=s,C=[];for(;f<l;)C.push(t(e,f)),f+=1;return C.sort(Xe),[C.map(ut),C[0][1]]}function Xe(r,t){return t[1]-r[1]}function ut(r){return r[0]}function At(r){let t=[];const e=Nt((l,f,C)=>od(l),(l,f,C)=>{let z=Object.assign(Object.assign({},l),{levelCoord:f,stackDepth:C,stackForward:0});return t.push(z),z.stackForward=s(l.nextLevelNodes,f+l.thickness,C+1)+1});function s(l,f,C){let z=0;for(let W of l)z=Math.max(e(W,f,C),z);return z}return s(r,0,0),t}function Nt(r,t){const e={};return(...s)=>{let l=r(...s);return l in e?e[l]:e[l]=t(...s)}}function Bt(r,t,e=null,s=0){let l=[];if(e)for(let f=0;f<r.length;f+=1){let C=r[f],z=e.computeDateTop(C.start,t),W=Math.max(z+(s||0),e.computeDateTop(C.end,t));l.push({start:Math.round(z),end:Math.round(W)})}return l}const hi=Gs({hour:"numeric",minute:"2-digit",meridiem:!1});class Oi extends pr{render(){return Ot(Nv,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:hi}))}}class nn extends pr{constructor(){super(...arguments),this.sortEventSegs=tr(dh)}render(){let{props:t,context:e}=this,{options:s}=e,l=s.selectMirror,f=t.eventDrag&&t.eventDrag.segs||t.eventResize&&t.eventResize.segs||l&&t.dateSelectionSegs||[],C=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{},z=this.sortEventSegs(t.fgEventSegs,s.eventOrder);return Ot(qh,{elTag:"td",elRef:t.elRef,elClasses:["fc-timegrid-col",...t.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},t.extraDataAttrs),date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraRenderProps:t.extraRenderProps},W=>Ot("div",{className:"fc-timegrid-col-frame"},Ot("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(t.businessHourSegs,"non-business"),this.renderFillSegs(t.bgEventSegs,"bg-event"),this.renderFillSegs(t.dateSelectionSegs,"highlight")),Ot("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(z,C,!1,!1,!1)),Ot("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(f,{},!!t.eventDrag,!!t.eventResize,!!l,"mirror")),Ot("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(t.nowIndicatorSegs)),Nd(s)&&Ot(W,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(t,e,s,l,f,C){let{props:z}=this;return z.forPrint?Ci(t,z):this.renderPositionedFgSegs(t,e,s,l,f,C)}renderPositionedFgSegs(t,e,s,l,f,C){let{eventMaxStack:z,eventShortHeight:W,eventOrderStrict:re,eventMinHeight:oe}=this.context.options,{date:Ne,slatCoords:Ye,eventSelection:Ve,todayRange:$t,nowDate:Ut}=this.props,li=s||l||f,Di=Bt(t,Ne,Ye,oe),{segPlacements:Sn,hiddenGroups:hr}=function bi(r,t,e,s){let l=[],f=[];for(let re=0;re<r.length;re+=1){let oe=t[re];oe?l.push({index:re,thickness:1,span:oe}):f.push(r[re])}let{segRects:C,hiddenGroups:z}=function ve(r,t,e){let s=new Gp;null!=t&&(s.strictOrder=t),null!=e&&(s.maxStackCnt=e);let f=function am(r){let t=[];for(let e of r){let s=[],l={span:e.span,entries:[e]};for(let f of t)y(f.span,l.span)?l={entries:f.entries.concat(l.entries),span:yg(f.span,l.span)}:s.push(f);s.push(l),t=s}return t}(s.addSegs(r)),C=function be(r){const{entriesByLevel:t}=r,e=Nt((s,l)=>s+":"+l,(s,l)=>{let f=function Lt(r,t,e){let{levelCoords:s,entriesByLevel:l}=r,f=l[t][e],C=s[t]+f.thickness,z=s.length,W=t;for(;W<z&&s[W]<C;W+=1);for(;W<z;W+=1){let oe,re=l[W],Ne=S(re,f.span.start,Ru),Ye=Ne[0]+Ne[1],Ve=Ye;for(;(oe=re[Ve])&&oe.span.start<f.span.end;)Ve+=1;if(Ye<Ve)return{level:W,lateralStart:Ye,lateralEnd:Ve}}return null}(r,s,l),C=Me(f,e),z=t[s][l];return[Object.assign(Object.assign({},z),{nextLevelNodes:C[0]}),z.thickness+C[1]]});return Me(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,e)[0]}(s);return C=function ht(r,t){const e=Nt((s,l,f)=>od(s),(s,l,f)=>{let oe,{nextLevelNodes:C,thickness:z}=s,W=z+f,re=z/W,Ne=[];if(C.length)for(let Ve of C)if(void 0===oe){let $t=e(Ve,l,W);oe=$t[0],Ne.push($t[1])}else{let $t=e(Ve,oe,0);Ne.push($t[1])}else oe=t;let Ye=(oe-l)*re;return[oe-Ye,Object.assign(Object.assign({},s),{thickness:Ye,nextLevelNodes:Ne})]});return r.map(s=>e(s,0,0)[1])}(C,1),{segRects:At(C),hiddenGroups:f}}(l,e,s),W=[];for(let re of C)W.push({seg:r[re.index],rect:re});for(let re of f)W.push({seg:re,rect:null});return{segPlacements:W,hiddenGroups:z}}(t,Di,re,z);return Ot(zn,null,this.renderHiddenGroups(hr,t),Sn.map(yr=>{let{seg:ro,rect:is}=yr,Bs=ro.eventRange.instance.instanceId,Qr=li||!(e[Bs]||!is),Gu=Ni(is&&is.span),pd=!li&&is?this.computeSegHStyle(is):{left:0,right:0},eg=!!is&&is.span.end-is.span.start<W;return Ot("div",{className:"fc-timegrid-event-harness"+(is&&is.stackForward>0?" fc-timegrid-event-harness-inset":""),key:C||Bs,style:Object.assign(Object.assign({visibility:Qr?"":"hidden"},Gu),pd)},Ot(Oi,Object.assign({seg:ro,isDragging:s,isResizing:l,isDateSelecting:f,isSelected:Bs===Ve,isShort:eg},yc(ro,$t,Ut))))}))}renderHiddenGroups(t,e){let{extraDateSpan:s,dateProfile:l,todayRange:f,nowDate:C,eventSelection:z,eventDrag:W,eventResize:re}=this.props;return Ot(zn,null,t.map(oe=>{let Ne=Ni(oe.span),Ye=function Hi(r,t){return r.map(e=>t[e.index])}(oe.entries,e);return Ot(se,{key:El(zu(Ye)),hiddenSegs:Ye,top:Ne.top,bottom:Ne.bottom,extraDateSpan:s,dateProfile:l,todayRange:f,nowDate:C,eventSelection:z,eventDrag:W,eventResize:re})}))}renderFillSegs(t,e){let{props:s,context:l}=this,C=Bt(t,s.date,s.slatCoords,l.options.eventMinHeight).map((z,W)=>{let re=t[W];return Ot("div",{key:jh(re.eventRange),className:"fc-timegrid-bg-harness",style:Ni(z)},"bg-event"===e?Ot(Yv,Object.assign({seg:re},yc(re,s.todayRange,s.nowDate))):Hv(e))});return Ot(zn,null,C)}renderNowIndicator(t){let{slatCoords:e,date:s}=this.props;return e?t.map((l,f)=>Ot(wc,{key:f,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:e.computeDateTop(l.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(t){let z,W,{isRtl:e,options:s}=this.context,l=s.slotEventOverlap,f=t.levelCoord,C=t.levelCoord+t.thickness;l&&(C=Math.min(1,f+2*(C-f))),e?(z=1-C,W=f):(z=f,W=1-C);let re={zIndex:t.stackDepth+1,left:100*z+"%",right:100*W+"%"};return l&&!t.stackForward&&(re[e?"marginLeft":"marginRight"]=20),re}}function Ci(r,{todayRange:t,nowDate:e,eventSelection:s,eventDrag:l,eventResize:f}){let C=(l?l.affectedInstances:null)||(f?f.affectedInstances:null)||{};return Ot(zn,null,r.map(z=>{let W=z.eventRange.instance.instanceId;return Ot("div",{key:W,style:{visibility:C[W]?"hidden":""}},Ot(Oi,Object.assign({seg:z,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:W===s,isShort:!1},yc(z,t,e))))}))}function Ni(r){return r?{top:r.start,bottom:-r.end}:{top:"",bottom:""}}class Ki extends pr{constructor(){super(...arguments),this.splitFgEventSegs=tr(j),this.splitBgEventSegs=tr(j),this.splitBusinessHourSegs=tr(j),this.splitNowIndicatorSegs=tr(j),this.splitDateSelectionSegs=tr(j),this.splitEventDrag=tr(ee),this.splitEventResize=tr(ee),this.rootElRef={current:null},this.cellElRefs=new ad}render(){let{props:t,context:e}=this,s=e.options.nowIndicator&&t.slatCoords&&t.slatCoords.safeComputeTop(t.nowDate),l=t.cells.length,f=this.splitFgEventSegs(t.fgEventSegs,l),C=this.splitBgEventSegs(t.bgEventSegs,l),z=this.splitBusinessHourSegs(t.businessHourSegs,l),W=this.splitNowIndicatorSegs(t.nowIndicatorSegs,l),re=this.splitDateSelectionSegs(t.dateSelectionSegs,l),oe=this.splitEventDrag(t.eventDrag,l),Ne=this.splitEventResize(t.eventResize,l);return Ot("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Ot("table",{role:"presentation",style:{minWidth:t.tableMinWidth,width:t.clientWidth}},t.tableColGroupNode,Ot("tbody",{role:"presentation"},Ot("tr",{role:"row"},t.axis&&Ot("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},Ot("div",{className:"fc-timegrid-col-frame"},Ot("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof s&&Ot(wc,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:t.nowDate})))),t.cells.map((Ye,Ve)=>Ot(nn,{key:Ye.key,elRef:this.cellElRefs.createRef(Ye.key),dateProfile:t.dateProfile,date:Ye.date,nowDate:t.nowDate,todayRange:t.todayRange,extraRenderProps:Ye.extraRenderProps,extraDataAttrs:Ye.extraDataAttrs,extraClassNames:Ye.extraClassNames,extraDateSpan:Ye.extraDateSpan,fgEventSegs:f[Ve],bgEventSegs:C[Ve],businessHourSegs:z[Ve],nowIndicatorSegs:W[Ve],dateSelectionSegs:re[Ve],eventDrag:oe[Ve],eventResize:Ne[Ve],slatCoords:t.slatCoords,eventSelection:t.eventSelection,forPrint:t.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:t}=this;t.onColCoords&&null!==t.clientWidth&&t.onColCoords(new vh(this.rootElRef.current,function an(r,t){return t.map(e=>r[e.key])}(this.cellElRefs.currentMap,t.cells),!0,!1))}}class Li extends dl{constructor(){super(...arguments),this.processSlotOptions=tr(yn),this.state={slatCoords:null},this.handleRootEl=t=>{t?this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=t=>{let{onScrollTopRequest:e}=this.props,{slatCoords:s}=this.state;if(e&&s){if(t.time){let l=s.computeTimeTop(t.time);l=Math.ceil(l),l&&(l+=1),e(l)}return!0}return!1},this.handleColCoords=t=>{this.colCoords=t},this.handleSlatCoords=t=>{this.setState({slatCoords:t}),this.props.onSlatCoords&&this.props.onSlatCoords(t)}}render(){let{props:t,state:e}=this;return Ot("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:t.clientWidth,minWidth:t.tableMinWidth}},Ot(R,{axis:t.axis,dateProfile:t.dateProfile,slatMetas:t.slatMetas,clientWidth:t.clientWidth,minHeight:t.expandRows?t.clientHeight:"",tableMinWidth:t.tableMinWidth,tableColGroupNode:t.axis?t.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Ot(Ki,{cells:t.cells,axis:t.axis,dateProfile:t.dateProfile,businessHourSegs:t.businessHourSegs,bgEventSegs:t.bgEventSegs,fgEventSegs:t.fgEventSegs,dateSelectionSegs:t.dateSelectionSegs,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange,nowDate:t.nowDate,nowIndicatorSegs:t.nowIndicatorSegs,clientWidth:t.clientWidth,tableMinWidth:t.tableMinWidth,tableColGroupNode:t.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:t.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(t){this.scrollResponder.update(t.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(t,e){let{dateEnv:s,options:l}=this.context,{colCoords:f}=this,{dateProfile:C}=this.props,{slatCoords:z}=this.state,{snapDuration:W,snapsPerSlot:re}=this.processSlotOptions(this.props.slotDuration,l.snapDuration),oe=f.leftToIndex(t),Ne=z.positions.topToIndex(e);if(null!=oe&&null!=Ne){let Ye=this.props.cells[oe],Ve=z.positions.tops[Ne],$t=z.positions.getHeight(Ne),li=Math.floor((e-Ve)/$t*re),Sn=this.props.cells[oe].date,hr=Gt(C.slotMinTime,function Jt(r,t){return{years:r.years*t,months:r.months*t,days:r.days*t,milliseconds:r.milliseconds*t}}(W,Ne*re+li)),yr=s.add(Sn,hr),ro=s.add(yr,W);return{dateProfile:C,dateSpan:Object.assign({range:{start:yr,end:ro},allDay:!1},Ye.extraDateSpan),dayEl:f.els[oe],rect:{left:f.lefts[oe],right:f.rights[oe],top:Ve,bottom:Ve+$t},layer:0}}return null}}function yn(r,t){let e=t||r,s=pi(r,e);return null===s&&(e=r,s=1),{snapDuration:e,snapsPerSlot:s}}class On extends bg{sliceRange(t,e){let s=[];for(let l=0;l<e.length;l+=1){let f=jl(t,e[l]);f&&s.push({start:f.start,end:f.end,isStart:f.start.valueOf()===t.start.valueOf(),isEnd:f.end.valueOf()===t.end.valueOf(),col:l})}return s}}class Cn extends dl{constructor(){super(...arguments),this.buildDayRanges=tr(wr),this.slicer=new On,this.timeColsRef={current:null}}render(){let{props:t,context:e}=this,{dateProfile:s,dayTableModel:l}=t,{nowIndicator:f,nextDayThreshold:C}=e.options,z=this.buildDayRanges(l,s,e.dateEnv);return Ot(bc,{unit:f?"minute":"day"},(W,re)=>Ot(Li,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(t,s,null,e,z),{forPrint:t.forPrint,axis:t.axis,dateProfile:s,slatMetas:t.slatMetas,slotDuration:t.slotDuration,cells:l.cells[0],tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,expandRows:t.expandRows,nowDate:W,nowIndicatorSegs:f&&this.slicer.sliceNowDate(W,s,C,e,z),todayRange:re,onScrollTopRequest:t.onScrollTopRequest,onSlatCoords:t.onSlatCoords})))}}function wr(r,t,e){let s=[];for(let l of r.headerDates)s.push({start:e.add(l,t.slotMinTime),end:e.add(l,t.slotMaxTime)});return s}const ln=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function Xn(r,t,e,s,l){let f=new Date(0),C=r,z=Ge(0),W=e||function Cr(r){let t,e,s;for(t=ln.length-1;t>=0;t-=1)if(e=Ge(ln[t]),s=pi(e,r),null!==s&&s>1)return e;return r}(s),re=[];for(;Wi(C)<Wi(t);){let oe=l.add(f,C),Ne=null!==pi(z,W);re.push({date:oe,time:C,key:oe.toISOString(),isoTimeStr:Wc(oe),isLabeled:Ne}),C=Gt(C,s),z=Gt(z,s)}return re}function Er(r,t){let e=new Xl(r.renderRange,t);return new _h(e,!1)}Ys('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var kr=su({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class ts extends p{constructor(){super(...arguments),this.buildTimeColsModel=tr(Er),this.buildSlatMetas=tr(Xn)}render(){let{options:t,dateEnv:e,dateProfileGenerator:s}=this.context,{props:l}=this,{dateProfile:f}=l,C=this.buildTimeColsModel(f,s),z=this.allDaySplitter.splitProps(l),W=this.buildSlatMetas(f.slotMinTime,f.slotMaxTime,t.slotLabelInterval,t.slotDuration,e),{dayMinWidth:re}=t,oe=!re,Ne=re,Ye=t.dayHeaders&&Ot(lm,{dates:C.headerDates,dateProfile:f,datesRepDistinctDays:!0,renderIntro:oe?this.renderHeadAxis:null}),Ve=!1!==t.allDaySlot&&(Ut=>Ot(L_,Object.assign({},z.allDay,{dateProfile:f,dayTableModel:C,nextDayThreshold:t.nextDayThreshold,tableMinWidth:Ut.tableMinWidth,colGroupNode:Ut.tableColGroupNode,renderRowIntro:oe?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:Ut.clientWidth,clientHeight:Ut.clientHeight,forPrint:l.forPrint},this.getAllDayMaxEventProps()))),$t=Ut=>Ot(Cn,Object.assign({},z.timed,{dayTableModel:C,dateProfile:f,axis:oe,slotDuration:t.slotDuration,slatMetas:W,forPrint:l.forPrint,tableColGroupNode:Ut.tableColGroupNode,tableMinWidth:Ut.tableMinWidth,clientWidth:Ut.clientWidth,clientHeight:Ut.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:Ut.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return Ne?this.renderHScrollLayout(Ye,Ve,$t,C.colCnt,re,W,this.state.slatCoords):this.renderSimpleLayout(Ye,Ve,$t)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class Ar extends pr{constructor(){super(...arguments),this.state={textId:Oc()}}render(){let{theme:t,dateEnv:e,options:s,viewApi:l}=this.context,{cellId:f,dayDate:C,todayRange:z}=this.props,{textId:W}=this.state,re=id(C,z),oe=s.listDayFormat?e.format(C,s.listDayFormat):"",Ne=s.listDaySideFormat?e.format(C,s.listDaySideFormat):"",Ye=Object.assign({date:e.toDate(C),view:l,textId:W,text:oe,sideText:Ne,navLinkAttrs:Pu(this.context,C),sideNavLinkAttrs:Pu(this.context,C,"day",!1)},re);return Ot(ka,{elTag:"tr",elClasses:["fc-list-day",...Al(re,t)],elAttrs:{"data-date":Ua(C)},renderProps:Ye,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:bs,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},Ve=>Ot("th",{scope:"colgroup",colSpan:3,id:f,"aria-labelledby":W},Ot(Ve,{elTag:"div",elClasses:["fc-list-day-cushion",t.getClass("tableCellShaded")]})))}}function bs(r){return Ot(zn,null,r.text&&Ot("a",Object.assign({id:r.textId,className:"fc-list-day-text"},r.navLinkAttrs),r.text),r.sideText&&Ot("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},r.sideNavLinkAttrs),r.sideText))}const ks=Gs({hour:"numeric",minute:"2-digit",meridiem:"short"});class As extends pr{render(){let{props:t,context:e}=this,{options:s}=e,{seg:l,timeHeaderId:f,eventHeaderId:C,dateHeaderId:z}=t,W=s.eventTimeFormat||ks;return Ot(Zp,Object.assign({},t,{elTag:"tr",elClasses:["fc-list-event",l.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function xs(r,t){let e=Uh(r,t);return Ot("a",Object.assign({},e),r.eventRange.def.title)}(l,e),seg:l,timeText:"",disableDragging:!0,disableResizing:!0}),(re,oe)=>Ot(zn,null,function Us(r,t,e,s,l){let{options:f}=e;if(!1!==f.displayEventTime){let re,z=r.eventRange.instance,W=!1;return r.eventRange.def.allDay?W=!0:function lg(r){let t=Ul(r);return rr(t.start,t.end)>1}(r.eventRange.range)?r.isStart?re=Ld(r,t,e,null,null,z.range.start,r.end):r.isEnd?re=Ld(r,t,e,null,null,r.start,z.range.end):W=!0:re=Ld(r,t,e),W?Ot(ka,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${s} ${l}`},renderProps:{text:e.options.allDayText,view:e.viewApi},generatorName:"allDayContent",customGenerator:f.allDayContent,defaultGenerator:no,classNameGenerator:f.allDayClassNames,didMount:f.allDayDidMount,willUnmount:f.allDayWillUnmount}):Ot("td",{className:"fc-list-event-time"},re)}return null}(l,W,e,f,z),Ot("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},Ot("span",{className:"fc-list-event-dot",style:{borderColor:oe.borderColor||oe.backgroundColor}})),Ot(re,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${C} ${z}`}})))}}function no(r){return r.text}function ws(r){return r.text}function Io(r){let t=Hr(r.renderRange.start),e=r.renderRange.end,s=[],l=[];for(;t<e;)s.push(t),l.push({start:t,end:Hn(t,1)}),t=Hn(t,1);return{dayDates:s,dayRanges:l}}function co(r){return!1===r?null:Gs(r)}Ys(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');var Ms=su({name:"@fullcalendar/list",optionRefiners:{listDayFormat:co,listDaySideFormat:co,noEventsClassNames:ki,noEventsContent:ki,noEventsDidMount:ki,noEventsWillUnmount:ki},views:{list:{component:class yo extends dl{constructor(){super(...arguments),this.computeDateVars=tr(Io),this.eventStoreToSegs=tr(this._eventStoreToSegs),this.state={timeHeaderId:Oc(),eventHeaderId:Oc(),dateHeaderIdRoot:Oc()},this.setRootEl=t=>{t?this.context.registerInteractiveComponent(this,{el:t}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:t,context:e}=this,{dayDates:s,dayRanges:l}=this.computeDateVars(t.dateProfile),f=this.eventStoreToSegs(t.eventStore,t.eventUiBases,l);return Ot(wd,{elRef:this.setRootEl,elClasses:["fc-list",e.theme.getClass("table"),!1!==e.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:e.viewSpec},Ot(wg,{liquid:!t.isHeightAuto,overflowX:t.isHeightAuto?"visible":"hidden",overflowY:t.isHeightAuto?"visible":"auto"},f.length>0?this.renderSegList(f,s):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:t,viewApi:e}=this.context;return Ot(ka,{elTag:"div",elClasses:["fc-list-empty"],renderProps:{text:t.noEventsText,view:e},generatorName:"noEventsContent",customGenerator:t.noEventsContent,defaultGenerator:ws,classNameGenerator:t.noEventsClassNames,didMount:t.noEventsDidMount,willUnmount:t.noEventsWillUnmount},l=>Ot(l,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(t,e){let{theme:s,options:l}=this.context,{timeHeaderId:f,eventHeaderId:C,dateHeaderIdRoot:z}=this.state,W=function bo(r){let e,s,t=[];for(e=0;e<r.length;e+=1)s=r[e],(t[s.dayIndex]||(t[s.dayIndex]=[])).push(s);return t}(t);return Ot(bc,{unit:"day"},(re,oe)=>{let Ne=[];for(let Ye=0;Ye<W.length;Ye+=1){let Ve=W[Ye];if(Ve){let $t=Ua(e[Ye]),Ut=z+"-"+$t;Ne.push(Ot(Ar,{key:$t,cellId:Ut,dayDate:e[Ye],todayRange:oe})),Ve=dh(Ve,l.eventOrder);for(let li of Ve)Ne.push(Ot(As,Object.assign({key:$t+":"+li.eventRange.instance.instanceId,seg:li,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:f,eventHeaderId:C,dateHeaderId:Ut},yc(li,oe,re))))}}return Ot("table",{className:"fc-list-table "+s.getClass("table")},Ot("thead",null,Ot("tr",null,Ot("th",{scope:"col",id:f},l.timeHint),Ot("th",{scope:"col","aria-hidden":!0}),Ot("th",{scope:"col",id:C},l.eventHint))),Ot("tbody",null,Ne))})}_eventStoreToSegs(t,e,s){return this.eventRangesToSegs(Gh(t,e,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,s)}eventRangesToSegs(t,e){let s=[];for(let l of t)s.push(...this.eventRangeToSegs(l,e));return s}eventRangeToSegs(t,e){let z,W,re,{dateEnv:s}=this.context,{nextDayThreshold:l}=this.context.options,f=t.range,C=t.def.allDay,oe=[];for(z=0;z<e.length;z+=1)if(W=jl(f,e[z]),W&&(re={component:this,eventRange:t,start:W.start,end:W.end,isStart:t.isStart&&W.start.valueOf()===f.start.valueOf(),isEnd:t.isEnd&&W.end.valueOf()===f.end.valueOf(),dayIndex:z},oe.push(re),!re.isEnd&&!C&&z+1<e.length&&f.end<s.add(e[z+1].start,l))){re.end=f.end,re.isEnd=!0;break}return oe}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const hl=["*"],xo=["rootEl"],uo=r=>({$implicit:r});function Jo(r,t){if(1&r&&(i.I0R(0,"div",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}function pl(r,t){if(1&r&&(i.I0R(0,"span",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}function Qo(r,t){if(1&r&&(i.I0R(0,"a",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}function uu(r,t){if(1&r&&(i.I0R(0,"tr",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}function rp(r,t){if(1&r&&(i.I0R(0,"th",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}function hf(r,t){if(1&r&&(i.I0R(0,"td",1,2),i.C_f(2,3),i.C$Y()),2&r){const e=i.GaO();i.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),i.yG2(2),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.S45(4,uo,e.renderProps))}}const pf=["dayHeaderContent"],B_=["dayCellContent"],N_=["weekNumberContent"],Y_=["nowIndicatorContent"],H_=["eventContent"],tv=["slotLaneContent"],iv=["slotLabelContent"],Nu=["allDayContent"],V_=["moreLinkContent"],Eh=["noEventsContent"],nv=["resourceAreaHeaderContent"],rv=["resourceGroupLabelContent"],jd=["resourceLabelContent"],sv=["resourceLaneContent"],m0=["resourceGroupLaneContent"];function ql(r,t){if(1&r&&i.wR5(0,"transport-container",1),2&r){const e=t.$implicit,s=i.GaO();i.E7m("inPlaceOf",e.containerEl)("reportEl",e.reportNewContainerEl)("elTag",e.elTag)("elClasses",e.elClasses)("elStyle",e.elStyle)("elAttrs",e.elAttrs)("template",s.templateMap[e.generatorName])("renderProps",e.renderProps)}}const Dl={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},ff=["events","eventSources","resources"],ov=Object.prototype.hasOwnProperty;function mf(r){return Array.isArray(r)?r.map(mf):r instanceof Date?new Date(r.valueOf()):"object"==typeof r&&r?Ud(r,mf):r}function Ud(r,t){const e={};for(const s in r)ov.call(r,s)&&(e[s]=t(r[s],s));return e}function g0(r,t){if(r===t)return!0;if(r&&t&&"object"==typeof r&&"object"==typeof t){if(r.constructor!==t.constructor)return!1;var e,s,l;if(Array.isArray(r)){if((e=r.length)!=t.length)return!1;for(s=e;0!=s--;)if(!g0(r[s],t[s]))return!1;return!0}if(r.constructor===RegExp)return r.source===t.source&&r.flags===t.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===t.toString();if((e=(l=Object.keys(r)).length)!==Object.keys(t).length)return!1;for(s=e;0!=s--;)if(!Object.prototype.hasOwnProperty.call(t,l[s]))return!1;for(s=e;0!=s--;){var f=l[s];if(!g0(r[f],t[f]))return!1}return!0}return r!=r&&t!=t}const G_=typeof document<"u"?document.createDocumentFragment():null;let Yw=(()=>{class r{constructor(e){this.element=e}ngAfterViewInit(){G_&&G_.appendChild(this.element.nativeElement)}ngOnDestroy(){G_&&G_.removeChild(this.element.nativeElement)}}return r.\u0275fac=function(e){return new(e||r)(i.GI1(i.GMv))},r.\u0275cmp=i.In1({type:r,selectors:[["offscreen-fragment"]],ngContentSelectors:hl,decls:1,vars:0,template:function(e,s){1&e&&(i.kPM(),i._Xx(0))},encapsulation:2}),r})();const zm=typeof document<"u"?document.createDocumentFragment():null;let Hw=(()=>{class r{ngAfterViewInit(){const e=this.rootElRef?.nativeElement;Rb(e,this.inPlaceOf),v0(e,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(e)}ngOnChanges(e){const s=this.rootElRef?.nativeElement;if(s)if(this.inPlaceOf.parentNode!==zm)Rb(s,this.inPlaceOf),v0(s,void 0,this.elAttrs),this.reportEl(s);else{const l=e.elAttrs;l&&v0(s,l.previousValue,l.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===zm&&zm&&zm.removeChild(this.inPlaceOf),this.reportEl(null)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=i.In1({type:r,selectors:[["transport-container"]],viewQuery:function(e,s){if(1&e&&i.CC$(xo,5),2&e){let l;i.wto(l=i.Gqi())&&(s.rootElRef=l.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[i.SYr],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&i.yuY(0,Jo,3,6,"ng-template",0)(1,pl,3,6,"ng-template",0)(2,Qo,3,6,"ng-template",0)(3,uu,3,6,"ng-template",0)(4,rp,3,6,"ng-template",0)(5,hf,3,6,"ng-template",0),2&e&&(i.E7m("ngIf","div"==s.elTag),i.yG2(),i.E7m("ngIf","span"==s.elTag),i.yG2(),i.E7m("ngIf","a"==s.elTag),i.yG2(),i.E7m("ngIf","tr"==s.elTag),i.yG2(),i.E7m("ngIf","th"==s.elTag),i.yG2(),i.E7m("ngIf","td"==s.elTag))},dependencies:[Ue.u_,Ue.QF,Ue.Qt,Ue.XV],encapsulation:2}),r})();function Rb(r,t){t.parentNode?.insertBefore(r,t.nextSibling),zm&&zm.appendChild(t)}function v0(r,t={},e={}){for(const s in t)s in e||(r[s]=null);for(const s in e)r[s]=e[s]}let Vw=(()=>{class r{constructor(e,s){this.element=e,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const l=new Py;l.subscribe(f=>{this.customRenderingMap=f,this.customRenderingArray=void 0,s.detectChanges()}),this.handleCustomRendering=l.handle.bind(l),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:e}=this,s={...this.options,...this.buildInputOptions()};this.optionSnapshot=Ud(s,(z,W)=>e&&Dl[W]?mf(z):z);const l=this.element.nativeElement,f=this.calendar=new tp(l,{...s,...this.buildExtraOptions()}),C=l.closest("ion-content");C&&C.componentOnReady?C.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{f.render()})}):f.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:e,optionSnapshot:s}=this,l={...this.options,...this.buildInputOptions()},f={},C=[];for(const W in l)if(l.hasOwnProperty(W)){let re=l[W];e&&Dl[W]?g0(s[W],re)||(s[W]=mf(re),C.push(W)):s[W]!==re&&(s[W]=re,C.push(W)),f[W]=re}const z=Object.keys(s);for(const W of z)W in l||(delete s[W],C.push(W));C.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...f,...this.buildExtraOptions()},C))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const e={};for(const s of ff){const l=this[s];null!=l&&(e[s]=l)}return e}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplaces:!0}}trackCustomRendering(e,s){return s.id}}return r.\u0275fac=function(e){return new(e||r)(i.GI1(i.GMv),i.GI1(i.kD9))},r.\u0275cmp=i.In1({type:r,selectors:[["full-calendar"]],contentQueries:function(e,s,l){if(1&e&&(i.szK(l,pf,7),i.szK(l,B_,7),i.szK(l,N_,7),i.szK(l,Y_,7),i.szK(l,H_,7),i.szK(l,tv,7),i.szK(l,iv,7),i.szK(l,Nu,7),i.szK(l,V_,7),i.szK(l,Eh,7),i.szK(l,nv,7),i.szK(l,rv,7),i.szK(l,jd,7),i.szK(l,sv,7),i.szK(l,m0,7)),2&e){let f;i.wto(f=i.Gqi())&&(s.dayHeaderContent=f.first),i.wto(f=i.Gqi())&&(s.dayCellContent=f.first),i.wto(f=i.Gqi())&&(s.weekNumberContent=f.first),i.wto(f=i.Gqi())&&(s.nowIndicatorContent=f.first),i.wto(f=i.Gqi())&&(s.eventContent=f.first),i.wto(f=i.Gqi())&&(s.slotLaneContent=f.first),i.wto(f=i.Gqi())&&(s.slotLabelContent=f.first),i.wto(f=i.Gqi())&&(s.allDayContent=f.first),i.wto(f=i.Gqi())&&(s.moreLinkContent=f.first),i.wto(f=i.Gqi())&&(s.noEventsContent=f.first),i.wto(f=i.Gqi())&&(s.resourceAreaHeaderContent=f.first),i.wto(f=i.Gqi())&&(s.resourceGroupLabelContent=f.first),i.wto(f=i.Gqi())&&(s.resourceLabelContent=f.first),i.wto(f=i.Gqi())&&(s.resourceLaneContent=f.first),i.wto(f=i.Gqi())&&(s.resourceGroupLaneContent=f.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(e,s){1&e&&(i.I0R(0,"offscreen-fragment"),i.yuY(1,ql,1,8,"transport-container",0),i.C$Y()),2&e&&(i.yG2(),i.E7m("ngForOf",s.customRenderings)("ngForTrackBy",s.trackCustomRendering))},dependencies:[Yw,Hw,Ue.ay],encapsulation:2}),r})(),Gw=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.a4G({type:r}),r.\u0275inj=i.s3X({imports:[[Ue.MD]]}),r})();const jw=[{path:"company",component:gt},{path:"add-company",component:xn},{path:"edit-company/:id",component:xn},{path:"employee",component:Sr},{path:"add-employee",component:_},{path:"edit-employee/:id",component:_},{path:"employee-detail/:id",component:ss},{path:"attendance-list",component:Il},{path:"department-list",component:ml},{path:"designation-list",component:Oa},{path:"attendance-calender/:id/:company_id",component:(()=>{class r{constructor(e,s){this.api=e,this.route=s,this.spinnerStatus=!1,this.attendanceData=[],this.attendanceDataList=[],this.checkIndetails={},this.urlId=null,this.company_id=null,this.calendarOptions={plugins:[ev,Ms,E_,kr],headerToolbar:{right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek",center:"title",left:"prev,next today"},initialView:"dayGridMonth",themeSystem:"bootstrap",timeZone:"local",selectable:!0,navLinks:!0,eventResizableFromStart:!0,events:[],eventContent:function(l){const{extendedProps:f}=l.event;return{html:`\n\n          <div >\n        \n           <b>Check-in:</b> ${f.earliestCheckInTime} <br>\n            <b>Check-out:</b> ${f.latestCheckOutTime||"Ongoing"} <br>\n            <b>Total Duration:</b>   ${f.totalDuration}\n           \n           \n          </div>\n        `}}}}ngOnInit(){this.route.params.subscribe(e=>{}),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null,this.company_id=e.company_id?Number(e.company_id):null}),this.getAttendance(),this.urlId&&this.company_id&&this.getCheckInDetail()}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid("getAttendence?company_id=1&date=2024-08-10").subscribe(s=>{this.toggleSpinner(!1),s&&s.status?(this.attendanceData=s.data||[],this.attendanceDataList=s.data||[]):(this.attendanceData=[],this.attendanceDataList=[],this.toggleSpinner(!1))},s=>{this.handleError(s.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetailAllDate?emp_id=${this.urlId}&company_id=${this.company_id}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status){this.checkIndetails=e.data,console.log(this.checkIndetails);const s=this.checkIndetails.checkInsByDate.flatMap(l=>({title:`${l.earliestCheckInTime} - ${l.latestCheckOutTime||"Ongoing"}`,start:`${l.date}T${l.earliestCheckInTime}`,end:l.latestCheckOutTime?`${l.date}T${l.latestCheckOutTime}`:null,extendedProps:{earliestCheckInTime:this.formatTime(l.earliestCheckInTime),latestCheckOutTime:this.formatTime(l.latestCheckOutTime),totalDuration:l.totalDuration},className:"bg-warning-subtle"}));this.calendarOptions={...this.calendarOptions,events:s}}else this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}formatTime(e){if(!e)return"Invalid time";const[s,l,f]=e.split(":");return`${+s%12||12}:${l} ${+s>=12?"PM":"AM"}`}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(De),i.GI1(k.gV))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["app-atten-calender"]],decls:6,vars:1,consts:[[1,"calendar-wrapper","d-lg-flex","gap-4"],[1,"w-100"],[1,"card","card-h-100"],[1,""],["id","calendar"],[3,"options"]],template:function(s,l){1&s&&(i.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),i.wR5(5,"full-calendar",5),i.C$Y()()()()()),2&s&&(i.yG2(5),i.E7m("options",l.calendarOptions))},dependencies:[Vw]})}return r})()}];let Uw=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({imports:[k.qQ.forChild(jw),k.qQ]})}return r})();var Ww=Rt(1116),zb=Rt(2700);function Kl(r){this.content=r}Kl.prototype={constructor:Kl,find:function(r){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===r)return t;return-1},get:function(r){var t=this.find(r);return-1==t?void 0:this.content[t+1]},update:function(r,t,e){var s=e&&e!=r?this.remove(e):this,l=s.find(r),f=s.content.slice();return-1==l?f.push(e||r,t):(f[l+1]=t,e&&(f[l]=e)),new Kl(f)},remove:function(r){var t=this.find(r);if(-1==t)return this;var e=this.content.slice();return e.splice(t,2),new Kl(e)},addToStart:function(r,t){return new Kl([r,t].concat(this.remove(r).content))},addToEnd:function(r,t){var e=this.remove(r).content.slice();return e.push(r,t),new Kl(e)},addBefore:function(r,t,e){var s=this.remove(t),l=s.content.slice(),f=s.find(r);return l.splice(-1==f?l.length:f,0,t,e),new Kl(l)},forEach:function(r){for(var t=0;t<this.content.length;t+=2)r(this.content[t],this.content[t+1])},prepend:function(r){return(r=Kl.from(r)).size?new Kl(r.content.concat(this.subtract(r).content)):this},append:function(r){return(r=Kl.from(r)).size?new Kl(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var t=this;r=Kl.from(r);for(var e=0;e<r.content.length;e+=2)t=t.remove(r.content[e]);return t},toObject:function(){var r={};return this.forEach(function(t,e){r[t]=e}),r},get size(){return this.content.length>>1}},Kl.from=function(r){if(r instanceof Kl)return r;var t=[];if(r)for(var e in r)t.push(e,r[e]);return new Kl(t)};const Fb=Kl;function Bb(r,t,e){for(let s=0;;s++){if(s==r.childCount||s==t.childCount)return r.childCount==t.childCount?null:e;let l=r.child(s),f=t.child(s);if(l!=f){if(!l.sameMarkup(f))return e;if(l.isText&&l.text!=f.text){for(let C=0;l.text[C]==f.text[C];C++)e++;return e}if(l.content.size||f.content.size){let C=Bb(l.content,f.content,e+1);if(null!=C)return C}e+=l.nodeSize}else e+=l.nodeSize}}function Nb(r,t,e,s){for(let l=r.childCount,f=t.childCount;;){if(0==l||0==f)return l==f?null:{a:e,b:s};let C=r.child(--l),z=t.child(--f),W=C.nodeSize;if(C!=z){if(!C.sameMarkup(z))return{a:e,b:s};if(C.isText&&C.text!=z.text){let re=0,oe=Math.min(C.text.length,z.text.length);for(;re<oe&&C.text[C.text.length-re-1]==z.text[z.text.length-re-1];)re++,e--,s--;return{a:e,b:s}}if(C.content.size||z.content.size){let re=Nb(C.content,z.content,e-1,s-1);if(re)return re}e-=W,s-=W}else e-=W,s-=W}}class Rn{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let s=0;s<t.length;s++)this.size+=t[s].nodeSize}nodesBetween(t,e,s,l=0,f){for(let C=0,z=0;z<e;C++){let W=this.content[C],re=z+W.nodeSize;if(re>t&&!1!==s(W,l+z,f||null,C)&&W.content.size){let oe=z+1;W.nodesBetween(Math.max(0,t-oe),Math.min(W.content.size,e-oe),s,l+oe)}z=re}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,s,l){let f="",C=!0;return this.nodesBetween(t,e,(z,W)=>{z.isText?(f+=z.text.slice(Math.max(t,W)-W,e-W),C=!s):z.isLeaf?(l?f+="function"==typeof l?l(z):l:z.type.spec.leafText&&(f+=z.type.spec.leafText(z)),C=!s):!C&&z.isBlock&&(f+=s,C=!0)},0),f}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,s=t.firstChild,l=this.content.slice(),f=0;for(e.isText&&e.sameMarkup(s)&&(l[l.length-1]=e.withText(e.text+s.text),f=1);f<t.content.length;f++)l.push(t.content[f]);return new Rn(l,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let s=[],l=0;if(e>t)for(let f=0,C=0;C<e;f++){let z=this.content[f],W=C+z.nodeSize;W>t&&((C<t||W>e)&&(z=z.isText?z.cut(Math.max(0,t-C),Math.min(z.text.length,e-C)):z.cut(Math.max(0,t-C-1),Math.min(z.content.size,e-C-1))),s.push(z),l+=z.nodeSize),C=W}return new Rn(s,l)}cutByIndex(t,e){return t==e?Rn.empty:0==t&&e==this.content.length?this:new Rn(this.content.slice(t,e))}replaceChild(t,e){let s=this.content[t];if(s==e)return this;let l=this.content.slice(),f=this.size+e.nodeSize-s.nodeSize;return l[t]=e,new Rn(l,f)}addToStart(t){return new Rn([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Rn(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,s=0;e<this.content.length;e++){let l=this.content[e];t(l,s,e),s+=l.nodeSize}}findDiffStart(t,e=0){return Bb(this,t,e)}findDiffEnd(t,e=this.size,s=t.size){return Nb(this,t,e,s)}findIndex(t,e=-1){if(0==t)return j_(0,t);if(t==this.size)return j_(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let s=0,l=0;;s++){let C=l+this.child(s).nodeSize;if(C>=t)return C==t||e>0?j_(s+1,C):j_(s,l);l=C}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return Rn.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Rn(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Rn.empty;let e,s=0;for(let l=0;l<t.length;l++){let f=t[l];s+=f.nodeSize,l&&f.isText&&t[l-1].sameMarkup(f)?(e||(e=t.slice(0,l)),e[e.length-1]=f.withText(e[e.length-1].text+f.text)):e&&e.push(f)}return new Rn(e||t,s)}static from(t){if(!t)return Rn.empty;if(t instanceof Rn)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Rn([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Rn.empty=new Rn([],0);const _0={index:0,offset:0};function j_(r,t){return _0.index=r,_0.offset=t,_0}function U_(r,t){if(r===t)return!0;if(!r||"object"!=typeof r||!t||"object"!=typeof t)return!1;let e=Array.isArray(r);if(Array.isArray(t)!=e)return!1;if(e){if(r.length!=t.length)return!1;for(let s=0;s<r.length;s++)if(!U_(r[s],t[s]))return!1}else{for(let s in r)if(!(s in t)||!U_(r[s],t[s]))return!1;for(let s in t)if(!(s in r))return!1}return!0}let ho=(()=>{class r{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,l=!1;for(let f=0;f<e.length;f++){let C=e[f];if(this.eq(C))return e;if(this.type.excludes(C.type))s||(s=e.slice(0,f));else{if(C.type.excludes(this.type))return e;!l&&C.type.rank>this.type.rank&&(s||(s=e.slice(0,f)),s.push(this),l=!0),s&&s.push(C)}}return s||(s=e.slice()),l||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&U_(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let l=e.marks[s.type];if(!l)throw new RangeError(`There is no mark type ${s.type} in this schema`);return l.create(s.attrs)}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let l=0;l<e.length;l++)if(!e[l].eq(s[l]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return r.none;if(e instanceof r)return[e];let s=e.slice();return s.sort((l,f)=>l.type.rank-f.type.rank),s}}return r.none=[],r})();class W_ extends Error{}class fr{constructor(t,e,s){this.content=t,this.openStart=e,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let s=Hb(this.content,t+this.openStart,e);return s&&new fr(s,this.openStart,this.openEnd)}removeBetween(t,e){return new fr(Yb(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return fr.empty;let s=e.openStart||0,l=e.openEnd||0;if("number"!=typeof s||"number"!=typeof l)throw new RangeError("Invalid input for Slice.fromJSON");return new fr(Rn.fromJSON(t,e.content),s,l)}static maxOpen(t,e=!0){let s=0,l=0;for(let f=t.firstChild;f&&!f.isLeaf&&(e||!f.type.spec.isolating);f=f.firstChild)s++;for(let f=t.lastChild;f&&!f.isLeaf&&(e||!f.type.spec.isolating);f=f.lastChild)l++;return new fr(t,s,l)}}function Yb(r,t,e){let{index:s,offset:l}=r.findIndex(t),f=r.maybeChild(s),{index:C,offset:z}=r.findIndex(e);if(l==t||f.isText){if(z!=e&&!r.child(C).isText)throw new RangeError("Removing non-flat range");return r.cut(0,t).append(r.cut(e))}if(s!=C)throw new RangeError("Removing non-flat range");return r.replaceChild(s,f.copy(Yb(f.content,t-l-1,e-l-1)))}function Hb(r,t,e,s){let{index:l,offset:f}=r.findIndex(t),C=r.maybeChild(l);if(f==t||C.isText)return s&&!s.canReplace(l,l,e)?null:r.cut(0,t).append(e).append(r.cut(t));let z=Hb(C.content,t-f-1,e);return z&&r.replaceChild(l,C.copy(z))}function $w(r,t,e){if(e.openStart>r.depth)throw new W_("Inserted content deeper than insertion position");if(r.depth-e.openStart!=t.depth-e.openEnd)throw new W_("Inconsistent open depths");return Vb(r,t,e,0)}function Vb(r,t,e,s){let l=r.index(s),f=r.node(s);if(l==t.index(s)&&s<r.depth-e.openStart){let C=Vb(r,t,e,s+1);return f.copy(f.content.replaceChild(l,C))}if(e.content.size){if(e.openStart||e.openEnd||r.depth!=s||t.depth!=s){let{start:C,end:z}=function Xw(r,t){let e=t.depth-r.openStart,l=t.node(e).copy(r.content);for(let f=e-1;f>=0;f--)l=t.node(f).copy(Rn.from(l));return{start:l.resolveNoCache(r.openStart+e),end:l.resolveNoCache(l.content.size-r.openEnd-e)}}(e,r);return vf(f,jb(r,C,z,t,s))}{let C=r.parent,z=C.content;return vf(C,z.cut(0,r.parentOffset).append(e.content).append(z.cut(t.parentOffset)))}}return vf(f,$_(r,t,s))}function Gb(r,t){if(!t.type.compatibleContent(r.type))throw new W_("Cannot join "+t.type.name+" onto "+r.type.name)}function y0(r,t,e){let s=r.node(e);return Gb(s,t.node(e)),s}function gf(r,t){let e=t.length-1;e>=0&&r.isText&&r.sameMarkup(t[e])?t[e]=r.withText(t[e].text+r.text):t.push(r)}function av(r,t,e,s){let l=(t||r).node(e),f=0,C=t?t.index(e):l.childCount;r&&(f=r.index(e),r.depth>e?f++:r.textOffset&&(gf(r.nodeAfter,s),f++));for(let z=f;z<C;z++)gf(l.child(z),s);t&&t.depth==e&&t.textOffset&&gf(t.nodeBefore,s)}function vf(r,t){return r.type.checkContent(t),r.copy(t)}function jb(r,t,e,s,l){let f=r.depth>l&&y0(r,t,l+1),C=s.depth>l&&y0(e,s,l+1),z=[];return av(null,r,l,z),f&&C&&t.index(l)==e.index(l)?(Gb(f,C),gf(vf(f,jb(r,t,e,s,l+1)),z)):(f&&gf(vf(f,$_(r,t,l+1)),z),av(t,e,l,z),C&&gf(vf(C,$_(e,s,l+1)),z)),av(s,null,l,z),new Rn(z)}function $_(r,t,e){let s=[];return av(null,r,e,s),r.depth>e&&gf(vf(y0(r,t,e+1),$_(r,t,e+1)),s),av(t,null,e,s),new Rn(s)}fr.empty=new fr(Rn.empty,0,0);class lv{constructor(t,e,s){this.pos=t,this.path=e,this.parentOffset=s,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=t.child(e);return s?t.child(e).cut(s):l}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let s=this.path[3*e],l=0==e?0:this.path[3*e-1]+1;for(let f=0;f<t;f++)l+=s.child(f).nodeSize;return l}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return ho.none;if(this.textOffset)return t.child(e).marks;let s=t.maybeChild(e-1),l=t.maybeChild(e);if(!s){let z=s;s=l,l=z}let f=s.marks;for(var C=0;C<f.length;C++)!1===f[C].type.spec.inclusive&&(!l||!f[C].isInSet(l.marks))&&(f=f[C--].removeFromSet(f));return f}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let s=e.marks,l=t.parent.maybeChild(t.index());for(var f=0;f<s.length;f++)!1===s[f].type.spec.inclusive&&(!l||!s[f].isInSet(l.marks))&&(s=s[f--].removeFromSet(s));return s}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);s>=0;s--)if(t.pos<=this.end(s)&&(!e||e(this.node(s))))return new X_(this,t,s);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let s=[],l=0,f=e;for(let C=t;;){let{index:z,offset:W}=C.content.findIndex(f),re=f-W;if(s.push(C,z,l+W),!re||(C=C.child(z),C.isText))break;f=re-1,l+=W+1}return new lv(e,s,f)}static resolveCached(t,e){for(let l=0;l<b0.length;l++){let f=b0[l];if(f.pos==e&&f.doc==t)return f}let s=b0[x0]=lv.resolve(t,e);return x0=(x0+1)%Zw,s}}let b0=[],x0=0,Zw=12;class X_{constructor(t,e,s){this.$from=t,this.$to=e,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qw=Object.create(null);class Sh{constructor(t,e,s,l=ho.none){this.type=t,this.attrs=e,this.marks=l,this.content=s||Rn.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,s,l=0){this.content.nodesBetween(t,e,s,l,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,s,l){return this.content.textBetween(t,e,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,s){return this.type==t&&U_(this.attrs,e||t.defaultAttrs||qw)&&ho.sameSet(this.marks,s||ho.none)}copy(t=null){return t==this.content?this:new Sh(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Sh(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,s=!1){if(t==e)return fr.empty;let l=this.resolve(t),f=this.resolve(e),C=s?0:l.sharedDepth(e),z=l.start(C),re=l.node(C).content.cut(l.pos-z,f.pos-z);return new fr(re,l.depth-C,f.depth-C)}replace(t,e,s){return $w(this.resolve(t),this.resolve(e),s)}nodeAt(t){for(let e=this;;){let{index:s,offset:l}=e.content.findIndex(t);if(e=e.maybeChild(s),!e)return null;if(l==t||e.isText)return e;t-=l+1}}childAfter(t){let{index:e,offset:s}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:s}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:s}=this.content.findIndex(t);if(s<t)return{node:this.content.child(e),index:e,offset:s};let l=this.content.child(e-1);return{node:l,index:e-1,offset:s-l.nodeSize}}resolve(t){return lv.resolveCached(this,t)}resolveNoCache(t){return lv.resolve(this,t)}rangeHasMark(t,e,s){let l=!1;return e>t&&this.nodesBetween(t,e,f=>(s.isInSet(f.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ub(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,s=Rn.empty,l=0,f=s.childCount){let C=this.contentMatchAt(t).matchFragment(s,l,f),z=C&&C.matchFragment(this.content,e);if(!z||!z.validEnd)return!1;for(let W=l;W<f;W++)if(!this.type.allowsMarks(s.child(W).marks))return!1;return!0}canReplaceWith(t,e,s,l){if(l&&!this.type.allowsMarks(l))return!1;let f=this.contentMatchAt(t).matchType(s),C=f&&f.matchFragment(this.content,e);return!!C&&C.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=ho.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!ho.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let s=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,s)}let l=Rn.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,l,s)}}Sh.prototype.text=void 0;class Z_ extends Sh{constructor(t,e,s,l){if(super(t,e,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ub(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Z_(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Z_(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Ub(r,t){for(let e=r.length-1;e>=0;e--)t=r[e].type.name+"("+t+")";return t}class _f{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let s=new Kw(t,e);if(null==s.next)return _f.empty;let l=Wb(s);s.next&&s.err("Unexpected trailing text");let f=function rC(r){let t=Object.create(null);return function e(s){let l=[];s.forEach(C=>{r[C].forEach(({term:z,to:W})=>{if(!z)return;let re;for(let oe=0;oe<l.length;oe++)l[oe][0]==z&&(re=l[oe][1]);Zb(r,W).forEach(oe=>{re||l.push([z,re=[]]),-1==re.indexOf(oe)&&re.push(oe)})})});let f=t[s.join(",")]=new _f(s.indexOf(r.length-1)>-1);for(let C=0;C<l.length;C++){let z=l[C][1].sort(Xb);f.next.push({type:l[C][0],next:t[z.join(",")]||e(z)})}return f}(Zb(r,0))}(function nC(r){let t=[[]];return l(function f(C,z){if("choice"==C.type)return C.exprs.reduce((W,re)=>W.concat(f(re,z)),[]);if("seq"!=C.type){if("star"==C.type){let W=e();return s(z,W),l(f(C.expr,W),W),[s(W)]}if("plus"==C.type){let W=e();return l(f(C.expr,z),W),l(f(C.expr,W),W),[s(W)]}if("opt"==C.type)return[s(z)].concat(f(C.expr,z));if("range"==C.type){let W=z;for(let re=0;re<C.min;re++){let oe=e();l(f(C.expr,W),oe),W=oe}if(-1==C.max)l(f(C.expr,W),W);else for(let re=C.min;re<C.max;re++){let oe=e();s(W,oe),l(f(C.expr,W),oe),W=oe}return[s(W)]}if("name"==C.type)return[s(z,void 0,C.value)];throw new Error("Unknown expr type")}for(let W=0;;W++){let re=f(C.exprs[W],z);if(W==C.exprs.length-1)return re;l(re,z=e())}}(r,0),e()),t;function e(){return t.push([])-1}function s(C,z,W){let re={term:W,to:z};return t[C].push(re),re}function l(C,z){C.forEach(W=>W.to=z)}}(l));return function sC(r,t){for(let e=0,s=[r];e<s.length;e++){let l=s[e],f=!l.validEnd,C=[];for(let z=0;z<l.next.length;z++){let{type:W,next:re}=l.next[z];C.push(W.name),f&&!(W.isText||W.hasRequiredAttrs())&&(f=!1),-1==s.indexOf(re)&&s.push(re)}f&&t.err("Only non-generatable nodes ("+C.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(f,s),f}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,s=t.childCount){let l=this;for(let f=e;l&&f<s;f++)l=l.matchType(t.child(f).type);return l}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let s=0;s<t.next.length;s++)if(this.next[e].type==t.next[s].type)return!0;return!1}fillBefore(t,e=!1,s=0){let l=[this];return function f(C,z){let W=C.matchFragment(t,s);if(W&&(!e||W.validEnd))return Rn.from(z.map(re=>re.createAndFill()));for(let re=0;re<C.next.length;re++){let{type:oe,next:Ne}=C.next[re];if(!oe.isText&&!oe.hasRequiredAttrs()&&-1==l.indexOf(Ne)){l.push(Ne);let Ye=f(Ne,z.concat(oe));if(Ye)return Ye}}return null}(this,[])}findWrapping(t){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==t)return this.wrapCache[s+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),f=l.match;if(f.matchType(t)){let C=[];for(let z=l;z.type;z=z.via)C.push(z.type);return C.reverse()}for(let C=0;C<f.next.length;C++){let{type:z,next:W}=f.next[C];!z.isLeaf&&!z.hasRequiredAttrs()&&!(z.name in e)&&(!l.type||W.validEnd)&&(s.push({match:z.contentMatch,type:z,via:l}),e[z.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(s){t.push(s);for(let l=0;l<s.next.length;l++)-1==t.indexOf(s.next[l].next)&&e(s.next[l].next)}(this),t.map((s,l)=>{let f=l+(s.validEnd?"*":" ")+" ";for(let C=0;C<s.next.length;C++)f+=(C?", ":"")+s.next[C].type.name+"->"+t.indexOf(s.next[C].next);return f}).join("\n")}}_f.empty=new _f(!0);class Kw{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Wb(r){let t=[];do{t.push(Jw(r))}while(r.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Jw(r){let t=[];do{t.push(Qw(r))}while(r.next&&")"!=r.next&&"|"!=r.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function Qw(r){let t=function iC(r){if(r.eat("(")){let t=Wb(r);return r.eat(")")||r.err("Missing closing paren"),t}if(!/\W/.test(r.next)){let t=function tC(r,t){let e=r.nodeTypes,s=e[t];if(s)return[s];let l=[];for(let f in e){let C=e[f];C.groups.indexOf(t)>-1&&l.push(C)}return 0==l.length&&r.err("No node type or group '"+t+"' found"),l}(r,r.next).map(e=>(null==r.inline?r.inline=e.isInline:r.inline!=e.isInline&&r.err("Mixing inline and block content"),{type:"name",value:e}));return r.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}r.err("Unexpected token '"+r.next+"'")}(r);for(;;)if(r.eat("+"))t={type:"plus",expr:t};else if(r.eat("*"))t={type:"star",expr:t};else if(r.eat("?"))t={type:"opt",expr:t};else{if(!r.eat("{"))break;t=eC(r,t)}return t}function $b(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let t=Number(r.next);return r.pos++,t}function eC(r,t){let e=$b(r),s=e;return r.eat(",")&&(s="}"!=r.next?$b(r):-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:e,max:s,expr:t}}function Xb(r,t){return t-r}function Zb(r,t){let e=[];return function s(l){let f=r[l];if(1==f.length&&!f[0].term)return s(f[0].to);e.push(l);for(let C=0;C<f.length;C++){let{term:z,to:W}=f[C];!z&&-1==e.indexOf(W)&&s(W)}}(t),e.sort(Xb)}function qb(r){let t=Object.create(null);for(let e in r){let s=r[e];if(!s.hasDefault)return null;t[e]=s.default}return t}function Kb(r,t){let e=Object.create(null);for(let s in r){let l=t&&t[s];if(void 0===l){let f=r[s];if(!f.hasDefault)throw new RangeError("No value supplied for attribute "+s);l=f.default}e[s]=l}return e}function Jb(r){let t=Object.create(null);if(r)for(let e in r)t[e]=new oC(r[e]);return t}class q_{constructor(t,e,s){this.name=t,this.schema=e,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=Jb(s.attrs),this.defaultAttrs=qb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==_f.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Kb(this.attrs,t)}create(t=null,e,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Sh(this,this.computeAttrs(t),Rn.from(e),ho.setFrom(s))}createChecked(t=null,e,s){return e=Rn.from(e),this.checkContent(e),new Sh(this,this.computeAttrs(t),e,ho.setFrom(s))}createAndFill(t=null,e,s){if(t=this.computeAttrs(t),(e=Rn.from(e)).size){let C=this.contentMatch.fillBefore(e);if(!C)return null;e=C.append(e)}let l=this.contentMatch.matchFragment(e),f=l&&l.fillBefore(Rn.empty,!0);return f?new Sh(this,t,e.append(f),ho.setFrom(s)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let s=0;s<t.childCount;s++)if(!this.allowsMarks(t.child(s).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let s=0;s<t.length;s++)this.allowsMarkType(t[s].type)?e&&e.push(t[s]):e||(e=t.slice(0,s));return e?e.length?e:ho.none:t}static compile(t,e){let s=Object.create(null);t.forEach((f,C)=>s[f]=new q_(f,e,C));let l=e.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let f in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}}class oC{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class K_{constructor(t,e,s,l){this.name=t,this.rank=e,this.schema=s,this.spec=l,this.attrs=Jb(l.attrs),this.excluded=null;let f=qb(this.attrs);this.instance=f?new ho(this,f):null}create(t=null){return!t&&this.instance?this.instance:new ho(this,Kb(this.attrs,t))}static compile(t,e){let s=Object.create(null),l=0;return t.forEach((f,C)=>s[f]=new K_(f,l++,e,C)),s}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}function Qb(r,t){let e=[];for(let s=0;s<t.length;s++){let l=t[s],f=r.marks[l],C=f;if(f)e.push(f);else for(let z in r.marks){let W=r.marks[z];("_"==l||W.spec.group&&W.spec.group.split(" ").indexOf(l)>-1)&&e.push(C=W)}if(!C)throw new SyntaxError("Unknown mark type: '"+t[s]+"'")}return e}const ax=Math.pow(2,16);function fC(r,t){return r+t*ax}function lx(r){return 65535&r}class E0{constructor(t,e,s){this.pos=t,this.delInfo=e,this.recover=s}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class du{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&du.empty)return du.empty}recover(t){let e=0,s=lx(t);if(!this.inverted)for(let l=0;l<s;l++)e+=this.ranges[3*l+2]-this.ranges[3*l+1];return this.ranges[3*s]+e+function mC(r){return(r-(65535&r))/ax}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,s){let l=0,f=this.inverted?2:1,C=this.inverted?1:2;for(let z=0;z<this.ranges.length;z+=3){let W=this.ranges[z]-(this.inverted?l:0);if(W>t)break;let re=this.ranges[z+f],oe=this.ranges[z+C],Ne=W+re;if(t<=Ne){let Ve=W+l+((re?t==W?-1:t==Ne?1:e:e)<0?0:oe);if(s)return Ve;let $t=t==(e<0?W:Ne)?null:fC(z/3,t-W),Ut=t==W?2:t==Ne?1:4;return(e<0?t!=W:t!=Ne)&&(Ut|=8),new E0(Ve,Ut,$t)}l+=oe-re}return s?t+l:new E0(t+l,0,null)}touches(t,e){let s=0,l=lx(e),f=this.inverted?2:1,C=this.inverted?1:2;for(let z=0;z<this.ranges.length;z+=3){let W=this.ranges[z]-(this.inverted?s:0);if(W>t)break;let re=this.ranges[z+f];if(t<=W+re&&z==3*l)return!0;s+=this.ranges[z+C]-re}return!1}forEach(t){let e=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,f=0;l<this.ranges.length;l+=3){let C=this.ranges[l],z=C-(this.inverted?f:0),W=C+(this.inverted?0:f),re=this.ranges[l+e],oe=this.ranges[l+s];t(z,z+re,W,W+oe),f+=oe-re}}invert(){return new du(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?du.empty:new du(t<0?[0,-t,0]:[0,0,t])}}du.empty=new du([]);const S0=Object.create(null);class Jl{getMap(){return du.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=S0[e.stepType];if(!s)throw new RangeError(`No step type ${e.stepType} defined`);return s.fromJSON(t,e)}static jsonID(t,e){if(t in S0)throw new RangeError("Duplicate use of step JSON ID "+t);return S0[t]=e,e.prototype.jsonID=t,e}}class Da{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new Da(t,null)}static fail(t){return new Da(null,t)}static fromReplace(t,e,s,l){try{return Da.ok(t.replace(e,s,l))}catch(f){if(f instanceof W_)return Da.fail(f.message);throw f}}}function T0(r,t,e){let s=[];for(let l=0;l<r.childCount;l++){let f=r.child(l);f.content.size&&(f=f.copy(T0(f.content,t,f))),f.isInline&&(f=t(f,e,l)),s.push(f)}return Rn.fromArray(s)}class sp extends Jl{constructor(t,e,s){super(),this.from=t,this.to=e,this.mark=s}apply(t){let e=t.slice(this.from,this.to),s=t.resolve(this.from),l=s.node(s.sharedDepth(this.to)),f=new fr(T0(e.content,(C,z)=>C.isAtom&&z.type.allowsMarkType(this.mark.type)?C.mark(this.mark.addToSet(C.marks)):C,l),e.openStart,e.openEnd);return Da.fromReplace(t,this.from,this.to,f)}invert(){return new Wd(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return e.deleted&&s.deleted||e.pos>=s.pos?null:new sp(e.pos,s.pos,this.mark)}merge(t){return t instanceof sp&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new sp(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new sp(e.from,e.to,t.markFromJSON(e.mark))}}Jl.jsonID("addMark",sp);class Wd extends Jl{constructor(t,e,s){super(),this.from=t,this.to=e,this.mark=s}apply(t){let e=t.slice(this.from,this.to),s=new fr(T0(e.content,l=>l.mark(this.mark.removeFromSet(l.marks)),t),e.openStart,e.openEnd);return Da.fromReplace(t,this.from,this.to,s)}invert(){return new sp(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return e.deleted&&s.deleted||e.pos>=s.pos?null:new Wd(e.pos,s.pos,this.mark)}merge(t){return t instanceof Wd&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Wd(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Wd(e.from,e.to,t.markFromJSON(e.mark))}}Jl.jsonID("removeMark",Wd);class op extends Jl{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Da.fail("No node at mark step's position");let s=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Da.fromReplace(t,this.pos,this.pos+1,new fr(Rn.from(s),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let s=this.mark.addToSet(e.marks);if(s.length==e.marks.length){for(let l=0;l<e.marks.length;l++)if(!e.marks[l].isInSet(s))return new op(this.pos,e.marks[l]);return new op(this.pos,this.mark)}}return new Fm(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new op(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new op(e.pos,t.markFromJSON(e.mark))}}Jl.jsonID("addNodeMark",op);class Fm extends Jl{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Da.fail("No node at mark step's position");let s=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Da.fromReplace(t,this.pos,this.pos+1,new fr(Rn.from(s),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new op(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Fm(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Fm(e.pos,t.markFromJSON(e.mark))}}Jl.jsonID("removeNodeMark",Fm);class Ql extends Jl{constructor(t,e,s,l=!1){super(),this.from=t,this.to=e,this.slice=s,this.structure=l}apply(t){return this.structure&&k0(t,this.from,this.to)?Da.fail("Structure replace would overwrite content"):Da.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new du([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ql(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),s=t.mapResult(this.to,-1);return e.deletedAcross&&s.deletedAcross?null:new Ql(e.pos,Math.max(e.pos,s.pos),this.slice)}merge(t){if(!(t instanceof Ql)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?fr.empty:new fr(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ql(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?fr.empty:new fr(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ql(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ql(e.from,e.to,fr.fromJSON(t,e.slice),!!e.structure)}}Jl.jsonID("replace",Ql);class ec extends Jl{constructor(t,e,s,l,f,C,z=!1){super(),this.from=t,this.to=e,this.gapFrom=s,this.gapTo=l,this.slice=f,this.insert=C,this.structure=z}apply(t){if(this.structure&&(k0(t,this.from,this.gapFrom)||k0(t,this.gapTo,this.to)))return Da.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Da.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,e.content);return s?Da.fromReplace(t,this.from,this.to,s):Da.fail("Content does not fit in gap")}getMap(){return new du([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new ec(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),s=t.mapResult(this.to,-1),l=t.map(this.gapFrom,-1),f=t.map(this.gapTo,1);return e.deletedAcross&&s.deletedAcross||l<e.pos||f>s.pos?null:new ec(e.pos,s.pos,l,f,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ec(e.from,e.to,e.gapFrom,e.gapTo,fr.fromJSON(t,e.slice),e.insert,!!e.structure)}}function k0(r,t,e){let s=r.resolve(t),l=e-t,f=s.depth;for(;l>0&&f>0&&s.indexAfter(f)==s.node(f).childCount;)f--,l--;if(l>0){let C=s.node(f).maybeChild(s.indexAfter(f));for(;l>0;){if(!C||C.isLeaf)return!0;C=C.firstChild,l--}}return!1}function yC(r,t,e){return(0==t||r.canReplace(t,r.childCount))&&(e==r.childCount||r.canReplace(0,e))}function hv(r){let e=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let s=r.depth;;--s){let l=r.$from.node(s),f=r.$from.index(s),C=r.$to.indexAfter(s);if(s<r.depth&&l.canReplace(f,C,e))return s;if(0==s||l.type.spec.isolating||!yC(l,f,C))break}return null}function hx(r,t,e=null,s=r){let l=function xC(r,t){let{parent:e,startIndex:s,endIndex:l}=r,f=e.contentMatchAt(s).findWrapping(t);return f&&e.canReplaceWith(s,l,f.length?f[0]:t)?f:null}(r,t),f=l&&function wC(r,t){let{parent:e,startIndex:s,endIndex:l}=r,f=e.child(s),C=t.contentMatch.findWrapping(f.type);if(!C)return null;let W=(C.length?C[C.length-1]:t).contentMatch;for(let re=s;W&&re<l;re++)W=W.matchType(e.child(re).type);return W&&W.validEnd?C:null}(s,t);return f?l.map(px).concat({type:t,attrs:e}).concat(f.map(px)):null}function px(r){return{type:r,attrs:null}}function pv(r,t,e=1,s){let l=r.resolve(t),f=l.depth-e,C=s&&s[s.length-1]||l.parent;if(f<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!C.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let re=l.depth-1,oe=e-2;re>f;re--,oe--){let Ne=l.node(re),Ye=l.index(re);if(Ne.type.spec.isolating)return!1;let Ve=Ne.content.cutByIndex(Ye,Ne.childCount),$t=s&&s[oe+1];$t&&(Ve=Ve.replaceChild(0,$t.type.create($t.attrs)));let Ut=s&&s[oe]||Ne;if(!Ne.canReplace(Ye+1,Ne.childCount)||!Ut.type.validContent(Ve))return!1}let z=l.indexAfter(f),W=s&&s[0];return l.node(f).canReplaceWith(z,z,W?W.type:l.node(f+1).type)}function A0(r,t){let e=r.resolve(t),s=e.index();return function fx(r,t){return!(!r||!t||r.isLeaf||!r.canAppend(t))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(s,s+1)}function M0(r,t,e=t,s=fr.empty){if(t==e&&!s.size)return null;let l=r.resolve(t),f=r.resolve(e);return function mx(r,t,e){return!e.openStart&&!e.openEnd&&r.start()==t.start()&&r.parent.canReplace(r.index(),t.index(),e.content)}(l,f,s)?new Ql(t,e,s):new DC(l,f,s).fit()}Jl.jsonID("replaceAround",ec);class DC{constructor(t,e,s){this.$from=t,this.$to=e,this.unplaced=s,this.frontier=[],this.placed=Rn.empty;for(let l=0;l<=t.depth;l++){let f=t.node(l);this.frontier.push({type:f.type,match:f.contentMatchAt(t.indexAfter(l))})}for(let l=t.depth;l>0;l--)this.placed=Rn.from(t.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let re=this.findFittable();re?this.placeNodes(re):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(t<0?this.$to:s.doc.resolve(t));if(!l)return null;let f=this.placed,C=s.depth,z=l.depth;for(;C&&z&&1==f.childCount;)f=f.firstChild.content,C--,z--;let W=new fr(f,C,z);return t>-1?new ec(s.pos,t,this.$to.pos,this.$to.end(),W,e):W.size||s.pos!=this.$to.pos?new Ql(s.pos,l.pos,W):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<t;s++){let f=e.firstChild;if(e.childCount>1&&(l=0),f.type.spec.isolating&&l<=s){t=s;break}e=f.content}for(let e=1;e<=2;e++)for(let s=1==e?t:this.unplaced.openStart;s>=0;s--){let l,f=null;s?(f=D0(this.unplaced.content,s-1).firstChild,l=f.content):l=this.unplaced.content;let C=l.firstChild;for(let z=this.depth;z>=0;z--){let oe,{type:W,match:re}=this.frontier[z],Ne=null;if(1==e&&(C?re.matchType(C.type)||(Ne=re.fillBefore(Rn.from(C),!1)):f&&W.compatibleContent(f.type)))return{sliceDepth:s,frontierDepth:z,parent:f,inject:Ne};if(2==e&&C&&(oe=re.findWrapping(C.type)))return{sliceDepth:s,frontierDepth:z,parent:f,wrap:oe};if(f&&re.matchType(f.type))break}}}openMore(){let{content:t,openStart:e,openEnd:s}=this.unplaced,l=D0(t,e);return!(!l.childCount||l.firstChild.isLeaf||(this.unplaced=new fr(t,e+1,Math.max(s,l.size+e>=t.size-s?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:s}=this.unplaced,l=D0(t,e);if(l.childCount<=1&&e>0){let f=t.size-e<=e+l.size;this.unplaced=new fr(fv(t,e-1,1),e-1,f?e-1:s)}else this.unplaced=new fr(fv(t,e,1),e,s)}placeNodes({sliceDepth:t,frontierDepth:e,parent:s,inject:l,wrap:f}){for(;this.depth>e;)this.closeFrontierNode();if(f)for(let Ut=0;Ut<f.length;Ut++)this.openFrontierNode(f[Ut]);let C=this.unplaced,z=s?s.content:C.content,W=C.openStart-t,re=0,oe=[],{match:Ne,type:Ye}=this.frontier[e];if(l){for(let Ut=0;Ut<l.childCount;Ut++)oe.push(l.child(Ut));Ne=Ne.matchFragment(l)}let Ve=z.size+t-(C.content.size-C.openEnd);for(;re<z.childCount;){let Ut=z.child(re),li=Ne.matchType(Ut.type);if(!li)break;re++,(re>1||0==W||Ut.content.size)&&(Ne=li,oe.push(gx(Ut.mark(Ye.allowedMarks(Ut.marks)),1==re?W:0,re==z.childCount?Ve:-1)))}let $t=re==z.childCount;$t||(Ve=-1),this.placed=mv(this.placed,e,Rn.from(oe)),this.frontier[e].match=Ne,$t&&Ve<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ut=0,li=z;Ut<Ve;Ut++){let Di=li.lastChild;this.frontier.push({type:Di.type,match:Di.contentMatchAt(Di.childCount)}),li=Di.content}this.unplaced=$t?0==t?fr.empty:new fr(fv(C.content,t-1,1),t-1,Ve<0?C.openEnd:t-1):new fr(fv(C.content,t,re),C.openStart,C.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!I0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:s,type:l}=this.frontier[e],f=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),C=I0(t,e,l,s,f);if(C){for(let z=e-1;z>=0;z--){let{match:W,type:re}=this.frontier[z],oe=I0(t,z,re,W,!0);if(!oe||oe.childCount)continue e}return{depth:e,fit:C,move:f?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=mv(this.placed,e.depth,e.fit)),t=e.move;for(let s=e.depth+1;s<=t.depth;s++){let l=t.node(s),f=l.type.contentMatch.fillBefore(l.content,!0,t.index(s));this.openFrontierNode(l.type,l.attrs,f)}return t}openFrontierNode(t,e=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(t),this.placed=mv(this.placed,this.depth,Rn.from(t.create(e,s))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Rn.empty,!0);e.childCount&&(this.placed=mv(this.placed,this.frontier.length,e))}}function fv(r,t,e){return 0==t?r.cutByIndex(e,r.childCount):r.replaceChild(0,r.firstChild.copy(fv(r.firstChild.content,t-1,e)))}function mv(r,t,e){return 0==t?r.append(e):r.replaceChild(r.childCount-1,r.lastChild.copy(mv(r.lastChild.content,t-1,e)))}function D0(r,t){for(let e=0;e<t;e++)r=r.firstChild.content;return r}function gx(r,t,e){if(t<=0)return r;let s=r.content;return t>1&&(s=s.replaceChild(0,gx(s.firstChild,t-1,1==s.childCount?e-1:0))),t>0&&(s=r.type.contentMatch.fillBefore(s).append(s),e<=0&&(s=s.append(r.type.contentMatch.matchFragment(s).fillBefore(Rn.empty,!0)))),r.copy(s)}function I0(r,t,e,s,l){let f=r.node(t),C=l?r.indexAfter(t):r.index(t);if(C==f.childCount&&!e.compatibleContent(f.type))return null;let z=s.fillBefore(f.content,!0,C);return z&&!function IC(r,t,e){for(let s=e;s<t.childCount;s++)if(!r.allowsMarks(t.child(s).marks))return!0;return!1}(e,f.content,C)?z:null}class Bm extends Jl{constructor(t,e,s){super(),this.pos=t,this.attr=e,this.value=s}apply(t){let e=t.nodeAt(this.pos);if(!e)return Da.fail("No node at attribute step's position");let s=Object.create(null);for(let f in e.attrs)s[f]=e.attrs[f];s[this.attr]=this.value;let l=e.type.create(s,null,e.marks);return Da.fromReplace(t,this.pos,this.pos+1,new fr(Rn.from(l),0,e.isLeaf?0:1))}getMap(){return du.empty}invert(t){return new Bm(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Bm(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Bm(e.pos,e.attr,e.value)}}Jl.jsonID("attr",Bm);class gv extends Jl{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let l in t.attrs)e[l]=t.attrs[l];e[this.attr]=this.value;let s=t.type.create(e,t.content,t.marks);return Da.ok(s)}getMap(){return du.empty}invert(t){return new gv(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gv(e.attr,e.value)}}Jl.jsonID("docAttr",gv);let Nm=class extends Error{};Nm=function r(t){let e=Error.call(this,t);return e.__proto__=r.prototype,e},(Nm.prototype=Object.create(Error.prototype)).constructor=Nm,Nm.prototype.name="TransformError";const L0=Object.create(null);class Lo{constructor(t,e,s){this.$anchor=t,this.$head=e,this.ranges=s||[new FC(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=fr.empty){let s=e.content.lastChild,l=null;for(let z=0;z<e.openEnd;z++)l=s,s=s.lastChild;let f=t.steps.length,C=this.ranges;for(let z=0;z<C.length;z++){let{$from:W,$to:re}=C[z],oe=t.mapping.slice(f);t.replaceRange(oe.map(W.pos),oe.map(re.pos),z?fr.empty:e),0==z&&xx(t,f,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(t,e){let s=t.steps.length,l=this.ranges;for(let f=0;f<l.length;f++){let{$from:C,$to:z}=l[f],W=t.mapping.slice(s),re=W.map(C.pos),oe=W.map(z.pos);f?t.deleteRange(re,oe):(t.replaceRangeWith(re,oe,e),xx(t,s,e.isInline?-1:1))}}static findFrom(t,e,s=!1){let l=t.parent.inlineContent?new Cc(t):Ym(t.node(0),t.parent,t.pos,t.index(),e,s);if(l)return l;for(let f=t.depth-1;f>=0;f--){let C=e<0?Ym(t.node(0),t.node(f),t.before(f+1),t.index(f),e,s):Ym(t.node(0),t.node(f),t.after(f+1),t.index(f)+1,e,s);if(C)return C}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Yu(t.node(0))}static atStart(t){return Ym(t,t,0,0,1)||new Yu(t)}static atEnd(t){return Ym(t,t,t.content.size,t.childCount,-1)||new Yu(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=L0[e.type];if(!s)throw new RangeError(`No selection type ${e.type} defined`);return s.fromJSON(t,e)}static jsonID(t,e){if(t in L0)throw new RangeError("Duplicate use of selection JSON ID "+t);return L0[t]=e,e.prototype.jsonID=t,e}getBookmark(){return Cc.between(this.$anchor,this.$head).getBookmark()}}Lo.prototype.visible=!0;class FC{constructor(t,e){this.$from=t,this.$to=e}}let yx=!1;function bx(r){!yx&&!r.parent.inlineContent&&(yx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class Cc extends Lo{constructor(t,e=t){bx(t),bx(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let s=t.resolve(e.map(this.head));if(!s.parent.inlineContent)return Lo.near(s);let l=t.resolve(e.map(this.anchor));return new Cc(l.parent.inlineContent?l:s,s)}replace(t,e=fr.empty){if(super.replace(t,e),e==fr.empty){let s=this.$from.marksAcross(this.$to);s&&t.ensureMarks(s)}}eq(t){return t instanceof Cc&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new iy(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Cc(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,s=e){let l=t.resolve(e);return new this(l,s==e?l:t.resolve(s))}static between(t,e,s){let l=t.pos-e.pos;if((!s||l)&&(s=l>=0?1:-1),!e.parent.inlineContent){let f=Lo.findFrom(e,s,!0)||Lo.findFrom(e,-s,!0);if(!f)return Lo.near(e,s);e=f.$head}return t.parent.inlineContent||(0==l||(t=(Lo.findFrom(t,-s,!0)||Lo.findFrom(t,s,!0)).$anchor).pos<e.pos!=l<0)&&(t=e),new Cc(t,e)}}Lo.jsonID("text",Cc);class iy{constructor(t,e){this.anchor=t,this.head=e}map(t){return new iy(t.map(this.anchor),t.map(this.head))}resolve(t){return Cc.between(t.resolve(this.anchor),t.resolve(this.head))}}class Vo extends Lo{constructor(t){let e=t.nodeAfter,s=t.node(0).resolve(t.pos+e.nodeSize);super(t,s),this.node=e}map(t,e){let{deleted:s,pos:l}=e.mapResult(this.anchor),f=t.resolve(l);return s?Lo.near(f):new Vo(f)}content(){return new fr(Rn.from(this.node),0,0)}eq(t){return t instanceof Vo&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new O0(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Vo(t.resolve(e.anchor))}static create(t,e){return new Vo(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}Vo.prototype.visible=!1,Lo.jsonID("node",Vo);class O0{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:s}=t.mapResult(this.anchor);return e?new iy(s,s):new O0(s)}resolve(t){let e=t.resolve(this.anchor),s=e.nodeAfter;return s&&Vo.isSelectable(s)?new Vo(e):Lo.near(e)}}class Yu extends Lo{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=fr.empty){if(e==fr.empty){t.delete(0,t.doc.content.size);let s=Lo.atStart(t.doc);s.eq(t.selection)||t.setSelection(s)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new Yu(t)}map(t){return new Yu(t)}eq(t){return t instanceof Yu}getBookmark(){return BC}}Lo.jsonID("all",Yu);const BC={map(){return this},resolve:r=>new Yu(r)};function Ym(r,t,e,s,l,f=!1){if(t.inlineContent)return Cc.create(r,e);for(let C=s-(l>0?0:1);l>0?C<t.childCount:C>=0;C+=l){let z=t.child(C);if(z.isAtom){if(!f&&Vo.isSelectable(z))return Vo.create(r,e-(l<0?z.nodeSize:0))}else{let W=Ym(r,z,e+l,l<0?z.childCount:0,l,f);if(W)return W}e+=z.nodeSize*l}return null}function xx(r,t,e){let s=r.steps.length-1;if(s<t)return;let C,l=r.steps[s];(l instanceof Ql||l instanceof ec)&&(r.mapping.maps[s].forEach((z,W,re,oe)=>{null==C&&(C=oe)}),r.setSelection(Lo.near(r.doc.resolve(C),e)))}function Ex(r,t){return t&&r?r.bind(t):r}class vv{constructor(t,e,s){this.name=t,this.init=Ex(e.init,s),this.apply=Ex(e.apply,s)}}new vv("doc",{init:r=>r.doc||r.schema.topNodeType.createAndFill(),apply:r=>r.doc}),new vv("selection",{init:(r,t)=>r.selection||Lo.atStart(t.doc),apply:r=>r.selection}),new vv("storedMarks",{init:r=>r.storedMarks||null,apply:(r,t,e,s)=>s.selection.$cursor?r.storedMarks:null}),new vv("scrollToSelection",{init:()=>0,apply:(r,t)=>r.scrolledIntoView?t+1:t});const HC=["ol",0],VC=["ul",0],GC=["li",0],kx={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:r=>({order:r.hasAttribute("start")?+r.getAttribute("start"):1})}],toDOM:r=>1==r.attrs.order?HC:["ol",{start:r.attrs.order},0]};const Dx=r=>{const t=(r=>{const t={};return Object.keys(r).forEach(e=>{r[e]&&(t[e]=r[e])}),t})(r);return Object.entries(t).map(([e,s])=>`${(r=>r.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))(e)}:${s}`).join(";")};Error;const KC={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:r=>({href:r.getAttribute("href"),title:r.getAttribute("title"),target:r.getAttribute("target")})}],toDOM(r){const{href:t,title:e,target:s}=r.attrs;return["a",{href:t,title:e,target:s},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:r=>"normal"!==r.style.fontWeight&&null},{style:"font-weight",getAttrs:r=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(r)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:r=>({color:r})}],toDOM(r){const{color:t}=r.attrs;return["span",{style:`color:${t};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:r=>({backgroundColor:r})}],toDOM(r){const{backgroundColor:t}=r.attrs;return["span",{style:`background-color:${t};`},0]}}},eE={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(r){const{textAlign:t}=r.style;return{align:r.getAttribute("align")||t||null}}}],toDOM(r){const{align:t}=r.attrs;return["p",{style:Dx({textAlign:"left"!==t?t:null})||null},0]}},nE={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(r){const{textAlign:t}=r.style;return{level:1,align:r.getAttribute("align")||t||null}}},{tag:"h2",getAttrs(r){const{textAlign:t}=r.style;return{level:2,align:r.getAttribute("align")||t||null}}},{tag:"h3",getAttrs(r){const{textAlign:t}=r.style;return{level:3,align:r.getAttribute("align")||t||null}}},{tag:"h4",getAttrs(r){const{textAlign:t}=r.style;return{level:4,align:r.getAttribute("align")||t||null}}},{tag:"h5",getAttrs(r){const{textAlign:t}=r.style;return{level:5,align:r.getAttribute("align")||t||null}}},{tag:"h6",getAttrs(r){const{textAlign:t}=r.style;return{level:6,align:r.getAttribute("align")||t||null}}}],toDOM(r){const{level:t,align:e}=r.attrs;return[`h${t}`,{style:Dx({textAlign:"left"!==e?e:null})||null},0]}},oE={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:r=>({src:r.getAttribute("src"),title:r.getAttribute("title"),alt:r.getAttribute("alt"),width:r.getAttribute("width")})}],toDOM(r){const{src:t,alt:e,title:s,width:l}=r.attrs;return["img",{src:t,alt:e,title:s,width:l}]}},uE={doc:{content:"block+"},text:{group:"inline"},paragraph:eE,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:nE,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:oE,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>GC,defining:!0},content:"paragraph block*"},ordered_list:{...kx,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>VC},content:"list_item+",group:"block"}},Ix=(new class aC{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let l in t)e[l]=t[l];e.nodes=Fb.from(t.nodes),e.marks=Fb.from(t.marks||{}),this.nodes=q_.compile(this.spec.nodes,this),this.marks=K_.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let f=this.nodes[l],C=f.spec.content||"",z=f.spec.marks;f.contentMatch=s[C]||(s[C]=_f.parse(C,this.nodes)),f.inlineContent=f.contentMatch.inlineContent,f.markSet="_"==z?null:z?Qb(this,z.split(" ")):""!=z&&f.inlineContent?null:[]}for(let l in this.marks){let f=this.marks[l],C=f.spec.excludes;f.excluded=null==C?[f]:""==C?[]:Qb(this,C.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,s,l){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof q_))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,s,l)}text(t,e){let s=this.nodes.text;return new Z_(s,s.defaultAttrs,t,ho.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return Sh.fromJSON(this,t)}markFromJSON(t){return ho.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}({marks:KC,nodes:uE}),(r,t)=>!r.selection.empty&&(t&&t(r.tr.deleteSelection().scrollIntoView()),!0));function Hm(r,t,e=!1){for(let s=r;s;s="start"==t?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(e&&1!=s.childCount)return!1}return!1}function F0(r){if(!r.parent.type.spec.isolating)for(let t=r.depth-1;t>=0;t--){if(r.index(t)>0)return r.doc.resolve(r.before(t+1));if(r.node(t).type.spec.isolating)break}return null}function B0(r){if(!r.parent.type.spec.isolating)for(let t=r.depth-1;t>=0;t--){let e=r.node(t);if(r.index(t)+1<e.childCount)return r.doc.resolve(r.after(t+1));if(e.type.spec.isolating)break}return null}function N0(r){for(let t=0;t<r.edgeCount;t++){let{type:e}=r.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const Rx=function xE(r){return(t,e)=>{let{$from:s,$to:l}=t.selection;if(t.selection instanceof Vo&&t.selection.node.isBlock)return!(!s.parentOffset||!pv(t.doc,s.pos)||(e&&e(t.tr.split(s.pos).scrollIntoView()),0));if(!s.parent.isBlock)return!1;if(e){let f=l.parentOffset==l.parent.content.size,C=t.tr;(t.selection instanceof Cc||t.selection instanceof Yu)&&C.deleteSelection();let z=0==s.depth?null:N0(s.node(-1).contentMatchAt(s.indexAfter(-1))),W=r&&r(l.parent,f),re=W?[W]:f&&z?[{type:z}]:void 0,oe=pv(C.doc,C.mapping.map(s.pos),1,re);if(!re&&!oe&&pv(C.doc,C.mapping.map(s.pos),1,z?[{type:z}]:void 0)&&(z&&(re=[{type:z}]),oe=!0),oe&&(C.split(C.mapping.map(s.pos),1,re),!f&&!s.parentOffset&&s.parent.type!=z)){let Ne=C.mapping.map(s.before()),Ye=C.doc.resolve(Ne);z&&s.node(-1).canReplaceWith(Ye.index(),Ye.index()+1,z)&&C.setNodeMarkup(C.mapping.map(s.before()),z)}e(C.scrollIntoView())}return!0}}();function zx(r,t,e){let f,C,s=t.nodeBefore,l=t.nodeAfter;if(s.type.spec.isolating||l.type.spec.isolating)return!1;if(function CE(r,t,e){let s=t.nodeBefore,l=t.nodeAfter,f=t.index();return!(!(s&&l&&s.type.compatibleContent(l.type))||(!s.content.size&&t.parent.canReplace(f-1,f)?(e&&e(r.tr.delete(t.pos-s.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(f,f+1)||!l.isTextblock&&!A0(r.doc,t.pos)||(e&&e(r.tr.clearIncompatible(t.pos,s.type,s.contentMatchAt(s.childCount)).join(t.pos).scrollIntoView()),0)))}(r,t,e))return!0;let z=t.parent.canReplace(t.index(),t.index()+1);if(z&&(f=(C=s.contentMatchAt(s.childCount)).findWrapping(l.type))&&C.matchType(f[0]||l.type).validEnd){if(e){let Ne=t.pos+l.nodeSize,Ye=Rn.empty;for(let Ut=f.length-1;Ut>=0;Ut--)Ye=Rn.from(f[Ut].create(null,Ye));Ye=Rn.from(s.copy(Ye));let Ve=r.tr.step(new ec(t.pos-1,Ne,t.pos,Ne,new fr(Ye,1,0),f.length,!0)),$t=Ne+2*f.length;A0(Ve.doc,$t)&&Ve.join($t),e(Ve.scrollIntoView())}return!0}let W=Lo.findFrom(t,1),re=W&&W.$from.blockRange(W.$to),oe=re&&hv(re);if(null!=oe&&oe>=t.depth)return e&&e(r.tr.lift(re,oe).scrollIntoView()),!0;if(z&&Hm(l,"start",!0)&&Hm(s,"end")){let Ne=s,Ye=[];for(;Ye.push(Ne),!Ne.isTextblock;)Ne=Ne.lastChild;let Ve=l,$t=1;for(;!Ve.isTextblock;Ve=Ve.firstChild)$t++;if(Ne.canReplace(Ne.childCount,Ne.childCount,Ve.content)){if(e){let Ut=Rn.empty;for(let Di=Ye.length-1;Di>=0;Di--)Ut=Rn.from(Ye[Di].copy(Ut));e(r.tr.step(new ec(t.pos-Ye.length,t.pos+l.nodeSize,t.pos+$t,t.pos+l.nodeSize-$t,new fr(Ut,Ye.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Fx(r){return function(t,e){let s=t.selection,l=r<0?s.$from:s.$to,f=l.depth;for(;l.node(f).isInline;){if(!f)return!1;f--}return!!l.node(f).isTextblock&&(e&&e(t.tr.setSelection(Cc.create(t.doc,r<0?l.start(f):l.end(f)))),!0)}}const EE=Fx(-1),SE=Fx(1);function Y0(r,t=null){return function(e,s){let l=!1;for(let f=0;f<e.selection.ranges.length&&!l;f++){let{$from:{pos:C},$to:{pos:z}}=e.selection.ranges[f];e.doc.nodesBetween(C,z,(W,re)=>{if(l)return!1;if(W.isTextblock&&!W.hasMarkup(r,t))if(W.type==r)l=!0;else{let oe=e.doc.resolve(re),Ne=oe.index();l=oe.parent.canReplaceWith(Ne,Ne+1,r)}})}if(!l)return!1;if(s){let f=e.tr;for(let C=0;C<e.selection.ranges.length;C++){let{$from:{pos:z},$to:{pos:W}}=e.selection.ranges[C];f.setBlockType(z,W,r,t)}s(f.scrollIntoView())}return!0}}function Bx(r,t=null){return function(e,s){let{empty:l,$cursor:f,ranges:C}=e.selection;if(l&&!f||!function kE(r,t,e){for(let s=0;s<t.length;s++){let{$from:l,$to:f}=t[s],C=0==l.depth&&r.inlineContent&&r.type.allowsMarkType(e);if(r.nodesBetween(l.pos,f.pos,z=>{if(C)return!1;C=z.inlineContent&&z.type.allowsMarkType(e)}),C)return!0}return!1}(e.doc,C,r))return!1;if(s)if(f)r.isInSet(e.storedMarks||f.marks())?s(e.tr.removeStoredMark(r)):s(e.tr.addStoredMark(r.create(t)));else{let z=!1,W=e.tr;for(let re=0;!z&&re<C.length;re++){let{$from:oe,$to:Ne}=C[re];z=e.doc.rangeHasMark(oe.pos,Ne.pos,r)}for(let re=0;re<C.length;re++){let{$from:oe,$to:Ne}=C[re];if(z)W.removeMark(oe.pos,Ne.pos,r);else{let Ye=oe.pos,Ve=Ne.pos,$t=oe.nodeAfter,Ut=Ne.nodeBefore,li=$t&&$t.isText?/^\s*/.exec($t.text)[0].length:0,Di=Ut&&Ut.isText?/\s*$/.exec(Ut.text)[0].length:0;Ye+li<Ve&&(Ye+=li,Ve-=Di),W.addMark(Ye,Ve,r.create(t))}}s(W.scrollIntoView())}return!0}}function H0(...r){return function(t,e,s){for(let l=0;l<r.length;l++)if(r[l](t,e,s))return!0;return!1}}let V0=H0(Ix,(r,t,e)=>{let s=function Lx(r,t){let{$cursor:e}=r.selection;return!e||(t?!t.endOfTextblock("backward",r):e.parentOffset>0)?null:e}(r,e);if(!s)return!1;let l=F0(s);if(!l){let C=s.blockRange(),z=C&&hv(C);return null!=z&&(t&&t(r.tr.lift(C,z).scrollIntoView()),!0)}let f=l.nodeBefore;if(!f.type.spec.isolating&&zx(r,l,t))return!0;if(0==s.parent.content.size&&(Hm(f,"end")||Vo.isSelectable(f))){let C=M0(r.doc,s.before(),s.after(),fr.empty);if(C&&C.slice.size<C.to-C.from){if(t){let z=r.tr.step(C);z.setSelection(Hm(f,"end")?Lo.findFrom(z.doc.resolve(z.mapping.map(l.pos,-1)),-1):Vo.create(z.doc,l.pos-f.nodeSize)),t(z.scrollIntoView())}return!0}}return!(!f.isAtom||l.depth!=s.depth-1||(t&&t(r.tr.delete(l.pos-f.nodeSize,l.pos).scrollIntoView()),0))},(r,t,e)=>{let{$head:s,empty:l}=r.selection,f=s;if(!l)return!1;if(s.parent.isTextblock){if(e?!e.endOfTextblock("backward",r):s.parentOffset>0)return!1;f=F0(s)}let C=f&&f.nodeBefore;return!(!C||!Vo.isSelectable(C)||(t&&t(r.tr.setSelection(Vo.create(r.doc,f.pos-C.nodeSize)).scrollIntoView()),0))}),Nx=H0(Ix,(r,t,e)=>{let s=function Px(r,t){let{$cursor:e}=r.selection;return!e||(t?!t.endOfTextblock("forward",r):e.parentOffset<e.parent.content.size)?null:e}(r,e);if(!s)return!1;let l=B0(s);if(!l)return!1;let f=l.nodeAfter;if(zx(r,l,t))return!0;if(0==s.parent.content.size&&(Hm(f,"start")||Vo.isSelectable(f))){let C=M0(r.doc,s.before(),s.after(),fr.empty);if(C&&C.slice.size<C.to-C.from){if(t){let z=r.tr.step(C);z.setSelection(Hm(f,"start")?Lo.findFrom(z.doc.resolve(z.mapping.map(l.pos)),1):Vo.create(z.doc,z.mapping.map(l.pos))),t(z.scrollIntoView())}return!0}}return!(!f.isAtom||l.depth!=s.depth-1||(t&&t(r.tr.delete(l.pos,l.pos+f.nodeSize).scrollIntoView()),0))},(r,t,e)=>{let{$head:s,empty:l}=r.selection,f=s;if(!l)return!1;if(s.parent.isTextblock){if(e?!e.endOfTextblock("forward",r):s.parentOffset<s.parent.content.size)return!1;f=B0(s)}let C=f&&f.nodeAfter;return!(!C||!Vo.isSelectable(C)||(t&&t(r.tr.setSelection(Vo.create(r.doc,f.pos)).scrollIntoView()),0))});const ap={Enter:H0((r,t)=>{let{$head:e,$anchor:s}=r.selection;return!(!e.parent.type.spec.code||!e.sameParent(s)||(t&&t(r.tr.insertText("\n").scrollIntoView()),0))},(r,t)=>{let e=r.selection,{$from:s,$to:l}=e;if(e instanceof Yu||s.parent.inlineContent||l.parent.inlineContent)return!1;let f=N0(l.parent.contentMatchAt(l.indexAfter()));if(!f||!f.isTextblock)return!1;if(t){let C=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,z=r.tr.insert(C,f.createAndFill());z.setSelection(Cc.create(z.doc,C+1)),t(z.scrollIntoView())}return!0},(r,t)=>{let{$cursor:e}=r.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let f=e.before();if(pv(r.doc,f))return t&&t(r.tr.split(f).scrollIntoView()),!0}let s=e.blockRange(),l=s&&hv(s);return null!=l&&(t&&t(r.tr.lift(s,l).scrollIntoView()),!0)},Rx),"Mod-Enter":(r,t)=>{let{$head:e,$anchor:s}=r.selection;if(!e.parent.type.spec.code||!e.sameParent(s))return!1;let l=e.node(-1),f=e.indexAfter(-1),C=N0(l.contentMatchAt(f));if(!C||!l.canReplaceWith(f,f,C))return!1;if(t){let z=e.after(),W=r.tr.replaceWith(z,z,C.createAndFill());W.setSelection(Lo.near(W.doc.resolve(z),1)),t(W.scrollIntoView())}return!0},Backspace:V0,"Mod-Backspace":V0,"Shift-Backspace":V0,Delete:Nx,"Mod-Delete":Nx,"Mod-a":(r,t)=>(t&&t(r.tr.setSelection(new Yu(r.doc))),!0)},ME={"Ctrl-h":ap.Backspace,"Alt-Backspace":ap["Mod-Backspace"],"Ctrl-d":ap.Delete,"Ctrl-Alt-Backspace":ap["Mod-Delete"],"Alt-Delete":ap["Mod-Delete"],"Alt-d":ap["Mod-Delete"],"Ctrl-a":EE,"Ctrl-e":SE};for(let r in ap)ME[r]=ap[r];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const G0=(r,t)=>{const{from:e,$from:s,to:l,empty:f}=r.selection;return f?!!t.isInSet(r.storedMarks||s.marks()):r.doc.rangeHasMark(e,l,t)},Yx=(r,t,e={})=>{const{selection:s}=r,{$from:l,to:f}=s,C=((r,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===r)return t.node(e).type;return null})(t,l);return Object.entries(e).length&&C?f<=l.end()&&l.parent.hasMarkup(t,e):!!C},Hx=r=>{const t=[],{selection:{from:e,to:s}}=r;return r.doc.nodesBetween(e,s,l=>{t.push(l)}),t},Vx=(r,t,e)=>{for(const s of t){const{$from:l,$to:f}=s;let C=0===l.depth&&r.type.allowsMarkType(e);if(r.nodesBetween(l.pos,f.pos,z=>!C&&(C=z.inlineContent&&z.type.allowsMarkType(e),!0)),C)return!0}return!1},Gx=(r,t={})=>(e,s)=>{const{tr:l,selection:f}=e,{empty:C,ranges:z,$from:W,$to:re}=f;if(C&&f instanceof Cc){const{$cursor:oe}=f;if(!oe||!Vx(e.doc,z,r)||(l.addStoredMark(r.create(t)),!l.storedMarksSet))return!1;s?.(l)}else{if(l.addMark(W.pos,re.pos,r.create(t)),!l.docChanged)return!1;s?.(l.scrollIntoView())}return!0};var RE=Rt(4476);class Vm{constructor(t){this.name=t}apply(){return(t,e)=>{const{schema:s}=t,l=s.marks[this.name];return!!l&&Gx(l)(t,e)}}toggle(){return(t,e)=>{const{schema:s}=t,l=s.marks[this.name];return!!l&&Bx(l)(t,e)}}isActive(t){const{schema:e}=t,s=e.marks[this.name];return!!s&&G0(t,s)}canExecute(t){return this.toggle()(t)}}class ry{constructor(t=!1){this.isBulletList=!1,this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{const{schema:s}=t,l=this.getType(s);return!!l&&(this.isActive(t)?function WC(r){return function(t,e){let{$from:s,$to:l}=t.selection,f=s.blockRange(l,C=>C.childCount>0&&C.firstChild.type==r);return!!f&&(!e||(s.node(f.depth-1).type==r?function $C(r,t,e,s){let l=r.tr,f=s.end,C=s.$to.end(s.depth);f<C&&(l.step(new ec(f-1,C,f,C,new fr(Rn.from(e.create(null,s.parent.copy())),1,0),1,!0)),s=new X_(l.doc.resolve(s.$from.pos),l.doc.resolve(C),s.depth));const z=hv(s);if(null==z)return!1;l.lift(s,z);let W=l.mapping.map(f,-1)-1;return A0(l.doc,W)&&l.join(W),t(l.scrollIntoView()),!0}(t,e,r,f):function XC(r,t,e){let s=r.tr,l=e.parent;for(let Ve=e.end,$t=e.endIndex-1,Ut=e.startIndex;$t>Ut;$t--)Ve-=l.child($t).nodeSize,s.delete(Ve-1,Ve+1);let f=s.doc.resolve(e.start),C=f.nodeAfter;if(s.mapping.map(e.end)!=e.start+f.nodeAfter.nodeSize)return!1;let z=0==e.startIndex,W=e.endIndex==l.childCount,re=f.node(-1),oe=f.index(-1);if(!re.canReplace(oe+(z?0:1),oe+1,C.content.append(W?Rn.empty:Rn.from(l))))return!1;let Ne=f.pos,Ye=Ne+C.nodeSize;return s.step(new ec(Ne-(z?1:0),Ye+(W?1:0),Ne+1,Ye-1,new fr((z?Rn.empty:Rn.from(l.copy(Rn.empty))).append(W?Rn.empty:Rn.from(l.copy(Rn.empty))),z?0:1,W?0:1),z?0:1)),t(s.scrollIntoView()),!0}(t,e,f)))}}(s.nodes.list_item)(t,e):function jC(r,t=null){return function(e,s){let{$from:l,$to:f}=e.selection,C=l.blockRange(f),z=!1,W=C;if(!C)return!1;if(C.depth>=2&&l.node(C.depth-1).type.compatibleContent(r)&&0==C.startIndex){if(0==l.index(C.depth-1))return!1;let oe=e.doc.resolve(C.start-2);W=new X_(oe,oe,C.depth),C.endIndex<C.parent.childCount&&(C=new X_(l,e.doc.resolve(f.end(C.depth)),C.depth)),z=!0}let re=hx(W,r,t,C);return!!re&&(s&&s(function UC(r,t,e,s,l){let f=Rn.empty;for(let oe=e.length-1;oe>=0;oe--)f=Rn.from(e[oe].type.create(e[oe].attrs,f));r.step(new ec(t.start-(s?2:0),t.end,t.start,t.end,new fr(f,0,0),e.length,!0));let C=0;for(let oe=0;oe<e.length;oe++)e[oe].type==l&&(C=oe+1);let z=e.length-C,W=t.start+e.length-(s?2:0),re=t.parent;for(let oe=t.startIndex,Ne=t.endIndex,Ye=!0;oe<Ne;oe++,Ye=!1)!Ye&&pv(r.doc,W,z)&&(r.split(W,z),W+=2*z),W+=re.child(oe).nodeSize;return r}(e.tr,C,re,z,r).scrollIntoView()),!0)}}(l)(t,e))}}isActive(t){const{schema:e}=t,s=this.getType(e);return!!s&&Yx(t,s)}canExecute(t){return this.toggle()(t)}}class yf{constructor(t){this.level=t}apply(){return(t,e)=>{const{schema:s}=t,l=s.nodes.heading;return!!l&&Y0(l)(t,e)}}toggle(){return(t,e)=>{const{schema:s,selection:l,doc:f}=t,C=s.nodes.heading;if(!C)return!1;const z=l.$from.before(1),re=f.nodeAt(z)?.attrs??{};return this.isActive(t)?Y0(s.nodes.paragraph,re)(t,e):Y0(C,{...re,level:this.level})(t,e)}}isActive(t){const{schema:e}=t,s=Hx(t),l=e.nodes.heading;if(!l)return!1;const f=[l,e.nodes.text,e.nodes.blockquote];return!!s.filter(W=>f.includes(W.type)).find(W=>W.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}}class bv{constructor(t){this.align=t}toggle(){return(t,e)=>{const{doc:s,selection:l,tr:f,schema:C}=t,{from:z,to:W}=l;let re=!1;return s.nodesBetween(z,W,(oe,Ne)=>{const Ye=oe.type;return[C.nodes.paragraph,C.nodes.heading].includes(Ye)&&(re=!0,f.setNodeMarkup(Ne,Ye,{...oe.attrs,align:this.align})),!0}),!!re&&(f.docChanged&&e?.(f),!0)}}isActive(t){return!!Hx(t).find(l=>l.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}}const mS={strict:!0};let Gm=class{constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,s)=>{const{schema:l,selection:f,doc:C}=e,z=l.marks[this.name];if(!z)return!1;const{from:W,to:re,empty:oe}=f;if(!oe&&W+1===re){const Ne=C.nodeAt(W);if(Ne?.isAtom&&!Ne.isText&&Ne.isLeaf)return!1}return Gx(z,t)(e,s)}}isActive(t){const{schema:e}=t,s=e.marks[this.name];return!!s&&G0(t,s)}getActiveColors(t){if(!this.isActive(t))return[];const{schema:e}=t;return(r=>{let t=[];const{selection:e,storedMarks:s}=r,{from:l,to:f,empty:C,$from:z}=e;return C?t=s||z.marks():r.doc.nodesBetween(l,f,W=>{t=[...t,...W.marks]}),t})(t).filter(f=>f.type===e.marks[this.name]).map(f=>f.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{const{schema:s}=t,l=s.marks[this.name];return!!l&&(r=l,(t,e)=>{const{tr:s,selection:l,storedMarks:f,doc:C}=t,{empty:z,ranges:W}=l;if(z&&l instanceof Cc){const{$cursor:re}=l;if(!re||!Vx(t.doc,W,r))return!1;if(r.isInSet(f||re.marks()))return s.removeStoredMark(r),e?.(s),!0}else{for(const re of W){const{$from:oe,$to:Ne}=re;C.rangeHasMark(oe.pos,Ne.pos,r)&&s.removeMark(oe.pos,Ne.pos,r)}if(!s.docChanged)return!1;e?.(s.scrollIntoView())}return!1})(t,e);var r}}canExecute(t){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(t)}};const gS=["link"];new Vm("strong"),new Vm("em"),new Vm("code"),new Vm("u"),new Vm("s"),new class pS{toggle(){return(t,e)=>{const{schema:s}=t,l=s.nodes.blockquote;return!!l&&(this.isActive(t)?((r,t)=>{let{$from:e,$to:s}=r.selection,l=e.blockRange(s),f=l&&hv(l);return null!=f&&(t&&t(r.tr.lift(l,f).scrollIntoView()),!0)})(t,e):function TE(r,t=null){return function(e,s){let{$from:l,$to:f}=e.selection,C=l.blockRange(f),z=C&&hx(C,r,t);return!!z&&(s&&s(e.tr.wrap(C,z).scrollIntoView()),!0)}}(l)(t,e))}}isActive(t){const{schema:e}=t,s=e.nodes.blockquote;return!!s&&Yx(t,s)}canExecute(t){return this.toggle()(t)}},new class fS{insert(){return(t,e)=>{const{schema:s,tr:l}=t,f=s.nodes.horizontal_rule;return!!f&&(e(l.replaceSelectionWith(f.create()).scrollIntoView()),!0)}}canExecute(t){return((r,t)=>{const{$from:e}=r.selection;for(let s=e.depth;s>=0;s-=1){const l=e.index(s);if(e.node(s).canReplaceWith(l,l,t))return!0}return!1})(t,t.schema.nodes.horizontal_rule)}},new class vS{insert(){return(t,e)=>{const{tr:s}=t,{ranges:l,empty:f}=s.selection;return f||(Object.entries(t.schema.marks).forEach(([C,z])=>{gS.includes(C)||l.forEach(W=>{s.removeMark(W.$from.pos,W.$to.pos,z)})}),e(s)),!0}}canExecute(){return!0}},new ry(!0),new ry(!1),new yf(1),new yf(2),new yf(3),new yf(4),new yf(5),new yf(6),new bv("left"),new bv("center"),new bv("right"),new bv("justify"),new class{update(t){return(e,s)=>{const{schema:l,selection:f}=e,C=l.marks.link;return!(!C||f.empty)&&Bx(C,t)(e,s)}}insert(t,e){return(s,l)=>{const{schema:f,tr:C}=s;if(!f.marks.link)return!1;const re=f.text(t,[f.marks.link.create({href:e.href,title:e.title??t,target:e.target??"_blank"})]);return C.replaceSelectionWith(re,!1).scrollIntoView(),!!C.docChanged&&(l?.(C),!0)}}isActive(t,e=mS){if(e.strict)return!0;const{schema:s}=t,l=s.marks.link;return!!l&&G0(t,l)}remove(t,e){return((r,t)=>{const{doc:e,selection:s,tr:l}=r,{$head:{pos:f},from:C,to:z}=s;if(C===z){const W=e.resolve(f),re=f-W.textOffset,oe=re+W.parent.child(W.index()).nodeSize;l.removeMark(re,oe)}else l.removeMark(C,z);return!!l.docChanged&&(t?.(l),!0)})(t,e)}canExecute(t){const e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},new class{insert(t,e){return(s,l)=>{const{schema:f,tr:C,selection:z}=s,W=f.nodes.image;if(!W)return!1;const re={width:null,src:t,...e};!re.width&&z instanceof Vo&&z.node.type===W&&(re.width=z.node.attrs.width),C.replaceSelectionWith(W.createAndFill(re));const oe=C.doc.resolve(C.selection.anchor-C.selection.$anchor.nodeBefore.nodeSize);return C.setSelection(new Vo(oe)).scrollIntoView(),!!C.docChanged&&(l?.(C),!0)}}isActive(t){const{selection:e}=t;return e instanceof Vo&&"image"===e.node.type.name}},new Gm("text_color","color"),new Gm("text_background_color","backgroundColor");const U0={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class BS{constructor(t={}){this.locals=U0,this.get=e=>{const s=this.locals[e];return s?(0,Ww.X)(s)?s:(0,zb.of)(s):(0,zb.of)("")},this.locals={...U0,...t}}}const Xx={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class aT{static get(t,e="currentColor"){const s=Xx[t];return s&&(s.includes("<path")||s.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${e}\n          height=20\n          width=20\n        >\n          ${s}\n        </svg>\n      `:s}}let W0=(()=>{class r{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=i.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),lT=(()=>{class r{constructor(e){this.config=e}get locals(){return new BS(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:aT.get(e)}static#e=this.\u0275fac=function(s){return new(s||r)(i.CoB(W0,8))};static#t=this.\u0275prov=i.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Zx=r=>({locals:r.locals??{},icons:r.icons??{}});let cT=(()=>{class r{constructor(e){this.sanitizer=e}transform(e){return(r=>window.trustedTypes?.isHTML(r)??!1)(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(RE.mI,16))};static#t=this.\u0275pipe=i.UTH({name:"sanitizeHtml",type:r,pure:!0})}return r})(),uT=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({providers:[cT],imports:[Ue.MD,V.sl]})}return r})();const sy=new i.UbH("NgxEditorConfig"),qx={locals:U0,icons:Xx};let dT=(()=>{class r{static forRoot(e=qx){return{ngModule:r,providers:[{provide:sy,useValue:e},{provide:W0,useFactory:Zx,deps:[sy]}]}}static forChild(e=qx){return{ngModule:r,providers:[{provide:sy,useValue:e},{provide:W0,useFactory:Zx,deps:[sy]},lT]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({imports:[Ue.MD,uT]})}return r})();typeof navigator<"u"&&/Mac/.test(navigator.platform);var TT=Rt(9280);Rt(1176),new i.UbH("DROPZONE_CONFIG");let kT=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=i.a4G({type:r});static \u0275inj=i.s3X({imports:[Ue.MD,Ue.MD]})}return r})();var AT=Rt(3768),MT=Rt(112),DT=Rt(5448),e1=Rt(7773),IT=Rt(560),OT=Rt(3120);function t1(r,t=MT.M,e){const s=(0,OT.k)(r,t);return function LT(r,t){return(0,DT.i)((e,s)=>{const{leading:l=!0,trailing:f=!1}=t??{};let C=!1,z=null,W=null,re=!1;const oe=()=>{W?.unsubscribe(),W=null,f&&(Ve(),re&&s.complete())},Ne=()=>{W=null,re&&s.complete()},Ye=$t=>W=(0,IT.Uv)(r($t)).subscribe((0,e1.e)(s,oe,Ne)),Ve=()=>{if(C){C=!1;const $t=z;z=null,s.next($t),!re&&Ye($t)}};e.subscribe((0,e1.e)(s,$t=>{C=!0,z=$t,(!W||W.closed)&&(l?Ve():Ye($t))},()=>{re=!0,(!(f&&C&&W)||W.closed)&&s.complete()}))})}(()=>s,e)}var n1=Rt(9212),r1=Rt(4e3),s1=Rt(6684),hu=typeof window<"u"?window:{screen:{},navigator:{}},jm=(hu.matchMedia||function(){return{matches:!1}}).bind(hu),o1=!1,a1=function(){};hu.addEventListener&&hu.addEventListener("p",a1,{get passive(){return o1=!0}}),hu.removeEventListener&&hu.removeEventListener("p",a1,!1);var l1=o1,$0="ontouchstart"in hu,u1=($0||"TouchEvent"in hu&&jm("(any-pointer: coarse)"),hu.navigator.userAgent||"");jm("(pointer: coarse)").matches&&/iPad|Macintosh/.test(u1)&&Math.min(hu.screen.width||0,hu.screen.height||0);function NT(r,t){}function YT(r,t){1&r&&i.yuY(0,NT,0,0,"ng-template")}(jm("(pointer: coarse)").matches||!jm("(pointer: fine)").matches&&$0)&&/Windows.*Firefox/.test(u1),jm("(any-pointer: fine)").matches||jm("(any-hover: hover)");const HT=(r,t,e)=>({tooltip:r,placement:t,content:e});function VT(r,t){if(1&r&&(i.SAx(0),i.yuY(1,YT,1,0,null,1),i.k70()),2&r){const e=i.GaO();i.yG2(),i.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",i.uAc(2,HT,e.tooltip,e.placement,e.content))}}function GT(r,t){if(1&r&&(i.SAx(0),i.I0R(1,"div",2),i.OEk(2),i.C$Y(),i.k70()),2&r){const e=i.GaO();i.yG2(),i.e48("title",e.tooltip)("data-tooltip-placement",e.placement),i.yG2(),i.oRS(" ",e.content," ")}}const jT=["tooltipTemplate"],UT=["leftOuterSelectionBar"],WT=["rightOuterSelectionBar"],$T=["fullBar"],XT=["selectionBar"],ZT=["minHandle"],qT=["maxHandle"],KT=["floorLabel"],JT=["ceilLabel"],QT=["minHandleLabel"],ek=["maxHandleLabel"],tk=["combinedLabel"],ik=["ticksElement"];function nk(r,t){if(1&r&&i.wR5(0,"ngx-slider-tooltip-wrapper",32),2&r){const e=i.GaO().$implicit,s=i.GaO();i.E7m("template",s.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function rk(r,t){if(1&r&&i.wR5(0,"span",33),2&r){const e=i.GaO().$implicit;i.E7m("innerText",e.legend)}}function sk(r,t){if(1&r&&i.wR5(0,"span",34),2&r){const e=i.GaO().$implicit;i.E7m("innerHTML",e.legend,i.E3n)}}const ok=r=>({"ngx-slider-selected":r});function ak(r,t){if(1&r&&(i.I0R(0,"span",27),i.wR5(1,"ngx-slider-tooltip-wrapper",28),i.yuY(2,nk,1,4,"ngx-slider-tooltip-wrapper",29)(3,rk,1,1,"span",30)(4,sk,1,1,"span",31),i.C$Y()),2&r){const e=t.$implicit,s=i.GaO();i.E7m("ngClass",i.S45(8,ok,e.selected))("ngStyle",e.style),i.yG2(),i.E7m("template",s.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),i.yG2(),i.E7m("ngIf",null!=e.value),i.yG2(),i.E7m("ngIf",null!=e.legend&&!1===s.allowUnsafeHtmlInSlider),i.yG2(),i.E7m("ngIf",null!=e.legend&&(null==s.allowUnsafeHtmlInSlider||s.allowUnsafeHtmlInSlider))}}var $d=function(r){return r[r.Low=0]="Low",r[r.High=1]="High",r[r.Floor=2]="Floor",r[r.Ceil=3]="Ceil",r[r.TickValue=4]="TickValue",r}($d||{});class oy{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const p1=new i.UbH("AllowUnsafeHtmlInSlider");var Jn=function(r){return r[r.Min=0]="Min",r[r.Max=1]="Max",r}(Jn||{});class lk{value;highValue;pointerType}class cn{static isNullOrUndefined(t){return null==t}static areArraysEqual(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(t[s]!==e[s])return!1;return!0}static linearValueToPosition(t,e,s){return(t-e)/(s-e)}static logValueToPosition(t,e,s){return((t=Math.log(t))-(e=Math.log(e)))/((s=Math.log(s))-e)}static linearPositionToValue(t,e,s){return t*(s-e)+e}static logPositionToValue(t,e,s){return e=Math.log(e),s=Math.log(s),Math.exp(t*(s-e)+e)}static findStepIndex(t,e){const s=e.map(f=>Math.abs(t-f.value));let l=0;for(let f=0;f<e.length;f++)s[f]!==s[l]&&s[f]<s[l]&&(l=f);return l}}class lp{static isTouchEvent(t){return void 0!==window.TouchEvent?t instanceof TouchEvent:void 0!==t.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class ga{static roundToPrecisionLimit(t,e){return+t.toPrecision(e)}static isModuloWithinPrecisionLimit(t,e,s){const l=Math.pow(10,-s);return Math.abs(t%e)<=l||Math.abs(Math.abs(t%e)-e)<=l}static clampToRange(t,e,s){return Math.min(Math.max(t,e),s)}}class f1{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class m1{renderer;constructor(t){this.renderer=t}attachPassiveEventListener(t,e,s,l){if(!0!==l1)return this.attachEventListener(t,e,s,l);const f=new f1;f.eventName=e,f.events=new x.E;const C=z=>{f.events.next(z)};return t.addEventListener(e,C,{passive:!0,capture:!1}),f.teardownCallback=()=>{t.removeEventListener(e,C,{passive:!0,capture:!1})},f.eventsSubscription=f.events.pipe(cn.isNullOrUndefined(l)?(0,n1.y)(()=>{}):t1(l,void 0,{leading:!0,trailing:!0})).subscribe(z=>{s(z)}),f}detachEventListener(t){cn.isNullOrUndefined(t.eventsSubscription)||(t.eventsSubscription.unsubscribe(),t.eventsSubscription=null),cn.isNullOrUndefined(t.events)||(t.events.complete(),t.events=null),cn.isNullOrUndefined(t.teardownCallback)||(t.teardownCallback(),t.teardownCallback=null)}attachEventListener(t,e,s,l){const f=new f1;return f.eventName=e,f.events=new x.E,f.teardownCallback=this.renderer.listen(t,e,z=>{f.events.next(z)}),f.eventsSubscription=f.events.pipe(cn.isNullOrUndefined(l)?(0,n1.y)(()=>{}):t1(l,void 0,{leading:!0,trailing:!0})).subscribe(z=>{s(z)}),f}}let cp=(()=>{class r{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,s,l){this.elemRef=e,this.renderer=s,this.changeDetectionRef=l,this.eventListenerHelper=new m1(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){const e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,s,l){const f=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,s,l);this.eventListeners.push(f)}onPassive(e,s,l){const f=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,s,l);this.eventListeners.push(f)}off(e){let s,l;cn.isNullOrUndefined(e)?(s=[],l=this.eventListeners):(s=this.eventListeners.filter(f=>f.eventName!==e),l=this.eventListeners.filter(f=>f.eventName===e));for(const f of l)this.eventListenerHelper.detachEventListener(f);this.eventListeners=s}isRefDestroyed(){return cn.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(s){return new(s||r)(i.GI1(i.GMv),i.GI1(i.q87),i.GI1(i.kD9))};static \u0275dir=i.Sc5({type:r,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(s,l){2&s&&i.m4B("opacity",l.opacity)("visibility",l.visibility)("left",l.left)("bottom",l.bottom)("height",l.height)("width",l.width)("transform",l.transform)}})}return r})(),X0=(()=>{class r extends cp{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(e,s,l){super(e,s,l)}static \u0275fac=function(s){return new(s||r)(i.GI1(i.GMv),i.GI1(i.q87),i.GI1(i.kD9))};static \u0275dir=i.Sc5({type:r,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(s,l){2&s&&(i.e48("role",l.role)("tabindex",l.tabindex)("aria-orientation",l.ariaOrientation)("aria-label",l.ariaLabel)("aria-labelledby",l.ariaLabelledBy)("aria-valuenow",l.ariaValueNow)("aria-valuetext",l.ariaValueText)("aria-valuemin",l.ariaValueMin)("aria-valuemax",l.ariaValueMax),i.eAK("ngx-slider-active",l.active))},features:[i.eg9]})}return r})(),Um=(()=>{class r extends cp{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,s,l,f){super(e,s,l),this.allowUnsafeHtmlInSlider=f}setValue(e){let s=!1;!this.alwaysHide&&(cn.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(s=!0),this._value=e,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,s&&this.calculateDimension()}static \u0275fac=function(s){return new(s||r)(i.GI1(i.GMv),i.GI1(i.q87),i.GI1(i.kD9),i.GI1(p1,8))};static \u0275dir=i.Sc5({type:r,selectors:[["","ngxSliderLabel",""]],features:[i.eg9]})}return r})(),ck=(()=>{class r{template;tooltip;placement;content;static \u0275fac=function(s){return new(s||r)};static \u0275cmp=i.In1({type:r,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(s,l){1&s&&i.yuY(0,VT,2,6,"ng-container",0)(1,GT,3,3,"ng-container",0),2&s&&(i.E7m("ngIf",l.template),i.yG2(),i.E7m("ngIf",!l.template))},dependencies:[Ue.u_,Ue.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return r})();class uk{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class g1{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class ay{value;highValue;static compare(t,e){return!(cn.isNullOrUndefined(t)&&cn.isNullOrUndefined(e)||cn.isNullOrUndefined(t)!==cn.isNullOrUndefined(e))&&t.value===e.value&&t.highValue===e.highValue}}class v1 extends ay{forceChange;static compare(t,e){return!(cn.isNullOrUndefined(t)&&cn.isNullOrUndefined(e)||cn.isNullOrUndefined(t)!==cn.isNullOrUndefined(e))&&t.value===e.value&&t.highValue===e.highValue&&t.forceChange===e.forceChange}}const dk={provide:V.Y6,useExisting:(0,i.wd)(()=>hk),multi:!0};let hk=(()=>{class r{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new i._w7;highValue=null;highValueChange=new i._w7;options=new oy;userChangeStart=new i._w7;userChange=new i._w7;userChangeEnd=new i._w7;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(s=>{this.focusPointer(s)})}get range(){return!cn.isNullOrUndefined(this.value)&&!cn.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new x.E;inputModelChangeSubscription=null;outputModelChangeSubject=new x.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new oy;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new g1;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,s,l,f,C){this.renderer=e,this.elementRef=s,this.changeDetectionRef=l,this.zone=f,this.allowUnsafeHtmlInSlider=C,this.eventListenerHelper=new m1(this.renderer)}ngOnInit(){this.viewOptions=new oy,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!cn.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!cn.isNullOrUndefined(e.value)||!cn.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,r1.a)(v1.compare),(0,s1.I)(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,r1.a)(v1.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){lp.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){lp.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){cn.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){cn.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){cn.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){cn.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){cn.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){cn.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===Jn.Min?this.minHandleElement:e===Jn.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===Jn.Min?this.viewLowValue:this.currentTrackingPointer===Jn.Max?this.viewHighValue:null}modelValueToViewValue(e){return cn.isNullOrUndefined(e)?NaN:cn.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:cn.findStepIndex(+e,this.viewOptions.stepsArray)}viewValueToModelValue(e){return cn.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}getStepValue(e){const s=this.viewOptions.stepsArray[e];return cn.isNullOrUndefined(s)?NaN:s.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){const s=this.normaliseModelValues(e),l=!ay.compare(e,s);l&&(this.value=s.value,this.highValue=s.highValue),this.viewLowValue=this.modelValueToViewValue(s.value),this.viewHighValue=this.range?this.modelValueToViewValue(s.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:s.value,highValue:s.highValue,forceChange:l,userEventInitiated:!1})}publishOutputModelChange(e){const s=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),cn.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[e.value,e.highValue]:e.value),cn.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(s(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{s()})}normaliseModelValues(e){const s=new ay;if(s.value=e.value,s.highValue=e.highValue,!cn.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const l=cn.findStepIndex(s.value,this.viewOptions.stepsArray);if(s.value=this.viewOptions.stepsArray[l].value,this.range){const f=cn.findStepIndex(s.highValue,this.viewOptions.stepsArray);s.highValue=this.viewOptions.stepsArray[f].value}}return s}if(this.viewOptions.enforceStep&&(s.value=this.roundStep(s.value),this.range&&(s.highValue=this.roundStep(s.highValue))),this.viewOptions.enforceRange&&(s.value=ga.clampToRange(s.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(s.highValue=ga.clampToRange(s.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)s.value=s.highValue;else{const l=e.value;s.value=e.highValue,s.highValue=l}return s}renormaliseModelValues(){const e={value:this.value,highValue:this.highValue},s=this.normaliseModelValues(e);ay.compare(s,e)||(this.value=s.value,this.highValue=s.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const s=this.getOptionsInfluencingEventBindings(this.viewOptions),l=!cn.areArraysEqual(e,s);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(l)}applyOptions(){if(this.viewOptions=new oy,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!cn.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!cn.isNullOrUndefined(this.viewOptions.tickStep)||!cn.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),cn.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),cn.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,s)=>e+" - "+s),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,cn.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e))}applyFloorCeilOptions(){if(cn.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),cn.isNullOrUndefined(this.viewOptions.ceil)||cn.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,cn.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(e){e!==Jn.Min&&e!==Jn.Max&&(e=Jn.Min),e===Jn.Min?this.minHandleElement.focus():this.range&&e===Jn.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){cn.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const e of this.getAllSliderElements())cn.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(const e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(const e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",cn.isNullOrUndefined(this.viewOptions.ariaLabel)?cn.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",cn.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?cn.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,$d.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,$d.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){cn.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,cn.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const e=cn.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,s=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();const l=cn.isNullOrUndefined(this.viewOptions.tickValueStep)?cn.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let f=!1;const C=e.map(z=>{let W=this.valueToPosition(z);this.viewOptions.vertical&&(W=this.maxHandlePosition-W);const re=s+"("+Math.round(W)+"px)",oe=new uk;oe.selected=this.isTickSelected(z),oe.style={"-webkit-transform":re,"-moz-transform":re,"-o-transform":re,"-ms-transform":re,transform:re},oe.selected&&!cn.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(oe.style["background-color"]=this.getSelectionBarColor()),!oe.selected&&!cn.isNullOrUndefined(this.viewOptions.getTickColor)&&(oe.style["background-color"]=this.getTickColor(z)),cn.isNullOrUndefined(this.viewOptions.ticksTooltip)||(oe.tooltip=this.viewOptions.ticksTooltip(z),oe.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!cn.isNullOrUndefined(l)&&ga.isModuloWithinPrecisionLimit(z,l,this.viewOptions.precisionLimit)&&(oe.value=this.getDisplayValue(z,$d.TickValue),cn.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(oe.valueTooltip=this.viewOptions.ticksValuesTooltip(z),oe.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let Ne=null;if(cn.isNullOrUndefined(this.viewOptions.stepsArray))cn.isNullOrUndefined(this.viewOptions.getLegend)||(Ne=this.viewOptions.getLegend(z));else{const Ye=this.viewOptions.stepsArray[z];cn.isNullOrUndefined(this.viewOptions.getStepLegend)?cn.isNullOrUndefined(Ye)||(Ne=Ye.legend):Ne=this.viewOptions.getStepLegend(Ye)}return cn.isNullOrUndefined(Ne)||(oe.legend=Ne,f=!0),oe});if(this.sliderElementWithLegendClass!==f&&setTimeout(()=>{this.sliderElementWithLegendClass=f}),cn.isNullOrUndefined(this.ticks)||this.ticks.length!==C.length)this.ticks=C,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let z=0;z<C.length;++z)Object.assign(this.ticks[z],C[z])}getTicksArray(){const e=cn.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,s=[],l=1+Math.floor(ga.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let f=0;f<l;++f)s.push(ga.roundToPrecisionLimit(this.viewOptions.floor+e*f,this.viewOptions.precisionLimit));return s}isTickSelected(e){if(!this.range)if(cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{const s=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>s&&e>=s&&e<=this.viewLowValue)return!0;if(this.viewLowValue<s&&e<=s&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,$d.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,$d.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(e,s){e===Jn.Min?this.updateLowHandle(s):e===Jn.Max&&this.updateHighHandle(s),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,s){const l=e===Jn.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,f=s-l/2+this.handleHalfDimension,C=this.fullBarElement.dimension-l;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===Jn.Min||!this.viewOptions.rightToLeft&&e===Jn.Max?Math.min(f,C):Math.min(Math.max(f,0),C):f}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,$d.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(Jn.Min,e)),cn.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(Jn.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,$d.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(Jn.Max,e)),cn.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(Jn.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,s=!1;const l=this.isLabelBelowFloorLabel(this.minHandleLabelElement),f=this.isLabelAboveCeilLabel(this.minHandleLabelElement),C=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),z=this.isLabelBelowFloorLabel(this.combinedLabelElement),W=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(l?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),f?(s=!0,this.ceilLabelElement.hide()):(s=!1,this.ceilLabelElement.show()),this.range){const re=this.combinedLabelElement.isVisible()?W:C,oe=this.combinedLabelElement.isVisible()?z:l;re?this.ceilLabelElement.hide():s||this.ceilLabelElement.show(),oe?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){const s=e.position,f=this.floorLabelElement.position;return this.viewOptions.rightToLeft?s+e.dimension>=f-2:s<=f+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(e){const s=e.position,f=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?s<=f+this.ceilLabelElement.dimension+2:s+e.dimension>=f-2}updateSelectionBar(){let e=0,s=0;const l=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,f=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)s=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=f;else if(cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))l?(s=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(s=this.minHandleElement.position+this.handleHalfDimension,e=0);else{const C=this.viewOptions.showSelectionBarFromValue,z=this.valueToPosition(C);(this.viewOptions.rightToLeft?this.viewLowValue<=C:this.viewLowValue>C)?(s=this.minHandleElement.position-z,e=z+this.handleHalfDimension):(s=z-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(s),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+s)),this.leftOuterSelectionBarElement.setPosition(e+s)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+s)),this.rightOuterSelectionBarElement.setPosition(e+s))),cn.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!cn.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const C=cn.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),z=C-e>0&&!l||C-e<=0&&l;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?z?"bottom":"top":z?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(C+s+e+(z?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=C-e+(z?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const C=this.getSelectionBarColor();this.barStyle={backgroundColor:C}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return this.viewOptions.getPointerColor(e===Jn.Max?this.highValue:this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(e=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){const s=this.getDisplayValue(this.viewLowValue,$d.Low),l=this.getDisplayValue(this.viewHighValue,$d.High),f=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(l,s):this.viewOptions.combineLabels(s,l);this.combinedLabelElement.setValue(f);const C=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(C),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,s){return!cn.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,s)}roundStep(e,s){const l=cn.isNullOrUndefined(s)?this.viewOptions.step:s;let f=ga.roundToPrecisionLimit((e-this.viewOptions.floor)/l,this.viewOptions.precisionLimit);return f=Math.round(f)*l,ga.roundToPrecisionLimit(this.viewOptions.floor+f,this.viewOptions.precisionLimit)}valueToPosition(e){let s=cn.linearValueToPosition;cn.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(s=cn.logValueToPosition):s=this.viewOptions.customValueToPosition;let l=s(e=ga.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return cn.isNullOrUndefined(l)&&(l=0),this.viewOptions.rightToLeft&&(l=1-l),l*this.maxHandlePosition}positionToValue(e){let s=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(s=1-s);let l=cn.linearPositionToValue;cn.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(l=cn.logPositionToValue):l=this.viewOptions.customPositionToValue;const f=l(s,this.viewOptions.floor,this.viewOptions.ceil);return cn.isNullOrUndefined(f)?0:f}getEventXY(e,s){if(e instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?e.clientY:e.clientX;let l=0;const f=e.touches;if(!cn.isNullOrUndefined(s))for(let C=0;C<f.length;C++)if(f[C].identifier===s){l=C;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?f[l].clientY:f[l].clientX}getEventPosition(e,s){const l=this.elementRef.nativeElement.getBoundingClientRect(),f=this.viewOptions.vertical||0!==this.viewOptions.rotate?l.bottom:l.left;let C=0;return C=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(e,s)+f:this.getEventXY(e,s)-f,C*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return Jn.Min;const s=this.getEventPosition(e),l=Math.abs(s-this.minHandleElement.position),f=Math.abs(s-this.maxHandleElement.position);return l<f?Jn.Min:l>f?Jn.Max:this.viewOptions.rightToLeft?s>this.minHandleElement.position?Jn.Min:Jn.Max:s<this.minHandleElement.position?Jn.Min:Jn.Max}bindEvents(){const e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",s=>this.onBarStart(null,e,s,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",s=>this.onBarStart(Jn.Min,e,s,!0,!0)),this.maxHandleElement.on("mousedown",s=>this.onBarStart(Jn.Max,e,s,!0,!0))):(this.minHandleElement.on("mousedown",s=>this.onStart(Jn.Min,s,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",s=>this.onStart(Jn.Max,s,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",s=>this.onStart(null,s,!0,!0,!0)),this.ticksElement.on("mousedown",s=>this.onStart(null,s,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",s=>this.onBarStart(null,e,s,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",s=>this.onBarStart(Jn.Min,e,s,!0,!0)),this.maxHandleElement.onPassive("touchstart",s=>this.onBarStart(Jn.Max,e,s,!0,!0))):(this.minHandleElement.onPassive("touchstart",s=>this.onStart(Jn.Min,s,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",s=>this.onStart(Jn.Max,s,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",s=>this.onStart(null,s,!0,!0,!0)),this.ticksElement.onPassive("touchstart",s=>this.onStart(null,s,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(Jn.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(Jn.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const e of this.getAllSliderElements())cn.isNullOrUndefined(e)||e.off()}onBarStart(e,s,l,f,C,z,W){s?this.onDragStart(e,l,f,C):this.onStart(e,l,f,C,z,W)}onStart(e,s,l,f,C,z){s.stopPropagation(),!lp.isTouchEvent(s)&&!l1&&s.preventDefault(),this.moving=!1,this.calculateViewDimensions(),cn.isNullOrUndefined(e)&&(e=this.getNearestHandle(s)),this.currentTrackingPointer=e;const W=this.getPointerElement(e);if(W.active=!0,this.viewOptions.keyboardSupport&&W.focus(),l){this.unsubscribeOnMove();const re=oe=>this.dragging.active?this.onDragMove(oe):this.onMove(oe);this.onMoveEventListener=lp.isTouchEvent(s)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",re):this.eventListenerHelper.attachEventListener(document,"mousemove",re)}if(f){this.unsubscribeOnEnd();const re=oe=>this.onEnd(oe);this.onEndEventListener=lp.isTouchEvent(s)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",re):this.eventListenerHelper.attachEventListener(document,"mouseup",re)}this.userChangeStart.emit(this.getChangeContext()),lp.isTouchEvent(s)&&!cn.isNullOrUndefined(s.changedTouches)&&cn.isNullOrUndefined(this.touchId)&&(this.touchId=s.changedTouches[0].identifier),C&&this.onMove(s,!0),z&&this.onEnd(s)}onMove(e,s){let l=null;if(lp.isTouchEvent(e)){const re=e.changedTouches;for(let oe=0;oe<re.length;oe++)if(re[oe].identifier===this.touchId){l=re[oe];break}if(cn.isNullOrUndefined(l))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const f=cn.isNullOrUndefined(l)?this.getEventPosition(e):this.getEventPosition(e,l.identifier);let C;f<=0?C=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:f>=this.maxHandlePosition?C=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(C=this.positionToValue(f),C=s&&!cn.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(C,this.viewOptions.tickStep):this.roundStep(C)),this.positionTrackingHandle(C)}onEnd(e){lp.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){const s=this.getPointerElement(e);s.on("blur",()=>this.onPointerBlur(s)),s.on("keydown",l=>this.onKeyboardEvent(l)),s.on("keyup",()=>this.onKeyUp()),s.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,cn.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){const s=this.viewOptions.ceil-this.viewOptions.floor;let l=e+this.viewOptions.step,f=e-this.viewOptions.step,C=e+s/10,z=e-s/10;this.viewOptions.reversedControls&&(l=e-this.viewOptions.step,f=e+this.viewOptions.step,C=e-s/10,z=e+s/10);const W={UP:l,DOWN:f,LEFT:f,RIGHT:l,PAGEUP:C,PAGEDOWN:z,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(W.LEFT=l,W.RIGHT=f,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(W.UP=f,W.DOWN=l)),W}onKeyboardEvent(e){const s=this.getCurrentTrackingValue(),l=cn.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,W=this.getKeyActions(s)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[l]];if(cn.isNullOrUndefined(W)||cn.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const re=ga.clampToRange(W,this.viewOptions.floor,this.viewOptions.ceil),oe=this.roundStep(re);if(this.viewOptions.draggableRangeOnly){const Ne=this.viewHighValue-this.viewLowValue;let Ye,Ve;this.currentTrackingPointer===Jn.Min?(Ye=oe,Ve=oe+Ne,Ve>this.viewOptions.ceil&&(Ve=this.viewOptions.ceil,Ye=Ve-Ne)):this.currentTrackingPointer===Jn.Max&&(Ve=oe,Ye=oe-Ne,Ye<this.viewOptions.floor&&(Ye=this.viewOptions.floor,Ve=Ye+Ne)),this.positionTrackingBar(Ye,Ve)}else this.positionTrackingHandle(oe)}onDragStart(e,s,l,f){const C=this.getEventPosition(s);this.dragging=new g1,this.dragging.active=!0,this.dragging.value=this.positionToValue(C),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-C:C-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?C-this.maxHandleElement.position:this.maxHandleElement.position-C,this.onStart(e,s,l,f)}getMinValue(e,s,l){const f=this.viewOptions.rightToLeft;let C=null;return C=s?l?f?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:f?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(f?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(C)}getMaxValue(e,s,l){const f=this.viewOptions.rightToLeft;let C=null;return C=s?l?f?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:f?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:f?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(C)}onDragMove(e){const s=this.getEventPosition(e);let l,f,C,z;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(l=this.dragging.lowLimit,f=this.dragging.highLimit,C=this.maxHandleElement,z=this.minHandleElement):(l=this.dragging.highLimit,f=this.dragging.lowLimit,C=this.minHandleElement,z=this.maxHandleElement);const re=s>=this.maxHandlePosition-l;let oe,Ne;if(s<=f){if(0===C.position)return;oe=this.getMinValue(s,!0,!1),Ne=this.getMaxValue(s,!0,!1)}else if(re){if(z.position===this.maxHandlePosition)return;Ne=this.getMaxValue(s,!0,!0),oe=this.getMinValue(s,!0,!0)}else oe=this.getMinValue(s,!1,!1),Ne=this.getMaxValue(s,!1,!1);this.positionTrackingBar(oe,Ne)}positionTrackingBar(e,s){!cn.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(s=ga.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!cn.isNullOrUndefined(this.viewOptions.maxLimit)&&s>this.viewOptions.maxLimit&&(e=ga.roundToPrecisionLimit((s=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=s,this.applyViewChange(),this.updateHandles(Jn.Min,this.valueToPosition(e)),this.updateHandles(Jn.Max,this.valueToPosition(s))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===Jn.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===Jn.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===Jn.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(Jn.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Jn.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===Jn.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(Jn.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=Jn.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===Jn.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===Jn.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!cn.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!cn.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){const l=Math.abs(e-(this.currentTrackingPointer===Jn.Min?this.viewHighValue:this.viewLowValue));if(!cn.isNullOrUndefined(this.viewOptions.minRange)&&l<this.viewOptions.minRange){if(this.currentTrackingPointer===Jn.Min)return ga.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Jn.Max)return ga.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!cn.isNullOrUndefined(this.viewOptions.maxRange)&&l>this.viewOptions.maxRange){if(this.currentTrackingPointer===Jn.Min)return ga.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===Jn.Max)return ga.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){const s=this.currentTrackingPointer===Jn.Min?this.viewHighValue-e:e-this.viewLowValue,l=cn.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,f=this.viewOptions.maxRange;return s<l?(this.currentTrackingPointer===Jn.Min?(this.viewHighValue=ga.roundToPrecisionLimit(Math.min(e+l,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=ga.roundToPrecisionLimit(this.viewHighValue-l,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Jn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Jn.Max&&(this.viewLowValue=ga.roundToPrecisionLimit(Math.max(e-l,this.viewOptions.floor),this.viewOptions.precisionLimit),e=ga.roundToPrecisionLimit(this.viewLowValue+l,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Jn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!cn.isNullOrUndefined(f)&&s>f&&(this.currentTrackingPointer===Jn.Min?(this.viewHighValue=ga.roundToPrecisionLimit(e+f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Jn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===Jn.Max&&(this.viewLowValue=ga.roundToPrecisionLimit(e-f,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(Jn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){const e=new lk;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(s){return new(s||r)(i.GI1(i.q87),i.GI1(i.GMv),i.GI1(i.kD9),i.GI1(i.WW2),i.GI1(p1,8))};static \u0275cmp=i.In1({type:r,selectors:[["ngx-slider"]],contentQueries:function(s,l,f){if(1&s&&i.szK(f,jT,5),2&s){let C;i.wto(C=i.Gqi())&&(l.tooltipTemplate=C.first)}},viewQuery:function(s,l){if(1&s&&(i.CC$(UT,5,cp),i.CC$(WT,5,cp),i.CC$($T,5,cp),i.CC$(XT,5,cp),i.CC$(ZT,5,X0),i.CC$(qT,5,X0),i.CC$(KT,5,Um),i.CC$(JT,5,Um),i.CC$(QT,5,Um),i.CC$(ek,5,Um),i.CC$(tk,5,Um),i.CC$(ik,5,cp)),2&s){let f;i.wto(f=i.Gqi())&&(l.leftOuterSelectionBarElement=f.first),i.wto(f=i.Gqi())&&(l.rightOuterSelectionBarElement=f.first),i.wto(f=i.Gqi())&&(l.fullBarElement=f.first),i.wto(f=i.Gqi())&&(l.selectionBarElement=f.first),i.wto(f=i.Gqi())&&(l.minHandleElement=f.first),i.wto(f=i.Gqi())&&(l.maxHandleElement=f.first),i.wto(f=i.Gqi())&&(l.floorLabelElement=f.first),i.wto(f=i.Gqi())&&(l.ceilLabelElement=f.first),i.wto(f=i.Gqi())&&(l.minHandleLabelElement=f.first),i.wto(f=i.Gqi())&&(l.maxHandleLabelElement=f.first),i.wto(f=i.Gqi())&&(l.combinedLabelElement=f.first),i.wto(f=i.Gqi())&&(l.ticksElement=f.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(s,l){1&s&&i.qCj("resize",function(C){return l.onResize(C)},!1,i.MbM),2&s&&(i.e48("disabled",l.sliderElementDisabledAttr)("aria-label",l.sliderElementAriaLabel),i.eAK("vertical",l.sliderElementVerticalClass)("animate",l.sliderElementAnimateClass)("with-legend",l.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[i.M5G([dk]),i.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(s,l){1&s&&(i.I0R(0,"span",0,1),i.wR5(2,"span",2),i.C$Y(),i.I0R(3,"span",3,4),i.wR5(5,"span",2),i.C$Y(),i.I0R(6,"span",5,6),i.wR5(8,"span",2),i.C$Y(),i.I0R(9,"span",7,8),i.wR5(11,"span",9),i.C$Y(),i.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),i.I0R(26,"span",24,25),i.yuY(28,ak,5,10,"span",26),i.C$Y()),2&s&&(i.yG2(6),i.eAK("ngx-slider-transparent",l.fullBarTransparentClass),i.yG2(3),i.eAK("ngx-slider-draggable",l.selectionBarDraggableClass),i.yG2(2),i.E7m("ngStyle",l.barStyle),i.yG2(),i.E7m("ngStyle",l.minPointerStyle),i.yG2(2),i.m4B("display",l.range?"inherit":"none"),i.E7m("ngStyle",l.maxPointerStyle),i.yG2(12),i.eAK("ngx-slider-ticks-values-under",l.ticksUnderValuesClass),i.E7m("hidden",!l.showTicks),i.yG2(2),i.E7m("ngForOf",l.ticks))},dependencies:[Ue.QF,Ue.ay,Ue.u_,Ue.Qt,cp,X0,Um,ck],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return r})(),pk=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=i.a4G({type:r});static \u0275inj=i.s3X({imports:[Ue.MD]})}return r})(),fk=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=i.a4G({type:r});static \u0275inj=i.s3X({imports:[Ue.MD]})}return r})();Rt(9400);var bf=Rt(6764),Wm=Rt(2780);const b1=function _k(r,t){return function(e){return r(t(e))}};b1(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const C1=function Dk(r,t){return r===t||r!=r&&t!=t},ly=function Ik(r,t){for(var e=r.length;e--;)if(C1(r[e][0],t))return e;return-1};var Ok=Array.prototype.splice;function $m(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}$m.prototype.clear=function Ak(){this.__data__=[],this.size=0},$m.prototype.delete=function Pk(r){var t=this.__data__,e=ly(t,r);return!(e<0||(e==t.length-1?t.pop():Ok.call(t,e,1),--this.size,0))},$m.prototype.get=function zk(r){var t=this.__data__,e=ly(t,r);return e<0?void 0:t[e][1]},$m.prototype.has=function Bk(r){return ly(this.__data__,r)>-1},$m.prototype.set=function Yk(r,t){var e=this.__data__,s=ly(e,r);return s<0?(++this.size,e.push([r,t])):e[s][1]=t,this};const cy=$m;var xv=Rt(4556);var r,Th=Rt(7616),t2=Th.c["__core-js_shared__"],S1=(r=/[^.]+$/.exec(t2&&t2.keys&&t2.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var o2=Function.prototype.toString;const xf=function a2(r){if(null!=r){try{return o2.call(r)}catch{}try{return r+""}catch{}}return""};var c2=/^\[object .+?Constructor\]$/,f2=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const g2=function m2(r){return!(!(0,xv.c)(r)||function n2(r){return!!S1&&S1 in r}(r))&&(function e2(r){if(!(0,xv.c)(r))return!1;var t=(0,Wm.c)(r);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(r)?f2:c2).test(xf(r))},wf=function y2(r,t){var e=function v2(r,t){return r?.[t]}(r,t);return g2(e)?e:void 0},wv=wf(Th.c,"Map"),Cv=wf(Object,"create");var A2=Object.prototype.hasOwnProperty;var L2=Object.prototype.hasOwnProperty;function Xm(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}Xm.prototype.clear=function w2(){this.__data__=Cv?Cv(null):{},this.size=0},Xm.prototype.delete=function E2(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t},Xm.prototype.get=function M2(r){var t=this.__data__;if(Cv){var e=t[r];return"__lodash_hash_undefined__"===e?void 0:e}return A2.call(t,r)?t[r]:void 0},Xm.prototype.has=function O2(r){var t=this.__data__;return Cv?void 0!==t[r]:L2.call(t,r)},Xm.prototype.set=function z2(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Cv&&void 0===t?"__lodash_hash_undefined__":t,this};const T1=Xm,uy=function V2(r,t){var e=r.__data__;return function Y2(r){var t=typeof r;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r}(t)?e["string"==typeof t?"string":"hash"]:e.map};function Zm(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var s=r[t];this.set(s[0],s[1])}}Zm.prototype.clear=function B2(){this.size=0,this.__data__={hash:new T1,map:new(wv||cy),string:new T1}},Zm.prototype.delete=function G2(r){var t=uy(this,r).delete(r);return this.size-=t?1:0,t},Zm.prototype.get=function U2(r){return uy(this,r).get(r)},Zm.prototype.has=function $2(r){return uy(this,r).has(r)},Zm.prototype.set=function Z2(r,t){var e=uy(this,r),s=e.size;return e.set(r,t),this.size+=e.size==s?0:1,this};const K2=Zm;function qm(r){var t=this.__data__=new cy(r);this.size=t.size}qm.prototype.clear=function Vk(){this.__data__=new cy,this.size=0},qm.prototype.delete=function jk(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e},qm.prototype.get=function Wk(r){return this.__data__.get(r)},qm.prototype.has=function Xk(r){return this.__data__.has(r)},qm.prototype.set=function Q2(r,t){var e=this.__data__;if(e instanceof cy){var s=e.__data__;if(!wv||s.length<199)return s.push([r,t]),this.size=++e.size,this;e=this.__data__=new K2(s)}return e.set(r,t),this.size=e.size,this},function(){try{var r=wf(Object,"defineProperty");return r({},"",{}),r}catch{}}();!function pA(r){(0,bf.c)(r)&&(0,Wm.c)(r)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var wo={};wo["[object Float32Array]"]=wo["[object Float64Array]"]=wo["[object Int8Array]"]=wo["[object Int16Array]"]=wo["[object Int32Array]"]=wo["[object Uint8Array]"]=wo["[object Uint8ClampedArray]"]=wo["[object Uint16Array]"]=wo["[object Uint32Array]"]=!0,wo["[object Arguments]"]=wo["[object Array]"]=wo["[object ArrayBuffer]"]=wo["[object Boolean]"]=wo["[object DataView]"]=wo["[object Date]"]=wo["[object Error]"]=wo["[object Function]"]=wo["[object Map]"]=wo["[object Number]"]=wo["[object Object]"]=wo["[object RegExp]"]=wo["[object Set]"]=wo["[object String]"]=wo["[object WeakMap]"]=!1;const Q0=function iM(r){return function(t){return r(t)}};var nM=Rt(8616),F1="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ev=F1&&"object"==typeof module&&module&&!module.nodeType&&module,eb=Ev&&Ev.exports===F1&&nM.c.process;const Km=function(){try{return Ev&&Ev.require&&Ev.require("util").types||eb&&eb.binding&&eb.binding("util")}catch{}}();var B1=Km&&Km.isTypedArray;B1&&Q0(B1),b1(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const sb=wf(Th.c,"DataView"),ob=wf(Th.c,"Promise"),ab=wf(Th.c,"Set"),lb=wf(Th.c,"WeakMap");var q1="[object Map]",K1="[object Promise]",J1="[object Set]",Q1="[object WeakMap]",ew="[object DataView]",oD=xf(sb),aD=xf(wv),lD=xf(ob),cD=xf(ab),uD=xf(lb),Cf=Wm.c;(sb&&Cf(new sb(new ArrayBuffer(1)))!=ew||wv&&Cf(new wv)!=q1||ob&&Cf(ob.resolve())!=K1||ab&&Cf(new ab)!=J1||lb&&Cf(new lb)!=Q1)&&(Cf=function(r){var t=(0,Wm.c)(r),e="[object Object]"==t?r.constructor:void 0,s=e?xf(e):"";if(s)switch(s){case oD:return ew;case aD:return q1;case lD:return K1;case cD:return J1;case uD:return Q1}return t});Rt(312);var ow=Km&&Km.isMap;ow&&Q0(ow);var aw=Km&&Km.isSet;aw&&Q0(aw);var po={};po["[object Arguments]"]=po["[object Array]"]=po["[object ArrayBuffer]"]=po["[object DataView]"]=po["[object Boolean]"]=po["[object Date]"]=po["[object Float32Array]"]=po["[object Float64Array]"]=po["[object Int8Array]"]=po["[object Int16Array]"]=po["[object Int32Array]"]=po["[object Map]"]=po["[object Number]"]=po["[object Object]"]=po["[object RegExp]"]=po["[object Set]"]=po["[object String]"]=po["[object Symbol]"]=po["[object Uint8Array]"]=po["[object Uint8ClampedArray]"]=po["[object Uint16Array]"]=po["[object Uint32Array]"]=!0,po["[object Error]"]=po["[object Function]"]=po["[object WeakMap]"]=!1,Symbol("MainQueueId"),new Array(256).fill(0).map((r,t)=>("0"+t.toString(16)).slice(-2));let HI=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.a4G({type:r}),r.\u0275inj=i.s3X({imports:[[V.y,Ue.MD]]}),r})();Rt(1472);var hw=Rt(2164);window.ApexCharts=hw;let UI=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.a4G({type:r}),r.\u0275inj=i.s3X({}),r})();Rt(9216);let WI=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({})}return r})();var pw=Rt(800),fw=Rt(3616),$I=Rt(5084),XI=Rt(4704),ZI=Rt(6700),qI=Rt(7368),KI=Rt(8716);const py=()=>{const r=typeof window<"u"?window:void 0;return r&&r.tinymce?r.tinymce:null};let JI=(()=>{class r{onBeforePaste=new i._w7;onBlur=new i._w7;onClick=new i._w7;onCompositionEnd=new i._w7;onCompositionStart=new i._w7;onCompositionUpdate=new i._w7;onContextMenu=new i._w7;onCopy=new i._w7;onCut=new i._w7;onDblclick=new i._w7;onDrag=new i._w7;onDragDrop=new i._w7;onDragEnd=new i._w7;onDragGesture=new i._w7;onDragOver=new i._w7;onDrop=new i._w7;onFocus=new i._w7;onFocusIn=new i._w7;onFocusOut=new i._w7;onKeyDown=new i._w7;onKeyPress=new i._w7;onKeyUp=new i._w7;onMouseDown=new i._w7;onMouseEnter=new i._w7;onMouseLeave=new i._w7;onMouseMove=new i._w7;onMouseOut=new i._w7;onMouseOver=new i._w7;onMouseUp=new i._w7;onPaste=new i._w7;onSelectionChange=new i._w7;onActivate=new i._w7;onAddUndo=new i._w7;onBeforeAddUndo=new i._w7;onBeforeExecCommand=new i._w7;onBeforeGetContent=new i._w7;onBeforeRenderUI=new i._w7;onBeforeSetContent=new i._w7;onChange=new i._w7;onClearUndos=new i._w7;onDeactivate=new i._w7;onDirty=new i._w7;onExecCommand=new i._w7;onGetContent=new i._w7;onHide=new i._w7;onInit=new i._w7;onInput=new i._w7;onInitNgModel=new i._w7;onLoadContent=new i._w7;onNodeChange=new i._w7;onPostProcess=new i._w7;onPostRender=new i._w7;onPreInit=new i._w7;onPreProcess=new i._w7;onProgressState=new i._w7;onRedo=new i._w7;onRemove=new i._w7;onReset=new i._w7;onResizeEditor=new i._w7;onSaveContent=new i._w7;onSetAttrib=new i._w7;onObjectResizeStart=new i._w7;onObjectResized=new i._w7;onObjectSelected=new i._w7;onSetContent=new i._w7;onShow=new i._w7;onSubmit=new i._w7;onUndo=new i._w7;onVisualAid=new i._w7;static \u0275fac=function(s){return new(s||r)};static \u0275dir=i.Sc5({type:r,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return r})();const mw=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],fy=(r,t,e)=>(0,pw.w)(r,t).pipe((0,fw.a)(e)),gw=(r,t)=>"string"==typeof r?r.split(",").map(e=>e.trim()):Array.isArray(r)?r:t;let vw=0;const _w=r=>typeof r<"u"&&"textarea"===r.tagName.toLowerCase(),yw=r=>typeof r>"u"||""===r?[]:Array.isArray(r)?r:r.split(" "),iL=(r,t)=>yw(r).concat(yw(t)),nL=()=>{},bw=r=>null==r,oL=(()=>{const r=new ZI.g(null),t=r.pipe((0,s1.I)(Boolean),(0,qI.G)(([e,s])=>{const l=e.createElement("script");return l.referrerPolicy="origin",l.type="application/javascript",l.src=s,e.head.appendChild(l),(0,pw.w)(l,"load").pipe(r=>r.pipe((0,$I.K)(),(0,XI.k)(()=>{})))}),(0,KI.C)({bufferSize:1,refCount:!0}));return{load:(...e)=>(r.getValue()||r.next(e),t),reinitialize:()=>{r.next(null)}}})(),aL=new i.UbH("TINYMCE_SCRIPT_SRC"),lL={provide:V.Y6,useExisting:(0,i.wd)(()=>xw),multi:!0};let xw=(()=>{class r extends JI{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=nL;onChangeCallback;destroy$=new x.E;constructor(e,s,l,f,C){super(),this.cdRef=l,this.platformId=f,this.tinymceScriptSrc=C,this._elementRef=e,this.ngZone=s}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(bw(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,Ue.c0)(this.platformId)&&(this.id=this.id||(r=>{const e=(new Date).getTime(),s=Math.floor(1e9*Math.random());return vw++,"tiny-angular_"+s+vw+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==py()?this.initialise():this._element&&this._element.ownerDocument&&oL.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,fw.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==py()&&py().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,_w(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const e={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:iL(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:s=>{this._editor=s,fy(s,"init",this.destroy$).subscribe(()=>{this.initEditor(s)}),((r,t,e)=>{(r=>{const t=gw(r.ignoreEvents,[]);return gw(r.allowedEvents,mw).filter(s=>mw.includes(s)&&!t.includes(s))})(r).forEach(l=>{const f=r[l];fy(t,l.substring(2),e).subscribe(C=>{(r=>r.observed||r.observers?.length>0)(f)&&r.ngZone.run(()=>f.emit({event:C,editor:t}))})})})(this,s,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(s)}};_w(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{py().init(e)})};getScriptSrc(){return bw(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){fy(e,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),fy(e,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}static \u0275fac=function(s){return new(s||r)(i.GI1(i.GMv),i.GI1(i.WW2),i.GI1(i.kD9),i.GI1(i.AHE),i.GI1(aL,8))};static \u0275cmp=i.In1({type:r,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[i.M5G([lL]),i.eg9,i.UHJ],decls:0,vars:0,template:function(s,l){},dependencies:[Ue.MD,V.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return r})(),cL=(()=>{class r{static \u0275fac=function(s){return new(s||r)};static \u0275mod=i.a4G({type:r});static \u0275inj=i.s3X({imports:[xw]})}return r})();var uL=Rt(2728);let hL=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({imports:[Ue.MD]})}return r})();var pL=Rt(8987);function fL(r,t){1&r&&i.OEk(0),2&r&&i.cNF(t.index<t.value?"\u2605":"\u2606")}function mL(r,t){}const gL=(r,t)=>({index:r,value:t});function vL(r,t){if(1&r){const e=i.KQA();i.I0R(0,"span",3),i.OEk(1),i.C$Y(),i.I0R(2,"span",4),i.qCj("mouseenter",function(){const f=i.usT(e).index,C=i.GaO();return i.CGJ(C.enter(f+1))})("click",function(){const f=i.usT(e).index,C=i.GaO();return i.CGJ(C.rate(f+1))}),i.yuY(3,mL,0,0,"ng-template",5),i.C$Y()}if(2&r){const e=t.$implicit,s=t.index,l=i.GaO(),f=i.Gew(2);i.yG2(),i.oRS("(",s<l.value?"*":" ",")"),i.yG2(),i.m4B("cursor",l.readonly?"default":"pointer"),i.eAK("active",s<l.value),i.E7m("title",e.title),i.yG2(),i.E7m("ngTemplateOutlet",l.customTemplate||f)("ngTemplateOutletContext",i.IBC(8,gL,s,l.value))}}let _L=(()=>{class r{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275prov=i.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const yL={provide:V.Y6,useExisting:(0,i.wd)(()=>bL),multi:!0};let bL=(()=>{class r{constructor(e,s){this.changeDetection=e,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new i._w7,this.onLeave=new i._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,s)}onKeydown(e){-1!==[37,38,39,40].indexOf(e.which)&&(e.preventDefault(),e.stopPropagation(),this.rate(this.value+(38===e.which||39===e.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(e){if(e%1!==e)return this.value=Math.round(e),this.preValue=e,void this.changeDetection.markForCheck();this.preValue=e,this.value=e,this.changeDetection.markForCheck()}enter(e){this.readonly||(this.value=e,this.changeDetection.markForCheck(),this.onHover.emit(e))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}rate(e){!this.readonly&&this.range&&e>=0&&e<=this.range.length&&(this.writeValue(e),this.onChange(e))}buildTemplateObjects(e){const s=[];for(let l=0;l<e;l++)s.push({index:l,title:this.titles[l]||l+1});return s}static#e=this.\u0275fac=function(s){return new(s||r)(i.GI1(i.kD9),i.GI1(_L))};static#t=this.\u0275cmp=i.In1({type:r,selectors:[["rating"]],hostBindings:function(s,l){1&s&&i.qCj("keydown",function(C){return l.onKeydown(C)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[i.M5G([yL])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,l){1&s&&(i.I0R(0,"span",0),i.qCj("mouseleave",function(){return l.reset()})("keydown",function(C){return l.onKeydown(C)}),i.yuY(1,fL,1,1,"ng-template",null,1,i.gJz)(3,vL,4,11,"ng-template",2),i.C$Y()),2&s&&(i.e48("aria-label",l.ariaLabel)("aria-valuemax",l.range.length)("aria-valuenow",l.value),i.yG2(3),i.E7m("ngForOf",l.range))},dependencies:[Ue.ay,Ue.XV],encapsulation:2,changeDetection:0})}return r})(),xL=(()=>{class r{static forRoot(){return{ngModule:r,providers:[]}}static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({imports:[Ue.MD]})}return r})();var pb=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Jm={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var t=new Date(r.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},fb={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var t=r%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const mb=fb;var Nc=function(r,t){return void 0===t&&(t=2),("000"+r).slice(-1*t)},Vu=function(r){return!0===r?1:0};function ww(r,t){var e;return function(){var s=this,l=arguments;clearTimeout(e),e=setTimeout(function(){return r.apply(s,l)},t)}}var gb=function(r){return r instanceof Array?r:[r]};function Ec(r,t,e){if(!0===e)return r.classList.add(t);r.classList.remove(t)}function Fs(r,t,e){var s=window.document.createElement(r);return e=e||"",s.className=t=t||"",void 0!==e&&(s.textContent=e),s}function my(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Cw(r,t){return t(r)?r:r.parentNode?Cw(r.parentNode,t):void 0}function gy(r,t){var e=Fs("div","numInputWrapper"),s=Fs("input","numInput "+r),l=Fs("span","arrowUp"),f=Fs("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?s.type="number":(s.type="text",s.pattern="\\d*"),void 0!==t)for(var C in t)s.setAttribute(C,t[C]);return e.appendChild(s),e.appendChild(l),e.appendChild(f),e}function pu(r){try{return"function"==typeof r.composedPath?r.composedPath()[0]:r.target}catch{return r.target}}var vb=function(){},vy=function(r,t,e){return e.months[t?"shorthand":"longhand"][r]},wL={D:vb,F:function(r,t,e){r.setMonth(e.months.longhand.indexOf(t))},G:function(r,t){r.setHours((r.getHours()>=12?12:0)+parseFloat(t))},H:function(r,t){r.setHours(parseFloat(t))},J:function(r,t){r.setDate(parseFloat(t))},K:function(r,t,e){r.setHours(r.getHours()%12+12*Vu(new RegExp(e.amPM[1],"i").test(t)))},M:function(r,t,e){r.setMonth(e.months.shorthand.indexOf(t))},S:function(r,t){r.setSeconds(parseFloat(t))},U:function(r,t){return new Date(1e3*parseFloat(t))},W:function(r,t,e){var s=parseInt(t),l=new Date(r.getFullYear(),0,2+7*(s-1),0,0,0,0);return l.setDate(l.getDate()-l.getDay()+e.firstDayOfWeek),l},Y:function(r,t){r.setFullYear(parseFloat(t))},Z:function(r,t){return new Date(t)},d:function(r,t){r.setDate(parseFloat(t))},h:function(r,t){r.setHours((r.getHours()>=12?12:0)+parseFloat(t))},i:function(r,t){r.setMinutes(parseFloat(t))},j:function(r,t){r.setDate(parseFloat(t))},l:vb,m:function(r,t){r.setMonth(parseFloat(t)-1)},n:function(r,t){r.setMonth(parseFloat(t)-1)},s:function(r,t){r.setSeconds(parseFloat(t))},u:function(r,t){return new Date(parseFloat(t))},w:vb,y:function(r,t){r.setFullYear(2e3+parseFloat(t))}},Ef={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Tv={Z:function(r){return r.toISOString()},D:function(r,t,e){return t.weekdays.shorthand[Tv.w(r,t,e)]},F:function(r,t,e){return vy(Tv.n(r,t,e)-1,!1,t)},G:function(r,t,e){return Nc(Tv.h(r,t,e))},H:function(r){return Nc(r.getHours())},J:function(r,t){return void 0!==t.ordinal?r.getDate()+t.ordinal(r.getDate()):r.getDate()},K:function(r,t){return t.amPM[Vu(r.getHours()>11)]},M:function(r,t){return vy(r.getMonth(),!0,t)},S:function(r){return Nc(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,t,e){return e.getWeek(r)},Y:function(r){return Nc(r.getFullYear(),4)},d:function(r){return Nc(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return Nc(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,t){return t.weekdays.longhand[r.getDay()]},m:function(r){return Nc(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}},Ew=function(r){var t=r.config,e=void 0===t?Jm:t,s=r.l10n,l=void 0===s?fb:s,f=r.isMobile,C=void 0!==f&&f;return function(z,W,re){var oe=re||l;return void 0===e.formatDate||C?W.split("").map(function(Ne,Ye,Ve){return Tv[Ne]&&"\\"!==Ve[Ye-1]?Tv[Ne](z,oe,e):"\\"!==Ne?Ne:""}).join(""):e.formatDate(z,W,oe)}},_b=function(r){var t=r.config,e=void 0===t?Jm:t,s=r.l10n,l=void 0===s?fb:s;return function(f,C,z,W){if(0===f||f){var oe,re=W||l,Ne=f;if(f instanceof Date)oe=new Date(f.getTime());else if("string"!=typeof f&&void 0!==f.toFixed)oe=new Date(f);else if("string"==typeof f){var Ye=C||(e||Jm).dateFormat,Ve=String(f).trim();if("today"===Ve)oe=new Date,z=!0;else if(e&&e.parseDate)oe=e.parseDate(f,Ye);else if(/Z$/.test(Ve)||/GMT$/.test(Ve))oe=new Date(f);else{for(var $t=void 0,Ut=[],li=0,Di=0,Sn="";li<Ye.length;li++){var hr=Ye[li],yr="\\"===hr;if(Ef[hr]&&"\\"!==Ye[li-1]&&!yr){Sn+=Ef[hr];var is=new RegExp(Sn).exec(f);is&&($t=!0)&&Ut["Y"!==hr?"push":"unshift"]({fn:wL[hr],val:is[++Di]})}else yr||(Sn+=".")}oe=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),Ut.forEach(function(Bs){return oe=(0,Bs.fn)(oe,Bs.val,re)||oe}),oe=$t?oe:void 0}}return oe instanceof Date&&!isNaN(oe.getTime())?(!0===z&&oe.setHours(0,0,0,0),oe):void e.errorHandler(new Error("Invalid date provided: "+Ne))}}};function fu(r,t,e){return void 0===e&&(e=!0),!1!==e?new Date(r.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):r.getTime()-t.getTime()}var CL=function(r,t,e){return r>Math.min(t,e)&&r<Math.max(t,e)},yb=function(r,t,e){return 3600*r+60*t+e},EL=function(r){var t=Math.floor(r/3600),e=(r-3600*t)/60;return[t,e,r-3600*t-60*e]},SL={DAY:864e5};function bb(r){var t=r.defaultHour,e=r.defaultMinute,s=r.defaultSeconds;if(void 0!==r.minDate){var l=r.minDate.getHours(),f=r.minDate.getMinutes(),C=r.minDate.getSeconds();t<l&&(t=l),t===l&&e<f&&(e=f),t===l&&e===f&&s<C&&(s=r.minDate.getSeconds())}if(void 0!==r.maxDate){var z=r.maxDate.getHours(),W=r.maxDate.getMinutes();(t=Math.min(t,z))===z&&(e=Math.min(W,e)),t===z&&e===W&&(s=r.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:s}}Rt(6900);var ic=function(){return ic=Object.assign||function(r){for(var t,e=1,s=arguments.length;e<s;e++)for(var l in t=arguments[e])Object.prototype.hasOwnProperty.call(t,l)&&(r[l]=t[l]);return r},ic.apply(this,arguments)},Sw=function(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;var s=Array(r),l=0;for(t=0;t<e;t++)for(var f=arguments[t],C=0,z=f.length;C<z;C++,l++)s[l]=f[C];return s},TL=300;function kL(r,t){var e={config:ic(ic({},Jm),Ia.defaultConfig),l10n:mb};function f(){var _t;return(null===(_t=e.calendarContainer)||void 0===_t?void 0:_t.getRootNode()).activeElement||document.activeElement}function C(_t){return _t.bind(e)}function z(){var _t=e.config;!1===_t.weekNumbers&&1===_t.showMonths||!0!==_t.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var Mt=(e.days.offsetWidth+1)*_t.showMonths;e.daysContainer.style.width=Mt+"px",e.calendarContainer.style.width=Mt+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function W(_t){if(0===e.selectedDates.length){var Mt=void 0===e.config.minDate||fu(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),mi=bb(e.config);Mt.setHours(mi.hours,mi.minutes,mi.seconds,Mt.getMilliseconds()),e.selectedDates=[Mt],e.latestSelectedDateObj=Mt}void 0!==_t&&"blur"!==_t.type&&function tO(_t){_t.preventDefault();var Mt="keydown"===_t.type,mi=pu(_t),Xi=mi;void 0!==e.amPM&&mi===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Vu(e.amPM.textContent===e.l10n.amPM[0])]);var Mn=parseFloat(Xi.getAttribute("min")),Wn=parseFloat(Xi.getAttribute("max")),es=parseFloat(Xi.getAttribute("step")),ur=parseInt(Xi.value,10),nr=ur+es*(_t.delta||(Mt?38===_t.which?1:-1:0));if(typeof Xi.value<"u"&&2===Xi.value.length){var Vr=Xi===e.hourElement,so=Xi===e.minuteElement;nr<Mn?(nr=Wn+nr+Vu(!Vr)+(Vu(Vr)&&Vu(!e.amPM)),so&&yr(void 0,-1,e.hourElement)):nr>Wn&&(nr=Xi===e.hourElement?nr-Wn-Vu(!e.amPM):Mn,so&&yr(void 0,1,e.hourElement)),e.amPM&&Vr&&(1===es?nr+ur===23:Math.abs(nr-ur)>es)&&(e.amPM.textContent=e.l10n.amPM[Vu(e.amPM.textContent===e.l10n.amPM[0])]),Xi.value=Nc(nr)}}(_t);var Xi=e._input.value;Ne(),kh(),e._input.value!==Xi&&e._debouncedChange()}function Ne(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var _t=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Mt=(parseInt(e.minuteElement.value,10)||0)%60,mi=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(_t=function re(_t,Mt){return _t%12+12*Vu(Mt===e.l10n.amPM[1])}(_t,e.amPM.textContent));var Xi=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===fu(e.latestSelectedDateObj,e.config.minDate,!0),Mn=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===fu(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var Wn=yb(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),es=yb(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),ur=yb(_t,Mt,mi);if(ur>es&&ur<Wn){var us=EL(Wn);_t=us[0],Mt=us[1],mi=us[2]}}else{if(Mn){var nr=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(_t=Math.min(_t,nr.getHours()))===nr.getHours()&&(Mt=Math.min(Mt,nr.getMinutes())),Mt===nr.getMinutes()&&(mi=Math.min(mi,nr.getSeconds()))}if(Xi){var Vr=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(_t=Math.max(_t,Vr.getHours()))===Vr.getHours()&&Mt<Vr.getMinutes()&&(Mt=Vr.getMinutes()),Mt===Vr.getMinutes()&&(mi=Math.max(mi,Vr.getSeconds()))}}Ve(_t,Mt,mi)}}function Ye(_t){var Mt=_t||e.latestSelectedDateObj;Mt&&Mt instanceof Date&&Ve(Mt.getHours(),Mt.getMinutes(),Mt.getSeconds())}function Ve(_t,Mt,mi){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(_t%24,Mt,mi||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=Nc(e.config.time_24hr?_t:(12+_t)%12+12*Vu(_t%12==0)),e.minuteElement.value=Nc(Mt),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[Vu(_t>=12)]),void 0!==e.secondElement&&(e.secondElement.value=Nc(mi)))}function $t(_t){var Mt=pu(_t),mi=parseInt(Mt.value)+(_t.delta||0);(mi/1e3>1||"Enter"===_t.key&&!/[^\d]/.test(mi.toString()))&&_y(mi)}function Ut(_t,Mt,mi,Xi){return Mt instanceof Array?Mt.forEach(function(Mn){return Ut(_t,Mn,mi,Xi)}):_t instanceof Array?_t.forEach(function(Mn){return Ut(Mn,Mt,mi,Xi)}):(_t.addEventListener(Mt,mi,Xi),void e._handlers.push({remove:function(){return _t.removeEventListener(Mt,mi,Xi)}}))}function li(){Go("onChange")}function Sn(_t,Mt){var mi=void 0!==_t?e.parseDate(_t):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Xi=e.currentYear,Mn=e.currentMonth;try{void 0!==mi&&(e.currentYear=mi.getFullYear(),e.currentMonth=mi.getMonth())}catch(Wn){Wn.message="Invalid date supplied: "+mi,e.config.errorHandler(Wn)}Mt&&e.currentYear!==Xi&&(Go("onYearChange"),tg()),Mt&&(e.currentYear!==Xi||e.currentMonth!==Mn)&&Go("onMonthChange"),e.redraw()}function hr(_t){var Mt=pu(_t);~Mt.className.indexOf("arrow")&&yr(_t,Mt.classList.contains("arrowUp")?1:-1)}function yr(_t,Mt,mi){var Xi=_t&&pu(_t),Mn=mi||Xi&&Xi.parentNode&&Xi.parentNode.firstChild,Wn=Tb("increment");Wn.delta=Mt,Mn&&Mn.dispatchEvent(Wn)}function is(_t,Mt,mi,Xi){var Mn=Sf(Mt,!0),Wn=Fs("span",_t,Mt.getDate().toString());return Wn.dateObj=Mt,Wn.$i=Xi,Wn.setAttribute("aria-label",e.formatDate(Mt,e.config.ariaDateFormat)),-1===_t.indexOf("hidden")&&0===fu(Mt,e.now)&&(e.todayDateElem=Wn,Wn.classList.add("today"),Wn.setAttribute("aria-current","date")),Mn?(Wn.tabIndex=-1,kb(Mt)&&(Wn.classList.add("selected"),e.selectedDateElem=Wn,"range"===e.config.mode&&(Ec(Wn,"startRange",e.selectedDates[0]&&0===fu(Mt,e.selectedDates[0],!0)),Ec(Wn,"endRange",e.selectedDates[1]&&0===fu(Mt,e.selectedDates[1],!0)),"nextMonthDay"===_t&&Wn.classList.add("inRange")))):Wn.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function QL(_t){return!("range"!==e.config.mode||e.selectedDates.length<2)&&fu(_t,e.selectedDates[0])>=0&&fu(_t,e.selectedDates[1])<=0}(Mt)&&!kb(Mt)&&Wn.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==_t&&Xi%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Mt)+"</span>"),Go("onDayCreate",Wn),Wn}function Bs(_t){_t.focus(),"range"===e.config.mode&&by(_t)}function Qr(_t){for(var mi=_t>0?e.config.showMonths:-1,Xi=_t>0?0:e.config.showMonths-1;Xi!=mi;Xi+=_t)for(var Mn=e.daysContainer.children[Xi],es=_t>0?Mn.children.length:-1,ur=_t>0?0:Mn.children.length-1;ur!=es;ur+=_t){var us=Mn.children[ur];if(-1===us.className.indexOf("hidden")&&Sf(us.dateObj))return us}}function pd(_t,Mt){var mi=f(),Xi=yy(mi||document.body),Mn=void 0!==_t?_t:Xi?mi:void 0!==e.selectedDateElem&&yy(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&yy(e.todayDateElem)?e.todayDateElem:Qr(Mt>0?1:-1);void 0===Mn?e._input.focus():Xi?function Gu(_t,Mt){for(var mi=-1===_t.className.indexOf("Month")?_t.dateObj.getMonth():e.currentMonth,Xi=Mt>0?e.config.showMonths:-1,Mn=Mt>0?1:-1,Wn=mi-e.currentMonth;Wn!=Xi;Wn+=Mn)for(var es=e.daysContainer.children[Wn],us=es.children.length,nr=mi-e.currentMonth===Wn?_t.$i+Mt:Mt<0?es.children.length-1:0;nr>=0&&nr<us&&nr!=(Mt>0?us:-1);nr+=Mn){var Vr=es.children[nr];if(-1===Vr.className.indexOf("hidden")&&Sf(Vr.dateObj)&&Math.abs(_t.$i-nr)>=Math.abs(Mt))return Bs(Vr)}e.changeMonth(Mn),pd(Qr(Mn),0)}(Mn,Mt):Bs(Mn)}function wb(_t,Mt){for(var mi=(new Date(_t,Mt,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Xi=e.utils.getDaysInMonth((Mt-1+12)%12,_t),Mn=e.utils.getDaysInMonth(Mt,_t),Wn=window.document.createDocumentFragment(),es=e.config.showMonths>1,ur=es?"prevMonthDay hidden":"prevMonthDay",us=es?"nextMonthDay hidden":"nextMonthDay",nr=Xi+1-mi,Vr=0;nr<=Xi;nr++,Vr++)Wn.appendChild(is("flatpickr-day "+ur,new Date(_t,Mt-1,nr),0,Vr));for(nr=1;nr<=Mn;nr++,Vr++)Wn.appendChild(is("flatpickr-day",new Date(_t,Mt,nr),0,Vr));for(var so=Mn+1;so<=42-mi&&(1===e.config.showMonths||Vr%7!=0);so++,Vr++)Wn.appendChild(is("flatpickr-day "+us,new Date(_t,Mt+1,so%Mn),0,Vr));var Xd=Fs("div","dayContainer");return Xd.appendChild(Wn),Xd}function eg(){if(void 0!==e.daysContainer){my(e.daysContainer),e.weekNumbers&&my(e.weekNumbers);for(var _t=document.createDocumentFragment(),Mt=0;Mt<e.config.showMonths;Mt++){var mi=new Date(e.currentYear,e.currentMonth,1);mi.setMonth(e.currentMonth+Mt),_t.appendChild(wb(mi.getFullYear(),mi.getMonth()))}e.daysContainer.appendChild(_t),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&by()}}function tg(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Mt=0;Mt<12;Mt++)if(Xi=Mt,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&Xi<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&Xi>e.config.maxDate.getMonth())){var mi=Fs("option","flatpickr-monthDropdown-month");mi.value=new Date(e.currentYear,Mt).getMonth().toString(),mi.textContent=vy(Mt,e.config.shorthandCurrentMonth,e.l10n),mi.tabIndex=-1,e.currentMonth===Mt&&(mi.selected=!0),e.monthsDropdownContainer.appendChild(mi)}}var Xi}function PL(){var mi,_t=Fs("div","flatpickr-month"),Mt=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?mi=Fs("span","cur-month"):(e.monthsDropdownContainer=Fs("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),Ut(e.monthsDropdownContainer,"change",function(es){var ur=pu(es),us=parseInt(ur.value,10);e.changeMonth(us-e.currentMonth),Go("onMonthChange")}),tg(),mi=e.monthsDropdownContainer);var Xi=gy("cur-year",{tabindex:"-1"}),Mn=Xi.getElementsByTagName("input")[0];Mn.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&Mn.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(Mn.setAttribute("max",e.config.maxDate.getFullYear().toString()),Mn.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var Wn=Fs("div","flatpickr-current-month");return Wn.appendChild(mi),Wn.appendChild(Xi),Mt.appendChild(Wn),_t.appendChild(Mt),{container:_t,yearElement:Mn,monthElement:mi}}function kw(){my(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var _t=e.config.showMonths;_t--;){var Mt=PL();e.yearElements.push(Mt.yearElement),e.monthElements.push(Mt.monthElement),e.monthNav.appendChild(Mt.container)}e.monthNav.appendChild(e.nextMonthNav)}function Aw(){e.weekdayContainer?my(e.weekdayContainer):e.weekdayContainer=Fs("div","flatpickr-weekdays");for(var _t=e.config.showMonths;_t--;){var Mt=Fs("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Mt)}return Mw(),e.weekdayContainer}function Mw(){if(e.weekdayContainer){var _t=e.l10n.firstDayOfWeek,Mt=Sw(e.l10n.weekdays.shorthand);_t>0&&_t<Mt.length&&(Mt=Sw(Mt.splice(_t,Mt.length),Mt.splice(0,_t)));for(var mi=e.config.showMonths;mi--;)e.weekdayContainer.children[mi].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+Mt.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function Cb(_t,Mt){void 0===Mt&&(Mt=!0);var mi=Mt?_t:_t-e.currentMonth;mi<0&&!0===e._hidePrevMonthArrow||mi>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=mi,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Go("onYearChange"),tg()),eg(),Go("onMonthChange"),Cy())}function kv(_t){return e.calendarContainer.contains(_t)}function Eb(_t){if(e.isOpen&&!e.config.inline){var Mt=pu(_t),mi=kv(Mt),Mn=!(Mt===e.input||Mt===e.altInput||e.element.contains(Mt)||_t.path&&_t.path.indexOf&&(~_t.path.indexOf(e.input)||~_t.path.indexOf(e.altInput))||mi||kv(_t.relatedTarget)),Wn=!e.config.ignoredFocusElements.some(function(es){return es.contains(Mt)});Mn&&Wn&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&W(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function _y(_t){if(!(!_t||e.config.minDate&&_t<e.config.minDate.getFullYear()||e.config.maxDate&&_t>e.config.maxDate.getFullYear())){var mi=e.currentYear!==_t;e.currentYear=_t||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),mi&&(e.redraw(),Go("onYearChange"),tg())}}function Sf(_t,Mt){var mi;void 0===Mt&&(Mt=!0);var Xi=e.parseDate(_t,void 0,Mt);if(e.config.minDate&&Xi&&fu(Xi,e.config.minDate,void 0!==Mt?Mt:!e.minDateHasTime)<0||e.config.maxDate&&Xi&&fu(Xi,e.config.maxDate,void 0!==Mt?Mt:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===Xi)return!1;for(var Mn=!!e.config.enable,Wn=null!==(mi=e.config.enable)&&void 0!==mi?mi:e.config.disable,es=0,ur=void 0;es<Wn.length;es++){if("function"==typeof(ur=Wn[es])&&ur(Xi))return Mn;if(ur instanceof Date&&void 0!==Xi&&ur.getTime()===Xi.getTime())return Mn;if("string"==typeof ur){var us=e.parseDate(ur,void 0,!0);return us&&us.getTime()===Xi.getTime()?Mn:!Mn}if("object"==typeof ur&&void 0!==Xi&&ur.from&&ur.to&&Xi.getTime()>=ur.from.getTime()&&Xi.getTime()<=ur.to.getTime())return Mn}return!Mn}function yy(_t){return void 0!==e.daysContainer&&-1===_t.className.indexOf("hidden")&&-1===_t.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(_t)}function HL(_t){var Mt=_t.target===e._input,mi=e._input.value.trimEnd()!==Ab();Mt&&mi&&(!_t.relatedTarget||!kv(_t.relatedTarget))&&e.setDate(e._input.value,!0,_t.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Dw(_t){var Mt=pu(_t),mi=e.config.wrap?r.contains(Mt):Mt===e._input,Xi=e.config.allowInput,Mn=e.isOpen&&(!Xi||!mi),Wn=e.config.inline&&mi&&!Xi;if(13===_t.keyCode&&mi){if(Xi)return e.setDate(e._input.value,!0,Mt===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Mt.blur();e.open()}else if(kv(Mt)||Mn||Wn){var es=!!e.timeContainer&&e.timeContainer.contains(Mt);switch(_t.keyCode){case 13:es?(_t.preventDefault(),W(),Sb()):Rw(_t);break;case 27:_t.preventDefault(),Sb();break;case 8:case 46:mi&&!e.config.allowInput&&(_t.preventDefault(),e.clear());break;case 37:case 39:if(es||mi)e.hourElement&&e.hourElement.focus();else{_t.preventDefault();var ur=f();if(void 0!==e.daysContainer&&(!1===Xi||ur&&yy(ur))){var us=39===_t.keyCode?1:-1;_t.ctrlKey?(_t.stopPropagation(),Cb(us),pd(Qr(1),0)):pd(void 0,us)}}break;case 38:case 40:_t.preventDefault();var nr=40===_t.keyCode?1:-1;e.daysContainer&&void 0!==Mt.$i||Mt===e.input||Mt===e.altInput?_t.ctrlKey?(_t.stopPropagation(),_y(e.currentYear-nr),pd(Qr(1),0)):es||pd(void 0,7*nr):Mt===e.currentYearElement?_y(e.currentYear-nr):e.config.enableTime&&(!es&&e.hourElement&&e.hourElement.focus(),W(_t),e._debouncedChange());break;case 9:if(es){var Vr=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(mu){return mu}),so=Vr.indexOf(Mt);if(-1!==so){var Xd=Vr[so+(_t.shiftKey?-1:1)];_t.preventDefault(),(Xd||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Mt)&&_t.shiftKey&&(_t.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&Mt===e.amPM)switch(_t.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],Ne(),kh();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],Ne(),kh()}(mi||kv(Mt))&&Go("onKeyDown",_t)}function by(_t,Mt){if(void 0===Mt&&(Mt="flatpickr-day"),1===e.selectedDates.length&&(!_t||_t.classList.contains(Mt)&&!_t.classList.contains("flatpickr-disabled"))){for(var mi=_t?_t.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Xi=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),Mn=Math.min(mi,e.selectedDates[0].getTime()),Wn=Math.max(mi,e.selectedDates[0].getTime()),es=!1,ur=0,us=0,nr=Mn;nr<Wn;nr+=SL.DAY)Sf(new Date(nr),!0)||(es=es||nr>Mn&&nr<Wn,nr<Xi&&(!ur||nr>ur)?ur=nr:nr>Xi&&(!us||nr<us)&&(us=nr));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Mt)).forEach(function(so){var mu=so.dateObj.getTime(),Av=ur>0&&mu<ur||us>0&&mu>us;if(Av)return so.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(ig){so.classList.remove(ig)});es&&!Av||(["startRange","inRange","endRange","notAllowed"].forEach(function(ig){so.classList.remove(ig)}),void 0!==_t&&(_t.classList.add(mi<=e.selectedDates[0].getTime()?"startRange":"endRange"),Xi<mi&&mu===Xi?so.classList.add("startRange"):Xi>mi&&mu===Xi&&so.classList.add("endRange"),mu>=ur&&(0===us||mu<=us)&&CL(mu,Xi,mi)&&so.classList.add("inRange")))})}}function VL(){e.isOpen&&!e.config.static&&!e.config.inline&&xy()}function Iw(_t){return function(Mt){var mi=e.config["_"+_t+"Date"]=e.parseDate(Mt,e.config.dateFormat),Xi=e.config["_"+("min"===_t?"max":"min")+"Date"];void 0!==mi&&(e["min"===_t?"minDateHasTime":"maxDateHasTime"]=mi.getHours()>0||mi.getMinutes()>0||mi.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(Mn){return Sf(Mn)}),!e.selectedDates.length&&"min"===_t&&Ye(mi),kh()),e.daysContainer&&(Pw(),void 0!==mi?e.currentYearElement[_t]=mi.getFullYear().toString():e.currentYearElement.removeAttribute(_t),e.currentYearElement.disabled=!!Xi&&void 0!==mi&&Xi.getFullYear()===mi.getFullYear())}}function Lw(){return e.config.wrap?r.querySelector("[data-input]"):r}function Ow(){"object"!=typeof e.config.locale&&typeof Ia.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=ic(ic({},Ia.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?Ia.l10ns[e.config.locale]:void 0),Ef.D="("+e.l10n.weekdays.shorthand.join("|")+")",Ef.l="("+e.l10n.weekdays.longhand.join("|")+")",Ef.M="("+e.l10n.months.shorthand.join("|")+")",Ef.F="("+e.l10n.months.longhand.join("|")+")",Ef.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===ic(ic({},t),JSON.parse(JSON.stringify(r.dataset||{}))).time_24hr&&void 0===Ia.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Ew(e),e.parseDate=_b({config:e.config,l10n:e.l10n})}function xy(_t){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){Go("onPreCalendarPosition");var Mt=_t||e._positionElement,mi=Array.prototype.reduce.call(e.calendarContainer.children,function(cO,uO){return cO+uO.offsetHeight},0),Xi=e.calendarContainer.offsetWidth,Mn=e.config.position.split(" "),Wn=Mn[0],es=Mn.length>1?Mn[1]:null,ur=Mt.getBoundingClientRect(),us=window.innerHeight-ur.bottom,nr="above"===Wn||"below"!==Wn&&us<mi&&ur.top>mi,Vr=window.pageYOffset+ur.top+(nr?-mi-2:Mt.offsetHeight+2);if(Ec(e.calendarContainer,"arrowTop",!nr),Ec(e.calendarContainer,"arrowBottom",nr),!e.config.inline){var so=window.pageXOffset+ur.left,Xd=!1,mu=!1;"center"===es?(so-=(Xi-ur.width)/2,Xd=!0):"right"===es&&(so-=Xi-ur.width,mu=!0),Ec(e.calendarContainer,"arrowLeft",!Xd&&!mu),Ec(e.calendarContainer,"arrowCenter",Xd),Ec(e.calendarContainer,"arrowRight",mu);var Av=window.document.body.offsetWidth-(window.pageXOffset+ur.right),ig=so+Xi>window.document.body.offsetWidth,iO=Av+Xi>window.document.body.offsetWidth;if(Ec(e.calendarContainer,"rightMost",ig),!e.config.static)if(e.calendarContainer.style.top=Vr+"px",ig)if(iO){var Mb=function UL(){for(var _t=null,Mt=0;Mt<document.styleSheets.length;Mt++){var mi=document.styleSheets[Mt];if(mi.cssRules){_t=mi;break}}return _t??function WL(){var _t=document.createElement("style");return document.head.appendChild(_t),_t.sheet}()}();if(void 0===Mb)return;var nO=window.document.body.offsetWidth,rO=Math.max(0,nO/2-Xi/2),aO=Mb.cssRules.length,lO="{left:"+ur.left+"px;right:auto;}";Ec(e.calendarContainer,"rightMost",!1),Ec(e.calendarContainer,"centerMost",!0),Mb.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+lO,aO),e.calendarContainer.style.left=rO+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Av+"px";else e.calendarContainer.style.left=so+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,_t)}function Pw(){e.config.noCalendar||e.isMobile||(tg(),Cy(),eg())}function Sb(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function Rw(_t){_t.preventDefault(),_t.stopPropagation();var mi=Cw(pu(_t),function(Vr){return Vr.classList&&Vr.classList.contains("flatpickr-day")&&!Vr.classList.contains("flatpickr-disabled")&&!Vr.classList.contains("notAllowed")});if(void 0!==mi){var Xi=mi,Mn=e.latestSelectedDateObj=new Date(Xi.dateObj.getTime()),Wn=(Mn.getMonth()<e.currentMonth||Mn.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=Xi,"single"===e.config.mode)e.selectedDates=[Mn];else if("multiple"===e.config.mode){var es=kb(Mn);es?e.selectedDates.splice(parseInt(es),1):e.selectedDates.push(Mn)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=Mn,e.selectedDates.push(Mn),0!==fu(Mn,e.selectedDates[0],!0)&&e.selectedDates.sort(function(Vr,so){return Vr.getTime()-so.getTime()}));if(Ne(),Wn){var ur=e.currentYear!==Mn.getFullYear();e.currentYear=Mn.getFullYear(),e.currentMonth=Mn.getMonth(),ur&&(Go("onYearChange"),tg()),Go("onMonthChange")}Cy(),eg(),kh(),Wn||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():Bs(Xi),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&Sb(),li()}}e.parseDate=_b({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=Ut,e._setHoursFromDate=Ye,e._positionCalendar=xy,e.changeMonth=Cb,e.changeYear=_y,e.clear=function BL(_t,Mt){if(void 0===_t&&(_t=!0),void 0===Mt&&(Mt=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===Mt&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var mi=bb(e.config);Ve(mi.hours,mi.minutes,mi.seconds)}e.redraw(),_t&&Go("onChange")},e.close=function NL(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),Go("onClose")},e.onMouseOver=by,e._createElement=Fs,e.createDay=is,e.destroy=function YL(){void 0!==e.config&&Go("onDestroy");for(var _t=e._handlers.length;_t--;)e._handlers[_t].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Mt=e.calendarContainer.parentNode;if(Mt.lastChild&&Mt.removeChild(Mt.lastChild),Mt.parentNode){for(;Mt.firstChild;)Mt.parentNode.insertBefore(Mt.firstChild,Mt);Mt.parentNode.removeChild(Mt)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(mi){try{delete e[mi]}catch{}})},e.isEnabled=Sf,e.jumpToDate=Sn,e.updateValue=kh,e.open=function GL(_t,Mt){if(void 0===Mt&&(Mt=e._positionElement),!0===e.isMobile){if(_t){_t.preventDefault();var mi=pu(_t);mi&&mi.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void Go("onOpen")}if(!e._input.disabled&&!e.config.inline){var Xi=e.isOpen;e.isOpen=!0,Xi||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Go("onOpen"),xy(Mt)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===_t||!e.timeContainer.contains(_t.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=Pw,e.set=function $L(_t,Mt){if(null!==_t&&"object"==typeof _t)for(var mi in Object.assign(e.config,_t),_t)void 0!==wy[mi]&&wy[mi].forEach(function(Xi){return Xi()});else e.config[_t]=Mt,void 0!==wy[_t]?wy[_t].forEach(function(Xi){return Xi()}):pb.indexOf(_t)>-1&&(e.config[_t]=gb(Mt));e.redraw(),kh(!0)},e.setDate=function XL(_t,Mt,mi){if(void 0===Mt&&(Mt=!1),void 0===mi&&(mi=e.config.dateFormat),0!==_t&&!_t||_t instanceof Array&&0===_t.length)return e.clear(Mt);zw(_t,mi),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),Sn(void 0,Mt),Ye(),0===e.selectedDates.length&&e.clear(!1),kh(Mt),Mt&&Go("onChange")},e.toggle=function JL(_t){if(!0===e.isOpen)return e.close();e.open(_t)};var wy={locale:[Ow,Mw],showMonths:[kw,z,Aw],minDate:[Sn],maxDate:[Sn],positionElement:[Bw],clickOpens:[function(){!0===e.config.clickOpens?(Ut(e._input,"focus",e.open),Ut(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function zw(_t,Mt){var mi=[];if(_t instanceof Array)mi=_t.map(function(Xi){return e.parseDate(Xi,Mt)});else if(_t instanceof Date||"number"==typeof _t)mi=[e.parseDate(_t,Mt)];else if("string"==typeof _t)switch(e.config.mode){case"single":case"time":mi=[e.parseDate(_t,Mt)];break;case"multiple":mi=_t.split(e.config.conjunction).map(function(Xi){return e.parseDate(Xi,Mt)});break;case"range":mi=_t.split(e.l10n.rangeSeparator).map(function(Xi){return e.parseDate(Xi,Mt)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(_t)));e.selectedDates=e.config.allowInvalidPreload?mi:mi.filter(function(Xi){return Xi instanceof Date&&Sf(Xi,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(Xi,Mn){return Xi.getTime()-Mn.getTime()})}function Fw(_t){return _t.slice().map(function(Mt){return"string"==typeof Mt||"number"==typeof Mt||Mt instanceof Date?e.parseDate(Mt,void 0,!0):Mt&&"object"==typeof Mt&&Mt.from&&Mt.to?{from:e.parseDate(Mt.from,void 0),to:e.parseDate(Mt.to,void 0)}:Mt}).filter(function(Mt){return Mt})}function Bw(){e._positionElement=e.config.positionElement||e._input}function Go(_t,Mt){if(void 0!==e.config){var mi=e.config[_t];if(void 0!==mi&&mi.length>0)for(var Xi=0;mi[Xi]&&Xi<mi.length;Xi++)mi[Xi](e.selectedDates,e.input.value,e,Mt);"onChange"===_t&&(e.input.dispatchEvent(Tb("change")),e.input.dispatchEvent(Tb("input")))}}function Tb(_t){var Mt=document.createEvent("Event");return Mt.initEvent(_t,!0,!0),Mt}function kb(_t){for(var Mt=0;Mt<e.selectedDates.length;Mt++){var mi=e.selectedDates[Mt];if(mi instanceof Date&&0===fu(mi,_t))return""+Mt}return!1}function Cy(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(_t,Mt){var mi=new Date(e.currentYear,e.currentMonth,1);mi.setMonth(e.currentMonth+Mt),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[Mt].textContent=vy(mi.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=mi.getMonth().toString(),_t.value=mi.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Ab(_t){var Mt=_t||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(mi){return e.formatDate(mi,Mt)}).filter(function(mi,Xi,Mn){return"range"!==e.config.mode||e.config.enableTime||Mn.indexOf(mi)===Xi}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function kh(_t){void 0===_t&&(_t=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Ab(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=Ab(e.config.altFormat)),!1!==_t&&Go("onValueUpdate")}function eO(_t){var Mt=pu(_t),mi=e.prevMonthNav.contains(Mt),Xi=e.nextMonthNav.contains(Mt);mi||Xi?Cb(mi?-1:1):e.yearElements.indexOf(Mt)>=0?Mt.select():Mt.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Mt.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function l(){e.element=e.input=r,e.isOpen=!1,function jL(){var _t=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Mt=ic(ic({},JSON.parse(JSON.stringify(r.dataset||{}))),t),mi={};e.config.parseDate=Mt.parseDate,e.config.formatDate=Mt.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(Vr){e.config._enable=Fw(Vr)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(Vr){e.config._disable=Fw(Vr)}});var Xi="time"===Mt.mode;Mt.dateFormat||!Mt.enableTime&&!Xi||(mi.dateFormat=Mt.noCalendar||Xi?"H:i"+(Mt.enableSeconds?":S":""):(Ia.defaultConfig.dateFormat||Jm.dateFormat)+" H:i"+(Mt.enableSeconds?":S":"")),Mt.altInput&&(Mt.enableTime||Xi)&&!Mt.altFormat&&(mi.altFormat=Mt.noCalendar||Xi?"h:i"+(Mt.enableSeconds?":S K":" K"):(Ia.defaultConfig.altFormat||Jm.altFormat)+" h:i"+(Mt.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Iw("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Iw("max")});var es=function(Vr){return function(so){e.config["min"===Vr?"_minTime":"_maxTime"]=e.parseDate(so,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:es("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:es("max")}),"time"===Mt.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,mi,Mt);for(var ur=0;ur<_t.length;ur++)e.config[_t[ur]]=!0===e.config[_t[ur]]||"true"===e.config[_t[ur]];for(pb.filter(function(Vr){return void 0!==e.config[Vr]}).forEach(function(Vr){e.config[Vr]=gb(e.config[Vr]||[]).map(C)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ur=0;ur<e.config.plugins.length;ur++){var us=e.config.plugins[ur](e)||{};for(var nr in us)pb.indexOf(nr)>-1?e.config[nr]=gb(us[nr]).map(C).concat(e.config[nr]):typeof Mt[nr]>"u"&&(e.config[nr]=us[nr])}Mt.altInputClass||(e.config.altInputClass=Lw().className+" "+e.config.altInputClass),Go("onParseConfig")}(),Ow(),function qL(){e.input=Lw(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Fs(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Bw()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function ZL(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var _t=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);_t&&zw(_t,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function s(){e.utils={getDaysInMonth:function(_t,Mt){return void 0===_t&&(_t=e.currentMonth),void 0===Mt&&(Mt=e.currentYear),1===_t&&(Mt%4==0&&Mt%100!=0||Mt%400==0)?29:e.l10n.daysInMonth[_t]}}}(),e.isMobile||function ro(){var _t=window.document.createDocumentFragment();if(e.calendarContainer=Fs("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(_t.appendChild(function RL(){return e.monthNav=Fs("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Fs("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Fs("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,kw(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(_t){e.__hidePrevMonthArrow!==_t&&(Ec(e.prevMonthNav,"flatpickr-disabled",_t),e.__hidePrevMonthArrow=_t)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(_t){e.__hideNextMonthArrow!==_t&&(Ec(e.nextMonthNav,"flatpickr-disabled",_t),e.__hideNextMonthArrow=_t)}}),e.currentYearElement=e.yearElements[0],Cy(),e.monthNav}()),e.innerContainer=Fs("div","flatpickr-innerContainer"),e.config.weekNumbers){var Mt=function FL(){e.calendarContainer.classList.add("hasWeeks");var _t=Fs("div","flatpickr-weekwrapper");_t.appendChild(Fs("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Mt=Fs("div","flatpickr-weeks");return _t.appendChild(Mt),{weekWrapper:_t,weekNumbers:Mt}}(),mi=Mt.weekWrapper,Xi=Mt.weekNumbers;e.innerContainer.appendChild(mi),e.weekNumbers=Xi,e.weekWrapper=mi}e.rContainer=Fs("div","flatpickr-rContainer"),e.rContainer.appendChild(Aw()),e.daysContainer||(e.daysContainer=Fs("div","flatpickr-days"),e.daysContainer.tabIndex=-1),eg(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),_t.appendChild(e.innerContainer)}e.config.enableTime&&_t.appendChild(function zL(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var _t=bb(e.config);e.timeContainer=Fs("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Mt=Fs("span","flatpickr-time-separator",":"),mi=gy("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=mi.getElementsByTagName("input")[0];var Xi=gy("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Xi.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Nc(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?_t.hours:function oe(_t){switch(_t%24){case 0:case 12:return 12;default:return _t%12}}(_t.hours)),e.minuteElement.value=Nc(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():_t.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(mi),e.timeContainer.appendChild(Mt),e.timeContainer.appendChild(Xi),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var Mn=gy("flatpickr-second");e.secondElement=Mn.getElementsByTagName("input")[0],e.secondElement.value=Nc(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():_t.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Fs("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(Mn)}return e.config.time_24hr||(e.amPM=Fs("span","flatpickr-am-pm",e.l10n.amPM[Vu((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),Ec(e.calendarContainer,"rangeMode","range"===e.config.mode),Ec(e.calendarContainer,"animate",!0===e.config.animate),Ec(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(_t);var Mn=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!Mn&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var Wn=Fs("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(Wn,e.element),Wn.appendChild(e.element),e.altInput&&Wn.appendChild(e.altInput),Wn.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function Di(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(mi){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+mi+"]"),function(Xi){return Ut(Xi,"click",e[mi])})}),e.isMobile)!function KL(){var _t=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Fs("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=_t,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===_t?"Y-m-d\\TH:i:S":"date"===_t?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}Ut(e.mobileInput,"change",function(Mt){e.setDate(pu(Mt).value,!1,e.mobileFormatStr),Go("onChange"),Go("onClose")})}();else{var _t=ww(VL,50);if(e._debouncedChange=ww(li,TL),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&Ut(e.daysContainer,"mouseover",function(mi){"range"===e.config.mode&&by(pu(mi))}),Ut(e._input,"keydown",Dw),void 0!==e.calendarContainer&&Ut(e.calendarContainer,"keydown",Dw),!e.config.inline&&!e.config.static&&Ut(window,"resize",_t),void 0!==window.ontouchstart?Ut(window.document,"touchstart",Eb):Ut(window.document,"mousedown",Eb),Ut(window.document,"focus",Eb,{capture:!0}),!0===e.config.clickOpens&&(Ut(e._input,"focus",e.open),Ut(e._input,"click",e.open)),void 0!==e.daysContainer&&(Ut(e.monthNav,"click",eO),Ut(e.monthNav,["keyup","increment"],$t),Ut(e.daysContainer,"click",Rw)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){Ut(e.timeContainer,["increment"],W),Ut(e.timeContainer,"blur",W,{capture:!0}),Ut(e.timeContainer,"click",hr),Ut([e.hourElement,e.minuteElement],["focus","click"],function(mi){return pu(mi).select()}),void 0!==e.secondElement&&Ut(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&Ut(e.amPM,"click",function(mi){W(mi)})}e.config.allowInput&&Ut(e._input,"blur",HL)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&Ye(e.config.noCalendar?e.latestSelectedDateObj:void 0),kh(!1)),z();var _t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&_t&&xy(),Go("onReady")}(),e}function Qm(r,t){for(var e=Array.prototype.slice.call(r).filter(function(C){return C instanceof HTMLElement}),s=[],l=0;l<e.length;l++){var f=e[l];try{if(null!==f.getAttribute("data-fp-omit"))continue;void 0!==f._flatpickr&&(f._flatpickr.destroy(),f._flatpickr=void 0),f._flatpickr=kL(f,t||{}),s.push(f._flatpickr)}catch(C){console.error(C)}}return 1===s.length?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return Qm(this,r)},HTMLElement.prototype.flatpickr=function(r){return Qm([this],r)});var Ia=function(r,t){return"string"==typeof r?Qm(window.document.querySelectorAll(r),t):r instanceof Node?Qm([r],t):Qm(r,t)};Ia.defaultConfig={},Ia.l10ns={en:ic({},mb),default:ic({},mb)},Ia.localize=function(r){Ia.l10ns.default=ic(ic({},Ia.l10ns.default),r)},Ia.setDefaults=function(r){Ia.defaultConfig=ic(ic({},Ia.defaultConfig),r)},Ia.parseDate=_b({}),Ia.formatDate=Ew({}),Ia.compareDates=fu,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return Qm(this,r)}),Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof r?parseInt(r,10):r))},typeof window<"u"&&(window.flatpickr=Ia);const AL=Ia;let xb=(()=>{class r{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=i.wxM({token:r,factory:r.\u0275fac}),r})();const ML={provide:V.Y6,useExisting:(0,i.wd)(()=>DL),multi:!0};let DL=(()=>{class r{constructor(e,s,l){this.elm=e,this.defaults=s,this.renderer=l,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new i._w7,this.flatpickrChange=new i._w7,this.flatpickrValueUpdate=new i._w7,this.flatpickrOpen=new i._w7,this.flatpickrClose=new i._w7,this.flatpickrMonthChange=new i._w7,this.flatpickrYearChange=new i._w7,this.flatpickrDayCreate=new i._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(s,l,f)=>{this.flatpickrChange.emit({selectedDates:s,dateString:l,instance:f})},onOpen:(s,l,f)=>{this.flatpickrOpen.emit({selectedDates:s,dateString:l,instance:f})},onClose:(s,l,f)=>{this.flatpickrClose.emit({selectedDates:s,dateString:l,instance:f})},onMonthChange:(s,l,f)=>{this.flatpickrMonthChange.emit({selectedDates:s,dateString:l,instance:f})},onYearChange:(s,l,f)=>{this.flatpickrYearChange.emit({selectedDates:s,dateString:l,instance:f})},onReady:(s,l,f)=>{this.flatpickrReady.emit({selectedDates:s,dateString:l,instance:f})},onValueUpdate:(s,l,f)=>{this.flatpickrValueUpdate.emit({selectedDates:s,dateString:l,instance:f})},onDayCreate:(s,l,f,C)=>{this.flatpickrDayCreate.emit({selectedDates:s,dateString:l,instance:f,dayElement:C})}};Object.keys(e).forEach(s=>{typeof e[s]>"u"&&(e[s]=typeof this.options[s]<"u"?this.options[s]:this.defaults[s])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=AL(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(s=>{this.instance.set(s,this[s])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let s=e;this.convertModelValue&&"range"===this.mode&&e&&(s=[e.from,e.to]),this.instance?this.instance.setDate(s):this.initialValue=s}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const s=e.split("; ").map(C=>this.instance.parseDate(C,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(s);break;case"range":const[l,f]=e.split(this.instance.l10n.rangeSeparator).map(C=>this.instance.parseDate(C,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:l,to:f});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return r.\u0275fac=function(e){return new(e||r)(i.GI1(i.GMv),i.GI1(xb),i.GI1(i.q87))},r.\u0275dir=i.Sc5({type:r,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,s){1&e&&i.qCj("blur",function(){return s.onTouchedFn()})("input",function(){return s.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[i.M5G([ML]),i.SYr]}),r})();const Tw=new i.UbH("flatpickr defaults");function IL(r){const t=new xb;return Object.assign(t,r),t}let LL=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[{provide:Tw,useValue:e},{provide:xb,useFactory:IL,deps:[Tw]}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=i.a4G({type:r}),r.\u0275inj=i.s3X({}),r})(),OL=(()=>{class r{static#e=this.\u0275fac=function(s){return new(s||r)};static#t=this.\u0275mod=i.a4G({type:r});static#i=this.\u0275inj=i.s3X({imports:[Ue.MD,TT.k,Uw,en.Uf.forRoot(),V.y,V.sl,nt.rO.forRoot(),_n.f8.forRoot(),uL.C.forRoot(),fk,AT.S,vr.as.forRoot(),UI,va,hL.forRoot(),as.gb,pk,HI,dT,cL,I.SO.forRoot(),pL.iU.forRoot(),WI,xL.forRoot(),kT,LL.forRoot(),Gw]})}return r})()},968:(fo,Gr,Rt)=>{"use strict";Rt.r(Gr),Rt.d(Gr,{PagesModule:()=>De});var k=Rt(1368),hn=Rt(2308),ze=Rt(4496);const i=[{path:"",loadChildren:()=>Promise.resolve().then(Rt.bind(Rt,4364)).then(Fe=>Fe.CustomPagesModule)},{path:"pages",loadChildren:()=>Rt.e(228).then(Rt.bind(Rt,4848)).then(Fe=>Fe.ExtrapagesModule)}];let V=(()=>{class Fe{static#e=this.\u0275fac=function(nt){return new(nt||Fe)};static#t=this.\u0275mod=ze.a4G({type:Fe});static#i=this.\u0275inj=ze.s3X({imports:[hn.qQ.forChild(i),hn.qQ]})}return Fe})();var Oe=Rt(9280),Ae=Rt(4364);let De=(()=>{class Fe{static#e=this.\u0275fac=function(nt){return new(nt||Fe)};static#t=this.\u0275mod=ze.a4G({type:Fe});static#i=this.\u0275inj=ze.s3X({imports:[k.MD,V,Oe.k,Ae.CustomPagesModule]})}return Fe})()},6708:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{O:()=>ze});var k=Rt(4496);function hn(i,V){if(1&i&&(k.I0R(0,"li",6),k.OEk(1),k.C$Y()),2&i){const Oe=V.$implicit;k.yG2(),k.cNF(Oe.label)}}let ze=(()=>{class i{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(Ae){return new(Ae||i)};static#t=this.\u0275cmp=k.In1({type:i,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(Ae,De){1&Ae&&(k.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),k.OEk(4),k.C$Y(),k.I0R(5,"div",4)(6,"ol",5),k.c53(7,hn,2,1,"li",7,k.wJt),k.C$Y()()()()()),2&Ae&&(k.yG2(4),k.cNF(De.title),k.yG2(3),k.oho(De.breadcrumbItems))}})}return i})()},9280:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{k:()=>ze});var k=Rt(1368),hn=Rt(4496);let ze=(()=>{class i{static#e=this.\u0275fac=function(Ae){return new(Ae||i)};static#t=this.\u0275mod=hn.a4G({type:i});static#i=this.\u0275inj=hn.s3X({imports:[k.MD]})}return i})()},2164:(fo,Gr,Rt)=>{"use strict";var k;function hn(le,o){var c=Object.keys(le);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(le);o&&(h=h.filter(function(_){return Object.getOwnPropertyDescriptor(le,_).enumerable})),c.push.apply(c,h)}return c}function ze(le){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?hn(Object(c),!0).forEach(function(h){De(le,h,c[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(le,Object.getOwnPropertyDescriptors(c)):hn(Object(c)).forEach(function(h){Object.defineProperty(le,h,Object.getOwnPropertyDescriptor(c,h))})}return le}function i(le){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(le)}function V(le,o){if(!(le instanceof o))throw new TypeError("Cannot call a class as a function")}function Oe(le,o){for(var c=0;c<o.length;c++){var h=o[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(le,h.key,h)}}function Ae(le,o,c){return o&&Oe(le.prototype,o),c&&Oe(le,c),le}function De(le,o,c){return o in le?Object.defineProperty(le,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):le[o]=c,le}function Fe(le,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(o&&o.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),o&&Je(le,o)}function Ue(le){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(le)}function Je(le,o){return(Je=Object.setPrototypeOf||function(c,h){return c.__proto__=h,c})(le,o)}function nt(le){if(void 0===le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function mt(le){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var c,h=Ue(le);if(o){var _=Ue(this).constructor;c=Reflect.construct(h,arguments,_)}else c=h.apply(this,arguments);return function(b,x){if(x&&("object"==typeof x||"function"==typeof x))return x;if(void 0!==x)throw new TypeError("Derived constructors may only return object or undefined");return nt(b)}(this,c)}}function Pt(le,o){return function(c){if(Array.isArray(c))return c}(le)||function(c,h){var _=null==c?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(null!=_){var b,x,A=[],I=!0,F=!1;try{for(_=_.call(c);!(I=(b=_.next()).done)&&(A.push(b.value),!h||A.length!==h);I=!0);}catch(U){F=!0,x=U}finally{try{I||null==_.return||_.return()}finally{if(F)throw x}}return A}}(le,o)||gt(le,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(le){return function(o){if(Array.isArray(o))return wt(o)}(le)||function(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(le)||gt(le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(le,o){if(le){if("string"==typeof le)return wt(le,o);var c=Object.prototype.toString.call(le).slice(8,-1);return"Object"===c&&le.constructor&&(c=le.constructor.name),"Map"===c||"Set"===c?Array.from(le):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?wt(le,o):void 0}}function wt(le,o){(null==o||o>le.length)&&(o=le.length);for(var c=0,h=new Array(o);c<o;c++)h[c]=le[c];return h}function si(le,o){var c=typeof Symbol<"u"&&le[Symbol.iterator]||le["@@iterator"];if(!c){if(Array.isArray(le)||(c=gt(le))||o&&le&&"number"==typeof le.length){c&&(le=c);var h=0,_=function(){};return{s:_,n:function(){return h>=le.length?{done:!0}:{done:!1,value:le[h++]}},e:function(I){throw I},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b,x=!0,A=!1;return{s:function(){c=c.call(le)},n:function(){var I=c.next();return x=I.done,I},e:function(I){A=!0,b=I},f:function(){try{x||null==c.return||c.return()}finally{if(A)throw b}}}}var $e=function(){function le(){V(this,le)}return Ae(le,[{key:"shadeRGBColor",value:function(o,c){var h=c.split(","),_=o<0?0:255,b=o<0?-1*o:o,x=parseInt(h[0].slice(4),10),A=parseInt(h[1],10),I=parseInt(h[2],10);return"rgb("+(Math.round((_-x)*b)+x)+","+(Math.round((_-A)*b)+A)+","+(Math.round((_-I)*b)+I)+")"}},{key:"shadeHexColor",value:function(o,c){var h=parseInt(c.slice(1),16),_=o<0?0:255,b=o<0?-1*o:o,x=h>>16,A=h>>8&255,I=255&h;return"#"+(16777216+65536*(Math.round((_-x)*b)+x)+256*(Math.round((_-A)*b)+A)+(Math.round((_-I)*b)+I)).toString(16).slice(1)}},{key:"shadeColor",value:function(o,c){return le.isColorHex(c)?this.shadeHexColor(o,c):this.shadeRGBColor(o,c)}}],[{key:"bind",value:function(o,c){return function(){return o.apply(c,arguments)}}},{key:"isObject",value:function(o){return o&&"object"===i(o)&&!Array.isArray(o)&&null!=o}},{key:"is",value:function(o,c){return Object.prototype.toString.call(c)==="[object "+o+"]"}},{key:"listToArray",value:function(o){var c,h=[];for(c=0;c<o.length;c++)h[c]=o[c];return h}},{key:"extend",value:function(o,c){var h=this;"function"!=typeof Object.assign&&(Object.assign=function(b){if(null==b)throw new TypeError("Cannot convert undefined or null to object");for(var x=Object(b),A=1;A<arguments.length;A++){var I=arguments[A];if(null!=I)for(var F in I)I.hasOwnProperty(F)&&(x[F]=I[F])}return x});var _=Object.assign({},o);return this.isObject(o)&&this.isObject(c)&&Object.keys(c).forEach(function(b){h.isObject(c[b])&&b in o?_[b]=h.extend(o[b],c[b]):Object.assign(_,De({},b,c[b]))}),_}},{key:"extendArray",value:function(o,c){var h=[];return o.map(function(_){h.push(le.extend(c,_))}),h}},{key:"monthMod",value:function(o){return o%12}},{key:"clone",value:function(o){if(le.is("Array",o)){for(var c=[],h=0;h<o.length;h++)c[h]=this.clone(o[h]);return c}if(le.is("Null",o))return null;if(le.is("Date",o))return o;if("object"===i(o)){var _={};for(var b in o)o.hasOwnProperty(b)&&(_[b]=this.clone(o[b]));return _}return o}},{key:"log10",value:function(o){return Math.log(o)/Math.LN10}},{key:"roundToBase10",value:function(o){return Math.pow(10,Math.floor(Math.log10(o)))}},{key:"roundToBase",value:function(o,c){return Math.pow(c,Math.floor(Math.log(o)/Math.log(c)))}},{key:"parseNumber",value:function(o){return null===o?o:parseFloat(o)}},{key:"stripNumber",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(o)?o:parseFloat(o.toPrecision(c))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(o){var c=String(o).split(/[eE]/);if(1===c.length)return c[0];var h="",_=o<0?"-":"",b=c[0].replace(".",""),x=Number(c[1])+1;if(x<0){for(h=_+"0.";x++;)h+="0";return h+b.replace(/^-/,"")}for(x-=b.length;x--;)h+="0";return b+h}},{key:"getDimensions",value:function(o){var c=getComputedStyle(o,null),h=o.clientHeight,_=o.clientWidth;return h-=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),[_-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),h]}},{key:"getBoundingClientRect",value:function(o){var c=o.getBoundingClientRect();return{top:c.top,right:c.right,bottom:c.bottom,left:c.left,width:o.clientWidth,height:o.clientHeight,x:c.left,y:c.top}}},{key:"getLargestStringFromArr",value:function(o){return o.reduce(function(c,h){return Array.isArray(h)&&(h=h.reduce(function(_,b){return _.length>b.length?_:b})),c.length>h.length?c:h},0)}},{key:"hexToRgba",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==o.substring(0,1)&&(o="#999999");var h=o.replace("#","");h=h.match(new RegExp("(.{"+h.length/3+"})","g"));for(var _=0;_<h.length;_++)h[_]=parseInt(1===h[_].length?h[_]+h[_]:h[_],16);return void 0!==c&&h.push(c),"rgba("+h.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(o){return parseFloat(o.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(o){return(o=o.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===o.length?"#"+("0"+parseInt(o[1],10).toString(16)).slice(-2)+("0"+parseInt(o[2],10).toString(16)).slice(-2)+("0"+parseInt(o[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(o){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(o)}},{key:"getPolygonPos",value:function(o,c){for(var h=[],_=2*Math.PI/c,b=0;b<c;b++){var x={};x.x=o*Math.sin(b*_),x.y=-o*Math.cos(b*_),h.push(x)}return h}},{key:"polarToCartesian",value:function(o,c,h,_){var b=(_-90)*Math.PI/180;return{x:o+h*Math.cos(b),y:c+h*Math.sin(b)}}},{key:"escapeString",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return o.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,c)}},{key:"negToZero",value:function(o){return o<0?0:o}},{key:"moveIndexInArray",value:function(o,c,h){if(h>=o.length)for(var _=h-o.length+1;_--;)o.push(void 0);return o.splice(h,0,o.splice(c,1)[0]),o}},{key:"extractNumber",value:function(o){return parseFloat(o.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(o,c){for(;(o=o.parentElement)&&!o.classList.contains(c););return o}},{key:"setELstyles",value:function(o,c){for(var h in c)c.hasOwnProperty(h)&&(o.style.key=c[h])}},{key:"isNumber",value:function(o){return!isNaN(o)&&parseFloat(Number(o))===o&&!isNaN(parseInt(o,10))}},{key:"isFloat",value:function(o){return Number(o)===o&&o%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var o=window.navigator.userAgent,c=o.indexOf("MSIE ");if(c>0)return parseInt(o.substring(c+5,o.indexOf(".",c)),10);if(o.indexOf("Trident/")>0){var h=o.indexOf("rv:");return parseInt(o.substring(h+3,o.indexOf(".",h)),10)}var _=o.indexOf("Edge/");return _>0&&parseInt(o.substring(_+5,o.indexOf(".",_)),10)}},{key:"getGCD",value:function(o,c){var _=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(o,c))));for(o=Math.round(Math.abs(o)*_),c=Math.round(Math.abs(c)*_);c;){var b=c;c=o%c,o=b}return o/_}},{key:"getPrimeFactors",value:function(o){for(var c=[],h=2;o>=2;)o%h==0?(c.push(h),o/=h):h++;return c}},{key:"mod",value:function(o,c){var _=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(o,c))));return(o=Math.round(Math.abs(o)*_))%(c=Math.round(Math.abs(c)*_))/_}}]),le}(),ii=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.setEasingFunctions()}return Ae(le,[{key:"setEasingFunctions",value:function(){var o;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":o="-";break;case"easein":o="<";break;case"easeout":o=">";break;case"easeinout":default:o="<>";break;case"swing":o=function(c){var h=1.70158;return(c-=1)*c*((h+1)*c+h)+1};break;case"bounce":o=function(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375};break;case"elastic":o=function(c){return c===!!c?c:Math.pow(2,-10*c)*Math.sin((c-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=o}}},{key:"animateLine",value:function(o,c,h,_){o.attr(c).animate(_).attr(h)}},{key:"animateMarker",value:function(o,c,h,_,b,x){c||(c=0),o.attr({r:c,width:c,height:c}).animate(_,b).attr({r:h,width:h.width,height:h.height}).afterAll(function(){x()})}},{key:"animateCircle",value:function(o,c,h,_,b){o.attr({r:c.r,cx:c.cx,cy:c.cy}).animate(_,b).attr({r:h.r,cx:h.cx,cy:h.cy})}},{key:"animateRect",value:function(o,c,h,_,b){o.attr(c).animate(_).attr(h).afterAll(function(){return b()})}},{key:"animatePathsGradually",value:function(o){var U=this.w,$=0;U.config.chart.animations.animateGradually.enabled&&($=U.config.chart.animations.animateGradually.delay),U.config.chart.animations.dynamicAnimation.enabled&&U.globals.dataChanged&&"bar"!==U.config.chart.type&&($=0),this.morphSVG(o.el,o.realIndex,o.j,"line"!==U.config.chart.type||U.globals.comboCharts?o.fill:"stroke",o.pathFrom,o.pathTo,o.speed,o.delay*$)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(o){var c=o.el;c.classList.remove("apexcharts-element-hidden"),c.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(o){var c=this.w;c.globals.animationEnded||(c.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof c.config.chart.events.animationEnd&&c.config.chart.events.animationEnd(this.ctx,{el:o,w:c}))}},{key:"morphSVG",value:function(o,c,h,_,b,x,A,I){var F=this,U=this.w;b||(b=o.attr("pathFrom")),x||(x=o.attr("pathTo"));var $=function(q){return"radar"===U.config.chart.type&&(A=1),"M 0 ".concat(U.globals.gridHeight)};(!b||b.indexOf("undefined")>-1||b.indexOf("NaN")>-1)&&(b=$()),(!x||x.indexOf("undefined")>-1||x.indexOf("NaN")>-1)&&(x=$()),U.globals.shouldAnimate||(A=1),o.plot(b).animate(1,U.globals.easing,I).plot(b).animate(A,U.globals.easing,I).plot(x).afterAll(function(){$e.isNumber(h)?h===U.globals.series[U.globals.maxValsInArrayIndex].length-2&&U.globals.shouldAnimate&&F.animationCompleted(o):"none"!==_&&U.globals.shouldAnimate&&(!U.globals.comboCharts&&c===U.globals.series.length-1||U.globals.comboCharts)&&F.animationCompleted(o),F.showDelayedElements()})}}]),le}(),oi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"getDefaultFilter",value:function(o,c){var h=this.w;o.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==h.config.states.normal.filter?this.applyFilter(o,c,h.config.states.normal.filter.type,h.config.states.normal.filter.value):h.config.chart.dropShadow.enabled&&this.dropShadow(o,h.config.chart.dropShadow,c)}},{key:"addNormalFilter",value:function(o,c){var h=this.w;h.config.chart.dropShadow.enabled&&!o.node.classList.contains("apexcharts-marker")&&this.dropShadow(o,h.config.chart.dropShadow,c)}},{key:"addLightenFilter",value:function(o,c,h){var _=this,b=this.w,x=h.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(A){var I=b.config.chart.dropShadow;(I.enabled?_.addShadow(A,c,I):A).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:x}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"addDarkenFilter",value:function(o,c,h){var _=this,b=this.w,x=h.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(A){var I=b.config.chart.dropShadow;(I.enabled?_.addShadow(A,c,I):A).componentTransfer({rgb:{type:"linear",slope:x}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"applyFilter",value:function(o,c,h){var _=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(h){case"none":this.addNormalFilter(o,c);break;case"lighten":this.addLightenFilter(o,c,{intensity:_});break;case"darken":this.addDarkenFilter(o,c,{intensity:_})}}},{key:"addShadow",value:function(o,c,h){var _,b=this.w,x=h.blur,A=h.top,I=h.left,F=h.color,U=h.opacity;if((null===(_=b.config.chart.dropShadow.enabledOnSeries)||void 0===_?void 0:_.length)>0&&-1===b.config.chart.dropShadow.enabledOnSeries.indexOf(c))return o;var $=o.flood(Array.isArray(F)?F[c]:F,U).composite(o.sourceAlpha,"in").offset(I,A).gaussianBlur(x).merge(o.source);return o.blend(o.source,$)}},{key:"dropShadow",value:function(o,c){var h,_,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=c.top,A=c.left,I=c.blur,F=c.color,U=c.opacity,$=c.noUserSpaceOnUse,q=this.w;return o.unfilter(!0),$e.isIE()&&"radialBar"===q.config.chart.type||(null===(h=q.config.chart.dropShadow.enabledOnSeries)||void 0===h?void 0:h.length)>0&&-1===(null===(_=q.config.chart.dropShadow.enabledOnSeries)||void 0===_?void 0:_.indexOf(b))||(F=Array.isArray(F)?F[b]:F,o.filter(function(ie){var ue;ue=$e.isSafari()||$e.isFirefox()||$e.isIE()?ie.flood(F,U).composite(ie.sourceAlpha,"in").offset(A,x).gaussianBlur(I):ie.flood(F,U).composite(ie.sourceAlpha,"in").offset(A,x).gaussianBlur(I).merge(ie.source),ie.blend(ie.source,ue)}),$||o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)),o}},{key:"setSelectionFilter",value:function(o,c,h){var _=this.w;if(void 0!==_.globals.selectedDataPoints[c]&&_.globals.selectedDataPoints[c].indexOf(h)>-1){o.node.setAttribute("selected",!0);var b=_.config.states.active.filter;"none"!==b&&this.applyFilter(o,c,b.type,b.value)}}},{key:"_scaleFilterSize",value:function(o){!function(c){for(var h in c)c.hasOwnProperty(h)&&o.setAttribute(h,c[h])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),le}(),at=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"roundPathCorners",value:function(o,c){function h(qe,kt,Dt){var ei=kt.x-qe.x,wi=kt.y-qe.y,Mi=Math.sqrt(ei*ei+wi*wi);return _(qe,kt,Math.min(1,Dt/Mi))}function _(qe,kt,Dt){return{x:qe.x+(kt.x-qe.x)*Dt,y:qe.y+(kt.y-qe.y)*Dt}}function b(qe,kt){qe.length>2&&(qe[qe.length-2]=kt.x,qe[qe.length-1]=kt.y)}function x(qe){return{x:parseFloat(qe[qe.length-2]),y:parseFloat(qe[qe.length-1])}}o.indexOf("NaN")>-1&&(o="");var A=o.split(/[,\s]/).reduce(function(qe,kt){var Dt=kt.match("([a-zA-Z])(.+)");return Dt?(qe.push(Dt[1]),qe.push(Dt[2])):qe.push(kt),qe},[]).reduce(function(qe,kt){return parseFloat(kt)==kt&&qe.length?qe[qe.length-1].push(kt):qe.push([kt]),qe},[]),I=[];if(A.length>1){var F=x(A[0]),U=null;"Z"==A[A.length-1][0]&&A[0].length>2&&(A[A.length-1]=U=["L",F.x,F.y]),I.push(A[0]);for(var $=1;$<A.length;$++){var q=I[I.length-1],ie=A[$],ue=ie==U?A[1]:A[$+1];if(ue&&q&&q.length>2&&"L"==ie[0]&&ue.length>2&&"L"==ue[0]){var ge,we,me=x(q),Ee=x(ie),N=x(ue);ge=h(Ee,me,c),we=h(Ee,N,c),b(ie,ge),ie.origPoint=Ee,I.push(ie);var Q=_(ge,Ee,.5),pe=_(Ee,we,.5),xe=["C",Q.x,Q.y,pe.x,pe.y,we.x,we.y];xe.origPoint=Ee,I.push(xe)}else I.push(ie)}if(U){var Le=x(I[I.length-1]);I.push(["Z"]),b(I[0],Le)}}else I=A;return I.reduce(function(qe,kt){return qe+kt.join(" ")+" "},"")}},{key:"drawLine",value:function(o,c,h,_){var b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:o,y1:c,x2:h,y2:_,stroke:b,"stroke-dasharray":x,"stroke-width":A,"stroke-linecap":I})}},{key:"drawRect",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,F=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,U=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,$=this.w.globals.dom.Paper.rect();return $.attr({x:o,y:c,width:h>0?h:0,height:_>0?_:0,rx:b,ry:b,opacity:A,"stroke-width":null!==I?I:0,stroke:null!==F?F:"none","stroke-dasharray":U}),$.node.setAttribute("fill",x),$}},{key:"drawPolygon",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(o).attr({fill:_,stroke:c,"stroke-width":h})}},{key:"drawCircle",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o<0&&(o=0);var h=this.w.globals.dom.Paper.circle(2*o);return null!==c&&h.attr(c),h}},{key:"drawPath",value:function(o){var c=o.d,h=void 0===c?"":c,_=o.stroke,b=void 0===_?"#a8a8a8":_,x=o.strokeWidth,A=void 0===x?1:x,I=o.fill,F=o.fillOpacity,U=void 0===F?1:F,$=o.strokeOpacity,q=void 0===$?1:$,ie=o.classes,ue=o.strokeLinecap,ge=void 0===ue?null:ue,we=o.strokeDashArray,me=void 0===we?0:we,Ee=this.w;return null===ge&&(ge=Ee.config.stroke.lineCap),(h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h="M 0 ".concat(Ee.globals.gridHeight)),Ee.globals.dom.Paper.path(h).attr({fill:I,"fill-opacity":U,stroke:b,"stroke-opacity":q,"stroke-linecap":ge,"stroke-width":A,"stroke-dasharray":me,class:ie})}},{key:"group",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=this.w.globals.dom.Paper.group();return null!==o&&c.attr(o),c}},{key:"move",value:function(o,c){return["M",o,c].join(" ")}},{key:"line",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=null;return null===h?_=[" L",o,c].join(" "):"H"===h?_=[" H",o].join(" "):"V"===h&&(_=[" V",c].join(" ")),_}},{key:"curve",value:function(o,c,h,_,b,x){return["C",o,c,h,_,b,x].join(" ")}},{key:"quadraticCurve",value:function(o,c,h,_){return["Q",o,c,h,_].join(" ")}},{key:"arc",value:function(o,c,h,_,b,x,A){var I="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(I="a"),[I,o,c,h,_,b,x,A].join(" ")}},{key:"renderPaths",value:function(o){var c,h=o.j,_=o.realIndex,b=o.pathFrom,x=o.pathTo,A=o.stroke,I=o.strokeWidth,F=o.strokeLinecap,U=o.fill,$=o.animationDelay,q=o.initialSpeed,ie=o.dataChangeSpeed,ue=o.className,ge=o.shouldClipToGrid,we=void 0===ge||ge,me=o.bindEventsOnPaths,Ee=void 0===me||me,N=o.drawShadow,Q=void 0===N||N,pe=this.w,xe=new oi(this.ctx),Le=new ii(this.ctx),qe=this.w.config.chart.animations.enabled,kt=qe&&this.w.config.chart.animations.dynamicAnimation.enabled,Dt=!!(qe&&!pe.globals.resized||kt&&pe.globals.dataChanged&&pe.globals.shouldAnimate);Dt?c=b:(c=x,pe.globals.animationEnded=!0);var wi,ei=pe.config.stroke.dashArray;wi=Array.isArray(ei)?ei[_]:pe.config.stroke.dashArray;var Mi=this.drawPath({d:c,stroke:A,strokeWidth:I,fill:U,fillOpacity:1,classes:ue,strokeLinecap:F,strokeDashArray:wi});Mi.attr("index",_),we&&Mi.attr({"clip-path":"url(#gridRectMask".concat(pe.globals.cuid,")")}),"none"!==pe.config.states.normal.filter.type?xe.getDefaultFilter(Mi,_):pe.config.chart.dropShadow.enabled&&Q&&xe.dropShadow(Mi,pe.config.chart.dropShadow,_),Ee&&(Mi.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Mi)),Mi.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Mi)),Mi.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Mi))),Mi.attr({pathTo:x,pathFrom:b});var wn={el:Mi,j:h,realIndex:_,pathFrom:b,pathTo:x,fill:U,strokeWidth:I,delay:$};return!qe||pe.globals.resized||pe.globals.dataChanged?!pe.globals.resized&&pe.globals.dataChanged||Le.showDelayedElements():Le.animatePathsGradually(ze(ze({},wn),{},{speed:q})),pe.globals.dataChanged&&kt&&Dt&&Le.animatePathsGradually(ze(ze({},wn),{},{speed:ie})),Mi}},{key:"drawPattern",value:function(o,c,h){var _=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(c,h,function(x){"horizontalLines"===o?x.line(0,0,h,0).stroke({color:_,width:b+1}):"verticalLines"===o?x.line(0,0,0,c).stroke({color:_,width:b+1}):"slantedLines"===o?x.line(0,0,c,h).stroke({color:_,width:b}):"squares"===o?x.rect(c,h).fill("none").stroke({color:_,width:b}):"circles"===o&&x.circle(c).fill("none").stroke({color:_,width:b})})}},{key:"drawGradient",value:function(o,c,h,_,b){var x,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,U=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,$=this.w;c.length<9&&0===c.indexOf("#")&&(c=$e.hexToRgba(c,_)),h.length<9&&0===h.indexOf("#")&&(h=$e.hexToRgba(h,b));var q=0,ie=1,ue=1,ge=null;null!==I&&(q=void 0!==I[0]?I[0]/100:0,ie=void 0!==I[1]?I[1]/100:1,ue=void 0!==I[2]?I[2]/100:1,ge=void 0!==I[3]?I[3]/100:null);var we=!("donut"!==$.config.chart.type&&"pie"!==$.config.chart.type&&"polarArea"!==$.config.chart.type&&"bubble"!==$.config.chart.type);return x=$.globals.dom.Paper.gradient(we?"radial":"linear",null===F||0===F.length?function(N){N.at(q,c,_),N.at(ie,h,b),N.at(ue,h,b),null!==ge&&N.at(ge,c,_)}:function(N){(Array.isArray(F[U])?F[U]:F).forEach(function(Q){N.at(Q.offset/100,Q.color,Q.opacity)})}),we?x.attr("bubble"!==$.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:$.globals.gridWidth/2,cy:$.globals.gridHeight/2,r:A}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===o?x.from(0,0).to(0,1):"diagonal"===o?x.from(0,0).to(1,1):"horizontal"===o?x.from(0,1).to(1,1):"diagonal2"===o&&x.from(1,0).to(0,1),x}},{key:"getTextBasedOnMaxWidth",value:function(o){var c=o.text,h=o.maxWidth,x=this.getTextRects(c,o.fontSize,o.fontFamily),I=Math.floor(h/(x.width/c.length));return h<x.width?c.slice(0,I-3)+"...":c}},{key:"drawText",value:function(o){var c=this,h=o.x,_=o.y,b=o.text,x=o.textAnchor,A=o.fontSize,I=o.fontFamily,F=o.fontWeight,U=o.foreColor,$=o.opacity,q=o.maxWidth,ie=o.cssClass,ue=void 0===ie?"":ie,ge=o.isPlainText,we=void 0===ge||ge,me=o.dominantBaseline,Ee=void 0===me?"auto":me,N=this.w;void 0===b&&(b="");var Q=b;x||(x="start"),U&&U.length||(U=N.config.chart.foreColor),F=F||"regular";var pe,xe={maxWidth:q,fontSize:A=A||"11px",fontFamily:I=I||N.config.chart.fontFamily};return Array.isArray(b)?pe=N.globals.dom.Paper.text(function(Le){for(var qe=0;qe<b.length;qe++)Q=b[qe],q&&(Q=c.getTextBasedOnMaxWidth(ze({text:b[qe]},xe))),0===qe?Le.tspan(Q):Le.tspan(Q).newLine()}):(q&&(Q=this.getTextBasedOnMaxWidth(ze({text:b},xe))),pe=we?N.globals.dom.Paper.plain(b):N.globals.dom.Paper.text(function(Le){return Le.tspan(Q)})),pe.attr({x:h,y:_,"text-anchor":x,"dominant-baseline":Ee,"font-size":A,"font-family":I,"font-weight":F,fill:U,class:"apexcharts-text "+ue}),pe.node.style.fontFamily=I,pe.node.style.opacity=$,pe}},{key:"createGroupWithAttributes",value:function(o,c,h,_){var b=this.group();return h.forEach(function(x){return b.add(x)}),b.attr({class:_.class?_.class:"",cy:c,cx:o}),b}},{key:"drawPlus",value:function(o,c,h,_){var b=h/2,x=this.drawLine(o,c-b,o,c+b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap),A=this.drawLine(o-b,c,o+b,c,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap);return this.createGroupWithAttributes(o,c,[x,A],_)}},{key:"drawX",value:function(o,c,h,_){var b=h/2,x=this.drawLine(o-b,c-b,o+b,c+b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap),A=this.drawLine(o-b,c+b,o+b,c-b,_.pointStrokeColor,_.pointStrokeDashArray,_.pointStrokeWidth,_.pointStrokeLineCap);return this.createGroupWithAttributes(o,c,[x,A],_)}},{key:"drawMarker",value:function(o,c,h){o=o||0;var _=h.pSize||0,b=null;if("X"===h?.shape||"x"===h?.shape)b=this.drawX(o,c,_,h);else if("plus"===h?.shape||"+"===h?.shape)b=this.drawPlus(o,c,_,h);else if("square"===h.shape||"rect"===h.shape){var x=void 0===h.pRadius?_/2:h.pRadius;null!==c&&_||(_=0,x=0);var A=1.2*_+x,I=this.drawRect(A,A,A,A,x);I.attr({x:o-A/2,y:c-A/2,cx:o,cy:c,class:h.class?h.class:"",fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,stroke:h.pointStrokeColor,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}),b=I}else"circle"!==h.shape&&h.shape||($e.isNumber(c)||(_=0,c=0),b=this.drawCircle(_,{cx:o,cy:c,class:h.class?h.class:"",stroke:h.pointStrokeColor,fill:h.pointFillColor,"fill-opacity":h.pointFillOpacity?h.pointFillOpacity:1,"stroke-width":h.pointStrokeWidth?h.pointStrokeWidth:0,"stroke-opacity":h.pointStrokeOpacity?h.pointStrokeOpacity:1}));return b}},{key:"pathMouseEnter",value:function(o,c){var h=this.w,_=new oi(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10);if("function"==typeof h.config.chart.events.dataPointMouseEnter&&h.config.chart.events.dataPointMouseEnter(c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}),this.ctx.events.fireEvent("dataPointMouseEnter",[c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}]),("none"===h.config.states.active.filter.type||"true"!==o.node.getAttribute("selected"))&&"none"!==h.config.states.hover.filter.type&&!h.globals.isTouchDevice){var A=h.config.states.hover.filter;_.applyFilter(o,b,A.type,A.value)}}},{key:"pathMouseLeave",value:function(o,c){var h=this.w,_=new oi(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10);"function"==typeof h.config.chart.events.dataPointMouseLeave&&h.config.chart.events.dataPointMouseLeave(c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}),this.ctx.events.fireEvent("dataPointMouseLeave",[c,this.ctx,{seriesIndex:b,dataPointIndex:x,w:h}]),"none"!==h.config.states.active.filter.type&&"true"===o.node.getAttribute("selected")||"none"!==h.config.states.hover.filter.type&&_.getDefaultFilter(o,b)}},{key:"pathMouseDown",value:function(o,c){var h=this.w,_=new oi(this.ctx),b=parseInt(o.node.getAttribute("index"),10),x=parseInt(o.node.getAttribute("j"),10),A="false";if("true"===o.node.getAttribute("selected")){if(o.node.setAttribute("selected","false"),h.globals.selectedDataPoints[b].indexOf(x)>-1){var I=h.globals.selectedDataPoints[b].indexOf(x);h.globals.selectedDataPoints[b].splice(I,1)}}else{if(!h.config.states.active.allowMultipleDataPointsSelection&&h.globals.selectedDataPoints.length>0){h.globals.selectedDataPoints=[];var F=h.globals.dom.Paper.select(".apexcharts-series path").members,U=h.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,$=function(ue){Array.prototype.forEach.call(ue,function(ge){ge.node.setAttribute("selected","false"),_.getDefaultFilter(ge,b)})};$(F),$(U)}o.node.setAttribute("selected","true"),A="true",void 0===h.globals.selectedDataPoints[b]&&(h.globals.selectedDataPoints[b]=[]),h.globals.selectedDataPoints[b].push(x)}if("true"===A){var q=h.config.states.active.filter;if("none"!==q)_.applyFilter(o,b,q.type,q.value);else if("none"!==h.config.states.hover.filter&&!h.globals.isTouchDevice){var ie=h.config.states.hover.filter;_.applyFilter(o,b,ie.type,ie.value)}}else"none"!==h.config.states.active.filter.type&&("none"===h.config.states.hover.filter.type||h.globals.isTouchDevice?_.getDefaultFilter(o,b):_.applyFilter(o,b,(ie=h.config.states.hover.filter).type,ie.value));"function"==typeof h.config.chart.events.dataPointSelection&&h.config.chart.events.dataPointSelection(c,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:x,w:h}),c&&this.ctx.events.fireEvent("dataPointSelection",[c,this.ctx,{selectedDataPoints:h.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:x,w:h}])}},{key:"rotateAroundCenter",value:function(o){var c={};return o&&"function"==typeof o.getBBox&&(c=o.getBBox()),{x:c.x+c.width/2,y:c.y+c.height/2}}},{key:"getTextRects",value:function(o,c,h,_){var b=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],x=this.w,A=this.drawText({x:-200,y:-200,text:o,textAnchor:"start",fontSize:c,fontFamily:h,foreColor:"#fff",opacity:0});_&&A.attr("transform",_),x.globals.dom.Paper.add(A);var I=A.bbox();return b||(I=A.node.getBoundingClientRect()),A.remove(),{width:I.width,height:I.height}}},{key:"placeTextWithEllipsis",value:function(o,c,h){if("function"==typeof o.getComputedTextLength&&(o.textContent=c,c.length>0&&o.getComputedTextLength()>=h/1.1)){for(var _=c.length-3;_>0;_-=3)if(o.getSubStringLength(0,_)<=h/1.1)return void(o.textContent=c.substring(0,_)+"...");o.textContent="."}}}],[{key:"setAttrs",value:function(o,c){for(var h in c)c.hasOwnProperty(h)&&o.setAttribute(h,c[h])}}]),le}(),ri=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"getStackedSeriesTotals",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=this.w,h=[];if(0===c.globals.series.length)return h;for(var _=0;_<c.globals.series[c.globals.maxValsInArrayIndex].length;_++){for(var b=0,x=0;x<c.globals.series.length;x++)void 0!==c.globals.series[x][_]&&-1===o.indexOf(x)&&(b+=c.globals.series[x][_]);h.push(b)}return h}},{key:"getSeriesTotalByIndex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===o?this.w.config.series.reduce(function(c,h){return c+h},0):this.w.globals.series[o].reduce(function(c,h){return c+h},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var o=this,c=this.w,h=[];return c.globals.seriesGroups.forEach(function(_){var b=[];c.config.series.forEach(function(A,I){_.indexOf(A.name)>-1&&b.push(I)});var x=c.globals.series.map(function(A,I){return-1===b.indexOf(I)?I:-1}).filter(function(A){return-1!==A});h.push(o.getStackedSeriesTotals(x))}),h}},{key:"isSeriesNull",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===o?this.w.config.series.filter(function(c){return null!==c}):this.w.config.series[o].data.filter(function(c){return null!==c})).length}},{key:"seriesHaveSameValues",value:function(o){return this.w.globals.series[o].every(function(c,h,_){return c===_[0]})}},{key:"getCategoryLabels",value:function(o){var c=this.w,h=o.slice();return c.config.xaxis.convertedCatToNumeric&&(h=o.map(function(_,b){return c.config.xaxis.labels.formatter(_-c.globals.minX+1)})),h}},{key:"getLargestSeries",value:function(){var o=this.w;o.globals.maxValsInArrayIndex=o.globals.series.map(function(c){return c.length}).indexOf(Math.max.apply(Math,o.globals.series.map(function(c){return c.length})))}},{key:"getLargestMarkerSize",value:function(){var o=this.w,c=0;return o.globals.markers.size.forEach(function(h){c=Math.max(c,h)}),o.config.markers.discrete&&o.config.markers.discrete.length&&o.config.markers.discrete.forEach(function(h){c=Math.max(c,h.size)}),c>0&&(c+=o.config.markers.hover.sizeOffset+1),o.globals.markers.largestSize=c,c}},{key:"getSeriesTotals",value:function(){var o=this.w;o.globals.seriesTotals=o.globals.series.map(function(c,h){var _=0;if(Array.isArray(c))for(var b=0;b<c.length;b++)_+=c[b];else _+=c;return _})}},{key:"getSeriesTotalsXRange",value:function(o,c){var h=this.w;return h.globals.series.map(function(_,b){for(var x=0,A=0;A<_.length;A++)h.globals.seriesX[b][A]>o&&h.globals.seriesX[b][A]<c&&(x+=_[A]);return x})}},{key:"getPercentSeries",value:function(){var o=this.w;o.globals.seriesPercent=o.globals.series.map(function(c,h){var _=[];if(Array.isArray(c))for(var b=0;b<c.length;b++){var x=o.globals.stackedSeriesTotals[b],A=0;x&&(A=100*c[b]/x),_.push(A)}else{var I=100*c/o.globals.seriesTotals.reduce(function(F,U){return F+U},0);_.push(I)}return _})}},{key:"getCalculatedRatios",value:function(){var o,c,h,_=this.w.globals,b=[],x=0,A=[],I=.1,F=0;if(_.yRange=[],_.isMultipleYAxis)for(var U=0;U<_.minYArr.length;U++)_.yRange.push(Math.abs(_.minYArr[U]-_.maxYArr[U])),A.push(0);else _.yRange.push(Math.abs(_.minY-_.maxY));_.xRange=Math.abs(_.maxX-_.minX),_.zRange=Math.abs(_.maxZ-_.minZ);for(var $=0;$<_.yRange.length;$++)b.push(_.yRange[$]/_.gridHeight);if(c=_.xRange/_.gridWidth,o=_.yRange/_.gridWidth,h=_.xRange/_.gridHeight,(x=_.zRange/_.gridHeight*16)||(x=1),_.minY!==Number.MIN_VALUE&&0!==Math.abs(_.minY)&&(_.hasNegs=!0),_.isMultipleYAxis){A=[];for(var q=0;q<b.length;q++)A.push(-_.minYArr[q]/b[q])}else A.push(-_.minY/b[0]),_.minY!==Number.MIN_VALUE&&0!==Math.abs(_.minY)&&(I=-_.minY/o,F=_.minX/c);return{yRatio:b,invertedYRatio:o,zRatio:x,xRatio:c,invertedXRatio:h,baseLineInvertedY:I,baseLineY:A,baseLineX:F}}},{key:"getLogSeries",value:function(o){var c=this,h=this.w;return h.globals.seriesLog=o.map(function(_,b){return h.config.yaxis[b]&&h.config.yaxis[b].logarithmic?_.map(function(x){return null===x?null:c.getLogVal(h.config.yaxis[b].logBase,x,b)}):_}),h.globals.invalidLogScale?o:h.globals.seriesLog}},{key:"getBaseLog",value:function(o,c){return Math.log(c)/Math.log(o)}},{key:"getLogVal",value:function(o,c,h){if(0===c)return 0;var _=this.w,b=0===_.globals.minYArr[h]?-1:this.getBaseLog(o,_.globals.minYArr[h]),x=(0===_.globals.maxYArr[h]?0:this.getBaseLog(o,_.globals.maxYArr[h]))-b;return c<1?c/x:(this.getBaseLog(o,c)-b)/x}},{key:"getLogYRatios",value:function(o){var c=this,h=this.w,_=this.w.globals;return _.yLogRatio=o.slice(),_.logYRange=_.yRange.map(function(b,x){if(h.config.yaxis[x]&&c.w.config.yaxis[x].logarithmic){var A,I=-Number.MAX_VALUE,F=Number.MIN_VALUE;return _.seriesLog.forEach(function(U,$){U.forEach(function(q){h.config.yaxis[$]&&h.config.yaxis[$].logarithmic&&(I=Math.max(q,I),F=Math.min(q,F))})}),A=Math.pow(_.yRange[x],Math.abs(F-I)/_.yRange[x]),_.yLogRatio[x]=A/_.gridHeight,A}}),_.invalidLogScale?o.slice():_.yLogRatio}}],[{key:"checkComboSeries",value:function(o){var c=!1,h=0,_=0;return o.length&&void 0!==o[0].type&&o.forEach(function(b){"bar"!==b.type&&"column"!==b.type&&"candlestick"!==b.type&&"boxPlot"!==b.type||h++,void 0!==b.type&&_++}),_>0&&(c=!0),{comboBarCount:h,comboCharts:c}}},{key:"extendArrayProps",value:function(o,c,h){var _,b,x,A,I,F;return null!==(_=c)&&void 0!==_&&_.yaxis&&(c=o.extendYAxis(c,h)),null!==(b=c)&&void 0!==b&&b.annotations&&(c.annotations.yaxis&&(c=o.extendYAxisAnnotations(c)),null!==(x=c)&&void 0!==x&&null!==(A=x.annotations)&&void 0!==A&&A.xaxis&&(c=o.extendXAxisAnnotations(c)),null!==(I=c)&&void 0!==I&&null!==(F=I.annotations)&&void 0!==F&&F.points&&(c=o.extendPointAnnotations(c))),c}}]),le}(),Xt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o}return Ae(le,[{key:"setOrientations",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===o.label.orientation){var b=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==c?c:0,"']"));if(null!==b){var x=b.getBoundingClientRect();b.setAttribute("x",parseFloat(b.getAttribute("x"))-x.height+4),b.setAttribute("y","top"===o.label.position?parseFloat(b.getAttribute("y"))+x.width:parseFloat(b.getAttribute("y"))-x.width);var A=this.annoCtx.graphics.rotateAroundCenter(b),F=A.y;b.setAttribute("transform","rotate(-90 ".concat(A.x," ").concat(F,")"))}}}},{key:"addBackgroundToAnno",value:function(o,c){var h=this.w;if(!o||void 0===c.label.text||void 0!==c.label.text&&!String(c.label.text).trim())return null;var _=h.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),b=o.getBoundingClientRect(),x=c.label.style.padding.left,A=c.label.style.padding.right,I=c.label.style.padding.top,F=c.label.style.padding.bottom;"vertical"===c.label.orientation&&(I=c.label.style.padding.left,F=c.label.style.padding.right,x=c.label.style.padding.top,A=c.label.style.padding.bottom);var q=this.annoCtx.graphics.drawRect(b.left-_.left-x-h.globals.barPadForNumericAxis,b.top-_.top-I,b.width+x+A,b.height+I+F,c.label.borderRadius,c.label.style.background,1,c.label.borderWidth,c.label.borderColor,0);return c.id&&q.node.classList.add(c.id),q}},{key:"annotationsBackground",value:function(){var o=this,c=this.w,h=function(_,b,x){var A=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(x,"-annotations .apexcharts-").concat(x,"-annotation-label[rel='").concat(b,"']"));if(A){var I=A.parentNode,F=o.addBackgroundToAnno(A,_);F&&(I.insertBefore(F.node,A),_.label.mouseEnter&&F.node.addEventListener("mouseenter",_.label.mouseEnter.bind(o,_)),_.label.mouseLeave&&F.node.addEventListener("mouseleave",_.label.mouseLeave.bind(o,_)),_.label.click&&F.node.addEventListener("click",_.label.click.bind(o,_)))}};c.config.annotations.xaxis.map(function(_,b){h(_,b,"xaxis")}),c.config.annotations.yaxis.map(function(_,b){h(_,b,"yaxis")}),c.config.annotations.points.map(function(_,b){h(_,b,"point")})}},{key:"getY1Y2",value:function(o,c){var h,_="y1"===o?c.y:c.y2,b=this.w;if(this.annoCtx.invertAxis){var x=b.globals.labels;b.config.xaxis.convertedCatToNumeric&&(x=b.globals.categoryLabels);var A=x.indexOf(_),I=b.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(A+1)+")");h=I?parseFloat(I.getAttribute("y")):(b.globals.gridHeight/x.length-1)*(A+1)-b.globals.barHeight,void 0!==c.seriesIndex&&b.globals.barHeight&&(h=h-b.globals.barHeight/2*(b.globals.series.length-1)+b.globals.barHeight*c.seriesIndex)}else{var F;F=b.config.yaxis[c.yAxisIndex].logarithmic?(_=new ri(this.annoCtx.ctx).getLogVal(_,c.yAxisIndex))/b.globals.yLogRatio[c.yAxisIndex]:(_-b.globals.minYArr[c.yAxisIndex])/(b.globals.yRange[c.yAxisIndex]/b.globals.gridHeight),h=b.globals.gridHeight-F,!c.marker||null!=c.y||(h=0),b.config.yaxis[c.yAxisIndex]&&b.config.yaxis[c.yAxisIndex].reversed&&(h=F)}return"string"==typeof _&&_.indexOf("px")>-1&&(h=parseFloat(_)),h}},{key:"getX1X2",value:function(o,c){var h=this.w,_=this.annoCtx.invertAxis?h.globals.minY:h.globals.minX,b=this.annoCtx.invertAxis?h.globals.maxY:h.globals.maxX,x=this.annoCtx.invertAxis?h.globals.yRange[0]:h.globals.xRange,A=(c.x-_)/(x/h.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(A=(b-c.x)/(x/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(A=this.getStringX(c.x));var I=(c.x2-_)/(x/h.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(I=(b-c.x2)/(x/h.globals.gridWidth)),"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||h.globals.dataFormatXNumeric||(I=this.getStringX(c.x2)),null!=c.x||!c.marker||(A=h.globals.gridWidth),"x1"===o&&"string"==typeof c.x&&c.x.indexOf("px")>-1&&(A=parseFloat(c.x)),"x2"===o&&"string"==typeof c.x2&&c.x2.indexOf("px")>-1&&(I=parseFloat(c.x2)),void 0!==c.seriesIndex&&h.globals.barWidth&&!this.annoCtx.invertAxis&&(A=A-h.globals.barWidth/2*(h.globals.series.length-1)+h.globals.barWidth*c.seriesIndex),"x1"===o?A:I}},{key:"getStringX",value:function(o){var c=this.w,h=o;c.config.xaxis.convertedCatToNumeric&&c.globals.categoryLabels.length&&(o=c.globals.categoryLabels.indexOf(o)+1);var _=c.globals.labels.indexOf(o),b=c.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(_+1)+")");return b&&(h=parseFloat(b.getAttribute("x"))),h}}]),le}(),Vt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Xt(this.annoCtx)}return Ae(le,[{key:"addXaxisAnnotation",value:function(o,c,h){var _,b=this.w,x=this.helpers.getX1X2("x1",o),A=o.label.text,I=o.strokeDashArray;if($e.isNumber(x)){if(null==o.x2){var F=this.annoCtx.graphics.drawLine(x+o.offsetX,0+o.offsetY,x+o.offsetX,b.globals.gridHeight+o.offsetY,o.borderColor,I,o.borderWidth);c.appendChild(F.node),o.id&&F.node.classList.add(o.id)}else{if((_=this.helpers.getX1X2("x2",o))<x){var U=x;x=_,_=U}var $=this.annoCtx.graphics.drawRect(x+o.offsetX,0+o.offsetY,_-x,b.globals.gridHeight+o.offsetY,0,o.fillColor,o.opacity,1,o.borderColor,I);$.node.classList.add("apexcharts-annotation-rect"),$.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),c.appendChild($.node),o.id&&$.node.classList.add(o.id)}var q=this.annoCtx.graphics.getTextRects(A,parseFloat(o.label.style.fontSize)),ue=this.annoCtx.graphics.drawText({x:x+o.label.offsetX,y:("top"===o.label.position?4:"center"===o.label.position?b.globals.gridHeight/2+("vertical"===o.label.orientation?q.width/2:0):b.globals.gridHeight)+o.label.offsetY-("vertical"===o.label.orientation?"top"===o.label.position?q.width/2-12:-q.width/2:0),text:A,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});ue.attr({rel:h}),c.appendChild(ue.node),this.annoCtx.helpers.setOrientations(o,h)}}},{key:"drawXAxisAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return c.config.annotations.xaxis.map(function(_,b){o.addXaxisAnnotation(_,h.node,b)}),h}}]),le}(),dt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.helpers=new Xt(this.annoCtx)}return Ae(le,[{key:"addYaxisAnnotation",value:function(o,c,h){var _,b=this.w,x=o.strokeDashArray,A=this.helpers.getY1Y2("y1",o),I=o.label.text;if(null==o.y2){var F=this.annoCtx.graphics.drawLine(0+o.offsetX,A+o.offsetY,this._getYAxisAnnotationWidth(o),A+o.offsetY,o.borderColor,x,o.borderWidth);c.appendChild(F.node),o.id&&F.node.classList.add(o.id)}else{if((_=this.helpers.getY1Y2("y2",o))>A){var U=A;A=_,_=U}var $=this.annoCtx.graphics.drawRect(0+o.offsetX,_+o.offsetY,this._getYAxisAnnotationWidth(o),A-_,0,o.fillColor,o.opacity,1,o.borderColor,x);$.node.classList.add("apexcharts-annotation-rect"),$.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),c.appendChild($.node),o.id&&$.node.classList.add(o.id)}var ie=this.annoCtx.graphics.drawText({x:("right"===o.label.position?b.globals.gridWidth:"center"===o.label.position?b.globals.gridWidth/2:0)+o.label.offsetX,y:(_??A)+o.label.offsetY-3,text:I,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});ie.attr({rel:h}),c.appendChild(ie.node)}},{key:"_getYAxisAnnotationWidth",value:function(o){var c=this.w;return(o.width.indexOf("%")>-1?c.globals.gridWidth*parseInt(o.width,10)/100:parseInt(o.width,10))+o.offsetX}},{key:"drawYAxisAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return c.config.annotations.yaxis.map(function(_,b){o.addYaxisAnnotation(_,h.node,b)}),h}}]),le}(),Zt=function(){function le(o){V(this,le),this.w=o.w,this.annoCtx=o,this.helpers=new Xt(this.annoCtx)}return Ae(le,[{key:"addPointAnnotation",value:function(o,c,h){var _=this.helpers.getX1X2("x1",o),b=this.helpers.getY1Y2("y1",o);if($e.isNumber(_)){var x={pSize:o.marker.size,pointStrokeWidth:o.marker.strokeWidth,pointFillColor:o.marker.fillColor,pointStrokeColor:o.marker.strokeColor,shape:o.marker.shape,pRadius:o.marker.radius,class:"apexcharts-point-annotation-marker ".concat(o.marker.cssClass," ").concat(o.id?o.id:"")},A=this.annoCtx.graphics.drawMarker(_+o.marker.offsetX,b+o.marker.offsetY,x);c.appendChild(A.node);var I=o.label.text?o.label.text:"",F=this.annoCtx.graphics.drawText({x:_+o.label.offsetX,y:b+o.label.offsetY-o.marker.size-parseFloat(o.label.style.fontSize)/1.6,text:I,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});if(F.attr({rel:h}),c.appendChild(F.node),o.customSVG.SVG){var U=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+o.customSVG.cssClass});U.attr({transform:"translate(".concat(_+o.customSVG.offsetX,", ").concat(b+o.customSVG.offsetY,")")}),U.node.innerHTML=o.customSVG.SVG,c.appendChild(U.node)}if(o.image.path){var $=o.image.width?o.image.width:20,q=o.image.height?o.image.height:20;A=this.annoCtx.addImage({x:_+o.image.offsetX-$/2,y:b+o.image.offsetY-q/2,width:$,height:q,path:o.image.path,appendTo:".apexcharts-point-annotations"})}o.mouseEnter&&A.node.addEventListener("mouseenter",o.mouseEnter.bind(this,o)),o.mouseLeave&&A.node.addEventListener("mouseleave",o.mouseLeave.bind(this,o)),o.click&&A.node.addEventListener("click",o.click.bind(this,o))}}},{key:"drawPointAnnotations",value:function(){var o=this,c=this.w,h=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return c.config.annotations.points.map(function(_,b){o.addPointAnnotation(_,h.node,b)}),h}}]),le}(),ni={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},gi=function(){function le(){V(this,le),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Ae(le,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[ni],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(o){return new Date(o).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(o){return o}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(o){return o+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(c,h){return c+h},0)/o.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(o){return o},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(o){return o}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(o){return o}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(c,h){return c+h},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(o){return null!==o?o:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(o){return o?o+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),le}(),Gi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.graphics=new at(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Xt(this),this.xAxisAnnotations=new Vt(this),this.yAxisAnnotations=new dt(this),this.pointsAnnotations=new Zt(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Ae(le,[{key:"drawAxesAnnotations",value:function(){var o=this.w;if(o.globals.axisCharts){for(var c=this.yAxisAnnotations.drawYAxisAnnotations(),h=this.xAxisAnnotations.drawXAxisAnnotations(),_=this.pointsAnnotations.drawPointAnnotations(),b=o.config.chart.animations.enabled,x=[c,h,_],A=[h.node,c.node,_.node],I=0;I<3;I++)o.globals.dom.elGraphical.add(x[I]),!b||o.globals.resized||o.globals.dataChanged||"scatter"!==o.config.chart.type&&"bubble"!==o.config.chart.type&&o.globals.dataPoints>1&&A[I].classList.add("apexcharts-element-hidden"),o.globals.delayedElements.push({el:A[I],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var o=this;this.w.config.annotations.images.map(function(c,h){o.addImage(c,h)})}},{key:"drawTextAnnos",value:function(){var o=this;this.w.config.annotations.texts.map(function(c,h){o.addText(c,h)})}},{key:"addXaxisAnnotation",value:function(o,c,h){this.xAxisAnnotations.addXaxisAnnotation(o,c,h)}},{key:"addYaxisAnnotation",value:function(o,c,h){this.yAxisAnnotations.addYaxisAnnotation(o,c,h)}},{key:"addPointAnnotation",value:function(o,c,h){this.pointsAnnotations.addPointAnnotation(o,c,h)}},{key:"addText",value:function(o,c){var b=o.text,q=o.backgroundColor,ie=o.borderWidth,ue=o.strokeDashArray,ge=o.borderRadius,we=o.borderColor,me=o.appendTo,Ee=void 0===me?".apexcharts-svg":me,N=o.paddingLeft,Q=void 0===N?4:N,pe=o.paddingRight,xe=void 0===pe?4:pe,Le=o.paddingBottom,qe=void 0===Le?2:Le,kt=o.paddingTop,Dt=void 0===kt?2:kt,ei=this.w,wi=this.graphics.drawText({x:o.x,y:o.y,text:b,textAnchor:o.textAnchor||"start",fontSize:o.fontSize||"12px",fontWeight:o.fontWeight||"regular",fontFamily:o.fontFamily||ei.config.chart.fontFamily,foreColor:o.foreColor||ei.config.chart.foreColor,cssClass:o.cssClass}),Mi=ei.globals.dom.baseEl.querySelector(Ee);Mi&&Mi.appendChild(wi.node);var dn=wi.bbox();if(b){var wn=this.graphics.drawRect(dn.x-Q,dn.y-Dt,dn.width+Q+xe,dn.height+qe+Dt,ge,q||"transparent",1,ie,we,ue);Mi.insertBefore(wn.node,wi.node)}}},{key:"addImage",value:function(o,c){var h=this.w,b=o.x,x=void 0===b?0:b,A=o.y,I=void 0===A?0:A,F=o.width,U=void 0===F?20:F,$=o.height,q=void 0===$?20:$,ie=o.appendTo,ue=void 0===ie?".apexcharts-svg":ie,ge=h.globals.dom.Paper.image(o.path);ge.size(U,q).move(x,I);var we=h.globals.dom.baseEl.querySelector(ue);return we&&we.appendChild(ge.node),ge}},{key:"addXaxisAnnotationExternal",value:function(o,c,h){return this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"xaxis",contextMethod:h.addXaxisAnnotation}),h}},{key:"addYaxisAnnotationExternal",value:function(o,c,h){return this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"yaxis",contextMethod:h.addYaxisAnnotation}),h}},{key:"addPointAnnotationExternal",value:function(o,c,h){return void 0===this.invertAxis&&(this.invertAxis=h.w.globals.isBarHorizontal),this.addAnnotationExternal({params:o,pushToMemory:c,context:h,type:"point",contextMethod:h.addPointAnnotation}),h}},{key:"addAnnotationExternal",value:function(o){var c=o.params,h=o.pushToMemory,_=o.context,b=o.type,x=o.contextMethod,A=_,I=A.w,F=I.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations")),U=F.childNodes.length+1,$=new gi,q=Object.assign({},"xaxis"===b?$.xAxisAnnotation:"yaxis"===b?$.yAxisAnnotation:$.pointAnnotation),ie=$e.extend(q,c);switch(b){case"xaxis":this.addXaxisAnnotation(ie,F,U);break;case"yaxis":this.addYaxisAnnotation(ie,F,U);break;case"point":this.addPointAnnotation(ie,F,U)}var ue=I.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations .apexcharts-").concat(b,"-annotation-label[rel='").concat(U,"']")),ge=this.helpers.addBackgroundToAnno(ue,ie);return ge&&F.insertBefore(ge.node,ue),h&&I.globals.memory.methodsToExec.push({context:A,id:ie.id?ie.id:$e.randomId(),method:x,label:"addAnnotation",params:c}),_}},{key:"clearAnnotations",value:function(o){var c=o.w,h=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");c.globals.memory.methodsToExec.map(function(_,b){"addText"!==_.label&&"addAnnotation"!==_.label||c.globals.memory.methodsToExec.splice(b,1)}),h=$e.listToArray(h),Array.prototype.forEach.call(h,function(_){for(;_.firstChild;)_.removeChild(_.firstChild)})}},{key:"removeAnnotation",value:function(o,c){var h=o.w,_=h.globals.dom.baseEl.querySelectorAll(".".concat(c));_&&(h.globals.memory.methodsToExec.map(function(b,x){b.id===c&&h.globals.memory.methodsToExec.splice(x,1)}),Array.prototype.forEach.call(_,function(b){b.parentElement.removeChild(b)}))}}]),le}(),vi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Ae(le,[{key:"isValidDate",value:function(o){return"number"!=typeof o&&!isNaN(this.parseDate(o))}},{key:"getTimeStamp",value:function(o){return Date.parse(o)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toISOString().substr(0,25)).getTime():new Date(o).getTime():o}},{key:"getDate",value:function(o){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toUTCString()):new Date(o)}},{key:"parseDate",value:function(o){var c=Date.parse(o);if(!isNaN(c))return this.getTimeStamp(o);var h=Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(h)}},{key:"parseDateWithTimezone",value:function(o){return Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(o,c){var h=this.w.globals.locale,_=this.w.config.xaxis.labels.datetimeUTC,b=["\0"].concat(ot(h.months)),x=["\x01"].concat(ot(h.shortMonths)),A=["\x02"].concat(ot(h.days)),I=["\x03"].concat(ot(h.shortDays));function F(qe,kt){var Dt=qe+"";for(kt=kt||2;Dt.length<kt;)Dt="0"+Dt;return Dt}var U=_?o.getUTCFullYear():o.getFullYear();c=(c=(c=c.replace(/(^|[^\\])yyyy+/g,"$1"+U)).replace(/(^|[^\\])yy/g,"$1"+U.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+U);var $=(_?o.getUTCMonth():o.getMonth())+1;c=(c=(c=(c=c.replace(/(^|[^\\])MMMM+/g,"$1"+b[0])).replace(/(^|[^\\])MMM/g,"$1"+x[0])).replace(/(^|[^\\])MM/g,"$1"+F($))).replace(/(^|[^\\])M/g,"$1"+$);var q=_?o.getUTCDate():o.getDate();c=(c=(c=(c=c.replace(/(^|[^\\])dddd+/g,"$1"+A[0])).replace(/(^|[^\\])ddd/g,"$1"+I[0])).replace(/(^|[^\\])dd/g,"$1"+F(q))).replace(/(^|[^\\])d/g,"$1"+q);var ie=_?o.getUTCHours():o.getHours(),ue=ie>12?ie-12:0===ie?12:ie;c=(c=(c=(c=c.replace(/(^|[^\\])HH+/g,"$1"+F(ie))).replace(/(^|[^\\])H/g,"$1"+ie)).replace(/(^|[^\\])hh+/g,"$1"+F(ue))).replace(/(^|[^\\])h/g,"$1"+ue);var ge=_?o.getUTCMinutes():o.getMinutes();c=(c=c.replace(/(^|[^\\])mm+/g,"$1"+F(ge))).replace(/(^|[^\\])m/g,"$1"+ge);var we=_?o.getUTCSeconds():o.getSeconds();c=(c=c.replace(/(^|[^\\])ss+/g,"$1"+F(we))).replace(/(^|[^\\])s/g,"$1"+we);var me=_?o.getUTCMilliseconds():o.getMilliseconds();c=c.replace(/(^|[^\\])fff+/g,"$1"+F(me,3)),me=Math.round(me/10),c=c.replace(/(^|[^\\])ff/g,"$1"+F(me)),me=Math.round(me/10);var Ee=ie<12?"AM":"PM";c=(c=(c=c.replace(/(^|[^\\])f/g,"$1"+me)).replace(/(^|[^\\])TT+/g,"$1"+Ee)).replace(/(^|[^\\])T/g,"$1"+Ee.charAt(0));var N=Ee.toLowerCase();c=(c=c.replace(/(^|[^\\])tt+/g,"$1"+N)).replace(/(^|[^\\])t/g,"$1"+N.charAt(0));var Q=-o.getTimezoneOffset(),pe=_||!Q?"Z":Q>0?"+":"-";if(!_){var xe=(Q=Math.abs(Q))%60;pe+=F(Math.floor(Q/60))+":"+F(xe)}c=c.replace(/(^|[^\\])K/g,"$1"+pe);var Le=(_?o.getUTCDay():o.getDay())+1;return(c=(c=(c=(c=c.replace(new RegExp(A[0],"g"),A[Le])).replace(new RegExp(I[0],"g"),I[Le])).replace(new RegExp(b[0],"g"),b[$])).replace(new RegExp(x[0],"g"),x[$])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(o,c,h){var _=this.w;void 0!==_.config.xaxis.min&&(o=_.config.xaxis.min),void 0!==_.config.xaxis.max&&(c=_.config.xaxis.max);var b=this.getDate(o),x=this.getDate(c),A=this.formatDate(b,"yyyy MM dd HH mm ss fff").split(" "),I=this.formatDate(x,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(A[6],10),maxMillisecond:parseInt(I[6],10),minSecond:parseInt(A[5],10),maxSecond:parseInt(I[5],10),minMinute:parseInt(A[4],10),maxMinute:parseInt(I[4],10),minHour:parseInt(A[3],10),maxHour:parseInt(I[3],10),minDate:parseInt(A[2],10),maxDate:parseInt(I[2],10),minMonth:parseInt(A[1],10)-1,maxMonth:parseInt(I[1],10)-1,minYear:parseInt(A[0],10),maxYear:parseInt(I[0],10)}}},{key:"isLeapYear",value:function(o){return o%4==0&&o%100!=0||o%400==0}},{key:"calculcateLastDaysOfMonth",value:function(o,c,h){return this.determineDaysOfMonths(o,c)-h}},{key:"determineDaysOfYear",value:function(o){var c=365;return this.isLeapYear(o)&&(c=366),c}},{key:"determineRemainingDaysOfYear",value:function(o,c,h){var _=this.daysCntOfYear[c]+h;return c>1&&this.isLeapYear()&&_++,_}},{key:"determineDaysOfMonths",value:function(o,c){var h=30;switch(o=$e.monthMod(o),!0){case this.months30.indexOf(o)>-1:2===o&&(h=this.isLeapYear(c)?29:28);break;case this.months31.indexOf(o)>-1:default:h=31}return h}}]),le}(),Ei=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.tooltipKeyFormat="dd MMM"}return Ae(le,[{key:"xLabelFormat",value:function(o,c,h,_){var b=this.w;if("datetime"===b.config.xaxis.type&&void 0===b.config.xaxis.labels.formatter&&void 0===b.config.tooltip.x.formatter){var x=new vi(this.ctx);return x.formatDate(x.getDate(c),b.config.tooltip.x.format)}return o(c,h,_)}},{key:"defaultGeneralFormatter",value:function(o){return Array.isArray(o)?o.map(function(c){return c}):o}},{key:"defaultYFormatter",value:function(o,c,h){var _=this.w;return $e.isNumber(o)&&(o=o.toFixed(0!==_.globals.yValueDecimal?void 0!==c.decimalsInFloat?c.decimalsInFloat:_.globals.yValueDecimal:_.globals.maxYArr[h]-_.globals.minYArr[h]<5?1:0)),o}},{key:"setLabelFormatters",value:function(){var o=this,c=this.w;return c.globals.xaxisTooltipFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.ttKeyFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.ttZFormatter=function(h){return h},c.globals.legendFormatter=function(h){return o.defaultGeneralFormatter(h)},c.globals.xLabelFormatter=void 0!==c.config.xaxis.labels.formatter?c.config.xaxis.labels.formatter:function(h){if($e.isNumber(h)){if(!c.config.xaxis.convertedCatToNumeric&&"numeric"===c.config.xaxis.type){if($e.isNumber(c.config.xaxis.decimalsInFloat))return h.toFixed(c.config.xaxis.decimalsInFloat);var _=c.globals.maxX-c.globals.minX;return h.toFixed(_>0&&_<100?1:0)}return h.toFixed(c.globals.isBarHorizontal&&c.globals.maxY-c.globals.minYArr<4?1:0)}return h},c.globals.ttKeyFormatter="function"==typeof c.config.tooltip.x.formatter?c.config.tooltip.x.formatter:c.globals.xLabelFormatter,"function"==typeof c.config.xaxis.tooltip.formatter&&(c.globals.xaxisTooltipFormatter=c.config.xaxis.tooltip.formatter),(Array.isArray(c.config.tooltip.y)||void 0!==c.config.tooltip.y.formatter)&&(c.globals.ttVal=c.config.tooltip.y),void 0!==c.config.tooltip.z.formatter&&(c.globals.ttZFormatter=c.config.tooltip.z.formatter),void 0!==c.config.legend.formatter&&(c.globals.legendFormatter=c.config.legend.formatter),c.config.yaxis.forEach(function(h,_){c.globals.yLabelFormatters[_]=void 0!==h.labels.formatter?h.labels.formatter:function(b){return c.globals.xyCharts?Array.isArray(b)?b.map(function(x){return o.defaultYFormatter(x,h,_)}):o.defaultYFormatter(b,h,_):b}}),c.globals}},{key:"heatmapLabelFormatters",value:function(){var o=this.w;if("heatmap"===o.config.chart.type){o.globals.yAxisScale[0].result=o.globals.seriesNames.slice();var c=o.globals.seriesNames.reduce(function(h,_){return h.length>_.length?h:_},0);o.globals.yAxisScale[0].niceMax=c,o.globals.yAxisScale[0].niceMin=c}}}]),le}(),Fi=function(le){var o,c=le.isTimeline,h=le.ctx,_=le.seriesIndex,b=le.dataPointIndex,x=le.y1,A=le.y2,I=le.w,F=I.globals.seriesRangeStart[_][b],U=I.globals.seriesRangeEnd[_][b],$=I.globals.labels[b],q=I.config.series[_].name?I.config.series[_].name:"",ie=I.globals.ttKeyFormatter,ue=I.config.tooltip.y.title.formatter,ge={w:I,seriesIndex:_,dataPointIndex:b,start:F,end:U};"function"==typeof ue&&(q=ue(q,ge)),null!==(o=I.config.series[_].data[b])&&void 0!==o&&o.x&&($=I.config.series[_].data[b].x),c||"datetime"===I.config.xaxis.type&&($=new Ei(h).xLabelFormat(I.globals.ttKeyFormatter,$,$,{i:void 0,dateFormatter:new vi(h).formatDate,w:I})),"function"==typeof ie&&($=ie($,ge)),Number.isFinite(x)&&Number.isFinite(A)&&(F=x,U=A);var we="",me="",Ee=I.globals.colors[_];if(void 0===I.config.tooltip.x.formatter)if("datetime"===I.config.xaxis.type){var N=new vi(h);we=N.formatDate(N.getDate(F),I.config.tooltip.x.format),me=N.formatDate(N.getDate(U),I.config.tooltip.x.format)}else we=F,me=U;else we=I.config.tooltip.x.formatter(F),me=I.config.tooltip.x.formatter(U);return{start:F,end:U,startVal:we,endVal:me,ylabel:$,color:Ee,seriesName:q}},Ji=function(le){var o=le.color,c=le.seriesName,h=le.ylabel,_=le.start,b=le.end,x=le.seriesIndex,A=le.dataPointIndex,I=le.ctx.tooltip.tooltipLabels.getFormatters(x);_=I.yLbFormatter(_),b=I.yLbFormatter(b);var F=I.yLbFormatter(le.w.globals.series[x][A]),U='<span class="value start-value">\n  '.concat(_,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(b,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+o+'">'+(c||"")+'</span></div><div> <span class="category">'+h+": </span> "+(le.w.globals.comboCharts?"rangeArea"===le.w.config.series[x].type||"rangeBar"===le.w.config.series[x].type?U:"<span>".concat(F,"</span>"):U)+" </div></div>"},bn=function(){function le(o){V(this,le),this.opts=o}return Ae(le,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(o){return this.hideYAxis(),$e.extend(o,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),ze(ze({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var o=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(c){return o._getBoxTooltip(c.w,c.seriesIndex,c.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var o=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(c){return o._getBoxTooltip(c.w,c.seriesIndex,c.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(o,c){var h=c.seriesIndex,_=c.dataPointIndex,b=c.w,x=function(){return b.globals.seriesRangeEnd[h][_]-b.globals.seriesRangeStart[h][_]};return b.globals.comboCharts?"rangeBar"===b.config.series[h].type||"rangeArea"===b.config.series[h].type?x():o:x()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(o){return o.w.config.plotOptions&&o.w.config.plotOptions.bar&&o.w.config.plotOptions.bar.horizontal?(_=(h=Fi(ze(ze({},c=o),{},{isTimeline:!0}))).color,b=h.seriesName,x=h.ylabel,A=h.startVal,I=h.endVal,Ji(ze(ze({},c),{},{color:_,seriesName:b,ylabel:x,start:A,end:I}))):function(c){var h=Fi(c),_=h.color,b=h.seriesName,x=h.ylabel,A=h.start,I=h.end;return Ji(ze(ze({},c),{},{color:_,seriesName:b,ylabel:x,start:A,end:I}))}(o);var c,h,_,b,x,A,I}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(o){var c,h;return null!==(c=o.plotOptions.bar)&&void 0!==c&&c.barHeight||(o.plotOptions.bar.barHeight=2),null!==(h=o.plotOptions.bar)&&void 0!==h&&h.columnWidth||(o.plotOptions.bar.columnWidth=2),o}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(o){return _=(h=Fi(c=o)).color,b=h.seriesName,x=h.ylabel,A=h.start,I=h.end,Ji(ze(ze({},c),{},{color:_,seriesName:b,ylabel:x,start:A,end:I}));var c,h,_,b,x,A,I}}}}},{key:"brush",value:function(o){return $e.extend(o,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(o){o.dataLabels=o.dataLabels||{},o.dataLabels.formatter=o.dataLabels.formatter||void 0;var c=o.dataLabels.formatter;return o.yaxis.forEach(function(h,_){o.yaxis[_].min=0,o.yaxis[_].max=100}),"bar"===o.chart.type&&(o.dataLabels.formatter=c||function(h){return"number"==typeof h&&h?h.toFixed(0)+"%":h}),o}},{key:"stackedBars",value:function(){var o=this.bar();return ze(ze({},o),{},{plotOptions:ze(ze({},o.plotOptions),{},{bar:ze(ze({},o.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(o){return o.xaxis.convertedCatToNumeric=!0,o}},{key:"convertCatToNumericXaxis",value:function(o,c,h){o.xaxis.type="numeric",o.xaxis.labels=o.xaxis.labels||{},o.xaxis.labels.formatter=o.xaxis.labels.formatter||function(x){return $e.isNumber(x)?Math.floor(x):x};var _=o.xaxis.labels.formatter,b=o.xaxis.categories&&o.xaxis.categories.length?o.xaxis.categories:o.labels;return h&&h.length&&(b=h.map(function(x){return Array.isArray(x)?x:String(x)})),b&&b.length&&(o.xaxis.labels.formatter=function(x){return $e.isNumber(x)?_(b[Math.floor(x)-1]):_(x)}),o.xaxis.categories=[],o.labels=[],o.xaxis.tickAmount=o.xaxis.tickAmount||"dataPoints",o}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(o){return o},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(o,c,h,_,b){var x=o.globals.seriesCandleO[c][h],A=o.globals.seriesCandleH[c][h],I=o.globals.seriesCandleM[c][h],F=o.globals.seriesCandleL[c][h],U=o.globals.seriesCandleC[c][h];return o.config.series[c].type&&o.config.series[c].type!==b?'<div class="apexcharts-custom-tooltip">\n          '.concat(o.config.series[c].name?o.config.series[c].name:"series-"+(c+1),": <strong>").concat(o.globals.series[c][h],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(o.config.chart.type,'">')+"<div>".concat(_[0],': <span class="value">')+x+"</span></div>"+"<div>".concat(_[1],': <span class="value">')+A+"</span></div>"+(I?"<div>".concat(_[2],': <span class="value">')+I+"</span></div>":"")+"<div>".concat(_[3],': <span class="value">')+F+"</span></div>"+"<div>".concat(_[4],': <span class="value">')+U+"</span></div></div>"}}]),le}(),fn=function(){function le(o){V(this,le),this.opts=o}return Ae(le,[{key:"init",value:function(o){var c=o.responsiveOverride,h=this.opts,_=new gi,b=new bn(h);this.chartType=h.chart.type,h=this.extendYAxis(h),h=this.extendAnnotations(h);var x=_.init(),A={};if(h&&"object"===i(h)){var I,F,U,$,q,ie,ue,ge,we={};we=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(h.chart.type)?b[h.chart.type]():b.line(),null!==(I=h.plotOptions)&&void 0!==I&&null!==(F=I.bar)&&void 0!==F&&F.isFunnel&&(we=b.funnel()),h.chart.stacked&&"bar"===h.chart.type&&(we=b.stackedBars()),null!==(U=h.chart.brush)&&void 0!==U&&U.enabled&&(we=b.brush(we)),h.chart.stacked&&"100%"===h.chart.stackType&&(h=b.stacked100(h)),null!==($=h.plotOptions)&&void 0!==$&&null!==(q=$.bar)&&void 0!==q&&q.isDumbbell&&(h=b.dumbbell(h)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(h),h.xaxis=h.xaxis||window.Apex.xaxis||{},c||(h.xaxis.convertedCatToNumeric=!1),(null!==(ie=(h=this.checkForCatToNumericXAxis(this.chartType,we,h)).chart.sparkline)&&void 0!==ie&&ie.enabled||null!==(ue=window.Apex.chart)&&void 0!==ue&&null!==(ge=ue.sparkline)&&void 0!==ge&&ge.enabled)&&(we=b.sparkline(we)),A=$e.extend(x,we)}var me=$e.extend(A,window.Apex);return x=$e.extend(me,h),this.handleUserInputErrors(x)}},{key:"checkForCatToNumericXAxis",value:function(o,c,h){var _,b,x=new bn(h);return("bar"===o||"boxPlot"===o)&&(null===(_=h.plotOptions)||void 0===_||null===(b=_.bar)||void 0===b?void 0:b.horizontal)||"pie"===o||"polarArea"===o||"donut"===o||"radar"===o||"radialBar"===o||"heatmap"===o||!("datetime"!==h.xaxis.type&&"numeric"!==h.xaxis.type)||"between"===(h.xaxis.tickPlacement?h.xaxis.tickPlacement:c.xaxis&&c.xaxis.tickPlacement)||(h=x.convertCatToNumeric(h)),h}},{key:"extendYAxis",value:function(o,c){var h=new gi;(void 0===o.yaxis||!o.yaxis||Array.isArray(o.yaxis)&&0===o.yaxis.length)&&(o.yaxis={}),o.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(o.yaxis=$e.extend(o.yaxis,window.Apex.yaxis)),o.yaxis=o.yaxis.constructor!==Array?[$e.extend(h.yAxis,o.yaxis)]:$e.extendArray(o.yaxis,h.yAxis);var _=!1;o.yaxis.forEach(function(x){x.logarithmic&&(_=!0)});var b=o.series;return c&&!b&&(b=c.config.series),_&&b.length!==o.yaxis.length&&b.length&&(o.yaxis=b.map(function(x,A){if(x.name||(b[A].name="series-".concat(A+1)),o.yaxis[A])return o.yaxis[A].seriesName=b[A].name,o.yaxis[A];var I=$e.extend(h.yAxis,o.yaxis[0]);return I.show=!1,I})),_&&b.length>1&&b.length!==o.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),o}},{key:"extendAnnotations",value:function(o){return void 0===o.annotations&&(o.annotations={},o.annotations.yaxis=[],o.annotations.xaxis=[],o.annotations.points=[]),o=this.extendYAxisAnnotations(o),o=this.extendXAxisAnnotations(o),this.extendPointAnnotations(o)}},{key:"extendYAxisAnnotations",value:function(o){var c=new gi;return o.annotations.yaxis=$e.extendArray(void 0!==o.annotations.yaxis?o.annotations.yaxis:[],c.yAxisAnnotation),o}},{key:"extendXAxisAnnotations",value:function(o){var c=new gi;return o.annotations.xaxis=$e.extendArray(void 0!==o.annotations.xaxis?o.annotations.xaxis:[],c.xAxisAnnotation),o}},{key:"extendPointAnnotations",value:function(o){var c=new gi;return o.annotations.points=$e.extendArray(void 0!==o.annotations.points?o.annotations.points:[],c.pointAnnotation),o}},{key:"checkForDarkTheme",value:function(o){o.theme&&"dark"===o.theme.mode&&(o.tooltip||(o.tooltip={}),"light"!==o.tooltip.theme&&(o.tooltip.theme="dark"),o.chart.foreColor||(o.chart.foreColor="#f6f7f8"),o.chart.background||(o.chart.background="#424242"),o.theme.palette||(o.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(o){var c=o;if(c.tooltip.shared&&c.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===c.chart.type&&c.plotOptions.bar.horizontal){if(c.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");c.yaxis[0].reversed&&(c.yaxis[0].opposite=!0),c.xaxis.tooltip.enabled=!1,c.yaxis[0].tooltip.enabled=!1,c.chart.zoom.enabled=!1}return"bar"!==c.chart.type&&"rangeBar"!==c.chart.type||c.tooltip.shared&&"barWidth"===c.xaxis.crosshairs.width&&c.series.length>1&&(c.xaxis.crosshairs.width="tickWidth"),"candlestick"!==c.chart.type&&"boxPlot"!==c.chart.type||c.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(c.chart.type," chart is not supported.")),c.yaxis[0].reversed=!1),c}}]),le}(),Gn=function(){function le(){V(this,le)}return Ae(le,[{key:"initGlobalVars",value:function(o){o.series=[],o.seriesCandleO=[],o.seriesCandleH=[],o.seriesCandleM=[],o.seriesCandleL=[],o.seriesCandleC=[],o.seriesRangeStart=[],o.seriesRangeEnd=[],o.seriesRange=[],o.seriesPercent=[],o.seriesGoals=[],o.seriesX=[],o.seriesZ=[],o.seriesNames=[],o.seriesTotals=[],o.seriesLog=[],o.seriesColors=[],o.stackedSeriesTotals=[],o.seriesXvalues=[],o.seriesYvalues=[],o.labels=[],o.hasXaxisGroups=!1,o.groups=[],o.hasSeriesGroups=!1,o.seriesGroups=[],o.categoryLabels=[],o.timescaleLabels=[],o.noLabelsProvided=!1,o.resizeTimer=null,o.selectionResizeTimer=null,o.delayedElements=[],o.pointsArray=[],o.dataLabelsRects=[],o.isXNumeric=!1,o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1,o.isDataXYZ=!1,o.isMultiLineX=!1,o.isMultipleYAxis=!1,o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE,o.minYArr=[],o.maxYArr=[],o.maxX=-Number.MAX_VALUE,o.minX=Number.MAX_VALUE,o.initialMaxX=-Number.MAX_VALUE,o.initialMinX=Number.MAX_VALUE,o.maxDate=0,o.minDate=Number.MAX_VALUE,o.minZ=Number.MAX_VALUE,o.maxZ=-Number.MAX_VALUE,o.minXDiff=Number.MAX_VALUE,o.yAxisScale=[],o.xAxisScale=null,o.xAxisTicksPositions=[],o.yLabelsCoords=[],o.yTitleCoords=[],o.barPadForNumericAxis=0,o.padHorizontal=0,o.xRange=0,o.yRange=[],o.zRange=0,o.dataPoints=0,o.xTickAmount=0,o.multiAxisTickAmount=0}},{key:"globalVars",value:function(o){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:o.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.zoom&&o.chart.zoom.enabled,panEnabled:"pan"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.pan,selectionEnabled:"selection"===o.chart.toolbar.autoSelected&&o.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(o){var c=this.globalVars(o);return this.initGlobalVars(c),c.initialConfig=$e.extend({},o),c.initialSeries=$e.clone(o.series),c.lastXAxis=$e.clone(c.initialConfig.xaxis),c.lastYAxis=$e.clone(c.initialConfig.yaxis),c}}]),le}(),Qt=function(){function le(o){V(this,le),this.opts=o}return Ae(le,[{key:"init",value:function(){var o=new fn(this.opts).init({responsiveOverride:!1});return{config:o,globals:(new Gn).init(o)}}}]),le}(),Yi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.opts=null,this.seriesIndex=0}return Ae(le,[{key:"clippedImgArea",value:function(o){var c=this.w,h=c.config,_=parseInt(c.globals.gridWidth,10),b=parseInt(c.globals.gridHeight,10),x=_>b?_:b,A=o.image,I=0,F=0;void 0===o.width&&void 0===o.height?void 0!==h.fill.image.width&&void 0!==h.fill.image.height?(I=h.fill.image.width+1,F=h.fill.image.height):(I=x+1,F=x):(I=o.width,F=o.height);var U=document.createElementNS(c.globals.SVGNS,"pattern");at.setAttrs(U,{id:o.patternID,patternUnits:o.patternUnits?o.patternUnits:"userSpaceOnUse",width:I+"px",height:F+"px"});var $=document.createElementNS(c.globals.SVGNS,"image");U.appendChild($),$.setAttributeNS(window.SVG.xlink,"href",A),at.setAttrs($,{x:0,y:0,preserveAspectRatio:"none",width:I+"px",height:F+"px"}),$.style.opacity=o.opacity,c.globals.dom.elDefs.node.appendChild(U)}},{key:"getSeriesIndex",value:function(o){var c=this.w,h=c.config.chart.type;return this.seriesIndex=("bar"===h||"rangeBar"===h)&&c.config.plotOptions.bar.distributed||"heatmap"===h||"treemap"===h?o.seriesNumber:o.seriesNumber%c.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(o){var c=this.w;this.opts=o;var h,_,b,x=this.w.config;this.seriesIndex=this.getSeriesIndex(o);var A=this.getFillColors()[this.seriesIndex];void 0!==c.globals.seriesColors[this.seriesIndex]&&(A=c.globals.seriesColors[this.seriesIndex]),"function"==typeof A&&(A=A({seriesIndex:this.seriesIndex,dataPointIndex:o.dataPointIndex,value:o.value,w:c}));var I=o.fillType?o.fillType:this.getFillType(this.seriesIndex),F=Array.isArray(x.fill.opacity)?x.fill.opacity[this.seriesIndex]:x.fill.opacity;o.color&&(A=o.color),A||(A="#fff",console.warn("undefined color - ApexCharts"));var U=A;if(-1===A.indexOf("rgb")?A.length<9&&(U=$e.hexToRgba(A,F)):A.indexOf("rgba")>-1&&(F=$e.getOpacityFromRGBA(A)),o.opacity&&(F=o.opacity),"pattern"===I&&(_=this.handlePatternFill({fillConfig:o.fillConfig,patternFill:_,fillColor:A,fillOpacity:F,defaultColor:U})),"gradient"===I&&(b=this.handleGradientFill({fillConfig:o.fillConfig,fillColor:A,fillOpacity:F,i:this.seriesIndex})),"image"===I){var $=x.fill.image.src,q=o.patternID?o.patternID:"";this.clippedImgArea({opacity:F,image:Array.isArray($)?o.seriesNumber<$.length?$[o.seriesNumber]:$[0]:$,width:o.width?o.width:void 0,height:o.height?o.height:void 0,patternUnits:o.patternUnits,patternID:"pattern".concat(c.globals.cuid).concat(o.seriesNumber+1).concat(q)}),h="url(#pattern".concat(c.globals.cuid).concat(o.seriesNumber+1).concat(q,")")}else h="gradient"===I?b:"pattern"===I?_:U;return o.solid&&(h=U),h}},{key:"getFillType",value:function(o){var c=this.w;return Array.isArray(c.config.fill.type)?c.config.fill.type[o]:c.config.fill.type}},{key:"getFillColors",value:function(){var o=this.w,c=o.config,h=this.opts,_=[];return o.globals.comboCharts?"line"===o.config.series[this.seriesIndex].type?Array.isArray(o.globals.stroke.colors)?_=o.globals.stroke.colors:_.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?_=o.globals.fill.colors:_.push(o.globals.fill.colors):"line"===c.chart.type?Array.isArray(o.globals.stroke.colors)?_=o.globals.stroke.colors:_.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?_=o.globals.fill.colors:_.push(o.globals.fill.colors),void 0!==h.fillColors&&(_=[],Array.isArray(h.fillColors)?_=h.fillColors.slice():_.push(h.fillColors)),_}},{key:"handlePatternFill",value:function(o){var c=o.fillConfig,_=o.fillColor,b=o.fillOpacity,x=o.defaultColor,A=this.w.config.fill;c&&(A=c);var I=this.opts,F=new at(this.ctx),U=Array.isArray(A.pattern.strokeWidth)?A.pattern.strokeWidth[this.seriesIndex]:A.pattern.strokeWidth,$=_;return Array.isArray(A.pattern.style)?void 0!==A.pattern.style[I.seriesNumber]?F.drawPattern(A.pattern.style[I.seriesNumber],A.pattern.width,A.pattern.height,$,U,b):x:F.drawPattern(A.pattern.style,A.pattern.width,A.pattern.height,$,U,b)}},{key:"handleGradientFill",value:function(o){var c=o.fillColor,h=o.fillOpacity,_=o.fillConfig,b=o.i,x=this.w.config.fill;_&&(x=ze(ze({},x),_));var A,I=this.opts,F=new at(this.ctx),U=new $e,$=x.gradient.type,q=c,ie=void 0===x.gradient.opacityFrom?h:Array.isArray(x.gradient.opacityFrom)?x.gradient.opacityFrom[b]:x.gradient.opacityFrom;q.indexOf("rgba")>-1&&(ie=$e.getOpacityFromRGBA(q));var ue=void 0===x.gradient.opacityTo?h:Array.isArray(x.gradient.opacityTo)?x.gradient.opacityTo[b]:x.gradient.opacityTo;if(void 0===x.gradient.gradientToColors||0===x.gradient.gradientToColors.length)A=U.shadeColor("dark"===x.gradient.shade?-1*parseFloat(x.gradient.shadeIntensity):parseFloat(x.gradient.shadeIntensity),c.indexOf("rgb")>-1?$e.rgb2hex(c):c);else if(x.gradient.gradientToColors[I.seriesNumber]){var ge=x.gradient.gradientToColors[I.seriesNumber];A=ge,ge.indexOf("rgba")>-1&&(ue=$e.getOpacityFromRGBA(ge))}else A=c;if(x.gradient.gradientFrom&&(q=x.gradient.gradientFrom),x.gradient.gradientTo&&(A=x.gradient.gradientTo),x.gradient.inverseColors){var we=q;q=A,A=we}return q.indexOf("rgb")>-1&&(q=$e.rgb2hex(q)),A.indexOf("rgb")>-1&&(A=$e.rgb2hex(A)),F.drawGradient($,q,A,ie,ue,I.size,x.gradient.stops,x.gradient.colorStops,b)}}]),le}(),on=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"setGlobalMarkerSize",value:function(){var o=this.w;if(o.globals.markers.size=Array.isArray(o.config.markers.size)?o.config.markers.size:[o.config.markers.size],o.globals.markers.size.length>0){if(o.globals.markers.size.length<o.globals.series.length+1)for(var c=0;c<=o.globals.series.length;c++)void 0===o.globals.markers.size[c]&&o.globals.markers.size.push(o.globals.markers.size[0])}else o.globals.markers.size=o.config.series.map(function(h){return o.config.markers.size})}},{key:"plotChartMarkers",value:function(o,c,h,_){var b,x=arguments.length>4&&void 0!==arguments[4]&&arguments[4],A=this.w,I=c,F=o,U=null,$=new at(this.ctx),q=A.config.markers.discrete&&A.config.markers.discrete.length;if((A.globals.markers.size[c]>0||x||q)&&(U=$.group({class:x||q?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(A.globals.cuid,")")),Array.isArray(F.x))for(var ie=0;ie<F.x.length;ie++){var ue=h;1===h&&0===ie&&(ue=0),1===h&&1===ie&&(ue=1);var ge="apexcharts-marker";if("line"!==A.config.chart.type&&"area"!==A.config.chart.type||A.globals.comboCharts||A.config.tooltip.intersect||(ge+=" no-pointer-events"),(Array.isArray(A.config.markers.size)?A.globals.markers.size[c]>0:A.config.markers.size>0)||x||q){$e.isNumber(F.y[ie])?ge+=" w".concat($e.randomId()):ge="apexcharts-nullpoint";var we=this.getMarkerConfig({cssClass:ge,seriesIndex:c,dataPointIndex:ue});A.config.series[I].data[ue]&&(A.config.series[I].data[ue].fillColor&&(we.pointFillColor=A.config.series[I].data[ue].fillColor),A.config.series[I].data[ue].strokeColor&&(we.pointStrokeColor=A.config.series[I].data[ue].strokeColor)),_&&(we.pSize=_),(F.x[ie]<0||F.x[ie]>A.globals.gridWidth||F.y[ie]<-A.globals.markers.largestSize||F.y[ie]>A.globals.gridHeight+A.globals.markers.largestSize)&&(we.pSize=0),(b=$.drawMarker(F.x[ie],F.y[ie],we)).attr("rel",ue),b.attr("j",ue),b.attr("index",c),b.node.setAttribute("default-marker-size",we.pSize),new oi(this.ctx).setSelectionFilter(b,c,ue),this.addEvents(b),U&&U.add(b)}else void 0===A.globals.pointsArray[c]&&(A.globals.pointsArray[c]=[]),A.globals.pointsArray[c].push([F.x[ie],F.y[ie]])}return U}},{key:"getMarkerConfig",value:function(o){var c=o.cssClass,h=o.seriesIndex,_=o.dataPointIndex,b=void 0===_?null:_,x=o.finishRadius,A=void 0===x?null:x,I=this.w,F=this.getMarkerStyle(h),U=I.globals.markers.size[h],$=I.config.markers;return null!==b&&$.discrete.length&&$.discrete.map(function(q){q.seriesIndex===h&&q.dataPointIndex===b&&(F.pointStrokeColor=q.strokeColor,F.pointFillColor=q.fillColor,U=q.size,F.pointShape=q.shape)}),{pSize:null===A?U:A,pRadius:$.radius,width:Array.isArray($.width)?$.width[h]:$.width,height:Array.isArray($.height)?$.height[h]:$.height,pointStrokeWidth:Array.isArray($.strokeWidth)?$.strokeWidth[h]:$.strokeWidth,pointStrokeColor:F.pointStrokeColor,pointFillColor:F.pointFillColor,shape:F.pointShape||(Array.isArray($.shape)?$.shape[h]:$.shape),class:c,pointStrokeOpacity:Array.isArray($.strokeOpacity)?$.strokeOpacity[h]:$.strokeOpacity,pointStrokeDashArray:Array.isArray($.strokeDashArray)?$.strokeDashArray[h]:$.strokeDashArray,pointFillOpacity:Array.isArray($.fillOpacity)?$.fillOpacity[h]:$.fillOpacity,seriesIndex:h}}},{key:"addEvents",value:function(o){var c=this.w,h=new at(this.ctx);o.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this.ctx,o)),o.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this.ctx,o)),o.node.addEventListener("mousedown",h.pathMouseDown.bind(this.ctx,o)),o.node.addEventListener("click",c.config.markers.onClick),o.node.addEventListener("dblclick",c.config.markers.onDblClick),o.node.addEventListener("touchstart",h.pathMouseDown.bind(this.ctx,o),{passive:!0})}},{key:"getMarkerStyle",value:function(o){var c=this.w,h=c.globals.markers.colors,_=c.config.markers.strokeColor||c.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(_)?_[o]:_,pointFillColor:Array.isArray(h)?h[o]:h}}}]),le}(),Zn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Ae(le,[{key:"draw",value:function(o,c,h){var _=this.w,b=new at(this.ctx),x=h.realIndex,A=h.pointsPos,I=h.zRatio,F=h.elParent,U=b.group({class:"apexcharts-series-markers apexcharts-series-".concat(_.config.chart.type)});if(U.attr("clip-path","url(#gridRectMarkerMask".concat(_.globals.cuid,")")),Array.isArray(A.x))for(var $=0;$<A.x.length;$++){var q=c+1,ie=!0;0===c&&0===$&&(q=0),0===c&&1===$&&(q=1);var ue=0,ge=_.globals.markers.size[x];if(I!==1/0){var we=_.config.plotOptions.bubble;ge=_.globals.seriesZ[x][q],we.zScaling&&(ge/=I),we.minBubbleRadius&&ge<we.minBubbleRadius&&(ge=we.minBubbleRadius),we.maxBubbleRadius&&ge>we.maxBubbleRadius&&(ge=we.maxBubbleRadius)}_.config.chart.animations.enabled||(ue=ge);var Ee=A.y[$];if(ue=ue||0,null!==Ee&&void 0!==_.globals.series[x][q]||(ie=!1),ie){var N=this.drawPoint(A.x[$],Ee,ue,ge,x,q,c);U.add(N)}F.add(U)}}},{key:"drawPoint",value:function(o,c,h,_,b,x,A){var I=this.w,F=b,U=new ii(this.ctx),$=new oi(this.ctx),q=new Yi(this.ctx),ie=new on(this.ctx),ue=new at(this.ctx),ge=ie.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:F,dataPointIndex:x,finishRadius:"bubble"===I.config.chart.type||I.globals.comboCharts&&I.config.series[b]&&"bubble"===I.config.series[b].type?_:null});_=ge.pSize;var we,me=q.fillPath({seriesNumber:b,dataPointIndex:x,color:ge.pointFillColor,patternUnits:"objectBoundingBox",value:I.globals.series[b][A]});if("circle"===ge.shape?we=ue.drawCircle(h):"square"!==ge.shape&&"rect"!==ge.shape||(we=ue.drawRect(0,0,ge.width-ge.pointStrokeWidth/2,ge.height-ge.pointStrokeWidth/2,ge.pRadius)),I.config.series[F].data[x]&&I.config.series[F].data[x].fillColor&&(me=I.config.series[F].data[x].fillColor),we.attr({x:o-ge.width/2-ge.pointStrokeWidth/2,y:c-ge.height/2-ge.pointStrokeWidth/2,cx:o,cy:c,fill:me,"fill-opacity":ge.pointFillOpacity,stroke:ge.pointStrokeColor,r:_,"stroke-width":ge.pointStrokeWidth,"stroke-dasharray":ge.pointStrokeDashArray,"stroke-opacity":ge.pointStrokeOpacity}),I.config.chart.dropShadow.enabled&&$.dropShadow(we,I.config.chart.dropShadow,b),!this.initialAnim||I.globals.dataChanged||I.globals.resized?I.globals.animationEnded=!0:U.animateMarker(we,0,"circle"===ge.shape?_:{width:ge.width,height:ge.height},I.config.chart.animations.speed,I.globals.easing,function(){window.setTimeout(function(){U.animationCompleted(we)},100)}),I.globals.dataChanged&&"circle"===ge.shape)if(this.dynamicAnim){var Q,pe,xe,Le,qe=I.config.chart.animations.dynamicAnimation.speed;null!=(Le=I.globals.previousPaths[b]&&I.globals.previousPaths[b][A])&&(Q=Le.x,pe=Le.y,xe=void 0!==Le.r?Le.r:_);for(var kt=0;kt<I.globals.collapsedSeries.length;kt++)I.globals.collapsedSeries[kt].index===b&&(qe=1,_=0);0===o&&0===c&&(_=0),U.animateCircle(we,{cx:Q,cy:pe,r:xe},{cx:o,cy:c,r:_},qe,I.globals.easing)}else we.attr({r:_});return we.attr({rel:x,j:x,index:b,"default-marker-size":_}),$.setSelectionFilter(we,b,x),ie.addEvents(we),we.node.classList.add("apexcharts-marker"),we}},{key:"centerTextInBubble",value:function(o){return{y:o+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),le}(),Nn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"dataLabelsCorrection",value:function(o,c,h,_,b,x,A){var I=this.w,F=!1,U=new at(this.ctx).getTextRects(h,A),$=U.width,q=U.height;if(c<0&&(c=0),c>I.globals.gridHeight+q&&(c=I.globals.gridHeight+q/2),void 0===I.globals.dataLabelsRects[_]&&(I.globals.dataLabelsRects[_]=[]),I.globals.dataLabelsRects[_].push({x:o,y:c,width:$,height:q}),void 0!==I.globals.dataLabelsRects[_][I.globals.dataLabelsRects[_].length-2]){var ge=I.globals.dataLabelsRects[_][void 0!==I.globals.lastDrawnDataLabelsIndexes[_]?I.globals.lastDrawnDataLabelsIndexes[_][I.globals.lastDrawnDataLabelsIndexes[_].length-1]:0];(o>ge.x+ge.width||c>ge.y+ge.height||c+q<ge.y||o+$<ge.x)&&(F=!0)}return(0===b||x)&&(F=!0),{x:o,y:c,textRects:U,drawnextLabel:F}}},{key:"drawDataLabel",value:function(o){var c=this,h=o.type,_=o.pos,b=o.i,x=o.j,A=o.isRangeStart,I=o.strokeWidth,F=void 0===I?2:I,U=this.w,$=new at(this.ctx),q=U.config.dataLabels,ie=0,ue=0,ge=x,we=null;if(-1!==U.globals.collapsedSeriesIndices.indexOf(b)||!q.enabled||!Array.isArray(_.x))return we;we=$.group({class:"apexcharts-data-labels"});for(var me=0;me<_.x.length;me++)if(ie=_.x[me]+q.offsetX,ue=_.y[me]+q.offsetY+F,!isNaN(ie)){1===x&&0===me&&(ge=0),1===x&&1===me&&(ge=1);var Ee=U.globals.series[b][ge];"rangeArea"===h&&(Ee=A?U.globals.seriesRangeStart[b][ge]:U.globals.seriesRangeEnd[b][ge]);var N="",Q=function(pe){return U.config.dataLabels.formatter(pe,{ctx:c.ctx,seriesIndex:b,dataPointIndex:ge,w:U})};"bubble"===U.config.chart.type?(N=Q(Ee=U.globals.seriesZ[b][ge]),ue=_.y[me],ue=new Zn(this.ctx).centerTextInBubble(ue,b,ge).y):void 0!==Ee&&(N=Q(Ee)),this.plotDataLabelsText({x:ie,y:ue,text:N,i:b,j:ge,parent:we,offsetCorrection:!0,dataLabelsConfig:U.config.dataLabels})}return we}},{key:"plotDataLabelsText",value:function(o){var c=this.w,h=new at(this.ctx),_=o.x,b=o.y,x=o.i,A=o.j,I=o.text,F=o.textAnchor,U=o.fontSize,$=o.parent,q=o.dataLabelsConfig,ie=o.color,ue=o.alwaysDrawDataLabel,ge=o.offsetCorrection;if(!(Array.isArray(c.config.dataLabels.enabledOnSeries)&&c.config.dataLabels.enabledOnSeries.indexOf(x)<0)){var we={x:_,y:b,drawnextLabel:!0,textRects:null};ge&&(we=this.dataLabelsCorrection(_,b,I,x,A,ue,parseInt(q.style.fontSize,10))),c.globals.zoomed||(_=we.x,b=we.y),we.textRects&&(_<-20-we.textRects.width||_>c.globals.gridWidth+we.textRects.width+30)&&(I="");var me=c.globals.dataLabels.style.colors[x];(("bar"===c.config.chart.type||"rangeBar"===c.config.chart.type)&&c.config.plotOptions.bar.distributed||c.config.dataLabels.distributed)&&(me=c.globals.dataLabels.style.colors[A]),"function"==typeof me&&(me=me({series:c.globals.series,seriesIndex:x,dataPointIndex:A,w:c})),ie&&(me=ie);var Ee=q.offsetX,N=q.offsetY;if("bar"!==c.config.chart.type&&"rangeBar"!==c.config.chart.type||(Ee=0,N=0),we.drawnextLabel){var Q=h.drawText({width:100,height:parseInt(q.style.fontSize,10),x:_+Ee,y:b+N,foreColor:me,textAnchor:F||q.textAnchor,text:I,fontSize:U||q.style.fontSize,fontFamily:q.style.fontFamily,fontWeight:q.style.fontWeight||"normal"});if(Q.attr({class:"apexcharts-datalabel",cx:_,cy:b}),q.dropShadow.enabled){var pe=q.dropShadow;new oi(this.ctx).dropShadow(Q,pe)}$.add(Q),void 0===c.globals.lastDrawnDataLabelsIndexes[x]&&(c.globals.lastDrawnDataLabelsIndexes[x]=[]),c.globals.lastDrawnDataLabelsIndexes[x].push(A)}}}},{key:"addBackgroundToDataLabel",value:function(o,c){var h=this.w,_=h.config.dataLabels.background,b=_.padding,x=_.padding/2,A=c.width,I=c.height,F=new at(this.ctx).drawRect(c.x-b,c.y-x/2,A+2*b,I+x,_.borderRadius,"transparent"===h.config.chart.background?"#fff":h.config.chart.background,_.opacity,_.borderWidth,_.borderColor);return _.dropShadow.enabled&&new oi(this.ctx).dropShadow(F,_.dropShadow),F}},{key:"dataLabelsBackground",value:function(){var o=this.w;if("bubble"!==o.config.chart.type)for(var c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),h=0;h<c.length;h++){var _=c[h],b=_.getBBox(),x=null;if(b.width&&b.height&&(x=this.addBackgroundToDataLabel(_,b)),x){_.parentNode.insertBefore(x.node,_);var A=_.getAttribute("fill");!o.config.chart.animations.enabled||o.globals.resized||o.globals.dataChanged?x.attr({fill:A}):x.animate().attr({fill:A}),_.setAttribute("fill",o.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var o=this.w,c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),h=o.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),_=0;_<c.length;_++)h&&h.insertBefore(c[_],h.nextSibling)}}]),le}(),Dn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.legendInactiveClass="legend-mouseover-inactive"}return Ae(le,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(o){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat($e.escapeString(o),"']"))}},{key:"isSeriesHidden",value:function(o){var c=this.getSeriesByName(o),h=parseInt(c.getAttribute("data:realIndex"),10);return{isHidden:c.classList.contains("apexcharts-series-collapsed"),realIndex:h}}},{key:"addCollapsedClassToSeries",value:function(o,c){var h=this.w;function _(b){for(var x=0;x<b.length;x++)b[x].index===c&&o.node.classList.add("apexcharts-series-collapsed")}_(h.globals.collapsedSeries),_(h.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(o){var c=this.isSeriesHidden(o);return this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,c.isHidden),c.isHidden}},{key:"showSeries",value:function(o){var c=this.isSeriesHidden(o);c.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,!0)}},{key:"hideSeries",value:function(o){var c=this.isSeriesHidden(o);c.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(c.realIndex,!1)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=this.w,b=$e.clone(_.globals.initialSeries);_.globals.previousPaths=[],h?(_.globals.collapsedSeries=[],_.globals.ancillaryCollapsedSeries=[],_.globals.collapsedSeriesIndices=[],_.globals.ancillaryCollapsedSeriesIndices=[]):b=this.emptyCollapsedSeries(b),_.config.series=b,o&&(c&&(_.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(o){for(var c=this.w,h=0;h<o.length;h++)c.globals.collapsedSeriesIndices.indexOf(h)>-1&&(o[h].data=[]);return o}},{key:"toggleSeriesOnHover",value:function(o,c){var h=this.w;c||(c=o.target);var _=h.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===o.type){var b=parseInt(c.getAttribute("rel"),10)-1,x=null,A=null;h.globals.axisCharts||"radialBar"===h.config.chart.type?h.globals.axisCharts?(x=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(b,"']")),A=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(b,"']"))):x=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"']")):x=h.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"'] path"));for(var I=0;I<_.length;I++)_[I].classList.add(this.legendInactiveClass);null!==x&&(h.globals.axisCharts||x.parentNode.classList.remove(this.legendInactiveClass),x.classList.remove(this.legendInactiveClass),null!==A&&A.classList.remove(this.legendInactiveClass))}else if("mouseout"===o.type)for(var F=0;F<_.length;F++)_[F].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(o,c){var h=this,_=this.w,b=_.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),x=function(I){for(var F=0;F<b.length;F++)b[F].classList[I](h.legendInactiveClass)};if("mousemove"===o.type){var A=parseInt(c.getAttribute("rel"),10)-1;x("add"),function(I){for(var F=0;F<b.length;F++){var U=parseInt(b[F].getAttribute("val"),10);U>=I.from&&U<=I.to&&b[F].classList.remove(h.legendInactiveClass)}}(_.config.plotOptions.heatmap.colorScale.ranges[A])}else"mouseout"===o.type&&x("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],h=this.w,_=0;if(h.config.series.length>1)for(var b=h.config.series.map(function(A,I){return A.data&&A.data.length>0&&-1===h.globals.collapsedSeriesIndices.indexOf(I)&&(!h.globals.comboCharts||0===c.length||c.length&&c.indexOf(h.config.series[I].type)>-1)?I:-1}),x="asc"===o?0:b.length-1;"asc"===o?x<b.length:x>=0;"asc"===o?x++:x--)if(-1!==b[x]){_=b[x];break}return _}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(o,c){return"bar"===o.type||"column"===o.type?c:-1}).filter(function(o){return-1!==o}):this.w.config.series.map(function(o,c){return c})}},{key:"getPreviousPaths",value:function(){var o=this.w;function c(x,A,I){for(var F=x[A].childNodes,U={type:I,paths:[],realIndex:x[A].getAttribute("data:realIndex")},$=0;$<F.length;$++)if(F[$].hasAttribute("pathTo")){var q=F[$].getAttribute("pathTo");U.paths.push({d:q})}o.globals.previousPaths.push(U)}o.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(x){for(var I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(x,"-series .apexcharts-series")),F=0;F<I.length;F++)c(I,F,x)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var h=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series"));if(h.length>0)for(var _=function(x){for(var A=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(x,"'] rect")),I=[],F=function($){var q=function(ue){return A[$].getAttribute(ue)},ie={x:parseFloat(q("x")),y:parseFloat(q("y")),width:parseFloat(q("width")),height:parseFloat(q("height"))};I.push({rect:ie,color:A[$].getAttribute("color")})},U=0;U<A.length;U++)F(U);o.globals.previousPaths.push(I)},b=0;b<h.length;b++)_(b);o.globals.axisCharts||(o.globals.previousPaths=o.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(o){var c=this.w,h=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series"));if(h.length>0)for(var _=0;_<h.length;_++){for(var b=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series[data\\:realIndex='").concat(_,"'] circle")),x=[],A=0;A<b.length;A++)x.push({x:b[A].getAttribute("cx"),y:b[A].getAttribute("cy"),r:b[A].getAttribute("r")});c.globals.previousPaths.push(x)}}},{key:"clearPreviousPaths",value:function(){var o=this.w;o.globals.previousPaths=[],o.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var o=this.w,c=o.config.noData,h=new at(this.ctx),_=o.globals.svgWidth/2,b=o.globals.svgHeight/2,x="middle";if(o.globals.noData=!0,o.globals.animationEnded=!0,"left"===c.align?(_=10,x="start"):"right"===c.align&&(_=o.globals.svgWidth-10,x="end"),"top"===c.verticalAlign?b=50:"bottom"===c.verticalAlign&&(b=o.globals.svgHeight-50),_+=c.offsetX,b=b+parseInt(c.style.fontSize,10)+2+c.offsetY,void 0!==c.text&&""!==c.text){var A=h.drawText({x:_,y:b,text:c.text,textAnchor:x,fontSize:c.style.fontSize,fontFamily:c.style.fontFamily,foreColor:c.style.color,opacity:1,class:"apexcharts-text-nodata"});o.globals.dom.Paper.add(A)}}},{key:"setNullSeriesToZeroValues",value:function(o){for(var c=this.w,h=0;h<o.length;h++)if(0===o[h].length)for(var _=0;_<o[c.globals.maxValsInArrayIndex].length;_++)o[h].push(0);return o}},{key:"hasAllSeriesEqualX",value:function(){for(var o=!0,c=this.w,h=this.filteredSeriesX(),_=0;_<h.length-1;_++)if(h[_][0]!==h[_+1][0]){o=!1;break}return c.globals.allSeriesHasEqualX=o,o}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(c){return c.length>0?c:[]})}}]),le}(),ji=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new ri(this.ctx)}return Ae(le,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var o=this.w.config.series.slice(),c=new Dn(this.ctx);if(this.activeSeriesIndex=c.getActiveConfigSeriesIndex(),void 0!==o[this.activeSeriesIndex].data&&o[this.activeSeriesIndex].data.length>0&&null!==o[this.activeSeriesIndex].data[0]&&void 0!==o[this.activeSeriesIndex].data[0].x&&null!==o[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var o=this.w.config.series.slice(),c=new Dn(this.ctx);if(this.activeSeriesIndex=c.getActiveConfigSeriesIndex(),void 0!==o[this.activeSeriesIndex].data&&o[this.activeSeriesIndex].data.length>0&&null!=o[this.activeSeriesIndex].data[0]&&o[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(o,c){for(var h=this.w.config,_=this.w.globals,b="boxPlot"===h.chart.type||"boxPlot"===h.series[c].type,x=0;x<o[c].data.length;x++)if(void 0!==o[c].data[x][1]&&(Array.isArray(o[c].data[x][1])&&4===o[c].data[x][1].length&&!b?this.twoDSeries.push($e.parseNumber(o[c].data[x][1][3])):this.twoDSeries.push($e.parseNumber(o[c].data[x].length>=5?o[c].data[x][4]:o[c].data[x][1])),_.dataFormatXNumeric=!0),"datetime"===h.xaxis.type){var A=new Date(o[c].data[x][0]);A=new Date(A).getTime(),this.twoDSeriesX.push(A)}else this.twoDSeriesX.push(o[c].data[x][0]);for(var I=0;I<o[c].data.length;I++)void 0!==o[c].data[I][2]&&(this.threeDSeries.push(o[c].data[I][2]),_.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(o,c){var h=this.w.config,_=this.w.globals,b=new vi(this.ctx),x=c;_.collapsedSeriesIndices.indexOf(c)>-1&&(x=this.activeSeriesIndex);for(var A=0;A<o[c].data.length;A++)void 0!==o[c].data[A].y&&(Array.isArray(o[c].data[A].y)?this.twoDSeries.push($e.parseNumber(o[c].data[A].y[o[c].data[A].y.length-1])):this.twoDSeries.push($e.parseNumber(o[c].data[A].y))),void 0!==o[c].data[A].goals&&Array.isArray(o[c].data[A].goals)?(void 0===this.seriesGoals[c]&&(this.seriesGoals[c]=[]),this.seriesGoals[c].push(o[c].data[A].goals)):(void 0===this.seriesGoals[c]&&(this.seriesGoals[c]=[]),this.seriesGoals[c].push(null));for(var I=0;I<o[x].data.length;I++){var F="string"==typeof o[x].data[I].x,U=Array.isArray(o[x].data[I].x),$=!U&&!!b.isValidDate(o[x].data[I].x);F||$?F||h.xaxis.convertedCatToNumeric?"datetime"!==h.xaxis.type||_.isBarHorizontal&&_.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[x].data[I].x),isNaN(o[x].data[I].x)||"category"===this.w.config.xaxis.type||"string"==typeof o[x].data[I].x||(_.isXNumeric=!0)):this.twoDSeriesX.push(b.parseDate(o[x].data[I].x)):"datetime"===h.xaxis.type?this.twoDSeriesX.push(b.parseDate(o[x].data[I].x.toString())):(_.dataFormatXNumeric=!0,_.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(o[x].data[I].x))):U?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[x].data[I].x)):(_.isXNumeric=!0,_.dataFormatXNumeric=!0,this.twoDSeriesX.push(o[x].data[I].x))}if(o[c].data[0]&&void 0!==o[c].data[0].z){for(var ie=0;ie<o[c].data.length;ie++)this.threeDSeries.push(o[c].data[ie].z);_.isDataXYZ=!0}}},{key:"handleRangeData",value:function(o,c){var h=this.w.globals,_={};return this.isFormat2DArray()?_=this.handleRangeDataFormat("array",o,c):this.isFormatXY()&&(_=this.handleRangeDataFormat("xy",o,c)),h.seriesRangeStart.push(void 0===_.start?[]:_.start),h.seriesRangeEnd.push(void 0===_.end?[]:_.end),h.seriesRange.push(_.rangeUniques),h.seriesRange.forEach(function(b,x){b&&b.forEach(function(A,I){A.y.forEach(function(F,U){for(var $=0;$<A.y.length;$++)U!==$&&F.y1<=A.y[$].y2&&A.y[$].y1<=F.y2&&(A.overlaps.indexOf(F.rangeName)<0&&A.overlaps.push(F.rangeName),A.overlaps.indexOf(A.y[$].rangeName)<0&&A.overlaps.push(A.y[$].rangeName))})})}),_}},{key:"handleCandleStickBoxData",value:function(o,c){var h=this.w.globals,_={};return this.isFormat2DArray()?_=this.handleCandleStickBoxDataFormat("array",o,c):this.isFormatXY()&&(_=this.handleCandleStickBoxDataFormat("xy",o,c)),h.seriesCandleO[c]=_.o,h.seriesCandleH[c]=_.h,h.seriesCandleM[c]=_.m,h.seriesCandleL[c]=_.l,h.seriesCandleC[c]=_.c,_}},{key:"handleRangeDataFormat",value:function(o,c,h){var _=[],b=[],x=c[h].data.filter(function(U,$,q){return $===q.findIndex(function(ie){return ie.x===U.x})}).map(function(U,$){return{x:U.x,overlaps:[],y:[]}});if("array"===o)for(var A=0;A<c[h].data.length;A++)Array.isArray(c[h].data[A])?(_.push(c[h].data[A][1][0]),b.push(c[h].data[A][1][1])):(_.push(c[h].data[A]),b.push(c[h].data[A]));else if("xy"===o)for(var I=function(U){var $=Array.isArray(c[h].data[U].y),q=$e.randomId(),ie=c[h].data[U].x,ue={y1:$?c[h].data[U].y[0]:c[h].data[U].y,y2:$?c[h].data[U].y[1]:c[h].data[U].y,rangeName:q};c[h].data[U].rangeName=q;var ge=x.findIndex(function(we){return we.x===ie});x[ge].y.push(ue),_.push(ue.y1),b.push(ue.y2)},F=0;F<c[h].data.length;F++)I(F);return{start:_,end:b,rangeUniques:x}}},{key:"handleCandleStickBoxDataFormat",value:function(o,c,h){var _=this.w,b="boxPlot"===_.config.chart.type||"boxPlot"===_.config.series[h].type,x=[],A=[],I=[],F=[],U=[];if("array"===o)if(b&&6===c[h].data[0].length||!b&&5===c[h].data[0].length)for(var $=0;$<c[h].data.length;$++)x.push(c[h].data[$][1]),A.push(c[h].data[$][2]),b?(I.push(c[h].data[$][3]),F.push(c[h].data[$][4]),U.push(c[h].data[$][5])):(F.push(c[h].data[$][3]),U.push(c[h].data[$][4]));else for(var q=0;q<c[h].data.length;q++)Array.isArray(c[h].data[q][1])&&(x.push(c[h].data[q][1][0]),A.push(c[h].data[q][1][1]),b?(I.push(c[h].data[q][1][2]),F.push(c[h].data[q][1][3]),U.push(c[h].data[q][1][4])):(F.push(c[h].data[q][1][2]),U.push(c[h].data[q][1][3])));else if("xy"===o)for(var ie=0;ie<c[h].data.length;ie++)Array.isArray(c[h].data[ie].y)&&(x.push(c[h].data[ie].y[0]),A.push(c[h].data[ie].y[1]),b?(I.push(c[h].data[ie].y[2]),F.push(c[h].data[ie].y[3]),U.push(c[h].data[ie].y[4])):(F.push(c[h].data[ie].y[2]),U.push(c[h].data[ie].y[3])));return{o:x,h:A,m:I,l:F,c:U}}},{key:"parseDataAxisCharts",value:function(o){var c,h=this,b=this.w.config,x=this.w.globals,A=new vi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),I=b.labels.length>0?b.labels.slice():b.xaxis.categories.slice();if(x.isRangeBar="rangeBar"===b.chart.type&&x.isBarHorizontal,x.hasXaxisGroups="category"===b.xaxis.type&&b.xaxis.group.groups.length>0,x.hasXaxisGroups&&(x.groups=b.xaxis.group.groups),x.hasSeriesGroups=null===(c=o[0])||void 0===c?void 0:c.group,x.hasSeriesGroups){var F=[],U=ot(new Set(o.map(function(ue){return ue.group})));o.forEach(function(ue,ge){var we=U.indexOf(ue.group);F[we]||(F[we]=[]),F[we].push(ue.name)}),x.seriesGroups=F}for(var $=function(){for(var ue=0;ue<I.length;ue++)if("string"==typeof I[ue]){if(!A.isValidDate(I[ue]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");h.twoDSeriesX.push(A.parseDate(I[ue]))}else h.twoDSeriesX.push(I[ue])},q=0;q<o.length;q++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===o[q].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==b.chart.type&&"rangeArea"!==b.chart.type&&"rangeBar"!==o[q].type&&"rangeArea"!==o[q].type||(x.isRangeData=!0,"rangeBar"!==b.chart.type&&"rangeArea"!==b.chart.type||this.handleRangeData(o,q)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(o,q):this.isFormatXY()&&this.handleFormatXY(o,q),"candlestick"!==b.chart.type&&"candlestick"!==o[q].type&&"boxPlot"!==b.chart.type&&"boxPlot"!==o[q].type||this.handleCandleStickBoxData(o,q),x.series.push(this.twoDSeries),x.labels.push(this.twoDSeriesX),x.seriesX.push(this.twoDSeriesX),x.seriesGoals=this.seriesGoals,q!==this.activeSeriesIndex||this.fallbackToCategory||(x.isXNumeric=!0);else{"datetime"===b.xaxis.type?(x.isXNumeric=!0,$(),x.seriesX.push(this.twoDSeriesX)):"numeric"===b.xaxis.type&&(x.isXNumeric=!0,I.length>0&&(this.twoDSeriesX=I,x.seriesX.push(this.twoDSeriesX))),x.labels.push(this.twoDSeriesX);var ie=o[q].data.map(function(ue){return $e.parseNumber(ue)});x.series.push(ie)}x.seriesZ.push(this.threeDSeries),x.seriesNames.push(void 0!==o[q].name?o[q].name:"series-"+parseInt(q+1,10)),x.seriesColors.push(void 0!==o[q].color?o[q].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(o){var c=this.w.globals,h=this.w.config;c.series=o.slice(),c.seriesNames=h.labels.slice();for(var _=0;_<c.series.length;_++)void 0===c.seriesNames[_]&&c.seriesNames.push("series-"+(_+1));return this.w}},{key:"handleExternalLabelsData",value:function(o){var c=this.w.config,h=this.w.globals;c.xaxis.categories.length>0?h.labels=c.xaxis.categories:c.labels.length>0?h.labels=c.labels.slice():this.fallbackToCategory?(h.labels=h.labels[0],h.seriesRange.length&&(h.seriesRange.map(function(_){_.forEach(function(b){h.labels.indexOf(b.x)<0&&b.x&&h.labels.push(b.x)})}),h.labels=Array.from(new Set(h.labels.map(JSON.stringify)),JSON.parse)),c.xaxis.convertedCatToNumeric&&(new bn(c).convertCatToNumericXaxis(c,this.ctx,h.seriesX[0]),this._generateExternalLabels(o))):this._generateExternalLabels(o)}},{key:"_generateExternalLabels",value:function(o){var c=this.w.globals,h=this.w.config,_=[];if(c.axisCharts){if(c.series.length>0)if(this.isFormatXY())for(var b=h.series.map(function($,q){return $.data.filter(function(ie,ue,ge){return ge.findIndex(function(we){return we.x===ie.x})===ue})}),x=b.reduce(function($,q,ie,ue){return ue[$].length>q.length?$:ie},0),A=0;A<b[x].length;A++)_.push(A+1);else for(var I=0;I<c.series[c.maxValsInArrayIndex].length;I++)_.push(I+1);c.seriesX=[];for(var F=0;F<o.length;F++)c.seriesX.push(_);this.w.globals.isBarHorizontal||(c.isXNumeric=!0)}if(0===_.length){_=c.axisCharts?[]:c.series.map(function($,q){return q+1});for(var U=0;U<o.length;U++)c.seriesX.push(_)}c.labels=_,h.xaxis.convertedCatToNumeric&&(c.categoryLabels=_.map(function($){return h.xaxis.labels.formatter($)})),c.noLabelsProvided=!0}},{key:"parseData",value:function(o){var c=this.w,h=c.config,_=c.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),_.axisCharts?(this.parseDataAxisCharts(o),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(o),h.chart.stacked){var b=new Dn(this.ctx);_.series=b.setNullSeriesToZeroValues(_.series)}this.coreUtils.getSeriesTotals(),_.axisCharts&&(_.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),_.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),_.dataFormatXNumeric||_.isXNumeric&&("numeric"!==h.xaxis.type||0!==h.labels.length||0!==h.xaxis.categories.length)||this.handleExternalLabelsData(o);for(var x=this.coreUtils.getCategoryLabels(_.labels),A=0;A<x.length;A++)if(Array.isArray(x[A])){_.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var o=this.w,c=[];o.globals.seriesYAxisMap.forEach(function(h,_){var b=0;h.forEach(function(x){-1!==o.globals.collapsedSeriesIndices.indexOf(x)&&b++}),b>0&&b==h.length&&c.push(_)}),o.globals.ignoreYAxisIndexes=c.map(function(h){return h})}}]),le}(),Mr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"getLabel",value:function(o,c,h,_){var we,me,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",A=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],I=this.w,F=void 0===o[_]?"":o[_],U=F,$=I.globals.xLabelFormatter,q=I.config.xaxis.labels.formatter,ie=!1,ue=new Ei(this.ctx);A&&(U=ue.xLabelFormat($,F,F,{i:_,dateFormatter:new vi(this.ctx).formatDate,w:I}),void 0!==q&&(U=q(F,o[_],{i:_,dateFormatter:new vi(this.ctx).formatDate,w:I}))),c.length>0?(we=c[_].unit,me=null,c.forEach(function(pe){"month"===pe.unit?me="year":"day"===pe.unit?me="month":"hour"===pe.unit?me="day":"minute"===pe.unit&&(me="hour")}),ie=me===we,h=c[_].position,U=c[_].value):"datetime"===I.config.xaxis.type&&void 0===q&&(U=""),void 0===U&&(U=""),U=Array.isArray(U)?U:U.toString();var N,Ee=new at(this.ctx);N=I.globals.rotateXLabels&&A?Ee.getTextRects(U,parseInt(x,10),null,"rotate(".concat(I.config.xaxis.labels.rotate," 0 0)"),!1):Ee.getTextRects(U,parseInt(x,10));var Q=!I.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(U)&&("NaN"===String(U)||b.indexOf(U)>=0&&Q)&&(U=""),{x:h,text:U,textRect:N,isBold:ie}}},{key:"checkLabelBasedOnTickamount",value:function(o,c,h){var _=this.w,b=_.config.xaxis.tickAmount;return"dataPoints"===b&&(b=Math.round(_.globals.gridWidth/120)),b>h||o%Math.round(h/(b+1))==0||(c.text=""),c}},{key:"checkForOverflowingLabels",value:function(o,c,h,_,b){var x=this.w;if(0===o&&x.globals.skipFirstTimelinelabel&&(c.text=""),o===h-1&&x.globals.skipLastTimelinelabel&&(c.text=""),x.config.xaxis.labels.hideOverlappingLabels&&_.length>0){var A=b[b.length-1];c.x<A.textRect.width/(x.globals.rotateXLabels?Math.abs(x.config.xaxis.labels.rotate)/12:1.01)+A.x&&(c.text="")}return c}},{key:"checkForReversedLabels",value:function(o,c){var h=this.w;return h.config.yaxis[o]&&h.config.yaxis[o].reversed&&c.reverse(),c}},{key:"isYAxisHidden",value:function(o){var c=this.w,h=new ri(this.ctx),_=!c.globals.seriesYAxisMap[o].some(function(b){return-1===c.globals.collapsedSeriesIndices.indexOf(b)});return!c.config.yaxis[o].show||!c.config.yaxis[o].showForNullSeries&&h.isSeriesNull(o)&&_}},{key:"getYAxisForeColor",value:function(o,c){var h=this.w;return Array.isArray(o)&&h.globals.yAxisScale[c]&&this.ctx.theme.pushExtraColors(o,h.globals.yAxisScale[c].result.length,!1),o}},{key:"drawYAxisTicks",value:function(o,c,h,_,b,x,A){var I=this.w,F=new at(this.ctx),U=I.globals.translateY;if(_.show&&c>0){!0===I.config.yaxis[b].opposite&&(o+=_.width);for(var $=c;$>=0;$--){var q=U+c/10+I.config.yaxis[b].labels.offsetY-1;I.globals.isBarHorizontal&&(q=x*$),"heatmap"===I.config.chart.type&&(q+=x/2);var ie=F.drawLine(o+h.offsetX-_.width+_.offsetX,q+_.offsetY,o+h.offsetX+_.offsetX,q+_.offsetY,_.color);A.add(ie),U+=x}}}}]),le}(),or=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"scaleSvgNode",value:function(o,c){var h=parseFloat(o.getAttributeNS(null,"width")),_=parseFloat(o.getAttributeNS(null,"height"));o.setAttributeNS(null,"width",h*c),o.setAttributeNS(null,"height",_*c),o.setAttributeNS(null,"viewBox","0 0 "+h+" "+_)}},{key:"fixSvgStringForIe11",value:function(o){if(!$e.isIE11())return o.replace(/&nbsp;/g,"&#160;");var c=0,h=o.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(_){return 2==++c?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':_});return(h=h.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(o){null==o&&(o=1);var c=this.w.globals.dom.Paper.svg();if(1!==o){var h=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(h,o),c=(new XMLSerializer).serializeToString(h)}return this.fixSvgStringForIe11(c)}},{key:"cleanup",value:function(){var o=this.w,c=o.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),h=o.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(_,function(b){b.setAttribute("width",0)}),c&&c[0]&&(c[0].setAttribute("x",-500),c[0].setAttribute("x1",-500),c[0].setAttribute("x2",-500)),h&&h[0]&&(h[0].setAttribute("y",-100),h[0].setAttribute("y1",-100),h[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var o=this.getSvgString(),c=new Blob([o],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(c)}},{key:"dataURI",value:function(o){var c=this;return new Promise(function(h){var _=c.w,b=o?o.scale||o.width/_.globals.svgWidth:1;c.cleanup();var x=document.createElement("canvas");x.width=_.globals.svgWidth*b,x.height=parseInt(_.globals.dom.elWrap.style.height,10)*b;var A="transparent"===_.config.chart.background?"#fff":_.config.chart.background,I=x.getContext("2d");I.fillStyle=A,I.fillRect(0,0,x.width*b,x.height*b);var F=c.getSvgString(b);if(window.canvg&&$e.isIE11()){var U=window.canvg.Canvg.fromString(I,F,{ignoreClear:!0,ignoreDimensions:!0});U.start();var $=x.msToBlob();U.stop(),h({blob:$})}else{var q="data:image/svg+xml,"+encodeURIComponent(F),ie=new Image;ie.crossOrigin="anonymous",ie.onload=function(){if(I.drawImage(ie,0,0),x.msToBlob){var ue=x.msToBlob();h({blob:ue})}else{var ge=x.toDataURL("image/png");h({imgURI:ge})}},ie.src=q}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var o=this;this.dataURI().then(function(c){var h=c.imgURI,_=c.blob;_?navigator.msSaveOrOpenBlob(_,o.w.globals.chartID+".png"):o.triggerDownload(h,o.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(o){var c=this,h=o.series,_=o.fileName,b=o.columnDelimiter,x=void 0===b?",":b,A=o.lineDelimiter,I=void 0===A?"\n":A,F=this.w;h||(h=F.config.series);var U,$,q=[],ie=[],ue="",ge=F.globals.series.map(function(xe,Le){return-1===F.globals.collapsedSeriesIndices.indexOf(Le)?xe:[]}),we=function(xe){return"datetime"===F.config.xaxis.type&&String(xe).length>=10},me=Math.max.apply(Math,ot(h.map(function(xe){return xe.data?xe.data.length:0}))),Ee=new ji(this.ctx),N=new Mr(this.ctx),Q=function(xe){var Le="";if(F.globals.axisCharts){if("category"===F.config.xaxis.type||F.config.xaxis.convertedCatToNumeric)if(F.globals.isBarHorizontal){var qe=F.globals.yLabelFormatters[0],kt=new Dn(c.ctx).getActiveConfigSeriesIndex();Le=qe(F.globals.labels[xe],{seriesIndex:kt,dataPointIndex:xe,w:F})}else Le=N.getLabel(F.globals.labels,F.globals.timescaleLabels,0,xe).text;"datetime"===F.config.xaxis.type&&(F.config.xaxis.categories.length?Le=F.config.xaxis.categories[xe]:F.config.labels.length&&(Le=F.config.labels[xe]))}else Le=F.config.labels[xe];return Array.isArray(Le)&&(Le=Le.join(" ")),$e.isNumber(Le)?Le:Le.split(x).join("")};q.push(F.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===F.config.chart.type?(q.push("minimum"),q.push("q1"),q.push("median"),q.push("q3"),q.push("maximum")):"candlestick"===F.config.chart.type?(q.push("open"),q.push("high"),q.push("low"),q.push("close")):"rangeBar"===F.config.chart.type?(q.push("minimum"),q.push("maximum")):h.map(function(xe,Le){var qe=(xe.name?xe.name:"series-".concat(Le))+"";F.globals.axisCharts&&q.push(qe.split(x).join("")?qe.split(x).join(""):"series-".concat(Le))}),F.globals.axisCharts||(q.push(F.config.chart.toolbar.export.csv.headerValue),ie.push(q.join(x))),F.globals.allSeriesHasEqualX||!F.globals.axisCharts||F.config.xaxis.categories.length||F.config.labels.length?h.map(function(xe,Le){F.globals.axisCharts?function(xe,Le){if(q.length&&0===Le&&ie.push(q.join(x)),xe.data){xe.data=xe.data.length&&xe.data||ot(Array(me)).map(function(){return""});for(var qe=0;qe<xe.data.length;qe++){q=[];var kt=Q(qe);if(kt||(Ee.isFormatXY()?kt=h[Le].data[qe].x:Ee.isFormat2DArray()&&(kt=h[Le].data[qe]?h[Le].data[qe][0]:"")),0===Le){q.push(we(kt)?F.config.chart.toolbar.export.csv.dateFormatter(kt):$e.isNumber(kt)?kt:kt.split(x).join(""));for(var Dt=0;Dt<F.globals.series.length;Dt++){var ei;Ee.isFormatXY()?q.push(null===(ei=h[Dt].data[qe])||void 0===ei?void 0:ei.y):q.push(ge[Dt][qe])}}("candlestick"===F.config.chart.type||xe.type&&"candlestick"===xe.type)&&(q.pop(),q.push(F.globals.seriesCandleO[Le][qe]),q.push(F.globals.seriesCandleH[Le][qe]),q.push(F.globals.seriesCandleL[Le][qe]),q.push(F.globals.seriesCandleC[Le][qe])),("boxPlot"===F.config.chart.type||xe.type&&"boxPlot"===xe.type)&&(q.pop(),q.push(F.globals.seriesCandleO[Le][qe]),q.push(F.globals.seriesCandleH[Le][qe]),q.push(F.globals.seriesCandleM[Le][qe]),q.push(F.globals.seriesCandleL[Le][qe]),q.push(F.globals.seriesCandleC[Le][qe])),"rangeBar"===F.config.chart.type&&(q.pop(),q.push(F.globals.seriesRangeStart[Le][qe]),q.push(F.globals.seriesRangeEnd[Le][qe])),q.length&&ie.push(q.join(x))}}}(xe,Le):((q=[]).push(F.globals.labels[Le].split(x).join("")),q.push(ge[Le]),ie.push(q.join(x)))}):(U=new Set,$={},h.forEach(function(xe,Le){xe?.data.forEach(function(qe){var kt,Dt;if(Ee.isFormatXY())kt=qe.x,Dt=qe.y;else{if(!Ee.isFormat2DArray())return;kt=qe[0],Dt=qe[1]}$[kt]||($[kt]=Array(h.length).fill("")),$[kt][Le]=Dt,U.add(kt)})}),q.length&&ie.push(q.join(x)),Array.from(U).sort().forEach(function(xe){ie.push([we(xe)&&"datetime"===F.config.xaxis.type?F.config.chart.toolbar.export.csv.dateFormatter(xe):$e.isNumber(xe)?xe:xe.split(x).join(""),$[xe].join(x)])})),ue+=ie.join(I),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+ue),_||F.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(o,c,h){var _=document.createElement("a");_.href=o,_.download=(c||this.w.globals.chartID)+h,document.body.appendChild(_),_.click(),document.body.removeChild(_)}}]),le}(),gr=function(){function le(o,c){V(this,le),this.ctx=o,this.elgrid=c,this.w=o.w;var h=this.w;this.axesUtils=new Mr(o),this.xaxisLabels=h.globals.labels.slice(),h.globals.timescaleLabels.length>0&&!h.globals.isBarHorizontal&&(this.xaxisLabels=h.globals.timescaleLabels.slice()),h.config.xaxis.overwriteCategories&&(this.xaxisLabels=h.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===h.config.xaxis.position?0:h.globals.gridHeight+1,this.offY=this.offY+h.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.xaxisBorderWidth=h.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=h.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?h.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=h.config.xaxis.axisBorder.height,this.yaxis=h.config.yaxis[0]}return Ae(le,[{key:"drawXaxis",value:function(){var o=this.w,c=new at(this.ctx),h=c.group({class:"apexcharts-xaxis",transform:"translate(".concat(o.config.xaxis.offsetX,", ").concat(o.config.xaxis.offsetY,")")}),_=c.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(o.globals.translateXAxisX,", ").concat(o.globals.translateXAxisY,")")});h.add(_);for(var b=[],x=0;x<this.xaxisLabels.length;x++)b.push(this.xaxisLabels[x]);if(this.drawXAxisLabelAndGroup(!0,c,_,b,o.globals.isXNumeric,function(ue,ge){return ge}),o.globals.hasXaxisGroups){var A=o.globals.groups;b=[];for(var I=0;I<A.length;I++)b.push(A[I].title);var F={};o.config.xaxis.group.style&&(F.xaxisFontSize=o.config.xaxis.group.style.fontSize,F.xaxisFontFamily=o.config.xaxis.group.style.fontFamily,F.xaxisForeColors=o.config.xaxis.group.style.colors,F.fontWeight=o.config.xaxis.group.style.fontWeight,F.cssClass=o.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,c,_,b,!1,function(ue,ge){return A[ue].cols*ge},F)}if(void 0!==o.config.xaxis.title.text){var U=c.group({class:"apexcharts-xaxis-title"}),$=c.drawText({x:o.globals.gridWidth/2+o.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===o.config.xaxis.position?o.globals.xAxisLabelsHeight:-o.globals.xAxisLabelsHeight-10)+o.config.xaxis.title.offsetY,text:o.config.xaxis.title.text,textAnchor:"middle",fontSize:o.config.xaxis.title.style.fontSize,fontFamily:o.config.xaxis.title.style.fontFamily,fontWeight:o.config.xaxis.title.style.fontWeight,foreColor:o.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+o.config.xaxis.title.style.cssClass});U.add($),h.add(U)}if(o.config.xaxis.axisBorder.show){var q=o.globals.barPadForNumericAxis,ie=c.drawLine(o.globals.padHorizontal+o.config.xaxis.axisBorder.offsetX-q,this.offY,this.xaxisBorderWidth+q,this.offY,o.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add(ie):h.add(ie)}return h}},{key:"drawXAxisLabelAndGroup",value:function(o,c,h,_,b,x){var A,I=this,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},U=[],$=[],q=this.w,ie=F.xaxisFontSize||this.xaxisFontSize,ue=F.xaxisFontFamily||this.xaxisFontFamily,ge=F.xaxisForeColors||this.xaxisForeColors,we=F.fontWeight||q.config.xaxis.labels.style.fontWeight,me=F.cssClass||q.config.xaxis.labels.style.cssClass,Ee=q.globals.padHorizontal,N=_.length,Q="category"===q.config.xaxis.type?q.globals.dataPoints:N;0===Q&&N>Q&&(Q=N),b?(A=q.globals.gridWidth/Math.min(Q>1?Q-1:Q,N-1),Ee=Ee+x(0,A)/2+q.config.xaxis.labels.offsetX):Ee=Ee+x(0,A=q.globals.gridWidth/Q)+q.config.xaxis.labels.offsetX;for(var xe=function(qe){var kt=Ee-x(qe,A)/2+q.config.xaxis.labels.offsetX;0===qe&&1===N&&A/2===Ee&&1===Q&&(kt=q.globals.gridWidth/2);var Dt=I.axesUtils.getLabel(_,q.globals.timescaleLabels,kt,qe,U,ie,o),ei=28;if(q.globals.rotateXLabels&&o&&(ei=22),q.config.xaxis.title.text&&"top"===q.config.xaxis.position&&(ei+=parseFloat(q.config.xaxis.title.style.fontSize)+2),o||(ei=ei+parseFloat(ie)+(q.globals.xAxisLabelsHeight-q.globals.xAxisGroupLabelsHeight)+(q.globals.rotateXLabels?10:0)),Dt=void 0!==q.config.xaxis.tickAmount&&"dataPoints"!==q.config.xaxis.tickAmount&&"datetime"!==q.config.xaxis.type?I.axesUtils.checkLabelBasedOnTickamount(qe,Dt,N):I.axesUtils.checkForOverflowingLabels(qe,Dt,N,U,$),q.config.xaxis.labels.show){var wi=c.drawText({x:Dt.x,y:I.offY+q.config.xaxis.labels.offsetY+ei-("top"===q.config.xaxis.position?q.globals.xAxisHeight+q.config.xaxis.axisTicks.height-2:0),text:Dt.text,textAnchor:"middle",fontWeight:Dt.isBold?600:we,fontSize:ie,fontFamily:ue,foreColor:Array.isArray(ge)?o&&q.config.xaxis.convertedCatToNumeric?ge[q.globals.minX+qe-1]:ge[qe]:ge,isPlainText:!1,cssClass:(o?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+me});if(h.add(wi),wi.on("click",function(dn){if("function"==typeof q.config.chart.events.xAxisLabelClick){var wn=Object.assign({},q,{labelIndex:qe});q.config.chart.events.xAxisLabelClick(dn,I.ctx,wn)}}),o){var Mi=document.createElementNS(q.globals.SVGNS,"title");Mi.textContent=Array.isArray(Dt.text)?Dt.text.join(" "):Dt.text,wi.node.appendChild(Mi),""!==Dt.text&&(U.push(Dt.text),$.push(Dt))}}qe<N-1&&(Ee+=x(qe+1,A))},Le=0;Le<=N-1;Le++)xe(Le)}},{key:"drawXaxisInversed",value:function(o){var c,h,_=this,b=this.w,x=new at(this.ctx),A=b.config.yaxis[0].opposite?b.globals.translateYAxisX[o]:0,I=x.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:o}),F=x.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+A+", 0)"});I.add(F);var U=[];if(b.config.yaxis[o].show)for(var $=0;$<this.xaxisLabels.length;$++)U.push(this.xaxisLabels[$]);h=-(c=b.globals.gridHeight/U.length)/2.2;var q=b.globals.yLabelFormatters[0],ie=b.config.yaxis[0].labels;if(ie.show)for(var ue=function(pe){var xe=void 0===U[pe]?"":U[pe];xe=q(xe,{seriesIndex:o,dataPointIndex:pe,w:b});var Le=_.axesUtils.getYAxisForeColor(ie.style.colors,o),qe=0;Array.isArray(xe)&&(qe=xe.length/2*parseInt(ie.style.fontSize,10));var kt=ie.offsetX-15,Dt="end";_.yaxis.opposite&&(Dt="start"),"left"===b.config.yaxis[0].labels.align?(kt=ie.offsetX,Dt="start"):"center"===b.config.yaxis[0].labels.align?(kt=ie.offsetX,Dt="middle"):"right"===b.config.yaxis[0].labels.align&&(Dt="end");var ei=x.drawText({x:kt,y:h+c+ie.offsetY-qe,text:xe,textAnchor:Dt,foreColor:Array.isArray(Le)?Le[pe]:Le,fontSize:ie.style.fontSize,fontFamily:ie.style.fontFamily,fontWeight:ie.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ie.style.cssClass,maxWidth:ie.maxWidth});F.add(ei),ei.on("click",function(dn){if("function"==typeof b.config.chart.events.xAxisLabelClick){var wn=Object.assign({},b,{labelIndex:pe});b.config.chart.events.xAxisLabelClick(dn,_.ctx,wn)}});var wi=document.createElementNS(b.globals.SVGNS,"title");if(wi.textContent=Array.isArray(xe)?xe.join(" "):xe,ei.node.appendChild(wi),0!==b.config.yaxis[o].labels.rotate){var Mi=x.rotateAroundCenter(ei.node);ei.node.setAttribute("transform","rotate(".concat(b.config.yaxis[o].labels.rotate," 0 ").concat(Mi.y,")"))}h+=c},ge=0;ge<=U.length-1;ge++)ue(ge);if(void 0!==b.config.yaxis[0].title.text){var we=x.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+A+", 0)"}),me=x.drawText({x:b.config.yaxis[0].title.offsetX,y:b.globals.gridHeight/2+b.config.yaxis[0].title.offsetY,text:b.config.yaxis[0].title.text,textAnchor:"middle",foreColor:b.config.yaxis[0].title.style.color,fontSize:b.config.yaxis[0].title.style.fontSize,fontWeight:b.config.yaxis[0].title.style.fontWeight,fontFamily:b.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+b.config.yaxis[0].title.style.cssClass});we.add(me),I.add(we)}var Ee=0;this.isCategoryBarHorizontal&&b.config.yaxis[0].opposite&&(Ee=b.globals.gridWidth);var N=b.config.xaxis.axisBorder;if(N.show){var Q=x.drawLine(b.globals.padHorizontal+N.offsetX+Ee,1+N.offsetY,b.globals.padHorizontal+N.offsetX+Ee,b.globals.gridHeight+N.offsetY,N.color,0);this.elgrid&&this.elgrid.elGridBorders&&b.config.grid.show?this.elgrid.elGridBorders.add(Q):I.add(Q)}return b.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(Ee,U.length,b.config.yaxis[0].axisBorder,b.config.yaxis[0].axisTicks,0,c,I),I}},{key:"drawXaxisTicks",value:function(o,c,h){var _=this.w,b=o;if(!(o<0||o-2>_.globals.gridWidth)){var x=this.offY+_.config.xaxis.axisTicks.offsetY;if(c=c+x+_.config.xaxis.axisTicks.height,"top"===_.config.xaxis.position&&(c=x-_.config.xaxis.axisTicks.height),_.config.xaxis.axisTicks.show){var A=new at(this.ctx).drawLine(o+_.config.xaxis.axisTicks.offsetX,x+_.config.xaxis.offsetY,b+_.config.xaxis.axisTicks.offsetX,c+_.config.xaxis.offsetY,_.config.xaxis.axisTicks.color);h.add(A),A.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var o=this.w,c=[],h=this.xaxisLabels.length,_=o.globals.padHorizontal;if(o.globals.timescaleLabels.length>0)for(var b=0;b<h;b++)c.push(_=this.xaxisLabels[b].position);else for(var x=h,A=0;A<x;A++){var I=x;o.globals.isXNumeric&&"bar"!==o.config.chart.type&&(I-=1),c.push(_+=o.globals.gridWidth/I)}return c}},{key:"xAxisLabelCorrections",value:function(){var o=this.w,c=new at(this.ctx),h=o.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),b=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),x=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(o.globals.rotateXLabels||o.config.xaxis.labels.rotateAlways)for(var A=0;A<_.length;A++){var I=c.rotateAroundCenter(_[A]);I.y=I.y-1,I.x=I.x+1,_[A].setAttribute("transform","rotate(".concat(o.config.xaxis.labels.rotate," ").concat(I.x," ").concat(I.y,")")),_[A].setAttribute("text-anchor","end"),h.setAttribute("transform","translate(0, ".concat(-10,")")),o.config.xaxis.labels.trim&&Array.prototype.forEach.call(_[A].childNodes,function(ie){c.placeTextWithEllipsis(ie,ie.textContent,o.globals.xAxisLabelsHeight-("bottom"===o.config.legend.position?20:10))})}else!function(){for(var ie=o.globals.gridWidth/(o.globals.labels.length+1),ue=0;ue<_.length;ue++)o.config.xaxis.labels.trim&&"datetime"!==o.config.xaxis.type&&Array.prototype.forEach.call(_[ue].childNodes,function(we){c.placeTextWithEllipsis(we,we.textContent,ie)})}();if(b.length>0){var U=b[b.length-1].getBBox(),$=b[0].getBBox();U.x<-20&&b[b.length-1].parentNode.removeChild(b[b.length-1]),$.x+$.width>o.globals.gridWidth&&!o.globals.isBarHorizontal&&b[0].parentNode.removeChild(b[0]);for(var q=0;q<x.length;q++)c.placeTextWithEllipsis(x[q],x[q].textContent,o.config.yaxis[0].labels.maxWidth-(o.config.yaxis[0].title.text?2*parseFloat(o.config.yaxis[0].title.style.fontSize):0)-15)}}}]),le}(),xn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.xaxisLabels=c.globals.labels.slice(),this.axesUtils=new Mr(o),this.isRangeBar=c.globals.seriesRange.length&&c.globals.isBarHorizontal,c.globals.timescaleLabels.length>0&&(this.xaxisLabels=c.globals.timescaleLabels.slice())}return Ae(le,[{key:"drawGridArea",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=this.w,h=new at(this.ctx);null===o&&(o=h.group({class:"apexcharts-grid"}));var _=h.drawLine(c.globals.padHorizontal,1,c.globals.padHorizontal,c.globals.gridHeight,"transparent"),b=h.drawLine(c.globals.padHorizontal,c.globals.gridHeight,c.globals.gridWidth,c.globals.gridHeight,"transparent");return o.add(b),o.add(_),o}},{key:"drawGrid",value:function(){var o=null;return this.w.globals.axisCharts&&(o=this.renderGrid(),this.drawGridArea(o.el)),o}},{key:"createGridMask",value:function(){var o=this.w,c=o.globals,h=new at(this.ctx),_=Array.isArray(o.config.stroke.width)?0:o.config.stroke.width;if(Array.isArray(o.config.stroke.width)){var b=0;o.config.stroke.width.forEach(function($){b=Math.max(b,$)}),_=b}c.dom.elGridRectMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(c.cuid)),c.dom.elGridRectMarkerMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(c.cuid)),c.dom.elForecastMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elForecastMask.setAttribute("id","forecastMask".concat(c.cuid)),c.dom.elNonForecastMask=document.createElementNS(c.SVGNS,"clipPath"),c.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(c.cuid));var x=o.config.chart.type,A=0,I=0;("bar"===x||"rangeBar"===x||"candlestick"===x||"boxPlot"===x||o.globals.comboBarCount>0)&&o.globals.isXNumeric&&!o.globals.isBarHorizontal&&(I=o.config.grid.padding.right,c.barPadForNumericAxis>(A=o.config.grid.padding.left)&&(A=c.barPadForNumericAxis,I=c.barPadForNumericAxis)),c.dom.elGridRect=h.drawRect(-_-A-2,2*-_-2,c.gridWidth+_+I+A+4,c.gridHeight+4*_+4,0,"#fff");var F=o.globals.markers.largestSize+1;c.dom.elGridRectMarker=h.drawRect(2*-F,2*-F,c.gridWidth+4*F,c.gridHeight+4*F,0,"#fff"),c.dom.elGridRectMask.appendChild(c.dom.elGridRect.node),c.dom.elGridRectMarkerMask.appendChild(c.dom.elGridRectMarker.node);var U=c.dom.baseEl.querySelector("defs");U.appendChild(c.dom.elGridRectMask),U.appendChild(c.dom.elForecastMask),U.appendChild(c.dom.elNonForecastMask),U.appendChild(c.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(o){var c=o.i,h=o.x1,A=o.xCount,F=this.w;if(!(0===c&&F.globals.skipFirstTimelinelabel||c===A-1&&F.globals.skipLastTimelinelabel&&!F.config.xaxis.labels.formatter||"radar"===F.config.chart.type)){F.config.grid.xaxis.lines.show&&this._drawGridLine({i:c,x1:h,y1:o.y1,x2:o.x2,y2:o.y2,xCount:A,parent:o.parent});var U=0;if(F.globals.hasXaxisGroups&&"between"===F.config.xaxis.tickPlacement){var $=F.globals.groups;if($){for(var q=0,ie=0;q<c&&ie<$.length;ie++)q+=$[ie].cols;q===c&&(U=.6*F.globals.xAxisLabelsHeight)}}new gr(this.ctx).drawXaxisTicks(h,U,F.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(o){var c=o.i,h=o.x1,_=o.y1,b=o.x2,x=o.y2,A=o.xCount,I=o.parent,F=this.w,U=!1,$=I.node.classList.contains("apexcharts-gridlines-horizontal"),q=F.config.grid.strokeDashArray,ie=F.globals.barPadForNumericAxis;(0===_&&0===x||0===h&&0===b)&&(U=!0),_===F.globals.gridHeight&&x===F.globals.gridHeight&&(U=!0),!F.globals.isBarHorizontal||0!==c&&c!==A-1||(U=!0);var ue=new at(this).drawLine(h-($?ie:0),_,b+($?ie:0),x,F.config.grid.borderColor,q);ue.node.classList.add("apexcharts-gridline"),U&&F.config.grid.show?this.elGridBorders.add(ue):I.add(ue)}},{key:"_drawGridBandRect",value:function(o){var c=o.c,h=o.x1,_=o.y1,b=o.x2,x=o.y2,A=o.type,I=this.w,F=new at(this.ctx),U=I.globals.barPadForNumericAxis;if("column"!==A||"datetime"!==I.config.xaxis.type){var q=F.drawRect(h-("row"===A?U:0),_,b+("row"===A?2*U:0),x,0,I.config.grid[A].colors[c],I.config.grid[A].opacity);this.elg.add(q),q.attr("clip-path","url(#gridRectMask".concat(I.globals.cuid,")")),q.node.classList.add("apexcharts-grid-".concat(A))}}},{key:"_drawXYLines",value:function(o){var c=this,h=o.xCount,_=o.tickAmount,b=this.w;if(b.config.grid.xaxis.lines.show||b.config.xaxis.axisTicks.show){var x,A=b.globals.padHorizontal,I=b.globals.gridHeight;b.globals.timescaleLabels.length?function(ue){for(var ge=ue.xC,me=ue.y1,N=ue.y2,Q=0;Q<ge;Q++)c._drawGridLines({i:Q,x1:c.xaxisLabels[Q].position,y1:me,x2:c.xaxisLabels[Q].position,y2:N,xCount:h,parent:c.elgridLinesV})}({xC:h,x1:A,y1:0,x2:x,y2:I}):(b.globals.isXNumeric&&(h=b.globals.xAxisScale.result.length),function(ue){for(var ge=ue.xC,we=ue.x1,me=ue.y1,Ee=ue.x2,N=ue.y2,Q=0;Q<ge+(b.globals.isXNumeric?0:1);Q++)0===Q&&1===ge&&1===b.globals.dataPoints&&(Ee=we=b.globals.gridWidth/2),c._drawGridLines({i:Q,x1:we,y1:me,x2:Ee,y2:N,xCount:h,parent:c.elgridLinesV}),Ee=we+=b.globals.gridWidth/(b.globals.isXNumeric?ge-1:ge)}({xC:h,x1:A,y1:0,x2:x,y2:I}))}if(b.config.grid.yaxis.lines.show){var F=0,U=0,$=b.globals.gridWidth,q=_+1;this.isRangeBar&&(q=b.globals.labels.length);for(var ie=0;ie<q+(this.isRangeBar?1:0);ie++)this._drawGridLine({i:ie,xCount:q+(this.isRangeBar?1:0),x1:0,y1:F,x2:$,y2:U,parent:this.elgridLinesH}),U=F+=b.globals.gridHeight/(this.isRangeBar?q:_)}}},{key:"_drawInvertedXYLines",value:function(o){var c=o.xCount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show)for(var _,b=h.globals.padHorizontal,x=h.globals.gridHeight,A=0;A<c+1;A++)h.config.grid.xaxis.lines.show&&this._drawGridLine({i:A,xCount:c+1,x1:b,y1:0,x2:_,y2:x,parent:this.elgridLinesV}),new gr(this.ctx).drawXaxisTicks(b,0,h.globals.dom.elGraphical),_=b=b+h.globals.gridWidth/c+.3;if(h.config.grid.yaxis.lines.show)for(var I=0,F=0,U=h.globals.gridWidth,$=0;$<h.globals.dataPoints+1;$++)this._drawGridLine({i:$,xCount:h.globals.dataPoints+1,x1:0,y1:I,x2:U,y2:F,parent:this.elgridLinesH}),F=I+=h.globals.gridHeight/h.globals.dataPoints}},{key:"renderGrid",value:function(){var o=this.w,c=new at(this.ctx);this.elg=c.group({class:"apexcharts-grid"}),this.elgridLinesH=c.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=c.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=c.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),o.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var h=0;h<o.globals.seriesYAxisMap.length&&-1!==o.globals.ignoreYAxisIndexes.indexOf(h);)h++;h===o.globals.seriesYAxisMap.length&&(h=0);var _,x,A,I,b=o.globals.yAxisScale[h].result.length-1;return!o.globals.isBarHorizontal||this.isRangeBar?(_=this.xaxisLabels.length,this.isRangeBar&&(_--,b=o.globals.labels.length,o.config.xaxis.tickAmount&&o.config.xaxis.labels.formatter&&(_=o.config.xaxis.tickAmount),(null===(x=o.globals.yAxisScale)||void 0===x||null===(A=x[h])||void 0===A||null===(I=A.result)||void 0===I?void 0:I.length)>0&&"datetime"!==o.config.xaxis.type&&(_=o.globals.yAxisScale[h].result.length-1)),this._drawXYLines({xCount:_,tickAmount:b})):this._drawInvertedXYLines({xCount:_=b,tickAmount:b=o.globals.xTickAmount}),this.drawGridBands(_,b),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:o.globals.gridWidth/_}}},{key:"drawGridBands",value:function(o,c){var h=this.w;if(void 0!==h.config.grid.row.colors&&h.config.grid.row.colors.length>0)for(var _=0,b=h.globals.gridHeight/c,x=h.globals.gridWidth,A=0,I=0;A<c;A++,I++)I>=h.config.grid.row.colors.length&&(I=0),this._drawGridBandRect({c:I,x1:0,y1:_,x2:x,y2:b,type:"row"}),_+=h.globals.gridHeight/c;if(void 0!==h.config.grid.column.colors&&h.config.grid.column.colors.length>0)for(var F=h.globals.isBarHorizontal||"on"!==h.config.xaxis.tickPlacement||"category"!==h.config.xaxis.type&&!h.config.xaxis.convertedCatToNumeric?o:o-1,U=h.globals.padHorizontal,$=h.globals.padHorizontal+h.globals.gridWidth/F,q=h.globals.gridHeight,ie=0,ue=0;ie<o;ie++,ue++)ue>=h.config.grid.column.colors.length&&(ue=0),this._drawGridBandRect({c:ue,x1:U,y1:0,x2:$,y2:q,type:"column"}),U+=h.globals.gridWidth/F}}]),le}(),en=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"niceScale",value:function(o,c){var h,_,b,x,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,I=1e-11,F=this.w,U=F.globals;U.isBarHorizontal?(h=F.config.xaxis,_=Math.max((U.svgWidth-100)/25,2)):(h=F.config.yaxis[A],_=Math.max((U.svgHeight-100)/15,2)),b=null!=h.min,x=void 0!==h.max&&null!==h.min;var $=null!=h.stepSize,q=null!=h.tickAmount,ie=q?h.tickAmount:h.forceNiceScale?U.niceScaleDefaultTicks[Math.min(Math.round(_/2),U.niceScaleDefaultTicks.length-1)]:10;if(U.isMultipleYAxis&&!q&&U.multiAxisTickAmount>0&&(ie=U.multiAxisTickAmount,q=!0),ie="dataPoints"===ie?U.dataPoints-1:Math.abs(Math.round(ie)),(o===Number.MIN_VALUE&&0===c||!$e.isNumber(o)&&!$e.isNumber(c)||o===Number.MIN_VALUE&&c===-Number.MAX_VALUE)&&(o=0,c=ie,U.allSeriesCollapsed=!1),o>c){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var ue=c;c=o,o=ue}else o===c&&(o=0===o?0:o-1,c=0===c?2:c+1);var ge=[];ie<1&&(ie=1);var we=ie,me=Math.abs(c-o);h.forceNiceScale&&(!b&&o>0&&o/me<.15&&(o=0,b=!0),!x&&c<0&&-c/me<.15&&(c=0,x=!0),me=Math.abs(c-o));var Ee=me/we,N=Ee,Q=Math.floor(Math.log10(N)),pe=Math.pow(10,Q),xe=Math.ceil(N/pe);if(Ee=N=(xe=U.niceScaleAllowedMagMsd[0===U.yValueDecimal?0:1][xe])*pe,U.isBarHorizontal&&h.stepSize&&"datetime"!==h.type?(Ee=h.stepSize,$=!0):$&&(Ee=h.stepSize),$&&h.forceNiceScale){var Le=Math.floor(Math.log10(Ee));Ee*=Math.pow(10,Q-Le)}if(b&&x){var qe=me/we;if(q)if($)if(0!=$e.mod(me,Ee)){var kt=$e.getGCD(Ee,qe);Ee=qe/kt<10?kt:qe}else 0==$e.mod(Ee,qe)?Ee=qe:(qe=Ee,q=!1);else Ee=qe;else if($)0==$e.mod(me,Ee)?qe=Ee:Ee=qe;else if(0==$e.mod(me,Ee))qe=Ee;else{qe=me/(we=Math.ceil(me/Ee));var Dt=$e.getGCD(me,Ee);me/Dt<_&&(qe=Dt),Ee=qe}we=Math.round(me/Ee)}else{if(b||x)if(x)if(q)o=c-Ee*we;else{var ei=o;o=Ee*Math.floor(o/Ee),Math.abs(c-o)/$e.getGCD(me,Ee)>_&&(o=c-Ee*ie,o+=Ee*Math.floor((ei-o)/Ee))}else b&&(c=q?o+Ee*we:Ee*Math.ceil(c/Ee));else if(q){var wi=Ee/(c-o>c?1:2),Mi=wi*Math.floor(o/wi);Math.abs(Mi-o)<=wi/2?c=(o=Mi)+Ee*we:o=(c=wi*Math.ceil(c/wi))-Ee*we}else o=Ee*Math.floor(o/Ee),c=Ee*Math.ceil(c/Ee);me=Math.abs(c-o),Ee=$e.getGCD(me,Ee),we=Math.round(me/Ee)}if(q||b||x||(we=Math.ceil((me-I)/(Ee+I)))>16&&$e.getPrimeFactors(we).length<2&&we++,U.isMultipleYAxis&&0==U.multiAxisTickAmount&&(U.multiAxisTickAmount=we),we>_&&(!q&&!$||h.forceNiceScale)){var dn=$e.getPrimeFactors(we),wn=dn.length-1,Fn=we;e:for(var Qn=0;Qn<wn;Qn++)for(var lr=0;lr<=wn-Qn;lr++){for(var cr=Math.min(lr+Qn,wn),Pr=Fn,jr=1,Wr=lr;Wr<=cr;Wr++)jr*=dn[Wr];if((Pr/=jr)<_){Fn=Pr;break e}}Ee=Fn===we?me:me/Fn}var Dr=o-Ee,Kn=Ee*I;do{ge.push($e.stripNumber(Dr+=Ee,7))}while(c-Dr>Kn);return{result:ge,niceMin:ge[0],niceMax:ge[ge.length-1]}}},{key:"linearScale",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,x=Math.abs(c-o);"dataPoints"===(h=this._adjustTicksForSmallRange(h,_,x))&&(h=this.w.globals.dataPoints-1),b||(b=x/h),h===Number.MAX_VALUE&&(h=5,b=1);for(var A=[],I=o;h>=0;)A.push(I),I+=b,h-=1;return{result:A,niceMin:A[0],niceMax:A[A.length-1]}}},{key:"logarithmicScaleNice",value:function(o,c,h){c<=0&&(c=Math.max(o,h)),o<=0&&(o=Math.min(c,h));for(var _=[],b=Math.ceil(Math.log(c)/Math.log(h)+1),x=Math.floor(Math.log(o)/Math.log(h));x<b;x++)_.push(Math.pow(h,x));return{result:_,niceMin:_[0],niceMax:_[_.length-1]}}},{key:"logarithmicScale",value:function(o,c,h){c<=0&&(c=Math.max(o,h)),o<=0&&(o=Math.min(c,h));for(var _=[],b=Math.log(c)/Math.log(h),x=Math.log(o)/Math.log(h),A=b-x,I=Math.round(A),F=A/I,U=0,$=x;U<I;U++,$+=F)_.push(Math.pow(h,$));return _.push(Math.pow(h,b)),{result:_,niceMin:o,niceMax:c}}},{key:"_adjustTicksForSmallRange",value:function(o,c,h){var _=o;if(void 0!==c&&this.w.config.yaxis[c].labels.formatter&&void 0===this.w.config.yaxis[c].tickAmount){var b=Number(this.w.config.yaxis[c].labels.formatter(1));$e.isNumber(b)&&0===this.w.globals.yValueDecimal&&(_=Math.ceil(h))}return _<o?_:o}},{key:"setYScaleForIndex",value:function(o,c,h){var _=this.w.globals,b=this.w.config,x=_.isBarHorizontal?b.xaxis:b.yaxis[o];void 0===_.yAxisScale[o]&&(_.yAxisScale[o]=[]);var A=Math.abs(h-c);x.logarithmic&&A<=5&&(_.invalidLogScale=!0),x.logarithmic&&A>5?(_.allSeriesCollapsed=!1,_.yAxisScale[o]=x.forceNiceScale?this.logarithmicScaleNice(c,h,x.logBase):this.logarithmicScale(c,h,x.logBase)):h!==-Number.MAX_VALUE&&$e.isNumber(h)?(_.allSeriesCollapsed=!1,_.yAxisScale[o]=this.niceScale(c,h,o)):_.yAxisScale[o]=this.linearScale(0,10,10,o,b.yaxis[o].stepSize)}},{key:"setXScale",value:function(o,c){var h=this.w,_=h.globals,b=Math.abs(c-o);return _.xAxisScale=c!==-Number.MAX_VALUE&&$e.isNumber(c)?this.linearScale(o,c,h.config.xaxis.tickAmount?h.config.xaxis.tickAmount:b<10&&b>1?b+1:10,0,h.config.xaxis.stepSize):this.linearScale(0,10,10),_.xAxisScale}},{key:"setMultipleYScales",value:function(){var o=this.w.globals,c=this.w.config,h=o.minYArr,_=o.maxYArr,b=[],x=[],A=[];c.series.forEach(function(q,ie){A.push(ie),x.push(null)});var I,F=[];c.yaxis.forEach(function(q,ie){if(q.seriesName){var ue=[];Array.isArray(q.seriesName)?ue=q.seriesName:ue.push(q.seriesName),b[ie]=[],ue.forEach(function(ge){c.series.forEach(function(we,me){if(we.name===ge){b[ie].push(me),x[me]=ie;var Ee=A.indexOf(me);A.splice(Ee,1)}})})}else F.push(ie)});for(var U=0;U<F.length&&(b[I=F[U]]=[],A);U++){var $=A[0];A.shift(),b[I].push($),x[$]=I}I&&A.forEach(function(q){b[I].push(q),x[q]=I}),o.seriesYAxisMap=b.map(function(q){return q}),o.seriesYAxisReverseMap=x.map(function(q){return q}),this.sameScaleInMultipleAxes(h,_,b)}},{key:"sameScaleInMultipleAxes",value:function(o,c,h){var _=this,b=this.w.config,x=this.w.globals,A=[];h.forEach(function(F,U){for(var $=U+1;$<h.length;$++){var q,ie=si(F.values());try{for(ie.s();!(q=ie.n()).done;){var ge=h[$].indexOf(q.value);-1!==ge&&(F.push($),h[$].splice(ge,1))}}catch(we){ie.e(we)}finally{ie.f()}h[$].length<1&&-1===A.indexOf($)&&A.push($)}});for(var I=A.length-1;I>=0;I--)h.splice(A[I],1);h.forEach(function(F,U){var $=Number.MAX_VALUE,q=-Number.MAX_VALUE;if(b.chart.stacked){for(var ie=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),ue=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),ge=x.seriesX[F[0]].map(function(Le){return Number.MIN_VALUE}),we=b.series[F[0]].type,me=0;me<F.length;me++){var Ee=F[me];if(-1===x.collapsedSeriesIndices.indexOf(Ee))for(var N=0;N<x.series[Ee].length;N++){var Q=x.series[Ee][N];Q>=0?ue[N]+=Q:ge[N]+=Q,ie[N]+=Q}}"bar"===we?($=Math.min.apply(null,ge),q=Math.max.apply(null,ue)):($=Math.min.apply(null,ie),q=Math.max.apply(null,ie))}else{for(var pe=0;pe<F.length;pe++)$=Math.min($,o[F[pe]]);for(var xe=0;xe<F.length;xe++)q=Math.max(q,c[F[xe]])}void 0!==b.yaxis[U].min&&($="function"==typeof b.yaxis[U].min?b.yaxis[U].min($):b.yaxis[U].min),void 0!==b.yaxis[U].max&&(q="function"==typeof b.yaxis[U].max?b.yaxis[U].max(q):b.yaxis[U].max),_.setYScaleForIndex(U,$,q),F.forEach(function(Le){o[Le]=x.yAxisScale[U].niceMin,c[Le]=x.yAxisScale[U].niceMax})})}}]),le}(),_n=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.scales=new en(o)}return Ae(le,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=this.w.config,x=this.w.globals,A=-Number.MAX_VALUE,I=Number.MIN_VALUE;null===_&&(_=o+1);var F=0,U=0,$=void 0;if(x.seriesX.length>=_){var q,ie;F=0,U=($=ot(new Set((q=[]).concat.apply(q,ot(x.seriesX.slice(o,_)))))).length-1;var ue=null===(ie=x.brushSource)||void 0===ie?void 0:ie.w.config.chart.brush;if(b.chart.zoom.enabled&&b.chart.zoom.autoScaleYaxis||null!=ue&&ue.enabled&&null!=ue&&ue.autoScaleYaxis){if(b.xaxis.min)for(F=0;F<U&&$[F]<=b.xaxis.min;F++);if(b.xaxis.max)for(;U>F&&$[U]>=b.xaxis.max;U--);}}var ge=x.series,we=ge,me=ge;"candlestick"===b.chart.type?(we=x.seriesCandleL,me=x.seriesCandleH):"boxPlot"===b.chart.type?(we=x.seriesCandleO,me=x.seriesCandleC):x.isRangeData&&(we=x.seriesRangeStart,me=x.seriesRangeEnd);for(var Ee=o;Ee<_;Ee++){x.dataPoints=Math.max(x.dataPoints,ge[Ee].length);var N=b.series[Ee].type;x.categoryLabels.length&&(x.dataPoints=x.categoryLabels.filter(function(xe){return void 0!==xe}).length),x.labels.length&&"datetime"!==b.xaxis.type&&0!==x.series.reduce(function(xe,Le){return xe+Le.length},0)&&(x.dataPoints=Math.max(x.dataPoints,x.labels.length)),$||(F=0,U=x.series[Ee].length);for(var Q=F;Q<=U&&Q<x.series[Ee].length;Q++){var pe=ge[Ee][Q];if(null!==pe&&$e.isNumber(pe)){switch(void 0!==me[Ee][Q]&&(A=Math.max(A,me[Ee][Q]),c=Math.min(c,me[Ee][Q])),void 0!==we[Ee][Q]&&(c=Math.min(c,we[Ee][Q]),h=Math.max(h,we[Ee][Q])),N){case"candlestick":void 0!==x.seriesCandleC[Ee][Q]&&(A=Math.max(A,x.seriesCandleH[Ee][Q]),c=Math.min(c,x.seriesCandleL[Ee][Q]));case"boxPlot":void 0!==x.seriesCandleC[Ee][Q]&&(A=Math.max(A,x.seriesCandleC[Ee][Q]),c=Math.min(c,x.seriesCandleO[Ee][Q]))}N&&"candlestick"!==N&&"boxPlot"!==N&&"rangeArea"!==N&&"rangeBar"!==N&&(A=Math.max(A,x.series[Ee][Q]),c=Math.min(c,x.series[Ee][Q])),h=A,x.seriesGoals[Ee]&&x.seriesGoals[Ee][Q]&&Array.isArray(x.seriesGoals[Ee][Q])&&x.seriesGoals[Ee][Q].forEach(function(xe){I!==Number.MIN_VALUE&&(I=Math.min(I,xe.value),c=I),A=Math.max(A,xe.value),h=A}),$e.isFloat(pe)&&(pe=$e.noExponents(pe),x.yValueDecimal=Math.max(x.yValueDecimal,pe.toString().split(".")[1].length)),I>we[Ee][Q]&&we[Ee][Q]<0&&(I=we[Ee][Q])}else x.hasNullValues=!0}"bar"!==N&&"column"!==N||(I<0&&A<0&&(A=0,h=Math.max(h,0)),I===Number.MIN_VALUE&&(I=0,c=Math.min(c,0)))}return"rangeBar"===b.chart.type&&x.seriesRangeStart.length&&x.isBarHorizontal&&(I=c),"bar"===b.chart.type&&(I<0&&A<0&&(A=0),I===Number.MIN_VALUE&&(I=0)),{minY:I,maxY:A,lowestY:c,highestY:h}}},{key:"setYRange",value:function(){var o=this.w.globals,c=this.w.config;o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE;var h,_=Number.MAX_VALUE;if(o.isMultipleYAxis){_=Number.MAX_VALUE;for(var b=0;b<o.series.length;b++)h=this.getMinYMaxY(b),o.minYArr[b]=h.lowestY,o.maxYArr[b]=h.highestY,_=Math.min(_,h.lowestY)}return h=this.getMinYMaxY(0,_,null,o.series.length),"bar"===c.chart.type?(o.minY=h.minY,o.maxY=h.maxY):(o.minY=h.lowestY,o.maxY=h.highestY),_=h.lowestY,c.chart.stacked&&this._setStackedMinMax(),"line"===c.chart.type||"area"===c.chart.type||"scatter"===c.chart.type||"candlestick"===c.chart.type||"boxPlot"===c.chart.type||"rangeBar"===c.chart.type&&!o.isBarHorizontal?o.minY===Number.MIN_VALUE&&_!==-Number.MAX_VALUE&&_!==o.maxY&&(o.minY=_):o.minY=h.minY,c.yaxis.forEach(function(x,A){void 0!==x.max&&("number"==typeof x.max?o.maxYArr[A]=x.max:"function"==typeof x.max&&(o.maxYArr[A]=x.max(o.isMultipleYAxis?o.maxYArr[A]:o.maxY)),o.maxY=o.maxYArr[A]),void 0!==x.min&&("number"==typeof x.min?o.minYArr[A]=x.min:"function"==typeof x.min&&(o.minYArr[A]=x.min(o.isMultipleYAxis?o.minYArr[A]===Number.MIN_VALUE?0:o.minYArr[A]:o.minY)),o.minY=o.minYArr[A])}),o.isBarHorizontal&&["min","max"].forEach(function(x){void 0!==c.xaxis[x]&&"number"==typeof c.xaxis[x]&&("min"===x?o.minY=c.xaxis[x]:o.maxY=c.xaxis[x])}),o.isMultipleYAxis?(this.scales.setMultipleYScales(),o.minY=_):(this.scales.setYScaleForIndex(0,o.minY,o.maxY),o.minY=o.yAxisScale[0].niceMin,o.maxY=o.yAxisScale[0].niceMax,o.minYArr[0]=o.yAxisScale[0].niceMin,o.maxYArr[0]=o.yAxisScale[0].niceMax,o.seriesYAxisMap=[o.series.map(function(x,A){return A})],o.seriesYAxisReverseMap=o.series.map(function(x,A){return 0})),{minY:o.minY,maxY:o.maxY,minYArr:o.minYArr,maxYArr:o.maxYArr,yAxisScale:o.yAxisScale}}},{key:"setXRange",value:function(){var o=this.w.globals,c=this.w.config,h="numeric"===c.xaxis.type||"datetime"===c.xaxis.type||"category"===c.xaxis.type&&!o.noLabelsProvided||o.noLabelsProvided||o.isXNumeric;if(o.isXNumeric&&function(){for(var A=0;A<o.series.length;A++)if(o.labels[A])for(var I=0;I<o.labels[A].length;I++)null!==o.labels[A][I]&&$e.isNumber(o.labels[A][I])&&(o.maxX=Math.max(o.maxX,o.labels[A][I]),o.initialMaxX=Math.max(o.maxX,o.labels[A][I]),o.minX=Math.min(o.minX,o.labels[A][I]),o.initialMinX=Math.min(o.minX,o.labels[A][I]))}(),o.noLabelsProvided&&0===c.xaxis.categories.length&&(o.maxX=o.labels[o.labels.length-1],o.initialMaxX=o.labels[o.labels.length-1],o.minX=1,o.initialMinX=1),o.isXNumeric||o.noLabelsProvided||o.dataFormatXNumeric){var _;if(void 0===c.xaxis.tickAmount?(_=Math.round(o.svgWidth/150),"numeric"===c.xaxis.type&&o.dataPoints<30&&(_=o.dataPoints-1),_>o.dataPoints&&0!==o.dataPoints&&(_=o.dataPoints-1)):"dataPoints"===c.xaxis.tickAmount?(o.series.length>1&&(_=o.series[o.maxValsInArrayIndex].length-1),o.isXNumeric&&(_=o.maxX-o.minX-1)):_=c.xaxis.tickAmount,o.xTickAmount=_,void 0!==c.xaxis.max&&"number"==typeof c.xaxis.max&&(o.maxX=c.xaxis.max),void 0!==c.xaxis.min&&"number"==typeof c.xaxis.min&&(o.minX=c.xaxis.min),void 0!==c.xaxis.range&&(o.minX=o.maxX-c.xaxis.range),o.minX!==Number.MAX_VALUE&&o.maxX!==-Number.MAX_VALUE)if(c.xaxis.convertedCatToNumeric&&!o.dataFormatXNumeric){for(var b=[],x=o.minX-1;x<o.maxX;x++)b.push(x+1);o.xAxisScale={result:b,niceMin:b[0],niceMax:b[b.length-1]}}else o.xAxisScale=this.scales.setXScale(o.minX,o.maxX);else o.xAxisScale=this.scales.linearScale(0,_,_,0,c.xaxis.stepSize),o.noLabelsProvided&&o.labels.length>0&&(o.xAxisScale=this.scales.linearScale(1,o.labels.length,_-1,0,c.xaxis.stepSize),o.seriesX=o.labels.slice());h&&(o.labels=o.xAxisScale.result.slice())}return o.isBarHorizontal&&o.labels.length&&(o.xTickAmount=o.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:o.minX,maxX:o.maxX}}},{key:"setZRange",value:function(){var o=this.w.globals;if(o.isDataXYZ)for(var c=0;c<o.series.length;c++)if(void 0!==o.seriesZ[c])for(var h=0;h<o.seriesZ[c].length;h++)null!==o.seriesZ[c][h]&&$e.isNumber(o.seriesZ[c][h])&&(o.maxZ=Math.max(o.maxZ,o.seriesZ[c][h]),o.minZ=Math.min(o.minZ,o.seriesZ[c][h]))}},{key:"_handleSingleDataPoint",value:function(){var o=this.w.globals,c=this.w.config;if(o.minX===o.maxX){var h=new vi(this.ctx);if("datetime"===c.xaxis.type){var _=h.getDate(o.minX);c.xaxis.labels.datetimeUTC?_.setUTCDate(_.getUTCDate()-2):_.setDate(_.getDate()-2),o.minX=new Date(_).getTime();var b=h.getDate(o.maxX);c.xaxis.labels.datetimeUTC?b.setUTCDate(b.getUTCDate()+2):b.setDate(b.getDate()+2),o.maxX=new Date(b).getTime()}else("numeric"===c.xaxis.type||"category"===c.xaxis.type&&!o.noLabelsProvided)&&(o.minX=o.minX-2,o.initialMinX=o.minX,o.maxX=o.maxX+2,o.initialMaxX=o.maxX)}}},{key:"_getMinXDiff",value:function(){var o=this.w.globals;o.isXNumeric&&o.seriesX.forEach(function(c,h){1===c.length&&c.push(o.seriesX[o.maxValsInArrayIndex][o.seriesX[o.maxValsInArrayIndex].length-1]);var _=c.slice();_.sort(function(b,x){return b-x}),_.forEach(function(b,x){if(x>0){var A=b-_[x-1];A>0&&(o.minXDiff=Math.min(A,o.minXDiff))}}),1!==o.dataPoints&&o.minXDiff!==Number.MAX_VALUE||(o.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var o=this,c=this.w.globals;if(c.series.length){var h=c.seriesGroups;h.length||(h=[this.w.config.series.map(function(x){return x.name})]);var _={},b={};h.forEach(function(x){_[x]=[],b[x]=[],o.w.config.series.map(function(A,I){return x.indexOf(A.name)>-1?I:null}).filter(function(A){return null!==A}).forEach(function(A){for(var I=0;I<c.series[c.maxValsInArrayIndex].length;I++){var F,U;void 0===_[x][I]&&(_[x][I]=0,b[x][I]=0),(o.w.config.chart.stacked&&!c.comboCharts||o.w.config.chart.stacked&&c.comboCharts&&(!o.w.config.chart.stackOnlyBar||"bar"===(null===(F=o.w.config.series)||void 0===F||null===(U=F[A])||void 0===U?void 0:U.type)))&&null!==c.series[A][I]&&$e.isNumber(c.series[A][I])&&(c.series[A][I]>0?_[x][I]+=parseFloat(c.series[A][I])+1e-4:b[x][I]+=parseFloat(c.series[A][I]))}})}),Object.entries(_).forEach(function(x){var A=Pt(x,1)[0];_[A].forEach(function(I,F){c.maxY=Math.max(c.maxY,_[A][F]),c.minY=Math.min(c.minY,b[A][F])})})}}}]),le}(),Zi=function(){function le(o,c){V(this,le),this.ctx=o,this.elgrid=c,this.w=o.w;var h=this.w;this.xaxisFontSize=h.config.xaxis.labels.style.fontSize,this.axisFontFamily=h.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=h.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===h.config.chart.type&&h.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===h.config.xaxis.position&&(this.xAxisoffX=h.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Mr(o)}return Ae(le,[{key:"drawYaxis",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=h.config.yaxis[o].labels.style,x=b.fontSize,A=b.fontFamily,I=b.fontWeight,F=_.group({class:"apexcharts-yaxis",rel:o,transform:"translate("+h.globals.translateYAxisX[o]+", 0)"});if(this.axesUtils.isYAxisHidden(o))return F;var U=_.group({class:"apexcharts-yaxis-texts-g"});F.add(U);var $=h.globals.yAxisScale[o].result.length-1,q=h.globals.gridHeight/$,ie=h.globals.translateY,ue=h.globals.yLabelFormatters[o],ge=h.globals.yAxisScale[o].result.slice();ge=this.axesUtils.checkForReversedLabels(o,ge);var we="";if(h.config.yaxis[o].labels.show)for(var me=function(kt){var Dt=ge[kt];Dt=ue(Dt,kt,h);var ei=h.config.yaxis[o].labels.padding;h.config.yaxis[o].opposite&&0!==h.config.yaxis.length&&(ei*=-1);var wi="end";h.config.yaxis[o].opposite&&(wi="start"),"left"===h.config.yaxis[o].labels.align?wi="start":"center"===h.config.yaxis[o].labels.align?wi="middle":"right"===h.config.yaxis[o].labels.align&&(wi="end");var Mi=c.axesUtils.getYAxisForeColor(b.colors,o),dn=h.config.yaxis[o].labels.offsetY;"heatmap"===h.config.chart.type&&(dn-=(h.globals.gridHeight/h.globals.series.length-1)/2);var wn=_.drawText({x:ei,y:ie+$/10+dn+1,text:Dt,textAnchor:wi,fontSize:x,fontFamily:A,fontWeight:I,maxWidth:h.config.yaxis[o].labels.maxWidth,foreColor:Array.isArray(Mi)?Mi[kt]:Mi,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+b.cssClass});kt===$&&(we=wn),U.add(wn);var Fn=document.createElementNS(h.globals.SVGNS,"title");if(Fn.textContent=Array.isArray(Dt)?Dt.join(" "):Dt,wn.node.appendChild(Fn),0!==h.config.yaxis[o].labels.rotate){var Qn=_.rotateAroundCenter(we.node),lr=_.rotateAroundCenter(wn.node);wn.node.setAttribute("transform","rotate(".concat(h.config.yaxis[o].labels.rotate," ").concat(Qn.x," ").concat(lr.y,")"))}ie+=q},Ee=$;Ee>=0;Ee--)me(Ee);if(void 0!==h.config.yaxis[o].title.text){var N=_.group({class:"apexcharts-yaxis-title"}),Q=0;h.config.yaxis[o].opposite&&(Q=h.globals.translateYAxisX[o]);var pe=_.drawText({x:Q,y:h.globals.gridHeight/2+h.globals.translateY+h.config.yaxis[o].title.offsetY,text:h.config.yaxis[o].title.text,textAnchor:"end",foreColor:h.config.yaxis[o].title.style.color,fontSize:h.config.yaxis[o].title.style.fontSize,fontWeight:h.config.yaxis[o].title.style.fontWeight,fontFamily:h.config.yaxis[o].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[o].title.style.cssClass});N.add(pe),F.add(N)}var xe=h.config.yaxis[o].axisBorder,Le=31+xe.offsetX;if(h.config.yaxis[o].opposite&&(Le=-31-xe.offsetX),xe.show){var qe=_.drawLine(Le,h.globals.translateY+xe.offsetY-2,Le,h.globals.gridHeight+h.globals.translateY+xe.offsetY+2,xe.color,0,xe.width);F.add(qe)}return h.config.yaxis[o].axisTicks.show&&this.axesUtils.drawYAxisTicks(Le,$,xe,h.config.yaxis[o].axisTicks,o,q,F),F}},{key:"drawYaxisInversed",value:function(o){var c=this.w,h=new at(this.ctx),_=h.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),b=h.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(c.globals.translateXAxisX,", ").concat(c.globals.translateXAxisY,")")});_.add(b);var x=c.globals.yAxisScale[o].result.length-1,A=c.globals.gridWidth/x+.1,I=A+c.config.xaxis.labels.offsetX,F=c.globals.xLabelFormatter,U=c.globals.yAxisScale[o].result.slice(),$=c.globals.timescaleLabels;$.length>0&&(this.xaxisLabels=$.slice(),x=(U=$.slice()).length),U=this.axesUtils.checkForReversedLabels(o,U);var q=$.length;if(c.config.xaxis.labels.show)for(var ie=q?0:x;q?ie<q:ie>=0;q?ie++:ie--){var ue=U[ie];ue=F(ue,ie,c);var ge=c.globals.gridWidth+c.globals.padHorizontal-(I-A+c.config.xaxis.labels.offsetX);if($.length){var we=this.axesUtils.getLabel(U,$,ge,ie,this.drawnLabels,this.xaxisFontSize);ge=we.x,ue=we.text,this.drawnLabels.push(we.text),0===ie&&c.globals.skipFirstTimelinelabel&&(ue=""),ie===U.length-1&&c.globals.skipLastTimelinelabel&&(ue="")}var me=h.drawText({x:ge,y:this.xAxisoffX+c.config.xaxis.labels.offsetY+30-("top"===c.config.xaxis.position?c.globals.xAxisHeight+c.config.xaxis.axisTicks.height-2:0),text:ue,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[o]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:c.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+c.config.xaxis.labels.style.cssClass});b.add(me),me.tspan(ue);var Ee=document.createElementNS(c.globals.SVGNS,"title");Ee.textContent=ue,me.node.appendChild(Ee),I+=A}return this.inversedYAxisTitleText(_),this.inversedYAxisBorder(_),_}},{key:"inversedYAxisBorder",value:function(o){var c=this.w,h=new at(this.ctx),_=c.config.xaxis.axisBorder;if(_.show){var b=0;"bar"===c.config.chart.type&&c.globals.isXNumeric&&(b-=15);var x=h.drawLine(c.globals.padHorizontal+b+_.offsetX,this.xAxisoffX,c.globals.gridWidth,this.xAxisoffX,_.color,0,_.height);this.elgrid&&this.elgrid.elGridBorders&&c.config.grid.show?this.elgrid.elGridBorders.add(x):o.add(x)}}},{key:"inversedYAxisTitleText",value:function(o){var c=this.w,h=new at(this.ctx);if(void 0!==c.config.xaxis.title.text){var _=h.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),b=h.drawText({x:c.globals.gridWidth/2+c.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(c.config.xaxis.title.style.fontSize)+c.config.xaxis.title.offsetY+20,text:c.config.xaxis.title.text,textAnchor:"middle",fontSize:c.config.xaxis.title.style.fontSize,fontFamily:c.config.xaxis.title.style.fontFamily,fontWeight:c.config.xaxis.title.style.fontWeight,foreColor:c.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+c.config.xaxis.title.style.cssClass});_.add(b),o.add(_)}}},{key:"yAxisTitleRotate",value:function(o,c){var h=this.w,_=new at(this.ctx),b={width:0,height:0},x={width:0,height:0},A=h.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g"));null!==A&&(b=A.getBoundingClientRect());var I=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-title text"));if(null!==I&&(x=I.getBoundingClientRect()),null!==I){var F=this.xPaddingForYAxisTitle(o,b,x,c);I.setAttribute("x",F.xPos-(c?10:0))}if(null!==I){var U=_.rotateAroundCenter(I);I.setAttribute("transform","rotate(".concat(c?-1*h.config.yaxis[o].title.rotate:h.config.yaxis[o].title.rotate," ").concat(U.x," ").concat(U.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(o,c,h,_){var b=this.w,x=0,A=0,I=10;return void 0===b.config.yaxis[o].title.text||o<0?{xPos:A,padd:0}:(_?(A=c.width+b.config.yaxis[o].title.offsetX+h.width/2+I/2,0===(x+=1)&&(A-=I/2)):(A=-1*c.width+b.config.yaxis[o].title.offsetX+I/2+h.width/2,b.globals.isBarHorizontal&&(A=-1*c.width-b.config.yaxis[o].title.offsetX-(I=25))),{xPos:A,padd:I})}},{key:"setYAxisXPosition",value:function(o,c){var h=this.w,_=0,b=0,x=18,A=1;h.config.yaxis.length>1&&(this.multipleYs=!0),h.config.yaxis.map(function(I,F){var U=h.globals.ignoreYAxisIndexes.indexOf(F)>-1||!I.show||I.floating||0===o[F].width,$=o[F].width+c[F].width;I.opposite?h.globals.isBarHorizontal?h.globals.translateYAxisX[F]=(b=h.globals.gridWidth+h.globals.translateX-1)-I.labels.offsetX:(b=h.globals.gridWidth+h.globals.translateX+A,U||(A=A+$+20),h.globals.translateYAxisX[F]=b-I.labels.offsetX+20):(_=h.globals.translateX-x,U||(x=x+$+20),h.globals.translateYAxisX[F]=_+I.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var o=this.w,c=o.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(c=$e.listToArray(c)).forEach(function(h,_){var b=o.config.yaxis[_];if(b&&!b.floating&&void 0!==b.labels.align){var x=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(_,"'] .apexcharts-yaxis-texts-g")),A=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(_,"'] .apexcharts-yaxis-label"));A=$e.listToArray(A);var I=x.getBoundingClientRect();"left"===b.labels.align?(A.forEach(function(F,U){F.setAttribute("text-anchor","start")}),b.opposite||x.setAttribute("transform","translate(-".concat(I.width,", 0)"))):"center"===b.labels.align?(A.forEach(function(F,U){F.setAttribute("text-anchor","middle")}),x.setAttribute("transform","translate(".concat(I.width/2*(b.opposite?1:-1),", 0)"))):"right"===b.labels.align&&(A.forEach(function(F,U){F.setAttribute("text-anchor","end")}),b.opposite&&x.setAttribute("transform","translate(".concat(I.width,", 0)")))}})}}]),le}(),Ui=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.documentEvent=$e.bind(this.documentEvent,this)}return Ae(le,[{key:"addEventListener",value:function(o,c){var h=this.w;h.globals.events.hasOwnProperty(o)?h.globals.events[o].push(c):h.globals.events[o]=[c]}},{key:"removeEventListener",value:function(o,c){var h=this.w;if(h.globals.events.hasOwnProperty(o)){var _=h.globals.events[o].indexOf(c);-1!==_&&h.globals.events[o].splice(_,1)}}},{key:"fireEvent",value:function(o,c){var h=this.w;if(h.globals.events.hasOwnProperty(o)){c&&c.length||(c=[]);for(var _=h.globals.events[o],b=_.length,x=0;x<b;x++)_[x].apply(null,c)}}},{key:"setupEventHandlers",value:function(){var o=this,c=this.w,h=this.ctx,_=c.globals.dom.baseEl.querySelector(c.globals.chartClass);this.ctx.eventList.forEach(function(b){_.addEventListener(b,function(x){var A=Object.assign({},c,{seriesIndex:c.globals.capturedSeriesIndex,dataPointIndex:c.globals.capturedDataPointIndex});"mousemove"===x.type||"touchmove"===x.type?"function"==typeof c.config.chart.events.mouseMove&&c.config.chart.events.mouseMove(x,h,A):"mouseleave"===x.type||"touchleave"===x.type?"function"==typeof c.config.chart.events.mouseLeave&&c.config.chart.events.mouseLeave(x,h,A):("mouseup"===x.type&&1===x.which||"touchend"===x.type)&&("function"==typeof c.config.chart.events.click&&c.config.chart.events.click(x,h,A),h.ctx.events.fireEvent("click",[x,h,A]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(b){c.globals.dom.baseEl.addEventListener(b,o.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(o){var c=this.w,h=o.target.className;if("click"===o.type){var _=c.globals.dom.baseEl.querySelector(".apexcharts-menu");_&&_.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==h&&_.classList.remove("apexcharts-menu-open")}c.globals.clientX="touchmove"===o.type?o.touches[0].clientX:o.clientX,c.globals.clientY="touchmove"===o.type?o.touches[0].clientY:o.clientY}}]),le}(),jn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"setCurrentLocaleValues",value:function(o){var c=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(c=this.w.config.chart.locales.concat(window.Apex.chart.locales));var h=c.filter(function(b){return b.name===o})[0];if(!h)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var _=$e.extend(ni,h);this.w.globals.locale=_.options}}]),le}(),tn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"drawAxis",value:function(o,c){var h,_,b=this,x=this.w.globals,A=this.w.config,I=new gr(this.ctx,c),F=new Zi(this.ctx,c);x.axisCharts&&"radar"!==o&&(x.isBarHorizontal?(_=F.drawYaxisInversed(0),h=I.drawXaxisInversed(0),x.dom.elGraphical.add(h),x.dom.elGraphical.add(_)):(h=I.drawXaxis(),x.dom.elGraphical.add(h),A.yaxis.map(function(U,$){if(-1===x.ignoreYAxisIndexes.indexOf($)&&(_=F.drawYaxis($),x.dom.Paper.add(_),"back"===b.w.config.grid.position)){var q=x.dom.Paper.children()[1];q.remove(),x.dom.Paper.add(q)}})))}}]),le}(),Si=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"drawXCrosshairs",value:function(){var o=this.w,c=new at(this.ctx),h=new oi(this.ctx),_=o.config.xaxis.crosshairs.fill.gradient,b=o.config.xaxis.crosshairs.dropShadow,q=b.enabled,ie=b.left,ue=b.top,ge=b.blur,we=b.color,me=b.opacity,Ee=o.config.xaxis.crosshairs.fill.color;if(o.config.xaxis.crosshairs.show){"gradient"===o.config.xaxis.crosshairs.fill.type&&(Ee=c.drawGradient("vertical",_.colorFrom,_.colorTo,_.opacityFrom,_.opacityTo,null,_.stops,null));var N=c.drawRect();1===o.config.xaxis.crosshairs.width&&(N=c.drawLine());var Q=o.globals.gridHeight;(!$e.isNumber(Q)||Q<0)&&(Q=0);var pe=o.config.xaxis.crosshairs.width;(!$e.isNumber(pe)||pe<0)&&(pe=0),N.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:Q,width:pe,height:Q,fill:Ee,filter:"none","fill-opacity":o.config.xaxis.crosshairs.opacity,stroke:o.config.xaxis.crosshairs.stroke.color,"stroke-width":o.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":o.config.xaxis.crosshairs.stroke.dashArray}),q&&(N=h.dropShadow(N,{left:ie,top:ue,blur:ge,color:we,opacity:me})),o.globals.dom.elGraphical.add(N)}}},{key:"drawYCrosshairs",value:function(){var o=this.w,c=new at(this.ctx),h=o.config.yaxis[0].crosshairs,_=o.globals.barPadForNumericAxis;if(o.config.yaxis[0].crosshairs.show){var b=c.drawLine(-_,0,o.globals.gridWidth+_,0,h.stroke.color,h.stroke.dashArray,h.stroke.width);b.attr({class:"apexcharts-ycrosshairs"}),o.globals.dom.elGraphical.add(b)}var x=c.drawLine(-_,0,o.globals.gridWidth+_,0,h.stroke.color,0,0);x.attr({class:"apexcharts-ycrosshairs-hidden"}),o.globals.dom.elGraphical.add(x)}}]),le}(),mn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"checkResponsiveConfig",value:function(o){var c=this,h=this.w,_=h.config;if(0!==_.responsive.length){var b=_.responsive.slice();b.sort(function(F,U){return F.breakpoint>U.breakpoint?1:U.breakpoint>F.breakpoint?-1:0}).reverse();var x=new fn({}),A=function(){var F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},$=window.innerWidth>0?window.innerWidth:screen.width;if($>b[0].breakpoint){var q=ri.extendArrayProps(x,h.globals.initialConfig,h);F=$e.extend(q,F),F=$e.extend(h.config,F),c.overrideResponsiveOptions(F)}else for(var ie=0;ie<b.length;ie++)$<b[ie].breakpoint&&(F=ri.extendArrayProps(x,b[ie].options,h),F=$e.extend(h.config,F),c.overrideResponsiveOptions(F))};if(o){var I=ri.extendArrayProps(x,o,h);I=$e.extend(h.config,I),A(I=$e.extend(I,o))}else A({})}}},{key:"overrideResponsiveOptions",value:function(o){var c=new fn(o).init({responsiveOverride:!0});this.w.config=c}}]),le}(),Pn=function(){function le(o){V(this,le),this.ctx=o,this.colors=[],this.w=o.w;var c=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===c.config.chart.type&&c.config.plotOptions.treemap.distributed||"heatmap"===c.config.chart.type&&c.config.plotOptions.heatmap.distributed,this.isBarDistributed=c.config.plotOptions.bar.distributed&&("bar"===c.config.chart.type||"rangeBar"===c.config.chart.type)}return Ae(le,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var o,c=this,h=this.w,_=new $e;if(h.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(h.config.theme.mode)),void 0===h.config.colors||0===(null===(o=h.config.colors)||void 0===o?void 0:o.length)?h.globals.colors=this.predefined():(h.globals.colors=h.config.colors,Array.isArray(h.config.colors)&&h.config.colors.length>0&&"function"==typeof h.config.colors[0]&&(h.globals.colors=h.config.series.map(function(ue,ge){var we=h.config.colors[ge];return we||(we=h.config.colors[0]),"function"==typeof we?(c.isColorFn=!0,we({value:h.globals.axisCharts?h.globals.series[ge][0]?h.globals.series[ge][0]:0:h.globals.series[ge],seriesIndex:ge,dataPointIndex:ge,w:h})):we}))),h.globals.seriesColors.map(function(ue,ge){ue&&(h.globals.colors[ge]=ue)}),h.config.theme.monochrome.enabled){var b=[],x=h.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(x=h.globals.series[0].length*h.globals.series.length);for(var A=h.config.theme.monochrome.color,I=1/(x/h.config.theme.monochrome.shadeIntensity),F=h.config.theme.monochrome.shadeTo,U=0,$=0;$<x;$++){var q=void 0;"dark"===F?(q=_.shadeColor(-1*U,A),U+=I):(q=_.shadeColor(U,A),U+=I),b.push(q)}h.globals.colors=b.slice()}var ie=h.globals.colors.slice();this.pushExtraColors(h.globals.colors),["fill","stroke"].forEach(function(ue){h.globals[ue].colors=void 0===h.config[ue].colors?c.isColorFn?h.config.colors:ie:h.config[ue].colors.slice(),c.pushExtraColors(h.globals[ue].colors)}),h.globals.dataLabels.style.colors=void 0===h.config.dataLabels.style.colors?ie:h.config.dataLabels.style.colors.slice(),this.pushExtraColors(h.globals.dataLabels.style.colors,50),h.globals.radarPolygons.fill.colors=void 0===h.config.plotOptions.radar.polygons.fill.colors?["dark"===h.config.theme.mode?"#424242":"none"]:h.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(h.globals.radarPolygons.fill.colors,20),h.globals.markers.colors=void 0===h.config.markers.colors?ie:h.config.markers.colors.slice(),this.pushExtraColors(h.globals.markers.colors)}},{key:"pushExtraColors",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=this.w,b=c||_.globals.series.length;if(null===h&&(h=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===_.config.chart.type&&_.config.plotOptions.heatmap.colorScale.inverse),h&&_.globals.series.length&&(b=_.globals.series[_.globals.maxValsInArrayIndex].length*_.globals.series.length),o.length<b)for(var x=b-o.length,A=0;A<x;A++)o.push(o[A])}},{key:"updateThemeOptions",value:function(o){o.chart=o.chart||{},o.tooltip=o.tooltip||{};var c=o.theme.mode||"light",h=o.theme.palette?o.theme.palette:"dark"===c?"palette4":"palette1",_=o.chart.foreColor?o.chart.foreColor:"dark"===c?"#f6f7f8":"#373d3f";return o.tooltip.theme=c,o.chart.foreColor=_,o.theme.palette=h,o}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),le}(),Lr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(o){var c=this.w,h="title"===o?c.config.title:c.config.subtitle,_=c.globals.svgWidth/2,b=h.offsetY,x="middle";if("left"===h.align?(_=10,x="start"):"right"===h.align&&(_=c.globals.svgWidth-10,x="end"),_+=h.offsetX,b=b+parseInt(h.style.fontSize,10)+h.margin/2,void 0!==h.text){var A=new at(this.ctx).drawText({x:_,y:b,text:h.text,textAnchor:x,fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight,foreColor:h.style.color,opacity:1});A.node.setAttribute("class","apexcharts-".concat(o,"-text")),c.globals.dom.Paper.add(A)}}}]),le}(),Or=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Ae(le,[{key:"getTitleSubtitleCoords",value:function(o){var c=this.w,h=0,_=0,b="title"===o?c.config.title.floating:c.config.subtitle.floating,x=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-text"));if(null!==x&&!b){var A=x.getBoundingClientRect();h=A.width,_=c.globals.axisCharts?A.height+5:A.height}return{width:h,height:_}}},{key:"getLegendsRect",value:function(){var o=this.w,c=o.globals.dom.elLegendWrap;o.config.legend.height||"top"!==o.config.legend.position&&"bottom"!==o.config.legend.position||(c.style.maxHeight=o.globals.svgHeight/2+"px");var h=Object.assign({},$e.getBoundingClientRect(c));return this.dCtx.lgRect=null!==c&&!o.config.legend.floating&&o.config.legend.show?{x:h.x,y:h.y,height:h.height,width:0===h.height?0:h.width}:{x:0,y:0,height:0,width:0},"left"!==o.config.legend.position&&"right"!==o.config.legend.position||1.5*this.dCtx.lgRect.width>o.globals.svgWidth&&(this.dCtx.lgRect.width=o.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(o,c){var h=o;if(this.w.globals.isMultiLineX){var _=c.map(function(x,A){return Array.isArray(x)?x.length:1}),b=Math.max.apply(Math,ot(_));h=c[_.indexOf(b)]}return h}}]),le}(),Sr=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Ae(le,[{key:"getxAxisLabelsCoords",value:function(){var o,c=this.w,h=c.globals.labels.slice();if(c.config.xaxis.convertedCatToNumeric&&0===h.length&&(h=c.globals.categoryLabels),c.globals.timescaleLabels.length>0){var _=this.getxAxisTimeScaleLabelsCoords();o={width:_.width,height:_.height},c.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==c.config.legend.position&&"right"!==c.config.legend.position||c.config.legend.floating?0:this.dCtx.lgRect.width;var b=c.globals.xLabelFormatter,x=$e.getLargestStringFromArr(h),A=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,h);c.globals.isBarHorizontal&&(A=x=c.globals.yAxisScale[0].result.reduce(function(ue,ge){return ue.length>ge.length?ue:ge},0));var I=new Ei(this.dCtx.ctx),F=x;x=I.xLabelFormat(b,x,F,{i:void 0,dateFormatter:new vi(this.dCtx.ctx).formatDate,w:c}),A=I.xLabelFormat(b,A,F,{i:void 0,dateFormatter:new vi(this.dCtx.ctx).formatDate,w:c}),(c.config.xaxis.convertedCatToNumeric&&void 0===x||""===String(x).trim())&&(A=x="1");var U=new at(this.dCtx.ctx),$=U.getTextRects(x,c.config.xaxis.labels.style.fontSize),q=$;if(x!==A&&(q=U.getTextRects(A,c.config.xaxis.labels.style.fontSize)),(o={width:$.width>=q.width?$.width:q.width,height:$.height>=q.height?$.height:q.height}).width*h.length>c.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==c.config.xaxis.labels.rotate||c.config.xaxis.labels.rotateAlways){if(!c.globals.isBarHorizontal){c.globals.rotateXLabels=!0;var ie=function(ue){return U.getTextRects(ue,c.config.xaxis.labels.style.fontSize,c.config.xaxis.labels.style.fontFamily,"rotate(".concat(c.config.xaxis.labels.rotate," 0 0)"),!1)};$=ie(x),x!==A&&(q=ie(A)),o.height=($.height>q.height?$.height:q.height)/1.5,o.width=$.width>q.width?$.width:q.width}}else c.globals.rotateXLabels=!1}return c.config.xaxis.labels.show||(o={width:0,height:0}),{width:o.width,height:o.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var o,c=this.w;if(!c.globals.hasXaxisGroups)return{width:0,height:0};var h,_=(null===(o=c.config.xaxis.group.style)||void 0===o?void 0:o.fontSize)||c.config.xaxis.labels.style.fontSize,b=c.globals.groups.map(function($){return $.title}),x=$e.getLargestStringFromArr(b),A=this.dCtx.dimHelpers.getLargestStringFromMultiArr(x,b),I=new at(this.dCtx.ctx),F=I.getTextRects(x,_),U=F;return x!==A&&(U=I.getTextRects(A,_)),h={width:F.width>=U.width?F.width:U.width,height:F.height>=U.height?F.height:U.height},c.config.xaxis.labels.show||(h={width:0,height:0}),{width:h.width,height:h.height}}},{key:"getxAxisTitleCoords",value:function(){var o=this.w,c=0,h=0;if(void 0!==o.config.xaxis.title.text){var _=new at(this.dCtx.ctx).getTextRects(o.config.xaxis.title.text,o.config.xaxis.title.style.fontSize);c=_.width,h=_.height}return{width:c,height:h}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var o,c=this.w;this.dCtx.timescaleLabels=c.globals.timescaleLabels.slice();var h=this.dCtx.timescaleLabels.map(function(b){return b.value}),_=h.reduce(function(b,x){return void 0===b?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):b.length>x.length?b:x},0);return 1.05*(o=new at(this.dCtx.ctx).getTextRects(_,c.config.xaxis.labels.style.fontSize)).width*h.length>c.globals.gridWidth&&0!==c.config.xaxis.labels.rotate&&(c.globals.overlappingXLabels=!0),o}},{key:"additionalPaddingXLabels",value:function(o){var c=this,h=this.w,_=h.globals,b=h.config,x=b.xaxis.type,A=o.width;_.skipLastTimelinelabel=!1,_.skipFirstTimelinelabel=!1;var I=h.config.yaxis[0].opposite&&h.globals.isBarHorizontal;b.yaxis.forEach(function(U,$){I?(c.dCtx.gridPad.left<A&&(c.dCtx.xPadLeft=A/2+1),c.dCtx.xPadRight=A/2+1):function(U,$){b.yaxis.length>1&&-1!==_.collapsedSeriesIndices.indexOf($)||function(q){if(c.dCtx.timescaleLabels&&c.dCtx.timescaleLabels.length){var ge=c.dCtx.timescaleLabels[0].position-A/1.75+c.dCtx.yAxisWidthLeft;c.dCtx.timescaleLabels[c.dCtx.timescaleLabels.length-1].position+A/1.75-c.dCtx.yAxisWidthRight>_.svgWidth-_.translateX-("right"===h.config.legend.position&&c.dCtx.lgRect.width>0?c.dCtx.lgRect.width:0)&&(_.skipLastTimelinelabel=!0),ge<-(q.show&&!q.floating||"bar"!==b.chart.type&&"candlestick"!==b.chart.type&&"rangeBar"!==b.chart.type&&"boxPlot"!==b.chart.type?10:A/1.75)&&(_.skipFirstTimelinelabel=!0)}else"datetime"===x?c.dCtx.gridPad.right<A&&!_.rotateXLabels&&(_.skipLastTimelinelabel=!0):"datetime"!==x&&c.dCtx.gridPad.right<A/2-c.dCtx.yAxisWidthRight&&!_.rotateXLabels&&!h.config.xaxis.labels.trim&&("between"!==h.config.xaxis.tickPlacement||h.globals.isBarHorizontal)&&(c.dCtx.xPadRight=A/2+1)}(U)}(U,$)})}}]),le}(),vr=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Ae(le,[{key:"getyAxisLabelsCoords",value:function(){var o=this,c=this.w,h=[],_=10,b=new Mr(this.dCtx.ctx);return c.config.yaxis.map(function(x,A){var I={seriesIndex:A,dataPointIndex:-1,w:c},F=c.globals.yAxisScale[A],U=0;if(!b.isYAxisHidden(A)&&x.labels.show&&void 0!==x.labels.minWidth&&(U=x.labels.minWidth),!b.isYAxisHidden(A)&&x.labels.show&&F.result.length){var $=c.globals.yLabelFormatters[A],ie=F.result.reduce(function(Q,pe){var xe,Le;return(null===(xe=String($(Q,I)))||void 0===xe?void 0:xe.length)>(null===(Le=String($(pe,I)))||void 0===Le?void 0:Le.length)?Q:pe},F.niceMin===Number.MIN_VALUE?0:F.niceMin),ue=ie=$(ie,I);if(void 0!==ie&&0!==ie.length||(ie=F.niceMax),c.globals.isBarHorizontal){_=0;var ge=c.globals.labels.slice();ie=$e.getLargestStringFromArr(ge),ie=$(ie,{seriesIndex:A,dataPointIndex:-1,w:c}),ue=o.dCtx.dimHelpers.getLargestStringFromMultiArr(ie,ge)}var we=new at(o.dCtx.ctx),me="rotate(".concat(x.labels.rotate," 0 0)"),Ee=we.getTextRects(ie,x.labels.style.fontSize,x.labels.style.fontFamily,me,!1),N=Ee;ie!==ue&&(N=we.getTextRects(ue,x.labels.style.fontSize,x.labels.style.fontFamily,me,!1)),h.push({width:(U>N.width||U>Ee.width?U:N.width>Ee.width?N.width:Ee.width)+_,height:N.height>Ee.height?N.height:Ee.height})}else h.push({width:0,height:0})}),h}},{key:"getyAxisTitleCoords",value:function(){var o=this,h=[];return this.w.config.yaxis.map(function(_,b){if(_.show&&void 0!==_.title.text){var x=new at(o.dCtx.ctx),A="rotate(".concat(_.title.rotate," 0 0)"),I=x.getTextRects(_.title.text,_.title.style.fontSize,_.title.style.fontFamily,A,!1);h.push({width:I.width,height:I.height})}else h.push({width:0,height:0})}),h}},{key:"getTotalYAxisWidth",value:function(){var o=this.w,c=0,h=0,_=0,b=o.globals.yAxisScale.length>1?10:0,x=new Mr(this.dCtx.ctx),A=function(I,F){var U=o.config.yaxis[F].floating,$=0;I.width>0&&!U?($=I.width+b,o.globals.ignoreYAxisIndexes.indexOf(F)>-1&&($=$-I.width-b)):$=U||x.isYAxisHidden(F)?0:5,o.config.yaxis[F].opposite?_+=$:h+=$,c+=$};return o.globals.yLabelsCoords.map(function(I,F){A(I,F)}),o.globals.yTitleCoords.map(function(I,F){A(I,F)}),o.globals.isBarHorizontal&&!o.config.yaxis[0].floating&&(c=o.globals.yLabelsCoords[0].width+o.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=h,this.dCtx.yAxisWidthRight=_,c}}]),le}(),ar=function(){function le(o){V(this,le),this.w=o.w,this.dCtx=o}return Ae(le,[{key:"gridPadForColumnsInNumericAxis",value:function(o){var c=this.w;if(c.globals.noData||c.globals.allSeriesCollapsed)return 0;var h=function(U){return"bar"===U||"rangeBar"===U||"candlestick"===U||"boxPlot"===U},_=c.config.chart.type,b=0,x=h(_)?c.config.series.length:1;if(c.globals.comboBarCount>0&&(x=c.globals.comboBarCount),c.globals.collapsedSeries.forEach(function(U){h(U.type)&&(x-=1)}),c.config.chart.stacked&&(x=1),(h(_)||c.globals.comboBarCount>0)&&c.globals.isXNumeric&&!c.globals.isBarHorizontal&&x>0){var A,I,F=Math.abs(c.globals.initialMaxX-c.globals.initialMinX);F<=3&&(F=c.globals.dataPoints),A=F/o,c.globals.minXDiff&&c.globals.minXDiff/A>0&&(I=c.globals.minXDiff/A),I>o/2&&(I/=2),(b=I*parseInt(c.config.plotOptions.bar.columnWidth,10)/100)<1&&(b=1),c.globals.barPadForNumericAxis=b}return b}},{key:"gridPadFortitleSubtitle",value:function(){var o=this,c=this.w,h=c.globals,_=this.dCtx.isSparkline||!c.globals.axisCharts?0:10;["title","subtitle"].forEach(function(A){_+=void 0!==c.config[A].text?c.config[A].margin:o.dCtx.isSparkline||!c.globals.axisCharts?0:5}),!c.config.legend.show||"bottom"!==c.config.legend.position||c.config.legend.floating||c.globals.axisCharts||(_+=10);var b=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),x=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");h.gridHeight=h.gridHeight-b.height-x.height-_,h.translateY=h.translateY+b.height+x.height+_}},{key:"setGridXPosForDualYAxis",value:function(o,c){var h=this.w,_=new Mr(this.dCtx.ctx);h.config.yaxis.map(function(b,x){-1!==h.globals.ignoreYAxisIndexes.indexOf(x)||b.floating||_.isYAxisHidden(x)||(b.opposite&&(h.globals.translateX=h.globals.translateX-(c[x].width+o[x].width)-parseInt(h.config.yaxis[x].labels.style.fontSize,10)/1.2-12),h.globals.translateX<2&&(h.globals.translateX=2))})}}]),le}(),kn=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Or(this),this.dimYAxis=new vr(this),this.dimXAxis=new Sr(this),this.dimGrid=new ar(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Ae(le,[{key:"plotCoords",value:function(){var o=this,c=this.w,h=c.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((c.config.markers.discrete.length>0||c.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(b){var x=Pt(b,2);o.gridPad[x[0]]=Math.max(x[1],o.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(c.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(c.config.stroke.width/2,this.gridPad.bottom)),h.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),h.gridHeight=h.gridHeight-this.gridPad.top-this.gridPad.bottom,h.gridWidth=h.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var _=this.dimGrid.gridPadForColumnsInNumericAxis(h.gridWidth);h.gridWidth=h.gridWidth-2*_,h.translateX=h.translateX+this.gridPad.left+this.xPadLeft+(_>0?_+4:0),h.translateY=h.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var o=this,c=this.w,h=c.globals,_=this.dimYAxis.getyAxisLabelsCoords(),b=this.dimYAxis.getyAxisTitleCoords();c.globals.yLabelsCoords=[],c.globals.yTitleCoords=[],c.config.yaxis.map(function(ie,ue){c.globals.yLabelsCoords.push({width:_[ue].width,index:ue}),c.globals.yTitleCoords.push({width:b[ue].width,index:ue})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var x=this.dimXAxis.getxAxisLabelsCoords(),A=this.dimXAxis.getxAxisGroupLabelsCoords(),I=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(x,I,A),h.translateXAxisY=c.globals.rotateXLabels?this.xAxisHeight/8:-4,h.translateXAxisX=c.globals.rotateXLabels&&c.globals.isXNumeric&&c.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,c.globals.isBarHorizontal&&(h.rotateXLabels=!1,h.translateXAxisY=parseInt(c.config.xaxis.labels.style.fontSize,10)/1.5*-1),h.translateXAxisY=h.translateXAxisY+c.config.xaxis.labels.offsetY,h.translateXAxisX=h.translateXAxisX+c.config.xaxis.labels.offsetX;var F=this.yAxisWidth,U=this.xAxisHeight;h.xAxisLabelsHeight=this.xAxisHeight-I.height,h.xAxisGroupLabelsHeight=h.xAxisLabelsHeight-x.height,h.xAxisLabelsWidth=this.xAxisWidth,h.xAxisHeight=this.xAxisHeight;var $=10;("radar"===c.config.chart.type||this.isSparkline)&&(F=0,U=h.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===c.config.chart.type)&&(F=0,U=0,$=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(x);var q=function(){h.translateX=F,h.gridHeight=h.svgHeight-o.lgRect.height-U-(o.isSparkline||"treemap"===c.config.chart.type?0:c.globals.rotateXLabels?10:15),h.gridWidth=h.svgWidth-F};switch("top"===c.config.xaxis.position&&($=h.xAxisHeight-c.config.xaxis.axisTicks.height-5),c.config.legend.position){case"bottom":h.translateY=$,q();break;case"top":h.translateY=this.lgRect.height+$,q();break;case"left":h.translateY=$,h.translateX=this.lgRect.width+F,h.gridHeight=h.svgHeight-U-12,h.gridWidth=h.svgWidth-this.lgRect.width-F;break;case"right":h.translateY=$,h.translateX=F,h.gridHeight=h.svgHeight-U-12,h.gridWidth=h.svgWidth-this.lgRect.width-F-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(b,_),new Zi(this.ctx).setYAxisXPosition(_,b)}},{key:"setDimensionsForNonAxisCharts",value:function(){var o=this.w,c=o.globals,h=o.config,_=0;o.config.legend.show&&!o.config.legend.floating&&(_=20);var b="pie"===h.chart.type||"polarArea"===h.chart.type||"donut"===h.chart.type?"pie":"radialBar",x=h.plotOptions[b].offsetY,A=h.plotOptions[b].offsetX;if(!h.legend.show||h.legend.floating)return c.gridHeight=c.svgHeight-h.grid.padding.left+h.grid.padding.right,c.gridWidth=c.gridHeight,c.translateY=x,void(c.translateX=A+(c.svgWidth-c.gridWidth)/2);switch(h.legend.position){case"bottom":c.gridHeight=c.svgHeight-this.lgRect.height-c.goldenPadding,c.gridWidth=c.svgWidth,c.translateY=x-10,c.translateX=A+(c.svgWidth-c.gridWidth)/2;break;case"top":c.gridHeight=c.svgHeight-this.lgRect.height-c.goldenPadding,c.gridWidth=c.svgWidth,c.translateY=this.lgRect.height+x+10,c.translateX=A+(c.svgWidth-c.gridWidth)/2;break;case"left":c.gridWidth=c.svgWidth-this.lgRect.width-_,c.gridHeight="auto"!==h.chart.height?c.svgHeight:c.gridWidth,c.translateY=x,c.translateX=A+this.lgRect.width+_;break;case"right":c.gridWidth=c.svgWidth-this.lgRect.width-_-5,c.gridHeight="auto"!==h.chart.height?c.svgHeight:c.gridWidth,c.translateY=x,c.translateX=A+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(o,c,h){var _=this.w;this.xAxisHeight=(h.height+o.height+c.height)*(_.globals.isMultiLineX?1.2:_.globals.LINE_HEIGHT_RATIO)+(_.globals.hasXaxisGroups?2:1)*(_.globals.rotateXLabels?22:10)+(_.globals.rotateXLabels&&"bottom"===_.config.legend.position?10:0),this.xAxisWidth=o.width,this.xAxisHeight-c.height>_.config.xaxis.labels.maxHeight&&(this.xAxisHeight=_.config.xaxis.labels.maxHeight),_.config.xaxis.labels.minHeight&&this.xAxisHeight<_.config.xaxis.labels.minHeight&&(this.xAxisHeight=_.config.xaxis.labels.minHeight),_.config.xaxis.floating&&(this.xAxisHeight=0);var U=0,$=0;_.config.yaxis.forEach(function(q){U+=q.labels.minWidth,$+=q.labels.maxWidth}),this.yAxisWidth<U&&(this.yAxisWidth=U),this.yAxisWidth>$&&(this.yAxisWidth=$)}}]),le}(),dr=function(){function le(o){V(this,le),this.w=o.w,this.lgCtx=o}return Ae(le,[{key:"getLegendStyles",value:function(){var o,c,h,_=document.createElement("style");_.setAttribute("type","text/css");var b=(null===(o=this.lgCtx.ctx)||void 0===o||null===(c=o.opts)||void 0===c||null===(h=c.chart)||void 0===h?void 0:h.nonce)||this.w.config.chart.nonce;b&&_.setAttribute("nonce",b);var x=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return _.appendChild(x),_}},{key:"getLegendBBox",value:function(){var o=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:o.height,clww:o.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(o,c){var h=this,_=this.w;if(_.globals.axisCharts||"radialBar"===_.config.chart.type){_.globals.resized=!0;var b=null,x=null;_.globals.risingSeries=[],_.globals.axisCharts?(b=_.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(o,"']")),x=parseInt(b.getAttribute("data:realIndex"),10)):(b=_.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(o+1,"']")),x=parseInt(b.getAttribute("rel"),10)-1),c?[{cs:_.globals.collapsedSeries,csi:_.globals.collapsedSeriesIndices},{cs:_.globals.ancillaryCollapsedSeries,csi:_.globals.ancillaryCollapsedSeriesIndices}].forEach(function(U){h.riseCollapsedSeries(U.cs,U.csi,x)}):this.hideSeries({seriesEl:b,realIndex:x})}else{var A=_.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(o+1,"'] path")),I=_.config.chart.type;if("pie"===I||"polarArea"===I||"donut"===I){var F=_.config.plotOptions.pie.donut.labels;new at(this.lgCtx.ctx).pathMouseDown(A.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(A.members[0].node,F)}A.fire("click")}}},{key:"hideSeries",value:function(o){var c=o.seriesEl,h=o.realIndex,_=this.w,b=$e.clone(_.config.series);if(_.globals.axisCharts){var x=_.config.yaxis[_.globals.seriesYAxisReverseMap[h]];if(x&&x.show&&x.showAlways)_.globals.ancillaryCollapsedSeriesIndices.indexOf(h)<0&&(_.globals.ancillaryCollapsedSeries.push({index:h,data:b[h].data.slice(),type:c.parentNode.className.baseVal.split("-")[1]}),_.globals.ancillaryCollapsedSeriesIndices.push(h));else if(_.globals.collapsedSeriesIndices.indexOf(h)<0){_.globals.collapsedSeries.push({index:h,data:b[h].data.slice(),type:c.parentNode.className.baseVal.split("-")[1]}),_.globals.collapsedSeriesIndices.push(h);var A=_.globals.risingSeries.indexOf(h);_.globals.risingSeries.splice(A,1)}}else _.globals.collapsedSeries.push({index:h,data:b[h]}),_.globals.collapsedSeriesIndices.push(h);for(var I=c.childNodes,F=0;F<I.length;F++)I[F].classList.contains("apexcharts-series-markers-wrap")&&(I[F].classList.contains("apexcharts-hide")?I[F].classList.remove("apexcharts-hide"):I[F].classList.add("apexcharts-hide"));_.globals.allSeriesCollapsed=_.globals.collapsedSeries.length===_.config.series.length,b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(o,c,h){var _=this.w,b=$e.clone(_.config.series);if(o.length>0){for(var x=0;x<o.length;x++)o[x].index===h&&(_.globals.axisCharts?(b[h].data=o[x].data.slice(),o.splice(x,1),c.splice(x,1),_.globals.risingSeries.push(h)):(b[h]=o[x].data,o.splice(x,1),c.splice(x,1),_.globals.risingSeries.push(h)));b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,_.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(o){var c=this.w;return o.forEach(c.globals.axisCharts?function(h,_){c.globals.collapsedSeriesIndices.indexOf(_)>-1&&(o[_].data=[])}:function(h,_){c.globals.collapsedSeriesIndices.indexOf(_)>-1&&(o[_]=0)}),o}}]),le}(),Fr=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new dr(this)}return Ae(le,[{key:"init",value:function(){var o=this.w,c=o.globals,h=o.config;if((h.legend.showForSingleSeries&&1===c.series.length||this.isBarsDistributed||c.series.length>1||!c.axisCharts)&&h.legend.show){for(;c.dom.elLegendWrap.firstChild;)c.dom.elLegendWrap.removeChild(c.dom.elLegendWrap.firstChild);this.drawLegends(),$e.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===h.legend.position||"top"===h.legend.position?this.legendAlignHorizontal():"right"!==h.legend.position&&"left"!==h.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var o=this,c=this.w,h=c.config.legend.fontFamily,_=c.globals.seriesNames,b=c.globals.colors.slice();if("heatmap"===c.config.chart.type){var x=c.config.plotOptions.heatmap.colorScale.ranges;_=x.map(function(Mi){return Mi.name?Mi.name:Mi.from+" - "+Mi.to}),b=x.map(function(Mi){return Mi.color})}else this.isBarsDistributed&&(_=c.globals.labels.slice());c.config.legend.customLegendItems.length&&(_=c.config.legend.customLegendItems);for(var A=c.globals.legendFormatter,I=c.config.legend.inverseOrder,F=I?_.length-1:0;I?F>=0:F<=_.length-1;I?F--:F++){var U,$=A(_[F],{seriesIndex:F,w:c}),q=!1,ie=!1;if(c.globals.collapsedSeries.length>0)for(var ue=0;ue<c.globals.collapsedSeries.length;ue++)c.globals.collapsedSeries[ue].index===F&&(q=!0);if(c.globals.ancillaryCollapsedSeriesIndices.length>0)for(var ge=0;ge<c.globals.ancillaryCollapsedSeriesIndices.length;ge++)c.globals.ancillaryCollapsedSeriesIndices[ge]===F&&(ie=!0);var we=document.createElement("span");we.classList.add("apexcharts-legend-marker");var me=c.config.legend.markers.offsetX,Ee=c.config.legend.markers.offsetY,N=c.config.legend.markers.height,Q=c.config.legend.markers.width,pe=c.config.legend.markers.strokeWidth,xe=c.config.legend.markers.strokeColor,Le=c.config.legend.markers.radius,qe=we.style;qe.background=b[F],qe.color=b[F],qe.setProperty("background",b[F],"important"),c.config.legend.markers.fillColors&&c.config.legend.markers.fillColors[F]&&(qe.background=c.config.legend.markers.fillColors[F]),void 0!==c.globals.seriesColors[F]&&(qe.background=c.globals.seriesColors[F],qe.color=c.globals.seriesColors[F]),qe.height=Array.isArray(N)?parseFloat(N[F])+"px":parseFloat(N)+"px",qe.width=Array.isArray(Q)?parseFloat(Q[F])+"px":parseFloat(Q)+"px",qe.left=(Array.isArray(me)?parseFloat(me[F]):parseFloat(me))+"px",qe.top=(Array.isArray(Ee)?parseFloat(Ee[F]):parseFloat(Ee))+"px",qe.borderWidth=Array.isArray(pe)?pe[F]:pe,qe.borderColor=Array.isArray(xe)?xe[F]:xe,qe.borderRadius=Array.isArray(Le)?parseFloat(Le[F])+"px":parseFloat(Le)+"px",c.config.legend.markers.customHTML&&(Array.isArray(c.config.legend.markers.customHTML)?c.config.legend.markers.customHTML[F]&&(we.innerHTML=c.config.legend.markers.customHTML[F]()):we.innerHTML=c.config.legend.markers.customHTML()),at.setAttrs(we,{rel:F+1,"data:collapsed":q||ie}),(q||ie)&&we.classList.add("apexcharts-inactive-legend");var kt=document.createElement("div"),Dt=document.createElement("span");Dt.classList.add("apexcharts-legend-text"),Dt.innerHTML=Array.isArray($)?$.join(" "):$;var ei=c.config.legend.labels.useSeriesColors?c.globals.colors[F]:Array.isArray(c.config.legend.labels.colors)?null===(U=c.config.legend.labels.colors)||void 0===U?void 0:U[F]:c.config.legend.labels.colors;ei||(ei=c.config.chart.foreColor),Dt.style.color=ei,Dt.style.fontSize=parseFloat(c.config.legend.fontSize)+"px",Dt.style.fontWeight=c.config.legend.fontWeight,Dt.style.fontFamily=h||c.config.chart.fontFamily,at.setAttrs(Dt,{rel:F+1,i:F,"data:default-text":encodeURIComponent($),"data:collapsed":q||ie}),kt.appendChild(we),kt.appendChild(Dt);var wi=new ri(this.ctx);c.config.legend.showForZeroSeries||0===wi.getSeriesTotalByIndex(F)&&wi.seriesHaveSameValues(F)&&!wi.isSeriesNull(F)&&-1===c.globals.collapsedSeriesIndices.indexOf(F)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(F)&&kt.classList.add("apexcharts-hidden-zero-series"),c.config.legend.showForNullSeries||wi.isSeriesNull(F)&&-1===c.globals.collapsedSeriesIndices.indexOf(F)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(F)&&kt.classList.add("apexcharts-hidden-null-series"),c.globals.dom.elLegendWrap.appendChild(kt),c.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(c.config.legend.horizontalAlign)),c.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+c.config.legend.position),kt.classList.add("apexcharts-legend-series"),kt.style.margin="".concat(c.config.legend.itemMargin.vertical,"px ").concat(c.config.legend.itemMargin.horizontal,"px"),c.globals.dom.elLegendWrap.style.width=c.config.legend.width?c.config.legend.width+"px":"",c.globals.dom.elLegendWrap.style.height=c.config.legend.height?c.config.legend.height+"px":"",at.setAttrs(kt,{rel:F+1,seriesName:$e.escapeString(_[F]),"data:collapsed":q||ie}),(q||ie)&&kt.classList.add("apexcharts-inactive-legend"),c.config.legend.onItemClick.toggleDataSeries||kt.classList.add("apexcharts-no-click")}c.globals.dom.elWrap.addEventListener("click",o.onLegendClick,!0),c.config.legend.onItemHover.highlightDataSeries&&0===c.config.legend.customLegendItems.length&&(c.globals.dom.elWrap.addEventListener("mousemove",o.onLegendHovered,!0),c.globals.dom.elWrap.addEventListener("mouseout",o.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(o,c){var h=this.w,_=h.globals.dom.elLegendWrap,b=_.getBoundingClientRect(),x=0,A=0;if("bottom"===h.config.legend.position)A+=h.globals.svgHeight-b.height/2;else if("top"===h.config.legend.position){var I=new kn(this.ctx),F=I.dimHelpers.getTitleSubtitleCoords("title").height,U=I.dimHelpers.getTitleSubtitleCoords("subtitle").height;A=A+(F>0?F-10:0)+(U>0?U-10:0)}_.style.position="absolute",A=A+c+h.config.legend.offsetY,_.style.left=(x=x+o+h.config.legend.offsetX)+"px",_.style.top=A+"px","bottom"===h.config.legend.position?(_.style.top="auto",_.style.bottom=5-h.config.legend.offsetY+"px"):"right"===h.config.legend.position&&(_.style.left="auto",_.style.right=25+h.config.legend.offsetX+"px"),["width","height"].forEach(function($){_.style[$]&&(_.style[$]=parseInt(h.config.legend[$],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var o=this.w;o.globals.dom.elLegendWrap.style.right=0;var c=this.legendHelpers.getLegendBBox(),h=new kn(this.ctx),_=h.dimHelpers.getTitleSubtitleCoords("title"),b=h.dimHelpers.getTitleSubtitleCoords("subtitle"),x=0;"bottom"===o.config.legend.position?x=-c.clwh/1.8:"top"===o.config.legend.position&&(x=_.height+b.height+o.config.title.margin+o.config.subtitle.margin-10),this.setLegendWrapXY(20,x)}},{key:"legendAlignVertical",value:function(){var o=this.w,c=this.legendHelpers.getLegendBBox(),h=0;"left"===o.config.legend.position&&(h=20),"right"===o.config.legend.position&&(h=o.globals.svgWidth-c.clww-10),this.setLegendWrapXY(h,20)}},{key:"onLegendHovered",value:function(o){var c=this.w,h=o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker");if("heatmap"===c.config.chart.type||this.isBarsDistributed){if(h){var _=parseInt(o.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,_,this.w]),new Dn(this.ctx).highlightRangeInSeries(o,o.target)}}else!o.target.classList.contains("apexcharts-inactive-legend")&&h&&new Dn(this.ctx).toggleSeriesOnHover(o,o.target)}},{key:"onLegendClick",value:function(o){var c=this.w;if(!c.config.legend.customLegendItems.length&&(o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker"))){var h=parseInt(o.target.getAttribute("rel"),10)-1,_="true"===o.target.getAttribute("data:collapsed"),b=this.w.config.chart.events.legendClick;"function"==typeof b&&b(this.ctx,h,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,h,this.w]);var x=this.w.config.legend.markers.onClick;"function"==typeof x&&o.target.classList.contains("apexcharts-legend-marker")&&(x(this.ctx,h,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,h,this.w])),"treemap"!==c.config.chart.type&&"heatmap"!==c.config.chart.type&&!this.isBarsDistributed&&c.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(h,_)}}}]),le}(),Cs=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=c.globals.minX,this.maxX=c.globals.maxX}return Ae(le,[{key:"createToolbar",value:function(){var o=this,c=this.w,h=function(){return document.createElement("div")},_=h();if(_.setAttribute("class","apexcharts-toolbar"),_.style.top=c.config.chart.toolbar.offsetY+"px",_.style.right=3-c.config.chart.toolbar.offsetX+"px",c.globals.dom.elWrap.appendChild(_),this.elZoom=h(),this.elZoomIn=h(),this.elZoomOut=h(),this.elPan=h(),this.elSelection=h(),this.elZoomReset=h(),this.elMenuIcon=h(),this.elMenu=h(),this.elCustomIcons=[],this.t=c.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var b=0;b<this.t.customIcons.length;b++)this.elCustomIcons.push(h());var x=[],A=function($,q,ie){var ue=$.toLowerCase();o.t[ue]&&c.config.chart.zoom.enabled&&x.push({el:q,icon:"string"==typeof o.t[ue]?o.t[ue]:ie,title:o.localeValues[$],class:"apexcharts-".concat(ue,"-icon")})};A("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),A("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var I=function($){o.t[$]&&c.config.chart[$].enabled&&x.push({el:"zoom"===$?o.elZoom:o.elSelection,icon:"string"==typeof o.t[$]?o.t[$]:"zoom"===$?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:o.localeValues["zoom"===$?"selectionZoom":"selection"],class:c.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat($,"-icon")})};I("zoom"),I("selection"),this.t.pan&&c.config.chart.zoom.enabled&&x.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:c.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),A("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&x.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var F=0;F<this.elCustomIcons.length;F++)x.push({el:this.elCustomIcons[F],icon:this.t.customIcons[F].icon,title:this.t.customIcons[F].title,index:this.t.customIcons[F].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[F].class});x.forEach(function($,q){$.index&&$e.moveIndexInArray(x,q,$.index)});for(var U=0;U<x.length;U++)at.setAttrs(x[U].el,{class:x[U].class,title:x[U].title}),x[U].el.innerHTML=x[U].icon,_.appendChild(x[U].el);this._createHamburgerMenu(_),c.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):c.globals.panEnabled?this.elPan.classList.add(this.selectedClass):c.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(o){this.elMenuItems=[],o.appendChild(this.elMenu),at.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var c=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],h=0;h<c.length;h++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[h].innerHTML=c[h].title,at.setAttrs(this.elMenuItems[h],{class:"apexcharts-menu-item ".concat(c[h].name),title:c[h].title}),this.elMenu.appendChild(this.elMenuItems[h])}},{key:"addToolbarEventListeners",value:function(){var o=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(h){h.classList.contains("exportSVG")?h.addEventListener("click",o.handleDownload.bind(o,"svg")):h.classList.contains("exportPNG")?h.addEventListener("click",o.handleDownload.bind(o,"png")):h.classList.contains("exportCSV")&&h.addEventListener("click",o.handleDownload.bind(o,"csv"))});for(var c=0;c<this.t.customIcons.length;c++)this.elCustomIcons[c].addEventListener("click",this.t.customIcons[c].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(o){this.ctx.getSyncedCharts().forEach(function(c){c.ctx.toolbar.toggleOtherControls();var h="selection"===o?c.ctx.toolbar.elSelection:c.ctx.toolbar.elZoom,_="selection"===o?"selectionEnabled":"zoomEnabled";c.w.globals[_]=!c.w.globals[_],h.classList.contains(c.ctx.toolbar.selectedClass)?h.classList.remove(c.ctx.toolbar.selectedClass):h.classList.add(c.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var o=this.w;this.elZoom||(this.elZoom=o.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=o.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=o.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(o){this.toggleOtherControls(),"pan"===o?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var c="pan"===o?this.elPan:this.elZoom,h="pan"===o?this.elZoom:this.elPan;c&&c.classList.add(this.selectedClass),h&&h.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(o){o.ctx.toolbar.toggleOtherControls(),o.w.globals.panEnabled=!o.w.globals.panEnabled,o.ctx.toolbar.elPan.classList.contains(o.ctx.toolbar.selectedClass)?o.ctx.toolbar.elPan.classList.remove(o.ctx.toolbar.selectedClass):o.ctx.toolbar.elPan.classList.add(o.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var o=this,c=this.w;c.globals.panEnabled=!1,c.globals.zoomEnabled=!1,c.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(h){h&&h.classList.remove(o.selectedClass)})}},{key:"handleZoomIn",value:function(){var o=this.w;o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY);var c=(this.minX+this.maxX)/2,b=this._getNewMinXMaxX((this.minX+c)/2,(this.maxX+c)/2);o.globals.disableZoomIn||this.zoomUpdateOptions(b.minX,b.maxX)}},{key:"handleZoomOut",value:function(){var o=this.w;if(o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY),!("datetime"===o.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var c=(this.minX+this.maxX)/2,b=this._getNewMinXMaxX(this.minX-(c-this.minX),this.maxX-(c-this.maxX));o.globals.disableZoomOut||this.zoomUpdateOptions(b.minX,b.maxX)}}},{key:"_getNewMinXMaxX",value:function(o,c){var h=this.w.config.xaxis.convertedCatToNumeric;return{minX:h?Math.floor(o):o,maxX:h?Math.floor(c):c}}},{key:"zoomUpdateOptions",value:function(o,c){var h=this.w;if(void 0!==o||void 0!==c){if(!(h.config.xaxis.convertedCatToNumeric&&(o<1&&(o=1,c=h.globals.dataPoints),c-o<2))){var _={min:o,max:c},b=this.getBeforeZoomRange(_);b&&(_=b.xaxis);var x={xaxis:_},A=$e.clone(h.globals.initialConfig.yaxis);h.config.chart.group||(x.yaxis=A),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(x,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(_,A)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(o,c){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:o,yaxis:c})}},{key:"getBeforeZoomRange",value:function(o,c){var h=null;return"function"==typeof this.ev.beforeZoom&&(h=this.ev.beforeZoom(this,{xaxis:o,yaxis:c})),h}},{key:"toggleMenu",value:function(){var o=this;window.setTimeout(function(){o.elMenu.classList.contains("apexcharts-menu-open")?o.elMenu.classList.remove("apexcharts-menu-open"):o.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(o){var c=this.w,h=new or(this.ctx);switch(o){case"svg":h.exportToSVG(this.ctx);break;case"png":h.exportToPng(this.ctx);break;case"csv":h.exportToCSV({series:c.config.series,columnDelimiter:c.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(o){this.ctx.getSyncedCharts().forEach(function(c){var h=c.w;if(h.globals.lastXAxis.min=h.globals.initialConfig.xaxis.min,h.globals.lastXAxis.max=h.globals.initialConfig.xaxis.max,c.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof h.config.chart.events.beforeResetZoom){var _=h.config.chart.events.beforeResetZoom(c,h);_&&c.updateHelpers.revertDefaultAxisMinMax(_)}"function"==typeof h.config.chart.events.zoomed&&c.ctx.toolbar.zoomCallback({min:h.config.xaxis.min,max:h.config.xaxis.max}),h.globals.zoomed=!1;var b=c.ctx.series.emptyCollapsedSeries($e.clone(h.globals.initialSeries));c.updateHelpers._updateSeries(b,h.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),le}(),er=function(le){Fe(c,Cs);var o=mt(c);function c(h){var _;return V(this,c),(_=o.call(this,h)).ctx=h,_.w=h.w,_.dragged=!1,_.graphics=new at(_.ctx),_.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],_.clientX=0,_.clientY=0,_.startX=0,_.endX=0,_.dragX=0,_.startY=0,_.endY=0,_.dragY=0,_.moveDirection="none",_}return Ae(c,[{key:"init",value:function(h){var _=this,b=h.xyRatios,x=this.w,A=this;this.xyRatios=b,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=x.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),x.globals.dom.elGraphical.add(this.zoomRect),x.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:x.globals.gridWidth,maxY:x.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===x.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:x.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=x.globals.dom.baseEl.querySelector("".concat(x.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(I){_.hoverArea.addEventListener(I,A.svgMouseEvents.bind(A,b),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(h,_){var b=this.w,x=this,A=this.ctx.toolbar,I=b.globals.zoomEnabled?b.config.chart.zoom.type:b.config.chart.selection.type,F=b.config.chart.toolbar.autoSelected;if(_.shiftKey?(this.shiftWasPressed=!0,A.enableZoomPanFromToolbar("pan"===F?"zoom":"pan")):this.shiftWasPressed&&(A.enableZoomPanFromToolbar(F),this.shiftWasPressed=!1),_.target){var U,$=_.target.classList;if(_.target.parentNode&&null!==_.target.parentNode&&(U=_.target.parentNode.classList),!($.contains("apexcharts-selection-rect")||$.contains("apexcharts-legend-marker")||$.contains("apexcharts-legend-text")||U&&U.contains("apexcharts-toolbar"))){if(x.clientX="touchmove"===_.type||"touchstart"===_.type?_.touches[0].clientX:"touchend"===_.type?_.changedTouches[0].clientX:_.clientX,x.clientY="touchmove"===_.type||"touchstart"===_.type?_.touches[0].clientY:"touchend"===_.type?_.changedTouches[0].clientY:_.clientY,("mousedown"===_.type||"touchmove"===_.type)&&1===_.which){var q=x.gridRect.getBoundingClientRect();x.startX=x.clientX-q.left,x.startY=x.clientY-q.top,x.dragged=!1,x.w.globals.mousedown=!0}if("mousemove"===_.type&&1===_.which||"touchmove"===_.type)if(x.dragged=!0,b.globals.panEnabled){if(b.globals.selection=null,x.w.globals.mousedown||"touchmove"===_.type){if("touchmove"===_.type&&!x.w.globals.mousedown){console.warn("me.w.globals.mousedown ",x.w.globals.mousedown);var ie=x.gridRect.getBoundingClientRect();x.startX=x.clientX-ie.left,x.startY=x.clientY-ie.top,x.w.globals.mousedown=!0}x.panDragging({context:x,zoomtype:I,xyRatios:h})}}else{if("touchmove"===_.type){if(!x.w.globals.mousedown){var ue=x.gridRect.getBoundingClientRect();x.startX=x.clientX-ue.left,x.startY=x.clientY-ue.top}x.w.globals.mousedown=!0}(x.w.globals.mousedown&&b.globals.zoomEnabled||x.w.globals.mousedown&&b.globals.selectionEnabled)&&(x.selection=x.selectionDrawing({context:x,zoomtype:I}))}if("mouseup"===_.type||"touchend"===_.type||"mouseleave"===_.type){var ge=x.gridRect.getBoundingClientRect();x.w.globals.mousedown&&(x.endX=x.clientX-ge.left,x.endY=x.clientY-ge.top,x.dragX=Math.abs(x.endX-x.startX),x.dragY=Math.abs(x.endY-x.startY),(b.globals.zoomEnabled||b.globals.selectionEnabled)&&x.selectionDrawn({context:x,zoomtype:I}),b.globals.panEnabled&&b.config.xaxis.convertedCatToNumeric&&x.delayedPanScrolled()),b.globals.zoomEnabled&&x.hideSelectionRect(this.selectionRect),x.dragged=!1,x.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var h=this.w;if(this.selectionRect){var _=this.selectionRect.node.getBoundingClientRect();_.width>0&&_.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:h.globals.gridWidth,maxY:h.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var h=this.w,_=this.xyRatios;if(!h.globals.zoomEnabled)if(null!=h.globals.selection)this.drawSelectionRect(h.globals.selection);else if(void 0!==h.config.chart.selection.xaxis.min&&void 0!==h.config.chart.selection.xaxis.max){var b=(h.config.chart.selection.xaxis.min-h.globals.minX)/_.xRatio,x=h.globals.gridWidth-(h.globals.maxX-h.config.chart.selection.xaxis.max)/_.xRatio-b;h.globals.isRangeBar&&(b=(h.config.chart.selection.xaxis.min-h.globals.yAxisScale[0].niceMin)/_.invertedYRatio,x=(h.config.chart.selection.xaxis.max-h.config.chart.selection.xaxis.min)/_.invertedYRatio),this.drawSelectionRect({x:b,y:0,width:x,height:h.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof h.config.chart.events.selection&&h.config.chart.events.selection(this.ctx,{xaxis:{min:h.config.chart.selection.xaxis.min,max:h.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(h){var _=h.x,b=h.y,x=h.width,A=h.height,I=h.translateX,U=h.translateY,q=this.w,ie=this.zoomRect,ue=this.selectionRect;if(this.dragged||null!==q.globals.selection){var ge={transform:"translate("+(void 0===I?0:I)+", "+(void 0===U?0:U)+")"};q.globals.zoomEnabled&&this.dragged&&(x<0&&(x=1),ie.attr({x:_,y:b,width:x,height:A,fill:q.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":q.config.chart.zoom.zoomedArea.fill.opacity,stroke:q.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":q.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":q.config.chart.zoom.zoomedArea.stroke.opacity}),at.setAttrs(ie.node,ge)),q.globals.selectionEnabled&&(ue.attr({x:_,y:b,width:x>0?x:0,height:A>0?A:0,fill:q.config.chart.selection.fill.color,"fill-opacity":q.config.chart.selection.fill.opacity,stroke:q.config.chart.selection.stroke.color,"stroke-width":q.config.chart.selection.stroke.width,"stroke-dasharray":q.config.chart.selection.stroke.dashArray,"stroke-opacity":q.config.chart.selection.stroke.opacity}),at.setAttrs(ue.node,ge))}}},{key:"hideSelectionRect",value:function(h){h&&h.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(h){var ge,b=h.zoomtype,x=this.w,A=h.context,I=this.gridRect.getBoundingClientRect(),F=A.startX-1,U=A.startY,$=!1,q=!1,ie=A.clientX-I.left-F,ue=A.clientY-I.top-U;return Math.abs(ie+F)>x.globals.gridWidth?ie=x.globals.gridWidth-F:A.clientX-I.left<0&&(ie=F),F>A.clientX-I.left&&($=!0,ie=Math.abs(ie)),U>A.clientY-I.top&&(q=!0,ue=Math.abs(ue)),A.drawSelectionRect(ge="x"===b?{x:$?F-ie:F,y:0,width:ie,height:x.globals.gridHeight}:"y"===b?{x:0,y:q?U-ue:U,width:x.globals.gridWidth,height:ue}:{x:$?F-ie:F,y:q?U-ue:U,width:ie,height:ue}),A.selectionDragging("resizing"),ge}},{key:"selectionDragging",value:function(h,_){var b=this,x=this.w,A=this.xyRatios,I=this.selectionRect,F=0;"resizing"===h&&(F=30);var U=function(q){return parseFloat(I.node.getAttribute(q))},$={x:U("x"),y:U("y"),width:U("width"),height:U("height")};x.globals.selection=$,"function"==typeof x.config.chart.events.selection&&x.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var q,ie,ue,ge,we=b.gridRect.getBoundingClientRect(),me=I.node.getBoundingClientRect();x.globals.isRangeBar?(q=x.globals.yAxisScale[0].niceMin+(me.left-we.left)*A.invertedYRatio,ie=x.globals.yAxisScale[0].niceMin+(me.right-we.left)*A.invertedYRatio,ue=0,ge=1):(q=x.globals.xAxisScale.niceMin+(me.left-we.left)*A.xRatio,ie=x.globals.xAxisScale.niceMin+(me.right-we.left)*A.xRatio,ue=x.globals.yAxisScale[0].niceMin+(we.bottom-me.bottom)*A.yRatio[0],ge=x.globals.yAxisScale[0].niceMax-(me.top-we.top)*A.yRatio[0]);var Ee={xaxis:{min:q,max:ie},yaxis:{min:ue,max:ge}};x.config.chart.events.selection(b.ctx,Ee),x.config.chart.brush.enabled&&void 0!==x.config.chart.events.brushScrolled&&x.config.chart.events.brushScrolled(b.ctx,Ee)},F))}},{key:"selectionDrawn",value:function(h){var b=h.zoomtype,x=this.w,A=h.context,I=this.xyRatios,F=this.ctx.toolbar;if(A.startX>A.endX){var U=A.startX;A.startX=A.endX,A.endX=U}if(A.startY>A.endY){var $=A.startY;A.startY=A.endY,A.endY=$}var q=void 0,ie=void 0;x.globals.isRangeBar?(q=x.globals.yAxisScale[0].niceMin+A.startX*I.invertedYRatio,ie=x.globals.yAxisScale[0].niceMin+A.endX*I.invertedYRatio):(q=x.globals.xAxisScale.niceMin+A.startX*I.xRatio,ie=x.globals.xAxisScale.niceMin+A.endX*I.xRatio);var ue=[],ge=[];if(x.config.yaxis.forEach(function(xe,Le){ue.push(x.globals.yAxisScale[Le].niceMax-I.yRatio[Le]*A.startY),ge.push(x.globals.yAxisScale[Le].niceMax-I.yRatio[Le]*A.endY)}),A.dragged&&(A.dragX>10||A.dragY>10)&&q!==ie)if(x.globals.zoomEnabled){var we=$e.clone(x.globals.initialConfig.yaxis),me=$e.clone(x.globals.initialConfig.xaxis);if(x.globals.zoomed=!0,x.config.xaxis.convertedCatToNumeric&&(q=Math.floor(q),ie=Math.floor(ie),q<1&&(q=1,ie=x.globals.dataPoints),ie-q<2&&(ie=q+1)),"xy"!==b&&"x"!==b||(me={min:q,max:ie}),"xy"!==b&&"y"!==b||we.forEach(function(xe,Le){we[Le].min=ge[Le],we[Le].max=ue[Le]}),F){var Ee=F.getBeforeZoomRange(me,we);Ee&&(me=Ee.xaxis?Ee.xaxis:me,we=Ee.yaxis?Ee.yaxis:we)}var N={xaxis:me};x.config.chart.group||(N.yaxis=we),A.ctx.updateHelpers._updateOptions(N,!1,A.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof x.config.chart.events.zoomed&&F.zoomCallback(me,we)}else if(x.globals.selectionEnabled){var Q,pe=null;Q={min:q,max:ie},"xy"!==b&&"y"!==b||(pe=$e.clone(x.config.yaxis)).forEach(function(xe,Le){pe[Le].min=ge[Le],pe[Le].max=ue[Le]}),x.globals.selection=A.selection,"function"==typeof x.config.chart.events.selection&&x.config.chart.events.selection(A.ctx,{xaxis:Q,yaxis:pe})}}},{key:"panDragging",value:function(h){var b=this.w,x=h.context;if(void 0!==b.globals.lastClientPosition.x){var A=b.globals.lastClientPosition.x-x.clientX,I=b.globals.lastClientPosition.y-x.clientY;Math.abs(A)>Math.abs(I)&&A>0?this.moveDirection="left":Math.abs(A)>Math.abs(I)&&A<0?this.moveDirection="right":Math.abs(I)>Math.abs(A)&&I>0?this.moveDirection="up":Math.abs(I)>Math.abs(A)&&I<0&&(this.moveDirection="down")}b.globals.lastClientPosition={x:x.clientX,y:x.clientY},b.config.xaxis.convertedCatToNumeric||x.panScrolled(b.globals.isRangeBar?b.globals.minY:b.globals.minX,b.globals.isRangeBar?b.globals.maxY:b.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var h=this.w,_=h.globals.minX,b=h.globals.maxX,x=(h.globals.maxX-h.globals.minX)/2;"left"===this.moveDirection?(_=h.globals.minX+x,b=h.globals.maxX+x):"right"===this.moveDirection&&(_=h.globals.minX-x,b=h.globals.maxX-x),_=Math.floor(_),b=Math.floor(b),this.updateScrolledChart({xaxis:{min:_,max:b}},_,b)}},{key:"panScrolled",value:function(h,_){var b=this.w,x=this.xyRatios,A=$e.clone(b.globals.initialConfig.yaxis),I=x.xRatio,F=b.globals.minX,U=b.globals.maxX;b.globals.isRangeBar&&(I=x.invertedYRatio,F=b.globals.minY,U=b.globals.maxY),"left"===this.moveDirection?(h=F+b.globals.gridWidth/15*I,_=U+b.globals.gridWidth/15*I):"right"===this.moveDirection&&(h=F-b.globals.gridWidth/15*I,_=U-b.globals.gridWidth/15*I),b.globals.isRangeBar||(h<b.globals.initialMinX||_>b.globals.initialMaxX)&&(h=F,_=U);var $={xaxis:{min:h,max:_}};b.config.chart.group||($.yaxis=A),this.updateScrolledChart($,h,_)}},{key:"updateScrolledChart",value:function(h,_,b){var x=this.w;this.ctx.updateHelpers._updateOptions(h,!1,!1),"function"==typeof x.config.chart.events.scrolled&&x.config.chart.events.scrolled(this.ctx,{xaxis:{min:_,max:b}})}}]),c}(),br=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx}return Ae(le,[{key:"getNearestValues",value:function(o){var c=o.hoverArea,_=o.clientX,b=o.clientY,x=this.w,A=o.elGrid.getBoundingClientRect(),I=A.width,F=A.height,U=I/(x.globals.dataPoints-1),$=F/x.globals.dataPoints,q=this.hasBars();!x.globals.comboCharts&&!q||x.config.xaxis.convertedCatToNumeric||(U=I/x.globals.dataPoints);var ie=_-A.left-x.globals.barPadForNumericAxis,ue=b-A.top;ie<0||ue<0||ie>I||ue>F?(c.classList.remove("hovering-zoom"),c.classList.remove("hovering-pan")):x.globals.zoomEnabled?(c.classList.remove("hovering-pan"),c.classList.add("hovering-zoom")):x.globals.panEnabled&&(c.classList.remove("hovering-zoom"),c.classList.add("hovering-pan"));var ge=Math.round(ie/U),we=Math.floor(ue/$);q&&!x.config.xaxis.convertedCatToNumeric&&(ge=Math.ceil(ie/U),ge-=1);var me=null,Ee=null,N=x.globals.seriesXvalues.map(function(qe){return qe.filter(function(kt){return $e.isNumber(kt)})}),Q=x.globals.seriesYvalues.map(function(qe){return qe.filter(function(kt){return $e.isNumber(kt)})});if(x.globals.isXNumeric){var pe=this.ttCtx.getElGrid().getBoundingClientRect(),xe=ie*(pe.width/I);me=(Ee=this.closestInMultiArray(xe,ue*(pe.height/F),N,Q)).index,ge=Ee.j,null!==me&&(ge=(Ee=this.closestInArray(xe,N=x.globals.seriesXvalues[me])).index)}return x.globals.capturedSeriesIndex=null===me?-1:me,(!ge||ge<1)&&(ge=0),x.globals.capturedDataPointIndex=x.globals.isBarHorizontal?we:ge,{capturedSeries:me,j:x.globals.isBarHorizontal?we:ge,hoverX:ie,hoverY:ue}}},{key:"closestInMultiArray",value:function(o,c,h,_){var x=0,A=null,I=-1;this.w.globals.series.length>1?x=this.getFirstActiveXArray(h):A=0;var U=Math.abs(o-h[x][0]);if(h.forEach(function(ie){ie.forEach(function(ue,ge){var we=Math.abs(o-ue);we<=U&&(U=we,I=ge)})}),-1!==I){var q=Math.abs(c-_[x][I]);A=x,_.forEach(function(ie,ue){var ge=Math.abs(c-ie[I]);ge<=q&&(q=ge,A=ue)})}return{index:A,j:I}}},{key:"getFirstActiveXArray",value:function(o){for(var c=this.w,h=0,_=o.map(function(x,A){return x.length>0?A:-1}),b=0;b<_.length;b++)if(-1!==_[b]&&-1===c.globals.collapsedSeriesIndices.indexOf(b)&&-1===c.globals.ancillaryCollapsedSeriesIndices.indexOf(b)){h=_[b];break}return h}},{key:"closestInArray",value:function(o,c){for(var _=null,b=Math.abs(o-c[0]),x=0;x<c.length;x++){var A=Math.abs(o-c[x]);A<b&&(b=A,_=x)}return{index:_}}},{key:"isXoverlap",value:function(o){var c=[],h=this.w.globals.seriesX.filter(function(b){return void 0!==b[0]});if(h.length>0)for(var _=0;_<h.length-1;_++)void 0!==h[_][o]&&void 0!==h[_+1][o]&&h[_][o]!==h[_+1][o]&&c.push("unEqual");return 0===c.length}},{key:"isInitialSeriesSameLen",value:function(){for(var o=!0,c=this.w.globals.initialSeries,h=0;h<c.length-1;h++)if(c[h].data.length!==c[h+1].data.length){o=!1;break}return o}},{key:"getBarsHeight",value:function(o){return ot(o).reduce(function(c,h){return c+h.getBBox().height},0)}},{key:"getElMarkers",value:function(o){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof o?".apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(o=ot(o)).sort(function(h,_){var b=Number(h.getAttribute("data:realIndex")),x=Number(_.getAttribute("data:realIndex"));return x<b?1:x>b?-1:0});var c=[];return o.forEach(function(h){c.push(h.querySelector(".apexcharts-marker"))}),c}},{key:"hasMarkers",value:function(o){return this.getElMarkers(o).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(o){var c=this.w,h=c.config.markers.hover.size;return void 0===h&&(h=c.globals.markers.size[o]+c.config.markers.hover.sizeOffset),h}},{key:"toggleAllTooltipSeriesGroups",value:function(o){var c=this.w,h=this.ttCtx;0===h.allTooltipSeriesGroups.length&&(h.allTooltipSeriesGroups=c.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var _=h.allTooltipSeriesGroups,b=0;b<_.length;b++)"enable"===o?(_[b].classList.add("apexcharts-active"),_[b].style.display=c.config.tooltip.items.display):(_[b].classList.remove("apexcharts-active"),_[b].style.display="none")}}]),le}(),mr=function(){function le(o){V(this,le),this.w=o.w,this.ctx=o.ctx,this.ttCtx=o,this.tooltipUtil=new br(o)}return Ae(le,[{key:"drawSeriesTexts",value:function(o){var c=o.shared,h=void 0===c||c,_=o.ttItems,b=o.i,x=void 0===b?0:b,A=o.j,I=void 0===A?null:A,$=o.e,q=this.w;void 0!==q.config.tooltip.custom?this.handleCustomTooltip({i:x,j:I,y1:o.y1,y2:o.y2,w:q}):this.toggleActiveInactiveSeries(h);var ie=this.getValuesToPrint({i:x,j:I});this.printLabels({i:x,j:I,values:ie,ttItems:_,shared:h,e:$});var ue=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=ue.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=ue.getBoundingClientRect().height}},{key:"printLabels",value:function(o){var c,h=this,_=o.i,b=o.j,x=o.values,A=o.ttItems,I=o.shared,F=o.e,U=this.w,$=[],q=function(pe){return U.globals.seriesGoals[pe]&&U.globals.seriesGoals[pe][b]&&Array.isArray(U.globals.seriesGoals[pe][b])},ie=x.xVal,ue=x.zVal,ge=x.xAxisTTVal,we="",me=U.globals.colors[_];null!==b&&U.config.plotOptions.bar.distributed&&(me=U.globals.colors[b]);for(var Ee=function(pe,xe){var Le=h.getFormatters(_);we=h.getSeriesName({fn:Le.yLbTitleFormatter,index:_,seriesIndex:_,j:b}),"treemap"===U.config.chart.type&&(we=Le.yLbTitleFormatter(String(U.config.series[_].data[b].x),{series:U.globals.series,seriesIndex:_,dataPointIndex:b,w:U}));var qe=U.config.tooltip.inverseOrder?xe:pe;if(U.globals.axisCharts){var kt=function(wi){var Mi,dn,wn,Fn;return U.globals.isRangeData?Le.yLbFormatter(null===(Mi=U.globals.seriesRangeStart)||void 0===Mi||null===(dn=Mi[wi])||void 0===dn?void 0:dn[b],{series:U.globals.seriesRangeStart,seriesIndex:wi,dataPointIndex:b,w:U})+" - "+Le.yLbFormatter(null===(wn=U.globals.seriesRangeEnd)||void 0===wn||null===(Fn=wn[wi])||void 0===Fn?void 0:Fn[b],{series:U.globals.seriesRangeEnd,seriesIndex:wi,dataPointIndex:b,w:U}):Le.yLbFormatter(U.globals.series[wi][b],{series:U.globals.series,seriesIndex:wi,dataPointIndex:b,w:U})};if(I)Le=h.getFormatters(qe),we=h.getSeriesName({fn:Le.yLbTitleFormatter,index:qe,seriesIndex:_,j:b}),me=U.globals.colors[qe],c=kt(qe),q(qe)&&($=U.globals.seriesGoals[qe][b].map(function(wi){return{attrs:wi,val:Le.yLbFormatter(wi.value,{seriesIndex:qe,dataPointIndex:b,w:U})}}));else{var Dt,ei=null==F||null===(Dt=F.target)||void 0===Dt?void 0:Dt.getAttribute("fill");ei&&(me=-1!==ei.indexOf("url")?document.querySelector(ei.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):ei),c=kt(_),q(_)&&Array.isArray(U.globals.seriesGoals[_][b])&&($=U.globals.seriesGoals[_][b].map(function(wi){return{attrs:wi,val:Le.yLbFormatter(wi.value,{seriesIndex:_,dataPointIndex:b,w:U})}}))}}null===b&&(c=Le.yLbFormatter(U.globals.series[_],ze(ze({},U),{},{seriesIndex:_,dataPointIndex:_}))),h.DOMHandling({i:_,t:qe,j:b,ttItems:A,values:{val:c,goalVals:$,xVal:ie,xAxisTTVal:ge,zVal:ue},seriesName:we,shared:I,pColor:me})},N=0,Q=U.globals.series.length-1;N<U.globals.series.length;N++,Q--)Ee(N,Q)}},{key:"getFormatters",value:function(o){var c,h=this.w,_=h.globals.yLabelFormatters[o];return void 0!==h.globals.ttVal?Array.isArray(h.globals.ttVal)?(_=h.globals.ttVal[o]&&h.globals.ttVal[o].formatter,c=h.globals.ttVal[o]&&h.globals.ttVal[o].title&&h.globals.ttVal[o].title.formatter):(_=h.globals.ttVal.formatter,"function"==typeof h.globals.ttVal.title.formatter&&(c=h.globals.ttVal.title.formatter)):c=h.config.tooltip.y.title.formatter,"function"!=typeof _&&(_=h.globals.yLabelFormatters[0]?h.globals.yLabelFormatters[0]:function(b){return b}),"function"!=typeof c&&(c=function(b){return b}),{yLbFormatter:_,yLbTitleFormatter:c}}},{key:"getSeriesName",value:function(o){var _=o.seriesIndex,b=o.j,x=this.w;return(0,o.fn)(String(x.globals.seriesNames[o.index]),{series:x.globals.series,seriesIndex:_,dataPointIndex:b,w:x})}},{key:"DOMHandling",value:function(o){var c=o.t,h=o.j,_=o.ttItems,b=o.values,x=o.seriesName,A=o.shared,I=o.pColor,F=this.w,U=this.ttCtx,$=b.val,q=b.goalVals,ie=b.xVal,ue=b.xAxisTTVal,ge=b.zVal,we=null;we=_[c].children,F.config.tooltip.fillSeriesColor&&(_[c].style.backgroundColor=I,we[0].style.display="none"),U.showTooltipTitle&&(null===U.tooltipTitle&&(U.tooltipTitle=F.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),U.tooltipTitle.innerHTML=ie),U.isXAxisTooltipEnabled&&(U.xaxisTooltipText.innerHTML=""!==ue?ue:ie);var me=_[c].querySelector(".apexcharts-tooltip-text-y-label");me&&(me.innerHTML=x||"");var Ee=_[c].querySelector(".apexcharts-tooltip-text-y-value");Ee&&(Ee.innerHTML=void 0!==$?$:""),we[0]&&we[0].classList.contains("apexcharts-tooltip-marker")&&(F.config.tooltip.marker.fillColors&&Array.isArray(F.config.tooltip.marker.fillColors)&&(I=F.config.tooltip.marker.fillColors[c]),we[0].style.backgroundColor=I),F.config.tooltip.marker.show||(we[0].style.display="none");var N=_[c].querySelector(".apexcharts-tooltip-text-goals-label"),Q=_[c].querySelector(".apexcharts-tooltip-text-goals-value");if(q.length&&F.globals.seriesGoals[c]){var pe=function(){var qe="<div >",kt="<div>";q.forEach(function(Dt,ei){qe+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Dt.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Dt.attrs.name,"</div>"),kt+="<div>".concat(Dt.val,"</div>")}),N.innerHTML=qe+"</div>",Q.innerHTML=kt+"</div>"};A?F.globals.seriesGoals[c][h]&&Array.isArray(F.globals.seriesGoals[c][h])?pe():(N.innerHTML="",Q.innerHTML=""):pe()}else N.innerHTML="",Q.innerHTML="";if(null!==ge&&(_[c].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=F.config.tooltip.z.title,_[c].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==ge?ge:""),A&&we[0]){if(F.config.tooltip.hideEmptySeries){var xe=_[c].querySelector(".apexcharts-tooltip-marker"),Le=_[c].querySelector(".apexcharts-tooltip-text");0==parseFloat($)?(xe.style.display="none",Le.style.display="none"):(xe.style.display="block",Le.style.display="block")}we[0].parentNode.style.display=null==$||F.globals.ancillaryCollapsedSeriesIndices.indexOf(c)>-1||F.globals.collapsedSeriesIndices.indexOf(c)>-1?"none":F.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(o){var c=this.w;if(o)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var h=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");h&&(h.classList.add("apexcharts-active"),h.style.display=c.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(o){var c=o.i,h=o.j,_=this.w,b=this.ctx.series.filteredSeriesX(),x="",A="",I=null,F=null,U={series:_.globals.series,seriesIndex:c,dataPointIndex:h,w:_},$=_.globals.ttZFormatter;null===h?F=_.globals.series[c]:_.globals.isXNumeric&&"treemap"!==_.config.chart.type?(x=b[c][h],0===b[c].length&&(x=b[this.tooltipUtil.getFirstActiveXArray(b)][h])):x=void 0!==_.globals.labels[h]?_.globals.labels[h]:"";var q=x;return x=_.globals.isXNumeric&&"datetime"===_.config.xaxis.type?new Ei(this.ctx).xLabelFormat(_.globals.ttKeyFormatter,q,q,{i:void 0,dateFormatter:new vi(this.ctx).formatDate,w:this.w}):_.globals.isBarHorizontal?_.globals.yLabelFormatters[0](q,U):_.globals.xLabelFormatter(q,U),void 0!==_.config.tooltip.x.formatter&&(x=_.globals.ttKeyFormatter(q,U)),_.globals.seriesZ.length>0&&_.globals.seriesZ[c].length>0&&(I=$(_.globals.seriesZ[c][h],_)),A="function"==typeof _.config.xaxis.tooltip.formatter?_.globals.xaxisTooltipFormatter(q,U):x,{val:Array.isArray(F)?F.join(" "):F,xVal:Array.isArray(x)?x.join(" "):x,xAxisTTVal:Array.isArray(A)?A.join(" "):A,zVal:I}}},{key:"handleCustomTooltip",value:function(o){var c=o.i,h=o.j,_=o.y1,b=o.y2,x=o.w,A=this.ttCtx.getElTooltip(),I=x.config.tooltip.custom;Array.isArray(I)&&I[c]&&(I=I[c]),A.innerHTML=I({ctx:this.ctx,series:x.globals.series,seriesIndex:c,dataPointIndex:h,y1:_,y2:b,w:x})}}]),le}(),Tr=function(){function le(o){V(this,le),this.ttCtx=o,this.ctx=o.ctx,this.w=o.w}return Ae(le,[{key:"moveXCrosshairs",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=this.ttCtx,_=this.w,b=h.getElXCrosshairs(),x=o-h.xcrosshairsWidth/2,A=_.globals.labels.slice().length;if(null!==c&&(x=_.globals.gridWidth/A*c),null===b||_.globals.isBarHorizontal||(b.setAttribute("x",x),b.setAttribute("x1",x),b.setAttribute("x2",x),b.setAttribute("y2",_.globals.gridHeight),b.classList.add("apexcharts-active")),x<0&&(x=0),x>_.globals.gridWidth&&(x=_.globals.gridWidth),h.isXAxisTooltipEnabled){var I=x;"tickWidth"!==_.config.xaxis.crosshairs.width&&"barWidth"!==_.config.xaxis.crosshairs.width||(I=x+h.xcrosshairsWidth/2),this.moveXAxisTooltip(I)}}},{key:"moveYCrosshairs",value:function(o){var c=this.ttCtx;null!==c.ycrosshairs&&at.setAttrs(c.ycrosshairs,{y1:o,y2:o}),null!==c.ycrosshairsHidden&&at.setAttrs(c.ycrosshairsHidden,{y1:o,y2:o})}},{key:"moveXAxisTooltip",value:function(o){var c=this.w,h=this.ttCtx;if(null!==h.xaxisTooltip&&0!==h.xcrosshairsWidth){h.xaxisTooltip.classList.add("apexcharts-active");var b,_=h.xaxisOffY+c.config.xaxis.tooltip.offsetY+c.globals.translateY+1+c.config.xaxis.offsetY;o-=h.xaxisTooltip.getBoundingClientRect().width/2,isNaN(o)||(o+=c.globals.translateX,b=new at(this.ctx).getTextRects(h.xaxisTooltipText.innerHTML),h.xaxisTooltipText.style.minWidth=b.width+"px",h.xaxisTooltip.style.left=o+"px",h.xaxisTooltip.style.top=_+"px")}}},{key:"moveYAxisTooltip",value:function(o){var c=this.w,h=this.ttCtx;null===h.yaxisTTEls&&(h.yaxisTTEls=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var _=parseInt(h.ycrosshairsHidden.getAttribute("y1"),10),b=c.globals.translateY+_,x=h.yaxisTTEls[o].getBoundingClientRect().height,A=c.globals.translateYAxisX[o]-2;c.config.yaxis[o].opposite&&(A-=26),b-=x/2,-1===c.globals.ignoreYAxisIndexes.indexOf(o)?(h.yaxisTTEls[o].classList.add("apexcharts-active"),h.yaxisTTEls[o].style.top=b+"px",h.yaxisTTEls[o].style.left=A+c.config.yaxis[o].tooltip.offsetX+"px"):h.yaxisTTEls[o].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=this.w,b=this.ttCtx,x=b.getElTooltip(),A=b.tooltipRect,I=null!==h?parseFloat(h):1,F=parseFloat(o)+I+5,U=parseFloat(c)+I/2;if(F>_.globals.gridWidth/2&&(F=F-A.ttWidth-I-10),F>_.globals.gridWidth-A.ttWidth-10&&(F=_.globals.gridWidth-A.ttWidth),F<-20&&(F=-20),_.config.tooltip.followCursor){var $=b.getElGrid().getBoundingClientRect();(F=b.e.clientX-$.left)>_.globals.gridWidth/2&&(F-=b.tooltipRect.ttWidth),(U=b.e.clientY+_.globals.translateY-$.top)>_.globals.gridHeight/2&&(U-=b.tooltipRect.ttHeight)}else _.globals.isBarHorizontal||A.ttHeight/2+U>_.globals.gridHeight&&(U=_.globals.gridHeight-A.ttHeight+_.globals.translateY);isNaN(F)||(x.style.left=(F+=_.globals.translateX)+"px",x.style.top=U+"px")}},{key:"moveMarkers",value:function(o,c){var h=this.w,_=this.ttCtx;if(h.globals.markers.size[o]>0)for(var b=h.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-marker")),x=0;x<b.length;x++)parseInt(b[x].getAttribute("rel"),10)===c&&(_.marker.resetPointsSize(),_.marker.enlargeCurrentPoint(c,b[x]));else _.marker.resetPointsSize(),this.moveDynamicPointOnHover(c,o)}},{key:"moveDynamicPointOnHover",value:function(o,c){var h,_,b=this.w,x=this.ttCtx,A=b.globals.pointsArray,I=x.tooltipUtil.getHoverMarkerSize(c),F=b.config.series[c].type;if(!F||"column"!==F&&"candlestick"!==F&&"boxPlot"!==F){h=A[c][o][0],_=A[c][o][1]?A[c][o][1]:0;var U=b.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(c,"'] .apexcharts-series-markers circle"));U&&_<b.globals.gridHeight&&_>0&&(U.setAttribute("r",I),U.setAttribute("cx",h),U.setAttribute("cy",_)),this.moveXCrosshairs(h),x.fixedTooltip||this.moveTooltip(h,_,I)}}},{key:"moveDynamicPointsOnHover",value:function(o){var c,h=this.ttCtx,_=h.w,b=0,x=0,A=_.globals.pointsArray;c=new Dn(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var I=h.tooltipUtil.getHoverMarkerSize(c);A[c]&&(b=A[c][o][0],x=A[c][o][1]);var F=h.tooltipUtil.getAllMarkers();if(null!==F)for(var U=0;U<_.globals.series.length;U++){var $=A[U];if(_.globals.comboCharts&&void 0===$&&F.splice(U,0,null),$&&$.length){var q=A[U][o][1];F[U].setAttribute("cx",b),"rangeArea"!==_.config.chart.type||_.globals.comboCharts||(q-=Math.abs(q-A[U][o+_.globals.series[U].length][1])/2),null!==q&&!isNaN(q)&&q<_.globals.gridHeight+I&&q+I>0?(F[U]&&F[U].setAttribute("r",I),F[U]&&F[U].setAttribute("cy",q)):F[U]&&F[U].setAttribute("r",0)}}this.moveXCrosshairs(b),h.fixedTooltip||this.moveTooltip(b,x||_.globals.gridHeight,I)}},{key:"moveStickyTooltipOverBars",value:function(o,c){var h=this.w,_=this.ttCtx,b=h.globals.columnSeries?h.globals.columnSeries.length:h.globals.series.length,x=b>=2&&b%2==0?Math.floor(b/2):Math.floor(b/2)+1;h.globals.isBarHorizontal&&(x=new Dn(this.ctx).getActiveConfigSeriesIndex("desc")+1);var A=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(x,"'] path[j='").concat(o,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(x,"'] path[j='").concat(o,"']"));A||"number"!=typeof c||(A=h.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(c,"'] path[j='").concat(o,"']")));var I=A?parseFloat(A.getAttribute("cx")):0,F=A?parseFloat(A.getAttribute("cy")):0,U=A?parseFloat(A.getAttribute("barWidth")):0,$=_.getElGrid().getBoundingClientRect(),q=A&&(A.classList.contains("apexcharts-candlestick-area")||A.classList.contains("apexcharts-boxPlot-area"));h.globals.isXNumeric?(A&&!q&&(I-=b%2!=0?U/2:0),A&&q&&h.globals.comboCharts&&(I-=U/2)):h.globals.isBarHorizontal||(I=_.xAxisTicksPositions[o-1]+_.dataPointsDividedWidth/2,isNaN(I)&&(I=_.xAxisTicksPositions[o]-_.dataPointsDividedWidth/2)),h.globals.isBarHorizontal?F-=_.tooltipRect.ttHeight:h.config.tooltip.followCursor?F=_.e.clientY-$.top-_.tooltipRect.ttHeight/2:F+_.tooltipRect.ttHeight+15>h.globals.gridHeight&&(F=h.globals.gridHeight),h.globals.isBarHorizontal||this.moveXCrosshairs(I),_.fixedTooltip||this.moveTooltip(I,F||h.globals.gridHeight)}}]),le}(),Xr=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx,this.tooltipPosition=new Tr(o)}return Ae(le,[{key:"drawDynamicPoints",value:function(){var o=this.w,c=new at(this.ctx),h=new on(this.ctx),_=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");_=ot(_),o.config.chart.stacked&&_.sort(function($,q){return parseFloat($.getAttribute("data:realIndex"))-parseFloat(q.getAttribute("data:realIndex"))});for(var b=0;b<_.length;b++){var x=_[b].querySelector(".apexcharts-series-markers-wrap");if(null!==x){var A=void 0,I="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(I+=" no-pointer-events");var F=h.getMarkerConfig({cssClass:I,seriesIndex:Number(x.getAttribute("data:realIndex"))});(A=c.drawMarker(0,0,F)).node.setAttribute("default-marker-size",0);var U=document.createElementNS(o.globals.SVGNS,"g");U.classList.add("apexcharts-series-markers"),U.appendChild(A.node),x.appendChild(U)}}}},{key:"enlargeCurrentPoint",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=this.w;"bubble"!==b.config.chart.type&&this.newPointSize(o,c);var x=c.getAttribute("cx"),A=c.getAttribute("cy");if(null!==h&&null!==_&&(x=h,A=_),this.tooltipPosition.moveXCrosshairs(x),!this.fixedTooltip){if("radar"===b.config.chart.type){var I=this.ttCtx.getElGrid().getBoundingClientRect();x=this.ttCtx.e.clientX-I.left}this.tooltipPosition.moveTooltip(x,A,b.config.markers.hover.size)}}},{key:"enlargePoints",value:function(o){for(var c=this.w,h=this,_=this.ttCtx,b=o,x=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),A=c.config.markers.hover.size,I=0;I<x.length;I++){var F=x[I].getAttribute("rel"),U=x[I].getAttribute("index");if(void 0===A&&(A=c.globals.markers.size[U]+c.config.markers.hover.sizeOffset),b===parseInt(F,10)){h.newPointSize(b,x[I]);var $=x[I].getAttribute("cx"),q=x[I].getAttribute("cy");h.tooltipPosition.moveXCrosshairs($),_.fixedTooltip||h.tooltipPosition.moveTooltip($,q,A)}else h.oldPointSize(x[I])}}},{key:"newPointSize",value:function(o,c){var h=this.w,_=h.config.markers.hover.size,b=0===o?c.parentNode.firstChild:c.parentNode.lastChild;if("0"!==b.getAttribute("default-marker-size")){var x=parseInt(b.getAttribute("index"),10);void 0===_&&(_=h.globals.markers.size[x]+h.config.markers.hover.sizeOffset),_<0&&(_=0),b.setAttribute("r",_)}}},{key:"oldPointSize",value:function(o){var c=parseFloat(o.getAttribute("default-marker-size"));o.setAttribute("r",c)}},{key:"resetPointsSize",value:function(){for(var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),c=0;c<o.length;c++){var h=parseFloat(o[c].getAttribute("default-marker-size"));$e.isNumber(h)&&h>=0?o[c].setAttribute("r",h):o[c].setAttribute("r",0)}}}]),le}(),Ct=function(){function le(o){V(this,le),this.w=o.w;var c=this.w;this.ttCtx=o,this.isVerticalGroupedRangeBar=!c.globals.isBarHorizontal&&"rangeBar"===c.config.chart.type&&c.config.plotOptions.bar.rangeBarGroupRows}return Ae(le,[{key:"getAttr",value:function(o,c){return parseFloat(o.target.getAttribute(c))}},{key:"handleHeatTreeTooltip",value:function(o){var c=o.e,h=o.opt,_=o.x,b=o.y,A=this.ttCtx,I=this.w;if(c.target.classList.contains("apexcharts-".concat(o.type,"-rect"))){var F=this.getAttr(c,"i"),U=this.getAttr(c,"j"),$=this.getAttr(c,"cx"),q=this.getAttr(c,"cy"),ie=this.getAttr(c,"width"),ue=this.getAttr(c,"height");if(A.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:F,j:U,shared:!1,e:c}),I.globals.capturedSeriesIndex=F,I.globals.capturedDataPointIndex=U,_=$+A.tooltipRect.ttWidth/2+ie,b=q+A.tooltipRect.ttHeight/2-ue/2,A.tooltipPosition.moveXCrosshairs($+ie/2),_>I.globals.gridWidth/2&&(_=$-A.tooltipRect.ttWidth/2+ie),A.w.config.tooltip.followCursor){var ge=I.globals.dom.elWrap.getBoundingClientRect();_=I.globals.clientX-ge.left-(_>I.globals.gridWidth/2?A.tooltipRect.ttWidth:0),b=I.globals.clientY-ge.top-(b>I.globals.gridHeight/2?A.tooltipRect.ttHeight:0)}}return{x:_,y:b}}},{key:"handleMarkerTooltip",value:function(o){var c,h,_=o.e,b=o.opt,x=o.x,A=o.y,I=this.w,F=this.ttCtx;if(_.target.classList.contains("apexcharts-marker")){var U=parseInt(b.paths.getAttribute("cx"),10),$=parseInt(b.paths.getAttribute("cy"),10),q=parseFloat(b.paths.getAttribute("val"));if(h=parseInt(b.paths.getAttribute("rel"),10),c=parseInt(b.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,F.intersect){var ie=$e.findAncestor(b.paths,"apexcharts-series");ie&&(c=parseInt(ie.getAttribute("data:realIndex"),10))}if(F.tooltipLabels.drawSeriesTexts({ttItems:b.ttItems,i:c,j:h,shared:!F.showOnIntersect&&I.config.tooltip.shared,e:_}),"mouseup"===_.type&&F.markerClick(_,c,h),I.globals.capturedSeriesIndex=c,I.globals.capturedDataPointIndex=h,x=U,A=$+I.globals.translateY-1.4*F.tooltipRect.ttHeight,F.w.config.tooltip.followCursor){var ue=F.getElGrid().getBoundingClientRect();A=F.e.clientY+I.globals.translateY-ue.top}q<0&&(A=$),F.marker.enlargeCurrentPoint(h,b.paths,x,A)}return{x,y:A}}},{key:"handleBarTooltip",value:function(o){var c,h,_=o.e,b=o.opt,x=this.w,A=this.ttCtx,I=A.getElTooltip(),F=0,U=0,$=0,q=this.getBarTooltipXY({e:_,opt:b}),ie=q.barHeight,ue=q.j;x.globals.capturedSeriesIndex=c=q.i,x.globals.capturedDataPointIndex=ue,x.globals.isBarHorizontal&&A.tooltipUtil.hasBars()||!x.config.tooltip.shared?(U=q.x,$=q.y,h=Array.isArray(x.config.stroke.width)?x.config.stroke.width[c]:x.config.stroke.width,F=U):x.globals.comboCharts||x.config.tooltip.shared||(F/=2),isNaN($)&&($=x.globals.svgHeight-A.tooltipRect.ttHeight);var ge=parseInt(b.paths.parentNode.getAttribute("data:realIndex"),10),we=x.globals.isMultipleYAxis?x.config.yaxis[ge]&&x.config.yaxis[ge].reversed:x.config.yaxis[0].reversed;if(U+A.tooltipRect.ttWidth>x.globals.gridWidth&&!we?U-=A.tooltipRect.ttWidth:U<0&&(U=0),A.w.config.tooltip.followCursor){var me=A.getElGrid().getBoundingClientRect();$=A.e.clientY-me.top}null===A.tooltip&&(A.tooltip=x.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),x.config.tooltip.shared||A.tooltipPosition.moveXCrosshairs(x.globals.comboBarCount>0?F+h/2:F),!A.fixedTooltip&&(!x.config.tooltip.shared||x.globals.isBarHorizontal&&A.tooltipUtil.hasBars())&&(we&&(U-=A.tooltipRect.ttWidth)<0&&(U=0),!we||x.globals.isBarHorizontal&&A.tooltipUtil.hasBars()||($=$+ie-2*(x.globals.series[c][ue]<0?ie:0)),$=$+x.globals.translateY-A.tooltipRect.ttHeight/2,I.style.left=U+x.globals.translateX+"px",I.style.top=$+"px")}},{key:"getBarTooltipXY",value:function(o){var c=this,h=o.e,_=o.opt,b=this.w,x=null,A=this.ttCtx,I=0,F=0,U=0,$=0,q=0,ie=h.target.classList;if(ie.contains("apexcharts-bar-area")||ie.contains("apexcharts-candlestick-area")||ie.contains("apexcharts-boxPlot-area")||ie.contains("apexcharts-rangebar-area")){var ue=h.target,ge=ue.getBoundingClientRect(),we=_.elGrid.getBoundingClientRect(),me=ge.height;q=ge.height;var Ee=ge.width,N=parseInt(ue.getAttribute("cx"),10),Q=parseInt(ue.getAttribute("cy"),10);$=parseFloat(ue.getAttribute("barWidth"));var pe="touchmove"===h.type?h.touches[0].clientX:h.clientX;x=parseInt(ue.getAttribute("j"),10),I=parseInt(ue.parentNode.getAttribute("rel"),10)-1;var xe=ue.getAttribute("data-range-y1"),Le=ue.getAttribute("data-range-y2");b.globals.comboCharts&&(I=parseInt(ue.parentNode.getAttribute("data:realIndex"),10));var qe=function(Dt){return b.globals.isXNumeric?N-Ee/2:c.isVerticalGroupedRangeBar?N+Ee/2:N-A.dataPointsDividedWidth+Ee/2},kt=function(){return Q-A.dataPointsDividedHeight+me/2-A.tooltipRect.ttHeight/2};A.tooltipLabels.drawSeriesTexts({ttItems:_.ttItems,i:I,j:x,y1:xe?parseInt(xe,10):null,y2:Le?parseInt(Le,10):null,shared:!A.showOnIntersect&&b.config.tooltip.shared,e:h}),b.config.tooltip.followCursor?b.globals.isBarHorizontal?(F=pe-we.left+15,U=kt()):(F=qe(),U=h.clientY-we.top-A.tooltipRect.ttHeight/2-15):b.globals.isBarHorizontal?((F=N)<A.xyRatios.baseLineInvertedY&&(F=N-A.tooltipRect.ttWidth),U=kt()):(F=qe(),U=Q)}return{x:F,y:U,barHeight:q,barWidth:$,i:I,j:x}}}]),le}(),Ie=function(){function le(o){V(this,le),this.w=o.w,this.ttCtx=o}return Ae(le,[{key:"drawXaxisTooltip",value:function(){var o=this.w,c=this.ttCtx,h="bottom"===o.config.xaxis.position;c.xaxisOffY=h?o.globals.gridHeight+1:-o.globals.xAxisHeight-o.config.xaxis.axisTicks.height+3;var _=h?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",b=o.globals.dom.elWrap;c.isXAxisTooltipEnabled&&null===o.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(c.xaxisTooltip=document.createElement("div"),c.xaxisTooltip.setAttribute("class",_+" apexcharts-theme-"+o.config.tooltip.theme),b.appendChild(c.xaxisTooltip),c.xaxisTooltipText=document.createElement("div"),c.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),c.xaxisTooltipText.style.fontFamily=o.config.xaxis.tooltip.style.fontFamily||o.config.chart.fontFamily,c.xaxisTooltipText.style.fontSize=o.config.xaxis.tooltip.style.fontSize,c.xaxisTooltip.appendChild(c.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var o=this.w,c=this.ttCtx,h=0;h<o.config.yaxis.length;h++){var _=o.config.yaxis[h].opposite||o.config.yaxis[h].crosshairs.opposite;c.yaxisOffX=_?o.globals.gridWidth+1:1;var b="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,_?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),x=o.globals.dom.elWrap;null===o.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))&&(c.yaxisTooltip=document.createElement("div"),c.yaxisTooltip.setAttribute("class",b+" apexcharts-theme-"+o.config.tooltip.theme),x.appendChild(c.yaxisTooltip),0===h&&(c.yaxisTooltipText=[]),c.yaxisTooltipText[h]=document.createElement("div"),c.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),c.yaxisTooltip.appendChild(c.yaxisTooltipText[h]))}}},{key:"setXCrosshairWidth",value:function(){var o=this.w,c=this.ttCtx,h=c.getElXCrosshairs();if(c.xcrosshairsWidth=parseInt(o.config.xaxis.crosshairs.width,10),o.globals.comboCharts){var _=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==_&&"barWidth"===o.config.xaxis.crosshairs.width){var b=parseFloat(_.getAttribute("barWidth"));c.xcrosshairsWidth=b}else"tickWidth"===o.config.xaxis.crosshairs.width&&(c.xcrosshairsWidth=o.globals.gridWidth/o.globals.labels.length)}else if("tickWidth"===o.config.xaxis.crosshairs.width)c.xcrosshairsWidth=o.globals.gridWidth/o.globals.labels.length;else if("barWidth"===o.config.xaxis.crosshairs.width){var I=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==I){var F=parseFloat(I.getAttribute("barWidth"));c.xcrosshairsWidth=F}else c.xcrosshairsWidth=1}o.globals.isBarHorizontal&&(c.xcrosshairsWidth=0),null!==h&&c.xcrosshairsWidth>0&&h.setAttribute("width",c.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var o=this.w,c=this.ttCtx;c.ycrosshairs=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),c.ycrosshairsHidden=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(o,c,h){var _=this.ttCtx,b=this.w,x=b.globals.yLabelFormatters[o];if(_.yaxisTooltips[o]){var A=_.getElGrid().getBoundingClientRect(),U=b.globals.minYArr[o]+(b.globals.maxYArr[o]-b.globals.minYArr[o]-(c-A.top)*h.yRatio[o]);_.tooltipPosition.moveYCrosshairs(c-A.top),_.yaxisTooltipText[o].innerHTML=x(U),_.tooltipPosition.moveYAxisTooltip(o)}}}]),le}(),Be=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.tConfig=c.config.tooltip,this.tooltipUtil=new br(this),this.tooltipLabels=new mr(this),this.tooltipPosition=new Tr(this),this.marker=new Xr(this),this.intersect=new Ct(this),this.axesTooltip=new Ie(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!c.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Ae(le,[{key:"getElTooltip",value:function(o){return o||(o=this),o.w.globals.dom.baseEl?o.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(o){var c=this.w;this.xyRatios=o,this.isXAxisTooltipEnabled=c.config.xaxis.tooltip.enabled&&c.globals.axisCharts,this.yaxisTooltips=c.config.yaxis.map(function(x,A){return!!(x.show&&x.tooltip.enabled&&c.globals.axisCharts)}),this.allTooltipSeriesGroups=[],c.globals.axisCharts||(this.showTooltipTitle=!1);var h=document.createElement("div");if(h.classList.add("apexcharts-tooltip"),c.config.tooltip.cssClass&&h.classList.add(c.config.tooltip.cssClass),h.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),c.globals.dom.elWrap.appendChild(h),c.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var _=new gr(this.ctx);this.xAxisTicksPositions=_.getXAxisTicksPositions()}if(!c.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==c.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==c.config.markers.size&&0!==c.globals.markers.largestSize||this.marker.drawDynamicPoints(this),c.globals.collapsedSeries.length!==c.globals.series.length){this.dataPointsDividedHeight=c.globals.gridHeight/c.globals.dataPoints,this.dataPointsDividedWidth=c.globals.gridWidth/c.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||c.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,h.appendChild(this.tooltipTitle));var b=c.globals.series.length;(c.globals.xyCharts||c.globals.comboCharts)&&this.tConfig.shared&&(b=this.showOnIntersect?1:c.globals.series.length),this.legendLabels=c.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(b),this.addSVGEvents()}}},{key:"createTTElements",value:function(o){for(var c=this,h=this.w,_=[],b=this.getElTooltip(),x=function(I){var F=document.createElement("div");F.classList.add("apexcharts-tooltip-series-group"),F.style.order=h.config.tooltip.inverseOrder?o-I:I+1,c.tConfig.shared&&c.tConfig.enabledOnSeries&&Array.isArray(c.tConfig.enabledOnSeries)&&c.tConfig.enabledOnSeries.indexOf(I)<0&&F.classList.add("apexcharts-tooltip-series-group-hidden");var U=document.createElement("span");U.classList.add("apexcharts-tooltip-marker"),U.style.backgroundColor=h.globals.colors[I],F.appendChild(U);var $=document.createElement("div");$.classList.add("apexcharts-tooltip-text"),$.style.fontFamily=c.tConfig.style.fontFamily||h.config.chart.fontFamily,$.style.fontSize=c.tConfig.style.fontSize,["y","goals","z"].forEach(function(q){var ie=document.createElement("div");ie.classList.add("apexcharts-tooltip-".concat(q,"-group"));var ue=document.createElement("span");ue.classList.add("apexcharts-tooltip-text-".concat(q,"-label")),ie.appendChild(ue);var ge=document.createElement("span");ge.classList.add("apexcharts-tooltip-text-".concat(q,"-value")),ie.appendChild(ge),$.appendChild(ie)}),F.appendChild($),b.appendChild(F),_.push(F)},A=0;A<o;A++)x(A);return _}},{key:"addSVGEvents",value:function(){var o=this.w,c=o.config.chart.type,h=this.getElTooltip(),_=!("bar"!==c&&"candlestick"!==c&&"boxPlot"!==c&&"rangeBar"!==c),b="area"===c||"line"===c||"scatter"===c||"bubble"===c||"radar"===c,x=o.globals.dom.Paper.node,A=this.getElGrid();A&&(this.seriesBound=A.getBoundingClientRect());var I,F=[],U=[],$={hoverArea:x,elGrid:A,tooltipEl:h,tooltipY:F,tooltipX:U,ttItems:this.ttItems};if(o.globals.axisCharts&&(b?I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):_?I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==c&&"treemap"!==c||(I=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),I&&I.length))for(var q=0;q<I.length;q++)F.push(I[q].getAttribute("cy")),U.push(I[q].getAttribute("cx"));if(o.globals.xyCharts&&!this.showOnIntersect||o.globals.comboCharts&&!this.showOnIntersect||_&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([x],$);else if(_&&!o.globals.comboCharts||b&&this.showOnIntersect)this.addDatapointEventsListeners($);else if(!o.globals.axisCharts||"heatmap"===c||"treemap"===c){var ie=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ie,$)}if(this.showOnIntersect){var ue=o.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");ue.length>0&&this.addPathsEventListeners(ue,$),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners($)}}},{key:"drawFixedTooltipRect",value:function(){var o=this.w,c=this.getElTooltip(),h=c.getBoundingClientRect(),_=h.width+10,b=h.height+10,x=this.tConfig.fixed.offsetX,A=this.tConfig.fixed.offsetY,I=this.tConfig.fixed.position.toLowerCase();return I.indexOf("right")>-1&&(x=x+o.globals.svgWidth-_+10),I.indexOf("bottom")>-1&&(A=A+o.globals.svgHeight-b-10),c.style.left=x+"px",c.style.top=A+"px",{x,y:A,ttWidth:_,ttHeight:b}}},{key:"addDatapointEventsListeners",value:function(o){var c=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(c,o)}},{key:"addPathsEventListeners",value:function(o,c){for(var h=this,_=function(x){var A={paths:o[x],tooltipEl:c.tooltipEl,tooltipY:c.tooltipY,tooltipX:c.tooltipX,elGrid:c.elGrid,hoverArea:c.hoverArea,ttItems:c.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(I){return o[x].addEventListener(I,h.onSeriesHover.bind(h,A),{capture:!1,passive:!0})})},b=0;b<o.length;b++)_(b)}},{key:"onSeriesHover",value:function(o,c){var h=this,_=Date.now()-this.lastHoverTime;_>=100?this.seriesHover(o,c):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){h.seriesHover(o,c)},100-_))}},{key:"seriesHover",value:function(o,c){var h=this;this.lastHoverTime=Date.now();var _=[],b=this.w;b.config.chart.group&&(_=this.ctx.getGroupedCharts()),b.globals.axisCharts&&(b.globals.minX===-1/0&&b.globals.maxX===1/0||0===b.globals.dataPoints)||(_.length?_.forEach(function(x){var A=h.getElTooltip(x);x.w.globals.minX===h.w.globals.minX&&x.w.globals.maxX===h.w.globals.maxX&&x.w.globals.tooltip.seriesHoverByContext({chartCtx:x,ttCtx:x.w.globals.tooltip,opt:{paths:o.paths,tooltipEl:A,tooltipY:o.tooltipY,tooltipX:o.tooltipX,elGrid:o.elGrid,hoverArea:o.hoverArea,ttItems:x.w.globals.tooltip.ttItems},e:c})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:o,e:c}))}},{key:"seriesHoverByContext",value:function(o){var c=o.chartCtx,h=o.ttCtx,_=o.opt,b=o.e,x=c.w,A=this.getElTooltip();A&&(h.tooltipRect={x:0,y:0,ttWidth:A.getBoundingClientRect().width,ttHeight:A.getBoundingClientRect().height},h.e=b,h.tooltipUtil.hasBars()&&!x.globals.comboCharts&&!h.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Dn(c).toggleSeriesOnHover(b,b.target.parentNode),h.fixedTooltip&&h.drawFixedTooltipRect(),x.globals.axisCharts?h.axisChartsTooltips({e:b,opt:_,tooltipRect:h.tooltipRect}):h.nonAxisChartsTooltips({e:b,opt:_,tooltipRect:h.tooltipRect}))}},{key:"axisChartsTooltips",value:function(o){var c,h,_=o.e,b=o.opt,x=this.w,A=b.elGrid.getBoundingClientRect(),I="touchmove"===_.type?_.touches[0].clientX:_.clientX,F="touchmove"===_.type?_.touches[0].clientY:_.clientY;if(this.clientY=F,this.clientX=I,x.globals.capturedSeriesIndex=-1,x.globals.capturedDataPointIndex=-1,F<A.top||F>A.top+A.height)this.handleMouseOut(b);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!x.config.tooltip.shared){var U=parseInt(b.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(U)<0)return void this.handleMouseOut(b)}var $=this.getElTooltip(),q=this.getElXCrosshairs(),ie=x.globals.xyCharts||"bar"===x.config.chart.type&&!x.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||x.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===_.type||"touchmove"===_.type||"mouseup"===_.type){if(x.globals.collapsedSeries.length+x.globals.ancillaryCollapsedSeries.length===x.globals.series.length)return;null!==q&&q.classList.add("apexcharts-active");var ue=this.yaxisTooltips.filter(function(me){return!0===me});if(null!==this.ycrosshairs&&ue.length&&this.ycrosshairs.classList.add("apexcharts-active"),ie&&!this.showOnIntersect)this.handleStickyTooltip(_,I,F,b);else if("heatmap"===x.config.chart.type||"treemap"===x.config.chart.type){var ge=this.intersect.handleHeatTreeTooltip({e:_,opt:b,x:c,y:h,type:x.config.chart.type});h=ge.y,$.style.left=(c=ge.x)+"px",$.style.top=h+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:_,opt:b}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:_,opt:b,x:c,y:h});if(this.yaxisTooltips.length)for(var we=0;we<x.config.yaxis.length;we++)this.axesTooltip.drawYaxisTooltipText(we,F,this.xyRatios);b.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==_.type&&"touchend"!==_.type||this.handleMouseOut(b)}}},{key:"nonAxisChartsTooltips",value:function(o){var c=o.e,h=o.opt,_=o.tooltipRect,b=this.w,x=h.paths.getAttribute("rel"),A=this.getElTooltip(),I=b.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===c.type||"touchmove"===c.type){A.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:parseInt(x,10)-1,shared:!1});var U=b.globals.clientY-I.top-_.ttHeight-10;if(A.style.left=b.globals.clientX-I.left-_.ttWidth/2+"px",A.style.top=U+"px",b.config.legend.tooltipHoverFormatter){var $=x-1,q=(0,b.config.legend.tooltipHoverFormatter)(this.legendLabels[$].getAttribute("data:default-text"),{seriesIndex:$,dataPointIndex:$,w:b});this.legendLabels[$].innerHTML=q}}else"mouseout"!==c.type&&"touchend"!==c.type||(A.classList.remove("apexcharts-active"),b.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ie){var ue=ie.getAttribute("data:default-text");ie.innerHTML=decodeURIComponent(ue)}))}},{key:"handleStickyTooltip",value:function(o,c,h,_){var b=this.w,x=this.tooltipUtil.getNearestValues({context:this,hoverArea:_.hoverArea,elGrid:_.elGrid,clientX:c,clientY:h}),A=x.j,I=x.capturedSeries;b.globals.collapsedSeriesIndices.includes(I)&&(I=null);var F=_.elGrid.getBoundingClientRect();if(x.hoverX<0||x.hoverX>F.width)this.handleMouseOut(_);else if(null!==I)this.handleStickyCapturedSeries(o,I,_,A);else if(this.tooltipUtil.isXoverlap(A)||b.globals.isBarHorizontal){var U=b.globals.series.findIndex(function($,q){return!b.globals.collapsedSeriesIndices.includes(q)});this.create(o,this,U,A,_.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(o,c,h,_){var b=this.w;if(this.tConfig.shared||null!==b.globals.series[c][_]){if(void 0!==b.globals.series[c][_])this.tConfig.shared&&this.tooltipUtil.isXoverlap(_)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(o,this,c,_,h.ttItems):this.create(o,this,c,_,h.ttItems,!1);else if(this.tooltipUtil.isXoverlap(_)){var x=b.globals.series.findIndex(function(A,I){return!b.globals.collapsedSeriesIndices.includes(I)});this.create(o,this,x,_,h.ttItems)}}else this.handleMouseOut(h)}},{key:"deactivateHoverFilter",value:function(){for(var o=this.w,c=new at(this.ctx),h=o.globals.dom.Paper.select(".apexcharts-bar-area"),_=0;_<h.length;_++)c.pathMouseLeave(h[_])}},{key:"handleMouseOut",value:function(o){var c=this.w,h=this.getElXCrosshairs();if(o.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==c.config.chart.type&&this.marker.resetPointsSize(),null!==h&&h.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var _=0;_<this.yaxisTTEls.length;_++)this.yaxisTTEls[_].classList.remove("apexcharts-active")}c.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(b){var x=b.getAttribute("data:default-text");b.innerHTML=decodeURIComponent(x)})}},{key:"markerClick",value:function(o,c,h){var _=this.w;"function"==typeof _.config.chart.events.markerClick&&_.config.chart.events.markerClick(o,this.ctx,{seriesIndex:c,dataPointIndex:h,w:_}),this.ctx.events.fireEvent("markerClick",[o,this.ctx,{seriesIndex:c,dataPointIndex:h,w:_}])}},{key:"create",value:function(o,c,h,_,b){var x,A,I,F,U,$,q,ie,ue,ge,we,me,Ee,N,Q,pe,xe=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,Le=this.w,qe=c;"mouseup"===o.type&&this.markerClick(o,h,_),null===xe&&(xe=this.tConfig.shared);var kt=this.tooltipUtil.hasMarkers(h),Dt=this.tooltipUtil.getElBars();if(Le.config.legend.tooltipHoverFormatter){var ei=Le.config.legend.tooltipHoverFormatter,wi=Array.from(this.legendLabels);wi.forEach(function(Wr){var Dr=Wr.getAttribute("data:default-text");Wr.innerHTML=decodeURIComponent(Dr)});for(var Mi=0;Mi<wi.length;Mi++){var dn=wi[Mi],wn=parseInt(dn.getAttribute("i"),10),Fn=decodeURIComponent(dn.getAttribute("data:default-text")),Qn=ei(Fn,{seriesIndex:xe?wn:h,dataPointIndex:_,w:Le});if(xe)dn.innerHTML=Le.globals.collapsedSeriesIndices.indexOf(wn)<0?Qn:Fn;else if(dn.innerHTML=wn===h?Qn:Fn,h===wn)break}}var lr=ze(ze({ttItems:b,i:h,j:_},void 0!==(null===(x=Le.globals.seriesRange)||void 0===x||null===(A=x[h])||void 0===A||null===(I=A[_])||void 0===I||null===(F=I.y[0])||void 0===F?void 0:F.y1)&&{y1:null===(U=Le.globals.seriesRange)||void 0===U||null===($=U[h])||void 0===$||null===(q=$[_])||void 0===q||null===(ie=q.y[0])||void 0===ie?void 0:ie.y1}),void 0!==(null===(ue=Le.globals.seriesRange)||void 0===ue||null===(ge=ue[h])||void 0===ge||null===(we=ge[_])||void 0===we||null===(me=we.y[0])||void 0===me?void 0:me.y2)&&{y2:null===(Ee=Le.globals.seriesRange)||void 0===Ee||null===(N=Ee[h])||void 0===N||null===(Q=N[_])||void 0===Q||null===(pe=Q.y[0])||void 0===pe?void 0:pe.y2});if(xe){if(qe.tooltipLabels.drawSeriesTexts(ze(ze({},lr),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),kt)Le.globals.markers.largestSize>0?qe.marker.enlargePoints(_):qe.tooltipPosition.moveDynamicPointsOnHover(_);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(Dt),this.barSeriesHeight>0)){var cr=new at(this.ctx),Pr=Le.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(_,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(_,h);for(var jr=0;jr<Pr.length;jr++)cr.pathMouseEnter(Pr[jr])}}else qe.tooltipLabels.drawSeriesTexts(ze({shared:!1},lr)),this.tooltipUtil.hasBars()&&qe.tooltipPosition.moveStickyTooltipOverBars(_,h),kt&&qe.tooltipPosition.moveMarkers(h,_)}}]),le}(),ct=function(){function le(o){V(this,le),this.w=o.w,this.barCtx=o,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Ae(le,[{key:"handleBarDataLabels",value:function(o){var c=o.x,h=o.y,_=o.y1,b=o.y2,x=o.i,A=o.j,I=o.realIndex,F=o.groupIndex,U=o.series,$=o.barHeight,q=o.barWidth,ie=o.barXPosition,ue=o.barYPosition,ge=o.visibleSeries,we=o.renderedPath,me=this.w,Ee=new at(this.barCtx.ctx),N=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[I]:this.barCtx.strokeWidth,Q=c+parseFloat(q*ge),pe=h+parseFloat($*ge);me.globals.isXNumeric&&!me.globals.isBarHorizontal&&(Q=c+parseFloat(q*(ge+1)),pe=h+parseFloat($*(ge+1))-N);var xe,Dt,Le=null,qe=c,kt=h,ei=me.config.dataLabels,wi=this.barCtx.barOptions.dataLabels,Mi=this.barCtx.barOptions.dataLabels.total;void 0!==ue&&this.barCtx.isRangeBar&&(pe=ue,kt=ue),void 0!==ie&&this.barCtx.isVerticalGroupedRangeBar&&(Q=ie,qe=ie);var dn=ei.offsetX,wn=ei.offsetY,Fn={width:0,height:0};me.config.dataLabels.enabled&&(Fn=Ee.getTextRects(me.globals.yLabelFormatters[0](this.barCtx.series[x][A]),parseFloat(ei.style.fontSize)));var lr={x:c,y:h,i:x,j:A,realIndex:I,groupIndex:F||-1,renderedPath:we,bcx:Q,bcy:pe,barHeight:$,barWidth:q,textRects:Fn,strokeWidth:N,dataLabelsX:qe,dataLabelsY:kt,dataLabelsConfig:ei,barDataLabelsConfig:wi,barTotalDataLabelsConfig:Mi,offX:dn,offY:wn};return Dt=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(lr):this.calculateColumnsDataLabelsPosition(lr),we.attr({cy:Dt.bcy,cx:Dt.bcx,j:A,val:U[x][A],barHeight:$,barWidth:q}),xe=this.drawCalculatedDataLabels({x:Dt.dataLabelsX,y:Dt.dataLabelsY,val:this.barCtx.isRangeBar?[_,b]:U[x][A],i:I,j:A,barWidth:q,barHeight:$,textRects:Fn,dataLabelsConfig:ei}),me.config.chart.stacked&&Mi.enabled&&(Le=this.drawTotalDataLabels({x:Dt.totalDataLabelsX,y:Dt.totalDataLabelsY,barWidth:q,barHeight:$,realIndex:I,textAnchor:Dt.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:I,j:A}),dataLabelsConfig:ei,barTotalDataLabelsConfig:Mi})),{dataLabels:xe,totalDataLabels:Le}}},{key:"getStackedTotalDataLabel",value:function(o){var c=o.realIndex,h=o.j,_=this.w,b=this.barCtx.stackedSeriesTotals[h];return this.totalFormatter&&(b=this.totalFormatter(b,ze(ze({},_),{},{seriesIndex:c,dataPointIndex:h,w:_}))),b}},{key:"calculateColumnsDataLabelsPosition",value:function(o){var c,h,_=this.w,b=o.i,x=o.j,A=o.realIndex,I=o.groupIndex,F=o.y,U=o.bcx,$=o.barWidth,q=o.barHeight,ie=o.textRects,ue=o.dataLabelsX,ge=o.dataLabelsY,we=o.dataLabelsConfig,me=o.barDataLabelsConfig,Ee=o.barTotalDataLabelsConfig,N=o.strokeWidth,Q=o.offX,pe=o.offY;q=Math.abs(q);var xe="vertical"===_.config.plotOptions.bar.dataLabels.orientation,Le=this.barCtx.barHelpers.getZeroValueEncounters({i:b,j:x}).zeroEncounters;U=U-N/2+(-1!==I?I*$:0),this.barCtx.isVerticalGroupedRangeBar?ue+=$/2:(ue=_.globals.isXNumeric?U-$/2+Q:U-_.globals.gridWidth/_.globals.dataPoints+$/2+Q,Le>0&&_.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(ue-=$*Le)),xe&&(ue=ue+ie.height/2-N/2-2);var kt=this.barCtx.series[b][x]<0,Dt=F;switch(this.barCtx.isReversed&&(Dt=F-q+(kt?2*q:0),F-=q),me.position){case"center":ge=xe?kt?Dt-q/2+pe:Dt+q/2-pe:kt?Dt-q/2+ie.height/2+pe:Dt+q/2+ie.height/2-pe;break;case"bottom":ge=xe?kt?Dt-q+pe:Dt+q-pe:kt?Dt-q+ie.height+N+pe:Dt+q-ie.height/2+N-pe;break;case"top":ge=xe?kt?Dt+pe:Dt-pe:kt?Dt-ie.height/2-pe:Dt+ie.height+pe}if(this.barCtx.lastActiveBarSerieIndex===A&&Ee.enabled){var ei=new at(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:A,j:x}),we.fontSize);c=kt?Dt-ei.height/2-pe-Ee.offsetY+18:Dt+ei.height+pe+Ee.offsetY-18,h=ue+Ee.offsetX}return _.config.chart.stacked||(ge<0?ge=0+N:ge+ie.height/3>_.globals.gridHeight&&(ge=_.globals.gridHeight-N)),{bcx:U,bcy:F,dataLabelsX:ue,dataLabelsY:ge,totalDataLabelsX:h,totalDataLabelsY:c,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(o){var c=this.w,h=o.x,_=o.i,b=o.j,x=o.realIndex,A=o.groupIndex,I=o.bcy,F=o.barHeight,U=o.barWidth,$=o.textRects,q=o.dataLabelsX,ie=o.strokeWidth,ue=o.dataLabelsConfig,ge=o.barDataLabelsConfig,we=o.barTotalDataLabelsConfig,me=o.offX,Ee=o.offY,N=c.globals.gridHeight/c.globals.dataPoints;U=Math.abs(U);var Q,pe,xe=(I+=-1!==A?A*F:0)-(this.barCtx.isRangeBar?0:N)+F/2+$.height/2+Ee-3,Le="start",qe=this.barCtx.series[_][b]<0,kt=h;switch(this.barCtx.isReversed&&(kt=h+U-(qe?2*U:0),h=c.globals.gridWidth-U),ge.position){case"center":q=qe?kt+U/2-me:Math.max($.width/2,kt-U/2)+me;break;case"bottom":q=qe?kt+U-ie-Math.round($.width/2)-me:kt-U+ie+Math.round($.width/2)+me;break;case"top":q=qe?kt-ie+Math.round($.width/2)-me:kt-ie-Math.round($.width/2)+me}if(this.barCtx.lastActiveBarSerieIndex===x&&we.enabled){var Dt=new at(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:x,j:b}),ue.fontSize);qe?(Q=kt-ie+Math.round(Dt.width/2)-me-we.offsetX-15,Le="end"):Q=kt-ie-Math.round(Dt.width/2)+me+we.offsetX+15,pe=xe+we.offsetY}return c.config.chart.stacked||(q<0?q=q+$.width+ie:q+$.width/2>c.globals.gridWidth&&(q=c.globals.gridWidth-$.width-ie)),{bcx:h,bcy:I,dataLabelsX:q,dataLabelsY:xe,totalDataLabelsX:Q,totalDataLabelsY:pe,totalDataLabelsAnchor:Le}}},{key:"drawCalculatedDataLabels",value:function(o){var c=o.x,h=o.y,_=o.val,b=o.i,x=o.j,A=o.textRects,I=o.barHeight,F=o.barWidth,U=o.dataLabelsConfig,$=this.w,q="rotate(0)";"vertical"===$.config.plotOptions.bar.dataLabels.orientation&&(q="rotate(-90, ".concat(c,", ").concat(h,")"));var ie=new Nn(this.barCtx.ctx),ue=new at(this.barCtx.ctx),ge=U.formatter,we=null,me=$.globals.collapsedSeriesIndices.indexOf(b)>-1;if(U.enabled&&!me){we=ue.group({class:"apexcharts-data-labels",transform:q});var Ee="";void 0!==_&&(Ee=ge(_,ze(ze({},$),{},{seriesIndex:b,dataPointIndex:x,w:$}))),!_&&$.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(Ee="");var N=$.globals.series[b][x]<0,Q=$.config.plotOptions.bar.dataLabels.position;"vertical"===$.config.plotOptions.bar.dataLabels.orientation&&("top"===Q&&(U.textAnchor=N?"end":"start"),"center"===Q&&(U.textAnchor="middle"),"bottom"===Q&&(U.textAnchor=N?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&F<ue.getTextRects(Ee,parseFloat(U.style.fontSize)).width&&(Ee=""),$.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?A.width/1.6>Math.abs(F)&&(Ee=""):A.height/1.6>Math.abs(I)&&(Ee=""));var pe=ze({},U);this.barCtx.isHorizontal&&_<0&&("start"===U.textAnchor?pe.textAnchor="end":"end"===U.textAnchor&&(pe.textAnchor="start")),ie.plotDataLabelsText({x:c,y:h,text:Ee,i:b,j:x,parent:we,dataLabelsConfig:pe,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return we}},{key:"drawTotalDataLabels",value:function(o){var c,h=o.x,_=o.y,b=o.val,x=o.barWidth,A=o.barHeight,I=o.realIndex,F=o.textAnchor,U=o.barTotalDataLabelsConfig,$=this.w,q=new at(this.barCtx.ctx);return U.enabled&&void 0!==h&&void 0!==_&&this.barCtx.lastActiveBarSerieIndex===I&&(c=q.drawText({x:h-(!$.globals.isBarHorizontal&&$.globals.seriesGroups.length?x/$.globals.seriesGroups.length:0),y:_-($.globals.isBarHorizontal&&$.globals.seriesGroups.length?A/$.globals.seriesGroups.length:0),foreColor:U.style.color,text:b,textAnchor:F,fontFamily:U.style.fontFamily,fontSize:U.style.fontSize,fontWeight:U.style.fontWeight})),c}}]),le}(),lt=function(){function le(o){V(this,le),this.w=o.w,this.barCtx=o}return Ae(le,[{key:"initVariables",value:function(o){var c=this.w;this.barCtx.series=o,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var h=0;h<o.length;h++)if(o[h].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=o[h].length),c.globals.isXNumeric)for(var _=0;_<o[h].length;_++)c.globals.seriesX[h][_]>c.globals.minX&&c.globals.seriesX[h][_]<c.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=c.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],c.globals.comboCharts||this.checkZeroSeries({series:o})}},{key:"initialPositions",value:function(){var o,c,h,_,b,x,A,I,F=this.w,U=F.globals.dataPoints;this.barCtx.isRangeBar&&(U=F.globals.labels.length);var $=this.barCtx.seriesLen;if(F.config.plotOptions.bar.rangeBarGroupRows&&($=1),this.barCtx.isHorizontal)b=(h=F.globals.gridHeight/U)/$,F.globals.isXNumeric&&(b=(h=F.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),b=b*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(b=parseInt(this.barCtx.barOptions.barHeight,10)),I=this.barCtx.baseLineInvertedY+F.globals.padHorizontal+(this.barCtx.isReversed?F.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(I=F.globals.gridWidth/2),c=(h-b*this.barCtx.seriesLen)/2;else{if(_=F.globals.gridWidth/this.barCtx.visibleItems,F.config.xaxis.convertedCatToNumeric&&(_=F.globals.gridWidth/F.globals.dataPoints),x=_/$*parseInt(this.barCtx.barOptions.columnWidth,10)/100,F.globals.isXNumeric){var q=this.barCtx.xRatio;F.globals.minXDiff&&.5!==F.globals.minXDiff&&F.globals.minXDiff/q>0&&(_=F.globals.minXDiff/q),(x=_/$*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(x=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(x=parseInt(this.barCtx.barOptions.columnWidth,10)),A=F.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?F.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),o=F.globals.padHorizontal+(_-x*this.barCtx.seriesLen)/2}return F.globals.barHeight=b,F.globals.barWidth=x,{x:o,y:c,yDivision:h,xDivision:_,barHeight:b,barWidth:x,zeroH:A,zeroW:I}}},{key:"initializeStackedPrevVars",value:function(o){var c=o.w;c.globals.hasSeriesGroups?c.globals.seriesGroups.forEach(function(h){o[h]||(o[h]={}),o[h].prevY=[],o[h].prevX=[],o[h].prevYF=[],o[h].prevXF=[],o[h].prevYVal=[],o[h].prevXVal=[]}):(o.prevY=[],o.prevX=[],o.prevYF=[],o.prevXF=[],o.prevYVal=[],o.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(o){var c=o.w;c.globals.hasSeriesGroups?c.globals.seriesGroups.forEach(function(h){o[h]||(o[h]={}),o[h].xArrj=[],o[h].xArrjF=[],o[h].xArrjVal=[],o[h].yArrj=[],o[h].yArrjF=[],o[h].yArrjVal=[]}):(o.xArrj=[],o.xArrjF=[],o.xArrjVal=[],o.yArrj=[],o.yArrjF=[],o.yArrjVal=[])}},{key:"getPathFillColor",value:function(o,c,h,_){var b,x,A,I,F=this.w,U=new Yi(this.barCtx.ctx),$=null,q=this.barCtx.barOptions.distributed?h:c;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(ie){o[c][h]>=ie.from&&o[c][h]<=ie.to&&($=ie.color)}),F.config.series[c].data[h]&&F.config.series[c].data[h].fillColor&&($=F.config.series[c].data[h].fillColor),U.fillPath({seriesNumber:this.barCtx.barOptions.distributed?q:_,dataPointIndex:h,color:$,value:o[c][h],fillConfig:null===(b=F.config.series[c].data[h])||void 0===b?void 0:b.fill,fillType:null!==(x=F.config.series[c].data[h])&&void 0!==x&&null!==(A=x.fill)&&void 0!==A&&A.type?null===(I=F.config.series[c].data[h])||void 0===I?void 0:I.fill.type:Array.isArray(F.config.fill.type)?F.config.fill.type[c]:F.config.fill.type})}},{key:"getStrokeWidth",value:function(o,c,h){var _=0,b=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[o][c],b.config.stroke.show&&(this.barCtx.isNullValue||(_=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[h]:this.barCtx.strokeWidth)),_}},{key:"shouldApplyRadius",value:function(o){var c=this.w,h=!1;return c.config.plotOptions.bar.borderRadius>0&&(c.config.chart.stacked&&"last"===c.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===o&&(h=!0):h=!0),h}},{key:"barBackground",value:function(o){var c=o.j,h=o.i,_=o.x1,b=o.x2,x=o.y1,A=o.y2,I=o.elSeries,F=this.w,U=new at(this.barCtx.ctx),$=new Dn(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&$===h){c>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(c%=this.barCtx.barOptions.colors.backgroundBarColors.length);var ie=U.drawRect(void 0!==_?_:0,void 0!==x?x:0,void 0!==b?b:F.globals.gridWidth,void 0!==A?A:F.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[c],this.barCtx.barOptions.colors.backgroundBarOpacity);I.add(ie),ie.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(o){var c,h=o.barWidth,_=o.barXPosition,b=o.y1,x=o.y2,A=o.strokeWidth,I=o.seriesGroup,F=o.realIndex,U=o.i,$=o.j,q=o.w,ie=new at(this.barCtx.ctx);(A=Array.isArray(A)?A[F]:A)||(A=0);var ue=h,ge=_;null!==(c=q.config.series[F].data[$])&&void 0!==c&&c.columnWidthOffset&&(ge=_-q.config.series[F].data[$].columnWidthOffset/2,ue=h+q.config.series[F].data[$].columnWidthOffset);var we=ge,me=ge+ue;x+=.001;var Ee=ie.move(we,b+=.001),N=ie.move(we,b),Q=ie.line(me-A,b);if(q.globals.previousPaths.length>0&&(N=this.barCtx.getPreviousPath(F,$,!1)),Ee=Ee+ie.line(we,x)+ie.line(me-A,x)+ie.line(me-A,b)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),N=N+ie.line(we,b)+Q+Q+Q+Q+Q+ie.line(we,b)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(F)&&(Ee=ie.roundPathCorners(Ee,q.config.plotOptions.bar.borderRadius)),q.config.chart.stacked){var pe=this.barCtx;q.globals.hasSeriesGroups&&I&&(pe=this.barCtx[I]),pe.yArrj.push(x),pe.yArrjF.push(Math.abs(b-x)),pe.yArrjVal.push(this.barCtx.series[U][$])}return{pathTo:Ee,pathFrom:N}}},{key:"getBarpaths",value:function(o){var c,h=o.barYPosition,_=o.barHeight,b=o.x1,x=o.x2,A=o.strokeWidth,I=o.seriesGroup,F=o.realIndex,U=o.i,$=o.j,q=o.w,ie=new at(this.barCtx.ctx);(A=Array.isArray(A)?A[F]:A)||(A=0);var ue=h,ge=_;null!==(c=q.config.series[F].data[$])&&void 0!==c&&c.barHeightOffset&&(ue=h-q.config.series[F].data[$].barHeightOffset/2,ge=_+q.config.series[F].data[$].barHeightOffset);var we=ue,me=ue+ge;x+=.001;var Ee=ie.move(b+=.001,we),N=ie.move(b,we);q.globals.previousPaths.length>0&&(N=this.barCtx.getPreviousPath(F,$,!1));var Q=ie.line(b,me-A);if(Ee=Ee+ie.line(x,we)+ie.line(x,me-A)+Q+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),N=N+ie.line(b,we)+Q+Q+Q+Q+Q+ie.line(b,we)+("around"===q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(F)&&(Ee=ie.roundPathCorners(Ee,q.config.plotOptions.bar.borderRadius)),q.config.chart.stacked){var pe=this.barCtx;q.globals.hasSeriesGroups&&I&&(pe=this.barCtx[I]),pe.xArrj.push(x),pe.xArrjF.push(Math.abs(b-x)),pe.xArrjVal.push(this.barCtx.series[U][$])}return{pathTo:Ee,pathFrom:N}}},{key:"checkZeroSeries",value:function(o){for(var c=o.series,h=this.w,_=0;_<c.length;_++){for(var b=0,x=0;x<c[h.globals.maxValsInArrayIndex].length;x++)b+=c[_][x];0===b&&this.barCtx.zeroSerieses.push(_)}}},{key:"getXForValue",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:c;return null!=o&&(h=c+o/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?o/this.barCtx.invertedYRatio:0)),h}},{key:"getYForValue",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:c;return null!=o&&(h=c-o/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?o/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),h}},{key:"getGoalValues",value:function(o,c,h,_,b){var x=this,A=this.w,I=[],F=function(q,ie){var ue;I.push((De(ue={},o,"x"===o?x.getXForValue(q,c,!1):x.getYForValue(q,h,!1)),De(ue,"attrs",ie),ue))};if(A.globals.seriesGoals[_]&&A.globals.seriesGoals[_][b]&&Array.isArray(A.globals.seriesGoals[_][b])&&A.globals.seriesGoals[_][b].forEach(function(q){F(q.value,q)}),this.barCtx.barOptions.isDumbbell&&A.globals.seriesRange.length){var U=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:A.globals.colors,$={strokeHeight:"x"===o?0:A.globals.markers.size[_],strokeWidth:"x"===o?A.globals.markers.size[_]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(U[_])?U[_][0]:U[_]};F(A.globals.seriesRangeStart[_][b],$),F(A.globals.seriesRangeEnd[_][b],ze(ze({},$),{},{strokeColor:Array.isArray(U[_])?U[_][1]:U[_]}))}return I}},{key:"drawGoalLine",value:function(o){var c=o.barXPosition,h=o.barYPosition,_=o.goalX,b=o.goalY,x=o.barWidth,A=o.barHeight,I=new at(this.barCtx.ctx),F=I.group({className:"apexcharts-bar-goals-groups"});F.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:F.node}),F.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var U=null;return this.barCtx.isHorizontal?Array.isArray(_)&&_.forEach(function($){var q=void 0!==$.attrs.strokeHeight?$.attrs.strokeHeight:A/2,ie=h+q+A/2;U=I.drawLine($.x,ie-2*q,$.x,ie,$.attrs.strokeColor?$.attrs.strokeColor:void 0,$.attrs.strokeDashArray,$.attrs.strokeWidth?$.attrs.strokeWidth:2,$.attrs.strokeLineCap),F.add(U)}):Array.isArray(b)&&b.forEach(function($){var q=void 0!==$.attrs.strokeWidth?$.attrs.strokeWidth:x/2,ie=c+q+x/2;U=I.drawLine(ie-2*q,$.y,ie,$.y,$.attrs.strokeColor?$.attrs.strokeColor:void 0,$.attrs.strokeDashArray,$.attrs.strokeHeight?$.attrs.strokeHeight:2,$.attrs.strokeLineCap),F.add(U)}),F}},{key:"drawBarShadow",value:function(o){var c=o.prevPaths,h=o.currPaths,_=o.color,b=this.w,x=c.x,A=c.x1,F=h.x,U=h.x1,$=h.barYPosition,q=c.barYPosition+h.barHeight,ie=new at(this.barCtx.ctx),ue=new $e,ge=ie.move(A,q)+ie.line(x,q)+ie.line(F,$)+ie.line(U,$)+ie.line(A,q)+("around"===b.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return ie.drawPath({d:ge,fill:ue.shadeColor(.5,$e.rgb2hex(_)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(o){var c=o.i,h=o.j,b=0,x=0;return this.w.globals.seriesPercent.forEach(function(A,I){A[h]&&b++,I<c&&0===A[h]&&x++}),{nonZeroColumns:b,zeroEncounters:x}}}]),le}(),zt=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w;var h=this.w;this.barOptions=h.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=h.config.stroke.width,this.isNullValue=!1,this.isRangeBar=h.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!h.globals.isBarHorizontal&&h.globals.seriesRange.length&&h.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=c,null!==this.xyRatios&&(this.xRatio=c.xRatio,this.yRatio=c.yRatio,this.invertedXRatio=c.invertedXRatio,this.invertedYRatio=c.invertedYRatio,this.baseLineY=c.baseLineY,this.baseLineInvertedY=c.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var _=new Dn(this.ctx);this.lastActiveBarSerieIndex=_.getActiveConfigSeriesIndex("desc",["bar","column"]);var b=_.getBarSeriesIndices(),x=new ri(this.ctx);this.stackedSeriesTotals=x.getStackedSeriesTotals(this.w.config.series.map(function(A,I){return-1===b.indexOf(I)?I:-1}).filter(function(A){return-1!==A})),this.barHelpers=new lt(this)}return Ae(le,[{key:"draw",value:function(o,c){var h=this.w,_=new at(this.ctx),b=new ri(this.ctx,h);o=b.getLogSeries(o),this.series=o,this.yRatio=b.getLogYRatios(this.yRatio),this.barHelpers.initVariables(o);var x=_.group({class:"apexcharts-bar-series apexcharts-plot-series"});h.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var A=0,I=0;A<o.length;A++,I++){var F,U,$,q,ie=void 0,ue=void 0,ge=[],we=[],me=h.globals.comboCharts?c[A]:A,Ee=_.group({class:"apexcharts-series",rel:A+1,seriesName:$e.escapeString(h.globals.seriesNames[me]),"data:realIndex":me});this.ctx.series.addCollapsedClassToSeries(Ee,me),o[A].length>0&&(this.visibleI=this.visibleI+1);var N=0,Q=0;this.yRatio.length>1&&(this.yaxisIndex=me),this.isReversed=h.config.yaxis[this.yaxisIndex]&&h.config.yaxis[this.yaxisIndex].reversed;var pe=this.barHelpers.initialPositions();ue=pe.y,N=pe.barHeight,U=pe.yDivision,q=pe.zeroW,ie=pe.x,Q=pe.barWidth,F=pe.xDivision,$=pe.zeroH,this.horizontal||we.push(ie+Q/2);var xe=_.group({class:"apexcharts-datalabels","data:realIndex":me});h.globals.delayedElements.push({el:xe.node}),xe.node.classList.add("apexcharts-element-hidden");var Le=_.group({class:"apexcharts-bar-goals-markers"}),qe=_.group({class:"apexcharts-bar-shadows"});h.globals.delayedElements.push({el:qe.node}),qe.node.classList.add("apexcharts-element-hidden");for(var kt=0;kt<o[A].length;kt++){var Dt=this.barHelpers.getStrokeWidth(A,kt,me),ei=null,wi={indexes:{i:A,j:kt,realIndex:me,bc:I},x:ie,y:ue,strokeWidth:Dt,elSeries:Ee};this.isHorizontal?(ei=this.drawBarPaths(ze(ze({},wi),{},{barHeight:N,zeroW:q,yDivision:U})),Q=this.series[A][kt]/this.invertedYRatio):(ei=this.drawColumnPaths(ze(ze({},wi),{},{xDivision:F,barWidth:Q,zeroH:$})),N=this.series[A][kt]/this.yRatio[this.yaxisIndex]);var Mi=this.barHelpers.getPathFillColor(o,A,kt,me);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&kt>0){var dn=this.barHelpers.drawBarShadow({color:"string"==typeof Mi&&-1===Mi?.indexOf("url")?Mi:$e.hexToRgba(h.globals.colors[A]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:ei});dn&&qe.add(dn)}this.pathArr.push(ei);var wn=this.barHelpers.drawGoalLine({barXPosition:ei.barXPosition,barYPosition:ei.barYPosition,goalX:ei.goalX,goalY:ei.goalY,barHeight:N,barWidth:Q});wn&&Le.add(wn),ue=ei.y,ie=ei.x,kt>0&&we.push(ie+Q/2),ge.push(ue),this.renderSeries({realIndex:me,pathFill:Mi,j:kt,i:A,pathFrom:ei.pathFrom,pathTo:ei.pathTo,strokeWidth:Dt,elSeries:Ee,x:ie,y:ue,series:o,barHeight:ei.barHeight?ei.barHeight:N,barWidth:ei.barWidth?ei.barWidth:Q,elDataLabelsWrap:xe,elGoalsMarkers:Le,elBarShadows:qe,visibleSeries:this.visibleI,type:"bar"})}h.globals.seriesXvalues[me]=we,h.globals.seriesYvalues[me]=ge,x.add(Ee)}return x}},{key:"renderSeries",value:function(o){var c=o.realIndex,h=o.pathFill,_=o.lineFill,b=o.j,x=o.i,A=o.groupIndex,I=o.pathFrom,F=o.pathTo,U=o.strokeWidth,$=o.elSeries,q=o.x,ie=o.y,ue=o.y1,ge=o.y2,we=o.series,me=o.barHeight,Ee=o.barWidth,N=o.barXPosition,Q=o.barYPosition,pe=o.elDataLabelsWrap,xe=o.elGoalsMarkers,Le=o.elBarShadows,qe=o.visibleSeries,kt=o.type,Dt=this.w,ei=new at(this.ctx);_||(_=this.barOptions.distributed?Dt.globals.stroke.colors[b]:Dt.globals.stroke.colors[c]),Dt.config.series[x].data[b]&&Dt.config.series[x].data[b].strokeColor&&(_=Dt.config.series[x].data[b].strokeColor),this.isNullValue&&(h="none");var Mi=ei.renderPaths({i:x,j:b,realIndex:c,pathFrom:I,pathTo:F,stroke:_,strokeWidth:U,strokeLineCap:Dt.config.stroke.lineCap,fill:h,animationDelay:b/Dt.config.chart.animations.animateGradually.delay*(Dt.config.chart.animations.speed/Dt.globals.dataPoints)/2.4,initialSpeed:Dt.config.chart.animations.speed,dataChangeSpeed:Dt.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(kt,"-area")});Mi.attr("clip-path","url(#gridRectMask".concat(Dt.globals.cuid,")"));var dn=Dt.config.forecastDataPoints;dn.count>0&&b>=Dt.globals.dataPoints-dn.count&&(Mi.node.setAttribute("stroke-dasharray",dn.dashArray),Mi.node.setAttribute("stroke-width",dn.strokeWidth),Mi.node.setAttribute("fill-opacity",dn.fillOpacity)),void 0!==ue&&void 0!==ge&&(Mi.attr("data-range-y1",ue),Mi.attr("data-range-y2",ge)),new oi(this.ctx).setSelectionFilter(Mi,c,b),$.add(Mi);var wn=new ct(this).handleBarDataLabels({x:q,y:ie,y1:ue,y2:ge,i:x,j:b,series:we,realIndex:c,groupIndex:A,barHeight:me,barWidth:Ee,barXPosition:N,barYPosition:Q,renderedPath:Mi,visibleSeries:qe});return null!==wn.dataLabels&&pe.add(wn.dataLabels),wn.totalDataLabels&&pe.add(wn.totalDataLabels),$.add(pe),xe&&$.add(xe),Le&&$.add(Le),$}},{key:"drawBarPaths",value:function(o){var c,A,h=o.indexes,_=o.barHeight,b=o.strokeWidth,x=o.zeroW,I=o.y,F=o.yDivision,U=o.elSeries,$=this.w,q=h.i,ie=h.j;if($.globals.isXNumeric)c=(I=($.globals.seriesX[q][ie]-$.globals.minX)/this.invertedXRatio-_)+_*this.visibleI;else if($.config.plotOptions.bar.hideZeroBarsWhenGrouped){var ue=0,ge=0;$.globals.seriesPercent.forEach(function(me,Ee){me[ie]&&ue++,Ee<q&&0===me[ie]&&ge++}),ue>0&&(_=this.seriesLen*_/ue),c=I+_*this.visibleI,c-=_*ge}else c=I+_*this.visibleI;this.isFunnel&&(x-=(this.barHelpers.getXForValue(this.series[q][ie],x)-x)/2),A=this.barHelpers.getXForValue(this.series[q][ie],x);var we=this.barHelpers.getBarpaths({barYPosition:c,barHeight:_,x1:x,x2:A,strokeWidth:b,series:this.series,realIndex:h.realIndex,i:q,j:ie,w:$});return $.globals.isXNumeric||(I+=F),this.barHelpers.barBackground({j:ie,i:q,y1:c-_*this.visibleI,y2:_*this.seriesLen,elSeries:U}),{pathTo:we.pathTo,pathFrom:we.pathFrom,x1:x,x:A,y:I,goalX:this.barHelpers.getGoalValues("x",x,null,q,ie),barYPosition:c,barHeight:_}}},{key:"drawColumnPaths",value:function(o){var c,b,h=o.indexes,_=o.x,x=o.xDivision,A=o.barWidth,I=o.zeroH,F=o.strokeWidth,U=o.elSeries,$=this.w,ie=h.i,ue=h.j,ge=h.bc;if($.globals.isXNumeric){var we=this.getBarXForNumericXAxis({x:_,j:ue,realIndex:h.realIndex,barWidth:A});_=we.x,c=we.barXPosition}else if($.config.plotOptions.bar.hideZeroBarsWhenGrouped){var me=this.barHelpers.getZeroValueEncounters({i:ie,j:ue}),Ee=me.nonZeroColumns;Ee>0&&(A=this.seriesLen*A/Ee),c=_+A*this.visibleI,c-=A*me.zeroEncounters}else c=_+A*this.visibleI;b=this.barHelpers.getYForValue(this.series[ie][ue],I);var Q=this.barHelpers.getColumnPaths({barXPosition:c,barWidth:A,y1:I,y2:b,strokeWidth:F,series:this.series,realIndex:h.realIndex,i:ie,j:ue,w:$});return $.globals.isXNumeric||(_+=x),this.barHelpers.barBackground({bc:ge,j:ue,i:ie,x1:c-F/2-A*this.visibleI,x2:A*this.seriesLen+F/2,elSeries:U}),{pathTo:Q.pathTo,pathFrom:Q.pathFrom,x:_,y:b,goalY:this.barHelpers.getGoalValues("y",null,I,ie,ue),barXPosition:c,barWidth:A}}},{key:"getBarXForNumericXAxis",value:function(o){var c=o.x,h=o.barWidth,_=o.realIndex,b=o.j,x=this.w,A=_;return x.globals.seriesX[_].length||(A=x.globals.maxValsInArrayIndex),x.globals.seriesX[A][b]&&(c=(x.globals.seriesX[A][b]-x.globals.minX)/this.xRatio-h*this.seriesLen/2),{barXPosition:c+h*this.visibleI,x:c}}},{key:"getPreviousPath",value:function(o,c){for(var h,_=this.w,b=0;b<_.globals.previousPaths.length;b++){var x=_.globals.previousPaths[b];x.paths&&x.paths.length>0&&parseInt(x.realIndex,10)===parseInt(o,10)&&void 0!==_.globals.previousPaths[b].paths[c]&&(h=_.globals.previousPaths[b].paths[c].d)}return h}}]),le}(),qt=function(le){Fe(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Ae(c,[{key:"draw",value:function(h,_){var b=this,x=this.w;this.graphics=new at(this.ctx),this.bar=new zt(this.ctx,this.xyRatios);var A=new ri(this.ctx,x);h=A.getLogSeries(h),this.yRatio=A.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h),"100%"===x.config.chart.stackType&&(h=x.globals.seriesPercent.slice()),this.series=h,this.barHelpers.initializeStackedPrevVars(this);for(var I=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),F=0,U=0,$=function(ue,ge){var we=void 0,me=void 0,Ee=void 0,N=void 0,Q=-1;b.groupCtx=b,x.globals.seriesGroups.forEach(function(Pr,jr){Pr.indexOf(x.config.series[ue].name)>-1&&(Q=jr)}),-1!==Q&&(b.groupCtx=b[x.globals.seriesGroups[Q]]);var pe=[],xe=[],Le=x.globals.comboCharts?_[ue]:ue;b.yRatio.length>1&&(b.yaxisIndex=Le),b.isReversed=x.config.yaxis[b.yaxisIndex]&&x.config.yaxis[b.yaxisIndex].reversed;var qe=b.graphics.group({class:"apexcharts-series",seriesName:$e.escapeString(x.globals.seriesNames[Le]),rel:ue+1,"data:realIndex":Le});b.ctx.series.addCollapsedClassToSeries(qe,Le);var kt=b.graphics.group({class:"apexcharts-datalabels","data:realIndex":Le}),Dt=b.graphics.group({class:"apexcharts-bar-goals-markers"}),ei=0,wi=0,Mi=b.initialPositions(F,U,we,me,Ee,N);U=Mi.y,me=Mi.yDivision,N=Mi.zeroW,F=Mi.x,wi=Mi.barWidth,we=Mi.xDivision,Ee=Mi.zeroH,x.globals.barHeight=ei=Mi.barHeight,x.globals.barWidth=wi,b.barHelpers.initializeStackedXYVars(b),1===b.groupCtx.prevY.length&&b.groupCtx.prevY[0].every(function(Pr){return isNaN(Pr)})&&(b.groupCtx.prevY[0]=b.groupCtx.prevY[0].map(function(Pr){return Ee}),b.groupCtx.prevYF[0]=b.groupCtx.prevYF[0].map(function(Pr){return 0}));for(var dn=0;dn<x.globals.dataPoints;dn++){var wn=b.barHelpers.getStrokeWidth(ue,dn,Le),Fn={indexes:{i:ue,j:dn,realIndex:Le,bc:ge},strokeWidth:wn,x:F,y:U,elSeries:qe,groupIndex:Q,seriesGroup:x.globals.seriesGroups[Q]},Qn=null;b.isHorizontal?(Qn=b.drawStackedBarPaths(ze(ze({},Fn),{},{zeroW:N,barHeight:ei,yDivision:me})),wi=b.series[ue][dn]/b.invertedYRatio):(Qn=b.drawStackedColumnPaths(ze(ze({},Fn),{},{xDivision:we,barWidth:wi,zeroH:Ee})),ei=b.series[ue][dn]/b.yRatio[b.yaxisIndex]);var lr=b.barHelpers.drawGoalLine({barXPosition:Qn.barXPosition,barYPosition:Qn.barYPosition,goalX:Qn.goalX,goalY:Qn.goalY,barHeight:ei,barWidth:wi});lr&&Dt.add(lr),U=Qn.y,pe.push(F=Qn.x),xe.push(U);var cr=b.barHelpers.getPathFillColor(h,ue,dn,Le);qe=b.renderSeries({realIndex:Le,pathFill:cr,j:dn,i:ue,groupIndex:Q,pathFrom:Qn.pathFrom,pathTo:Qn.pathTo,strokeWidth:wn,elSeries:qe,x:F,y:U,series:h,barHeight:ei,barWidth:wi,elDataLabelsWrap:kt,elGoalsMarkers:Dt,type:"bar",visibleSeries:0})}x.globals.seriesXvalues[Le]=pe,x.globals.seriesYvalues[Le]=xe,b.groupCtx.prevY.push(b.groupCtx.yArrj),b.groupCtx.prevYF.push(b.groupCtx.yArrjF),b.groupCtx.prevYVal.push(b.groupCtx.yArrjVal),b.groupCtx.prevX.push(b.groupCtx.xArrj),b.groupCtx.prevXF.push(b.groupCtx.xArrjF),b.groupCtx.prevXVal.push(b.groupCtx.xArrjVal),I.add(qe)},q=0,ie=0;q<h.length;q++,ie++)$(q,ie);return I}},{key:"initialPositions",value:function(h,_,b,x,A,I){var F,U,$,q,ie=this.w;return this.isHorizontal?($=($=x=ie.globals.gridHeight/ie.globals.dataPoints)*parseInt(ie.config.plotOptions.bar.barHeight,10)/100,-1===String(ie.config.plotOptions.bar.barHeight).indexOf("%")&&($=parseInt(ie.config.plotOptions.bar.barHeight,10)),I=this.baseLineInvertedY+ie.globals.padHorizontal+(this.isReversed?ie.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),_=(x-$)/2):(q=b=ie.globals.gridWidth/ie.globals.dataPoints,q=ie.globals.isXNumeric&&ie.globals.dataPoints>1?(b=ie.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:q*parseInt(ie.config.plotOptions.bar.columnWidth,10)/100,-1===String(ie.config.plotOptions.bar.columnWidth).indexOf("%")&&(q=parseInt(ie.config.plotOptions.bar.columnWidth,10)),A=ie.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?ie.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),h=ie.globals.padHorizontal+(b-q)/2),{x:h,y:_,yDivision:x,xDivision:b,barHeight:null!==(F=ie.globals.seriesGroups)&&void 0!==F&&F.length?$/ie.globals.seriesGroups.length:$,barWidth:null!==(U=ie.globals.seriesGroups)&&void 0!==U&&U.length?q/ie.globals.seriesGroups.length:q,zeroH:A,zeroW:I}}},{key:"drawStackedBarPaths",value:function(h){for(var _,F,b=h.indexes,x=h.barHeight,A=h.strokeWidth,I=h.zeroW,U=h.y,$=h.groupIndex,q=h.seriesGroup,ie=h.yDivision,ue=h.elSeries,ge=this.w,we=U+(-1!==$?$*x:0),me=b.i,Ee=b.j,N=0,Q=0;Q<this.groupCtx.prevXF.length;Q++)N+=this.groupCtx.prevXF[Q][Ee];var pe=me;if(q&&(pe=q.indexOf(ge.config.series[me].name)),pe>0){var xe=I;this.groupCtx.prevXVal[pe-1][Ee]<0?xe=this.series[me][Ee]>=0?this.groupCtx.prevX[pe-1][Ee]+N-2*(this.isReversed?N:0):this.groupCtx.prevX[pe-1][Ee]:this.groupCtx.prevXVal[pe-1][Ee]>=0&&(xe=this.series[me][Ee]>=0?this.groupCtx.prevX[pe-1][Ee]:this.groupCtx.prevX[pe-1][Ee]-N+2*(this.isReversed?N:0)),_=xe}else _=I;var Le=this.barHelpers.getBarpaths({barYPosition:we,barHeight:x,x1:_,x2:F=null===this.series[me][Ee]?_:_+this.series[me][Ee]/this.invertedYRatio-2*(this.isReversed?this.series[me][Ee]/this.invertedYRatio:0),strokeWidth:A,series:this.series,realIndex:b.realIndex,seriesGroup:q,i:me,j:Ee,w:ge});return this.barHelpers.barBackground({j:Ee,i:me,y1:we,y2:x,elSeries:ue}),U+=ie,{pathTo:Le.pathTo,pathFrom:Le.pathFrom,goalX:this.barHelpers.getGoalValues("x",I,null,me,Ee),barYPosition:we,x:F,y:U}}},{key:"drawStackedColumnPaths",value:function(h){var x,_=h.indexes,b=h.x,A=h.xDivision,I=h.barWidth,F=h.zeroH,U=h.groupIndex,$=h.seriesGroup,q=h.elSeries,ie=this.w,ue=_.i,ge=_.j,we=_.bc;if(ie.globals.isXNumeric){var me=ie.globals.seriesX[ue][ge];me||(me=0),b=(me-ie.globals.minX)/this.xRatio-I/2,ie.globals.seriesGroups.length&&(b=(me-ie.globals.minX)/this.xRatio-I/2*ie.globals.seriesGroups.length)}for(var Ee,N=b+(-1!==U?U*I:0),Q=0,pe=0;pe<this.groupCtx.prevYF.length;pe++)Q+=isNaN(this.groupCtx.prevYF[pe][ge])?0:this.groupCtx.prevYF[pe][ge];var xe=ue;if($&&(xe=$.indexOf(ie.config.series[ue].name)),xe>0&&!ie.globals.isXNumeric||xe>0&&ie.globals.isXNumeric&&ie.globals.seriesX[ue-1][ge]===ie.globals.seriesX[ue][ge]){var Le,qe,kt,Dt=Math.min(this.yRatio.length+1,ue+1);if(void 0!==this.groupCtx.prevY[xe-1]&&this.groupCtx.prevY[xe-1].length)for(var ei=1;ei<Dt;ei++){var wi;if(!isNaN(null===(wi=this.groupCtx.prevY[xe-ei])||void 0===wi?void 0:wi[ge])){kt=this.groupCtx.prevY[xe-ei][ge];break}}for(var Mi=1;Mi<Dt;Mi++){var dn,wn;if((null===(dn=this.groupCtx.prevYVal[xe-Mi])||void 0===dn?void 0:dn[ge])<0){qe=this.series[ue][ge]>=0?kt-Q+2*(this.isReversed?Q:0):kt;break}if((null===(wn=this.groupCtx.prevYVal[xe-Mi])||void 0===wn?void 0:wn[ge])>=0){qe=this.series[ue][ge]>=0?kt:kt+Q-2*(this.isReversed?Q:0);break}}void 0===qe&&(qe=ie.globals.gridHeight),Ee=null!==(Le=this.groupCtx.prevYF[0])&&void 0!==Le&&Le.every(function(Qn){return 0===Qn})&&this.groupCtx.prevYF.slice(1,xe).every(function(Qn){return Qn.every(function(lr){return isNaN(lr)})})?F:qe}else Ee=F;var Fn=this.barHelpers.getColumnPaths({barXPosition:N,barWidth:I,y1:Ee,y2:x=this.series[ue][ge]?Ee-this.series[ue][ge]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[ue][ge]/this.yRatio[this.yaxisIndex]:0):Ee,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:$,realIndex:_.realIndex,i:ue,j:ge,w:ie});return this.barHelpers.barBackground({bc:we,j:ge,i:ue,x1:N,x2:I,elSeries:q}),b+=A,{pathTo:Fn.pathTo,pathFrom:Fn.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,F,ue,ge),barXPosition:N,x:ie.globals.isXNumeric?b-A:b,y:x}}}]),c}(),Kt=function(le){Fe(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Ae(c,[{key:"draw",value:function(h,_,b){var x=this,A=this.w,I=new at(this.ctx),F=A.globals.comboCharts?_:A.config.chart.type,U=new Yi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=A.config.plotOptions.bar.horizontal;var $=new ri(this.ctx,A);h=$.getLogSeries(h),this.series=h,this.yRatio=$.getLogYRatios(this.yRatio),this.barHelpers.initVariables(h);for(var q=I.group({class:"apexcharts-".concat(F,"-series apexcharts-plot-series")}),ie=function(ge){x.isBoxPlot="boxPlot"===A.config.chart.type||"boxPlot"===A.config.series[ge].type;var we,me,Ee,N,Dt,ei,Q=void 0,pe=void 0,xe=[],Le=[],qe=A.globals.comboCharts?b[ge]:ge,kt=I.group({class:"apexcharts-series",seriesName:$e.escapeString(A.globals.seriesNames[qe]),rel:ge+1,"data:realIndex":qe});x.ctx.series.addCollapsedClassToSeries(kt,qe),h[ge].length>0&&(x.visibleI=x.visibleI+1),x.yRatio.length>1&&(x.yaxisIndex=qe);var wi=x.barHelpers.initialPositions();pe=wi.y,Dt=wi.barHeight,me=wi.yDivision,N=wi.zeroW,we=wi.xDivision,Ee=wi.zeroH,Le.push((Q=wi.x)+(ei=wi.barWidth)/2);for(var Mi=I.group({class:"apexcharts-datalabels","data:realIndex":qe}),dn=function(Fn){var Qn=x.barHelpers.getStrokeWidth(ge,Fn,qe),lr=null,cr={indexes:{i:ge,j:Fn,realIndex:qe},x:Q,y:pe,strokeWidth:Qn,elSeries:kt};lr=x.isHorizontal?x.drawHorizontalBoxPaths(ze(ze({},cr),{},{yDivision:me,barHeight:Dt,zeroW:N})):x.drawVerticalBoxPaths(ze(ze({},cr),{},{xDivision:we,barWidth:ei,zeroH:Ee})),pe=lr.y,Q=lr.x,Fn>0&&Le.push(Q+ei/2),xe.push(pe),lr.pathTo.forEach(function(Pr,jr){var Wr=!x.isBoxPlot&&x.candlestickOptions.wick.useFillColor?lr.color[jr]:A.globals.stroke.colors[ge],Dr=U.fillPath({seriesNumber:qe,dataPointIndex:Fn,color:lr.color[jr],value:h[ge][Fn]});x.renderSeries({realIndex:qe,pathFill:Dr,lineFill:Wr,j:Fn,i:ge,pathFrom:lr.pathFrom,pathTo:Pr,strokeWidth:Qn,elSeries:kt,x:Q,y:pe,series:h,barHeight:Dt,barWidth:ei,elDataLabelsWrap:Mi,visibleSeries:x.visibleI,type:A.config.chart.type})})},wn=0;wn<A.globals.dataPoints;wn++)dn(wn);A.globals.seriesXvalues[qe]=Le,A.globals.seriesYvalues[qe]=xe,q.add(kt)},ue=0;ue<h.length;ue++)ie(ue);return q}},{key:"drawVerticalBoxPaths",value:function(h){var _=h.indexes,b=h.x,x=h.xDivision,A=h.barWidth,I=h.zeroH,F=h.strokeWidth,U=this.w,$=new at(this.ctx),q=_.i,ie=_.j,ue=!0,ge=U.config.plotOptions.candlestick.colors.upward,we=U.config.plotOptions.candlestick.colors.downward,me="";this.isBoxPlot&&(me=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Ee=this.yRatio[this.yaxisIndex],N=_.realIndex,Q=this.getOHLCValue(N,ie),pe=I,xe=I;Q.o>Q.c&&(ue=!1);var Le=Math.min(Q.o,Q.c),qe=Math.max(Q.o,Q.c),kt=Q.m;U.globals.isXNumeric&&(b=(U.globals.seriesX[N][ie]-U.globals.minX)/this.xRatio-A/2);var Dt=b+A*this.visibleI;null==this.series[q][ie]?(Le=I,qe=I):(Le=I-Le/Ee,qe=I-qe/Ee,pe=I-Q.h/Ee,xe=I-Q.l/Ee,kt=I-Q.m/Ee);var ei=$.move(Dt,I),wi=$.move(Dt+A/2,Le);return U.globals.previousPaths.length>0&&(wi=this.getPreviousPath(N,ie,!0)),ei=this.isBoxPlot?[$.move(Dt,Le)+$.line(Dt+A/2,Le)+$.line(Dt+A/2,pe)+$.line(Dt+A/4,pe)+$.line(Dt+A-A/4,pe)+$.line(Dt+A/2,pe)+$.line(Dt+A/2,Le)+$.line(Dt+A,Le)+$.line(Dt+A,kt)+$.line(Dt,kt)+$.line(Dt,Le+F/2),$.move(Dt,kt)+$.line(Dt+A,kt)+$.line(Dt+A,qe)+$.line(Dt+A/2,qe)+$.line(Dt+A/2,xe)+$.line(Dt+A-A/4,xe)+$.line(Dt+A/4,xe)+$.line(Dt+A/2,xe)+$.line(Dt+A/2,qe)+$.line(Dt,qe)+$.line(Dt,kt)+"z"]:[$.move(Dt,qe)+$.line(Dt+A/2,qe)+$.line(Dt+A/2,pe)+$.line(Dt+A/2,qe)+$.line(Dt+A,qe)+$.line(Dt+A,Le)+$.line(Dt+A/2,Le)+$.line(Dt+A/2,xe)+$.line(Dt+A/2,Le)+$.line(Dt,Le)+$.line(Dt,qe-F/2)],wi+=$.move(Dt,Le),U.globals.isXNumeric||(b+=x),{pathTo:ei,pathFrom:wi,x:b,y:qe,barXPosition:Dt,color:this.isBoxPlot?me:ue?[ge]:[we]}}},{key:"drawHorizontalBoxPaths",value:function(h){var _=h.indexes,b=h.y,x=h.yDivision,A=h.barHeight,I=h.zeroW,F=h.strokeWidth,U=this.w,$=new at(this.ctx),q=_.i,ie=_.j,ue=this.boxOptions.colors.lower;this.isBoxPlot&&(ue=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ge=this.invertedYRatio,we=_.realIndex,me=this.getOHLCValue(we,ie),Ee=I,N=I,Q=Math.min(me.o,me.c),pe=Math.max(me.o,me.c),xe=me.m;U.globals.isXNumeric&&(b=(U.globals.seriesX[we][ie]-U.globals.minX)/this.invertedXRatio-A/2);var Le=b+A*this.visibleI;null==this.series[q][ie]?(Q=I,pe=I):(Q=I+Q/ge,pe=I+pe/ge,Ee=I+me.h/ge,N=I+me.l/ge,xe=I+me.m/ge);var qe=$.move(I,Le),kt=$.move(Q,Le+A/2);return U.globals.previousPaths.length>0&&(kt=this.getPreviousPath(we,ie,!0)),qe=[$.move(Q,Le)+$.line(Q,Le+A/2)+$.line(Ee,Le+A/2)+$.line(Ee,Le+A/2-A/4)+$.line(Ee,Le+A/2+A/4)+$.line(Ee,Le+A/2)+$.line(Q,Le+A/2)+$.line(Q,Le+A)+$.line(xe,Le+A)+$.line(xe,Le)+$.line(Q+F/2,Le),$.move(xe,Le)+$.line(xe,Le+A)+$.line(pe,Le+A)+$.line(pe,Le+A/2)+$.line(N,Le+A/2)+$.line(N,Le+A-A/4)+$.line(N,Le+A/4)+$.line(N,Le+A/2)+$.line(pe,Le+A/2)+$.line(pe,Le)+$.line(xe,Le)+"z"],kt+=$.move(Q,Le),U.globals.isXNumeric||(b+=x),{pathTo:qe,pathFrom:kt,x:pe,y:b,barYPosition:Le,color:ue}}},{key:"getOHLCValue",value:function(h,_){var b=this.w;return{o:this.isBoxPlot?b.globals.seriesCandleH[h][_]:b.globals.seriesCandleO[h][_],h:this.isBoxPlot?b.globals.seriesCandleO[h][_]:b.globals.seriesCandleH[h][_],m:b.globals.seriesCandleM[h][_],l:this.isBoxPlot?b.globals.seriesCandleC[h][_]:b.globals.seriesCandleL[h][_],c:this.isBoxPlot?b.globals.seriesCandleL[h][_]:b.globals.seriesCandleC[h][_]}}}]),c}(),pt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"checkColorRange",value:function(){var o=this.w,c=!1,h=o.config.plotOptions[o.config.chart.type];return h.colorScale.ranges.length>0&&h.colorScale.ranges.map(function(_,b){_.from<=0&&(c=!0)}),c}},{key:"getShadeColor",value:function(o,c,h,_){var b=this.w,x=1,A=b.config.plotOptions[o].shadeIntensity,I=this.determineColor(o,c,h);b.globals.hasNegs||_?x=b.config.plotOptions[o].reverseNegativeShade?I.percent<0?I.percent/100*(1.25*A):1.25*A*(1-I.percent/100):I.percent<=0?1-(1+I.percent/100)*A:(1-I.percent/100)*A:(x=1-I.percent/100,"treemap"===o&&(x=1.25*A*(1-I.percent/100)));var F=I.color,U=new $e;return b.config.plotOptions[o].enableShades&&(F=$e.hexToRgba(U.shadeColor("dark"===this.w.config.theme.mode?-1*x:x,I.color),b.config.fill.opacity)),{color:F,colorProps:I}}},{key:"determineColor",value:function(o,c,h){var _=this.w,b=_.globals.series[c][h],x=_.config.plotOptions[o],A=x.colorScale.inverse?h:c;x.distributed&&"treemap"===_.config.chart.type&&(A=h);var I=_.globals.colors[A],F=null,U=Math.min.apply(Math,ot(_.globals.series[c])),$=Math.max.apply(Math,ot(_.globals.series[c]));x.distributed||"heatmap"!==o||(U=_.globals.minY,$=_.globals.maxY),void 0!==x.colorScale.min&&(U=x.colorScale.min<_.globals.minY?x.colorScale.min:_.globals.minY,$=x.colorScale.max>_.globals.maxY?x.colorScale.max:_.globals.maxY);var q=Math.abs($)+Math.abs(U),ie=100*b/(0===q?q-1e-6:q);return x.colorScale.ranges.length>0&&x.colorScale.ranges.map(function(ue,ge){if(b>=ue.from&&b<=ue.to){I=ue.color,F=ue.foreColor?ue.foreColor:null,U=ue.from,$=ue.to;var we=Math.abs($)+Math.abs(U);ie=100*b/(0===we?we-1e-6:we)}}),{color:I,foreColor:F,percent:ie}}},{key:"calculateDataLabels",value:function(o){var c=o.text,h=o.x,_=o.y,b=o.i,x=o.j,A=o.colorProps,I=o.fontSize,F=this.w.config.dataLabels,U=new at(this.ctx),$=new Nn(this.ctx),q=null;if(F.enabled){q=U.group({class:"apexcharts-data-labels"});var ue=F.offsetY,ge=h+F.offsetX,we=_+parseFloat(F.style.fontSize)/3+ue;$.plotDataLabelsText({x:ge,y:we,text:c,i:b,j:x,color:A.foreColor,parent:q,fontSize:I,dataLabelsConfig:F})}return q}},{key:"addListeners",value:function(o){var c=new at(this.ctx);o.node.addEventListener("mouseenter",c.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",c.pathMouseLeave.bind(this,o)),o.node.addEventListener("mousedown",c.pathMouseDown.bind(this,o))}}]),le}(),ui=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w,this.xRatio=c.xRatio,this.yRatio=c.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new pt(o),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Ae(le,[{key:"draw",value:function(o){var c=this.w,h=new at(this.ctx),_=h.group({class:"apexcharts-heatmap"});_.attr("clip-path","url(#gridRectMask".concat(c.globals.cuid,")"));var b=c.globals.gridWidth/c.globals.dataPoints,x=c.globals.gridHeight/c.globals.series.length,A=0,I=!1;this.negRange=this.helpers.checkColorRange();var F=o.slice();c.config.yaxis[0].reversed&&(I=!0,F.reverse());for(var U=I?0:F.length-1;I?U<F.length:U>=0;I?U++:U--){var $=h.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:$e.escapeString(c.globals.seriesNames[U]),rel:U+1,"data:realIndex":U});if(this.ctx.series.addCollapsedClassToSeries($,U),c.config.chart.dropShadow.enabled){var q=c.config.chart.dropShadow;new oi(this.ctx).dropShadow($,q,U)}for(var ie=0,ue=c.config.plotOptions.heatmap.shadeIntensity,ge=0;ge<F[U].length;ge++){var we=this.helpers.getShadeColor(c.config.chart.type,U,ge,this.negRange),me=we.color,Ee=we.colorProps;"image"===c.config.fill.type&&(me=new Yi(this.ctx).fillPath({seriesNumber:U,dataPointIndex:ge,opacity:c.globals.hasNegs?Ee.percent<0?1-(1+Ee.percent/100):ue+Ee.percent/100:Ee.percent/100,patternID:$e.randomId(),width:c.config.fill.image.width?c.config.fill.image.width:b,height:c.config.fill.image.height?c.config.fill.image.height:x}));var Q=h.drawRect(ie,A,b,x,this.rectRadius);if(Q.attr({cx:ie,cy:A}),Q.node.classList.add("apexcharts-heatmap-rect"),$.add(Q),Q.attr({fill:me,i:U,index:U,j:ge,val:o[U][ge],"stroke-width":this.strokeWidth,stroke:c.config.plotOptions.heatmap.useFillColorAsStroke?me:c.globals.stroke.colors[0],color:me}),this.helpers.addListeners(Q),c.config.chart.animations.enabled&&!c.globals.dataChanged){var pe=1;c.globals.resized||(pe=c.config.chart.animations.speed),this.animateHeatMap(Q,ie,A,b,x,pe)}if(c.globals.dataChanged){var xe=1;if(this.dynamicAnim.enabled&&c.globals.shouldAnimate){xe=this.dynamicAnim.speed;var Le=c.globals.previousPaths[U]&&c.globals.previousPaths[U][ge]&&c.globals.previousPaths[U][ge].color;Le||(Le="rgba(255, 255, 255, 0)"),this.animateHeatColor(Q,$e.isColorHex(Le)?Le:$e.rgb2hex(Le),$e.isColorHex(me)?me:$e.rgb2hex(me),xe)}}var qe=(0,c.config.dataLabels.formatter)(c.globals.series[U][ge],{value:c.globals.series[U][ge],seriesIndex:U,dataPointIndex:ge,w:c}),kt=this.helpers.calculateDataLabels({text:qe,x:ie+b/2,y:A+x/2,i:U,j:ge,colorProps:Ee,series:F});null!==kt&&$.add(kt),ie+=b}A+=x,_.add($)}var Dt=c.globals.yAxisScale[0].result.slice();return c.config.yaxis[0].reversed?Dt.unshift(""):Dt.push(""),c.globals.yAxisScale[0].result=Dt,_}},{key:"animateHeatMap",value:function(o,c,h,_,b,x){var A=new ii(this.ctx);A.animateRect(o,{x:c+_/2,y:h+b/2,width:0,height:0},{x:c,y:h,width:_,height:b},x,function(){A.animationCompleted(o)})}},{key:"animateHeatColor",value:function(o,c,h,_){o.attr({fill:c}).animate(_).attr({fill:h})}}]),le}(),Vi=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"drawYAxisTexts",value:function(o,c,h,_){var b=this.w,x=b.config.yaxis[0],A=b.globals.yLabelFormatters[0];return new at(this.ctx).drawText({x:o+x.labels.offsetX,y:c+x.labels.offsetY,text:A(_,h),textAnchor:"middle",fontSize:x.labels.style.fontSize,fontFamily:x.labels.style.fontFamily,foreColor:Array.isArray(x.labels.style.colors)?x.labels.style.colors[h]:x.labels.style.colors})}}]),le}(),$i=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w;var c=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==c.globals.stroke.colors?c.globals.stroke.colors:c.globals.colors,this.defaultSize=Math.min(c.globals.gridWidth,c.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=c.globals.gridWidth/2,this.fullAngle="radialBar"===c.config.chart.type?360:Math.abs(c.config.plotOptions.pie.endAngle-c.config.plotOptions.pie.startAngle),this.initialAngle=c.config.plotOptions.pie.startAngle%this.fullAngle,c.globals.radialSize=this.defaultSize/2.05-c.config.stroke.width-(c.config.chart.sparkline.enabled?0:c.config.chart.dropShadow.blur),this.donutSize=c.globals.radialSize*parseInt(c.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Ae(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new at(this.ctx);if(this.ret=_.group({class:"apexcharts-pie"}),h.globals.noData)return this.ret;for(var b=0,x=0;x<o.length;x++)b+=$e.negToZero(o[x]);var A=[],I=_.group();0===b&&(b=1e-5),o.forEach(function(Le){c.maxY=Math.max(c.maxY,Le)}),h.config.yaxis[0].max&&(this.maxY=h.config.yaxis[0].max),"back"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var F=0;F<o.length;F++){var U=this.fullAngle*$e.negToZero(o[F])/b;A.push(U),"polarArea"===this.chartType?(A[F]=this.fullAngle/o.length,this.sliceSizes.push(h.globals.radialSize*o[F]/this.maxY)):this.sliceSizes.push(h.globals.radialSize)}if(h.globals.dataChanged){for(var $,q=0,ie=0;ie<h.globals.previousPaths.length;ie++)q+=$e.negToZero(h.globals.previousPaths[ie]);for(var ue=0;ue<h.globals.previousPaths.length;ue++)$=this.fullAngle*$e.negToZero(h.globals.previousPaths[ue])/q,this.prevSectorAngleArr.push($)}this.donutSize<0&&(this.donutSize=0);var ge=h.config.plotOptions.pie.customScale,Ee=h.globals.gridWidth/2-h.globals.gridWidth/2*ge,N=h.globals.gridHeight/2-h.globals.gridHeight/2*ge;if("donut"===this.chartType){var Q=_.drawCircle(this.donutSize);Q.attr({cx:this.centerX,cy:this.centerY,fill:h.config.plotOptions.pie.donut.background?h.config.plotOptions.pie.donut.background:"transparent"}),I.add(Q)}var pe=this.drawArcs(A,o);if(this.sliceLabels.forEach(function(Le){pe.add(Le)}),I.attr({transform:"translate(".concat(Ee,", ").concat(N,") scale(").concat(ge,")")}),I.add(pe),this.ret.add(I),this.donutDataLabels.show){var xe=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:Ee,translateY:N});this.ret.add(xe)}return"front"===h.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(o,c){var h=this.w,_=new oi(this.ctx),b=new at(this.ctx),x=new Yi(this.ctx),A=b.group({class:"apexcharts-slices"}),I=this.initialAngle,F=this.initialAngle,U=this.initialAngle,$=this.initialAngle;this.strokeWidth=h.config.stroke.show?h.config.stroke.width:0;for(var q=0;q<o.length;q++){var ie=b.group({class:"apexcharts-series apexcharts-pie-series",seriesName:$e.escapeString(h.globals.seriesNames[q]),rel:q+1,"data:realIndex":q});A.add(ie),U=(I=U)+o[q],$=(F=$)+this.prevSectorAngleArr[q];var ue=U<I?this.fullAngle+U-I:U-I,ge=x.fillPath({seriesNumber:q,size:this.sliceSizes[q],value:c[q]}),we=this.getChangedPath(F,$),me=b.drawPath({d:we,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[q]:this.lineColorArr,strokeWidth:0,fill:ge,fillOpacity:h.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(q)});me.attr({index:0,j:q}),_.setSelectionFilter(me,0,q),h.config.chart.dropShadow.enabled&&_.dropShadow(me,h.config.chart.dropShadow,q),this.addListeners(me,this.donutDataLabels),at.setAttrs(me.node,{"data:angle":ue,"data:startAngle":I,"data:strokeWidth":this.strokeWidth,"data:value":c[q]});var N={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?N=$e.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize/1.25+h.config.plotOptions.pie.dataLabels.offset,(I+ue/2)%this.fullAngle):"donut"===this.chartType&&(N=$e.polarToCartesian(this.centerX,this.centerY,(h.globals.radialSize+this.donutSize)/2+h.config.plotOptions.pie.dataLabels.offset,(I+ue/2)%this.fullAngle)),ie.add(me);var Q=0;if(!this.initialAnim||h.globals.resized||h.globals.dataChanged?this.animBeginArr.push(0):(0==(Q=ue/this.fullAngle*h.config.chart.animations.speed)&&(Q=1),this.animDur=Q+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(me,this.dynamicAnim&&h.globals.dataChanged?{size:this.sliceSizes[q],endAngle:U,startAngle:I,prevStartAngle:F,prevEndAngle:$,animateStartingPos:!0,i:q,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:h.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[q],endAngle:U,startAngle:I,i:q,totalItems:o.length-1,animBeginArr:this.animBeginArr,dur:Q}),h.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&me.click(this.pieClicked.bind(this,q)),void 0!==h.globals.selectedDataPoints[0]&&h.globals.selectedDataPoints[0].indexOf(q)>-1&&this.pieClicked(q),h.config.dataLabels.enabled){var pe=N.x,xe=N.y,Le=100*ue/this.fullAngle+"%";if(0!==ue&&h.config.plotOptions.pie.dataLabels.minAngleToShowLabel<o[q]){var qe=h.config.dataLabels.formatter;void 0!==qe&&(Le=qe(h.globals.seriesPercent[q][0],{seriesIndex:q,w:h}));var kt=h.globals.dataLabels.style.colors[q],Dt=b.group({class:"apexcharts-datalabels"}),ei=b.drawText({x:pe,y:xe,text:Le,textAnchor:"middle",fontSize:h.config.dataLabels.style.fontSize,fontFamily:h.config.dataLabels.style.fontFamily,fontWeight:h.config.dataLabels.style.fontWeight,foreColor:kt});Dt.add(ei),h.config.dataLabels.dropShadow.enabled&&_.dropShadow(ei,h.config.dataLabels.dropShadow),ei.node.classList.add("apexcharts-pie-label"),h.config.chart.animations.animate&&!1===h.globals.resized&&(ei.node.classList.add("apexcharts-pie-label-delay"),ei.node.style.animationDelay=h.config.chart.animations.speed/940+"s"),this.sliceLabels.push(Dt)}}}return A}},{key:"addListeners",value:function(o,c){var h=new at(this.ctx);o.node.addEventListener("mouseenter",h.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",h.pathMouseLeave.bind(this,o)),o.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,o.node,c)),o.node.addEventListener("mousedown",h.pathMouseDown.bind(this,o)),this.donutDataLabels.total.showAlways||(o.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,o.node,c)),o.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,o.node,c)))}},{key:"animatePaths",value:function(o,c){var _=c.endAngle<c.startAngle?this.fullAngle+c.endAngle-c.startAngle:c.endAngle-c.startAngle,b=_,x=c.startAngle,A=c.startAngle;void 0!==c.prevStartAngle&&void 0!==c.prevEndAngle&&(x=c.prevEndAngle,b=c.prevEndAngle<c.prevStartAngle?this.fullAngle+c.prevEndAngle-c.prevStartAngle:c.prevEndAngle-c.prevStartAngle),c.i===this.w.config.series.length-1&&(_+A>this.fullAngle?c.endAngle=c.endAngle-(_+A):_+A<this.fullAngle&&(c.endAngle=c.endAngle+(this.fullAngle-(_+A)))),_===this.fullAngle&&(_=this.fullAngle-.01),this.animateArc(o,x,A,_,b,c)}},{key:"animateArc",value:function(o,c,h,_,b,x){var A,I=this,F=this.w,U=new ii(this.ctx),$=x.size;(isNaN(c)||isNaN(b))&&(c=h,b=_,x.dur=0);var q=_,ie=h,ue=c<h?this.fullAngle+c-h:c-h;F.globals.dataChanged&&x.shouldSetPrevPaths&&x.prevEndAngle&&(A=I.getPiePath({me:I,startAngle:x.prevStartAngle,angle:x.prevEndAngle<x.prevStartAngle?this.fullAngle+x.prevEndAngle-x.prevStartAngle:x.prevEndAngle-x.prevStartAngle,size:$}),o.attr({d:A})),0!==x.dur?o.animate(x.dur,F.globals.easing,x.animBeginArr[x.i]).afterAll(function(){"pie"!==I.chartType&&"donut"!==I.chartType&&"polarArea"!==I.chartType||this.animate(F.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":I.strokeWidth}),x.i===F.config.series.length-1&&U.animationCompleted(o)}).during(function(ge){q=ue+(_-ue)*ge,x.animateStartingPos&&(q=b+(_-b)*ge,ie=c-b+(h-(c-b))*ge),A=I.getPiePath({me:I,startAngle:ie,angle:q,size:$}),o.node.setAttribute("data:pathOrig",A),o.attr({d:A})}):(A=I.getPiePath({me:I,startAngle:ie,angle:_,size:$}),x.isTrack||(F.globals.animationEnded=!0),o.node.setAttribute("data:pathOrig",A),o.attr({d:A,"stroke-width":I.strokeWidth}))}},{key:"pieClicked",value:function(o){var c,h=this.w,_=this,b=_.sliceSizes[o]+(h.config.plotOptions.pie.expandOnClick?4:0),x=h.globals.dom.Paper.select(".apexcharts-".concat(_.chartType.toLowerCase(),"-slice-").concat(o)).members[0];if("true"!==x.attr("data:pieClicked")){var A=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(A,function($){$.setAttribute("data:pieClicked","false");var q=$.getAttribute("data:pathOrig");q&&$.setAttribute("d",q)}),x.attr("data:pieClicked","true");var I=parseInt(x.attr("data:startAngle"),10),F=parseInt(x.attr("data:angle"),10);c=_.getPiePath({me:_,startAngle:I,angle:F,size:b}),360!==F&&x.plot(c)}else{x.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(x.node,this.donutDataLabels);var U=x.attr("data:pathOrig");x.attr({d:U})}}},{key:"getChangedPath",value:function(o,c){var h="";return this.dynamicAnim&&this.w.globals.dataChanged&&(h=this.getPiePath({me:this,startAngle:o,angle:c-o,size:this.size})),h}},{key:"getPiePath",value:function(o){var c,h=o.me,_=o.startAngle,b=o.angle,x=o.size,A=new at(this.ctx),I=_,F=Math.PI*(I-90)/180,U=b+_;Math.ceil(U)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(U=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(U)>this.fullAngle&&(U-=this.fullAngle);var $=Math.PI*(U-90)/180,q=h.centerX+x*Math.cos(F),ie=h.centerY+x*Math.sin(F),ue=h.centerX+x*Math.cos($),ge=h.centerY+x*Math.sin($),we=$e.polarToCartesian(h.centerX,h.centerY,h.donutSize,U),me=$e.polarToCartesian(h.centerX,h.centerY,h.donutSize,I),Ee=b>180?1:0,N=["M",q,ie,"A",x,x,0,Ee,1,ue,ge];return c="donut"===h.chartType?[].concat(N,["L",we.x,we.y,"A",h.donutSize,h.donutSize,0,Ee,0,me.x,me.y,"L",q,ie,"z"]).join(" "):"pie"===h.chartType||"polarArea"===h.chartType?[].concat(N,["L",h.centerX,h.centerY,"L",q,ie]).join(" "):[].concat(N).join(" "),A.roundPathCorners(c,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(o){var c=this.w,h=new en(this.ctx),_=new at(this.ctx),b=new Vi(this.ctx),x=_.group(),A=_.group(),I=h.niceScale(0,Math.ceil(this.maxY),0),F=I.result.reverse(),U=I.result.length;this.maxY=I.niceMax;for(var $=c.globals.radialSize,q=$/(U-1),ie=0;ie<U-1;ie++){var ue=_.drawCircle($);if(ue.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":c.config.plotOptions.polarArea.rings.strokeWidth,stroke:c.config.plotOptions.polarArea.rings.strokeColor}),c.config.yaxis[0].show){var ge=b.drawYAxisTexts(this.centerX,this.centerY-$+parseInt(c.config.yaxis[0].labels.style.fontSize,10)/2,ie,F[ie]);A.add(ge)}x.add(ue),$-=q}this.drawSpokes(o),o.add(x),o.add(A)}},{key:"renderInnerDataLabels",value:function(o,c){var h=this.w,_=new at(this.ctx),b=_.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(c.translateX?c.translateX:0,", ").concat(c.translateY?c.translateY:0,") scale(").concat(h.config.plotOptions.pie.customScale,")")}),x=o.total.show;b.node.style.opacity=c.opacity;var A,I,F=c.centerX,U=c.centerY;A=void 0===o.name.color?h.globals.colors[0]:o.name.color;var $=o.name.fontSize,q=o.name.fontFamily,ie=o.name.fontWeight;I=void 0===o.value.color?h.config.chart.foreColor:o.value.color;var ue=o.value.formatter,ge="",we="";if(x?(A=o.total.color,$=o.total.fontSize,q=o.total.fontFamily,ie=o.total.fontWeight,we=o.total.label,ge=o.total.formatter(h)):1===h.globals.series.length&&(ge=ue(h.globals.series[0],h),we=h.globals.seriesNames[0]),we&&(we=o.name.formatter(we,o.total.show,h)),o.name.show){var me=_.drawText({x:F,y:U+parseFloat(o.name.offsetY),text:we,textAnchor:"middle",foreColor:A,fontSize:$,fontWeight:ie,fontFamily:q});me.node.classList.add("apexcharts-datalabel-label"),b.add(me)}if(o.value.show){var Ee=o.name.show?parseFloat(o.value.offsetY)+16:o.value.offsetY,N=_.drawText({x:F,y:U+Ee,text:ge,textAnchor:"middle",foreColor:I,fontWeight:o.value.fontWeight,fontSize:o.value.fontSize,fontFamily:o.value.fontFamily});N.node.classList.add("apexcharts-datalabel-value"),b.add(N)}return b}},{key:"printInnerLabels",value:function(o,c,h,_){var b,x=this.w;_?b=void 0===o.name.color?x.globals.colors[parseInt(_.parentNode.getAttribute("rel"),10)-1]:o.name.color:x.globals.series.length>1&&o.total.show&&(b=o.total.color);var A=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),I=x.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");h=(0,o.value.formatter)(h,x),_||"function"!=typeof o.total.formatter||(h=o.total.formatter(x)),c=o.name.formatter(c,c===o.total.label,x),null!==A&&(A.textContent=c),null!==I&&(I.textContent=h),null!==A&&(A.style.fill=b)}},{key:"printDataLabelsInner",value:function(o,c){var h=this.w,_=o.getAttribute("data:value"),b=h.globals.seriesNames[parseInt(o.parentNode.getAttribute("rel"),10)-1];h.globals.series.length>1&&this.printInnerLabels(c,b,_,o);var x=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==x&&(x.style.opacity=1)}},{key:"drawSpokes",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=h.config.plotOptions.polarArea.spokes;if(0!==b.strokeWidth){for(var x=[],A=360/h.globals.series.length,I=0;I<h.globals.series.length;I++)x.push($e.polarToCartesian(this.centerX,this.centerY,h.globals.radialSize,h.config.plotOptions.pie.startAngle+A*I));x.forEach(function(F,U){var $=_.drawLine(F.x,F.y,c.centerX,c.centerY,Array.isArray(b.connectorColors)?b.connectorColors[U]:b.connectorColors);o.add($)})}}},{key:"revertDataLabelsInner",value:function(o,c,h){var _=this,b=this.w,x=b.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),A=!1,I=b.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),F=function(q){var ie=q.makeSliceOut,ue=q.printLabel;Array.prototype.forEach.call(I,function(ge){"true"===ge.getAttribute("data:pieClicked")&&(ie&&(A=!0),ue&&_.printDataLabelsInner(ge,c))})};if(F({makeSliceOut:!0,printLabel:!1}),c.total.show&&b.globals.series.length>1)A&&!c.total.showAlways?F({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(c,c.total.label,c.total.formatter(b));else if(F({makeSliceOut:!1,printLabel:!0}),!A)if(b.globals.selectedDataPoints.length&&b.globals.series.length>1)if(b.globals.selectedDataPoints[0].length>0){var U=b.globals.selectedDataPoints[0],$=b.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(U));this.printDataLabelsInner($,c)}else x&&b.globals.selectedDataPoints.length&&0===b.globals.selectedDataPoints[0].length&&(x.style.opacity=0);else x&&b.globals.series.length>1&&(x.style.opacity=0)}}]),le}(),di=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var c=this.w;this.graphics=new at(this.ctx),this.lineColorArr=void 0!==c.globals.stroke.colors?c.globals.stroke.colors:c.globals.colors,this.defaultSize=c.globals.svgHeight<c.globals.svgWidth?c.globals.gridHeight+1.5*c.globals.goldenPadding:c.globals.gridWidth,this.isLog=c.config.yaxis[0].logarithmic,this.coreUtils=new ri(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(c.globals.maxY,0):c.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):c.globals.minY,this.polygons=c.config.plotOptions.radar.polygons,this.strokeWidth=c.config.stroke.show?c.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-c.config.chart.dropShadow.blur,c.config.xaxis.labels.show&&(this.size=this.size-c.globals.xAxisLabelsWidth/1.75),void 0!==c.config.plotOptions.radar.size&&(this.size=c.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Ae(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new Yi(this.ctx),b=[],x=new Nn(this.ctx);o.length&&(this.dataPointsLen=o[h.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var U=h.globals.gridHeight/2+h.config.plotOptions.radar.offsetY,$=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(h.globals.gridWidth/2+h.config.plotOptions.radar.offsetX||0,", ").concat(U||0,")")}),q=[],ie=null,ue=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),o.forEach(function(we,me){var Ee=we.length===h.globals.dataPoints,N=c.graphics.group().attr({class:"apexcharts-series","data:longestSeries":Ee,seriesName:$e.escapeString(h.globals.seriesNames[me]),rel:me+1,"data:realIndex":me});c.dataRadiusOfPercent[me]=[],c.dataRadius[me]=[],c.angleArr[me]=[],we.forEach(function(Mi,dn){var wn=Math.abs(c.maxValue-c.minValue);Mi+=Math.abs(c.minValue),c.isLog&&(Mi=c.coreUtils.getLogVal(Mi,0)),c.dataRadiusOfPercent[me][dn]=Mi/wn,c.dataRadius[me][dn]=c.dataRadiusOfPercent[me][dn]*c.size,c.angleArr[me][dn]=dn*c.disAngle}),q=c.getDataPointsPos(c.dataRadius[me],c.angleArr[me]);var Q=c.createPaths(q,{x:0,y:0});ie=c.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),ue=c.graphics.group({class:"apexcharts-datalabels","data:realIndex":me}),h.globals.delayedElements.push({el:ie.node,index:me});var pe={i:me,realIndex:me,animationDelay:me,initialSpeed:h.config.chart.animations.speed,dataChangeSpeed:h.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:h.globals.stroke.colors[me],strokeLineCap:h.config.stroke.lineCap},xe=null;h.globals.previousPaths.length>0&&(xe=c.getPreviousPath(me));for(var Le=0;Le<Q.linePathsTo.length;Le++){var qe=c.graphics.renderPaths(ze(ze({},pe),{},{pathFrom:null===xe?Q.linePathsFrom[Le]:xe,pathTo:Q.linePathsTo[Le],strokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[me]:c.strokeWidth,fill:"none",drawShadow:!1}));N.add(qe);var kt=_.fillPath({seriesNumber:me}),Dt=c.graphics.renderPaths(ze(ze({},pe),{},{pathFrom:null===xe?Q.areaPathsFrom[Le]:xe,pathTo:Q.areaPathsTo[Le],strokeWidth:0,fill:kt,drawShadow:!1}));h.config.chart.dropShadow.enabled&&new oi(c.ctx).dropShadow(Dt,Object.assign({},h.config.chart.dropShadow,{noUserSpaceOnUse:!0}),me),N.add(Dt)}we.forEach(function(Mi,dn){var wn=new on(c.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:me,dataPointIndex:dn}),Fn=c.graphics.drawMarker(q[dn].x,q[dn].y,wn);Fn.attr("rel",dn),Fn.attr("j",dn),Fn.attr("index",me),Fn.node.setAttribute("default-marker-size",wn.pSize);var Qn=c.graphics.group({class:"apexcharts-series-markers"});Qn&&Qn.add(Fn),ie.add(Qn),N.add(ie);var lr=h.config.dataLabels;if(lr.enabled){var cr=lr.formatter(h.globals.series[me][dn],{seriesIndex:me,dataPointIndex:dn,w:h});x.plotDataLabelsText({x:q[dn].x,y:q[dn].y,text:cr,textAnchor:"middle",i:me,j:me,parent:ue,offsetCorrection:!1,dataLabelsConfig:ze({},lr)})}N.add(ue)}),b.push(N)}),this.drawPolygons({parent:$}),h.config.xaxis.labels.show){var ge=this.drawXAxisTexts();$.add(ge)}return b.forEach(function(we){$.add(we)}),$.add(this.yaxisLabels),$}},{key:"drawPolygons",value:function(o){for(var c=this,h=this.w,_=o.parent,b=new Vi(this.ctx),x=h.globals.yAxisScale[0].result.reverse(),A=x.length,I=[],F=this.size/(A-1),U=0;U<A;U++)I[U]=F*U;I.reverse();var $=[],q=[];I.forEach(function(ie,ue){var ge=$e.getPolygonPos(ie,c.dataPointsLen),we="";ge.forEach(function(me,Ee){if(0===ue){var N=c.graphics.drawLine(me.x,me.y,0,0,Array.isArray(c.polygons.connectorColors)?c.polygons.connectorColors[Ee]:c.polygons.connectorColors);q.push(N)}0===Ee&&c.yaxisLabelsTextsPos.push({x:me.x,y:me.y}),we+=me.x+","+me.y+" "}),$.push(we)}),$.forEach(function(ie,ue){var ge=c.polygons.strokeColors,we=c.polygons.strokeWidth,me=c.graphics.drawPolygon(ie,Array.isArray(ge)?ge[ue]:ge,Array.isArray(we)?we[ue]:we,h.globals.radarPolygons.fill.colors[ue]);_.add(me)}),q.forEach(function(ie){_.add(ie)}),h.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ie,ue){var ge=b.drawYAxisTexts(ie.x,ie.y,ue,x[ue]);c.yaxisLabels.add(ge)})}},{key:"drawXAxisTexts",value:function(){var o=this,c=this.w,h=c.config.xaxis.labels,_=this.graphics.group({class:"apexcharts-xaxis"}),b=$e.getPolygonPos(this.size,this.dataPointsLen);return c.globals.labels.forEach(function(x,A){var I=c.config.xaxis.labels.formatter,F=new Nn(o.ctx);if(b[A]){var U=o.getTextPos(b[A],o.size),$=I(x,{seriesIndex:-1,dataPointIndex:A,w:c});F.plotDataLabelsText({x:U.newX,y:U.newY,text:$,textAnchor:U.textAnchor,i:A,j:A,parent:_,color:Array.isArray(h.style.colors)&&h.style.colors[A]?h.style.colors[A]:"#a8a8a8",dataLabelsConfig:ze({textAnchor:U.textAnchor,dropShadow:{enabled:!1}},h),offsetCorrection:!1})}}),_}},{key:"createPaths",value:function(o,c){var h=this,_=[],b=[],x=[],A=[];if(o.length){b=[this.graphics.move(c.x,c.y)],A=[this.graphics.move(c.x,c.y)];var I=this.graphics.move(o[0].x,o[0].y),F=this.graphics.move(o[0].x,o[0].y);o.forEach(function(U,$){I+=h.graphics.line(U.x,U.y),F+=h.graphics.line(U.x,U.y),$===o.length-1&&(I+="Z",F+="Z")}),_.push(I),x.push(F)}return{linePathsFrom:b,linePathsTo:_,areaPathsFrom:A,areaPathsTo:x}}},{key:"getTextPos",value:function(o,c){var h="middle",_=o.x,b=o.y;return Math.abs(o.x)>=10?o.x>0?(h="start",_+=10):o.x<0&&(h="end",_-=10):h="middle",Math.abs(o.y)>=c-10&&(o.y<0?b-=10:o.y>0&&(b+=10)),{textAnchor:h,newX:_,newY:b}}},{key:"getPreviousPath",value:function(o){for(var c=this.w,h=null,_=0;_<c.globals.previousPaths.length;_++){var b=c.globals.previousPaths[_];b.paths.length>0&&parseInt(b.realIndex,10)===parseInt(o,10)&&void 0!==c.globals.previousPaths[_].paths[0]&&(h=c.globals.previousPaths[_].paths[0].d)}return h}},{key:"getDataPointsPos",value:function(o,c){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;o=o||[],c=c||[];for(var _=[],b=0;b<h;b++){var x={};x.x=o[b]*Math.sin(c[b]),x.y=-o[b]*Math.cos(c[b]),_.push(x)}return _}}]),le}(),un=function(le){Fe(c,$i);var o=mt(c);function c(h){var _;V(this,c),(_=o.call(this,h)).ctx=h,_.w=h.w,_.animBeginArr=[0],_.animDur=0;var b=_.w;return _.startAngle=b.config.plotOptions.radialBar.startAngle,_.endAngle=b.config.plotOptions.radialBar.endAngle,_.totalAngle=Math.abs(b.config.plotOptions.radialBar.endAngle-b.config.plotOptions.radialBar.startAngle),_.trackStartAngle=b.config.plotOptions.radialBar.track.startAngle,_.trackEndAngle=b.config.plotOptions.radialBar.track.endAngle,_.barLabels=_.w.config.plotOptions.radialBar.barLabels,_.donutDataLabels=_.w.config.plotOptions.radialBar.dataLabels,_.radialDataLabels=_.donutDataLabels,_.trackStartAngle||(_.trackStartAngle=_.startAngle),_.trackEndAngle||(_.trackEndAngle=_.endAngle),360===_.endAngle&&(_.endAngle=359.99),_.margin=parseInt(b.config.plotOptions.radialBar.track.margin,10),_.onBarLabelClick=_.onBarLabelClick.bind(nt(_)),_}return Ae(c,[{key:"draw",value:function(h){var _=this.w,b=new at(this.ctx),x=b.group({class:"apexcharts-radialbar"});if(_.globals.noData)return x;var A=b.group(),I=this.defaultSize/2,F=_.globals.gridWidth/2,U=this.defaultSize/2.05;_.config.chart.sparkline.enabled||(U=U-_.config.stroke.width-_.config.chart.dropShadow.blur);var $=_.globals.fill.colors;if(_.config.plotOptions.radialBar.track.show){var q=this.drawTracks({size:U,centerX:F,centerY:I,colorArr:$,series:h});A.add(q)}var ie=this.drawArcs({size:U,centerX:F,centerY:I,colorArr:$,series:h}),ue=360;_.config.plotOptions.radialBar.startAngle<0&&(ue=this.totalAngle);var ge=(360-ue)/360;if(_.globals.radialSize=U-U*ge,this.radialDataLabels.value.show){var we=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);_.globals.radialSize+=we*ge}return A.add(ie.g),"front"===_.config.plotOptions.radialBar.hollow.position&&(ie.g.add(ie.elHollow),ie.dataLabels&&ie.g.add(ie.dataLabels)),x.add(A),x}},{key:"drawTracks",value:function(h){var _=this.w,b=new at(this.ctx),x=b.group({class:"apexcharts-tracks"}),A=new oi(this.ctx),I=new Yi(this.ctx),F=this.getStrokeWidth(h);h.size=h.size-F/2;for(var U=0;U<h.series.length;U++){var $=b.group({class:"apexcharts-radialbar-track apexcharts-track"});x.add($),$.attr({rel:U+1}),h.size=h.size-F-this.margin;var q=_.config.plotOptions.radialBar.track,ie=I.fillPath({seriesNumber:0,size:h.size,fillColors:Array.isArray(q.background)?q.background[U]:q.background,solid:!0}),ue=this.trackStartAngle,ge=this.trackEndAngle;Math.abs(ge)+Math.abs(ue)>=360&&(ge=360-Math.abs(this.startAngle)-.1);var we=b.drawPath({d:"",stroke:ie,strokeWidth:F*parseInt(q.strokeWidth,10)/100,fill:"none",strokeOpacity:q.opacity,classes:"apexcharts-radialbar-area"});q.dropShadow.enabled&&A.dropShadow(we,q.dropShadow),$.add(we),we.attr("id","apexcharts-radialbarTrack-"+U),this.animatePaths(we,{centerX:h.centerX,centerY:h.centerY,endAngle:ge,startAngle:ue,size:h.size,i:U,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:_.globals.easing})}return x}},{key:"drawArcs",value:function(h){var _=this.w,b=new at(this.ctx),x=new Yi(this.ctx),A=new oi(this.ctx),I=b.group(),F=this.getStrokeWidth(h);h.size=h.size-F/2;var U=_.config.plotOptions.radialBar.hollow.background,$=h.size-F*h.series.length-this.margin*h.series.length-F*parseInt(_.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,q=$-_.config.plotOptions.radialBar.hollow.margin;void 0!==_.config.plotOptions.radialBar.hollow.image&&(U=this.drawHollowImage(h,I,$,U));var ie=this.drawHollow({size:q,centerX:h.centerX,centerY:h.centerY,fill:U||"transparent"});_.config.plotOptions.radialBar.hollow.dropShadow.enabled&&A.dropShadow(ie,_.config.plotOptions.radialBar.hollow.dropShadow);var ge=1;!this.radialDataLabels.total.show&&_.globals.series.length>1&&(ge=0);var we=null;this.radialDataLabels.show&&(we=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:$,centerX:h.centerX,centerY:h.centerY,opacity:ge})),"back"===_.config.plotOptions.radialBar.hollow.position&&(I.add(ie),we&&I.add(we));var me=!1;_.config.plotOptions.radialBar.inverseOrder&&(me=!0);for(var Ee=me?h.series.length-1:0;me?Ee>=0:Ee<h.series.length;me?Ee--:Ee++){var N=b.group({class:"apexcharts-series apexcharts-radial-series",seriesName:$e.escapeString(_.globals.seriesNames[Ee])});I.add(N),N.attr({rel:Ee+1,"data:realIndex":Ee}),this.ctx.series.addCollapsedClassToSeries(N,Ee),h.size=h.size-F-this.margin;var Q=x.fillPath({seriesNumber:Ee,size:h.size,value:h.series[Ee]}),pe=this.startAngle,xe=void 0,Le=$e.negToZero(h.series[Ee]>100?100:h.series[Ee])/100,qe=Math.round(this.totalAngle*Le)+this.startAngle,kt=void 0;_.globals.dataChanged&&(xe=this.startAngle,kt=Math.round(this.totalAngle*$e.negToZero(_.globals.previousPaths[Ee])/100)+xe),Math.abs(qe)+Math.abs(pe)>=360&&(qe-=.01),Math.abs(kt)+Math.abs(xe)>=360&&(kt-=.01);var Dt=qe-pe,ei=Array.isArray(_.config.stroke.dashArray)?_.config.stroke.dashArray[Ee]:_.config.stroke.dashArray,wi=b.drawPath({d:"",stroke:Q,strokeWidth:F,fill:"none",fillOpacity:_.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Ee,strokeDashArray:ei});if(at.setAttrs(wi.node,{"data:angle":Dt,"data:value":h.series[Ee]}),_.config.chart.dropShadow.enabled&&A.dropShadow(wi,_.config.chart.dropShadow,Ee),A.setSelectionFilter(wi,0,Ee),this.addListeners(wi,this.radialDataLabels),N.add(wi),wi.attr({index:0,j:Ee}),this.barLabels.enabled){var dn=$e.polarToCartesian(h.centerX,h.centerY,h.size,pe),wn=this.barLabels.formatter(_.globals.seriesNames[Ee],{seriesIndex:Ee,w:_}),Fn=["apexcharts-radialbar-label"];this.barLabels.onClick||Fn.push("apexcharts-no-click");var Qn=this.barLabels.useSeriesColors?_.globals.colors[Ee]:_.config.chart.foreColor;Qn||(Qn=_.config.chart.foreColor);var lr=dn.x-this.barLabels.margin,cr=dn.y,Pr=b.drawText({x:lr,y:cr,text:wn,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:Qn,cssClass:Fn.join(" ")});Pr.on("click",this.onBarLabelClick),Pr.attr({rel:Ee+1}),0!==pe&&Pr.attr({"transform-origin":"".concat(lr," ").concat(cr),transform:"rotate(".concat(pe," 0 0)")}),N.add(Pr)}var jr=0;!this.initialAnim||_.globals.resized||_.globals.dataChanged||(jr=_.config.chart.animations.speed),_.globals.dataChanged&&(jr=_.config.chart.animations.dynamicAnimation.speed),this.animDur=jr/(1.2*h.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(wi,{centerX:h.centerX,centerY:h.centerY,endAngle:qe,startAngle:pe,prevEndAngle:kt,prevStartAngle:xe,size:h.size,i:Ee,totalItems:2,animBeginArr:this.animBeginArr,dur:jr,shouldSetPrevPaths:!0,easing:_.globals.easing})}return{g:I,elHollow:ie,dataLabels:we}}},{key:"drawHollow",value:function(h){var _=new at(this.ctx).drawCircle(2*h.size);return _.attr({class:"apexcharts-radialbar-hollow",cx:h.centerX,cy:h.centerY,r:h.size,fill:h.fill}),_}},{key:"drawHollowImage",value:function(h,_,b,x){var A=this.w,I=new Yi(this.ctx),F=$e.randomId(),U=A.config.plotOptions.radialBar.hollow.image;if(A.config.plotOptions.radialBar.hollow.imageClipped)I.clippedImgArea({width:b,height:b,image:U,patternID:"pattern".concat(A.globals.cuid).concat(F)}),x="url(#pattern".concat(A.globals.cuid).concat(F,")");else{var $=A.config.plotOptions.radialBar.hollow.imageWidth,q=A.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===$&&void 0===q){var ie=A.globals.dom.Paper.image(U).loaded(function(ge){this.move(h.centerX-ge.width/2+A.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-ge.height/2+A.config.plotOptions.radialBar.hollow.imageOffsetY)});_.add(ie)}else{var ue=A.globals.dom.Paper.image(U).loaded(function(ge){this.move(h.centerX-$/2+A.config.plotOptions.radialBar.hollow.imageOffsetX,h.centerY-q/2+A.config.plotOptions.radialBar.hollow.imageOffsetY),this.size($,q)});_.add(ue)}}return x}},{key:"getStrokeWidth",value:function(h){return h.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(h.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(h){var _=parseInt(h.target.getAttribute("rel"),10)-1,b=this.barLabels.onClick,x=this.w;b&&b(x.globals.seriesNames[_],{w:x,seriesIndex:_})}}]),c}(),Et=function(le){Fe(c,zt);var o=mt(c);function c(){return V(this,c),o.apply(this,arguments)}return Ae(c,[{key:"draw",value:function(h,_){var b=this.w,x=new at(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=h,this.seriesRangeStart=b.globals.seriesRangeStart,this.seriesRangeEnd=b.globals.seriesRangeEnd,this.barHelpers.initVariables(h);for(var A=x.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),I=0;I<h.length;I++){var F,U,$,q,ie=void 0,ue=void 0,ge=b.globals.comboCharts?_[I]:I,we=x.group({class:"apexcharts-series",seriesName:$e.escapeString(b.globals.seriesNames[ge]),rel:I+1,"data:realIndex":ge});this.ctx.series.addCollapsedClassToSeries(we,ge),h[I].length>0&&(this.visibleI=this.visibleI+1);var me=0,Ee=0;this.yRatio.length>1&&(this.yaxisIndex=ge);var N=this.barHelpers.initialPositions();ue=N.y,q=N.zeroW,ie=N.x,Ee=N.barWidth,me=N.barHeight,F=N.xDivision,U=N.yDivision,$=N.zeroH;for(var Q=x.group({class:"apexcharts-datalabels","data:realIndex":ge}),pe=x.group({class:"apexcharts-rangebar-goals-markers"}),xe=0;xe<b.globals.dataPoints;xe++){var Le,qe=this.barHelpers.getStrokeWidth(I,xe,ge),kt=this.seriesRangeStart[I][xe],Dt=this.seriesRangeEnd[I][xe],ei=null,wi=null,Mi=null,dn={x:ie,y:ue,strokeWidth:qe,elSeries:we},wn=this.seriesLen;if(b.config.plotOptions.bar.rangeBarGroupRows&&(wn=1),void 0===b.config.series[I].data[xe])break;if(this.isHorizontal){if(Mi=ue+me*this.visibleI,b.config.series[I].data[xe].x){var Qn=this.detectOverlappingBars({i:I,j:xe,barYPosition:Mi,srty:(U-me*wn)/2,barHeight:me,yDivision:U,initPositions:N});me=Qn.barHeight,Mi=Qn.barYPosition}Ee=(ei=this.drawRangeBarPaths(ze({indexes:{i:I,j:xe,realIndex:ge},barHeight:me,barYPosition:Mi,zeroW:q,yDivision:U,y1:kt,y2:Dt},dn))).barWidth}else{if(b.globals.isXNumeric&&(ie=(b.globals.seriesX[I][xe]-b.globals.minX)/this.xRatio-Ee/2),wi=ie+Ee*this.visibleI,b.config.series[I].data[xe].x){var cr=this.detectOverlappingBars({i:I,j:xe,barXPosition:wi,srtx:(F-Ee*wn)/2,barWidth:Ee,xDivision:F,initPositions:N});Ee=cr.barWidth,wi=cr.barXPosition}me=(ei=this.drawRangeColumnPaths(ze({indexes:{i:I,j:xe,realIndex:ge},barWidth:Ee,barXPosition:wi,zeroH:$,xDivision:F},dn))).barHeight}var Pr=this.barHelpers.drawGoalLine({barXPosition:ei.barXPosition,barYPosition:Mi,goalX:ei.goalX,goalY:ei.goalY,barHeight:me,barWidth:Ee});Pr&&pe.add(Pr),ue=ei.y,ie=ei.x;var jr=this.barHelpers.getPathFillColor(h,I,xe,ge);this.renderSeries((De(Le={realIndex:ge,pathFill:jr,lineFill:b.globals.stroke.colors[ge],j:xe,i:I,x:ie,y:ue,y1:kt,y2:Dt,pathFrom:ei.pathFrom,pathTo:ei.pathTo,strokeWidth:qe,elSeries:we,series:h,barHeight:me,barWidth:Ee,barXPosition:wi,barYPosition:Mi},"barWidth",Ee),De(Le,"elDataLabelsWrap",Q),De(Le,"elGoalsMarkers",pe),De(Le,"visibleSeries",this.visibleI),De(Le,"type","rangebar"),Le))}A.add(we)}return A}},{key:"detectOverlappingBars",value:function(h){var _=h.i,b=h.j,x=h.barYPosition,A=h.barXPosition,I=h.srty,F=h.srtx,U=h.barHeight,$=h.barWidth,q=h.yDivision,ie=h.xDivision,ue=h.initPositions,ge=this.w,we=[],me=ge.config.series[_].data[b].rangeName,Ee=ge.config.series[_].data[b].x,N=Array.isArray(Ee)?Ee.join(" "):Ee,Q=ge.globals.labels.map(function(xe){return Array.isArray(xe)?xe.join(" "):xe}).indexOf(N),pe=ge.globals.seriesRange[_].findIndex(function(xe){return xe.x===N&&xe.overlaps.length>0});return this.isHorizontal?(x=ge.config.plotOptions.bar.rangeBarGroupRows?I+q*Q:I+U*this.visibleI+q*Q,pe>-1&&!ge.config.plotOptions.bar.rangeBarOverlap&&(we=ge.globals.seriesRange[_][pe].overlaps).indexOf(me)>-1&&(x=(U=ue.barHeight/we.length)*this.visibleI+q*(100-parseInt(this.barOptions.barHeight,10))/100/2+U*(this.visibleI+we.indexOf(me))+q*Q)):(Q>-1&&(A=ge.config.plotOptions.bar.rangeBarGroupRows?F+ie*Q:F+$*this.visibleI+ie*Q),pe>-1&&!ge.config.plotOptions.bar.rangeBarOverlap&&(we=ge.globals.seriesRange[_][pe].overlaps).indexOf(me)>-1&&(A=($=ue.barWidth/we.length)*this.visibleI+ie*(100-parseInt(this.barOptions.barWidth,10))/100/2+$*(this.visibleI+we.indexOf(me))+ie*Q)),{barYPosition:x,barXPosition:A,barHeight:U,barWidth:$}}},{key:"drawRangeColumnPaths",value:function(h){var _=h.indexes,b=h.x,x=h.xDivision,A=h.barWidth,I=h.barXPosition,F=h.zeroH,U=this.w,$=_.i,q=_.j,ie=this.yRatio[this.yaxisIndex],ue=_.realIndex,ge=this.getRangeValue(ue,q),we=Math.min(ge.start,ge.end),me=Math.max(ge.start,ge.end);null==this.series[$][q]?we=F:(we=F-we/ie,me=F-me/ie);var Ee=Math.abs(me-we),N=this.barHelpers.getColumnPaths({barXPosition:I,barWidth:A,y1:we,y2:me,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:_.realIndex,i:ue,j:q,w:U});if(U.globals.isXNumeric){var Q=this.getBarXForNumericXAxis({x:b,j:q,realIndex:ue,barWidth:A});b=Q.x,I=Q.barXPosition}else b+=x;return{pathTo:N.pathTo,pathFrom:N.pathFrom,barHeight:Ee,x:b,y:me,goalY:this.barHelpers.getGoalValues("y",null,F,$,q),barXPosition:I}}},{key:"drawRangeBarPaths",value:function(h){var _=h.indexes,b=h.y,I=h.yDivision,F=h.barHeight,U=h.barYPosition,$=h.zeroW,q=this.w,ie=$+h.y1/this.invertedYRatio,ue=$+h.y2/this.invertedYRatio,ge=Math.abs(ue-ie),we=this.barHelpers.getBarpaths({barYPosition:U,barHeight:F,x1:ie,x2:ue,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:_.realIndex,realIndex:_.realIndex,j:_.j,w:q});return q.globals.isXNumeric||(b+=I),{pathTo:we.pathTo,pathFrom:we.pathFrom,barWidth:ge,x:ue,goalX:this.barHelpers.getGoalValues("x",$,null,_.realIndex,_.j),y:b}}},{key:"getRangeValue",value:function(h,_){var b=this.w;return{start:b.globals.seriesRangeStart[h][_],end:b.globals.seriesRangeEnd[h][_]}}}]),c}(),St=function(){function le(o){V(this,le),this.w=o.w,this.lineCtx=o}return Ae(le,[{key:"sameValueSeriesFix",value:function(o,c){var h=this.w;if(("gradient"===h.config.fill.type||"gradient"===h.config.fill.type[o])&&new ri(this.lineCtx.ctx,h).seriesHaveSameValues(o)){var _=c[o].slice();_[_.length-1]=_[_.length-1]+1e-6,c[o]=_}return c}},{key:"calculatePoints",value:function(o){var c=o.series,_=o.x,b=o.y,x=o.i,A=o.j,I=o.prevY,F=this.w,U=[],$=[];if(0===A){var q=this.lineCtx.categoryAxisCorrection+F.config.markers.offsetX;F.globals.isXNumeric&&(q=(F.globals.seriesX[o.realIndex][0]-F.globals.minX)/this.lineCtx.xRatio+F.config.markers.offsetX),U.push(q),$.push($e.isNumber(c[x][0])?I+F.config.markers.offsetY:null),U.push(_+F.config.markers.offsetX),$.push($e.isNumber(c[x][A+1])?b+F.config.markers.offsetY:null)}else U.push(_+F.config.markers.offsetX),$.push($e.isNumber(c[x][A+1])?b+F.config.markers.offsetY:null);return{x:U,y:$}}},{key:"checkPreviousPaths",value:function(o){for(var c=o.pathFromLine,h=o.pathFromArea,_=o.realIndex,b=this.w,x=0;x<b.globals.previousPaths.length;x++){var A=b.globals.previousPaths[x];("line"===A.type||"area"===A.type)&&A.paths.length>0&&parseInt(A.realIndex,10)===parseInt(_,10)&&("line"===A.type?(this.lineCtx.appendPathFrom=!1,c=b.globals.previousPaths[x].paths[0].d):"area"===A.type&&(this.lineCtx.appendPathFrom=!1,h=b.globals.previousPaths[x].paths[0].d,b.config.stroke.show&&b.globals.previousPaths[x].paths[1]&&(c=b.globals.previousPaths[x].paths[1].d)))}return{pathFromLine:c,pathFromArea:h}}},{key:"determineFirstPrevY",value:function(o){var c,h,_=o.i,b=o.series,x=o.prevY,A=o.lineYPosition,I=this.w,F=I.config.chart.stacked&&!I.globals.comboCharts||I.config.chart.stacked&&I.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(c=this.w.config.series[_])||void 0===c?void 0:c.type));if(void 0!==(null===(h=b[_])||void 0===h?void 0:h[0]))x=(A=F&&_>0?this.lineCtx.prevSeriesY[_-1][0]:this.lineCtx.zeroY)-b[_][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?b[_][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(F&&_>0&&void 0===b[_][0])for(var U=_-1;U>=0;U--)if(null!=b[U][0]){x=A=this.lineCtx.prevSeriesY[U][0];break}return{prevY:x,lineYPosition:A}}}]),le}(),Ze=function(le){for(var o="",c=0;c<le.length;c++){var h=le[c],_=h.length;_>4?(o+="C".concat(h[0],", ").concat(h[1]),o+=", ".concat(h[2],", ").concat(h[3]),o+=", ".concat(h[4],", ").concat(h[5])):_>2&&(o+="S".concat(h[0],", ").concat(h[1]),o+=", ".concat(h[2],", ").concat(h[3]))}return o},Re=function(le){var o=function(le){for(var o,c,h,_,b=function(U){for(var $=[],q=U[0],ie=U[1],ue=$[0]=He(q,ie),ge=1,we=U.length-1;ge<we;ge++)$[ge]=.5*(ue+(ue=He(q=ie,ie=U[ge+1])));return $[ge]=ue,$}(le),x=le.length-1,A=[],I=0;I<x;I++)h=He(le[I],le[I+1]),Math.abs(h)<1e-6?b[I]=b[I+1]=0:(_=(o=b[I]/h)*o+(c=b[I+1]/h)*c)>9&&(_=3*h/Math.sqrt(_),b[I]=_*o,b[I+1]=_*c);for(var F=0;F<=x;F++)_=(le[Math.min(x,F+1)][0]-le[Math.max(0,F-1)][0])/(6*(1+b[F]*b[F])),A.push([_||0,b[F]*_||0]);return A}(le),c=le[1],h=le[0],_=[],b=o[1],x=o[0];_.push(h,[h[0]+x[0],h[1]+x[1],c[0]-b[0],c[1]-b[1],c[0],c[1]]);for(var A=2,I=o.length;A<I;A++){var F=le[A],U=o[A];_.push([F[0]-U[0],F[1]-U[1],F[0],F[1]])}return _};function He(le,o){return(o[1]-le[1])/(o[0]-le[0])}var ft=function(){function le(o,c,h){V(this,le),this.ctx=o,this.w=o.w,this.xyRatios=c,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||h,this.scatter=new Zn(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new St(this),this.markers=new on(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Ae(le,[{key:"draw",value:function(o,c,h,_){var b,x=this.w,A=new at(this.ctx),I=x.globals.comboCharts?c:x.config.chart.type,F=A.group({class:"apexcharts-".concat(I,"-series apexcharts-plot-series")}),U=new ri(this.ctx,x);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,o=U.getLogSeries(o),this.yRatio=U.getLogYRatios(this.yRatio);for(var $=[],q=0;q<o.length;q++){o=this.lineHelpers.sameValueSeriesFix(q,o);var ie=x.globals.comboCharts?h[q]:q;this._initSerieVariables(o,q,ie);var ue=[],ge=[],we=[],me=x.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,ie),x.globals.isXNumeric&&x.globals.seriesX.length>0&&(me=(x.globals.seriesX[ie][0]-x.globals.minX)/this.xRatio),we.push(me);var Ee,N=me,Q=void 0,pe=N,xe=this.zeroY,Le=this.zeroY;xe=this.lineHelpers.determineFirstPrevY({i:q,series:o,prevY:xe,lineYPosition:0}).prevY,ue.push("monotonCubic"===x.config.stroke.curve&&null===o[q][0]?null:xe),Ee=xe,"rangeArea"===I&&(Q=Le=this.lineHelpers.determineFirstPrevY({i:q,series:_,prevY:Le,lineYPosition:0}).prevY,ge.push(Le));var qe={type:I,series:o,realIndex:ie,i:q,x:me,y:1,pX:N,pY:Ee,pathsFrom:this._calculatePathsFrom({type:I,series:o,i:q,realIndex:ie,prevX:pe,prevY:xe,prevY2:Le}),linePaths:[],areaPaths:[],seriesIndex:h,lineYPosition:0,xArrj:we,yArrj:ue,y2Arrj:ge,seriesRangeEnd:_},kt=this._iterateOverDataPoints(ze(ze({},qe),{},{iterations:"rangeArea"===I?o[q].length-1:void 0,isRangeStart:!0}));if("rangeArea"===I){var Dt=this._calculatePathsFrom({series:_,i:q,realIndex:ie,prevX:pe,prevY:Le}),ei=this._iterateOverDataPoints(ze(ze({},qe),{},{series:_,pY:Q,pathsFrom:Dt,iterations:_[q].length-1,isRangeStart:!1}));kt.linePaths[0]=ei.linePath+kt.linePath,kt.pathFromLine=ei.pathFromLine+kt.pathFromLine}this._handlePaths({type:I,realIndex:ie,i:q,paths:kt}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),$.push(this.elSeries)}if(void 0!==(null===(b=x.config.series[0])||void 0===b?void 0:b.zIndex)&&$.sort(function(dn,wn){return Number(dn.node.getAttribute("zIndex"))-Number(wn.node.getAttribute("zIndex"))}),x.config.chart.stacked)for(var wi=$.length;wi>0;wi--)F.add($[wi-1]);else for(var Mi=0;Mi<$.length;Mi++)F.add($[Mi]);return F}},{key:"_initSerieVariables",value:function(o,c,h){var _=this.w,b=new at(this.ctx);this.xDivision=_.globals.gridWidth/(_.globals.dataPoints-("on"===_.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(_.config.stroke.width)?_.config.stroke.width[h]:_.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=h),this.isReversed=_.config.yaxis[this.yaxisIndex]&&_.config.yaxis[this.yaxisIndex].reversed,this.zeroY=_.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?_.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>_.globals.gridHeight||"end"===_.config.plotOptions.area.fillTo)&&(this.areaBottomY=_.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=b.group({class:"apexcharts-series",zIndex:void 0!==_.config.series[h].zIndex?_.config.series[h].zIndex:h,seriesName:$e.escapeString(_.globals.seriesNames[h])}),this.elPointsMain=b.group({class:"apexcharts-series-markers-wrap","data:realIndex":h}),this.elDataLabelsWrap=b.group({class:"apexcharts-datalabels","data:realIndex":h}),this.elSeries.attr({"data:longestSeries":o[c].length===_.globals.dataPoints,rel:c+1,"data:realIndex":h}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(o){var c,h,_,b,x=o.type,A=o.series,I=o.i,F=o.realIndex,U=o.prevX,$=o.prevY,q=o.prevY2,ie=this.w,ue=new at(this.ctx);if(null===A[I][0]){for(var ge=0;ge<A[I].length;ge++)if(null!==A[I][ge]){c=ue.move(U=this.xDivision*ge,$=this.zeroY-A[I][ge]/this.yRatio[this.yaxisIndex]),h=ue.move(U,this.areaBottomY);break}}else c=ue.move(U,$),"rangeArea"===x&&(c=ue.move(U,q)+ue.line(U,$)),h=ue.move(U,this.areaBottomY)+ue.line(U,$);if(_=ue.move(-1,this.zeroY)+ue.line(-1,this.zeroY),b=ue.move(-1,this.zeroY)+ue.line(-1,this.zeroY),ie.globals.previousPaths.length>0){var we=this.lineHelpers.checkPreviousPaths({pathFromLine:_,pathFromArea:b,realIndex:F});_=we.pathFromLine,b=we.pathFromArea}return{prevX:U,prevY:$,linePath:c,areaPath:h,pathFromLine:_,pathFromArea:b}}},{key:"_handlePaths",value:function(o){var c=o.type,h=o.realIndex,_=o.i,b=o.paths,x=this.w,A=new at(this.ctx),I=new Yi(this.ctx);this.prevSeriesY.push(b.yArrj),x.globals.seriesXvalues[h]=b.xArrj,x.globals.seriesYvalues[h]=b.yArrj;var F=x.config.forecastDataPoints;if(F.count>0&&"rangeArea"!==c){var U=x.globals.seriesXvalues[h][x.globals.seriesXvalues[h].length-F.count-1],$=A.drawRect(U,0,x.globals.gridWidth,x.globals.gridHeight,0);x.globals.dom.elForecastMask.appendChild($.node);var q=A.drawRect(0,0,U,x.globals.gridHeight,0);x.globals.dom.elNonForecastMask.appendChild(q.node)}this.pointsChart||x.globals.delayedElements.push({el:this.elPointsMain.node,index:h});var ie={i:_,realIndex:h,animationDelay:_,initialSpeed:x.config.chart.animations.speed,dataChangeSpeed:x.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(c)};if("area"===c)for(var ue=I.fillPath({seriesNumber:h}),ge=0;ge<b.areaPaths.length;ge++){var we=A.renderPaths(ze(ze({},ie),{},{pathFrom:b.pathFromArea,pathTo:b.areaPaths[ge],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:ue}));this.elSeries.add(we)}if(x.config.stroke.show&&!this.pointsChart){var me=null;if("line"===c)me=I.fillPath({seriesNumber:h,i:_});else if("solid"===x.config.stroke.fill.type)me=x.globals.stroke.colors[h];else{var Ee=x.config.fill;x.config.fill=x.config.stroke.fill,me=I.fillPath({seriesNumber:h,i:_}),x.config.fill=Ee}for(var N=0;N<b.linePaths.length;N++){var Q=me;"rangeArea"===c&&(Q=I.fillPath({seriesNumber:h}));var pe=ze(ze({},ie),{},{pathFrom:b.pathFromLine,pathTo:b.linePaths[N],stroke:me,strokeWidth:this.strokeWidth,strokeLineCap:x.config.stroke.lineCap,fill:"rangeArea"===c?Q:"none"}),xe=A.renderPaths(pe);if(this.elSeries.add(xe),xe.attr("fill-rule","evenodd"),F.count>0&&"rangeArea"!==c){var Le=A.renderPaths(pe);Le.node.setAttribute("stroke-dasharray",F.dashArray),F.strokeWidth&&Le.node.setAttribute("stroke-width",F.strokeWidth),this.elSeries.add(Le),Le.attr("clip-path","url(#forecastMask".concat(x.globals.cuid,")")),xe.attr("clip-path","url(#nonForecastMask".concat(x.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(o){var c,h=this,_=o.type,b=o.series,x=o.iterations,A=o.realIndex,I=o.i,F=o.x,U=o.y,$=o.pX,q=o.pY,ie=o.pathsFrom,ue=o.linePaths,ge=o.areaPaths,we=o.seriesIndex,me=o.lineYPosition,Ee=o.xArrj,N=o.yArrj,Q=o.y2Arrj,pe=o.isRangeStart,xe=o.seriesRangeEnd,Le=this.w,qe=new at(this.ctx),kt=this.yRatio,Dt=ie.prevY,ei=ie.linePath,wi=ie.areaPath,Mi=ie.pathFromLine,dn=ie.pathFromArea,wn=$e.isNumber(Le.globals.minYArr[A])?Le.globals.minYArr[A]:Le.globals.minY;x||(x=Le.globals.dataPoints>1?Le.globals.dataPoints-1:Le.globals.dataPoints);for(var Fn=function(Kn,ss){return ss-Kn/kt[h.yaxisIndex]+2*(h.isReversed?Kn/kt[h.yaxisIndex]:0)},Qn=U,lr=Le.config.chart.stacked&&!Le.globals.comboCharts||Le.config.chart.stacked&&Le.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(c=this.w.config.series[A])||void 0===c?void 0:c.type)),cr=0;cr<x;cr++){var Pr=null==b[I][cr+1];if(Le.globals.isXNumeric){var jr=Le.globals.seriesX[A][cr+1];void 0===Le.globals.seriesX[A][cr+1]&&(jr=Le.globals.seriesX[A][x-1]),F=(jr-Le.globals.minX)/this.xRatio}else F+=this.xDivision;me=lr&&I>0&&Le.globals.collapsedSeries.length<Le.config.series.length-1?this.prevSeriesY[function(Kn){for(var ss=Kn,$n=0;$n<Le.globals.series.length;$n++)if(Le.globals.collapsedSeriesIndices.indexOf(Kn)>-1){ss--;break}return ss>=0?ss:0}(I-1)][cr+1]:this.zeroY,Pr?U=Fn(wn,me):(U=Fn(b[I][cr+1],me),"rangeArea"===_&&(Qn=Fn(xe[I][cr+1],me))),Ee.push(F),N.push(Pr&&"smooth"===Le.config.stroke.curve?null:U),Q.push(Qn);var Wr=this.lineHelpers.calculatePoints({series:b,x:F,y:U,realIndex:A,i:I,j:cr,prevY:Dt}),Dr=this._createPaths({type:_,series:b,i:I,realIndex:A,j:cr,x:F,y:U,y2:Qn,xArrj:Ee,yArrj:N,y2Arrj:Q,pX:$,pY:q,linePath:ei,areaPath:wi,linePaths:ue,areaPaths:ge,seriesIndex:we,isRangeStart:pe});ge=Dr.areaPaths,ue=Dr.linePaths,$=Dr.pX,q=Dr.pY,wi=Dr.areaPath,ei=Dr.linePath,!this.appendPathFrom||"monotoneCubic"===Le.config.stroke.curve&&"rangeArea"===_||(Mi+=qe.line(F,this.zeroY),dn+=qe.line(F,this.zeroY)),this.handleNullDataPoints(b,Wr,I,cr,A),this._handleMarkersAndLabels({type:_,pointsPos:Wr,i:I,j:cr,realIndex:A,isRangeStart:pe})}return{yArrj:N,xArrj:Ee,pathFromArea:dn,areaPaths:ge,pathFromLine:Mi,linePaths:ue,linePath:ei,areaPath:wi}}},{key:"_handleMarkersAndLabels",value:function(o){var c=o.type,h=o.pointsPos,_=o.isRangeStart,b=o.i,x=o.j,A=o.realIndex,I=this.w,F=new Nn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,x,{realIndex:A,pointsPos:h,zRatio:this.zRatio,elParent:this.elPointsMain});else{I.globals.series[b].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var U=this.markers.plotChartMarkers(h,A,x+1);null!==U&&this.elPointsMain.add(U)}var $=F.drawDataLabel({type:c,isRangeStart:_,pos:h,i:A,j:x+1});null!==$&&this.elDataLabelsWrap.add($)}},{key:"_createPaths",value:function(o){var c=o.type,h=o.series,_=o.i,b=o.realIndex,x=o.j,A=o.x,I=o.y,F=o.xArrj,U=o.yArrj,$=o.y2,q=o.y2Arrj,ie=o.pX,ue=o.pY,ge=o.linePath,we=o.areaPath,me=o.linePaths,Ee=o.areaPaths,N=o.seriesIndex,Q=o.isRangeStart,pe=this.w,xe=new at(this.ctx),Le=pe.config.stroke.curve,qe=this.areaBottomY;if(Array.isArray(pe.config.stroke.curve)&&(Le=Array.isArray(N)?pe.config.stroke.curve[N[_]]:pe.config.stroke.curve[_]),"rangeArea"===c&&(pe.globals.hasNullValues||pe.config.forecastDataPoints.count>0)&&"monotoneCubic"===Le&&(Le="straight"),"monotoneCubic"===Le){var kt="rangeArea"===c?F.length===pe.globals.dataPoints:x===h[_].length-2,Dt=F.map(function(lr,cr){return[F[cr],U[cr]]}).filter(function(lr){return null!==lr[1]});if(kt&&Dt.length>1){var ei=Re(Dt);if(ge+=Ze(ei),null===h[_][0]?we=ge:we+=Ze(ei),"rangeArea"===c&&Q){ge+=xe.line(F[F.length-1],q[q.length-1]);var wi=F.slice().reverse(),Mi=q.slice().reverse(),dn=wi.map(function(lr,cr){return[wi[cr],Mi[cr]]}),wn=Re(dn);we=ge+=Ze(wn)}else we+=xe.line(Dt[Dt.length-1][0],qe)+xe.line(Dt[0][0],qe)+xe.move(Dt[0][0],Dt[0][1])+"z";me.push(ge),Ee.push(we)}}else if("smooth"===Le){var Fn=.35*(A-ie);pe.globals.hasNullValues?(null!==h[_][x]&&(null!==h[_][x+1]?(ge=xe.move(ie,ue)+xe.curve(ie+Fn,ue,A-Fn,I,A+1,I),we=xe.move(ie+1,ue)+xe.curve(ie+Fn,ue,A-Fn,I,A+1,I)+xe.line(A,qe)+xe.line(ie,qe)+"z"):(ge=xe.move(ie,ue),we=xe.move(ie,ue)+"z")),me.push(ge),Ee.push(we)):(ge+=xe.curve(ie+Fn,ue,A-Fn,I,A,I),we+=xe.curve(ie+Fn,ue,A-Fn,I,A,I)),ie=A,ue=I,x===h[_].length-2&&(we=we+xe.curve(ie,ue,A,I,A,qe)+xe.move(A,I)+"z","rangeArea"===c&&Q?ge=ge+xe.curve(ie,ue,A,I,A,$)+xe.move(A,$)+"z":pe.globals.hasNullValues||(me.push(ge),Ee.push(we)))}else null===h[_][x+1]&&(ge+=xe.move(A,I),we=we+xe.line(pe.globals.isXNumeric?(pe.globals.seriesX[b][x]-pe.globals.minX)/this.xRatio:A-this.xDivision,qe)+xe.move(A,I)+"z"),null===h[_][x]&&(ge+=xe.move(A,I),we+=xe.move(A,qe)),"stepline"===Le?(ge=ge+xe.line(A,null,"H")+xe.line(null,I,"V"),we=we+xe.line(A,null,"H")+xe.line(null,I,"V")):"straight"===Le&&(ge+=xe.line(A,I),we+=xe.line(A,I)),x===h[_].length-2&&(we=we+xe.line(A,qe)+xe.move(A,I)+"z","rangeArea"===c&&Q?ge=ge+xe.line(A,$)+xe.move(A,$)+"z":(me.push(ge),Ee.push(we)));return{linePaths:me,areaPaths:Ee,pX:ie,pY:ue,linePath:ge,areaPath:we}}},{key:"handleNullDataPoints",value:function(o,c,h,_,b){var x=this.w;if(null===o[h][_]&&x.config.markers.showNullDataPoints||1===o[h].length){var A=this.markers.plotChartMarkers(c,b,_+1,this.strokeWidth-x.config.markers.strokeWidth/2,!0);null!==A&&this.elPointsMain.add(A)}}}]),le}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function le(A,I,F,U){this.xoffset=A,this.yoffset=I,this.height=U,this.width=F,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function($){var q,ie=[],ue=this.xoffset,ge=this.yoffset,we=b($)/this.height,me=b($)/this.width;if(this.width>=this.height)for(q=0;q<$.length;q++)ie.push([ue,ge,ue+we,ge+$[q]/we]),ge+=$[q]/we;else for(q=0;q<$.length;q++)ie.push([ue,ge,ue+$[q]/me,ge+me]),ue+=$[q]/me;return ie},this.cutArea=function($){var q;if(this.width>=this.height){var ie=$/this.height;q=new le(this.xoffset+ie,this.yoffset,this.width-ie,this.height)}else{var ge=$/this.width;q=new le(this.xoffset,this.yoffset+ge,this.width,this.height-ge)}return q}}function o(A,I,F,U,$){return U=void 0===U?0:U,$=void 0===$?0:$,function(ie){var ue,ge,we=[];for(ue=0;ue<ie.length;ue++)for(ge=0;ge<ie[ue].length;ge++)we.push(ie[ue][ge]);return we}(c(function(ie,ue){var ge,we=[],me=ue/b(ie);for(ge=0;ge<ie.length;ge++)we[ge]=ie[ge]*me;return we}(A,I*F),[],new le(U,$,I,F),[]))}function c(A,I,F,U){var $,q,ie,ue,ge,we,me;if(0!==A.length)return $=F.shortestEdge(),ge=q=A[0],we=$,0===(ue=I).length||((me=ue.slice()).push(ge),h(ue,we)>=h(me,we))?(I.push(q),c(A.slice(1),I,F,U)):(ie=F.cutArea(b(I),U),U.push(F.getCoordinates(I)),c(A,[],ie,U)),U;U.push(F.getCoordinates(I))}function h(A,I){var F=Math.min.apply(Math,A),U=Math.max.apply(Math,A),$=b(A);return Math.max(Math.pow(I,2)*U/Math.pow($,2),Math.pow($,2)/(Math.pow(I,2)*F))}function _(A){return A&&A.constructor===Array}function b(A){var I,F=0;for(I=0;I<A.length;I++)F+=A[I];return F}function x(A){var I,F=0;if(_(A[0]))for(I=0;I<A.length;I++)F+=x(A[I]);else F=b(A);return F}return function A(I,F,U,$,q){$=void 0===$?0:$,q=void 0===q?0:q;var ie,ue,ge=[],we=[];if(_(I[0])){for(ue=0;ue<I.length;ue++)ge[ue]=x(I[ue]);for(ie=o(ge,F,U,$,q),ue=0;ue<I.length;ue++)we.push(A(I[ue],ie[ue][2]-ie[ue][0],ie[ue][3]-ie[ue][1],ie[ue][0],ie[ue][1]))}else we=o(I,F,U,$,q);return we}}();var Yt,xi,fi=function(){function le(o,c){V(this,le),this.ctx=o,this.w=o.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new pt(o),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Ae(le,[{key:"draw",value:function(o){var c=this,h=this.w,_=new at(this.ctx),b=new Yi(this.ctx),x=_.group({class:"apexcharts-treemap"});if(h.globals.noData)return x;var A=[];return o.forEach(function(I){var F=I.map(function(U){return Math.abs(U)});A.push(F)}),this.negRange=this.helpers.checkColorRange(),h.config.series.forEach(function(I,F){I.data.forEach(function(U){Array.isArray(c.labels[F])||(c.labels[F]=[]),c.labels[F].push(U.x)})}),window.TreemapSquared.generate(A,h.globals.gridWidth,h.globals.gridHeight).forEach(function(I,F){var U=_.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:$e.escapeString(h.globals.seriesNames[F]),rel:F+1,"data:realIndex":F});if(h.config.chart.dropShadow.enabled){var $=h.config.chart.dropShadow;new oi(c.ctx).dropShadow(x,$,F)}var q=_.group({class:"apexcharts-data-labels"});I.forEach(function(ie,ue){var ge=ie[0],we=ie[1],me=ie[2],Ee=ie[3],N=_.drawRect(ge,we,me-ge,Ee-we,h.config.plotOptions.treemap.borderRadius,"#fff",1,c.strokeWidth,h.config.plotOptions.treemap.useFillColorAsStroke?pe:h.globals.stroke.colors[F]);N.attr({cx:ge,cy:we,index:F,i:F,j:ue,width:me-ge,height:Ee-we});var Q=c.helpers.getShadeColor(h.config.chart.type,F,ue,c.negRange),pe=Q.color;void 0!==h.config.series[F].data[ue]&&h.config.series[F].data[ue].fillColor&&(pe=h.config.series[F].data[ue].fillColor);var xe=b.fillPath({color:pe,seriesNumber:F,dataPointIndex:ue});N.node.classList.add("apexcharts-treemap-rect"),N.attr({fill:xe}),c.helpers.addListeners(N);var Le={x:ge+(me-ge)/2,y:we+(Ee-we)/2,width:0,height:0},qe={x:ge,y:we,width:me-ge,height:Ee-we};if(h.config.chart.animations.enabled&&!h.globals.dataChanged){var kt=1;h.globals.resized||(kt=h.config.chart.animations.speed),c.animateTreemap(N,Le,qe,kt)}h.globals.dataChanged&&c.dynamicAnim.enabled&&h.globals.shouldAnimate&&(h.globals.previousPaths[F]&&h.globals.previousPaths[F][ue]&&h.globals.previousPaths[F][ue].rect&&(Le=h.globals.previousPaths[F][ue].rect),c.animateTreemap(N,Le,qe,c.dynamicAnim.speed));var ei=c.getFontSize(ie),wi=h.config.dataLabels.formatter(c.labels[F][ue],{value:h.globals.series[F][ue],seriesIndex:F,dataPointIndex:ue,w:h});"truncate"===h.config.plotOptions.treemap.dataLabels.format&&(ei=parseInt(h.config.dataLabels.style.fontSize,10),wi=c.truncateLabels(wi,ei,ge,we,me,Ee));var Mi=c.helpers.calculateDataLabels({text:wi,x:(ge+me)/2,y:(we+Ee)/2+c.strokeWidth/2+ei/3,i:F,j:ue,colorProps:Q,fontSize:ei,series:o});h.config.dataLabels.enabled&&Mi&&c.rotateToFitLabel(Mi,ei,wi,ge,we,me,Ee),U.add(N),null!==Mi&&U.add(Mi)}),U.add(q),x.add(U)}),x}},{key:"getFontSize",value:function(o){var x,c=this.w,A=function I(F){var U,$=0;if(Array.isArray(F[0]))for(U=0;U<F.length;U++)$+=I(F[U]);else for(U=0;U<F.length;U++)$+=F[U].length;return $}(this.labels)/function I(F){var U,$=0;if(Array.isArray(F[0]))for(U=0;U<F.length;U++)$+=I(F[U]);else for(U=0;U<F.length;U++)$+=1;return $}(this.labels);return x=Math.pow((o[2]-o[0])*(o[3]-o[1]),.5),Math.min(x/A,parseInt(c.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(o,c,h,_,b,x,A){var I=new at(this.ctx),F=I.getTextRects(h,c);if(F.width+this.w.config.stroke.width+5>x-_&&F.width<=A-b){var U=I.rotateAroundCenter(o.node);o.node.setAttribute("transform","rotate(-90 ".concat(U.x," ").concat(U.y,") translate(").concat(F.height/3,")"))}}},{key:"truncateLabels",value:function(o,c,h,_,b,x){var A=new at(this.ctx),I=A.getTextRects(o,c).width+this.w.config.stroke.width+5>b-h&&x-_>b-h?x-_:b-h,F=A.getTextBasedOnMaxWidth({text:o,maxWidth:I,fontSize:c});return o.length!==F.length&&I/c<5?"":F}},{key:"animateTreemap",value:function(o,c,h,_){var b=new ii(this.ctx);b.animateRect(o,{x:c.x,y:c.y,width:c.width,height:c.height},{x:h.x,y:h.y,width:h.width,height:h.height},_,function(){b.animationCompleted(o)})}}]),le}(),rt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Ae(le,[{key:"calculateTimeScaleTicks",value:function(o,c){var h=this,_=this.w;if(_.globals.allSeriesCollapsed)return _.globals.labels=[],_.globals.timescaleLabels=[],[];var b=new vi(this.ctx),x=(c-o)/864e5;this.determineInterval(x),_.globals.disableZoomIn=!1,_.globals.disableZoomOut=!1,x<.00011574074074074075?_.globals.disableZoomIn=!0:x>5e4&&(_.globals.disableZoomOut=!0);var A=b.getTimeUnitsfromTimestamp(o,c,this.utc),I=_.globals.gridWidth/x,F=I/24,U=F/60,$=U/60,q=Math.floor(24*x),ie=Math.floor(1440*x),ue=Math.floor(86400*x),ge=Math.floor(x),we=Math.floor(x/30),me=Math.floor(x/365),Ee={minMillisecond:A.minMillisecond,minSecond:A.minSecond,minMinute:A.minMinute,minHour:A.minHour,minDate:A.minDate,minMonth:A.minMonth,minYear:A.minYear},N={firstVal:Ee,currentMillisecond:Ee.minMillisecond,currentSecond:Ee.minSecond,currentMinute:Ee.minMinute,currentHour:Ee.minHour,currentMonthDate:Ee.minDate,currentDate:Ee.minDate,currentMonth:Ee.minMonth,currentYear:Ee.minYear,daysWidthOnXAxis:I,hoursWidthOnXAxis:F,minutesWidthOnXAxis:U,secondsWidthOnXAxis:$,numberOfSeconds:ue,numberOfMinutes:ie,numberOfHours:q,numberOfDays:ge,numberOfMonths:we,numberOfYears:me};switch(this.tickInterval){case"years":this.generateYearScale(N);break;case"months":case"half_year":this.generateMonthScale(N);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(N);break;case"hours":this.generateHourScale(N);break;case"minutes_fives":case"minutes":this.generateMinuteScale(N);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(N)}var Q=this.timeScaleArray.map(function(pe){var xe={position:pe.position,unit:pe.unit,year:pe.year,day:pe.day?pe.day:1,hour:pe.hour?pe.hour:0,month:pe.month+1};return"month"===pe.unit?ze(ze({},xe),{},{day:1,value:pe.value+1}):"day"===pe.unit||"hour"===pe.unit?ze(ze({},xe),{},{value:pe.value}):"minute"===pe.unit?ze(ze({},xe),{},{value:pe.value,minute:pe.value}):"second"===pe.unit?ze(ze({},xe),{},{value:pe.value,minute:pe.minute,second:pe.second}):pe});return Q.filter(function(pe){var xe=1,Le=Math.ceil(_.globals.gridWidth/120),qe=pe.value;void 0!==_.config.xaxis.tickAmount&&(Le=_.config.xaxis.tickAmount),Q.length>Le&&(xe=Math.floor(Q.length/Le));var kt=!1,Dt=!1;switch(h.tickInterval){case"years":"year"===pe.unit&&(kt=!0);break;case"half_year":xe=7,"year"===pe.unit&&(kt=!0);break;case"months":xe=1,"year"===pe.unit&&(kt=!0);break;case"months_fortnight":xe=15,"year"!==pe.unit&&"month"!==pe.unit||(kt=!0),30===qe&&(Dt=!0);break;case"months_days":xe=10,"month"===pe.unit&&(kt=!0),30===qe&&(Dt=!0);break;case"week_days":xe=8,"month"===pe.unit&&(kt=!0);break;case"days":xe=1,"month"===pe.unit&&(kt=!0);break;case"hours":"day"===pe.unit&&(kt=!0);break;case"minutes_fives":case"seconds_fives":qe%5!=0&&(Dt=!0);break;case"seconds_tens":qe%10!=0&&(Dt=!0)}if("hours"===h.tickInterval||"minutes_fives"===h.tickInterval||"seconds_tens"===h.tickInterval||"seconds_fives"===h.tickInterval){if(!Dt)return!0}else if((qe%xe==0||kt)&&!Dt)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(o,c){var h=this.w,_=this.formatDates(o),b=this.removeOverlappingTS(_);h.globals.timescaleLabels=b.slice(),new kn(this.ctx).plotCoords()}},{key:"determineInterval",value:function(o){var c=24*o,h=60*c;switch(!0){case o/365>5:this.tickInterval="years";break;case o>800:this.tickInterval="half_year";break;case o>180:this.tickInterval="months";break;case o>90:this.tickInterval="months_fortnight";break;case o>60:this.tickInterval="months_days";break;case o>30:this.tickInterval="week_days";break;case o>2:this.tickInterval="days";break;case c>2.4:this.tickInterval="hours";break;case h>15:this.tickInterval="minutes_fives";break;case h>5:this.tickInterval="minutes";break;case h>1:this.tickInterval="seconds_tens";break;case 60*h>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(o){var c=o.firstVal,h=o.currentMonth,_=o.currentYear,b=o.daysWidthOnXAxis,x=o.numberOfYears,A=c.minYear,I=0,F=new vi(this.ctx),U="year";if(c.minDate>1||c.minMonth>0){var $=F.determineRemainingDaysOfYear(c.minYear,c.minMonth,c.minDate);I=(F.determineDaysOfYear(c.minYear)-$+1)*b,this.timeScaleArray.push({position:I,value:A=c.minYear+1,unit:U,year:A,month:$e.monthMod(h+1)})}else 1===c.minDate&&0===c.minMonth&&this.timeScaleArray.push({position:I,value:A,unit:U,year:_,month:$e.monthMod(h+1)});for(var q=A,ie=I,ue=0;ue<x;ue++)q++,ie=F.determineDaysOfYear(q-1)*b+ie,this.timeScaleArray.push({position:ie,value:q,unit:U,year:q,month:1})}},{key:"generateMonthScale",value:function(o){var c=o.firstVal,h=o.currentMonthDate,_=o.currentMonth,b=o.currentYear,x=o.daysWidthOnXAxis,A=o.numberOfMonths,I=_,F=0,U=new vi(this.ctx),$="month",q=0;if(c.minDate>1){F=(U.determineDaysOfMonths(_+1,c.minYear)-h+1)*x,I=$e.monthMod(_+1);var ie=b+q,ue=$e.monthMod(I),ge=I;0===I&&($="year",ge=ie,ue=1,ie+=q+=1),this.timeScaleArray.push({position:F,value:ge,unit:$,year:ie,month:ue})}else this.timeScaleArray.push({position:F,value:I,unit:$,year:b,month:$e.monthMod(_)});for(var we=I+1,me=F,Ee=0,N=1;Ee<A;Ee++,N++){0===(we=$e.monthMod(we))?($="year",q+=1):$="month";var Q=this._getYear(b,we,q);me=U.determineDaysOfMonths(we,Q)*x+me,this.timeScaleArray.push({position:me,value:0===we?Q:we,unit:$,year:Q,month:0===we?1:we}),we++}}},{key:"generateDayScale",value:function(o){var c=o.firstVal,h=o.currentMonth,_=o.currentYear,b=o.hoursWidthOnXAxis,x=o.numberOfDays,A=new vi(this.ctx),I="day",F=c.minDate+1,U=F,$=function(N,Q,pe){return N>A.determineDaysOfMonths(Q+1,pe)&&(U=1,I="month",ie=Q+=1),Q},q=(24-c.minHour)*b,ie=F,ue=$(U,h,_);0===c.minHour&&1===c.minDate?(q=0,ie=$e.monthMod(c.minMonth),I="month",U=c.minDate):1!==c.minDate&&0===c.minHour&&0===c.minMinute&&(q=0,ie=F=c.minDate,ue=$(U=F,h,_)),this.timeScaleArray.push({position:q,value:ie,unit:I,year:this._getYear(_,ue,0),month:$e.monthMod(ue),day:U});for(var ge=q,we=0;we<x;we++){I="day",ue=$(U+=1,ue,this._getYear(_,ue,0));var me=this._getYear(_,ue,0);ge=24*b+ge;var Ee=1===U?$e.monthMod(ue):U;this.timeScaleArray.push({position:ge,value:Ee,unit:I,year:me,month:$e.monthMod(ue),day:Ee})}}},{key:"generateHourScale",value:function(o){var c=o.firstVal,h=o.currentDate,_=o.currentMonth,b=o.currentYear,x=o.minutesWidthOnXAxis,A=o.numberOfHours,I=new vi(this.ctx),F="hour",U=function(xe,Le){return xe>I.determineDaysOfMonths(Le+1,b)&&(we=1,Le+=1),{month:Le,date:we}},$=function(xe,Le){return xe>I.determineDaysOfMonths(Le+1,b)?Le+=1:Le},q=60-(c.minMinute+c.minSecond/60),ie=q*x,ue=c.minHour+1,ge=ue;60===q&&(ie=0,ge=ue=c.minHour);var we=h;ge>=24&&(ge=0,we+=1,F="day");var me=U(we,_).month;me=$(we,me),this.timeScaleArray.push({position:ie,value:ue,unit:F,day:we,hour:ge,year:b,month:$e.monthMod(me)}),ge++;for(var Ee=ie,N=0;N<A;N++){F="hour",ge>=24&&(ge=0,F="day",me=U(we+=1,me).month,me=$(we,me));var Q=this._getYear(b,me,0);this.timeScaleArray.push({position:Ee=60*x+Ee,value:0===ge?we:ge,unit:F,hour:ge,day:we,year:Q,month:$e.monthMod(me)}),ge++}}},{key:"generateMinuteScale",value:function(o){for(var F=o.minutesWidthOnXAxis,$=o.numberOfMinutes,q=o.currentMinute+1,ie=o.currentDate,ue=o.currentMonth,ge=o.currentYear,we=o.currentHour,me=(60-o.currentSecond-o.currentMillisecond/1e3)*o.secondsWidthOnXAxis,Ee=0;Ee<$;Ee++)q>=60&&(q=0,24===(we+=1)&&(we=0)),this.timeScaleArray.push({position:me,value:q,unit:"minute",hour:we,minute:q,day:ie,year:this._getYear(ge,ue,0),month:$e.monthMod(ue)}),me+=F,q++}},{key:"generateSecondScale",value:function(o){for(var F=o.secondsWidthOnXAxis,U=o.numberOfSeconds,$=o.currentSecond+1,q=o.currentMinute,ie=o.currentDate,ue=o.currentMonth,ge=o.currentYear,we=o.currentHour,me=(1e3-o.currentMillisecond)/1e3*F,Ee=0;Ee<U;Ee++)$>=60&&($=0,++q>=60&&(q=0,24==++we&&(we=0))),this.timeScaleArray.push({position:me,value:$,unit:"second",hour:we,minute:q,second:$,day:ie,year:this._getYear(ge,ue,0),month:$e.monthMod(ue)}),me+=F,$++}},{key:"createRawDateString",value:function(o,c){var h=o.year;return 0===o.month&&(o.month=1),h+="-"+("0"+o.month.toString()).slice(-2),h+="day"===o.unit?"day"===o.unit?"-"+("0"+c).slice(-2):"-01":"-"+("0"+(o.day?o.day:"1")).slice(-2),h+="hour"===o.unit?"hour"===o.unit?"T"+("0"+c).slice(-2):"T00":"T"+("0"+(o.hour?o.hour:"0")).slice(-2),h+="minute"===o.unit?":"+("0"+c).slice(-2):":"+(o.minute?("0"+o.minute).slice(-2):"00"),h+="second"===o.unit?":"+("0"+c).slice(-2):":00",this.utc&&(h+=".000Z"),h}},{key:"formatDates",value:function(o){var c=this,h=this.w;return o.map(function(_){var b=_.value.toString(),x=new vi(c.ctx),A=c.createRawDateString(_,b),I=x.getDate(x.parseDate(A));if(c.utc||(I=x.getDate(x.parseDateWithTimezone(A))),void 0===h.config.xaxis.labels.format){var F="dd MMM",U=h.config.xaxis.labels.datetimeFormatter;"year"===_.unit&&(F=U.year),"month"===_.unit&&(F=U.month),"day"===_.unit&&(F=U.day),"hour"===_.unit&&(F=U.hour),"minute"===_.unit&&(F=U.minute),"second"===_.unit&&(F=U.second),b=x.formatDate(I,F)}else b=x.formatDate(I,h.config.xaxis.labels.format);return{dateString:A,position:_.position,value:b,unit:_.unit,year:_.year,month:_.month}})}},{key:"removeOverlappingTS",value:function(o){var c,h=this,_=new at(this.ctx),b=!1;o.length>0&&o[0].value&&o.every(function(I){return I.value.length===o[0].value.length})&&(b=!0,c=_.getTextRects(o[0].value).width);var x=0;return o.map(function(I,F){if(F>0&&h.w.config.xaxis.labels.hideOverlappingLabels){var U=b?c:_.getTextRects(o[x].value).width;return I.position>o[x].position+U+10?(x=F,I):null}return I}).filter(function(I){return null!==I})}},{key:"_getYear",value:function(o,c,h){return o+Math.floor(c/12)+h}}]),le}(),yt=function(){function le(o,c){V(this,le),this.ctx=c,this.w=c.w,this.el=o}return Ae(le,[{key:"setupElements",value:function(){var o=this.w.globals,c=this.w.config,h=c.chart.type;o.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(h)>-1,o.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(h)>-1,o.isBarHorizontal=("bar"===c.chart.type||"rangeBar"===c.chart.type||"boxPlot"===c.chart.type)&&c.plotOptions.bar.horizontal,o.chartClass=".apexcharts"+o.chartID,o.dom.baseEl=this.el,o.dom.elWrap=document.createElement("div"),at.setAttrs(o.dom.elWrap,{id:o.chartClass.substring(1),class:"apexcharts-canvas "+o.chartClass.substring(1)}),this.el.appendChild(o.dom.elWrap),o.dom.Paper=new window.SVG.Doc(o.dom.elWrap),o.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(c.chart.offsetX,", ").concat(c.chart.offsetY,")")}),o.dom.Paper.node.style.background="dark"!==c.theme.mode||c.chart.background?c.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),o.dom.elLegendForeign=document.createElementNS(o.SVGNS,"foreignObject"),at.setAttrs(o.dom.elLegendForeign,{x:0,y:0,width:o.svgWidth,height:o.svgHeight}),o.dom.elLegendWrap=document.createElement("div"),o.dom.elLegendWrap.classList.add("apexcharts-legend"),o.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),o.dom.elLegendForeign.appendChild(o.dom.elLegendWrap),o.dom.Paper.node.appendChild(o.dom.elLegendForeign),o.dom.elGraphical=o.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),o.dom.elDefs=o.dom.Paper.defs(),o.dom.Paper.add(o.dom.elGraphical),o.dom.elGraphical.add(o.dom.elDefs)}},{key:"plotChartType",value:function(o,c){var h=this.w,_=h.config,b=h.globals,x={series:[],i:[]},A={series:[],i:[]},I={series:[],i:[]},F={series:[],i:[]},U={series:[],i:[]},$={series:[],i:[]},q={series:[],i:[]},ie={series:[],i:[]},ue={series:[],seriesRangeEnd:[],i:[]};b.series.map(function(Le,qe){var kt=0;void 0!==o[qe].type?("column"===o[qe].type||"bar"===o[qe].type?(b.series.length>1&&_.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),U.series.push(Le),U.i.push(qe),kt++,h.globals.columnSeries=U.series):"area"===o[qe].type?(A.series.push(Le),A.i.push(qe),kt++):"line"===o[qe].type?(x.series.push(Le),x.i.push(qe),kt++):"scatter"===o[qe].type?(I.series.push(Le),I.i.push(qe)):"bubble"===o[qe].type?(F.series.push(Le),F.i.push(qe),kt++):"candlestick"===o[qe].type?($.series.push(Le),$.i.push(qe),kt++):"boxPlot"===o[qe].type?(q.series.push(Le),q.i.push(qe),kt++):"rangeBar"===o[qe].type?(ie.series.push(Le),ie.i.push(qe),kt++):"rangeArea"===o[qe].type?(ue.series.push(b.seriesRangeStart[qe]),ue.seriesRangeEnd.push(b.seriesRangeEnd[qe]),ue.i.push(qe),kt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),kt>1&&(b.comboCharts=!0)):(x.series.push(Le),x.i.push(qe))});var ge=new ft(this.ctx,c),we=new Kt(this.ctx,c);this.ctx.pie=new $i(this.ctx);var me=new un(this.ctx);this.ctx.rangeBar=new Et(this.ctx,c);var Ee=new di(this.ctx),N=[];if(b.comboCharts){if(A.series.length>0&&N.push(ge.draw(A.series,"area",A.i)),U.series.length>0)if(h.config.chart.stacked){var Q=new qt(this.ctx,c);N.push(Q.draw(U.series,U.i))}else this.ctx.bar=new zt(this.ctx,c),N.push(this.ctx.bar.draw(U.series,U.i));if(ue.series.length>0&&N.push(ge.draw(ue.series,"rangeArea",ue.i,ue.seriesRangeEnd)),x.series.length>0&&N.push(ge.draw(x.series,"line",x.i)),$.series.length>0&&N.push(we.draw($.series,"candlestick",$.i)),q.series.length>0&&N.push(we.draw(q.series,"boxPlot",q.i)),ie.series.length>0&&N.push(this.ctx.rangeBar.draw(ie.series,ie.i)),I.series.length>0){var pe=new ft(this.ctx,c,!0);N.push(pe.draw(I.series,"scatter",I.i))}if(F.series.length>0){var xe=new ft(this.ctx,c,!0);N.push(xe.draw(F.series,"bubble",F.i))}}else switch(_.chart.type){case"line":N=ge.draw(b.series,"line");break;case"area":N=ge.draw(b.series,"area");break;case"bar":_.chart.stacked?N=new qt(this.ctx,c).draw(b.series):(this.ctx.bar=new zt(this.ctx,c),N=this.ctx.bar.draw(b.series));break;case"candlestick":N=new Kt(this.ctx,c).draw(b.series,"candlestick");break;case"boxPlot":N=new Kt(this.ctx,c).draw(b.series,_.chart.type);break;case"rangeBar":N=this.ctx.rangeBar.draw(b.series);break;case"rangeArea":N=ge.draw(b.seriesRangeStart,"rangeArea",void 0,b.seriesRangeEnd);break;case"heatmap":N=new ui(this.ctx,c).draw(b.series);break;case"treemap":N=new fi(this.ctx,c).draw(b.series);break;case"pie":case"donut":case"polarArea":N=this.ctx.pie.draw(b.series);break;case"radialBar":N=me.draw(b.series);break;case"radar":N=Ee.draw(b.series);break;default:N=ge.draw(b.series)}return N}},{key:"setSVGDimensions",value:function(){var o=this.w.globals,c=this.w.config;o.svgWidth=c.chart.width,o.svgHeight=c.chart.height;var h=$e.getDimensions(this.el),_=c.chart.width.toString().split(/[0-9]+/g).pop();"%"===_?$e.isNumber(h[0])&&(0===h[0].width&&(h=$e.getDimensions(this.el.parentNode)),o.svgWidth=h[0]*parseInt(c.chart.width,10)/100):"px"!==_&&""!==_||(o.svgWidth=parseInt(c.chart.width,10));var b=c.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==o.svgHeight&&""!==o.svgHeight)if("%"===b){var x=$e.getDimensions(this.el.parentNode);o.svgHeight=x[1]*parseInt(c.chart.height,10)/100}else o.svgHeight=parseInt(c.chart.height,10);else o.svgHeight=o.axisCharts?o.svgWidth/1.61:o.svgWidth/1.2;o.svgWidth<0&&(o.svgWidth=0),o.svgHeight<0&&(o.svgHeight=0),at.setAttrs(o.dom.Paper.node,{width:o.svgWidth,height:o.svgHeight}),"%"!==b&&(o.dom.Paper.node.parentNode.parentNode.style.minHeight=o.svgHeight+(c.chart.sparkline.enabled?0:o.axisCharts?c.chart.parentHeightOffset:0)+"px"),o.dom.elWrap.style.width=o.svgWidth+"px",o.dom.elWrap.style.height=o.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var o=this.w.globals;at.setAttrs(o.dom.elGraphical.node,{transform:"translate("+o.translateX+", "+o.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var o=this.w,c=o.globals,h=0,_=o.config.chart.sparkline.enabled?1:15;_+=o.config.grid.padding.bottom,"top"!==o.config.legend.position&&"bottom"!==o.config.legend.position||!o.config.legend.show||o.config.legend.floating||(h=new Fr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var b=o.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),x=2.05*o.globals.radialSize;if(b&&!o.config.chart.sparkline.enabled&&0!==o.config.plotOptions.radialBar.startAngle){var A=$e.getBoundingClientRect(b);x=A.bottom,x=Math.max(2.05*o.globals.radialSize,A.bottom-A.top)}var F=x+c.translateY+h+_;c.dom.elLegendForeign&&c.dom.elLegendForeign.setAttribute("height",F),o.config.chart.height&&String(o.config.chart.height).indexOf("%")>0||(c.dom.elWrap.style.height=F+"px",at.setAttrs(c.dom.Paper.node,{height:F}),c.dom.Paper.node.parentNode.parentNode.style.minHeight=F+"px")}},{key:"coreCalculations",value:function(){new _n(this.ctx).init()}},{key:"resetGlobals",value:function(){var o=this,c=function(){return o.w.config.series.map(function(b){return[]})},h=new Gn,_=this.w.globals;h.initGlobalVars(_),_.seriesXvalues=c(),_.seriesYvalues=c()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var o=null,c=this.w;if(c.globals.axisCharts){if("back"===c.config.xaxis.crosshairs.position&&new Si(this.ctx).drawXCrosshairs(),"back"===c.config.yaxis[0].crosshairs.position&&new Si(this.ctx).drawYCrosshairs(),"datetime"===c.config.xaxis.type&&void 0===c.config.xaxis.labels.formatter){this.ctx.timeScale=new rt(this.ctx);var h=[];isFinite(c.globals.minX)&&isFinite(c.globals.maxX)&&!c.globals.isBarHorizontal?h=this.ctx.timeScale.calculateTimeScaleTicks(c.globals.minX,c.globals.maxX):c.globals.isBarHorizontal&&(h=this.ctx.timeScale.calculateTimeScaleTicks(c.globals.minY,c.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(h)}o=new ri(this.ctx).getCalculatedRatios()}return o}},{key:"updateSourceChart",value:function(o){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:o.w.globals.minX,max:o.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var o=this,c=this.w;if(c.config.chart.brush.enabled&&"function"!=typeof c.config.chart.events.selection){var h=Array.isArray(c.config.chart.brush.targets)?c.config.chart.brush.targets:[c.config.chart.brush.target];h.forEach(function(_){var b=ApexCharts.getChartByID(_);b.w.globals.brushSource=o.ctx,"function"!=typeof b.w.config.chart.events.zoomed&&(b.w.config.chart.events.zoomed=function(){o.updateSourceChart(b)}),"function"!=typeof b.w.config.chart.events.scrolled&&(b.w.config.chart.events.scrolled=function(){o.updateSourceChart(b)})}),c.config.chart.events.selection=function(_,b){h.forEach(function(x){ApexCharts.getChartByID(x).ctx.updateHelpers._updateOptions({xaxis:{min:b.xaxis.min,max:b.xaxis.max}},!1,!1,!1,!1)})}}}}]),le}(),fe=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"_updateOptions",value:function(o){var c=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(A){var I=[c.ctx];b&&(I=c.ctx.getSyncedCharts()),c.ctx.w.globals.isExecCalled&&(I=[c.ctx],c.ctx.w.globals.isExecCalled=!1),I.forEach(function(F,U){var $=F.w;if($.globals.shouldAnimate=_,h||($.globals.resized=!0,$.globals.dataChanged=!0,_&&F.series.getPreviousPaths()),o&&"object"===i(o)&&(F.config=new fn(o),o=ri.extendArrayProps(F.config,o,$),F.w.globals.chartID!==c.ctx.w.globals.chartID&&delete o.series,$.config=$e.extend($.config,o),x&&($.globals.lastXAxis=o.xaxis?$e.clone(o.xaxis):[],$.globals.lastYAxis=o.yaxis?$e.clone(o.yaxis):[],$.globals.initialConfig=$e.extend({},$.config),$.globals.initialSeries=$e.clone($.config.series),o.series))){for(var q=0;q<$.globals.collapsedSeriesIndices.length;q++){var ie=$.config.series[$.globals.collapsedSeriesIndices[q]];$.globals.collapsedSeries[q].data=$.globals.axisCharts?ie.data.slice():ie}for(var ue=0;ue<$.globals.ancillaryCollapsedSeriesIndices.length;ue++){var ge=$.config.series[$.globals.ancillaryCollapsedSeriesIndices[ue]];$.globals.ancillaryCollapsedSeries[ue].data=$.globals.axisCharts?ge.data.slice():ge}F.series.emptyCollapsedSeries($.config.series)}return F.update(o).then(function(){U===I.length-1&&A(F)})})})}},{key:"_updateSeries",value:function(o,c){var h=this,_=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(b){var x,A=h.w;return A.globals.shouldAnimate=c,A.globals.dataChanged=!0,c&&h.ctx.series.getPreviousPaths(),A.globals.axisCharts?(0===(x=o.map(function(I,F){return h._extendSeries(I,F)})).length&&(x=[{data:[]}]),A.config.series=x):A.config.series=o.slice(),_&&(A.globals.initialConfig.series=$e.clone(A.config.series),A.globals.initialSeries=$e.clone(A.config.series)),h.ctx.update().then(function(){b(h.ctx)})})}},{key:"_extendSeries",value:function(o,c){var h=this.w,_=h.config.series[c];return ze(ze({},h.config.series[c]),{},{name:o.name?o.name:_?.name,color:o.color?o.color:_?.color,type:o.type?o.type:_?.type,group:o.group?o.group:_?.group,data:o.data?o.data:_?.data,zIndex:void 0!==o.zIndex?o.zIndex:c})}},{key:"toggleDataPointSelection",value:function(o,c){var h=this.w,_=null,b=".apexcharts-series[data\\:realIndex='".concat(o,"']");return h.globals.axisCharts?_=h.globals.dom.Paper.select("".concat(b," path[j='").concat(c,"'], ").concat(b," circle[j='").concat(c,"'], ").concat(b," rect[j='").concat(c,"']")).members[0]:void 0===c&&(_=h.globals.dom.Paper.select("".concat(b," path[j='").concat(o,"']")).members[0],"pie"!==h.config.chart.type&&"polarArea"!==h.config.chart.type&&"donut"!==h.config.chart.type||this.ctx.pie.pieClicked(o)),_?(new at(this.ctx).pathMouseDown(_,null),_.node?_.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(o){var c=this.w;if(["min","max"].forEach(function(_){void 0!==o.xaxis[_]&&(c.config.xaxis[_]=o.xaxis[_],c.globals.lastXAxis[_]=o.xaxis[_])}),o.xaxis.categories&&o.xaxis.categories.length&&(c.config.xaxis.categories=o.xaxis.categories),c.config.xaxis.convertedCatToNumeric){var h=new bn(o);o=h.convertCatToNumericXaxis(o,this.ctx)}return o}},{key:"forceYAxisUpdate",value:function(o){return o.chart&&o.chart.stacked&&"100%"===o.chart.stackType&&(Array.isArray(o.yaxis)?o.yaxis.forEach(function(c,h){o.yaxis[h].min=0,o.yaxis[h].max=100}):(o.yaxis.min=0,o.yaxis.max=100)),o}},{key:"revertDefaultAxisMinMax",value:function(o){var c=this,h=this.w,_=h.globals.lastXAxis,b=h.globals.lastYAxis;o&&o.xaxis&&(_=o.xaxis),o&&o.yaxis&&(b=o.yaxis),h.config.xaxis.min=_.min,h.config.xaxis.max=_.max,h.config.yaxis.map(function(A,I){h.globals.zoomed||void 0!==b[I]?function(A){void 0!==b[A]&&(h.config.yaxis[A].min=b[A].min,h.config.yaxis[A].max=b[A].max)}(I):void 0!==c.ctx.opts.yaxis[I]&&(A.min=c.ctx.opts.yaxis[I].min,A.max=c.ctx.opts.yaxis[I].max)})}}]),le}();Yt=typeof window<"u"?window:void 0,xi=function(le,o){var c=(void 0!==this?this:le).SVG=function(N){if(c.supported)return N=new c.Doc(N),c.parser.draw||c.prepare(),N};if(c.ns="http://www.w3.org/2000/svg",c.xmlns="http://www.w3.org/2000/xmlns/",c.xlink="http://www.w3.org/1999/xlink",c.svgjs="http://svgjs.dev",c.supported=!0,!c.supported)return!1;c.did=1e3,c.eid=function(N){return"Svgjs"+U(N)+c.did++},c.create=function(N){var Q=o.createElementNS(this.ns,N);return Q.setAttribute("id",this.eid(N)),Q},c.extend=function(){var N,Q;Q=(N=[].slice.call(arguments)).pop();for(var pe=N.length-1;pe>=0;pe--)if(N[pe])for(var xe in Q)N[pe].prototype[xe]=Q[xe];c.Set&&c.Set.inherit&&c.Set.inherit()},c.invent=function(N){var Q="function"==typeof N.create?N.create:function(){this.constructor.call(this,c.create(N.create))};return N.inherit&&(Q.prototype=new N.inherit),N.extend&&c.extend(Q,N.extend),N.construct&&c.extend(N.parent||c.Container,N.construct),Q},c.adopt=function(N){return N?N.instance?N.instance:((Q="svg"==N.nodeName?N.parentNode instanceof le.SVGElement?new c.Nested:new c.Doc:"linearGradient"==N.nodeName?new c.Gradient("linear"):"radialGradient"==N.nodeName?new c.Gradient("radial"):c[U(N.nodeName)]?new(c[U(N.nodeName)]):new c.Element(N)).type=N.nodeName,Q.node=N,N.instance=Q,Q instanceof c.Doc&&Q.namespace().defs(),Q.setData(JSON.parse(N.getAttribute("svgjs:data"))||{}),Q):null;var Q},c.prepare=function(){var N=o.getElementsByTagName("body")[0],Q=(N?new c.Doc(N):c.adopt(o.documentElement).nested()).size(2,0);c.parser={body:N||o.documentElement,draw:Q.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:Q.polyline().node,path:Q.path().node,native:c.create("svg")}},c.parser={native:c.create("svg")},o.addEventListener("DOMContentLoaded",function(){c.parser.draw||c.prepare()},!1),c.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},c.utils={map:function(N,Q){for(var pe=N.length,xe=[],Le=0;Le<pe;Le++)xe.push(Q(N[Le]));return xe},filter:function(N,Q){for(var pe=N.length,xe=[],Le=0;Le<pe;Le++)Q(N[Le])&&xe.push(N[Le]);return xe},filterSVGElements:function(N){return this.filter(N,function(Q){return Q instanceof le.SVGElement})}},c.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},c.Color=function(N){var Q,pe;this.r=0,this.g=0,this.b=0,N&&("string"==typeof N?c.regex.isRgb.test(N)?(Q=c.regex.rgb.exec(N.replace(c.regex.whitespace,"")),this.r=parseInt(Q[1]),this.g=parseInt(Q[2]),this.b=parseInt(Q[3])):c.regex.isHex.test(N)&&(Q=c.regex.hex.exec(4==(pe=N).length?["#",pe.substring(1,2),pe.substring(1,2),pe.substring(2,3),pe.substring(2,3),pe.substring(3,4),pe.substring(3,4)].join(""):pe),this.r=parseInt(Q[1],16),this.g=parseInt(Q[2],16),this.b=parseInt(Q[3],16)):"object"===i(N)&&(this.r=N.r,this.g=N.g,this.b=N.b))},c.extend(c.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+$(this.r)+$(this.g)+$(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(N){return this.destination=new c.Color(N),this},at:function(N){return this.destination?new c.Color({r:~~(this.r+(this.destination.r-this.r)*(N=N<0?0:N>1?1:N)),g:~~(this.g+(this.destination.g-this.g)*N),b:~~(this.b+(this.destination.b-this.b)*N)}):this}}),c.Color.test=function(N){return c.regex.isHex.test(N+="")||c.regex.isRgb.test(N)},c.Color.isRgb=function(N){return N&&"number"==typeof N.r&&"number"==typeof N.g&&"number"==typeof N.b},c.Color.isColor=function(N){return c.Color.isRgb(N)||c.Color.test(N)},c.Array=function(N,Q){0==(N=(N||[]).valueOf()).length&&Q&&(N=Q.valueOf()),this.value=this.parse(N)},c.extend(c.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(N){return N=N.valueOf(),Array.isArray(N)?N:this.split(N)}}),c.PointArray=function(N,Q){c.Array.call(this,N,Q||[[0,0]])},c.PointArray.prototype=new c.Array,c.PointArray.prototype.constructor=c.PointArray;for(var h={M:function(N,Q,pe){return Q.x=pe.x=N[0],Q.y=pe.y=N[1],["M",Q.x,Q.y]},L:function(N,Q){return Q.x=N[0],Q.y=N[1],["L",N[0],N[1]]},H:function(N,Q){return Q.x=N[0],["H",N[0]]},V:function(N,Q){return Q.y=N[0],["V",N[0]]},C:function(N,Q){return Q.x=N[4],Q.y=N[5],["C",N[0],N[1],N[2],N[3],N[4],N[5]]},Q:function(N,Q){return Q.x=N[2],Q.y=N[3],["Q",N[0],N[1],N[2],N[3]]},S:function(N,Q){return Q.x=N[2],Q.y=N[3],["S",N[0],N[1],N[2],N[3]]},Z:function(N,Q,pe){return Q.x=pe.x,Q.y=pe.y,["Z"]}},_="mlhvqtcsaz".split(""),b=0,x=_.length;b<x;++b)h[_[b]]=function(N){return function(Q,pe,xe){if("H"==N)Q[0]=Q[0]+pe.x;else if("V"==N)Q[0]=Q[0]+pe.y;else if("A"==N)Q[5]=Q[5]+pe.x,Q[6]=Q[6]+pe.y;else for(var Le=0,qe=Q.length;Le<qe;++Le)Q[Le]=Q[Le]+(Le%2?pe.y:pe.x);if(h&&"function"==typeof h[N])return h[N](Q,pe,xe)}}(_[b].toUpperCase());c.PathArray=function(N,Q){c.Array.call(this,N,Q||[["M",0,0]])},c.PathArray.prototype=new c.Array,c.PathArray.prototype.constructor=c.PathArray,c.extend(c.PathArray,{toString:function(){return function(N){for(var Q=0,pe=N.length,xe="";Q<pe;Q++)xe+=N[Q][0],null!=N[Q][1]&&(xe+=N[Q][1],null!=N[Q][2]&&(xe+=" ",xe+=N[Q][2],null!=N[Q][3]&&(xe+=" ",xe+=N[Q][3],xe+=" ",xe+=N[Q][4],null!=N[Q][5]&&(xe+=" ",xe+=N[Q][5],xe+=" ",xe+=N[Q][6],null!=N[Q][7]&&(xe+=" ",xe+=N[Q][7])))));return xe+" "}(this.value)},move:function(N,Q){return this.bbox(),this},at:function(N){if(!this.destination)return this;for(var Q=this.value,pe=this.destination.value,xe=[],Le=new c.PathArray,qe=0,kt=Q.length;qe<kt;qe++){xe[qe]=[Q[qe][0]];for(var Dt=1,ei=Q[qe].length;Dt<ei;Dt++)xe[qe][Dt]=Q[qe][Dt]+(pe[qe][Dt]-Q[qe][Dt])*N;"A"===xe[qe][0]&&(xe[qe][4]=+(0!=xe[qe][4]),xe[qe][5]=+(0!=xe[qe][5]))}return Le.value=xe,Le},parse:function(N){if(N instanceof c.PathArray)return N.valueOf();var Q,pe={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};N="string"==typeof N?N.replace(c.regex.numbersWithDots,I).replace(c.regex.pathLetters," $& ").replace(c.regex.hyphen,"$1 -").trim().split(c.regex.delimiter):N.reduce(function(ei,wi){return[].concat.call(ei,wi)},[]);var xe=[],Le=new c.Point,qe=new c.Point,kt=0,Dt=N.length;do{c.regex.isPathLetter.test(N[kt])?(Q=N[kt],++kt):"M"==Q?Q="L":"m"==Q&&(Q="l"),xe.push(h[Q].call(null,N.slice(kt,kt+=pe[Q.toUpperCase()]).map(parseFloat),Le,qe))}while(Dt>kt);return xe},bbox:function(){return c.parser.draw||c.prepare(),c.parser.path.setAttribute("d",this.toString()),c.parser.path.getBBox()}}),c.Number=c.invent({create:function(N,Q){this.value=0,this.unit=Q||"","number"==typeof N?this.value=isNaN(N)?0:isFinite(N)?N:N<0?-34e37:34e37:"string"==typeof N?(Q=N.match(c.regex.numberAndUnit))&&(this.value=parseFloat(Q[1]),"%"==Q[5]?this.value/=100:"s"==Q[5]&&(this.value*=1e3),this.unit=Q[5]):N instanceof c.Number&&(this.value=N.valueOf(),this.unit=N.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(N){return N=new c.Number(N),new c.Number(this+N,this.unit||N.unit)},minus:function(N){return N=new c.Number(N),new c.Number(this-N,this.unit||N.unit)},times:function(N){return N=new c.Number(N),new c.Number(this*N,this.unit||N.unit)},divide:function(N){return N=new c.Number(N),new c.Number(this/N,this.unit||N.unit)},to:function(N){var Q=new c.Number(this);return"string"==typeof N&&(Q.unit=N),Q},morph:function(N){return this.destination=new c.Number(N),N.relative&&(this.destination.value+=this.value),this},at:function(N){return this.destination?new c.Number(this.destination).minus(this).times(N).plus(this):this}}}),c.Element=c.invent({create:function(N){this._stroke=c.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=N)&&(this.type=N.nodeName,this.node.instance=this,this._stroke=N.getAttribute("stroke")||this._stroke)},extend:{x:function(N){return this.attr("x",N)},y:function(N){return this.attr("y",N)},cx:function(N){return null==N?this.x()+this.width()/2:this.x(N-this.width()/2)},cy:function(N){return null==N?this.y()+this.height()/2:this.y(N-this.height()/2)},move:function(N,Q){return this.x(N).y(Q)},center:function(N,Q){return this.cx(N).cy(Q)},width:function(N){return this.attr("width",N)},height:function(N){return this.attr("height",N)},size:function(N,Q){var pe=q(this,N,Q);return this.width(new c.Number(pe.width)).height(new c.Number(pe.height))},clone:function(N){this.writeDataToDom();var Q=ge(this.node.cloneNode(!0));return N?N.add(Q):this.after(Q),Q},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(N){return this.after(N).remove(),N},addTo:function(N){return N.put(this)},putIn:function(N){return N.add(this)},id:function(N){return this.attr("id",N)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var N=this.attr("class");return null==N?[]:N.trim().split(c.regex.delimiter)},hasClass:function(N){return-1!=this.classes().indexOf(N)},addClass:function(N){if(!this.hasClass(N)){var Q=this.classes();Q.push(N),this.attr("class",Q.join(" "))}return this},removeClass:function(N){return this.hasClass(N)&&this.attr("class",this.classes().filter(function(Q){return Q!=N}).join(" ")),this},toggleClass:function(N){return this.hasClass(N)?this.removeClass(N):this.addClass(N)},reference:function(N){return c.get(this.attr(N))},parent:function(N){var Q=this;if(!Q.node.parentNode)return null;if(Q=c.adopt(Q.node.parentNode),!N)return Q;for(;Q&&Q.node instanceof le.SVGElement;){if("string"==typeof N?Q.matches(N):Q instanceof N)return Q;if(!Q.node.parentNode||"#document"==Q.node.parentNode.nodeName)return null;Q=c.adopt(Q.node.parentNode)}},doc:function(){return this instanceof c.Doc?this:this.parent(c.Doc)},parents:function(N){var Q=[],pe=this;do{if(!(pe=pe.parent(N))||!pe.node)break;Q.push(pe)}while(pe.parent);return Q},matches:function(N){return((Q=this.node).matches||Q.matchesSelector||Q.msMatchesSelector||Q.mozMatchesSelector||Q.webkitMatchesSelector||Q.oMatchesSelector).call(Q,N);var Q},native:function(){return this.node},svg:function(N){var Q=o.createElement("svg");if(!(N&&this instanceof c.Parent))return Q.appendChild(N=o.createElement("svg")),this.writeDataToDom(),N.appendChild(this.node.cloneNode(!0)),Q.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");Q.innerHTML="<svg>"+N.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var pe=0,xe=Q.firstChild.childNodes.length;pe<xe;pe++)this.node.appendChild(Q.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(N){return this.dom=N,this},is:function(N){return this instanceof N}}}),c.easing={"-":function(N){return N},"<>":function(N){return-Math.cos(N*Math.PI)/2+.5},">":function(N){return Math.sin(N*Math.PI/2)},"<":function(N){return 1-Math.cos(N*Math.PI/2)}},c.morph=function(N){return function(Q,pe){return new c.MorphObj(Q,pe).at(N)}},c.Situation=c.invent({create:function(N){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new c.Number(N.duration).valueOf(),this.delay=new c.Number(N.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=N.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),c.FX=c.invent({create:function(N){this._target=N,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(N,Q,pe){"object"===i(N)&&(Q=N.ease,pe=N.delay,N=N.duration);var xe=new c.Situation({duration:N||1e3,delay:pe||0,ease:c.easing[Q||"-"]||Q});return this.queue(xe),this},target:function(N){return N&&N instanceof c.Element?(this._target=N,this):this._target},timeToAbsPos:function(N){return(N-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(N){return this.situation.duration/this._speed*N+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=le.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){le.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(N){return("function"==typeof N||N instanceof c.Situation)&&this.situations.push(N),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof c.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var N,Q=this.situation;if(Q.init)return this;for(var pe in Q.animations){N=this.target()[pe](),Array.isArray(N)||(N=[N]),Array.isArray(Q.animations[pe])||(Q.animations[pe]=[Q.animations[pe]]);for(var xe=N.length;xe--;)Q.animations[pe][xe]instanceof c.Number&&(N[xe]=new c.Number(N[xe])),Q.animations[pe][xe]=N[xe].morph(Q.animations[pe][xe])}for(var pe in Q.attrs)Q.attrs[pe]=new c.MorphObj(this.target().attr(pe),Q.attrs[pe]);for(var pe in Q.styles)Q.styles[pe]=new c.MorphObj(this.target().style(pe),Q.styles[pe]);return Q.initialTransformation=this.target().matrixify(),Q.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(N,Q){var pe=this.active;return this.active=!1,Q&&this.clearQueue(),N&&this.situation&&(!pe&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(N){var Q=this.last();return this.target().on("finished.fx",function pe(xe){xe.detail.situation==Q&&(N.call(this,Q),this.off("finished.fx",pe))}),this._callStart()},during:function(N){var Q=this.last(),pe=function(xe){xe.detail.situation==Q&&N.call(this,xe.detail.pos,c.morph(xe.detail.pos),xe.detail.eased,Q)};return this.target().off("during.fx",pe).on("during.fx",pe),this.after(function(){this.off("during.fx",pe)}),this._callStart()},afterAll:function(N){var Q=function pe(xe){N.call(this),this.off("allfinished.fx",pe)};return this.target().off("allfinished.fx",Q).on("allfinished.fx",Q),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(N,Q,pe){return this.last()[pe||"animations"][N]=Q,this._callStart()},step:function(N){var Q,pe,xe;N||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(Q=Math.max(this.absPos,0),pe=Math.floor(Q),!0===this.situation.loops||pe<this.situation.loops?(this.pos=Q-pe,xe=this.situation.loop,this.situation.loop=pe):(this.absPos=this.situation.loops,this.pos=1,xe=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-xe)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Le=this.situation.ease(this.pos);for(var qe in this.situation.once)qe>this.lastPos&&qe<=Le&&(this.situation.once[qe].call(this.target(),this.pos,Le),delete this.situation.once[qe]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Le,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Le,this):this},eachAt:function(){var N,Q=this,pe=this.target(),xe=this.situation;for(var Le in xe.animations)N=[].concat(xe.animations[Le]).map(function(Dt){return"string"!=typeof Dt&&Dt.at?Dt.at(xe.ease(Q.pos),Q.pos):Dt}),pe[Le].apply(pe,N);for(var Le in xe.attrs)N=[Le].concat(xe.attrs[Le]).map(function(ei){return"string"!=typeof ei&&ei.at?ei.at(xe.ease(Q.pos),Q.pos):ei}),pe.attr.apply(pe,N);for(var Le in xe.styles)N=[Le].concat(xe.styles[Le]).map(function(ei){return"string"!=typeof ei&&ei.at?ei.at(xe.ease(Q.pos),Q.pos):ei}),pe.style.apply(pe,N);if(xe.transforms.length){N=xe.initialTransformation,Le=0;for(var qe=xe.transforms.length;Le<qe;Le++){var kt=xe.transforms[Le];kt instanceof c.Matrix?N=kt.relative?N.multiply((new c.Matrix).morph(kt).at(xe.ease(this.pos))):N.morph(kt).at(xe.ease(this.pos)):(kt.relative||kt.undo(N.extract()),N=N.multiply(kt.at(xe.ease(this.pos))))}pe.matrix(N)}return this},once:function(N,Q,pe){var xe=this.last();return pe||(N=xe.ease(N)),xe.once[N]=Q,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:c.Element,construct:{animate:function(N,Q,pe){return(this.fx||(this.fx=new c.FX(this))).animate(N,Q,pe)},delay:function(N){return(this.fx||(this.fx=new c.FX(this))).delay(N)},stop:function(N,Q){return this.fx&&this.fx.stop(N,Q),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),c.MorphObj=c.invent({create:function(N,Q){return c.Color.isColor(Q)?new c.Color(N).morph(Q):c.regex.delimiter.test(N)?c.regex.pathLetters.test(N)?new c.PathArray(N).morph(Q):new c.Array(N).morph(Q):c.regex.numberAndUnit.test(Q)?new c.Number(N).morph(Q):(this.value=N,void(this.destination=Q))},extend:{at:function(N,Q){return Q<1?this.value:this.destination},valueOf:function(){return this.value}}}),c.extend(c.FX,{attr:function(N,Q,pe){if("object"===i(N))for(var xe in N)this.attr(xe,N[xe]);else this.add(N,Q,"attrs");return this},plot:function(N,Q,pe,xe){return 4==arguments.length?this.plot([N,Q,pe,xe]):this.add("plot",new(this.target().morphArray)(N))}}),c.Box=c.invent({create:function(N,Q,pe,xe){if(!("object"!==i(N)||N instanceof c.Element))return c.Box.call(this,null!=N.left?N.left:N.x,null!=N.top?N.top:N.y,N.width,N.height);var Le;4==arguments.length&&(this.x=N,this.y=Q,this.width=pe,this.height=xe),null==(Le=this).x&&(Le.x=0,Le.y=0,Le.width=0,Le.height=0),Le.w=Le.width,Le.h=Le.height,Le.x2=Le.x+Le.width,Le.y2=Le.y+Le.height,Le.cx=Le.x+Le.width/2,Le.cy=Le.y+Le.height/2}}),c.BBox=c.invent({create:function(N){if(c.Box.apply(this,[].slice.call(arguments)),N instanceof c.Element){var Q;try{if(!o.documentElement.contains){for(var pe=N.node;pe.parentNode;)pe=pe.parentNode;if(pe!=o)throw new Error("Element not in the dom")}Q=N.node.getBBox()}catch{if(N instanceof c.Shape){c.parser.draw||c.prepare();var xe=N.clone(c.parser.draw.instance).show();xe&&xe.node&&"function"==typeof xe.node.getBBox&&(Q=xe.node.getBBox()),xe&&"function"==typeof xe.remove&&xe.remove()}else Q={x:N.node.clientLeft,y:N.node.clientTop,width:N.node.clientWidth,height:N.node.clientHeight}}c.Box.call(this,Q)}},inherit:c.Box,parent:c.Element,construct:{bbox:function(){return new c.BBox(this)}}}),c.BBox.prototype.constructor=c.BBox,c.Matrix=c.invent({create:function(N){var Q=ue([1,0,0,1,0,0]);N=null===N?Q:N instanceof c.Element?N.matrixify():"string"==typeof N?ue(N.split(c.regex.delimiter).map(parseFloat)):6==arguments.length?ue([].slice.call(arguments)):Array.isArray(N)?ue(N):N&&"object"===i(N)?N:Q;for(var pe=me.length-1;pe>=0;--pe)this[me[pe]]=null!=N[me[pe]]?N[me[pe]]:Q[me[pe]]},extend:{extract:function(){var N=ie(this,0,1);ie(this,1,0);var Q=180/Math.PI*Math.atan2(N.y,N.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(Q*Math.PI/180)+this.f*Math.sin(Q*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(Q*Math.PI/180)+this.e*Math.sin(-Q*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:Q,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new c.Matrix(this)}},clone:function(){return new c.Matrix(this)},morph:function(N){return this.destination=new c.Matrix(N),this},multiply:function(N){return new c.Matrix(this.native().multiply((Q=N,Q instanceof c.Matrix||(Q=new c.Matrix(Q)),Q).native()));var Q},inverse:function(){return new c.Matrix(this.native().inverse())},translate:function(N,Q){return new c.Matrix(this.native().translate(N||0,Q||0))},native:function(){for(var N=c.parser.native.createSVGMatrix(),Q=me.length-1;Q>=0;Q--)N[me[Q]]=this[me[Q]];return N},toString:function(){return"matrix("+we(this.a)+","+we(this.b)+","+we(this.c)+","+we(this.d)+","+we(this.e)+","+we(this.f)+")"}},parent:c.Element,construct:{ctm:function(){return new c.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof c.Nested){var N=this.rect(1,1),Q=N.node.getScreenCTM();return N.remove(),new c.Matrix(Q)}return new c.Matrix(this.node.getScreenCTM())}}}),c.Point=c.invent({create:function(N,Q){var pe;pe=Array.isArray(N)?{x:N[0],y:N[1]}:"object"===i(N)?{x:N.x,y:N.y}:null!=N?{x:N,y:Q??N}:{x:0,y:0},this.x=pe.x,this.y=pe.y},extend:{clone:function(){return new c.Point(this)},morph:function(N,Q){return this.destination=new c.Point(N,Q),this}}}),c.extend(c.Element,{point:function(N,Q){return new c.Point(N,Q).transform(this.screenCTM().inverse())}}),c.extend(c.Element,{attr:function(N,Q,pe){if(null==N){for(N={},pe=(Q=this.node.attributes).length-1;pe>=0;pe--)N[Q[pe].nodeName]=c.regex.isNumber.test(Q[pe].nodeValue)?parseFloat(Q[pe].nodeValue):Q[pe].nodeValue;return N}if("object"===i(N))for(var xe in N)this.attr(xe,N[xe]);else if(null===Q)this.node.removeAttribute(N);else{if(null==Q)return null==(Q=this.node.getAttribute(N))?c.defaults.attrs[N]:c.regex.isNumber.test(Q)?parseFloat(Q):Q;"stroke-width"==N?this.attr("stroke",parseFloat(Q)>0?this._stroke:null):"stroke"==N&&(this._stroke=Q),"fill"!=N&&"stroke"!=N||(c.regex.isImage.test(Q)&&(Q=this.doc().defs().image(Q,0,0)),Q instanceof c.Image&&(Q=this.doc().defs().pattern(0,0,function(){this.add(Q)}))),"number"==typeof Q?Q=new c.Number(Q):c.Color.isColor(Q)?Q=new c.Color(Q):Array.isArray(Q)&&(Q=new c.Array(Q)),"leading"==N?this.leading&&this.leading(Q):"string"==typeof pe?this.node.setAttributeNS(pe,N,Q.toString()):this.node.setAttribute(N,Q.toString()),!this.rebuild||"font-size"!=N&&"x"!=N||this.rebuild(N,Q)}return this}}),c.extend(c.Element,{transform:function(N,Q){var pe;return"object"!==i(N)?(pe=new c.Matrix(this).extract(),"string"==typeof N?pe[N]:pe):(pe=new c.Matrix(this),Q=!!Q||!!N.relative,null!=N.a&&(pe=Q?pe.multiply(new c.Matrix(N)):new c.Matrix(N)),this.attr("transform",pe))}}),c.extend(c.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(c.regex.transforms).slice(0,-1).map(function(N){var Q=N.trim().split("(");return[Q[0],Q[1].split(c.regex.delimiter).map(function(pe){return parseFloat(pe)})]}).reduce(function(N,Q){return"matrix"==Q[0]?N.multiply(ue(Q[1])):N[Q[0]].apply(N,Q[1])},new c.Matrix)},toParent:function(N){if(this==N)return this;var Q=this.screenCTM(),pe=N.screenCTM().inverse();return this.addTo(N).untransform().transform(pe.multiply(Q)),this},toDoc:function(){return this.toParent(this.doc())}}),c.Transformation=c.invent({create:function(N,Q){if(arguments.length>1&&"boolean"!=typeof Q)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(N))for(var pe=0,xe=this.arguments.length;pe<xe;++pe)this[this.arguments[pe]]=N[pe];else if(N&&"object"===i(N))for(pe=0,xe=this.arguments.length;pe<xe;++pe)this[this.arguments[pe]]=N[this.arguments[pe]];this.inversed=!1,!0===Q&&(this.inversed=!0)}}),c.Translate=c.invent({parent:c.Matrix,inherit:c.Transformation,create:function(N,Q){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),c.extend(c.Element,{style:function(N,Q){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===i(N))for(var pe in N)this.style(pe,N[pe]);else{if(!c.regex.isCss.test(N))return this.node.style[F(N)];for(N=N.split(/\s*;\s*/).filter(function(xe){return!!xe}).map(function(xe){return xe.split(/\s*:\s*/)});Q=N.pop();)this.style(Q[0],Q[1])}else this.node.style[F(N)]=null===Q||c.regex.isBlank.test(Q)?"":Q;return this}}),c.Parent=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Element,extend:{children:function(){return c.utils.map(c.utils.filterSVGElements(this.node.childNodes),function(N){return c.adopt(N)})},add:function(N,Q){return null==Q?this.node.appendChild(N.node):N.node!=this.node.childNodes[Q]&&this.node.insertBefore(N.node,this.node.childNodes[Q]),this},put:function(N,Q){return this.add(N,Q),N},has:function(N){return this.index(N)>=0},index:function(N){return[].slice.call(this.node.childNodes).indexOf(N.node)},get:function(N){return c.adopt(this.node.childNodes[N])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(N,Q){for(var pe=this.children(),xe=0,Le=pe.length;xe<Le;xe++)pe[xe]instanceof c.Element&&N.apply(pe[xe],[xe,pe]),Q&&pe[xe]instanceof c.Container&&pe[xe].each(N,Q);return this},removeElement:function(N){return this.node.removeChild(N.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),c.extend(c.Parent,{ungroup:function(N,Q){return 0===Q||this instanceof c.Defs||this.node==c.parser.draw||(N=N||(this instanceof c.Doc?this:this.parent(c.Parent)),Q=Q||1/0,this.each(function(){return this instanceof c.Defs?this:this instanceof c.Parent?this.ungroup(N,Q-1):this.toParent(N)}),this.node.firstChild||this.remove()),this},flatten:function(N,Q){return this.ungroup(N,Q)}}),c.Container=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Parent}),c.ViewBox=c.invent({parent:c.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(N){c.Element.prototype[N]=function(Q){return c.on(this.node,N,Q),this}}),c.listeners=[],c.handlerMap=[],c.listenerId=0,c.on=function(N,Q,pe,xe,Le){var qe=pe.bind(xe||N.instance||N),kt=(c.handlerMap.indexOf(N)+1||c.handlerMap.push(N))-1,Dt=Q.split(".")[0],ei=Q.split(".")[1]||"*";c.listeners[kt]=c.listeners[kt]||{},c.listeners[kt][Dt]=c.listeners[kt][Dt]||{},c.listeners[kt][Dt][ei]=c.listeners[kt][Dt][ei]||{},pe._svgjsListenerId||(pe._svgjsListenerId=++c.listenerId),c.listeners[kt][Dt][ei][pe._svgjsListenerId]=qe,N.addEventListener(Dt,qe,Le||{passive:!1})},c.off=function(N,Q,pe){var xe=c.handlerMap.indexOf(N),Le=Q&&Q.split(".")[0],qe=Q&&Q.split(".")[1],kt="";if(-1!=xe)if(pe){if("function"==typeof pe&&(pe=pe._svgjsListenerId),!pe)return;c.listeners[xe][Le]&&c.listeners[xe][Le][qe||"*"]&&(N.removeEventListener(Le,c.listeners[xe][Le][qe||"*"][pe],!1),delete c.listeners[xe][Le][qe||"*"][pe])}else if(qe&&Le){if(c.listeners[xe][Le]&&c.listeners[xe][Le][qe]){for(var Dt in c.listeners[xe][Le][qe])c.off(N,[Le,qe].join("."),Dt);delete c.listeners[xe][Le][qe]}}else if(qe)for(var ei in c.listeners[xe])for(var kt in c.listeners[xe][ei])qe===kt&&c.off(N,[ei,qe].join("."));else if(Le){if(c.listeners[xe][Le]){for(var kt in c.listeners[xe][Le])c.off(N,[Le,kt].join("."));delete c.listeners[xe][Le]}}else{for(var ei in c.listeners[xe])c.off(N,ei);delete c.listeners[xe],delete c.handlerMap[xe]}},c.extend(c.Element,{on:function(N,Q,pe,xe){return c.on(this.node,N,Q,pe,xe),this},off:function(N,Q){return c.off(this.node,N,Q),this},fire:function(N,Q){return this.node.dispatchEvent(N instanceof le.Event?N:N=new c.CustomEvent(N,{detail:Q,cancelable:!0})),this._event=N,this},event:function(){return this._event}}),c.Defs=c.invent({create:"defs",inherit:c.Container}),c.G=c.invent({create:"g",inherit:c.Container,extend:{x:function(N){return null==N?this.transform("x"):this.transform({x:N-this.x()},!0)}},construct:{group:function(){return this.put(new c.G)}}}),c.Doc=c.invent({create:function(N){N&&("svg"==(N="string"==typeof N?o.getElementById(N):N).nodeName?this.constructor.call(this,N):(this.constructor.call(this,c.create("svg")),N.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:c.Container,extend:{namespace:function(){return this.attr({xmlns:c.ns,version:"1.1"}).attr("xmlns:xlink",c.xlink,c.xmlns).attr("xmlns:svgjs",c.svgjs,c.xmlns)},defs:function(){var N;return this._defs||(this._defs=(N=this.node.getElementsByTagName("defs")[0])?c.adopt(N):new c.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,c.parser.draw&&!c.parser.draw.parentNode&&this.node.appendChild(c.parser.draw),this},clone:function(N){this.writeDataToDom();var Q=this.node,pe=ge(Q.cloneNode(!0));return N?(N.node||N).appendChild(pe.node):Q.parentNode.insertBefore(pe.node,Q.nextSibling),pe}}}),c.extend(c.Element,{}),c.Gradient=c.invent({create:function(N){this.constructor.call(this,c.create(N+"Gradient")),this.type=N},inherit:c.Container,extend:{at:function(N,Q,pe){return this.put(new c.Stop).update(N,Q,pe)},update:function(N){return this.clear(),"function"==typeof N&&N.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(N,Q,pe){return"transform"==N&&(N="gradientTransform"),c.Container.prototype.attr.call(this,N,Q,pe)}},construct:{gradient:function(N,Q){return this.defs().gradient(N,Q)}}}),c.extend(c.Gradient,c.FX,{from:function(N,Q){return this.attr("radial"==(this._target||this).type?{fx:new c.Number(N),fy:new c.Number(Q)}:{x1:new c.Number(N),y1:new c.Number(Q)})},to:function(N,Q){return this.attr("radial"==(this._target||this).type?{cx:new c.Number(N),cy:new c.Number(Q)}:{x2:new c.Number(N),y2:new c.Number(Q)})}}),c.extend(c.Defs,{gradient:function(N,Q){return this.put(new c.Gradient(N)).update(Q)}}),c.Stop=c.invent({create:"stop",inherit:c.Element,extend:{update:function(N){return("number"==typeof N||N instanceof c.Number)&&(N={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=N.opacity&&this.attr("stop-opacity",N.opacity),null!=N.color&&this.attr("stop-color",N.color),null!=N.offset&&this.attr("offset",new c.Number(N.offset)),this}}}),c.Pattern=c.invent({create:"pattern",inherit:c.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(N){return this.clear(),"function"==typeof N&&N.call(this,this),this},toString:function(){return this.fill()},attr:function(N,Q,pe){return"transform"==N&&(N="patternTransform"),c.Container.prototype.attr.call(this,N,Q,pe)}},construct:{pattern:function(N,Q,pe){return this.defs().pattern(N,Q,pe)}}}),c.extend(c.Defs,{pattern:function(N,Q,pe){return this.put(new c.Pattern).update(pe).attr({x:0,y:0,width:N,height:Q,patternUnits:"userSpaceOnUse"})}}),c.Shape=c.invent({create:function(N){this.constructor.call(this,N)},inherit:c.Element}),c.Symbol=c.invent({create:"symbol",inherit:c.Container,construct:{symbol:function(){return this.put(new c.Symbol)}}}),c.Use=c.invent({create:"use",inherit:c.Shape,extend:{element:function(N,Q){return this.attr("href",(Q||"")+"#"+N,c.xlink)}},construct:{use:function(N,Q){return this.put(new c.Use).element(N,Q)}}}),c.Rect=c.invent({create:"rect",inherit:c.Shape,construct:{rect:function(N,Q){return this.put(new c.Rect).size(N,Q)}}}),c.Circle=c.invent({create:"circle",inherit:c.Shape,construct:{circle:function(N){return this.put(new c.Circle).rx(new c.Number(N).divide(2)).move(0,0)}}}),c.extend(c.Circle,c.FX,{rx:function(N){return this.attr("r",N)},ry:function(N){return this.rx(N)}}),c.Ellipse=c.invent({create:"ellipse",inherit:c.Shape,construct:{ellipse:function(N,Q){return this.put(new c.Ellipse).size(N,Q).move(0,0)}}}),c.extend(c.Ellipse,c.Rect,c.FX,{rx:function(N){return this.attr("rx",N)},ry:function(N){return this.attr("ry",N)}}),c.extend(c.Circle,c.Ellipse,{x:function(N){return null==N?this.cx()-this.rx():this.cx(N+this.rx())},y:function(N){return null==N?this.cy()-this.ry():this.cy(N+this.ry())},cx:function(N){return null==N?this.attr("cx"):this.attr("cx",N)},cy:function(N){return null==N?this.attr("cy"):this.attr("cy",N)},width:function(N){return null==N?2*this.rx():this.rx(new c.Number(N).divide(2))},height:function(N){return null==N?2*this.ry():this.ry(new c.Number(N).divide(2))},size:function(N,Q){var pe=q(this,N,Q);return this.rx(new c.Number(pe.width).divide(2)).ry(new c.Number(pe.height).divide(2))}}),c.Line=c.invent({create:"line",inherit:c.Shape,extend:{array:function(){return new c.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(N,Q,pe,xe){return null==N?this.array():(N=void 0!==Q?{x1:N,y1:Q,x2:pe,y2:xe}:new c.PointArray(N).toLine(),this.attr(N))},move:function(N,Q){return this.attr(this.array().move(N,Q).toLine())},size:function(N,Q){var pe=q(this,N,Q);return this.attr(this.array().size(pe.width,pe.height).toLine())}},construct:{line:function(N,Q,pe,xe){return c.Line.prototype.plot.apply(this.put(new c.Line),null!=N?[N,Q,pe,xe]:[0,0,0,0])}}}),c.Polyline=c.invent({create:"polyline",inherit:c.Shape,construct:{polyline:function(N){return this.put(new c.Polyline).plot(N||new c.PointArray)}}}),c.Polygon=c.invent({create:"polygon",inherit:c.Shape,construct:{polygon:function(N){return this.put(new c.Polygon).plot(N||new c.PointArray)}}}),c.extend(c.Polyline,c.Polygon,{array:function(){return this._array||(this._array=new c.PointArray(this.attr("points")))},plot:function(N){return null==N?this.array():this.clear().attr("points","string"==typeof N?N:this._array=new c.PointArray(N))},clear:function(){return delete this._array,this},move:function(N,Q){return this.attr("points",this.array().move(N,Q))},size:function(N,Q){var pe=q(this,N,Q);return this.attr("points",this.array().size(pe.width,pe.height))}}),c.extend(c.Line,c.Polyline,c.Polygon,{morphArray:c.PointArray,x:function(N){return null==N?this.bbox().x:this.move(N,this.bbox().y)},y:function(N){return null==N?this.bbox().y:this.move(this.bbox().x,N)},width:function(N){var Q=this.bbox();return null==N?Q.width:this.size(N,Q.height)},height:function(N){var Q=this.bbox();return null==N?Q.height:this.size(Q.width,N)}}),c.Path=c.invent({create:"path",inherit:c.Shape,extend:{morphArray:c.PathArray,array:function(){return this._array||(this._array=new c.PathArray(this.attr("d")))},plot:function(N){return null==N?this.array():this.clear().attr("d","string"==typeof N?N:this._array=new c.PathArray(N))},clear:function(){return delete this._array,this}},construct:{path:function(N){return this.put(new c.Path).plot(N||new c.PathArray)}}}),c.Image=c.invent({create:"image",inherit:c.Shape,extend:{load:function(N){if(!N)return this;var Q=this,pe=new le.Image;return c.on(pe,"load",function(){c.off(pe);var xe=Q.parent(c.Pattern);null!==xe&&(0==Q.width()&&0==Q.height()&&Q.size(pe.width,pe.height),xe&&0==xe.width()&&0==xe.height()&&xe.size(Q.width(),Q.height()),"function"==typeof Q._loaded&&Q._loaded.call(Q,{width:pe.width,height:pe.height,ratio:pe.width/pe.height,url:N}))}),c.on(pe,"error",function(xe){c.off(pe),"function"==typeof Q._error&&Q._error.call(Q,xe)}),this.attr("href",pe.src=this.src=N,c.xlink)},loaded:function(N){return this._loaded=N,this},error:function(N){return this._error=N,this}},construct:{image:function(N,Q,pe){return this.put(new c.Image).load(N).size(Q||0,pe||Q||0)}}}),c.Text=c.invent({create:function(){this.constructor.call(this,c.create("text")),this.dom.leading=new c.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",c.defaults.attrs["font-family"])},inherit:c.Shape,extend:{x:function(N){return null==N?this.attr("x"):this.attr("x",N)},text:function(N){if(void 0===N){N="";for(var Q=this.node.childNodes,pe=0,xe=Q.length;pe<xe;++pe)0!=pe&&3!=Q[pe].nodeType&&1==c.adopt(Q[pe]).dom.newLined&&(N+="\n"),N+=Q[pe].textContent;return N}if(this.clear().build(!0),"function"==typeof N)N.call(this,this);else{pe=0;for(var Le=(N=N.split("\n")).length;pe<Le;pe++)this.tspan(N[pe]).newLine()}return this.build(!1).rebuild()},size:function(N){return this.attr("font-size",N).rebuild()},leading:function(N){return null==N?this.dom.leading:(this.dom.leading=new c.Number(N),this.rebuild())},lines:function(){var N=(this.textPath&&this.textPath()||this).node,Q=c.utils.map(c.utils.filterSVGElements(N.childNodes),function(pe){return c.adopt(pe)});return new c.Set(Q)},rebuild:function(N){if("boolean"==typeof N&&(this._rebuild=N),this._rebuild){var Q=this,pe=0,xe=this.dom.leading*new c.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(Q.textPath()||this.attr("x",Q.attr("x")),"\n"==this.text()?pe+=xe:(this.attr("dy",xe+pe),pe=0))}),this.fire("rebuild")}return this},build:function(N){return this._build=!!N,this},setData:function(N){return this.dom=N,this.dom.leading=new c.Number(N.leading||1.3),this}},construct:{text:function(N){return this.put(new c.Text).text(N)},plain:function(N){return this.put(new c.Text).plain(N)}}}),c.Tspan=c.invent({create:"tspan",inherit:c.Shape,extend:{text:function(N){return null==N?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof N?N.call(this,this):this.plain(N),this)},dx:function(N){return this.attr("dx",N)},dy:function(N){return this.attr("dy",N)},newLine:function(){var N=this.parent(c.Text);return this.dom.newLined=!0,this.dy(N.dom.leading*N.attr("font-size")).attr("x",N.x())}}}),c.extend(c.Text,c.Tspan,{plain:function(N){return!1===this._build&&this.clear(),this.node.appendChild(o.createTextNode(N)),this},tspan:function(N){var Q=(this.textPath&&this.textPath()||this).node,pe=new c.Tspan;return!1===this._build&&this.clear(),Q.appendChild(pe.node),pe.text(N)},clear:function(){for(var N=(this.textPath&&this.textPath()||this).node;N.hasChildNodes();)N.removeChild(N.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),c.TextPath=c.invent({create:"textPath",inherit:c.Parent,parent:c.Text,construct:{morphArray:c.PathArray,array:function(){var N=this.track();return N?N.array():null},plot:function(N){var Q=this.track(),pe=null;return Q&&(pe=Q.plot(N)),null==N?pe:this},track:function(){var N=this.textPath();if(N)return N.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return c.adopt(this.node.firstChild)}}}),c.Nested=c.invent({create:function(){this.constructor.call(this,c.create("svg")),this.style("overflow","visible")},inherit:c.Container,construct:{nested:function(){return this.put(new c.Nested)}}});var A={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(N,Q){return"color"==Q?N:N+"-"+Q}};function I(N,Q,pe,xe){return pe+xe.replace(c.regex.dots," .")}function F(N){return N.toLowerCase().replace(/-(.)/g,function(Q,pe){return pe.toUpperCase()})}function U(N){return N.charAt(0).toUpperCase()+N.slice(1)}function $(N){var Q=N.toString(16);return 1==Q.length?"0"+Q:Q}function q(N,Q,pe){if(null==Q||null==pe){var xe=N.bbox();null==Q?Q=xe.width/xe.height*pe:null==pe&&(pe=xe.height/xe.width*Q)}return{width:Q,height:pe}}function ie(N,Q,pe){return{x:Q*N.a+pe*N.c+0,y:Q*N.b+pe*N.d+0}}function ue(N){return{a:N[0],b:N[1],c:N[2],d:N[3],e:N[4],f:N[5]}}function ge(N){for(var Q=N.childNodes.length-1;Q>=0;Q--)N.childNodes[Q]instanceof le.SVGElement&&ge(N.childNodes[Q]);return c.adopt(N).id(c.eid(N.nodeName))}function we(N){return Math.abs(N)>1e-37?N:0}["fill","stroke"].forEach(function(N){var Q={};Q[N]=function(pe){if(void 0===pe)return this;if("string"==typeof pe||c.Color.isRgb(pe)||pe&&"function"==typeof pe.fill)this.attr(N,pe);else for(var xe=A[N].length-1;xe>=0;xe--)null!=pe[A[N][xe]]&&this.attr(A.prefix(N,A[N][xe]),pe[A[N][xe]]);return this},c.extend(c.Element,c.FX,Q)}),c.extend(c.Element,c.FX,{translate:function(N,Q){return this.transform({x:N,y:Q})},matrix:function(N){return this.attr("transform",new c.Matrix(6==arguments.length?[].slice.call(arguments):N))},opacity:function(N){return this.attr("opacity",N)},dx:function(N){return this.x(new c.Number(N).plus(this instanceof c.FX?0:this.x()),!0)},dy:function(N){return this.y(new c.Number(N).plus(this instanceof c.FX?0:this.y()),!0)}}),c.extend(c.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(N){return this.node.getPointAtLength(N)}}),c.Set=c.invent({create:function(N){Array.isArray(N)?this.members=N:this.clear()},extend:{add:function(){for(var N=[].slice.call(arguments),Q=0,pe=N.length;Q<pe;Q++)this.members.push(N[Q]);return this},remove:function(N){var Q=this.index(N);return Q>-1&&this.members.splice(Q,1),this},each:function(N){for(var Q=0,pe=this.members.length;Q<pe;Q++)N.apply(this.members[Q],[Q,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(N){return this.index(N)>=0},index:function(N){return this.members.indexOf(N)},get:function(N){return this.members[N]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(N){return new c.Set(N)}}}),c.FX.Set=c.invent({create:function(N){this.set=N}}),c.Set.inherit=function(){var N=[];for(var Q in c.Shape.prototype)"function"==typeof c.Shape.prototype[Q]&&"function"!=typeof c.Set.prototype[Q]&&N.push(Q);for(var Q in N.forEach(function(xe){c.Set.prototype[xe]=function(){for(var Le=0,qe=this.members.length;Le<qe;Le++)this.members[Le]&&"function"==typeof this.members[Le][xe]&&this.members[Le][xe].apply(this.members[Le],arguments);return"animate"==xe?this.fx||(this.fx=new c.FX.Set(this)):this}}),N=[],c.FX.prototype)"function"==typeof c.FX.prototype[Q]&&"function"!=typeof c.FX.Set.prototype[Q]&&N.push(Q);N.forEach(function(pe){c.FX.Set.prototype[pe]=function(){for(var xe=0,Le=this.set.members.length;xe<Le;xe++)this.set.members[xe].fx[pe].apply(this.set.members[xe].fx,arguments);return this}})},c.extend(c.Element,{}),c.extend(c.Element,{remember:function(N,Q){if("object"===i(arguments[0]))for(var pe in N)this.remember(pe,N[pe]);else{if(1==arguments.length)return this.memory()[N];this.memory()[N]=Q}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var N=arguments.length-1;N>=0;N--)delete this.memory()[arguments[N]];return this},memory:function(){return this._memory||(this._memory={})}}),c.get=function(N){var Q=o.getElementById(function(pe){var xe=(pe||"").toString().match(c.regex.reference);if(xe)return xe[1]}(N)||N);return c.adopt(Q)},c.select=function(N,Q){return new c.Set(c.utils.map((Q||o).querySelectorAll(N),function(pe){return c.adopt(pe)}))},c.extend(c.Parent,{select:function(N){return c.select(N,this.node)}});var me="abcdef".split("");if("function"!=typeof le.CustomEvent){var Ee=function(N,Q){Q=Q||{bubbles:!1,cancelable:!1,detail:void 0};var pe=o.createEvent("CustomEvent");return pe.initCustomEvent(N,Q.bubbles,Q.cancelable,Q.detail),pe};Ee.prototype=le.Event.prototype,c.CustomEvent=Ee}else c.CustomEvent=le.CustomEvent;return c},void 0!==(k=function(){return xi(Yt,Yt.document)}.call(Gr,Rt,Gr,fo))&&(fo.exports=k),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(x,A){return this.add(x,A),!x.attr("in")&&this.autoSetIn&&x.attr("in",this.source),x.attr("result")||x.attr("result",x),x},blend:function(x,A,I){return this.put(new SVG.BlendEffect(x,A,I))},colorMatrix:function(x,A){return this.put(new SVG.ColorMatrixEffect(x,A))},convolveMatrix:function(x){return this.put(new SVG.ConvolveMatrixEffect(x))},componentTransfer:function(x){return this.put(new SVG.ComponentTransferEffect(x))},composite:function(x,A,I){return this.put(new SVG.CompositeEffect(x,A,I))},flood:function(x,A){return this.put(new SVG.FloodEffect(x,A))},offset:function(x,A){return this.put(new SVG.OffsetEffect(x,A))},image:function(x){return this.put(new SVG.ImageEffect(x))},merge:function(){var x=[void 0];for(var A in arguments)x.push(arguments[A]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,x)))},gaussianBlur:function(x,A){return this.put(new SVG.GaussianBlurEffect(x,A))},morphology:function(x,A){return this.put(new SVG.MorphologyEffect(x,A))},diffuseLighting:function(x,A,I){return this.put(new SVG.DiffuseLightingEffect(x,A,I))},displacementMap:function(x,A,I,F,U){return this.put(new SVG.DisplacementMapEffect(x,A,I,F,U))},specularLighting:function(x,A,I,F){return this.put(new SVG.SpecularLightingEffect(x,A,I,F))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(x,A,I,F,U){return this.put(new SVG.TurbulenceEffect(x,A,I,F,U))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(x){var A=this.put(new SVG.Filter);return"function"==typeof x&&x.call(A,A),A}}),SVG.extend(SVG.Container,{filter:function(x){return this.defs().filter(x)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(x){return this.filterer=x instanceof SVG.Element?x:this.doc().filter(x),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(x){return this.filterer&&!0===x&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",x)},result:function(x){return null==x?this.attr("result"):this.attr("result",x)},toString:function(){return this.result()}}});var le={blend:function(x,A){return this.parent()&&this.parent().blend(this,x,A)},colorMatrix:function(x,A){return this.parent()&&this.parent().colorMatrix(x,A).in(this)},convolveMatrix:function(x){return this.parent()&&this.parent().convolveMatrix(x).in(this)},componentTransfer:function(x){return this.parent()&&this.parent().componentTransfer(x).in(this)},composite:function(x,A){return this.parent()&&this.parent().composite(this,x,A)},flood:function(x,A){return this.parent()&&this.parent().flood(x,A)},offset:function(x,A){return this.parent()&&this.parent().offset(x,A).in(this)},image:function(x){return this.parent()&&this.parent().image(x)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(x,A){return this.parent()&&this.parent().gaussianBlur(x,A).in(this)},morphology:function(x,A){return this.parent()&&this.parent().morphology(x,A).in(this)},diffuseLighting:function(x,A,I){return this.parent()&&this.parent().diffuseLighting(x,A,I).in(this)},displacementMap:function(x,A,I,F){return this.parent()&&this.parent().displacementMap(this,x,A,I,F)},specularLighting:function(x,A,I,F){return this.parent()&&this.parent().specularLighting(x,A,I,F).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(x,A,I,F,U){return this.parent()&&this.parent().turbulence(x,A,I,F,U).in(this)}};SVG.extend(SVG.Effect,le),SVG.extend(SVG.ParentEffect,le),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(x){this.attr("in",x)}}});var o={blend:function(x,A,I){this.attr({in:x,in2:A,mode:I||"normal"})},colorMatrix:function(x,A){"matrix"==x&&(A=_(A)),this.attr({type:x,values:void 0===A?null:A})},convolveMatrix:function(x){x=_(x),this.attr({order:Math.sqrt(x.split(" ").length),kernelMatrix:x})},composite:function(x,A,I){this.attr({in:x,in2:A,operator:I})},flood:function(x,A){this.attr("flood-color",x),null!=A&&this.attr("flood-opacity",A)},offset:function(x,A){this.attr({dx:x,dy:A})},image:function(x){this.attr("href",x,SVG.xlink)},displacementMap:function(x,A,I,F,U){this.attr({in:x,in2:A,scale:I,xChannelSelector:F,yChannelSelector:U})},gaussianBlur:function(x,A){this.attr("stdDeviation",null!=x||null!=A?function(I){if(!Array.isArray(I))return I;for(var F=0,U=I.length,$=[];F<U;F++)$.push(I[F]);return $.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(x,A){this.attr({operator:x,radius:A})},tile:function(){},turbulence:function(x,A,I,F,U){this.attr({numOctaves:A,seed:I,stitchTiles:F,baseFrequency:x,type:U})}},c={merge:function(){var x;if(arguments[0]instanceof SVG.Set){var A=this;arguments[0].each(function(F){this instanceof SVG.MergeNode?A.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&A.put(new SVG.MergeNode(this))})}else{x=Array.isArray(arguments[0])?arguments[0]:arguments;for(var I=0;I<x.length;I++)x[I]instanceof SVG.MergeNode?this.put(x[I]):this.put(new SVG.MergeNode(x[I]))}},componentTransfer:function(x){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(I){this[I]=new(SVG["Func"+I.toUpperCase()])("identity"),this.rgb.add(this[I]),this.node.appendChild(this[I].node)}.bind(this)),x)for(var A in x.rgb&&(["r","g","b"].forEach(function(I){this[I].attr(x.rgb)}.bind(this)),delete x.rgb),x)this[A].attr(x[A])},diffuseLighting:function(x,A,I){this.attr({surfaceScale:x,diffuseConstant:A,kernelUnitLength:I})},specularLighting:function(x,A,I,F){this.attr({surfaceScale:x,diffuseConstant:A,specularExponent:I,kernelUnitLength:F})}},h={distantLight:function(x,A){this.attr({azimuth:x,elevation:A})},pointLight:function(x,A,I){this.attr({x,y:A,z:I})},spotLight:function(x,A,I,F,U,$){this.attr({x,y:A,z:I,pointsAtX:F,pointsAtY:U,pointsAtZ:$})},mergeNode:function(x){this.attr("in",x)}};function _(x){return Array.isArray(x)&&(x=new SVG.Array(x)),x.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function b(){var x=function(){};for(var A in"function"==typeof arguments[arguments.length-1]&&(x=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var I in arguments[A])x(arguments[A][I],I,arguments[A])}["r","g","b","a"].forEach(function(x){h["Func"+x.toUpperCase()]=function(A){switch(this.attr("type",A),A){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),b(o,function(x,A){var I=A.charAt(0).toUpperCase()+A.slice(1);SVG[I+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),b(c,function(x,A){var I=A.charAt(0).toUpperCase()+A.slice(1);SVG[I+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),b(h,function(x,A){var I=A.charAt(0).toUpperCase()+A.slice(1);SVG[I]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+I)),x.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(x){return x instanceof SVG.MergeNode?this.add(x,0):this.add(new SVG.MergeNode(x),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(x){return null==x?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",x)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function le(b,x,A,I,F,U,$){for(var q=b.slice(x,A||$),ie=I.slice(F,U||$),ue=0,ge={pos:[0,0],start:[0,0]},we={pos:[0,0],start:[0,0]};q[ue]=o.call(ge,q[ue]),ie[ue]=o.call(we,ie[ue]),q[ue][0]!=ie[ue][0]||"M"==q[ue][0]||"A"==q[ue][0]&&(q[ue][4]!=ie[ue][4]||q[ue][5]!=ie[ue][5])?(Array.prototype.splice.apply(q,[ue,1].concat(h.call(ge,q[ue]))),Array.prototype.splice.apply(ie,[ue,1].concat(h.call(we,ie[ue])))):(q[ue]=c.call(ge,q[ue]),ie[ue]=c.call(we,ie[ue])),++ue!=q.length||ue!=ie.length;)ue==q.length&&q.push(["C",ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1],ge.pos[0],ge.pos[1]]),ue==ie.length&&ie.push(["C",we.pos[0],we.pos[1],we.pos[0],we.pos[1],we.pos[0],we.pos[1]]);return{start:q,dest:ie}}function o(b){switch(b[0]){case"z":case"Z":b[0]="L",b[1]=this.start[0],b[2]=this.start[1];break;case"H":b[0]="L",b[2]=this.pos[1];break;case"V":b[0]="L",b[2]=b[1],b[1]=this.pos[0];break;case"T":b[0]="Q",b[3]=b[1],b[4]=b[2],b[1]=this.reflection[1],b[2]=this.reflection[0];break;case"S":b[0]="C",b[6]=b[4],b[5]=b[3],b[4]=b[2],b[3]=b[1],b[2]=this.reflection[1],b[1]=this.reflection[0]}return b}function c(b){var x=b.length;return this.pos=[b[x-2],b[x-1]],-1!="SCQT".indexOf(b[0])&&(this.reflection=[2*this.pos[0]-b[x-4],2*this.pos[1]-b[x-3]]),b}function h(b){var x=[b];switch(b[0]){case"M":return this.pos=this.start=[b[1],b[2]],x;case"L":b[5]=b[3]=b[1],b[6]=b[4]=b[2],b[1]=this.pos[0],b[2]=this.pos[1];break;case"Q":b[6]=b[4],b[5]=b[3],b[4]=1*b[4]/3+2*b[2]/3,b[3]=1*b[3]/3+2*b[1]/3,b[2]=1*this.pos[1]/3+2*b[2]/3,b[1]=1*this.pos[0]/3+2*b[1]/3;break;case"A":b=(x=function(A,I){var F,U,$,q,ie,ue,ge,we,me,Ee,N,Q,pe,xe,Le,qe,kt,Dt,ei,wi,Mi,dn,wn,Fn,Qn,lr,cr=Math.abs(I[1]),Pr=Math.abs(I[2]),jr=I[3]%360,Wr=I[4],Dr=I[5],Kn=I[6],ss=I[7],$n=new SVG.Point(A),Zr=new SVG.Point(Kn,ss),fl=[];if(0===cr||0===Pr||$n.x===Zr.x&&$n.y===Zr.y)return[["C",$n.x,$n.y,Zr.x,Zr.y,Zr.x,Zr.y]];for((U=(F=new SVG.Point(($n.x-Zr.x)/2,($n.y-Zr.y)/2).transform((new SVG.Matrix).rotate(jr))).x*F.x/(cr*cr)+F.y*F.y/(Pr*Pr))>1&&(cr*=U=Math.sqrt(U),Pr*=U),$=(new SVG.Matrix).rotate(jr).scale(1/cr,1/Pr).rotate(-jr),$n=$n.transform($),ue=(q=[(Zr=Zr.transform($)).x-$n.x,Zr.y-$n.y])[0]*q[0]+q[1]*q[1],ie=Math.sqrt(ue),q[0]/=ie,q[1]/=ie,ge=ue<4?Math.sqrt(1-ue/4):0,Wr===Dr&&(ge*=-1),we=new SVG.Point((Zr.x+$n.x)/2+ge*-q[1],(Zr.y+$n.y)/2+ge*q[0]),me=new SVG.Point($n.x-we.x,$n.y-we.y),Ee=new SVG.Point(Zr.x-we.x,Zr.y-we.y),N=Math.acos(me.x/Math.sqrt(me.x*me.x+me.y*me.y)),me.y<0&&(N*=-1),Q=Math.acos(Ee.x/Math.sqrt(Ee.x*Ee.x+Ee.y*Ee.y)),Ee.y<0&&(Q*=-1),Dr&&N>Q&&(Q+=2*Math.PI),!Dr&&N<Q&&(Q-=2*Math.PI),qe=[],kt=N,pe=(Q-N)/(xe=Math.ceil(2*Math.abs(N-Q)/Math.PI)),Le=4*Math.tan(pe/4)/3,Mi=0;Mi<=xe;Mi++)ei=Math.cos(kt),Dt=Math.sin(kt),wi=new SVG.Point(we.x+ei,we.y+Dt),qe[Mi]=[new SVG.Point(wi.x+Le*Dt,wi.y-Le*ei),wi,new SVG.Point(wi.x-Le*Dt,wi.y+Le*ei)],kt+=pe;for(qe[0][0]=qe[0][1].clone(),qe[qe.length-1][2]=qe[qe.length-1][1].clone(),$=(new SVG.Matrix).rotate(jr).scale(cr,Pr).rotate(-jr),Mi=0,dn=qe.length;Mi<dn;Mi++)qe[Mi][0]=qe[Mi][0].transform($),qe[Mi][1]=qe[Mi][1].transform($),qe[Mi][2]=qe[Mi][2].transform($);for(Mi=1,dn=qe.length;Mi<dn;Mi++)wn=(wi=qe[Mi-1][2]).x,Fn=wi.y,Qn=(wi=qe[Mi][0]).x,lr=wi.y,Kn=(wi=qe[Mi][1]).x,fl.push(["C",wn,Fn,Qn,lr,Kn,ss=wi.y]);return fl}(this.pos,b))[0]}return b[0]="C",this.pos=[b[5],b[6]],this.reflection=[2*b[5]-b[3],2*b[6]-b[4]],x}function _(b,x){if(!1===x)return!1;for(var A=x,I=b.length;A<I;++A)if("M"==b[A][0])return A;return!1}SVG.extend(SVG.PathArray,{morph:function(b){for(var x=this.value,A=this.parse(b),I=0,F=0,U=!1,$=!1;!1!==I||!1!==F;){var q;U=_(x,!1!==I&&I+1),$=_(A,!1!==F&&F+1),!1===I&&(I=0==(q=new SVG.PathArray(ie.start).bbox()).height||0==q.width?x.push(x[0])-1:x.push(["M",q.x+q.width/2,q.y+q.height/2])-1),!1===F&&(F=0==(q=new SVG.PathArray(ie.dest).bbox()).height||0==q.width?A.push(A[0])-1:A.push(["M",q.x+q.width/2,q.y+q.height/2])-1);var ie=le(x,I,U,A,F,$);x=x.slice(0,I).concat(ie.start,!1===U?[]:x.slice(U)),A=A.slice(0,F).concat(ie.dest,!1===$?[]:A.slice($)),I=!1!==U&&I+ie.start.length,F=!1!==$&&F+ie.dest.length}return this.value=x,this.destination=new SVG.PathArray,this.destination.value=A,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function le(o){o.remember("_draggable",this),this.el=o}le.prototype.init=function(o,c){var h=this;this.constraint=o,this.value=c,this.el.on("mousedown.drag",function(_){h.start(_)}),this.el.on("touchstart.drag",function(_){h.start(_)})},le.prototype.transformPoint=function(o,c){var h=(o=o||window.event).changedTouches&&o.changedTouches[0]||o;return this.p.x=h.clientX-(c||0),this.p.y=h.clientY,this.p.matrixTransform(this.m)},le.prototype.getBBox=function(){var o=this.el.bbox();return this.el instanceof SVG.Nested&&(o=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(o.x=this.el.x(),o.y=this.el.y()),o},le.prototype.start=function(o){if("click"!=o.type&&"mousedown"!=o.type&&"mousemove"!=o.type||1==(o.which||o.buttons)){var c=this;if(this.el.fire("beforedrag",{event:o,handler:this}),!this.el.event().defaultPrevented){o.preventDefault(),o.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var h,_=this.getBBox();if(this.el instanceof SVG.Text)switch(h=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":h/=2;break;case"start":h=0}this.startPoints={point:this.transformPoint(o,h),box:_,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(b){c.drag(b)}),SVG.on(window,"touchmove.drag",function(b){c.drag(b)}),SVG.on(window,"mouseup.drag",function(b){c.end(b)}),SVG.on(window,"touchend.drag",function(b){c.end(b)}),this.el.fire("dragstart",{event:o,p:this.startPoints.point,m:this.m,handler:this})}}},le.prototype.drag=function(o){var c=this.getBBox(),h=this.transformPoint(o),_=this.startPoints.box.x+h.x-this.startPoints.point.x,b=this.startPoints.box.y+h.y-this.startPoints.point.y,x=this.constraint,A=h.x-this.startPoints.point.x,I=h.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:o,p:h,m:this.m,handler:this}),this.el.event().defaultPrevented)return h;if("function"==typeof x){var F=x.call(this.el,_,b,this.m);"boolean"==typeof F&&(F={x:F,y:F}),!0===F.x?this.el.x(_):!1!==F.x&&this.el.x(F.x),!0===F.y?this.el.y(b):!1!==F.y&&this.el.y(F.y)}else"object"==typeof x&&(null!=x.minX&&_<x.minX?A=(_=x.minX)-this.startPoints.box.x:null!=x.maxX&&_>x.maxX-c.width&&(A=(_=x.maxX-c.width)-this.startPoints.box.x),null!=x.minY&&b<x.minY?I=(b=x.minY)-this.startPoints.box.y:null!=x.maxY&&b>x.maxY-c.height&&(I=(b=x.maxY-c.height)-this.startPoints.box.y),null!=x.snapToGrid&&(_-=_%x.snapToGrid,b-=b%x.snapToGrid,A-=A%x.snapToGrid,I-=I%x.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:A,y:I},!0):this.el.move(_,b));return h},le.prototype.end=function(o){var c=this.drag(o);this.el.fire("dragend",{event:o,p:c,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(o,c){"function"!=typeof o&&"object"!=typeof o||(c=o,o=!0);var h=this.remember("_draggable")||new le(this);return(o=void 0===o||o)?h.init(c||{},o):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function le(o){this.el=o,o.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(c,h,_){var b="string"!=typeof c?c:h[c];return _?b/2:b},this.pointCoords=function(c,h){var _=this.pointsList[c];return{x:this.pointCoord(_[0],h,"t"===c||"b"===c),y:this.pointCoord(_[1],h,"r"===c||"l"===c)}}}le.prototype.init=function(o,c){var h=this.el.bbox();this.options={};var _=this.el.selectize.defaults.points;for(var b in this.el.selectize.defaults)this.options[b]=this.el.selectize.defaults[b],void 0!==c[b]&&(this.options[b]=c[b]);var x=["points","pointsExclude"];for(var b in x){var A=this.options[x[b]];"string"==typeof A?A=A.length>0?A.split(/\s*,\s*/i):[]:"boolean"==typeof A&&"points"===x[b]&&(A=A?_:[]),this.options[x[b]]=A}this.options.points=[_,this.options.points].reduce(function(I,F){return I.filter(function(U){return F.indexOf(U)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(I,F){return I.filter(function(U){return F.indexOf(U)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(h.x,h.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(o):this.selectRect(o),this.observe(),this.cleanup()},le.prototype.selectPoints=function(o){return this.pointSelection.isSelected=o,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},le.prototype.getPointArray=function(){var o=this.el.bbox();return this.el.array().valueOf().map(function(c){return[c[0]-o.x,c[1]-o.y]})},le.prototype.drawPoints=function(){for(var o=this,c=this.getPointArray(),h=0,_=c.length;h<_;++h){var b=function(A){return function(I){(I=I||window.event).preventDefault?I.preventDefault():I.returnValue=!1,I.stopPropagation(),o.el.fire("point",{x:I.pageX||I.touches[0].pageX,y:I.pageY||I.touches[0].pageY,i:A,event:I})}}(h),x=this.drawPoint(c[h][0],c[h][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",b).on("mousedown",b);this.pointSelection.set.add(x)}},le.prototype.drawPoint=function(o,c){var h=this.options.pointType;switch(h){case"circle":return this.drawCircle(o,c);case"rect":return this.drawRect(o,c);default:if("function"==typeof h)return h.call(this,o,c);throw new Error("Unknown "+h+" point type!")}},le.prototype.drawCircle=function(o,c){return this.nested.circle(this.options.pointSize).center(o,c)},le.prototype.drawRect=function(o,c){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(o,c)},le.prototype.updatePointSelection=function(){var o=this.getPointArray();this.pointSelection.set.each(function(c){this.cx()===o[c][0]&&this.cy()===o[c][1]||this.center(o[c][0],o[c][1])})},le.prototype.updateRectSelection=function(){var o=this,c=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:c.width,height:c.height}),this.options.points.length&&this.options.points.map(function(_,b){var x=o.pointCoords(_,c);o.rectSelection.set.get(b+1).center(x.x,x.y)}),this.options.rotationPoint){var h=this.rectSelection.set.length();this.rectSelection.set.get(h-1).center(c.width/2,20)}},le.prototype.selectRect=function(o){var c=this,h=this.el.bbox();function _(A){return function(I){(I=I||window.event).preventDefault?I.preventDefault():I.returnValue=!1,I.stopPropagation(),c.el.fire(A,{x:I.pageX||I.touches[0].pageX,y:I.pageY||I.touches[0].pageY,event:I})}}if(this.rectSelection.isSelected=o,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(h.width,h.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(A,I){var F=c.pointCoords(A,h),U=c.drawPoint(F.x,F.y).attr("class",c.options.classPoints+"_"+A).on("mousedown",_(A)).on("touchstart",_(A));c.rectSelection.set.add(U)}),this.rectSelection.set.each(function(){this.addClass(c.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var b=function(A){(A=A||window.event).preventDefault?A.preventDefault():A.returnValue=!1,A.stopPropagation(),c.el.fire("rot",{x:A.pageX||A.touches[0].pageX,y:A.pageY||A.touches[0].pageY,event:A})},x=this.drawPoint(h.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",b).on("mousedown",b);this.rectSelection.set.add(x)}},le.prototype.handler=function(){var o=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(o.x,o.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},le.prototype.observe=function(){var o=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){o.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){o.handler()})},le.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(o,c){return"object"==typeof o&&(c=o,o=!0),(this.remember("_selectHandler")||new le(this)).init(void 0===o||o,c||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function le(o){o.remember("_resizeHandler",this),this.el=o,this.parameters={},this.lastUpdateCall=null,this.p=o.doc().node.createSVGPoint()}le.prototype.transformPoint=function(o,c,h){return this.p.x=o-(this.offset.x-window.pageXOffset),this.p.y=c-(this.offset.y-window.pageYOffset),this.p.matrixTransform(h||this.m)},le.prototype._extractPosition=function(o){return{x:null!=o.clientX?o.clientX:o.touches[0].clientX,y:null!=o.clientY?o.clientY:o.touches[0].clientY}},le.prototype.init=function(o){var c=this;if(this.stop(),"stop"!==o){for(var h in this.options={},this.el.resize.defaults)this.options[h]=this.el.resize.defaults[h],void 0!==o[h]&&(this.options[h]=o[h]);this.el.on("lt.resize",function(_){c.resize(_||window.event)}),this.el.on("rt.resize",function(_){c.resize(_||window.event)}),this.el.on("rb.resize",function(_){c.resize(_||window.event)}),this.el.on("lb.resize",function(_){c.resize(_||window.event)}),this.el.on("t.resize",function(_){c.resize(_||window.event)}),this.el.on("r.resize",function(_){c.resize(_||window.event)}),this.el.on("b.resize",function(_){c.resize(_||window.event)}),this.el.on("l.resize",function(_){c.resize(_||window.event)}),this.el.on("rot.resize",function(_){c.resize(_||window.event)}),this.el.on("point.resize",function(_){c.resize(_||window.event)}),this.update()}},le.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},le.prototype.resize=function(o){var c=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var h=this._extractPosition(o.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(h.x,h.y),x:o.detail.x,y:o.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==o.detail.i){var _=this.el.array().valueOf();this.parameters.i=o.detail.i,this.parameters.pointCoords=[_[o.detail.i][0],_[o.detail.i][1]]}switch(o.type){case"lt":this.calc=function(b,x){var A=this.snapToGrid(b,x);if(this.parameters.box.width-A[0]>0&&this.parameters.box.height-A[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+A[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-A[0]);A=this.checkAspectRatio(A),this.el.move(this.parameters.box.x+A[0],this.parameters.box.y+A[1]).size(this.parameters.box.width-A[0],this.parameters.box.height-A[1])}};break;case"rt":this.calc=function(b,x){var A=this.snapToGrid(b,x,2);if(this.parameters.box.width+A[0]>0&&this.parameters.box.height-A[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-A[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+A[0]);A=this.checkAspectRatio(A,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+A[1]).size(this.parameters.box.width+A[0],this.parameters.box.height-A[1])}};break;case"rb":this.calc=function(b,x){var A=this.snapToGrid(b,x,0);if(this.parameters.box.width+A[0]>0&&this.parameters.box.height+A[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-A[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+A[0]);A=this.checkAspectRatio(A),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+A[0],this.parameters.box.height+A[1])}};break;case"lb":this.calc=function(b,x){var A=this.snapToGrid(b,x,1);if(this.parameters.box.width-A[0]>0&&this.parameters.box.height+A[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+A[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-A[0]);A=this.checkAspectRatio(A,!0),this.el.move(this.parameters.box.x+A[0],this.parameters.box.y).size(this.parameters.box.width-A[0],this.parameters.box.height+A[1])}};break;case"t":this.calc=function(b,x){var A=this.snapToGrid(b,x,2);if(this.parameters.box.height-A[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+A[1]).height(this.parameters.box.height-A[1])}};break;case"r":this.calc=function(b,x){var A=this.snapToGrid(b,x,0);if(this.parameters.box.width+A[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+A[0])}};break;case"b":this.calc=function(b,x){var A=this.snapToGrid(b,x,0);if(this.parameters.box.height+A[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+A[1])}};break;case"l":this.calc=function(b,x){var A=this.snapToGrid(b,x,1);if(this.parameters.box.width-A[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+A[0],this.parameters.box.y).width(this.parameters.box.width-A[0])}};break;case"rot":this.calc=function(b,x){var A=b+this.parameters.p.x,I=x+this.parameters.p.y,F=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),U=Math.atan2(I-this.parameters.box.y-this.parameters.box.height/2,A-this.parameters.box.x-this.parameters.box.width/2),$=this.parameters.rotation+180*(U-F)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate($-$%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(b,x){var A=this.snapToGrid(b,x,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),I=this.el.array().valueOf();I[this.parameters.i][0]=this.parameters.pointCoords[0]+A[0],I[this.parameters.i][1]=this.parameters.pointCoords[1]+A[1],this.el.plot(I)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:o}),SVG.on(window,"touchmove.resize",function(b){c.update(b||window.event)}),SVG.on(window,"touchend.resize",function(){c.done()}),SVG.on(window,"mousemove.resize",function(b){c.update(b||window.event)}),SVG.on(window,"mouseup.resize",function(){c.done()})},le.prototype.update=function(o){if(o){var c=this._extractPosition(o),h=this.transformPoint(c.x,c.y),_=h.x-this.parameters.p.x,b=h.y-this.parameters.p.y;this.lastUpdateCall=[_,b],this.calc(_,b),this.el.fire("resizing",{dx:_,dy:b,event:o})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},le.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},le.prototype.snapToGrid=function(o,c,h,_){var b;return b=void 0!==_?[(h+o)%this.options.snapToGrid,(_+c)%this.options.snapToGrid]:[(this.parameters.box.x+o+(1&(h=h??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+c+(2&h?0:this.parameters.box.height))%this.options.snapToGrid],o<0&&(b[0]-=this.options.snapToGrid),c<0&&(b[1]-=this.options.snapToGrid),o-=Math.abs(b[0])<this.options.snapToGrid/2?b[0]:b[0]-(o<0?-this.options.snapToGrid:this.options.snapToGrid),c-=Math.abs(b[1])<this.options.snapToGrid/2?b[1]:b[1]-(c<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(o,c,h,_)},le.prototype.constraintToBox=function(o,c,h,_){var b,x,A=this.options.constraint||{};return void 0!==_?(b=h,x=_):(b=this.parameters.box.x+(1&h?0:this.parameters.box.width),x=this.parameters.box.y+(2&h?0:this.parameters.box.height)),void 0!==A.minX&&b+o<A.minX&&(o=A.minX-b),void 0!==A.maxX&&b+o>A.maxX&&(o=A.maxX-b),void 0!==A.minY&&x+c<A.minY&&(c=A.minY-x),void 0!==A.maxY&&x+c>A.maxY&&(c=A.maxY-x),[o,c]},le.prototype.checkAspectRatio=function(o,c){if(!this.options.saveAspectRatio)return o;var h=o.slice(),_=this.parameters.box.width/this.parameters.box.height,b=this.parameters.box.width+o[0],x=this.parameters.box.height-o[1],A=b/x;return A<_?(h[1]=b/_-this.parameters.box.height,c&&(h[1]=-h[1])):A>_&&(h[0]=this.parameters.box.width-x*_,c&&(h[0]=-h[0])),h},SVG.extend(SVG.Element,{resize:function(o){return(this.remember("_resizeHandler")||new le(this)).init(o||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var it=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new ii(this.ctx),this.ctx.axes=new tn(this.ctx),this.ctx.core=new yt(this.ctx.el,this.ctx),this.ctx.config=new fn({}),this.ctx.data=new ji(this.ctx),this.ctx.grid=new xn(this.ctx),this.ctx.graphics=new at(this.ctx),this.ctx.coreUtils=new ri(this.ctx),this.ctx.crosshairs=new Si(this.ctx),this.ctx.events=new Ui(this.ctx),this.ctx.exports=new or(this.ctx),this.ctx.localization=new jn(this.ctx),this.ctx.options=new gi,this.ctx.responsive=new mn(this.ctx),this.ctx.series=new Dn(this.ctx),this.ctx.theme=new Pn(this.ctx),this.ctx.formatters=new Ei(this.ctx),this.ctx.titleSubtitle=new Lr(this.ctx),this.ctx.legend=new Fr(this.ctx),this.ctx.toolbar=new Cs(this.ctx),this.ctx.tooltip=new Be(this.ctx),this.ctx.dimensions=new kn(this.ctx),this.ctx.updateHelpers=new fe(this.ctx),this.ctx.zoomPanSelection=new er(this.ctx),this.ctx.w.globals.tooltip=new Be(this.ctx)}}]),le}(),Tt=function(){function le(o){V(this,le),this.ctx=o,this.w=o.w}return Ae(le,[{key:"clear",value:function(o){var c=o.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:c})}},{key:"killSVG",value:function(o){o.each(function(c,h){this.removeClass("*"),this.off(),this.stop()},!0),o.ungroup(),o.clear()}},{key:"clearDomElements",value:function(o){var c=this,_=this.w.globals.dom.Paper.node;_.parentNode&&_.parentNode.parentNode&&!o.isUpdating&&(_.parentNode.parentNode.style.minHeight="unset");var b=this.w.globals.dom.baseEl;b&&this.ctx.eventList.forEach(function(A){b.removeEventListener(A,c.ctx.events.documentEvent)});var x=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(x.Paper),x.Paper.remove(),x.elWrap=null,x.elGraphical=null,x.elLegendWrap=null,x.elLegendForeign=null,x.baseEl=null,x.elGridRect=null,x.elGridRectMask=null,x.elGridRectMarkerMask=null,x.elForecastMask=null,x.elNonForecastMask=null,x.elDefs=null}}]),le}(),Pe=new WeakMap,It=function(){function le(o,c){V(this,le),this.opts=c,this.ctx=this,this.w=new Qt(c).init(),this.el=o,this.w.globals.cuid=$e.randomId(),this.w.globals.chartID=this.w.config.chart.id?$e.escapeString(this.w.config.chart.id):this.w.globals.cuid,new it(this).initModules(),this.create=$e.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Ae(le,[{key:"render",value:function(){var o=this;return new Promise(function(c,h){if(null!==o.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),o.w.config.chart.id&&Apex._chartInstances.push({id:o.w.globals.chartID,group:o.w.config.chart.group,chart:o}),o.setLocale(o.w.config.chart.defaultLocale);var _=o.w.config.chart.events.beforeMount;if("function"==typeof _&&_(o,o.w),o.events.fireEvent("beforeMount",[o,o.w]),window.addEventListener("resize",o.windowResizeHandler),function(q,ie){var ue=!1;if(q.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var ge=q.getBoundingClientRect();"none"!==q.style.display&&0!==ge.width||(ue=!0)}var we=new ResizeObserver(function(me){ue&&ie.call(q,me),ue=!0});q.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(q.children).forEach(function(me){return we.observe(me)}):we.observe(q),Pe.set(ie,we)}(o.el.parentNode,o.parentResizeHandler),!o.css){var b=o.el.getRootNode&&o.el.getRootNode(),x=$e.is("ShadowRoot",b),A=o.el.ownerDocument,I=A.getElementById("apexcharts-css");if(x||!I){var F;o.css=document.createElement("style"),o.css.id="apexcharts-css",o.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var U=(null===(F=o.opts.chart)||void 0===F?void 0:F.nonce)||o.w.config.chart.nonce;U&&o.css.setAttribute("nonce",U),x?b.prepend(o.css):A.head.appendChild(o.css)}}var $=o.create(o.w.config.series,{});if(!$)return c(o);o.mount($).then(function(){"function"==typeof o.w.config.chart.events.mounted&&o.w.config.chart.events.mounted(o,o.w),o.events.fireEvent("mounted",[o,o.w]),c($)}).catch(function(q){h(q)})}else h(new Error("Element not found"))})}},{key:"create",value:function(o,c){var h=this.w;new it(this).initModules();var _=this.w.globals;if(_.noData=!1,_.animationEnded=!1,this.responsive.checkResponsiveConfig(c),h.config.xaxis.convertedCatToNumeric&&new bn(h.config).convertCatToNumericXaxis(h.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===h.config.chart.type&&(h.config.grid.show=!1,h.config.yaxis[0].show=!1),0===_.svgWidth))return _.animationEnded=!0,null;var b=ri.checkComboSeries(o);_.comboCharts=b.comboCharts,_.comboBarCount=b.comboBarCount;var x=o.every(function(U){return U.data&&0===U.data.length});(0===o.length||x)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new on(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),_.noData&&_.collapsedSeries.length!==_.series.length&&!h.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),_.axisCharts&&(this.core.coreCalculations(),"category"!==h.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=h.globals.minX,this.ctx.toolbar.maxX=h.globals.maxX),this.formatters.heatmapLabelFormatters(),new ri(this).getLargestMarkerSize(),this.dimensions.plotCoords();var A=this.core.xySettings();this.grid.createGridMask();var I=this.core.plotChartType(o,A),F=new Nn(this);return F.bringForward(),h.config.dataLabels.background.enabled&&F.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:I,xyRatios:A,dimensions:{plot:{left:h.globals.translateX,top:h.globals.translateY,width:h.globals.gridWidth,height:h.globals.gridHeight}}}}},{key:"mount",value:function(){var o=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=this,_=h.w;return new Promise(function(b,x){if(null===h.el)return x(new Error("Not enough data to display or target element not found"));(null===c||_.globals.allSeriesCollapsed)&&h.series.handleNoData(),h.grid=new xn(h);var A,I,F=h.grid.drawGrid();if(h.annotations=new Gi(h),h.annotations.drawImageAnnos(),h.annotations.drawTextAnnos(),"back"===_.config.grid.position&&(F&&_.globals.dom.elGraphical.add(F.el),null!=F&&null!==(A=F.elGridBorders)&&void 0!==A&&A.node&&_.globals.dom.elGraphical.add(F.elGridBorders)),Array.isArray(c.elGraph))for(var U=0;U<c.elGraph.length;U++)_.globals.dom.elGraphical.add(c.elGraph[U]);else _.globals.dom.elGraphical.add(c.elGraph);"front"===_.config.grid.position&&(F&&_.globals.dom.elGraphical.add(F.el),null!=F&&null!==(I=F.elGridBorders)&&void 0!==I&&I.node&&_.globals.dom.elGraphical.add(F.elGridBorders)),"front"===_.config.xaxis.crosshairs.position&&h.crosshairs.drawXCrosshairs(),"front"===_.config.yaxis[0].crosshairs.position&&h.crosshairs.drawYCrosshairs(),"treemap"!==_.config.chart.type&&h.axes.drawAxis(_.config.chart.type,F);var $=new gr(o.ctx,F),q=new Zi(o.ctx,F);if(null!==F&&($.xAxisLabelCorrections(F.xAxisTickWidth),q.setYAxisTextAlignments(),_.config.yaxis.map(function(ue,ge){-1===_.globals.ignoreYAxisIndexes.indexOf(ge)&&q.yAxisTitleRotate(ge,ue.opposite)})),h.annotations.drawAxesAnnotations(),!_.globals.noData){if(_.config.tooltip.enabled&&!_.globals.noData&&h.w.globals.tooltip.drawTooltip(c.xyRatios),_.globals.axisCharts&&(_.globals.isXNumeric||_.config.xaxis.convertedCatToNumeric||_.globals.isRangeBar))(_.config.chart.zoom.enabled||_.config.chart.selection&&_.config.chart.selection.enabled||_.config.chart.pan&&_.config.chart.pan.enabled)&&h.zoomPanSelection.init({xyRatios:c.xyRatios});else{var ie=_.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(ue){ie[ue]=!1})}_.config.chart.toolbar.show&&!_.globals.allSeriesCollapsed&&h.toolbar.createToolbar()}_.globals.memory.methodsToExec.length>0&&_.globals.memory.methodsToExec.forEach(function(ue){ue.method(ue.params,!1,ue.context)}),_.globals.axisCharts||_.globals.noData||h.core.resizeNonAxisCharts(),b(h)})}},{key:"destroy",value:function(){var o,c;window.removeEventListener("resize",this.windowResizeHandler),(c=Pe.get(o=this.parentResizeHandler))&&(c.disconnect(),Pe.delete(o));var h=this.w.config.chart.id;h&&Apex._chartInstances.forEach(function(_,b){_.id===$e.escapeString(h)&&Apex._chartInstances.splice(b,1)}),new Tt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(o){var c=this,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],b=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],x=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],A=this.w;return A.globals.selection=void 0,o.series&&(this.series.resetSeries(!1,!0,!1),o.series.length&&o.series[0].data&&(o.series=o.series.map(function(I,F){return c.updateHelpers._extendSeries(I,F)})),this.updateHelpers.revertDefaultAxisMinMax()),o.xaxis&&(o=this.updateHelpers.forceXAxisUpdate(o)),o.yaxis&&(o=this.updateHelpers.forceYAxisUpdate(o)),A.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),o.theme&&(o=this.theme.updateThemeOptions(o)),this.updateHelpers._updateOptions(o,h,_,b,x)}},{key:"updateSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,c,h)}},{key:"appendSeries",value:function(o){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=this.w.config.series.slice();return _.push(o),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(_,c,h)}},{key:"appendData",value:function(o){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this;h.w.globals.dataChanged=!0,h.series.getPreviousPaths();for(var _=h.w.config.series.slice(),b=0;b<_.length;b++)if(null!=o[b])for(var x=0;x<o[b].data.length;x++)_[b].data.push(o[b].data[x]);return h.w.config.series=_,c&&(h.w.globals.initialSeries=$e.clone(h.w.config.series)),this.update()}},{key:"update",value:function(o){var c=this;return new Promise(function(h,_){new Tt(c.ctx).clear({isUpdating:!0});var b=c.create(c.w.config.series,o);if(!b)return h(c);c.mount(b).then(function(){"function"==typeof c.w.config.chart.events.updated&&c.w.config.chart.events.updated(c,c.w),c.events.fireEvent("updated",[c,c.w]),c.w.globals.isDirty=!0,h(c)}).catch(function(x){_(x)})})}},{key:"getSyncedCharts",value:function(){var o=this.getGroupedCharts(),c=[this];return o.length&&(c=[],o.forEach(function(h){c.push(h)})),c}},{key:"getGroupedCharts",value:function(){var o=this;return Apex._chartInstances.filter(function(c){if(c.group)return!0}).map(function(c){return o.w.config.chart.group===c.group?c.chart:o})}},{key:"toggleSeries",value:function(o){return this.series.toggleSeries(o)}},{key:"highlightSeriesOnLegendHover",value:function(o,c){return this.series.toggleSeriesOnHover(o,c)}},{key:"showSeries",value:function(o){this.series.showSeries(o)}},{key:"hideSeries",value:function(o){this.series.hideSeries(o)}},{key:"isSeriesHidden",value:function(o){this.series.isSeriesHidden(o)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(o,c){this.events.addEventListener(o,c)}},{key:"removeEventListener",value:function(o,c){this.events.removeEventListener(o,c)}},{key:"addXaxisAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addXaxisAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"addYaxisAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addYaxisAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"addPointAnnotation",value:function(o){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_=this;h&&(_=h),_.annotations.addPointAnnotationExternal(o,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_)}},{key:"clearAnnotations",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,c=this;o&&(c=o),c.annotations.clearAnnotations(c)}},{key:"removeAnnotation",value:function(o){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,h=this;c&&(h=c),h.annotations.removeAnnotation(h,o)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(o,c){return this.coreUtils.getSeriesTotalsXRange(o,c)}},{key:"getHighestValueInSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new _n(this.ctx).getMinYMaxY(o).highestY}},{key:"getLowestValueInSeries",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new _n(this.ctx).getMinYMaxY(o).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(o,c){return this.updateHelpers.toggleDataPointSelection(o,c)}},{key:"zoomX",value:function(o,c){this.ctx.toolbar.zoomUpdateOptions(o,c)}},{key:"setLocale",value:function(o){this.localization.setCurrentLocaleValues(o)}},{key:"dataURI",value:function(o){return new or(this.ctx).dataURI(o)}},{key:"exportToCSV",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new or(this.ctx).exportToCSV(o)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var o=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){o.w.globals.resized=!0,o.w.globals.dataChanged=!1,o.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var o=this.w.config.chart.redrawOnWindowResize;"function"==typeof o&&(o=o()),o&&this._windowResize()}}],[{key:"getChartByID",value:function(o){var c=$e.escapeString(o);if(Apex._chartInstances){var h=Apex._chartInstances.filter(function(_){return _.id===c})[0];return h&&h.chart}}},{key:"initOnLoad",value:function(){for(var o=document.querySelectorAll("[data-apexcharts]"),c=0;c<o.length;c++)new le(o[c],JSON.parse(o[c].getAttribute("data-options"))).render()}},{key:"exec",value:function(o,c){var h=this.getChartByID(o);if(h){h.w.globals.isExecCalled=!0;var _=null;if(-1!==h.publicMethods.indexOf(c)){for(var b=arguments.length,x=new Array(b>2?b-2:0),A=2;A<b;A++)x[A-2]=arguments[A];_=h[c].apply(h,x)}return _}}},{key:"merge",value:function(o,c){return $e.extend(o,c)}}]),le}();fo.exports=It},1176:fo=>{self,fo.exports=function(){var Gr={3099:function(ze){ze.exports=function(i){if("function"!=typeof i)throw TypeError(String(i)+" is not a function");return i}},6077:function(ze,i,V){var Oe=V(111);ze.exports=function(Ae){if(!Oe(Ae)&&null!==Ae)throw TypeError("Can't set "+String(Ae)+" as a prototype");return Ae}},1223:function(ze,i,V){var Oe=V(5112),Ae=V(30),De=V(3070),Fe=Oe("unscopables"),Ue=Array.prototype;null==Ue[Fe]&&De.f(Ue,Fe,{configurable:!0,value:Ae(null)}),ze.exports=function(Je){Ue[Fe][Je]=!0}},1530:function(ze,i,V){"use strict";var Oe=V(8710).charAt;ze.exports=function(Ae,De,Fe){return De+(Fe?Oe(Ae,De).length:1)}},5787:function(ze){ze.exports=function(i,V,Oe){if(!(i instanceof V))throw TypeError("Incorrect "+(Oe?Oe+" ":"")+"invocation");return i}},9670:function(ze,i,V){var Oe=V(111);ze.exports=function(Ae){if(!Oe(Ae))throw TypeError(String(Ae)+" is not an object");return Ae}},4019:function(ze){ze.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(ze,i,V){"use strict";var vi,Oe=V(4019),Ae=V(9781),De=V(7854),Fe=V(111),Ue=V(6656),Je=V(648),nt=V(8880),mt=V(1320),Pt=V(3070).f,ot=V(9518),gt=V(7674),wt=V(5112),si=V(9711),$e=De.Int8Array,ii=$e&&$e.prototype,oi=De.Uint8ClampedArray,at=oi&&oi.prototype,ri=$e&&ot($e),Xt=ii&&ot(ii),Vt=Object.prototype,dt=Vt.isPrototypeOf,Zt=wt("toStringTag"),ni=si("TYPED_ARRAY_TAG"),gi=Oe&&!!gt&&"Opera"!==Je(De.opera),Gi=!1,Ei={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Fi={BigInt64Array:8,BigUint64Array:8},bn=function(on){if(!Fe(on))return!1;var Zn=Je(on);return Ue(Ei,Zn)||Ue(Fi,Zn)};for(vi in Ei)De[vi]||(gi=!1);if((!gi||"function"!=typeof ri||ri===Function.prototype)&&(ri=function(){throw TypeError("Incorrect invocation")},gi))for(vi in Ei)De[vi]&&gt(De[vi],ri);if((!gi||!Xt||Xt===Vt)&&(Xt=ri.prototype,gi))for(vi in Ei)De[vi]&&gt(De[vi].prototype,Xt);if(gi&&ot(at)!==Xt&&gt(at,Xt),Ae&&!Ue(Xt,Zt))for(vi in Gi=!0,Pt(Xt,Zt,{get:function(){return Fe(this)?this[ni]:void 0}}),Ei)De[vi]&&nt(De[vi],ni,vi);ze.exports={NATIVE_ARRAY_BUFFER_VIEWS:gi,TYPED_ARRAY_TAG:Gi&&ni,aTypedArray:function(on){if(bn(on))return on;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(on){if(gt){if(dt.call(ri,on))return on}else for(var Zn in Ei)if(Ue(Ei,vi)){var Nn=De[Zn];if(Nn&&(on===Nn||dt.call(Nn,on)))return on}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(on,Zn,Nn){if(Ae){if(Nn)for(var Dn in Ei){var ji=De[Dn];ji&&Ue(ji.prototype,on)&&delete ji.prototype[on]}(!Xt[on]||Nn)&&mt(Xt,on,Nn?Zn:gi&&ii[on]||Zn)}},exportTypedArrayStaticMethod:function(on,Zn,Nn){var Dn,ji;if(Ae){if(gt){if(Nn)for(Dn in Ei)(ji=De[Dn])&&Ue(ji,on)&&delete ji[on];if(ri[on]&&!Nn)return;try{return mt(ri,on,Nn?Zn:gi&&$e[on]||Zn)}catch{}}for(Dn in Ei)(ji=De[Dn])&&(!ji[on]||Nn)&&mt(ji,on,Zn)}},isView:function(Zn){if(!Fe(Zn))return!1;var Nn=Je(Zn);return"DataView"===Nn||Ue(Ei,Nn)||Ue(Fi,Nn)},isTypedArray:bn,TypedArray:ri,TypedArrayPrototype:Xt}},3331:function(ze,i,V){"use strict";var Oe=V(7854),Ae=V(9781),De=V(4019),Fe=V(8880),Ue=V(2248),Je=V(7293),nt=V(5787),mt=V(9958),Pt=V(7466),ot=V(7067),gt=V(1179),wt=V(9518),si=V(7674),$e=V(8006).f,ii=V(3070).f,oi=V(1285),at=V(8003),ri=V(9909),Xt=ri.get,Vt=ri.set,dt="ArrayBuffer",Zt="DataView",ni="prototype",Gi="Wrong index",vi=Oe[dt],Ei=vi,Fi=Oe[Zt],Ji=Fi&&Fi[ni],bn=Object.prototype,fn=Oe.RangeError,Gn=gt.pack,Qt=gt.unpack,Yi=function(tn){return[255&tn]},on=function(tn){return[255&tn,tn>>8&255]},Zn=function(tn){return[255&tn,tn>>8&255,tn>>16&255,tn>>24&255]},Nn=function(tn){return tn[3]<<24|tn[2]<<16|tn[1]<<8|tn[0]},Dn=function(tn){return Gn(tn,23,4)},ji=function(tn){return Gn(tn,52,8)},Mr=function(tn,Si){ii(tn[ni],Si,{get:function(){return Xt(this)[Si]}})},or=function(tn,Si,mn,Pn){var Lr=ot(mn),Or=Xt(tn);if(Lr+Si>Or.byteLength)throw fn(Gi);var Sr=Xt(Or.buffer).bytes,vr=Lr+Or.byteOffset,ar=Sr.slice(vr,vr+Si);return Pn?ar:ar.reverse()},gr=function(tn,Si,mn,Pn,Lr,Or){var Sr=ot(mn),vr=Xt(tn);if(Sr+Si>vr.byteLength)throw fn(Gi);for(var ar=Xt(vr.buffer).bytes,kn=Sr+vr.byteOffset,dr=Pn(+Lr),Fr=0;Fr<Si;Fr++)ar[kn+Fr]=dr[Or?Fr:Si-Fr-1]};if(De){if(!Je(function(){vi(1)})||!Je(function(){new vi(-1)})||Je(function(){return new vi,new vi(1.5),new vi(NaN),vi.name!=dt})){for(var Zi,xn=(Ei=function(Si){return nt(this,Ei),new vi(ot(Si))})[ni]=vi[ni],en=$e(vi),_n=0;en.length>_n;)(Zi=en[_n++])in Ei||Fe(Ei,Zi,vi[Zi]);xn.constructor=Ei}si&&wt(Ji)!==bn&&si(Ji,bn);var Ui=new Fi(new Ei(2)),jn=Ji.setInt8;Ui.setInt8(0,2147483648),Ui.setInt8(1,2147483649),(Ui.getInt8(0)||!Ui.getInt8(1))&&Ue(Ji,{setInt8:function(Si,mn){jn.call(this,Si,mn<<24>>24)},setUint8:function(Si,mn){jn.call(this,Si,mn<<24>>24)}},{unsafe:!0})}else Ei=function(Si){nt(this,Ei,dt);var mn=ot(Si);Vt(this,{bytes:oi.call(new Array(mn),0),byteLength:mn}),Ae||(this.byteLength=mn)},Fi=function(Si,mn,Pn){nt(this,Fi,Zt),nt(Si,Ei,Zt);var Lr=Xt(Si).byteLength,Or=mt(mn);if(Or<0||Or>Lr)throw fn("Wrong offset");if(Or+(Pn=void 0===Pn?Lr-Or:Pt(Pn))>Lr)throw fn("Wrong length");Vt(this,{buffer:Si,byteLength:Pn,byteOffset:Or}),Ae||(this.buffer=Si,this.byteLength=Pn,this.byteOffset=Or)},Ae&&(Mr(Ei,"byteLength"),Mr(Fi,"buffer"),Mr(Fi,"byteLength"),Mr(Fi,"byteOffset")),Ue(Fi[ni],{getInt8:function(Si){return or(this,1,Si)[0]<<24>>24},getUint8:function(Si){return or(this,1,Si)[0]},getInt16:function(Si){var mn=or(this,2,Si,arguments.length>1?arguments[1]:void 0);return(mn[1]<<8|mn[0])<<16>>16},getUint16:function(Si){var mn=or(this,2,Si,arguments.length>1?arguments[1]:void 0);return mn[1]<<8|mn[0]},getInt32:function(Si){return Nn(or(this,4,Si,arguments.length>1?arguments[1]:void 0))},getUint32:function(Si){return Nn(or(this,4,Si,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(Si){return Qt(or(this,4,Si,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(Si){return Qt(or(this,8,Si,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(Si,mn){gr(this,1,Si,Yi,mn)},setUint8:function(Si,mn){gr(this,1,Si,Yi,mn)},setInt16:function(Si,mn){gr(this,2,Si,on,mn,arguments.length>2?arguments[2]:void 0)},setUint16:function(Si,mn){gr(this,2,Si,on,mn,arguments.length>2?arguments[2]:void 0)},setInt32:function(Si,mn){gr(this,4,Si,Zn,mn,arguments.length>2?arguments[2]:void 0)},setUint32:function(Si,mn){gr(this,4,Si,Zn,mn,arguments.length>2?arguments[2]:void 0)},setFloat32:function(Si,mn){gr(this,4,Si,Dn,mn,arguments.length>2?arguments[2]:void 0)},setFloat64:function(Si,mn){gr(this,8,Si,ji,mn,arguments.length>2?arguments[2]:void 0)}});at(Ei,dt),at(Fi,Zt),ze.exports={ArrayBuffer:Ei,DataView:Fi}},1048:function(ze,i,V){"use strict";var Oe=V(7908),Ae=V(1400),De=V(7466),Fe=Math.min;ze.exports=[].copyWithin||function(Je,nt){var mt=Oe(this),Pt=De(mt.length),ot=Ae(Je,Pt),gt=Ae(nt,Pt),wt=arguments.length>2?arguments[2]:void 0,si=Fe((void 0===wt?Pt:Ae(wt,Pt))-gt,Pt-ot),$e=1;for(gt<ot&&ot<gt+si&&($e=-1,gt+=si-1,ot+=si-1);si-- >0;)gt in mt?mt[ot]=mt[gt]:delete mt[ot],ot+=$e,gt+=$e;return mt}},1285:function(ze,i,V){"use strict";var Oe=V(7908),Ae=V(1400),De=V(7466);ze.exports=function(Ue){for(var Je=Oe(this),nt=De(Je.length),mt=arguments.length,Pt=Ae(mt>1?arguments[1]:void 0,nt),ot=mt>2?arguments[2]:void 0,gt=void 0===ot?nt:Ae(ot,nt);gt>Pt;)Je[Pt++]=Ue;return Je}},8533:function(ze,i,V){"use strict";var Oe=V(2092).forEach,De=V(9341)("forEach");ze.exports=De?[].forEach:function(Ue){return Oe(this,Ue,arguments.length>1?arguments[1]:void 0)}},8457:function(ze,i,V){"use strict";var Oe=V(9974),Ae=V(7908),De=V(3411),Fe=V(7659),Ue=V(7466),Je=V(6135),nt=V(1246);ze.exports=function(Pt){var at,ri,Xt,Vt,dt,Zt,ot=Ae(Pt),gt="function"==typeof this?this:Array,wt=arguments.length,si=wt>1?arguments[1]:void 0,$e=void 0!==si,ii=nt(ot),oi=0;if($e&&(si=Oe(si,wt>2?arguments[2]:void 0,2)),null==ii||gt==Array&&Fe(ii))for(ri=new gt(at=Ue(ot.length));at>oi;oi++)Zt=$e?si(ot[oi],oi):ot[oi],Je(ri,oi,Zt);else for(dt=(Vt=ii.call(ot)).next,ri=new gt;!(Xt=dt.call(Vt)).done;oi++)Zt=$e?De(Vt,si,[Xt.value,oi],!0):Xt.value,Je(ri,oi,Zt);return ri.length=oi,ri}},1318:function(ze,i,V){var Oe=V(5656),Ae=V(7466),De=V(1400),Fe=function(Ue){return function(Je,nt,mt){var wt,Pt=Oe(Je),ot=Ae(Pt.length),gt=De(mt,ot);if(Ue&&nt!=nt){for(;ot>gt;)if((wt=Pt[gt++])!=wt)return!0}else for(;ot>gt;gt++)if((Ue||gt in Pt)&&Pt[gt]===nt)return Ue||gt||0;return!Ue&&-1}};ze.exports={includes:Fe(!0),indexOf:Fe(!1)}},2092:function(ze,i,V){var Oe=V(9974),Ae=V(8361),De=V(7908),Fe=V(7466),Ue=V(5417),Je=[].push,nt=function(mt){var Pt=1==mt,ot=2==mt,gt=3==mt,wt=4==mt,si=6==mt,$e=7==mt,ii=5==mt||si;return function(oi,at,ri,Xt){for(var Ei,Fi,Vt=De(oi),dt=Ae(Vt),Zt=Oe(at,ri,3),ni=Fe(dt.length),gi=0,Gi=Xt||Ue,vi=Pt?Gi(oi,ni):ot||$e?Gi(oi,0):void 0;ni>gi;gi++)if((ii||gi in dt)&&(Fi=Zt(Ei=dt[gi],gi,Vt),mt))if(Pt)vi[gi]=Fi;else if(Fi)switch(mt){case 3:return!0;case 5:return Ei;case 6:return gi;case 2:Je.call(vi,Ei)}else switch(mt){case 4:return!1;case 7:Je.call(vi,Ei)}return si?-1:gt||wt?wt:vi}};ze.exports={forEach:nt(0),map:nt(1),filter:nt(2),some:nt(3),every:nt(4),find:nt(5),findIndex:nt(6),filterOut:nt(7)}},6583:function(ze,i,V){"use strict";var Oe=V(5656),Ae=V(9958),De=V(7466),Fe=V(9341),Ue=Math.min,Je=[].lastIndexOf,nt=!!Je&&1/[1].lastIndexOf(1,-0)<0,mt=Fe("lastIndexOf");ze.exports=nt||!mt?function(gt){if(nt)return Je.apply(this,arguments)||0;var wt=Oe(this),si=De(wt.length),$e=si-1;for(arguments.length>1&&($e=Ue($e,Ae(arguments[1]))),$e<0&&($e=si+$e);$e>=0;$e--)if($e in wt&&wt[$e]===gt)return $e||0;return-1}:Je},1194:function(ze,i,V){var Oe=V(7293),Ae=V(5112),De=V(7392),Fe=Ae("species");ze.exports=function(Ue){return De>=51||!Oe(function(){var Je=[];return(Je.constructor={})[Fe]=function(){return{foo:1}},1!==Je[Ue](Boolean).foo})}},9341:function(ze,i,V){"use strict";var Oe=V(7293);ze.exports=function(Ae,De){var Fe=[][Ae];return!!Fe&&Oe(function(){Fe.call(null,De||function(){throw 1},1)})}},3671:function(ze,i,V){var Oe=V(3099),Ae=V(7908),De=V(8361),Fe=V(7466),Ue=function(Je){return function(nt,mt,Pt,ot){Oe(mt);var gt=Ae(nt),wt=De(gt),si=Fe(gt.length),$e=Je?si-1:0,ii=Je?-1:1;if(Pt<2)for(;;){if($e in wt){ot=wt[$e],$e+=ii;break}if($e+=ii,Je?$e<0:si<=$e)throw TypeError("Reduce of empty array with no initial value")}for(;Je?$e>=0:si>$e;$e+=ii)$e in wt&&(ot=mt(ot,wt[$e],$e,gt));return ot}};ze.exports={left:Ue(!1),right:Ue(!0)}},5417:function(ze,i,V){var Oe=V(111),Ae=V(3157),Fe=V(5112)("species");ze.exports=function(Ue,Je){var nt;return Ae(Ue)&&("function"!=typeof(nt=Ue.constructor)||nt!==Array&&!Ae(nt.prototype)?Oe(nt)&&null===(nt=nt[Fe])&&(nt=void 0):nt=void 0),new(void 0===nt?Array:nt)(0===Je?0:Je)}},3411:function(ze,i,V){var Oe=V(9670),Ae=V(9212);ze.exports=function(De,Fe,Ue,Je){try{return Je?Fe(Oe(Ue)[0],Ue[1]):Fe(Ue)}catch(nt){throw Ae(De),nt}}},7072:function(ze,i,V){var Ae=V(5112)("iterator"),De=!1;try{var Fe=0,Ue={next:function(){return{done:!!Fe++}},return:function(){De=!0}};Ue[Ae]=function(){return this},Array.from(Ue,function(){throw 2})}catch{}ze.exports=function(Je,nt){if(!nt&&!De)return!1;var mt=!1;try{var Pt={};Pt[Ae]=function(){return{next:function(){return{done:mt=!0}}}},Je(Pt)}catch{}return mt}},4326:function(ze){var i={}.toString;ze.exports=function(V){return i.call(V).slice(8,-1)}},648:function(ze,i,V){var Oe=V(1694),Ae=V(4326),Fe=V(5112)("toStringTag"),Ue="Arguments"==Ae(function(){return arguments}());ze.exports=Oe?Ae:function(nt){var mt,Pt,ot;return void 0===nt?"Undefined":null===nt?"Null":"string"==typeof(Pt=function(nt,mt){try{return nt[mt]}catch{}}(mt=Object(nt),Fe))?Pt:Ue?Ae(mt):"Object"==(ot=Ae(mt))&&"function"==typeof mt.callee?"Arguments":ot}},9920:function(ze,i,V){var Oe=V(6656),Ae=V(3887),De=V(1236),Fe=V(3070);ze.exports=function(Ue,Je){for(var nt=Ae(Je),mt=Fe.f,Pt=De.f,ot=0;ot<nt.length;ot++){var gt=nt[ot];Oe(Ue,gt)||mt(Ue,gt,Pt(Je,gt))}}},8544:function(ze,i,V){var Oe=V(7293);ze.exports=!Oe(function(){function Ae(){}return Ae.prototype.constructor=null,Object.getPrototypeOf(new Ae)!==Ae.prototype})},4994:function(ze,i,V){"use strict";var Oe=V(3383).IteratorPrototype,Ae=V(30),De=V(9114),Fe=V(8003),Ue=V(7497),Je=function(){return this};ze.exports=function(nt,mt,Pt){var ot=mt+" Iterator";return nt.prototype=Ae(Oe,{next:De(1,Pt)}),Fe(nt,ot,!1,!0),Ue[ot]=Je,nt}},8880:function(ze,i,V){var Oe=V(9781),Ae=V(3070),De=V(9114);ze.exports=Oe?function(Fe,Ue,Je){return Ae.f(Fe,Ue,De(1,Je))}:function(Fe,Ue,Je){return Fe[Ue]=Je,Fe}},9114:function(ze){ze.exports=function(i,V){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:V}}},6135:function(ze,i,V){"use strict";var Oe=V(7593),Ae=V(3070),De=V(9114);ze.exports=function(Fe,Ue,Je){var nt=Oe(Ue);nt in Fe?Ae.f(Fe,nt,De(0,Je)):Fe[nt]=Je}},654:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(4994),De=V(9518),Fe=V(7674),Ue=V(8003),Je=V(8880),nt=V(1320),mt=V(5112),Pt=V(1913),ot=V(7497),gt=V(3383),wt=gt.IteratorPrototype,si=gt.BUGGY_SAFARI_ITERATORS,$e=mt("iterator"),oi="values",at="entries",ri=function(){return this};ze.exports=function(Xt,Vt,dt,Zt,ni,gi,Gi){Ae(dt,Vt,Zt);var Qt,Yi,on,vi=function(Zn){if(Zn===ni&&fn)return fn;if(!si&&Zn in Ji)return Ji[Zn];switch(Zn){case"keys":case oi:case at:return function(){return new dt(this,Zn)}}return function(){return new dt(this)}},Ei=Vt+" Iterator",Fi=!1,Ji=Xt.prototype,bn=Ji[$e]||Ji["@@iterator"]||ni&&Ji[ni],fn=!si&&bn||vi(ni),Gn="Array"==Vt&&Ji.entries||bn;if(Gn&&(Qt=De(Gn.call(new Xt)),wt!==Object.prototype&&Qt.next&&(!Pt&&De(Qt)!==wt&&(Fe?Fe(Qt,wt):"function"!=typeof Qt[$e]&&Je(Qt,$e,ri)),Ue(Qt,Ei,!0,!0),Pt&&(ot[Ei]=ri))),ni==oi&&bn&&bn.name!==oi&&(Fi=!0,fn=function(){return bn.call(this)}),(!Pt||Gi)&&Ji[$e]!==fn&&Je(Ji,$e,fn),ot[Vt]=fn,ni)if(Yi={values:vi(oi),keys:gi?fn:vi("keys"),entries:vi(at)},Gi)for(on in Yi)(si||Fi||!(on in Ji))&&nt(Ji,on,Yi[on]);else Oe({target:Vt,proto:!0,forced:si||Fi},Yi);return Yi}},9781:function(ze,i,V){var Oe=V(7293);ze.exports=!Oe(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(ze,i,V){var Oe=V(7854),Ae=V(111),De=Oe.document,Fe=Ae(De)&&Ae(De.createElement);ze.exports=function(Ue){return Fe?De.createElement(Ue):{}}},8324:function(ze){ze.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(ze,i,V){var Oe=V(5005);ze.exports=Oe("navigator","userAgent")||""},7392:function(ze,i,V){var Je,nt,Oe=V(7854),Ae=V(8113),De=Oe.process,Fe=De&&De.versions,Ue=Fe&&Fe.v8;Ue?nt=(Je=Ue.split("."))[0]+Je[1]:Ae&&(!(Je=Ae.match(/Edge\/(\d+)/))||Je[1]>=74)&&(Je=Ae.match(/Chrome\/(\d+)/))&&(nt=Je[1]),ze.exports=nt&&+nt},748:function(ze){ze.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(ze,i,V){var Oe=V(7854),Ae=V(1236).f,De=V(8880),Fe=V(1320),Ue=V(3505),Je=V(9920),nt=V(4705);ze.exports=function(mt,Pt){var $e,ii,oi,at,ri,ot=mt.target,gt=mt.global,wt=mt.stat;if($e=gt?Oe:wt?Oe[ot]||Ue(ot,{}):(Oe[ot]||{}).prototype)for(ii in Pt){if(at=Pt[ii],oi=mt.noTargetGet?(ri=Ae($e,ii))&&ri.value:$e[ii],!nt(gt?ii:ot+(wt?".":"#")+ii,mt.forced)&&void 0!==oi){if(typeof at==typeof oi)continue;Je(at,oi)}(mt.sham||oi&&oi.sham)&&De(at,"sham",!0),Fe($e,ii,at,mt)}}},7293:function(ze){ze.exports=function(i){try{return!!i()}catch{return!0}}},7007:function(ze,i,V){"use strict";V(4916);var Oe=V(1320),Ae=V(7293),De=V(5112),Fe=V(2261),Ue=V(8880),Je=De("species"),nt=!Ae(function(){var wt=/./;return wt.exec=function(){var si=[];return si.groups={a:"7"},si},"7"!=="".replace(wt,"$<a>")}),mt="$0"==="a".replace(/./,"$0"),Pt=De("replace"),ot=!!/./[Pt]&&""===/./[Pt]("a","$0"),gt=!Ae(function(){var wt=/(?:)/,si=wt.exec;wt.exec=function(){return si.apply(this,arguments)};var $e="ab".split(wt);return 2!==$e.length||"a"!==$e[0]||"b"!==$e[1]});ze.exports=function(wt,si,$e,ii){var oi=De(wt),at=!Ae(function(){var ni={};return ni[oi]=function(){return 7},7!=""[wt](ni)}),ri=at&&!Ae(function(){var ni=!1,gi=/a/;return"split"===wt&&((gi={}).constructor={},gi.constructor[Je]=function(){return gi},gi.flags="",gi[oi]=/./[oi]),gi.exec=function(){return ni=!0,null},gi[oi](""),!ni});if(!at||!ri||"replace"===wt&&(!nt||!mt||ot)||"split"===wt&&!gt){var Xt=/./[oi],Vt=$e(oi,""[wt],function(ni,gi,Gi,vi,Ei){return gi.exec===Fe?at&&!Ei?{done:!0,value:Xt.call(gi,Gi,vi)}:{done:!0,value:ni.call(Gi,gi,vi)}:{done:!1}},{REPLACE_KEEPS_$0:mt,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ot}),Zt=Vt[1];Oe(String.prototype,wt,Vt[0]),Oe(RegExp.prototype,oi,2==si?function(ni,gi){return Zt.call(ni,this,gi)}:function(ni){return Zt.call(ni,this)})}ii&&Ue(RegExp.prototype[oi],"sham",!0)}},9974:function(ze,i,V){var Oe=V(3099);ze.exports=function(Ae,De,Fe){if(Oe(Ae),void 0===De)return Ae;switch(Fe){case 0:return function(){return Ae.call(De)};case 1:return function(Ue){return Ae.call(De,Ue)};case 2:return function(Ue,Je){return Ae.call(De,Ue,Je)};case 3:return function(Ue,Je,nt){return Ae.call(De,Ue,Je,nt)}}return function(){return Ae.apply(De,arguments)}}},5005:function(ze,i,V){var Oe=V(857),Ae=V(7854),De=function(Fe){return"function"==typeof Fe?Fe:void 0};ze.exports=function(Fe,Ue){return arguments.length<2?De(Oe[Fe])||De(Ae[Fe]):Oe[Fe]&&Oe[Fe][Ue]||Ae[Fe]&&Ae[Fe][Ue]}},1246:function(ze,i,V){var Oe=V(648),Ae=V(7497),Fe=V(5112)("iterator");ze.exports=function(Ue){if(null!=Ue)return Ue[Fe]||Ue["@@iterator"]||Ae[Oe(Ue)]}},8554:function(ze,i,V){var Oe=V(9670),Ae=V(1246);ze.exports=function(De){var Fe=Ae(De);if("function"!=typeof Fe)throw TypeError(String(De)+" is not iterable");return Oe(Fe.call(De))}},647:function(ze,i,V){var Oe=V(7908),Ae=Math.floor,De="".replace,Fe=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ue=/\$([$&'`]|\d\d?)/g;ze.exports=function(Je,nt,mt,Pt,ot,gt){var wt=mt+Je.length,si=Pt.length,$e=Ue;return void 0!==ot&&(ot=Oe(ot),$e=Fe),De.call(gt,$e,function(ii,oi){var at;switch(oi.charAt(0)){case"$":return"$";case"&":return Je;case"`":return nt.slice(0,mt);case"'":return nt.slice(wt);case"<":at=ot[oi.slice(1,-1)];break;default:var ri=+oi;if(0===ri)return ii;if(ri>si){var Xt=Ae(ri/10);return 0===Xt?ii:Xt<=si?void 0===Pt[Xt-1]?oi.charAt(1):Pt[Xt-1]+oi.charAt(1):ii}at=Pt[ri-1]}return void 0===at?"":at})}},7854:function(ze,i,V){var Oe=function(Ae){return Ae&&Ae.Math==Math&&Ae};ze.exports=Oe("object"==typeof globalThis&&globalThis)||Oe("object"==typeof window&&window)||Oe("object"==typeof self&&self)||Oe("object"==typeof V.g&&V.g)||function(){return this}()||Function("return this")()},6656:function(ze){var i={}.hasOwnProperty;ze.exports=function(V,Oe){return i.call(V,Oe)}},3501:function(ze){ze.exports={}},490:function(ze,i,V){var Oe=V(5005);ze.exports=Oe("document","documentElement")},4664:function(ze,i,V){var Oe=V(9781),Ae=V(7293),De=V(317);ze.exports=!Oe&&!Ae(function(){return 7!=Object.defineProperty(De("div"),"a",{get:function(){return 7}}).a})},1179:function(ze){var i=Math.abs,V=Math.pow,Oe=Math.floor,Ae=Math.log,De=Math.LN2;ze.exports={pack:function(Je,nt,mt){var oi,at,ri,Pt=new Array(mt),ot=8*mt-nt-1,gt=(1<<ot)-1,wt=gt>>1,si=23===nt?V(2,-24)-V(2,-77):0,$e=Je<0||0===Je&&1/Je<0?1:0,ii=0;for((Je=i(Je))!=Je||Je===1/0?(at=Je!=Je?1:0,oi=gt):(oi=Oe(Ae(Je)/De),Je*(ri=V(2,-oi))<1&&(oi--,ri*=2),(Je+=oi+wt>=1?si/ri:si*V(2,1-wt))*ri>=2&&(oi++,ri/=2),oi+wt>=gt?(at=0,oi=gt):oi+wt>=1?(at=(Je*ri-1)*V(2,nt),oi+=wt):(at=Je*V(2,wt-1)*V(2,nt),oi=0));nt>=8;Pt[ii++]=255&at,at/=256,nt-=8);for(oi=oi<<nt|at,ot+=nt;ot>0;Pt[ii++]=255&oi,oi/=256,ot-=8);return Pt[--ii]|=128*$e,Pt},unpack:function(Je,nt){var oi,mt=Je.length,Pt=8*mt-nt-1,ot=(1<<Pt)-1,gt=ot>>1,wt=Pt-7,si=mt-1,$e=Je[si--],ii=127&$e;for($e>>=7;wt>0;ii=256*ii+Je[si],si--,wt-=8);for(oi=ii&(1<<-wt)-1,ii>>=-wt,wt+=nt;wt>0;oi=256*oi+Je[si],si--,wt-=8);if(0===ii)ii=1-gt;else{if(ii===ot)return oi?NaN:$e?-1/0:1/0;oi+=V(2,nt),ii-=gt}return($e?-1:1)*oi*V(2,ii-nt)}}},8361:function(ze,i,V){var Oe=V(7293),Ae=V(4326),De="".split;ze.exports=Oe(function(){return!Object("z").propertyIsEnumerable(0)})?function(Fe){return"String"==Ae(Fe)?De.call(Fe,""):Object(Fe)}:Object},9587:function(ze,i,V){var Oe=V(111),Ae=V(7674);ze.exports=function(De,Fe,Ue){var Je,nt;return Ae&&"function"==typeof(Je=Fe.constructor)&&Je!==Ue&&Oe(nt=Je.prototype)&&nt!==Ue.prototype&&Ae(De,nt),De}},2788:function(ze,i,V){var Oe=V(5465),Ae=Function.toString;"function"!=typeof Oe.inspectSource&&(Oe.inspectSource=function(De){return Ae.call(De)}),ze.exports=Oe.inspectSource},9909:function(ze,i,V){var ot,gt,wt,Oe=V(8536),Ae=V(7854),De=V(111),Fe=V(8880),Ue=V(6656),Je=V(5465),nt=V(6200),mt=V(3501);if(Oe){var ii=Je.state||(Je.state=new(0,Ae.WeakMap)),oi=ii.get,at=ii.has,ri=ii.set;ot=function(Vt,dt){return dt.facade=Vt,ri.call(ii,Vt,dt),dt},gt=function(Vt){return oi.call(ii,Vt)||{}},wt=function(Vt){return at.call(ii,Vt)}}else{var Xt=nt("state");mt[Xt]=!0,ot=function(Vt,dt){return dt.facade=Vt,Fe(Vt,Xt,dt),dt},gt=function(Vt){return Ue(Vt,Xt)?Vt[Xt]:{}},wt=function(Vt){return Ue(Vt,Xt)}}ze.exports={set:ot,get:gt,has:wt,enforce:function(Vt){return wt(Vt)?gt(Vt):ot(Vt,{})},getterFor:function(Vt){return function(dt){var Zt;if(!De(dt)||(Zt=gt(dt)).type!==Vt)throw TypeError("Incompatible receiver, "+Vt+" required");return Zt}}}},7659:function(ze,i,V){var Oe=V(5112),Ae=V(7497),De=Oe("iterator"),Fe=Array.prototype;ze.exports=function(Ue){return void 0!==Ue&&(Ae.Array===Ue||Fe[De]===Ue)}},3157:function(ze,i,V){var Oe=V(4326);ze.exports=Array.isArray||function(De){return"Array"==Oe(De)}},4705:function(ze,i,V){var Oe=V(7293),Ae=/#|\.prototype\./,De=function(mt,Pt){var ot=Ue[Fe(mt)];return ot==nt||ot!=Je&&("function"==typeof Pt?Oe(Pt):!!Pt)},Fe=De.normalize=function(mt){return String(mt).replace(Ae,".").toLowerCase()},Ue=De.data={},Je=De.NATIVE="N",nt=De.POLYFILL="P";ze.exports=De},111:function(ze){ze.exports=function(i){return"object"==typeof i?null!==i:"function"==typeof i}},1913:function(ze){ze.exports=!1},7850:function(ze,i,V){var Oe=V(111),Ae=V(4326),Fe=V(5112)("match");ze.exports=function(Ue){var Je;return Oe(Ue)&&(void 0!==(Je=Ue[Fe])?!!Je:"RegExp"==Ae(Ue))}},9212:function(ze,i,V){var Oe=V(9670);ze.exports=function(Ae){var De=Ae.return;if(void 0!==De)return Oe(De.call(Ae)).value}},3383:function(ze,i,V){"use strict";var ot,gt,wt,Oe=V(7293),Ae=V(9518),De=V(8880),Fe=V(6656),Ue=V(5112),Je=V(1913),nt=Ue("iterator"),mt=!1;[].keys&&("next"in(wt=[].keys())?(gt=Ae(Ae(wt)))!==Object.prototype&&(ot=gt):mt=!0);var si=null==ot||Oe(function(){var $e={};return ot[nt].call($e)!==$e});si&&(ot={}),(!Je||si)&&!Fe(ot,nt)&&De(ot,nt,function(){return this}),ze.exports={IteratorPrototype:ot,BUGGY_SAFARI_ITERATORS:mt}},7497:function(ze){ze.exports={}},133:function(ze,i,V){var Oe=V(7293);ze.exports=!!Object.getOwnPropertySymbols&&!Oe(function(){return!String(Symbol())})},590:function(ze,i,V){var Oe=V(7293),Ae=V(5112),De=V(1913),Fe=Ae("iterator");ze.exports=!Oe(function(){var Ue=new URL("b?a=1&b=2&c=3","http://a"),Je=Ue.searchParams,nt="";return Ue.pathname="c%20d",Je.forEach(function(mt,Pt){Je.delete("b"),nt+=Pt+mt}),De&&!Ue.toJSON||!Je.sort||"http://a/c%20d?a=1&c=3"!==Ue.href||"3"!==Je.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!Je[Fe]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==nt||"x"!==new URL("http://x",void 0).host})},8536:function(ze,i,V){var Oe=V(7854),Ae=V(2788),De=Oe.WeakMap;ze.exports="function"==typeof De&&/native code/.test(Ae(De))},1574:function(ze,i,V){"use strict";var Oe=V(9781),Ae=V(7293),De=V(1956),Fe=V(5181),Ue=V(5296),Je=V(7908),nt=V(8361),mt=Object.assign,Pt=Object.defineProperty;ze.exports=!mt||Ae(function(){if(Oe&&1!==mt({b:1},mt(Pt({},"a",{enumerable:!0,get:function(){Pt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var ot={},gt={},wt=Symbol(),si="abcdefghijklmnopqrst";return ot[wt]=7,si.split("").forEach(function($e){gt[$e]=$e}),7!=mt({},ot)[wt]||De(mt({},gt)).join("")!=si})?function(gt,wt){for(var si=Je(gt),$e=arguments.length,ii=1,oi=Fe.f,at=Ue.f;$e>ii;)for(var Zt,ri=nt(arguments[ii++]),Xt=oi?De(ri).concat(oi(ri)):De(ri),Vt=Xt.length,dt=0;Vt>dt;)Zt=Xt[dt++],(!Oe||at.call(ri,Zt))&&(si[Zt]=ri[Zt]);return si}:mt},30:function(ze,i,V){var at,Oe=V(9670),Ae=V(6048),De=V(748),Fe=V(3501),Ue=V(490),Je=V(317),nt=V(6200),ot="prototype",gt="script",wt=nt("IE_PROTO"),si=function(){},$e=function(Xt){return"<script>"+Xt+"</"+gt+">"},ri=function(){try{at=document.domain&&new ActiveXObject("htmlfile")}catch{}ri=at?function(Xt){Xt.write($e("")),Xt.close();var Vt=Xt.parentWindow.Object;return Xt=null,Vt}(at):function(){var dt,Xt=Je("iframe");return Xt.style.display="none",Ue.appendChild(Xt),Xt.src=String("javascript:"),(dt=Xt.contentWindow.document).open(),dt.write($e("document.F=Object")),dt.close(),dt.F}();for(var Xt=De.length;Xt--;)delete ri[ot][De[Xt]];return ri()};Fe[wt]=!0,ze.exports=Object.create||function(Vt,dt){var Zt;return null!==Vt?(si[ot]=Oe(Vt),Zt=new si,si[ot]=null,Zt[wt]=Vt):Zt=ri(),void 0===dt?Zt:Ae(Zt,dt)}},6048:function(ze,i,V){var Oe=V(9781),Ae=V(3070),De=V(9670),Fe=V(1956);ze.exports=Oe?Object.defineProperties:function(Je,nt){De(Je);for(var gt,mt=Fe(nt),Pt=mt.length,ot=0;Pt>ot;)Ae.f(Je,gt=mt[ot++],nt[gt]);return Je}},3070:function(ze,i,V){var Oe=V(9781),Ae=V(4664),De=V(9670),Fe=V(7593),Ue=Object.defineProperty;i.f=Oe?Ue:function(nt,mt,Pt){if(De(nt),mt=Fe(mt,!0),De(Pt),Ae)try{return Ue(nt,mt,Pt)}catch{}if("get"in Pt||"set"in Pt)throw TypeError("Accessors not supported");return"value"in Pt&&(nt[mt]=Pt.value),nt}},1236:function(ze,i,V){var Oe=V(9781),Ae=V(5296),De=V(9114),Fe=V(5656),Ue=V(7593),Je=V(6656),nt=V(4664),mt=Object.getOwnPropertyDescriptor;i.f=Oe?mt:function(ot,gt){if(ot=Fe(ot),gt=Ue(gt,!0),nt)try{return mt(ot,gt)}catch{}if(Je(ot,gt))return De(!Ae.f.call(ot,gt),ot[gt])}},8006:function(ze,i,V){var Oe=V(6324),De=V(748).concat("length","prototype");i.f=Object.getOwnPropertyNames||function(Ue){return Oe(Ue,De)}},5181:function(ze,i){i.f=Object.getOwnPropertySymbols},9518:function(ze,i,V){var Oe=V(6656),Ae=V(7908),De=V(6200),Fe=V(8544),Ue=De("IE_PROTO"),Je=Object.prototype;ze.exports=Fe?Object.getPrototypeOf:function(nt){return nt=Ae(nt),Oe(nt,Ue)?nt[Ue]:"function"==typeof nt.constructor&&nt instanceof nt.constructor?nt.constructor.prototype:nt instanceof Object?Je:null}},6324:function(ze,i,V){var Oe=V(6656),Ae=V(5656),De=V(1318).indexOf,Fe=V(3501);ze.exports=function(Ue,Je){var ot,nt=Ae(Ue),mt=0,Pt=[];for(ot in nt)!Oe(Fe,ot)&&Oe(nt,ot)&&Pt.push(ot);for(;Je.length>mt;)Oe(nt,ot=Je[mt++])&&(~De(Pt,ot)||Pt.push(ot));return Pt}},1956:function(ze,i,V){var Oe=V(6324),Ae=V(748);ze.exports=Object.keys||function(Fe){return Oe(Fe,Ae)}},5296:function(ze,i){"use strict";var V={}.propertyIsEnumerable,Oe=Object.getOwnPropertyDescriptor,Ae=Oe&&!V.call({1:2},1);i.f=Ae?function(Fe){var Ue=Oe(this,Fe);return!!Ue&&Ue.enumerable}:V},7674:function(ze,i,V){var Oe=V(9670),Ae=V(6077);ze.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var Ue,De=!1,Fe={};try{(Ue=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(Fe,[]),De=Fe instanceof Array}catch{}return function(nt,mt){return Oe(nt),Ae(mt),De?Ue.call(nt,mt):nt.__proto__=mt,nt}}():void 0)},288:function(ze,i,V){"use strict";var Oe=V(1694),Ae=V(648);ze.exports=Oe?{}.toString:function(){return"[object "+Ae(this)+"]"}},3887:function(ze,i,V){var Oe=V(5005),Ae=V(8006),De=V(5181),Fe=V(9670);ze.exports=Oe("Reflect","ownKeys")||function(Je){var nt=Ae.f(Fe(Je)),mt=De.f;return mt?nt.concat(mt(Je)):nt}},857:function(ze,i,V){var Oe=V(7854);ze.exports=Oe},2248:function(ze,i,V){var Oe=V(1320);ze.exports=function(Ae,De,Fe){for(var Ue in De)Oe(Ae,Ue,De[Ue],Fe);return Ae}},1320:function(ze,i,V){var Oe=V(7854),Ae=V(8880),De=V(6656),Fe=V(3505),Ue=V(2788),Je=V(9909),nt=Je.get,mt=Je.enforce,Pt=String(String).split("String");(ze.exports=function(ot,gt,wt,si){var at,$e=!!si&&!!si.unsafe,ii=!!si&&!!si.enumerable,oi=!!si&&!!si.noTargetGet;"function"==typeof wt&&("string"==typeof gt&&!De(wt,"name")&&Ae(wt,"name",gt),(at=mt(wt)).source||(at.source=Pt.join("string"==typeof gt?gt:""))),ot!==Oe?($e?!oi&&ot[gt]&&(ii=!0):delete ot[gt],ii?ot[gt]=wt:Ae(ot,gt,wt)):ii?ot[gt]=wt:Fe(gt,wt)})(Function.prototype,"toString",function(){return"function"==typeof this&&nt(this).source||Ue(this)})},7651:function(ze,i,V){var Oe=V(4326),Ae=V(2261);ze.exports=function(De,Fe){var Ue=De.exec;if("function"==typeof Ue){var Je=Ue.call(De,Fe);if("object"!=typeof Je)throw TypeError("RegExp exec method returned something other than an Object or null");return Je}if("RegExp"!==Oe(De))throw TypeError("RegExp#exec called on incompatible receiver");return Ae.call(De,Fe)}},2261:function(ze,i,V){"use strict";var ot,gt,Oe=V(7066),Ae=V(2999),De=RegExp.prototype.exec,Fe=String.prototype.replace,Ue=De,Je=(gt=/b*/g,De.call(ot=/a/,"a"),De.call(gt,"a"),0!==ot.lastIndex||0!==gt.lastIndex),nt=Ae.UNSUPPORTED_Y||Ae.BROKEN_CARET,mt=void 0!==/()??/.exec("")[1];(Je||mt||nt)&&(Ue=function(gt){var si,$e,ii,oi,wt=this,at=nt&&wt.sticky,ri=Oe.call(wt),Xt=wt.source,Vt=0,dt=gt;return at&&(-1===(ri=ri.replace("y","")).indexOf("g")&&(ri+="g"),dt=String(gt).slice(wt.lastIndex),wt.lastIndex>0&&(!wt.multiline||wt.multiline&&"\n"!==gt[wt.lastIndex-1])&&(Xt="(?: "+Xt+")",dt=" "+dt,Vt++),$e=new RegExp("^(?:"+Xt+")",ri)),mt&&($e=new RegExp("^"+Xt+"$(?!\\s)",ri)),Je&&(si=wt.lastIndex),ii=De.call(at?$e:wt,dt),at?ii?(ii.input=ii.input.slice(Vt),ii[0]=ii[0].slice(Vt),ii.index=wt.lastIndex,wt.lastIndex+=ii[0].length):wt.lastIndex=0:Je&&ii&&(wt.lastIndex=wt.global?ii.index+ii[0].length:si),mt&&ii&&ii.length>1&&Fe.call(ii[0],$e,function(){for(oi=1;oi<arguments.length-2;oi++)void 0===arguments[oi]&&(ii[oi]=void 0)}),ii}),ze.exports=Ue},7066:function(ze,i,V){"use strict";var Oe=V(9670);ze.exports=function(){var Ae=Oe(this),De="";return Ae.global&&(De+="g"),Ae.ignoreCase&&(De+="i"),Ae.multiline&&(De+="m"),Ae.dotAll&&(De+="s"),Ae.unicode&&(De+="u"),Ae.sticky&&(De+="y"),De}},2999:function(ze,i,V){"use strict";var Oe=V(7293);function Ae(De,Fe){return RegExp(De,Fe)}i.UNSUPPORTED_Y=Oe(function(){var De=Ae("a","y");return De.lastIndex=2,null!=De.exec("abcd")}),i.BROKEN_CARET=Oe(function(){var De=Ae("^r","gy");return De.lastIndex=2,null!=De.exec("str")})},4488:function(ze){ze.exports=function(i){if(null==i)throw TypeError("Can't call method on "+i);return i}},3505:function(ze,i,V){var Oe=V(7854),Ae=V(8880);ze.exports=function(De,Fe){try{Ae(Oe,De,Fe)}catch{Oe[De]=Fe}return Fe}},6340:function(ze,i,V){"use strict";var Oe=V(5005),Ae=V(3070),De=V(5112),Fe=V(9781),Ue=De("species");ze.exports=function(Je){var nt=Oe(Je);Fe&&nt&&!nt[Ue]&&(0,Ae.f)(nt,Ue,{configurable:!0,get:function(){return this}})}},8003:function(ze,i,V){var Oe=V(3070).f,Ae=V(6656),Fe=V(5112)("toStringTag");ze.exports=function(Ue,Je,nt){Ue&&!Ae(Ue=nt?Ue:Ue.prototype,Fe)&&Oe(Ue,Fe,{configurable:!0,value:Je})}},6200:function(ze,i,V){var Oe=V(2309),Ae=V(9711),De=Oe("keys");ze.exports=function(Fe){return De[Fe]||(De[Fe]=Ae(Fe))}},5465:function(ze,i,V){var Oe=V(7854),Ae=V(3505),De="__core-js_shared__",Fe=Oe[De]||Ae(De,{});ze.exports=Fe},2309:function(ze,i,V){var Oe=V(1913),Ae=V(5465);(ze.exports=function(De,Fe){return Ae[De]||(Ae[De]=void 0!==Fe?Fe:{})})("versions",[]).push({version:"3.9.0",mode:Oe?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(ze,i,V){var Oe=V(9670),Ae=V(3099),Fe=V(5112)("species");ze.exports=function(Ue,Je){var mt,nt=Oe(Ue).constructor;return void 0===nt||null==(mt=Oe(nt)[Fe])?Je:Ae(mt)}},8710:function(ze,i,V){var Oe=V(9958),Ae=V(4488),De=function(Fe){return function(Ue,Je){var ot,gt,nt=String(Ae(Ue)),mt=Oe(Je),Pt=nt.length;return mt<0||mt>=Pt?Fe?"":void 0:(ot=nt.charCodeAt(mt))<55296||ot>56319||mt+1===Pt||(gt=nt.charCodeAt(mt+1))<56320||gt>57343?Fe?nt.charAt(mt):ot:Fe?nt.slice(mt,mt+2):gt-56320+(ot-55296<<10)+65536}};ze.exports={codeAt:De(!1),charAt:De(!0)}},3197:function(ze){"use strict";var i=2147483647,mt=/[^\0-\u007E]/,Pt=/[.\u3002\uFF0E\uFF61]/g,ot="Overflow: input needs wider integers to process",wt=Math.floor,si=String.fromCharCode,ii=function(ri){return ri+22+75*(ri<26)},oi=function(ri,Xt,Vt){var dt=0;for(ri=Vt?wt(ri/700):ri>>1,ri+=wt(ri/Xt);ri>455;dt+=36)ri=wt(ri/35);return wt(dt+36*ri/(ri+38))},at=function(ri){var gi,Gi,Xt=[],Vt=(ri=function(ri){for(var Xt=[],Vt=0,dt=ri.length;Vt<dt;){var Zt=ri.charCodeAt(Vt++);if(Zt>=55296&&Zt<=56319&&Vt<dt){var ni=ri.charCodeAt(Vt++);56320==(64512&ni)?Xt.push(((1023&Zt)<<10)+(1023&ni)+65536):(Xt.push(Zt),Vt--)}else Xt.push(Zt)}return Xt}(ri)).length,dt=128,Zt=0,ni=72;for(gi=0;gi<ri.length;gi++)(Gi=ri[gi])<128&&Xt.push(si(Gi));var vi=Xt.length,Ei=vi;for(vi&&Xt.push("-");Ei<Vt;){var Fi=i;for(gi=0;gi<ri.length;gi++)(Gi=ri[gi])>=dt&&Gi<Fi&&(Fi=Gi);var Ji=Ei+1;if(Fi-dt>wt((i-Zt)/Ji))throw RangeError(ot);for(Zt+=(Fi-dt)*Ji,dt=Fi,gi=0;gi<ri.length;gi++){if((Gi=ri[gi])<dt&&++Zt>i)throw RangeError(ot);if(Gi==dt){for(var bn=Zt,fn=36;;fn+=36){var Gn=fn<=ni?1:fn>=ni+26?26:fn-ni;if(bn<Gn)break;var Qt=bn-Gn,Yi=36-Gn;Xt.push(si(ii(Gn+Qt%Yi))),bn=wt(Qt/Yi)}Xt.push(si(ii(bn))),ni=oi(Zt,Ji,Ei==vi),Zt=0,++Ei}}++Zt,++dt}return Xt.join("")};ze.exports=function(ri){var dt,Zt,Xt=[],Vt=ri.toLowerCase().replace(Pt,".").split(".");for(dt=0;dt<Vt.length;dt++)Xt.push(mt.test(Zt=Vt[dt])?"xn--"+at(Zt):Zt);return Xt.join(".")}},6091:function(ze,i,V){var Oe=V(7293),Ae=V(1361);ze.exports=function(Fe){return Oe(function(){return!!Ae[Fe]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[Fe]()||Ae[Fe].name!==Fe})}},3111:function(ze,i,V){var Oe=V(4488),De="["+V(1361)+"]",Fe=RegExp("^"+De+De+"*"),Ue=RegExp(De+De+"*$"),Je=function(nt){return function(mt){var Pt=String(Oe(mt));return 1&nt&&(Pt=Pt.replace(Fe,"")),2&nt&&(Pt=Pt.replace(Ue,"")),Pt}};ze.exports={start:Je(1),end:Je(2),trim:Je(3)}},1400:function(ze,i,V){var Oe=V(9958),Ae=Math.max,De=Math.min;ze.exports=function(Fe,Ue){var Je=Oe(Fe);return Je<0?Ae(Je+Ue,0):De(Je,Ue)}},7067:function(ze,i,V){var Oe=V(9958),Ae=V(7466);ze.exports=function(De){if(void 0===De)return 0;var Fe=Oe(De),Ue=Ae(Fe);if(Fe!==Ue)throw RangeError("Wrong length or index");return Ue}},5656:function(ze,i,V){var Oe=V(8361),Ae=V(4488);ze.exports=function(De){return Oe(Ae(De))}},9958:function(ze){var i=Math.ceil,V=Math.floor;ze.exports=function(Oe){return isNaN(Oe=+Oe)?0:(Oe>0?V:i)(Oe)}},7466:function(ze,i,V){var Oe=V(9958),Ae=Math.min;ze.exports=function(De){return De>0?Ae(Oe(De),9007199254740991):0}},7908:function(ze,i,V){var Oe=V(4488);ze.exports=function(Ae){return Object(Oe(Ae))}},4590:function(ze,i,V){var Oe=V(3002);ze.exports=function(Ae,De){var Fe=Oe(Ae);if(Fe%De)throw RangeError("Wrong offset");return Fe}},3002:function(ze,i,V){var Oe=V(9958);ze.exports=function(Ae){var De=Oe(Ae);if(De<0)throw RangeError("The argument can't be less than 0");return De}},7593:function(ze,i,V){var Oe=V(111);ze.exports=function(Ae,De){if(!Oe(Ae))return Ae;var Fe,Ue;if(De&&"function"==typeof(Fe=Ae.toString)&&!Oe(Ue=Fe.call(Ae))||"function"==typeof(Fe=Ae.valueOf)&&!Oe(Ue=Fe.call(Ae))||!De&&"function"==typeof(Fe=Ae.toString)&&!Oe(Ue=Fe.call(Ae)))return Ue;throw TypeError("Can't convert object to primitive value")}},1694:function(ze,i,V){var De={};De[V(5112)("toStringTag")]="z",ze.exports="[object z]"===String(De)},9843:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(7854),De=V(9781),Fe=V(3832),Ue=V(260),Je=V(3331),nt=V(5787),mt=V(9114),Pt=V(8880),ot=V(7466),gt=V(7067),wt=V(4590),si=V(7593),$e=V(6656),ii=V(648),oi=V(111),at=V(30),ri=V(7674),Xt=V(8006).f,Vt=V(7321),dt=V(2092).forEach,Zt=V(6340),ni=V(3070),gi=V(1236),Gi=V(9909),vi=V(9587),Ei=Gi.get,Fi=Gi.set,Ji=ni.f,bn=gi.f,fn=Math.round,Gn=Ae.RangeError,Qt=Je.ArrayBuffer,Yi=Je.DataView,on=Ue.NATIVE_ARRAY_BUFFER_VIEWS,Zn=Ue.TYPED_ARRAY_TAG,Nn=Ue.TypedArray,Dn=Ue.TypedArrayPrototype,ji=Ue.aTypedArrayConstructor,Mr=Ue.isTypedArray,or="BYTES_PER_ELEMENT",gr="Wrong length",xn=function(tn,Si){for(var mn=0,Pn=Si.length,Lr=new(ji(tn))(Pn);Pn>mn;)Lr[mn]=Si[mn++];return Lr},en=function(tn,Si){Ji(tn,Si,{get:function(){return Ei(this)[Si]}})},_n=function(tn){var Si;return tn instanceof Qt||"ArrayBuffer"==(Si=ii(tn))||"SharedArrayBuffer"==Si},Zi=function(tn,Si){return Mr(tn)&&"symbol"!=typeof Si&&Si in tn&&String(+Si)==String(Si)},Ui=function(Si,mn){return Zi(Si,mn=si(mn,!0))?mt(2,Si[mn]):bn(Si,mn)},jn=function(Si,mn,Pn){return!(Zi(Si,mn=si(mn,!0))&&oi(Pn)&&$e(Pn,"value"))||$e(Pn,"get")||$e(Pn,"set")||Pn.configurable||$e(Pn,"writable")&&!Pn.writable||$e(Pn,"enumerable")&&!Pn.enumerable?Ji(Si,mn,Pn):(Si[mn]=Pn.value,Si)};De?(on||(gi.f=Ui,ni.f=jn,en(Dn,"buffer"),en(Dn,"byteOffset"),en(Dn,"byteLength"),en(Dn,"length")),Oe({target:"Object",stat:!0,forced:!on},{getOwnPropertyDescriptor:Ui,defineProperty:jn}),ze.exports=function(tn,Si,mn){var Pn=tn.match(/\d+$/)[0]/8,Lr=tn+(mn?"Clamped":"")+"Array",Or="get"+tn,Sr="set"+tn,vr=Ae[Lr],ar=vr,kn=ar&&ar.prototype,dr={},er=function(br,mr){Ji(br,mr,{get:function(){return function(br,mr){var Tr=Ei(br);return Tr.view[Or](mr*Pn+Tr.byteOffset,!0)}(this,mr)},set:function(Tr){return function(br,mr,Tr){var Xr=Ei(br);mn&&(Tr=(Tr=fn(Tr))<0?0:Tr>255?255:255&Tr),Xr.view[Sr](mr*Pn+Xr.byteOffset,Tr,!0)}(this,mr,Tr)},enumerable:!0})};on?Fe&&(ar=Si(function(br,mr,Tr,Xr){return nt(br,ar,Lr),vi(oi(mr)?_n(mr)?void 0!==Xr?new vr(mr,wt(Tr,Pn),Xr):void 0!==Tr?new vr(mr,wt(Tr,Pn)):new vr(mr):Mr(mr)?xn(ar,mr):Vt.call(ar,mr):new vr(gt(mr)),br,ar)}),ri&&ri(ar,Nn),dt(Xt(vr),function(br){br in ar||Pt(ar,br,vr[br])}),ar.prototype=kn):(ar=Si(function(br,mr,Tr,Xr){nt(br,ar,Lr);var Be,ct,lt,Ct=0,Ie=0;if(oi(mr)){if(!_n(mr))return Mr(mr)?xn(ar,mr):Vt.call(ar,mr);Be=mr,Ie=wt(Tr,Pn);var zt=mr.byteLength;if(void 0===Xr){if(zt%Pn||(ct=zt-Ie)<0)throw Gn(gr)}else if((ct=ot(Xr)*Pn)+Ie>zt)throw Gn(gr);lt=ct/Pn}else lt=gt(mr),Be=new Qt(ct=lt*Pn);for(Fi(br,{buffer:Be,byteOffset:Ie,byteLength:ct,length:lt,view:new Yi(Be)});Ct<lt;)er(br,Ct++)}),ri&&ri(ar,Nn),kn=ar.prototype=at(Dn)),kn.constructor!==ar&&Pt(kn,"constructor",ar),Zn&&Pt(kn,Zn,Lr),dr[Lr]=ar,Oe({global:!0,forced:ar!=vr,sham:!on},dr),or in ar||Pt(ar,or,Pn),or in kn||Pt(kn,or,Pn),Zt(Lr)}):ze.exports=function(){}},3832:function(ze,i,V){var Oe=V(7854),Ae=V(7293),De=V(7072),Fe=V(260).NATIVE_ARRAY_BUFFER_VIEWS,Ue=Oe.ArrayBuffer,Je=Oe.Int8Array;ze.exports=!Fe||!Ae(function(){Je(1)})||!Ae(function(){new Je(-1)})||!De(function(nt){new Je,new Je(null),new Je(1.5),new Je(nt)},!0)||Ae(function(){return 1!==new Je(new Ue(2),1,void 0).length})},3074:function(ze,i,V){var Oe=V(260).aTypedArrayConstructor,Ae=V(6707);ze.exports=function(De,Fe){for(var Ue=Ae(De,De.constructor),Je=0,nt=Fe.length,mt=new(Oe(Ue))(nt);nt>Je;)mt[Je]=Fe[Je++];return mt}},7321:function(ze,i,V){var Oe=V(7908),Ae=V(7466),De=V(1246),Fe=V(7659),Ue=V(9974),Je=V(260).aTypedArrayConstructor;ze.exports=function(mt){var $e,ii,oi,at,ri,Xt,Pt=Oe(mt),ot=arguments.length,gt=ot>1?arguments[1]:void 0,wt=void 0!==gt,si=De(Pt);if(null!=si&&!Fe(si))for(Xt=(ri=si.call(Pt)).next,Pt=[];!(at=Xt.call(ri)).done;)Pt.push(at.value);for(wt&&ot>2&&(gt=Ue(gt,arguments[2],2)),ii=Ae(Pt.length),oi=new(Je(this))(ii),$e=0;ii>$e;$e++)oi[$e]=wt?gt(Pt[$e],$e):Pt[$e];return oi}},9711:function(ze){var i=0,V=Math.random();ze.exports=function(Oe){return"Symbol("+String(void 0===Oe?"":Oe)+")_"+(++i+V).toString(36)}},3307:function(ze,i,V){var Oe=V(133);ze.exports=Oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(ze,i,V){var Oe=V(7854),Ae=V(2309),De=V(6656),Fe=V(9711),Ue=V(133),Je=V(3307),nt=Ae("wks"),mt=Oe.Symbol,Pt=Je?mt:mt&&mt.withoutSetter||Fe;ze.exports=function(ot){return De(nt,ot)||(nt[ot]=Ue&&De(mt,ot)?mt[ot]:Pt("Symbol."+ot)),nt[ot]}},1361:function(ze){ze.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(7854),De=V(3331),Fe=V(6340),Ue="ArrayBuffer",Je=De[Ue];Oe({global:!0,forced:Ae[Ue]!==Je},{ArrayBuffer:Je}),Fe(Ue)},2222:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(7293),De=V(3157),Fe=V(111),Ue=V(7908),Je=V(7466),nt=V(6135),mt=V(5417),Pt=V(1194),ot=V(5112),gt=V(7392),wt=ot("isConcatSpreadable"),si=9007199254740991,$e="Maximum allowed index exceeded",ii=gt>=51||!Ae(function(){var Xt=[];return Xt[wt]=!1,Xt.concat()[0]!==Xt}),oi=Pt("concat"),at=function(Xt){if(!Fe(Xt))return!1;var Vt=Xt[wt];return void 0!==Vt?!!Vt:De(Xt)};Oe({target:"Array",proto:!0,forced:!ii||!oi},{concat:function(Vt){var gi,Gi,vi,Ei,Fi,dt=Ue(this),Zt=mt(dt,0),ni=0;for(gi=-1,vi=arguments.length;gi<vi;gi++)if(at(Fi=-1===gi?dt:arguments[gi])){if(ni+(Ei=Je(Fi.length))>si)throw TypeError($e);for(Gi=0;Gi<Ei;Gi++,ni++)Gi in Fi&&nt(Zt,ni,Fi[Gi])}else{if(ni>=si)throw TypeError($e);nt(Zt,ni++,Fi)}return Zt.length=ni,Zt}})},7327:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(2092).filter;Oe({target:"Array",proto:!0,forced:!V(1194)("filter")},{filter:function(Je){return Ae(this,Je,arguments.length>1?arguments[1]:void 0)}})},2772:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(1318).indexOf,De=V(9341),Fe=[].indexOf,Ue=!!Fe&&1/[1].indexOf(1,-0)<0,Je=De("indexOf");Oe({target:"Array",proto:!0,forced:Ue||!Je},{indexOf:function(mt){return Ue?Fe.apply(this,arguments)||0:Ae(this,mt,arguments.length>1?arguments[1]:void 0)}})},6992:function(ze,i,V){"use strict";var Oe=V(5656),Ae=V(1223),De=V(7497),Fe=V(9909),Ue=V(654),Je="Array Iterator",nt=Fe.set,mt=Fe.getterFor(Je);ze.exports=Ue(Array,"Array",function(Pt,ot){nt(this,{type:Je,target:Oe(Pt),index:0,kind:ot})},function(){var Pt=mt(this),ot=Pt.target,gt=Pt.kind,wt=Pt.index++;return!ot||wt>=ot.length?(Pt.target=void 0,{value:void 0,done:!0}):"keys"==gt?{value:wt,done:!1}:"values"==gt?{value:ot[wt],done:!1}:{value:[wt,ot[wt]],done:!1}},"values"),De.Arguments=De.Array,Ae("keys"),Ae("values"),Ae("entries")},1249:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(2092).map;Oe({target:"Array",proto:!0,forced:!V(1194)("map")},{map:function(Je){return Ae(this,Je,arguments.length>1?arguments[1]:void 0)}})},7042:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(111),De=V(3157),Fe=V(1400),Ue=V(7466),Je=V(5656),nt=V(6135),mt=V(5112),ot=V(1194)("slice"),gt=mt("species"),wt=[].slice,si=Math.max;Oe({target:"Array",proto:!0,forced:!ot},{slice:function(ii,oi){var dt,Zt,ni,at=Je(this),ri=Ue(at.length),Xt=Fe(ii,ri),Vt=Fe(void 0===oi?ri:oi,ri);if(De(at)&&("function"!=typeof(dt=at.constructor)||dt!==Array&&!De(dt.prototype)?Ae(dt)&&null===(dt=dt[gt])&&(dt=void 0):dt=void 0,dt===Array||void 0===dt))return wt.call(at,Xt,Vt);for(Zt=new(void 0===dt?Array:dt)(si(Vt-Xt,0)),ni=0;Xt<Vt;Xt++,ni++)Xt in at&&nt(Zt,ni,at[Xt]);return Zt.length=ni,Zt}})},561:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(1400),De=V(9958),Fe=V(7466),Ue=V(7908),Je=V(5417),nt=V(6135),Pt=V(1194)("splice"),ot=Math.max,gt=Math.min;Oe({target:"Array",proto:!0,forced:!Pt},{splice:function(ii,oi){var dt,Zt,ni,gi,Gi,vi,at=Ue(this),ri=Fe(at.length),Xt=Ae(ii,ri),Vt=arguments.length;if(0===Vt?dt=Zt=0:1===Vt?(dt=0,Zt=ri-Xt):(dt=Vt-2,Zt=gt(ot(De(oi),0),ri-Xt)),ri+dt-Zt>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(ni=Je(at,Zt),gi=0;gi<Zt;gi++)(Gi=Xt+gi)in at&&nt(ni,gi,at[Gi]);if(ni.length=Zt,dt<Zt){for(gi=Xt;gi<ri-Zt;gi++)vi=gi+dt,(Gi=gi+Zt)in at?at[vi]=at[Gi]:delete at[vi];for(gi=ri;gi>ri-Zt+dt;gi--)delete at[gi-1]}else if(dt>Zt)for(gi=ri-Zt;gi>Xt;gi--)vi=gi+dt-1,(Gi=gi+Zt-1)in at?at[vi]=at[Gi]:delete at[vi];for(gi=0;gi<dt;gi++)at[gi+Xt]=arguments[gi+2];return at.length=ri-Zt+dt,ni}})},8309:function(ze,i,V){var Oe=V(9781),Ae=V(3070).f,De=Function.prototype,Fe=De.toString,Ue=/^\s*function ([^ (]*)/;Oe&&!("name"in De)&&Ae(De,"name",{configurable:!0,get:function(){try{return Fe.call(this).match(Ue)[1]}catch{return""}}})},489:function(ze,i,V){var Oe=V(2109),Ae=V(7293),De=V(7908),Fe=V(9518),Ue=V(8544);Oe({target:"Object",stat:!0,forced:Ae(function(){Fe(1)}),sham:!Ue},{getPrototypeOf:function(mt){return Fe(De(mt))}})},1539:function(ze,i,V){var Oe=V(1694),Ae=V(1320),De=V(288);Oe||Ae(Object.prototype,"toString",De,{unsafe:!0})},4916:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(2261);Oe({target:"RegExp",proto:!0,forced:/./.exec!==Ae},{exec:Ae})},9714:function(ze,i,V){"use strict";var Oe=V(1320),Ae=V(9670),De=V(7293),Fe=V(7066),Ue="toString",Je=RegExp.prototype,nt=Je[Ue];(De(function(){return"/a/b"!=nt.call({source:"a",flags:"b"})})||nt.name!=Ue)&&Oe(RegExp.prototype,Ue,function(){var gt=Ae(this),wt=String(gt.source),si=gt.flags;return"/"+wt+"/"+String(void 0===si&&gt instanceof RegExp&&!("flags"in Je)?Fe.call(gt):si)},{unsafe:!0})},8783:function(ze,i,V){"use strict";var Oe=V(8710).charAt,Ae=V(9909),De=V(654),Fe="String Iterator",Ue=Ae.set,Je=Ae.getterFor(Fe);De(String,"String",function(nt){Ue(this,{type:Fe,string:String(nt),index:0})},function(){var gt,mt=Je(this),Pt=mt.string,ot=mt.index;return ot>=Pt.length?{value:void 0,done:!0}:(gt=Oe(Pt,ot),mt.index+=gt.length,{value:gt,done:!1})})},4723:function(ze,i,V){"use strict";var Oe=V(7007),Ae=V(9670),De=V(7466),Fe=V(4488),Ue=V(1530),Je=V(7651);Oe("match",1,function(nt,mt,Pt){return[function(gt){var wt=Fe(this),si=gt?.[nt];return void 0!==si?si.call(gt,wt):new RegExp(gt)[nt](String(wt))},function(ot){var gt=Pt(mt,ot,this);if(gt.done)return gt.value;var wt=Ae(ot),si=String(this);if(!wt.global)return Je(wt,si);var $e=wt.unicode;wt.lastIndex=0;for(var at,ii=[],oi=0;null!==(at=Je(wt,si));){var ri=String(at[0]);ii[oi]=ri,""===ri&&(wt.lastIndex=Ue(si,De(wt.lastIndex),$e)),oi++}return 0===oi?null:ii}]})},5306:function(ze,i,V){"use strict";var Oe=V(7007),Ae=V(9670),De=V(7466),Fe=V(9958),Ue=V(4488),Je=V(1530),nt=V(647),mt=V(7651),Pt=Math.max,ot=Math.min,gt=function(wt){return void 0===wt?wt:String(wt)};Oe("replace",2,function(wt,si,$e,ii){var oi=ii.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,at=ii.REPLACE_KEEPS_$0,ri=oi?"$":"$0";return[function(Vt,dt){var Zt=Ue(this),ni=Vt?.[wt];return void 0!==ni?ni.call(Vt,Zt,dt):si.call(String(Zt),Vt,dt)},function(Xt,Vt){if(!oi&&at||"string"==typeof Vt&&-1===Vt.indexOf(ri)){var dt=$e(si,Xt,this,Vt);if(dt.done)return dt.value}var Zt=Ae(Xt),ni=String(this),gi="function"==typeof Vt;gi||(Vt=String(Vt));var Gi=Zt.global;if(Gi){var vi=Zt.unicode;Zt.lastIndex=0}for(var Ei=[];;){var Fi=mt(Zt,ni);if(null===Fi||(Ei.push(Fi),!Gi))break;""===String(Fi[0])&&(Zt.lastIndex=Je(ni,De(Zt.lastIndex),vi))}for(var bn="",fn=0,Gn=0;Gn<Ei.length;Gn++){Fi=Ei[Gn];for(var Qt=String(Fi[0]),Yi=Pt(ot(Fe(Fi.index),ni.length),0),on=[],Zn=1;Zn<Fi.length;Zn++)on.push(gt(Fi[Zn]));var Nn=Fi.groups;if(gi){var Dn=[Qt].concat(on,Yi,ni);void 0!==Nn&&Dn.push(Nn);var ji=String(Vt.apply(void 0,Dn))}else ji=nt(Qt,ni,Yi,on,Nn,Vt);Yi>=fn&&(bn+=ni.slice(fn,Yi)+ji,fn=Yi+Qt.length)}return bn+ni.slice(fn)}]})},3123:function(ze,i,V){"use strict";var Oe=V(7007),Ae=V(7850),De=V(9670),Fe=V(4488),Ue=V(6707),Je=V(1530),nt=V(7466),mt=V(7651),Pt=V(2261),ot=V(7293),gt=[].push,wt=Math.min,si=4294967295,$e=!ot(function(){return!RegExp(si,"y")});Oe("split",2,function(ii,oi,at){var ri;return ri="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Xt,Vt){var dt=String(Fe(this)),Zt=void 0===Vt?si:Vt>>>0;if(0===Zt)return[];if(void 0===Xt)return[dt];if(!Ae(Xt))return oi.call(dt,Xt,Zt);for(var Ei,Fi,Ji,ni=[],Gi=0,vi=new RegExp(Xt.source,(Xt.ignoreCase?"i":"")+(Xt.multiline?"m":"")+(Xt.unicode?"u":"")+(Xt.sticky?"y":"")+"g");(Ei=Pt.call(vi,dt))&&!((Fi=vi.lastIndex)>Gi&&(ni.push(dt.slice(Gi,Ei.index)),Ei.length>1&&Ei.index<dt.length&&gt.apply(ni,Ei.slice(1)),Ji=Ei[0].length,Gi=Fi,ni.length>=Zt));)vi.lastIndex===Ei.index&&vi.lastIndex++;return Gi===dt.length?(Ji||!vi.test(""))&&ni.push(""):ni.push(dt.slice(Gi)),ni.length>Zt?ni.slice(0,Zt):ni}:"0".split(void 0,0).length?function(Xt,Vt){return void 0===Xt&&0===Vt?[]:oi.call(this,Xt,Vt)}:oi,[function(Vt,dt){var Zt=Fe(this),ni=Vt?.[ii];return void 0!==ni?ni.call(Vt,Zt,dt):ri.call(String(Zt),Vt,dt)},function(Xt,Vt){var dt=at(ri,Xt,this,Vt,ri!==oi);if(dt.done)return dt.value;var Zt=De(Xt),ni=String(this),gi=Ue(Zt,RegExp),Gi=Zt.unicode,Ei=new gi($e?Zt:"^(?:"+Zt.source+")",(Zt.ignoreCase?"i":"")+(Zt.multiline?"m":"")+(Zt.unicode?"u":"")+($e?"y":"g")),Fi=void 0===Vt?si:Vt>>>0;if(0===Fi)return[];if(0===ni.length)return null===mt(Ei,ni)?[ni]:[];for(var Ji=0,bn=0,fn=[];bn<ni.length;){Ei.lastIndex=$e?bn:0;var Qt,Gn=mt(Ei,$e?ni:ni.slice(bn));if(null===Gn||(Qt=wt(nt(Ei.lastIndex+($e?0:bn)),ni.length))===Ji)bn=Je(ni,bn,Gi);else{if(fn.push(ni.slice(Ji,bn)),fn.length===Fi)return fn;for(var Yi=1;Yi<=Gn.length-1;Yi++)if(fn.push(Gn[Yi]),fn.length===Fi)return fn;bn=Ji=Qt}}return fn.push(ni.slice(Ji)),fn}]},!$e)},3210:function(ze,i,V){"use strict";var Oe=V(2109),Ae=V(3111).trim;Oe({target:"String",proto:!0,forced:V(6091)("trim")},{trim:function(){return Ae(this)}})},2990:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(1048),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("copyWithin",function(Je,nt){return Ae.call(De(this),Je,nt,arguments.length>2?arguments[2]:void 0)})},8927:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).every,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("every",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},3105:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(1285),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("fill",function(Je){return Ae.apply(De(this),arguments)})},5035:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).filter,De=V(3074),Fe=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("filter",function(nt){var mt=Ae(Fe(this),nt,arguments.length>1?arguments[1]:void 0);return De(this,mt)})},7174:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).findIndex,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("findIndex",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},4345:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).find,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("find",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},2846:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).forEach,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("forEach",function(Je){Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},4731:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(1318).includes,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("includes",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},7209:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(1318).indexOf,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("indexOf",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},6319:function(ze,i,V){"use strict";var Oe=V(7854),Ae=V(260),De=V(6992),Ue=V(5112)("iterator"),Je=Oe.Uint8Array,nt=De.values,mt=De.keys,Pt=De.entries,ot=Ae.aTypedArray,gt=Ae.exportTypedArrayMethod,wt=Je&&Je.prototype[Ue],si=!!wt&&("values"==wt.name||null==wt.name),$e=function(){return nt.call(ot(this))};gt("entries",function(){return Pt.call(ot(this))}),gt("keys",function(){return mt.call(ot(this))}),gt("values",$e,!si),gt(Ue,$e,!si)},8867:function(ze,i,V){"use strict";var Oe=V(260),Ae=Oe.aTypedArray,Fe=[].join;(0,Oe.exportTypedArrayMethod)("join",function(Je){return Fe.apply(Ae(this),arguments)})},7789:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(6583),De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("lastIndexOf",function(Je){return Ae.apply(De(this),arguments)})},3739:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).map,De=V(6707),Fe=Oe.aTypedArray,Ue=Oe.aTypedArrayConstructor;(0,Oe.exportTypedArrayMethod)("map",function(mt){return Ae(Fe(this),mt,arguments.length>1?arguments[1]:void 0,function(Pt,ot){return new(Ue(De(Pt,Pt.constructor)))(ot)})})},4483:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(3671).right,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("reduceRight",function(Je){return Ae(De(this),Je,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(3671).left,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("reduce",function(Je){return Ae(De(this),Je,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(ze,i,V){"use strict";var Oe=V(260),Ae=Oe.aTypedArray,Fe=Math.floor;(0,Oe.exportTypedArrayMethod)("reverse",function(){for(var ot,Je=this,nt=Ae(Je).length,mt=Fe(nt/2),Pt=0;Pt<mt;)ot=Je[Pt],Je[Pt++]=Je[--nt],Je[nt]=ot;return Je})},3462:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(7466),De=V(4590),Fe=V(7908),Ue=V(7293),Je=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("set",function(ot){Je(this);var gt=De(arguments.length>1?arguments[1]:void 0,1),wt=this.length,si=Fe(ot),$e=Ae(si.length),ii=0;if($e+gt>wt)throw RangeError("Wrong length");for(;ii<$e;)this[gt+ii]=si[ii++]},Ue(function(){new Int8Array(1).set({})}))},678:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(6707),De=V(7293),Fe=Oe.aTypedArray,Ue=Oe.aTypedArrayConstructor,nt=[].slice;(0,Oe.exportTypedArrayMethod)("slice",function(ot,gt){for(var wt=nt.call(Fe(this),ot,gt),si=Ae(this,this.constructor),$e=0,ii=wt.length,oi=new(Ue(si))(ii);ii>$e;)oi[$e]=wt[$e++];return oi},De(function(){new Int8Array(1).slice()}))},7462:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(2092).some,De=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("some",function(Je){return Ae(De(this),Je,arguments.length>1?arguments[1]:void 0)})},3824:function(ze,i,V){"use strict";var Oe=V(260),Ae=Oe.aTypedArray,Fe=[].sort;(0,Oe.exportTypedArrayMethod)("sort",function(Je){return Fe.call(Ae(this),Je)})},5021:function(ze,i,V){"use strict";var Oe=V(260),Ae=V(7466),De=V(1400),Fe=V(6707),Ue=Oe.aTypedArray;(0,Oe.exportTypedArrayMethod)("subarray",function(mt,Pt){var ot=Ue(this),gt=ot.length,wt=De(mt,gt);return new(Fe(ot,ot.constructor))(ot.buffer,ot.byteOffset+wt*ot.BYTES_PER_ELEMENT,Ae((void 0===Pt?gt:De(Pt,gt))-wt))})},2974:function(ze,i,V){"use strict";var Oe=V(7854),Ae=V(260),De=V(7293),Fe=Oe.Int8Array,Ue=Ae.aTypedArray,Je=Ae.exportTypedArrayMethod,nt=[].toLocaleString,mt=[].slice,Pt=!!Fe&&De(function(){nt.call(new Fe(1))});Je("toLocaleString",function(){return nt.apply(Pt?mt.call(Ue(this)):Ue(this),arguments)},De(function(){return[1,2].toLocaleString()!=new Fe([1,2]).toLocaleString()})||!De(function(){Fe.prototype.toLocaleString.call([1,2])}))},5016:function(ze,i,V){"use strict";var Oe=V(260).exportTypedArrayMethod,Ae=V(7293),Fe=V(7854).Uint8Array,Ue=Fe&&Fe.prototype||{},Je=[].toString,nt=[].join;Ae(function(){Je.call({})})&&(Je=function(){return nt.call(this)}),Oe("toString",Je,Ue.toString!=Je)},2472:function(ze,i,V){V(9843)("Uint8",function(Ae){return function(Fe,Ue,Je){return Ae(this,Fe,Ue,Je)}})},4747:function(ze,i,V){var Oe=V(7854),Ae=V(8324),De=V(8533),Fe=V(8880);for(var Ue in Ae){var Je=Oe[Ue],nt=Je&&Je.prototype;if(nt&&nt.forEach!==De)try{Fe(nt,"forEach",De)}catch{nt.forEach=De}}},3948:function(ze,i,V){var Oe=V(7854),Ae=V(8324),De=V(6992),Fe=V(8880),Ue=V(5112),Je=Ue("iterator"),nt=Ue("toStringTag"),mt=De.values;for(var Pt in Ae){var ot=Oe[Pt],gt=ot&&ot.prototype;if(gt){if(gt[Je]!==mt)try{Fe(gt,Je,mt)}catch{gt[Je]=mt}if(gt[nt]||Fe(gt,nt,Pt),Ae[Pt])for(var wt in De)if(gt[wt]!==De[wt])try{Fe(gt,wt,De[wt])}catch{gt[wt]=De[wt]}}}},1637:function(ze,i,V){"use strict";V(6992);var Oe=V(2109),Ae=V(5005),De=V(590),Fe=V(1320),Ue=V(2248),Je=V(8003),nt=V(4994),mt=V(9909),Pt=V(5787),ot=V(6656),gt=V(9974),wt=V(648),si=V(9670),$e=V(111),ii=V(30),oi=V(9114),at=V(8554),ri=V(1246),Xt=V(5112),Vt=Ae("fetch"),dt=Ae("Headers"),Zt=Xt("iterator"),ni="URLSearchParams",gi=ni+"Iterator",Gi=mt.set,vi=mt.getterFor(ni),Ei=mt.getterFor(gi),Fi=/\+/g,Ji=Array(4),bn=function(xn){return Ji[xn-1]||(Ji[xn-1]=RegExp("((?:%[\\da-f]{2}){"+xn+"})","gi"))},fn=function(xn){try{return decodeURIComponent(xn)}catch{return xn}},Gn=function(xn){var en=xn.replace(Fi," "),_n=4;try{return decodeURIComponent(en)}catch{for(;_n;)en=en.replace(bn(_n--),fn);return en}},Qt=/[!'()~]|%20/g,Yi={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},on=function(xn){return Yi[xn]},Zn=function(xn){return encodeURIComponent(xn).replace(Qt,on)},Nn=function(xn,en){if(en)for(var Ui,jn,_n=en.split("&"),Zi=0;Zi<_n.length;)(Ui=_n[Zi++]).length&&(jn=Ui.split("="),xn.push({key:Gn(jn.shift()),value:Gn(jn.join("="))}))},Dn=function(xn){this.entries.length=0,Nn(this.entries,xn)},ji=function(xn,en){if(xn<en)throw TypeError("Not enough arguments")},Mr=nt(function(en,_n){Gi(this,{type:gi,iterator:at(vi(en).entries),kind:_n})},"Iterator",function(){var en=Ei(this),_n=en.kind,Zi=en.iterator.next(),Ui=Zi.value;return Zi.done||(Zi.value="keys"===_n?Ui.key:"values"===_n?Ui.value:[Ui.key,Ui.value]),Zi}),or=function(){Pt(this,or,ni);var Ui,jn,tn,Si,mn,Pn,Lr,Or,Sr,en=arguments.length>0?arguments[0]:void 0,Zi=[];if(Gi(this,{type:ni,entries:Zi,updateURL:function(){},updateSearchParams:Dn}),void 0!==en)if($e(en))if("function"==typeof(Ui=ri(en)))for(tn=(jn=Ui.call(en)).next;!(Si=tn.call(jn)).done;){if((Lr=(Pn=(mn=at(si(Si.value))).next).call(mn)).done||(Or=Pn.call(mn)).done||!Pn.call(mn).done)throw TypeError("Expected sequence with length 2");Zi.push({key:Lr.value+"",value:Or.value+""})}else for(Sr in en)ot(en,Sr)&&Zi.push({key:Sr,value:en[Sr]+""});else Nn(Zi,"string"==typeof en?"?"===en.charAt(0)?en.slice(1):en:en+"")},gr=or.prototype;Ue(gr,{append:function(en,_n){ji(arguments.length,2);var Zi=vi(this);Zi.entries.push({key:en+"",value:_n+""}),Zi.updateURL()},delete:function(xn){ji(arguments.length,1);for(var en=vi(this),_n=en.entries,Zi=xn+"",Ui=0;Ui<_n.length;)_n[Ui].key===Zi?_n.splice(Ui,1):Ui++;en.updateURL()},get:function(en){ji(arguments.length,1);for(var _n=vi(this).entries,Zi=en+"",Ui=0;Ui<_n.length;Ui++)if(_n[Ui].key===Zi)return _n[Ui].value;return null},getAll:function(en){ji(arguments.length,1);for(var _n=vi(this).entries,Zi=en+"",Ui=[],jn=0;jn<_n.length;jn++)_n[jn].key===Zi&&Ui.push(_n[jn].value);return Ui},has:function(en){ji(arguments.length,1);for(var _n=vi(this).entries,Zi=en+"",Ui=0;Ui<_n.length;)if(_n[Ui++].key===Zi)return!0;return!1},set:function(en,_n){ji(arguments.length,1);for(var Pn,Zi=vi(this),Ui=Zi.entries,jn=!1,tn=en+"",Si=_n+"",mn=0;mn<Ui.length;mn++)(Pn=Ui[mn]).key===tn&&(jn?Ui.splice(mn--,1):(jn=!0,Pn.value=Si));jn||Ui.push({key:tn,value:Si}),Zi.updateURL()},sort:function(){var Ui,jn,tn,en=vi(this),_n=en.entries,Zi=_n.slice();for(_n.length=0,tn=0;tn<Zi.length;tn++){for(Ui=Zi[tn],jn=0;jn<tn;jn++)if(_n[jn].key>Ui.key){_n.splice(jn,0,Ui);break}jn===tn&&_n.push(Ui)}en.updateURL()},forEach:function(en){for(var jn,_n=vi(this).entries,Zi=gt(en,arguments.length>1?arguments[1]:void 0,3),Ui=0;Ui<_n.length;)Zi((jn=_n[Ui++]).value,jn.key,this)},keys:function(){return new Mr(this,"keys")},values:function(){return new Mr(this,"values")},entries:function(){return new Mr(this,"entries")}},{enumerable:!0}),Fe(gr,Zt,gr.entries),Fe(gr,"toString",function(){for(var Ui,en=vi(this).entries,_n=[],Zi=0;Zi<en.length;)Ui=en[Zi++],_n.push(Zn(Ui.key)+"="+Zn(Ui.value));return _n.join("&")},{enumerable:!0}),Je(or,ni),Oe({global:!0,forced:!De},{URLSearchParams:or}),!De&&"function"==typeof Vt&&"function"==typeof dt&&Oe({global:!0,enumerable:!0,forced:!0},{fetch:function(en){var Zi,Ui,jn,_n=[en];return arguments.length>1&&($e(Zi=arguments[1])&&wt(Ui=Zi.body)===ni&&((jn=Zi.headers?new dt(Zi.headers):new dt).has("content-type")||jn.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Zi=ii(Zi,{body:oi(0,String(Ui)),headers:oi(0,jn)})),_n.push(Zi)),Vt.apply(this,_n)}}),ze.exports={URLSearchParams:or,getState:vi}},285:function(ze,i,V){"use strict";V(8783);var Dn,Oe=V(2109),Ae=V(9781),De=V(590),Fe=V(7854),Ue=V(6048),Je=V(1320),nt=V(5787),mt=V(6656),Pt=V(1574),ot=V(8457),gt=V(8710).codeAt,wt=V(3197),si=V(8003),$e=V(1637),ii=V(9909),oi=Fe.URL,at=$e.URLSearchParams,ri=$e.getState,Xt=ii.set,Vt=ii.getterFor("URL"),dt=Math.floor,Zt=Math.pow,gi="Invalid scheme",Gi="Invalid host",vi="Invalid port",Ei=/[A-Za-z]/,Fi=/[\d+-.A-Za-z]/,Ji=/\d/,bn=/^(0x|0X)/,fn=/^[0-7]+$/,Gn=/^\d+$/,Qt=/^[\dA-Fa-f]+$/,Yi=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,on=/[\u0000\t\u000A\u000D #/:?@[\\]]/,Zn=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Nn=/[\t\u000A\u000D]/g,ji=function(Pe,It){var le,o,c;if("["==It.charAt(0)){if("]"!=It.charAt(It.length-1)||!(le=or(It.slice(1,-1))))return Gi;Pe.host=le}else if(Si(Pe)){if(It=wt(It),Yi.test(It)||null===(le=Mr(It)))return Gi;Pe.host=le}else{if(on.test(It))return Gi;for(le="",o=ot(It),c=0;c<o.length;c++)le+=jn(o[c],en);Pe.host=le}},Mr=function(Pe){var le,o,c,h,_,b,x,It=Pe.split(".");if(It.length&&""==It[It.length-1]&&It.pop(),(le=It.length)>4)return Pe;for(o=[],c=0;c<le;c++){if(""==(h=It[c]))return Pe;if(_=10,h.length>1&&"0"==h.charAt(0)&&(_=bn.test(h)?16:8,h=h.slice(8==_?1:2)),""===h)b=0;else{if(!(10==_?Gn:8==_?fn:Qt).test(h))return Pe;b=parseInt(h,_)}o.push(b)}for(c=0;c<le;c++)if(b=o[c],c==le-1){if(b>=Zt(256,5-le))return null}else if(b>255)return null;for(x=o.pop(),c=0;c<o.length;c++)x+=o[c]*Zt(256,3-c);return x},or=function(Pe){var h,_,b,x,A,I,F,It=[0,0,0,0,0,0,0,0],le=0,o=null,c=0,U=function(){return Pe.charAt(c)};if(":"==U()){if(":"!=Pe.charAt(1))return;c+=2,o=++le}for(;U();){if(8==le)return;if(":"!=U()){for(h=_=0;_<4&&Qt.test(U());)h=16*h+parseInt(U(),16),c++,_++;if("."==U()){if(0==_||(c-=_,le>6))return;for(b=0;U();){if(x=null,b>0){if(!("."==U()&&b<4))return;c++}if(!Ji.test(U()))return;for(;Ji.test(U());){if(A=parseInt(U(),10),null===x)x=A;else{if(0==x)return;x=10*x+A}if(x>255)return;c++}It[le]=256*It[le]+x,(2==++b||4==b)&&le++}if(4!=b)return;break}if(":"==U()){if(c++,!U())return}else if(U())return;It[le++]=h}else{if(null!==o)return;c++,o=++le}}if(null!==o)for(I=le-o,le=7;0!=le&&I>0;)F=It[le],It[le--]=It[o+I-1],It[o+--I]=F;else if(8!=le)return;return It},xn=function(Pe){var It,le,o,c;if("number"==typeof Pe){for(It=[],le=0;le<4;le++)It.unshift(Pe%256),Pe=dt(Pe/256);return It.join(".")}if("object"==typeof Pe){for(It="",o=function(Pe){for(var It=null,le=1,o=null,c=0,h=0;h<8;h++)0!==Pe[h]?(c>le&&(It=o,le=c),o=null,c=0):(null===o&&(o=h),++c);return c>le&&(It=o,le=c),It}(Pe),le=0;le<8;le++)c&&0===Pe[le]||(c&&(c=!1),o===le?(It+=le?":":"::",c=!0):(It+=Pe[le].toString(16),le<7&&(It+=":")));return"["+It+"]"}return Pe},en={},_n=Pt({},en,{" ":1,'"':1,"<":1,">":1,"`":1}),Zi=Pt({},_n,{"#":1,"?":1,"{":1,"}":1}),Ui=Pt({},Zi,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),jn=function(Pe,It){var le=gt(Pe,0);return le>32&&le<127&&!mt(It,Pe)?Pe:encodeURIComponent(Pe)},tn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Si=function(Pe){return mt(tn,Pe.scheme)},mn=function(Pe){return""!=Pe.username||""!=Pe.password},Pn=function(Pe){return!Pe.host||Pe.cannotBeABaseURL||"file"==Pe.scheme},Lr=function(Pe,It){var le;return 2==Pe.length&&Ei.test(Pe.charAt(0))&&(":"==(le=Pe.charAt(1))||!It&&"|"==le)},Or=function(Pe){var It;return Pe.length>1&&Lr(Pe.slice(0,2))&&(2==Pe.length||"/"===(It=Pe.charAt(2))||"\\"===It||"?"===It||"#"===It)},Sr=function(Pe){var It=Pe.path,le=It.length;le&&("file"!=Pe.scheme||1!=le||!Lr(It[0],!0))&&It.pop()},vr=function(Pe){return"."===Pe||"%2e"===Pe.toLowerCase()},ar=function(Pe){return".."===(Pe=Pe.toLowerCase())||"%2e."===Pe||".%2e"===Pe||"%2e%2e"===Pe},kn={},dr={},Fr={},Cs={},er={},br={},mr={},Tr={},Xr={},Ct={},Ie={},Be={},ct={},lt={},zt={},qt={},Kt={},pt={},ui={},Vi={},$i={},di=function(Pe,It,le,o){var I,F,U,$,c=le||kn,h=0,_="",b=!1,x=!1,A=!1;for(le||(Pe.scheme="",Pe.username="",Pe.password="",Pe.host=null,Pe.port=null,Pe.path=[],Pe.query=null,Pe.fragment=null,Pe.cannotBeABaseURL=!1,It=It.replace(Zn,"")),It=It.replace(Nn,""),I=ot(It);h<=I.length;){switch(F=I[h],c){case kn:if(!F||!Ei.test(F)){if(le)return gi;c=Fr;continue}_+=F.toLowerCase(),c=dr;break;case dr:if(F&&(Fi.test(F)||"+"==F||"-"==F||"."==F))_+=F.toLowerCase();else{if(":"!=F){if(le)return gi;_="",c=Fr,h=0;continue}if(le&&(Si(Pe)!=mt(tn,_)||"file"==_&&(mn(Pe)||null!==Pe.port)||"file"==Pe.scheme&&!Pe.host))return;if(Pe.scheme=_,le)return void(Si(Pe)&&tn[Pe.scheme]==Pe.port&&(Pe.port=null));_="","file"==Pe.scheme?c=lt:Si(Pe)&&o&&o.scheme==Pe.scheme?c=Cs:Si(Pe)?c=Tr:"/"==I[h+1]?(c=er,h++):(Pe.cannotBeABaseURL=!0,Pe.path.push(""),c=ui)}break;case Fr:if(!o||o.cannotBeABaseURL&&"#"!=F)return gi;if(o.cannotBeABaseURL&&"#"==F){Pe.scheme=o.scheme,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",Pe.cannotBeABaseURL=!0,c=$i;break}c="file"==o.scheme?lt:br;continue;case Cs:if("/"!=F||"/"!=I[h+1]){c=br;continue}c=Xr,h++;break;case er:if("/"==F){c=Ct;break}c=pt;continue;case br:if(Pe.scheme=o.scheme,F==Dn)Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query=o.query;else if("/"==F||"\\"==F&&Si(Pe))c=mr;else if("?"==F)Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query="",c=Vi;else{if("#"!=F){Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.path.pop(),c=pt;continue}Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",c=$i}break;case mr:if(!Si(Pe)||"/"!=F&&"\\"!=F){if("/"!=F){Pe.username=o.username,Pe.password=o.password,Pe.host=o.host,Pe.port=o.port,c=pt;continue}c=Ct}else c=Xr;break;case Tr:if(c=Xr,"/"!=F||"/"!=_.charAt(h+1))continue;h++;break;case Xr:if("/"!=F&&"\\"!=F){c=Ct;continue}break;case Ct:if("@"==F){b&&(_="%40"+_),b=!0,U=ot(_);for(var q=0;q<U.length;q++){var ie=U[q];if(":"!=ie||A){var ue=jn(ie,Ui);A?Pe.password+=ue:Pe.username+=ue}else A=!0}_=""}else if(F==Dn||"/"==F||"?"==F||"#"==F||"\\"==F&&Si(Pe)){if(b&&""==_)return"Invalid authority";h-=ot(_).length+1,_="",c=Ie}else _+=F;break;case Ie:case Be:if(le&&"file"==Pe.scheme){c=qt;continue}if(":"!=F||x){if(F==Dn||"/"==F||"?"==F||"#"==F||"\\"==F&&Si(Pe)){if(Si(Pe)&&""==_)return Gi;if(le&&""==_&&(mn(Pe)||null!==Pe.port))return;if($=ji(Pe,_))return $;if(_="",c=Kt,le)return;continue}"["==F?x=!0:"]"==F&&(x=!1),_+=F}else{if(""==_)return Gi;if($=ji(Pe,_))return $;if(_="",c=ct,le==Be)return}break;case ct:if(!Ji.test(F)){if(F==Dn||"/"==F||"?"==F||"#"==F||"\\"==F&&Si(Pe)||le){if(""!=_){var ge=parseInt(_,10);if(ge>65535)return vi;Pe.port=Si(Pe)&&ge===tn[Pe.scheme]?null:ge,_=""}if(le)return;c=Kt;continue}return vi}_+=F;break;case lt:if(Pe.scheme="file","/"==F||"\\"==F)c=zt;else{if(!o||"file"!=o.scheme){c=pt;continue}if(F==Dn)Pe.host=o.host,Pe.path=o.path.slice(),Pe.query=o.query;else if("?"==F)Pe.host=o.host,Pe.path=o.path.slice(),Pe.query="",c=Vi;else{if("#"!=F){Or(I.slice(h).join(""))||(Pe.host=o.host,Pe.path=o.path.slice(),Sr(Pe)),c=pt;continue}Pe.host=o.host,Pe.path=o.path.slice(),Pe.query=o.query,Pe.fragment="",c=$i}}break;case zt:if("/"==F||"\\"==F){c=qt;break}o&&"file"==o.scheme&&!Or(I.slice(h).join(""))&&(Lr(o.path[0],!0)?Pe.path.push(o.path[0]):Pe.host=o.host),c=pt;continue;case qt:if(F==Dn||"/"==F||"\\"==F||"?"==F||"#"==F){if(!le&&Lr(_))c=pt;else if(""==_){if(Pe.host="",le)return;c=Kt}else{if($=ji(Pe,_))return $;if("localhost"==Pe.host&&(Pe.host=""),le)return;_="",c=Kt}continue}_+=F;break;case Kt:if(Si(Pe)){if(c=pt,"/"!=F&&"\\"!=F)continue}else if(le||"?"!=F)if(le||"#"!=F){if(F!=Dn&&(c=pt,"/"!=F))continue}else Pe.fragment="",c=$i;else Pe.query="",c=Vi;break;case pt:if(F==Dn||"/"==F||"\\"==F&&Si(Pe)||!le&&("?"==F||"#"==F)){if(ar(_)?(Sr(Pe),"/"!=F&&!("\\"==F&&Si(Pe))&&Pe.path.push("")):vr(_)?"/"!=F&&!("\\"==F&&Si(Pe))&&Pe.path.push(""):("file"==Pe.scheme&&!Pe.path.length&&Lr(_)&&(Pe.host&&(Pe.host=""),_=_.charAt(0)+":"),Pe.path.push(_)),_="","file"==Pe.scheme&&(F==Dn||"?"==F||"#"==F))for(;Pe.path.length>1&&""===Pe.path[0];)Pe.path.shift();"?"==F?(Pe.query="",c=Vi):"#"==F&&(Pe.fragment="",c=$i)}else _+=jn(F,Zi);break;case ui:"?"==F?(Pe.query="",c=Vi):"#"==F?(Pe.fragment="",c=$i):F!=Dn&&(Pe.path[0]+=jn(F,en));break;case Vi:le||"#"!=F?F!=Dn&&("'"==F&&Si(Pe)?Pe.query+="%27":Pe.query+="#"==F?"%23":jn(F,en)):(Pe.fragment="",c=$i);break;case $i:F!=Dn&&(Pe.fragment+=jn(F,_n))}h++}},un=function(It){var _,b,le=nt(this,un,"URL"),o=arguments.length>1?arguments[1]:void 0,c=String(It),h=Xt(le,{type:"URL"});if(void 0!==o)if(o instanceof un)_=Vt(o);else if(b=di(_={},String(o)))throw TypeError(b);if(b=di(h,c,null,_))throw TypeError(b);var x=h.searchParams=new at,A=ri(x);A.updateSearchParams(h.query),A.updateURL=function(){h.query=String(x)||null},Ae||(le.href=St.call(le),le.origin=Ke.call(le),le.protocol=Ze.call(le),le.username=Re.call(le),le.password=He.call(le),le.host=ft.call(le),le.hostname=Yt.call(le),le.port=xi.call(le),le.pathname=fi.call(le),le.search=Pi.call(le),le.searchParams=rt.call(le),le.hash=yt.call(le))},Et=un.prototype,St=function(){var Pe=Vt(this),It=Pe.scheme,le=Pe.username,o=Pe.password,c=Pe.host,h=Pe.port,_=Pe.path,b=Pe.query,x=Pe.fragment,A=It+":";return null!==c?(A+="//",mn(Pe)&&(A+=le+(o?":"+o:"")+"@"),A+=xn(c),null!==h&&(A+=":"+h)):"file"==It&&(A+="//"),A+=Pe.cannotBeABaseURL?_[0]:_.length?"/"+_.join("/"):"",null!==b&&(A+="?"+b),null!==x&&(A+="#"+x),A},Ke=function(){var Pe=Vt(this),It=Pe.scheme,le=Pe.port;if("blob"==It)try{return new URL(It.path[0]).origin}catch{return"null"}return"file"!=It&&Si(Pe)?It+"://"+xn(Pe.host)+(null!==le?":"+le:""):"null"},Ze=function(){return Vt(this).scheme+":"},Re=function(){return Vt(this).username},He=function(){return Vt(this).password},ft=function(){var Pe=Vt(this),It=Pe.host,le=Pe.port;return null===It?"":null===le?xn(It):xn(It)+":"+le},Yt=function(){var Pe=Vt(this).host;return null===Pe?"":xn(Pe)},xi=function(){var Pe=Vt(this).port;return null===Pe?"":String(Pe)},fi=function(){var Pe=Vt(this),It=Pe.path;return Pe.cannotBeABaseURL?It[0]:It.length?"/"+It.join("/"):""},Pi=function(){var Pe=Vt(this).query;return Pe?"?"+Pe:""},rt=function(){return Vt(this).searchParams},yt=function(){var Pe=Vt(this).fragment;return Pe?"#"+Pe:""},fe=function(Pe,It){return{get:Pe,set:It,configurable:!0,enumerable:!0}};if(Ae&&Ue(Et,{href:fe(St,function(Pe){var It=Vt(this),le=String(Pe),o=di(It,le);if(o)throw TypeError(o);ri(It.searchParams).updateSearchParams(It.query)}),origin:fe(Ke),protocol:fe(Ze,function(Pe){var It=Vt(this);di(It,String(Pe)+":",kn)}),username:fe(Re,function(Pe){var It=Vt(this),le=ot(String(Pe));if(!Pn(It)){It.username="";for(var o=0;o<le.length;o++)It.username+=jn(le[o],Ui)}}),password:fe(He,function(Pe){var It=Vt(this),le=ot(String(Pe));if(!Pn(It)){It.password="";for(var o=0;o<le.length;o++)It.password+=jn(le[o],Ui)}}),host:fe(ft,function(Pe){var It=Vt(this);It.cannotBeABaseURL||di(It,String(Pe),Ie)}),hostname:fe(Yt,function(Pe){var It=Vt(this);It.cannotBeABaseURL||di(It,String(Pe),Be)}),port:fe(xi,function(Pe){var It=Vt(this);Pn(It)||(""==(Pe=String(Pe))?It.port=null:di(It,Pe,ct))}),pathname:fe(fi,function(Pe){var It=Vt(this);It.cannotBeABaseURL||(It.path=[],di(It,Pe+"",Kt))}),search:fe(Pi,function(Pe){var It=Vt(this);""==(Pe=String(Pe))?It.query=null:("?"==Pe.charAt(0)&&(Pe=Pe.slice(1)),It.query="",di(It,Pe,Vi)),ri(It.searchParams).updateSearchParams(It.query)}),searchParams:fe(rt),hash:fe(yt,function(Pe){var It=Vt(this);""!=(Pe=String(Pe))?("#"==Pe.charAt(0)&&(Pe=Pe.slice(1)),It.fragment="",di(It,Pe,$i)):It.fragment=null})}),Je(Et,"toJSON",function(){return St.call(this)},{enumerable:!0}),Je(Et,"toString",function(){return St.call(this)},{enumerable:!0}),oi){var it=oi.createObjectURL,Tt=oi.revokeObjectURL;it&&Je(un,"createObjectURL",function(It){return it.apply(oi,arguments)}),Tt&&Je(un,"revokeObjectURL",function(It){return Tt.apply(oi,arguments)})}si(un,"URL"),Oe({global:!0,forced:!De,sham:!Ae},{URL:un})}},Rt={};function k(ze){if(Rt[ze])return Rt[ze].exports;var i=Rt[ze]={exports:{}};return Gr[ze](i,i.exports,k),i.exports}k.d=function(ze,i){for(var V in i)k.o(i,V)&&!k.o(ze,V)&&Object.defineProperty(ze,V,{enumerable:!0,get:i[V]})},k.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),k.o=function(ze,i){return Object.prototype.hasOwnProperty.call(ze,i)},k.r=function(ze){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ze,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ze,"__esModule",{value:!0})};var hn={};return function(){"use strict";function xn(Et,St){var Ke;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(Ke=function en(Et,St){if(Et){if("string"==typeof Et)return _n(Et,St);var Ke=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===Ke&&Et.constructor&&(Ke=Et.constructor.name),"Map"===Ke||"Set"===Ke)return Array.from(Et);if("Arguments"===Ke||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke))return _n(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){Ke&&(Et=Ke);var Ze=0,Re=function(){};return{s:Re,n:function(){return Ze>=Et.length?{done:!0}:{done:!1,value:Et[Ze++]}},e:function(fi){throw fi},f:Re}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){Ke=Et[Symbol.iterator]()},n:function(){var fi=Ke.next();return He=fi.done,fi},e:function(fi){ft=!0,Yt=fi},f:function(){try{!He&&null!=Ke.return&&Ke.return()}finally{if(ft)throw Yt}}}}function _n(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var Ke=0,Ze=new Array(St);Ke<St;Ke++)Ze[Ke]=Et[Ke];return Ze}function Ui(Et,St){for(var Ke=0;Ke<St.length;Ke++){var Ze=St[Ke];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(Et,Ze.key,Ze)}}k.r(hn),k.d(hn,{Dropzone:function(){return lt},default:function(){return un}}),k(2222),k(7327),k(2772),k(6992),k(1249),k(7042),k(561),k(8264),k(8309),k(489),k(1539),k(4916),k(9714),k(8783),k(4723),k(5306),k(3123),k(3210),k(2472),k(2990),k(8927),k(3105),k(5035),k(4345),k(7174),k(2846),k(4731),k(7209),k(6319),k(8867),k(7789),k(3739),k(9368),k(4483),k(2056),k(3462),k(678),k(7462),k(3824),k(5021),k(2974),k(5016),k(4747),k(3948),k(285);var tn=function(){function Et(){!function Zi(Et,St){if(!(Et instanceof St))throw new TypeError("Cannot call a class as a function")}(this,Et)}return function jn(Et,St,Ke){return St&&Ui(Et.prototype,St),Ke&&Ui(Et,Ke),Et}(Et,[{key:"on",value:function(Ke,Ze){return this._callbacks=this._callbacks||{},this._callbacks[Ke]||(this._callbacks[Ke]=[]),this._callbacks[Ke].push(Ze),this}},{key:"emit",value:function(Ke){this._callbacks=this._callbacks||{};for(var Ze=this._callbacks[Ke],Re=arguments.length,He=new Array(Re>1?Re-1:0),ft=1;ft<Re;ft++)He[ft-1]=arguments[ft];if(Ze){var xi,Yt=xn(Ze,!0);try{for(Yt.s();!(xi=Yt.n()).done;)xi.value.apply(this,He)}catch(Pi){Yt.e(Pi)}finally{Yt.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+Ke,{args:He})),this}},{key:"makeEvent",value:function(Ke,Ze){var Re={bubbles:!0,cancelable:!0,detail:Ze};if("function"==typeof window.CustomEvent)return new CustomEvent(Ke,Re);var He=document.createEvent("CustomEvent");return He.initCustomEvent(Ke,Re.bubbles,Re.cancelable,Re.detail),He}},{key:"off",value:function(Ke,Ze){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var Re=this._callbacks[Ke];if(!Re)return this;if(1===arguments.length)return delete this._callbacks[Ke],this;for(var He=0;He<Re.length;He++)if(Re[He]===Ze){Re.splice(He,1);break}return this}}]),Et}();function Pn(Et,St){var Ke;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(Ke=function Lr(Et,St){if(Et){if("string"==typeof Et)return Or(Et,St);var Ke=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===Ke&&Et.constructor&&(Ke=Et.constructor.name),"Map"===Ke||"Set"===Ke)return Array.from(Et);if("Arguments"===Ke||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke))return Or(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){Ke&&(Et=Ke);var Ze=0,Re=function(){};return{s:Re,n:function(){return Ze>=Et.length?{done:!0}:{done:!1,value:Et[Ze++]}},e:function(fi){throw fi},f:Re}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){Ke=Et[Symbol.iterator]()},n:function(){var fi=Ke.next();return He=fi.done,fi},e:function(fi){ft=!0,Yt=fi},f:function(){try{!He&&null!=Ke.return&&Ke.return()}finally{if(ft)throw Yt}}}}function Or(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var Ke=0,Ze=new Array(St);Ke<St;Ke++)Ze[Ke]=Et[Ke];return Ze}var vr={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(St,Ke,Ze){if(Ze)return{dzuuid:Ze.file.upload.uuid,dzchunkindex:Ze.index,dztotalfilesize:Ze.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:Ze.file.upload.totalChunkCount,dzchunkbyteoffset:Ze.index*this.options.chunkSize}},accept:function(St,Ke){return Ke()},chunksUploaded:function(St,Ke){Ke()},fallback:function(){var St;this.element.className="".concat(this.element.className," dz-browser-not-supported");var Ze,Ke=Pn(this.element.getElementsByTagName("div"),!0);try{for(Ke.s();!(Ze=Ke.n()).done;){var Re=Ze.value;if(/(^| )dz-message($| )/.test(Re.className)){St=Re,Re.className="dz-message";break}}}catch(ft){Ke.e(ft)}finally{Ke.f()}St||(St=lt.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(St));var He=St.getElementsByTagName("span")[0];return He&&(null!=He.textContent?He.textContent=this.options.dictFallbackMessage:null!=He.innerText&&(He.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(St,Ke,Ze,Re){var He={srcX:0,srcY:0,srcWidth:St.width,srcHeight:St.height},ft=St.width/St.height;null==Ke&&null==Ze?(Ke=He.srcWidth,Ze=He.srcHeight):null==Ke?Ke=Ze*ft:null==Ze&&(Ze=Ke/ft);var Yt=(Ke=Math.min(Ke,He.srcWidth))/(Ze=Math.min(Ze,He.srcHeight));if(He.srcWidth>Ke||He.srcHeight>Ze)if("crop"===Re)ft>Yt?(He.srcHeight=St.height,He.srcWidth=He.srcHeight*Yt):(He.srcWidth=St.width,He.srcHeight=He.srcWidth/Yt);else{if("contain"!==Re)throw new Error("Unknown resizeMethod '".concat(Re,"'"));ft>Yt?Ze=Ke/ft:Ke=Ze*ft}return He.srcX=(St.width-He.srcWidth)/2,He.srcY=(St.height-He.srcHeight)/2,He.trgWidth=Ke,He.trgHeight=Ze,He},transformFile:function(St,Ke){return(this.options.resizeWidth||this.options.resizeHeight)&&St.type.match(/image.*/)?this.resizeImage(St,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,Ke):Ke(St)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(St){return this.element.classList.remove("dz-drag-hover")},dragstart:function(St){},dragend:function(St){return this.element.classList.remove("dz-drag-hover")},dragenter:function(St){return this.element.classList.add("dz-drag-hover")},dragover:function(St){return this.element.classList.add("dz-drag-hover")},dragleave:function(St){return this.element.classList.remove("dz-drag-hover")},paste:function(St){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(St){var Ke=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){St.previewElement=lt.createElement(this.options.previewTemplate.trim()),St.previewTemplate=St.previewElement,this.previewsContainer.appendChild(St.previewElement);var Re,Ze=Pn(St.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(Ze.s();!(Re=Ze.n()).done;){var He=Re.value;He.textContent=St.name}}catch(yt){Ze.e(yt)}finally{Ze.f()}var Yt,ft=Pn(St.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(ft.s();!(Yt=ft.n()).done;)(He=Yt.value).innerHTML=this.filesize(St.size)}catch(yt){ft.e(yt)}finally{ft.f()}this.options.addRemoveLinks&&(St._removeLink=lt.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),St.previewElement.appendChild(St._removeLink));var Pi,xi=function(fe){return fe.preventDefault(),fe.stopPropagation(),St.status===lt.UPLOADING?lt.confirm(Ke.options.dictCancelUploadConfirmation,function(){return Ke.removeFile(St)}):Ke.options.dictRemoveFileConfirmation?lt.confirm(Ke.options.dictRemoveFileConfirmation,function(){return Ke.removeFile(St)}):Ke.removeFile(St)},fi=Pn(St.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(fi.s();!(Pi=fi.n()).done;)Pi.value.addEventListener("click",xi)}catch(yt){fi.e(yt)}finally{fi.f()}}},removedfile:function(St){return null!=St.previewElement&&null!=St.previewElement.parentNode&&St.previewElement.parentNode.removeChild(St.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(St,Ke){if(St.previewElement){St.previewElement.classList.remove("dz-file-preview");var Re,Ze=Pn(St.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(Ze.s();!(Re=Ze.n()).done;){var He=Re.value;He.alt=St.name,He.src=Ke}}catch(ft){Ze.e(ft)}finally{Ze.f()}return setTimeout(function(){return St.previewElement.classList.add("dz-image-preview")},1)}},error:function(St,Ke){if(St.previewElement){St.previewElement.classList.add("dz-error"),"string"!=typeof Ke&&Ke.error&&(Ke=Ke.error);var Re,Ze=Pn(St.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(Ze.s();!(Re=Ze.n()).done;)Re.value.textContent=Ke}catch(ft){Ze.e(ft)}finally{Ze.f()}}},errormultiple:function(){},processing:function(St){if(St.previewElement&&(St.previewElement.classList.add("dz-processing"),St._removeLink))return St._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(St,Ke,Ze){if(St.previewElement){var He,Re=Pn(St.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(Re.s();!(He=Re.n()).done;){var ft=He.value;"PROGRESS"===ft.nodeName?ft.value=Ke:ft.style.width="".concat(Ke,"%")}}catch(Yt){Re.e(Yt)}finally{Re.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(St){if(St.previewElement)return St.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(St){return this.emit("error",St,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(St){if(St._removeLink&&(St._removeLink.innerHTML=this.options.dictRemoveFile),St.previewElement)return St.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function ar(Et){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ke){return typeof Ke}:function(Ke){return Ke&&"function"==typeof Symbol&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke})(Et)}function kn(Et,St){var Ke;if(typeof Symbol>"u"||null==Et[Symbol.iterator]){if(Array.isArray(Et)||(Ke=function dr(Et,St){if(Et){if("string"==typeof Et)return Fr(Et,St);var Ke=Object.prototype.toString.call(Et).slice(8,-1);if("Object"===Ke&&Et.constructor&&(Ke=Et.constructor.name),"Map"===Ke||"Set"===Ke)return Array.from(Et);if("Arguments"===Ke||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ke))return Fr(Et,St)}}(Et))||St&&Et&&"number"==typeof Et.length){Ke&&(Et=Ke);var Ze=0,Re=function(){};return{s:Re,n:function(){return Ze>=Et.length?{done:!0}:{done:!1,value:Et[Ze++]}},e:function(fi){throw fi},f:Re}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Yt,He=!0,ft=!1;return{s:function(){Ke=Et[Symbol.iterator]()},n:function(){var fi=Ke.next();return He=fi.done,fi},e:function(fi){ft=!0,Yt=fi},f:function(){try{!He&&null!=Ke.return&&Ke.return()}finally{if(ft)throw Yt}}}}function Fr(Et,St){(null==St||St>Et.length)&&(St=Et.length);for(var Ke=0,Ze=new Array(St);Ke<St;Ke++)Ze[Ke]=Et[Ke];return Ze}function Cs(Et,St){if(!(Et instanceof St))throw new TypeError("Cannot call a class as a function")}function er(Et,St){for(var Ke=0;Ke<St.length;Ke++){var Ze=St[Ke];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty(Et,Ze.key,Ze)}}function br(Et,St,Ke){return St&&er(Et.prototype,St),Ke&&er(Et,Ke),Et}function mr(Et,St){if("function"!=typeof St&&null!==St)throw new TypeError("Super expression must either be null or a function");Et.prototype=Object.create(St&&St.prototype,{constructor:{value:Et,writable:!0,configurable:!0}}),St&&Tr(Et,St)}function Tr(Et,St){return(Tr=Object.setPrototypeOf||function(Ze,Re){return Ze.__proto__=Re,Ze})(Et,St)}function Xr(Et){var St=function Be(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Re,Ze=ct(Et);if(St){var He=ct(this).constructor;Re=Reflect.construct(Ze,arguments,He)}else Re=Ze.apply(this,arguments);return Ct(this,Re)}}function Ct(Et,St){return!St||"object"!==ar(St)&&"function"!=typeof St?Ie(Et):St}function Ie(Et){if(void 0===Et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Et}function ct(Et){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(Ke){return Ke.__proto__||Object.getPrototypeOf(Ke)})(Et)}var lt=function(Et){mr(Ke,Et);var St=Xr(Ke);function Ke(Ze,Re){var He,ft,Yt;if(Cs(this,Ke),(He=St.call(this)).element=Ze,He.version=Ke.version,He.clickableElements=[],He.listeners=[],He.files=[],"string"==typeof He.element&&(He.element=document.querySelector(He.element)),!He.element||null==He.element.nodeType)throw new Error("Invalid dropzone element.");if(He.element.dropzone)throw new Error("Dropzone already attached.");Ke.instances.push(Ie(He)),He.element.dropzone=Ie(He);var xi=null!=(Yt=Ke.optionsForElement(He.element))?Yt:{};if(He.options=Ke.extend({},vr,xi,Re??{}),He.options.previewTemplate=He.options.previewTemplate.replace(/\n*/g,""),He.options.forceFallback||!Ke.isBrowserSupported())return Ct(He,He.options.fallback.call(Ie(He)));if(null==He.options.url&&(He.options.url=He.element.getAttribute("action")),!He.options.url)throw new Error("No URL provided.");if(He.options.acceptedFiles&&He.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(He.options.uploadMultiple&&He.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return He.options.acceptedMimeTypes&&(He.options.acceptedFiles=He.options.acceptedMimeTypes,delete He.options.acceptedMimeTypes),null!=He.options.renameFilename&&(He.options.renameFile=function(fi){return He.options.renameFilename.call(Ie(He),fi.name,fi)}),"string"==typeof He.options.method&&(He.options.method=He.options.method.toUpperCase()),(ft=He.getExistingFallback())&&ft.parentNode&&ft.parentNode.removeChild(ft),!1!==He.options.previewsContainer&&(He.previewsContainer=He.options.previewsContainer?Ke.getElement(He.options.previewsContainer,"previewsContainer"):He.element),He.options.clickable&&(He.clickableElements=!0===He.options.clickable?[He.element]:Ke.getElements(He.options.clickable,"clickable")),He.init(),He}return br(Ke,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(Re){return Re.accepted}).map(function(Re){return Re})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(Re){return!Re.accepted}).map(function(Re){return Re})}},{key:"getFilesWithStatus",value:function(Re){return this.files.filter(function(He){return He.status===Re}).map(function(He){return He})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Ke.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Ke.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Ke.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(Re){return Re.status===Ke.UPLOADING||Re.status===Ke.QUEUED}).map(function(Re){return Re})}},{key:"init",value:function(){var Re=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Ke.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function rt(){Re.hiddenFileInput&&Re.hiddenFileInput.parentNode.removeChild(Re.hiddenFileInput),Re.hiddenFileInput=document.createElement("input"),Re.hiddenFileInput.setAttribute("type","file"),(null===Re.options.maxFiles||Re.options.maxFiles>1)&&Re.hiddenFileInput.setAttribute("multiple","multiple"),Re.hiddenFileInput.className="dz-hidden-input",null!==Re.options.acceptedFiles&&Re.hiddenFileInput.setAttribute("accept",Re.options.acceptedFiles),null!==Re.options.capture&&Re.hiddenFileInput.setAttribute("capture",Re.options.capture),Re.hiddenFileInput.setAttribute("tabindex","-1"),Re.hiddenFileInput.style.visibility="hidden",Re.hiddenFileInput.style.position="absolute",Re.hiddenFileInput.style.top="0",Re.hiddenFileInput.style.left="0",Re.hiddenFileInput.style.height="0",Re.hiddenFileInput.style.width="0",Ke.getElement(Re.options.hiddenInputContainer,"hiddenInputContainer").appendChild(Re.hiddenFileInput),Re.hiddenFileInput.addEventListener("change",function(){var yt=Re.hiddenFileInput.files;if(yt.length){var it,fe=kn(yt,!0);try{for(fe.s();!(it=fe.n()).done;)Re.addFile(it.value)}catch(Pe){fe.e(Pe)}finally{fe.f()}}Re.emit("addedfiles",yt),rt()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var Yt,ft=kn(this.events,!0);try{for(ft.s();!(Yt=ft.n()).done;){var xi=Yt.value;this.on(xi,this.options[xi])}}catch(rt){ft.e(rt)}finally{ft.f()}this.on("uploadprogress",function(){return Re.updateTotalUploadProgress()}),this.on("removedfile",function(){return Re.updateTotalUploadProgress()}),this.on("canceled",function(rt){return Re.emit("complete",rt)}),this.on("complete",function(rt){if(0===Re.getAddedFiles().length&&0===Re.getUploadingFiles().length&&0===Re.getQueuedFiles().length)return setTimeout(function(){return Re.emit("queuecomplete")},0)});var Pi=function(yt){if(function(yt){if(yt.dataTransfer.types)for(var fe=0;fe<yt.dataTransfer.types.length;fe++)if("Files"===yt.dataTransfer.types[fe])return!0;return!1}(yt))return yt.stopPropagation(),yt.preventDefault?yt.preventDefault():yt.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(yt){return Re.emit("dragstart",yt)},dragenter:function(yt){return Pi(yt),Re.emit("dragenter",yt)},dragover:function(yt){var fe;try{fe=yt.dataTransfer.effectAllowed}catch{}return yt.dataTransfer.dropEffect="move"===fe||"linkMove"===fe?"move":"copy",Pi(yt),Re.emit("dragover",yt)},dragleave:function(yt){return Re.emit("dragleave",yt)},drop:function(yt){return Pi(yt),Re.drop(yt)},dragend:function(yt){return Re.emit("dragend",yt)}}}],this.clickableElements.forEach(function(rt){return Re.listeners.push({element:rt,events:{click:function(fe){return(rt!==Re.element||fe.target===Re.element||Ke.elementInside(fe.target,Re.element.querySelector(".dz-message")))&&Re.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Ke.instances.splice(Ke.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var Re,He=0,ft=0;if(this.getActiveFiles().length){var fi,xi=kn(this.getActiveFiles(),!0);try{for(xi.s();!(fi=xi.n()).done;){var Pi=fi.value;He+=Pi.upload.bytesSent,ft+=Pi.upload.total}}catch(rt){xi.e(rt)}finally{xi.f()}Re=100*He/ft}else Re=100;return this.emit("totaluploadprogress",Re,ft,He)}},{key:"_getParamName",value:function(Re){return"function"==typeof this.options.paramName?this.options.paramName(Re):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(Re,"]"):"")}},{key:"_renameFile",value:function(Re){return"function"!=typeof this.options.renameFile?Re.name:this.options.renameFile(Re)}},{key:"getFallbackForm",value:function(){var Re,He;if(Re=this.getExistingFallback())return Re;var ft='<div class="dz-fallback">';this.options.dictFallbackText&&(ft+="<p>".concat(this.options.dictFallbackText,"</p>")),ft+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var Yt=Ke.createElement(ft);return"FORM"!==this.element.tagName?(He=Ke.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(Yt):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),He??Yt}},{key:"getExistingFallback",value:function(){for(var Re=function(Pi){var yt,rt=kn(Pi,!0);try{for(rt.s();!(yt=rt.n()).done;){var fe=yt.value;if(/(^| )fallback($| )/.test(fe.className))return fe}}catch(it){rt.e(it)}finally{rt.f()}},He=0,ft=["div","form"];He<ft.length;He++){var xi;if(xi=Re(this.element.getElementsByTagName(ft[He])))return xi}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(Re){return function(){var He=[];for(var ft in Re.events)He.push(Re.element.addEventListener(ft,Re.events[ft],!1));return He}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(Re){return function(){var He=[];for(var ft in Re.events)He.push(Re.element.removeEventListener(ft,Re.events[ft],!1));return He}()})}},{key:"disable",value:function(){var Re=this;return this.clickableElements.forEach(function(He){return He.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(He){return Re.cancelUpload(He)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(Re){return Re.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(Re){var He=0,ft="b";if(Re>0){for(var Yt=["tb","gb","mb","kb","b"],xi=0;xi<Yt.length;xi++){var fi=Yt[xi];if(Re>=Math.pow(this.options.filesizeBase,4-xi)/10){He=Re/Math.pow(this.options.filesizeBase,4-xi),ft=fi;break}}He=Math.round(10*He)/10}return"<strong>".concat(He,"</strong> ").concat(this.options.dictFileSizeUnits[ft])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(Re){if(Re.dataTransfer){this.emit("drop",Re);for(var He=[],ft=0;ft<Re.dataTransfer.files.length;ft++)He[ft]=Re.dataTransfer.files[ft];if(He.length){var Yt=Re.dataTransfer.items;Yt&&Yt.length&&null!=Yt[0].webkitGetAsEntry?this._addFilesFromItems(Yt):this.handleFiles(He)}this.emit("addedfiles",He)}}},{key:"paste",value:function(Re){if(null!=function $i(Et,St){return typeof Et<"u"&&null!==Et?St(Et):void 0}(Re?.clipboardData,function(ft){return ft.items})){this.emit("paste",Re);var He=Re.clipboardData.items;if(He.length)return this._addFilesFromItems(He)}}},{key:"handleFiles",value:function(Re){var ft,He=kn(Re,!0);try{for(He.s();!(ft=He.n()).done;)this.addFile(ft.value)}catch(xi){He.e(xi)}finally{He.f()}}},{key:"_addFilesFromItems",value:function(Re){var He=this;return function(){var xi,ft=[],Yt=kn(Re,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var Pi,fi=xi.value;null!=fi.webkitGetAsEntry&&(Pi=fi.webkitGetAsEntry())?ft.push(Pi.isFile?He.addFile(fi.getAsFile()):Pi.isDirectory?He._addFilesFromDirectory(Pi,Pi.name):void 0):ft.push(null==fi.getAsFile||null!=fi.kind&&"file"!==fi.kind?void 0:He.addFile(fi.getAsFile()))}}catch(rt){Yt.e(rt)}finally{Yt.f()}return ft}()}},{key:"_addFilesFromDirectory",value:function(Re,He){var ft=this,Yt=Re.createReader(),xi=function(rt){return function di(Et,St,Ke){if(typeof Et<"u"&&null!==Et&&"function"==typeof Et[St])return Ke(Et,St)}(console,"log",function(yt){return yt.log(rt)})};return function Pi(){return Yt.readEntries(function(rt){if(rt.length>0){var fe,yt=kn(rt,!0);try{for(yt.s();!(fe=yt.n()).done;){var it=fe.value;it.isFile?it.file(function(Tt){if(!ft.options.ignoreHiddenFiles||"."!==Tt.name.substring(0,1))return Tt.fullPath="".concat(He,"/").concat(Tt.name),ft.addFile(Tt)}):it.isDirectory&&ft._addFilesFromDirectory(it,"".concat(He,"/").concat(it.name))}}catch(Tt){yt.e(Tt)}finally{yt.f()}Pi()}return null},xi)}()}},{key:"accept",value:function(Re,He){this.options.maxFilesize&&Re.size>1024*this.options.maxFilesize*1024?He(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(Re.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Ke.isValidFile(Re,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(He(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",Re)):this.options.accept.call(this,Re,He):He(this.options.dictInvalidFileType)}},{key:"addFile",value:function(Re){var He=this;Re.upload={uuid:Ke.uuidv4(),progress:0,total:Re.size,bytesSent:0,filename:this._renameFile(Re)},this.files.push(Re),Re.status=Ke.ADDED,this.emit("addedfile",Re),this._enqueueThumbnail(Re),this.accept(Re,function(ft){ft?(Re.accepted=!1,He._errorProcessing([Re],ft)):(Re.accepted=!0,He.options.autoQueue&&He.enqueueFile(Re)),He._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(Re){var ft,He=kn(Re,!0);try{for(He.s();!(ft=He.n()).done;)this.enqueueFile(ft.value)}catch(xi){He.e(xi)}finally{He.f()}return null}},{key:"enqueueFile",value:function(Re){var He=this;if(Re.status!==Ke.ADDED||!0!==Re.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(Re.status=Ke.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return He.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(Re){var He=this;if(this.options.createImageThumbnails&&Re.type.match(/image.*/)&&Re.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(Re),setTimeout(function(){return He._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var Re=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var He=this._thumbnailQueue.shift();return this.createThumbnail(He,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(ft){return Re.emit("thumbnail",He,ft),Re._processingThumbnail=!1,Re._processThumbnailQueue()})}}},{key:"removeFile",value:function(Re){if(Re.status===Ke.UPLOADING&&this.cancelUpload(Re),this.files=zt(this.files,Re),this.emit("removedfile",Re),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(Re){null==Re&&(Re=!1);var ft,He=kn(this.files.slice(),!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;(Yt.status!==Ke.UPLOADING||Re)&&this.removeFile(Yt)}}catch(xi){He.e(xi)}finally{He.f()}return null}},{key:"resizeImage",value:function(Re,He,ft,Yt,xi){var fi=this;return this.createThumbnail(Re,He,ft,Yt,!0,function(Pi,rt){if(null==rt)return xi(Re);var yt=fi.options.resizeMimeType;null==yt&&(yt=Re.type);var fe=rt.toDataURL(yt,fi.options.resizeQuality);return("image/jpeg"===yt||"image/jpg"===yt)&&(fe=ui.restore(Re.dataURL,fe)),xi(Ke.dataURItoBlob(fe))})}},{key:"createThumbnail",value:function(Re,He,ft,Yt,xi,fi){var Pi=this,rt=new FileReader;rt.onload=function(){Re.dataURL=rt.result,"image/svg+xml"!==Re.type?Pi.createThumbnailFromUrl(Re,He,ft,Yt,xi,fi):fi?.(rt.result)},rt.readAsDataURL(Re)}},{key:"displayExistingFile",value:function(Re,He,ft,Yt){var xi=this,fi=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",Re),this.emit("complete",Re),fi){Re.dataURL=He,this.createThumbnailFromUrl(Re,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(yt){xi.emit("thumbnail",Re,yt),ft&&ft()},Yt)}else this.emit("thumbnail",Re,He),ft&&ft()}},{key:"createThumbnailFromUrl",value:function(Re,He,ft,Yt,xi,fi,Pi){var rt=this,yt=document.createElement("img");return Pi&&(yt.crossOrigin=Pi),xi="from-image"!=getComputedStyle(document.body).imageOrientation&&xi,yt.onload=function(){var fe=function(Tt){return Tt(1)};return typeof EXIF<"u"&&null!==EXIF&&xi&&(fe=function(Tt){return EXIF.getData(yt,function(){return Tt(EXIF.getTag(this,"Orientation"))})}),fe(function(it){Re.width=yt.width,Re.height=yt.height;var Tt=rt.options.resize.call(rt,Re,He,ft,Yt),Pe=document.createElement("canvas"),It=Pe.getContext("2d");switch(Pe.width=Tt.trgWidth,Pe.height=Tt.trgHeight,it>4&&(Pe.width=Tt.trgHeight,Pe.height=Tt.trgWidth),it){case 2:It.translate(Pe.width,0),It.scale(-1,1);break;case 3:It.translate(Pe.width,Pe.height),It.rotate(Math.PI);break;case 4:It.translate(0,Pe.height),It.scale(1,-1);break;case 5:It.rotate(.5*Math.PI),It.scale(1,-1);break;case 6:It.rotate(.5*Math.PI),It.translate(0,-Pe.width);break;case 7:It.rotate(.5*Math.PI),It.translate(Pe.height,-Pe.width),It.scale(-1,1);break;case 8:It.rotate(-.5*Math.PI),It.translate(-Pe.height,0)}pt(It,yt,null!=Tt.srcX?Tt.srcX:0,null!=Tt.srcY?Tt.srcY:0,Tt.srcWidth,Tt.srcHeight,null!=Tt.trgX?Tt.trgX:0,null!=Tt.trgY?Tt.trgY:0,Tt.trgWidth,Tt.trgHeight);var le=Pe.toDataURL("image/png");if(null!=fi)return fi(le,Pe)})},null!=fi&&(yt.onerror=fi),yt.src=Re.dataURL}},{key:"processQueue",value:function(){var Re=this.options.parallelUploads,He=this.getUploadingFiles().length,ft=He;if(!(He>=Re)){var Yt=this.getQueuedFiles();if(Yt.length>0){if(this.options.uploadMultiple)return this.processFiles(Yt.slice(0,Re-He));for(;ft<Re;){if(!Yt.length)return;this.processFile(Yt.shift()),ft++}}}}},{key:"processFile",value:function(Re){return this.processFiles([Re])}},{key:"processFiles",value:function(Re){var ft,He=kn(Re,!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;Yt.processing=!0,Yt.status=Ke.UPLOADING,this.emit("processing",Yt)}}catch(xi){He.e(xi)}finally{He.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",Re),this.uploadFiles(Re)}},{key:"_getFilesWithXhr",value:function(Re){return this.files.filter(function(ft){return ft.xhr===Re}).map(function(ft){return ft})}},{key:"cancelUpload",value:function(Re){if(Re.status===Ke.UPLOADING){var Yt,He=this._getFilesWithXhr(Re.xhr),ft=kn(He,!0);try{for(ft.s();!(Yt=ft.n()).done;)Yt.value.status=Ke.CANCELED}catch(yt){ft.e(yt)}finally{ft.f()}typeof Re.xhr<"u"&&Re.xhr.abort();var Pi,fi=kn(He,!0);try{for(fi.s();!(Pi=fi.n()).done;)this.emit("canceled",Pi.value)}catch(yt){fi.e(yt)}finally{fi.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",He)}else(Re.status===Ke.ADDED||Re.status===Ke.QUEUED)&&(Re.status=Ke.CANCELED,this.emit("canceled",Re),this.options.uploadMultiple&&this.emit("canceledmultiple",[Re]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(Re){if("function"==typeof Re){for(var He=arguments.length,ft=new Array(He>1?He-1:0),Yt=1;Yt<He;Yt++)ft[Yt-1]=arguments[Yt];return Re.apply(this,ft)}return Re}},{key:"uploadFile",value:function(Re){return this.uploadFiles([Re])}},{key:"uploadFiles",value:function(Re){var He=this;this._transformFiles(Re,function(ft){if(He.options.chunking){var Yt=ft[0];Re[0].upload.chunked=He.options.chunking&&(He.options.forceChunking||Yt.size>He.options.chunkSize),Re[0].upload.totalChunkCount=Math.ceil(Yt.size/He.options.chunkSize)}if(Re[0].upload.chunked){var xi=Re[0],fi=ft[0];xi.upload.chunks=[];var rt=function(){for(var Pe=0;void 0!==xi.upload.chunks[Pe];)Pe++;if(!(Pe>=xi.upload.totalChunkCount)){var It=Pe*He.options.chunkSize,le=Math.min(It+He.options.chunkSize,fi.size),o={name:He._getParamName(0),data:fi.webkitSlice?fi.webkitSlice(It,le):fi.slice(It,le),filename:xi.upload.filename,chunkIndex:Pe};xi.upload.chunks[Pe]={file:xi,index:Pe,dataBlock:o,status:Ke.UPLOADING,progress:0,retries:0},He._uploadData(Re,[o])}};if(xi.upload.finishedChunkUpload=function(Tt,Pe){var It=!0;Tt.status=Ke.SUCCESS,Tt.dataBlock=null,Tt.xhr=null;for(var le=0;le<xi.upload.totalChunkCount;le++){if(void 0===xi.upload.chunks[le])return rt();xi.upload.chunks[le].status!==Ke.SUCCESS&&(It=!1)}It&&He.options.chunksUploaded(xi,function(){He._finished(Re,Pe,null)})},He.options.parallelChunkUploads)for(var yt=0;yt<xi.upload.totalChunkCount;yt++)rt();else rt()}else{for(var fe=[],it=0;it<Re.length;it++)fe[it]={name:He._getParamName(it),data:ft[it],filename:Re[it].upload.filename};He._uploadData(Re,fe)}})}},{key:"_getChunk",value:function(Re,He){for(var ft=0;ft<Re.upload.totalChunkCount;ft++)if(void 0!==Re.upload.chunks[ft]&&Re.upload.chunks[ft].xhr===He)return Re.upload.chunks[ft]}},{key:"_uploadData",value:function(Re,He){var fi,ft=this,Yt=new XMLHttpRequest,xi=kn(Re,!0);try{for(xi.s();!(fi=xi.n()).done;)fi.value.xhr=Yt}catch(U){xi.e(U)}finally{xi.f()}Re[0].upload.chunked&&(Re[0].upload.chunks[He[0].chunkIndex].xhr=Yt);var rt=this.resolveOption(this.options.method,Re),yt=this.resolveOption(this.options.url,Re);Yt.open(rt,yt,!0),this.resolveOption(this.options.timeout,Re)&&(Yt.timeout=this.resolveOption(this.options.timeout,Re)),Yt.withCredentials=!!this.options.withCredentials,Yt.onload=function(U){ft._finishedUploading(Re,Yt,U)},Yt.ontimeout=function(){ft._handleUploadError(Re,Yt,"Request timedout after ".concat(ft.options.timeout/1e3," seconds"))},Yt.onerror=function(){ft._handleUploadError(Re,Yt)},(null!=Yt.upload?Yt.upload:Yt).onprogress=function(U){return ft._updateFilesUploadProgress(Re,Yt,U)};var Tt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Pe in this.options.headers&&Ke.extend(Tt,this.options.headers),Tt){var It=Tt[Pe];It&&Yt.setRequestHeader(Pe,It)}var le=new FormData;if(this.options.params){var o=this.options.params;for(var c in"function"==typeof o&&(o=o.call(this,Re,Yt,Re[0].upload.chunked?this._getChunk(Re[0],Yt):null)),o){var h=o[c];if(Array.isArray(h))for(var _=0;_<h.length;_++)le.append(c,h[_]);else le.append(c,h)}}var x,b=kn(Re,!0);try{for(b.s();!(x=b.n()).done;)this.emit("sending",x.value,Yt,le)}catch(U){b.e(U)}finally{b.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",Re,Yt,le),this._addFormElementData(le);for(var I=0;I<He.length;I++){var F=He[I];le.append(F.name,F.data,F.filename)}this.submitRequest(Yt,le,Re)}},{key:"_transformFiles",value:function(Re,He){for(var ft=this,Yt=[],xi=0,fi=function(yt){ft.options.transformFile.call(ft,Re[yt],function(fe){Yt[yt]=fe,++xi===Re.length&&He(Yt)})},Pi=0;Pi<Re.length;Pi++)fi(Pi)}},{key:"_addFormElementData",value:function(Re){if("FORM"===this.element.tagName){var ft,He=kn(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value,xi=Yt.getAttribute("name"),fi=Yt.getAttribute("type");if(fi&&(fi=fi.toLowerCase()),!(typeof xi>"u"||null===xi))if("SELECT"===Yt.tagName&&Yt.hasAttribute("multiple")){var rt,Pi=kn(Yt.options,!0);try{for(Pi.s();!(rt=Pi.n()).done;){var yt=rt.value;yt.selected&&Re.append(xi,yt.value)}}catch(fe){Pi.e(fe)}finally{Pi.f()}}else(!fi||"checkbox"!==fi&&"radio"!==fi||Yt.checked)&&Re.append(xi,Yt.value)}}catch(fe){He.e(fe)}finally{He.f()}}}},{key:"_updateFilesUploadProgress",value:function(Re,He,ft){if(Re[0].upload.chunked){var Pi=Re[0],rt=this._getChunk(Pi,He);ft?(rt.progress=100*ft.loaded/ft.total,rt.total=ft.total,rt.bytesSent=ft.loaded):(rt.progress=100,rt.bytesSent=rt.total),Pi.upload.progress=0,Pi.upload.total=0,Pi.upload.bytesSent=0;for(var yt=0;yt<Pi.upload.totalChunkCount;yt++)Pi.upload.chunks[yt]&&typeof Pi.upload.chunks[yt].progress<"u"&&(Pi.upload.progress+=Pi.upload.chunks[yt].progress,Pi.upload.total+=Pi.upload.chunks[yt].total,Pi.upload.bytesSent+=Pi.upload.chunks[yt].bytesSent);Pi.upload.progress=Pi.upload.progress/Pi.upload.totalChunkCount,this.emit("uploadprogress",Pi,Pi.upload.progress,Pi.upload.bytesSent)}else{var xi,Yt=kn(Re,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var fi=xi.value;fi.upload.total&&fi.upload.bytesSent&&fi.upload.bytesSent==fi.upload.total||(ft?(fi.upload.progress=100*ft.loaded/ft.total,fi.upload.total=ft.total,fi.upload.bytesSent=ft.loaded):(fi.upload.progress=100,fi.upload.bytesSent=fi.upload.total),this.emit("uploadprogress",fi,fi.upload.progress,fi.upload.bytesSent))}}catch(fe){Yt.e(fe)}finally{Yt.f()}}}},{key:"_finishedUploading",value:function(Re,He,ft){var Yt;if(Re[0].status!==Ke.CANCELED&&4===He.readyState){if("arraybuffer"!==He.responseType&&"blob"!==He.responseType&&(Yt=He.responseText,He.getResponseHeader("content-type")&&~He.getResponseHeader("content-type").indexOf("application/json")))try{Yt=JSON.parse(Yt)}catch(xi){ft=xi,Yt="Invalid JSON response from server."}this._updateFilesUploadProgress(Re,He),200<=He.status&&He.status<300?Re[0].upload.chunked?Re[0].upload.finishedChunkUpload(this._getChunk(Re[0],He),Yt):this._finished(Re,Yt,ft):this._handleUploadError(Re,He,Yt)}}},{key:"_handleUploadError",value:function(Re,He,ft){if(Re[0].status!==Ke.CANCELED){if(Re[0].upload.chunked&&this.options.retryChunks){var Yt=this._getChunk(Re[0],He);if(Yt.retries++<this.options.retryChunksLimit)return void this._uploadData(Re,[Yt.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(Re,ft||this.options.dictResponseError.replace("{{statusCode}}",He.status),He)}}},{key:"submitRequest",value:function(Re,He,ft){1==Re.readyState?Re.send(He):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(Re,He,ft){var xi,Yt=kn(Re,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var fi=xi.value;fi.status=Ke.SUCCESS,this.emit("success",fi,He,ft),this.emit("complete",fi)}}catch(Pi){Yt.e(Pi)}finally{Yt.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",Re,He,ft),this.emit("completemultiple",Re)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(Re,He,ft){var xi,Yt=kn(Re,!0);try{for(Yt.s();!(xi=Yt.n()).done;){var fi=xi.value;fi.status=Ke.ERROR,this.emit("error",fi,He,ft),this.emit("complete",fi)}}catch(Pi){Yt.e(Pi)}finally{Yt.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",Re,He,ft),this.emit("completemultiple",Re)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=tn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(Re){for(var He=arguments.length,ft=new Array(He>1?He-1:0),Yt=1;Yt<He;Yt++)ft[Yt-1]=arguments[Yt];for(var xi=0,fi=ft;xi<fi.length;xi++){var Pi=fi[xi];for(var rt in Pi)Re[rt]=Pi[rt]}return Re}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Re){var He=16*Math.random()|0;return("x"===Re?He:3&He|8).toString(16)})}}]),Ke}(tn);lt.initClass(),lt.version="5.9.3",lt.options={},lt.optionsForElement=function(Et){if(Et.getAttribute("id"))return lt.options[qt(Et.getAttribute("id"))]},lt.instances=[],lt.forElement=function(Et){if("string"==typeof Et&&(Et=document.querySelector(Et)),null==Et?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return Et.dropzone},lt.autoDiscover=!0,lt.discover=function(){var Et;if(document.querySelectorAll)Et=document.querySelectorAll(".dropzone");else{Et=[];var St=function(Ze){return function(){var ft,Re=[],He=kn(Ze,!0);try{for(He.s();!(ft=He.n()).done;){var Yt=ft.value;/(^| )dropzone($| )/.test(Yt.className)?Re.push(Et.push(Yt)):Re.push(void 0)}}catch(xi){He.e(xi)}finally{He.f()}return Re}()};St(document.getElementsByTagName("div")),St(document.getElementsByTagName("form"))}return function(){var Re,Ke=[],Ze=kn(Et,!0);try{for(Ze.s();!(Re=Ze.n()).done;){var He=Re.value;!1!==lt.optionsForElement(He)?Ke.push(new lt(He)):Ke.push(void 0)}}catch(ft){Ze.e(ft)}finally{Ze.f()}return Ke}()},lt.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],lt.isBrowserSupported=function(){var Et=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==lt.blacklistedBrowsers&&(lt.blockedBrowsers=lt.blacklistedBrowsers);var Ke,St=kn(lt.blockedBrowsers,!0);try{for(St.s();!(Ke=St.n()).done;)Ke.value.test(navigator.userAgent)&&(Et=!1)}catch(Re){St.e(Re)}finally{St.f()}}else Et=!1;else Et=!1;return Et},lt.dataURItoBlob=function(Et){for(var St=atob(Et.split(",")[1]),Ke=Et.split(",")[0].split(":")[1].split(";")[0],Ze=new ArrayBuffer(St.length),Re=new Uint8Array(Ze),He=0,ft=St.length,Yt=0<=ft;Yt?He<=ft:He>=ft;Yt?He++:He--)Re[He]=St.charCodeAt(He);return new Blob([Ze],{type:Ke})};var zt=function(St,Ke){return St.filter(function(Ze){return Ze!==Ke}).map(function(Ze){return Ze})},qt=function(St){return St.replace(/[\-_](\w)/g,function(Ke){return Ke.charAt(1).toUpperCase()})};lt.createElement=function(Et){var St=document.createElement("div");return St.innerHTML=Et,St.childNodes[0]},lt.elementInside=function(Et,St){if(Et===St)return!0;for(;Et=Et.parentNode;)if(Et===St)return!0;return!1},lt.getElement=function(Et,St){var Ke;if("string"==typeof Et?Ke=document.querySelector(Et):null!=Et.nodeType&&(Ke=Et),null==Ke)throw new Error("Invalid `".concat(St,"` option provided. Please provide a CSS selector or a plain HTML element."));return Ke},lt.getElements=function(Et,St){var Ze;if(Et instanceof Array){Ze=[];try{var He,Re=kn(Et,!0);try{for(Re.s();!(He=Re.n()).done;)Ze.push(this.getElement(He.value,St))}catch(xi){Re.e(xi)}finally{Re.f()}}catch{Ze=null}}else if("string"==typeof Et){Ze=[];var Yt,ft=kn(document.querySelectorAll(Et),!0);try{for(ft.s();!(Yt=ft.n()).done;)Ze.push(Yt.value)}catch(xi){ft.e(xi)}finally{ft.f()}}else null!=Et.nodeType&&(Ze=[Et]);if(null==Ze||!Ze.length)throw new Error("Invalid `".concat(St,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return Ze},lt.confirm=function(Et,St,Ke){return window.confirm(Et)?St():null!=Ke?Ke():void 0},lt.isValidFile=function(Et,St){if(!St)return!0;St=St.split(",");var He,Ke=Et.type,Ze=Ke.replace(/\/.*$/,""),Re=kn(St,!0);try{for(Re.s();!(He=Re.n()).done;){var ft=He.value;if("."===(ft=ft.trim()).charAt(0)){if(-1!==Et.name.toLowerCase().indexOf(ft.toLowerCase(),Et.name.length-ft.length))return!0}else if(/\/\*$/.test(ft)){if(Ze===ft.replace(/\/.*$/,""))return!0}else if(Ke===ft)return!0}}catch(Yt){Re.e(Yt)}finally{Re.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(Et){return this.each(function(){return new lt(this,Et)})}),lt.ADDED="added",lt.QUEUED="queued",lt.ACCEPTED=lt.QUEUED,lt.UPLOADING="uploading",lt.PROCESSING=lt.UPLOADING,lt.CANCELED="canceled",lt.ERROR="error",lt.SUCCESS="success";var pt=function(St,Ke,Ze,Re,He,ft,Yt,xi,fi,Pi){var rt=function(St){var Ze=St.naturalHeight,Re=document.createElement("canvas");Re.width=1,Re.height=Ze;var He=Re.getContext("2d");He.drawImage(St,0,0);for(var Yt=He.getImageData(1,0,1,Ze).data,xi=0,fi=Ze,Pi=Ze;Pi>xi;)0===Yt[4*(Pi-1)+3]?fi=Pi:xi=Pi,Pi=fi+xi>>1;var yt=Pi/Ze;return 0===yt?1:yt}(Ke);return St.drawImage(Ke,Ze,Re,He,ft,Yt,xi,fi,Pi/rt)},ui=function(){function Et(){Cs(this,Et)}return br(Et,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(Ke){for(var Ze="",Re=void 0,He=void 0,ft="",Yt=void 0,xi=void 0,fi=void 0,Pi="",rt=0;Yt=(Re=Ke[rt++])>>2,xi=(3&Re)<<4|(He=Ke[rt++])>>4,fi=(15&He)<<2|(ft=Ke[rt++])>>6,Pi=63&ft,isNaN(He)?fi=Pi=64:isNaN(ft)&&(Pi=64),Ze=Ze+this.KEY_STR.charAt(Yt)+this.KEY_STR.charAt(xi)+this.KEY_STR.charAt(fi)+this.KEY_STR.charAt(Pi),Re=He=ft="",Yt=xi=fi=Pi="",rt<Ke.length;);return Ze}},{key:"restore",value:function(Ke,Ze){if(!Ke.match("data:image/jpeg;base64,"))return Ze;var Re=this.decode64(Ke.replace("data:image/jpeg;base64,","")),He=this.slice2Segments(Re),ft=this.exifManipulation(Ze,He);return"data:image/jpeg;base64,".concat(this.encode64(ft))}},{key:"exifManipulation",value:function(Ke,Ze){var Re=this.getExifArray(Ze),He=this.insertExif(Ke,Re);return new Uint8Array(He)}},{key:"getExifArray",value:function(Ke){for(var Ze=void 0,Re=0;Re<Ke.length;){if(255===(Ze=Ke[Re])[0]&225===Ze[1])return Ze;Re++}return[]}},{key:"insertExif",value:function(Ke,Ze){var Re=Ke.replace("data:image/jpeg;base64,",""),He=this.decode64(Re),ft=He.indexOf(255,3),Yt=He.slice(0,ft),xi=He.slice(ft),fi=Yt;return(fi=fi.concat(Ze)).concat(xi)}},{key:"slice2Segments",value:function(Ke){for(var Ze=0,Re=[];!(255===Ke[Ze]&218===Ke[Ze+1]);){if(255===Ke[Ze]&216===Ke[Ze+1])Ze+=2;else{var ft=Ze+(256*Ke[Ze+2]+Ke[Ze+3])+2,Yt=Ke.slice(Ze,ft);Re.push(Yt),Ze=ft}if(Ze>Ke.length)break}return Re}},{key:"decode64",value:function(Ke){var He=void 0,ft="",Yt=void 0,xi=void 0,fi=void 0,Pi="",rt=0,yt=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(Ke)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),Ke=Ke.replace(/[^A-Za-z0-9\+\/\=]/g,"");Yt=this.KEY_STR.indexOf(Ke.charAt(rt++)),He=(15&(xi=this.KEY_STR.indexOf(Ke.charAt(rt++))))<<4|(fi=this.KEY_STR.indexOf(Ke.charAt(rt++)))>>2,ft=(3&fi)<<6|(Pi=this.KEY_STR.indexOf(Ke.charAt(rt++))),yt.push(Yt<<2|xi>>4),64!==fi&&yt.push(He),64!==Pi&&yt.push(ft),He=ft="",Yt=xi=fi=Pi="",rt<Ke.length;);return yt}}]),Et}();ui.initClass();lt._autoDiscoverFunction=function(){if(lt.autoDiscover)return lt.discover()},function(St,Ke){var Ze=!1,Re=!0,He=St.document,ft=He.documentElement,Yt=He.addEventListener?"addEventListener":"attachEvent",xi=He.addEventListener?"removeEventListener":"detachEvent",fi=He.addEventListener?"":"on",Pi=function yt(fe){if(("readystatechange"!==fe.type||"complete"===He.readyState)&&(("load"===fe.type?St:He)[xi](fi+fe.type,yt,!1),!Ze&&(Ze=!0)))return Ke.call(St,fe.type||fe)};if("complete"!==He.readyState){if(He.createEventObject&&ft.doScroll){try{Re=!St.frameElement}catch{}Re&&function yt(){try{ft.doScroll("left")}catch{return void setTimeout(yt,50)}return Pi("poll")}()}He[Yt](fi+"DOMContentLoaded",Pi,!1),He[Yt](fi+"readystatechange",Pi,!1),St[Yt](fi+"load",Pi,!1)}}(window,lt._autoDiscoverFunction),window.Dropzone=lt;var un=lt}(),hn}()},6900:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(fo){for(var Gr=[],Rt=1;Rt<arguments.length;Rt++)Gr[Rt-1]=arguments[Rt];if(!fo)throw TypeError("Cannot convert undefined or null to object");for(var k=function(V){V&&Object.keys(V).forEach(function(Oe){return fo[Oe]=V[Oe]})},hn=0,ze=Gr;hn<ze.length;hn++)k(ze[hn]);return fo})},9216:function(fo,Gr){!function(Rt){"use strict";function hn(m){var D,G,ne,_e;for(G=1,ne=arguments.length;G<ne;G++)for(D in _e=arguments[G])m[D]=_e[D];return m}var ze=Object.create||function(){function m(){}return function(D){return m.prototype=D,new m}}();function i(m,D){var G=Array.prototype.slice;if(m.bind)return m.bind.apply(m,G.call(arguments,1));var ne=G.call(arguments,2);return function(){return m.apply(D,ne.length?ne.concat(G.call(arguments)):arguments)}}var V=0;function Oe(m){return"_leaflet_id"in m||(m._leaflet_id=++V),m._leaflet_id}function Ae(m,D,G){var ne,_e,We,Ht;return Ht=function(){ne=!1,_e&&(We.apply(G,_e),_e=!1)},We=function(){ne?_e=arguments:(m.apply(G,arguments),setTimeout(Ht,D),ne=!0)},We}function De(m,D,G){var ne=D[1],_e=D[0],We=ne-_e;return m===ne&&G?m:((m-_e)%We+We)%We+_e}function Fe(){return!1}function Ue(m,D){if(!1===D)return m;var G=Math.pow(10,void 0===D?6:D);return Math.round(m*G)/G}function Je(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function nt(m){return Je(m).split(/\s+/)}function mt(m,D){for(var G in Object.prototype.hasOwnProperty.call(m,"options")||(m.options=m.options?ze(m.options):{}),D)m.options[G]=D[G];return m.options}function Pt(m,D,G){var ne=[];for(var _e in m)ne.push(encodeURIComponent(G?_e.toUpperCase():_e)+"="+encodeURIComponent(m[_e]));return(D&&-1!==D.indexOf("?")?"&":"?")+ne.join("&")}var ot=/\{ *([\w_ -]+) *\}/g;function gt(m,D){return m.replace(ot,function(G,ne){var _e=D[ne];if(void 0===_e)throw new Error("No value provided for variable "+G);return"function"==typeof _e&&(_e=_e(D)),_e})}var wt=Array.isArray||function(m){return"[object Array]"===Object.prototype.toString.call(m)};function si(m,D){for(var G=0;G<m.length;G++)if(m[G]===D)return G;return-1}var $e="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ii(m){return window["webkit"+m]||window["moz"+m]||window["ms"+m]}var oi=0;function at(m){var D=+new Date,G=Math.max(0,16-(D-oi));return oi=D+G,window.setTimeout(m,G)}var ri=window.requestAnimationFrame||ii("RequestAnimationFrame")||at,Xt=window.cancelAnimationFrame||ii("CancelAnimationFrame")||ii("CancelRequestAnimationFrame")||function(m){window.clearTimeout(m)};function Vt(m,D,G){if(!G||ri!==at)return ri.call(window,i(m,D));m.call(D)}function dt(m){m&&Xt.call(window,m)}var Zt={__proto__:null,extend:hn,create:ze,bind:i,get lastId(){return V},stamp:Oe,throttle:Ae,wrapNum:De,falseFn:Fe,formatNum:Ue,trim:Je,splitWords:nt,setOptions:mt,getParamString:Pt,template:gt,isArray:wt,indexOf:si,emptyImageUrl:$e,requestFn:ri,cancelFn:Xt,requestAnimFrame:Vt,cancelAnimFrame:dt};function ni(){}ni.extend=function(m){var D=function(){mt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},G=D.__super__=this.prototype,ne=ze(G);for(var _e in ne.constructor=D,D.prototype=ne,this)Object.prototype.hasOwnProperty.call(this,_e)&&"prototype"!==_e&&"__super__"!==_e&&(D[_e]=this[_e]);return m.statics&&hn(D,m.statics),m.includes&&(function gi(m){if(!(typeof L>"u")&&L&&L.Mixin){m=wt(m)?m:[m];for(var D=0;D<m.length;D++)m[D]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(m.includes),hn.apply(null,[ne].concat(m.includes))),hn(ne,m),delete ne.statics,delete ne.includes,ne.options&&(ne.options=G.options?ze(G.options):{},hn(ne.options,m.options)),ne._initHooks=[],ne.callInitHooks=function(){if(!this._initHooksCalled){G.callInitHooks&&G.callInitHooks.call(this),this._initHooksCalled=!0;for(var We=0,Ht=ne._initHooks.length;We<Ht;We++)ne._initHooks[We].call(this)}},D},ni.include=function(m){var D=this.prototype.options;return hn(this.prototype,m),m.options&&(this.prototype.options=D,this.mergeOptions(m.options)),this},ni.mergeOptions=function(m){return hn(this.prototype.options,m),this},ni.addInitHook=function(m){var D=Array.prototype.slice.call(arguments,1),G="function"==typeof m?m:function(){this[m].apply(this,D)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(G),this};var Gi={on:function(m,D,G){if("object"==typeof m)for(var ne in m)this._on(ne,m[ne],D);else for(var _e=0,We=(m=nt(m)).length;_e<We;_e++)this._on(m[_e],D,G);return this},off:function(m,D,G){if(arguments.length)if("object"==typeof m)for(var ne in m)this._off(ne,m[ne],D);else{m=nt(m);for(var _e=1===arguments.length,We=0,Ht=m.length;We<Ht;We++)_e?this._off(m[We]):this._off(m[We],D,G)}else delete this._events;return this},_on:function(m,D,G,ne){if("function"==typeof D){if(!1===this._listens(m,D,G)){G===this&&(G=void 0);var _e={fn:D,ctx:G};ne&&(_e.once=!0),this._events=this._events||{},this._events[m]=this._events[m]||[],this._events[m].push(_e)}}else console.warn("wrong listener type: "+typeof D)},_off:function(m,D,G){var ne,_e,We;if(this._events&&(ne=this._events[m])){if(1===arguments.length){if(this._firingCount)for(_e=0,We=ne.length;_e<We;_e++)ne[_e].fn=Fe;return void delete this._events[m]}if("function"!=typeof D)return void console.warn("wrong listener type: "+typeof D);var Ht=this._listens(m,D,G);!1!==Ht&&(this._firingCount&&(ne[Ht].fn=Fe,this._events[m]=ne=ne.slice()),ne.splice(Ht,1))}},fire:function(m,D,G){if(!this.listens(m,G))return this;var ne=hn({},D,{type:m,target:this,sourceTarget:D&&D.sourceTarget||this});if(this._events){var _e=this._events[m];if(_e){this._firingCount=this._firingCount+1||1;for(var We=0,Ht=_e.length;We<Ht;We++){var ai=_e[We],Ti=ai.fn;ai.once&&this.off(m,Ti,ai.ctx),Ti.call(ai.ctx||this,ne)}this._firingCount--}}return G&&this._propagateEvent(ne),this},listens:function(m,D,G,ne){"string"!=typeof m&&console.warn('"string" type argument expected');var _e=D;"function"!=typeof D&&(ne=!!D,_e=void 0,G=void 0);var We=this._events&&this._events[m];if(We&&We.length&&!1!==this._listens(m,_e,G))return!0;if(ne)for(var Ht in this._eventParents)if(this._eventParents[Ht].listens(m,D,G,ne))return!0;return!1},_listens:function(m,D,G){if(!this._events)return!1;var ne=this._events[m]||[];if(!D)return!!ne.length;G===this&&(G=void 0);for(var _e=0,We=ne.length;_e<We;_e++)if(ne[_e].fn===D&&ne[_e].ctx===G)return _e;return!1},once:function(m,D,G){if("object"==typeof m)for(var ne in m)this._on(ne,m[ne],D,!0);else for(var _e=0,We=(m=nt(m)).length;_e<We;_e++)this._on(m[_e],D,G,!0);return this},addEventParent:function(m){return this._eventParents=this._eventParents||{},this._eventParents[Oe(m)]=m,this},removeEventParent:function(m){return this._eventParents&&delete this._eventParents[Oe(m)],this},_propagateEvent:function(m){for(var D in this._eventParents)this._eventParents[D].fire(m.type,hn({layer:m.target,propagatedFrom:m.target},m),!0)}};Gi.addEventListener=Gi.on,Gi.removeEventListener=Gi.clearAllEventListeners=Gi.off,Gi.addOneTimeEventListener=Gi.once,Gi.fireEvent=Gi.fire,Gi.hasEventListeners=Gi.listens;var vi=ni.extend(Gi);function Ei(m,D,G){this.x=G?Math.round(m):m,this.y=G?Math.round(D):D}var Fi=Math.trunc||function(m){return m>0?Math.floor(m):Math.ceil(m)};function Ji(m,D,G){return m instanceof Ei?m:wt(m)?new Ei(m[0],m[1]):null==m?m:"object"==typeof m&&"x"in m&&"y"in m?new Ei(m.x,m.y):new Ei(m,D,G)}function bn(m,D){if(m)for(var G=D?[m,D]:m,ne=0,_e=G.length;ne<_e;ne++)this.extend(G[ne])}function fn(m,D){return!m||m instanceof bn?m:new bn(m,D)}function Gn(m,D){if(m)for(var G=D?[m,D]:m,ne=0,_e=G.length;ne<_e;ne++)this.extend(G[ne])}function Qt(m,D){return m instanceof Gn?m:new Gn(m,D)}function Yi(m,D,G){if(isNaN(m)||isNaN(D))throw new Error("Invalid LatLng object: ("+m+", "+D+")");this.lat=+m,this.lng=+D,void 0!==G&&(this.alt=+G)}function on(m,D,G){return m instanceof Yi?m:wt(m)&&"object"!=typeof m[0]?3===m.length?new Yi(m[0],m[1],m[2]):2===m.length?new Yi(m[0],m[1]):null:null==m?m:"object"==typeof m&&"lat"in m?new Yi(m.lat,"lng"in m?m.lng:m.lon,m.alt):void 0===D?null:new Yi(m,D,G)}Ei.prototype={clone:function(){return new Ei(this.x,this.y)},add:function(m){return this.clone()._add(Ji(m))},_add:function(m){return this.x+=m.x,this.y+=m.y,this},subtract:function(m){return this.clone()._subtract(Ji(m))},_subtract:function(m){return this.x-=m.x,this.y-=m.y,this},divideBy:function(m){return this.clone()._divideBy(m)},_divideBy:function(m){return this.x/=m,this.y/=m,this},multiplyBy:function(m){return this.clone()._multiplyBy(m)},_multiplyBy:function(m){return this.x*=m,this.y*=m,this},scaleBy:function(m){return new Ei(this.x*m.x,this.y*m.y)},unscaleBy:function(m){return new Ei(this.x/m.x,this.y/m.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fi(this.x),this.y=Fi(this.y),this},distanceTo:function(m){var D=(m=Ji(m)).x-this.x,G=m.y-this.y;return Math.sqrt(D*D+G*G)},equals:function(m){return(m=Ji(m)).x===this.x&&m.y===this.y},contains:function(m){return m=Ji(m),Math.abs(m.x)<=Math.abs(this.x)&&Math.abs(m.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ue(this.x)+", "+Ue(this.y)+")"}},bn.prototype={extend:function(m){var D,G;if(!m)return this;if(m instanceof Ei||"number"==typeof m[0]||"x"in m)D=G=Ji(m);else if(G=(m=fn(m)).max,!(D=m.min)||!G)return this;return this.min||this.max?(this.min.x=Math.min(D.x,this.min.x),this.max.x=Math.max(G.x,this.max.x),this.min.y=Math.min(D.y,this.min.y),this.max.y=Math.max(G.y,this.max.y)):(this.min=D.clone(),this.max=G.clone()),this},getCenter:function(m){return Ji((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,m)},getBottomLeft:function(){return Ji(this.min.x,this.max.y)},getTopRight:function(){return Ji(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(m){var D,G;return(m="number"==typeof m[0]||m instanceof Ei?Ji(m):fn(m))instanceof bn?(D=m.min,G=m.max):D=G=m,D.x>=this.min.x&&G.x<=this.max.x&&D.y>=this.min.y&&G.y<=this.max.y},intersects:function(m){m=fn(m);var D=this.min,G=this.max,ne=m.min,_e=m.max;return _e.x>=D.x&&ne.x<=G.x&&_e.y>=D.y&&ne.y<=G.y},overlaps:function(m){m=fn(m);var D=this.min,G=this.max,ne=m.min,_e=m.max;return _e.x>D.x&&ne.x<G.x&&_e.y>D.y&&ne.y<G.y},isValid:function(){return!(!this.min||!this.max)},pad:function(m){var D=this.min,G=this.max,ne=Math.abs(D.x-G.x)*m,_e=Math.abs(D.y-G.y)*m;return fn(Ji(D.x-ne,D.y-_e),Ji(G.x+ne,G.y+_e))},equals:function(m){return!!m&&(m=fn(m),this.min.equals(m.getTopLeft())&&this.max.equals(m.getBottomRight()))}},Gn.prototype={extend:function(m){var ne,_e,D=this._southWest,G=this._northEast;if(m instanceof Yi)ne=m,_e=m;else{if(!(m instanceof Gn))return m?this.extend(on(m)||Qt(m)):this;if(_e=m._northEast,!(ne=m._southWest)||!_e)return this}return D||G?(D.lat=Math.min(ne.lat,D.lat),D.lng=Math.min(ne.lng,D.lng),G.lat=Math.max(_e.lat,G.lat),G.lng=Math.max(_e.lng,G.lng)):(this._southWest=new Yi(ne.lat,ne.lng),this._northEast=new Yi(_e.lat,_e.lng)),this},pad:function(m){var D=this._southWest,G=this._northEast,ne=Math.abs(D.lat-G.lat)*m,_e=Math.abs(D.lng-G.lng)*m;return new Gn(new Yi(D.lat-ne,D.lng-_e),new Yi(G.lat+ne,G.lng+_e))},getCenter:function(){return new Yi((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Yi(this.getNorth(),this.getWest())},getSouthEast:function(){return new Yi(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){m="number"==typeof m[0]||m instanceof Yi||"lat"in m?on(m):Qt(m);var ne,_e,D=this._southWest,G=this._northEast;return m instanceof Gn?(ne=m.getSouthWest(),_e=m.getNorthEast()):ne=_e=m,ne.lat>=D.lat&&_e.lat<=G.lat&&ne.lng>=D.lng&&_e.lng<=G.lng},intersects:function(m){m=Qt(m);var D=this._southWest,G=this._northEast,ne=m.getSouthWest(),_e=m.getNorthEast();return _e.lat>=D.lat&&ne.lat<=G.lat&&_e.lng>=D.lng&&ne.lng<=G.lng},overlaps:function(m){m=Qt(m);var D=this._southWest,G=this._northEast,ne=m.getSouthWest(),_e=m.getNorthEast();return _e.lat>D.lat&&ne.lat<G.lat&&_e.lng>D.lng&&ne.lng<G.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(m,D){return!!m&&(m=Qt(m),this._southWest.equals(m.getSouthWest(),D)&&this._northEast.equals(m.getNorthEast(),D))},isValid:function(){return!(!this._southWest||!this._northEast)}},Yi.prototype={equals:function(m,D){return!!m&&(m=on(m),Math.max(Math.abs(this.lat-m.lat),Math.abs(this.lng-m.lng))<=(void 0===D?1e-9:D))},toString:function(m){return"LatLng("+Ue(this.lat,m)+", "+Ue(this.lng,m)+")"},distanceTo:function(m){return Nn.distance(this,on(m))},wrap:function(){return Nn.wrapLatLng(this)},toBounds:function(m){var D=180*m/40075017,G=D/Math.cos(Math.PI/180*this.lat);return Qt([this.lat-D,this.lng-G],[this.lat+D,this.lng+G])},clone:function(){return new Yi(this.lat,this.lng,this.alt)}};var m,Zn={latLngToPoint:function(m,D){var G=this.projection.project(m),ne=this.scale(D);return this.transformation._transform(G,ne)},pointToLatLng:function(m,D){var G=this.scale(D),ne=this.transformation.untransform(m,G);return this.projection.unproject(ne)},project:function(m){return this.projection.project(m)},unproject:function(m){return this.projection.unproject(m)},scale:function(m){return 256*Math.pow(2,m)},zoom:function(m){return Math.log(m/256)/Math.LN2},getProjectedBounds:function(m){if(this.infinite)return null;var D=this.projection.bounds,G=this.scale(m);return new bn(this.transformation.transform(D.min,G),this.transformation.transform(D.max,G))},infinite:!1,wrapLatLng:function(m){var D=this.wrapLng?De(m.lng,this.wrapLng,!0):m.lng;return new Yi(this.wrapLat?De(m.lat,this.wrapLat,!0):m.lat,D,m.alt)},wrapLatLngBounds:function(m){var D=m.getCenter(),G=this.wrapLatLng(D),ne=D.lat-G.lat,_e=D.lng-G.lng;if(0===ne&&0===_e)return m;var We=m.getSouthWest(),Ht=m.getNorthEast();return new Gn(new Yi(We.lat-ne,We.lng-_e),new Yi(Ht.lat-ne,Ht.lng-_e))}},Nn=hn({},Zn,{wrapLng:[-180,180],R:6371e3,distance:function(m,D){var G=Math.PI/180,ne=m.lat*G,_e=D.lat*G,We=Math.sin((D.lat-m.lat)*G/2),Ht=Math.sin((D.lng-m.lng)*G/2),ai=We*We+Math.cos(ne)*Math.cos(_e)*Ht*Ht,Ti=2*Math.atan2(Math.sqrt(ai),Math.sqrt(1-ai));return this.R*Ti}}),ji={R:6378137,MAX_LATITUDE:85.0511287798,project:function(m){var D=Math.PI/180,G=this.MAX_LATITUDE,ne=Math.max(Math.min(G,m.lat),-G),_e=Math.sin(ne*D);return new Ei(this.R*m.lng*D,this.R*Math.log((1+_e)/(1-_e))/2)},unproject:function(m){var D=180/Math.PI;return new Yi((2*Math.atan(Math.exp(m.y/this.R))-Math.PI/2)*D,m.x*D/this.R)},bounds:(m=6378137*Math.PI,new bn([-m,-m],[m,m]))};function Mr(m,D,G,ne){if(wt(m))return this._a=m[0],this._b=m[1],this._c=m[2],void(this._d=m[3]);this._a=m,this._b=D,this._c=G,this._d=ne}function or(m,D,G,ne){return new Mr(m,D,G,ne)}Mr.prototype={transform:function(m,D){return this._transform(m.clone(),D)},_transform:function(m,D){return m.x=(D=D||1)*(this._a*m.x+this._b),m.y=D*(this._c*m.y+this._d),m},untransform:function(m,D){return new Ei((m.x/(D=D||1)-this._b)/this._a,(m.y/D-this._d)/this._c)}};var gr=hn({},Nn,{code:"EPSG:3857",projection:ji,transformation:function(){var m=.5/(Math.PI*ji.R);return or(m,.5,-m,.5)}()}),xn=hn({},gr,{code:"EPSG:900913"});function en(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function _n(m,D){var ne,_e,We,Ht,ai,Ti,G="";for(ne=0,We=m.length;ne<We;ne++){for(_e=0,Ht=(ai=m[ne]).length;_e<Ht;_e++)G+=(_e?"L":"M")+(Ti=ai[_e]).x+" "+Ti.y;G+=D?Ze.svg?"z":"x":""}return G||"M0 0"}var Zi=document.documentElement.style,Ui="ActiveXObject"in window,jn=Ui&&!document.addEventListener,tn="msLaunchUri"in navigator&&!("documentMode"in document),Si=Ke("webkit"),mn=Ke("android"),Pn=Ke("android 2")||Ke("android 3"),Lr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Or=mn&&Ke("Google")&&Lr<537&&!("AudioNode"in window),Sr=!!window.opera,vr=!tn&&Ke("chrome"),ar=Ke("gecko")&&!Si&&!Sr&&!Ui,kn=!vr&&Ke("safari"),dr=Ke("phantom"),Fr="OTransition"in Zi,Cs=0===navigator.platform.indexOf("Win"),er=Ui&&"transition"in Zi,br="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pn,mr="MozPerspective"in Zi,Tr=!window.L_DISABLE_3D&&(er||br||mr)&&!Fr&&!dr,Xr=typeof orientation<"u"||Ke("mobile"),Ct=Xr&&Si,Ie=Xr&&br,Be=!window.PointerEvent&&window.MSPointerEvent,ct=!(!window.PointerEvent&&!Be),lt="ontouchstart"in window||!!window.TouchEvent,zt=!window.L_NO_TOUCH&&(lt||ct),qt=Xr&&Sr,Kt=Xr&&ar,pt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ui=function(){var m=!1;try{var D=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testPassiveEventSupport",Fe,D),window.removeEventListener("testPassiveEventSupport",Fe,D)}catch{}return m}(),Vi=!!document.createElement("canvas").getContext,$i=!(!document.createElementNS||!en("svg").createSVGRect),di=!!$i&&function(){var m=document.createElement("div");return m.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(m.firstChild&&m.firstChild.namespaceURI)}(),un=!$i&&function(){try{var m=document.createElement("div");m.innerHTML='<v:shape adj="1"/>';var D=m.firstChild;return D.style.behavior="url(#default#VML)",D&&"object"==typeof D.adj}catch{return!1}}();function Ke(m){return navigator.userAgent.toLowerCase().indexOf(m)>=0}var Ze={ie:Ui,ielt9:jn,edge:tn,webkit:Si,android:mn,android23:Pn,androidStock:Or,opera:Sr,chrome:vr,gecko:ar,safari:kn,phantom:dr,opera12:Fr,win:Cs,ie3d:er,webkit3d:br,gecko3d:mr,any3d:Tr,mobile:Xr,mobileWebkit:Ct,mobileWebkit3d:Ie,msPointer:Be,pointer:ct,touch:zt,touchNative:lt,mobileOpera:qt,mobileGecko:Kt,retina:pt,passiveEvents:ui,canvas:Vi,svg:$i,vml:un,inlineSvg:di,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Re=Ze.msPointer?"MSPointerDown":"pointerdown",He=Ze.msPointer?"MSPointerMove":"pointermove",ft=Ze.msPointer?"MSPointerUp":"pointerup",Yt=Ze.msPointer?"MSPointerCancel":"pointercancel",xi={touchstart:Re,touchmove:He,touchend:ft,touchcancel:Yt},fi={touchstart:function o(m,D){D.MSPOINTER_TYPE_TOUCH&&D.pointerType===D.MSPOINTER_TYPE_TOUCH&&qr(D),le(m,D)},touchmove:le,touchend:le,touchcancel:le},Pi={},rt=!1;function yt(m,D,G){return"touchstart"===D&&function It(){rt||(document.addEventListener(Re,it,!0),document.addEventListener(He,Tt,!0),document.addEventListener(ft,Pe,!0),document.addEventListener(Yt,Pe,!0),rt=!0)}(),fi[D]?(G=fi[D].bind(this,G),m.addEventListener(xi[D],G,!1),G):(console.warn("wrong event specified:",D),Fe)}function it(m){Pi[m.pointerId]=m}function Tt(m){Pi[m.pointerId]&&(Pi[m.pointerId]=m)}function Pe(m){delete Pi[m.pointerId]}function le(m,D){if(D.pointerType!==(D.MSPOINTER_TYPE_MOUSE||"mouse")){for(var G in D.touches=[],Pi)D.touches.push(Pi[G]);D.changedTouches=[D],m(D)}}var h=200;var ei,wi,Mi,Qn,lr,x=Le(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),A=Le(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),I="webkitTransition"===A||"OTransition"===A?A+"End":"transitionend";function F(m){return"string"==typeof m?document.getElementById(m):m}function U(m,D){var G=m.style[D]||m.currentStyle&&m.currentStyle[D];if((!G||"auto"===G)&&document.defaultView){var ne=document.defaultView.getComputedStyle(m,null);G=ne?ne[D]:null}return"auto"===G?null:G}function $(m,D,G){var ne=document.createElement(m);return ne.className=D||"",G&&G.appendChild(ne),ne}function q(m){var D=m.parentNode;D&&D.removeChild(m)}function ie(m){for(;m.firstChild;)m.removeChild(m.firstChild)}function ue(m){var D=m.parentNode;D&&D.lastChild!==m&&D.appendChild(m)}function ge(m){var D=m.parentNode;D&&D.firstChild!==m&&D.insertBefore(m,D.firstChild)}function we(m,D){if(void 0!==m.classList)return m.classList.contains(D);var G=Q(m);return G.length>0&&new RegExp("(^|\\s)"+D+"(\\s|$)").test(G)}function me(m,D){if(void 0!==m.classList)for(var G=nt(D),ne=0,_e=G.length;ne<_e;ne++)m.classList.add(G[ne]);else if(!we(m,D)){var We=Q(m);N(m,(We?We+" ":"")+D)}}function Ee(m,D){void 0!==m.classList?m.classList.remove(D):N(m,Je((" "+Q(m)+" ").replace(" "+D+" "," ")))}function N(m,D){void 0===m.className.baseVal?m.className=D:m.className.baseVal=D}function Q(m){return m.correspondingElement&&(m=m.correspondingElement),void 0===m.className.baseVal?m.className:m.className.baseVal}function pe(m,D){"opacity"in m.style?m.style.opacity=D:"filter"in m.style&&function xe(m,D){var G=!1,ne="DXImageTransform.Microsoft.Alpha";try{G=m.filters.item(ne)}catch{if(1===D)return}D=Math.round(100*D),G?(G.Enabled=100!==D,G.Opacity=D):m.style.filter+=" progid:"+ne+"(opacity="+D+")"}(m,D)}function Le(m){for(var D=document.documentElement.style,G=0;G<m.length;G++)if(m[G]in D)return m[G];return!1}function qe(m,D,G){var ne=D||new Ei(0,0);m.style[x]=(Ze.ie3d?"translate("+ne.x+"px,"+ne.y+"px)":"translate3d("+ne.x+"px,"+ne.y+"px,0)")+(G?" scale("+G+")":"")}function kt(m,D){m._leaflet_pos=D,Ze.any3d?qe(m,D):(m.style.left=D.x+"px",m.style.top=D.y+"px")}function Dt(m){return m._leaflet_pos||new Ei(0,0)}if("onselectstart"in document)ei=function(){Kn(window,"selectstart",qr)},wi=function(){$n(window,"selectstart",qr)};else{var dn=Le(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ei=function(){if(dn){var m=document.documentElement.style;Mi=m[dn],m[dn]="none"}},wi=function(){dn&&(document.documentElement.style[dn]=Mi,Mi=void 0)}}function wn(){Kn(window,"dragstart",qr)}function Fn(){$n(window,"dragstart",qr)}function cr(m){for(;-1===m.tabIndex;)m=m.parentNode;m.style&&(Pr(),Qn=m,lr=m.style.outlineStyle,m.style.outlineStyle="none",Kn(window,"keydown",Pr))}function Pr(){Qn&&(Qn.style.outlineStyle=lr,Qn=void 0,lr=void 0,$n(window,"keydown",Pr))}function jr(m){do{m=m.parentNode}while(!(m.offsetWidth&&m.offsetHeight||m===document.body));return m}function Wr(m){var D=m.getBoundingClientRect();return{x:D.width/m.offsetWidth||1,y:D.height/m.offsetHeight||1,boundingClientRect:D}}var Dr={__proto__:null,TRANSFORM:x,TRANSITION:A,TRANSITION_END:I,get:F,getStyle:U,create:$,remove:q,empty:ie,toFront:ue,toBack:ge,hasClass:we,addClass:me,removeClass:Ee,setClass:N,getClass:Q,setOpacity:pe,testProp:Le,setTransform:qe,setPosition:kt,getPosition:Dt,get disableTextSelection(){return ei},get enableTextSelection(){return wi},disableImageDrag:wn,enableImageDrag:Fn,preventOutline:cr,restoreOutline:Pr,getSizedParentNode:jr,getScale:Wr};function Kn(m,D,G,ne){if(D&&"object"==typeof D)for(var _e in D)va(m,_e,D[_e],G);else for(var We=0,Ht=(D=nt(D)).length;We<Ht;We++)va(m,D[We],G,ne);return this}var ss="_leaflet_events";function $n(m,D,G,ne){if(1===arguments.length)Zr(m),delete m[ss];else if(D&&"object"==typeof D)for(var _e in D)as(m,_e,D[_e],G);else if(D=nt(D),2===arguments.length)Zr(m,function(ai){return-1!==si(D,ai)});else for(var We=0,Ht=D.length;We<Ht;We++)as(m,D[We],G,ne);return this}function Zr(m,D){for(var G in m[ss]){var ne=G.split(/\d/)[0];(!D||D(ne))&&as(m,ne,null,null,G)}}var fl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function va(m,D,G,ne){var _e=D+Oe(G)+(ne?"_"+Oe(ne):"");if(m[ss]&&m[ss][_e])return this;var We=function(ai){return G.call(ne||m,ai||window.event)},Ht=We;!Ze.touchNative&&Ze.pointer&&0===D.indexOf("touch")?We=yt(m,D,We):Ze.touch&&"dblclick"===D?We=function _(m,D){m.addEventListener("dblclick",D);var ne,G=0;function _e(We){if(1===We.detail){if("mouse"!==We.pointerType&&(!We.sourceCapabilities||We.sourceCapabilities.firesTouchEvents)){var Ht=Sc(We);if(!Ht.some(function(Ti){return Ti instanceof HTMLLabelElement&&Ti.attributes.for})||Ht.some(function(Ti){return Ti instanceof HTMLInputElement||Ti instanceof HTMLSelectElement})){var ai=Date.now();ai-G<=h?2==++ne&&D(function c(m){var G,ne,D={};for(ne in m)D[ne]=(G=m[ne])&&G.bind?G.bind(m):G;return m=D,D.type="dblclick",D.detail=2,D.isTrusted=!1,D._simulated=!0,D}(We)):ne=1,G=ai}}}else ne=We.detail}return m.addEventListener("click",_e),{dblclick:D,simDblclick:_e}}(m,We):"addEventListener"in m?"touchstart"===D||"touchmove"===D||"wheel"===D||"mousewheel"===D?m.addEventListener(fl[D]||D,We,!!Ze.passiveEvents&&{passive:!1}):"mouseenter"===D||"mouseleave"===D?m.addEventListener(fl[D],We=function(ai){ai=ai||window.event,Yc(m,ai)&&Ht(ai)},!1):m.addEventListener(D,Ht,!1):m.attachEvent("on"+D,We),m[ss]=m[ss]||{},m[ss][_e]=We}function as(m,D,G,ne,_e){_e=_e||D+Oe(G)+(ne?"_"+Oe(ne):"");var We=m[ss]&&m[ss][_e];if(!We)return this;!Ze.touchNative&&Ze.pointer&&0===D.indexOf("touch")?function fe(m,D,G){xi[D]?m.removeEventListener(xi[D],G,!1):console.warn("wrong event specified:",D)}(m,D,We):Ze.touch&&"dblclick"===D?function b(m,D){m.removeEventListener("dblclick",D.dblclick),m.removeEventListener("click",D.simDblclick)}(m,We):"removeEventListener"in m?m.removeEventListener(fl[D]||D,We,!1):m.detachEvent("on"+D,We),m[ss][_e]=null}function jo(m){return m.stopPropagation?m.stopPropagation():m.originalEvent?m.originalEvent._stopped=!0:m.cancelBubble=!0,this}function nc(m){return va(m,"wheel",jo),this}function Oo(m){return Kn(m,"mousedown touchstart dblclick contextmenu",jo),m._leaflet_disable_click=!0,this}function qr(m){return m.preventDefault?m.preventDefault():m.returnValue=!1,this}function mo(m){return qr(m),jo(m),this}function Sc(m){if(m.composedPath)return m.composedPath();for(var D=[],G=m.target;G;)D.push(G),G=G.parentNode;return D}function La(m,D){if(!D)return new Ei(m.clientX,m.clientY);var G=Wr(D),ne=G.boundingClientRect;return new Ei((m.clientX-ne.left)/G.x-D.clientLeft,(m.clientY-ne.top)/G.y-D.clientTop)}var ea=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Il(m){return Ze.edge?m.wheelDeltaY/2:m.deltaY&&0===m.deltaMode?-m.deltaY/ea:m.deltaY&&1===m.deltaMode?20*-m.deltaY:m.deltaY&&2===m.deltaMode?60*-m.deltaY:m.deltaX||m.deltaZ?0:m.wheelDelta?(m.wheelDeltaY||m.wheelDelta)/2:m.detail&&Math.abs(m.detail)<32765?20*-m.detail:m.detail?m.detail/-32765*60:0}function Yc(m,D){var G=D.relatedTarget;if(!G)return!0;try{for(;G&&G!==m;)G=G.parentNode}catch{return!1}return G!==m}var gu={__proto__:null,on:Kn,off:$n,stopPropagation:jo,disableScrollPropagation:nc,disableClickPropagation:Oo,preventDefault:qr,stop:mo,getPropagationPath:Sc,getMousePosition:La,getWheelDelta:Il,isExternalTarget:Yc,addListener:Kn,removeListener:$n},Ll=vi.extend({run:function(m,D,G,ne){this.stop(),this._el=m,this._inProgress=!0,this._duration=G||.25,this._easeOutPower=1/Math.max(ne||.5,.2),this._startPos=Dt(m),this._offset=D.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Vt(this._animate,this),this._step()},_step:function(m){var D=+new Date-this._startTime,G=1e3*this._duration;D<G?this._runFrame(this._easeOut(D/G),m):(this._runFrame(1),this._complete())},_runFrame:function(m,D){var G=this._startPos.add(this._offset.multiplyBy(m));D&&G._round(),kt(this._el,G),this.fire("step")},_complete:function(){dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(m){return 1-Math.pow(1-m,this._easeOutPower)}}),xr=vi.extend({options:{crs:gr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(m,D){D=mt(this,D),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(m),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),D.maxBounds&&this.setMaxBounds(D.maxBounds),void 0!==D.zoom&&(this._zoom=this._limitZoom(D.zoom)),D.center&&void 0!==D.zoom&&this.setView(on(D.center),D.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=A&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Kn(this._proxy,I,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(m,D,G){return D=void 0===D?this._zoom:this._limitZoom(D),m=this._limitCenter(on(m),D,this.options.maxBounds),G=G||{},this._stop(),this._loaded&&!G.reset&&!0!==G&&(void 0!==G.animate&&(G.zoom=hn({animate:G.animate},G.zoom),G.pan=hn({animate:G.animate,duration:G.duration},G.pan)),this._zoom!==D?this._tryAnimatedZoom&&this._tryAnimatedZoom(m,D,G.zoom):this._tryAnimatedPan(m,G.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(m,D,G.pan&&G.pan.noMoveStart),this)},setZoom:function(m,D){return this._loaded?this.setView(this.getCenter(),m,{zoom:D}):(this._zoom=m,this)},zoomIn:function(m,D){return this.setZoom(this._zoom+(m=m||(Ze.any3d?this.options.zoomDelta:1)),D)},zoomOut:function(m,D){return this.setZoom(this._zoom-(m=m||(Ze.any3d?this.options.zoomDelta:1)),D)},setZoomAround:function(m,D,G){var ne=this.getZoomScale(D),_e=this.getSize().divideBy(2),Ht=(m instanceof Ei?m:this.latLngToContainerPoint(m)).subtract(_e).multiplyBy(1-1/ne),ai=this.containerPointToLatLng(_e.add(Ht));return this.setView(ai,D,{zoom:G})},_getBoundsCenterZoom:function(m,D){D=D||{},m=m.getBounds?m.getBounds():Qt(m);var G=Ji(D.paddingTopLeft||D.padding||[0,0]),ne=Ji(D.paddingBottomRight||D.padding||[0,0]),_e=this.getBoundsZoom(m,!1,G.add(ne));if((_e="number"==typeof D.maxZoom?Math.min(D.maxZoom,_e):_e)===1/0)return{center:m.getCenter(),zoom:_e};var We=ne.subtract(G).divideBy(2),Ht=this.project(m.getSouthWest(),_e),ai=this.project(m.getNorthEast(),_e);return{center:this.unproject(Ht.add(ai).divideBy(2).add(We),_e),zoom:_e}},fitBounds:function(m,D){if(!(m=Qt(m)).isValid())throw new Error("Bounds are not valid.");var G=this._getBoundsCenterZoom(m,D);return this.setView(G.center,G.zoom,D)},fitWorld:function(m){return this.fitBounds([[-90,-180],[90,180]],m)},panTo:function(m,D){return this.setView(m,this._zoom,{pan:D})},panBy:function(m,D){if(D=D||{},!(m=Ji(m).round()).x&&!m.y)return this.fire("moveend");if(!0!==D.animate&&!this.getSize().contains(m))return this._resetView(this.unproject(this.project(this.getCenter()).add(m)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ll,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),D.noMoveStart||this.fire("movestart"),!1!==D.animate){me(this._mapPane,"leaflet-pan-anim");var G=this._getMapPanePos().subtract(m).round();this._panAnim.run(this._mapPane,G,D.duration||.25,D.easeLinearity)}else this._rawPanBy(m),this.fire("move").fire("moveend");return this},flyTo:function(m,D,G){if(!1===(G=G||{}).animate||!Ze.any3d)return this.setView(m,D,G);this._stop();var ne=this.project(this.getCenter()),_e=this.project(m),We=this.getSize(),Ht=this._zoom;m=on(m),D=void 0===D?Ht:D;var ai=Math.max(We.x,We.y),Ti=ai*this.getZoomScale(Ht,D),sn=_e.distanceTo(ne)||1,In=1.42,Yn=In*In;function _r(Se){var zi=(Ti*Ti-ai*ai+(Se?-1:1)*Yn*Yn*sn*sn)/(2*(Se?Ti:ai)*Yn*sn),Ln=Math.sqrt(zi*zi+1)-zi;return Ln<1e-9?-18:Math.log(Ln)}function Yr(Se){return(Math.exp(Se)-Math.exp(-Se))/2}function Ps(Se){return(Math.exp(Se)+Math.exp(-Se))/2}var Xs=_r(0);function al(Se){return ai*(Ps(Xs)*function to(Se){return Yr(Se)/Ps(Se)}(Xs+In*Se)-Yr(Xs))/Yn}var Lc=Date.now(),Vl=(_r(1)-Xs)/In,ha=G.duration?1e3*G.duration:1e3*Vl*.8;return this._moveStart(!0,G.noMoveStart),function cc(){var Se=(Date.now()-Lc)/ha,J=function oo(Se){return 1-Math.pow(1-Se,1.5)}(Se)*Vl;Se<=1?(this._flyToFrame=Vt(cc,this),this._move(this.unproject(ne.add(_e.subtract(ne).multiplyBy(al(J)/sn)),Ht),this.getScaleZoom(ai/function Ga(Se){return ai*(Ps(Xs)/Ps(Xs+In*Se))}(J),Ht),{flyTo:!0})):this._move(m,D)._moveEnd(!0)}.call(this),this},flyToBounds:function(m,D){var G=this._getBoundsCenterZoom(m,D);return this.flyTo(G.center,G.zoom,D)},setMaxBounds:function(m){return m=Qt(m),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),m.isValid()?(this.options.maxBounds=m,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(m){var D=this.options.minZoom;return this.options.minZoom=m,this._loaded&&D!==m&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(m):this},setMaxZoom:function(m){var D=this.options.maxZoom;return this.options.maxZoom=m,this._loaded&&D!==m&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(m):this},panInsideBounds:function(m,D){this._enforcingBounds=!0;var G=this.getCenter(),ne=this._limitCenter(G,this._zoom,Qt(m));return G.equals(ne)||this.panTo(ne,D),this._enforcingBounds=!1,this},panInside:function(m,D){var G=Ji((D=D||{}).paddingTopLeft||D.padding||[0,0]),ne=Ji(D.paddingBottomRight||D.padding||[0,0]),_e=this.project(this.getCenter()),We=this.project(m),Ht=this.getPixelBounds(),ai=fn([Ht.min.add(G),Ht.max.subtract(ne)]),Ti=ai.getSize();if(!ai.contains(We)){this._enforcingBounds=!0;var sn=We.subtract(ai.getCenter()),In=ai.extend(We).getSize().subtract(Ti);_e.x+=sn.x<0?-In.x:In.x,_e.y+=sn.y<0?-In.y:In.y,this.panTo(this.unproject(_e),D),this._enforcingBounds=!1}return this},invalidateSize:function(m){if(!this._loaded)return this;m=hn({animate:!1,pan:!0},!0===m?{animate:!0}:m);var D=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var G=this.getSize(),ne=D.divideBy(2).round(),_e=G.divideBy(2).round(),We=ne.subtract(_e);return We.x||We.y?(m.animate&&m.pan?this.panBy(We):(m.pan&&this._rawPanBy(We),this.fire("move"),m.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:D,newSize:G})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(m){if(m=this._locateOptions=hn({timeout:1e4,watch:!1},m),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var D=i(this._handleGeolocationResponse,this),G=i(this._handleGeolocationError,this);return m.watch?this._locationWatchId=navigator.geolocation.watchPosition(D,G,m):navigator.geolocation.getCurrentPosition(D,G,m),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(m){if(this._container._leaflet_id){var D=m.code,G=m.message||(1===D?"permission denied":2===D?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:D,message:"Geolocation error: "+G+"."})}},_handleGeolocationResponse:function(m){if(this._container._leaflet_id){var ne=new Yi(m.coords.latitude,m.coords.longitude),_e=ne.toBounds(2*m.coords.accuracy),We=this._locateOptions;if(We.setView){var Ht=this.getBoundsZoom(_e);this.setView(ne,We.maxZoom?Math.min(Ht,We.maxZoom):Ht)}var ai={latlng:ne,bounds:_e,timestamp:m.timestamp};for(var Ti in m.coords)"number"==typeof m.coords[Ti]&&(ai[Ti]=m.coords[Ti]);this.fire("locationfound",ai)}},addHandler:function(m,D){if(!D)return this;var G=this[m]=new D(this);return this._handlers.push(G),this.options[m]&&G.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var m;for(m in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[m].remove();for(m in this._panes)q(this._panes[m]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(m,D){var ne=$("div","leaflet-pane"+(m?" leaflet-"+m.replace("Pane","")+"-pane":""),D||this._mapPane);return m&&(this._panes[m]=ne),ne},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var m=this.getPixelBounds();return new Gn(this.unproject(m.getBottomLeft()),this.unproject(m.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(m,D,G){m=Qt(m),G=Ji(G||[0,0]);var ne=this.getZoom()||0,_e=this.getMinZoom(),We=this.getMaxZoom(),Ht=m.getNorthWest(),ai=m.getSouthEast(),Ti=this.getSize().subtract(G),sn=fn(this.project(ai,ne),this.project(Ht,ne)).getSize(),In=Ze.any3d?this.options.zoomSnap:1,Yn=Ti.x/sn.x,_r=Ti.y/sn.y,Yr=D?Math.max(Yn,_r):Math.min(Yn,_r);return ne=this.getScaleZoom(Yr,ne),In&&(ne=Math.round(ne/(In/100))*(In/100),ne=D?Math.ceil(ne/In)*In:Math.floor(ne/In)*In),Math.max(_e,Math.min(We,ne))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ei(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(m,D){var G=this._getTopLeftPoint(m,D);return new bn(G,G.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(m){return this.options.crs.getProjectedBounds(void 0===m?this.getZoom():m)},getPane:function(m){return"string"==typeof m?this._panes[m]:m},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(m,D){var G=this.options.crs;return D=void 0===D?this._zoom:D,G.scale(m)/G.scale(D)},getScaleZoom:function(m,D){var G=this.options.crs,ne=G.zoom(m*G.scale(D=void 0===D?this._zoom:D));return isNaN(ne)?1/0:ne},project:function(m,D){return D=void 0===D?this._zoom:D,this.options.crs.latLngToPoint(on(m),D)},unproject:function(m,D){return D=void 0===D?this._zoom:D,this.options.crs.pointToLatLng(Ji(m),D)},layerPointToLatLng:function(m){var D=Ji(m).add(this.getPixelOrigin());return this.unproject(D)},latLngToLayerPoint:function(m){return this.project(on(m))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(m){return this.options.crs.wrapLatLng(on(m))},wrapLatLngBounds:function(m){return this.options.crs.wrapLatLngBounds(Qt(m))},distance:function(m,D){return this.options.crs.distance(on(m),on(D))},containerPointToLayerPoint:function(m){return Ji(m).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(m){return Ji(m).add(this._getMapPanePos())},containerPointToLatLng:function(m){var D=this.containerPointToLayerPoint(Ji(m));return this.layerPointToLatLng(D)},latLngToContainerPoint:function(m){return this.layerPointToContainerPoint(this.latLngToLayerPoint(on(m)))},mouseEventToContainerPoint:function(m){return La(m,this._container)},mouseEventToLayerPoint:function(m){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(m))},mouseEventToLatLng:function(m){return this.layerPointToLatLng(this.mouseEventToLayerPoint(m))},_initContainer:function(m){var D=this._container=F(m);if(!D)throw new Error("Map container not found.");if(D._leaflet_id)throw new Error("Map container is already initialized.");Kn(D,"scroll",this._onScroll,this),this._containerId=Oe(D)},_initLayout:function(){var m=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,me(m,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var D=U(m,"position");"absolute"!==D&&"relative"!==D&&"fixed"!==D&&"sticky"!==D&&(m.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var m=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new Ei(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(m.markerPane,"leaflet-zoom-hide"),me(m.shadowPane,"leaflet-zoom-hide"))},_resetView:function(m,D,G){kt(this._mapPane,new Ei(0,0));var ne=!this._loaded;this._loaded=!0,D=this._limitZoom(D),this.fire("viewprereset");var _e=this._zoom!==D;this._moveStart(_e,G)._move(m,D)._moveEnd(_e),this.fire("viewreset"),ne&&this.fire("load")},_moveStart:function(m,D){return m&&this.fire("zoomstart"),D||this.fire("movestart"),this},_move:function(m,D,G,ne){void 0===D&&(D=this._zoom);var _e=this._zoom!==D;return this._zoom=D,this._lastCenter=m,this._pixelOrigin=this._getNewPixelOrigin(m),ne?G&&G.pinch&&this.fire("zoom",G):((_e||G&&G.pinch)&&this.fire("zoom",G),this.fire("move",G)),this},_moveEnd:function(m){return m&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(m){kt(this._mapPane,this._getMapPanePos().subtract(m))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(m){this._targets={},this._targets[Oe(this._container)]=this;var D=m?$n:Kn;D(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&D(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(m?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){dt(this._resizeRequest),this._resizeRequest=Vt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var m=this._getMapPanePos();Math.max(Math.abs(m.x),Math.abs(m.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(m,D){for(var ne,G=[],_e="mouseout"===D||"mouseover"===D,We=m.target||m.srcElement,Ht=!1;We;){if((ne=this._targets[Oe(We)])&&("click"===D||"preclick"===D)&&this._draggableMoved(ne)){Ht=!0;break}if(ne&&ne.listens(D,!0)&&(_e&&!Yc(We,m)||(G.push(ne),_e))||We===this._container)break;We=We.parentNode}return!G.length&&!Ht&&!_e&&this.listens(D,!0)&&(G=[this]),G},_isClickDisabled:function(m){for(;m&&m!==this._container;){if(m._leaflet_disable_click)return!0;m=m.parentNode}},_handleDOMEvent:function(m){var D=m.target||m.srcElement;if(!(!this._loaded||D._leaflet_disable_events||"click"===m.type&&this._isClickDisabled(D))){var G=m.type;"mousedown"===G&&cr(D),this._fireDOMEvent(m,G)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(m,D,G){if("click"===m.type){var ne=hn({},m);ne.type="preclick",this._fireDOMEvent(ne,ne.type,G)}var _e=this._findEventTargets(m,D);if(G){for(var We=[],Ht=0;Ht<G.length;Ht++)G[Ht].listens(D,!0)&&We.push(G[Ht]);_e=We.concat(_e)}if(_e.length){"contextmenu"===D&&qr(m);var ai=_e[0],Ti={originalEvent:m};if("keypress"!==m.type&&"keydown"!==m.type&&"keyup"!==m.type){var sn=ai.getLatLng&&(!ai._radius||ai._radius<=10);Ti.containerPoint=sn?this.latLngToContainerPoint(ai.getLatLng()):this.mouseEventToContainerPoint(m),Ti.layerPoint=this.containerPointToLayerPoint(Ti.containerPoint),Ti.latlng=sn?ai.getLatLng():this.layerPointToLatLng(Ti.layerPoint)}for(Ht=0;Ht<_e.length;Ht++)if(_e[Ht].fire(D,Ti,!0),Ti.originalEvent._stopped||!1===_e[Ht].options.bubblingMouseEvents&&-1!==si(this._mouseEvents,D))return}},_draggableMoved:function(m){return(m=m.dragging&&m.dragging.enabled()?m:this).dragging&&m.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var m=0,D=this._handlers.length;m<D;m++)this._handlers[m].disable()},whenReady:function(m,D){return this._loaded?m.call(D||this,{target:this}):this.on("load",m,D),this},_getMapPanePos:function(){return Dt(this._mapPane)||new Ei(0,0)},_moved:function(){var m=this._getMapPanePos();return m&&!m.equals([0,0])},_getTopLeftPoint:function(m,D){return(m&&void 0!==D?this._getNewPixelOrigin(m,D):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(m,D){var G=this.getSize()._divideBy(2);return this.project(m,D)._subtract(G)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,D,G){var ne=this._getNewPixelOrigin(G,D);return this.project(m,D)._subtract(ne)},_latLngBoundsToNewLayerBounds:function(m,D,G){var ne=this._getNewPixelOrigin(G,D);return fn([this.project(m.getSouthWest(),D)._subtract(ne),this.project(m.getNorthWest(),D)._subtract(ne),this.project(m.getSouthEast(),D)._subtract(ne),this.project(m.getNorthEast(),D)._subtract(ne)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(m){return this.latLngToLayerPoint(m).subtract(this._getCenterLayerPoint())},_limitCenter:function(m,D,G){if(!G)return m;var ne=this.project(m,D),_e=this.getSize().divideBy(2),We=new bn(ne.subtract(_e),ne.add(_e)),Ht=this._getBoundsOffset(We,G,D);return Math.abs(Ht.x)<=1&&Math.abs(Ht.y)<=1?m:this.unproject(ne.add(Ht),D)},_limitOffset:function(m,D){if(!D)return m;var G=this.getPixelBounds(),ne=new bn(G.min.add(m),G.max.add(m));return m.add(this._getBoundsOffset(ne,D))},_getBoundsOffset:function(m,D,G){var ne=fn(this.project(D.getNorthEast(),G),this.project(D.getSouthWest(),G)),_e=ne.min.subtract(m.min),We=ne.max.subtract(m.max);return new Ei(this._rebound(_e.x,-We.x),this._rebound(_e.y,-We.y))},_rebound:function(m,D){return m+D>0?Math.round(m-D)/2:Math.max(0,Math.ceil(m))-Math.max(0,Math.floor(D))},_limitZoom:function(m){var D=this.getMinZoom(),G=this.getMaxZoom(),ne=Ze.any3d?this.options.zoomSnap:1;return ne&&(m=Math.round(m/ne)*ne),Math.max(D,Math.min(G,m))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ee(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(m,D){var G=this._getCenterOffset(m)._trunc();return!(!0!==(D&&D.animate)&&!this.getSize().contains(G)||(this.panBy(G,D),0))},_createAnimProxy:function(){var m=this._proxy=$("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(m),this.on("zoomanim",function(D){var G=x,ne=this._proxy.style[G];qe(this._proxy,this.project(D.center,D.zoom),this.getZoomScale(D.zoom,1)),ne===this._proxy.style[G]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var m=this.getCenter(),D=this.getZoom();qe(this._proxy,this.project(m,D),this.getZoomScale(D,1))},_catchTransitionEnd:function(m){this._animatingZoom&&m.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(m,D,G){if(this._animatingZoom)return!0;if(G=G||{},!this._zoomAnimated||!1===G.animate||this._nothingToAnimate()||Math.abs(D-this._zoom)>this.options.zoomAnimationThreshold)return!1;var ne=this.getZoomScale(D),_e=this._getCenterOffset(m)._divideBy(1-1/ne);return!(!0!==G.animate&&!this.getSize().contains(_e)||(Vt(function(){this._moveStart(!0,G.noMoveStart||!1)._animateZoom(m,D,!0)},this),0))},_animateZoom:function(m,D,G,ne){this._mapPane&&(G&&(this._animatingZoom=!0,this._animateToCenter=m,this._animateToZoom=D,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:m,zoom:D,noUpdate:ne}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ee(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Ks=ni.extend({options:{position:"topright"},initialize:function(m){mt(this,m)},getPosition:function(){return this.options.position},setPosition:function(m){var D=this._map;return D&&D.removeControl(this),this.options.position=m,D&&D.addControl(this),this},getContainer:function(){return this._container},addTo:function(m){this.remove(),this._map=m;var D=this._container=this.onAdd(m),G=this.getPosition(),ne=m._controlCorners[G];return me(D,"leaflet-control"),-1!==G.indexOf("bottom")?ne.insertBefore(D,ne.firstChild):ne.appendChild(D),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(m){this._map&&m&&m.screenX>0&&m.screenY>0&&this._map.getContainer().focus()}}),Ws=function(m){return new Ks(m)};xr.include({addControl:function(m){return m.addTo(this),this},removeControl:function(m){return m.remove(),this},_initControlPos:function(){var m=this._controlCorners={},D="leaflet-",G=this._controlContainer=$("div",D+"control-container",this._container);function ne(_e,We){m[_e+We]=$("div",D+_e+" "+D+We,G)}ne("top","left"),ne("top","right"),ne("bottom","left"),ne("bottom","right")},_clearControlPos:function(){for(var m in this._controlCorners)q(this._controlCorners[m]);q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rc=Ks.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(m,D,G,ne){return G<ne?-1:ne<G?1:0}},initialize:function(m,D,G){for(var ne in mt(this,G),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,m)this._addLayer(m[ne],ne);for(ne in D)this._addLayer(D[ne],ne,!0)},onAdd:function(m){this._initLayout(),this._update(),this._map=m,m.on("zoomend",this._checkDisabledLayers,this);for(var D=0;D<this._layers.length;D++)this._layers[D].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(m){return Ks.prototype.addTo.call(this,m),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(m,D){return this._addLayer(m,D),this._map?this._update():this},addOverlay:function(m,D){return this._addLayer(m,D,!0),this._map?this._update():this},removeLayer:function(m){m.off("add remove",this._onLayerChange,this);var D=this._getLayer(Oe(m));return D&&this._layers.splice(this._layers.indexOf(D),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var m=this._map.getSize().y-(this._container.offsetTop+50);return m<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=m+"px"):Ee(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ee(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var m="leaflet-control-layers",D=this._container=$("div",m),G=this.options.collapsed;D.setAttribute("aria-haspopup",!0),Oo(D),nc(D);var ne=this._section=$("section",m+"-list");G&&(this._map.on("click",this.collapse,this),Kn(D,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _e=this._layersLink=$("a",m+"-toggle",D);_e.href="#",_e.title="Layers",_e.setAttribute("role","button"),Kn(_e,{keydown:function(We){13===We.keyCode&&this._expandSafely()},click:function(We){qr(We),this._expandSafely()}},this),G||this.expand(),this._baseLayersList=$("div",m+"-base",ne),this._separator=$("div",m+"-separator",ne),this._overlaysList=$("div",m+"-overlays",ne),D.appendChild(ne)},_getLayer:function(m){for(var D=0;D<this._layers.length;D++)if(this._layers[D]&&Oe(this._layers[D].layer)===m)return this._layers[D]},_addLayer:function(m,D,G){this._map&&m.on("add remove",this._onLayerChange,this),this._layers.push({layer:m,name:D,overlay:G}),this.options.sortLayers&&this._layers.sort(i(function(ne,_e){return this.options.sortFunction(ne.layer,_e.layer,ne.name,_e.name)},this)),this.options.autoZIndex&&m.setZIndex&&(this._lastZIndex++,m.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ie(this._baseLayersList),ie(this._overlaysList),this._layerControlInputs=[];var m,D,G,ne,_e=0;for(G=0;G<this._layers.length;G++)this._addItem(ne=this._layers[G]),D=D||ne.overlay,m=m||!ne.overlay,_e+=ne.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(m=m&&_e>1)?"":"none"),this._separator.style.display=D&&m?"":"none",this},_onLayerChange:function(m){this._handlingClick||this._update();var D=this._getLayer(Oe(m.target)),G=D.overlay?"add"===m.type?"overlayadd":"overlayremove":"add"===m.type?"baselayerchange":null;G&&this._map.fire(G,D)},_createRadioElement:function(m,D){var G='<input type="radio" class="leaflet-control-layers-selector" name="'+m+'"'+(D?' checked="checked"':"")+"/>",ne=document.createElement("div");return ne.innerHTML=G,ne.firstChild},_addItem:function(m){var ne,D=document.createElement("label"),G=this._map.hasLayer(m.layer);m.overlay?((ne=document.createElement("input")).type="checkbox",ne.className="leaflet-control-layers-selector",ne.defaultChecked=G):ne=this._createRadioElement("leaflet-base-layers_"+Oe(this),G),this._layerControlInputs.push(ne),ne.layerId=Oe(m.layer),Kn(ne,"click",this._onInputClick,this);var _e=document.createElement("span");_e.innerHTML=" "+m.name;var We=document.createElement("span");return D.appendChild(We),We.appendChild(ne),We.appendChild(_e),(m.overlay?this._overlaysList:this._baseLayersList).appendChild(D),this._checkDisabledLayers(),D},_onInputClick:function(){if(!this._preventClick){var D,G,m=this._layerControlInputs,ne=[],_e=[];this._handlingClick=!0;for(var We=m.length-1;We>=0;We--)G=this._getLayer((D=m[We]).layerId).layer,D.checked?ne.push(G):D.checked||_e.push(G);for(We=0;We<_e.length;We++)this._map.hasLayer(_e[We])&&this._map.removeLayer(_e[We]);for(We=0;We<ne.length;We++)this._map.hasLayer(ne[We])||this._map.addLayer(ne[We]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var D,G,m=this._layerControlInputs,ne=this._map.getZoom(),_e=m.length-1;_e>=0;_e--)G=this._getLayer((D=m[_e]).layerId).layer,D.disabled=void 0!==G.options.minZoom&&ne<G.options.minZoom||void 0!==G.options.maxZoom&&ne>G.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var m=this._section;this._preventClick=!0,Kn(m,"click",qr),this.expand();var D=this;setTimeout(function(){$n(m,"click",qr),D._preventClick=!1})}}),ml=Ks.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(m){var D="leaflet-control-zoom",G=$("div",D+" leaflet-bar"),ne=this.options;return this._zoomInButton=this._createButton(ne.zoomInText,ne.zoomInTitle,D+"-in",G,this._zoomIn),this._zoomOutButton=this._createButton(ne.zoomOutText,ne.zoomOutTitle,D+"-out",G,this._zoomOut),this._updateDisabled(),m.on("zoomend zoomlevelschange",this._updateDisabled,this),G},onRemove:function(m){m.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(m){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(m.shiftKey?3:1))},_zoomOut:function(m){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(m.shiftKey?3:1))},_createButton:function(m,D,G,ne,_e){var We=$("a",G,ne);return We.innerHTML=m,We.href="#",We.title=D,We.setAttribute("role","button"),We.setAttribute("aria-label",D),Oo(We),Kn(We,"click",mo),Kn(We,"click",_e,this),Kn(We,"click",this._refocusOnMap,this),We},_updateDisabled:function(){var m=this._map,D="leaflet-disabled";Ee(this._zoomInButton,D),Ee(this._zoomOutButton,D),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||m._zoom===m.getMinZoom())&&(me(this._zoomOutButton,D),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||m._zoom===m.getMaxZoom())&&(me(this._zoomInButton,D),this._zoomInButton.setAttribute("aria-disabled","true"))}});xr.mergeOptions({zoomControl:!0}),xr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ml,this.addControl(this.zoomControl))});var Za=Ks.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(m){var D="leaflet-control-scale",G=$("div",D),ne=this.options;return this._addScales(ne,D+"-line",G),m.on(ne.updateWhenIdle?"moveend":"move",this._update,this),m.whenReady(this._update,this),G},onRemove:function(m){m.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(m,D,G){m.metric&&(this._mScale=$("div",D,G)),m.imperial&&(this._iScale=$("div",D,G))},_update:function(){var m=this._map,D=m.getSize().y/2,G=m.distance(m.containerPointToLatLng([0,D]),m.containerPointToLatLng([this.options.maxWidth,D]));this._updateScales(G)},_updateScales:function(m){this.options.metric&&m&&this._updateMetric(m),this.options.imperial&&m&&this._updateImperial(m)},_updateMetric:function(m){var D=this._getRoundNum(m);this._updateScale(this._mScale,D<1e3?D+" m":D/1e3+" km",D/m)},_updateImperial:function(m){var G,ne,_e,D=3.2808399*m;D>5280?(ne=this._getRoundNum(G=D/5280),this._updateScale(this._iScale,ne+" mi",ne/G)):(_e=this._getRoundNum(D),this._updateScale(this._iScale,_e+" ft",_e/D))},_updateScale:function(m,D,G){m.style.width=Math.round(this.options.maxWidth*G)+"px",m.innerHTML=D},_getRoundNum:function(m){var D=Math.pow(10,(Math.floor(m)+"").length-1),G=m/D;return D*(G>=10?10:G>=5?5:G>=3?3:G>=2?2:1)}}),ia=Ks.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(m){mt(this,m),this._attributions={}},onAdd:function(m){for(var D in m.attributionControl=this,this._container=$("div","leaflet-control-attribution"),Oo(this._container),m._layers)m._layers[D].getAttribution&&this.addAttribution(m._layers[D].getAttribution());return this._update(),m.on("layeradd",this._addAttribution,this),this._container},onRemove:function(m){m.off("layeradd",this._addAttribution,this)},_addAttribution:function(m){m.layer.getAttribution&&(this.addAttribution(m.layer.getAttribution()),m.layer.once("remove",function(){this.removeAttribution(m.layer.getAttribution())},this))},setPrefix:function(m){return this.options.prefix=m,this._update(),this},addAttribution:function(m){return m?(this._attributions[m]||(this._attributions[m]=0),this._attributions[m]++,this._update(),this):this},removeAttribution:function(m){return m?(this._attributions[m]&&(this._attributions[m]--,this._update()),this):this},_update:function(){if(this._map){var m=[];for(var D in this._attributions)this._attributions[D]&&m.push(D);var G=[];this.options.prefix&&G.push(this.options.prefix),m.length&&G.push(m.join(", ")),this._container.innerHTML=G.join(' <span aria-hidden="true">|</span> ')}}});xr.mergeOptions({attributionControl:!0}),xr.addInitHook(function(){this.options.attributionControl&&(new ia).addTo(this)});Ks.Layers=rc,Ks.Zoom=ml,Ks.Scale=Za,Ks.Attribution=ia,Ws.layers=function(m,D,G){return new rc(m,D,G)},Ws.zoom=function(m){return new ml(m)},Ws.scale=function(m){return new Za(m)},Ws.attribution=function(m){return new ia(m)};var Co=ni.extend({initialize:function(m){this._map=m},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Co.addTo=function(m,D){return m.addHandler(D,this),this};var Br={Events:Gi},ju=Ze.touch?"touchstart mousedown":"mousedown",Oa=vi.extend({options:{clickTolerance:3},initialize:function(m,D,G,ne){mt(this,ne),this._element=m,this._dragStartTarget=D||m,this._preventOutline=G},enable:function(){this._enabled||(Kn(this._dragStartTarget,ju,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Oa._dragging===this&&this.finishDrag(!0),$n(this._dragStartTarget,ju,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(m){if(this._enabled&&(this._moved=!1,!we(this._element,"leaflet-zoom-anim"))){if(m.touches&&1!==m.touches.length)return void(Oa._dragging===this&&this.finishDrag());if(!(Oa._dragging||m.shiftKey||1!==m.which&&1!==m.button&&!m.touches||(Oa._dragging=this,this._preventOutline&&cr(this._element),wn(),ei(),this._moving))){this.fire("down");var D=m.touches?m.touches[0]:m,G=jr(this._element);this._startPoint=new Ei(D.clientX,D.clientY),this._startPos=Dt(this._element),this._parentScale=Wr(G);var ne="mousedown"===m.type;Kn(document,ne?"mousemove":"touchmove",this._onMove,this),Kn(document,ne?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(m){if(this._enabled){if(m.touches&&m.touches.length>1)return void(this._moved=!0);var D=m.touches&&1===m.touches.length?m.touches[0]:m,G=new Ei(D.clientX,D.clientY)._subtract(this._startPoint);!G.x&&!G.y||Math.abs(G.x)+Math.abs(G.y)<this.options.clickTolerance||(G.x/=this._parentScale.x,G.y/=this._parentScale.y,qr(m),this._moved||(this.fire("dragstart"),this._moved=!0,me(document.body,"leaflet-dragging"),this._lastTarget=m.target||m.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(G),this._moving=!0,this._lastEvent=m,this._updatePosition())}},_updatePosition:function(){var m={originalEvent:this._lastEvent};this.fire("predrag",m),kt(this._element,this._newPos),this.fire("drag",m)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(m){Ee(document.body,"leaflet-dragging"),this._lastTarget&&(Ee(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$n(document,"mousemove touchmove",this._onMove,this),$n(document,"mouseup touchend touchcancel",this._onUp,this),Fn(),wi();var D=this._moved&&this._moving;this._moving=!1,Oa._dragging=!1,D&&this.fire("dragend",{noInertia:m,distance:this._newPos.distanceTo(this._startPos)})}});function qa(m,D,G){var ne,We,Ht,ai,Ti,sn,In,Yn,_r,_e=[1,4,2,8];for(We=0,In=m.length;We<In;We++)m[We]._code=ls(m[We],D);for(ai=0;ai<4;ai++){for(Yn=_e[ai],ne=[],We=0,Ht=(In=m.length)-1;We<In;Ht=We++)sn=m[Ht],(Ti=m[We])._code&Yn?sn._code&Yn||((_r=Po(sn,Ti,Yn,D,G))._code=ls(_r,D),ne.push(_r)):(sn._code&Yn&&((_r=Po(sn,Ti,Yn,D,G))._code=ls(_r,D),ne.push(_r)),ne.push(Ti));m=ne}return m}function Un(m,D){var G,ne,_e,We,Ht,ai,Ti,sn;if(!m||0===m.length)throw new Error("latlngs not passed");$r(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var Yn=on([0,0]),_r=Qt(m);_r.getNorthWest().distanceTo(_r.getSouthWest())*_r.getNorthEast().distanceTo(_r.getNorthWest())<1700&&(Yn=Uo(m));var Ps=m.length,to=[];for(G=0;G<Ps;G++){var Xs=on(m[G]);to.push(D.project(on([Xs.lat-Yn.lat,Xs.lng-Yn.lng])))}for(ai=Ti=sn=0,G=0,ne=Ps-1;G<Ps;ne=G++)Ti+=((_e=to[G]).x+(We=to[ne]).x)*(Ht=_e.y*We.x-We.y*_e.x),sn+=(_e.y+We.y)*Ht,ai+=3*Ht;var Ga=D.unproject(Ji(0===ai?to[0]:[Ti/ai,sn/ai]));return on([Ga.lat+Yn.lat,Ga.lng+Yn.lng])}function Uo(m){for(var D=0,G=0,ne=0,_e=0;_e<m.length;_e++){var We=on(m[_e]);D+=We.lat,G+=We.lng,ne++}return on([D/ne,G/ne])}var ra,Ls={__proto__:null,clipPolygon:qa,polygonCenter:Un,centroid:Uo};function Js(m,D){if(!D||!m.length)return m.slice();var G=D*D;return function _a(m,D){var G=m.length,_e=new(typeof Uint8Array<"u"?Uint8Array:Array)(G);_e[0]=_e[G-1]=1,na(m,_e,D,0,G-1);var We,Ht=[];for(We=0;We<G;We++)_e[We]&&Ht.push(m[We]);return Ht}(m=function Pa(m,D){for(var G=[m[0]],ne=1,_e=0,We=m.length;ne<We;ne++)Ot(m[ne],m[_e])>D&&(G.push(m[ne]),_e=ne);return _e<We-1&&G.push(m[We-1]),G}(m,G),G)}function Vs(m,D,G){return Math.sqrt(Wo(m,D,G,!0))}function na(m,D,G,ne,_e){var Ht,ai,Ti,We=0;for(ai=ne+1;ai<=_e-1;ai++)(Ti=Wo(m[ai],m[ne],m[_e],!0))>We&&(Ht=ai,We=Ti);We>G&&(D[Ht]=1,na(m,D,G,ne,Ht),na(m,D,G,Ht,_e))}function gl(m,D,G,ne,_e){var ai,Ti,sn,We=ne?ra:ls(m,G),Ht=ls(D,G);for(ra=Ht;;){if(!(We|Ht))return[m,D];if(We&Ht)return!1;sn=ls(Ti=Po(m,D,ai=We||Ht,G,_e),G),ai===We?(m=Ti,We=sn):(D=Ti,Ht=sn)}}function Po(m,D,G,ne,_e){var sn,In,We=D.x-m.x,Ht=D.y-m.y,ai=ne.min,Ti=ne.max;return 8&G?(sn=m.x+We*(Ti.y-m.y)/Ht,In=Ti.y):4&G?(sn=m.x+We*(ai.y-m.y)/Ht,In=ai.y):2&G?(sn=Ti.x,In=m.y+Ht*(Ti.x-m.x)/We):1&G&&(sn=ai.x,In=m.y+Ht*(ai.x-m.x)/We),new Ei(sn,In,_e)}function ls(m,D){var G=0;return m.x<D.min.x?G|=1:m.x>D.max.x&&(G|=2),m.y<D.min.y?G|=4:m.y>D.max.y&&(G|=8),G}function Ot(m,D){var G=D.x-m.x,ne=D.y-m.y;return G*G+ne*ne}function Wo(m,D,G,ne){var sn,_e=D.x,We=D.y,Ht=G.x-_e,ai=G.y-We,Ti=Ht*Ht+ai*ai;return Ti>0&&((sn=((m.x-_e)*Ht+(m.y-We)*ai)/Ti)>1?(_e=G.x,We=G.y):sn>0&&(_e+=Ht*sn,We+=ai*sn)),Ht=m.x-_e,ai=m.y-We,ne?Ht*Ht+ai*ai:new Ei(_e,We)}function $r(m){return!wt(m[0])||"object"!=typeof m[0][0]&&typeof m[0][0]<"u"}function zn(m){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$r(m)}function Rl(m,D){var G,ne,_e,We,Ht,ai,Ti,sn;if(!m||0===m.length)throw new Error("latlngs not passed");$r(m)||(console.warn("latlngs are not flat! Only the first ring will be used"),m=m[0]);var In=on([0,0]),Yn=Qt(m);Yn.getNorthWest().distanceTo(Yn.getSouthWest())*Yn.getNorthEast().distanceTo(Yn.getNorthWest())<1700&&(In=Uo(m));var Yr=m.length,Ps=[];for(G=0;G<Yr;G++){var to=on(m[G]);Ps.push(D.project(on([to.lat-In.lat,to.lng-In.lng])))}for(G=0,ne=0;G<Yr-1;G++)ne+=Ps[G].distanceTo(Ps[G+1])/2;if(0===ne)sn=Ps[0];else for(G=0,We=0;G<Yr-1;G++)if((We+=_e=(Ht=Ps[G]).distanceTo(ai=Ps[G+1]))>ne){sn=[ai.x-(Ti=(We-ne)/_e)*(ai.x-Ht.x),ai.y-Ti*(ai.y-Ht.y)];break}var Xs=D.unproject(Ji(sn));return on([Xs.lat+In.lat,Xs.lng+In.lng])}var Tc={__proto__:null,simplify:Js,pointToSegmentDistance:Vs,closestPointOnSegment:function Ka(m,D,G){return Wo(m,D,G)},clipSegment:gl,_getEdgeIntersection:Po,_getBitCode:ls,_sqClosestPointOnSegment:Wo,isFlat:$r,_flat:zn,polylineCenter:Rl},Ja={project:function(m){return new Ei(m.lng,m.lat)},unproject:function(m){return new Yi(m.y,m.x)},bounds:new bn([-180,-90],[180,90])},vl={R:6378137,R_MINOR:6356752.314245179,bounds:new bn([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(m){var D=Math.PI/180,G=this.R,ne=m.lat*D,_e=this.R_MINOR/G,We=Math.sqrt(1-_e*_e),Ht=We*Math.sin(ne),ai=Math.tan(Math.PI/4-ne/2)/Math.pow((1-Ht)/(1+Ht),We/2);return ne=-G*Math.log(Math.max(ai,1e-10)),new Ei(m.lng*D*G,ne)},unproject:function(m){for(var sn,D=180/Math.PI,G=this.R,ne=this.R_MINOR/G,_e=Math.sqrt(1-ne*ne),We=Math.exp(-m.y/G),Ht=Math.PI/2-2*Math.atan(We),ai=0,Ti=.1;ai<15&&Math.abs(Ti)>1e-7;ai++)sn=_e*Math.sin(Ht),sn=Math.pow((1-sn)/(1+sn),_e/2),Ht+=Ti=Math.PI/2-2*Math.atan(We*sn)-Ht;return new Yi(Ht*D,m.x*D/G)}},sa={__proto__:null,LonLat:Ja,Mercator:vl,SphericalMercator:ji},ds=hn({},Nn,{code:"EPSG:3395",projection:vl,transformation:function(){var m=.5/(Math.PI*vl.R);return or(m,.5,-m,.5)}()}),go=hn({},Nn,{code:"EPSG:4326",projection:Ja,transformation:or(1/180,1,-1/180,.5)}),_u=hn({},Zn,{projection:Ja,transformation:or(1,0,-1,0),scale:function(m){return Math.pow(2,m)},zoom:function(m){return Math.log(m)/Math.LN2},distance:function(m,D){var G=D.lng-m.lng,ne=D.lat-m.lat;return Math.sqrt(G*G+ne*ne)},infinite:!0});Zn.Earth=Nn,Zn.EPSG3395=ds,Zn.EPSG3857=gr,Zn.EPSG900913=xn,Zn.EPSG4326=go,Zn.Simple=_u;var oa=vi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(m){return m.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(m){return m&&m.removeLayer(this),this},getPane:function(m){return this._map.getPane(m?this.options[m]||m:this.options.pane)},addInteractiveTarget:function(m){return this._map._targets[Oe(m)]=this,this},removeInteractiveTarget:function(m){return delete this._map._targets[Oe(m)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(m){var D=m.target;if(D.hasLayer(this)){if(this._map=D,this._zoomAnimated=D._zoomAnimated,this.getEvents){var G=this.getEvents();D.on(G,this),this.once("remove",function(){D.off(G,this)},this)}this.onAdd(D),this.fire("add"),D.fire("layeradd",{layer:this})}}});xr.include({addLayer:function(m){if(!m._layerAdd)throw new Error("The provided object is not a Layer.");var D=Oe(m);return this._layers[D]||(this._layers[D]=m,m._mapToAdd=this,m.beforeAdd&&m.beforeAdd(this),this.whenReady(m._layerAdd,m)),this},removeLayer:function(m){var D=Oe(m);return this._layers[D]?(this._loaded&&m.onRemove(this),delete this._layers[D],this._loaded&&(this.fire("layerremove",{layer:m}),m.fire("remove")),m._map=m._mapToAdd=null,this):this},hasLayer:function(m){return Oe(m)in this._layers},eachLayer:function(m,D){for(var G in this._layers)m.call(D,this._layers[G]);return this},_addLayers:function(m){for(var D=0,G=(m=m?wt(m)?m:[m]:[]).length;D<G;D++)this.addLayer(m[D])},_addZoomLimit:function(m){(!isNaN(m.options.maxZoom)||!isNaN(m.options.minZoom))&&(this._zoomBoundLayers[Oe(m)]=m,this._updateZoomLevels())},_removeZoomLimit:function(m){var D=Oe(m);this._zoomBoundLayers[D]&&(delete this._zoomBoundLayers[D],this._updateZoomLevels())},_updateZoomLevels:function(){var m=1/0,D=-1/0,G=this._getZoomSpan();for(var ne in this._zoomBoundLayers){var _e=this._zoomBoundLayers[ne].options;m=void 0===_e.minZoom?m:Math.min(m,_e.minZoom),D=void 0===_e.maxZoom?D:Math.max(D,_e.maxZoom)}this._layersMaxZoom=D===-1/0?void 0:D,this._layersMinZoom=m===1/0?void 0:m,G!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ya=oa.extend({initialize:function(m,D){var G,ne;if(mt(this,D),this._layers={},m)for(G=0,ne=m.length;G<ne;G++)this.addLayer(m[G])},addLayer:function(m){var D=this.getLayerId(m);return this._layers[D]=m,this._map&&this._map.addLayer(m),this},removeLayer:function(m){var D=m in this._layers?m:this.getLayerId(m);return this._map&&this._layers[D]&&this._map.removeLayer(this._layers[D]),delete this._layers[D],this},hasLayer:function(m){return("number"==typeof m?m:this.getLayerId(m))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(m){var G,ne,D=Array.prototype.slice.call(arguments,1);for(G in this._layers)(ne=this._layers[G])[m]&&ne[m].apply(ne,D);return this},onAdd:function(m){this.eachLayer(m.addLayer,m)},onRemove:function(m){this.eachLayer(m.removeLayer,m)},eachLayer:function(m,D){for(var G in this._layers)m.call(D,this._layers[G]);return this},getLayer:function(m){return this._layers[m]},getLayers:function(){var m=[];return this.eachLayer(m.push,m),m},setZIndex:function(m){return this.invoke("setZIndex",m)},getLayerId:function(m){return Oe(m)}}),vo=ya.extend({addLayer:function(m){return this.hasLayer(m)?this:(m.addEventParent(this),ya.prototype.addLayer.call(this,m),this.fire("layeradd",{layer:m}))},removeLayer:function(m){return this.hasLayer(m)?(m in this._layers&&(m=this._layers[m]),m.removeEventParent(this),ya.prototype.removeLayer.call(this,m),this.fire("layerremove",{layer:m})):this},setStyle:function(m){return this.invoke("setStyle",m)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var m=new Gn;for(var D in this._layers){var G=this._layers[D];m.extend(G.getBounds?G.getBounds():G.getLatLng())}return m}}),$s=ni.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(m){mt(this,m)},createIcon:function(m){return this._createIcon("icon",m)},createShadow:function(m){return this._createIcon("shadow",m)},_createIcon:function(m,D){var G=this._getIconUrl(m);if(!G){if("icon"===m)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var ne=this._createImg(G,D&&"IMG"===D.tagName?D:null);return this._setIconStyles(ne,m),(this.options.crossOrigin||""===this.options.crossOrigin)&&(ne.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),ne},_setIconStyles:function(m,D){var G=this.options,ne=G[D+"Size"];"number"==typeof ne&&(ne=[ne,ne]);var _e=Ji(ne),We=Ji("shadow"===D&&G.shadowAnchor||G.iconAnchor||_e&&_e.divideBy(2,!0));m.className="leaflet-marker-"+D+" "+(G.className||""),We&&(m.style.marginLeft=-We.x+"px",m.style.marginTop=-We.y+"px"),_e&&(m.style.width=_e.x+"px",m.style.height=_e.y+"px")},_createImg:function(m,D){return(D=D||document.createElement("img")).src=m,D},_getIconUrl:function(m){return Ze.retina&&this.options[m+"RetinaUrl"]||this.options[m+"Url"]}});var Ra=$s.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(m){return"string"!=typeof Ra.imagePath&&(Ra.imagePath=this._detectIconPath()),(this.options.imagePath||Ra.imagePath)+$s.prototype._getIconUrl.call(this,m)},_stripUrl:function(m){var D=function(G,ne,_e){var We=ne.exec(G);return We&&We[_e]};return(m=D(m,/^url\((['"])?(.+)\1\)$/,2))&&D(m,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var m=$("div","leaflet-default-icon-path",document.body),D=U(m,"background-image")||U(m,"backgroundImage");if(document.body.removeChild(m),D=this._stripUrl(D))return D;var G=document.querySelector('link[href$="leaflet.css"]');return G?G.href.substring(0,G.href.length-11-1):""}}),el=Co.extend({initialize:function(m){this._marker=m},addHooks:function(){var m=this._marker._icon;this._draggable||(this._draggable=new Oa(m,m,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(m,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ee(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(m){var D=this._marker,G=D._map,ne=this._marker.options.autoPanSpeed,_e=this._marker.options.autoPanPadding,We=Dt(D._icon),Ht=G.getPixelBounds(),ai=G.getPixelOrigin(),Ti=fn(Ht.min._subtract(ai).add(_e),Ht.max._subtract(ai).subtract(_e));if(!Ti.contains(We)){var sn=Ji((Math.max(Ti.max.x,We.x)-Ti.max.x)/(Ht.max.x-Ti.max.x)-(Math.min(Ti.min.x,We.x)-Ti.min.x)/(Ht.min.x-Ti.min.x),(Math.max(Ti.max.y,We.y)-Ti.max.y)/(Ht.max.y-Ti.max.y)-(Math.min(Ti.min.y,We.y)-Ti.min.y)/(Ht.min.y-Ti.min.y)).multiplyBy(ne);G.panBy(sn,{animate:!1}),this._draggable._newPos._add(sn),this._draggable._startPos._add(sn),kt(D._icon,this._draggable._newPos),this._onDrag(m),this._panRequest=Vt(this._adjustPan.bind(this,m))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(m){this._marker.options.autoPan&&(dt(this._panRequest),this._panRequest=Vt(this._adjustPan.bind(this,m)))},_onDrag:function(m){var D=this._marker,G=D._shadow,ne=Dt(D._icon),_e=D._map.layerPointToLatLng(ne);G&&kt(G,ne),D._latlng=_e,m.latlng=_e,m.oldLatLng=this._oldLatLng,D.fire("move",m).fire("drag",m)},_onDragEnd:function(m){dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",m)}}),aa=oa.extend({options:{icon:new Ra,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(m,D){mt(this,D),this._latlng=on(m)},onAdd:function(m){this._zoomAnimated=this._zoomAnimated&&m.options.markerZoomAnimation,this._zoomAnimated&&m.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(m){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&m.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(m){var D=this._latlng;return this._latlng=on(m),this.update(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},setZIndexOffset:function(m){return this.options.zIndexOffset=m,this.update()},getIcon:function(){return this.options.icon},setIcon:function(m){return this.options.icon=m,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var m=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(m)}return this},_initIcon:function(){var m=this.options,D="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),G=m.icon.createIcon(this._icon),ne=!1;G!==this._icon&&(this._icon&&this._removeIcon(),ne=!0,m.title&&(G.title=m.title),"IMG"===G.tagName&&(G.alt=m.alt||"")),me(G,D),m.keyboard&&(G.tabIndex="0",G.setAttribute("role","button")),this._icon=G,m.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kn(G,"focus",this._panOnFocus,this);var _e=m.icon.createShadow(this._shadow),We=!1;_e!==this._shadow&&(this._removeShadow(),We=!0),_e&&(me(_e,D),_e.alt=""),this._shadow=_e,m.opacity<1&&this._updateOpacity(),ne&&this.getPane().appendChild(this._icon),this._initInteraction(),_e&&We&&this.getPane(m.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$n(this._icon,"focus",this._panOnFocus,this),q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&q(this._shadow),this._shadow=null},_setPos:function(m){this._icon&&kt(this._icon,m),this._shadow&&kt(this._shadow,m),this._zIndex=m.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(m){this._icon&&(this._icon.style.zIndex=this._zIndex+m)},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center).round();this._setPos(D)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),el)){var m=this.options.draggable;this.dragging&&(m=this.dragging.enabled(),this.dragging.disable()),this.dragging=new el(this),m&&this.dragging.enable()}},setOpacity:function(m){return this.options.opacity=m,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var m=this.options.opacity;this._icon&&pe(this._icon,m),this._shadow&&pe(this._shadow,m)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var m=this._map;if(m){var D=this.options.icon.options,G=D.iconSize?Ji(D.iconSize):Ji(0,0),ne=D.iconAnchor?Ji(D.iconAnchor):Ji(0,0);m.panInside(this._latlng,{paddingTopLeft:ne,paddingBottomRight:G.subtract(ne)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var Qs=oa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(m){this._renderer=m.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(m){return mt(this,m),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&m&&Object.prototype.hasOwnProperty.call(m,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ba=Qs.extend({options:{fill:!0,radius:10},initialize:function(m,D){mt(this,D),this._latlng=on(m),this._radius=this.options.radius},setLatLng:function(m){var D=this._latlng;return this._latlng=on(m),this.redraw(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(m){return this.options.radius=this._radius=m,this.redraw()},getRadius:function(){return this._radius},setStyle:function(m){var D=m&&m.radius||this._radius;return Qs.prototype.setStyle.call(this,m),this.setRadius(D),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var m=this._radius,D=this._radiusY||m,G=this._clickTolerance(),ne=[m+G,D+G];this._pxBounds=new bn(this._point.subtract(ne),this._point.add(ne))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(m){return m.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Eo=ba.extend({initialize:function(m,D,G){if("number"==typeof D&&(D=hn({},G,{radius:D})),mt(this,D),this._latlng=on(m),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(m){return this._mRadius=m,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var m=[this._radius,this._radiusY||this._radius];return new Gn(this._map.layerPointToLatLng(this._point.subtract(m)),this._map.layerPointToLatLng(this._point.add(m)))},setStyle:Qs.prototype.setStyle,_project:function(){var m=this._latlng.lng,D=this._latlng.lat,G=this._map,ne=G.options.crs;if(ne.distance===Nn.distance){var _e=Math.PI/180,We=this._mRadius/Nn.R/_e,Ht=G.project([D+We,m]),ai=G.project([D-We,m]),Ti=Ht.add(ai).divideBy(2),sn=G.unproject(Ti).lat,In=Math.acos((Math.cos(We*_e)-Math.sin(D*_e)*Math.sin(sn*_e))/(Math.cos(D*_e)*Math.cos(sn*_e)))/_e;(isNaN(In)||0===In)&&(In=We/Math.cos(Math.PI/180*D)),this._point=Ti.subtract(G.getPixelOrigin()),this._radius=isNaN(In)?0:Ti.x-G.project([sn,m-In]).x,this._radiusY=Ti.y-Ht.y}else{var Yn=ne.unproject(ne.project(this._latlng).subtract([this._mRadius,0]));this._point=G.latLngToLayerPoint(this._latlng),this._radius=this._point.x-G.latLngToLayerPoint(Yn).x}this._updateBounds()}});var So=Qs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(m,D){mt(this,D),this._setLatLngs(m)},getLatLngs:function(){return this._latlngs},setLatLngs:function(m){return this._setLatLngs(m),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(m){for(var _e,We,D=1/0,G=null,ne=Wo,Ht=0,ai=this._parts.length;Ht<ai;Ht++)for(var Ti=this._parts[Ht],sn=1,In=Ti.length;sn<In;sn++){var Yn=ne(m,_e=Ti[sn-1],We=Ti[sn],!0);Yn<D&&(D=Yn,G=ne(m,_e,We))}return G&&(G.distance=Math.sqrt(D)),G},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rl(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(m,D){return D=D||this._defaultShape(),m=on(m),D.push(m),this._bounds.extend(m),this.redraw()},_setLatLngs:function(m){this._bounds=new Gn,this._latlngs=this._convertLatLngs(m)},_defaultShape:function(){return $r(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(m){for(var D=[],G=$r(m),ne=0,_e=m.length;ne<_e;ne++)G?(D[ne]=on(m[ne]),this._bounds.extend(D[ne])):D[ne]=this._convertLatLngs(m[ne]);return D},_project:function(){var m=new bn;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,m),this._bounds.isValid()&&m.isValid()&&(this._rawPxBounds=m,this._updateBounds())},_updateBounds:function(){var m=this._clickTolerance(),D=new Ei(m,m);this._rawPxBounds&&(this._pxBounds=new bn([this._rawPxBounds.min.subtract(D),this._rawPxBounds.max.add(D)]))},_projectLatlngs:function(m,D,G){var We,Ht,_e=m.length;if(m[0]instanceof Yi){for(Ht=[],We=0;We<_e;We++)Ht[We]=this._map.latLngToLayerPoint(m[We]),G.extend(Ht[We]);D.push(Ht)}else for(We=0;We<_e;We++)this._projectLatlngs(m[We],D,G)},_clipPoints:function(){var m=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(m)){if(this.options.noClip)return void(this._parts=this._rings);var G,ne,_e,We,Ht,ai,Ti,D=this._parts;for(G=0,_e=0,We=this._rings.length;G<We;G++)for(ne=0,Ht=(Ti=this._rings[G]).length;ne<Ht-1;ne++)(ai=gl(Ti[ne],Ti[ne+1],m,ne,!0))&&(D[_e]=D[_e]||[],D[_e].push(ai[0]),(ai[1]!==Ti[ne+1]||ne===Ht-2)&&(D[_e].push(ai[1]),_e++))}},_simplifyPoints:function(){for(var m=this._parts,D=this.options.smoothFactor,G=0,ne=m.length;G<ne;G++)m[G]=Js(m[G],D)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(m,D){var G,ne,_e,We,Ht,ai,Ti=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(G=0,We=this._parts.length;G<We;G++)for(ne=0,_e=(Ht=(ai=this._parts[G]).length)-1;ne<Ht;_e=ne++)if((D||0!==ne)&&Vs(m,ai[_e],ai[ne])<=Ti)return!0;return!1}});So._flat=zn;var Ns=So.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Un(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(m){var D=So.prototype._convertLatLngs.call(this,m),G=D.length;return G>=2&&D[0]instanceof Yi&&D[0].equals(D[G-1])&&D.pop(),D},_setLatLngs:function(m){So.prototype._setLatLngs.call(this,m),$r(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $r(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var m=this._renderer._bounds,D=this.options.weight,G=new Ei(D,D);if(m=new bn(m.min.subtract(G),m.max.add(G)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(m)){if(this.options.noClip)return void(this._parts=this._rings);for(var We,ne=0,_e=this._rings.length;ne<_e;ne++)(We=qa(this._rings[ne],m,!0)).length&&this._parts.push(We)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(m){var G,ne,_e,We,Ht,ai,Ti,sn,D=!1;if(!this._pxBounds||!this._pxBounds.contains(m))return!1;for(We=0,Ti=this._parts.length;We<Ti;We++)for(Ht=0,ai=(sn=(G=this._parts[We]).length)-1;Ht<sn;ai=Ht++)(ne=G[Ht]).y>m.y!=(_e=G[ai]).y>m.y&&m.x<(_e.x-ne.x)*(m.y-ne.y)/(_e.y-ne.y)+ne.x&&(D=!D);return D||So.prototype._containsPoint.call(this,m,!0)}});var Ro=vo.extend({initialize:function(m,D){mt(this,D),this._layers={},m&&this.addData(m)},addData:function(m){var G,ne,_e,D=wt(m)?m:m.features;if(D){for(G=0,ne=D.length;G<ne;G++)((_e=D[G]).geometries||_e.geometry||_e.features||_e.coordinates)&&this.addData(_e);return this}var We=this.options;if(We.filter&&!We.filter(m))return this;var Ht=tl(m,We);return Ht?(Ht.feature=za(m),Ht.defaultOptions=Ht.options,this.resetStyle(Ht),We.onEachFeature&&We.onEachFeature(m,Ht),this.addLayer(Ht)):this},resetStyle:function(m){return void 0===m?this.eachLayer(this.resetStyle,this):(m.options=hn({},m.defaultOptions),this._setLayerStyle(m,this.options.style),this)},setStyle:function(m){return this.eachLayer(function(D){this._setLayerStyle(D,m)},this)},_setLayerStyle:function(m,D){m.setStyle&&("function"==typeof D&&(D=D(m.feature)),m.setStyle(D))}});function tl(m,D){var ai,Ti,sn,In,G="Feature"===m.type?m.geometry:m,ne=G?G.coordinates:null,_e=[],We=D&&D.pointToLayer,Ht=D&&D.coordsToLatLng||Fl;if(!ne&&!G)return null;switch(G.type){case"Point":return zo(We,m,ai=Ht(ne),D);case"MultiPoint":for(sn=0,In=ne.length;sn<In;sn++)ai=Ht(ne[sn]),_e.push(zo(We,m,ai,D));return new vo(_e);case"LineString":case"MultiLineString":return Ti=Os(ne,"LineString"===G.type?0:1,Ht),new So(Ti,D);case"Polygon":case"MultiPolygon":return Ti=Os(ne,"Polygon"===G.type?1:2,Ht),new Ns(Ti,D);case"GeometryCollection":for(sn=0,In=G.geometries.length;sn<In;sn++){var Yn=tl({geometry:G.geometries[sn],type:"Feature",properties:m.properties},D);Yn&&_e.push(Yn)}return new vo(_e);case"FeatureCollection":for(sn=0,In=G.features.length;sn<In;sn++){var _r=tl(G.features[sn],D);_r&&_e.push(_r)}return new vo(_e);default:throw new Error("Invalid GeoJSON object.")}}function zo(m,D,G,ne){return m?m(D,G):new aa(G,ne&&ne.markersInheritOptions&&ne)}function Fl(m){return new Yi(m[1],m[0],m[2])}function Os(m,D,G){for(var Ht,ne=[],_e=0,We=m.length;_e<We;_e++)Ht=D?Os(m[_e],D-1,G):(G||Fl)(m[_e]),ne.push(Ht);return ne}function Mc(m,D){return void 0!==(m=on(m)).alt?[Ue(m.lng,D),Ue(m.lat,D),Ue(m.alt,D)]:[Ue(m.lng,D),Ue(m.lat,D)]}function il(m,D,G,ne){for(var _e=[],We=0,Ht=m.length;We<Ht;We++)_e.push(D?il(m[We],$r(m[We])?0:D-1,G,ne):Mc(m[We],ne));return!D&&G&&_e.length>0&&_e.push(_e[0].slice()),_e}function Fo(m,D){return m.feature?hn({},m.feature,{geometry:D}):za(D)}function za(m){return"Feature"===m.type||"FeatureCollection"===m.type?m:{type:"Feature",properties:{},geometry:m}}var nl={toGeoJSON:function(m){return Fo(this,{type:"Point",coordinates:Mc(this.getLatLng(),m)})}};function ca(m,D){return new Ro(m,D)}aa.include(nl),Eo.include(nl),ba.include(nl),So.include({toGeoJSON:function(m){var D=!$r(this._latlngs);return Fo(this,{type:(D?"Multi":"")+"LineString",coordinates:il(this._latlngs,D?1:0,!1,m)})}}),Ns.include({toGeoJSON:function(m){var D=!$r(this._latlngs),G=D&&!$r(this._latlngs[0]),ne=il(this._latlngs,G?2:D?1:0,!0,m);return D||(ne=[ne]),Fo(this,{type:(G?"Multi":"")+"Polygon",coordinates:ne})}}),ya.include({toMultiPoint:function(m){var D=[];return this.eachLayer(function(G){D.push(G.toGeoJSON(m).geometry.coordinates)}),Fo(this,{type:"MultiPoint",coordinates:D})},toGeoJSON:function(m){var D=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===D)return this.toMultiPoint(m);var G="GeometryCollection"===D,ne=[];return this.eachLayer(function(_e){if(_e.toGeoJSON){var We=_e.toGeoJSON(m);if(G)ne.push(We.geometry);else{var Ht=za(We);"FeatureCollection"===Ht.type?ne.push.apply(ne,Ht.features):ne.push(Ht)}}}),G?Fo(this,{geometries:ne,type:"GeometryCollection"}):{type:"FeatureCollection",features:ne}}});var Bl=ca,xa=oa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(m,D,G){this._url=m,this._bounds=Qt(D),mt(this,G)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(m){return this.options.opacity=m,this._image&&this._updateOpacity(),this},setStyle:function(m){return m.opacity&&this.setOpacity(m.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&ge(this._image),this},setUrl:function(m){return this._url=m,this._image&&(this._image.src=m),this},setBounds:function(m){return this._bounds=Qt(m),this._map&&this._reset(),this},getEvents:function(){var m={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var m="IMG"===this._url.tagName,D=this._image=m?this._url:$("img");me(D,"leaflet-image-layer"),this._zoomAnimated&&me(D,"leaflet-zoom-animated"),this.options.className&&me(D,this.options.className),D.onselectstart=Fe,D.onmousemove=Fe,D.onload=i(this.fire,this,"load"),D.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(D.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),m?this._url=D.src:(D.src=this._url,D.alt=this.options.alt)},_animateZoom:function(m){var D=this._map.getZoomScale(m.zoom),G=this._map._latLngBoundsToNewLayerBounds(this._bounds,m.zoom,m.center).min;qe(this._image,G,D)},_reset:function(){var m=this._image,D=new bn(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),G=D.getSize();kt(m,D.min),m.style.width=G.x+"px",m.style.height=G.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var m=this.options.errorOverlayUrl;m&&this._url!==m&&(this._url=m,this._image.src=m)},getCenter:function(){return this._bounds.getCenter()}}),Fa=xa.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var m="VIDEO"===this._url.tagName,D=this._image=m?this._url:$("video");if(me(D,"leaflet-image-layer"),this._zoomAnimated&&me(D,"leaflet-zoom-animated"),this.options.className&&me(D,this.options.className),D.onselectstart=Fe,D.onmousemove=Fe,D.onloadeddata=i(this.fire,this,"load"),m){for(var G=D.getElementsByTagName("source"),ne=[],_e=0;_e<G.length;_e++)ne.push(G[_e].src);this._url=G.length>0?ne:[D.src]}else{wt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(D.style,"objectFit")&&(D.style.objectFit="fill"),D.autoplay=!!this.options.autoplay,D.loop=!!this.options.loop,D.muted=!!this.options.muted,D.playsInline=!!this.options.playsInline;for(var We=0;We<this._url.length;We++){var Ht=$("source");Ht.src=this._url[We],D.appendChild(Ht)}}}});var yu=xa.extend({_initImage:function(){var m=this._image=this._url;me(m,"leaflet-image-layer"),this._zoomAnimated&&me(m,"leaflet-zoom-animated"),this.options.className&&me(m,this.options.className),m.onselectstart=Fe,m.onmousemove=Fe}});var ua=oa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(m,D){m&&(m instanceof Yi||wt(m))?(this._latlng=on(m),mt(this,D)):(mt(this,m),this._source=D),this.options.content&&(this._content=this.options.content)},openOn:function(m){return(m=arguments.length?m:this._source._map).hasLayer(this)||m.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(m){return this._map?this.close():(arguments.length?this._source=m:m=this._source,this._prepareOpen(),this.openOn(m._map)),this},onAdd:function(m){this._zoomAnimated=m._zoomAnimated,this._container||this._initLayout(),m._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),m._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(m){m._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(i(q,void 0,this._container),200)):q(this._container),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(m){return this._latlng=on(m),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(m){return this._content=m,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var m={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&ge(this._container),this},_prepareOpen:function(m){var D=this._source;if(!D._map)return!1;if(D instanceof vo){D=null;var G=this._source._layers;for(var ne in G)if(G[ne]._map){D=G[ne];break}if(!D)return!1;this._source=D}if(!m)if(D.getCenter)m=D.getCenter();else if(D.getLatLng)m=D.getLatLng();else{if(!D.getBounds)throw new Error("Unable to get source layer LatLng.");m=D.getBounds().getCenter()}return this.setLatLng(m),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var m=this._contentNode,D="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof D)m.innerHTML=D;else{for(;m.hasChildNodes();)m.removeChild(m.firstChild);m.appendChild(D)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var m=this._map.latLngToLayerPoint(this._latlng),D=Ji(this.options.offset),G=this._getAnchor();this._zoomAnimated?kt(this._container,m.add(G)):D=D.add(m).add(G);var ne=this._containerBottom=-D.y,_e=this._containerLeft=-Math.round(this._containerWidth/2)+D.x;this._container.style.bottom=ne+"px",this._container.style.left=_e+"px"}},_getAnchor:function(){return[0,0]}});xr.include({_initOverlay:function(m,D,G,ne){var _e=D;return _e instanceof m||(_e=new m(ne).setContent(D)),G&&_e.setLatLng(G),_e}}),oa.include({_initOverlay:function(m,D,G,ne){var _e=G;return _e instanceof m?(mt(_e,ne),_e._source=this):(_e=D&&!ne?D:new m(ne,this)).setContent(G),_e}});var wa=ua.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(m){return!(m=arguments.length?m:this._source._map).hasLayer(this)&&m._popup&&m._popup.options.autoClose&&m.removeLayer(m._popup),m._popup=this,ua.prototype.openOn.call(this,m)},onAdd:function(m){ua.prototype.onAdd.call(this,m),m.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qs||this._source.on("preclick",jo))},onRemove:function(m){ua.prototype.onRemove.call(this,m),m.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qs||this._source.off("preclick",jo))},getEvents:function(){var m=ua.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(m.preclick=this.close),this.options.keepInView&&(m.moveend=this._adjustPan),m},_initLayout:function(){var m="leaflet-popup",D=this._container=$("div",m+" "+(this.options.className||"")+" leaflet-zoom-animated"),G=this._wrapper=$("div",m+"-content-wrapper",D);if(this._contentNode=$("div",m+"-content",G),Oo(D),nc(this._contentNode),Kn(D,"contextmenu",jo),this._tipContainer=$("div",m+"-tip-container",D),this._tip=$("div",m+"-tip",this._tipContainer),this.options.closeButton){var ne=this._closeButton=$("a",m+"-close-button",D);ne.setAttribute("role","button"),ne.setAttribute("aria-label","Close popup"),ne.href="#close",ne.innerHTML='<span aria-hidden="true">&#215;</span>',Kn(ne,"click",function(_e){qr(_e),this.close()},this)}},_updateLayout:function(){var m=this._contentNode,D=m.style;D.width="",D.whiteSpace="nowrap";var G=m.offsetWidth;G=Math.min(G,this.options.maxWidth),G=Math.max(G,this.options.minWidth),D.width=G+1+"px",D.whiteSpace="",D.height="";var _e=this.options.maxHeight,We="leaflet-popup-scrolled";_e&&m.offsetHeight>_e?(D.height=_e+"px",me(m,We)):Ee(m,We),this._containerWidth=this._container.offsetWidth},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center),G=this._getAnchor();kt(this._container,D.add(G))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var m=this._map,D=parseInt(U(this._container,"marginBottom"),10)||0,G=this._container.offsetHeight+D,ne=this._containerWidth,_e=new Ei(this._containerLeft,-G-this._containerBottom);_e._add(Dt(this._container));var We=m.layerPointToContainerPoint(_e),Ht=Ji(this.options.autoPanPadding),ai=Ji(this.options.autoPanPaddingTopLeft||Ht),Ti=Ji(this.options.autoPanPaddingBottomRight||Ht),sn=m.getSize(),In=0,Yn=0;We.x+ne+Ti.x>sn.x&&(In=We.x+ne-sn.x+Ti.x),We.x-In-ai.x<0&&(In=We.x-ai.x),We.y+G+Ti.y>sn.y&&(Yn=We.y+G-sn.y+Ti.y),We.y-Yn-ai.y<0&&(Yn=We.y-ai.y),(In||Yn)&&(this.options.keepInView&&(this._autopanning=!0),m.fire("autopanstart").panBy([In,Yn]))}},_getAnchor:function(){return Ji(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});xr.mergeOptions({closePopupOnClick:!0}),xr.include({openPopup:function(m,D,G){return this._initOverlay(wa,m,D,G).openOn(this),this},closePopup:function(m){return(m=arguments.length?m:this._popup)&&m.close(),this}}),oa.include({bindPopup:function(m,D){return this._popup=this._initOverlay(wa,this._popup,m,D),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(m){return this._popup&&(this instanceof vo||(this._popup._source=this),this._popup._prepareOpen(m||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(m){return this._popup&&this._popup.setContent(m),this},getPopup:function(){return this._popup},_openPopup:function(m){if(this._popup&&this._map){mo(m);var D=m.layer||m.target;if(this._popup._source===D&&!(D instanceof Qs))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(m.latlng));this._popup._source=D,this.openPopup(m.latlng)}},_movePopup:function(m){this._popup.setLatLng(m.latlng)},_onKeyPress:function(m){13===m.originalEvent.keyCode&&this._openPopup(m)}});var Dc=ua.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(m){ua.prototype.onAdd.call(this,m),this.setOpacity(this.options.opacity),m.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(m){ua.prototype.onRemove.call(this,m),m.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var m=ua.prototype.getEvents.call(this);return this.options.permanent||(m.preclick=this.close),m},_initLayout:function(){this._contentNode=this._container=$("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Oe(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(m){var D,G,ne=this._map,_e=this._container,We=ne.latLngToContainerPoint(ne.getCenter()),Ht=ne.layerPointToContainerPoint(m),ai=this.options.direction,Ti=_e.offsetWidth,sn=_e.offsetHeight,In=Ji(this.options.offset),Yn=this._getAnchor();"top"===ai?(D=Ti/2,G=sn):"bottom"===ai?(D=Ti/2,G=0):"center"===ai?(D=Ti/2,G=sn/2):"right"===ai?(D=0,G=sn/2):"left"===ai?(D=Ti,G=sn/2):Ht.x<We.x?(ai="right",D=0,G=sn/2):(ai="left",D=Ti+2*(In.x+Yn.x),G=sn/2),m=m.subtract(Ji(D,G,!0)).add(In).add(Yn),Ee(_e,"leaflet-tooltip-right"),Ee(_e,"leaflet-tooltip-left"),Ee(_e,"leaflet-tooltip-top"),Ee(_e,"leaflet-tooltip-bottom"),me(_e,"leaflet-tooltip-"+ai),kt(_e,m)},_updatePosition:function(){var m=this._map.latLngToLayerPoint(this._latlng);this._setPosition(m)},setOpacity:function(m){this.options.opacity=m,this._container&&pe(this._container,m)},_animateZoom:function(m){var D=this._map._latLngToNewLayerPoint(this._latlng,m.zoom,m.center);this._setPosition(D)},_getAnchor:function(){return Ji(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});xr.include({openTooltip:function(m,D,G){return this._initOverlay(Dc,m,D,G).openOn(this),this},closeTooltip:function(m){return m.close(),this}}),oa.include({bindTooltip:function(m,D){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Dc,this._tooltip,m,D),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(m){if(m||!this._tooltipHandlersAdded){var D=m?"off":"on",G={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?G.add=this._openTooltip:(G.mouseover=this._openTooltip,G.mouseout=this.closeTooltip,G.click=this._openTooltip,this._map?this._addFocusListeners():G.add=this._addFocusListeners),this._tooltip.options.sticky&&(G.mousemove=this._moveTooltip),this[D](G),this._tooltipHandlersAdded=!m}},openTooltip:function(m){return this._tooltip&&(this instanceof vo||(this._tooltip._source=this),this._tooltip._prepareOpen(m)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(m){return this._tooltip&&this._tooltip.setContent(m),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(m){var D="function"==typeof m.getElement&&m.getElement();D&&(Kn(D,"focus",function(){this._tooltip._source=m,this.openTooltip()},this),Kn(D,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(m){var D="function"==typeof m.getElement&&m.getElement();D&&D.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(m){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var D=this;return void this._map.once("moveend",function(){D._openOnceFlag=!1,D._openTooltip(m)})}this._tooltip._source=m.layer||m.target,this.openTooltip(this._tooltip.options.sticky?m.latlng:void 0)}},_moveTooltip:function(m){var G,ne,D=m.latlng;this._tooltip.options.sticky&&m.originalEvent&&(G=this._map.mouseEventToContainerPoint(m.originalEvent),ne=this._map.containerPointToLayerPoint(G),D=this._map.layerPointToLatLng(ne)),this._tooltip.setLatLng(D)}});var da=$s.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(m){var D=m&&"DIV"===m.tagName?m:document.createElement("div"),G=this.options;if(G.html instanceof Element?(ie(D),D.appendChild(G.html)):D.innerHTML=!1!==G.html?G.html:"",G.bgPos){var ne=Ji(G.bgPos);D.style.backgroundPosition=-ne.x+"px "+-ne.y+"px"}return this._setIconStyles(D,"icon"),D},createShadow:function(){return null}});$s.Default=Ra;var hs=oa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(m){mt(this,m)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(m){m._addZoomLimit(this)},onRemove:function(m){this._removeAllTiles(),q(this._container),m._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(m){return this.options.opacity=m,this._updateOpacity(),this},setZIndex:function(m){return this.options.zIndex=m,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var m=this._clampZoom(this._map.getZoom());m!==this._tileZoom&&(this._tileZoom=m,this._updateLevels()),this._update()}return this},getEvents:function(){var m={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Ae(this._onMoveEnd,this.options.updateInterval,this)),m.move=this._onMove),this._zoomAnimated&&(m.zoomanim=this._animateZoom),m},createTile:function(){return document.createElement("div")},getTileSize:function(){var m=this.options.tileSize;return m instanceof Ei?m:new Ei(m,m)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(m){for(var We,D=this.getPane().children,G=-m(-1/0,1/0),ne=0,_e=D.length;ne<_e;ne++)We=D[ne].style.zIndex,D[ne]!==this._container&&We&&(G=m(G,+We));isFinite(G)&&(this.options.zIndex=G+m(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){pe(this._container,this.options.opacity);var m=+new Date,D=!1,G=!1;for(var ne in this._tiles){var _e=this._tiles[ne];if(_e.current&&_e.loaded){var We=Math.min(1,(m-_e.loaded)/200);pe(_e.el,We),We<1?D=!0:(_e.active?G=!0:this._onOpaqueTile(_e),_e.active=!0)}}G&&!this._noPrune&&this._pruneTiles(),D&&(dt(this._fadeFrame),this._fadeFrame=Vt(this._updateOpacity,this))}},_onOpaqueTile:Fe,_initContainer:function(){this._container||(this._container=$("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var m=this._tileZoom,D=this.options.maxZoom;if(void 0!==m){for(var G in this._levels)G=Number(G),this._levels[G].el.children.length||G===m?(this._levels[G].el.style.zIndex=D-Math.abs(m-G),this._onUpdateLevel(G)):(q(this._levels[G].el),this._removeTilesAtZoom(G),this._onRemoveLevel(G),delete this._levels[G]);var ne=this._levels[m],_e=this._map;return ne||((ne=this._levels[m]={}).el=$("div","leaflet-tile-container leaflet-zoom-animated",this._container),ne.el.style.zIndex=D,ne.origin=_e.project(_e.unproject(_e.getPixelOrigin()),m).round(),ne.zoom=m,this._setZoomTransform(ne,_e.getCenter(),_e.getZoom()),this._onCreateLevel(ne)),this._level=ne,ne}},_onUpdateLevel:Fe,_onRemoveLevel:Fe,_onCreateLevel:Fe,_pruneTiles:function(){if(this._map){var m,D,G=this._map.getZoom();if(G>this.options.maxZoom||G<this.options.minZoom)return void this._removeAllTiles();for(m in this._tiles)(D=this._tiles[m]).retain=D.current;for(m in this._tiles)if((D=this._tiles[m]).current&&!D.active){var ne=D.coords;this._retainParent(ne.x,ne.y,ne.z,ne.z-5)||this._retainChildren(ne.x,ne.y,ne.z,ne.z+2)}for(m in this._tiles)this._tiles[m].retain||this._removeTile(m)}},_removeTilesAtZoom:function(m){for(var D in this._tiles)this._tiles[D].coords.z===m&&this._removeTile(D)},_removeAllTiles:function(){for(var m in this._tiles)this._removeTile(m)},_invalidateAll:function(){for(var m in this._levels)q(this._levels[m].el),this._onRemoveLevel(Number(m)),delete this._levels[m];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(m,D,G,ne){var _e=Math.floor(m/2),We=Math.floor(D/2),Ht=G-1,ai=new Ei(+_e,+We);ai.z=+Ht;var Ti=this._tileCoordsToKey(ai),sn=this._tiles[Ti];return sn&&sn.active?(sn.retain=!0,!0):(sn&&sn.loaded&&(sn.retain=!0),Ht>ne&&this._retainParent(_e,We,Ht,ne))},_retainChildren:function(m,D,G,ne){for(var _e=2*m;_e<2*m+2;_e++)for(var We=2*D;We<2*D+2;We++){var Ht=new Ei(_e,We);Ht.z=G+1;var ai=this._tileCoordsToKey(Ht),Ti=this._tiles[ai];Ti&&Ti.active?Ti.retain=!0:(Ti&&Ti.loaded&&(Ti.retain=!0),G+1<ne&&this._retainChildren(_e,We,G+1,ne))}},_resetView:function(m){var D=m&&(m.pinch||m.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),D,D)},_animateZoom:function(m){this._setView(m.center,m.zoom,!0,m.noUpdate)},_clampZoom:function(m){var D=this.options;return void 0!==D.minNativeZoom&&m<D.minNativeZoom?D.minNativeZoom:void 0!==D.maxNativeZoom&&D.maxNativeZoom<m?D.maxNativeZoom:m},_setView:function(m,D,G,ne){var _e=Math.round(D);_e=void 0!==this.options.maxZoom&&_e>this.options.maxZoom||void 0!==this.options.minZoom&&_e<this.options.minZoom?void 0:this._clampZoom(_e),(!ne||this.options.updateWhenZooming&&_e!==this._tileZoom)&&(this._tileZoom=_e,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==_e&&this._update(m),G||this._pruneTiles(),this._noPrune=!!G),this._setZoomTransforms(m,D)},_setZoomTransforms:function(m,D){for(var G in this._levels)this._setZoomTransform(this._levels[G],m,D)},_setZoomTransform:function(m,D,G){var ne=this._map.getZoomScale(G,m.zoom),_e=m.origin.multiplyBy(ne).subtract(this._map._getNewPixelOrigin(D,G)).round();Ze.any3d?qe(m.el,_e,ne):kt(m.el,_e)},_resetGrid:function(){var m=this._map,D=m.options.crs,G=this._tileSize=this.getTileSize(),ne=this._tileZoom,_e=this._map.getPixelWorldBounds(this._tileZoom);_e&&(this._globalTileRange=this._pxBoundsToTileRange(_e)),this._wrapX=D.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,D.wrapLng[0]],ne).x/G.x),Math.ceil(m.project([0,D.wrapLng[1]],ne).x/G.y)],this._wrapY=D.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([D.wrapLat[0],0],ne).y/G.x),Math.ceil(m.project([D.wrapLat[1],0],ne).y/G.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(m){var D=this._map,G=D._animatingZoom?Math.max(D._animateToZoom,D.getZoom()):D.getZoom(),ne=D.getZoomScale(G,this._tileZoom),_e=D.project(m,this._tileZoom).floor(),We=D.getSize().divideBy(2*ne);return new bn(_e.subtract(We),_e.add(We))},_update:function(m){var D=this._map;if(D){var G=this._clampZoom(D.getZoom());if(void 0===m&&(m=D.getCenter()),void 0!==this._tileZoom){var ne=this._getTiledPixelBounds(m),_e=this._pxBoundsToTileRange(ne),We=_e.getCenter(),Ht=[],ai=this.options.keepBuffer,Ti=new bn(_e.getBottomLeft().subtract([ai,-ai]),_e.getTopRight().add([ai,-ai]));if(!(isFinite(_e.min.x)&&isFinite(_e.min.y)&&isFinite(_e.max.x)&&isFinite(_e.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var sn in this._tiles){var In=this._tiles[sn].coords;(In.z!==this._tileZoom||!Ti.contains(new Ei(In.x,In.y)))&&(this._tiles[sn].current=!1)}if(Math.abs(G-this._tileZoom)>1)return void this._setView(m,G);for(var Yn=_e.min.y;Yn<=_e.max.y;Yn++)for(var _r=_e.min.x;_r<=_e.max.x;_r++){var Yr=new Ei(_r,Yn);if(Yr.z=this._tileZoom,this._isValidTile(Yr)){var Ps=this._tiles[this._tileCoordsToKey(Yr)];Ps?Ps.current=!0:Ht.push(Yr)}}if(Ht.sort(function(Xs,Ga){return Xs.distanceTo(We)-Ga.distanceTo(We)}),0!==Ht.length){this._loading||(this._loading=!0,this.fire("loading"));var to=document.createDocumentFragment();for(_r=0;_r<Ht.length;_r++)this._addTile(Ht[_r],to);this._level.el.appendChild(to)}}}},_isValidTile:function(m){var D=this._map.options.crs;if(!D.infinite){var G=this._globalTileRange;if(!D.wrapLng&&(m.x<G.min.x||m.x>G.max.x)||!D.wrapLat&&(m.y<G.min.y||m.y>G.max.y))return!1}if(!this.options.bounds)return!0;var ne=this._tileCoordsToBounds(m);return Qt(this.options.bounds).overlaps(ne)},_keyToBounds:function(m){return this._tileCoordsToBounds(this._keyToTileCoords(m))},_tileCoordsToNwSe:function(m){var D=this._map,G=this.getTileSize(),ne=m.scaleBy(G),_e=ne.add(G);return[D.unproject(ne,m.z),D.unproject(_e,m.z)]},_tileCoordsToBounds:function(m){var D=this._tileCoordsToNwSe(m),G=new Gn(D[0],D[1]);return this.options.noWrap||(G=this._map.wrapLatLngBounds(G)),G},_tileCoordsToKey:function(m){return m.x+":"+m.y+":"+m.z},_keyToTileCoords:function(m){var D=m.split(":"),G=new Ei(+D[0],+D[1]);return G.z=+D[2],G},_removeTile:function(m){var D=this._tiles[m];D&&(q(D.el),delete this._tiles[m],this.fire("tileunload",{tile:D.el,coords:this._keyToTileCoords(m)}))},_initTile:function(m){me(m,"leaflet-tile");var D=this.getTileSize();m.style.width=D.x+"px",m.style.height=D.y+"px",m.onselectstart=Fe,m.onmousemove=Fe,Ze.ielt9&&this.options.opacity<1&&pe(m,this.options.opacity)},_addTile:function(m,D){var G=this._getTilePos(m),ne=this._tileCoordsToKey(m),_e=this.createTile(this._wrapCoords(m),i(this._tileReady,this,m));this._initTile(_e),this.createTile.length<2&&Vt(i(this._tileReady,this,m,null,_e)),kt(_e,G),this._tiles[ne]={el:_e,coords:m,current:!0},D.appendChild(_e),this.fire("tileloadstart",{tile:_e,coords:m})},_tileReady:function(m,D,G){D&&this.fire("tileerror",{error:D,tile:G,coords:m});var ne=this._tileCoordsToKey(m);(G=this._tiles[ne])&&(G.loaded=+new Date,this._map._fadeAnimated?(pe(G.el,0),dt(this._fadeFrame),this._fadeFrame=Vt(this._updateOpacity,this)):(G.active=!0,this._pruneTiles()),D||(me(G.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:G.el,coords:m})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?Vt(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(m){return m.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(m){var D=new Ei(this._wrapX?De(m.x,this._wrapX):m.x,this._wrapY?De(m.y,this._wrapY):m.y);return D.z=m.z,D},_pxBoundsToTileRange:function(m){var D=this.getTileSize();return new bn(m.min.unscaleBy(D).floor(),m.max.unscaleBy(D).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var m in this._tiles)if(!this._tiles[m].loaded)return!1;return!0}});var Ba=hs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(m,D){this._url=m,(D=mt(this,D)).detectRetina&&Ze.retina&&D.maxZoom>0?(D.tileSize=Math.floor(D.tileSize/2),D.zoomReverse?(D.zoomOffset--,D.minZoom=Math.min(D.maxZoom,D.minZoom+1)):(D.zoomOffset++,D.maxZoom=Math.max(D.minZoom,D.maxZoom-1)),D.minZoom=Math.max(0,D.minZoom)):D.zoomReverse?D.minZoom=Math.min(D.maxZoom,D.minZoom):D.maxZoom=Math.max(D.minZoom,D.maxZoom),"string"==typeof D.subdomains&&(D.subdomains=D.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(m,D){return this._url===m&&void 0===D&&(D=!0),this._url=m,D||this.redraw(),this},createTile:function(m,D){var G=document.createElement("img");return Kn(G,"load",i(this._tileOnLoad,this,D,G)),Kn(G,"error",i(this._tileOnError,this,D,G)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(G.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(G.referrerPolicy=this.options.referrerPolicy),G.alt="",G.src=this.getTileUrl(m),G},getTileUrl:function(m){var D={r:Ze.retina?"@2x":"",s:this._getSubdomain(m),x:m.x,y:m.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var G=this._globalTileRange.max.y-m.y;this.options.tms&&(D.y=G),D["-y"]=G}return gt(this._url,hn(D,this.options))},_tileOnLoad:function(m,D){Ze.ielt9?setTimeout(i(m,this,null,D),0):m(null,D)},_tileOnError:function(m,D,G){var ne=this.options.errorTileUrl;ne&&D.getAttribute("src")!==ne&&(D.src=ne),m(G,D)},_onTileRemove:function(m){m.tile.onload=null},_getZoomForUrl:function(){var m=this._tileZoom;return this.options.zoomReverse&&(m=this.options.maxZoom-m),m+this.options.zoomOffset},_getSubdomain:function(m){var D=Math.abs(m.x+m.y)%this.options.subdomains.length;return this.options.subdomains[D]},_abortLoading:function(){var m,D;for(m in this._tiles)if(this._tiles[m].coords.z!==this._tileZoom&&((D=this._tiles[m].el).onload=Fe,D.onerror=Fe,!D.complete)){D.src=$e;var G=this._tiles[m].coords;q(D),delete this._tiles[m],this.fire("tileabort",{tile:D,coords:G})}},_removeTile:function(m){var D=this._tiles[m];if(D)return D.el.setAttribute("src",$e),hs.prototype._removeTile.call(this,m)},_tileReady:function(m,D,G){if(this._map&&(!G||G.getAttribute("src")!==$e))return hs.prototype._tileReady.call(this,m,D,G)}});function Na(m,D){return new Ba(m,D)}var To=Ba.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(m,D){this._url=m;var G=hn({},this.defaultWmsParams);for(var ne in D)ne in this.options||(G[ne]=D[ne]);var _e=(D=mt(this,D)).detectRetina&&Ze.retina?2:1,We=this.getTileSize();G.width=We.x*_e,G.height=We.y*_e,this.wmsParams=G},onAdd:function(m){this._crs=this.options.crs||m.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Ba.prototype.onAdd.call(this,m)},getTileUrl:function(m){var D=this._tileCoordsToNwSe(m),G=this._crs,ne=fn(G.project(D[0]),G.project(D[1])),_e=ne.min,We=ne.max,Ht=(this._wmsVersion>=1.3&&this._crs===go?[_e.y,_e.x,We.y,We.x]:[_e.x,_e.y,We.x,We.y]).join(","),ai=Ba.prototype.getTileUrl.call(this,m);return ai+Pt(this.wmsParams,ai,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ht},setParams:function(m,D){return hn(this.wmsParams,m),D||this.redraw(),this}});Ba.WMS=To,Na.wms=function lc(m,D){return new To(m,D)};var Bo=oa.extend({options:{padding:.1},initialize:function(m){mt(this,m),Oe(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var m={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(m.zoomanim=this._onAnimZoom),m},_onAnimZoom:function(m){this._updateTransform(m.center,m.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(m,D){var G=this._map.getZoomScale(D,this._zoom),ne=this._map.getSize().multiplyBy(.5+this.options.padding),_e=this._map.project(this._center,D),We=ne.multiplyBy(-G).add(_e).subtract(this._map._getNewPixelOrigin(m,D));Ze.any3d?qe(this._container,We,G):kt(this._container,We)},_reset:function(){for(var m in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[m]._reset()},_onZoomEnd:function(){for(var m in this._layers)this._layers[m]._project()},_updatePaths:function(){for(var m in this._layers)this._layers[m]._update()},_update:function(){var m=this.options.padding,D=this._map.getSize(),G=this._map.containerPointToLayerPoint(D.multiplyBy(-m)).round();this._bounds=new bn(G,G.add(D.multiplyBy(1+2*m)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Nr=Bo.extend({options:{tolerance:0},getEvents:function(){var m=Bo.prototype.getEvents.call(this);return m.viewprereset=this._onViewPreReset,m},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Bo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var m=this._container=document.createElement("canvas");Kn(m,"mousemove",this._onMouseMove,this),Kn(m,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Kn(m,"mouseout",this._handleMouseOut,this),m._leaflet_disable_events=!0,this._ctx=m.getContext("2d")},_destroyContainer:function(){dt(this._redrawRequest),delete this._ctx,q(this._container),$n(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var D in this._redrawBounds=null,this._layers)this._layers[D]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bo.prototype._update.call(this);var m=this._bounds,D=this._container,G=m.getSize(),ne=Ze.retina?2:1;kt(D,m.min),D.width=ne*G.x,D.height=ne*G.y,D.style.width=G.x+"px",D.style.height=G.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-m.min.x,-m.min.y),this.fire("update")}},_reset:function(){Bo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(m){this._updateDashArray(m),this._layers[Oe(m)]=m;var D=m._order={layer:m,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=D),this._drawLast=D,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(m){this._requestRedraw(m)},_removePath:function(m){var D=m._order,G=D.next,ne=D.prev;G?G.prev=ne:this._drawLast=ne,ne?ne.next=G:this._drawFirst=G,delete m._order,delete this._layers[Oe(m)],this._requestRedraw(m)},_updatePath:function(m){this._extendRedrawBounds(m),m._project(),m._update(),this._requestRedraw(m)},_updateStyle:function(m){this._updateDashArray(m),this._requestRedraw(m)},_updateDashArray:function(m){if("string"==typeof m.options.dashArray){var ne,_e,D=m.options.dashArray.split(/[, ]+/),G=[];for(_e=0;_e<D.length;_e++){if(ne=Number(D[_e]),isNaN(ne))return;G.push(ne)}m.options._dashArray=G}else m.options._dashArray=m.options.dashArray},_requestRedraw:function(m){this._map&&(this._extendRedrawBounds(m),this._redrawRequest=this._redrawRequest||Vt(this._redraw,this))},_extendRedrawBounds:function(m){if(m._pxBounds){var D=(m.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new bn,this._redrawBounds.extend(m._pxBounds.min.subtract([D,D])),this._redrawBounds.extend(m._pxBounds.max.add([D,D]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var m=this._redrawBounds;if(m){var D=m.getSize();this._ctx.clearRect(m.min.x,m.min.y,D.x,D.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var m,D=this._redrawBounds;if(this._ctx.save(),D){var G=D.getSize();this._ctx.beginPath(),this._ctx.rect(D.min.x,D.min.y,G.x,G.y),this._ctx.clip()}this._drawing=!0;for(var ne=this._drawFirst;ne;ne=ne.next)m=ne.layer,(!D||m._pxBounds&&m._pxBounds.intersects(D))&&m._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(m,D){if(this._drawing){var G,ne,_e,We,Ht=m._parts,ai=Ht.length,Ti=this._ctx;if(ai){for(Ti.beginPath(),G=0;G<ai;G++){for(ne=0,_e=Ht[G].length;ne<_e;ne++)Ti[ne?"lineTo":"moveTo"]((We=Ht[G][ne]).x,We.y);D&&Ti.closePath()}this._fillStroke(Ti,m)}}},_updateCircle:function(m){if(this._drawing&&!m._empty()){var D=m._point,G=this._ctx,ne=Math.max(Math.round(m._radius),1),_e=(Math.max(Math.round(m._radiusY),1)||ne)/ne;1!==_e&&(G.save(),G.scale(1,_e)),G.beginPath(),G.arc(D.x,D.y/_e,ne,0,2*Math.PI,!1),1!==_e&&G.restore(),this._fillStroke(G,m)}},_fillStroke:function(m,D){var G=D.options;G.fill&&(m.globalAlpha=G.fillOpacity,m.fillStyle=G.fillColor||G.color,m.fill(G.fillRule||"evenodd")),G.stroke&&0!==G.weight&&(m.setLineDash&&m.setLineDash(D.options&&D.options._dashArray||[]),m.globalAlpha=G.opacity,m.lineWidth=G.weight,m.strokeStyle=G.color,m.lineCap=G.lineCap,m.lineJoin=G.lineJoin,m.stroke())},_onClick:function(m){for(var G,ne,D=this._map.mouseEventToLayerPoint(m),_e=this._drawFirst;_e;_e=_e.next)(G=_e.layer).options.interactive&&G._containsPoint(D)&&("click"!==m.type&&"preclick"!==m.type||!this._map._draggableMoved(G))&&(ne=G);this._fireEvent(!!ne&&[ne],m)},_onMouseMove:function(m){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var D=this._map.mouseEventToLayerPoint(m);this._handleMouseHover(m,D)}},_handleMouseOut:function(m){var D=this._hoveredLayer;D&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([D],m,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(m,D){if(!this._mouseHoverThrottled){for(var G,ne,_e=this._drawFirst;_e;_e=_e.next)(G=_e.layer).options.interactive&&G._containsPoint(D)&&(ne=G);ne!==this._hoveredLayer&&(this._handleMouseOut(m),ne&&(me(this._container,"leaflet-interactive"),this._fireEvent([ne],m,"mouseover"),this._hoveredLayer=ne)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],m),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(m,D,G){this._map._fireDOMEvent(D,G||D.type,m)},_bringToFront:function(m){var D=m._order;if(D){var G=D.next,ne=D.prev;if(!G)return;G.prev=ne,ne?ne.next=G:G&&(this._drawFirst=G),D.prev=this._drawLast,this._drawLast.next=D,D.next=null,this._drawLast=D,this._requestRedraw(m)}},_bringToBack:function(m){var D=m._order;if(D){var G=D.next,ne=D.prev;if(!ne)return;ne.next=G,G?G.prev=ne:ne&&(this._drawLast=ne),D.prev=null,D.next=this._drawFirst,this._drawFirst.prev=D,this._drawFirst=D,this._requestRedraw(m)}}});function sl(m){return Ze.canvas?new Nr(m):null}var _l=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(m){return document.createElement("<lvml:"+m+' class="lvml">')}}catch{}return function(m){return document.createElement("<"+m+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ya={_initContainer:function(){this._container=$("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Bo.prototype._update.call(this),this.fire("update"))},_initPath:function(m){var D=m._container=_l("shape");me(D,"leaflet-vml-shape "+(this.options.className||"")),D.coordsize="1 1",m._path=_l("path"),D.appendChild(m._path),this._updateStyle(m),this._layers[Oe(m)]=m},_addPath:function(m){var D=m._container;this._container.appendChild(D),m.options.interactive&&m.addInteractiveTarget(D)},_removePath:function(m){var D=m._container;q(D),m.removeInteractiveTarget(D),delete this._layers[Oe(m)]},_updateStyle:function(m){var D=m._stroke,G=m._fill,ne=m.options,_e=m._container;_e.stroked=!!ne.stroke,_e.filled=!!ne.fill,ne.stroke?(D||(D=m._stroke=_l("stroke")),_e.appendChild(D),D.weight=ne.weight+"px",D.color=ne.color,D.opacity=ne.opacity,D.dashStyle=ne.dashArray?wt(ne.dashArray)?ne.dashArray.join(" "):ne.dashArray.replace(/( *, *)/g," "):"",D.endcap=ne.lineCap.replace("butt","flat"),D.joinstyle=ne.lineJoin):D&&(_e.removeChild(D),m._stroke=null),ne.fill?(G||(G=m._fill=_l("fill")),_e.appendChild(G),G.color=ne.fillColor||ne.color,G.opacity=ne.fillOpacity):G&&(_e.removeChild(G),m._fill=null)},_updateCircle:function(m){var D=m._point.round(),G=Math.round(m._radius),ne=Math.round(m._radiusY||G);this._setPath(m,m._empty()?"M0 0":"AL "+D.x+","+D.y+" "+G+","+ne+" 0,23592600")},_setPath:function(m,D){m._path.v=D},_bringToFront:function(m){ue(m._container)},_bringToBack:function(m){ge(m._container)}},Ha=Ze.vml?_l:en,$o=Bo.extend({_initContainer:function(){this._container=Ha("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ha("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){q(this._container),$n(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Bo.prototype._update.call(this);var m=this._bounds,D=m.getSize(),G=this._container;(!this._svgSize||!this._svgSize.equals(D))&&(this._svgSize=D,G.setAttribute("width",D.x),G.setAttribute("height",D.y)),kt(G,m.min),G.setAttribute("viewBox",[m.min.x,m.min.y,D.x,D.y].join(" ")),this.fire("update")}},_initPath:function(m){var D=m._path=Ha("path");m.options.className&&me(D,m.options.className),m.options.interactive&&me(D,"leaflet-interactive"),this._updateStyle(m),this._layers[Oe(m)]=m},_addPath:function(m){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(m._path),m.addInteractiveTarget(m._path)},_removePath:function(m){q(m._path),m.removeInteractiveTarget(m._path),delete this._layers[Oe(m)]},_updatePath:function(m){m._project(),m._update()},_updateStyle:function(m){var D=m._path,G=m.options;D&&(G.stroke?(D.setAttribute("stroke",G.color),D.setAttribute("stroke-opacity",G.opacity),D.setAttribute("stroke-width",G.weight),D.setAttribute("stroke-linecap",G.lineCap),D.setAttribute("stroke-linejoin",G.lineJoin),G.dashArray?D.setAttribute("stroke-dasharray",G.dashArray):D.removeAttribute("stroke-dasharray"),G.dashOffset?D.setAttribute("stroke-dashoffset",G.dashOffset):D.removeAttribute("stroke-dashoffset")):D.setAttribute("stroke","none"),G.fill?(D.setAttribute("fill",G.fillColor||G.color),D.setAttribute("fill-opacity",G.fillOpacity),D.setAttribute("fill-rule",G.fillRule||"evenodd")):D.setAttribute("fill","none"))},_updatePoly:function(m,D){this._setPath(m,_n(m._parts,D))},_updateCircle:function(m){var D=m._point,G=Math.max(Math.round(m._radius),1),_e="a"+G+","+(Math.max(Math.round(m._radiusY),1)||G)+" 0 1,0 ",We=m._empty()?"M0 0":"M"+(D.x-G)+","+D.y+_e+2*G+",0 "+_e+2*-G+",0 ";this._setPath(m,We)},_setPath:function(m,D){m._path.setAttribute("d",D)},_bringToFront:function(m){ue(m._path)},_bringToBack:function(m){ge(m._path)}});function yl(m){return Ze.svg||Ze.vml?new $o(m):null}Ze.vml&&$o.include(Ya),xr.include({getRenderer:function(m){var D=m.options.renderer||this._getPaneRenderer(m.options.pane)||this.options.renderer||this._renderer;return D||(D=this._renderer=this._createRenderer()),this.hasLayer(D)||this.addLayer(D),D},_getPaneRenderer:function(m){if("overlayPane"===m||void 0===m)return!1;var D=this._paneRenderers[m];return void 0===D&&(D=this._createRenderer({pane:m}),this._paneRenderers[m]=D),D},_createRenderer:function(m){return this.options.preferCanvas&&sl(m)||yl(m)}});var Ca=Ns.extend({initialize:function(m,D){Ns.prototype.initialize.call(this,this._boundsToLatLngs(m),D)},setBounds:function(m){return this.setLatLngs(this._boundsToLatLngs(m))},_boundsToLatLngs:function(m){return[(m=Qt(m)).getSouthWest(),m.getNorthWest(),m.getNorthEast(),m.getSouthEast()]}});$o.create=Ha,$o.pointsToPath=_n,Ro.geometryToLayer=tl,Ro.coordsToLatLng=Fl,Ro.coordsToLatLngs=Os,Ro.latLngToCoords=Mc,Ro.latLngsToCoords=il,Ro.getFeature=Fo,Ro.asFeature=za,xr.mergeOptions({boxZoom:!0});var Hl=Co.extend({initialize:function(m){this._map=m,this._container=m._container,this._pane=m._panes.overlayPane,this._resetStateTimeout=0,m.on("unload",this._destroy,this)},addHooks:function(){Kn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$n(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(m){if(!m.shiftKey||1!==m.which&&1!==m.button)return!1;this._clearDeferredResetState(),this._resetState(),ei(),wn(),this._startPoint=this._map.mouseEventToContainerPoint(m),Kn(document,{contextmenu:mo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(m){this._moved||(this._moved=!0,this._box=$("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(m);var D=new bn(this._point,this._startPoint),G=D.getSize();kt(this._box,D.min),this._box.style.width=G.x+"px",this._box.style.height=G.y+"px"},_finish:function(){this._moved&&(q(this._box),Ee(this._container,"leaflet-crosshair")),wi(),Fn(),$n(document,{contextmenu:mo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(m){if((1===m.which||1===m.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var D=new Gn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(D).fire("boxzoomend",{boxZoomBounds:D})}},_onKeyDown:function(m){27===m.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xr.addInitHook("addHandler","boxZoom",Hl),xr.mergeOptions({doubleClickZoom:!0});var Va=Co.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var D=this._map,G=D.getZoom(),ne=D.options.zoomDelta,_e=m.originalEvent.shiftKey?G-ne:G+ne;"center"===D.options.doubleClickZoom?D.setZoom(_e):D.setZoomAround(m.containerPoint,_e)}});xr.addInitHook("addHandler","doubleClickZoom",Va),xr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ol=Co.extend({addHooks:function(){if(!this._draggable){var m=this._map;this._draggable=new Oa(m._mapPane,m._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),m.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),m.on("zoomend",this._onZoomEnd,this),m.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ee(this._map._container,"leaflet-grab"),Ee(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var m=this._map;if(m._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var D=Qt(this._map.options.maxBounds);this._offsetLimit=fn(this._map.latLngToContainerPoint(D.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(D.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;m.fire("movestart").fire("dragstart"),m.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(m){if(this._map.options.inertia){var D=this._lastTime=+new Date,G=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(G),this._times.push(D),this._prunePositions(D)}this._map.fire("move",m).fire("drag",m)},_prunePositions:function(m){for(;this._positions.length>1&&m-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var m=this._map.getSize().divideBy(2),D=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=D.subtract(m).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(m,D){return m-(m-D)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var m=this._draggable._newPos.subtract(this._draggable._startPos),D=this._offsetLimit;m.x<D.min.x&&(m.x=this._viscousLimit(m.x,D.min.x)),m.y<D.min.y&&(m.y=this._viscousLimit(m.y,D.min.y)),m.x>D.max.x&&(m.x=this._viscousLimit(m.x,D.max.x)),m.y>D.max.y&&(m.y=this._viscousLimit(m.y,D.max.y)),this._draggable._newPos=this._draggable._startPos.add(m)}},_onPreDragWrap:function(){var m=this._worldWidth,D=Math.round(m/2),G=this._initialWorldOffset,ne=this._draggable._newPos.x,_e=(ne-D+G)%m+D-G,We=(ne+D+G)%m-D-G,Ht=Math.abs(_e+G)<Math.abs(We+G)?_e:We;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ht},_onDragEnd:function(m){var D=this._map,G=D.options,ne=!G.inertia||m.noInertia||this._times.length<2;if(D.fire("dragend",m),ne)D.fire("moveend");else{this._prunePositions(+new Date);var _e=this._lastPos.subtract(this._positions[0]),Ht=G.easeLinearity,ai=_e.multiplyBy(Ht/((this._lastTime-this._times[0])/1e3)),Ti=ai.distanceTo([0,0]),sn=Math.min(G.inertiaMaxSpeed,Ti),In=ai.multiplyBy(sn/Ti),Yn=sn/(G.inertiaDeceleration*Ht),_r=In.multiplyBy(-Yn/2).round();_r.x||_r.y?(_r=D._limitOffset(_r,D.options.maxBounds),Vt(function(){D.panBy(_r,{duration:Yn,easeLinearity:Ht,noMoveStart:!0,animate:!0})})):D.fire("moveend")}}});xr.addInitHook("addHandler","dragging",ol),xr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bl=Co.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(m){this._map=m,this._setPanDelta(m.options.keyboardPanDelta),this._setZoomDelta(m.options.zoomDelta)},addHooks:function(){var m=this._map._container;m.tabIndex<=0&&(m.tabIndex="0"),Kn(m,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$n(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var m=document.body,D=document.documentElement,G=m.scrollTop||D.scrollTop,ne=m.scrollLeft||D.scrollLeft;this._map._container.focus(),window.scrollTo(ne,G)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(m){var ne,_e,D=this._panKeys={},G=this.keyCodes;for(ne=0,_e=G.left.length;ne<_e;ne++)D[G.left[ne]]=[-1*m,0];for(ne=0,_e=G.right.length;ne<_e;ne++)D[G.right[ne]]=[m,0];for(ne=0,_e=G.down.length;ne<_e;ne++)D[G.down[ne]]=[0,m];for(ne=0,_e=G.up.length;ne<_e;ne++)D[G.up[ne]]=[0,-1*m]},_setZoomDelta:function(m){var ne,_e,D=this._zoomKeys={},G=this.keyCodes;for(ne=0,_e=G.zoomIn.length;ne<_e;ne++)D[G.zoomIn[ne]]=m;for(ne=0,_e=G.zoomOut.length;ne<_e;ne++)D[G.zoomOut[ne]]=-m},_addHooks:function(){Kn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$n(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(m){if(!(m.altKey||m.ctrlKey||m.metaKey)){var ne,D=m.keyCode,G=this._map;if(D in this._panKeys){if(!G._panAnim||!G._panAnim._inProgress)if(ne=this._panKeys[D],m.shiftKey&&(ne=Ji(ne).multiplyBy(3)),G.options.maxBounds&&(ne=G._limitOffset(Ji(ne),G.options.maxBounds)),G.options.worldCopyJump){var _e=G.wrapLatLng(G.unproject(G.project(G.getCenter()).add(ne)));G.panTo(_e)}else G.panBy(ne)}else if(D in this._zoomKeys)G.setZoom(G.getZoom()+(m.shiftKey?3:1)*this._zoomKeys[D]);else{if(27!==D||!G._popup||!G._popup.options.closeOnEscapeKey)return;G.closePopup()}mo(m)}}});xr.addInitHook("addHandler","keyboard",bl),xr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xl=Co.extend({addHooks:function(){Kn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$n(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(m){var D=Il(m),G=this._map.options.wheelDebounceTime;this._delta+=D,this._lastMousePos=this._map.mouseEventToContainerPoint(m),this._startTime||(this._startTime=+new Date);var ne=Math.max(G-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),ne),mo(m)},_performZoom:function(){var m=this._map,D=m.getZoom(),G=this._map.options.zoomSnap||0;m._stop();var _e=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,We=G?Math.ceil(_e/G)*G:_e,Ht=m._limitZoom(D+(this._delta>0?We:-We))-D;this._delta=0,this._startTime=null,Ht&&("center"===m.options.scrollWheelZoom?m.setZoom(D+Ht):m.setZoomAround(this._lastMousePos,D+Ht))}});xr.addInitHook("addHandler","scrollWheelZoom",xl);xr.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var No=Co.extend({addHooks:function(){Kn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$n(this._map._container,"touchstart",this._onDown,this)},_onDown:function(m){if(clearTimeout(this._holdTimeout),1===m.touches.length){var D=m.touches[0];this._startPos=this._newPos=new Ei(D.clientX,D.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Kn(document,"touchend",qr),Kn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",D))},this),600),Kn(document,"touchend touchcancel contextmenu",this._cancel,this),Kn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function m(){$n(document,"touchend",qr),$n(document,"touchend touchcancel",m)},_cancel:function(){clearTimeout(this._holdTimeout),$n(document,"touchend touchcancel contextmenu",this._cancel,this),$n(document,"touchmove",this._onMove,this)},_onMove:function(m){var D=m.touches[0];this._newPos=new Ei(D.clientX,D.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(m,D){var G=new MouseEvent(m,{bubbles:!0,cancelable:!0,view:window,screenX:D.screenX,screenY:D.screenY,clientX:D.clientX,clientY:D.clientY});G._simulated=!0,D.target.dispatchEvent(G)}});xr.addInitHook("addHandler","tapHold",No),xr.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var gs=Co.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),Kn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),$n(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(m){var D=this._map;if(m.touches&&2===m.touches.length&&!D._animatingZoom&&!this._zooming){var G=D.mouseEventToContainerPoint(m.touches[0]),ne=D.mouseEventToContainerPoint(m.touches[1]);this._centerPoint=D.getSize()._divideBy(2),this._startLatLng=D.containerPointToLatLng(this._centerPoint),"center"!==D.options.touchZoom&&(this._pinchStartLatLng=D.containerPointToLatLng(G.add(ne)._divideBy(2))),this._startDist=G.distanceTo(ne),this._startZoom=D.getZoom(),this._moved=!1,this._zooming=!0,D._stop(),Kn(document,"touchmove",this._onTouchMove,this),Kn(document,"touchend touchcancel",this._onTouchEnd,this),qr(m)}},_onTouchMove:function(m){if(m.touches&&2===m.touches.length&&this._zooming){var D=this._map,G=D.mouseEventToContainerPoint(m.touches[0]),ne=D.mouseEventToContainerPoint(m.touches[1]),_e=G.distanceTo(ne)/this._startDist;if(this._zoom=D.getScaleZoom(_e,this._startZoom),!D.options.bounceAtZoomLimits&&(this._zoom<D.getMinZoom()&&_e<1||this._zoom>D.getMaxZoom()&&_e>1)&&(this._zoom=D._limitZoom(this._zoom)),"center"===D.options.touchZoom){if(this._center=this._startLatLng,1===_e)return}else{var We=G._add(ne)._divideBy(2)._subtract(this._centerPoint);if(1===_e&&0===We.x&&0===We.y)return;this._center=D.unproject(D.project(this._pinchStartLatLng,this._zoom).subtract(We),this._zoom)}this._moved||(D._moveStart(!0,!1),this._moved=!0),dt(this._animRequest);var Ht=i(D._move,D,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Vt(Ht,this,!0),qr(m)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,dt(this._animRequest),$n(document,"touchmove",this._onTouchMove,this),$n(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});xr.addInitHook("addHandler","touchZoom",gs),xr.BoxZoom=Hl,xr.DoubleClickZoom=Va,xr.Drag=ol,xr.Keyboard=bl,xr.ScrollWheelZoom=xl,xr.TapHold=No,xr.TouchZoom=gs,Rt.Bounds=bn,Rt.Browser=Ze,Rt.CRS=Zn,Rt.Canvas=Nr,Rt.Circle=Eo,Rt.CircleMarker=ba,Rt.Class=ni,Rt.Control=Ks,Rt.DivIcon=da,Rt.DivOverlay=ua,Rt.DomEvent=gu,Rt.DomUtil=Dr,Rt.Draggable=Oa,Rt.Evented=vi,Rt.FeatureGroup=vo,Rt.GeoJSON=Ro,Rt.GridLayer=hs,Rt.Handler=Co,Rt.Icon=$s,Rt.ImageOverlay=xa,Rt.LatLng=Yi,Rt.LatLngBounds=Gn,Rt.Layer=oa,Rt.LayerGroup=ya,Rt.LineUtil=Tc,Rt.Map=xr,Rt.Marker=aa,Rt.Mixin=Br,Rt.Path=Qs,Rt.Point=Ei,Rt.PolyUtil=Ls,Rt.Polygon=Ns,Rt.Polyline=So,Rt.Popup=wa,Rt.PosAnimation=Ll,Rt.Projection=sa,Rt.Rectangle=Ca,Rt.Renderer=Bo,Rt.SVG=$o,Rt.SVGOverlay=yu,Rt.TileLayer=Ba,Rt.Tooltip=Dc,Rt.Transformation=Mr,Rt.Util=Zt,Rt.VideoOverlay=Fa,Rt.bind=i,Rt.bounds=fn,Rt.canvas=sl,Rt.circle=function ac(m,D,G){return new Eo(m,D,G)},Rt.circleMarker=function la(m,D){return new ba(m,D)},Rt.control=Ws,Rt.divIcon=function rl(m){return new da(m)},Rt.extend=hn,Rt.featureGroup=function(m,D){return new vo(m,D)},Rt.geoJSON=ca,Rt.geoJson=Bl,Rt.gridLayer=function eo(m){return new hs(m)},Rt.icon=function Qa(m){return new $s(m)},Rt.imageOverlay=function(m,D,G){return new xa(m,D,G)},Rt.latLng=on,Rt.latLngBounds=Qt,Rt.layerGroup=function(m,D){return new ya(m,D)},Rt.map=function Hc(m,D){return new xr(m,D)},Rt.marker=function kc(m,D){return new aa(m,D)},Rt.point=Ji,Rt.polygon=function ms(m,D){return new Ns(m,D)},Rt.polyline=function Ac(m,D){return new So(m,D)},Rt.popup=function(m,D){return new wa(m,D)},Rt.rectangle=function Xo(m,D){return new Ca(m,D)},Rt.setOptions=mt,Rt.stamp=Oe,Rt.svg=yl,Rt.svgOverlay=function Gc(m,D,G){return new yu(m,D,G)},Rt.tileLayer=Na,Rt.tooltip=function(m,D){return new Dc(m,D)},Rt.transformation=or,Rt.version="1.9.4",Rt.videoOverlay=function Uu(m,D,G){return new Fa(m,D,G)};var gn=window.L;Rt.noConflict=function(){return window.L=gn,this},window.L=Rt}(Gr)},4448:function(fo){fo.exports=function(){"use strict";var Gr,Rt,k;function hn(i,V){if(Gr)if(Rt){var Oe="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Gr+")(sharedChunk); ("+Rt+")(sharedChunk); self.onerror = null;",Ae={};Gr(Ae),k=V(Ae),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(k.workerUrl=window.URL.createObjectURL(new Blob([Oe],{type:"text/javascript"})))}else Rt=V;else Gr=V}return hn(0,function(i){var V=typeof self<"u"?self:{},Oe="2.15.0";let Ae;const De={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ae){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ae=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):a}catch{Ae=a}}return Ae},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!De.API_URL)return null;try{const a=new URL(De.API_URL);return"api.mapbox.cn"===a.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===a.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Fe={supported:!1,testSupport:function(a){!nt&&Je&&(mt?Pt(a):Ue=a)}};let Ue,Je,nt=!1,mt=!1;function Pt(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Je),a.isContextLost())return;Fe.supported=!0}catch{}a.deleteTexture(n),nt=!0}V.document&&(Je=V.document.createElement("img"),Je.onload=function(){Ue&&Pt(Ue),Ue=null,mt=!0},Je.onerror=function(){nt=!0,Ue=null},Je.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ot="01";function gt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wt=si;function si(a,n,u,p){this.cx=3*a,this.bx=3*(u-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(p-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=u,this.p2y=p}si.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(void 0===n&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var u=a,p=0;p<8;p++){var v=this.sampleCurveX(u)-a;if(Math.abs(v)<n)return u;var E=this.sampleCurveDerivativeX(u);if(Math.abs(E)<1e-6)break;u-=v/E}var M=0,R=1;for(u=a,p=0;p<20&&(v=this.sampleCurveX(u),!(Math.abs(v-a)<n));p++)a>v?M=u:R=u,u=.5*(R-M)+M;return u},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var $e=gt(wt),ii=oi;function oi(a,n){this.x=a,this.y=n}oi.prototype={clone:function(){return new oi(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,u=a.y-this.y;return n*n+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),u=Math.sin(a),p=u*this.x+n*this.y;return this.x=n*this.x-u*this.y,this.y=p,this},_rotateAround:function(a,n){var u=Math.cos(a),p=Math.sin(a),v=n.y+p*(this.x-n.x)+u*(this.y-n.y);return this.x=n.x+u*(this.x-n.x)-p*(this.y-n.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},oi.convert=function(a){return a instanceof oi?a:Array.isArray(a)?new oi(a[0],a[1]):a};var at=gt(ii);const ri=Math.PI/180,Xt=180/Math.PI;function Vt(a){return a*ri}function dt(a){return a*Xt}const Zt=[[0,0],[1,0],[1,1],[0,1]];function ni(a){if(a<=0)return 0;if(a>=1)return 1;const n=a*a,u=n*a;return 4*(a<.5?u:3*(a-n)+u-.75)}function gi(a,n,u,p){const v=new $e(a,n,u,p);return function(E){return v.solve(E)}}const Gi=gi(.25,.1,.25,1);function vi(a,n,u){return Math.min(u,Math.max(n,a))}function Ei(a,n,u){return(u=vi((u-a)/(n-a),0,1))*u*(3-2*u)}function Fi(a,n,u){const p=u-n,v=((a-n)%p+p)%p+n;return v===n?u:v}function Ji(a,n,u){if(!a.length)return u(null,[]);let p=a.length;const v=new Array(a.length);let E=null;a.forEach((M,R)=>{n(M,(Y,j)=>{Y&&(E=Y),v[R]=j,0==--p&&u(E,v)})})}function bn(a){const n=[];for(const u in a)n.push(a[u]);return n}function fn(a,...n){for(const u of n)for(const p in u)a[p]=u[p];return a}let Gn=1;function Qt(){return Gn++}function Yi(){return function a(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function on(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Zn(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Nn(a,n){a.forEach(u=>{n[u]&&(n[u]=n[u].bind(n))})}function Dn(a,n){return-1!==a.indexOf(n,a.length-n.length)}function ji(a,n,u){const p={};for(const v in a)p[v]=n.call(u||this,a[v],v,a);return p}function Mr(a,n,u){const p={};for(const v in a)n.call(u||this,a[v],v,a)&&(p[v]=a[v]);return p}function or(a){return Array.isArray(a)?a.map(or):"object"==typeof a&&a?ji(a,or):a}const gr={};function xn(a){gr[a]||(typeof console<"u"&&console.warn(a),gr[a]=!0)}function en(a,n,u){return(u.y-a.y)*(n.x-a.x)>(n.y-a.y)*(u.x-a.x)}function _n(a){let n=0;for(let u,p,v=0,E=a.length,M=E-1;v<E;M=v++)u=a[v],p=a[M],n+=(p.x-u.x)*(u.y+p.y);return n}function Zi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ui(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,v,E)=>{const M=v||E;return n[p]=!M||M.toLowerCase(),""}),n["max-age"]){const u=parseInt(n["max-age"],10);isNaN(u)?delete n["max-age"]:n["max-age"]=u}return n}let jn=null;function tn(a){if(null==jn){const n=a.navigator?a.navigator.userAgent:null;jn=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return jn}function Si(a){try{const n=V[a];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function mn(a,n){return[a[4*n],a[4*n+1],a[4*n+2],a[4*n+3]]}const Pn="mapbox-tiles";let Sr,vr,Lr=500,Or=50;function ar(){try{return V.caches}catch{}}function kn(){ar()&&!Sr&&(Sr=V.caches.open(Pn))}function dr(a){const n=a.indexOf("?");if(n<0)return a;const p=function(v){const E=v.indexOf("?");return E>0?v.slice(E+1).split("&"):[]}(a).filter(v=>{const E=v.split("=");return"language"===E[0]||"worldview"===E[0]});return p.length?`${a.slice(0,n)}?${p.join("&")}`:a.slice(0,n)}let Fr=1/0;const Cs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Cs);class er extends Error{constructor(n,u,p){401===u&&qt(p)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const br=Zi()?()=>self.worker&&self.worker.referrer:()=>("blob:"===V.location.protocol?V.parent:V).location.href,mr=function(a,n){if(!(/^file:/.test(u=a.url)||/^file:/.test(br())&&!/^\w+:/.test(u))){if(V.fetch&&V.Request&&V.AbortController&&V.Request.prototype.hasOwnProperty("signal"))return function(p,v){const E=new V.AbortController,M=new V.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:br(),referrerPolicy:p.referrerPolicy,signal:E.signal});let R=!1,Y=!1;const j=(ee=M.url).indexOf("sku=")>0&&qt(ee);var ee;"json"===p.type&&M.headers.set("Accept","application/json");const se=(ve,be,Me)=>{if(Y)return;if(ve&&"SecurityError"!==ve.message&&xn(ve.toString()),be&&Me)return ce(be);const Xe=Date.now();V.fetch(M).then(ut=>{if(ut.ok){const Lt=j?ut.clone():null;return ce(ut,Lt,Xe)}return v(new er(ut.statusText,ut.status,p.url))}).catch(ut=>{"AbortError"!==ut.name&&v(new Error(`${ut.message} ${p.url}`))})},ce=(ve,be,Me)=>{("arrayBuffer"===p.type?ve.arrayBuffer():"json"===p.type?ve.json():ve.text()).then(Xe=>{Y||(be&&Me&&function(ut,Lt,ht){if(kn(),!Sr)return;const At={status:Lt.status,statusText:Lt.statusText,headers:new V.Headers};Lt.headers.forEach((bi,hi)=>At.headers.set(hi,bi));const Nt=Ui(Lt.headers.get("Cache-Control")||"");if(Nt["no-store"])return;Nt["max-age"]&&At.headers.set("Expires",new Date(ht+1e3*Nt["max-age"]).toUTCString());const Bt=At.headers.get("Expires");Bt&&(new Date(Bt).getTime()-ht<42e4||function(bi,hi){if(void 0===vr)try{new Response(new ReadableStream),vr=!0}catch{vr=!1}vr?hi(bi.body):bi.blob().then(hi)}(Lt,bi=>{const hi=new V.Response(bi,At);kn(),Sr&&Sr.then(Oi=>Oi.put(dr(ut.url),hi)).catch(Oi=>xn(Oi.message))}))}(M,be,Me),R=!0,v(null,Xe,ve.headers.get("Cache-Control"),ve.headers.get("Expires")))}).catch(Xe=>{Y||v(new Error(Xe.message))})};return j?function(ve,be){if(kn(),!Sr)return be(null);const Me=dr(ve.url);Sr.then(Xe=>{Xe.match(Me).then(ut=>{const Lt=function(ht){if(!ht)return!1;const At=new Date(ht.headers.get("Expires")||0),Nt=Ui(ht.headers.get("Cache-Control")||"");return At>Date.now()&&!Nt["no-cache"]}(ut);Xe.delete(Me),Lt&&Xe.put(Me,ut.clone()),be(null,ut,Lt)}).catch(be)}).catch(be)}(M,se):se(null,null),{cancel:()=>{Y=!0,R||E.abort()}}}(a,n);if(Zi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var u;return function(p,v){const E=new V.XMLHttpRequest;E.open(p.method||"GET",p.url,!0),"arrayBuffer"===p.type&&(E.responseType="arraybuffer");for(const M in p.headers)E.setRequestHeader(M,p.headers[M]);return"json"===p.type&&(E.responseType="text",E.setRequestHeader("Accept","application/json")),E.withCredentials="include"===p.credentials,E.onerror=()=>{v(new Error(E.statusText))},E.onload=()=>{if((E.status>=200&&E.status<300||0===E.status)&&null!==E.response){let M=E.response;if("json"===p.type)try{M=JSON.parse(E.response)}catch(R){return v(R)}v(null,M,E.getResponseHeader("Cache-Control"),E.getResponseHeader("Expires"))}else v(new er(E.statusText,E.status,p.url))},E.send(p.body),{cancel:()=>E.abort()}}(a,n)},Tr=function(a,n){return mr(fn(a,{type:"arrayBuffer"}),n)};function Xr(a){const n=V.document.createElement("a");return n.href=a,n.protocol===V.document.location.protocol&&n.host===V.document.location.host}const Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ie,Be;Ie=[],Be=0;const ct=function(a,n){if(Fe.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Be>=De.MAX_PARALLEL_IMAGE_REQUESTS){const E={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Ie.push(E),E}Be++;let u=!1;const p=()=>{if(!u)for(u=!0,Be--;Ie.length&&Be<De.MAX_PARALLEL_IMAGE_REQUESTS;){const E=Ie.shift(),{requestParameters:M,callback:R,cancelled:Y}=E;Y||(E.cancel=ct(M,R).cancel)}},v=Tr(a,(E,M,R,Y)=>{p(),E?n(E):M&&(V.createImageBitmap?function(j,ee){const se=new V.Blob([new Uint8Array(j)],{type:"image/png"});V.createImageBitmap(se).then(ce=>{ee(null,ce)}).catch(ce=>{ee(new Error(`Could not load image because of ${ce.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(M,(j,ee)=>n(j,ee,R,Y)):function(j,ee){const se=new V.Image,ce=V.URL;se.onload=()=>{ee(null,se),ce.revokeObjectURL(se.src),se.onload=null,V.requestAnimationFrame(()=>{se.src=Ct})},se.onerror=()=>ee(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ve=new V.Blob([new Uint8Array(j)],{type:"image/png"});se.src=j.byteLength?ce.createObjectURL(ve):Ct}(M,(j,ee)=>n(j,ee,R,Y)))});return{cancel:()=>{v.cancel(),p()}}},lt="NO_ACCESS_TOKEN";function zt(a){return 0===a.indexOf("mapbox:")}function qt(a){return De.API_URL_REGEX.test(a)}function Kt(a){return De.API_CDN_URL_REGEX.test(a)}function pt(a){return De.API_STYLE_REGEX.test(a)&&!ui(a)}function ui(a){return De.API_SPRITE_REGEX.test(a)}const Vi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $i(a){const n=a.match(Vi);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function di(a){const n=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${n}`}const un="mapbox.eventData";function Et(a){if(!a)return null;const n=a.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(V.atob(n[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class St{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const u=Et(De.ACCESS_TOKEN);let p="";return p=u&&u.u?V.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(v,E)=>String.fromCharCode(+("0x"+E)))):De.ACCESS_TOKEN||"",n?`${un}.${n}:${p}`:`${un}:${p}`}fetchEventData(){const n=Si("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{const v=V.localStorage.getItem(u);v&&(this.eventData=JSON.parse(v));const E=V.localStorage.getItem(p);E&&(this.anonId=E)}catch{xn("Unable to read from LocalStorage")}}saveEventData(){const n=Si("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(n)try{V.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&V.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{xn("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,u,p,v){if(!De.EVENTS_URL)return;const E=$i(De.EVENTS_URL);E.params.push(`access_token=${v||De.ACCESS_TOKEN||""}`);const M={event:this.type,created:new Date(n).toISOString()},R=u?fn(M,u):M,Y={url:di(E),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};var ee;this.pendingRequest=(ee=j=>{this.pendingRequest=null,p(j),this.saveEventData(),this.processRequests(v)},mr(fn(Y,{method:"POST"}),ee))}queueRequest(n,u){this.queue.push(n),this.processRequests(u)}}const Ke=new class extends St{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,n){De.EVENTS_URL&&De.ACCESS_TOKEN&&Array.isArray(a)&&a.some(u=>zt(u)||qt(u))&&this.queueRequest(Date.now(),n)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Et(De.ACCESS_TOKEN),u=n?n.u:De.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;Zn(this.anonId)||(this.anonId=Yi(),p=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const E=new Date(this.eventData.lastSuccess),M=new Date(v),R=(v-this.eventData.lastSuccess)/864e5;p=p||R>=1||R<-1||E.getDate()!==M.getDate()}else p=!0;p?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Oe,skuId:ot,"enabled.telemetry":!1,userId:this.anonId},E=>{E||(this.eventData.lastSuccess=v,this.eventData.tokenU=u)},a):this.processRequests()}},Ze=Ke.postTurnstileEvent.bind(Ke),Re=new class extends St{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,n,u,p){this.skuToken=n,this.errorCb=p,De.EVENTS_URL&&(u||De.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:n,timestamp:u}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Zn(this.anonId)||(this.anonId=Yi()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Oe,skuId:ot,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},a))}},He=Re.postMapLoadEvent.bind(Re),ft=new class extends St{constructor(){super("gljs.performance")}postPerformanceEvent(a,n){De.EVENTS_URL&&(a||De.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},a)}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:u}=this.queue.shift(),p=function(v){const E=V.performance.getEntriesByType("resource"),M=V.performance.getEntriesByType("mark"),R=function(ce){const ve={};if(ce)for(const be in ce)if("other"!==be)for(const Me of ce[be]){const Xe=`${be}ResolveRangeMin`,ut=`${be}ResolveRangeMax`,Lt=`${be}RequestCount`,ht=`${be}RequestCachedCount`;ve[Xe]=Math.min(ve[Xe]||1/0,Me.startTime),ve[ut]=Math.max(ve[ut]||-1/0,Me.responseEnd);const At=Nt=>{void 0===ve[Nt]&&(ve[Nt]=0),++ve[Nt]};void 0!==Me.transferSize&&0===Me.transferSize&&At(ht),At(Lt)}return ve}(function(ce,ve){const be={};if(ce)for(const Me of ce){const Xe=ve(Me);void 0===be[Xe]&&(be[Xe]=[]),be[Xe].push(Me)}return be}(E,fe)),Y=V.devicePixelRatio,j=V.navigator.connection||V.navigator.mozConnection||V.navigator.webkitConnection,ee={counters:[],metadata:[],attributes:[]},se=(ce,ve,be)=>{null!=be&&ce.push({name:ve,value:be.toString()})};for(const ce in R)se(ee.counters,ce,R[ce]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(se(ee.counters,"interactionRangeMin",v.interactionRange[0]),se(ee.counters,"interactionRangeMax",v.interactionRange[1])),M)for(const ce of Object.keys(rt)){const ve=rt[ce],be=M.find(Me=>Me.name===ve);be&&se(ee.counters,ve,be.startTime)}return se(ee.counters,"visibilityHidden",v.visibilityHidden),se(ee.attributes,"style",function(ce){if(ce)for(const ve of ce){const be=ve.name.split("?")[0];if(pt(be)){const Me=be.split("/").slice(-2);if(2===Me.length)return`mapbox://styles/${Me[0]}/${Me[1]}`}}}(E)),se(ee.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),se(ee.attributes,"fogEnabled",v.fogEnabled?"true":"false"),se(ee.attributes,"projection",v.projection),se(ee.attributes,"zoom",v.zoom),se(ee.metadata,"devicePixelRatio",Y),se(ee.metadata,"connectionEffectiveType",j?j.effectiveType:void 0),se(ee.metadata,"navigatorUserAgent",V.navigator.userAgent),se(ee.metadata,"screenWidth",V.screen.width),se(ee.metadata,"screenHeight",V.screen.height),se(ee.metadata,"windowWidth",V.innerWidth),se(ee.metadata,"windowHeight",V.innerHeight),se(ee.metadata,"mapWidth",v.width/Y),se(ee.metadata,"mapHeight",v.height/Y),se(ee.metadata,"webglRenderer",v.renderer),se(ee.metadata,"webglVendor",v.vendor),se(ee.metadata,"sdkVersion",Oe),se(ee.metadata,"sdkIdentifier","mapbox-gl-js"),ee}(u);for(const v of p.metadata);for(const v of p.counters);for(const v of p.attributes);this.postEvent(n,p,()=>{},a)}},Yt=ft.postPerformanceEvent.bind(ft),xi=new class extends St{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,n,u,p){if(!De.API_URL||!De.SESSION_PATH)return;const v=$i(De.API_URL+De.SESSION_PATH);v.params.push(`sku=${n||""}`),v.params.push(`access_token=${p||De.ACCESS_TOKEN||""}`);const E={url:di(v),headers:{"Content-Type":"text/plain"}};var R;this.pendingRequest=(R=M=>{this.pendingRequest=null,u(M),this.saveEventData(),this.processRequests(p)},mr(fn(E,{method:"GET"}),R))}getSessionAPI(a,n,u,p){this.skuToken=n,this.errorCb=p,De.SESSION_PATH&&De.API_URL&&(u||De.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(lt)))}processRequests(a){if(this.pendingRequest||0===this.queue.length)return;const{id:n,timestamp:u}=this.queue.shift();n&&this.success[n]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):n&&(this.success[n]=!0)},a)}},fi=xi.getSessionAPI.bind(xi),Pi=new Set,rt={create:"create",load:"load",fullLoad:"fullLoad"},yt={mark(a){V.performance.mark(a)},measure(a,n,u){V.performance.measure(a,n,u)}};function fe(a){const n=a.name.split("?")[0];return Kt(n)&&n.includes("mapbox-gl.js")?"javascript":Kt(n)&&n.includes("mapbox-gl.css")?"css":De.API_FONTS_REGEX.test(n)?"fontRange":ui(n)?"sprite":pt(n)?"style":De.API_TILEJSON_REGEX.test(n)?"tilejson":"other"}const it=V.performance;function Tt(a){const n=a?a.url.toString():void 0;return it.getEntriesByName(n)}let Pe,It,le,o;const c={now:()=>void 0!==le?le:V.performance.now(),setNow(a){le=a},restoreNow(){le=void 0},frame(a){const n=V.requestAnimationFrame(a);return{cancel:()=>V.cancelAnimationFrame(n)}},getImageData(a,n=0){const{width:u,height:p}=a;o||(o=V.document.createElement("canvas"));const v=o.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("failed to create canvas 2d context");return(u>o.width||p>o.height)&&(o.width=u,o.height=p),v.clearRect(-n,-n,u+2*n,p+2*n),v.drawImage(a,0,0,u,p),v.getImageData(-n,-n,u+2*n,p+2*n)},resolveURL:a=>(Pe||(Pe=V.document.createElement("a")),Pe.href=a,Pe.href),get devicePixelRatio(){return V.devicePixelRatio},get prefersReducedMotion(){return!!V.matchMedia&&(null==It&&(It=V.matchMedia("(prefers-reduced-motion: reduce)")),It.matches)}};function h(a,n,u){u[a]&&-1!==u[a].indexOf(n)||(u[a]=u[a]||[],u[a].push(n))}function _(a,n,u){if(u&&u[a]){const p=u[a].indexOf(n);-1!==p&&u[a].splice(p,1)}}class b{constructor(n,u={}){fn(this,u),this.type=n}}class x extends b{constructor(n,u={}){super("error",fn({error:n},u))}}class A{on(n,u){return this._listeners=this._listeners||{},h(n,u,this._listeners),this}off(n,u){return _(n,u,this._listeners),_(n,u,this._oneTimeListeners),this}once(n,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},h(n,u,this._oneTimeListeners),this):new Promise(p=>this.once(n,p))}fire(n,u){"string"==typeof n&&(n=new b(n,u||{}));const p=n.type;if(this.listens(p)){n.target=this;const v=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const R of v)R.call(this,n);const E=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const R of E)_(p,R,this._oneTimeListeners),R.call(this,n);const M=this._eventedParent;M&&(fn(n,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),M.fire(n))}else n instanceof x&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,u){return this._eventedParent=n,this._eventedParentData=u,this}}var I=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function F(a,...n){for(const u of n)for(const p in u)a[p]=u[p];return a}function U(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function $(a){if(Array.isArray(a))return a.map($);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const u in a)n[u]=$(a[u]);return n}return U(a)}class q extends Error{constructor(n,u){super(u),this.message=u,this.key=n}}var ie=q;class ue{constructor(n,u=[]){this.parent=n,this.bindings={};for(const[p,v]of u)this.bindings[p]=v}concat(n){return new ue(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var ge=ue;const we={kind:"null"},me={kind:"number"},Ee={kind:"string"},N={kind:"boolean"},Q={kind:"color"},pe={kind:"object"},xe={kind:"value"},Le={kind:"collator"},qe={kind:"formatted"},kt={kind:"resolvedImage"};function Dt(a,n){return{kind:"array",itemType:a,N:n}}function ei(a){if("array"===a.kind){const n=ei(a.itemType);return"number"==typeof a.N?`array<${n}, ${a.N}>`:"value"===a.itemType.kind?"array":`array<${n}>`}return a.kind}const wi=[we,me,Ee,N,Q,qe,pe,Dt(xe),kt];function Mi(a,n){if("error"===n.kind)return null;if("array"===a.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!Mi(a.itemType,n.itemType))&&("number"!=typeof a.N||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if("value"===a.kind)for(const u of wi)if(!Mi(u,n))return null}return`Expected ${ei(a)} but found ${ei(n)} instead.`}function dn(a,n){return n.some(u=>u.kind===a.kind)}function wn(a,n){return n.some(u=>"null"===u?null===a:"array"===u?Array.isArray(a):"object"===u?a&&!Array.isArray(a)&&"object"==typeof a:u===typeof a)}var Fn,Qn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lr(a){return(a=Math.round(a))<0?0:a>255?255:a}function cr(a){return lr("%"===a[a.length-1]?parseFloat(a)/100*255:parseInt(a))}function Pr(a){return(n="%"===a[a.length-1]?parseFloat(a)/100:parseFloat(a))<0?0:n>1?1:n;var n}function jr(a,n,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?a+(n-a)*u*6:2*u<1?n:3*u<2?a+(n-a)*(2/3-u)*6:a}try{Fn={}.parseCSSColor=function(a){var n,u=a.replace(/ /g,"").toLowerCase();if(u in Qn)return Qn[u].slice();if("#"===u[0])return 4===u.length?(n=parseInt(u.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===u.length&&(n=parseInt(u.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var p=u.indexOf("("),v=u.indexOf(")");if(-1!==p&&v+1===u.length){var E=u.substr(0,p),M=u.substr(p+1,v-(p+1)).split(","),R=1;switch(E){case"rgba":if(4!==M.length)return null;R=Pr(M.pop());case"rgb":return 3!==M.length?null:[cr(M[0]),cr(M[1]),cr(M[2]),R];case"hsla":if(4!==M.length)return null;R=Pr(M.pop());case"hsl":if(3!==M.length)return null;var Y=(parseFloat(M[0])%360+360)%360/360,j=Pr(M[1]),ee=Pr(M[2]),se=ee<=.5?ee*(j+1):ee+j-ee*j,ce=2*ee-se;return[lr(255*jr(ce,se,Y+1/3)),lr(255*jr(ce,se,Y)),lr(255*jr(ce,se,Y-1/3)),R];default:return null}}return null}}catch{}class Wr{constructor(n,u,p,v=1){this.r=n,this.g=u,this.b=p,this.a=v}static parse(n){if(!n)return;if(n instanceof Wr)return n;if("string"!=typeof n)return;const u=Fn(n);return u?new Wr(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[n,u,p,v]=this.toArray();return`rgba(${Math.round(n)},${Math.round(u)},${Math.round(p)},${v})`}toArray(){const{r:n,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[255*n/v,255*u/v,255*p/v,v]}toArray01(){const{r:n,g:u,b:p,a:v}=this;return 0===v?[0,0,0,0]:[n/v,u/v,p/v,v]}toArray01PremultipliedAlpha(){const{r:n,g:u,b:p,a:v}=this;return[n,u,p,v]}}Wr.black=new Wr(0,0,0,1),Wr.white=new Wr(1,1,1,1),Wr.transparent=new Wr(0,0,0,0),Wr.red=new Wr(1,0,0,1),Wr.blue=new Wr(0,0,1,1);var Dr=Wr;class Kn{constructor(n,u,p){this.sensitivity=n?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,u){return this.collator.compare(n,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ss{constructor(n,u,p,v,E){this.text=n.normalize?n.normalize():n,this.image=u,this.scale=p,this.fontStack=v,this.textColor=E}}class $n{constructor(n){this.sections=n}static fromString(n){return new $n([new ss(n,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(n=>0!==n.text.length||n.image&&0!==n.image.name.length)}static factory(n){return n instanceof $n?n:$n.fromString(n)}toString(){return 0===this.sections.length?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const u of this.sections){if(u.image){n.push(["image",u.image.name]);continue}n.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),n.push(p)}return n}}class Zr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Zr({name:n,available:!1}):null}serialize(){return["image",this.name]}}function fl(a,n,u,p){return"number"==typeof a&&a>=0&&a<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===p||"number"==typeof p&&p>=0&&p<=1?null:`Invalid rgba value [${[a,n,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof p?[a,n,u,p]:[a,n,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function va(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof Dr||a instanceof Kn||a instanceof $n||a instanceof Zr)return!0;if(Array.isArray(a)){for(const n of a)if(!va(n))return!1;return!0}if("object"==typeof a){for(const n in a)if(!va(a[n]))return!1;return!0}return!1}function as(a){if(null===a)return we;if("string"==typeof a)return Ee;if("boolean"==typeof a)return N;if("number"==typeof a)return me;if(a instanceof Dr)return Q;if(a instanceof Kn)return Le;if(a instanceof $n)return qe;if(a instanceof Zr)return kt;if(Array.isArray(a)){const n=a.length;let u;for(const p of a){const v=as(p);if(u){if(u===v)continue;u=xe;break}u=v}return Dt(u||xe,n)}return pe}function jo(a){const n=typeof a;return null===a?"":"string"===n||"number"===n||"boolean"===n?String(a):a instanceof Dr||a instanceof $n||a instanceof Zr?a.toString():JSON.stringify(a)}class nc{constructor(n,u){this.type=n,this.value=u}static parse(n,u){if(2!==n.length)return u.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!va(n[1]))return u.error("invalid value");const p=n[1];let v=as(p);const E=u.expectedType;return"array"!==v.kind||0!==v.N||!E||"array"!==E.kind||"number"==typeof E.N&&0!==E.N||(v=E),new nc(v,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Dr?["rgba"].concat(this.value.toArray()):this.value instanceof $n?this.value.serialize():this.value}}var Oo=nc,qr=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const mo={string:Ee,number:me,boolean:N,object:pe};class Sc{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");let p,v=1;const E=n[0];if("array"===E){let R,Y;if(n.length>2){const j=n[1];if("string"!=typeof j||!(j in mo)||"object"===j)return u.error('The item type argument of "array" must be one of string, number, boolean',1);R=mo[j],v++}else R=xe;if(n.length>3){if(null!==n[2]&&("number"!=typeof n[2]||n[2]<0||n[2]!==Math.floor(n[2])))return u.error('The length argument to "array" must be a positive integer literal',2);Y=n[2],v++}p=Dt(R,Y)}else p=mo[E];const M=[];for(;v<n.length;v++){const R=u.parse(n[v],v,xe);if(!R)return null;M.push(R)}return new Sc(p,M)}evaluate(n){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(n);if(!Mi(this.type,as(p)))return p;if(u===this.args.length-1)throw new qr(`Expected value to be of type ${ei(this.type)}, but found ${ei(as(p))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,u=[n.kind];if("array"===n.kind){const p=n.itemType;if("string"===p.kind||"number"===p.kind||"boolean"===p.kind){u.push(p.kind);const v=n.N;("number"==typeof v||this.args.length>1)&&u.push(v)}}return u.concat(this.args.map(p=>p.serialize()))}}var La=Sc;class ea{constructor(n){this.type=qe,this.sections=n}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const p=n[1];if(!Array.isArray(p)&&"object"==typeof p)return u.error("First argument must be an image or text section.");const v=[];let E=!1;for(let M=1;M<=n.length-1;++M){const R=n[M];if(E&&"object"==typeof R&&!Array.isArray(R)){E=!1;let Y=null;if(R["font-scale"]&&(Y=u.parse(R["font-scale"],1,me),!Y))return null;let j=null;if(R["text-font"]&&(j=u.parse(R["text-font"],1,Dt(Ee)),!j))return null;let ee=null;if(R["text-color"]&&(ee=u.parse(R["text-color"],1,Q),!ee))return null;const se=v[v.length-1];se.scale=Y,se.font=j,se.textColor=ee}else{const Y=u.parse(n[M],1,xe);if(!Y)return null;const j=Y.type.kind;if("string"!==j&&"value"!==j&&"null"!==j&&"resolvedImage"!==j)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,v.push({content:Y,scale:null,font:null,textColor:null})}}return new ea(v)}evaluate(n){return new $n(this.sections.map(u=>{const p=u.content.evaluate(n);return as(p)===kt?new ss("",p,null,null,null):new ss(jo(p),null,u.scale?u.scale.evaluate(n):null,u.font?u.font.evaluate(n).join(","):null,u.textColor?u.textColor.evaluate(n):null)}))}eachChild(n){for(const u of this.sections)n(u.content),u.scale&&n(u.scale),u.font&&n(u.font),u.textColor&&n(u.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const u of this.sections){n.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),n.push(p)}return n}}class Il{constructor(n){this.type=kt,this.input=n}static parse(n,u){if(2!==n.length)return u.error("Expected two arguments.");const p=u.parse(n[1],1,Ee);return p?new Il(p):u.error("No image name provided.")}evaluate(n){const u=this.input.evaluate(n),p=Zr.fromString(u);return p&&n.availableImages&&(p.available=n.availableImages.indexOf(u)>-1),p}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Yc={"to-boolean":N,"to-color":Q,"to-number":me,"to-string":Ee};class gu{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const p=n[0];if(("to-boolean"===p||"to-string"===p)&&2!==n.length)return u.error("Expected one argument.");const v=Yc[p],E=[];for(let M=1;M<n.length;M++){const R=u.parse(n[M],M,xe);if(!R)return null;E.push(R)}return new gu(v,E)}evaluate(n){if("boolean"===this.type.kind)return!!this.args[0].evaluate(n);if("color"===this.type.kind){let u,p;for(const v of this.args){if(u=v.evaluate(n),p=null,u instanceof Dr)return u;if("string"==typeof u){const E=n.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:fl(u[0],u[1],u[2],u[3]),!p))return new Dr(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new qr(p||`Could not parse color from value '${"string"==typeof u?u:String(JSON.stringify(u))}'`)}if("number"===this.type.kind){let u=null;for(const p of this.args){if(u=p.evaluate(n),null===u)return 0;const v=Number(u);if(!isNaN(v))return v}throw new qr(`Could not convert ${JSON.stringify(u)} to number.`)}return"formatted"===this.type.kind?$n.fromString(jo(this.args[0].evaluate(n))):"resolvedImage"===this.type.kind?Zr.fromString(jo(this.args[0].evaluate(n))):jo(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if("formatted"===this.type.kind)return new ea([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Il(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(u=>{n.push(u.serialize())}),n}}var Ll=gu;const xr=["Unknown","Point","LineString","Polygon"];var Hc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?xr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:u,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*n-a[0])+this.featureDistanceData.bearing[1]*(p*n-a[1])}return 0}parseColor(a){let n=this._parseColorCache[a];return n||(n=this._parseColorCache[a]=Dr.parse(a)),n}};class Ks{constructor(n,u,p,v){this.name=n,this.type=u,this._evaluate=p,this.args=v}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,u){const p=n[0],v=Ks.definitions[p];if(!v)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(v)?v[0]:v.type,M=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,R=M.filter(([j])=>!Array.isArray(j)||j.length===n.length-1);let Y=null;for(const[j,ee]of R){Y=new Po(u.registry,u.path,null,u.scope);const se=[];let ce=!1;for(let ve=1;ve<n.length;ve++){const be=n[ve],Me=Array.isArray(j)?j[ve-1]:j.type,Xe=Y.parse(be,1+se.length,Me);if(!Xe){ce=!0;break}se.push(Xe)}if(!ce)if(Array.isArray(j)&&j.length!==se.length)Y.error(`Expected ${j.length} arguments, but found ${se.length} instead.`);else{for(let ve=0;ve<se.length;ve++){const be=Array.isArray(j)?j[ve]:j.type,Me=se[ve];Y.concat(ve+1).checkSubtype(be,Me.type)}if(0===Y.errors.length)return new Ks(p,E,ee,se)}}if(1===R.length)u.errors.push(...Y.errors);else{const j=(R.length?R:M).map(([se])=>{return ce=se,Array.isArray(ce)?`(${ce.map(ei).join(", ")})`:`(${ei(ce.type)}...)`;var ce}).join(" | "),ee=[];for(let se=1;se<n.length;se++){const ce=u.parse(n[se],1+ee.length);if(!ce)return null;ee.push(ei(ce.type))}u.error(`Expected arguments of type ${j}, but found (${ee.join(", ")}) instead.`)}return null}static register(n,u){Ks.definitions=u;for(const p in u)n[p]=Ks}}var Ws=Ks;class rc{constructor(n,u,p){this.type=Le,this.locale=p,this.caseSensitive=n,this.diacriticSensitive=u}static parse(n,u){if(2!==n.length)return u.error("Expected one argument.");const p=n[1];if("object"!=typeof p||Array.isArray(p))return u.error("Collator options argument must be an object.");const v=u.parse(void 0!==p["case-sensitive"]&&p["case-sensitive"],1,N);if(!v)return null;const E=u.parse(void 0!==p["diacritic-sensitive"]&&p["diacritic-sensitive"],1,N);if(!E)return null;let M=null;return p.locale&&(M=u.parse(p.locale,1,Ee),!M)?null:new rc(v,E,M)}evaluate(n){return new Kn(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const ta=8192;function ml(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Ol(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function Za(a,n){const u=(180+a[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,v=Math.pow(2,n.z);return[Math.round(u*v*ta),Math.round(p*v*ta)]}function vu(a,n,u){const p=a[0]-n[0],v=a[1]-n[1],E=a[0]-u[0],M=a[1]-u[1];return p*M-E*v==0&&p*E<=0&&v*M<=0}function sc(a,n){let u=!1;for(let M=0,R=n.length;M<R;M++){const Y=n[M];for(let j=0,ee=Y.length;j<ee-1;j++){if(vu(a,Y[j],Y[j+1]))return!1;(v=Y[j])[1]>(p=a)[1]!=(E=Y[j+1])[1]>p[1]&&p[0]<(E[0]-v[0])*(p[1]-v[1])/(E[1]-v[1])+v[0]&&(u=!u)}}var p,v,E;return u}function ia(a,n){for(let u=0;u<n.length;u++)if(sc(a,n[u]))return!0;return!1}function Pl(a,n,u,p){const v=p[0]-u[0],E=p[1]-u[1],M=(a[0]-u[0])*E-v*(a[1]-u[1]),R=(n[0]-u[0])*E-v*(n[1]-u[1]);return M>0&&R<0||M<0&&R>0}function Co(a,n,u){for(const j of u)for(let ee=0;ee<j.length-1;++ee)if((R=[(M=j[ee+1])[0]-(E=j[ee])[0],M[1]-E[1]])[0]*(Y=[(v=n)[0]-(p=a)[0],v[1]-p[1]])[1]-R[1]*Y[0]!=0&&Pl(p,v,E,M)&&Pl(E,M,p,v))return!0;var p,v,E,M,R,Y;return!1}function Br(a,n){for(let u=0;u<a.length;++u)if(!sc(a[u],n))return!1;for(let u=0;u<a.length-1;++u)if(Co(a[u],a[u+1],n))return!1;return!0}function ju(a,n){for(let u=0;u<n.length;u++)if(Br(a,n[u]))return!0;return!1}function Oa(a,n,u){const p=[];for(let v=0;v<a.length;v++){const E=[];for(let M=0;M<a[v].length;M++){const R=Za(a[v][M],u);ml(n,R),E.push(R)}p.push(E)}return p}function qa(a,n,u){const p=[];for(let v=0;v<a.length;v++){const E=Oa(a[v],n,u);p.push(E)}return p}function Un(a,n,u,p){if(a[0]<u[0]||a[0]>u[2]){const v=.5*p;let E=a[0]-u[0]>v?-p:u[0]-a[0]>v?p:0;0===E&&(E=a[0]-u[2]>v?-p:u[2]-a[0]>v?p:0),a[0]+=E}ml(n,a)}function Uo(a,n,u,p){const v=Math.pow(2,p.z)*ta,E=[p.x*ta,p.y*ta],M=[];if(!a)return M;for(const R of a)for(const Y of R){const j=[Y.x+E[0],Y.y+E[1]];Un(j,n,u,v),M.push(j)}return M}function Ls(a,n,u,p){const v=Math.pow(2,p.z)*ta,E=[p.x*ta,p.y*ta],M=[];if(!a)return M;for(const Y of a){const j=[];for(const ee of Y){const se=[ee.x+E[0],ee.y+E[1]];ml(n,se),j.push(se)}M.push(j)}if(n[2]-n[0]<=v/2){(R=n)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const Y of M)for(const j of Y)Un(j,n,u,v)}var R;return M}class Js{constructor(n,u){this.type=N,this.geojson=n,this.geometries=u}static parse(n,u){if(2!==n.length)return u.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(va(n[1])){const p=n[1];if("FeatureCollection"===p.type)for(let v=0;v<p.features.length;++v){const E=p.features[v].geometry.type;if("Polygon"===E||"MultiPolygon"===E)return new Js(p,p.features[v].geometry)}else if("Feature"===p.type){const v=p.geometry.type;if("Polygon"===v||"MultiPolygon"===v)return new Js(p,p.geometry)}else if("Polygon"===p.type||"MultiPolygon"===p.type)return new Js(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(null!=n.geometry()&&null!=n.canonicalID()){if("Point"===n.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],M=u.canonicalID();if(!M)return!1;if("Polygon"===p.type){const R=Oa(p.coordinates,E,M),Y=Uo(u.geometry(),v,E,M);if(!Ol(v,E))return!1;for(const j of Y)if(!sc(j,R))return!1}if("MultiPolygon"===p.type){const R=qa(p.coordinates,E,M),Y=Uo(u.geometry(),v,E,M);if(!Ol(v,E))return!1;for(const j of Y)if(!ia(j,R))return!1}return!0}(n,this.geometries);if("LineString"===n.geometryType())return function(u,p){const v=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],M=u.canonicalID();if(!M)return!1;if("Polygon"===p.type){const R=Oa(p.coordinates,E,M),Y=Ls(u.geometry(),v,E,M);if(!Ol(v,E))return!1;for(const j of Y)if(!Br(j,R))return!1}if("MultiPolygon"===p.type){const R=qa(p.coordinates,E,M),Y=Ls(u.geometry(),v,E,M);if(!Ol(v,E))return!1;for(const j of Y)if(!ju(j,R))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Vs=Js;function Ka(a){if(a instanceof Ws&&("get"===a.name&&1===a.args.length||"feature-state"===a.name||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name))||a instanceof Vs)return!1;let n=!0;return a.eachChild(u=>{n&&!Ka(u)&&(n=!1)}),n}function _a(a){if(a instanceof Ws&&"feature-state"===a.name)return!1;let n=!0;return a.eachChild(u=>{n&&!_a(u)&&(n=!1)}),n}function na(a,n){if(a instanceof Ws&&n.indexOf(a.name)>=0)return!1;let u=!0;return a.eachChild(p=>{u&&!na(p,n)&&(u=!1)}),u}class Pa{constructor(n,u){this.type=u.type,this.name=n,this.boundExpression=u}static parse(n,u){if(2!==n.length||"string"!=typeof n[1])return u.error("'var' expression requires exactly one string literal argument.");const p=n[1];return u.scope.has(p)?new Pa(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ra=Pa;class gl{constructor(n,u=[],p,v=new ge,E=[]){this.registry=n,this.path=u,this.key=u.map(M=>`[${M}]`).join(""),this.scope=v,this.errors=E,this.expectedType=p}parse(n,u,p,v,E={}){return u?this.concat(u,p,v)._parse(n,E):this._parse(n,E)}_parse(n,u){function p(v,E,M){return"assert"===M?new La(E,[v]):"coerce"===M?new Ll(E,[v]):v}if(null!==n&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n||(n=["literal",n]),Array.isArray(n)){if(0===n.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=n[0];if("string"!=typeof v)return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[v];if(E){let M=E.parse(n,this);if(!M)return null;if(this.expectedType){const R=this.expectedType,Y=M.type;if("string"!==R.kind&&"number"!==R.kind&&"boolean"!==R.kind&&"object"!==R.kind&&"array"!==R.kind||"value"!==Y.kind)if("color"!==R.kind&&"formatted"!==R.kind&&"resolvedImage"!==R.kind||"value"!==Y.kind&&"string"!==Y.kind){if(this.checkSubtype(R,Y))return null}else M=p(M,R,u.typeAnnotation||"coerce");else M=p(M,R,u.typeAnnotation||"assert")}if(!(M instanceof Oo)&&"resolvedImage"!==M.type.kind&&ls(M)){const R=new Hc;try{M=new Oo(M.type,M.evaluate(R))}catch(Y){return this.error(Y.message),null}}return M}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===n?"'undefined' value invalid. Use null instead.":"object"==typeof n?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,u,p){const v="number"==typeof n?this.path.concat(n):this.path,E=p?this.scope.concat(p):this.scope;return new gl(this.registry,v,u||null,E,this.errors)}error(n,...u){const p=`${this.key}${u.map(v=>`[${v}]`).join("")}`;this.errors.push(new ie(p,n))}checkSubtype(n,u){const p=Mi(n,u);return p&&this.error(p),p}}var Po=gl;function ls(a){if(a instanceof ra)return ls(a.boundExpression);if(a instanceof Ws&&"error"===a.name||a instanceof rc||a instanceof Vs)return!1;const n=a instanceof Ll||a instanceof La;let u=!0;return a.eachChild(p=>{u=n?u&&ls(p):u&&p instanceof Oo}),!!u&&Ka(a)&&na(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ot(a,n){const u=a.length-1;let p,v,E=0,M=u,R=0;for(;E<=M;)if(R=Math.floor((E+M)/2),p=a[R],v=a[R+1],p<=n){if(R===u||n<v)return R;E=R+1}else{if(!(p>n))throw new qr("Input is not a number.");M=R-1}return 0}class Wo{constructor(n,u,p){this.type=n,this.input=u,this.labels=[],this.outputs=[];for(const[v,E]of p)this.labels.push(v),this.outputs.push(E)}static parse(n,u){if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(n[1],1,me);if(!p)return null;const v=[];let E=null;u.expectedType&&"value"!==u.expectedType.kind&&(E=u.expectedType);for(let M=1;M<n.length;M+=2){const R=1===M?-1/0:n[M],Y=n[M+1],j=M,ee=M+1;if("number"!=typeof R)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(v.length&&v[v.length-1][0]>=R)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const se=u.parse(Y,ee,E);if(!se)return null;E=E||se.type,v.push([R,se])}return new Wo(E,p,v)}evaluate(n){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(n);const v=this.input.evaluate(n);if(v<=u[0])return p[0].evaluate(n);const E=u.length;return v>=u[E-1]?p[E-1].evaluate(n):p[Ot(u,v)].evaluate(n)}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&n.push(this.labels[u]),n.push(this.outputs[u].serialize());return n}}var $r=Wo;function zn(a,n,u){return a*(1-u)+n*u}var Rl=Object.freeze({__proto__:null,array:function(a,n,u){return a.map((p,v)=>zn(p,n[v],u))},color:function(a,n,u){return new Dr(zn(a.r,n.r,u),zn(a.g,n.g,u),zn(a.b,n.b,u),zn(a.a,n.a,u))},number:zn});const vl=4/29,sa=6/29,ds=3*sa*sa,go=sa*sa*sa,_u=Math.PI/180,oa=180/Math.PI;function ya(a){return a>go?Math.pow(a,1/3):a/ds+vl}function oc(a){return a>sa?a*a*a:ds*(a-vl)}function vo(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function zl(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function $s(a){const n=zl(a.r),u=zl(a.g),p=zl(a.b),v=ya((.4124564*n+.3575761*u+.1804375*p)/.95047),E=ya((.2126729*n+.7151522*u+.072175*p)/1);return{l:116*E-16,a:500*(v-E),b:200*(E-ya((.0193339*n+.119192*u+.9503041*p)/1.08883)),alpha:a.a}}function Qa(a){let n=(a.l+16)/116,u=isNaN(a.a)?n:n+a.a/500,p=isNaN(a.b)?n:n-a.b/200;return n=1*oc(n),u=.95047*oc(u),p=1.08883*oc(p),new Dr(vo(3.2404542*u-1.5371385*n-.4985314*p),vo(-.969266*u+1.8760108*n+.041556*p),vo(.0556434*u-.2040259*n+1.0572252*p),a.alpha)}function Ra(a,n,u){const p=n-a;return a+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const el={forward:$s,reverse:Qa,interpolate:function(a,n,u){return{l:zn(a.l,n.l,u),a:zn(a.a,n.a,u),b:zn(a.b,n.b,u),alpha:zn(a.alpha,n.alpha,u)}}},aa={forward:function(a){const{l:n,a:u,b:p}=$s(a),v=Math.atan2(p,u)*oa;return{h:v<0?v+360:v,c:Math.sqrt(u*u+p*p),l:n,alpha:a.a}},reverse:function(a){const n=a.h*_u,u=a.c;return Qa({l:a.l,a:Math.cos(n)*u,b:Math.sin(n)*u,alpha:a.alpha})},interpolate:function(a,n,u){return{h:Ra(a.h,n.h,u),c:zn(a.c,n.c,u),l:zn(a.l,n.l,u),alpha:zn(a.alpha,n.alpha,u)}}};var kc=Object.freeze({__proto__:null,hcl:aa,lab:el});class Qs{constructor(n,u,p,v,E){this.type=n,this.operator=u,this.interpolation=p,this.input=v,this.labels=[],this.outputs=[];for(const[M,R]of E)this.labels.push(M),this.outputs.push(R)}static interpolationFactor(n,u,p,v){let E=0;if("exponential"===n.name)E=ba(u,n.base,p,v);else if("linear"===n.name)E=ba(u,1,p,v);else if("cubic-bezier"===n.name){const M=n.controlPoints;E=new $e(M[0],M[1],M[2],M[3]).solve(ba(u,1,p,v))}return E}static parse(n,u){let[p,v,E,...M]=n;if(!Array.isArray(v)||0===v.length)return u.error("Expected an interpolation type expression.",1);if("linear"===v[0])v={name:"linear"};else if("exponential"===v[0]){const j=v[1];if("number"!=typeof j)return u.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:j}}else{if("cubic-bezier"!==v[0])return u.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const j=v.slice(1);if(4!==j.length||j.some(ee=>"number"!=typeof ee||ee<0||ee>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:j}}}if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,me),!E)return null;const R=[];let Y=null;"interpolate-hcl"===p||"interpolate-lab"===p?Y=Q:u.expectedType&&"value"!==u.expectedType.kind&&(Y=u.expectedType);for(let j=0;j<M.length;j+=2){const ee=M[j],se=M[j+1],ce=j+3,ve=j+4;if("number"!=typeof ee)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ce);if(R.length&&R[R.length-1][0]>=ee)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ce);const be=u.parse(se,ve,Y);if(!be)return null;Y=Y||be.type,R.push([ee,be])}return"number"===Y.kind||"color"===Y.kind||"array"===Y.kind&&"number"===Y.itemType.kind&&"number"==typeof Y.N?new Qs(Y,p,v,E,R):u.error(`Type ${ei(Y)} is not interpolatable.`)}evaluate(n){const u=this.labels,p=this.outputs;if(1===u.length)return p[0].evaluate(n);const v=this.input.evaluate(n);if(v<=u[0])return p[0].evaluate(n);const E=u.length;if(v>=u[E-1])return p[E-1].evaluate(n);const M=Ot(u,v),R=Qs.interpolationFactor(this.interpolation,v,u[M],u[M+1]),Y=p[M].evaluate(n),j=p[M+1].evaluate(n);return"interpolate"===this.operator?Rl[this.type.kind.toLowerCase()](Y,j,R):"interpolate-hcl"===this.operator?aa.reverse(aa.interpolate(aa.forward(Y),aa.forward(j),R)):el.reverse(el.interpolate(el.forward(Y),el.forward(j),R))}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,n,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function ba(a,n,u,p){const v=p-u,E=a-u;return 0===v?0:1===n?E/v:(Math.pow(n,E)-1)/(Math.pow(n,v)-1)}var la=Qs;class Eo{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expectected at least one argument.");let p=null;const v=u.expectedType;v&&"value"!==v.kind&&(p=v);const E=[];for(const R of n.slice(1)){const Y=u.parse(R,1+E.length,p,void 0,{typeAnnotation:"omit"});if(!Y)return null;p=p||Y.type,E.push(Y)}const M=v&&E.some(R=>Mi(v,R.type));return new Eo(M?xe:p,E)}evaluate(n){let u,p=null,v=0;for(const E of this.args){if(v++,p=E.evaluate(n),p&&p instanceof Zr&&!p.available&&(u||(u=p),p=null,v===this.args.length))return u;if(null!==p)break}return p}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(u=>{n.push(u.serialize())}),n}}var ac=Eo;class So{constructor(n,u){this.type=u.type,this.bindings=[].concat(n),this.result=u}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const u of this.bindings)n(u[1]);n(this.result)}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const p=[];for(let E=1;E<n.length-1;E+=2){const M=n[E];if("string"!=typeof M)return u.error(`Expected string, but found ${typeof M} instead.`,E);if(/[^a-zA-Z0-9_]/.test(M))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const R=u.parse(n[E+1],E+1);if(!R)return null;p.push([M,R])}const v=u.parse(n[n.length-1],n.length-1,u.expectedType,p);return v?new So(p,v):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[u,p]of this.bindings)n.push(u,p.serialize());return n.push(this.result.serialize()),n}}var Ac=So;class Ns{constructor(n,u,p){this.type=n,this.index=u,this.input=p}static parse(n,u){if(3!==n.length)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,me),v=u.parse(n[2],2,Dt(u.expectedType||xe));return p&&v?new Ns(v.type.itemType,p,v):null}evaluate(n){const u=this.index.evaluate(n),p=this.input.evaluate(n);if(u<0)throw new qr(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new qr(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new qr(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ms=Ns;class Ro{constructor(n,u){this.type=N,this.needle=n,this.haystack=u}static parse(n,u){if(3!==n.length)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,xe);return p&&v?dn(p.type,[N,Ee,me,we,xe])?new Ro(p,v):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ei(p.type)} instead`):null}evaluate(n){const u=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(null==p)return!1;if(!wn(u,["boolean","string","number","null"]))throw new qr(`Expected first argument to be of type boolean, string, number or null, but found ${ei(as(u))} instead.`);if(!wn(p,["string","array"]))throw new qr(`Expected second argument to be of type array or string, but found ${ei(as(p))} instead.`);return p.indexOf(u)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var tl=Ro;class zo{constructor(n,u,p){this.type=me,this.needle=n,this.haystack=u,this.fromIndex=p}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,xe);if(!p||!v)return null;if(!dn(p.type,[N,Ee,me,we,xe]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ei(p.type)} instead`);if(4===n.length){const E=u.parse(n[3],3,me);return E?new zo(p,v,E):null}return new zo(p,v)}evaluate(n){const u=this.needle.evaluate(n),p=this.haystack.evaluate(n);if(!wn(u,["boolean","string","number","null"]))throw new qr(`Expected first argument to be of type boolean, string, number or null, but found ${ei(as(u))} instead.`);if(!wn(p,["string","array"]))throw new qr(`Expected second argument to be of type array or string, but found ${ei(as(p))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(n);return p.indexOf(u,v)}return p.indexOf(u)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Fl=zo;class Os{constructor(n,u,p,v,E,M){this.inputType=n,this.type=u,this.input=p,this.cases=v,this.outputs=E,this.otherwise=M}static parse(n,u){if(n.length<5)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return u.error("Expected an even number of arguments.");let p,v;u.expectedType&&"value"!==u.expectedType.kind&&(v=u.expectedType);const E={},M=[];for(let j=2;j<n.length-1;j+=2){let ee=n[j];const se=n[j+1];Array.isArray(ee)||(ee=[ee]);const ce=u.concat(j);if(0===ee.length)return ce.error("Expected at least one branch label.");for(const be of ee){if("number"!=typeof be&&"string"!=typeof be)return ce.error("Branch labels must be numbers or strings.");if("number"==typeof be&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return ce.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof be&&Math.floor(be)!==be)return ce.error("Numeric branch labels must be integer values.");if(p){if(ce.checkSubtype(p,as(be)))return null}else p=as(be);if(void 0!==E[String(be)])return ce.error("Branch labels must be unique.");E[String(be)]=M.length}const ve=u.parse(se,j,v);if(!ve)return null;v=v||ve.type,M.push(ve)}const R=u.parse(n[1],1,xe);if(!R)return null;const Y=u.parse(n[n.length-1],n.length-1,v);return Y?"value"!==R.type.kind&&u.concat(1).checkSubtype(p,R.type)?null:new Os(p,v,R,E,M,Y):null}evaluate(n){const u=this.input.evaluate(n);return(as(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],v={};for(const M of u){const R=v[this.cases[M]];void 0===R?(v[this.cases[M]]=p.length,p.push([this.cases[M],[M]])):p[R][1].push(M)}const E=M=>"number"===this.inputType.kind?Number(M):M;for(const[M,R]of p)n.push(1===R.length?E(R[0]):R.map(E)),n.push(this.outputs[M].serialize());return n.push(this.otherwise.serialize()),n}}var Mc=Os;class il{constructor(n,u,p){this.type=n,this.branches=u,this.otherwise=p}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&"value"!==u.expectedType.kind&&(p=u.expectedType);const v=[];for(let M=1;M<n.length-1;M+=2){const R=u.parse(n[M],M,N);if(!R)return null;const Y=u.parse(n[M+1],M+1,p);if(!Y)return null;v.push([R,Y]),p=p||Y.type}const E=u.parse(n[n.length-1],n.length-1,p);return E?new il(p,v,E):null}evaluate(n){for(const[u,p]of this.branches)if(u.evaluate(n))return p.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[u,p]of this.branches)n(u),n(p);n(this.otherwise)}outputDefined(){return this.branches.every(([n,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(u=>{n.push(u.serialize())}),n}}var Fo=il;class za{constructor(n,u,p,v){this.type=n,this.input=u,this.beginIndex=p,this.endIndex=v}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const p=u.parse(n[1],1,xe),v=u.parse(n[2],2,me);if(!p||!v)return null;if(!dn(p.type,[Dt(xe),Ee,xe]))return u.error(`Expected first argument to be of type array or string, but found ${ei(p.type)} instead`);if(4===n.length){const E=u.parse(n[3],3,me);return E?new za(p.type,p,v,E):null}return new za(p.type,p,v)}evaluate(n){const u=this.input.evaluate(n),p=this.beginIndex.evaluate(n);if(!wn(u,["string","array"]))throw new qr(`Expected first argument to be of type array or string, but found ${ei(as(u))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(n);return u.slice(p,v)}return u.slice(p)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var nl=za;function ca(a,n){return"=="===a||"!="===a?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function Bl(a,n,u,p){return 0===p.compare(n,u)}function xa(a,n,u){const p="=="!==a&&"!="!==a;return class Nw{constructor(E,M,R){this.type=N,this.lhs=E,this.rhs=M,this.collator=R,this.hasUntypedArgument="value"===E.type.kind||"value"===M.type.kind}static parse(E,M){if(3!==E.length&&4!==E.length)return M.error("Expected two or three arguments.");const R=E[0];let Y=M.parse(E[1],1,xe);if(!Y)return null;if(!ca(R,Y.type))return M.concat(1).error(`"${R}" comparisons are not supported for type '${ei(Y.type)}'.`);let j=M.parse(E[2],2,xe);if(!j)return null;if(!ca(R,j.type))return M.concat(2).error(`"${R}" comparisons are not supported for type '${ei(j.type)}'.`);if(Y.type.kind!==j.type.kind&&"value"!==Y.type.kind&&"value"!==j.type.kind)return M.error(`Cannot compare types '${ei(Y.type)}' and '${ei(j.type)}'.`);p&&("value"===Y.type.kind&&"value"!==j.type.kind?Y=new La(j.type,[Y]):"value"!==Y.type.kind&&"value"===j.type.kind&&(j=new La(Y.type,[j])));let ee=null;if(4===E.length){if("string"!==Y.type.kind&&"string"!==j.type.kind&&"value"!==Y.type.kind&&"value"!==j.type.kind)return M.error("Cannot use collator to compare non-string types.");if(ee=M.parse(E[3],3,Le),!ee)return null}return new Nw(Y,j,ee)}evaluate(E){const M=this.lhs.evaluate(E),R=this.rhs.evaluate(E);if(p&&this.hasUntypedArgument){const Y=as(M),j=as(R);if(Y.kind!==j.kind||"string"!==Y.kind&&"number"!==Y.kind)throw new qr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${Y.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const Y=as(M),j=as(R);if("string"!==Y.kind||"string"!==j.kind)return n(E,M,R)}return this.collator?u(E,M,R,this.collator.evaluate(E)):n(E,M,R)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}serialize(){const E=[a];return this.eachChild(M=>{E.push(M.serialize())}),E}}}const Vc=xa("==",function(a,n,u){return n===u},Bl),Fa=xa("!=",function(a,n,u){return n!==u},function(a,n,u,p){return!Bl(0,n,u,p)}),Uu=xa("<",function(a,n,u){return n<u},function(a,n,u,p){return p.compare(n,u)<0}),yu=xa(">",function(a,n,u){return n>u},function(a,n,u,p){return p.compare(n,u)>0}),Gc=xa("<=",function(a,n,u){return n<=u},function(a,n,u,p){return p.compare(n,u)<=0}),ua=xa(">=",function(a,n,u){return n>=u},function(a,n,u,p){return p.compare(n,u)>=0});class wa{constructor(n,u,p,v,E,M){this.type=Ee,this.number=n,this.locale=u,this.currency=p,this.unit=v,this.minFractionDigits=E,this.maxFractionDigits=M}static parse(n,u){if(3!==n.length)return u.error("Expected two arguments.");const p=u.parse(n[1],1,me);if(!p)return null;const v=n[2];if("object"!=typeof v||Array.isArray(v))return u.error("NumberFormat options argument must be an object.");let E=null;if(v.locale&&(E=u.parse(v.locale,1,Ee),!E))return null;let M=null;if(v.currency&&(M=u.parse(v.currency,1,Ee),!M))return null;let R=null;if(v.unit&&(R=u.parse(v.unit,1,Ee),!R))return null;let Y=null;if(v["min-fraction-digits"]&&(Y=u.parse(v["min-fraction-digits"],1,me),!Y))return null;let j=null;return v["max-fraction-digits"]&&(j=u.parse(v["max-fraction-digits"],1,me),!j)?null:new wa(p,E,M,R,Y,j)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Nl{constructor(n){this.type=me,this.input=n}static parse(n,u){if(2!==n.length)return u.error(`Expected 1 argument, but found ${n.length-1} instead.`);const p=u.parse(n[1],1);return p?"array"!==p.type.kind&&"string"!==p.type.kind&&"value"!==p.type.kind?u.error(`Expected argument of type string or array, but found ${ei(p.type)} instead.`):new Nl(p):null}evaluate(n){const u=this.input.evaluate(n);if("string"==typeof u||Array.isArray(u))return u.length;throw new qr(`Expected value to be of type string or array, but found ${ei(as(u))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(u=>{n.push(u.serialize())}),n}}const Dc={"==":Vc,"!=":Fa,">":yu,"<":Uu,">=":ua,"<=":Gc,array:La,at:ms,boolean:La,case:Fo,coalesce:ac,collator:rc,format:ea,image:Il,in:tl,"index-of":Fl,interpolate:la,"interpolate-hcl":la,"interpolate-lab":la,length:Nl,let:Ac,literal:Oo,match:Mc,number:La,"number-format":wa,object:La,slice:nl,step:$r,string:La,"to-boolean":Ll,"to-color":Ll,"to-number":Ll,"to-string":Ll,var:ra,within:Vs};function Yl(a,[n,u,p,v]){n=n.evaluate(a),u=u.evaluate(a),p=p.evaluate(a);const E=v?v.evaluate(a):1,M=fl(n,u,p,E);if(M)throw new qr(M);return new Dr(n/255*E,u/255*E,p/255*E,E)}function da(a,n){return a in n}function rl(a,n){const u=n[a];return void 0===u?null:u}function hs(a){return{type:a}}Ws.register(Dc,{error:[{kind:"error"},[Ee],(a,[n])=>{throw new qr(n.evaluate(a))}],typeof:[Ee,[xe],(a,[n])=>ei(as(n.evaluate(a)))],"to-rgba":[Dt(me,4),[Q],(a,[n])=>n.evaluate(a).toArray()],rgb:[Q,[me,me,me],Yl],rgba:[Q,[me,me,me,me],Yl],has:{type:N,overloads:[[[Ee],(a,[n])=>da(n.evaluate(a),a.properties())],[[Ee,pe],(a,[n,u])=>da(n.evaluate(a),u.evaluate(a))]]},get:{type:xe,overloads:[[[Ee],(a,[n])=>rl(n.evaluate(a),a.properties())],[[Ee,pe],(a,[n,u])=>rl(n.evaluate(a),u.evaluate(a))]]},"feature-state":[xe,[Ee],(a,[n])=>rl(n.evaluate(a),a.featureState||{})],properties:[pe,[],a=>a.properties()],"geometry-type":[Ee,[],a=>a.geometryType()],id:[xe,[],a=>a.id()],zoom:[me,[],a=>a.globals.zoom],pitch:[me,[],a=>a.globals.pitch||0],"distance-from-center":[me,[],a=>a.distanceFromCenter()],"heatmap-density":[me,[],a=>a.globals.heatmapDensity||0],"line-progress":[me,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[me,[],a=>a.globals.skyRadialProgress||0],accumulated:[xe,[],a=>void 0===a.globals.accumulated?null:a.globals.accumulated],"+":[me,hs(me),(a,n)=>{let u=0;for(const p of n)u+=p.evaluate(a);return u}],"*":[me,hs(me),(a,n)=>{let u=1;for(const p of n)u*=p.evaluate(a);return u}],"-":{type:me,overloads:[[[me,me],(a,[n,u])=>n.evaluate(a)-u.evaluate(a)],[[me],(a,[n])=>-n.evaluate(a)]]},"/":[me,[me,me],(a,[n,u])=>n.evaluate(a)/u.evaluate(a)],"%":[me,[me,me],(a,[n,u])=>n.evaluate(a)%u.evaluate(a)],ln2:[me,[],()=>Math.LN2],pi:[me,[],()=>Math.PI],e:[me,[],()=>Math.E],"^":[me,[me,me],(a,[n,u])=>Math.pow(n.evaluate(a),u.evaluate(a))],sqrt:[me,[me],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[me,[me],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[me,[me],(a,[n])=>Math.log(n.evaluate(a))],log2:[me,[me],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[me,[me],(a,[n])=>Math.sin(n.evaluate(a))],cos:[me,[me],(a,[n])=>Math.cos(n.evaluate(a))],tan:[me,[me],(a,[n])=>Math.tan(n.evaluate(a))],asin:[me,[me],(a,[n])=>Math.asin(n.evaluate(a))],acos:[me,[me],(a,[n])=>Math.acos(n.evaluate(a))],atan:[me,[me],(a,[n])=>Math.atan(n.evaluate(a))],min:[me,hs(me),(a,n)=>Math.min(...n.map(u=>u.evaluate(a)))],max:[me,hs(me),(a,n)=>Math.max(...n.map(u=>u.evaluate(a)))],abs:[me,[me],(a,[n])=>Math.abs(n.evaluate(a))],round:[me,[me],(a,[n])=>{const u=n.evaluate(a);return u<0?-Math.round(-u):Math.round(u)}],floor:[me,[me],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[me,[me],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[N,[Ee,xe],(a,[n,u])=>a.properties()[n.value]===u.value],"filter-id-==":[N,[xe],(a,[n])=>a.id()===n.value],"filter-type-==":[N,[Ee],(a,[n])=>a.geometryType()===n.value],"filter-<":[N,[Ee,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p<v}],"filter-id-<":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u<p}],"filter->":[N,[Ee,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p>v}],"filter-id->":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u>p}],"filter-<=":[N,[Ee,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p<=v}],"filter-id-<=":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u<=p}],"filter->=":[N,[Ee,xe],(a,[n,u])=>{const p=a.properties()[n.value],v=u.value;return typeof p==typeof v&&p>=v}],"filter-id->=":[N,[xe],(a,[n])=>{const u=a.id(),p=n.value;return typeof u==typeof p&&u>=p}],"filter-has":[N,[xe],(a,[n])=>n.value in a.properties()],"filter-has-id":[N,[],a=>null!==a.id()&&void 0!==a.id()],"filter-type-in":[N,[Dt(Ee)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[N,[Dt(xe)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[N,[Ee,Dt(xe)],(a,[n,u])=>u.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[N,[Ee,Dt(xe)],(a,[n,u])=>function(p,v,E,M){for(;E<=M;){const R=E+M>>1;if(v[R]===p)return!0;v[R]>p?M=R-1:E=R+1}return!1}(a.properties()[n.value],u.value,0,u.value.length-1)],all:{type:N,overloads:[[[N,N],(a,[n,u])=>n.evaluate(a)&&u.evaluate(a)],[hs(N),(a,n)=>{for(const u of n)if(!u.evaluate(a))return!1;return!0}]]},any:{type:N,overloads:[[[N,N],(a,[n,u])=>n.evaluate(a)||u.evaluate(a)],[hs(N),(a,n)=>{for(const u of n)if(u.evaluate(a))return!0;return!1}]]},"!":[N,[N],(a,[n])=>!n.evaluate(a)],"is-supported-script":[N,[Ee],(a,[n])=>{const u=a.globals&&a.globals.isSupportedScript;return!u||u(n.evaluate(a))}],upcase:[Ee,[Ee],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Ee,[Ee],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Ee,hs(xe),(a,n)=>n.map(u=>jo(u.evaluate(a))).join("")],"resolved-locale":[Ee,[Le],(a,[n])=>n.evaluate(a).resolvedLocale()]});var eo=Dc;function Ba(a){return{result:"success",value:a}}function Na(a){return{result:"error",value:a}}function To(a){return"data-driven"===a["property-type"]}function lc(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Bo(a){return!!a.expression&&a.expression.interpolated}function Nr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function sl(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function _l(a){return a}function Ya(a,n){const u="color"===n.type,p=a.stops&&"object"==typeof a.stops[0][0],v=p||!(p||void 0!==a.property),E=a.type||(Bo(n)?"exponential":"interval");if(u&&((a=F({},a)).stops&&(a.stops=a.stops.map(j=>[j[0],Dr.parse(j[1])])),a.default=Dr.parse(a.default?a.default:n.default)),a.colorSpace&&"rgb"!==a.colorSpace&&!kc[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let M,R,Y;if("exponential"===E)M=Ca;else if("interval"===E)M=yl;else if("categorical"===E){M=$o,R=Object.create(null);for(const j of a.stops)R[j[0]]=j[1];Y=typeof a.stops[0][0]}else{if("identity"!==E)throw new Error(`Unknown function type "${E}"`);M=Xo}if(p){const j={},ee=[];for(let ve=0;ve<a.stops.length;ve++){const be=a.stops[ve],Me=be[0].zoom;void 0===j[Me]&&(j[Me]={zoom:Me,type:a.type,property:a.property,default:a.default,stops:[]},ee.push(Me)),j[Me].stops.push([be[0].value,be[1]])}const se=[];for(const ve of ee)se.push([j[ve].zoom,Ya(j[ve],n)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:la.interpolationFactor.bind(void 0,ce),zoomStops:se.map(ve=>ve[0]),evaluate:({zoom:ve},be)=>Ca({stops:se,base:a.base},n,ve).evaluate(ve,be)}}if(v){const j="exponential"===E?{name:"exponential",base:void 0!==a.base?a.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:la.interpolationFactor.bind(void 0,j),zoomStops:a.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>M(a,n,ee,R,Y)}}return{kind:"source",evaluate(j,ee){const se=ee&&ee.properties?ee.properties[a.property]:void 0;return void 0===se?Ha(a.default,n.default):M(a,n,se,R,Y)}}}function Ha(a,n,u){return void 0!==a?a:void 0!==n?n:void 0!==u?u:void 0}function $o(a,n,u,p,v){return Ha(typeof u===v?p[u]:void 0,a.default,n.default)}function yl(a,n,u){if("number"!==Nr(u))return Ha(a.default,n.default);const p=a.stops.length;if(1===p||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[p-1][0])return a.stops[p-1][1];const v=Ot(a.stops.map(E=>E[0]),u);return a.stops[v][1]}function Ca(a,n,u){const p=void 0!==a.base?a.base:1;if("number"!==Nr(u))return Ha(a.default,n.default);const v=a.stops.length;if(1===v||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[v-1][0])return a.stops[v-1][1];const E=Ot(a.stops.map(ee=>ee[0]),u),M=function(ee,se,ce,ve){const be=ve-ce,Me=ee-ce;return 0===be?0:1===se?Me/be:(Math.pow(se,Me)-1)/(Math.pow(se,be)-1)}(u,p,a.stops[E][0],a.stops[E+1][0]),R=a.stops[E][1],Y=a.stops[E+1][1];let j=Rl[n.type]||_l;if(a.colorSpace&&"rgb"!==a.colorSpace){const ee=kc[a.colorSpace];j=(se,ce)=>ee.reverse(ee.interpolate(ee.forward(se),ee.forward(ce),M))}return"function"==typeof R.evaluate?{evaluate(...ee){const se=R.evaluate.apply(void 0,ee),ce=Y.evaluate.apply(void 0,ee);if(void 0!==se&&void 0!==ce)return j(se,ce,M)}}:j(R,Y,M)}function Xo(a,n,u){return"color"===n.type?u=Dr.parse(u):"formatted"===n.type?u=$n.fromString(u.toString()):"resolvedImage"===n.type?u=Zr.fromString(u.toString()):Nr(u)===n.type||"enum"===n.type&&n.values[u]||(u=void 0),Ha(u,a.default,n.default)}class Hl{constructor(n,u){var p;this.expression=n,this._warningHistory={},this._evaluator=new Hc,this._defaultValue=u?"color"===(p=u).type&&(sl(p.default)||Array.isArray(p.default))?new Dr(0,0,0,0):"color"===p.type?Dr.parse(p.default)||null:void 0===p.default?null:p.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(n,u,p,v,E,M,R,Y){return this._evaluator.globals=n,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=M,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=Y||null,this.expression.evaluate(this._evaluator)}evaluate(n,u,p,v,E,M,R,Y){this._evaluator.globals=n,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=v||null,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=M||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=Y||null;try{const j=this.expression.evaluate(this._evaluator);if(null==j||"number"==typeof j&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new qr(`Expected value to be one of ${Object.keys(this._enumValues).map(ee=>JSON.stringify(ee)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function Va(a){return Array.isArray(a)&&a.length>0&&"string"==typeof a[0]&&a[0]in eo}function ol(a,n){const u=new Po(eo,[],n?function(v){const E={color:Q,string:Ee,number:me,enum:Ee,boolean:N,formatted:qe,resolvedImage:kt};return"array"===v.type?Dt(E[v.value]||xe,v.length):E[v.type]}(n):void 0),p=u.parse(a,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return p?Ba(new Hl(p,n)):Na(u.errors)}class bl{constructor(n,u){this.kind=n,this._styleExpression=u,this.isStateDependent="constant"!==n&&!_a(u.expression)}evaluateWithoutErrorHandling(n,u,p,v,E,M){return this._styleExpression.evaluateWithoutErrorHandling(n,u,p,v,E,M)}evaluate(n,u,p,v,E,M){return this._styleExpression.evaluate(n,u,p,v,E,M)}}class xl{constructor(n,u,p,v){this.kind=n,this.zoomStops=p,this._styleExpression=u,this.isStateDependent="camera"!==n&&!_a(u.expression),this.interpolationType=v}evaluateWithoutErrorHandling(n,u,p,v,E,M){return this._styleExpression.evaluateWithoutErrorHandling(n,u,p,v,E,M)}evaluate(n,u,p,v,E,M){return this._styleExpression.evaluate(n,u,p,v,E,M)}interpolationFactor(n,u,p){return this.interpolationType?la.interpolationFactor(this.interpolationType,n,u,p):0}}function Ic(a,n){if("error"===(a=ol(a,n)).result)return a;const u=a.value.expression,p=Ka(u);if(!p&&!To(n))return Na([new ie("","data expressions not supported")]);const v=na(u,["zoom","pitch","distance-from-center"]);if(!v&&!lc(n))return Na([new ie("","zoom expressions not supported")]);const E=gs(u);return E||v?E instanceof ie?Na([E]):E instanceof la&&!Bo(n)?Na([new ie("",'"interpolate" expressions cannot be used with this property')]):Ba(E?new xl(p?"camera":"composite",a.value,E.labels,E instanceof la?E.interpolation:void 0):new bl(p?"constant":"source",a.value)):Na([new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class No{constructor(n,u){this._parameters=n,this._specification=u,F(this,Ya(this._parameters,this._specification))}static deserialize(n){return new No(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function gs(a){let n=null;if(a instanceof Ac)n=gs(a.result);else if(a instanceof ac){for(const u of a.args)if(n=gs(u),n)break}else(a instanceof $r||a instanceof la)&&a.input instanceof Ws&&"zoom"===a.input.name&&(n=a);return n instanceof ie||a.eachChild(u=>{const p=gs(u);p instanceof ie?n=p:!n&&p?n=new ie("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&p&&n!==p&&(n=new ie("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class gn{constructor(n,u,p,v){this.message=(n?`${n}: `:"")+p,v&&(this.identifier=v),null!=u&&u.__line__&&(this.line=u.__line__)}}function m(a){const n=a.key,u=a.value,p=a.valueSpec||{},v=a.objectElementValidators||{},E=a.style,M=a.styleSpec;let R=[];const Y=Nr(u);if("object"!==Y)return[new gn(n,u,`object expected, ${Y} found`)];for(const j in u){const ee=j.split(".")[0];let se;v[ee]?se=v[ee]:p[ee]?se=Ys:v["*"]?se=v["*"]:p["*"]&&(se=Ys),se?R=R.concat(se({key:(n&&`${n}.`)+j,value:u[j],valueSpec:p[ee]||p["*"],style:E,styleSpec:M,object:u,objectKey:j},u)):R.push(new gn(n,u[j],`unknown property "${j}"`))}for(const j in p)v[j]||p[j].required&&void 0===p[j].default&&void 0===u[j]&&R.push(new gn(n,u,`missing required property "${j}"`));return R}function D(a){const n=a.value,u=a.valueSpec,p=a.style,v=a.styleSpec,E=a.key,M=a.arrayElementValidator||Ys;if("array"!==Nr(n))return[new gn(E,n,`array expected, ${Nr(n)} found`)];if(u.length&&n.length!==u.length)return[new gn(E,n,`array length ${u.length} expected, length ${n.length} found`)];if(u["min-length"]&&n.length<u["min-length"])return[new gn(E,n,`array length at least ${u["min-length"]} expected, length ${n.length} found`)];let R={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};v.$version<7&&(R.function=u.function),"object"===Nr(u.value)&&(R=u.value);let Y=[];for(let j=0;j<n.length;j++)Y=Y.concat(M({array:n,arrayIndex:j,value:n[j],valueSpec:R,style:p,styleSpec:v,key:`${E}[${j}]`}));return Y}function G(a){const n=a.key,u=a.value,p=a.valueSpec;let v=Nr(u);if("number"===v&&u!=u&&(v="NaN"),"number"!==v)return[new gn(n,u,`number expected, ${v} found`)];if("minimum"in p){let E=p.minimum;if("array"===Nr(p.minimum)&&(E=p.minimum[a.arrayIndex]),u<E)return[new gn(n,u,`${u} is less than the minimum value ${E}`)]}if("maximum"in p){let E=p.maximum;if("array"===Nr(p.maximum)&&(E=p.maximum[a.arrayIndex]),u>E)return[new gn(n,u,`${u} is greater than the maximum value ${E}`)]}return[]}function ne(a){const n=a.valueSpec,u=U(a.value.type);let p,v,E,M={};const R="categorical"!==u&&void 0===a.value.property,Y=!R,j="array"===Nr(a.value.stops)&&"array"===Nr(a.value.stops[0])&&"object"===Nr(a.value.stops[0][0]),ee=m({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(ve){if("identity"===u)return[new gn(ve.key,ve.value,'identity function may not have a "stops" property')];let be=[];const Me=ve.value;return be=be.concat(D({key:ve.key,value:Me,valueSpec:ve.valueSpec,style:ve.style,styleSpec:ve.styleSpec,arrayElementValidator:se})),"array"===Nr(Me)&&0===Me.length&&be.push(new gn(ve.key,Me,"array must have at least one stop")),be},default:function(ve){return Ys({key:ve.key,value:ve.value,valueSpec:n,style:ve.style,styleSpec:ve.styleSpec})}}});return"identity"===u&&R&&ee.push(new gn(a.key,a.value,'missing required property "property"')),"identity"===u||a.value.stops||ee.push(new gn(a.key,a.value,'missing required property "stops"')),"exponential"===u&&a.valueSpec.expression&&!Bo(a.valueSpec)&&ee.push(new gn(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(Y&&!To(a.valueSpec)?ee.push(new gn(a.key,a.value,"property functions not supported")):R&&!lc(a.valueSpec)&&ee.push(new gn(a.key,a.value,"zoom functions not supported"))),"categorical"!==u&&!j||void 0!==a.value.property||ee.push(new gn(a.key,a.value,'"property" property is required')),ee;function se(ve){let be=[];const Me=ve.value,Xe=ve.key;if("array"!==Nr(Me))return[new gn(Xe,Me,`array expected, ${Nr(Me)} found`)];if(2!==Me.length)return[new gn(Xe,Me,`array length 2 expected, length ${Me.length} found`)];if(j){if("object"!==Nr(Me[0]))return[new gn(Xe,Me,`object expected, ${Nr(Me[0])} found`)];if(void 0===Me[0].zoom)return[new gn(Xe,Me,"object stop key must have zoom")];if(void 0===Me[0].value)return[new gn(Xe,Me,"object stop key must have value")];const ut=U(Me[0].zoom);if("number"!=typeof ut)return[new gn(Xe,Me[0].zoom,"stop zoom values must be numbers")];if(E&&E>ut)return[new gn(Xe,Me[0].zoom,"stop zoom values must appear in ascending order")];ut!==E&&(E=ut,v=void 0,M={}),be=be.concat(m({key:`${Xe}[0]`,value:Me[0],valueSpec:{zoom:{}},style:ve.style,styleSpec:ve.styleSpec,objectElementValidators:{zoom:G,value:ce}}))}else be=be.concat(ce({key:`${Xe}[0]`,value:Me[0],valueSpec:{},style:ve.style,styleSpec:ve.styleSpec},Me));return Va($(Me[1]))?be.concat([new gn(`${Xe}[1]`,Me[1],"expressions are not allowed in function stops.")]):be.concat(Ys({key:`${Xe}[1]`,value:Me[1],valueSpec:n,style:ve.style,styleSpec:ve.styleSpec}))}function ce(ve,be){const Me=Nr(ve.value),Xe=U(ve.value),ut=null!==ve.value?ve.value:be;if(p){if(Me!==p)return[new gn(ve.key,ut,`${Me} stop domain type must match previous stop domain type ${p}`)]}else p=Me;if("number"!==Me&&"string"!==Me&&"boolean"!==Me&&"number"!=typeof Xe&&"string"!=typeof Xe&&"boolean"!=typeof Xe)return[new gn(ve.key,ut,"stop domain value must be a number, string, or boolean")];if("number"!==Me&&"categorical"!==u){let Lt=`number expected, ${Me} found`;return To(n)&&void 0===u&&(Lt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gn(ve.key,ut,Lt)]}return"categorical"!==u||"number"!==Me||"number"==typeof Xe&&isFinite(Xe)&&Math.floor(Xe)===Xe?"categorical"!==u&&"number"===Me&&"number"==typeof Xe&&"number"==typeof v&&void 0!==v&&Xe<v?[new gn(ve.key,ut,"stop domain values must appear in ascending order")]:(v=Xe,"categorical"===u&&Xe in M?[new gn(ve.key,ut,"stop domain values must be unique")]:(M[Xe]=!0,[])):[new gn(ve.key,ut,`integer expected, found ${String(Xe)}`)]}}function _e(a){const n=("property"===a.expressionContext?Ic:ol)($(a.value),a.valueSpec);if("error"===n.result)return n.value.map(p=>new gn(`${a.key}${p.key}`,a.value,p.message));const u=n.value.expression||n.value._styleExpression.expression;if("property"===a.expressionContext&&"text-font"===a.propertyKey&&!u.outputDefined())return[new gn(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===a.expressionContext&&"layout"===a.propertyType&&!_a(u))return[new gn(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===a.expressionContext)return We(u,a);if(a.expressionContext&&0===a.expressionContext.indexOf("cluster")){if(!na(u,["zoom","feature-state"]))return[new gn(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===a.expressionContext&&!Ka(u))return[new gn(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function We(a,n){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const v of n.valueSpec.expression.parameters)u.delete(v);if(0===u.size)return[];const p=[];return a instanceof Ws&&u.has(a.name)?[new gn(n.key,n.value,`["${a.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(a.eachChild(v=>{p.push(...We(v,n))}),p)}function Ht(a){const n=a.key,u=a.value,p=a.valueSpec,v=[];return Array.isArray(p.values)?-1===p.values.indexOf(U(u))&&v.push(new gn(n,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(p.values).indexOf(U(u))&&v.push(new gn(n,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),v}function ai(a){if(!0===a||!1===a)return!0;if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case"has":return a.length>=2&&"$id"!==a[1]&&"$type"!==a[1];case"in":return a.length>=3&&("string"!=typeof a[1]||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==a.length||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!ai(n)&&"boolean"!=typeof n)return!1;return!0;default:return!0}}function Ti(a,n="fill"){if(null==a)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ai(a)||(a=to(a));const u=a;let p=!0;try{p=function(j){if(!Yn(j))return j;let ee=$(j);return In(ee),ee=sn(ee),ee}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(u,null,2)}\n        `)}const v=I[`filter_${n}`],E=ol(p,v);let M=null;if("error"===E.result)throw new Error(E.value.map(j=>`${j.key}: ${j.message}`).join(", "));M=(j,ee,se)=>E.value.evaluate(j,ee,{},se);let R=null,Y=null;if(p!==u){const j=ol(u,v);if("error"===j.result)throw new Error(j.value.map(ee=>`${ee.key}: ${ee.message}`).join(", "));R=(ee,se,ce,ve,be)=>j.value.evaluate(ee,se,{},ce,void 0,void 0,ve,be),Y=!Ka(j.value.expression)}return{filter:M,dynamicFilter:R||void 0,needGeometry:Ps(p),needFeature:!!Y}}function sn(a){if(!Array.isArray(a))return a;const n=function(u){if(_r.has(u[0]))for(let p=1;p<u.length;p++)if(Yn(u[p]))return!0;return u}(a);return!0===n?n:n.map(u=>sn(u))}function In(a){let n=!1;const u=[];if("case"===a[0]){for(let p=1;p<a.length-1;p+=2)n=n||Yn(a[p]),u.push(a[p+1]);u.push(a[a.length-1])}else if("match"===a[0]){n=n||Yn(a[1]);for(let p=2;p<a.length-1;p+=2)u.push(a[p+1]);u.push(a[a.length-1])}else if("step"===a[0]){n=n||Yn(a[1]);for(let p=1;p<a.length-1;p+=2)u.push(a[p+1])}n&&(a.length=0,a.push("any",...u));for(let p=1;p<a.length;p++)In(a[p])}function Yn(a){if(!Array.isArray(a))return!1;if("pitch"===(n=a[0])||"distance-from-center"===n)return!0;var n;for(let u=1;u<a.length;u++)if(Yn(a[u]))return!0;return!1}const _r=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Yr(a,n){return a<n?-1:a>n?1:0}function Ps(a){if(!Array.isArray(a))return!1;if("within"===a[0])return!0;for(let n=1;n<a.length;n++)if(Ps(a[n]))return!0;return!1}function to(a){if(!a)return!0;const n=a[0];return a.length<=1?"any"!==n:"=="===n?Xs(a[1],a[2],"=="):"!="===n?oo(Xs(a[1],a[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Xs(a[1],a[2],n):"any"===n?(u=a.slice(1),["any"].concat(u.map(to))):"all"===n?["all"].concat(a.slice(1).map(to)):"none"===n?["all"].concat(a.slice(1).map(to).map(oo)):"in"===n?Ga(a[1],a.slice(2)):"!in"===n?oo(Ga(a[1],a.slice(2))):"has"===n?al(a[1]):"!has"===n?oo(al(a[1])):"within"!==n||a;var u}function Xs(a,n,u){switch(a){case"$type":return[`filter-type-${u}`,n];case"$id":return[`filter-id-${u}`,n];default:return[`filter-${u}`,a,n]}}function Ga(a,n){if(0===n.length)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(u=>typeof u!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Yr)]]:["filter-in-small",a,["literal",n]]}}function al(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function oo(a){return["!",a]}function Lc(a){return ai($(a.value))?_e(F({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Vl(a)}function Vl(a){const n=a.value,u=a.key;if("array"!==Nr(n))return[new gn(u,n,`array expected, ${Nr(n)} found`)];const p=a.styleSpec;let v,E=[];if(n.length<1)return[new gn(u,n,"filter array must have at least 1 element")];switch(E=E.concat(Ht({key:`${u}[0]`,value:n[0],valueSpec:p.filter_operator,style:a.style,styleSpec:a.styleSpec})),U(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===U(n[1])&&E.push(new gn(u,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&E.push(new gn(u,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=Nr(n[1]),"string"!==v&&E.push(new gn(`${u}[1]`,n[1],`string expected, ${v} found`)));for(let M=2;M<n.length;M++)v=Nr(n[M]),"$type"===U(n[1])?E=E.concat(Ht({key:`${u}[${M}]`,value:n[M],valueSpec:p.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"!==v&&"number"!==v&&"boolean"!==v&&E.push(new gn(`${u}[${M}]`,n[M],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let M=1;M<n.length;M++)E=E.concat(Vl({key:`${u}[${M}]`,value:n[M],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":v=Nr(n[1]),2!==n.length?E.push(new gn(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==v&&E.push(new gn(`${u}[1]`,n[1],`string expected, ${v} found`));break;case"within":v=Nr(n[1]),2!==n.length?E.push(new gn(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==v&&E.push(new gn(`${u}[1]`,n[1],`object expected, ${v} found`))}return E}function ha(a,n){const u=a.key,p=a.style,v=a.styleSpec,E=a.value,M=a.objectKey,R=v[`${n}_${a.layerType}`];if(!R)return[];const Y=M.match(/^(.*)-transition$/);if("paint"===n&&Y&&R[Y[1]]&&R[Y[1]].transition)return Ys({key:u,value:E,valueSpec:v.transition,style:p,styleSpec:v});const j=a.valueSpec||R[M];if(!j)return[new gn(u,E,`unknown property "${M}"`)];let ee;if("string"===Nr(E)&&To(j)&&!j.tokens&&(ee=/^{([^}]+)}$/.exec(E))){const ce=`\`{ "type": "identity", "property": ${ee?JSON.stringify(ee[1]):'"_"'} }\``;return[new gn(u,E,`"${M}" does not support interpolation syntax\nUse an identity property function instead: ${ce}.`)]}const se=[];return"symbol"===a.layerType&&("text-field"===M&&p&&!p.glyphs&&se.push(new gn(u,E,'use of "text-field" requires a style "glyphs" property')),"text-font"===M&&sl($(E))&&"identity"===U(E.type)&&se.push(new gn(u,E,'"text-font" does not support identity functions'))),se.concat(Ys({key:a.key,value:E,valueSpec:j,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:M}))}function cc(a){return ha(a,"paint")}function Se(a){return ha(a,"layout")}function J(a){let n=[];const u=a.value,p=a.key,v=a.style,E=a.styleSpec;u.type||u.ref||n.push(new gn(p,u,'either "type" or "ref" is required'));let M=U(u.type);const R=U(u.ref);if(u.id){const Y=U(u.id);for(let j=0;j<a.arrayIndex;j++){const ee=v.layers[j];U(ee.id)===Y&&n.push(new gn(p,u.id,`duplicate layer id "${u.id}", previously used at line ${ee.id.__line__}`))}}if("ref"in u){let Y;["type","source","source-layer","filter","layout"].forEach(j=>{j in u&&n.push(new gn(p,u[j],`"${j}" is prohibited for ref layers`))}),v.layers.forEach(j=>{U(j.id)===R&&(Y=j)}),Y?Y.ref?n.push(new gn(p,u.ref,"ref cannot reference another ref layer")):M=U(Y.type):"string"==typeof R&&n.push(new gn(p,u.ref,`ref layer "${R}" not found`))}else if("background"!==M&&"sky"!==M)if(u.source){const Y=v.sources&&v.sources[u.source],j=Y&&U(Y.type);Y?"vector"===j&&"raster"===M?n.push(new gn(p,u.source,`layer "${u.id}" requires a raster source`)):"raster"===j&&"raster"!==M?n.push(new gn(p,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==j||u["source-layer"]?"raster-dem"===j&&"hillshade"!==M?n.push(new gn(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==M||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||"geojson"===j&&Y.lineMetrics||n.push(new gn(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new gn(p,u,`layer "${u.id}" must specify a "source-layer"`)):n.push(new gn(p,u.source,`source "${u.source}" not found`))}else n.push(new gn(p,u,'missing required property "source"'));return n=n.concat(m({key:p,value:u,valueSpec:E.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ys({key:`${p}.type`,value:u.type,valueSpec:E.layer.type,style:a.style,styleSpec:a.styleSpec,object:u,objectKey:"type"}),filter:Y=>Lc(F({layerType:M},Y)),layout:Y=>m({layer:u,key:Y.key,value:Y.value,valueSpec:{},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":j=>Se(F({layerType:M},j))}}),paint:Y=>m({layer:u,key:Y.key,value:Y.value,valueSpec:{},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{"*":j=>cc(F({layerType:M},j))}})}})),n}function ae(a){const n=a.value,u=a.key,p=Nr(n);return"string"!==p?[new gn(u,n,`string expected, ${p} found`)]:[]}const ke={promoteId:function({key:a,value:n}){if("string"===Nr(n))return ae({key:a,value:n});{const u=[];for(const p in n)u.push(...ae({key:`${a}.${p}`,value:n[p]}));return u}}};function Ft(a){const n=a.value,u=a.key,p=a.styleSpec,v=a.style;if(!n.type)return[new gn(u,n,'"type" is required')];const E=U(n.type);let M;switch(E){case"vector":case"raster":case"raster-dem":return M=m({key:u,value:n,valueSpec:p[`source_${E.replace("-","_")}`],style:a.style,styleSpec:p,objectElementValidators:ke}),M;case"geojson":if(M=m({key:u,value:n,valueSpec:p.source_geojson,style:v,styleSpec:p,objectElementValidators:ke}),n.cluster)for(const R in n.clusterProperties){const[Y,j]=n.clusterProperties[R],ee="string"==typeof Y?[Y,["accumulated"],["get",R]]:Y;M.push(..._e({key:`${u}.${R}.map`,value:j,expressionContext:"cluster-map"})),M.push(..._e({key:`${u}.${R}.reduce`,value:ee,expressionContext:"cluster-reduce"}))}return M;case"video":return m({key:u,value:n,valueSpec:p.source_video,style:v,styleSpec:p});case"image":return m({key:u,value:n,valueSpec:p.source_image,style:v,styleSpec:p});case"canvas":return[new gn(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ht({key:`${u}.type`,value:n.type,valueSpec:{values:zi(p)},style:v,styleSpec:p})}}function zi(a){return a.source.reduce((n,u)=>{const p=a[u];return"enum"===p.type.type&&(n=n.concat(Object.keys(p.type.values))),n},[])}function Ln(a){const n=a.value,u=a.styleSpec,p=u.light,v=a.style;let E=[];const M=Nr(n);if(void 0===n)return E;if("object"!==M)return E=E.concat([new gn("light",n,`object expected, ${M} found`)]),E;for(const R in n){const Y=R.match(/^(.*)-transition$/);E=E.concat(Y&&p[Y[1]]&&p[Y[1]].transition?Ys({key:R,value:n[R],valueSpec:u.transition,style:v,styleSpec:u}):p[R]?Ys({key:R,value:n[R],valueSpec:p[R],style:v,styleSpec:u}):[new gn(R,n[R],`unknown property "${R}"`)])}return E}function Rr(a){const n=a.value,u=a.key,p=a.style,v=a.styleSpec,E=v.terrain;let M=[];const R=Nr(n);if(void 0===n)return M;if("object"!==R)return M=M.concat([new gn("terrain",n,`object expected, ${R} found`)]),M;for(const Y in n){const j=Y.match(/^(.*)-transition$/);M=M.concat(j&&E[j[1]]&&E[j[1]].transition?Ys({key:Y,value:n[Y],valueSpec:v.transition,style:p,styleSpec:v}):E[Y]?Ys({key:Y,value:n[Y],valueSpec:E[Y],style:p,styleSpec:v}):[new gn(Y,n[Y],`unknown property "${Y}"`)])}if(n.source){const Y=p.sources&&p.sources[n.source],j=Y&&U(Y.type);Y?"raster-dem"!==j&&M.push(new gn(u,n.source,`terrain cannot be used with a source of type ${String(j)}, it only be used with a "raster-dem" source type`)):M.push(new gn(u,n.source,`source "${n.source}" not found`))}else M.push(new gn(u,n,'terrain is missing required property "source"'));return M}function zr(a){const n=a.value,u=a.style,p=a.styleSpec,v=p.fog;let E=[];const M=Nr(n);if(void 0===n)return E;if("object"!==M)return E=E.concat([new gn("fog",n,`object expected, ${M} found`)]),E;for(const R in n){const Y=R.match(/^(.*)-transition$/);E=E.concat(Y&&v[Y[1]]&&v[Y[1]].transition?Ys({key:R,value:n[R],valueSpec:p.transition,style:u,styleSpec:p}):v[R]?Ys({key:R,value:n[R],valueSpec:v[R],style:u,styleSpec:p}):[new gn(R,n[R],`unknown property "${R}"`)])}return E}const ys={"*":()=>[],array:D,boolean:function(a){const n=a.value,u=a.key,p=Nr(n);return"boolean"!==p?[new gn(u,n,`boolean expected, ${p} found`)]:[]},number:G,color:function(a){const n=a.key,u=a.value,p=Nr(u);return"string"!==p?[new gn(n,u,`color expected, ${p} found`)]:null===Fn(u)?[new gn(n,u,`color expected, "${u}" found`)]:[]},enum:Ht,filter:Lc,function:ne,layer:J,object:m,source:Ft,light:Ln,terrain:Rr,fog:zr,string:ae,formatted:function(a){return 0===ae(a).length?[]:_e(a)},resolvedImage:function(a){return 0===ae(a).length?[]:_e(a)},projection:function(a){const n=a.value,u=a.styleSpec,p=u.projection,v=a.style;let E=[];const M=Nr(n);if("object"===M)for(const R in n)E=E.concat(Ys({key:R,value:n[R],valueSpec:p[R],style:v,styleSpec:u}));else"string"!==M&&(E=E.concat([new gn("projection",n,`object or string expected, ${M} found`)]));return E}};function Ys(a){const n=a.value,u=a.valueSpec,p=a.styleSpec;return u.expression&&sl(U(n))?ne(a):u.expression&&Va($(n))?_e(a):u.type&&ys[u.type]?ys[u.type](a):m(F({},a,{valueSpec:u.type?p[u.type]:u}))}function Ah(a){const n=a.value,u=a.key,p=ae(a);return p.length||(-1===n.indexOf("{fontstack}")&&p.push(new gn(u,n,'"glyphs" url must include a "{fontstack}" token')),-1===n.indexOf("{range}")&&p.push(new gn(u,n,'"glyphs" url must include a "{range}" token'))),p}function Zd(a,n=I){return Ea(Ys({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:Ah,"*":()=>[]}}))}const Tf=a=>Ea(cc(a)),qd=a=>Ea(Se(a));function Ea(a){return a.slice().sort((n,u)=>n.line&&u.line?n.line-u.line:0)}function up(a,n){let u=!1;if(n&&n.length)for(const p of n)a.fire(new x(new Error(p.message))),u=!0;return u}var wl=pa,Gl=3;function pa(a,n,u){var p=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var v=new Int32Array(this.arrayBuffer);a=v[0],this.d=(n=v[1])+2*(u=v[2]);for(var E=0;E<this.d*this.d;E++){var M=v[Gl+E],R=v[Gl+E+1];p.push(M===R?null:v.subarray(M,R))}var Y=v[Gl+p.length+1];this.keys=v.subarray(v[Gl+p.length],Y),this.bboxes=v.subarray(Y),this.insert=this._insertReadonly}else{this.d=n+2*u;for(var j=0;j<this.d*this.d;j++)p.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=a,this.padding=u,this.scale=n/a,this.uid=0;var ee=u/n*a;this.min=-ee,this.max=a+ee}pa.prototype.insert=function(a,n,u,p,v){this._forEachCell(n,u,p,v,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(v)},pa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pa.prototype._insertCell=function(a,n,u,p,v,E){this.cells[v].push(E)},pa.prototype.query=function(a,n,u,p,v){var E=this.min,M=this.max;if(a<=E&&n<=E&&M<=u&&M<=p&&!v)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(a,n,u,p,this._queryCell,R,{},v),R},pa.prototype._queryCell=function(a,n,u,p,v,E,M,R){var Y=this.cells[v];if(null!==Y)for(var j=this.keys,ee=this.bboxes,se=0;se<Y.length;se++){var ce=Y[se];if(void 0===M[ce]){var ve=4*ce;(R?R(ee[ve+0],ee[ve+1],ee[ve+2],ee[ve+3]):a<=ee[ve+2]&&n<=ee[ve+3]&&u>=ee[ve+0]&&p>=ee[ve+1])?(M[ce]=!0,E.push(j[ce])):M[ce]=!1}}},pa.prototype._forEachCell=function(a,n,u,p,v,E,M,R){for(var Y=this._convertToCellCoord(a),j=this._convertToCellCoord(n),ee=this._convertToCellCoord(u),se=this._convertToCellCoord(p),ce=Y;ce<=ee;ce++)for(var ve=j;ve<=se;ve++){var be=this.d*ve+ce;if((!R||R(this._convertFromCellCoord(ce),this._convertFromCellCoord(ve),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(ve+1)))&&v.call(this,a,n,u,p,be,E,M,R))return}},pa.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},pa.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},pa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,n=Gl+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var v=new Int32Array(n+u+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var E=n,M=0;M<a.length;M++){var R=a[M];v[Gl+M]=E,v.set(R,E),E+=R.length}return v[Gl+a.length]=E,v.set(this.keys,E),v[Gl+a.length+1]=E+=this.keys.length,v.set(this.bboxes,E),E+=this.bboxes.length,v.buffer};var uc=gt(wl);const ps={};function Tn(a,n,u={}){Object.defineProperty(a,"_classRegistryKey",{value:n,writeable:!1}),ps[n]={klass:a,omit:u.omit||[]}}Tn(Object,"Object"),uc.serialize=function(a,n){const u=a.toArrayBuffer();return n&&n.push(u),{buffer:u}},uc.deserialize=function(a){return new uc(a.buffer)},Object.defineProperty(uc,"name",{value:"Grid"}),Tn(uc,"Grid"),Tn(Dr,"Color"),Tn(Error,"Error"),Tn(er,"AJAXError"),Tn(Zr,"ResolvedImage"),Tn(No,"StylePropertyFunction"),Tn(Hl,"StyleExpression",{omit:["_evaluator"]}),Tn(xl,"ZoomDependentExpression"),Tn(bl,"ZoomConstantExpression"),Tn(Ws,"CompoundExpression",{omit:["_evaluate"]});for(const a in eo)ps[eo[a]._classRegistryKey]||Tn(eo[a],`Expression${a}`);function Mh(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&"ArrayBuffer"===a.constructor.name)}function dp(a){return V.ImageBitmap&&a instanceof V.ImageBitmap}function jc(a,n){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Mh(a)||dp(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const u=a;return n&&n.push(u.buffer),u}if(a instanceof V.ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const u=[];for(const p of a)u.push(jc(p,n));return u}if("object"==typeof a){const u=a.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const v=u.serialize?u.serialize(a,n):{};if(!u.serialize){for(const E in a)a.hasOwnProperty(E)&&(ps[p].omit.indexOf(E)>=0||(v[E]=jc(a[E],n)));a instanceof Error&&(v.message=a.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==p&&(v.$name=p),v}throw new Error("can't serialize object of type "+typeof a)}function Cl(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Mh(a)||dp(a)||ArrayBuffer.isView(a)||a instanceof V.ImageData)return a;if(Array.isArray(a))return a.map(Cl);if("object"==typeof a){const n=a.$name||"Object",{klass:u}=ps[n];if(!u)throw new Error(`can't deserialize unregistered class ${n}`);if(u.deserialize)return u.deserialize(a);const p=Object.create(u.prototype);for(const v of Object.keys(a))"$name"!==v&&(p[v]=Cl(a[v]));return p}throw new Error("can't deserialize object of type "+typeof a)}const vn={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Wu(a){for(const n of a)if(bu(n.charCodeAt(0)))return!0;return!1}function hp(a){for(const n of a)if(!Oc(n.charCodeAt(0)))return!1;return!0}function Oc(a){return!(vn.Arabic(a)||vn["Arabic Supplement"](a)||vn["Arabic Extended-A"](a)||vn["Arabic Presentation Forms-A"](a)||vn["Arabic Presentation Forms-B"](a))}function bu(a){return!(746!==a&&747!==a&&(a<4352||!(vn["Bopomofo Extended"](a)||vn.Bopomofo(a)||vn["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||vn["CJK Compatibility Ideographs"](a)||vn["CJK Compatibility"](a)||vn["CJK Radicals Supplement"](a)||vn["CJK Strokes"](a)||!(!vn["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||12336===a)||vn["CJK Unified Ideographs Extension A"](a)||vn["CJK Unified Ideographs"](a)||vn["Enclosed CJK Letters and Months"](a)||vn["Hangul Compatibility Jamo"](a)||vn["Hangul Jamo Extended-A"](a)||vn["Hangul Jamo Extended-B"](a)||vn["Hangul Jamo"](a)||vn["Hangul Syllables"](a)||vn.Hiragana(a)||vn["Ideographic Description Characters"](a)||vn.Kanbun(a)||vn["Kangxi Radicals"](a)||vn["Katakana Phonetic Extensions"](a)||vn.Katakana(a)&&12540!==a||!(!vn["Halfwidth and Fullwidth Forms"](a)||65288===a||65289===a||65293===a||a>=65306&&a<=65310||65339===a||65341===a||65343===a||a>=65371&&a<=65503||65507===a||a>=65512&&a<=65519)||!(!vn["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||vn["Unified Canadian Aboriginal Syllabics"](a)||vn["Unified Canadian Aboriginal Syllabics Extended"](a)||vn["Vertical Forms"](a)||vn["Yijing Hexagram Symbols"](a)||vn["Yi Syllables"](a)||vn["Yi Radicals"](a))))}function Dh(a){return!(bu(a)||(n=a,vn["Latin-1 Supplement"](n)&&(167===n||169===n||174===n||177===n||188===n||189===n||190===n||215===n||247===n)||vn["General Punctuation"](n)&&(8214===n||8224===n||8225===n||8240===n||8241===n||8251===n||8252===n||8258===n||8263===n||8264===n||8265===n||8273===n)||vn["Letterlike Symbols"](n)||vn["Number Forms"](n)||vn["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||9003===n||n>=9085&&n<=9114||n>=9150&&n<=9165||9167===n||n>=9169&&n<=9179||n>=9186&&n<=9215)||vn["Control Pictures"](n)&&9251!==n||vn["Optical Character Recognition"](n)||vn["Enclosed Alphanumerics"](n)||vn["Geometric Shapes"](n)||vn["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||vn["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||vn["CJK Symbols and Punctuation"](n)||vn.Katakana(n)||vn["Private Use Area"](n)||vn["CJK Compatibility Forms"](n)||vn["Small Form Variants"](n)||vn["Halfwidth and Fullwidth Forms"](n)||8734===n||8756===n||8757===n||n>=9984&&n<=10087||n>=10102&&n<=10131||65532===n||65533===n));var n}function Ih(a){return a>=1424&&a<=2303||vn["Arabic Presentation Forms-A"](a)||vn["Arabic Presentation Forms-B"](a)}function pp(a,n){return!(!n&&Ih(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||vn.Khmer(a))}function ja(a){for(const n of a)if(Ih(n.charCodeAt(0)))return!0;return!1}const fd="deferred",Kd="loading",Jd="loaded";let xu=null,w="unavailable",d=null;const g=function(a){a&&"string"==typeof a&&a.indexOf("NetworkError")>-1&&(w="error"),xu&&xu(a)};function T(){P.fire(new b("pluginStateChange",{pluginStatus:w,pluginURL:d}))}const P=new A,B=function(){return w},X=function(){if(w!==fd||!d)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");w=Kd,T(),d&&Tr({url:d},a=>{a?g(a):(w=Jd,T())})},K={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>w===Jd||null!=K.applyArabicShaping,isLoading:()=>w===Kd,setState(a){w=a.pluginStatus,d=a.pluginURL},isParsed:()=>null!=K.applyArabicShaping&&null!=K.processBidirectionalText&&null!=K.processStyledBidirectionalText,getPluginURL:()=>d};class te{constructor(n,u){this.zoom=n,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(u,p){for(const v of u)if(!pp(v.charCodeAt(0),p))return!1;return!0}(n,K.isLoaded())}}class he{constructor(n,u){this.property=n,this.value=u,this.expression=function(p,v){if(sl(p))return new No(p,v);if(Va(p)){const E=Ic(p,v);if("error"===E.result)throw new Error(E.value.map(M=>`${M.key}: ${M.message}`).join(", "));return E.value}{let E=p;return"string"==typeof p&&"color"===v.type&&(E=Dr.parse(p)),{kind:"constant",evaluate:()=>E}}}(void 0===u?n.specification.default:u,n.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(n,u,p){return this.property.possiblyEvaluate(this,n,u,p)}}class de{constructor(n){this.property=n,this.value=new he(n,void 0)}transitioned(n,u){return new je(this.property,this.value,u,fn({},n.transition,this.transition),n.now)}untransitioned(){return new je(this.property,this.value,null,{},0)}}class Ce{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return or(this._values[n].value.value)}setValue(n,u){this._values.hasOwnProperty(n)||(this._values[n]=new de(this._values[n].property)),this._values[n].value=new he(this._values[n].property,null===u?void 0:or(u))}getTransition(n){return or(this._values[n].transition)}setTransition(n,u){this._values.hasOwnProperty(n)||(this._values[n]=new de(this._values[n].property)),this._values[n].transition=or(u)||void 0}serialize(){const n={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(n[u]=p);const v=this.getTransition(u);void 0!==v&&(n[`${u}-transition`]=v)}return n}transitioned(n,u){const p=new Qe(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].transitioned(n,u._values[v]);return p}untransitioned(){const n=new Qe(this._properties);for(const u of Object.keys(this._values))n._values[u]=this._values[u].untransitioned();return n}}class je{constructor(n,u,p,v,E){const M=v.delay||0,R=v.duration||0;E=E||0,this.property=n,this.value=u,this.begin=E+M,this.end=this.begin+R,n.specification.transition&&(v.delay||v.duration)&&(this.prior=p)}possiblyEvaluate(n,u,p){const v=n.now||0,E=this.value.possiblyEvaluate(n,u,p),M=this.prior;if(M){if(v>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(v<this.begin)return M.possiblyEvaluate(n,u,p);{const R=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(n,u,p),E,ni(R))}}return E}}class Qe{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,u,p){const v=new st(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(n,u,p);return v}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class et{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return or(this._values[n].value)}setValue(n,u){this._values[n]=new he(this._values[n].property,null===u?void 0:or(u))}serialize(){const n={};for(const u of Object.keys(this._values)){const p=this.getValue(u);void 0!==p&&(n[u]=p)}return n}possiblyEvaluate(n,u,p){const v=new st(this._properties);for(const E of Object.keys(this._values))v._values[E]=this._values[E].possiblyEvaluate(n,u,p);return v}}class tt{constructor(n,u,p){this.property=n,this.value=u,this.parameters=p}isConstant(){return"constant"===this.value.kind}constantOr(n){return"constant"===this.value.kind?this.value.value:n}evaluate(n,u,p,v){return this.property.evaluate(this.value,this.parameters,n,u,p,v)}}class st{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Te{constructor(n){this.specification=n}possiblyEvaluate(n,u){return n.expression.evaluate(u)}interpolate(n,u,p){const v=Rl[this.specification.type];return v?v(n,u,p):n}}class Ge{constructor(n,u){this.specification=n,this.overrides=u}possiblyEvaluate(n,u,p,v){return new tt(this,"constant"===n.expression.kind||"camera"===n.expression.kind?{kind:"constant",value:n.expression.evaluate(u,null,{},p,v)}:n.expression,u)}interpolate(n,u,p){if("constant"!==n.value.kind||"constant"!==u.value.kind)return n;if(void 0===n.value.value||void 0===u.value.value)return new tt(this,{kind:"constant",value:void 0},n.parameters);const v=Rl[this.specification.type];return v?new tt(this,{kind:"constant",value:v(n.value.value,u.value.value,p)},n.parameters):n}evaluate(n,u,p,v,E,M){return"constant"===n.kind?n.value:n.evaluate(u,p,v,E,M)}}class bt{constructor(n){this.specification=n}possiblyEvaluate(n,u,p,v){return!!n.expression.evaluate(u,null,{},p,v)}interpolate(){return!1}}class xt{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new te(0,{});for(const p in n){const v=n[p];v.specification.overridable&&this.overridableProperties.push(p);const E=this.defaultPropertyValues[p]=new he(v,void 0),M=this.defaultTransitionablePropertyValues[p]=new de(v);this.defaultTransitioningPropertyValues[p]=M.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=E.possiblyEvaluate(u)}}}function jt(a,n){return 256*(a=vi(Math.floor(a),0,255))+vi(Math.floor(n),0,255)}Tn(Ge,"DataDrivenProperty"),Tn(Te,"DataConstantProperty"),Tn(bt,"ColorRampProperty");const Wt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Gt{constructor(n,u){this._structArray=n,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ti{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,u){return n._trim(),u&&(n.isTransferred=!0,u.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const u=Object.create(this.prototype);return u.arrayBuffer=n.arrayBuffer,u.length=n.length,u.capacity=n.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Jt(a,n=1){let u=0,p=0;return{members:a.map(v=>{const E=Wt[v.type].BYTES_PER_ELEMENT,M=u=_i(u,Math.max(n,E)),R=v.components||1;return p=Math.max(p,E),u+=E*R,{name:v.name,type:v.type,components:R,offset:M}}),size:_i(u,Math.max(p,n)),alignment:n}}function _i(a,n){return Math.ceil(a/n)*n}class Qi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.int16[v+0]=u,this.int16[v+1]=p,n}}Qi.prototype.bytesPerElement=4,Tn(Qi,"StructArrayLayout2i4");class ci extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=v,n}}ci.prototype.bytesPerElement=6,Tn(ci,"StructArrayLayout3i6");class Ri extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const M=4*n;return this.int16[M+0]=u,this.int16[M+1]=p,this.int16[M+2]=v,this.int16[M+3]=E,n}}Ri.prototype.bytesPerElement=8,Tn(Ri,"StructArrayLayout4i8");class yi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,u,p,v,E,M,R)}emplace(n,u,p,v,E,M,R,Y){const j=6*n,ee=12*n,se=3*n;return this.int16[j+0]=u,this.int16[j+1]=p,this.uint8[ee+4]=v,this.uint8[ee+5]=E,this.uint8[ee+6]=M,this.uint8[ee+7]=R,this.float32[se+2]=Y,n}}yi.prototype.bytesPerElement=12,Tn(yi,"StructArrayLayout2i4ub1f12");class Wi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const M=4*n;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=v,this.float32[M+3]=E,n}}Wi.prototype.bytesPerElement=16,Tn(Wi,"StructArrayLayout4f16");class pi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,p,v,E)}emplace(n,u,p,v,E,M){const R=6*n,Y=3*n;return this.uint16[R+0]=u,this.uint16[R+1]=p,this.uint16[R+2]=v,this.uint16[R+3]=E,this.float32[Y+2]=M,n}}pi.prototype.bytesPerElement=12,Tn(pi,"StructArrayLayout4ui1f12");class Ii extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const M=4*n;return this.uint16[M+0]=u,this.uint16[M+1]=p,this.uint16[M+2]=v,this.uint16[M+3]=E,n}}Ii.prototype.bytesPerElement=8,Tn(Ii,"StructArrayLayout4ui8");class rn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M){const R=this.length;return this.resize(R+1),this.emplace(R,n,u,p,v,E,M)}emplace(n,u,p,v,E,M,R){const Y=6*n;return this.int16[Y+0]=u,this.int16[Y+1]=p,this.int16[Y+2]=v,this.int16[Y+3]=E,this.int16[Y+4]=M,this.int16[Y+5]=R,n}}rn.prototype.bytesPerElement=12,Tn(rn,"StructArrayLayout6i12");class Bi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R,Y,j,ee,se,ce){const ve=this.length;return this.resize(ve+1),this.emplace(ve,n,u,p,v,E,M,R,Y,j,ee,se,ce)}emplace(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve){const be=12*n;return this.int16[be+0]=u,this.int16[be+1]=p,this.int16[be+2]=v,this.int16[be+3]=E,this.uint16[be+4]=M,this.uint16[be+5]=R,this.uint16[be+6]=Y,this.uint16[be+7]=j,this.int16[be+8]=ee,this.int16[be+9]=se,this.int16[be+10]=ce,this.int16[be+11]=ve,n}}Bi.prototype.bytesPerElement=24,Tn(Bi,"StructArrayLayout4i4ui4i24");class qi extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M){const R=this.length;return this.resize(R+1),this.emplace(R,n,u,p,v,E,M)}emplace(n,u,p,v,E,M,R){const Y=10*n,j=5*n;return this.int16[Y+0]=u,this.int16[Y+1]=p,this.int16[Y+2]=v,this.float32[j+2]=E,this.float32[j+3]=M,this.float32[j+4]=R,n}}qi.prototype.bytesPerElement=20,Tn(qi,"StructArrayLayout3i3f20");class Bn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint32[1*n+0]=u,n}}Bn.prototype.bytesPerElement=4,Tn(Bn,"StructArrayLayout1ul4");class Hn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve){const be=this.length;return this.resize(be+1),this.emplace(be,n,u,p,v,E,M,R,Y,j,ee,se,ce,ve)}emplace(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be){const Me=20*n,Xe=10*n;return this.int16[Me+0]=u,this.int16[Me+1]=p,this.int16[Me+2]=v,this.int16[Me+3]=E,this.int16[Me+4]=M,this.float32[Xe+3]=R,this.float32[Xe+4]=Y,this.float32[Xe+5]=j,this.float32[Xe+6]=ee,this.int16[Me+14]=se,this.uint32[Xe+8]=ce,this.uint16[Me+18]=ve,this.uint16[Me+19]=be,n}}Hn.prototype.bytesPerElement=40,Tn(Hn,"StructArrayLayout5i4f1i1ul2ui40");class En extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,u,p,v,E,M,R)}emplace(n,u,p,v,E,M,R,Y){const j=8*n;return this.int16[j+0]=u,this.int16[j+1]=p,this.int16[j+2]=v,this.int16[j+4]=E,this.int16[j+5]=M,this.int16[j+6]=R,this.int16[j+7]=Y,n}}En.prototype.bytesPerElement=16,Tn(En,"StructArrayLayout3i2i2i16");class qn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,p,v,E)}emplace(n,u,p,v,E,M){const R=4*n,Y=8*n;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=v,this.int16[Y+6]=E,this.int16[Y+7]=M,n}}qn.prototype.bytesPerElement=16,Tn(qn,"StructArrayLayout2f1f2i16");class rr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const M=12*n,R=3*n;return this.uint8[M+0]=u,this.uint8[M+1]=p,this.float32[R+1]=v,this.float32[R+2]=E,n}}rr.prototype.bytesPerElement=12,Tn(rr,"StructArrayLayout2ub2f12");class sr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.float32[E+0]=u,this.float32[E+1]=p,this.float32[E+2]=v,n}}sr.prototype.bytesPerElement=12,Tn(sr,"StructArrayLayout3f12");class Vn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,u,p)}emplace(n,u,p,v){const E=3*n;return this.uint16[E+0]=u,this.uint16[E+1]=p,this.uint16[E+2]=v,n}}Vn.prototype.bytesPerElement=6,Tn(Vn,"StructArrayLayout3ui6");class Ir extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt)}emplace(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt,Bt){const bi=30*n,hi=15*n,Oi=60*n;return this.int16[bi+0]=u,this.int16[bi+1]=p,this.int16[bi+2]=v,this.float32[hi+2]=E,this.float32[hi+3]=M,this.uint16[bi+8]=R,this.uint16[bi+9]=Y,this.uint32[hi+5]=j,this.uint32[hi+6]=ee,this.uint32[hi+7]=se,this.uint16[bi+16]=ce,this.uint16[bi+17]=ve,this.uint16[bi+18]=be,this.float32[hi+10]=Me,this.float32[hi+11]=Xe,this.uint8[Oi+48]=ut,this.uint8[Oi+49]=Lt,this.uint8[Oi+50]=ht,this.uint32[hi+13]=At,this.int16[bi+28]=Nt,this.uint8[Oi+58]=Bt,n}}Ir.prototype.bytesPerElement=60,Tn(Ir,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class vs extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi,Ki){const an=this.length;return this.resize(an+1),this.emplace(an,n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi,Ki)}emplace(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe,ut,Lt,ht,At,Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi,Ki,an){const Li=38*n,yn=19*n;return this.int16[Li+0]=u,this.int16[Li+1]=p,this.int16[Li+2]=v,this.float32[yn+2]=E,this.float32[yn+3]=M,this.int16[Li+8]=R,this.int16[Li+9]=Y,this.int16[Li+10]=j,this.int16[Li+11]=ee,this.int16[Li+12]=se,this.int16[Li+13]=ce,this.uint16[Li+14]=ve,this.uint16[Li+15]=be,this.uint16[Li+16]=Me,this.uint16[Li+17]=Xe,this.uint16[Li+18]=ut,this.uint16[Li+19]=Lt,this.uint16[Li+20]=ht,this.uint16[Li+21]=At,this.uint16[Li+22]=Nt,this.uint16[Li+23]=Bt,this.uint16[Li+24]=bi,this.uint16[Li+25]=hi,this.uint16[Li+26]=Oi,this.uint16[Li+27]=nn,this.uint16[Li+28]=Ci,this.uint32[yn+15]=Ni,this.float32[yn+16]=Hi,this.float32[yn+17]=Ki,this.float32[yn+18]=an,n}}vs.prototype.bytesPerElement=76,Tn(vs,"StructArrayLayout3i2f6i15ui1ul3f76");class _s extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.float32[1*n+0]=u,n}}_s.prototype.bytesPerElement=4,Tn(_s,"StructArrayLayout1f4");class cs extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,p,v,E){const M=this.length;return this.resize(M+1),this.emplace(M,n,u,p,v,E)}emplace(n,u,p,v,E,M){const R=5*n;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=v,this.float32[R+3]=E,this.float32[R+4]=M,n}}cs.prototype.bytesPerElement=20,Tn(cs,"StructArrayLayout5f20");class Hr extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,p,v){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,p,v)}emplace(n,u,p,v,E){const M=6*n;return this.uint32[3*n+0]=u,this.uint16[M+2]=p,this.uint16[M+3]=v,this.uint16[M+4]=E,n}}Hr.prototype.bytesPerElement=12,Tn(Hr,"StructArrayLayout1ul3ui12");class _o extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.uint16[v+0]=u,this.uint16[v+1]=p,n}}_o.prototype.bytesPerElement=4,Tn(_o,"StructArrayLayout2ui4");class Sa extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint16[1*n+0]=u,n}}Sa.prototype.bytesPerElement=2,Tn(Sa,"StructArrayLayout1ui2");class dc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u){const p=this.length;return this.resize(p+1),this.emplace(p,n,u)}emplace(n,u,p){const v=2*n;return this.float32[v+0]=u,this.float32[v+1]=p,n}}dc.prototype.bytesPerElement=8,Tn(dc,"StructArrayLayout2f8");class Ds extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ds.prototype.size=40;class Ur extends Hn{get(n){return new Ds(this,n)}}Tn(Ur,"CollisionBoxArray");class Jr extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Jr.prototype.size=60;class Es extends Ir{get(n){return new Jr(this,n)}}Tn(Es,"PlacedSymbolArray");class fa extends Gt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}fa.prototype.size=76;class ns extends vs{get(n){return new fa(this,n)}}Tn(ns,"SymbolInstanceArray");class Is extends _s{getoffsetX(n){return this.float32[1*n+0]}}Tn(Is,"GlyphOffsetArray");class Uc extends Qi{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Tn(Uc,"SymbolLineVertexArray");class ko extends Gt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ko.prototype.size=12;class El extends Hr{get(n){return new ko(this,n)}}Tn(El,"FeatureIndexArray");class Ua extends _o{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Tn(Ua,"FillExtrusionCentroidArray");const hc=Jt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Wc=Jt([{name:"a_dash",components:4,type:"Uint16"}]);var wu={exports:{}},ng=function(a,n){var u,p,v,E,M,R,Y,j;for(p=a.length-(u=3&a.length),v=n,M=3432918353,R=461845907,j=0;j<p;)Y=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,v=27492+(65535&(E=5*(65535&(v=(v^=Y=(65535&(Y=(Y=(65535&Y)*M+(((Y>>>16)*M&65535)<<16)&4294967295)<<15|Y>>>17))*R+(((Y>>>16)*R&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(Y=0,u){case 3:Y^=(255&a.charCodeAt(j+2))<<16;case 2:Y^=(255&a.charCodeAt(j+1))<<8;case 1:v^=Y=(65535&(Y=(Y=(65535&(Y^=255&a.charCodeAt(j)))*M+(((Y>>>16)*M&65535)<<16)&4294967295)<<15|Y>>>17))*R+(((Y>>>16)*R&65535)<<16)&4294967295}return v^=a.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0},kf=function(a,n){for(var u,p=a.length,v=n^p,E=0;p>=4;)u=1540483477*(65535&(u=255&a.charCodeAt(E)|(255&a.charCodeAt(++E))<<8|(255&a.charCodeAt(++E))<<16|(255&a.charCodeAt(++E))<<24))+((1540483477*(u>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++E;switch(p){case 3:v^=(255&a.charCodeAt(E+2))<<16;case 2:v^=(255&a.charCodeAt(E+1))<<8;case 1:v=1540483477*(65535&(v^=255&a.charCodeAt(E)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};wu.exports=ng,wu.exports.murmur3=ng,wu.exports.murmur2=kf;var md=gt(wu.exports);class $u{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,u,p,v){this.ids.push(Af(n)),this.positions.push(u,p,v)}getPositions(n){const u=Af(n);let p=0,v=this.ids.length-1;for(;p<v;){const M=p+v>>1;this.ids[M]>=u?v=M:p=M+1}const E=[];for(;this.ids[p]===u;)E.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return E}static serialize(n,u){const p=new Float64Array(n.ids),v=new Uint32Array(n.positions);return fp(p,v,0,p.length-1),u&&u.push(p.buffer,v.buffer),{ids:p,positions:v}}static deserialize(n){const u=new $u;return u.ids=n.ids,u.positions=n.positions,u.indexed=!0,u}}function Af(a){const n=+a;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:md(String(a))}function fp(a,n,u,p){for(;u<p;){const v=a[u+p>>1];let E=u-1,M=p+1;for(;;){do{E++}while(a[E]<v);do{M--}while(a[M]>v);if(E>=M)break;Lh(a,E,M),Lh(n,3*E,3*M),Lh(n,3*E+1,3*M+1),Lh(n,3*E+2,3*M+2)}M-u<p-M?(fp(a,n,u,M),u=M+1):(fp(a,n,M+1,p),p=M)}}function Lh(a,n,u){const p=a[n];a[n]=a[u],a[u]=p}Tn($u,"FeaturePositionMap");class $c{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,u),this.initialized=!0),!!this.location}}class Oh extends $c{constructor(n){super(n),this.current=0}set(n,u,p){this.fetchUniformLocation(n,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class mp extends $c{constructor(n){super(n),this.current=[0,0,0,0]}set(n,u,p){this.fetchUniformLocation(n,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class Mf extends $c{constructor(n){super(n),this.current=Dr.transparent}set(n,u,p){this.fetchUniformLocation(n,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const rg=new Float32Array(16),sg=new Float32Array(9),og=new Float32Array(4);function gp(a){return[jt(255*a.r,255*a.g),jt(255*a.b,255*a.a)]}class Qd{constructor(n,u,p){this.value=n,this.uniformNames=u.map(v=>`u_${v}`),this.type=p}setUniform(n,u,p,v,E){u.set(n,E,v.constantOr(this.value))}getBinding(n,u){return"color"===this.type?new Mf(n):new Oh(n)}}class gd{constructor(n,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,u,p,v,E){const M="u_pattern"===E||"u_dash"===E?this.pattern:"u_pixel_ratio"===E?this.pixelRatio:null;M&&u.set(n,E,M)}getBinding(n,u){return"u_pattern"===u||"u_dash"===u?new mp(n):new Oh(n)}}class Xc{constructor(n,u,p,v){this.expression=n,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===p?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,u,p,v,E,M){const R=this.paintVertexArray.length,Y=this.expression.evaluate(new te(0),u,{},E,v,M);this.paintVertexArray.resize(n),this._setPaintValue(R,n,Y)}updatePaintArray(n,u,p,v,E){const M=this.expression.evaluate({zoom:0},p,v,void 0,E);this._setPaintValue(n,u,M)}_setPaintValue(n,u,p){if("color"===this.type){const v=gp(p);for(let E=n;E<u;E++)this.paintVertexArray.emplace(E,v[0],v[1])}else{for(let v=n;v<u;v++)this.paintVertexArray.emplace(v,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ao{constructor(n,u,p,v,E,M){this.expression=n,this.uniformNames=u.map(R=>`u_${R}_t`),this.type=p,this.useIntegerZoom=v,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(R=>({name:`a_${R}`,type:"Float32",components:"color"===p?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(n,u,p,v,E,M){const R=this.expression.evaluate(new te(this.zoom),u,{},E,v,M),Y=this.expression.evaluate(new te(this.zoom+1),u,{},E,v,M),j=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(j,n,R,Y)}updatePaintArray(n,u,p,v,E){const M=this.expression.evaluate({zoom:this.zoom},p,v,void 0,E),R=this.expression.evaluate({zoom:this.zoom+1},p,v,void 0,E);this._setPaintValue(n,u,M,R)}_setPaintValue(n,u,p,v){if("color"===this.type){const E=gp(p),M=gp(v);for(let R=n;R<u;R++)this.paintVertexArray.emplace(R,E[0],E[1],M[0],M[1])}else{for(let E=n;E<u;E++)this.paintVertexArray.emplace(E,p,v);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(v))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,u,p,v,E){const M=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,R=vi(this.expression.interpolationFactor(M,this.zoom,this.zoom+1),0,1);u.set(n,E,R)}getBinding(n,u){return new Oh(n)}}class fc{constructor(n,u,p,v,E){this.expression=n,this.layerId=E,this.paintVertexAttributes=("array"===p?Wc:hc).members;for(let M=0;M<u.length;++M);this.paintVertexArray=new v}populatePaintArray(n,u,p){const v=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(v,n,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(n,u,p,v,E,M){this._setPaintValues(n,u,p.patterns&&p.patterns[this.layerId],M)}_setPaintValues(n,u,p,v){if(!v||!p)return;const E=v[p];if(!E)return;const{tl:M,br:R,pixelRatio:Y}=E;for(let j=n;j<u;j++)this.paintVertexArray.emplace(j,M[0],M[1],R[0],R[1],Y)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cu{constructor(n,u,p=(()=>!0)){this.binders={},this._buffers=[];const v=[];for(const E in n.paint._values){if(!p(E))continue;const M=n.paint.get(E);if(!(M instanceof tt&&To(M.property.specification)))continue;const R=Df(E,n.type),Y=M.value,j=M.property.specification.type,ee=!!M.property.useIntegerZoom,se="line-dasharray"===E||E.endsWith("pattern"),ce="line-dasharray"===E&&"constant"!==n.layout.get("line-cap").value.kind;if("constant"!==Y.kind||ce)if("source"===Y.kind||ce||se){const ve=Zc(E,j,"source");this.binders[E]=se?new fc(Y,R,j,ve,n.id):new Xc(Y,R,j,ve),v.push(`/a_${E}`)}else{const ve=Zc(E,j,"composite");this.binders[E]=new Ao(Y,R,j,ee,u,ve),v.push(`/z_${E}`)}else this.binders[E]=se?new gd(Y.value,R):new Qd(Y.value,R,j),v.push(`/u_${E}`)}this.cacheKey=v.sort().join("")}getMaxValue(n){const u=this.binders[n];return u instanceof Xc||u instanceof Ao?u.maxValue:0}populatePaintArrays(n,u,p,v,E,M){for(const R in this.binders){const Y=this.binders[R];(Y instanceof Xc||Y instanceof Ao||Y instanceof fc)&&Y.populatePaintArray(n,u,p,v,E,M)}}setConstantPatternPositions(n){for(const u in this.binders){const p=this.binders[u];p instanceof gd&&p.setConstantPatternPositions(n)}}updatePaintArrays(n,u,p,v,E,M){let R=!1;for(const Y in n){const j=u.getPositions(Y);for(const ee of j){const se=p.feature(ee.index);for(const ce in this.binders){const ve=this.binders[ce];if((ve instanceof Xc||ve instanceof Ao||ve instanceof fc)&&!0===ve.expression.isStateDependent){const be=v.paint.get(ce);ve.expression=be.value,ve.updatePaintArray(ee.start,ee.end,se,n[Y],E,M),R=!0}}}}return R}defines(){const n=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Qd||p instanceof gd)&&n.push(...p.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return n}getBinderAttributes(){const n=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Xc||p instanceof Ao||p instanceof fc)for(let v=0;v<p.paintVertexAttributes.length;v++)n.push(p.paintVertexAttributes[v].name)}return n}getBinderUniforms(){const n=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Qd||p instanceof gd||p instanceof Ao)for(const v of p.uniformNames)n.push(v)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const u=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Qd||v instanceof gd||v instanceof Ao)for(const E of v.uniformNames)u.push({name:E,property:p,binding:v.getBinding(n,E)})}return u}setUniforms(n,u,p,v,E){for(const{name:M,property:R,binding:Y}of p)this.binders[R].setUniform(n,Y,E,v.get(R),M)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const u=this.binders[n];(u instanceof Xc||u instanceof Ao||u instanceof fc)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(n){for(const u in this.binders){const p=this.binders[u];(p instanceof Xc||p instanceof Ao||p instanceof fc)&&p.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const u=this.binders[n];(u instanceof Xc||u instanceof Ao||u instanceof fc)&&u.destroy()}}}class Eu{constructor(n,u,p=(()=>!0)){this.programConfigurations={};for(const v of n)this.programConfigurations[v.id]=new Cu(v,u,p);this.needsUpload=!1,this._featureMap=new $u,this._bufferOffset=0}populatePaintArrays(n,u,p,v,E,M,R){for(const Y in this.programConfigurations)this.programConfigurations[Y].populatePaintArrays(n,u,v,E,M,R);void 0!==u.id&&this._featureMap.add(u.id,p,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,u,p,v,E){for(const M of p)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(n,this._featureMap,u,M,v,E)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const Gs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Df(a,n){return Gs[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}const Xu={"line-pattern":{source:pi,composite:pi},"fill-pattern":{source:pi,composite:pi},"fill-extrusion-pattern":{source:pi,composite:pi},"line-dasharray":{source:Ii,composite:Ii}},Ph={color:{source:dc,composite:Wi},number:{source:_s,composite:dc}};function Zc(a,n,u){const p=Xu[a];return p&&p[u]||Ph[n][u]}Tn(Qd,"ConstantBinder"),Tn(gd,"PatternConstantBinder"),Tn(Xc,"SourceExpressionBinder"),Tn(fc,"PatternCompositeBinder"),Tn(Ao,"CompositeExpressionBinder"),Tn(Cu,"ProgramConfiguration",{omit:["_buffers"]}),Tn(Eu,"ProgramConfigurationSet");const Zu="-transition";class Zo extends A{constructor(n,u){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==n.type&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,"background"!==n.type&&"sky"!==n.type&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new et(u.layout)),u.paint)){this._transitionablePaint=new Ce(u.paint);for(const p in n.paint)this.setPaintProperty(p,n.paint[p],{validate:!1});for(const p in n.layout)this.setLayoutProperty(p,n.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(u.paint)}}getLayoutProperty(n){return"visibility"===n?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,u,p={}){null!=u&&this._validate(qd,`layers.${this.id}.layout.${n}`,n,u,p)||("visibility"!==n?this._unevaluatedLayout.setValue(n,u):this.visibility=u)}getPaintProperty(n){return Dn(n,Zu)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,u,p={}){if(null!=u&&this._validate(Tf,`layers.${this.id}.paint.${n}`,n,u,p))return!1;if(Dn(n,Zu))return this._transitionablePaint.setTransition(n.slice(0,-11),u||void 0),!1;{const v=this._transitionablePaint._values[n],E=v.value.isDataDriven(),M=v.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);const R=this._transitionablePaint._values[n].value,Y=R.isDataDriven(),j=Dn(n,"pattern")||"line-dasharray"===n;return Y||E||j||this._handleOverridablePaintPropertyUpdate(n,M,R)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,u,p){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||"none"===this.visibility}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Mr(n,(u,p)=>!(void 0===u||"layout"===p&&!Object.keys(u).length||"paint"===p&&!Object.keys(u).length))}_validate(n,u,p,v,E={}){return(!E||!1!==E.validate)&&up(this,n.call(Zd,{key:u,layerType:this.type,objectKey:p,value:v,styleSpec:I,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const u=this.paint.get(n);if(u instanceof tt&&To(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ti(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const eh=Jt([{name:"a_pos",components:2,type:"Int16"}],4),If=Jt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Hs{constructor(n=[]){this.segments=n}prepareSegment(n,u,p,v){let E=this.segments[this.segments.length-1];return n>Hs.MAX_VERTEX_ARRAY_LENGTH&&xn(`Max vertices per segment is ${Hs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!E||E.vertexLength+n>Hs.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==v)&&(E={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},void 0!==v&&(E.sortKey=v),this.segments.push(E)),E}get(){return this.segments}destroy(){for(const n of this.segments)for(const u in n.vaos)n.vaos[u].destroy()}static simpleSegment(n,u,p,v){return new Hs([{vertexOffset:n,primitiveOffset:u,vertexLength:p,primitiveLength:v,vaos:{},sortKey:0}])}}Hs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tn(Hs,"SegmentVector");var An=8192;class ki{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):4===n.length?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof fs?new fs(n.lng,n.lat):fs.convert(n),this}setSouthWest(n){return this._sw=n instanceof fs?new fs(n.lng,n.lat):fs.convert(n),this}extend(n){const u=this._sw,p=this._ne;let v,E;if(n instanceof fs)v=n,E=n;else{if(!(n instanceof ki))return Array.isArray(n)?4===n.length||n.every(Array.isArray)?this.extend(ki.convert(n)):this.extend(fs.convert(n)):"object"==typeof n&&null!==n&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(fs.convert(n)):this;if(v=n._sw,E=n._ne,!v||!E)return this}return u||p?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),p.lng=Math.max(E.lng,p.lng),p.lat=Math.max(E.lat,p.lat)):(this._sw=new fs(v.lng,v.lat),this._ne=new fs(E.lng,E.lat)),this}getCenter(){return new fs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new fs(this.getWest(),this.getNorth())}getSouthEast(){return new fs(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:p}=fs.convert(n);let v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v}static convert(n){return!n||n instanceof ki?n:new ki(n)}}var Pc=1e-6,qo=typeof Float32Array<"u"?Float32Array:Array;function qc(){var a=new qo(9);return qo!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function mc(a,n,u){var p=n[0],v=n[1],E=n[2],M=n[3],R=n[4],Y=n[5],j=n[6],ee=n[7],se=n[8],ce=u[0],ve=u[1],be=u[2],Me=u[3],Xe=u[4],ut=u[5],Lt=u[6],ht=u[7],At=u[8];return a[0]=ce*p+ve*M+be*j,a[1]=ce*v+ve*R+be*ee,a[2]=ce*E+ve*Y+be*se,a[3]=Me*p+Xe*M+ut*j,a[4]=Me*v+Xe*R+ut*ee,a[5]=Me*E+Xe*Y+ut*se,a[6]=Lt*p+ht*M+At*j,a[7]=Lt*v+ht*R+At*ee,a[8]=Lt*E+ht*Y+At*se,a}function Sl(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function th(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],M=n[4],R=n[5],Y=n[6],j=n[7],ee=n[8],se=n[9],ce=n[10],ve=n[11],be=n[12],Me=n[13],Xe=n[14],ut=n[15],Lt=u*R-p*M,ht=u*Y-v*M,At=u*j-E*M,Nt=p*Y-v*R,Bt=p*j-E*R,bi=v*j-E*Y,hi=ee*Me-se*be,Oi=ee*Xe-ce*be,nn=ee*ut-ve*be,Ci=se*Xe-ce*Me,Ni=se*ut-ve*Me,Hi=ce*ut-ve*Xe,Ki=Lt*Hi-ht*Ni+At*Ci+Nt*nn-Bt*Oi+bi*hi;return Ki?(a[0]=(R*Hi-Y*Ni+j*Ci)*(Ki=1/Ki),a[1]=(v*Ni-p*Hi-E*Ci)*Ki,a[2]=(Me*bi-Xe*Bt+ut*Nt)*Ki,a[3]=(ce*Bt-se*bi-ve*Nt)*Ki,a[4]=(Y*nn-M*Hi-j*Oi)*Ki,a[5]=(u*Hi-v*nn+E*Oi)*Ki,a[6]=(Xe*At-be*bi-ut*ht)*Ki,a[7]=(ee*bi-ce*At+ve*ht)*Ki,a[8]=(M*Ni-R*nn+j*hi)*Ki,a[9]=(p*nn-u*Ni-E*hi)*Ki,a[10]=(be*Bt-Me*At+ut*Lt)*Ki,a[11]=(se*At-ee*Bt-ve*Lt)*Ki,a[12]=(R*Oi-M*Ci-Y*hi)*Ki,a[13]=(u*Ci-p*Oi+v*hi)*Ki,a[14]=(Me*ht-be*Nt-Xe*Lt)*Ki,a[15]=(ee*Nt-se*ht+ce*Lt)*Ki,a):null}function Ta(a,n,u){var p=n[0],v=n[1],E=n[2],M=n[3],R=n[4],Y=n[5],j=n[6],ee=n[7],se=n[8],ce=n[9],ve=n[10],be=n[11],Me=n[12],Xe=n[13],ut=n[14],Lt=n[15],ht=u[0],At=u[1],Nt=u[2],Bt=u[3];return a[0]=ht*p+At*R+Nt*se+Bt*Me,a[1]=ht*v+At*Y+Nt*ce+Bt*Xe,a[2]=ht*E+At*j+Nt*ve+Bt*ut,a[3]=ht*M+At*ee+Nt*be+Bt*Lt,a[4]=(ht=u[4])*p+(At=u[5])*R+(Nt=u[6])*se+(Bt=u[7])*Me,a[5]=ht*v+At*Y+Nt*ce+Bt*Xe,a[6]=ht*E+At*j+Nt*ve+Bt*ut,a[7]=ht*M+At*ee+Nt*be+Bt*Lt,a[8]=(ht=u[8])*p+(At=u[9])*R+(Nt=u[10])*se+(Bt=u[11])*Me,a[9]=ht*v+At*Y+Nt*ce+Bt*Xe,a[10]=ht*E+At*j+Nt*ve+Bt*ut,a[11]=ht*M+At*ee+Nt*be+Bt*Lt,a[12]=(ht=u[12])*p+(At=u[13])*R+(Nt=u[14])*se+(Bt=u[15])*Me,a[13]=ht*v+At*Y+Nt*ce+Bt*Xe,a[14]=ht*E+At*j+Nt*ve+Bt*ut,a[15]=ht*M+At*ee+Nt*be+Bt*Lt,a}function vd(a,n,u){var p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me=u[0],Xe=u[1],ut=u[2];return n===a?(a[12]=n[0]*Me+n[4]*Xe+n[8]*ut+n[12],a[13]=n[1]*Me+n[5]*Xe+n[9]*ut+n[13],a[14]=n[2]*Me+n[6]*Xe+n[10]*ut+n[14],a[15]=n[3]*Me+n[7]*Xe+n[11]*ut+n[15]):(v=n[1],E=n[2],M=n[3],R=n[4],Y=n[5],j=n[6],ee=n[7],se=n[8],ce=n[9],ve=n[10],be=n[11],a[0]=p=n[0],a[1]=v,a[2]=E,a[3]=M,a[4]=R,a[5]=Y,a[6]=j,a[7]=ee,a[8]=se,a[9]=ce,a[10]=ve,a[11]=be,a[12]=p*Me+R*Xe+se*ut+n[12],a[13]=v*Me+Y*Xe+ce*ut+n[13],a[14]=E*Me+j*Xe+ve*ut+n[14],a[15]=M*Me+ee*Xe+be*ut+n[15]),a}function Rc(a,n,u){var p=u[0],v=u[1],E=u[2];return a[0]=n[0]*p,a[1]=n[1]*p,a[2]=n[2]*p,a[3]=n[3]*p,a[4]=n[4]*v,a[5]=n[5]*v,a[6]=n[6]*v,a[7]=n[7]*v,a[8]=n[8]*E,a[9]=n[9]*E,a[10]=n[10]*E,a[11]=n[11]*E,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function ih(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[4],M=n[5],R=n[6],Y=n[7],j=n[8],ee=n[9],se=n[10],ce=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=E*v+j*p,a[5]=M*v+ee*p,a[6]=R*v+se*p,a[7]=Y*v+ce*p,a[8]=j*v-E*p,a[9]=ee*v-M*p,a[10]=se*v-R*p,a[11]=ce*v-Y*p,a}function _d(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[0],M=n[1],R=n[2],Y=n[3],j=n[8],ee=n[9],se=n[10],ce=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=E*v-j*p,a[1]=M*v-ee*p,a[2]=R*v-se*p,a[3]=Y*v-ce*p,a[8]=E*p+j*v,a[9]=M*p+ee*v,a[10]=R*p+se*v,a[11]=Y*p+ce*v,a}function Lf(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function vp(a,n,u){var p,v,E,M=u[0],R=u[1],Y=u[2],j=Math.hypot(M,R,Y);return j<Pc?null:(M*=j=1/j,R*=j,Y*=j,p=Math.sin(n),v=Math.cos(n),a[0]=M*M*(E=1-v)+v,a[1]=R*M*E+Y*p,a[2]=Y*M*E-R*p,a[3]=0,a[4]=M*R*E-Y*p,a[5]=R*R*E+v,a[6]=Y*R*E+M*p,a[7]=0,a[8]=M*Y*E+R*p,a[9]=R*Y*E-M*p,a[10]=Y*Y*E+v,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Of=Ta;function Rh(){var a=new qo(3);return qo!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function _p(a){var n=new qo(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}function yd(a){return Math.hypot(a[0],a[1],a[2])}function Kc(a,n,u){var p=new qo(3);return p[0]=a,p[1]=n,p[2]=u,p}function Jc(a,n,u){return a[0]=n[0]+u[0],a[1]=n[1]+u[1],a[2]=n[2]+u[2],a}function nh(a,n,u){return a[0]=n[0]-u[0],a[1]=n[1]-u[1],a[2]=n[2]-u[2],a}function bd(a,n,u){return a[0]=n[0]*u[0],a[1]=n[1]*u[1],a[2]=n[2]*u[2],a}function Mo(a,n,u){return a[0]=Math.min(n[0],u[0]),a[1]=Math.min(n[1],u[1]),a[2]=Math.min(n[2],u[2]),a}function Su(a,n,u){return a[0]=Math.max(n[0],u[0]),a[1]=Math.max(n[1],u[1]),a[2]=Math.max(n[2],u[2]),a}function ll(a,n,u){return a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a}function Qc(a,n,u,p){return a[0]=n[0]+u[0]*p,a[1]=n[1]+u[1]*p,a[2]=n[2]+u[2]*p,a}function js(a,n){var u=n[0],p=n[1],v=n[2],E=u*u+p*p+v*v;return E>0&&(E=1/Math.sqrt(E)),a[0]=n[0]*E,a[1]=n[1]*E,a[2]=n[2]*E,a}function cl(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function xd(a,n,u){var p=n[0],v=n[1],E=n[2],M=u[0],R=u[1],Y=u[2];return a[0]=v*Y-E*R,a[1]=E*M-p*Y,a[2]=p*R-v*M,a}function pr(a,n,u){var p=n[0],v=n[1],E=n[2],M=u[3]*p+u[7]*v+u[11]*E+u[15];return a[0]=(u[0]*p+u[4]*v+u[8]*E+u[12])/(M=M||1),a[1]=(u[1]*p+u[5]*v+u[9]*E+u[13])/M,a[2]=(u[2]*p+u[6]*v+u[10]*E+u[14])/M,a}function Pf(a,n,u){var p=u[0],v=u[1],E=u[2],M=n[0],R=n[1],Y=n[2],j=v*Y-E*R,ee=E*M-p*Y,se=p*R-v*M,ce=v*se-E*ee,ve=E*j-p*se,be=p*ee-v*j,Me=2*u[3];return ee*=Me,se*=Me,ve*=2,be*=2,a[0]=M+(j*=Me)+(ce*=2),a[1]=R+ee+ve,a[2]=Y+se+be,a}var rh,Yo=nh,yp=bd,bp=yd;function xp(a,n,u){return a[0]=n[0]*u,a[1]=n[1]*u,a[2]=n[2]*u,a[3]=n[3]*u,a}function Rf(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],M=u*u+p*p+v*v+E*E;return M>0&&(M=1/Math.sqrt(M)),a[0]=u*M,a[1]=p*M,a[2]=v*M,a[3]=E*M,a}function Tu(a,n,u){var p=n[0],v=n[1],E=n[2],M=n[3];return a[0]=u[0]*p+u[4]*v+u[8]*E+u[12]*M,a[1]=u[1]*p+u[5]*v+u[9]*E+u[13]*M,a[2]=u[2]*p+u[6]*v+u[10]*E+u[14]*M,a[3]=u[3]*p+u[7]*v+u[11]*E+u[15]*M,a}function ka(){var a=new qo(4);return qo!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function zf(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function Ff(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],M=n[3],R=Math.sin(u),Y=Math.cos(u);return a[0]=p*Y+M*R,a[1]=v*Y+E*R,a[2]=E*Y-v*R,a[3]=M*Y-p*R,a}function wd(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],M=n[3],R=Math.sin(u),Y=Math.cos(u);return a[0]=p*Y-E*R,a[1]=v*Y+M*R,a[2]=E*Y+p*R,a[3]=M*Y-v*R,a}Rh(),rh=new qo(4),qo!=Float32Array&&(rh[0]=0,rh[1]=0,rh[2]=0,rh[3]=0);var Bf=Rf;Rh(),Kc(1,0,0),Kc(0,1,0),ka(),ka(),qc();const ag=Jt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:wp}=ag,Nf=Jt([{name:"a_pos_3",components:3,type:"Int16"}]);var jl=Jt([{name:"a_pos",type:"Int16",components:2}]);class Cp{constructor(n,u){this.pos=n,this.dir=u}intersectsPlane(n,u,p){const v=cl(u,this.dir);if(Math.abs(v)<1e-6)return!1;const E=((n[0]-this.pos[0])*u[0]+(n[1]-this.pos[1])*u[1]+(n[2]-this.pos[2])*u[2])/v;return p[0]=this.pos[0]+this.dir[0]*E,p[1]=this.pos[1]+this.dir[1]*E,p[2]=this.pos[2]+this.dir[2]*E,!0}closestPointOnSphere(n,u,p){if(Me=(ve=this.pos)[0],Xe=ve[1],ut=ve[2],Lt=(be=n)[0],ht=be[1],At=be[2],Math.abs(Me-Lt)<=Pc*Math.max(1,Math.abs(Me),Math.abs(Lt))&&Math.abs(Xe-ht)<=Pc*Math.max(1,Math.abs(Xe),Math.abs(ht))&&Math.abs(ut-At)<=Pc*Math.max(1,Math.abs(ut),Math.abs(At))||0===u)return p[0]=p[1]=p[2]=0,!1;var ve,be,Me,Xe,ut,Lt,ht,At;const[v,E,M]=this.dir,R=this.pos[0]-n[0],Y=this.pos[1]-n[1],j=this.pos[2]-n[2],ee=v*v+E*E+M*M,se=2*(R*v+Y*E+j*M),ce=se*se-4*ee*(R*R+Y*Y+j*j-u*u);if(ce<0){const ve=Math.max(-se/2,0),be=R+v*ve,Me=Y+E*ve,Xe=j+M*ve,ut=Math.hypot(be,Me,Xe);return p[0]=be*u/ut,p[1]=Me*u/ut,p[2]=Xe*u/ut,!1}{const ve=(-se-Math.sqrt(ce))/(2*ee);if(ve<0){const be=Math.hypot(R,Y,j);return p[0]=R*u/be,p[1]=Y*u/be,p[2]=j*u/be,!1}return p[0]=R+v*ve,p[1]=Y+E*ve,p[2]=j+M*ve,!0}}}class sh{constructor(n,u,p,v,E){this.TL=n,this.TR=u,this.BR=p,this.BL=v,this.horizon=E}static fromInvProjectionMatrix(n,u,p){const v=[-1,1,1],E=[1,1,1],M=[1,-1,1],R=[-1,-1,1],Y=pr(v,v,n),j=pr(E,E,n),ee=pr(M,M,n),se=pr(R,R,n);return new sh(Y,j,ee,se,u/p)}}class qu{constructor(n,u){this.points=n,this.planes=u}static fromInvProjectionMatrix(n,u,p,v){const E=Math.pow(2,p),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Y=>{const j=Tu([],Y,n),ee=1/j[3]/u*E;return(se=j)[0]=(ce=j)[0]*(ve=[ee,ee,v?1/j[3]:ee,ee])[0],se[1]=ce[1]*ve[1],se[2]=ce[2]*ve[2],se[3]=ce[3]*ve[3],se;var se,ce,ve}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Y=>{const j=js([],xd([],Yo([],M[Y[0]],M[Y[1]]),Yo([],M[Y[2]],M[Y[1]]))),ee=-cl(j,M[Y[1]]);return j.concat(ee)});return new qu(M,R)}}class Zs{static fromPoints(n){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const v of n)Mo(u,u,v),Su(p,p,v);return new Zs(u,p)}static applyTransform(n,u){const p=n.getCorners();for(let v=0;v<p.length;++v)pr(p[v],p[v],u);return Zs.fromPoints(p)}constructor(n,u){this.min=n,this.max=u,this.center=ll([],Jc([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],p=_p(this.min),v=_p(this.max);for(let E=0;E<u.length;E++)p[E]=u[E]?this.min[E]:this.center[E],v[E]=u[E]?this.center[E]:this.max[E];return v[2]=this.max[2],new Zs(p,v)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,u=this.max;return[[n[0],n[1],n[2]],[u[0],n[1],n[2]],[u[0],u[1],n[2]],[n[0],u[1],n[2]],[n[0],n[1],u[2]],[u[0],n[1],u[2]],[u[0],u[1],u[2]],[n[0],u[1],u[2]]]}intersects(n){const u=this.getCorners();let p=!0;for(let v=0;v<n.planes.length;v++){const E=n.planes[v];let M=0;for(let R=0;R<u.length;R++)M+=cl(E,u[R])+E[3]>=0;if(0===M)return 0;M!==u.length&&(p=!1)}if(p)return 2;for(let v=0;v<3;v++){let E=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let R=0;R<n.points.length;R++){const Y=n.points[R][v]-this.min[v];E=Math.min(E,Y),M=Math.max(M,Y)}if(M<0||E>this.max[v]-this.min[v])return 0}return 1}}const Ep=5,Sp=6,Ul=An/Math.PI/2,lg=16383,oh=[64,32,16],$l=-Ul,Aa=Ul,Yf=[new Zs([$l,$l,$l],[Aa,Aa,Aa]),new Zs([$l,$l,$l],[0,0,Aa]),new Zs([0,$l,$l],[Aa,0,Aa]),new Zs([$l,0,$l],[0,Aa,Aa]),new Zs([0,0,$l],[Aa,Aa,Aa])];function Cd(a){return a*Ul/Au}function Hf(a,n,u,p=!0){const v=ll([],a._camera.position,a.worldSize),E=[n,u,1,1];Tu(E,E,a.pixelMatrixInverse),xp(E,E,1/E[3]);const M=js([],Yo([],E,v)),R=a.globeMatrix,Y=[R[12],R[13],R[14]],j=Yo([],Y,v),ee=yd(j),se=js([],j),ce=a.worldSize/(2*Math.PI),ve=cl(se,M),be=Math.asin(ce/ee);if(be<Math.acos(ve)){if(!p)return null;const nn=[],Ci=[];ll(nn,M,ee/ve),js(Ci,Yo(Ci,nn,j)),js(M,Jc(M,j,ll(M,Ci,Math.tan(be)*ee)))}const Me=[];new Cp(v,M).closestPointOnSphere(Y,ce,Me);const Xe=js([],mn(R,0)),ut=js([],mn(R,1)),Lt=js([],mn(R,2)),ht=cl(Xe,Me),At=cl(ut,Me),Nt=cl(Lt,Me),Bt=dt(Math.asin(-At/ce));let bi=dt(Math.atan2(ht,Nt));bi=a.center.lng+function(nn,Ci){const Ni=(Ci-nn+180)%360-180;return Ni<-180?Ni+360:Ni}(a.center.lng,bi);const hi=gc(bi),Oi=vi(zc(Bt),0,1);return new Ju(hi,Oi)}class Ku{constructor(n,u,p){this.a=Yo([],n,p),this.b=Yo([],u,p),this.center=p;const v=js([],this.a),E=js([],this.b);this.angle=Math.acos(cl(v,E))}}function Tp(a,n){if(0===a.angle)return null;let u;return u=0===a.a[n]?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[n]/a.a[n]/Math.sin(a.angle)-1/Math.tan(a.angle)),u<0||u>1?null:function(p,v,E,M){const R=Math.sin(E);return p*(Math.sin((1-M)*E)/R)+v*(Math.sin(M*E)/R)}(a.a[n],a.b[n],a.angle,vi(u,0,1))+a.center[n]}function Tl(a){if(a.z<=1)return Yf[a.z+2*a.y+a.x];const n=ah(Ed(a));return Zs.fromPoints(n)}function ku(a,n,u){return ll(a,a,1-u),Qc(a,a,n,u)}function Vf(a,n){const u=tu(n.zoom);if(0===u)return Tl(a);const p=Ed(a),v=ah(p),E=gc(p.getWest())*n.worldSize,M=gc(p.getEast())*n.worldSize,R=zc(p.getNorth())*n.worldSize,Y=zc(p.getSouth())*n.worldSize,j=[E,R,0],ee=[M,R,0],se=[E,Y,0],ce=[M,Y,0],ve=th([],n.globeMatrix);return pr(j,j,ve),pr(ee,ee,ve),pr(se,se,ve),pr(ce,ce,ve),v[0]=ku(v[0],se,u),v[1]=ku(v[1],ce,u),v[2]=ku(v[2],ee,u),v[3]=ku(v[3],j,u),Zs.fromPoints(v)}function kp(a,n,u){for(const p of a)pr(p,p,n),ll(p,p,u)}function Ed({x:a,y:n,z:u}){const p=1/(1<<u),v=new fs(kl(a*p),Ko((n+1)*p)),E=new fs(kl((a+1)*p),Ko(n*p));return new ki(v,E)}function ah(a){const n=Vt(a.getNorth()),u=Vt(a.getSouth()),p=Math.cos(n),v=Math.cos(u),E=Math.sin(n),M=Math.sin(u),R=a.getWest(),Y=a.getEast();return[Sd(v,M,R),Sd(v,M,Y),Sd(p,E,Y),Sd(p,E,R)]}function Sd(a,n,u,p=Ul){return u=Vt(u),[a*Math.sin(u)*p,-n*p,a*Math.cos(u)*p]}function Td(a,n,u){return Sd(Math.cos(Vt(a)),Math.sin(Vt(a)),n,u)}function eu(a,n,u,p){const v=1<<u.z,E=(a/An+u.x)/v;return Td(Ko((n/An+u.y)/v),kl(E),p)}function kd({min:a,max:n}){return lg/Math.max(n[0]-a[0],n[1]-a[1],n[2]-a[2])}const zh=new Float64Array(16);function lh(a){const n=kd(a),u=Lf(zh,[n,n,n]);return vd(u,u,((p=[])[0]=-(v=a.min)[0],p[1]=-v[1],p[2]=-v[2],p));var p,v}function ul(a){const n=(p=a.min,(u=zh)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=p[0],u[13]=p[1],u[14]=p[2],u[15]=1,u);var u,p;const v=1/kd(a);return Rc(n,n,[v,v,v])}function Fh(a,n,u,p,v){const E=function(Y){const j=An/(2*Math.PI);return Y/(2*Math.PI)/j}(u),M=[a,n,-u/(2*Math.PI)],R=Sl(new Float64Array(16));return vd(R,R,M),Rc(R,R,[E,E,E]),ih(R,R,Vt(-v)),_d(R,R,Vt(-p)),R}function tu(a){return Ei(Ep,Sp,a)}function jf(a,n){const u=Td(n.lat,n.lng);return M=(v=nh([],function(be){const Me=Td(be._center.lat,be._center.lng);let Xe=xd([],Kc(0,1,0),Me);const ut=vp([],-be.angle,Me);Xe=pr(Xe,Xe,ut),vp(ut,-be._pitch,Xe);const Lt=js([],Me);return ll(Lt,Lt,Cd(be.cameraToCenterDistance/be.pixelsPerMeter)),pr(Lt,Lt,ut),Jc([],Me,Lt)}(a),u))[0],R=v[1],Y=v[2],j=(E=u)[0],ee=E[1],se=E[2],ve=(ce=Math.sqrt(M*M+R*R+Y*Y)*Math.sqrt(j*j+ee*ee+se*se))&&cl(v,E)/ce,Math.acos(Math.min(Math.max(ve,-1),1));var v,E,M,R,Y,j,ee,se,ce,ve}function Ap(a,n){return jf(a,n)>Math.PI/2*1.01}const Mp=Vt(85),Bh=Math.cos(Mp),cg=Math.sin(Mp),Au=6371008.8,Dp=2*Math.PI*Au;class Mu{constructor(n,u){if(isNaN(n)||isNaN(u))throw new Error(`Invalid LngLat object: (${n}, ${u})`);if(this.lng=+n,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mu(Fi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const u=Math.PI/180,p=this.lat*u,v=n.lat*u,E=Math.sin(p)*Math.sin(v)+Math.cos(p)*Math.cos(v)*Math.cos((n.lng-this.lng)*u);return Au*Math.acos(Math.min(E,1))}toBounds(n=0){const u=360*n/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new ki(new Mu(this.lng-p,this.lat-u),new Mu(this.lng+p,this.lat+u))}toEcef(n){const u=Cd(n);return Td(this.lat,this.lng,Ul+u)}static convert(n){if(n instanceof Mu)return n;if(Array.isArray(n)&&(2===n.length||3===n.length))return new Mu(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&"object"==typeof n&&null!==n)return new Mu(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var fs=Mu;function Nh(a){return Dp*Math.cos(a*Math.PI/180)}function gc(a){return(180+a)/360}function zc(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function vc(a,n){return a/Nh(n)}function kl(a){return 360*a-180}function Ko(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Ip(a,n){return a*Nh(Ko(n))}const Ho=85.051129;function Uf(a){return 1/Math.cos(a*Math.PI/180)}class Ju{constructor(n,u,p=0){this.x=+n,this.y=+u,this.z=+p}static fromLngLat(n,u=0){const p=fs.convert(n);return new Ju(gc(p.lng),zc(p.lat),vc(u,p.lat))}toLngLat(){return new fs(kl(this.x),Ko(this.y))}toAltitude(){return Ip(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Dp*Uf(Ko(this.y))}}function Yh(a,n,u,p,v,E,M,R,Y){const j=(n+p)/2,ee=(u+v)/2,se=new at(j,ee);R(se),function(ce,ve,be,Me,Xe,ut){const Lt=be-Xe,ht=Me-ut;return Math.abs((Me-ve)*Lt-(be-ce)*ht)/Math.hypot(Lt,ht)}(se.x,se.y,E.x,E.y,M.x,M.y)>=Y?(Yh(a,n,u,j,ee,E,se,R,Y),Yh(a,j,ee,p,v,se,M,R,Y)):a.push(M)}function Wf(a,n,u){let p=a[0],v=p.x,E=p.y;n(p);const M=[p];for(let R=1;R<a.length;R++){const Y=a[R],{x:j,y:ee}=Y;n(Y),Yh(M,v,E,j,ee,p,Y,n,u),v=j,E=ee,p=Y}return M}function Lp(a,n,u,p){if(p(n,u)){const v=n.add(u)._mult(.5);Lp(a,n,v,p),Lp(a,v,u,p)}else a.push(u)}function Hh(a,n){let u=a[0];const p=[u];for(let v=1;v<a.length;v++){const E=a[v];Lp(p,u,E,n),u=E}return p}const Op=Math.pow(2,14)-1,$f=-Op-1;function ug(a,n){const u=Math.round(a.x*n),p=Math.round(a.y*n);return a.x=vi(u,$f,Op),a.y=vi(p,$f,Op),(u<a.x||u>a.x+1||p<a.y||p>a.y+1)&&xn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Du(a,n,u){const p=a.loadGeometry(),v=a.extent,E=An/v;if(n&&u&&u.projection.isReprojectedInTileSpace){const M=1<<n.z,{scale:R,x:Y,y:j,projection:ee}=u,se=ce=>{const ve=kl((n.x+ce.x/v)/M),be=Ko((n.y+ce.y/v)/M),Me=ee.project(ve,be);ce.x=(Me.x*R-Y)*v,ce.y=(Me.y*R-j)*v};for(let ce=0;ce<p.length;ce++)if(1!==a.type)p[ce]=Wf(p[ce],se,1);else{const ve=[];for(const be of p[ce])be.x<0||be.x>=v||be.y<0||be.y>=v||(se(be),ve.push(be));p[ce]=ve}}for(const M of p)for(const R of M)ug(R,E);return p}function Wa(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Du(a):[]}}function Ad(a,n,u,p,v){a.emplaceBack(2*n+(p+1)/2,2*u+(v+1)/2)}function ch(a,n,u){a.emplaceBack(n.x,n.y,n.z,16384*u[0],16384*u[1],16384*u[2])}class Md{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new Qi,this.indexArray=new Vn,this.segments=new Hs,this.programConfigurations=new Eu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,p,v){const E=this.layers[0],M=[];let R=null;"circle"===E.type&&(R=E.layout.get("circle-sort-key"));for(const{feature:j,id:ee,index:se,sourceLayerIndex:ce}of n){const ve=this.layers[0]._featureFilter.needGeometry,be=Wa(j,ve);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),be,p))continue;const Me=R?R.evaluate(be,{},p):void 0,Xe={id:ee,properties:j.properties,type:j.type,sourceLayerIndex:ce,index:se,geometry:ve?be.geometry:Du(j,p,v),patterns:{},sortKey:Me};M.push(Xe)}R&&M.sort((j,ee)=>j.sortKey-ee.sortKey);let Y=null;"globe"===v.projection.name&&(this.globeExtVertexArray=new rn,Y=v.projection);for(const j of M){const{geometry:ee,index:se,sourceLayerIndex:ce}=j,ve=n[se].feature;this.addFeature(j,ee,se,u.availableImages,p,Y),u.featureIndex.insert(ve,ee,se,ce,this.index)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,eh.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,If.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,u,p,v,E,M){for(const R of u)for(const Y of R){const j=Y.x,ee=Y.y;if(j<0||j>=An||ee<0||ee>=An)continue;if(M){const ve=M.projectTilePoint(j,ee,E),be=M.upVector(E,j,ee),Me=this.globeExtVertexArray;ch(Me,ve,be),ch(Me,ve,be),ch(Me,ve,be),ch(Me,ve,be)}const se=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),ce=se.vertexLength;Ad(this.layoutVertexArray,j,ee,-1,-1),Ad(this.layoutVertexArray,j,ee,1,-1),Ad(this.layoutVertexArray,j,ee,1,1),Ad(this.layoutVertexArray,j,ee,-1,1),this.indexArray.emplaceBack(ce,ce+1,ce+2),this.indexArray.emplaceBack(ce,ce+2,ce+3),se.vertexLength+=4,se.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,{},v,E)}}function lo(a,n){for(let u=0;u<a.length;u++)if(Qu(n,a[u]))return!0;for(let u=0;u<n.length;u++)if(Qu(a,n[u]))return!0;return!!Iu(a,n)}function Dd(a,n,u){return!!Qu(a,n)||!!Vh(n,a,u)}function Id(a,n){if(1===a.length)return Gh(n,a[0]);for(let u=0;u<n.length;u++){const p=n[u];for(let v=0;v<p.length;v++)if(Qu(a,p[v]))return!0}for(let u=0;u<a.length;u++)if(Gh(n,a[u]))return!0;for(let u=0;u<n.length;u++)if(Iu(a,n[u]))return!0;return!1}function dg(a,n,u){if(a.length>1){if(Iu(a,n))return!0;for(let p=0;p<n.length;p++)if(Vh(n[p],a,u))return!0}for(let p=0;p<a.length;p++)if(Vh(a[p],n,u))return!0;return!1}function Iu(a,n){if(0===a.length||0===n.length)return!1;for(let u=0;u<a.length-1;u++){const p=a[u],v=a[u+1];for(let E=0;E<n.length-1;E++)if(io(p,v,n[E],n[E+1]))return!0}return!1}function io(a,n,u,p){return en(a,u,p)!==en(n,u,p)&&en(a,n,u)!==en(a,n,p)}function Vh(a,n,u){const p=u*u;if(1===n.length)return a.distSqr(n[0])<p;for(let v=1;v<n.length;v++)if(iu(a,n[v-1],n[v])<p)return!0;return!1}function iu(a,n,u){const p=n.distSqr(u);if(0===p)return a.distSqr(n);const v=((a.x-n.x)*(u.x-n.x)+(a.y-n.y)*(u.y-n.y))/p;return a.distSqr(v<0?n:v>1?u:u.sub(n)._mult(v)._add(n))}function Gh(a,n){let u,p,v,E=!1;for(let M=0;M<a.length;M++){u=a[M];for(let R=0,Y=u.length-1;R<u.length;Y=R++)p=u[R],v=u[Y],p.y>n.y!=v.y>n.y&&n.x<(v.x-p.x)*(n.y-p.y)/(v.y-p.y)+p.x&&(E=!E)}return E}function Qu(a,n){let u=!1;for(let p=0,v=a.length-1;p<a.length;v=p++){const E=a[p],M=a[v];E.y>n.y!=M.y>n.y&&n.x<(M.x-E.x)*(n.y-E.y)/(M.y-E.y)+E.x&&(u=!u)}return u}function uh(a,n,u,p,v){for(const M of a)if(n<=M.x&&u<=M.y&&p>=M.x&&v>=M.y)return!0;const E=[new at(n,u),new at(n,v),new at(p,v),new at(p,u)];if(a.length>2)for(const M of E)if(Qu(a,M))return!0;for(let M=0;M<a.length-1;M++)if(Fc(a[M],a[M+1],E))return!0;return!1}function Fc(a,n,u){const p=u[0],v=u[2];if(a.x<p.x&&n.x<p.x||a.x>v.x&&n.x>v.x||a.y<p.y&&n.y<p.y||a.y>v.y&&n.y>v.y)return!1;const E=en(a,n,u[0]);return E!==en(a,n,u[1])||E!==en(a,n,u[2])||E!==en(a,n,u[3])}function _c(a,n,u){const p=n.paint.get(a).value;return"constant"===p.kind?p.value:u.programConfigurations.get(n.id).getMaxValue(a)}function ed(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function dh(a,n,u,p,v){if(!n[0]&&!n[1])return a;const E=at.convert(n)._mult(v);"viewport"===u&&E._rotate(-p);const M=[];for(let R=0;R<a.length;R++)M.push(a[R].sub(E));return M}function Xf(a,n,u,p){const v=at.convert(a)._mult(p);return"viewport"===n&&v._rotate(-u),v}Tn(Md,"CircleBucket",{omit:["layers"]});const Zf=new xt({"circle-sort-key":new Ge(I.layout_circle["circle-sort-key"])});var qf={paint:new xt({"circle-radius":new Ge(I.paint_circle["circle-radius"]),"circle-color":new Ge(I.paint_circle["circle-color"]),"circle-blur":new Ge(I.paint_circle["circle-blur"]),"circle-opacity":new Ge(I.paint_circle["circle-opacity"]),"circle-translate":new Te(I.paint_circle["circle-translate"]),"circle-translate-anchor":new Te(I.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Te(I.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Te(I.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ge(I.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ge(I.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ge(I.paint_circle["circle-stroke-opacity"])}),layout:Zf};function Pp(a,n,u,p,v,E,M,R,Y){if(E&&a.queryGeometry.isAboveHorizon)return!1;E&&(Y*=a.pixelToTileUnitsFactor);const j=a.tileID.canonical,ee=u.projection.upVectorScale(j,u.center.lat,u.worldSize).metersToTile;for(const se of n)for(const ce of se){const ve=ce.add(R),be=v&&u.elevation?u.elevation.exaggeration()*v.getElevationAt(ve.x,ve.y,!0):0,Me=u.projection.projectTilePoint(ve.x,ve.y,j);if(be>0){const ht=u.projection.upVector(j,ve.x,ve.y);Me.x+=ht[0]*ee*be,Me.y+=ht[1]*ee*be,Me.z+=ht[2]*ee*be}const Xe=E?ve:Ld(Me.x,Me.y,Me.z,p),ut=E?a.tilespaceRays.map(ht=>jh(ht,be)):a.queryGeometry.screenGeometry,Lt=Tu([],[Me.x,Me.y,Me.z,1],p);if(!M&&E?Y*=Lt[3]/u.cameraToCenterDistance:M&&!E&&(Y*=u.cameraToCenterDistance/Lt[3]),E){const ht=Ko((ce.y/An+j.y)/(1<<j.z));Y/=u.projection.pixelsPerMeter(ht,1)/vc(1,ht)}if(Dd(ut,Xe,Y))return!0}return!1}function Ld(a,n,u,p){const v=Tu([],[a,n,u,1],p);return new at(v[0]/v[3],v[1]/v[3])}const yc=Kc(0,0,0),Rp=Kc(0,0,1);function jh(a,n){const u=Rh();return yc[2]=n,a.intersectsPlane(yc,Rp,u),new at(u[0],u[1])}class Uh extends Md{}function Kf(a,{width:n,height:u},p,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==n*u*p)throw new RangeError("mismatched image size")}else v=new Uint8Array(n*u*p);return a.width=n,a.height=u,a.data=v,a}function Jf(a,n,u){const{width:p,height:v}=n;p===a.width&&v===a.height||(zp(a,n,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,p),height:Math.min(a.height,v)},u),a.width=p,a.height=v,a.data=n.data)}function zp(a,n,u,p,v,E){if(0===v.width||0===v.height)return n;if(v.width>a.width||v.height>a.height||u.x>a.width-v.width||u.y>a.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>n.width||v.height>n.height||p.x>n.width-v.width||p.y>n.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const M=a.data,R=n.data;for(let Y=0;Y<v.height;Y++){const j=((u.y+Y)*a.width+u.x)*E,ee=((p.y+Y)*n.width+p.x)*E;for(let se=0;se<v.width*E;se++)R[ee+se]=M[j+se]}return n}Tn(Uh,"HeatmapBucket",{omit:["layers"]});class nu{constructor(n,u){Kf(this,n,1,u)}resize(n){Jf(this,new nu(n),1)}clone(){return new nu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,p,v,E){zp(n,u,p,v,E,1)}}class $a{constructor(n,u){Kf(this,n,4,u)}resize(n){Jf(this,new $a(n),4)}replace(n,u){u?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new $a({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,p,v,E){zp(n,u,p,v,E,4)}}Tn(nu,"AlphaImage"),Tn($a,"RGBAImage");var hg={paint:new xt({"heatmap-radius":new Ge(I.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ge(I.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Te(I.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bt(I.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Te(I.paint_heatmap["heatmap-opacity"])})};function Wh(a){const n={},u=a.resolution||256,p=a.clips?a.clips.length:1,v=a.image||new $a({width:u,height:p}),E=(M,R,Y)=>{n[a.evaluationKey]=Y;const j=a.expression.evaluate(n);v.data[M+R+0]=Math.floor(255*j.r/j.a),v.data[M+R+1]=Math.floor(255*j.g/j.a),v.data[M+R+2]=Math.floor(255*j.b/j.a),v.data[M+R+3]=Math.floor(255*j.a)};if(a.clips)for(let M=0,R=0;M<p;++M,R+=4*u)for(let Y=0,j=0;Y<u;Y++,j+=4){const ee=Y/(u-1),{start:se,end:ce}=a.clips[M];E(R,j,se*(1-ee)+ce*ee)}else for(let M=0,R=0;M<u;M++,R+=4)E(0,R,M/(u-1));return v}var Qf={paint:new xt({"hillshade-illumination-direction":new Te(I.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Te(I.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Te(I.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Te(I.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Te(I.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Te(I.paint_hillshade["hillshade-accent-color"])})};const em=Jt([{name:"a_pos",components:2,type:"Int16"}],4),{members:pg}=em;var Od={exports:{}};function Pd(a,n,u){u=u||2;var p,v,E,M,R,Y,j,ee=n&&n.length,se=ee?n[0]*u:a.length,ce=td(a,0,se,u,!0),ve=[];if(!ce||ce.next===ce.prev)return ve;if(ee&&(ce=function(Me,Xe,ut,Lt){var ht,At,Nt,Bt=[];for(ht=0,At=Xe.length;ht<At;ht++)(Nt=td(Me,Xe[ht]*Lt,ht<At-1?Xe[ht+1]*Lt:Me.length,Lt,!1))===Nt.next&&(Nt.steiner=!0),Bt.push(Mv(Nt));for(Bt.sort(ph),ht=0;ht<Bt.length;ht++)ut=im(Bt[ht],ut);return ut}(a,n,ce,u)),a.length>80*u){p=E=a[0],v=M=a[1];for(var be=u;be<se;be+=u)(R=a[be])<p&&(p=R),(Y=a[be+1])<v&&(v=Y),R>E&&(E=R),Y>M&&(M=Y);j=0!==(j=Math.max(E-p,M-v))?32767/j:0}return hh(ce,ve,u,p,v,j,0),ve}function td(a,n,u,p,v){var E,M;if(v===rd(a,n,u,p)>0)for(E=n;E<u;E+=p)M=nm(E,a[E],a[E+1],M);else for(E=u-p;E>=n;E-=p)M=nm(E,a[E],a[E+1],M);return M&&Lu(M,M.next)&&(nd(M),M=M.next),M}function ru(a,n){if(!a)return a;n||(n=a);var u,p=a;do{if(u=!1,p.steiner||!Lu(p,p.next)&&0!==Rs(p.prev,p,p.next))p=p.next;else{if(nd(p),(p=n=p.prev)===p.next)break;u=!0}}while(u||p!==n);return n}function hh(a,n,u,p,v,E,M){if(a){!M&&E&&function(ee,se,ce,ve){var be=ee;do{0===be.z&&(be.z=$h(be.x,be.y,se,ce,ve)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next}while(be!==ee);be.prevZ.nextZ=null,be.prevZ=null,function(Me){var Xe,ut,Lt,ht,At,Nt,Bt,bi,hi=1;do{for(ut=Me,Me=null,At=null,Nt=0;ut;){for(Nt++,Lt=ut,Bt=0,Xe=0;Xe<hi&&(Bt++,Lt=Lt.nextZ);Xe++);for(bi=hi;Bt>0||bi>0&&Lt;)0!==Bt&&(0===bi||!Lt||ut.z<=Lt.z)?(ht=ut,ut=ut.nextZ,Bt--):(ht=Lt,Lt=Lt.nextZ,bi--),At?At.nextZ=ht:Me=ht,ht.prevZ=At,At=ht;ut=Lt}At.nextZ=null,hi*=2}while(Nt>1)}(be)}(a,p,v,E);for(var R,Y,j=a;a.prev!==a.next;)if(R=a.prev,Y=a.next,E?Rd(a,p,v,E):tm(a))n.push(R.i/u|0),n.push(a.i/u|0),n.push(Y.i/u|0),nd(a),a=Y.next,j=Y.next;else if((a=Y)===j){M?1===M?hh(a=fg(ru(a),n,u),n,u,p,v,E,2):2===M&&Fp(a,n,u,p,v,E):hh(ru(a),n,u,p,v,E,1);break}}}function tm(a){var n=a.prev,u=a,p=a.next;if(Rs(n,u,p)>=0)return!1;for(var v=n.x,E=u.x,M=p.x,R=n.y,Y=u.y,j=p.y,ee=v<E?v<M?v:M:E<M?E:M,se=R<Y?R<j?R:j:Y<j?Y:j,ce=v>E?v>M?v:M:E>M?E:M,ve=R>Y?R>j?R:j:Y>j?Y:j,be=p.next;be!==n;){if(be.x>=ee&&be.x<=ce&&be.y>=se&&be.y<=ve&&zd(v,R,E,Y,M,j,be.x,be.y)&&Rs(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function Rd(a,n,u,p){var v=a.prev,E=a,M=a.next;if(Rs(v,E,M)>=0)return!1;for(var R=v.x,Y=E.x,j=M.x,ee=v.y,se=E.y,ce=M.y,ve=R<Y?R<j?R:j:Y<j?Y:j,be=ee<se?ee<ce?ee:ce:se<ce?se:ce,Me=R>Y?R>j?R:j:Y>j?Y:j,Xe=ee>se?ee>ce?ee:ce:se>ce?se:ce,ut=$h(ve,be,n,u,p),Lt=$h(Me,Xe,n,u,p),ht=a.prevZ,At=a.nextZ;ht&&ht.z>=ut&&At&&At.z<=Lt;){if(ht.x>=ve&&ht.x<=Me&&ht.y>=be&&ht.y<=Xe&&ht!==v&&ht!==M&&zd(R,ee,Y,se,j,ce,ht.x,ht.y)&&Rs(ht.prev,ht,ht.next)>=0||(ht=ht.prevZ,At.x>=ve&&At.x<=Me&&At.y>=be&&At.y<=Xe&&At!==v&&At!==M&&zd(R,ee,Y,se,j,ce,At.x,At.y)&&Rs(At.prev,At,At.next)>=0))return!1;At=At.nextZ}for(;ht&&ht.z>=ut;){if(ht.x>=ve&&ht.x<=Me&&ht.y>=be&&ht.y<=Xe&&ht!==v&&ht!==M&&zd(R,ee,Y,se,j,ce,ht.x,ht.y)&&Rs(ht.prev,ht,ht.next)>=0)return!1;ht=ht.prevZ}for(;At&&At.z<=Lt;){if(At.x>=ve&&At.x<=Me&&At.y>=be&&At.y<=Xe&&At!==v&&At!==M&&zd(R,ee,Y,se,j,ce,At.x,At.y)&&Rs(At.prev,At,At.next)>=0)return!1;At=At.nextZ}return!0}function fg(a,n,u){var p=a;do{var v=p.prev,E=p.next.next;!Lu(v,E)&&Bp(v,p,p.next,E)&&Al(v,E)&&Al(E,v)&&(n.push(v.i/u|0),n.push(p.i/u|0),n.push(E.i/u|0),nd(p),nd(p.next),p=a=E),p=p.next}while(p!==a);return ru(p)}function Fp(a,n,u,p,v,E){var M=a;do{for(var R=M.next.next;R!==M.prev;){if(M.i!==R.i&&gg(M,R)){var Y=vg(M,R);return M=ru(M,M.next),Y=ru(Y,Y.next),hh(M,n,u,p,v,E,0),void hh(Y,n,u,p,v,E,0)}R=R.next}M=M.next}while(M!==a)}function ph(a,n){return a.x-n.x}function im(a,n){var u=function(v,E){var M,R=E,Y=v.x,j=v.y,ee=-1/0;do{if(j<=R.y&&j>=R.next.y&&R.next.y!==R.y){var se=R.x+(j-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(se<=Y&&se>ee&&(ee=se,M=R.x<R.next.x?R:R.next,se===Y))return M}R=R.next}while(R!==E);if(!M)return null;var ce,ve=M,be=M.x,Me=M.y,Xe=1/0;R=M;do{Y>=R.x&&R.x>=be&&Y!==R.x&&zd(j<Me?Y:ee,j,be,Me,j<Me?ee:Y,j,R.x,R.y)&&(ce=Math.abs(j-R.y)/(Y-R.x),Al(R,v)&&(ce<Xe||ce===Xe&&(R.x>M.x||R.x===M.x&&mg(M,R)))&&(M=R,Xe=ce)),R=R.next}while(R!==ve);return M}(a,n);if(!u)return n;var p=vg(u,a);return ru(p,p.next),ru(u,u.next)}function mg(a,n){return Rs(a.prev,a,n.prev)<0&&Rs(n.next,a,a.next)<0}function $h(a,n,u,p,v){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-u)*v|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-p)*v|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Mv(a){var n=a,u=a;do{(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next}while(n!==a);return u}function zd(a,n,u,p,v,E,M,R){return(v-M)*(n-R)>=(a-M)*(E-R)&&(a-M)*(p-R)>=(u-M)*(n-R)&&(u-M)*(E-R)>=(v-M)*(p-R)}function gg(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(u,p){var v=u;do{if(v.i!==u.i&&v.next.i!==u.i&&v.i!==p.i&&v.next.i!==p.i&&Bp(v,v.next,u,p))return!0;v=v.next}while(v!==u);return!1}(a,n)&&(Al(a,n)&&Al(n,a)&&function(u,p){var v=u,E=!1,M=(u.x+p.x)/2,R=(u.y+p.y)/2;do{v.y>R!=v.next.y>R&&v.next.y!==v.y&&M<(v.next.x-v.x)*(R-v.y)/(v.next.y-v.y)+v.x&&(E=!E),v=v.next}while(v!==u);return E}(a,n)&&(Rs(a.prev,a,n.prev)||Rs(a,n.prev,n))||Lu(a,n)&&Rs(a.prev,a,a.next)>0&&Rs(n.prev,n,n.next)>0)}function Rs(a,n,u){return(n.y-a.y)*(u.x-n.x)-(n.x-a.x)*(u.y-n.y)}function Lu(a,n){return a.x===n.x&&a.y===n.y}function Bp(a,n,u,p){var v=id(Rs(a,n,u)),E=id(Rs(a,n,p)),M=id(Rs(u,p,a)),R=id(Rs(u,p,n));return v!==E&&M!==R||!(0!==v||!Ou(a,u,n))||!(0!==E||!Ou(a,p,n))||!(0!==M||!Ou(u,a,p))||!(0!==R||!Ou(u,n,p))}function Ou(a,n,u){return n.x<=Math.max(a.x,u.x)&&n.x>=Math.min(a.x,u.x)&&n.y<=Math.max(a.y,u.y)&&n.y>=Math.min(a.y,u.y)}function id(a){return a>0?1:a<0?-1:0}function Al(a,n){return Rs(a.prev,a,a.next)<0?Rs(a,n,a.next)>=0&&Rs(a,a.prev,n)>=0:Rs(a,n,a.prev)<0||Rs(a,a.next,n)<0}function vg(a,n){var u=new Pu(a.i,a.x,a.y),p=new Pu(n.i,n.x,n.y),v=a.next,E=n.prev;return a.next=n,n.prev=a,u.next=v,v.prev=u,p.next=u,u.prev=p,E.next=p,p.prev=E,p}function nm(a,n,u,p){var v=new Pu(a,n,u);return p?(v.next=p.next,v.prev=p,p.next.prev=v,p.next=v):(v.prev=v,v.next=v),v}function nd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Pu(a,n,u){this.i=a,this.x=n,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rd(a,n,u,p){for(var v=0,E=n,M=u-p;E<u;E+=p)v+=(a[M]-a[E])*(a[E+1]+a[M+1]),M=E;return v}Od.exports=Pd,Od.exports.default=Pd,Pd.deviation=function(a,n,u,p){var v=n&&n.length,E=Math.abs(rd(a,0,v?n[0]*u:a.length,u));if(v)for(var M=0,R=n.length;M<R;M++)E-=Math.abs(rd(a,n[M]*u,M<R-1?n[M+1]*u:a.length,u));var Y=0;for(M=0;M<p.length;M+=3){var j=p[M]*u,ee=p[M+1]*u,se=p[M+2]*u;Y+=Math.abs((a[j]-a[se])*(a[ee+1]-a[j+1])-(a[j]-a[ee])*(a[se+1]-a[j+1]))}return 0===E&&0===Y?0:Math.abs((Y-E)/E)},Pd.flatten=function(a){for(var n=a[0][0].length,u={vertices:[],holes:[],dimensions:n},p=0,v=0;v<a.length;v++){for(var E=0;E<a[v].length;E++)for(var M=0;M<n;M++)u.vertices.push(a[v][E][M]);v>0&&u.holes.push(p+=a[v-1].length)}return u};var Xh=gt(Od.exports);function rm(a,n,u,p,v){fh(a,n,u||0,p||a.length-1,v||Fd)}function fh(a,n,u,p,v){for(;p>u;){if(p-u>600){var E=p-u+1,M=n-u+1,R=Math.log(E),Y=.5*Math.exp(2*R/3),j=.5*Math.sqrt(R*Y*(E-Y)/E)*(M-E/2<0?-1:1);fh(a,n,Math.max(u,Math.floor(n-M*Y/E+j)),Math.min(p,Math.floor(n+(E-M)*Y/E+j)),v)}var ee=a[n],se=u,ce=p;for(mh(a,u,n),v(a[p],ee)>0&&mh(a,u,p);se<ce;){for(mh(a,se,ce),se++,ce--;v(a[se],ee)<0;)se++;for(;v(a[ce],ee)>0;)ce--}0===v(a[u],ee)?mh(a,u,ce):mh(a,++ce,p),ce<=n&&(u=ce+1),n<=ce&&(p=ce-1)}}function mh(a,n,u){var p=a[n];a[n]=a[u],a[u]=p}function Fd(a,n){return a<n?-1:a>n?1:0}function gh(a,n){const u=a.length;if(u<=1)return[a];const p=[];let v,E;for(let M=0;M<u;M++){const R=_n(a[M]);0!==R&&(a[M].area=Math.abs(R),void 0===E&&(E=R<0),E===R<0?(v&&p.push(v),v=[a[M]]):v.push(a[M]))}if(v&&p.push(v),n>1)for(let M=0;M<p.length;M++)p[M].length<=n||(rm(p[M],n,1,p[M].length-1,Dv),p[M]=p[M].slice(0,n));return p}function Dv(a,n){return n.area-a.area}function sm(a,n,u){const p=u.patternDependencies;let v=!1;for(const E of n){const M=E.paint.get(`${a}-pattern`);M.isConstant()||(v=!0);const R=M.constantOr(null);R&&(v=!0,p[R]=!0)}return v}function Zh(a,n,u,p,v){const E=v.patternDependencies;for(const M of n){const R=M.paint.get(`${a}-pattern`).value;if("constant"!==R.kind){let Y=R.evaluate({zoom:p},u,{},v.availableImages);Y=Y&&Y.name?Y.name:Y,E[Y]=!0,u.patterns[M.id]=Y}}return u}class Np{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qi,this.indexArray=new Vn,this.indexArray2=new _o,this.programConfigurations=new Eu(n.layers,n.zoom),this.segments=new Hs,this.segments2=new Hs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=n.projection}populate(n,u,p,v){this.hasPattern=sm("fill",this.layers,u);const E=this.layers[0].layout.get("fill-sort-key"),M=[];for(const{feature:R,id:Y,index:j,sourceLayerIndex:ee}of n){const se=this.layers[0]._featureFilter.needGeometry,ce=Wa(R,se);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),ce,p))continue;const ve=E?E.evaluate(ce,{},p,u.availableImages):void 0,be={id:Y,properties:R.properties,type:R.type,sourceLayerIndex:ee,index:j,geometry:se?ce.geometry:Du(R,p,v),patterns:{},sortKey:ve};M.push(be)}E&&M.sort((R,Y)=>R.sortKey-Y.sortKey);for(const R of M){const{geometry:Y,index:j,sourceLayerIndex:ee}=R;if(this.hasPattern){const se=Zh("fill",this.layers,R,this.zoom,u);this.patternFeatures.push(se)}else this.addFeature(R,Y,j,p,{},u.availableImages);u.featureIndex.insert(n[j].feature,Y,j,ee,this.index)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}addFeatures(n,u,p,v,E){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pg),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,u,p,v,E,M=[]){for(const R of gh(u,500)){let Y=0;for(const be of R)Y+=be.length;const j=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray),ee=j.vertexLength,se=[],ce=[];for(const be of R){if(0===be.length)continue;be!==R[0]&&ce.push(se.length/2);const Me=this.segments2.prepareSegment(be.length,this.layoutVertexArray,this.indexArray2),Xe=Me.vertexLength;this.layoutVertexArray.emplaceBack(be[0].x,be[0].y),this.indexArray2.emplaceBack(Xe+be.length-1,Xe),se.push(be[0].x),se.push(be[0].y);for(let ut=1;ut<be.length;ut++)this.layoutVertexArray.emplaceBack(be[ut].x,be[ut].y),this.indexArray2.emplaceBack(Xe+ut-1,Xe+ut),se.push(be[ut].x),se.push(be[ut].y);Me.vertexLength+=be.length,Me.primitiveLength+=be.length}const ve=Xh(se,ce);for(let be=0;be<ve.length;be+=3)this.indexArray.emplaceBack(ee+ve[be],ee+ve[be+1],ee+ve[be+2]);j.vertexLength+=Y,j.primitiveLength+=ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,M,v)}}Tn(Np,"FillBucket",{omit:["layers","patternFeatures"]});const om=new xt({"fill-sort-key":new Ge(I.layout_fill["fill-sort-key"])});var vh={paint:new xt({"fill-antialias":new Te(I.paint_fill["fill-antialias"]),"fill-opacity":new Ge(I.paint_fill["fill-opacity"]),"fill-color":new Ge(I.paint_fill["fill-color"]),"fill-outline-color":new Ge(I.paint_fill["fill-outline-color"]),"fill-translate":new Te(I.paint_fill["fill-translate"]),"fill-translate-anchor":new Te(I.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ge(I.paint_fill["fill-pattern"])}),layout:om};const Yp=Jt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Hp=Jt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),_g=Jt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Vp}=Yp;var dl={},sd=ii,Gp=Ru;function Ru(a,n,u,p,v){this.properties={},this.extent=u,this.type=0,this._pbf=a,this._geometry=-1,this._keys=p,this._values=v,a.readFields(od,this,n)}function od(a,n,u){1==a?n.id=u.readVarint():2==a?function(p,v){for(var E=p.readVarint()+p.pos;p.pos<E;){var M=v._keys[p.readVarint()],R=v._values[p.readVarint()];v.properties[M]=R}}(u,n):3==a?n.type=u.readVarint():4==a&&(n._geometry=u.pos)}function am(a){for(var n,u,p=0,v=0,E=a.length,M=E-1;v<E;M=v++)p+=((u=a[M]).x-(n=a[v]).x)*(n.y+u.y);return p}Ru.types=["Unknown","Point","LineString","Polygon"],Ru.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,u=a.readVarint()+a.pos,p=1,v=0,E=0,M=0,R=[];a.pos<u;){if(v<=0){var Y=a.readVarint();p=7&Y,v=Y>>3}if(v--,1===p||2===p)E+=a.readSVarint(),M+=a.readSVarint(),1===p&&(n&&R.push(n),n=[]),n.push(new sd(E,M));else{if(7!==p)throw new Error("unknown command "+p);n&&n.push(n[0].clone())}}return n&&R.push(n),R},Ru.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,u=1,p=0,v=0,E=0,M=1/0,R=-1/0,Y=1/0,j=-1/0;a.pos<n;){if(p<=0){var ee=a.readVarint();u=7&ee,p=ee>>3}if(p--,1===u||2===u)(v+=a.readSVarint())<M&&(M=v),v>R&&(R=v),(E+=a.readSVarint())<Y&&(Y=E),E>j&&(j=E);else if(7!==u)throw new Error("unknown command "+u)}return[M,Y,R,j]},Ru.prototype.toGeoJSON=function(a,n,u){var p,v,E=this.extent*Math.pow(2,u),M=this.extent*a,R=this.extent*n,Y=this.loadGeometry(),j=Ru.types[this.type];function ee(ve){for(var be=0;be<ve.length;be++){var Me=ve[be];ve[be]=[360*(Me.x+M)/E-180,360/Math.PI*Math.atan(Math.exp((180-360*(Me.y+R)/E)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(p=0;p<Y.length;p++)se[p]=Y[p][0];ee(Y=se);break;case 2:for(p=0;p<Y.length;p++)ee(Y[p]);break;case 3:for(Y=function(ve){var be=ve.length;if(be<=1)return[ve];for(var Me,Xe,ut=[],Lt=0;Lt<be;Lt++){var ht=am(ve[Lt]);0!==ht&&(void 0===Xe&&(Xe=ht<0),Xe===ht<0?(Me&&ut.push(Me),Me=[ve[Lt]]):Me.push(ve[Lt]))}return Me&&ut.push(Me),ut}(Y),p=0;p<Y.length;p++)for(v=0;v<Y[p].length;v++)ee(Y[p][v])}1===Y.length?Y=Y[0]:j="Multi"+j;var ce={type:"Feature",geometry:{type:j,coordinates:Y},properties:this.properties};return"id"in this&&(ce.id=this.id),ce};var yg=Gp,y=O;function O(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(S,this,n),this.length=this._features.length}function S(a,n,u){15===a?n.version=u.readVarint():1===a?n.name=u.readString():5===a?n.extent=u.readVarint():2===a?n._features.push(u.pos):3===a?n._keys.push(u.readString()):4===a&&n._values.push(function(p){for(var v=null,E=p.readVarint()+p.pos;p.pos<E;){var M=p.readVarint()>>3;v=1===M?p.readString():2===M?p.readFloat():3===M?p.readDouble():4===M?p.readVarint64():5===M?p.readVarint():6===M?p.readSVarint():7===M?p.readBoolean():null}return v}(u))}O.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new yg(this._pbf,n,this.extent,this._keys,this._values)};var H=y;function Z(a,n,u){if(3===a){var p=new H(u,u.readVarint()+u.pos);p.length&&(n[p.name]=p)}}var ye=dl.VectorTile=function(a,n){this.layers=a.readFields(Z,{},n)},vt=dl.VectorTileFeature=Gp;function Ai(a,n,u,p){const v=[],E=0===p?(M,R,Y,j,ee,se)=>{M.push(new at(se,Y+(se-R)/(j-R)*(ee-Y)))}:(M,R,Y,j,ee,se)=>{M.push(new at(R+(se-Y)/(ee-Y)*(j-R),se))};for(const M of a){const R=[];for(const Y of M){if(Y.length<=2)continue;const j=[];for(let ce=0;ce<Y.length-1;ce++){const ve=Y[ce].x,be=Y[ce].y,Me=Y[ce+1].x,Xe=Y[ce+1].y,ut=0===p?ve:be,Lt=0===p?Me:Xe;ut<n?Lt>n&&E(j,ve,be,Me,Xe,n):ut>u?Lt<u&&E(j,ve,be,Me,Xe,u):j.push(Y[ce]),Lt<n&&ut>=n&&E(j,ve,be,Me,Xe,n),Lt>u&&ut<=u&&E(j,ve,be,Me,Xe,u)}let ee=Y[Y.length-1];const se=0===p?ee.x:ee.y;se>=n&&se<=u&&j.push(ee),j.length&&(ee=j[j.length-1],j[0].x===ee.x&&j[0].y===ee.y||j.push(j[0]),R.push(j))}R.length&&v.push(R)}return v}dl.VectorTileLayer=y;const pn=vt.types,Kr=Math.pow(2,13);function Ss(a,n,u,p,v,E,M,R){a.emplaceBack((n<<1)+M,(u<<1)+E,(Math.floor(p*Kr)<<1)+v,Math.round(R))}function Do(a,n,u){a.emplaceBack(n.x,n.y,n.z,16384*u[0],16384*u[1],16384*u[2])}class Ma{constructor(){this.acc=new at(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new at(n.x,n.y),this.max=new at(n.x,n.y))}append(n,u){this.currentPolyCount.edges++,this.acc._add(n);const p=this.min,v=this.max;n.x<p.x?p.x=n.x:n.x>v.x&&(v.x=n.x),n.y<p.y?p.y=n.y:n.y>v.y&&(v.y=n.y),((0===n.x||n.x===An)&&n.x===u.x)!=((0===n.y||n.y===An)&&n.y===u.y)&&this.processBorderOverlap(n,u),u.x<0!=n.x<0&&this.addBorderIntersection(0,zn(u.y,n.y,(0-u.x)/(n.x-u.x))),u.x>An!=n.x>An&&this.addBorderIntersection(1,zn(u.y,n.y,(An-u.x)/(n.x-u.x))),u.y<0!=n.y<0&&this.addBorderIntersection(2,zn(u.x,n.x,(0-u.y)/(n.y-u.y))),u.y>An!=n.y>An&&this.addBorderIntersection(3,zn(u.x,n.x,(An-u.y)/(n.y-u.y)))}addBorderIntersection(n,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[n];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(n,u){if(n.x===u.x){if(n.y===u.y)return;const p=0===n.x?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,n.y)}else{const p=0===n.y?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,n.x)}}centroid(){const n=this.polyCount.reduce((u,p)=>u+p.edges,0);return 0!==n?this.acc.div(n)._round():new at(0,0)}span(){return new at(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,u)=>n+ +(u[0]!==Number.MAX_VALUE),0)}}class bc{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new Ri,this.centroidVertexArray=new Ua,this.indexArray=new Vn,this.programConfigurations=new Eu(n.layers,n.zoom),this.segments=new Hs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=n.enableTerrain}populate(n,u,p,v){this.features=[],this.hasPattern=sm("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(E){const M=Math.exp(Math.PI*(1-E.y/(1<<E.z)*2));return 80150034*M/(M*M+1)/An/(1<<E.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:E,id:M,index:R,sourceLayerIndex:Y}of n){const j=this.layers[0]._featureFilter.needGeometry,ee=Wa(E,j);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),ee,p))continue;const se={id:M,sourceLayerIndex:Y,index:R,geometry:j?ee.geometry:Du(E,p,v),properties:E.properties,type:E.type,patterns:{}},ce=this.layoutVertexArray.length;this.hasPattern?this.features.push(Zh("fill-extrusion",this.layers,se,this.zoom,u)):this.addFeature(se,se.geometry,R,p,{},u.availableImages,v),u.featureIndex.insert(E,se.geometry,R,Y,this.index,ce)}this.sortBorders()}addFeatures(n,u,p,v,E){for(const M of this.features){const{geometry:R}=M;this.addFeature(M,R,M.index,u,p,v,E)}this.sortBorders()}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Vp),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,_g.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Hp.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,u,p,v,E,M,R){const Y=[new at(0,0),new at(An,An)],j=R.projection,ee="globe"===j.name,se=this.enableTerrain&&!ee?new Ma:null,ce="Polygon"===pn[n.type];ee&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new rn);const ve=gh(u,500);for(let ut=ve.length-1;ut>=0;ut--){const Lt=ve[ut];(0===Lt.length||(be=Lt[0]).every(ht=>ht.x<=0)||be.every(ht=>ht.x>=An)||be.every(ht=>ht.y<=0)||be.every(ht=>ht.y>=An))&&ve.splice(ut,1)}var be;let Me;if(ee)Me=xg(ve,Y,v);else{Me=[];for(const ut of ve)Me.push({polygon:ut,bounds:Y})}const Xe=ce?this.edgeRadius:0;for(const{polygon:ut,bounds:Lt}of Me){let ht=0,At=0;for(const Bt of ut)ce&&!Bt[0].equals(Bt[Bt.length-1])&&Bt.push(Bt[0]),At+=ce?Bt.length-1:Bt.length;const Nt=this.segments.prepareSegment((ce?5:4)*At,this.layoutVertexArray,this.indexArray);if(ce){const Bt=[],bi=[];ht=Nt.vertexLength;for(const Oi of ut){let nn,Ci;Oi.length&&Oi!==ut[0]&&bi.push(Bt.length/2),nn=Oi[1].sub(Oi[0])._perp()._unit();for(let Ni=1;Ni<Oi.length;Ni++){const Hi=Oi[Ni],Ki=Oi[Ni===Oi.length-1?1:Ni+1];let{x:an,y:Li}=Hi;if(Xe){Ci=Ki.sub(Hi)._perp()._unit();const yn=nn.add(Ci)._unit(),On=Xe*Math.min(4,1/(nn.x*yn.x+nn.y*yn.y));an+=On*yn.x,Li+=On*yn.y,nn=Ci}Ss(this.layoutVertexArray,an,Li,0,0,1,1,0),Nt.vertexLength++,Bt.push(Hi.x,Hi.y),ee&&Do(this.layoutVertexExtArray,j.projectTilePoint(an,Li,v),j.upVector(v,an,Li))}}const hi=Xh(Bt,bi);for(let Oi=0;Oi<hi.length;Oi+=3)this.indexArray.emplaceBack(ht+hi[Oi],ht+hi[Oi+2],ht+hi[Oi+1]),Nt.primitiveLength++}for(const Bt of ut){se&&Bt.length&&se.startRing(Bt[0]);let bi,hi,Oi,nn=Bt.length>4&&_h(Bt[Bt.length-2],Bt[0],Bt[1]),Ci=Xe?lm(Bt[Bt.length-2],Bt[0],Bt[1],Xe):0;hi=Bt[1].sub(Bt[0])._perp()._unit();let Ni=!0;for(let Hi=1,Ki=0;Hi<Bt.length;Hi++){let an=Bt[Hi-1],Li=Bt[Hi];const yn=Bt[Hi===Bt.length-1?1:Hi+1];if(se&&ce&&se.currentPolyCount.top++,Xl(Li,an,Lt)){Xe&&(hi=yn.sub(Li)._perp()._unit(),Ni=!Ni);continue}se&&se.append(Li,an);const On=Li.sub(an)._perp(),Cn=On.x/(Math.abs(On.x)+Math.abs(On.y)),wr=On.y>0?1:0,ln=an.dist(Li);if(Ki+ln>32768&&(Ki=0),Xe){Oi=yn.sub(Li)._perp()._unit();let Er=xc(an,Li,yn,jp(hi,Oi),Xe);isNaN(Er)&&(Er=0);const ir=Li.sub(an)._unit();an=an.add(ir.mult(Ci))._round(),Li=Li.add(ir.mult(-Er))._round(),Ci=Er,hi=Oi}const Xn=Nt.vertexLength,Cr=Bt.length>4&&_h(an,Li,yn);let ts=bg(Ki,nn,Ni);if(Ss(this.layoutVertexArray,an.x,an.y,Cn,wr,0,0,ts),Ss(this.layoutVertexArray,an.x,an.y,Cn,wr,0,1,ts),Ki+=ln,ts=bg(Ki,Cr,!Ni),nn=Cr,Ss(this.layoutVertexArray,Li.x,Li.y,Cn,wr,0,0,ts),Ss(this.layoutVertexArray,Li.x,Li.y,Cn,wr,0,1,ts),Nt.vertexLength+=4,this.indexArray.emplaceBack(Xn+0,Xn+1,Xn+2),this.indexArray.emplaceBack(Xn+1,Xn+3,Xn+2),Nt.primitiveLength+=2,Xe){const Er=ht+(1===Hi?Bt.length-2:Hi-2),ir=1===Hi?ht:Er+1;if(this.indexArray.emplaceBack(Xn+1,Er,Xn+3),this.indexArray.emplaceBack(Er,ir,Xn+3),Nt.primitiveLength+=2,void 0===bi&&(bi=Xn),!Xl(yn,Bt[Hi],Lt)){const zs=Hi===Bt.length-1?bi:Nt.vertexLength;this.indexArray.emplaceBack(Xn+2,Xn+3,zs),this.indexArray.emplaceBack(Xn+3,zs+1,zs),this.indexArray.emplaceBack(Xn+3,ir,zs+1),Nt.primitiveLength+=3}Ni=!Ni}if(ee){const Er=this.layoutVertexExtArray,ir=j.projectTilePoint(an.x,an.y,v),zs=j.projectTilePoint(Li.x,Li.y,v),kr=j.upVector(v,an.x,an.y),Ar=j.upVector(v,Li.x,Li.y);Do(Er,ir,kr),Do(Er,ir,kr),Do(Er,zs,Ar),Do(Er,zs,Ar)}}ce&&(ht+=Bt.length-1)}}if(se&&se.polyCount.length>0){if(se.borders){se.vertexArrayOffset=this.centroidVertexArray.length;const ut=se.borders,Lt=this.featuresOnBorder.push(se)-1;for(let ht=0;ht<4;ht++)ut[ht][0]!==Number.MAX_VALUE&&this.borders[ht].push(Lt)}this.encodeCentroid(se.borders?void 0:se.centroid(),se)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,M,v)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((u,p)=>this.featuresOnBorder[u].borders[n][0]-this.featuresOnBorder[p].borders[n][0])}encodeCentroid(n,u,p=!0){let v,E;if(n)if(0!==n.y){const R=u.span()._mult(this.tileToMeter);v=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(R.x/10)),E=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else v=Math.ceil(7*(n.x+450)),E=0;else v=0,E=+p;let M=p?this.centroidVertexArray.length:u.vertexArrayOffset;for(const R of u.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let Y=0;Y<R.top;Y++)this.centroidVertexArray.emplace(M++,v,E);for(let Y=0;Y<2*R.edges;Y++)this.centroidVertexArray.emplace(M++,0,E),this.centroidVertexArray.emplace(M++,v,E)}}}function jp(a,n){const u=a.add(n)._unit();return a.x*u.x+a.y*u.y}function lm(a,n,u,p){const v=n.sub(a)._perp()._unit(),E=u.sub(n)._perp()._unit();return xc(a,n,u,jp(v,E),p)}function xc(a,n,u,p,v){const E=Math.sqrt(1-p*p);return Math.min(a.dist(n)/3,n.dist(u)/3,v*E/p)}function Xl(a,n,u){return a.x<u[0].x&&n.x<u[0].x||a.x>u[1].x&&n.x>u[1].x||a.y<u[0].y&&n.y<u[0].y||a.y>u[1].y&&n.y>u[1].y}function _h(a,n,u){if(a.x<0||a.x>=An||n.x<0||n.x>=An||u.x<0||u.x>=An)return!1;const p=u.sub(n),v=p.perp(),E=a.sub(n);return(p.x*E.x+p.y*E.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(E.x*E.x+E.y*E.y))>-.866&&v.x*E.x+v.y*E.y<0}function bg(a,n,u){const p=n?2|a:-3&a;return u?1|p:-2&p}function Up(){const a=Math.PI/32,n=Math.tan(a),u=Au;return u*Math.sqrt(1+2*n*n)-u}function xg(a,n,u){const p=1<<u.z,v=kl(u.x/p),E=kl((u.x+1)/p),M=Ko(u.y/p),R=Ko((u.y+1)/p);return function(Y,j,ee,se,ce=0,ve){const be=[];if(!Y.length||!ee||!se)return be;const Me=(Bt,bi)=>{for(const hi of Bt)be.push({polygon:hi,bounds:bi})},Xe=Math.ceil(Math.log2(ee)),ut=Math.ceil(Math.log2(se)),Lt=Xe-ut,ht=[];for(let Bt=0;Bt<Math.abs(Lt);Bt++)ht.push(Lt>0?0:1);for(let Bt=0;Bt<Math.min(Xe,ut);Bt++)ht.push(0),ht.push(1);let At=Y;if(At=Ai(At,j[0].y-ce,j[1].y+ce,1),At=Ai(At,j[0].x-ce,j[1].x+ce,0),!At.length)return be;const Nt=[];for(ht.length?Nt.push({polygons:At,bounds:j,depth:0}):Me(At,j);Nt.length;){const Bt=Nt.pop(),bi=Bt.depth,hi=ht[bi],Oi=Bt.bounds[0],nn=Bt.bounds[1],Ci=0===hi?Oi.x:Oi.y,Ni=0===hi?nn.x:nn.y,Hi=ve?ve(hi,Ci,Ni):.5*(Ci+Ni),Ki=Ai(Bt.polygons,Ci-ce,Hi+ce,hi),an=Ai(Bt.polygons,Hi-ce,Ni+ce,hi);if(Ki.length){const Li=[Oi,new at(0===hi?Hi:nn.x,1===hi?Hi:nn.y)];ht.length>bi+1?Nt.push({polygons:Ki,bounds:Li,depth:bi+1}):Me(Ki,Li)}if(an.length){const Li=[new at(0===hi?Hi:Oi.x,1===hi?Hi:Oi.y),nn];ht.length>bi+1?Nt.push({polygons:an,bounds:Li,depth:bi+1}):Me(an,Li)}}return be}(a,n,Math.ceil((E-v)/11.25),Math.ceil((M-R)/11.25),1,(Y,j,ee)=>{if(0===Y)return.5*(j+ee);{const se=Ko((u.y+j/An)/p);return(zc(.5*(Ko((u.y+ee/An)/p)+se))*p-u.y)*An}})}Tn(bc,"FillExtrusionBucket",{omit:["layers","features"]}),Tn(Ma,"PartMetadata");const Ey=new xt({"fill-extrusion-edge-radius":new Te(I["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Iv={paint:new xt({"fill-extrusion-opacity":new Te(I["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ge(I["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Te(I["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Te(I["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ge(I["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ge(I["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ge(I["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Te(I["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Te(I["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Te(I["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Te(I["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Ey};function Lv(a,n,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[a*p-2*Math.PI*6378137/2,n*p-2*Math.PI*6378137/2]}class cm{constructor(n,u,p){this.z=n,this.x=u,this.y=p,this.key=Wp(0,n,n,u,p)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,u){const p=(M=this.y,R=this.z,Y=Lv(256*(E=this.x),256*(M=Math.pow(2,R)-M-1),R),j=Lv(256*(E+1),256*(M+1),R),Y[0]+","+Y[1]+","+j[0]+","+j[1]),v=function(E,M,R){let Y,j="";for(let ee=E;ee>0;ee--)Y=1<<ee-1,j+=(M&Y?1:0)+(R&Y?2:0);return j}(this.z,this.x,this.y);var E,M,R,Y,j;return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",v).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ov{constructor(n,u){this.wrap=n,this.canonical=u,this.key=Wp(n,u.z,u.z,u.x,u.y)}}class Xa{constructor(n,u,p,v,E){this.overscaledZ=n,this.wrap=u,this.canonical=new cm(p,+v,+E),this.key=0===u&&n===p?this.canonical.key:Wp(u,n,p,v,E)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const u=this.canonical.z-n;return n>this.canonical.z?new Xa(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xa(n,this.wrap,n,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(n,u=!0){if(this.overscaledZ===n&&u)return this.key;if(n>this.canonical.z)return Wp(this.wrap*+u,n,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-n;return Wp(this.wrap*+u,n,n,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const u=this.canonical.z-n.canonical.z;return 0===n.overscaledZ||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>u&&n.canonical.y===this.canonical.y>>u}children(n){if(this.overscaledZ>=n)return[new Xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,v=2*this.canonical.y;return[new Xa(u,this.wrap,u,p,v),new Xa(u,this.wrap,u,p+1,v),new Xa(u,this.wrap,u,p,v+1),new Xa(u,this.wrap,u,p+1,v+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Xa(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ov(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wp(a,n,u,p,v){const E=1<<Math.min(u,22);let M=E*(v%E)+p%E;return a&&u<22&&(M+=E*E*((a<0?-2*a-1:2*a)%(1<<2*(22-u)))),16*(32*M+u)+(n-u)}Tn(cm,"CanonicalTileID"),Tn(Xa,"OverscaledTileID",{omit:["projMatrix"]});class Bd extends at{constructor(n,u,p){super(n,u),this.z=p}}function $p(a,n){return a.x*n.x+a.y*n.y}function Xp(a,n){if(1===a.length){let u=0;const p=n[u++];let v;for(;!v||p.equals(v);)if(v=n[u++],!v)return 1/0;for(;u<n.length;u++){const E=n[u],M=a[0],R=v.sub(p),Y=E.sub(p),j=M.sub(p),ee=$p(R,R),se=$p(R,Y),ce=$p(Y,Y),ve=$p(j,R),be=$p(j,Y),Me=ee*ce-se*se,Xe=(ce*ve-se*be)/Me,ut=(ee*be-se*ve)/Me,Lt=p.z*(1-Xe-ut)+v.z*Xe+E.z*ut;if(isFinite(Lt))return Lt}return 1/0}{let u=1/0;for(const p of n)u=Math.min(u,p.z);return u}}function wg(a,n,u,p,v,E,M,R){const Y=M*v.getElevationAt(a,n,!0,!0),j=0!==E[0],ee=j?0===E[1]?M*(E[0]/7-450):M*function(se,ce,ve){const be=Math.floor(ce[0]/8),Me=Math.floor(ce[1]/8),Xe=10*(ce[0]-8*be),ut=10*(ce[1]-8*Me),Lt=se.getElevationAt(be,Me,!0,!0),ht=se.getMeterToDEM(ve),At=Math.floor(.5*(Xe*ht-1)),Nt=Math.floor(.5*(ut*ht-1)),Bt=se.tileCoordToPixel(be,Me),bi=2*At+1,hi=2*Nt+1,Oi=(On=bi,Cn=hi,[(an=se).getElevationAtPixel(Li=Bt.x-At,yn=Bt.y-Nt,!0),an.getElevationAtPixel(Li+Cn,yn,!0),an.getElevationAtPixel(Li,yn+Cn,!0),an.getElevationAtPixel(Li+On,yn+Cn,!0)]),nn=Math.abs(Oi[0]-Oi[1]),Ci=Math.abs(Oi[2]-Oi[3]),Ni=Math.abs(Oi[0]-Oi[2])+Math.abs(Oi[1]-Oi[3]),Hi=Math.min(.25,.5*ht*(nn+Ci)/bi),Ki=Math.min(.25,.5*ht*Ni/hi);var an,Li,yn,On,Cn;return Lt+Math.max(Hi*Xe,Ki*ut)}(v,E,R):Y;return{base:Y+(0===u)?-1:u,top:j?Math.max(ee+p,Y+u+2):Y+p}}const ad=Jt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Sy}=ad,Pv=Jt([{name:"a_packed",components:4,type:"Float32"}]),{members:Ty}=Pv,ky=vt.types,Ay=Math.cos(Math.PI/180*37.5);class um{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new yi,this.layoutVertexArray2=new Wi,this.indexArray=new Vn,this.programConfigurations=new Eu(n.layers,n.zoom),this.segments=new Hs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,p,v){this.hasPattern=sm("line",this.layers,u);const E=this.layers[0].layout.get("line-sort-key"),M=[];for(const{feature:ee,id:se,index:ce,sourceLayerIndex:ve}of n){const be=this.layers[0]._featureFilter.needGeometry,Me=Wa(ee,be);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),Me,p))continue;const Xe=E?E.evaluate(Me,{},p):void 0,ut={id:se,properties:ee.properties,type:ee.type,sourceLayerIndex:ve,index:ce,geometry:be?Me.geometry:Du(ee,p,v),patterns:{},sortKey:Xe};M.push(ut)}E&&M.sort((ee,se)=>ee.sortKey-se.sortKey);const{lineAtlas:R,featureIndex:Y}=u,j=this.addConstantDashes(R);for(const ee of M){const{geometry:se,index:ce,sourceLayerIndex:ve}=ee;if(j&&this.addFeatureDashes(ee,R),this.hasPattern){const be=Zh("line",this.layers,ee,this.zoom,u);this.patternFeatures.push(be)}else this.addFeature(ee,se,ce,p,R.positions,u.availableImages);Y.insert(n[ce].feature,se,ce,ve,this.index)}}addConstantDashes(n){let u=!1;for(const p of this.layers){const v=p.paint.get("line-dasharray").value,E=p.layout.get("line-cap").value;if("constant"!==v.kind||"constant"!==E.kind)u=!0;else{const M=E.value,R=v.value;if(!R)continue;n.addDash(R,M)}}return u}addFeatureDashes(n,u){const p=this.zoom;for(const v of this.layers){const E=v.paint.get("line-dasharray").value,M=v.layout.get("line-cap").value;if("constant"===E.kind&&"constant"===M.kind)continue;let R,Y;if("constant"===E.kind){if(R=E.value,!R)continue}else R=E.evaluate({zoom:p},n);Y="constant"===M.kind?M.value:M.evaluate({zoom:p},n),u.addDash(R,Y),n.patterns[v.id]=u.getKey(R,Y)}}update(n,u,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,p,v)}addFeatures(n,u,p,v,E){for(const M of this.patternFeatures)this.addFeature(M,M.geometry,M.index,u,p,v)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Ty)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Sy),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,u,p,v,E,M){const R=this.layers[0].layout,Y=R.get("line-join").evaluate(n,{}),j=R.get("line-cap").evaluate(n,{}),ee=R.get("line-miter-limit"),se=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ce of u)this.addLine(ce,n,Y,j,ee,se);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,p,E,M,v)}addLine(n,u,p,v,E,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ut=0;ut<n.length-1;ut++)this.totalDistance+=n[ut].dist(n[ut+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R="Polygon"===ky[u.type];let Y=n.length;for(;Y>=2&&n[Y-1].equals(n[Y-2]);)Y--;let j=0;for(;j<Y-1&&n[j].equals(n[j+1]);)j++;if(Y<(R?3:2))return;"bevel"===p&&(E=1.05);const ee=this.overscaling<=16?15*An/(512*this.overscaling):0,se=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let ce,ve,be,Me,Xe;this.e1=this.e2=-1,R&&(ce=n[Y-2],Xe=n[j].sub(ce)._unit()._perp());for(let ut=j;ut<Y;ut++){if(be=ut===Y-1?R?n[j+1]:void 0:n[ut+1],be&&n[ut].equals(be))continue;Xe&&(Me=Xe),ce&&(ve=ce),ce=n[ut],Xe=be?be.sub(ce)._unit()._perp():Me,Me=Me||Xe;let Lt=Me.add(Xe);0===Lt.x&&0===Lt.y||Lt._unit();const ht=Me.x*Xe.x+Me.y*Xe.y,At=Lt.x*Xe.x+Lt.y*Xe.y,Nt=0!==At?1/At:1/0,Bt=2*Math.sqrt(2-2*At),bi=At<Ay&&ve&&be,hi=Me.x*Xe.y-Me.y*Xe.x>0;if(bi&&ut>j){const Ci=ce.dist(ve);if(Ci>2*ee){const Ni=ce.sub(ce.sub(ve)._mult(ee/Ci)._round());this.updateDistance(ve,Ni),this.addCurrentVertex(Ni,Me,0,0,se),ve=Ni}}const Oi=ve&&be;let nn=Oi?p:R?"butt":v;if(Oi&&"round"===nn&&(Nt<M?nn="miter":Nt<=2&&(nn="fakeround")),"miter"===nn&&Nt>E&&(nn="bevel"),"bevel"===nn&&(Nt>2&&(nn="flipbevel"),Nt<E&&(nn="miter")),ve&&this.updateDistance(ve,ce),"miter"===nn)Lt._mult(Nt),this.addCurrentVertex(ce,Lt,0,0,se);else if("flipbevel"===nn){if(Nt>100)Lt=Xe.mult(-1);else{const Ci=Nt*Me.add(Xe).mag()/Me.sub(Xe).mag();Lt._perp()._mult(Ci*(hi?-1:1))}this.addCurrentVertex(ce,Lt,0,0,se),this.addCurrentVertex(ce,Lt.mult(-1),0,0,se)}else if("bevel"===nn||"fakeround"===nn){const Ci=-Math.sqrt(Nt*Nt-1),Ni=hi?Ci:0,Hi=hi?0:Ci;if(ve&&this.addCurrentVertex(ce,Me,Ni,Hi,se),"fakeround"===nn){const Ki=Math.round(180*Bt/Math.PI/20);for(let an=1;an<Ki;an++){let Li=an/Ki;if(.5!==Li){const On=Li-.5;Li+=Li*On*(Li-1)*((1.0904+ht*(ht*(3.55645-1.43519*ht)-3.2452))*On*On+(.848013+ht*(.215638*ht-1.06021)))}const yn=Xe.sub(Me)._mult(Li)._add(Me)._unit()._mult(hi?-1:1);this.addHalfVertex(ce,yn.x,yn.y,!1,hi,0,se)}}be&&this.addCurrentVertex(ce,Xe,-Ni,-Hi,se)}else if("butt"===nn)this.addCurrentVertex(ce,Lt,0,0,se);else if("square"===nn){const Ci=ve?1:-1;ve||this.addCurrentVertex(ce,Lt,Ci,Ci,se),this.addCurrentVertex(ce,Lt,0,0,se),ve&&this.addCurrentVertex(ce,Lt,Ci,Ci,se)}else"round"===nn&&(ve&&(this.addCurrentVertex(ce,Me,0,0,se),this.addCurrentVertex(ce,Me,1,1,se,!0)),be&&(this.addCurrentVertex(ce,Xe,-1,-1,se,!0),this.addCurrentVertex(ce,Xe,0,0,se)));if(bi&&ut<Y-1){const Ci=ce.dist(be);if(Ci>2*ee){const Ni=ce.add(be.sub(ce)._mult(ee/Ci)._round());this.updateDistance(ce,Ni),this.addCurrentVertex(Ni,Xe,0,0,se),ce=Ni}}}}addCurrentVertex(n,u,p,v,E,M=!1){const R=u.y*v-u.x,Y=-u.y-u.x*v;this.addHalfVertex(n,u.x+u.y*p,u.y-u.x*p,M,!1,p,E),this.addHalfVertex(n,R,Y,M,!0,-v,E)}addHalfVertex({x:n,y:u},p,v,E,M,R,Y){this.layoutVertexArray.emplaceBack((n<<1)+(E?1:0),(u<<1)+(M?1:0),Math.round(63*p)+128,Math.round(63*v)+128,1+(0===R?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const j=Y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),Y.primitiveLength++),M?this.e2=j:this.e1=j}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,u){this.distance+=n.dist(u),this.updateScaledDistance()}}Tn(um,"LineBucket",{omit:["layers","patternFeatures"]});const My=new xt({"line-cap":new Ge(I.layout_line["line-cap"]),"line-join":new Ge(I.layout_line["line-join"]),"line-miter-limit":new Te(I.layout_line["line-miter-limit"]),"line-round-limit":new Te(I.layout_line["line-round-limit"]),"line-sort-key":new Ge(I.layout_line["line-sort-key"])});var Rv={paint:new xt({"line-opacity":new Ge(I.paint_line["line-opacity"]),"line-color":new Ge(I.paint_line["line-color"]),"line-translate":new Te(I.paint_line["line-translate"]),"line-translate-anchor":new Te(I.paint_line["line-translate-anchor"]),"line-width":new Ge(I.paint_line["line-width"]),"line-gap-width":new Ge(I.paint_line["line-gap-width"]),"line-offset":new Ge(I.paint_line["line-offset"]),"line-blur":new Ge(I.paint_line["line-blur"]),"line-dasharray":new Ge(I.paint_line["line-dasharray"]),"line-pattern":new Ge(I.paint_line["line-pattern"]),"line-gradient":new bt(I.paint_line["line-gradient"]),"line-trim-offset":new Te(I.paint_line["line-trim-offset"])}),layout:My};const zv=new class extends Ge{possiblyEvaluate(a,n){return n=new te(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,u,p){return n=fn({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,u,p)}}(Rv.paint.properties["line-width"].specification);function Fv(a,n){return n>0?n+2*a:a}zv.useIntegerZoom=!0;const Cg=Jt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dm=Jt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Bv=Jt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Jt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Eg=Jt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Dy=Jt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Zp=Jt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Nv=Jt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Jt([{name:"triangle",components:3,type:"Uint16"}]),Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Jt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jt([{type:"Float32",name:"offsetX"}]),Jt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ma=24;const wc=128;function Sg(a,n){const{expression:u}=n;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new te(a+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:p,interpolationType:v}=u;let E=0;for(;E<p.length&&p[E]<=a;)E++;E=Math.max(0,E-1);let M=E;for(;M<p.length&&p[M]<a+1;)M++;M=Math.min(p.length-1,M);const R=p[E],Y=p[M];return"composite"===u.kind?{kind:"composite",minZoom:R,maxZoom:Y,interpolationType:v}:{kind:"camera",minZoom:R,maxZoom:Y,minSize:u.evaluate(new te(R)),maxSize:u.evaluate(new te(Y)),interpolationType:v}}}function qh(a,{uSize:n,uSizeT:u},{lowerSize:p,upperSize:v}){return"source"===a.kind?p/wc:"composite"===a.kind?zn(p/wc,v/wc,u):n}function Nd(a,n){let u=0,p=0;if("constant"===a.kind)p=a.layoutSize;else if("source"!==a.kind){const{interpolationType:v,minZoom:E,maxZoom:M}=a,R=v?vi(la.interpolationFactor(v,n,E,M),0,1):0;"camera"===a.kind?p=zn(a.minSize,a.maxSize,R):u=R}return{uSizeT:u,uSize:p}}var Iy=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:wc,evaluateSizeForFeature:qh,evaluateSizeForZoom:Nd,getSizeData:Sg});function Yv(a,n,u){return a.sections.forEach(p=>{p.text=function(v,E,M){const R=E.layout.get("text-transform").evaluate(M,{});return"uppercase"===R?v=v.toLocaleUpperCase():"lowercase"===R&&(v=v.toLocaleLowerCase()),K.applyArabicShaping&&(v=K.applyArabicShaping(v)),v}(p.text,n,u)}),a}const qp={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function Hv(a){return"\ufe36"===a||"\ufe48"===a||"\ufe38"===a||"\ufe44"===a||"\ufe42"===a||"\ufe3e"===a||"\ufe3c"===a||"\ufe3a"===a||"\ufe18"===a||"\ufe40"===a||"\ufe10"===a||"\ufe13"===a||"\ufe14"===a||"\uff40"===a||"\uffe3"===a||"\ufe11"===a||"\ufe12"===a}function Vv(a){return"\ufe35"===a||"\ufe47"===a||"\ufe37"===a||"\ufe43"===a||"\ufe41"===a||"\ufe3d"===a||"\ufe3b"===a||"\ufe39"===a||"\ufe17"===a||"\ufe3f"===a}var Gv=Ts,hm=function(a,n,u,p,v){var E,M,R=8*v-p-1,Y=(1<<R)-1,j=Y>>1,ee=-7,se=u?v-1:0,ce=u?-1:1,ve=a[n+se];for(se+=ce,E=ve&(1<<-ee)-1,ve>>=-ee,ee+=R;ee>0;E=256*E+a[n+se],se+=ce,ee-=8);for(M=E&(1<<-ee)-1,E>>=-ee,ee+=p;ee>0;M=256*M+a[n+se],se+=ce,ee-=8);if(0===E)E=1-j;else{if(E===Y)return M?NaN:1/0*(ve?-1:1);M+=Math.pow(2,p),E-=j}return(ve?-1:1)*M*Math.pow(2,E-p)},jv=function(a,n,u,p,v,E){var M,R,Y,j=8*E-v-1,ee=(1<<j)-1,se=ee>>1,ce=23===v?Math.pow(2,-24)-Math.pow(2,-77):0,ve=p?0:E-1,be=p?1:-1,Me=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(R=isNaN(n)?1:0,M=ee):(M=Math.floor(Math.log(n)/Math.LN2),n*(Y=Math.pow(2,-M))<1&&(M--,Y*=2),(n+=M+se>=1?ce/Y:ce*Math.pow(2,1-se))*Y>=2&&(M++,Y/=2),M+se>=ee?(R=0,M=ee):M+se>=1?(R=(n*Y-1)*Math.pow(2,v),M+=se):(R=n*Math.pow(2,se-1)*Math.pow(2,v),M=0));v>=8;a[u+ve]=255&R,ve+=be,R/=256,v-=8);for(M=M<<v|R,j+=v;j>0;a[u+ve]=255&M,ve+=be,M/=256,j-=8);a[u+ve-be]|=128*Me};function Ts(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ts.Varint=0,Ts.Fixed64=1,Ts.Bytes=2,Ts.Fixed32=5;var pm=4294967296,Uv=1/pm,Tg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function zu(a){return a.type===Ts.Bytes?a.readVarint()+a.pos:a.pos+1}function Wv(a,n,u){var p=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));u.realloc(p);for(var v=u.pos-1;v>=a;v--)u.buf[v+p]=u.buf[v]}function Ly(a,n){for(var u=0;u<a.length;u++)n.writeVarint(a[u])}function Oy(a,n){for(var u=0;u<a.length;u++)n.writeSVarint(a[u])}function Py(a,n){for(var u=0;u<a.length;u++)n.writeFloat(a[u])}function Ry(a,n){for(var u=0;u<a.length;u++)n.writeDouble(a[u])}function $v(a,n){for(var u=0;u<a.length;u++)n.writeBoolean(a[u])}function Xv(a,n){for(var u=0;u<a.length;u++)n.writeFixed32(a[u])}function Zv(a,n){for(var u=0;u<a.length;u++)n.writeSFixed32(a[u])}function kg(a,n){for(var u=0;u<a.length;u++)n.writeFixed64(a[u])}function zy(a,n){for(var u=0;u<a.length;u++)n.writeSFixed64(a[u])}function fm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function yh(a,n,u){a[u]=n,a[u+1]=n>>>8,a[u+2]=n>>>16,a[u+3]=n>>>24}function su(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Ts.prototype={destroy:function(){this.buf=null},readFields:function(a,n,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),v=p>>3,E=this.pos;this.type=7&p,a(v,n,this),this.pos===E&&this.skip(p)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=fm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=su(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=fm(this.buf,this.pos)+fm(this.buf,this.pos+4)*pm;return this.pos+=8,a},readSFixed64:function(){var a=fm(this.buf,this.pos)+su(this.buf,this.pos+4)*pm;return this.pos+=8,a},readFloat:function(){var a=hm(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=hm(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,u,p=this.buf;return n=127&(u=p[this.pos++]),u<128?n:(n|=(127&(u=p[this.pos++]))<<7,u<128?n:(n|=(127&(u=p[this.pos++]))<<14,u<128?n:(n|=(127&(u=p[this.pos++]))<<21,u<128?n:function(v,E,M){var R,Y,j=M.buf;if(R=(112&(Y=j[M.pos++]))>>4,Y<128||(R|=(127&(Y=j[M.pos++]))<<3,Y<128)||(R|=(127&(Y=j[M.pos++]))<<10,Y<128)||(R|=(127&(Y=j[M.pos++]))<<17,Y<128)||(R|=(127&(Y=j[M.pos++]))<<24,Y<128)||(R|=(1&(Y=j[M.pos++]))<<31,Y<128))return function Kh(a,n,u){return u?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}(v,R,E);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(u=p[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&Tg?Tg.decode(this.buf.subarray(n,a)):function(u,p,v){for(var E="",M=p;M<v;){var R,Y,j,ee=u[M],se=null,ce=ee>239?4:ee>223?3:ee>191?2:1;if(M+ce>v)break;1===ce?ee<128&&(se=ee):2===ce?128==(192&(R=u[M+1]))&&(se=(31&ee)<<6|63&R)<=127&&(se=null):3===ce?(Y=u[M+2],128==(192&(R=u[M+1]))&&128==(192&Y)&&((se=(15&ee)<<12|(63&R)<<6|63&Y)<=2047||se>=55296&&se<=57343)&&(se=null)):4===ce&&(Y=u[M+2],j=u[M+3],128==(192&(R=u[M+1]))&&128==(192&Y)&&128==(192&j)&&((se=(15&ee)<<18|(63&R)<<12|(63&Y)<<6|63&j)<=65535||se>=1114112)&&(se=null)),null===se?(se=65533,ce=1):se>65535&&(se-=65536,E+=String.fromCharCode(se>>>10&1023|55296),se=56320|1023&se),E+=String.fromCharCode(se),M+=ce}return E}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Ts.Bytes)return a.push(this.readVarint(n));var u=zu(this);for(a=a||[];this.pos<u;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Ts.Bytes)return a.push(this.readSVarint());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ts.Bytes)return a.push(this.readBoolean());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ts.Bytes)return a.push(this.readFloat());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ts.Bytes)return a.push(this.readDouble());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Ts.Bytes)return a.push(this.readFixed32());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Ts.Bytes)return a.push(this.readSFixed32());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Ts.Bytes)return a.push(this.readFixed64());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Ts.Bytes)return a.push(this.readSFixed64());var n=zu(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Ts.Varint)for(;this.buf[this.pos++]>127;);else if(n===Ts.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Ts.Fixed32)this.pos+=4;else{if(n!==Ts.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var u=new Uint8Array(n);u.set(this.buf),this.buf=u,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),yh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),yh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),yh(this.buf,-1&a,this.pos),yh(this.buf,Math.floor(a*Uv),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),yh(this.buf,-1&a,this.pos),yh(this.buf,Math.floor(a*Uv),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,u){var p,v,E,R;if(n>=0?(p=n%4294967296|0,v=n/4294967296|0):(v=~(-n/4294967296),4294967295^(p=~(-n%4294967296))?p=p+1|0:(p=0,v=v+1|0)),n>=0x10000000000000000||n<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),E=p,(R=u).buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,E>>>=7,R.buf[R.pos++]=127&E|128,R.buf[R.pos]=127&(E>>>=7),function(E,M){var R=(7&E)<<4;M.buf[M.pos++]|=R|((E>>>=3)?128:0),E&&(M.buf[M.pos++]=127&E|((E>>>=7)?128:0),E&&(M.buf[M.pos++]=127&E|((E>>>=7)?128:0),E&&(M.buf[M.pos++]=127&E|((E>>>=7)?128:0),E&&(M.buf[M.pos++]=127&E|((E>>>=7)?128:0),E&&(M.buf[M.pos++]=127&E)))))}(v,u)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(p,v,E){for(var M,R,Y=0;Y<v.length;Y++){if((M=v.charCodeAt(Y))>55295&&M<57344){if(!R){M>56319||Y+1===v.length?(p[E++]=239,p[E++]=191,p[E++]=189):R=M;continue}if(M<56320){p[E++]=239,p[E++]=191,p[E++]=189,R=M;continue}M=R-55296<<10|M-56320|65536,R=null}else R&&(p[E++]=239,p[E++]=191,p[E++]=189,R=null);M<128?p[E++]=M:(M<2048?p[E++]=M>>6|192:(M<65536?p[E++]=M>>12|224:(p[E++]=M>>18|240,p[E++]=M>>12&63|128),p[E++]=M>>6&63|128),p[E++]=63&M|128)}return E}(this.buf,a,this.pos);var u=this.pos-n;u>=128&&Wv(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeFloat:function(a){this.realloc(4),jv(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),jv(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var u=0;u<n;u++)this.buf[this.pos++]=a[u]},writeRawMessage:function(a,n){this.pos++;var u=this.pos;a(n,this);var p=this.pos-u;p>=128&&Wv(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(a,n,u){this.writeTag(a,Ts.Bytes),this.writeRawMessage(n,u)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,Ly,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,Oy,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,$v,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,Py,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,Ry,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,Xv,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,Zv,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,kg,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,zy,n)},writeBytesField:function(a,n){this.writeTag(a,Ts.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Ts.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Ts.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Ts.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Ts.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Ts.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Ts.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Ts.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Ts.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Ts.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var mm=gt(Gv);const Ag=3;function Fy(a,n,u){n.glyphs=[],1===a&&u.readMessage(By,n)}function By(a,n,u){if(3===a){const{id:p,bitmap:v,width:E,height:M,left:R,top:Y,advance:j}=u.readMessage(Yd,{});n.glyphs.push({id:p,bitmap:new nu({width:E+2*Ag,height:M+2*Ag},v),metrics:{width:E,height:M,left:R,top:Y,advance:j}})}else 4===a?n.ascender=u.readSVarint():5===a&&(n.descender=u.readSVarint())}function Yd(a,n,u){1===a?n.id=u.readVarint():2===a?n.bitmap=u.readBytes():3===a?n.width=u.readVarint():4===a?n.height=u.readVarint():5===a?n.left=u.readSVarint():6===a?n.top=u.readSVarint():7===a&&(n.advance=u.readVarint())}const qv=Ag;function Kp(a){let n=0,u=0;for(const M of a)n+=M.w*M.h,u=Math.max(u,M.w);a.sort((M,R)=>R.h-M.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),u),h:1/0}];let v=0,E=0;for(const M of a)for(let R=p.length-1;R>=0;R--){const Y=p[R];if(!(M.w>Y.w||M.h>Y.h)){if(M.x=Y.x,M.y=Y.y,E=Math.max(E,M.y+M.h),v=Math.max(v,M.x+M.w),M.w===Y.w&&M.h===Y.h){const j=p.pop();R<p.length&&(p[R]=j)}else M.h===Y.h?(Y.x+=M.w,Y.w-=M.w):M.w===Y.w?(Y.y+=M.h,Y.h-=M.h):(p.push({x:Y.x+M.w,y:Y.y,w:Y.w-M.w,h:M.h}),Y.y+=M.h,Y.h-=M.h);break}}return{w:v,h:E,fill:n/(v*E)||0}}const Ml=1;class gm{constructor(n,{pixelRatio:u,version:p,stretchX:v,stretchY:E,content:M}){this.paddedRect=n,this.pixelRatio=u,this.stretchX=v,this.stretchY=E,this.content=M,this.version=p}get tl(){return[this.paddedRect.x+Ml,this.paddedRect.y+Ml]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ml,this.paddedRect.y+this.paddedRect.h-Ml]}get displaySize(){return[(this.paddedRect.w-2*Ml)/this.pixelRatio,(this.paddedRect.h-2*Ml)/this.pixelRatio]}}class Kv{constructor(n,u){const p={},v={};this.haveRenderCallbacks=[];const E=[];this.addImages(n,p,E),this.addImages(u,v,E);const{w:M,h:R}=Kp(E),Y=new $a({width:M||1,height:R||1});for(const j in n){const ee=n[j],se=p[j].paddedRect;$a.copy(ee.data,Y,{x:0,y:0},{x:se.x+Ml,y:se.y+Ml},ee.data)}for(const j in u){const ee=u[j],se=v[j].paddedRect,ce=se.x+Ml,ve=se.y+Ml,be=ee.data.width,Me=ee.data.height;$a.copy(ee.data,Y,{x:0,y:0},{x:ce,y:ve},ee.data),$a.copy(ee.data,Y,{x:0,y:Me-1},{x:ce,y:ve-1},{width:be,height:1}),$a.copy(ee.data,Y,{x:0,y:0},{x:ce,y:ve+Me},{width:be,height:1}),$a.copy(ee.data,Y,{x:be-1,y:0},{x:ce-1,y:ve},{width:1,height:Me}),$a.copy(ee.data,Y,{x:0,y:0},{x:ce+be,y:ve},{width:1,height:Me})}this.image=Y,this.iconPositions=p,this.patternPositions=v}addImages(n,u,p){for(const v in n){const E=n[v],M={x:0,y:0,w:E.data.width+2*Ml,h:E.data.height+2*Ml};p.push(M),u[v]=new gm(M,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(n,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>n.hasImage(p)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in n.updatedImages)this.patchUpdatedImage(this.iconPositions[p],n.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],n.getImage(p),u)}patchUpdatedImage(n,u,p){if(!n||!u||n.version===u.version)return;n.version=u.version;const[v,E]=n.tl;p.update(u.data,void 0,{x:v,y:E})}}Tn(gm,"ImagePosition"),Tn(Kv,"ImageAtlas");const Zl={horizontal:1,vertical:2,horizontalOnly:3},Jv=-17;class Jp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,u){const p=new Jp;return p.scale=n||1,p.fontStack=u,p}static forImage(n){const u=new Jp;return u.imageName=n,u}}class bh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,u){const p=new bh;for(let v=0;v<n.sections.length;v++){const E=n.sections[v];E.image?p.addImageSection(E):p.addTextSection(E,u)}return p}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(u,p){let v="";for(let E=0;E<u.length;E++){const M=u.charCodeAt(E+1)||null,R=u.charCodeAt(E-1)||null;v+=!p&&(M&&Dh(M)&&!qp[u[E+1]]||R&&Dh(R)&&!qp[u[E-1]])||!qp[u[E]]?u[E]:qp[u[E]]}return v}(this.text,n)}trim(){let n=0;for(let p=0;p<this.text.length&&vm[this.text.charCodeAt(p)];p++)n++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=n&&vm[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(n,u),this.sectionIndex=this.sectionIndex.slice(n,u)}substring(n,u){const p=new bh;return p.text=this.text.substring(n,u),p.sectionIndex=this.sectionIndex.slice(n,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,u)=>Math.max(n,this.sections[u].scale),0)}addTextSection(n,u){this.text+=n.text,this.sections.push(Jp.forText(n.scale,n.fontStack||u));const p=this.sections.length-1;for(let v=0;v<n.text.length;++v)this.sectionIndex.push(p)}addImageSection(n){const u=n.image?n.image.name:"";if(0===u.length)return void xn("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Jp.forImage(u)),this.sectionIndex.push(this.sections.length-1)):xn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Mg(a,n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be){const Me=bh.fromFeature(a,v);se===Zl.vertical&&Me.verticalizePunctuation(ce);let Xe=[];const ut=function(Bt,bi,hi,Oi,nn,Ci){if(!Bt)return[];const Ni=[],Hi=function(yn,On,Cn,wr,ln,Xn){let Cr=0;for(let ts=0;ts<yn.length();ts++){const Er=yn.getSection(ts);Cr+=Qv(yn.getCharCode(ts),Er,wr,ln,On,Xn)}return Cr/Math.max(1,Math.ceil(Cr/Cn))}(Bt,bi,hi,Oi,nn,Ci),Ki=Bt.text.indexOf("\u200b")>=0;let an=0;for(let yn=0;yn<Bt.length();yn++){const On=Bt.getSection(yn),Cn=Bt.getCharCode(yn);if(vm[Cn]||(an+=Qv(Cn,On,Oi,nn,bi,Ci)),yn<Bt.length()-1){const wr=!((Li=Cn)<11904||!(vn["Bopomofo Extended"](Li)||vn.Bopomofo(Li)||vn["CJK Compatibility Forms"](Li)||vn["CJK Compatibility Ideographs"](Li)||vn["CJK Compatibility"](Li)||vn["CJK Radicals Supplement"](Li)||vn["CJK Strokes"](Li)||vn["CJK Symbols and Punctuation"](Li)||vn["CJK Unified Ideographs Extension A"](Li)||vn["CJK Unified Ideographs"](Li)||vn["Enclosed CJK Letters and Months"](Li)||vn["Halfwidth and Fullwidth Forms"](Li)||vn.Hiragana(Li)||vn["Ideographic Description Characters"](Li)||vn["Kangxi Radicals"](Li)||vn["Katakana Phonetic Extensions"](Li)||vn.Katakana(Li)||vn["Vertical Forms"](Li)||vn["Yi Radicals"](Li)||vn["Yi Syllables"](Li)));(Ny[Cn]||wr||On.imageName)&&Ni.push(t_(yn+1,an,Hi,Ni,Yy(Cn,Bt.getCharCode(yn+1),wr&&Ki),!1))}}var Li;return Dg(t_(Bt.length(),an,Hi,Ni,0,!0))}(Me,j,E,n,p,ve),{processBidirectionalText:Lt,processStyledBidirectionalText:ht}=K;if(Lt&&1===Me.sections.length){const Bt=Lt(Me.toString(),ut);for(const bi of Bt){const hi=new bh;hi.text=bi,hi.sections=Me.sections;for(let Oi=0;Oi<bi.length;Oi++)hi.sectionIndex.push(0);Xe.push(hi)}}else if(ht){const Bt=ht(Me.text,Me.sectionIndex,ut);for(const bi of Bt){const hi=new bh;hi.text=bi[0],hi.sectionIndex=bi[1],hi.sections=Me.sections,Xe.push(hi)}}else Xe=function(Bt,bi){const hi=[],Oi=Bt.text;let nn=0;for(const Ci of bi)hi.push(Bt.substring(nn,Ci)),nn=Ci;return nn<Oi.length&&hi.push(Bt.substring(nn,Oi.length)),hi}(Me,ut);const At=[],Nt={positionedLines:At,text:Me.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:se,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Bt,bi,hi,Oi,nn,Ci,Ni,Hi,Ki,an,Li,yn){let On=0,Cn=0,wr=0;const ln="right"===Hi?1:"left"===Hi?0:.5;let Xn=!1;for(const kr of nn){const Ar=kr.getSections();for(const bs of Ar){if(bs.imageName)continue;const ks=bi[bs.fontStack];if(ks&&(Xn=void 0!==ks.ascender&&void 0!==ks.descender,!Xn))break}if(!Xn)break}let Cr=0;for(const kr of nn){kr.trim();const Ar=kr.getMaxScale(),bs=(Ar-1)*ma,ks={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[Cr]=ks;const As=ks.positionedGlyphs;let xs=0;if(!kr.length()){Cn+=Ci,++Cr;continue}let Us=0,no=0;for(let ws=0;ws<kr.length();ws++){const Io=kr.getSection(ws),bo=kr.getSectionIndex(ws),qs=kr.getCharCode(ws);let rs=Io.scale,co=null,Ms=null,hl=null,xo=ma,uo=0;const Jo=!(Ki===Zl.horizontal||!Li&&!bu(qs)||Li&&(vm[qs]||(ts=qs,vn.Arabic(ts)||vn["Arabic Supplement"](ts)||vn["Arabic Extended-A"](ts)||vn["Arabic Presentation Forms-A"](ts)||vn["Arabic Presentation Forms-B"](ts))));if(Io.imageName){const pl=Oi[Io.imageName];if(!pl)continue;hl=Io.imageName,Bt.iconsInText=Bt.iconsInText||!0,Ms=pl.paddedRect;const Qo=pl.displaySize;rs=rs*ma/yn,co={width:Qo[0],height:Qo[1],left:Ml,top:-qv,advance:Jo?Qo[1]:Qo[0],localGlyph:!1},uo=Xn?-co.height*rs:Jv+Ar*ma-Qo[1]*rs,xo=co.advance;const uu=(Jo?Qo[0]:Qo[1])*rs-ma*Ar;uu>0&&uu>xs&&(xs=uu)}else{const pl=hi[Io.fontStack];if(!pl)continue;pl[qs]&&(Ms=pl[qs]);const Qo=bi[Io.fontStack];if(!Qo)continue;const uu=Qo.glyphs[qs];if(!uu)continue;if(co=uu.metrics,xo=8203!==qs?ma:0,Xn){const rp=void 0!==Qo.ascender?Math.abs(Qo.ascender):0,hf=void 0!==Qo.descender?Math.abs(Qo.descender):0,pf=(rp+hf)*rs;Us<pf&&(Us=pf,no=(rp-hf)/2*rs),uo=-rp*rs}else uo=Jv+(Ar-rs)*ma}Jo?(Bt.verticalizable=!0,As.push({glyph:qs,imageName:hl,x:On,y:Cn+uo,vertical:Jo,scale:rs,localGlyph:co.localGlyph,fontStack:Io.fontStack,sectionIndex:bo,metrics:co,rect:Ms}),On+=xo*rs+an):(As.push({glyph:qs,imageName:hl,x:On,y:Cn+uo,vertical:Jo,scale:rs,localGlyph:co.localGlyph,fontStack:Io.fontStack,sectionIndex:bo,metrics:co,rect:Ms}),On+=co.advance*rs+an)}0!==As.length&&(wr=Math.max(On-an,wr),Xn?i_(As,ln,xs,no,Ci*Ar/2):i_(As,ln,xs,0,Ci/2)),On=0;const yo=Ci*Ar+xs;ks.lineOffset=Math.max(xs,bs),Cn+=yo,++Cr}var ts;const Er=Cn,{horizontalAlign:ir,verticalAlign:zs}=_m(Ni);(function(kr,Ar,bs,ks,As,xs){const Us=(Ar-bs)*As,no=-xs*ks;for(const yo of kr)for(const ws of yo.positionedGlyphs)ws.x+=Us,ws.y+=no})(Bt.positionedLines,ln,ir,zs,wr,Er),Bt.top+=-zs*Er,Bt.bottom=Bt.top+Er,Bt.left+=-ir*wr,Bt.right=Bt.left+wr,Bt.hasBaseline=Xn}(Nt,n,u,p,Xe,M,R,Y,se,j,ce,be),!function(Bt){for(const bi of Bt)if(0!==bi.positionedGlyphs.length)return!1;return!0}(At)&&Nt}const vm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ny={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Qv(a,n,u,p,v,E){if(n.imageName){const M=p[n.imageName];return M?M.displaySize[0]*n.scale*ma/E+v:0}{const M=u[n.fontStack],R=M&&M.glyphs[a];return R?R.metrics.advance*n.scale+v:0}}function e_(a,n,u,p){const v=Math.pow(a-n,2);return p?a<n?v/2:2*v:v+Math.abs(u)*u}function Yy(a,n,u){let p=0;return 10===a&&(p-=1e4),u&&(p+=150),40!==a&&65288!==a||(p+=50),41!==n&&65289!==n||(p+=50),p}function t_(a,n,u,p,v,E){let M=null,R=e_(n,u,v,E);for(const Y of p){const j=e_(n-Y.x,u,v,E)+Y.badness;j<=R&&(M=Y,R=j)}return{index:a,x:n,priorBreak:M,badness:R}}function Dg(a){return a?Dg(a.priorBreak).concat(a.index):[]}function _m(a){let n=.5,u=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:n,verticalAlign:u}}function i_(a,n,u,p,v){if(!(n||u||p||v))return;const E=a.length-1,M=a[E],R=(M.x+M.metrics.advance*M.scale)*n;for(let Y=0;Y<=E;Y++)a[Y].x-=R,a[Y].y+=u+p+v}function n_(a,n,u){const{horizontalAlign:p,verticalAlign:v}=_m(u),E=n[0]-a.displaySize[0]*p,M=n[1]-a.displaySize[1]*v;return{image:a,top:M,bottom:M+a.displaySize[1],left:E,right:E+a.displaySize[0]}}function r_(a,n,u,p,v,E){const M=a.image;let R;if(M.content){const Xe=M.content,ut=M.pixelRatio||1;R=[Xe[0]/ut,Xe[1]/ut,M.displaySize[0]-Xe[2]/ut,M.displaySize[1]-Xe[3]/ut]}const Y=n.left*E,j=n.right*E;let ee,se,ce,ve;"width"===u||"both"===u?(ve=v[0]+Y-p[3],se=v[0]+j+p[1]):(ve=v[0]+(Y+j-M.displaySize[0])/2,se=ve+M.displaySize[0]);const be=n.top*E,Me=n.bottom*E;return"height"===u||"both"===u?(ee=v[1]+be-p[0],ce=v[1]+Me+p[2]):(ee=v[1]+(be+Me-M.displaySize[1])/2,ce=ee+M.displaySize[1]),{image:M,top:ee,right:se,bottom:ce,left:ve,collisionPadding:R}}class ou extends at{constructor(n,u,p,v,E){super(n,u),this.angle=v,this.z=p,void 0!==E&&(this.segment=E)}clone(){return new ou(this.x,this.y,this.z,this.angle,this.segment)}}function s_(a,n,u,p,v){if(void 0===n.segment)return!0;let E=n,M=n.segment+1,R=0;for(;R>-u/2;){if(M--,M<0)return!1;R-=a[M].dist(E),E=a[M]}R+=a[M].dist(a[M+1]),M++;const Y=[];let j=0;for(;R<u/2;){const ee=a[M],se=a[M+1];if(!se)return!1;let ce=a[M-1].angleTo(ee)-ee.angleTo(se);for(ce=Math.abs((ce+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:R,angleDelta:ce}),j+=ce;R-Y[0].distance>p;)j-=Y.shift().angleDelta;if(j>v)return!1;M++,R+=ee.dist(se)}return!0}function o_(a){let n=0;for(let u=0;u<a.length-1;u++)n+=a[u].dist(a[u+1]);return n}function Ig(a,n,u){return a?.6*n*u:0}function a_(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function l_(a,n,u,p,v,E){const M=Ig(u,v,E),R=a_(u,p)*E;let Y=0;const j=o_(a)/2;for(let ee=0;ee<a.length-1;ee++){const se=a[ee],ce=a[ee+1],ve=se.dist(ce);if(Y+ve>j){const be=(j-Y)/ve,Me=zn(se.x,ce.x,be),Xe=zn(se.y,ce.y,be),ut=new ou(Me,Xe,0,ce.angleTo(se),ee);return!M||s_(a,ut,R,M,n)?ut:void 0}Y+=ve}}function Hy(a,n,u,p,v,E,M,R,Y){const j=Ig(p,E,M),ee=a_(p,v),se=ee*M,ce=0===a[0].x||a[0].x===Y||0===a[0].y||a[0].y===Y;return n-se<n/4&&(n=se+n/4),c_(a,ce?n/2*R%n:(ee/2+2*E)*M*R%n,n,j,u,se,ce,!1,Y)}function c_(a,n,u,p,v,E,M,R,Y){const j=E/2,ee=o_(a);let se=0,ce=n-u,ve=[];for(let be=0;be<a.length-1;be++){const Me=a[be],Xe=a[be+1],ut=Me.dist(Xe),Lt=Xe.angleTo(Me);for(;ce+u<se+ut;){ce+=u;const ht=(ce-se)/ut,At=zn(Me.x,Xe.x,ht),Nt=zn(Me.y,Xe.y,ht);if(At>=0&&At<Y&&Nt>=0&&Nt<Y&&ce-j>=0&&ce+j<=ee){const Bt=new ou(At,Nt,0,Lt,be);Bt._round(),p&&!s_(a,Bt,E,p,v)||ve.push(Bt)}}se+=ut}return R||ve.length||M||(ve=c_(a,se/2,u,p,v,E,M,!0,Y)),ve}function u_(a,n,u,p,v){const E=[];for(let M=0;M<a.length;M++){const R=a[M];let Y;for(let j=0;j<R.length-1;j++){let ee=R[j],se=R[j+1];ee.x<n&&se.x<n||(ee.x<n?ee=new at(n,ee.y+(n-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round():se.x<n&&(se=new at(n,ee.y+(n-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round()),ee.y<u&&se.y<u||(ee.y<u?ee=new at(ee.x+(u-ee.y)/(se.y-ee.y)*(se.x-ee.x),u)._round():se.y<u&&(se=new at(ee.x+(u-ee.y)/(se.y-ee.y)*(se.x-ee.x),u)._round()),ee.x>=p&&se.x>=p||(ee.x>=p?ee=new at(p,ee.y+(p-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round():se.x>=p&&(se=new at(p,ee.y+(p-ee.x)/(se.x-ee.x)*(se.y-ee.y))._round()),ee.y>=v&&se.y>=v||(ee.y>=v?ee=new at(ee.x+(v-ee.y)/(se.y-ee.y)*(se.x-ee.x),v)._round():se.y>=v&&(se=new at(ee.x+(v-ee.y)/(se.y-ee.y)*(se.x-ee.x),v)._round()),Y&&ee.equals(Y[Y.length-1])||(Y=[ee],E.push(Y)),Y.push(se)))))}}return E}Tn(ou,"Anchor");const Qp=1e20;function d_(a,n,u,p,v,E,M,R,Y){for(let j=n;j<n+p;j++)Lg(a,u*E+j,E,v,M,R,Y);for(let j=u;j<u+v;j++)Lg(a,j*E+n,1,p,M,R,Y)}function Lg(a,n,u,p,v,E,M){E[0]=0,M[0]=-Qp,M[1]=Qp,v[0]=a[n];for(let R=1,Y=0,j=0;R<p;R++){v[R]=a[n+R*u];const ee=R*R;do{const se=E[Y];j=(v[R]-v[se]+ee-se*se)/(R-se)/2}while(j<=M[Y]&&--Y>-1);Y++,E[Y]=R,M[Y]=j,M[Y+1]=Qp}for(let R=0,Y=0;R<p;R++){for(;M[Y+1]<R;)Y++;const j=E[Y],ee=R-j;a[n+R*u]=v[j]+ee*ee}}const au=2,Og={none:0,ideographs:1,all:2};class ef{constructor(n,u,p){this.requestManager=n,this.localGlyphMode=u,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,u){const p=[];for(const v in n)for(const E of n[v])p.push({stack:v,id:E});Ji(p,({stack:v,id:E},M)=>{let R=this.entries[v];R||(R=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Y=R.glyphs[E];if(void 0!==Y)return void M(null,{stack:v,id:E,glyph:Y});if(Y=this._tinySDF(R,v,E),Y)return R.glyphs[E]=Y,void M(null,{stack:v,id:E,glyph:Y});const j=Math.floor(E/256);if(256*j>65535)return void M(new Error("glyphs > 65535 not supported"));if(R.ranges[j])return void M(null,{stack:v,id:E,glyph:Y});let ee=R.requests[j];ee||(ee=R.requests[j]=[],ef.loadGlyphRange(v,j,this.url,this.requestManager,(se,ce)=>{if(ce){R.ascender=ce.ascender,R.descender=ce.descender;for(const ve in ce.glyphs)this._doesCharSupportLocalGlyph(+ve)||(R.glyphs[+ve]=ce.glyphs[+ve]);R.ranges[j]=!0}for(const ve of ee)ve(se,ce);delete R.requests[j]})),ee.push((se,ce)=>{se?M(se):ce&&M(null,{stack:v,id:E,glyph:ce.glyphs[E]||null})})},(v,E)=>{if(v)u(v);else if(E){const M={};for(const{stack:R,id:Y,glyph:j}of E)void 0===M[R]&&(M[R]={}),void 0===M[R].glyphs&&(M[R].glyphs={}),M[R].glyphs[Y]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics},M[R].ascender=this.entries[R].ascender,M[R].descender=this.entries[R].descender;u(null,M)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==Og.none&&(this.localGlyphMode===Og.all?!!this.localFontFamily:!!this.localFontFamily&&(vn["CJK Unified Ideographs"](n)||vn["Hangul Syllables"](n)||vn.Hiragana(n)||vn.Katakana(n)||vn["CJK Symbols and Punctuation"](n)))}_tinySDF(n,u,p){const v=this.localFontFamily;if(!v||!this._doesCharSupportLocalGlyph(p))return;let E=n.tinySDF;if(!E){let Me="400";/bold/i.test(u)?Me="900":/medium/i.test(u)?Me="500":/light/i.test(u)&&(Me="200"),E=n.tinySDF=new ef.TinySDF({fontFamily:v,fontWeight:Me,fontSize:24*au,buffer:3*au,radius:8*au}),E.fontWeight=Me}if(this.localGlyphs[E.fontWeight][p])return this.localGlyphs[E.fontWeight][p];const M=String.fromCharCode(p),{data:R,width:Y,height:j,glyphWidth:ee,glyphHeight:se,glyphLeft:ce,glyphTop:ve,glyphAdvance:be}=E.draw(M);return this.localGlyphs[E.fontWeight][p]={id:p,bitmap:new nu({width:Y,height:j},R),metrics:{width:ee/au,height:se/au,left:ce/au,top:ve/au-27,advance:be/au,localGlyph:!0}}}}ef.loadGlyphRange=function(a,n,u,p,v){const E=256*n,M=E+255,R=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",a).replace("{range}",`${E}-${M}`),Cs.Glyphs);Tr(R,(Y,j)=>{if(Y)v(Y);else if(j){const ee={},se=new mm(j).readFields(Fy,{});for(const ce of se.glyphs)ee[ce.id]=ce;v(null,{glyphs:ee,ascender:se.ascender,descender:se.descender})}})},ef.TinySDF=class{constructor({fontSize:a=24,buffer:n=3,radius:u=8,cutoff:p=.25,fontFamily:v="sans-serif",fontWeight:E="normal",fontStyle:M="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=u;const R=this.size=a+4*n,Y=this._createCanvas(R),j=this.ctx=Y.getContext("2d",{willReadFrequently:!0});j.font=`${M} ${E} ${a}px ${v}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(a){const n=document.createElement("canvas");return n.width=n.height=a,n}draw(a){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:v,actualBoundingBoxRight:E}=this.ctx.measureText(a),M=Math.ceil(u),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-v))),Y=Math.min(this.size-this.buffer,M+Math.ceil(p)),j=R+2*this.buffer,ee=Y+2*this.buffer,se=Math.max(j*ee,0),ce=new Uint8ClampedArray(se),ve={data:ce,width:j,height:ee,glyphWidth:R,glyphHeight:Y,glyphTop:M,glyphLeft:0,glyphAdvance:n};if(0===R||0===Y)return ve;const{ctx:be,buffer:Me,gridInner:Xe,gridOuter:ut}=this;be.clearRect(Me,Me,R,Y),be.fillText(a,Me,Me+M);const Lt=be.getImageData(Me,Me,R,Y);ut.fill(Qp,0,se),Xe.fill(0,0,se);for(let ht=0;ht<Y;ht++)for(let At=0;At<R;At++){const Nt=Lt.data[4*(ht*R+At)+3]/255;if(0===Nt)continue;const Bt=(ht+Me)*j+At+Me;if(1===Nt)ut[Bt]=0,Xe[Bt]=Qp;else{const bi=.5-Nt;ut[Bt]=bi>0?bi*bi:0,Xe[Bt]=bi<0?bi*bi:0}}d_(ut,0,0,j,ee,j,this.f,this.v,this.z),d_(Xe,Me,Me,R,Y,j,this.f,this.v,this.z);for(let ht=0;ht<se;ht++){const At=Math.sqrt(ut[ht])-Math.sqrt(Xe[ht]);ce[ht]=Math.round(255-255*(At/this.radius+this.cutoff))}return ve}};const Jh=Ml;function Vy(a,n,u,p){const v=[],E=a.image,M=E.pixelRatio,R=E.paddedRect.w-2*Jh,Y=E.paddedRect.h-2*Jh,j=a.right-a.left,ee=a.bottom-a.top,se=E.stretchX||[[0,R]],ce=E.stretchY||[[0,Y]],ve=(Ci,Ni)=>Ci+Ni[1]-Ni[0],be=se.reduce(ve,0),Me=ce.reduce(ve,0),Xe=R-be,ut=Y-Me;let Lt=0,ht=be,At=0,Nt=Me,Bt=0,bi=Xe,hi=0,Oi=ut;if(E.content&&p){const Ci=E.content;Lt=ym(se,0,Ci[0]),At=ym(ce,0,Ci[1]),ht=ym(se,Ci[0],Ci[2]),Nt=ym(ce,Ci[1],Ci[3]),Bt=Ci[0]-Lt,hi=Ci[1]-At,bi=Ci[2]-Ci[0]-ht,Oi=Ci[3]-Ci[1]-Nt}const nn=(Ci,Ni,Hi,Ki)=>{const an=Pg(Ci.stretch-Lt,ht,j,a.left),Li=bm(Ci.fixed-Bt,bi,Ci.stretch,be),yn=Pg(Ni.stretch-At,Nt,ee,a.top),On=bm(Ni.fixed-hi,Oi,Ni.stretch,Me),Cn=Pg(Hi.stretch-Lt,ht,j,a.left),wr=bm(Hi.fixed-Bt,bi,Hi.stretch,be),ln=Pg(Ki.stretch-At,Nt,ee,a.top),Xn=bm(Ki.fixed-hi,Oi,Ki.stretch,Me),Cr=new at(an,yn),ts=new at(Cn,yn),Er=new at(Cn,ln),ir=new at(an,ln),zs=new at(Li/M,On/M),kr=new at(wr/M,Xn/M),Ar=n*Math.PI/180;if(Ar){const As=Math.sin(Ar),xs=Math.cos(Ar),Us=[xs,-As,As,xs];Cr._matMult(Us),ts._matMult(Us),ir._matMult(Us),Er._matMult(Us)}const bs=Ci.stretch+Ci.fixed,ks=Ni.stretch+Ni.fixed;return{tl:Cr,tr:ts,bl:ir,br:Er,tex:{x:E.paddedRect.x+Jh+bs,y:E.paddedRect.y+Jh+ks,w:Hi.stretch+Hi.fixed-bs,h:Ki.stretch+Ki.fixed-ks},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:zs,pixelOffsetBR:kr,minFontScaleX:bi/M/j,minFontScaleY:Oi/M/ee,isSDF:u}};if(p&&(E.stretchX||E.stretchY)){const Ci=Gy(se,Xe,be),Ni=Gy(ce,ut,Me);for(let Hi=0;Hi<Ci.length-1;Hi++){const Ki=Ci[Hi],an=Ci[Hi+1];for(let Li=0;Li<Ni.length-1;Li++)v.push(nn(Ki,Ni[Li],an,Ni[Li+1]))}}else v.push(nn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:Y+1}));return v}function ym(a,n,u){let p=0;for(const v of a)p+=Math.max(n,Math.min(u,v[1]))-Math.max(n,Math.min(u,v[0]));return p}function Gy(a,n,u){const p=[{fixed:-Jh,stretch:0}];for(const[v,E]of a){const M=p[p.length-1];p.push({fixed:v-M.stretch,stretch:M.stretch}),p.push({fixed:v-M.stretch,stretch:M.stretch+(E-v)})}return p.push({fixed:n+Jh,stretch:u}),p}function Pg(a,n,u,p){return a/n*u+p}function bm(a,n,u,p){return a-n*u/p}function jy(a,n,u,p){const v=n+a.positionedLines[p].lineOffset;return 0===p?u+v/2:u+(v+(n+a.positionedLines[p-1].lineOffset))/2}class Db{constructor(n=[],u=Ib){if(this.data=n,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const n=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:u,compare:p}=this,v=u[n];for(;n>0;){const E=n-1>>1,M=u[E];if(p(v,M)>=0)break;u[n]=M,n=E}u[n]=v}_down(n){const{data:u,compare:p}=this,v=this.length>>1,E=u[n];for(;n<v;){let M=1+(n<<1),R=u[M];const Y=M+1;if(Y<this.length&&p(u[Y],R)<0&&(M=Y,R=u[Y]),p(R,E)>=0)break;u[n]=R,n=M}u[n]=E}}function Ib(a,n){return a<n?-1:a>n?1:0}function Uy(a,n=1,u=!1){let p=1/0,v=1/0,E=-1/0,M=-1/0;const R=a[0];for(let ve=0;ve<R.length;ve++){const be=R[ve];(!ve||be.x<p)&&(p=be.x),(!ve||be.y<v)&&(v=be.y),(!ve||be.x>E)&&(E=be.x),(!ve||be.y>M)&&(M=be.y)}const Y=Math.min(E-p,M-v);let j=Y/2;const ee=new Db([],Wy);if(0===Y)return new at(p,v);for(let ve=p;ve<E;ve+=Y)for(let be=v;be<M;be+=Y)ee.push(new Qh(ve+j,be+j,j,a));let se=function(ve){let be=0,Me=0,Xe=0;const ut=ve[0];for(let Lt=0,ht=ut.length,At=ht-1;Lt<ht;At=Lt++){const Nt=ut[Lt],Bt=ut[At],bi=Nt.x*Bt.y-Bt.x*Nt.y;Me+=(Nt.x+Bt.x)*bi,Xe+=(Nt.y+Bt.y)*bi,be+=3*bi}return new Qh(Me/be,Xe/be,0,ve)}(a),ce=ee.length;for(;ee.length;){const ve=ee.pop();(ve.d>se.d||!se.d)&&(se=ve,u&&console.log("found best %d after %d probes",Math.round(1e4*ve.d)/1e4,ce)),ve.max-se.d<=n||(j=ve.h/2,ee.push(new Qh(ve.p.x-j,ve.p.y-j,j,a)),ee.push(new Qh(ve.p.x+j,ve.p.y-j,j,a)),ee.push(new Qh(ve.p.x-j,ve.p.y+j,j,a)),ee.push(new Qh(ve.p.x+j,ve.p.y+j,j,a)),ce+=4)}return u&&(console.log(`num probes: ${ce}`),console.log(`best distance: ${se.d}`)),se.p}function Wy(a,n){return n.max-a.max}class Qh{constructor(n,u,p,v){this.p=new at(n,u),this.h=p,this.d=function(E,M){let R=!1,Y=1/0;for(let j=0;j<M.length;j++){const ee=M[j];for(let se=0,ce=ee.length,ve=ce-1;se<ce;ve=se++){const be=ee[se],Me=ee[ve];be.y>E.y!=Me.y>E.y&&E.x<(Me.x-be.x)*(E.y-be.y)/(Me.y-be.y)+be.x&&(R=!R),Y=Math.min(Y,iu(E,be,Me))}}return(R?1:-1)*Math.sqrt(Y)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}}const xh=7,Rg=Number.POSITIVE_INFINITY,$y=Math.sqrt(2);function h_(a,[n,u]){let p=0,v=0;if(u===Rg){n<0&&(n=0);const E=n/$y;switch(a){case"top-right":case"top-left":v=E-xh;break;case"bottom-right":case"bottom-left":v=-E+xh;break;case"bottom":v=-n+xh;break;case"top":v=n-xh}switch(a){case"top-right":case"bottom-right":p=-E;break;case"top-left":case"bottom-left":p=E;break;case"left":p=n;break;case"right":p=-n}}else{switch(n=Math.abs(n),u=Math.abs(u),a){case"top-right":case"top-left":case"top":v=u-xh;break;case"bottom-right":case"bottom-left":case"bottom":v=-u+xh}switch(a){case"top-right":case"bottom-right":case"right":p=-n;break;case"top-left":case"bottom-left":case"left":p=n}}return[p,v]}function Xy(a,n,u,p,v,E,M,R,Y,j){a.createArrays(),a.tilePixelRatio=An/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const ee=a.layers[0].layout,se=a.layers[0]._unevaluatedLayout._values,ce={};if("composite"===a.textSizeData.kind){const{minZoom:Me,maxZoom:Xe}=a.textSizeData;ce.compositeTextSizes=[se["text-size"].possiblyEvaluate(new te(Me),R),se["text-size"].possiblyEvaluate(new te(Xe),R)]}if("composite"===a.iconSizeData.kind){const{minZoom:Me,maxZoom:Xe}=a.iconSizeData;ce.compositeIconSizes=[se["icon-size"].possiblyEvaluate(new te(Me),R),se["icon-size"].possiblyEvaluate(new te(Xe),R)]}ce.layoutTextSize=se["text-size"].possiblyEvaluate(new te(Y+1),R),ce.layoutIconSize=se["icon-size"].possiblyEvaluate(new te(Y+1),R),ce.textMaxSize=se["text-size"].possiblyEvaluate(new te(18),R);const ve="map"===ee.get("text-rotation-alignment")&&"point"!==ee.get("symbol-placement"),be=ee.get("text-size");for(const Me of a.features){const Xe=ee.get("text-font").evaluate(Me,{},R).join(","),ut=be.evaluate(Me,{},R),Lt=ce.layoutTextSize.evaluate(Me,{},R),ht=(ce.layoutIconSize.evaluate(Me,{},R),{horizontal:{},vertical:void 0}),At=Me.text;let Nt,Bt=[0,0];if(At){const Oi=At.toString(),nn=ee.get("text-letter-spacing").evaluate(Me,{},R)*ma,Ci=ee.get("text-line-height").evaluate(Me,{},R)*ma,Ni=hp(Oi)?nn:0,Hi=ee.get("text-anchor").evaluate(Me,{},R),Ki=ee.get("text-variable-anchor");if(!Ki){const Cn=ee.get("text-radial-offset").evaluate(Me,{},R);Bt=Cn?h_(Hi,[Cn*ma,Rg]):ee.get("text-offset").evaluate(Me,{},R).map(wr=>wr*ma)}let an=ve?"center":ee.get("text-justify").evaluate(Me,{},R);const Li="point"===ee.get("symbol-placement"),yn=Li?ee.get("text-max-width").evaluate(Me,{},R)*ma:1/0,On=Cn=>{a.allowVerticalPlacement&&Wu(Oi)&&(ht.vertical=Mg(At,n,u,v,Xe,yn,Ci,Hi,Cn,Ni,Bt,Zl.vertical,!0,Lt,ut))};if(!ve&&Ki){const Cn="auto"===an?Ki.map(ln=>zg(ln)):[an];let wr=!1;for(let ln=0;ln<Cn.length;ln++){const Xn=Cn[ln];if(!ht.horizontal[Xn])if(wr)ht.horizontal[Xn]=ht.horizontal[0];else{const Cr=Mg(At,n,u,v,Xe,yn,Ci,"center",Xn,Ni,Bt,Zl.horizontal,!1,Lt,ut);Cr&&(ht.horizontal[Xn]=Cr,wr=1===Cr.positionedLines.length)}}On("left")}else{if("auto"===an&&(an=zg(Hi)),Li||ee.get("text-writing-mode").indexOf("horizontal")>=0||!Wu(Oi)){const Cn=Mg(At,n,u,v,Xe,yn,Ci,Hi,an,Ni,Bt,Zl.horizontal,!1,Lt,ut);Cn&&(ht.horizontal[an]=Cn)}On(Li?"left":an)}}let bi=!1;if(Me.icon&&Me.icon.name){const Oi=p[Me.icon.name];Oi&&(Nt=n_(v[Me.icon.name],ee.get("icon-offset").evaluate(Me,{},R),ee.get("icon-anchor").evaluate(Me,{},R)),bi=Oi.sdf,void 0===a.sdfIcons?a.sdfIcons=Oi.sdf:a.sdfIcons!==Oi.sdf&&xn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Oi.pixelRatio!==a.pixelRatio||0!==ee.get("icon-rotate").constantOr(1))&&(a.iconsNeedLinear=!0))}const hi=f_(ht.horizontal)||ht.vertical;a.iconsInText||(a.iconsInText=!!hi&&hi.iconsInText),(hi||Nt)&&Zy(a,Me,ht,Nt,p,ce,Lt,0,Bt,bi,M,R,j)}E&&a.generateCollisionDebugBuffers(Y,a.collisionBoxArray)}function zg(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zy(a,n,u,p,v,E,M,R,Y,j,ee,se,ce){let ve=E.textMaxSize.evaluate(n,{},se);void 0===ve&&(ve=M);const be=a.layers[0].layout,Me=be.get("icon-offset").evaluate(n,{},se),Xe=f_(u.horizontal)||u.vertical,ut="globe"===ce.name,Lt=ma,ht=M/Lt,At=a.tilePixelRatio*ve/Lt,Nt=(Hi=a.overscaling,a.zoom>18&&Hi>2&&(Hi>>=1),Math.max(An/(512*Hi),1)*be.get("symbol-spacing")),Bt=be.get("text-padding")*a.tilePixelRatio,bi=be.get("icon-padding")*a.tilePixelRatio,hi=Vt(be.get("text-max-angle")),Oi="map"===be.get("text-rotation-alignment")&&"point"!==be.get("symbol-placement"),nn="map"===be.get("icon-rotation-alignment")&&"point"!==be.get("symbol-placement"),Ci=be.get("symbol-placement"),Ni=Nt/2;var Hi;const Ki=be.get("icon-text-fit");let an;p&&"none"!==Ki&&(a.allowVerticalPlacement&&u.vertical&&(an=r_(p,u.vertical,Ki,be.get("icon-text-fit-padding"),Me,ht)),Xe&&(p=r_(p,Xe,Ki,be.get("icon-text-fit-padding"),Me,ht)));const Li=(yn,On,Cn)=>{if(On.x<0||On.x>=An||On.y<0||On.y>=An)return;let wr=null;if(ut){const{x:ln,y:Xn,z:Cr}=ce.projectTilePoint(On.x,On.y,Cn);wr={anchor:new ou(ln,Xn,Cr,0,void 0),up:ce.upVector(Cn,On.x,On.y)}}!function(ln,Xn,Cr,ts,Er,ir,zs,kr,Ar,bs,ks,As,xs,Us,no,yo,ws,Io,bo,qs,rs,co,Ms,hl,xo){const uo=ln.addToLineVertexArray(Xn,ts);let Jo,pl,Qo,uu,rp,hf,pf,B_=0,N_=0,Y_=0,H_=0,tv=-1,iv=-1;const Nu={};let V_=md("");const Eh=Cr?Cr.anchor:Xn;let nv=0,rv=0;if(void 0===Ar._unevaluatedLayout.getValue("text-radial-offset")?[nv,rv]=Ar.layout.get("text-offset").evaluate(rs,{},xo).map(ql=>ql*ma):(nv=Ar.layout.get("text-radial-offset").evaluate(rs,{},xo)*ma,rv=Rg),ln.allowVerticalPlacement&&Er.vertical){const ql=Er.vertical;if(no)hf=Fg(ql),kr&&(pf=Fg(kr));else{const Dl=Ar.layout.get("text-rotate").evaluate(rs,{},xo)+90;Qo=xm(bs,Eh,Xn,ks,As,xs,ql,Us,Dl,yo),kr&&(uu=xm(bs,Eh,Xn,ks,As,xs,kr,Io,Dl))}}if(ir){const ql=Ar.layout.get("icon-rotate").evaluate(rs,{},xo),Dl="none"!==Ar.layout.get("icon-text-fit"),ff=Vy(ir,ql,Ms,Dl),ov=kr?Vy(kr,ql,Ms,Dl):void 0;pl=xm(bs,Eh,Xn,ks,As,xs,ir,Io,ql),B_=4*ff.length;const mf=ln.iconSizeData;let Ud=null;"source"===mf.kind?(Ud=[wc*Ar.layout.get("icon-size").evaluate(rs,{},xo)],Ud[0]>Hd&&xn(`${ln.layerIds[0]}: Value for "icon-size" is >= ${tf}. Reduce your "icon-size".`)):"composite"===mf.kind&&(Ud=[wc*co.compositeIconSizes[0].evaluate(rs,{},xo),wc*co.compositeIconSizes[1].evaluate(rs,{},xo)],(Ud[0]>Hd||Ud[1]>Hd)&&xn(`${ln.layerIds[0]}: Value for "icon-size" is >= ${tf}. Reduce your "icon-size".`)),ln.addSymbols(ln.icon,ff,Ud,qs,bo,rs,!1,Cr,Xn,uo.lineStartIndex,uo.lineLength,-1,hl,xo),tv=ln.icon.placedSymbolArray.length-1,ov&&(N_=4*ov.length,ln.addSymbols(ln.icon,ov,Ud,qs,bo,rs,Zl.vertical,Cr,Xn,uo.lineStartIndex,uo.lineLength,-1,hl,xo),iv=ln.icon.placedSymbolArray.length-1)}for(const ql in Er.horizontal){const Dl=Er.horizontal[ql];Jo||(V_=md(Dl.text),no?rp=Fg(Dl):Jo=xm(bs,Eh,Xn,ks,As,xs,Dl,Us,Ar.layout.get("text-rotate").evaluate(rs,{},xo),yo));const ff=1===Dl.positionedLines.length;if(Y_+=p_(ln,Cr,Xn,Dl,zs,Ar,no,rs,yo,uo,Er.vertical?Zl.horizontal:Zl.horizontalOnly,ff?Object.keys(Er.horizontal):[ql],Nu,tv,co,hl,xo),ff)break}Er.vertical&&(H_+=p_(ln,Cr,Xn,Er.vertical,zs,Ar,no,rs,yo,uo,Zl.vertical,["vertical"],Nu,iv,co,hl,xo));let jd=-1;const sv=(ql,Dl)=>ql?Math.max(ql,Dl):Dl;jd=sv(rp,jd),jd=sv(hf,jd),jd=sv(pf,jd);const m0=jd>-1?1:0;ln.glyphOffsetArray.length>=ud.MAX_GLYPHS&&xn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==rs.sortKey&&ln.addToSortKeyRanges(ln.symbolInstances.length,rs.sortKey),ln.symbolInstances.emplaceBack(Eh.x,Eh.y,Eh.z,Xn.x,Xn.y,Nu.right>=0?Nu.right:-1,Nu.center>=0?Nu.center:-1,Nu.left>=0?Nu.left:-1,Nu.vertical>=0?Nu.vertical:-1,tv,iv,V_,void 0!==Jo?Jo:ln.collisionBoxArray.length,void 0!==Jo?Jo+1:ln.collisionBoxArray.length,void 0!==Qo?Qo:ln.collisionBoxArray.length,void 0!==Qo?Qo+1:ln.collisionBoxArray.length,void 0!==pl?pl:ln.collisionBoxArray.length,void 0!==pl?pl+1:ln.collisionBoxArray.length,uu||ln.collisionBoxArray.length,uu?uu+1:ln.collisionBoxArray.length,ks,Y_,H_,B_,N_,m0,0,nv,rv,jd)}(a,On,wr,yn,u,p,v,an,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,Bt,Oi,Y,0,bi,nn,Me,n,E,j,ee,se)};if("line"===Ci)for(const yn of u_(n.geometry,0,0,An,An)){const On=Hy(yn,Nt,hi,u.vertical||Xe,p,Lt,At,a.overscaling,An);for(const Cn of On)Xe&&qy(a,Xe.text,Ni,Cn)||Li(yn,Cn,se)}else if("line-center"===Ci){for(const yn of n.geometry)if(yn.length>1){const On=l_(yn,hi,u.vertical||Xe,p,Lt,At);On&&Li(yn,On,se)}}else if("Polygon"===n.type)for(const yn of gh(n.geometry,0)){const On=Uy(yn,16);Li(yn[0],new ou(On.x,On.y,0,0,void 0),se)}else if("LineString"===n.type)for(const yn of n.geometry)Li(yn,new ou(yn[0].x,yn[0].y,0,0,void 0),se);else if("Point"===n.type)for(const yn of n.geometry)for(const On of yn)Li([On],new ou(On.x,On.y,0,0,void 0),se)}const tf=255,Hd=tf*wc;function p_(a,n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be,Me,Xe){const ut=function(At,Nt,Bt,bi,hi,Oi,nn,Ci){const Ni=[];if(0===Nt.positionedLines.length)return Ni;const Hi=bi.layout.get("text-rotate").evaluate(Oi,{})*Math.PI/180,Ki=function(Cn){const wr=Cn[0],ln=Cn[1],Xn=wr*ln;return Xn>0?[wr,-ln]:Xn<0?[-wr,ln]:0===wr?[ln,wr]:[ln,-wr]}(Bt);let an=Math.abs(Nt.top-Nt.bottom);for(const Cn of Nt.positionedLines)an-=Cn.lineOffset;const Li=Nt.positionedLines.length,yn=an/Li;let On=Nt.top-Bt[1];for(let Cn=0;Cn<Li;++Cn){const wr=Nt.positionedLines[Cn];On=jy(Nt,yn,On,Cn);for(const ln of wr.positionedGlyphs){if(!ln.rect)continue;const Xn=ln.rect||{};let Cr=qv+1,ts=!0,Er=1,ir=0;if(ln.imageName){const Ms=nn[ln.imageName];if(!Ms)continue;if(Ms.sdf){xn("SDF images are not supported in formatted text and will be ignored.");continue}ts=!1,Er=Ms.pixelRatio,Cr=Ml/Er}const zs=(hi||Ci)&&ln.vertical,kr=ln.metrics.advance*ln.scale/2,Ar=ln.metrics,bs=ln.rect;if(null===bs)continue;Ci&&Nt.verticalizable&&(ir=ln.imageName?kr-ln.metrics.width*ln.scale/2:0);const ks=hi?[ln.x+kr,ln.y]:[0,0];let As=[0,0],xs=[0,0],Us=!1;hi||(zs?(xs=[ln.x+kr+Ki[0],ln.y+Ki[1]-ir],Us=!0):As=[ln.x+kr+Bt[0],ln.y+Bt[1]-ir]);const no=bs.w*ln.scale/(Er*(ln.localGlyph?au:1)),yo=bs.h*ln.scale/(Er*(ln.localGlyph?au:1));let ws,Io,bo,qs;if(zs){const Ms=ln.y-On,hl=new at(-kr,kr-Ms),xo=-Math.PI/2,uo=new at(...xs);ws=new at(-kr+As[0],As[1]),ws._rotateAround(xo,hl)._add(uo),ws.x+=-Ms+kr,ws.y-=(Ar.left-Cr)*ln.scale;const Jo=ln.imageName?Ar.advance*ln.scale:ma*ln.scale,pl=String.fromCharCode(ln.glyph);Hv(pl)?ws.x+=(1-Cr)*ln.scale:Vv(pl)?ws.x+=Jo-Ar.height*ln.scale+(-Cr-1)*ln.scale:ws.x+=ln.imageName||Ar.width+2*Cr===bs.w&&Ar.height+2*Cr===bs.h?(Jo-yo)/2:(Jo-(Ar.height+2*Cr)*ln.scale)/2,Io=new at(ws.x,ws.y-no),bo=new at(ws.x+yo,ws.y),qs=new at(ws.x+yo,ws.y-no)}else{const Ms=(Ar.left-Cr)*ln.scale-kr+As[0],hl=(-Ar.top-Cr)*ln.scale+As[1],xo=Ms+no,uo=hl+yo;ws=new at(Ms,hl),Io=new at(xo,hl),bo=new at(Ms,uo),qs=new at(xo,uo)}if(Hi){let Ms;Ms=hi?new at(0,0):Us?new at(Ki[0],Ki[1]):new at(Bt[0],Bt[1]),ws._rotateAround(Hi,Ms),Io._rotateAround(Hi,Ms),bo._rotateAround(Hi,Ms),qs._rotateAround(Hi,Ms)}const rs=new at(0,0),co=new at(0,0);Ni.push({tl:ws,tr:Io,bl:bo,br:qs,tex:Xn,writingMode:Nt.writingMode,glyphOffset:ks,sectionIndex:ln.sectionIndex,isSDF:ts,pixelOffsetTL:rs,pixelOffsetBR:co,minFontScaleX:0,minFontScaleY:0})}}return Ni}(0,p,Y,E,M,R,v,a.allowVerticalPlacement),Lt=a.textSizeData;let ht=null;"source"===Lt.kind?(ht=[wc*E.layout.get("text-size").evaluate(R,{},Xe)],ht[0]>Hd&&xn(`${a.layerIds[0]}: Value for "text-size" is >= ${tf}. Reduce your "text-size".`)):"composite"===Lt.kind&&(ht=[wc*be.compositeTextSizes[0].evaluate(R,{},Xe),wc*be.compositeTextSizes[1].evaluate(R,{},Xe)],(ht[0]>Hd||ht[1]>Hd)&&xn(`${a.layerIds[0]}: Value for "text-size" is >= ${tf}. Reduce your "text-size".`)),a.addSymbols(a.text,ut,ht,Y,M,R,ee,n,u,j.lineStartIndex,j.lineLength,ve,Me,Xe);for(const At of se)ce[At]=a.text.placedSymbolArray.length-1;return 4*ut.length}function f_(a){for(const n in a)return a[n];return null}function xm(a,n,u,p,v,E,M,R,Y,j){let ee=M.top,se=M.bottom,ce=M.left,ve=M.right;const be=M.collisionPadding;if(be&&(ce-=be[0],ee-=be[1],ve+=be[2],se+=be[3]),Y){const Me=new at(ce,ee),Xe=new at(ve,ee),ut=new at(ce,se),Lt=new at(ve,se),ht=Vt(Y);let At=new at(0,0);j&&(At=new at(j[0],j[1])),Me._rotateAround(ht,At),Xe._rotateAround(ht,At),ut._rotateAround(ht,At),Lt._rotateAround(ht,At),ce=Math.min(Me.x,Xe.x,ut.x,Lt.x),ve=Math.max(Me.x,Xe.x,ut.x,Lt.x),ee=Math.min(Me.y,Xe.y,ut.y,Lt.y),se=Math.max(Me.y,Xe.y,ut.y,Lt.y)}return a.emplaceBack(n.x,n.y,n.z,u.x,u.y,ce,ee,ve,se,R,p,v,E),a.length-1}function Fg(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const n=a.bottom-a.top;return n>0?Math.max(10,n):null}function qy(a,n,u,p){const v=a.compareText;if(n in v){const E=v[n];for(let M=E.length-1;M>=0;M--)if(p.dist(E[M])<u)return!0}else v[n]=[];return v[n].push(p),!1}function m_(a,n){const u=a.fovAboveCenter,p=a.elevation?a.elevation.getMinElevationBelowMSL()*n:0,v=(a._camera.position[2]*a.worldSize-p)/Math.cos(a._pitch),E=Math.sin(u)*v/Math.sin(Math.max(Math.PI/2-a._pitch-u,.01)),M=Math.sin(a._pitch)*E+v;return Math.min(1.01*M,v*(1/a._horizonShift))}function ld(a,n){if(!n.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:n};const u=Math.pow(2,-a.z),p=a.x*u,v=(a.x+1)*u,E=a.y*u,M=(a.y+1)*u,R=kl(p),Y=kl(v),j=Ko(E),ee=Ko(M),se=n.project(R,j),ce=n.project(Y,j),ve=n.project(Y,ee),be=n.project(R,ee);let Me=Math.min(se.x,ce.x,ve.x,be.x),Xe=Math.min(se.y,ce.y,ve.y,be.y),ut=Math.max(se.x,ce.x,ve.x,be.x),Lt=Math.max(se.y,ce.y,ve.y,be.y);const ht=u/16;function At(Bt,bi,hi,Oi,nn,Ci){const Ni=(hi+nn)/2,Hi=(Oi+Ci)/2,Ki=n.project(kl(Ni),Ko(Hi)),an=Math.max(0,Me-Ki.x,Xe-Ki.y,Ki.x-ut,Ki.y-Lt);Me=Math.min(Me,Ki.x),ut=Math.max(ut,Ki.x),Xe=Math.min(Xe,Ki.y),Lt=Math.max(Lt,Ki.y),an>ht&&(At(Bt,Ki,hi,Oi,Ni,Hi),At(Ki,bi,Ni,Hi,nn,Ci))}At(se,ce,p,E,v,E),At(ce,ve,v,E,v,M),At(ve,be,v,M,p,M),At(be,se,p,M,p,E),Me-=ht,Xe-=ht,ut+=ht,Lt+=ht;const Nt=1/Math.max(ut-Me,Lt-Xe);return{scale:Nt,x:Me*Nt,y:Xe*Nt,x2:ut*Nt,y2:Lt*Nt,projection:n}}const Ky=Sl(new Float32Array(16));class cd{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,u){return{x:0,y:0,z:0}}unproject(n,u){return new fs(0,0)}projectTilePoint(n,u,p){return{x:n,y:u,z:0}}locationPoint(n,u,p=!0){return n._coordinatePoint(n.locationCoordinate(u),p)}pixelsPerMeter(n,u){return vc(1,n)*u}pixelSpaceConversion(n,u,p){return 1}farthestPixelDistance(n){return m_(n,n.pixelsPerMeter)}pointCoordinate(n,u,p,v){const E=n.horizonLineFromTop(!1),M=new at(u,Math.max(E,p));return n.rayIntersectionCoordinate(n.pointRayIntersection(M,v))}pointCoordinate3D(n,u,p){const v=new at(u,p);if(n.elevation)return n.elevation.pointCoordinate(v);{const E=this.pointCoordinate(n,v.x,v.y,0);return[E.x,E.y,E.z]}}isPointAboveHorizon(n,u){if(n.elevation)return!this.pointCoordinate3D(n,u.x,u.y);const p=n.horizonLineFromTop();return u.y<p}createInversionMatrix(n,u){return Ky}createTileMatrix(n,u,p){let v,E,M;const R=p.canonical,Y=Sl(new Float64Array(16));if(this.isReprojectedInTileSpace){const j=ld(R,this);v=1,E=j.x+p.wrap*j.scale,M=j.y,Rc(Y,Y,[v/j.scale,v/j.scale,n.pixelsPerMeter/u])}else v=u/n.zoomScale(R.z),E=(R.x+Math.pow(2,R.z)*p.wrap)*v,M=R.y*v;return vd(Y,Y,[E,M,0]),Rc(Y,Y,[v/An,v/An,1]),Y}upVector(n,u,p){return[0,0,1]}upVectorScale(n,u,p){return{metersToTile:1}}}class Jy extends cd{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[u,p]=this.parallels=n.parallels||[29.5,45.5],v=Math.sin(Vt(u));this.n=(v+Math.sin(Vt(p)))/2,this.c=1+v*(2*this.n-v),this.r0=Math.sqrt(this.c)/this.n}project(n,u){const{n:p,c:v,r0:E}=this,M=Vt(n-this.center[0]),R=Vt(u),Y=Math.sqrt(v-2*p*Math.sin(R))/p;return{x:Y*Math.sin(M*p),y:Y*Math.cos(M*p)-E,z:0}}unproject(n,u){const{n:p,c:v,r0:E}=this,M=E+u;let R=Math.atan2(n,Math.abs(M))*Math.sign(M);M*p<0&&(R-=Math.PI*Math.sign(n)*Math.sign(M));const Y=Vt(this.center[0])*p;R=Fi(R,-Math.PI-Y,Math.PI-Y);const j=vi(dt(R/p)+this.center[0],-180,180),ee=Math.asin(vi((v-(n*n+M*M)*p*p)/(2*p),-1,1)),se=vi(dt(ee),-Ho,Ho);return new fs(j,se)}}const ep=1.340264,nf=-.081106,rf=893e-6,sf=.003796,wm=Math.sqrt(3)/2;class Qy extends cd{project(n,u){u=u/180*Math.PI,n=n/180*Math.PI;const p=Math.asin(wm*Math.sin(u)),v=p*p,E=v*v*v;return{x:.5*(n*Math.cos(p)/(wm*(ep+3*nf*v+E*(7*rf+9*sf*v)))/Math.PI+.5),y:1-.5*(p*(ep+nf*v+E*(rf+sf*v))/Math.PI+1),z:0}}unproject(n,u){n=(2*n-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=p*p,E=v*v*v;for(let ee,se,ce,ve=0;ve<12&&(se=p*(ep+nf*v+E*(rf+sf*v))-u,ce=ep+3*nf*v+E*(7*rf+9*sf*v),ee=se/ce,p=vi(p-ee,-Math.PI/3,Math.PI/3),v=p*p,E=v*v*v,!(Math.abs(ee)<1e-12));++ve);const M=wm*n*(ep+3*nf*v+E*(7*rf+9*sf*v))/Math.cos(p),R=Math.asin(Math.sin(p)/wm),Y=vi(180*M/Math.PI,-180,180),j=vi(180*R/Math.PI,-Ho,Ho);return new fs(Y,j)}}class e0 extends cd{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,u){return{x:.5+n/360,y:.5-u/360,z:0}}unproject(n,u){const p=360*(n-.5),v=vi(360*(.5-u),-Ho,Ho);return new fs(p,v)}}const tp=Math.PI/2;function Bg(a){return Math.tan((tp+a)/2)}class Lb extends cd{constructor(n){super(n),this.center=n.center||[0,30];const[u,p]=this.parallels=n.parallels||[30,30];let v=Vt(u),E=Vt(p);this.southernCenter=v+E<0,this.southernCenter&&(v=-v,E=-E);const M=Math.cos(v),R=Bg(v);this.n=v===E?Math.sin(v):Math.log(M/Math.cos(E))/Math.log(Bg(E)/R),this.f=M*Math.pow(Bg(v),this.n)/this.n}project(n,u){u=Vt(u),this.southernCenter&&(u=-u),n=Vt(n-this.center[0]);const p=1e-6,{n:v,f:E}=this;E>0?u<-tp+p&&(u=-tp+p):u>tp-p&&(u=tp-p);const M=E/Math.pow(Bg(u),v);let R=M*Math.sin(v*n),Y=E-M*Math.cos(v*n);return R=.5*(R/Math.PI+.5),Y=.5*(Y/Math.PI+.5),{x:R,y:this.southernCenter?Y:1-Y,z:0}}unproject(n,u){n=(2*n-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:v}=this,E=v-u,M=Math.sign(E),R=Math.sign(p)*Math.sqrt(n*n+E*E);let Y=Math.atan2(n,Math.abs(E))*M;E*p<0&&(Y-=Math.PI*Math.sign(n)*M);const j=vi(dt(Y/p)+this.center[0],-180,180),ee=vi(dt(2*Math.atan(Math.pow(v/R,1/p))-tp),-Ho,Ho);return new fs(j,this.southernCenter?-ee:ee)}}class Ng extends cd{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,u){return{x:gc(n),y:zc(u),z:0}}unproject(n,u){const p=kl(n),v=Ko(u);return new fs(p,v)}}const t0=Vt(Ho);class Ob extends cd{project(n,u){const p=(u=Vt(u))*u,v=p*p;return{x:.5*((n=Vt(n))*(.8707-.131979*p+v*(v*(.003971*p-.001529*v)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+v*(.028874*p-.044475-.005916*v)))/Math.PI+1),z:0}}unproject(n,u){n=(2*n-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,v=25,E=0,M=p*p;do{M=p*p;const j=M*M;E=(p*(1.007226+M*(.015085+j*(.028874*M-.044475-.005916*j)))-u)/(1.007226+M*(.045255+j*(.259866*M-.311325-.005916*11*j))),p=vi(p-E,-t0,t0)}while(Math.abs(E)>1e-6&&--v>0);M=p*p;const R=vi(dt(n/(.8707+M*(M*(M*M*M*(.003971-.001529*M)-.013791)-.131979))),-180,180),Y=dt(p);return new fs(R,Y)}}const Cm=Vt(Ho);class Em extends cd{project(n,u){u=Vt(u),n=Vt(n);const p=Math.cos(u),v=2/Math.PI,E=Math.acos(p*Math.cos(n/2)),M=Math.sin(E)/E,R=.5*(n*v+2*p*Math.sin(n/2)/M)||0,Y=.5*(u+Math.sin(u)/M)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(Y/Math.PI+1),z:0}}unproject(n,u){let p=n=(2*n-.5)*Math.PI,v=u=(2*(1-u)-1)*Math.PI,E=25;const M=1e-6;let R=0,Y=0;do{const j=Math.cos(v),ee=Math.sin(v),se=2*ee*j,ce=ee*ee,ve=j*j,be=Math.cos(p/2),Me=Math.sin(p/2),Xe=2*be*Me,ut=Me*Me,Lt=1-ve*be*be,ht=Lt?1/Lt:0,At=Lt?Math.acos(j*be)*Math.sqrt(1/Lt):0,Nt=.5*(2*At*j*Me+2*p/Math.PI)-n,Bt=.5*(At*ee+v)-u,bi=.5*ht*(ve*ut+At*j*be*ce)+1/Math.PI,hi=ht*(Xe*se/4-At*ee*Me),Oi=.125*ht*(se*Me-At*ee*ve*Xe),nn=.5*ht*(ce*be+At*ut*j)+.5,Ci=hi*Oi-nn*bi;R=(Bt*hi-Nt*nn)/Ci,Y=(Nt*Oi-Bt*bi)/Ci,p=vi(p-R,-Math.PI,Math.PI),v=vi(v-Y,-Cm,Cm)}while((Math.abs(R)>M||Math.abs(Y)>M)&&--E>0);return new fs(dt(p),dt(v))}}class Sm extends cd{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Vt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,u){const{scale:p,cosPhi:v}=this;return{x:Vt(n)*v*p+.5,y:-Math.sin(Vt(u))/v*p+.5,z:0}}unproject(n,u){const{scale:p,cosPhi:v}=this,E=-(u-.5)/p,M=vi(dt((n-.5)/p)/v,-180,180),R=Math.asin(vi(E*v,-1,1)),Y=vi(dt(R),-Ho,Ho);return new fs(M,Y)}}class Yg extends Ng{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,u,p){const v=eu(n,u,p);return pr(v,v,lh(Tl(p))),{x:v[0],y:v[1],z:v[2]}}locationPoint(n,u){const p=Td(u.lat,u.lng),v=js([],p),E=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(u),n._centerAltitude):n._centerAltitude;Qc(p,p,v,vc(1,0)*An*E);const M=Sl(new Float64Array(16));return Ta(M,n.pixelMatrix,n.globeMatrix),pr(p,p,M),new at(p[0],p[1])}pixelsPerMeter(n,u){return vc(1,0)*u}pixelSpaceConversion(n,u,p){const v=vc(1,n)*u,E=zn(vc(1,45)*u,v,p);return this.pixelsPerMeter(n,u)/E}createTileMatrix(n,u,p){const v=ul(Tl(p.canonical));return Ta(new Float64Array(16),n.globeMatrix,v)}createInversionMatrix(n,u){const{center:p}=n,v=lh(Tl(u));return _d(v,v,Vt(p.lng)),ih(v,v,Vt(p.lat)),Rc(v,v,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(v)}pointCoordinate(n,u,p,v){return Hf(n,u,p,!0)||new Ju(0,0)}pointCoordinate3D(n,u,p){const v=this.pointCoordinate(n,u,p,0);return[v.x,v.y,v.z]}isPointAboveHorizon(n,u){return!Hf(n,u.x,u.y,!1)}farthestPixelDistance(n){const u=function(v,E){const M=v.cameraToCenterDistance,R=v._centerAltitude*E,Y=v._camera,j=v._camera.forward(),ee=Jc([],ll([],j,-M),[0,0,R]),se=v.worldSize/(2*Math.PI),ce=[0,0,-se],ve=v.width/v.height,be=Math.tan(v.fovAboveCenter),Me=ll([],Y.up(),be),Xe=ll([],Y.right(),be*ve),ut=js([],Jc([],Jc([],j,Me),Xe)),Lt=[];let ht;if(new Cp(ee,ut).closestPointOnSphere(ce,se,Lt)){const At=Jc([],Lt,ce),Nt=Yo([],At,ee);ht=Math.cos(v.fovAboveCenter)*yd(Nt)}else{const At=Yo([],ee,ce),Nt=Yo([],ce,ee);js(Nt,Nt);const Bt=yd(At)-se;ht=Math.sqrt(Bt*(Bt+2*se));const bi=Math.acos(ht/(se+Bt))-Math.acos(cl(j,Nt));ht*=Math.cos(bi)}return 1.01*ht}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),p=tu(n.zoom);if(p>0){const v=m_(n,vc(1,n.center.lat)*n.worldSize),E=n.worldSize/(2*Math.PI),M=Math.max(n.width,n.height)/n.worldSize*Math.PI;return zn(u,v+E*(1-Math.cos(M)),Math.pow(p,10))}return u}upVector(n,u,p){return eu(u,p,n,1)}upVectorScale(n){return{metersToTile:Cd(kd(Tl(n)))}}}function g_(a){const n=a.parallels,u=!!n&&Math.abs(n[0]+n[1])<.01;switch(a.name){case"mercator":return new Ng(a);case"equirectangular":return new e0(a);case"naturalEarth":return new Ob(a);case"equalEarth":return new Qy(a);case"winkelTripel":return new Em(a);case"albers":return u?new Sm(a):new Jy(a);case"lambertConformalConic":return u?new Sm(a):new Lb(a);case"globe":return new Yg(a)}throw new Error(`Invalid projection name: ${a.name}`)}const n0=vt.types,r0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Tm(a,n,u,p,v,E,M,R,Y,j,ee,se,ce){const ve=R?Math.min(Hd,Math.round(R[0])):0,be=R?Math.min(Hd,Math.round(R[1])):0;a.emplaceBack(n,u,Math.round(32*p),Math.round(32*v),E,M,(ve<<1)+(Y?1:0),be,16*j,16*ee,256*se,256*ce)}function of(a,n,u,p,v,E,M){a.emplaceBack(n,u,p,v,E,M)}function km(a,n,u,p,v){a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v),a.emplaceBack(n,u,p,v)}function v_(a){for(const n of a.sections)if(ja(n.text))return!0;return!1}class Am{constructor(n){this.layoutVertexArray=new Bi,this.indexArray=new Vn,this.programConfigurations=n,this.segments=new Hs,this.dynamicLayoutVertexArray=new Wi,this.opacityVertexArray=new Bn,this.placedSymbolArray=new Es,this.globeExtVertexArray=new qi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(n,u,p,v){this.isEmpty()||(p&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Cg.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Bv.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,r0,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,dm.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||v)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Tn(Am,"SymbolBuffers");class Hg{constructor(n,u,p){this.layoutVertexArray=new n,this.layoutAttributes=u,this.indexArray=new p,this.segments=new Hs,this.collisionVertexArray=new rr,this.collisionVertexArrayExt=new sr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Eg.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,Dy.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Tn(Hg,"CollisionBuffers");class ud{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(M=>M.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sl([]),this.placementViewportMatrix=Sl([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Sg(this.zoom,u["text-size"]),this.iconSizeData=Sg(this.zoom,u["icon-size"]);const p=this.layers[0].layout,v=p.get("symbol-sort-key"),E=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==E&&void 0!==v.constantOr(1),this.sortFeaturesByY=("viewport-y"===E||"auto"===E&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(M=>Zl[M]),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Am(new Eu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Am(new Eu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Is,this.lineVertexArray=new Uc,this.symbolInstances=new ns}calculateGlyphDependencies(n,u,p,v,E){for(let M=0;M<n.length;M++)if(u[n.charCodeAt(M)]=!0,v&&E){const R=qp[n.charAt(M)];R&&(u[R.charCodeAt(0)]=!0)}}populate(n,u,p,v){const E=this.layers[0],M=E.layout,R="globe"===this.projection.name,Y=M.get("text-font"),j=M.get("text-field"),ee=M.get("icon-image"),se=("constant"!==j.value.kind||j.value.value instanceof $n&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&("constant"!==Y.value.kind||Y.value.value.length>0),ce="constant"!==ee.value.kind||!!ee.value.value||Object.keys(ee.parameters).length>0,ve=M.get("symbol-sort-key");if(this.features=[],!se&&!ce)return;const be=u.iconDependencies,Me=u.glyphDependencies,Xe=u.availableImages,ut=new te(this.zoom);for(const{feature:Lt,id:ht,index:At,sourceLayerIndex:Nt}of n){const Bt=E._featureFilter.needGeometry,bi=Wa(Lt,Bt);if(!E._featureFilter.filter(ut,bi,p))continue;if(Bt||(bi.geometry=Du(Lt,p,v)),R&&1!==Lt.type&&p.z<=5){const Ci=bi.geometry,Ni=.98078528056,Hi=(Ki,an)=>cl(eu(Ki.x,Ki.y,p,1),eu(an.x,an.y,p,1))<Ni;for(let Ki=0;Ki<Ci.length;Ki++)Ci[Ki]=Hh(Ci[Ki],Hi)}let hi,Oi;if(se){const Ci=E.getValueAndResolveTokens("text-field",bi,p,Xe),Ni=$n.factory(Ci);v_(Ni)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===B()||this.hasRTLText&&K.isParsed())&&(hi=Yv(Ni,E,bi))}if(ce){const Ci=E.getValueAndResolveTokens("icon-image",bi,p,Xe);Oi=Ci instanceof Zr?Ci:Zr.fromString(Ci)}if(!hi&&!Oi)continue;const nn=this.sortFeaturesByKey?ve.evaluate(bi,{},p):void 0;if(this.features.push({id:ht,text:hi,icon:Oi,index:At,sourceLayerIndex:Nt,geometry:bi.geometry,properties:Lt.properties,type:n0[Lt.type],sortKey:nn}),Oi&&(be[Oi.name]=!0),hi){const Ci=Y.evaluate(bi,{},p).join(","),Ni="map"===M.get("text-rotation-alignment")&&"point"!==M.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zl.vertical)>=0;for(const Hi of hi.sections)if(Hi.image)be[Hi.image.name]=!0;else{const Ki=Wu(hi.toString()),an=Hi.fontStack||Ci,Li=Me[an]=Me[an]||{};this.calculateGlyphDependencies(Hi.text,Li,Ni,this.allowVerticalPlacement,Ki)}}}"line"===M.get("symbol-placement")&&(this.features=function(Lt){const ht={},At={},Nt=[];let Bt=0;function bi(Ci){Nt.push(Lt[Ci]),Bt++}function hi(Ci,Ni,Hi){const Ki=At[Ci];return delete At[Ci],At[Ni]=Ki,Nt[Ki].geometry[0].pop(),Nt[Ki].geometry[0]=Nt[Ki].geometry[0].concat(Hi[0]),Ki}function Oi(Ci,Ni,Hi){const Ki=ht[Ni];return delete ht[Ni],ht[Ci]=Ki,Nt[Ki].geometry[0].shift(),Nt[Ki].geometry[0]=Hi[0].concat(Nt[Ki].geometry[0]),Ki}function nn(Ci,Ni,Hi){const Ki=Hi?Ni[0][Ni[0].length-1]:Ni[0][0];return`${Ci}:${Ki.x}:${Ki.y}`}for(let Ci=0;Ci<Lt.length;Ci++){const Ni=Lt[Ci],Hi=Ni.geometry,Ki=Ni.text?Ni.text.toString():null;if(!Ki){bi(Ci);continue}const an=nn(Ki,Hi),Li=nn(Ki,Hi,!0);if(an in At&&Li in ht&&At[an]!==ht[Li]){const yn=Oi(an,Li,Hi),On=hi(an,Li,Nt[yn].geometry);delete ht[an],delete At[Li],At[nn(Ki,Nt[On].geometry,!0)]=On,Nt[yn].geometry=null}else an in At?hi(an,Li,Hi):Li in ht?Oi(an,Li,Hi):(bi(Ci),ht[an]=Bt-1,At[Li]=Bt-1)}return Nt.filter(Ci=>Ci.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Lt,ht)=>Lt.sortKey-ht.sortKey)}update(n,u,p,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,u,this.layers,p,v),this.icon.programConfigurations.updatePaintArrays(n,u,this.layers,p,v))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=g_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,u){const p=this.lineVertexArray.length;if(void 0!==n.segment)for(const{x:v,y:E}of u)this.lineVertexArray.emplaceBack(v,E);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(n,u,p,v,E,M,R,Y,j,ee,se,ce,ve,be){const Me=n.indexArray,Xe=n.layoutVertexArray,ut=n.globeExtVertexArray,Lt=n.segments.prepareSegment(4*u.length,Xe,Me,this.canOverlap?M.sortKey:void 0),ht=this.glyphOffsetArray.length,At=Lt.vertexLength,Nt=this.allowVerticalPlacement&&R===Zl.vertical?Math.PI/2:0,Bt=M.text&&M.text.sections;for(let hi=0;hi<u.length;hi++){const{tl:Oi,tr:nn,bl:Ci,br:Ni,tex:Hi,pixelOffsetTL:Ki,pixelOffsetBR:an,minFontScaleX:Li,minFontScaleY:yn,glyphOffset:On,isSDF:Cn,sectionIndex:wr}=u[hi],ln=Lt.vertexLength,Xn=On[1];if(Tm(Xe,j.x,j.y,Oi.x,Xn+Oi.y,Hi.x,Hi.y,p,Cn,Ki.x,Ki.y,Li,yn),Tm(Xe,j.x,j.y,nn.x,Xn+nn.y,Hi.x+Hi.w,Hi.y,p,Cn,an.x,Ki.y,Li,yn),Tm(Xe,j.x,j.y,Ci.x,Xn+Ci.y,Hi.x,Hi.y+Hi.h,p,Cn,Ki.x,an.y,Li,yn),Tm(Xe,j.x,j.y,Ni.x,Xn+Ni.y,Hi.x+Hi.w,Hi.y+Hi.h,p,Cn,an.x,an.y,Li,yn),Y){const{x:Cr,y:ts,z:Er}=Y.anchor,[ir,zs,kr]=Y.up;of(ut,Cr,ts,Er,ir,zs,kr),of(ut,Cr,ts,Er,ir,zs,kr),of(ut,Cr,ts,Er,ir,zs,kr),of(ut,Cr,ts,Er,ir,zs,kr),km(n.dynamicLayoutVertexArray,Cr,ts,Er,Nt)}else km(n.dynamicLayoutVertexArray,j.x,j.y,j.z,Nt);Me.emplaceBack(ln,ln+1,ln+2),Me.emplaceBack(ln+1,ln+2,ln+3),Lt.vertexLength+=4,Lt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(On[0]),hi!==u.length-1&&wr===u[hi+1].sectionIndex||n.programConfigurations.populatePaintArrays(Xe.length,M,M.index,{},ve,be,Bt&&Bt[wr])}const bi=Y?Y.anchor:j;n.placedSymbolArray.emplaceBack(bi.x,bi.y,bi.z,j.x,j.y,ht,this.glyphOffsetArray.length-ht,At,ee,se,j.segment,p?p[0]:0,p?p[1]:0,v[0],v[1],R,0,!1,0,ce,0)}_commitLayoutVertex(n,u,p,v,E,M,R){n.emplaceBack(u,p,v,E,M,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(n,u,p,v,E,M,R){const Y=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),j=Y.vertexLength,ee=R.tileAnchorX,se=R.tileAnchorY;for(let ve=0;ve<4;ve++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(u,-n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(u,n.padding,-n.padding),p.collisionVertexArrayExt.emplaceBack(u,n.padding,n.padding),p.collisionVertexArrayExt.emplaceBack(u,-n.padding,n.padding),this._commitLayoutVertex(p.layoutVertexArray,v,E,M,ee,se,new at(n.x1,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,M,ee,se,new at(n.x2,n.y1)),this._commitLayoutVertex(p.layoutVertexArray,v,E,M,ee,se,new at(n.x2,n.y2)),this._commitLayoutVertex(p.layoutVertexArray,v,E,M,ee,se,new at(n.x1,n.y2)),Y.vertexLength+=4;const ce=p.indexArray;ce.emplaceBack(j,j+1),ce.emplaceBack(j+1,j+2),ce.emplaceBack(j+2,j+3),ce.emplaceBack(j+3,j),Y.primitiveLength+=4}_addTextDebugCollisionBoxes(n,u,p,v,E,M){for(let R=v;R<E;R++){const Y=p.get(R),j=this.getSymbolInstanceTextSize(n,M,u,R);this._addCollisionDebugVertices(Y,j,this.textCollisionBox,Y.projectedAnchorX,Y.projectedAnchorY,Y.projectedAnchorZ,M)}}_addIconDebugCollisionBoxes(n,u,p,v,E,M){for(let R=v;R<E;R++){const Y=p.get(R),j=this.getSymbolInstanceIconSize(n,u,M.placedIconSymbolIndex);this._addCollisionDebugVertices(Y,j,this.iconCollisionBox,Y.projectedAnchorX,Y.projectedAnchorY,Y.projectedAnchorZ,M)}}generateCollisionDebugBuffers(n,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hg(En,Zp.members,_o),this.iconCollisionBox=new Hg(En,Zp.members,_o);const p=Nd(this.iconSizeData,n),v=Nd(this.textSizeData,n);for(let E=0;E<this.symbolInstances.length;E++){const M=this.symbolInstances.get(E);this._addTextDebugCollisionBoxes(v,n,u,M.textBoxStartIndex,M.textBoxEndIndex,M),this._addTextDebugCollisionBoxes(v,n,u,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M),this._addIconDebugCollisionBoxes(p,n,u,M.iconBoxStartIndex,M.iconBoxEndIndex,M),this._addIconDebugCollisionBoxes(p,n,u,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M)}}getSymbolInstanceTextSize(n,u,p,v){const E=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:v),M=qh(this.textSizeData,n,E)/ma;return this.tilePixelRatio*M}getSymbolInstanceIconSize(n,u,p){const v=this.icon.placedSymbolArray.get(p),E=qh(this.iconSizeData,n,v);return this.tilePixelRatio*E}_commitDebugCollisionVertexUpdate(n,u,p){n.emplaceBack(u,-p,-p),n.emplaceBack(u,p,-p),n.emplaceBack(u,p,p),n.emplaceBack(u,-p,p)}_updateTextDebugCollisionBoxes(n,u,p,v,E,M){for(let R=v;R<E;R++){const Y=p.get(R),j=this.getSymbolInstanceTextSize(n,M,u,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,j,Y.padding)}}_updateIconDebugCollisionBoxes(n,u,p,v,E,M){for(let R=v;R<E;R++){const Y=p.get(R),j=this.getSymbolInstanceIconSize(n,u,M);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,j,Y.padding)}}updateCollisionDebugBuffers(n,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=Nd(this.iconSizeData,n),v=Nd(this.textSizeData,n);for(let E=0;E<this.symbolInstances.length;E++){const M=this.symbolInstances.get(E);this._updateTextDebugCollisionBoxes(v,n,u,M.textBoxStartIndex,M.textBoxEndIndex,M),this._updateTextDebugCollisionBoxes(v,n,u,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M),this._updateIconDebugCollisionBoxes(p,n,u,M.iconBoxStartIndex,M.iconBoxEndIndex,M.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,n,u,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,u,p,v,E,M,R,Y,j){const ee={};if(u<p){const{x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At,featureIndex:Nt}=n.get(u);ee.textBox={x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At},ee.textFeatureIndex=Nt}if(v<E){const{x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At,featureIndex:Nt}=n.get(v);ee.verticalTextBox={x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At},ee.verticalTextFeatureIndex=Nt}if(M<R){const{x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At,featureIndex:Nt}=n.get(M);ee.iconBox={x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At},ee.iconFeatureIndex=Nt}if(Y<j){const{x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At,featureIndex:Nt}=n.get(Y);ee.verticalIconBox={x1:se,y1:ce,x2:ve,y2:be,padding:Me,projectedAnchorX:Xe,projectedAnchorY:ut,projectedAnchorZ:Lt,tileAnchorX:ht,tileAnchorY:At},ee.verticalIconFeatureIndex=Nt}return ee}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,u){const p=n.placedSymbolArray.get(u),v=p.vertexStartIndex+4*p.numGlyphs;for(let E=p.vertexStartIndex;E<v;E+=4)n.indexArray.emplaceBack(E,E+1,E+2),n.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(n),p=Math.cos(n),v=[],E=[],M=[];for(let R=0;R<this.symbolInstances.length;++R){M.push(R);const Y=this.symbolInstances.get(R);v.push(0|Math.round(u*Y.tileAnchorX+p*Y.tileAnchorY)),E.push(Y.featureIndex)}return M.sort((R,Y)=>v[R]-v[Y]||E[Y]-E[R]),M}addToSortKeyRanges(n,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:E,leftJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:R,placedIconSymbolIndex:Y,verticalPlacedIconSymbolIndex:j}=p;v>=0&&this.addIndicesForPlacedSymbol(this.text,v),E>=0&&E!==v&&this.addIndicesForPlacedSymbol(this.text,E),M>=0&&M!==E&&M!==v&&this.addIndicesForPlacedSymbol(this.text,M),R>=0&&this.addIndicesForPlacedSymbol(this.text,R),Y>=0&&this.addIndicesForPlacedSymbol(this.icon,Y),j>=0&&this.addIndicesForPlacedSymbol(this.icon,j)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tn(ud,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ud.MAX_GLYPHS=65535,ud.addDynamicAttributes=km;const s0=new xt({"symbol-placement":new Te(I.layout_symbol["symbol-placement"]),"symbol-spacing":new Te(I.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Te(I.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ge(I.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Te(I.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Te(I.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Te(I.layout_symbol["icon-ignore-placement"]),"icon-optional":new Te(I.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Te(I.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ge(I.layout_symbol["icon-size"]),"icon-text-fit":new Te(I.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Te(I.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ge(I.layout_symbol["icon-image"]),"icon-rotate":new Ge(I.layout_symbol["icon-rotate"]),"icon-padding":new Te(I.layout_symbol["icon-padding"]),"icon-keep-upright":new Te(I.layout_symbol["icon-keep-upright"]),"icon-offset":new Ge(I.layout_symbol["icon-offset"]),"icon-anchor":new Ge(I.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Te(I.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Te(I.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Te(I.layout_symbol["text-rotation-alignment"]),"text-field":new Ge(I.layout_symbol["text-field"]),"text-font":new Ge(I.layout_symbol["text-font"]),"text-size":new Ge(I.layout_symbol["text-size"]),"text-max-width":new Ge(I.layout_symbol["text-max-width"]),"text-line-height":new Ge(I.layout_symbol["text-line-height"]),"text-letter-spacing":new Ge(I.layout_symbol["text-letter-spacing"]),"text-justify":new Ge(I.layout_symbol["text-justify"]),"text-radial-offset":new Ge(I.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Te(I.layout_symbol["text-variable-anchor"]),"text-anchor":new Ge(I.layout_symbol["text-anchor"]),"text-max-angle":new Te(I.layout_symbol["text-max-angle"]),"text-writing-mode":new Te(I.layout_symbol["text-writing-mode"]),"text-rotate":new Ge(I.layout_symbol["text-rotate"]),"text-padding":new Te(I.layout_symbol["text-padding"]),"text-keep-upright":new Te(I.layout_symbol["text-keep-upright"]),"text-transform":new Ge(I.layout_symbol["text-transform"]),"text-offset":new Ge(I.layout_symbol["text-offset"]),"text-allow-overlap":new Te(I.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Te(I.layout_symbol["text-ignore-placement"]),"text-optional":new Te(I.layout_symbol["text-optional"])});var Vd={paint:new xt({"icon-opacity":new Ge(I.paint_symbol["icon-opacity"]),"icon-color":new Ge(I.paint_symbol["icon-color"]),"icon-halo-color":new Ge(I.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ge(I.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ge(I.paint_symbol["icon-halo-blur"]),"icon-translate":new Te(I.paint_symbol["icon-translate"]),"icon-translate-anchor":new Te(I.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ge(I.paint_symbol["text-opacity"]),"text-color":new Ge(I.paint_symbol["text-color"],{runtimeType:Q,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Ge(I.paint_symbol["text-halo-color"]),"text-halo-width":new Ge(I.paint_symbol["text-halo-width"]),"text-halo-blur":new Ge(I.paint_symbol["text-halo-blur"]),"text-translate":new Te(I.paint_symbol["text-translate"]),"text-translate-anchor":new Te(I.paint_symbol["text-translate-anchor"])}),layout:s0};class __{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:we,this.defaultValue=n}evaluate(n){if(n.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(n.formattedSection))return u.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tn(__,"FormatSectionOverride",{omit:["defaultValue"]});class Mm extends Zo{constructor(n){super(n,Vd)}recalculate(n,u){super.recalculate(n,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const v=[];for(const E of p)v.indexOf(E)<0&&v.push(E);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,u,p,v){const E=this.layout.get(n).evaluate(u,{},p,v),M=this._unevaluatedLayout._values[n];return M.isDataDriven()||Va(M.value)||!E?E:(R=u.properties,E.replace(/{([^{}]+)}/g,(j,ee)=>ee in R?String(R[ee]):""));var R}createBucket(n){return new ud(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Vd.paint.overridableProperties){if(!Mm.hasPaintOverride(this.layout,n))continue;const u=this.paint.get(n),p=new __(u),v=new Hl(p,u.property.specification);let E=null;E="constant"===u.value.kind||"source"===u.value.kind?new bl("source",v):new xl("composite",v,u.value.zoomStops,u.value._interpolationType),this.paint._values[n]=new tt(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(n,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&Mm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,u){const p=n.get("text-field"),v=Vd.paint.properties[u];let E=!1;const M=R=>{for(const Y of R)if(v.overrides&&v.overrides.hasOverride(Y))return void(E=!0)};if("constant"===p.value.kind&&p.value.value instanceof $n)M(p.value.value.sections);else if("source"===p.value.kind){const R=j=>{E||(j instanceof Oo&&as(j.value)===qe?M(j.value.sections):j instanceof ea?M(j.sections):j.eachChild(R))},Y=p.value;Y._styleExpression&&R(Y._styleExpression.expression)}return E}getProgramConfiguration(n){return new Cu(this,n)}}var af={paint:new xt({"background-color":new Te(I.paint_background["background-color"]),"background-pattern":new Te(I.paint_background["background-pattern"]),"background-opacity":new Te(I.paint_background["background-opacity"])})},Dm={paint:new xt({"raster-opacity":new Te(I.paint_raster["raster-opacity"]),"raster-hue-rotate":new Te(I.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Te(I.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Te(I.paint_raster["raster-brightness-max"]),"raster-saturation":new Te(I.paint_raster["raster-saturation"]),"raster-contrast":new Te(I.paint_raster["raster-contrast"]),"raster-resampling":new Te(I.paint_raster["raster-resampling"]),"raster-fade-duration":new Te(I.paint_raster["raster-fade-duration"])})};class Vg extends Zo{constructor(n){super(n,{}),this.implementation=n}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var o0={paint:new xt({"sky-type":new Te(I.paint_sky["sky-type"]),"sky-atmosphere-sun":new Te(I.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Te(I.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Te(I.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Te(I.paint_sky["sky-gradient-radius"]),"sky-gradient":new bt(I.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Te(I.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Te(I.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Te(I.paint_sky["sky-opacity"])})};function Gg(a,n,u){const p=[0,0,1],v=zf([]);return wd(v,v,u?-Vt(a)+Math.PI:Vt(a)),Ff(v,v,-Vt(n)),Pf(p,p,v),js(p,p)}const a0={circle:class extends Zo{constructor(a){super(a,qf)}createBucket(a){return new Md(a)}queryRadius(a){const n=a;return _c("circle-radius",this,n)+_c("circle-stroke-width",this,n)+ed(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,u,p,v,E,M,R){const Y=Xf(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),j=this.paint.get("circle-radius").evaluate(n,u)+this.paint.get("circle-stroke-width").evaluate(n,u);return Pp(a,p,E,M,R,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),Y,j)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new Cu(this,a)}},heatmap:class extends Zo{createBucket(a){return new Uh(a)}constructor(a){super(a,hg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"heatmap-color"===a&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return _c("heatmap-radius",this,a)}queryIntersectsFeature(a,n,u,p,v,E,M,R){const Y=this.paint.get("heatmap-radius").evaluate(n,u);return Pp(a,p,E,M,R,!0,!0,new at(0,0),Y)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new Cu(this,a)}},hillshade:class extends Zo{constructor(a){super(a,Qf)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Zo{constructor(a){super(a,vh)}getProgramIds(){const a=this.paint.get("fill-pattern"),n=a&&a.constantOr(1),u=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(a){return new Cu(this,a)}recalculate(a,n){super.recalculate(a,n);const u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Np(a)}queryRadius(){return ed(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,u,p,v,E){return!a.queryGeometry.isAboveHorizon&&Id(dh(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends Zo{constructor(a){super(a,Iv)}createBucket(a){return new bc(a)}queryRadius(){return ed(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new Cu(this,a)}queryIntersectsFeature(a,n,u,p,v,E,M,R,Y){const j=Xf(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),ee=this.paint.get("fill-extrusion-height").evaluate(n,u),se=this.paint.get("fill-extrusion-base").evaluate(n,u),ce=[0,0],ve=R&&E.elevation,be=E.elevation?E.elevation.exaggeration():1,Me=a.tile.getBucket(this);if(ve&&Me instanceof bc){const At=Me.centroidVertexArray,Nt=Y+1;Nt<At.length&&(ce[0]=At.geta_centroid_pos0(Nt),ce[1]=At.geta_centroid_pos1(Nt))}if(0===ce[0]&&1===ce[1])return!1;"globe"===E.projection.name&&(p=xg([p],[new at(0,0),new at(An,An)],a.tileID.canonical).map(At=>At.polygon).flat());const Xe=ve?R:null,[ut,Lt]=(Nt=p,Bt=se,bi=ee,hi=j,Oi=M,nn=Xe,Ci=ce,Ni=be,Hi=E.center.lat,"globe"===(At=E).projection.name?function(an,Li,yn,On,Cn,wr,ln,Xn,Cr,ts,Er){const ir=[],zs=[],kr=an.projection.upVectorScale(Er,an.center.lat,an.worldSize).metersToTile,Ar=[0,0,0,1],bs=[0,0,0,1],ks=(xs,Us,no,yo)=>{xs[0]=Us,xs[1]=no,xs[2]=yo,xs[3]=1},As=Up();yn>0&&(yn+=As),On+=As;for(const xs of Li){const Us=[],no=[];for(const yo of xs){const ws=yo.x+Cn.x,Io=yo.y+Cn.y,bo=an.projection.projectTilePoint(ws,Io,Er),qs=an.projection.upVector(Er,yo.x,yo.y);let rs=yn,co=On;if(ln){const Ms=wg(ws,Io,yn,On,ln,Xn,Cr,ts);rs+=Ms.base,co+=Ms.top}0!==yn?ks(Ar,bo.x+qs[0]*kr*rs,bo.y+qs[1]*kr*rs,bo.z+qs[2]*kr*rs):ks(Ar,bo.x,bo.y,bo.z),ks(bs,bo.x+qs[0]*kr*co,bo.y+qs[1]*kr*co,bo.z+qs[2]*kr*co),pr(Ar,Ar,wr),pr(bs,bs,wr),Us.push(new Bd(Ar[0],Ar[1],Ar[2])),no.push(new Bd(bs[0],bs[1],bs[2]))}ir.push(Us),zs.push(no)}return[ir,zs]}(At,Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi,a.tileID.canonical):nn?function(an,Li,yn,On,Cn,wr,ln,Xn,Cr){const ts=[],Er=[],ir=[0,0,0,1];for(const zs of an){const kr=[],Ar=[];for(const bs of zs){const ks=bs.x+On.x,As=bs.y+On.y,xs=wg(ks,As,Li,yn,wr,ln,Xn,Cr);ir[0]=ks,ir[1]=As,ir[2]=xs.base,ir[3]=1,Tu(ir,ir,Cn),ir[3]=Math.max(ir[3],1e-5);const Us=new Bd(ir[0]/ir[3],ir[1]/ir[3],ir[2]/ir[3]);ir[0]=ks,ir[1]=As,ir[2]=xs.top,ir[3]=1,Tu(ir,ir,Cn),ir[3]=Math.max(ir[3],1e-5);const no=new Bd(ir[0]/ir[3],ir[1]/ir[3],ir[2]/ir[3]);kr.push(Us),Ar.push(no)}ts.push(kr),Er.push(Ar)}return[ts,Er]}(Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi):function(an,Li,yn,On,Cn){const wr=[],ln=[],Xn=Cn[8]*Li,Cr=Cn[9]*Li,ts=Cn[10]*Li,Er=Cn[11]*Li,ir=Cn[8]*yn,zs=Cn[9]*yn,kr=Cn[10]*yn,Ar=Cn[11]*yn;for(const bs of an){const ks=[],As=[];for(const xs of bs){const Us=xs.x+On.x,no=xs.y+On.y,yo=Cn[0]*Us+Cn[4]*no+Cn[12],ws=Cn[1]*Us+Cn[5]*no+Cn[13],Io=Cn[2]*Us+Cn[6]*no+Cn[14],bo=Cn[3]*Us+Cn[7]*no+Cn[15],qs=yo+Xn,rs=ws+Cr,co=Io+ts,Ms=Math.max(bo+Er,1e-5),hl=yo+ir,xo=ws+zs,uo=Io+kr,Jo=Math.max(bo+Ar,1e-5);ks.push(new Bd(qs/Ms,rs/Ms,co/Ms)),As.push(new Bd(hl/Jo,xo/Jo,uo/Jo))}wr.push(ks),ln.push(As)}return[wr,ln]}(Nt,Bt,bi,hi,Oi)),ht=a.queryGeometry;var At,Nt,Bt,bi,hi,Oi,nn,Ci,Ni,Hi;return function(At,Nt,Bt){let bi=1/0;Id(Bt,Nt)&&(bi=Xp(Bt,Nt[0]));for(let hi=0;hi<Nt.length;hi++){const Oi=Nt[hi],nn=At[hi];for(let Ci=0;Ci<Oi.length-1;Ci++){const Ni=Oi[Ci],Hi=[Ni,Oi[Ci+1],nn[Ci+1],nn[Ci],Ni];lo(Bt,Hi)&&(bi=Math.min(bi,Xp(Bt,Hi)))}}return bi!==1/0&&bi}(ut,Lt,ht.isPointQuery()?ht.screenBounds:ht.screenGeometry)}},line:class extends Zo{constructor(a){super(a,Rv),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if("line-gradient"===a){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof $r,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=zv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new um(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new Cu(this,a)}queryRadius(a){const n=a,u=Fv(_c("line-width",this,n),_c("line-gap-width",this,n)),p=_c("line-offset",this,n);return u/2+Math.abs(p)+ed(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,u,p,v,E){if(a.queryGeometry.isAboveHorizon)return!1;const M=dh(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),E.angle,a.pixelToTileUnitsFactor),R=a.pixelToTileUnitsFactor/2*Fv(this.paint.get("line-width").evaluate(n,u),this.paint.get("line-gap-width").evaluate(n,u)),Y=this.paint.get("line-offset").evaluate(n,u);return Y&&(p=function(j,ee){const se=[],ce=new at(0,0);for(let ve=0;ve<j.length;ve++){const be=j[ve],Me=[];for(let Xe=0;Xe<be.length;Xe++){const ut=be[Xe],Lt=be[Xe+1],ht=0===Xe?ce:ut.sub(be[Xe-1])._unit()._perp(),At=Xe===be.length-1?ce:Lt.sub(ut)._unit()._perp(),Nt=ht._add(At)._unit();Nt._mult(1/(Nt.x*At.x+Nt.y*At.y)),Me.push(Nt._mult(ee)._add(ut))}se.push(Me)}return se}(p,Y*a.pixelToTileUnitsFactor)),function(j,ee,se){for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];if(j.length>=3)for(let be=0;be<ve.length;be++)if(Qu(j,ve[be]))return!0;if(dg(j,ve,se))return!0}return!1}(M,p,R)}isTileClipped(){return!0}},symbol:Mm,background:class extends Zo{constructor(a){super(a,af)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Zo{constructor(a){super(a,Dm)}getProgramIds(){return["raster"]}},sky:class extends Zo{constructor(a){super(a,o0),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){"sky-gradient"===a?this._updateColorRamp():"sky-atmosphere-sun"!==a&&"sky-atmosphere-halo-color"!==a&&"sky-atmosphere-color"!==a&&"sky-atmosphere-sun-intensity"!==a||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Wh({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(a,n){if("atmosphere"===this.paint.get("sky-type")){const p=this.paint.get("sky-atmosphere-sun"),v=!p,E=a.style.light,M=E.properties.get("position");return v&&"viewport"===E.properties.get("anchor")&&xn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),v?Gg(M.azimuthal,90-M.polar,n):Gg(p[0],90-p[1],n)}const u=this.paint.get("sky-gradient-center");return Gg(u[0],90-u[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return"atmosphere"===a?["skyboxCapture","skybox"]:"gradient"===a?["skyboxGradient"]:null}}};class lf{constructor(n,u,p,v){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(u,v)}update(n,u,p){const{width:v,height:E}=n,{context:M}=this,{gl:R}=M,{HTMLImageElement:Y,HTMLCanvasElement:j,HTMLVideoElement:ee,ImageData:se,ImageBitmap:ce}=V;if(R.bindTexture(R.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!u||!1!==u.premultiply)),p||this.size&&this.size[0]===v&&this.size[1]===E){const{x:ve,y:be}=p||{x:0,y:0};n instanceof Y||n instanceof j||n instanceof ee||n instanceof se||ce&&n instanceof ce?R.texSubImage2D(R.TEXTURE_2D,0,ve,be,R.RGBA,R.UNSIGNED_BYTE,n):R.texSubImage2D(R.TEXTURE_2D,0,ve,be,v,E,R.RGBA,R.UNSIGNED_BYTE,n.data)}else this.size=[v,E],n instanceof Y||n instanceof j||n instanceof ee||n instanceof se||ce&&n instanceof ce?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,n):R.texImage2D(R.TEXTURE_2D,0,this.format,v,E,0,this.format,R.UNSIGNED_BYTE,n.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(n,u){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),n!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,n),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?n===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_NEAREST:n),this.filter=n),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class l0{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class y_{constructor(){this.tasks={},this.taskQueue=[],Nn(["process"],this),this.invoker=new l0(this.process),this.nextId=0}add(n,u){const p=this.nextId++,v=function({type:E,isSymbolTile:M,zoom:R}){return R=R||0,"message"===E?0:"maybePrepare"!==E||M?"parseTile"!==E||M?"parseTile"===E&&M?300-R:"maybePrepare"===E&&M?400-R:500:200-R:100-R}(u);if(0===v){Zi();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:n,metadata:u,priority:v,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){Zi();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const n=this.pick();if(null===n)return;const u=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let n=null,u=1/0;for(let v=0;v<this.taskQueue.length;v++){const E=this.tasks[this.taskQueue[v]];E.priority<u&&(u=E.priority,n=v)}if(null===n)return null;const p=this.taskQueue[n];return this.taskQueue.splice(n,1),p}remove(){this.invoker.remove()}}class b_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let u=0;u<n.length;u++){const p=n[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const c0=["tile","layer","source","sourceLayer","state"];class x_{constructor(n,u,p,v,E){this.type="Feature",this._vectorTileFeature=n,this._z=u,this._x=p,this._y=v,this.properties=n.properties,this.id=E}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(n.id=this.id);for(const u of c0)void 0!==this[u]&&(n[u]=this[u]);return n}}const Gd=new Uint16Array(8184);for(let a=0;a<2046;a++){let n=a+2,u=0,p=0,v=0,E=0,M=0,R=0;for(1&n?v=E=M=32:u=p=R=32;(n>>=1)>1;){const j=u+v>>1,ee=p+E>>1;1&n?(v=u,E=p,u=M,p=R):(u=v,p=E,v=M,E=R),M=j,R=ee}const Y=4*a;Gd[Y+0]=u,Gd[Y+1]=p,Gd[Y+2]=v,Gd[Y+3]=E}const Bu=new Uint16Array(2178),dd=new Uint8Array(1089),Im=new Uint16Array(1089);function w_(a){return 0===a?-.03125:32===a?.03125:0}var C_=Jt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const u0={type:2,extent:An,loadGeometry:()=>[[new at(0,0),new at(An+1,0),new at(An+1,An+1),new at(0,An+1),new at(0,0)]]};class jg{constructor(n,u,p,v,E){this.tileID=n,this.uid=Qt(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=E,this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(n){const u=n+this.timeAdded;u<c.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=ld(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,u,p){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(v,E){const M={};if(!E)return M;for(const R of v){const Y=R.layerIds.map(j=>E.getLayer(j)).filter(Boolean);if(0!==Y.length){R.layers=Y,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(j=>Y.filter(ee=>ee.id===j)[0]));for(const j of Y)M[j.id]=R}}return M}(n.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const E=this.buckets[v];if(E instanceof ud){if(this.hasSymbolBuckets=!0,!p)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const E=this.buckets[v];if(E instanceof ud&&E.hasRTLText){this.hasRTLText=!0,K.isLoading()||K.isLoaded()||"deferred"!==B()||X();break}}this.queryPadding=0;for(const v in this.buckets){const E=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(E))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new Ur}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const v=this.buckets[p];v.uploadPending()&&v.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new lf(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new lf(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new lf(n,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,p,v,E,M,R,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:v,pixelPosMatrix:R,transform:M,params:E,tileTransform:this.tileTransform},n,u,p):{}}querySourceFeatures(n,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const v=p.loadVTLayers(),E=u?u.sourceLayer:"",M=v._geojsonTileLayer||v[E];if(!M)return;const R=Ti(u&&u.filter),{z:Y,x:j,y:ee}=this.tileID.canonical,se={z:Y,x:j,y:ee};for(let ce=0;ce<M.length;ce++){const ve=M.feature(ce);if(R.needGeometry){const Xe=Wa(ve,!0);if(!R.filter(new te(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!R.filter(new te(this.tileID.overscaledZ),ve))continue;const be=p.getId(ve,E),Me=new x_(ve,Y,j,ee,be);Me.tile=se,n.push(Me)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const p=Ui(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let v=!1;if(this.expirationTime>p)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const E=this.expirationTime-u;E?this.expirationTime=p+Math.max(E,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(n).length||!u)return;const p=this.latestFeatureIndex.loadVTLayers(),v=u.style.listImages();for(const E in this.buckets){if(!u.style.hasLayer(E))continue;const M=this.buckets[E],R=M.layers[0].sourceLayer||"_geojsonTileLayer",Y=p[R],j=n[R];if(!Y||!j||0===Object.keys(j).length)continue;if(M.update(j,Y,v,this.imageAtlas&&this.imageAtlas.patternPositions||{}),M instanceof um||M instanceof Np){const se=u.style._getSourceCache(M.layers[0].source);u._terrain&&u._terrain.enabled&&se&&M.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(se.id,this.tileID)}const ee=u&&u.style&&u.style.getLayer(E);ee&&(this.queryPadding=Math.max(this.queryPadding,ee.queryRadius(M)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.now()+n}setTexture(n,u){const p=u.context,v=p.gl;this.texture=this.texture||u.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new lf(p,n,v.RGBA,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(n,u){const p={};for(const v of u)p[v]=!0;this.dependencies[n]=p}hasDependency(n,u){for(const p of n){const v=this.dependencies[p];if(v)for(const E of u)if(v[E])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,u){if(!u||"mercator"===u.name||this._tileDebugBuffer)return;const p=Du(u0,this.tileID.canonical,this.tileTransform)[0],v=new Qi,E=new Sa;for(let M=0;M<p.length;M++){const{x:R,y:Y}=p[M];v.emplaceBack(R,Y),E.emplaceBack(M)}E.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(E),this._tileDebugBuffer=n.createVertexBuffer(v,jl.members),this._tileDebugSegments=Hs.simpleSegment(0,0,v.length,E.length)}_makeTileBoundsBuffers(n,u){if(this._tileBoundsBuffer||!u||"mercator"===u.name)return;const p=Du(u0,this.tileID.canonical,this.tileTransform)[0];let v,E;if(this.isRaster){const M=function(R,Y){const j=ld(R,Y),ee=Math.pow(2,R.z);for(let Xe=0;Xe<33;Xe++)for(let ut=0;ut<33;ut++){const Lt=kl((R.x+(ut+w_(ut))/32)/ee),ht=Ko((R.y+(Xe+w_(Xe))/32)/ee),At=Y.project(Lt,ht),Nt=33*Xe+ut;Bu[2*Nt+0]=Math.round((At.x*j.scale-j.x)*An),Bu[2*Nt+1]=Math.round((At.y*j.scale-j.y)*An)}dd.fill(0),Im.fill(0);for(let Xe=2045;Xe>=0;Xe--){const ut=4*Xe,Lt=Gd[ut+0],ht=Gd[ut+1],At=Gd[ut+2],Nt=Gd[ut+3],Bt=Lt+At>>1,bi=ht+Nt>>1,hi=Bt+bi-ht,Oi=bi+Lt-Bt,nn=33*ht+Lt,Ci=33*Nt+At,Ni=33*bi+Bt,Hi=Math.hypot((Bu[2*nn+0]+Bu[2*Ci+0])/2-Bu[2*Ni+0],(Bu[2*nn+1]+Bu[2*Ci+1])/2-Bu[2*Ni+1])>=16;dd[Ni]=dd[Ni]||(Hi?1:0),Xe<1022&&(dd[Ni]=dd[Ni]||dd[33*(ht+Oi>>1)+(Lt+hi>>1)]||dd[33*(Nt+Oi>>1)+(At+hi>>1)])}const se=new Ri,ce=new Vn;let ve=0;function be(Xe,ut){const Lt=33*ut+Xe;return 0===Im[Lt]&&(se.emplaceBack(Bu[2*Lt+0],Bu[2*Lt+1],Xe*An/32,ut*An/32),Im[Lt]=++ve),Im[Lt]-1}function Me(Xe,ut,Lt,ht,At,Nt){const Bt=Xe+Lt>>1,bi=ut+ht>>1;if(Math.abs(Xe-At)+Math.abs(ut-Nt)>1&&dd[33*bi+Bt])Me(At,Nt,Xe,ut,Bt,bi),Me(Lt,ht,At,Nt,Bt,bi);else{const hi=be(Xe,ut),Oi=be(Lt,ht),nn=be(At,Nt);ce.emplaceBack(hi,Oi,nn)}}return Me(0,0,32,32,32,0),Me(32,32,0,0,0,32),{vertices:se,indices:ce}}(this.tileID.canonical,u);v=M.vertices,E=M.indices}else{v=new Ri,E=new Vn;for(const{x:R,y:Y}of p)v.emplaceBack(R,Y,0,0);const M=Xh(v.int16,void 0,4);for(let R=0;R<M.length;R+=3)E.emplaceBack(M[R],M[R+1],M[R+2])}this._tileBoundsBuffer=n.createVertexBuffer(v,C_.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(E),this._tileBoundsSegments=Hs.simpleSegment(0,0,v.length,E.length)}_makeGlobeTileDebugBuffers(n,u){const p=u.projection;if(!p||"globe"!==p.name||u.freezeTileCoverage)return;const v=this.tileID.canonical,E=lh(Vf(v,u)),M=tu(u.zoom);let R;M>0&&(R=th(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,v,u,E,R,M),this._makeGlobeTileDebugTextBuffer(n,v,u,E,R,M)}_globePoint(n,u,p,v,E,M,R){let Y=eu(n,u,p);if(M){const j=1<<p.z,ee=gc(v.center.lng),se=zc(v.center.lat),ce=(p.x+.5)/j-ee;let ve=0;ce>.5?ve=-1:ce<-.5&&(ve=1);let be=(n/An+p.x)/j+ve,Me=(u/An+p.y)/j;be=(be-ee)*v._pixelsPerMercatorPixel+ee,Me=(Me-se)*v._pixelsPerMercatorPixel+se;const Xe=[be*v.worldSize,Me*v.worldSize,0];pr(Xe,Xe,M),Y=ku(Y,Xe,R)}return pr(Y,Y,E)}_makeGlobeTileDebugBorderBuffer(n,u,p,v,E,M){const R=new Qi,Y=new Sa,j=new ci,ee=(ce,ve,be,Me,Xe)=>{const ut=(be-ce)/(Xe-1),Lt=(Me-ve)/(Xe-1),ht=R.length;for(let At=0;At<Xe;At++){const Nt=ce+At*ut,Bt=ve+At*Lt;R.emplaceBack(Nt,Bt);const bi=this._globePoint(Nt,Bt,u,p,v,E,M);j.emplaceBack(bi[0],bi[1],bi[2]),Y.emplaceBack(ht+At)}},se=An;ee(0,0,se,0,16),ee(se,0,se,se,16),ee(se,se,0,se,16),ee(0,se,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(Y),this._tileDebugBuffer=n.createVertexBuffer(R,jl.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(j,Nf.members),this._tileDebugSegments=Hs.simpleSegment(0,0,R.length,Y.length)}_makeGlobeTileDebugTextBuffer(n,u,p,v,E,M){const R=An/4,Y=new Qi,j=new Vn,ee=new ci;j.reserve(32),Y.reserve(25),ee.reserve(25);const ce=(ve,be)=>25*ve+be;for(let ve=0;ve<25;ve++){const be=ve*R;for(let Me=0;Me<25;Me++){const Xe=Me*R;Y.emplaceBack(Xe,be);const ut=this._globePoint(Xe,be,u,p,v,E,M);ee.emplaceBack(ut[0],ut[1],ut[2])}}for(let ve=0;ve<4;ve++)for(let be=0;be<4;be++){const Me=ce(ve,be),Xe=ce(ve,be+1),ut=ce(ve+1,be),Lt=ce(ve+1,be+1);j.emplaceBack(Me,Xe,ut),j.emplaceBack(ut,Xe,Lt)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(j),this._tileDebugTextBuffer=n.createVertexBuffer(Y,jl.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(ee,Nf.members),this._tileDebugTextSegments=Hs.simpleSegment(0,0,25,32)}}class Pb{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,p){const v=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][v]=this.stateChanges[n][v]||{},fn(this.stateChanges[n][v],p),null===this.deletedStates[n]){this.deletedStates[n]={};for(const E in this.state[n])E!==v&&(this.deletedStates[n][E]=null)}else if(this.deletedStates[n]&&null===this.deletedStates[n][v]){this.deletedStates[n][v]={};for(const E in this.state[n][v])p[E]||(this.deletedStates[n][v][E]=null)}else for(const E in p)this.deletedStates[n]&&this.deletedStates[n][v]&&null===this.deletedStates[n][v][E]&&delete this.deletedStates[n][v][E]}removeFeatureState(n,u,p){if(null===this.deletedStates[n])return;const v=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&void 0!==u)null!==this.deletedStates[n][v]&&(this.deletedStates[n][v]=this.deletedStates[n][v]||{},this.deletedStates[n][v][p]=null);else if(void 0!==u)if(this.stateChanges[n]&&this.stateChanges[n][v])for(p in this.deletedStates[n][v]={},this.stateChanges[n][v])this.deletedStates[n][v][p]=null;else this.deletedStates[n][v]=null;else this.deletedStates[n]=null}getState(n,u){const p=String(u),v=fn({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(null===this.deletedStates[n])return{};if(this.deletedStates[n]){const E=this.deletedStates[n][u];if(null===E)return{};for(const M in E)delete v[M]}return v}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const p={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const E={};for(const M in this.stateChanges[v])this.state[v][M]||(this.state[v][M]={}),fn(this.state[v][M],this.stateChanges[v][M]),E[M]=this.state[v][M];p[v]=E}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const E={};if(null===this.deletedStates[v])for(const M in this.state[v])E[M]={},this.state[v][M]={};else for(const M in this.deletedStates[v]){if(null===this.deletedStates[v][M])this.state[v][M]={};else if(this.state[v][M])for(const R of Object.keys(this.deletedStates[v][M]))delete this.state[v][M][R];E[M]=this.state[v][M]}p[v]=p[v]||{},fn(p[v],E)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const v in n)n[v].setFeatureState(p,u)}}class E_{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,u){const p=this.toIdx(n,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(n,u){return this.leaves[this.toIdx(n,u)]}toIdx(n,u){return u*this.size+n}}function S_(a,n,u,p){let v=0,E=Number.MAX_VALUE;for(let M=0;M<3;M++)if(Math.abs(p[M])<1e-15){if(u[M]<a[M]||u[M]>n[M])return null}else{const R=1/p[M];let Y=(a[M]-u[M])*R,j=(n[M]-u[M])*R;if(Y>j){const ee=Y;Y=j,j=ee}if(Y>v&&(v=Y),j<E&&(E=j),v>E)return null}return v}function cf(a,n,u,p,v,E,M,R,Y,j,ee){const se=p-a,ce=v-n,ve=E-u,be=M-a,Me=R-n,Xe=Y-u,ut=ee[1]*Xe-ee[2]*Me,Lt=ee[2]*be-ee[0]*Xe,ht=ee[0]*Me-ee[1]*be,At=se*ut+ce*Lt+ve*ht;if(Math.abs(At)<1e-15)return null;const Nt=1/At,Bt=j[0]-a,bi=j[1]-n,hi=j[2]-u,Oi=(Bt*ut+bi*Lt+hi*ht)*Nt;if(Oi<0||Oi>1)return null;const nn=bi*ve-hi*ce,Ci=hi*se-Bt*ve,Ni=Bt*ce-bi*se,Hi=(ee[0]*nn+ee[1]*Ci+ee[2]*Ni)*Nt;return Hi<0||Oi+Hi>1?null:(be*nn+Me*Ci+Xe*Ni)*Nt}function uf(a,n,u){return(a-n)/(u-n)}function Ug(a,n,u,p,v,E,M,R,Y){const j=1<<u,ee=E-p,se=M-v,ce=(a+1)/j*ee+p,ve=(n+0)/j*se+v,be=(n+1)/j*se+v;R[0]=(a+0)/j*ee+p,R[1]=ve,Y[0]=ce,Y[1]=be}class Wg{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(E){const M=Math.ceil(Math.log2(E.dim/8)),R=[];let Y=Math.ceil(Math.pow(2,M));const j=1/Y,ee=(ve,be,Me,Xe,ut)=>{const Lt=Xe?1:0,ht=(ve+1)*Me-Lt,At=be*Me,Nt=(be+1)*Me-Lt;ut[0]=ve*Me,ut[1]=At,ut[2]=ht,ut[3]=Nt};let se=new E_(Y);const ce=[];for(let ve=0;ve<Y*Y;ve++){ee(ve%Y,Math.floor(ve/Y),j,!1,ce);const be=hd(ce[0],ce[1],E),Me=hd(ce[2],ce[1],E),Xe=hd(ce[2],ce[3],E),ut=hd(ce[0],ce[3],E);se.minimums.push(Math.min(be,Me,Xe,ut)),se.maximums.push(Math.max(be,Me,Xe,ut)),se.leaves.push(1)}for(R.push(se),Y/=2;Y>=1;Y/=2){const ve=R[R.length-1];se=new E_(Y);for(let be=0;be<Y*Y;be++){ee(be%Y,Math.floor(be/Y),2,!0,ce);const Me=ve.getElevation(ce[0],ce[1]),Xe=ve.getElevation(ce[2],ce[1]),ut=ve.getElevation(ce[2],ce[3]),Lt=ve.getElevation(ce[0],ce[3]),ht=ve.isLeaf(ce[0],ce[1]),At=ve.isLeaf(ce[2],ce[1]),Nt=ve.isLeaf(ce[2],ce[3]),Bt=ve.isLeaf(ce[0],ce[3]),bi=Math.min(Me.min,Xe.min,ut.min,Lt.min),hi=Math.max(Me.max,Xe.max,ut.max,Lt.max),Oi=ht&&At&&Nt&&Bt;se.maximums.push(hi),se.minimums.push(bi),se.leaves.push(hi-bi<=5&&Oi?1:0)}R.push(se)}return R}(this.dem),p=u.length-1,v=u[p];this._addNode(v.minimums[0],v.maximums[0],v.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(n,u,p,v,E,M,R=1){return S_([n,u,-100],[p,v,this.maximums[0]*R],E,M)}raycast(n,u,p,v,E,M,R=1){if(!this.nodeCount)return null;const Y=this.raycastRoot(n,u,p,v,E,M,R);if(null==Y)return null;const j=[],ee=[],se=[],ce=[],ve=[{idx:0,t:Y,nodex:0,nodey:0,depth:0}];for(;ve.length>0;){const{idx:be,t:Me,nodex:Xe,nodey:ut,depth:Lt}=ve.pop();if(this.leaves[be]){Ug(Xe,ut,Lt,n,u,p,v,se,ce);const At=1<<Lt,Nt=(Xe+0)/At,Bt=(Xe+1)/At,bi=(ut+0)/At,hi=(ut+1)/At,Oi=hd(Nt,bi,this.dem)*R,nn=hd(Bt,bi,this.dem)*R,Ci=hd(Bt,hi,this.dem)*R,Ni=hd(Nt,hi,this.dem)*R,Hi=cf(se[0],se[1],Oi,ce[0],se[1],nn,ce[0],ce[1],Ci,E,M),Ki=cf(ce[0],ce[1],Ci,se[0],ce[1],Ni,se[0],se[1],Oi,E,M),an=Math.min(null!==Hi?Hi:Number.MAX_VALUE,null!==Ki?Ki:Number.MAX_VALUE);if(an!==Number.MAX_VALUE)return an;{const Li=Qc([],E,M,Me);if($g(Oi,nn,Ni,Ci,uf(Li[0],se[0],ce[0]),uf(Li[1],se[1],ce[1]))>=Li[2])return Me}continue}let ht=0;for(let At=0;At<this._siblingOffset.length;At++){Ug((Xe<<1)+this._siblingOffset[At][0],(ut<<1)+this._siblingOffset[At][1],Lt+1,n,u,p,v,se,ce),se[2]=-100,ce[2]=this.maximums[this.childOffsets[be]+At]*R;const Nt=S_(se,ce,E,M);if(null!=Nt){const Bt=Nt;j[At]=Bt;let bi=!1;for(let hi=0;hi<ht&&!bi;hi++)Bt>=j[ee[hi]]&&(ee.splice(hi,0,At),bi=!0);bi||(ee[ht]=At),ht++}}for(let At=0;At<ht;At++){const Nt=ee[At];ve.push({idx:this.childOffsets[be]+Nt,t:j[Nt],nodex:(Xe<<1)+this._siblingOffset[Nt][0],nodey:(ut<<1)+this._siblingOffset[Nt][1],depth:Lt+1})}}return null}_addNode(n,u,p){return this.minimums.push(n),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(n,u,p,v,E){if(1===n[v].isLeaf(u,p))return;this.childOffsets[E]||(this.childOffsets[E]=this.nodeCount);const M=v-1,R=n[M];let Y=0,j=0;for(let ee=0;ee<this._siblingOffset.length;ee++){const se=2*u+this._siblingOffset[ee][0],ce=2*p+this._siblingOffset[ee][1],ve=R.getElevation(se,ce),be=R.isLeaf(se,ce),Me=this._addNode(ve.min,ve.max,be);be&&(Y|=1<<ee),j||(j=Me)}for(let ee=0;ee<this._siblingOffset.length;ee++)Y&1<<ee||this._construct(n,2*u+this._siblingOffset[ee][0],2*p+this._siblingOffset[ee][1],M,j+ee)}}function $g(a,n,u,p,v,E){return zn(zn(a,u,E),zn(n,p,E),v)}function hd(a,n,u){const p=u.dim,v=vi(a*p-.5,0,p-1),E=vi(n*p-.5,0,p-1),M=Math.floor(v),R=Math.floor(E),Y=Math.min(M+1,p-1),j=Math.min(R+1,p-1);return $g(u.get(M,R),u.get(Y,R),u.get(M,j),u.get(Y,j),v-M,E-R)}const Xg={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function d0(a,n,u){return(256*a*256+256*n+u)/10-1e4}function h0(a,n,u){return 256*a+n+u/256-32768}class Lm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,u,p,v=!1,E=!1){if(this.uid=n,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&"mapbox"!==p&&"terrarium"!==p)return xn(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const M=this.dim=u.height-2,R=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=p||"mapbox",this.borderReady=v,!v){for(let Y=0;Y<M;Y++)R[this._idx(-1,Y)]=R[this._idx(0,Y)],R[this._idx(M,Y)]=R[this._idx(M-1,Y)],R[this._idx(Y,-1)]=R[this._idx(Y,0)],R[this._idx(Y,M)]=R[this._idx(Y,M-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(M,-1)]=R[this._idx(M-1,0)],R[this._idx(-1,M)]=R[this._idx(0,M-1)],R[this._idx(M,M)]=R[this._idx(M-1,M-1)],E&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Wg(this)}get(n,u,p=!1){p&&(n=vi(n,-1,this.dim),u=vi(u,-1,this.dim));const v=4*this._idx(n,u);return("terrarium"===this.encoding?h0:d0)(this.pixels[v],this.pixels[v+1],this.pixels[v+2])}static getUnpackVector(n){return Xg[n]}get unpackVector(){return Xg[this.encoding]}_idx(n,u){if(n<-1||n>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(n+1)}static pack(n,u){const p=[0,0,0,0],v=Lm.getUnpackVector(u);let E=Math.floor((n+v[3])/v[2]);return p[2]=E%256,E=Math.floor(E/256),p[1]=E%256,E=Math.floor(E/256),p[0]=E,p}getPixels(){return new $a({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,u,p){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let v=u*this.dim,E=u*this.dim+this.dim,M=p*this.dim,R=p*this.dim+this.dim;switch(u){case-1:v=E-1;break;case 1:E=v+1}switch(p){case-1:M=R-1;break;case 1:R=M+1}const Y=-u*this.dim,j=-p*this.dim;for(let ee=M;ee<R;ee++)for(let se=v;se<E;se++){const ce=4*this._idx(se,ee),ve=4*this._idx(se+Y,ee+j);this.pixels[ce+0]=n.pixels[ve+0],this.pixels[ce+1]=n.pixels[ve+1],this.pixels[ce+2]=n.pixels[ve+2],this.pixels[ce+3]=n.pixels[ve+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Tn(Lm,"DEMData"),Tn(Wg,"DemMinMaxQuadTree",{omit:["dem"]});class p0{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,p){const v=n.wrapped().key;void 0===this.data[v]&&(this.data[v]=[]);const E={value:u,timeout:void 0};if(void 0!==p&&(E.timeout=setTimeout(()=>{this.remove(n,E)},p)),this.data[v].push(E),this.order.push(v),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[n].length&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const p=n.wrapped().key,v=void 0===u?0:this.data[p].indexOf(u),E=this.data[p][v];return this.data[p].splice(v,1),E.timeout&&clearTimeout(E.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(E.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const p in this.data)for(const v of this.data[p])n(v.value)||u.push(v);for(const p of u)this.remove(p.value.tileID,p)}}class ip{constructor(n,u,p){this.func=n,this.mask=u,this.range=p}}ip.ReadOnly=!1,ip.ReadWrite=!0,ip.disabled=new ip(519,ip.ReadOnly,[0,1]);class qg{constructor(n,u,p,v,E,M){this.test=n,this.ref=u,this.mask=p,this.fail=v,this.depthFail=E,this.pass=M}}qg.disabled=new qg({func:519,mask:0},0,0,7680,7680,7680);class lu{constructor(n,u,p){this.blendFunction=n,this.blendColor=u,this.mask=p}}lu.Replace=[1,0],lu.disabled=new lu(lu.Replace,Dr.transparent,[!1,!1,!1,!1]),lu.unblended=new lu(lu.Replace,Dr.transparent,[!0,!0,!0,!0]),lu.alphaBlended=new lu([1,771],Dr.transparent,[!0,!0,!0,!0]);class cu{constructor(n,u,p){this.enable=n,this.mode=u,this.frontFace=p}}cu.disabled=new cu(!1,1029,2305),cu.backCCW=new cu(!0,1029,2305),cu.backCW=new cu(!0,1029,2304),cu.frontCW=new cu(!0,1028,2304),cu.frontCCW=new cu(!0,1028,2305);class wh extends A{constructor(n,u,p){super(),this.id=n,this._onlySymbols=p,u.on("data",v=>{"source"===v.dataType&&"metadata"===v.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===v.dataType&&"content"===v.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new p0(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pb,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(n){this.map=n,this._minTileCacheSize=void 0===this._minTileCacheSize&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const u=this._tiles[n];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,u){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,u)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return bn(this._tiles).map(n=>n.tileID).sort(Ch).map(n=>n.key)}getRenderableIds(n){const u=[];for(const p in this._tiles)this._isIdRenderable(+p,n)&&u.push(this._tiles[p]);return n?u.sort((p,v)=>{const E=p.tileID,M=v.tileID,R=new at(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),Y=new at(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-M.overscaledZ||Y.y-R.y||Y.x-R.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Ch).map(p=>p.key)}hasRenderableParent(n){const u=this.findLoadedParent(n,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(n,u){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(u||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)"errored"!==this._tiles[n].state&&this._reloadTile(+n,"reloading")}}_reloadTile(n,u){const p=this._tiles[n];p&&("loading"!==p.state&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,n,u)))}_tileLoaded(n,u,p,v){if(v)if(n.state="errored",404!==v.status)this._source.fire(new x(v,{tile:n}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const E=this.map.painter.terrain;this.update(this.transform,E.getScaledDemTileSize(),!0),E.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=c.now(),"expired"===p&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new b("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const E=u[v];if(n.neighboringTiles&&n.neighboringTiles[E]){const M=this.getTileByID(E);p(n,M),p(M,n)}}function p(v,E){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let M=E.tileID.canonical.x-v.tileID.canonical.x;const R=E.tileID.canonical.y-v.tileID.canonical.y,Y=Math.pow(2,v.tileID.canonical.z),j=E.tileID.key;0===M&&0===R||Math.abs(R)>1||(Math.abs(M)>1&&(1===Math.abs(M+Y)?M+=Y:1===Math.abs(M-Y)&&(M-=Y)),E.dem&&v.dem&&(v.dem.backfillBorder(E.dem,M,R),v.neighboringTiles&&v.neighboringTiles[j]&&(v.neighboringTiles[j].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u,p,v){for(const E in this._tiles){let M=this._tiles[E];if(v[E]||!M.hasData()||M.tileID.overscaledZ<=u||M.tileID.overscaledZ>p)continue;let R=M.tileID;for(;M&&M.tileID.overscaledZ>u+1;){const j=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[j.key],M&&M.hasData()&&(R=j)}let Y=R;for(;Y.overscaledZ>u;)if(Y=Y.scaledTo(Y.overscaledZ-1),n[Y.key]){v[R.key]=R;break}}}findLoadedParent(n,u){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=n.overscaledZ-1;p>=u;p--){const v=n.scaledTo(p),E=this._getLoadedTile(v);if(E)return E}}_getLoadedTile(n){const u=this._tiles[n.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,u){u=u||this._source.tileSize;const p=Math.ceil(n.width/u)+1,v=Math.ceil(n.height/u)+1,E=Math.floor(p*v*5),M="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,E):E,R="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(R)}handleWrapJump(n){const u=Math.round((n-(void 0===this._prevLng?n:this._prevLng))/360);if(this._prevLng=n,u){const p={};for(const v in this._tiles){const E=this._tiles[v];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),p[E.tileID.key]=E}this._tiles=p;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(n,u,p){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let v;this.updateCacheSize(n,u),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new Xa(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(v=n.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(v=v.filter(R=>this._source.hasTile(R)))):v=[];const E=this._updateRetainedTiles(v);if(T_(this._source.type)&&0!==v.length){const R={},Y={},j=Object.keys(E);for(const se of j){const ce=E[se],ve=this._tiles[se];if(!ve||ve.fadeEndTime&&ve.fadeEndTime<=c.now())continue;const be=this.findLoadedParent(ce,Math.max(ce.overscaledZ-wh.maxOverzooming,this._source.minzoom));be&&(this._addTile(be.tileID),R[be.tileID.key]=be.tileID),Y[se]=ce}const ee=v[v.length-1].overscaledZ;for(const se in this._tiles){const ce=this._tiles[se];if(E[se]||!ce.hasData())continue;let ve=ce.tileID;for(;ve.overscaledZ>ee;){ve=ve.scaledTo(ve.overscaledZ-1);const be=this._tiles[ve.key];if(be&&be.hasData()&&Y[ve.key]){E[se]=ce.tileID;break}}}for(const se in R)E[se]||(this._coveredTiles[se]=!0,E[se]=R[se])}for(const R in E)this._tiles[R].clearFadeHold();const M=function(R,Y){const j=[];for(const ee in R)ee in Y||j.push(ee);return j}(this._tiles,E);for(const R of M){const Y=this._tiles[R];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const u={};if(0===n.length)return u;const p={},v=n.reduce((j,ee)=>Math.min(j,ee.overscaledZ),1/0),E=n[0].overscaledZ,M=Math.max(E-wh.maxOverzooming,this._source.minzoom),R=Math.max(E+wh.maxUnderzooming,this._source.minzoom),Y={};for(const j of n){const ee=this._addTile(j);u[j.key]=j,ee.hasData()||v<this._source.maxzoom&&(Y[j.key]=j)}this._retainLoadedChildren(Y,v,R,u);for(const j of n){let ee=this._tiles[j.key];if(ee.hasData())continue;if(j.canonical.z>=this._source.maxzoom){const ce=j.children(this._source.maxzoom)[0],ve=this.getTile(ce);if(ve&&ve.hasData()){u[ce.key]=ce;continue}}else{const ce=j.children(this._source.maxzoom);if(u[ce[0].key]&&u[ce[1].key]&&u[ce[2].key]&&u[ce[3].key])continue}let se=ee.wasRequested();for(let ce=j.overscaledZ-1;ce>=M;--ce){const ve=j.scaledTo(ce);if(p[ve.key]||(p[ve.key]=!0,ee=this.getTile(ve),!ee&&se&&(ee=this._addTile(ve)),ee&&(u[ve.key]=ve,se=ee.wasRequested(),ee.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const u=[];let p,v=this._tiles[n].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){p=this._loadedParentTiles[v.key];break}u.push(v.key);const E=v.scaledTo(v.overscaledZ-1);if(p=this._getLoadedTile(E),p)break;v=E}for(const E of u)this._loadedParentTiles[E]=p}}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const p=!!u;if(!p){const v=this.map?this.map.painter:null;u=new jg(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,v,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,n.key,u.state))}return u?(u.uses++,this._tiles[n.key]=u,p||this._source.fire(new b("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=u.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,u,p){const v=[],E=this.transform;if(!E)return v;const M="globe"===E.projection.name,R=gc(E.center.lng);for(const Y in this._tiles){const j=this._tiles[Y];if(p&&j.clearQueryDebugViz(),j.holdingForFade())continue;let ee;if(M){const se=j.tileID.canonical;if(0===se.z){const ce=[Math.abs(vi(R,...np(se,-1))-R),Math.abs(vi(R,...np(se,1))-R)];ee=[0,2*ce.indexOf(Math.min(...ce))-1]}else{const ce=[Math.abs(vi(R,...np(se,-1))-R),Math.abs(vi(R,...np(se,0))-R),Math.abs(vi(R,...np(se,1))-R)];ee=[ce.indexOf(Math.min(...ce))-1]}}else ee=[0];for(const se of ee){const ce=n.containsTile(j,E,u,se);ce&&v.push(ce)}}return v}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);for(const p of u)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(T_(this._source.type))for(const n in this._tiles){const u=this._tiles[n];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=c.now())return!0}return!1}setFeatureState(n,u,p){this._state.updateState(n=n||"_geojsonTileLayer",u,p)}removeFeatureState(n,u,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,p)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,p){const v=this._tiles[n];v&&v.setDependencies(u,p)}reloadTilesForDependencies(n,u){for(const p in this._tiles)this._tiles[p].hasDependency(n,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(n,u))}_preloadTiles(n,u){if(!this._sourceLoaded){const R=()=>{this._sourceLoaded&&(this._source.off("data",R),this._preloadTiles(n,u))};return void this._source.on("data",R)}const p=new Map,v=Array.isArray(n)?n:[n],E=this.map.painter.terrain,M=this.usedForTerrain&&E?E.getScaledDemTileSize():this._source.tileSize;for(const R of v){const Y=R.coveringTiles({tileSize:M,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const j of Y)p.set(j.key,j);this.usedForTerrain&&R.updateElevation(!1)}Ji(Array.from(p.values()),(R,Y)=>{const j=new jg(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(j,ee=>{"raster-dem"===this._source.type&&j.dem&&this._backfillDEM(j),Y(ee,j)})},u)}}function Ch(a,n){const u=Math.abs(2*a.wrap)-+(a.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return a.overscaledZ-n.overscaledZ||p-u||n.canonical.y-a.canonical.y||n.canonical.x-a.canonical.x}function T_(a){return"raster"===a||"image"===a||"video"===a||"custom"===a}function np(a,n){const u=1<<a.z;return[a.x/u+n,(a.x+1)/u+n]}wh.maxOverzooming=10,wh.maxUnderzooming=3;class Pm{constructor(n,u,p){this._demTile=n,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(n,u,p){const v=p||n.findDEMTileFor(u);if(!v||!v.dem)return;const E=v.dem,M=v.tileID,R=1<<u.canonical.z-M.canonical.z;return new Pm(v,v.tileSize/An/R,[(u.canonical.x/R-M.canonical.x)*E.dim,(u.canonical.y/R-M.canonical.y)*E.dim])}tileCoordToPixel(n,u){const p=u*this._scale+this._offset[1],v=Math.floor(n*this._scale+this._offset[0]),E=Math.floor(p);return new at(v,E)}getElevationAt(n,u,p,v){const E=n*this._scale+this._offset[0],M=u*this._scale+this._offset[1],R=Math.floor(E),Y=Math.floor(M),j=this._dem;return v=!!v,p?zn(zn(j.get(R,Y,v),j.get(R,Y+1,v),M-Y),zn(j.get(R+1,Y,v),j.get(R+1,Y+1,v),M-Y),E-R):j.get(R,Y,v)}getElevationAtPixel(n,u,p){return this._dem.get(n,u,!!p)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*vc(1,n)*this._dem.stride}}class k_{constructor(n,u){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new uc(An,16,0),this.featureIndexArray=new El,this.promoteId=u}insert(n,u,p,v,E,M=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,v,E,M);const Y=this.grid;for(let j=0;j<u.length;j++){const ee=u[j],se=[1/0,1/0,-1/0,-1/0];for(let ce=0;ce<ee.length;ce++){const ve=ee[ce];se[0]=Math.min(se[0],ve.x),se[1]=Math.min(se[1],ve.y),se[2]=Math.max(se[2],ve.x),se[3]=Math.max(se[3],ve.y)}se[0]<An&&se[1]<An&&se[2]>=0&&se[3]>=0&&Y.insert(R,se[0],se[1],se[2],se[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ye(new mm(this.rawTileData)).layers,this.sourceLayerCoder=new b_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,u,p,v){this.loadVTLayers();const E=n.params||{},M=Ti(E.filter),R=n.tileResult,Y=n.transform,j=R.bufferedTilespaceBounds,ee=this.grid.query(j.min.x,j.min.y,j.max.x,j.max.y,(be,Me,Xe,ut)=>uh(R.bufferedTilespaceGeometry,be,Me,Xe,ut));ee.sort(f0);let se=null;Y.elevation&&ee.length>0&&(se=Pm.create(Y.elevation,this.tileID));const ce={};let ve;for(let be=0;be<ee.length;be++){const Me=ee[be];if(Me===ve)continue;ve=Me;const Xe=this.featureIndexArray.get(Me);let ut=null;this.loadMatchingFeature(ce,Xe,M,E.layers,E.availableImages,u,p,v,(Lt,ht,At,Nt=0)=>(ut||(ut=Du(Lt,this.tileID.canonical,n.tileTransform)),ht.queryIntersectsFeature(R,Lt,At,ut,this.z,n.transform,n.pixelPosMatrix,se,Nt)))}return ce}loadMatchingFeature(n,u,p,v,E,M,R,Y,j){const{featureIndex:ee,bucketIndex:se,sourceLayerIndex:ce,layoutVertexArrayOffset:ve}=u,be=this.bucketLayerIDs[se];if(v&&!function(Lt,ht){for(let At=0;At<Lt.length;At++)if(ht.indexOf(Lt[At])>=0)return!0;return!1}(v,be))return;const Me=this.sourceLayerCoder.decode(ce),Xe=this.vtLayers[Me].feature(ee);if(p.needGeometry){const Lt=Wa(Xe,!0);if(!p.filter(new te(this.tileID.overscaledZ),Lt,this.tileID.canonical))return}else if(!p.filter(new te(this.tileID.overscaledZ),Xe))return;const ut=this.getId(Xe,Me);for(let Lt=0;Lt<be.length;Lt++){const ht=be[Lt];if(v&&v.indexOf(ht)<0)continue;const At=M[ht];if(!At)continue;let Nt={};void 0!==ut&&Y&&(Nt=Y.getState(At.sourceLayer||"_geojsonTileLayer",ut));const Bt=fn({},R[ht]);Bt.paint=A_(Bt.paint,At.paint,Xe,Nt,E),Bt.layout=A_(Bt.layout,At.layout,Xe,Nt,E);const bi=!j||j(Xe,At,Nt,ve);if(!bi)continue;const hi=new x_(Xe,this.z,this.x,this.y,ut);hi.layer=Bt;let Oi=n[ht];void 0===Oi&&(Oi=n[ht]=[]),Oi.push({featureIndex:ee,feature:hi,intersectionZ:bi})}}lookupSymbolFeatures(n,u,p,v,E,M,R,Y){const j={};this.loadVTLayers();const ee=Ti(E);for(const se of n)this.loadMatchingFeature(j,{bucketIndex:p,sourceLayerIndex:v,featureIndex:se,layoutVertexArrayOffset:0},ee,M,R,Y,u);return j}loadFeature(n){const{featureIndex:u,sourceLayerIndex:p}=n;this.loadVTLayers();const v=this.sourceLayerCoder.decode(p),E=this.vtFeatures[v];if(E[u])return E[u];const M=this.vtLayers[v].feature(u);return E[u]=M,M}hasLayer(n){for(const u of this.bucketLayerIDs)for(const p of u)if(n===p)return!0;return!1}getId(n,u){let p=n.id;if(this.promoteId){const v="string"==typeof this.promoteId?this.promoteId:this.promoteId[u];null!=v&&(p=n.properties[v]),"boolean"==typeof p&&(p=Number(p))}return p}}function A_(a,n,u,p,v){return ji(a,(E,M)=>{const R=n instanceof st?n.get(M):null;return R&&R.evaluate?R.evaluate(u,p,v):R})}function f0(a,n){return n-a}Tn(k_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class M_{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.image=new nu({width:n,height:u}),this.positions={},this.uploaded=!1}getDash(n,u){const p=this.getKey(n,u);return this.positions[p]}trim(){const n=this.width,u=this.height=on(this.nextRow);this.image.resize({width:n,height:u})}getKey(n,u){return n.join(",")+u}getDashRanges(n,u,p){const v=[];let E=n.length%2==1?-n[n.length-1]*p:0,M=n[0]*p,R=!0;v.push({left:E,right:M,isDash:R,zeroLength:0===n[0]});let Y=n[0];for(let j=1;j<n.length;j++){R=!R;const ee=n[j];E=Y*p,Y+=ee,M=Y*p,v.push({left:E,right:M,isDash:R,zeroLength:0===ee})}return v}addRoundDash(n,u,p){const v=u/2;for(let E=-p;E<=p;E++){const M=this.width*(this.nextRow+p+E);let R=0,Y=n[R];for(let j=0;j<this.width;j++){j/Y.right>1&&(Y=n[++R]);const ee=Math.abs(j-Y.left),se=Math.abs(j-Y.right),ce=Math.min(ee,se);let ve;const be=E/p*(v+1);if(Y.isDash){const Me=v-Math.abs(be);ve=Math.sqrt(ce*ce+Me*Me)}else ve=v-Math.sqrt(ce*ce+be*be);this.image.data[M+j]=Math.max(0,Math.min(255,ve+128))}}}addRegularDash(n,u){for(let Y=n.length-1;Y>=0;--Y){const j=n[Y],ee=n[Y+1];j.zeroLength?n.splice(Y,1):ee&&ee.isDash===j.isDash&&(ee.left=j.left,n.splice(Y,1))}const p=n[0],v=n[n.length-1];p.isDash===v.isDash&&(p.left=v.left-this.width,v.right=p.right+this.width);const E=this.width*this.nextRow;let M=0,R=n[M];for(let Y=0;Y<this.width;Y++){Y/R.right>1&&(R=n[++M]);const j=Math.abs(Y-R.left),ee=Math.abs(Y-R.right),se=Math.min(j,ee);this.image.data[E+Y]=Math.max(0,Math.min(255,(R.isDash?se:-se)+u+128))}}addDash(n,u){const p=this.getKey(n,u);if(this.positions[p])return this.positions[p];const v="round"===u,E=v?7:0,M=2*E+1;if(this.nextRow+M>this.height)return xn("LineAtlas out of space"),null;0===n.length&&n.push(1);let R=0;for(let ee=0;ee<n.length;ee++)n[ee]<0&&(xn("Negative value is found in line dasharray, replacing values with 0"),n[ee]=0),R+=n[ee];if(0!==R){const ee=this.width/R,se=this.getDashRanges(n,this.width,ee);v?this.addRoundDash(se,ee,E):this.addRegularDash(se,"square"===u?.5*ee:0)}const Y=this.nextRow+E;this.nextRow+=M;const j={tl:[Y,E],br:[R,0]};return this.positions[p]=j,j}}Tn(M_,"LineAtlas");const D_=1*au;class I_{constructor(n){const u={},p=[];for(const R in n){const Y=n[R],j=u[R]={};for(const ee in Y.glyphs){const se=Y.glyphs[+ee];if(!se||0===se.bitmap.width||0===se.bitmap.height)continue;const ce=se.metrics.localGlyph?D_:1,ve={x:0,y:0,w:se.bitmap.width+2*ce,h:se.bitmap.height+2*ce};p.push(ve),j[ee]=ve}}const{w:v,h:E}=Kp(p),M=new nu({width:v||1,height:E||1});for(const R in n){const Y=n[R];for(const j in Y.glyphs){const ee=Y.glyphs[+j];if(!ee||0===ee.bitmap.width||0===ee.bitmap.height)continue;const se=u[R][j],ce=ee.metrics.localGlyph?D_:1;nu.copy(ee.bitmap,M,{x:0,y:0},{x:se.x+ce,y:se.y+ce},ee.bitmap)}}this.image=M,this.positions=u}}Tn(I_,"GlyphAtlas");class L_{constructor(n){this.tileID=new Xa(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=ld(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,u,p,v,E){this.status="parsing",this.data=n,this.collisionBoxArray=new Ur;const M=new b_(Object.keys(n.layers).sort()),R=new k_(this.tileID,this.promoteId);R.bucketLayerIDs=[];const Y={},j=new M_(256,256),ee={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:j,availableImages:p},se=u.familiesBySource[this.source];for(const Nt in se){const Bt=n.layers[Nt];if(!Bt)continue;let bi=!1,hi=!1;for(const Ci of se[Nt])"symbol"===Ci[0].type?bi=!0:hi=!0;if(!0===this.isSymbolTile&&!bi||!1===this.isSymbolTile&&!hi)continue;1===Bt.version&&xn(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Oi=M.encode(Nt),nn=[];for(let Ci=0;Ci<Bt.length;Ci++){const Ni=Bt.feature(Ci),Hi=R.getId(Ni,Nt);nn.push({feature:Ni,id:Hi,index:Ci,sourceLayerIndex:Oi})}for(const Ci of se[Nt]){const Ni=Ci[0];void 0!==this.isSymbolTile&&"symbol"===Ni.type!==this.isSymbolTile||Ni.minzoom&&this.zoom<Math.floor(Ni.minzoom)||Ni.maxzoom&&this.zoom>=Ni.maxzoom||"none"!==Ni.visibility&&(Jg(Ci,this.zoom,p),(Y[Ni.id]=Ni.createBucket({index:R.bucketLayerIDs.length,layers:Ci,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Oi,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(nn,ee,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(Ci.map(Hi=>Hi.id)))}}let ce,ve,be,Me;j.trim();const Xe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ut=()=>{if(ce)return E(ce);if(ve&&be&&Me){const Nt=new I_(ve),Bt=new Kv(be,Me);for(const bi in Y){const hi=Y[bi];hi instanceof ud?(Jg(hi.layers,this.zoom,p),Xy(hi,ve,Nt.positions,be,Bt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):hi.hasPattern&&(hi instanceof um||hi instanceof Np||hi instanceof bc)&&(Jg(hi.layers,this.zoom,p),hi.addFeatures(ee,this.tileID.canonical,Bt.patternPositions,p,this.tileTransform))}this.status="done",E(null,{buckets:bn(Y).filter(bi=>!bi.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nt.image,lineAtlas:j,imageAtlas:Bt,glyphMap:this.returnDependencies?ve:null,iconMap:this.returnDependencies?be:null,glyphPositions:this.returnDependencies?Nt.positions:null})}},Lt=ji(ee.glyphDependencies,Nt=>Object.keys(Nt).map(Number));Object.keys(Lt).length?v.send("getGlyphs",{uid:this.uid,stacks:Lt},(Nt,Bt)=>{ce||(ce=Nt,ve=Bt,ut())},void 0,!1,Xe):ve={};const ht=Object.keys(ee.iconDependencies);ht.length?v.send("getImages",{icons:ht,source:this.source,tileID:this.tileID,type:"icons"},(Nt,Bt)=>{ce||(ce=Nt,be=Bt,ut())},void 0,!1,Xe):be={};const At=Object.keys(ee.patternDependencies);At.length?v.send("getImages",{icons:At,source:this.source,tileID:this.tileID,type:"patterns"},(Nt,Bt)=>{ce||(ce=Nt,Me=Bt,ut())},void 0,!1,Xe):Me={},ut()}}function Jg(a,n,u){const p=new te(n);for(const v of a)v.recalculate(p,u)}class O_{constructor(n){this.entries={},this.scheduler=n}request(n,u,p,v){const E=this.entries[n]=this.entries[n]||{callbacks:[]};if(E.result){const[M,R]=E.result;return this.scheduler?this.scheduler.add(()=>{v(M,R)},u):v(M,R),()=>{}}return E.callbacks.push(v),E.cancel||(E.cancel=p((M,R)=>{E.result=[M,R];for(const Y of E.callbacks)this.scheduler?this.scheduler.add(()=>{Y(M,R)},u):Y(M,R);setTimeout(()=>delete this.entries[n],3e3)})),()=>{E.result||(E.callbacks=E.callbacks.filter(M=>M!==v),E.callbacks.length||(E.cancel(),delete this.entries[n]))}}}function P_(a,n,u){const p=JSON.stringify(a.request);return a.data&&(this.deduped.entries[p]={result:[null,a.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},v=>{const E=Tr(a.request,(M,R,Y,j)=>{M?v(M):R&&v(null,{vectorTile:u?void 0:new ye(new mm(R)),rawData:R,cacheControl:Y,expires:j})});return()=>{E.cancel(),v()}},n)}const R_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qg{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(n,0,2);if(219!==u)throw new Error("Data does not appear to be in a KDBush format.");const v=p>>4;if(1!==v)throw new Error(`Got v${v} data when expected v1.`);const E=R_[15&p];if(!E)throw new Error("Unrecognized array type.");const[M]=new Uint16Array(n,2,1),[R]=new Uint32Array(n,4,1);return new Qg(R,M,E,n)}constructor(n,u=64,p=Float64Array,v){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const E=R_.indexOf(this.ArrayType),M=2*n*this.ArrayType.BYTES_PER_ELEMENT,R=n*this.IndexArrayType.BYTES_PER_ELEMENT,Y=(8-R%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${p}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+R+Y,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+M+R+Y),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+R+Y,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=n)}add(n,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=n,this.coords[this._pos++]=u,p}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return ev(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,u,p,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:M,nodeSize:R}=this,Y=[0,E.length-1,0],j=[];for(;Y.length;){const ee=Y.pop()||0,se=Y.pop()||0,ce=Y.pop()||0;if(se-ce<=R){for(let Xe=ce;Xe<=se;Xe++){const ut=M[2*Xe],Lt=M[2*Xe+1];ut>=n&&ut<=p&&Lt>=u&&Lt<=v&&j.push(E[Xe])}continue}const ve=ce+se>>1,be=M[2*ve],Me=M[2*ve+1];be>=n&&be<=p&&Me>=u&&Me<=v&&j.push(E[ve]),(0===ee?n<=be:u<=Me)&&(Y.push(ce),Y.push(ve-1),Y.push(1-ee)),(0===ee?p>=be:v>=Me)&&(Y.push(ve+1),Y.push(se),Y.push(1-ee))}return j}within(n,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:E,nodeSize:M}=this,R=[0,v.length-1,0],Y=[],j=p*p;for(;R.length;){const ee=R.pop()||0,se=R.pop()||0,ce=R.pop()||0;if(se-ce<=M){for(let Xe=ce;Xe<=se;Xe++)F_(E[2*Xe],E[2*Xe+1],n,u)<=j&&Y.push(v[Xe]);continue}const ve=ce+se>>1,be=E[2*ve],Me=E[2*ve+1];F_(be,Me,n,u)<=j&&Y.push(v[ve]),(0===ee?n-p<=be:u-p<=Me)&&(R.push(ce),R.push(ve-1),R.push(1-ee)),(0===ee?n+p>=be:u+p>=Me)&&(R.push(ve+1),R.push(se),R.push(1-ee))}return Y}}function ev(a,n,u,p,v,E){if(v-p<=u)return;const M=p+v>>1;z_(a,n,M,p,v,E),ev(a,n,u,p,M-1,1-E),ev(a,n,u,M+1,v,1-E)}function z_(a,n,u,p,v,E){for(;v>p;){if(v-p>600){const j=v-p+1,ee=u-p+1,se=Math.log(j),ce=.5*Math.exp(2*se/3),ve=.5*Math.sqrt(se*ce*(j-ce)/j)*(ee-j/2<0?-1:1);z_(a,n,u,Math.max(p,Math.floor(u-ee*ce/j+ve)),Math.min(v,Math.floor(u+(j-ee)*ce/j+ve)),E)}const M=n[2*u+E];let R=p,Y=v;for(df(a,n,p,u),n[2*v+E]>M&&df(a,n,p,v);R<Y;){for(df(a,n,R,Y),R++,Y--;n[2*R+E]<M;)R++;for(;n[2*Y+E]>M;)Y--}n[2*p+E]===M?df(a,n,p,Y):(Y++,df(a,n,Y,v)),Y<=u&&(p=Y+1),u<=Y&&(v=Y-1)}}function df(a,n,u,p){Rm(a,u,p),Rm(n,2*u,2*p),Rm(n,2*u+1,2*p+1)}function Rm(a,n,u){const p=a[n];a[n]=a[u],a[u]=p}function F_(a,n,u,p){const v=a-u,E=n-p;return v*v+E*E}i.ARRAY_TYPE=qo,i.AUTH_ERR_MSG=lt,i.Aabb=Zs,i.Actor=class{constructor(a,n,u){this.target=a,this.parent=n,this.mapId=u,this.callbacks={},this.cancelCallbacks={},Nn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Zi()?a:V,this.scheduler=new y_}send(a,n,u,p,v=!1,E){const M=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=E,this.callbacks[M]=u);const R=tn(this.globalScope)?void 0:[];return this.target.postMessage({id:M,type:a,hasCallback:!!u,targetMapId:p,mustQueue:v,sourceMapId:this.mapId,data:jc(n,R)},R),{cancel:()=>{u&&delete this.callbacks[M],this.target.postMessage({id:M,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(a){const n=a.data,u=n.id;if(u&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(n.mustQueue||Zi()){const p=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,n),p&&p.metadata||{type:"message"})}else this.processTask(u,n)}processTask(a,n){if("<response>"===n.type){const u=this.callbacks[a];delete this.callbacks[a],u&&(n.error?u(Cl(n.error)):u(null,Cl(n.data)))}else{const u=tn(this.globalScope)?void 0:[],p=n.hasCallback?(E,M)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:E?jc(E):null,data:jc(M,u)},u)}:E=>{},v=Cl(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,v,p);else if(this.parent.getWorkerSource){const E=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,E[0],v.source)[E[1]](v,p)}else p(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},i.CanonicalTileID=cm,i.Color=Dr,i.ColorMode=lu,i.CullFaceMode=cu,i.DEMData=Lm,i.DataConstantProperty=Te,i.DedupedRequest=O_,i.DepthMode=ip,i.EXTENT=An,i.Elevation=class{isDataAvailableAtPoint(a){const n=this._source();if(this.isUsingMockSource()||!n||a.y<0||a.y>1)return!1;const u=n.getSource().maxzoom,p=1<<u,v=Math.floor(a.x),E=Math.floor((a.x-v)*p),M=Math.floor(a.y*p),R=this.findDEMTileFor(new Xa(u,v,u,E,M));return!(!R||!R.dem)}getAtPointOrZero(a,n=0){return this.getAtPoint(a,n)||0}getAtPoint(a,n,u=!0){if(this.isUsingMockSource())return null;null==n&&(n=null);const p=this._source();if(!p||a.y<0||a.y>1)return n;const v=p.getSource().maxzoom,E=1<<v,M=Math.floor(a.x),R=a.x-M,Y=new Xa(v,M,v,Math.floor(R*E),Math.floor(a.y*E)),j=this.findDEMTileFor(Y);if(!j||!j.dem)return n;const ee=j.dem,se=1<<j.tileID.canonical.z,ce=(R*se-j.tileID.canonical.x)*ee.dim,ve=(a.y*se-j.tileID.canonical.y)*ee.dim,be=Math.floor(ce),Me=Math.floor(ve);return(u?this.exaggeration():1)*zn(zn(ee.get(be,Me),ee.get(be,Me+1),ve-Me),zn(ee.get(be+1,Me),ee.get(be+1,Me+1),ve-Me),ce-be)}getAtTileOffset(a,n,u){const p=1<<a.canonical.z;return this.getAtPointOrZero(new Ju(a.wrap+(a.canonical.x+n/An)/p,(a.canonical.y+u/An)/p))}getAtTileOffsetFunc(a,n,u,p){return v=>{const E=this.getAtTileOffset(a,v.x,v.y),M=p.upVector(a.canonical,v.x,v.y);return ll(M,M,E*p.upVectorScale(a.canonical,n,u).metersToTile),M}}getForTilePoints(a,n,u,p){if(this.isUsingMockSource())return!1;const v=Pm.create(this,a,p);return!!v&&(n.forEach(E=>{E[2]=this.exaggeration()*v.getElevationAt(E[0],E[1],u)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(a);if(!n||!n.dem)return null;const u=n.dem.tree,p=n.tileID,v=1<<a.canonical.z-p.canonical.z;let E=a.canonical.x/v-p.canonical.x,M=a.canonical.y/v-p.canonical.y,R=0;for(let Y=0;Y<a.canonical.z-p.canonical.z&&!u.leaves[R];Y++){E*=2,M*=2;const j=2*Math.floor(M)+Math.floor(E);R=u.childOffsets[R]+j,E%=1,M%=1}return{min:this.exaggeration()*u.minimums[R],max:this.exaggeration()*u.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,n,u){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},i.ErrorEvent=x,i.EvaluationParameters=te,i.Event=b,i.Evented=A,i.FillExtrusionBucket=bc,i.Frustum=qu,i.FrustumCorners=sh,i.GLOBE_RADIUS=Ul,i.GLOBE_SCALE_MATCH_LATITUDE=45,i.GLOBE_ZOOM_THRESHOLD_MAX=Sp,i.GLOBE_ZOOM_THRESHOLD_MIN=Ep,i.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,n){const u=new Qi,p=new Vn,v=[],E=a+1+2,M=n[0]+1,R=n[0]+1+(1+n.length),Y=(j,ee,se)=>{let ce=j===E-1?j-2:0===j?j:j-1;return ce+=se?24575:0,[ce,ee]};for(let j=0;j<E;++j)u.emplaceBack(...Y(j,0,!0));for(let j=0;j<M;++j)for(let ee=0;ee<E;++ee)u.emplaceBack(...Y(ee,j,(0===ee||ee===E-1)&&!0));for(let j=0;j<n.length;++j){const ee=n[j];for(let se=0;se<E;++se)u.emplaceBack(...Y(se,ee,!0))}for(let j=0;j<n.length;++j){const ee=p.length,se=n[j]+1+2,ce=new Vn;for(let Me=0;Me<se-1;Me++){const Xe=Me===se-2,ut=Xe?E*(R-n.length+j-Me):E;for(let Lt=0;Lt<E-1;Lt++){const ht=Me*E+Lt;0===Me||Xe||0===Lt||Lt===E-2?(ce.emplaceBack(ht+1,ht,ht+ut),ce.emplaceBack(ht+ut,ht+ut+1,ht+1)):(p.emplaceBack(ht+1,ht,ht+ut),p.emplaceBack(ht+ut,ht+ut+1,ht+1))}}const ve=Hs.simpleSegment(0,ee,u.length,p.length-ee);for(let Me=0;Me<ce.uint16.length;Me+=3)p.emplaceBack(ce.uint16[Me],ce.uint16[Me+1],ce.uint16[Me+2]);const be=Hs.simpleSegment(0,ee,u.length,p.length-ee);v.push({withoutSkirts:ve,withSkirts:be})}return{vertices:u,indices:p,segments:v}}_createGrid(a){const n=this._fillGridMeshWithLods(64,oh);this._gridSegments=n.segments,this._gridBuffer=a.createVertexBuffer(n.vertices,jl.members),this._gridIndexBuffer=a.createIndexBuffer(n.indices,!0)}_createPoles(a){const n=new Vn;for(let v=0;v<=64;v++)n.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=a.createIndexBuffer(n,!0);const u=new cs,p=new cs;this._poleSegments=[];for(let v=0,E=0;v<Ep;v++){const M=360/(1<<v);u.emplaceBack(0,-Ul,0,.5,0),p.emplaceBack(0,-Ul,0,.5,1);for(let R=0;R<=64;R++){const Y=R/64,j=zn(0,M,Y),[ee,se,ce]=Sd(Bh,cg,j,Ul);u.emplaceBack(ee,se,ce,Y,0),p.emplaceBack(ee,se,ce,Y,1)}this._poleSegments.push(Hs.simpleSegment(E,0,66,64)),E+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(u,wp,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(p,wp,!1)}getGridBuffers(a,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,n){if(!this._wireframeSegments){const u=new _o,p=64,v=p+1+2,E=1;this._wireframeSegments=[];for(let M=0,R=0;M<oh.length;M++){const Y=oh[M];for(let ee=E;ee<Y+E;ee++)for(let se=E;se<p+E;se++){const ce=ee*v+se;u.emplaceBack(ce,ce+1),u.emplaceBack(ce,ce+v),u.emplaceBack(ce,ce+v+1)}const j=Y*p*3;this._wireframeSegments.push(Hs.simpleSegment(0,R,(Y+1)*v,j)),R+=j}this._wireframeIndexBuffer=a.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},i.GlyphManager=ef,i.ImagePosition=gm,i.KDBush=Qg,i.LivePerformanceUtils=yt,i.LngLat=fs,i.LngLatBounds=ki,i.LocalGlyphMode=Og,i.MAX_MERCATOR_LATITUDE=Ho,i.MercatorCoordinate=Ju,i.ONE_EM=ma,i.OverscaledTileID=Xa,i.PerformanceMarkers=rt,i.Point=at,i.Properties=xt,i.RGBAImage=$a,i.Ray=Cp,i.RequestManager=class{constructor(a,n,u){this._transformRequestFn=a,this._customAccessToken=n,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const a=function(){let n="";for(let u=0;u<10;u++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ot,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,n){return this._transformRequestFn&&this._transformRequestFn(a,n)||{url:a}}normalizeStyleURL(a,n){if(!zt(a))return a;const u=$i(a);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||n)}normalizeGlyphsURL(a,n){if(!zt(a))return a;const u=$i(a);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||n)}normalizeSourceURL(a,n,u,p){if(!zt(a))return a;const v=$i(a);return v.path=`/v4/${v.authority}.json`,v.params.push("secure"),u&&v.params.push(`language=${u}`),p&&v.params.push(`worldview=${p}`),this._makeAPIURL(v,this._customAccessToken||n)}normalizeSpriteURL(a,n,u,p){const v=$i(a);return zt(a)?(v.path=`/styles/v1${v.path}/sprite${n}${u}`,this._makeAPIURL(v,this._customAccessToken||p)):(v.path+=`${n}${u}`,di(v))}normalizeTileURL(a,n,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!zt(a))return a;const p=$i(a);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||u&&"raster"!==p.authority&&512===u?"@2x":""}${Fe.supported?".webp":"$1"}`),"raster"===p.authority?p.path=`/${De.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${De.TILE_URL_VERSION}${p.path}`);const v=this._customAccessToken||function(E){for(const M of E){const R=M.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(p.params)||De.ACCESS_TOKEN;return De.REQUIRE_ACCESS_TOKEN&&v&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,v)}canonicalizeTileURL(a,n){const u=$i(a);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return a;let p="mapbox://";u.path.match(/^\/raster\/v1\//)?p+=`raster/${u.path.replace(`/${De.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${u.path.replace(`/${De.TILE_URL_VERSION}/`,"")}`;let v=u.params;return n&&(v=v.filter(E=>!E.match(/^access_token=/))),v.length&&(p+=`?${v.join("&")}`),p}canonicalizeTileset(a,n){const u=!!n&&zt(n),p=[];for(const v of a.tiles||[])qt(v)?p.push(this.canonicalizeTileURL(v,u)):p.push(v);return p}_makeAPIURL(a,n){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=$i(De.API_URL);if(a.protocol=p.protocol,a.authority=p.authority,"http"===a.protocol){const v=a.params.indexOf("secure");v>=0&&a.params.splice(v,1)}if("/"!==p.path&&(a.path=`${p.path}${a.path}`),!De.REQUIRE_ACCESS_TOKEN)return di(a);if(n=n||De.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if("s"===n[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return a.params=a.params.filter(v=>-1===v.indexOf("access_token")),a.params.push(`access_token=${n||""}`),di(a)}},i.ResourceType=Cs,i.SegmentVector=Hs,i.SourceCache=wh,i.StencilMode=qg,i.StructArrayLayout1ui2=Sa,i.StructArrayLayout2f1f2i16=qn,i.StructArrayLayout2i4=Qi,i.StructArrayLayout2ui4=_o,i.StructArrayLayout3f12=sr,i.StructArrayLayout3ui6=Vn,i.StructArrayLayout4i8=Ri,i.StructArrayLayout5f20=cs,i.Texture=lf,i.Tile=jg,i.Transitionable=Ce,i.Uniform1f=Oh,i.Uniform1i=class extends $c{constructor(a){super(a),this.current=0}set(a,n,u){this.fetchUniformLocation(a,n)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},i.Uniform2f=class extends $c{constructor(a){super(a),this.current=[0,0]}set(a,n,u){this.fetchUniformLocation(a,n)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},i.Uniform3f=class extends $c{constructor(a){super(a),this.current=[0,0,0]}set(a,n,u){this.fetchUniformLocation(a,n)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},i.Uniform4f=mp,i.UniformColor=Mf,i.UniformMatrix2f=class extends $c{constructor(a){super(a),this.current=og}set(a,n,u){if(this.fetchUniformLocation(a,n))for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}},i.UniformMatrix3f=class extends $c{constructor(a){super(a),this.current=sg}set(a,n,u){if(this.fetchUniformLocation(a,n))for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}},i.UniformMatrix4f=class extends $c{constructor(a){super(a),this.current=rg}set(a,n,u){if(this.fetchUniformLocation(a,n)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},i.UnwrappedTileID=Ov,i.ValidationError=gn,i.VectorTileFeature=vt,i.VectorTileWorkerSource=class extends A{constructor(a,n,u,p,v){super(),this.actor=a,this.layerIndex=n,this.availableImages=u,this.loadVectorData=v||P_,this.loading={},this.loaded={},this.deduped=new O_(a.scheduler),this.isSpriteLoaded=p,this.scheduler=a.scheduler}loadTile(a,n){const u=a.uid,p=a&&a.request,v=p&&p.collectResourceTiming,E=this.loading[u]=new L_(a);E.abort=this.loadVectorData(a,(M,R)=>{const Y=!this.loading[u];if(delete this.loading[u],Y||M||!R)return E.status="done",Y||(this.loaded[u]=E),n(M);const j=R.rawData,ee={};R.expires&&(ee.expires=R.expires),R.cacheControl&&(ee.cacheControl=R.cacheControl),E.vectorTile=R.vectorTile||new ye(new mm(j));const se=()=>{E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,(ce,ve)=>{if(ce||!ve)return n(ce);const be={};if(v){const Me=Tt(p);Me.length>0&&(be.resourceTiming=JSON.parse(JSON.stringify(Me)))}n(null,fn({rawTileData:j.slice(0)},ve,ee,be))})};this.isSpriteLoaded?se():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(se,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):se()}),this.loaded=this.loaded||{},this.loaded[u]=E})}reloadTile(a,n){const u=this.loaded,p=a.uid,v=this;if(u&&u[p]){const E=u[p];E.showCollisionBoxes=a.showCollisionBoxes,E.enableTerrain=!!a.enableTerrain,E.projection=a.projection,E.tileTransform=ld(a.tileID.canonical,a.projection);const M=(R,Y)=>{const j=E.reloadCallback;j&&(delete E.reloadCallback,E.parse(E.vectorTile,v.layerIndex,this.availableImages,v.actor,j)),n(R,Y)};"parsing"===E.status?E.reloadCallback=M:"done"===E.status&&(E.vectorTile?E.parse(E.vectorTile,this.layerIndex,this.availableImages,this.actor,M):M())}}abortTile(a,n){const u=a.uid,p=this.loading[u];p&&(p.abort&&p.abort(),delete this.loading[u]),n()}removeTile(a,n){const u=this.loaded,p=a.uid;u&&u[p]&&delete u[p],n()}},i.WritingMode=Zl,i.ZoomDependentExpression=xl,i.add=Jc,i.addDynamicAttributes=km,i.adjoint=function(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],M=n[4],R=n[5],Y=n[6],j=n[7],ee=n[8];return a[0]=M*ee-R*j,a[1]=v*j-p*ee,a[2]=p*R-v*M,a[3]=R*Y-E*ee,a[4]=u*ee-v*Y,a[5]=v*E-u*R,a[6]=E*j-M*Y,a[7]=p*Y-u*j,a[8]=u*M-p*E,a},i.asyncAll=Ji,i.bezier=gi,i.bindAll=Nn,i.boundsAttributes=C_,i.bufferConvexPolygon=function(a,n){const u=[];for(let p=0;p<a.length;p++){const v=Fi(p-1,-1,a.length-1),E=Fi(p+1,-1,a.length-1),M=a[p],R=a[E],Y=a[v].sub(M).unit(),j=R.sub(M).unit(),ee=j.angleWithSep(Y.x,Y.y),se=Y.add(j).unit().mult(-1*n/Math.sin(ee/2));u.push(M.add(se))}return u},i.cacheEntryPossiblyAdded=function(a){Fr++,Fr>Or&&(a.getActor().send("enforceCacheSizeLimit",Lr),Fr=0)},i.calculateGlobeLabelMatrix=function(a,n){const{x:u,y:p}=a.point,v=Fh(u,p,a.worldSize/a._pixelsPerMercatorPixel,0,0);return Ta(v,v,ul(Tl(n)))},i.calculateGlobeMatrix=function(a){const{x:n,y:u}=a.point,{lng:p,lat:v}=a._center;return Fh(n,u,a.worldSize,p,v)},i.calculateGlobeMercatorMatrix=function(a){const n=a.pixelsPerMeter,u=n/vc(1,a.center.lat),p=Sl(new Float64Array(16));return vd(p,p,[a.point.x,a.point.y,0]),Rc(p,p,[u,u,n]),Float32Array.from(p)},i.circumferenceAtLatitude=Nh,i.clamp=vi,i.clearTileCache=function(a){if(!ar())return;const n=V.caches.delete(Pn);a&&n.catch(a).then(()=>a())},i.clipLine=u_,i.clone=function(a){var n=new qo(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},i.clone$1=or,i.collisionCircleLayout=Nv,i.config=De,i.conjugate=function(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=n[3],a},i.create=function(){var a=new qo(16);return qo!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},i.create$1=qc,i.createExpression=ol,i.createLayout=Jt,i.createStyleLayer=function(a){return"custom"===a.type?new Vg(a):new a0[a.type](a)},i.cross=xd,i.degToRad=Vt,i.distance=function(a,n){return Math.hypot(n[0]-a[0],n[1]-a[1],n[2]-a[2])},i.div=function(a,n,u){return a[0]=n[0]/u[0],a[1]=n[1]/u[1],a[2]=n[2]/u[2],a},i.dot=cl,i.earthRadius=Au,i.ease=Gi,i.easeCubicInOut=ni,i.ecefToLatLng=function([a,n,u]){const p=Math.hypot(a,n,u),v=Math.atan2(a,u),E=.5*Math.PI-Math.acos(-n/p);return new fs(dt(v),dt(E))},i.emitValidationErrors=up,i.endsWith=Dn,i.enforceCacheSizeLimit=function(a){kn(),Sr&&Sr.then(n=>{n.keys().then(u=>{for(let p=0;p<u.length-a;p++)n.delete(u[p])})})},i.evaluateSizeForFeature=qh,i.evaluateSizeForZoom=Nd,i.evaluateVariableOffset=h_,i.evented=P,i.exactEquals=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]},i.exactEquals$1=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]},i.exported=c,i.exported$1=Fe,i.extend=fn,i.extend$1=F,i.fillExtrusionHeightLift=Up,i.filterObject=Mr,i.fromMat4=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[4],a[4]=n[5],a[5]=n[6],a[6]=n[8],a[7]=n[9],a[8]=n[10],a},i.fromQuat=function(a,n){var u=n[0],p=n[1],v=n[2],E=n[3],M=u+u,R=p+p,Y=v+v,j=u*M,ee=p*M,se=p*R,ce=v*M,ve=v*R,be=v*Y,Me=E*M,Xe=E*R,ut=E*Y;return a[0]=1-se-be,a[1]=ee+ut,a[2]=ce-Xe,a[3]=0,a[4]=ee-ut,a[5]=1-j-be,a[6]=ve+Me,a[7]=0,a[8]=ce+Xe,a[9]=ve-Me,a[10]=1-j-se,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},i.fromRotation=function(a,n){var u=Math.sin(n),p=Math.cos(n);return a[0]=p,a[1]=u,a[2]=0,a[3]=-u,a[4]=p,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},i.fromScaling=Lf,i.furthestTileCorner=function(a){const n=Math.round((a+45+360)%360/90)%4;return Zt[n]},i.getAABBPointSquareDist=function(a,n,u){let p=0;for(let v=0;v<2;++v){const E=u?u[v]:0;a[v]>E&&(p+=(a[v]-E)*(a[v]-E)),n[v]<E&&(p+=(E-n[v])*(E-n[v]))}return p},i.getAnchorAlignment=_m,i.getAnchorJustification=zg,i.getBounds=function(a){let n=1/0,u=1/0,p=-1/0,v=-1/0;for(const E of a)n=Math.min(n,E.x),u=Math.min(u,E.y),p=Math.max(p,E.x),v=Math.max(v,E.y);return{min:new at(n,u),max:new at(p,v)}},i.getColumn=mn,i.getDefaultExportFromCjs=gt,i.getGridMatrix=function(a,n,u,p){const v=n.getNorth(),E=n.getSouth(),M=n.getWest(),R=n.getEast(),Y=1<<a.z,j=R-M,ee=v-E,se=j/64,ce=-ee/oh[u],ve=[0,se,0,ce,0,0,v,M,0];if(a.z>0){const be=180/p;mc(ve,ve,[be/j+1,0,0,0,be/ee+1,0,-.5*be/se,.5*be/ce,1])}return ve[2]=Y,ve[5]=a.x,ve[8]=a.y,ve},i.getImage=ct,i.getJSON=function(a,n){return mr(fn(a,{type:"json"}),n)},i.getLatitudinalLod=function(a){const n=Ho-5;a=vi(a,-n,n)/n*90;const u=Math.pow(Math.abs(Math.sin(Vt(a))),3);return Math.round(u*(oh.length-1))},i.getMapSessionAPI=fi,i.getPerformanceMeasurement=Tt,i.getProjection=g_,i.getRTLTextPluginStatus=B,i.getReferrer=br,i.getTilePoint=function(a,{x:n,y:u},p=0){return new at(((n-p)*a.scale-a.x)*An,(u*a.scale-a.y)*An)},i.getTileVec3=function(a,n,u=0){return Kc(((n.x-u)*a.scale-a.x)*An,(n.y*a.scale-a.y)*An,Ip(n.z,n.y))},i.getVideo=function(a,n){const u=V.document.createElement("video");u.muted=!0,u.onloadstart=function(){n(null,u)};for(let p=0;p<a.length;p++){const v=V.document.createElement("source");Xr(a[p])||(u.crossOrigin="Anonymous"),v.src=a[p],u.appendChild(v)}return{cancel:()=>{}}},i.globeCenterToScreenPoint=function(a){const n=[0,0,0],u=Sl(new Float64Array(16));return Ta(u,a.pixelMatrix,a.globeMatrix),pr(n,n,u),new at(n[0],n[1])},i.globeDenormalizeECEF=ul,i.globeECEFOrigin=function(a,n){const u=[0,0,0];return pr(u,u,lh(Tl(n.canonical))),pr(u,u,a),u},i.globeMetersToEcef=Cd,i.globeNormalizeECEF=lh,i.globePixelsToTileUnits=function(a,n){return An/(512*Math.pow(2,a))*kd(Tl(n))},i.globePoleMatrixForTile=function(a,n,u){const p=Sl(new Float64Array(16)),v=(n/(1<<a)-.5)*Math.PI*2;return _d(p,u.globeMatrix,v),Float32Array.from(p)},i.globeTileBounds=Tl,i.globeTiltAtLngLat=jf,i.globeToMercatorTransition=tu,i.globeUseCustomAntiAliasing=function(a,n,u){const p=tu(u.zoom),v=a.style.map._antialias,E=!!n.extStandardDerivatives,M=n.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return 0===p&&!v&&!M&&E},i.identity=Sl,i.identity$1=zf,i.invert=th,i.isFullscreen=function(){return!!V.document.fullscreenElement||!!V.document.webkitFullscreenElement},i.isLngLatBehindGlobe=Ap,i.isMapAuthenticated=function(a){return Pi.has(a)},i.isMapboxURL=zt,i.isSafariWithAntialiasingBug=function(a){const n=a.navigator?a.navigator.userAgent:null;return!!tn(a)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.latFromMercatorY=Ko,i.latLngToECEF=Td,i.len=bp,i.length=yd,i.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},i.lngFromMercatorX=kl,i.loadVectorTile=P_,i.makeRequest=mr,i.mapValue=function(a,n,u,p,v){return vi((a-n)/(u-n)*(v-p)+p,p,v)},i.mercatorScale=Uf,i.mercatorXfromLng=gc,i.mercatorYfromLat=zc,i.mercatorZfromAltitude=vc,i.mul=Of,i.mul$1=yp,i.multiply=Ta,i.multiply$1=mc,i.multiply$2=bd,i.nextPowerOfTwo=on,i.normalize=js,i.normalize$1=Bf,i.normalize$2=Rf,i.number=zn,i.ortho=function(a,n,u,p,v,E,M){var R=1/(n-u),Y=1/(p-v),j=1/(E-M);return a[0]=-2*R,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*Y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(n+u)*R,a[13]=(v+p)*Y,a[14]=(M+E)*j,a[15]=1,a},i.pbf=Gv,i.perspective=function(a,n,u,p,v){var E,M=1/Math.tan(n/2);return a[0]=M/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=M,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,null!=v&&v!==1/0?(a[10]=(v+p)*(E=1/(p-v)),a[14]=2*v*p*E):(a[10]=-1,a[14]=-2*p),a},i.pick=function(a,n){const u={};for(let p=0;p<n.length;p++){const v=n[p];v in a&&(u[v]=a[v])}return u},i.plugin=K,i.pointGeometry=ii,i.polesInViewport=function(a){const n=Sl(new Float64Array(16));Ta(n,a.pixelMatrix,a.globeMatrix);const u=[0,$l,0],p=[0,Aa,0];return pr(u,u,n),pr(p,p,n),[u[0]>0&&u[0]<=a.width&&u[1]>0&&u[1]<=a.height&&!Ap(a,new fs(a.center.lat,90)),p[0]>0&&p[0]<=a.width&&p[1]>0&&p[1]<=a.height&&!Ap(a,new fs(a.center.lat,-90))]},i.polygonContainsPoint=Qu,i.polygonIntersectsBox=uh,i.polygonIntersectsPolygon=lo,i.polygonizeBounds=function(a,n,u=0,p=!0){const v=new at(u,u),E=a.sub(v),M=n.add(v),R=[E,new at(M.x,E.y),M,new at(E.x,M.y)];return p&&R.push(E.clone()),R},i.posAttributes=jl,i.postMapLoadEvent=He,i.postPerformanceEvent=Yt,i.postTurnstileEvent=Ze,i.potpack=Kp,i.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},i.radToDeg=dt,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.registerForPluginStateChange=function(a){return a({pluginStatus:w,pluginURL:d}),P.on("pluginStateChange",a),a},i.removeAuthState=function(a){Pi.delete(a)},i.renderColorRamp=Wh,i.resample=Wf,i.rotateX=ih,i.rotateX$1=Ff,i.rotateY=_d,i.rotateY$1=wd,i.rotateZ=function(a,n,u){var p=Math.sin(u),v=Math.cos(u),E=n[0],M=n[1],R=n[2],Y=n[3],j=n[4],ee=n[5],se=n[6],ce=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=E*v+j*p,a[1]=M*v+ee*p,a[2]=R*v+se*p,a[3]=Y*v+ce*p,a[4]=j*v-E*p,a[5]=ee*v-M*p,a[6]=se*v-R*p,a[7]=ce*v-Y*p,a},i.rotateZ$1=function(a,n,u){u*=.5;var p=n[0],v=n[1],E=n[2],M=n[3],R=Math.sin(u),Y=Math.cos(u);return a[0]=p*Y+v*R,a[1]=v*Y-p*R,a[2]=E*Y+M*R,a[3]=M*Y-E*R,a},i.scale=Rc,i.scale$1=xp,i.scale$2=ll,i.scaleAndAdd=Qc,i.set=function(a,n,u,p){return a[0]=n,a[1]=u,a[2]=p,a},i.setCacheLimits=function(a,n){Lr=a,Or=n},i.setColumn=function(a,n,u){a[4*n+0]=u[0],a[4*n+1]=u[1],a[4*n+2]=u[2],a[4*n+3]=u[3]},i.setRTLTextPlugin=function(a,n,u=!1){if(w===fd||w===Kd||w===Jd)throw new Error("setRTLTextPlugin cannot be called multiple times.");d=c.resolveURL(a),w=fd,xu=n,T(),u||X()},i.smoothstep=Ei,i.spec=I,i.squaredLength=function(a){var n=a[0],u=a[1],p=a[2];return n*n+u*u+p*p},i.storeAuthState=function(a,n){n?Pi.add(a):Pi.delete(a)},i.sub=Yo,i.subtract=nh,i.symbolSize=Iy,i.tileAABB=function(a,n,u,p,v,E,M,R,Y){if("globe"===Y.name)return function Gf(a,n,u){const p=n/a.worldSize,v=a.globeMatrix;if(u.z<=1){const hi=Tl(u).getCorners();return kp(hi,v,p),Zs.fromPoints(hi)}const E=Ed(u),M=ah(E);kp(M,v,p);const R=Number.MAX_VALUE,Y=[-R,-R,-R],j=[R,R,R];if(E.contains(a.center)){for(const nn of M)Mo(j,j,nn),Su(Y,Y,nn);Y[2]=0;const hi=a.point,Oi=[hi.x*p,hi.y*p,0];return Mo(j,j,Oi),Su(Y,Y,Oi),new Zs(j,Y)}const ee=[v[12]*p,v[13]*p,v[14]*p],se=E.getCenter(),ce=vi(a.center.lat,-Ho,Ho),ve=vi(se.lat,-Ho,Ho),be=gc(a.center.lng),Me=zc(ce);let Xe=be-gc(se.lng);const ut=Me-zc(ve);Xe>.5?Xe-=1:Xe<-.5&&(Xe+=1);let Lt=0;Math.abs(Xe)>Math.abs(ut)?Lt=Xe>=0?1:3:(Lt=ut>=0?0:2,Qc(ee,ee,[v[4]*p,v[5]*p,v[6]*p],-Math.sin(Vt(ut>=0?E.getSouth():E.getNorth()))*Ul));const ht=M[Lt],At=M[(Lt+1)%4],Nt=new Ku(ht,At,ee),Bt=[Tp(Nt,0)||ht[0],Tp(Nt,1)||ht[1],Tp(Nt,2)||ht[2]],bi=tu(a.zoom);if(bi>0){const hi=function({x:nn,y:Ci,z:Ni},Hi,Ki,an,Li){const yn=1/(1<<Ni);let On=nn*yn,Cn=On+yn,wr=Ci*yn,ln=wr+yn,Xn=0;const Cr=(On+Cn)/2-an;return Cr>.5?Xn=-1:Cr<-.5&&(Xn=1),On=((On+Xn)*Hi-(an*=Hi))*Ki+an,Cn=((Cn+Xn)*Hi-an)*Ki+an,wr=(wr*Hi-(Li*=Hi))*Ki+Li,ln=(ln*Hi-Li)*Ki+Li,[[On,ln,0],[Cn,ln,0],[Cn,wr,0],[On,wr,0]]}(u,n,a._pixelsPerMercatorPixel,be,Me);for(let nn=0;nn<M.length;nn++)ku(M[nn],hi[nn],bi);const Oi=Jc([],hi[Lt],hi[(Lt+1)%4]);ll(Oi,Oi,.5),ku(Bt,Oi,bi)}for(const hi of M)Mo(j,j,hi),Su(Y,Y,hi);return j[2]=Math.min(ht[2],At[2]),Mo(j,j,Bt),Su(Y,Y,Bt),new Zs(j,Y)}(a,n,new cm(u,p,v));const j=ld({z:u,x:p,y:v},Y);return new Zs([(E+j.x/j.scale)*n,n*(j.y/j.scale),M],[(E+j.x2/j.scale)*n,n*(j.y2/j.scale),R])},i.tileCornersToBounds=Ed,i.tileTransform=ld,i.transformMat3=function(a,n,u){var p=n[0],v=n[1],E=n[2];return a[0]=p*u[0]+v*u[3]+E*u[6],a[1]=p*u[1]+v*u[4]+E*u[7],a[2]=p*u[2]+v*u[5]+E*u[8],a},i.transformMat4=pr,i.transformMat4$1=Tu,i.transformQuat=Pf,i.transitionTileAABBinECEF=Vf,i.translate=vd,i.transpose=function(a,n){if(a===n){var u=n[1],p=n[2],v=n[5];a[1]=n[3],a[2]=n[6],a[3]=u,a[5]=n[7],a[6]=p,a[7]=v}else a[0]=n[0],a[1]=n[3],a[2]=n[6],a[3]=n[1],a[4]=n[4],a[5]=n[7],a[6]=n[2],a[7]=n[5],a[8]=n[8];return a},i.triggerPluginCompletionEvent=g,i.uniqueId=Qt,i.updateGlobeVertexNormal=function(a,n,u,p,v){const E=5*n+2;a.float32[E+0]=u,a.float32[E+1]=p,a.float32[E+2]=v},i.validateCustomStyleLayer=function(a){const n=[],u=a.id;return void 0===u&&n.push({message:`layers.${u}: missing required property "id"`}),void 0===a.render&&n.push({message:`layers.${u}: missing required method "render"`}),a.renderingMode&&"2d"!==a.renderingMode&&"3d"!==a.renderingMode&&n.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),n},i.validateFilter=a=>Ea(Lc(a)),i.validateFog=a=>Ea(zr(a)),i.validateLayer=a=>Ea(J(a)),i.validateLight=a=>Ea(Ln(a)),i.validateSource=a=>Ea(Ft(a)),i.validateStyle=Zd,i.validateTerrain=a=>Ea(Rr(a)),i.values=bn,i.vectorTile=dl,i.version=Oe,i.warnOnce=xn,i.window=V,i.wrap=Fi}),hn(0,function(i){function V(Ct){if("number"==typeof Ct||"boolean"==typeof Ct||"string"==typeof Ct||null==Ct)return JSON.stringify(Ct);if(Array.isArray(Ct)){let Be="[";for(const ct of Ct)Be+=`${V(ct)},`;return`${Be}]`}let Ie="{";for(const Be of Object.keys(Ct).sort())Ie+=`${Be}:${V(Ct[Be])},`;return`${Ie}}`}function Oe(Ct){let Ie="";for(const Be of i.refProperties)Ie+=`/${V(Ct[Be])}`;return Ie}class Ae{constructor(Ie){this.keyCache={},Ie&&this.replace(Ie)}replace(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])}update(Ie,Be){for(const lt of Ie)this._layerConfigs[lt.id]=lt,(this._layers[lt.id]=i.createStyleLayer(lt)).compileFilter(),this.keyCache[lt.id]&&delete this.keyCache[lt.id];for(const lt of Be)delete this.keyCache[lt],delete this._layerConfigs[lt],delete this._layers[lt];this.familiesBySource={};const ct=function(lt,zt){const qt={};for(let pt=0;pt<lt.length;pt++){const ui=zt&&zt[lt[pt].id]||Oe(lt[pt]);zt&&(zt[lt[pt].id]=ui);let Vi=qt[ui];Vi||(Vi=qt[ui]=[]),Vi.push(lt[pt])}const Kt=[];for(const pt in qt)Kt.push(qt[pt]);return Kt}(i.values(this._layerConfigs),this.keyCache);for(const lt of ct){const zt=lt.map($i=>this._layers[$i.id]),qt=zt[0];if("none"===qt.visibility)continue;const Kt=qt.source||"";let pt=this.familiesBySource[Kt];pt||(pt=this.familiesBySource[Kt]={});const ui=qt.sourceLayer||"_geojsonTileLayer";let Vi=pt[ui];Vi||(Vi=pt[ui]=[]),Vi.push(zt)}}}class De{loadTile(Ie,Be){const{uid:ct,encoding:lt,rawImageData:zt,padding:qt,buildQuadTree:Kt}=Ie,pt=i.window.ImageBitmap&&zt instanceof i.window.ImageBitmap?this.getImageData(zt,qt):zt;Be(null,new i.DEMData(ct,pt,lt,qt<1,Kt))}getImageData(Ie,Be){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);const ct=this.offscreenCanvasContext.getImageData(-Be,-Be,Ie.width+2*Be,Ie.height+2*Be);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ct}}function Fe(Ct,Ie){if(0!==Ct.length){Ue(Ct[0],Ie);for(var Be=1;Be<Ct.length;Be++)Ue(Ct[Be],!Ie)}}function Ue(Ct,Ie){for(var Be=0,ct=0,lt=0,zt=Ct.length,qt=zt-1;lt<zt;qt=lt++){var Kt=(Ct[lt][0]-Ct[qt][0])*(Ct[qt][1]+Ct[lt][1]),pt=Be+Kt;ct+=Math.abs(Be)>=Math.abs(Kt)?Be-pt+Kt:Kt-pt+Be,Be=pt}Be+ct>=0!=!!Ie&&Ct.reverse()}var Je=i.getDefaultExportFromCjs(function Ct(Ie,Be){var ct,lt=Ie&&Ie.type;if("FeatureCollection"===lt)for(ct=0;ct<Ie.features.length;ct++)Ct(Ie.features[ct],Be);else if("GeometryCollection"===lt)for(ct=0;ct<Ie.geometries.length;ct++)Ct(Ie.geometries[ct],Be);else if("Feature"===lt)Ct(Ie.geometry,Be);else if("Polygon"===lt)Fe(Ie.coordinates,Be);else if("MultiPolygon"===lt)for(ct=0;ct<Ie.coordinates.length;ct++)Fe(Ie.coordinates[ct],Be);return Ie});const nt=i.VectorTileFeature.prototype.toGeoJSON;var mt={exports:{}},Pt=i.pointGeometry,ot=i.vectorTile.VectorTileFeature,gt=wt;function wt(Ct,Ie){this.options=Ie||{},this.features=Ct,this.length=Ct.length}function si(Ct,Ie){this.id="number"==typeof Ct.id?Ct.id:void 0,this.type=Ct.type,this.rawGeometry=1===Ct.type?[Ct.geometry]:Ct.geometry,this.properties=Ct.tags,this.extent=Ie||4096}wt.prototype.feature=function(Ct){return new si(this.features[Ct],this.options.extent)},si.prototype.loadGeometry=function(){var Ct=this.rawGeometry;this.geometry=[];for(var Ie=0;Ie<Ct.length;Ie++){for(var Be=Ct[Ie],ct=[],lt=0;lt<Be.length;lt++)ct.push(new Pt(Be[lt][0],Be[lt][1]));this.geometry.push(ct)}return this.geometry},si.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ct=this.geometry,Ie=1/0,Be=-1/0,ct=1/0,lt=-1/0,zt=0;zt<Ct.length;zt++)for(var qt=Ct[zt],Kt=0;Kt<qt.length;Kt++){var pt=qt[Kt];Ie=Math.min(Ie,pt.x),Be=Math.max(Be,pt.x),ct=Math.min(ct,pt.y),lt=Math.max(lt,pt.y)}return[Ie,ct,Be,lt]},si.prototype.toGeoJSON=ot.prototype.toGeoJSON;var $e=i.pbf,ii=gt;function oi(Ct){var Ie=new $e;return function(Be,ct){for(var lt in Be.layers)ct.writeMessage(3,at,Be.layers[lt])}(Ct,Ie),Ie.finish()}function at(Ct,Ie){var Be;Ie.writeVarintField(15,Ct.version||1),Ie.writeStringField(1,Ct.name||""),Ie.writeVarintField(5,Ct.extent||4096);var ct={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Ct.length;Be++)ct.feature=Ct.feature(Be),Ie.writeMessage(2,ri,ct);var lt=ct.keys;for(Be=0;Be<lt.length;Be++)Ie.writeStringField(3,lt[Be]);var zt=ct.values;for(Be=0;Be<zt.length;Be++)Ie.writeMessage(4,ni,zt[Be])}function ri(Ct,Ie){var Be=Ct.feature;void 0!==Be.id&&Ie.writeVarintField(1,Be.id),Ie.writeMessage(2,Xt,Ct),Ie.writeVarintField(3,Be.type),Ie.writeMessage(4,Zt,Be)}function Xt(Ct,Ie){var Be=Ct.feature,ct=Ct.keys,lt=Ct.values,zt=Ct.keycache,qt=Ct.valuecache;for(var Kt in Be.properties){var pt=Be.properties[Kt],ui=zt[Kt];if(null!==pt){void 0===ui&&(ct.push(Kt),zt[Kt]=ui=ct.length-1),Ie.writeVarint(ui);var Vi=typeof pt;"string"!==Vi&&"boolean"!==Vi&&"number"!==Vi&&(pt=JSON.stringify(pt));var $i=Vi+":"+pt,di=qt[$i];void 0===di&&(lt.push(pt),qt[$i]=di=lt.length-1),Ie.writeVarint(di)}}}function Vt(Ct,Ie){return(Ie<<3)+(7&Ct)}function dt(Ct){return Ct<<1^Ct>>31}function Zt(Ct,Ie){for(var Be=Ct.loadGeometry(),ct=Ct.type,lt=0,zt=0,qt=Be.length,Kt=0;Kt<qt;Kt++){var pt=Be[Kt],ui=1;1===ct&&(ui=pt.length),Ie.writeVarint(Vt(1,ui));for(var Vi=3===ct?pt.length-1:pt.length,$i=0;$i<Vi;$i++){1===$i&&1!==ct&&Ie.writeVarint(Vt(2,Vi-1));var di=pt[$i].x-lt,un=pt[$i].y-zt;Ie.writeVarint(dt(di)),Ie.writeVarint(dt(un)),lt+=di,zt+=un}3===ct&&Ie.writeVarint(Vt(7,1))}}function ni(Ct,Ie){var Be=typeof Ct;"string"===Be?Ie.writeStringField(1,Ct):"boolean"===Be?Ie.writeBooleanField(7,Ct):"number"===Be&&(Ct%1!=0?Ie.writeDoubleField(3,Ct):Ct<0?Ie.writeSVarintField(6,Ct):Ie.writeVarintField(5,Ct))}mt.exports=oi,mt.exports.fromVectorTileJs=oi,mt.exports.fromGeojsonVt=function(Ct,Ie){Ie=Ie||{};var Be={};for(var ct in Ct)Be[ct]=new ii(Ct[ct].features,Ie),Be[ct].name=ct,Be[ct].version=Ie.version,Be[ct].extent=Ie.extent;return oi({layers:Be})},mt.exports.GeoJSONWrapper=ii;var gi=i.getDefaultExportFromCjs(mt.exports);const Gi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ct=>Ct},vi=Math.fround||(Ei=new Float32Array(1),Ct=>(Ei[0]=+Ct,Ei[0]));var Ei;const Fi=3,Ji=5,bn=6;class fn{constructor(Ie){this.options=Object.assign(Object.create(Gi),Ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ie){const{log:Be,minZoom:ct,maxZoom:lt}=this.options;Be&&console.time("total time");const zt=`prepare ${Ie.length} points`;Be&&console.time(zt),this.points=Ie;const qt=[];for(let pt=0;pt<Ie.length;pt++){const ui=Ie[pt];if(!ui.geometry)continue;const[Vi,$i]=ui.geometry.coordinates,di=vi(Yi(Vi)),un=vi(on($i));qt.push(di,un,1/0,pt,-1,1),this.options.reduce&&qt.push(0)}let Kt=this.trees[lt+1]=this._createTree(qt);Be&&console.timeEnd(zt);for(let pt=lt;pt>=ct;pt--){const ui=+Date.now();Kt=this.trees[pt]=this._createTree(this._cluster(Kt,pt)),Be&&console.log("z%d: %d clusters in %dms",pt,Kt.numItems,+Date.now()-ui)}return Be&&console.timeEnd("total time"),this}getClusters(Ie,Be){let ct=((Ie[0]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,Ie[1]));let zt=180===Ie[2]?180:((Ie[2]+180)%360+360)%360-180;const qt=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)ct=-180,zt=180;else if(ct>zt){const $i=this.getClusters([ct,lt,180,qt],Be),di=this.getClusters([-180,lt,zt,qt],Be);return $i.concat(di)}const Kt=this.trees[this._limitZoom(Be)],pt=Kt.range(Yi(ct),on(qt),Yi(zt),on(lt)),ui=Kt.data,Vi=[];for(const $i of pt){const di=this.stride*$i;Vi.push(ui[di+Ji]>1?Gn(ui,di,this.clusterProps):this.points[ui[di+Fi]])}return Vi}getChildren(Ie){const Be=this._getOriginId(Ie),ct=this._getOriginZoom(Ie),lt="No cluster with the specified id.",zt=this.trees[ct];if(!zt)throw new Error(lt);const qt=zt.data;if(Be*this.stride>=qt.length)throw new Error(lt);const Kt=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),pt=zt.within(qt[Be*this.stride],qt[Be*this.stride+1],Kt),ui=[];for(const Vi of pt){const $i=Vi*this.stride;qt[$i+4]===Ie&&ui.push(qt[$i+Ji]>1?Gn(qt,$i,this.clusterProps):this.points[qt[$i+Fi]])}if(0===ui.length)throw new Error(lt);return ui}getLeaves(Ie,Be,ct){const lt=[];return this._appendLeaves(lt,Ie,Be=Be||10,ct=ct||0,0),lt}getTile(Ie,Be,ct){const lt=this.trees[this._limitZoom(Ie)],zt=Math.pow(2,Ie),{extent:qt,radius:Kt}=this.options,pt=Kt/qt,ui=(ct-pt)/zt,Vi=(ct+1+pt)/zt,$i={features:[]};return this._addTileFeatures(lt.range((Be-pt)/zt,ui,(Be+1+pt)/zt,Vi),lt.data,Be,ct,zt,$i),0===Be&&this._addTileFeatures(lt.range(1-pt/zt,ui,1,Vi),lt.data,zt,ct,zt,$i),Be===zt-1&&this._addTileFeatures(lt.range(0,ui,pt/zt,Vi),lt.data,-1,ct,zt,$i),$i.features.length?$i:null}getClusterExpansionZoom(Ie){let Be=this._getOriginZoom(Ie)-1;for(;Be<=this.options.maxZoom;){const ct=this.getChildren(Ie);if(Be++,1!==ct.length)break;Ie=ct[0].properties.cluster_id}return Be}_appendLeaves(Ie,Be,ct,lt,zt){const qt=this.getChildren(Be);for(const Kt of qt){const pt=Kt.properties;if(pt&&pt.cluster?zt+pt.point_count<=lt?zt+=pt.point_count:zt=this._appendLeaves(Ie,pt.cluster_id,ct,lt,zt):zt<lt?zt++:Ie.push(Kt),Ie.length===ct)break}return zt}_createTree(Ie){const Be=new i.KDBush(Ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ct=0;ct<Ie.length;ct+=this.stride)Be.add(Ie[ct],Ie[ct+1]);return Be.finish(),Be.data=Ie,Be}_addTileFeatures(Ie,Be,ct,lt,zt,qt){for(const Kt of Ie){const pt=Kt*this.stride,ui=Be[pt+Ji]>1;let Vi,$i,di;if(ui)Vi=Qt(Be,pt,this.clusterProps),$i=Be[pt],di=Be[pt+1];else{const St=this.points[Be[pt+Fi]];Vi=St.properties;const[Ke,Ze]=St.geometry.coordinates;$i=Yi(Ke),di=on(Ze)}const un={type:1,geometry:[[Math.round(this.options.extent*($i*zt-ct)),Math.round(this.options.extent*(di*zt-lt))]],tags:Vi};let Et;Et=ui||this.options.generateId?Be[pt+Fi]:this.points[Be[pt+Fi]].id,void 0!==Et&&(un.id=Et),qt.features.push(un)}}_limitZoom(Ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ie),this.options.maxZoom+1))}_cluster(Ie,Be){const{radius:ct,extent:lt,reduce:zt,minPoints:qt}=this.options,Kt=ct/(lt*Math.pow(2,Be)),pt=Ie.data,ui=[],Vi=this.stride;for(let $i=0;$i<pt.length;$i+=Vi){if(pt[$i+2]<=Be)continue;pt[$i+2]=Be;const di=pt[$i],un=pt[$i+1],Et=Ie.within(pt[$i],pt[$i+1],Kt),St=pt[$i+Ji];let Ke=St;for(const Ze of Et){const Re=Ze*Vi;pt[Re+2]>Be&&(Ke+=pt[Re+Ji])}if(Ke>St&&Ke>=qt){let Ze,Re=di*St,He=un*St,ft=-1;const Yt=(($i/Vi|0)<<5)+(Be+1)+this.points.length;for(const xi of Et){const fi=xi*Vi;if(pt[fi+2]<=Be)continue;pt[fi+2]=Be;const Pi=pt[fi+Ji];Re+=pt[fi]*Pi,He+=pt[fi+1]*Pi,pt[fi+4]=Yt,zt&&(Ze||(Ze=this._map(pt,$i,!0),ft=this.clusterProps.length,this.clusterProps.push(Ze)),zt(Ze,this._map(pt,fi)))}pt[$i+4]=Yt,ui.push(Re/Ke,He/Ke,1/0,Yt,-1,Ke),zt&&ui.push(ft)}else{for(let Ze=0;Ze<Vi;Ze++)ui.push(pt[$i+Ze]);if(Ke>1)for(const Ze of Et){const Re=Ze*Vi;if(!(pt[Re+2]<=Be)){pt[Re+2]=Be;for(let He=0;He<Vi;He++)ui.push(pt[Re+He])}}}}return ui}_getOriginId(Ie){return Ie-this.points.length>>5}_getOriginZoom(Ie){return(Ie-this.points.length)%32}_map(Ie,Be,ct){if(Ie[Be+Ji]>1){const qt=this.clusterProps[Ie[Be+bn]];return ct?Object.assign({},qt):qt}const lt=this.points[Ie[Be+Fi]].properties,zt=this.options.map(lt);return ct&&zt===lt?Object.assign({},zt):zt}}function Gn(Ct,Ie,Be){return{type:"Feature",id:Ct[Ie+Fi],properties:Qt(Ct,Ie,Be),geometry:{type:"Point",coordinates:[(ct=Ct[Ie],360*(ct-.5)),Zn(Ct[Ie+1])]}};var ct}function Qt(Ct,Ie,Be){const ct=Ct[Ie+Ji],lt=ct>=1e4?`${Math.round(ct/1e3)}k`:ct>=1e3?Math.round(ct/100)/10+"k":ct,zt=Ct[Ie+bn],qt=-1===zt?{}:Object.assign({},Be[zt]);return Object.assign(qt,{cluster:!0,cluster_id:Ct[Ie+Fi],point_count:ct,point_count_abbreviated:lt})}function Yi(Ct){return Ct/360+.5}function on(Ct){const Ie=Math.sin(Ct*Math.PI/180),Be=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Be<0?0:Be>1?1:Be}function Zn(Ct){const Ie=(180-360*Ct)*Math.PI/180;return 360*Math.atan(Math.exp(Ie))/Math.PI-90}function Nn(Ct,Ie,Be,ct){for(var lt,zt=ct,qt=Be-Ie>>1,Kt=Be-Ie,pt=Ct[Ie],ui=Ct[Ie+1],Vi=Ct[Be],$i=Ct[Be+1],di=Ie+3;di<Be;di+=3){var un=Dn(Ct[di],Ct[di+1],pt,ui,Vi,$i);if(un>zt)lt=di,zt=un;else if(un===zt){var Et=Math.abs(di-qt);Et<Kt&&(lt=di,Kt=Et)}}zt>ct&&(lt-Ie>3&&Nn(Ct,Ie,lt,ct),Ct[lt+2]=zt,Be-lt>3&&Nn(Ct,lt,Be,ct))}function Dn(Ct,Ie,Be,ct,lt,zt){var qt=lt-Be,Kt=zt-ct;if(0!==qt||0!==Kt){var pt=((Ct-Be)*qt+(Ie-ct)*Kt)/(qt*qt+Kt*Kt);pt>1?(Be=lt,ct=zt):pt>0&&(Be+=qt*pt,ct+=Kt*pt)}return(qt=Ct-Be)*qt+(Kt=Ie-ct)*Kt}function ji(Ct,Ie,Be,ct){var lt={id:void 0===Ct?null:Ct,type:Ie,geometry:Be,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(zt){var qt=zt.geometry,Kt=zt.type;if("Point"===Kt||"MultiPoint"===Kt||"LineString"===Kt)Mr(zt,qt);else if("Polygon"===Kt||"MultiLineString"===Kt)for(var pt=0;pt<qt.length;pt++)Mr(zt,qt[pt]);else if("MultiPolygon"===Kt)for(pt=0;pt<qt.length;pt++)for(var ui=0;ui<qt[pt].length;ui++)Mr(zt,qt[pt][ui])}(lt),lt}function Mr(Ct,Ie){for(var Be=0;Be<Ie.length;Be+=3)Ct.minX=Math.min(Ct.minX,Ie[Be]),Ct.minY=Math.min(Ct.minY,Ie[Be+1]),Ct.maxX=Math.max(Ct.maxX,Ie[Be]),Ct.maxY=Math.max(Ct.maxY,Ie[Be+1])}function or(Ct,Ie,Be,ct){if(Ie.geometry){var lt=Ie.geometry.coordinates,zt=Ie.geometry.type,qt=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Kt=[],pt=Ie.id;if(Be.promoteId?pt=Ie.properties[Be.promoteId]:Be.generateId&&(pt=ct||0),"Point"===zt)gr(lt,Kt);else if("MultiPoint"===zt)for(var ui=0;ui<lt.length;ui++)gr(lt[ui],Kt);else if("LineString"===zt)xn(lt,Kt,qt,!1);else if("MultiLineString"===zt){if(Be.lineMetrics){for(ui=0;ui<lt.length;ui++)xn(lt[ui],Kt=[],qt,!1),Ct.push(ji(pt,"LineString",Kt,Ie.properties));return}en(lt,Kt,qt,!1)}else if("Polygon"===zt)en(lt,Kt,qt,!0);else{if("MultiPolygon"!==zt){if("GeometryCollection"===zt){for(ui=0;ui<Ie.geometry.geometries.length;ui++)or(Ct,{id:pt,geometry:Ie.geometry.geometries[ui],properties:Ie.properties},Be,ct);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ui=0;ui<lt.length;ui++){var Vi=[];en(lt[ui],Vi,qt,!0),Kt.push(Vi)}}Ct.push(ji(pt,zt,Kt,Ie.properties))}}function gr(Ct,Ie){Ie.push(_n(Ct[0])),Ie.push(Zi(Ct[1])),Ie.push(0)}function xn(Ct,Ie,Be,ct){for(var lt,zt,qt=0,Kt=0;Kt<Ct.length;Kt++){var pt=_n(Ct[Kt][0]),ui=Zi(Ct[Kt][1]);Ie.push(pt),Ie.push(ui),Ie.push(0),Kt>0&&(qt+=ct?(lt*ui-pt*zt)/2:Math.sqrt(Math.pow(pt-lt,2)+Math.pow(ui-zt,2))),lt=pt,zt=ui}var Vi=Ie.length-3;Ie[2]=1,Nn(Ie,0,Vi,Be),Ie[Vi+2]=1,Ie.size=Math.abs(qt),Ie.start=0,Ie.end=Ie.size}function en(Ct,Ie,Be,ct){for(var lt=0;lt<Ct.length;lt++){var zt=[];xn(Ct[lt],zt,Be,ct),Ie.push(zt)}}function _n(Ct){return Ct/360+.5}function Zi(Ct){var Ie=Math.sin(Ct*Math.PI/180),Be=.5-.25*Math.log((1+Ie)/(1-Ie))/Math.PI;return Be<0?0:Be>1?1:Be}function Ui(Ct,Ie,Be,ct,lt,zt,qt,Kt){if(ct/=Ie,zt>=(Be/=Ie)&&qt<ct)return Ct;if(qt<Be||zt>=ct)return null;for(var pt=[],ui=0;ui<Ct.length;ui++){var Vi=Ct[ui],$i=Vi.geometry,di=Vi.type,un=0===lt?Vi.minX:Vi.minY,Et=0===lt?Vi.maxX:Vi.maxY;if(un>=Be&&Et<ct)pt.push(Vi);else if(!(Et<Be||un>=ct)){var St=[];if("Point"===di||"MultiPoint"===di)jn($i,St,Be,ct,lt);else if("LineString"===di)tn($i,St,Be,ct,lt,!1,Kt.lineMetrics);else if("MultiLineString"===di)mn($i,St,Be,ct,lt,!1);else if("Polygon"===di)mn($i,St,Be,ct,lt,!0);else if("MultiPolygon"===di)for(var Ke=0;Ke<$i.length;Ke++){var Ze=[];mn($i[Ke],Ze,Be,ct,lt,!0),Ze.length&&St.push(Ze)}if(St.length){if(Kt.lineMetrics&&"LineString"===di){for(Ke=0;Ke<St.length;Ke++)pt.push(ji(Vi.id,di,St[Ke],Vi.tags));continue}"LineString"!==di&&"MultiLineString"!==di||(1===St.length?(di="LineString",St=St[0]):di="MultiLineString"),"Point"!==di&&"MultiPoint"!==di||(di=3===St.length?"Point":"MultiPoint"),pt.push(ji(Vi.id,di,St,Vi.tags))}}}return pt.length?pt:null}function jn(Ct,Ie,Be,ct,lt){for(var zt=0;zt<Ct.length;zt+=3){var qt=Ct[zt+lt];qt>=Be&&qt<=ct&&(Ie.push(Ct[zt]),Ie.push(Ct[zt+1]),Ie.push(Ct[zt+2]))}}function tn(Ct,Ie,Be,ct,lt,zt,qt){for(var Kt,pt,ui=Si(Ct),Vi=0===lt?Lr:Or,$i=Ct.start,di=0;di<Ct.length-3;di+=3){var un=Ct[di],Et=Ct[di+1],St=Ct[di+2],Ke=Ct[di+3],Ze=Ct[di+4],Re=0===lt?un:Et,He=0===lt?Ke:Ze,ft=!1;qt&&(Kt=Math.sqrt(Math.pow(un-Ke,2)+Math.pow(Et-Ze,2))),Re<Be?He>Be&&(pt=Vi(ui,un,Et,Ke,Ze,Be),qt&&(ui.start=$i+Kt*pt)):Re>ct?He<ct&&(pt=Vi(ui,un,Et,Ke,Ze,ct),qt&&(ui.start=$i+Kt*pt)):Pn(ui,un,Et,St),He<Be&&Re>=Be&&(pt=Vi(ui,un,Et,Ke,Ze,Be),ft=!0),He>ct&&Re<=ct&&(pt=Vi(ui,un,Et,Ke,Ze,ct),ft=!0),!zt&&ft&&(qt&&(ui.end=$i+Kt*pt),Ie.push(ui),ui=Si(Ct)),qt&&($i+=Kt)}var Yt=Ct.length-3;un=Ct[Yt],Et=Ct[Yt+1],St=Ct[Yt+2],(Re=0===lt?un:Et)>=Be&&Re<=ct&&Pn(ui,un,Et,St),Yt=ui.length-3,zt&&Yt>=3&&(ui[Yt]!==ui[0]||ui[Yt+1]!==ui[1])&&Pn(ui,ui[0],ui[1],ui[2]),ui.length&&Ie.push(ui)}function Si(Ct){var Ie=[];return Ie.size=Ct.size,Ie.start=Ct.start,Ie.end=Ct.end,Ie}function mn(Ct,Ie,Be,ct,lt,zt){for(var qt=0;qt<Ct.length;qt++)tn(Ct[qt],Ie,Be,ct,lt,zt,!1)}function Pn(Ct,Ie,Be,ct){Ct.push(Ie),Ct.push(Be),Ct.push(ct)}function Lr(Ct,Ie,Be,ct,lt,zt){var qt=(zt-Ie)/(ct-Ie);return Ct.push(zt),Ct.push(Be+(lt-Be)*qt),Ct.push(1),qt}function Or(Ct,Ie,Be,ct,lt,zt){var qt=(zt-Be)/(lt-Be);return Ct.push(Ie+(ct-Ie)*qt),Ct.push(zt),Ct.push(1),qt}function Sr(Ct,Ie){for(var Be=[],ct=0;ct<Ct.length;ct++){var lt,zt=Ct[ct],qt=zt.type;if("Point"===qt||"MultiPoint"===qt||"LineString"===qt)lt=vr(zt.geometry,Ie);else if("MultiLineString"===qt||"Polygon"===qt){lt=[];for(var Kt=0;Kt<zt.geometry.length;Kt++)lt.push(vr(zt.geometry[Kt],Ie))}else if("MultiPolygon"===qt)for(lt=[],Kt=0;Kt<zt.geometry.length;Kt++){for(var pt=[],ui=0;ui<zt.geometry[Kt].length;ui++)pt.push(vr(zt.geometry[Kt][ui],Ie));lt.push(pt)}Be.push(ji(zt.id,qt,lt,zt.tags))}return Be}function vr(Ct,Ie){var Be=[];Be.size=Ct.size,void 0!==Ct.start&&(Be.start=Ct.start,Be.end=Ct.end);for(var ct=0;ct<Ct.length;ct+=3)Be.push(Ct[ct]+Ie,Ct[ct+1],Ct[ct+2]);return Be}function ar(Ct,Ie){if(Ct.transformed)return Ct;var Be,ct,lt,zt=1<<Ct.z,qt=Ct.x,Kt=Ct.y;for(Be=0;Be<Ct.features.length;Be++){var pt=Ct.features[Be],ui=pt.geometry,Vi=pt.type;if(pt.geometry=[],1===Vi)for(ct=0;ct<ui.length;ct+=2)pt.geometry.push(kn(ui[ct],ui[ct+1],Ie,zt,qt,Kt));else for(ct=0;ct<ui.length;ct++){var $i=[];for(lt=0;lt<ui[ct].length;lt+=2)$i.push(kn(ui[ct][lt],ui[ct][lt+1],Ie,zt,qt,Kt));pt.geometry.push($i)}}return Ct.transformed=!0,Ct}function kn(Ct,Ie,Be,ct,lt,zt){return[Math.round(Be*(Ct*ct-lt)),Math.round(Be*(Ie*ct-zt))]}function dr(Ct,Ie,Be,ct,lt){for(var zt=Ie===lt.maxZoom?0:lt.tolerance/((1<<Ie)*lt.extent),qt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:ct,z:Ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Kt=0;Kt<Ct.length;Kt++){qt.numFeatures++,Fr(qt,Ct[Kt],zt,lt);var pt=Ct[Kt].minX,ui=Ct[Kt].minY,Vi=Ct[Kt].maxX,$i=Ct[Kt].maxY;pt<qt.minX&&(qt.minX=pt),ui<qt.minY&&(qt.minY=ui),Vi>qt.maxX&&(qt.maxX=Vi),$i>qt.maxY&&(qt.maxY=$i)}return qt}function Fr(Ct,Ie,Be,ct){var lt=Ie.geometry,zt=Ie.type,qt=[];if("Point"===zt||"MultiPoint"===zt)for(var Kt=0;Kt<lt.length;Kt+=3)qt.push(lt[Kt]),qt.push(lt[Kt+1]),Ct.numPoints++,Ct.numSimplified++;else if("LineString"===zt)Cs(qt,lt,Ct,Be,!1,!1);else if("MultiLineString"===zt||"Polygon"===zt)for(Kt=0;Kt<lt.length;Kt++)Cs(qt,lt[Kt],Ct,Be,"Polygon"===zt,0===Kt);else if("MultiPolygon"===zt)for(var pt=0;pt<lt.length;pt++){var ui=lt[pt];for(Kt=0;Kt<ui.length;Kt++)Cs(qt,ui[Kt],Ct,Be,!0,0===Kt)}if(qt.length){var Vi=Ie.tags||null;if("LineString"===zt&&ct.lineMetrics){for(var $i in Vi={},Ie.tags)Vi[$i]=Ie.tags[$i];Vi.mapbox_clip_start=lt.start/lt.size,Vi.mapbox_clip_end=lt.end/lt.size}var di={geometry:qt,type:"Polygon"===zt||"MultiPolygon"===zt?3:"LineString"===zt||"MultiLineString"===zt?2:1,tags:Vi};null!==Ie.id&&(di.id=Ie.id),Ct.features.push(di)}}function Cs(Ct,Ie,Be,ct,lt,zt){var qt=ct*ct;if(ct>0&&Ie.size<(lt?qt:ct))Be.numPoints+=Ie.length/3;else{for(var Kt=[],pt=0;pt<Ie.length;pt+=3)(0===ct||Ie[pt+2]>qt)&&(Be.numSimplified++,Kt.push(Ie[pt]),Kt.push(Ie[pt+1])),Be.numPoints++;lt&&function(ui,Vi){for(var $i=0,di=0,un=ui.length,Et=un-2;di<un;Et=di,di+=2)$i+=(ui[di]-ui[Et])*(ui[di+1]+ui[Et+1]);if($i>0===Vi)for(di=0,un=ui.length;di<un/2;di+=2){var St=ui[di],Ke=ui[di+1];ui[di]=ui[un-2-di],ui[di+1]=ui[un-1-di],ui[un-2-di]=St,ui[un-1-di]=Ke}}(Kt,zt),Ct.push(Kt)}}function er(Ct,Ie){var Be=(Ie=this.options=function(lt,zt){for(var qt in zt)lt[qt]=zt[qt];return lt}(Object.create(this.options),Ie)).debug;if(Be&&console.time("preprocess data"),Ie.maxZoom<0||Ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ie.promoteId&&Ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var lt,zt,qt,Kt,pt,ui,ct=function(lt,zt){var qt=[];if("FeatureCollection"===lt.type)for(var Kt=0;Kt<lt.features.length;Kt++)or(qt,lt.features[Kt],zt,Kt);else or(qt,"Feature"===lt.type?lt:{geometry:lt},zt);return qt}(Ct,Ie);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ie.indexMaxZoom,Ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Kt=lt=ct,pt=Ui(lt,1,-1-(qt=(zt=Ie).buffer/zt.extent),qt,0,-1,2,zt),ui=Ui(lt,1,1-qt,2+qt,0,-1,2,zt),(pt||ui)&&(Kt=Ui(lt,1,-qt,1+qt,0,-1,2,zt)||[],pt&&(Kt=Sr(pt,1).concat(Kt)),ui&&(Kt=Kt.concat(Sr(ui,-1)))),(ct=Kt).length&&this.splitTile(ct,0,0,0),Be&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function br(Ct,Ie,Be){return 32*((1<<Ct)*Be+Ie)+Ct}function mr(Ct,Ie){const Be=Ct.tileID.canonical;if(!this._geoJSONIndex)return Ie(null,null);const ct=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!ct)return Ie(null,null);const lt=new class{constructor(qt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=qt.length,this._features=qt}feature(qt){return new class{constructor(Kt){this._feature=Kt,this.extent=i.EXTENT,this.type=Kt.type,this.properties=Kt.tags,"id"in Kt&&!isNaN(Kt.id)&&(this.id=parseInt(Kt.id,10))}loadGeometry(){if(1===this._feature.type){const Kt=[];for(const pt of this._feature.geometry)Kt.push([new i.Point(pt[0],pt[1])]);return Kt}{const Kt=[];for(const pt of this._feature.geometry){const ui=[];for(const Vi of pt)ui.push(new i.Point(Vi[0],Vi[1]));Kt.push(ui)}return Kt}}toGeoJSON(Kt,pt,ui){return nt.call(this,Kt,pt,ui)}}(this._features[qt])}}(ct.features);let zt=gi(lt);0===zt.byteOffset&&zt.byteLength===zt.buffer.byteLength||(zt=new Uint8Array(zt)),Ie(null,{vectorTile:lt,rawData:zt.buffer})}er.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},er.prototype.splitTile=function(Ct,Ie,Be,ct,lt,zt,qt){for(var Kt=[Ct,Ie,Be,ct],pt=this.options,ui=pt.debug;Kt.length;){ct=Kt.pop(),Be=Kt.pop(),Ie=Kt.pop(),Ct=Kt.pop();var Vi=1<<Ie,$i=br(Ie,Be,ct),di=this.tiles[$i];if(!di&&(ui>1&&console.time("creation"),di=this.tiles[$i]=dr(Ct,Ie,Be,ct,pt),this.tileCoords.push({z:Ie,x:Be,y:ct}),ui)){ui>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ie,Be,ct,di.numFeatures,di.numPoints,di.numSimplified),console.timeEnd("creation"));var un="z"+Ie;this.stats[un]=(this.stats[un]||0)+1,this.total++}if(di.source=Ct,lt){if(Ie===pt.maxZoom||Ie===lt)continue;var Et=1<<lt-Ie;if(Be!==Math.floor(zt/Et)||ct!==Math.floor(qt/Et))continue}else if(Ie===pt.indexMaxZoom||di.numPoints<=pt.indexMaxPoints)continue;if(di.source=null,0!==Ct.length){ui>1&&console.time("clipping");var St,Ke,Ze,Re,He,ft,Yt=.5*pt.buffer/pt.extent,xi=.5-Yt,fi=.5+Yt,Pi=1+Yt;St=Ke=Ze=Re=null,He=Ui(Ct,Vi,Be-Yt,Be+fi,0,di.minX,di.maxX,pt),ft=Ui(Ct,Vi,Be+xi,Be+Pi,0,di.minX,di.maxX,pt),Ct=null,He&&(St=Ui(He,Vi,ct-Yt,ct+fi,1,di.minY,di.maxY,pt),Ke=Ui(He,Vi,ct+xi,ct+Pi,1,di.minY,di.maxY,pt),He=null),ft&&(Ze=Ui(ft,Vi,ct-Yt,ct+fi,1,di.minY,di.maxY,pt),Re=Ui(ft,Vi,ct+xi,ct+Pi,1,di.minY,di.maxY,pt),ft=null),ui>1&&console.timeEnd("clipping"),Kt.push(St||[],Ie+1,2*Be,2*ct),Kt.push(Ke||[],Ie+1,2*Be,2*ct+1),Kt.push(Ze||[],Ie+1,2*Be+1,2*ct),Kt.push(Re||[],Ie+1,2*Be+1,2*ct+1)}}},er.prototype.getTile=function(Ct,Ie,Be){var ct=this.options,lt=ct.extent,zt=ct.debug;if(Ct<0||Ct>24)return null;var qt=1<<Ct,Kt=br(Ct,Ie=(Ie%qt+qt)%qt,Be);if(this.tiles[Kt])return ar(this.tiles[Kt],lt);zt>1&&console.log("drilling down to z%d-%d-%d",Ct,Ie,Be);for(var pt,ui=Ct,Vi=Ie,$i=Be;!pt&&ui>0;)ui--,Vi=Math.floor(Vi/2),$i=Math.floor($i/2),pt=this.tiles[br(ui,Vi,$i)];return pt&&pt.source?(zt>1&&console.log("found parent tile z%d-%d-%d",ui,Vi,$i),zt>1&&console.time("drilling down"),this.splitTile(pt.source,ui,Vi,$i,Ct,Ie,Be),zt>1&&console.timeEnd("drilling down"),this.tiles[Kt]?ar(this.tiles[Kt],lt):null):null};class Tr extends i.VectorTileWorkerSource{constructor(Ie,Be,ct,lt,zt){super(Ie,Be,ct,lt,mr),zt&&(this.loadGeoJSON=zt)}loadData(Ie,Be){const ct=Ie&&Ie.request,lt=ct&&ct.collectResourceTiming;this.loadGeoJSON(Ie,(zt,qt)=>{if(zt||!qt)return Be(zt);if("object"!=typeof qt)return Be(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));{Je(qt,!0);try{if(Ie.filter){const pt=i.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===pt.result)throw new Error(pt.value.map(Vi=>`${Vi.key}: ${Vi.message}`).join(", "));qt={type:"FeatureCollection",features:qt.features.filter(Vi=>pt.value.evaluate({zoom:0},Vi))}}this._geoJSONIndex=Ie.cluster?new fn(function({superclusterOptions:pt,clusterProperties:ui}){if(!ui||!pt)return pt;const Vi={},$i={},di={accumulated:null,zoom:0},un={properties:null},Et=Object.keys(ui);for(const St of Et){const[Ke,Ze]=ui[St],Re=i.createExpression(Ze),He=i.createExpression("string"==typeof Ke?[Ke,["accumulated"],["get",St]]:Ke);Vi[St]=Re.value,$i[St]=He.value}return pt.map=St=>{un.properties=St;const Ke={};for(const Ze of Et)Ke[Ze]=Vi[Ze].evaluate(di,un);return Ke},pt.reduce=(St,Ke)=>{un.properties=Ke;for(const Ze of Et)di.accumulated=St[Ze],St[Ze]=$i[Ze].evaluate(di,un)},pt}(Ie)).load(qt.features):new er(pt=qt,Ie.geojsonVtOptions)}catch(pt){return Be(pt)}this.loaded={};const Kt={};if(lt){const pt=i.getPerformanceMeasurement(ct);pt&&(Kt.resourceTiming={},Kt.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(pt)))}Be(null,Kt)}var pt})}reloadTile(Ie,Be){const ct=this.loaded;return ct&&ct[Ie.uid]?super.reloadTile(Ie,Be):this.loadTile(Ie,Be)}loadGeoJSON(Ie,Be){if(Ie.request)i.getJSON(Ie.request,Be);else{if("string"!=typeof Ie.data)return Be(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`));try{return Be(null,JSON.parse(Ie.data))}catch{return Be(new Error(`Input data given to '${Ie.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ie,Be){try{Be(null,this._geoJSONIndex.getClusterExpansionZoom(Ie.clusterId))}catch(ct){Be(ct)}}getClusterChildren(Ie,Be){try{Be(null,this._geoJSONIndex.getChildren(Ie.clusterId))}catch(ct){Be(ct)}}getClusterLeaves(Ie,Be){try{Be(null,this._geoJSONIndex.getLeaves(Ie.clusterId,Ie.limit,Ie.offset))}catch(ct){Be(ct)}}}class Xr{constructor(Ie){this.self=Ie,this.actor=new i.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=i.getProjection({name:"mercator"}),this.workerSourceTypes={vector:i.VectorTileWorkerSource,geojson:Tr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Be,ct)=>{if(this.workerSourceTypes[Be])throw new Error(`Worker source with name "${Be}" already registered.`);this.workerSourceTypes[Be]=ct},this.self.registerRTLTextPlugin=Be=>{if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=Be.applyArabicShaping,i.plugin.processBidirectionalText=Be.processBidirectionalText,i.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}}clearCaches(Ie,Be,ct){delete this.layerIndexes[Ie],delete this.availableImages[Ie],delete this.workerSources[Ie],delete this.demWorkerSources[Ie],ct()}checkIfReady(Ie,Be,ct){ct()}setReferrer(Ie,Be){this.referrer=Be}spriteLoaded(Ie,Be){this.isSpriteLoaded[Ie]=Be;for(const ct in this.workerSources[Ie]){const lt=this.workerSources[Ie][ct];for(const zt in lt)lt[zt]instanceof i.VectorTileWorkerSource&&(lt[zt].isSpriteLoaded=Be,lt[zt].fire(new i.Event("isSpriteLoaded")))}}setImages(Ie,Be,ct){this.availableImages[Ie]=Be;for(const lt in this.workerSources[Ie]){const zt=this.workerSources[Ie][lt];for(const qt in zt)zt[qt].availableImages=Be}ct()}enableTerrain(Ie,Be,ct){this.terrain=Be,ct()}setProjection(Ie,Be){this.projections[Ie]=i.getProjection(Be)}setLayers(Ie,Be,ct){this.getLayerIndex(Ie).replace(Be),ct()}updateLayers(Ie,Be,ct){this.getLayerIndex(Ie).update(Be.layers,Be.removedIds),ct()}loadTile(Ie,Be,ct){const lt=this.enableTerrain?i.extend({enableTerrain:this.terrain},Be):Be;lt.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Be.type,Be.source).loadTile(lt,ct)}loadDEMTile(Ie,Be,ct){const lt=this.enableTerrain?i.extend({buildQuadTree:this.terrain},Be):Be;this.getDEMWorkerSource(Ie,Be.source).loadTile(lt,ct)}reloadTile(Ie,Be,ct){const lt=this.enableTerrain?i.extend({enableTerrain:this.terrain},Be):Be;lt.projection=this.projections[Ie]||this.defaultProjection,this.getWorkerSource(Ie,Be.type,Be.source).reloadTile(lt,ct)}abortTile(Ie,Be,ct){this.getWorkerSource(Ie,Be.type,Be.source).abortTile(Be,ct)}removeTile(Ie,Be,ct){this.getWorkerSource(Ie,Be.type,Be.source).removeTile(Be,ct)}removeSource(Ie,Be,ct){if(!this.workerSources[Ie]||!this.workerSources[Ie][Be.type]||!this.workerSources[Ie][Be.type][Be.source])return;const lt=this.workerSources[Ie][Be.type][Be.source];delete this.workerSources[Ie][Be.type][Be.source],void 0!==lt.removeSource?lt.removeSource(Be,ct):ct()}loadWorkerSource(Ie,Be,ct){try{this.self.importScripts(Be.url),ct()}catch(lt){ct(lt.toString())}}syncRTLPluginState(Ie,Be,ct){try{i.plugin.setState(Be);const lt=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&null!=lt){this.self.importScripts(lt);const zt=i.plugin.isParsed();ct(zt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${lt}`),zt)}}catch(lt){ct(lt.toString())}}getAvailableImages(Ie){let Be=this.availableImages[Ie];return Be||(Be=[]),Be}getLayerIndex(Ie){let Be=this.layerIndexes[Ie];return Be||(Be=this.layerIndexes[Ie]=new Ae),Be}getWorkerSource(Ie,Be,ct){return this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][Be]||(this.workerSources[Ie][Be]={}),this.workerSources[Ie][Be][ct]||(this.workerSources[Ie][Be][ct]=new this.workerSourceTypes[Be]({send:(zt,qt,Kt,pt,ui,Vi)=>{this.actor.send(zt,qt,Kt,Ie,ui,Vi)},scheduler:this.actor.scheduler},this.getLayerIndex(Ie),this.getAvailableImages(Ie),this.isSpriteLoaded[Ie])),this.workerSources[Ie][Be][ct]}getDEMWorkerSource(Ie,Be){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][Be]||(this.demWorkerSources[Ie][Be]=new De),this.demWorkerSources[Ie][Be]}enforceCacheSizeLimit(Ie,Be){i.enforceCacheSizeLimit(Be)}getWorkerPerformanceMetrics(Ie,Be,ct){ct(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Xr(self)),Xr}),hn(0,function(i){function V(w,d){if(Array.isArray(w)){if(!Array.isArray(d)||w.length!==d.length)return!1;for(let g=0;g<w.length;g++)if(!V(w[g],d[g]))return!1;return!0}if("object"==typeof w&&null!==w&&null!==d){if("object"!=typeof d||Object.keys(w).length!==Object.keys(d).length)return!1;for(const g in w)if(!V(w[g],d[g]))return!1;return!0}return w===d}var Oe=Ae;function Ae(w){return d=w,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,P,B=new Blob([""],{type:"text/javascript"}),X=URL.createObjectURL(B);try{P=new Worker(X),T=!0}catch{T=!1}return P&&P.terminate(),URL.revokeObjectURL(X),T}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var T=document.createElement("canvas");T.width=T.height=1;var P=T.getContext("2d");if(!P)return!1;var B=P.getImageData(0,0,1,1);return B&&B.width===T.width}()||(void 0===De[g=d&&d.failIfMajorPerformanceCaveat]&&(De[g]=function(T){var P,X,K,te,B=(X=T,K=document.createElement("canvas"),(te=Object.create(Ae.webGLContextAttributes)).failIfMajorPerformanceCaveat=X,K.getContext("webgl",te)||K.getContext("experimental-webgl",te));if(!B)return!1;try{P=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!P||B.isContextLost())&&(B.shaderSource(P,"void main() {}"),B.compileShader(P),!0===B.getShaderParameter(P,B.COMPILE_STATUS))}(g)),!De[g]||document.documentMode));var d,g}var De={};function Fe(w,d,g){const T=i.window.document.createElement(w);return void 0!==d&&(T.className=d),g&&g.appendChild(T),T}function Ue(w,d,g){const T=i.window.document.createElementNS("http://www.w3.org/2000/svg",w);for(const P of Object.keys(d))T.setAttributeNS(null,P,d[P]);return g&&g.appendChild(T),T}Ae.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Je=i.window.document&&i.window.document.documentElement.style,nt=Je&&void 0!==Je.userSelect?"userSelect":"WebkitUserSelect";let mt;function Pt(){Je&&nt&&(mt=Je[nt],Je[nt]="none")}function ot(){Je&&nt&&(Je[nt]=mt)}function gt(w){w.preventDefault(),w.stopPropagation(),i.window.removeEventListener("click",gt,!0)}function wt(){i.window.addEventListener("click",gt,!0),i.window.setTimeout(()=>{i.window.removeEventListener("click",gt,!0)},0)}function si(w,d){const g=w.getBoundingClientRect();return oi(w,g,d)}function $e(w,d){const g=w.getBoundingClientRect(),T=[];for(let P=0;P<d.length;P++)T.push(oi(w,g,d[P]));return T}function ii(w){return void 0!==i.window.InstallTrigger&&2===w.button&&w.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:w.button}function oi(w,d,g){const T=w.offsetWidth===d.width?1:w.offsetWidth/d.width;return new i.Point((g.clientX-d.left)*T,(g.clientY-d.top)*T)}function at(w,d){var g=d[0],T=d[1],P=d[2],B=d[3],X=g*B-P*T;return X?(w[0]=B*(X=1/X),w[1]=-T*X,w[2]=-P*X,w[3]=g*X,w):null}function ri(w){const{userImage:d}=w;return!!(d&&d.render&&d.render())&&(w.data.replace(new Uint8Array(d.data.buffer)),!0)}class Xt extends i.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:g,callback:T}of this.requestors)this._notify(g,T);this.requestors=[]}}hasImage(d){return!!this.getImage(d)}getImage(d){return this.images[d]}addImage(d,g){this._validate(d,g)&&(this.images[d]=g)}_validate(d,g){let T=!0;return this._validateStretch(g.stretchX,g.data&&g.data.width)||(this.fire(new i.ErrorEvent(new Error(`Image "${d}" has invalid "stretchX" value`))),T=!1),this._validateStretch(g.stretchY,g.data&&g.data.height)||(this.fire(new i.ErrorEvent(new Error(`Image "${d}" has invalid "stretchY" value`))),T=!1),this._validateContent(g.content,g)||(this.fire(new i.ErrorEvent(new Error(`Image "${d}" has invalid "content" value`))),T=!1),T}_validateStretch(d,g){if(!d)return!0;let T=0;for(const P of d){if(P[0]<T||P[1]<P[0]||g<P[1])return!1;T=P[1]}return!0}_validateContent(d,g){return!(d&&(4!==d.length||d[0]<0||g.data.width<d[0]||d[1]<0||g.data.height<d[1]||d[2]<0||g.data.width<d[2]||d[3]<0||g.data.height<d[3]||d[2]<d[0]||d[3]<d[1]))}updateImage(d,g){g.version=this.images[d].version+1,this.images[d]=g,this.updatedImages[d]=!0}removeImage(d){const g=this.images[d];delete this.images[d],delete this.patterns[d],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,g){let T=!0;if(!this.isLoaded())for(const P of d)this.images[P]||(T=!1);this.isLoaded()||T?this._notify(d,g):this.requestors.push({ids:d,callback:g})}_notify(d,g){const T={};for(const P of d){this.images[P]||this.fire(new i.Event("styleimagemissing",{id:P}));const B=this.images[P];B?T[P]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!(!B.userImage||!B.userImage.render)}:i.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,T)}getPixelSize(){const{width:d,height:g}=this.atlasImage;return{width:d,height:g}}getPattern(d){const g=this.patterns[d],T=this.getImage(d);if(!T)return null;if(g&&g.position.version===T.version)return g.position;if(g)g.position.version=T.version;else{const P={w:T.data.width+2,h:T.data.height+2,x:0,y:0},B=new i.ImagePosition(P,T);this.patterns[d]={bin:P,position:B}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const g=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(d,this.atlasImage,g.RGBA),this.atlasTexture&&this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const B in this.patterns)d.push(this.patterns[B].bin);const{w:g,h:T}=i.potpack(d),P=this.atlasImage;P.resize({width:g||1,height:T||1});for(const B in this.patterns){const{bin:X}=this.patterns[B],K=X.x+1,te=X.y+1,he=this.images[B].data,de=he.width,Ce=he.height;i.RGBAImage.copy(he,P,{x:0,y:0},{x:K,y:te},{width:de,height:Ce}),i.RGBAImage.copy(he,P,{x:0,y:Ce-1},{x:K,y:te-1},{width:de,height:1}),i.RGBAImage.copy(he,P,{x:0,y:0},{x:K,y:te+Ce},{width:de,height:1}),i.RGBAImage.copy(he,P,{x:de-1,y:0},{x:K-1,y:te},{width:1,height:Ce}),i.RGBAImage.copy(he,P,{x:0,y:0},{x:K+de,y:te},{width:1,height:Ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const g of d){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const T=this.images[g];ri(T)&&this.updateImage(g,T)}}}const Vt=new i.Properties({anchor:new i.DataConstantProperty(i.spec.light.anchor),position:new class{constructor(){this.specification=i.spec.light.position}possiblyEvaluate(w,d){return function([g,T,P]){const B=i.degToRad(T+90),X=i.degToRad(P);return{x:g*Math.cos(B)*Math.sin(X),y:g*Math.sin(B)*Math.sin(X),z:g*Math.cos(X),azimuthal:T,polar:P}}(w.expression.evaluate(d))}interpolate(w,d,g){return{x:i.number(w.x,d.x,g),y:i.number(w.y,d.y,g),z:i.number(w.z,d.z,g),azimuthal:i.number(w.azimuthal,d.azimuthal,g),polar:i.number(w.polar,d.polar,g)}}},color:new i.DataConstantProperty(i.spec.light.color),intensity:new i.DataConstantProperty(i.spec.light.intensity)});class dt extends i.Evented{constructor(d){super(),this._transitionable=new i.Transitionable(Vt),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,g={}){if(!this._validate(i.validateLight,d,g))for(const T in d){const P=d[T];i.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,g,T){return(!T||!1!==T.validate)&&i.emitValidationErrors(this,d.call(i.validateStyle,i.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:i.spec})))}}const Zt=new i.Properties({source:new i.DataConstantProperty(i.spec.terrain.source),exaggeration:new i.DataConstantProperty(i.spec.terrain.exaggeration)});let ni=class extends i.Evented{constructor(w,d){super(),this._transitionable=new i.Transitionable(Zt),this.set(w),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=d}get(){return this._transitionable.serialize()}set(w){for(const d in w){const g=w[d];i.endsWith(d,"-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(w){this.properties=this._transitioning.possiblyEvaluate(w)}};function gi(w,d,g,T){const P=i.smoothstep(45,65,g),[B,X]=Gi(w,T),K=i.length(d);let te=1-Math.min(1,Math.exp((K-B)/(X-B)*-6));return te*=te*te,te=Math.min(1,1.00747*te),te*P*w.alpha}function Gi(w,d){const g=.5/Math.tan(.5*d);return[w.range[0]+g,w.range[1]+g]}const vi=new i.Properties({range:new i.DataConstantProperty(i.spec.fog.range),color:new i.DataConstantProperty(i.spec.fog.color),"high-color":new i.DataConstantProperty(i.spec.fog["high-color"]),"space-color":new i.DataConstantProperty(i.spec.fog["space-color"]),"horizon-blend":new i.DataConstantProperty(i.spec.fog["horizon-blend"]),"star-intensity":new i.DataConstantProperty(i.spec.fog["star-intensity"])});class Ei extends i.Evented{constructor(d,g){super(),this._transitionable=new i.Transitionable(vi),this.set(d),this._transitioning=this._transitionable.untransitioned(),this._transform=g}get state(){const d=this._transform,g="globe"===d.projection.name,T=i.globeToMercatorTransition(d.zoom),P=this.properties.get("range"),B=[.5,3];return{range:g?[i.number(B[0],P[0],T),i.number(B[1],P[1],T)]:P,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(d,g={}){if(!this._validate(i.validateFog,d,g)){for(const T of Object.keys(i.spec.fog))d&&void 0===d[T]&&(d[T]=i.spec.fog[T].default);for(const T in d){const P=d[T];i.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),P):this._transitionable.setValue(T,P)}}}getOpacity(d){if(!this._transform.projection.supportsFog)return 0;const g=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:i.smoothstep(45,65,d))*g.a}getOpacityAtLatLng(d,g){return this._transform.projection.supportsFog?function(T,P,B){const X=i.MercatorCoordinate.fromLngLat(P),K=B.elevation?B.elevation.getAtPointOrZero(X):0,te=[X.x,X.y,K];return i.transformMat4(te,te,B.mercatorFogMatrix),gi(T,te,B.pitch,B._fov)}(this.state,d,g):0}getFovAdjustedRange(d){return this._transform.projection.supportsFog?Gi(this.state,d):[0,1]}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,g,T){return(!T||!1!==T.validate)&&i.emitValidationErrors(this,d.call(i.validateStyle,i.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:i.spec})))}}class Fi{constructor(d,g){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=i.uniqueId();const T=this.workerPool.acquire(this.id);for(let P=0;P<T.length;P++){const B=new Fi.Actor(T[P],g,this.id);B.name=`Worker ${P}`,this.actors.push(B)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(d,g,T){i.asyncAll(this.actors,(P,B)=>{P.send(d,g,B)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(d=>{d.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ji(w,d,g){return d*(i.EXTENT/(w.tileSize*Math.pow(2,g-w.tileID.overscaledZ)))}Fi.Actor=i.Actor;class bn{constructor(d,g,T,P){this.screenBounds=d,this.cameraPoint=g,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,P)}static createFromScreenPoints(d,g){let T,P;if(d instanceof i.Point||"number"==typeof d[0]){const B=i.Point.convert(d);T=[B],P=g.isPointAboveHorizon(B)}else{const B=i.Point.convert(d[0]),X=i.Point.convert(d[1]);T=[B,X],P=i.polygonizeBounds(B,X).every(K=>g.isPointAboveHorizon(K))}return new bn(T,g.getCameraPoint(),P,g)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(d){return i.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],d)}bufferedCameraGeometry(d){const g=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new i.Point(1,1)):this.screenBounds[1],P=i.polygonizeBounds(g,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>g.x&&this.cameraPoint.x<T.x?P.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?P[2]=this.cameraPoint:this.cameraPoint.x<=g.x&&(P[3]=this.cameraPoint)),i.bufferConvexPolygon(P,d)}bufferedCameraGeometryGlobe(d){const g=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new i.Point(1,1)):this.screenBounds[1],P=i.polygonizeBounds(g,T,d),B=this.cameraPoint.clone();switch(3*((B.y>g.y)+(B.y>T.y))+((B.x>g.x)+(B.x>T.x))){case 0:P[0]=B,P[4]=B.clone();break;case 1:P.splice(1,0,B);break;case 2:P[1]=B;break;case 3:P.splice(4,0,B);break;case 5:P.splice(2,0,B);break;case 6:P[3]=B;break;case 7:P.splice(3,0,B);break;case 8:P[2]=B}return P}containsTile(d,g,T,P=0){const B=d.queryPadding/g._pixelsPerMercatorPixel+1,X=T?this._bufferedCameraMercator(B,g):this._bufferedScreenMercator(B,g);let K=d.tileID.wrap+(X.unwrapped?P:0);const te=X.polygon.map(st=>i.getTilePoint(d.tileTransform,st,K));if(!i.polygonIntersectsBox(te,0,0,i.EXTENT,i.EXTENT))return;K=d.tileID.wrap+(this.screenGeometryMercator.unwrapped?P:0);const he=this.screenGeometryMercator.polygon.map(st=>i.getTileVec3(d.tileTransform,st,K)),de=he.map(st=>new i.Point(st[0],st[1])),Ce=g.getFreeCameraOptions().position||new i.MercatorCoordinate(0,0,0),je=i.getTileVec3(d.tileTransform,Ce,K),Qe=he.map(st=>{const Te=i.sub(st,st,je);return i.normalize(Te,Te),new i.Ray(je,Te)}),et=Ji(d,1,g.zoom)*g._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:de,tilespaceRays:Qe,bufferedTilespaceGeometry:te,bufferedTilespaceBounds:(tt=i.getBounds(te),tt.min.x=i.clamp(tt.min.x,0,i.EXTENT),tt.min.y=i.clamp(tt.min.y,0,i.EXTENT),tt.max.x=i.clamp(tt.max.x,0,i.EXTENT),tt.max.y=i.clamp(tt.max.y,0,i.EXTENT),tt),tile:d,tileID:d.tileID,pixelToTileUnitsFactor:et};var tt}_bufferedScreenMercator(d,g){const T=Qt(d);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let P;return P="globe"===g.projection.name?this._projectAndResample(this.bufferedScreenGeometry(d),g):{polygon:this.bufferedScreenGeometry(d).map(B=>g.pointCoordinate3D(B)),unwrapped:!0},this._screenRaycastCache[T]=P,P}}_bufferedCameraMercator(d,g){const T=Qt(d);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let P;return P="globe"===g.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(d),g):{polygon:this.bufferedCameraGeometry(d).map(B=>g.pointCoordinate3D(B)),unwrapped:!0},this._cameraRaycastCache[T]=P,P}}_projectAndResample(d,g){const T=function(B,X){const K=i.multiply([],X.pixelMatrix,X.globeMatrix),te=[0,-i.GLOBE_RADIUS,0,1],he=[0,i.GLOBE_RADIUS,0,1],de=[0,0,0,1];i.transformMat4$1(te,te,K),i.transformMat4$1(he,he,K),i.transformMat4$1(de,de,K);const Ce=new i.Point(te[0]/te[3],te[1]/te[3]),je=new i.Point(he[0]/he[3],he[1]/he[3]),Qe=i.polygonContainsPoint(B,Ce)&&te[3]<de[3],et=i.polygonContainsPoint(B,je)&&he[3]<de[3];if(!Qe&&!et)return null;const tt=function(Gt,ti,Jt){for(let _i=1;_i<Gt.length;_i++){const Qi=Gn(ti.pointCoordinate3D(Gt[_i-1]).x),ci=Gn(ti.pointCoordinate3D(Gt[_i]).x);if(Jt<0){if(Qi<ci)return{idx:_i,t:-Qi/(ci-1-Qi)}}else if(ci<Qi)return{idx:_i,t:(1-Qi)/(ci+1-Qi)}}return null}(B,X,Qe?-1:1);if(!tt)return null;const{idx:st,t:Te}=tt;let Ge=st>1?fn(B.slice(0,st),X):[],bt=st<B.length?fn(B.slice(st),X):[];Ge=Ge.map(Gt=>new i.Point(Gn(Gt.x),Gt.y)),bt=bt.map(Gt=>new i.Point(Gn(Gt.x),Gt.y));const xt=[...Ge];0===xt.length&&xt.push(bt[bt.length-1]);const jt=i.number(xt[xt.length-1].y,(0===bt.length?Ge[0]:bt[0]).y,Te);let Wt;return Wt=Qe?[new i.Point(0,jt),new i.Point(0,0),new i.Point(1,0),new i.Point(1,jt)]:[new i.Point(1,jt),new i.Point(1,1),new i.Point(0,1),new i.Point(0,jt)],xt.push(...Wt),0===bt.length?xt.push(Ge[0]):xt.push(...bt),{polygon:xt.map(Gt=>new i.MercatorCoordinate(Gt.x,Gt.y)),unwrapped:!1}}(d,g);if(T)return T;const P=function(B,X){let K=!1,te=-1/0,he=0;for(let Ce=0;Ce<B.length-1;Ce++)B[Ce].x>te&&(te=B[Ce].x,he=Ce);for(let Ce=0;Ce<B.length-1;Ce++){const je=(he+Ce)%(B.length-1),Qe=B[je],et=B[je+1];Math.abs(Qe.x-et.x)>.5&&(Qe.x<et.x?(Qe.x+=1,0===je&&(B[B.length-1].x+=1)):(et.x+=1,je+1===B.length-1&&(B[0].x+=1)),K=!0)}const de=i.mercatorXfromLng(X.center.lng);return K&&de<Math.abs(de-1)&&B.forEach(Ce=>{Ce.x-=1}),{polygon:B,unwrapped:K}}(fn(d,g).map(B=>new i.Point(Gn(B.x),B.y)),g);return{polygon:P.polygon.map(B=>new i.MercatorCoordinate(B.x,B.y)),unwrapped:P.unwrapped}}}function fn(w,d){return i.resample(w,g=>{const T=d.pointCoordinate3D(g);g.x=T.x,g.y=T.y},1/256)}function Gn(w){return w<0?1+w%1:w%1}function Qt(w){return 100*w|0}function Yi(w,d,g,T,P){const B=function(X,K){if(X)return P(X);if(K){w.url&&K.tiles&&w.tiles&&delete w.tiles;const te=i.pick(i.extend(K,w),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);K.vector_layers&&(te.vectorLayers=K.vector_layers,te.vectorLayerIds=te.vectorLayers.map(he=>he.id)),te.tiles=d.canonicalizeTileset(te,w.url),P(null,te)}};return w.url?i.getJSON(d.transformRequest(d.normalizeSourceURL(w.url,null,g,T),i.ResourceType.Source),B):i.exported.frame(()=>B(null,w))}class on{constructor(d,g,T){this.bounds=i.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=g||0,this.maxzoom=T||24}validateBounds(d){return Array.isArray(d)&&4===d.length?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const g=Math.pow(2,d.z),T=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*g),P=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*g),B=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*g),X=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*g);return d.x>=T&&d.x<B&&d.y>=P&&d.y<X}}class Zn{constructor(d,g,T){this.context=d;const P=d.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dn{constructor(d,g,T,P){this.length=g.length,this.attributes=T,this.itemSize=g.bytesPerElement,this.dynamicDraw=P,this.context=d;const B=d.gl;this.buffer=B.createBuffer(),d.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,g){for(let T=0;T<this.attributes.length;T++){const P=g.attributes[this.attributes[T].name];void 0!==P&&d.enableVertexAttribArray(P)}}setVertexAttribPointers(d,g,T){for(let P=0;P<this.attributes.length;P++){const B=this.attributes[P],X=g.attributes[B.name];void 0!==X&&d.vertexAttribPointer(X,B.components,d[Nn[B.type]],!1,this.itemSize,B.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ji{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mr extends ji{getDefault(){return i.Color.transparent}set(d){const g=this.current;(d.r!==g.r||d.g!==g.g||d.b!==g.b||d.a!==g.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class or extends ji{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class gr extends ji{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class xn extends ji{getDefault(){return[!0,!0,!0,!0]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||d[3]!==g[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class en extends ji{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class _n extends ji{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class Zi extends ji{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const g=this.current;(d.func!==g.func||d.ref!==g.ref||d.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class Ui extends ji{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class jn extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=d,this.dirty=!1}}class tn extends ji{getDefault(){return[0,1]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Si extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=d,this.dirty=!1}}class mn extends ji{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Pn extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.BLEND):g.disable(g.BLEND),this.current=d,this.dirty=!1}}class Lr extends ji{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Or extends ji{getDefault(){return i.Color.transparent}set(d){const g=this.current;(d.r!==g.r||d.g!==g.g||d.b!==g.b||d.a!==g.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Sr extends ji{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class vr extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;d?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=d,this.dirty=!1}}class ar extends ji{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class kn extends ji{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}let dr,Fr=class extends ji{getDefault(){return null}set(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)}};class Cs extends ji{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class er extends ji{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const g=this.current;(d[0]!==g[0]||d[1]!==g[1]||d[2]!==g[2]||d[3]!==g[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class br extends ji{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class mr extends ji{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Tr extends ji{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class Xr extends ji{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ct extends ji{getDefault(){return null}set(d){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Ie extends ji{constructor(d){super(d),this.vao=d.extVertexArrayObject}getDefault(){return null}set(d){this.vao&&(d!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(d),this.current=d,this.dirty=!1)}}class Be extends ji{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class ct extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class lt extends ji{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class zt extends ji{constructor(d,g){super(d),this.context=d,this.parent=g}getDefault(){return null}}class qt extends zt{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class Kt extends zt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,this.attachment(),g.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class pt extends Kt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ui{constructor(d,g,T,P){this.context=d,this.width=g,this.height=T;const B=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new qt(d,B),P&&(this.depthAttachment=new Kt(d,B))}destroy(){const d=this.context.gl,g=this.colorAttachment.get();if(g&&d.deleteTexture(g),this.depthAttachment){const T=this.depthAttachment.get();T&&d.deleteRenderbuffer(T)}d.deleteFramebuffer(this.framebuffer)}}class Vi{constructor(d,g=!1){if(this.gl=d,this.isWebGL2=g,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),g){const T=d;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(d),deleteVertexArrayOES:T.deleteVertexArray.bind(d),bindVertexArrayOES:T.bindVertexArray.bind(d)}}this.clearColor=new Mr(this),this.clearDepth=new or(this),this.clearStencil=new gr(this),this.colorMask=new xn(this),this.depthMask=new en(this),this.stencilMask=new _n(this),this.stencilFunc=new Zi(this),this.stencilOp=new Ui(this),this.stencilTest=new jn(this),this.depthRange=new tn(this),this.depthTest=new Si(this),this.depthFunc=new mn(this),this.blend=new Pn(this),this.blendFunc=new Lr(this),this.blendColor=new Or(this),this.blendEquation=new Sr(this),this.cullFace=new vr(this),this.cullFaceSide=new ar(this),this.frontFace=new kn(this),this.program=new Fr(this),this.activeTexture=new Cs(this),this.viewport=new er(this),this.bindFramebuffer=new br(this),this.bindRenderbuffer=new mr(this),this.bindTexture=new Tr(this),this.bindVertexBuffer=new Xr(this),this.bindElementBuffer=new Ct(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ie(this),this.pixelStoreUnpack=new Be(this),this.pixelStoreUnpackPremultiplyAlpha=new ct(this),this.pixelStoreUnpackFlipY=new lt(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=d.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=d.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=d.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),g||(this.extTextureHalfFloat=d.getExtension("OES_texture_half_float")),(g||this.extTextureHalfFloat&&d.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=g||d.getExtension("OES_standard_derivatives"),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,g){return new Zn(this,d,g)}createVertexBuffer(d,g,T){return new Dn(this,d,g,T)}createRenderbuffer(d,g,T){const P=this.gl,B=P.createRenderbuffer();return this.bindRenderbuffer.set(B),P.renderbufferStorage(P.RENDERBUFFER,d,g,T),this.bindRenderbuffer.set(null),B}createFramebuffer(d,g,T){return new ui(this,d,g,T)}clear({color:d,depth:g,stencil:T}){const P=this.gl;let B=0;d&&(B|=P.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),void 0!==g&&(B|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),void 0!==T&&(B|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),P.clear(B)}setCullFace(d){!1===d.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){V(d.blendFunction,i.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class $i extends i.Evented{constructor(d,g,T,P){if(super(),this.id=d,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(g,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P),this._tileWorkers={},this._deduped=new i.DedupedRequest}load(d){this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"}));const g=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=Yi(this._options,this.map._requestManager,g,T,(P,B)=>{this._tileJSONRequest=null,this._loaded=!0,P?(g&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${g}`),T&&2!==T.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new i.ErrorEvent(P))):B&&(i.extend(this,B),B.bounds&&(this.tileBounds=new on(B.bounds,this.minzoom,this.maxzoom)),i.postTurnstileEvent(B.tiles,this.map._requestManager._customAccessToken),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(P)})}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return i.extend({},this._options)}loadTile(d,g){const T=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme)),P={request:this.map._requestManager.transformRequest(T,i.ResourceType.Tile),data:void 0,uid:d.uid,tileID:d.tileID,tileZoom:d.tileZoom,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:d.isSymbolTile};if(P.request.collectResourceTiming=this._collectResourceTiming,d.actor&&"expired"!==d.state)"loading"===d.state?d.reloadCallback=g:d.request=d.actor.send("reloadTile",P,B.bind(this));else if(d.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)d.request=d.actor.send("loadTile",P,B.bind(this),void 0,!0);else{const X=i.loadVectorTile.call({deduped:this._deduped},P,(K,te)=>{K||!te?B.call(this,K):(P.data={cacheControl:te.cacheControl,expires:te.expires,rawData:te.rawData.slice(0)},d.actor&&d.actor.send("loadTile",P,B.bind(this),void 0,!0))},!0);d.request={cancel:X}}function B(X,K){return delete d.request,d.aborted?g(null):X&&404!==X.status?g(X):(K&&K.resourceTiming&&(d.resourceTiming=K.resourceTiming),this.map._refreshExpiredTiles&&K&&d.setExpiryData(K),d.loadVectorData(K,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),g(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id})}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class di extends i.Evented{constructor(d,g,T,P){super(),this.id=d,this.dispatcher=T,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},g),i.extend(this,i.pick(g,["url","scheme","tileSize"]))}load(d){this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Yi(this._options,this.map._requestManager,null,null,(g,T)=>{this._tileJSONRequest=null,this._loaded=!0,g?this.fire(new i.ErrorEvent(g)):T&&(i.extend(this,T),T.bounds&&(this.tileBounds=new on(T.bounds,this.minzoom,this.maxzoom)),i.postTurnstileEvent(T.tiles),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"}))),d&&d(g)})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(d){return this._options.tiles=d,this.reload(),this}setUrl(d){return this.url=d,this._options.url=d,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return i.extend({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,g){const T=i.exported.devicePixelRatio>=2,P=this.map._requestManager.normalizeTileURL(d.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);d.request=i.getImage(this.map._requestManager.transformRequest(P,i.ResourceType.Tile),(B,X,K,te)=>(delete d.request,d.aborted?(d.state="unloaded",g(null)):B?(d.state="errored",g(B)):X?(this.map._refreshExpiredTiles&&d.setExpiryData({cacheControl:K,expires:te}),d.setTexture(X,this.map.painter),d.state="loaded",i.cacheEntryPossiblyAdded(this.dispatcher),void g(null)):g(null)))}static loadTileData(d,g,T){d.setTexture(g,T)}static unloadTileData(d,g){d.texture&&g.saveTileTexture(d.texture)}abortTile(d,g){d.request&&(d.request.cancel(),delete d.request),g()}unloadTile(d,g){d.texture&&this.map.painter.saveTileTexture(d.texture),g()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function un(w,d,g,T,P,B,X,K){const te=[w,g,P,d,T,B,1,1,1],he=[X,K,1],de=i.adjoint([],te),[Ce,je,Qe]=i.transformMat3(he,he,i.transpose(de,de));return i.multiply$1(te,[Ce,0,0,0,je,0,0,0,Qe],te)}class Et extends i.Evented{constructor(d,g,T,P){super(),this.id=d,this.dispatcher=T,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=g,this._dirty=!1}load(d,g){this._loaded=g||!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),(T,P)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new i.ErrorEvent(T));else if(P){const{HTMLImageElement:B}=i.window;this.image=P instanceof B?i.exported.getImageData(P):P,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,d&&(this.coordinates=d),this._finishLoading()}})}loaded(){return this._loaded}updateImage(d){return this.image&&d.url?(this._imageRequest&&d.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=d.url,this.load(d.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(d){this.coordinates=d,this._boundsArray=void 0;const g=d.map(i.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let P=1/0,B=1/0,X=-1/0,K=-1/0;for(const Ce of T)P=Math.min(P,Ce.x),B=Math.min(B,Ce.y),X=Math.max(X,Ce.x),K=Math.max(K,Ce.y);const te=Math.max(X-P,K-B),he=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),de=Math.pow(2,he);return new i.CanonicalTileID(he,Math.floor((P+X)/2*de),Math.floor((B+K)/2*de))}(g),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(d){for(const te in this.tiles){const he=this.tiles[te];"loaded"!==he.state&&(he.state="loaded",he.texture=this.texture)}if(this._boundsArray)return;const g=i.tileTransform(this.tileID,this.map.transform.projection),[T,P,B,X]=this.coordinates.map(te=>{const he=g.projection.project(te[0],te[1]);return i.getTilePoint(g,he)._round()});this.perspectiveTransform=function(te,he,de,Ce,je,Qe,et,tt,st,Te){const Ge=un(0,0,te,0,0,he,te,he),bt=un(de,Ce,je,Qe,et,tt,st,Te);return i.multiply$1(bt,i.adjoint(Ge,Ge),bt),[bt[6]/bt[8]*te/i.EXTENT,bt[7]/bt[8]*he/i.EXTENT]}(this.width,this.height,T.x,T.y,P.x,P.y,X.x,X.y,B.x,B.y);const K=this._boundsArray=new i.StructArrayLayout4i8;K.emplaceBack(T.x,T.y,0,0),K.emplaceBack(P.x,P.y,i.EXTENT,0),K.emplaceBack(X.x,X.y,0,i.EXTENT),K.emplaceBack(B.x,B.y,i.EXTENT,i.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=d.createVertexBuffer(K,i.boundsAttributes.members),this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const d=this.map.painter.context,g=d.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new i.Texture(d,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(d)}loadTile(d,g){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},g(null)):(d.state="errored",g(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const St={vector:$i,raster:di,"raster-dem":class extends di{constructor(w,d,g,T){super(w,d,g,T),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}loadTile(w,d){const g=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(P,B){P&&(w.state="errored",d(P)),B&&(w.dem=B,w.dem.onDeserialize(),w.needsHillshadePrepare=!0,w.needsDEMTextureUpload=!0,w.state="loaded",d(null))}w.request=i.getImage(this.map._requestManager.transformRequest(g,i.ResourceType.Tile),function(P,B,X,K){if(delete w.request,w.aborted)w.state="unloaded",d(null);else if(P)w.state="errored",d(P);else if(B){this.map._refreshExpiredTiles&&w.setExpiryData({cacheControl:X,expires:K});const te=i.window.ImageBitmap&&B instanceof i.window.ImageBitmap&&(null==dr&&(dr=i.window.OffscreenCanvas&&new i.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof i.window.createImageBitmap),dr),he=1-(B.width-i.prevPowerOfTwo(B.width))/2;he<1||w.neighboringTiles||(w.neighboringTiles=this._getNeighboringTiles(w.tileID));const de=te?B:i.exported.getImageData(B,he),Ce={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:de,encoding:this.encoding,padding:he};w.actor&&"expired"!==w.state||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",Ce,T.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(w){const d=w.canonical,g=Math.pow(2,d.z),T=(d.x-1+g)%g,P=0===d.x?w.wrap-1:w.wrap,B=(d.x+1+g)%g,X=d.x+1===g?w.wrap+1:w.wrap,K={};return K[new i.OverscaledTileID(w.overscaledZ,P,d.z,T,d.y).key]={backfilled:!1},K[new i.OverscaledTileID(w.overscaledZ,X,d.z,B,d.y).key]={backfilled:!1},d.y>0&&(K[new i.OverscaledTileID(w.overscaledZ,P,d.z,T,d.y-1).key]={backfilled:!1},K[new i.OverscaledTileID(w.overscaledZ,w.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},K[new i.OverscaledTileID(w.overscaledZ,X,d.z,B,d.y-1).key]={backfilled:!1}),d.y+1<g&&(K[new i.OverscaledTileID(w.overscaledZ,P,d.z,T,d.y+1).key]={backfilled:!1},K[new i.OverscaledTileID(w.overscaledZ,w.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},K[new i.OverscaledTileID(w.overscaledZ,X,d.z,B,d.y+1).key]={backfilled:!1}),K}unloadTile(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded"}},geojson:class extends i.Evented{constructor(w,d,g,T){super(),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(T),this._data=d.data,this._options=i.extend({},d),this._collectResourceTiming=d.collectResourceTiming,void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const P=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*P,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*P,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:i.EXTENT,radius:(void 0!==d.clusterRadius?d.clusterRadius:50)*P,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}onAdd(w){this.map=w,this.setData(this._data)}setData(w){return this._data=w,this._updateWorkerData(),this}getClusterExpansionZoom(w,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},d),this}getClusterChildren(w,d){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},d),this}getClusterLeaves(w,d,g,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:d,offset:g},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.Event("dataloading",{dataType:"source"})),this._loaded=!1;const w=i.extend({},this.workerOptions),d=this._data;"string"==typeof d?(w.request=this.map._requestManager.transformRequest(i.exported.resolveURL(d),i.ResourceType.Source),w.request.collectResourceTiming=this._collectResourceTiming):w.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,w,(g,T)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new i.ErrorEvent(g));else{const P={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(P.resourceTiming=T.resourceTiming[this.id]),this.fire(new i.Event("data",P)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(w,d){const g=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(g,{type:this.type,uid:w.uid,tileID:w.tileID,tileZoom:w.tileZoom,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,P)=>(delete w.request,w.unloadVectorData(),w.aborted?d(null):T?d(T):(w.loadVectorData(P,this.map.painter,"reloadTile"===g),d(null))),void 0,"loadTile"===g)}abortTile(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0}unloadTile(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Et{constructor(w,d,g,T){super(w,d,g,T),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const w=this.options;this.urls=[];for(const d of w.urls)this.urls.push(this.map._requestManager.transformRequest(d,i.ResourceType.Source).url);i.getVideo(this.urls,(d,g)=>{this._loaded=!0,d?this.fire(new i.ErrorEvent(d)):g&&(this.video=g,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(w){if(this.video){const d=this.video.seekable;w<d.start(0)||w>d.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=w}}getVideo(){return this.video}onAdd(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const w=this.map.painter.context,d=w.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(w,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(w)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Et,canvas:class extends Et{constructor(w,d,g,T){super(w,d,g,T),d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(P=>!Array.isArray(P)||2!==P.length||P.some(B=>"number"!=typeof B))||this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${w}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${w}`,null,'missing required property "coordinates"'))),d.animate&&"boolean"!=typeof d.animate&&this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${w}`,null,'optional "animate" property must be a boolean value'))),d.canvas?"string"==typeof d.canvas||d.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${w}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError(`sources.${w}`,null,'missing required property "canvas"'))),this.options=d,this.animate=void 0===d.animate||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const d=this.map.painter.context;this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(d,this.canvas,d.gl.RGBA,{premultiply:!0}),this._prepareData(d)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const w of[this.canvas.width,this.canvas.height])if(isNaN(w)||w<=0)return!0;return!1}},custom:class extends i.Evented{constructor(w,d,g,T){super(),this.id=w,this.type="custom",this._dataType="raster",this._dispatcher=g,this._implementation=d,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new on(this._implementation.bounds,this.minzoom,this.maxzoom)),d.update=this._update.bind(this),d.clearTiles=this._clearTiles.bind(this),d.coveringTiles=this._coveringTiles.bind(this),i.extend(this,i.pick(d,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(w){this._map=w,this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(w),this.load()}onRemove(w){this._implementation.onRemove&&this._implementation.onRemove(w)}hasTile(w){if(this._implementation.hasTile){const{x:d,y:g,z:T}=w.canonical;return this._implementation.hasTile({x:d,y:g,z:T})}return!this.tileBounds||this.tileBounds.contains(w.canonical)}loadTile(w,d){const{x:g,y:T,z:P}=w.tileID.canonical,B=new i.window.AbortController;w.request=Promise.resolve(this._implementation.loadTile({x:g,y:T,z:P},{signal:B.signal})).then(function(X){return delete w.request,w.aborted?(w.state="unloaded",d(null)):void 0===X?(w.state="errored",d(null)):null===X?(this.loadTileData(w,{width:this.tileSize,height:this.tileSize,data:null}),w.state="loaded",d(null)):(K=X)instanceof i.window.ImageData||K instanceof i.window.HTMLCanvasElement||K instanceof i.window.ImageBitmap||K instanceof i.window.HTMLImageElement?(this.loadTileData(w,X),w.state="loaded",void d(null)):(w.state="errored",d(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var K}.bind(this)).catch(X=>{20!==X.code&&(w.state="errored",d(X))}),w.request.cancel=()=>B.abort()}loadTileData(w,d){di.loadTileData(w,d,this._map.painter)}unloadTileData(w){di.unloadTileData(w,this._map.painter)}unloadTile(w,d){if(this.unloadTileData(w),this._implementation.unloadTile){const{x:g,y:T,z:P}=w.tileID.canonical;this._implementation.unloadTile({x:g,y:T,z:P})}d()}abortTile(w,d){w.request&&w.request.cancel&&(w.request.cancel(),delete w.request),d()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(w=>({x:w.canonical.x,y:w.canonical.y,z:w.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ke=function(w,d,g,T){const P=new St[d.type](w,d,g,T);if(P.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${P.id}`);return i.bindAll(["load","abort","unload","serialize","prepare"],P),P};function Ze(w,d){const g=i.identity([]);return i.scale(g,g,[.5*w.width,.5*-w.height,1]),i.translate(g,g,[1,-1,0]),i.multiply(g,g,w.calculateProjMatrix(d.toUnwrapped())),Float32Array.from(g)}function Re(w,d,g,T,P,B,X,K=!1){const te=w.tilesIn(T,X,K);te.sort(ft);const he=[];for(const Ce of te)he.push({wrappedTileID:Ce.tile.tileID.wrapped().key,queryResults:Ce.tile.queryRenderedFeatures(d,g,w._state,Ce,P,B,Ze(w.transform,Ce.tile.tileID),K)});const de=function(Ce){const je={},Qe={};for(const et of Ce){const tt=et.queryResults,st=et.wrappedTileID,Te=Qe[st]=Qe[st]||{};for(const Ge in tt){const bt=tt[Ge],xt=Te[Ge]=Te[Ge]||{},jt=je[Ge]=je[Ge]||[];for(const Wt of bt)xt[Wt.featureIndex]||(xt[Wt.featureIndex]=!0,jt.push(Wt))}}return je}(he);for(const Ce in de)de[Ce].forEach(je=>{const Qe=je.feature,et=Qe.layer;et&&"background"!==et.type&&"sky"!==et.type&&(Qe.source=et.source,et["source-layer"]&&(Qe.sourceLayer=et["source-layer"]),Qe.state=void 0!==Qe.id?w.getFeatureState(et["source-layer"],Qe.id):{})});return de}function He(w,d){const g=w.getRenderableIds().map(B=>w.getTileByID(B)),T=[],P={};for(let B=0;B<g.length;B++){const X=g[B],K=X.tileID.canonical.key;P[K]||(P[K]=!0,X.querySourceFeatures(T,d))}return T}function ft(w,d){const g=w.tileID,T=d.tileID;return g.overscaledZ-T.overscaledZ||g.canonical.y-T.canonical.y||g.wrap-T.wrap||g.canonical.x-T.canonical.x}function Yt(){return null!=xu.workerClass?new xu.workerClass:new i.window.Worker(xu.workerUrl)}const xi="mapboxgl_preloaded_worker_pool";class fi{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<fi.workerCount;)this.workers.push(new Yt);return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],0===this.numActive()&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xi]}numActive(){return Object.keys(this.active).length}}let Pi;function rt(){return Pi||(Pi=new fi),Pi}function yt(w,d){const g={};for(const T in w)"ref"!==T&&(g[T]=w[T]);return i.refProperties.forEach(T=>{T in d&&(g[T]=d[T])}),g}function fe(w){w=w.slice();const d=Object.create(null);for(let g=0;g<w.length;g++)d[w[g].id]=w[g];for(let g=0;g<w.length;g++)"ref"in w[g]&&(w[g]=yt(w[g],d[w[g].ref]));return w}fi.workerCount=2;const it={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Tt(w,d,g){g.push({command:it.addSource,args:[w,d[w]]})}function Pe(w,d,g){d.push({command:it.removeSource,args:[w]}),g[w]=!0}function It(w,d,g,T){Pe(w,g,T),Tt(w,d,g)}function le(w,d,g){let T;for(T in w[g])if(w[g].hasOwnProperty(T)&&"data"!==T&&!V(w[g][T],d[g][T]))return!1;for(T in d[g])if(d[g].hasOwnProperty(T)&&"data"!==T&&!V(w[g][T],d[g][T]))return!1;return!0}function o(w,d,g,T,P,B){let X;for(X in d=d||{},w=w||{})w.hasOwnProperty(X)&&(V(w[X],d[X])||g.push({command:B,args:[T,X,d[X],P]}));for(X in d)d.hasOwnProperty(X)&&!w.hasOwnProperty(X)&&(V(w[X],d[X])||g.push({command:B,args:[T,X,d[X],P]}))}function c(w){return w.id}function h(w,d){return w[d.id]=d,w}class _{constructor(d,g){this.reset(d,g)}reset(d,g){this.points=d||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(1===this.points.length)return this.points[0];d=i.clamp(d,0,1);let g=1,T=this._distances[g];const P=d*this.paddedLength+this.padding;for(;T<P&&g<this._distances.length;)T=this._distances[++g];const B=g-1,X=this._distances[B],K=T-X,te=K>0?(P-X)/K:0;return this.points[B].mult(1-te).add(this.points[g].mult(te))}}class b{constructor(d,g,T){const P=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(d/T),this.yCellCount=Math.ceil(g/T);for(let X=0;X<this.xCellCount*this.yCellCount;X++)P.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=g,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,g,T,P,B){this._forEachCell(g,T,P,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(g),this.bboxes.push(T),this.bboxes.push(P),this.bboxes.push(B)}insertCircle(d,g,T,P){this._forEachCell(g-P,T-P,g+P,T+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(g),this.circles.push(T),this.circles.push(P)}_insertBoxCell(d,g,T,P,B,X){this.boxCells[B].push(X)}_insertCircleCell(d,g,T,P,B,X){this.circleCells[B].push(X)}_query(d,g,T,P,B,X){if(T<0||d>this.width||P<0||g>this.height)return!B&&[];const K=[];if(d<=0&&g<=0&&this.width<=T&&this.height<=P){if(B)return!0;for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const he=this.circles[3*te],de=this.circles[3*te+1],Ce=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:he-Ce,y1:de-Ce,x2:he+Ce,y2:de+Ce})}return X?K.filter(X):K}return this._forEachCell(d,g,T,P,this._queryCell,K,{hitTest:B,seenUids:{box:{},circle:{}}},X),B?K.length>0:K}_queryCircle(d,g,T,P,B){const X=d-T,K=d+T,te=g-T,he=g+T;if(K<0||X>this.width||he<0||te>this.height)return!P&&[];const de=[];return this._forEachCell(X,te,K,he,this._queryCellCircle,de,{hitTest:P,circle:{x:d,y:g,radius:T},seenUids:{box:{},circle:{}}},B),P?de.length>0:de}query(d,g,T,P,B){return this._query(d,g,T,P,!1,B)}hitTest(d,g,T,P,B){return this._query(d,g,T,P,!0,B)}hitTestCircle(d,g,T,P){return this._queryCircle(d,g,T,!0,P)}_queryCell(d,g,T,P,B,X,K,te){const he=K.seenUids,de=this.boxCells[B];if(null!==de){const je=this.bboxes;for(const Qe of de)if(!he.box[Qe]){he.box[Qe]=!0;const et=4*Qe;if(d<=je[et+2]&&g<=je[et+3]&&T>=je[et+0]&&P>=je[et+1]&&(!te||te(this.boxKeys[Qe]))){if(K.hitTest)return X.push(!0),!0;X.push({key:this.boxKeys[Qe],x1:je[et],y1:je[et+1],x2:je[et+2],y2:je[et+3]})}}}const Ce=this.circleCells[B];if(null!==Ce){const je=this.circles;for(const Qe of Ce)if(!he.circle[Qe]){he.circle[Qe]=!0;const et=3*Qe;if(this._circleAndRectCollide(je[et],je[et+1],je[et+2],d,g,T,P)&&(!te||te(this.circleKeys[Qe]))){if(K.hitTest)return X.push(!0),!0;{const tt=je[et],st=je[et+1],Te=je[et+2];X.push({key:this.circleKeys[Qe],x1:tt-Te,y1:st-Te,x2:tt+Te,y2:st+Te})}}}}}_queryCellCircle(d,g,T,P,B,X,K,te){const he=K.circle,de=K.seenUids,Ce=this.boxCells[B];if(null!==Ce){const Qe=this.bboxes;for(const et of Ce)if(!de.box[et]){de.box[et]=!0;const tt=4*et;if(this._circleAndRectCollide(he.x,he.y,he.radius,Qe[tt+0],Qe[tt+1],Qe[tt+2],Qe[tt+3])&&(!te||te(this.boxKeys[et])))return X.push(!0),!0}}const je=this.circleCells[B];if(null!==je){const Qe=this.circles;for(const et of je)if(!de.circle[et]){de.circle[et]=!0;const tt=3*et;if(this._circlesCollide(Qe[tt],Qe[tt+1],Qe[tt+2],he.x,he.y,he.radius)&&(!te||te(this.circleKeys[et])))return X.push(!0),!0}}}_forEachCell(d,g,T,P,B,X,K,te){const he=this._convertToXCellCoord(d),de=this._convertToYCellCoord(g),Ce=this._convertToXCellCoord(T),je=this._convertToYCellCoord(P);for(let Qe=he;Qe<=Ce;Qe++)for(let et=de;et<=je;et++)if(B.call(this,d,g,T,P,this.xCellCount*et+Qe,X,K,te))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,g,T,P,B,X){const K=P-d,te=B-g,he=T+X;return he*he>K*K+te*te}_circleAndRectCollide(d,g,T,P,B,X,K){const te=(X-P)/2,he=Math.abs(d-(P+te));if(he>te+T)return!1;const de=(K-B)/2,Ce=Math.abs(g-(B+de));if(Ce>de+T)return!1;if(he<=te||Ce<=de)return!0;const je=he-te,Qe=Ce-de;return je*je+Qe*Qe<=T*T}}const x={unknown:0,flipRequired:1,flipNotRequired:2},A=Math.tan(85*Math.PI/180);function I(w,d,g,T,P,B,X){const K=i.create();if(g)if("globe"===B.name){const te=i.calculateGlobeLabelMatrix(P,d);i.multiply(K,K,te)}else{const te=at([],X);K[0]=te[0],K[1]=te[1],K[4]=te[2],K[5]=te[3],T||i.rotateZ(K,K,P.angle)}else i.multiply(K,P.labelPlaneMatrix,w);return K}function F(w,d,g,T,P,B,X){const K=I(w,d,g,T,P,B,X);return"globe"===B.name&&g||(K[2]=K[6]=K[10]=K[14]=0),K}function U(w,d,g,T,P,B,X){if(g){if("globe"===B.name){const K=I(w,d,g,T,P,B,X);return i.invert(K,K),i.multiply(K,w,K),K}{const K=i.clone(w),te=i.identity([]);return te[0]=X[0],te[1]=X[1],te[4]=X[2],te[5]=X[3],i.multiply(K,K,te),T||i.rotateZ(K,K,-P.angle),K}}return P.glCoordMatrix}function $(w,d,g,T){const P=[w,d,g,1];g?i.transformMat4$1(P,P,T):xe(P,P,T);const B=P[3];return P[0]/=B,P[1]/=B,P[2]/=B,P}function q(w,d){return Math.min(.5+w/d*.5,1.5)}function ie(w,d){const g=w[0]/w[3],T=w[1]/w[3];return g>=-d[0]&&g<=d[0]&&T>=-d[1]&&T<=d[1]}function ue(w,d,g,T,P,B,X,K,te,he){const de=g.transform,Ce=T?w.textSizeData:w.iconSizeData,je=i.evaluateSizeForZoom(Ce,g.transform.zoom),Qe="globe"===de.projection.name,et=[256/g.width*2+1,256/g.height*2+1],tt=T?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;tt.clear();let st=null;Qe&&(st=T?w.text.globeExtVertexArray:w.icon.globeExtVertexArray);const Te=w.lineVertexArray,Ge=T?w.text.placedSymbolArray:w.icon.placedSymbolArray,bt=g.transform.width/g.transform.height;let xt,jt=!1;for(let Wt=0;Wt<Ge.length;Wt++){const Gt=Ge.get(Wt),{numGlyphs:ti,writingMode:Jt}=Gt;if(Jt!==i.WritingMode.vertical||jt||xt===i.WritingMode.horizontal||(jt=!0),xt=Jt,(Gt.hidden||Jt===i.WritingMode.vertical)&&!jt){pe(ti,tt);continue}jt=!1;const _i=new i.Point(Gt.tileAnchorX,Gt.tileAnchorY);let{x:Qi,y:ci,z:Ri}=de.projection.projectTilePoint(_i.x,_i.y,he.canonical);if(te){const[Hn,En,qn]=te(_i);Qi+=Hn,ci+=En,Ri+=qn}const yi=[Qi,ci,Ri,1];if(i.transformMat4$1(yi,yi,d),!ie(yi,et)){pe(ti,tt);continue}const Wi=q(g.transform.cameraToCenterDistance,yi[3]),pi=i.evaluateSizeForFeature(Ce,je,Gt),Ii=X?pi/Wi:pi*Wi,rn=$(Qi,ci,Ri,P);if(rn[3]<=0){pe(ti,tt);continue}let Bi={};const qi=X?null:te,Bn=me(Gt,Ii,!1,K,d,P,B,w.glyphOffsetArray,Te,tt,st,rn,_i,Bi,bt,qi,de.projection,he,X);jt=Bn.useVertical,qi&&Bn.needsFlipping&&(Bi={}),(Bn.notEnoughRoom||jt||Bn.needsFlipping&&me(Gt,Ii,!0,K,d,P,B,w.glyphOffsetArray,Te,tt,st,rn,_i,Bi,bt,qi,de.projection,he,X).notEnoughRoom)&&pe(ti,tt)}T?(w.text.dynamicLayoutVertexBuffer.updateData(tt),st&&w.text.globeExtVertexBuffer.updateData(st)):(w.icon.dynamicLayoutVertexBuffer.updateData(tt),st&&w.icon.globeExtVertexBuffer.updateData(st))}function ge(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt){const{lineStartIndex:st,glyphStartIndex:Te,segment:Ge}=K,bt=Te+K.numGlyphs,xt=st+K.lineLength,jt=d.getoffsetX(Te),Wt=d.getoffsetX(bt-1),Gt=Q(w*jt,g,T,P,B,X,Ge,st,xt,te,he,de,Ce,je,!0,Qe,et,tt);if(!Gt)return null;const ti=Q(w*Wt,g,T,P,B,X,Ge,st,xt,te,he,de,Ce,je,!0,Qe,et,tt);return ti?{first:Gt,last:ti}:null}function we(w,d,g,T){return w===i.WritingMode.horizontal&&Math.abs(T)>Math.abs(g)?{useVertical:!0}:w===i.WritingMode.vertical?T>0?{needsFlipping:!0}:null:d!==x.unknown&&(0===(P=g)||Math.abs(T/P)>A)?d===x.flipRequired?{needsFlipping:!0}:null:g<0?{needsFlipping:!0}:null;var P}function me(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt,st,Te,Ge){const bt=d/24,xt=w.lineOffsetX*bt,jt=w.lineOffsetY*bt,{lineStartIndex:Wt,glyphStartIndex:Gt,numGlyphs:ti,segment:Jt,writingMode:_i,flipState:Qi}=w,ci=Wt+w.lineLength,Ri=yi=>{if(de){const[rn,Bi,qi]=yi.up,Bn=he.length;i.updateGlobeVertexNormal(de,Bn+0,rn,Bi,qi),i.updateGlobeVertexNormal(de,Bn+1,rn,Bi,qi),i.updateGlobeVertexNormal(de,Bn+2,rn,Bi,qi),i.updateGlobeVertexNormal(de,Bn+3,rn,Bi,qi)}const[Wi,pi,Ii]=yi.point;i.addDynamicAttributes(he,Wi,pi,Ii,yi.angle)};if(ti>1){const yi=ge(bt,K,xt,jt,g,Ce,je,w,te,B,Qe,tt,!1,st,Te,Ge);if(!yi)return{notEnoughRoom:!0};if(T&&!g){let[Wi,pi,Ii]=yi.first.point,[rn,Bi,qi]=yi.last.point;[Wi,pi]=$(Wi,pi,Ii,X),[rn,Bi]=$(rn,Bi,qi,X);const Bn=we(_i,Qi,(rn-Wi)*et,Bi-pi);if(w.flipState=Bn&&Bn.needsFlipping?x.flipRequired:x.flipNotRequired,Bn)return Bn}Ri(yi.first);for(let Wi=Gt+1;Wi<Gt+ti-1;Wi++){const pi=Q(bt*K.getoffsetX(Wi),xt,jt,g,Ce,je,Jt,Wt,ci,te,B,Qe,tt,!1,!1,st,Te,Ge);if(!pi)return he.length-=4*(Wi-Gt),{notEnoughRoom:!0};Ri(pi)}Ri(yi.last)}else{if(T&&!g){const Wi=$(je.x,je.y,0,P),pi=Wt+Jt+1,Ii=new i.Point(te.getx(pi),te.gety(pi)),rn=$(Ii.x,Ii.y,0,P),Bi=rn[3]>0?rn:N(je,Ii,Wi,1,P,void 0,st,Te.canonical),qi=we(_i,Qi,(Bi[0]-Wi[0])*et,Bi[1]-Wi[1]);if(w.flipState=qi&&qi.needsFlipping?x.flipRequired:x.flipNotRequired,qi)return qi}const yi=Q(bt*K.getoffsetX(Gt),xt,jt,g,Ce,je,Jt,Wt,ci,te,B,Qe,tt,!1,!1,st,Te,Ge);if(!yi)return{notEnoughRoom:!0};Ri(yi)}return{}}function Ee(w,d,g,T,P){const{x:B,y:X,z:K}=T.projectTilePoint(w.x,w.y,d);if(!P)return $(B,X,K,g);const[te,he,de]=P(w);return $(B+te,X+he,K+de,g)}function N(w,d,g,T,P,B,X,K){const te=Ee(w.sub(d)._unit()._add(w),K,P,X,B);return i.sub(te,g,te),i.normalize(te,te),i.scaleAndAdd(te,g,te,T)}function Q(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt,st,Te){const Ge=T?w-d:w+d;let bt=Ge>0?1:-1,xt=0;T&&(bt*=-1,xt=Math.PI),bt<0&&(xt+=Math.PI);let jt=K+X+(bt>0?0:1)|0,Wt=P,Gt=P,ti=0,Jt=0;const _i=Math.abs(Ge),Qi=[],ci=[];let Ri=B,yi=Ri;const Wi=()=>N(yi,Ri,Gt,_i-ti+1,de,je,tt,st.canonical);for(;ti+Jt<=_i;){if(jt+=bt,jt<K||jt>=te)return null;if(Gt=Wt,yi=Ri,Qi.push(Gt),Qe&&ci.push(yi),Ri=new i.Point(he.getx(jt),he.gety(jt)),Wt=Ce[jt],!Wt){const qn=Ee(Ri,st.canonical,de,tt,je);Wt=qn[3]>0?Ce[jt]=qn:Wi()}ti+=Jt,Jt=i.distance(Gt,Wt)}et&&je&&(Ce[jt]&&(Wt=Wi(),Jt=i.distance(Gt,Wt)),Ce[jt]=Wt);const pi=(_i-ti)/Jt,Ii=Ri.sub(yi)._mult(pi)._add(yi),rn=i.sub([],Wt,Gt),Bi=i.scaleAndAdd([],Gt,rn,pi);let qi=[0,0,1],Bn=rn[0],Hn=rn[1];if(Te&&(qi=tt.upVector(st.canonical,Ii.x,Ii.y),0!==qi[0]||0!==qi[1]||1!==qi[2])){const qn=[qi[2],0,-qi[0]],rr=i.cross([],qi,qn);i.normalize(qn,qn),i.normalize(rr,rr),Bn=i.dot(rn,qn),Hn=i.dot(rn,rr)}if(g){const qn=i.cross([],qi,rn);i.normalize(qn,qn),i.scaleAndAdd(Bi,Bi,qn,g*bt)}const En=xt+Math.atan2(Hn,Bn);return Qi.push(Bi),Qe&&ci.push(Ii),{point:Bi,angle:En,path:Qi,tilePath:ci,up:qi}}function pe(w,d){const g=d.length,T=g+4*w;d.resize(T),d.float32.fill(-1/0,4*g,4*T)}function xe(w,d,g){const T=d[0],P=d[1];return w[0]=g[0]*T+g[4]*P+g[12],w[1]=g[1]*T+g[5]*P+g[13],w[3]=g[3]*T+g[7]*P+g[15],w}const Le=100;class qe{constructor(d,g,T=new b(d.width+200,d.height+200,25),P=new b(d.width+200,d.height+200,25)){this.transform=d,this.grid=T,this.ignoredGrid=P,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Le,this.screenBottomBoundary=d.height+Le,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.fogState=g}placeCollisionBox(d,g,T,P,B,X,K,te){let he=T.projectedAnchorX,de=T.projectedAnchorY,Ce=T.projectedAnchorZ;const je=T.elevation,Qe=T.tileID,et=d.getProjection();if(je&&Qe){const[Wt,Gt,ti]=et.upVector(Qe.canonical,T.tileAnchorX,T.tileAnchorY),Jt=et.upVectorScale(Qe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;he+=Wt*je*Jt,de+=Gt*je*Jt,Ce+=ti*je*Jt}const tt=this.projectAndGetPerspectiveRatio(K,he,de,Ce,T.tileID,"globe"===et.name||!!je||this.transform.pitch>0,et),st=X*tt.perspectiveRatio,Te=(T.x1*g+P.x-T.padding)*st+tt.point.x,Ge=(T.y1*g+P.y-T.padding)*st+tt.point.y,bt=(T.x2*g+P.x+T.padding)*st+tt.point.x,xt=(T.y2*g+P.y+T.padding)*st+tt.point.y,jt=tt.perspectiveRatio<=.55||tt.occluded;return!this.isInsideGrid(Te,Ge,bt,xt)||!B&&this.grid.hitTest(Te,Ge,bt,xt,te)||jt?{box:[],offscreen:!1,occluded:tt.occluded}:{box:[Te,Ge,bt,xt],offscreen:this.isOffscreen(Te,Ge,bt,xt),occluded:!1}}placeCollisionCircles(d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt){const st=[],Te=this.transform.elevation,Ge=d.getProjection(),bt=Te?Te.getAtTileOffsetFunc(tt,this.transform.center.lat,this.transform.worldSize,Ge):null,xt=new i.Point(T.tileAnchorX,T.tileAnchorY);let{x:jt,y:Wt,z:Gt}=Ge.projectTilePoint(xt.x,xt.y,tt.canonical);if(bt){const[Ii,rn,Bi]=bt(xt);jt+=Ii,Wt+=rn,Gt+=Bi}const ti="globe"===Ge.name,Jt=this.projectAndGetPerspectiveRatio(K,jt,Wt,Gt,tt,ti||!!Te||this.transform.pitch>0,Ge),{perspectiveRatio:_i}=Jt,Qi=(Ce?X/_i:X*_i)/i.ONE_EM,ci=$(jt,Wt,Gt,te),Ri=Jt.signedDistanceFromCamera>0?ge(Qi,B,T.lineOffsetX*Qi,T.lineOffsetY*Qi,!1,ci,xt,T,P,te,{},Te&&!Ce?bt:null,Ce&&!!Te,Ge,tt,Ce):null;let yi=!1,Wi=!1,pi=!0;if(Ri&&!Jt.occluded){const Ii=.5*Qe*_i+et,rn=new i.Point(-100,-100),Bi=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),qi=new _,{first:Bn,last:Hn}=Ri,En=Bn.path.length;let qn=[];for(let Vn=En-1;Vn>=1;Vn--)qn.push(Bn.path[Vn]);for(let Vn=1;Vn<Hn.path.length;Vn++)qn.push(Hn.path[Vn]);const rr=2.5*Ii;he&&(qn=qn.map(([Vn,Ir,vs],_s)=>(bt&&!ti&&(vs=bt(_s<En-1?Bn.tilePath[En-1-_s]:Hn.tilePath[_s-En+2])[2]),$(Vn,Ir,vs,he))),qn.some(Vn=>Vn[3]<=0)&&(qn=[]));let sr=[];if(qn.length>0){let Vn=1/0,Ir=-1/0,vs=1/0,_s=-1/0;for(const cs of qn)Vn=Math.min(Vn,cs[0]),vs=Math.min(vs,cs[1]),Ir=Math.max(Ir,cs[0]),_s=Math.max(_s,cs[1]);Ir>=rn.x&&Vn<=Bi.x&&_s>=rn.y&&vs<=Bi.y&&(sr=[qn.map(cs=>new i.Point(cs[0],cs[1]))],(Vn<rn.x||Ir>Bi.x||vs<rn.y||_s>Bi.y)&&(sr=i.clipLine(sr,rn.x,rn.y,Bi.x,Bi.y)))}for(const Vn of sr){qi.reset(Vn,.25*Ii);let Ir=0;Ir=qi.length<=.5*Ii?1:Math.ceil(qi.paddedLength/rr)+1;for(let vs=0;vs<Ir;vs++){const _s=vs/Math.max(Ir-1,1),cs=qi.lerp(_s),Hr=cs.x+Le,_o=cs.y+Le;st.push(Hr,_o,Ii,0);const Sa=Hr-Ii,dc=_o-Ii,Ds=Hr+Ii,Ur=_o+Ii;if(pi=pi&&this.isOffscreen(Sa,dc,Ds,Ur),Wi=Wi||this.isInsideGrid(Sa,dc,Ds,Ur),!g&&this.grid.hitTestCircle(Hr,_o,Ii,je)&&(yi=!0,!de))return{circles:[],offscreen:!1,collisionDetected:yi,occluded:!1}}}}return{circles:!de&&yi||!Wi?[]:st,offscreen:pi,collisionDetected:yi,occluded:Jt.occluded}}queryRenderedSymbols(d){if(0===d.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const g=[];let T=1/0,P=1/0,B=-1/0,X=-1/0;for(const de of d){const Ce=new i.Point(de.x+Le,de.y+Le);T=Math.min(T,Ce.x),P=Math.min(P,Ce.y),B=Math.max(B,Ce.x),X=Math.max(X,Ce.y),g.push(Ce)}const K=this.grid.query(T,P,B,X).concat(this.ignoredGrid.query(T,P,B,X)),te={},he={};for(const de of K){const Ce=de.key;if(void 0===te[Ce.bucketInstanceId]&&(te[Ce.bucketInstanceId]={}),te[Ce.bucketInstanceId][Ce.featureIndex])continue;const je=[new i.Point(de.x1,de.y1),new i.Point(de.x2,de.y1),new i.Point(de.x2,de.y2),new i.Point(de.x1,de.y2)];i.polygonIntersectsPolygon(g,je)&&(te[Ce.bucketInstanceId][Ce.featureIndex]=!0,void 0===he[Ce.bucketInstanceId]&&(he[Ce.bucketInstanceId]=[]),he[Ce.bucketInstanceId].push(Ce.featureIndex))}return he}insertCollisionBox(d,g,T,P,B){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:P,collisionGroupID:B},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,g,T,P,B){const X=g?this.ignoredGrid:this.grid,K={bucketInstanceId:T,featureIndex:P,collisionGroupID:B};for(let te=0;te<d.length;te+=4)X.insertCircle(K,d[te],d[te+1],d[te+2])}projectAndGetPerspectiveRatio(d,g,T,P,B,X,K){const te=[g,T,P,1];let he=!1;P||this.transform.pitch>0?(i.transformMat4$1(te,te,d),this.fogState&&B&&"globe"!==K.name&&(he=function(je,Qe,et,tt,st,Te){const Ge=Te.calculateFogTileMatrix(st),bt=[Qe,et,tt];return i.transformMat4(bt,bt,Ge),gi(je,bt,Te.pitch,Te._fov)}(this.fogState,g,T,P,B.toUnwrapped(),this.transform)>.9)):xe(te,te,d);const de=te[3];return{point:new i.Point((te[0]/de+1)/2*this.transform.width+Le,(-te[1]/de+1)/2*this.transform.height+Le),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(K)/de*.5,1.5),signedDistanceFromCamera:de,occluded:X&&te[2]>de||he}}isOffscreen(d,g,T,P){return T<Le||d>=this.screenRightBoundary||P<Le||g>this.screenBottomBoundary}isInsideGrid(d,g,T,P){return T>=0&&d<this.gridRightBoundary&&P>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const d=i.identity([]);return i.translate(d,d,[-100,-100,0]),d}}function kt(w,d,g){const T=d.createTileMatrix(w,w.worldSize,g.toUnwrapped());return i.multiply(new Float32Array(16),w.projMatrix,T)}function Dt(w,d,g){if(d.projection.name===g.projection.name)return w.projMatrix;const T=g.clone();return T.setProjection(d.projection),kt(T,d.getProjection(),w)}function ei(w,d,g){return d.name===g.projection.name?w.projMatrix:kt(g,d,w)}class wi{constructor(d,g,T,P){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?g:-g))):P&&T?1:0,this.placed=T}isHidden(){return 0===this.opacity&&!this.placed}}class Mi{constructor(d,g,T,P,B,X=!1){this.text=new wi(d?d.text:null,g,T,B),this.icon=new wi(d?d.icon:null,g,P,B),this.clipped=X}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dn{constructor(d,g,T,P=!1){this.text=d,this.icon=g,this.skipFade=T,this.clipped=P}}class wn{constructor(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]}}class Fn{constructor(d,g,T,P,B){this.bucketInstanceId=d,this.featureIndex=g,this.sourceLayerIndex=T,this.bucketIndex=P,this.tileID=B}}class Qn{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const g=++this.maxGroupID;this.collisionGroups[d]={ID:g,predicate:T=>T.collisionGroupID===g}}return this.collisionGroups[d]}}function lr(w,d,g,T,P){const{horizontalAlign:B,verticalAlign:X}=i.getAnchorAlignment(w),K=-(B-.5)*d,te=-(X-.5)*g,he=i.evaluateVariableOffset(w,T);return new i.Point(K+he[0]*P,te+he[1]*P)}function cr(w,d,g,T,P){const B=new i.Point(w,d);return g&&B._rotate(T?P:-P),B}class Pr{constructor(d,g,T,P,B){this.transform=d.clone(),this.projection=d.projection.name,this.collisionIndex=new qe(this.transform,B),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Qn(T),this.collisionCircleArrays={},this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,g,T,P){const B=T.getBucket(g),X=T.latestFeatureIndex;if(!B||!X||g.id!==B.layerIds[0])return;const K=B.layers[0].layout,te=T.collisionBoxArray,he=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),de=T.tileSize/i.EXTENT,Ce=T.tileID.toUnwrapped();this.transform.setProjection(B.projection);const je=(Qe=T.tileID,et=B.getProjection(),tt=this.transform,et.name===this.projection?tt.calculateProjMatrix(Qe.toUnwrapped()):kt(tt,et,Qe));var Qe,et,tt;const st="map"===K.get("text-pitch-alignment"),Te="map"===K.get("text-rotation-alignment");g.compileFilter();const Ge=g.dynamicFilter(),bt=g.dynamicFilterNeedsFeature(),xt=this.transform.calculatePixelsToTileUnitsMatrix(T),jt=F(je,T.tileID.canonical,st,Te,this.transform,B.getProjection(),xt);let Wt=null;if(st){const Jt=U(je,T.tileID.canonical,st,Te,this.transform,B.getProjection(),xt);Wt=i.multiply([],this.transform.labelPlaneMatrix,Jt)}let Gt=null;Ge&&T.latestFeatureIndex&&(Gt={unwrappedTileID:Ce,dynamicFilter:Ge,dynamicFilterNeedsFeature:bt,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[B.bucketInstanceId]=new Fn(B.bucketInstanceId,X,B.sourceLayerIndex,B.index,T.tileID);const ti={bucket:B,layout:K,posMatrix:je,textLabelPlaneMatrix:jt,labelToScreenMatrix:Wt,clippingData:Gt,scale:he,textPixelRatio:de,holdingForFade:T.holdingForFade(),collisionBoxArray:te,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:i.evaluateSizeForZoom(B.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(P)for(const Jt of B.sortKeyRanges){const{sortKey:_i,symbolInstanceStart:Qi,symbolInstanceEnd:ci}=Jt;d.push({sortKey:_i,symbolInstanceStart:Qi,symbolInstanceEnd:ci,parameters:ti})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:ti})}attemptAnchorPlacement(d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt,st,Te,Ge){const{textOffset0:bt,textOffset1:xt,crossTileID:jt}=je,Wt=[bt,xt],Gt=lr(d,T,P,Wt,B),ti=this.collisionIndex.placeCollisionBox(et,B,g,cr(Gt.x,Gt.y,X,K,this.transform.angle),Ce,te,he,de.predicate);if(st){const Jt=et.getSymbolInstanceIconSize(Ge,this.transform.zoom,je.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(et,Jt,st,cr(Gt.x,Gt.y,X,K,this.transform.angle),Ce,te,he,de.predicate).box.length)return}if(ti.box.length>0){let Jt;return this.prevPlacement&&this.prevPlacement.variableOffsets[jt]&&this.prevPlacement.placements[jt]&&this.prevPlacement.placements[jt].text&&(Jt=this.prevPlacement.variableOffsets[jt].anchor),this.variableOffsets[jt]={textOffset:Wt,width:T,height:P,anchor:d,textScale:B,prevAnchor:Jt},this.markUsedJustification(et,d,je,tt),et.allowVerticalPlacement&&(this.markUsedOrientation(et,tt,je),this.placedOrientations[jt]=tt),{shift:Gt,placedGlyphBoxes:ti}}}placeLayerBucketPart(d,g,T,P){const{bucket:B,layout:X,posMatrix:K,textLabelPlaneMatrix:te,labelToScreenMatrix:he,clippingData:de,textPixelRatio:Ce,holdingForFade:je,collisionBoxArray:Qe,partiallyEvaluatedTextSize:et,partiallyEvaluatedIconSize:tt,collisionGroup:st}=d.parameters,Te=X.get("text-optional"),Ge=X.get("icon-optional"),bt=X.get("text-allow-overlap"),xt=X.get("icon-allow-overlap"),jt="map"===X.get("text-rotation-alignment"),Wt="map"===X.get("text-pitch-alignment"),Gt="none"!==X.get("icon-text-fit"),ti="viewport-y"===X.get("symbol-z-order");this.transform.setProjection(B.projection);let Jt=bt&&(xt||!B.hasIconData()||Ge),_i=xt&&(bt||!B.hasTextData()||Te);!B.collisionArrays&&Qe&&B.deserializeCollisionBoxes(Qe),T&&P&&B.updateCollisionDebugBuffers(this.transform.zoom,Qe);const Qi=(ci,Ri,yi)=>{const{crossTileID:Wi,numVerticalGlyphVertices:pi}=ci;if(de){const Ds={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ur=null;if(de.dynamicFilterNeedsFeature){const Jr=this.retainedQueryData[B.bucketInstanceId];Ur=de.featureIndex.loadFeature({featureIndex:ci.featureIndex,bucketIndex:Jr.bucketIndex,sourceLayerIndex:Jr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,de.dynamicFilter)(Ds,Ur,this.retainedQueryData[B.bucketInstanceId].tileID.canonical,new i.Point(ci.tileAnchorX,ci.tileAnchorY),this.transform.calculateDistanceTileData(de.unwrappedTileID)))return this.placements[Wi]=new dn(!1,!1,!1,!0),void g.add(Wi)}if(g.has(Wi))return;if(je)return void(this.placements[Wi]=new dn(!1,!1,!1));let Ii=!1,rn=!1,Bi=!0,qi=!1,Bn=!1,Hn=null,En={box:null,offscreen:null,occluded:null},qn={box:null,offscreen:null,occluded:null},rr=null,sr=null,Vn=null,Ir=0,vs=0,_s=0;yi.textFeatureIndex?Ir=yi.textFeatureIndex:ci.useRuntimeCollisionCircles&&(Ir=ci.featureIndex),yi.verticalTextFeatureIndex&&(vs=yi.verticalTextFeatureIndex);const cs=Ds=>{Ds.tileID=this.retainedQueryData[B.bucketInstanceId].tileID;const Ur=this.transform.elevation;(Ur||Ds.elevation)&&(Ds.elevation=Ur?Ur.getAtTileOffset(Ds.tileID,Ds.tileAnchorX,Ds.tileAnchorY):0)},Hr=yi.textBox;if(Hr){cs(Hr);const Ds=Jr=>{let Es=i.WritingMode.horizontal;if(B.allowVerticalPlacement&&!Jr&&this.prevPlacement){const fa=this.prevPlacement.placedOrientations[Wi];fa&&(this.placedOrientations[Wi]=fa,Es=fa,this.markUsedOrientation(B,Es,ci))}return Es},Ur=(Jr,Es)=>{if(B.allowVerticalPlacement&&pi>0&&yi.verticalTextBox){for(const fa of B.writingModes)if(fa===i.WritingMode.vertical?(En=Es(),qn=En):En=Jr(),En&&En.box&&En.box.length)break}else En=Jr()};if(X.get("text-variable-anchor")){let Jr=X.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Wi]){const ns=this.prevPlacement.variableOffsets[Wi];Jr.indexOf(ns.anchor)>0&&(Jr=Jr.filter(Is=>Is!==ns.anchor),Jr.unshift(ns.anchor))}const Es=(ns,Is,Uc)=>{const ko=B.getSymbolInstanceTextSize(et,ci,this.transform.zoom,Ri),El=(ns.x2-ns.x1)*ko+2*ns.padding,Ua=(ns.y2-ns.y1)*ko+2*ns.padding,hc=Gt&&!xt?Is:null;hc&&cs(hc);let Wc={box:[],offscreen:!1,occluded:!1};const wu=bt?2*Jr.length:Jr.length;for(let tr=0;tr<wu;++tr){const pc=this.attemptAnchorPlacement(Jr[tr%Jr.length],ns,El,Ua,ko,jt,Wt,Ce,K,st,tr>=Jr.length,ci,Ri,B,Uc,hc,et,tt);if(pc&&(Wc=pc.placedGlyphBoxes,Wc&&Wc.box&&Wc.box.length)){Ii=!0,Hn=pc.shift;break}}return Wc};Ur(()=>Es(Hr,yi.iconBox,i.WritingMode.horizontal),()=>{const ns=yi.verticalTextBox;return ns&&cs(ns),B.allowVerticalPlacement&&!(En&&En.box&&En.box.length)&&pi>0&&ns?Es(ns,yi.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),En&&(Ii=En.box,Bi=En.offscreen,qi=En.occluded);const fa=Ds(!(!En||!En.box));if(!Ii&&this.prevPlacement){const ns=this.prevPlacement.variableOffsets[Wi];ns&&(this.variableOffsets[Wi]=ns,this.markUsedJustification(B,ns.anchor,ci,fa))}}else{const Jr=(Es,fa)=>{const ns=B.getSymbolInstanceTextSize(et,ci,this.transform.zoom,Ri),Is=this.collisionIndex.placeCollisionBox(B,ns,Es,new i.Point(0,0),bt,Ce,K,st.predicate);return Is&&Is.box&&Is.box.length&&(this.markUsedOrientation(B,fa,ci),this.placedOrientations[Wi]=fa),Is};Ur(()=>Jr(Hr,i.WritingMode.horizontal),()=>{const Es=yi.verticalTextBox;return B.allowVerticalPlacement&&pi>0&&Es?(cs(Es),Jr(Es,i.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Ds(!!(En&&En.box&&En.box.length))}}if(rr=En,Ii=rr&&rr.box&&rr.box.length>0,Bi=rr&&rr.offscreen,qi=rr&&rr.occluded,ci.useRuntimeCollisionCircles){const Ds=B.text.placedSymbolArray.get(ci.centerJustifiedTextSymbolIndex>=0?ci.centerJustifiedTextSymbolIndex:ci.verticalPlacedTextSymbolIndex),Ur=i.evaluateSizeForFeature(B.textSizeData,et,Ds),Jr=X.get("text-padding");sr=this.collisionIndex.placeCollisionCircles(B,bt,Ds,B.lineVertexArray,B.glyphOffsetArray,Ur,K,te,he,T,Wt,st.predicate,ci.collisionCircleDiameter*Ur/i.ONE_EM,Jr,this.retainedQueryData[B.bucketInstanceId].tileID),Ii=bt||sr.circles.length>0&&!sr.collisionDetected,Bi=Bi&&sr.offscreen,qi=sr.occluded}if(yi.iconFeatureIndex&&(_s=yi.iconFeatureIndex),yi.iconBox){const Ds=Ur=>{cs(Ur);const Jr=Gt&&Hn?cr(Hn.x,Hn.y,jt,Wt,this.transform.angle):new i.Point(0,0),Es=B.getSymbolInstanceIconSize(tt,this.transform.zoom,ci.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(B,Es,Ur,Jr,xt,Ce,K,st.predicate)};qn&&qn.box&&qn.box.length&&yi.verticalIconBox?(Vn=Ds(yi.verticalIconBox),rn=Vn.box.length>0):(Vn=Ds(yi.iconBox),rn=Vn.box.length>0),Bi=Bi&&Vn.offscreen,Bn=Vn.occluded}const _o=Te||0===ci.numHorizontalGlyphVertices&&0===pi,Sa=Ge||0===ci.numIconVertices;if(_o||Sa?Sa?_o||(rn=rn&&Ii):Ii=rn&&Ii:rn=Ii=rn&&Ii,Ii&&rr&&rr.box&&this.collisionIndex.insertCollisionBox(rr.box,X.get("text-ignore-placement"),B.bucketInstanceId,qn&&qn.box&&vs?vs:Ir,st.ID),rn&&Vn&&this.collisionIndex.insertCollisionBox(Vn.box,X.get("icon-ignore-placement"),B.bucketInstanceId,_s,st.ID),sr&&(Ii&&this.collisionIndex.insertCollisionCircles(sr.circles,X.get("text-ignore-placement"),B.bucketInstanceId,Ir,st.ID),T)){const Ds=B.bucketInstanceId;let Ur=this.collisionCircleArrays[Ds];void 0===Ur&&(Ur=this.collisionCircleArrays[Ds]=new wn);for(let Jr=0;Jr<sr.circles.length;Jr+=4)Ur.circles.push(sr.circles[Jr+0]),Ur.circles.push(sr.circles[Jr+1]),Ur.circles.push(sr.circles[Jr+2]),Ur.circles.push(sr.collisionDetected?1:0)}const dc="globe"!==B.projection.name;Jt=Jt&&(dc||!qi),_i=_i&&(dc||!Bn),this.placements[Wi]=new dn(Ii||Jt,rn||_i,Bi||B.justReloaded),g.add(Wi)};if(ti){const ci=B.getSortedSymbolIndexes(this.transform.angle);for(let Ri=ci.length-1;Ri>=0;--Ri){const yi=ci[Ri];Qi(B.symbolInstances.get(yi),yi,B.collisionArrays[yi])}}else for(let ci=d.symbolInstanceStart;ci<d.symbolInstanceEnd;ci++)Qi(B.symbolInstances.get(ci),ci,B.collisionArrays[ci]);if(T&&B.bucketInstanceId in this.collisionCircleArrays){const ci=this.collisionCircleArrays[B.bucketInstanceId];i.invert(ci.invProjMatrix,K),ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1}markUsedJustification(d,g,T,P){const{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:X,rightJustifiedTextSymbolIndex:K,verticalPlacedTextSymbolIndex:te,crossTileID:he}=T,de=i.getAnchorJustification(g),Ce=P===i.WritingMode.vertical?te:"left"===de?B:"center"===de?X:"right"===de?K:-1;B>=0&&(d.text.placedSymbolArray.get(B).crossTileID=Ce>=0&&B!==Ce?0:he),X>=0&&(d.text.placedSymbolArray.get(X).crossTileID=Ce>=0&&X!==Ce?0:he),K>=0&&(d.text.placedSymbolArray.get(K).crossTileID=Ce>=0&&K!==Ce?0:he),te>=0&&(d.text.placedSymbolArray.get(te).crossTileID=Ce>=0&&te!==Ce?0:he)}markUsedOrientation(d,g,T){const P=g===i.WritingMode.horizontal||g===i.WritingMode.horizontalOnly?g:0,B=g===i.WritingMode.vertical?g:0,{leftJustifiedTextSymbolIndex:X,centerJustifiedTextSymbolIndex:K,rightJustifiedTextSymbolIndex:te,verticalPlacedTextSymbolIndex:he}=T,de=d.text.placedSymbolArray;X>=0&&(de.get(X).placedOrientation=P),K>=0&&(de.get(K).placedOrientation=P),te>=0&&(de.get(te).placedOrientation=P),he>=0&&(de.get(he).placedOrientation=B)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let T=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const P=g?g.symbolFadeChange(d):1,B=g?g.opacities:{},X=g?g.variableOffsets:{},K=g?g.placedOrientations:{};for(const te in this.placements){const he=this.placements[te],de=B[te];de?(this.opacities[te]=new Mi(de,P,he.text,he.icon,null,he.clipped),T=T||he.text!==de.text.placed||he.icon!==de.icon.placed):(this.opacities[te]=new Mi(null,P,he.text,he.icon,he.skipFade,he.clipped),T=T||he.text||he.icon)}for(const te in B){const he=B[te];if(!this.opacities[te]){const de=new Mi(he,P,!1,!1);de.isHidden()||(this.opacities[te]=de,T=T||he.text.placed||he.icon.placed)}}for(const te in X)this.variableOffsets[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.variableOffsets[te]=X[te]);for(const te in K)this.placedOrientations[te]||!this.opacities[te]||this.opacities[te].isHidden()||(this.placedOrientations[te]=K[te]);T?this.lastPlacementChangeTime=d:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:d)}updateLayerOpacities(d,g){const T=new Set;for(const P of g){const B=P.getBucket(d);B&&P.latestFeatureIndex&&d.id===B.layerIds[0]&&this.updateBucketOpacities(B,T,P.collisionBoxArray)}}updateBucketOpacities(d,g,T){d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const P=d.layers[0].layout,B=!!d.layers[0].dynamicFilter(),X=new Mi(null,0,!1,!1,!0),K=P.get("text-allow-overlap"),te=P.get("icon-allow-overlap"),he=P.get("text-variable-anchor"),de="map"===P.get("text-rotation-alignment"),Ce="map"===P.get("text-pitch-alignment"),je="none"!==P.get("icon-text-fit"),Qe=new Mi(null,0,K&&(te||!d.hasIconData()||P.get("icon-optional")),te&&(K||!d.hasTextData()||P.get("text-optional")),!0);!d.collisionArrays&&T&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(T);const et=(st,Te,Ge)=>{for(let bt=0;bt<Te/4;bt++)st.opacityVertexArray.emplaceBack(Ge)};let tt=0;for(let st=0;st<d.symbolInstances.length;st++){const Te=d.symbolInstances.get(st),{numHorizontalGlyphVertices:Ge,numVerticalGlyphVertices:bt,crossTileID:xt,numIconVertices:jt}=Te,Wt=g.has(xt);let Gt=this.opacities[xt];Wt?Gt=X:Gt||(Gt=Qe,this.opacities[xt]=Gt),g.add(xt);const ti=Ge>0||bt>0,Jt=jt>0,_i=this.placedOrientations[xt],Qi=_i===i.WritingMode.vertical,ci=_i===i.WritingMode.horizontal||_i===i.WritingMode.horizontalOnly;if(!ti&&!Jt||Gt.isHidden()||tt++,ti){const Ri=va(Gt.text);et(d.text,Ge,Qi?as:Ri),et(d.text,bt,ci?as:Ri);const yi=Gt.text.isHidden(),{leftJustifiedTextSymbolIndex:Wi,centerJustifiedTextSymbolIndex:pi,rightJustifiedTextSymbolIndex:Ii,verticalPlacedTextSymbolIndex:rn}=Te,Bi=d.text.placedSymbolArray,qi=yi||Qi?1:0;Wi>=0&&(Bi.get(Wi).hidden=qi),pi>=0&&(Bi.get(pi).hidden=qi),Ii>=0&&(Bi.get(Ii).hidden=qi),rn>=0&&(Bi.get(rn).hidden=yi||ci?1:0);const Bn=this.variableOffsets[xt];Bn&&this.markUsedJustification(d,Bn.anchor,Te,_i);const Hn=this.placedOrientations[xt];Hn&&(this.markUsedJustification(d,"left",Te,Hn),this.markUsedOrientation(d,Hn,Te))}if(Jt){const Ri=va(Gt.icon),{placedIconSymbolIndex:yi,verticalPlacedIconSymbolIndex:Wi}=Te,pi=d.icon.placedSymbolArray,Ii=Gt.icon.isHidden()?1:0;yi>=0&&(et(d.icon,jt,Qi?as:Ri),pi.get(yi).hidden=Ii),Wi>=0&&(et(d.icon,Te.numVerticalIconVertices,ci?as:Ri),pi.get(Wi).hidden=Ii)}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Ri=d.collisionArrays[st];if(Ri){let yi=new i.Point(0,0),Wi=!0;if(Ri.textBox||Ri.verticalTextBox){if(he){const Ii=this.variableOffsets[xt];Ii?(yi=lr(Ii.anchor,Ii.width,Ii.height,Ii.textOffset,Ii.textScale),de&&yi._rotate(Ce?this.transform.angle:-this.transform.angle)):Wi=!1}B&&(Wi=!Gt.clipped),Ri.textBox&&jr(d.textCollisionBox.collisionVertexArray,Gt.text.placed,!Wi||Qi,yi.x,yi.y),Ri.verticalTextBox&&jr(d.textCollisionBox.collisionVertexArray,Gt.text.placed,!Wi||ci,yi.x,yi.y)}const pi=Wi&&!(ci||!Ri.verticalIconBox);Ri.iconBox&&jr(d.iconCollisionBox.collisionVertexArray,Gt.icon.placed,pi,je?yi.x:0,je?yi.y:0),Ri.verticalIconBox&&jr(d.iconCollisionBox.collisionVertexArray,Gt.icon.placed,!pi,je?yi.x:0,je?yi.y:0)}}}if(d.fullyClipped=0===tt,d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){const st=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=st.invProjMatrix,d.placementViewportMatrix=st.viewportMatrix,d.collisionCircleArray=st.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return 0===this.fadeDuration?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,g){const T=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*T>d}setStale(){this.stale=!0}}function jr(w,d,g,T,P){w.emplaceBack(d?1:0,g?1:0,T||0,P||0),w.emplaceBack(d?1:0,g?1:0,T||0,P||0),w.emplaceBack(d?1:0,g?1:0,T||0,P||0),w.emplaceBack(d?1:0,g?1:0,T||0,P||0)}const Wr=Math.pow(2,25),Dr=Math.pow(2,24),Kn=Math.pow(2,17),ss=Math.pow(2,16),$n=Math.pow(2,9),Zr=Math.pow(2,8),fl=Math.pow(2,1);function va(w){if(0===w.opacity&&!w.placed)return 0;if(1===w.opacity&&w.placed)return 4294967295;const d=w.placed?1:0,g=Math.floor(127*w.opacity);return g*Wr+d*Dr+g*Kn+d*ss+g*$n+d*Zr+g*fl+d}const as=0;class jo{constructor(d){this._sortAcrossTiles="viewport-y"!==d.layout.get("symbol-z-order")&&void 0!==d.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(d,g,T,P,B){const X=this._bucketParts;for(;this._currentTileIndex<d.length;)if(g.getBucketParts(X,P,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,X.sort((K,te)=>K.sortKey-te.sortKey));this._currentPartIndex<X.length;){const K=X[this._currentPartIndex];if(g.placeLayerBucketPart(K,this._seenCrossTileIDs,T,0===K.symbolInstanceStart),this._currentPartIndex++,B())return!0}return!1}}class nc{constructor(d,g,T,P,B,X,K,te){this.placement=new Pr(d,B,X,K,te),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(d,g,T){const P=i.exported.now(),B=()=>{const X=i.exported.now()-P;return!this._forceFullPlacement&&X>2};for(;this._currentPlacementIndex>=0;){const X=g[d[this._currentPlacementIndex]],K=this.placement.collisionIndex.transform.zoom;if("symbol"===X.type&&(!X.minzoom||X.minzoom<=K)&&(!X.maxzoom||X.maxzoom>K)){if(this._inProgressLayer||(this._inProgressLayer=new jo(X)),this._inProgressLayer.continuePlacement(T[X.source],this.placement,this._showCollisionBoxes,X,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const Oo=512/i.EXTENT/2;class qr{constructor(d,g,T){this.tileID=d,this.bucketInstanceId=T,this.index=new i.KDBush(g.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const P=d.canonical.x*i.EXTENT,B=d.canonical.y*i.EXTENT;for(let X=0;X<g.length;X++){const{key:K,crossTileID:te,tileAnchorX:he,tileAnchorY:de}=g.get(X),Ce=Math.floor((P+he)*Oo),je=Math.floor((B+de)*Oo);this.index.add(Ce,je),this.keys.push(K),this.crossTileIDs.push(te)}this.index.finish()}findMatches(d,g,T){const P=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),B=Oo/Math.pow(2,g.canonical.z-this.tileID.canonical.z),X=g.canonical.x*i.EXTENT,K=g.canonical.y*i.EXTENT;for(let te=0;te<d.length;te++){const he=d.get(te);if(he.crossTileID)continue;const{key:de,tileAnchorX:Ce,tileAnchorY:je}=he,Qe=Math.floor((X+Ce)*B),et=Math.floor((K+je)*B),tt=this.index.range(Qe-P,et-P,Qe+P,et+P);for(const st of tt){const Te=this.crossTileIDs[st];if(this.keys[st]===de&&!T.has(Te)){T.add(Te),he.crossTileID=Te;break}}}}}class mo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Sc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const g=Math.round((d-this.lng)/360);if(0!==g)for(const T in this.indexes){const P=this.indexes[T],B={};for(const X in P){const K=P[X];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+g),B[K.tileID.key]=K}this.indexes[T]=B}this.lng=d}addBucket(d,g,T){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let B=0;B<g.symbolInstances.length;B++)g.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]=new Set);const P=this.usedCrossTileIDs[d.overscaledZ];for(const B in this.indexes){const X=this.indexes[B];if(Number(B)>d.overscaledZ)for(const K in X){const te=X[K];te.tileID.isChildOf(d)&&te.findMatches(g.symbolInstances,d,P)}else{const K=X[d.scaledTo(Number(B)).key];K&&K.findMatches(g.symbolInstances,d,P)}}for(let B=0;B<g.symbolInstances.length;B++){const X=g.symbolInstances.get(B);X.crossTileID||(X.crossTileID=T.generate(),P.add(X.crossTileID))}return void 0===this.indexes[d.overscaledZ]&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new qr(d,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(d,g){for(const T of g.crossTileIDs)this.usedCrossTileIDs[d].delete(T)}removeStaleBuckets(d){let g=!1;for(const T in this.indexes){const P=this.indexes[T];for(const B in P)d[P[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,P[B]),delete P[B],g=!0)}return g}}class La{constructor(){this.layerIndexes={},this.crossTileIDs=new mo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,g,T,P){let B=this.layerIndexes[d.id];void 0===B&&(B=this.layerIndexes[d.id]=new Sc);let X=!1;const K={};"globe"!==P.name&&B.handleWrapJump(T);for(const te of g){const he=te.getBucket(d);he&&d.id===he.layerIds[0]&&(he.bucketInstanceId||(he.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(te.tileID,he,this.crossTileIDs)&&(X=!0),K[he.bucketInstanceId]=!0)}return B.removeStaleBuckets(K)&&(X=!0),X}pruneUnusedLayers(d){const g={};d.forEach(T=>{g[T]=!0});for(const T in this.layerIndexes)g[T]||delete this.layerIndexes[T]}}const ea=(w,d)=>i.emitValidationErrors(w,d&&d.filter(g=>"source.canvas"!==g.identifier)),Il=i.pick(it,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Yc=i.pick(it,["setCenter","setZoom","setBearing","setPitch"]),gu={version:8,layers:[],sources:{}},Ll={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class xr extends i.Evented{constructor(d,g={}){super(),this.map=d,this.dispatcher=new Fi(rt(),this),this.imageManager=new Xt,this.imageManager.setEventedParent(this),this.glyphManager=new i.GlyphManager(d._requestManager,g.localFontFamily?i.LocalGlyphMode.all:g.localIdeographFontFamily?i.LocalGlyphMode.ideographs:i.LocalGlyphMode.none,g.localFontFamily||g.localIdeographFontFamily),this.crossTileSymbolIndex=new La,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());const T=this;this._rtlTextPluginCallback=xr.registerForPluginStateChange(P=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(B,X)=>{if(i.triggerPluginCompletionEvent(B),X&&X.every(K=>K))for(const K in T._sourceCaches){const te=T._sourceCaches[K],he=te.getSource().type;"vector"!==he&&"geojson"!==he||te.reload()}})}),this.on("data",P=>{if("source"!==P.dataType||"metadata"!==P.sourceDataType)return;const B=this.getSource(P.sourceId);if(B&&B.vectorLayerIds)for(const X in this._layers){const K=this._layers[X];K.source===B.id&&this._validateLayer(K)}})}loadURL(d,g={}){this.fire(new i.Event("dataloading",{dataType:"style"}));const T="boolean"==typeof g.validate?g.validate:!i.isMapboxURL(d);d=this.map._requestManager.normalizeStyleURL(d,g.accessToken);const P=this.map._requestManager.transformRequest(d,i.ResourceType.Style);this._request=i.getJSON(P,(B,X)=>{this._request=null,B?this.fire(new i.ErrorEvent(B)):X&&this._load(X,T)})}loadJSON(d,g={}){this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.exported.frame(()=>{this._request=null,this._load(d,!1!==g.validate)})}loadEmpty(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(gu,!1)}_updateLayerCount(d,g){const T=g?1:-1;d.is3D()&&(this._num3DLayers+=T),"circle"===d.type&&(this._numCircleLayers+=T),"symbol"===d.type&&(this._numSymbolLayers+=T)}_load(d,g){if(g&&ea(this,i.validateStyle(d)))return;this._loaded=!0,this.stylesheet=i.clone$1(d),this._updateMapProjection();for(const P in d.sources)this.addSource(P,d.sources[P],{validate:!1});this._changed=!1,d.sprite?this._loadSprite(d.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(d.glyphs);const T=fe(this.stylesheet.layers);this._order=T.map(P=>P.id),this._layers={},this._serializedLayers={};for(const P of T){const B=i.createStyleLayer(P);B.setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new dt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(d){d?this.stylesheet.projection=d:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(d){this._spriteRequest=function(g,T,P){let B,X,K;const te=i.exported.devicePixelRatio>1?"@2x":"";let he=i.getJSON(T.transformRequest(T.normalizeSpriteURL(g,te,".json"),i.ResourceType.SpriteJSON),(je,Qe)=>{he=null,K||(K=je,B=Qe,Ce())}),de=i.getImage(T.transformRequest(T.normalizeSpriteURL(g,te,".png"),i.ResourceType.SpriteImage),(je,Qe)=>{de=null,K||(K=je,X=Qe,Ce())});function Ce(){if(K)P(K);else if(B&&X){const je=i.exported.getImageData(X),Qe={};for(const et in B){const{width:tt,height:st,x:Te,y:Ge,sdf:bt,pixelRatio:xt,stretchX:jt,stretchY:Wt,content:Gt}=B[et],ti=new i.RGBAImage({width:tt,height:st});i.RGBAImage.copy(je,ti,{x:Te,y:Ge},{x:0,y:0},{width:tt,height:st}),Qe[et]={data:ti,pixelRatio:xt,sdf:bt,stretchX:jt,stretchY:Wt,content:Gt}}P(null,Qe)}}return{cancel(){he&&(he.cancel(),he=null),de&&(de.cancel(),de=null)}}}(d,this.map._requestManager,(g,T)=>{if(this._spriteRequest=null,g)this.fire(new i.ErrorEvent(g));else if(T)for(const P in T)this.imageManager.addImage(P,T[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new i.Event("data",{dataType:"style"}))})}_validateLayer(d){const g=this.getSource(d.source);if(!g)return;const T=d.sourceLayer;T&&("geojson"===g.type||g.vectorLayerIds&&-1===g.vectorLayerIds.indexOf(T))&&this.fire(new i.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${g.id}" as specified by style layer "${d.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this._sourceCaches)if(!this._sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(d){const g=[];for(const T of d){const P=this._layers[T];"custom"!==P.type&&g.push(P.serialize())}return g}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const d in this._sourceCaches)if(this._sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(d){return!!this.terrain&&("function"==typeof d.isLayerDraped?d.isLayerDraped():Ll[d.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(d){if(!this._loaded)return;const g=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(P.length||B.length)&&this._updateWorkerLayers(P,B);for(const X in this._updatedSources){const K=this._updatedSources[X];"reload"===K?this._reloadSource(X):"clear"===K&&this._clearSource(X)}this._updateTilesForChangedImages();for(const X in this._updatedPaintProps)this._layers[X].updateTransitions(d);this.light.updateTransitions(d),this.fog&&this.fog.updateTransitions(d),this._resetUpdates()}const T={};for(const P in this._sourceCaches){const B=this._sourceCaches[P];T[P]=B.used,B.used=!1}for(const P of this._order){const B=this._layers[P];if(B.recalculate(d,this._availableImages),!B.isHidden(d.zoom)){const K=this._getLayerSourceCache(B);K&&(K.used=!0)}const X=this.map.painter;if(X){const K=B.getProgramIds();if(!K)continue;const te=B.getProgramConfiguration(d.zoom);for(const he of K)X.useProgram(he,te)}}for(const P in T){const B=this._sourceCaches[P];T[P]!==B.used&&B.getSource().fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light.recalculate(d),this.terrain&&this.terrain.recalculate(d),this.fog&&this.fog.recalculate(d),this.z=d.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new i.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const g in this._sourceCaches)this._sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateWorkerLayers(d,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(d),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(d){if(this._checkLoaded(),ea(this,i.validateStyle(d)))return!1;(d=i.clone$1(d)).layers=fe(d.layers);const g=function(P,B){if(!P)return[{command:it.setStyle,args:[B]}];let X=[];try{if(!V(P.version,B.version))return[{command:it.setStyle,args:[B]}];V(P.center,B.center)||X.push({command:it.setCenter,args:[B.center]}),V(P.zoom,B.zoom)||X.push({command:it.setZoom,args:[B.zoom]}),V(P.bearing,B.bearing)||X.push({command:it.setBearing,args:[B.bearing]}),V(P.pitch,B.pitch)||X.push({command:it.setPitch,args:[B.pitch]}),V(P.sprite,B.sprite)||X.push({command:it.setSprite,args:[B.sprite]}),V(P.glyphs,B.glyphs)||X.push({command:it.setGlyphs,args:[B.glyphs]}),V(P.transition,B.transition)||X.push({command:it.setTransition,args:[B.transition]}),V(P.light,B.light)||X.push({command:it.setLight,args:[B.light]}),V(P.fog,B.fog)||X.push({command:it.setFog,args:[B.fog]}),V(P.projection,B.projection)||X.push({command:it.setProjection,args:[B.projection]});const K={},te=[];!function(Ce,je,Qe,et){let tt;for(tt in je=je||{},Ce=Ce||{})Ce.hasOwnProperty(tt)&&(je.hasOwnProperty(tt)||Pe(tt,Qe,et));for(tt in je){if(!je.hasOwnProperty(tt))continue;const st=je[tt];Ce.hasOwnProperty(tt)?V(Ce[tt],st)||("geojson"===Ce[tt].type&&"geojson"===st.type&&le(Ce,je,tt)?Qe.push({command:it.setGeoJSONSourceData,args:[tt,st.data]}):It(tt,je,Qe,et)):Tt(tt,je,Qe)}}(P.sources,B.sources,te,K);const he=[];P.layers&&P.layers.forEach(Ce=>{Ce.source&&K[Ce.source]?X.push({command:it.removeLayer,args:[Ce.id]}):he.push(Ce)});let de=P.terrain;de&&K[de.source]&&(X.push({command:it.setTerrain,args:[void 0]}),de=void 0),X=X.concat(te),V(de,B.terrain)||X.push({command:it.setTerrain,args:[B.terrain]}),function(Ce,je,Qe){je=je||[];const et=(Ce=Ce||[]).map(c),tt=je.map(c),st=Ce.reduce(h,{}),Te=je.reduce(h,{}),Ge=et.slice(),bt=Object.create(null);let xt,jt,Wt,Gt,ti,Jt,_i;for(xt=0,jt=0;xt<et.length;xt++)Wt=et[xt],Te.hasOwnProperty(Wt)?jt++:(Qe.push({command:it.removeLayer,args:[Wt]}),Ge.splice(Ge.indexOf(Wt,jt),1));for(xt=0,jt=0;xt<tt.length;xt++)Wt=tt[tt.length-1-xt],Ge[Ge.length-1-xt]!==Wt&&(st.hasOwnProperty(Wt)?(Qe.push({command:it.removeLayer,args:[Wt]}),Ge.splice(Ge.lastIndexOf(Wt,Ge.length-jt),1)):jt++,Jt=Ge[Ge.length-xt],Qe.push({command:it.addLayer,args:[Te[Wt],Jt]}),Ge.splice(Ge.length-xt,0,Wt),bt[Wt]=!0);for(xt=0;xt<tt.length;xt++)if(Wt=tt[xt],Gt=st[Wt],ti=Te[Wt],!bt[Wt]&&!V(Gt,ti))if(V(Gt.source,ti.source)&&V(Gt["source-layer"],ti["source-layer"])&&V(Gt.type,ti.type)){for(_i in o(Gt.layout,ti.layout,Qe,Wt,null,it.setLayoutProperty),o(Gt.paint,ti.paint,Qe,Wt,null,it.setPaintProperty),V(Gt.filter,ti.filter)||Qe.push({command:it.setFilter,args:[Wt,ti.filter]}),V(Gt.minzoom,ti.minzoom)&&V(Gt.maxzoom,ti.maxzoom)||Qe.push({command:it.setLayerZoomRange,args:[Wt,ti.minzoom,ti.maxzoom]}),Gt)Gt.hasOwnProperty(_i)&&"layout"!==_i&&"paint"!==_i&&"filter"!==_i&&"metadata"!==_i&&"minzoom"!==_i&&"maxzoom"!==_i&&(0===_i.indexOf("paint.")?o(Gt[_i],ti[_i],Qe,Wt,_i.slice(6),it.setPaintProperty):V(Gt[_i],ti[_i])||Qe.push({command:it.setLayerProperty,args:[Wt,_i,ti[_i]]}));for(_i in ti)ti.hasOwnProperty(_i)&&!Gt.hasOwnProperty(_i)&&"layout"!==_i&&"paint"!==_i&&"filter"!==_i&&"metadata"!==_i&&"minzoom"!==_i&&"maxzoom"!==_i&&(0===_i.indexOf("paint.")?o(Gt[_i],ti[_i],Qe,Wt,_i.slice(6),it.setPaintProperty):V(Gt[_i],ti[_i])||Qe.push({command:it.setLayerProperty,args:[Wt,_i,ti[_i]]}))}else Qe.push({command:it.removeLayer,args:[Wt]}),Jt=Ge[Ge.lastIndexOf(Wt)+1],Qe.push({command:it.addLayer,args:[ti,Jt]})}(he,B.layers,X)}catch(K){console.warn("Unable to compute style diff:",K),X=[{command:it.setStyle,args:[B]}]}return X}(this.serialize(),d).filter(P=>!(P.command in Yc));if(0===g.length)return!1;const T=g.filter(P=>!(P.command in Il));if(T.length>0)throw new Error(`Unimplemented: ${T.map(P=>P.command).join(", ")}.`);return g.forEach(P=>{"setTransition"!==P.command&&"setProjection"!==P.command&&this[P.command].apply(this,P.args)}),this.stylesheet=d,this._updateMapProjection(),!0}addImage(d,g){return this.getImage(d)?this.fire(new i.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(d,g),this._afterImageUpdated(d),this)}updateImage(d,g){this.imageManager.updateImage(d,g)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){return this.getImage(d)?(this.imageManager.removeImage(d),this._afterImageUpdated(d),this):this.fire(new i.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(d,g,T={}){if(this._checkLoaded(),void 0!==this.getSource(d))throw new Error("There is already a source with this ID");if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(i.validateSource,`sources.${d}`,g,null,T))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const P=Ke(d,g,this.dispatcher,this);P.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(d),source:P.serialize(),sourceId:d}));const B=X=>{const K=(X?"symbol:":"other:")+d,te=this._sourceCaches[K]=new i.SourceCache(K,P,X);(X?this._symbolSourceCaches:this._otherSourceCaches)[d]=te,te.style=this,te.onAdd(this.map)};B(!1),"vector"!==g.type&&"geojson"!==g.type||B(!0),P.onAdd&&P.onAdd(this.map),this._changed=!0}removeSource(d){this._checkLoaded();const g=this.getSource(d);if(!g)throw new Error("There is no source with this ID");for(const P in this._layers)if(this._layers[P].source===d)return this.fire(new i.ErrorEvent(new Error(`Source "${d}" cannot be removed while layer "${P}" is using it.`)));if(this.terrain&&this.terrain.get().source===d)return this.fire(new i.ErrorEvent(new Error(`Source "${d}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(d);for(const P of T)delete this._sourceCaches[P.id],delete this._updatedSources[P.id],P.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:P.getSource().id})),P.setEventedParent(null),P.clearTiles();return delete this._otherSourceCaches[d],delete this._symbolSourceCaches[d],g.setEventedParent(null),g.onRemove&&g.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(d,g){this._checkLoaded(),this.getSource(d).setData(g),this._changed=!0}getSource(d){const g=this._getSourceCache(d);return g&&g.getSource()}_getSources(){const d=[];for(const g in this._otherSourceCaches){const T=this._getSourceCache(g);T&&d.push(T.getSource())}return d}addLayer(d,g,T={}){this._checkLoaded();const P=d.id;if(this.getLayer(P))return void this.fire(new i.ErrorEvent(new Error(`Layer with id "${P}" already exists on this map`)));let B;if("custom"===d.type){if(ea(this,i.validateCustomStyleLayer(d)))return;B=i.createStyleLayer(d)}else{if("object"==typeof d.source&&(this.addSource(P,d.source),d=i.clone$1(d),d=i.extend(d,{source:P})),this._validate(i.validateLayer,`layers.${P}`,d,{arrayIndex:-1},T))return;B=i.createStyleLayer(d),this._validateLayer(B),B.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}const X=g?this._order.indexOf(g):this._order.length;if(g&&-1===X)return void this.fire(new i.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`)));this._order.splice(X,0,P),this._layerOrderChanged=!0,this._layers[P]=B;const K=this._getLayerSourceCache(B);if(this._removedLayers[P]&&B.source&&K&&"custom"!==B.type){const te=this._removedLayers[P];delete this._removedLayers[P],te.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",K.pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(d,g){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===g)return;const T=this._order.indexOf(d);this._order.splice(T,1);const P=g?this._order.indexOf(g):this._order.length;g&&-1===P?this.fire(new i.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`))):(this._order.splice(P,0,d),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(d){this._checkLoaded();const g=this._layers[d];if(!g)return void this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be removed.`)));g.setEventedParent(null),this._updateLayerCount(g,!1);const T=this._order.indexOf(d);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=g,delete this._layers[d],delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],g.onRemove&&g.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(d){return this._layers[d]}hasLayer(d){return d in this._layers}hasLayerType(d){for(const g in this._layers)if(this._layers[g].type===d)return!0;return!1}setLayerZoomRange(d,g,T){this._checkLoaded();const P=this.getLayer(d);P?P.minzoom===g&&P.maxzoom===T||(null!=g&&(P.minzoom=g),null!=T&&(P.maxzoom=T),this._updateLayer(P)):this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(d,g,T={}){this._checkLoaded();const P=this.getLayer(d);if(P){if(!V(P.filter,g))return null==g?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(i.validateFilter,`layers.${P.id}.filter`,g,{layerType:P.type},T)||(P.filter=i.clone$1(g),this._updateLayer(P)))}else this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be filtered.`)))}getFilter(d){const g=this.getLayer(d);return g&&i.clone$1(g.filter)}setLayoutProperty(d,g,T,P={}){this._checkLoaded();const B=this.getLayer(d);B?V(B.getLayoutProperty(g),T)||(B.setLayoutProperty(g,T,P),this._updateLayer(B)):this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(d,g){const T=this.getLayer(d);if(T)return T.getLayoutProperty(g);this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style.`)))}setPaintProperty(d,g,T,P={}){this._checkLoaded();const B=this.getLayer(d);B?V(B.getPaintProperty(g),T)||(B.setPaintProperty(g,T,P)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new i.ErrorEvent(new Error(`The layer '${d}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(d,g){const T=this.getLayer(d);return T&&T.getPaintProperty(g)}setFeatureState(d,g){this._checkLoaded();const T=d.source,P=d.sourceLayer,B=this.getSource(T);if(!B)return void this.fire(new i.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const X=B.type;if("geojson"===X&&P)return void this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===X&&!P)return void this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===d.id&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided.")));const K=this._getSourceCaches(T);for(const te of K)te.setFeatureState(P,d.id,g)}removeFeatureState(d,g){this._checkLoaded();const T=d.source,P=this.getSource(T);if(!P)return void this.fire(new i.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const B=P.type,X="vector"===B?d.sourceLayer:void 0;if("vector"===B&&!X)return void this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(g&&"string"!=typeof d.id&&"number"!=typeof d.id)return void this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const K=this._getSourceCaches(T);for(const te of K)te.removeFeatureState(X,d.id,g)}getFeatureState(d){this._checkLoaded();const g=d.source,T=d.sourceLayer,P=this.getSource(g);if(P){if("vector"!==P.type||T)return void 0===d.id&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(g)[0].getFeatureState(T,d.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const d={};for(const g in this._sourceCaches){const T=this._sourceCaches[g].getSource();d[T.id]||(d[T.id]=T.serialize())}return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:d,layers:this._serializeLayers(this._order)},g=>void 0!==g)}_updateLayer(d){this._updatedLayers[d.id]=!0;const g=this._getLayerSourceCache(d);d.source&&!this._updatedSources[d.source]&&g&&"raster"!==g.getSource().type&&(this._updatedSources[d.source]="reload",g.pause()),this._changed=!0,d.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(d){const g=X=>"fill-extrusion"===this._layers[X].type,T={},P=[];for(let X=this._order.length-1;X>=0;X--){const K=this._order[X];if(g(K)){T[K]=X;for(const te of d){const he=te[K];if(he)for(const de of he)P.push(de)}}}P.sort((X,K)=>K.intersectionZ-X.intersectionZ);const B=[];for(let X=this._order.length-1;X>=0;X--){const K=this._order[X];if(g(K))for(let te=P.length-1;te>=0;te--){const he=P[te].feature;if(T[he.layer.id]<X)break;B.push(he),P.pop()}else for(const te of d){const he=te[K];if(he)for(const de of he)B.push(de.feature)}}return B}queryRenderedFeatures(d,g,T){g&&g.filter&&this._validate(i.validateFilter,"queryRenderedFeatures.filter",g.filter,null,g);const P={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const te of g.layers){const he=this._layers[te];if(!he)return this.fire(new i.ErrorEvent(new Error(`The layer '${te}' does not exist in the map's style and cannot be queried for features.`))),[];P[he.source]=!0}}const B=[];g.availableImages=this._availableImages;const X=g&&g.layers?g.layers.some(te=>{const he=this.getLayer(te);return he&&he.is3D()}):this.has3DLayers(),K=bn.createFromScreenPoints(d,T);for(const te in this._sourceCaches){const he=this._sourceCaches[te].getSource().id;g.layers&&!P[he]||B.push(Re(this._sourceCaches[te],this._layers,this._serializedLayers,K,g,T,X,!!this.map._showQueryGeometry))}return this.placement&&B.push(function(te,he,de,Ce,je,Qe,et){const tt={},st=Qe.queryRenderedSymbols(Ce),Te=[];for(const Ge of Object.keys(st).map(Number))Te.push(et[Ge]);Te.sort(ft);for(const Ge of Te){const bt=Ge.featureIndex.lookupSymbolFeatures(st[Ge.bucketInstanceId],he,Ge.bucketIndex,Ge.sourceLayerIndex,je.filter,je.layers,je.availableImages,te);for(const xt in bt){const jt=tt[xt]=tt[xt]||[],Wt=bt[xt];Wt.sort((Gt,ti)=>{const Jt=Ge.featureSortOrder;if(Jt){const _i=Jt.indexOf(Gt.featureIndex);return Jt.indexOf(ti.featureIndex)-_i}return ti.featureIndex-Gt.featureIndex});for(const Gt of Wt)jt.push(Gt)}}for(const Ge in tt)tt[Ge].forEach(bt=>{const xt=bt.feature,jt=de(te[Ge]);if(!jt)return;const Wt=jt.getFeatureState(xt.layer["source-layer"],xt.id);xt.source=xt.layer.source,xt.layer["source-layer"]&&(xt.sourceLayer=xt.layer["source-layer"]),xt.state=Wt});return tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),K.screenGeometry,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(d,g){g&&g.filter&&this._validate(i.validateFilter,"querySourceFeatures.filter",g.filter,null,g);const T=this._getSourceCaches(d);let P=[];for(const B of T)P=P.concat(He(B,g));return P}addSourceType(d,g,T){return xr.getSourceType(d)?T(new Error(`A source type called "${d}" already exists.`)):(xr.setSourceType(d,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:g.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(d,g={}){this._checkLoaded();const T=this.light.getLight();let P=!1;for(const X in d)if(!V(d[X],T[X])){P=!0;break}if(!P)return;const B=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(d,g),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(d,g=1){if(this._checkLoaded(),!d)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=d;if(1===g){if("object"==typeof T.source){const P="terrain-dem-src";this.addSource(P,T.source),T=i.clone$1(T),T=i.extend(T,{source:P})}if(this._validate(i.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&g!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,g)}else{const P=this.terrain,B=P.get();for(const X of Object.keys(i.spec.terrain))!T.hasOwnProperty(X)&&i.spec.terrain[X].default&&(T[X]=i.spec.terrain[X].default);for(const X in T)if(!V(T[X],B[X])){P.set(T),this.stylesheet.terrain=T;const K=this._setTransitionParameters({duration:0});P.updateTransitions(K);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(d){const g=this.fog=new Ei(d,this.map.transform);this.stylesheet.fog=d;const T=this._setTransitionParameters({duration:0});g.updateTransitions(T)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const d of this.map._markers)d._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(d){if(this._checkLoaded(),!d)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const g=this.fog,T=g.get();0===Object.keys(d).length&&g.set(d);for(const P in d)if(!V(d[P],T[P])){g.set(d),this.stylesheet.fog=d;const B=this._setTransitionParameters({duration:0});g.updateTransitions(B);break}}else this._createFog(d);this._markersNeedUpdate=!0}_setTransitionParameters(d){return{now:i.exported.now(),transition:i.extend(d,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const d=this._order.filter(T=>this.isLayerDraped(this._layers[T])),g=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...d),this._drapedFirstOrder.push(...g)}_createTerrain(d,g){const T=this.terrain=new ni(d,g);this.stylesheet.terrain=d,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const P=this._setTransitionParameters({duration:0});T.updateTransitions(P)}_force3DLayerUpdate(){for(const d in this._layers){const g=this._layers[d];"fill-extrusion"===g.type&&this._updateLayer(g)}}_forceSymbolLayerUpdate(){for(const d in this._layers){const g=this._layers[d];"symbol"===g.type&&this._updateLayer(g)}}_validate(d,g,T,P,B={}){return(!B||!1!==B.validate)&&ea(this,d.call(i.validateStyle,i.extend({key:g,style:this.serialize(),value:T,styleSpec:i.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this._sourceCaches)this._sourceCaches[d].clearTiles(),this._sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(d){const g=this._getSourceCaches(d);for(const T of g)T.clearTiles()}_reloadSource(d){const g=this._getSourceCaches(d);for(const T of g)T.resume(),T.reload()}_reloadSources(){for(const d of this._getSources())d.reload&&d.reload()}_updateSources(d){for(const g in this._sourceCaches)this._sourceCaches[g].update(d)}_generateCollisionBoxes(){for(const d in this._sourceCaches){const g=this._sourceCaches[d];g.resume(),g.reload()}}_updatePlacement(d,g,T,P,B=!1){let X=!1,K=!1;const te={};for(const he of this._order){const de=this._layers[he];if("symbol"!==de.type)continue;if(!te[de.source]){const je=this._getLayerSourceCache(de);if(!je)continue;te[de.source]=je.getRenderableIds(!0).map(Qe=>je.getTileByID(Qe)).sort((Qe,et)=>et.tileID.overscaledZ-Qe.tileID.overscaledZ||(Qe.tileID.isLessThan(et.tileID)?-1:1))}const Ce=this.crossTileSymbolIndex.addLayer(de,te[de.source],d.center.lng,d.projection);X=X||Ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),B=B||this._layerOrderChanged||0===T,this._layerOrderChanged&&this.fire(new i.Event("neworder")),(B||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.exported.now(),d.zoom))&&(this.pauseablePlacement=new nc(d,this._order,B,g,T,P,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,te),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.exported.now()),K=!0),X&&this.pauseablePlacement.placement.setStale()),K||X)for(const he of this._order){const de=this._layers[he];"symbol"===de.type&&this.placement.updateLayerOpacities(de,te[de.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.exported.now())}_releaseSymbolFadeTiles(){for(const d in this._sourceCaches)this._sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,g,T){this.imageManager.getImages(g.icons,T),this._updateTilesForChangedImages();const P=B=>{B&&B.setDependencies(g.tileID.key,g.type,g.icons)};P(this._otherSourceCaches[g.source]),P(this._symbolSourceCaches[g.source])}getGlyphs(d,g,T){this.glyphManager.getGlyphs(g.stacks,T)}getResource(d,g,T){return i.makeRequest(g,T)}_getSourceCache(d){return this._otherSourceCaches[d]}_getLayerSourceCache(d){return"symbol"===d.type?this._symbolSourceCaches[d.source]:this._otherSourceCaches[d.source]}_getSourceCaches(d){const g=[];return this._otherSourceCaches[d]&&g.push(this._otherSourceCaches[d]),this._symbolSourceCaches[d]&&g.push(this._symbolSourceCaches[d]),g}_isSourceCacheLoaded(d){const g=this._getSourceCaches(d);return 0===g.length?(this.fire(new i.ErrorEvent(new Error(`There is no source with ID '${d}'`))),!1):g.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}xr.getSourceType=function(w){return St[w]},xr.setSourceType=function(w,d){St[w]=d},xr.registerForPluginStateChange=i.registerForPluginStateChange;var Hc="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Ks="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ws="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",rc="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",ta="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let ml={},Ol={};const Za=[];Co(Hc,Za),Co(Ws,Za),Co(rc,Za),Co(ta,Za),ml=Br("",Ws),Ol=Br(ta,rc);const vu=Br("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),sc=Hc,ia="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Pl={background:Br("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Br("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Br("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Br("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Br("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Br("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Br("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Br("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Br("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Br("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Br("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Br("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Br("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Br("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Br("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Br("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Br("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Br("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Br("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Br("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Br("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Br("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Br("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Br("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Br("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Br("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ks),skyboxGradient:Br("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ks),skyboxCapture:Br("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Br("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Br("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Co(w,d){const g=w.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let T of g)if(T=T.trim(),"#"===T[0]&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const P=T.split(" ");for(const B of P)d.includes(B)||d.push(B)}}function Br(w,d){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=d.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),P={},B=[...Za];return Co(w,B),Co(d,B),{fragmentSource:w=w.replace(g,(X,K,te,he,de)=>(P[de]=!0,"define"===K?`\n#ifndef HAS_UNIFORM_u_${de}\nvarying ${te} ${he} ${de};\n#else\nuniform ${te} ${he} u_${de};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${de}\n    ${te} ${he} ${de} = u_${de};\n#endif\n`)),vertexSource:d=d.replace(g,(X,K,te,he,de)=>{const Ce="float"===he?"vec2":"vec4",je=de.match(/color/)?"color":Ce;return P[de]?"define"===K?`\n#ifndef HAS_UNIFORM_u_${de}\nuniform lowp float u_${de}_t;\nattribute ${te} ${Ce} a_${de};\nvarying ${te} ${he} ${de};\n#else\nuniform ${te} ${he} u_${de};\n#endif\n`:"vec4"===je?`\n#ifndef HAS_UNIFORM_u_${de}\n    ${de} = a_${de};\n#else\n    ${te} ${he} ${de} = u_${de};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${de}\n    ${de} = unpack_mix_${je}(a_${de}, u_${de}_t);\n#else\n    ${te} ${he} ${de} = u_${de};\n#endif\n`:"define"===K?`\n#ifndef HAS_UNIFORM_u_${de}\nuniform lowp float u_${de}_t;\nattribute ${te} ${Ce} a_${de};\n#else\nuniform ${te} ${he} u_${de};\n#endif\n`:"vec4"===je?`\n#ifndef HAS_UNIFORM_u_${de}\n    ${te} ${he} ${de} = a_${de};\n#else\n    ${te} ${he} ${de} = u_${de};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${de}\n    ${te} ${he} ${de} = unpack_mix_${je}(a_${de}, u_${de}_t);\n#else\n    ${te} ${he} ${de} = u_${de};\n#endif\n`}),staticAttributes:T,usedDefines:B}}class ju{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(d,g,T,P,B,X,K){this.context=d;let te=this.boundPaintVertexBuffers.length!==P.length;for(let de=0;!te&&de<P.length;de++)this.boundPaintVertexBuffers[de]!==P[de]&&(te=!0);let he=this.boundDynamicVertexBuffers.length!==K.length;for(let de=0;!he&&de<K.length;de++)this.boundDynamicVertexBuffers[de]!==K[de]&&(he=!0);if(!d.extVertexArrayObject||!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==T||te||he||this.boundIndexBuffer!==B||this.boundVertexOffset!==X)this.freshBind(g,T,P,B,X,K);else{d.bindVertexArrayOES.set(this.vao);for(const de of K)de&&de.bind();B&&B.dynamicDraw&&B.bind()}}freshBind(d,g,T,P,B,X){let K;const te=d.numAttributes,he=this.context,de=he.gl;if(he.extVertexArrayObject)this.vao&&this.destroy(),this.vao=he.extVertexArrayObject.createVertexArrayOES(),he.bindVertexArrayOES.set(this.vao),K=0,this.boundProgram=d,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=P,this.boundVertexOffset=B,this.boundDynamicVertexBuffers=X;else{K=he.currentNumAttributes||0;for(let Ce=te;Ce<K;Ce++)de.disableVertexAttribArray(Ce)}g.enableAttributes(de,d),g.bind(),g.setVertexAttribPointers(de,d,B);for(const Ce of T)Ce.enableAttributes(de,d),Ce.bind(),Ce.setVertexAttribPointers(de,d,B);for(const Ce of X)Ce&&(Ce.enableAttributes(de,d),Ce.bind(),Ce.setVertexAttribPointers(de,d,B));P&&P.bind(),he.currentNumAttributes=te}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Oa(w,d){const g=Math.pow(2,d.canonical.z),T=d.canonical.y;return[new i.MercatorCoordinate(0,T/g).toLngLat().lat,new i.MercatorCoordinate(0,(T+1)/g).toLngLat().lat]}function qa(w,d,g,T,P,B,X){const K=w.context,te=K.gl,he=g.fbo;if(!he)return;w.prepareDrawTile();const de=w.useProgram("hillshade");K.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,he.colorAttachment.get());const Ce=((tt,st,Te,Ge)=>{const bt=Te.paint.get("hillshade-shadow-color"),xt=Te.paint.get("hillshade-highlight-color"),jt=Te.paint.get("hillshade-accent-color");let Wt=Te.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Te.paint.get("hillshade-illumination-anchor")&&(Wt-=tt.transform.angle);const Gt=!tt.options.moving;return{u_matrix:Ge||tt.transform.calculateProjMatrix(st.tileID.toUnwrapped(),Gt),u_image:0,u_latrange:Oa(0,st.tileID),u_light:[Te.paint.get("hillshade-exaggeration"),Wt],u_shadow:bt,u_highlight:xt,u_accent:jt}})(w,g,T,w.terrain?d.projMatrix:null);w.prepareDrawProgram(K,de,d.toUnwrapped());const{tileBoundsBuffer:je,tileBoundsIndexBuffer:Qe,tileBoundsSegments:et}=w.getTileBoundsBuffers(g);de.draw(K,te.TRIANGLES,P,B,X,i.CullFaceMode.disabled,Ce,T.id,je,Qe,et)}function Un(w,d,g){if(!d.needsDEMTextureUpload)return;const T=w.context,P=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||w.getTileTexture(g.stride);const B=g.getPixels();d.demTexture?d.demTexture.update(B,{premultiply:!1}):d.demTexture=new i.Texture(T,B,P.RGBA,{premultiply:!1}),d.needsDEMTextureUpload=!1}function Uo(w,d,g,T,P,B){const X=w.context,K=X.gl;if(!d.dem)return;const te=d.dem;if(X.activeTexture.set(K.TEXTURE1),Un(w,d,te),!d.demTexture)return;d.demTexture.bind(K.NEAREST,K.CLAMP_TO_EDGE);const he=te.dim;X.activeTexture.set(K.TEXTURE0);let de=d.fbo;if(!de){const et=new i.Texture(X,{width:he,height:he,data:null},K.RGBA);et.bind(K.LINEAR,K.CLAMP_TO_EDGE),de=d.fbo=X.createFramebuffer(he,he,!0),de.colorAttachment.set(et.texture)}X.bindFramebuffer.set(de.framebuffer),X.viewport.set([0,0,he,he]);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:je,tileBoundsSegments:Qe}=w.getMercatorTileBoundsBuffers();w.useProgram("hillshadePrepare").draw(X,K.TRIANGLES,T,P,B,i.CullFaceMode.disabled,((et,tt)=>{const st=tt.stride,Te=i.create();return i.ortho(Te,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(Te,Te,[0,-i.EXTENT,0]),{u_matrix:Te,u_image:1,u_dimension:[st,st],u_zoom:et.overscaledZ,u_unpack:tt.unpackVector}})(d.tileID,te),g.id,Ce,je,Qe),d.needsHillshadePrepare=!1}const Ls=w=>({u_matrix:new i.UniformMatrix4f(w),u_image0:new i.Uniform1i(w),u_skirt_height:new i.Uniform1f(w)}),Js=(w,d)=>({u_matrix:w,u_image0:0,u_skirt_height:d}),Vs=(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et)=>({u_proj_matrix:Float32Array.from(w),u_globe_matrix:d,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:g,u_zoom_transition:P,u_merc_center:B,u_image0:0,u_frustum_tl:X,u_frustum_tr:K,u_frustum_br:te,u_frustum_bl:he,u_globe_pos:de,u_globe_radius:Ce,u_viewport:je,u_grid_matrix:et?Float32Array.from(et):new Float32Array(9),u_skirt_height:Qe});function Ka(w,d){return null!=w&&null!=d&&!(!w.hasData()||!d.hasData())&&null!=w.demTexture&&null!=d.demTexture&&w.tileID.key!==d.tileID.key}const _a=new class{constructor(){this.operations={}}newMorphing(w,d,g,T,P){if(w in this.operations){const B=this.operations[w];B.to.tileID.key!==g.tileID.key&&(B.queued=g)}else this.operations[w]={startTime:T,phase:0,duration:P,from:d,to:g,queued:null}}getMorphValuesForProxy(w){if(!(w in this.operations))return null;const d=this.operations[w];return{from:d.from,to:d.to,phase:d.phase}}update(w){for(const d in this.operations){const g=this.operations[d];for(g.phase=(w-g.startTime)/g.duration;g.phase>=1||!this._validOp(g);)if(!this._nextOp(g,w)){delete this.operations[d];break}}}_nextOp(w,d){return!!w.queued&&(w.from=w.to,w.to=w.queued,w.queued=null,w.phase=0,w.startTime=d,!0)}_validOp(w){return w.from.hasData()&&w.to.hasData()}},na={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Pa(w){return 6*Math.pow(1.5,22-w)}function ra(w,d){const g=1<<w.z;return!d&&(0===w.x||w.x===g-1)||0===w.y||w.y===g-1}const gl=w=>({u_matrix:w});function Po(w,d,g,T,P){if(P>0){const B=i.exported.now(),X=(B-w.timeAdded)/P,K=d?(B-d.timeAdded)/P:-1,te=g.getSource(),he=T.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),de=!d||Math.abs(d.tileID.overscaledZ-he)>Math.abs(w.tileID.overscaledZ-he),Ce=de&&w.refreshedUponExpiration?1:i.clamp(de?X:1-K,0,1);return w.refreshedUponExpiration&&X>=1&&(w.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Ce}:{opacity:Ce,mix:0}}return{opacity:1,mix:0}}class ls extends i.SourceCache{constructor(d){const g={type:"raster-dem",maxzoom:d.transform.maxZoom},T=new Fi(rt(),null),P=Ke("mock-dem",g,T,d.style);super("mock-dem",P,!1),P.setEventedParent(this),this._sourceLoaded=!0}_loadTile(d,g){d.state="loaded",g(null)}}class Ot extends i.SourceCache{constructor(d){const g=Ke("proxy",{type:"geojson",maxzoom:d.transform.maxZoom},new Fi(rt(),null),d.style);super("proxy",g,!1),g.setEventedParent(this),this.map=this.getSource().map=d,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(d,g,T){if(d.freezeTileCoverage)return;this.transform=d;const P=d.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((B,X)=>{if(B[X.key]="",!this._tiles[X.key]){const K=new i.Tile(X,this._source.tileSize*X.overscaleFactor(),d.tileZoom);K.state="loaded",this._tiles[X.key]=K}return B},{});for(const B in this._tiles)B in P||(this.freeFBO(B),this._tiles[B].unloadVectorData(),delete this._tiles[B])}freeFBO(d){const g=this.proxyCachedFBO[d];if(void 0!==g){const T=Object.values(g);this.renderCachePool.push(...T),delete this.proxyCachedFBO[d]}}deallocRenderCache(){this.renderCache.forEach(d=>d.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Wo extends i.OverscaledTileID{constructor(d,g,T){super(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y),this.proxyTileKey=g,this.projMatrix=T}}class $r extends i.Elevation{constructor(d,g){super(),this.painter=d,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,P,B]=function(te){const he=new i.StructArrayLayout2i4,de=new i.StructArrayLayout3ui6;he.reserve(17161),de.reserve(33800);const je=i.EXTENT/128,Qe=i.EXTENT+je/2,et=Qe+je;for(let st=-je;st<et;st+=je)for(let Te=-je;Te<et;Te+=je){const Ge=Te<0||Te>Qe||st<0||st>Qe?24575:0,bt=i.clamp(Math.round(Te),0,i.EXTENT),xt=i.clamp(Math.round(st),0,i.EXTENT);he.emplaceBack(bt+Ge,xt)}const tt=(st,Te)=>{const Ge=131*Te+st;de.emplaceBack(Ge+1,Ge,Ge+131),de.emplaceBack(Ge+131,Ge+131+1,Ge+1)};for(let st=1;st<129;st++)for(let Te=1;Te<129;Te++)tt(Te,st);return[0,129].forEach(st=>{for(let Te=0;Te<130;Te++)tt(Te,st),tt(st,Te)}),[he,de,32768]}(),X=d.context;this.gridBuffer=X.createVertexBuffer(T,i.posAttributes.members),this.gridIndexBuffer=X.createIndexBuffer(P),this.gridSegments=i.SegmentVector.simpleSegment(0,0,T.length,P.length),this.gridNoSkirtSegments=i.SegmentVector.simpleSegment(0,0,T.length,B),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ot(g.map),this.orthoMatrix=i.create(),i.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,i.EXTENT,0,i.EXTENT,0,1);const K=X.gl;this._overlapStencilMode=new i.StencilMode({func:K.GEQUAL,mask:255},0,255,K.KEEP,K.KEEP,K.REPLACE),this._previousZoom=d.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=g,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ls(g.map)}set style(d){d.on("data",this._onStyleDataEvent.bind(this)),d.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=d,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(d,g,T){if(d&&d.terrain){this._style!==d&&(this.style=d),this.enabled=!0;const P=d.terrain.properties;this.sourceCache=0===d.terrain.drapeRenderMode?this._mockSourceCache:d._getSourceCache(P.get("source")),this._exaggeration=P.get("exaggeration");const B=()=>{this.sourceCache.used&&i.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const X=this.getScaledDemTileSize();this.sourceCache.update(g,X,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,B(),this._initializing=!0),B(),g.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(g),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(d){this._findCoveringTileCache[d]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const d=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==d.efficiency&&i.warnOnce(`Terrain render cache efficiency is not optimal (${d.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${d.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(d){d.coord&&"source"===d.dataType?this._clearRenderCacheForTile(d.sourceCacheId,d.coord):"style"===d.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const d in this._style._sourceCaches)this._style._sourceCaches[d].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(d=>d.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const d=2*this.proxySourceCache.getSource().tileSize;return[d,d]}set useVertexMorphing(d){this._useVertexMorphing=d}updateTileBinding(d){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const g=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=0===T._centerAltitude&&-1===this.getAtPointOrZero(i.MercatorCoordinate.fromLngLat(T.center),-1),this._emptyDEMTextureDirty=!this._initializing);const P=this.proxyCoords=g.getIds().map(te=>{const he=g.getTileByID(te).tileID;return he.projMatrix=T.calculateProjMatrix(he.toUnwrapped()),he});(function(te,he){const de=he.transform.pointCoordinate(he.transform.getCameraPoint()),Ce=new i.Point(de.x,de.y);te.sort((je,Qe)=>{if(Qe.overscaledZ-je.overscaledZ)return Qe.overscaledZ-je.overscaledZ;const et=new i.Point(je.canonical.x+(1<<je.canonical.z)*je.wrap,je.canonical.y),tt=new i.Point(Qe.canonical.x+(1<<Qe.canonical.z)*Qe.wrap,Qe.canonical.y),st=Ce.mult(1<<je.canonical.z);return st.x-=.5,st.y-=.5,st.distSqr(et)-st.distSqr(tt)})})(P,this.painter),this._previousZoom=T.zoom;const B=this.proxyToSource||{};this.proxyToSource={},P.forEach(te=>{this.proxyToSource[te.key]={}}),this.terrainTileForTile={};const X=this._style._sourceCaches;for(const te in X){const he=X[te];if(!he.used||(he!==this.sourceCache&&this.resetTileLookupCache(he.id),this._setupProxiedCoordsForOrtho(he,d[te],B),he.usedForTerrain))continue;const de=d[te];he.getSource().reparseOverscaled&&this._assignTerrainTiles(de)}this.proxiedCoords[g.id]=P.map(te=>new Wo(te,te.key,this.orthoMatrix)),this._assignTerrainTiles(P),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(B),this.renderingToTexture=!1,this._updateTimestamp=i.exported.now();const K={};this._visibleDemTiles=[];for(const te of this.proxyCoords){const he=this.terrainTileForTile[te.key];if(!he)continue;const de=he.tileID.key;de in K||(this._visibleDemTiles.push(he),K[de]=de)}}_assignTerrainTiles(d){this._initializing||d.forEach(g=>{if(this.terrainTileForTile[g.key])return;const T=this._findTileCoveringTileID(g,this.sourceCache);T&&(this.terrainTileForTile[g.key]=T)})}_prepareDEMTextures(){const d=this.painter.context,g=d.gl;for(const T in this.terrainTileForTile){const P=this.terrainTileForTile[T],B=P.dem;!B||P.demTexture&&!P.needsDEMTextureUpload||(d.activeTexture.set(g.TEXTURE1),Un(this.painter,P,B))}}_prepareDemTileUniforms(d,g,T,P){if(!g||null==g.demTexture)return!1;const B=d.tileID.canonical,X=Math.pow(2,g.tileID.canonical.z-B.z),K=P||"";return T[`u_dem_tl${K}`]=[B.x*X%1,B.y*X%1],T[`u_dem_scale${K}`]=X,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const d=this.painter.context,g=d.gl;if(!this._emptyDepthBufferTexture){const T=new i.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new i.Texture(d,T,g.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let d=0;const g=this._visibleDemTiles.reduce((T,P)=>{if(!P.dem)return T;const B=P.dem.tree.minimums[0];return B>0&&d++,T+B},0);return d?g/d:0}_updateEmptyDEMTexture(){const d=this.painter.context,g=d.gl;d.activeTexture.set(g.TEXTURE2);const T=this._getLoadedAreaMinimum(),P=new i.RGBAImage({width:1,height:1},new Uint8Array(i.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(P,{premultiply:!1}):B=this._emptyDEMTexture=new i.Texture(d,P,g.RGBA,{premultiply:!1}),B}setupElevationDraw(d,g,T){const P=this.painter.context,B=P.gl,X=(K=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:i.DEMData.getUnpackVector(K),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var K;X.u_dem_size=this.sourceCache.getSource().tileSize,X.u_exaggeration=this.exaggeration();let te=null,he=null,de=1;if(T&&T.morphing&&this._useVertexMorphing){const Ce=T.morphing.srcDemTile,je=T.morphing.dstDemTile;de=T.morphing.phase,Ce&&je&&(this._prepareDemTileUniforms(d,Ce,X,"_prev")&&(he=Ce),this._prepareDemTileUniforms(d,je,X)&&(te=je))}if(he&&te?(P.activeTexture.set(B.TEXTURE2),te.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),P.activeTexture.set(B.TEXTURE4),he.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),X.u_dem_lerp=de):(te=this.terrainTileForTile[d.tileID.key],P.activeTexture.set(B.TEXTURE2),(this._prepareDemTileUniforms(d,te,X)?te.demTexture:this.emptyDEMTexture).bind(B.NEAREST,B.CLAMP_TO_EDGE)),P.activeTexture.set(B.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),this._depthFBO&&(X.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),X.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&te){const Ce=(1<<te.tileID.canonical.z)*i.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;X.u_meter_to_dem=Ce}if(T&&T.labelPlaneMatrixInv&&(X.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),g.setTerrainUniformValues(P,X),"globe"===this.painter.transform.projection.name){const Ce=this.globeUniformValues(this.painter.transform,d.tileID.canonical,T&&T.useDenormalizedUpVectorScale);g.setGlobeUniformValues(P,Ce)}}globeUniformValues(d,g,T){const P=d.projection;return{u_tile_tl_up:P.upVector(g,0,0),u_tile_tr_up:P.upVector(g,i.EXTENT,0),u_tile_br_up:P.upVector(g,i.EXTENT,i.EXTENT),u_tile_bl_up:P.upVector(g,0,i.EXTENT),u_tile_up_scale:T?i.globeMetersToEcef(1):P.upVectorScale(g,d.center.lat,d.worldSize).metersToTile}}renderToBackBuffer(d){const g=this.painter,T=this.painter.context;0!==d.length&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),g.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(P,B,X,K,te){if("globe"===P.transform.projection.name)!function(he,de,Ce,je,Qe){const et=he.context,tt=et.gl;let st,Te;const Ge=he.options.showTerrainWireframe?2:0,bt=he.transform,xt=i.globeUseCustomAntiAliasing(he,et,bt),jt=(Wi,pi)=>{if(Te===Wi)return;const Ii=[na[Wi],"PROJECTION_GLOBE_VIEW"];xt&&Ii.push("CUSTOM_ANTIALIASING"),pi&&Ii.push(na[Ge]),st=he.useProgram("globeRaster",null,Ii),Te=Wi},Wt=he.colorModeForRenderPass(),Gt=new i.DepthMode(tt.LEQUAL,i.DepthMode.ReadWrite,he.depthRangeFor3D);_a.update(Qe);const ti=i.calculateGlobeMercatorMatrix(bt),Jt=[i.mercatorXfromLng(bt.center.lng),i.mercatorYfromLat(bt.center.lat)],_i=Ge?[!1,!0]:[!1],Qi=he.globeSharedBuffers,ci=[bt.width*i.exported.devicePixelRatio,bt.height*i.exported.devicePixelRatio],Ri=Float32Array.from(bt.globeMatrix),yi={useDenormalizedUpVectorScale:!0};if(_i.forEach(Wi=>{const pi=he.transform,Ii=Pa(pi.zoom)*de.exaggeration();Te=-1;const rn=Wi?tt.LINES:tt.TRIANGLES;for(const Bi of je){const qi=Ce.getTile(Bi),Bn=i.StencilMode.disabled,Hn=de.prevTerrainTileForTile[Bi.key],En=de.terrainTileForTile[Bi.key];Ka(Hn,En)&&_a.newMorphing(Bi.key,Hn,En,Qe,250),et.activeTexture.set(tt.TEXTURE0),qi.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);const qn=_a.getMorphValuesForProxy(Bi.key),rr=qn?1:0;qn&&i.extend$1(yi,{morphing:{srcDemTile:qn.from,dstDemTile:qn.to,phase:i.easeCubicInOut(qn.phase)}});const sr=i.tileCornersToBounds(Bi.canonical),Vn=i.getLatitudinalLod(sr.getCenter().lat),Ir=i.getGridMatrix(Bi.canonical,sr,Vn,pi.worldSize/pi._pixelsPerMercatorPixel),vs=i.globeNormalizeECEF(i.globeTileBounds(Bi.canonical)),_s=Vs(pi.projMatrix,Ri,ti,vs,i.globeToMercatorTransition(pi.zoom),Jt,pi.frustumCorners.TL,pi.frustumCorners.TR,pi.frustumCorners.BR,pi.frustumCorners.BL,pi.globeCenterInViewSpace,pi.globeRadius,ci,Ii,Ir);if(jt(rr,Wi),de.setupElevationDraw(qi,st,yi),he.prepareDrawProgram(et,st,Bi.toUnwrapped()),Qi){const[cs,Hr,_o]=Wi?Qi.getWirefameBuffers(he.context,Vn):Qi.getGridBuffers(Vn,0!==Ii);st.draw(et,rn,Gt,Bn,Wt,i.CullFaceMode.backCCW,_s,"globe_raster",cs,Hr,_o)}}}),Qi){const Wi=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];xt&&Wi.push("CUSTOM_ANTIALIASING"),st=he.useProgram("globeRaster",null,Wi);for(const pi of je){const{x:Ii,y:rn,z:Bi}=pi.canonical,qi=0===rn,Bn=rn===(1<<Bi)-1,[Hn,En,qn,rr]=Qi.getPoleBuffers(Bi);if(rr&&(qi||Bn)){const sr=Ce.getTile(pi);et.activeTexture.set(tt.TEXTURE0),sr.texture.bind(tt.LINEAR,tt.CLAMP_TO_EDGE);let Vn=i.globePoleMatrixForTile(Bi,Ii,bt);const Ir=i.globeNormalizeECEF(i.globeTileBounds(pi.canonical)),vs=(_s,cs)=>_s.draw(et,tt.TRIANGLES,Gt,i.StencilMode.disabled,Wt,i.CullFaceMode.disabled,Vs(bt.projMatrix,Vn,Vn,Ir,0,Jt,bt.frustumCorners.TL,bt.frustumCorners.TR,bt.frustumCorners.BR,bt.frustumCorners.BL,bt.globeCenterInViewSpace,bt.globeRadius,ci,0),"globe_pole_raster",cs,qn,rr);de.setupElevationDraw(sr,st,yi),he.prepareDrawProgram(et,st,pi.toUnwrapped()),qi&&vs(st,Hn),Bn&&(Vn=i.scale(i.create(),Vn,[1,-1,1]),vs(st,En))}}}}(P,B,X,K,te);else{const he=P.context,de=he.gl;let Ce,je;const Qe=P.options.showTerrainWireframe?2:0,et=(bt,xt)=>{if(je===bt)return;const jt=[na[bt]];xt&&jt.push(na[Qe]),Ce=P.useProgram("terrainRaster",null,jt),je=bt},tt=P.colorModeForRenderPass(),st=new i.DepthMode(de.LEQUAL,i.DepthMode.ReadWrite,P.depthRangeFor3D);_a.update(te);const Te=P.transform,Ge=Pa(Te.zoom)*B.exaggeration();(Qe?[!1,!0]:[!1]).forEach(bt=>{je=-1;const xt=bt?de.LINES:de.TRIANGLES,[jt,Wt]=bt?B.getWirefameBuffer():[B.gridIndexBuffer,B.gridSegments];for(const Gt of K){const ti=X.getTile(Gt),Jt=i.StencilMode.disabled,_i=B.prevTerrainTileForTile[Gt.key],Qi=B.terrainTileForTile[Gt.key];Ka(_i,Qi)&&_a.newMorphing(Gt.key,_i,Qi,te,250),he.activeTexture.set(de.TEXTURE0),ti.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST);const ci=_a.getMorphValuesForProxy(Gt.key),Ri=ci?1:0;let yi;ci&&(yi={morphing:{srcDemTile:ci.from,dstDemTile:ci.to,phase:i.easeCubicInOut(ci.phase)}});const Wi=Js(Gt.projMatrix,ra(Gt.canonical,Te.renderWorldCopies)?Ge/10:Ge);et(Ri,bt),B.setupElevationDraw(ti,Ce,yi),P.prepareDrawProgram(he,Ce,Gt.toUnwrapped()),Ce.draw(he,xt,st,Jt,tt,i.CullFaceMode.backCCW,Wi,"terrain_raster",B.gridBuffer,jt,Wt)}})}}(g,this,this.proxySourceCache,d,this._updateTimestamp),this.renderingToTexture=!0,g.gpuTimingDeferredRenderEnd(),d.splice(0,d.length))}renderBatch(d){if(0===this._drapedRenderBatches.length)return d+1;this.renderingToTexture=!0;const g=this.painter,T=this.painter.context,P=this.proxySourceCache,B=this.proxiedCoords[P.id],X=this._drapedRenderBatches.shift(),K=[],te=g.style.order;let he=0;for(const de of B){const Ce=P.getTileByID(de.proxyTileKey),je=P.proxyCachedFBO[de.key]?P.proxyCachedFBO[de.key][d]:void 0,Qe=void 0!==je?P.renderCache[je]:this.pool[he++],et=void 0!==je;if(Ce.texture=Qe.tex,et&&!Qe.dirty){K.push(Ce.tileID);continue}let tt;T.bindFramebuffer.set(Qe.fb.framebuffer),this.renderedToTile=!1,Qe.dirty&&(T.clear({color:i.Color.transparent,stencil:0}),Qe.dirty=!1);for(let st=X.start;st<=X.end;++st){const Te=g.style._layers[te[st]];if(Te.isHidden(g.transform.zoom))continue;const Ge=g.style._getLayerSourceCache(Te),bt=Ge?this.proxyToSource[de.key][Ge.id]:[de];if(!bt)continue;const xt=bt;T.viewport.set([0,0,Qe.fb.width,Qe.fb.height]),tt!==(Ge?Ge.id:null)&&(this._setupStencil(Qe,bt,Te,Ge),tt=Ge?Ge.id:null),g.renderLayer(g,Ge,Te,xt)}this.renderedToTile?(Qe.dirty=!0,K.push(Ce.tileID)):et||--he,5===he&&(he=0,this.renderToBackBuffer(K))}return this.renderToBackBuffer(K),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,g.width,g.height]),X.end+1}postRender(){}renderCacheEfficiency(d){const g=d.order.length;if(0===g)return{efficiency:100};let T,P=0,B=0,X=!1;for(let K=0;K<g;++K){const te=d._layers[d.order[K]];this._style.isLayerDraped(te)?(X&&++P,++B):X||(X=!0,T=te.id)}return 0===B?{efficiency:100}:{efficiency:100*(1-P/B),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let d=0;return this._visibleDemTiles.filter(g=>g.dem).forEach(g=>{d=Math.min(d,g.dem.tree.minimums[0])}),0===d?d:(d-30)*this._exaggeration}raycast(d,g,T){if(!this._visibleDemTiles)return null;const P=this._visibleDemTiles.filter(B=>B.dem).map(B=>{const X=B.tileID,K=1<<X.overscaledZ,{x:te,y:he}=X.canonical,de=te/K,Ce=(te+1)/K,je=he/K,Qe=(he+1)/K;return{minx:de,miny:je,maxx:Ce,maxy:Qe,t:B.dem.tree.raycastRoot(de,je,Ce,Qe,d,g,T),tile:B}});P.sort((B,X)=>(null!==B.t?B.t:Number.MAX_VALUE)-(null!==X.t?X.t:Number.MAX_VALUE));for(const B of P){if(null==B.t)return null;const X=B.tile.dem.tree.raycast(B.minx,B.miny,B.maxx,B.maxy,d,g,T);if(null!=X)return X}return null}_createFBO(){const d=this.painter.context,g=d.gl,T=this.drapeBufferSize;d.activeTexture.set(g.TEXTURE0);const P=new i.Texture(d,{width:T[0],height:T[1],data:null},g.RGBA);P.bind(g.LINEAR,g.CLAMP_TO_EDGE);const B=d.createFramebuffer(T[0],T[1],!1);return B.colorAttachment.set(P.texture),B.depthAttachment=new pt(d,B.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=d.createRenderbuffer(d.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,B.depthAttachment.set(this._sharedDepthStencil),d.clear({stencil:0})):B.depthAttachment.set(this._sharedDepthStencil),d.extTextureFilterAnisotropic&&!d.extTextureFilterAnisotropicForceOff&&g.texParameterf(g.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax),{fb:B,tex:P,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const d in this._style._sourceCaches)if(this._style._sourceCaches[d].hasTransition())return!0;return this._style.order.some(d=>{const g=this._style._layers[d],T=g.isHidden(this.painter.transform.zoom);return"custom"===g.type?!T&&g.shouldRedrape():!T&&g.hasTransition()})}_clearLineLayersFromRenderCache(){let d=!1;for(const T of this._style._getSources())if(T instanceof $i){d=!0;break}if(!d)return;const g={};for(let T=0;T<this._style.order.length;++T){const P=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(P);if(B&&!g[B.id]&&!P.isHidden(this.painter.transform.zoom)&&"line"===P.type&&P.widthExpression()instanceof i.ZoomDependentExpression){g[B.id]=!0;for(const X of this.proxyCoords){const K=this.proxyToSource[X.key][B.id];if(K)for(const te of K)this._clearRenderCacheForTile(B.id,te)}}}}_clearRasterLayersFromRenderCache(){let d=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof di){d=!0;break}if(!d)return;const g={};for(let T=0;T<this._style.order.length;++T){const P=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(P);if(!B||g[B.id]||P.isHidden(this.painter.transform.zoom)||"raster"!==P.type)continue;const X=P.paint.get("raster-fade-duration");for(const K of this.proxyCoords){const te=this.proxyToSource[K.key][B.id];if(te)for(const he of te){const de=Po(B.getTile(he),B.findLoadedParent(he,0),B,this.painter.transform,X);(1!==de.opacity||0!==de.mix)&&this._clearRenderCacheForTile(B.id,he)}}}}_setupDrapedRenderBatches(){const d=this._style.order,g=d.length;if(0===g)return;const T=[];let P,B=0,X=this._style._layers[d[B]];for(;!this._style.isLayerDraped(X)&&X.isHidden(this.painter.transform.zoom)&&++B<g;)X=this._style._layers[d[B]];for(;B<g;++B){const K=this._style._layers[d[B]];K.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(K)?void 0===P&&(P=B):void 0!==P&&(T.push({start:P,end:B-1}),P=void 0))}void 0!==P&&T.push({start:P,end:B-1}),this._drapedRenderBatches=T}_setupRenderCache(d){const g=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,g.renderCache.length>g.renderCachePool.length){const X=Object.values(g.proxyCachedFBO);g.proxyCachedFBO={};for(let K=0;K<X.length;++K){const te=Object.values(X[K]);g.renderCachePool.push(...te)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,P=this._tilesDirty;for(let X=T.length-1;X>=0;X--){const K=T[X];if(g.getTileByID(K.key),void 0!==g.proxyCachedFBO[K.key]){const te=d[K.key],he=this.proxyToSource[K.key];let de=0;for(const Ce in he){const je=he[Ce],Qe=te[Ce];if(!Qe||Qe.length!==je.length||je.some((et,tt)=>et!==Qe[tt]||P[Ce]&&P[Ce].hasOwnProperty(et.key))){de=-1;break}++de}for(const Ce in g.proxyCachedFBO[K.key])g.renderCache[g.proxyCachedFBO[K.key][Ce]].dirty=de<0||de!==Object.values(te).length}}const B=[...this._drapedRenderBatches];B.sort((X,K)=>K.end-K.start-(X.end-X.start));for(const X of B)for(const K of T){if(g.proxyCachedFBO[K.key])continue;let te=g.renderCachePool.pop();void 0===te&&g.renderCache.length<50&&(te=g.renderCache.length,g.renderCache.push(this._createFBO())),void 0!==te&&(g.proxyCachedFBO[K.key]={},g.proxyCachedFBO[K.key][X.start]=te,g.renderCache[te].dirty=!0)}this._tilesDirty={}}_setupStencil(d,g,T,P){if(!P||!this._sourceTilesOverlap[P.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const B=this.painter.context,X=B.gl;if(g.length<=1)return void(this._overlapStencilType=!1);let K;if(T.isTileClipped())K=g.length,this._overlapStencilMode.test={func:X.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(g[0].overscaledZ>g[g.length-1].overscaledZ))return void(this._overlapStencilType=!1);K=1,this._overlapStencilMode.test={func:X.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+K>255&&(B.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=K,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(g,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(d){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[d.key]),this._overlapStencilMode):i.StencilMode.disabled}_renderTileClippingMasks(d,g){const T=this.painter,P=this.painter.context,B=P.gl;T._tileClippingMaskIDs={},P.setColorMode(i.ColorMode.disabled),P.setDepthMode(i.DepthMode.disabled);const X=T.useProgram("clippingMask");for(const K of d){const te=T._tileClippingMaskIDs[K.key]=--g;X.draw(P,B.TRIANGLES,i.DepthMode.disabled,new i.StencilMode({func:B.ALWAYS,mask:0},te,255,B.KEEP,B.KEEP,B.REPLACE),i.ColorMode.disabled,i.CullFaceMode.disabled,gl(K.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(d){const g=this.painter.transform;if(d.x<0||d.x>g.width||d.y<0||d.y>g.height)return null;const T=[d.x,d.y,1,1];i.transformMat4$1(T,T,g.pixelMatrixInverse),i.scale$1(T,T,1/T[3]),T[0]/=g.worldSize,T[1]/=g.worldSize;const P=g._camera.position,B=i.mercatorZfromAltitude(1,g.center.lat),X=[P[0],P[1],P[2]/B,0],K=i.subtract([],T.slice(0,3),X);i.normalize(K,K);const te=this.raycast(X,K,this._exaggeration);return null!==te&&te?(i.scaleAndAdd(X,X,K,te),X[3]=X[2],X[2]*=B,X):null}drawDepth(){const d=this.painter,g=d.context,T=this.proxySourceCache,P=Math.ceil(d.width),B=Math.ceil(d.height);if(!this._depthFBO||this._depthFBO.width===P&&this._depthFBO.height===B||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const X=g.gl,K=g.createFramebuffer(P,B,!0);g.activeTexture.set(X.TEXTURE0);const te=new i.Texture(g,{width:P,height:B,data:null},X.RGBA);te.bind(X.NEAREST,X.CLAMP_TO_EDGE),K.colorAttachment.set(te.texture);const he=g.createRenderbuffer(g.gl.DEPTH_COMPONENT16,P,B);K.depthAttachment.set(he),this._depthFBO=K,this._depthTexture=te}g.bindFramebuffer.set(this._depthFBO.framebuffer),g.viewport.set([0,0,P,B]),function(X,K,te,he){if("globe"===X.transform.projection.name)return;const de=X.context,Ce=de.gl;de.clear({depth:1});const je=X.useProgram("terrainDepth"),Qe=new i.DepthMode(Ce.LESS,i.DepthMode.ReadWrite,X.depthRangeFor3D);for(const et of he){const tt=te.getTile(et),st=Js(et.projMatrix,0);K.setupElevationDraw(tt,je),je.draw(de,Ce.TRIANGLES,Qe,i.StencilMode.disabled,i.ColorMode.unblended,i.CullFaceMode.backCCW,st,"terrain_depth",K.gridBuffer,K.gridIndexBuffer,K.gridNoSkirtSegments)}}(d,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(d,g,T){if(d.getSource()instanceof Et)return this._setupProxiedCoordsForImageSource(d,g,T);this._findCoveringTileCache[d.id]=this._findCoveringTileCache[d.id]||{};const P=this.proxiedCoords[d.id]=[],B=this.proxyCoords;for(let K=0;K<B.length;K++){const te=B[K],he=this._findTileCoveringTileID(te,d);if(he){const de=this._createProxiedId(te,he,T[te.key]&&T[te.key][d.id]);P.push(de),this.proxyToSource[te.key][d.id]=[de]}}let X=!1;for(let K=0;K<g.length;K++){const te=d.getTile(g[K]);if(!te||!te.hasData())continue;const he=this._findTileCoveringTileID(te.tileID,this.proxySourceCache);if(he&&he.tileID.canonical.z!==te.tileID.canonical.z){const de=this.proxyToSource[he.tileID.key][d.id],Ce=this._createProxiedId(he.tileID,te,T[he.tileID.key]&&T[he.tileID.key][d.id]);de?de.splice(de.length-1,0,Ce):this.proxyToSource[he.tileID.key][d.id]=[Ce],P.push(Ce),X=!0}}this._sourceTilesOverlap[d.id]=X}_setupProxiedCoordsForImageSource(d,g,T){if(!d.getSource().loaded())return;const P=this.proxiedCoords[d.id]=[],B=this.proxyCoords,X=d.getSource(),K=new i.Point(X.tileID.x,X.tileID.y)._div(1<<X.tileID.z),te=X.coordinates.map(i.MercatorCoordinate.fromLngLat).reduce((de,Ce)=>(de.min.x=Math.min(de.min.x,Ce.x-K.x),de.min.y=Math.min(de.min.y,Ce.y-K.y),de.max.x=Math.max(de.max.x,Ce.x-K.x),de.max.y=Math.max(de.max.y,Ce.y-K.y),de),{min:new i.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),he=(de,Ce)=>{const je=de.wrap+de.canonical.x/(1<<de.canonical.z),Qe=de.canonical.y/(1<<de.canonical.z),et=i.EXTENT/(1<<de.canonical.z),tt=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),st=Ce.canonical.y/(1<<Ce.canonical.z);return je+et<tt+te.min.x||je>tt+te.max.x||Qe+et<st+te.min.y||Qe>st+te.max.y};for(let de=0;de<B.length;de++){const Ce=B[de];for(let je=0;je<g.length;je++){const Qe=d.getTile(g[je]);if(!Qe||!Qe.hasData()||he(Ce,Qe.tileID))continue;const et=this._createProxiedId(Ce,Qe,T[Ce.key]&&T[Ce.key][d.id]),tt=this.proxyToSource[Ce.key][d.id];tt?tt.push(et):this.proxyToSource[Ce.key][d.id]=[et],P.push(et)}}}_createProxiedId(d,g,T){let P=this.orthoMatrix;if(T){const B=T.find(X=>X.key===g.tileID.key);if(B)return B}if(g.tileID.key!==d.key){const B=d.canonical.z-g.tileID.canonical.z;let X,K,te;P=i.create();const he=g.tileID.wrap-d.wrap<<d.overscaledZ;B>0?(X=i.EXTENT>>B,K=X*((g.tileID.canonical.x<<B)-d.canonical.x+he),te=X*((g.tileID.canonical.y<<B)-d.canonical.y)):(X=i.EXTENT<<-B,K=i.EXTENT*(g.tileID.canonical.x-(d.canonical.x+he<<-B)),te=i.EXTENT*(g.tileID.canonical.y-(d.canonical.y<<-B))),i.ortho(P,0,X,0,X,0,1),i.translate(P,P,[K,te,0])}return new Wo(g.tileID,d.key,P)}_findTileCoveringTileID(d,g){let T=g.getTile(d);if(T&&T.hasData())return T;const P=this._findCoveringTileCache[g.id],B=P[d.key];if(T=B?g.getTileByID(B):null,T&&T.hasData()||null===B)return T;let X=T?T.tileID:d,K=X.overscaledZ;const te=g.getSource().minzoom,he=[];if(!B){const Ce=g.getSource().maxzoom;if(d.canonical.z>=Ce){const je=d.canonical.z-Ce;g.getSource().reparseOverscaled?(K=Math.max(d.canonical.z+2,g.transform.tileZoom),X=new i.OverscaledTileID(K,d.wrap,Ce,d.canonical.x>>je,d.canonical.y>>je)):0!==je&&(K=Ce,X=new i.OverscaledTileID(K,d.wrap,Ce,d.canonical.x>>je,d.canonical.y>>je))}X.key!==d.key&&(he.push(X.key),T=g.getTile(X))}const de=Ce=>{he.forEach(je=>{P[je]=Ce}),he.length=0};for(K-=1;K>=te&&(!T||!T.hasData());K--){T&&de(T.tileID.key);const Ce=X.calculateScaledKey(K);if(T=g.getTileByID(Ce),T&&T.hasData())break;const je=P[Ce];if(null===je)break;void 0===je?he.push(Ce):T=g.getTileByID(je)}return de(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(d){return this.enabled?this._findTileCoveringTileID(d,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(d,g){let T=this._tilesDirty[d];T||(T=this._tilesDirty[d]={}),T[g.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const d=function(g){let T=0;const P=new i.StructArrayLayout2ui4,B=131;for(let X=1;X<129;X++){for(let K=1;K<129;K++)T=X*B+K,P.emplaceBack(T,T+1),P.emplaceBack(T,T+B),P.emplaceBack(T+1,T+B),128===X&&P.emplaceBack(T+B,T+B+1);P.emplaceBack(T+1,T+1+B)}return P}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(d),this.wireframeSegments=i.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,d.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class zn{static cacheKey(d,g,T,P){let B=`${g}${P?P.cacheKey:""}`;for(const X of T)d.usedDefines.includes(X)&&(B+=`/${X}`);return B}constructor(d,g,T,P,B,X){const K=d.gl;this.program=K.createProgram();const te=function(Te){const Ge=[];for(let bt=0;bt<Te.length;bt++){if(null===Te[bt])continue;const xt=Te[bt].split(" ");Ge.push(xt.pop())}return Ge}(T.staticAttributes),he=P?P.getBinderAttributes():[],de=te.concat(he);let Ce=P?P.defines():[];Ce=Ce.concat(X.map(Te=>`#define ${Te}`));const je=d.isWebGL2?"#version 300 es\n":"",Qe=je+Ce.concat(d.extStandardDerivatives&&0===je.length?"#extension GL_OES_standard_derivatives : enable\n".concat(ia):ia,ia,sc,vu.fragmentSource,Ol.fragmentSource,T.fragmentSource).join("\n"),et=je+Ce.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",sc,vu.vertexSource,Ol.vertexSource,ml.vertexSource,T.vertexSource).join("\n"),tt=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);K.shaderSource(tt,Qe),K.compileShader(tt),K.attachShader(this.program,tt);const st=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(st,et),K.compileShader(st),K.attachShader(this.program,st),this.attributes={},this.numAttributes=de.length;for(let Te=0;Te<this.numAttributes;Te++)de[Te]&&(K.bindAttribLocation(this.program,Te,de[Te]),this.attributes[de[Te]]=Te);K.linkProgram(this.program),K.deleteShader(st),K.deleteShader(tt),this.fixedUniforms=B(d),this.binderUniforms=P?P.getUniforms(d):[],X.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new i.Uniform1i(Te=d),u_dem_prev:new i.Uniform1i(Te),u_dem_unpack:new i.Uniform4f(Te),u_dem_tl:new i.Uniform2f(Te),u_dem_scale:new i.Uniform1f(Te),u_dem_tl_prev:new i.Uniform2f(Te),u_dem_scale_prev:new i.Uniform1f(Te),u_dem_size:new i.Uniform1f(Te),u_dem_lerp:new i.Uniform1f(Te),u_exaggeration:new i.Uniform1f(Te),u_depth:new i.Uniform1i(Te),u_depth_size_inv:new i.Uniform2f(Te),u_meter_to_dem:new i.Uniform1f(Te),u_label_plane_matrix_inv:new i.UniformMatrix4f(Te)}),X.includes("GLOBE")&&(this.globeUniforms=(Te=>({u_tile_tl_up:new i.Uniform3f(Te),u_tile_tr_up:new i.Uniform3f(Te),u_tile_br_up:new i.Uniform3f(Te),u_tile_bl_up:new i.Uniform3f(Te),u_tile_up_scale:new i.Uniform1f(Te)}))(d)),X.includes("FOG")&&(this.fogUniforms=(Te=>({u_fog_matrix:new i.UniformMatrix4f(Te),u_fog_range:new i.Uniform2f(Te),u_fog_color:new i.Uniform4f(Te),u_fog_horizon_blend:new i.Uniform1f(Te),u_fog_temporal_offset:new i.Uniform1f(Te),u_frustum_tl:new i.Uniform3f(Te),u_frustum_tr:new i.Uniform3f(Te),u_frustum_br:new i.Uniform3f(Te),u_frustum_bl:new i.Uniform3f(Te),u_globe_pos:new i.Uniform3f(Te),u_globe_radius:new i.Uniform1f(Te),u_globe_transition:new i.Uniform1f(Te),u_is_globe:new i.Uniform1i(Te),u_viewport:new i.Uniform2f(Te)}))(d))}var Te}setTerrainUniformValues(d,g){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P]&&T[P].set(this.program,P,g[P])}}setGlobeUniformValues(d,g){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P]&&T[P].set(this.program,P,g[P])}}setFogUniformValues(d,g){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){d.program.set(this.program);for(const P in g)T[P].set(this.program,P,g[P])}}draw(d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt){const st=d.gl;if(this.failedToCreate)return;d.program.set(this.program),d.setDepthMode(T),d.setStencilMode(P),d.setColorMode(B),d.setCullFace(X);for(const Ge of Object.keys(this.fixedUniforms))this.fixedUniforms[Ge].set(this.program,Ge,K[Ge]);et&&et.setUniforms(this.program,d,this.binderUniforms,je,{zoom:Qe});const Te={[st.LINES]:2,[st.TRIANGLES]:3,[st.LINE_STRIP]:1}[g];for(const Ge of Ce.get()){const bt=Ge.vaos||(Ge.vaos={});(bt[te]||(bt[te]=new ju)).bind(d,this,he,et?et.getPaintVertexBuffers():[],de,Ge.vertexOffset,tt||[]),st.drawElements(g,Ge.primitiveLength*Te,st.UNSIGNED_SHORT,Ge.primitiveOffset*Te*2)}}}function Rl(w,d){const g=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,w.transform.tileZoom)/g,P=T*(d.tileID.canonical.x+d.tileID.wrap*g),B=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ji(d,1,w.transform.tileZoom),u_pixel_coord_upper:[P>>16,B>>16],u_pixel_coord_lower:[65535&P,65535&B]}}const Tc=i.create(),Ja=(w,d,g,T,P,B,X,K,te,he,de)=>{const Ce=d.style.light,je=Ce.properties.get("position"),Qe=[je.x,je.y,je.z],et=i.create$1();"viewport"===Ce.properties.get("anchor")&&(i.fromRotation(et,-d.transform.angle),i.transformMat3(Qe,Qe,et));const tt=Ce.properties.get("color"),st=d.transform,Te={u_matrix:w,u_lightpos:Qe,u_lightintensity:Ce.properties.get("intensity"),u_lightcolor:[tt.r,tt.g,tt.b],u_vertical_gradient:+g,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Tc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:P,u_edge_radius:B};return"globe"===st.projection.name&&(Te.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],Te.u_zoom_transition=te,Te.u_inv_rot_matrix=de,Te.u_merc_center=he,Te.u_up_dir=st.projection.upVector(new i.CanonicalTileID(0,0,0),he[0]*i.EXTENT,he[1]*i.EXTENT),Te.u_height_lift=K),Te},vl=(w,d,g,T,P,B,X,K,te,he,de,Ce)=>{const je=Ja(w,d,g,T,P,B,X,te,he,de,Ce),Qe={u_height_factor:-Math.pow(2,X.overscaledZ)/K.tileSize/8};return i.extend(je,Rl(d,K),Qe)},sa=w=>({u_matrix:w}),ds=(w,d,g)=>i.extend(sa(w),Rl(d,g)),go=(w,d)=>({u_matrix:w,u_world:d}),_u=(w,d,g,T)=>i.extend(ds(w,d,g),{u_world:T}),oa=i.create(),ya=(w,d,g,T,P,B)=>{const X=w.transform,K="globe"===X.projection.name;let te;if("map"===B.paint.get("circle-pitch-alignment"))if(K){const de=i.globePixelsToTileUnits(X.zoom,d.canonical)*X._pixelsPerMercatorPixel;te=Float32Array.from([de,0,0,de])}else te=X.calculatePixelsToTileUnitsMatrix(g);else te=new Float32Array([X.pixelsToGLUnits[0],0,0,X.pixelsToGLUnits[1]]);const he={u_camera_to_center_distance:X.cameraToCenterDistance,u_matrix:w.translatePosMatrix(d.projMatrix,g,B.paint.get("circle-translate"),B.paint.get("circle-translate-anchor")),u_device_pixel_ratio:i.exported.devicePixelRatio,u_extrude_scale:te,u_inv_rot_matrix:oa,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(K){he.u_inv_rot_matrix=T,he.u_merc_center=P,he.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],he.u_zoom_transition=i.globeToMercatorTransition(X.zoom);const de=P[0]*i.EXTENT,Ce=P[1]*i.EXTENT;he.u_up_dir=X.projection.upVector(new i.CanonicalTileID(0,0,0),de,Ce)}return he},oc=w=>{const d=[];return"map"===w.paint.get("circle-pitch-alignment")&&d.push("PITCH_WITH_MAP"),"map"===w.paint.get("circle-pitch-scale")&&d.push("SCALE_WITH_MAP"),d},vo=(w,d,g,T)=>{const P=i.EXTENT/g.tileSize;return{u_matrix:w,u_camera_to_center_distance:d.getCameraToCenterDistance(T),u_extrude_scale:[d.pixelsToGLUnits[0]/P,d.pixelsToGLUnits[1]/P]}},zl=(w,d,g=1)=>({u_matrix:w,u_color:d,u_overlay:0,u_overlay_scale:g}),$s=i.create(),Qa=(w,d,g,T,P,B,X)=>{const K=w.transform,te="globe"===K.projection.name,he=te?i.globePixelsToTileUnits(K.zoom,d.canonical)*K._pixelsPerMercatorPixel:Ji(g,1,B),de={u_matrix:d.projMatrix,u_extrude_scale:he,u_intensity:X,u_inv_rot_matrix:$s,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(te){de.u_inv_rot_matrix=T,de.u_merc_center=P,de.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],de.u_zoom_transition=i.globeToMercatorTransition(K.zoom);const Ce=P[0]*i.EXTENT,je=P[1]*i.EXTENT;de.u_up_dir=K.projection.upVector(new i.CanonicalTileID(0,0,0),Ce,je)}return de},Ra=(w,d,g,T,P,B,X)=>{const K=w.transform,te=K.calculatePixelsToTileUnitsMatrix(d);return{u_matrix:kc(w,d,g,T),u_pixels_to_tile_units:te,u_device_pixel_ratio:B,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:P,u_texsize:Qs(g)?d.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:aa(d,w.transform),u_alpha_discard_threshold:0,u_trim_offset:X}},el=(w,d,g,T,P)=>{const B=w.transform;return{u_matrix:kc(w,d,g,T),u_texsize:d.imageAtlasTexture.size,u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(d),u_device_pixel_ratio:P,u_image:0,u_tile_units_to_pixels:aa(d,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function aa(w,d){return 1/Ji(w,1,d.tileZoom)}function kc(w,d,g,T){return w.translatePosMatrix(T||d.tileID.projMatrix,d,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}function Qs(w){const d=w.paint.get("line-dasharray").value;return d.value||"constant"!==d.kind}const ba=(w,d,g,T,P,B)=>{return{u_matrix:w,u_tl_parent:d,u_scale_parent:g,u_fade_t:T.mix,u_opacity:T.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(K=P.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(X=P.paint.get("raster-contrast"),X>0?1/(1-X):1+X),u_spin_weights:la(P.paint.get("raster-hue-rotate")),u_perspective_transform:B};var X,K};function la(w){w*=Math.PI/180;const d=Math.sin(w),g=Math.cos(w);return[(2*g+1)/3,(-Math.sqrt(3)*d-g+1)/3,(Math.sqrt(3)*d-g+1)/3]}const Eo=i.create(),ac=(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt)=>{const st=P.transform,Te={u_is_size_zoom_constant:+("constant"===w||"source"===w),u_is_size_feature_constant:+("constant"===w||"camera"===w),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:st.cameraToCenterDistance,u_rotate_symbol:+g,u_aspect_ratio:st.width/st.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:X,u_coord_matrix:K,u_is_text:+te,u_pitch_with_map:+T,u_texsize:he,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Eo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Eo,u_up_vector:[0,-1,0]};return"globe"===tt.name&&(Te.u_tile_id=[de.canonical.x,de.canonical.y,1<<de.canonical.z],Te.u_zoom_transition=Ce,Te.u_inv_rot_matrix=Qe,Te.u_merc_center=je,Te.u_camera_forward=st._camera.forward(),Te.u_ecef_origin=i.globeECEFOrigin(st.globeMatrix,de.toUnwrapped()),Te.u_tile_matrix=Float32Array.from(st.globeMatrix),Te.u_up_vector=et),Te},So=(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt,st)=>i.extend(ac(w,d,g,T,P,B,X,K,te,he,Ce,je,Qe,et,tt,st),{u_gamma_scale:T?P.transform.cameraToCenterDistance*Math.cos(P.terrain?0:P.transform._pitch):1,u_device_pixel_ratio:i.exported.devicePixelRatio,u_is_halo:+de}),Ac=(w,d,g,T,P,B,X,K,te,he,de,Ce,je,Qe,et,tt)=>i.extend(So(w,d,g,T,P,B,X,K,!0,te,!0,de,Ce,je,Qe,et,tt),{u_texsize_icon:he,u_texture_icon:1}),Ns=(w,d,g)=>({u_matrix:w,u_opacity:d,u_color:g}),ms=(w,d,g,T,P)=>i.extend(function(B,X,K){const te=X.imageManager.getPattern(B.toString()),{width:he,height:de}=X.imageManager.getPixelSize(),Ce=Math.pow(2,K.tileID.overscaledZ),je=K.tileSize*Math.pow(2,X.transform.tileZoom)/Ce,Qe=je*(K.tileID.canonical.x+K.tileID.wrap*Ce),et=je*K.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[he,de],u_pattern_size:te.displaySize,u_tile_units_to_pixels:1/Ji(K,1,X.transform.tileZoom),u_pixel_coord_upper:[Qe>>16,et>>16],u_pixel_coord_lower:[65535&Qe,65535&et]}}(T,g,P),{u_matrix:w,u_opacity:d}),Ro={fillExtrusion:w=>({u_matrix:new i.UniformMatrix4f(w),u_lightpos:new i.Uniform3f(w),u_lightintensity:new i.Uniform1f(w),u_lightcolor:new i.Uniform3f(w),u_vertical_gradient:new i.Uniform1f(w),u_opacity:new i.Uniform1f(w),u_edge_radius:new i.Uniform1f(w),u_ao:new i.Uniform2f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_up_dir:new i.Uniform3f(w),u_height_lift:new i.Uniform1f(w)}),fillExtrusionPattern:w=>({u_matrix:new i.UniformMatrix4f(w),u_lightpos:new i.Uniform3f(w),u_lightintensity:new i.Uniform1f(w),u_lightcolor:new i.Uniform3f(w),u_vertical_gradient:new i.Uniform1f(w),u_height_factor:new i.Uniform1f(w),u_edge_radius:new i.Uniform1f(w),u_ao:new i.Uniform2f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_up_dir:new i.Uniform3f(w),u_height_lift:new i.Uniform1f(w),u_image:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_pixel_coord_upper:new i.Uniform2f(w),u_pixel_coord_lower:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w),u_opacity:new i.Uniform1f(w)}),fill:w=>({u_matrix:new i.UniformMatrix4f(w)}),fillPattern:w=>({u_matrix:new i.UniformMatrix4f(w),u_image:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_pixel_coord_upper:new i.Uniform2f(w),u_pixel_coord_lower:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w)}),fillOutline:w=>({u_matrix:new i.UniformMatrix4f(w),u_world:new i.Uniform2f(w)}),fillOutlinePattern:w=>({u_matrix:new i.UniformMatrix4f(w),u_world:new i.Uniform2f(w),u_image:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_pixel_coord_upper:new i.Uniform2f(w),u_pixel_coord_lower:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w)}),circle:w=>({u_camera_to_center_distance:new i.Uniform1f(w),u_extrude_scale:new i.UniformMatrix2f(w),u_device_pixel_ratio:new i.Uniform1f(w),u_matrix:new i.UniformMatrix4f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_up_dir:new i.Uniform3f(w)}),collisionBox:w=>({u_matrix:new i.UniformMatrix4f(w),u_camera_to_center_distance:new i.Uniform1f(w),u_extrude_scale:new i.Uniform2f(w)}),collisionCircle:w=>({u_matrix:new i.UniformMatrix4f(w),u_inv_matrix:new i.UniformMatrix4f(w),u_camera_to_center_distance:new i.Uniform1f(w),u_viewport_size:new i.Uniform2f(w)}),debug:w=>({u_color:new i.UniformColor(w),u_matrix:new i.UniformMatrix4f(w),u_overlay:new i.Uniform1i(w),u_overlay_scale:new i.Uniform1f(w)}),clippingMask:w=>({u_matrix:new i.UniformMatrix4f(w)}),heatmap:w=>({u_extrude_scale:new i.Uniform1f(w),u_intensity:new i.Uniform1f(w),u_matrix:new i.UniformMatrix4f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_up_dir:new i.Uniform3f(w)}),heatmapTexture:w=>({u_image:new i.Uniform1i(w),u_color_ramp:new i.Uniform1i(w),u_opacity:new i.Uniform1f(w)}),hillshade:w=>({u_matrix:new i.UniformMatrix4f(w),u_image:new i.Uniform1i(w),u_latrange:new i.Uniform2f(w),u_light:new i.Uniform2f(w),u_shadow:new i.UniformColor(w),u_highlight:new i.UniformColor(w),u_accent:new i.UniformColor(w)}),hillshadePrepare:w=>({u_matrix:new i.UniformMatrix4f(w),u_image:new i.Uniform1i(w),u_dimension:new i.Uniform2f(w),u_zoom:new i.Uniform1f(w),u_unpack:new i.Uniform4f(w)}),line:w=>({u_matrix:new i.UniformMatrix4f(w),u_pixels_to_tile_units:new i.UniformMatrix2f(w),u_device_pixel_ratio:new i.Uniform1f(w),u_units_to_pixels:new i.Uniform2f(w),u_dash_image:new i.Uniform1i(w),u_gradient_image:new i.Uniform1i(w),u_image_height:new i.Uniform1f(w),u_texsize:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w),u_alpha_discard_threshold:new i.Uniform1f(w),u_trim_offset:new i.Uniform2f(w)}),linePattern:w=>({u_matrix:new i.UniformMatrix4f(w),u_texsize:new i.Uniform2f(w),u_pixels_to_tile_units:new i.UniformMatrix2f(w),u_device_pixel_ratio:new i.Uniform1f(w),u_image:new i.Uniform1i(w),u_units_to_pixels:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w),u_alpha_discard_threshold:new i.Uniform1f(w)}),raster:w=>({u_matrix:new i.UniformMatrix4f(w),u_tl_parent:new i.Uniform2f(w),u_scale_parent:new i.Uniform1f(w),u_fade_t:new i.Uniform1f(w),u_opacity:new i.Uniform1f(w),u_image0:new i.Uniform1i(w),u_image1:new i.Uniform1i(w),u_brightness_low:new i.Uniform1f(w),u_brightness_high:new i.Uniform1f(w),u_saturation_factor:new i.Uniform1f(w),u_contrast_factor:new i.Uniform1f(w),u_spin_weights:new i.Uniform3f(w),u_perspective_transform:new i.Uniform2f(w)}),symbolIcon:w=>({u_is_size_zoom_constant:new i.Uniform1i(w),u_is_size_feature_constant:new i.Uniform1i(w),u_size_t:new i.Uniform1f(w),u_size:new i.Uniform1f(w),u_camera_to_center_distance:new i.Uniform1f(w),u_rotate_symbol:new i.Uniform1i(w),u_aspect_ratio:new i.Uniform1f(w),u_fade_change:new i.Uniform1f(w),u_matrix:new i.UniformMatrix4f(w),u_label_plane_matrix:new i.UniformMatrix4f(w),u_coord_matrix:new i.UniformMatrix4f(w),u_is_text:new i.Uniform1i(w),u_pitch_with_map:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_camera_forward:new i.Uniform3f(w),u_tile_matrix:new i.UniformMatrix4f(w),u_up_vector:new i.Uniform3f(w),u_ecef_origin:new i.Uniform3f(w),u_texture:new i.Uniform1i(w)}),symbolSDF:w=>({u_is_size_zoom_constant:new i.Uniform1i(w),u_is_size_feature_constant:new i.Uniform1i(w),u_size_t:new i.Uniform1f(w),u_size:new i.Uniform1f(w),u_camera_to_center_distance:new i.Uniform1f(w),u_rotate_symbol:new i.Uniform1i(w),u_aspect_ratio:new i.Uniform1f(w),u_fade_change:new i.Uniform1f(w),u_matrix:new i.UniformMatrix4f(w),u_label_plane_matrix:new i.UniformMatrix4f(w),u_coord_matrix:new i.UniformMatrix4f(w),u_is_text:new i.Uniform1i(w),u_pitch_with_map:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_texture:new i.Uniform1i(w),u_gamma_scale:new i.Uniform1f(w),u_device_pixel_ratio:new i.Uniform1f(w),u_tile_id:new i.Uniform3f(w),u_zoom_transition:new i.Uniform1f(w),u_inv_rot_matrix:new i.UniformMatrix4f(w),u_merc_center:new i.Uniform2f(w),u_camera_forward:new i.Uniform3f(w),u_tile_matrix:new i.UniformMatrix4f(w),u_up_vector:new i.Uniform3f(w),u_ecef_origin:new i.Uniform3f(w),u_is_halo:new i.Uniform1i(w)}),symbolTextAndIcon:w=>({u_is_size_zoom_constant:new i.Uniform1i(w),u_is_size_feature_constant:new i.Uniform1i(w),u_size_t:new i.Uniform1f(w),u_size:new i.Uniform1f(w),u_camera_to_center_distance:new i.Uniform1f(w),u_rotate_symbol:new i.Uniform1i(w),u_aspect_ratio:new i.Uniform1f(w),u_fade_change:new i.Uniform1f(w),u_matrix:new i.UniformMatrix4f(w),u_label_plane_matrix:new i.UniformMatrix4f(w),u_coord_matrix:new i.UniformMatrix4f(w),u_is_text:new i.Uniform1i(w),u_pitch_with_map:new i.Uniform1i(w),u_texsize:new i.Uniform2f(w),u_texsize_icon:new i.Uniform2f(w),u_texture:new i.Uniform1i(w),u_texture_icon:new i.Uniform1i(w),u_gamma_scale:new i.Uniform1f(w),u_device_pixel_ratio:new i.Uniform1f(w),u_is_halo:new i.Uniform1i(w)}),background:w=>({u_matrix:new i.UniformMatrix4f(w),u_opacity:new i.Uniform1f(w),u_color:new i.UniformColor(w)}),backgroundPattern:w=>({u_matrix:new i.UniformMatrix4f(w),u_opacity:new i.Uniform1f(w),u_image:new i.Uniform1i(w),u_pattern_tl:new i.Uniform2f(w),u_pattern_br:new i.Uniform2f(w),u_texsize:new i.Uniform2f(w),u_pattern_size:new i.Uniform2f(w),u_pixel_coord_upper:new i.Uniform2f(w),u_pixel_coord_lower:new i.Uniform2f(w),u_tile_units_to_pixels:new i.Uniform1f(w)}),terrainRaster:Ls,terrainDepth:Ls,skybox:w=>({u_matrix:new i.UniformMatrix4f(w),u_sun_direction:new i.Uniform3f(w),u_cubemap:new i.Uniform1i(w),u_opacity:new i.Uniform1f(w),u_temporal_offset:new i.Uniform1f(w)}),skyboxGradient:w=>({u_matrix:new i.UniformMatrix4f(w),u_color_ramp:new i.Uniform1i(w),u_center_direction:new i.Uniform3f(w),u_radius:new i.Uniform1f(w),u_opacity:new i.Uniform1f(w),u_temporal_offset:new i.Uniform1f(w)}),skyboxCapture:w=>({u_matrix_3f:new i.UniformMatrix3f(w),u_sun_direction:new i.Uniform3f(w),u_sun_intensity:new i.Uniform1f(w),u_color_tint_r:new i.Uniform4f(w),u_color_tint_m:new i.Uniform4f(w),u_luminance:new i.Uniform1f(w)}),globeRaster:w=>({u_proj_matrix:new i.UniformMatrix4f(w),u_globe_matrix:new i.UniformMatrix4f(w),u_normalize_matrix:new i.UniformMatrix4f(w),u_merc_matrix:new i.UniformMatrix4f(w),u_zoom_transition:new i.Uniform1f(w),u_merc_center:new i.Uniform2f(w),u_image0:new i.Uniform1i(w),u_grid_matrix:new i.UniformMatrix3f(w),u_skirt_height:new i.Uniform1f(w),u_frustum_tl:new i.Uniform3f(w),u_frustum_tr:new i.Uniform3f(w),u_frustum_br:new i.Uniform3f(w),u_frustum_bl:new i.Uniform3f(w),u_globe_pos:new i.Uniform3f(w),u_globe_radius:new i.Uniform1f(w),u_viewport:new i.Uniform2f(w)}),globeAtmosphere:w=>({u_frustum_tl:new i.Uniform3f(w),u_frustum_tr:new i.Uniform3f(w),u_frustum_br:new i.Uniform3f(w),u_frustum_bl:new i.Uniform3f(w),u_horizon:new i.Uniform1f(w),u_transition:new i.Uniform1f(w),u_fadeout_range:new i.Uniform1f(w),u_color:new i.Uniform4f(w),u_high_color:new i.Uniform4f(w),u_space_color:new i.Uniform4f(w),u_star_intensity:new i.Uniform1f(w),u_star_density:new i.Uniform1f(w),u_star_size:new i.Uniform1f(w),u_temporal_offset:new i.Uniform1f(w),u_horizon_angle:new i.Uniform1f(w),u_rotation_matrix:new i.UniformMatrix4f(w)})};let tl;function zo(w,d,g,T,P,B,X){const K=w.context,te=K.gl,he=w.transform,de=w.useProgram("collisionBox"),Ce=[];let je=0,Qe=0;for(let xt=0;xt<T.length;xt++){const jt=T[xt],Wt=d.getTile(jt),Gt=Wt.getBucket(g);if(!Gt)continue;const ti=Dt(jt,Gt,he);let Jt=ti;0===P[0]&&0===P[1]||(Jt=w.translatePosMatrix(ti,Wt,P,B));const _i=X?Gt.textCollisionBox:Gt.iconCollisionBox,Qi=Gt.collisionCircleArray;if(Qi.length>0){const ci=i.create(),Ri=Jt;i.mul(ci,Gt.placementInvProjMatrix,he.glCoordMatrix),i.mul(ci,ci,Gt.placementViewportMatrix),Ce.push({circleArray:Qi,circleOffset:Qe,transform:Ri,invTransform:ci,projection:Gt.getProjection()}),je+=Qi.length/4,Qe=je}_i&&(w.terrain&&w.terrain.setupElevationDraw(Wt,de),de.draw(K,te.LINES,i.DepthMode.disabled,i.StencilMode.disabled,w.colorModeForRenderPass(),i.CullFaceMode.disabled,vo(Jt,he,Wt,Gt.getProjection()),g.id,_i.layoutVertexBuffer,_i.indexBuffer,_i.segments,null,he.zoom,null,[_i.collisionVertexBuffer,_i.collisionVertexBufferExt]))}if(!X||!Ce.length)return;const et=w.useProgram("collisionCircle"),tt=new i.StructArrayLayout2f1f2i16;tt.resize(4*je),tt._trim();let st=0;for(const xt of Ce)for(let jt=0;jt<xt.circleArray.length/4;jt++){const Wt=4*jt,Gt=xt.circleArray[Wt+0],ti=xt.circleArray[Wt+1],Jt=xt.circleArray[Wt+2],_i=xt.circleArray[Wt+3];tt.emplace(st++,Gt,ti,Jt,_i,0),tt.emplace(st++,Gt,ti,Jt,_i,1),tt.emplace(st++,Gt,ti,Jt,_i,2),tt.emplace(st++,Gt,ti,Jt,_i,3)}(!tl||tl.length<2*je)&&(tl=function(xt){const jt=2*xt,Wt=new i.StructArrayLayout3ui6;Wt.resize(jt),Wt._trim();for(let Gt=0;Gt<jt;Gt++){const ti=6*Gt;Wt.uint16[ti+0]=4*Gt+0,Wt.uint16[ti+1]=4*Gt+1,Wt.uint16[ti+2]=4*Gt+2,Wt.uint16[ti+3]=4*Gt+2,Wt.uint16[ti+4]=4*Gt+3,Wt.uint16[ti+5]=4*Gt+0}return Wt}(je));const Te=K.createIndexBuffer(tl,!0),Ge=K.createVertexBuffer(tt,i.collisionCircleLayout.members,!0);for(const xt of Ce){const jt={u_matrix:xt.transform,u_inv_matrix:xt.invTransform,u_camera_to_center_distance:(bt=he).getCameraToCenterDistance(xt.projection),u_viewport_size:[bt.width,bt.height]};et.draw(K,te.TRIANGLES,i.DepthMode.disabled,i.StencilMode.disabled,w.colorModeForRenderPass(),i.CullFaceMode.disabled,jt,g.id,Ge,Te,i.SegmentVector.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,he.zoom)}var bt;Ge.destroy(),Te.destroy()}const Fl=i.create();function Os({width:w,height:d,anchor:g,textOffset:T,textScale:P},B){const{horizontalAlign:X,verticalAlign:K}=i.getAnchorAlignment(g),te=-(X-.5)*w,he=-(K-.5)*d,de=i.evaluateVariableOffset(g,T);return new i.Point((te/P+de[0])*B,(he/P+de[1])*B)}function Mc(w,d,g,T,P,B,X,K,te,he,de){const Ce=w.text.placedSymbolArray,je=w.text.dynamicLayoutVertexArray,Qe=w.icon.dynamicLayoutVertexArray,et={},tt=w.getProjection(),st=ei(K,tt,B),Te=B.elevation,Ge=tt.upVectorScale(K.canonical,B.center.lat,B.worldSize).metersToTile;je.clear();for(let bt=0;bt<Ce.length;bt++){const xt=Ce.get(bt),{tileAnchorX:jt,tileAnchorY:Wt,numGlyphs:Gt}=xt,ti=xt.hidden||!xt.crossTileID||w.allowVerticalPlacement&&!xt.placedOrientation?null:T[xt.crossTileID];if(ti){let Jt=0,_i=0,Qi=0;if(Te){const qi=Te?Te.getAtTileOffset(K,jt,Wt):0,[Bn,Hn,En]=tt.upVector(K.canonical,jt,Wt);Jt=qi*Bn*Ge,_i=qi*Hn*Ge,Qi=qi*En*Ge}let[ci,Ri,yi,Wi]=$(xt.projectedAnchorX+Jt,xt.projectedAnchorY+_i,xt.projectedAnchorZ+Qi,g?st:X);const pi=q(B.getCameraToCenterDistance(tt),Wi);let Ii=P.evaluateSizeForFeature(w.textSizeData,he,xt)*pi/i.ONE_EM;g&&(Ii*=w.tilePixelRatio/te);const rn=Os(ti,Ii);g?(({x:ci,y:Ri,z:yi}=tt.projectTilePoint(jt+rn.x,Wt+rn.y,K.canonical)),[ci,Ri,yi]=$(ci+Jt,Ri+_i,yi+Qi,X)):(d&&rn._rotate(-B.angle),ci+=rn.x,Ri+=rn.y,yi=0);const Bi=w.allowVerticalPlacement&&xt.placedOrientation===i.WritingMode.vertical?Math.PI/2:0;for(let qi=0;qi<Gt;qi++)i.addDynamicAttributes(je,ci,Ri,yi,Bi);de&&xt.associatedIconIndex>=0&&(et[xt.associatedIconIndex]={x:ci,y:Ri,z:yi,angle:Bi})}else pe(Gt,je)}if(de){Qe.clear();const bt=w.icon.placedSymbolArray;for(let xt=0;xt<bt.length;xt++){const jt=bt.get(xt),{numGlyphs:Wt}=jt,Gt=et[xt];if(jt.hidden||!Gt)pe(Wt,Qe);else{const{x:ti,y:Jt,z:_i,angle:Qi}=Gt;for(let ci=0;ci<Wt;ci++)i.addDynamicAttributes(Qe,ti,Jt,_i,Qi)}}w.icon.dynamicLayoutVertexBuffer.updateData(Qe)}w.text.dynamicLayoutVertexBuffer.updateData(je)}function il(w,d,g){return g.iconsInText&&d?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Fo(w,d,g,T,P,B,X,K,te,he,de,Ce){const je=w.context,Qe=je.gl,et=w.transform,tt="map"===K,st="map"===te,Te=tt&&"point"!==g.layout.get("symbol-placement"),Ge=tt&&!st&&!Te,bt=void 0!==g.layout.get("symbol-sort-key").constantOr(1);let xt=!1;const jt=w.depthModeForSublayer(0,i.DepthMode.ReadOnly),Wt=[i.mercatorXfromLng(et.center.lng),i.mercatorYfromLat(et.center.lat)],Gt=g.layout.get("text-variable-anchor"),ti="globe"===et.projection.name,Jt=[],_i=[0,-1,0];let Qi=_i;!ti&&!et.mercatorFromTransition||tt||(Qi=function(ci){const Ri=ci._camera.getWorldToCamera(ci.worldSize,1),yi=i.multiply([],Ri,ci.globeMatrix);i.invert(yi,yi);const Wi=[0,0,0],pi=[0,1,0,0];return i.transformMat4$1(pi,pi,yi),Wi[0]=pi[0],Wi[1]=pi[1],Wi[2]=pi[2],i.normalize(Wi,Wi),Wi}(et));for(const ci of T){const Ri=d.getTile(ci),yi=Ri.getBucket(g);if(!yi||"mercator"===yi.projection.name&&ti)continue;const Wi=P?yi.text:yi.icon;if(!Wi||yi.fullyClipped||!Wi.segments.get().length)continue;const pi=Wi.programConfigurations.get(g.id),Ii=P||yi.sdfIcons,rn=P?yi.textSizeData:yi.iconSizeData,Bi=st||0!==et.pitch,qi=i.evaluateSizeForZoom(rn,et.zoom);let Bn,Hn,En,qn,rr=[0,0],sr=null;if(P)Hn=Ri.glyphAtlasTexture,En=Qe.LINEAR,Bn=Ri.glyphAtlasTexture.size,yi.iconsInText&&(rr=Ri.imageAtlasTexture.size,sr=Ri.imageAtlasTexture,qn=Bi||w.options.rotating||w.options.zooming||"composite"===rn.kind||"camera"===rn.kind?Qe.LINEAR:Qe.NEAREST);else{const Ua=1!==g.layout.get("icon-size").constantOr(0)||yi.iconsNeedLinear;Hn=Ri.imageAtlasTexture,En=Ii||w.options.rotating||w.options.zooming||Ua||Bi?Qe.LINEAR:Qe.NEAREST,Bn=Ri.imageAtlasTexture.size}const Vn="globe"===yi.projection.name,Ir=Vn?Qi:_i,vs=Vn?i.globeToMercatorTransition(et.zoom):0,_s=ei(ci,yi.getProjection(),et),cs=et.calculatePixelsToTileUnitsMatrix(Ri),Hr=I(_s,Ri.tileID.canonical,st,tt,et,yi.getProjection(),cs),_o=w.terrain&&st&&Te?i.invert(i.create(),Hr):Fl,Sa=U(_s,Ri.tileID.canonical,st,tt,et,yi.getProjection(),cs),dc=Gt&&yi.hasTextData(),Ds="none"!==g.layout.get("icon-text-fit")&&dc&&yi.hasIconData();if(Te){const Ua=et.elevation,hc=Ua?Ua.getAtTileOffsetFunc(ci,et.center.lat,et.worldSize,yi.getProjection()):null,Wc=F(_s,Ri.tileID.canonical,st,tt,et,yi.getProjection(),cs);ue(yi,_s,w,P,Wc,Sa,st,he,hc,ci)}const Ur=Te||P&&Gt||Ds,Jr=w.translatePosMatrix(_s,Ri,B,X),Es=Ur?Fl:Hr,fa=w.translatePosMatrix(Sa,Ri,B,X,!0),ns=yi.getProjection().createInversionMatrix(et,ci.canonical),Is=[];w.terrainRenderModeElevated()&&st&&Is.push("PITCH_WITH_MAP_TERRAIN"),Vn&&Is.push("PROJECTION_GLOBE_VIEW"),Ur&&Is.push("PROJECTED_POS_ON_VIEWPORT");const Uc=Ii&&0!==g.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1);let ko;ko=Ii?yi.iconsInText?Ac(rn.kind,qi,Ge,st,w,Jr,Es,fa,Bn,rr,ci,vs,Wt,ns,Ir,yi.getProjection()):So(rn.kind,qi,Ge,st,w,Jr,Es,fa,P,Bn,!0,ci,vs,Wt,ns,Ir,yi.getProjection()):ac(rn.kind,qi,Ge,st,w,Jr,Es,fa,P,Bn,ci,vs,Wt,ns,Ir,yi.getProjection());const El={program:w.useProgram(il(Ii,P,yi),pi,Is),buffers:Wi,uniformValues:ko,atlasTexture:Hn,atlasTextureIcon:sr,atlasInterpolation:En,atlasInterpolationIcon:qn,isSDF:Ii,hasHalo:Uc,tile:Ri,labelPlaneMatrixInv:_o};if(bt&&yi.canOverlap){xt=!0;const Ua=Wi.segments.get();for(const hc of Ua)Jt.push({segments:new i.SegmentVector([hc]),sortKey:hc.sortKey,state:El})}else Jt.push({segments:Wi.segments,sortKey:0,state:El})}xt&&Jt.sort((ci,Ri)=>ci.sortKey-Ri.sortKey);for(const ci of Jt){const Ri=ci.state;if(w.terrain&&w.terrain.setupElevationDraw(Ri.tile,Ri.program,{useDepthForOcclusion:!ti,labelPlaneMatrixInv:Ri.labelPlaneMatrixInv}),je.activeTexture.set(Qe.TEXTURE0),Ri.atlasTexture.bind(Ri.atlasInterpolation,Qe.CLAMP_TO_EDGE),Ri.atlasTextureIcon&&(je.activeTexture.set(Qe.TEXTURE1),Ri.atlasTextureIcon&&Ri.atlasTextureIcon.bind(Ri.atlasInterpolationIcon,Qe.CLAMP_TO_EDGE)),Ri.isSDF){const yi=Ri.uniformValues;Ri.hasHalo&&(yi.u_is_halo=1,za(Ri.buffers,ci.segments,g,w,Ri.program,jt,de,Ce,yi)),yi.u_is_halo=0}za(Ri.buffers,ci.segments,g,w,Ri.program,jt,de,Ce,Ri.uniformValues)}}function za(w,d,g,T,P,B,X,K,te){const he=T.context,de=[w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer,w.globeExtVertexBuffer];P.draw(he,he.gl.TRIANGLES,B,X,K,i.CullFaceMode.disabled,te,g.id,w.layoutVertexBuffer,w.indexBuffer,d,g.paint,T.transform.zoom,w.programConfigurations.get(g.id),de)}function nl(w,d,g,T,P,B,X){const K=w.context.gl,te=g.paint.get("fill-pattern"),he=te&&te.constantOr(1);let de,Ce,je,Qe,et;X?(Ce=he&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=K.LINES):(Ce=he?"fillPattern":"fill",de=K.TRIANGLES);for(const tt of T){const st=d.getTile(tt);if(he&&!st.patternsLoaded())continue;const Te=st.getBucket(g);if(!Te)continue;w.prepareDrawTile();const Ge=Te.programConfigurations.get(g.id),bt=w.useProgram(Ce,Ge);he&&(w.context.activeTexture.set(K.TEXTURE0),st.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Ge.updatePaintBuffers());const xt=te.constantOr(null);if(xt&&st.imageAtlas){const Wt=st.imageAtlas.patternPositions[xt.toString()];Wt&&Ge.setConstantPatternPositions(Wt)}const jt=w.translatePosMatrix(tt.projMatrix,st,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(X){Qe=Te.indexBuffer2,et=Te.segments2;const Wt=w.terrain&&w.terrain.renderingToTexture?w.terrain.drapeBufferSize:[K.drawingBufferWidth,K.drawingBufferHeight];je="fillOutlinePattern"===Ce&&he?_u(jt,w,st,Wt):go(jt,Wt)}else Qe=Te.indexBuffer,et=Te.segments,je=he?ds(jt,w,st):sa(jt);w.prepareDrawProgram(w.context,bt,tt.toUnwrapped()),bt.draw(w.context,de,P,w.stencilModeForClipping(tt),B,i.CullFaceMode.disabled,je,g.id,Te.layoutVertexBuffer,Qe,et,g.paint,w.transform.zoom,Ge)}}function ca(w,d,g,T,P,B,X){const K=w.context,te=K.gl,he=w.transform,de=g.paint.get("fill-extrusion-pattern"),Ce=de.constantOr(1),je=g.paint.get("fill-extrusion-opacity"),Qe=[g.paint.get("fill-extrusion-ambient-occlusion-intensity"),g.paint.get("fill-extrusion-ambient-occlusion-radius")],et=g.layout.get("fill-extrusion-edge-radius"),tt=et>0&&!g.paint.get("fill-extrusion-rounded-roof"),st=tt?0:et,Te="globe"===he.projection.name?i.fillExtrusionHeightLift():0,Ge="globe"===he.projection.name,bt=Ge?i.globeToMercatorTransition(he.zoom):0,xt=[i.mercatorXfromLng(he.center.lng),i.mercatorYfromLat(he.center.lat)],jt=[];Ge&&jt.push("PROJECTION_GLOBE_VIEW"),Qe[0]>0&&jt.push("FAUX_AO"),tt&&jt.push("ZERO_ROOF_RADIUS");for(const Wt of T){const Gt=d.getTile(Wt),ti=Gt.getBucket(g);if(!ti||ti.projection.name!==he.projection.name)continue;const Jt=ti.programConfigurations.get(g.id),_i=w.useProgram(Ce?"fillExtrusionPattern":"fillExtrusion",Jt,jt);if(w.terrain){const Ii=w.terrain;if(w.style.terrainSetForDrapingOnly())Ii.setupElevationDraw(Gt,_i,{useMeterToDem:!0});else{if(!ti.enableTerrain)continue;if(Ii.setupElevationDraw(Gt,_i,{useMeterToDem:!0}),Bl(K,d,Wt,ti,g,Ii),!ti.centroidVertexBuffer){const rn=_i.attributes.a_centroid_pos;void 0!==rn&&te.vertexAttrib2f(rn,0,0)}}}Ce&&(w.context.activeTexture.set(te.TEXTURE0),Gt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),Jt.updatePaintBuffers());const Qi=de.constantOr(null);if(Qi&&Gt.imageAtlas){const Ii=Gt.imageAtlas.patternPositions[Qi.toString()];Ii&&Jt.setConstantPatternPositions(Ii)}const ci=w.translatePosMatrix(Wt.projMatrix,Gt,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Ri=he.projection.createInversionMatrix(he,Wt.canonical),yi=g.paint.get("fill-extrusion-vertical-gradient"),Wi=Ce?vl(ci,w,yi,je,Qe,st,Wt,Gt,Te,bt,xt,Ri):Ja(ci,w,yi,je,Qe,st,Wt,Te,bt,xt,Ri);w.prepareDrawProgram(K,_i,Wt.toUnwrapped());const pi=[];w.terrain&&pi.push(ti.centroidVertexBuffer),Ge&&pi.push(ti.layoutVertexExtBuffer),_i.draw(K,K.gl.TRIANGLES,P,B,X,i.CullFaceMode.backCCW,Wi,g.id,ti.layoutVertexBuffer,ti.indexBuffer,ti.segments,g.paint,w.transform.zoom,Jt,pi)}}function Bl(w,d,g,T,P,B){const X=[Te=>{let Ge=Te.canonical.x-1,bt=Te.wrap;return Ge<0&&(Ge=(1<<Te.canonical.z)-1,bt--),new i.OverscaledTileID(Te.overscaledZ,bt,Te.canonical.z,Ge,Te.canonical.y)},Te=>{let Ge=Te.canonical.x+1,bt=Te.wrap;return Ge===1<<Te.canonical.z&&(Ge=0,bt++),new i.OverscaledTileID(Te.overscaledZ,bt,Te.canonical.z,Ge,Te.canonical.y)},Te=>new i.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,(0===Te.canonical.y?1<<Te.canonical.z:Te.canonical.y)-1),Te=>new i.OverscaledTileID(Te.overscaledZ,Te.wrap,Te.canonical.z,Te.canonical.x,Te.canonical.y===(1<<Te.canonical.z)-1?0:Te.canonical.y+1)],K=Te=>{const Ge=d.getSource().minzoom,bt=jt=>{const Wt=d.getTileByID(jt);if(Wt&&Wt.hasData())return Wt.getBucket(P)},xt=[0,-1,1];for(const jt of xt){if(Te.overscaledZ+jt<Ge)continue;const Wt=bt(Te.calculateScaledKey(Te.overscaledZ+jt));if(Wt)return Wt}},te=[0,0,0],he=(Te,Ge)=>(te[0]=Math.min(Te.min.y,Ge.min.y),te[1]=Math.max(Te.max.y,Ge.max.y),te[2]=i.EXTENT-Ge.min.x>Te.max.x?Ge.min.x-i.EXTENT:Te.max.x,te),de=(Te,Ge)=>(te[0]=Math.min(Te.min.x,Ge.min.x),te[1]=Math.max(Te.max.x,Ge.max.x),te[2]=i.EXTENT-Ge.min.y>Te.max.y?Ge.min.y-i.EXTENT:Te.max.y,te),Ce=[(Te,Ge)=>he(Te,Ge),(Te,Ge)=>he(Ge,Te),(Te,Ge)=>de(Te,Ge),(Te,Ge)=>de(Ge,Te)],je=new i.Point(0,0);let Qe,et,tt;const st=(Te,Ge,bt,xt,jt)=>{const Wt=[[xt?bt:Te,xt?Te:bt,0],[xt?bt:Ge,xt?Ge:bt,0]],Gt=jt<0?i.EXTENT+jt:jt,ti=[xt?Gt:(Te+Ge)/2,xt?(Te+Ge)/2:Gt,0];return 0===bt&&jt<0||0!==bt&&jt>0?B.getForTilePoints(tt,[ti],!0,et):Wt.push(ti),B.getForTilePoints(g,Wt,!0,Qe),Math.max(Wt[0][2],Wt[1][2],ti[2])/B.exaggeration()};for(let Te=0;Te<4;Te++){const Ge=(Te<2?1:5)-Te,bt=T.borders[Te];if(0===bt.length)continue;const xt=tt=X[Te](g),jt=K(xt);if(!(jt&&jt instanceof i.FillExtrusionBucket&&jt.enableTerrain)||T.borderDoneWithNeighborZ[Te]===jt.canonical.z&&jt.borderDoneWithNeighborZ[Ge]===T.canonical.z||(et=B.findDEMTileFor(xt),!et||!et.dem))continue;if(!Qe){const Jt=B.findDEMTileFor(g);if(!Jt||!Jt.dem)return;Qe=Jt}const Wt=jt.borders[Ge];let Gt=0;const ti=jt.borderDoneWithNeighborZ[Ge]!==T.canonical.z;if(T.canonical.z===jt.canonical.z){for(let Jt=0;Jt<bt.length;Jt++){const _i=T.featuresOnBorder[bt[Jt]],Qi=_i.borders[Te];let ci;for(;Gt<Wt.length&&(ci=jt.featuresOnBorder[Wt[Gt]],!(ci.borders[Ge][1]>Qi[0]+3));)ti&&jt.encodeCentroid(void 0,ci,!1),Gt++;if(ci&&Gt<Wt.length){const Ri=Gt;let yi=0;for(;!(ci.borders[Ge][0]>Qi[1]-3)&&(yi++,++Gt!==Wt.length);)ci=jt.featuresOnBorder[Wt[Gt]];if(ci=jt.featuresOnBorder[Wt[Ri]],_i.intersectsCount()>1||ci.intersectsCount()>1||1!==yi){1!==yi&&(Gt=Ri),T.encodeCentroid(void 0,_i,!1),ti&&jt.encodeCentroid(void 0,ci,!1);continue}const Wi=Ce[Te](_i,ci),pi=Te%2?i.EXTENT-1:0;je.x=st(Wi[0],Math.min(i.EXTENT-1,Wi[1]),pi,Te<2,Wi[2]),je.y=0,T.encodeCentroid(je,_i,!1),ti&&jt.encodeCentroid(je,ci,!1)}else T.encodeCentroid(void 0,_i,!1)}T.borderDoneWithNeighborZ[Te]=jt.canonical.z,T.needsCentroidUpdate=!0,ti&&(jt.borderDoneWithNeighborZ[Ge]=T.canonical.z,jt.needsCentroidUpdate=!0)}else{for(const Jt of bt)T.encodeCentroid(void 0,T.featuresOnBorder[Jt],!1);if(ti){for(const Jt of Wt)jt.encodeCentroid(void 0,jt.featuresOnBorder[Jt],!1);jt.borderDoneWithNeighborZ[Ge]=T.canonical.z,jt.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[Te]=jt.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&0!==T.centroidVertexArray.length)&&T.uploadCentroid(w)}const xa=new i.Color(1,0,0,1),Vc=new i.Color(0,1,0,1),Fa=new i.Color(0,0,1,1),Uu=new i.Color(1,0,1,1),yu=new i.Color(0,1,1,1);function Gc(w,d,g){const T=w.context,P=w.transform,B=T.gl,X="globe"===P.projection.name,K=X?["PROJECTION_GLOBE_VIEW"]:null;let te=g.projMatrix;if(X&&i.globeToMercatorTransition(P.zoom)>0){const _i=i.transitionTileAABBinECEF(g.canonical,P),Qi=i.globeDenormalizeECEF(_i);te=i.multiply(new Float32Array(16),P.globeMatrix,Qi),i.multiply(te,P.projMatrix,te)}const he=w.useProgram("debug",null,K),de=d.getTileByID(g.key);w.terrain&&w.terrain.setupElevationDraw(de,he);const Ce=i.DepthMode.disabled,je=i.StencilMode.disabled,Qe=w.colorModeForRenderPass();T.activeTexture.set(B.TEXTURE0),w.emptyTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),X?de._makeGlobeTileDebugBuffers(w.context,P):de._makeDebugTileBoundsBuffers(w.context,P.projection);const tt=de._tileDebugBuffer||w.debugBuffer,st=de._tileDebugIndexBuffer||w.debugIndexBuffer,Te=de._tileDebugSegments||w.debugSegments;he.draw(T,B.LINE_STRIP,Ce,je,Qe,i.CullFaceMode.disabled,zl(te,i.Color.red),"$debug",tt,st,Te,null,null,null,[de._globeTileDebugBorderBuffer]);const Ge=de.latestRawTileData,bt=Math.floor((Ge&&Ge.byteLength||0)/1024),xt=d.getTile(g).tileSize,jt=512/Math.min(xt,512)*(g.overscaledZ/P.zoom)*.5;let Wt=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Wt+=` => ${g.overscaledZ}`),Wt+=` ${bt}kb`,function(_i,Qi){_i.initDebugOverlayCanvas();const ci=_i.debugOverlayCanvas,Ri=_i.context.gl,yi=_i.debugOverlayCanvas.getContext("2d");yi.clearRect(0,0,ci.width,ci.height),yi.shadowColor="white",yi.shadowBlur=2,yi.lineWidth=1.5,yi.strokeStyle="white",yi.textBaseline="top",yi.font="bold 36px Open Sans, sans-serif",yi.fillText(Qi,5,5),yi.strokeText(Qi,5,5),_i.debugOverlayTexture.update(ci),_i.debugOverlayTexture.bind(Ri.LINEAR,Ri.CLAMP_TO_EDGE)}(w,Wt);const Gt=de._tileDebugTextBuffer||w.debugBuffer,ti=de._tileDebugTextIndexBuffer||w.quadTriangleIndexBuffer,Jt=de._tileDebugTextSegments||w.debugSegments;he.draw(T,B.TRIANGLES,Ce,je,i.ColorMode.alphaBlended,i.CullFaceMode.disabled,zl(te,i.Color.transparent,jt),"$debug",Gt,ti,Jt,null,null,null,[de._globeTileDebugTextBuffer])}function ua(w,d,g,T){Nl(w,0,d+g/2,w.transform.width,g,T)}function wa(w,d,g,T){Nl(w,d-g/2,0,g,w.transform.height,T)}function Nl(w,d,g,T,P,B){const X=w.context,K=X.gl;K.enable(K.SCISSOR_TEST),K.scissor(d*i.exported.devicePixelRatio,g*i.exported.devicePixelRatio,T*i.exported.devicePixelRatio,P*i.exported.devicePixelRatio),X.clear({color:B}),K.disable(K.SCISSOR_TEST)}const Dc=i.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Yl}=Dc;function da(w,d,g,T){w.emplaceBack(d,g,T)}class rl{constructor(d){this.vertexArray=new i.StructArrayLayout3f12,this.indices=new i.StructArrayLayout3ui6,da(this.vertexArray,-1,-1,1),da(this.vertexArray,1,-1,1),da(this.vertexArray,-1,1,1),da(this.vertexArray,1,1,1),da(this.vertexArray,-1,-1,-1),da(this.vertexArray,1,-1,-1),da(this.vertexArray,-1,1,-1),da(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=d.createVertexBuffer(this.vertexArray,Yl),this.indexBuffer=d.createIndexBuffer(this.indices),this.segment=i.SegmentVector.simpleSegment(0,0,36,12)}}function hs(w,d,g,T,P,B){const X=w.gl,K=d.paint.get("sky-atmosphere-color"),te=d.paint.get("sky-atmosphere-halo-color"),he=d.paint.get("sky-atmosphere-sun-intensity"),de={u_matrix_3f:i.fromMat4(i.create$1(),T),u_sun_direction:P,u_sun_intensity:he,u_color_tint_r:[(et=K).r,et.g,et.b,et.a],u_color_tint_m:[(tt=te).r,tt.g,tt.b,tt.a],u_luminance:5e-5};var et,tt;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+B,d.skyboxTexture,0),g.draw(w,X.TRIANGLES,i.DepthMode.disabled,i.StencilMode.disabled,i.ColorMode.unblended,i.CullFaceMode.frontCW,de,"skyboxCapture",d.skyboxGeometry.vertexBuffer,d.skyboxGeometry.indexBuffer,d.skyboxGeometry.segment)}const eo=i.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ba{constructor(d){const g=new i.StructArrayLayout5f20;g.emplaceBack(-1,1,1,0,0),g.emplaceBack(1,1,1,1,0),g.emplaceBack(1,-1,1,1,1),g.emplaceBack(-1,-1,1,0,1);const T=new i.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=d.createVertexBuffer(g,eo.members),this.indexBuffer=d.createIndexBuffer(T),this.segments=i.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Na={symbol:function(w,d,g,T,P){if("translucent"!==w.renderPass)return;const B=i.StencilMode.disabled,X=w.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(K,te,he,de,Ce,je,Qe){const et=te.transform,tt="map"===Ce,st="map"===je;for(const Te of K){const Ge=de.getTile(Te),bt=Ge.getBucket(he);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const xt=i.evaluateSizeForZoom(bt.textSizeData,et.zoom),jt=ei(Te,bt.getProjection(),et),Wt=et.calculatePixelsToTileUnitsMatrix(Ge),Gt=I(jt,Ge.tileID.canonical,st,tt,et,bt.getProjection(),Wt),ti="none"!==he.layout.get("icon-text-fit")&&bt.hasIconData();if(xt){const Jt=Math.pow(2,et.zoom-Ge.tileID.overscaledZ);Mc(bt,tt,st,Qe,i.symbolSize,et,Gt,Te,Jt,xt,ti)}}}(T,w,g,d,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),P),0!==g.paint.get("icon-opacity").constantOr(1)&&Fo(w,d,g,T,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),B,X),0!==g.paint.get("text-opacity").constantOr(1)&&Fo(w,d,g,T,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),B,X),d.map.showCollisionBoxes&&(zo(w,d,g,T,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),zo(w,d,g,T,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))},circle:function(w,d,g,T){if("translucent"!==w.renderPass)return;const P=g.paint.get("circle-opacity"),B=g.paint.get("circle-stroke-width"),X=g.paint.get("circle-stroke-opacity"),K=void 0!==g.layout.get("circle-sort-key").constantOr(1);if(0===P.constantOr(1)&&(0===B.constantOr(1)||0===X.constantOr(1)))return;const te=w.context,he=te.gl,de=w.transform,Ce=w.depthModeForSublayer(0,i.DepthMode.ReadOnly),je=i.StencilMode.disabled,Qe=w.colorModeForRenderPass(),et="globe"===de.projection.name,tt=[i.mercatorXfromLng(de.center.lng),i.mercatorYfromLat(de.center.lat)],st=[];for(let Ge=0;Ge<T.length;Ge++){const bt=T[Ge],xt=d.getTile(bt),jt=xt.getBucket(g);if(!jt||jt.projection.name!==de.projection.name)continue;const Wt=jt.programConfigurations.get(g.id),Gt=oc(g);et&&Gt.push("PROJECTION_GLOBE_VIEW");const ti=w.useProgram("circle",Wt,Gt),Jt=jt.layoutVertexBuffer,_i=jt.globeExtVertexBuffer,Qi=jt.indexBuffer,ci=de.projection.createInversionMatrix(de,bt.canonical),Ri={programConfiguration:Wt,program:ti,layoutVertexBuffer:Jt,globeExtVertexBuffer:_i,indexBuffer:Qi,uniformValues:ya(w,bt,xt,ci,tt,g),tile:xt};if(K){const yi=jt.segments.get();for(const Wi of yi)st.push({segments:new i.SegmentVector([Wi]),sortKey:Wi.sortKey,state:Ri})}else st.push({segments:jt.segments,sortKey:0,state:Ri})}K&&st.sort((Ge,bt)=>Ge.sortKey-bt.sortKey);const Te={useDepthForOcclusion:!et};for(const Ge of st){const{programConfiguration:bt,program:xt,layoutVertexBuffer:jt,globeExtVertexBuffer:Wt,indexBuffer:Gt,uniformValues:ti,tile:Jt}=Ge.state,_i=Ge.segments;w.terrain&&w.terrain.setupElevationDraw(Jt,xt,Te),w.prepareDrawProgram(te,xt,Jt.tileID.toUnwrapped()),xt.draw(te,he.TRIANGLES,Ce,je,Qe,i.CullFaceMode.disabled,ti,g.id,jt,Gt,_i,g.paint,de.zoom,bt,[Wt])}},heatmap:function(w,d,g,T){if(0!==g.paint.get("heatmap-opacity"))if("offscreen"===w.renderPass){const P=w.context,B=P.gl,X=i.StencilMode.disabled,K=new i.ColorMode([B.ONE,B.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function(Qe,et,tt,st){const Te=Qe.gl,Ge=et.width*st,bt=et.height*st;Qe.activeTexture.set(Te.TEXTURE1),Qe.viewport.set([0,0,Ge,bt]);let xt=tt.heatmapFbo;if(!xt||xt&&(xt.width!==Ge||xt.height!==bt)){xt&&xt.destroy();const jt=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,jt),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),xt=tt.heatmapFbo=Qe.createFramebuffer(Ge,bt,!1),function(Wt,Gt,ti,Jt,_i,Qi){const ci=Wt.gl;ci.texImage2D(ci.TEXTURE_2D,0,Wt.isWebGL2&&Wt.extRenderToTextureHalfFloat?ci.RGBA16F:ci.RGBA,_i,Qi,0,ci.RGBA,Wt.extRenderToTextureHalfFloat?Wt.isWebGL2?ci.HALF_FLOAT:Wt.extTextureHalfFloat.HALF_FLOAT_OES:ci.UNSIGNED_BYTE,null),Jt.colorAttachment.set(ti)}(Qe,0,jt,xt,Ge,bt)}else Te.bindTexture(Te.TEXTURE_2D,xt.colorAttachment.get()),Qe.bindFramebuffer.set(xt.framebuffer)})(P,w,g,"globe"===w.transform.projection.name?.5:.25),P.clear({color:i.Color.transparent});const te=w.transform,he="globe"===te.projection.name,de=he?["PROJECTION_GLOBE_VIEW"]:null,Ce=he?i.CullFaceMode.frontCCW:i.CullFaceMode.disabled,je=[i.mercatorXfromLng(te.center.lng),i.mercatorYfromLat(te.center.lat)];for(let Qe=0;Qe<T.length;Qe++){const et=T[Qe];if(d.hasRenderableParent(et))continue;const tt=d.getTile(et),st=tt.getBucket(g);if(!st||st.projection.name!==te.projection.name)continue;const Te=st.programConfigurations.get(g.id),Ge=w.useProgram("heatmap",Te,de),{zoom:bt}=w.transform;w.terrain&&w.terrain.setupElevationDraw(tt,Ge),w.prepareDrawProgram(P,Ge,et.toUnwrapped());const xt=te.projection.createInversionMatrix(te,et.canonical);Ge.draw(P,B.TRIANGLES,i.DepthMode.disabled,X,K,Ce,Qa(w,et,tt,xt,je,bt,g.paint.get("heatmap-intensity")),g.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,g.paint,w.transform.zoom,Te,he?[st.globeExtVertexBuffer]:null)}P.viewport.set([0,0,w.width,w.height])}else"translucent"===w.renderPass&&(w.context.setColorMode(w.colorModeForRenderPass()),function(P,B){const X=P.context,K=X.gl,te=B.heatmapFbo;if(!te)return;X.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),X.activeTexture.set(K.TEXTURE1);let he=B.colorRampTexture;he||(he=B.colorRampTexture=new i.Texture(X,B.colorRamp,K.RGBA)),he.bind(K.LINEAR,K.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(X,K.TRIANGLES,i.DepthMode.disabled,i.StencilMode.disabled,P.colorModeForRenderPass(),i.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:B.paint.get("heatmap-opacity")},B.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,B.paint,P.transform.zoom)}(w,g))},line:function(w,d,g,T){if("translucent"!==w.renderPass)return;const P=g.paint.get("line-opacity"),B=g.paint.get("line-width");if(0===P.constantOr(1)||0===B.constantOr(1))return;const X=w.depthModeForSublayer(0,i.DepthMode.ReadOnly),K=w.colorModeForRenderPass(),te=w.terrain&&w.terrain.renderingToTexture?1:i.exported.devicePixelRatio,he=g.paint.get("line-dasharray"),de=he.constantOr(1),Ce=g.layout.get("line-cap"),je=g.paint.get("line-pattern"),Qe=je.constantOr(1),et=g.paint.get("line-gradient"),tt=Qe?"linePattern":"line",st=w.context,Te=st.gl,Ge=(xt=>{const jt=[];Qs(xt)&&jt.push("RENDER_LINE_DASH"),xt.paint.get("line-gradient")&&jt.push("RENDER_LINE_GRADIENT");const Wt=xt.paint.get("line-trim-offset");0===Wt[0]&&0===Wt[1]||jt.push("RENDER_LINE_TRIM_OFFSET");const Gt=xt.paint.get("line-pattern").constantOr(1),ti=1!==xt.paint.get("line-opacity").constantOr(1);return!Gt&&ti&&jt.push("RENDER_LINE_ALPHA_DISCARD"),jt})(g);let bt=Ge.includes("RENDER_LINE_ALPHA_DISCARD");w.terrain&&w.terrain.clipOrMaskOverlapStencilType()&&(bt=!1);for(const xt of T){const jt=d.getTile(xt);if(Qe&&!jt.patternsLoaded())continue;const Wt=jt.getBucket(g);if(!Wt)continue;w.prepareDrawTile();const Gt=Wt.programConfigurations.get(g.id),ti=w.useProgram(tt,Gt,Ge),Jt=je.constantOr(null);if(Jt&&jt.imageAtlas){const Ii=jt.imageAtlas.patternPositions[Jt.toString()];Ii&&Gt.setConstantPatternPositions(Ii)}const _i=he.constantOr(null),Qi=Ce.constantOr(null);if(!Qe&&_i&&Qi&&jt.lineAtlas){const Ii=jt.lineAtlas.getDash(_i,Qi);Ii&&Gt.setConstantPatternPositions(Ii)}let[ci,Ri]=g.paint.get("line-trim-offset");("round"===Qi||"square"===Qi)&&ci!==Ri&&(0===ci&&(ci-=1),1===Ri&&(Ri+=1));const yi=w.terrain?xt.projMatrix:null,Wi=Qe?el(w,jt,g,yi,te):Ra(w,jt,g,yi,Wt.lineClipsArray.length,te,[ci,Ri]);if(et){const Ii=Wt.gradients[g.id];let rn=Ii.texture;if(g.gradientVersion!==Ii.version){let Bi=256;if(g.stepInterpolant){const qi=d.getSource().maxzoom,Bn=xt.canonical.z===qi?Math.ceil(1<<w.transform.maxZoom-xt.canonical.z):1;Bi=i.clamp(i.nextPowerOfTwo(Wt.maxLineLength/i.EXTENT*1024*Bn),256,st.maxTextureSize)}Ii.gradient=i.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Bi,image:Ii.gradient||void 0,clips:Wt.lineClipsArray}),Ii.texture?Ii.texture.update(Ii.gradient):Ii.texture=new i.Texture(st,Ii.gradient,Te.RGBA),Ii.version=g.gradientVersion,rn=Ii.texture}st.activeTexture.set(Te.TEXTURE1),rn.bind(g.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}de&&(st.activeTexture.set(Te.TEXTURE0),jt.lineAtlasTexture.bind(Te.LINEAR,Te.REPEAT),Gt.updatePaintBuffers()),Qe&&(st.activeTexture.set(Te.TEXTURE0),jt.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),Gt.updatePaintBuffers()),w.prepareDrawProgram(st,ti,xt.toUnwrapped());const pi=Ii=>{ti.draw(st,Te.TRIANGLES,X,Ii,K,i.CullFaceMode.disabled,Wi,g.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,g.paint,w.transform.zoom,Gt,[Wt.layoutVertexBuffer2])};if(bt){const Ii=w.stencilModeForClipping(xt).ref;0===Ii&&w.terrain&&st.clear({stencil:0});const rn={func:Te.EQUAL,mask:255};Wi.u_alpha_discard_threshold=.8,pi(new i.StencilMode(rn,Ii,255,Te.KEEP,Te.KEEP,Te.INVERT)),Wi.u_alpha_discard_threshold=0,pi(new i.StencilMode(rn,Ii,255,Te.KEEP,Te.KEEP,Te.KEEP))}else pi(w.stencilModeForClipping(xt))}bt&&(w.resetStencilClippingMasks(),w.terrain&&st.clear({stencil:0}))},fill:function(w,d,g,T){const P=g.paint.get("fill-color"),B=g.paint.get("fill-opacity");if(0===B.constantOr(1))return;const X=w.colorModeForRenderPass(),K=g.paint.get("fill-pattern"),te=w.opaquePassEnabledForLayer()&&!K.constantOr(1)&&1===P.constantOr(i.Color.transparent).a&&1===B.constantOr(0)?"opaque":"translucent";if(w.renderPass===te){const he=w.depthModeForSublayer(1,"opaque"===w.renderPass?i.DepthMode.ReadWrite:i.DepthMode.ReadOnly);nl(w,d,g,T,he,X,!1)}if("translucent"===w.renderPass&&g.paint.get("fill-antialias")){const he=w.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,i.DepthMode.ReadOnly);nl(w,d,g,T,he,X,!0)}},"fill-extrusion":function(w,d,g,T){const P=g.paint.get("fill-extrusion-opacity");if(0!==P&&"translucent"===w.renderPass){const B=new i.DepthMode(w.context.gl.LEQUAL,i.DepthMode.ReadWrite,w.depthRangeFor3D);if(1!==P||g.paint.get("fill-extrusion-pattern").constantOr(1))ca(w,d,g,T,B,i.StencilMode.disabled,i.ColorMode.disabled),ca(w,d,g,T,B,w.stencilModeFor3D(),w.colorModeForRenderPass()),w.resetStencilClippingMasks();else{const X=w.colorModeForRenderPass();ca(w,d,g,T,B,i.StencilMode.disabled,X)}}},hillshade:function(w,d,g,T){if("offscreen"!==w.renderPass&&"translucent"!==w.renderPass)return;const P=w.context,B=w.depthModeForSublayer(0,i.DepthMode.ReadOnly),X=w.colorModeForRenderPass(),K=w.terrain&&w.terrain.renderingToTexture,[te,he]="translucent"!==w.renderPass||K?[{},T]:w.stencilConfigForOverlap(T);for(const de of he){const Ce=d.getTile(de);if(Ce.needsHillshadePrepare&&"offscreen"===w.renderPass)Uo(w,Ce,g,B,i.StencilMode.disabled,X);else if("translucent"===w.renderPass){const je=K&&w.terrain?w.terrain.stencilModeForRTTOverlap(de):te[de.overscaledZ];qa(w,de,Ce,g,B,je,X)}}P.viewport.set([0,0,w.width,w.height]),w.resetStencilClippingMasks()},raster:function(w,d,g,T,P,B){if("translucent"!==w.renderPass||0===g.paint.get("raster-opacity")||!T.length)return;const X=w.context,K=X.gl,te=d.getSource(),he=w.useProgram("raster"),de=w.colorModeForRenderPass(),Ce=w.terrain&&w.terrain.renderingToTexture,[je,Qe]=te instanceof Et||Ce?[{},T]:w.stencilConfigForOverlap(T),et=Qe[Qe.length-1].overscaledZ,tt=!w.options.moving;for(const st of Qe){const Te=Ce?i.DepthMode.disabled:w.depthModeForSublayer(st.overscaledZ-et,1===g.paint.get("raster-opacity")?i.DepthMode.ReadWrite:i.DepthMode.ReadOnly,K.LESS),Ge=st.toUnwrapped(),bt=d.getTile(st);if(Ce&&(!bt||!bt.hasData()))continue;const xt=Ce?st.projMatrix:w.transform.calculateProjMatrix(Ge,tt),jt=w.terrain&&Ce?w.terrain.stencilModeForRTTOverlap(st):je[st.overscaledZ],Wt=B?0:g.paint.get("raster-fade-duration");bt.registerFadeDuration(Wt);const Gt=d.findLoadedParent(st,0),ti=Po(bt,Gt,d,w.transform,Wt);let Jt,_i;w.terrain&&w.terrain.prepareDrawTile();const Qi="nearest"===g.paint.get("raster-resampling")?K.NEAREST:K.LINEAR;X.activeTexture.set(K.TEXTURE0),bt.texture.bind(Qi,K.CLAMP_TO_EDGE),X.activeTexture.set(K.TEXTURE1),Gt?(Gt.texture.bind(Qi,K.CLAMP_TO_EDGE),Jt=Math.pow(2,Gt.tileID.overscaledZ-bt.tileID.overscaledZ),_i=[bt.tileID.canonical.x*Jt%1,bt.tileID.canonical.y*Jt%1]):bt.texture.bind(Qi,K.CLAMP_TO_EDGE),bt.texture.useMipmap&&X.extTextureFilterAnisotropic&&w.transform.pitch>20&&K.texParameterf(K.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const ci=ba(xt,_i||[0,0],Jt||1,ti,g,te instanceof Et?te.perspectiveTransform:[0,0]);if(w.prepareDrawProgram(X,he,Ge),te instanceof Et)te.boundsBuffer&&te.boundsSegments&&he.draw(X,K.TRIANGLES,Te,i.StencilMode.disabled,de,i.CullFaceMode.disabled,ci,g.id,te.boundsBuffer,w.quadTriangleIndexBuffer,te.boundsSegments);else{const{tileBoundsBuffer:Ri,tileBoundsIndexBuffer:yi,tileBoundsSegments:Wi}=w.getTileBoundsBuffers(bt);he.draw(X,K.TRIANGLES,Te,jt,de,i.CullFaceMode.disabled,ci,g.id,Ri,yi,Wi)}}w.resetStencilClippingMasks()},background:function(w,d,g,T){const P=g.paint.get("background-color"),B=g.paint.get("background-opacity");if(0===B)return;const X=w.context,K=X.gl,te=w.transform,he=te.tileSize,de=g.paint.get("background-pattern");if(w.isPatternMissing(de))return;const Ce=!de&&1===P.a&&1===B&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==Ce)return;const je=i.StencilMode.disabled,Qe=w.depthModeForSublayer(0,"opaque"===Ce?i.DepthMode.ReadWrite:i.DepthMode.ReadOnly),et=w.colorModeForRenderPass(),tt=w.useProgram(de?"backgroundPattern":"background");let st,Te=T;Te||(st=w.getBackgroundTiles(),Te=Object.values(st).map(Ge=>Ge.tileID)),de&&(X.activeTexture.set(K.TEXTURE0),w.imageManager.bind(w.context));for(const Ge of Te){const bt=Ge.toUnwrapped(),xt=T?Ge.projMatrix:w.transform.calculateProjMatrix(bt);w.prepareDrawTile();const jt=d?d.getTile(Ge):st?st[Ge.key]:new i.Tile(Ge,he,te.zoom,w),Wt=de?ms(xt,B,w,de,{tileID:Ge,tileSize:he}):Ns(xt,B,P);w.prepareDrawProgram(X,tt,bt);const{tileBoundsBuffer:Gt,tileBoundsIndexBuffer:ti,tileBoundsSegments:Jt}=w.getTileBoundsBuffers(jt);tt.draw(X,K.TRIANGLES,Qe,je,et,i.CullFaceMode.disabled,Wt,g.id,Gt,ti,Jt)}},sky:function(w,d,g){const T=w.transform,P="mercator"===T.projection.name||"globe"===T.projection.name?1:i.smoothstep(7,8,T.zoom),B=g.paint.get("sky-opacity")*P;if(0===B)return;const X=w.context,K=g.paint.get("sky-type"),te=new i.DepthMode(X.gl.LEQUAL,i.DepthMode.ReadOnly,[0,1]),he=w.frameCounter/1e3%1;"atmosphere"===K?"offscreen"===w.renderPass?g.needsSkyboxCapture(w)&&(function(de,Ce,je,Qe){const et=de.context,tt=et.gl;let st=Ce.skyboxFbo;if(!st){st=Ce.skyboxFbo=et.createFramebuffer(32,32,!1),Ce.skyboxGeometry=new rl(et),Ce.skyboxTexture=et.gl.createTexture(),tt.bindTexture(tt.TEXTURE_CUBE_MAP,Ce.skyboxTexture),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_S,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_WRAP_T,tt.CLAMP_TO_EDGE),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MIN_FILTER,tt.LINEAR),tt.texParameteri(tt.TEXTURE_CUBE_MAP,tt.TEXTURE_MAG_FILTER,tt.LINEAR);for(let xt=0;xt<6;++xt)tt.texImage2D(tt.TEXTURE_CUBE_MAP_POSITIVE_X+xt,0,tt.RGBA,32,32,0,tt.RGBA,tt.UNSIGNED_BYTE,null)}et.bindFramebuffer.set(st.framebuffer),et.viewport.set([0,0,32,32]);const Te=Ce.getCenter(de,!0),Ge=de.useProgram("skyboxCapture"),bt=new Float64Array(16);i.identity(bt),i.rotateY(bt,bt,.5*-Math.PI),hs(et,Ce,Ge,bt,Te,0),i.identity(bt),i.rotateY(bt,bt,.5*Math.PI),hs(et,Ce,Ge,bt,Te,1),i.identity(bt),i.rotateX(bt,bt,.5*-Math.PI),hs(et,Ce,Ge,bt,Te,2),i.identity(bt),i.rotateX(bt,bt,.5*Math.PI),hs(et,Ce,Ge,bt,Te,3),i.identity(bt),hs(et,Ce,Ge,bt,Te,4),i.identity(bt),i.rotateY(bt,bt,Math.PI),hs(et,Ce,Ge,bt,Te,5),et.viewport.set([0,0,de.width,de.height])}(w,g),g.markSkyboxValid(w)):"sky"===w.renderPass&&function(de,Ce,je,Qe,et){const tt=de.context,st=tt.gl,Te=de.transform,Ge=de.useProgram("skybox");tt.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_CUBE_MAP,Ce.skyboxTexture);const bt=((xt,jt,Wt,Gt,ti)=>({u_matrix:xt,u_sun_direction:jt,u_cubemap:0,u_opacity:Gt,u_temporal_offset:ti}))(Te.skyboxMatrix,Ce.getCenter(de,!1),0,Qe,et);de.prepareDrawProgram(tt,Ge),Ge.draw(tt,st.TRIANGLES,je,i.StencilMode.disabled,de.colorModeForRenderPass(),i.CullFaceMode.backCW,bt,"skybox",Ce.skyboxGeometry.vertexBuffer,Ce.skyboxGeometry.indexBuffer,Ce.skyboxGeometry.segment)}(w,g,te,B,he):"gradient"===K&&"sky"===w.renderPass&&function(de,Ce,je,Qe,et){const tt=de.context,st=tt.gl,Te=de.transform,Ge=de.useProgram("skyboxGradient");Ce.skyboxGeometry||(Ce.skyboxGeometry=new rl(tt)),tt.activeTexture.set(st.TEXTURE0);let bt=Ce.colorRampTexture;bt||(bt=Ce.colorRampTexture=new i.Texture(tt,Ce.colorRamp,st.RGBA)),bt.bind(st.LINEAR,st.CLAMP_TO_EDGE);const xt=(jt=Te.skyboxMatrix,Wt=Ce.getCenter(de,!1),Gt=Ce.paint.get("sky-gradient-radius"),ti=Qe,Jt=et,{u_matrix:jt,u_color_ramp:0,u_center_direction:Wt,u_radius:i.degToRad(Gt),u_opacity:ti,u_temporal_offset:Jt});var jt,Wt,Gt,ti,Jt;de.prepareDrawProgram(tt,Ge),Ge.draw(tt,st.TRIANGLES,je,i.StencilMode.disabled,de.colorModeForRenderPass(),i.CullFaceMode.backCW,xt,"skyboxGradient",Ce.skyboxGeometry.vertexBuffer,Ce.skyboxGeometry.indexBuffer,Ce.skyboxGeometry.segment)}(w,g,te,B,he)},debug:function(w,d,g){for(let T=0;T<g.length;T++)Gc(w,d,g[T])},custom:function(w,d,g,T){const P=w.context,B=g.implementation;if(!w.transform.projection.unsupportedLayers||!w.transform.projection.unsupportedLayers.includes("custom")||w.terrain&&(w.terrain.renderingToTexture||"offscreen"===w.renderPass)&&g.isLayerDraped()){if("offscreen"===w.renderPass){const X=B.prerender;if(X){if(w.setCustomLayerDefaults(),P.setColorMode(w.colorModeForRenderPass()),"globe"===w.transform.projection.name){const K=w.transform.pointMerc;X.call(B,P.gl,w.transform.customLayerMatrix(),w.transform.getProjection(),w.transform.globeToMercatorMatrix(),i.globeToMercatorTransition(w.transform.zoom),[K.x,K.y],w.transform.pixelsPerMeterRatio)}else X.call(B,P.gl,w.transform.customLayerMatrix());P.setDirty(),w.setBaseState()}}else if("translucent"===w.renderPass){if(w.terrain&&w.terrain.renderingToTexture){const K=B.renderToTile;if(K){const te=T[0].canonical,he=new i.MercatorCoordinate(te.x+T[0].wrap*(1<<te.z),te.y,te.z);P.setDepthMode(i.DepthMode.disabled),P.setStencilMode(i.StencilMode.disabled),P.setColorMode(w.colorModeForRenderPass()),w.setCustomLayerDefaults(),K.call(B,P.gl,he),P.setDirty(),w.setBaseState()}return}w.setCustomLayerDefaults(),P.setColorMode(w.colorModeForRenderPass()),P.setStencilMode(i.StencilMode.disabled);const X="3d"===B.renderingMode?new i.DepthMode(w.context.gl.LEQUAL,i.DepthMode.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,i.DepthMode.ReadOnly);if(P.setDepthMode(X),"globe"===w.transform.projection.name){const K=w.transform.pointMerc;B.render(P.gl,w.transform.customLayerMatrix(),w.transform.getProjection(),w.transform.globeToMercatorMatrix(),i.globeToMercatorTransition(w.transform.zoom),[K.x,K.y],w.transform.pixelsPerMeterRatio)}else B.render(P.gl,w.transform.customLayerMatrix());P.setDirty(),w.setBaseState(),P.bindFramebuffer.set(null)}}else i.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class To{constructor(d,g,T=!1){this.context=new Vi(d,T),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=i.SourceCache.maxUnderzooming+i.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(d,g){const T=!!d&&!!d.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new $r(this,d));const P=this._terrain;this.transform.elevation=T?P:null,P.update(d,this.transform,g)}_updateFog(d){const g=d.fog;if(!g||"globe"===this.transform.projection.name||g.getOpacity(this.transform.pitch)<1||g.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,P]=g.getFovAdjustedRange(this.transform._fov);if(T>P)return void(this.transform.fogCullDistSq=null);const B=T+.78*(P-T);this.transform.fogCullDistSq=B*B}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(d,g){if(this.width=d*i.exported.devicePixelRatio,this.height=g*i.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const d=this.context,g=new i.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(i.EXTENT,0),g.emplaceBack(0,i.EXTENT),g.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(g,i.posAttributes.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);const T=new i.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(i.EXTENT,0),T.emplaceBack(0,i.EXTENT),T.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=d.createVertexBuffer(T,i.posAttributes.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);const P=new i.StructArrayLayout2i4;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(-1,1),P.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(P,i.posAttributes.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);const B=new i.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(i.EXTENT,0,i.EXTENT,0),B.emplaceBack(0,i.EXTENT,0,i.EXTENT),B.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.mercatorBoundsBuffer=d.createVertexBuffer(B,i.boundsAttributes.members),this.mercatorBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);const X=new i.StructArrayLayout3ui6;X.emplaceBack(0,1,2),X.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(X);const K=new i.StructArrayLayout1ui2;for(const he of[0,1,3,2,0])K.emplaceBack(he);this.debugIndexBuffer=d.createIndexBuffer(K),this.emptyTexture=new i.Texture(d,new i.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),d.gl.RGBA),this.identityMat=i.create();const te=this.context.gl;this.stencilClearMode=new i.StencilMode({func:te.ALWAYS,mask:0},0,255,te.ZERO,te.ZERO,te.ZERO),this.loadTimeStamps.push(i.window.performance.now()),this.atmosphereBuffer=new Ba(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(d){return d._makeTileBoundsBuffers(this.context,this.transform.projection),d._tileBoundsBuffer?{tileBoundsBuffer:d._tileBoundsBuffer,tileBoundsIndexBuffer:d._tileBoundsIndexBuffer,tileBoundsSegments:d._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const d=this.context,g=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(d,g.TRIANGLES,i.DepthMode.disabled,this.stencilClearMode,i.ColorMode.disabled,i.CullFaceMode.disabled,gl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(d,g,T){if(!g||this.currentStencilSource===g.id||!d.isTileClipped()||!T||0===T.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let K=!1;for(const te of T)if(void 0===this._tileClippingMaskIDs[te.key]){K=!0;break}if(!K)return}this.currentStencilSource=g.id;const P=this.context,B=P.gl;this.nextStencilID+T.length>256&&this.clearStencil(),P.setColorMode(i.ColorMode.disabled),P.setDepthMode(i.DepthMode.disabled);const X=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const K of T){const te=g.getTile(K),he=this._tileClippingMaskIDs[K.key]=this.nextStencilID++,{tileBoundsBuffer:de,tileBoundsIndexBuffer:Ce,tileBoundsSegments:je}=this.getTileBoundsBuffers(te);X.draw(P,B.TRIANGLES,i.DepthMode.disabled,new i.StencilMode({func:B.ALWAYS,mask:0},he,255,B.KEEP,B.KEEP,B.REPLACE),i.ColorMode.disabled,i.CullFaceMode.disabled,gl(K.projMatrix),"$clipping",de,Ce,je)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,g=this.context.gl;return new i.StencilMode({func:g.NOTEQUAL,mask:255},d,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(d){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(d);const g=this.context.gl;return new i.StencilMode({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(d){const g=this.context.gl,T=d.sort((X,K)=>K.overscaledZ-X.overscaledZ),P=T[T.length-1].overscaledZ,B=T[0].overscaledZ-P+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const X={};for(let K=0;K<B;K++)X[K+P]=new i.StencilMode({func:g.GEQUAL,mask:255},K+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=B,[X,T]}return[{[P]:i.StencilMode.disabled},T]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new i.ColorMode([d.CONSTANT_COLOR,d.ONE],new i.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?i.ColorMode.unblended:i.ColorMode.alphaBlended}depthModeForSublayer(d,g,T){if(!this.opaquePassEnabledForLayer())return i.DepthMode.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new i.DepthMode(T||this.context.gl.LEQUAL,g,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,g){this.style=d,this.options=g,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(i.exported.now()),this.imageManager.beginFrame();const T=this.style.order,P=this.style._sourceCaches;for(const he in P){const de=P[he];de.used&&de.prepare(this.context)}const B={},X={},K={};for(const he in P){const de=P[he];B[he]=de.getVisibleCoordinates(),X[he]=B[he].slice().reverse(),K[he]=de.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let he=0;he<T.length;he++)if(this.style._layers[T[he]].is3D()){this.opaquePassCutoff=he;break}if(this.terrain&&(this.terrain.updateTileBinding(K),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new i.GlobeSharedBuffers(this.context)),!i.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const he of T){const de=this.style._layers[he],Ce=d._getLayerSourceCache(de);if(!de.hasOffscreenPass()||de.isHidden(this.transform.zoom))continue;const je=Ce?X[Ce.id]:void 0;("custom"===de.type||de.isSky()||je&&je.length)&&this.renderLayer(this,Ce,de,je)}this.depthRangeFor3D=[0,1-(d.order.length+2)*this.numSublayers*this.depthEpsilon];const te=this.terrain;if(te&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&te.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:g.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const he=this.style._layers[T[this.currentLayer]],de=d._getLayerSourceCache(he);if(he.isSky())continue;const Ce=de?X[de.id]:void 0;this._renderTileClippingMasks(he,de,Ce),this.renderLayer(this,de,he,Ce)}if(this.style.fog&&this.transform.projection.supportsFog&&function(he,de){const Ce=he.context,je=Ce.gl,Qe=he.transform,et=new i.DepthMode(je.LEQUAL,i.DepthMode.ReadOnly,[0,1]),tt=he.useProgram("globeAtmosphere",null,"globe"===Qe.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),st=i.globeToMercatorTransition(Qe.zoom),Te=de.properties.get("color").toArray01(),Ge=de.properties.get("high-color").toArray01(),bt=de.properties.get("space-color").toArray01PremultipliedAlpha(),xt=i.identity$1([]);i.rotateY$1(xt,xt,-i.degToRad(Qe._center.lng)),i.rotateX$1(xt,xt,i.degToRad(Qe._center.lat)),i.rotateZ$1(xt,xt,Qe.angle),i.rotateX$1(xt,xt,-Qe._pitch);const jt=i.fromQuat(new Float32Array(16),xt),Wt=i.mapValue(de.properties.get("star-intensity"),0,1,0,.25),ti=i.mapValue(de.properties.get("horizon-blend"),0,1,5e-4,.25),Jt=i.globeUseCustomAntiAliasing(he,Ce,Qe)&&5e-4===ti?Qe.worldSize/(2*Math.PI*1.025)-1:Qe.globeRadius,_i=he.frameCounter/1e3%1,Qi=i.length(Qe.globeCenterInViewSpace),ci=Math.sqrt(Math.pow(Qi,2)-Math.pow(Jt,2)),Ri=Math.acos(ci/Qi),yi={u_frustum_tl:Qe.frustumCorners.TL,u_frustum_tr:Qe.frustumCorners.TR,u_frustum_br:Qe.frustumCorners.BR,u_frustum_bl:Qe.frustumCorners.BL,u_horizon:Qe.frustumCorners.horizon,u_transition:st,u_fadeout_range:ti,u_color:Te,u_high_color:Ge,u_space_color:bt,u_star_intensity:Wt,u_star_size:5*i.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:_i,u_horizon_angle:Ri,u_rotation_matrix:jt};he.prepareDrawProgram(Ce,tt);const Wi=he.atmosphereBuffer;Wi&&tt.draw(Ce,je.TRIANGLES,et,i.StencilMode.disabled,i.ColorMode.alphaBlended,i.CullFaceMode.backCW,yi,"skybox",Wi.vertexBuffer,Wi.indexBuffer,Wi.segments)}(this,this.style.fog),this.renderPass="sky",(i.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const he=this.style._layers[T[this.currentLayer]],de=d._getLayerSourceCache(he);he.isSky()&&this.renderLayer(this,de,he,de?X[de.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const he=this.style._layers[T[this.currentLayer]],de=d._getLayerSourceCache(he);if(he.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(he)){if(he.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ce=de?("symbol"===he.type?K:X)[de.id]:void 0;this._renderTileClippingMasks(he,de,de?B[de.id]:void 0),this.renderLayer(this,de,he,Ce),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let he=null;i.values(this.style._layers).forEach(de=>{const Ce=d._getLayerSourceCache(de);Ce&&!de.isHidden(this.transform.zoom)&&(!he||he.getSource().maxzoom<Ce.getSource().maxzoom)&&(he=Ce)}),he&&this.options.showTileBoundaries&&Na.debug(this,he,he.getVisibleCoordinates())}this.options.showPadding&&function(he){const de=he.transform.padding;ua(he,he.transform.height-(de.top||0),3,xa),ua(he,de.bottom||0,3,Vc),wa(he,de.left||0,3,Fa),wa(he,he.transform.width-(de.right||0),3,Uu);const Ce=he.transform.centerPoint;var je,Qe,et,tt;Nl(je=he,(Qe=Ce.x)-1,(et=he.transform.height-Ce.y)-10,2,20,tt=yu),Nl(je,Qe-10,et-1,20,2,tt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(i.window.performance.now()),this.saveCanvasCopy())}renderLayer(d,g,T,P){T.isHidden(this.transform.zoom)||("background"===T.type||"sky"===T.type||"custom"===T.type||P&&P.length)&&(this.id=T.id,this.gpuTimingStart(T),(!d.transform.projection.unsupportedLayers||!d.transform.projection.unsupportedLayers.includes(T.type)||d.terrain&&"custom"===T.type)&&Na[T.type](d,g,T,P,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(d){if(!this.options.gpuTiming)return;const g=this.context.extTimerQuery;let T=this.gpuTimers[d.id];T||(T=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),T.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const d=this.context.extTimerQuery,g=d.createQueryEXT();this.deferredRenderGpuTimeQueries.push(g),d.beginQueryEXT(d.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}collectGpuTimers(){const d=this.gpuTimers;return this.gpuTimers={},d}collectDeferredRenderGpuQueries(){const d=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],d}queryGpuTimers(d){const g={};for(const T in d){const P=d[T],B=this.context.extTimerQuery,X=B.getQueryObjectEXT(P.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(P.query),g[T]=X}return g}queryGpuTimeDeferredRender(d){if(!this.options.gpuTimingDeferredRender)return 0;const g=this.context.extTimerQuery;let T=0;for(const P of d)T+=g.getQueryObjectEXT(P,g.QUERY_RESULT_EXT)/1e6,g.deleteQueryEXT(P);return T}translatePosMatrix(d,g,T,P,B){if(!T[0]&&!T[1])return d;const X=B?"map"===P?this.transform.angle:0:"viewport"===P?-this.transform.angle:0;if(X){const he=Math.sin(X),de=Math.cos(X);T=[T[0]*de-T[1]*he,T[0]*he+T[1]*de]}const K=[B?T[0]:Ji(g,T[0],this.transform.zoom),B?T[1]:Ji(g,T[1],this.transform.zoom),0],te=new Float32Array(16);return i.translate(te,d,K),te}saveTileTexture(d){const g=this._tileTextures[d.size[0]];g?g.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const g=this._tileTextures[d];return g&&g.length>0?g.pop():null}isPatternMissing(d){return null===d||void 0!==d&&!this.imageManager.getPattern(d.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const d=this.terrain&&this.terrain.renderingToTexture,g=this.terrain&&0===this.terrain.exaggeration(),T=this.style&&this.style.fog,P=[];return this.terrainRenderModeElevated()&&P.push("TERRAIN"),"globe"===this.transform.projection.name&&P.push("GLOBE"),g&&P.push("ZERO_EXAGGERATION"),T&&!d&&0!==T.getOpacity(this.transform.pitch)&&P.push("FOG"),d&&P.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&P.push("OVERDRAW_INSPECTOR"),P}useProgram(d,g,T){this.cache=this.cache||{};const P=T||[],B=this.currentGlobalDefines().concat(P),X=zn.cacheKey(Pl[d],d,B,g);return this.cache[X]||(this.cache[X]=new zn(this.context,d,Pl[d],g,Ro[d],B)),this.cache[X]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(d,g,T){if(this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const B=P.getOpacity(this.transform.pitch),X=((K,te,he,de,Ce,je,Qe,et,tt,st,Te)=>{const Ge=K.transform,bt=te.properties.get("color").toArray01();bt[3]=de;const xt=K.frameCounter/1e3%1;return{u_fog_matrix:he?Ge.calculateFogTileMatrix(he):K.identityMat,u_fog_range:te.getFovAdjustedRange(Ge._fov),u_fog_color:bt,u_fog_horizon_blend:te.properties.get("horizon-blend"),u_fog_temporal_offset:xt,u_frustum_tl:Ce,u_frustum_tr:je,u_frustum_br:Qe,u_frustum_bl:et,u_globe_pos:tt,u_globe_radius:st,u_viewport:Te,u_globe_transition:i.globeToMercatorTransition(Ge.zoom),u_is_globe:+("globe"===Ge.projection.name)}})(this,P,T,B,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.exported.devicePixelRatio,this.transform.height*i.exported.devicePixelRatio]);g.setFogUniformValues(d,X)}}setTileLoadedFlag(d){this.tileLoaded=d}saveCanvasCopy(){const d=this.canvasCopy();d&&(this.frameCopies.push(d),this.tileLoaded=!1)}canvasCopy(){const d=this.context.gl,g=d.createTexture();return d.bindTexture(d.TEXTURE_2D,g),d.copyTexImage2D(d.TEXTURE_2D,0,d.RGBA,0,0,d.drawingBufferWidth,d.drawingBufferHeight,0),g}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const d=this.style&&this.style.fog;return!!d&&0!==d.getOpacity(this.transform.pitch)}getBackgroundTiles(){const d=this._backgroundTiles,g=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const P of T)g[P.key]=d[P.key]||new i.Tile(P,512,this.transform.tileZoom,this);return g}clearBackgroundTiles(){this._backgroundTiles={}}}class lc{constructor(d=0,g=0,T=0,P=0){if(isNaN(d)||d<0||isNaN(g)||g<0||isNaN(T)||T<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=g,this.left=T,this.right=P}interpolate(d,g,T){return null!=g.top&&null!=d.top&&(this.top=i.number(d.top,g.top,T)),null!=g.bottom&&null!=d.bottom&&(this.bottom=i.number(d.bottom,g.bottom,T)),null!=g.left&&null!=d.left&&(this.left=i.number(d.left,g.left,T)),null!=g.right&&null!=d.right&&(this.right=i.number(d.right,g.right,T)),this}getCenter(d,g){const T=i.clamp((this.left+d-this.right)/2,0,d),P=i.clamp((this.top+g-this.bottom)/2,0,g);return new i.Point(T,P)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new lc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Bo(w,d){const g=i.getColumn(w,3);i.fromQuat(w,d),i.setColumn(w,3,g)}function Nr(w,d){const g=i.identity$1([]);return i.rotateZ$1(g,g,-d),i.rotateX$1(g,g,-w),g}function sl(w,d){const g=[w[0],w[1],0],T=[d[0],d[1],0];if(i.length(g)>=1e-15){const X=i.normalize([],g);i.scale$2(T,X,i.dot(T,X)),d[0]=T[0],d[1]=T[1]}const P=i.cross([],d,w);if(i.len(P)<1e-15)return null;const B=Math.atan2(-P[1],P[0]);return Nr(Math.atan2(Math.sqrt(w[0]*w[0]+w[1]*w[1]),-w[2]),B)}class _l{constructor(d,g){this.position=d,this.orientation=g}get position(){return this._position}set position(d){if(d){const g=d instanceof i.MercatorCoordinate?d:new i.MercatorCoordinate(d[0],d[1],d[2]);this._renderWorldCopies&&(g.x=i.wrap(g.x,0,1)),this._position=g}else this._position=null}lookAtPoint(d,g){if(this.orientation=null,!this.position)return;const T=this.position,P=this._elevation?this._elevation.getAtPointOrZero(i.MercatorCoordinate.fromLngLat(d)):0,B=i.MercatorCoordinate.fromLngLat(d,P),X=[B.x-T.x,B.y-T.y,B.z-T.z];g||(g=[0,0,1]),g[2]=Math.abs(g[2]),this.orientation=sl(X,g)}setPitchBearing(d,g){this.orientation=Nr(i.degToRad(d),i.degToRad(-g))}}class Ya{constructor(d,g){this._transform=i.identity([]),this.orientation=g,this.position=d}get mercatorPosition(){const d=this.position;return new i.MercatorCoordinate(d[0],d[1],d[2])}get position(){const d=i.getColumn(this._transform,3);return[d[0],d[1],d[2]]}set position(d){var g;d&&i.setColumn(this._transform,3,[(g=d)[0],g[1],g[2],1])}get orientation(){return this._orientation}set orientation(d){this._orientation=d||i.identity$1([]),d&&Bo(this._transform,this._orientation)}getPitchBearing(){const d=this.forward(),g=this.right();return{bearing:Math.atan2(-g[1],g[0]),pitch:Math.atan2(Math.sqrt(d[0]*d[0]+d[1]*d[1]),-d[2])}}setPitchBearing(d,g){this._orientation=Nr(d,g),Bo(this._transform,this._orientation)}forward(){const d=i.getColumn(this._transform,2);return[-d[0],-d[1],-d[2]]}up(){const d=i.getColumn(this._transform,1);return[-d[0],-d[1],-d[2]]}right(){const d=i.getColumn(this._transform,0);return[d[0],d[1],d[2]]}getCameraToWorld(d,g){const T=new Float64Array(16);return i.invert(T,this.getWorldToCamera(d,g)),T}getWorldToCameraPosition(d,g,T){const P=this.position;i.scale$2(P,P,-d);const B=new Float64Array(16);return i.fromScaling(B,[T,T,T]),i.translate(B,B,P),B[10]*=g,B}getWorldToCamera(d,g){const T=new Float64Array(16),P=new Float64Array(4),B=this.position;return i.conjugate(P,this._orientation),i.scale$2(B,B,-d),i.fromQuat(T,P),i.translate(T,T,B),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=g,T[9]*=g,T[10]*=g,T[11]*=g,T}getCameraToClipPerspective(d,g,T,P){const B=new Float64Array(16);return i.perspective(B,d,g,T,P),B}getDistanceToElevation(d,g=!1){const T=0===d?0:i.mercatorZfromAltitude(d,g?i.latFromMercatorY(this.position[1]):this.position[1]),P=this.forward();return(T-this.position[2])/P[2]}clone(){return new Ya([...this.position],[...this.orientation])}}function Ha(w,d){const g=yl(w.projection,w.zoom,w.width,w.height),T=function(B,X,K,te,he){const de=new i.LngLat(K.lng-180*Ca,K.lat),Ce=new i.LngLat(K.lng+180*Ca,K.lat),je=B.project(de.lng,de.lat),Qe=B.project(Ce.lng,Ce.lat),et=-Math.atan2(Qe.y-je.y,Qe.x-je.x),tt=i.MercatorCoordinate.fromLngLat(K);tt.y=i.clamp(tt.y,-1+Ca,1-Ca);const st=tt.toLngLat(),Te=B.project(st.lng,st.lat),Ge=i.MercatorCoordinate.fromLngLat(st);Ge.x+=Ca;const bt=Ge.toLngLat(),xt=B.project(bt.lng,bt.lat),jt=Hl(xt.x-Te.x,xt.y-Te.y,et),Wt=i.MercatorCoordinate.fromLngLat(st);Wt.y+=Ca;const Gt=Wt.toLngLat(),ti=B.project(Gt.lng,Gt.lat),Jt=Hl(ti.x-Te.x,ti.y-Te.y,et),_i=Math.abs(jt.x)/Math.abs(Jt.y),Qi=i.identity([]);i.rotateZ(Qi,Qi,-et*(1-(he?0:te)));const ci=i.identity([]);return i.scale(ci,ci,[1,1-(1-_i)*te,1]),ci[4]=-Jt.x/Jt.y*te,i.rotateZ(ci,ci,et),i.multiply(ci,Qi,ci),ci}(w.projection,0,w.center,g,d),P=$o(w);return i.scale(T,T,[P,P,1]),T}function $o(w){const d=w.projection,g=yl(w.projection,w.zoom,w.width,w.height),T=Xo(d,w.center),P=Xo(d,i.LngLat.convert(d.center));return Math.pow(2,T*g+(1-g)*P)}function yl(w,d,g,T,P=1/0){const B=w.range;if(!B)return 0;const X=Math.min(P,Math.max(g,T)),K=Math.log(X/1024)/Math.LN2;return i.smoothstep(B[0]+K,B[1]+K,d)}const Ca=1/4e4;function Xo(w,d){const g=i.clamp(d.lat,-i.MAX_MERCATOR_LATITUDE,i.MAX_MERCATOR_LATITUDE),T=new i.LngLat(d.lng-180*Ca,g),P=new i.LngLat(d.lng+180*Ca,g),B=w.project(T.lng,g),X=w.project(P.lng,g),K=i.MercatorCoordinate.fromLngLat(T),te=i.MercatorCoordinate.fromLngLat(P),he=X.x-B.x,de=X.y-B.y,Ce=te.x-K.x,je=te.y-K.y,Qe=Math.sqrt((Ce*Ce+je*je)/(he*he+de*de));return Math.log(Qe)/Math.LN2}function Hl(w,d,g){const T=Math.cos(g),P=Math.sin(g);return{x:w*T-d*P,y:w*P+d*T}}class Va{constructor(d,g,T,P,B,X,K){this.tileSize=512,this._renderWorldCopies=void 0===B||B,this._minZoom=d||0,this._maxZoom=g||22,this._minPitch=T??0,this._maxPitch=P??60,this.setProjection(X),this.setMaxBounds(K),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new lc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Ya,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const d=new Va(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return d._elevation=this._elevation,d._centerAltitude=this._centerAltitude,d._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,d.tileSize=this.tileSize,d.mercatorFromTransition=this.mercatorFromTransition,d.width=this.width,d.height=this.height,d.cameraElevationReference=this.cameraElevationReference,d._center=this._center,d._setZoom(this.zoom),d._seaLevelZoom=this._seaLevelZoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._nearZ=this._nearZ,d._farZ=this._farZ,d._averageElevation=this._averageElevation,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._camera=this._camera.clone(),d._calcMatrices(),d.freezeTileCoverage=this.freezeTileCoverage,d.frustumCorners=this.frustumCorners,d}get elevation(){return this._elevation}set elevation(d){this._elevation!==d&&(this._elevation=d,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(d,g=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||T)&&this._updateCameraOnTerrain(),(d||T)&&this._constrainCamera(g),this._calcMatrices()}getProjection(){return i.pick(this.projection,["name","center","parallels"])}setProjection(d){this.projectionOptions=d||{name:"mercator"};const g=this.projection?this.getProjection():void 0;this.projection=i.getProjection(this.projectionOptions);const T=!V(g,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const d=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.getProjection({name:"mercator"});const g=d!==this.projection.name;return g&&this._calcMatrices(),g}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(d){void 0===d?d=!0:null===d&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get cameraWorldSize(){const d=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(d))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.Point(this.width,this.height)}get bearing(){return i.wrap(this.rotation,-180,180)}set bearing(d){this.rotation=d}get rotation(){return-this.angle/Math.PI*180}set rotation(d){const g=-d*Math.PI/180;var T,P,B,X,K,te,he,de,Ce,je;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=(T=new i.ARRAY_TYPE(4),i.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),P=this.rotationMatrix,X=this.angle,K=(B=this.rotationMatrix)[0],te=B[1],he=B[2],de=B[3],Ce=Math.sin(X),je=Math.cos(X),P[0]=K*je+he*Ce,P[1]=te*je+de*Ce,P[2]=K*-Ce+he*je,P[3]=te*-Ce+de*je)}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const g=i.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const d=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/d)}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=i.degToRad(d),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(d){this._averageElevation=d,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(d){const g=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._setZoom(g),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(d){this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const d=this._elevation;this._centerAltitude=d.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=d.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const d=this._elevation,g=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let P=0,B=0;for(let X=0;X<g.length;X++){const K=new i.Point(g[X][0]*this.width,T+g[X][1]*(this.height-T)),te=d.pointCoordinate(K);if(!te)continue;const he=1/Math.hypot(te[0]-this._camera.position[0],te[1]-this._camera.position[1]);P+=te[3]*he,B+=he}return 0===B?NaN:P/B}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const d=this._seaLevelZoom,g=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*g,P=this._mercatorZfromZoom(d),B=this._mercatorZfromZoom(this._maxZoom),X=Math.max(P-T,B);this._setZoom(this._zoomFromMercatorZ(X))}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}computeZoomRelativeTo(d){const g=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,d.toAltitude()));let T;T=d.z<this._camera.position[2]?[g.x,g.y,g.z]:[d.x,d.y,d.z];const P=i.length(i.sub([],this._camera.position,T));return i.clamp(this._zoomFromMercatorZ(P),this._minZoom,this._maxZoom)}setFreeCameraOptions(d){if(!this.height||!d.position&&!d.orientation)return;this._updateCameraState();let g=!1;if(d.orientation&&!i.exactEquals(d.orientation,this._camera.orientation)&&(g=this._setCameraOrientation(d.orientation)),d.position){const T=[d.position.x,d.position.y,d.position.z];i.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),g=!0)}g&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const d=this._camera.position,g=new _l;return g.position=new i.MercatorCoordinate(d[0],d[1],d[2]),g.orientation=this._camera.orientation,g._elevation=this.elevation,g._renderWorldCopies=this.renderWorldCopies,g}_setCameraOrientation(d){if(!i.length$1(d))return!1;i.normalize$1(d,d);const g=i.transformQuat([],[0,0,-1],d),T=i.transformQuat([],[0,-1,0],d);if(T[2]<0)return!1;const P=sl(g,T);return!!P&&(this._camera.orientation=P,!0)}_setCameraPosition(d){const g=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,P=this.cameraToCenterDistance;d[2]=i.clamp(d[2],P/T,P/g),this._camera.position=d}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,g,T){this._unmodified=!1,this._edgeInsets.interpolate(d,g,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const g=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(d){const g=[new i.UnwrappedTileID(0,d)];if(this.renderWorldCopies){const T=this.pointCoordinate(new i.Point(0,0)),P=this.pointCoordinate(new i.Point(this.width,0)),B=this.pointCoordinate(new i.Point(this.width,this.height)),X=this.pointCoordinate(new i.Point(0,this.height)),K=Math.floor(Math.min(T.x,P.x,B.x,X.x)),te=Math.floor(Math.max(T.x,P.x,B.x,X.x)),he=1;for(let de=K-he;de<=te+he;de++)0!==de&&g.push(new i.UnwrappedTileID(de,d))}return g}coveringTiles(d){let g=this.coveringZoomLevel(d);const T=g,P=this.elevation&&!d.isTerrainDEM,B="mercator"===this.projection.name;if(void 0!==d.minzoom&&g<d.minzoom)return[];void 0!==d.maxzoom&&g>d.maxzoom&&(g=d.maxzoom);const X=this.locationCoordinate(this.center),K=this.center.lat,te=1<<g,he=[te*X.x,te*X.y,0],de="globe"===this.projection.name,Ce=!de,je=i.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g,Ce),Qe=de?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),et=te*i.mercatorZfromAltitude(1,this.center.lat),tt=this._camera.position[2]/i.mercatorZfromAltitude(1,this.center.lat),st=[te*Qe.x,te*Qe.y,tt*(Ce?1:et)],Te=this.cameraToCenterDistance/d.tileSize*(d.roundZoom?1:.502),Ge=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?g:0,bt=d.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,xt=d.isTerrainDEM?-bt:this._elevation?this._elevation.getMinElevationBelowMSL():0,jt=this.projection.isReprojectedInTileSpace?$o(this):1,Wt=pi=>{const rn=new i.MercatorCoordinate(pi.x+25e-6,pi.y,pi.z),Bi=new i.MercatorCoordinate(pi.x,pi.y+25e-6,pi.z),qi=pi.toLngLat(),Bn=rn.toLngLat(),Hn=Bi.toLngLat(),En=this.locationCoordinate(qi),qn=this.locationCoordinate(Bn),rr=this.locationCoordinate(Hn),sr=Math.hypot(qn.x-En.x,qn.y-En.y),Vn=Math.hypot(rr.x-En.x,rr.y-En.y);return Math.sqrt(sr*Vn)*jt/25e-6},Gt=pi=>{const Ii=bt,rn=xt;return{aabb:i.tileAABB(this,te,0,0,0,pi,rn,Ii,this.projection),zoom:0,x:0,y:0,minZ:rn,maxZ:Ii,wrap:pi,fullyVisible:!1}},ti=[];let Jt=[];const _i=g,Qi=d.reparseOverscaled?T:g,ci=pi=>pi*pi,Ri=ci((tt-this._centerAltitude)*et),yi=pi=>{if(!this._elevation||!pi.tileID||!B)return;const Ii=this._elevation.getMinMaxForTile(pi.tileID),rn=pi.aabb;Ii?(rn.min[2]=Ii.min,rn.max[2]=Ii.max,rn.center[2]=(rn.min[2]+rn.max[2])/2):(pi.shouldSplit=Wi(pi),pi.shouldSplit||(rn.min[2]=rn.max[2]=rn.center[2]=this._centerAltitude))},Wi=pi=>{if(pi.zoom<Ge)return!0;if(pi.zoom===_i)return!1;if(null!=pi.shouldSplit)return pi.shouldSplit;const Ii=pi.aabb.distanceX(st),rn=pi.aabb.distanceY(st);let Bi=Ri,qi=1;if(de){Bi=ci(pi.aabb.distanceZ(st));const En=Math.pow(2,pi.zoom),qn=i.latFromMercatorY((pi.y+1)/En),rr=i.latFromMercatorY(pi.y/En),sr=Math.min(Math.max(K,qn),rr),Vn=i.circumferenceAtLatitude(sr)/i.circumferenceAtLatitude(K);if(qi=sr===K?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Vn/this._mercatorScaleRatio),this.zoom<=i.GLOBE_ZOOM_THRESHOLD_MIN&&pi.zoom===_i-1&&Vn>=.9)return!0}else if(P&&(Bi=ci(pi.aabb.distanceZ(st)*et)),this.projection.isReprojectedInTileSpace&&T<=5){const En=Math.pow(2,pi.zoom),qn=Wt(new i.MercatorCoordinate((pi.x+.5)/En,(pi.y+.5)/En));qi=qn>.85?1:qn}const Bn=Ii*Ii+rn*rn+Bi;return Bn<ci((1<<_i-pi.zoom)*Te*qi*((En,qn)=>{if(qn*ci(.707)<En)return 1;const rr=Math.sqrt(qn/En);return rr/(1.4144271570014144+(Math.pow(1.1,rr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Bi,Ri),Bn))};if(this.renderWorldCopies)for(let pi=1;pi<=3;pi++)ti.push(Gt(-pi)),ti.push(Gt(pi));for(ti.push(Gt(0));ti.length>0;){const pi=ti.pop(),Ii=pi.x,rn=pi.y;let Bi=pi.fullyVisible;if(!Bi){const qi=pi.aabb.intersects(je);if(0===qi)continue;Bi=2===qi}if(pi.zoom!==_i&&Wi(pi))for(let qi=0;qi<4;qi++){const Bn=(Ii<<1)+qi%2,Hn=(rn<<1)+(qi>>1),En={aabb:B?pi.aabb.quadrant(qi):i.tileAABB(this,te,pi.zoom+1,Bn,Hn,pi.wrap,pi.minZ,pi.maxZ,this.projection),zoom:pi.zoom+1,x:Bn,y:Hn,wrap:pi.wrap,fullyVisible:Bi,tileID:void 0,shouldSplit:void 0,minZ:pi.minZ,maxZ:pi.maxZ};P&&!de&&(En.tileID=new i.OverscaledTileID(pi.zoom+1===_i?Qi:pi.zoom+1,pi.wrap,pi.zoom+1,Bn,Hn),yi(En)),ti.push(En)}else{const qi=pi.zoom===_i?Qi:pi.zoom;if(d.minzoom&&d.minzoom>qi)continue;const Bn=he[0]-(.5+Ii+(pi.wrap<<pi.zoom))*(1<<g-pi.zoom),Hn=he[1]-.5-rn,En=pi.tileID?pi.tileID:new i.OverscaledTileID(qi,pi.wrap,pi.zoom,Ii,rn);Jt.push({tileID:En,distanceSq:Bn*Bn+Hn*Hn})}}if(this.fogCullDistSq){const pi=this.fogCullDistSq,Ii=this.horizonLineFromTop();Jt=Jt.filter(rn=>{const Bi=[0,0,0,1],qi=[i.EXTENT,i.EXTENT,0,1],Bn=this.calculateFogTileMatrix(rn.tileID.toUnwrapped());i.transformMat4$1(Bi,Bi,Bn),i.transformMat4$1(qi,qi,Bn);const Hn=i.getAABBPointSquareDist(Bi,qi);if(0===Hn)return!0;let En=!1;const qn=this._elevation;if(qn&&Hn>pi&&0!==Ii){const rr=this.calculateProjMatrix(rn.tileID.toUnwrapped());let sr;d.isTerrainDEM||(sr=qn.getMinMaxForTile(rn.tileID)),sr||(sr={min:xt,max:bt});const Vn=i.furthestTileCorner(this.rotation),Ir=[Vn[0]*i.EXTENT,Vn[1]*i.EXTENT,sr.max];i.transformMat4(Ir,Ir,rr),En=(1-Ir[1])*this.height*.5<Ii}return Hn<pi||En})}return Jt.sort((pi,Ii)=>pi.distanceSq-Ii.distanceSq).map(pi=>pi.tileID)}resize(d,g){this.width=d,this.height=g,this.pixelsToGLUnits=[2/d,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const g=i.clamp(d.lat,-i.MAX_MERCATOR_LATITUDE,i.MAX_MERCATOR_LATITUDE),T=this.projection.project(d.lng,g);return new i.Point(T.x*this.worldSize,T.y*this.worldSize)}unproject(d){return this.projection.unproject(d.x/this.worldSize,d.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(d,g){let T,P;const B=this.centerPoint;if("globe"===this.projection.name){const K=this.worldSize;T=(g.x-B.x)/K,P=(g.y-B.y)/K}else{const K=this.pointCoordinate(g),te=this.pointCoordinate(B);T=K.x-te.x,P=K.y-te.y}const X=this.locationCoordinate(d);this.setLocation(new i.MercatorCoordinate(X.x-T,X.y-P))}setLocation(d){this.center=this.coordinateLocation(d),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(d){return this.projection.locationPoint(this,d)}locationPoint3D(d){return this.projection.locationPoint(this,d,!0)}pointLocation(d){return this.coordinateLocation(this.pointCoordinate(d))}pointLocation3D(d){return this.coordinateLocation(this.pointCoordinate3D(d))}locationCoordinate(d,g){const T=g?i.mercatorZfromAltitude(g,d.lat):void 0,P=this.projection.project(d.lng,d.lat);return new i.MercatorCoordinate(P.x,P.y,T)}coordinateLocation(d){return this.projection.unproject(d.x,d.y)}pointRayIntersection(d,g){const T=g??this._centerAltitude,P=[d.x,d.y,0,1],B=[d.x,d.y,1,1];i.transformMat4$1(P,P,this.pixelMatrixInverse),i.transformMat4$1(B,B,this.pixelMatrixInverse);const X=B[3];i.scale$1(P,P,1/P[3]),i.scale$1(B,B,1/X);const K=P[2],te=B[2];return{p0:P,p1:B,t:K===te?0:(T-K)/(te-K)}}screenPointToMercatorRay(d){const g=[d.x,d.y,0,1],T=[d.x,d.y,1,1];return i.transformMat4$1(g,g,this.pixelMatrixInverse),i.transformMat4$1(T,T,this.pixelMatrixInverse),i.scale$1(g,g,1/g[3]),i.scale$1(T,T,1/T[3]),g[2]=i.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,T[2]=i.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,i.scale$1(g,g,1/this.worldSize),i.scale$1(T,T,1/this.worldSize),new i.Ray([g[0],g[1],g[2]],i.normalize([],i.sub([],T,g)))}rayIntersectionCoordinate(d){const{p0:g,p1:T,t:P}=d,B=i.mercatorZfromAltitude(g[2],this._center.lat),X=i.mercatorZfromAltitude(T[2],this._center.lat);return new i.MercatorCoordinate(i.number(g[0],T[0],P)/this.worldSize,i.number(g[1],T[1],P)/this.worldSize,i.number(B,X,P))}pointCoordinate(d,g=this._centerAltitude){return this.projection.pointCoordinate(this,d.x,d.y,g)}pointCoordinate3D(d){if(!this.elevation)return this.pointCoordinate(d);let g=this.projection.pointCoordinate3D(this,d.x,d.y);if(g)return new i.MercatorCoordinate(g[0],g[1],g[2]);let T=0,P=this.horizonLineFromTop();if(d.y>P)return this.pointCoordinate(d);const B=.02*P,X=d.clone();for(let K=0;K<10&&P-T>B;K++){X.y=i.number(T,P,.66);const te=this.projection.pointCoordinate3D(this,X.x,X.y);te?(P=X.y,g=te):T=X.y}return g?new i.MercatorCoordinate(g[0],g[1],g[2]):this.pointCoordinate(d)}isPointAboveHorizon(d){return this.projection.isPointAboveHorizon(this,d)}isPointOnSurface(d){if(d.y<0||d.y>this.height||d.x<0||d.x>this.width)return!1;if(this.elevation||this.zoom>=i.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(d);const g=this.pointCoordinate(d);return g.y>=0&&g.y<=1}_coordinatePoint(d,g){const T=g&&this.elevation?this.elevation.getAtPointOrZero(d,this._centerAltitude):this._centerAltitude,P=[d.x*this.worldSize,d.y*this.worldSize,T+d.toAltitude(),1];return i.transformMat4$1(P,P,this.pixelMatrix),P[3]>0?new i.Point(P[0]/P[3],P[1]/P[3]):new i.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:d,left:g}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,B=this.pointLocation3D(new i.Point(g,d)),X=this.pointLocation3D(new i.Point(P,d)),K=this.pointLocation3D(new i.Point(P,T)),te=this.pointLocation3D(new i.Point(g,T));let he=Math.min(B.lng,X.lng,K.lng,te.lng),de=Math.max(B.lng,X.lng,K.lng,te.lng),Ce=Math.min(B.lat,X.lat,K.lat,te.lat),je=Math.max(B.lat,X.lat,K.lat,te.lat);const Qe=Math.pow(2,-this.zoom)/16*270,et="globe"===this.projection.name?1:4,tt=(st,Te,Ge,bt,xt)=>{const jt=(st+Ge)/2,Wt=(Te+bt)/2,Gt=new i.Point(jt,Wt),{lng:ti,lat:Jt}=this.pointLocation3D(Gt),_i=Math.max(0,he-ti,Ce-Jt,ti-de,Jt-je);he=Math.min(he,ti),de=Math.max(de,ti),Ce=Math.min(Ce,Jt),je=Math.max(je,Jt),(xt<et||_i>Qe)&&(tt(st,Te,jt,Wt,xt+1),tt(jt,Wt,Ge,bt,xt+1))};if(tt(g,d,P,d,1),tt(P,d,P,T,1),tt(P,T,g,T,1),tt(g,T,g,d,1),"globe"===this.projection.name){const[st,Te]=i.polesInViewport(this);st?(je=90,de=180,he=-180):Te&&(Ce=-90,de=180,he=-180)}return new i.LngLatBounds(new i.LngLat(he,Ce),new i.LngLat(de,je))}_getBoundsRectangular(d,g){const{top:T,left:P}=this._edgeInsets,B=this.height-this._edgeInsets.bottom,X=this.width-this._edgeInsets.right,K=new i.Point(P,T),te=new i.Point(X,T),he=new i.Point(X,B),de=new i.Point(P,B);let Ce=this.pointCoordinate(K,d),je=this.pointCoordinate(te,d);const Qe=this.pointCoordinate(he,g),et=this.pointCoordinate(de,g),tt=(st,Te)=>(Te.y-st.y)/(Te.x-st.x);return Ce.y>1&&je.y>=0?Ce=new i.MercatorCoordinate((1-et.y)/tt(et,Ce)+et.x,1):Ce.y<0&&je.y<=1&&(Ce=new i.MercatorCoordinate(-et.y/tt(et,Ce)+et.x,0)),je.y>1&&Ce.y>=0?je=new i.MercatorCoordinate((1-Qe.y)/tt(Qe,je)+Qe.x,1):je.y<0&&Ce.y<=1&&(je=new i.MercatorCoordinate(-Qe.y/tt(Qe,je)+Qe.x,0)),(new i.LngLatBounds).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(je)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(Qe))}_getBoundsRectangularTerrain(){const d=this.elevation;if(!d.visibleDemTiles.length||d.isUsingMockSource())return this._getBoundsRectangular(0,0);const g=d.visibleDemTiles.reduce((T,P)=>{if(P.dem){const B=P.dem.tree;T.min=Math.min(T.min,B.minimums[0]),T.max=Math.max(T.max,B.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(g.min*d.exaggeration(),g.max*d.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(d=!0){const g=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-g*(1-this._horizonShift);return d?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(d){this.maxBounds=d,this.minLat=-i.MAX_MERCATOR_LATITUDE,this.maxLat=i.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,d&&(this.minLat=d.getSouth(),this.maxLat=d.getNorth(),this.minLng=d.getWest(),this.maxLng=d.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=i.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=i.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=i.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(d,g){return this.projection.createTileMatrix(this,g,d)}calculateDistanceTileData(d){const g=d.key,T=this._distanceTileDataCache;if(T[g])return T[g];const P=d.canonical,B=1/this.height,X=this.cameraWorldSize,K=X/this.zoomScale(P.z),te=(P.x+Math.pow(2,P.z)*d.wrap)*K,he=P.y*K,de=this.point;de.x*=X/this.worldSize,de.y*=X/this.worldSize;const Ce=this.angle,je=Math.sin(-Ce),Qe=-Math.cos(-Ce);return T[g]={bearing:[je,Qe],center:[(de.x-te)*B,(de.y-he)*B],scale:K/i.EXTENT*B},T[g]}calculateFogTileMatrix(d){const g=d.key,T=this._fogTileMatrixCache;if(T[g])return T[g];const P=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,d);return i.multiply(P,this.worldToFogMatrix,P),T[g]=new Float32Array(P),T[g]}calculateProjMatrix(d,g=!1){const T=d.key,P=g?this._alignedProjMatrixCache:this._projMatrixCache;if(P[T])return P[T];const B=this.calculatePosMatrix(d,this.worldSize);return i.multiply(B,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.alignedProjMatrix:this.projMatrix,B),P[T]=new Float32Array(B),P[T]}calculatePixelsToTileUnitsMatrix(d){const g=d.tileID.key,T=this._pixelsToTileUnitsCache;if(T[g])return T[g];const P=function(B,X){const{scale:K}=B.tileTransform,te=K*i.EXTENT/(B.tileSize*Math.pow(2,X.zoom-B.tileID.overscaledZ+B.tileID.canonical.z));return he=new Float32Array(4),je=(de=X.inverseAdjustmentMatrix)[1],Qe=de[2],et=de[3],st=(Ce=[te,te])[1],he[0]=de[0]*(tt=Ce[0]),he[1]=je*tt,he[2]=Qe*st,he[3]=et*st,he;var he,de,Ce,je,Qe,et,tt,st}(d,this);return T[g]=P,T[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const d=1/this.worldSize,g=i.fromScaling([],[d,d,d]);return i.multiply(g,g,this.globeMatrix),g}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const d=this._elevation;this._updateCameraState();const g=i.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(g),P=this._camera.forward(),B=i.mercatorZfromAltitude(1,this._center.lat);T[2]/=B,P[2]/=B,i.normalize(P,P);const X=d.raycast(T,P,d.exaggeration());if(X){const K=i.scaleAndAdd([],T,P,X),te=new i.MercatorCoordinate(K[0],K[1],i.mercatorZfromAltitude(K[2],i.latFromMercatorY(K[1]))),he=(te.z+i.length([te.x-T[0],te.y-T[1],te.z-T[2]*B]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(he),this._centerAltitude=te.toAltitude(),this._center=this.coordinateLocation(te),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(d=!1){if(!this._elevation)return;const g=this._elevation,T=i.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,P=this._computeCameraPosition(T),B=g.getAtPointOrZero(new i.MercatorCoordinate(...P)),X=this.pixelsPerMeter/this.worldSize*B,K=this._minimumHeightOverTerrain(),te=P[2]-X;if(te<=K)if(te<0||d){const he=this.locationCoordinate(this._center,this._centerAltitude),de=[P[0],P[1],he.z-P[2]],Ce=i.length(de);de[2]-=(K-te)/this._pixelsPerMercatorPixel;const je=i.length(de);if(0===je)return;i.scale$2(de,de,Ce/je*this._pixelsPerMercatorPixel),this._camera.position=[P[0],P[1],he.z*this._pixelsPerMercatorPixel-de[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const d="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||d){const je=this.center;return je.lat=i.clamp(je.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!d)&&(je.lng=i.clamp(je.lng,this.minLng,this.maxLng)),this.center=je,void(this._constraining=!1)}const g=this._unmodified,{x:T,y:P}=this.point;let B=0,X=T,K=P;const te=this.width/2,he=this.height/2,de=this.worldMinY*this.scale,Ce=this.worldMaxY*this.scale;if(P-he<de&&(K=de+he),P+he>Ce&&(K=Ce-he),Ce-de<this.height&&(B=Math.max(B,this.height/(Ce-de)),K=(Ce+de)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const je=this.worldMinX*this.scale,Qe=this.worldMaxX*this.scale,et=this.worldSize/2-(je+Qe)/2;X=(T+et+this.worldSize)%this.worldSize-et,X-te<je&&(X=je+te),X+te>Qe&&(X=Qe-te),Qe-je<this.width&&(B=Math.max(B,this.width/(Qe-je)),X=(Qe+je)/2)}X===T&&K===P||(this.center=this.unproject(new i.Point(X,K))),B&&(this.zoom+=this.scaleZoom(B)),this._constrainCamera(),this._unmodified=g,this._constraining=!1}_minZoomForBounds(){let d=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(d=Math.max(d,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),d}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,g=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=i.mercatorZfromAltitude(1,this.center.lat)/i.mercatorZfromAltitude(1,i.GLOBE_SCALE_MATCH_LATITUDE));const T=yl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const P="meters"===this.projection.zAxisUnit?g:1,B=this._camera.getWorldToCamera(this.worldSize,P),X=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);X[8]=2*-d.x/this.width,X[9]=2*d.y/this.height;let K=i.mul([],X,B);if(this.projection.isReprojectedInTileSpace){const Wt=this.locationCoordinate(this.center),Gt=i.identity([]);i.translate(Gt,Gt,[Wt.x*this.worldSize,Wt.y*this.worldSize,0]),i.multiply(Gt,Gt,Ha(this)),i.translate(Gt,Gt,[-Wt.x*this.worldSize,-Wt.y*this.worldSize,0]),i.multiply(K,K,Gt),this.inverseAdjustmentMatrix=function(ti){const Jt=Ha(ti,!0);return at([],[Jt[0],Jt[1],Jt[4],Jt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=i.scale([],K,[this.worldSize,this.worldSize,this.worldSize/P,1]),this.projMatrix=K,this.invProjMatrix=i.invert(new Float64Array(16),this.projMatrix);const te=i.invert([],X);this.frustumCorners=i.FrustumCorners.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height);const he=new Float32Array(16);i.identity(he),i.scale(he,he,[1,-1,1]),i.rotateX(he,he,this._pitch),i.rotateZ(he,he,this.angle);const de=i.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Ce=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;de[8]=2*-d.x/this.width,de[9]=2*(d.y+Ce)/this.height,this.skyboxMatrix=i.multiply(he,de,he);const je=this.point,Qe=je.x,et=je.y,tt=this.width%2/2,st=this.height%2/2,Te=Math.cos(this.angle),Ge=Math.sin(this.angle),bt=Qe-Math.round(Qe)+Te*tt+Ge*st,xt=et-Math.round(et)+Te*st+Ge*tt,jt=new Float64Array(K);if(i.translate(jt,jt,[bt>.5?bt-1:bt,xt>.5?xt-1:xt,0]),this.alignedProjMatrix=jt,K=i.create(),i.scale(K,K,[this.width/2,-this.height/2,1]),i.translate(K,K,[1,-1,0]),this.labelPlaneMatrix=K,K=i.create(),i.scale(K,K,[1,-1,1]),i.translate(K,K,[-1,-1,0]),i.scale(K,K,[2/this.width,2/this.height,1]),this.glCoordMatrix=K,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},K=i.invert(new Float64Array(16),this.pixelMatrix),!K)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=K,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=i.calculateGlobeMatrix(this);const Wt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.transformMat4(Wt,Wt,B),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=K;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const d=this.cameraWorldSizeForFog,g=this.cameraPixelsPerMeter,T=this._camera.position,P=1/this.height/this._pixelsPerMercatorPixel,B=[d,d,g];i.scale$2(B,B,P),i.scale$2(T,T,-1),i.multiply$2(T,T,B);const X=i.create();i.translate(X,X,T),i.scale(X,X,B),this.mercatorFogMatrix=X,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(d,g,P)}_computeCameraPosition(d){const g=(d=d||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),P=this.point,B=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*g-d/this.worldSize*this._centerAltitude;return[P.x/this.worldSize-T[0]*B,P.y/this.worldSize-T[1]*B,d/this.worldSize*this._centerAltitude-T[2]*B]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(d){const g=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],P=d[2];let B=1;this.projection.wrap&&(this.center=this.center.wrap()),P>0&&(B=Math.min((g-T)/P,1)),this._camera.position=i.scaleAndAdd([],this._camera.position,d,B),this._updateStateFromCamera()}_updateStateFromCamera(){const d=this._camera.position,g=this._camera.forward(),{pitch:T,bearing:P}=this._camera.getPitchBearing(),B=i.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,X=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.degToRad(this._maxPitch)),K=Math.max((d[2]-B)/Math.cos(T),X),te=this._zoomFromMercatorZ(K);i.scaleAndAdd(d,d,g,K),this._pitch=i.clamp(T,i.degToRad(this.minPitch),i.degToRad(this.maxPitch)),this.angle=i.wrap(P,-Math.PI,Math.PI),this._setZoom(i.clamp(te,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.MercatorCoordinate(d[0],d[1],d[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(d){return Math.pow(2,d)*this.tileSize}_mercatorZfromZoom(d){return this.cameraToCenterDistance/this._worldSizeFromZoom(d)}_minimumHeightOverTerrain(){const d=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(d)}_zoomFromMercatorZ(d){return this.scaleZoom(this.cameraToCenterDistance/(d*this.tileSize))}zoomFromMercatorZAdjusted(d){let g=0,T=i.GLOBE_ZOOM_THRESHOLD_MAX,P=0,B=1/0;for(;T-g>1e-6&&T>g;){const X=g+.5*(T-g),K=this.tileSize*Math.pow(2,X),te=this.getCameraToCenterDistance(this.projection,X,K),he=this.scaleZoom(te/(d*this.tileSize)),de=Math.abs(X-he);de<B&&(B=de,P=X),X<he?g=X:T=X}return P}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(d,g){const T=Math.min(d.x,g.x),P=Math.max(d.x,g.x),B=Math.min(d.y,g.y),X=Math.max(d.y,g.y);if(B<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const K=[new i.Point(T,B),new i.Point(P,X),new i.Point(T,X),new i.Point(P,B)],te=this.renderWorldCopies?-3:0,he=this.renderWorldCopies?4:1;for(const de of K){const Ce=this.pointRayIntersection(de);if(Ce.t<0)return!0;const je=this.rayIntersectionCoordinate(Ce);if(je.x<te||je.y<0||je.x>he||je.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.Point(0,0),new i.Point(this.width,this.height))}zoomDeltaToMovement(d,g){const T=i.length(i.sub([],this._camera.position,d)),P=this._zoomFromMercatorZ(T)+g;return T-this._mercatorZfromZoom(P)}getCameraPoint(){if("globe"===this.projection.name){const d=function([g,T,P],B){const X=[g,T,P,1];i.transformMat4$1(X,X,B);const K=X[3]=Math.max(X[3],1e-6);return X[0]/=K,X[1]/=K,X[2]/=K,X}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.Point(d[0],d[1])}{const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,d))}}getCameraToCenterDistance(d,g=this.zoom,T=this.worldSize){const P=yl(d,g,this.width,this.height,1024),B=d.pixelSpaceConversion(this.center.lat,T,P);return.5/Math.tan(.5*this._fov)*this.height*B}getWorldToCameraMatrix(){const d=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&i.multiply(d,d,this.globeMatrix),d}}function ol(w,d){let g=!1,T=null;const P=()=>{T=null,g&&(w(),T=setTimeout(P,d),g=!1)};return()=>(g=!0,T||P(),T)}class bl{constructor(d){this._hashName=d&&encodeURIComponent(d),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ol(this._updateHashUnthrottled.bind(this),300)}addTo(d){return this._map=d,i.window.addEventListener("hashchange",this._onHashChange,!1),d.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),i.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const d=this._map;if(!d)return"";const g=xl(d);if(this._hashName){const T=this._hashName;let P=!1;const B=i.window.location.hash.slice(1).split("&").map(X=>{const K=X.split("=")[0];return K===T?(P=!0,`${K}=${g}`):X}).filter(X=>X);return P||B.push(`${T}=${g}`),`#${B.join("&")}`}return`#${g}`}_getCurrentHash(){const d=i.window.location.hash.replace("#","");if(this._hashName){let g;return d.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(g=T)}),(g&&g[1]||"").split("/")}return d.split("/")}_onHashChange(){const d=this._map;if(!d)return!1;const g=this._getCurrentHash();if(g.length>=3&&!g.some(T=>isNaN(T))){const T=d.dragRotate.isEnabled()&&d.touchZoomRotate.isEnabled()?+(g[3]||0):d.getBearing();return d.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:T,pitch:+(g[4]||0)}),!0}return!1}_updateHashUnthrottled(){const d=i.window.location.href.replace(/(#.+)?$/,this.getHashString());i.window.history.replaceState(i.window.history.state,null,d)}}function xl(w,d){const g=w.getCenter(),T=Math.round(100*w.getZoom())/100,P=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,P),X=Math.round(g.lng*B)/B,K=Math.round(g.lat*B)/B,te=w.getBearing(),he=w.getPitch();let de=d?`/${X}/${K}/${T}`:`${T}/${K}/${X}`;return(te||he)&&(de+="/"+Math.round(10*te)/10),he&&(de+=`/${Math.round(he)}`),de}const Ic={linearity:.3,easing:i.bezier(0,0,.3,1)},No=i.extend({deceleration:2500,maxSpeed:1400},Ic),gs=i.extend({deceleration:20,maxSpeed:1400},Ic),gn=i.extend({deceleration:1e3,maxSpeed:360},Ic),m=i.extend({deceleration:1e3,maxSpeed:90},Ic);class D{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.exported.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,g=i.exported.now();for(;d.length>0&&g-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const g={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)g.zoom+=B.zoomDelta||0,g.bearing+=B.bearingDelta||0,g.pitch+=B.pitchDelta||0,B.panDelta&&g.pan._add(B.panDelta),B.around&&(g.around=B.around),B.pinchAround&&(g.pinchAround=B.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(g.pan.mag()){const B=ne(g.pan.mag(),T,i.extend({},No,d||{}));P.offset=g.pan.mult(B.amount/g.pan.mag()),P.center=this._map.transform.center,G(P,B)}if(g.zoom){const B=ne(g.zoom,T,gs);P.zoom=this._map.transform.zoom+B.amount,G(P,B)}if(g.bearing){const B=ne(g.bearing,T,gn);P.bearing=this._map.transform.bearing+i.clamp(B.amount,-179,179),G(P,B)}if(g.pitch){const B=ne(g.pitch,T,m);P.pitch=this._map.transform.pitch+B.amount,G(P,B)}if(P.zoom||P.bearing){const B=void 0===g.pinchAround?g.around:g.pinchAround;P.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),P.noMoveStart=!0,P}}function G(w,d){(!w.duration||w.duration<d.duration)&&(w.duration=d.duration,w.easing=d.easing)}function ne(w,d,g){const{maxSpeed:T,linearity:P,deceleration:B}=g,X=i.clamp(w*P/(d/1e3),-T,T),K=Math.abs(X)/(B*P);return{easing:g.easing,duration:1e3*K,amount:X*(K/2)}}class _e extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T,P={}){const B=si(g.getCanvasContainer(),T),X=g.unproject(B);super(d,i.extend({point:B,lngLat:X,originalEvent:T},P)),this._defaultPrevented=!1,this.target=g}}class We extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T){const P="touchend"===d?T.changedTouches:T.touches,B=$e(g.getCanvasContainer(),P),X=B.map(te=>g.unproject(te)),K=B.reduce((te,he,de,Ce)=>te.add(he.div(Ce.length)),new i.Point(0,0));super(d,{points:B,point:K,lngLats:X,lngLat:g.unproject(K),originalEvent:T}),this._defaultPrevented=!1}}class Ht extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,g,T){super(d,{originalEvent:T}),this._defaultPrevented=!1}}class ai{constructor(d,g){this._map=d,this._clickTolerance=g.clickTolerance}reset(){this._mousedownPos=void 0}wheel(d){return this._firePreventable(new Ht(d.type,this._map,d))}mousedown(d,g){return this._mousedownPos=g,this._firePreventable(new _e(d.type,this._map,d))}mouseup(d){this._map.fire(new _e(d.type,this._map,d))}preclick(d){const g=i.extend({},d);g.type="preclick",this._map.fire(new _e(g.type,this._map,g))}click(d,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||(this.preclick(d),this._map.fire(new _e(d.type,this._map,d)))}dblclick(d){return this._firePreventable(new _e(d.type,this._map,d))}mouseover(d){this._map.fire(new _e(d.type,this._map,d))}mouseout(d){this._map.fire(new _e(d.type,this._map,d))}touchstart(d){return this._firePreventable(new We(d.type,this._map,d))}touchmove(d){this._map.fire(new We(d.type,this._map,d))}touchend(d){this._map.fire(new We(d.type,this._map,d))}touchcancel(d){this._map.fire(new We(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ti{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(d){this._map.fire(new _e(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _e("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new _e(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sn{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,g){this.isEnabled()&&d.shiftKey&&0===d.button&&(Pt(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(d,g){if(!this._active)return;const T=g,P=this._startPos,B=this._lastPos;if(!P||!B||B.equals(T)||!this._box&&T.dist(P)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=Fe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));const X=Math.min(P.x,T.x),K=Math.max(P.x,T.x),te=Math.min(P.y,T.y),he=Math.max(P.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${X}px,${te}px)`,this._box.style.width=K-X+"px",this._box.style.height=he-te+"px")})}mouseupWindow(d,g){if(!this._active)return;const T=this._startPos,P=g;if(T&&0===d.button){if(this.reset(),wt(),T.x!==P.x||T.y!==P.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:B=>B.fitScreenCoordinates(T,P,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",d)}}keydown(d){this._active&&27===d.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",d))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ot(),delete this._startPos,delete this._lastPos}_fireEvent(d,g){return this._map.fire(new i.Event(d,{originalEvent:g}))}}function In(w,d){const g={};for(let T=0;T<w.length;T++)g[w[T].identifier]=d[T];return g}class Yn{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(d,g,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=d.timeStamp),T.length===this.numTouches&&(this.centroid=function(P){const B=new i.Point(0,0);for(const X of P)B._add(X);return B.div(P.length)}(g),this.touches=In(T,g)))}touchmove(d,g,T){if(this.aborted||!this.centroid)return;const P=In(T,g);for(const B in this.touches){const X=P[B];(!X||X.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(d,g,T){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),0===T.length){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class _r{constructor(d){this.singleTap=new Yn(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(d,g,T){this.singleTap.touchstart(d,g,T)}touchmove(d,g,T){this.singleTap.touchmove(d,g,T)}touchend(d,g,T){const P=this.singleTap.touchend(d,g,T);if(P){const B=d.timeStamp-this.lastTime<500,X=!this.lastTap||this.lastTap.dist(P)<30;if(B&&X||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Yr{constructor(){this._zoomIn=new _r({numTouches:1,numTaps:2}),this._zoomOut=new _r({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,g,T){this._zoomIn.touchstart(d,g,T),this._zoomOut.touchstart(d,g,T)}touchmove(d,g,T){this._zoomIn.touchmove(d,g,T),this._zoomOut.touchmove(d,g,T)}touchend(d,g,T){const P=this._zoomIn.touchend(d,g,T),B=this._zoomOut.touchend(d,g,T);return P?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:X.getZoom()+1,around:X.unproject(P)},{originalEvent:d})}):B?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:X=>X.easeTo({duration:300,zoom:X.getZoom()-1,around:X.unproject(B)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ps={0:1,2:2};class to{constructor(d){this.reset(),this._clickTolerance=d.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(d,g){return!1}_move(d,g){return{}}mousedown(d,g){if(this._lastPoint)return;const T=ii(d);this._correctButton(d,T)&&(this._lastPoint=g,this._eventButton=T)}mousemoveWindow(d,g){const T=this._lastPoint;if(T)if(d.preventDefault(),null!=this._eventButton&&function(P,B){const X=Ps[B];return void 0===P.buttons||(P.buttons&X)!==X}(d,this._eventButton))this.reset();else if(this._moved||!(g.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(T,g)}mouseupWindow(d){this._lastPoint&&ii(d)===this._eventButton&&(this._moved&&wt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xs extends to{mousedown(d,g){super.mousedown(d,g),this._lastPoint&&(this._active=!0)}_correctButton(d,g){return 0===g&&!d.ctrlKey}_move(d,g){return{around:g,panDelta:g.sub(d)}}}class Ga extends to{_correctButton(d,g){return 0===g&&d.ctrlKey||2===g}_move(d,g){const T=.8*(g.x-d.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(d){d.preventDefault()}}class al extends to{_correctButton(d,g){return 0===g&&d.ctrlKey||2===g}_move(d,g){const T=-.5*(g.y-d.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(d){d.preventDefault()}}class oo{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._minTouches=1,this._clickTolerance=g.clickTolerance||1,this.reset(),i.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)}touchstart(d,g,T){return this._calculateTransform(d,g,T)}touchmove(d,g,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===T.length&&!i.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return d.cancelable&&d.preventDefault(),this._calculateTransform(d,g,T)}}touchend(d,g,T){this._calculateTransform(d,g,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,g,T){T.length>0&&(this._active=!0);const P=In(T,g),B=new i.Point(0,0),X=new i.Point(0,0);let K=0;for(const he in P){const de=P[he],Ce=this._touches[he];Ce&&(B._add(de),X._add(de.sub(Ce)),K++,P[he]=de)}if(this._touches=P,K<this._minTouches||!X.mag())return;const te=X.div(K);return this._sum._add(te),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(K),panDelta:te}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Fe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Lc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(d){}_move(d,g,T){return{}}touchstart(d,g,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([g[0],g[1]]))}touchmove(d,g,T){const P=this._firstTwoTouches;if(!P)return;d.preventDefault();const[B,X]=P,K=Vl(T,g,B),te=Vl(T,g,X);if(!K||!te)return;const he=this._aroundCenter?null:K.add(te).div(2);return this._move([K,te],he,d)}touchend(d,g,T){if(!this._firstTwoTouches)return;const[P,B]=this._firstTwoTouches,X=Vl(T,g,P),K=Vl(T,g,B);X&&K||(this._active&&wt(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Vl(w,d,g){for(let T=0;T<w.length;T++)if(w[T].identifier===g)return d[T]}function ha(w,d){return Math.log(w/d)/Math.LN2}class cc extends Lc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,g){const T=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(ha(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ha(this._distance,T),pinchAround:g}}}function Se(w,d){return 180*w.angleWith(d)/Math.PI}class J extends Lc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,g){const T=this._vector;if(this._vector=d[0].sub(d[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Se(this._vector,T),pinchAround:g}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const g=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const P=Se(d,T);return Math.abs(P)<g}}function ae(w){return Math.abs(w.y)>Math.abs(w.x)}class ke extends Lc{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(d){this._lastPoints=d,ae(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,g,T){const P=this._lastPoints;if(!P)return;const B=d[0].sub(P[0]),X=d[1].sub(P[1]);return this._map._cooperativeGestures&&!i.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(B,X,T.timeStamp),!this._valid)?void 0:(this._lastPoints=d,this._active=!0,{pitchDelta:(B.y+X.y)/2*-.5})}gestureBeginsVertically(d,g,T){if(void 0!==this._valid)return this._valid;const P=d.mag()>=2,B=g.mag()>=2;if(!P&&!B)return;if(!P||!B)return null==this._firstMove&&(this._firstMove=T),T-this._firstMove<100&&void 0;const X=d.y>0==g.y>0;return ae(d)&&ae(g)&&X}}const Ft={panStep:100,bearingStep:15,pitchStep:10};class zi{constructor(){const d=Ft;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let g=0,T=0,P=0,B=0,X=0;switch(d.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:d.shiftKey?T=-1:(d.preventDefault(),B=-1);break;case 39:d.shiftKey?T=1:(d.preventDefault(),B=1);break;case 38:d.shiftKey?P=1:(d.preventDefault(),X=-1);break;case 40:d.shiftKey?P=-1:(d.preventDefault(),X=1);break;default:return}return this._rotationDisabled&&(T=0,P=0),{cameraAnimation:K=>{const te=K.getZoom();K.easeTo({duration:300,easeId:"keyboardHandler",easing:Ln,zoom:g?Math.round(te)+g*(d.shiftKey?2:1):te,bearing:K.getBearing()+T*this._bearingStep,pitch:K.getPitch()+P*this._pitchStep,offset:[-B*this._panStep,-X*this._panStep],center:K.getCenter()},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ln(w){return w*(2-w)}const Rr=4.000244140625;class zr{constructor(d,g){this._map=d,this._el=d.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,i.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&"center"===d.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(d.ctrlKey||d.metaKey||this.isZooming()||i.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let g=d.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const T=i.exported.now(),P=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,0!==g&&g%Rr==0?this._type="wheel":0!==g&&Math.abs(g)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(P*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),d.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=d,this._delta-=g,this._active||this._start(d)),d.preventDefault()}_onTimeout(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=si(this._el,d);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:g,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._map.transform;"wheel"===this._type&&d.projection.wrap&&(d._center.lng>=180||d._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const g=()=>d._terrainEnabled()&&this._aroundCoord?d.computeZoomRelativeTo(this._aroundCoord):d.zoom;if(0!==this._delta){const te="wheel"===this._type&&Math.abs(this._delta)>Rr?this._wheelZoomRate:this._defaultZoomRate;let he=2/(1+Math.exp(-Math.abs(this._delta*te)));this._delta<0&&0!==he&&(he=1/he);const de=g(),Ce=Math.pow(2,de),je="number"==typeof this._targetZoom?d.zoomScale(this._targetZoom):Ce;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(je*he))),"wheel"===this._type&&(this._startZoom=de,this._easing=this._smoothOutEasing(200)),this._delta=0}const T="number"==typeof this._targetZoom?this._targetZoom:g(),P=this._startZoom,B=this._easing;let X,K=!1;if("wheel"===this._type&&P&&B){const te=Math.min((i.exported.now()-this._lastWheelEventTime)/200,1),he=B(te);X=i.number(P,T,he),te<1?this._frameId||(this._frameId=!0):K=!0}else X=T,K=!0;return this._active=!0,K&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!K,zoomDelta:X-g(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let g=i.ease;if(this._prevEase){const T=this._prevEase,P=(i.exported.now()-T.start)/T.duration,B=T.easing(P+.01)-T.easing(P),X=.27/Math.sqrt(B*B+1e-4)*.01,K=Math.sqrt(.0729-X*X);g=i.bezier(X,K,.25,1)}return this._prevEase={start:i.exported.now(),duration:d,easing:g},g}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Fe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(i.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class ys{constructor(d,g){this._clickZoom=d,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ys{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(d,g){return d.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(d.shiftKey?-1:1),around:T.unproject(g)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah{constructor(){this._tap=new _r({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(d,g,T){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=g[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(d,g,T))}touchmove(d,g,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const P=g[0],B=P.y-this._swipePoint.y;return this._swipePoint=P,d.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(d,g,T)}touchend(d,g,T){this._tapTime?this._swipePoint&&0===T.length&&this.reset():this._tap.touchend(d,g,T)&&(this._tapTime=d.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zd{constructor(d,g,T){this._el=d,this._mousePan=g,this._touchPan=T}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Tf{constructor(d,g,T){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=g,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class qd{constructor(d,g,T,P){this._el=d,this._touchZoom=g,this._touchRotate=T,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ea=w=>w.zoom||w.drag||w.pitch||w.rotate;class up extends i.Event{}class wl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(d,g){const T=i.sub([],g,d);this.radius=i.length(T[2]<0?i.div([],T,this.constants):[T[0],T[1],0])}projectRay(d){i.div(d,d,this.constants),i.normalize(d,d),i.mul$1(d,d,this.constants);const g=i.scale$2([],d,this.radius);if(g[2]>0){const T=i.scale$2([],[0,0,1],i.dot(g,[0,0,1])),P=i.scale$2([],i.normalize([],[g[0],g[1],0]),this.radius),B=i.add([],g,i.scale$2([],i.sub([],i.add([],P,T),g),2));g[0]=B[0],g[1]=B[1]}return g}}function Gl(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class pa{constructor(d,g){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new D(d),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new wl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(g),i.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[i.window,"blur",void 0]];for(const[P,B,X]of this._listeners)P.addEventListener(B,P===i.window.document?this.handleWindowEvent:this.handleEvent,X)}destroy(){for(const[d,g,T]of this._listeners)d.removeEventListener(g,d===i.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(d){const g=this._map,T=g.getCanvasContainer();this._add("mapEvent",new ai(g,d));const P=g.boxZoom=new sn(g,d);this._add("boxZoom",P);const B=new Yr,X=new Ys;g.doubleClickZoom=new ys(X,B),this._add("tapZoom",B),this._add("clickZoom",X);const K=new Ah;this._add("tapDragZoom",K);const te=g.touchPitch=new ke(g);this._add("touchPitch",te);const he=new Ga(d),de=new al(d);g.dragRotate=new Tf(d,he,de),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",de,["mouseRotate"]);const Ce=new Xs(d),je=new oo(g,d);g.dragPan=new Zd(T,Ce,je),this._add("mousePan",Ce),this._add("touchPan",je,["touchZoom","touchRotate"]);const Qe=new J,et=new cc;g.touchZoomRotate=new qd(T,et,Qe,K),this._add("touchRotate",Qe,["touchPan","touchZoom"]),this._add("touchZoom",et,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ti(g));const tt=g.scrollZoom=new zr(g,this);this._add("scrollZoom",tt,["mousePan"]);const st=g.keyboard=new zi;this._add("keyboard",st);for(const Te of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])d.interactive&&d[Te]&&g[Te].enable(d[Te])}_add(d,g,T){this._handlers.push({handlerName:d,handler:g,allowed:T}),this._handlersById[d]=g}stop(d){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ea(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(d,g,T){for(const P in d)if(P!==T&&(!g||g.indexOf(P)<0))return!0;return!1}handleWindowEvent(d){this.handleEvent(d,`${d.type}Window`)}_getMapTouches(d){const g=[];for(const T of d)this._el.contains(T.target)&&g.push(T);return g}handleEvent(d,g){this._updatingCamera=!0;const T="renderFrame"===d.type,P=T?void 0:d,B={needsRenderFrame:!1},X={},K={},te=d.touches?this._getMapTouches(d.touches):void 0,he=te?$e(this._el,te):T?void 0:si(this._el,d);for(const{handlerName:je,handler:Qe,allowed:et}of this._handlers){if(!Qe.isEnabled())continue;let tt;this._blockedByActive(K,et,je)?Qe.reset():Qe[g||d.type]&&(tt=Qe[g||d.type](d,he,te),this.mergeHandlerResult(B,X,tt,je,P),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Qe.isActive())&&(K[je]=Qe)}const de={};for(const je in this._previousActiveHandlers)K[je]||(de[je]=P);this._previousActiveHandlers=K,(Object.keys(de).length||Gl(B))&&(this._changes.push([B,X,de]),this._triggerRenderFrame()),(Object.keys(K).length||Gl(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=B;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))}mergeHandlerResult(d,g,T,P,B){if(!T)return;i.extend(d,T);const X={handlerName:P,originalEvent:T.originalEvent||B};void 0!==T.zoomDelta&&(g.zoom=X),void 0!==T.panDelta&&(g.drag=X),void 0!==T.pitchDelta&&(g.pitch=X),void 0!==T.bearingDelta&&(g.rotate=X)}_applyChanges(){const d={},g={},T={};for(const[P,B,X]of this._changes)P.panDelta&&(d.panDelta=(d.panDelta||new i.Point(0,0))._add(P.panDelta)),P.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+P.pitchDelta),void 0!==P.around&&(d.around=P.around),void 0!==P.aroundCoord&&(d.aroundCoord=P.aroundCoord),void 0!==P.pinchAround&&(d.pinchAround=P.pinchAround),P.noInertia&&(d.noInertia=P.noInertia),i.extend(g,B),i.extend(T,X);this._updateMapTransform(d,g,T),this._changes=[]}_updateMapTransform(d,g,T){const P=this._map,B=P.transform,X=Ge=>[Ge.x,Ge.y,Ge.z];if((Ge=>{const bt=this._eventsInProgress.drag;return bt&&!this._handlersById[bt.handlerName].isActive()})()&&!Gl(d)){const Ge=B.zoom;B.cameraElevationReference="sea",B.recenterOnTerrain(),B.cameraElevationReference="ground",Ge!==B.zoom&&this._map._update(!0)}if(B._isCameraConstrained&&P._stop(!0),!Gl(d))return void this._fireEvents(g,T,!0);let{panDelta:K,zoomDelta:te,bearingDelta:he,pitchDelta:de,around:Ce,aroundCoord:je,pinchAround:Qe}=d;B._isCameraConstrained&&(te>0&&(te=0),B._isCameraConstrained=!1),void 0!==Qe&&(Ce=Qe),(te||(Ge=>g.drag&&!this._eventsInProgress.drag)())&&Ce&&(this._dragOrigin=X(B.pointCoordinate3D(Ce)),this._trackingEllipsoid.setup(B._camera.position,this._dragOrigin)),B.cameraElevationReference="sea",P._stop(!0),Ce=Ce||P.transform.centerPoint,he&&(B.bearing+=he),de&&(B.pitch+=de),B._updateCameraState();const et=[0,0,0];if(K)if("mercator"===B.projection.name){const Ge=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Ce).dir),bt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Ce.sub(K)).dir);et[0]=bt[0]-Ge[0],et[1]=bt[1]-Ge[1]}else{const Ge=B.pointCoordinate(Ce);if("globe"===B.projection.name){K=K.rotate(-B.angle);const bt=B._pixelsPerMercatorPixel/B.worldSize;et[0]=-K.x*i.mercatorScale(i.latFromMercatorY(Ge.y))*bt,et[1]=-K.y*i.mercatorScale(B.center.lat)*bt}else{const bt=B.pointCoordinate(Ce.sub(K));Ge&&bt&&(et[0]=bt.x-Ge.x,et[1]=bt.y-Ge.y)}}const tt=B.zoom,st=[0,0,0];if(te){const Ge=X(je||B.pointCoordinate3D(Ce)),bt={dir:i.normalize([],i.sub([],Ge,B._camera.position))};if(bt.dir[2]<0){const xt=B.zoomDeltaToMovement(Ge,te);i.scale$2(st,bt.dir,xt)}}const Te=i.add(et,et,st);B._translateCameraConstrained(Te),te&&Math.abs(B.zoom-tt)>1e-4&&B.recenterOnTerrain(),B.cameraElevationReference="ground",this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(g,T,!0)}_fireEvents(d,g,T){const P=Ea(this._eventsInProgress),B=Ea(d),X={};for(const de in d){const{originalEvent:Ce}=d[de];this._eventsInProgress[de]||(X[`${de}start`]=Ce),this._eventsInProgress[de]=d[de]}!P&&B&&this._fireEvent("movestart",B.originalEvent);for(const de in X)this._fireEvent(de,X[de]);B&&this._fireEvent("move",B.originalEvent);for(const de in d){const{originalEvent:Ce}=d[de];this._fireEvent(de,Ce)}const K={};let te;for(const de in this._eventsInProgress){const{handlerName:Ce,originalEvent:je}=this._eventsInProgress[de];this._handlersById[Ce].isActive()||(delete this._eventsInProgress[de],te=g[Ce]||je,K[`${de}end`]=te)}for(const de in K)this._fireEvent(de,K[de]);const he=Ea(this._eventsInProgress);if(T&&(P||B)&&!he){this._updatingCamera=!0;const de=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ce=je=>0!==je&&-this._bearingSnap<je&&je<this._bearingSnap;de?(Ce(de.bearing||this._map.getBearing())&&(de.bearing=0),this._map.easeTo(de,{originalEvent:te})):(this._map.fire(new i.Event("moveend",{originalEvent:te})),Ce(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(d,g){this._map.fire(new i.Event(d,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{this._frameId=void 0,this.handleEvent(new up("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const uc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ps extends i.Evented{constructor(d,g){super(),this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=g.bearingSnap,this._respectPrefersReducedMotion=!1!==g.respectPrefersReducedMotion,i.bindAll(["_renderFrameCallback"],this)}getCenter(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(d,g){return this.jumpTo({center:d},g)}panBy(d,g,T){return d=i.Point.convert(d).mult(-1),this.panTo(this.transform.center,i.extend({offset:d},g),T)}panTo(d,g,T){return this.easeTo(i.extend({center:d},g),T)}getZoom(){return this.transform.zoom}setZoom(d,g){return this.jumpTo({zoom:d},g),this}zoomTo(d,g,T){return this.easeTo(i.extend({zoom:d},g),T)}zoomIn(d,g){return this.zoomTo(this.getZoom()+1,d,g),this}zoomOut(d,g){return this.zoomTo(this.getZoom()-1,d,g),this}getBearing(){return this.transform.bearing}setBearing(d,g){return this.jumpTo({bearing:d},g),this}getPadding(){return this.transform.padding}setPadding(d,g){return this.jumpTo({padding:d},g),this}rotateTo(d,g,T){return this.easeTo(i.extend({bearing:d},g),T)}resetNorth(d,g){return this.rotateTo(0,i.extend({duration:1e3},d),g),this}resetNorthPitch(d,g){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},d),g),this}snapToNorth(d,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,g):this}getPitch(){return this.transform.pitch}setPitch(d,g){return this.jumpTo({pitch:d},g),this}cameraForBounds(d,g){d=i.LngLatBounds.convert(d);const T=g&&g.bearing||0,P=g&&g.pitch||0,B=d.getNorthWest(),X=d.getSouthEast();return this._cameraForBounds(this.transform,B,X,T,P,g)}_extendCameraOptions(d){const g={top:0,bottom:0,right:0,left:0};if("number"==typeof(d=i.extend({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding){const T=d.padding;d.padding={top:T,bottom:T,right:T,left:T}}return d.padding=i.extend(g,d.padding),d}_minimumAABBFrustumDistance(d,g){const T=g.max[0]-g.min[0],P=g.max[1]-g.min[1];return T/P>d.aspect?T/(2*Math.tan(.5*d.fovX)*d.aspect):P/(2*Math.tan(.5*d.fovY)*d.aspect)}_cameraForBoundsOnGlobe(d,g,T,P,B,X){const K=d.clone(),te=this._extendCameraOptions(X);K.bearing=P,K.pitch=B;const he=i.LngLat.convert(g),de=i.LngLat.convert(T),Ce=.5*(he.lat+de.lat),je=.5*(he.lng+de.lng),Qe=i.latLngToECEF(Ce,je),et=i.normalize([],Qe),tt=i.normalize([],i.cross([],et,[0,1,0])),st=i.cross([],tt,et),Te=[tt[0],tt[1],tt[2],0,st[0],st[1],st[2],0,et[0],et[1],et[2],0,0,0,0,1],Ge=[Qe,i.latLngToECEF(he.lat,he.lng),i.latLngToECEF(de.lat,he.lng),i.latLngToECEF(de.lat,de.lng),i.latLngToECEF(he.lat,de.lng),i.latLngToECEF(Ce,he.lng),i.latLngToECEF(Ce,de.lng),i.latLngToECEF(he.lat,je),i.latLngToECEF(de.lat,je)];let bt=i.Aabb.fromPoints(Ge.map(Bi=>[i.dot(tt,Bi),i.dot(st,Bi),i.dot(et,Bi)]));const xt=i.transformMat4([],bt.center,Te);0===i.squaredLength(xt)&&i.set(xt,0,0,1),i.normalize(xt,xt),i.scale$2(xt,xt,i.GLOBE_RADIUS),K.center=i.ecefToLatLng(xt);const jt=K.getWorldToCameraMatrix(),Wt=i.invert(new Float64Array(16),jt);bt=i.Aabb.applyTransform(bt,i.multiply([],jt,Te)),i.transformMat4(xt,xt,jt);const Gt=.5*(bt.max[2]-bt.min[2]),ti=this._minimumAABBFrustumDistance(K,bt),Jt=i.scale$2([],[0,0,1],Gt),_i=i.add(Jt,xt,Jt),Qi=ti+(0===K.pitch?0:i.distance(xt,_i)),ci=K.globeCenterInViewSpace,Ri=i.sub([],xt,[ci[0],ci[1],ci[2]]);i.normalize(Ri,Ri),i.scale$2(Ri,Ri,Qi);const yi=i.add([],xt,Ri);i.transformMat4(yi,yi,Wt);const Wi=i.earthRadius/i.GLOBE_RADIUS,pi=i.length(yi),Ii=i.mercatorZfromAltitude(Math.max(pi*Wi-i.earthRadius,Number.EPSILON),0),rn=Math.min(K.zoomFromMercatorZAdjusted(Ii),te.maxZoom);return rn>.5*(i.GLOBE_ZOOM_THRESHOLD_MIN+i.GLOBE_ZOOM_THRESHOLD_MAX)?(K.setProjection({name:"mercator"}),K.zoom=rn,this._cameraForBounds(K,g,T,P,B,X)):{center:K.center,zoom:rn,bearing:P,pitch:B}}queryTerrainElevation(d,g){const T=this.transform.elevation;return T?(g=i.extend({},{exaggerated:!0},g),T.getAtPoint(i.MercatorCoordinate.fromLngLat(d),null,g.exaggerated)):null}_cameraForBounds(d,g,T,P,B,X){if("globe"===d.projection.name)return this._cameraForBoundsOnGlobe(d,g,T,P,B,X);const K=d.clone(),te=this._extendCameraOptions(X),he=K.padding;K.bearing=P,K.pitch=B;const de=i.LngLat.convert(g),Ce=i.LngLat.convert(T),je=new i.LngLat(de.lng,Ce.lat),Qe=new i.LngLat(Ce.lng,de.lat),et=K.project(de),tt=K.project(Ce),st=this.queryTerrainElevation(de),Te=this.queryTerrainElevation(Ce),Ge=this.queryTerrainElevation(je),bt=this.queryTerrainElevation(Qe),xt=[[et.x,et.y,Math.min(st||0,Te||0,Ge||0,bt||0)],[tt.x,tt.y,Math.max(st||0,Te||0,Ge||0,bt||0)]];let jt=i.Aabb.fromPoints(xt);const Wt=K.getWorldToCameraMatrix(),Gt=i.invert(new Float64Array(16),Wt);jt=i.Aabb.applyTransform(jt,Wt);const ti=i.sub([],jt.max,jt.min),Jt=he.left||0,_i=he.right||0,Qi=he.bottom||0,ci=he.top||0,{left:Ri,right:yi,top:Wi,bottom:pi}=te.padding,Ii=.5*(Jt+_i),rn=.5*(ci+Qi),Bi=Math.min(K.scaleZoom(K.scale*Math.min((K.width-(Jt+_i+Ri+yi))/ti[0],(K.height-(Qi+ci+pi+Wi))/ti[1])),te.maxZoom),qi=K.scale/K.zoomScale(Bi);jt=new i.Aabb([jt.min[0]-(Ri+Ii)*qi,jt.min[1]-(pi+rn)*qi,jt.min[2]],[jt.max[0]+(yi+Ii)*qi,jt.max[1]+(Wi+rn)*qi,jt.max[2]]);const Bn=.5*ti[2],Hn=this._minimumAABBFrustumDistance(K,jt),En=[0,0,1,0];i.transformMat4$1(En,En,Wt),i.normalize$2(En,En);const qn=i.scale$2([],En,Hn+Bn),rr=i.add([],jt.center,qn),sr=("number"==typeof te.offset.x&&"number"==typeof te.offset.y?new i.Point(te.offset.x,te.offset.y):i.Point.convert(te.offset)).rotate(-i.degToRad(P));jt.center[0]-=sr.x*qi,jt.center[1]+=sr.y*qi,i.transformMat4(jt.center,jt.center,Gt),i.transformMat4(rr,rr,Gt);const Vn=[jt.center[0],jt.center[1],rr[2]*K.pixelsPerMeter];i.scale$2(Vn,Vn,1/K.worldSize);const Ir=i.lngFromMercatorX(Vn[0]),vs=i.latFromMercatorY(Vn[1]),_s=Math.min(K._zoomFromMercatorZ(Vn[2]),te.maxZoom),cs=new i.LngLat(Ir,vs);return K.mercatorFromTransition&&_s<.5*(i.GLOBE_ZOOM_THRESHOLD_MIN+i.GLOBE_ZOOM_THRESHOLD_MAX)?(K.setProjection({name:"globe"}),K.zoom=_s,this._cameraForBounds(K,g,T,P,B,X)):{center:cs,zoom:_s,bearing:P,pitch:B}}fitBounds(d,g,T){const P=this.cameraForBounds(d,g);return this._fitInternal(P,g,T)}fitScreenCoordinates(d,g,T,P,B){const X=i.Point.convert(d),K=i.Point.convert(g),te=new i.Point(Math.min(X.x,K.x),Math.min(X.y,K.y)),he=new i.Point(Math.max(X.x,K.x),Math.max(X.y,K.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(X,K))return this;const de=this.transform.pointLocation3D(te),Ce=this.transform.pointLocation3D(he),je=this.transform.pointLocation3D(new i.Point(te.x,he.y)),Qe=this.transform.pointLocation3D(new i.Point(he.x,te.y)),et=[Math.min(de.lng,Ce.lng,je.lng,Qe.lng),Math.min(de.lat,Ce.lat,je.lat,Qe.lat)],tt=[Math.max(de.lng,Ce.lng,je.lng,Qe.lng),Math.max(de.lat,Ce.lat,je.lat,Qe.lat)],st=P&&P.pitch?P.pitch:this.getPitch(),Te=this._cameraForBounds(this.transform,et,tt,T,st,P);return this._fitInternal(Te,P,B)}_fitInternal(d,g,T){return d?(delete(g=i.extend(d,g)).padding,g.linear?this.easeTo(g,T):this.flyTo(g,T)):this}jumpTo(d,g){this.stop();const T=d.preloadOnly?this.transform.clone():this.transform;let P=!1,B=!1,X=!1;return"zoom"in d&&T.zoom!==+d.zoom&&(P=!0,T.zoom=+d.zoom),void 0!==d.center&&(T.center=i.LngLat.convert(d.center)),"bearing"in d&&T.bearing!==+d.bearing&&(B=!0,T.bearing=+d.bearing),"pitch"in d&&T.pitch!==+d.pitch&&(X=!0,T.pitch=+d.pitch),null==d.padding||T.isPaddingEqual(d.padding)||(T.padding=d.padding),d.preloadOnly?(this._preloadTiles(T),this):(this.fire(new i.Event("movestart",g)).fire(new i.Event("move",g)),P&&this.fire(new i.Event("zoomstart",g)).fire(new i.Event("zoom",g)).fire(new i.Event("zoomend",g)),B&&this.fire(new i.Event("rotatestart",g)).fire(new i.Event("rotate",g)).fire(new i.Event("rotateend",g)),X&&this.fire(new i.Event("pitchstart",g)).fire(new i.Event("pitch",g)).fire(new i.Event("pitchend",g)),this.fire(new i.Event("moveend",g)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.warnOnce(uc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(d,g){const T=this.transform;if(!T.projection.supportsFreeCamera)return i.warnOnce(uc),this;this.stop();const P=T.zoom,B=T.pitch,X=T.bearing;T.setFreeCameraOptions(d);const K=P!==T.zoom,te=B!==T.pitch,he=X!==T.bearing;return this.fire(new i.Event("movestart",g)).fire(new i.Event("move",g)),K&&this.fire(new i.Event("zoomstart",g)).fire(new i.Event("zoom",g)).fire(new i.Event("zoomend",g)),he&&this.fire(new i.Event("rotatestart",g)).fire(new i.Event("rotate",g)).fire(new i.Event("rotateend",g)),te&&this.fire(new i.Event("pitchstart",g)).fire(new i.Event("pitch",g)).fire(new i.Event("pitchend",g)),this.fire(new i.Event("moveend",g)),this}easeTo(d,g){this._stop(!1,d.easeId),(!1===(d=i.extend({offset:[0,0],duration:500,easing:i.ease},d)).animate||this._prefersReducedMotion(d))&&(d.duration=0);const T=this.transform,P=this.getZoom(),B=this.getBearing(),X=this.getPitch(),K=this.getPadding(),te="zoom"in d?+d.zoom:P,he="bearing"in d?this._normalizeBearing(d.bearing,B):B,de="pitch"in d?+d.pitch:X,Ce="padding"in d?d.padding:T.padding,je=i.Point.convert(d.offset);let Qe,et,tt;if("globe"===T.projection.name){const Jt=i.MercatorCoordinate.fromLngLat(T.center),_i=je.rotate(-T.angle);Jt.x+=_i.x/T.worldSize,Jt.y+=_i.y/T.worldSize;const Qi=Jt.toLngLat(),ci=i.LngLat.convert(d.center||Qi);this._normalizeCenter(ci),Qe=T.centerPoint.add(_i),et=new i.Point(Jt.x,Jt.y).mult(T.worldSize),tt=new i.Point(i.mercatorXfromLng(ci.lng),i.mercatorYfromLat(ci.lat)).mult(T.worldSize).sub(et)}else{Qe=T.centerPoint.add(je);const Jt=T.pointLocation(Qe),_i=i.LngLat.convert(d.center||Jt);this._normalizeCenter(_i),et=T.project(Jt),tt=T.project(_i).sub(et)}const st=T.zoomScale(te-P);let Te,Ge;d.around&&(Te=i.LngLat.convert(d.around),Ge=T.locationPoint(Te));const bt=this._zooming||te!==P,xt=this._rotating||B!==he,jt=this._pitching||de!==X,Wt=!T.isPaddingEqual(Ce),Gt=Jt=>_i=>{if(bt&&(Jt.zoom=i.number(P,te,_i)),xt&&(Jt.bearing=i.number(B,he,_i)),jt&&(Jt.pitch=i.number(X,de,_i)),Wt&&(Jt.interpolatePadding(K,Ce,_i),Qe=Jt.centerPoint.add(je)),Te)Jt.setLocationAtPoint(Te,Ge);else{const Qi=Jt.zoomScale(Jt.zoom-P),ci=te>P?Math.min(2,st):Math.max(.5,st),Ri=Math.pow(ci,1-_i),yi=Jt.unproject(et.add(tt.mult(_i*Ri)).mult(Qi));Jt.setLocationAtPoint(Jt.renderWorldCopies?yi.wrap():yi,Qe)}return d.preloadOnly||this._fireMoveEvents(g),Jt};if(d.preloadOnly){const Jt=this._emulate(Gt,d.duration,T);return this._preloadTiles(Jt),this}const ti={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=bt,this._rotating=xt,this._pitching=jt,this._padding=Wt,this._easeId=d.easeId,this._prepareEase(g,d.noMoveStart,ti),this._ease(Gt(T),Jt=>{T.recenterOnTerrain(),this._afterEase(g,Jt)},d),this}_prepareEase(d,g,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",g||T.moving||this.fire(new i.Event("movestart",d)),this._zooming&&!T.zooming&&this.fire(new i.Event("zoomstart",d)),this._rotating&&!T.rotating&&this.fire(new i.Event("rotatestart",d)),this._pitching&&!T.pitching&&this.fire(new i.Event("pitchstart",d))}_fireMoveEvents(d){this.fire(new i.Event("move",d)),this._zooming&&this.fire(new i.Event("zoom",d)),this._rotating&&this.fire(new i.Event("rotate",d)),this._pitching&&this.fire(new i.Event("pitch",d))}_afterEase(d,g){if(this._easeId&&g&&this._easeId===g)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,P=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new i.Event("zoomend",d)),P&&this.fire(new i.Event("rotateend",d)),B&&this.fire(new i.Event("pitchend",d)),this.fire(new i.Event("moveend",d))}flyTo(d,g){if(this._prefersReducedMotion(d)){const Bi=i.pick(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bi,g)}this.stop(),d=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},d);const T=this.transform,P=this.getZoom(),B=this.getBearing(),X=this.getPitch(),K=this.getPadding(),te="zoom"in d?i.clamp(+d.zoom,T.minZoom,T.maxZoom):P,he="bearing"in d?this._normalizeBearing(d.bearing,B):B,de="pitch"in d?+d.pitch:X,Ce="padding"in d?d.padding:T.padding,je=T.zoomScale(te-P),Qe=i.Point.convert(d.offset);let et=T.centerPoint.add(Qe);const tt=T.pointLocation(et),st=i.LngLat.convert(d.center||tt);this._normalizeCenter(st);const Te=T.project(tt),Ge=T.project(st).sub(Te);let bt=d.curve;const xt=Math.max(T.width,T.height),jt=xt/je,Wt=Ge.mag();if("minZoom"in d){const Bi=i.clamp(Math.min(d.minZoom,P,te),T.minZoom,T.maxZoom),qi=xt/T.zoomScale(Bi-P);bt=Math.sqrt(qi/Wt*2)}const Gt=bt*bt;function ti(Bi){const qi=(jt*jt-xt*xt+(Bi?-1:1)*Gt*Gt*Wt*Wt)/(2*(Bi?jt:xt)*Gt*Wt);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Jt(Bi){return(Math.exp(Bi)-Math.exp(-Bi))/2}function _i(Bi){return(Math.exp(Bi)+Math.exp(-Bi))/2}const Qi=ti(0);let ci=function(Bi){return _i(Qi)/_i(Qi+bt*Bi)},Ri=function(Bi){return xt*((_i(Qi)*(Jt(qi=Qi+bt*Bi)/_i(qi))-Jt(Qi))/Gt)/Wt;var qi},yi=(ti(1)-Qi)/bt;if(Math.abs(Wt)<1e-6||!isFinite(yi)){if(Math.abs(xt-jt)<1e-6)return this.easeTo(d,g);const Bi=jt<xt?-1:1;yi=Math.abs(Math.log(jt/xt))/bt,Ri=function(){return 0},ci=function(qi){return Math.exp(Bi*bt*qi)}}d.duration="duration"in d?+d.duration:1e3*yi/("screenSpeed"in d?+d.screenSpeed/bt:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0);const Wi=B!==he,pi=de!==X,Ii=!T.isPaddingEqual(Ce),rn=Bi=>qi=>{const Bn=qi*yi,Hn=1/ci(Bn);Bi.zoom=1===qi?te:P+Bi.scaleZoom(Hn),Wi&&(Bi.bearing=i.number(B,he,qi)),pi&&(Bi.pitch=i.number(X,de,qi)),Ii&&(Bi.interpolatePadding(K,Ce,qi),et=Bi.centerPoint.add(Qe));const En=1===qi?st:Bi.unproject(Te.add(Ge.mult(Ri(Bn))).mult(Hn));return Bi.setLocationAtPoint(Bi.renderWorldCopies?En.wrap():En,et),Bi._updateCameraOnTerrain(),d.preloadOnly||this._fireMoveEvents(g),Bi};if(d.preloadOnly){const Bi=this._emulate(rn,d.duration,T);return this._preloadTiles(Bi),this}return this._zooming=!0,this._rotating=Wi,this._pitching=pi,this._padding=Ii,this._prepareEase(g,!1),this._ease(rn(T),()=>this._afterEase(g),d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,g)}if(!d){const T=this.handlers;T&&T.stop(!1)}return this}_ease(d,g,T){!1===T.animate||0===T.duration?(d(1),g()):(this._easeStart=i.exported.now(),this._easeOptions=T,this._onEaseFrame=d,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const d=Math.min((i.exported.now()-this._easeStart)/this._easeOptions.duration,1),g=this._onEaseFrame;g&&g(this._easeOptions.easing(d)),d<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(d,g){d=i.wrap(d,-180,180);const T=Math.abs(d-g);return Math.abs(d-360-g)<T&&(d-=360),Math.abs(d+360-g)<T&&(d+=360),d}_normalizeCenter(d){const g=this.transform;if(!g.renderWorldCopies||g.maxBounds)return;const T=d.lng-g.center.lng;d.lng+=T>180?-360:T<-180?360:0}_prefersReducedMotion(d){return this._respectPrefersReducedMotion&&i.exported.prefersReducedMotion&&!(d&&d.essential)}_emulate(d,g,T){const P=Math.ceil(15*g/1e3),B=[],X=d(T.clone());for(let K=0;K<=P;K++){const te=X(K/P);B.push(te.clone())}return B}}class Tn{constructor(d={}){this.options=d,i.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(d){const g=this.options&&this.options.compact;return this._map=d,this._container=Fe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Fe("button","mapboxgl-ctrl-attrib-button",this._container),Fe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Fe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===g&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(d,g){const T=this._map._getUIString(`AttributionControl.${g}`);d.setAttribute("aria-label",T),d.removeAttribute("title"),d.firstElementChild&&d.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));const g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(d){const T=g.reduce((P,B,X)=>(B.value&&(P+=`${B.key}=${B.value}${X<g.length-1?"&":""}`),P),"?");d.href=`${i.config.FEEDBACK_URL}/${T}#${xl(this._map,!0)}`,d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}}_updateData(d){!d||"metadata"!==d.sourceDataType&&"visibility"!==d.sourceDataType&&"style"!==d.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let d=[];if(this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const g=this._map.style._sourceCaches;for(const P in g){const B=g[P];if(B.used){const X=B.getSource();X.attribution&&d.indexOf(X.attribution)<0&&d.push(X.attribution)}}d.sort((P,B)=>P.length-B.length),d=d.filter((P,B)=>{for(let X=B+1;X<d.length;X++)if(d[X].indexOf(P)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=[...this.options.customAttribution,...d]:d.unshift(this.options.customAttribution));const T=d.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,d.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Mh{constructor(){i.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(d){this._map=d,this._container=Fe("div","mapboxgl-ctrl");const g=Fe("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(d){d&&"metadata"!==d.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const d=this._map.style._sourceCaches;if(0===Object.entries(d).length)return!0;for(const g in d){const T=d[g].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const d=this._container.children;if(d.length){const g=d[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}}}class dp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const g=++this._id;return this._queue.push({callback:d,id:g,cancelled:!1}),g}remove(d){const g=this._currentlyRunning,T=g?this._queue.concat(g):this._queue;for(const P of T)if(P.id===d)return void(P.cancelled=!0)}run(d=0){const g=this._currentlyRunning=this._queue;this._queue=[];for(const T of g)if(!T.cancelled&&(T.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function jc(w,d,g){if(w=new i.LngLat(w.lng,w.lat),d){const T=new i.LngLat(w.lng-360,w.lat),P=new i.LngLat(w.lng+360,w.lat),B=360*Math.ceil(Math.abs(w.lng-g.center.lng)/360),X=g.locationPoint(w).distSqr(d),K=d.x<0||d.y<0||d.x>g.width||d.y>g.height;g.locationPoint(T).distSqr(d)<X&&(K||Math.abs(T.lng-g.center.lng)<B)?w=T:g.locationPoint(P).distSqr(d)<X&&(K||Math.abs(P.lng-g.center.lng)<B)&&(w=P)}for(;Math.abs(w.lng-g.center.lng)>180;){const T=g.locationPoint(w);if(T.x>=0&&T.y>=0&&T.x<=g.width&&T.y<=g.height)break;w.lng>g.center.lng?w.lng-=360:w.lng+=360}return w}const Cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class vn extends i.Evented{constructor(d,g){if(super(),(d instanceof i.window.HTMLElement||g)&&(d=i.extend({element:d},g)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=d&&d.occludedOpacity||.2,d&&d.element)this._element=d.element,this._offset=i.Point.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=Fe("div");const P=41,B=27,X=Ue("svg",{display:"block",height:P*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${P}`},this._element),K=Ue("radialGradient",{id:"shadowGradient"},Ue("defs",{},X));Ue("stop",{offset:"10%","stop-opacity":.4},K),Ue("stop",{offset:"100%","stop-opacity":.05},K),Ue("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},X),Ue("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},X),Ue("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},X),Ue("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},X),this._offset=i.Point.convert(d&&d.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",P=>{P.preventDefault()}),this._element.addEventListener("mousedown",P=>{P.preventDefault()});const T=this._element.classList;for(const P in Cl)T.remove(`mapboxgl-marker-anchor-${P}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(d){return d===this._map||(this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._updateMoving),d.on("moveend",this._update),d.on("remove",this._clearFadeTimer),d._addMarker(this),this.setDraggable(this._draggable),this._update(),d.on("click",this._onMapClick)),this}remove(){const d=this._map;return d&&(d.off("click",this._onMapClick),d.off("move",this._updateMoving),d.off("moveend",this._update),d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler),d.off("mouseup",this._onUp),d.off("touchend",this._onUp),d.off("mousemove",this._onMove),d.off("touchmove",this._onMove),d.off("remove",this._clearFadeTimer),d._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=i.LngLat.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(24.6+P)],"bottom-right":[-P,-1*(24.6+P)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=d,d._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(d){const g=d.code,T=d.charCode||d.keyCode;"Space"!==g&&"Enter"!==g&&32!==T&&13!==T||this.togglePopup()}_onMapClick(d){const g=d.originalEvent.target,T=this._element;this._popup&&(g===T||T.contains(g))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?(d.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(d.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const d=this._map,g=this._pos;if(!d||!g)return!1;const T=d.unproject(g),P=d.getFreeCameraOptions();if(!P.position)return!1;const B=P.position.toLngLat();return B.distanceTo(T)<.9*B.distanceTo(this._lngLat)}_evaluateOpacity(){const d=this._map;if(!d)return;const g=this._pos;if(!g||g.x<0||g.x>d.transform.width||g.y<0||g.y>d.transform.height)return void this._clearFadeTimer();const T=d.unproject(g);let P;d._showingGlobe()&&i.isLngLatBehindGlobe(d.transform,this._lngLat)?P=0:(P=1-d._queryFogOpacity(T),d.transform._terrainEnabled()&&d.getTerrain()&&this._behindTerrain()&&(P*=this._occludedOpacity)),this._element.style.opacity=`${P}`,this._element.style.pointerEvents=P>0?"auto":"none",this._popup&&this._popup._setOpacity(P),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const d=this._pos;if(!d||!this._map)return;const g=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${d.x}px,${d.y}px)\n            ${Cl[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${g.x}px,${g.y}px)\n        `}_calculateXYTransform(){const d=this._pos,g=this._map,T=this.getPitchAlignment();if(!g||!d||"map"!==T)return"";if(!g._showingGlobe()){const te=g.getPitch();return te?`rotateX(${te}deg)`:""}const P=i.radToDeg(i.globeTiltAtLngLat(g.transform,this._lngLat)),B=d.sub(i.globeCenterToScreenPoint(g.transform)),X=Math.abs(B.x)+Math.abs(B.y);if(0===X)return"";const K=P/X;return`rotateX(${-B.y*K}deg) rotateY(${B.x*K}deg)`}_calculateZTransform(){const d=this._pos,g=this._map;if(!g||!d)return"";let T=0;const P=this.getRotationAlignment();if("map"===P)if(g._showingGlobe()){const B=g.project(new i.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),X=g.project(new i.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(B);T=i.radToDeg(Math.atan2(X.y,X.x))-90}else T=-g.getBearing();else if("horizon"===P){const B=i.smoothstep(4,6,g.getZoom()),X=i.globeCenterToScreenPoint(g.transform);X.y+=B*g.transform.height;const K=d.sub(X),te=i.radToDeg(Math.atan2(K.y,K.x));T=(te>90?te-270:te+90)*(1-B)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(d){i.window.cancelAnimationFrame(this._updateFrameId);const g=this._map;g&&(g.transform.renderWorldCopies&&(this._lngLat=jc(this._lngLat,this._pos,g.transform)),this._pos=g.project(this._lngLat),!0===d?this._updateFrameId=i.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),g._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(g._showingGlobe()||g.getTerrain()||g.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(d){return this._offset=i.Point.convert(d),this._update(),this}_onMove(d){const g=this._map;if(!g)return;const T=this._pointerdownPos,P=this._positionDelta;if(T&&P){if(!this._isDragging){const B=this._clickTolerance||g._clickTolerance;if(d.point.dist(T)<B)return;this._isDragging=!0}this._pos=d.point.sub(P),this._lngLat=g.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const d=this._map;d&&(d.off("mousemove",this._onMove),d.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new i.Event("dragend")),this._state="inactive"}_addDragHandler(d){const g=this._map,T=this._pos;g&&T&&this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(T),this._pointerdownPos=d.point,this._state="pending",g.on("mousemove",this._onMove),g.on("touchmove",this._onMove),g.once("mouseup",this._onUp),g.once("touchend",this._onUp))}setDraggable(d){this._draggable=!!d;const g=this._map;return g&&(d?(g.on("mousedown",this._addDragHandler),g.on("touchstart",this._addDragHandler)):(g.off("mousedown",this._addDragHandler),g.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(d){return this._occludedOpacity=d||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Wu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(w=new i.Point(0,0),d="bottom"){if("number"==typeof w){const g=Math.round(Math.sqrt(.5*Math.pow(w,2)));switch(d){case"top":return new i.Point(0,w);case"top-left":return new i.Point(g,g);case"top-right":return new i.Point(-g,g);case"bottom":return new i.Point(0,-w);case"bottom-left":return new i.Point(g,-g);case"bottom-right":return new i.Point(-g,-g);case"left":return new i.Point(w,0);case"right":return new i.Point(-w,0)}return new i.Point(0,0)}return w instanceof i.Point||Array.isArray(w)?i.Point.convert(w):i.Point.convert(w[d]||[0,0])}class bu{constructor(d){this.jumpTo(d)}getValue(d){if(d<=this._startTime)return this._start;if(d>=this._endTime)return this._end;const g=i.easeCubicInOut((d-this._startTime)/(this._endTime-this._startTime));return this._start*(1-g)+this._end*g}isEasing(d){return d>=this._startTime&&d<=this._endTime}jumpTo(d){this._startTime=-1/0,this._endTime=-1/0,this._start=d,this._end=d}easeTo(d,g,T){this._start=this.getValue(g),this._end=d,this._startTime=g,this._endTime=g+T}}const Dh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ih={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},pp={showCompass:!0,showZoom:!0,visualizePitch:!1};class ja{constructor(d,g,T=!1){this._clickTolerance=10,this.element=g,this.mouseRotate=new Ga({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,T&&(this.mousePitch=new al({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener("mousedown",this.mousedown),g.addEventListener("touchstart",this.touchstart,{passive:!1}),g.addEventListener("touchmove",this.touchmove),g.addEventListener("touchend",this.touchend),g.addEventListener("touchcancel",this.reset)}down(d,g){this.mouseRotate.mousedown(d,g),this.mousePitch&&this.mousePitch.mousedown(d,g),Pt()}move(d,g){const T=this.map,P=this.mouseRotate.mousemoveWindow(d,g),B=P&&P.bearingDelta;if(B&&T.setBearing(T.getBearing()+B),this.mousePitch){const X=this.mousePitch.mousemoveWindow(d,g),K=X&&X.pitchDelta;K&&T.setPitch(T.getPitch()+K)}}off(){const d=this.element;d.removeEventListener("mousedown",this.mousedown),d.removeEventListener("touchstart",this.touchstart,{passive:!1}),d.removeEventListener("touchmove",this.touchmove),d.removeEventListener("touchend",this.touchend),d.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ot(),i.window.removeEventListener("mousemove",this.mousemove),i.window.removeEventListener("mouseup",this.mouseup)}mousedown(d){this.down(i.extend({},d,{ctrlKey:!0,preventDefault:()=>d.preventDefault()}),si(this.element,d)),i.window.addEventListener("mousemove",this.mousemove),i.window.addEventListener("mouseup",this.mouseup)}mousemove(d){this.move(d,si(this.element,d))}mouseup(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()}touchstart(d){1!==d.targetTouches.length?this.reset():(this._startPos=this._lastPos=$e(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>d.preventDefault()},this._startPos))}touchmove(d){1!==d.targetTouches.length?this.reset():(this._lastPos=$e(this.element,d.targetTouches)[0],this.move({preventDefault:()=>d.preventDefault()},this._lastPos))}touchend(d){0===d.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const fd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Kd={maxWidth:100,unit:"metric"},Jd={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},xu={version:i.version,supported:Oe,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:class extends ps{constructor(w){if(i.LivePerformanceUtils.mark(i.PerformanceMarkers.create),null!=(w=i.extend({},Ih,w)).minZoom&&null!=w.maxZoom&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=w.minPitch&&null!=w.maxPitch&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=w.minPitch&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=w.maxPitch&&w.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(w.antialias&&i.isSafariWithAntialiasingBug(i.window)&&(w.antialias=!1,i.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Va(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies),w),this._interactive=w.interactive,this._minTileCacheSize=w.minTileCacheSize,this._maxTileCacheSize=w.maxTileCacheSize,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._useWebGL2=w.useWebGL2,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=w.crossSourceCollisions,this._collectResourceTiming=w.collectResourceTiming,this._optimizeForTerrain=w.optimizeForTerrain,this._language=this._parseLanguage(w.language),this._worldview=w.worldview,this._renderTaskQueue=new dp,this._domRenderTaskQueue=new dp,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.uniqueId(),this._locale=i.extend({},Dh,w.locale),this._clickTolerance=w.clickTolerance,this._cooperativeGestures=w.cooperativeGestures,this._performanceMetricsCollection=w.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new bu(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new i.RequestManager(w.transformRequest,w.accessToken,w.testMode),this._silenceAuthErrors=!!w.testMode,"string"==typeof w.container){if(this._container=i.window.document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof i.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(this._container.childNodes.length>0&&i.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),w.maxBounds&&this.setMaxBounds(w.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==i.window&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1),i.window.addEventListener("orientationchange",this._onWindowResize,!1),i.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),i.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new pa(this,w),this._localFontFamily=w.localFontFamily,this._localIdeographFontFamily=w.localIdeographFontFamily,w.style&&this.setStyle(w.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),w.projection&&this.setProjection(w.projection),this._hash=w.hash&&new bl("string"==typeof w.hash&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,i.extend({},w.fitBoundsOptions,{duration:0})))),this.resize(),w.attributionControl&&this.addControl(new Tn({customAttribution:w.customAttribution})),this._logoControl=new Mh,this.addControl(this._logoControl,w.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update("style"===d.dataType),this.fire(new i.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.Event(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(w,d){if(void 0===d&&(d=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=w.onAdd(this);this._controls.push(w);const T=this._controlPositions[d];return-1!==d.indexOf("bottom")?T.insertBefore(g,T.firstChild):T.appendChild(g),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(w);return d>-1&&this._controls.splice(d,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(w){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const d=!this._moving;return d&&this.fire(new i.Event("movestart",w)).fire(new i.Event("move",w)),this.fire(new i.Event("resize",w)),d&&this.fire(new i.Event("moveend",w)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(w){return this.transform.setMaxBounds(i.LngLatBounds.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w?this.setZoom(w):this.fire(new i.Event("zoomstart")).fire(new i.Event("zoom")).fire(new i.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w?this.setZoom(w):this.fire(new i.Event("zoomstart")).fire(new i.Event("zoom")).fire(new i.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w?this.setPitch(w):this.fire(new i.Event("pitchstart")).fire(new i.Event("pitch")).fire(new i.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w?this.setPitch(w):this.fire(new i.Event("pitchstart")).fire(new i.Event("pitch")).fire(new i.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(w){return"auto"===w?i.window.navigator.language:Array.isArray(w)?0===w.length?void 0:w.map(d=>"auto"===d?i.window.navigator.language:d):w}setLanguage(w){const d=this._parseLanguage(w);if(!this.style||d===this._language)return this;this._language=d,this.style._reloadSources();for(const g of this._controls)g._setLanguage&&g._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(w){return this.style&&w!==this._worldview?(this._worldview=w,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(w){return this._lazyInitEmptyStyle(),w?"string"==typeof w&&(w={name:w}):w=null,this._useExplicitProjection=!!w,this._prioritizeAndUpdateProjection(w,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const w=this.transform,d=w.projection.name;let g;"globe"===d&&w.zoom>=i.GLOBE_ZOOM_THRESHOLD_MAX?(w.setMercatorFromTransition(),g=!0):"mercator"===d&&w.zoom<i.GLOBE_ZOOM_THRESHOLD_MAX&&(w.setProjection({name:"globe"}),g=!0),g&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(w,d){return this._updateProjection(w||d||{name:"mercator"})}_updateProjection(w){let d;if(d="globe"===w.name&&this.transform.zoom>=i.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(w),this.style.applyProjectionUpdate(),d){this.painter.clearBackgroundTiles();for(const g in this.style._sourceCaches)this.style._sourceCaches[g].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(w){return this.transform.locationPoint3D(i.LngLat.convert(w))}unproject(w){return this.transform.pointLocation3D(i.Point.convert(w))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(w,d,g){if("mouseenter"===w||"mouseover"===w){let T=!1;const P=X=>{const K=d.filter(he=>this.getLayer(he)),te=K.length?this.queryRenderedFeatures(X.point,{layers:K}):[];te.length?T||(T=!0,g.call(this,new _e(w,this,X.originalEvent,{features:te}))):T=!1},B=()=>{T=!1};return{layers:new Set(d),listener:g,delegates:{mousemove:P,mouseout:B}}}if("mouseleave"===w||"mouseout"===w){let T=!1;const P=X=>{const K=d.filter(te=>this.getLayer(te));(K.length?this.queryRenderedFeatures(X.point,{layers:K}):[]).length?T=!0:T&&(T=!1,g.call(this,new _e(w,this,X.originalEvent)))},B=X=>{T&&(T=!1,g.call(this,new _e(w,this,X.originalEvent)))};return{layers:new Set(d),listener:g,delegates:{mousemove:P,mouseout:B}}}{const T=P=>{const B=d.filter(K=>this.getLayer(K)),X=B.length?this.queryRenderedFeatures(P.point,{layers:B}):[];X.length&&(P.features=X,g.call(this,P),delete P.features)};return{layers:new Set(d),listener:g,delegates:{[w]:T}}}}on(w,d,g){if(void 0===g)return super.on(w,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(w,d,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(T);for(const P in T.delegates)this.on(P,T.delegates[P]);return this}once(w,d,g){if(void 0===g)return super.once(w,d);Array.isArray(d)||(d=[d]);const T=this._createDelegatedListener(w,d,g);for(const P in T.delegates)this.once(P,T.delegates[P]);return this}off(w,d,g){if(void 0===g)return super.off(w,d);d=new Set(Array.isArray(d)?d:[d]);const T=(B,X)=>{if(B.size!==X.size)return!1;for(const K of B)if(!X.has(K))return!1;return!0},P=this._delegatedListeners?this._delegatedListeners[w]:void 0;return P&&(B=>{for(let X=0;X<B.length;X++){const K=B[X];if(K.listener===g&&T(K.layers,d)){for(const te in K.delegates)this.off(te,K.delegates[te]);return B.splice(X,1),this}}})(P),this}queryRenderedFeatures(w,d){return this.style?(void 0!==d||void 0===w||w instanceof i.Point||Array.isArray(w)||(d=w,w=void 0),this.style.queryRenderedFeatures(w=w||[[0,0],[this.transform.width,this.transform.height]],d=d||{},this.transform)):[]}querySourceFeatures(w,d){return this.style.querySourceFeatures(w,d)}isPointOnSurface(w){const{name:d}=this.transform.projection;return"globe"!==d&&"mercator"!==d&&i.warnOnce(`${d} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.Point.convert(w))}setStyle(w,d){return!1!==(d=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},d)).diff&&d.localIdeographFontFamily===this._localIdeographFontFamily&&d.localFontFamily===this._localFontFamily&&this.style&&w?(this._diffStyle(w,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._localFontFamily=d.localFontFamily,this._updateStyle(w,d))}_getUIString(w){const d=this._locale[w];if(null==d)throw new Error(`Missing UI string '${w}'`);return d}_updateStyle(w,d){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),w&&(this.style=new xr(this,d||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof w?this.style.loadURL(w):this.style.loadJSON(w)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new xr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,d){if("string"==typeof w){const g=this._requestManager.normalizeStyleURL(w),T=this._requestManager.transformRequest(g,i.ResourceType.Style);i.getJSON(T,(P,B)=>{P?this.fire(new i.ErrorEvent(P)):B&&this._updateDiff(B,d)})}else"object"==typeof w&&this._updateDiff(w,d)}_updateDiff(w,d){try{this.style.setState(w)&&this._update(!0)}catch(g){i.warnOnce(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(w,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.warnOnce("There is no style added to the map."),!1)}addSource(w,d){return this._lazyInitEmptyStyle(),this.style.addSource(w,d),this._update(!0)}isSourceLoaded(w){return!!this.style&&this.style._isSourceCacheLoaded(w)}areTilesLoaded(){const w=this.style&&this.style._sourceCaches;for(const d in w){const g=w[d]._tiles;for(const T in g){const P=g[T];if("loaded"!==P.state&&"errored"!==P.state)return!1}}return!0}addSourceType(w,d,g){this._lazyInitEmptyStyle(),this.style.addSourceType(w,d,g)}removeSource(w){return this.style.removeSource(w),this._updateTerrain(),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,d,{pixelRatio:g=1,sdf:T=!1,stretchX:P,stretchY:B,content:X}={}){if(this._lazyInitEmptyStyle(),d instanceof i.window.HTMLImageElement||i.window.ImageBitmap&&d instanceof i.window.ImageBitmap){const{width:K,height:te,data:he}=i.exported.getImageData(d);this.style.addImage(w,{data:new i.RGBAImage({width:K,height:te},he),pixelRatio:g,stretchX:P,stretchY:B,content:X,sdf:T,version:0})}else if(void 0===d.width||void 0===d.height)this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:K,height:te}=d,he=d;this.style.addImage(w,{data:new i.RGBAImage({width:K,height:te},new Uint8Array(he.data)),pixelRatio:g,stretchX:P,stretchY:B,content:X,sdf:T,version:0,userImage:he}),he.onAdd&&he.onAdd(this,w)}}updateImage(w,d){const g=this.style.getImage(w);if(!g)return void this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=d instanceof i.window.HTMLImageElement||i.window.ImageBitmap&&d instanceof i.window.ImageBitmap?i.exported.getImageData(d):d,{width:P,height:B}=T;void 0!==P&&void 0!==B?P===g.data.width&&B===g.data.height?(g.data.replace(T.data,!(d instanceof i.window.HTMLImageElement||i.window.ImageBitmap&&d instanceof i.window.ImageBitmap)),this.style.updateImage(w,g)):this.fire(new i.ErrorEvent(new Error(`The width and height of the updated image (${P}, ${B})\n                must be that same as the previous version of the image\n                (${g.data.width}, ${g.data.height})`))):this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w,d){i.getImage(this._requestManager.transformRequest(w,i.ResourceType.Image),(g,T)=>{d(g,T instanceof i.window.HTMLImageElement?i.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(w,d){return this._lazyInitEmptyStyle(),this.style.addLayer(w,d),this._update(!0)}moveLayer(w,d){return this.style.moveLayer(w,d),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}setLayerZoomRange(w,d,g){return this.style.setLayerZoomRange(w,d,g),this._update(!0)}setFilter(w,d,g={}){return this.style.setFilter(w,d,g),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,d,g,T={}){return this.style.setPaintProperty(w,d,g,T),this._update(!0)}getPaintProperty(w,d){return this.style.getPaintProperty(w,d)}setLayoutProperty(w,d,g,T={}){return this.style.setLayoutProperty(w,d,g,T),this._update(!0)}getLayoutProperty(w,d){return this.style.getLayoutProperty(w,d)}setLight(w,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,d),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(w){return this._lazyInitEmptyStyle(),!w&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(w),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(w){return this._lazyInitEmptyStyle(),this.style.setFog(w),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(w){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.LngLat.convert(w),this.transform):0}setFeatureState(w,d){return this.style.setFeatureState(w,d),this._update()}removeFeatureState(w,d){return this.style.removeFeatureState(w,d),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}_updateContainerDimensions(){if(!this._container)return;const w=this._container.getBoundingClientRect().width||400,d=this._container.getBoundingClientRect().height||300;let g,T,P,B=this._container;for(;B&&(!T||!P);){const X=i.window.getComputedStyle(B).transform;X&&"none"!==X&&(g=X.match(/matrix.*\((.+)\)/)[1].split(", "),g[0]&&"0"!==g[0]&&"1"!==g[0]&&(T=g[0]),g[3]&&"0"!==g[3]&&"1"!==g[3]&&(P=g[3])),B=B.parentElement}this._containerWidth=T?Math.abs(w/T):w,this._containerHeight=P?Math.abs(d/P):d}_detectMissingCSS(){"rgb(250, 128, 114)"!==i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const w=this._container;w.classList.add("mapboxgl-map"),(this._missingCSSCanary=Fe("div","mapboxgl-canary",w)).style.visibility="hidden",this._detectMissingCSS();const d=this._canvasContainer=Fe("div","mapboxgl-canvas-container",w);this._interactive&&d.classList.add("mapboxgl-interactive"),this._canvas=Fe("canvas","mapboxgl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const g=this._controlContainer=Fe("div","mapboxgl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{T[P]=Fe("div",`mapboxgl-ctrl-${P}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,d){const g=i.exported.devicePixelRatio||1;this._canvas.width=g*Math.ceil(w),this._canvas.height=g*Math.ceil(d),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${d}px`}_addMarker(w){this._markers.push(w)}_removeMarker(w){const d=this._markers.indexOf(w);-1!==d&&this._markers.splice(d,1)}_addPopup(w){this._popups.push(w)}_removePopup(w){const d=this._popups.indexOf(w);-1!==d&&this._popups.splice(d,1)}_setupPainter(){const w=i.extend({},Oe.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),d=this._useWebGL2&&this._canvas.getContext("webgl2",w),g=d||this._canvas.getContext("webgl",w)||this._canvas.getContext("experimental-webgl",w);g?(this._useWebGL2&&!d&&i.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),i.storeAuthState(g,!0),this.painter=new To(g,this.transform,!!d),this.on("data",T=>{"source"===T.dataType&&this.painter.setTileLoadedFlag(!0)}),i.exported$1.testSupport(g)):this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(w){w.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:w}))}_contextRestored(w){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:w}))}_onMapScroll(w){if(w.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_requestDomTask(w){!this.loaded()||this.loaded()&&!this.isMoving()?w():this._domRenderTaskQueue.add(w)}_render(w){let d;const g=this.painter.context.extTimerQuery,T=i.exported.now();if(this.listens("gpu-timing-frame")&&(d=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,d)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],i.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],i.window.performance.now())),this._renderTaskQueue.run(w),this._domRenderTaskQueue.run(w),this._removed)return;this._updateProjectionTransition();const P=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,te=this.transform.pitch,he=i.exported.now(),de=new i.EvaluationParameters(K,{now:he,fadeDuration:P,pitch:te,transition:this.style.getTransition()});this.style.update(de)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,P,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),d){const K=i.exported.now()-T;g.endQueryEXT(g.TIME_ELAPSED_EXT,d),setTimeout(()=>{const te=g.getQueryObjectEXT(d,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(d),this.fire(new i.Event("gpu-timing-frame",{cpuTime:K,gpuTime:te})),i.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:te}})},50)}if(this.listens("gpu-timing-layer")){const K=this.painter.collectGpuTimers();setTimeout(()=>{const te=this.painter.queryGpuTimers(K);this.fire(new i.Event("gpu-timing-layer",{layerTimes:te}))},50)}if(this.listens("gpu-timing-deferred-render")){const K=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const te=this.painter.queryGpuTimeDeferredRender(K);this.fire(new i.Event("gpu-timing-deferred-render",{gpuTime:te}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(X||this._repaint)this.triggerRepaint();else{const K=!this.isMoving()&&this.loaded();if(K&&(B=this._updateAverageElevation(T,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),K&&(this.fire(new i.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const te=this._calculateSpeedIndex();this.fire(new i.Event("speedindexcompleted",{speedIndex:te})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,i.LivePerformanceUtils.mark(i.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&i.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(w){for(const d of this._markers)w&&!this.getRenderWorldCopies()&&(d._lngLat=d._lngLat.wrap()),d._update();for(const d of this._popups)!w||this.getRenderWorldCopies()||d._trackPointer||(d._lngLat=d._lngLat.wrap()),d._update()}_updateAverageElevation(w,d=!1){const g=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&g(0);if((d||w-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(w)){const T=this.transform.averageElevation;let P=this.transform.sampleAverageElevation(),B=!1;this.transform.elevation&&(B=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(P)?P=0:this._averageElevationLastSampledAt=w;const X=Math.abs(T-P);if(X>1){if(this._isInitialLoad||B)return this._averageElevation.jumpTo(P),g(P);this._averageElevation.easeTo(P,w,300)}else if(X>1e-4)return this._averageElevation.jumpTo(P),g(P)}return!!this._averageElevation.isEasing(w)&&g(this._averageElevation.getValue(w))}_authenticate(){i.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,w=>{if(w&&(w.message===i.AUTH_ERR_MSG||401===w.status)){const d=this.painter.context.gl;i.storeAuthState(d,!1),this._logoControl instanceof Mh&&this._logoControl._updateLogo(),d&&d.clear(d.DEPTH_BUFFER_BIT|d.COLOR_BUFFER_BIT|d.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),i.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const w=this._isDragging();this.painter.updateTerrain(this.style,w)}_calculateSpeedIndex(){const w=this.painter.canvasCopy(),d=this.painter.getCanvasCopiesAndTimestamps();d.timeStamps.push(performance.now());const g=this.painter.context.gl,T=g.createFramebuffer();function P(B){g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,B,0);const X=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4);return g.readPixels(0,0,g.drawingBufferWidth,g.drawingBufferHeight,g.RGBA,g.UNSIGNED_BYTE,X),X}return g.bindFramebuffer(g.FRAMEBUFFER,T),this._canvasPixelComparison(P(w),d.canvasCopies.map(P),d.timeStamps)}_canvasPixelComparison(w,d,g){let T=g[1]-g[0];const P=w.length/4;for(let B=0;B<d.length;B++){const X=d[B];let K=0;for(let te=0;te<X.length;te+=4)X[te]===w[te]&&X[te+1]===w[te+1]&&X[te+2]===w[te+2]&&X[te+3]===w[te+3]&&(K+=1);T+=(g[B+2]-g[B+1])*(1-K/P)}return T}remove(){this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==i.window&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("orientationchange",this._onWindowResize,!1),i.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1),i.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),i.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new i.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(w){this._renderNextFrame=this._renderNextFrame||w,this.style&&!this._frame&&(this._frame=i.exported.frame(d=>{const g=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,g&&this._render(d)}))}_preloadTiles(w){const d=this.style?Object.values(this.style._sourceCaches):[];return i.asyncAll(d,(g,T)=>g._preloadTiles(w,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(w){this._trackResize&&this.resize({originalEvent:w})._update()}_onVisibilityChange(){"hidden"===i.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(w){this._showTerrainWireframe!==w&&(this._showTerrainWireframe=w,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(w){this._speedIndexTiming!==w&&(this._speedIndexTiming=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(w){this._showTileAABBs!==w&&(this._showTileAABBs=w,w&&this._update())}_setCacheLimits(w,d){i.setCacheLimits(w,d)}get version(){return i.version}},NavigationControl:class{constructor(w){this.options=i.extend({},pp,w),this._container=Fe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",d=>{this._map&&this._map.zoomIn({},{originalEvent:d})}),Fe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",d=>{this._map&&this._map.zoomOut({},{originalEvent:d})}),Fe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",d=>{const g=this._map;g&&(this.options.visualizePitch?g.resetNorthPitch({},{originalEvent:d}):g.resetNorth({},{originalEvent:d}))}),this._compassIcon=Fe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const w=this._map;if(!w)return;const d=w.getZoom(),g=d===w.getMaxZoom(),T=d===w.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const w=this._map;if(!w)return;const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(w.transform.pitch*(Math.PI/180)),.5)}) rotateX(${w.transform.pitch}deg) rotateZ(${w.transform.angle*(180/Math.PI)}deg)`:`rotate(${w.transform.angle*(180/Math.PI)}deg)`;w._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=d)})}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),w.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&w.on("pitch",this._rotateCompassArrow),w.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(w,this._compass,this.options.visualizePitch)),this._container}onRemove(){const w=this._map;w&&(this._container.remove(),this.options.showZoom&&w.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&w.off("pitch",this._rotateCompassArrow),w.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(w,d){const g=Fe("button",w,this._container);return g.type="button",g.addEventListener("click",d),g}_setButtonTitle(w,d){if(!this._map)return;const g=this._map._getUIString(`NavigationControl.${d}`);w.setAttribute("aria-label",g),w.firstElementChild&&w.firstElementChild.setAttribute("title",g)}},GeolocateControl:class extends i.Evented{constructor(w){super(),this.options=i.extend({geolocation:i.window.navigator.geolocation},fd,w),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ol(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(w){return this._map=w,this._container=Fe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(w){const d=(g=!!this.options.geolocation)=>{this._supportsGeolocation=g,w(g)};void 0!==this._supportsGeolocation?w(this._supportsGeolocation):void 0!==i.window.navigator.permissions?i.window.navigator.permissions.query({name:"geolocation"}).then(g=>d("denied"!==g.state)).catch(()=>d()):d()}_isOutOfMapMaxBounds(w){const d=this._map.getMaxBounds(),g=w.coords;return!!d&&(g.longitude<d.getWest()||g.longitude>d.getEast()||g.latitude<d.getSouth()||g.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new i.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(w),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",w)),this._finish()}}_updateCamera(w){const d=new i.LngLat(w.coords.longitude,w.coords.latitude),g=w.coords.accuracy,T=this._map.getBearing(),P=i.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(g),P,{geolocateSource:!0})}_updateMarker(w){if(w){const d=new i.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const w=this._map.transform,d=i.mercatorZfromAltitude(1,w._center.lat)*w.worldSize,g=Math.ceil(2*this._accuracy*d);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(w){if(this._map){if(this.options.trackUserLocation)if(1===w.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===w.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",w)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(w){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=Fe("button","mapboxgl-ctrl-geolocate",this._container),Fe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===w){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",d),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Fe("div","mapboxgl-user-location"),this._dotElement.appendChild(Fe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Fe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new vn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Fe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||"ACTIVE_LOCK"!==this._watchState||d.originalEvent&&"resize"===d.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.Event("trackuserlocationend")))})}}_onDeviceOrientation(w){this._userLocationDotMarker&&(w.webkitCompassHeading?this._heading=w.webkitCompassHeading:!0===w.absolute&&(this._heading=-1*w.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(w={maximumAge:6e5,timeout:0},this._noTimeout=!0):(w=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,w),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const w=()=>{i.window.addEventListener("ondeviceorientationabsolute"in i.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==i.window.DeviceMotionEvent&&"function"==typeof i.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(d=>{"granted"===d&&w()}).catch(console.error):w()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),i.window.removeEventListener("deviceorientation",this._onDeviceOrientation),i.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Tn,ScaleControl:class{constructor(w){this.options=i.extend({},Kd,w),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const w=this.options.maxWidth||100,d=this._map,g=d._containerHeight/2,T=d._containerWidth/2-w/2,P=d.unproject([T,g]),B=d.unproject([T+w,g]),X=P.distanceTo(B);if("imperial"===this.options.unit){const K=3.2808*X;K>5280?this._setScale(w,K/5280,"mile"):this._setScale(w,K,"foot")}else"nautical"===this.options.unit?this._setScale(w,X/1852,"nautical-mile"):X>=1e3?this._setScale(w,X/1e3,"kilometer"):this._setScale(w,X,"meter")}_setScale(w,d,g){this._map._requestDomTask(()=>{const T=function(B){const X=Math.pow(10,`${Math.floor(B)}`.length-1);let K=B/X;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(te){const he=Math.pow(10,Math.ceil(-Math.log(te)/Math.LN10));return Math.round(te*he)/he}(K),X*K}(d),P=T/d;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==g?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:g}).format(T):`${T}&nbsp;${Jd[g]}`,this._container.style.width=w*P+"px"})}onAdd(w){return this._map=w,this._language=w.getLanguage(),this._container=Fe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",w.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(w){this._language=w,this._update()}setUnit(w){this.options.unit=w,this._update()}},FullscreenControl:class{constructor(w){this._fullscreen=!1,w&&w.container&&(w.container instanceof i.window.HTMLElement?this._container=w.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in i.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=Fe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!i.window.document.fullscreenEnabled&&!i.window.document.webkitFullscreenEnabled)}_setupUI(){const w=this._fullscreenButton=Fe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Fe("span","mapboxgl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",w)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(i.window.document.fullscreenElement||i.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.Evented{constructor(w){super(),this.options=i.extend(Object.create(Wu),w),i.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(w&&w.className?w.className.trim().split(/\s+/):[])}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&w.on("preclick",this._onClose),this.options.closeOnMove&&w.on("move",this._onClose),w.on("remove",this.remove),this._update(),w._addPopup(this),this._focusFirstElement(),this._trackPointer?(w.on("mousemove",this._onMouseEvent),w.on("mouseup",this._onMouseEvent),w._canvasContainer.classList.add("mapboxgl-track-pointer")):w.on("move",this._update),this.fire(new i.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const w=this._map;return w&&(w.off("move",this._update),w.off("move",this._onClose),w.off("preclick",this._onClose),w.off("click",this._onClose),w.off("remove",this.remove),w.off("mousemove",this._onMouseEvent),w.off("mouseup",this._onMouseEvent),w.off("drag",this._onMouseEvent),w._canvasContainer&&w._canvasContainer.classList.remove("mapboxgl-track-pointer"),w._removePopup(this),this._map=void 0),this.fire(new i.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(w){this._lngLat=i.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update();const d=this._map;return d&&(d.on("move",this._update),d.off("mousemove",this._onMouseEvent),d._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const w=this._map;return w&&(w.off("move",this._update),w.on("mousemove",this._onMouseEvent),w.on("drag",this._onMouseEvent),w._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(i.window.document.createTextNode(w))}setHTML(w){const d=i.window.document.createDocumentFragment(),g=i.window.document.createElement("body");let T;for(g.innerHTML=w;T=g.firstChild,T;)d.appendChild(T);return this.setDOMContent(d)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){let d=this._content;if(d)for(;d.hasChildNodes();)d.firstChild&&d.removeChild(d.firstChild);else d=this._content=Fe("div","mapboxgl-popup-content",this._container||void 0);if(d.appendChild(w),this.options.closeButton){const g=this._closeButton=Fe("button","mapboxgl-popup-close-button",d);g.type="button",g.setAttribute("aria-label","Close popup"),g.setAttribute("aria-hidden","true"),g.innerHTML="&#215;",g.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(w){return this._classList.add(w),this._updateClassList(),this}removeClassName(w){return this._classList.delete(w),this._updateClassList(),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){let d;return this._classList.delete(w)?d=!1:(this._classList.add(w),d=!0),this._updateClassList(),d}_onMouseEvent(w){this._update(w.point)}_getAnchor(w){if(this.options.anchor)return this.options.anchor;const d=this._map,g=this._container,T=this._pos;if(!d||!g||!T)return"bottom";const P=g.offsetWidth,B=g.offsetHeight,X=T.x<P/2,K=T.x>d.transform.width-P/2;if(T.y+w<B)return X?"top-left":K?"top-right":"top";if(T.y>d.transform.height-B){if(X)return"bottom-left";if(K)return"bottom-right"}return X?"left":K?"right":"bottom"}_updateClassList(){const w=this._container;if(!w)return;const d=[...this._classList];d.push("mapboxgl-popup"),this._anchor&&d.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&d.push("mapboxgl-popup-track-pointer"),w.className=d.join(" ")}_update(w){const d=this._map,g=this._content;if(!d||!this._lngLat&&!this._trackPointer||!g)return;let T=this._container;if(T||(T=this._container=Fe("div","mapboxgl-popup",d.getContainer()),this._tip=Fe("div","mapboxgl-popup-tip",T),T.appendChild(g)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),d.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=jc(this._lngLat,this._pos,d.transform)),!this._trackPointer||w){const P=this._pos=this._trackPointer&&w?w:d.project(this._lngLat),B=Oc(this.options.offset),X=this._anchor=this._getAnchor(B.y),K=Oc(this.options.offset,X),te=P.add(K).round();d._requestDomTask(()=>{this._container&&X&&(this._container.style.transform=`${Cl[X]} translate(${te.x}px,${te.y}px)`)})}if(!this._marker&&d._showingGlobe()){const P=i.isLngLatBehindGlobe(d.transform,this._lngLat)?0:1;this._setOpacity(P)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(hp);w&&w.focus()}_onClose(){this.remove()}_setOpacity(w){this._container&&(this._container.style.opacity=`${w}`),this._content&&(this._content.style.pointerEvents=w?"auto":"none")}},Marker:vn,Style:xr,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,FreeCameraOptions:_l,Evented:i.Evented,config:i.config,prewarm:function(){rt().acquire(xi)},clearPrewarmedResources:function(){const w=Pi;w&&(w.isPreloaded()&&1===w.numActive()?(w.release(xi),Pi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(w){i.config.ACCESS_TOKEN=w},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(w){i.config.API_URL=w},get workerCount(){return fi.workerCount},set workerCount(w){fi.workerCount=w},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(w){i.config.MAX_PARALLEL_IMAGE_REQUESTS=w},clearStorage(w){i.clearTileCache(w)},workerUrl:"",workerClass:null,setNow:i.exported.setNow,restoreNow:i.exported.restoreNow};return xu}),k}()},1472:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{u:()=>Pt});var k=Rt(1364);let ze,hn=1;const i={};function V(gt){return gt in i&&(delete i[gt],!0)}const Oe={setImmediate(gt){const wt=hn++;return i[wt]=!0,ze||(ze=Promise.resolve()),ze.then(()=>V(wt)&&gt()),wt},clearImmediate(gt){V(gt)}},{setImmediate:De,clearImmediate:Fe}=Oe,Ue={setImmediate(...gt){const{delegate:wt}=Ue;return(wt?.setImmediate||De)(...gt)},clearImmediate(gt){const{delegate:wt}=Ue;return(wt?.clearImmediate||Fe)(gt)},delegate:void 0};var nt=Rt(9816);const Pt=new class mt extends nt.k{flush(wt){this._active=!0;const si=this._scheduled;this._scheduled=void 0;const{actions:$e}=this;let ii;wt=wt||$e.shift();do{if(ii=wt.execute(wt.state,wt.delay))break}while((wt=$e[0])&&wt.id===si&&$e.shift());if(this._active=!1,ii){for(;(wt=$e[0])&&wt.id===si&&$e.shift();)wt.unsubscribe();throw ii}}}(class Je extends k.m{constructor(wt,si){super(wt,si),this.scheduler=wt,this.work=si}requestAsyncId(wt,si,$e=0){return null!==$e&&$e>0?super.requestAsyncId(wt,si,$e):(wt.actions.push(this),wt._scheduled||(wt._scheduled=Ue.setImmediate(wt.flush.bind(wt,void 0))))}recycleAsyncId(wt,si,$e=0){var ii;if(null!=$e?$e>0:this.delay>0)return super.recycleAsyncId(wt,si,$e);const{actions:oi}=wt;null!=si&&(null===(ii=oi[oi.length-1])||void 0===ii?void 0:ii.id)!==si&&(Ue.clearImmediate(si),wt._scheduled===si&&(wt._scheduled=void 0))}})},3756:function(fo){fo.exports=function(){"use strict";function Gr(Se,J,ae){return J=Ue(J),function mt(Se,J){if(J&&("object"==typeof J||"function"==typeof J))return J;if(void 0!==J)throw new TypeError("Derived constructors may only return object or undefined");return function nt(Se){if(void 0===Se)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se}(Se)}(Se,k()?Reflect.construct(J,ae||[],Ue(Se).constructor):J.apply(Se,ae))}function k(){try{var Se=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k=function(){return!!Se})()}function i(Se){var J=function ze(Se,J){if("object"!=typeof Se||!Se)return Se;var ae=Se[Symbol.toPrimitive];if(void 0!==ae){var ke=ae.call(Se,J||"default");if("object"!=typeof ke)return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===J?String:Number)(Se)}(Se,"string");return"symbol"==typeof J?J:String(J)}function V(Se){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(J){return typeof J}:function(J){return J&&"function"==typeof Symbol&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(Se)}function Oe(Se,J){if(!(Se instanceof J))throw new TypeError("Cannot call a class as a function")}function Ae(Se,J){for(var ae=0;ae<J.length;ae++){var ke=J[ae];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(Se,i(ke.key),ke)}}function De(Se,J,ae){return J&&Ae(Se.prototype,J),ae&&Ae(Se,ae),Object.defineProperty(Se,"prototype",{writable:!1}),Se}function Ue(Se){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ae){return ae.__proto__||Object.getPrototypeOf(ae)})(Se)}function Je(Se,J){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,Ft){return ke.__proto__=Ft,ke})(Se,J)}function ot(){return ot=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(J,ae,ke){var Ft=function Pt(Se,J){for(;!Object.prototype.hasOwnProperty.call(Se,J)&&null!==(Se=Ue(Se)););return Se}(J,ae);if(Ft){var zi=Object.getOwnPropertyDescriptor(Ft,ae);return zi.get?zi.get.call(arguments.length<3?J:ke):zi.value}},ot.apply(this,arguments)}function gt(Se,J){return function $e(Se){if(Array.isArray(Se))return Se}(Se)||function hn(Se,J){var ae=null==Se?null:typeof Symbol<"u"&&Se[Symbol.iterator]||Se["@@iterator"];if(null!=ae){var ke,Ft,zi,Ln,Rr=[],zr=!0,ys=!1;try{if(zi=(ae=ae.call(Se)).next,0===J){if(Object(ae)!==ae)return;zr=!1}else for(;!(zr=(ke=zi.call(ae)).done)&&(Rr.push(ke.value),Rr.length!==J);zr=!0);}catch(Ys){ys=!0,Ft=Ys}finally{try{if(!zr&&null!=ae.return&&(Ln=ae.return(),Object(Ln)!==Ln))return}finally{if(ys)throw Ft}}return Rr}}(Se,J)||oi(Se,J)||function Xt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(Se){return function si(Se){if(Array.isArray(Se))return at(Se)}(Se)||function ii(Se){if(typeof Symbol<"u"&&null!=Se[Symbol.iterator]||null!=Se["@@iterator"])return Array.from(Se)}(Se)||oi(Se)||function ri(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(Se,J){if(Se){if("string"==typeof Se)return at(Se,J);var ae=Object.prototype.toString.call(Se).slice(8,-1);if("Object"===ae&&Se.constructor&&(ae=Se.constructor.name),"Map"===ae||"Set"===ae)return Array.from(Se);if("Arguments"===ae||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ae))return at(Se,J)}}function at(Se,J){(null==J||J>Se.length)&&(J=Se.length);for(var ae=0,ke=new Array(J);ae<J;ae++)ke[ae]=Se[ae];return ke}function Vt(Se,J){return function ni(Se,J){return J.get?J.get.call(Se):J.value}(Se,Zt(Se,J,"get"))}function dt(Se,J,ae){return function gi(Se,J,ae){if(J.set)J.set.call(Se,ae);else{if(!J.writable)throw new TypeError("attempted to set read only private field");J.value=ae}}(Se,Zt(Se,J,"set"),ae),ae}function Zt(Se,J,ae){if(!J.has(Se))throw new TypeError("attempted to "+ae+" private field on non-instance");return J.get(Se)}function vi(Se,J,ae){(function Gi(Se,J){if(J.has(Se))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Se,J),J.set(Se,ae)}var Fi={},bn=function(J){return new Promise(function(ae){if(!J)return ae();var ke=window.scrollX,Ft=window.scrollY;Fi.restoreFocusTimeout=setTimeout(function(){Fi.previousActiveElement instanceof HTMLElement?(Fi.previousActiveElement.focus(),Fi.previousActiveElement=null):document.body&&document.body.focus(),ae()},100),window.scrollTo(ke,Ft)})},Qt=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(Se,J){return Se[J]="swal2-"+J,Se},{}),on=["success","warning","info","question","error"].reduce(function(Se,J){return Se[J]="swal2-"+J,Se},{}),Zn="SweetAlert2:",Nn=function(J){return J.charAt(0).toUpperCase()+J.slice(1)},Dn=function(J){console.warn("".concat(Zn," ").concat("object"===V(J)?J.join(" "):J))},ji=function(J){console.error("".concat(Zn," ").concat(J))},Mr=[],gr=function(J,ae){!function(J){Mr.includes(J)||(Mr.push(J),Dn(J))}('"'.concat(J,'" is deprecated and will be removed in the next major release. Please use "').concat(ae,'" instead.'))},xn=function(J){return"function"==typeof J?J():J},en=function(J){return J&&"function"==typeof J.toPromise},_n=function(J){return en(J)?J.toPromise():Promise.resolve(J)},Zi=function(J){return J&&Promise.resolve(J)===J},Ui=function(){return document.body.querySelector(".".concat(Qt.container))},jn=function(J){var ae=Ui();return ae?ae.querySelector(J):null},tn=function(J){return jn(".".concat(J))},Si=function(){return tn(Qt.popup)},mn=function(){return tn(Qt.icon)},Lr=function(){return tn(Qt.title)},Or=function(){return tn(Qt["html-container"])},Sr=function(){return tn(Qt.image)},vr=function(){return tn(Qt["progress-steps"])},ar=function(){return tn(Qt["validation-message"])},kn=function(){return jn(".".concat(Qt.actions," .").concat(Qt.confirm))},dr=function(){return jn(".".concat(Qt.actions," .").concat(Qt.cancel))},Fr=function(){return jn(".".concat(Qt.actions," .").concat(Qt.deny))},er=function(){return jn(".".concat(Qt.loader))},br=function(){return tn(Qt.actions)},mr=function(){return tn(Qt.footer)},Tr=function(){return tn(Qt["timer-progress-bar"])},Xr=function(){return tn(Qt.close)},Ie=function(){var J=Si();if(!J)return[];var ae=J.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),ke=Array.from(ae).sort(function(Ln,Rr){var zr=parseInt(Ln.getAttribute("tabindex")||"0"),ys=parseInt(Rr.getAttribute("tabindex")||"0");return zr>ys?1:zr<ys?-1:0}),Ft=J.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),zi=Array.from(Ft).filter(function(Ln){return"-1"!==Ln.getAttribute("tabindex")});return wt(new Set(ke.concat(zi))).filter(function(Ln){return Yt(Ln)})},Be=function(){return qt(document.body,Qt.shown)&&!qt(document.body,Qt["toast-shown"])&&!qt(document.body,Qt["no-backdrop"])},ct=function(){var J=Si();return!!J&&qt(J,Qt.toast)},zt=function(J,ae){if(J.textContent="",ae){var Ft=(new DOMParser).parseFromString(ae,"text/html"),zi=Ft.querySelector("head");zi&&Array.from(zi.childNodes).forEach(function(Rr){J.appendChild(Rr)});var Ln=Ft.querySelector("body");Ln&&Array.from(Ln.childNodes).forEach(function(Rr){Rr instanceof HTMLVideoElement||Rr instanceof HTMLAudioElement?J.appendChild(Rr.cloneNode(!0)):J.appendChild(Rr)})}},qt=function(J,ae){if(!ae)return!1;for(var ke=ae.split(/\s+/),Ft=0;Ft<ke.length;Ft++)if(!J.classList.contains(ke[Ft]))return!1;return!0},pt=function(J,ae,ke){if(function(J,ae){Array.from(J.classList).forEach(function(ke){!Object.values(Qt).includes(ke)&&!Object.values(on).includes(ke)&&!Object.values(ae.showClass||{}).includes(ke)&&J.classList.remove(ke)})}(J,ae),ae.customClass&&ae.customClass[ke]){if("string"!=typeof ae.customClass[ke]&&!ae.customClass[ke].forEach)return void Dn("Invalid type of customClass.".concat(ke,'! Expected string or iterable object, got "').concat(V(ae.customClass[ke]),'"'));di(J,ae.customClass[ke])}},ui=function(J,ae){if(!ae)return null;switch(ae){case"select":case"textarea":case"file":return J.querySelector(".".concat(Qt.popup," > .").concat(Qt[ae]));case"checkbox":return J.querySelector(".".concat(Qt.popup," > .").concat(Qt.checkbox," input"));case"radio":return J.querySelector(".".concat(Qt.popup," > .").concat(Qt.radio," input:checked"))||J.querySelector(".".concat(Qt.popup," > .").concat(Qt.radio," input:first-child"));case"range":return J.querySelector(".".concat(Qt.popup," > .").concat(Qt.range," input"));default:return J.querySelector(".".concat(Qt.popup," > .").concat(Qt.input))}},Vi=function(J){if(J.focus(),"file"!==J.type){var ae=J.value;J.value="",J.value=ae}},$i=function(J,ae,ke){!J||!ae||("string"==typeof ae&&(ae=ae.split(/\s+/).filter(Boolean)),ae.forEach(function(Ft){Array.isArray(J)?J.forEach(function(zi){ke?zi.classList.add(Ft):zi.classList.remove(Ft)}):ke?J.classList.add(Ft):J.classList.remove(Ft)}))},di=function(J,ae){$i(J,ae,!0)},un=function(J,ae){$i(J,ae,!1)},Et=function(J,ae){for(var ke=Array.from(J.children),Ft=0;Ft<ke.length;Ft++){var zi=ke[Ft];if(zi instanceof HTMLElement&&qt(zi,ae))return zi}},St=function(J,ae,ke){ke==="".concat(parseInt(ke))&&(ke=parseInt(ke)),ke||0===parseInt(ke)?J.style.setProperty(ae,"number"==typeof ke?"".concat(ke,"px"):ke):J.style.removeProperty(ae)},Ke=function(J){J&&(J.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},Ze=function(J){J&&(J.style.display="none")},Re=function(J){var ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";J&&new MutationObserver(function(){ft(J,J.innerHTML,ae)}).observe(J,{childList:!0,subtree:!0})},He=function(J,ae,ke,Ft){var zi=J.querySelector(ae);zi&&zi.style.setProperty(ke,Ft)},ft=function(J,ae){ae?Ke(J,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ze(J)},Yt=function(J){return!(!J||!(J.offsetWidth||J.offsetHeight||J.getClientRects().length))},fi=function(J){return J.scrollHeight>J.clientHeight},Pi=function(J){var ae=window.getComputedStyle(J),ke=parseFloat(ae.getPropertyValue("animation-duration")||"0"),Ft=parseFloat(ae.getPropertyValue("transition-duration")||"0");return ke>0||Ft>0},rt=function(J){var ae=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ke=Tr();ke&&Yt(ke)&&(ae&&(ke.style.transition="none",ke.style.width="100%"),setTimeout(function(){ke.style.transition="width ".concat(J/1e3,"s linear"),ke.style.width="0%"},10))},fe=function(){return typeof window>"u"||typeof document>"u"},it='\n <div aria-labelledby="'.concat(Qt.title,'" aria-describedby="').concat(Qt["html-container"],'" class="').concat(Qt.popup,'" tabindex="-1">\n   <button type="button" class="').concat(Qt.close,'"></button>\n   <ul class="').concat(Qt["progress-steps"],'"></ul>\n   <div class="').concat(Qt.icon,'"></div>\n   <img class="').concat(Qt.image,'" />\n   <h2 class="').concat(Qt.title,'" id="').concat(Qt.title,'"></h2>\n   <div class="').concat(Qt["html-container"],'" id="').concat(Qt["html-container"],'"></div>\n   <input class="').concat(Qt.input,'" id="').concat(Qt.input,'" />\n   <input type="file" class="').concat(Qt.file,'" />\n   <div class="').concat(Qt.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(Qt.select,'" id="').concat(Qt.select,'"></select>\n   <div class="').concat(Qt.radio,'"></div>\n   <label class="').concat(Qt.checkbox,'">\n     <input type="checkbox" id="').concat(Qt.checkbox,'" />\n     <span class="').concat(Qt.label,'"></span>\n   </label>\n   <textarea class="').concat(Qt.textarea,'" id="').concat(Qt.textarea,'"></textarea>\n   <div class="').concat(Qt["validation-message"],'" id="').concat(Qt["validation-message"],'"></div>\n   <div class="').concat(Qt.actions,'">\n     <div class="').concat(Qt.loader,'"></div>\n     <button type="button" class="').concat(Qt.confirm,'"></button>\n     <button type="button" class="').concat(Qt.deny,'"></button>\n     <button type="button" class="').concat(Qt.cancel,'"></button>\n   </div>\n   <div class="').concat(Qt.footer,'"></div>\n   <div class="').concat(Qt["timer-progress-bar-container"],'">\n     <div class="').concat(Qt["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Pe=function(){Fi.currentInstance.resetValidationMessage()},h=function(J){var ae=function(){var J=Ui();return!!J&&(J.remove(),un([document.documentElement,document.body],[Qt["no-backdrop"],Qt["toast-shown"],Qt["has-column"]]),!0)}();if(fe())ji("SweetAlert2 requires document to initialize");else{var ke=document.createElement("div");ke.className=Qt.container,ae&&di(ke,Qt["no-transition"]),zt(ke,it);var Ft=function(J){return"string"==typeof J?document.querySelector(J):J}(J.target);Ft.appendChild(ke),function(J){var ae=Si();ae.setAttribute("role",J.toast?"alert":"dialog"),ae.setAttribute("aria-live",J.toast?"polite":"assertive"),J.toast||ae.setAttribute("aria-modal","true")}(J),function(J){"rtl"===window.getComputedStyle(J).direction&&di(Ui(),Qt.rtl)}(Ft),function(){var J=Si(),ae=Et(J,Qt.input),ke=Et(J,Qt.file),Ft=J.querySelector(".".concat(Qt.range," input")),zi=J.querySelector(".".concat(Qt.range," output")),Ln=Et(J,Qt.select),Rr=J.querySelector(".".concat(Qt.checkbox," input")),zr=Et(J,Qt.textarea);ae.oninput=Pe,ke.onchange=Pe,Ln.onchange=Pe,Rr.onchange=Pe,zr.oninput=Pe,Ft.oninput=function(){Pe(),zi.value=Ft.value},Ft.onchange=function(){Pe(),zi.value=Ft.value}}()}},_=function(J,ae){J instanceof HTMLElement?ae.appendChild(J):"object"===V(J)?b(J,ae):J&&zt(ae,J)},b=function(J,ae){J.jquery?x(ae,J):zt(ae,J.toString())},x=function(J,ae){if(J.textContent="",0 in ae)for(var ke=0;ke in ae;ke++)J.appendChild(ae[ke].cloneNode(!0));else J.appendChild(ae.cloneNode(!0))},A=function(){if(fe())return!1;var Se=document.createElement("div");return typeof Se.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof Se.style.animation<"u"&&"animationend"}(),I=function(J,ae){var ke=br(),Ft=er();!ke||!Ft||(ae.showConfirmButton||ae.showDenyButton||ae.showCancelButton?Ke(ke):Ze(ke),pt(ke,ae,"actions"),function F(Se,J,ae){var ke=kn(),Ft=Fr(),zi=dr();!ke||!Ft||!zi||($(ke,"confirm",ae),$(Ft,"deny",ae),$(zi,"cancel",ae),function U(Se,J,ae,ke){ke.buttonsStyling?(di([Se,J,ae],Qt.styled),ke.confirmButtonColor&&(Se.style.backgroundColor=ke.confirmButtonColor,di(Se,Qt["default-outline"])),ke.denyButtonColor&&(J.style.backgroundColor=ke.denyButtonColor,di(J,Qt["default-outline"])),ke.cancelButtonColor&&(ae.style.backgroundColor=ke.cancelButtonColor,di(ae,Qt["default-outline"]))):un([Se,J,ae],Qt.styled)}(ke,Ft,zi,ae),ae.reverseButtons&&(ae.toast?(Se.insertBefore(zi,ke),Se.insertBefore(Ft,ke)):(Se.insertBefore(zi,J),Se.insertBefore(Ft,J),Se.insertBefore(ke,J))))}(ke,Ft,ae),zt(Ft,ae.loaderHtml||""),pt(Ft,ae,"loader"))};function $(Se,J,ae){var ke=Nn(J);ft(Se,ae["show".concat(ke,"Button")],"inline-block"),zt(Se,ae["".concat(J,"ButtonText")]||""),Se.setAttribute("aria-label",ae["".concat(J,"ButtonAriaLabel")]||""),Se.className=Qt[J],pt(Se,ae,"".concat(J,"Button"))}var ie=function(J,ae){var ke=Ui();ke&&(function ue(Se,J){"string"==typeof J?Se.style.background=J:J||di([document.documentElement,document.body],Qt["no-backdrop"])}(ke,ae.backdrop),function ge(Se,J){J&&(J in Qt?di(Se,Qt[J]):(Dn('The "position" parameter is not valid, defaulting to "center"'),di(Se,Qt.center)))}(ke,ae.position),function we(Se,J){J&&di(Se,Qt["grow-".concat(J)])}(ke,ae.grow),pt(ke,ae,"container"))};var me={innerParams:new WeakMap,domCache:new WeakMap},Ee=["input","file","range","select","radio","checkbox","textarea"],Q=function(J){if(J.input){if(!wi[J.input])return void ji("Unexpected type of input! Expected ".concat(Object.keys(wi).join(" | "),', got "').concat(J.input,'"'));var ae=Dt(J.input),ke=wi[J.input](ae,J);Ke(ae),J.inputAutoFocus&&setTimeout(function(){Vi(ke)})}},xe=function(J,ae){var ke=ui(Si(),J);if(ke)for(var Ft in function(J){for(var ae=0;ae<J.attributes.length;ae++){var ke=J.attributes[ae].name;["id","type","value","style"].includes(ke)||J.removeAttribute(ke)}}(ke),ae)ke.setAttribute(Ft,ae[Ft])},Le=function(J){var ae=Dt(J.input);"object"===V(J.customClass)&&di(ae,J.customClass.input)},qe=function(J,ae){(!J.placeholder||ae.inputPlaceholder)&&(J.placeholder=ae.inputPlaceholder)},kt=function(J,ae,ke){if(ke.inputLabel){var Ft=document.createElement("label"),zi=Qt["input-label"];Ft.setAttribute("for",J.id),Ft.className=zi,"object"===V(ke.customClass)&&di(Ft,ke.customClass.inputLabel),Ft.innerText=ke.inputLabel,ae.insertAdjacentElement("beforebegin",Ft)}},Dt=function(J){return Et(Si(),Qt[J]||Qt.input)},ei=function(J,ae){["string","number"].includes(V(ae))?J.value="".concat(ae):Zi(ae)||Dn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(V(ae),'"'))},wi={};wi.text=wi.email=wi.password=wi.number=wi.tel=wi.url=wi.search=wi.date=wi["datetime-local"]=wi.time=wi.week=wi.month=function(Se,J){return ei(Se,J.inputValue),kt(Se,Se,J),qe(Se,J),Se.type=J.input,Se},wi.file=function(Se,J){return kt(Se,Se,J),qe(Se,J),Se},wi.range=function(Se,J){var ae=Se.querySelector("input"),ke=Se.querySelector("output");return ei(ae,J.inputValue),ae.type=J.input,ei(ke,J.inputValue),kt(ae,Se,J),Se},wi.select=function(Se,J){if(Se.textContent="",J.inputPlaceholder){var ae=document.createElement("option");zt(ae,J.inputPlaceholder),ae.value="",ae.disabled=!0,ae.selected=!0,Se.appendChild(ae)}return kt(Se,Se,J),Se},wi.radio=function(Se){return Se.textContent="",Se},wi.checkbox=function(Se,J){var ae=ui(Si(),"checkbox");ae.value="1",ae.checked=!!J.inputValue;var ke=Se.querySelector("span");return zt(ke,J.inputPlaceholder),ae},wi.textarea=function(Se,J){ei(Se,J.inputValue),qe(Se,J),kt(Se,Se,J);return setTimeout(function(){if("MutationObserver"in window){var ke=parseInt(window.getComputedStyle(Si()).width);new MutationObserver(function(){if(document.body.contains(Se)){var Ln=Se.offsetWidth+(Ft=Se,parseInt(window.getComputedStyle(Ft).marginLeft)+parseInt(window.getComputedStyle(Ft).marginRight));Ln>ke?Si().style.width="".concat(Ln,"px"):St(Si(),"width",J.width)}var Ft}).observe(Se,{attributes:!0,attributeFilter:["style"]})}}),Se};var Mi=function(J,ae){var ke=Or();ke&&(Re(ke),pt(ke,ae,"htmlContainer"),ae.html?(_(ae.html,ke),Ke(ke,"block")):ae.text?(ke.textContent=ae.text,Ke(ke,"block")):Ze(ke),function(J,ae){var ke=Si();if(ke){var Ft=me.innerParams.get(J),zi=!Ft||ae.input!==Ft.input;Ee.forEach(function(Ln){var Rr=Et(ke,Qt[Ln]);Rr&&(xe(Ln,ae.inputAttributes),Rr.className=Qt[Ln],zi&&Ze(Rr))}),ae.input&&(zi&&Q(ae),Le(ae))}}(J,ae))},Fn=function(J,ae){for(var ke=0,Ft=Object.entries(on);ke<Ft.length;ke++){var zi=gt(Ft[ke],2);ae.icon!==zi[0]&&un(J,zi[1])}di(J,ae.icon&&on[ae.icon]),jr(J,ae),Qn(),pt(J,ae,"icon")},Qn=function(){var J=Si();if(J)for(var ae=window.getComputedStyle(J).getPropertyValue("background-color"),ke=J.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Ft=0;Ft<ke.length;Ft++)ke[Ft].style.backgroundColor=ae},Pr=function(J,ae){if(ae.icon||ae.iconHtml){var ke=J.innerHTML,Ft="";ae.iconHtml?Ft=Wr(ae.iconHtml):"success"===ae.icon?(Ft='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',ke=ke.replace(/ style=".*?"/g,"")):"error"===ae.icon?Ft='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':ae.icon&&(Ft=Wr({question:"?",warning:"!",info:"i"}[ae.icon])),ke.trim()!==Ft.trim()&&zt(J,Ft)}},jr=function(J,ae){if(ae.iconColor){J.style.color=ae.iconColor,J.style.borderColor=ae.iconColor;for(var ke=0,Ft=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];ke<Ft.length;ke++)He(J,Ft[ke],"background-color",ae.iconColor);He(J,".swal2-success-ring","border-color",ae.iconColor)}},Wr=function(J){return'<div class="'.concat(Qt["icon-content"],'">').concat(J,"</div>")},ss=function(J,ae){var ke=ae.showClass||{};J.className="".concat(Qt.popup," ").concat(Yt(J)?ke.popup:""),ae.toast?(di([document.documentElement,document.body],Qt["toast-shown"]),di(J,Qt.toast)):di(J,Qt.modal),pt(J,ae,"popup"),"string"==typeof ae.customClass&&di(J,ae.customClass),ae.icon&&di(J,Qt["icon-".concat(ae.icon)])},Zr=function(J){var ae=document.createElement("li");return di(ae,Qt["progress-step"]),zt(ae,J),ae},fl=function(J){var ae=document.createElement("li");return di(ae,Qt["progress-step-line"]),J.progressStepsDistance&&St(ae,"width",J.progressStepsDistance),ae},as=function(J,ae){(function(J,ae){var ke=Ui(),Ft=Si();if(ke&&Ft){if(ae.toast){St(ke,"width",ae.width),Ft.style.width="100%";var zi=er();zi&&Ft.insertBefore(zi,mn())}else St(Ft,"width",ae.width);St(Ft,"padding",ae.padding),ae.color&&(Ft.style.color=ae.color),ae.background&&(Ft.style.background=ae.background),Ze(ar()),ss(Ft,ae)}})(0,ae),ie(0,ae),function(J,ae){var ke=vr();if(ke){var Ft=ae.progressSteps,zi=ae.currentProgressStep;if(!Ft||0===Ft.length||void 0===zi)return void Ze(ke);Ke(ke),ke.textContent="",zi>=Ft.length&&Dn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Ft.forEach(function(Ln,Rr){var zr=Zr(Ln);if(ke.appendChild(zr),Rr===zi&&di(zr,Qt["active-progress-step"]),Rr!==Ft.length-1){var ys=fl(ae);ke.appendChild(ys)}})}}(0,ae),function(J,ae){var ke=me.innerParams.get(J),Ft=mn();if(Ft){if(ke&&ae.icon===ke.icon)return Pr(Ft,ae),void Fn(Ft,ae);if(!ae.icon&&!ae.iconHtml)return void Ze(Ft);if(ae.icon&&-1===Object.keys(on).indexOf(ae.icon))return ji('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(ae.icon,'"')),void Ze(Ft);Ke(Ft),Pr(Ft,ae),Fn(Ft,ae),di(Ft,ae.showClass&&ae.showClass.icon)}}(J,ae),function(J,ae){var ke=Sr();if(ke){if(!ae.imageUrl)return void Ze(ke);Ke(ke,""),ke.setAttribute("src",ae.imageUrl),ke.setAttribute("alt",ae.imageAlt||""),St(ke,"width",ae.imageWidth),St(ke,"height",ae.imageHeight),ke.className=Qt.image,pt(ke,ae,"image")}}(0,ae),function(J,ae){var ke=Lr();ke&&(Re(ke),ft(ke,ae.title||ae.titleText,"block"),ae.title&&_(ae.title,ke),ae.titleText&&(ke.innerText=ae.titleText),pt(ke,ae,"title"))}(0,ae),function(J,ae){var ke=Xr();ke&&(zt(ke,ae.closeButtonHtml||""),pt(ke,ae,"closeButton"),ft(ke,ae.showCloseButton),ke.setAttribute("aria-label",ae.closeButtonAriaLabel||""))}(0,ae),Mi(J,ae),I(0,ae),function(J,ae){var ke=mr();ke&&(Re(ke),ft(ke,ae.footer,"block"),ae.footer&&_(ae.footer,ke),pt(ke,ae,"footer"))}(0,ae);var ke=Si();"function"==typeof ae.didRender&&ke&&ae.didRender(ke)},nc=function(){var J;return null===(J=kn())||void 0===J?void 0:J.click()},mo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Sc=function(J){J.keydownTarget&&J.keydownHandlerAdded&&(J.keydownTarget.removeEventListener("keydown",J.keydownHandler,{capture:J.keydownListenerCapture}),J.keydownHandlerAdded=!1)},ea=function(J,ae){var ke,Ft=Ie();if(Ft.length)return(J+=ae)===Ft.length?J=0:-1===J&&(J=Ft.length-1),void Ft[J].focus();null===(ke=Si())||void 0===ke||ke.focus()},Il=["ArrowRight","ArrowDown"],Yc=["ArrowLeft","ArrowUp"],gu=function(J,ae,ke){J&&(ae.isComposing||229===ae.keyCode||(J.stopKeydownPropagation&&ae.stopPropagation(),"Enter"===ae.key?Ll(ae,J):"Tab"===ae.key?xr(ae):[].concat(Il,Yc).includes(ae.key)?Hc(ae.key):"Escape"===ae.key&&Ks(ae,J,ke)))},Ll=function(J,ae){if(xn(ae.allowEnterKey)){var ke=ui(Si(),ae.input);if(J.target&&ke&&J.target instanceof HTMLElement&&J.target.outerHTML===ke.outerHTML){if(["textarea","file"].includes(ae.input))return;nc(),J.preventDefault()}}},xr=function(J){for(var ae=J.target,ke=Ie(),Ft=-1,zi=0;zi<ke.length;zi++)if(ae===ke[zi]){Ft=zi;break}ea(Ft,J.shiftKey?-1:1),J.stopPropagation(),J.preventDefault()},Hc=function(J){var ae=br(),ke=kn(),Ft=Fr(),zi=dr();if(ae&&ke&&Ft&&zi&&(!(document.activeElement instanceof HTMLElement)||[ke,Ft,zi].includes(document.activeElement))){var Rr=Il.includes(J)?"nextElementSibling":"previousElementSibling",zr=document.activeElement;if(zr){for(var ys=0;ys<ae.children.length;ys++){if(!(zr=zr[Rr]))return;if(zr instanceof HTMLButtonElement&&Yt(zr))break}zr instanceof HTMLButtonElement&&zr.focus()}}},Ks=function(J,ae,ke){xn(ae.allowEscapeKey)&&(J.preventDefault(),ke(mo.esc))},Ws={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},ta=function(){Array.from(document.body.children).forEach(function(ae){ae.hasAttribute("data-previous-aria-hidden")?(ae.setAttribute("aria-hidden",ae.getAttribute("data-previous-aria-hidden")||""),ae.removeAttribute("data-previous-aria-hidden")):ae.removeAttribute("aria-hidden")})},ml=typeof window<"u"&&!!window.GestureEvent,Za=function(){var ae,J=Ui();J&&(J.ontouchstart=function(ke){ae=vu(ke)},J.ontouchmove=function(ke){ae&&(ke.preventDefault(),ke.stopPropagation())})},vu=function(J){var ae=J.target,ke=Ui(),Ft=Or();return!(!ke||!Ft||sc(J)||ia(J)||ae!==ke&&(fi(ke)||!(ae instanceof HTMLElement)||"INPUT"===ae.tagName||"TEXTAREA"===ae.tagName||fi(Ft)&&Ft.contains(ae)))},sc=function(J){return J.touches&&J.touches.length&&"stylus"===J.touches[0].touchType},ia=function(J){return J.touches&&J.touches.length>1},Br=null,ju=function(J){null===Br&&(document.body.scrollHeight>window.innerHeight||"scroll"===J)&&(Br=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Br+function(){var J=document.createElement("div");J.className=Qt["scrollbar-measure"],document.body.appendChild(J);var ae=J.getBoundingClientRect().width-J.clientWidth;return document.body.removeChild(J),ae}(),"px"))};function qa(Se,J,ae,ke){ct()?Pa(Se,ke):(bn(ae).then(function(){return Pa(Se,ke)}),Sc(Fi)),ml?(J.setAttribute("style","display:none !important"),J.removeAttribute("class"),J.innerHTML=""):J.remove(),Be()&&(null!==Br&&(document.body.style.paddingRight="".concat(Br,"px"),Br=null),function(){if(qt(document.body,Qt.iosfix)){var J=parseInt(document.body.style.top,10);un(document.body,Qt.iosfix),document.body.style.top="",document.body.scrollTop=-1*J}}(),ta()),function Un(){un([document.documentElement,document.body],[Qt.shown,Qt["height-auto"],Qt["no-backdrop"],Qt["toast-shown"]])}()}function Uo(Se){Se=Ka(Se);var J=Ws.swalPromiseResolve.get(this),ae=Ls(this);this.isAwaitingPromise?Se.isDismissed||(Vs(this),J(Se)):ae&&J(Se)}var Ls=function(J){var ae=Si();if(!ae)return!1;var ke=me.innerParams.get(J);if(!ke||qt(ae,ke.hideClass.popup))return!1;un(ae,ke.showClass.popup),di(ae,ke.hideClass.popup);var Ft=Ui();return un(Ft,ke.showClass.backdrop),di(Ft,ke.hideClass.backdrop),_a(J,ae,ke),!0};function Js(Se){var J=Ws.swalPromiseReject.get(this);Vs(this),J&&J(Se)}var Vs=function(J){J.isAwaitingPromise&&(delete J.isAwaitingPromise,me.innerParams.get(J)||J._destroy())},Ka=function(J){return typeof J>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},J)},_a=function(J,ae,ke){var Ft=Ui(),zi=A&&Pi(ae);"function"==typeof ke.willClose&&ke.willClose(ae),zi?na(J,ae,Ft,ke.returnFocus,ke.didClose):qa(J,Ft,ke.returnFocus,ke.didClose)},na=function(J,ae,ke,Ft,zi){A&&(Fi.swalCloseEventFinishedCallback=qa.bind(null,J,ke,Ft,zi),ae.addEventListener(A,function(Ln){Ln.target===ae&&(Fi.swalCloseEventFinishedCallback(),delete Fi.swalCloseEventFinishedCallback)}))},Pa=function(J,ae){setTimeout(function(){"function"==typeof ae&&ae.bind(J.params)(),J._destroy&&J._destroy()})},ra=function(J){var ae=Si();if(ae||new cc,ae=Si()){var ke=er();ct()?Ze(mn()):gl(ae,J),Ke(ke),ae.setAttribute("data-loading","true"),ae.setAttribute("aria-busy","true"),ae.focus()}},gl=function(J,ae){var ke=br(),Ft=er();!ke||!Ft||(!ae&&Yt(kn())&&(ae=kn()),Ke(ke),ae&&(Ze(ae),Ft.setAttribute("data-button-to-replace",ae.className),ke.insertBefore(Ft,ae)),di([J,ke],Qt.loading))},Ot=function(J){return J.checked?1:0},Wo=function(J){return J.checked?J.value:null},$r=function(J){return J.files&&J.files.length?null!==J.getAttribute("multiple")?J.files:J.files[0]:null},zn=function(J,ae){var ke=Si();if(ke){var Ft=function(Ln){"select"===ae.input?function Tc(Se,J,ae){var ke=Et(Se,Qt.select);if(ke){var Ft=function(Ln,Rr,zr){var ys=document.createElement("option");ys.value=zr,zt(ys,Rr),ys.selected=sa(zr,ae.inputValue),Ln.appendChild(ys)};J.forEach(function(zi){var Ln=zi[0],Rr=zi[1];if(Array.isArray(Rr)){var zr=document.createElement("optgroup");zr.label=Ln,zr.disabled=!1,ke.appendChild(zr),Rr.forEach(function(ys){return Ft(zr,ys[1],ys[0])})}else Ft(ke,Rr,Ln)}),ke.focus()}}(ke,vl(Ln),ae):"radio"===ae.input&&function Ja(Se,J,ae){var ke=Et(Se,Qt.radio);if(ke){J.forEach(function(zi){var Ln=zi[0],Rr=zi[1],zr=document.createElement("input"),ys=document.createElement("label");zr.type="radio",zr.name=Qt.radio,zr.value=Ln,sa(Ln,ae.inputValue)&&(zr.checked=!0);var Ys=document.createElement("span");zt(Ys,Rr),Ys.className=Qt.label,ys.appendChild(zr),ys.appendChild(Ys),ke.appendChild(ys)});var Ft=ke.querySelectorAll("input");Ft.length&&Ft[0].focus()}}(ke,vl(Ln),ae)};en(ae.inputOptions)||Zi(ae.inputOptions)?(ra(kn()),_n(ae.inputOptions).then(function(zi){J.hideLoading(),Ft(zi)})):"object"===V(ae.inputOptions)?Ft(ae.inputOptions):ji("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(V(ae.inputOptions)))}},Rl=function(J,ae){var ke=J.getInput();ke&&(Ze(ke),_n(ae.inputValue).then(function(Ft){ke.value="".concat("number"===ae.input?parseFloat(Ft)||0:Ft),Ke(ke),ke.focus(),J.hideLoading()}).catch(function(Ft){ji("Error in inputValue promise: ".concat(Ft)),ke.value="",Ke(ke),ke.focus(),J.hideLoading()}))};var vl=function Se(J){var ae=[];return J instanceof Map?J.forEach(function(ke,Ft){var zi=ke;"object"===V(zi)&&(zi=Se(zi)),ae.push([Ft,zi])}):Object.keys(J).forEach(function(ke){var Ft=J[ke];"object"===V(Ft)&&(Ft=Se(Ft)),ae.push([ke,Ft])}),ae},sa=function(J,ae){return!!ae&&ae.toString()===J.toString()},ds=void 0,ya=function(J,ae){var ke=me.innerParams.get(J);if(ke.input){var Ft=J.getInput(),zi=function(J,ae){var ke=J.getInput();if(!ke)return null;switch(ae.input){case"checkbox":return Ot(ke);case"radio":return Wo(ke);case"file":return $r(ke);default:return ae.inputAutoTrim?ke.value.trim():ke.value}}(J,ke);ke.inputValidator?oc(J,zi,ae):Ft&&!Ft.checkValidity()?(J.enableButtons(),J.showValidationMessage(ke.validationMessage||Ft.validationMessage)):"deny"===ae?vo(J,zi):Qa(J,zi)}else ji('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Nn(ae)))},oc=function(J,ae,ke){var Ft=me.innerParams.get(J);J.disableInput(),Promise.resolve().then(function(){return _n(Ft.inputValidator(ae,Ft.validationMessage))}).then(function(Ln){J.enableButtons(),J.enableInput(),Ln?J.showValidationMessage(Ln):"deny"===ke?vo(J,ae):Qa(J,ae)})},vo=function(J,ae){var ke=me.innerParams.get(J||ds);ke.showLoaderOnDeny&&ra(Fr()),ke.preDeny?(J.isAwaitingPromise=!0,Promise.resolve().then(function(){return _n(ke.preDeny(ae,ke.validationMessage))}).then(function(zi){!1===zi?(J.hideLoading(),Vs(J)):J.close({isDenied:!0,value:typeof zi>"u"?ae:zi})}).catch(function(zi){return $s(J||ds,zi)})):J.close({isDenied:!0,value:ae})},zl=function(J,ae){J.close({isConfirmed:!0,value:ae})},$s=function(J,ae){J.rejectPromise(ae)},Qa=function(J,ae){var ke=me.innerParams.get(J||ds);ke.showLoaderOnConfirm&&ra(),ke.preConfirm?(J.resetValidationMessage(),J.isAwaitingPromise=!0,Promise.resolve().then(function(){return _n(ke.preConfirm(ae,ke.validationMessage))}).then(function(zi){Yt(ar())||!1===zi?(J.hideLoading(),Vs(J)):zl(J,typeof zi>"u"?ae:zi)}).catch(function(zi){return $s(J||ds,zi)})):zl(J,ae)};function Ra(){var Se=me.innerParams.get(this);if(Se){var J=me.domCache.get(this);Ze(J.loader),ct()?Se.icon&&Ke(mn()):el(J),un([J.popup,J.actions],Qt.loading),J.popup.removeAttribute("aria-busy"),J.popup.removeAttribute("data-loading"),J.confirmButton.disabled=!1,J.denyButton.disabled=!1,J.cancelButton.disabled=!1}}var el=function(J){var ae=J.popup.getElementsByClassName(J.loader.getAttribute("data-button-to-replace"));ae.length?Ke(ae[0],"inline-block"):!Yt(kn())&&!Yt(Fr())&&!Yt(dr())&&Ze(J.actions)};function aa(){var Se=me.innerParams.get(this),J=me.domCache.get(this);return J?ui(J.popup,Se.input):null}function kc(Se,J,ae){var ke=me.domCache.get(Se);J.forEach(function(Ft){ke[Ft].disabled=ae})}function Qs(Se,J){var ae=Si();if(ae&&Se)if("radio"===Se.type)for(var ke=ae.querySelectorAll('[name="'.concat(Qt.radio,'"]')),Ft=0;Ft<ke.length;Ft++)ke[Ft].disabled=J;else Se.disabled=J}function ba(){kc(this,["confirmButton","denyButton","cancelButton"],!1)}function la(){kc(this,["confirmButton","denyButton","cancelButton"],!0)}function Eo(){Qs(this.getInput(),!1)}function ac(){Qs(this.getInput(),!0)}function So(Se){var J=me.domCache.get(this),ae=me.innerParams.get(this);zt(J.validationMessage,Se),J.validationMessage.className=Qt["validation-message"],ae.customClass&&ae.customClass.validationMessage&&di(J.validationMessage,ae.customClass.validationMessage),Ke(J.validationMessage);var ke=this.getInput();ke&&(ke.setAttribute("aria-invalid","true"),ke.setAttribute("aria-describedby",Qt["validation-message"]),Vi(ke),di(ke,Qt.inputerror))}function Ac(){var Se=me.domCache.get(this);Se.validationMessage&&Ze(Se.validationMessage);var J=this.getInput();J&&(J.removeAttribute("aria-invalid"),J.removeAttribute("aria-describedby"),un(J,Qt.inputerror))}var Ns={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ms=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ro={},tl=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],zo=function(J){return Object.prototype.hasOwnProperty.call(Ns,J)},Fl=function(J){return-1!==ms.indexOf(J)},Os=function(J){return Ro[J]},Mc=function(J){zo(J)||Dn('Unknown parameter "'.concat(J,'"'))},il=function(J){tl.includes(J)&&Dn('The parameter "'.concat(J,'" is incompatible with toasts'))},Fo=function(J){var ae=Os(J);ae&&gr(J,ae)};function nl(Se){var J=Si(),ae=me.innerParams.get(this);if(J&&!qt(J,ae.hideClass.popup)){var ke=ca(Se),Ft=Object.assign({},ae,ke);as(this,Ft),me.innerParams.set(this,Ft),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Se),writable:!1,enumerable:!0}})}else Dn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var ca=function(J){var ae={};return Object.keys(J).forEach(function(ke){Fl(ke)?ae[ke]=J[ke]:Dn("Invalid parameter to update: ".concat(ke))}),ae};function Bl(){var Se=me.domCache.get(this),J=me.innerParams.get(this);J?(Se.popup&&Fi.swalCloseEventFinishedCallback&&(Fi.swalCloseEventFinishedCallback(),delete Fi.swalCloseEventFinishedCallback),"function"==typeof J.didDestroy&&J.didDestroy(),xa(this)):Vc(this)}var xa=function(J){Vc(J),delete J.params,delete Fi.keydownHandler,delete Fi.keydownTarget,delete Fi.currentInstance},Vc=function(J){J.isAwaitingPromise?(Fa(me,J),J.isAwaitingPromise=!0):(Fa(Ws,J),Fa(me,J),delete J.isAwaitingPromise,delete J.disableButtons,delete J.enableButtons,delete J.getInput,delete J.disableInput,delete J.enableInput,delete J.hideLoading,delete J.disableLoading,delete J.showValidationMessage,delete J.resetValidationMessage,delete J.close,delete J.closePopup,delete J.closeModal,delete J.closeToast,delete J.rejectPromise,delete J.update,delete J._destroy)},Fa=function(J,ae){for(var ke in J)J[ke].delete(ae)},Uu=Object.freeze({__proto__:null,_destroy:Bl,close:Uo,closeModal:Uo,closePopup:Uo,closeToast:Uo,disableButtons:la,disableInput:ac,disableLoading:Ra,enableButtons:ba,enableInput:Eo,getInput:aa,handleAwaitingPromise:Vs,hideLoading:Ra,rejectPromise:Js,resetValidationMessage:Ac,showValidationMessage:So,update:nl}),Gc=function(J,ae,ke){ae.popup.onclick=function(){J&&(ua(J)||J.timer||J.input)||ke(mo.close)}},ua=function(J){return!!(J.showConfirmButton||J.showDenyButton||J.showCancelButton||J.showCloseButton)},wa=!1,Nl=function(J){J.popup.onmousedown=function(){J.container.onmouseup=function(ae){J.container.onmouseup=function(){},ae.target===J.container&&(wa=!0)}}},Dc=function(J){J.container.onmousedown=function(){J.popup.onmouseup=function(ae){J.popup.onmouseup=function(){},(ae.target===J.popup||ae.target instanceof HTMLElement&&J.popup.contains(ae.target))&&(wa=!0)}}},Yl=function(J,ae,ke){ae.container.onclick=function(Ft){wa?wa=!1:Ft.target===ae.container&&xn(J.allowOutsideClick)&&ke(mo.backdrop)}},rl=function(J){return J instanceof Element||function(J){return"object"===V(J)&&J.jquery}(J)};var To=function(){if(Fi.timeout)return function(){var J=Tr();if(J){var ae=parseInt(window.getComputedStyle(J).width);J.style.removeProperty("transition"),J.style.width="100%";var ke=parseInt(window.getComputedStyle(J).width);J.style.width="".concat(ae/ke*100,"%")}}(),Fi.timeout.stop()},lc=function(){if(Fi.timeout){var J=Fi.timeout.start();return rt(J),J}},_l=!1,Ya={};var $o=function(J){for(var ae=J.target;ae&&ae!==document;ae=ae.parentNode)for(var ke in Ya){var Ft=ae.getAttribute(ke);if(Ft)return void Ya[ke].fire({template:Ft})}},yl=Object.freeze({__proto__:null,argsToParams:function(J){var ae={};return"object"!==V(J[0])||rl(J[0])?["title","html","icon"].forEach(function(ke,Ft){var zi=J[Ft];"string"==typeof zi||rl(zi)?ae[ke]=zi:void 0!==zi&&ji("Unexpected type of ".concat(ke,'! Expected "string" or "Element", got ').concat(V(zi)))}):Object.assign(ae,J[0]),ae},bindClickHandler:function Ha(){Ya[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,_l||(document.body.addEventListener("click",$o),_l=!0)},clickCancel:function(){var J;return null===(J=dr())||void 0===J?void 0:J.click()},clickConfirm:nc,clickDeny:function(){var J;return null===(J=Fr())||void 0===J?void 0:J.click()},enableLoading:ra,fire:function eo(){for(var J=arguments.length,ae=new Array(J),ke=0;ke<J;ke++)ae[ke]=arguments[ke];return function Rt(Se,J,ae){if(k())return Reflect.construct.apply(null,arguments);var ke=[null];ke.push.apply(ke,J);var Ft=new(Se.bind.apply(Se,ke));return ae&&Je(Ft,ae.prototype),Ft}(this,ae)},getActions:br,getCancelButton:dr,getCloseButton:Xr,getConfirmButton:kn,getContainer:Ui,getDenyButton:Fr,getFocusableElements:Ie,getFooter:mr,getHtmlContainer:Or,getIcon:mn,getIconContent:function(){return tn(Qt["icon-content"])},getImage:Sr,getInputLabel:function(){return tn(Qt["input-label"])},getLoader:er,getPopup:Si,getProgressSteps:vr,getTimerLeft:function(){return Fi.timeout&&Fi.timeout.getTimerLeft()},getTimerProgressBar:Tr,getTitle:Lr,getValidationMessage:ar,increaseTimer:function(J){if(Fi.timeout){var ae=Fi.timeout.increase(J);return rt(ae,!0),ae}},isDeprecatedParameter:Os,isLoading:function(){var J=Si();return!!J&&J.hasAttribute("data-loading")},isTimerRunning:function(){return!(!Fi.timeout||!Fi.timeout.isRunning())},isUpdatableParameter:Fl,isValidParameter:zo,isVisible:function(){return Yt(Si())},mixin:function Ba(Se){var J=function(ae){function ke(){return Oe(this,ke),Gr(this,ke,arguments)}return function Fe(Se,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function");Se.prototype=Object.create(J&&J.prototype,{constructor:{value:Se,writable:!0,configurable:!0}}),Object.defineProperty(Se,"prototype",{writable:!1}),J&&Je(Se,J)}(ke,ae),De(ke,[{key:"_main",value:function(zi,Ln){return ot(Ue(ke.prototype),"_main",this).call(this,zi,Object.assign({},Se,Ln))}}]),ke}(this);return J},resumeTimer:lc,showLoading:ra,stopTimer:To,toggleTimer:function(){var J=Fi.timeout;return J&&(J.running?To():lc())}}),Ca=function(){function Se(J,ae){Oe(this,Se),this.callback=J,this.remaining=ae,this.running=!1,this.start()}return De(Se,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(ae){var ke=this.running;return ke&&this.stop(),this.remaining+=ae,ke&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),Se}(),Xo=["swal-title","swal-html","swal-footer"],Va=function(J){var ae={};return Array.from(J.querySelectorAll("swal-param")).forEach(function(Ft){m(Ft,["name","value"]);var zi=Ft.getAttribute("name"),Ln=Ft.getAttribute("value");ae[zi]="boolean"==typeof Ns[zi]?"false"!==Ln:"object"===V(Ns[zi])?JSON.parse(Ln):Ln}),ae},ol=function(J){var ae={};return Array.from(J.querySelectorAll("swal-function-param")).forEach(function(Ft){var zi=Ft.getAttribute("name"),Ln=Ft.getAttribute("value");ae[zi]=new Function("return ".concat(Ln))()}),ae},bl=function(J){var ae={};return Array.from(J.querySelectorAll("swal-button")).forEach(function(Ft){m(Ft,["type","color","aria-label"]);var zi=Ft.getAttribute("type");ae["".concat(zi,"ButtonText")]=Ft.innerHTML,ae["show".concat(Nn(zi),"Button")]=!0,Ft.hasAttribute("color")&&(ae["".concat(zi,"ButtonColor")]=Ft.getAttribute("color")),Ft.hasAttribute("aria-label")&&(ae["".concat(zi,"ButtonAriaLabel")]=Ft.getAttribute("aria-label"))}),ae},xl=function(J){var ae={},ke=J.querySelector("swal-image");return ke&&(m(ke,["src","width","height","alt"]),ke.hasAttribute("src")&&(ae.imageUrl=ke.getAttribute("src")),ke.hasAttribute("width")&&(ae.imageWidth=ke.getAttribute("width")),ke.hasAttribute("height")&&(ae.imageHeight=ke.getAttribute("height")),ke.hasAttribute("alt")&&(ae.imageAlt=ke.getAttribute("alt"))),ae},Ic=function(J){var ae={},ke=J.querySelector("swal-icon");return ke&&(m(ke,["type","color"]),ke.hasAttribute("type")&&(ae.icon=ke.getAttribute("type")),ke.hasAttribute("color")&&(ae.iconColor=ke.getAttribute("color")),ae.iconHtml=ke.innerHTML),ae},No=function(J){var ae={},ke=J.querySelector("swal-input");ke&&(m(ke,["type","label","placeholder","value"]),ae.input=ke.getAttribute("type")||"text",ke.hasAttribute("label")&&(ae.inputLabel=ke.getAttribute("label")),ke.hasAttribute("placeholder")&&(ae.inputPlaceholder=ke.getAttribute("placeholder")),ke.hasAttribute("value")&&(ae.inputValue=ke.getAttribute("value")));var Ft=Array.from(J.querySelectorAll("swal-input-option"));return Ft.length&&(ae.inputOptions={},Ft.forEach(function(zi){m(zi,["value"]);var Ln=zi.getAttribute("value");ae.inputOptions[Ln]=zi.innerHTML})),ae},gs=function(J,ae){var ke={};for(var Ft in ae){var zi=ae[Ft],Ln=J.querySelector(zi);Ln&&(m(Ln,[]),ke[zi.replace(/^swal-/,"")]=Ln.innerHTML.trim())}return ke},gn=function(J){var ae=Xo.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(J.children).forEach(function(ke){var Ft=ke.tagName.toLowerCase();ae.includes(Ft)||Dn("Unrecognized element <".concat(Ft,">"))})},m=function(J,ae){Array.from(J.attributes).forEach(function(ke){-1===ae.indexOf(ke.name)&&Dn(['Unrecognized attribute "'.concat(ke.name,'" on <').concat(J.tagName.toLowerCase(),">."),"".concat(ae.length?"Allowed attributes are: ".concat(ae.join(", ")):"To set the value, use HTML within the element.")])})},G=function(J){var ae=Ui(),ke=Si();"function"==typeof J.willOpen&&J.willOpen(ke);var zi=window.getComputedStyle(document.body).overflowY;Ht(ae,ke,J),setTimeout(function(){_e(ae,ke)},10),Be()&&(We(ae,J.scrollbarPadding,zi),Array.from(document.body.children).forEach(function(ae){ae===Ui()||ae.contains(Ui())||(ae.hasAttribute("aria-hidden")&&ae.setAttribute("data-previous-aria-hidden",ae.getAttribute("aria-hidden")||""),ae.setAttribute("aria-hidden","true"))})),!ct()&&!Fi.previousActiveElement&&(Fi.previousActiveElement=document.activeElement),"function"==typeof J.didOpen&&setTimeout(function(){return J.didOpen(ke)}),un(ae,Qt["no-transition"])},ne=function Se(J){var ae=Si();if(J.target===ae&&A){var ke=Ui();ae.removeEventListener(A,Se),ke.style.overflowY="auto"}},_e=function(J,ae){A&&Pi(ae)?(J.style.overflowY="hidden",ae.addEventListener(A,ne)):J.style.overflowY="auto"},We=function(J,ae,ke){(function(){if(ml&&!qt(document.body,Qt.iosfix)){var J=document.body.scrollTop;document.body.style.top="".concat(-1*J,"px"),di(document.body,Qt.iosfix),Za()}})(),ae&&"hidden"!==ke&&ju(ke),setTimeout(function(){J.scrollTop=0})},Ht=function(J,ae,ke){di(J,ke.showClass.backdrop),ke.animation?(ae.style.setProperty("opacity","0","important"),Ke(ae,"grid"),setTimeout(function(){di(ae,ke.showClass.popup),ae.style.removeProperty("opacity")},10)):Ke(ae,"grid"),di([document.documentElement,document.body],Qt.shown),ke.heightAuto&&ke.backdrop&&!ke.toast&&di([document.documentElement,document.body],Qt["height-auto"])},ai={email:function(J,ae){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(J)?Promise.resolve():Promise.resolve(ae||"Invalid email address")},url:function(J,ae){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(J)?Promise.resolve():Promise.resolve(ae||"Invalid URL")}};function In(Se){(function Ti(Se){Se.inputValidator||("email"===Se.input&&(Se.inputValidator=ai.email),"url"===Se.input&&(Se.inputValidator=ai.url))})(Se),Se.showLoaderOnConfirm&&!Se.preConfirm&&Dn("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function sn(Se){(!Se.target||"string"==typeof Se.target&&!document.querySelector(Se.target)||"string"!=typeof Se.target&&!Se.target.appendChild)&&(Dn('Target parameter is not valid, defaulting to "body"'),Se.target="body")}(Se),"string"==typeof Se.title&&(Se.title=Se.title.split("\n").join("<br />")),h(Se)}var Yn,_r=new WeakMap,Yr=function(){function Se(){if(Oe(this,Se),vi(this,_r,{writable:!0,value:void 0}),!(typeof window>"u")){Yn=this;for(var J=arguments.length,ae=new Array(J),ke=0;ke<J;ke++)ae[ke]=arguments[ke];var Ft=Object.freeze(this.constructor.argsToParams(ae));this.params=Ft,this.isAwaitingPromise=!1,dt(this,_r,this._main(Yn.params))}}return De(Se,[{key:"_main",value:function(ae){var ke=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(J){for(var ae in!1===J.backdrop&&J.allowOutsideClick&&Dn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),J)Mc(ae),J.toast&&il(ae),Fo(ae)}(Object.assign({},ke,ae)),Fi.currentInstance){var Ft=Ws.swalPromiseResolve.get(Fi.currentInstance),zi=Fi.currentInstance.isAwaitingPromise;Fi.currentInstance._destroy(),zi||Ft({isDismissed:!0}),Be()&&ta()}Fi.currentInstance=Yn;var Ln=to(ae,ke);In(Ln),Object.freeze(Ln),Fi.timeout&&(Fi.timeout.stop(),delete Fi.timeout),clearTimeout(Fi.restoreFocusTimeout);var Rr=Xs(Yn);return as(Yn,Ln),me.innerParams.set(Yn,Ln),Ps(Yn,Rr,Ln)}},{key:"then",value:function(ae){return Vt(this,_r).then(ae)}},{key:"finally",value:function(ae){return Vt(this,_r).finally(ae)}}]),Se}(),Ps=function(J,ae,ke){return new Promise(function(Ft,zi){var Ln=function(zr){J.close({isDismissed:!0,dismiss:zr})};Ws.swalPromiseResolve.set(J,Ft),Ws.swalPromiseReject.set(J,zi),ae.confirmButton.onclick=function(){!function(J){var ae=me.innerParams.get(J);J.disableButtons(),ae.input?ya(J,"confirm"):Qa(J,!0)}(J)},ae.denyButton.onclick=function(){!function(J){var ae=me.innerParams.get(J);J.disableButtons(),ae.returnInputValueOnDeny?ya(J,"deny"):vo(J,!1)}(J)},ae.cancelButton.onclick=function(){!function(J,ae){J.disableButtons(),ae(mo.cancel)}(J,Ln)},ae.closeButton.onclick=function(){Ln(mo.close)},function(J,ae,ke){J.toast?Gc(J,ae,ke):(Nl(ae),Dc(ae),Yl(J,ae,ke))}(ke,ae,Ln),function(J,ae,ke){Sc(J),ae.toast||(J.keydownHandler=function(Ft){return gu(ae,Ft,ke)},J.keydownTarget=ae.keydownListenerCapture?window:Si(),J.keydownListenerCapture=ae.keydownListenerCapture,J.keydownTarget.addEventListener("keydown",J.keydownHandler,{capture:J.keydownListenerCapture}),J.keydownHandlerAdded=!0)}(Fi,ke,Ln),function(J,ae){"select"===ae.input||"radio"===ae.input?zn(J,ae):["text","email","number","tel","textarea"].some(function(ke){return ke===ae.input})&&(en(ae.inputValue)||Zi(ae.inputValue))&&(ra(kn()),Rl(J,ae))}(J,ke),G(ke),Ga(Fi,ke,Ln),al(ae,ke),setTimeout(function(){ae.container.scrollTop=0})})},to=function(J,ae){var ke=function(J){var ae="string"==typeof J.template?document.querySelector(J.template):J.template;if(!ae)return{};var ke=ae.content;return gn(ke),Object.assign(Va(ke),ol(ke),bl(ke),xl(ke),Ic(ke),No(ke),gs(ke,Xo))}(J),Ft=Object.assign({},Ns,ae,ke,J);return Ft.showClass=Object.assign({},Ns.showClass,Ft.showClass),Ft.hideClass=Object.assign({},Ns.hideClass,Ft.hideClass),!1===Ft.animation&&(Ft.showClass={backdrop:"swal2-noanimation"},Ft.hideClass={}),Ft},Xs=function(J){var ae={popup:Si(),container:Ui(),actions:br(),confirmButton:kn(),denyButton:Fr(),cancelButton:dr(),loader:er(),closeButton:Xr(),validationMessage:ar(),progressSteps:vr()};return me.domCache.set(J,ae),ae},Ga=function(J,ae,ke){var Ft=Tr();Ze(Ft),ae.timer&&(J.timeout=new Ca(function(){ke("timer"),delete J.timeout},ae.timer),ae.timerProgressBar&&(Ke(Ft),pt(Ft,ae,"timerProgressBar"),setTimeout(function(){J.timeout&&J.timeout.running&&rt(ae.timer)})))},al=function(J,ae){if(!ae.toast){if(!xn(ae.allowEnterKey))return void Lc();oo(J,ae)||ea(-1,1)}},oo=function(J,ae){return ae.focusDeny&&Yt(J.denyButton)?(J.denyButton.focus(),!0):ae.focusCancel&&Yt(J.cancelButton)?(J.cancelButton.focus(),!0):!(!ae.focusConfirm||!Yt(J.confirmButton)||(J.confirmButton.focus(),0))},Lc=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Vl=new Date,ha=localStorage.getItem("swal-initiation");ha?(Vl.getTime()-Date.parse(ha))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var Se=document.createElement("audio");Se.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Se.loop=!0,document.body.appendChild(Se),setTimeout(function(){Se.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Vl))}Yr.prototype.disableButtons=la,Yr.prototype.enableButtons=ba,Yr.prototype.getInput=aa,Yr.prototype.disableInput=ac,Yr.prototype.enableInput=Eo,Yr.prototype.hideLoading=Ra,Yr.prototype.disableLoading=Ra,Yr.prototype.showValidationMessage=So,Yr.prototype.resetValidationMessage=Ac,Yr.prototype.close=Uo,Yr.prototype.closePopup=Uo,Yr.prototype.closeModal=Uo,Yr.prototype.closeToast=Uo,Yr.prototype.rejectPromise=Js,Yr.prototype.update=nl,Yr.prototype._destroy=Bl,Object.assign(Yr,yl),Object.keys(Uu).forEach(function(Se){Yr[Se]=function(){var J;return Yn&&Yn[Se]?(J=Yn)[Se].apply(J,arguments):null}}),Yr.DismissReason=mo,Yr.version="11.10.6";var cc=Yr;return cc.default=cc,cc}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Gr,Rt){var k=Gr.createElement("style");if(Gr.getElementsByTagName("head")[0].appendChild(k),k.styleSheet)k.styleSheet.disabled||(k.styleSheet.cssText=Rt);else try{k.innerHTML=Rt}catch{k.innerText=Rt}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},4884:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{UT:()=>Yt,gb:()=>Pi});var k=Rt(4496),hn=Rt(6504),ze=Rt(3616),i=Rt(112),V=Rt(5448),Oe=Rt(560),Ae=Rt(7773),Fe=Rt(3120);var Je=Rt(5568),nt=Rt(9212),mt=Rt(4680),Pt=Rt(6684),ot=Rt(4704),gt=Rt(4096),wt=Rt(1472),si=Rt(5657),$e=Rt(800),ii=Rt(3412),oi=Rt(1368);const at=["content"],ri=["scroll"],Xt=["padding"],Vt=rt=>({searchTerm:rt});function dt(rt,yt){if(1&rt&&(k.I0R(0,"div",6),k.C_f(1,7),k.C$Y()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngTemplateOutlet",fe.headerTemplate)("ngTemplateOutletContext",k.S45(2,Vt,fe.filterValue))}}function Zt(rt,yt){if(1&rt&&(k.I0R(0,"div",8),k.C_f(1,7),k.C$Y()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngTemplateOutlet",fe.footerTemplate)("ngTemplateOutletContext",k.S45(2,Vt,fe.filterValue))}}const ni=["*"],gi=["searchInput"],Gi=["clearButton"];function vi(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"span",15),k.qCj("click",function(){k.usT(fe);const Tt=k.GaO().$implicit,Pe=k.GaO(2);return k.CGJ(Pe.unselect(Tt))}),k.OEk(1,"\xd7"),k.C$Y(),k.wR5(2,"span",16)}if(2&rt){const fe=k.GaO().$implicit,it=k.GaO(2);k.yG2(2),k.E7m("ngItemLabel",fe.label)("escape",it.escapeHTML)}}function Ei(rt,yt){}const Fi=(rt,yt,fe)=>({item:rt,clear:yt,label:fe});function Ji(rt,yt){if(1&rt&&(k.I0R(0,"div",12),k.yuY(1,vi,3,2,"ng-template",null,13,k.gJz)(3,Ei,0,0,"ng-template",14),k.C$Y()),2&rt){const fe=yt.$implicit,it=k.Gew(2),Tt=k.GaO(2);k.eAK("ng-value-disabled",fe.disabled),k.yG2(3),k.E7m("ngTemplateOutlet",Tt.labelTemplate||it)("ngTemplateOutletContext",k.uAc(4,Fi,fe.value,Tt.clearItem,fe.label))}}function bn(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,Ji,4,8,"div",11),k.k70()),2&rt){const fe=k.GaO();k.yG2(),k.E7m("ngForOf",fe.selectedItems)("ngForTrackBy",fe.trackByOption)}}function fn(rt,yt){}const Gn=(rt,yt)=>({items:rt,clear:yt});function Qt(rt,yt){if(1&rt&&k.yuY(0,fn,0,0,"ng-template",14),2&rt){const fe=k.GaO();k.E7m("ngTemplateOutlet",fe.multiLabelTemplate)("ngTemplateOutletContext",k.IBC(2,Gn,fe.selectedValues,fe.clearItem))}}function Yi(rt,yt){1&rt&&k.wR5(0,"div",19)}function on(rt,yt){}function Zn(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,Yi,1,0,"ng-template",null,17,k.gJz)(3,on,0,0,"ng-template",18),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO();k.yG2(3),k.E7m("ngTemplateOutlet",it.loadingSpinnerTemplate||fe)}}function Nn(rt,yt){if(1&rt&&(k.I0R(0,"span",20,21)(2,"span",22),k.OEk(3,"\xd7"),k.C$Y()()),2&rt){const fe=k.GaO();k._6D("title",fe.clearAllText)}}function Dn(rt,yt){if(1&rt&&k.wR5(0,"span",28),2&rt){const fe=k.GaO().$implicit,it=k.GaO(2);k.E7m("ngItemLabel",fe.label)("escape",it.escapeHTML)}}function ji(rt,yt){}const Mr=(rt,yt,fe,it)=>({item:rt,item$:yt,index:fe,searchTerm:it});function or(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"div",26),k.qCj("click",function(){const Pe=k.usT(fe).$implicit,It=k.GaO(2);return k.CGJ(It.toggleItem(Pe))})("mouseover",function(){const Pe=k.usT(fe).$implicit,It=k.GaO(2);return k.CGJ(It.onItemHover(Pe))}),k.yuY(1,Dn,1,2,"ng-template",null,27,k.gJz)(3,ji,0,0,"ng-template",14),k.C$Y()}if(2&rt){const fe=yt.$implicit,it=k.Gew(2),Tt=k.GaO(2);k.eAK("ng-option-disabled",fe.disabled)("ng-option-selected",fe.selected)("ng-optgroup",fe.children)("ng-option",!fe.children)("ng-option-child",!!fe.parent)("ng-option-marked",fe===Tt.itemsList.markedItem),k.e48("role",fe.children?"group":"option")("aria-selected",fe.selected)("id",null==fe?null:fe.htmlId),k.yG2(3),k.E7m("ngTemplateOutlet",fe.children?Tt.optgroupTemplate||it:Tt.optionTemplate||it)("ngTemplateOutletContext",k.WuN(17,Mr,fe.value,fe,fe.index,Tt.searchTerm))}}function gr(rt,yt){if(1&rt&&(k.I0R(0,"span")(1,"span",31),k.OEk(2),k.C$Y(),k.OEk(3),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(2),k.cNF(fe.addTagText),k.yG2(),k.oRS('"',fe.searchTerm,'"')}}function xn(rt,yt){}function en(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"div",29),k.qCj("mouseover",function(){k.usT(fe);const Tt=k.GaO(2);return k.CGJ(Tt.itemsList.unmarkItem())})("click",function(){k.usT(fe);const Tt=k.GaO(2);return k.CGJ(Tt.selectTag())}),k.yuY(1,gr,4,2,"ng-template",null,30,k.gJz)(3,xn,0,0,"ng-template",14),k.C$Y()}if(2&rt){const fe=k.Gew(2),it=k.GaO(2);k.eAK("ng-option-marked",!it.itemsList.markedItem),k.yG2(3),k.E7m("ngTemplateOutlet",it.tagTemplate||fe)("ngTemplateOutletContext",k.S45(4,Vt,it.searchTerm))}}function _n(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.notFoundText)}}function Zi(rt,yt){}function Ui(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,_n,2,1,"ng-template",null,32,k.gJz)(3,Zi,0,0,"ng-template",14),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.notFoundTemplate||fe)("ngTemplateOutletContext",k.S45(2,Vt,it.searchTerm))}}function jn(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.typeToSearchText)}}function tn(rt,yt){}function Si(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,jn,2,1,"ng-template",null,34,k.gJz)(3,tn,0,0,"ng-template",18),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.typeToSearchTemplate||fe)}}function mn(rt,yt){if(1&rt&&(k.I0R(0,"div",33),k.OEk(1),k.C$Y()),2&rt){const fe=k.GaO(3);k.yG2(),k.cNF(fe.loadingText)}}function Pn(rt,yt){}function Lr(rt,yt){if(1&rt&&(k.SAx(0),k.yuY(1,mn,2,1,"ng-template",null,35,k.gJz)(3,Pn,0,0,"ng-template",14),k.k70()),2&rt){const fe=k.Gew(2),it=k.GaO(2);k.yG2(3),k.E7m("ngTemplateOutlet",it.loadingTextTemplate||fe)("ngTemplateOutletContext",k.S45(2,Vt,it.searchTerm))}}function Or(rt,yt){if(1&rt){const fe=k.KQA();k.I0R(0,"ng-dropdown-panel",23),k.qCj("update",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.viewPortItems=Tt)})("scroll",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.scroll.emit(Tt))})("scrollToEnd",function(Tt){k.usT(fe);const Pe=k.GaO();return k.CGJ(Pe.scrollToEnd.emit(Tt))})("outsideClick",function(){k.usT(fe);const Tt=k.GaO();return k.CGJ(Tt.close())}),k.SAx(1),k.yuY(2,or,4,22,"div",24)(3,en,4,6,"div",25),k.k70(),k.yuY(4,Ui,4,4,"ng-container",3)(5,Si,4,1,"ng-container",3)(6,Lr,4,4,"ng-container",3),k.C$Y()}if(2&rt){const fe=k.GaO();k.eAK("ng-select-multiple",fe.multiple),k.E7m("virtualScroll",fe.virtualScroll)("bufferAmount",fe.bufferAmount)("appendTo",fe.appendTo)("position",fe.dropdownPosition)("headerTemplate",fe.headerTemplate)("footerTemplate",fe.footerTemplate)("filterValue",fe.searchTerm)("items",fe.itemsList.filteredItems)("markedItem",fe.itemsList.markedItem)("ngClass",fe.appendTo?fe.classes:null)("id",fe.dropdownId),k.yG2(2),k.E7m("ngForOf",fe.viewPortItems)("ngForTrackBy",fe.trackByOption),k.yG2(),k.E7m("ngIf",fe.showAddTag),k.yG2(),k.E7m("ngIf",fe.showNoItemsFound()),k.yG2(),k.E7m("ngIf",fe.showTypeToSearch()),k.yG2(),k.E7m("ngIf",fe.loading&&0===fe.itemsList.filteredItems.length)}}const Sr=/[&<>"']/g,vr=RegExp(Sr.source),ar={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function dr(rt){return null!=rt}function Fr(rt){return"object"==typeof rt&&dr(rt)}function er(rt){return rt instanceof Function}let br=(()=>{class rt{constructor(fe){this.element=fe,this.escape=!0}ngOnChanges(fe){this.element.nativeElement.innerHTML=this.escape?function kn(rt){return rt&&vr.test(rt)?rt.replace(Sr,yt=>ar[yt]):rt}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.GMv))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[k.SYr]})}return rt})(),mr=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-option-tmp",""]]})}return rt})(),Tr=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-optgroup-tmp",""]]})}return rt})(),Xr=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-label-tmp",""]]})}return rt})(),Ct=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-multi-label-tmp",""]]})}return rt})(),Ie=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-header-tmp",""]]})}return rt})(),Be=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-footer-tmp",""]]})}return rt})(),ct=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-notfound-tmp",""]]})}return rt})(),lt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-typetosearch-tmp",""]]})}return rt})(),zt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-loadingtext-tmp",""]]})}return rt})(),qt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-tag-tmp",""]]})}return rt})(),Kt=(()=>{class rt{constructor(fe){this.template=fe}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.Yw2))};static#t=this.\u0275dir=k.Sc5({type:rt,selectors:[["","ng-loadingspinner-tmp",""]]})}return rt})();function pt(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const ui={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function Vi(rt){return rt.replace(/[^\u0000-\u007E]/g,fe=>ui[fe]||fe)}class $i{constructor(yt,fe){this._ngSelect=yt,this._selectionModel=fe,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let yt=this.selectedItems.length-1;for(;yt>=0;yt--){const fe=this.selectedItems[yt];if(!fe.disabled)return fe}return null}setItems(yt){this._items=yt.map((fe,it)=>this.mapItem(fe,it)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(yt){if(yt.selected||this.maxItemsSelected)return;const fe=this._ngSelect.multiple;fe||this.clearSelected(),this._selectionModel.select(yt,fe,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(yt)}unselect(yt){yt.selected&&(this._selectionModel.unselect(yt,this._ngSelect.multiple),this._ngSelect.hideSelected&&dr(yt.index)&&this._ngSelect.multiple&&this._showSelected(yt))}findItem(yt){let fe;return fe=this._ngSelect.compareWith?it=>this._ngSelect.compareWith(it.value,yt):this._ngSelect.bindValue?it=>!it.children&&this.resolveNested(it.value,this._ngSelect.bindValue)===yt:it=>it.value===yt||!it.children&&it.label&&it.label===this.resolveNested(yt,this._ngSelect.bindLabel),this._items.find(it=>fe(it))}addItem(yt){const fe=this.mapItem(yt,this._items.length);return this._items.push(fe),this._filteredItems.push(fe),fe}clearSelected(yt=!1){this._selectionModel.clear(yt),this._items.forEach(fe=>{fe.selected=yt&&fe.selected&&fe.disabled,fe.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(yt){return yt=Vi(yt).toLocaleLowerCase(),this.filteredItems.find(fe=>Vi(fe.label).toLocaleLowerCase().substr(0,yt.length)===yt)}filter(yt){if(!yt)return void this.resetFilteredItems();this._filteredItems=[],yt=this._ngSelect.searchFn?yt:Vi(yt).toLocaleLowerCase();const fe=this._ngSelect.searchFn||this._defaultSearchFn,it=this._ngSelect.hideSelected;for(const Tt of Array.from(this._groups.keys())){const Pe=[];for(const It of this._groups.get(Tt))it&&(It.parent&&It.parent.selected||It.selected)||fe(yt,this._ngSelect.searchFn?It.value:It)&&Pe.push(It);if(Pe.length>0){const[It]=Pe.slice(-1);if(It.parent){const le=this._items.find(o=>o===It.parent);this._filteredItems.push(le)}this._filteredItems.push(...Pe)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(yt=>!yt.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(yt){this._markedIndex=this._filteredItems.indexOf(yt)}markSelectedOrDefault(yt){if(0===this._filteredItems.length)return;const fe=this._getLastMarkedIndex();this._markedIndex=fe>-1?fe:yt?this.filteredItems.findIndex(it=>!it.disabled):-1}resolveNested(yt,fe){if(!Fr(yt))return yt;if(-1===fe.indexOf("."))return yt[fe];{const it=fe.split(".");let Tt=yt;for(let Pe=0,It=it.length;Pe<It;++Pe){if(null==Tt)return null;Tt=Tt[it[Pe]]}return Tt}}mapItem(yt,fe){const it=dr(yt.$ngOptionLabel)?yt.$ngOptionLabel:this.resolveNested(yt,this._ngSelect.bindLabel),Tt=dr(yt.$ngOptionValue)?yt.$ngOptionValue:yt;return{index:fe,label:dr(it)?it.toString():"",value:Tt,disabled:yt.disabled,htmlId:`${this._ngSelect.dropdownId}-${fe}`}}mapSelectedItems(){const yt=this._ngSelect.multiple;for(const fe of this.selectedItems){const it=this._ngSelect.bindValue?this.resolveNested(fe.value,this._ngSelect.bindValue):fe.value,Tt=dr(it)?this.findItem(it):null;this._selectionModel.unselect(fe,yt),this._selectionModel.select(Tt||fe,yt,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(fe=>-1===this.selectedItems.indexOf(fe)))}_showSelected(yt){if(this._filteredItems.push(yt),yt.parent){const fe=yt.parent;this._filteredItems.find(Tt=>Tt===fe)||this._filteredItems.push(fe)}else if(yt.children)for(const fe of yt.children)fe.selected=!1,this._filteredItems.push(fe);this._filteredItems=[...this._filteredItems.sort((fe,it)=>fe.index-it.index)]}_hideSelected(yt){this._filteredItems=this._filteredItems.filter(fe=>fe!==yt),yt.parent?yt.parent.children.every(it=>it.selected)&&(this._filteredItems=this._filteredItems.filter(it=>it!==yt.parent)):yt.children&&(this._filteredItems=this.filteredItems.filter(fe=>fe.parent!==yt))}_defaultSearchFn(yt,fe){return Vi(fe.label).toLocaleLowerCase().indexOf(yt)>-1}_getNextItemIndex(yt){return yt>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(yt){0===this._filteredItems.length||this._filteredItems.every(fe=>fe.disabled)||(this._markedIndex=this._getNextItemIndex(yt),this.markedItem.disabled&&this._stepToItem(yt))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const yt=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&yt<0?-1:Math.max(this.markedIndex,yt)}_groupBy(yt,fe){const it=new Map;if(0===yt.length)return it;if(Array.isArray(yt[0].value[fe])){for(const It of yt){const le=(It.value[fe]||[]).map((o,c)=>this.mapItem(o,c));it.set(It,le)}return it}const Tt=er(this._ngSelect.groupBy),Pe=It=>{const le=Tt?fe(It.value):It.value[fe];return dr(le)?le:void 0};for(const It of yt){const le=Pe(It),o=it.get(le);o?o.push(It):it.set(le,[It])}return it}_flatten(yt){const fe=er(this._ngSelect.groupBy),it=[];for(const Tt of Array.from(yt.keys())){let Pe=it.length;if(void 0===Tt){const _=yt.get(void 0)||[];it.push(..._.map(b=>(b.index=Pe++,b)));continue}const It=Fr(Tt),le={label:It?"":String(Tt),children:void 0,parent:null,index:Pe++,disabled:!this._ngSelect.selectableGroup,htmlId:pt()},o=fe?this._ngSelect.bindLabel:this._ngSelect.groupBy,c=this._ngSelect.groupValue||(()=>It?Tt.value:{[o]:Tt}),h=yt.get(Tt).map(_=>(_.parent=le,_.children=void 0,_.index=Pe++,_));le.children=h,le.value=c(Tt,h.map(_=>_.value)),it.push(le),it.push(...h)}return it}}var di=function(rt){return rt[rt.Tab=9]="Tab",rt[rt.Enter=13]="Enter",rt[rt.Esc=27]="Esc",rt[rt.Space=32]="Space",rt[rt.ArrowUp=38]="ArrowUp",rt[rt.ArrowDown=40]="ArrowDown",rt[rt.Backspace=8]="Backspace",rt}(di||{});let un=(()=>{class rt{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(fe,it,Tt){const Pe=this._dimensions,It=Pe.itemHeight*it,o=Math.max(0,fe)/It*it;let c=Math.min(it,Math.ceil(o)+(Pe.itemsPerViewport+1));const _=Math.max(0,c-Pe.itemsPerViewport);let b=Math.min(_,Math.floor(o)),x=Pe.itemHeight*Math.ceil(b)-Pe.itemHeight*Math.min(b,Tt);return x=isNaN(x)?0:x,b=isNaN(b)?-1:b,c=isNaN(c)?-1:c,b-=Tt,b=Math.max(0,b),c+=Tt,c=Math.min(it,c),{topPadding:x,scrollHeight:It,start:b,end:c}}setDimensions(fe,it){const Tt=Math.max(1,Math.floor(it/fe));this._dimensions={itemHeight:fe,panelHeight:it,itemsPerViewport:Tt}}getScrollTo(fe,it,Tt){const{panelHeight:Pe}=this.dimensions,It=fe+it,o=Tt+Pe;return Pe>=It&&Tt===fe?null:It>o?Tt+It-o:fe<=Tt?fe:null}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac})}return rt})();const Et=["top","right","bottom","left"],St=typeof requestAnimationFrame<"u"?gt.A:wt.u;let Ke=(()=>{class rt{constructor(fe,it,Tt,Pe,It){this._renderer=fe,this._zone=it,this._panelService=Tt,this._document=It,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new k._w7,this.scroll=new k._w7,this.scrollToEnd=new k._w7,this.outsideClick=new k._w7,this._destroy$=new si.E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=Pe.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(fe){fe!==this._itemsLength&&(this._itemsLength=fe,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:fe,panelHeight:it}=this._panelService.dimensions,Tt=this.markedItem.index*fe;return it>Tt?0:Tt}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(fe){if(fe.items){const it=fe.items;this._onItemsChange(it.currentValue,it.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(fe,it=!1){if(!fe)return;const Tt=this.items.indexOf(fe);if(Tt<0||Tt>=this.itemsLength)return;let Pe;if(this.virtualScroll){const It=this._panelService.dimensions.itemHeight;Pe=this._panelService.getScrollTo(Tt*It,It,this._lastScrollPosition)}else{const It=this._dropdown.querySelector(`#${fe.htmlId}`);Pe=this._panelService.getScrollTo(It.offsetTop,It.clientHeight,it?It.offsetTop:this._lastScrollPosition)}dr(Pe)&&(this._scrollablePanel.scrollTop=Pe)}scrollToTag(){const fe=this._scrollablePanel;fe.scrollTop=fe.scrollHeight-fe.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Et.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(fe){Et.forEach(Tt=>{const Pe=`ng-select-${Tt}`;this._renderer.removeClass(this._dropdown,Pe),this._renderer.removeClass(this._select,Pe)});const it=`ng-select-${fe}`;this._renderer.addClass(this._dropdown,it),this._renderer.addClass(this._select,it)}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,$e.w)(this.scrollElementRef.nativeElement,"scroll").pipe((0,ze.a)(this._destroy$),function Ue(rt,yt=i.M){return function De(rt){return(0,V.i)((yt,fe)=>{let it=!1,Tt=null,Pe=null,It=!1;const le=()=>{if(Pe?.unsubscribe(),Pe=null,it){it=!1;const c=Tt;Tt=null,fe.next(c)}It&&fe.complete()},o=()=>{Pe=null,It&&fe.complete()};yt.subscribe((0,Ae.e)(fe,c=>{it=!0,Tt=c,Pe||(0,Oe.Uv)(rt(c)).subscribe(Pe=(0,Ae.e)(fe,le,o))},()=>{It=!0,(!it||!Pe||Pe.closed)&&fe.complete()}))})}(()=>(0,Fe.k)(rt,yt))}(0,St)).subscribe(fe=>{const it=fe.path||fe.composedPath&&fe.composedPath();it&&(0!==it.length||fe.target)&&this._onContentScrolled(it&&0!==it.length?it[0].scrollTop:fe.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{(0,ii.U)((0,$e.w)(this._document,"touchstart",{capture:!0}),(0,$e.w)(this._document,"mousedown",{capture:!0})).pipe((0,ze.a)(this._destroy$)).subscribe(fe=>this._checkToClose(fe))})}_checkToClose(fe){if(this._select.contains(fe.target)||this._dropdown.contains(fe.target))return;const it=fe.path||fe.composedPath&&fe.composedPath();fe.target&&fe.target.shadowRoot&&it&&it[0]&&this._select.contains(it[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(fe,it){this.items=fe||[],this._scrollToEndFired=!1,this.itemsLength=fe.length,this.virtualScroll?this._updateItemsRange(it):(this._setVirtualHeight(),this._updateItems(it))}_updateItems(fe){this.update.emit(this.items),!1!==fe&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,fe)})})}_updateItemsRange(fe){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{fe?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(fe){this.virtualScroll&&this._renderItemsRange(fe),this._lastScrollPosition=fe,this._fireScrollToEnd(fe)}_updateVirtualHeight(fe){this._updateScrollHeight&&(this._virtualPadding.style.height=`${fe}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(fe=null){if(fe&&this._lastScrollPosition===fe)return;const it=this._panelService.calculateItems(fe=fe||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(it.scrollHeight),this._contentPanel.style.transform=`translateY(${it.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(it.start,it.end)),this.scroll.emit({start:it.start,end:it.end})}),dr(fe)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=fe,this._lastScrollPosition=fe)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[fe]=this.items;return this.update.emit([fe]),Promise.resolve().then(()=>{const Tt=this._dropdown.querySelector(`#${fe.htmlId}`).clientHeight;return this._virtualPadding.style.height=Tt*this.itemsLength+"px",this._panelService.setDimensions(Tt,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(fe){this._scrollToEndFired||0===fe||fe+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(fe){if("auto"!==this.position)return this.position;const it=this._select.getBoundingClientRect(),Tt=document.documentElement.scrollTop||document.body.scrollTop;return it.top+window.pageYOffset+it.height+fe.getBoundingClientRect().height>Tt+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const fe=this._select.getBoundingClientRect(),it=this._parent.getBoundingClientRect();this._dropdown.style.left=fe.left-it.left+"px",this._dropdown.style.width=fe.width+"px",this._dropdown.style.minWidth=fe.width+"px"}_updateYPosition(){const fe=this._select.getBoundingClientRect(),it=this._parent.getBoundingClientRect(),Tt=fe.height;"top"===this._currentPosition?(this._dropdown.style.bottom=it.bottom-fe.bottom+Tt+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=fe.top-it.top+Tt+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{(0,$e.w)(this._dropdown,"mousedown").pipe((0,ze.a)(this._destroy$)).subscribe(fe=>{"INPUT"!==fe.target.tagName&&fe.preventDefault()})})}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.q87),k.GI1(k.WW2),k.GI1(un),k.GI1(k.GMv),k.GI1(oi.Ud,8))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-dropdown-panel"]],viewQuery:function(it,Tt){if(1&it&&(k.CC$(at,7,k.GMv),k.CC$(ri,7,k.GMv),k.CC$(Xt,7,k.GMv)),2&it){let Pe;k.wto(Pe=k.Gqi())&&(Tt.contentElementRef=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.scrollElementRef=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.paddingElementRef=Pe.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[k.SYr],ngContentSelectors:ni,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(it,Tt){1&it&&(k.kPM(),k.yuY(0,dt,2,4,"div",0),k.I0R(1,"div",1,2),k.wR5(3,"div",null,3),k.I0R(5,"div",null,4),k._Xx(7),k.C$Y()(),k.yuY(8,Zt,2,4,"div",5)),2&it&&(k.E7m("ngIf",Tt.headerTemplate),k.yG2(3),k.eAK("total-padding",Tt.virtualScroll),k.yG2(2),k.eAK("scrollable-content",Tt.virtualScroll&&Tt.items.length),k.yG2(3),k.E7m("ngIf",Tt.footerTemplate))},dependencies:[oi.u_,oi.XV],encapsulation:2,changeDetection:0})}return rt})(),Ze=(()=>{class rt{get disabled(){return this._disabled}set disabled(fe){this._disabled=this._isDisabled(fe)}constructor(fe){this.elementRef=fe,this.stateChange$=new si.E,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(fe){fe.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(fe){return null!=fe&&"false"!=`${fe}`}static#e=this.\u0275fac=function(it){return new(it||rt)(k.GI1(k.GMv))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[k.SYr],ngContentSelectors:ni,decls:1,vars:0,template:function(it,Tt){1&it&&(k.kPM(),k._Xx(0))},encapsulation:2,changeDetection:0})}return rt})(),Re=(()=>{class rt{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac,providedIn:"root"})}return rt})(),He=(()=>{class rt{warn(fe){console.warn(fe)}static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275prov=k.wxM({token:rt,factory:rt.\u0275fac,providedIn:"root"})}return rt})();const ft=new k.UbH("ng-select-selection-model");let Yt=(()=>{class rt{get items(){return this._items}set items(fe){null===fe&&(fe=[]),this._itemsAreUsed=!0,this._items=fe}get compareWith(){return this._compareWith}set compareWith(fe){if(null!=fe&&!er(fe))throw Error("`compareWith` must be a function.");this._compareWith=fe}get clearSearchOnAdd(){return dr(this._clearSearchOnAdd)?this._clearSearchOnAdd:dr(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(fe){this._clearSearchOnAdd=fe}get deselectOnClick(){return dr(this._deselectOnClick)?this._deselectOnClick:dr(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(fe){this._deselectOnClick=fe}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(fe,it,Tt,Pe,It,le,o){this.classes=fe,this.autoFocus=it,this.config=Tt,this._cd=le,this._console=o,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=c=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new k._w7,this.focusEvent=new k._w7,this.changeEvent=new k._w7,this.openEvent=new k._w7,this.closeEvent=new k._w7,this.searchEvent=new k._w7,this.clearEvent=new k._w7,this.addEvent=new k._w7,this.removeEvent=new k._w7,this.scroll=new k._w7,this.scrollToEnd=new k._w7,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=pt(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new si.E,this._keyPress$=new si.E,this._onChange=c=>{},this._onTouched=()=>{},this.clearItem=c=>{const h=this.selectedItems.find(_=>_.value===c);this.unselect(h)},this.trackByOption=(c,h)=>this.trackByFn?this.trackByFn(h.value):h,this._mergeGlobalConfig(Tt),this.itemsList=new $i(this,Pe()),this.element=It.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(fe=>fe.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(fe){fe.multiple&&this.itemsList.clearSelected(),fe.items&&this._setItems(fe.items.currentValue||[]),fe.isOpen&&(this._manualOpen=dr(fe.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),dr(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(fe){if(di[fe.which]){if(!1===this.keyDownFn(fe))return;this.handleKeyCode(fe)}else fe.key&&1===fe.key.length&&this._keyPress$.next(fe.key.toLocaleLowerCase())}handleKeyCode(fe){this.clearButton&&this.clearButton.nativeElement===fe.target?this.handleKeyCodeClear(fe):this.handleKeyCodeInput(fe)}handleKeyCodeInput(fe){switch(fe.which){case di.ArrowDown:this._handleArrowDown(fe);break;case di.ArrowUp:this._handleArrowUp(fe);break;case di.Space:this._handleSpace(fe);break;case di.Enter:this._handleEnter(fe);break;case di.Tab:this._handleTab(fe);break;case di.Esc:this.close(),fe.preventDefault();break;case di.Backspace:this._handleBackspace()}}handleKeyCodeClear(fe){fe.which===di.Enter&&(this.handleClearClick(),fe.preventDefault())}handleMousedown(fe){const it=fe.target;"INPUT"!==it.tagName&&fe.preventDefault(),it.classList.contains("ng-clear-wrapper")?this.handleClearClick():it.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():it.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(fe){this.itemsList.clearSelected(),this._handleWriteValue(fe),this._cd.markForCheck()}registerOnChange(fe){this._onChange=fe}registerOnTouched(fe){this._onTouched=fe}setDisabledState(fe){this._disabled=fe,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(fe){!fe||fe.disabled||this.disabled||(this.deselectOnClick&&fe.selected?this.unselect(fe):this.select(fe),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(fe){fe.selected||(this.itemsList.select(fe),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(fe.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(fe){fe&&(this.itemsList.unselect(fe),this.focus(),this._updateNgModel(),this.removeEvent.emit(fe.value))}selectTag(){let fe;fe=er(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const it=Tt=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(Tt,null):this.itemsList.addItem(Tt);!function Cs(rt){return rt instanceof Promise}(fe)?fe&&this.select(it(fe)):fe.then(Tt=>this.select(it(Tt))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const fe=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(it=>it.label.toLowerCase()===fe)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(it=>it.label.toLowerCase()===fe))&&!this.loading}showNoItemsFound(){const fe=0===this.itemsList.filteredItems.length;return(fe&&!this._isTypeahead&&!this.loading||fe&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(fe){this._isComposing=!1,!this.searchWhileComposing&&this.filter(fe)}filter(fe){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=fe,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(fe),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:fe,items:this.itemsList.filteredItems.map(it=>it.value)}),this.open())}onInputFocus(fe){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(fe),this.focused=!0)}onInputBlur(fe){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(fe),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(fe){fe.disabled||this.itemsList.markItem(fe)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const fe=this.selectedItems&&this.selectedItems[0];this.searchTerm=fe&&fe.label||null}_setItems(fe){const it=fe[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=dr(it)?!Fr(it):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(fe),fe.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&dr(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const fe=Tt=>{this.items=Tt.map(Pe=>({$ngOptionValue:Pe.value,$ngOptionLabel:Pe.elementRef.nativeElement.innerHTML,disabled:Pe.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},it=()=>{const Tt=(0,ii.U)(this.ngOptions.changes,this._destroy$);(0,ii.U)(...this.ngOptions.map(Pe=>Pe.stateChange$)).pipe((0,ze.a)(Tt)).subscribe(Pe=>{const It=this.itemsList.findItem(Pe.value);It.disabled=Pe.disabled,It.label=Pe.label||It.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe((0,Je.W)(this.ngOptions),(0,ze.a)(this._destroy$)).subscribe(Tt=>{this.bindLabel=this._defaultLabel,fe(Tt),it()})}_isValidWriteValue(fe){if(!dr(fe)||this.multiple&&""===fe||Array.isArray(fe)&&0===fe.length)return!1;const it=Tt=>!(!dr(this.compareWith)&&Fr(Tt)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(Tt)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(fe)?fe.every(Tt=>it(Tt)):(this._console.warn("Multiple select ngModel should be array."),!1):it(fe)}_handleWriteValue(fe){if(!this._isValidWriteValue(fe))return;const it=Tt=>{let Pe=this.itemsList.findItem(Tt);if(Pe)this.itemsList.select(Pe);else{const It=Fr(Tt);It||!It&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(Tt,null)):this.bindValue&&(Pe={[this.bindLabel]:null,[this.bindValue]:Tt},this.itemsList.select(this.itemsList.mapItem(Pe,null)))}};this.multiple?fe.forEach(Tt=>it(Tt)):it(fe)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,ze.a)(this._destroy$),(0,nt.y)(fe=>this._pressedKeys.push(fe)),(0,mt.o)(200),(0,Pt.I)(()=>this._pressedKeys.length>0),(0,ot.k)(()=>this._pressedKeys.join(""))).subscribe(fe=>{const it=this.itemsList.findByLabel(fe);it&&(this.isOpen?(this.itemsList.markItem(it),this._scrollToMarked(),this._cd.markForCheck()):this.select(it)),this._pressedKeys=[]})}_setInputAttributes(){const fe=this.searchInput.nativeElement,it={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const Tt of Object.keys(it))fe.setAttribute(Tt,it[Tt])}_updateNgModel(){const fe=[];for(const Tt of this.selectedItems)if(this.bindValue){let Pe=null;Pe=Tt.children?Tt.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(Tt.value,this.bindValue),fe.push(Pe)}else fe.push(Tt.value);const it=this.selectedItems.map(Tt=>Tt.value);this.multiple?(this._onChange(fe),this.changeEvent.emit(it)):(this._onChange(dr(fe[0])?fe[0]:null),this.changeEvent.emit(it[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(fe){this.searchTerm=fe,this._isTypeahead&&this.typeahead.next(fe)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(fe){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),fe.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),fe.preventDefault()):this.showAddTag?(this.selectTag(),fe.preventDefault()):this.close():this.close()}_handleEnter(fe){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}fe.preventDefault()}_handleSpace(fe){this.isOpen||this._manualOpen||(this.open(),fe.preventDefault())}_handleArrowDown(fe){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),fe.preventDefault()}_handleArrowUp(fe){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),fe.preventDefault())}_nextItemIsTag(fe){const it=this.itemsList.markedIndex+fe;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(it<0||it===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const fe=this.searchTerm&&this.searchTerm.trim();return fe&&fe.length>=this.minTermLength}_mergeGlobalConfig(fe){this.placeholder=this.placeholder||fe.placeholder,this.notFoundText=this.notFoundText||fe.notFoundText,this.typeToSearchText=this.typeToSearchText||fe.typeToSearchText,this.addTagText=this.addTagText||fe.addTagText,this.loadingText=this.loadingText||fe.loadingText,this.clearAllText=this.clearAllText||fe.clearAllText,this.virtualScroll=dr(this.virtualScroll)?this.virtualScroll:!!dr(fe.disableVirtualScroll)&&!fe.disableVirtualScroll,this.openOnEnter=dr(this.openOnEnter)?this.openOnEnter:fe.openOnEnter,this.appendTo=this.appendTo||fe.appendTo,this.bindValue=this.bindValue||fe.bindValue,this.bindLabel=this.bindLabel||fe.bindLabel,this.appearance=this.appearance||fe.appearance}static#e=this.\u0275fac=function(it){return new(it||rt)(k.gJ8("class"),k.gJ8("autofocus"),k.GI1(Re),k.GI1(ft),k.GI1(k.GMv),k.GI1(k.kD9),k.GI1(He))};static#t=this.\u0275cmp=k.In1({type:rt,selectors:[["ng-select"]],contentQueries:function(it,Tt,Pe){if(1&it&&(k.szK(Pe,mr,5,k.Yw2),k.szK(Pe,Tr,5,k.Yw2),k.szK(Pe,Xr,5,k.Yw2),k.szK(Pe,Ct,5,k.Yw2),k.szK(Pe,Ie,5,k.Yw2),k.szK(Pe,Be,5,k.Yw2),k.szK(Pe,ct,5,k.Yw2),k.szK(Pe,lt,5,k.Yw2),k.szK(Pe,zt,5,k.Yw2),k.szK(Pe,qt,5,k.Yw2),k.szK(Pe,Kt,5,k.Yw2),k.szK(Pe,Ze,5)),2&it){let It;k.wto(It=k.Gqi())&&(Tt.optionTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.optgroupTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.labelTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.multiLabelTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.headerTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.footerTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.notFoundTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.typeToSearchTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.loadingTextTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.tagTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.loadingSpinnerTemplate=It.first),k.wto(It=k.Gqi())&&(Tt.ngOptions=It)}},viewQuery:function(it,Tt){if(1&it&&(k.CC$(Ke,5),k.CC$(gi,7),k.CC$(Gi,5)),2&it){let Pe;k.wto(Pe=k.Gqi())&&(Tt.dropdownPanel=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.searchInput=Pe.first),k.wto(Pe=k.Gqi())&&(Tt.clearButton=Pe.first)}},hostVars:20,hostBindings:function(it,Tt){1&it&&k.qCj("keydown",function(It){return Tt.handleKeyDown(It)}),2&it&&k.eAK("ng-select-typeahead",Tt.typeahead)("ng-select-multiple",Tt.multiple)("ng-select-taggable",Tt.addTag)("ng-select-searchable",Tt.searchable)("ng-select-clearable",Tt.clearable)("ng-select-opened",Tt.isOpen)("ng-select",Tt.useDefaultClass)("ng-select-disabled",Tt.disabled)("ng-select-filtered",Tt.filtered)("ng-select-single",Tt.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[k.M5G([{provide:hn.Y6,useExisting:(0,k.wd)(()=>rt),multi:!0},un]),k.SYr],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(it,Tt){if(1&it){const Pe=k.KQA();k.I0R(0,"div",0),k.qCj("mousedown",function(le){return Tt.handleMousedown(le)}),k.I0R(1,"div",1)(2,"div",2),k.OEk(3),k.C$Y(),k.yuY(4,bn,2,2,"ng-container",3)(5,Qt,1,5,null,3),k.I0R(6,"div",4)(7,"input",5,6),k.qCj("input",function(){k.usT(Pe);const le=k.Gew(8);return k.CGJ(Tt.filter(le.value))})("compositionstart",function(){return Tt.onCompositionStart()})("compositionend",function(){k.usT(Pe);const le=k.Gew(8);return k.CGJ(Tt.onCompositionEnd(le.value))})("focus",function(le){return Tt.onInputFocus(le)})("blur",function(le){return Tt.onInputBlur(le)})("change",function(le){return le.stopPropagation()}),k.C$Y()()(),k.yuY(9,Zn,4,1,"ng-container",3)(10,Nn,4,1,"span",7),k.I0R(11,"span",8),k.wR5(12,"span",9),k.C$Y()(),k.yuY(13,Or,7,19,"ng-dropdown-panel",10)}2&it&&(k.eAK("ng-appearance-outline","outline"===Tt.appearance)("ng-has-value",Tt.hasValue),k.yG2(3),k.cNF(Tt.placeholder),k.yG2(),k.E7m("ngIf",(!Tt.multiLabelTemplate||!Tt.multiple)&&Tt.selectedItems.length>0),k.yG2(),k.E7m("ngIf",Tt.multiple&&Tt.multiLabelTemplate&&Tt.selectedValues.length>0),k.yG2(),k.e48("aria-expanded",Tt.isOpen)("aria-owns",Tt.isOpen?Tt.dropdownId:null),k.yG2(),k.E7m("readOnly",!Tt.searchable||Tt.itemsList.maxItemsSelected)("disabled",Tt.disabled)("value",Tt.searchTerm?Tt.searchTerm:""),k.e48("id",Tt.labelForId)("tabindex",Tt.tabIndex)("aria-activedescendant",Tt.isOpen?null==Tt.itemsList||null==Tt.itemsList.markedItem?null:Tt.itemsList.markedItem.htmlId:null)("aria-controls",Tt.isOpen?Tt.dropdownId:null),k.yG2(2),k.E7m("ngIf",Tt.loading),k.yG2(),k.E7m("ngIf",Tt.showClear()),k.yG2(3),k.E7m("ngIf",Tt.isOpen))},dependencies:[oi.QF,oi.ay,oi.u_,oi.XV,Ke,br],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return rt})();function xi(){return new fi}class fi{constructor(){this._selected=[]}get value(){return this._selected}select(yt,fe,it){if(yt.selected=!0,(!yt.children||!fe&&it)&&this._selected.push(yt),fe)if(yt.parent){const Tt=yt.parent.children.length,Pe=yt.parent.children.filter(It=>It.selected).length;yt.parent.selected=Tt===Pe}else yt.children&&(this._setChildrenSelectedState(yt.children,!0),this._removeChildren(yt),this._selected=it&&this._activeChildren(yt)?[...this._selected.filter(Tt=>Tt.parent!==yt),yt]:[...this._selected,...yt.children.filter(Tt=>!Tt.disabled)])}unselect(yt,fe){if(this._selected=this._selected.filter(it=>it!==yt),yt.selected=!1,fe)if(yt.parent&&yt.parent.selected){const it=yt.parent.children;this._removeParent(yt.parent),this._removeChildren(yt.parent),this._selected.push(...it.filter(Tt=>Tt!==yt&&!Tt.disabled)),yt.parent.selected=!1}else yt.children&&(this._setChildrenSelectedState(yt.children,!1),this._removeChildren(yt))}clear(yt){this._selected=yt?this._selected.filter(fe=>fe.disabled):[]}_setChildrenSelectedState(yt,fe){for(const it of yt)it.disabled||(it.selected=fe)}_removeChildren(yt){this._selected=[...this._selected.filter(fe=>fe.parent!==yt),...yt.children.filter(fe=>fe.parent===yt&&fe.disabled&&fe.selected)]}_removeParent(yt){this._selected=this._selected.filter(fe=>fe!==yt)}_activeChildren(yt){return yt.children.every(fe=>!fe.disabled||fe.selected)}}let Pi=(()=>{class rt{static#e=this.\u0275fac=function(it){return new(it||rt)};static#t=this.\u0275mod=k.a4G({type:rt});static#i=this.\u0275inj=k.s3X({providers:[{provide:ft,useValue:xi}],imports:[oi.MD]})}return rt})()},2728:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{C:()=>nt,Wz:()=>Ue,gD:()=>Je});var k=Rt(4496),hn=Rt(1368),ze=Rt(4984);const i=["*"],V=mt=>({"text-muted":mt});function Oe(mt,Pt){if(1&mt&&(k.I0R(0,"button",7),k.OEk(1),k.C$Y()),2&mt){const ot=k.GaO();k.E7m("ngClass",k.S45(2,V,ot.isDisabled)),k.yG2(),k.oRS(" ",ot.heading," ")}}const Ae=[[["","accordion-heading",""]],"*"],De=["[accordion-heading]","*"];let Fe=(()=>{class mt{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(gt){return new(gt||mt)};static#t=this.\u0275prov=k.wxM({token:mt,factory:mt.\u0275fac,providedIn:"root"})}return mt})(),Ue=(()=>{class mt{constructor(ot){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,ot)}closeOtherPanels(ot){this.closeOthers&&this.groups.forEach(gt=>{gt!==ot&&(gt.isOpen=!1)})}addGroup(ot){ot.isAnimated=this.isAnimated,this.groups.push(ot)}removeGroup(ot){const gt=this.groups.indexOf(ot);-1!==gt&&this.groups.splice(gt,1)}static#e=this.\u0275fac=function(gt){return new(gt||mt)(k.GI1(Fe))};static#t=this.\u0275cmp=k.In1({type:mt,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(gt,wt){2&gt&&k.e48("aria-multiselectable",wt.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:i,decls:1,vars:0,template:function(gt,wt){1&gt&&(k.kPM(),k._Xx(0))},encapsulation:2})}return mt})(),Je=(()=>{class mt{get isOpen(){return this._isOpen}set isOpen(ot){ot!==this.isOpen&&(ot&&this.accordion.closeOtherPanels(this),this._isOpen=ot,Promise.resolve(null).then(()=>{this.isOpenChange.emit(ot)}))}constructor(ot){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new k._w7,this._isOpen=!1,this.accordion=ot}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(gt){return new(gt||mt)(k.GI1(Ue))};static#t=this.\u0275cmp=k.In1({type:mt,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(gt,wt){2&gt&&k.eAK("panel-open",wt.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:De,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(gt,wt){1&gt&&(k.kPM(Ae),k.I0R(0,"div",0)(1,"div",1),k.qCj("click",function(){return wt.toggleOpen()}),k.I0R(2,"div",2)(3,"div",3),k.yuY(4,Oe,2,4,"button",4),k._Xx(5),k.C$Y()()(),k.I0R(6,"div",5)(7,"div",6),k._Xx(8,1),k.C$Y()()()),2&gt&&(k.E7m("ngClass",wt.panelClass),k.yG2(),k.E7m("ngClass",wt.isDisabled?"panel-disabled":"panel-enabled"),k.yG2(2),k.e48("aria-expanded",wt.isOpen),k.yG2(),k.E7m("ngIf",wt.heading),k.yG2(2),k.E7m("collapse",!wt.isOpen)("isAnimated",wt.isAnimated))},dependencies:[hn.QF,hn.u_,ze.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return mt})(),nt=(()=>{class mt{static forRoot(){return{ngModule:mt,providers:[]}}static#e=this.\u0275fac=function(gt){return new(gt||mt)};static#t=this.\u0275mod=k.a4G({type:mt});static#i=this.\u0275inj=k.s3X({imports:[hn.MD,ze.a]})}return mt})()},3304:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{em:()=>gh,U5:()=>Vp,SO:()=>yg});var k=Rt(4496),hn=Rt(6684),ze=Rt(4704),i=Rt(3992),V=Rt(3616),Oe=Rt(4e3);function De(y){return y<0?Math.ceil(y)||0:Math.floor(y)}function Fe(y){return"string"==typeof y}function Ue(y){return y instanceof Date||"[object Date]"===Object.prototype.toString.call(y)}function nt(y){return y&&y.getTime&&!isNaN(y.getTime())}function mt(y){return y instanceof Function||"[object Function]"===Object.prototype.toString.call(y)}function Pt(y){return"number"==typeof y||"[object Number]"===Object.prototype.toString.call(y)}function ot(y){return y instanceof Array||"[object Array]"===Object.prototype.toString.call(y)}function gt(y,O){return Object.prototype.hasOwnProperty.call(y,O)}function wt(y){return null!=y&&"[object Object]"===Object.prototype.toString.call(y)}function $e(y){return void 0===y}function ii(y){const O=+y;let S=0;return 0!==O&&isFinite(O)&&(S=De(O)),S}const oi={},at={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function ri(y,O){const S=y.toLowerCase();let H=y;S in at&&(H=at[S]),oi[S]=oi[`${S}s`]=oi[O]=H}function Xt(y){return Fe(y)?oi[y]||oi[y.toLowerCase()]:void 0}const dt=0,Zt=1,ni=2,gi=3,Gi=4,vi=5,Ei=6,Fi=7,Ji=8;function bn(y,O,S){const H=`${Math.abs(y)}`;return(y>=0?S?"+":"":"-")+Math.pow(10,Math.max(0,O-H.length)).toString().substr(1)+H}const fn={},Gn={},Qt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function Yi(y,O,S,H){y&&(Gn[y]=H),O&&(Gn[O[0]]=function(){return bn(H.apply(null,arguments),O[1],O[2])}),S&&(Gn[S]=function(Z,ye){return ye.locale.ordinal(H.apply(null,arguments),y)})}function Zn(y){return y.match(/\[[\s\S]/)?y.replace(/^\[|\]$/g,""):y.replace(/\\/g,"")}function Nn(y,O,S){const H=new Date(Date.UTC.apply(null,arguments));return y<100&&y>=0&&isFinite(H.getUTCFullYear())&&H.setUTCFullYear(y),H}function Dn(y,O=0,S=1,H=0,Z=0,ye=0,vt=0){const Ai=new Date(y,O,S,H,Z,ye,vt);return y<100&&y>=0&&isFinite(Ai.getFullYear())&&Ai.setFullYear(y),Ai}function ji(y,O=!1){return O?y.getUTCHours():y.getHours()}function Mr(y,O=!1){return O?y.getUTCMinutes():y.getMinutes()}function or(y,O=!1){return O?y.getUTCSeconds():y.getSeconds()}function gr(y,O=!1){return O?y.getUTCMilliseconds():y.getMilliseconds()}function en(y,O=!1){return O?y.getUTCDay():y.getDay()}function _n(y,O=!1){return O?y.getUTCDate():y.getDate()}function Zi(y,O=!1){return O?y.getUTCMonth():y.getMonth()}function Ui(y,O=!1){return O?y.getUTCFullYear():y.getFullYear()}function Or(y,O){return!(!y||!O)&&Sr(y,O)&&Zi(y)===Zi(O)}function Sr(y,O){return!(!y||!O)&&Ui(y)===Ui(O)}function vr(y,O){return!(!y||!O)&&Sr(y,O)&&Or(y,O)&&_n(y)===_n(O)}const ar=/\d/,kn=/\d\d/,dr=/\d{3}/,Fr=/\d{4}/,Cs=/[+-]?\d{6}/,er=/\d\d?/,br=/\d\d\d\d?/,mr=/\d\d\d\d\d\d?/,Tr=/\d{1,3}/,Xr=/\d{1,4}/,Ct=/[+-]?\d{1,6}/,Ie=/\d+/,Be=/[+-]?\d+/,lt=/Z|[+-]\d\d(?::?\d\d)?/gi,zt=/[+-]?\d+(\.\d{1,3})?/,qt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Kt={};function pt(y,O,S){Kt[y]=mt(O)?O:function(H,Z){return H&&S?S:O}}function ui(y,O){return gt(Kt,y)?Kt[y](!1,O):new RegExp(function Vi(y){return $i(y.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(O,S,H,Z,ye)=>S||H||Z||ye))}(y))}function $i(y){return y.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const di={};function un(y,O){const S=Fe(y)?[y]:y;let H=O;if(Pt(O)&&(H=function(Z,ye,vt){return ye[O]=ii(Z),vt}),ot(S)&&mt(H)){let Z;for(Z=0;Z<S.length;Z++)di[S[Z]]=H}}function Et(y,O){un(y,function(S,H,Z,ye){return Z._w=Z._w||{},O(S,Z._w,Z,ye)})}function St(y,O,S){return null!=O&&gt(di,y)&&di[y](O,S._a,S,y),S}const Ke={};function Ze(y,O){Ke[y]=O}function ft(y){return null==y._pf&&(y._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),y._pf}function Yt(y,O){return O.locale.getFullYear?O.locale.getFullYear(y,O.isUTC).toString():Ui(y,O.isUTC).toString()}function fi(y){return ii(y)+(ii(y)>68?1900:2e3)}function Pi(y){return rt(y)?366:365}function rt(y){return y%4==0&&y%100!=0||y%400==0}function yt(y,O){if(isNaN(y)||isNaN(O))return NaN;const S=function Ae(y,O){return(y%O+O)%O}(O,12);return 1===S?rt(y+(O-S)/12)?29:28:31-S%7%2}const it={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function Tt(y,O){const S=Object.assign({},it,O),H=y.getFullYear()+(S.year||0),Z=y.getMonth()+(S.month||0);let ye=y.getDate()+(S.day||0);return S.month&&!S.day&&(ye=Math.min(ye,yt(H,Z))),Dn(H,Z,ye,y.getHours()+(S.hour||0),y.getMinutes()+(S.minute||0),y.getSeconds()+(S.seconds||0))}function It(y,O){return Pt(O)?O:y}function o(y,O,S){const H=Math.min(_n(y),yt(Ui(y),O));return S?y.setUTCMonth(O,H):y.setMonth(O,H),y}function A(y,O,S){return S?y.setUTCDate(O):y.setDate(O),y}function F(y){return new Date(y.getTime())}function U(y,O,S){const H=F(y);switch(O){case"year":o(H,0,S);case"quarter":case"month":A(H,1,S);case"week":case"isoWeek":case"day":case"date":!function h(y,O,S){S?y.setUTCHours(O):y.setHours(O)}(H,0,S);case"hours":!function _(y,O,S){S?y.setUTCMinutes(O):y.setMinutes(O)}(H,0,S);case"minutes":!function b(y,O,S){S?y.setUTCSeconds(O):y.setSeconds(O)}(H,0,S);case"seconds":!function x(y,O,S){S?y.setUTCMilliseconds(O):y.setMilliseconds(O)}(H,0,S)}return"week"===O&&function m(y,O,S={}){Xo(y,O-gn(y,S.locale,S.isUTC),"day")}(H,0,{isUTC:S}),"isoWeek"===O&&function G(y,O,S={}){const H=function xl(y,O=ls()){return Fe(y)?O.weekdaysParse(y)%7||7:Pt(y)&&isNaN(y)?null:y}(O,S.locale);No(y,function gs(y,O){return en(y,O)}(y)%7?H:H-7)}(H,1),"quarter"===O&&o(H,3*Math.floor(Zi(H,S)/3),S),H}function $(y,O,S){let H=O;return"date"===H&&(H="day"),function Hl(y,O,S,H){return Va(y,Ya(O,S),-1,H)}(Xo(U(y,H,S),1,"isoWeek"===H?"week":H,S),1,"milliseconds",S)}function ie(y,O){const S=+U(y,"day",O),H=+U(y,"year",O);return Math.round((S-H)/864e5)+1}function ge(y,O,S){const H=O-S+7;return-(Nn(y,0,H).getUTCDay()-O+7)%7+H-1}function me(y,O,S,H){const Z=ge(Ui(y,H),O,S),ye=Math.floor((ie(y,H)-Z-1)/7)+1;let vt,Ai;return ye<1?(Ai=Ui(y,H)-1,vt=ye+Ee(Ai,O,S)):ye>Ee(Ui(y,H),O,S)?(vt=ye-Ee(Ui(y,H),O,S),Ai=Ui(y,H)+1):(Ai=Ui(y,H),vt=ye),{week:vt,year:Ai}}function Ee(y,O,S){const H=ge(y,O,S),Z=ge(y+1,O,S);return(Pi(y)-H+Z)/7}const N=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Q="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Le="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),kt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wi=qt,Mi=qt;class dn{constructor(O){O&&this.set(O)}set(O){let S;for(S in O){if(!O.hasOwnProperty(S))continue;const H=O[S];this[mt(H)?S:`_${S}`]=H}this._config=O}calendar(O,S,H){const Z=this._calendar[O]||this._calendar.sameElse;return mt(Z)?Z.call(null,S,H):Z}longDateFormat(O){const S=this._longDateFormat[O],H=this._longDateFormat[O.toUpperCase()];return S||!H?S:(this._longDateFormat[O]=H.replace(/MMMM|MM|DD|dddd/g,function(Z){return Z.slice(1)}),this._longDateFormat[O])}get invalidDate(){return this._invalidDate}set invalidDate(O){this._invalidDate=O}ordinal(O,S){return this._ordinal.replace("%d",O.toString(10))}preparse(O,S){return O}getFullYear(O,S=!1){return Ui(O,S)}postformat(O){return O}relativeTime(O,S,H,Z){const ye=this._relativeTime[H];return mt(ye)?ye(O,S,H,Z):ye.replace(/%d/i,O.toString(10))}pastFuture(O,S){const H=this._relativeTime[O>0?"future":"past"];return mt(H)?H(S):H.replace(/%s/i,S)}months(O,S,H=!1){if(!O)return ot(this._months)?this._months:this._months.standalone;if(ot(this._months))return this._months[Zi(O,H)];const Z=(this._months.isFormat||N).test(S)?"format":"standalone";return this._months[Z][Zi(O,H)]}monthsShort(O,S,H=!1){if(!O)return ot(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(ot(this._monthsShort))return this._monthsShort[Zi(O,H)];const Z=N.test(S)?"format":"standalone";return this._monthsShort[Z][Zi(O,H)]}monthsParse(O,S,H){let Z,ye,vt;if(this._monthsParseExact)return this.handleMonthStrictParse(O,S,H);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),vt=0;vt<12;vt++){if(Z=new Date(Date.UTC(2e3,vt)),H&&!this._longMonthsParse[vt]){const Ai=this.months(Z,"",!0).replace(".",""),pn=this.monthsShort(Z,"",!0).replace(".","");this._longMonthsParse[vt]=new RegExp(`^${Ai}$`,"i"),this._shortMonthsParse[vt]=new RegExp(`^${pn}$`,"i")}if(!H&&!this._monthsParse[vt]&&(ye=`^${this.months(Z,"",!0)}|^${this.monthsShort(Z,"",!0)}`,this._monthsParse[vt]=new RegExp(ye.replace(".",""),"i")),H&&"MMMM"===S&&this._longMonthsParse[vt].test(O)||H&&"MMM"===S&&this._shortMonthsParse[vt].test(O)||!H&&this._monthsParse[vt].test(O))return vt}}monthsRegex(O){return this._monthsParseExact?(gt(this,"_monthsRegex")||this.computeMonthsParse(),O?this._monthsStrictRegex:this._monthsRegex):(gt(this,"_monthsRegex")||(this._monthsRegex=Mi),this._monthsStrictRegex&&O?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(O){return this._monthsParseExact?(gt(this,"_monthsRegex")||this.computeMonthsParse(),O?this._monthsShortStrictRegex:this._monthsShortRegex):(gt(this,"_monthsShortRegex")||(this._monthsShortRegex=wi),this._monthsShortStrictRegex&&O?this._monthsShortStrictRegex:this._monthsShortRegex)}week(O,S){return me(O,this._week.dow,this._week.doy,S).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(O,S,H){if(!O)return ot(this._weekdays)?this._weekdays:this._weekdays.standalone;if(ot(this._weekdays))return this._weekdays[en(O,H)];const Z=this._weekdays.isFormat.test(S)?"format":"standalone";return this._weekdays[Z][en(O,H)]}weekdaysMin(O,S,H){return O?this._weekdaysMin[en(O,H)]:this._weekdaysMin}weekdaysShort(O,S,H){return O?this._weekdaysShort[en(O,H)]:this._weekdaysShort}weekdaysParse(O,S,H){let Z,ye;if(this._weekdaysParseExact)return this.handleWeekStrictParse(O,S,H);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),Z=0;Z<7;Z++){const vt=No(new Date(Date.UTC(2e3,1)),Z,null,!0);if(H&&!this._fullWeekdaysParse[Z]&&(this._fullWeekdaysParse[Z]=new RegExp(`^${this.weekdays(vt,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[Z]=new RegExp(`^${this.weekdaysShort(vt,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[Z]=new RegExp(`^${this.weekdaysMin(vt,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[Z]||(ye=`^${this.weekdays(vt,"",!0)}|^${this.weekdaysShort(vt,"",!0)}|^${this.weekdaysMin(vt,"",!0)}`,this._weekdaysParse[Z]=new RegExp(ye.replace(".",""),"i")),!(ot(this._fullWeekdaysParse)&&ot(this._shortWeekdaysParse)&&ot(this._minWeekdaysParse)&&ot(this._weekdaysParse)))return;if(H&&"dddd"===S&&this._fullWeekdaysParse[Z].test(O))return Z;if(H&&"ddd"===S&&this._shortWeekdaysParse[Z].test(O))return Z;if(H&&"dd"===S&&this._minWeekdaysParse[Z].test(O))return Z;if(!H&&this._weekdaysParse[Z].test(O))return Z}}weekdaysRegex(O){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysStrictRegex:this._weekdaysRegex):(gt(this,"_weekdaysRegex")||(this._weekdaysRegex=qt),this._weekdaysStrictRegex&&O?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(O){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(gt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qt),this._weekdaysShortStrictRegex&&O?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(O){return this._weekdaysParseExact?(gt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(gt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(O){return"p"===O.toLowerCase().charAt(0)}meridiem(O,S,H){return O>11?H?"pm":"PM":H?"am":"AM"}formatLongDate(O){this._longDateFormat=this._longDateFormat?this._longDateFormat:kt;const S=this._longDateFormat[O],H=this._longDateFormat[O.toUpperCase()];return S||!H?S:(this._longDateFormat[O]=H.replace(/MMMM|MM|DD|dddd/g,Z=>Z.slice(1)),this._longDateFormat[O])}handleMonthStrictParse(O,S,H){const Z=O.toLocaleLowerCase();let ye,vt,Ai;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],ye=0;ye<12;++ye)Ai=new Date(2e3,ye),this._shortMonthsParse[ye]=this.monthsShort(Ai,"").toLocaleLowerCase(),this._longMonthsParse[ye]=this.months(Ai,"").toLocaleLowerCase();return H?"MMM"===S?(vt=this._shortMonthsParse.indexOf(Z),-1!==vt?vt:null):(vt=this._longMonthsParse.indexOf(Z),-1!==vt?vt:null):"MMM"===S?(vt=this._shortMonthsParse.indexOf(Z),-1!==vt?vt:(vt=this._longMonthsParse.indexOf(Z),-1!==vt?vt:null)):(vt=this._longMonthsParse.indexOf(Z),-1!==vt?vt:(vt=this._shortMonthsParse.indexOf(Z),-1!==vt?vt:null))}handleWeekStrictParse(O,S,H){let Z;const ye=O.toLocaleLowerCase();if(!this._weekdaysParse){let vt;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],vt=0;vt<7;++vt){const Ai=No(new Date(Date.UTC(2e3,1)),vt,null,!0);this._minWeekdaysParse[vt]=this.weekdaysMin(Ai).toLocaleLowerCase(),this._shortWeekdaysParse[vt]=this.weekdaysShort(Ai).toLocaleLowerCase(),this._weekdaysParse[vt]=this.weekdays(Ai,"").toLocaleLowerCase()}}if(ot(this._weekdaysParse)&&ot(this._shortWeekdaysParse)&&ot(this._minWeekdaysParse))return H?"dddd"===S?(Z=this._weekdaysParse.indexOf(ye),-1!==Z?Z:null):"ddd"===S?(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z?Z:null):(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null):"dddd"===S?(Z=this._weekdaysParse.indexOf(ye),-1!==Z||(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null)):"ddd"===S?(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z||(Z=this._weekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z?Z:null)):(Z=this._minWeekdaysParse.indexOf(ye),-1!==Z||(Z=this._weekdaysParse.indexOf(ye),-1!==Z)?Z:(Z=this._shortWeekdaysParse.indexOf(ye),-1!==Z?Z:null))}computeMonthsParse(){const O=[],S=[],H=[];let Z,ye;for(ye=0;ye<12;ye++)Z=new Date(2e3,ye),O.push(this.monthsShort(Z,"")),S.push(this.months(Z,"")),H.push(this.months(Z,"")),H.push(this.monthsShort(Z,""));for(O.sort(wn),S.sort(wn),H.sort(wn),ye=0;ye<12;ye++)O[ye]=$i(O[ye]),S[ye]=$i(S[ye]);for(ye=0;ye<24;ye++)H[ye]=$i(H[ye]);this._monthsRegex=new RegExp(`^(${H.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${O.join("|")})`,"i")}computeWeekdaysParse(){const O=[],S=[],H=[],Z=[];let ye;for(ye=0;ye<7;ye++){const vt=No(new Date(Date.UTC(2e3,1)),ye,null,!0),Ai=this.weekdaysMin(vt),pn=this.weekdaysShort(vt),Kr=this.weekdays(vt);O.push(Ai),S.push(pn),H.push(Kr),Z.push(Ai),Z.push(pn),Z.push(Kr)}for(O.sort(wn),S.sort(wn),H.sort(wn),Z.sort(wn),ye=0;ye<7;ye++)S[ye]=$i(S[ye]),H[ye]=$i(H[ye]),Z[ye]=$i(Z[ye]);this._weekdaysRegex=new RegExp(`^(${Z.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${H.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${S.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${O.join("|")})`,"i")}}function wn(y,O){return O.length-y.length}const jr={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:kt,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Q,monthsShort:pe,week:{dow:0,doy:6},weekdays:xe,weekdaysMin:qe,weekdaysShort:Le,meridiemParse:/[ap]\.?m?\.?/i};function Wr(y,O,S){const H=Math.min(y.length,O.length),Z=Math.abs(y.length-O.length);let vt,ye=0;for(vt=0;vt<H;vt++)(S&&y[vt]!==O[vt]||!S&&ii(y[vt])!==ii(O[vt]))&&ye++;return ye+Z}function va(y,O){Yi(null,[y,y.length,!1],null,O)}function as(y,O){return Oo(y,O.locale).toString()}function jo(y){return mo(y).toString()}function Oo(y,O=ls(),S){return me(y,O.firstDayOfWeek(),O.firstDayOfYear(),S).year}function mo(y,O){return me(y,1,4,O).year}function ta(y,O){Yi(y,null,null,function(S,H){let Z=function ia(y,O={}){return O._isUTC?O._offset||0:function sc(y){return 15*-Math.round(y.getTimezoneOffset()/15)}(y)}(S,{_isUTC:H.isUTC,_offset:H.offset}),ye="+";return Z<0&&(Z=-Z,ye="-"),ye+bn(~~(Z/60),2)+O+bn(~~Z%60,2)})}const Ol=/([\+\-]|\d\d)/gi;const Ls={},Js={};let Vs;function Ka(y){return y&&y.toLowerCase().replace("_","-")}function Pa(y){return Ls[y]||console.error(`Khronos locale error: please load locale "${y}" before using it`),Ls[y]}function ra(y,O){let S;return y&&($e(O)?S=ls(y):Fe(y)&&(S=gl(y,O)),S&&(Vs=S)),Vs&&Vs._abbr}function gl(y,O){if(null===O)return delete Ls[y],Vs=ls("en"),null;if(!O)return;let S=jr;if(O.abbr=y,null!=O.parentLocale){if(null==Ls[O.parentLocale])return Js[O.parentLocale]||(Js[O.parentLocale]=[]),Js[O.parentLocale].push({name:y,config:O}),null;S=Ls[O.parentLocale]._config}return Ls[y]=new dn(function na(y,O){const S=Object.assign({},y);for(const H in O)gt(O,H)&&(wt(y[H])&&wt(O[H])?(S[H]={},Object.assign(S[H],y[H]),Object.assign(S[H],O[H])):null!=O[H]?S[H]=O[H]:delete S[H]);for(const H in y)gt(y,H)&&!gt(O,H)&&wt(y[H])&&(S[H]=Object.assign({},S[H]));return S}(S,O)),Js[y]&&Js[y].forEach(function(H){gl(H.name,H.config)}),ra(y),Ls[y]}function ls(y){return function Wo(){Ls.en||(ra("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(y){const O=y%10;return y+(1===ii(y%100/10)?"th":1===O?"st":2===O?"nd":3===O?"rd":"th")}}),function Dr(){Yi("w",["ww",2,!1],"wo",function(y,O){return function ss(y,O=ls(),S){return O.week(y,S)}(y,O.locale).toString(10)}),Yi("W",["WW",2,!1],"Wo",function(y){return function Zr(y,O){return me(y,1,4,O).week}(y).toString(10)}),ri("week","w"),ri("isoWeek","W"),Ze("week",5),Ze("isoWeek",5),pt("w",er),pt("ww",er,kn),pt("W",er),pt("WW",er,kn),Et(["w","ww","W","WW"],function(y,O,S,H){return O[H.substr(0,1)]=ii(y),S})}(),function fl(){Yi(null,["gg",2,!1],null,function(y,O){return(Oo(y,O.locale)%100).toString()}),Yi(null,["GG",2,!1],null,function(y){return(mo(y)%100).toString()}),va("gggg",as),va("ggggg",as),va("GGGG",jo),va("GGGGG",jo),ri("weekYear","gg"),ri("isoWeekYear","GG"),Ze("weekYear",1),Ze("isoWeekYear",1),pt("G",Be),pt("g",Be),pt("GG",er,kn),pt("gg",er,kn),pt("GGGG",Xr,Fr),pt("gggg",Xr,Fr),pt("GGGGG",Ct,Cs),pt("ggggg",Ct,Cs),Et(["gggg","ggggg","GGGG","GGGGG"],function(y,O,S,H){return O[H.substr(0,2)]=ii(y),S}),Et(["gg","GG"],function(y,O,S,H){return O[H]=fi(y),S})}(),function xi(){Yi("Y",null,null,function(y,O){const S=Ui(y,O.isUTC);return S<=9999?S.toString(10):`+${S}`}),Yi(null,["YY",2,!1],null,function(y,O){return(Ui(y,O.isUTC)%100).toString(10)}),Yi(null,["YYYY",4,!1],null,Yt),Yi(null,["YYYYY",5,!1],null,Yt),Yi(null,["YYYYYY",6,!0],null,Yt),ri("year","y"),Ze("year",1),pt("Y",Be),pt("YY",er,kn),pt("YYYY",Xr,Fr),pt("YYYYY",Ct,Cs),pt("YYYYYY",Ct,Cs),un(["YYYYY","YYYYYY"],dt),un("YYYY",function(y,O,S){return O[dt]=2===y.length?fi(y):ii(y),S}),un("YY",function(y,O,S){return O[dt]=fi(y),S}),un("Y",function(y,O,S){return O[dt]=parseInt(y,10),S})}(),function Yc(){Yi("z",null,null,function(y,O){return O.isUTC?"UTC":""}),Yi("zz",null,null,function(y,O){return O.isUTC?"Coordinated Universal Time":""})}(),function xr(){Yi("X",null,null,function(y){return function tn(y){return Math.floor(y.valueOf()/1e3)}(y).toString(10)}),Yi("x",null,null,function(y){return y.valueOf().toString(10)}),pt("x",Be),pt("X",zt),un("X",function(y,O,S){return S._d=new Date(1e3*parseFloat(y)),S}),un("x",function(y,O,S){return S._d=new Date(ii(y)),S})}(),function Hc(){Yi("s",["ss",2,!1],null,function(y,O){return or(y,O.isUTC).toString(10)}),ri("second","s"),Ze("second",15),pt("s",er),pt("ss",er,kn),un(["s","ss"],vi)}(),function Ks(){Yi("Q",null,"Qo",function(y,O){return function Ws(y,O=!1){return Math.ceil((Zi(y,O)+1)/3)}(y,O.isUTC).toString(10)}),ri("quarter","Q"),Ze("quarter",7),pt("Q",ar),un("Q",function(y,O,S){return O[Zt]=3*(ii(y)-1),S})}(),function ml(){ta("Z",":"),ta("ZZ",""),pt("Z",lt),pt("ZZ",lt),un(["Z","ZZ"],function(y,O,S){return S._useUTC=!0,S._tzm=function Za(y,O){const S=(O||"").match(y);if(null===S)return null;const Z=S[S.length-1].match(Ol)||["-","0","0"],ye=60*parseInt(Z[1],10)+ii(Z[2]);return 0===ye?0:"+"===Z[0]?ye:-ye}(lt,y),S})}(),function fe(){Yi("M",["MM",2,!1],"Mo",function(y,O){return(Zi(y,O.isUTC)+1).toString(10)}),Yi("MMM",null,null,function(y,O){return O.locale.monthsShort(y,O.format,O.isUTC)}),Yi("MMMM",null,null,function(y,O){return O.locale.months(y,O.format,O.isUTC)}),ri("month","M"),Ze("month",8),pt("M",er),pt("MM",er,kn),pt("MMM",function(y,O){return O.monthsShortRegex(y)}),pt("MMMM",function(y,O){return O.monthsRegex(y)}),un(["M","MM"],function(y,O,S){return O[Zt]=ii(y)-1,S}),un(["MMM","MMMM"],function(y,O,S,H){const Z=S._locale.monthsParse(y,H,S._strict);return null!=Z?O[Zt]=Z:ft(S).invalidMonth=!!y,S})}(),function qa(){Yi("m",["mm",2,!1],null,function(y,O){return Mr(y,O.isUTC).toString(10)}),ri("minute","m"),Ze("minute",14),pt("m",er),pt("mm",er,kn),un(["m","mm"],Gi)}(),function Un(){let y;for(Yi("S",null,null,function(S,H){return(~~(gr(S,H.isUTC)/100)).toString(10)}),Yi(null,["SS",2,!1],null,function(S,H){return(~~(gr(S,H.isUTC)/10)).toString(10)}),Yi(null,["SSS",3,!1],null,function(S,H){return gr(S,H.isUTC).toString(10)}),Yi(null,["SSSS",4,!1],null,function(S,H){return(10*gr(S,H.isUTC)).toString(10)}),Yi(null,["SSSSS",5,!1],null,function(S,H){return(100*gr(S,H.isUTC)).toString(10)}),Yi(null,["SSSSSS",6,!1],null,function(S,H){return(1e3*gr(S,H.isUTC)).toString(10)}),Yi(null,["SSSSSSS",7,!1],null,function(S,H){return(1e4*gr(S,H.isUTC)).toString(10)}),Yi(null,["SSSSSSSS",8,!1],null,function(S,H){return(1e5*gr(S,H.isUTC)).toString(10)}),Yi(null,["SSSSSSSSS",9,!1],null,function(S,H){return(1e6*gr(S,H.isUTC)).toString(10)}),ri("millisecond","ms"),Ze("millisecond",16),pt("S",Tr,ar),pt("SS",Tr,kn),pt("SSS",Tr,dr),y="SSSS";y.length<=9;y+="S")pt(y,Ie);function O(S,H,Z){return H[Ei]=ii(1e3*parseFloat(`0.${S}`)),Z}for(y="S";y.length<=9;y+="S")un(y,O)}(),function Uo(){function y(Z,ye){return ji(Z,ye)%12||12}function S(Z,ye){Yi(Z,null,null,function(vt,Ai){return Ai.locale.meridiem(ji(vt,Ai.isUTC),Mr(vt,Ai.isUTC),ye)})}function H(Z,ye){return ye._meridiemParse}Yi("H",["HH",2,!1],null,function(Z,ye){return ji(Z,ye.isUTC).toString(10)}),Yi("h",["hh",2,!1],null,function(Z,ye){return y(Z,ye.isUTC).toString(10)}),Yi("k",["kk",2,!1],null,function(Z,ye){return function O(Z,ye){return ji(Z,ye)||24}(Z,ye.isUTC).toString(10)}),Yi("hmm",null,null,function(Z,ye){return`${y(Z,ye.isUTC)}${bn(Mr(Z,ye.isUTC),2)}`}),Yi("hmmss",null,null,function(Z,ye){return`${y(Z,ye.isUTC)}${bn(Mr(Z,ye.isUTC),2)}${bn(or(Z,ye.isUTC),2)}`}),Yi("Hmm",null,null,function(Z,ye){return`${ji(Z,ye.isUTC)}${bn(Mr(Z,ye.isUTC),2)}`}),Yi("Hmmss",null,null,function(Z,ye){return`${ji(Z,ye.isUTC)}${bn(Mr(Z,ye.isUTC),2)}${bn(or(Z,ye.isUTC),2)}`}),S("a",!0),S("A",!1),ri("hour","h"),Ze("hour",13),pt("a",H),pt("A",H),pt("H",er),pt("h",er),pt("k",er),pt("HH",er,kn),pt("hh",er,kn),pt("kk",er,kn),pt("hmm",br),pt("hmmss",mr),pt("Hmm",br),pt("Hmmss",mr),un(["H","HH"],gi),un(["k","kk"],function(Z,ye,vt){const Ai=ii(Z);return ye[gi]=24===Ai?0:Ai,vt}),un(["a","A"],function(Z,ye,vt){return vt._isPm=vt._locale.isPM(Z),vt._meridiem=Z,vt}),un(["h","hh"],function(Z,ye,vt){return ye[gi]=ii(Z),ft(vt).bigHour=!0,vt}),un("hmm",function(Z,ye,vt){const Ai=Z.length-2;return ye[gi]=ii(Z.substr(0,Ai)),ye[Gi]=ii(Z.substr(Ai)),ft(vt).bigHour=!0,vt}),un("hmmss",function(Z,ye,vt){const Ai=Z.length-4,pn=Z.length-2;return ye[gi]=ii(Z.substr(0,Ai)),ye[Gi]=ii(Z.substr(Ai,2)),ye[vi]=ii(Z.substr(pn)),ft(vt).bigHour=!0,vt}),un("Hmm",function(Z,ye,vt){const Ai=Z.length-2;return ye[gi]=ii(Z.substr(0,Ai)),ye[Gi]=ii(Z.substr(Ai)),vt}),un("Hmmss",function(Z,ye,vt){const Ai=Z.length-4,pn=Z.length-2;return ye[gi]=ii(Z.substr(0,Ai)),ye[Gi]=ii(Z.substr(Ai,2)),ye[vi]=ii(Z.substr(pn)),vt})}(),function q(){Yi("DDD",["DDDD",3,!1],"DDDo",function(y){return ie(y).toString(10)}),ri("dayOfYear","DDD"),Ze("dayOfYear",4),pt("DDD",Tr),pt("DDDD",dr),un(["DDD","DDDD"],function(y,O,S){return S._dayOfYear=ii(y),S})}(),function ol(){Yi("d",null,"do",function(y,O){return en(y,O.isUTC).toString(10)}),Yi("dd",null,null,function(y,O){return O.locale.weekdaysMin(y,O.format,O.isUTC)}),Yi("ddd",null,null,function(y,O){return O.locale.weekdaysShort(y,O.format,O.isUTC)}),Yi("dddd",null,null,function(y,O){return O.locale.weekdays(y,O.format,O.isUTC)}),Yi("e",null,null,function(y,O){return gn(y,O.locale,O.isUTC).toString(10)}),Yi("E",null,null,function(y,O){return function D(y,O){return en(y,O)||7}(y,O.isUTC).toString(10)}),ri("day","d"),ri("weekday","e"),ri("isoWeekday","E"),Ze("day",11),Ze("weekday",11),Ze("isoWeekday",11),pt("d",er),pt("e",er),pt("E",er),pt("dd",function(y,O){return O.weekdaysMinRegex(y)}),pt("ddd",function(y,O){return O.weekdaysShortRegex(y)}),pt("dddd",function(y,O){return O.weekdaysRegex(y)}),Et(["dd","ddd","dddd"],function(y,O,S,H){const Z=S._locale.weekdaysParse(y,H,S._strict);return null!=Z?O.d=Z:ft(S).invalidWeekday=!!y,S}),Et(["d","e","E"],function(y,O,S,H){return O[H]=ii(y),S})}(),function Re(){Yi("D",["DD",2,!1],"Do",function(y,O){return _n(y,O.isUTC).toString(10)}),ri("date","D"),Ze("date",9),pt("D",er),pt("DD",er,kn),pt("Do",function(y,O){return O._dayOfMonthOrdinalParse||O._ordinalParse}),un(["D","DD"],ni),un("Do",function(y,O,S){return O[ni]=ii(y.match(er)[0]),S})}())}(),y?function _a(y){let O,S,H=0;for(;H<y.length;){const Z=Ka(y[H]).split("-");let ye=Z.length;for(O=Ka(y[H+1]),O=O?O.split("-"):null;ye>0;){if(S=Pa(Z.slice(0,ye).join("-")),S)return S;if(O&&O.length>=ye&&Wr(Z,O,!0)>=ye-1)break;ye--}H++}return null}(ot(y)?y:[y]):Vs}const $r=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],zn=$r.reduce((y,O)=>(y[O]=!0,y),{});function Tc(y){return y<0?Math.floor(y):Math.ceil(y)}function vl(y){return 4800*y/146097}function sa(y){return 146097*y/4800}let ds=Math.round;const go_ss=44,go_s=45,go_m=45,go_h=22,go_d=26,go_M=11;function _u(y,O,S,H,Z){return Z.relativeTime(O||1,!!S,y,H)}class vo{constructor(O,S={}){this._data={},this._locale=ls(),this._locale=S&&S._locale||ls();const Z=O.year||0,ye=O.quarter||0,vt=O.month||0,Ai=O.week||0,pn=O.day||0,Kr=O.hours||0,Ss=O.minutes||0,Do=O.seconds||0,Ma=O.milliseconds||0;return this._isValid=function Rl(y){if(Object.keys(y).some(H=>H in zn&&null===y[H]||isNaN(y[H])))return!1;let S=!1;for(let H=0;H<$r.length;++H)if(y[$r[H]]){if(S)return!1;y[$r[H]]!==ii(y[$r[H]])&&(S=!0)}return!0}(O),this._milliseconds=+Ma+1e3*Do+60*Ss*1e3+1e3*Kr*60*60,this._days=+pn+7*Ai,this._months=+vt+3*ye+12*Z,function Ja(y){let O=y._milliseconds,S=y._days,H=y._months;const Z=y._data;O>=0&&S>=0&&H>=0||O<=0&&S<=0&&H<=0||(O+=864e5*Tc(sa(H)+S),S=0,H=0),Z.milliseconds=O%1e3;const ye=De(O/1e3);Z.seconds=ye%60;const vt=De(ye/60);Z.minutes=vt%60;const Ai=De(vt/60);Z.hours=Ai%24,S+=De(Ai/24);const pn=De(vl(S));H+=pn,S-=Tc(sa(pn));const Kr=De(H/12);return H%=12,Z.day=S,Z.month=H,Z.year=Kr,y}(this)}isValid(){return this._isValid}humanize(O){if(!this.isValid())return this.localeData().invalidDate;const S=this.localeData();let H=function oa(y,O,S){const H=Ya(y).abs(),Z=ds(H.as("s")),ye=ds(H.as("m")),vt=ds(H.as("h")),Ai=ds(H.as("d")),pn=ds(H.as("M")),Kr=ds(H.as("y")),Ss=Z<=go_ss&&["s",Z]||Z<go_s&&["ss",Z]||ye<=1&&["m"]||ye<go_m&&["mm",ye]||vt<=1&&["h"]||vt<go_h&&["hh",vt]||Ai<=1&&["d"]||Ai<go_d&&["dd",Ai]||pn<=1&&["M"]||pn<go_M&&["MM",pn]||Kr<=1&&["y"]||["yy",Kr];return _u.apply(null,[Ss[0],Ss[1],O,+y>0,S])}(this,!O,S);return O&&(H=S.pastFuture(+this,H)),S.postformat(H)}localeData(){return this._locale}locale(O){return O?(this._locale=ls(O)||this._locale,this):this._locale._abbr}abs(){const O=Math.abs,S=this._data;return this._milliseconds=O(this._milliseconds),this._days=O(this._days),this._months=O(this._months),S.milliseconds=O(S.milliseconds),S.seconds=O(S.seconds),S.minutes=O(S.minutes),S.hours=O(S.hours),S.month=O(S.month),S.year=O(S.year),this}as(O){if(!this.isValid())return NaN;let S,H;const Z=this._milliseconds,ye=Xt(O);if("month"===ye||"year"===ye)return S=this._days+Z/864e5,H=this._months+vl(S),"month"===ye?H:H/12;switch(S=this._days+Math.round(sa(this._months)),ye){case"week":return S/7+Z/6048e5;case"day":return S+Z/864e5;case"hours":return 24*S+Z/36e5;case"minutes":return 1440*S+Z/6e4;case"seconds":return 86400*S+Z/1e3;case"milliseconds":return Math.floor(864e5*S)+Z;default:throw new Error(`Unknown unit ${ye}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ii(this._months/12):NaN}}function $s(y){if(null==y._isValid){const O=ft(y),S=Array.prototype.some.call(O.parsedDateParts,function(Z){return null!=Z});let H=!isNaN(y._d&&y._d.getTime())&&O.overflow<0&&!O.empty&&!O.invalidMonth&&!O.invalidWeekday&&!O.weekdayMismatch&&!O.nullInput&&!O.invalidFormat&&!O.userInvalidated&&(!O.meridiem||O.meridiem&&S);if(y._strict&&(H=H&&0===O.charsLeftOver&&0===O.unusedTokens.length&&void 0===O.bigHour),null!=Object.isFrozen&&Object.isFrozen(y))return H;y._isValid=H}return y._isValid}function Qa(y,O){return y._d=new Date(NaN),Object.assign(ft(y),O||{userInvalidated:!0}),y}const el=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aa=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kc=/Z|[+-]\d\d(?::?\d\d)?/,Qs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],ba=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],la=/^\/?Date\((\-?\d+)/i,Eo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},ac=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function So(y){if(!Fe(y._i))return y;const O=y._i,S=el.exec(O)||aa.exec(O);let H,Z,ye,vt,Ai,pn;if(!S)return y._isValid=!1,y;for(Ai=0,pn=Qs.length;Ai<pn;Ai++)if(Qs[Ai][1].exec(S[1])){Z=Qs[Ai][0],H=!1!==Qs[Ai][2];break}if(null==Z)return y._isValid=!1,y;if(S[3]){for(Ai=0,pn=ba.length;Ai<pn;Ai++)if(ba[Ai][1].exec(S[3])){ye=(S[2]||" ")+ba[Ai][0];break}if(null==ye)return y._isValid=!1,y}if(!H&&null!=ye)return y._isValid=!1,y;if(S[4]){if(!kc.exec(S[4]))return y._isValid=!1,y;vt="Z"}return y._f=Z+(ye||"")+(vt||""),Fa(y)}function Ns(y){const O=parseInt(y,10);return O<=49?O+2e3:O}function zo(y){if(!Fe(y._i))return y;const O=ac.exec(function ms(y){return y.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(y._i));if(!O)return function Ra(y){return y._isValid=!1,y}(y);const S=function Ac(y,O,S,H,Z,ye){const vt=[Ns(y),pe.indexOf(O),parseInt(S,10),parseInt(H,10),parseInt(Z,10)];return ye&&vt.push(parseInt(ye,10)),vt}(O[4],O[3],O[2],O[5],O[6],O[7]);return function Ro(y,O,S){return!y||Le.indexOf(y)===new Date(O[0],O[1],O[2]).getDay()||(ft(S).weekdayMismatch=!0,S._isValid=!1,!1)}(O[1],S,y)&&(y._a=S,y._tzm=function tl(y,O,S){if(y)return Eo[y];if(O)return 0;{const H=parseInt(S,10),Z=H%100;return(H-Z)/100*60+Z}}(O[8],O[9],O[10]),y._d=Nn.apply(null,y._a),y._d.setUTCMinutes(y._d.getUTCMinutes()-y._tzm),ft(y).rfc2822=!0),y}function Os(y,O,S,H,Z=0){const ye=ls(S||"en");if(!ye)throw new Error(`Locale "${S}" is not defined, please add it with "defineLocale(...)"`);const Ai=function Mc(y,O,S,H,Z=0){if(!nt(y))return S.invalidDate;const ye=il(O,S);return fn[ye]=fn[ye]||function on(y){const O=y.match(Qt),S=O.length,H=new Array(S);for(let Z=0;Z<S;Z++)H[Z]=Gn[O[Z]]?Gn[O[Z]]:Zn(O[Z]);return function(Z,ye,vt,Ai=0){let pn="";for(let Kr=0;Kr<S;Kr++)pn+=mt(H[Kr])?H[Kr].call(null,Z,{format:y,locale:ye,isUTC:vt,offset:Ai}):H[Kr];return pn}}(ye),fn[ye](y,S,H,Z)}(y,O||(H?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),ye,H,Z);return Ai&&ye.postformat(Ai)}function il(y,O){let S=y,H=5;const Z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ye=vt=>O.formatLongDate(vt)||vt;for(Z.lastIndex=0;H>=0&&Z.test(S);)S=S.replace(Z,ye),Z.lastIndex=0,H-=1;return S}function Fo(y,O,S){return y??O??S}function nl(y){const O=[];let S,H,Z;if(y._d)return y;const ye=function za(y){const O=new Date;return y._useUTC?[O.getUTCFullYear(),O.getUTCMonth(),O.getUTCDate()]:[O.getFullYear(),O.getMonth(),O.getDate()]}(y);for(y._w&&null==y._a[ni]&&null==y._a[Zt]&&function ca(y){let O,S,H,Z,ye,vt,Ai;const pn=y._w;if(null!=pn.GG||null!=pn.W||null!=pn.E)Z=1,ye=4,O=Fo(pn.GG,y._a[dt],me(new Date,1,4).year),S=Fo(pn.W,1),H=Fo(pn.E,1),(H<1||H>7)&&(Ai=!0);else{Z=y._locale._week.dow,ye=y._locale._week.doy;const Kr=me(new Date,Z,ye);O=Fo(pn.gg,y._a[dt],Kr.year),S=Fo(pn.w,Kr.week),null!=pn.d?(H=pn.d,(H<0||H>6)&&(Ai=!0)):null!=pn.e?(H=pn.e+Z,(pn.e<0||pn.e>6)&&(Ai=!0)):H=Z}S<1||S>Ee(O,Z,ye)?ft(y)._overflowWeeks=!0:null!=Ai?ft(y)._overflowWeekday=!0:(vt=function we(y,O,S,H,Z){const Ai=1+7*(O-1)+(7+S-H)%7+ge(y,H,Z);let pn,Kr;return Ai<=0?(pn=y-1,Kr=Pi(pn)+Ai):Ai>Pi(y)?(pn=y+1,Kr=Ai-Pi(y)):(pn=y,Kr=Ai),{year:pn,dayOfYear:Kr}}(O,S,H,Z,ye),y._a[dt]=vt.year,y._dayOfYear=vt.dayOfYear)}(y),null!=y._dayOfYear&&(Z=Fo(y._a[dt],ye[dt]),(y._dayOfYear>Pi(Z)||0===y._dayOfYear)&&(ft(y)._overflowDayOfYear=!0),H=new Date(Date.UTC(Z,0,y._dayOfYear)),y._a[Zt]=H.getUTCMonth(),y._a[ni]=H.getUTCDate()),S=0;S<3&&null==y._a[S];++S)y._a[S]=O[S]=ye[S];for(;S<7;S++)y._a[S]=O[S]=null==y._a[S]?2===S?1:0:y._a[S];24===y._a[gi]&&0===y._a[Gi]&&0===y._a[vi]&&0===y._a[Ei]&&(y._nextDay=!0,y._a[gi]=0),y._d=(y._useUTC?Nn:Dn).apply(null,O);const vt=y._useUTC?y._d.getUTCDay():y._d.getDay();return null!=y._tzm&&y._d.setUTCMinutes(y._d.getUTCMinutes()-y._tzm),y._nextDay&&(y._a[gi]=24),y._w&&typeof y._w.d<"u"&&y._w.d!==vt&&(ft(y).weekdayMismatch=!0),y}function Bl(y){let O;const S=y._a;return S&&-2===ft(y).overflow&&(O=S[Zt]<0||S[Zt]>11?Zt:S[ni]<1||S[ni]>yt(S[dt],S[Zt])?ni:S[gi]<0||S[gi]>24||24===S[gi]&&(0!==S[Gi]||0!==S[vi]||0!==S[Ei])?gi:S[Gi]<0||S[Gi]>59?Gi:S[vi]<0||S[vi]>59?vi:S[Ei]<0||S[Ei]>999?Ei:-1,ft(y)._overflowDayOfYear&&(O<dt||O>ni)&&(O=ni),ft(y)._overflowWeeks&&-1===O&&(O=Fi),ft(y)._overflowWeekday&&-1===O&&(O=Ji),ft(y).overflow=O),y}const xa="ISO_8601",Vc="RFC_2822";function Fa(y){if(y._f===xa)return So(y);if(y._f===Vc)return zo(y);if(y._a=[],ft(y).empty=!0,ot(y._f)||!y._i&&0!==y._i)return y;let O=y._i.toString(),S=0;const H=O.length,Z=il(y._f,y._locale).match(Qt)||[];let ye,vt,Ai,pn;for(ye=0;ye<Z.length;ye++)vt=Z[ye],Ai=(O.match(ui(vt,y._locale))||[])[0],Ai&&(pn=O.substr(0,O.indexOf(Ai)),pn.length>0&&ft(y).unusedInput.push(pn),O=O.slice(O.indexOf(Ai)+Ai.length),S+=Ai.length),Gn[vt]?(Ai?ft(y).empty=!1:ft(y).unusedTokens.push(vt),St(vt,Ai,y)):y._strict&&!Ai&&ft(y).unusedTokens.push(vt);return ft(y).charsLeftOver=H-S,O.length>0&&ft(y).unusedInput.push(O),y._a[gi]<=12&&!0===ft(y).bigHour&&y._a[gi]>0&&(ft(y).bigHour=void 0),ft(y).parsedDateParts=y._a.slice(0),ft(y).meridiem=y._meridiem,y._a[gi]=function Uu(y,O,S){let H=O;if(null==S)return H;if(null!=y.meridiemHour)return y.meridiemHour(H,S);if(null==y.isPM)return H;const Z=y.isPM(S);return Z&&H<12&&(H+=12),!Z&&12===H&&(H=0),H}(y._locale,y._a[gi],y._meridiem),nl(y),Bl(y)}function ua(y){const O=Bl(function wa(y){let O=y._i;const S=y._f;return y._locale=y._locale||ls(y._l),null===O||void 0===S&&""===O?Qa(y,{nullInput:!0}):(Fe(O)&&(y._i=O=y._locale.preparse(O,S)),Ue(O)?(y._d=F(O),y):(ot(S)?function yu(y){let O,S,H,Z,ye;if(!y._f||0===y._f.length)return ft(y).invalidFormat=!0,Qa(y);for(ye=0;ye<y._f.length;ye++)Z=0,O=Object.assign({},y),null!=y._useUTC&&(O._useUTC=y._useUTC),O._f=y._f[ye],Fa(O),$s(O)&&(Z+=ft(O).charsLeftOver,Z+=10*ft(O).unusedTokens.length,ft(O).score=Z,(null==H||Z<H)&&(H=Z,S=O));Object.assign(y,S||O)}(y):S?Fa(y):function Nl(y){const O=y._i;if($e(O))y._d=new Date;else if(Ue(O))y._d=F(O);else if(Fe(O))!function Fl(y){if(!Fe(y._i))return y;const O=la.exec(y._i);null!==O?y._d=new Date(+O[1]):(So(y),!1!==y._isValid||(delete y._isValid,zo(y),!1!==y._isValid||(delete y._isValid,Qa(y))))}(y);else if(ot(O)&&O.length){const S=O.slice(0);y._a=S.map(H=>Fe(H)?parseInt(H,10):H),nl(y)}else if(wt(O))!function Gc(y){if(y._d)return y;const O=y._i;if(wt(O)){const S=function Vt(y){const O={};let S,H;for(H in y)gt(y,H)&&(S=Xt(H),S&&(O[S]=y[H]));return O}(O);y._a=[S.year,S.month,S.day,S.hours,S.minutes,S.seconds,S.milliseconds].map(H=>Fe(H)?parseInt(H,10):H)}return nl(y)}(y);else{if(!Pt(O))return Qa(y);y._d=new Date(O)}}(y),$s(y)||(y._d=null),y))}(y));return O._d=new Date(null!=O._d?O._d.getTime():NaN),$s(Object.assign({},O,{_isValid:null}))||(O._d=new Date(NaN)),O}function Yl(y,O,S,H,Z){return Ue(y)?y:function Dc(y,O,S,H,Z){const ye={};let vt=y;return(wt(vt)&&function si(y){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(y).length;let O;for(O in y)if(y.hasOwnProperty(O))return!1;return!0}(vt)||ot(vt)&&0===vt.length)&&(vt=void 0),ye._useUTC=ye._isUTC=Z,ye._l=S,ye._i=vt,ye._f=O,ye._strict=H,ua(ye)}(y,O,S,H,Z)._d}function da(y){return y instanceof Date?new Date(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()):null}function rl(y){return y<0?-1*Math.round(-1*y):Math.round(y)}function hs(y,O,S="milliseconds"){return!(!y||!O)&&("milliseconds"===S?y.valueOf()>O.valueOf():O.valueOf()<U(y,S).valueOf())}function eo(y,O,S="milliseconds"){return!(!y||!O)&&("milliseconds"===S?y.valueOf()<O.valueOf():$(y,S).valueOf()<O.valueOf())}function To(y,O,S="milliseconds"){if(!y||!O)return!1;if("milliseconds"===S)return y.valueOf()===O.valueOf();const H=O.valueOf();return U(y,S).valueOf()<=H&&H<=$(y,S).valueOf()}const sl=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,_l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ya(y,O,S={}){const H=function Ha(y,O){if(null==y)return{};if(function zl(y){return y instanceof vo}(y))return{milliseconds:y._milliseconds,day:y._days,month:y._months};if(Pt(y))return O?{[O]:y}:{milliseconds:y};if(Fe(y)){let S=sl.exec(y);if(S){const H="-"===S[1]?-1:1;return{year:0,day:ii(S[ni])*H,hours:ii(S[gi])*H,minutes:ii(S[Gi])*H,seconds:ii(S[vi])*H,milliseconds:ii(rl(1e3*ii(S[Ei])))*H}}if(S=_l.exec(y),S){const H="-"===S[1]?-1:1;return{year:$o(S[2],H),month:$o(S[3],H),week:$o(S[4],H),day:$o(S[5],H),hours:$o(S[6],H),minutes:$o(S[7],H),seconds:$o(S[8],H)}}}if(wt(y)&&("from"in y||"to"in y)){const S=function Ca(y,O){if(!nt(y)||!nt(O))return{milliseconds:0,months:0};let S;const H=function vu(y,O,S={}){if(!S._isUTC)return y;const H=F(O),Z=6e4*(S._offset||0),ye=y.valueOf()-H.valueOf()+Z;return H.setTime(H.valueOf()+ye),H}(O,y,{_offset:y.getTimezoneOffset()});return eo(y,H)?S=yl(y,H):(S=yl(H,y),S.milliseconds=-S.milliseconds,S.months=-S.months),S}(Yl(y.from),Yl(y.to));return{milliseconds:S.milliseconds,month:S.months}}return y}(y,O);return new vo(H,S)}function $o(y,O){const S=y&&parseFloat(y.replace(",","."));return(isNaN(S)?0:S)*O}function yl(y,O){const S={milliseconds:0,months:0};return S.months=Zi(O)-Zi(y)+12*(Ui(O)-Ui(y)),hs(Xo(F(y),S.months,"month"),O)&&--S.months,S.milliseconds=+O-+Xo(F(y),S.months,"month"),S}function Xo(y,O,S,H){return Va(y,Ya(O,S),1,H)}function Va(y,O,S,H){const Z=O._milliseconds,ye=rl(O._days),vt=rl(O._months);return vt&&o(y,Zi(y,H)+vt*S,H),ye&&A(y,_n(y,H)+ye*S,H),Z&&function I(y,O){y.setTime(O)}(y,function xn(y){return y.getTime()}(y)+Z*S),F(y)}function No(y,O,S=ls(),H){const Z=en(y,H),ye=function bl(y,O){if(!Fe(y))return y;const S=parseInt(y,10);if(!isNaN(S))return S;const H=O.weekdaysParse(y);return Pt(H)?H:null}(O,S);return Xo(y,ye-Z,"day")}function gn(y,O=ls(),S){return(en(y,S)+7-O.firstDayOfWeek())%7}const We=function(y){return 0===y?0:1===y?1:2===y?2:y%100>=3&&y%100<=10?3:y%100>=11?4:5},Ht={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},ai=function(y){return function(O,S){const H=We(O);let Z=Ht[y][We(O)];return 2===H&&(Z=Z[S?0:1]),Z.replace(/%d/i,O.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),ai("s"),ai("s"),ai("m"),ai("m"),ai("h"),ai("h"),ai("d"),ai("d"),ai("M"),ai("M"),ai("y"),ai("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const Xs="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),Ga="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(y,O){let S,H=[];for(S=0;S<12;S++)H[S]=new RegExp("^"+y[S]+"$|^"+O[S]+"$","i")})(Xs,Ga),function(y){let O,S=[];for(O=0;O<12;O++)S[O]=new RegExp("^"+y[O]+"$","i")}(Ga),function(y){let O,S=[];for(O=0;O<12;O++)S[O]=new RegExp("^"+y[O]+"$","i")}(Xs),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const _o={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:y=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===y,meridiem:(y,O,S)=>y<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(y,O){const S=_o.longDateFormat[O]?_o.longDateFormat[O]:O;return-1!==S.indexOf("YYYY",S.length-4)?y.substr(0,y.length-4)+(parseInt(y.substr(y.length-4),10)-543):y},getFullYear:(y,O=!1)=>543+(O?y.getUTCFullYear():y.getFullYear())};function Es(y){return function(O){return y+"\u043e"+(11===ji(O)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),Es("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),Es("[\u0417\u0430\u0432\u0442\u0440\u0430 "),Es("[\u0412\u0447\u043e\u0440\u0430 "),Es("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var Uc=Rt(140),ko=Rt(6504),El=Rt(6700),Ua=Rt(756),hc=Rt(3252),Wc=Rt(3920),wu=Rt(208);class tr extends El.g{constructor(O,S,H){super(O),S.pipe((0,Wc.y)(Ua.M)).pipe((0,wu.K)((vt,Ai)=>Ai?H(vt,Ai):vt,O)).subscribe(vt=>this.next(vt))}}class pc extends hc._{constructor(O,S,H){super(),this._dispatcher=O,this._reducer=S,this.source=H}select(O){return(this.source?.pipe((0,ze.k)(O))||(new hc._).pipe((0,ze.k)(O))).pipe((0,Oe.a)())}lift(O){const S=new pc(this._dispatcher,this._reducer,this);return S.operator=O,S}dispatch(O){this._dispatcher.next(O)}next(O){this._dispatcher.next(O)}error(O){this._dispatcher.error(O)}complete(){}}var ao=Rt(1368);function ng(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function kf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(Z.minuteStep))}),k.wR5(2,"span",2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canIncrementMinutes||!S.isEditable)}}function md(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0"),k.C$Y())}function $u(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(Z.secondsStep))}),k.wR5(2,"span",2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canIncrementSeconds||!S.isEditable)}}function Af(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function fp(y,O){1&y&&k.wR5(0,"td")}function Lh(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0:\xa0"),k.C$Y())}function $c(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4)(1,"input",5),k.qCj("wheel",function(Z){k.usT(S);const ye=k.GaO();return ye.prevDef(Z),k.CGJ(ye.changeMinutes(ye.minuteStep*ye.wheelSign(Z),"wheel"))})("keydown.ArrowUp",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(Z.minuteStep,"key"))})("keydown.ArrowDown",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(-Z.minuteStep,"key"))})("change",function(Z){k.usT(S);const ye=k.GaO();return k.CGJ(ye.updateMinutes(Z.target))}),k.C$Y()()}if(2&y){const S=k.GaO();k.eAK("has-error",S.invalidMinutes),k.yG2(),k.eAK("is-invalid",S.invalidMinutes),k.E7m("placeholder",S.minutesPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.minutes),k.e48("aria-label",S.labelMinutes)}}function Oh(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0:\xa0"),k.C$Y())}function mp(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4)(1,"input",5),k.qCj("wheel",function(Z){k.usT(S);const ye=k.GaO();return ye.prevDef(Z),k.CGJ(ye.changeSeconds(ye.secondsStep*ye.wheelSign(Z),"wheel"))})("keydown.ArrowUp",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(Z.secondsStep,"key"))})("keydown.ArrowDown",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(-Z.secondsStep,"key"))})("change",function(Z){k.usT(S);const ye=k.GaO();return k.CGJ(ye.updateSeconds(Z.target))}),k.C$Y()()}if(2&y){const S=k.GaO();k.eAK("has-error",S.invalidSeconds),k.yG2(),k.eAK("is-invalid",S.invalidSeconds),k.E7m("placeholder",S.secondsPlaceholder)("readonly",S.readonlyInput)("disabled",S.disabled)("value",S.seconds),k.e48("aria-label",S.labelSeconds)}}function Mf(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function rg(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"button",8),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.toggleMeridian())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.isEditable||!S.canToggleMeridian),k.E7m("disabled",!S.isEditable||!S.canToggleMeridian),k.yG2(),k.oRS("",S.meridian," ")}}function sg(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function og(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeMinutes(-Z.minuteStep))}),k.wR5(2,"span",7),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canDecrementMinutes||!S.isEditable)}}function gp(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0"),k.C$Y())}function Qd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td")(1,"a",1),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.changeSeconds(-Z.secondsStep))}),k.wR5(2,"span",7),k.C$Y()()}if(2&y){const S=k.GaO();k.yG2(),k.eAK("disabled",!S.canDecrementSeconds||!S.isEditable)}}function gd(y,O){1&y&&(k.I0R(0,"td"),k.OEk(1,"\xa0\xa0\xa0"),k.C$Y())}function Xc(y,O){1&y&&k.wR5(0,"td")}let Ao=(()=>{class y{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#s=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(S){return{type:y.WRITE_VALUE,payload:S}}changeHours(S){return{type:y.CHANGE_HOURS,payload:S}}changeMinutes(S){return{type:y.CHANGE_MINUTES,payload:S}}changeSeconds(S){return{type:y.CHANGE_SECONDS,payload:S}}setTime(S){return{type:y.SET_TIME_UNIT,payload:S}}updateControls(S){return{type:y.UPDATE_CONTROLS,payload:S}}static#o=this.\u0275fac=function(H){return new(H||y)};static#a=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const fc=10,Cu=24,Eu=12,Gs=60,Df=60;function Xu(y){return!(!y||y instanceof Date&&isNaN(y.getHours()))&&("string"!=typeof y||Xu(new Date(y)))}function Ph(y,O){return!(y.min&&O<y.min||y.max&&O>y.max)}function Zc(y){return typeof y>"u"?NaN:"number"==typeof y?y:parseInt(y,fc)}function Zo(y,O=!1){const S=Zc(y);return isNaN(S)||S<0||S>(O?Eu:Cu)?NaN:S}function eh(y){const O=Zc(y);return isNaN(O)||O<0||O>Gs?NaN:O}function If(y){const O=Zc(y);return isNaN(O)||O<0||O>Df?NaN:O}function Hs(y){return"string"==typeof y?new Date(y):y}function An(y,O){if(!y)return An(Pc(new Date,0,0,0),O);if(!O)return y;let S=y.getHours(),H=y.getMinutes(),Z=y.getSeconds();return O.hour&&(S+=Zc(O.hour)),O.minute&&(H+=Zc(O.minute)),O.seconds&&(Z+=Zc(O.seconds)),Pc(y,S,H,Z)}function ki(y,O){let S=Zo(O.hour);const H=eh(O.minute),Z=If(O.seconds)||0;return O.isPM&&12!==S&&(S+=Eu),y?isNaN(S)||isNaN(H)?y:Pc(y,S,H,Z):isNaN(S)||isNaN(H)?y:Pc(new Date,S,H,Z)}function Pc(y,O,S,H){const Z=new Date(y.getFullYear(),y.getMonth(),y.getDate(),O,S,H,y.getMilliseconds());return Z.setFullYear(y.getFullYear()),Z.setMonth(y.getMonth()),Z.setDate(y.getDate()),Z}function qo(y){const O=y.toString();return O.length>1?O:`0${O}`}function qc(y,O){return!isNaN(Zo(y,O))}function mc(y){return!isNaN(eh(y))}function Sl(y){return!isNaN(If(y))}function vd(y,O="0",S="0",H){return qc(y,H)&&mc(O)&&Sl(S)}function Rc(y,O){return!(y.readonlyInput||y.disabled||O&&("wheel"===O.source&&!y.mousewheel||"key"===O.source&&!y.arrowkeys))}function vp(y){const{hourStep:O,minuteStep:S,secondsStep:H,readonlyInput:Z,disabled:ye,mousewheel:vt,arrowkeys:Ai,showSpinners:pn,showMeridian:Kr,showSeconds:Ss,meridians:Do,min:Ma,max:bc}=y;return{hourStep:O,minuteStep:S,secondsStep:H,readonlyInput:Z,disabled:ye,mousewheel:vt,arrowkeys:Ai,showSpinners:pn,showMeridian:Kr,showSeconds:Ss,meridians:Do,min:Ma,max:bc}}let Rh=(()=>{class y{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const _p={value:void 0,config:new Rh,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function yd(y=_p,O){switch(O.type){case Ao.WRITE_VALUE:return Object.assign({},y,{value:O.payload});case Ao.CHANGE_HOURS:{if(!Rc(y.config,O.payload)||!function ih(y,O){return!(!y.step||y.step>0&&!O.canIncrementHours||y.step<0&&!O.canDecrementHours)}(O.payload,y.controls))return y;const S=An(y.value,{hour:O.payload.step});return!y.config.max&&!y.config.min||Ph(y.config,S)?Object.assign({},y,{value:S}):y}case Ao.CHANGE_MINUTES:{if(!Rc(y.config,O.payload)||!function _d(y,O){return!(!y.step||y.step>0&&!O.canIncrementMinutes||y.step<0&&!O.canDecrementMinutes)}(O.payload,y.controls))return y;const S=An(y.value,{minute:O.payload.step});return!y.config.max&&!y.config.min||Ph(y.config,S)?Object.assign({},y,{value:S}):y}case Ao.CHANGE_SECONDS:{if(!Rc(y.config,O.payload)||!function Lf(y,O){return!(!y.step||y.step>0&&!O.canIncrementSeconds||y.step<0&&!O.canDecrementSeconds)}(O.payload,y.controls))return y;const S=An(y.value,{seconds:O.payload.step});return!y.config.max&&!y.config.min||Ph(y.config,S)?Object.assign({},y,{value:S}):y}case Ao.SET_TIME_UNIT:{if(!Rc(y.config))return y;const S=ki(y.value,O.payload);return Object.assign({},y,{value:S})}case Ao.UPDATE_CONTROLS:{const S=function Of(y,O){const{min:Z,max:ye,hourStep:vt,minuteStep:Ai,secondsStep:pn,showSeconds:Kr}=O,Ss={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!y)return Ss;if(ye){const Do=An(y,{hour:vt});if(Ss.canIncrementHours=ye>Do&&y.getHours()+vt<24,!Ss.canIncrementHours){const Ma=An(y,{minute:Ai});Ss.canIncrementMinutes=Kr?ye>Ma:ye>=Ma}if(!Ss.canIncrementMinutes){const Ma=An(y,{seconds:pn});Ss.canIncrementSeconds=ye>=Ma}y.getHours()<12&&(Ss.canToggleMeridian=An(y,{hour:12})<ye)}if(Z){const Do=An(y,{hour:-vt});if(Ss.canDecrementHours=Z<Do,!Ss.canDecrementHours){const Ma=An(y,{minute:-Ai});Ss.canDecrementMinutes=Kr?Z<Ma:Z<=Ma}if(!Ss.canDecrementMinutes){const Ma=An(y,{seconds:-pn});Ss.canDecrementSeconds=Z<=Ma}y.getHours()>=12&&(Ss.canToggleMeridian=An(y,{hour:-12})>Z)}return Ss}(y.value,O.payload),H={value:y.value,config:O.payload,controls:S};return y.config.showMeridian!==H.config.showMeridian&&y.value&&(H.value=new Date(y.value)),Object.assign({},y,H)}default:return y}}let Kc=(()=>{class y extends pc{constructor(){const S=new El.g({type:"[mini-ngrx] dispatcher init"});super(S,yd,new tr(_p,S,yd))}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const Jc={provide:ko.Y6,useExisting:(0,k.wd)(()=>nh),multi:!0};let nh=(()=>{class y{constructor(S,H,Z,ye){this._cd=H,this._store=Z,this._timepickerActions=ye,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new k._w7,this.meridianChange=new k._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=S,Object.assign(this,this.config),this.timepickerSub=Z.select(vt=>vt.value).subscribe(vt=>{this._renderTime(vt),this.onChange(vt),this._store.dispatch(this._timepickerActions.updateControls(vp(this)))}),Z.select(vt=>vt.controls).subscribe(vt=>{const Ai=vd(this.hours,this.minutes,this.seconds,this.isPM()),pn=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Ai;this.isValid.emit(pn),Object.assign(this,vt),H.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(S){S.preventDefault()}wheelSign(S){return-1*Math.sign(S.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(vp(this)))}changeHours(S,H=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:S,source:H}))}changeMinutes(S,H=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:S,source:H}))}changeSeconds(S,H=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:S,source:H}))}updateHours(S){this.resetValidation(),this.hours=S.value;const H=qc(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||H))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(S){this.resetValidation(),this.minutes=S.value;const H=mc(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||H))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(S){this.resetValidation(),this.seconds=S.value;const H=Sl(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||H))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function th(y,O,S){const H=ki(new Date,y);return!(!H||O&&H>O||S&&H<S)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function Ta(y,O,S){return 0===y.length||0===O.length||0===S.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const Z=vd(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||Z))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(S){Xu(S)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(Hs(S)))):null==S&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(S){this.onChange=S}registerOnTouched(S){this.onTouched=S}setDisabledState(S){this.disabled=S,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(S){if(!S||!Xu(S))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const H=Hs(S);if(!H)return;let ye=H.getHours();this.showMeridian&&(this.meridian=this.meridians[ye>=12?1:0],this.meridianChange.emit(this.meridian),ye%=12,0===ye&&(ye=12)),this.hours=qo(ye),this.minutes=qo(H.getMinutes()),this.seconds=qo(H.getUTCSeconds())}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(Rh),k.GI1(k.kD9),k.GI1(Kc),k.GI1(Ao))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[k.M5G([Jc,Kc]),k.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(H,Z){1&H&&(k.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),k.qCj("click",function(){return Z.changeHours(Z.hourStep)}),k.wR5(5,"span",2),k.C$Y()(),k.yuY(6,ng,2,0,"td",3)(7,kf,3,2,"td",3)(8,md,2,0,"td",3)(9,$u,3,2,"td",3)(10,Af,2,0,"td",3)(11,fp,1,0,"td",3),k.C$Y(),k.I0R(12,"tr")(13,"td",4)(14,"input",5),k.qCj("wheel",function(vt){return Z.prevDef(vt),Z.changeHours(Z.hourStep*Z.wheelSign(vt),"wheel")})("keydown.ArrowUp",function(){return Z.changeHours(Z.hourStep,"key")})("keydown.ArrowDown",function(){return Z.changeHours(-Z.hourStep,"key")})("change",function(vt){return Z.updateHours(vt.target)}),k.C$Y()(),k.yuY(15,Lh,2,0,"td",3)(16,$c,2,9,"td",6)(17,Oh,2,0,"td",3)(18,mp,2,9,"td",6)(19,Mf,2,0,"td",3)(20,rg,3,4,"td",3),k.C$Y(),k.I0R(21,"tr",0)(22,"td")(23,"a",1),k.qCj("click",function(){return Z.changeHours(-Z.hourStep)}),k.wR5(24,"span",7),k.C$Y()(),k.yuY(25,sg,2,0,"td",3)(26,og,3,2,"td",3)(27,gp,2,0,"td",3)(28,Qd,3,2,"td",3)(29,gd,2,0,"td",3)(30,Xc,1,0,"td",3),k.C$Y()()()),2&H&&(k.yG2(2),k.E7m("hidden",!Z.showSpinners),k.yG2(2),k.eAK("disabled",!Z.canIncrementHours||!Z.isEditable),k.yG2(2),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(2),k.eAK("has-error",Z.invalidHours),k.yG2(),k.eAK("is-invalid",Z.invalidHours),k.E7m("placeholder",Z.hoursPlaceholder)("readonly",Z.readonlyInput)("disabled",Z.disabled)("value",Z.hours),k.e48("aria-label",Z.labelHours),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("hidden",!Z.showSpinners),k.yG2(2),k.eAK("disabled",!Z.canDecrementHours||!Z.isEditable),k.yG2(2),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showMinutes),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showSeconds),k.yG2(),k.E7m("ngIf",Z.showMeridian),k.yG2(),k.E7m("ngIf",Z.showMeridian))},dependencies:[ao.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return y})(),bd=(()=>{class y{static forRoot(){return{ngModule:y,providers:[Ao,Kc]}}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275mod=k.a4G({type:y});static#i=this.\u0275inj=k.s3X({providers:[Kc],imports:[ao.MD]})}return y})();var Mo=Rt(9684),Su=Rt(6928),ll=Rt(6040),Qc=Rt(5657),js=Rt(7995),cl=Rt(6552);function xd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"button",2),k.qCj("click",function(){const ye=k.usT(S).$implicit,vt=k.GaO();return k.CGJ(vt.selectFromRanges(ye))}),k.OEk(1),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO();k.eAK("selected",S.value===H.selectedRange),k.yG2(),k.oRS(" ",S.label," ")}}function pr(y,O){1&y&&k.wR5(0,"bs-current-date",4)}function Pf(y,O){1&y&&k.wR5(0,"bs-timepicker")}const rh=[[["bs-datepicker-navigation-view"]],"*"],Yo=["bs-datepicker-navigation-view","*"],yp=["bsDatepickerDayDecorator",""];function bp(y,O){if(1&y){const S=k.KQA();k.SAx(0),k.OEk(1," \u200b "),k.I0R(2,"button",2),k.qCj("click",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.view("month"))}),k.I0R(3,"span"),k.OEk(4),k.C$Y()(),k.k70()}if(2&y){const S=k.GaO();k.yG2(2),k.E7m("disabled",S.isDisabled),k.yG2(2),k.cNF(S.calendar.monthTitle)}}function xp(y,O){1&y&&k.wR5(0,"th")}function Rf(y,O){if(1&y&&(k.I0R(0,"th",5),k.OEk(1),k.C$Y()),2&y){const S=O.index,H=k.GaO();k.yG2(),k.oRS("",H.calendar.weekdays[S]," ")}}function Tu(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",11),k.qCj("click",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.selectWeek(Z))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO(2).index,H=k.GaO();k.yG2(),k.cNF(H.calendar.weekNumbers[S])}}function ka(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",12),k.qCj("click",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.selectWeek(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.weekHoverHandler(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO(2).$implicit,ye=k.GaO();return k.CGJ(ye.weekHoverHandler(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO(2).index,H=k.GaO();k.yG2(),k.cNF(H.calendar.weekNumbers[S])}}function zf(y,O){if(1&y&&(k.I0R(0,"td",8),k.yuY(1,Tu,2,1,"span",9)(2,ka,2,1,"span",10),k.C$Y()),2&y){const S=k.GaO(2);k.eAK("active-week",S.isWeekHovered),k.yG2(),k.E7m("ngIf",S.isiOS),k.yG2(),k.E7m("ngIf",!S.isiOS)}}function Ff(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",17),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k._6D("tooltip",S.tooltipText),k.E7m("day",S),k.yG2(),k.oRS("",S.label," 3")}}function wd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",18),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))})("mouseenter",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!0))})("mouseleave",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.hoverDay(Z,!1))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k.E7m("day",S),k.yG2(),k.oRS("",S.label," 2")}}function Bf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"span",19),k.qCj("click",function(){k.usT(S);const Z=k.GaO().$implicit,ye=k.GaO(2);return k.CGJ(ye.selectDay(Z))}),k.OEk(1),k.C$Y()}if(2&y){const S=k.GaO().$implicit;k.E7m("day",S),k.yG2(),k.oRS("",S.label," 1")}}function ag(y,O){if(1&y&&(k.I0R(0,"td",13),k.yuY(1,Ff,2,3,"span",14)(2,wd,2,2,"span",15)(3,Bf,2,2,"span",16),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",!S.isiOS&&S.isShowTooltip),k.yG2(),k.E7m("ngIf",!S.isiOS&&!S.isShowTooltip),k.yG2(),k.E7m("ngIf",S.isiOS)}}function wp(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,zf,3,4,"td",6)(2,ag,4,3,"td",7),k.C$Y()),2&y){const S=O.$implicit,H=k.GaO();k.yG2(),k.E7m("ngIf",H.options&&H.options.showWeekNumbers),k.yG2(),k.E7m("ngForOf",S.days)}}function Nf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4),k.qCj("click",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.viewMonth(ye))})("mouseenter",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.hoverMonth(ye,!0))})("mouseleave",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.hoverMonth(ye,!1))}),k.I0R(1,"span"),k.OEk(2),k.C$Y()()}if(2&y){const S=O.$implicit;k.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),k.yG2(),k.eAK("selected",S.isSelected),k.yG2(),k.cNF(S.label)}}function jl(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,Nf,3,7,"td",3),k.C$Y()),2&y){const S=O.$implicit;k.yG2(),k.E7m("ngForOf",S)}}function Cp(y,O){if(1&y){const S=k.KQA();k.I0R(0,"td",4),k.qCj("click",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.viewYear(ye))})("mouseenter",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.hoverYear(ye,!0))})("mouseleave",function(){const ye=k.usT(S).$implicit,vt=k.GaO(2);return k.CGJ(vt.hoverYear(ye,!1))}),k.I0R(1,"span"),k.OEk(2),k.C$Y()()}if(2&y){const S=O.$implicit;k.eAK("disabled",S.isDisabled)("is-highlighted",S.isHovered),k.yG2(),k.eAK("selected",S.isSelected),k.yG2(),k.cNF(S.label)}}function sh(y,O){if(1&y&&(k.I0R(0,"tr"),k.yuY(1,Cp,3,7,"td",3),k.C$Y()),2&y){const S=O.$implicit;k.yG2(),k.E7m("ngForOf",S)}}const qu=["startTP"];function Zs(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-days-calendar-view",11),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.dayHoverHandler(Z))})("onHoverWeek",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.weekHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.daySelectHandler(Z))}),k.wVc(1,"async"),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)("isDisabled",H.isDatePickerDisabled)("options",k.kDX(1,5,H.options$))}}function Ep(y,O){if(1&y&&k.wR5(0,"timepicker",13,16),2&y){const S=k.GaO(4);k.E7m("disabled",S.isDatePickerDisabled)}}function Sp(y,O){if(1&y&&(k.I0R(0,"div",12),k.wR5(1,"timepicker",13,14),k.yuY(3,Ep,2,1,"timepicker",15),k.C$Y()),2&y){const S=k.GaO(3);k.yG2(),k.E7m("disabled",S.isDatePickerDisabled),k.yG2(2),k.E7m("ngIf",S.isRangePicker)}}function Ul(y,O){if(1&y&&(k.SAx(0),k.I0R(1,"div",8),k.yuY(2,Zs,2,7,"bs-days-calendar-view",9),k.wVc(3,"async"),k.C$Y(),k.yuY(4,Sp,4,2,"div",10),k.k70()),2&y){const S=k.GaO(2);k.yG2(2),k.E7m("ngForOf",k.kDX(3,2,S.daysCalendar$)),k.yG2(2),k.E7m("ngIf",S.withTimepicker)}}function lg(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-month-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)}}function Wl(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,lg,1,3,"bs-month-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.monthsCalendar))}}function oh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-years-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)}}function $l(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,oh,1,3,"bs-years-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.yearsCalendar))}}function Aa(y,O){1&y&&(k.I0R(0,"div",19)(1,"button",20),k.OEk(2,"Apply"),k.C$Y(),k.I0R(3,"button",21),k.OEk(4,"Cancel"),k.C$Y()())}function Yf(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",24)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.setToday())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),k.yG2(2),k.cNF(S.todayBtnLbl)}}function Cd(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",26)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.clearDate())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),k.yG2(2),k.cNF(S.clearBtnLbl)}}function Hf(y,O){if(1&y&&(k.I0R(0,"div",19),k.yuY(1,Yf,3,7,"div",22)(2,Cd,3,7,"div",23),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",S.showTodayBtn),k.yG2(),k.E7m("ngIf",S.showClearBtn)}}function Ku(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",27)(1,"bs-custom-date-view",28),k.qCj("onSelect",function(Z){k.usT(S);const ye=k.GaO(2);return k.CGJ(ye.setRangeOnCalendar(Z))}),k.C$Y()()}if(2&y){const S=k.GaO(2);k.yG2(),k.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function Tp(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",1)(1,"div",2),k.qCj("@datepickerAnimation.done",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.positionServiceEnable())}),k.I0R(2,"div",3),k.wVc(3,"async"),k.yuY(4,Ul,5,4,"ng-container",4)(5,Wl,3,3,"div",5)(6,$l,3,3,"div",5),k.C$Y(),k.yuY(7,Aa,5,0,"div",6)(8,Hf,3,2,"div",6),k.C$Y(),k.yuY(9,Ku,2,3,"div",7),k.C$Y()}if(2&y){const S=k.GaO();k.E7m("ngClass",S.containerClass),k.yG2(),k.E7m("@datepickerAnimation",S.animationState),k.yG2(),k.E7m("ngSwitch",k.kDX(3,9,S.viewMode)),k.yG2(2),k.E7m("ngSwitchCase","day"),k.yG2(),k.E7m("ngSwitchCase","month"),k.yG2(),k.E7m("ngSwitchCase","year"),k.yG2(),k.E7m("ngIf",!1),k.yG2(),k.E7m("ngIf",S.showTodayBtn||S.showClearBtn),k.yG2(),k.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}const Fh=["endTP"];function tu(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-days-calendar-view",11),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.dayHoverHandler(Z))})("onHoverWeek",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.weekHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.daySelectHandler(Z))}),k.wVc(1,"async"),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)("isDisabled",H.isDatePickerDisabled)("options",k.kDX(1,5,H.options$))}}function jf(y,O){if(1&y&&k.wR5(0,"timepicker",13,16),2&y){const S=k.GaO(4);k.E7m("disabled",S.isDatePickerDisabled)}}function Ap(y,O){if(1&y&&(k.I0R(0,"div",12),k.wR5(1,"timepicker",13,14),k.yuY(3,jf,2,1,"timepicker",15),k.C$Y()),2&y){const S=k.GaO(3);k.yG2(),k.E7m("disabled",S.isDatePickerDisabled),k.yG2(2),k.E7m("ngIf",S.isRangePicker)}}function Mp(y,O){if(1&y&&(k.SAx(0),k.I0R(1,"div",8),k.yuY(2,tu,2,7,"bs-days-calendar-view",9),k.wVc(3,"async"),k.C$Y(),k.yuY(4,Ap,4,2,"div",10),k.k70()),2&y){const S=k.GaO(2);k.yG2(2),k.E7m("ngForOf",k.kDX(3,2,S.daysCalendar$)),k.yG2(2),k.E7m("ngIf",S.withTimepicker)}}function Bh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-month-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.monthSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)}}function cg(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,Bh,1,3,"bs-month-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.monthsCalendar))}}function Au(y,O){if(1&y){const S=k.KQA();k.I0R(0,"bs-years-calendar-view",18),k.qCj("onNavigate",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.navigateTo(Z))})("onViewMode",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.setViewMode(Z))})("onHover",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearHoverHandler(Z))})("onSelect",function(Z){k.usT(S);const ye=k.GaO(3);return k.CGJ(ye.yearSelectHandler(Z))}),k.C$Y()}if(2&y){const S=O.$implicit,H=k.GaO(3);k.eAK("bs-datepicker-multiple",H.multipleCalendars),k.E7m("calendar",S)}}function Dp(y,O){if(1&y&&(k.I0R(0,"div",8),k.yuY(1,Au,1,3,"bs-years-calendar-view",17),k.wVc(2,"async"),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngForOf",k.kDX(2,1,S.yearsCalendar))}}function Mu(y,O){1&y&&(k.I0R(0,"div",19)(1,"button",20),k.OEk(2,"Apply"),k.C$Y(),k.I0R(3,"button",21),k.OEk(4,"Cancel"),k.C$Y()())}function fs(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",24)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.setToday())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("today-left","left"===S.todayPos)("today-right","right"===S.todayPos)("today-center","center"===S.todayPos),k.yG2(2),k.cNF(S.todayBtnLbl)}}function Nh(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",26)(1,"button",25),k.qCj("click",function(){k.usT(S);const Z=k.GaO(3);return k.CGJ(Z.clearDate())}),k.OEk(2),k.C$Y()()}if(2&y){const S=k.GaO(3);k.eAK("clear-left","left"===S.clearPos)("clear-right","right"===S.clearPos)("clear-center","center"===S.clearPos),k.yG2(2),k.cNF(S.clearBtnLbl)}}function gc(y,O){if(1&y&&(k.I0R(0,"div",19),k.yuY(1,fs,3,7,"div",22)(2,Nh,3,7,"div",23),k.C$Y()),2&y){const S=k.GaO(2);k.yG2(),k.E7m("ngIf",S.showTodayBtn),k.yG2(),k.E7m("ngIf",S.showClearBtn)}}function zc(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",27)(1,"bs-custom-date-view",28),k.qCj("onSelect",function(Z){k.usT(S);const ye=k.GaO(2);return k.CGJ(ye.setRangeOnCalendar(Z))}),k.C$Y()()}if(2&y){const S=k.GaO(2);k.yG2(),k.E7m("selectedRange",S.chosenRange)("ranges",S.customRanges)("customRangeLabel",S.customRangeBtnLbl)}}function vc(y,O){if(1&y){const S=k.KQA();k.I0R(0,"div",1)(1,"div",2),k.qCj("@datepickerAnimation.done",function(){k.usT(S);const Z=k.GaO();return k.CGJ(Z.positionServiceEnable())}),k.I0R(2,"div",3),k.wVc(3,"async"),k.yuY(4,Mp,5,4,"ng-container",4)(5,cg,3,3,"div",5)(6,Dp,3,3,"div",5),k.C$Y(),k.yuY(7,Mu,5,0,"div",6)(8,gc,3,2,"div",6),k.C$Y(),k.yuY(9,zc,2,3,"div",7),k.C$Y()}if(2&y){const S=k.GaO();k.E7m("ngClass",S.containerClass),k.yG2(),k.E7m("@datepickerAnimation",S.animationState),k.yG2(),k.E7m("ngSwitch",k.kDX(3,9,S.viewMode)),k.yG2(2),k.E7m("ngSwitchCase","day"),k.yG2(),k.E7m("ngSwitchCase","month"),k.yG2(),k.E7m("ngSwitchCase","year"),k.yG2(),k.E7m("ngIf",!1),k.yG2(),k.E7m("ngIf",S.showTodayBtn||S.showClearBtn),k.yG2(),k.E7m("ngIf",S.customRanges&&S.customRanges.length>0)}}let Wa=(()=>{class y{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Ad="220ms cubic-bezier(0, 0, 0.2, 1)",ch=(0,Mo.gV)("datepickerAnimation",[(0,Mo.K2)("animated-down",(0,Mo.wb)({height:"*",overflow:"hidden"})),(0,Mo.aK)("* => animated-down",[(0,Mo.wb)({height:0,overflow:"hidden"}),(0,Mo.Cs)(Ad)]),(0,Mo.K2)("animated-up",(0,Mo.wb)({height:"*",overflow:"hidden"})),(0,Mo.aK)("* => animated-up",[(0,Mo.wb)({height:"*",overflow:"hidden"}),(0,Mo.Cs)(Ad)]),(0,Mo.aK)("* => unanimated",(0,Mo.Cs)("0s"))]);class Md{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Su.wH,this.selectedTimeSub=new Su.wH}set minDate(O){this._effects?.setMinDate(O)}set maxDate(O){this._effects?.setMaxDate(O)}set daysDisabled(O){this._effects?.setDaysDisabled(O)}set datesDisabled(O){this._effects?.setDatesDisabled(O)}set datesEnabled(O){this._effects?.setDatesEnabled(O)}set isDisabled(O){this._effects?.setDisabled(O)}set dateCustomClasses(O){this._effects?.setDateCustomClasses(O)}set dateTooltipTexts(O){this._effects?.setDateTooltipTexts(O)}set daysCalendar$(O){this._daysCalendar$=O,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(S=>{this.multipleCalendars=!!S&&S.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(O){}navigateTo(O){}dayHoverHandler(O){}weekHoverHandler(O){}monthHoverHandler(O){}yearHoverHandler(O){}timeSelectHandler(O,S){}daySelectHandler(O){}monthSelectHandler(O){}yearSelectHandler(O){}setRangeOnCalendar(O){}setToday(){}clearDate(){}_stopPropagation(O){O.stopPropagation()}}let lo=(()=>{class y{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#s=this.NAVIGATE_TO="[datepicker] change view date";static#o=this.SET_OPTIONS="[datepicker] update render options";static#a=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#u=this.SET_MAX_DATE="[datepicker] set max date";static#d=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#h=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#p=this.SET_DATESENABLED="[datepicker] set dates enabled";static#f=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#v=this.SET_LOCALE="[datepicker] set datepicker locale";static#_=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:y.CALCULATE}}format(){return{type:y.FORMAT}}flag(){return{type:y.FLAG}}select(S){return{type:y.SELECT,payload:S}}selectTime(S,H){return{type:y.SELECT_TIME,payload:{date:S,index:H}}}changeViewMode(S){return{type:y.CHANGE_VIEWMODE,payload:S}}navigateTo(S){return{type:y.NAVIGATE_TO,payload:S}}navigateStep(S){return{type:y.NAVIGATE_OFFSET,payload:S}}setOptions(S){return{type:y.SET_OPTIONS,payload:S}}selectRange(S){return{type:y.SELECT_RANGE,payload:S}}hoverDay(S){return{type:y.HOVER,payload:S.isHovered?S.cell.date:null}}minDate(S){return{type:y.SET_MIN_DATE,payload:S}}maxDate(S){return{type:y.SET_MAX_DATE,payload:S}}daysDisabled(S){return{type:y.SET_DAYSDISABLED,payload:S}}datesDisabled(S){return{type:y.SET_DATESDISABLED,payload:S}}datesEnabled(S){return{type:y.SET_DATESENABLED,payload:S}}isDisabled(S){return{type:y.SET_IS_DISABLED,payload:S}}setDateCustomClasses(S){return{type:y.SET_DATE_CUSTOM_CLASSES,payload:S}}setDateTooltipTexts(S){return{type:y.SET_DATE_TOOLTIP_TEXTS,payload:S}}setLocale(S){return{type:y.SET_LOCALE,payload:S}}static#b=this.\u0275fac=function(H){return new(H||y)};static#x=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),Dd=(()=>{class y{constructor(){this._defaultLocale="en",this._locale=new El.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(S){S!==this.currentLocale&&this._locale.next(S)}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),Id=(()=>{class y{constructor(S,H){this._actions=S,this._localeService=H,this._subs=[]}init(S){return this._store=S,this}setValue(S){this._store?.dispatch(this._actions.select(S))}setRangeValue(S){this._store?.dispatch(this._actions.selectRange(S))}setMinDate(S){return this._store?.dispatch(this._actions.minDate(S)),this}setMaxDate(S){return this._store?.dispatch(this._actions.maxDate(S)),this}setDaysDisabled(S){return this._store?.dispatch(this._actions.daysDisabled(S)),this}setDatesDisabled(S){return this._store?.dispatch(this._actions.datesDisabled(S)),this}setDatesEnabled(S){return this._store?.dispatch(this._actions.datesEnabled(S)),this}setDisabled(S){return this._store?.dispatch(this._actions.isDisabled(S)),this}setDateCustomClasses(S){return this._store?.dispatch(this._actions.setDateCustomClasses(S)),this}setDateTooltipTexts(S){return this._store?.dispatch(this._actions.setDateTooltipTexts(S)),this}setOptions(S){const H=Object.assign({locale:this._localeService.currentLocale},S);return this._store?.dispatch(this._actions.setOptions(H)),this}setBindings(S){return this._store?(S.selectedTime=this._store.select(H=>H.selectedTime).pipe((0,hn.I)(H=>!!H)),S.daysCalendar$=this._store.select(H=>H.flaggedMonths).pipe((0,hn.I)(H=>!!H)),S.monthsCalendar=this._store.select(H=>H.flaggedMonthsCalendar).pipe((0,hn.I)(H=>!!H)),S.yearsCalendar=this._store.select(H=>H.yearsCalendarFlagged).pipe((0,hn.I)(H=>!!H)),S.viewMode=this._store.select(H=>H.view?.mode),S.options$=(0,ll.E)([this._store.select(H=>H.showWeekNumbers),this._store.select(H=>H.displayMonths)]).pipe((0,ze.k)(H=>({showWeekNumbers:H[0],displayMonths:H[1]}))),this):this}setEventHandlers(S){return S.setViewMode=H=>{this._store?.dispatch(this._actions.changeViewMode(H))},S.navigateTo=H=>{this._store?.dispatch(this._actions.navigateStep(H.step))},S.dayHoverHandler=H=>{const Z=H.cell;Z.isOtherMonth||Z.isDisabled||(this._store?.dispatch(this._actions.hoverDay(H)),Z.isHovered=H.isHovered)},S.monthHoverHandler=H=>{H.cell.isHovered=H.isHovered},S.yearHoverHandler=H=>{H.cell.isHovered=H.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(S=>S.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(S=>S.monthsModel).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(S=>S.formattedMonths).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedDate).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.selectedRange).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.yearsCalendarModel).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.hoveredDate).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateCustomClasses).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(S=>S.dateTooltipTexts).pipe((0,hn.I)(S=>!!S)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(S=>this._store?.dispatch(this._actions.setLocale(S)))),this):this}destroy(){for(const S of this._subs)S.unsubscribe()}static#e=this.\u0275fac=function(H){return new(H||y)(k.CoB(lo),k.CoB(Dd))};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})();const Vh={date:new Date,mode:"day"},iu=Object.assign(new Wa,{locale:"en",view:Vh,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function uh(y,O,S){const H=O&&eo($(y,"month"),O,"day"),Z=S&&hs(U(y,"month"),S,"day");return H||Z||!1}function Fc(y,O,S){const H=O&&eo($(y,"year"),O,"day"),Z=S&&hs(U(y,"year"),S,"day");return H||Z||!1}function _c(y,O,S){return!!(O&&ot(O)&&O.length)&&(S&&"year"===S&&!O[0].getDate()?O.some(H=>To(y,H,"year")):O.some(H=>To(y,H,"date")))}function ed(y,O,S){return!!(O&&ot(O)&&O.length)&&!O.some(H=>To(y,H,S||"date"))}function dh(y,O=0){const S=y&&y.yearsCalendarModel&&y.yearsCalendarModel[O];return S?.years[0]&&S.years[0][0]&&S.years[0][0].date}function Xf(y,O){return!y||!O||!y.length&&!y[0].value||y.forEach(S=>(!S||!S.value||S.value instanceof Date||!(S.value instanceof Array&&S.value.length)||(S.value=qf(S.value,O)),y)),y}function Zf(y,O){return!y||!O||y instanceof Array&&!y.length||y instanceof Date?y:qf(y,O)}function qf(y,O){return y instanceof Array?y.map(H=>H&&(hs(H,O,"date")&&(H=O),H)):y}function Pp(y){return y&&yc(y)}function Ld(y){return y?.length&&y.map(O=>O&&yc(O)),y}function yc(y){const O=new Date;return y.setMilliseconds(O.getMilliseconds()),y.setSeconds(O.getSeconds()),y.setMinutes(O.getMinutes()),y.setHours(O.getHours()),y}function Rp(y,O){let S=y.initialDate;const H=new Array(y.height);for(let Z=0;Z<y.height;Z++){H[Z]=new Array(y.width);for(let ye=0;ye<y.width;ye++)H[Z][ye]=O(S),S=Tt(S,y.shift)}return H}function jh(y,O){const S=function Si(y){return Dn(y.getFullYear(),y.getMonth(),1,y.getHours(),y.getMinutes(),y.getSeconds())}(y),H=function Gh(y,O){if(function Lr(y,O){return y.getDay()===Number(O)}(y,O.firstDayOfWeek))return y;const H=function Qu(y,O){const S=Number(O);if(isNaN(S))return 0;if(0===S)return y;const H=y-S%7;return H<0?H+7:H}(en(y),O.firstDayOfWeek);return Tt(y,{day:-H})}(S,O);return{daysMatrix:Rp({width:O.width||0,height:O.height||0,initialDate:H,shift:{day:1}},vt=>vt),month:S}}function Kf(y,O,S){return y.map(H=>H[0]?Os(H[0],O,S):"")}function Jf(y){const O=ls(y),S=O.weekdaysShort(),H=O.firstDayOfWeek();return[...S.slice(H),...S.slice(0,H)]}function $a(y,O){return!O||y>=O}const hg=4,Wh=3,Qf={month:1};function em(y,O){const S=U(y,"year");return{months:Rp({width:Wh,height:hg,initialDate:S,shift:Qf},ye=>({date:ye,label:Os(ye,O.monthLabel,O.locale)})),monthTitle:"",yearTitle:Os(y,O.yearTitle,O.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const Od=4,Pd=4,td=Od*Pd,ru=-1*(Math.floor(td/2)-1),hh={year:1};function tm(y,O,S){const H=function Rd(y,O){return O&&y.getFullYear()>=O.getFullYear()&&y.getFullYear()<O.getFullYear()+td?O:Tt(y,{year:ru})}(y,S),ye=Rp({width:Pd,height:Od,initialDate:H,shift:hh},Ai=>({date:Ai,label:Os(Ai,O.yearLabel,O.locale)})),vt=function fg(y,O){return`${Os(y[0][0].date,O.yearTitle,O.locale)} - ${Os(y[Od-1][Pd-1].date,O.yearTitle,O.locale)}`}(ye,O);return{years:ye,monthTitle:"",yearTitle:vt,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function ph(y,O){!y||!isNaN(y.getTime())||(y.setHours(O.getHours()),y.setMinutes(O.getMinutes()),y.setSeconds(O.getSeconds()),y.setMilliseconds(O.getMilliseconds()))}function im(y=iu,O){switch(O.type){case lo.CALCULATE:return function mg(y){if(!y.view)return y;let O;O=y.displayOneMonthRange&&Bp(y.view.date,y.minDate,y.maxDate)?1:y.displayMonths||1;let S=y.view.date;if("day"===y.view.mode&&y.monthViewOptions){y.showPreviousMonth&&y.selectedRange&&0===y.selectedRange.length&&(S=Tt(S,{month:-1})),y.monthViewOptions.firstDayOfWeek=ls(y.locale).firstDayOfWeek();let H=new Array(O);for(let Z=0;Z<O;Z++)H[Z]=jh(S,y.monthViewOptions),S=Tt(S,{month:1});if(y.preventChangeToNextMonth&&y.flaggedMonths&&y.hoveredDate){const Z=jh(y.view.date,y.monthViewOptions);y.flaggedMonths.length&&y.flaggedMonths[1].month.getMonth()===Z.month.getMonth()&&(H=y.flaggedMonths.map(ye=>y.monthViewOptions?jh(ye.month,y.monthViewOptions):null).filter(ye=>null!==ye))}return Object.assign({},y,{monthsModel:H})}if("month"===y.view.mode){const H=new Array(O);for(let Z=0;Z<O;Z++)H[Z]=em(S,Rs(y)),S=Tt(S,{year:1});return Object.assign({},y,{monthsCalendar:H})}if("year"===y.view.mode){const H=new Array(O);for(let Z=0;Z<O;Z++)H[Z]=tm(S,Rs(y),"year"===y.minMode?dh(y,Z):void 0),S=Tt(S,{year:td});return Object.assign({},y,{yearsCalendarModel:H})}return y}(y);case lo.FORMAT:return function $h(y){if(!y.view)return y;if("day"===y.view.mode&&y.monthsModel){const H=y.monthsModel.map((Z,ye)=>function Uh(y,O,S){return{month:y.month,monthTitle:Os(y.month,O.monthTitle,O.locale),yearTitle:Os(y.month,O.yearTitle,O.locale),weekNumbers:Kf(y.daysMatrix,O.weekNumbers,O.locale),weekdays:Jf(O.locale),weeks:y.daysMatrix.map((H,Z)=>({days:H.map((ye,vt)=>({date:ye,label:Os(ye,O.dayLabel,O.locale),monthIndex:S,weekIndex:Z,dayIndex:vt}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(Z,Rs(y),ye));return Object.assign({},y,{formattedMonths:H})}const O=y.displayMonths||1;let S=y.view.date;if("month"===y.view.mode){const H=new Array(O);for(let Z=0;Z<O;Z++)H[Z]=em(S,Rs(y)),S=Tt(S,{year:1});return Object.assign({},y,{monthsCalendar:H})}if("year"===y.view.mode){const H=new Array(O);for(let Z=0;Z<O;Z++)H[Z]=tm(S,Rs(y)),S=Tt(S,{year:16});return Object.assign({},y,{yearsCalendarModel:H})}return y}(y);case lo.FLAG:return function Mv(y){if(!y.view)return y;const O=Bp(y.view.date,y.minDate,y.maxDate)?1:y.displayMonths;if(y.formattedMonths&&"day"===y.view.mode){const S=y.formattedMonths.map((H,Z)=>function zp(y,O){return y.weeks.forEach(S=>{S.days.forEach((H,Z)=>{const ye=!Or(H.date,y.month),vt=!ye&&vr(H.date,O.hoveredDate),Ai=!ye&&O.selectedRange&&vr(H.date,O.selectedRange[0]),pn=!ye&&O.selectedRange&&vr(H.date,O.selectedRange[1]),Kr=!ye&&vr(H.date,O.selectedDate)||Ai||pn,Ss=!ye&&O.selectedRange&&function nu(y,O,S){return!!(y&&O&&O[0])&&(O[1]?y>O[0]&&y<=O[1]:!!S&&y>O[0]&&y<=S)}(H.date,O.selectedRange,O.hoveredDate),Do=O.isDisabled||eo(H.date,O.minDate,"day")||hs(H.date,O.maxDate,"day")||function Ba(y,O){return!(typeof O>"u"||!O||!O.length)&&O.some(S=>S===y.getDay())}(H.date,O.daysDisabled)||_c(H.date,O.datesDisabled)||ed(H.date,O.datesEnabled),bc=!ye&&vr(H.date,new Date),jp=O.dateCustomClasses&&O.dateCustomClasses.map(Xl=>vr(H.date,Xl.date)?Xl.classes:[]).reduce((Xl,_h)=>Xl.concat(_h),[]).join(" ")||"",lm=O.dateTooltipTexts&&O.dateTooltipTexts.map(Xl=>vr(H.date,Xl.date)?Xl.tooltipText:"").reduce((Xl,_h)=>(Xl.push(_h),Xl),[]).join(" ")||"",xc=Object.assign({},H,{isOtherMonth:ye,isHovered:vt,isSelected:Kr,isSelectionStart:Ai,isSelectionEnd:pn,isInRange:Ss,isDisabled:Do,isToday:bc,customClasses:jp,tooltipText:lm});(H.isOtherMonth!==xc.isOtherMonth||H.isHovered!==xc.isHovered||H.isSelected!==xc.isSelected||H.isSelectionStart!==xc.isSelectionStart||H.isSelectionEnd!==xc.isSelectionEnd||H.isDisabled!==xc.isDisabled||H.isInRange!==xc.isInRange||H.customClasses!==xc.customClasses||H.tooltipText!==xc.tooltipText)&&(S.days[Z]=xc)})}),y.hideLeftArrow=O.isDisabled||!!O.monthIndex&&O.monthIndex>0&&O.monthIndex!==O.displayMonths,y.hideRightArrow=O.isDisabled||(!!O.monthIndex||0===O.monthIndex)&&!!O.displayMonths&&O.monthIndex<O.displayMonths&&O.monthIndex+1!==O.displayMonths,y.disableLeftArrow=uh(Tt(y.month,{month:-1}),O.minDate,O.maxDate),y.disableRightArrow=uh(Tt(y.month,{month:1}),O.minDate,O.maxDate),y}(H,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,daysDisabled:y.daysDisabled,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,hoveredDate:y.hoveredDate,selectedDate:y.selectedDate,selectedRange:y.selectedRange,displayMonths:O,dateCustomClasses:y.dateCustomClasses,dateTooltipTexts:y.dateTooltipTexts,monthIndex:Z}));return Object.assign({},y,{flaggedMonths:S})}if("month"===y.view.mode&&y.monthsCalendar){const S=y.monthsCalendar.map((H,Z)=>function pg(y,O){return y.months.forEach((S,H)=>{S.forEach((Z,ye)=>{let vt;const Ai=Or(Z.date,O.hoveredMonth),pn=O.isDisabled||_c(Z.date,O.datesDisabled)||ed(Z.date,O.datesEnabled,"month")||uh(Z.date,O.minDate,O.maxDate);!O.selectedDate&&O.selectedRange?(vt=Or(Z.date,O.selectedRange[0]),vt||(vt=Or(Z.date,O.selectedRange[1]))):vt=Or(Z.date,O.selectedDate);const Kr=Object.assign(Z,{isHovered:Ai,isDisabled:pn,isSelected:vt});(Z.isHovered!==Kr.isHovered||Z.isDisabled!==Kr.isDisabled||Z.isSelected!==Kr.isSelected)&&(y.months[H][ye]=Kr)})}),y.hideLeftArrow=!!O.monthIndex&&O.monthIndex>0&&O.monthIndex!==O.displayMonths,y.hideRightArrow=(!!O.monthIndex||0===O.monthIndex)&&(!!O.displayMonths||0===O.displayMonths)&&O.monthIndex<O.displayMonths&&O.monthIndex+1!==O.displayMonths,y.disableLeftArrow=Fc(Tt(y.months[0][0].date,{year:-1}),O.minDate,O.maxDate),y.disableRightArrow=Fc(Tt(y.months[0][0].date,{year:1}),O.minDate,O.maxDate),y}(H,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,hoveredMonth:y.hoveredMonth,selectedDate:y.selectedDate,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,selectedRange:y.selectedRange,displayMonths:O,monthIndex:Z}));return Object.assign({},y,{flaggedMonthsCalendar:S})}if("year"===y.view.mode&&y.yearsCalendarModel){const S=y.yearsCalendarModel.map((H,Z)=>function Fp(y,O){y.years.forEach((Z,ye)=>{Z.forEach((vt,Ai)=>{let pn;const Kr=Sr(vt.date,O.hoveredYear),Ss=O.isDisabled||_c(vt.date,O.datesDisabled,"year")||ed(vt.date,O.datesEnabled,"year")||Fc(vt.date,O.minDate,O.maxDate);!O.selectedDate&&O.selectedRange?(pn=Sr(vt.date,O.selectedRange[0]),pn||(pn=Sr(vt.date,O.selectedRange[1]))):pn=Sr(vt.date,O.selectedDate);const Do=Object.assign(vt,{isHovered:Kr,isDisabled:Ss,isSelected:pn});(vt.isHovered!==Do.isHovered||vt.isDisabled!==Do.isDisabled||vt.isSelected!==Do.isSelected)&&(y.years[ye][Ai]=Do)})}),y.hideLeftArrow=!!O.yearIndex&&O.yearIndex>0&&O.yearIndex!==O.displayMonths,y.hideRightArrow=!!O.yearIndex&&!!O.displayMonths&&O.yearIndex<O.displayMonths&&O.yearIndex+1!==O.displayMonths,y.disableLeftArrow=Fc(Tt(y.years[0][0].date,{year:-1}),O.minDate,O.maxDate);const S=y.years.length-1;return y.disableRightArrow=Fc(Tt(y.years[S][y.years[S].length-1].date,{year:1}),O.minDate,O.maxDate),y}(H,{isDisabled:y.isDisabled,minDate:y.minDate,maxDate:y.maxDate,hoveredYear:y.hoveredYear,selectedDate:y.selectedDate,datesDisabled:y.datesDisabled,datesEnabled:y.datesEnabled,selectedRange:y.selectedRange,displayMonths:O,yearIndex:Z}));return Object.assign({},y,{yearsCalendarFlagged:S})}return y}(y);case lo.NAVIGATE_OFFSET:return function zd(y,O){if(!y.view)return y;const S=function gg(y,O){if(y.view){if("year"===y.view.mode&&"year"===y.minMode){const S=dh(y,0);if(S){const H=Tt(S,{year:-ru});return Tt(H,O.payload)}}return Tt(U(y.view.date,"month"),O.payload)}}(y,O);if(!S)return y;return Object.assign({},y,{view:{mode:y.view.mode,date:S}})}(y,O);case lo.NAVIGATE_TO:{const S=O.payload;if(!y.view||!S.unit)return y;const H=function Pe(y,O){return Dn(It(y.getFullYear(),O.year),It(y.getMonth(),O.month),1,It(y.getHours(),O.hour),It(y.getMinutes(),O.minute),It(y.getSeconds(),O.seconds),It(y.getMilliseconds(),O.milliseconds))}(y.view.date,S.unit);let Z,ye;return $a(S.viewMode,y.minMode)?(ye=S.viewMode,Z={view:{date:H,mode:ye}}):(ye=y.view.mode,Z={selectedDate:H,view:{date:H,mode:ye}}),Object.assign({},y,Z)}case lo.CHANGE_VIEWMODE:return $a(O.payload,y.minMode)&&y.view?Object.assign({},y,{view:{date:y.view.date,mode:O.payload}}):y;case lo.HOVER:return Object.assign({},y,{hoveredDate:O.payload});case lo.SELECT:{if(!y.view)return y;const S={selectedDate:O.payload,view:y.view};if(Array.isArray(y.selectedTime)){const vt=y.selectedTime[0];S.selectedDate&&vt&&ph(S.selectedDate,vt)}const H=y.view.mode,ye=Lu(O.payload||y.view.date,y.minDate,y.maxDate);return S.view={mode:H,date:ye},Object.assign({},y,S)}case lo.SELECT_TIME:{const{date:S,index:H}=O.payload,Z=y.selectedTime?[...y.selectedTime]:[];return Z[H]=S,Object.assign({},y,{selectedTime:Z})}case lo.SET_OPTIONS:{if(!y.view)return y;const S=O.payload,H=S.minMode?S.minMode:y.view.mode,ye=Lu(nt(S.value)&&S.value||ot(S.value)&&nt(S.value[0])&&S.value[0]||y.view.date,S.minDate,S.maxDate);return S.view={mode:H,date:ye},S.value&&(ot(S.value)&&(S.selectedRange=S.value,S.selectedTime=S.value.map(vt=>vt)),S.value instanceof Date&&(S.selectedDate=S.value,S.selectedTime=[S.value])),Object.assign({},y,S)}case lo.SELECT_RANGE:{if(!y.view)return y;const S={selectedRange:O.payload,view:y.view};S.selectedRange?.forEach((vt,Ai)=>{if(Array.isArray(y.selectedTime)){const pn=y.selectedTime[Ai];pn&&ph(vt,pn)}});const H=y.view.mode,ye=Lu(O.payload&&O.payload[0]||y.view.date,y.minDate,y.maxDate);return S.view={mode:H,date:ye},Object.assign({},y,S)}case lo.SET_MIN_DATE:return Object.assign({},y,{minDate:O.payload});case lo.SET_MAX_DATE:return Object.assign({},y,{maxDate:O.payload});case lo.SET_IS_DISABLED:return Object.assign({},y,{isDisabled:O.payload});case lo.SET_DATE_CUSTOM_CLASSES:return Object.assign({},y,{dateCustomClasses:O.payload});case lo.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},y,{dateTooltipTexts:O.payload});default:return y}}function Rs(y){return{locale:y.locale,monthTitle:y.monthTitle,yearTitle:y.yearTitle,dayLabel:y.dayLabel,monthLabel:y.monthLabel,yearLabel:y.yearLabel,weekNumbers:y.weekNumbers}}function Lu(y,O,S){const H=Array.isArray(y)?y[0]:y;return O&&hs(O,H,"day")?O:S&&eo(S,H,"day")?S:H}function Bp(y,O,S){return!(!S||!To(S,y,"day"))||O&&S&&O.getMonth()===S.getMonth()}let Ou=(()=>{class y extends pc{constructor(){const S=new El.g({type:"[datepicker] dispatcher init"});super(S,im,new tr(iu,S,im))}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"platform"})}return y})(),id=(()=>{class y{constructor(){this.onSelect=new k._w7}selectFromRanges(S){this.onSelect.emit(S)}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(H,Z){1&H&&(k.I0R(0,"div",0),k.yuY(1,xd,2,3,"button",1),k.C$Y()),2&H&&(k.yG2(),k.E7m("ngForOf",Z.ranges))},dependencies:[ao.ay],encapsulation:2,changeDetection:0})}return y})();var Al=function(y){return y[y.UP=0]="UP",y[y.DOWN=1]="DOWN",y}(Al||{});let Fd,vg=(()=>{class y{static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(H,Z){1&H&&(k.I0R(0,"div",0)(1,"span"),k.OEk(2),k.C$Y()()),2&H&&(k.yG2(2),k.cNF(Z.title))},encapsulation:2})}return y})(),nm=(()=>{class y{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(H,Z){1&H&&(k.I0R(0,"div",0)(1,"div",1)(2,"button",2),k.OEk(3,"-"),k.C$Y(),k.wR5(4,"input",3),k.I0R(5,"button",4),k.OEk(6,"+"),k.C$Y()(),k.I0R(7,"div",1)(8,"button",2),k.OEk(9,"-"),k.C$Y(),k.wR5(10,"input",3),k.I0R(11,"button",4),k.OEk(12,"+"),k.C$Y()(),k.I0R(13,"button",5),k.OEk(14),k.wR5(15,"img",6),k.C$Y()()),2&H&&(k.yG2(4),k.E7m("value",Z.hours),k.yG2(6),k.E7m("value",Z.minutes),k.yG2(4),k.oRS("",Z.ampm," "))},encapsulation:2})}return y})(),nd=(()=>{class y{static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-calendar-layout"]],ngContentSelectors:Yo,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(H,Z){1&H&&(k.kPM(rh),k.yuY(0,pr,1,0,"bs-current-date",0),k.I0R(1,"div",1),k._Xx(2),k.C$Y(),k.I0R(3,"div",2),k._Xx(4,1),k.C$Y(),k.yuY(5,Pf,1,0,"bs-timepicker",3)),2&H&&(k.E7m("ngIf",!1),k.yG2(5),k.E7m("ngIf",!1))},dependencies:[ao.u_,vg,nm],encapsulation:2})}return y})(),Pu=(()=>{class y{constructor(S,H,Z){this._config=S,this._elRef=H,this._renderer=Z,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(S=>S).forEach(S=>{this._renderer.addClass(this._elRef.nativeElement,S)})}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(Wa),k.GI1(k.GMv),k.GI1(k.q87))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(H,Z){2&H&&k.eAK("disabled",Z.day.isDisabled)("is-highlighted",Z.day.isHovered)("is-other-month",Z.day.isOtherMonth)("is-active-other-month",Z.day.isOtherMonthHovered)("in-range",Z.day.isInRange)("select-start",Z.day.isSelectionStart)("select-end",Z.day.isSelectionEnd)("selected",Z.day.isSelected)},inputs:{day:"day"},attrs:yp,decls:1,vars:1,template:function(H,Z){1&H&&k.OEk(0),2&H&&k.cNF(Z.day&&Z.day.label||"")},encapsulation:2,changeDetection:0})}return y})(),rd=(()=>{class y{constructor(){this.isDisabled=!1,this.onNavigate=new k._w7,this.onViewMode=new k._w7}navTo(S){this.onNavigate.emit(S?Al.DOWN:Al.UP)}view(S){this.isDisabled||this.onViewMode.emit(S)}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(H,Z){1&H&&(k.I0R(0,"button",0),k.qCj("click",function(){return Z.navTo(!0)}),k.I0R(1,"span"),k.OEk(2,"\u2039"),k.C$Y()(),k.yuY(3,bp,5,2,"ng-container",1),k.OEk(4," \u200b "),k.I0R(5,"button",2),k.qCj("click",function(){return Z.view("year")}),k.I0R(6,"span"),k.OEk(7),k.C$Y()(),k.OEk(8," \u200b "),k.I0R(9,"button",3),k.qCj("click",function(){return Z.navTo(!1)}),k.I0R(10,"span"),k.OEk(11,"\u203a"),k.C$Y()()),2&H&&(k.m4B("visibility",Z.calendar.hideLeftArrow?"hidden":"visible"),k.E7m("disabled",Z.calendar.disableLeftArrow),k.yG2(3),k.E7m("ngIf",Z.calendar&&Z.calendar.monthTitle),k.yG2(2),k.E7m("disabled",Z.isDisabled),k.yG2(2),k.cNF(Z.calendar.yearTitle),k.yG2(2),k.m4B("visibility",Z.calendar.hideRightArrow?"hidden":"visible"),k.E7m("disabled",Z.calendar.disableRightArrow))},dependencies:[ao.u_],encapsulation:2,changeDetection:0})}return y})(),Xh=(()=>{class y{constructor(S){this._config=S,this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7,this.onHoverWeek=new k._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(S){this.onNavigate.emit({step:{month:Al.DOWN===S?-1:1}})}changeViewMode(S){this.onViewMode.emit(S)}selectDay(S){this.onSelect.emit(S)}selectWeek(S){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===S.days.length)return;if(this._config.selectWeek&&S.days[0]&&!S.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(S.days[0]);const H=S.days.find(Z=>(this._config.selectFromOtherMonth||!Z.isOtherMonth)&&!Z.isDisabled);if(this.onSelect.emit(H),this._config.selectWeekDateRange){const ye=S.days.slice(0).reverse().find(vt=>(this._config.selectFromOtherMonth||!vt.isOtherMonth)&&!vt.isDisabled);this.onSelect.emit(ye)}}weekHoverHandler(S,H){(this._config.selectWeek||this._config.selectWeekDateRange)&&S.days.find(ye=>(this._config.selectFromOtherMonth||!ye.isOtherMonth)&&!ye.isDisabled)&&(S.isHovered=H,this.isWeekHovered=H,this.onHoverWeek.emit(S))}hoverDay(S,H){this._config.selectFromOtherMonth&&S.isOtherMonth&&(S.isOtherMonthHovered=H),this._config.dateTooltipTexts&&(S.tooltipText="",this._config.dateTooltipTexts.forEach(Z=>{vr(Z.date,S.date)&&(S.tooltipText=Z.tooltipText)})),this.onHover.emit({cell:S,isHovered:H})}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(Wa))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(H,Z){1&H&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(vt){return Z.navigateTo(vt)})("onViewMode",function(vt){return Z.changeViewMode(vt)}),k.C$Y(),k.I0R(2,"table",1)(3,"thead")(4,"tr"),k.yuY(5,xp,1,0,"th",2)(6,Rf,2,1,"th",3),k.C$Y()(),k.I0R(7,"tbody"),k.yuY(8,wp,3,2,"tr",4),k.C$Y()()()),2&H&&(k.yG2(),k.E7m("calendar",Z.calendar)("isDisabled",!!Z.isDisabled),k.yG2(4),k.E7m("ngIf",Z.options&&Z.options.showWeekNumbers),k.yG2(),k.E7m("ngForOf",Z.calendar.weekdays),k.yG2(2),k.E7m("ngForOf",Z.calendar.weeks))},dependencies:[ao.ay,ao.u_,js.uM,nd,Pu,rd],encapsulation:2})}return y})(),rm=(()=>{class y{constructor(){this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7}navigateTo(S){this.onNavigate.emit({step:{year:Al.DOWN===S?-1:1}})}viewMonth(S){this.onSelect.emit(S)}hoverMonth(S,H){this.onHover.emit({cell:S,isHovered:H})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(H,Z){1&H&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(vt){return Z.navigateTo(vt)})("onViewMode",function(vt){return Z.changeViewMode(vt)}),k.C$Y(),k.I0R(2,"table",1)(3,"tbody"),k.yuY(4,jl,2,1,"tr",2),k.C$Y()()()),2&H&&(k.yG2(),k.E7m("calendar",Z.calendar),k.yG2(3),k.E7m("ngForOf",null==Z.calendar?null:Z.calendar.months))},dependencies:[ao.ay,nd,rd],encapsulation:2})}return y})(),fh=(()=>{class y{constructor(){this.onNavigate=new k._w7,this.onViewMode=new k._w7,this.onSelect=new k._w7,this.onHover=new k._w7}navigateTo(S){this.onNavigate.emit({step:{year:(Al.DOWN===S?-1:1)*td}})}viewYear(S){this.onSelect.emit(S)}hoverYear(S,H){this.onHover.emit({cell:S,isHovered:H})}changeViewMode(S){this.onViewMode.emit(S)}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(H,Z){1&H&&(k.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),k.qCj("onNavigate",function(vt){return Z.navigateTo(vt)})("onViewMode",function(vt){return Z.changeViewMode(vt)}),k.C$Y(),k.I0R(2,"table",1)(3,"tbody"),k.yuY(4,sh,2,1,"tr",2),k.C$Y()()()),2&H&&(k.yG2(),k.E7m("calendar",Z.calendar),k.yG2(3),k.E7m("ngForOf",null==Z.calendar?null:Z.calendar.years))},dependencies:[ao.ay,nd,rd],encapsulation:2})}return y})(),mh=(()=>{class y extends Md{set value(S){this._effects?.setValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,H,Z,ye,vt,Ai,pn){super(),this._config=H,this._store=Z,this._element=ye,this._actions=vt,this._positionService=pn,this.valueChange=new k._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=Ai,S.setStyle(ye.nativeElement,"display","block"),S.setStyle(ye.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,i.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(H=>H.selectedDate).subscribe(H=>{S=H,this.valueChange.emit(H)})),this._subs.push(this._store.select(H=>H.selectedTime).subscribe(H=>{!H[0]||!(H[0]instanceof Date)||H[0]===S||this.valueChange.emit(H[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=1&&this.startTimepicker?.writeValue(S[0])})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,H){this._store.dispatch(this._actions.selectTime(S,H))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this._store.dispatch(this._actions.select(S.date))}monthSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:Zi(S.date),year:Ui(S.date)},viewMode:"day"}))}yearSelectHandler(S){!S||S.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:Ui(S.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(k.q87),k.GI1(Wa),k.GI1(Ou),k.GI1(k.GMv),k.GI1(lo),k.GI1(Id),k.GI1(Uc.O4))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-datepicker-container"]],viewQuery:function(H,Z){if(1&H&&k.CC$(qu,5),2&H){let ye;k.wto(ye=k.Gqi())&&(Z.startTimepicker=ye.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(H,Z){1&H&&k.qCj("click",function(vt){return Z._stopPropagation(vt)}),2&H&&k.e48("disabled",Z.isDatepickerDisabled)("readonly",Z.isDatepickerReadonly)},features:[k.M5G([Ou,Id]),k.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(H,Z){1&H&&(k.yuY(0,Tp,10,11,"div",0),k.wVc(1,"async")),2&H&&k.E7m("ngIf",k.kDX(1,1,Z.viewMode))},dependencies:[ao.QF,ao.ay,ao.u_,ao.Ko,ao.Wm,nh,id,Xh,rm,fh,ao.a],encapsulation:2,data:{animation:[ch]}})}return y})(),gh=(()=>{class y{get readonlyValue(){return this.isDisabled?"":null}constructor(S,H,Z,ye,vt){this._config=S,this._elementRef=H,this._renderer=Z,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Qc.E,this.isDisabled=!1,this.bsValueChange=new k._w7,this._subs=[],this._dateInputFormat$=new Qc.E,Object.assign(this,this._config),this._datepicker=vt.createLoader(H,ye,Z),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new El.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue&&S&&this._bsValue.getTime()===S.getTime()||(!this._bsValue&&S&&!this._config.withTimepicker&&ph(S,new Date),S&&this.bsConfig?.initCurrentTime&&(S=Pp(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){Fd=this._bsValue}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Pp(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),S.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(Fd&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return Fd instanceof Date&&this._bsValue?.getDate()===Fd?.getDate()&&this._bsValue?.getMonth()===Fd?.getMonth()&&this._bsValue?.getFullYear()===Fd?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,hn.I)(S=>S!==this.isOpen),(0,V.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Wa,useValue:this._config}).attach(mh).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:Zf(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(Wa),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(k.y8U),k.GI1(cl.Sy))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(H,Z){2&H&&k.e48("readonly",Z.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[k.SYr]})}return y})(),om=(()=>{class y extends Md{set value(S){this._effects?.setRangeValue(S)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(S,H,Z,ye,vt,Ai,pn){super(),this._config=H,this._store=Z,this._element=ye,this._actions=vt,this._positionService=pn,this.valueChange=new k._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=Ai,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,S.setStyle(ye.nativeElement,"display","block"),S.setStyle(ye.nativeElement,"position","absolute")}ngOnInit(){let S;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,i.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(H=>H.selectedRange).subscribe(H=>{S=H,this.valueChange.emit(H),this.chosenRange=H||[]})),this._subs.push(this._store.select(H=>H.selectedTime).subscribe(H=>{!H[0]||!H[1]||!(H[0]instanceof Date)||!(H[1]instanceof Date)||S&&H[0]===S[0]&&H[1]===S[1]||(this.valueChange.emit(H),this.chosenRange=H||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(S=>{Array.isArray(S)&&S.length>=2&&(this.startTimepicker?.writeValue(S[0]),this.endTimepicker?.writeValue(S[1]))})),this.startTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,0)}),this.endTimepicker?.registerOnChange(S=>{this.timeSelectHandler(S,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(S,H){this._store.dispatch(this._actions.selectTime(S,H))}daySelectHandler(S){!S||(this.isOtherMonthsActive?S.isDisabled:S.isOtherMonth||S.isDisabled)||this.rangesProcessing(S)}monthSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"month"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:Zi(S.date),year:Ui(S.date)},viewMode:"day"}))}this.rangesProcessing(S)}}yearSelectHandler(S){if(S&&!S.isDisabled){if(S.isSelected=!0,"year"!==this._config.minMode){if(S.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:Ui(S.date)},viewMode:"month"}))}this.rangesProcessing(S)}}rangesProcessing(S){1===this._rangeStack.length&&(this._rangeStack=S.date>=this._rangeStack[0]?[this._rangeStack[0],S.date]:[S.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date),0===this._rangeStack.length&&(this._rangeStack=[S.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(S.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const S of this._subs)S.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(S){S&&(this._rangeStack=S.value instanceof Date?[S.value]:S.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(S){let H=new Date(S);if(this._config.maxDate){const Z=this._config.maxDate.getTime(),ye=S.getTime()+864e5*(this._config.maxDateRange||0);H=ye>Z?new Date(this._config.maxDate):new Date(ye)}else H.setDate(S.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(H)}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(k.q87),k.GI1(Wa),k.GI1(Ou),k.GI1(k.GMv),k.GI1(lo),k.GI1(Id),k.GI1(Uc.O4))};static#t=this.\u0275cmp=k.In1({type:y,selectors:[["bs-daterangepicker-container"]],viewQuery:function(H,Z){if(1&H&&(k.CC$(qu,5),k.CC$(Fh,5)),2&H){let ye;k.wto(ye=k.Gqi())&&(Z.startTimepicker=ye.first),k.wto(ye=k.Gqi())&&(Z.endTimepicker=ye.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(H,Z){1&H&&k.qCj("click",function(vt){return Z._stopPropagation(vt)}),2&H&&k.e48("disabled",Z.isDatepickerDisabled)("readonly",Z.isDatepickerReadonly)},features:[k.M5G([Ou,Id]),k.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(H,Z){1&H&&(k.yuY(0,vc,10,11,"div",0),k.wVc(1,"async")),2&H&&k.E7m("ngIf",k.kDX(1,1,Z.viewMode))},dependencies:[ao.QF,ao.ay,ao.u_,ao.Ko,ao.Wm,nh,id,Xh,rm,fh,ao.a],encapsulation:2,data:{animation:[ch]}})}return y})();const Hp={provide:ko.Y6,useExisting:(0,k.wd)(()=>Vp),multi:!0},_g={provide:ko.WM,useExisting:(0,k.wd)(()=>Vp),multi:!0};let sd,Vp=(()=>{class y{constructor(S,H,Z,ye,vt){this._picker=S,this._localeService=H,this._renderer=Z,this._elRef=ye,this.changeDetection=vt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Su.wH}ngOnInit(){const S=H=>{this._setInputValue(H),this._value!==H&&(this._value=H,this._onChange(H),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&S(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(S)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,Oe.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){const H=S?Os(S,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",H)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){const H=S.value;if(null==H||""===H)return null;if(Ue(H)){if(!nt(H))return{bsDate:{invalid:H}};if(this._picker&&this._picker.minDate&&eo(H,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&hs(H,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const H=this._localeService.currentLocale;if(!ls(H))throw new Error(`Locale "${H}" is not defined, please add it with "defineLocale(...)"`);this._value=Yl(S,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=da(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(gh,1),k.GI1(Dd),k.GI1(k.q87),k.GI1(k.GMv),k.GI1(k.kD9))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["input","bsDatepicker",""]],hostBindings:function(H,Z){1&H&&k.qCj("change",function(vt){return Z.onChange(vt)})("keyup.esc",function(){return Z.hide()})("keydown",function(vt){return Z.onKeydownEvent(vt)})("blur",function(){return Z.onBlur()})},features:[k.M5G([Hp,_g])]})}return y})(),dl=(()=>{class y extends Wa{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let S;return function(Z){return(S||(S=k.otF(y)))(Z||y)}})();static#t=this.\u0275prov=k.wxM({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),Gp=(()=>{class y{get isOpen(){return this._datepicker.isShown}set isOpen(S){this.isOpen$.next(S)}set bsValue(S){this._bsValue!==S&&(S&&this.bsConfig?.initCurrentTime&&(S=Ld(S)),this.initPreviousValue(),this._bsValue=S,this.bsValueChange.emit(S))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(S,H,Z,ye,vt){this._config=S,this._elementRef=H,this._renderer=Z,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Qc.E,this.isDisabled=!1,this.bsValueChange=new k._w7,this._subs=[],this._rangeInputFormat$=new Qc.E,this._datepicker=vt.createLoader(H,ye,Z),Object.assign(this,S),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new El.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Qc.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(S){S.bsConfig&&(S.bsConfig.currentValue?.initCurrentTime&&S.bsConfig.currentValue?.initCurrentTime!==S.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Ld(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(S.bsConfig.currentValue&&S.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(S.minDate&&(this._datepickerRef.instance.minDate=this.minDate),S.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),S.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),S.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),S.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),S.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),S.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,hn.I)(S=>S!==this.isOpen),(0,V.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Wa,useValue:this._config}).attach(om).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(S=>{this._datepickerRef&&(this._datepickerRef.instance.value=S)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,hn.I)(S=>S&&S[0]&&!!S[1])).subscribe(S=>{this.initPreviousValue(),this.bsValue=S,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){sd=this._bsValue}keepDatepickerModalOpened(){return!!(sd&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===sd?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===sd?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===sd?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===sd?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===sd?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===sd?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:Zf(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:Xf(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const S of this._subs)S.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(S=>S.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(dl),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(k.y8U),k.GI1(cl.Sy))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(H,Z){2&H&&k.e48("readonly",Z.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[k.SYr]})}return y})();const Ru={provide:ko.Y6,useExisting:(0,k.wd)(()=>am),multi:!0},od={provide:ko.WM,useExisting:(0,k.wd)(()=>am),multi:!0};let am=(()=>{class y{constructor(S,H,Z,ye,vt){this._picker=S,this._localeService=H,this._renderer=Z,this._elRef=ye,this.changeDetection=vt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Su.wH}ngOnInit(){this._picker._bsValue&&(H=>{this._setInputValue(H),this._value!==H&&(this._value=H,this._onChange(H),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(H=>{this._setInputValue(H),this._value!==H&&(this._value=H,this._onChange(H),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,Oe.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(S){(13===S.keyCode||"Enter"===S.code)&&this.hide()}_setInputValue(S){let H="";if(S){const Z=S[0]?Os(S[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",ye=S[1]?Os(S[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";H=Z&&ye?Z+this._picker._config.rangeSeparator+ye:""}this._renderer.setProperty(this._elRef.nativeElement,"value",H)}onChange(S){this.writeValue(S.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(S){let H=S.value;const Z=[];if(null==H||!ot(H))return null;H=H.slice().sort((Ai,pn)=>Ai.getTime()-pn.getTime());const ye=nt(H[0]),vt=nt(H[1]);return ye?vt?(this._picker&&this._picker.minDate&&eo(H[0],this._picker.minDate,"date")&&(H[0]=this._picker.minDate,Z.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&hs(H[1],this._picker.maxDate,"date")&&(H[1]=this._picker.maxDate,Z.push({bsDate:{maxDate:this._picker.maxDate}})),Z.length>0?(this.writeValue(H),Z):null):{bsDate:{invalid:H[1]}}:{bsDate:{invalid:H[0]}}}registerOnValidatorChange(S){this._validatorChange=S}writeValue(S){if(S){const H=this._localeService.currentLocale;if(!ls(H))throw new Error(`Locale "${H}" is not defined, please add it with "defineLocale(...)"`);let ye=[];if("string"==typeof S){const vt=this._picker._config.rangeSeparator.trim();ye=S.replace(/[^-]/g,"").length>1?S.split(this._picker._config.rangeSeparator):S.split(vt.length>0?vt:this._picker._config.rangeSeparator).map(Ai=>Ai.trim())}Array.isArray(S)&&(ye=S),this._value=ye.map(vt=>this._picker._config.useUtc?da(Yl(vt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):Yl(vt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(vt=>isNaN(vt.valueOf())?void 0:vt)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(S){this._picker.isDisabled=S,S?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(S){this._onChange=S}registerOnTouched(S){this._onTouched=S}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(H){return new(H||y)(k.GI1(Gp,1),k.GI1(Dd),k.GI1(k.q87),k.GI1(k.GMv),k.GI1(k.kD9))};static#t=this.\u0275dir=k.Sc5({type:y,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(H,Z){1&H&&k.qCj("change",function(vt){return Z.onChange(vt)})("keyup.esc",function(){return Z.hide()})("keydown",function(vt){return Z.onKeydownEvent(vt)})("blur",function(){return Z.onBlur()})},features:[k.M5G([Ru,od])]})}return y})(),yg=(()=>{class y{static forRoot(){return{ngModule:y,providers:[cl.Sy,Uc.O4,Ou,lo,Id,Dd,Ao]}}static#e=this.\u0275fac=function(H){return new(H||y)};static#t=this.\u0275mod=k.a4G({type:y});static#i=this.\u0275inj=k.s3X({imports:[ao.MD,js.as,bd]})}return y})()},8216:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{im:()=>at,rO:()=>ri});var k=Rt(4496),hn=Rt(6504),ze=Rt(1368);const i=(Xt,Vt)=>({"pull-left":Xt,"float-left":Vt}),V=(Xt,Vt)=>({"pull-right":Xt,"float-right":Vt}),Oe=(Xt,Vt)=>({disabled:Xt,currentPage:Vt});function Ae(Xt,Vt){if(1&Xt){const dt=k.KQA();k.I0R(0,"li",11)(1,"a",12),k.qCj("click",function(ni){k.usT(dt);const gi=k.GaO();return k.CGJ(gi.selectPage(1,ni))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const dt=k.GaO(),Zt=k.Gew(13);k.eAK("disabled",dt.noPrevious()||dt.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",dt.customFirstTemplate||Zt)("ngTemplateOutletContext",k.IBC(4,Oe,dt.noPrevious()||dt.disabled,dt.page))}}function De(Xt,Vt){if(1&Xt){const dt=k.KQA();k.I0R(0,"li",14)(1,"a",12),k.qCj("click",function(ni){k.usT(dt);const gi=k.GaO();return k.CGJ(gi.selectPage(gi.page-1,ni))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const dt=k.GaO(),Zt=k.Gew(11);k.eAK("disabled",dt.noPrevious()||dt.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",dt.customPreviousTemplate||Zt)("ngTemplateOutletContext",k.IBC(4,Oe,dt.noPrevious()||dt.disabled,dt.page))}}const Fe=(Xt,Vt,dt)=>({disabled:Xt,$implicit:Vt,currentPage:dt});function Ue(Xt,Vt){if(1&Xt){const dt=k.KQA();k.I0R(0,"li",15)(1,"a",12),k.qCj("click",function(ni){const Gi=k.usT(dt).$implicit,vi=k.GaO();return k.CGJ(vi.selectPage(Gi.number,ni))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const dt=Vt.$implicit,Zt=k.GaO(),ni=k.Gew(7);k.eAK("active",dt.active)("disabled",Zt.disabled&&!dt.active),k.yG2(2),k.E7m("ngTemplateOutlet",Zt.customPageTemplate||ni)("ngTemplateOutletContext",k.uAc(6,Fe,Zt.disabled,dt,Zt.page))}}function Je(Xt,Vt){if(1&Xt){const dt=k.KQA();k.I0R(0,"li",16)(1,"a",12),k.qCj("click",function(ni){k.usT(dt);const gi=k.GaO();return k.CGJ(gi.selectPage(gi.page+1,ni))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const dt=k.GaO(),Zt=k.Gew(9);k.eAK("disabled",dt.noNext()||dt.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",dt.customNextTemplate||Zt)("ngTemplateOutletContext",k.IBC(4,Oe,dt.noNext()||dt.disabled,dt.page))}}function nt(Xt,Vt){if(1&Xt){const dt=k.KQA();k.I0R(0,"li",17)(1,"a",12),k.qCj("click",function(ni){k.usT(dt);const gi=k.GaO();return k.CGJ(gi.selectPage(gi.totalPages,ni))}),k.C_f(2,13),k.C$Y()()}if(2&Xt){const dt=k.GaO(),Zt=k.Gew(15);k.eAK("disabled",dt.noNext()||dt.disabled),k.yG2(2),k.E7m("ngTemplateOutlet",dt.customLastTemplate||Zt)("ngTemplateOutletContext",k.IBC(4,Oe,dt.noNext()||dt.disabled,dt.page))}}function mt(Xt,Vt){1&Xt&&k.OEk(0),2&Xt&&k.cNF(Vt.$implicit.text)}function Pt(Xt,Vt){if(1&Xt&&k.OEk(0),2&Xt){const dt=k.GaO();k.cNF(dt.getText("next"))}}function ot(Xt,Vt){if(1&Xt&&k.OEk(0),2&Xt){const dt=k.GaO();k.cNF(dt.getText("previous"))}}function gt(Xt,Vt){if(1&Xt&&k.OEk(0),2&Xt){const dt=k.GaO();k.cNF(dt.getText("first"))}}function wt(Xt,Vt){if(1&Xt&&k.OEk(0),2&Xt){const dt=k.GaO();k.cNF(dt.getText("last"))}}let si=(()=>{class Xt{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(Zt){return new(Zt||Xt)};static#t=this.\u0275prov=k.wxM({token:Xt,factory:Xt.\u0275fac,providedIn:"root"})}return Xt})();const $e={provide:hn.Y6,useExisting:(0,k.wd)(()=>ii),multi:!0};let ii=(()=>{class Xt{constructor(dt,Zt,ni){this.elementRef=dt,this.changeDetection=ni,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k._w7,this.pageChanged=new k._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=dt,this.config||this.configureOptions(Object.assign({},Zt.main,Zt.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(dt){this._itemsPerPage=dt,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(dt){this._totalItems=dt,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(dt){this._totalPages=dt,this.numPages.emit(dt),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(dt){const Zt=this._page;this._page=dt>this.totalPages?this.totalPages:dt||1,this.changeDetection.markForCheck(),!(Zt===this._page||typeof Zt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(dt){this.config=Object.assign({},dt)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(dt){this.page=dt,this.pages=this.getPages(this.page,this.totalPages)}getText(dt){return this[`${dt}Text`]||this.config[`${dt}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(dt){this.onChange=dt}registerOnTouched(dt){this.onTouched=dt}selectPage(dt,Zt){Zt&&Zt.preventDefault(),this.disabled||(Zt&&Zt.target&&Zt.target.blur(),this.writeValue(dt),this.onChange(this.page))}makePage(dt,Zt,ni){return{text:Zt,number:dt,active:ni}}getPages(dt,Zt){const ni=[];let gi=1,Gi=Zt;const vi=typeof this.maxSize<"u"&&this.maxSize<Zt;vi&&this.maxSize&&(this.rotate?(gi=Math.max(dt-Math.floor(this.maxSize/2),1),Gi=gi+this.maxSize-1,Gi>Zt&&(Gi=Zt,gi=Gi-this.maxSize+1)):(gi=(Math.ceil(dt/this.maxSize)-1)*this.maxSize+1,Gi=Math.min(gi+this.maxSize-1,Zt)));for(let Ei=gi;Ei<=Gi;Ei++){const Fi=this.makePage(Ei,Ei.toString(),Ei===dt);ni.push(Fi)}if(vi&&!this.rotate){if(gi>1){const Ei=this.makePage(gi-1,"...",!1);ni.unshift(Ei)}if(Gi<Zt){const Ei=this.makePage(Gi+1,"...",!1);ni.push(Ei)}}return ni}calculateTotalPages(){const dt=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(dt||0,1)}static#e=this.\u0275fac=function(Zt){return new(Zt||Xt)(k.GI1(k.GMv),k.GI1(si),k.GI1(k.kD9))};static#t=this.\u0275cmp=k.In1({type:Xt,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[k.M5G([$e])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(Zt,ni){1&Zt&&(k.I0R(0,"ul",0)(1,"li",1)(2,"a",2),k.qCj("click",function(Gi){return ni.selectPage(ni.page-1,Gi)}),k.OEk(3),k.C$Y()(),k.I0R(4,"li",1)(5,"a",2),k.qCj("click",function(Gi){return ni.selectPage(ni.page+1,Gi)}),k.OEk(6),k.C$Y()()()),2&Zt&&(k.yG2(),k.m8U(ni.pageBtnClass),k.eAK("disabled",ni.noPrevious())("previous",ni.align),k.E7m("ngClass",k.IBC(18,i,ni.align,ni.align)),k.yG2(2),k.cNF(ni.getText("previous")),k.yG2(),k.m8U(ni.pageBtnClass),k.eAK("disabled",ni.noNext())("next",ni.align),k.E7m("ngClass",k.IBC(21,V,ni.align,ni.align)),k.yG2(2),k.cNF(ni.getText("next")))},dependencies:[ze.QF],encapsulation:2})}return Xt})();const oi={provide:hn.Y6,useExisting:(0,k.wd)(()=>at),multi:!0};let at=(()=>{class Xt{constructor(dt,Zt,ni){this.elementRef=dt,this.changeDetection=ni,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new k._w7,this.pageChanged=new k._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=dt,this.config||this.configureOptions(Zt.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(dt){this._itemsPerPage=dt,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(dt){this._totalItems=dt,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(dt){this._totalPages=dt,this.numPages.emit(dt),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(dt){const Zt=this._page;this._page=dt>this.totalPages?this.totalPages:dt||1,this.changeDetection.markForCheck(),!(Zt===this._page||typeof Zt>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(dt){this.config=Object.assign({},dt)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(dt){this.page=dt,this.pages=this.getPages(this.page,this.totalPages)}getText(dt){return this[`${dt}Text`]||this.config[`${dt}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(dt){this.onChange=dt}registerOnTouched(dt){this.onTouched=dt}selectPage(dt,Zt){Zt&&Zt.preventDefault(),this.disabled||(Zt&&Zt.target&&Zt.target.blur(),this.writeValue(dt),this.onChange(this.page))}makePage(dt,Zt,ni){return{text:Zt,number:dt,active:ni}}getPages(dt,Zt){const ni=[];let gi=1,Gi=Zt;const vi=typeof this.maxSize<"u"&&this.maxSize<Zt;vi&&this.maxSize&&(this.rotate?(gi=Math.max(dt-Math.floor(this.maxSize/2),1),Gi=gi+this.maxSize-1,Gi>Zt&&(Gi=Zt,gi=Gi-this.maxSize+1)):(gi=(Math.ceil(dt/this.maxSize)-1)*this.maxSize+1,Gi=Math.min(gi+this.maxSize-1,Zt)));for(let Ei=gi;Ei<=Gi;Ei++){const Fi=this.makePage(Ei,Ei.toString(),Ei===dt);ni.push(Fi)}if(vi&&!this.rotate){if(gi>1){const Ei=this.makePage(gi-1,"...",!1);ni.unshift(Ei)}if(Gi<Zt){const Ei=this.makePage(Gi+1,"...",!1);ni.push(Ei)}}return ni}calculateTotalPages(){const dt=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(dt||0,1)}static#e=this.\u0275fac=function(Zt){return new(Zt||Xt)(k.GI1(k.GMv),k.GI1(si),k.GI1(k.kD9))};static#t=this.\u0275cmp=k.In1({type:Xt,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[k.M5G([oi])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(Zt,ni){1&Zt&&(k.I0R(0,"ul",0),k.yuY(1,Ae,3,7,"li",1)(2,De,3,7,"li",2)(3,Ue,3,10,"li",3)(4,Je,3,7,"li",4)(5,nt,3,7,"li",5),k.C$Y(),k.yuY(6,mt,1,1,"ng-template",null,6,k.gJz)(8,Pt,1,1,"ng-template",null,7,k.gJz)(10,ot,1,1,"ng-template",null,8,k.gJz)(12,gt,1,1,"ng-template",null,9,k.gJz)(14,wt,1,1,"ng-template",null,10,k.gJz)),2&Zt&&(k.E7m("ngClass",ni.classMap),k.yG2(),k.E7m("ngIf",ni.boundaryLinks),k.yG2(),k.E7m("ngIf",ni.directionLinks),k.yG2(),k.E7m("ngForOf",ni.pages),k.yG2(),k.E7m("ngIf",ni.directionLinks),k.yG2(),k.E7m("ngIf",ni.boundaryLinks))},dependencies:[ze.QF,ze.ay,ze.u_,ze.XV],encapsulation:2})}return Xt})(),ri=(()=>{class Xt{static forRoot(){return{ngModule:Xt,providers:[]}}static#e=this.\u0275fac=function(Zt){return new(Zt||Xt)};static#t=this.\u0275mod=k.a4G({type:Xt});static#i=this.\u0275inj=k.s3X({imports:[ze.MD]})}return Xt})()},8987:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{iU:()=>Je});var k=Rt(4496),hn=Rt(1368);let Je=(()=>{class nt{static forRoot(){return{ngModule:nt,providers:[]}}static#e=this.\u0275fac=function(ot){return new(ot||nt)};static#t=this.\u0275mod=k.a4G({type:nt});static#i=this.\u0275inj=k.s3X({imports:[hn.MD]})}return nt})()},7995:(fo,Gr,Rt)=>{"use strict";Rt.d(Gr,{as:()=>mt,uM:()=>nt});var k=Rt(4496),hn=Rt(3676),ze=Rt(140),i=Rt(1316),V=Rt(6552),Oe=Rt(3120),Ae=Rt(1368);const De=["*"];let Fe=(()=>{class Pt{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(wt){return new(wt||Pt)};static#t=this.\u0275prov=k.wxM({token:Pt,factory:Pt.\u0275fac,providedIn:"root"})}return Pt})(),Ue=(()=>{class Pt{get _bsVersions(){return(0,hn.w3)()}constructor(gt){Object.assign(this,gt)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=ze.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(wt){return new(wt||Pt)(k.GI1(Fe))};static#t=this.\u0275cmp=k.In1({type:Pt,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(wt,si){2&wt&&(k.e48("id",si.id),k.m8U("show tooltip in tooltip-"+si.placement+" bs-tooltip-"+si.placement+" "+si.placement+" "+si.containerClass))},ngContentSelectors:De,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(wt,si){1&wt&&(k.kPM(),k.wR5(0,"div",0),k.I0R(1,"div",1),k._Xx(2),k.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return Pt})(),Je=0,nt=(()=>{class Pt{get isOpen(){return this._tooltip.isShown}set isOpen(gt){gt?this.show():this.hide()}set htmlContent(gt){(0,hn.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=gt}set _placement(gt){(0,hn.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=gt}set _isOpen(gt){(0,hn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=gt}get _isOpen(){return(0,hn.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(gt){(0,hn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!gt}get _enable(){return(0,hn.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(gt){(0,hn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=gt?"body":this.container}get _appendToBody(){return(0,hn.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(gt){(0,hn.eG)("tooltipClass deprecated")}set _tooltipContext(gt){(0,hn.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(gt){(0,hn.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=gt}get _tooltipTrigger(){return(0,hn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(gt){(0,hn.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(gt||"").toString()}constructor(gt,wt,si,$e,ii,oi){this._elementRef=$e,this._renderer=ii,this._positionService=oi,this.tooltipId=Je++,this.adaptivePosition=!0,this.tooltipChange=new k._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new k._w7,this._tooltip=wt.createLoader(this._elementRef,gt,this._renderer).provide({provide:Fe,useValue:si}),Object.assign(this,si),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(gt=>{gt||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const gt=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(Ue).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},wt=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,Oe.k)(this.delay).subscribe(()=>{gt(),wt()}),this.triggers&&(0,hn.GY)(this.triggers).forEach(si=>{si.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,si.close,()=>{this._delaySubscription?.unsubscribe(),wt()}))})):gt()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(wt){return new(wt||Pt)(k.GI1(k.y8U),k.GI1(V.Sy),k.GI1(Fe),k.GI1(k.GMv),k.GI1(k.q87),k.GI1(ze.O4))};static#t=this.\u0275dir=k.Sc5({type:Pt,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[k.Wk5.None,"tooltipHtml","htmlContent"],_placement:[k.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[k.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[k.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[k.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[k.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[k.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[k.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[k.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,i.UN)([(0,hn.s9)(),(0,i.YR)("design:type",Object)],Pt.prototype,"tooltip",void 0),Pt})(),mt=(()=>{class Pt{static forRoot(){return{ngModule:Pt,providers:[V.Sy,ze.O4]}}static#e=this.\u0275fac=function(wt){return new(wt||Pt)};static#t=this.\u0275mod=k.a4G({type:Pt});static#i=this.\u0275inj=k.s3X({imports:[Ae.MD]})}return Pt})()}}]);