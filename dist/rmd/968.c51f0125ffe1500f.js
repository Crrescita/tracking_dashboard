(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{3364:(ms,lr,Et)=>{"use strict";Et.d(lr,{W:()=>c});var e=Et(7048),Mi=Et(6716),He=Et(4496);let c=(()=>{class Z{constructor(we){this.http=we,this.apiUrl=Mi.O.apiUrl,this.headers=new e.UD({"Content-Type":"application/json; charset=utf-8"});const Se=localStorage.getItem("access_token"),Le=localStorage.getItem("userType");Se&&(this.headers=this.headers.set("access_token",`Bearer ${Se}`),this.headers=this.headers.set("userType",`${Le}`))}fetchBannerSection(we,Se){const Le={headers:new e.UD({"Content-Type":"application/json",Authorization:"Auth "+we})};return this.http.get(this.apiUrl+"homebanner/"+Se,Le)}updateBannerSection(we,Se,Le){return this.http.patch(this.apiUrl+"homebanner/"+Le,Se)}updateData(we,Se){return this.http.put(this.apiUrl,Se)}deleteData(we){return this.http.delete(we)}put(we,Se,Le){return this.http.put(`${this.apiUrl+we}/${Se}`,Le)}postwithid(we,Se,Le){return this.http.post(`${this.apiUrl+we}/${Se}`,Le)}post(we,Se){return console.log(Se),this.http.post(`${this.apiUrl+we}`,Se)}get(we,Se){return this.http.get(`${this.apiUrl+we}/${Se}`)}getwithoutid(we){return this.http.get(`${this.apiUrl+we}`)}deleteWithId(we,Se){return this.http.delete(`${this.apiUrl+we}/${Se}`)}static#e=this.\u0275fac=function(Se){return new(Se||Z)(He.CoB(e.KK))};static#t=this.\u0275prov=He.wxM({token:Z,factory:Z.\u0275fac,providedIn:"root"})}return Z})()},3528:(ms,lr,Et)=>{"use strict";Et.r(lr),Et.d(lr,{CustomPagesModule:()=>up});var e=Et(4496),Mi=Et(6708),He=Et(2728),c=Et(6504),Z=Et(3756),Be=Et.n(Z),we=Et(4400),Se=Et(3364),Le=Et(7048),Te=Et(1368),Ve=Et(2308),We=Et(8216),ut=Et(1768);function vt(M,be){1&M&&e.OEk(0," Layout A ")}function tt(M,be){1&M&&e.OEk(0," Layout B ")}const ze=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function ct(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",78),e.OEk(2),e.C$Y(),e.I0R(3,"td",79),e.OEk(4),e.C$Y(),e.I0R(5,"td",80)(6,"div",81)(7,"div",82),e.wR5(8,"img",83),e.C$Y()()(),e.I0R(9,"td",79),e.yuY(10,vt,1,0)(11,tt,1,0),e.C$Y(),e.I0R(12,"td",84)(13,"div",85)(14,"input",86),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt.id,y))}),e.C$Y(),e.I0R(15,"label",87)(16,"span",88),e.OEk(17),e.C$Y()()()(),e.I0R(18,"td",89)(19,"ul",90)(20,"li")(21,"a",91),e.wR5(22,"i",19),e.OEk(23," Add Details "),e.C$Y()(),e.I0R(24,"li")(25,"a",92),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(64).show(),e.CGJ(dt.edit(Ke))}),e.wR5(26,"i",93),e.C$Y()(),e.I0R(27,"li")(28,"a",94),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(29,"i",95),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.title," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(2),e.C0Y(10,"layoutA"==h.layout_type?10:11),e.yG2(4),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(10,ze,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status),e.yG2(4),e.E7m("routerLink","layoutA"===h.layout_type?"/service/layout-a/"+h.id:"/service/layout-b/"+h.id)}}function qt(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",96)(2,"span",97),e.OEk(3,"Loading..."),e.C$Y()()())}function Je(M,be){1&M&&e.OEk(0," Add Service ")}function Jt(M,be){1&M&&e.OEk(0," Edit Service ")}function yi(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"title is required."),e.C$Y())}function rt(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"Title must be at most 45 characters"),e.C$Y())}function bi(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"Description is required"),e.C$Y())}function ci(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1," Description must be at most 250 characters "),e.C$Y())}function ti(M,be){if(1&M&&e.wR5(0,"img",111),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImagePreview,e.K6U)}}function St(M,be){if(1&M&&(e.I0R(0,"h5",112),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.name," ")}}function pi(M,be){if(1&M&&(e.I0R(0,"p",113),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.size," ")}}function vi(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",99)(1,"li",100)(2,"div",101)(3,"div",102)(4,"div",103)(5,"div",104),e.yuY(6,ti,1,1,"img",105),e.C$Y()(),e.I0R(7,"div",106)(8,"div",107),e.yuY(9,St,2,1,"h5",108)(10,pi,2,1,"p",109),e.C$Y()(),e.I0R(11,"div",103)(12,"button",110),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImage.size?10:-1)}}function Ti(M,be){if(1&M&&(e.I0R(0,"div",114)(1,"div")(2,"label",53),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",115),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImage,e.K6U)}}function Ji(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"Image is required."),e.C$Y())}function Ii(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"Layout type is required."),e.C$Y())}function ki(M,be){1&M&&(e.I0R(0,"div",98),e.OEk(1,"Status is required."),e.C$Y())}function Zi(M,be){1&M&&(e.I0R(0,"button",116),e.OEk(1," Save Changes "),e.C$Y())}function pn(M,be){1&M&&(e.I0R(0,"button",117),e.wR5(1,"span",118),e.OEk(2," Please wait "),e.C$Y())}const ji=M=>({"is-invalid":M});let gn=(()=>{class M{constructor(h,$,y,Ke){this.formBuilder=h,this.toastService=$,this.api=y,this.http=Ke,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.editId=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.serviceData=[],this.serviceDataList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Services",active:!0}],this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required,c.AQ.maxLength(250)]],image:["",this.imageValidator()],layout_type:["",[c.AQ.required]],position:[""],status:["",[c.AQ.required]]})}imageValidator(){return h=>null==this.editId?c.AQ.required(h):null}get s2(){return this.formGroup.controls}imageSelect(h){const $=h.target.files[0];$&&(this.selectedImage=$,this.selectedImagePreview=URL.createObjectURL($))}removeImage(){this.selectedImage=null,this.selectedImagePreview=null}getData(){this.api.getwithoutid("service").subscribe(h=>{h&&h.status?(this.serviceData=h.data||[],this.serviceDataList=h.data||[]):(this.clearServiceData(),this.handleError("Unexpected response format"))},h=>{this.clearServiceData(),this.handleError(h.message||"An error occurred while fetching data")})}clearServiceData(){this.serviceData=[],this.serviceDataList=[]}onSubmit(h){if(this.formGroup.valid){this.toggleSpinner(!0);const $=this.createFormData();null!=this.editId?this.updateService(h,$,this.editId):this.addService(h,$)}else this.formGroup.markAllAsTouched()}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImage&&h.append("image",this.selectedImage),h.append("title",this.s2.title.value),h.append("description",this.s2.description.value),h.append("layout_type",this.s2.layout_type.value),h.append("position",this.s2.position.value),h.append("status",this.s2.status.value),h}updateService(h,$,y){this.api.put("service",y,$).subscribe(Ke=>this.handleResponse(Ke,h),Ke=>this.handleError(Ke))}addService(h,$){this.api.post("service",$).subscribe(y=>this.handleResponse(y,h),y=>this.handleError(y))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("service",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}setStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("service",h,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getData()):this.toastService.error("Oops! Something went wrong")}handleResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getData(),$.hide(),this.toastService.success("Data Saved Successfully!!"),this.resetForm()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}resetForm(){this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.editId=null,this.formGroup.reset()}filterdata(){this.serviceData=this.term?this.serviceDataList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.serviceDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.serviceData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.serviceDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.serviceData=this.serviceDataList.slice(h,this.endItem)}edit(h){this.initializeForm(),this.editId=h.id,this.formGroup.patchValue({title:h.title,description:h.description,layout_type:h.layout_type,position:h.position,status:h.status}),this.uploadedImage=h.image}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(we.SA),e.GI1(Se.W),e.GI1(Le.KK))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-add-service"]],decls:146,vars:26,consts:[["title","Services",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],["bsModal","","id","modal",1,"modal","fade"],["modal","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"form-label"],["placeholder","Must enter maximum of a 250 characters","rows","5","formControlName","description",1,"form-control",3,"ngClass"],[1,"custom-modal-dropzone"],["type","file","id","imageupload","accept","image/*","formControlName","image","hidden","",3,"change"],["imageupload",""],["for","imageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],["for","addstatus",1,"form-label"],["formControlName","layout_type","data-choices","","id","addlayout_type",1,"form-control",3,"ngClass"],["value",""],["value","layoutA"],["value","layoutB"],["for","position",1,"form-label"],["type","number","id","position","formControlName","position","placeholder","Enter position",1,"form-control",3,"ngClass"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-dark","px-2","py-1",3,"routerLink"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.wR5(12,"div",11),e.C$Y()(),e.I0R(13,"div",12)(14,"div",13)(15,"input",14),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",15),e.C$Y()(),e.I0R(17,"div",16)(18,"div",17)(19,"div")(20,"a",18),e.qCj("click",function(){return e.usT(Ke),e.Gew(64).show(),e.CGJ(y.resetForm())}),e.wR5(21,"i",19),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",4)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"Title"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33,"Image"),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Layout"),e.C$Y(),e.I0R(36,"th",23),e.OEk(37,"Status"),e.C$Y(),e.I0R(38,"th",24),e.OEk(39,"Action"),e.C$Y()()(),e.I0R(40,"tbody",25),e.c53(41,ct,30,13,"tr",null,e.wJt),e.C$Y()(),e.I0R(43,"div",26)(44,"div",27),e.wR5(45,"i",28),e.I0R(46,"h5",29),e.OEk(47,"Sorry! No Result Found"),e.C$Y(),e.I0R(48,"p",30),e.OEk(49," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(50,"div",31)(51,"div",32)(52,"div",33),e.OEk(53," Showing "),e.I0R(54,"span",34),e.OEk(55),e.C$Y(),e.OEk(56," of "),e.I0R(57,"span",34),e.OEk(58),e.C$Y(),e.OEk(59," Results "),e.C$Y()(),e.I0R(60,"div",35)(61,"pagination",36),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()(),e.yuY(62,qt,4,0,"div",37),e.C$Y()()()(),e.I0R(63,"div",38,39)(65,"div",40)(66,"div",41)(67,"div",42)(68,"h5",43),e.yuY(69,Je,1,0)(70,Jt,1,0),e.C$Y(),e.I0R(71,"button",44),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(64);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(72,"form",45),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(64);return e.CGJ(y.onSubmit(ai))}),e.I0R(73,"div",46),e.wR5(74,"div",47),e.I0R(75,"div",48)(76,"label",49),e.OEk(77,"Title"),e.I0R(78,"span",50),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",51),e.yuY(81,yi,2,0,"div",52)(82,rt,2,0,"div",52),e.C$Y(),e.I0R(83,"div",48)(84,"label",53),e.OEk(85,"Description "),e.I0R(86,"span",50),e.OEk(87,"*"),e.C$Y()(),e.wR5(88,"textarea",54),e.yuY(89,bi,2,0,"div",52)(90,ci,2,0,"div",52),e.C$Y(),e.I0R(91,"div",48)(92,"label",53),e.OEk(93,"Image"),e.I0R(94,"span",50),e.OEk(95,"*"),e.C$Y()(),e.I0R(96,"div",55)(97,"input",56,57),e.qCj("change",function(ai){return y.imageSelect(ai)}),e.C$Y(),e.I0R(99,"label",58)(100,"span",59),e.OEk(101,"Choose a file to upload. "),e.wR5(102,"br"),e.I0R(103,"span",60),e.OEk(104,"File size 311 \xd7 415 px "),e.C$Y()()()(),e.yuY(105,vi,14,3,"ul",61)(106,Ti,7,1,"div",62)(107,Ji,2,0,"div",52),e.C$Y(),e.I0R(108,"div",48)(109,"label",63),e.OEk(110,"Select Layout "),e.I0R(111,"span",50),e.OEk(112,"*"),e.C$Y()(),e.I0R(113,"select",64)(114,"option",65),e.OEk(115,"Select Layout type"),e.C$Y(),e.I0R(116,"option",66),e.OEk(117,"Layout A"),e.C$Y(),e.I0R(118,"option",67),e.OEk(119,"Layout B"),e.C$Y()(),e.yuY(120,Ii,2,0,"div",52),e.C$Y(),e.I0R(121,"div",48)(122,"label",68),e.OEk(123,"Position"),e.wR5(124,"span",50),e.C$Y(),e.wR5(125,"input",69),e.C$Y(),e.I0R(126,"div",48)(127,"label",63),e.OEk(128,"Status "),e.I0R(129,"span",50),e.OEk(130,"*"),e.C$Y()(),e.I0R(131,"select",70)(132,"option",65),e.OEk(133,"Select Status"),e.C$Y(),e.I0R(134,"option",71),e.OEk(135,"Active"),e.C$Y(),e.I0R(136,"option",72),e.OEk(137,"Inactive"),e.C$Y()(),e.yuY(138,ki,2,0,"div",52),e.C$Y()(),e.I0R(139,"div",73)(140,"div",74)(141,"button",75),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(64);return e.CGJ(ai.hide())}),e.wR5(142,"i",76),e.OEk(143," Close "),e.C$Y(),e.yuY(144,Zi,2,0,"button",77)(145,pn,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(26),e.oho(y.serviceData),e.yG2(14),e.cNF(null==y.serviceData?null:y.serviceData.length),e.yG2(3),e.cNF(null==y.serviceDataList?null:y.serviceDataList.length),e.yG2(3),e.E7m("totalItems",null==y.serviceDataList?null:y.serviceDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(62,y.spinnerStatus?62:-1),e.yG2(7),e.C0Y(69,null==y.editId?69:70),e.yG2(3),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(81,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?81:-1),e.yG2(),e.C0Y(82,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?82:-1),e.yG2(6),e.E7m("ngClass",e.S45(24,ji,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(89,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?89:-1),e.yG2(),e.C0Y(90,y.s2.description&&y.s2.description.hasError("maxlength")&&y.s2.description.touched?90:-1),e.yG2(15),e.C0Y(105,y.selectedImage?105:-1),e.yG2(),e.C0Y(106,y.uploadedImage?106:-1),e.yG2(),e.C0Y(107,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?107:-1),e.yG2(6),e.E7m("ngClass",y.s2.layout_type&&y.s2.layout_type.hasError("required")&&y.s2.layout_type.touched?"is-invalid":""),e.yG2(7),e.C0Y(120,y.s2.layout_type&&y.s2.layout_type.hasError("required")&&y.s2.layout_type.touched?120:-1),e.yG2(5),e.E7m("ngClass",y.s2.position&&y.s2.position.hasError("required")&&y.s2.position.touched?"is-invalid":""),e.yG2(6),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(138,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?138:-1),e.yG2(6),e.C0Y(144,y.addSaveButtonActive?144:145))},dependencies:[Te.QF,Mi.O,Ve.ER,c.sz,c.wd,c.GO,c.ot,c.O4,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function tn(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Title is required."),e.C$Y())}function di(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function Wi(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Sub title is required."),e.C$Y())}function _n(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1," Sub title must be at most 45 characters "),e.C$Y())}function Ln(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Description is required"),e.C$Y())}function Gn(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1," Description must be at most 250 characters "),e.C$Y())}function Yn(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Status is required."),e.C$Y())}const on=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function jt(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",82),e.OEk(2),e.C$Y(),e.I0R(3,"td",83),e.OEk(4),e.C$Y(),e.I0R(5,"td",84)(6,"div",85)(7,"div",86),e.wR5(8,"img",87),e.C$Y()()(),e.I0R(9,"td",88)(10,"div",89)(11,"input",90),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.sectionOnesetStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",91)(13,"span",92),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",93)(16,"ul",94)(17,"li")(18,"a",95),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(110).show(),e.CGJ(dt.editSectionOne(Ke))}),e.wR5(19,"i",96),e.C$Y()(),e.I0R(20,"li")(21,"a",97),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(22,"i",98),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.name," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemdteam"+$),e.yG2(),e.E7m("for","customSwitchsizemdteam"+$),e.yG2(),e.E7m("ngClass",e.IBC(8,on,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function gi(M,be){1&M&&e.OEk(0," Add ")}function V(M,be){1&M&&e.OEk(0," Edit ")}function Bi(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Name is required."),e.C$Y())}function $i(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Name must be at most 30 characters"),e.C$Y())}function en(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"designation is required"),e.C$Y())}function Xi(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1," designation must be at most 60 characters "),e.C$Y())}function Qi(M,be){if(1&M&&e.wR5(0,"img",111),2&M){const h=e.GaO(2);e.E7m("src",h.sectionOneselectedImagePreview,e.K6U)}}function Pn(M,be){if(1&M&&(e.I0R(0,"h5",112),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.name," ")}}function fn(M,be){if(1&M&&(e.I0R(0,"p",113),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.size," ")}}function Ci(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",99)(1,"li",100)(2,"div",101)(3,"div",102)(4,"div",103)(5,"div",104),e.yuY(6,Qi,1,1,"img",105),e.C$Y()(),e.I0R(7,"div",106)(8,"div",107),e.yuY(9,Pn,2,1,"h5",108)(10,fn,2,1,"p",109),e.C$Y()(),e.I0R(11,"div",103)(12,"button",110),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.sectionOneremoveImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.sectionOneselectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.sectionOneselectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.sectionOneselectedImage.size?10:-1)}}function En(M,be){if(1&M&&(e.I0R(0,"div",114)(1,"div")(2,"label",66),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",115),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.sectionOneuploadedImage,e.K6U)}}function Dn(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Image is required."),e.C$Y())}function cn(M,be){1&M&&(e.I0R(0,"div",81),e.OEk(1,"Status is required."),e.C$Y())}function br(M,be){1&M&&(e.I0R(0,"button",116),e.OEk(1," Save Changes "),e.C$Y())}function wi(M,be){1&M&&(e.I0R(0,"button",117),e.wR5(1,"span",118),e.OEk(2," Please wait "),e.C$Y())}const Jn=M=>({"is-invalid":M});let zn=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.aboutSectionthree=[],this.aboutSectionthreeList=[],this.editId=null,this.SectionOneHeadingId=null,this.sectionOneHeading=!1,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Our Team",active:!0}],this.sectionHeading=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required,c.AQ.maxLength(250)]],status:["",[c.AQ.required]]}),this.getSectionOneData(),this.getHeading(),this.initializeFormSectionOne()}initializeFormSectionOne(){this.sectionOne=this.formBuilder.group({name:["",[c.AQ.required,c.AQ.maxLength(30)]],designation:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.sectionOneimageValidator()],status:["",[c.AQ.required]]})}sectionOneimageValidator(){return h=>null==this.editId?c.AQ.required(h):null}get sOne(){return this.sectionHeading.controls}get secOne(){return this.sectionOne.controls}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}getSectionOneData(){this.api.getwithoutid("get-team").subscribe(h=>{h&&h.status?(this.aboutSectionthree=h.data||[],this.aboutSectionthreeList=h.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}submitSectionOne(h){if(this.sectionOne.valid){this.toggleSpinner(!0);const $=this.createSectionOneFormData();null!=this.editId?this.updateSectionOne(h,$,this.editId):this.addSectionOne(h,$)}else this.sectionOne.markAllAsTouched()}createSectionOneFormData(){const h=new FormData;return this.sectionOneselectedImage&&h.append("image",this.sectionOneselectedImage),h.append("name",this.secOne.name.value),h.append("designation",this.secOne.designation.value),h.append("status",this.secOne.status.value),h}updateSectionOne(h,$,y){this.api.put("add-team",y,$).subscribe(Ke=>this.handleSectionOneResponse(Ke,h),Ke=>this.handleError(Ke))}addSectionOne(h,$){this.api.post("add-team",$).subscribe(y=>this.handleSectionOneResponse(y,h),y=>this.handleError(y))}sectionOnesetStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("add-team",h,dt).subscribe(ai=>this.handleSectionOneResponse(ai,null),ai=>this.handleError(ai))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("delete-team",h).subscribe(y=>this.handleSectionOneResponse(y,"delete"),y=>this.handleError(y))})}handleSectionOneResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getSectionOneData(),"delete"==$?this.toastService.success("Data deleted Successfully!!"):(this.toastService.success("Data Saved Successfully!!"),this.resetForm(),$.hide())):this.toastService.error("Oops! Something went wrong")}resetForm(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.editId=null,this.sectionOne.reset()}getHeading(){this.toggleSpinner(!0),this.api.get("heading","team-heading").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){const $=h.data[0];this.sectionHeading.patchValue({title:$.title,description:$.description,sub_title:$.sub_title,status:$.status}),this.titleChange.emit($.title),this.SectionOneHeadingId=$.id}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmitHeadingForm(h){if(this.sectionHeading.valid){this.toggleSpinner(!0);const $=this.createFormDataHeading(h);this.addSecontionHeading($)}else this.sectionHeading.markAllAsTouched()}createFormDataHeading(h){return{title:this.sOne.title.value,sub_title:this.sOne.sub_title.value,description:this.sOne.description.value,section_key:"team-heading",status:this.sOne.status.value}}addSecontionHeading(h){this.api.post("add-heading",h).subscribe($=>this.handleHeadingResponse($),$=>this.handleError($))}updateSectionHeading(h){this.api.put("add-team-heading",this.SectionOneHeadingId,h).subscribe(y=>this.handleHeadingResponse(y),y=>this.handleError(y))}handleHeadingResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}sectionOneimageSelect(h){const $=h.target.files[0];$&&(this.sectionOneselectedImage=$,this.sectionOneselectedImagePreview=URL.createObjectURL($))}sectionOneremoveImage(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null}editSectionOne(h){this.initializeFormSectionOne(),this.editId=h.id,this.sectionOne.patchValue({name:h.name,designation:h.designation,status:h.status}),this.sectionOneuploadedImage=h.image}filterdata(){this.aboutSectionthree=this.term?this.aboutSectionthreeList.filter(h=>{const $=this.term.toLowerCase();return h.name.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.aboutSectionthreeList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.aboutSectionthree.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.aboutSectionthreeList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.aboutSectionthree=this.aboutSectionthreeList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-our-team"]],outputs:{titleChange:"titleChange"},decls:174,vars:36,consts:[["title","team",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12"],["id","coursesList",1,"card"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub title",1,"form-control",3,"ngClass"],["placeholder","Must enter maximum of a 250 characters","rows","3","formControlName","description","maxlength","250",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"hstack","gap-2","justify-content-start","mt-4"],[1,"btn","btn-primary"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","team",1,"modal","fade"],["team","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Enter name",1,"form-control",3,"ngClass"],[1,"form-label"],["placeholder","Must enter maximum of a 60 characters","rows","3","formControlName","designation","maxlength","60",1,"form-control",3,"ngClass"],[1,"custom-modal-dropzone"],["type","file","id","sectionOneimageupload","accept","image/*","formControlName","image","hidden","",3,"change"],["sectionOneimageupload",""],["for","sectionOneimageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"invalid-text"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"form",7),e.qCj("submit",function(){return y.onSubmitHeadingForm("section-three-heading")}),e.I0R(9,"div",1)(10,"div",8)(11,"div",9)(12,"label",10),e.OEk(13,"Title"),e.I0R(14,"span",11),e.OEk(15,"*"),e.C$Y()(),e.wR5(16,"input",12),e.yuY(17,tn,2,0,"div",13)(18,di,2,0,"div",13),e.C$Y()(),e.I0R(19,"div",8)(20,"div",9)(21,"label",14),e.OEk(22,"Sub title"),e.I0R(23,"span",11),e.OEk(24,"*"),e.C$Y()(),e.wR5(25,"input",15),e.yuY(26,Wi,2,0,"div",13)(27,_n,2,0,"div",13),e.C$Y()(),e.I0R(28,"div",8)(29,"div",9)(30,"label",14),e.OEk(31,"Description"),e.I0R(32,"span",11),e.OEk(33,"*"),e.C$Y()(),e.wR5(34,"textarea",16),e.yuY(35,Ln,2,0,"div",13)(36,Gn,2,0,"div",13),e.C$Y()(),e.I0R(37,"div",8)(38,"div",9)(39,"label",17),e.OEk(40,"Status "),e.I0R(41,"span",11),e.OEk(42,"*"),e.C$Y()(),e.I0R(43,"select",18)(44,"option",19),e.OEk(45,"Select Status"),e.C$Y(),e.I0R(46,"option",20),e.OEk(47,"Active"),e.C$Y(),e.I0R(48,"option",21),e.OEk(49,"Inactive"),e.C$Y()(),e.yuY(50,Yn,2,0,"div",13),e.C$Y()(),e.I0R(51,"div",8)(52,"div",22)(53,"button",23),e.OEk(54,"Save"),e.C$Y()()()()(),e.wR5(55,"hr"),e.I0R(56,"div",3)(57,"div",24)(58,"div",25)(59,"div",26)(60,"div",27),e.wR5(61,"div",28),e.C$Y()(),e.I0R(62,"div",29)(63,"div",30)(64,"input",31),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(65,"i",32),e.C$Y()(),e.I0R(66,"div",33)(67,"div",34)(68,"div")(69,"a",35),e.qCj("click",function(){return e.usT(Ke),e.Gew(110).show(),e.CGJ(y.resetForm())}),e.wR5(70,"i",36),e.OEk(71,"Add"),e.C$Y()()()()()(),e.I0R(72,"div",4)(73,"div",37)(74,"table",38)(75,"thead",39)(76,"tr")(77,"th",40),e.OEk(78,"S No."),e.C$Y(),e.I0R(79,"th",40),e.OEk(80,"Name"),e.C$Y(),e.I0R(81,"th",40),e.OEk(82,"Image"),e.C$Y(),e.I0R(83,"th",40),e.OEk(84,"Status"),e.C$Y(),e.I0R(85,"th",41),e.OEk(86,"Action"),e.C$Y()()(),e.I0R(87,"tbody",42),e.c53(88,jt,23,11,"tr",null,e.wJt),e.C$Y()(),e.I0R(90,"div",43)(91,"div",44),e.wR5(92,"i",45),e.I0R(93,"h5",46),e.OEk(94,"Sorry! No Result Found"),e.C$Y(),e.I0R(95,"p",47),e.OEk(96," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(97,"div",48)(98,"div",49)(99,"div",50),e.OEk(100," Showing "),e.I0R(101,"span",51),e.OEk(102),e.C$Y(),e.OEk(103," of "),e.I0R(104,"span",51),e.OEk(105),e.C$Y(),e.OEk(106," Results "),e.C$Y()(),e.I0R(107,"div",52)(108,"pagination",53),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()()()()()()(),e.I0R(109,"div",54,55)(111,"div",56)(112,"div",57)(113,"div",58)(114,"h5",59),e.yuY(115,gi,1,0)(116,V,1,0),e.C$Y(),e.I0R(117,"button",60),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(110);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(118,"form",61),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(110);return e.CGJ(y.submitSectionOne(ai))}),e.I0R(119,"div",62),e.wR5(120,"div",63),e.I0R(121,"div",9)(122,"label",64),e.OEk(123,"Name"),e.I0R(124,"span",11),e.OEk(125,"*"),e.C$Y()(),e.wR5(126,"input",65),e.yuY(127,Bi,2,0,"div",13)(128,$i,2,0,"div",13),e.C$Y(),e.I0R(129,"div",9)(130,"label",66),e.OEk(131,"Designation "),e.I0R(132,"span",11),e.OEk(133,"*"),e.C$Y()(),e.wR5(134,"textarea",67),e.yuY(135,en,2,0,"div",13)(136,Xi,2,0,"div",13),e.C$Y(),e.I0R(137,"div",9)(138,"label",66),e.OEk(139,"Image"),e.I0R(140,"span",11),e.OEk(141,"*"),e.C$Y()(),e.I0R(142,"div",68)(143,"input",69,70),e.qCj("change",function(ai){return y.sectionOneimageSelect(ai)}),e.C$Y(),e.I0R(145,"label",71)(146,"span",72),e.OEk(147,"Choose a file to upload. "),e.wR5(148,"br"),e.I0R(149,"span",73),e.OEk(150,"File size 250 \xd7 250 px "),e.C$Y()()()(),e.yuY(151,Ci,14,3,"ul",74)(152,En,7,1,"div",75)(153,Dn,2,0,"div",13),e.C$Y(),e.I0R(154,"div",9)(155,"label",17),e.OEk(156,"Status "),e.I0R(157,"span",11),e.OEk(158,"*"),e.C$Y()(),e.I0R(159,"select",18)(160,"option",19),e.OEk(161,"Select Status"),e.C$Y(),e.I0R(162,"option",20),e.OEk(163,"Active"),e.C$Y(),e.I0R(164,"option",21),e.OEk(165,"Inactive"),e.C$Y()(),e.yuY(166,cn,2,0,"div",13),e.C$Y()(),e.I0R(167,"div",76)(168,"div",77)(169,"button",78),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(110);return e.CGJ(ai.hide())}),e.wR5(170,"i",79),e.OEk(171," Close "),e.C$Y(),e.yuY(172,br,2,0,"button",80)(173,wi,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(8),e.E7m("formGroup",y.sectionHeading),e.yG2(8),e.E7m("ngClass",y.sOne.title&&y.sOne.title.hasError("required")&&y.sOne.title.touched?"is-invalid":""),e.yG2(),e.C0Y(17,y.sOne.title&&y.sOne.title.hasError("required")&&y.sOne.title.touched?17:-1),e.yG2(),e.C0Y(18,y.sOne.title&&y.sOne.title.hasError("maxlength")&&y.sOne.title.touched?18:-1),e.yG2(7),e.E7m("ngClass",y.sOne.sub_title&&y.sOne.sub_title.hasError("required")&&y.sOne.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(26,y.sOne.sub_title&&y.sOne.sub_title.hasError("required")&&y.sOne.sub_title.touched?26:-1),e.yG2(),e.C0Y(27,y.sOne.sub_title&&y.sOne.sub_title.hasError("maxlength")&&y.sOne.sub_title.touched?27:-1),e.yG2(7),e.E7m("ngClass",e.S45(32,Jn,y.sOne.description&&y.sOne.description.errors&&y.sOne.description.touched)),e.yG2(),e.C0Y(35,y.sOne.description&&y.sOne.description.hasError("required")&&y.sOne.description.touched?35:-1),e.yG2(),e.C0Y(36,y.sOne.description&&y.sOne.description.hasError("maxlength")&&y.sOne.description.touched?36:-1),e.yG2(7),e.E7m("ngClass",y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(50,y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?50:-1),e.yG2(14),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.aboutSectionthree),e.yG2(14),e.cNF(null==y.aboutSectionthree?null:y.aboutSectionthree.length),e.yG2(3),e.cNF(null==y.aboutSectionthreeList?null:y.aboutSectionthreeList.length),e.yG2(3),e.E7m("totalItems",null==y.aboutSectionthreeList?null:y.aboutSectionthreeList.length)("itemsPerPage",5),e.yG2(7),e.C0Y(115,null==y.editId?115:116),e.yG2(3),e.E7m("formGroup",y.sectionOne),e.yG2(8),e.E7m("ngClass",y.secOne.name&&y.secOne.name.hasError("required")&&y.secOne.name.touched?"is-invalid":""),e.yG2(),e.C0Y(127,y.secOne.name&&y.secOne.name.hasError("required")&&y.secOne.name.touched?127:-1),e.yG2(),e.C0Y(128,y.secOne.name&&y.secOne.name.hasError("maxlength")&&y.secOne.name.touched?128:-1),e.yG2(6),e.E7m("ngClass",e.S45(34,Jn,y.secOne.designation&&y.secOne.designation.errors&&y.secOne.designation.touched)),e.yG2(),e.C0Y(135,y.secOne.designation&&y.secOne.designation.hasError("required")&&y.secOne.designation.touched?135:-1),e.yG2(),e.C0Y(136,y.secOne.designation&&y.secOne.designation.hasError("maxlength")&&y.secOne.designation.touched?136:-1),e.yG2(15),e.C0Y(151,y.sectionOneselectedImage?151:-1),e.yG2(),e.C0Y(152,y.sectionOneuploadedImage?152:-1),e.yG2(),e.C0Y(153,y.secOne.image&&y.secOne.image.hasError("required")&&y.secOne.image.touched?153:-1),e.yG2(6),e.E7m("ngClass",y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(166,y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?166:-1),e.yG2(6),e.C0Y(172,y.addSaveButtonActive?172:173))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.Mj,c._G,c.uW,c.Wo,We.im,ut.uK],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.videoo-avatar-sm[_ngcontent-%COMP%]{width:3rem}.founder-heading[_ngcontent-%COMP%]{color:#000}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.multi-image-scroll[_ngcontent-%COMP%]{height:270px;overflow-y:scroll}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:transparent;border-radius:10px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8080804a;border-radius:10px}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-modalfile-text[_ngcontent-%COMP%]{font-size:1rem;color:#666}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-file-text2[_ngcontent-%COMP%]{font-size:1rem;color:#b3b3b3}.custom-file-text2-mob[_ngcontent-%COMP%]{font-size:.8rem;color:#b3b3b3}.custom-file-text-mob[_ngcontent-%COMP%]{font-size:1rem;color:#666}']})}return M})();function On(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Title is required."),e.C$Y())}function sr(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function fr(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Sub title is required."),e.C$Y())}function Yr(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1," Sub title must be at most 45 characters "),e.C$Y())}function Nn(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Status is required."),e.C$Y())}const _r=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function ur(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",77),e.OEk(2),e.C$Y(),e.I0R(3,"td",78),e.OEk(4),e.C$Y(),e.I0R(5,"td",79)(6,"div",80)(7,"input",81),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.sectionOnesetStatus(dt,y))}),e.C$Y(),e.I0R(8,"label",82)(9,"span",83),e.OEk(10),e.C$Y()()()(),e.I0R(11,"td",84)(12,"ul",85)(13,"li")(14,"a",86),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(99).show(),e.CGJ(dt.editSectionOne(Ke))}),e.wR5(15,"i",87),e.C$Y()(),e.I0R(16,"li")(17,"a",88),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(18,"i",89),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.name," "),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemddata"+$),e.yG2(),e.E7m("for","customSwitchsizemddata"+$),e.yG2(),e.E7m("ngClass",e.IBC(7,_r,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function mr(M,be){1&M&&e.OEk(0," Add ")}function kr(M,be){1&M&&e.OEk(0," Edit ")}function Ft(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Name is required."),e.C$Y())}function Ze(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Name must be at most 45 characters"),e.C$Y())}function Qe(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"testimonials is required"),e.C$Y())}function Mt(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1," testimonials must be at most 500 characters "),e.C$Y())}function Tt(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Type is required."),e.C$Y())}function Zt(M,be){1&M&&(e.I0R(0,"div",76),e.OEk(1,"Status is required."),e.C$Y())}function Pt(M,be){1&M&&(e.I0R(0,"button",90),e.OEk(1," Save Changes "),e.C$Y())}function Nt(M,be){1&M&&(e.I0R(0,"button",91),e.wR5(1,"span",92),e.OEk(2," Please wait "),e.C$Y())}const ae=M=>({"is-invalid":M});let Ne=(()=>{class M{constructor(h,$,y,Ke,dt){this.formBuilder=h,this.api=$,this.toastService=y,this.route=Ke,this.router=dt,this.titleChange=new e._w7,this.testimonialData=[],this.testimonialDataList=[],this.editId=null,this.SectionOneHeadingId=null,this.sectionOneHeading=!1,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Testimonial",active:!0}],this.sectionHeading=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(45)]],status:["",[c.AQ.required]]}),this.getSectionOneData(),this.getHeading(),this.initializeFormSectionOne()}initializeFormSectionOne(){this.sectionOne=this.formBuilder.group({name:["",[c.AQ.required,c.AQ.maxLength(45)]],testimonials:["",[c.AQ.required,c.AQ.maxLength(500)]],type:["",[c.AQ.required]],status:["",[c.AQ.required]]})}get sOne(){return this.sectionHeading.controls}get secOne(){return this.sectionOne.controls}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}getSectionOneData(){this.api.getwithoutid("get-testimonials").subscribe(h=>{h&&h.status?(this.testimonialData=h.data||[],this.testimonialDataList=h.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}submitSectionOne(h){if(this.sectionOne.valid){this.toggleSpinner(!0);const $=this.createSectionOneFormData();null!=this.editId?this.updateSectionOne(h,$,this.editId):this.addSectionOne(h,$)}else this.sectionOne.markAllAsTouched()}createSectionOneFormData(){return{name:this.secOne.name.value,testimonials:this.secOne.testimonials.value,type:this.secOne.type.value,status:this.secOne.status.value}}updateSectionOne(h,$,y){this.api.put("add-testimonials",y,$).subscribe(Ke=>this.handleSectionOneResponse(Ke,h),Ke=>this.handleError(Ke))}addSectionOne(h,$){this.api.post("add-testimonials",$).subscribe(y=>this.handleSectionOneResponse(y,h),y=>this.handleError(y))}sectionOnesetStatus(h,$){const dt={name:h.name,testimonials:h.testimonials,type:h.type,status:$.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("add-testimonials",h.id,dt).subscribe(ai=>this.handleSectionOneResponse(ai,null),ai=>this.handleError(ai))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("delete-testimonials",h).subscribe(y=>this.handleSectionOneResponse(y,"delete"),y=>this.handleError(y))})}handleSectionOneResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getSectionOneData(),"delete"==$?this.toastService.success("Data deleted Successfully!!"):(this.toastService.success("Data Saved Successfully!!"),this.resetForm(),$.hide())):this.toastService.error(h.message)}resetForm(){this.editId=null,this.sectionOne.reset()}getHeading(){this.toggleSpinner(!0),this.api.get("heading","testimonial-heading").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){const $=h.data[0];this.sectionHeading.patchValue({title:$.title,sub_title:$.sub_title,status:$.status}),this.SectionOneHeadingId=$.id,this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmitHeadingForm(h){if(this.sectionHeading.valid){this.toggleSpinner(!0);const $=this.createFormDataHeading(h);this.addSecontionHeading($)}else this.sectionHeading.markAllAsTouched()}createFormDataHeading(h){return{title:this.sOne.title.value,sub_title:this.sOne.sub_title.value,description:"",section_key:"testimonial-heading",status:this.sOne.status.value}}addSecontionHeading(h){this.api.post("add-heading",h).subscribe($=>this.handleHeadingResponse($),$=>this.handleError($))}handleHeadingResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}editSectionOne(h){this.initializeFormSectionOne(),this.editId=h.id,this.sectionOne.patchValue({name:h.name,testimonials:h.testimonials,type:h.type,status:h.status})}filterdata(){this.testimonialData=this.term?this.testimonialDataList.filter(h=>{const $=this.term.toLowerCase();return h.name.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.testimonialDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.testimonialData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.testimonialDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.testimonialData=this.testimonialDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA),e.GI1(Ve.gV),e.GI1(Ve.E5))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-testimonials"]],outputs:{titleChange:"titleChange"},decls:159,vars:31,consts:[["title","Testimonial",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12"],["id","coursesList",1,"card"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub title",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"hstack","gap-2","justify-content-start","mt-4"],[1,"btn","btn-primary"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","testimonial",1,"modal","fade"],["testimonial","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Enter name",1,"form-control",3,"ngClass"],[1,"form-label"],["placeholder","Must enter maximum of a 500 characters","rows","5","formControlName","testimonials",1,"form-control",3,"ngClass"],["for","addtype",1,"form-label"],["formControlName","type","data-choices","","id","addtype",1,"form-control",3,"ngClass"],["value","about"],["value","science"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"invalid-text"],[1,"id"],[1,"instructor"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"form",7),e.qCj("submit",function(){return y.onSubmitHeadingForm("section-three-heading")}),e.I0R(9,"div",1)(10,"div",8)(11,"div",9)(12,"label",10),e.OEk(13,"Title"),e.I0R(14,"span",11),e.OEk(15,"*"),e.C$Y()(),e.wR5(16,"input",12),e.yuY(17,On,2,0,"div",13)(18,sr,2,0,"div",13),e.C$Y()(),e.I0R(19,"div",8)(20,"div",9)(21,"label",14),e.OEk(22,"Sub title"),e.I0R(23,"span",11),e.OEk(24,"*"),e.C$Y()(),e.wR5(25,"input",15),e.yuY(26,fr,2,0,"div",13)(27,Yr,2,0,"div",13),e.C$Y()(),e.I0R(28,"div",8)(29,"div",9)(30,"label",16),e.OEk(31,"Status "),e.I0R(32,"span",11),e.OEk(33,"*"),e.C$Y()(),e.I0R(34,"select",17)(35,"option",18),e.OEk(36,"Select Status"),e.C$Y(),e.I0R(37,"option",19),e.OEk(38,"Active"),e.C$Y(),e.I0R(39,"option",20),e.OEk(40,"Inactive"),e.C$Y()(),e.yuY(41,Nn,2,0,"div",13),e.C$Y()(),e.I0R(42,"div",8)(43,"div",21)(44,"button",22),e.OEk(45,"Save"),e.C$Y()()()()(),e.wR5(46,"hr"),e.I0R(47,"div",3)(48,"div",23)(49,"div",24)(50,"div",25)(51,"div",26),e.wR5(52,"div",27),e.C$Y()(),e.I0R(53,"div",28)(54,"div",29)(55,"input",30),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(56,"i",31),e.C$Y()(),e.I0R(57,"div",32)(58,"div",33)(59,"div")(60,"a",34),e.qCj("click",function(){return e.usT(Ke),e.Gew(99).show(),e.CGJ(y.resetForm())}),e.wR5(61,"i",35),e.OEk(62,"Add"),e.C$Y()()()()()(),e.I0R(63,"div",4)(64,"div",36)(65,"table",37)(66,"thead",38)(67,"tr")(68,"th",39),e.OEk(69,"S No."),e.C$Y(),e.I0R(70,"th",39),e.OEk(71,"Name"),e.C$Y(),e.I0R(72,"th",39),e.OEk(73,"Status"),e.C$Y(),e.I0R(74,"th",40),e.OEk(75,"Action"),e.C$Y()()(),e.I0R(76,"tbody",41),e.c53(77,ur,19,10,"tr",null,e.wJt),e.C$Y()(),e.I0R(79,"div",42)(80,"div",43),e.wR5(81,"i",44),e.I0R(82,"h5",45),e.OEk(83,"Sorry! No Result Found"),e.C$Y(),e.I0R(84,"p",46),e.OEk(85," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(86,"div",47)(87,"div",48)(88,"div",49),e.OEk(89," Showing "),e.I0R(90,"span",50),e.OEk(91),e.C$Y(),e.OEk(92," of "),e.I0R(93,"span",50),e.OEk(94),e.C$Y(),e.OEk(95," Results "),e.C$Y()(),e.I0R(96,"div",51)(97,"pagination",52),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()()()()()()(),e.I0R(98,"div",53,54)(100,"div",55)(101,"div",56)(102,"div",57)(103,"h5",58),e.yuY(104,mr,1,0)(105,kr,1,0),e.C$Y(),e.I0R(106,"button",59),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(99);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(107,"form",60),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(99);return e.CGJ(y.submitSectionOne(ai))}),e.I0R(108,"div",61),e.wR5(109,"div",62),e.I0R(110,"div",9)(111,"label",63),e.OEk(112,"Name"),e.I0R(113,"span",11),e.OEk(114,"*"),e.C$Y()(),e.wR5(115,"input",64),e.yuY(116,Ft,2,0,"div",13)(117,Ze,2,0,"div",13),e.C$Y(),e.I0R(118,"div",9)(119,"label",65),e.OEk(120,"Testimonial "),e.I0R(121,"span",11),e.OEk(122,"*"),e.C$Y()(),e.wR5(123,"textarea",66),e.yuY(124,Qe,2,0,"div",13)(125,Mt,2,0,"div",13),e.C$Y(),e.I0R(126,"div",9)(127,"label",67),e.OEk(128),e.I0R(129,"span",11),e.OEk(130,"*"),e.C$Y()(),e.I0R(131,"select",68)(132,"option",18),e.OEk(133,"Select Type"),e.C$Y(),e.I0R(134,"option",69),e.OEk(135,"About"),e.C$Y(),e.I0R(136,"option",70),e.OEk(137,"Science"),e.C$Y()(),e.yuY(138,Tt,2,0,"div",13),e.C$Y(),e.I0R(139,"div",9)(140,"label",16),e.OEk(141,"Status "),e.I0R(142,"span",11),e.OEk(143,"*"),e.C$Y()(),e.I0R(144,"select",17)(145,"option",18),e.OEk(146,"Select Status"),e.C$Y(),e.I0R(147,"option",19),e.OEk(148,"Active"),e.C$Y(),e.I0R(149,"option",20),e.OEk(150,"Inactive"),e.C$Y()(),e.yuY(151,Zt,2,0,"div",13),e.C$Y()(),e.I0R(152,"div",71)(153,"div",72)(154,"button",73),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(99);return e.CGJ(ai.hide())}),e.wR5(155,"i",74),e.OEk(156," Close "),e.C$Y(),e.yuY(157,Pt,2,0,"button",75)(158,Nt,3,0),e.C$Y()()()()()()}if(2&$){let Ke;e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(8),e.E7m("formGroup",y.sectionHeading),e.yG2(8),e.E7m("ngClass",y.sOne.title&&y.sOne.title.hasError("required")&&y.sOne.title.touched?"is-invalid":""),e.yG2(),e.C0Y(17,y.sOne.title&&y.sOne.title.hasError("required")&&y.sOne.title.touched?17:-1),e.yG2(),e.C0Y(18,y.sOne.title&&y.sOne.title.hasError("maxlength")&&y.sOne.title.touched?18:-1),e.yG2(7),e.E7m("ngClass",y.sOne.sub_title&&y.sOne.sub_title.hasError("required")&&y.sOne.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(26,y.sOne.sub_title&&y.sOne.sub_title.hasError("required")&&y.sOne.sub_title.touched?26:-1),e.yG2(),e.C0Y(27,y.sOne.sub_title&&y.sOne.sub_title.hasError("maxlength")&&y.sOne.sub_title.touched?27:-1),e.yG2(7),e.E7m("ngClass",y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(41,y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?41:-1),e.yG2(14),e.OKB("ngModel",y.term),e.yG2(22),e.oho(y.testimonialData),e.yG2(14),e.cNF(null==y.testimonialData?null:y.testimonialData.length),e.yG2(3),e.cNF(null==y.testimonialDataList?null:y.testimonialDataList.length),e.yG2(3),e.E7m("totalItems",null==y.testimonialDataList?null:y.testimonialDataList.length)("itemsPerPage",5),e.yG2(7),e.C0Y(104,null==y.editId?104:105),e.yG2(3),e.E7m("formGroup",y.sectionOne),e.yG2(8),e.E7m("ngClass",y.secOne.name&&y.secOne.name.hasError("required")&&y.secOne.name.touched?"is-invalid":""),e.yG2(),e.C0Y(116,y.secOne.name&&y.secOne.name.hasError("required")&&y.secOne.name.touched?116:-1),e.yG2(),e.C0Y(117,y.secOne.name&&y.secOne.name.hasError("maxlength")&&y.secOne.name.touched?117:-1),e.yG2(6),e.E7m("ngClass",e.S45(29,ae,y.secOne.testimonials&&y.secOne.testimonials.errors&&y.secOne.testimonials.touched)),e.yG2(),e.C0Y(124,y.secOne.testimonials&&y.secOne.testimonials.hasError("required")&&y.secOne.testimonials.touched?124:-1),e.yG2(),e.C0Y(125,y.secOne.testimonials&&y.secOne.testimonials.hasError("maxlength")&&y.secOne.testimonials.touched?125:-1),e.yG2(3),e.oRS("Type ",null==(Ke=y.sectionOne.get("type"))?null:Ke.value,""),e.yG2(3),e.E7m("ngClass",y.secOne.type&&y.secOne.type.hasError("required")&&y.secOne.type.touched?"is-invalid":""),e.yG2(7),e.C0Y(138,y.secOne.type&&y.secOne.type.hasError("required")&&y.secOne.type.touched?138:-1),e.yG2(6),e.E7m("ngClass",y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(151,y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?151:-1),e.yG2(6),e.C0Y(157,y.addSaveButtonActive?157:158)}},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK]})}return M})();var et=Et(9048);function Vt(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",30)(2,"span",31),e.OEk(3,"Loading..."),e.C$Y()()())}function $t(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Title is required."),e.C$Y())}function Hi(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function wt(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Description One is required."),e.C$Y())}function At(M,be){if(1&M&&e.wR5(0,"img",45),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function st(M,be){if(1&M&&(e.I0R(0,"h5",46),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function ot(M,be){if(1&M&&(e.I0R(0,"p",47),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function qe(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",33)(1,"li",34)(2,"div",35)(3,"div",36)(4,"div",37)(5,"div",38),e.yuY(6,At,1,1,"img",39),e.C$Y()(),e.I0R(7,"div",40)(8,"div",41),e.yuY(9,st,2,1,"h5",42)(10,ot,2,1,"p",43),e.C$Y()(),e.I0R(11,"div",37)(12,"button",44),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function nt(M,be){}function It(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Banner is required."),e.C$Y())}function ei(M,be){if(1&M&&(e.I0R(0,"div",48)(1,"div")(2,"label",18),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",49),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Yi(M,be){1&M&&(e.I0R(0,"button",50),e.OEk(1,"Save"),e.C$Y())}function Ei(M,be){1&M&&(e.I0R(0,"button",51),e.wR5(1,"span",52),e.OEk(2," Please wait "),e.C$Y())}const Ki=M=>({"is-invalid":M});let Ct=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],banner:["",this.imageValidator()],description:[""]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.getwithoutid("get-service-banner").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.banner,this.formGroup.patchValue({title:$.title,description:$.description})}},h=>this.handleError(h))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-service-banner",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-service-banner",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("banner",this.selectedImageOne),h.append("title",this.s2.title.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-service-banner"]],decls:48,vars:18,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutBanner","accept","image/*","formControlName","banner","hidden","",3,"change"],["aboutBanner",""],["for","aboutBanner",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Vt,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,$t,2,0,"div",12)(16,Hi,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",8)(19,"label",14),e.OEk(20," Description"),e.wR5(21,"span",10),e.C$Y(),e.wR5(22,"ngx-editor-menu",15)(23,"ngx-editor",16),e.yuY(24,wt,2,0,"div",12),e.C$Y()(),e.I0R(25,"div",17)(26,"div",8)(27,"label",18),e.OEk(28,"Banner"),e.I0R(29,"span",10),e.OEk(30,"*"),e.C$Y()(),e.I0R(31,"div",19)(32,"input",20,21),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(34,"label",22)(35,"span",23),e.OEk(36,"Choose a file to upload. "),e.wR5(37,"br"),e.I0R(38,"span",24),e.OEk(39,"File size 1440 \xd7 700 px "),e.C$Y()()()(),e.yuY(40,qe,14,3,"ul",25)(41,nt,0,0)(42,It,2,0,"div",12),e.C$Y()(),e.yuY(43,ei,7,1,"div",26),e.I0R(44,"div",27)(45,"div",28),e.yuY(46,Yi,2,0,"button",29)(47,Ei,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(16,Ki,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(24,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?24:-1),e.yG2(16),e.C0Y(40,y.selectedImageOne?40:-1),e.yG2(),e.C0Y(41,y.uploadedImageOne?41:-1),e.yG2(),e.C0Y(42,y.s2.banner&&y.s2.banner.hasError("required")&&y.s2.banner.touched?42:-1),e.yG2(),e.C0Y(43,y.uploadedImageOne?43:-1),e.yG2(3),e.C0Y(46,y.saveButtonActive?46:47))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Ot(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",35)(2,"span",36),e.OEk(3,"Loading..."),e.C$Y()()())}function xe(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Title is required."),e.C$Y())}function bt(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function Yt(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Description One is required."),e.C$Y())}function Xe(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1," description must be at most 200 characters "),e.C$Y())}function Ut(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Status is required."),e.C$Y())}function pe(M,be){if(1&M&&e.wR5(0,"img",50),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function i(M,be){if(1&M&&(e.I0R(0,"h5",51),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function r(M,be){if(1&M&&(e.I0R(0,"p",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function d(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",38)(1,"li",39)(2,"div",40)(3,"div",41)(4,"div",42)(5,"div",43),e.yuY(6,pe,1,1,"img",44),e.C$Y()(),e.I0R(7,"div",45)(8,"div",46),e.yuY(9,i,2,1,"h5",47)(10,r,2,1,"p",48),e.C$Y()(),e.I0R(11,"div",42)(12,"button",49),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function g(M,be){}function x(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"image is required."),e.C$Y())}function w(M,be){if(1&M&&(e.I0R(0,"div",53)(1,"div")(2,"label",23),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",54),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function I(M,be){1&M&&(e.I0R(0,"button",55),e.OEk(1,"Save"),e.C$Y())}function R(M,be){1&M&&(e.I0R(0,"button",56),e.wR5(1,"span",57),e.OEk(2," Please wait "),e.C$Y())}const Y=M=>({"is-invalid":M});let W=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null}ngOnInit(){this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],image:["",this.imageValidator()],description:["",c.AQ.maxLength(200)],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("form-data","service").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("add-form-data",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("add-form-data",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("type","service"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-service-contact-form"]],outputs:{titleChange:"titleChange"},decls:65,vars:17,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],["for","description",1,"form-label"],["placeholder","Enter description","rows","5","formControlName","description","maxlength","150",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-lg-12"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Ot,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,xe,2,0,"div",12)(16,bt,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",8)(19,"label",14),e.OEk(20," Description"),e.wR5(21,"span",10),e.C$Y(),e.wR5(22,"textarea",15),e.yuY(23,Yt,2,0,"div",12)(24,Xe,2,0,"div",12),e.C$Y()(),e.I0R(25,"div",7)(26,"div",8)(27,"label",16),e.OEk(28,"Status "),e.I0R(29,"span",10),e.OEk(30,"*"),e.C$Y()(),e.I0R(31,"select",17)(32,"option",18),e.OEk(33,"Select Status"),e.C$Y(),e.I0R(34,"option",19),e.OEk(35,"Active"),e.C$Y(),e.I0R(36,"option",20),e.OEk(37,"Inactive"),e.C$Y()(),e.yuY(38,Ut,2,0,"div",12),e.C$Y()(),e.I0R(39,"div",21)(40,"div",1)(41,"div",22)(42,"div",8)(43,"label",23),e.OEk(44,"image"),e.I0R(45,"span",10),e.OEk(46,"*"),e.C$Y()(),e.I0R(47,"div",24)(48,"input",25,26),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(50,"label",27)(51,"span",28),e.OEk(52,"Choose a file to upload. "),e.wR5(53,"br"),e.I0R(54,"span",29),e.OEk(55,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(56,d,14,3,"ul",30)(57,g,0,0)(58,x,2,0,"div",12),e.C$Y()(),e.I0R(59,"div",22),e.yuY(60,w,7,1,"div",31),e.C$Y()()(),e.I0R(61,"div",32)(62,"div",33),e.yuY(63,I,2,0,"button",34)(64,R,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(6),e.E7m("ngClass",e.S45(15,Y,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(23,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?23:-1),e.yG2(),e.C0Y(24,y.s2.description&&y.s2.description.hasError("maxlength")&&y.s2.description.touched?24:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(38,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?38:-1),e.yG2(18),e.C0Y(56,y.selectedImageOne?56:-1),e.yG2(),e.C0Y(57,y.uploadedImageOne?57:-1),e.yG2(),e.C0Y(58,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?58:-1),e.yG2(2),e.C0Y(60,y.uploadedImageOne?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.Mj,c.uW,c.Wo],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.videoo-avatar-sm[_ngcontent-%COMP%]{width:3rem}.founder-heading[_ngcontent-%COMP%]{color:#000}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.multi-image-scroll[_ngcontent-%COMP%]{height:270px;overflow-y:scroll}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:transparent;border-radius:10px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8080804a;border-radius:10px}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-modalfile-text[_ngcontent-%COMP%]{font-size:1rem;color:#666}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-file-text2[_ngcontent-%COMP%]{font-size:1rem;color:#b3b3b3}.custom-file-text2-mob[_ngcontent-%COMP%]{font-size:.8rem;color:#b3b3b3}.custom-file-text-mob[_ngcontent-%COMP%]{font-size:1rem;color:#666}']})}return M})(),X=(()=>{class M{constructor(){this.sectionTitles={sectionTwoTitle:"",sectionThreeTitle:"",sectionFourTitle:"",sectionFiveTitle:"",sectionSixTitle:""}}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Service Page",active:!0}]}handleTitleChange(h,$){this.sectionTitles[h]=$}static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-service"]],decls:40,vars:5,consts:[["title","service",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button","text-uppercase"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"titleChange"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"accordion",4)(5,"accordion-group",5)(6,"h2",6)(7,"button",7),e.OEk(8," Service Banner "),e.C$Y()(),e.I0R(9,"div",8)(10,"div",9),e.wR5(11,"app-service-banner"),e.C$Y()()(),e.I0R(12,"accordion-group",5)(13,"h2",6)(14,"button",7),e.OEk(15," Section 1 : Add service "),e.C$Y()(),e.I0R(16,"div",8)(17,"div",9),e.wR5(18,"app-add-service"),e.C$Y()()(),e.I0R(19,"accordion-group",5)(20,"h2",6)(21,"button",7),e.OEk(22),e.C$Y()(),e.I0R(23,"div",8)(24,"div",9)(25,"app-testimonials",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionThreeTitle",dt)}),e.C$Y()()()(),e.I0R(26,"accordion-group",5)(27,"h2",6)(28,"button",7),e.OEk(29),e.C$Y()(),e.I0R(30,"div",8)(31,"div",9)(32,"app-our-team",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFourTitle",dt)}),e.C$Y()()()(),e.I0R(33,"accordion-group",5)(34,"h2",6)(35,"button",7),e.OEk(36),e.C$Y()(),e.I0R(37,"div",8)(38,"div",9)(39,"app-service-contact-form",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFiveTitle",dt)}),e.C$Y()()()()()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(4),e.E7m("closeOthers",!0),e.yG2(18),e.oRS(" Section 2 : ",y.sectionTitles.sectionThreeTitle," "),e.yG2(7),e.oRS(" Section 3 : ",y.sectionTitles.sectionFourTitle," "),e.yG2(7),e.oRS(" Section 4 : ",y.sectionTitles.sectionFiveTitle," "))},dependencies:[Mi.O,He.Wz,He.gD,gn,zn,Ne,Ct,W]})}return M})();var Q=Et(9100);function ce(M,be){1&M&&(e.I0R(0,"div",1)(1,"div",72)(2,"span",73),e.OEk(3,"Loading..."),e.C$Y()()())}function me(M,be){1&M&&(e.I0R(0,"div",74),e.OEk(1,"Title is required."),e.C$Y())}function Ee(M,be){if(1&M&&e.wR5(0,"img",87),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImagePreview,e.K6U)}}function De(M,be){if(1&M&&(e.I0R(0,"h5",88),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.name," ")}}function Ce(M,be){if(1&M&&(e.I0R(0,"p",89),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.size," ")}}function Re(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",75)(1,"li",76)(2,"div",77)(3,"div",78)(4,"div",79)(5,"div",80),e.yuY(6,Ee,1,1,"img",81),e.C$Y()(),e.I0R(7,"div",82)(8,"div",83),e.yuY(9,De,2,1,"h5",84)(10,Ce,2,1,"p",85),e.C$Y()(),e.I0R(11,"div",79)(12,"button",86),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImage.size?10:-1)}}function G(M,be){1&M&&(e.I0R(0,"div",74),e.OEk(1,"Image is required."),e.C$Y())}function re(M,be){if(1&M&&(e.I0R(0,"div",90)(1,"div")(2,"label",8),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",91),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImage,e.K6U)}}function te(M,be){1&M&&(e.I0R(0,"div",74),e.OEk(1,"Sub title is required."),e.C$Y())}function oe(M,be){1&M&&(e.I0R(0,"div",74),e.OEk(1,"Description is required"),e.C$Y())}function ye(M,be){1&M&&(e.I0R(0,"div",74),e.OEk(1," Description must be at most 500 characters "),e.C$Y())}function Fe(M,be){1&M&&(e.I0R(0,"button",92),e.OEk(1," Save Changes "),e.C$Y())}function ht(M,be){1&M&&(e.I0R(0,"button",93),e.wR5(1,"span",94),e.OEk(2," Please wait "),e.C$Y())}const yt=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function ii(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",95),e.OEk(2),e.C$Y(),e.I0R(3,"td",96),e.OEk(4),e.C$Y(),e.I0R(5,"td",97)(6,"div",98)(7,"div",99),e.wR5(8,"img",100),e.C$Y()()(),e.I0R(9,"td",101)(10,"div",102)(11,"input",103),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.sectionOnesetStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",104)(13,"span",105),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",106)(16,"ul",107)(17,"li")(18,"a",108),e.wR5(19,"i",54),e.OEk(20," Add/Edit "),e.C$Y()(),e.I0R(21,"li")(22,"a",109),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(23,"i",110),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index,y=e.GaO();e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.title," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(10,yt,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status),e.yG2(4),e.u6R("routerLink","/service/edit-layout-b-data/",y.urlId,"/",h.id,"")}}const hi=()=>["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","fullscreen","insertdatetime","media","table","help","wordcount","code"],Pi=M=>({height:200,plugins:M,toolbar:"undo redo | casechange blocks | bold italic backcolor | \n                       alignleft aligncenter alignright alignjustify | \n                       bullist numlist checklist outdent indent | removeformat | a11ycheck code table help"}),nn=M=>({"is-invalid":M});let Tn=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.api=$,this.toastService=y,this.formBuilder=Ke,this.router=dt,this.urlId=null,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.dataExists=!1,this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.sectionOneData=[],this.sectionOneDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Service",active:!0},{label:"Service Detail",active:!0}],this.route.params.subscribe(h=>{this.urlId=h.id}),this.initializeForm(),this.getData(),this.getSectionOneData()}initializeForm(){this.formGroup=this.formBuilder.group({detail_title:["",[c.AQ.required]],sub_title:["",[c.AQ.required]],long_description:["",[c.AQ.required,c.AQ.maxLength(500)]],banner:["",this.imageValidator()]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}getData(){this.toggleSpinner(!0),this.api.get("service",this.urlId).subscribe(h=>{this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0?(this.serviceData=h.data[0],h.data[0].detail_title&&h.data[0].sub_title&&h.data[0].long_description&&(this.dataExists=!0,this.initializeForm(),this.formGroup.patchValue({detail_title:h.data[0].detail_title,sub_title:h.data[0].sub_title,long_description:h.data[0].long_description}),this.uploadedImage=h.data[0].banner)):this.toastService.error("No data found")},h=>this.handleError(h))}getSectionOneData(){this.api.getwithoutid("get-layoutb-data").subscribe(h=>{h&&h.status?(this.sectionOneData=h.data||[],this.sectionOneDataList=h.data||[]):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.updateService(h,this.urlId)}else this.formGroup.markAllAsTouched()}addService(h){this.api.post("service",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateService(h,$){this.api.put("service",$,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}createFormData(){const h=new FormData;return this.selectedImage&&h.append("banner",this.selectedImage),h.append("detail_title",this.s2.detail_title.value),h.append("long_description",this.s2.long_description.value),h.append("sub_title",this.s2.sub_title.value),h}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("layoutb-delete",h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))})}sectionOnesetStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("edit-layoutb-data",h,dt).subscribe(ai=>this.handleResponse(ai),ai=>this.handleError(ai))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.getSectionOneData(),this.removeImage(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1)}imageSelect(h){const $=h.target.files[0];$&&(this.selectedImage=$,this.selectedImagePreview=URL.createObjectURL($))}removeImage(){this.selectedImage=null,this.selectedImagePreview=null}filterdata(){this.sectionOneData=this.term?this.sectionOneDataList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.sectionOneDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.sectionOneData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.sectionOneDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.sectionOneData=this.sectionOneDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(Se.W),e.GI1(we.SA),e.GI1(c.im),e.GI1(Ve.E5))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-layout-b"]],decls:134,vars:30,consts:[[3,"title","breadcrumbItems"],["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-3"],[1,"mb-3"],[1,"form-label"],[1,"fs-md","text-muted","mb-0"],[1,"col-5"],[1,"col-4"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-25",3,"src"],[3,"formGroup","submit"],[1,"col-6"],["for","detail_title",1,"form-label"],[1,"text-danger"],["formControlName","detail_title","apiKey","l3q3kt1n2jg9y35es7w0gkv80en8bm7gz9v379zfwrea7uvq",3,"init"],["class","invalid-text"],[1,"custom-modal-dropzone"],["type","file","id","imageupload","accept","image/*","formControlName","banner","hidden","",3,"change"],["imageupload",""],["for","imageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-3"],[1,"col-6","mt-4"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub title",1,"form-control",3,"ngClass"],["placeholder","Must enter maximum of a 500 characters","rows","5","formControlName","long_description","maxlength","500",1,"form-control",3,"ngClass"],[1,"col-12","mt-4"],[1,"hstack","gap-2","justify-content-end"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"col-xl-12","mb-3"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-3"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-dark","px-2","py-1",3,"routerLink"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.yuY(1,ce,4,0,"div",1),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",2)(7,"div",6)(8,"div",7)(9,"label",8),e.OEk(10,"Title"),e.C$Y(),e.I0R(11,"p",9),e.OEk(12),e.C$Y()()(),e.I0R(13,"div",10)(14,"div",7)(15,"label",8),e.OEk(16,"Description"),e.C$Y(),e.I0R(17,"p",9),e.OEk(18),e.C$Y()()(),e.I0R(19,"div",11)(20,"div",7)(21,"label",8),e.OEk(22,"Uploaded Thumbnail"),e.C$Y(),e.I0R(23,"div"),e.wR5(24,"img",12),e.C$Y()()()()()()(),e.I0R(25,"div",3)(26,"div",4)(27,"div",5)(28,"form",13),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(29,"div",2)(30,"div",14)(31,"label",15),e.OEk(32," Title"),e.I0R(33,"span",16),e.OEk(34,"*"),e.C$Y()(),e.wR5(35,"editor",17),e.yuY(36,me,2,0,"div",18),e.C$Y(),e.I0R(37,"div",6)(38,"label",8),e.OEk(39,"Image"),e.I0R(40,"span",16),e.OEk(41,"*"),e.C$Y()(),e.I0R(42,"div",19)(43,"input",20,21),e.qCj("change",function(dt){return y.imageSelect(dt)}),e.C$Y(),e.I0R(45,"label",22)(46,"span",23),e.OEk(47,"Choose a file to upload. "),e.wR5(48,"br"),e.I0R(49,"span",24),e.OEk(50,"File size 1240 \xd7 600 px "),e.C$Y()()()(),e.yuY(51,Re,14,3,"ul",25)(52,G,2,0,"div",18),e.C$Y(),e.yuY(53,re,7,1,"div",26),e.I0R(54,"div",27)(55,"label",28),e.OEk(56,"Sub Title"),e.I0R(57,"span",16),e.OEk(58,"*"),e.C$Y()(),e.wR5(59,"input",29),e.yuY(60,te,2,0,"div",18),e.C$Y(),e.I0R(61,"div",27)(62,"label",8),e.OEk(63,"Description "),e.I0R(64,"span",16),e.OEk(65,"*"),e.C$Y()(),e.wR5(66,"textarea",30),e.yuY(67,oe,2,0,"div",18)(68,ye,2,0,"div",18),e.C$Y(),e.I0R(69,"div",31)(70,"div",32),e.yuY(71,Fe,2,0,"button",33)(72,ht,3,0),e.C$Y()()()()()()(),e.I0R(73,"div",34)(74,"accordion",35)(75,"accordion-group",36)(76,"h2",37)(77,"button",38),e.OEk(78,"Section 1"),e.C$Y()(),e.I0R(79,"div",39)(80,"div",40)(81,"div",41)(82,"div",42)(83,"div",43)(84,"div",44)(85,"div",45),e.wR5(86,"div",46),e.C$Y()(),e.I0R(87,"div",47)(88,"div",48)(89,"input",49),e.iHE("ngModelChange",function(dt){return e.kNx(y.term,dt)||(y.term=dt),dt}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(90,"i",50),e.C$Y()(),e.I0R(91,"div",51)(92,"div",52)(93,"div")(94,"a",53),e.wR5(95,"i",54),e.OEk(96,"Add"),e.C$Y()()()()()(),e.I0R(97,"div",5)(98,"div",55)(99,"table",56)(100,"thead",57)(101,"tr")(102,"th",58),e.OEk(103,"S No."),e.C$Y(),e.I0R(104,"th",58),e.OEk(105,"Title"),e.C$Y(),e.I0R(106,"th",58),e.OEk(107,"Image"),e.C$Y(),e.I0R(108,"th",58),e.OEk(109,"Status"),e.C$Y(),e.I0R(110,"th",59),e.OEk(111,"Action"),e.C$Y()()(),e.I0R(112,"tbody",60),e.c53(113,ii,24,13,"tr",null,e.wJt),e.C$Y()(),e.I0R(115,"div",61)(116,"div",62),e.wR5(117,"i",63),e.I0R(118,"h5",64),e.OEk(119,"Sorry! No Result Found"),e.C$Y(),e.I0R(120,"p",65),e.OEk(121," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(122,"div",66)(123,"div",67)(124,"div",68),e.OEk(125," Showing "),e.I0R(126,"span",69),e.OEk(127),e.C$Y(),e.OEk(128," of "),e.I0R(129,"span",69),e.OEk(130),e.C$Y(),e.OEk(131," Results "),e.C$Y()(),e.I0R(132,"div",70)(133,"pagination",71),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()()()()()()()),2&$&&(e._6D("title",null==y.serviceData?null:y.serviceData.title),e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(),e.C0Y(1,y.spinnerStatus?1:-1),e.yG2(11),e.cNF(null==y.serviceData?null:y.serviceData.title),e.yG2(6),e.oRS(" ",null==y.serviceData?null:y.serviceData.description," "),e.yG2(6),e.E7m("src",null==y.serviceData?null:y.serviceData.image,e.K6U),e.yG2(4),e.E7m("formGroup",y.formGroup),e.yG2(7),e.E7m("init",e.S45(26,Pi,e.q4q(25,hi))),e.yG2(),e.C0Y(36,y.s2.detail_title&&y.s2.detail_title.hasError("required")&&y.s2.detail_title.touched?36:-1),e.yG2(15),e.C0Y(51,y.selectedImage?51:-1),e.yG2(),e.C0Y(52,y.s2.banner&&y.s2.banner.hasError("required")&&y.s2.banner.touched?52:-1),e.yG2(),e.C0Y(53,y.uploadedImage?53:-1),e.yG2(6),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(60,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?60:-1),e.yG2(6),e.E7m("ngClass",e.S45(28,nn,y.s2.long_description&&y.s2.long_description.errors&&y.s2.long_description.touched)),e.yG2(),e.C0Y(67,y.s2.long_description&&y.s2.long_description.hasError("required")&&y.s2.long_description.touched?67:-1),e.yG2(),e.C0Y(68,y.s2.long_description&&y.s2.long_description.hasError("maxlength")&&y.s2.long_description.touched?68:-1),e.yG2(3),e.C0Y(71,y.addSaveButtonActive?71:72),e.yG2(3),e.E7m("closeOthers",!0),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(5),e.CI5("routerLink","/service/add-layout-b-data/",y.urlId,""),e.yG2(19),e.oho(y.sectionOneData),e.yG2(14),e.cNF(null==y.sectionOneData?null:y.sectionOneData.length),e.yG2(3),e.cNF(null==y.sectionOneDataList?null:y.sectionOneDataList.length),e.yG2(3),e.E7m("totalItems",null==y.sectionOneDataList?null:y.sectionOneDataList.length)("itemsPerPage",5))},dependencies:[Te.QF,Mi.O,Ve.ER,c.sz,c.ot,c.ue,c.u,c.Mj,c._G,c.uW,c.Wo,We.im,He.Wz,He.gD,Q.gZ],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Xn(M,be){1&M&&(e.I0R(0,"div",1)(1,"div",100)(2,"span",101),e.OEk(3,"Loading..."),e.C$Y()()())}function Qn(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Title is required."),e.C$Y())}function hr(M,be){if(1&M&&e.wR5(0,"img",115),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImagePreview,e.K6U)}}function xr(M,be){if(1&M&&(e.I0R(0,"h5",116),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.name," ")}}function Rr(M,be){if(1&M&&(e.I0R(0,"p",117),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.size," ")}}function Br(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",103)(1,"li",104)(2,"div",105)(3,"div",106)(4,"div",107)(5,"div",108),e.yuY(6,hr,1,1,"img",109),e.C$Y()(),e.I0R(7,"div",110)(8,"div",111),e.yuY(9,xr,2,1,"h5",112)(10,Rr,2,1,"p",113),e.C$Y()(),e.I0R(11,"div",107)(12,"button",114),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImage.size?10:-1)}}function Or(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Image is required."),e.C$Y())}function cr(M,be){if(1&M&&(e.I0R(0,"div",118)(1,"div")(2,"label",8),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",119),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImage,e.K6U)}}function Ur(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Sub title is required."),e.C$Y())}function ir(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Description is required"),e.C$Y())}function Ar(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1," Description must be at most 250 characters "),e.C$Y())}function pa(M,be){1&M&&(e.I0R(0,"button",120),e.OEk(1," Save Changes "),e.C$Y())}function fo(M,be){1&M&&(e.I0R(0,"button",121),e.wR5(1,"span",122),e.OEk(2," Please wait "),e.C$Y())}function nr(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"heading is required."),e.C$Y())}function Co(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Status is required."),e.C$Y())}const cl=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function oo(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",123),e.OEk(2),e.C$Y(),e.I0R(3,"td",124),e.OEk(4),e.C$Y(),e.I0R(5,"td",125)(6,"div",126)(7,"div",127),e.wR5(8,"img",128),e.C$Y()()(),e.I0R(9,"td",129)(10,"div",130)(11,"input",131),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.sectionOnesetStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",132)(13,"span",133),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",134)(16,"ul",135)(17,"li")(18,"a",136),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(165).show(),e.CGJ(dt.editSectionOne(Ke))}),e.wR5(19,"i",137),e.C$Y()(),e.I0R(20,"li")(21,"a",138),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(22,"i",139),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.title," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(8,cl,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function or(M,be){1&M&&e.OEk(0," Add ")}function Fs(M,be){1&M&&e.OEk(0," Edit ")}function yr(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"title is required."),e.C$Y())}function No(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Description is required"),e.C$Y())}function bs(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1," Description must be at most 250 characters "),e.C$Y())}function dl(M,be){if(1&M&&e.wR5(0,"img",115),2&M){const h=e.GaO(2);e.E7m("src",h.sectionOneselectedImagePreview,e.K6U)}}function Da(M,be){if(1&M&&(e.I0R(0,"h5",116),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.name," ")}}function Wl(M,be){if(1&M&&(e.I0R(0,"p",117),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.size," ")}}function Xa(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",103)(1,"li",104)(2,"div",105)(3,"div",106)(4,"div",107)(5,"div",108),e.yuY(6,dl,1,1,"img",109),e.C$Y()(),e.I0R(7,"div",110)(8,"div",111),e.yuY(9,Da,2,1,"h5",112)(10,Wl,2,1,"p",113),e.C$Y()(),e.I0R(11,"div",107)(12,"button",114),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.sectionOneremoveImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.sectionOneselectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.sectionOneselectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.sectionOneselectedImage.size?10:-1)}}function wr(M,be){if(1&M&&(e.I0R(0,"div",140)(1,"div")(2,"label",8),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",141),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.sectionOneuploadedImage,e.K6U)}}function Pl(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Image is required."),e.C$Y())}function Us(M,be){1&M&&(e.I0R(0,"div",102),e.OEk(1,"Status is required."),e.C$Y())}function Ds(M,be){1&M&&(e.I0R(0,"button",120),e.OEk(1," Save Changes "),e.C$Y())}function fa(M,be){1&M&&(e.I0R(0,"button",121),e.wR5(1,"span",122),e.OEk(2," Please wait "),e.C$Y())}const Vo=()=>["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","fullscreen","insertdatetime","media","table","help","wordcount","code"],$o=M=>({height:400,plugins:M,toolbar:"undo redo | casechange blocks | bold italic backcolor | \n                       alignleft aligncenter alignright alignjustify | \n                       bullist numlist checklist outdent indent | removeformat | a11ycheck code table help"}),Zo=M=>({"is-invalid":M});let Ho=(()=>{class M{constructor(h,$,y,Ke){this.route=h,this.api=$,this.toastService=y,this.formBuilder=Ke,this.urlId=null,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.dataExists=!1,this.sectionOneHeading=!1,this.sectionOneData=[],this.sectionOneDataList=[],this.editId=null,this.SectionOneHeadingId=null,this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Service",active:!0},{label:"Service Detail",active:!0}],this.route.params.subscribe(h=>{this.urlId=h.id}),this.sectionHeading=this.formBuilder.group({heading:["",[c.AQ.required]],status:["",[c.AQ.required]]}),this.sectionOne=this.formBuilder.group({title:["",[c.AQ.required]],description:["",[c.AQ.required,c.AQ.maxLength(250)]],image:["",this.imageValidator()],status:["",[c.AQ.required]]}),this.initializeForm(),this.getData(),this.getHeading(),this.getSectionOneData(),this.initializeFormSectionOne()}initializeForm(){this.formGroup=this.formBuilder.group({detail_title:["",[c.AQ.required]],sub_title:["",[c.AQ.required]],long_description:["",[c.AQ.required,c.AQ.maxLength(500)]],banner:["",this.imageValidator()]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}initializeFormSectionOne(){this.sectionOne=this.formBuilder.group({title:["",[c.AQ.required]],description:["",[c.AQ.required,c.AQ.maxLength(250)]],image:["",this.sectionOneimageValidator()],status:["",[c.AQ.required]]})}sectionOneimageValidator(){return h=>null==this.editId?c.AQ.required(h):null}get s2(){return this.formGroup.controls}get sOne(){return this.sectionHeading.controls}get secOne(){return this.sectionOne.controls}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}getData(){this.toggleSpinner(!0),this.api.get("service",this.urlId).subscribe(h=>{this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0?(this.serviceData=h.data[0],h.data[0].detail_title&&h.data[0].sub_title&&h.data[0].long_description&&(this.dataExists=!0,this.initializeForm(),this.formGroup.patchValue({detail_title:h.data[0].detail_title,sub_title:h.data[0].sub_title,long_description:h.data[0].long_description}),this.uploadedImage=h.data[0].banner)):this.toastService.error("No data found")},h=>this.handleError(h))}getHeading(){const h=["section-one-heading","section-two-heading"];this.toggleSpinner(!0),this.api.get("get-service-heading",this.urlId).subscribe($=>{if(this.toggleSpinner(!1),$&&$.status&&$.data&&$.data.length>0)for(const y of h){const Ke=$.data.find(dt=>dt.section_key===y&&dt.service_id===this.urlId);Ke&&"section-one-heading"===y&&(this.sectionHeading.patchValue({heading:Ke.heading,status:Ke.status}),this.SectionOneHeadingId=Ke.id,this.sectionOneHeading=!0)}},$=>{this.toggleSpinner(!1),console.error("Error fetching data:",$)})}getSectionOneData(){this.api.get("get-section-one",this.urlId).subscribe(h=>{h&&h.status?(this.sectionOneData=h.data||[],this.sectionOneDataList=h.data||[]):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.updateService(h,this.urlId)}else this.formGroup.markAllAsTouched()}addService(h){this.api.post("service",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateService(h,$){this.api.put("service",$,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}createFormData(){const h=new FormData;return this.selectedImage&&h.append("banner",this.selectedImage),h.append("detail_title",this.s2.detail_title.value),h.append("long_description",this.s2.long_description.value),h.append("sub_title",this.s2.sub_title.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.removeImage(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}onSubmitHeadingForm(h){if(this.sectionHeading.valid){this.toggleSpinner(!0);const $=this.createFormDataHeading(h);this.addSecontionHeading($)}else this.sectionHeading.markAllAsTouched()}createFormDataHeading(h){return null!==this.urlId&&this.urlId.toString(),{service_id:this.urlId,section_key:h,heading:this.sOne.heading.value,status:this.sOne.status.value}}addSecontionHeading(h){this.api.post("add-service-heading",h).subscribe($=>this.handleHeadingResponse($),$=>this.handleError($))}handleHeadingResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}editSectionOne(h){this.initializeFormSectionOne(),this.editId=h.id,this.sectionOne.patchValue({title:h.title,description:h.description,status:h.status}),this.sectionOneuploadedImage=h.image}submitSectionOne(h){if(this.sectionOne.valid){this.toggleSpinner(!0);const $=this.createSectionOneFormData();null!=this.editId?this.updateSectionOne(h,$,this.editId):this.addSectionOne(h,$)}else this.sectionOne.markAllAsTouched()}createSectionOneFormData(){const h=new FormData;return this.sectionOneselectedImage&&h.append("image",this.sectionOneselectedImage),h.append("service_id",null!==this.urlId?this.urlId.toString():""),h.append("heading_id",null!==this.SectionOneHeadingId?this.SectionOneHeadingId.toString():""),h.append("title",this.secOne.title.value),h.append("description",this.secOne.description.value),h.append("status",this.secOne.status.value),h}updateSectionOne(h,$,y){this.api.put("section-one",y,$).subscribe(Ke=>this.handleSectionOneResponse(Ke,h),Ke=>this.handleError(Ke))}addSectionOne(h,$){this.api.post("section-one",$).subscribe(y=>this.handleSectionOneResponse(y,h),y=>this.handleError(y))}sectionOnesetStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("section-one",h,dt).subscribe(ai=>this.handleSectionOneResponse(ai,null),ai=>this.handleError(ai))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("section-one",h).subscribe(y=>this.handleSectionOneResponse(y,null),y=>this.handleError(y))})}handleSectionOneResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getSectionOneData(),$.hide(),this.toastService.success("Data Saved Successfully!!"),this.resetForm()):this.toastService.error("Oops! Something went wrong")}resetForm(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.editId=null,this.sectionOne.reset()}handleError(h){this.toggleSpinner(!1)}imageSelect(h){const $=h.target.files[0];$&&(this.selectedImage=$,this.selectedImagePreview=URL.createObjectURL($))}removeImage(){this.selectedImage=null,this.selectedImagePreview=null}sectionOneimageSelect(h){const $=h.target.files[0];$&&(this.sectionOneselectedImage=$,this.sectionOneselectedImagePreview=URL.createObjectURL($))}sectionOneremoveImage(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null}filterdata(){this.sectionOneData=this.term?this.sectionOneDataList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.sectionOneDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.serviceData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.sectionOneDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.sectionOneData=this.sectionOneDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(Se.W),e.GI1(we.SA),e.GI1(c.im))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-layout-a"]],decls:228,vars:49,consts:[[3,"title","breadcrumbItems"],["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-3"],[1,"mb-3"],[1,"form-label"],[1,"fs-md","text-muted","mb-0"],[1,"col-5"],[1,"col-4"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-25",3,"src"],[3,"formGroup","submit"],[1,"col-6"],["for","detail_title",1,"form-label"],[1,"text-danger"],["formControlName","detail_title","apiKey","l3q3kt1n2jg9y35es7w0gkv80en8bm7gz9v379zfwrea7uvq",3,"init"],["class","invalid-text"],[1,"custom-modal-dropzone"],["type","file","id","imageupload","accept","image/*","formControlName","banner","hidden","",3,"change"],["imageupload",""],["for","imageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-3"],[1,"col-6","mt-4"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub title",1,"form-control",3,"ngClass"],["placeholder","Must enter maximum of a 250 characters","rows","3","formControlName","long_description","maxlength","250",1,"form-control",3,"ngClass"],[1,"col-12","mt-4"],[1,"hstack","gap-2","justify-content-end"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"col-xl-12","mb-3"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"col-lg-4"],["for","title",1,"form-label"],["type","text","id","title","formControlName","heading","placeholder","Enter heading",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"hstack","gap-2","justify-content-start","mt-4"],[1,"btn","btn-primary"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","modal",1,"modal","fade"],["modal","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["placeholder","Must enter maximum of a 250 characters","rows","3","formControlName","description","maxlength","250",1,"form-control",3,"ngClass"],["type","file","id","sectionOneimageupload","accept","image/*","formControlName","image","hidden","",3,"change"],["sectionOneimageupload",""],["for","sectionOneimageupload",1,"custom-modalfile-input"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"modal-footer"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-3"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.yuY(1,Xn,4,0,"div",1),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",2)(7,"div",6)(8,"div",7)(9,"label",8),e.OEk(10,"Title"),e.C$Y(),e.I0R(11,"p",9),e.OEk(12),e.C$Y()()(),e.I0R(13,"div",10)(14,"div",7)(15,"label",8),e.OEk(16,"Description"),e.C$Y(),e.I0R(17,"p",9),e.OEk(18),e.C$Y()()(),e.I0R(19,"div",11)(20,"div",7)(21,"label",8),e.OEk(22,"Uploaded Thumbnail"),e.C$Y(),e.I0R(23,"div"),e.wR5(24,"img",12),e.C$Y()()()()()()(),e.I0R(25,"div",3)(26,"div",4)(27,"div",5)(28,"form",13),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(29,"div",2)(30,"div",14)(31,"label",15),e.OEk(32," Title"),e.I0R(33,"span",16),e.OEk(34,"*"),e.C$Y()(),e.OEk(35," > "),e.wR5(36,"editor",17),e.yuY(37,Qn,2,0,"div",18),e.C$Y(),e.I0R(38,"div",6)(39,"label",8),e.OEk(40,"Image"),e.I0R(41,"span",16),e.OEk(42,"*"),e.C$Y()(),e.I0R(43,"div",19)(44,"input",20,21),e.qCj("change",function(ai){return y.imageSelect(ai)}),e.C$Y(),e.I0R(46,"label",22)(47,"span",23),e.OEk(48,"Choose a file to upload. "),e.wR5(49,"br"),e.I0R(50,"span",24),e.OEk(51,"File size 1240 \xd7 600 px "),e.C$Y()()()(),e.yuY(52,Br,14,3,"ul",25)(53,Or,2,0,"div",18),e.C$Y(),e.yuY(54,cr,7,1,"div",26),e.I0R(55,"div",27)(56,"label",28),e.OEk(57,"Sub Title"),e.I0R(58,"span",16),e.OEk(59,"*"),e.C$Y()(),e.wR5(60,"input",29),e.yuY(61,Ur,2,0,"div",18),e.C$Y(),e.I0R(62,"div",27)(63,"label",8),e.OEk(64,"Description "),e.I0R(65,"span",16),e.OEk(66,"*"),e.C$Y()(),e.wR5(67,"textarea",30),e.yuY(68,ir,2,0,"div",18)(69,Ar,2,0,"div",18),e.C$Y(),e.I0R(70,"div",31)(71,"div",32),e.yuY(72,pa,2,0,"button",33)(73,fo,3,0),e.C$Y()()()()()()(),e.I0R(74,"div",34)(75,"accordion",35)(76,"accordion-group",36)(77,"h2",37)(78,"button",38),e.OEk(79,"Section 1"),e.C$Y()(),e.I0R(80,"div",39)(81,"div",40)(82,"form",13),e.qCj("submit",function(){return y.onSubmitHeadingForm("section-one-heading")}),e.I0R(83,"div",2)(84,"div",41)(85,"div",7)(86,"label",42),e.OEk(87,"Heading"),e.I0R(88,"span",16),e.OEk(89,"*"),e.C$Y()(),e.wR5(90,"input",43),e.yuY(91,nr,2,0,"div",18),e.C$Y()(),e.I0R(92,"div",41)(93,"div",7)(94,"label",44),e.OEk(95,"Status "),e.I0R(96,"span",16),e.OEk(97,"*"),e.C$Y()(),e.I0R(98,"select",45)(99,"option",46),e.OEk(100,"Select Status"),e.C$Y(),e.I0R(101,"option",47),e.OEk(102,"Active"),e.C$Y(),e.I0R(103,"option",48),e.OEk(104,"Inactive"),e.C$Y()(),e.yuY(105,Co,2,0,"div",18),e.C$Y()(),e.I0R(106,"div",41)(107,"div",49)(108,"button",50),e.OEk(109,"Save"),e.C$Y()()()()(),e.wR5(110,"hr"),e.I0R(111,"div",4)(112,"div",51)(113,"div",52)(114,"div",53)(115,"div",54),e.wR5(116,"div",55),e.C$Y()(),e.I0R(117,"div",56)(118,"div",57)(119,"input",58),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(120,"i",59),e.C$Y()(),e.I0R(121,"div",60)(122,"div",61)(123,"div")(124,"a",62),e.qCj("click",function(){return e.usT(Ke),e.Gew(165).show(),e.CGJ(y.resetForm())}),e.wR5(125,"i",63),e.OEk(126,"Add"),e.C$Y()()()()()(),e.I0R(127,"div",5)(128,"div",64)(129,"table",65)(130,"thead",66)(131,"tr")(132,"th",67),e.OEk(133,"S No."),e.C$Y(),e.I0R(134,"th",67),e.OEk(135,"Title"),e.C$Y(),e.I0R(136,"th",67),e.OEk(137,"Image"),e.C$Y(),e.I0R(138,"th",67),e.OEk(139,"Status"),e.C$Y(),e.I0R(140,"th",68),e.OEk(141,"Action"),e.C$Y()()(),e.I0R(142,"tbody",69),e.c53(143,oo,23,11,"tr",null,e.wJt),e.C$Y()(),e.I0R(145,"div",70)(146,"div",71),e.wR5(147,"i",72),e.I0R(148,"h5",73),e.OEk(149,"Sorry! No Result Found"),e.C$Y(),e.I0R(150,"p",74),e.OEk(151," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(152,"div",75)(153,"div",76)(154,"div",77),e.OEk(155," Showing "),e.I0R(156,"span",78),e.OEk(157),e.C$Y(),e.OEk(158," of "),e.I0R(159,"span",78),e.OEk(160),e.C$Y(),e.OEk(161," Results "),e.C$Y()(),e.I0R(162,"div",79)(163,"pagination",80),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()()()()()(),e.I0R(164,"div",81,82)(166,"div",83)(167,"div",84)(168,"div",85)(169,"h5",86),e.yuY(170,or,1,0)(171,Fs,1,0),e.C$Y(),e.I0R(172,"button",87),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(165);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(173,"form",88),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(165);return e.CGJ(y.submitSectionOne(ai))}),e.I0R(174,"div",89),e.wR5(175,"div",90),e.I0R(176,"div",7)(177,"label",42),e.OEk(178,"Title"),e.I0R(179,"span",16),e.OEk(180,"*"),e.C$Y()(),e.wR5(181,"input",91),e.yuY(182,yr,2,0,"div",18),e.C$Y(),e.I0R(183,"div",7)(184,"label",8),e.OEk(185,"Description "),e.I0R(186,"span",16),e.OEk(187,"*"),e.C$Y()(),e.wR5(188,"textarea",92),e.yuY(189,No,2,0,"div",18)(190,bs,2,0,"div",18),e.C$Y(),e.I0R(191,"div",7)(192,"label",8),e.OEk(193,"Image"),e.I0R(194,"span",16),e.OEk(195,"*"),e.C$Y()(),e.I0R(196,"div",19)(197,"input",93,94),e.qCj("change",function(ai){return y.sectionOneimageSelect(ai)}),e.C$Y(),e.I0R(199,"label",95)(200,"span",23),e.OEk(201,"Choose a file to upload. "),e.wR5(202,"br"),e.I0R(203,"span",24),e.OEk(204,"File size 1240 \xd7 600 px "),e.C$Y()()()(),e.yuY(205,Xa,14,3,"ul",25)(206,wr,7,1,"div",96)(207,Pl,2,0,"div",18),e.C$Y(),e.I0R(208,"div",7)(209,"label",44),e.OEk(210,"Status "),e.I0R(211,"span",16),e.OEk(212,"*"),e.C$Y()(),e.I0R(213,"select",45)(214,"option",46),e.OEk(215,"Select Status"),e.C$Y(),e.I0R(216,"option",47),e.OEk(217,"Active"),e.C$Y(),e.I0R(218,"option",48),e.OEk(219,"Inactive"),e.C$Y()(),e.yuY(220,Us,2,0,"div",18),e.C$Y()(),e.I0R(221,"div",97)(222,"div",32)(223,"button",98),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(165);return e.CGJ(ai.hide())}),e.wR5(224,"i",99),e.OEk(225," Close "),e.C$Y(),e.yuY(226,Ds,2,0,"button",33)(227,fa,3,0),e.C$Y()()()()()()}2&$&&(e._6D("title",null==y.serviceData?null:y.serviceData.title),e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(),e.C0Y(1,y.spinnerStatus?1:-1),e.yG2(11),e.cNF(null==y.serviceData?null:y.serviceData.title),e.yG2(6),e.oRS(" ",null==y.serviceData?null:y.serviceData.description," "),e.yG2(6),e.E7m("src",null==y.serviceData?null:y.serviceData.image,e.K6U),e.yG2(4),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("init",e.S45(43,$o,e.q4q(42,Vo))),e.yG2(),e.C0Y(37,y.s2.detail_title&&y.s2.detail_title.hasError("required")&&y.s2.detail_title.touched?37:-1),e.yG2(15),e.C0Y(52,y.selectedImage?52:-1),e.yG2(),e.C0Y(53,y.s2.banner&&y.s2.banner.hasError("required")&&y.s2.banner.touched?53:-1),e.yG2(),e.C0Y(54,y.uploadedImage?54:-1),e.yG2(6),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(61,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?61:-1),e.yG2(6),e.E7m("ngClass",e.S45(45,Zo,y.s2.long_description&&y.s2.long_description.errors&&y.s2.long_description.touched)),e.yG2(),e.C0Y(68,y.s2.long_description&&y.s2.long_description.hasError("required")&&y.s2.long_description.touched?68:-1),e.yG2(),e.C0Y(69,y.s2.long_description&&y.s2.long_description.hasError("maxlength")&&y.s2.long_description.touched?69:-1),e.yG2(3),e.C0Y(72,y.addSaveButtonActive?72:73),e.yG2(3),e.E7m("closeOthers",!0),e.yG2(7),e.E7m("formGroup",y.sectionHeading),e.yG2(8),e.E7m("ngClass",y.sOne.heading&&y.sOne.heading.hasError("required")&&y.sOne.heading.touched?"is-invalid":""),e.yG2(),e.C0Y(91,y.sOne.heading&&y.sOne.heading.hasError("required")&&y.sOne.heading.touched?91:-1),e.yG2(7),e.E7m("ngClass",y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(105,y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?105:-1),e.yG2(14),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.sectionOneData),e.yG2(14),e.cNF(null==y.sectionOneData?null:y.sectionOneData.length),e.yG2(3),e.cNF(null==y.sectionOneDataList?null:y.sectionOneDataList.length),e.yG2(3),e.E7m("totalItems",null==y.sectionOneDataList?null:y.sectionOneDataList.length)("itemsPerPage",5),e.yG2(7),e.C0Y(170,null==y.editId?170:171),e.yG2(3),e.E7m("formGroup",y.sectionOne),e.yG2(8),e.E7m("ngClass",y.secOne.title&&y.secOne.title.hasError("required")&&y.secOne.title.touched?"is-invalid":""),e.yG2(),e.C0Y(182,y.secOne.title&&y.secOne.title.hasError("required")&&y.secOne.title.touched?182:-1),e.yG2(6),e.E7m("ngClass",e.S45(47,Zo,y.secOne.description&&y.secOne.description.errors&&y.secOne.description.touched)),e.yG2(),e.C0Y(189,y.secOne.description&&y.secOne.description.hasError("required")&&y.secOne.description.touched?189:-1),e.yG2(),e.C0Y(190,y.secOne.description&&y.secOne.description.hasError("maxlength")&&y.secOne.description.touched?190:-1),e.yG2(15),e.C0Y(205,y.sectionOneselectedImage?205:-1),e.yG2(),e.C0Y(206,y.sectionOneuploadedImage?206:-1),e.yG2(),e.C0Y(207,y.secOne.image&&y.secOne.image.hasError("required")&&y.secOne.image.touched?207:-1),e.yG2(6),e.E7m("ngClass",y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(220,y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?220:-1),e.yG2(6),e.C0Y(226,y.addSaveButtonActive?226:227))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.Mj,c._G,c.uW,c.Wo,We.im,ut.uK,He.Wz,He.gD,Q.gZ],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Za(M,be){1&M&&(e.I0R(0,"div",1)(1,"div",60)(2,"span",61),e.OEk(3,"Loading..."),e.C$Y()()())}function Ao(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"title is required."),e.C$Y())}function mo(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Status is required."),e.C$Y())}function as(M,be){if(1&M&&e.wR5(0,"img",75),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImagePreview,e.K6U)}}function Mr(M,be){if(1&M&&(e.I0R(0,"h5",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.name," ")}}function oc(M,be){if(1&M&&(e.I0R(0,"p",77),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.size," ")}}function Ws(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",63)(1,"li",64)(2,"div",65)(3,"div",66)(4,"div",67)(5,"div",68),e.yuY(6,as,1,1,"img",69),e.C$Y()(),e.I0R(7,"div",70)(8,"div",71),e.yuY(9,Mr,2,1,"h5",72)(10,oc,2,1,"p",73),e.C$Y()(),e.I0R(11,"div",67)(12,"button",74),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage("image"))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImage.size?10:-1)}}function Ko(M,be){if(1&M&&(e.I0R(0,"div",78)(1,"div")(2,"label",18),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",79),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImage,e.K6U)}}function zl(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Image is required."),e.C$Y())}function Do(M,be){if(1&M&&e.wR5(0,"img",75),2&M){const h=e.GaO(2);e.E7m("src",h.selectedScienceImagePreview,e.K6U)}}function is(M,be){if(1&M&&(e.I0R(0,"h5",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedScienceImage.name," ")}}function Ro(M,be){if(1&M&&(e.I0R(0,"p",77),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedScienceImage.size," ")}}function ao(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",63)(1,"li",64)(2,"div",65)(3,"div",66)(4,"div",67)(5,"div",68),e.yuY(6,Do,1,1,"img",69),e.C$Y()(),e.I0R(7,"div",70)(8,"div",71),e.yuY(9,is,2,1,"h5",72)(10,Ro,2,1,"p",73),e.C$Y()(),e.I0R(11,"div",67)(12,"button",74),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage("science"))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedScienceImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedScienceImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedScienceImage.size?10:-1)}}function Jo(M,be){if(1&M&&(e.I0R(0,"div",80)(1,"div")(2,"label",18),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",79),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedScienceImage,e.K6U)}}function lo(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Description is required"),e.C$Y())}function Xr(M,be){1&M&&(e.I0R(0,"button",81),e.OEk(1," Save Changes "),e.C$Y())}function ul(M,be){1&M&&(e.I0R(0,"button",82),e.wR5(1,"span",83),e.OEk(2," Please wait "),e.C$Y())}function Rs(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Image is required."),e.C$Y())}function Ra(M,be){if(1&M&&e.wR5(0,"img",75),2&M){const h=e.GaO(3);e.E7m("src",h.multiImageFilePreview,e.K6U)}}function go(M,be){if(1&M&&(e.I0R(0,"h5",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.multiImageSelectedFiles.name," ")}}function ns(M,be){if(1&M&&(e.I0R(0,"p",77),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.multiImageSelectedFiles.size," ")}}function kl(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",63)(1,"li",64)(2,"div",65)(3,"div",66)(4,"div",93)(5,"div",68),e.yuY(6,Ra,1,1,"img",69),e.C$Y()(),e.I0R(7,"div",94)(8,"div",71),e.yuY(9,go,2,1,"h5",72)(10,ns,2,1,"p",73),e.C$Y()(),e.I0R(11,"div",95)(12,"button",74),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(12),Ke=e.GaO();return e.CGJ(Ke.removemultiSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(2);e.yG2(6),e.C0Y(6,h.multiImageFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.multiImageSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.multiImageSelectedFiles.size?10:-1)}}function _o(M,be){if(1&M&&e.wR5(0,"img",101),2&M){const h=e.GaO().$implicit;e.E7m("src",h.image,e.K6U)}}function Jr(M,be){if(1&M&&(e.I0R(0,"h5",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO().$implicit;e.yG2(),e.oRS(" ",h.title," ")}}function Cr(M,be){if(1&M){const h=e.KQA();e.I0R(0,"li",64)(1,"div",65)(2,"div",66)(3,"div",93)(4,"div",98),e.yuY(5,_o,1,1,"img",99),e.C$Y()(),e.I0R(6,"div",94)(7,"div",71),e.yuY(8,Jr,2,1,"h5",72),e.C$Y()(),e.I0R(9,"div",67)(10,"a",100),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO(3);return e.Gew(74).show(),e.CGJ(dt.editImageUploadedFile(Ke))}),e.OEk(11,"Update "),e.C$Y(),e.I0R(12,"a",74),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO(3);return e.CGJ(dt.deleteImageUploadedFile(Ke.id))}),e.OEk(13," Delete "),e.C$Y()()()()()}if(2&M){const h=be.$implicit;e.yG2(5),e.C0Y(5,h.image?5:-1),e.yG2(3),e.C0Y(8,h.title?8:-1)}}function eo(M,be){if(1&M&&(e.I0R(0,"div",80)(1,"div",96)(2,"label",18),e.OEk(3,"Uploaded Icons"),e.C$Y(),e.I0R(4,"div")(5,"ul",97),e.c53(6,Cr,14,2,"li",102,e.wJt),e.C$Y()()()()),2&M){const h=e.GaO(2);e.yG2(6),e.oho(h.multiUploadedImages)}}function Qo(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Heading is required."),e.C$Y())}function Ts(M,be){1&M&&(e.I0R(0,"button",103),e.OEk(1,"Add More"),e.C$Y())}function hl(M,be){1&M&&(e.I0R(0,"button",82),e.wR5(1,"span",83),e.OEk(2," Please wait "),e.C$Y())}function gs(M,be){if(1&M){const h=e.KQA();e.wR5(0,"hr"),e.I0R(1,"form",6),e.qCj("submit",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.onSubmitImage())}),e.I0R(2,"div",84)(3,"div",2)(4,"div",46)(5,"div")(6,"label",18),e.OEk(7,"Benefits Icon"),e.I0R(8,"span",10),e.OEk(9,"*"),e.C$Y()(),e.I0R(10,"div",85)(11,"input",86,87),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO();return e.CGJ(Ke.ImageSelected(y))}),e.C$Y(),e.I0R(13,"label",88)(14,"div",50)(15,"span",51),e.OEk(16,"Choose a file to upload. "),e.wR5(17,"br"),e.I0R(18,"span",52),e.OEk(19,"File size 35 \xd7 35 px "),e.C$Y()()(),e.I0R(20,"div",53)(21,"span",54),e.OEk(22,"Choose a file to upload. "),e.wR5(23,"br"),e.I0R(24,"span",55),e.OEk(25,"File size 410 \xd7 410 px "),e.C$Y()()()()(),e.yuY(26,Rs,2,0,"div",12)(27,kl,14,3,"ul",25),e.C$Y()(),e.yuY(28,eo,8,0,"div",30),e.C$Y()(),e.I0R(29,"div",84)(30,"div",2)(31,"div",89)(32,"div",8)(33,"label",9),e.OEk(34,"Title"),e.wR5(35,"span",10),e.C$Y(),e.wR5(36,"input",90),e.yuY(37,Qo,2,0,"div",12),e.C$Y()()()(),e.I0R(38,"div",31)(39,"div",91),e.yuY(40,Ts,2,0,"button",92)(41,hl,3,0),e.C$Y()()()}if(2&M){const h=e.GaO();e.yG2(),e.E7m("formGroup",h.imageGroup),e.yG2(9),e.E7m("ngClass",h.s.image&&h.s.image.hasError("required")&&h.s.image.touched?"file-invalid":""),e.yG2(16),e.C0Y(26,h.s.image&&h.s.image.hasError("required")&&h.s.image.touched?26:-1),e.yG2(),e.C0Y(27,h.multiImageSelectedFiles?27:-1),e.yG2(),e.C0Y(28,h.multiUploadedImages.length>0?28:-1),e.yG2(8),e.E7m("ngClass",h.s.title&&h.s.title.hasError("required")&&h.s.title.touched?"is-invalid":""),e.yG2(),e.C0Y(37,h.s.title&&h.s.title.hasError("required")&&h.s.title.touched?37:-1),e.yG2(3),e.C0Y(40,h.imageButtonActive?40:41)}}function Ys(M,be){if(1&M&&e.wR5(0,"img",75),2&M){const h=e.GaO(2);e.E7m("src",h.editselectedImagePreview,e.K6U)}}function Es(M,be){if(1&M&&(e.I0R(0,"h5",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.editselectedImage.name," ")}}function Cc(M,be){if(1&M&&(e.I0R(0,"p",77),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.editselectedImage.size," ")}}function Ss(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",63)(1,"li",64)(2,"div",65)(3,"div",66)(4,"div",67)(5,"div",68),e.yuY(6,Ys,1,1,"img",69),e.C$Y()(),e.I0R(7,"div",70)(8,"div",71),e.yuY(9,Es,2,1,"h5",72)(10,Cc,2,1,"p",73),e.C$Y()(),e.I0R(11,"div",67)(12,"button",74),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage("editImage"))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.editselectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.editselectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.editselectedImage.size?10:-1)}}function jo(M,be){if(1&M&&(e.I0R(0,"div",80)(1,"div")(2,"label",18),e.OEk(3,"Uploaded Icon"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",104),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.edituploadedImage,e.K6U)}}function ac(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Image is required."),e.C$Y())}function to(M,be){1&M&&(e.I0R(0,"div",62),e.OEk(1,"Title is required."),e.C$Y())}function Eo(M,be){1&M&&(e.I0R(0,"button",81),e.OEk(1," Update "),e.C$Y())}function ea(M,be){1&M&&(e.I0R(0,"button",82),e.wR5(1,"span",83),e.OEk(2," Please wait "),e.C$Y())}const La=()=>["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","fullscreen","insertdatetime","media","table","help","wordcount","code"],Ka=M=>({height:400,plugins:M,toolbar:"undo redo | casechange blocks | bold italic backcolor | \n                     alignleft aligncenter alignright alignjustify | \n                     bullist numlist checklist outdent indent | removeformat | a11ycheck code table help"});let Uo=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.toastService=y,this.api=Ke,this.router=dt,this.urlId=null,this.spinnerStatus=!1,this.addSaveButtonActive=!0,this.service_id=null,this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.selectedScienceImage=null,this.selectedScienceImagePreview=null,this.uploadedScienceImage=null,this.multiUploadedImages=[],this.multiImageFilePreview=null,this.multiImageSelectedFiles=null,this.imageButtonActive=!0,this.editImageId=null,this.editselectedImage=null,this.editselectedImagePreview=null,this.edituploadedImage=null,this.editSaveButtonActive=!0}ngOnInit(){this.breadCrumbItems=[{label:"Service Detail",active:!0},{label:"Add Data",active:!0}],this.route.params.subscribe(h=>{this.service_id=h.id}),this.route.params.subscribe(h=>{this.urlId=h.dataId,this.urlId&&this.getData()}),this.initializeForm(),this.imageGroup=this.formBuilder.group({title:["",[c.AQ.required]],image:["",[c.AQ.required]]}),this.editimageGroup=this.formBuilder.group({title:["",[c.AQ.required]],image:[""]}),this.getIconData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required]],description:["",[c.AQ.required]],image:["",this.imageValidator()],scienceImage:[""],status:["",[c.AQ.required]]})}imageValidator(){return h=>null==this.urlId?c.AQ.required(h):null}get s2(){return this.formGroup.controls}get s(){return this.imageGroup.controls}get e(){return this.editimageGroup.controls}getData(){this.api.get("get-layoutb-data",this.urlId).subscribe(h=>{h&&h.status?(this.formGroup.patchValue({title:h.data[0].title,description:h.data[0].description,status:h.data[0].status}),this.uploadedImage=h.data[0].image,this.uploadedScienceImage=h.data[0].science_image):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}getIconData(){this.api.get(`layoutb-images/${this.service_id}`,this.urlId).subscribe(h=>{h&&h.status?this.multiUploadedImages=h.data:this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.urlId?this.updateService(h,this.urlId):this.addService(h)}else this.formGroup.markAllAsTouched()}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h,this.editSaveButtonActive=!h}addService(h){this.api.post("add-layoutb-data",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateService(h,$){this.api.put("edit-layoutb-data",$,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}createFormData(){const h=new FormData;return this.selectedImage&&h.append("image",this.selectedImage),this.selectedScienceImage&&h.append("science_image",this.selectedScienceImage),h.append("service_id",null!==this.service_id?this.service_id.toString():""),h.append("title",this.s2.title.value),h.append("description",this.s2.description.value),h.append("status",this.s2.status.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.urlId?this.getData():this.resetForm(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}resetForm(){this.selectedImage=null,this.selectedImagePreview=null,this.formGroup.reset()}onSubmitImage(){if(this.imageGroup.valid){this.toggleSpinner(!0);const h=this.createFormDataImage();this.addIcon(h)}else this.imageGroup.markAllAsTouched()}createFormDataImage(){const h=new FormData;return this.multiImageSelectedFiles&&h.append("image",this.multiImageSelectedFiles),h.append("service_id",null!==this.service_id?this.service_id.toString():""),h.append("detail_layoutb_id",null!==this.urlId?this.urlId.toString():""),h.append("title",this.s.title.value),h}addIcon(h){this.api.post("layoutb-images",h).subscribe($=>this.handleImageResponse($),$=>this.handleError($))}handleImageResponse(h){this.toggleSpinner(!1),!0===h.status?(this.resetImageForm(),this.getIconData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}onSubmitEditImage(h){if(this.editimageGroup.valid){this.toggleSpinner(!0);const $=this.createFormDataEditImage();this.editIcon(h,$)}else this.editimageGroup.markAllAsTouched()}createFormDataEditImage(){const h=new FormData;return this.editselectedImage&&h.append("image",this.editselectedImage),h.append("service_id",null!==this.service_id?this.service_id.toString():""),h.append("detail_layoutb_id",null!==this.urlId?this.urlId.toString():""),h.append("title",this.e.title.value),h}editIcon(h,$){this.api.put("layoutb-images",this.editImageId,$).subscribe(y=>this.handleEditImageResponse(y,h),y=>this.handleError(y))}handleEditImageResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.resetediImageForm(),this.getIconData(),$.hide(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}deleteImageUploadedFile(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("layoutb-image-delete",h).subscribe(y=>this.handleImageResponse(y),y=>this.handleError(y))})}resetediImageForm(){this.editselectedImage=null,this.editselectedImagePreview=null,this.editimageGroup.reset()}resetImageForm(){this.multiImageSelectedFiles=null,this.multiImageFilePreview=null,this.imageGroup.reset()}handleError(h){this.toggleSpinner(!1)}editImageUploadedFile(h){this.editimageGroup.patchValue({title:h.title}),this.edituploadedImage=h.image,this.editImageId=h.id}imageSelect(h){const $=h.target.files[0];$&&(this.selectedImage=$,this.selectedImagePreview=URL.createObjectURL($))}imageScienceSelect(h){const $=h.target.files[0];$&&(this.selectedScienceImage=$,this.selectedScienceImagePreview=URL.createObjectURL($))}onEditImageSelected(h){const $=h.target.files[0];$&&(this.editselectedImage=$,this.editselectedImagePreview=URL.createObjectURL($))}removeImage(h){"image"==h?(this.selectedImage=null,this.selectedImagePreview=null):"science"==h?(this.selectedScienceImage=null,this.selectedScienceImagePreview=null):"editImage"==h&&(this.editselectedImage=null,this.editselectedImagePreview=null)}ImageSelected(h){const $=h.target.files[0];$&&(this.multiImageSelectedFiles=$,this.multiImageFilePreview=URL.createObjectURL($))}removemultiSelectedFile(h){this.multiImageSelectedFiles=null,this.multiImageFilePreview=null,h.value=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(we.SA),e.GI1(Se.W),e.GI1(Ve.E5))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-add-layout-b"]],decls:124,vars:26,consts:[["title","Add Data",3,"breadcrumbItems"],["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"col-6"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","imageupload","accept","image/*","formControlName","image","hidden","",3,"change"],["imageupload",""],["for","imageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3"],["type","file","id","scienceimageupload","accept","image/*","formControlName","scienceImage","hidden","",3,"change"],["scienceimageupload",""],["for","scienceimageupload",1,"custom-modalfile-input"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],["formControlName","description","apiKey","l3q3kt1n2jg9y35es7w0gkv80en8bm7gz9v379zfwrea7uvq",3,"init"],[1,"col-12","mt-4"],[1,"hstack","gap-2","justify-content-end"],["type","submit","class","btn btn-primary","id","add-btn"],["bsModal","","id","editPoster",1,"modal","fade"],["editPoster","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-danger","p-3"],["id","editPosterModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"col-lg-6"],["type","file","id","editImage","accept","image/*","formControlName","image","hidden","",3,"change"],["editImage",""],["for","editImage",1,"custom-modalfile-input"],[1,"d-none","d-md-block"],[1,"custom-file-text"],[1,"custom-file-text2"],[1,"d-block","d-md-none"],[1,"custom-file-text-mob"],[1,"custom-file-text2-mob"],["type","text","id","title","formControlName","title","placeholder","Enter Heading",1,"form-control",3,"ngClass"],[1,"modal-footer"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"col-lg-6","mt-3","mt-lg-0"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"col-lg-12","mt-3"],[1,"custom-dropzone",3,"ngClass"],["type","file","id","multisize","formControlName","image","accept","image/*","hidden","",3,"change"],["imageslectedfile",""],["for","multisize",1,"custom-file-input"],[1,"col-lg-4"],["type","text","id","title","formControlName","title","placeholder","Enter Title",1,"form-control",3,"ngClass"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],[1,"flex-shrink-0","me-3"],[1,"flex-grow-1"],[1,"flex-shrink-0","ms-3"],[1,""],["id","dropzone-preview",1,"list-unstyled","mb-0","multi-image-scroll"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block",3,"src"],[1,"btn","btn-sm","btn-warning","me-2",3,"click"],[1,"img-fluid","rounded","d-block",3,"src"],["class","mt-2","id","dropzone-preview-list"],[1,"btn","btn-primary"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block",3,"src"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.yuY(1,Za,4,0,"div",1),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",2)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11,"Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Ao,2,0,"div",12),e.C$Y()(),e.I0R(16,"div",7)(17,"label",13),e.OEk(18,"Status "),e.I0R(19,"span",10),e.OEk(20,"*"),e.C$Y()(),e.I0R(21,"select",14)(22,"option",15),e.OEk(23,"Select Status"),e.C$Y(),e.I0R(24,"option",16),e.OEk(25,"Active"),e.C$Y(),e.I0R(26,"option",17),e.OEk(27,"Inactive"),e.C$Y()(),e.yuY(28,mo,2,0,"div",12),e.C$Y(),e.I0R(29,"div",7)(30,"div",8)(31,"label",18),e.OEk(32,"Image"),e.I0R(33,"span",10),e.OEk(34,"*"),e.C$Y()(),e.I0R(35,"div",19)(36,"input",20,21),e.qCj("change",function(ai){return y.imageSelect(ai)}),e.C$Y(),e.I0R(38,"label",22)(39,"span",23),e.OEk(40,"Choose a file to upload. "),e.wR5(41,"br"),e.I0R(42,"span",24),e.OEk(43,"File size 488 \xd7 602 px "),e.C$Y()()()(),e.yuY(44,Ws,14,3,"ul",25)(45,Ko,7,1,"div",26)(46,zl,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",18),e.OEk(50,"Science Image"),e.C$Y(),e.I0R(51,"div",19)(52,"input",27,28),e.qCj("change",function(ai){return y.imageScienceSelect(ai)}),e.C$Y(),e.I0R(54,"label",29)(55,"span",23),e.OEk(56,"Choose a file to upload. "),e.wR5(57,"br"),e.I0R(58,"span",24),e.OEk(59,"File size 1140 \xd7 770 px "),e.C$Y()()()(),e.yuY(60,ao,14,3,"ul",25)(61,Jo,7,1,"div",30),e.C$Y()(),e.I0R(62,"div",31)(63,"div",8)(64,"label",18),e.OEk(65,"Description"),e.C$Y(),e.wR5(66,"editor",32),e.yuY(67,lo,2,0,"div",12),e.C$Y()(),e.I0R(68,"div",33)(69,"div",34),e.yuY(70,Xr,2,0,"button",35)(71,ul,3,0),e.C$Y()()()(),e.yuY(72,gs,42,8),e.C$Y()()()(),e.I0R(73,"div",36,37)(75,"div",38)(76,"div",39)(77,"div",40)(78,"h5",41),e.OEk(79," Edit Icon "),e.C$Y(),e.I0R(80,"button",42),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(74);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(81,"form",43),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(74);return e.CGJ(y.onSubmitEditImage(ai))}),e.I0R(82,"div",44),e.wR5(83,"div",45),e.I0R(84,"div",8)(85,"div",2)(86,"div",46)(87,"div")(88,"label",18),e.OEk(89," Image"),e.I0R(90,"span",10),e.OEk(91,"*"),e.C$Y()(),e.I0R(92,"div",19)(93,"input",47,48),e.qCj("change",function(ai){return y.onEditImageSelected(ai)}),e.C$Y(),e.I0R(95,"label",49)(96,"div",50)(97,"span",51),e.OEk(98,"Choose a file to upload. "),e.wR5(99,"br"),e.I0R(100,"span",52),e.OEk(101,"File size 35 \xd7 35 px "),e.C$Y()()(),e.I0R(102,"div",53)(103,"span",54),e.OEk(104,"Choose a file to upload. "),e.wR5(105,"br"),e.I0R(106,"span",55),e.OEk(107,"File size 410 \xd7 410 px "),e.C$Y()()()()(),e.yuY(108,Ss,14,3,"ul",25),e.C$Y()(),e.yuY(109,jo,7,1,"div",30)(110,ac,2,0,"div",12),e.C$Y()(),e.I0R(111,"div",8)(112,"label",9),e.OEk(113,"Benefit Title"),e.wR5(114,"span",10),e.C$Y(),e.wR5(115,"input",56),e.yuY(116,to,2,0,"div",12),e.C$Y()(),e.I0R(117,"div",57)(118,"div",34)(119,"button",58),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(74);return e.CGJ(ai.hide())}),e.wR5(120,"i",59),e.OEk(121," Close "),e.C$Y(),e.yuY(122,Eo,2,0,"button",35)(123,ea,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(),e.C0Y(1,y.spinnerStatus?1:-1),e.yG2(5),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(6),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(28,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?28:-1),e.yG2(16),e.C0Y(44,y.selectedImage?44:-1),e.yG2(),e.C0Y(45,y.uploadedImage?45:-1),e.yG2(),e.C0Y(46,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?46:-1),e.yG2(14),e.C0Y(60,y.selectedScienceImage?60:-1),e.yG2(),e.C0Y(61,y.uploadedScienceImage?61:-1),e.yG2(5),e.E7m("init",e.S45(24,Ka,e.q4q(23,La))),e.yG2(),e.C0Y(67,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?67:-1),e.yG2(3),e.C0Y(70,y.addSaveButtonActive?70:71),e.yG2(2),e.C0Y(72,y.urlId?72:-1),e.yG2(9),e.E7m("formGroup",y.editimageGroup),e.yG2(27),e.C0Y(108,y.editselectedImage?108:-1),e.yG2(),e.C0Y(109,y.edituploadedImage?109:-1),e.yG2(),e.C0Y(110,y.e.image&&y.e.image.hasError("required")&&y.e.image.touched?110:-1),e.yG2(5),e.E7m("ngClass",y.e.title&&y.e.title.hasError("required")&&y.e.title.touched?"is-invalid":""),e.yG2(),e.C0Y(116,y.e.title&&y.e.title.hasError("required")&&y.e.title.touched?116:-1),e.yG2(6),e.C0Y(122,y.editSaveButtonActive?122:123))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,ut.uK,Q.gZ],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.videoo-avatar-sm[_ngcontent-%COMP%]{width:3rem}.founder-heading[_ngcontent-%COMP%]{color:#000}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.multi-image-scroll[_ngcontent-%COMP%]{height:270px;overflow-y:scroll}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:transparent;border-radius:10px}.multi-image-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8080804a;border-radius:10px}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-modalfile-text[_ngcontent-%COMP%]{font-size:1rem;color:#666}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-file-text2[_ngcontent-%COMP%]{font-size:1rem;color:#b3b3b3}.custom-file-text2-mob[_ngcontent-%COMP%]{font-size:.8rem;color:#b3b3b3}.custom-file-text-mob[_ngcontent-%COMP%]{font-size:1rem;color:#666}']})}return M})();const Tl=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function ks(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",37),e.OEk(2),e.C$Y(),e.wR5(3,"td",38)(4,"td",38),e.I0R(5,"td",39)(6,"div",40)(7,"input",41),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt.id,y))}),e.C$Y(),e.I0R(8,"label",42)(9,"span",43),e.OEk(10),e.C$Y()()()(),e.I0R(11,"td",44)(12,"ul",45)(13,"li")(14,"a",46),e.wR5(15,"i",47),e.C$Y()(),e.I0R(16,"li")(17,"a",48),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(18,"i",49),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(),e.E7m("innerHtml",h.title,e.E3n),e.yG2(),e.E7m("innerHtml",h.type,e.E3n),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(9,Tl,"active"===h.status,"inactive"===h.status)),e.yG2(),e.oRS(" ",h.status," "),e.yG2(4),e.CI5("routerLink","/home/edit-banner/",h.id,"")}}function ga(M,be){1&M&&(e.I0R(0,"div",36)(1,"div",50)(2,"span",51),e.OEk(3,"Loading..."),e.C$Y()()())}let vo=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.spinnerStatus=!1,this.bannerData=[],this.bannerDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.getHomebanner()}getHomebanner(){this.toggleSpinner(!0),this.api.getwithoutid("homebanner").subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.bannerData=h.data||[],this.bannerDataList=h.data||[]):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}setStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("homebanner",h,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}toggleSpinner(h){this.spinnerStatus=h}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("delete-banner",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getHomebanner()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}filterdata(){this.bannerData=this.term?this.bannerDataList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.bannerDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.bannerData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.bannerDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.bannerData=this.bannerDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-banner-list"]],decls:60,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/home/add-banner",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",2)(4,"div",0)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),e.wR5(11,"div",9),e.C$Y()(),e.I0R(12,"div",10)(13,"div",11)(14,"input",12),e.iHE("ngModelChange",function(dt){return e.kNx(y.term,dt)||(y.term=dt),dt}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(15,"i",13),e.C$Y()(),e.I0R(16,"div",14)(17,"div",15)(18,"div")(19,"a",16),e.wR5(20,"i",17),e.OEk(21,"Add"),e.C$Y()()()()()(),e.I0R(22,"div",18)(23,"div",19)(24,"table",20)(25,"thead",21)(26,"tr")(27,"th",22),e.OEk(28,"S No."),e.C$Y(),e.I0R(29,"th",22),e.OEk(30,"Title"),e.C$Y(),e.I0R(31,"th",22),e.OEk(32,"Banner Type"),e.C$Y(),e.I0R(33,"th",22),e.OEk(34,"Status"),e.C$Y(),e.I0R(35,"th",23),e.OEk(36,"Action"),e.C$Y()()(),e.I0R(37,"tbody",24),e.c53(38,ks,19,12,"tr",null,e.wJt),e.C$Y()(),e.I0R(40,"div",25)(41,"div",26),e.wR5(42,"i",27),e.I0R(43,"h5",28),e.OEk(44,"Sorry! No Result Found"),e.C$Y(),e.I0R(45,"p",29),e.OEk(46," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(47,"div",30)(48,"div",31)(49,"div",32),e.OEk(50," Showing "),e.I0R(51,"span",33),e.OEk(52),e.C$Y(),e.OEk(53," of "),e.I0R(54,"span",33),e.OEk(55),e.C$Y(),e.OEk(56," Results "),e.C$Y()(),e.I0R(57,"div",34)(58,"pagination",35),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()()(),e.yuY(59,ga,4,0,"div",36),e.C$Y()()()()),2&$&&(e.yG2(14),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.bannerData),e.yG2(14),e.cNF(null==y.bannerData?null:y.bannerData.length),e.yG2(3),e.cNF(null==y.bannerDataList?null:y.bannerDataList.length),e.yG2(3),e.E7m("totalItems",null==y.bannerDataList?null:y.bannerDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(59,y.spinnerStatus?59:-1))},dependencies:[Te.QF,Ve.ER,c.ot,c.ue,c._G,We.im]})}return M})();function Ja(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 25 characters "),e.C$Y())}function pl(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Sub title must be at most 25 characters "),e.C$Y())}function yo(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Description must be at most 150 characters "),e.C$Y())}function ql(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Type is required."),e.C$Y())}function So(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Video type is required."),e.C$Y())}function lc(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Video type is required."),e.C$Y())}function Wo(M,be){1&M&&(e.I0R(0,"div",7)(1,"div",8)(2,"label",44),e.OEk(3,"Video URL "),e.C$Y(),e.I0R(4,"div",18),e.wR5(5,"input",45),e.C$Y()()())}function za(M,be){1&M&&(e.I0R(0,"div",7)(1,"div",8)(2,"label",46),e.OEk(3,"Mobile Video URL "),e.C$Y(),e.I0R(4,"div",18),e.wR5(5,"input",47),e.C$Y()()())}function co(M,be){if(1&M&&(e.I0R(0,"div",7)(1,"div",8)(2,"label",17),e.OEk(3," Video Upload Type (for desktop) "),e.I0R(4,"span",15),e.OEk(5,"*"),e.C$Y()(),e.I0R(6,"div",18)(7,"select",39)(8,"option",20),e.OEk(9,"Select Type"),e.C$Y(),e.I0R(10,"option",40),e.OEk(11,"URL"),e.C$Y(),e.I0R(12,"option",41),e.OEk(13,"File"),e.C$Y()(),e.yuY(14,So,2,0,"div",11),e.C$Y()()(),e.I0R(15,"div",7)(16,"div",8)(17,"label",17),e.OEk(18," Video Upload Type (for mobile) "),e.I0R(19,"span",15),e.OEk(20,"*"),e.C$Y()(),e.I0R(21,"div",18)(22,"select",42)(23,"option",20),e.OEk(24,"Select Type"),e.C$Y(),e.I0R(25,"option",40),e.OEk(26,"URL"),e.C$Y(),e.I0R(27,"option",41),e.OEk(28,"File"),e.C$Y()(),e.yuY(29,lc,2,0,"div",11),e.C$Y()()(),e.yuY(30,Wo,6,0,"div",43)(31,za,6,0,"div",43)),2&M){const h=e.GaO();e.yG2(7),e.E7m("ngClass",h.f.videotype&&h.f.videotype.hasError("required")&&h.f.videotype.touched?"is-invalid":""),e.yG2(7),e.C0Y(14,h.f.videotype&&h.f.videotype.hasError("required")&&h.f.videotype.touched?14:-1),e.yG2(8),e.E7m("ngClass",h.f.videotypemob&&h.f.videotypemob.hasError("required")&&h.f.videotypemob.touched?"is-invalid":""),e.yG2(7),e.C0Y(29,h.f.videotypemob&&h.f.videotypemob.hasError("required")&&h.f.videotypemob.touched?29:-1),e.yG2(),e.C0Y(30,"url"==h.f.videotype.value?30:-1),e.yG2(),e.C0Y(31,"url"==h.f.videotypemob.value?31:-1)}}function Qa(M,be){if(1&M&&e.wR5(0,"img",74),2&M){const h=e.GaO(3);e.E7m("src",h.BannerImageFilePreview,e.K6U)}}function Ls(M,be){if(1&M&&(e.I0R(0,"h5",75),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.BannerImageSelectedFiles.name," ")}}function el(M,be){if(1&M&&(e.I0R(0,"p",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.BannerImageSelectedFiles.size," ")}}function ta(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",61)(1,"li",62)(2,"div",63)(3,"div",64)(4,"div",65)(5,"div",66),e.yuY(6,Qa,1,1,"img",67),e.C$Y()(),e.I0R(7,"div",68)(8,"div",69),e.yuY(9,Ls,2,1,"h5",70)(10,el,2,1,"p",71),e.C$Y()(),e.I0R(11,"div",72)(12,"button",73),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(10),Ke=e.GaO();return e.CGJ(Ke.removeImageSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(2);e.yG2(6),e.C0Y(6,h.BannerImageFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.BannerImageSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.BannerImageSelectedFiles.size?10:-1)}}function bo(M,be){if(1&M&&(e.I0R(0,"div",77)(1,"div")(2,"label",17),e.OEk(3,"Uploaded Banner"),e.C$Y(),e.I0R(4,"div",78)(5,"div"),e.wR5(6,"img",79),e.C$Y()()()()),2&M){const h=e.GaO(2);e.yG2(6),e.E7m("src",h.uploadedThumbnail,e.K6U)}}function Fa(M,be){if(1&M&&e.wR5(0,"img",74),2&M){const h=e.GaO(3);e.E7m("src",h.BannerThumbnailFilePreview,e.K6U)}}function Ya(M,be){if(1&M&&(e.I0R(0,"h5",75),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.BannerThumbnailSelectedFiles.name," ")}}function fl(M,be){if(1&M&&(e.I0R(0,"p",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(3);e.yG2(),e.oRS(" ",h.BannerThumbnailSelectedFiles.size," ")}}function Il(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",61)(1,"li",62)(2,"div",63)(3,"div",64)(4,"div",65)(5,"div",66),e.yuY(6,Fa,1,1,"img",67),e.C$Y()(),e.I0R(7,"div",68)(8,"div",69),e.yuY(9,Ya,2,1,"h5",70)(10,fl,2,1,"p",71),e.C$Y()(),e.I0R(11,"div",72)(12,"button",73),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(29),Ke=e.GaO();return e.CGJ(Ke.removeThumbnailSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(2);e.yG2(6),e.C0Y(6,h.BannerThumbnailFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.BannerThumbnailSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.BannerThumbnailSelectedFiles.size?10:-1)}}function ia(M,be){if(1&M&&(e.I0R(0,"div",77)(1,"div")(2,"label",17),e.OEk(3,"Uploaded Mobile Image"),e.C$Y(),e.I0R(4,"div",78)(5,"div"),e.wR5(6,"img",79),e.C$Y()()()()),2&M){const h=e.GaO(2);e.yG2(6),e.E7m("src",h.uploadedMobileThumbnail,e.K6U)}}function Xl(M,be){if(1&M){const h=e.KQA();e.I0R(0,"div",48)(1,"div",1)(2,"div",49)(3,"div")(4,"label",17),e.OEk(5,"Banner/Poster Image"),e.I0R(6,"span",15),e.OEk(7,"*"),e.C$Y()(),e.I0R(8,"div",50)(9,"input",51,52),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO();return e.CGJ(Ke.onBannerImageSelected(y))}),e.C$Y(),e.I0R(11,"label",53)(12,"span",54),e.OEk(13,"Choose a file to upload. "),e.wR5(14,"br"),e.I0R(15,"span",55),e.OEk(16,"File size 1400 \xd7 750 px "),e.C$Y()()()(),e.yuY(17,ta,14,3,"ul",56),e.C$Y()(),e.yuY(18,bo,7,1,"div",57),e.C$Y()(),e.I0R(19,"div",23)(20,"div",1)(21,"div",49)(22,"div")(23,"label",17),e.OEk(24,"Banner/Poster Mobile Image"),e.I0R(25,"span",15),e.OEk(26,"*"),e.C$Y()(),e.I0R(27,"div",50)(28,"input",58,59),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO();return e.CGJ(Ke.onThumbnailSelected(y))}),e.C$Y(),e.I0R(30,"label",60)(31,"span",54),e.OEk(32,"Choose a file to upload. "),e.wR5(33,"br"),e.I0R(34,"span",55),e.OEk(35,"File size 768 \xd7 1200 px "),e.C$Y()()()(),e.yuY(36,Il,14,3,"ul",56),e.C$Y()(),e.yuY(37,ia,7,1,"div",57),e.C$Y()()}if(2&M){const h=e.GaO();e.yG2(17),e.C0Y(17,h.BannerImageSelectedFiles?17:-1),e.yG2(),e.C0Y(18,h.uploadedThumbnail?18:-1),e.yG2(18),e.C0Y(36,h.BannerThumbnailSelectedFiles?36:-1),e.yG2(),e.C0Y(37,h.uploadedMobileThumbnail?37:-1)}}function ml(M,be){if(1&M&&e.wR5(0,"video",94),2&M){const h=e.GaO(4);e.E7m("src",h.BannerVideoFilePreview,e.K6U)}}function Lo(M,be){if(1&M&&(e.I0R(0,"h5",75),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.BannerVideoSelectedFiles.name," ")}}function Zl(M,be){if(1&M&&(e.I0R(0,"p",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.BannerVideoSelectedFiles.size," ")}}function tl(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",61)(1,"li",62)(2,"div",63)(3,"div",91)(4,"div",65)(5,"div",92),e.yuY(6,ml,1,1,"video",93),e.C$Y()(),e.I0R(7,"div",68)(8,"div",69),e.yuY(9,Lo,2,1,"h5",70)(10,Zl,2,1,"p",71),e.C$Y()(),e.I0R(11,"div",72)(12,"button",73),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(10),Ke=e.GaO(2);return e.CGJ(Ke.removeVideoSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(3);e.yG2(6),e.C0Y(6,h.BannerVideoFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.BannerVideoSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.BannerVideoSelectedFiles.size?10:-1)}}function Is(M,be){if(1&M&&(e.I0R(0,"div",77)(1,"div")(2,"label",17),e.OEk(3,"Uploaded Video"),e.C$Y(),e.I0R(4,"div",78)(5,"div"),e.wR5(6,"video",95),e.C$Y()()()()),2&M){const h=e.GaO(3);e.yG2(6),e.E7m("src",h.uploadedVideo,e.K6U)}}function xo(M,be){if(1&M&&e.wR5(0,"img",74),2&M){const h=e.GaO(4);e.E7m("src",h.BannerThumbnailFilePreview,e.K6U)}}function il(M,be){if(1&M&&(e.I0R(0,"h5",75),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.BannerThumbnailSelectedFiles.name," ")}}function gl(M,be){if(1&M&&(e.I0R(0,"p",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.BannerThumbnailSelectedFiles.size," ")}}function Po(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",61)(1,"li",62)(2,"div",63)(3,"div",64)(4,"div",65)(5,"div",66),e.yuY(6,xo,1,1,"img",67),e.C$Y()(),e.I0R(7,"div",68)(8,"div",69),e.yuY(9,il,2,1,"h5",70)(10,gl,2,1,"p",71),e.C$Y()(),e.I0R(11,"div",72)(12,"button",73),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(26),Ke=e.GaO(2);return e.CGJ(Ke.removeThumbnailSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(3);e.yG2(6),e.C0Y(6,h.BannerThumbnailFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.BannerThumbnailSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.BannerThumbnailSelectedFiles.size?10:-1)}}function As(M,be){if(1&M&&(e.I0R(0,"div",77)(1,"div")(2,"label",17),e.OEk(3,"Uploaded Video Thumbnail"),e.C$Y(),e.I0R(4,"div",78)(5,"div"),e.wR5(6,"img",79),e.C$Y()()()()),2&M){const h=e.GaO(3);e.yG2(6),e.E7m("src",h.uploadedMobileThumbnail,e.K6U)}}function Ba(M,be){if(1&M){const h=e.KQA();e.I0R(0,"div",48)(1,"div",1)(2,"div",49)(3,"div")(4,"label",17),e.OEk(5,"Upload Video"),e.I0R(6,"span",15),e.OEk(7,"*"),e.C$Y()(),e.I0R(8,"div",50)(9,"input",81,82),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO(2);return e.CGJ(Ke.onBannerVideoSelected(y))}),e.C$Y(),e.I0R(11,"label",83)(12,"span",54),e.OEk(13,"Choose a file to upload."),e.C$Y()()(),e.yuY(14,tl,14,3,"ul",56),e.C$Y()(),e.yuY(15,Is,7,1,"div",57),e.C$Y()(),e.I0R(16,"div",23)(17,"div",1)(18,"div",49)(19,"div")(20,"label",17),e.OEk(21,"Video Thumbnail"),e.I0R(22,"span",15),e.OEk(23,"*"),e.C$Y()(),e.I0R(24,"div",50)(25,"input",84,85),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO(2);return e.CGJ(Ke.onThumbnailSelected(y))}),e.C$Y(),e.I0R(27,"label",86)(28,"div",87)(29,"span",54),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",55),e.OEk(33,"File size 656 \xd7 290 px "),e.C$Y()()(),e.I0R(34,"div",88)(35,"span",89),e.OEk(36,"Choose a file to upload. "),e.wR5(37,"br"),e.I0R(38,"span",90),e.OEk(39,"File size 656 \xd7 290 px "),e.C$Y()()()()(),e.yuY(40,Po,14,3,"ul",56),e.C$Y()(),e.yuY(41,As,7,1,"div",57),e.C$Y()()}if(2&M){const h=e.GaO(2);e.yG2(14),e.C0Y(14,h.BannerVideoSelectedFiles?14:-1),e.yG2(),e.C0Y(15,h.uploadedVideo?15:-1),e.yG2(25),e.C0Y(40,h.BannerThumbnailSelectedFiles?40:-1),e.yG2(),e.C0Y(41,h.uploadedMobileThumbnail?41:-1)}}function rs(M,be){if(1&M&&e.wR5(0,"video",94),2&M){const h=e.GaO(4);e.E7m("src",h.mobBannerVideoFilePreview,e.K6U)}}function uo(M,be){if(1&M&&(e.I0R(0,"h5",75),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.mobBannerVideoSelectedFiles.name," ")}}function Ga(M,be){if(1&M&&(e.I0R(0,"p",76),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(4);e.yG2(),e.oRS(" ",h.mobBannerVideoSelectedFiles.size," ")}}function Na(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",61)(1,"li",62)(2,"div",63)(3,"div",91)(4,"div",65)(5,"div",92),e.yuY(6,rs,1,1,"video",93),e.C$Y()(),e.I0R(7,"div",68)(8,"div",69),e.yuY(9,uo,2,1,"h5",70)(10,Ga,2,1,"p",71),e.C$Y()(),e.I0R(11,"div",72)(12,"button",73),e.qCj("click",function(){e.usT(h),e.GaO();const y=e.Gew(10),Ke=e.GaO(2);return e.CGJ(Ke.mobremoveVideoSelectedFile(y))}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO(3);e.yG2(6),e.C0Y(6,h.mobBannerVideoFilePreview?6:-1),e.yG2(3),e.C0Y(9,h.mobBannerVideoSelectedFiles.name?9:-1),e.yG2(),e.C0Y(10,h.mobBannerVideoSelectedFiles.size?10:-1)}}function qs(M,be){if(1&M&&(e.I0R(0,"div",77)(1,"div")(2,"label",17),e.OEk(3," Mobile Uploaded Video"),e.C$Y(),e.I0R(4,"div",78)(5,"div"),e.wR5(6,"video",95),e.C$Y()()()()),2&M){const h=e.GaO(3);e.yG2(6),e.E7m("src",h.mobuploadedVideo,e.K6U)}}function qo(M,be){if(1&M){const h=e.KQA();e.I0R(0,"div",48)(1,"div",1)(2,"div",49)(3,"div")(4,"label",17),e.OEk(5,"Upload Mobile Video"),e.I0R(6,"span",15),e.OEk(7,"*"),e.C$Y()(),e.I0R(8,"div",50)(9,"input",96,97),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO(2);return e.CGJ(Ke.mobBannerVideoSelected(y))}),e.C$Y(),e.I0R(11,"label",98)(12,"span",54),e.OEk(13,"Choose a file to upload."),e.C$Y()()(),e.yuY(14,Na,14,3,"ul",56),e.C$Y()(),e.yuY(15,qs,7,1,"div",57),e.C$Y()()}if(2&M){const h=e.GaO(2);e.yG2(14),e.C0Y(14,h.mobBannerVideoSelectedFiles?14:-1),e.yG2(),e.C0Y(15,h.mobuploadedVideo?15:-1)}}function ko(M,be){if(1&M&&e.yuY(0,Ba,42,4)(1,qo,16,2,"div",80),2&M){const h=e.GaO();e.C0Y(0,"file"==h.f.videotype.value?0:-1),e.yG2(),e.C0Y(1,"file"==h.f.videotypemob.value?1:-1)}}function Gr(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"CTA Name is required."),e.C$Y())}function _l(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"CTA Url is required."),e.C$Y())}function _a(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"CTA Status is required."),e.C$Y())}function na(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function ra(M,be){1&M&&(e.I0R(0,"button",99),e.OEk(1,"Save"),e.C$Y())}function zo(M,be){1&M&&(e.I0R(0,"button",100),e.wR5(1,"span",101),e.OEk(2," Please wait "),e.C$Y())}function vl(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",102)(2,"span",103),e.OEk(3,"Loading..."),e.C$Y()()())}const sa=M=>({"is-invalid":M});let ho=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.BannerImageSelectedFiles=null,this.BannerImageFilePreview=null,this.BannerThumbnailSelectedFiles=null,this.BannerThumbnailFilePreview=null,this.BannerVideoSelectedFiles=null,this.BannerVideoFilePreview=null,this.mobBannerVideoSelectedFiles=null,this.mobBannerVideoFilePreview=null,this.uploadedThumbnail="",this.uploadedMobileThumbnail="",this.uploadedVideo="",this.mobuploadedVideo=""}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Home Page",active:!0}],this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.initializeForm(),this.urlId&&this.getHomebannerDetails()}get f(){return this.BannerSectionform.controls}initializeForm(){this.BannerSectionform=this.formBuilder.group({title:["",[c.AQ.maxLength(25)]],sub_title:["",[c.AQ.maxLength(25)]],description:["",[c.AQ.maxLength(150)]],type:["",[c.AQ.required]],videotype:["",[c.AQ.required]],videotypemob:["",[c.AQ.required]],bannervideoUrl:[""],mobbannervideoUrl:[""],cta1Name:[""],cta1Url:[""],cta1Status:["",[c.AQ.required]],status:["",[c.AQ.required]]})}getHomebannerDetails(){this.toggleSpinner(!0),this.api.get("homebanner",this.urlId).subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.setHomebannerDetails(h.data[0]),this.setValidation(h.data[0].type)):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}setValidation(h){"image"===h?this.clearVideoValidators():"video"===h&&this.setVideoValidators()}clearVideoValidators(){this.BannerSectionform.get("videotype").clearValidators(),this.BannerSectionform.get("videotypemob").clearValidators(),this.BannerSectionform.get("videotype").updateValueAndValidity(),this.BannerSectionform.get("videotypemob").updateValueAndValidity()}setVideoValidators(){this.BannerSectionform.get("videotype").setValidators([c.AQ.required]),this.BannerSectionform.get("videotypemob").setValidators([c.AQ.required]),this.BannerSectionform.get("videotype").updateValueAndValidity(),this.BannerSectionform.get("videotypemob").updateValueAndValidity()}setHomebannerDetails(h){h&&(this.f.title.setValue(h.title),this.f.sub_title.setValue(h.sub_title),this.f.description.setValue(h.description),this.f.type.setValue(h.type),this.f.videotype.setValue(h.videotype),this.f.videotypemob.setValue(h.videotypemob),this.f.cta1Name.setValue(h.cta1_name),this.f.cta1Url.setValue(h.cta1_link),this.f.cta1Status.setValue(h.cta1_status),this.f.status.setValue(h.status),this.f.bannervideoUrl.setValue(h.video_url),this.f.mobbannervideoUrl.setValue(h.mobbannervideoUrl),this.uploadedThumbnail=h.thumbnail,this.uploadedMobileThumbnail=h.thumbnail_mob,this.uploadedVideo=h.video,this.mobuploadedVideo=h.mobvideo)}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}onSubmit(){if(this.BannerSectionform.valid){this.toggleSpinner(!0);const h=this.createFormData();this.urlId?this.updateBanner(h):this.addBanner(h)}else this.BannerSectionform.markAllAsTouched()}createFormData(){const h=new FormData;return h.append("title",this.f.title.value),h.append("sub_title",this.f.sub_title.value),h.append("description",this.f.description.value),h.append("type",this.f.type.value),h.append("cta1_name",this.f.cta1Name.value),h.append("cta1_link",this.f.cta1Url.value),h.append("cta1_status",this.f.cta1Status.value),h.append("status",this.f.status.value),h.append("videotype",this.f.videotype.value),h.append("videotypemob",this.f.videotypemob.value),h.append("alt_name","banner"),"image"===this.f.type.value?(this.BannerImageSelectedFiles&&h.append("thumbnail",this.BannerImageSelectedFiles),this.BannerThumbnailSelectedFiles&&h.append("thumbnail_mob",this.BannerThumbnailSelectedFiles)):"video"===this.f.type.value&&("file"===this.f.videotype.value?this.BannerVideoSelectedFiles&&h.append("video",this.BannerVideoSelectedFiles):"url"===this.f.videotype.value&&h.append("video_url",this.f.bannervideoUrl.value),"file"===this.f.videotypemob.value?this.mobBannerVideoSelectedFiles&&h.append("mobvideo",this.mobBannerVideoSelectedFiles):"url"===this.f.videotypemob.value&&h.append("mobbannervideoUrl",this.f.mobbannervideoUrl.value),this.BannerThumbnailSelectedFiles&&h.append("thumbnail_mob",this.BannerThumbnailSelectedFiles)),h}addBanner(h){this.api.post("homebanner",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateBanner(h){this.api.put("homebanner",this.urlId,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["home/banner-list"])):this.toastService.error(h.message)}resetForm(){this.BannerImageSelectedFiles=null,this.BannerThumbnailSelectedFiles=null,this.BannerVideoSelectedFiles=null,this.mobBannerVideoSelectedFiles=null,this.BannerSectionform.reset()}handleError(h){this.toggleSpinner(!1)}onBannerImageSelected(h){const $=h.target.files[0];$&&(this.BannerImageSelectedFiles=$,this.BannerImageFilePreview=URL.createObjectURL($))}onBannerVideoSelected(h){const $=h.target.files[0];$&&(this.BannerVideoSelectedFiles=$,this.BannerVideoFilePreview=URL.createObjectURL($))}mobBannerVideoSelected(h){const $=h.target.files[0];$&&(this.mobBannerVideoSelectedFiles=$,this.mobBannerVideoFilePreview=URL.createObjectURL($))}onThumbnailSelected(h){const $=h.target.files[0];$&&(this.BannerThumbnailSelectedFiles=$,this.BannerThumbnailFilePreview=URL.createObjectURL($))}removeImageSelectedFile(h){this.BannerImageSelectedFiles=null,this.BannerImageFilePreview=null,h.value=null}removeThumbnailSelectedFile(h){this.BannerThumbnailSelectedFiles=null,this.BannerThumbnailFilePreview=null,h.value=null}removeVideoSelectedFile(h){this.BannerVideoSelectedFiles=null,this.BannerVideoFilePreview=null,h.value=null}mobremoveVideoSelectedFile(h){this.mobBannerVideoSelectedFiles=null,this.mobBannerVideoFilePreview=null,h.value=null}onTypeChange(h){"video"===h.target.value?this.setVideoValidators():this.clearVideoValidators()}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-add-banner"]],decls:93,vars:25,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","ngSubmit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title","value","title",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub title","value","sub_title",1,"form-control",3,"ngClass"],["for","description",1,"form-label"],[1,"text-danger"],["placeholder","Enter description","rows","5","formControlName","description",1,"form-control",3,"ngClass"],[1,"form-label"],[1,"position-relative"],["formControlName","type",1,"form-control",3,"ngClass","change"],["value",""],["value","video"],["value","image"],[1,"col-lg-12","mt-3"],["for","cta1Name",1,"form-label"],["type","text","id","cta1Name","formControlName","cta1Name","placeholder","Enter CTA1 Name","value","cta1Name",1,"form-control",3,"ngClass"],["for","cta1Url",1,"form-label"],["type","text","formControlName","cta1Url","id","cta1Url","placeholder","Enter CTA1 Url",1,"form-control",3,"ngClass"],["for","cta1_status",1,"form-label"],["formControlName","cta1Status","data-choices","","id","cta1_status",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],[1,"col-6"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],[1,"invalid-text"],["formControlName","videotype",1,"form-control",3,"ngClass"],["value","url"],["value","file"],["formControlName","videotypemob",1,"form-control",3,"ngClass"],["class","col-lg-4"],["for","videoURL",1,"form-label"],["type","text","formControlName","bannervideoUrl","id","videoURL","placeholder","Enter video URL",1,"form-control","password-input"],["for","mobvideoURL",1,"form-label"],["type","text","formControlName","mobbannervideoUrl","id","mobvideoURL","placeholder","Enter video URL",1,"form-control","password-input"],[1,"col-lg-12"],[1,"col-lg-6"],[1,"custom-dropzone"],["type","file","id","bannerFileInput","accept","image/*","hidden","",3,"change"],["bannerFileInput",""],["for","bannerFileInput",1,"custom-file-input"],[1,"custom-file-text"],[1,"custom-file-text2"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],["type","file","id","imageThumbnailInput","accept","image/*","hidden","",3,"change"],["bannerThumbnailFileInput",""],["for","imageThumbnailInput",1,"custom-file-input"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"flex-shrink-0","ms-3"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],[1,"uploaded-img"],["alt","Uploaded Thumbnail",1,"thumbnail-img-fluid","rounded","d-block",3,"src"],["class","col-lg-12"],["type","file","id","videoFileInput","accept","video/*","hidden","",3,"change"],["videoFileInput",""],["for","videoFileInput",1,"custom-file-input"],["type","file","id","videoThumbnailInput","accept","image/*","hidden","",3,"change"],["videoThumbnailFileInput",""],["for","videoThumbnailInput",1,"custom-file-input"],[1,"d-none","d-md-block"],[1,"d-block","d-md-none"],[1,"custom-file-text-mob"],[1,"custom-file-text2-mob"],[1,"d-flex","p-2"],[1,"videoo-avatar-sm","bg-light","rounded"],["class","img-fluid rounded d-block",3,"src"],[1,"img-fluid","rounded","d-block",3,"src"],[1,"thumbnail-img-fluid","rounded","d-block",3,"src"],["type","file","id","mobvideoFileInput","accept","video/*","hidden","",3,"change"],["mobvideoFileInput",""],["for","mobvideoFileInput",1,"custom-file-input"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("ngSubmit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.C$Y(),e.wR5(12,"input",10),e.yuY(13,Ja,2,0,"div",11),e.C$Y()(),e.I0R(14,"div",7)(15,"div",8)(16,"label",12),e.OEk(17,"Sub title"),e.C$Y(),e.wR5(18,"input",13),e.yuY(19,pl,2,0,"div",11),e.C$Y()(),e.I0R(20,"div",7)(21,"div",8)(22,"label",14),e.OEk(23," Description"),e.wR5(24,"span",15),e.C$Y(),e.wR5(25,"textarea",16),e.yuY(26,yo,2,0,"div",11),e.C$Y()(),e.I0R(27,"div",7)(28,"div",8)(29,"label",17),e.OEk(30,"Type "),e.I0R(31,"span",15),e.OEk(32,"*"),e.C$Y()(),e.I0R(33,"div",18)(34,"select",19),e.qCj("change",function(dt){return y.onTypeChange(dt)}),e.I0R(35,"option",20),e.OEk(36,"Select Banner"),e.C$Y(),e.I0R(37,"option",21),e.OEk(38,"Video"),e.C$Y(),e.I0R(39,"option",22),e.OEk(40,"Image"),e.C$Y()(),e.yuY(41,ql,2,0,"div",11),e.C$Y()()(),e.yuY(42,co,32,6)(43,Xl,38,4)(44,ko,2,2),e.I0R(45,"div",23)(46,"div",1)(47,"div",7)(48,"div",8)(49,"label",24),e.OEk(50,"CTA Name"),e.C$Y(),e.wR5(51,"input",25),e.yuY(52,Gr,2,0,"div",11),e.C$Y()(),e.I0R(53,"div",7)(54,"div",8)(55,"label",26),e.OEk(56,"CTA Url"),e.C$Y(),e.wR5(57,"input",27),e.yuY(58,_l,2,0,"div",11),e.C$Y()(),e.I0R(59,"div",7)(60,"div",8)(61,"label",28),e.OEk(62,"CTA Status"),e.I0R(63,"span",15),e.OEk(64,"*"),e.C$Y()(),e.I0R(65,"select",29)(66,"option",20),e.OEk(67,"Select Status"),e.C$Y(),e.I0R(68,"option",30),e.OEk(69,"Active"),e.C$Y(),e.I0R(70,"option",31),e.OEk(71,"Inactive"),e.C$Y()(),e.yuY(72,_a,2,0,"div",11),e.C$Y()(),e.I0R(73,"div",7)(74,"div",8)(75,"label",32),e.OEk(76,"Status "),e.I0R(77,"span",15),e.OEk(78,"*"),e.C$Y()(),e.I0R(79,"select",33)(80,"option",20),e.OEk(81,"Select Status"),e.C$Y(),e.I0R(82,"option",30),e.OEk(83,"Active"),e.C$Y(),e.I0R(84,"option",31),e.OEk(85,"Inactive"),e.C$Y()(),e.yuY(86,na,2,0,"div",11),e.C$Y()()()(),e.I0R(87,"div",34)(88,"div",35),e.yuY(89,ra,2,0,"button",36)(90,zo,3,0),e.C$Y()()()(),e.wR5(91,"div"),e.C$Y(),e.yuY(92,vl,4,0,"div",37),e.C$Y()()()()),2&$&&(e.E7m("title",y.urlId?"Edit Banner":"Add Banner")("breadcrumbItems",y.breadCrumbItems),e.yG2(6),e.E7m("formGroup",y.BannerSectionform),e.yG2(6),e.E7m("ngClass",y.f.title&&y.f.title.hasError("required")&&y.f.title.touched?"is-invalid":""),e.yG2(),e.C0Y(13,y.f.title&&y.f.title.hasError("maxlength")&&y.f.title.touched?13:-1),e.yG2(5),e.E7m("ngClass",y.f.sub_title&&y.f.sub_title.hasError("required")&&y.f.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(19,y.f.sub_title&&y.f.sub_title.hasError("maxlength")&&y.f.sub_title.touched?19:-1),e.yG2(6),e.E7m("ngClass",e.S45(23,sa,y.f.description&&y.f.description.errors&&y.f.description.touched)),e.yG2(),e.C0Y(26,y.f.description&&y.f.description.hasError("maxlength")&&y.f.description.touched?26:-1),e.yG2(8),e.E7m("ngClass",y.f.type&&y.f.type.hasError("required")&&y.f.type.touched?"is-invalid":""),e.yG2(7),e.C0Y(41,y.f.type&&y.f.type.hasError("required")&&y.f.type.touched?41:-1),e.yG2(),e.C0Y(42,"video"==y.f.type.value?42:-1),e.yG2(),e.C0Y(43,"image"==y.f.type.value?43:"video"==y.f.type.value?44:-1),e.yG2(8),e.E7m("ngClass",y.f.cta1Name&&y.f.cta1Name.hasError("required")&&y.f.cta1Name.touched?"is-invalid":""),e.yG2(),e.C0Y(52,y.f.cta1Name&&y.f.cta1Name.hasError("required")&&y.f.cta1Name.touched?52:-1),e.yG2(5),e.E7m("ngClass",y.f.cta1Url&&y.f.cta1Url.hasError("required")&&y.f.cta1Url.touched?"is-invalid":""),e.yG2(),e.C0Y(58,y.f.cta1Url&&y.f.cta1Url.hasError("required")&&y.f.cta1Url.touched?58:-1),e.yG2(7),e.E7m("ngClass",y.f.cta1Status&&y.f.cta1Status.hasError("required")&&y.f.cta1Status.touched?"is-invalid":""),e.yG2(7),e.C0Y(72,y.f.cta1Status&&y.f.cta1Status.hasError("required")&&y.f.cta1Status.touched?72:-1),e.yG2(7),e.E7m("ngClass",y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(86,y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?86:-1),e.yG2(3),e.C0Y(89,y.saveButtonActive?89:90),e.yG2(3),e.C0Y(92,y.spinnerStatus?92:-1))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text-mob[_ngcontent-%COMP%]{font-size:1rem;color:#666}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.videoo-avatar-sm[_ngcontent-%COMP%]{width:3rem}.custom-file-text2[_ngcontent-%COMP%]{font-size:1rem;color:#b3b3b3}.custom-file-text2-mob[_ngcontent-%COMP%]{font-size:.8rem;color:#b3b3b3}']})}return M})();const Ol=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function oa(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",71),e.OEk(2),e.C$Y(),e.I0R(3,"td",72),e.OEk(4),e.C$Y(),e.I0R(5,"td",73),e.OEk(6),e.C$Y(),e.I0R(7,"td",72),e.OEk(8),e.C$Y(),e.I0R(9,"td",72),e.OEk(10),e.C$Y(),e.I0R(11,"td",74)(12,"div",75)(13,"input",76),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt,y))}),e.C$Y(),e.I0R(14,"label",77)(15,"span",78),e.OEk(16),e.C$Y()()()(),e.I0R(17,"td",79)(18,"ul",80)(19,"li")(20,"a",81),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(66).show(),e.CGJ(dt.edit(Ke))}),e.wR5(21,"i",82),e.C$Y()(),e.I0R(22,"li")(23,"a",83),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(24,"i",84),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.city_name," "),e.yG2(2),e.oRS(" ",h.address," "),e.yG2(2),e.oRS(" ",h.mobile," "),e.yG2(2),e.oRS(" ",h.email," "),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemdlo"+$),e.yG2(),e.E7m("for","customSwitchsizemdlo"+$),e.yG2(),e.E7m("ngClass",e.IBC(10,Ol,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function nl(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",85)(2,"span",86),e.OEk(3,"Loading..."),e.C$Y()()())}function Va(M,be){1&M&&e.OEk(0," Add Location ")}function $a(M,be){1&M&&e.OEk(0," Edit Location ")}function rl(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"city name is required."),e.C$Y())}function Bs(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1," City Name must be at most 45 characters "),e.C$Y())}function cs(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"email is required."),e.C$Y())}function Mn(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"Email must be a valid email address"),e.C$Y())}function p(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"Mobile number is required."),e.C$Y())}function A(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1," Please, Enter 10 digit Mobile Number. "),e.C$Y())}function U(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"iframe url is required."),e.C$Y())}function de(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"Address is required"),e.C$Y())}function Ie(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1," Address must be at most 100 characters "),e.C$Y())}function lt(M,be){1&M&&(e.I0R(0,"div",87),e.OEk(1,"Status is required."),e.C$Y())}function ri(M,be){1&M&&(e.I0R(0,"button",88),e.OEk(1," Save Changes "),e.C$Y())}function Si(M,be){1&M&&(e.I0R(0,"button",89),e.wR5(1,"span",90),e.OEk(2," Please wait "),e.C$Y())}const Vi=M=>({"is-invalid":M});let xn=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.editId=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.locationData=[],this.locationDataList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Location",active:!0}],this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({city_name:["",[c.AQ.required,c.AQ.maxLength(45)]],address:["",[c.AQ.required,c.AQ.maxLength(100)]],email:["",[c.AQ.required,c.AQ.email,c.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[c.AQ.required,c.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],iframe_url:["",[c.AQ.required]],status:["",[c.AQ.required]]})}get s2(){return this.formGroup.controls}getData(){this.api.getwithoutid("get-location").subscribe(h=>{h&&h.status?(this.locationData=h.data||[],this.locationDataList=h.data||[]):(this.clearServiceData(),this.handleError("Unexpected response format"))},h=>{this.clearServiceData(),this.handleError(h.message||"An error occurred while fetching data")})}clearServiceData(){this.locationData=[],this.locationDataList=[]}onSubmit(h){if(this.formGroup.valid){this.toggleSpinner(!0);const $=this.createFormData();null!=this.editId?this.updateLocation(h,$,this.editId):this.addLocation(h,$)}else this.formGroup.markAllAsTouched()}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}createFormData(){return{city_name:this.s2.city_name.value,address:this.s2.address.value,email:this.s2.email.value,mobile:this.s2.mobile.value,iframe_url:this.s2.iframe_url.value,status:this.s2.status.value}}updateLocation(h,$,y){this.api.put("location",y,$).subscribe(Ke=>this.handleResponse(Ke,h),Ke=>this.handleError(Ke))}addLocation(h,$){this.api.post("location",$).subscribe(y=>this.handleResponse(y,h),y=>this.handleError(y))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("location-delete",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}setStatus(h,$){const dt={city_name:h.city_name,address:h.address,email:h.email,mobile:h.mobile,iframe_url:h.iframe_url,status:$.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("location",h.id,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getData()):this.toastService.error(h.message)}handleResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getData(),$.hide(),this.toastService.success("Data Saved Successfully!!"),this.resetForm()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}resetForm(){this.editId=null,this.formGroup.reset()}filterdata(){this.locationData=this.term?this.locationDataList.filter(h=>{const $=this.term.toLowerCase();return h.city_name.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.locationDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.locationData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.locationDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.locationData=this.locationDataList.slice(h,this.endItem)}edit(h){this.initializeForm(),this.editId=h.id,this.formGroup.patchValue({city_name:h.city_name,address:h.address,email:h.email,mobile:h.mobile,iframe_url:h.iframe_url,status:h.status})}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-location"]],decls:136,vars:28,consts:[["title","Add Location",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],["bsModal","","id","modal",1,"modal","fade"],["modal","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","city_name",1,"form-label"],[1,"text-danger"],["type","text","id","city_name","formControlName","city_name","placeholder","Enter City Name",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter Email",1,"form-control",3,"ngClass"],["for","mobile",1,"form-label"],["type","text","id","mobile","formControlName","mobile","placeholder","Enter Mobile number",1,"form-control",3,"ngClass"],["for","iframe_url",1,"form-label"],["type","text","id","iframe_url","formControlName","iframe_url","placeholder","Enter Iframe Url",1,"form-control",3,"ngClass"],[1,"form-label"],["placeholder","Must enter maximum of a 100 characters","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"id"],[1,"instructor"],[1,"category"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.wR5(12,"div",11),e.C$Y()(),e.I0R(13,"div",12)(14,"div",13)(15,"input",14),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",15),e.C$Y()(),e.I0R(17,"div",16)(18,"div",17)(19,"div")(20,"a",18),e.qCj("click",function(){return e.usT(Ke),e.Gew(66).show(),e.CGJ(y.resetForm())}),e.wR5(21,"i",19),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",4)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"City Name"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33,"Address"),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Mobile"),e.C$Y(),e.I0R(36,"th",23),e.OEk(37,"email"),e.C$Y(),e.I0R(38,"th",23),e.OEk(39,"Status"),e.C$Y(),e.I0R(40,"th",24),e.OEk(41,"Action"),e.C$Y()()(),e.I0R(42,"tbody",25),e.c53(43,oa,25,13,"tr",null,e.wJt),e.C$Y()(),e.I0R(45,"div",26)(46,"div",27),e.wR5(47,"i",28),e.I0R(48,"h5",29),e.OEk(49,"Sorry! No Result Found"),e.C$Y(),e.I0R(50,"p",30),e.OEk(51," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(52,"div",31)(53,"div",32)(54,"div",33),e.OEk(55," Showing "),e.I0R(56,"span",34),e.OEk(57),e.C$Y(),e.OEk(58," of "),e.I0R(59,"span",34),e.OEk(60),e.C$Y(),e.OEk(61," Results "),e.C$Y()(),e.I0R(62,"div",35)(63,"pagination",36),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()(),e.yuY(64,nl,4,0,"div",37),e.C$Y()()()(),e.I0R(65,"div",38,39)(67,"div",40)(68,"div",41)(69,"div",42)(70,"h5",43),e.yuY(71,Va,1,0)(72,$a,1,0),e.C$Y(),e.I0R(73,"button",44),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(66);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(74,"form",45),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(66);return e.CGJ(y.onSubmit(ai))}),e.I0R(75,"div",46),e.wR5(76,"div",47),e.I0R(77,"div",48)(78,"label",49),e.OEk(79,"City Name"),e.I0R(80,"span",50),e.OEk(81,"*"),e.C$Y()(),e.wR5(82,"input",51),e.yuY(83,rl,2,0,"div",52)(84,Bs,2,0,"div",52),e.C$Y(),e.I0R(85,"div",48)(86,"label",53),e.OEk(87,"Email"),e.I0R(88,"span",50),e.OEk(89,"*"),e.C$Y()(),e.wR5(90,"input",54),e.yuY(91,cs,2,0,"div",52)(92,Mn,2,0,"div",52),e.C$Y(),e.I0R(93,"div",48)(94,"label",55),e.OEk(95,"Mobile"),e.I0R(96,"span",50),e.OEk(97,"*"),e.C$Y()(),e.wR5(98,"input",56),e.yuY(99,p,2,0,"div",52)(100,A,2,0,"div",52),e.C$Y(),e.I0R(101,"div",48)(102,"label",57),e.OEk(103,"iframe url"),e.I0R(104,"span",50),e.OEk(105,"*"),e.C$Y()(),e.wR5(106,"input",58),e.yuY(107,U,2,0,"div",52),e.C$Y(),e.I0R(108,"div",48)(109,"label",59),e.OEk(110,"Address "),e.I0R(111,"span",50),e.OEk(112,"*"),e.C$Y()(),e.wR5(113,"textarea",60),e.yuY(114,de,2,0,"div",52)(115,Ie,2,0,"div",52),e.C$Y(),e.I0R(116,"div",48)(117,"label",61),e.OEk(118,"Status "),e.I0R(119,"span",50),e.OEk(120,"*"),e.C$Y()(),e.I0R(121,"select",62)(122,"option",63),e.OEk(123,"Select Status"),e.C$Y(),e.I0R(124,"option",64),e.OEk(125,"Active"),e.C$Y(),e.I0R(126,"option",65),e.OEk(127,"Inactive"),e.C$Y()(),e.yuY(128,lt,2,0,"div",52),e.C$Y()(),e.I0R(129,"div",66)(130,"div",67)(131,"button",68),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(66);return e.CGJ(ai.hide())}),e.wR5(132,"i",69),e.OEk(133," Close "),e.C$Y(),e.yuY(134,ri,2,0,"button",70)(135,Si,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(28),e.oho(y.locationData),e.yG2(14),e.cNF(null==y.locationData?null:y.locationData.length),e.yG2(3),e.cNF(null==y.locationDataList?null:y.locationDataList.length),e.yG2(3),e.E7m("totalItems",null==y.locationDataList?null:y.locationDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(64,y.spinnerStatus?64:-1),e.yG2(7),e.C0Y(71,null==y.editId?71:72),e.yG2(3),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.city_name&&y.s2.city_name.hasError("required")&&y.s2.city_name.touched?"is-invalid":""),e.yG2(),e.C0Y(83,y.s2.city_name&&y.s2.city_name.hasError("required")&&y.s2.city_name.touched?83:-1),e.yG2(),e.C0Y(84,y.s2.city_name&&y.s2.city_name.hasError("maxlength")&&y.s2.city_name.touched?84:-1),e.yG2(6),e.E7m("ngClass",y.s2.email&&y.s2.email.hasError("required")&&y.s2.email.touched?"is-invalid":""),e.yG2(),e.C0Y(91,y.s2.email&&y.s2.email.hasError("required")&&y.s2.email.touched?91:-1),e.yG2(),e.C0Y(92,y.s2.email&&y.s2.email.hasError("pattern")&&y.s2.email.touched?92:-1),e.yG2(6),e.E7m("ngClass",y.s2.mobile&&y.s2.mobile.hasError("required")&&y.s2.mobile.touched?"is-invalid":""),e.yG2(),e.C0Y(99,y.s2.mobile&&y.s2.mobile.hasError("required")&&y.s2.mobile.touched?99:-1),e.yG2(),e.C0Y(100,y.s2.mobile&&y.s2.mobile.hasError("pattern")&&y.s2.mobile.touched?100:-1),e.yG2(6),e.E7m("ngClass",y.s2.iframe_url&&y.s2.iframe_url.hasError("required")&&y.s2.iframe_url.touched?"is-invalid":""),e.yG2(),e.C0Y(107,y.s2.iframe_url&&y.s2.iframe_url.hasError("required")&&y.s2.iframe_url.touched?107:-1),e.yG2(6),e.E7m("ngClass",e.S45(26,Vi,y.s2.address&&y.s2.address.errors&&y.s2.address.touched)),e.yG2(),e.C0Y(114,y.s2.address&&y.s2.address.hasError("required")&&y.s2.address.touched?114:-1),e.yG2(),e.C0Y(115,y.s2.address&&y.s2.address.hasError("maxlength")&&y.s2.address.touched?115:-1),e.yG2(6),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(128,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?128:-1),e.yG2(6),e.C0Y(134,y.addSaveButtonActive?134:135))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return M})();function $n(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",17)(2,"span",18),e.OEk(3,"Loading..."),e.C$Y()()())}function Un(M,be){1&M&&(e.I0R(0,"div",19),e.OEk(1,"Title is required."),e.C$Y())}function Ir(M,be){1&M&&(e.I0R(0,"div",19),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function Lr(M,be){1&M&&(e.I0R(0,"div",19),e.OEk(1,"Sub title is required."),e.C$Y())}function _s(M,be){1&M&&(e.I0R(0,"div",19),e.OEk(1," Sub title must be at most 45 characters "),e.C$Y())}function Os(M,be){1&M&&(e.I0R(0,"button",20),e.OEk(1,"Save"),e.C$Y())}function Gs(M,be){1&M&&(e.I0R(0,"button",21),e.wR5(1,"span",22),e.OEk(2," Please wait "),e.C$Y())}let To=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1}ngOnInit(){this.initializeForm(),this.getHeading()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(45)]]})}get s2(){return this.formGroup.controls}getHeading(){this.toggleSpinner(!0),this.api.get("home-getHeading","section-two-heading").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0;const $=h.data[0];this.formGroup.patchValue({title:$.heading,sub_title:$.sub_title}),this.titleChange.emit($.heading)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.addSection(h)}else this.formGroup.markAllAsTouched()}createFormData(){return{heading:this.s2.title.value,sub_title:this.s2.sub_title.value,section_key:"section-two-heading"}}addSection(h){this.api.post("home-headingAdd",h).subscribe($=>{this.handleResponse($)},$=>this.handleError($))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-home-sectiontwo"]],outputs:{titleChange:"titleChange"},decls:30,vars:9,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-6"],[1,""],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter sub title ",1,"form-control",3,"ngClass"],[1,"hstack","gap-2","justify-content-start","mt-4"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,$n,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Un,2,0,"div",12)(16,Ir,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Sub title"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,Lr,2,0,"div",12)(25,_s,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",7)(27,"div",15),e.yuY(28,Os,2,0,"button",16)(29,Gs,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?24:-1),e.yG2(),e.C0Y(25,y.s2.sub_title&&y.s2.sub_title.hasError("maxlength")&&y.s2.sub_title.touched?25:-1),e.yG2(3),e.C0Y(28,y.saveButtonActive?28:29))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function va(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",30)(2,"span",31),e.OEk(3,"Loading..."),e.C$Y()()())}function po(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Title One is required."),e.C$Y())}function Fl(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1," Title One must be at most 45 characters "),e.C$Y())}function Ha(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Description One is required."),e.C$Y())}function Fo(M,be){if(1&M&&e.wR5(0,"img",45),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function sl(M,be){if(1&M&&(e.I0R(0,"h5",46),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Ye(M,be){if(1&M&&(e.I0R(0,"p",47),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function ne(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",33)(1,"li",34)(2,"div",35)(3,"div",36)(4,"div",37)(5,"div",38),e.yuY(6,Fo,1,1,"img",39),e.C$Y()(),e.I0R(7,"div",40)(8,"div",41),e.yuY(9,sl,2,1,"h5",42)(10,Ye,2,1,"p",43),e.C$Y()(),e.I0R(11,"div",37)(12,"button",44),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function fe(M,be){}function $e(M,be){1&M&&(e.I0R(0,"div",32),e.OEk(1,"Banner is required."),e.C$Y())}function Kt(M,be){if(1&M&&(e.I0R(0,"div",48)(1,"div")(2,"label",18),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",49),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function an(M,be){1&M&&(e.I0R(0,"button",50),e.OEk(1,"Save"),e.C$Y())}function Hn(M,be){1&M&&(e.I0R(0,"button",51),e.wR5(1,"span",52),e.OEk(2," Please wait "),e.C$Y())}const Pr=M=>({"is-invalid":M});let Fr=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],banner:["",this.imageValidator()],description:["",[c.AQ.required]]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.getwithoutid("get-about-banner").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.banner,this.formGroup.patchValue({title:$.title,description:$.description})}},h=>this.handleError(h))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-about-banner",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){console.log("reset"),this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-about-banner",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("banner",this.selectedImageOne),h.append("title",this.s2.title.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about-banner"]],decls:49,vars:18,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutBanner","accept","image/*","formControlName","banner","hidden","",3,"change"],["aboutBanner",""],["for","aboutBanner",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,va,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,po,2,0,"div",12)(16,Fl,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",8)(19,"label",14),e.OEk(20," Description"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"ngx-editor-menu",15)(24,"ngx-editor",16),e.yuY(25,Ha,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",17)(27,"div",8)(28,"label",18),e.OEk(29,"Banner"),e.I0R(30,"span",10),e.OEk(31,"*"),e.C$Y()(),e.I0R(32,"div",19)(33,"input",20,21),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(35,"label",22)(36,"span",23),e.OEk(37,"Choose a file to upload. "),e.wR5(38,"br"),e.I0R(39,"span",24),e.OEk(40,"File size 1440 \xd7 700 px "),e.C$Y()()()(),e.yuY(41,ne,14,3,"ul",25)(42,fe,0,0)(43,$e,2,0,"div",12),e.C$Y()(),e.yuY(44,Kt,7,1,"div",26),e.I0R(45,"div",27)(46,"div",28),e.yuY(47,an,2,0,"button",29)(48,Hn,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(16,Pr,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(25,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?25:-1),e.yG2(16),e.C0Y(41,y.selectedImageOne?41:-1),e.yG2(),e.C0Y(42,y.uploadedImageOne?42:-1),e.yG2(),e.C0Y(43,y.s2.banner&&y.s2.banner.hasError("required")&&y.s2.banner.touched?43:-1),e.yG2(),e.C0Y(44,y.uploadedImageOne?44:-1),e.yG2(3),e.C0Y(47,y.saveButtonActive?47:48))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function xs(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",32)(2,"span",33),e.OEk(3,"Loading..."),e.C$Y()()())}function Ns(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Title One is required."),e.C$Y())}function Qc(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Title One must be at most 45 characters "),e.C$Y())}function Lc(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Sub Title is required."),e.C$Y())}function zd(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Sub Title must be at most 55 characters "),e.C$Y())}function ed(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Description One is required."),e.C$Y())}function ya(M,be){if(1&M&&e.wR5(0,"img",47),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function ud(M,be){if(1&M&&(e.I0R(0,"h5",48),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function ol(M,be){if(1&M&&(e.I0R(0,"p",49),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function yl(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",35)(1,"li",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"div",40),e.yuY(6,ya,1,1,"img",41),e.C$Y()(),e.I0R(7,"div",42)(8,"div",43),e.yuY(9,ud,2,1,"h5",44)(10,ol,2,1,"p",45),e.C$Y()(),e.I0R(11,"div",39)(12,"button",46),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function ba(M,be){}function Xs(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Image is required."),e.C$Y())}function ds(M,be){if(1&M&&(e.I0R(0,"div",50)(1,"div")(2,"label",20),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",51),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Vn(M,be){1&M&&(e.I0R(0,"button",52),e.OEk(1,"Save"),e.C$Y())}function hd(M,be){1&M&&(e.I0R(0,"button",53),e.wR5(1,"span",54),e.OEk(2," Please wait "),e.C$Y())}const pd=M=>({"is-invalid":M});let aa=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.initializeForm(),this.getData(),this.editordescription=new et.GW}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(55)]],image:["",this.imageValidator()],description:["",[c.AQ.required]]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){const h=["about-mission","section-two-heading"];this.toggleSpinner(!0),this.api.getwithoutid("get-about-SectionOne").subscribe($=>{if(this.toggleSpinner(!1),$&&$.status&&$.data&&$.data.length>0)for(const y of h){const Ke=$.data.find(dt=>dt.section_key===y);Ke&&"about-mission"===y&&(this.formGroup.patchValue({title:Ke.title,sub_title:Ke.sub_title,description:Ke.description}),this.dataExists=!0,this.uploadedImageOne=Ke.image,this.id=Ke.id,this.titleChange.emit(Ke.title))}},$=>{this.toggleSpinner(!1),console.error("Error fetching data:",$)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-about-SectionOne",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.uploadedImageOne=null}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("title",this.s2.title.value),h.append("sub_title",this.s2.sub_title.value),h.append("description",this.s2.description.value),h.append("section_key","about-mission"),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about-mission"]],outputs:{titleChange:"titleChange"},decls:58,vars:21,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub Title",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","imageuploadMission","accept","image/*","formControlName","image","hidden","",3,"change"],["imageuploadMission",""],["for","imageuploadMission",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,xs,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Ns,2,0,"div",12)(16,Qc,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Sub Title"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,Lc,2,0,"div",12)(25,zd,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",15)(27,"div",8)(28,"label",16),e.OEk(29," Description"),e.I0R(30,"span",10),e.OEk(31,"*"),e.C$Y()(),e.wR5(32,"ngx-editor-menu",17)(33,"ngx-editor",18),e.yuY(34,ed,2,0,"div",12),e.C$Y()(),e.I0R(35,"div",19)(36,"div",8)(37,"label",20),e.OEk(38,"Image"),e.I0R(39,"span",10),e.OEk(40,"*"),e.C$Y()(),e.I0R(41,"div",21)(42,"input",22,23),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(44,"label",24)(45,"span",25),e.OEk(46,"Choose a file to upload. "),e.wR5(47,"br"),e.I0R(48,"span",26),e.OEk(49,"File size 500 \xd7 510 px "),e.C$Y()()()(),e.yuY(50,yl,14,3,"ul",27)(51,ba,0,0)(52,Xs,2,0,"div",12),e.C$Y()(),e.yuY(53,ds,7,1,"div",28),e.I0R(54,"div",29)(55,"div",30),e.yuY(56,Vn,2,0,"button",31)(57,hd,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?24:-1),e.yG2(),e.C0Y(25,y.s2.sub_title&&y.s2.sub_title.hasError("maxlength")&&y.s2.sub_title.touched?25:-1),e.yG2(7),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(19,pd,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(34,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?34:-1),e.yG2(16),e.C0Y(50,y.selectedImageOne?50:-1),e.yG2(),e.C0Y(51,y.uploadedImageOne?51:-1),e.yG2(),e.C0Y(52,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?52:-1),e.yG2(),e.C0Y(53,y.uploadedImageOne?53:-1),e.yG2(3),e.C0Y(56,y.saveButtonActive?56:57))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Kl(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",32)(2,"span",33),e.OEk(3,"Loading..."),e.C$Y()()())}function An(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Title One is required."),e.C$Y())}function cc(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Title One must be at most 45 characters "),e.C$Y())}function cu(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Sub Title is required."),e.C$Y())}function Fd(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Sub Title must be at most 55 characters "),e.C$Y())}function dc(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Description One is required."),e.C$Y())}function fd(M,be){if(1&M&&e.wR5(0,"img",47),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function td(M,be){if(1&M&&(e.I0R(0,"h5",48),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function uc(M,be){if(1&M&&(e.I0R(0,"p",49),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function xa(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",35)(1,"li",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"div",40),e.yuY(6,fd,1,1,"img",41),e.C$Y()(),e.I0R(7,"div",42)(8,"div",43),e.yuY(9,td,2,1,"h5",44)(10,uc,2,1,"p",45),e.C$Y()(),e.I0R(11,"div",39)(12,"button",46),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Pc(M,be){}function md(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Image is required."),e.C$Y())}function gd(M,be){if(1&M&&(e.I0R(0,"div",50)(1,"div")(2,"label",20),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",51),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Ec(M,be){1&M&&(e.I0R(0,"button",52),e.OEk(1,"Save"),e.C$Y())}function C(M,be){1&M&&(e.I0R(0,"button",53),e.wR5(1,"span",54),e.OEk(2," Please wait "),e.C$Y())}const o=M=>({"is-invalid":M});let f=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.initializeForm(),this.getData(),this.editordescription=new et.GW}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(55)]],image:["",this.imageValidator()],description:["",[c.AQ.required]]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){const h=["about-vision","section-two-heading"];this.toggleSpinner(!0),this.api.getwithoutid("get-about-SectionOne").subscribe($=>{if(this.toggleSpinner(!1),$&&$.status&&$.data&&$.data.length>0)for(const y of h){const Ke=$.data.find(dt=>dt.section_key===y);Ke&&"about-vision"===y&&(this.formGroup.patchValue({title:Ke.title,sub_title:Ke.sub_title,description:Ke.description}),this.dataExists=!0,this.uploadedImageOne=Ke.image,this.id=Ke.id,this.titleChange.emit(Ke.title))}},$=>{this.toggleSpinner(!1),console.error("Error fetching data:",$)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-about-SectionOne",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.uploadedImageOne=null}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("title",this.s2.title.value),h.append("sub_title",this.s2.sub_title.value),h.append("description",this.s2.description.value),h.append("section_key","about-vision"),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about-vision"]],outputs:{titleChange:"titleChange"},decls:56,vars:21,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter Sub Title",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","imageuploadVision","accept","image/*","formControlName","image","hidden","",3,"change"],["imageuploadVision",""],["for","imageuploadVision",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Kl,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,An,2,0,"div",12)(16,cc,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Sub Title"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,cu,2,0,"div",12)(25,Fd,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",15)(27,"div",8)(28,"label",16),e.OEk(29," Description"),e.C$Y(),e.wR5(30,"ngx-editor-menu",17)(31,"ngx-editor",18),e.yuY(32,dc,2,0,"div",12),e.C$Y()(),e.I0R(33,"div",19)(34,"div",8)(35,"label",20),e.OEk(36,"Image"),e.I0R(37,"span",10),e.OEk(38,"*"),e.C$Y()(),e.I0R(39,"div",21)(40,"input",22,23),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(42,"label",24)(43,"span",25),e.OEk(44,"Choose a file to upload. "),e.wR5(45,"br"),e.I0R(46,"span",26),e.OEk(47,"File size 500 \xd7 510 px "),e.C$Y()()()(),e.yuY(48,xa,14,3,"ul",27)(49,Pc,0,0)(50,md,2,0,"div",12),e.C$Y()(),e.yuY(51,gd,7,1,"div",28),e.I0R(52,"div",29)(53,"div",30),e.yuY(54,Ec,2,0,"button",31)(55,C,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?24:-1),e.yG2(),e.C0Y(25,y.s2.sub_title&&y.s2.sub_title.hasError("maxlength")&&y.s2.sub_title.touched?25:-1),e.yG2(5),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(19,o,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(32,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?32:-1),e.yG2(16),e.C0Y(48,y.selectedImageOne?48:-1),e.yG2(),e.C0Y(49,y.uploadedImageOne?49:-1),e.yG2(),e.C0Y(50,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?50:-1),e.yG2(),e.C0Y(51,y.uploadedImageOne?51:-1),e.yG2(3),e.C0Y(54,y.saveButtonActive?54:55))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function T(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"heading is required."),e.C$Y())}function z(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"Status is required."),e.C$Y())}const B=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function K(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",74),e.OEk(2),e.C$Y(),e.I0R(3,"td",75),e.OEk(4),e.C$Y(),e.I0R(5,"td",76)(6,"div",77)(7,"div",78),e.wR5(8,"img",79),e.C$Y()()(),e.I0R(9,"td",80)(10,"div",81)(11,"input",82),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.sectionOnesetStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",83)(13,"span",84),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",85)(16,"ul",86)(17,"li")(18,"a",87),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(83).show(),e.CGJ(dt.editSectionOne(Ke))}),e.wR5(19,"i",88),e.C$Y()(),e.I0R(20,"li")(21,"a",89),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(22,"i",90),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.title," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(8,B,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function ie(M,be){1&M&&e.OEk(0," Add ")}function le(M,be){1&M&&e.OEk(0," Edit ")}function ve(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"title is required."),e.C$Y())}function _e(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"Title must be at most 45 characters"),e.C$Y())}function Pe(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"Description is required"),e.C$Y())}function at(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1," Description must be at most 350 characters "),e.C$Y())}function gt(M,be){if(1&M&&e.wR5(0,"img",103),2&M){const h=e.GaO(2);e.E7m("src",h.sectionOneselectedImagePreview,e.K6U)}}function mt(M,be){if(1&M&&(e.I0R(0,"h5",104),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.name," ")}}function xt(M,be){if(1&M&&(e.I0R(0,"p",105),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.sectionOneselectedImage.size," ")}}function kt(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",91)(1,"li",92)(2,"div",93)(3,"div",94)(4,"div",95)(5,"div",96),e.yuY(6,gt,1,1,"img",97),e.C$Y()(),e.I0R(7,"div",98)(8,"div",99),e.yuY(9,mt,2,1,"h5",100)(10,xt,2,1,"p",101),e.C$Y()(),e.I0R(11,"div",95)(12,"button",102),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.sectionOneremoveImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.sectionOneselectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.sectionOneselectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.sectionOneselectedImage.size?10:-1)}}function Ge(M,be){if(1&M&&(e.I0R(0,"div",106)(1,"div")(2,"label",58),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",107),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.sectionOneuploadedImage,e.K6U)}}function ft(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"Image is required."),e.C$Y())}function Dt(M,be){1&M&&(e.I0R(0,"div",73),e.OEk(1,"Status is required."),e.C$Y())}function Bt(M,be){1&M&&(e.I0R(0,"button",108),e.OEk(1," Save Changes "),e.C$Y())}function Qt(M,be){1&M&&(e.I0R(0,"button",109),e.wR5(1,"span",110),e.OEk(2," Please wait "),e.C$Y())}const oi=M=>({"is-invalid":M});let ni=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.aboutSectionthree=[],this.aboutSectionthreeList=[],this.editId=null,this.SectionOneHeadingId=null,this.sectionOneHeading=!1,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.sectionHeading=this.formBuilder.group({heading:["",[c.AQ.required]],status:["",[c.AQ.required]]}),this.getSectionOneData(),this.getHeading(),this.sectionHeading.get("heading"),this.initializeFormSectionOne()}initializeFormSectionOne(){this.sectionOne=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required,c.AQ.maxLength(350)]],image:["",this.sectionOneimageValidator()],status:["",[c.AQ.required]]})}sectionOneimageValidator(){return h=>null==this.editId?c.AQ.required(h):null}get sOne(){return this.sectionHeading.controls}get secOne(){return this.sectionOne.controls}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}getSectionOneData(){this.api.getwithoutid("about-getsectionThree").subscribe(h=>{h&&h.status?(this.aboutSectionthree=h.data||[],this.aboutSectionthreeList=h.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}submitSectionOne(h){if(this.sectionOne.valid){this.toggleSpinner(!0);const $=this.createSectionOneFormData();null!=this.editId?this.updateSectionOne(h,$,this.editId):this.addSectionOne(h,$)}else this.sectionOne.markAllAsTouched()}createSectionOneFormData(){const h=new FormData;return this.sectionOneselectedImage&&h.append("image",this.sectionOneselectedImage),h.append("heading_id",null!==this.SectionOneHeadingId?this.SectionOneHeadingId.toString():""),h.append("title",this.secOne.title.value),h.append("description",this.secOne.description.value),h.append("status",this.secOne.status.value),h}updateSectionOne(h,$,y){this.api.put("about-sectionThree",y,$).subscribe(Ke=>this.handleSectionOneResponse(Ke,h),Ke=>this.handleError(Ke))}addSectionOne(h,$){this.api.post("about-sectionThree",$).subscribe(y=>this.handleSectionOneResponse(y,h),y=>this.handleError(y))}sectionOnesetStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("about-sectionThree",h,dt).subscribe(ai=>this.handleSectionOneResponse(ai,null),ai=>this.handleError(ai))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("aboutSectionThree-delete",h).subscribe(y=>this.handleSectionOneResponse(y,"delete"),y=>this.handleError(y))})}handleSectionOneResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getSectionOneData(),"delete"==$?this.toastService.success("Data deleted Successfully!!"):(this.toastService.success("Data Saved Successfully!!"),this.resetForm(),$.hide())):this.toastService.error("Oops! Something went wrong")}resetForm(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null,this.sectionOneuploadedImage=null,this.editId=null,this.sectionOne.reset()}getHeading(){const h=["section-three-heading","section-two-heading"];this.toggleSpinner(!0),this.api.getwithoutid("about-getHeading").subscribe($=>{if(this.toggleSpinner(!1),$&&$.status&&$.data&&$.data.length>0)for(const y of h){const Ke=$.data.find(dt=>dt.section_key===y);Ke&&"section-three-heading"===y&&(this.sectionHeading.patchValue({heading:Ke.heading,status:Ke.status}),this.SectionOneHeadingId=Ke.id,this.sectionOneHeading=!0,this.titleChange.emit(Ke.heading))}},$=>{this.toggleSpinner(!1),console.error("Error fetching data:",$)})}onSubmitHeadingForm(h){if(this.sectionHeading.valid){this.toggleSpinner(!0);const $=this.createFormDataHeading(h);this.addSecontionHeading($)}else this.sectionHeading.markAllAsTouched()}createFormDataHeading(h){return{section_key:h,heading:this.sOne.heading.value,status:this.sOne.status.value}}addSecontionHeading(h){this.api.post("about-headingAdd",h).subscribe($=>this.handleHeadingResponse($),$=>this.handleError($))}handleHeadingResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}sectionOneimageSelect(h){const $=h.target.files[0];$&&(this.sectionOneselectedImage=$,this.sectionOneselectedImagePreview=URL.createObjectURL($))}sectionOneremoveImage(){this.sectionOneselectedImage=null,this.sectionOneselectedImagePreview=null}editSectionOne(h){this.initializeFormSectionOne(),this.editId=h.id,this.sectionOne.patchValue({title:h.title,description:h.description,status:h.status}),this.sectionOneuploadedImage=h.image}filterdata(){this.aboutSectionthree=this.term?this.aboutSectionthreeList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.aboutSectionthreeList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.aboutSectionthree.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.aboutSectionthreeList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.aboutSectionthree=this.aboutSectionthreeList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about-sectionthree"]],outputs:{titleChange:"titleChange"},decls:147,vars:26,consts:[[3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","heading","placeholder","Enter heading",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"hstack","gap-2","justify-content-start","mt-4"],[1,"btn","btn-primary"],[1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","modal",1,"modal","fade"],["modal","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],[1,"form-label"],["placeholder","Must enter maximum of a 350 characters","rows","5","formControlName","description",1,"form-control",3,"ngClass"],[1,"custom-modal-dropzone"],["type","file","id","sectionOneimageupload","accept","image/*","formControlName","image","hidden","",3,"change"],["sectionOneimageupload",""],["for","sectionOneimageupload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"invalid-text"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.I0R(0,"form",0),e.qCj("submit",function(){return y.onSubmitHeadingForm("section-three-heading")}),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e.OEk(5,"Heading"),e.I0R(6,"span",5),e.OEk(7,"*"),e.C$Y()(),e.wR5(8,"input",6),e.yuY(9,T,2,0,"div",7),e.C$Y()(),e.I0R(10,"div",2)(11,"div",3)(12,"label",8),e.OEk(13,"Status "),e.I0R(14,"span",5),e.OEk(15,"*"),e.C$Y()(),e.I0R(16,"select",9)(17,"option",10),e.OEk(18,"Select Status"),e.C$Y(),e.I0R(19,"option",11),e.OEk(20,"Active"),e.C$Y(),e.I0R(21,"option",12),e.OEk(22,"Inactive"),e.C$Y()(),e.yuY(23,z,2,0,"div",7),e.C$Y()(),e.I0R(24,"div",2)(25,"div",13)(26,"button",14),e.OEk(27,"Save"),e.C$Y()()()()(),e.wR5(28,"hr"),e.I0R(29,"div",15)(30,"div",16)(31,"div",17)(32,"div",18)(33,"div",19),e.wR5(34,"div",20),e.C$Y()(),e.I0R(35,"div",21)(36,"div",22)(37,"input",23),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(38,"i",24),e.C$Y()(),e.I0R(39,"div",25)(40,"div",26)(41,"div")(42,"a",27),e.qCj("click",function(){return e.usT(Ke),e.Gew(83).show(),e.CGJ(y.resetForm())}),e.wR5(43,"i",28),e.OEk(44,"Add"),e.C$Y()()()()()(),e.I0R(45,"div",29)(46,"div",30)(47,"table",31)(48,"thead",32)(49,"tr")(50,"th",33),e.OEk(51,"S No."),e.C$Y(),e.I0R(52,"th",33),e.OEk(53,"Title"),e.C$Y(),e.I0R(54,"th",33),e.OEk(55,"Image"),e.C$Y(),e.I0R(56,"th",33),e.OEk(57,"Status"),e.C$Y(),e.I0R(58,"th",34),e.OEk(59,"Action"),e.C$Y()()(),e.I0R(60,"tbody",35),e.c53(61,K,23,11,"tr",null,e.wJt),e.C$Y()(),e.I0R(63,"div",36)(64,"div",37),e.wR5(65,"i",38),e.I0R(66,"h5",39),e.OEk(67,"Sorry! No Result Found"),e.C$Y(),e.I0R(68,"p",40),e.OEk(69," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(70,"div",41)(71,"div",42)(72,"div",43),e.OEk(73," Showing "),e.I0R(74,"span",44),e.OEk(75),e.C$Y(),e.OEk(76," of "),e.I0R(77,"span",44),e.OEk(78),e.C$Y(),e.OEk(79," Results "),e.C$Y()(),e.I0R(80,"div",45)(81,"pagination",46),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()(),e.I0R(82,"div",47,48)(84,"div",49)(85,"div",50)(86,"div",51)(87,"h5",52),e.yuY(88,ie,1,0)(89,le,1,0),e.C$Y(),e.I0R(90,"button",53),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(83);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(91,"form",54),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(83);return e.CGJ(y.submitSectionOne(ai))}),e.I0R(92,"div",55),e.wR5(93,"div",56),e.I0R(94,"div",3)(95,"label",4),e.OEk(96,"Title"),e.I0R(97,"span",5),e.OEk(98,"*"),e.C$Y()(),e.wR5(99,"input",57),e.yuY(100,ve,2,0,"div",7)(101,_e,2,0,"div",7),e.C$Y(),e.I0R(102,"div",3)(103,"label",58),e.OEk(104,"Description "),e.I0R(105,"span",5),e.OEk(106,"*"),e.C$Y()(),e.wR5(107,"textarea",59),e.yuY(108,Pe,2,0,"div",7)(109,at,2,0,"div",7),e.C$Y(),e.I0R(110,"div",3)(111,"label",58),e.OEk(112,"Image"),e.I0R(113,"span",5),e.OEk(114,"*"),e.C$Y()(),e.I0R(115,"div",60)(116,"input",61,62),e.qCj("change",function(ai){return y.sectionOneimageSelect(ai)}),e.C$Y(),e.I0R(118,"label",63)(119,"span",64),e.OEk(120,"Choose a file to upload. "),e.wR5(121,"br"),e.I0R(122,"span",65),e.OEk(123,"File size 38 \xd7 38 px "),e.C$Y()()()(),e.yuY(124,kt,14,3,"ul",66)(125,Ge,7,1,"div",67)(126,ft,2,0,"div",7),e.C$Y(),e.I0R(127,"div",3)(128,"label",8),e.OEk(129,"Status "),e.I0R(130,"span",5),e.OEk(131,"*"),e.C$Y()(),e.I0R(132,"select",9)(133,"option",10),e.OEk(134,"Select Status"),e.C$Y(),e.I0R(135,"option",11),e.OEk(136,"Active"),e.C$Y(),e.I0R(137,"option",12),e.OEk(138,"Inactive"),e.C$Y()(),e.yuY(139,Dt,2,0,"div",7),e.C$Y()(),e.I0R(140,"div",68)(141,"div",69)(142,"button",70),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(83);return e.CGJ(ai.hide())}),e.wR5(143,"i",71),e.OEk(144," Close "),e.C$Y(),e.yuY(145,Bt,2,0,"button",72)(146,Qt,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("formGroup",y.sectionHeading),e.yG2(8),e.E7m("ngClass",y.sOne.heading&&y.sOne.heading.hasError("required")&&y.sOne.heading.touched?"is-invalid":""),e.yG2(),e.C0Y(9,y.sOne.heading&&y.sOne.heading.hasError("required")&&y.sOne.heading.touched?9:-1),e.yG2(7),e.E7m("ngClass",y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(23,y.sOne.status&&y.sOne.status.hasError("required")&&y.sOne.status.touched?23:-1),e.yG2(14),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.aboutSectionthree),e.yG2(14),e.cNF(null==y.aboutSectionthree?null:y.aboutSectionthree.length),e.yG2(3),e.cNF(null==y.aboutSectionthreeList?null:y.aboutSectionthreeList.length),e.yG2(3),e.E7m("totalItems",null==y.aboutSectionthreeList?null:y.aboutSectionthreeList.length)("itemsPerPage",5),e.yG2(7),e.C0Y(88,null==y.editId?88:89),e.yG2(3),e.E7m("formGroup",y.sectionOne),e.yG2(8),e.E7m("ngClass",y.secOne.title&&y.secOne.title.hasError("required")&&y.secOne.title.touched?"is-invalid":""),e.yG2(),e.C0Y(100,y.secOne.title&&y.secOne.title.hasError("required")&&y.secOne.title.touched?100:-1),e.yG2(),e.C0Y(101,y.secOne.title&&y.secOne.title.hasError("maxlength")&&y.secOne.title.touched?101:-1),e.yG2(6),e.E7m("ngClass",e.S45(24,oi,y.secOne.description&&y.secOne.description.errors&&y.secOne.description.touched)),e.yG2(),e.C0Y(108,y.secOne.description&&y.secOne.description.hasError("required")&&y.secOne.description.touched?108:-1),e.yG2(),e.C0Y(109,y.secOne.description&&y.secOne.description.hasError("maxlength")&&y.secOne.description.touched?109:-1),e.yG2(15),e.C0Y(124,y.sectionOneselectedImage?124:-1),e.yG2(),e.C0Y(125,y.sectionOneuploadedImage?125:-1),e.yG2(),e.C0Y(126,y.secOne.image&&y.secOne.image.hasError("required")&&y.secOne.image.touched?126:-1),e.yG2(6),e.E7m("ngClass",y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(139,y.secOne.status&&y.secOne.status.hasError("required")&&y.secOne.status.touched?139:-1),e.yG2(6),e.C0Y(145,y.addSaveButtonActive?145:146))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function mi(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",32)(2,"span",33),e.OEk(3,"Loading..."),e.C$Y()()())}function fi(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Title One is required."),e.C$Y())}function Ai(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Title One must be at most 45 characters "),e.C$Y())}function yn(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"CTA Name is required."),e.C$Y())}function Oi(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"CTA Link is required."),e.C$Y())}function rn(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"CTA status is required."),e.C$Y())}function zi(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Status is required."),e.C$Y())}function bn(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Description is required."),e.C$Y())}function Ri(M,be){1&M&&(e.I0R(0,"button",35),e.OEk(1,"Save"),e.C$Y())}function Li(M,be){1&M&&(e.I0R(0,"button",36),e.wR5(1,"span",37),e.OEk(2," Please wait "),e.C$Y())}const vn=M=>({"is-invalid":M});let dn=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required]],cta_name:["",[c.AQ.required]],cta_link:["",[c.AQ.required]],cta_status:["",[c.AQ.required]],status:["",[c.AQ.required]]})}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.getwithoutid("about-getsectionSeven").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0;const $=h.data[0];this.id=$.id,this.formGroup.patchValue({title:$.title,description:$.description,cta_name:$.cta_name,cta_link:$.cta_link,cta_status:$.cta_status,status:$.status}),this.titleChange.emit($.title)}},h=>this.handleError(h))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.id?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}createFormData(){return{title:this.s2.title.value,description:this.s2.description.value,cta_name:this.s2.cta_name.value,cta_link:this.s2.cta_link.value,cta_status:this.s2.cta_status.value,status:this.s2.status.value}}addSection(h){this.api.post("about-sectionSeven",h).subscribe($=>{this.handleResponse($)},$=>this.handleError($))}updateSection(h){this.api.put("about-sectionSeven",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error("Oops! Something went wrong")}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about-sectionseven"]],outputs:{titleChange:"titleChange"},decls:74,vars:22,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","cta_name",1,"form-label"],["type","text","id","cta_name","formControlName","cta_name","placeholder","Enter CTA Name",1,"form-control",3,"ngClass"],["for","cta_link",1,"form-label"],["type","text","id","cta_link","formControlName","cta_link","placeholder","Enter CTA Name",1,"form-control",3,"ngClass"],[1,"col-4"],["for","cta_status",1,"form-label"],["formControlName","cta_status","data-choices","","id","cta_status",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,mi,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Titless"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,fi,2,0,"div",12)(16,Ai,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," CTA Name"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,yn,2,0,"div",12),e.C$Y()(),e.I0R(25,"div",7)(26,"div",8)(27,"label",15),e.OEk(28," CTA Link"),e.I0R(29,"span",10),e.OEk(30,"*"),e.C$Y()(),e.wR5(31,"input",16),e.yuY(32,Oi,2,0,"div",12),e.C$Y()(),e.I0R(33,"div",17)(34,"div",8)(35,"label",18),e.OEk(36,"CTA Status "),e.I0R(37,"span",10),e.OEk(38,"*"),e.C$Y()(),e.I0R(39,"select",19)(40,"option",20),e.OEk(41,"Select Status"),e.C$Y(),e.I0R(42,"option",21),e.OEk(43,"Active"),e.C$Y(),e.I0R(44,"option",22),e.OEk(45,"Inactive"),e.C$Y()(),e.yuY(46,rn,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",17)(48,"div",8)(49,"label",23),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",24)(54,"option",20),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",21),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",22),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,zi,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",25)(62,"div",8)(63,"label",26),e.OEk(64," Description"),e.I0R(65,"span",10),e.OEk(66,"*"),e.C$Y()(),e.wR5(67,"ngx-editor-menu",27)(68,"ngx-editor",28),e.yuY(69,bn,2,0,"div",12),e.C$Y()(),e.I0R(70,"div",29)(71,"div",30),e.yuY(72,Ri,2,0,"button",31)(73,Li,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.cta_name&&y.s2.cta_name.hasError("required")&&y.s2.cta_name.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.cta_name&&y.s2.cta_name.hasError("required")&&y.s2.cta_name.touched?24:-1),e.yG2(7),e.E7m("ngClass",y.s2.cta_link&&y.s2.cta_link.hasError("required")&&y.s2.cta_link.touched?"is-invalid":""),e.yG2(),e.C0Y(32,y.s2.cta_link&&y.s2.cta_link.hasError("required")&&y.s2.cta_link.touched?32:-1),e.yG2(7),e.E7m("ngClass",y.s2.cta_status&&y.s2.cta_status.hasError("required")&&y.s2.cta_status.touched?"is-invalid":""),e.yG2(7),e.C0Y(46,y.s2.cta_status&&y.s2.cta_status.hasError("required")&&y.s2.cta_status.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(7),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(20,vn,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(69,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?69:-1),e.yG2(3),e.C0Y(72,y.saveButtonActive?72:73))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw]})}return M})();const mn=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function er(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",73),e.OEk(2),e.C$Y(),e.I0R(3,"td",74),e.OEk(4),e.C$Y(),e.I0R(5,"td",75)(6,"div",76)(7,"div",77),e.wR5(8,"img",78),e.C$Y()()(),e.I0R(9,"td",79)(10,"div",80)(11,"input",81),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",82)(13,"span",83),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",84)(16,"ul",85)(17,"li")(18,"a",86),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.Gew(62).show(),e.CGJ(dt.edit(Ke))}),e.wR5(19,"i",87),e.C$Y()(),e.I0R(20,"li")(21,"a",88),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(22,"i",89),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index;e.yG2(2),e.oRS(" ",$+1," "),e.yG2(2),e.oRS(" ",h.title," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(8,mn,"active"===h.status,"inactive"===h.status)),e.yG2(),e.cNF(h.status)}}function Er(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",90)(2,"span",91),e.OEk(3,"Loading..."),e.C$Y()()())}function jn(M,be){1&M&&e.OEk(0," Add Service ")}function dr(M,be){1&M&&e.OEk(0," Edit Service ")}function Tr(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1,"title is required."),e.C$Y())}function pr(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1,"Title must be at most 45 characters"),e.C$Y())}function tr(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1,"Description is required"),e.C$Y())}function zr(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1," Description must be at most 250 characters "),e.C$Y())}function ls(M,be){if(1&M&&e.wR5(0,"img",105),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImagePreview,e.K6U)}}function us(M,be){if(1&M&&(e.I0R(0,"h5",106),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.name," ")}}function hs(M,be){if(1&M&&(e.I0R(0,"p",107),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImage.size," ")}}function la(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",93)(1,"li",94)(2,"div",95)(3,"div",96)(4,"div",97)(5,"div",98),e.yuY(6,ls,1,1,"img",99),e.C$Y()(),e.I0R(7,"div",100)(8,"div",101),e.yuY(9,us,2,1,"h5",102)(10,hs,2,1,"p",103),e.C$Y()(),e.I0R(11,"div",97)(12,"button",104),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImage())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImagePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImage.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImage.size?10:-1)}}function Qr(M,be){if(1&M&&(e.I0R(0,"div",108)(1,"div")(2,"label",53),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",109),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImage,e.K6U)}}function wa(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1,"Image is required."),e.C$Y())}function Yl(M,be){1&M&&(e.I0R(0,"div",92),e.OEk(1,"Status is required."),e.C$Y())}function ws(M,be){1&M&&(e.I0R(0,"button",110),e.OEk(1," Save Changes "),e.C$Y())}function es(M,be){1&M&&(e.I0R(0,"button",111),e.wR5(1,"span",112),e.OEk(2," Please wait "),e.C$Y())}const ts=M=>({"is-invalid":M});let it=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.toastService=$,this.api=y,this.addSaveButtonActive=!0,this.spinnerStatus=!1,this.editId=null,this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.serviceData=[],this.serviceDataList=[]}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Our Process",active:!0}],this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required,c.AQ.maxLength(250)]],image:["",this.imageValidator()],status:["",[c.AQ.required]]})}imageValidator(){return h=>null==this.editId?c.AQ.required(h):null}get s2(){return this.formGroup.controls}imageSelect(h){const $=h.target.files[0];$&&(this.selectedImage=$,this.selectedImagePreview=URL.createObjectURL($))}removeImage(){this.selectedImage=null,this.selectedImagePreview=null}getData(){this.api.getwithoutid("process").subscribe(h=>{h&&h.status?(this.serviceData=h.data||[],this.serviceDataList=h.data||[]):(this.clearServiceData(),this.handleError("Unexpected response format"))},h=>{this.clearServiceData(),this.handleError(h.message||"An error occurred while fetching data")})}clearServiceData(){this.serviceData=[],this.serviceDataList=[]}onSubmit(h){if(this.formGroup.valid){this.toggleSpinner(!0);const $=this.createFormData();null!=this.editId?this.updateService(h,$,this.editId):this.addService(h,$)}else this.formGroup.markAllAsTouched()}toggleSpinner(h){this.spinnerStatus=h,this.addSaveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImage&&h.append("image",this.selectedImage),h.append("title",this.s2.title.value),h.append("description",this.s2.description.value),h.append("status",this.s2.status.value),h}updateService(h,$,y){this.api.put("process",y,$).subscribe(Ke=>this.handleResponse(Ke,h),Ke=>this.handleError(Ke))}addService(h,$){this.api.post("process",$).subscribe(y=>this.handleResponse(y,h),y=>this.handleError(y))}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("process",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}setStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("process",h,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getData()):this.toastService.error(h.message)}handleResponse(h,$){this.toggleSpinner(!1),!0===h.status?(this.getData(),$.hide(),this.toastService.success("Data Saved Successfully!!"),this.resetForm()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}resetForm(){this.selectedImage=null,this.selectedImagePreview=null,this.uploadedImage=null,this.editId=null,this.formGroup.reset()}filterdata(){this.serviceData=this.term?this.serviceDataList.filter(h=>{const $=this.term.toLowerCase();return h.title.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.serviceDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.serviceData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.serviceDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.serviceData=this.serviceDataList.slice(h,this.endItem)}edit(h){this.initializeForm(),this.editId=h.id,this.formGroup.patchValue({title:h.title,description:h.description,status:h.status}),this.uploadedImage=h.image}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(we.SA),e.GI1(Se.W))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-our-process"]],decls:126,vars:23,consts:[["title","Our Process",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],["bsModal","","id","modal",1,"modal","fade"],["modal","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header","bg-success","p-3"],["id","editSection2ModalLabel",1,"modal-title","text-white"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"tablelist-form",3,"formGroup","submit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"form-label"],["placeholder","Must enter maximum of a 250 characters","rows","5","formControlName","description",1,"form-control",3,"ngClass"],[1,"custom-modal-dropzone"],["type","file","id","ourprocessImageUpload","accept","image/*","formControlName","image","hidden","",3,"change"],["ourprocessImageUpload",""],["for","ourprocessImageUpload",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-success",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","class","btn btn-primary","id","add-btn"],[1,"id"],[1,"instructor"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],["type","submit","id","add-btn",1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.wR5(12,"div",11),e.C$Y()(),e.I0R(13,"div",12)(14,"div",13)(15,"input",14),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",15),e.C$Y()(),e.I0R(17,"div",16)(18,"div",17)(19,"div")(20,"a",18),e.qCj("click",function(){return e.usT(Ke),e.Gew(62).show(),e.CGJ(y.resetForm())}),e.wR5(21,"i",19),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",4)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"Title"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33,"Image"),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Status"),e.C$Y(),e.I0R(36,"th",24),e.OEk(37,"Action"),e.C$Y()()(),e.I0R(38,"tbody",25),e.c53(39,er,23,11,"tr",null,e.wJt),e.C$Y()(),e.I0R(41,"div",26)(42,"div",27),e.wR5(43,"i",28),e.I0R(44,"h5",29),e.OEk(45,"Sorry! No Result Found"),e.C$Y(),e.I0R(46,"p",30),e.OEk(47," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(48,"div",31)(49,"div",32)(50,"div",33),e.OEk(51," Showing "),e.I0R(52,"span",34),e.OEk(53),e.C$Y(),e.OEk(54," of "),e.I0R(55,"span",34),e.OEk(56),e.C$Y(),e.OEk(57," Results "),e.C$Y()(),e.I0R(58,"div",35)(59,"pagination",36),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()(),e.yuY(60,Er,4,0,"div",37),e.C$Y()()()(),e.I0R(61,"div",38,39)(63,"div",40)(64,"div",41)(65,"div",42)(66,"h5",43),e.yuY(67,jn,1,0)(68,dr,1,0),e.C$Y(),e.I0R(69,"button",44),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(62);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(70,"form",45),e.qCj("submit",function(){e.usT(Ke);const ai=e.Gew(62);return e.CGJ(y.onSubmit(ai))}),e.I0R(71,"div",46),e.wR5(72,"div",47),e.I0R(73,"div",48)(74,"label",49),e.OEk(75,"Title"),e.I0R(76,"span",50),e.OEk(77,"*"),e.C$Y()(),e.wR5(78,"input",51),e.yuY(79,Tr,2,0,"div",52)(80,pr,2,0,"div",52),e.C$Y(),e.I0R(81,"div",48)(82,"label",53),e.OEk(83,"Description "),e.I0R(84,"span",50),e.OEk(85,"*"),e.C$Y()(),e.wR5(86,"textarea",54),e.yuY(87,tr,2,0,"div",52)(88,zr,2,0,"div",52),e.C$Y(),e.I0R(89,"div",48)(90,"label",53),e.OEk(91,"Image"),e.I0R(92,"span",50),e.OEk(93,"*"),e.C$Y()(),e.I0R(94,"div",55)(95,"input",56,57),e.qCj("change",function(ai){return y.imageSelect(ai)}),e.C$Y(),e.I0R(97,"label",58)(98,"span",59),e.OEk(99,"Choose a file to upload. "),e.wR5(100,"br"),e.I0R(101,"span",60),e.OEk(102,"File size 124 \xd7 124 px "),e.C$Y()()()(),e.yuY(103,la,14,3,"ul",61)(104,Qr,7,1,"div",62)(105,wa,2,0,"div",52),e.C$Y(),e.I0R(106,"div",48)(107,"label",63),e.OEk(108,"Status "),e.I0R(109,"span",50),e.OEk(110,"*"),e.C$Y()(),e.I0R(111,"select",64)(112,"option",65),e.OEk(113,"Select Status"),e.C$Y(),e.I0R(114,"option",66),e.OEk(115,"Active"),e.C$Y(),e.I0R(116,"option",67),e.OEk(117,"Inactive"),e.C$Y()(),e.yuY(118,Yl,2,0,"div",52),e.C$Y()(),e.I0R(119,"div",68)(120,"div",69)(121,"button",70),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(62);return e.CGJ(ai.hide())}),e.wR5(122,"i",71),e.OEk(123," Close "),e.C$Y(),e.yuY(124,ws,2,0,"button",72)(125,es,3,0),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.serviceData),e.yG2(14),e.cNF(null==y.serviceData?null:y.serviceData.length),e.yG2(3),e.cNF(null==y.serviceDataList?null:y.serviceDataList.length),e.yG2(3),e.E7m("totalItems",null==y.serviceDataList?null:y.serviceDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(60,y.spinnerStatus?60:-1),e.yG2(7),e.C0Y(67,null==y.editId?67:68),e.yG2(3),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(79,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?79:-1),e.yG2(),e.C0Y(80,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?80:-1),e.yG2(6),e.E7m("ngClass",e.S45(21,ts,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(87,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?87:-1),e.yG2(),e.C0Y(88,y.s2.description&&y.s2.description.hasError("maxlength")&&y.s2.description.touched?88:-1),e.yG2(15),e.C0Y(103,y.selectedImage?103:-1),e.yG2(),e.C0Y(104,y.uploadedImage?104:-1),e.yG2(),e.C0Y(105,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?105:-1),e.yG2(6),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(118,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?118:-1),e.yG2(6),e.C0Y(124,y.addSaveButtonActive?124:125))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})(),_t=(()=>{class M{constructor(){this.sectionTitles={sectionTwoTitle:"",sectionThreeTitle:"",sectionFourTitle:"",sectionFiveTitle:"",sectionSixTitle:"",sectionSevenTitle:"",sectionEightTitle:""}}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"About Page",active:!0}]}handleTitleChange(h,$){this.sectionTitles[h]=$}static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-about"]],decls:62,vars:9,consts:[["title","About",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button","text-uppercase"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"titleChange"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"accordion",4)(5,"accordion-group",5)(6,"h2",6)(7,"button",7),e.OEk(8," About Banner "),e.C$Y()(),e.I0R(9,"div",8)(10,"div",9),e.wR5(11,"app-about-banner"),e.C$Y()()(),e.I0R(12,"accordion-group",5)(13,"h2",6)(14,"button",7),e.OEk(15),e.C$Y()(),e.I0R(16,"div",8)(17,"div",9)(18,"app-about-mission",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionTwoTitle",dt)}),e.C$Y()()()(),e.I0R(19,"accordion-group",5)(20,"h2",6)(21,"button",7),e.OEk(22),e.C$Y()(),e.I0R(23,"div",8)(24,"div",9)(25,"app-about-vision",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionThreeTitle",dt)}),e.C$Y()()()(),e.I0R(26,"accordion-group",5)(27,"h2",6)(28,"button",7),e.OEk(29),e.C$Y()(),e.I0R(30,"div",8)(31,"div",9)(32,"app-home-sectiontwo",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFourTitle",dt)}),e.C$Y(),e.wR5(33,"app-our-process"),e.C$Y()()(),e.I0R(34,"accordion-group",5)(35,"h2",6)(36,"button",7),e.OEk(37),e.C$Y()(),e.I0R(38,"div",8)(39,"div",9)(40,"app-about-sectionthree",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFiveTitle",dt)}),e.C$Y()()()(),e.I0R(41,"accordion-group",5)(42,"h2",6)(43,"button",7),e.OEk(44),e.C$Y()(),e.I0R(45,"div",8)(46,"div",9)(47,"app-our-team",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionSixTitle",dt)}),e.C$Y()()()(),e.I0R(48,"accordion-group",5)(49,"h2",6)(50,"button",7),e.OEk(51),e.C$Y()(),e.I0R(52,"div",8)(53,"div",9)(54,"app-testimonials",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionSevenTitle",dt)}),e.C$Y()()()(),e.I0R(55,"accordion-group",5)(56,"h2",6)(57,"button",7),e.OEk(58),e.C$Y()(),e.I0R(59,"div",8)(60,"div",9)(61,"app-about-sectionseven",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionEightTitle",dt)}),e.C$Y()()()()()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(4),e.E7m("closeOthers",!0),e.yG2(11),e.oRS(" Section 1 : ",y.sectionTitles.sectionTwoTitle," "),e.yG2(7),e.oRS(" Section 2 : ",y.sectionTitles.sectionThreeTitle," "),e.yG2(7),e.oRS(" Section 3 : ",y.sectionTitles.sectionFourTitle," "),e.yG2(8),e.oRS(" Section 4 : ",y.sectionTitles.sectionFiveTitle," "),e.yG2(7),e.oRS(" Section 5 : ",y.sectionTitles.sectionSixTitle," "),e.yG2(7),e.oRS(" Section 6 : ",y.sectionTitles.sectionSevenTitle," "),e.yG2(7),e.oRS(" Section 7 : ",y.sectionTitles.sectionEightTitle," "))},dependencies:[Mi.O,He.Wz,He.gD,To,Fr,aa,f,ni,dn,zn,Ne,it]})}return M})();function Ht(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",32)(2,"span",33),e.OEk(3,"Loading..."),e.C$Y()()())}function Gi(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Title is required."),e.C$Y())}function Zn(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function Wn(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Sub title is required."),e.C$Y())}function rr(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1," Sub title must be at most 45 characters "),e.C$Y())}function vr(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Description One is required."),e.C$Y())}function Zr(M,be){if(1&M&&e.wR5(0,"img",47),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Dr(M,be){if(1&M&&(e.I0R(0,"h5",48),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Kr(M,be){if(1&M&&(e.I0R(0,"p",49),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Ca(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",35)(1,"li",36)(2,"div",37)(3,"div",38)(4,"div",39)(5,"div",40),e.yuY(6,Zr,1,1,"img",41),e.C$Y()(),e.I0R(7,"div",42)(8,"div",43),e.yuY(9,Dr,2,1,"h5",44)(10,Kr,2,1,"p",45),e.C$Y()(),e.I0R(11,"div",39)(12,"button",46),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Ml(M,be){}function Vs(M,be){1&M&&(e.I0R(0,"div",34),e.OEk(1,"Banner is required."),e.C$Y())}function Yd(M,be){if(1&M&&(e.I0R(0,"div",50)(1,"div")(2,"label",20),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",51),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Bd(M,be){1&M&&(e.I0R(0,"button",52),e.OEk(1,"Save"),e.C$Y())}function Al(M,be){1&M&&(e.I0R(0,"button",53),e.wR5(1,"span",54),e.OEk(2," Please wait "),e.C$Y())}const bl=M=>({"is-invalid":M});let bp=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],sub_title:["",[c.AQ.required,c.AQ.maxLength(45)]],banner:["",this.imageValidator()],description:[""]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.getwithoutid("get-science-banner").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.banner,this.formGroup.patchValue({title:$.title,description:$.description})}},h=>this.handleError(h))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-banner",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-banner",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("banner",this.selectedImageOne),h.append("title",this.s2.title.value),h.append("sub_title",this.s2.sub_title.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-banner"]],decls:57,vars:21,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","sub_title",1,"form-label"],["type","text","id","sub_title","formControlName","sub_title","placeholder","Enter sub title ",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutBanner","accept","image/*","formControlName","banner","hidden","",3,"change"],["aboutBanner",""],["for","aboutBanner",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-50",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Ht,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Gi,2,0,"div",12)(16,Zn,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Sub Title"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,Wn,2,0,"div",12)(25,rr,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",15)(27,"div",8)(28,"label",16),e.OEk(29," Description"),e.wR5(30,"span",10),e.C$Y(),e.wR5(31,"ngx-editor-menu",17)(32,"ngx-editor",18),e.yuY(33,vr,2,0,"div",12),e.C$Y()(),e.I0R(34,"div",19)(35,"div",8)(36,"label",20),e.OEk(37,"Banner"),e.I0R(38,"span",10),e.OEk(39,"*"),e.C$Y()(),e.I0R(40,"div",21)(41,"input",22,23),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(43,"label",24)(44,"span",25),e.OEk(45,"Choose a file to upload. "),e.wR5(46,"br"),e.I0R(47,"span",26),e.OEk(48,"File size 1440 \xd7 700 px "),e.C$Y()()()(),e.yuY(49,Ca,14,3,"ul",27)(50,Ml,0,0)(51,Vs,2,0,"div",12),e.C$Y()(),e.yuY(52,Yd,7,1,"div",28),e.I0R(53,"div",29)(54,"div",30),e.yuY(55,Bd,2,0,"button",31)(56,Al,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.sub_title&&y.s2.sub_title.hasError("required")&&y.s2.sub_title.touched?24:-1),e.yG2(),e.C0Y(25,y.s2.sub_title&&y.s2.sub_title.hasError("maxlength")&&y.s2.sub_title.touched?25:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(19,bl,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(33,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?33:-1),e.yG2(16),e.C0Y(49,y.selectedImageOne?49:-1),e.yG2(),e.C0Y(50,y.uploadedImageOne?50:-1),e.yG2(),e.C0Y(51,y.s2.banner&&y.s2.banner.hasError("required")&&y.s2.banner.touched?51:-1),e.yG2(),e.C0Y(52,y.uploadedImageOne?52:-1),e.yG2(3),e.C0Y(55,y.saveButtonActive?55:56))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function zu(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function du(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function Sc(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function Gd(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Sh(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function kh(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Th(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,Gd,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,Sh,2,1,"h5",48)(10,kh,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Jp(M,be){}function Qp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function Ih(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function uu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function Nd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function zc(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function ca(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const id=M=>({"is-invalid":M});let Fc=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-one").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-one"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectionone"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,zu,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,du,2,0,"div",12)(16,Sc,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,Th,14,3,"ul",22)(35,Jp,0,0)(36,Qp,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,Ih,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,uu,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,Nd,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,zc,2,0,"button",35)(64,ca,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,id,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Yc(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function xp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function wp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function Fu(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Yu(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Bc(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Cp(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,Fu,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,Yu,2,1,"h5",48)(10,Bc,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Bl(M,be){}function Oh(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function Mh(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function io(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function qn(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function kc(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function hc(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const Ea=M=>({"is-invalid":M});let hu=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-two").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-two"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectiontwo"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Yc,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,xp,2,0,"div",12)(16,wp,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,Cp,14,3,"ul",22)(35,Bl,0,0)(36,Oh,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,Mh,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,io,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,qn,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,kc,2,0,"button",35)(64,hc,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,Ea,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Bu(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function Jl(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function Ah(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function Gc(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Ql(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function pc(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Vd(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,Gc,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,Ql,2,1,"h5",48)(10,pc,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function $d(M,be){}function Dh(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function Gu(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Nu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function Vu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function Rh(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function _d(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const fc=M=>({"is-invalid":M});let ec=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-three").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-three"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectionthree"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Bu,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Jl,2,0,"div",12)(16,Ah,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,Vd,14,3,"ul",22)(35,$d,0,0)(36,Dh,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,Gu,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,Nu,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,Vu,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,Rh,2,0,"button",35)(64,_d,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,fc,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function vd(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function $u(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function da(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function Nc(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function al(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Vc(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function ja(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,Nc,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,al,2,1,"h5",48)(10,Vc,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function xl(M,be){}function Hu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function Zs(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function ju(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function Hd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function tc(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function Ep(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const Uu=M=>({"is-invalid":M});let Lh=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-four").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-four"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectionfour"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,vd,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,$u,2,0,"div",12)(16,da,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,ja,14,3,"ul",22)(35,xl,0,0)(36,Hu,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,Zs,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,ju,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,Hd,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,tc,2,0,"button",35)(64,Ep,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,Uu,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function nd(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function rd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function Sp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function yd(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function pu(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Wu(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Tc(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,yd,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,pu,2,1,"h5",48)(10,Wu,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Ph(M,be){}function kp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function zh(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Dl(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function qu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function Xu(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function fu(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const Sa=M=>({"is-invalid":M});let Fh=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-five").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-five"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectionfive"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,nd,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,rd,2,0,"div",12)(16,Sp,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,Tc,14,3,"ul",22)(35,Ph,0,0)(36,kp,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,zh,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,Dl,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,qu,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,Xu,2,0,"button",35)(64,fu,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,Sa,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Yh(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function mc(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function Tp(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 60 characters "),e.C$Y())}function sd(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function jd(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Gl(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function Nl(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,sd,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,jd,2,1,"h5",48)(10,Gl,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function Zu(M,be){}function Ud(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function mu(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",15),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Ip(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description is required."),e.C$Y())}function gu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function gc(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function $c(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const Ku=M=>({"is-invalid":M});let Ju=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(60)]],image:["",this.imageValidator()],description:[""],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("get-science-section","section-six").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("insert-science-section",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("insert-science-section",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("section_key","section-six"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-sectionsix"]],outputs:{titleChange:"titleChange"},decls:65,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","aboutimage","accept","image/*","formControlName","image","hidden","",3,"change"],["aboutimage",""],["for","aboutimage",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-lg-12"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Yh,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,mc,2,0,"div",12)(16,Tp,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",1)(19,"div",14)(20,"div",8)(21,"label",15),e.OEk(22,"image"),e.I0R(23,"span",10),e.OEk(24,"*"),e.C$Y()(),e.I0R(25,"div",16)(26,"input",17,18),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(28,"label",19)(29,"span",20),e.OEk(30,"Choose a file to upload. "),e.wR5(31,"br"),e.I0R(32,"span",21),e.OEk(33,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(34,Nl,14,3,"ul",22)(35,Zu,0,0)(36,Ud,2,0,"div",12),e.C$Y()(),e.I0R(37,"div",14),e.yuY(38,mu,7,1,"div",23),e.C$Y()()(),e.I0R(39,"div",24)(40,"div",8)(41,"label",25),e.OEk(42," Description"),e.wR5(43,"span",10),e.C$Y(),e.wR5(44,"ngx-editor-menu",26)(45,"ngx-editor",27),e.yuY(46,Ip,2,0,"div",12),e.C$Y()(),e.I0R(47,"div",7)(48,"div",8)(49,"label",28),e.OEk(50,"Status "),e.I0R(51,"span",10),e.OEk(52,"*"),e.C$Y()(),e.I0R(53,"select",29)(54,"option",30),e.OEk(55,"Select Status"),e.C$Y(),e.I0R(56,"option",31),e.OEk(57,"Active"),e.C$Y(),e.I0R(58,"option",32),e.OEk(59,"Inactive"),e.C$Y()(),e.yuY(60,gu,2,0,"div",12),e.C$Y()(),e.I0R(61,"div",33)(62,"div",34),e.yuY(63,gc,2,0,"button",35)(64,$c,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(18),e.C0Y(34,y.selectedImageOne?34:-1),e.yG2(),e.C0Y(35,y.uploadedImageOne?35:-1),e.yG2(),e.C0Y(36,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?36:-1),e.yG2(2),e.C0Y(38,y.uploadedImageOne?38:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(18,Ku,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(46,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?46:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(60,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})();function Op(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",36)(2,"span",37),e.OEk(3,"Loading..."),e.C$Y()()())}function _u(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"heading is required."),e.C$Y())}function vu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," heading must be at most 60 characters "),e.C$Y())}function bd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Title is required."),e.C$Y())}function xd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function Vl(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Status is required."),e.C$Y())}function od(M,be){if(1&M&&e.wR5(0,"img",51),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Bh(M,be){if(1&M&&(e.I0R(0,"h5",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Wd(M,be){if(1&M&&(e.I0R(0,"p",53),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function ua(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",39)(1,"li",40)(2,"div",41)(3,"div",42)(4,"div",43)(5,"div",44),e.yuY(6,od,1,1,"img",45),e.C$Y()(),e.I0R(7,"div",46)(8,"div",47),e.yuY(9,Bh,2,1,"h5",48)(10,Wd,2,1,"p",49),e.C$Y()(),e.I0R(11,"div",43)(12,"button",50),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function yu(M,be){}function wd(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"image is required."),e.C$Y())}function Gh(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1,"Description One is required."),e.C$Y())}function Qu(M,be){1&M&&(e.I0R(0,"div",38),e.OEk(1," description must be at most 200 characters "),e.C$Y())}function Nh(M,be){if(1&M&&(e.I0R(0,"div",54)(1,"div")(2,"label",21),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",55),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function eh(M,be){1&M&&(e.I0R(0,"button",56),e.OEk(1,"Save"),e.C$Y())}function bu(M,be){1&M&&(e.I0R(0,"button",57),e.wR5(1,"span",58),e.OEk(2," Please wait "),e.C$Y())}const qd=M=>({"is-invalid":M});let Xd=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null}ngOnInit(){this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({heading:["",[c.AQ.required,c.AQ.maxLength(60)]],title:["",[c.AQ.required,c.AQ.maxLength(45)]],image:["",this.imageValidator()],description:["",c.AQ.maxLength(200)],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("form-data","science").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({heading:$.heading,title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.heading)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("add-form-data",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("add-form-data",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("type","science"),h.append("heading",this.s2.heading.value),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science-contact-form"]],outputs:{titleChange:"titleChange"},decls:72,vars:20,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,"mb-3"],["for","heading",1,"form-label"],[1,"text-danger"],["type","text","id","heading","formControlName","heading","placeholder","Enter heading ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","scienceform","accept","image/*","formControlName","image","hidden","",3,"change"],["scienceform",""],["for","scienceform",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],[1,"col-lg-6"],["for","description",1,"form-label"],["placeholder","Enter description","rows","5","formControlName","description","maxlength","150",1,"form-control",3,"ngClass"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","my-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,Op,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Heading"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,_u,2,0,"div",12)(16,vu,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Title"),e.I0R(21,"span",10),e.OEk(22,"*"),e.C$Y()(),e.wR5(23,"input",14),e.yuY(24,bd,2,0,"div",12)(25,xd,2,0,"div",12),e.C$Y()(),e.I0R(26,"div",7)(27,"div",8)(28,"label",15),e.OEk(29,"Status "),e.I0R(30,"span",10),e.OEk(31,"*"),e.C$Y()(),e.I0R(32,"select",16)(33,"option",17),e.OEk(34,"Select Status"),e.C$Y(),e.I0R(35,"option",18),e.OEk(36,"Active"),e.C$Y(),e.I0R(37,"option",19),e.OEk(38,"Inactive"),e.C$Y()(),e.yuY(39,Vl,2,0,"div",12),e.C$Y()(),e.I0R(40,"div",20)(41,"div",8)(42,"label",21),e.OEk(43,"image"),e.I0R(44,"span",10),e.OEk(45,"*"),e.C$Y()(),e.I0R(46,"div",22)(47,"input",23,24),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(49,"label",25)(50,"span",26),e.OEk(51,"Choose a file to upload. "),e.wR5(52,"br"),e.I0R(53,"span",27),e.OEk(54,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(55,ua,14,3,"ul",28)(56,yu,0,0)(57,wd,2,0,"div",12),e.C$Y()(),e.I0R(58,"div",29)(59,"div",8)(60,"label",30),e.OEk(61," Description"),e.wR5(62,"span",10),e.C$Y(),e.wR5(63,"textarea",31),e.yuY(64,Gh,2,0,"div",12)(65,Qu,2,0,"div",12),e.C$Y()(),e.I0R(66,"div",29),e.yuY(67,Nh,7,1,"div",32),e.C$Y(),e.I0R(68,"div",33)(69,"div",34),e.yuY(70,eh,2,0,"button",35)(71,bu,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.heading&&y.s2.heading.hasError("required")&&y.s2.heading.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.heading&&y.s2.heading.hasError("required")&&y.s2.heading.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.heading&&y.s2.heading.hasError("maxlength")&&y.s2.heading.touched?16:-1),e.yG2(7),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(24,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?24:-1),e.yG2(),e.C0Y(25,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?25:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(39,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?39:-1),e.yG2(16),e.C0Y(55,y.selectedImageOne?55:-1),e.yG2(),e.C0Y(56,y.uploadedImageOne?56:-1),e.yG2(),e.C0Y(57,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?57:-1),e.yG2(6),e.E7m("ngClass",e.S45(18,qd,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(64,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?64:-1),e.yG2(),e.C0Y(65,y.s2.description&&y.s2.description.hasError("maxlength")&&y.s2.description.touched?65:-1),e.yG2(2),e.C0Y(67,y.uploadedImageOne?67:-1),e.yG2(3),e.C0Y(70,y.saveButtonActive?70:71))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.Mj,c.uW,c.Wo],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})(),no=(()=>{class M{constructor(){this.sectionTitles={sectionTwoTitle:"",sectionThreeTitle:"",sectionFourTitle:"",sectionFiveTitle:"",sectionSixTitle:"",sectionSevenTitle:"",sectionEightTitle:""}}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Science",active:!0}]}handleTitleChange(h,$){this.sectionTitles[h]=$}static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-science"]],decls:61,vars:9,consts:[["title","Science",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button","text-uppercase"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"titleChange"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"accordion",4)(5,"accordion-group",5)(6,"h2",6)(7,"button",7),e.OEk(8," Science Banner "),e.C$Y()(),e.I0R(9,"div",8)(10,"div",9),e.wR5(11,"app-science-banner"),e.C$Y()()(),e.I0R(12,"accordion-group",5)(13,"h2",6)(14,"button",7),e.OEk(15),e.C$Y()(),e.I0R(16,"div",8)(17,"div",9)(18,"app-science-sectionone",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionTwoTitle",dt)}),e.C$Y()()()(),e.I0R(19,"accordion-group",5)(20,"h2",6)(21,"button",7),e.OEk(22),e.C$Y()(),e.I0R(23,"div",8)(24,"div",9)(25,"app-science-sectiontwo",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionThreeTitle",dt)}),e.C$Y()()()(),e.I0R(26,"accordion-group",5)(27,"h2",6)(28,"button",7),e.OEk(29),e.C$Y()(),e.I0R(30,"div",8)(31,"div",9)(32,"app-science-sectionthree",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFourTitle",dt)}),e.C$Y()()()(),e.I0R(33,"accordion-group",5)(34,"h2",6)(35,"button",7),e.OEk(36),e.C$Y()(),e.I0R(37,"div",8)(38,"div",9)(39,"app-science-sectionfour",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionFiveTitle",dt)}),e.C$Y()()()(),e.I0R(40,"accordion-group",5)(41,"h2",6)(42,"button",7),e.OEk(43),e.C$Y()(),e.I0R(44,"div",8)(45,"div",9)(46,"app-science-sectionfive",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionSixTitle",dt)}),e.C$Y()()()(),e.I0R(47,"accordion-group",5)(48,"h2",6)(49,"button",7),e.OEk(50),e.C$Y()(),e.I0R(51,"div",8)(52,"div",9)(53,"app-science-sectionsix",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionSevenTitle",dt)}),e.C$Y()()()(),e.I0R(54,"accordion-group",5)(55,"h2",6)(56,"button",7),e.OEk(57),e.C$Y()(),e.I0R(58,"div",8)(59,"div",9)(60,"app-science-contact-form",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionEightTitle",dt)}),e.C$Y()()()()()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(4),e.E7m("closeOthers",!0),e.yG2(11),e.oRS(" Section 1 : ",y.sectionTitles.sectionTwoTitle," "),e.yG2(7),e.oRS(" Section 2 : ",y.sectionTitles.sectionThreeTitle," "),e.yG2(7),e.oRS(" Section 3 : ",y.sectionTitles.sectionFourTitle," "),e.yG2(7),e.oRS(" Section 4 : ",y.sectionTitles.sectionFiveTitle," "),e.yG2(7),e.oRS(" Section 5 : ",y.sectionTitles.sectionSixTitle," "),e.yG2(7),e.oRS(" Section 6 : ",y.sectionTitles.sectionSevenTitle," "),e.yG2(7),e.oRS(" Section 7 : ",y.sectionTitles.sectionEightTitle," "))},dependencies:[Mi.O,He.Wz,He.gD,bp,Fc,hu,ec,Lh,Fh,Ju,Xd]})}return M})();function ps(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",20)(2,"span",21),e.OEk(3,"Loading..."),e.C$Y()()())}function th(M,be){1&M&&(e.I0R(0,"div",22),e.OEk(1,"Title is required."),e.C$Y())}function ic(M,be){1&M&&(e.I0R(0,"div",22),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function _c(M,be){1&M&&(e.I0R(0,"div",22),e.OEk(1,"Description One is required."),e.C$Y())}function Io(M,be){1&M&&(e.I0R(0,"button",23),e.OEk(1,"Save"),e.C$Y())}function Rl(M,be){1&M&&(e.I0R(0,"button",24),e.wR5(1,"span",25),e.OEk(2," Please wait "),e.C$Y())}const Ps=M=>({"is-invalid":M});let Ic=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.editor=et.GW,this.toolbar=et.Ad,this.editordescription=et.GW}ngOnInit(){this.editordescription=new et.GW,this.initializeForm(),this.getHeading()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],description:["",[c.AQ.required]]})}get s2(){return this.formGroup.controls}getHeading(){this.toggleSpinner(!0),this.api.getwithoutid("contact").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0;const $=h.data[0];this.formGroup.patchValue({title:$.title,description:$.description}),this.id=$.id,this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}createFormData(){return{title:this.s2.title.value,description:this.s2.description.value}}addSection(h){this.api.post("add-contact",h).subscribe($=>{this.handleResponse($)},$=>this.handleError($))}updateSection(h){this.api.put("add-contact",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getHeading(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-contact-page"]],outputs:{titleChange:"titleChange"},decls:29,vars:14,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-4"],[1,""],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],[1,"col-lg-8"],["for","description",1,"form-label"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngClass"],[1,"col-lg-6"],[1,"hstack","gap-2","justify-content-start","mt-4"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,ps,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,th,2,0,"div",12)(16,ic,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",13)(18,"div",8)(19,"label",14),e.OEk(20," Description"),e.wR5(21,"span",10),e.C$Y(),e.wR5(22,"ngx-editor-menu",15)(23,"ngx-editor",16),e.yuY(24,_c,2,0,"div",12),e.C$Y()(),e.I0R(25,"div",17)(26,"div",18),e.yuY(27,Io,2,0,"button",19)(28,Rl,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(6),e.E7m("editor",y.editordescription)("toolbar",y.toolbar),e.yG2(),e.E7m("editor",y.editordescription)("placeholder","Type here...")("ngClass",e.S45(12,Ps,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(24,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?24:-1),e.yG2(3),e.C0Y(27,y.saveButtonActive?27:28))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.uW,c.Wo,et.Ip,et.Sw]})}return M})();function ha(M,be){1&M&&(e.I0R(0,"div",0)(1,"div",35)(2,"span",36),e.OEk(3,"Loading..."),e.C$Y()()())}function Vh(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Title is required."),e.C$Y())}function Cd(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1," Title must be at most 45 characters "),e.C$Y())}function xu(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Description One is required."),e.C$Y())}function wu(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1," description must be at most 200 characters "),e.C$Y())}function Cu(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"Status is required."),e.C$Y())}function ih(M,be){if(1&M&&e.wR5(0,"img",50),2&M){const h=e.GaO(2);e.E7m("src",h.selectedImageOnePreview,e.K6U)}}function Eu(M,be){if(1&M&&(e.I0R(0,"h5",51),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.name," ")}}function Zd(M,be){if(1&M&&(e.I0R(0,"p",52),e.OEk(1),e.C$Y()),2&M){const h=e.GaO(2);e.yG2(),e.oRS(" ",h.selectedImageOne.size," ")}}function ef(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",38)(1,"li",39)(2,"div",40)(3,"div",41)(4,"div",42)(5,"div",43),e.yuY(6,ih,1,1,"img",44),e.C$Y()(),e.I0R(7,"div",45)(8,"div",46),e.yuY(9,Eu,2,1,"h5",47)(10,Zd,2,1,"p",48),e.C$Y()(),e.I0R(11,"div",42)(12,"button",49),e.qCj("click",function(){e.usT(h);const y=e.GaO();return e.CGJ(y.removeImageOne())}),e.OEk(13," Delete "),e.C$Y()()()()()()}if(2&M){const h=e.GaO();e.yG2(6),e.C0Y(6,h.selectedImageOnePreview?6:-1),e.yG2(3),e.C0Y(9,h.selectedImageOne.name?9:-1),e.yG2(),e.C0Y(10,h.selectedImageOne.size?10:-1)}}function ka(M,be){}function Ua(M,be){1&M&&(e.I0R(0,"div",37),e.OEk(1,"image is required."),e.C$Y())}function Kd(M,be){if(1&M&&(e.I0R(0,"div",53)(1,"div")(2,"label",23),e.OEk(3,"Uploaded Image"),e.C$Y(),e.I0R(4,"div")(5,"div"),e.wR5(6,"img",54),e.C$Y()()()()),2&M){const h=e.GaO();e.yG2(6),e.E7m("src",h.uploadedImageOne,e.K6U)}}function Ed(M,be){1&M&&(e.I0R(0,"button",55),e.OEk(1,"Save"),e.C$Y())}function Sd(M,be){1&M&&(e.I0R(0,"button",56),e.wR5(1,"span",57),e.OEk(2," Please wait "),e.C$Y())}const Yo=M=>({"is-invalid":M});let nh=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.titleChange=new e._w7,this.dataExists=!1,this.saveButtonActive=!0,this.spinnerStatus=!1,this.id=null,this.selectedImageOne=null,this.selectedImageOnePreview=null,this.uploadedImageOne=null}ngOnInit(){this.initializeForm(),this.getData()}initializeForm(){this.formGroup=this.formBuilder.group({title:["",[c.AQ.required,c.AQ.maxLength(45)]],image:["",this.imageValidator()],description:["",c.AQ.maxLength(200)],status:["",c.AQ.required]})}imageValidator(){return h=>this.dataExists?null:c.AQ.required(h)}get s2(){return this.formGroup.controls}getData(){this.toggleSpinner(!0),this.api.get("form-data","contact").subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data&&h.data.length>0){this.dataExists=!0,this.initializeForm();const $=h.data[0];this.id=$.id,this.uploadedImageOne=$.image,this.formGroup.patchValue({title:$.title,description:$.description,status:$.status}),this.titleChange.emit($.title)}},h=>{this.toggleSpinner(!1),console.error("Error fetching data:",h)})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.dataExists?this.updateSection(h):this.addSection(h)}else this.formGroup.markAllAsTouched()}addSection(h){this.api.post("add-form-data",h).subscribe($=>{this.reset(),this.handleResponse($)},$=>this.handleError($))}reset(){this.selectedImageOne=null,this.selectedImageOnePreview=null}updateSection(h){this.api.put("add-form-data",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h}createFormData(){const h=new FormData;return this.selectedImageOne&&h.append("image",this.selectedImageOne),h.append("type","contact"),h.append("title",this.s2.title.value),h.append("status",this.s2.status.value),h.append("description",this.s2.description.value),h}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.getData(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1),this.toastService.error("Oops! Something went wrong",h),console.error("Error:",h)}imageOneSelect(h){const $=h.target.files[0];$&&(this.selectedImageOne=$,this.selectedImageOnePreview=URL.createObjectURL($))}removeImageOne(){this.selectedImageOne=null,this.selectedImageOnePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-contact-form"]],outputs:{titleChange:"titleChange"},decls:65,vars:17,consts:[["id","elmLoader"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"col-xxl-12"],[3,"formGroup","submit"],[1,"col-lg-6"],[1,"mb-3"],["for","title",1,"form-label"],[1,"text-danger"],["type","text","id","title","formControlName","title","placeholder","Enter Title ",1,"form-control",3,"ngClass"],["class","invalid-text"],["for","description",1,"form-label"],["placeholder","Enter description","rows","5","formControlName","description","maxlength","150",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","addstatus",1,"form-label"],["formControlName","status","data-choices","","id","addstatus",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-lg-8"],[1,"col-6"],[1,"form-label"],[1,"custom-modal-dropzone"],["type","file","id","scienceform","accept","image/*","formControlName","image","hidden","",3,"change"],["scienceform",""],["for","scienceform",1,"custom-modalfile-input"],[1,"custom-modalfile-text"],[1,"custom-file-text2-modal"],["class","list-unstyled mb-0","id","dropzone-preview"],["class","col-lg-6 mt-3 mt-lg-0"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"],["id","dropzone-preview",1,"list-unstyled","mb-0"],["id","dropzone-preview-list",1,"mt-2"],[1,"border","rounded"],[1,"d-flex","flex-wrap","gap-2","p-2"],[1,"flex-shrink-0"],[1,"image-avatar","bg-light","rounded","p-2"],["class","img-fluid rounded d-block","alt","Dropzone-Image",3,"src"],[1,"flex-grow-1","me-1"],[1,"pt-1"],["class","fs-md mb-1"],["class","fs-sm text-muted mb-0"],[1,"btn","btn-sm","btn-danger",3,"click"],["alt","Dropzone-Image",1,"img-fluid","rounded","d-block",3,"src"],[1,"fs-md","mb-1"],[1,"fs-sm","text-muted","mb-0"],[1,"col-lg-6","mt-3","mt-lg-0"],["alt","Uploaded Thumbnail",1,"edit-thumbnail-img-fluid","rounded","d-block","w-100",3,"src"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function($,y){1&$&&(e.yuY(0,ha,4,0,"div",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.qCj("submit",function(){return y.onSubmit()}),e.I0R(7,"div",1)(8,"div",7)(9,"div",8)(10,"label",9),e.OEk(11," Title"),e.I0R(12,"span",10),e.OEk(13,"*"),e.C$Y()(),e.wR5(14,"input",11),e.yuY(15,Vh,2,0,"div",12)(16,Cd,2,0,"div",12),e.C$Y()(),e.I0R(17,"div",7)(18,"div",8)(19,"label",13),e.OEk(20," Description"),e.wR5(21,"span",10),e.C$Y(),e.wR5(22,"textarea",14),e.yuY(23,xu,2,0,"div",12)(24,wu,2,0,"div",12),e.C$Y()(),e.I0R(25,"div",15)(26,"div",8)(27,"label",16),e.OEk(28,"Status "),e.I0R(29,"span",10),e.OEk(30,"*"),e.C$Y()(),e.I0R(31,"select",17)(32,"option",18),e.OEk(33,"Select Status"),e.C$Y(),e.I0R(34,"option",19),e.OEk(35,"Active"),e.C$Y(),e.I0R(36,"option",20),e.OEk(37,"Inactive"),e.C$Y()(),e.yuY(38,Cu,2,0,"div",12),e.C$Y()(),e.I0R(39,"div",21)(40,"div",1)(41,"div",22)(42,"div",8)(43,"label",23),e.OEk(44,"image"),e.I0R(45,"span",10),e.OEk(46,"*"),e.C$Y()(),e.I0R(47,"div",24)(48,"input",25,26),e.qCj("change",function(dt){return y.imageOneSelect(dt)}),e.C$Y(),e.I0R(50,"label",27)(51,"span",28),e.OEk(52,"Choose a file to upload. "),e.wR5(53,"br"),e.I0R(54,"span",29),e.OEk(55,"File size 500 \xd7 600 px "),e.C$Y()()()(),e.yuY(56,ef,14,3,"ul",30)(57,ka,0,0)(58,Ua,2,0,"div",12),e.C$Y()(),e.I0R(59,"div",22),e.yuY(60,Kd,7,1,"div",31),e.C$Y()()(),e.I0R(61,"div",32)(62,"div",33),e.yuY(63,Ed,2,0,"button",34)(64,Sd,3,0),e.C$Y()()()()()()()()()),2&$&&(e.C0Y(0,y.spinnerStatus?0:-1),e.yG2(6),e.E7m("formGroup",y.formGroup),e.yG2(8),e.E7m("ngClass",y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?"is-invalid":""),e.yG2(),e.C0Y(15,y.s2.title&&y.s2.title.hasError("required")&&y.s2.title.touched?15:-1),e.yG2(),e.C0Y(16,y.s2.title&&y.s2.title.hasError("maxlength")&&y.s2.title.touched?16:-1),e.yG2(6),e.E7m("ngClass",e.S45(15,Yo,y.s2.description&&y.s2.description.errors&&y.s2.description.touched)),e.yG2(),e.C0Y(23,y.s2.description&&y.s2.description.hasError("required")&&y.s2.description.touched?23:-1),e.yG2(),e.C0Y(24,y.s2.description&&y.s2.description.hasError("maxlength")&&y.s2.description.touched?24:-1),e.yG2(7),e.E7m("ngClass",y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(38,y.s2.status&&y.s2.status.hasError("required")&&y.s2.status.touched?38:-1),e.yG2(18),e.C0Y(56,y.selectedImageOne?56:-1),e.yG2(),e.C0Y(57,y.uploadedImageOne?57:-1),e.yG2(),e.C0Y(58,y.s2.image&&y.s2.image.hasError("required")&&y.s2.image.touched?58:-1),e.yG2(2),e.C0Y(60,y.uploadedImageOne?60:-1),e.yG2(3),e.C0Y(63,y.saveButtonActive?63:64))},dependencies:[Te.QF,c.sz,c.wd,c.GO,c.ot,c.GC,c.ue,c.u,c.Mj,c.uW,c.Wo],styles:['@charset "UTF-8";.dz-preview.dz-file-preview.dz-processing.dz-success.dz-comp\\200c\\200blete[_ngcontent-%COMP%]{display:block!important}.custom-dropzone[_ngcontent-%COMP%]{min-height:230px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.uploaded-img[_ngcontent-%COMP%]{min-height:230px!important;border-radius:6px!important;text-align:center;box-sizing:border-box;display:block;width:100%;height:auto}.thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%;height:274px}.custom-file-input[_ngcontent-%COMP%]{width:100%;min-height:230px!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.custom-file-text[_ngcontent-%COMP%]{font-size:1.5rem;color:#666}.custom-file-text2[_ngcontent-%COMP%]{font-size:.7rem;color:#b3b3b3}.selected-file[_ngcontent-%COMP%]{width:100%;min-height:230px!important;display:flex;justify-content:center;align-items:center}.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.findus-heading[_ngcontent-%COMP%]{color:#000}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}']})}return M})(),kd=(()=>{class M{constructor(){this.sectionTitles={sectionTwoTitle:"",sectionThreeTitle:"",sectionFourTitle:"",sectionFiveTitle:"",sectionSixTitle:""}}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Contact Page",active:!0}]}handleTitleChange(h,$){this.sectionTitles[h]=$}static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-contact"]],decls:26,vars:4,consts:[["title","Contact",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],["id","accordionWithplusicon",1,"accordion","custom-accordionwithicon-plus",3,"closeOthers"],[1,"accordion-item"],["accordion-heading","","id","accordionwithplusExample1",1,"accordion-header"],["type","button",1,"accordion-button","text-uppercase"],["id","accor_plusExamplecollapse1",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[3,"titleChange"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"accordion",4)(5,"accordion-group",5)(6,"h2",6)(7,"button",7),e.OEk(8),e.C$Y()(),e.I0R(9,"div",8)(10,"div",9)(11,"app-contact-page",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionTwoTitle",dt)}),e.C$Y()()()(),e.I0R(12,"accordion-group",5)(13,"h2",6)(14,"button",7),e.OEk(15," Section 2 : loaction "),e.C$Y()(),e.I0R(16,"div",8)(17,"div",9),e.wR5(18,"app-location"),e.C$Y()()(),e.I0R(19,"accordion-group",5)(20,"h2",6)(21,"button",7),e.OEk(22),e.C$Y()(),e.I0R(23,"div",8)(24,"div",9)(25,"app-contact-form",10),e.qCj("titleChange",function(dt){return y.handleTitleChange("sectionThreeTitle",dt)}),e.C$Y()()()()()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(4),e.E7m("closeOthers",!0),e.yG2(4),e.oRS(" Section 1 : ",y.sectionTitles.sectionTwoTitle," "),e.yG2(14),e.oRS(" Section 3 : ",y.sectionTitles.sectionThreeTitle," "))},dependencies:[Mi.O,He.Wz,He.gD,Ic,nh,xn]})}return M})();const Mp=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function rh(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",38),e.OEk(2),e.C$Y(),e.wR5(3,"td",39)(4,"td",39),e.I0R(5,"td",40)(6,"div",41)(7,"input",42),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt.id,y))}),e.C$Y(),e.I0R(8,"label",43)(9,"span",44),e.OEk(10),e.C$Y()()()(),e.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),e.wR5(15,"i",48),e.C$Y()(),e.I0R(16,"li")(17,"a",49),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(18,"i",50),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index,y=e.GaO();e.yG2(2),e.oRS(" ",(y.currentPage-1)*y.itemsPerPage+$+1," "),e.yG2(),e.E7m("innerHtml",h.name,e.E3n),e.yG2(),e.E7m("innerHtml",h.cin_id,e.E3n),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(9,Mp,"active"===h.status,"inactive"===h.status)),e.yG2(),e.oRS(" ",h.status," "),e.yG2(4),e.CI5("routerLink","/edit-company/",h.id,"")}}function tf(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",51)(2,"span",52),e.OEk(3,"Loading..."),e.C$Y()()())}let Su=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.companyData=h.data||[],this.companyDataList=h.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}setStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("company",h,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}toggleSpinner(h){this.spinnerStatus=h}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("company",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(h),this.toastService.error(h.message))}handleError(h){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(h=>{const $=this.term.toLowerCase();return h.name.toLowerCase().includes($)||h.cin_id.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.wR5(12,"div",10),e.C$Y()(),e.I0R(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(dt){return e.kNx(y.term,dt)||(y.term=dt),dt}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),e.wR5(21,"i",18),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"Company Name"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33,"CIN"),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Status"),e.C$Y(),e.I0R(36,"th",24),e.OEk(37,"Action"),e.C$Y()()(),e.I0R(38,"tbody",25),e.c53(39,rh,19,12,"tr",null,e.wJt),e.C$Y()(),e.I0R(41,"div",26)(42,"div",27),e.wR5(43,"i",28),e.I0R(44,"h5",29),e.OEk(45,"Sorry! No Result Found"),e.C$Y(),e.I0R(46,"p",30),e.OEk(47," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(48,"div",31)(49,"div",32)(50,"div",33),e.OEk(51," Showing "),e.I0R(52,"span",34),e.OEk(53),e.C$Y(),e.OEk(54," of "),e.I0R(55,"span",34),e.OEk(56),e.C$Y(),e.OEk(57," Results "),e.C$Y()(),e.I0R(58,"div",35)(59,"pagination",36),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()()(),e.yuY(60,tf,4,0,"div",37),e.C$Y()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(24),e.oho(y.companyData),e.yG2(14),e.cNF(null==y.companyData?null:y.companyData.length),e.yG2(3),e.cNF(null==y.companyDataList?null:y.companyDataList.length),e.yG2(3),e.E7m("totalItems",null==y.companyDataList?null:y.companyDataList.length)("itemsPerPage",5),e.yG2(),e.C0Y(60,y.spinnerStatus?60:-1))},dependencies:[Te.QF,Mi.O,Ve.ER,c.ot,c.ue,c._G,We.im]})}return M})();function sh(M,be){if(1&M&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",84),e.C$Y()()),2&M){const h=e.GaO(2);e.yG2(2),e.E7m("src",h.companyselectedImagePreview,e.K6U)}}function $h(M,be){if(1&M&&e.yuY(0,sh,3,1,"div",82),2&M){const h=e.GaO();e.C0Y(0,h.companyselectedImagePreview?0:-1)}}function ad(M,be){if(1&M&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",84),e.C$Y()()),2&M){const h=e.GaO();e.yG2(2),e.E7m("src",h.companyuploadedImage,e.K6U)}}function ku(M,be){1&M&&(e.I0R(0,"div",9)(1,"div",83),e.wR5(2,"img",85),e.C$Y()())}function Jd(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Logo is required."),e.C$Y())}function Hc(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Company name is required."),e.C$Y())}function Td(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," Company name must be at most 45 characters "),e.C$Y())}function oh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Business type is required."),e.C$Y())}function Hh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," Business type must be at most 45 characters "),e.C$Y())}function jh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"TIN is required."),e.C$Y())}function Uh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"CIN is required."),e.C$Y())}function ah(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"No. of Employee is required."),e.C$Y())}function Wh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Website url is required."),e.C$Y())}function lh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Contact person is required."),e.C$Y())}function ch(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Email is required."),e.C$Y())}function dh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," Email must be a valid email address "),e.C$Y())}function qh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Mobile is required."),e.C$Y())}function Xh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," Please, Enter 10 digit Mobile Number. "),e.C$Y())}function Zh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"City is required."),e.C$Y())}function uh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"State is required."),e.C$Y())}function Oc(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"zip_code is required."),e.C$Y())}function ll(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Address is required."),e.C$Y())}function Ap(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," Address must be at most 100 characters "),e.C$Y())}function hh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Password is required."),e.C$Y())}function Dp(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1," password must be at minimum 5 characters "),e.C$Y())}function Kh(M,be){1&M&&(e.I0R(0,"div",86),e.OEk(1,"Status is required."),e.C$Y())}function Rp(M,be){1&M&&(e.I0R(0,"button",87),e.OEk(1,"Save"),e.C$Y())}function Qd(M,be){1&M&&(e.I0R(0,"button",88),e.wR5(1,"span",89),e.OEk(2," Please wait "),e.C$Y())}function Id(M,be){1&M&&(e.I0R(0,"div",81)(1,"div",90)(2,"span",91),e.OEk(3,"Loading..."),e.C$Y()()())}const Od=M=>({"is-invalid":M}),ld=(M,be)=>({"mdi-eye-off-outline":M,"mdi-eye-outline":be});let eu=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.mockLocationUpdates=[{lng:78.22045594790079,lat:26.230978491880894},{lng:78.22581623978483,lat:26.230717171669912},{lng:78.22831983563903,lat:26.229851080580822}]}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[c.AQ.maxLength(45),c.AQ.required]],address:["",[c.AQ.maxLength(100),c.AQ.required]],no_of_emp:["",[c.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[c.AQ.required]],tax_no:["",[c.AQ.required]],website_url:["",[c.AQ.required]],email:["",[c.AQ.required,c.AQ.email,c.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[c.AQ.required,c.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[c.AQ.maxLength(45),c.AQ.required]],password:["",[this.imageValidator(),c.AQ.minLength(5)]],status:["",[c.AQ.required]],city:["",[c.AQ.required]],state:["",[c.AQ.required]],zip_code:["",[c.AQ.required]],contact_person:["",[c.AQ.required]]})}imageValidator(){return h=>this.urlId?null:c.AQ.required(h)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.setCompanyDetails(h.data[0])):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}setCompanyDetails(h){h&&(this.formGroup.patchValue({name:h.name,address:h.address,no_of_emp:h.no_of_emp,cin_id:h.cin_id,tax_no:h.tax_no,email:h.email,password:h.password,status:h.status,mobile:h.mobile,business_type:h.business_type,city:h.city,state:h.state,zip_code:h.zip_code,contact_person:h.contact_person,website_url:h.website_url}),this.companyuploadedImage=h.logo||"")}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.urlId?this.updateCompany(h):this.addCompany(h)}else this.formGroup.markAllAsTouched()}createFormData(){const h=new FormData;return h.append("name",this.f.name.value),h.append("address",this.f.address.value),h.append("no_of_emp",this.f.no_of_emp.value),h.append("cin_id",this.f.cin_id.value),h.append("email",this.f.email.value),h.append("password",this.f.password.value),h.append("status",this.f.status.value),h.append("mobile",this.f.mobile.value),h.append("business_type",this.f.business_type.value),h.append("tax_no",this.f.tax_no.value),h.append("city",this.f.city.value),h.append("state",this.f.state.value),h.append("zip_code",this.f.zip_code.value),h.append("contact_person",this.f.contact_person.value),h.append("website_url",this.f.website_url.value),this.companyselectedImage&&h.append("logo",this.companyselectedImage),h}addCompany(h){this.api.post("company",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateCompany(h){this.api.put("company",this.urlId,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(h.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(h){this.toggleSpinner(!1)}companyimageSelect(h){const $=h.target.files[0];$&&(this.companyselectedImage=$,this.companyselectedImagePreview=URL.createObjectURL($))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-add-company"]],decls:228,vars:59,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],[1,"ratio","ratio-16x9"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6509156.773725123!2d-123.79622260161696!3d37.19312212390098!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1678106410566!5m2!1sen!2sin","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[1,"card-body","pt-1"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"text-center","mt-4"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"hstack","gap-2","justify-content-center","list-unstyled","mt-4","pt-2","mb-0"],["href","javascript:void(0);",1,"btn","btn-success","btn-sm"],[1,"bi","bi-whatsapp"],["href","javascript:void(0);",1,"btn","btn-primary","btn-sm"],[1,"bi","bi-facebook"],["href","javascript:void(0);",1,"btn","btn-info","btn-sm"],[1,"bi","bi-twitter"],["href","javascript:void(0);",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-envelope"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],["for","password-input",1,"form-label"],[1,"position-relative","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","placeholder","Enter password","id","password-input",1,"form-control","pe-5","password-input",3,"type","ngClass"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon"],[1,"ri-eye-fill","align-middle",3,"ngClass","click"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg mt-n5 position-relative mx-auto"],[1,"avatar-title","bg-body-secondary","rounded","shadow"],["alt","",1,"avatar-sm",3,"src"],["src","assets/images/companies/img-1.png","alt","",1,"avatar-sm"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"form",1),e.qCj("ngSubmit",function(){return y.onSubmit()}),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.wR5(6,"iframe",6),e.C$Y(),e.I0R(7,"div",7),e.yuY(8,$h,1,1)(9,ad,3,1)(10,ku,3,0)(11,Jd,2,0,"div",8),e.I0R(12,"div",9)(13,"input",10,11),e.qCj("change",function(dt){return y.companyimageSelect(dt)}),e.C$Y(),e.I0R(15,"div",12)(16,"label",13)(17,"span",14),e.wR5(18,"i",15),e.C$Y()()()(),e.I0R(19,"div",16)(20,"h5",17),e.OEk(21),e.C$Y(),e.I0R(22,"p",18),e.OEk(23),e.C$Y()(),e.I0R(24,"div",19)(25,"table",20)(26,"tbody")(27,"tr")(28,"th"),e.OEk(29,"TIN"),e.C$Y(),e.I0R(30,"td"),e.OEk(31),e.C$Y()(),e.I0R(32,"tr")(33,"th"),e.OEk(34,"CIN"),e.C$Y(),e.I0R(35,"td"),e.OEk(36),e.C$Y()(),e.I0R(37,"tr")(38,"th"),e.OEk(39,"Location"),e.C$Y(),e.I0R(40,"td"),e.OEk(41),e.C$Y()(),e.I0R(42,"tr")(43,"th"),e.OEk(44,"Website"),e.C$Y(),e.I0R(45,"td"),e.OEk(46),e.C$Y()(),e.I0R(47,"tr")(48,"th"),e.OEk(49,"Phone Number"),e.C$Y(),e.I0R(50,"td")(51,"a"),e.OEk(52),e.C$Y()()()()()(),e.I0R(53,"ul",21)(54,"li")(55,"a",22),e.wR5(56,"i",23),e.C$Y()(),e.I0R(57,"li")(58,"a",24),e.wR5(59,"i",25),e.C$Y()(),e.I0R(60,"li")(61,"a",26),e.wR5(62,"i",27),e.C$Y()(),e.I0R(63,"li")(64,"a",28),e.wR5(65,"i",29),e.C$Y()()()()()(),e.I0R(66,"div",30)(67,"div",31)(68,"div",32)(69,"h6",33),e.OEk(70,"Company Information"),e.C$Y()(),e.I0R(71,"div",34)(72,"div",35)(73,"div",2)(74,"div",36)(75,"div",37)(76,"label",38),e.OEk(77,"Company name "),e.I0R(78,"span",39),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",40),e.yuY(81,Hc,2,0,"div",8)(82,Td,2,0,"div",8),e.C$Y()(),e.I0R(83,"div",36)(84,"div",37)(85,"label",41),e.OEk(86,"Business type "),e.I0R(87,"span",39),e.OEk(88,"*"),e.C$Y()(),e.wR5(89,"input",42),e.yuY(90,oh,2,0,"div",8)(91,Hh,2,0,"div",8),e.C$Y()(),e.I0R(92,"div",36)(93,"div",37)(94,"label",43),e.OEk(95,"Tax Identification Number (TIN) "),e.I0R(96,"span",39),e.OEk(97,"*"),e.C$Y()(),e.wR5(98,"input",44),e.yuY(99,jh,2,0,"div",8),e.C$Y()(),e.I0R(100,"div",36)(101,"div",37)(102,"label",45),e.OEk(103,"Corporate Identification Number (CIN) "),e.I0R(104,"span",39),e.OEk(105,"*"),e.C$Y()(),e.wR5(106,"input",46),e.yuY(107,Uh,2,0,"div",8),e.C$Y()(),e.I0R(108,"div",36)(109,"div",37)(110,"label",47),e.OEk(111,"No. of Employee "),e.I0R(112,"span",39),e.OEk(113,"*"),e.C$Y()(),e.wR5(114,"input",48),e.yuY(115,ah,2,0,"div",8),e.C$Y()(),e.I0R(116,"div",36)(117,"div",37)(118,"label",49),e.OEk(119,"Website Url"),e.I0R(120,"span",39),e.OEk(121,"*"),e.C$Y()(),e.wR5(122,"input",50),e.yuY(123,Wh,2,0,"div",8),e.C$Y()()()()()(),e.I0R(124,"div",51)(125,"div",32)(126,"h6",33),e.OEk(127,"Contact Information"),e.C$Y()(),e.I0R(128,"div",34)(129,"div",35)(130,"div",2)(131,"div",52)(132,"div",37)(133,"label",53),e.OEk(134,"Contact person "),e.I0R(135,"span",39),e.OEk(136,"*"),e.C$Y()(),e.wR5(137,"input",54),e.yuY(138,lh,2,0,"div",8),e.C$Y()(),e.I0R(139,"div",52)(140,"div",37)(141,"label",55),e.OEk(142,"Email "),e.I0R(143,"span",39),e.OEk(144,"*"),e.C$Y()(),e.wR5(145,"input",56),e.yuY(146,ch,2,0,"div",8)(147,dh,2,0,"div",8),e.C$Y()(),e.I0R(148,"div",52)(149,"div",37)(150,"label",57),e.OEk(151,"Contact Number "),e.I0R(152,"span",39),e.OEk(153,"*"),e.C$Y()(),e.wR5(154,"input",58),e.yuY(155,qh,2,0,"div",8)(156,Xh,2,0,"div",8),e.C$Y()()()()()(),e.I0R(157,"div",51)(158,"div",32)(159,"h6",33),e.OEk(160,"Address Information"),e.C$Y()(),e.I0R(161,"div",34)(162,"div",35)(163,"div",2)(164,"div",52)(165,"div",37)(166,"label",59),e.OEk(167,"City "),e.I0R(168,"span",39),e.OEk(169,"*"),e.C$Y()(),e.wR5(170,"input",60),e.yuY(171,Zh,2,0,"div",8),e.C$Y()(),e.I0R(172,"div",52)(173,"div",37)(174,"label",61),e.OEk(175,"State "),e.I0R(176,"span",39),e.OEk(177,"*"),e.C$Y()(),e.wR5(178,"input",62),e.yuY(179,uh,2,0,"div",8),e.C$Y()(),e.I0R(180,"div",52)(181,"div",37)(182,"label",63),e.OEk(183,"Zip code "),e.I0R(184,"span",39),e.OEk(185,"*"),e.C$Y()(),e.wR5(186,"input",64),e.yuY(187,Oc,2,0,"div",8),e.C$Y()(),e.I0R(188,"div",65)(189,"div",37)(190,"label",66),e.OEk(191," Address "),e.I0R(192,"span",39),e.OEk(193,"*"),e.C$Y()(),e.wR5(194,"textarea",67),e.yuY(195,ll,2,0,"div",8)(196,Ap,2,0,"div",8),e.C$Y()(),e.I0R(197,"div",52)(198,"div",37)(199,"label",68),e.OEk(200,"Password "),e.I0R(201,"span",39),e.OEk(202,"*"),e.C$Y()(),e.I0R(203,"div",69),e.wR5(204,"input",70),e.I0R(205,"button",71)(206,"i",72),e.qCj("click",function(){return y.toggleFieldTextType()}),e.C$Y()(),e.yuY(207,hh,2,0,"div",8)(208,Dp,2,0,"div",8),e.C$Y()()(),e.I0R(209,"div",52)(210,"div",37)(211,"label",73),e.OEk(212,"Status "),e.I0R(213,"span",39),e.OEk(214,"*"),e.C$Y()(),e.I0R(215,"select",74)(216,"option",75),e.OEk(217,"Select Status"),e.C$Y(),e.I0R(218,"option",76),e.OEk(219,"Active"),e.C$Y(),e.I0R(220,"option",77),e.OEk(221,"Inactive"),e.C$Y()(),e.yuY(222,Kh,2,0,"div",8),e.C$Y()(),e.I0R(223,"div",78)(224,"div",79),e.yuY(225,Rp,2,0,"button",80)(226,Qd,3,0),e.C$Y()()()()()()(),e.yuY(227,Id,4,0,"div",81),e.C$Y()()),2&$&&(e.E7m("title",y.urlId?"Edit Company":"Add Company")("breadcrumbItems",y.breadCrumbItems),e.yG2(),e.E7m("formGroup",y.formGroup),e.yG2(7),e.C0Y(8,y.companyselectedImage?8:y.companyuploadedImage?9:10),e.yG2(3),e.C0Y(11,y.f.logo&&y.f.logo.hasError("required")&&y.f.logo.touched?11:-1),e.yG2(10),e.cNF(y.f.name.value),e.yG2(2),e.cNF(y.f.business_type.value),e.yG2(8),e.cNF(y.f.tax_no.value),e.yG2(5),e.cNF(y.f.cin_id.value),e.yG2(5),e.cNF(y.f.address.value),e.yG2(5),e.cNF(y.f.website_url.value),e.yG2(6),e.cNF(y.f.mobile.value),e.yG2(28),e.E7m("ngClass",y.f.name&&y.f.name.hasError("required")&&y.f.name.touched?"is-invalid":""),e.yG2(),e.C0Y(81,y.f.name&&y.f.name.hasError("required")&&y.f.name.touched?81:-1),e.yG2(),e.C0Y(82,y.f.name&&y.f.name.hasError("maxlength")&&y.f.name.touched?82:-1),e.yG2(7),e.E7m("ngClass",y.f.business_type&&y.f.business_type.hasError("required")&&y.f.business_type.touched?"is-invalid":""),e.yG2(),e.C0Y(90,y.f.business_type&&y.f.business_type.hasError("required")&&y.f.business_type.touched?90:-1),e.yG2(),e.C0Y(91,y.f.business_type&&y.f.business_type.hasError("maxlength")&&y.f.business_type.touched?91:-1),e.yG2(7),e.E7m("ngClass",y.f.tax_no&&y.f.tax_no.hasError("required")&&y.f.tax_no.touched?"is-invalid":""),e.yG2(),e.C0Y(99,y.f.tax_no&&y.f.tax_no.hasError("required")&&y.f.tax_no.touched?99:-1),e.yG2(7),e.E7m("ngClass",y.f.cin_id&&y.f.cin_id.hasError("required")&&y.f.cin_id.touched?"is-invalid":""),e.yG2(),e.C0Y(107,y.f.cin_id&&y.f.cin_id.hasError("required")&&y.f.cin_id.touched?107:-1),e.yG2(7),e.E7m("ngClass",y.f.no_of_emp&&y.f.no_of_emp.hasError("required")&&y.f.no_of_emp.touched?"is-invalid":""),e.yG2(),e.C0Y(115,y.f.no_of_emp&&y.f.no_of_emp.hasError("required")&&y.f.no_of_emp.touched?115:-1),e.yG2(7),e.E7m("ngClass",y.f.website_url&&y.f.website_url.hasError("required")&&y.f.website_url.touched?"is-invalid":""),e.yG2(),e.C0Y(123,y.f.website_url&&y.f.website_url.hasError("required")&&y.f.website_url.touched?123:-1),e.yG2(14),e.E7m("ngClass",y.f.contact_person&&y.f.contact_person.hasError("required")&&y.f.contact_person.touched?"is-invalid":""),e.yG2(),e.C0Y(138,y.f.contact_person&&y.f.contact_person.hasError("required")&&y.f.contact_person.touched?138:-1),e.yG2(7),e.E7m("ngClass",y.f.email&&y.f.email.hasError("required")&&y.f.email.touched?"is-invalid":""),e.yG2(),e.C0Y(146,y.f.email&&y.f.email.hasError("required")&&y.f.email.touched?146:-1),e.yG2(),e.C0Y(147,y.f.email.hasError("pattern")?147:-1),e.yG2(7),e.E7m("ngClass",y.f.mobile&&y.f.mobile.hasError("required")&&y.f.mobile.touched?"is-invalid":""),e.yG2(),e.C0Y(155,y.f.mobile&&y.f.mobile.hasError("required")&&y.f.mobile.touched?155:-1),e.yG2(),e.C0Y(156,y.f.mobile.hasError("pattern")?156:-1),e.yG2(14),e.E7m("ngClass",y.f.city&&y.f.city.hasError("required")&&y.f.city.touched?"is-invalid":""),e.yG2(),e.C0Y(171,y.f.city&&y.f.city.hasError("required")&&y.f.city.touched?171:-1),e.yG2(7),e.E7m("ngClass",y.f.state&&y.f.state.hasError("required")&&y.f.state.touched?"is-invalid":""),e.yG2(),e.C0Y(179,y.f.state&&y.f.state.hasError("required")&&y.f.state.touched?179:-1),e.yG2(7),e.E7m("ngClass",y.f.zip_code&&y.f.zip_code.hasError("required")&&y.f.zip_code.touched?"is-invalid":""),e.yG2(),e.C0Y(187,y.f.zip_code&&y.f.zip_code.hasError("required")&&y.f.zip_code.touched?187:-1),e.yG2(7),e.E7m("ngClass",e.S45(52,Od,y.f.address&&y.f.address.errors&&y.f.address.touched)),e.yG2(),e.C0Y(195,y.f.address&&y.f.address.hasError("required")&&y.f.address.touched?195:-1),e.yG2(),e.C0Y(196,y.f.address&&y.f.address.hasError("maxlength")&&y.f.address.touched?196:-1),e.yG2(8),e.E7m("type",y.fieldTextType?"text":"password")("ngClass",e.S45(54,Od,y.submitted&&y.f.password.errors)),e.yG2(2),e.E7m("ngClass",e.IBC(56,ld,!y.fieldTextType,y.fieldTextType)),e.yG2(),e.C0Y(207,y.f.password&&y.f.password.hasError("required")&&y.f.password.touched?207:-1),e.yG2(),e.C0Y(208,y.f.password&&y.f.password.hasError("minlength")&&y.f.password.touched?208:-1),e.yG2(7),e.E7m("ngClass",y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(222,y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?222:-1),e.yG2(3),e.C0Y(225,y.saveButtonActive?225:226),e.yG2(2),e.C0Y(227,y.spinnerStatus?227:-1))},dependencies:[Te.QF,Mi.O,c.sz,c.wd,c.GO,c.ot,c.O4,c.GC,c.ue,c.u,c.uW,c.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}"]})}return M})();const Jh=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function Lp(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr")(1,"td",38),e.OEk(2),e.C$Y(),e.I0R(3,"td",39)(4,"div",40)(5,"div",41),e.wR5(6,"img",42),e.C$Y()()(),e.wR5(7,"td",43)(8,"td",43),e.I0R(9,"td",44)(10,"div",45)(11,"input",46),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt.id,y))}),e.C$Y(),e.I0R(12,"label",47)(13,"span",48),e.OEk(14),e.C$Y()()()(),e.I0R(15,"td",49)(16,"ul",50)(17,"li")(18,"a",51),e.wR5(19,"i",52),e.C$Y()(),e.I0R(20,"li")(21,"a",53),e.wR5(22,"i",54),e.C$Y()(),e.I0R(23,"li")(24,"a",55),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.delete(Ke.id))}),e.wR5(25,"i",56),e.C$Y()()()()()}if(2&M){const h=be.$implicit,$=be.$index,y=e.GaO();e.yG2(2),e.oRS(" ",(y.currentPage-1)*y.itemsPerPage+$+1," "),e.yG2(4),e._6D("src",h.image,e.K6U),e.yG2(),e.E7m("innerHtml",h.name,e.E3n),e.yG2(),e.E7m("innerHtml",h.employee_id,e.E3n),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(11,Jh,"active"===h.status,"inactive"===h.status)),e.yG2(),e.oRS(" ",h.status," "),e.yG2(4),e.CI5("routerLink","/employee-detail/",h.id,""),e.yG2(3),e.CI5("routerLink","/edit-employee/",h.id,"")}}function Pp(M,be){1&M&&(e.I0R(0,"div",37)(1,"div",57)(2,"span",58),e.OEk(3,"Loading..."),e.C$Y()()())}let zp=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.api=$,this.toastService=y,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Employees list",active:!0}];const h=localStorage.getItem("currentUser");if(h){const $=JSON.parse(h);this.company_id=$.id}this.getemployeeData()}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe($=>{$&&$.status?(this.toggleSpinner(!1),this.employeeData=$.data||[],this.employeeDataList=$.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},$=>{this.handleError($.message||"An error occurred while fetching data")})}setStatus(h,$){const Ke=$.target.checked?"active":"inactive",dt=new FormData;dt.append("status",Ke),this.toggleSpinner(!0),this.api.put("employees",h,dt).subscribe(ai=>this.handleStatusChangeResponse(ai),ai=>this.handleError(ai))}toggleSpinner(h){this.spinnerStatus=h}delete(h){h&&Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&this.api.deleteWithId("employees",h).subscribe(y=>this.handleStatusChangeResponse(y),y=>this.handleError(y))})}handleStatusChangeResponse(h){this.toggleSpinner(!1),!0===h.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}filterdata(){this.employeeData=this.term?this.employeeDataList.filter(h=>{const $=this.term.toLowerCase();return h.name.toLowerCase().includes($)||h.employee_id.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.employeeDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.employeeData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.employeeDataList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.employeeData=this.employeeDataList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Se.W),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-employee-list"]],decls:63,vars:7,consts:[["title","Employees List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-employee",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center","table-light"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"category"],[1,"flex-shrink-0","d-flex","justify-content-center"],[1,"uploaded-image-avatar","bg-light","rounded","p-2"],[1,"img-fluid","rounded",3,"src"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-primary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-eye","fs-5"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.wR5(12,"div",10),e.C$Y()(),e.I0R(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(dt){return e.kNx(y.term,dt)||(y.term=dt),dt}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),e.wR5(21,"i",18),e.OEk(22,"Add"),e.C$Y()()()()()(),e.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),e.OEk(29,"S No."),e.C$Y(),e.I0R(30,"th",23),e.OEk(31,"Image"),e.C$Y(),e.I0R(32,"th",23),e.OEk(33," Employee Name "),e.C$Y(),e.I0R(34,"th",23),e.OEk(35,"Employee ID"),e.C$Y(),e.I0R(36,"th",23),e.OEk(37,"Status"),e.C$Y(),e.I0R(38,"th",24),e.OEk(39,"Action"),e.C$Y()()(),e.I0R(40,"tbody",25),e.c53(41,Lp,26,14,"tr",null,e.wJt),e.C$Y()(),e.I0R(43,"div",26)(44,"div",27),e.wR5(45,"i",28),e.I0R(46,"h5",29),e.OEk(47,"Sorry! No Result Found"),e.C$Y(),e.I0R(48,"p",30),e.OEk(49," We did not find any Details for you search. "),e.C$Y()()()(),e.I0R(50,"div",31)(51,"div",32)(52,"div",33),e.OEk(53," Showing "),e.I0R(54,"span",34),e.OEk(55),e.C$Y(),e.OEk(56," of "),e.I0R(57,"span",34),e.OEk(58),e.C$Y(),e.OEk(59," Results "),e.C$Y()(),e.I0R(60,"div",35)(61,"pagination",36),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()()(),e.yuY(62,Pp,4,0,"div",37),e.C$Y()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(15),e.OKB("ngModel",y.term),e.yG2(26),e.oho(y.employeeData),e.yG2(14),e.cNF(null==y.employeeData?null:y.employeeData.length),e.yG2(3),e.cNF(null==y.employeeDataList?null:y.employeeDataList.length),e.yG2(3),e.E7m("totalItems",null==y.employeeDataList?null:y.employeeDataList.length)("itemsPerPage",y.itemsPerPage),e.yG2(),e.C0Y(62,y.spinnerStatus?62:-1))},dependencies:[Te.QF,Mi.O,Ve.ER,c.ot,c.ue,c._G,We.im],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return M})();function ph(M,be){if(1&M&&e.wR5(0,"img",66),2&M){const h=e.GaO(2);e.E7m("src",h.employeeselectedImagePreview,e.K6U)}}function Qh(M,be){if(1&M&&e.yuY(0,ph,1,1,"img",65),2&M){const h=e.GaO();e.C0Y(0,h.employeeselectedImagePreview?0:-1)}}function Fp(M,be){if(1&M&&e.wR5(0,"img",67),2&M){const h=e.GaO();e.E7m("src",h.employeeuploadedImage,e.K6U)}}function fh(M,be){1&M&&e.wR5(0,"img",68)}function Yp(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Image is required."),e.C$Y())}function Md(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Empolyee name is required."),e.C$Y())}function ep(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Empolyee name must be at most 45 characters "),e.C$Y())}function zs(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Employee Id is required."),e.C$Y())}function cd(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Email is required."),e.C$Y())}function mh(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Email must be a valid email address "),e.C$Y())}function Mc(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Mobile is required."),e.C$Y())}function Ad(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Please, Enter 10 digit Mobile Number. "),e.C$Y())}function nc(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Date of Birth is required."),e.C$Y())}function tp(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Designation is required."),e.C$Y())}function ip(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Gender is required."),e.C$Y())}function rc(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Address is required."),e.C$Y())}function gh(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Address must be at most 100 characters "),e.C$Y())}function $l(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"City is required."),e.C$Y())}function Ac(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Zip code is required. "),e.C$Y())}function np(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1," Invalid zip code. "),e.C$Y())}function _h(M,be){if(1&M&&(e.I0R(0,"div"),e.yuY(1,Ac,2,0,"div",70)(2,np,2,0,"div",70),e.C$Y()),2&M){const h=e.GaO();e.yG2(),e.E7m("ngIf",null==h.f.zip_code?null:h.f.zip_code.hasError("required")),e.yG2(),e.E7m("ngIf",null==h.f.zip_code?null:h.f.zip_code.hasError("maxlength"))}}function jc(M,be){if(1&M&&(e.I0R(0,"option",71),e.OEk(1),e.C$Y()),2&M){const h=be.$implicit;e.E7m("value",h),e.yG2(),e.oRS(" ",h," ")}}function Hl(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"State is required."),e.C$Y())}function Uc(M,be){1&M&&(e.I0R(0,"div",69),e.OEk(1,"Status is required."),e.C$Y())}function nf(M,be){1&M&&(e.I0R(0,"button",72),e.OEk(1,"Save"),e.C$Y())}function Tu(M,be){1&M&&(e.I0R(0,"button",73),e.wR5(1,"span",74),e.OEk(2," Please wait "),e.C$Y())}function vh(M,be){1&M&&(e.I0R(0,"div",64)(1,"div",75)(2,"span",76),e.OEk(3,"Loading..."),e.C$Y()()())}const Wc=M=>({"is-invalid":M});let rp=(()=>{class M{constructor(h,$,y,Ke,dt){this.route=h,this.formBuilder=$,this.api=y,this.router=Ke,this.toastService=dt,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe($=>{this.urlId=$.id?Number($.id):null}),this.initializeForm(),this.urlId&&this.getemployeeData();const h=localStorage.getItem("currentUser");if(h){const $=JSON.parse(h);this.company_id=$.id}}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[c.AQ.maxLength(45),c.AQ.required]],address:["",[c.AQ.maxLength(100),c.AQ.required]],dob:["",[c.AQ.required]],image:["",this.imageValidator()],emp_id:["",[c.AQ.required]],email:["",[c.AQ.required,c.AQ.email,c.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[c.AQ.required,c.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[c.AQ.required]],gender:["",[c.AQ.required]],state:["",[c.AQ.required]],city:["",[c.AQ.required]],zip_code:["",[c.AQ.required,c.AQ.maxLength(6)]],designation:["",[c.AQ.required]],joining_date:[]})}imageValidator(){return h=>this.urlId?null:c.AQ.required(h)}get f(){return this.formGroup.controls}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.setemployeeDetails(h.data[0])):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}setemployeeDetails(h){h&&(this.formGroup.patchValue({name:h.name,address:h.address,dob:h.dob,emp_id:h.employee_id,email:h.email,password:h.password,status:h.status,mobile:h.mobile,joining_date:h.joining_date,gender:h.gender,designation:h.designation,state:h.state,city:h.city,zip_code:h.zip_code}),this.employeeuploadedImage=h.image||"")}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.urlId?this.updateemployee(h):this.addemployee(h)}else this.formGroup.markAllAsTouched()}createFormData(){const h=new FormData;return h.append("company_id",this.company_id),h.append("name",this.f.name.value),h.append("mobile",this.f.mobile.value),h.append("email",this.f.email.value),h.append("address",this.f.address.value),h.append("dob",this.f.dob.value),h.append("employee_id",this.f.emp_id.value),h.append("status",this.f.status.value),h.append("joining_date",this.f.joining_date.value),h.append("gender",this.f.gender.value),h.append("designation",this.f.designation.value),h.append("state",this.f.state.value),h.append("city",this.f.city.value),h.append("zip_code",this.f.zip_code.value),this.employeeselectedImage&&h.append("image",this.employeeselectedImage),h}addemployee(h){this.api.post("employees",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}updateemployee(h){const $=this.urlId;console.log("update"),this.api.put("employees",$,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(h.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(h){this.toggleSpinner(!1)}employeeimageSelect(h){const $=h.target.files[0];$&&(this.employeeselectedImage=$,this.employeeselectedImagePreview=URL.createObjectURL($))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(c.im),e.GI1(Se.W),e.GI1(Ve.E5),e.GI1(we.SA))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-add-employee"]],decls:156,vars:38,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],["for","designation",1,"form-label"],["type","text","id","designation","formControlName","designation","placeholder","Enter Designation","value","designation",1,"form-control",3,"ngClass"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],["class","invalid-text",4,"ngIf"],[3,"value"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"form",1),e.qCj("ngSubmit",function(){return y.onSubmit()}),e.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),e.wR5(6,"img",5),e.C$Y(),e.I0R(7,"div",6)(8,"div",7)(9,"div",8),e.yuY(10,Qh,1,1)(11,Fp,1,1)(12,fh,1,0)(13,Yp,2,0,"div",9),e.I0R(14,"input",10,11),e.qCj("change",function(dt){return y.employeeimageSelect(dt)}),e.C$Y(),e.I0R(16,"div",12)(17,"label",13)(18,"span",14),e.wR5(19,"i",15),e.C$Y()()()()()()()(),e.I0R(20,"div",16)(21,"div",17)(22,"div",18)(23,"h6",19),e.OEk(24,"Personal Details"),e.C$Y()(),e.I0R(25,"div",20)(26,"div",21)(27,"div",2)(28,"div",22)(29,"div",23)(30,"label",24),e.OEk(31,"Empolyee Name "),e.I0R(32,"span",25),e.OEk(33,"*"),e.C$Y()(),e.wR5(34,"input",26),e.yuY(35,Md,2,0,"div",9)(36,ep,2,0,"div",9),e.C$Y()(),e.I0R(37,"div",22)(38,"div",23)(39,"label",27),e.OEk(40,"Employee Id "),e.I0R(41,"span",25),e.OEk(42,"*"),e.C$Y()(),e.wR5(43,"input",28),e.yuY(44,zs,2,0,"div",9),e.C$Y()(),e.I0R(45,"div",22)(46,"div",23)(47,"label",29),e.OEk(48,"Email "),e.I0R(49,"span",25),e.OEk(50,"*"),e.C$Y()(),e.wR5(51,"input",30),e.yuY(52,cd,2,0,"div",9)(53,mh,2,0,"div",9),e.C$Y()(),e.I0R(54,"div",22)(55,"div",23)(56,"label",31),e.OEk(57,"Contact Number "),e.I0R(58,"span",25),e.OEk(59,"*"),e.C$Y()(),e.wR5(60,"input",32),e.yuY(61,Mc,2,0,"div",9)(62,Ad,2,0,"div",9),e.C$Y()(),e.I0R(63,"div",22)(64,"div",23)(65,"label",33),e.OEk(66,"Date of Birth "),e.I0R(67,"span",25),e.OEk(68,"*"),e.C$Y()(),e.wR5(69,"input",34),e.yuY(70,nc,2,0,"div",9),e.C$Y()(),e.I0R(71,"div",22)(72,"div",23)(73,"label",35),e.OEk(74,"Joining Date"),e.C$Y(),e.wR5(75,"input",36),e.C$Y()(),e.I0R(76,"div",22)(77,"div",23)(78,"label",37),e.OEk(79,"Designation "),e.I0R(80,"span",25),e.OEk(81,"*"),e.C$Y()(),e.wR5(82,"input",38),e.yuY(83,tp,2,0,"div",9),e.C$Y()(),e.I0R(84,"div",22)(85,"div",23)(86,"label",39),e.OEk(87,"Gender "),e.I0R(88,"span",25),e.OEk(89,"*"),e.C$Y()(),e.I0R(90,"select",40)(91,"option",41),e.OEk(92,"Select Gender"),e.C$Y(),e.I0R(93,"option",42),e.OEk(94,"Male"),e.C$Y(),e.I0R(95,"option",43),e.OEk(96,"Female"),e.C$Y(),e.I0R(97,"option",44),e.OEk(98,"Other"),e.C$Y()(),e.yuY(99,ip,2,0,"div",9),e.C$Y()(),e.I0R(100,"div",45)(101,"div",23)(102,"label",46),e.OEk(103," Address "),e.I0R(104,"span",25),e.OEk(105,"*"),e.C$Y()(),e.wR5(106,"textarea",47),e.yuY(107,rc,2,0,"div",9)(108,gh,2,0,"div",9),e.C$Y()(),e.I0R(109,"div",48)(110,"div",23)(111,"label",49),e.OEk(112,"City "),e.I0R(113,"span",25),e.OEk(114,"*"),e.C$Y()(),e.wR5(115,"input",50),e.yuY(116,$l,2,0,"div",9),e.C$Y()(),e.I0R(117,"div",48)(118,"div",23)(119,"label",51),e.OEk(120,"Zip code "),e.I0R(121,"span",25),e.OEk(122,"*"),e.C$Y()(),e.wR5(123,"input",52),e.yuY(124,_h,3,2,"div",53),e.C$Y()(),e.I0R(125,"div",48)(126,"div",23)(127,"label",54),e.OEk(128,"State "),e.I0R(129,"span",25),e.OEk(130,"*"),e.C$Y()(),e.I0R(131,"select",55)(132,"option",41),e.OEk(133,"Select State"),e.C$Y(),e.yuY(134,jc,2,2,"option",56),e.C$Y(),e.yuY(135,Hl,2,0,"div",9),e.C$Y()(),e.I0R(136,"div",22)(137,"div",23)(138,"label",57),e.OEk(139,"Status "),e.I0R(140,"span",25),e.OEk(141,"*"),e.C$Y()(),e.I0R(142,"select",58)(143,"option",41),e.OEk(144,"Select Status"),e.C$Y(),e.I0R(145,"option",59),e.OEk(146,"Active"),e.C$Y(),e.I0R(147,"option",60),e.OEk(148,"Inactive"),e.C$Y()(),e.yuY(149,Uc,2,0,"div",9),e.C$Y()(),e.I0R(150,"div",61)(151,"div",62),e.yuY(152,nf,2,0,"button",63)(153,Tu,3,0),e.C$Y()()(),e.wR5(154,"div"),e.C$Y(),e.yuY(155,vh,4,0,"div",64),e.C$Y()()()()()),2&$&&(e.E7m("title",y.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",y.breadCrumbItems),e.yG2(),e.E7m("formGroup",y.formGroup),e.yG2(9),e.C0Y(10,y.employeeselectedImage?10:y.employeeuploadedImage?11:12),e.yG2(3),e.C0Y(13,y.f.image&&y.f.image.hasError("required")&&y.f.image.touched?13:-1),e.yG2(21),e.E7m("ngClass",y.f.name&&y.f.name.hasError("required")&&y.f.name.touched?"is-invalid":""),e.yG2(),e.C0Y(35,y.f.name&&y.f.name.hasError("required")&&y.f.name.touched?35:-1),e.yG2(),e.C0Y(36,y.f.name&&y.f.name.hasError("maxlength")&&y.f.name.touched?36:-1),e.yG2(7),e.E7m("ngClass",y.f.emp_id&&y.f.emp_id.hasError("required")&&y.f.emp_id.touched?"is-invalid":""),e.yG2(),e.C0Y(44,y.f.emp_id&&y.f.emp_id.hasError("required")&&y.f.emp_id.touched?44:-1),e.yG2(7),e.E7m("ngClass",y.f.email&&y.f.email.hasError("required")&&y.f.email.touched?"is-invalid":""),e.yG2(),e.C0Y(52,y.f.email&&y.f.email.hasError("required")&&y.f.email.touched?52:-1),e.yG2(),e.C0Y(53,y.f.email.hasError("pattern")?53:-1),e.yG2(7),e.E7m("ngClass",y.f.mobile&&y.f.mobile.hasError("required")&&y.f.mobile.touched?"is-invalid":""),e.yG2(),e.C0Y(61,y.f.mobile&&y.f.mobile.hasError("required")&&y.f.mobile.touched?61:-1),e.yG2(),e.C0Y(62,y.f.mobile.hasError("pattern")?62:-1),e.yG2(7),e.E7m("ngClass",y.f.dob&&y.f.dob.hasError("required")&&y.f.dob.touched?"is-invalid":""),e.yG2(),e.C0Y(70,y.f.dob&&y.f.dob.hasError("required")&&y.f.dob.touched?70:-1),e.yG2(12),e.E7m("ngClass",y.f.designation&&y.f.designation.hasError("required")&&y.f.designation.touched?"is-invalid":""),e.yG2(),e.C0Y(83,y.f.designation&&y.f.designation.hasError("required")&&y.f.designation.touched?83:-1),e.yG2(7),e.E7m("ngClass",y.f.gender&&y.f.gender.hasError("required")&&y.f.gender.touched?"is-invalid":""),e.yG2(9),e.C0Y(99,y.f.gender&&y.f.gender.hasError("required")&&y.f.gender.touched?99:-1),e.yG2(7),e.E7m("ngClass",e.S45(36,Wc,y.f.address&&y.f.address.errors&&y.f.address.touched)),e.yG2(),e.C0Y(107,y.f.address&&y.f.address.hasError("required")&&y.f.address.touched?107:-1),e.yG2(),e.C0Y(108,y.f.address&&y.f.address.hasError("maxlength")&&y.f.address.touched?108:-1),e.yG2(7),e.E7m("ngClass",y.f.city&&y.f.city.hasError("required")&&y.f.city.touched?"is-invalid":""),e.yG2(),e.C0Y(116,y.f.city&&y.f.city.hasError("required")&&y.f.city.touched?116:-1),e.yG2(7),e.E7m("ngClass",y.f.zip_code&&y.f.zip_code.hasError("required")&&y.f.zip_code.touched?"is-invalid":""),e.yG2(),e.E7m("ngIf",(null==y.f.zip_code?null:y.f.zip_code.touched)&&(null==y.f.zip_code?null:y.f.zip_code.errors)),e.yG2(7),e.E7m("ngClass",y.f.state&&y.f.state.hasError("required")&&y.f.state.touched?"is-invalid":""),e.yG2(3),e.E7m("ngForOf",y.states),e.yG2(),e.C0Y(135,y.f.state&&y.f.state.hasError("required")&&y.f.state.touched?135:-1),e.yG2(7),e.E7m("ngClass",y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(149,y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?149:-1),e.yG2(3),e.C0Y(152,y.saveButtonActive?152:153),e.yG2(3),e.C0Y(155,y.spinnerStatus?155:-1))},dependencies:[Te.QF,Te.ay,Te.u_,Mi.O,c.sz,c.wd,c.GO,c.ot,c.O4,c.GC,c.ue,c.u,c.uW,c.Wo],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}"]})}return M})();var jl=Et(4448),rf=Et(5657),Bp=Et(4680),sp=Et(7995),tu=Et(3304);function Iu(M,be){if(1&M&&(e.I0R(0,"div",14)(1,"p",15),e.OEk(2,"Check-In At"),e.C$Y(),e.wR5(3,"h5",23),e.C$Y()),2&M){const h=e.GaO();e.yG2(3),e.E7m("innerHTML",h.formatTime(null==h.checkIndetails?null:h.checkIndetails.check_in_time),e.E3n)}}function qc(M,be){if(1&M&&(e.I0R(0,"div",14)(1,"p",15),e.OEk(2,"Check-out At"),e.C$Y(),e.I0R(3,"h5",16),e.wR5(4,"span",24),e.C$Y()()),2&M){const h=e.GaO();e.yG2(4),e.E7m("innerHTML",h.formatTime(null==h.checkIndetails?null:h.checkIndetails.check_out_time),e.E3n)}}function op(M,be){if(1&M&&(e.I0R(0,"div",14)(1,"p",15),e.OEk(2,"Total Time"),e.C$Y(),e.I0R(3,"h5",16)(4,"span",25),e.OEk(5),e.C$Y()()()),2&M){const h=e.GaO();e.yG2(5),e.cNF(h.formattedTotalTime)}}function Dd(M,be){if(1&M&&(e.I0R(0,"div",14)(1,"p",15),e.OEk(2,"Total Distance"),e.C$Y(),e.I0R(3,"h5",16)(4,"span",25),e.OEk(5),e.C$Y()()()),2&M){const h=e.GaO();e.yG2(5),e.oRS("",h.totaldistanceToshow," km")}}const Gp=M=>({"selected-item":M});function ap(M,be){if(1&M){const h=e.KQA();e.I0R(0,"li",26),e.qCj("click",function(){const Ke=e.usT(h).$implicit,dt=e.GaO();return e.CGJ(dt.updateMarkerAndPath(Ke.end.longitude,Ke.end.latitude,Ke))}),e.I0R(1,"div",27)(2,"span",28),e.OEk(3),e.C$Y(),e.I0R(4,"button",29),e.wR5(5,"span",30),e.OEk(6),e.C$Y()(),e.I0R(7,"p",31),e.OEk(8),e.C$Y()()}if(2&M){const h=be.$implicit,$=e.GaO();e.E7m("ngClass",e.S45(5,Gp,$.selectedItem===h)),e.yG2(3),e.cNF(h.end.formattedTime),e.yG2(),e.E7m("ngClass",$.getBatteryClass(h.end.battery_status)),e.yG2(2),e.oRS(" ",h.end.battery_status," % "),e.yG2(2),e.cNF(h.end.address)}}function Np(M,be){1&M&&(e.I0R(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),e.wR5(4,"i",36),e.C$Y()(),e.I0R(5,"h5",37),e.OEk(6,"Sorry! No Result Found"),e.C$Y()()())}let v=(()=>{class M{constructor(h,$,y){this.route=h,this.api=$,this.cdr=y,this.urlId=null,this.dateChangeSubject=new rf.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[]}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail()),this.dateChangeSubject.pipe((0,Bp.o)(300)).subscribe(h=>{this.handleDateChange(h)})}onIntervalChange(){this.initializeMap()}onDateChange(h){this.dateChangeSubject.next(h)}handleDateChange(h){this.selectedDate=h,this.formattedDate=this.formatDate(h),this.getemployeeTimeline(),this.getCheckInDetail()}formatDate(h){return h?`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`:""}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(h=>{this.toggleSpinner(!1),h&&h.status?(this.checkIndetails=h.data[0],this.checkIndetails.check_in_time&&this.checkIndetails.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},h=>{this.toggleSpinner(!1),this.handleError(h.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(h=>{if(this.toggleSpinner(!1),h&&h.status&&h.data.length>0){this.employeeTimeline=h.data.map(Ke=>(Ke.formattedTime=this.formatTime(Ke.time),Ke)),this.initializeMap();let $=0;for(let Ke=1;Ke<this.employeeTimeline.length;Ke++)$+=this.calculateDistance(this.employeeTimeline[Ke-1].latitude,this.employeeTimeline[Ke-1].longitude,this.employeeTimeline[Ke].latitude,this.employeeTimeline[Ke].longitude);this.calculateTimeSpent(),this.totaldistanceToshow=$.toFixed(1)}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null,this.initializeDefaultMap()},h=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(h.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(h,$){const[y,Ke,dt]=h.split(":").map(Number),fs=[];let Wr=3600*y+60*Ke+dt;const yc=ro=>{const[Rc,wh,Ch]=ro.split(":").map(Number);return 3600*Rc+60*wh+Ch},Xc=yc(this.employeeTimeline[this.employeeTimeline.length-1].time),wo=this.employeeTimeline[0];for(fs.push({start:wo,end:wo});Wr<=Xc;){Wr+=60*$;const ro=this.employeeTimeline.find(Rc=>yc(Rc.time)>=Wr);if(!ro)break;{const Rc=fs[fs.length-1];(!Rc||Rc.end.id!==ro.id)&&fs.push({start:fs[fs.length-1].end,end:ro})}}const Zc=this.employeeTimeline[this.employeeTimeline.length-1];return(0===fs.length||fs[fs.length-1].end.id!==Zc.id)&&fs.push({start:fs.length>0?fs[fs.length-1].end:Zc,end:Zc}),this.intervalTimeCoordinates=fs,fs}calculateDistance(h,$,y,Ke){const ai=this.deg2rad(y-h),fs=this.deg2rad(Ke-$),Wr=Math.sin(ai/2)*Math.sin(ai/2)+Math.cos(this.deg2rad(h))*Math.cos(this.deg2rad(y))*Math.sin(fs/2)*Math.sin(fs/2);return 2*Math.atan2(Math.sqrt(Wr),Math.sqrt(1-Wr))*6371}deg2rad(h){return h*(Math.PI/180)}calculateTimeSpent(){const h={driving:0,cycling:0,walking:0,stationary:0};for(let $=1;$<this.employeeTimeline.length;$++){const y=this.employeeTimeline[$-1],Ke=this.employeeTimeline[$],dt=(new Date(Ke.time).getTime()-new Date(y.time).getTime())/1e3/60,fs=this.calculateDistance(y.latitude,y.longitude,Ke.latitude,Ke.longitude)/(dt/60);fs>25?h.driving+=dt:fs>15?h.cycling+=dt:fs>5?h.walking+=dt:h.stationary+=dt}return h}geocodeCoordinates(h,$){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${h},${$}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(Ke=>Ke.json()).then(Ke=>Ke.features[0].place_name).catch(Ke=>(console.error("Error fetching address:",Ke),""))}initializeMap(){this.map=new jl.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");const h=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),$=this.employeeTimeline.map(y=>this.geocodeCoordinates(y.longitude,y.latitude).then(Ke=>{y.address=Ke}).catch(Ke=>{console.error("Error fetching address:",Ke)}));Promise.all($).then(()=>{const y=this.employeeTimeline[0],Ke=this.employeeTimeline[this.employeeTimeline.length-1],dt=new jl.Popup({offset:25}).setHTML(`<h6>${y.formattedTime}</h6>\n                <p>Battery Percentage: ${y.battery_status}%</p>\n                <p>Address: ${y.address}</p>`),ai=new jl.Marker({color:"green"}).setLngLat([y.longitude,y.latitude]).setPopup(dt).addTo(this.map),fs=new jl.Popup({offset:25}).setHTML(`<h6>${Ke.formattedTime}</h6>\n                <p>Battery Percentage: ${Ke.battery_status}%</p>\n                <p>Address: ${Ke.address}</p>`),Wr=new jl.Marker({color:"red"}).setLngLat([Ke.longitude,Ke.latitude]).setPopup(fs).addTo(this.map);this.markers.push(ai,Wr),h.forEach((Oo,Xc)=>{if(!Oo.start||!Oo.end)return void console.error(`Segment at index ${Xc} is missing start or end coordinates.`);const wo=this.employeeTimeline.filter(ro=>{const Rc=this.getTimeInSeconds(ro.time),wh=this.getTimeInSeconds(Oo.start.time),Ch=this.getTimeInSeconds(Oo.end.time);return Rc>=wh&&Rc<=Ch}).map(ro=>[ro.longitude,ro.latitude]);(wo[0][0]!==Oo.start.longitude||wo[0][1]!==Oo.start.latitude)&&wo.unshift([Oo.start.longitude,Oo.start.latitude]),(wo[wo.length-1][0]!==Oo.end.longitude||wo[wo.length-1][1]!==Oo.end.latitude)&&wo.push([Oo.end.longitude,Oo.end.latitude]);const Zc=`path-${Xc}`;this.removeLayerIfExists(Zc),this.map.addLayer({id:Zc,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:wo}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":8}})});const yc=new jl.LngLatBounds;this.markers.forEach(Oo=>yc.extend(Oo.getLngLat())),this.map.fitBounds(yc,{padding:50})})})}getTimeInSeconds(h){const[$,y,Ke]=h.split(":").map(Number);return 3600*$+60*y+Ke}removeLayerIfExists(h){this.map.getLayer(h)&&this.map.removeLayer(h),this.map.getSource(h)&&this.map.removeSource(h)}initializeDefaultMap(){this.map=new jl.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13})}formatTime(h){const[$,y,Ke]=h.split(":");return`${+$%12||12}:${y} ${+$>=12?"PM":"AM"}`}handleError(h){this.toggleSpinner(!1)}updateMarkerAndPath(h,$,y){this.marker&&this.marker.remove(),this.marker=new jl.Marker({color:"#ffc703"}).setLngLat([h,$]).addTo(this.map);const Ke=new jl.Popup({offset:25}).setHTML(`<h6>${y.end.formattedTime}</h6>\n        <p>Battery Percentage: ${y.end.battery_status}%</p>\n        <p>Address: ${y.end.address}</p>`);this.marker.setPopup(Ke),this.selectedItem=y}getBatteryClass(h){return h>=75?"battery-high":h>=35?"battery-mid":"battery-low"}calculateTotalTime(h,$){const[y,Ke]=h.split(":").map(Number),[dt,ai]=$.split(":").map(Number),fs=new Date;fs.setHours(y,Ke,0);const Wr=new Date;Wr.setHours(dt,ai,0);const yc=Wr.getTime()-fs.getTime(),Oo=Math.floor(yc/6e4);return`${Math.floor(Oo/60)}h ${Oo%60}m`}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(Se.W),e.GI1(e.kD9))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},decls:37,vars:12,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","15"],["value","30"],["value","60"],[1,"p-3","user-chat-topbar","border-bottom","border-2"],[1,"row","align-items-center","flex-nowrap"],[1,"col-lg","col-3"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-lg col-3"],[1,"col-lg-4"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8"],["id","map",1,"match-parent"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],["id","noresult"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["class","activity-item pt-2",3,"ngClass"]],template:function($,y){1&$&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.iHE("ngModelChange",function(dt){return e.kNx(y.selectedDate,dt)||(y.selectedDate=dt),dt}),e.qCj("bsValueChange",function(dt){return y.onDateChange(dt)}),e.C$Y(),e.I0R(5,"div",5)(6,"label",6),e.wR5(7,"i",7),e.C$Y()()()(),e.I0R(8,"div",2)(9,"select",8),e.iHE("ngModelChange",function(dt){return e.kNx(y.selectedInterval,dt)||(y.selectedInterval=dt),dt}),e.qCj("change",function(){return y.onIntervalChange()}),e.I0R(10,"option",9),e.OEk(11,"15 Minutes"),e.C$Y(),e.I0R(12,"option",10),e.OEk(13,"30 Minutes"),e.C$Y(),e.I0R(14,"option",11),e.OEk(15,"1 Hour"),e.C$Y()()()()(),e.I0R(16,"div",12)(17,"div",13)(18,"div",14)(19,"p",15),e.OEk(20,"Date"),e.C$Y(),e.I0R(21,"h5",16)(22,"span",17),e.OEk(23),e.wVc(24,"date"),e.C$Y()()(),e.yuY(25,Iu,4,1,"div",18)(26,qc,5,1,"div",18)(27,op,6,1,"div",18)(28,Dd,6,1,"div",18),e.C$Y()(),e.I0R(29,"div",1)(30,"div",19)(31,"ul",20),e.c53(32,ap,9,7,"li",38,e.wJt,!1,Np,7,0,"div",32),e.C$Y()(),e.I0R(35,"div",21),e.wR5(36,"div",22),e.C$Y()()),2&$&&(e.yG2(4),e.E7m("bsConfig",y.bsConfig),e.OKB("ngModel",y.selectedDate),e.yG2(5),e.OKB("ngModel",y.selectedInterval),e.yG2(14),e.cNF(e.g7$(24,9,y.formattedDate,"dd/MMM/yyyy")),e.yG2(2),e.C0Y(25,null!=y.checkIndetails&&y.checkIndetails.check_in_time?25:-1),e.yG2(),e.C0Y(26,null!=y.checkIndetails&&y.checkIndetails.check_out_time?26:-1),e.yG2(),e.C0Y(27,null!=y.checkIndetails&&y.checkIndetails.check_in_time&&null!=y.checkIndetails&&y.checkIndetails.check_out_time?27:-1),e.yG2(),e.C0Y(28,y.totaldistanceToshow?28:-1),e.yG2(4),e.oho(y.intervalTimeCoordinates))},dependencies:[Te.QF,c.wd,c.GO,c.ot,c.GC,c.ue,c._G,sp.uM,tu.em,tu.U5,Te.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%;height:500px;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}"]})}return M})();function P(M,be){1&M&&(e.I0R(0,"div",30),e.OEk(1,"Password is required."),e.C$Y())}function k(M,be){1&M&&(e.I0R(0,"div",30),e.OEk(1,"Confirm Password is required."),e.C$Y())}function j(M,be){1&M&&(e.I0R(0,"div",30),e.OEk(1," Password and Confirm Password does not match. "),e.C$Y())}function ee(M,be){if(1&M&&(e.I0R(0,"div",18)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h5",34),e.OEk(5,"Password must contain:"),e.C$Y()(),e.I0R(6,"div")(7,"p",35),e.OEk(8," Minimum "),e.I0R(9,"b"),e.OEk(10,"8 characters"),e.C$Y()(),e.I0R(11,"p",36),e.OEk(12," At least "),e.I0R(13,"b"),e.OEk(14,"one lowercase"),e.C$Y(),e.OEk(15," letter (a-z) "),e.C$Y(),e.I0R(16,"p",37),e.OEk(17," At least "),e.I0R(18,"b"),e.OEk(19,"one uppercase"),e.C$Y(),e.OEk(20," letter (A-Z) "),e.C$Y(),e.I0R(21,"p",38),e.OEk(22," At least "),e.I0R(23,"b"),e.OEk(24,"one number"),e.C$Y(),e.OEk(25," (0-9) "),e.C$Y()()()()()),2&M){const h=e.GaO();e.yG2(7),e.E7m("ngClass",h.passwordValidations.length?"valid":"invalid"),e.yG2(4),e.E7m("ngClass",h.passwordValidations.lower?"valid":"invalid"),e.yG2(5),e.eAK("valid",h.passwordValidations.upper),e.E7m("ngClass",h.passwordValidations.upper?"valid":"invalid"),e.yG2(5),e.E7m("ngClass",h.passwordValidations.number?"valid":"invalid")}}function Me(M,be){if(1&M&&(e.I0R(0,"tr")(1,"td"),e.wR5(2,"i",39),e.OEk(3),e.C$Y(),e.I0R(4,"td"),e.OEk(5),e.C$Y(),e.I0R(6,"td"),e.OEk(7),e.wVc(8,"date"),e.C$Y(),e.I0R(9,"td"),e.OEk(10),e.C$Y(),e.I0R(11,"td")(12,"a",40),e.OEk(13,"Logout "),e.wR5(14,"i",41),e.C$Y()()()),2&M){const h=be.$implicit;e.yG2(3),e.oRS(" ",h.device," "),e.yG2(2),e.cNF(h.ip_address),e.yG2(2),e.cNF(e.g7$(8,4,h.date,"dd MMM , yyyy")),e.yG2(3),e.cNF(h.address)}}const zt=(M,be)=>({"mdi-eye-off-outline":M,"mdi-eye-outline":be});let qi=(()=>{class M{constructor(h,$,y,Ke){this.route=h,this.api=$,this.toastService=y,this.formBuilder=Ke,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnInit(){this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[c.AQ.required,c.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",c.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(h){const $=h.get("password")?.value,y=h.get("confirmPassword")?.value;return $===y?null:{mismatch:!0}}checkPasswordPattern(){const h=this.formGroup.get("password")?.value;this.passwordValidations.length=h.length>=8,this.passwordValidations.lower=/[a-z]/.test(h),this.passwordValidations.upper=/[A-Z]/.test(h),this.passwordValidations.number=/\d/.test(h)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe($=>{this.toggleSpinner(!1),$&&$.status?(this.loginDetails=$.data,this.loginDetails=$.data||[],this.loginDetailsList=$.data||[],this.updatePagination(),this.updateDisplayedItems()):this.loginDetails=[]},$=>{this.toggleSpinner(!1),this.handleError($.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.updateemployee(h)}else this.formGroup.markAllAsTouched()}createFormData(){const h=new FormData;return h.append("company_id",this.companyId),h.append("password",this.f.password.value),h}updateemployee(h){this.api.put("employees",this.urlId,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(h=>{const $=this.term.toLowerCase();return h.name.toLowerCase().includes($)||h.employee_id.toLowerCase().includes($)||h.status.toLowerCase().includes($)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}pageChanged(h){this.currentPage=h.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const h=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(h,this.endItem)}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Ve.gV),e.GI1(Se.W),e.GI1(we.SA),e.GI1(c.im))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-password-change"]],inputs:{companyId:"companyId"},decls:60,vars:19,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],[1,"ri-logout-box-r-line"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"],["href","javascript:void(0);",1,"icon-link","icon-link-hover"],[1,"bi","bi-box-arrow-right"]],template:function($,y){1&$&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return y.onSubmit()}),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e.OEk(5,"New Password*"),e.C$Y(),e.I0R(6,"div",5)(7,"input",6),e.qCj("input",function(){return y.checkPasswordPattern()}),e.C$Y(),e.I0R(8,"button",7),e.qCj("click",function(){return y.toggleFieldTextType1()}),e.wR5(9,"i",8),e.C$Y()(),e.yuY(10,P,2,0,"div",9),e.C$Y()(),e.I0R(11,"div",2)(12,"div",3)(13,"label",10),e.OEk(14,"Confirm Password*"),e.C$Y(),e.I0R(15,"div",5),e.wR5(16,"input",11),e.I0R(17,"button",7),e.qCj("click",function(){return y.toggleFieldTextType2()}),e.wR5(18,"i",8),e.C$Y()(),e.yuY(19,k,2,0,"div",9)(20,j,2,0,"div",9),e.C$Y()(),e.I0R(21,"div",12)(22,"div")(23,"button",13),e.OEk(24,"Change Password"),e.C$Y()()(),e.yuY(25,ee,26,6,"div",14),e.C$Y()(),e.I0R(26,"div",15)(27,"h5",16),e.OEk(28,"Login History"),e.C$Y()(),e.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),e.OEk(36,"Mobile"),e.C$Y(),e.I0R(37,"th",22),e.OEk(38,"IP Address"),e.C$Y(),e.I0R(39,"th",22),e.OEk(40,"Date"),e.C$Y(),e.I0R(41,"th",22),e.OEk(42,"Address"),e.C$Y(),e.I0R(43,"th",22),e.wR5(44,"i",23),e.C$Y()()(),e.I0R(45,"tbody"),e.c53(46,Me,15,7,"tr",null,e.wJt),e.C$Y()()(),e.I0R(48,"div",24)(49,"div",25)(50,"div",26),e.OEk(51," Showing "),e.I0R(52,"span",27),e.OEk(53),e.C$Y(),e.OEk(54," of "),e.I0R(55,"span",27),e.OEk(56),e.C$Y(),e.OEk(57," Results "),e.C$Y()(),e.I0R(58,"div",28)(59,"pagination",29),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()),2&$&&(e.E7m("formGroup",y.formGroup),e.yG2(7),e.E7m("type",y.fieldTextType1?"text":"password"),e.yG2(2),e.E7m("ngClass",e.IBC(13,zt,!y.fieldTextType1,y.fieldTextType1)),e.yG2(),e.C0Y(10,y.f.password&&y.f.password.hasError("required")&&y.f.password.touched?10:-1),e.yG2(6),e.E7m("type",y.fieldTextType2?"text":"password"),e.yG2(2),e.E7m("ngClass",e.IBC(16,zt,!y.fieldTextType2,y.fieldTextType2)),e.yG2(),e.C0Y(19,y.f.confirmPassword&&y.f.confirmPassword.hasError("required")&&y.f.confirmPassword.touched?19:-1),e.yG2(),e.C0Y(20,y.formGroup.hasError("mismatch")&&y.f.confirmPassword.value&&y.f.password.value?20:-1),e.yG2(5),e.C0Y(25,y.f.password&&y.f.password.hasError("pattern")?25:-1),e.yG2(21),e.oho(y.loginDetails),e.yG2(7),e.cNF(null==y.loginDetails?null:y.loginDetails.length),e.yG2(3),e.cNF(null==y.loginDetailsList?null:y.loginDetailsList.length),e.yG2(3),e.E7m("totalItems",null==y.loginDetailsList?null:y.loginDetailsList.length)("itemsPerPage",y.itemsPerPage))},dependencies:[Te.QF,c.sz,c.ot,c.ue,c.u,c.eJ,c.uW,c.Wo,We.im,Te.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return M})();var Rn=Et(1528);let ss=(()=>{class M{constructor(h,$){this.api=h,this.route=$,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.companyId&&this.getLiveLocation(),this.initializeMap()}formatDate(h){return h?`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`:""}toggleSpinner(h){this.spinnerStatus=h}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe($=>{this.toggleSpinner(!1),$&&$.status?(this.liveCoordinates=$.data,this.addMarkerToMap(this.liveCoordinates)):(this.liveCoordinates=null,this.handleError("Unexpected response format"))})}handleError(h){this.toggleSpinner(!1),console.error(h)}initializeMap(){jl.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.map=new jl.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5})}addMarkerToMap(h){var $=this;return(0,Rn.c)(function*(){if(!h)return;const y=[h.longitude,h.latitude];try{const Ke=yield $.geocodeCoordinates(h.longitude,h.latitude),dt=new jl.Popup({offset:25}).setText(`Address: ${Ke}\nMotion: ${h.motion}`),ai=document.createElement("div");ai.className="custom-marker",ai.style.backgroundImage=`url(${$.emp_image})`,ai.style.width="42px",ai.style.height="42px",ai.style.backgroundSize="100%",ai.style.borderRadius="50%",new jl.Marker(ai).setLngLat(y).setPopup(dt).addTo($.map).togglePopup(),$.map.flyTo({center:y,zoom:14})}catch(Ke){console.error("Error adding marker to map:",Ke)}})()}geocodeCoordinates(h,$){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${h},${$}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(Ke=>Ke.json()).then(Ke=>Ke.features[0].place_name).catch(Ke=>(console.error("Error fetching address:",Ke),"Unknown location"))}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Se.W),e.GI1(Ve.gV))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image"},decls:7,vars:0,consts:[[1,"card","py-3"],[1,"row"],[1,"col-4"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-lg","ms-auto"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12"],["id","mapId",1,"match-parent"]],template:function($,y){1&$&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.wR5(4,"i",4),e.C$Y()(),e.I0R(5,"div",5),e.wR5(6,"div",6),e.C$Y()()())},styles:["#mapId[_ngcontent-%COMP%]{width:100%!important;height:500px!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}"]})}return M})();function Ms(M,be){if(1&M&&e.wR5(0,"img",45),2&M){const h=e.GaO();e._6D("src",null==h.employeeDetail?null:h.employeeDetail.image,e.K6U)}}function Bo(M,be){1&M&&e.wR5(0,"img",46)}function Wa(M,be){if(1&M&&(e.I0R(0,"a",47)(1,"span",48),e.wR5(2,"i",49),e.C$Y()()),2&M){const h=e.GaO();e.CI5("href","tel:",null==h.employeeDetail?null:h.employeeDetail.mobile,"",e.K6U)}}function vc(M,be){if(1&M&&(e.I0R(0,"a",47)(1,"span",50),e.wR5(2,"i",51),e.C$Y()()),2&M){const h=e.GaO();e.CI5("href","mailto:",null==h.employeeDetail?null:h.employeeDetail.email,"",e.K6U)}}function yh(M,be){if(1&M&&e.wR5(0,"div",52),2&M){const h=e.GaO();e.E7m("innerHTML",h.formatTime(null==h.checkIndetails?null:h.checkIndetails.check_in_time),e.E3n)}}function iu(M,be){1&M&&(e.I0R(0,"div",53),e.OEk(1,"Not Checked In Yet"),e.C$Y())}function Ul(M,be){if(1&M&&e.wR5(0,"div",52),2&M){const h=e.GaO();e.E7m("innerHTML",h.formatTime(null==h.checkIndetails?null:h.checkIndetails.check_out_time),e.E3n)}}function sc(M,be){1&M&&(e.I0R(0,"div",53),e.OEk(1,"Not Checked Out Yet"),e.C$Y())}function Ou(M,be){if(1&M&&(e.I0R(0,"div",54),e.OEk(1),e.C$Y()),2&M){const h=e.GaO();e.yG2(),e.oRS(" ",h.formattedTotalTime," ")}}function lp(M,be){1&M&&e.OEk(0,"-")}function sf(M,be){if(1&M&&e.wR5(0,"app-password-change",41),2&M){const h=e.GaO();e.E7m("companyId",null==h.employeeDetail?null:h.employeeDetail.company_id)}}function of(M,be){if(1&M&&e.wR5(0,"app-timeline",41),2&M){const h=e.GaO();e.E7m("companyId",null==h.employeeDetail?null:h.employeeDetail.company_id)}}function Cf(M,be){if(1&M&&e.wR5(0,"app-live-location",44),2&M){const h=e.GaO();e.E7m("companyId",null==h.employeeDetail?null:h.employeeDetail.company_id)("emp_image",null==h.employeeDetail?null:h.employeeDetail.image)}}let Ef=(()=>{class M{constructor(h,$,y){this.formBuilder=h,this.route=$,this.api=y,this.formGroups=[],this.currentTab="personalDetails",this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={}}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(h=>{this.urlId=h.id?Number(h.id):null}),this.urlId&&this.getemployeeData()}formatDate(h){return h?`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`:""}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.employeeDetail=h.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},h=>{this.handleError(h.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(h=>{this.toggleSpinner(!1),h&&h.status?(this.checkIndetails=h.data[0],this.checkIndetails.check_in_time&&this.checkIndetails.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},h=>{this.toggleSpinner(!1),this.handleError(h.message||"An error occurred while fetching data")})}handleError(h){this.toggleSpinner(!1)}changeTab(h){this.currentTab=h}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const h=this.formBuilder.group(this.educationForm.value);this.formGroups.push(h)}deleteForm(h){this.formGroups.splice(h,1)}calculateTotalTime(h,$){const[y,Ke]=h.split(":").map(Number),[dt,ai]=$.split(":").map(Number),fs=new Date;fs.setHours(y,Ke,0);const Wr=new Date;Wr.setHours(dt,ai,0);const yc=Wr.getTime()-fs.getTime(),Oo=Math.floor(yc/6e4);return`${Math.floor(Oo/60)}h ${Oo%60}m`}formatTime(h){if(!h)return"Invalid time";const[$,y,Ke]=h.split(":");return`${+$%12||12}:${y} ${+$>=12?"PM":"AM"}`}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(c.im),e.GI1(Ve.gV),e.GI1(Se.W))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-employee-detail"]],decls:157,vars:42,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function($,y){1&$&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),e.wR5(4,"img",3)(5,"div"),e.C$Y(),e.I0R(6,"div",4)(7,"div",5)(8,"div",6),e.yuY(9,Ms,1,1,"img",7)(10,Bo,1,0),e.C$Y(),e.I0R(11,"div",8)(12,"h5"),e.OEk(13),e.C$Y(),e.I0R(14,"p",9),e.OEk(15),e.C$Y()(),e.I0R(16,"div",10),e.yuY(17,Wa,3,1,"a",11)(18,vc,3,1,"a",11),e.C$Y()()(),e.I0R(19,"div",12)(20,"div",13)(21,"h6",14),e.OEk(22,"Today Attendance"),e.C$Y()(),e.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),e.wR5(28,"i",19),e.OEk(29," Checkin Time "),e.C$Y(),e.yuY(30,yh,1,1,"div",20)(31,iu,2,0),e.C$Y()(),e.I0R(32,"li")(33,"div",17)(34,"div",18),e.wR5(35,"i",21),e.OEk(36," Checkout Time "),e.C$Y(),e.yuY(37,Ul,1,1,"div",20)(38,sc,2,0),e.C$Y()(),e.I0R(39,"li")(40,"div",17)(41,"div",18),e.wR5(42,"i",22),e.OEk(43," Total Time "),e.C$Y(),e.yuY(44,Ou,2,1,"div",23)(45,lp,1,0),e.C$Y()()()()()()(),e.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),e.qCj("click",function(){return y.changeTab("personalDetails")}),e.OEk(51," Personal Details "),e.C$Y()(),e.I0R(52,"li",27)(53,"a",29),e.qCj("click",function(){return y.changeTab("changePassword")}),e.OEk(54," Changes Password "),e.C$Y()(),e.I0R(55,"li",27)(56,"a",29),e.qCj("click",function(){return y.changeTab("timeline")}),e.OEk(57," Timeline "),e.C$Y()(),e.I0R(58,"li",27)(59,"a",29),e.qCj("click",function(){return y.changeTab("liveLocation")}),e.OEk(60," Live Location "),e.C$Y()()(),e.I0R(61,"div",30)(62,"a",31),e.wR5(63,"i",32),e.OEk(64," Edit Profile"),e.C$Y()()(),e.I0R(65,"div",33)(66,"div",34)(67,"div",35)(68,"div",33)(69,"div",13)(70,"h6",14),e.OEk(71,"Personal Details"),e.C$Y()(),e.I0R(72,"div",36)(73,"div",37)(74,"div",38)(75,"table",39)(76,"tbody")(77,"tr")(78,"th"),e.OEk(79,"Name"),e.C$Y(),e.I0R(80,"td"),e.OEk(81),e.C$Y()(),e.I0R(82,"tr")(83,"th"),e.OEk(84,"Gender"),e.C$Y(),e.I0R(85,"td"),e.OEk(86),e.C$Y()(),e.I0R(87,"tr")(88,"th"),e.OEk(89,"Designation"),e.C$Y(),e.I0R(90,"td"),e.OEk(91),e.C$Y()(),e.I0R(92,"tr")(93,"th"),e.OEk(94,"Employee id"),e.C$Y(),e.I0R(95,"td"),e.OEk(96),e.C$Y()(),e.I0R(97,"tr")(98,"th"),e.OEk(99,"Email"),e.C$Y(),e.I0R(100,"td"),e.OEk(101),e.C$Y()(),e.I0R(102,"tr")(103,"th"),e.OEk(104,"Mobile"),e.C$Y(),e.I0R(105,"td"),e.OEk(106),e.C$Y()(),e.I0R(107,"tr")(108,"th"),e.OEk(109,"Date of Birth"),e.C$Y(),e.I0R(110,"td"),e.OEk(111),e.wVc(112,"date"),e.C$Y()(),e.I0R(113,"tr")(114,"th"),e.OEk(115,"Joining date"),e.C$Y(),e.I0R(116,"td"),e.OEk(117),e.wVc(118,"date"),e.C$Y()(),e.I0R(119,"tr")(120,"th"),e.OEk(121,"Address"),e.C$Y(),e.I0R(122,"td"),e.OEk(123),e.C$Y()(),e.I0R(124,"tr")(125,"th"),e.OEk(126,"City"),e.C$Y(),e.I0R(127,"td"),e.OEk(128),e.C$Y()(),e.I0R(129,"tr")(130,"th"),e.OEk(131,"State"),e.C$Y(),e.I0R(132,"td"),e.OEk(133),e.C$Y()(),e.I0R(134,"tr")(135,"th"),e.OEk(136,"Zip code"),e.C$Y(),e.I0R(137,"td"),e.OEk(138),e.C$Y()()()()()()()()(),e.I0R(139,"div",40)(140,"div",13)(141,"h6",14),e.OEk(142,"Changes Password"),e.C$Y()(),e.I0R(143,"div",15),e.yuY(144,sf,1,1,"app-password-change",41),e.C$Y()(),e.I0R(145,"div",42)(146,"div",13)(147,"h6",14),e.OEk(148,"Timeline"),e.C$Y()(),e.I0R(149,"div",15),e.yuY(150,of,1,1,"app-timeline",41),e.C$Y()(),e.I0R(151,"div",43)(152,"div",13)(153,"h6",14),e.OEk(154,"Live Location"),e.C$Y()(),e.I0R(155,"div",15),e.yuY(156,Cf,1,2,"app-live-location",44),e.C$Y()()()()()()),2&$&&(e.yG2(9),e.C0Y(9,null!=y.employeeDetail&&y.employeeDetail.image?9:10),e.yG2(4),e.oRS(" ",null==y.employeeDetail?null:y.employeeDetail.name," "),e.yG2(2),e.cNF(null==y.employeeDetail?null:y.employeeDetail.designation),e.yG2(2),e.C0Y(17,null!=y.employeeDetail&&y.employeeDetail.mobile?17:-1),e.yG2(),e.C0Y(18,null!=y.employeeDetail&&y.employeeDetail.email?18:-1),e.yG2(12),e.C0Y(30,null!=y.checkIndetails&&y.checkIndetails.check_in_time?30:31),e.yG2(7),e.C0Y(37,null!=y.checkIndetails&&y.checkIndetails.check_out_time?37:38),e.yG2(7),e.C0Y(44,null!=y.checkIndetails&&y.checkIndetails.check_in_time&&null!=y.checkIndetails&&y.checkIndetails.check_out_time?44:45),e.yG2(6),e.eAK("active","personalDetails"===y.currentTab),e.yG2(3),e.eAK("active","changePassword"===y.currentTab),e.yG2(3),e.eAK("active","timeline"===y.currentTab),e.yG2(3),e.eAK("active","liveLocation"===y.currentTab),e.yG2(3),e.CI5("routerLink","/edit-employee/",y.urlId,""),e.yG2(5),e.E7m("hidden","personalDetails"!==y.currentTab),e.yG2(14),e.cNF(null==y.employeeDetail?null:y.employeeDetail.name),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.gender),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.designation),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.employee_id),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.email),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.mobile),e.yG2(5),e.oRS(" ",e.g7$(112,36,null==y.employeeDetail?null:y.employeeDetail.dob,"dd/MMM/yyyy")," "),e.yG2(6),e.oRS(" ",e.g7$(118,39,null==y.employeeDetail?null:y.employeeDetail.joining_date,"dd/MMM/yyyy")," "),e.yG2(6),e.cNF(null==y.employeeDetail?null:y.employeeDetail.address),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.city),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.state),e.yG2(5),e.cNF(null==y.employeeDetail?null:y.employeeDetail.zip_code),e.yG2(),e.E7m("hidden","changePassword"!==y.currentTab),e.yG2(5),e.C0Y(144,y.employeeDetail?144:-1),e.yG2(),e.E7m("hidden","timeline"!==y.currentTab),e.yG2(5),e.C0Y(150,y.employeeDetail?150:-1),e.yG2(),e.E7m("hidden","liveLocation"!==y.currentTab),e.yG2(5),e.C0Y(156,y.employeeDetail?156:-1))},dependencies:[Ve.ER,v,qi,ss,Te.y]})}return M})();var Rd=Et(5140);function cp(M,be){1&M&&(e.I0R(0,"ul",89)(1,"li")(2,"a",90),e.wR5(3,"i",91),e.OEk(4," View"),e.C$Y()(),e.I0R(5,"li")(6,"a",92),e.wR5(7,"i",93),e.OEk(8," Edit"),e.C$Y()(),e.I0R(9,"li")(10,"a",94),e.wR5(11,"i",95),e.OEk(12," Remove"),e.C$Y()()())}function af(M,be){if(1&M&&(e.I0R(0,"tr",70),e.wR5(1,"td"),e.I0R(2,"td",71)(3,"a",72),e.OEk(4,"#TB01"),e.C$Y()(),e.I0R(5,"td",73)(6,"div",74)(7,"div",75),e.wR5(8,"img",76),e.C$Y(),e.I0R(9,"div")(10,"h6",77)(11,"a",78),e.OEk(12),e.C$Y()()()()(),e.I0R(13,"td",79),e.OEk(14),e.C$Y(),e.I0R(15,"td",80),e.OEk(16),e.C$Y(),e.I0R(17,"td",81),e.OEk(18),e.C$Y(),e.I0R(19,"td",82),e.OEk(20),e.C$Y(),e.I0R(21,"td",83),e.OEk(22),e.C$Y(),e.I0R(23,"td",84),e.OEk(24),e.C$Y(),e.I0R(25,"td")(26,"div",85)(27,"button",86),e.wR5(28,"i",87),e.C$Y(),e.yuY(29,cp,13,0,"ul",88),e.C$Y()()()),2&M){const h=be.$implicit;e.CI5("id","p_",h._id,""),e.yG2(8),e._6D("src",h.image,e.K6U),e.yG2(4),e.cNF(h.name),e.yG2(2),e.cNF(h.mobile),e.yG2(2),e.cNF(h.email),e.yG2(2),e.cNF(h.designation),e.yG2(2),e.cNF(h.check_in_time),e.yG2(2),e.cNF(h.check_in_time),e.yG2(2),e.cNF(h.checkin_status)}}const bh=["showModal"],Mu=["deleteRecordModal"];function xh(M,be){if(1&M){const h=e.KQA();e.I0R(0,"ul",96)(1,"li")(2,"a",97),e.wR5(3,"i",98),e.OEk(4," View"),e.C$Y()(),e.I0R(5,"li")(6,"a",99),e.qCj("click",function(){e.usT(h);const y=e.GaO().$implicit,Ke=e.GaO();return e.CGJ(Ke.editList(y))}),e.wR5(7,"i",100),e.OEk(8," Edit"),e.C$Y()(),e.I0R(9,"li")(10,"a",101),e.qCj("click",function(){e.usT(h);const y=e.GaO().$implicit,Ke=e.GaO();return e.CGJ(Ke.removeItem(y.id))}),e.wR5(11,"i",102),e.OEk(12," Remove"),e.C$Y()()()}}const lf=(M,be)=>({"bg-info-subtle text-info":M,"bg-danger-subtle text-danger":be});function cf(M,be){if(1&M){const h=e.KQA();e.I0R(0,"tr",80)(1,"td")(2,"div",23)(3,"input",81),e.iHE("ngModelChange",function(y){const dt=e.usT(h).$implicit;return e.kNx(dt.states,y)||(dt.states=y),e.CGJ(y)}),e.qCj("change",function(y){e.usT(h);const Ke=e.GaO();return e.CGJ(Ke.onCheckboxChange(y))}),e.C$Y(),e.wR5(4,"label",82),e.C$Y()(),e.I0R(5,"td",83)(6,"a",84),e.OEk(7,"#TB01"),e.C$Y()(),e.I0R(8,"td",85),e.OEk(9),e.C$Y(),e.I0R(10,"td",86)(11,"div",87)(12,"input",88),e.qCj("change",function(y){const dt=e.usT(h).$implicit,ai=e.GaO();return e.CGJ(ai.setStatus(dt,y))}),e.C$Y(),e.I0R(13,"label",89)(14,"span",90),e.OEk(15),e.C$Y()()()(),e.I0R(16,"td",91),e.OEk(17),e.wVc(18,"date"),e.C$Y(),e.I0R(19,"td")(20,"div",92)(21,"button",93),e.wR5(22,"i",94),e.C$Y(),e.yuY(23,xh,13,0,"ul",95),e.C$Y()()()}if(2&M){const h=be.$implicit,$=be.$index;e.CI5("id","p_",h._id,""),e.yG2(3),e._6D("value",h._id),e.OKB("ngModel",h.states),e.yG2(6),e.oRS(" ",h.name," "),e.yG2(3),e.E7m("checked","active"===h.status)("id","customSwitchsizemd"+$),e.yG2(),e.E7m("for","customSwitchsizemd"+$),e.yG2(),e.E7m("ngClass",e.IBC(13,lf,"active"===h.status,"inactive"===h.status)),e.yG2(),e.oRS(" ",h.status," "),e.yG2(2),e.oRS(" ",e.g7$(18,10,h.created_at,"dd MMM, YYYY")," ")}}function Sf(M,be){1&M&&(e.I0R(0,"div",28)(1,"div",103)(2,"span",104),e.OEk(3,"Loading..."),e.C$Y()()())}function kf(M,be){1&M&&(e.I0R(0,"div",105),e.OEk(1,"Department name is required."),e.C$Y())}function Tf(M,be){1&M&&(e.I0R(0,"div",105),e.OEk(1," Department name must be at most 45 characters "),e.C$Y())}function If(M,be){1&M&&(e.I0R(0,"div",105),e.OEk(1,"Status is required."),e.C$Y())}const Of=[{path:"home",children:[{path:"company",component:Su},{path:"banner-list",component:vo},{path:"add-banner",component:ho},{path:"edit-banner/:id",component:ho}]},{path:"service",children:[{path:"",component:X},{path:"add-service",component:gn},{path:"layout-a/:id",component:Ho},{path:"layout-b/:id",component:Tn},{path:"add-layout-b-data/:id",component:Uo},{path:"edit-layout-b-data/:id/:dataId",component:Uo}]},{path:"about",component:_t},{path:"science",component:no},{path:"our-team",component:zn},{path:"add-testimonial",component:Ne},{path:"add-contact",component:kd},{path:"location",component:xn},{path:"products",loadChildren:()=>Et.e(56).then(Et.bind(Et,8056)).then(M=>M.ProductModule)},{path:"company",component:Su},{path:"add-company",component:eu},{path:"edit-company/:id",component:eu},{path:"employee",component:zp},{path:"add-employee",component:rp},{path:"edit-employee/:id",component:rp},{path:"employee-detail/:id",component:Ef},{path:"attendance-list",component:(()=>{class M{constructor(h){this.api=h,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Ecommerce"},{label:"Products",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate));const h=localStorage.getItem("currentUser");if(h){const $=JSON.parse(h);this.company_id=$.id}this.company_id&&this.getAttendance()}formatDate(h){return h?`${h.getFullYear()}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`:""}toggleSpinner(h){this.spinnerStatus=h}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe($=>{this.toggleSpinner(!1),$&&$.status&&(this.attendanceData=$.data||[],this.attendanceDataList=$.data||[])})}onSort(h){this.direction="asc"==this.direction?"desc":"asc";const $=[...this.attendanceData];$.sort((y,Ke)=>{const dt=this.compare(y[h],Ke[h]);return"asc"===this.direction?dt:-dt}),this.attendanceData=$}compare(h,$){return h<$?-1:h>$?1:0}pageChanged(h){const $=(h.page-1)*h.itemsPerPage;this.endItem=h.page*h.itemsPerPage,this.attendanceData=this.attendanceDataList.slice($,this.endItem)}filterdata(){this.attendanceData=this.term?this.attendanceDataList.filter(h=>h.name.toLowerCase().includes(this.term.toLowerCase())||h.mobile.toLowerCase().includes(this.term.toLowerCase())||h.email.toLowerCase().includes(this.term.toLowerCase())||h.employee_id.toLowerCase().includes(this.term.toLowerCase())):this.attendanceDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.attendanceData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Se.W))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-attendance-list"]],decls:129,vars:12,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-xxl","col-sm-6"],[1,"col-xxl-3","col-sm-6"],["id","idCategory",1,"form-control"],["value",""],["value","Appliances"],["value","Automotive Accessories"],["value","Electronics"],["value","Fashion"],["value","Furniture"],["value","Grocery"],["value","Headphones"],["value","Kids"],["value","Luggage"],["value","Sports"],["value","Watches"],[1,"col-xxl-2","col-sm-6"],["id","idDiscount",1,"form-control"],["value","all"],["value","50"],["value","40"],["value","30"],["value","20"],["value","10"],["value","0"],[1,"col-xxl-auto","col-sm-6"],["type","button",1,"btn","btn-secondary","w-md"],[1,"bi","bi-funnel","align-baseline","me-1"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["alt","",1,"img-fluid","d-block",3,"src"],[1,"mb-0"],["routerLink","/ecommerce/product-details",1,"text-reset","products"],[1,"discount"],[1,"category"],[1,"stock"],[1,"price"],[1,"orders"],[1,"published"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn"],[1,"ph-trash","align-middle","me-1"]],template:function($,y){1&$&&(e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"input",9),e.iHE("ngModelChange",function(dt){return e.kNx(y.term,dt)||(y.term=dt),dt}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(10,"i",10),e.C$Y()(),e.wR5(11,"div",11),e.I0R(12,"div",12)(13,"div")(14,"select",13)(15,"option",14),e.OEk(16,"Select Category"),e.C$Y(),e.I0R(17,"option",15),e.OEk(18,"Appliances"),e.C$Y(),e.I0R(19,"option",16),e.OEk(20," Automotive Accessories "),e.C$Y(),e.I0R(21,"option",17),e.OEk(22,"Electronics"),e.C$Y(),e.I0R(23,"option",18),e.OEk(24,"Fashion"),e.C$Y(),e.I0R(25,"option",19),e.OEk(26,"Furniture"),e.C$Y(),e.I0R(27,"option",20),e.OEk(28,"Grocery"),e.C$Y(),e.I0R(29,"option",21),e.OEk(30,"Headphones"),e.C$Y(),e.I0R(31,"option",22),e.OEk(32,"Kids"),e.C$Y(),e.I0R(33,"option",23),e.OEk(34,"Luggage"),e.C$Y(),e.I0R(35,"option",24),e.OEk(36,"Sports"),e.C$Y(),e.I0R(37,"option",25),e.OEk(38,"Watches"),e.C$Y()()()(),e.I0R(39,"div",26)(40,"div")(41,"select",27)(42,"option",28),e.OEk(43,"Select All Discount"),e.C$Y(),e.I0R(44,"option",29),e.OEk(45,"50% or more"),e.C$Y(),e.I0R(46,"option",30),e.OEk(47,"40% or more"),e.C$Y(),e.I0R(48,"option",31),e.OEk(49,"30% or more"),e.C$Y(),e.I0R(50,"option",32),e.OEk(51,"20% or more"),e.C$Y(),e.I0R(52,"option",33),e.OEk(53,"10% or more"),e.C$Y(),e.I0R(54,"option",34),e.OEk(55,"Less than 10%"),e.C$Y()()()(),e.I0R(56,"div",35)(57,"button",36),e.wR5(58,"i",37),e.OEk(59," Filters "),e.C$Y()()()()()()(),e.I0R(60,"div",2)(61,"div",3)(62,"div",4)(63,"div",38)(64,"div",39)(65,"h5",40),e.OEk(66," Employees "),e.I0R(67,"span",41),e.OEk(68),e.C$Y()(),e.I0R(69,"p",42),e.OEk(70," Showing Result of Date: "),e.I0R(71,"span",43),e.OEk(72),e.wVc(73,"date"),e.C$Y()()(),e.I0R(74,"div",44)(75,"div",45)(76,"button",46),e.wR5(77,"i",47),e.C$Y(),e.I0R(78,"button",48),e.wR5(79,"i",49),e.OEk(80," Add Product "),e.C$Y()()()(),e.I0R(81,"div",5)(82,"div",50)(83,"table",51)(84,"thead",52)(85,"tr")(86,"th")(87,"div",53),e.wR5(88,"label",54),e.C$Y()(),e.I0R(89,"th",55),e.qCj("click",function(){return y.onSort("name")}),e.OEk(90," Name "),e.C$Y(),e.I0R(91,"th",55),e.qCj("click",function(){return y.onSort("mobile")}),e.OEk(92," Mobile "),e.C$Y(),e.I0R(93,"th",55),e.qCj("click",function(){return y.onSort("email")}),e.OEk(94," Email "),e.C$Y(),e.I0R(95,"th",55),e.qCj("click",function(){return y.onSort("designation")}),e.OEk(96," Designation "),e.C$Y(),e.I0R(97,"th",55),e.qCj("click",function(){return y.onSort("check_in_time")}),e.OEk(98," Check-in Time "),e.C$Y(),e.I0R(99,"th",55),e.qCj("click",function(){return y.onSort("check_out_time")}),e.OEk(100," Check-out Time "),e.C$Y(),e.I0R(101,"th",55),e.qCj("click",function(){return y.onSort("checkin_status")}),e.OEk(102," Attendance Status "),e.C$Y(),e.I0R(103,"th"),e.OEk(104,"Action"),e.C$Y()()(),e.I0R(105,"tbody",56),e.c53(106,af,30,9,"tr",70,e.wJt),e.C$Y()()(),e.I0R(108,"div",57)(109,"div",58)(110,"div",59)(111,"div",60),e.wR5(112,"i",61),e.C$Y()(),e.I0R(113,"h5",62),e.OEk(114,"Sorry! No Result Found"),e.C$Y(),e.I0R(115,"p",63),e.OEk(116),e.C$Y()()(),e.I0R(117,"div",64)(118,"div",65)(119,"div",66),e.OEk(120," Showing "),e.I0R(121,"span",67),e.OEk(122),e.C$Y(),e.OEk(123," of "),e.I0R(124,"span",67),e.OEk(125),e.C$Y(),e.OEk(126," Results "),e.C$Y()(),e.I0R(127,"div",68)(128,"pagination",69),e.qCj("pageChanged",function(dt){return y.pageChanged(dt)}),e.C$Y()()()()()()()()),2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(9),e.OKB("ngModel",y.term),e.yG2(59),e.cNF(null==y.attendanceData?null:y.attendanceData.length),e.yG2(4),e.oRS(" ",e.g7$(73,9,y.formattedDate,"dd MMM , yyyy"),""),e.yG2(34),e.oho(y.attendanceData),e.yG2(10),e.oRS(" We've searched ",null==y.attendanceDataList?null:y.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),e.yG2(6),e.cNF(null==y.attendanceData?null:y.attendanceData.length),e.yG2(3),e.cNF(null==y.attendanceDataList?null:y.attendanceDataList.length),e.yG2(3),e.E7m("totalItems",null==y.attendanceDataList?null:y.attendanceDataList.length)("itemsPerPage",10))},dependencies:[Mi.O,Ve.ER,Rd.uo,Rd.M3,Rd.mY,c.wd,c.GO,c.ot,c.ue,c._G,We.im,Te.y]})}return M})()},{path:"department-list",component:(()=>{class M{constructor(h,$,y){this.api=h,this.toastService=$,this.formBuilder=y,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.id=null,this.checkedValGet=[],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Ecommerce"},{label:"Products",active:!0}],this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[c.AQ.maxLength(45),c.AQ.required]],status:["",[c.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(h){this.spinnerStatus=h,this.saveButtonActive=!h,this.submitted=h}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid("department").subscribe(h=>{h&&h.status?(this.toggleSpinner(!1),this.departmentData=h.data||[],this.departmentDataList=h.data||[]):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},h=>{this.toggleSpinner(!1),this.handleError(h.message||"An error occurred while fetching data")})}setStatus(h,$){const dt={name:h.name,status:$.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",h.id,dt).subscribe(ai=>this.handleResponse(ai),ai=>this.handleError(ai))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const h=this.createFormData();this.id?this.update(h):this.add(h)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(h){this.api.post("department",h).subscribe($=>this.handleResponse($),$=>this.handleError($))}update(h){this.api.put("department",this.id,h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(h){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=h.id,this.formGroup.patchValue({name:h.name,status:h.status})}removeItem(h){this.deleteId=h,this.deleteRecordModal?.show()}deleteData(h){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),h&&this.api.deleteWithId("department",h).subscribe(y=>this.handleResponse(y),y=>this.handleError(y));const $=this.checkedValGet;$&&$.length>0&&this.api.post("department-delete-multiple",{ids:$}).subscribe(y=>this.handleResponse(y),y=>this.handleError(y))}handleResponse(h){this.toggleSpinner(!1),!0===h.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(h.message)}handleError(h){this.toggleSpinner(!1)}onCheckboxChange(h){for(var $=[],Ke=0;Ke<this.departmentData.length;Ke++)1==this.departmentData[Ke].states&&$.push(this.departmentData[Ke].id);this.checkedValGet=$,$.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(h){this.departmentData=this.departmentData.map(dt=>({...dt,states:h.target.checked}));for(var $=[],Ke=0;Ke<this.departmentData.length;Ke++)1==this.departmentData[Ke].states&&$.push(this.departmentData[Ke].id);this.checkedValGet=$,$.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(h){this.direction="asc"==this.direction?"desc":"asc";const $=[...this.departmentData];$.sort((y,Ke)=>{const dt=this.compare(y[h],Ke[h]);return"asc"===this.direction?dt:-dt}),this.departmentData=$}compare(h,$){return h<$?-1:h>$?1:0}pageChanged(h){const $=(h.page-1)*h.itemsPerPage;this.endItem=h.page*h.itemsPerPage,this.departmentData=this.departmentDataList.slice($,this.endItem)}filterdata(){this.departmentData=this.term?this.departmentDataList.filter(h=>h.title.toLowerCase().includes(this.term.toLowerCase())):this.departmentDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const h=document.querySelector(".noresult"),$=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(h.style.display="block",$.classList.add("d-none")):(h.style.display="none",$.classList.remove("d-none"))}static#e=this.\u0275fac=function($){return new($||M)(e.GI1(Se.W),e.GI1(we.SA),e.GI1(c.im))};static#t=this.\u0275cmp=e.In1({type:M,selectors:[["app-department-list"]],viewQuery:function($,y){if(1&$&&(e.CC$(bh,5),e.CC$(Mu,5)),2&$){let Ke;e.wto(Ke=e.Gqi())&&(y.showModal=Ke.first),e.wto(Ke=e.Gqi())&&(y.deleteRecordModal=Ke.first)}},decls:123,vars:15,consts:[["title","Department",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-primary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function($,y){if(1&$){const Ke=e.KQA();e.wR5(0,"app-breadcrumbs",0),e.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e.OEk(8," Departments "),e.I0R(9,"span",8),e.OEk(10),e.C$Y()()(),e.I0R(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"input",13),e.iHE("ngModelChange",function(ai){return e.kNx(y.term,ai)||(y.term=ai),ai}),e.qCj("keyup",function(){return y.filterdata()}),e.C$Y(),e.wR5(16,"i",14),e.C$Y()(),e.I0R(17,"button",15),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(104);return e.CGJ(ai.show())}),e.wR5(18,"i",16),e.C$Y(),e.I0R(19,"button",17),e.qCj("click",function(){return y.onAdd()}),e.wR5(20,"i",18),e.OEk(21," Add Department "),e.C$Y()()()(),e.I0R(22,"div",19)(23,"div",20)(24,"table",21)(25,"thead",22)(26,"tr")(27,"th")(28,"div",23)(29,"input",24),e.iHE("ngModelChange",function(ai){return e.kNx(y.masterSelected,ai)||(y.masterSelected=ai),ai}),e.qCj("change",function(ai){return y.checkUncheckAll(ai)}),e.C$Y(),e.wR5(30,"label",25),e.C$Y()(),e.I0R(31,"th",26),e.qCj("click",function(){return y.onSort("name")}),e.OEk(32," Department Name "),e.C$Y(),e.I0R(33,"th",26),e.qCj("click",function(){return y.onSort("status")}),e.OEk(34," Status "),e.C$Y(),e.I0R(35,"th",26),e.qCj("click",function(){return y.onSort("created_at")}),e.OEk(36," Created At "),e.C$Y(),e.I0R(37,"th"),e.OEk(38,"Action"),e.C$Y()()(),e.I0R(39,"tbody",27),e.c53(40,cf,24,16,"tr",80,e.wJt),e.C$Y(),e.yuY(42,Sf,4,0,"div",28),e.C$Y()(),e.I0R(43,"div",29)(44,"div",30)(45,"div",31)(46,"div",32),e.wR5(47,"i",33),e.C$Y()(),e.I0R(48,"h5",34),e.OEk(49,"Sorry! No Result Found"),e.C$Y(),e.I0R(50,"p",35),e.OEk(51),e.C$Y()()(),e.I0R(52,"div",36)(53,"div",37)(54,"div",38),e.OEk(55," Showing "),e.I0R(56,"span",39),e.OEk(57),e.C$Y(),e.OEk(58," of "),e.I0R(59,"span",39),e.OEk(60),e.C$Y(),e.OEk(61," Results "),e.C$Y()(),e.I0R(62,"div",40)(63,"pagination",41),e.qCj("pageChanged",function(ai){return y.pageChanged(ai)}),e.C$Y()()()()()()()(),e.I0R(64,"div",42,43),e.qCj("hidden.bs.modal",function(){return y.resetForm()}),e.I0R(66,"div",44)(67,"div",45)(68,"div",46)(69,"h5",47),e.OEk(70,"Add Department"),e.C$Y(),e.I0R(71,"button",48),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(65);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(72,"form",49),e.qCj("ngSubmit",function(){return y.onSubmit()}),e.I0R(73,"div",50),e.wR5(74,"div",51),e.I0R(75,"div",52)(76,"label",53),e.OEk(77,"Department Name "),e.I0R(78,"span",54),e.OEk(79,"*"),e.C$Y()(),e.wR5(80,"input",55),e.yuY(81,kf,2,0,"div",56)(82,Tf,2,0,"div",56),e.C$Y(),e.I0R(83,"div",52)(84,"label",57),e.OEk(85,"Status "),e.I0R(86,"span",54),e.OEk(87,"*"),e.C$Y()(),e.I0R(88,"select",58)(89,"option",59),e.OEk(90,"Select Status"),e.C$Y(),e.I0R(91,"option",60),e.OEk(92,"Active"),e.C$Y(),e.I0R(93,"option",61),e.OEk(94,"Inactive"),e.C$Y()(),e.yuY(95,If,2,0,"div",56),e.C$Y()(),e.I0R(96,"div",62)(97,"div",63)(98,"button",64),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(65);return e.CGJ(ai.hide())}),e.wR5(99,"i",65),e.OEk(100," Close "),e.C$Y(),e.I0R(101,"button",66),e.OEk(102," Add "),e.C$Y()()()()()()(),e.I0R(103,"div",67,68)(105,"div",44)(106,"div",45)(107,"div",69)(108,"button",70),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(104);return e.CGJ(ai.hide())}),e.C$Y()(),e.I0R(109,"div",71)(110,"div",72)(111,"div",54),e.wR5(112,"i",73),e.C$Y(),e.I0R(113,"div",74)(114,"h3",75),e.OEk(115,"Are you sure ?"),e.C$Y(),e.I0R(116,"p",76),e.OEk(117," Are you sure you want to remove this record ? "),e.C$Y()()(),e.I0R(118,"div",77)(119,"button",78),e.qCj("click",function(){e.usT(Ke);const ai=e.Gew(104);return e.CGJ(ai.hide())}),e.OEk(120," Close "),e.C$Y(),e.I0R(121,"button",79),e.qCj("click",function(){return y.deleteData(y.deleteId)}),e.OEk(122," Yes, Delete It! "),e.C$Y()()()()()()}2&$&&(e.E7m("breadcrumbItems",y.breadCrumbItems),e.yG2(10),e.cNF(null==y.departmentData?null:y.departmentData.length),e.yG2(5),e.OKB("ngModel",y.term),e.yG2(14),e.OKB("ngModel",y.masterSelected),e.yG2(11),e.oho(y.departmentData),e.yG2(2),e.C0Y(42,y.spinnerStatus?42:-1),e.yG2(9),e.oRS(" We've searched ",y.departmentDataList.length," Department We did not find any Department for you search. "),e.yG2(6),e.cNF(null==y.departmentData?null:y.departmentData.length),e.yG2(3),e.cNF(null==y.departmentDataList?null:y.departmentDataList.length),e.yG2(3),e.E7m("totalItems",null==y.departmentDataList?null:y.departmentDataList.length)("itemsPerPage",10),e.yG2(9),e.E7m("formGroup",y.formGroup),e.yG2(9),e.C0Y(81,y.f.name&&y.f.name.hasError("required")&&y.f.name.touched?81:-1),e.yG2(),e.C0Y(82,y.f.name&&y.f.name.hasError("maxlength")&&y.f.name.touched?82:-1),e.yG2(6),e.E7m("ngClass",y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?"is-invalid":""),e.yG2(7),e.C0Y(95,y.f.status&&y.f.status.hasError("required")&&y.f.status.touched?95:-1))},dependencies:[Te.QF,Mi.O,Ve.ER,Rd.uo,Rd.M3,Rd.mY,c.sz,c.wd,c.GO,c.ot,c.SU,c.GC,c.ue,c.u,c._G,c.uW,c.Wo,We.im,ut.uK,Te.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return M})()}];let dp=(()=>{class M{static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275mod=e.a4G({type:M});static#i=this.\u0275inj=e.s3X({imports:[Ve.qQ.forChild(Of),Ve.qQ]})}return M})();var Mf=Et(9280),df=Et(8612),uf=Et(3768),Vp=Et(4884),Af=Et(1972),$p=Et(8088),nu=Et(1876),hf=Et(8096),Au=Et(2508),pf=Et(7432),Df=Et(2296),Ta=Et(8987),Dc=Et(3952),Hp=Et(9884);let up=(()=>{class M{static#e=this.\u0275fac=function($){return new($||M)};static#t=this.\u0275mod=e.a4G({type:M});static#i=this.\u0275inj=e.s3X({imports:[Te.MD,Mf.k,dp,Rd.Uf.forRoot(),c.y,c.sl,We.rO.forRoot(),ut.f8.forRoot(),He.C.forRoot(),nu.or,uf.S,sp.as.forRoot(),Au.G,Af.m,Df.cH.forRoot(),Vp.gb,$p.GG,hf.k,et.Fd,Q.kV,tu.SO.forRoot(),Ta.iU.forRoot(),pf.Ar,Dc.RR.forRoot(),df.oP,Hp.c1.forRoot()]})}return M})()},968:(ms,lr,Et)=>{"use strict";Et.r(lr),Et.d(lr,{PagesModule:()=>Se});var e=Et(1368),Mi=Et(2308),He=Et(4496);const c=[{path:"",loadChildren:()=>Promise.resolve().then(Et.bind(Et,3528)).then(Le=>Le.CustomPagesModule)},{path:"pages",loadChildren:()=>Et.e(228).then(Et.bind(Et,4848)).then(Le=>Le.ExtrapagesModule)}];let Z=(()=>{class Le{static#e=this.\u0275fac=function(We){return new(We||Le)};static#t=this.\u0275mod=He.a4G({type:Le});static#i=this.\u0275inj=He.s3X({imports:[Mi.qQ.forChild(c),Mi.qQ]})}return Le})();var Be=Et(9280),we=Et(3528);let Se=(()=>{class Le{static#e=this.\u0275fac=function(We){return new(We||Le)};static#t=this.\u0275mod=He.a4G({type:Le});static#i=this.\u0275inj=He.s3X({imports:[e.MD,Z,Be.k,we.CustomPagesModule]})}return Le})()},6708:(ms,lr,Et)=>{"use strict";Et.d(lr,{O:()=>He});var e=Et(4496);function Mi(c,Z){if(1&c&&(e.I0R(0,"li",6),e.OEk(1),e.C$Y()),2&c){const Be=Z.$implicit;e.yG2(),e.cNF(Be.label)}}let He=(()=>{class c{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(we){return new(we||c)};static#t=this.\u0275cmp=e.In1({type:c,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(we,Se){1&we&&(e.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),e.OEk(4),e.C$Y(),e.I0R(5,"div",4)(6,"ol",5),e.c53(7,Mi,2,1,"li",7,e.wJt),e.C$Y()()()()()),2&we&&(e.yG2(4),e.cNF(Se.title),e.yG2(3),e.oho(Se.breadcrumbItems))}})}return c})()},9280:(ms,lr,Et)=>{"use strict";Et.d(lr,{k:()=>He});var e=Et(1368),Mi=Et(4496);let He=(()=>{class c{static#e=this.\u0275fac=function(we){return new(we||c)};static#t=this.\u0275mod=Mi.a4G({type:c});static#i=this.\u0275inj=Mi.s3X({imports:[e.MD]})}return c})()},2164:(ms,lr,Et)=>{"use strict";var e;function Mi(pe,i){var r=Object.keys(pe);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(pe);i&&(d=d.filter(function(g){return Object.getOwnPropertyDescriptor(pe,g).enumerable})),r.push.apply(r,d)}return r}function He(pe){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?Mi(Object(r),!0).forEach(function(d){Se(pe,d,r[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach(function(d){Object.defineProperty(pe,d,Object.getOwnPropertyDescriptor(r,d))})}return pe}function c(pe){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(pe)}function Z(pe,i){if(!(pe instanceof i))throw new TypeError("Cannot call a class as a function")}function Be(pe,i){for(var r=0;r<i.length;r++){var d=i[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(pe,d.key,d)}}function we(pe,i,r){return i&&Be(pe.prototype,i),r&&Be(pe,r),pe}function Se(pe,i,r){return i in pe?Object.defineProperty(pe,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):pe[i]=r,pe}function Le(pe,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(i&&i.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),i&&Ve(pe,i)}function Te(pe){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(pe)}function Ve(pe,i){return(Ve=Object.setPrototypeOf||function(r,d){return r.__proto__=d,r})(pe,i)}function We(pe){if(void 0===pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe}function ut(pe){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,d=Te(pe);if(i){var g=Te(this).constructor;r=Reflect.construct(d,arguments,g)}else r=d.apply(this,arguments);return function(x,w){if(w&&("object"==typeof w||"function"==typeof w))return w;if(void 0!==w)throw new TypeError("Derived constructors may only return object or undefined");return We(x)}(this,r)}}function vt(pe,i){return function(r){if(Array.isArray(r))return r}(pe)||function(r,d){var g=null==r?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(null!=g){var x,w,I=[],R=!0,Y=!1;try{for(g=g.call(r);!(R=(x=g.next()).done)&&(I.push(x.value),!d||I.length!==d);R=!0);}catch(W){Y=!0,w=W}finally{try{R||null==g.return||g.return()}finally{if(Y)throw w}}return I}}(pe,i)||ze(pe,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(pe){return function(i){if(Array.isArray(i))return ct(i)}(pe)||function(i){if(typeof Symbol<"u"&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(pe)||ze(pe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(pe,i){if(pe){if("string"==typeof pe)return ct(pe,i);var r=Object.prototype.toString.call(pe).slice(8,-1);return"Object"===r&&pe.constructor&&(r=pe.constructor.name),"Map"===r||"Set"===r?Array.from(pe):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(pe,i):void 0}}function ct(pe,i){(null==i||i>pe.length)&&(i=pe.length);for(var r=0,d=new Array(i);r<i;r++)d[r]=pe[r];return d}function qt(pe,i){var r=typeof Symbol<"u"&&pe[Symbol.iterator]||pe["@@iterator"];if(!r){if(Array.isArray(pe)||(r=ze(pe))||i&&pe&&"number"==typeof pe.length){r&&(pe=r);var d=0,g=function(){};return{s:g,n:function(){return d>=pe.length?{done:!0}:{done:!1,value:pe[d++]}},e:function(R){throw R},f:g}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,w=!0,I=!1;return{s:function(){r=r.call(pe)},n:function(){var R=r.next();return w=R.done,R},e:function(R){I=!0,x=R},f:function(){try{w||null==r.return||r.return()}finally{if(I)throw x}}}}var Je=function(){function pe(){Z(this,pe)}return we(pe,[{key:"shadeRGBColor",value:function(i,r){var d=r.split(","),g=i<0?0:255,x=i<0?-1*i:i,w=parseInt(d[0].slice(4),10),I=parseInt(d[1],10),R=parseInt(d[2],10);return"rgb("+(Math.round((g-w)*x)+w)+","+(Math.round((g-I)*x)+I)+","+(Math.round((g-R)*x)+R)+")"}},{key:"shadeHexColor",value:function(i,r){var d=parseInt(r.slice(1),16),g=i<0?0:255,x=i<0?-1*i:i,w=d>>16,I=d>>8&255,R=255&d;return"#"+(16777216+65536*(Math.round((g-w)*x)+w)+256*(Math.round((g-I)*x)+I)+(Math.round((g-R)*x)+R)).toString(16).slice(1)}},{key:"shadeColor",value:function(i,r){return pe.isColorHex(r)?this.shadeHexColor(i,r):this.shadeRGBColor(i,r)}}],[{key:"bind",value:function(i,r){return function(){return i.apply(r,arguments)}}},{key:"isObject",value:function(i){return i&&"object"===c(i)&&!Array.isArray(i)&&null!=i}},{key:"is",value:function(i,r){return Object.prototype.toString.call(r)==="[object "+i+"]"}},{key:"listToArray",value:function(i){var r,d=[];for(r=0;r<i.length;r++)d[r]=i[r];return d}},{key:"extend",value:function(i,r){var d=this;"function"!=typeof Object.assign&&(Object.assign=function(x){if(null==x)throw new TypeError("Cannot convert undefined or null to object");for(var w=Object(x),I=1;I<arguments.length;I++){var R=arguments[I];if(null!=R)for(var Y in R)R.hasOwnProperty(Y)&&(w[Y]=R[Y])}return w});var g=Object.assign({},i);return this.isObject(i)&&this.isObject(r)&&Object.keys(r).forEach(function(x){d.isObject(r[x])&&x in i?g[x]=d.extend(i[x],r[x]):Object.assign(g,Se({},x,r[x]))}),g}},{key:"extendArray",value:function(i,r){var d=[];return i.map(function(g){d.push(pe.extend(r,g))}),d}},{key:"monthMod",value:function(i){return i%12}},{key:"clone",value:function(i){if(pe.is("Array",i)){for(var r=[],d=0;d<i.length;d++)r[d]=this.clone(i[d]);return r}if(pe.is("Null",i))return null;if(pe.is("Date",i))return i;if("object"===c(i)){var g={};for(var x in i)i.hasOwnProperty(x)&&(g[x]=this.clone(i[x]));return g}return i}},{key:"log10",value:function(i){return Math.log(i)/Math.LN10}},{key:"roundToBase10",value:function(i){return Math.pow(10,Math.floor(Math.log10(i)))}},{key:"roundToBase",value:function(i,r){return Math.pow(r,Math.floor(Math.log(i)/Math.log(r)))}},{key:"parseNumber",value:function(i){return null===i?i:parseFloat(i)}},{key:"stripNumber",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(i)?i:parseFloat(i.toPrecision(r))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(i){var r=String(i).split(/[eE]/);if(1===r.length)return r[0];var d="",g=i<0?"-":"",x=r[0].replace(".",""),w=Number(r[1])+1;if(w<0){for(d=g+"0.";w++;)d+="0";return d+x.replace(/^-/,"")}for(w-=x.length;w--;)d+="0";return x+d}},{key:"getDimensions",value:function(i){var r=getComputedStyle(i,null),d=i.clientHeight,g=i.clientWidth;return d-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),[g-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),d]}},{key:"getBoundingClientRect",value:function(i){var r=i.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:i.clientWidth,height:i.clientHeight,x:r.left,y:r.top}}},{key:"getLargestStringFromArr",value:function(i){return i.reduce(function(r,d){return Array.isArray(d)&&(d=d.reduce(function(g,x){return g.length>x.length?g:x})),r.length>d.length?r:d},0)}},{key:"hexToRgba",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==i.substring(0,1)&&(i="#999999");var d=i.replace("#","");d=d.match(new RegExp("(.{"+d.length/3+"})","g"));for(var g=0;g<d.length;g++)d[g]=parseInt(1===d[g].length?d[g]+d[g]:d[g],16);return void 0!==r&&d.push(r),"rgba("+d.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(i){return parseFloat(i.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(i)}},{key:"getPolygonPos",value:function(i,r){for(var d=[],g=2*Math.PI/r,x=0;x<r;x++){var w={};w.x=i*Math.sin(x*g),w.y=-i*Math.cos(x*g),d.push(w)}return d}},{key:"polarToCartesian",value:function(i,r,d,g){var x=(g-90)*Math.PI/180;return{x:i+d*Math.cos(x),y:r+d*Math.sin(x)}}},{key:"escapeString",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return i.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,r)}},{key:"negToZero",value:function(i){return i<0?0:i}},{key:"moveIndexInArray",value:function(i,r,d){if(d>=i.length)for(var g=d-i.length+1;g--;)i.push(void 0);return i.splice(d,0,i.splice(r,1)[0]),i}},{key:"extractNumber",value:function(i){return parseFloat(i.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(i,r){for(;(i=i.parentElement)&&!i.classList.contains(r););return i}},{key:"setELstyles",value:function(i,r){for(var d in r)r.hasOwnProperty(d)&&(i.style.key=r[d])}},{key:"isNumber",value:function(i){return!isNaN(i)&&parseFloat(Number(i))===i&&!isNaN(parseInt(i,10))}},{key:"isFloat",value:function(i){return Number(i)===i&&i%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var i=window.navigator.userAgent,r=i.indexOf("MSIE ");if(r>0)return parseInt(i.substring(r+5,i.indexOf(".",r)),10);if(i.indexOf("Trident/")>0){var d=i.indexOf("rv:");return parseInt(i.substring(d+3,i.indexOf(".",d)),10)}var g=i.indexOf("Edge/");return g>0&&parseInt(i.substring(g+5,i.indexOf(".",g)),10)}},{key:"getGCD",value:function(i,r){var g=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(i,r))));for(i=Math.round(Math.abs(i)*g),r=Math.round(Math.abs(r)*g);r;){var x=r;r=i%r,i=x}return i/g}},{key:"getPrimeFactors",value:function(i){for(var r=[],d=2;i>=2;)i%d==0?(r.push(d),i/=d):d++;return r}},{key:"mod",value:function(i,r){var g=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(i,r))));return(i=Math.round(Math.abs(i)*g))%(r=Math.round(Math.abs(r)*g))/g}}]),pe}(),Jt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.setEasingFunctions()}return we(pe,[{key:"setEasingFunctions",value:function(){var i;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":i="-";break;case"easein":i="<";break;case"easeout":i=">";break;case"easeinout":default:i="<>";break;case"swing":i=function(r){var d=1.70158;return(r-=1)*r*((d+1)*r+d)+1};break;case"bounce":i=function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375};break;case"elastic":i=function(r){return r===!!r?r:Math.pow(2,-10*r)*Math.sin((r-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=i}}},{key:"animateLine",value:function(i,r,d,g){i.attr(r).animate(g).attr(d)}},{key:"animateMarker",value:function(i,r,d,g,x,w){r||(r=0),i.attr({r,width:r,height:r}).animate(g,x).attr({r:d,width:d.width,height:d.height}).afterAll(function(){w()})}},{key:"animateCircle",value:function(i,r,d,g,x){i.attr({r:r.r,cx:r.cx,cy:r.cy}).animate(g,x).attr({r:d.r,cx:d.cx,cy:d.cy})}},{key:"animateRect",value:function(i,r,d,g,x){i.attr(r).animate(g).attr(d).afterAll(function(){return x()})}},{key:"animatePathsGradually",value:function(i){var W=this.w,X=0;W.config.chart.animations.animateGradually.enabled&&(X=W.config.chart.animations.animateGradually.delay),W.config.chart.animations.dynamicAnimation.enabled&&W.globals.dataChanged&&"bar"!==W.config.chart.type&&(X=0),this.morphSVG(i.el,i.realIndex,i.j,"line"!==W.config.chart.type||W.globals.comboCharts?i.fill:"stroke",i.pathFrom,i.pathTo,i.speed,i.delay*X)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(i){var r=i.el;r.classList.remove("apexcharts-element-hidden"),r.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(i){var r=this.w;r.globals.animationEnded||(r.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof r.config.chart.events.animationEnd&&r.config.chart.events.animationEnd(this.ctx,{el:i,w:r}))}},{key:"morphSVG",value:function(i,r,d,g,x,w,I,R){var Y=this,W=this.w;x||(x=i.attr("pathFrom")),w||(w=i.attr("pathTo"));var X=function(Q){return"radar"===W.config.chart.type&&(I=1),"M 0 ".concat(W.globals.gridHeight)};(!x||x.indexOf("undefined")>-1||x.indexOf("NaN")>-1)&&(x=X()),(!w||w.indexOf("undefined")>-1||w.indexOf("NaN")>-1)&&(w=X()),W.globals.shouldAnimate||(I=1),i.plot(x).animate(1,W.globals.easing,R).plot(x).animate(I,W.globals.easing,R).plot(w).afterAll(function(){Je.isNumber(d)?d===W.globals.series[W.globals.maxValsInArrayIndex].length-2&&W.globals.shouldAnimate&&Y.animationCompleted(i):"none"!==g&&W.globals.shouldAnimate&&(!W.globals.comboCharts&&r===W.globals.series.length-1||W.globals.comboCharts)&&Y.animationCompleted(i),Y.showDelayedElements()})}}]),pe}(),yi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"getDefaultFilter",value:function(i,r){var d=this.w;i.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==d.config.states.normal.filter?this.applyFilter(i,r,d.config.states.normal.filter.type,d.config.states.normal.filter.value):d.config.chart.dropShadow.enabled&&this.dropShadow(i,d.config.chart.dropShadow,r)}},{key:"addNormalFilter",value:function(i,r){var d=this.w;d.config.chart.dropShadow.enabled&&!i.node.classList.contains("apexcharts-marker")&&this.dropShadow(i,d.config.chart.dropShadow,r)}},{key:"addLightenFilter",value:function(i,r,d){var g=this,x=this.w,w=d.intensity;i.unfilter(!0),new window.SVG.Filter,i.filter(function(I){var R=x.config.chart.dropShadow;(R.enabled?g.addShadow(I,r,R):I).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:w}})}),i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)}},{key:"addDarkenFilter",value:function(i,r,d){var g=this,x=this.w,w=d.intensity;i.unfilter(!0),new window.SVG.Filter,i.filter(function(I){var R=x.config.chart.dropShadow;(R.enabled?g.addShadow(I,r,R):I).componentTransfer({rgb:{type:"linear",slope:w}})}),i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)}},{key:"applyFilter",value:function(i,r,d){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(d){case"none":this.addNormalFilter(i,r);break;case"lighten":this.addLightenFilter(i,r,{intensity:g});break;case"darken":this.addDarkenFilter(i,r,{intensity:g})}}},{key:"addShadow",value:function(i,r,d){var g,x=this.w,w=d.blur,I=d.top,R=d.left,Y=d.color,W=d.opacity;if((null===(g=x.config.chart.dropShadow.enabledOnSeries)||void 0===g?void 0:g.length)>0&&-1===x.config.chart.dropShadow.enabledOnSeries.indexOf(r))return i;var X=i.flood(Array.isArray(Y)?Y[r]:Y,W).composite(i.sourceAlpha,"in").offset(R,I).gaussianBlur(w).merge(i.source);return i.blend(i.source,X)}},{key:"dropShadow",value:function(i,r){var d,g,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,w=r.top,I=r.left,R=r.blur,Y=r.color,W=r.opacity,X=r.noUserSpaceOnUse,Q=this.w;return i.unfilter(!0),Je.isIE()&&"radialBar"===Q.config.chart.type||(null===(d=Q.config.chart.dropShadow.enabledOnSeries)||void 0===d?void 0:d.length)>0&&-1===(null===(g=Q.config.chart.dropShadow.enabledOnSeries)||void 0===g?void 0:g.indexOf(x))||(Y=Array.isArray(Y)?Y[x]:Y,i.filter(function(ce){var me;me=Je.isSafari()||Je.isFirefox()||Je.isIE()?ce.flood(Y,W).composite(ce.sourceAlpha,"in").offset(I,w).gaussianBlur(R):ce.flood(Y,W).composite(ce.sourceAlpha,"in").offset(I,w).gaussianBlur(R).merge(ce.source),ce.blend(ce.source,me)}),X||i.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(i.filterer.node)),i}},{key:"setSelectionFilter",value:function(i,r,d){var g=this.w;if(void 0!==g.globals.selectedDataPoints[r]&&g.globals.selectedDataPoints[r].indexOf(d)>-1){i.node.setAttribute("selected",!0);var x=g.config.states.active.filter;"none"!==x&&this.applyFilter(i,r,x.type,x.value)}}},{key:"_scaleFilterSize",value:function(i){!function(r){for(var d in r)r.hasOwnProperty(d)&&i.setAttribute(d,r[d])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),pe}(),rt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"roundPathCorners",value:function(i,r){function d(Fe,ht,yt){var ii=ht.x-Fe.x,hi=ht.y-Fe.y,xi=Math.sqrt(ii*ii+hi*hi);return g(Fe,ht,Math.min(1,yt/xi))}function g(Fe,ht,yt){return{x:Fe.x+(ht.x-Fe.x)*yt,y:Fe.y+(ht.y-Fe.y)*yt}}function x(Fe,ht){Fe.length>2&&(Fe[Fe.length-2]=ht.x,Fe[Fe.length-1]=ht.y)}function w(Fe){return{x:parseFloat(Fe[Fe.length-2]),y:parseFloat(Fe[Fe.length-1])}}i.indexOf("NaN")>-1&&(i="");var I=i.split(/[,\s]/).reduce(function(Fe,ht){var yt=ht.match("([a-zA-Z])(.+)");return yt?(Fe.push(yt[1]),Fe.push(yt[2])):Fe.push(ht),Fe},[]).reduce(function(Fe,ht){return parseFloat(ht)==ht&&Fe.length?Fe[Fe.length-1].push(ht):Fe.push([ht]),Fe},[]),R=[];if(I.length>1){var Y=w(I[0]),W=null;"Z"==I[I.length-1][0]&&I[0].length>2&&(I[I.length-1]=W=["L",Y.x,Y.y]),R.push(I[0]);for(var X=1;X<I.length;X++){var Q=R[R.length-1],ce=I[X],me=ce==W?I[1]:I[X+1];if(me&&Q&&Q.length>2&&"L"==ce[0]&&me.length>2&&"L"==me[0]){var Ee,De,Ce=w(Q),Re=w(ce),G=w(me);Ee=d(Re,Ce,r),De=d(Re,G,r),x(ce,Ee),ce.origPoint=Re,R.push(ce);var re=g(Ee,Re,.5),te=g(Re,De,.5),oe=["C",re.x,re.y,te.x,te.y,De.x,De.y];oe.origPoint=Re,R.push(oe)}else R.push(ce)}if(W){var ye=w(R[R.length-1]);R.push(["Z"]),x(R[0],ye)}}else R=I;return R.reduce(function(Fe,ht){return Fe+ht.join(" ")+" "},"")}},{key:"drawLine",value:function(i,r,d,g){var x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:i,y1:r,x2:d,y2:g,stroke:x,"stroke-dasharray":w,"stroke-width":I,"stroke-linecap":R})}},{key:"drawRect",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,Y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,W=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,X=this.w.globals.dom.Paper.rect();return X.attr({x:i,y:r,width:d>0?d:0,height:g>0?g:0,rx:x,ry:x,opacity:I,"stroke-width":null!==R?R:0,stroke:null!==Y?Y:"none","stroke-dasharray":W}),X.node.setAttribute("fill",w),X}},{key:"drawPolygon",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(i).attr({fill:g,stroke:r,"stroke-width":d})}},{key:"drawCircle",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i<0&&(i=0);var d=this.w.globals.dom.Paper.circle(2*i);return null!==r&&d.attr(r),d}},{key:"drawPath",value:function(i){var r=i.d,d=void 0===r?"":r,g=i.stroke,x=void 0===g?"#a8a8a8":g,w=i.strokeWidth,I=void 0===w?1:w,R=i.fill,Y=i.fillOpacity,W=void 0===Y?1:Y,X=i.strokeOpacity,Q=void 0===X?1:X,ce=i.classes,me=i.strokeLinecap,Ee=void 0===me?null:me,De=i.strokeDashArray,Ce=void 0===De?0:De,Re=this.w;return null===Ee&&(Ee=Re.config.stroke.lineCap),(d.indexOf("undefined")>-1||d.indexOf("NaN")>-1)&&(d="M 0 ".concat(Re.globals.gridHeight)),Re.globals.dom.Paper.path(d).attr({fill:R,"fill-opacity":W,stroke:x,"stroke-opacity":Q,"stroke-linecap":Ee,"stroke-width":I,"stroke-dasharray":Ce,class:ce})}},{key:"group",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.w.globals.dom.Paper.group();return null!==i&&r.attr(i),r}},{key:"move",value:function(i,r){return["M",i,r].join(" ")}},{key:"line",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=null;return null===d?g=[" L",i,r].join(" "):"H"===d?g=[" H",i].join(" "):"V"===d&&(g=[" V",r].join(" ")),g}},{key:"curve",value:function(i,r,d,g,x,w){return["C",i,r,d,g,x,w].join(" ")}},{key:"quadraticCurve",value:function(i,r,d,g){return["Q",i,r,d,g].join(" ")}},{key:"arc",value:function(i,r,d,g,x,w,I){var R="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(R="a"),[R,i,r,d,g,x,w,I].join(" ")}},{key:"renderPaths",value:function(i){var r,d=i.j,g=i.realIndex,x=i.pathFrom,w=i.pathTo,I=i.stroke,R=i.strokeWidth,Y=i.strokeLinecap,W=i.fill,X=i.animationDelay,Q=i.initialSpeed,ce=i.dataChangeSpeed,me=i.className,Ee=i.shouldClipToGrid,De=void 0===Ee||Ee,Ce=i.bindEventsOnPaths,Re=void 0===Ce||Ce,G=i.drawShadow,re=void 0===G||G,te=this.w,oe=new yi(this.ctx),ye=new Jt(this.ctx),Fe=this.w.config.chart.animations.enabled,ht=Fe&&this.w.config.chart.animations.dynamicAnimation.enabled,yt=!!(Fe&&!te.globals.resized||ht&&te.globals.dataChanged&&te.globals.shouldAnimate);yt?r=x:(r=w,te.globals.animationEnded=!0);var hi,ii=te.config.stroke.dashArray;hi=Array.isArray(ii)?ii[g]:te.config.stroke.dashArray;var xi=this.drawPath({d:r,stroke:I,strokeWidth:R,fill:W,fillOpacity:1,classes:me,strokeLinecap:Y,strokeDashArray:hi});xi.attr("index",g),De&&xi.attr({"clip-path":"url(#gridRectMask".concat(te.globals.cuid,")")}),"none"!==te.config.states.normal.filter.type?oe.getDefaultFilter(xi,g):te.config.chart.dropShadow.enabled&&re&&oe.dropShadow(xi,te.config.chart.dropShadow,g),Re&&(xi.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,xi)),xi.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,xi)),xi.node.addEventListener("mousedown",this.pathMouseDown.bind(this,xi))),xi.attr({pathTo:w,pathFrom:x});var nn={el:xi,j:d,realIndex:g,pathFrom:x,pathTo:w,fill:W,strokeWidth:R,delay:X};return!Fe||te.globals.resized||te.globals.dataChanged?!te.globals.resized&&te.globals.dataChanged||ye.showDelayedElements():ye.animatePathsGradually(He(He({},nn),{},{speed:Q})),te.globals.dataChanged&&ht&&yt&&ye.animatePathsGradually(He(He({},nn),{},{speed:ce})),xi}},{key:"drawPattern",value:function(i,r,d){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(r,d,function(w){"horizontalLines"===i?w.line(0,0,d,0).stroke({color:g,width:x+1}):"verticalLines"===i?w.line(0,0,0,r).stroke({color:g,width:x+1}):"slantedLines"===i?w.line(0,0,r,d).stroke({color:g,width:x}):"squares"===i?w.rect(r,d).fill("none").stroke({color:g,width:x}):"circles"===i&&w.circle(r).fill("none").stroke({color:g,width:x})})}},{key:"drawGradient",value:function(i,r,d,g,x){var w,I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,W=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,X=this.w;r.length<9&&0===r.indexOf("#")&&(r=Je.hexToRgba(r,g)),d.length<9&&0===d.indexOf("#")&&(d=Je.hexToRgba(d,x));var Q=0,ce=1,me=1,Ee=null;null!==R&&(Q=void 0!==R[0]?R[0]/100:0,ce=void 0!==R[1]?R[1]/100:1,me=void 0!==R[2]?R[2]/100:1,Ee=void 0!==R[3]?R[3]/100:null);var De=!("donut"!==X.config.chart.type&&"pie"!==X.config.chart.type&&"polarArea"!==X.config.chart.type&&"bubble"!==X.config.chart.type);return w=X.globals.dom.Paper.gradient(De?"radial":"linear",null===Y||0===Y.length?function(G){G.at(Q,r,g),G.at(ce,d,x),G.at(me,d,x),null!==Ee&&G.at(Ee,r,g)}:function(G){(Array.isArray(Y[W])?Y[W]:Y).forEach(function(re){G.at(re.offset/100,re.color,re.opacity)})}),De?w.attr("bubble"!==X.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:X.globals.gridWidth/2,cy:X.globals.gridHeight/2,r:I}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===i?w.from(0,0).to(0,1):"diagonal"===i?w.from(0,0).to(1,1):"horizontal"===i?w.from(0,1).to(1,1):"diagonal2"===i&&w.from(1,0).to(0,1),w}},{key:"getTextBasedOnMaxWidth",value:function(i){var r=i.text,d=i.maxWidth,w=this.getTextRects(r,i.fontSize,i.fontFamily),R=Math.floor(d/(w.width/r.length));return d<w.width?r.slice(0,R-3)+"...":r}},{key:"drawText",value:function(i){var r=this,d=i.x,g=i.y,x=i.text,w=i.textAnchor,I=i.fontSize,R=i.fontFamily,Y=i.fontWeight,W=i.foreColor,X=i.opacity,Q=i.maxWidth,ce=i.cssClass,me=void 0===ce?"":ce,Ee=i.isPlainText,De=void 0===Ee||Ee,Ce=i.dominantBaseline,Re=void 0===Ce?"auto":Ce,G=this.w;void 0===x&&(x="");var re=x;w||(w="start"),W&&W.length||(W=G.config.chart.foreColor),Y=Y||"regular";var te,oe={maxWidth:Q,fontSize:I=I||"11px",fontFamily:R=R||G.config.chart.fontFamily};return Array.isArray(x)?te=G.globals.dom.Paper.text(function(ye){for(var Fe=0;Fe<x.length;Fe++)re=x[Fe],Q&&(re=r.getTextBasedOnMaxWidth(He({text:x[Fe]},oe))),0===Fe?ye.tspan(re):ye.tspan(re).newLine()}):(Q&&(re=this.getTextBasedOnMaxWidth(He({text:x},oe))),te=De?G.globals.dom.Paper.plain(x):G.globals.dom.Paper.text(function(ye){return ye.tspan(re)})),te.attr({x:d,y:g,"text-anchor":w,"dominant-baseline":Re,"font-size":I,"font-family":R,"font-weight":Y,fill:W,class:"apexcharts-text "+me}),te.node.style.fontFamily=R,te.node.style.opacity=X,te}},{key:"createGroupWithAttributes",value:function(i,r,d,g){var x=this.group();return d.forEach(function(w){return x.add(w)}),x.attr({class:g.class?g.class:"",cy:r,cx:i}),x}},{key:"drawPlus",value:function(i,r,d,g){var x=d/2,w=this.drawLine(i,r-x,i,r+x,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap),I=this.drawLine(i-x,r,i+x,r,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap);return this.createGroupWithAttributes(i,r,[w,I],g)}},{key:"drawX",value:function(i,r,d,g){var x=d/2,w=this.drawLine(i-x,r-x,i+x,r+x,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap),I=this.drawLine(i-x,r+x,i+x,r-x,g.pointStrokeColor,g.pointStrokeDashArray,g.pointStrokeWidth,g.pointStrokeLineCap);return this.createGroupWithAttributes(i,r,[w,I],g)}},{key:"drawMarker",value:function(i,r,d){i=i||0;var g=d.pSize||0,x=null;if("X"===d?.shape||"x"===d?.shape)x=this.drawX(i,r,g,d);else if("plus"===d?.shape||"+"===d?.shape)x=this.drawPlus(i,r,g,d);else if("square"===d.shape||"rect"===d.shape){var w=void 0===d.pRadius?g/2:d.pRadius;null!==r&&g||(g=0,w=0);var I=1.2*g+w,R=this.drawRect(I,I,I,I,w);R.attr({x:i-I/2,y:r-I/2,cx:i,cy:r,class:d.class?d.class:"",fill:d.pointFillColor,"fill-opacity":d.pointFillOpacity?d.pointFillOpacity:1,stroke:d.pointStrokeColor,"stroke-width":d.pointStrokeWidth?d.pointStrokeWidth:0,"stroke-opacity":d.pointStrokeOpacity?d.pointStrokeOpacity:1}),x=R}else"circle"!==d.shape&&d.shape||(Je.isNumber(r)||(g=0,r=0),x=this.drawCircle(g,{cx:i,cy:r,class:d.class?d.class:"",stroke:d.pointStrokeColor,fill:d.pointFillColor,"fill-opacity":d.pointFillOpacity?d.pointFillOpacity:1,"stroke-width":d.pointStrokeWidth?d.pointStrokeWidth:0,"stroke-opacity":d.pointStrokeOpacity?d.pointStrokeOpacity:1}));return x}},{key:"pathMouseEnter",value:function(i,r){var d=this.w,g=new yi(this.ctx),x=parseInt(i.node.getAttribute("index"),10),w=parseInt(i.node.getAttribute("j"),10);if("function"==typeof d.config.chart.events.dataPointMouseEnter&&d.config.chart.events.dataPointMouseEnter(r,this.ctx,{seriesIndex:x,dataPointIndex:w,w:d}),this.ctx.events.fireEvent("dataPointMouseEnter",[r,this.ctx,{seriesIndex:x,dataPointIndex:w,w:d}]),("none"===d.config.states.active.filter.type||"true"!==i.node.getAttribute("selected"))&&"none"!==d.config.states.hover.filter.type&&!d.globals.isTouchDevice){var I=d.config.states.hover.filter;g.applyFilter(i,x,I.type,I.value)}}},{key:"pathMouseLeave",value:function(i,r){var d=this.w,g=new yi(this.ctx),x=parseInt(i.node.getAttribute("index"),10),w=parseInt(i.node.getAttribute("j"),10);"function"==typeof d.config.chart.events.dataPointMouseLeave&&d.config.chart.events.dataPointMouseLeave(r,this.ctx,{seriesIndex:x,dataPointIndex:w,w:d}),this.ctx.events.fireEvent("dataPointMouseLeave",[r,this.ctx,{seriesIndex:x,dataPointIndex:w,w:d}]),"none"!==d.config.states.active.filter.type&&"true"===i.node.getAttribute("selected")||"none"!==d.config.states.hover.filter.type&&g.getDefaultFilter(i,x)}},{key:"pathMouseDown",value:function(i,r){var d=this.w,g=new yi(this.ctx),x=parseInt(i.node.getAttribute("index"),10),w=parseInt(i.node.getAttribute("j"),10),I="false";if("true"===i.node.getAttribute("selected")){if(i.node.setAttribute("selected","false"),d.globals.selectedDataPoints[x].indexOf(w)>-1){var R=d.globals.selectedDataPoints[x].indexOf(w);d.globals.selectedDataPoints[x].splice(R,1)}}else{if(!d.config.states.active.allowMultipleDataPointsSelection&&d.globals.selectedDataPoints.length>0){d.globals.selectedDataPoints=[];var Y=d.globals.dom.Paper.select(".apexcharts-series path").members,W=d.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,X=function(me){Array.prototype.forEach.call(me,function(Ee){Ee.node.setAttribute("selected","false"),g.getDefaultFilter(Ee,x)})};X(Y),X(W)}i.node.setAttribute("selected","true"),I="true",void 0===d.globals.selectedDataPoints[x]&&(d.globals.selectedDataPoints[x]=[]),d.globals.selectedDataPoints[x].push(w)}if("true"===I){var Q=d.config.states.active.filter;if("none"!==Q)g.applyFilter(i,x,Q.type,Q.value);else if("none"!==d.config.states.hover.filter&&!d.globals.isTouchDevice){var ce=d.config.states.hover.filter;g.applyFilter(i,x,ce.type,ce.value)}}else"none"!==d.config.states.active.filter.type&&("none"===d.config.states.hover.filter.type||d.globals.isTouchDevice?g.getDefaultFilter(i,x):g.applyFilter(i,x,(ce=d.config.states.hover.filter).type,ce.value));"function"==typeof d.config.chart.events.dataPointSelection&&d.config.chart.events.dataPointSelection(r,this.ctx,{selectedDataPoints:d.globals.selectedDataPoints,seriesIndex:x,dataPointIndex:w,w:d}),r&&this.ctx.events.fireEvent("dataPointSelection",[r,this.ctx,{selectedDataPoints:d.globals.selectedDataPoints,seriesIndex:x,dataPointIndex:w,w:d}])}},{key:"rotateAroundCenter",value:function(i){var r={};return i&&"function"==typeof i.getBBox&&(r=i.getBBox()),{x:r.x+r.width/2,y:r.y+r.height/2}}},{key:"getTextRects",value:function(i,r,d,g){var x=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],w=this.w,I=this.drawText({x:-200,y:-200,text:i,textAnchor:"start",fontSize:r,fontFamily:d,foreColor:"#fff",opacity:0});g&&I.attr("transform",g),w.globals.dom.Paper.add(I);var R=I.bbox();return x||(R=I.node.getBoundingClientRect()),I.remove(),{width:R.width,height:R.height}}},{key:"placeTextWithEllipsis",value:function(i,r,d){if("function"==typeof i.getComputedTextLength&&(i.textContent=r,r.length>0&&i.getComputedTextLength()>=d/1.1)){for(var g=r.length-3;g>0;g-=3)if(i.getSubStringLength(0,g)<=d/1.1)return void(i.textContent=r.substring(0,g)+"...");i.textContent="."}}}],[{key:"setAttrs",value:function(i,r){for(var d in r)r.hasOwnProperty(d)&&i.setAttribute(d,r[d])}}]),pe}(),bi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"getStackedSeriesTotals",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=this.w,d=[];if(0===r.globals.series.length)return d;for(var g=0;g<r.globals.series[r.globals.maxValsInArrayIndex].length;g++){for(var x=0,w=0;w<r.globals.series.length;w++)void 0!==r.globals.series[w][g]&&-1===i.indexOf(w)&&(x+=r.globals.series[w][g]);d.push(x)}return d}},{key:"getSeriesTotalByIndex",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===i?this.w.config.series.reduce(function(r,d){return r+d},0):this.w.globals.series[i].reduce(function(r,d){return r+d},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var i=this,r=this.w,d=[];return r.globals.seriesGroups.forEach(function(g){var x=[];r.config.series.forEach(function(I,R){g.indexOf(I.name)>-1&&x.push(R)});var w=r.globals.series.map(function(I,R){return-1===x.indexOf(R)?R:-1}).filter(function(I){return-1!==I});d.push(i.getStackedSeriesTotals(w))}),d}},{key:"isSeriesNull",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===i?this.w.config.series.filter(function(r){return null!==r}):this.w.config.series[i].data.filter(function(r){return null!==r})).length}},{key:"seriesHaveSameValues",value:function(i){return this.w.globals.series[i].every(function(r,d,g){return r===g[0]})}},{key:"getCategoryLabels",value:function(i){var r=this.w,d=i.slice();return r.config.xaxis.convertedCatToNumeric&&(d=i.map(function(g,x){return r.config.xaxis.labels.formatter(g-r.globals.minX+1)})),d}},{key:"getLargestSeries",value:function(){var i=this.w;i.globals.maxValsInArrayIndex=i.globals.series.map(function(r){return r.length}).indexOf(Math.max.apply(Math,i.globals.series.map(function(r){return r.length})))}},{key:"getLargestMarkerSize",value:function(){var i=this.w,r=0;return i.globals.markers.size.forEach(function(d){r=Math.max(r,d)}),i.config.markers.discrete&&i.config.markers.discrete.length&&i.config.markers.discrete.forEach(function(d){r=Math.max(r,d.size)}),r>0&&(r+=i.config.markers.hover.sizeOffset+1),i.globals.markers.largestSize=r,r}},{key:"getSeriesTotals",value:function(){var i=this.w;i.globals.seriesTotals=i.globals.series.map(function(r,d){var g=0;if(Array.isArray(r))for(var x=0;x<r.length;x++)g+=r[x];else g+=r;return g})}},{key:"getSeriesTotalsXRange",value:function(i,r){var d=this.w;return d.globals.series.map(function(g,x){for(var w=0,I=0;I<g.length;I++)d.globals.seriesX[x][I]>i&&d.globals.seriesX[x][I]<r&&(w+=g[I]);return w})}},{key:"getPercentSeries",value:function(){var i=this.w;i.globals.seriesPercent=i.globals.series.map(function(r,d){var g=[];if(Array.isArray(r))for(var x=0;x<r.length;x++){var w=i.globals.stackedSeriesTotals[x],I=0;w&&(I=100*r[x]/w),g.push(I)}else{var R=100*r/i.globals.seriesTotals.reduce(function(Y,W){return Y+W},0);g.push(R)}return g})}},{key:"getCalculatedRatios",value:function(){var i,r,d,g=this.w.globals,x=[],w=0,I=[],R=.1,Y=0;if(g.yRange=[],g.isMultipleYAxis)for(var W=0;W<g.minYArr.length;W++)g.yRange.push(Math.abs(g.minYArr[W]-g.maxYArr[W])),I.push(0);else g.yRange.push(Math.abs(g.minY-g.maxY));g.xRange=Math.abs(g.maxX-g.minX),g.zRange=Math.abs(g.maxZ-g.minZ);for(var X=0;X<g.yRange.length;X++)x.push(g.yRange[X]/g.gridHeight);if(r=g.xRange/g.gridWidth,i=g.yRange/g.gridWidth,d=g.xRange/g.gridHeight,(w=g.zRange/g.gridHeight*16)||(w=1),g.minY!==Number.MIN_VALUE&&0!==Math.abs(g.minY)&&(g.hasNegs=!0),g.isMultipleYAxis){I=[];for(var Q=0;Q<x.length;Q++)I.push(-g.minYArr[Q]/x[Q])}else I.push(-g.minY/x[0]),g.minY!==Number.MIN_VALUE&&0!==Math.abs(g.minY)&&(R=-g.minY/i,Y=g.minX/r);return{yRatio:x,invertedYRatio:i,zRatio:w,xRatio:r,invertedXRatio:d,baseLineInvertedY:R,baseLineY:I,baseLineX:Y}}},{key:"getLogSeries",value:function(i){var r=this,d=this.w;return d.globals.seriesLog=i.map(function(g,x){return d.config.yaxis[x]&&d.config.yaxis[x].logarithmic?g.map(function(w){return null===w?null:r.getLogVal(d.config.yaxis[x].logBase,w,x)}):g}),d.globals.invalidLogScale?i:d.globals.seriesLog}},{key:"getBaseLog",value:function(i,r){return Math.log(r)/Math.log(i)}},{key:"getLogVal",value:function(i,r,d){if(0===r)return 0;var g=this.w,x=0===g.globals.minYArr[d]?-1:this.getBaseLog(i,g.globals.minYArr[d]),w=(0===g.globals.maxYArr[d]?0:this.getBaseLog(i,g.globals.maxYArr[d]))-x;return r<1?r/w:(this.getBaseLog(i,r)-x)/w}},{key:"getLogYRatios",value:function(i){var r=this,d=this.w,g=this.w.globals;return g.yLogRatio=i.slice(),g.logYRange=g.yRange.map(function(x,w){if(d.config.yaxis[w]&&r.w.config.yaxis[w].logarithmic){var I,R=-Number.MAX_VALUE,Y=Number.MIN_VALUE;return g.seriesLog.forEach(function(W,X){W.forEach(function(Q){d.config.yaxis[X]&&d.config.yaxis[X].logarithmic&&(R=Math.max(Q,R),Y=Math.min(Q,Y))})}),I=Math.pow(g.yRange[w],Math.abs(Y-R)/g.yRange[w]),g.yLogRatio[w]=I/g.gridHeight,I}}),g.invalidLogScale?i.slice():g.yLogRatio}}],[{key:"checkComboSeries",value:function(i){var r=!1,d=0,g=0;return i.length&&void 0!==i[0].type&&i.forEach(function(x){"bar"!==x.type&&"column"!==x.type&&"candlestick"!==x.type&&"boxPlot"!==x.type||d++,void 0!==x.type&&g++}),g>0&&(r=!0),{comboBarCount:d,comboCharts:r}}},{key:"extendArrayProps",value:function(i,r,d){var g,x,w,I,R,Y;return null!==(g=r)&&void 0!==g&&g.yaxis&&(r=i.extendYAxis(r,d)),null!==(x=r)&&void 0!==x&&x.annotations&&(r.annotations.yaxis&&(r=i.extendYAxisAnnotations(r)),null!==(w=r)&&void 0!==w&&null!==(I=w.annotations)&&void 0!==I&&I.xaxis&&(r=i.extendXAxisAnnotations(r)),null!==(R=r)&&void 0!==R&&null!==(Y=R.annotations)&&void 0!==Y&&Y.points&&(r=i.extendPointAnnotations(r))),r}}]),pe}(),ci=function(){function pe(i){Z(this,pe),this.w=i.w,this.annoCtx=i}return we(pe,[{key:"setOrientations",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===i.label.orientation){var x=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==r?r:0,"']"));if(null!==x){var w=x.getBoundingClientRect();x.setAttribute("x",parseFloat(x.getAttribute("x"))-w.height+4),x.setAttribute("y","top"===i.label.position?parseFloat(x.getAttribute("y"))+w.width:parseFloat(x.getAttribute("y"))-w.width);var I=this.annoCtx.graphics.rotateAroundCenter(x),Y=I.y;x.setAttribute("transform","rotate(-90 ".concat(I.x," ").concat(Y,")"))}}}},{key:"addBackgroundToAnno",value:function(i,r){var d=this.w;if(!i||void 0===r.label.text||void 0!==r.label.text&&!String(r.label.text).trim())return null;var g=d.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),x=i.getBoundingClientRect(),w=r.label.style.padding.left,I=r.label.style.padding.right,R=r.label.style.padding.top,Y=r.label.style.padding.bottom;"vertical"===r.label.orientation&&(R=r.label.style.padding.left,Y=r.label.style.padding.right,w=r.label.style.padding.top,I=r.label.style.padding.bottom);var Q=this.annoCtx.graphics.drawRect(x.left-g.left-w-d.globals.barPadForNumericAxis,x.top-g.top-R,x.width+w+I,x.height+R+Y,r.label.borderRadius,r.label.style.background,1,r.label.borderWidth,r.label.borderColor,0);return r.id&&Q.node.classList.add(r.id),Q}},{key:"annotationsBackground",value:function(){var i=this,r=this.w,d=function(g,x,w){var I=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(w,"-annotations .apexcharts-").concat(w,"-annotation-label[rel='").concat(x,"']"));if(I){var R=I.parentNode,Y=i.addBackgroundToAnno(I,g);Y&&(R.insertBefore(Y.node,I),g.label.mouseEnter&&Y.node.addEventListener("mouseenter",g.label.mouseEnter.bind(i,g)),g.label.mouseLeave&&Y.node.addEventListener("mouseleave",g.label.mouseLeave.bind(i,g)),g.label.click&&Y.node.addEventListener("click",g.label.click.bind(i,g)))}};r.config.annotations.xaxis.map(function(g,x){d(g,x,"xaxis")}),r.config.annotations.yaxis.map(function(g,x){d(g,x,"yaxis")}),r.config.annotations.points.map(function(g,x){d(g,x,"point")})}},{key:"getY1Y2",value:function(i,r){var d,g="y1"===i?r.y:r.y2,x=this.w;if(this.annoCtx.invertAxis){var w=x.globals.labels;x.config.xaxis.convertedCatToNumeric&&(w=x.globals.categoryLabels);var I=w.indexOf(g),R=x.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(I+1)+")");d=R?parseFloat(R.getAttribute("y")):(x.globals.gridHeight/w.length-1)*(I+1)-x.globals.barHeight,void 0!==r.seriesIndex&&x.globals.barHeight&&(d=d-x.globals.barHeight/2*(x.globals.series.length-1)+x.globals.barHeight*r.seriesIndex)}else{var Y;Y=x.config.yaxis[r.yAxisIndex].logarithmic?(g=new bi(this.annoCtx.ctx).getLogVal(g,r.yAxisIndex))/x.globals.yLogRatio[r.yAxisIndex]:(g-x.globals.minYArr[r.yAxisIndex])/(x.globals.yRange[r.yAxisIndex]/x.globals.gridHeight),d=x.globals.gridHeight-Y,!r.marker||null!=r.y||(d=0),x.config.yaxis[r.yAxisIndex]&&x.config.yaxis[r.yAxisIndex].reversed&&(d=Y)}return"string"==typeof g&&g.indexOf("px")>-1&&(d=parseFloat(g)),d}},{key:"getX1X2",value:function(i,r){var d=this.w,g=this.annoCtx.invertAxis?d.globals.minY:d.globals.minX,x=this.annoCtx.invertAxis?d.globals.maxY:d.globals.maxX,w=this.annoCtx.invertAxis?d.globals.yRange[0]:d.globals.xRange,I=(r.x-g)/(w/d.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(I=(x-r.x)/(w/d.globals.gridWidth)),"category"!==d.config.xaxis.type&&!d.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||d.globals.dataFormatXNumeric||(I=this.getStringX(r.x));var R=(r.x2-g)/(w/d.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(R=(x-r.x2)/(w/d.globals.gridWidth)),"category"!==d.config.xaxis.type&&!d.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||d.globals.dataFormatXNumeric||(R=this.getStringX(r.x2)),null!=r.x||!r.marker||(I=d.globals.gridWidth),"x1"===i&&"string"==typeof r.x&&r.x.indexOf("px")>-1&&(I=parseFloat(r.x)),"x2"===i&&"string"==typeof r.x2&&r.x2.indexOf("px")>-1&&(R=parseFloat(r.x2)),void 0!==r.seriesIndex&&d.globals.barWidth&&!this.annoCtx.invertAxis&&(I=I-d.globals.barWidth/2*(d.globals.series.length-1)+d.globals.barWidth*r.seriesIndex),"x1"===i?I:R}},{key:"getStringX",value:function(i){var r=this.w,d=i;r.config.xaxis.convertedCatToNumeric&&r.globals.categoryLabels.length&&(i=r.globals.categoryLabels.indexOf(i)+1);var g=r.globals.labels.indexOf(i),x=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(g+1)+")");return x&&(d=parseFloat(x.getAttribute("x"))),d}}]),pe}(),ti=function(){function pe(i){Z(this,pe),this.w=i.w,this.annoCtx=i,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new ci(this.annoCtx)}return we(pe,[{key:"addXaxisAnnotation",value:function(i,r,d){var g,x=this.w,w=this.helpers.getX1X2("x1",i),I=i.label.text,R=i.strokeDashArray;if(Je.isNumber(w)){if(null==i.x2){var Y=this.annoCtx.graphics.drawLine(w+i.offsetX,0+i.offsetY,w+i.offsetX,x.globals.gridHeight+i.offsetY,i.borderColor,R,i.borderWidth);r.appendChild(Y.node),i.id&&Y.node.classList.add(i.id)}else{if((g=this.helpers.getX1X2("x2",i))<w){var W=w;w=g,g=W}var X=this.annoCtx.graphics.drawRect(w+i.offsetX,0+i.offsetY,g-w,x.globals.gridHeight+i.offsetY,0,i.fillColor,i.opacity,1,i.borderColor,R);X.node.classList.add("apexcharts-annotation-rect"),X.attr("clip-path","url(#gridRectMask".concat(x.globals.cuid,")")),r.appendChild(X.node),i.id&&X.node.classList.add(i.id)}var Q=this.annoCtx.graphics.getTextRects(I,parseFloat(i.label.style.fontSize)),me=this.annoCtx.graphics.drawText({x:w+i.label.offsetX,y:("top"===i.label.position?4:"center"===i.label.position?x.globals.gridHeight/2+("vertical"===i.label.orientation?Q.width/2:0):x.globals.gridHeight)+i.label.offsetY-("vertical"===i.label.orientation?"top"===i.label.position?Q.width/2-12:-Q.width/2:0),text:I,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});me.attr({rel:d}),r.appendChild(me.node),this.annoCtx.helpers.setOrientations(i,d)}}},{key:"drawXAxisAnnotations",value:function(){var i=this,r=this.w,d=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return r.config.annotations.xaxis.map(function(g,x){i.addXaxisAnnotation(g,d.node,x)}),d}}]),pe}(),St=function(){function pe(i){Z(this,pe),this.w=i.w,this.annoCtx=i,this.helpers=new ci(this.annoCtx)}return we(pe,[{key:"addYaxisAnnotation",value:function(i,r,d){var g,x=this.w,w=i.strokeDashArray,I=this.helpers.getY1Y2("y1",i),R=i.label.text;if(null==i.y2){var Y=this.annoCtx.graphics.drawLine(0+i.offsetX,I+i.offsetY,this._getYAxisAnnotationWidth(i),I+i.offsetY,i.borderColor,w,i.borderWidth);r.appendChild(Y.node),i.id&&Y.node.classList.add(i.id)}else{if((g=this.helpers.getY1Y2("y2",i))>I){var W=I;I=g,g=W}var X=this.annoCtx.graphics.drawRect(0+i.offsetX,g+i.offsetY,this._getYAxisAnnotationWidth(i),I-g,0,i.fillColor,i.opacity,1,i.borderColor,w);X.node.classList.add("apexcharts-annotation-rect"),X.attr("clip-path","url(#gridRectMask".concat(x.globals.cuid,")")),r.appendChild(X.node),i.id&&X.node.classList.add(i.id)}var ce=this.annoCtx.graphics.drawText({x:("right"===i.label.position?x.globals.gridWidth:"center"===i.label.position?x.globals.gridWidth/2:0)+i.label.offsetX,y:(g??I)+i.label.offsetY-3,text:R,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});ce.attr({rel:d}),r.appendChild(ce.node)}},{key:"_getYAxisAnnotationWidth",value:function(i){var r=this.w;return(i.width.indexOf("%")>-1?r.globals.gridWidth*parseInt(i.width,10)/100:parseInt(i.width,10))+i.offsetX}},{key:"drawYAxisAnnotations",value:function(){var i=this,r=this.w,d=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return r.config.annotations.yaxis.map(function(g,x){i.addYaxisAnnotation(g,d.node,x)}),d}}]),pe}(),pi=function(){function pe(i){Z(this,pe),this.w=i.w,this.annoCtx=i,this.helpers=new ci(this.annoCtx)}return we(pe,[{key:"addPointAnnotation",value:function(i,r,d){var g=this.helpers.getX1X2("x1",i),x=this.helpers.getY1Y2("y1",i);if(Je.isNumber(g)){var w={pSize:i.marker.size,pointStrokeWidth:i.marker.strokeWidth,pointFillColor:i.marker.fillColor,pointStrokeColor:i.marker.strokeColor,shape:i.marker.shape,pRadius:i.marker.radius,class:"apexcharts-point-annotation-marker ".concat(i.marker.cssClass," ").concat(i.id?i.id:"")},I=this.annoCtx.graphics.drawMarker(g+i.marker.offsetX,x+i.marker.offsetY,w);r.appendChild(I.node);var R=i.label.text?i.label.text:"",Y=this.annoCtx.graphics.drawText({x:g+i.label.offsetX,y:x+i.label.offsetY-i.marker.size-parseFloat(i.label.style.fontSize)/1.6,text:R,textAnchor:i.label.textAnchor,fontSize:i.label.style.fontSize,fontFamily:i.label.style.fontFamily,fontWeight:i.label.style.fontWeight,foreColor:i.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(i.label.style.cssClass," ").concat(i.id?i.id:"")});if(Y.attr({rel:d}),r.appendChild(Y.node),i.customSVG.SVG){var W=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+i.customSVG.cssClass});W.attr({transform:"translate(".concat(g+i.customSVG.offsetX,", ").concat(x+i.customSVG.offsetY,")")}),W.node.innerHTML=i.customSVG.SVG,r.appendChild(W.node)}if(i.image.path){var X=i.image.width?i.image.width:20,Q=i.image.height?i.image.height:20;I=this.annoCtx.addImage({x:g+i.image.offsetX-X/2,y:x+i.image.offsetY-Q/2,width:X,height:Q,path:i.image.path,appendTo:".apexcharts-point-annotations"})}i.mouseEnter&&I.node.addEventListener("mouseenter",i.mouseEnter.bind(this,i)),i.mouseLeave&&I.node.addEventListener("mouseleave",i.mouseLeave.bind(this,i)),i.click&&I.node.addEventListener("click",i.click.bind(this,i))}}},{key:"drawPointAnnotations",value:function(){var i=this,r=this.w,d=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return r.config.annotations.points.map(function(g,x){i.addPointAnnotation(g,d.node,x)}),d}}]),pe}(),vi={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Ti=function(){function pe(){Z(this,pe),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return we(pe,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[vi],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(i){return new Date(i).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(i){return i}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(i){return i+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(i){return i.globals.seriesTotals.reduce(function(r,d){return r+d},0)/i.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(i){return i},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(i){return i}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(i){return i}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(i){return i.globals.seriesTotals.reduce(function(r,d){return r+d},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(i){return null!==i?i:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(i){return i?i+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),pe}(),Ji=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.graphics=new rt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new ci(this),this.xAxisAnnotations=new ti(this),this.yAxisAnnotations=new St(this),this.pointsAnnotations=new pi(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return we(pe,[{key:"drawAxesAnnotations",value:function(){var i=this.w;if(i.globals.axisCharts){for(var r=this.yAxisAnnotations.drawYAxisAnnotations(),d=this.xAxisAnnotations.drawXAxisAnnotations(),g=this.pointsAnnotations.drawPointAnnotations(),x=i.config.chart.animations.enabled,w=[r,d,g],I=[d.node,r.node,g.node],R=0;R<3;R++)i.globals.dom.elGraphical.add(w[R]),!x||i.globals.resized||i.globals.dataChanged||"scatter"!==i.config.chart.type&&"bubble"!==i.config.chart.type&&i.globals.dataPoints>1&&I[R].classList.add("apexcharts-element-hidden"),i.globals.delayedElements.push({el:I[R],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var i=this;this.w.config.annotations.images.map(function(r,d){i.addImage(r,d)})}},{key:"drawTextAnnos",value:function(){var i=this;this.w.config.annotations.texts.map(function(r,d){i.addText(r,d)})}},{key:"addXaxisAnnotation",value:function(i,r,d){this.xAxisAnnotations.addXaxisAnnotation(i,r,d)}},{key:"addYaxisAnnotation",value:function(i,r,d){this.yAxisAnnotations.addYaxisAnnotation(i,r,d)}},{key:"addPointAnnotation",value:function(i,r,d){this.pointsAnnotations.addPointAnnotation(i,r,d)}},{key:"addText",value:function(i,r){var x=i.text,Q=i.backgroundColor,ce=i.borderWidth,me=i.strokeDashArray,Ee=i.borderRadius,De=i.borderColor,Ce=i.appendTo,Re=void 0===Ce?".apexcharts-svg":Ce,G=i.paddingLeft,re=void 0===G?4:G,te=i.paddingRight,oe=void 0===te?4:te,ye=i.paddingBottom,Fe=void 0===ye?2:ye,ht=i.paddingTop,yt=void 0===ht?2:ht,ii=this.w,hi=this.graphics.drawText({x:i.x,y:i.y,text:x,textAnchor:i.textAnchor||"start",fontSize:i.fontSize||"12px",fontWeight:i.fontWeight||"regular",fontFamily:i.fontFamily||ii.config.chart.fontFamily,foreColor:i.foreColor||ii.config.chart.foreColor,cssClass:i.cssClass}),xi=ii.globals.dom.baseEl.querySelector(Re);xi&&xi.appendChild(hi.node);var Pi=hi.bbox();if(x){var nn=this.graphics.drawRect(Pi.x-re,Pi.y-yt,Pi.width+re+oe,Pi.height+Fe+yt,Ee,Q||"transparent",1,ce,De,me);xi.insertBefore(nn.node,hi.node)}}},{key:"addImage",value:function(i,r){var d=this.w,x=i.x,w=void 0===x?0:x,I=i.y,R=void 0===I?0:I,Y=i.width,W=void 0===Y?20:Y,X=i.height,Q=void 0===X?20:X,ce=i.appendTo,me=void 0===ce?".apexcharts-svg":ce,Ee=d.globals.dom.Paper.image(i.path);Ee.size(W,Q).move(w,R);var De=d.globals.dom.baseEl.querySelector(me);return De&&De.appendChild(Ee.node),Ee}},{key:"addXaxisAnnotationExternal",value:function(i,r,d){return this.addAnnotationExternal({params:i,pushToMemory:r,context:d,type:"xaxis",contextMethod:d.addXaxisAnnotation}),d}},{key:"addYaxisAnnotationExternal",value:function(i,r,d){return this.addAnnotationExternal({params:i,pushToMemory:r,context:d,type:"yaxis",contextMethod:d.addYaxisAnnotation}),d}},{key:"addPointAnnotationExternal",value:function(i,r,d){return void 0===this.invertAxis&&(this.invertAxis=d.w.globals.isBarHorizontal),this.addAnnotationExternal({params:i,pushToMemory:r,context:d,type:"point",contextMethod:d.addPointAnnotation}),d}},{key:"addAnnotationExternal",value:function(i){var r=i.params,d=i.pushToMemory,g=i.context,x=i.type,w=i.contextMethod,I=g,R=I.w,Y=R.globals.dom.baseEl.querySelector(".apexcharts-".concat(x,"-annotations")),W=Y.childNodes.length+1,X=new Ti,Q=Object.assign({},"xaxis"===x?X.xAxisAnnotation:"yaxis"===x?X.yAxisAnnotation:X.pointAnnotation),ce=Je.extend(Q,r);switch(x){case"xaxis":this.addXaxisAnnotation(ce,Y,W);break;case"yaxis":this.addYaxisAnnotation(ce,Y,W);break;case"point":this.addPointAnnotation(ce,Y,W)}var me=R.globals.dom.baseEl.querySelector(".apexcharts-".concat(x,"-annotations .apexcharts-").concat(x,"-annotation-label[rel='").concat(W,"']")),Ee=this.helpers.addBackgroundToAnno(me,ce);return Ee&&Y.insertBefore(Ee.node,me),d&&R.globals.memory.methodsToExec.push({context:I,id:ce.id?ce.id:Je.randomId(),method:w,label:"addAnnotation",params:r}),g}},{key:"clearAnnotations",value:function(i){var r=i.w,d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");r.globals.memory.methodsToExec.map(function(g,x){"addText"!==g.label&&"addAnnotation"!==g.label||r.globals.memory.methodsToExec.splice(x,1)}),d=Je.listToArray(d),Array.prototype.forEach.call(d,function(g){for(;g.firstChild;)g.removeChild(g.firstChild)})}},{key:"removeAnnotation",value:function(i,r){var d=i.w,g=d.globals.dom.baseEl.querySelectorAll(".".concat(r));g&&(d.globals.memory.methodsToExec.map(function(x,w){x.id===r&&d.globals.memory.methodsToExec.splice(w,1)}),Array.prototype.forEach.call(g,function(x){x.parentElement.removeChild(x)}))}}]),pe}(),Ii=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return we(pe,[{key:"isValidDate",value:function(i){return"number"!=typeof i&&!isNaN(this.parseDate(i))}},{key:"getTimeStamp",value:function(i){return Date.parse(i)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(i).toISOString().substr(0,25)).getTime():new Date(i).getTime():i}},{key:"getDate",value:function(i){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(i).toUTCString()):new Date(i)}},{key:"parseDate",value:function(i){var r=Date.parse(i);if(!isNaN(r))return this.getTimeStamp(i);var d=Date.parse(i.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(d)}},{key:"parseDateWithTimezone",value:function(i){return Date.parse(i.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(i,r){var d=this.w.globals.locale,g=this.w.config.xaxis.labels.datetimeUTC,x=["\0"].concat(tt(d.months)),w=["\x01"].concat(tt(d.shortMonths)),I=["\x02"].concat(tt(d.days)),R=["\x03"].concat(tt(d.shortDays));function Y(Fe,ht){var yt=Fe+"";for(ht=ht||2;yt.length<ht;)yt="0"+yt;return yt}var W=g?i.getUTCFullYear():i.getFullYear();r=(r=(r=r.replace(/(^|[^\\])yyyy+/g,"$1"+W)).replace(/(^|[^\\])yy/g,"$1"+W.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+W);var X=(g?i.getUTCMonth():i.getMonth())+1;r=(r=(r=(r=r.replace(/(^|[^\\])MMMM+/g,"$1"+x[0])).replace(/(^|[^\\])MMM/g,"$1"+w[0])).replace(/(^|[^\\])MM/g,"$1"+Y(X))).replace(/(^|[^\\])M/g,"$1"+X);var Q=g?i.getUTCDate():i.getDate();r=(r=(r=(r=r.replace(/(^|[^\\])dddd+/g,"$1"+I[0])).replace(/(^|[^\\])ddd/g,"$1"+R[0])).replace(/(^|[^\\])dd/g,"$1"+Y(Q))).replace(/(^|[^\\])d/g,"$1"+Q);var ce=g?i.getUTCHours():i.getHours(),me=ce>12?ce-12:0===ce?12:ce;r=(r=(r=(r=r.replace(/(^|[^\\])HH+/g,"$1"+Y(ce))).replace(/(^|[^\\])H/g,"$1"+ce)).replace(/(^|[^\\])hh+/g,"$1"+Y(me))).replace(/(^|[^\\])h/g,"$1"+me);var Ee=g?i.getUTCMinutes():i.getMinutes();r=(r=r.replace(/(^|[^\\])mm+/g,"$1"+Y(Ee))).replace(/(^|[^\\])m/g,"$1"+Ee);var De=g?i.getUTCSeconds():i.getSeconds();r=(r=r.replace(/(^|[^\\])ss+/g,"$1"+Y(De))).replace(/(^|[^\\])s/g,"$1"+De);var Ce=g?i.getUTCMilliseconds():i.getMilliseconds();r=r.replace(/(^|[^\\])fff+/g,"$1"+Y(Ce,3)),Ce=Math.round(Ce/10),r=r.replace(/(^|[^\\])ff/g,"$1"+Y(Ce)),Ce=Math.round(Ce/10);var Re=ce<12?"AM":"PM";r=(r=(r=r.replace(/(^|[^\\])f/g,"$1"+Ce)).replace(/(^|[^\\])TT+/g,"$1"+Re)).replace(/(^|[^\\])T/g,"$1"+Re.charAt(0));var G=Re.toLowerCase();r=(r=r.replace(/(^|[^\\])tt+/g,"$1"+G)).replace(/(^|[^\\])t/g,"$1"+G.charAt(0));var re=-i.getTimezoneOffset(),te=g||!re?"Z":re>0?"+":"-";if(!g){var oe=(re=Math.abs(re))%60;te+=Y(Math.floor(re/60))+":"+Y(oe)}r=r.replace(/(^|[^\\])K/g,"$1"+te);var ye=(g?i.getUTCDay():i.getDay())+1;return(r=(r=(r=(r=r.replace(new RegExp(I[0],"g"),I[ye])).replace(new RegExp(R[0],"g"),R[ye])).replace(new RegExp(x[0],"g"),x[X])).replace(new RegExp(w[0],"g"),w[X])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(i,r,d){var g=this.w;void 0!==g.config.xaxis.min&&(i=g.config.xaxis.min),void 0!==g.config.xaxis.max&&(r=g.config.xaxis.max);var x=this.getDate(i),w=this.getDate(r),I=this.formatDate(x,"yyyy MM dd HH mm ss fff").split(" "),R=this.formatDate(w,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(I[6],10),maxMillisecond:parseInt(R[6],10),minSecond:parseInt(I[5],10),maxSecond:parseInt(R[5],10),minMinute:parseInt(I[4],10),maxMinute:parseInt(R[4],10),minHour:parseInt(I[3],10),maxHour:parseInt(R[3],10),minDate:parseInt(I[2],10),maxDate:parseInt(R[2],10),minMonth:parseInt(I[1],10)-1,maxMonth:parseInt(R[1],10)-1,minYear:parseInt(I[0],10),maxYear:parseInt(R[0],10)}}},{key:"isLeapYear",value:function(i){return i%4==0&&i%100!=0||i%400==0}},{key:"calculcateLastDaysOfMonth",value:function(i,r,d){return this.determineDaysOfMonths(i,r)-d}},{key:"determineDaysOfYear",value:function(i){var r=365;return this.isLeapYear(i)&&(r=366),r}},{key:"determineRemainingDaysOfYear",value:function(i,r,d){var g=this.daysCntOfYear[r]+d;return r>1&&this.isLeapYear()&&g++,g}},{key:"determineDaysOfMonths",value:function(i,r){var d=30;switch(i=Je.monthMod(i),!0){case this.months30.indexOf(i)>-1:2===i&&(d=this.isLeapYear(r)?29:28);break;case this.months31.indexOf(i)>-1:default:d=31}return d}}]),pe}(),ki=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.tooltipKeyFormat="dd MMM"}return we(pe,[{key:"xLabelFormat",value:function(i,r,d,g){var x=this.w;if("datetime"===x.config.xaxis.type&&void 0===x.config.xaxis.labels.formatter&&void 0===x.config.tooltip.x.formatter){var w=new Ii(this.ctx);return w.formatDate(w.getDate(r),x.config.tooltip.x.format)}return i(r,d,g)}},{key:"defaultGeneralFormatter",value:function(i){return Array.isArray(i)?i.map(function(r){return r}):i}},{key:"defaultYFormatter",value:function(i,r,d){var g=this.w;return Je.isNumber(i)&&(i=i.toFixed(0!==g.globals.yValueDecimal?void 0!==r.decimalsInFloat?r.decimalsInFloat:g.globals.yValueDecimal:g.globals.maxYArr[d]-g.globals.minYArr[d]<5?1:0)),i}},{key:"setLabelFormatters",value:function(){var i=this,r=this.w;return r.globals.xaxisTooltipFormatter=function(d){return i.defaultGeneralFormatter(d)},r.globals.ttKeyFormatter=function(d){return i.defaultGeneralFormatter(d)},r.globals.ttZFormatter=function(d){return d},r.globals.legendFormatter=function(d){return i.defaultGeneralFormatter(d)},r.globals.xLabelFormatter=void 0!==r.config.xaxis.labels.formatter?r.config.xaxis.labels.formatter:function(d){if(Je.isNumber(d)){if(!r.config.xaxis.convertedCatToNumeric&&"numeric"===r.config.xaxis.type){if(Je.isNumber(r.config.xaxis.decimalsInFloat))return d.toFixed(r.config.xaxis.decimalsInFloat);var g=r.globals.maxX-r.globals.minX;return d.toFixed(g>0&&g<100?1:0)}return d.toFixed(r.globals.isBarHorizontal&&r.globals.maxY-r.globals.minYArr<4?1:0)}return d},r.globals.ttKeyFormatter="function"==typeof r.config.tooltip.x.formatter?r.config.tooltip.x.formatter:r.globals.xLabelFormatter,"function"==typeof r.config.xaxis.tooltip.formatter&&(r.globals.xaxisTooltipFormatter=r.config.xaxis.tooltip.formatter),(Array.isArray(r.config.tooltip.y)||void 0!==r.config.tooltip.y.formatter)&&(r.globals.ttVal=r.config.tooltip.y),void 0!==r.config.tooltip.z.formatter&&(r.globals.ttZFormatter=r.config.tooltip.z.formatter),void 0!==r.config.legend.formatter&&(r.globals.legendFormatter=r.config.legend.formatter),r.config.yaxis.forEach(function(d,g){r.globals.yLabelFormatters[g]=void 0!==d.labels.formatter?d.labels.formatter:function(x){return r.globals.xyCharts?Array.isArray(x)?x.map(function(w){return i.defaultYFormatter(w,d,g)}):i.defaultYFormatter(x,d,g):x}}),r.globals}},{key:"heatmapLabelFormatters",value:function(){var i=this.w;if("heatmap"===i.config.chart.type){i.globals.yAxisScale[0].result=i.globals.seriesNames.slice();var r=i.globals.seriesNames.reduce(function(d,g){return d.length>g.length?d:g},0);i.globals.yAxisScale[0].niceMax=r,i.globals.yAxisScale[0].niceMin=r}}}]),pe}(),Zi=function(pe){var i,r=pe.isTimeline,d=pe.ctx,g=pe.seriesIndex,x=pe.dataPointIndex,w=pe.y1,I=pe.y2,R=pe.w,Y=R.globals.seriesRangeStart[g][x],W=R.globals.seriesRangeEnd[g][x],X=R.globals.labels[x],Q=R.config.series[g].name?R.config.series[g].name:"",ce=R.globals.ttKeyFormatter,me=R.config.tooltip.y.title.formatter,Ee={w:R,seriesIndex:g,dataPointIndex:x,start:Y,end:W};"function"==typeof me&&(Q=me(Q,Ee)),null!==(i=R.config.series[g].data[x])&&void 0!==i&&i.x&&(X=R.config.series[g].data[x].x),r||"datetime"===R.config.xaxis.type&&(X=new ki(d).xLabelFormat(R.globals.ttKeyFormatter,X,X,{i:void 0,dateFormatter:new Ii(d).formatDate,w:R})),"function"==typeof ce&&(X=ce(X,Ee)),Number.isFinite(w)&&Number.isFinite(I)&&(Y=w,W=I);var De="",Ce="",Re=R.globals.colors[g];if(void 0===R.config.tooltip.x.formatter)if("datetime"===R.config.xaxis.type){var G=new Ii(d);De=G.formatDate(G.getDate(Y),R.config.tooltip.x.format),Ce=G.formatDate(G.getDate(W),R.config.tooltip.x.format)}else De=Y,Ce=W;else De=R.config.tooltip.x.formatter(Y),Ce=R.config.tooltip.x.formatter(W);return{start:Y,end:W,startVal:De,endVal:Ce,ylabel:X,color:Re,seriesName:Q}},pn=function(pe){var i=pe.color,r=pe.seriesName,d=pe.ylabel,g=pe.start,x=pe.end,w=pe.seriesIndex,I=pe.dataPointIndex,R=pe.ctx.tooltip.tooltipLabels.getFormatters(w);g=R.yLbFormatter(g),x=R.yLbFormatter(x);var Y=R.yLbFormatter(pe.w.globals.series[w][I]),W='<span class="value start-value">\n  '.concat(g,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(x,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+i+'">'+(r||"")+'</span></div><div> <span class="category">'+d+": </span> "+(pe.w.globals.comboCharts?"rangeArea"===pe.w.config.series[w].type||"rangeBar"===pe.w.config.series[w].type?W:"<span>".concat(Y,"</span>"):W)+" </div></div>"},ji=function(){function pe(i){Z(this,pe),this.opts=i}return we(pe,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(i){return this.hideYAxis(),Je.extend(i,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),He(He({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var i=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(r){return i._getBoxTooltip(r.w,r.seriesIndex,r.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var i=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(r){return i._getBoxTooltip(r.w,r.seriesIndex,r.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(i,r){var d=r.seriesIndex,g=r.dataPointIndex,x=r.w,w=function(){return x.globals.seriesRangeEnd[d][g]-x.globals.seriesRangeStart[d][g]};return x.globals.comboCharts?"rangeBar"===x.config.series[d].type||"rangeArea"===x.config.series[d].type?w():i:w()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(i){return i.w.config.plotOptions&&i.w.config.plotOptions.bar&&i.w.config.plotOptions.bar.horizontal?(g=(d=Zi(He(He({},r=i),{},{isTimeline:!0}))).color,x=d.seriesName,w=d.ylabel,I=d.startVal,R=d.endVal,pn(He(He({},r),{},{color:g,seriesName:x,ylabel:w,start:I,end:R}))):function(r){var d=Zi(r),g=d.color,x=d.seriesName,w=d.ylabel,I=d.start,R=d.end;return pn(He(He({},r),{},{color:g,seriesName:x,ylabel:w,start:I,end:R}))}(i);var r,d,g,x,w,I,R}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(i){var r,d;return null!==(r=i.plotOptions.bar)&&void 0!==r&&r.barHeight||(i.plotOptions.bar.barHeight=2),null!==(d=i.plotOptions.bar)&&void 0!==d&&d.columnWidth||(i.plotOptions.bar.columnWidth=2),i}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(i){return g=(d=Zi(r=i)).color,x=d.seriesName,w=d.ylabel,I=d.start,R=d.end,pn(He(He({},r),{},{color:g,seriesName:x,ylabel:w,start:I,end:R}));var r,d,g,x,w,I,R}}}}},{key:"brush",value:function(i){return Je.extend(i,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(i){i.dataLabels=i.dataLabels||{},i.dataLabels.formatter=i.dataLabels.formatter||void 0;var r=i.dataLabels.formatter;return i.yaxis.forEach(function(d,g){i.yaxis[g].min=0,i.yaxis[g].max=100}),"bar"===i.chart.type&&(i.dataLabels.formatter=r||function(d){return"number"==typeof d&&d?d.toFixed(0)+"%":d}),i}},{key:"stackedBars",value:function(){var i=this.bar();return He(He({},i),{},{plotOptions:He(He({},i.plotOptions),{},{bar:He(He({},i.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(i){return i.xaxis.convertedCatToNumeric=!0,i}},{key:"convertCatToNumericXaxis",value:function(i,r,d){i.xaxis.type="numeric",i.xaxis.labels=i.xaxis.labels||{},i.xaxis.labels.formatter=i.xaxis.labels.formatter||function(w){return Je.isNumber(w)?Math.floor(w):w};var g=i.xaxis.labels.formatter,x=i.xaxis.categories&&i.xaxis.categories.length?i.xaxis.categories:i.labels;return d&&d.length&&(x=d.map(function(w){return Array.isArray(w)?w:String(w)})),x&&x.length&&(i.xaxis.labels.formatter=function(w){return Je.isNumber(w)?g(x[Math.floor(w)-1]):g(w)}),i.xaxis.categories=[],i.labels=[],i.xaxis.tickAmount=i.xaxis.tickAmount||"dataPoints",i}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(i){return i.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(i){return i},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(i,r,d,g,x){var w=i.globals.seriesCandleO[r][d],I=i.globals.seriesCandleH[r][d],R=i.globals.seriesCandleM[r][d],Y=i.globals.seriesCandleL[r][d],W=i.globals.seriesCandleC[r][d];return i.config.series[r].type&&i.config.series[r].type!==x?'<div class="apexcharts-custom-tooltip">\n          '.concat(i.config.series[r].name?i.config.series[r].name:"series-"+(r+1),": <strong>").concat(i.globals.series[r][d],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(i.config.chart.type,'">')+"<div>".concat(g[0],': <span class="value">')+w+"</span></div>"+"<div>".concat(g[1],': <span class="value">')+I+"</span></div>"+(R?"<div>".concat(g[2],': <span class="value">')+R+"</span></div>":"")+"<div>".concat(g[3],': <span class="value">')+Y+"</span></div>"+"<div>".concat(g[4],': <span class="value">')+W+"</span></div></div>"}}]),pe}(),gn=function(){function pe(i){Z(this,pe),this.opts=i}return we(pe,[{key:"init",value:function(i){var r=i.responsiveOverride,d=this.opts,g=new Ti,x=new ji(d);this.chartType=d.chart.type,d=this.extendYAxis(d),d=this.extendAnnotations(d);var w=g.init(),I={};if(d&&"object"===c(d)){var R,Y,W,X,Q,ce,me,Ee,De={};De=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(d.chart.type)?x[d.chart.type]():x.line(),null!==(R=d.plotOptions)&&void 0!==R&&null!==(Y=R.bar)&&void 0!==Y&&Y.isFunnel&&(De=x.funnel()),d.chart.stacked&&"bar"===d.chart.type&&(De=x.stackedBars()),null!==(W=d.chart.brush)&&void 0!==W&&W.enabled&&(De=x.brush(De)),d.chart.stacked&&"100%"===d.chart.stackType&&(d=x.stacked100(d)),null!==(X=d.plotOptions)&&void 0!==X&&null!==(Q=X.bar)&&void 0!==Q&&Q.isDumbbell&&(d=x.dumbbell(d)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(d),d.xaxis=d.xaxis||window.Apex.xaxis||{},r||(d.xaxis.convertedCatToNumeric=!1),(null!==(ce=(d=this.checkForCatToNumericXAxis(this.chartType,De,d)).chart.sparkline)&&void 0!==ce&&ce.enabled||null!==(me=window.Apex.chart)&&void 0!==me&&null!==(Ee=me.sparkline)&&void 0!==Ee&&Ee.enabled)&&(De=x.sparkline(De)),I=Je.extend(w,De)}var Ce=Je.extend(I,window.Apex);return w=Je.extend(Ce,d),this.handleUserInputErrors(w)}},{key:"checkForCatToNumericXAxis",value:function(i,r,d){var g,x,w=new ji(d);return("bar"===i||"boxPlot"===i)&&(null===(g=d.plotOptions)||void 0===g||null===(x=g.bar)||void 0===x?void 0:x.horizontal)||"pie"===i||"polarArea"===i||"donut"===i||"radar"===i||"radialBar"===i||"heatmap"===i||!("datetime"!==d.xaxis.type&&"numeric"!==d.xaxis.type)||"between"===(d.xaxis.tickPlacement?d.xaxis.tickPlacement:r.xaxis&&r.xaxis.tickPlacement)||(d=w.convertCatToNumeric(d)),d}},{key:"extendYAxis",value:function(i,r){var d=new Ti;(void 0===i.yaxis||!i.yaxis||Array.isArray(i.yaxis)&&0===i.yaxis.length)&&(i.yaxis={}),i.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(i.yaxis=Je.extend(i.yaxis,window.Apex.yaxis)),i.yaxis=i.yaxis.constructor!==Array?[Je.extend(d.yAxis,i.yaxis)]:Je.extendArray(i.yaxis,d.yAxis);var g=!1;i.yaxis.forEach(function(w){w.logarithmic&&(g=!0)});var x=i.series;return r&&!x&&(x=r.config.series),g&&x.length!==i.yaxis.length&&x.length&&(i.yaxis=x.map(function(w,I){if(w.name||(x[I].name="series-".concat(I+1)),i.yaxis[I])return i.yaxis[I].seriesName=x[I].name,i.yaxis[I];var R=Je.extend(d.yAxis,i.yaxis[0]);return R.show=!1,R})),g&&x.length>1&&x.length!==i.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),i}},{key:"extendAnnotations",value:function(i){return void 0===i.annotations&&(i.annotations={},i.annotations.yaxis=[],i.annotations.xaxis=[],i.annotations.points=[]),i=this.extendYAxisAnnotations(i),i=this.extendXAxisAnnotations(i),this.extendPointAnnotations(i)}},{key:"extendYAxisAnnotations",value:function(i){var r=new Ti;return i.annotations.yaxis=Je.extendArray(void 0!==i.annotations.yaxis?i.annotations.yaxis:[],r.yAxisAnnotation),i}},{key:"extendXAxisAnnotations",value:function(i){var r=new Ti;return i.annotations.xaxis=Je.extendArray(void 0!==i.annotations.xaxis?i.annotations.xaxis:[],r.xAxisAnnotation),i}},{key:"extendPointAnnotations",value:function(i){var r=new Ti;return i.annotations.points=Je.extendArray(void 0!==i.annotations.points?i.annotations.points:[],r.pointAnnotation),i}},{key:"checkForDarkTheme",value:function(i){i.theme&&"dark"===i.theme.mode&&(i.tooltip||(i.tooltip={}),"light"!==i.tooltip.theme&&(i.tooltip.theme="dark"),i.chart.foreColor||(i.chart.foreColor="#f6f7f8"),i.chart.background||(i.chart.background="#424242"),i.theme.palette||(i.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(i){var r=i;if(r.tooltip.shared&&r.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===r.chart.type&&r.plotOptions.bar.horizontal){if(r.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");r.yaxis[0].reversed&&(r.yaxis[0].opposite=!0),r.xaxis.tooltip.enabled=!1,r.yaxis[0].tooltip.enabled=!1,r.chart.zoom.enabled=!1}return"bar"!==r.chart.type&&"rangeBar"!==r.chart.type||r.tooltip.shared&&"barWidth"===r.xaxis.crosshairs.width&&r.series.length>1&&(r.xaxis.crosshairs.width="tickWidth"),"candlestick"!==r.chart.type&&"boxPlot"!==r.chart.type||r.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(r.chart.type," chart is not supported.")),r.yaxis[0].reversed=!1),r}}]),pe}(),tn=function(){function pe(){Z(this,pe)}return we(pe,[{key:"initGlobalVars",value:function(i){i.series=[],i.seriesCandleO=[],i.seriesCandleH=[],i.seriesCandleM=[],i.seriesCandleL=[],i.seriesCandleC=[],i.seriesRangeStart=[],i.seriesRangeEnd=[],i.seriesRange=[],i.seriesPercent=[],i.seriesGoals=[],i.seriesX=[],i.seriesZ=[],i.seriesNames=[],i.seriesTotals=[],i.seriesLog=[],i.seriesColors=[],i.stackedSeriesTotals=[],i.seriesXvalues=[],i.seriesYvalues=[],i.labels=[],i.hasXaxisGroups=!1,i.groups=[],i.hasSeriesGroups=!1,i.seriesGroups=[],i.categoryLabels=[],i.timescaleLabels=[],i.noLabelsProvided=!1,i.resizeTimer=null,i.selectionResizeTimer=null,i.delayedElements=[],i.pointsArray=[],i.dataLabelsRects=[],i.isXNumeric=!1,i.skipLastTimelinelabel=!1,i.skipFirstTimelinelabel=!1,i.isDataXYZ=!1,i.isMultiLineX=!1,i.isMultipleYAxis=!1,i.maxY=-Number.MAX_VALUE,i.minY=Number.MIN_VALUE,i.minYArr=[],i.maxYArr=[],i.maxX=-Number.MAX_VALUE,i.minX=Number.MAX_VALUE,i.initialMaxX=-Number.MAX_VALUE,i.initialMinX=Number.MAX_VALUE,i.maxDate=0,i.minDate=Number.MAX_VALUE,i.minZ=Number.MAX_VALUE,i.maxZ=-Number.MAX_VALUE,i.minXDiff=Number.MAX_VALUE,i.yAxisScale=[],i.xAxisScale=null,i.xAxisTicksPositions=[],i.yLabelsCoords=[],i.yTitleCoords=[],i.barPadForNumericAxis=0,i.padHorizontal=0,i.xRange=0,i.yRange=[],i.zRange=0,i.dataPoints=0,i.xTickAmount=0,i.multiAxisTickAmount=0}},{key:"globalVars",value:function(i){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:i.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.zoom&&i.chart.zoom.enabled,panEnabled:"pan"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.pan,selectionEnabled:"selection"===i.chart.toolbar.autoSelected&&i.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(i){var r=this.globalVars(i);return this.initGlobalVars(r),r.initialConfig=Je.extend({},i),r.initialSeries=Je.clone(i.series),r.lastXAxis=Je.clone(r.initialConfig.xaxis),r.lastYAxis=Je.clone(r.initialConfig.yaxis),r}}]),pe}(),di=function(){function pe(i){Z(this,pe),this.opts=i}return we(pe,[{key:"init",value:function(){var i=new gn(this.opts).init({responsiveOverride:!1});return{config:i,globals:(new tn).init(i)}}}]),pe}(),Wi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.opts=null,this.seriesIndex=0}return we(pe,[{key:"clippedImgArea",value:function(i){var r=this.w,d=r.config,g=parseInt(r.globals.gridWidth,10),x=parseInt(r.globals.gridHeight,10),w=g>x?g:x,I=i.image,R=0,Y=0;void 0===i.width&&void 0===i.height?void 0!==d.fill.image.width&&void 0!==d.fill.image.height?(R=d.fill.image.width+1,Y=d.fill.image.height):(R=w+1,Y=w):(R=i.width,Y=i.height);var W=document.createElementNS(r.globals.SVGNS,"pattern");rt.setAttrs(W,{id:i.patternID,patternUnits:i.patternUnits?i.patternUnits:"userSpaceOnUse",width:R+"px",height:Y+"px"});var X=document.createElementNS(r.globals.SVGNS,"image");W.appendChild(X),X.setAttributeNS(window.SVG.xlink,"href",I),rt.setAttrs(X,{x:0,y:0,preserveAspectRatio:"none",width:R+"px",height:Y+"px"}),X.style.opacity=i.opacity,r.globals.dom.elDefs.node.appendChild(W)}},{key:"getSeriesIndex",value:function(i){var r=this.w,d=r.config.chart.type;return this.seriesIndex=("bar"===d||"rangeBar"===d)&&r.config.plotOptions.bar.distributed||"heatmap"===d||"treemap"===d?i.seriesNumber:i.seriesNumber%r.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(i){var r=this.w;this.opts=i;var d,g,x,w=this.w.config;this.seriesIndex=this.getSeriesIndex(i);var I=this.getFillColors()[this.seriesIndex];void 0!==r.globals.seriesColors[this.seriesIndex]&&(I=r.globals.seriesColors[this.seriesIndex]),"function"==typeof I&&(I=I({seriesIndex:this.seriesIndex,dataPointIndex:i.dataPointIndex,value:i.value,w:r}));var R=i.fillType?i.fillType:this.getFillType(this.seriesIndex),Y=Array.isArray(w.fill.opacity)?w.fill.opacity[this.seriesIndex]:w.fill.opacity;i.color&&(I=i.color),I||(I="#fff",console.warn("undefined color - ApexCharts"));var W=I;if(-1===I.indexOf("rgb")?I.length<9&&(W=Je.hexToRgba(I,Y)):I.indexOf("rgba")>-1&&(Y=Je.getOpacityFromRGBA(I)),i.opacity&&(Y=i.opacity),"pattern"===R&&(g=this.handlePatternFill({fillConfig:i.fillConfig,patternFill:g,fillColor:I,fillOpacity:Y,defaultColor:W})),"gradient"===R&&(x=this.handleGradientFill({fillConfig:i.fillConfig,fillColor:I,fillOpacity:Y,i:this.seriesIndex})),"image"===R){var X=w.fill.image.src,Q=i.patternID?i.patternID:"";this.clippedImgArea({opacity:Y,image:Array.isArray(X)?i.seriesNumber<X.length?X[i.seriesNumber]:X[0]:X,width:i.width?i.width:void 0,height:i.height?i.height:void 0,patternUnits:i.patternUnits,patternID:"pattern".concat(r.globals.cuid).concat(i.seriesNumber+1).concat(Q)}),d="url(#pattern".concat(r.globals.cuid).concat(i.seriesNumber+1).concat(Q,")")}else d="gradient"===R?x:"pattern"===R?g:W;return i.solid&&(d=W),d}},{key:"getFillType",value:function(i){var r=this.w;return Array.isArray(r.config.fill.type)?r.config.fill.type[i]:r.config.fill.type}},{key:"getFillColors",value:function(){var i=this.w,r=i.config,d=this.opts,g=[];return i.globals.comboCharts?"line"===i.config.series[this.seriesIndex].type?Array.isArray(i.globals.stroke.colors)?g=i.globals.stroke.colors:g.push(i.globals.stroke.colors):Array.isArray(i.globals.fill.colors)?g=i.globals.fill.colors:g.push(i.globals.fill.colors):"line"===r.chart.type?Array.isArray(i.globals.stroke.colors)?g=i.globals.stroke.colors:g.push(i.globals.stroke.colors):Array.isArray(i.globals.fill.colors)?g=i.globals.fill.colors:g.push(i.globals.fill.colors),void 0!==d.fillColors&&(g=[],Array.isArray(d.fillColors)?g=d.fillColors.slice():g.push(d.fillColors)),g}},{key:"handlePatternFill",value:function(i){var r=i.fillConfig,g=i.fillColor,x=i.fillOpacity,w=i.defaultColor,I=this.w.config.fill;r&&(I=r);var R=this.opts,Y=new rt(this.ctx),W=Array.isArray(I.pattern.strokeWidth)?I.pattern.strokeWidth[this.seriesIndex]:I.pattern.strokeWidth,X=g;return Array.isArray(I.pattern.style)?void 0!==I.pattern.style[R.seriesNumber]?Y.drawPattern(I.pattern.style[R.seriesNumber],I.pattern.width,I.pattern.height,X,W,x):w:Y.drawPattern(I.pattern.style,I.pattern.width,I.pattern.height,X,W,x)}},{key:"handleGradientFill",value:function(i){var r=i.fillColor,d=i.fillOpacity,g=i.fillConfig,x=i.i,w=this.w.config.fill;g&&(w=He(He({},w),g));var I,R=this.opts,Y=new rt(this.ctx),W=new Je,X=w.gradient.type,Q=r,ce=void 0===w.gradient.opacityFrom?d:Array.isArray(w.gradient.opacityFrom)?w.gradient.opacityFrom[x]:w.gradient.opacityFrom;Q.indexOf("rgba")>-1&&(ce=Je.getOpacityFromRGBA(Q));var me=void 0===w.gradient.opacityTo?d:Array.isArray(w.gradient.opacityTo)?w.gradient.opacityTo[x]:w.gradient.opacityTo;if(void 0===w.gradient.gradientToColors||0===w.gradient.gradientToColors.length)I=W.shadeColor("dark"===w.gradient.shade?-1*parseFloat(w.gradient.shadeIntensity):parseFloat(w.gradient.shadeIntensity),r.indexOf("rgb")>-1?Je.rgb2hex(r):r);else if(w.gradient.gradientToColors[R.seriesNumber]){var Ee=w.gradient.gradientToColors[R.seriesNumber];I=Ee,Ee.indexOf("rgba")>-1&&(me=Je.getOpacityFromRGBA(Ee))}else I=r;if(w.gradient.gradientFrom&&(Q=w.gradient.gradientFrom),w.gradient.gradientTo&&(I=w.gradient.gradientTo),w.gradient.inverseColors){var De=Q;Q=I,I=De}return Q.indexOf("rgb")>-1&&(Q=Je.rgb2hex(Q)),I.indexOf("rgb")>-1&&(I=Je.rgb2hex(I)),Y.drawGradient(X,Q,I,ce,me,R.size,w.gradient.stops,w.gradient.colorStops,x)}}]),pe}(),_n=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"setGlobalMarkerSize",value:function(){var i=this.w;if(i.globals.markers.size=Array.isArray(i.config.markers.size)?i.config.markers.size:[i.config.markers.size],i.globals.markers.size.length>0){if(i.globals.markers.size.length<i.globals.series.length+1)for(var r=0;r<=i.globals.series.length;r++)void 0===i.globals.markers.size[r]&&i.globals.markers.size.push(i.globals.markers.size[0])}else i.globals.markers.size=i.config.series.map(function(d){return i.config.markers.size})}},{key:"plotChartMarkers",value:function(i,r,d,g){var x,w=arguments.length>4&&void 0!==arguments[4]&&arguments[4],I=this.w,R=r,Y=i,W=null,X=new rt(this.ctx),Q=I.config.markers.discrete&&I.config.markers.discrete.length;if((I.globals.markers.size[r]>0||w||Q)&&(W=X.group({class:w||Q?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(I.globals.cuid,")")),Array.isArray(Y.x))for(var ce=0;ce<Y.x.length;ce++){var me=d;1===d&&0===ce&&(me=0),1===d&&1===ce&&(me=1);var Ee="apexcharts-marker";if("line"!==I.config.chart.type&&"area"!==I.config.chart.type||I.globals.comboCharts||I.config.tooltip.intersect||(Ee+=" no-pointer-events"),(Array.isArray(I.config.markers.size)?I.globals.markers.size[r]>0:I.config.markers.size>0)||w||Q){Je.isNumber(Y.y[ce])?Ee+=" w".concat(Je.randomId()):Ee="apexcharts-nullpoint";var De=this.getMarkerConfig({cssClass:Ee,seriesIndex:r,dataPointIndex:me});I.config.series[R].data[me]&&(I.config.series[R].data[me].fillColor&&(De.pointFillColor=I.config.series[R].data[me].fillColor),I.config.series[R].data[me].strokeColor&&(De.pointStrokeColor=I.config.series[R].data[me].strokeColor)),g&&(De.pSize=g),(Y.x[ce]<0||Y.x[ce]>I.globals.gridWidth||Y.y[ce]<-I.globals.markers.largestSize||Y.y[ce]>I.globals.gridHeight+I.globals.markers.largestSize)&&(De.pSize=0),(x=X.drawMarker(Y.x[ce],Y.y[ce],De)).attr("rel",me),x.attr("j",me),x.attr("index",r),x.node.setAttribute("default-marker-size",De.pSize),new yi(this.ctx).setSelectionFilter(x,r,me),this.addEvents(x),W&&W.add(x)}else void 0===I.globals.pointsArray[r]&&(I.globals.pointsArray[r]=[]),I.globals.pointsArray[r].push([Y.x[ce],Y.y[ce]])}return W}},{key:"getMarkerConfig",value:function(i){var r=i.cssClass,d=i.seriesIndex,g=i.dataPointIndex,x=void 0===g?null:g,w=i.finishRadius,I=void 0===w?null:w,R=this.w,Y=this.getMarkerStyle(d),W=R.globals.markers.size[d],X=R.config.markers;return null!==x&&X.discrete.length&&X.discrete.map(function(Q){Q.seriesIndex===d&&Q.dataPointIndex===x&&(Y.pointStrokeColor=Q.strokeColor,Y.pointFillColor=Q.fillColor,W=Q.size,Y.pointShape=Q.shape)}),{pSize:null===I?W:I,pRadius:X.radius,width:Array.isArray(X.width)?X.width[d]:X.width,height:Array.isArray(X.height)?X.height[d]:X.height,pointStrokeWidth:Array.isArray(X.strokeWidth)?X.strokeWidth[d]:X.strokeWidth,pointStrokeColor:Y.pointStrokeColor,pointFillColor:Y.pointFillColor,shape:Y.pointShape||(Array.isArray(X.shape)?X.shape[d]:X.shape),class:r,pointStrokeOpacity:Array.isArray(X.strokeOpacity)?X.strokeOpacity[d]:X.strokeOpacity,pointStrokeDashArray:Array.isArray(X.strokeDashArray)?X.strokeDashArray[d]:X.strokeDashArray,pointFillOpacity:Array.isArray(X.fillOpacity)?X.fillOpacity[d]:X.fillOpacity,seriesIndex:d}}},{key:"addEvents",value:function(i){var r=this.w,d=new rt(this.ctx);i.node.addEventListener("mouseenter",d.pathMouseEnter.bind(this.ctx,i)),i.node.addEventListener("mouseleave",d.pathMouseLeave.bind(this.ctx,i)),i.node.addEventListener("mousedown",d.pathMouseDown.bind(this.ctx,i)),i.node.addEventListener("click",r.config.markers.onClick),i.node.addEventListener("dblclick",r.config.markers.onDblClick),i.node.addEventListener("touchstart",d.pathMouseDown.bind(this.ctx,i),{passive:!0})}},{key:"getMarkerStyle",value:function(i){var r=this.w,d=r.globals.markers.colors,g=r.config.markers.strokeColor||r.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(g)?g[i]:g,pointFillColor:Array.isArray(d)?d[i]:d}}}]),pe}(),Ln=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return we(pe,[{key:"draw",value:function(i,r,d){var g=this.w,x=new rt(this.ctx),w=d.realIndex,I=d.pointsPos,R=d.zRatio,Y=d.elParent,W=x.group({class:"apexcharts-series-markers apexcharts-series-".concat(g.config.chart.type)});if(W.attr("clip-path","url(#gridRectMarkerMask".concat(g.globals.cuid,")")),Array.isArray(I.x))for(var X=0;X<I.x.length;X++){var Q=r+1,ce=!0;0===r&&0===X&&(Q=0),0===r&&1===X&&(Q=1);var me=0,Ee=g.globals.markers.size[w];if(R!==1/0){var De=g.config.plotOptions.bubble;Ee=g.globals.seriesZ[w][Q],De.zScaling&&(Ee/=R),De.minBubbleRadius&&Ee<De.minBubbleRadius&&(Ee=De.minBubbleRadius),De.maxBubbleRadius&&Ee>De.maxBubbleRadius&&(Ee=De.maxBubbleRadius)}g.config.chart.animations.enabled||(me=Ee);var Re=I.y[X];if(me=me||0,null!==Re&&void 0!==g.globals.series[w][Q]||(ce=!1),ce){var G=this.drawPoint(I.x[X],Re,me,Ee,w,Q,r);W.add(G)}Y.add(W)}}},{key:"drawPoint",value:function(i,r,d,g,x,w,I){var R=this.w,Y=x,W=new Jt(this.ctx),X=new yi(this.ctx),Q=new Wi(this.ctx),ce=new _n(this.ctx),me=new rt(this.ctx),Ee=ce.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:Y,dataPointIndex:w,finishRadius:"bubble"===R.config.chart.type||R.globals.comboCharts&&R.config.series[x]&&"bubble"===R.config.series[x].type?g:null});g=Ee.pSize;var De,Ce=Q.fillPath({seriesNumber:x,dataPointIndex:w,color:Ee.pointFillColor,patternUnits:"objectBoundingBox",value:R.globals.series[x][I]});if("circle"===Ee.shape?De=me.drawCircle(d):"square"!==Ee.shape&&"rect"!==Ee.shape||(De=me.drawRect(0,0,Ee.width-Ee.pointStrokeWidth/2,Ee.height-Ee.pointStrokeWidth/2,Ee.pRadius)),R.config.series[Y].data[w]&&R.config.series[Y].data[w].fillColor&&(Ce=R.config.series[Y].data[w].fillColor),De.attr({x:i-Ee.width/2-Ee.pointStrokeWidth/2,y:r-Ee.height/2-Ee.pointStrokeWidth/2,cx:i,cy:r,fill:Ce,"fill-opacity":Ee.pointFillOpacity,stroke:Ee.pointStrokeColor,r:g,"stroke-width":Ee.pointStrokeWidth,"stroke-dasharray":Ee.pointStrokeDashArray,"stroke-opacity":Ee.pointStrokeOpacity}),R.config.chart.dropShadow.enabled&&X.dropShadow(De,R.config.chart.dropShadow,x),!this.initialAnim||R.globals.dataChanged||R.globals.resized?R.globals.animationEnded=!0:W.animateMarker(De,0,"circle"===Ee.shape?g:{width:Ee.width,height:Ee.height},R.config.chart.animations.speed,R.globals.easing,function(){window.setTimeout(function(){W.animationCompleted(De)},100)}),R.globals.dataChanged&&"circle"===Ee.shape)if(this.dynamicAnim){var re,te,oe,ye,Fe=R.config.chart.animations.dynamicAnimation.speed;null!=(ye=R.globals.previousPaths[x]&&R.globals.previousPaths[x][I])&&(re=ye.x,te=ye.y,oe=void 0!==ye.r?ye.r:g);for(var ht=0;ht<R.globals.collapsedSeries.length;ht++)R.globals.collapsedSeries[ht].index===x&&(Fe=1,g=0);0===i&&0===r&&(g=0),W.animateCircle(De,{cx:re,cy:te,r:oe},{cx:i,cy:r,r:g},Fe,R.globals.easing)}else De.attr({r:g});return De.attr({rel:w,j:w,index:x,"default-marker-size":g}),X.setSelectionFilter(De,x,w),ce.addEvents(De),De.node.classList.add("apexcharts-marker"),De}},{key:"centerTextInBubble",value:function(i){return{y:i+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),pe}(),Gn=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"dataLabelsCorrection",value:function(i,r,d,g,x,w,I){var R=this.w,Y=!1,W=new rt(this.ctx).getTextRects(d,I),X=W.width,Q=W.height;if(r<0&&(r=0),r>R.globals.gridHeight+Q&&(r=R.globals.gridHeight+Q/2),void 0===R.globals.dataLabelsRects[g]&&(R.globals.dataLabelsRects[g]=[]),R.globals.dataLabelsRects[g].push({x:i,y:r,width:X,height:Q}),void 0!==R.globals.dataLabelsRects[g][R.globals.dataLabelsRects[g].length-2]){var Ee=R.globals.dataLabelsRects[g][void 0!==R.globals.lastDrawnDataLabelsIndexes[g]?R.globals.lastDrawnDataLabelsIndexes[g][R.globals.lastDrawnDataLabelsIndexes[g].length-1]:0];(i>Ee.x+Ee.width||r>Ee.y+Ee.height||r+Q<Ee.y||i+X<Ee.x)&&(Y=!0)}return(0===x||w)&&(Y=!0),{x:i,y:r,textRects:W,drawnextLabel:Y}}},{key:"drawDataLabel",value:function(i){var r=this,d=i.type,g=i.pos,x=i.i,w=i.j,I=i.isRangeStart,R=i.strokeWidth,Y=void 0===R?2:R,W=this.w,X=new rt(this.ctx),Q=W.config.dataLabels,ce=0,me=0,Ee=w,De=null;if(-1!==W.globals.collapsedSeriesIndices.indexOf(x)||!Q.enabled||!Array.isArray(g.x))return De;De=X.group({class:"apexcharts-data-labels"});for(var Ce=0;Ce<g.x.length;Ce++)if(ce=g.x[Ce]+Q.offsetX,me=g.y[Ce]+Q.offsetY+Y,!isNaN(ce)){1===w&&0===Ce&&(Ee=0),1===w&&1===Ce&&(Ee=1);var Re=W.globals.series[x][Ee];"rangeArea"===d&&(Re=I?W.globals.seriesRangeStart[x][Ee]:W.globals.seriesRangeEnd[x][Ee]);var G="",re=function(te){return W.config.dataLabels.formatter(te,{ctx:r.ctx,seriesIndex:x,dataPointIndex:Ee,w:W})};"bubble"===W.config.chart.type?(G=re(Re=W.globals.seriesZ[x][Ee]),me=g.y[Ce],me=new Ln(this.ctx).centerTextInBubble(me,x,Ee).y):void 0!==Re&&(G=re(Re)),this.plotDataLabelsText({x:ce,y:me,text:G,i:x,j:Ee,parent:De,offsetCorrection:!0,dataLabelsConfig:W.config.dataLabels})}return De}},{key:"plotDataLabelsText",value:function(i){var r=this.w,d=new rt(this.ctx),g=i.x,x=i.y,w=i.i,I=i.j,R=i.text,Y=i.textAnchor,W=i.fontSize,X=i.parent,Q=i.dataLabelsConfig,ce=i.color,me=i.alwaysDrawDataLabel,Ee=i.offsetCorrection;if(!(Array.isArray(r.config.dataLabels.enabledOnSeries)&&r.config.dataLabels.enabledOnSeries.indexOf(w)<0)){var De={x:g,y:x,drawnextLabel:!0,textRects:null};Ee&&(De=this.dataLabelsCorrection(g,x,R,w,I,me,parseInt(Q.style.fontSize,10))),r.globals.zoomed||(g=De.x,x=De.y),De.textRects&&(g<-20-De.textRects.width||g>r.globals.gridWidth+De.textRects.width+30)&&(R="");var Ce=r.globals.dataLabels.style.colors[w];(("bar"===r.config.chart.type||"rangeBar"===r.config.chart.type)&&r.config.plotOptions.bar.distributed||r.config.dataLabels.distributed)&&(Ce=r.globals.dataLabels.style.colors[I]),"function"==typeof Ce&&(Ce=Ce({series:r.globals.series,seriesIndex:w,dataPointIndex:I,w:r})),ce&&(Ce=ce);var Re=Q.offsetX,G=Q.offsetY;if("bar"!==r.config.chart.type&&"rangeBar"!==r.config.chart.type||(Re=0,G=0),De.drawnextLabel){var re=d.drawText({width:100,height:parseInt(Q.style.fontSize,10),x:g+Re,y:x+G,foreColor:Ce,textAnchor:Y||Q.textAnchor,text:R,fontSize:W||Q.style.fontSize,fontFamily:Q.style.fontFamily,fontWeight:Q.style.fontWeight||"normal"});if(re.attr({class:"apexcharts-datalabel",cx:g,cy:x}),Q.dropShadow.enabled){var te=Q.dropShadow;new yi(this.ctx).dropShadow(re,te)}X.add(re),void 0===r.globals.lastDrawnDataLabelsIndexes[w]&&(r.globals.lastDrawnDataLabelsIndexes[w]=[]),r.globals.lastDrawnDataLabelsIndexes[w].push(I)}}}},{key:"addBackgroundToDataLabel",value:function(i,r){var d=this.w,g=d.config.dataLabels.background,x=g.padding,w=g.padding/2,I=r.width,R=r.height,Y=new rt(this.ctx).drawRect(r.x-x,r.y-w/2,I+2*x,R+w,g.borderRadius,"transparent"===d.config.chart.background?"#fff":d.config.chart.background,g.opacity,g.borderWidth,g.borderColor);return g.dropShadow.enabled&&new yi(this.ctx).dropShadow(Y,g.dropShadow),Y}},{key:"dataLabelsBackground",value:function(){var i=this.w;if("bubble"!==i.config.chart.type)for(var r=i.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),d=0;d<r.length;d++){var g=r[d],x=g.getBBox(),w=null;if(x.width&&x.height&&(w=this.addBackgroundToDataLabel(g,x)),w){g.parentNode.insertBefore(w.node,g);var I=g.getAttribute("fill");!i.config.chart.animations.enabled||i.globals.resized||i.globals.dataChanged?w.attr({fill:I}):w.animate().attr({fill:I}),g.setAttribute("fill",i.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var i=this.w,r=i.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),d=i.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),g=0;g<r.length;g++)d&&d.insertBefore(r[g],d.nextSibling)}}]),pe}(),Yn=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.legendInactiveClass="legend-mouseover-inactive"}return we(pe,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(i){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(Je.escapeString(i),"']"))}},{key:"isSeriesHidden",value:function(i){var r=this.getSeriesByName(i),d=parseInt(r.getAttribute("data:realIndex"),10);return{isHidden:r.classList.contains("apexcharts-series-collapsed"),realIndex:d}}},{key:"addCollapsedClassToSeries",value:function(i,r){var d=this.w;function g(x){for(var w=0;w<x.length;w++)x[w].index===r&&i.node.classList.add("apexcharts-series-collapsed")}g(d.globals.collapsedSeries),g(d.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(i){var r=this.isSeriesHidden(i);return this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,r.isHidden),r.isHidden}},{key:"showSeries",value:function(i){var r=this.isSeriesHidden(i);r.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,!0)}},{key:"hideSeries",value:function(i){var r=this.isSeriesHidden(i);r.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,!1)}},{key:"resetSeries",value:function(){var i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=this.w,x=Je.clone(g.globals.initialSeries);g.globals.previousPaths=[],d?(g.globals.collapsedSeries=[],g.globals.ancillaryCollapsedSeries=[],g.globals.collapsedSeriesIndices=[],g.globals.ancillaryCollapsedSeriesIndices=[]):x=this.emptyCollapsedSeries(x),g.config.series=x,i&&(r&&(g.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(x,g.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(i){for(var r=this.w,d=0;d<i.length;d++)r.globals.collapsedSeriesIndices.indexOf(d)>-1&&(i[d].data=[]);return i}},{key:"toggleSeriesOnHover",value:function(i,r){var d=this.w;r||(r=i.target);var g=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===i.type){var x=parseInt(r.getAttribute("rel"),10)-1,w=null,I=null;d.globals.axisCharts||"radialBar"===d.config.chart.type?d.globals.axisCharts?(w=d.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(x,"']")),I=d.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(x,"']"))):w=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(x+1,"']")):w=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(x+1,"'] path"));for(var R=0;R<g.length;R++)g[R].classList.add(this.legendInactiveClass);null!==w&&(d.globals.axisCharts||w.parentNode.classList.remove(this.legendInactiveClass),w.classList.remove(this.legendInactiveClass),null!==I&&I.classList.remove(this.legendInactiveClass))}else if("mouseout"===i.type)for(var Y=0;Y<g.length;Y++)g[Y].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(i,r){var d=this,g=this.w,x=g.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),w=function(R){for(var Y=0;Y<x.length;Y++)x[Y].classList[R](d.legendInactiveClass)};if("mousemove"===i.type){var I=parseInt(r.getAttribute("rel"),10)-1;w("add"),function(R){for(var Y=0;Y<x.length;Y++){var W=parseInt(x[Y].getAttribute("val"),10);W>=R.from&&W<=R.to&&x[Y].classList.remove(d.legendInactiveClass)}}(g.config.plotOptions.heatmap.colorScale.ranges[I])}else"mouseout"===i.type&&w("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=this.w,g=0;if(d.config.series.length>1)for(var x=d.config.series.map(function(I,R){return I.data&&I.data.length>0&&-1===d.globals.collapsedSeriesIndices.indexOf(R)&&(!d.globals.comboCharts||0===r.length||r.length&&r.indexOf(d.config.series[R].type)>-1)?R:-1}),w="asc"===i?0:x.length-1;"asc"===i?w<x.length:w>=0;"asc"===i?w++:w--)if(-1!==x[w]){g=x[w];break}return g}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(i,r){return"bar"===i.type||"column"===i.type?r:-1}).filter(function(i){return-1!==i}):this.w.config.series.map(function(i,r){return r})}},{key:"getPreviousPaths",value:function(){var i=this.w;function r(w,I,R){for(var Y=w[I].childNodes,W={type:R,paths:[],realIndex:w[I].getAttribute("data:realIndex")},X=0;X<Y.length;X++)if(Y[X].hasAttribute("pathTo")){var Q=Y[X].getAttribute("pathTo");W.paths.push({d:Q})}i.globals.previousPaths.push(W)}i.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(w){for(var R=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(w,"-series .apexcharts-series")),Y=0;Y<R.length;Y++)r(R,Y,w)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var d=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i.config.chart.type," .apexcharts-series"));if(d.length>0)for(var g=function(w){for(var I=i.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(w,"'] rect")),R=[],Y=function(X){var Q=function(me){return I[X].getAttribute(me)},ce={x:parseFloat(Q("x")),y:parseFloat(Q("y")),width:parseFloat(Q("width")),height:parseFloat(Q("height"))};R.push({rect:ce,color:I[X].getAttribute("color")})},W=0;W<I.length;W++)Y(W);i.globals.previousPaths.push(R)},x=0;x<d.length;x++)g(x);i.globals.axisCharts||(i.globals.previousPaths=i.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(i){var r=this.w,d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series"));if(d.length>0)for(var g=0;g<d.length;g++){for(var x=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series[data\\:realIndex='").concat(g,"'] circle")),w=[],I=0;I<x.length;I++)w.push({x:x[I].getAttribute("cx"),y:x[I].getAttribute("cy"),r:x[I].getAttribute("r")});r.globals.previousPaths.push(w)}}},{key:"clearPreviousPaths",value:function(){var i=this.w;i.globals.previousPaths=[],i.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var i=this.w,r=i.config.noData,d=new rt(this.ctx),g=i.globals.svgWidth/2,x=i.globals.svgHeight/2,w="middle";if(i.globals.noData=!0,i.globals.animationEnded=!0,"left"===r.align?(g=10,w="start"):"right"===r.align&&(g=i.globals.svgWidth-10,w="end"),"top"===r.verticalAlign?x=50:"bottom"===r.verticalAlign&&(x=i.globals.svgHeight-50),g+=r.offsetX,x=x+parseInt(r.style.fontSize,10)+2+r.offsetY,void 0!==r.text&&""!==r.text){var I=d.drawText({x:g,y:x,text:r.text,textAnchor:w,fontSize:r.style.fontSize,fontFamily:r.style.fontFamily,foreColor:r.style.color,opacity:1,class:"apexcharts-text-nodata"});i.globals.dom.Paper.add(I)}}},{key:"setNullSeriesToZeroValues",value:function(i){for(var r=this.w,d=0;d<i.length;d++)if(0===i[d].length)for(var g=0;g<i[r.globals.maxValsInArrayIndex].length;g++)i[d].push(0);return i}},{key:"hasAllSeriesEqualX",value:function(){for(var i=!0,r=this.w,d=this.filteredSeriesX(),g=0;g<d.length-1;g++)if(d[g][0]!==d[g+1][0]){i=!1;break}return r.globals.allSeriesHasEqualX=i,i}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(r){return r.length>0?r:[]})}}]),pe}(),on=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new bi(this.ctx)}return we(pe,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var i=this.w.config.series.slice(),r=new Yn(this.ctx);if(this.activeSeriesIndex=r.getActiveConfigSeriesIndex(),void 0!==i[this.activeSeriesIndex].data&&i[this.activeSeriesIndex].data.length>0&&null!==i[this.activeSeriesIndex].data[0]&&void 0!==i[this.activeSeriesIndex].data[0].x&&null!==i[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var i=this.w.config.series.slice(),r=new Yn(this.ctx);if(this.activeSeriesIndex=r.getActiveConfigSeriesIndex(),void 0!==i[this.activeSeriesIndex].data&&i[this.activeSeriesIndex].data.length>0&&null!=i[this.activeSeriesIndex].data[0]&&i[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(i,r){for(var d=this.w.config,g=this.w.globals,x="boxPlot"===d.chart.type||"boxPlot"===d.series[r].type,w=0;w<i[r].data.length;w++)if(void 0!==i[r].data[w][1]&&(Array.isArray(i[r].data[w][1])&&4===i[r].data[w][1].length&&!x?this.twoDSeries.push(Je.parseNumber(i[r].data[w][1][3])):this.twoDSeries.push(Je.parseNumber(i[r].data[w].length>=5?i[r].data[w][4]:i[r].data[w][1])),g.dataFormatXNumeric=!0),"datetime"===d.xaxis.type){var I=new Date(i[r].data[w][0]);I=new Date(I).getTime(),this.twoDSeriesX.push(I)}else this.twoDSeriesX.push(i[r].data[w][0]);for(var R=0;R<i[r].data.length;R++)void 0!==i[r].data[R][2]&&(this.threeDSeries.push(i[r].data[R][2]),g.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(i,r){var d=this.w.config,g=this.w.globals,x=new Ii(this.ctx),w=r;g.collapsedSeriesIndices.indexOf(r)>-1&&(w=this.activeSeriesIndex);for(var I=0;I<i[r].data.length;I++)void 0!==i[r].data[I].y&&(Array.isArray(i[r].data[I].y)?this.twoDSeries.push(Je.parseNumber(i[r].data[I].y[i[r].data[I].y.length-1])):this.twoDSeries.push(Je.parseNumber(i[r].data[I].y))),void 0!==i[r].data[I].goals&&Array.isArray(i[r].data[I].goals)?(void 0===this.seriesGoals[r]&&(this.seriesGoals[r]=[]),this.seriesGoals[r].push(i[r].data[I].goals)):(void 0===this.seriesGoals[r]&&(this.seriesGoals[r]=[]),this.seriesGoals[r].push(null));for(var R=0;R<i[w].data.length;R++){var Y="string"==typeof i[w].data[R].x,W=Array.isArray(i[w].data[R].x),X=!W&&!!x.isValidDate(i[w].data[R].x);Y||X?Y||d.xaxis.convertedCatToNumeric?"datetime"!==d.xaxis.type||g.isBarHorizontal&&g.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(i[w].data[R].x),isNaN(i[w].data[R].x)||"category"===this.w.config.xaxis.type||"string"==typeof i[w].data[R].x||(g.isXNumeric=!0)):this.twoDSeriesX.push(x.parseDate(i[w].data[R].x)):"datetime"===d.xaxis.type?this.twoDSeriesX.push(x.parseDate(i[w].data[R].x.toString())):(g.dataFormatXNumeric=!0,g.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(i[w].data[R].x))):W?(this.fallbackToCategory=!0,this.twoDSeriesX.push(i[w].data[R].x)):(g.isXNumeric=!0,g.dataFormatXNumeric=!0,this.twoDSeriesX.push(i[w].data[R].x))}if(i[r].data[0]&&void 0!==i[r].data[0].z){for(var ce=0;ce<i[r].data.length;ce++)this.threeDSeries.push(i[r].data[ce].z);g.isDataXYZ=!0}}},{key:"handleRangeData",value:function(i,r){var d=this.w.globals,g={};return this.isFormat2DArray()?g=this.handleRangeDataFormat("array",i,r):this.isFormatXY()&&(g=this.handleRangeDataFormat("xy",i,r)),d.seriesRangeStart.push(void 0===g.start?[]:g.start),d.seriesRangeEnd.push(void 0===g.end?[]:g.end),d.seriesRange.push(g.rangeUniques),d.seriesRange.forEach(function(x,w){x&&x.forEach(function(I,R){I.y.forEach(function(Y,W){for(var X=0;X<I.y.length;X++)W!==X&&Y.y1<=I.y[X].y2&&I.y[X].y1<=Y.y2&&(I.overlaps.indexOf(Y.rangeName)<0&&I.overlaps.push(Y.rangeName),I.overlaps.indexOf(I.y[X].rangeName)<0&&I.overlaps.push(I.y[X].rangeName))})})}),g}},{key:"handleCandleStickBoxData",value:function(i,r){var d=this.w.globals,g={};return this.isFormat2DArray()?g=this.handleCandleStickBoxDataFormat("array",i,r):this.isFormatXY()&&(g=this.handleCandleStickBoxDataFormat("xy",i,r)),d.seriesCandleO[r]=g.o,d.seriesCandleH[r]=g.h,d.seriesCandleM[r]=g.m,d.seriesCandleL[r]=g.l,d.seriesCandleC[r]=g.c,g}},{key:"handleRangeDataFormat",value:function(i,r,d){var g=[],x=[],w=r[d].data.filter(function(W,X,Q){return X===Q.findIndex(function(ce){return ce.x===W.x})}).map(function(W,X){return{x:W.x,overlaps:[],y:[]}});if("array"===i)for(var I=0;I<r[d].data.length;I++)Array.isArray(r[d].data[I])?(g.push(r[d].data[I][1][0]),x.push(r[d].data[I][1][1])):(g.push(r[d].data[I]),x.push(r[d].data[I]));else if("xy"===i)for(var R=function(W){var X=Array.isArray(r[d].data[W].y),Q=Je.randomId(),ce=r[d].data[W].x,me={y1:X?r[d].data[W].y[0]:r[d].data[W].y,y2:X?r[d].data[W].y[1]:r[d].data[W].y,rangeName:Q};r[d].data[W].rangeName=Q;var Ee=w.findIndex(function(De){return De.x===ce});w[Ee].y.push(me),g.push(me.y1),x.push(me.y2)},Y=0;Y<r[d].data.length;Y++)R(Y);return{start:g,end:x,rangeUniques:w}}},{key:"handleCandleStickBoxDataFormat",value:function(i,r,d){var g=this.w,x="boxPlot"===g.config.chart.type||"boxPlot"===g.config.series[d].type,w=[],I=[],R=[],Y=[],W=[];if("array"===i)if(x&&6===r[d].data[0].length||!x&&5===r[d].data[0].length)for(var X=0;X<r[d].data.length;X++)w.push(r[d].data[X][1]),I.push(r[d].data[X][2]),x?(R.push(r[d].data[X][3]),Y.push(r[d].data[X][4]),W.push(r[d].data[X][5])):(Y.push(r[d].data[X][3]),W.push(r[d].data[X][4]));else for(var Q=0;Q<r[d].data.length;Q++)Array.isArray(r[d].data[Q][1])&&(w.push(r[d].data[Q][1][0]),I.push(r[d].data[Q][1][1]),x?(R.push(r[d].data[Q][1][2]),Y.push(r[d].data[Q][1][3]),W.push(r[d].data[Q][1][4])):(Y.push(r[d].data[Q][1][2]),W.push(r[d].data[Q][1][3])));else if("xy"===i)for(var ce=0;ce<r[d].data.length;ce++)Array.isArray(r[d].data[ce].y)&&(w.push(r[d].data[ce].y[0]),I.push(r[d].data[ce].y[1]),x?(R.push(r[d].data[ce].y[2]),Y.push(r[d].data[ce].y[3]),W.push(r[d].data[ce].y[4])):(Y.push(r[d].data[ce].y[2]),W.push(r[d].data[ce].y[3])));return{o:w,h:I,m:R,l:Y,c:W}}},{key:"parseDataAxisCharts",value:function(i){var r,d=this,x=this.w.config,w=this.w.globals,I=new Ii(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),R=x.labels.length>0?x.labels.slice():x.xaxis.categories.slice();if(w.isRangeBar="rangeBar"===x.chart.type&&w.isBarHorizontal,w.hasXaxisGroups="category"===x.xaxis.type&&x.xaxis.group.groups.length>0,w.hasXaxisGroups&&(w.groups=x.xaxis.group.groups),w.hasSeriesGroups=null===(r=i[0])||void 0===r?void 0:r.group,w.hasSeriesGroups){var Y=[],W=tt(new Set(i.map(function(me){return me.group})));i.forEach(function(me,Ee){var De=W.indexOf(me.group);Y[De]||(Y[De]=[]),Y[De].push(me.name)}),w.seriesGroups=Y}for(var X=function(){for(var me=0;me<R.length;me++)if("string"==typeof R[me]){if(!I.isValidDate(R[me]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");d.twoDSeriesX.push(I.parseDate(R[me]))}else d.twoDSeriesX.push(R[me])},Q=0;Q<i.length;Q++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===i[Q].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==x.chart.type&&"rangeArea"!==x.chart.type&&"rangeBar"!==i[Q].type&&"rangeArea"!==i[Q].type||(w.isRangeData=!0,"rangeBar"!==x.chart.type&&"rangeArea"!==x.chart.type||this.handleRangeData(i,Q)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(i,Q):this.isFormatXY()&&this.handleFormatXY(i,Q),"candlestick"!==x.chart.type&&"candlestick"!==i[Q].type&&"boxPlot"!==x.chart.type&&"boxPlot"!==i[Q].type||this.handleCandleStickBoxData(i,Q),w.series.push(this.twoDSeries),w.labels.push(this.twoDSeriesX),w.seriesX.push(this.twoDSeriesX),w.seriesGoals=this.seriesGoals,Q!==this.activeSeriesIndex||this.fallbackToCategory||(w.isXNumeric=!0);else{"datetime"===x.xaxis.type?(w.isXNumeric=!0,X(),w.seriesX.push(this.twoDSeriesX)):"numeric"===x.xaxis.type&&(w.isXNumeric=!0,R.length>0&&(this.twoDSeriesX=R,w.seriesX.push(this.twoDSeriesX))),w.labels.push(this.twoDSeriesX);var ce=i[Q].data.map(function(me){return Je.parseNumber(me)});w.series.push(ce)}w.seriesZ.push(this.threeDSeries),w.seriesNames.push(void 0!==i[Q].name?i[Q].name:"series-"+parseInt(Q+1,10)),w.seriesColors.push(void 0!==i[Q].color?i[Q].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(i){var r=this.w.globals,d=this.w.config;r.series=i.slice(),r.seriesNames=d.labels.slice();for(var g=0;g<r.series.length;g++)void 0===r.seriesNames[g]&&r.seriesNames.push("series-"+(g+1));return this.w}},{key:"handleExternalLabelsData",value:function(i){var r=this.w.config,d=this.w.globals;r.xaxis.categories.length>0?d.labels=r.xaxis.categories:r.labels.length>0?d.labels=r.labels.slice():this.fallbackToCategory?(d.labels=d.labels[0],d.seriesRange.length&&(d.seriesRange.map(function(g){g.forEach(function(x){d.labels.indexOf(x.x)<0&&x.x&&d.labels.push(x.x)})}),d.labels=Array.from(new Set(d.labels.map(JSON.stringify)),JSON.parse)),r.xaxis.convertedCatToNumeric&&(new ji(r).convertCatToNumericXaxis(r,this.ctx,d.seriesX[0]),this._generateExternalLabels(i))):this._generateExternalLabels(i)}},{key:"_generateExternalLabels",value:function(i){var r=this.w.globals,d=this.w.config,g=[];if(r.axisCharts){if(r.series.length>0)if(this.isFormatXY())for(var x=d.series.map(function(X,Q){return X.data.filter(function(ce,me,Ee){return Ee.findIndex(function(De){return De.x===ce.x})===me})}),w=x.reduce(function(X,Q,ce,me){return me[X].length>Q.length?X:ce},0),I=0;I<x[w].length;I++)g.push(I+1);else for(var R=0;R<r.series[r.maxValsInArrayIndex].length;R++)g.push(R+1);r.seriesX=[];for(var Y=0;Y<i.length;Y++)r.seriesX.push(g);this.w.globals.isBarHorizontal||(r.isXNumeric=!0)}if(0===g.length){g=r.axisCharts?[]:r.series.map(function(X,Q){return Q+1});for(var W=0;W<i.length;W++)r.seriesX.push(g)}r.labels=g,d.xaxis.convertedCatToNumeric&&(r.categoryLabels=g.map(function(X){return d.xaxis.labels.formatter(X)})),r.noLabelsProvided=!0}},{key:"parseData",value:function(i){var r=this.w,d=r.config,g=r.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),g.axisCharts?(this.parseDataAxisCharts(i),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(i),d.chart.stacked){var x=new Yn(this.ctx);g.series=x.setNullSeriesToZeroValues(g.series)}this.coreUtils.getSeriesTotals(),g.axisCharts&&(g.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),g.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),g.dataFormatXNumeric||g.isXNumeric&&("numeric"!==d.xaxis.type||0!==d.labels.length||0!==d.xaxis.categories.length)||this.handleExternalLabelsData(i);for(var w=this.coreUtils.getCategoryLabels(g.labels),I=0;I<w.length;I++)if(Array.isArray(w[I])){g.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var i=this.w,r=[];i.globals.seriesYAxisMap.forEach(function(d,g){var x=0;d.forEach(function(w){-1!==i.globals.collapsedSeriesIndices.indexOf(w)&&x++}),x>0&&x==d.length&&r.push(g)}),i.globals.ignoreYAxisIndexes=r.map(function(d){return d})}}]),pe}(),jt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"getLabel",value:function(i,r,d,g){var De,Ce,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",I=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],R=this.w,Y=void 0===i[g]?"":i[g],W=Y,X=R.globals.xLabelFormatter,Q=R.config.xaxis.labels.formatter,ce=!1,me=new ki(this.ctx);I&&(W=me.xLabelFormat(X,Y,Y,{i:g,dateFormatter:new Ii(this.ctx).formatDate,w:R}),void 0!==Q&&(W=Q(Y,i[g],{i:g,dateFormatter:new Ii(this.ctx).formatDate,w:R}))),r.length>0?(De=r[g].unit,Ce=null,r.forEach(function(te){"month"===te.unit?Ce="year":"day"===te.unit?Ce="month":"hour"===te.unit?Ce="day":"minute"===te.unit&&(Ce="hour")}),ce=Ce===De,d=r[g].position,W=r[g].value):"datetime"===R.config.xaxis.type&&void 0===Q&&(W=""),void 0===W&&(W=""),W=Array.isArray(W)?W:W.toString();var G,Re=new rt(this.ctx);G=R.globals.rotateXLabels&&I?Re.getTextRects(W,parseInt(w,10),null,"rotate(".concat(R.config.xaxis.labels.rotate," 0 0)"),!1):Re.getTextRects(W,parseInt(w,10));var re=!R.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(W)&&("NaN"===String(W)||x.indexOf(W)>=0&&re)&&(W=""),{x:d,text:W,textRect:G,isBold:ce}}},{key:"checkLabelBasedOnTickamount",value:function(i,r,d){var g=this.w,x=g.config.xaxis.tickAmount;return"dataPoints"===x&&(x=Math.round(g.globals.gridWidth/120)),x>d||i%Math.round(d/(x+1))==0||(r.text=""),r}},{key:"checkForOverflowingLabels",value:function(i,r,d,g,x){var w=this.w;if(0===i&&w.globals.skipFirstTimelinelabel&&(r.text=""),i===d-1&&w.globals.skipLastTimelinelabel&&(r.text=""),w.config.xaxis.labels.hideOverlappingLabels&&g.length>0){var I=x[x.length-1];r.x<I.textRect.width/(w.globals.rotateXLabels?Math.abs(w.config.xaxis.labels.rotate)/12:1.01)+I.x&&(r.text="")}return r}},{key:"checkForReversedLabels",value:function(i,r){var d=this.w;return d.config.yaxis[i]&&d.config.yaxis[i].reversed&&r.reverse(),r}},{key:"isYAxisHidden",value:function(i){var r=this.w,d=new bi(this.ctx),g=!r.globals.seriesYAxisMap[i].some(function(x){return-1===r.globals.collapsedSeriesIndices.indexOf(x)});return!r.config.yaxis[i].show||!r.config.yaxis[i].showForNullSeries&&d.isSeriesNull(i)&&g}},{key:"getYAxisForeColor",value:function(i,r){var d=this.w;return Array.isArray(i)&&d.globals.yAxisScale[r]&&this.ctx.theme.pushExtraColors(i,d.globals.yAxisScale[r].result.length,!1),i}},{key:"drawYAxisTicks",value:function(i,r,d,g,x,w,I){var R=this.w,Y=new rt(this.ctx),W=R.globals.translateY;if(g.show&&r>0){!0===R.config.yaxis[x].opposite&&(i+=g.width);for(var X=r;X>=0;X--){var Q=W+r/10+R.config.yaxis[x].labels.offsetY-1;R.globals.isBarHorizontal&&(Q=w*X),"heatmap"===R.config.chart.type&&(Q+=w/2);var ce=Y.drawLine(i+d.offsetX-g.width+g.offsetX,Q+g.offsetY,i+d.offsetX+g.offsetX,Q+g.offsetY,g.color);I.add(ce),W+=w}}}}]),pe}(),gi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"scaleSvgNode",value:function(i,r){var d=parseFloat(i.getAttributeNS(null,"width")),g=parseFloat(i.getAttributeNS(null,"height"));i.setAttributeNS(null,"width",d*r),i.setAttributeNS(null,"height",g*r),i.setAttributeNS(null,"viewBox","0 0 "+d+" "+g)}},{key:"fixSvgStringForIe11",value:function(i){if(!Je.isIE11())return i.replace(/&nbsp;/g,"&#160;");var r=0,d=i.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(g){return 2==++r?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':g});return(d=d.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(i){null==i&&(i=1);var r=this.w.globals.dom.Paper.svg();if(1!==i){var d=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(d,i),r=(new XMLSerializer).serializeToString(d)}return this.fixSvgStringForIe11(r)}},{key:"cleanup",value:function(){var i=this.w,r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),d=i.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),g=i.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(g,function(x){x.setAttribute("width",0)}),r&&r[0]&&(r[0].setAttribute("x",-500),r[0].setAttribute("x1",-500),r[0].setAttribute("x2",-500)),d&&d[0]&&(d[0].setAttribute("y",-100),d[0].setAttribute("y1",-100),d[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var i=this.getSvgString(),r=new Blob([i],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(r)}},{key:"dataURI",value:function(i){var r=this;return new Promise(function(d){var g=r.w,x=i?i.scale||i.width/g.globals.svgWidth:1;r.cleanup();var w=document.createElement("canvas");w.width=g.globals.svgWidth*x,w.height=parseInt(g.globals.dom.elWrap.style.height,10)*x;var I="transparent"===g.config.chart.background?"#fff":g.config.chart.background,R=w.getContext("2d");R.fillStyle=I,R.fillRect(0,0,w.width*x,w.height*x);var Y=r.getSvgString(x);if(window.canvg&&Je.isIE11()){var W=window.canvg.Canvg.fromString(R,Y,{ignoreClear:!0,ignoreDimensions:!0});W.start();var X=w.msToBlob();W.stop(),d({blob:X})}else{var Q="data:image/svg+xml,"+encodeURIComponent(Y),ce=new Image;ce.crossOrigin="anonymous",ce.onload=function(){if(R.drawImage(ce,0,0),w.msToBlob){var me=w.msToBlob();d({blob:me})}else{var Ee=w.toDataURL("image/png");d({imgURI:Ee})}},ce.src=Q}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var i=this;this.dataURI().then(function(r){var d=r.imgURI,g=r.blob;g?navigator.msSaveOrOpenBlob(g,i.w.globals.chartID+".png"):i.triggerDownload(d,i.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(i){var r=this,d=i.series,g=i.fileName,x=i.columnDelimiter,w=void 0===x?",":x,I=i.lineDelimiter,R=void 0===I?"\n":I,Y=this.w;d||(d=Y.config.series);var W,X,Q=[],ce=[],me="",Ee=Y.globals.series.map(function(oe,ye){return-1===Y.globals.collapsedSeriesIndices.indexOf(ye)?oe:[]}),De=function(oe){return"datetime"===Y.config.xaxis.type&&String(oe).length>=10},Ce=Math.max.apply(Math,tt(d.map(function(oe){return oe.data?oe.data.length:0}))),Re=new on(this.ctx),G=new jt(this.ctx),re=function(oe){var ye="";if(Y.globals.axisCharts){if("category"===Y.config.xaxis.type||Y.config.xaxis.convertedCatToNumeric)if(Y.globals.isBarHorizontal){var Fe=Y.globals.yLabelFormatters[0],ht=new Yn(r.ctx).getActiveConfigSeriesIndex();ye=Fe(Y.globals.labels[oe],{seriesIndex:ht,dataPointIndex:oe,w:Y})}else ye=G.getLabel(Y.globals.labels,Y.globals.timescaleLabels,0,oe).text;"datetime"===Y.config.xaxis.type&&(Y.config.xaxis.categories.length?ye=Y.config.xaxis.categories[oe]:Y.config.labels.length&&(ye=Y.config.labels[oe]))}else ye=Y.config.labels[oe];return Array.isArray(ye)&&(ye=ye.join(" ")),Je.isNumber(ye)?ye:ye.split(w).join("")};Q.push(Y.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===Y.config.chart.type?(Q.push("minimum"),Q.push("q1"),Q.push("median"),Q.push("q3"),Q.push("maximum")):"candlestick"===Y.config.chart.type?(Q.push("open"),Q.push("high"),Q.push("low"),Q.push("close")):"rangeBar"===Y.config.chart.type?(Q.push("minimum"),Q.push("maximum")):d.map(function(oe,ye){var Fe=(oe.name?oe.name:"series-".concat(ye))+"";Y.globals.axisCharts&&Q.push(Fe.split(w).join("")?Fe.split(w).join(""):"series-".concat(ye))}),Y.globals.axisCharts||(Q.push(Y.config.chart.toolbar.export.csv.headerValue),ce.push(Q.join(w))),Y.globals.allSeriesHasEqualX||!Y.globals.axisCharts||Y.config.xaxis.categories.length||Y.config.labels.length?d.map(function(oe,ye){Y.globals.axisCharts?function(oe,ye){if(Q.length&&0===ye&&ce.push(Q.join(w)),oe.data){oe.data=oe.data.length&&oe.data||tt(Array(Ce)).map(function(){return""});for(var Fe=0;Fe<oe.data.length;Fe++){Q=[];var ht=re(Fe);if(ht||(Re.isFormatXY()?ht=d[ye].data[Fe].x:Re.isFormat2DArray()&&(ht=d[ye].data[Fe]?d[ye].data[Fe][0]:"")),0===ye){Q.push(De(ht)?Y.config.chart.toolbar.export.csv.dateFormatter(ht):Je.isNumber(ht)?ht:ht.split(w).join(""));for(var yt=0;yt<Y.globals.series.length;yt++){var ii;Re.isFormatXY()?Q.push(null===(ii=d[yt].data[Fe])||void 0===ii?void 0:ii.y):Q.push(Ee[yt][Fe])}}("candlestick"===Y.config.chart.type||oe.type&&"candlestick"===oe.type)&&(Q.pop(),Q.push(Y.globals.seriesCandleO[ye][Fe]),Q.push(Y.globals.seriesCandleH[ye][Fe]),Q.push(Y.globals.seriesCandleL[ye][Fe]),Q.push(Y.globals.seriesCandleC[ye][Fe])),("boxPlot"===Y.config.chart.type||oe.type&&"boxPlot"===oe.type)&&(Q.pop(),Q.push(Y.globals.seriesCandleO[ye][Fe]),Q.push(Y.globals.seriesCandleH[ye][Fe]),Q.push(Y.globals.seriesCandleM[ye][Fe]),Q.push(Y.globals.seriesCandleL[ye][Fe]),Q.push(Y.globals.seriesCandleC[ye][Fe])),"rangeBar"===Y.config.chart.type&&(Q.pop(),Q.push(Y.globals.seriesRangeStart[ye][Fe]),Q.push(Y.globals.seriesRangeEnd[ye][Fe])),Q.length&&ce.push(Q.join(w))}}}(oe,ye):((Q=[]).push(Y.globals.labels[ye].split(w).join("")),Q.push(Ee[ye]),ce.push(Q.join(w)))}):(W=new Set,X={},d.forEach(function(oe,ye){oe?.data.forEach(function(Fe){var ht,yt;if(Re.isFormatXY())ht=Fe.x,yt=Fe.y;else{if(!Re.isFormat2DArray())return;ht=Fe[0],yt=Fe[1]}X[ht]||(X[ht]=Array(d.length).fill("")),X[ht][ye]=yt,W.add(ht)})}),Q.length&&ce.push(Q.join(w)),Array.from(W).sort().forEach(function(oe){ce.push([De(oe)&&"datetime"===Y.config.xaxis.type?Y.config.chart.toolbar.export.csv.dateFormatter(oe):Je.isNumber(oe)?oe:oe.split(w).join(""),X[oe].join(w)])})),me+=ce.join(R),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+me),g||Y.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(i,r,d){var g=document.createElement("a");g.href=i,g.download=(r||this.w.globals.chartID)+d,document.body.appendChild(g),g.click(),document.body.removeChild(g)}}]),pe}(),V=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.elgrid=r,this.w=i.w;var d=this.w;this.axesUtils=new jt(i),this.xaxisLabels=d.globals.labels.slice(),d.globals.timescaleLabels.length>0&&!d.globals.isBarHorizontal&&(this.xaxisLabels=d.globals.timescaleLabels.slice()),d.config.xaxis.overwriteCategories&&(this.xaxisLabels=d.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===d.config.xaxis.position?0:d.globals.gridHeight+1,this.offY=this.offY+d.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===d.config.chart.type&&d.config.plotOptions.bar.horizontal,this.xaxisFontSize=d.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=d.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=d.config.xaxis.labels.style.colors,this.xaxisBorderWidth=d.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=d.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?d.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=d.config.xaxis.axisBorder.height,this.yaxis=d.config.yaxis[0]}return we(pe,[{key:"drawXaxis",value:function(){var i=this.w,r=new rt(this.ctx),d=r.group({class:"apexcharts-xaxis",transform:"translate(".concat(i.config.xaxis.offsetX,", ").concat(i.config.xaxis.offsetY,")")}),g=r.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});d.add(g);for(var x=[],w=0;w<this.xaxisLabels.length;w++)x.push(this.xaxisLabels[w]);if(this.drawXAxisLabelAndGroup(!0,r,g,x,i.globals.isXNumeric,function(me,Ee){return Ee}),i.globals.hasXaxisGroups){var I=i.globals.groups;x=[];for(var R=0;R<I.length;R++)x.push(I[R].title);var Y={};i.config.xaxis.group.style&&(Y.xaxisFontSize=i.config.xaxis.group.style.fontSize,Y.xaxisFontFamily=i.config.xaxis.group.style.fontFamily,Y.xaxisForeColors=i.config.xaxis.group.style.colors,Y.fontWeight=i.config.xaxis.group.style.fontWeight,Y.cssClass=i.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,r,g,x,!1,function(me,Ee){return I[me].cols*Ee},Y)}if(void 0!==i.config.xaxis.title.text){var W=r.group({class:"apexcharts-xaxis-title"}),X=r.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===i.config.xaxis.position?i.globals.xAxisLabelsHeight:-i.globals.xAxisLabelsHeight-10)+i.config.xaxis.title.offsetY,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});W.add(X),d.add(W)}if(i.config.xaxis.axisBorder.show){var Q=i.globals.barPadForNumericAxis,ce=r.drawLine(i.globals.padHorizontal+i.config.xaxis.axisBorder.offsetX-Q,this.offY,this.xaxisBorderWidth+Q,this.offY,i.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&i.config.grid.show?this.elgrid.elGridBorders.add(ce):d.add(ce)}return d}},{key:"drawXAxisLabelAndGroup",value:function(i,r,d,g,x,w){var I,R=this,Y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},W=[],X=[],Q=this.w,ce=Y.xaxisFontSize||this.xaxisFontSize,me=Y.xaxisFontFamily||this.xaxisFontFamily,Ee=Y.xaxisForeColors||this.xaxisForeColors,De=Y.fontWeight||Q.config.xaxis.labels.style.fontWeight,Ce=Y.cssClass||Q.config.xaxis.labels.style.cssClass,Re=Q.globals.padHorizontal,G=g.length,re="category"===Q.config.xaxis.type?Q.globals.dataPoints:G;0===re&&G>re&&(re=G),x?(I=Q.globals.gridWidth/Math.min(re>1?re-1:re,G-1),Re=Re+w(0,I)/2+Q.config.xaxis.labels.offsetX):Re=Re+w(0,I=Q.globals.gridWidth/re)+Q.config.xaxis.labels.offsetX;for(var oe=function(Fe){var ht=Re-w(Fe,I)/2+Q.config.xaxis.labels.offsetX;0===Fe&&1===G&&I/2===Re&&1===re&&(ht=Q.globals.gridWidth/2);var yt=R.axesUtils.getLabel(g,Q.globals.timescaleLabels,ht,Fe,W,ce,i),ii=28;if(Q.globals.rotateXLabels&&i&&(ii=22),Q.config.xaxis.title.text&&"top"===Q.config.xaxis.position&&(ii+=parseFloat(Q.config.xaxis.title.style.fontSize)+2),i||(ii=ii+parseFloat(ce)+(Q.globals.xAxisLabelsHeight-Q.globals.xAxisGroupLabelsHeight)+(Q.globals.rotateXLabels?10:0)),yt=void 0!==Q.config.xaxis.tickAmount&&"dataPoints"!==Q.config.xaxis.tickAmount&&"datetime"!==Q.config.xaxis.type?R.axesUtils.checkLabelBasedOnTickamount(Fe,yt,G):R.axesUtils.checkForOverflowingLabels(Fe,yt,G,W,X),Q.config.xaxis.labels.show){var hi=r.drawText({x:yt.x,y:R.offY+Q.config.xaxis.labels.offsetY+ii-("top"===Q.config.xaxis.position?Q.globals.xAxisHeight+Q.config.xaxis.axisTicks.height-2:0),text:yt.text,textAnchor:"middle",fontWeight:yt.isBold?600:De,fontSize:ce,fontFamily:me,foreColor:Array.isArray(Ee)?i&&Q.config.xaxis.convertedCatToNumeric?Ee[Q.globals.minX+Fe-1]:Ee[Fe]:Ee,isPlainText:!1,cssClass:(i?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+Ce});if(d.add(hi),hi.on("click",function(Pi){if("function"==typeof Q.config.chart.events.xAxisLabelClick){var nn=Object.assign({},Q,{labelIndex:Fe});Q.config.chart.events.xAxisLabelClick(Pi,R.ctx,nn)}}),i){var xi=document.createElementNS(Q.globals.SVGNS,"title");xi.textContent=Array.isArray(yt.text)?yt.text.join(" "):yt.text,hi.node.appendChild(xi),""!==yt.text&&(W.push(yt.text),X.push(yt))}}Fe<G-1&&(Re+=w(Fe+1,I))},ye=0;ye<=G-1;ye++)oe(ye)}},{key:"drawXaxisInversed",value:function(i){var r,d,g=this,x=this.w,w=new rt(this.ctx),I=x.config.yaxis[0].opposite?x.globals.translateYAxisX[i]:0,R=w.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:i}),Y=w.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+I+", 0)"});R.add(Y);var W=[];if(x.config.yaxis[i].show)for(var X=0;X<this.xaxisLabels.length;X++)W.push(this.xaxisLabels[X]);d=-(r=x.globals.gridHeight/W.length)/2.2;var Q=x.globals.yLabelFormatters[0],ce=x.config.yaxis[0].labels;if(ce.show)for(var me=function(te){var oe=void 0===W[te]?"":W[te];oe=Q(oe,{seriesIndex:i,dataPointIndex:te,w:x});var ye=g.axesUtils.getYAxisForeColor(ce.style.colors,i),Fe=0;Array.isArray(oe)&&(Fe=oe.length/2*parseInt(ce.style.fontSize,10));var ht=ce.offsetX-15,yt="end";g.yaxis.opposite&&(yt="start"),"left"===x.config.yaxis[0].labels.align?(ht=ce.offsetX,yt="start"):"center"===x.config.yaxis[0].labels.align?(ht=ce.offsetX,yt="middle"):"right"===x.config.yaxis[0].labels.align&&(yt="end");var ii=w.drawText({x:ht,y:d+r+ce.offsetY-Fe,text:oe,textAnchor:yt,foreColor:Array.isArray(ye)?ye[te]:ye,fontSize:ce.style.fontSize,fontFamily:ce.style.fontFamily,fontWeight:ce.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ce.style.cssClass,maxWidth:ce.maxWidth});Y.add(ii),ii.on("click",function(Pi){if("function"==typeof x.config.chart.events.xAxisLabelClick){var nn=Object.assign({},x,{labelIndex:te});x.config.chart.events.xAxisLabelClick(Pi,g.ctx,nn)}});var hi=document.createElementNS(x.globals.SVGNS,"title");if(hi.textContent=Array.isArray(oe)?oe.join(" "):oe,ii.node.appendChild(hi),0!==x.config.yaxis[i].labels.rotate){var xi=w.rotateAroundCenter(ii.node);ii.node.setAttribute("transform","rotate(".concat(x.config.yaxis[i].labels.rotate," 0 ").concat(xi.y,")"))}d+=r},Ee=0;Ee<=W.length-1;Ee++)me(Ee);if(void 0!==x.config.yaxis[0].title.text){var De=w.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+I+", 0)"}),Ce=w.drawText({x:x.config.yaxis[0].title.offsetX,y:x.globals.gridHeight/2+x.config.yaxis[0].title.offsetY,text:x.config.yaxis[0].title.text,textAnchor:"middle",foreColor:x.config.yaxis[0].title.style.color,fontSize:x.config.yaxis[0].title.style.fontSize,fontWeight:x.config.yaxis[0].title.style.fontWeight,fontFamily:x.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+x.config.yaxis[0].title.style.cssClass});De.add(Ce),R.add(De)}var Re=0;this.isCategoryBarHorizontal&&x.config.yaxis[0].opposite&&(Re=x.globals.gridWidth);var G=x.config.xaxis.axisBorder;if(G.show){var re=w.drawLine(x.globals.padHorizontal+G.offsetX+Re,1+G.offsetY,x.globals.padHorizontal+G.offsetX+Re,x.globals.gridHeight+G.offsetY,G.color,0);this.elgrid&&this.elgrid.elGridBorders&&x.config.grid.show?this.elgrid.elGridBorders.add(re):R.add(re)}return x.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(Re,W.length,x.config.yaxis[0].axisBorder,x.config.yaxis[0].axisTicks,0,r,R),R}},{key:"drawXaxisTicks",value:function(i,r,d){var g=this.w,x=i;if(!(i<0||i-2>g.globals.gridWidth)){var w=this.offY+g.config.xaxis.axisTicks.offsetY;if(r=r+w+g.config.xaxis.axisTicks.height,"top"===g.config.xaxis.position&&(r=w-g.config.xaxis.axisTicks.height),g.config.xaxis.axisTicks.show){var I=new rt(this.ctx).drawLine(i+g.config.xaxis.axisTicks.offsetX,w+g.config.xaxis.offsetY,x+g.config.xaxis.axisTicks.offsetX,r+g.config.xaxis.offsetY,g.config.xaxis.axisTicks.color);d.add(I),I.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var i=this.w,r=[],d=this.xaxisLabels.length,g=i.globals.padHorizontal;if(i.globals.timescaleLabels.length>0)for(var x=0;x<d;x++)r.push(g=this.xaxisLabels[x].position);else for(var w=d,I=0;I<w;I++){var R=w;i.globals.isXNumeric&&"bar"!==i.config.chart.type&&(R-=1),r.push(g+=i.globals.gridWidth/R)}return r}},{key:"xAxisLabelCorrections",value:function(){var i=this.w,r=new rt(this.ctx),d=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),g=i.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),x=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),w=i.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(i.globals.rotateXLabels||i.config.xaxis.labels.rotateAlways)for(var I=0;I<g.length;I++){var R=r.rotateAroundCenter(g[I]);R.y=R.y-1,R.x=R.x+1,g[I].setAttribute("transform","rotate(".concat(i.config.xaxis.labels.rotate," ").concat(R.x," ").concat(R.y,")")),g[I].setAttribute("text-anchor","end"),d.setAttribute("transform","translate(0, ".concat(-10,")")),i.config.xaxis.labels.trim&&Array.prototype.forEach.call(g[I].childNodes,function(ce){r.placeTextWithEllipsis(ce,ce.textContent,i.globals.xAxisLabelsHeight-("bottom"===i.config.legend.position?20:10))})}else!function(){for(var ce=i.globals.gridWidth/(i.globals.labels.length+1),me=0;me<g.length;me++)i.config.xaxis.labels.trim&&"datetime"!==i.config.xaxis.type&&Array.prototype.forEach.call(g[me].childNodes,function(De){r.placeTextWithEllipsis(De,De.textContent,ce)})}();if(x.length>0){var W=x[x.length-1].getBBox(),X=x[0].getBBox();W.x<-20&&x[x.length-1].parentNode.removeChild(x[x.length-1]),X.x+X.width>i.globals.gridWidth&&!i.globals.isBarHorizontal&&x[0].parentNode.removeChild(x[0]);for(var Q=0;Q<w.length;Q++)r.placeTextWithEllipsis(w[Q],w[Q].textContent,i.config.yaxis[0].labels.maxWidth-(i.config.yaxis[0].title.text?2*parseFloat(i.config.yaxis[0].title.style.fontSize):0)-15)}}}]),pe}(),Bi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w;var r=this.w;this.xaxisLabels=r.globals.labels.slice(),this.axesUtils=new jt(i),this.isRangeBar=r.globals.seriesRange.length&&r.globals.isBarHorizontal,r.globals.timescaleLabels.length>0&&(this.xaxisLabels=r.globals.timescaleLabels.slice())}return we(pe,[{key:"drawGridArea",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.w,d=new rt(this.ctx);null===i&&(i=d.group({class:"apexcharts-grid"}));var g=d.drawLine(r.globals.padHorizontal,1,r.globals.padHorizontal,r.globals.gridHeight,"transparent"),x=d.drawLine(r.globals.padHorizontal,r.globals.gridHeight,r.globals.gridWidth,r.globals.gridHeight,"transparent");return i.add(x),i.add(g),i}},{key:"drawGrid",value:function(){var i=null;return this.w.globals.axisCharts&&(i=this.renderGrid(),this.drawGridArea(i.el)),i}},{key:"createGridMask",value:function(){var i=this.w,r=i.globals,d=new rt(this.ctx),g=Array.isArray(i.config.stroke.width)?0:i.config.stroke.width;if(Array.isArray(i.config.stroke.width)){var x=0;i.config.stroke.width.forEach(function(X){x=Math.max(x,X)}),g=x}r.dom.elGridRectMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(r.cuid)),r.dom.elGridRectMarkerMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(r.cuid)),r.dom.elForecastMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elForecastMask.setAttribute("id","forecastMask".concat(r.cuid)),r.dom.elNonForecastMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(r.cuid));var w=i.config.chart.type,I=0,R=0;("bar"===w||"rangeBar"===w||"candlestick"===w||"boxPlot"===w||i.globals.comboBarCount>0)&&i.globals.isXNumeric&&!i.globals.isBarHorizontal&&(R=i.config.grid.padding.right,r.barPadForNumericAxis>(I=i.config.grid.padding.left)&&(I=r.barPadForNumericAxis,R=r.barPadForNumericAxis)),r.dom.elGridRect=d.drawRect(-g-I-2,2*-g-2,r.gridWidth+g+R+I+4,r.gridHeight+4*g+4,0,"#fff");var Y=i.globals.markers.largestSize+1;r.dom.elGridRectMarker=d.drawRect(2*-Y,2*-Y,r.gridWidth+4*Y,r.gridHeight+4*Y,0,"#fff"),r.dom.elGridRectMask.appendChild(r.dom.elGridRect.node),r.dom.elGridRectMarkerMask.appendChild(r.dom.elGridRectMarker.node);var W=r.dom.baseEl.querySelector("defs");W.appendChild(r.dom.elGridRectMask),W.appendChild(r.dom.elForecastMask),W.appendChild(r.dom.elNonForecastMask),W.appendChild(r.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(i){var r=i.i,d=i.x1,I=i.xCount,Y=this.w;if(!(0===r&&Y.globals.skipFirstTimelinelabel||r===I-1&&Y.globals.skipLastTimelinelabel&&!Y.config.xaxis.labels.formatter||"radar"===Y.config.chart.type)){Y.config.grid.xaxis.lines.show&&this._drawGridLine({i:r,x1:d,y1:i.y1,x2:i.x2,y2:i.y2,xCount:I,parent:i.parent});var W=0;if(Y.globals.hasXaxisGroups&&"between"===Y.config.xaxis.tickPlacement){var X=Y.globals.groups;if(X){for(var Q=0,ce=0;Q<r&&ce<X.length;ce++)Q+=X[ce].cols;Q===r&&(W=.6*Y.globals.xAxisLabelsHeight)}}new V(this.ctx).drawXaxisTicks(d,W,Y.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(i){var r=i.i,d=i.x1,g=i.y1,x=i.x2,w=i.y2,I=i.xCount,R=i.parent,Y=this.w,W=!1,X=R.node.classList.contains("apexcharts-gridlines-horizontal"),Q=Y.config.grid.strokeDashArray,ce=Y.globals.barPadForNumericAxis;(0===g&&0===w||0===d&&0===x)&&(W=!0),g===Y.globals.gridHeight&&w===Y.globals.gridHeight&&(W=!0),!Y.globals.isBarHorizontal||0!==r&&r!==I-1||(W=!0);var me=new rt(this).drawLine(d-(X?ce:0),g,x+(X?ce:0),w,Y.config.grid.borderColor,Q);me.node.classList.add("apexcharts-gridline"),W&&Y.config.grid.show?this.elGridBorders.add(me):R.add(me)}},{key:"_drawGridBandRect",value:function(i){var r=i.c,d=i.x1,g=i.y1,x=i.x2,w=i.y2,I=i.type,R=this.w,Y=new rt(this.ctx),W=R.globals.barPadForNumericAxis;if("column"!==I||"datetime"!==R.config.xaxis.type){var Q=Y.drawRect(d-("row"===I?W:0),g,x+("row"===I?2*W:0),w,0,R.config.grid[I].colors[r],R.config.grid[I].opacity);this.elg.add(Q),Q.attr("clip-path","url(#gridRectMask".concat(R.globals.cuid,")")),Q.node.classList.add("apexcharts-grid-".concat(I))}}},{key:"_drawXYLines",value:function(i){var r=this,d=i.xCount,g=i.tickAmount,x=this.w;if(x.config.grid.xaxis.lines.show||x.config.xaxis.axisTicks.show){var w,I=x.globals.padHorizontal,R=x.globals.gridHeight;x.globals.timescaleLabels.length?function(me){for(var Ee=me.xC,Ce=me.y1,G=me.y2,re=0;re<Ee;re++)r._drawGridLines({i:re,x1:r.xaxisLabels[re].position,y1:Ce,x2:r.xaxisLabels[re].position,y2:G,xCount:d,parent:r.elgridLinesV})}({xC:d,x1:I,y1:0,x2:w,y2:R}):(x.globals.isXNumeric&&(d=x.globals.xAxisScale.result.length),function(me){for(var Ee=me.xC,De=me.x1,Ce=me.y1,Re=me.x2,G=me.y2,re=0;re<Ee+(x.globals.isXNumeric?0:1);re++)0===re&&1===Ee&&1===x.globals.dataPoints&&(Re=De=x.globals.gridWidth/2),r._drawGridLines({i:re,x1:De,y1:Ce,x2:Re,y2:G,xCount:d,parent:r.elgridLinesV}),Re=De+=x.globals.gridWidth/(x.globals.isXNumeric?Ee-1:Ee)}({xC:d,x1:I,y1:0,x2:w,y2:R}))}if(x.config.grid.yaxis.lines.show){var Y=0,W=0,X=x.globals.gridWidth,Q=g+1;this.isRangeBar&&(Q=x.globals.labels.length);for(var ce=0;ce<Q+(this.isRangeBar?1:0);ce++)this._drawGridLine({i:ce,xCount:Q+(this.isRangeBar?1:0),x1:0,y1:Y,x2:X,y2:W,parent:this.elgridLinesH}),W=Y+=x.globals.gridHeight/(this.isRangeBar?Q:g)}}},{key:"_drawInvertedXYLines",value:function(i){var r=i.xCount,d=this.w;if(d.config.grid.xaxis.lines.show||d.config.xaxis.axisTicks.show)for(var g,x=d.globals.padHorizontal,w=d.globals.gridHeight,I=0;I<r+1;I++)d.config.grid.xaxis.lines.show&&this._drawGridLine({i:I,xCount:r+1,x1:x,y1:0,x2:g,y2:w,parent:this.elgridLinesV}),new V(this.ctx).drawXaxisTicks(x,0,d.globals.dom.elGraphical),g=x=x+d.globals.gridWidth/r+.3;if(d.config.grid.yaxis.lines.show)for(var R=0,Y=0,W=d.globals.gridWidth,X=0;X<d.globals.dataPoints+1;X++)this._drawGridLine({i:X,xCount:d.globals.dataPoints+1,x1:0,y1:R,x2:W,y2:Y,parent:this.elgridLinesH}),Y=R+=d.globals.gridHeight/d.globals.dataPoints}},{key:"renderGrid",value:function(){var i=this.w,r=new rt(this.ctx);this.elg=r.group({class:"apexcharts-grid"}),this.elgridLinesH=r.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=r.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=r.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),i.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var d=0;d<i.globals.seriesYAxisMap.length&&-1!==i.globals.ignoreYAxisIndexes.indexOf(d);)d++;d===i.globals.seriesYAxisMap.length&&(d=0);var g,w,I,R,x=i.globals.yAxisScale[d].result.length-1;return!i.globals.isBarHorizontal||this.isRangeBar?(g=this.xaxisLabels.length,this.isRangeBar&&(g--,x=i.globals.labels.length,i.config.xaxis.tickAmount&&i.config.xaxis.labels.formatter&&(g=i.config.xaxis.tickAmount),(null===(w=i.globals.yAxisScale)||void 0===w||null===(I=w[d])||void 0===I||null===(R=I.result)||void 0===R?void 0:R.length)>0&&"datetime"!==i.config.xaxis.type&&(g=i.globals.yAxisScale[d].result.length-1)),this._drawXYLines({xCount:g,tickAmount:x})):this._drawInvertedXYLines({xCount:g=x,tickAmount:x=i.globals.xTickAmount}),this.drawGridBands(g,x),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:i.globals.gridWidth/g}}},{key:"drawGridBands",value:function(i,r){var d=this.w;if(void 0!==d.config.grid.row.colors&&d.config.grid.row.colors.length>0)for(var g=0,x=d.globals.gridHeight/r,w=d.globals.gridWidth,I=0,R=0;I<r;I++,R++)R>=d.config.grid.row.colors.length&&(R=0),this._drawGridBandRect({c:R,x1:0,y1:g,x2:w,y2:x,type:"row"}),g+=d.globals.gridHeight/r;if(void 0!==d.config.grid.column.colors&&d.config.grid.column.colors.length>0)for(var Y=d.globals.isBarHorizontal||"on"!==d.config.xaxis.tickPlacement||"category"!==d.config.xaxis.type&&!d.config.xaxis.convertedCatToNumeric?i:i-1,W=d.globals.padHorizontal,X=d.globals.padHorizontal+d.globals.gridWidth/Y,Q=d.globals.gridHeight,ce=0,me=0;ce<i;ce++,me++)me>=d.config.grid.column.colors.length&&(me=0),this._drawGridBandRect({c:me,x1:W,y1:0,x2:X,y2:Q,type:"column"}),W+=d.globals.gridWidth/Y}}]),pe}(),$i=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"niceScale",value:function(i,r){var d,g,x,w,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,R=1e-11,Y=this.w,W=Y.globals;W.isBarHorizontal?(d=Y.config.xaxis,g=Math.max((W.svgWidth-100)/25,2)):(d=Y.config.yaxis[I],g=Math.max((W.svgHeight-100)/15,2)),x=null!=d.min,w=void 0!==d.max&&null!==d.min;var X=null!=d.stepSize,Q=null!=d.tickAmount,ce=Q?d.tickAmount:d.forceNiceScale?W.niceScaleDefaultTicks[Math.min(Math.round(g/2),W.niceScaleDefaultTicks.length-1)]:10;if(W.isMultipleYAxis&&!Q&&W.multiAxisTickAmount>0&&(ce=W.multiAxisTickAmount,Q=!0),ce="dataPoints"===ce?W.dataPoints-1:Math.abs(Math.round(ce)),(i===Number.MIN_VALUE&&0===r||!Je.isNumber(i)&&!Je.isNumber(r)||i===Number.MIN_VALUE&&r===-Number.MAX_VALUE)&&(i=0,r=ce,W.allSeriesCollapsed=!1),i>r){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var me=r;r=i,i=me}else i===r&&(i=0===i?0:i-1,r=0===r?2:r+1);var Ee=[];ce<1&&(ce=1);var De=ce,Ce=Math.abs(r-i);d.forceNiceScale&&(!x&&i>0&&i/Ce<.15&&(i=0,x=!0),!w&&r<0&&-r/Ce<.15&&(r=0,w=!0),Ce=Math.abs(r-i));var Re=Ce/De,G=Re,re=Math.floor(Math.log10(G)),te=Math.pow(10,re),oe=Math.ceil(G/te);if(Re=G=(oe=W.niceScaleAllowedMagMsd[0===W.yValueDecimal?0:1][oe])*te,W.isBarHorizontal&&d.stepSize&&"datetime"!==d.type?(Re=d.stepSize,X=!0):X&&(Re=d.stepSize),X&&d.forceNiceScale){var ye=Math.floor(Math.log10(Re));Re*=Math.pow(10,re-ye)}if(x&&w){var Fe=Ce/De;if(Q)if(X)if(0!=Je.mod(Ce,Re)){var ht=Je.getGCD(Re,Fe);Re=Fe/ht<10?ht:Fe}else 0==Je.mod(Re,Fe)?Re=Fe:(Fe=Re,Q=!1);else Re=Fe;else if(X)0==Je.mod(Ce,Re)?Fe=Re:Re=Fe;else if(0==Je.mod(Ce,Re))Fe=Re;else{Fe=Ce/(De=Math.ceil(Ce/Re));var yt=Je.getGCD(Ce,Re);Ce/yt<g&&(Fe=yt),Re=Fe}De=Math.round(Ce/Re)}else{if(x||w)if(w)if(Q)i=r-Re*De;else{var ii=i;i=Re*Math.floor(i/Re),Math.abs(r-i)/Je.getGCD(Ce,Re)>g&&(i=r-Re*ce,i+=Re*Math.floor((ii-i)/Re))}else x&&(r=Q?i+Re*De:Re*Math.ceil(r/Re));else if(Q){var hi=Re/(r-i>r?1:2),xi=hi*Math.floor(i/hi);Math.abs(xi-i)<=hi/2?r=(i=xi)+Re*De:i=(r=hi*Math.ceil(r/hi))-Re*De}else i=Re*Math.floor(i/Re),r=Re*Math.ceil(r/Re);Ce=Math.abs(r-i),Re=Je.getGCD(Ce,Re),De=Math.round(Ce/Re)}if(Q||x||w||(De=Math.ceil((Ce-R)/(Re+R)))>16&&Je.getPrimeFactors(De).length<2&&De++,W.isMultipleYAxis&&0==W.multiAxisTickAmount&&(W.multiAxisTickAmount=De),De>g&&(!Q&&!X||d.forceNiceScale)){var Pi=Je.getPrimeFactors(De),nn=Pi.length-1,Tn=De;e:for(var Xn=0;Xn<nn;Xn++)for(var Qn=0;Qn<=nn-Xn;Qn++){for(var hr=Math.min(Qn+Xn,nn),xr=Tn,Rr=1,Br=Qn;Br<=hr;Br++)Rr*=Pi[Br];if((xr/=Rr)<g){Tn=xr;break e}}Re=Tn===De?Ce:Ce/Tn}var Or=i-Re,cr=Re*R;do{Ee.push(Je.stripNumber(Or+=Re,7))}while(r-Or>cr);return{result:Ee,niceMin:Ee[0],niceMax:Ee[Ee.length-1]}}},{key:"linearScale",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,w=Math.abs(r-i);"dataPoints"===(d=this._adjustTicksForSmallRange(d,g,w))&&(d=this.w.globals.dataPoints-1),x||(x=w/d),d===Number.MAX_VALUE&&(d=5,x=1);for(var I=[],R=i;d>=0;)I.push(R),R+=x,d-=1;return{result:I,niceMin:I[0],niceMax:I[I.length-1]}}},{key:"logarithmicScaleNice",value:function(i,r,d){r<=0&&(r=Math.max(i,d)),i<=0&&(i=Math.min(r,d));for(var g=[],x=Math.ceil(Math.log(r)/Math.log(d)+1),w=Math.floor(Math.log(i)/Math.log(d));w<x;w++)g.push(Math.pow(d,w));return{result:g,niceMin:g[0],niceMax:g[g.length-1]}}},{key:"logarithmicScale",value:function(i,r,d){r<=0&&(r=Math.max(i,d)),i<=0&&(i=Math.min(r,d));for(var g=[],x=Math.log(r)/Math.log(d),w=Math.log(i)/Math.log(d),I=x-w,R=Math.round(I),Y=I/R,W=0,X=w;W<R;W++,X+=Y)g.push(Math.pow(d,X));return g.push(Math.pow(d,x)),{result:g,niceMin:i,niceMax:r}}},{key:"_adjustTicksForSmallRange",value:function(i,r,d){var g=i;if(void 0!==r&&this.w.config.yaxis[r].labels.formatter&&void 0===this.w.config.yaxis[r].tickAmount){var x=Number(this.w.config.yaxis[r].labels.formatter(1));Je.isNumber(x)&&0===this.w.globals.yValueDecimal&&(g=Math.ceil(d))}return g<i?g:i}},{key:"setYScaleForIndex",value:function(i,r,d){var g=this.w.globals,x=this.w.config,w=g.isBarHorizontal?x.xaxis:x.yaxis[i];void 0===g.yAxisScale[i]&&(g.yAxisScale[i]=[]);var I=Math.abs(d-r);w.logarithmic&&I<=5&&(g.invalidLogScale=!0),w.logarithmic&&I>5?(g.allSeriesCollapsed=!1,g.yAxisScale[i]=w.forceNiceScale?this.logarithmicScaleNice(r,d,w.logBase):this.logarithmicScale(r,d,w.logBase)):d!==-Number.MAX_VALUE&&Je.isNumber(d)?(g.allSeriesCollapsed=!1,g.yAxisScale[i]=this.niceScale(r,d,i)):g.yAxisScale[i]=this.linearScale(0,10,10,i,x.yaxis[i].stepSize)}},{key:"setXScale",value:function(i,r){var d=this.w,g=d.globals,x=Math.abs(r-i);return g.xAxisScale=r!==-Number.MAX_VALUE&&Je.isNumber(r)?this.linearScale(i,r,d.config.xaxis.tickAmount?d.config.xaxis.tickAmount:x<10&&x>1?x+1:10,0,d.config.xaxis.stepSize):this.linearScale(0,10,10),g.xAxisScale}},{key:"setMultipleYScales",value:function(){var i=this.w.globals,r=this.w.config,d=i.minYArr,g=i.maxYArr,x=[],w=[],I=[];r.series.forEach(function(Q,ce){I.push(ce),w.push(null)});var R,Y=[];r.yaxis.forEach(function(Q,ce){if(Q.seriesName){var me=[];Array.isArray(Q.seriesName)?me=Q.seriesName:me.push(Q.seriesName),x[ce]=[],me.forEach(function(Ee){r.series.forEach(function(De,Ce){if(De.name===Ee){x[ce].push(Ce),w[Ce]=ce;var Re=I.indexOf(Ce);I.splice(Re,1)}})})}else Y.push(ce)});for(var W=0;W<Y.length&&(x[R=Y[W]]=[],I);W++){var X=I[0];I.shift(),x[R].push(X),w[X]=R}R&&I.forEach(function(Q){x[R].push(Q),w[Q]=R}),i.seriesYAxisMap=x.map(function(Q){return Q}),i.seriesYAxisReverseMap=w.map(function(Q){return Q}),this.sameScaleInMultipleAxes(d,g,x)}},{key:"sameScaleInMultipleAxes",value:function(i,r,d){var g=this,x=this.w.config,w=this.w.globals,I=[];d.forEach(function(Y,W){for(var X=W+1;X<d.length;X++){var Q,ce=qt(Y.values());try{for(ce.s();!(Q=ce.n()).done;){var Ee=d[X].indexOf(Q.value);-1!==Ee&&(Y.push(X),d[X].splice(Ee,1))}}catch(De){ce.e(De)}finally{ce.f()}d[X].length<1&&-1===I.indexOf(X)&&I.push(X)}});for(var R=I.length-1;R>=0;R--)d.splice(I[R],1);d.forEach(function(Y,W){var X=Number.MAX_VALUE,Q=-Number.MAX_VALUE;if(x.chart.stacked){for(var ce=w.seriesX[Y[0]].map(function(ye){return Number.MIN_VALUE}),me=w.seriesX[Y[0]].map(function(ye){return Number.MIN_VALUE}),Ee=w.seriesX[Y[0]].map(function(ye){return Number.MIN_VALUE}),De=x.series[Y[0]].type,Ce=0;Ce<Y.length;Ce++){var Re=Y[Ce];if(-1===w.collapsedSeriesIndices.indexOf(Re))for(var G=0;G<w.series[Re].length;G++){var re=w.series[Re][G];re>=0?me[G]+=re:Ee[G]+=re,ce[G]+=re}}"bar"===De?(X=Math.min.apply(null,Ee),Q=Math.max.apply(null,me)):(X=Math.min.apply(null,ce),Q=Math.max.apply(null,ce))}else{for(var te=0;te<Y.length;te++)X=Math.min(X,i[Y[te]]);for(var oe=0;oe<Y.length;oe++)Q=Math.max(Q,r[Y[oe]])}void 0!==x.yaxis[W].min&&(X="function"==typeof x.yaxis[W].min?x.yaxis[W].min(X):x.yaxis[W].min),void 0!==x.yaxis[W].max&&(Q="function"==typeof x.yaxis[W].max?x.yaxis[W].max(Q):x.yaxis[W].max),g.setYScaleForIndex(W,X,Q),Y.forEach(function(ye){i[ye]=w.yAxisScale[W].niceMin,r[ye]=w.yAxisScale[W].niceMax})})}}]),pe}(),en=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.scales=new $i(i)}return we(pe,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,x=this.w.config,w=this.w.globals,I=-Number.MAX_VALUE,R=Number.MIN_VALUE;null===g&&(g=i+1);var Y=0,W=0,X=void 0;if(w.seriesX.length>=g){var Q,ce;Y=0,W=(X=tt(new Set((Q=[]).concat.apply(Q,tt(w.seriesX.slice(i,g)))))).length-1;var me=null===(ce=w.brushSource)||void 0===ce?void 0:ce.w.config.chart.brush;if(x.chart.zoom.enabled&&x.chart.zoom.autoScaleYaxis||null!=me&&me.enabled&&null!=me&&me.autoScaleYaxis){if(x.xaxis.min)for(Y=0;Y<W&&X[Y]<=x.xaxis.min;Y++);if(x.xaxis.max)for(;W>Y&&X[W]>=x.xaxis.max;W--);}}var Ee=w.series,De=Ee,Ce=Ee;"candlestick"===x.chart.type?(De=w.seriesCandleL,Ce=w.seriesCandleH):"boxPlot"===x.chart.type?(De=w.seriesCandleO,Ce=w.seriesCandleC):w.isRangeData&&(De=w.seriesRangeStart,Ce=w.seriesRangeEnd);for(var Re=i;Re<g;Re++){w.dataPoints=Math.max(w.dataPoints,Ee[Re].length);var G=x.series[Re].type;w.categoryLabels.length&&(w.dataPoints=w.categoryLabels.filter(function(oe){return void 0!==oe}).length),w.labels.length&&"datetime"!==x.xaxis.type&&0!==w.series.reduce(function(oe,ye){return oe+ye.length},0)&&(w.dataPoints=Math.max(w.dataPoints,w.labels.length)),X||(Y=0,W=w.series[Re].length);for(var re=Y;re<=W&&re<w.series[Re].length;re++){var te=Ee[Re][re];if(null!==te&&Je.isNumber(te)){switch(void 0!==Ce[Re][re]&&(I=Math.max(I,Ce[Re][re]),r=Math.min(r,Ce[Re][re])),void 0!==De[Re][re]&&(r=Math.min(r,De[Re][re]),d=Math.max(d,De[Re][re])),G){case"candlestick":void 0!==w.seriesCandleC[Re][re]&&(I=Math.max(I,w.seriesCandleH[Re][re]),r=Math.min(r,w.seriesCandleL[Re][re]));case"boxPlot":void 0!==w.seriesCandleC[Re][re]&&(I=Math.max(I,w.seriesCandleC[Re][re]),r=Math.min(r,w.seriesCandleO[Re][re]))}G&&"candlestick"!==G&&"boxPlot"!==G&&"rangeArea"!==G&&"rangeBar"!==G&&(I=Math.max(I,w.series[Re][re]),r=Math.min(r,w.series[Re][re])),d=I,w.seriesGoals[Re]&&w.seriesGoals[Re][re]&&Array.isArray(w.seriesGoals[Re][re])&&w.seriesGoals[Re][re].forEach(function(oe){R!==Number.MIN_VALUE&&(R=Math.min(R,oe.value),r=R),I=Math.max(I,oe.value),d=I}),Je.isFloat(te)&&(te=Je.noExponents(te),w.yValueDecimal=Math.max(w.yValueDecimal,te.toString().split(".")[1].length)),R>De[Re][re]&&De[Re][re]<0&&(R=De[Re][re])}else w.hasNullValues=!0}"bar"!==G&&"column"!==G||(R<0&&I<0&&(I=0,d=Math.max(d,0)),R===Number.MIN_VALUE&&(R=0,r=Math.min(r,0)))}return"rangeBar"===x.chart.type&&w.seriesRangeStart.length&&w.isBarHorizontal&&(R=r),"bar"===x.chart.type&&(R<0&&I<0&&(I=0),R===Number.MIN_VALUE&&(R=0)),{minY:R,maxY:I,lowestY:r,highestY:d}}},{key:"setYRange",value:function(){var i=this.w.globals,r=this.w.config;i.maxY=-Number.MAX_VALUE,i.minY=Number.MIN_VALUE;var d,g=Number.MAX_VALUE;if(i.isMultipleYAxis){g=Number.MAX_VALUE;for(var x=0;x<i.series.length;x++)d=this.getMinYMaxY(x),i.minYArr[x]=d.lowestY,i.maxYArr[x]=d.highestY,g=Math.min(g,d.lowestY)}return d=this.getMinYMaxY(0,g,null,i.series.length),"bar"===r.chart.type?(i.minY=d.minY,i.maxY=d.maxY):(i.minY=d.lowestY,i.maxY=d.highestY),g=d.lowestY,r.chart.stacked&&this._setStackedMinMax(),"line"===r.chart.type||"area"===r.chart.type||"scatter"===r.chart.type||"candlestick"===r.chart.type||"boxPlot"===r.chart.type||"rangeBar"===r.chart.type&&!i.isBarHorizontal?i.minY===Number.MIN_VALUE&&g!==-Number.MAX_VALUE&&g!==i.maxY&&(i.minY=g):i.minY=d.minY,r.yaxis.forEach(function(w,I){void 0!==w.max&&("number"==typeof w.max?i.maxYArr[I]=w.max:"function"==typeof w.max&&(i.maxYArr[I]=w.max(i.isMultipleYAxis?i.maxYArr[I]:i.maxY)),i.maxY=i.maxYArr[I]),void 0!==w.min&&("number"==typeof w.min?i.minYArr[I]=w.min:"function"==typeof w.min&&(i.minYArr[I]=w.min(i.isMultipleYAxis?i.minYArr[I]===Number.MIN_VALUE?0:i.minYArr[I]:i.minY)),i.minY=i.minYArr[I])}),i.isBarHorizontal&&["min","max"].forEach(function(w){void 0!==r.xaxis[w]&&"number"==typeof r.xaxis[w]&&("min"===w?i.minY=r.xaxis[w]:i.maxY=r.xaxis[w])}),i.isMultipleYAxis?(this.scales.setMultipleYScales(),i.minY=g):(this.scales.setYScaleForIndex(0,i.minY,i.maxY),i.minY=i.yAxisScale[0].niceMin,i.maxY=i.yAxisScale[0].niceMax,i.minYArr[0]=i.yAxisScale[0].niceMin,i.maxYArr[0]=i.yAxisScale[0].niceMax,i.seriesYAxisMap=[i.series.map(function(w,I){return I})],i.seriesYAxisReverseMap=i.series.map(function(w,I){return 0})),{minY:i.minY,maxY:i.maxY,minYArr:i.minYArr,maxYArr:i.maxYArr,yAxisScale:i.yAxisScale}}},{key:"setXRange",value:function(){var i=this.w.globals,r=this.w.config,d="numeric"===r.xaxis.type||"datetime"===r.xaxis.type||"category"===r.xaxis.type&&!i.noLabelsProvided||i.noLabelsProvided||i.isXNumeric;if(i.isXNumeric&&function(){for(var I=0;I<i.series.length;I++)if(i.labels[I])for(var R=0;R<i.labels[I].length;R++)null!==i.labels[I][R]&&Je.isNumber(i.labels[I][R])&&(i.maxX=Math.max(i.maxX,i.labels[I][R]),i.initialMaxX=Math.max(i.maxX,i.labels[I][R]),i.minX=Math.min(i.minX,i.labels[I][R]),i.initialMinX=Math.min(i.minX,i.labels[I][R]))}(),i.noLabelsProvided&&0===r.xaxis.categories.length&&(i.maxX=i.labels[i.labels.length-1],i.initialMaxX=i.labels[i.labels.length-1],i.minX=1,i.initialMinX=1),i.isXNumeric||i.noLabelsProvided||i.dataFormatXNumeric){var g;if(void 0===r.xaxis.tickAmount?(g=Math.round(i.svgWidth/150),"numeric"===r.xaxis.type&&i.dataPoints<30&&(g=i.dataPoints-1),g>i.dataPoints&&0!==i.dataPoints&&(g=i.dataPoints-1)):"dataPoints"===r.xaxis.tickAmount?(i.series.length>1&&(g=i.series[i.maxValsInArrayIndex].length-1),i.isXNumeric&&(g=i.maxX-i.minX-1)):g=r.xaxis.tickAmount,i.xTickAmount=g,void 0!==r.xaxis.max&&"number"==typeof r.xaxis.max&&(i.maxX=r.xaxis.max),void 0!==r.xaxis.min&&"number"==typeof r.xaxis.min&&(i.minX=r.xaxis.min),void 0!==r.xaxis.range&&(i.minX=i.maxX-r.xaxis.range),i.minX!==Number.MAX_VALUE&&i.maxX!==-Number.MAX_VALUE)if(r.xaxis.convertedCatToNumeric&&!i.dataFormatXNumeric){for(var x=[],w=i.minX-1;w<i.maxX;w++)x.push(w+1);i.xAxisScale={result:x,niceMin:x[0],niceMax:x[x.length-1]}}else i.xAxisScale=this.scales.setXScale(i.minX,i.maxX);else i.xAxisScale=this.scales.linearScale(0,g,g,0,r.xaxis.stepSize),i.noLabelsProvided&&i.labels.length>0&&(i.xAxisScale=this.scales.linearScale(1,i.labels.length,g-1,0,r.xaxis.stepSize),i.seriesX=i.labels.slice());d&&(i.labels=i.xAxisScale.result.slice())}return i.isBarHorizontal&&i.labels.length&&(i.xTickAmount=i.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:i.minX,maxX:i.maxX}}},{key:"setZRange",value:function(){var i=this.w.globals;if(i.isDataXYZ)for(var r=0;r<i.series.length;r++)if(void 0!==i.seriesZ[r])for(var d=0;d<i.seriesZ[r].length;d++)null!==i.seriesZ[r][d]&&Je.isNumber(i.seriesZ[r][d])&&(i.maxZ=Math.max(i.maxZ,i.seriesZ[r][d]),i.minZ=Math.min(i.minZ,i.seriesZ[r][d]))}},{key:"_handleSingleDataPoint",value:function(){var i=this.w.globals,r=this.w.config;if(i.minX===i.maxX){var d=new Ii(this.ctx);if("datetime"===r.xaxis.type){var g=d.getDate(i.minX);r.xaxis.labels.datetimeUTC?g.setUTCDate(g.getUTCDate()-2):g.setDate(g.getDate()-2),i.minX=new Date(g).getTime();var x=d.getDate(i.maxX);r.xaxis.labels.datetimeUTC?x.setUTCDate(x.getUTCDate()+2):x.setDate(x.getDate()+2),i.maxX=new Date(x).getTime()}else("numeric"===r.xaxis.type||"category"===r.xaxis.type&&!i.noLabelsProvided)&&(i.minX=i.minX-2,i.initialMinX=i.minX,i.maxX=i.maxX+2,i.initialMaxX=i.maxX)}}},{key:"_getMinXDiff",value:function(){var i=this.w.globals;i.isXNumeric&&i.seriesX.forEach(function(r,d){1===r.length&&r.push(i.seriesX[i.maxValsInArrayIndex][i.seriesX[i.maxValsInArrayIndex].length-1]);var g=r.slice();g.sort(function(x,w){return x-w}),g.forEach(function(x,w){if(w>0){var I=x-g[w-1];I>0&&(i.minXDiff=Math.min(I,i.minXDiff))}}),1!==i.dataPoints&&i.minXDiff!==Number.MAX_VALUE||(i.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var i=this,r=this.w.globals;if(r.series.length){var d=r.seriesGroups;d.length||(d=[this.w.config.series.map(function(w){return w.name})]);var g={},x={};d.forEach(function(w){g[w]=[],x[w]=[],i.w.config.series.map(function(I,R){return w.indexOf(I.name)>-1?R:null}).filter(function(I){return null!==I}).forEach(function(I){for(var R=0;R<r.series[r.maxValsInArrayIndex].length;R++){var Y,W;void 0===g[w][R]&&(g[w][R]=0,x[w][R]=0),(i.w.config.chart.stacked&&!r.comboCharts||i.w.config.chart.stacked&&r.comboCharts&&(!i.w.config.chart.stackOnlyBar||"bar"===(null===(Y=i.w.config.series)||void 0===Y||null===(W=Y[I])||void 0===W?void 0:W.type)))&&null!==r.series[I][R]&&Je.isNumber(r.series[I][R])&&(r.series[I][R]>0?g[w][R]+=parseFloat(r.series[I][R])+1e-4:x[w][R]+=parseFloat(r.series[I][R]))}})}),Object.entries(g).forEach(function(w){var I=vt(w,1)[0];g[I].forEach(function(R,Y){r.maxY=Math.max(r.maxY,g[I][Y]),r.minY=Math.min(r.minY,x[I][Y])})})}}}]),pe}(),Xi=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.elgrid=r,this.w=i.w;var d=this.w;this.xaxisFontSize=d.config.xaxis.labels.style.fontSize,this.axisFontFamily=d.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=d.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===d.config.chart.type&&d.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===d.config.xaxis.position&&(this.xAxisoffX=d.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new jt(i)}return we(pe,[{key:"drawYaxis",value:function(i){var r=this,d=this.w,g=new rt(this.ctx),x=d.config.yaxis[i].labels.style,w=x.fontSize,I=x.fontFamily,R=x.fontWeight,Y=g.group({class:"apexcharts-yaxis",rel:i,transform:"translate("+d.globals.translateYAxisX[i]+", 0)"});if(this.axesUtils.isYAxisHidden(i))return Y;var W=g.group({class:"apexcharts-yaxis-texts-g"});Y.add(W);var X=d.globals.yAxisScale[i].result.length-1,Q=d.globals.gridHeight/X,ce=d.globals.translateY,me=d.globals.yLabelFormatters[i],Ee=d.globals.yAxisScale[i].result.slice();Ee=this.axesUtils.checkForReversedLabels(i,Ee);var De="";if(d.config.yaxis[i].labels.show)for(var Ce=function(ht){var yt=Ee[ht];yt=me(yt,ht,d);var ii=d.config.yaxis[i].labels.padding;d.config.yaxis[i].opposite&&0!==d.config.yaxis.length&&(ii*=-1);var hi="end";d.config.yaxis[i].opposite&&(hi="start"),"left"===d.config.yaxis[i].labels.align?hi="start":"center"===d.config.yaxis[i].labels.align?hi="middle":"right"===d.config.yaxis[i].labels.align&&(hi="end");var xi=r.axesUtils.getYAxisForeColor(x.colors,i),Pi=d.config.yaxis[i].labels.offsetY;"heatmap"===d.config.chart.type&&(Pi-=(d.globals.gridHeight/d.globals.series.length-1)/2);var nn=g.drawText({x:ii,y:ce+X/10+Pi+1,text:yt,textAnchor:hi,fontSize:w,fontFamily:I,fontWeight:R,maxWidth:d.config.yaxis[i].labels.maxWidth,foreColor:Array.isArray(xi)?xi[ht]:xi,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+x.cssClass});ht===X&&(De=nn),W.add(nn);var Tn=document.createElementNS(d.globals.SVGNS,"title");if(Tn.textContent=Array.isArray(yt)?yt.join(" "):yt,nn.node.appendChild(Tn),0!==d.config.yaxis[i].labels.rotate){var Xn=g.rotateAroundCenter(De.node),Qn=g.rotateAroundCenter(nn.node);nn.node.setAttribute("transform","rotate(".concat(d.config.yaxis[i].labels.rotate," ").concat(Xn.x," ").concat(Qn.y,")"))}ce+=Q},Re=X;Re>=0;Re--)Ce(Re);if(void 0!==d.config.yaxis[i].title.text){var G=g.group({class:"apexcharts-yaxis-title"}),re=0;d.config.yaxis[i].opposite&&(re=d.globals.translateYAxisX[i]);var te=g.drawText({x:re,y:d.globals.gridHeight/2+d.globals.translateY+d.config.yaxis[i].title.offsetY,text:d.config.yaxis[i].title.text,textAnchor:"end",foreColor:d.config.yaxis[i].title.style.color,fontSize:d.config.yaxis[i].title.style.fontSize,fontWeight:d.config.yaxis[i].title.style.fontWeight,fontFamily:d.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+d.config.yaxis[i].title.style.cssClass});G.add(te),Y.add(G)}var oe=d.config.yaxis[i].axisBorder,ye=31+oe.offsetX;if(d.config.yaxis[i].opposite&&(ye=-31-oe.offsetX),oe.show){var Fe=g.drawLine(ye,d.globals.translateY+oe.offsetY-2,ye,d.globals.gridHeight+d.globals.translateY+oe.offsetY+2,oe.color,0,oe.width);Y.add(Fe)}return d.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(ye,X,oe,d.config.yaxis[i].axisTicks,i,Q,Y),Y}},{key:"drawYaxisInversed",value:function(i){var r=this.w,d=new rt(this.ctx),g=d.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),x=d.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(r.globals.translateXAxisX,", ").concat(r.globals.translateXAxisY,")")});g.add(x);var w=r.globals.yAxisScale[i].result.length-1,I=r.globals.gridWidth/w+.1,R=I+r.config.xaxis.labels.offsetX,Y=r.globals.xLabelFormatter,W=r.globals.yAxisScale[i].result.slice(),X=r.globals.timescaleLabels;X.length>0&&(this.xaxisLabels=X.slice(),w=(W=X.slice()).length),W=this.axesUtils.checkForReversedLabels(i,W);var Q=X.length;if(r.config.xaxis.labels.show)for(var ce=Q?0:w;Q?ce<Q:ce>=0;Q?ce++:ce--){var me=W[ce];me=Y(me,ce,r);var Ee=r.globals.gridWidth+r.globals.padHorizontal-(R-I+r.config.xaxis.labels.offsetX);if(X.length){var De=this.axesUtils.getLabel(W,X,Ee,ce,this.drawnLabels,this.xaxisFontSize);Ee=De.x,me=De.text,this.drawnLabels.push(De.text),0===ce&&r.globals.skipFirstTimelinelabel&&(me=""),ce===W.length-1&&r.globals.skipLastTimelinelabel&&(me="")}var Ce=d.drawText({x:Ee,y:this.xAxisoffX+r.config.xaxis.labels.offsetY+30-("top"===r.config.xaxis.position?r.globals.xAxisHeight+r.config.xaxis.axisTicks.height-2:0),text:me,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[i]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:r.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+r.config.xaxis.labels.style.cssClass});x.add(Ce),Ce.tspan(me);var Re=document.createElementNS(r.globals.SVGNS,"title");Re.textContent=me,Ce.node.appendChild(Re),R+=I}return this.inversedYAxisTitleText(g),this.inversedYAxisBorder(g),g}},{key:"inversedYAxisBorder",value:function(i){var r=this.w,d=new rt(this.ctx),g=r.config.xaxis.axisBorder;if(g.show){var x=0;"bar"===r.config.chart.type&&r.globals.isXNumeric&&(x-=15);var w=d.drawLine(r.globals.padHorizontal+x+g.offsetX,this.xAxisoffX,r.globals.gridWidth,this.xAxisoffX,g.color,0,g.height);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(w):i.add(w)}}},{key:"inversedYAxisTitleText",value:function(i){var r=this.w,d=new rt(this.ctx);if(void 0!==r.config.xaxis.title.text){var g=d.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),x=d.drawText({x:r.globals.gridWidth/2+r.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(r.config.xaxis.title.style.fontSize)+r.config.xaxis.title.offsetY+20,text:r.config.xaxis.title.text,textAnchor:"middle",fontSize:r.config.xaxis.title.style.fontSize,fontFamily:r.config.xaxis.title.style.fontFamily,fontWeight:r.config.xaxis.title.style.fontWeight,foreColor:r.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+r.config.xaxis.title.style.cssClass});g.add(x),i.add(g)}}},{key:"yAxisTitleRotate",value:function(i,r){var d=this.w,g=new rt(this.ctx),x={width:0,height:0},w={width:0,height:0},I=d.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g"));null!==I&&(x=I.getBoundingClientRect());var R=d.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-title text"));if(null!==R&&(w=R.getBoundingClientRect()),null!==R){var Y=this.xPaddingForYAxisTitle(i,x,w,r);R.setAttribute("x",Y.xPos-(r?10:0))}if(null!==R){var W=g.rotateAroundCenter(R);R.setAttribute("transform","rotate(".concat(r?-1*d.config.yaxis[i].title.rotate:d.config.yaxis[i].title.rotate," ").concat(W.x," ").concat(W.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(i,r,d,g){var x=this.w,w=0,I=0,R=10;return void 0===x.config.yaxis[i].title.text||i<0?{xPos:I,padd:0}:(g?(I=r.width+x.config.yaxis[i].title.offsetX+d.width/2+R/2,0===(w+=1)&&(I-=R/2)):(I=-1*r.width+x.config.yaxis[i].title.offsetX+R/2+d.width/2,x.globals.isBarHorizontal&&(I=-1*r.width-x.config.yaxis[i].title.offsetX-(R=25))),{xPos:I,padd:R})}},{key:"setYAxisXPosition",value:function(i,r){var d=this.w,g=0,x=0,w=18,I=1;d.config.yaxis.length>1&&(this.multipleYs=!0),d.config.yaxis.map(function(R,Y){var W=d.globals.ignoreYAxisIndexes.indexOf(Y)>-1||!R.show||R.floating||0===i[Y].width,X=i[Y].width+r[Y].width;R.opposite?d.globals.isBarHorizontal?d.globals.translateYAxisX[Y]=(x=d.globals.gridWidth+d.globals.translateX-1)-R.labels.offsetX:(x=d.globals.gridWidth+d.globals.translateX+I,W||(I=I+X+20),d.globals.translateYAxisX[Y]=x-R.labels.offsetX+20):(g=d.globals.translateX-w,W||(w=w+X+20),d.globals.translateYAxisX[Y]=g+R.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var i=this.w,r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(r=Je.listToArray(r)).forEach(function(d,g){var x=i.config.yaxis[g];if(x&&!x.floating&&void 0!==x.labels.align){var w=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(g,"'] .apexcharts-yaxis-texts-g")),I=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(g,"'] .apexcharts-yaxis-label"));I=Je.listToArray(I);var R=w.getBoundingClientRect();"left"===x.labels.align?(I.forEach(function(Y,W){Y.setAttribute("text-anchor","start")}),x.opposite||w.setAttribute("transform","translate(-".concat(R.width,", 0)"))):"center"===x.labels.align?(I.forEach(function(Y,W){Y.setAttribute("text-anchor","middle")}),w.setAttribute("transform","translate(".concat(R.width/2*(x.opposite?1:-1),", 0)"))):"right"===x.labels.align&&(I.forEach(function(Y,W){Y.setAttribute("text-anchor","end")}),x.opposite&&w.setAttribute("transform","translate(".concat(R.width,", 0)")))}})}}]),pe}(),Qi=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.documentEvent=Je.bind(this.documentEvent,this)}return we(pe,[{key:"addEventListener",value:function(i,r){var d=this.w;d.globals.events.hasOwnProperty(i)?d.globals.events[i].push(r):d.globals.events[i]=[r]}},{key:"removeEventListener",value:function(i,r){var d=this.w;if(d.globals.events.hasOwnProperty(i)){var g=d.globals.events[i].indexOf(r);-1!==g&&d.globals.events[i].splice(g,1)}}},{key:"fireEvent",value:function(i,r){var d=this.w;if(d.globals.events.hasOwnProperty(i)){r&&r.length||(r=[]);for(var g=d.globals.events[i],x=g.length,w=0;w<x;w++)g[w].apply(null,r)}}},{key:"setupEventHandlers",value:function(){var i=this,r=this.w,d=this.ctx,g=r.globals.dom.baseEl.querySelector(r.globals.chartClass);this.ctx.eventList.forEach(function(x){g.addEventListener(x,function(w){var I=Object.assign({},r,{seriesIndex:r.globals.capturedSeriesIndex,dataPointIndex:r.globals.capturedDataPointIndex});"mousemove"===w.type||"touchmove"===w.type?"function"==typeof r.config.chart.events.mouseMove&&r.config.chart.events.mouseMove(w,d,I):"mouseleave"===w.type||"touchleave"===w.type?"function"==typeof r.config.chart.events.mouseLeave&&r.config.chart.events.mouseLeave(w,d,I):("mouseup"===w.type&&1===w.which||"touchend"===w.type)&&("function"==typeof r.config.chart.events.click&&r.config.chart.events.click(w,d,I),d.ctx.events.fireEvent("click",[w,d,I]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(x){r.globals.dom.baseEl.addEventListener(x,i.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(i){var r=this.w,d=i.target.className;if("click"===i.type){var g=r.globals.dom.baseEl.querySelector(".apexcharts-menu");g&&g.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==d&&g.classList.remove("apexcharts-menu-open")}r.globals.clientX="touchmove"===i.type?i.touches[0].clientX:i.clientX,r.globals.clientY="touchmove"===i.type?i.touches[0].clientY:i.clientY}}]),pe}(),Pn=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"setCurrentLocaleValues",value:function(i){var r=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(r=this.w.config.chart.locales.concat(window.Apex.chart.locales));var d=r.filter(function(x){return x.name===i})[0];if(!d)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var g=Je.extend(vi,d);this.w.globals.locale=g.options}}]),pe}(),fn=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"drawAxis",value:function(i,r){var d,g,x=this,w=this.w.globals,I=this.w.config,R=new V(this.ctx,r),Y=new Xi(this.ctx,r);w.axisCharts&&"radar"!==i&&(w.isBarHorizontal?(g=Y.drawYaxisInversed(0),d=R.drawXaxisInversed(0),w.dom.elGraphical.add(d),w.dom.elGraphical.add(g)):(d=R.drawXaxis(),w.dom.elGraphical.add(d),I.yaxis.map(function(W,X){if(-1===w.ignoreYAxisIndexes.indexOf(X)&&(g=Y.drawYaxis(X),w.dom.Paper.add(g),"back"===x.w.config.grid.position)){var Q=w.dom.Paper.children()[1];Q.remove(),w.dom.Paper.add(Q)}})))}}]),pe}(),Ci=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"drawXCrosshairs",value:function(){var i=this.w,r=new rt(this.ctx),d=new yi(this.ctx),g=i.config.xaxis.crosshairs.fill.gradient,x=i.config.xaxis.crosshairs.dropShadow,Q=x.enabled,ce=x.left,me=x.top,Ee=x.blur,De=x.color,Ce=x.opacity,Re=i.config.xaxis.crosshairs.fill.color;if(i.config.xaxis.crosshairs.show){"gradient"===i.config.xaxis.crosshairs.fill.type&&(Re=r.drawGradient("vertical",g.colorFrom,g.colorTo,g.opacityFrom,g.opacityTo,null,g.stops,null));var G=r.drawRect();1===i.config.xaxis.crosshairs.width&&(G=r.drawLine());var re=i.globals.gridHeight;(!Je.isNumber(re)||re<0)&&(re=0);var te=i.config.xaxis.crosshairs.width;(!Je.isNumber(te)||te<0)&&(te=0),G.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:re,width:te,height:re,fill:Re,filter:"none","fill-opacity":i.config.xaxis.crosshairs.opacity,stroke:i.config.xaxis.crosshairs.stroke.color,"stroke-width":i.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":i.config.xaxis.crosshairs.stroke.dashArray}),Q&&(G=d.dropShadow(G,{left:ce,top:me,blur:Ee,color:De,opacity:Ce})),i.globals.dom.elGraphical.add(G)}}},{key:"drawYCrosshairs",value:function(){var i=this.w,r=new rt(this.ctx),d=i.config.yaxis[0].crosshairs,g=i.globals.barPadForNumericAxis;if(i.config.yaxis[0].crosshairs.show){var x=r.drawLine(-g,0,i.globals.gridWidth+g,0,d.stroke.color,d.stroke.dashArray,d.stroke.width);x.attr({class:"apexcharts-ycrosshairs"}),i.globals.dom.elGraphical.add(x)}var w=r.drawLine(-g,0,i.globals.gridWidth+g,0,d.stroke.color,0,0);w.attr({class:"apexcharts-ycrosshairs-hidden"}),i.globals.dom.elGraphical.add(w)}}]),pe}(),En=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"checkResponsiveConfig",value:function(i){var r=this,d=this.w,g=d.config;if(0!==g.responsive.length){var x=g.responsive.slice();x.sort(function(Y,W){return Y.breakpoint>W.breakpoint?1:W.breakpoint>Y.breakpoint?-1:0}).reverse();var w=new gn({}),I=function(){var Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},X=window.innerWidth>0?window.innerWidth:screen.width;if(X>x[0].breakpoint){var Q=bi.extendArrayProps(w,d.globals.initialConfig,d);Y=Je.extend(Q,Y),Y=Je.extend(d.config,Y),r.overrideResponsiveOptions(Y)}else for(var ce=0;ce<x.length;ce++)X<x[ce].breakpoint&&(Y=bi.extendArrayProps(w,x[ce].options,d),Y=Je.extend(d.config,Y),r.overrideResponsiveOptions(Y))};if(i){var R=bi.extendArrayProps(w,i,d);R=Je.extend(d.config,R),I(R=Je.extend(R,i))}else I({})}}},{key:"overrideResponsiveOptions",value:function(i){var r=new gn(i).init({responsiveOverride:!0});this.w.config=r}}]),pe}(),Dn=function(){function pe(i){Z(this,pe),this.ctx=i,this.colors=[],this.w=i.w;var r=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===r.config.chart.type&&r.config.plotOptions.treemap.distributed||"heatmap"===r.config.chart.type&&r.config.plotOptions.heatmap.distributed,this.isBarDistributed=r.config.plotOptions.bar.distributed&&("bar"===r.config.chart.type||"rangeBar"===r.config.chart.type)}return we(pe,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var i,r=this,d=this.w,g=new Je;if(d.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(d.config.theme.mode)),void 0===d.config.colors||0===(null===(i=d.config.colors)||void 0===i?void 0:i.length)?d.globals.colors=this.predefined():(d.globals.colors=d.config.colors,Array.isArray(d.config.colors)&&d.config.colors.length>0&&"function"==typeof d.config.colors[0]&&(d.globals.colors=d.config.series.map(function(me,Ee){var De=d.config.colors[Ee];return De||(De=d.config.colors[0]),"function"==typeof De?(r.isColorFn=!0,De({value:d.globals.axisCharts?d.globals.series[Ee][0]?d.globals.series[Ee][0]:0:d.globals.series[Ee],seriesIndex:Ee,dataPointIndex:Ee,w:d})):De}))),d.globals.seriesColors.map(function(me,Ee){me&&(d.globals.colors[Ee]=me)}),d.config.theme.monochrome.enabled){var x=[],w=d.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(w=d.globals.series[0].length*d.globals.series.length);for(var I=d.config.theme.monochrome.color,R=1/(w/d.config.theme.monochrome.shadeIntensity),Y=d.config.theme.monochrome.shadeTo,W=0,X=0;X<w;X++){var Q=void 0;"dark"===Y?(Q=g.shadeColor(-1*W,I),W+=R):(Q=g.shadeColor(W,I),W+=R),x.push(Q)}d.globals.colors=x.slice()}var ce=d.globals.colors.slice();this.pushExtraColors(d.globals.colors),["fill","stroke"].forEach(function(me){d.globals[me].colors=void 0===d.config[me].colors?r.isColorFn?d.config.colors:ce:d.config[me].colors.slice(),r.pushExtraColors(d.globals[me].colors)}),d.globals.dataLabels.style.colors=void 0===d.config.dataLabels.style.colors?ce:d.config.dataLabels.style.colors.slice(),this.pushExtraColors(d.globals.dataLabels.style.colors,50),d.globals.radarPolygons.fill.colors=void 0===d.config.plotOptions.radar.polygons.fill.colors?["dark"===d.config.theme.mode?"#424242":"none"]:d.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(d.globals.radarPolygons.fill.colors,20),d.globals.markers.colors=void 0===d.config.markers.colors?ce:d.config.markers.colors.slice(),this.pushExtraColors(d.globals.markers.colors)}},{key:"pushExtraColors",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=this.w,x=r||g.globals.series.length;if(null===d&&(d=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===g.config.chart.type&&g.config.plotOptions.heatmap.colorScale.inverse),d&&g.globals.series.length&&(x=g.globals.series[g.globals.maxValsInArrayIndex].length*g.globals.series.length),i.length<x)for(var w=x-i.length,I=0;I<w;I++)i.push(i[I])}},{key:"updateThemeOptions",value:function(i){i.chart=i.chart||{},i.tooltip=i.tooltip||{};var r=i.theme.mode||"light",d=i.theme.palette?i.theme.palette:"dark"===r?"palette4":"palette1",g=i.chart.foreColor?i.chart.foreColor:"dark"===r?"#f6f7f8":"#373d3f";return i.tooltip.theme=r,i.chart.foreColor=g,i.theme.palette=d,i}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),pe}(),cn=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(i){var r=this.w,d="title"===i?r.config.title:r.config.subtitle,g=r.globals.svgWidth/2,x=d.offsetY,w="middle";if("left"===d.align?(g=10,w="start"):"right"===d.align&&(g=r.globals.svgWidth-10,w="end"),g+=d.offsetX,x=x+parseInt(d.style.fontSize,10)+d.margin/2,void 0!==d.text){var I=new rt(this.ctx).drawText({x:g,y:x,text:d.text,textAnchor:w,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,foreColor:d.style.color,opacity:1});I.node.setAttribute("class","apexcharts-".concat(i,"-text")),r.globals.dom.Paper.add(I)}}}]),pe}(),br=function(){function pe(i){Z(this,pe),this.w=i.w,this.dCtx=i}return we(pe,[{key:"getTitleSubtitleCoords",value:function(i){var r=this.w,d=0,g=0,x="title"===i?r.config.title.floating:r.config.subtitle.floating,w=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(i,"-text"));if(null!==w&&!x){var I=w.getBoundingClientRect();d=I.width,g=r.globals.axisCharts?I.height+5:I.height}return{width:d,height:g}}},{key:"getLegendsRect",value:function(){var i=this.w,r=i.globals.dom.elLegendWrap;i.config.legend.height||"top"!==i.config.legend.position&&"bottom"!==i.config.legend.position||(r.style.maxHeight=i.globals.svgHeight/2+"px");var d=Object.assign({},Je.getBoundingClientRect(r));return this.dCtx.lgRect=null!==r&&!i.config.legend.floating&&i.config.legend.show?{x:d.x,y:d.y,height:d.height,width:0===d.height?0:d.width}:{x:0,y:0,height:0,width:0},"left"!==i.config.legend.position&&"right"!==i.config.legend.position||1.5*this.dCtx.lgRect.width>i.globals.svgWidth&&(this.dCtx.lgRect.width=i.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(i,r){var d=i;if(this.w.globals.isMultiLineX){var g=r.map(function(w,I){return Array.isArray(w)?w.length:1}),x=Math.max.apply(Math,tt(g));d=r[g.indexOf(x)]}return d}}]),pe}(),wi=function(){function pe(i){Z(this,pe),this.w=i.w,this.dCtx=i}return we(pe,[{key:"getxAxisLabelsCoords",value:function(){var i,r=this.w,d=r.globals.labels.slice();if(r.config.xaxis.convertedCatToNumeric&&0===d.length&&(d=r.globals.categoryLabels),r.globals.timescaleLabels.length>0){var g=this.getxAxisTimeScaleLabelsCoords();i={width:g.width,height:g.height},r.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==r.config.legend.position&&"right"!==r.config.legend.position||r.config.legend.floating?0:this.dCtx.lgRect.width;var x=r.globals.xLabelFormatter,w=Je.getLargestStringFromArr(d),I=this.dCtx.dimHelpers.getLargestStringFromMultiArr(w,d);r.globals.isBarHorizontal&&(I=w=r.globals.yAxisScale[0].result.reduce(function(me,Ee){return me.length>Ee.length?me:Ee},0));var R=new ki(this.dCtx.ctx),Y=w;w=R.xLabelFormat(x,w,Y,{i:void 0,dateFormatter:new Ii(this.dCtx.ctx).formatDate,w:r}),I=R.xLabelFormat(x,I,Y,{i:void 0,dateFormatter:new Ii(this.dCtx.ctx).formatDate,w:r}),(r.config.xaxis.convertedCatToNumeric&&void 0===w||""===String(w).trim())&&(I=w="1");var W=new rt(this.dCtx.ctx),X=W.getTextRects(w,r.config.xaxis.labels.style.fontSize),Q=X;if(w!==I&&(Q=W.getTextRects(I,r.config.xaxis.labels.style.fontSize)),(i={width:X.width>=Q.width?X.width:Q.width,height:X.height>=Q.height?X.height:Q.height}).width*d.length>r.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==r.config.xaxis.labels.rotate||r.config.xaxis.labels.rotateAlways){if(!r.globals.isBarHorizontal){r.globals.rotateXLabels=!0;var ce=function(me){return W.getTextRects(me,r.config.xaxis.labels.style.fontSize,r.config.xaxis.labels.style.fontFamily,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1)};X=ce(w),w!==I&&(Q=ce(I)),i.height=(X.height>Q.height?X.height:Q.height)/1.5,i.width=X.width>Q.width?X.width:Q.width}}else r.globals.rotateXLabels=!1}return r.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var i,r=this.w;if(!r.globals.hasXaxisGroups)return{width:0,height:0};var d,g=(null===(i=r.config.xaxis.group.style)||void 0===i?void 0:i.fontSize)||r.config.xaxis.labels.style.fontSize,x=r.globals.groups.map(function(X){return X.title}),w=Je.getLargestStringFromArr(x),I=this.dCtx.dimHelpers.getLargestStringFromMultiArr(w,x),R=new rt(this.dCtx.ctx),Y=R.getTextRects(w,g),W=Y;return w!==I&&(W=R.getTextRects(I,g)),d={width:Y.width>=W.width?Y.width:W.width,height:Y.height>=W.height?Y.height:W.height},r.config.xaxis.labels.show||(d={width:0,height:0}),{width:d.width,height:d.height}}},{key:"getxAxisTitleCoords",value:function(){var i=this.w,r=0,d=0;if(void 0!==i.config.xaxis.title.text){var g=new rt(this.dCtx.ctx).getTextRects(i.config.xaxis.title.text,i.config.xaxis.title.style.fontSize);r=g.width,d=g.height}return{width:r,height:d}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var i,r=this.w;this.dCtx.timescaleLabels=r.globals.timescaleLabels.slice();var d=this.dCtx.timescaleLabels.map(function(x){return x.value}),g=d.reduce(function(x,w){return void 0===x?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):x.length>w.length?x:w},0);return 1.05*(i=new rt(this.dCtx.ctx).getTextRects(g,r.config.xaxis.labels.style.fontSize)).width*d.length>r.globals.gridWidth&&0!==r.config.xaxis.labels.rotate&&(r.globals.overlappingXLabels=!0),i}},{key:"additionalPaddingXLabels",value:function(i){var r=this,d=this.w,g=d.globals,x=d.config,w=x.xaxis.type,I=i.width;g.skipLastTimelinelabel=!1,g.skipFirstTimelinelabel=!1;var R=d.config.yaxis[0].opposite&&d.globals.isBarHorizontal;x.yaxis.forEach(function(W,X){R?(r.dCtx.gridPad.left<I&&(r.dCtx.xPadLeft=I/2+1),r.dCtx.xPadRight=I/2+1):function(W,X){x.yaxis.length>1&&-1!==g.collapsedSeriesIndices.indexOf(X)||function(Q){if(r.dCtx.timescaleLabels&&r.dCtx.timescaleLabels.length){var Ee=r.dCtx.timescaleLabels[0].position-I/1.75+r.dCtx.yAxisWidthLeft;r.dCtx.timescaleLabels[r.dCtx.timescaleLabels.length-1].position+I/1.75-r.dCtx.yAxisWidthRight>g.svgWidth-g.translateX-("right"===d.config.legend.position&&r.dCtx.lgRect.width>0?r.dCtx.lgRect.width:0)&&(g.skipLastTimelinelabel=!0),Ee<-(Q.show&&!Q.floating||"bar"!==x.chart.type&&"candlestick"!==x.chart.type&&"rangeBar"!==x.chart.type&&"boxPlot"!==x.chart.type?10:I/1.75)&&(g.skipFirstTimelinelabel=!0)}else"datetime"===w?r.dCtx.gridPad.right<I&&!g.rotateXLabels&&(g.skipLastTimelinelabel=!0):"datetime"!==w&&r.dCtx.gridPad.right<I/2-r.dCtx.yAxisWidthRight&&!g.rotateXLabels&&!d.config.xaxis.labels.trim&&("between"!==d.config.xaxis.tickPlacement||d.globals.isBarHorizontal)&&(r.dCtx.xPadRight=I/2+1)}(W)}(W,X)})}}]),pe}(),Jn=function(){function pe(i){Z(this,pe),this.w=i.w,this.dCtx=i}return we(pe,[{key:"getyAxisLabelsCoords",value:function(){var i=this,r=this.w,d=[],g=10,x=new jt(this.dCtx.ctx);return r.config.yaxis.map(function(w,I){var R={seriesIndex:I,dataPointIndex:-1,w:r},Y=r.globals.yAxisScale[I],W=0;if(!x.isYAxisHidden(I)&&w.labels.show&&void 0!==w.labels.minWidth&&(W=w.labels.minWidth),!x.isYAxisHidden(I)&&w.labels.show&&Y.result.length){var X=r.globals.yLabelFormatters[I],ce=Y.result.reduce(function(re,te){var oe,ye;return(null===(oe=String(X(re,R)))||void 0===oe?void 0:oe.length)>(null===(ye=String(X(te,R)))||void 0===ye?void 0:ye.length)?re:te},Y.niceMin===Number.MIN_VALUE?0:Y.niceMin),me=ce=X(ce,R);if(void 0!==ce&&0!==ce.length||(ce=Y.niceMax),r.globals.isBarHorizontal){g=0;var Ee=r.globals.labels.slice();ce=Je.getLargestStringFromArr(Ee),ce=X(ce,{seriesIndex:I,dataPointIndex:-1,w:r}),me=i.dCtx.dimHelpers.getLargestStringFromMultiArr(ce,Ee)}var De=new rt(i.dCtx.ctx),Ce="rotate(".concat(w.labels.rotate," 0 0)"),Re=De.getTextRects(ce,w.labels.style.fontSize,w.labels.style.fontFamily,Ce,!1),G=Re;ce!==me&&(G=De.getTextRects(me,w.labels.style.fontSize,w.labels.style.fontFamily,Ce,!1)),d.push({width:(W>G.width||W>Re.width?W:G.width>Re.width?G.width:Re.width)+g,height:G.height>Re.height?G.height:Re.height})}else d.push({width:0,height:0})}),d}},{key:"getyAxisTitleCoords",value:function(){var i=this,d=[];return this.w.config.yaxis.map(function(g,x){if(g.show&&void 0!==g.title.text){var w=new rt(i.dCtx.ctx),I="rotate(".concat(g.title.rotate," 0 0)"),R=w.getTextRects(g.title.text,g.title.style.fontSize,g.title.style.fontFamily,I,!1);d.push({width:R.width,height:R.height})}else d.push({width:0,height:0})}),d}},{key:"getTotalYAxisWidth",value:function(){var i=this.w,r=0,d=0,g=0,x=i.globals.yAxisScale.length>1?10:0,w=new jt(this.dCtx.ctx),I=function(R,Y){var W=i.config.yaxis[Y].floating,X=0;R.width>0&&!W?(X=R.width+x,i.globals.ignoreYAxisIndexes.indexOf(Y)>-1&&(X=X-R.width-x)):X=W||w.isYAxisHidden(Y)?0:5,i.config.yaxis[Y].opposite?g+=X:d+=X,r+=X};return i.globals.yLabelsCoords.map(function(R,Y){I(R,Y)}),i.globals.yTitleCoords.map(function(R,Y){I(R,Y)}),i.globals.isBarHorizontal&&!i.config.yaxis[0].floating&&(r=i.globals.yLabelsCoords[0].width+i.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=d,this.dCtx.yAxisWidthRight=g,r}}]),pe}(),zn=function(){function pe(i){Z(this,pe),this.w=i.w,this.dCtx=i}return we(pe,[{key:"gridPadForColumnsInNumericAxis",value:function(i){var r=this.w;if(r.globals.noData||r.globals.allSeriesCollapsed)return 0;var d=function(W){return"bar"===W||"rangeBar"===W||"candlestick"===W||"boxPlot"===W},g=r.config.chart.type,x=0,w=d(g)?r.config.series.length:1;if(r.globals.comboBarCount>0&&(w=r.globals.comboBarCount),r.globals.collapsedSeries.forEach(function(W){d(W.type)&&(w-=1)}),r.config.chart.stacked&&(w=1),(d(g)||r.globals.comboBarCount>0)&&r.globals.isXNumeric&&!r.globals.isBarHorizontal&&w>0){var I,R,Y=Math.abs(r.globals.initialMaxX-r.globals.initialMinX);Y<=3&&(Y=r.globals.dataPoints),I=Y/i,r.globals.minXDiff&&r.globals.minXDiff/I>0&&(R=r.globals.minXDiff/I),R>i/2&&(R/=2),(x=R*parseInt(r.config.plotOptions.bar.columnWidth,10)/100)<1&&(x=1),r.globals.barPadForNumericAxis=x}return x}},{key:"gridPadFortitleSubtitle",value:function(){var i=this,r=this.w,d=r.globals,g=this.dCtx.isSparkline||!r.globals.axisCharts?0:10;["title","subtitle"].forEach(function(I){g+=void 0!==r.config[I].text?r.config[I].margin:i.dCtx.isSparkline||!r.globals.axisCharts?0:5}),!r.config.legend.show||"bottom"!==r.config.legend.position||r.config.legend.floating||r.globals.axisCharts||(g+=10);var x=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),w=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");d.gridHeight=d.gridHeight-x.height-w.height-g,d.translateY=d.translateY+x.height+w.height+g}},{key:"setGridXPosForDualYAxis",value:function(i,r){var d=this.w,g=new jt(this.dCtx.ctx);d.config.yaxis.map(function(x,w){-1!==d.globals.ignoreYAxisIndexes.indexOf(w)||x.floating||g.isYAxisHidden(w)||(x.opposite&&(d.globals.translateX=d.globals.translateX-(r[w].width+i[w].width)-parseInt(d.config.yaxis[w].labels.style.fontSize,10)/1.2-12),d.globals.translateX<2&&(d.globals.translateX=2))})}}]),pe}(),On=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new br(this),this.dimYAxis=new Jn(this),this.dimXAxis=new wi(this),this.dimGrid=new zn(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return we(pe,[{key:"plotCoords",value:function(){var i=this,r=this.w,d=r.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((r.config.markers.discrete.length>0||r.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(x){var w=vt(x,2);i.gridPad[w[0]]=Math.max(w[1],i.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(r.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(r.config.stroke.width/2,this.gridPad.bottom)),d.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),d.gridHeight=d.gridHeight-this.gridPad.top-this.gridPad.bottom,d.gridWidth=d.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var g=this.dimGrid.gridPadForColumnsInNumericAxis(d.gridWidth);d.gridWidth=d.gridWidth-2*g,d.translateX=d.translateX+this.gridPad.left+this.xPadLeft+(g>0?g+4:0),d.translateY=d.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var i=this,r=this.w,d=r.globals,g=this.dimYAxis.getyAxisLabelsCoords(),x=this.dimYAxis.getyAxisTitleCoords();r.globals.yLabelsCoords=[],r.globals.yTitleCoords=[],r.config.yaxis.map(function(ce,me){r.globals.yLabelsCoords.push({width:g[me].width,index:me}),r.globals.yTitleCoords.push({width:x[me].width,index:me})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var w=this.dimXAxis.getxAxisLabelsCoords(),I=this.dimXAxis.getxAxisGroupLabelsCoords(),R=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(w,R,I),d.translateXAxisY=r.globals.rotateXLabels?this.xAxisHeight/8:-4,d.translateXAxisX=r.globals.rotateXLabels&&r.globals.isXNumeric&&r.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,r.globals.isBarHorizontal&&(d.rotateXLabels=!1,d.translateXAxisY=parseInt(r.config.xaxis.labels.style.fontSize,10)/1.5*-1),d.translateXAxisY=d.translateXAxisY+r.config.xaxis.labels.offsetY,d.translateXAxisX=d.translateXAxisX+r.config.xaxis.labels.offsetX;var Y=this.yAxisWidth,W=this.xAxisHeight;d.xAxisLabelsHeight=this.xAxisHeight-R.height,d.xAxisGroupLabelsHeight=d.xAxisLabelsHeight-w.height,d.xAxisLabelsWidth=this.xAxisWidth,d.xAxisHeight=this.xAxisHeight;var X=10;("radar"===r.config.chart.type||this.isSparkline)&&(Y=0,W=d.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===r.config.chart.type)&&(Y=0,W=0,X=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(w);var Q=function(){d.translateX=Y,d.gridHeight=d.svgHeight-i.lgRect.height-W-(i.isSparkline||"treemap"===r.config.chart.type?0:r.globals.rotateXLabels?10:15),d.gridWidth=d.svgWidth-Y};switch("top"===r.config.xaxis.position&&(X=d.xAxisHeight-r.config.xaxis.axisTicks.height-5),r.config.legend.position){case"bottom":d.translateY=X,Q();break;case"top":d.translateY=this.lgRect.height+X,Q();break;case"left":d.translateY=X,d.translateX=this.lgRect.width+Y,d.gridHeight=d.svgHeight-W-12,d.gridWidth=d.svgWidth-this.lgRect.width-Y;break;case"right":d.translateY=X,d.translateX=Y,d.gridHeight=d.svgHeight-W-12,d.gridWidth=d.svgWidth-this.lgRect.width-Y-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(x,g),new Xi(this.ctx).setYAxisXPosition(g,x)}},{key:"setDimensionsForNonAxisCharts",value:function(){var i=this.w,r=i.globals,d=i.config,g=0;i.config.legend.show&&!i.config.legend.floating&&(g=20);var x="pie"===d.chart.type||"polarArea"===d.chart.type||"donut"===d.chart.type?"pie":"radialBar",w=d.plotOptions[x].offsetY,I=d.plotOptions[x].offsetX;if(!d.legend.show||d.legend.floating)return r.gridHeight=r.svgHeight-d.grid.padding.left+d.grid.padding.right,r.gridWidth=r.gridHeight,r.translateY=w,void(r.translateX=I+(r.svgWidth-r.gridWidth)/2);switch(d.legend.position){case"bottom":r.gridHeight=r.svgHeight-this.lgRect.height-r.goldenPadding,r.gridWidth=r.svgWidth,r.translateY=w-10,r.translateX=I+(r.svgWidth-r.gridWidth)/2;break;case"top":r.gridHeight=r.svgHeight-this.lgRect.height-r.goldenPadding,r.gridWidth=r.svgWidth,r.translateY=this.lgRect.height+w+10,r.translateX=I+(r.svgWidth-r.gridWidth)/2;break;case"left":r.gridWidth=r.svgWidth-this.lgRect.width-g,r.gridHeight="auto"!==d.chart.height?r.svgHeight:r.gridWidth,r.translateY=w,r.translateX=I+this.lgRect.width+g;break;case"right":r.gridWidth=r.svgWidth-this.lgRect.width-g-5,r.gridHeight="auto"!==d.chart.height?r.svgHeight:r.gridWidth,r.translateY=w,r.translateX=I+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(i,r,d){var g=this.w;this.xAxisHeight=(d.height+i.height+r.height)*(g.globals.isMultiLineX?1.2:g.globals.LINE_HEIGHT_RATIO)+(g.globals.hasXaxisGroups?2:1)*(g.globals.rotateXLabels?22:10)+(g.globals.rotateXLabels&&"bottom"===g.config.legend.position?10:0),this.xAxisWidth=i.width,this.xAxisHeight-r.height>g.config.xaxis.labels.maxHeight&&(this.xAxisHeight=g.config.xaxis.labels.maxHeight),g.config.xaxis.labels.minHeight&&this.xAxisHeight<g.config.xaxis.labels.minHeight&&(this.xAxisHeight=g.config.xaxis.labels.minHeight),g.config.xaxis.floating&&(this.xAxisHeight=0);var W=0,X=0;g.config.yaxis.forEach(function(Q){W+=Q.labels.minWidth,X+=Q.labels.maxWidth}),this.yAxisWidth<W&&(this.yAxisWidth=W),this.yAxisWidth>X&&(this.yAxisWidth=X)}}]),pe}(),sr=function(){function pe(i){Z(this,pe),this.w=i.w,this.lgCtx=i}return we(pe,[{key:"getLegendStyles",value:function(){var i,r,d,g=document.createElement("style");g.setAttribute("type","text/css");var x=(null===(i=this.lgCtx.ctx)||void 0===i||null===(r=i.opts)||void 0===r||null===(d=r.chart)||void 0===d?void 0:d.nonce)||this.w.config.chart.nonce;x&&g.setAttribute("nonce",x);var w=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return g.appendChild(w),g}},{key:"getLegendBBox",value:function(){var i=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:i.height,clww:i.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(i,r){var d=this,g=this.w;if(g.globals.axisCharts||"radialBar"===g.config.chart.type){g.globals.resized=!0;var x=null,w=null;g.globals.risingSeries=[],g.globals.axisCharts?(x=g.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(i,"']")),w=parseInt(x.getAttribute("data:realIndex"),10)):(x=g.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(i+1,"']")),w=parseInt(x.getAttribute("rel"),10)-1),r?[{cs:g.globals.collapsedSeries,csi:g.globals.collapsedSeriesIndices},{cs:g.globals.ancillaryCollapsedSeries,csi:g.globals.ancillaryCollapsedSeriesIndices}].forEach(function(W){d.riseCollapsedSeries(W.cs,W.csi,w)}):this.hideSeries({seriesEl:x,realIndex:w})}else{var I=g.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(i+1,"'] path")),R=g.config.chart.type;if("pie"===R||"polarArea"===R||"donut"===R){var Y=g.config.plotOptions.pie.donut.labels;new rt(this.lgCtx.ctx).pathMouseDown(I.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(I.members[0].node,Y)}I.fire("click")}}},{key:"hideSeries",value:function(i){var r=i.seriesEl,d=i.realIndex,g=this.w,x=Je.clone(g.config.series);if(g.globals.axisCharts){var w=g.config.yaxis[g.globals.seriesYAxisReverseMap[d]];if(w&&w.show&&w.showAlways)g.globals.ancillaryCollapsedSeriesIndices.indexOf(d)<0&&(g.globals.ancillaryCollapsedSeries.push({index:d,data:x[d].data.slice(),type:r.parentNode.className.baseVal.split("-")[1]}),g.globals.ancillaryCollapsedSeriesIndices.push(d));else if(g.globals.collapsedSeriesIndices.indexOf(d)<0){g.globals.collapsedSeries.push({index:d,data:x[d].data.slice(),type:r.parentNode.className.baseVal.split("-")[1]}),g.globals.collapsedSeriesIndices.push(d);var I=g.globals.risingSeries.indexOf(d);g.globals.risingSeries.splice(I,1)}}else g.globals.collapsedSeries.push({index:d,data:x[d]}),g.globals.collapsedSeriesIndices.push(d);for(var R=r.childNodes,Y=0;Y<R.length;Y++)R[Y].classList.contains("apexcharts-series-markers-wrap")&&(R[Y].classList.contains("apexcharts-hide")?R[Y].classList.remove("apexcharts-hide"):R[Y].classList.add("apexcharts-hide"));g.globals.allSeriesCollapsed=g.globals.collapsedSeries.length===g.config.series.length,x=this._getSeriesBasedOnCollapsedState(x),this.lgCtx.ctx.updateHelpers._updateSeries(x,g.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(i,r,d){var g=this.w,x=Je.clone(g.config.series);if(i.length>0){for(var w=0;w<i.length;w++)i[w].index===d&&(g.globals.axisCharts?(x[d].data=i[w].data.slice(),i.splice(w,1),r.splice(w,1),g.globals.risingSeries.push(d)):(x[d]=i[w].data,i.splice(w,1),r.splice(w,1),g.globals.risingSeries.push(d)));x=this._getSeriesBasedOnCollapsedState(x),this.lgCtx.ctx.updateHelpers._updateSeries(x,g.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(i){var r=this.w;return i.forEach(r.globals.axisCharts?function(d,g){r.globals.collapsedSeriesIndices.indexOf(g)>-1&&(i[g].data=[])}:function(d,g){r.globals.collapsedSeriesIndices.indexOf(g)>-1&&(i[g]=0)}),i}}]),pe}(),fr=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new sr(this)}return we(pe,[{key:"init",value:function(){var i=this.w,r=i.globals,d=i.config;if((d.legend.showForSingleSeries&&1===r.series.length||this.isBarsDistributed||r.series.length>1||!r.axisCharts)&&d.legend.show){for(;r.dom.elLegendWrap.firstChild;)r.dom.elLegendWrap.removeChild(r.dom.elLegendWrap.firstChild);this.drawLegends(),Je.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===d.legend.position||"top"===d.legend.position?this.legendAlignHorizontal():"right"!==d.legend.position&&"left"!==d.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var i=this,r=this.w,d=r.config.legend.fontFamily,g=r.globals.seriesNames,x=r.globals.colors.slice();if("heatmap"===r.config.chart.type){var w=r.config.plotOptions.heatmap.colorScale.ranges;g=w.map(function(xi){return xi.name?xi.name:xi.from+" - "+xi.to}),x=w.map(function(xi){return xi.color})}else this.isBarsDistributed&&(g=r.globals.labels.slice());r.config.legend.customLegendItems.length&&(g=r.config.legend.customLegendItems);for(var I=r.globals.legendFormatter,R=r.config.legend.inverseOrder,Y=R?g.length-1:0;R?Y>=0:Y<=g.length-1;R?Y--:Y++){var W,X=I(g[Y],{seriesIndex:Y,w:r}),Q=!1,ce=!1;if(r.globals.collapsedSeries.length>0)for(var me=0;me<r.globals.collapsedSeries.length;me++)r.globals.collapsedSeries[me].index===Y&&(Q=!0);if(r.globals.ancillaryCollapsedSeriesIndices.length>0)for(var Ee=0;Ee<r.globals.ancillaryCollapsedSeriesIndices.length;Ee++)r.globals.ancillaryCollapsedSeriesIndices[Ee]===Y&&(ce=!0);var De=document.createElement("span");De.classList.add("apexcharts-legend-marker");var Ce=r.config.legend.markers.offsetX,Re=r.config.legend.markers.offsetY,G=r.config.legend.markers.height,re=r.config.legend.markers.width,te=r.config.legend.markers.strokeWidth,oe=r.config.legend.markers.strokeColor,ye=r.config.legend.markers.radius,Fe=De.style;Fe.background=x[Y],Fe.color=x[Y],Fe.setProperty("background",x[Y],"important"),r.config.legend.markers.fillColors&&r.config.legend.markers.fillColors[Y]&&(Fe.background=r.config.legend.markers.fillColors[Y]),void 0!==r.globals.seriesColors[Y]&&(Fe.background=r.globals.seriesColors[Y],Fe.color=r.globals.seriesColors[Y]),Fe.height=Array.isArray(G)?parseFloat(G[Y])+"px":parseFloat(G)+"px",Fe.width=Array.isArray(re)?parseFloat(re[Y])+"px":parseFloat(re)+"px",Fe.left=(Array.isArray(Ce)?parseFloat(Ce[Y]):parseFloat(Ce))+"px",Fe.top=(Array.isArray(Re)?parseFloat(Re[Y]):parseFloat(Re))+"px",Fe.borderWidth=Array.isArray(te)?te[Y]:te,Fe.borderColor=Array.isArray(oe)?oe[Y]:oe,Fe.borderRadius=Array.isArray(ye)?parseFloat(ye[Y])+"px":parseFloat(ye)+"px",r.config.legend.markers.customHTML&&(Array.isArray(r.config.legend.markers.customHTML)?r.config.legend.markers.customHTML[Y]&&(De.innerHTML=r.config.legend.markers.customHTML[Y]()):De.innerHTML=r.config.legend.markers.customHTML()),rt.setAttrs(De,{rel:Y+1,"data:collapsed":Q||ce}),(Q||ce)&&De.classList.add("apexcharts-inactive-legend");var ht=document.createElement("div"),yt=document.createElement("span");yt.classList.add("apexcharts-legend-text"),yt.innerHTML=Array.isArray(X)?X.join(" "):X;var ii=r.config.legend.labels.useSeriesColors?r.globals.colors[Y]:Array.isArray(r.config.legend.labels.colors)?null===(W=r.config.legend.labels.colors)||void 0===W?void 0:W[Y]:r.config.legend.labels.colors;ii||(ii=r.config.chart.foreColor),yt.style.color=ii,yt.style.fontSize=parseFloat(r.config.legend.fontSize)+"px",yt.style.fontWeight=r.config.legend.fontWeight,yt.style.fontFamily=d||r.config.chart.fontFamily,rt.setAttrs(yt,{rel:Y+1,i:Y,"data:default-text":encodeURIComponent(X),"data:collapsed":Q||ce}),ht.appendChild(De),ht.appendChild(yt);var hi=new bi(this.ctx);r.config.legend.showForZeroSeries||0===hi.getSeriesTotalByIndex(Y)&&hi.seriesHaveSameValues(Y)&&!hi.isSeriesNull(Y)&&-1===r.globals.collapsedSeriesIndices.indexOf(Y)&&-1===r.globals.ancillaryCollapsedSeriesIndices.indexOf(Y)&&ht.classList.add("apexcharts-hidden-zero-series"),r.config.legend.showForNullSeries||hi.isSeriesNull(Y)&&-1===r.globals.collapsedSeriesIndices.indexOf(Y)&&-1===r.globals.ancillaryCollapsedSeriesIndices.indexOf(Y)&&ht.classList.add("apexcharts-hidden-null-series"),r.globals.dom.elLegendWrap.appendChild(ht),r.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(r.config.legend.horizontalAlign)),r.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+r.config.legend.position),ht.classList.add("apexcharts-legend-series"),ht.style.margin="".concat(r.config.legend.itemMargin.vertical,"px ").concat(r.config.legend.itemMargin.horizontal,"px"),r.globals.dom.elLegendWrap.style.width=r.config.legend.width?r.config.legend.width+"px":"",r.globals.dom.elLegendWrap.style.height=r.config.legend.height?r.config.legend.height+"px":"",rt.setAttrs(ht,{rel:Y+1,seriesName:Je.escapeString(g[Y]),"data:collapsed":Q||ce}),(Q||ce)&&ht.classList.add("apexcharts-inactive-legend"),r.config.legend.onItemClick.toggleDataSeries||ht.classList.add("apexcharts-no-click")}r.globals.dom.elWrap.addEventListener("click",i.onLegendClick,!0),r.config.legend.onItemHover.highlightDataSeries&&0===r.config.legend.customLegendItems.length&&(r.globals.dom.elWrap.addEventListener("mousemove",i.onLegendHovered,!0),r.globals.dom.elWrap.addEventListener("mouseout",i.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(i,r){var d=this.w,g=d.globals.dom.elLegendWrap,x=g.getBoundingClientRect(),w=0,I=0;if("bottom"===d.config.legend.position)I+=d.globals.svgHeight-x.height/2;else if("top"===d.config.legend.position){var R=new On(this.ctx),Y=R.dimHelpers.getTitleSubtitleCoords("title").height,W=R.dimHelpers.getTitleSubtitleCoords("subtitle").height;I=I+(Y>0?Y-10:0)+(W>0?W-10:0)}g.style.position="absolute",I=I+r+d.config.legend.offsetY,g.style.left=(w=w+i+d.config.legend.offsetX)+"px",g.style.top=I+"px","bottom"===d.config.legend.position?(g.style.top="auto",g.style.bottom=5-d.config.legend.offsetY+"px"):"right"===d.config.legend.position&&(g.style.left="auto",g.style.right=25+d.config.legend.offsetX+"px"),["width","height"].forEach(function(X){g.style[X]&&(g.style[X]=parseInt(d.config.legend[X],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var i=this.w;i.globals.dom.elLegendWrap.style.right=0;var r=this.legendHelpers.getLegendBBox(),d=new On(this.ctx),g=d.dimHelpers.getTitleSubtitleCoords("title"),x=d.dimHelpers.getTitleSubtitleCoords("subtitle"),w=0;"bottom"===i.config.legend.position?w=-r.clwh/1.8:"top"===i.config.legend.position&&(w=g.height+x.height+i.config.title.margin+i.config.subtitle.margin-10),this.setLegendWrapXY(20,w)}},{key:"legendAlignVertical",value:function(){var i=this.w,r=this.legendHelpers.getLegendBBox(),d=0;"left"===i.config.legend.position&&(d=20),"right"===i.config.legend.position&&(d=i.globals.svgWidth-r.clww-10),this.setLegendWrapXY(d,20)}},{key:"onLegendHovered",value:function(i){var r=this.w,d=i.target.classList.contains("apexcharts-legend-series")||i.target.classList.contains("apexcharts-legend-text")||i.target.classList.contains("apexcharts-legend-marker");if("heatmap"===r.config.chart.type||this.isBarsDistributed){if(d){var g=parseInt(i.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,g,this.w]),new Yn(this.ctx).highlightRangeInSeries(i,i.target)}}else!i.target.classList.contains("apexcharts-inactive-legend")&&d&&new Yn(this.ctx).toggleSeriesOnHover(i,i.target)}},{key:"onLegendClick",value:function(i){var r=this.w;if(!r.config.legend.customLegendItems.length&&(i.target.classList.contains("apexcharts-legend-series")||i.target.classList.contains("apexcharts-legend-text")||i.target.classList.contains("apexcharts-legend-marker"))){var d=parseInt(i.target.getAttribute("rel"),10)-1,g="true"===i.target.getAttribute("data:collapsed"),x=this.w.config.chart.events.legendClick;"function"==typeof x&&x(this.ctx,d,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,d,this.w]);var w=this.w.config.legend.markers.onClick;"function"==typeof w&&i.target.classList.contains("apexcharts-legend-marker")&&(w(this.ctx,d,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,d,this.w])),"treemap"!==r.config.chart.type&&"heatmap"!==r.config.chart.type&&!this.isBarsDistributed&&r.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(d,g)}}}]),pe}(),Yr=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w;var r=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=r.globals.minX,this.maxX=r.globals.maxX}return we(pe,[{key:"createToolbar",value:function(){var i=this,r=this.w,d=function(){return document.createElement("div")},g=d();if(g.setAttribute("class","apexcharts-toolbar"),g.style.top=r.config.chart.toolbar.offsetY+"px",g.style.right=3-r.config.chart.toolbar.offsetX+"px",r.globals.dom.elWrap.appendChild(g),this.elZoom=d(),this.elZoomIn=d(),this.elZoomOut=d(),this.elPan=d(),this.elSelection=d(),this.elZoomReset=d(),this.elMenuIcon=d(),this.elMenu=d(),this.elCustomIcons=[],this.t=r.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var x=0;x<this.t.customIcons.length;x++)this.elCustomIcons.push(d());var w=[],I=function(X,Q,ce){var me=X.toLowerCase();i.t[me]&&r.config.chart.zoom.enabled&&w.push({el:Q,icon:"string"==typeof i.t[me]?i.t[me]:ce,title:i.localeValues[X],class:"apexcharts-".concat(me,"-icon")})};I("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),I("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var R=function(X){i.t[X]&&r.config.chart[X].enabled&&w.push({el:"zoom"===X?i.elZoom:i.elSelection,icon:"string"==typeof i.t[X]?i.t[X]:"zoom"===X?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:i.localeValues["zoom"===X?"selectionZoom":"selection"],class:r.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(X,"-icon")})};R("zoom"),R("selection"),this.t.pan&&r.config.chart.zoom.enabled&&w.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:r.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),I("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&w.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var Y=0;Y<this.elCustomIcons.length;Y++)w.push({el:this.elCustomIcons[Y],icon:this.t.customIcons[Y].icon,title:this.t.customIcons[Y].title,index:this.t.customIcons[Y].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[Y].class});w.forEach(function(X,Q){X.index&&Je.moveIndexInArray(w,Q,X.index)});for(var W=0;W<w.length;W++)rt.setAttrs(w[W].el,{class:w[W].class,title:w[W].title}),w[W].el.innerHTML=w[W].icon,g.appendChild(w[W].el);this._createHamburgerMenu(g),r.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):r.globals.panEnabled?this.elPan.classList.add(this.selectedClass):r.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(i){this.elMenuItems=[],i.appendChild(this.elMenu),rt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var r=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],d=0;d<r.length;d++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[d].innerHTML=r[d].title,rt.setAttrs(this.elMenuItems[d],{class:"apexcharts-menu-item ".concat(r[d].name),title:r[d].title}),this.elMenu.appendChild(this.elMenuItems[d])}},{key:"addToolbarEventListeners",value:function(){var i=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(d){d.classList.contains("exportSVG")?d.addEventListener("click",i.handleDownload.bind(i,"svg")):d.classList.contains("exportPNG")?d.addEventListener("click",i.handleDownload.bind(i,"png")):d.classList.contains("exportCSV")&&d.addEventListener("click",i.handleDownload.bind(i,"csv"))});for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons[r].addEventListener("click",this.t.customIcons[r].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(i){this.ctx.getSyncedCharts().forEach(function(r){r.ctx.toolbar.toggleOtherControls();var d="selection"===i?r.ctx.toolbar.elSelection:r.ctx.toolbar.elZoom,g="selection"===i?"selectionEnabled":"zoomEnabled";r.w.globals[g]=!r.w.globals[g],d.classList.contains(r.ctx.toolbar.selectedClass)?d.classList.remove(r.ctx.toolbar.selectedClass):d.classList.add(r.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var i=this.w;this.elZoom||(this.elZoom=i.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=i.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=i.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(i){this.toggleOtherControls(),"pan"===i?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var r="pan"===i?this.elPan:this.elZoom,d="pan"===i?this.elZoom:this.elPan;r&&r.classList.add(this.selectedClass),d&&d.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(i){i.ctx.toolbar.toggleOtherControls(),i.w.globals.panEnabled=!i.w.globals.panEnabled,i.ctx.toolbar.elPan.classList.contains(i.ctx.toolbar.selectedClass)?i.ctx.toolbar.elPan.classList.remove(i.ctx.toolbar.selectedClass):i.ctx.toolbar.elPan.classList.add(i.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var i=this,r=this.w;r.globals.panEnabled=!1,r.globals.zoomEnabled=!1,r.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(d){d&&d.classList.remove(i.selectedClass)})}},{key:"handleZoomIn",value:function(){var i=this.w;i.globals.isRangeBar&&(this.minX=i.globals.minY,this.maxX=i.globals.maxY);var r=(this.minX+this.maxX)/2,x=this._getNewMinXMaxX((this.minX+r)/2,(this.maxX+r)/2);i.globals.disableZoomIn||this.zoomUpdateOptions(x.minX,x.maxX)}},{key:"handleZoomOut",value:function(){var i=this.w;if(i.globals.isRangeBar&&(this.minX=i.globals.minY,this.maxX=i.globals.maxY),!("datetime"===i.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var r=(this.minX+this.maxX)/2,x=this._getNewMinXMaxX(this.minX-(r-this.minX),this.maxX-(r-this.maxX));i.globals.disableZoomOut||this.zoomUpdateOptions(x.minX,x.maxX)}}},{key:"_getNewMinXMaxX",value:function(i,r){var d=this.w.config.xaxis.convertedCatToNumeric;return{minX:d?Math.floor(i):i,maxX:d?Math.floor(r):r}}},{key:"zoomUpdateOptions",value:function(i,r){var d=this.w;if(void 0!==i||void 0!==r){if(!(d.config.xaxis.convertedCatToNumeric&&(i<1&&(i=1,r=d.globals.dataPoints),r-i<2))){var g={min:i,max:r},x=this.getBeforeZoomRange(g);x&&(g=x.xaxis);var w={xaxis:g},I=Je.clone(d.globals.initialConfig.yaxis);d.config.chart.group||(w.yaxis=I),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(w,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(g,I)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(i,r){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:i,yaxis:r})}},{key:"getBeforeZoomRange",value:function(i,r){var d=null;return"function"==typeof this.ev.beforeZoom&&(d=this.ev.beforeZoom(this,{xaxis:i,yaxis:r})),d}},{key:"toggleMenu",value:function(){var i=this;window.setTimeout(function(){i.elMenu.classList.contains("apexcharts-menu-open")?i.elMenu.classList.remove("apexcharts-menu-open"):i.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(i){var r=this.w,d=new gi(this.ctx);switch(i){case"svg":d.exportToSVG(this.ctx);break;case"png":d.exportToPng(this.ctx);break;case"csv":d.exportToCSV({series:r.config.series,columnDelimiter:r.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(i){this.ctx.getSyncedCharts().forEach(function(r){var d=r.w;if(d.globals.lastXAxis.min=d.globals.initialConfig.xaxis.min,d.globals.lastXAxis.max=d.globals.initialConfig.xaxis.max,r.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof d.config.chart.events.beforeResetZoom){var g=d.config.chart.events.beforeResetZoom(r,d);g&&r.updateHelpers.revertDefaultAxisMinMax(g)}"function"==typeof d.config.chart.events.zoomed&&r.ctx.toolbar.zoomCallback({min:d.config.xaxis.min,max:d.config.xaxis.max}),d.globals.zoomed=!1;var x=r.ctx.series.emptyCollapsedSeries(Je.clone(d.globals.initialSeries));r.updateHelpers._updateSeries(x,d.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),pe}(),Nn=function(pe){Le(r,Yr);var i=ut(r);function r(d){var g;return Z(this,r),(g=i.call(this,d)).ctx=d,g.w=d.w,g.dragged=!1,g.graphics=new rt(g.ctx),g.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],g.clientX=0,g.clientY=0,g.startX=0,g.endX=0,g.dragX=0,g.startY=0,g.endY=0,g.dragY=0,g.moveDirection="none",g}return we(r,[{key:"init",value:function(d){var g=this,x=d.xyRatios,w=this.w,I=this;this.xyRatios=x,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=w.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),w.globals.dom.elGraphical.add(this.zoomRect),w.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===w.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:w.globals.gridWidth,maxY:w.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===w.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:w.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=w.globals.dom.baseEl.querySelector("".concat(w.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(R){g.hoverArea.addEventListener(R,I.svgMouseEvents.bind(I,x),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(d,g){var x=this.w,w=this,I=this.ctx.toolbar,R=x.globals.zoomEnabled?x.config.chart.zoom.type:x.config.chart.selection.type,Y=x.config.chart.toolbar.autoSelected;if(g.shiftKey?(this.shiftWasPressed=!0,I.enableZoomPanFromToolbar("pan"===Y?"zoom":"pan")):this.shiftWasPressed&&(I.enableZoomPanFromToolbar(Y),this.shiftWasPressed=!1),g.target){var W,X=g.target.classList;if(g.target.parentNode&&null!==g.target.parentNode&&(W=g.target.parentNode.classList),!(X.contains("apexcharts-selection-rect")||X.contains("apexcharts-legend-marker")||X.contains("apexcharts-legend-text")||W&&W.contains("apexcharts-toolbar"))){if(w.clientX="touchmove"===g.type||"touchstart"===g.type?g.touches[0].clientX:"touchend"===g.type?g.changedTouches[0].clientX:g.clientX,w.clientY="touchmove"===g.type||"touchstart"===g.type?g.touches[0].clientY:"touchend"===g.type?g.changedTouches[0].clientY:g.clientY,("mousedown"===g.type||"touchmove"===g.type)&&1===g.which){var Q=w.gridRect.getBoundingClientRect();w.startX=w.clientX-Q.left,w.startY=w.clientY-Q.top,w.dragged=!1,w.w.globals.mousedown=!0}if("mousemove"===g.type&&1===g.which||"touchmove"===g.type)if(w.dragged=!0,x.globals.panEnabled){if(x.globals.selection=null,w.w.globals.mousedown||"touchmove"===g.type){if("touchmove"===g.type&&!w.w.globals.mousedown){console.warn("me.w.globals.mousedown ",w.w.globals.mousedown);var ce=w.gridRect.getBoundingClientRect();w.startX=w.clientX-ce.left,w.startY=w.clientY-ce.top,w.w.globals.mousedown=!0}w.panDragging({context:w,zoomtype:R,xyRatios:d})}}else{if("touchmove"===g.type){if(!w.w.globals.mousedown){var me=w.gridRect.getBoundingClientRect();w.startX=w.clientX-me.left,w.startY=w.clientY-me.top}w.w.globals.mousedown=!0}(w.w.globals.mousedown&&x.globals.zoomEnabled||w.w.globals.mousedown&&x.globals.selectionEnabled)&&(w.selection=w.selectionDrawing({context:w,zoomtype:R}))}if("mouseup"===g.type||"touchend"===g.type||"mouseleave"===g.type){var Ee=w.gridRect.getBoundingClientRect();w.w.globals.mousedown&&(w.endX=w.clientX-Ee.left,w.endY=w.clientY-Ee.top,w.dragX=Math.abs(w.endX-w.startX),w.dragY=Math.abs(w.endY-w.startY),(x.globals.zoomEnabled||x.globals.selectionEnabled)&&w.selectionDrawn({context:w,zoomtype:R}),x.globals.panEnabled&&x.config.xaxis.convertedCatToNumeric&&w.delayedPanScrolled()),x.globals.zoomEnabled&&w.hideSelectionRect(this.selectionRect),w.dragged=!1,w.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var d=this.w;if(this.selectionRect){var g=this.selectionRect.node.getBoundingClientRect();g.width>0&&g.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:d.globals.gridWidth,maxY:d.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var d=this.w,g=this.xyRatios;if(!d.globals.zoomEnabled)if(null!=d.globals.selection)this.drawSelectionRect(d.globals.selection);else if(void 0!==d.config.chart.selection.xaxis.min&&void 0!==d.config.chart.selection.xaxis.max){var x=(d.config.chart.selection.xaxis.min-d.globals.minX)/g.xRatio,w=d.globals.gridWidth-(d.globals.maxX-d.config.chart.selection.xaxis.max)/g.xRatio-x;d.globals.isRangeBar&&(x=(d.config.chart.selection.xaxis.min-d.globals.yAxisScale[0].niceMin)/g.invertedYRatio,w=(d.config.chart.selection.xaxis.max-d.config.chart.selection.xaxis.min)/g.invertedYRatio),this.drawSelectionRect({x,y:0,width:w,height:d.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof d.config.chart.events.selection&&d.config.chart.events.selection(this.ctx,{xaxis:{min:d.config.chart.selection.xaxis.min,max:d.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(d){var g=d.x,x=d.y,w=d.width,I=d.height,R=d.translateX,W=d.translateY,Q=this.w,ce=this.zoomRect,me=this.selectionRect;if(this.dragged||null!==Q.globals.selection){var Ee={transform:"translate("+(void 0===R?0:R)+", "+(void 0===W?0:W)+")"};Q.globals.zoomEnabled&&this.dragged&&(w<0&&(w=1),ce.attr({x:g,y:x,width:w,height:I,fill:Q.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":Q.config.chart.zoom.zoomedArea.fill.opacity,stroke:Q.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":Q.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":Q.config.chart.zoom.zoomedArea.stroke.opacity}),rt.setAttrs(ce.node,Ee)),Q.globals.selectionEnabled&&(me.attr({x:g,y:x,width:w>0?w:0,height:I>0?I:0,fill:Q.config.chart.selection.fill.color,"fill-opacity":Q.config.chart.selection.fill.opacity,stroke:Q.config.chart.selection.stroke.color,"stroke-width":Q.config.chart.selection.stroke.width,"stroke-dasharray":Q.config.chart.selection.stroke.dashArray,"stroke-opacity":Q.config.chart.selection.stroke.opacity}),rt.setAttrs(me.node,Ee))}}},{key:"hideSelectionRect",value:function(d){d&&d.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(d){var Ee,x=d.zoomtype,w=this.w,I=d.context,R=this.gridRect.getBoundingClientRect(),Y=I.startX-1,W=I.startY,X=!1,Q=!1,ce=I.clientX-R.left-Y,me=I.clientY-R.top-W;return Math.abs(ce+Y)>w.globals.gridWidth?ce=w.globals.gridWidth-Y:I.clientX-R.left<0&&(ce=Y),Y>I.clientX-R.left&&(X=!0,ce=Math.abs(ce)),W>I.clientY-R.top&&(Q=!0,me=Math.abs(me)),I.drawSelectionRect(Ee="x"===x?{x:X?Y-ce:Y,y:0,width:ce,height:w.globals.gridHeight}:"y"===x?{x:0,y:Q?W-me:W,width:w.globals.gridWidth,height:me}:{x:X?Y-ce:Y,y:Q?W-me:W,width:ce,height:me}),I.selectionDragging("resizing"),Ee}},{key:"selectionDragging",value:function(d,g){var x=this,w=this.w,I=this.xyRatios,R=this.selectionRect,Y=0;"resizing"===d&&(Y=30);var W=function(Q){return parseFloat(R.node.getAttribute(Q))},X={x:W("x"),y:W("y"),width:W("width"),height:W("height")};w.globals.selection=X,"function"==typeof w.config.chart.events.selection&&w.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var Q,ce,me,Ee,De=x.gridRect.getBoundingClientRect(),Ce=R.node.getBoundingClientRect();w.globals.isRangeBar?(Q=w.globals.yAxisScale[0].niceMin+(Ce.left-De.left)*I.invertedYRatio,ce=w.globals.yAxisScale[0].niceMin+(Ce.right-De.left)*I.invertedYRatio,me=0,Ee=1):(Q=w.globals.xAxisScale.niceMin+(Ce.left-De.left)*I.xRatio,ce=w.globals.xAxisScale.niceMin+(Ce.right-De.left)*I.xRatio,me=w.globals.yAxisScale[0].niceMin+(De.bottom-Ce.bottom)*I.yRatio[0],Ee=w.globals.yAxisScale[0].niceMax-(Ce.top-De.top)*I.yRatio[0]);var Re={xaxis:{min:Q,max:ce},yaxis:{min:me,max:Ee}};w.config.chart.events.selection(x.ctx,Re),w.config.chart.brush.enabled&&void 0!==w.config.chart.events.brushScrolled&&w.config.chart.events.brushScrolled(x.ctx,Re)},Y))}},{key:"selectionDrawn",value:function(d){var x=d.zoomtype,w=this.w,I=d.context,R=this.xyRatios,Y=this.ctx.toolbar;if(I.startX>I.endX){var W=I.startX;I.startX=I.endX,I.endX=W}if(I.startY>I.endY){var X=I.startY;I.startY=I.endY,I.endY=X}var Q=void 0,ce=void 0;w.globals.isRangeBar?(Q=w.globals.yAxisScale[0].niceMin+I.startX*R.invertedYRatio,ce=w.globals.yAxisScale[0].niceMin+I.endX*R.invertedYRatio):(Q=w.globals.xAxisScale.niceMin+I.startX*R.xRatio,ce=w.globals.xAxisScale.niceMin+I.endX*R.xRatio);var me=[],Ee=[];if(w.config.yaxis.forEach(function(oe,ye){me.push(w.globals.yAxisScale[ye].niceMax-R.yRatio[ye]*I.startY),Ee.push(w.globals.yAxisScale[ye].niceMax-R.yRatio[ye]*I.endY)}),I.dragged&&(I.dragX>10||I.dragY>10)&&Q!==ce)if(w.globals.zoomEnabled){var De=Je.clone(w.globals.initialConfig.yaxis),Ce=Je.clone(w.globals.initialConfig.xaxis);if(w.globals.zoomed=!0,w.config.xaxis.convertedCatToNumeric&&(Q=Math.floor(Q),ce=Math.floor(ce),Q<1&&(Q=1,ce=w.globals.dataPoints),ce-Q<2&&(ce=Q+1)),"xy"!==x&&"x"!==x||(Ce={min:Q,max:ce}),"xy"!==x&&"y"!==x||De.forEach(function(oe,ye){De[ye].min=Ee[ye],De[ye].max=me[ye]}),Y){var Re=Y.getBeforeZoomRange(Ce,De);Re&&(Ce=Re.xaxis?Re.xaxis:Ce,De=Re.yaxis?Re.yaxis:De)}var G={xaxis:Ce};w.config.chart.group||(G.yaxis=De),I.ctx.updateHelpers._updateOptions(G,!1,I.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof w.config.chart.events.zoomed&&Y.zoomCallback(Ce,De)}else if(w.globals.selectionEnabled){var re,te=null;re={min:Q,max:ce},"xy"!==x&&"y"!==x||(te=Je.clone(w.config.yaxis)).forEach(function(oe,ye){te[ye].min=Ee[ye],te[ye].max=me[ye]}),w.globals.selection=I.selection,"function"==typeof w.config.chart.events.selection&&w.config.chart.events.selection(I.ctx,{xaxis:re,yaxis:te})}}},{key:"panDragging",value:function(d){var x=this.w,w=d.context;if(void 0!==x.globals.lastClientPosition.x){var I=x.globals.lastClientPosition.x-w.clientX,R=x.globals.lastClientPosition.y-w.clientY;Math.abs(I)>Math.abs(R)&&I>0?this.moveDirection="left":Math.abs(I)>Math.abs(R)&&I<0?this.moveDirection="right":Math.abs(R)>Math.abs(I)&&R>0?this.moveDirection="up":Math.abs(R)>Math.abs(I)&&R<0&&(this.moveDirection="down")}x.globals.lastClientPosition={x:w.clientX,y:w.clientY},x.config.xaxis.convertedCatToNumeric||w.panScrolled(x.globals.isRangeBar?x.globals.minY:x.globals.minX,x.globals.isRangeBar?x.globals.maxY:x.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var d=this.w,g=d.globals.minX,x=d.globals.maxX,w=(d.globals.maxX-d.globals.minX)/2;"left"===this.moveDirection?(g=d.globals.minX+w,x=d.globals.maxX+w):"right"===this.moveDirection&&(g=d.globals.minX-w,x=d.globals.maxX-w),g=Math.floor(g),x=Math.floor(x),this.updateScrolledChart({xaxis:{min:g,max:x}},g,x)}},{key:"panScrolled",value:function(d,g){var x=this.w,w=this.xyRatios,I=Je.clone(x.globals.initialConfig.yaxis),R=w.xRatio,Y=x.globals.minX,W=x.globals.maxX;x.globals.isRangeBar&&(R=w.invertedYRatio,Y=x.globals.minY,W=x.globals.maxY),"left"===this.moveDirection?(d=Y+x.globals.gridWidth/15*R,g=W+x.globals.gridWidth/15*R):"right"===this.moveDirection&&(d=Y-x.globals.gridWidth/15*R,g=W-x.globals.gridWidth/15*R),x.globals.isRangeBar||(d<x.globals.initialMinX||g>x.globals.initialMaxX)&&(d=Y,g=W);var X={xaxis:{min:d,max:g}};x.config.chart.group||(X.yaxis=I),this.updateScrolledChart(X,d,g)}},{key:"updateScrolledChart",value:function(d,g,x){var w=this.w;this.ctx.updateHelpers._updateOptions(d,!1,!1),"function"==typeof w.config.chart.events.scrolled&&w.config.chart.events.scrolled(this.ctx,{xaxis:{min:g,max:x}})}}]),r}(),_r=function(){function pe(i){Z(this,pe),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx}return we(pe,[{key:"getNearestValues",value:function(i){var r=i.hoverArea,g=i.clientX,x=i.clientY,w=this.w,I=i.elGrid.getBoundingClientRect(),R=I.width,Y=I.height,W=R/(w.globals.dataPoints-1),X=Y/w.globals.dataPoints,Q=this.hasBars();!w.globals.comboCharts&&!Q||w.config.xaxis.convertedCatToNumeric||(W=R/w.globals.dataPoints);var ce=g-I.left-w.globals.barPadForNumericAxis,me=x-I.top;ce<0||me<0||ce>R||me>Y?(r.classList.remove("hovering-zoom"),r.classList.remove("hovering-pan")):w.globals.zoomEnabled?(r.classList.remove("hovering-pan"),r.classList.add("hovering-zoom")):w.globals.panEnabled&&(r.classList.remove("hovering-zoom"),r.classList.add("hovering-pan"));var Ee=Math.round(ce/W),De=Math.floor(me/X);Q&&!w.config.xaxis.convertedCatToNumeric&&(Ee=Math.ceil(ce/W),Ee-=1);var Ce=null,Re=null,G=w.globals.seriesXvalues.map(function(Fe){return Fe.filter(function(ht){return Je.isNumber(ht)})}),re=w.globals.seriesYvalues.map(function(Fe){return Fe.filter(function(ht){return Je.isNumber(ht)})});if(w.globals.isXNumeric){var te=this.ttCtx.getElGrid().getBoundingClientRect(),oe=ce*(te.width/R);Ce=(Re=this.closestInMultiArray(oe,me*(te.height/Y),G,re)).index,Ee=Re.j,null!==Ce&&(Ee=(Re=this.closestInArray(oe,G=w.globals.seriesXvalues[Ce])).index)}return w.globals.capturedSeriesIndex=null===Ce?-1:Ce,(!Ee||Ee<1)&&(Ee=0),w.globals.capturedDataPointIndex=w.globals.isBarHorizontal?De:Ee,{capturedSeries:Ce,j:w.globals.isBarHorizontal?De:Ee,hoverX:ce,hoverY:me}}},{key:"closestInMultiArray",value:function(i,r,d,g){var w=0,I=null,R=-1;this.w.globals.series.length>1?w=this.getFirstActiveXArray(d):I=0;var W=Math.abs(i-d[w][0]);if(d.forEach(function(ce){ce.forEach(function(me,Ee){var De=Math.abs(i-me);De<=W&&(W=De,R=Ee)})}),-1!==R){var Q=Math.abs(r-g[w][R]);I=w,g.forEach(function(ce,me){var Ee=Math.abs(r-ce[R]);Ee<=Q&&(Q=Ee,I=me)})}return{index:I,j:R}}},{key:"getFirstActiveXArray",value:function(i){for(var r=this.w,d=0,g=i.map(function(w,I){return w.length>0?I:-1}),x=0;x<g.length;x++)if(-1!==g[x]&&-1===r.globals.collapsedSeriesIndices.indexOf(x)&&-1===r.globals.ancillaryCollapsedSeriesIndices.indexOf(x)){d=g[x];break}return d}},{key:"closestInArray",value:function(i,r){for(var g=null,x=Math.abs(i-r[0]),w=0;w<r.length;w++){var I=Math.abs(i-r[w]);I<x&&(x=I,g=w)}return{index:g}}},{key:"isXoverlap",value:function(i){var r=[],d=this.w.globals.seriesX.filter(function(x){return void 0!==x[0]});if(d.length>0)for(var g=0;g<d.length-1;g++)void 0!==d[g][i]&&void 0!==d[g+1][i]&&d[g][i]!==d[g+1][i]&&r.push("unEqual");return 0===r.length}},{key:"isInitialSeriesSameLen",value:function(){for(var i=!0,r=this.w.globals.initialSeries,d=0;d<r.length-1;d++)if(r[d].data.length!==r[d+1].data.length){i=!1;break}return i}},{key:"getBarsHeight",value:function(i){return tt(i).reduce(function(r,d){return r+d.getBBox().height},0)}},{key:"getElMarkers",value:function(i){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof i?".apexcharts-series[data\\:realIndex='".concat(i,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(i=tt(i)).sort(function(d,g){var x=Number(d.getAttribute("data:realIndex")),w=Number(g.getAttribute("data:realIndex"));return w<x?1:w>x?-1:0});var r=[];return i.forEach(function(d){r.push(d.querySelector(".apexcharts-marker"))}),r}},{key:"hasMarkers",value:function(i){return this.getElMarkers(i).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(i){var r=this.w,d=r.config.markers.hover.size;return void 0===d&&(d=r.globals.markers.size[i]+r.config.markers.hover.sizeOffset),d}},{key:"toggleAllTooltipSeriesGroups",value:function(i){var r=this.w,d=this.ttCtx;0===d.allTooltipSeriesGroups.length&&(d.allTooltipSeriesGroups=r.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var g=d.allTooltipSeriesGroups,x=0;x<g.length;x++)"enable"===i?(g[x].classList.add("apexcharts-active"),g[x].style.display=r.config.tooltip.items.display):(g[x].classList.remove("apexcharts-active"),g[x].style.display="none")}}]),pe}(),ur=function(){function pe(i){Z(this,pe),this.w=i.w,this.ctx=i.ctx,this.ttCtx=i,this.tooltipUtil=new _r(i)}return we(pe,[{key:"drawSeriesTexts",value:function(i){var r=i.shared,d=void 0===r||r,g=i.ttItems,x=i.i,w=void 0===x?0:x,I=i.j,R=void 0===I?null:I,X=i.e,Q=this.w;void 0!==Q.config.tooltip.custom?this.handleCustomTooltip({i:w,j:R,y1:i.y1,y2:i.y2,w:Q}):this.toggleActiveInactiveSeries(d);var ce=this.getValuesToPrint({i:w,j:R});this.printLabels({i:w,j:R,values:ce,ttItems:g,shared:d,e:X});var me=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=me.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=me.getBoundingClientRect().height}},{key:"printLabels",value:function(i){var r,d=this,g=i.i,x=i.j,w=i.values,I=i.ttItems,R=i.shared,Y=i.e,W=this.w,X=[],Q=function(te){return W.globals.seriesGoals[te]&&W.globals.seriesGoals[te][x]&&Array.isArray(W.globals.seriesGoals[te][x])},ce=w.xVal,me=w.zVal,Ee=w.xAxisTTVal,De="",Ce=W.globals.colors[g];null!==x&&W.config.plotOptions.bar.distributed&&(Ce=W.globals.colors[x]);for(var Re=function(te,oe){var ye=d.getFormatters(g);De=d.getSeriesName({fn:ye.yLbTitleFormatter,index:g,seriesIndex:g,j:x}),"treemap"===W.config.chart.type&&(De=ye.yLbTitleFormatter(String(W.config.series[g].data[x].x),{series:W.globals.series,seriesIndex:g,dataPointIndex:x,w:W}));var Fe=W.config.tooltip.inverseOrder?oe:te;if(W.globals.axisCharts){var ht=function(hi){var xi,Pi,nn,Tn;return W.globals.isRangeData?ye.yLbFormatter(null===(xi=W.globals.seriesRangeStart)||void 0===xi||null===(Pi=xi[hi])||void 0===Pi?void 0:Pi[x],{series:W.globals.seriesRangeStart,seriesIndex:hi,dataPointIndex:x,w:W})+" - "+ye.yLbFormatter(null===(nn=W.globals.seriesRangeEnd)||void 0===nn||null===(Tn=nn[hi])||void 0===Tn?void 0:Tn[x],{series:W.globals.seriesRangeEnd,seriesIndex:hi,dataPointIndex:x,w:W}):ye.yLbFormatter(W.globals.series[hi][x],{series:W.globals.series,seriesIndex:hi,dataPointIndex:x,w:W})};if(R)ye=d.getFormatters(Fe),De=d.getSeriesName({fn:ye.yLbTitleFormatter,index:Fe,seriesIndex:g,j:x}),Ce=W.globals.colors[Fe],r=ht(Fe),Q(Fe)&&(X=W.globals.seriesGoals[Fe][x].map(function(hi){return{attrs:hi,val:ye.yLbFormatter(hi.value,{seriesIndex:Fe,dataPointIndex:x,w:W})}}));else{var yt,ii=null==Y||null===(yt=Y.target)||void 0===yt?void 0:yt.getAttribute("fill");ii&&(Ce=-1!==ii.indexOf("url")?document.querySelector(ii.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):ii),r=ht(g),Q(g)&&Array.isArray(W.globals.seriesGoals[g][x])&&(X=W.globals.seriesGoals[g][x].map(function(hi){return{attrs:hi,val:ye.yLbFormatter(hi.value,{seriesIndex:g,dataPointIndex:x,w:W})}}))}}null===x&&(r=ye.yLbFormatter(W.globals.series[g],He(He({},W),{},{seriesIndex:g,dataPointIndex:g}))),d.DOMHandling({i:g,t:Fe,j:x,ttItems:I,values:{val:r,goalVals:X,xVal:ce,xAxisTTVal:Ee,zVal:me},seriesName:De,shared:R,pColor:Ce})},G=0,re=W.globals.series.length-1;G<W.globals.series.length;G++,re--)Re(G,re)}},{key:"getFormatters",value:function(i){var r,d=this.w,g=d.globals.yLabelFormatters[i];return void 0!==d.globals.ttVal?Array.isArray(d.globals.ttVal)?(g=d.globals.ttVal[i]&&d.globals.ttVal[i].formatter,r=d.globals.ttVal[i]&&d.globals.ttVal[i].title&&d.globals.ttVal[i].title.formatter):(g=d.globals.ttVal.formatter,"function"==typeof d.globals.ttVal.title.formatter&&(r=d.globals.ttVal.title.formatter)):r=d.config.tooltip.y.title.formatter,"function"!=typeof g&&(g=d.globals.yLabelFormatters[0]?d.globals.yLabelFormatters[0]:function(x){return x}),"function"!=typeof r&&(r=function(x){return x}),{yLbFormatter:g,yLbTitleFormatter:r}}},{key:"getSeriesName",value:function(i){var g=i.seriesIndex,x=i.j,w=this.w;return(0,i.fn)(String(w.globals.seriesNames[i.index]),{series:w.globals.series,seriesIndex:g,dataPointIndex:x,w})}},{key:"DOMHandling",value:function(i){var r=i.t,d=i.j,g=i.ttItems,x=i.values,w=i.seriesName,I=i.shared,R=i.pColor,Y=this.w,W=this.ttCtx,X=x.val,Q=x.goalVals,ce=x.xVal,me=x.xAxisTTVal,Ee=x.zVal,De=null;De=g[r].children,Y.config.tooltip.fillSeriesColor&&(g[r].style.backgroundColor=R,De[0].style.display="none"),W.showTooltipTitle&&(null===W.tooltipTitle&&(W.tooltipTitle=Y.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),W.tooltipTitle.innerHTML=ce),W.isXAxisTooltipEnabled&&(W.xaxisTooltipText.innerHTML=""!==me?me:ce);var Ce=g[r].querySelector(".apexcharts-tooltip-text-y-label");Ce&&(Ce.innerHTML=w||"");var Re=g[r].querySelector(".apexcharts-tooltip-text-y-value");Re&&(Re.innerHTML=void 0!==X?X:""),De[0]&&De[0].classList.contains("apexcharts-tooltip-marker")&&(Y.config.tooltip.marker.fillColors&&Array.isArray(Y.config.tooltip.marker.fillColors)&&(R=Y.config.tooltip.marker.fillColors[r]),De[0].style.backgroundColor=R),Y.config.tooltip.marker.show||(De[0].style.display="none");var G=g[r].querySelector(".apexcharts-tooltip-text-goals-label"),re=g[r].querySelector(".apexcharts-tooltip-text-goals-value");if(Q.length&&Y.globals.seriesGoals[r]){var te=function(){var Fe="<div >",ht="<div>";Q.forEach(function(yt,ii){Fe+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(yt.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(yt.attrs.name,"</div>"),ht+="<div>".concat(yt.val,"</div>")}),G.innerHTML=Fe+"</div>",re.innerHTML=ht+"</div>"};I?Y.globals.seriesGoals[r][d]&&Array.isArray(Y.globals.seriesGoals[r][d])?te():(G.innerHTML="",re.innerHTML=""):te()}else G.innerHTML="",re.innerHTML="";if(null!==Ee&&(g[r].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=Y.config.tooltip.z.title,g[r].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==Ee?Ee:""),I&&De[0]){if(Y.config.tooltip.hideEmptySeries){var oe=g[r].querySelector(".apexcharts-tooltip-marker"),ye=g[r].querySelector(".apexcharts-tooltip-text");0==parseFloat(X)?(oe.style.display="none",ye.style.display="none"):(oe.style.display="block",ye.style.display="block")}De[0].parentNode.style.display=null==X||Y.globals.ancillaryCollapsedSeriesIndices.indexOf(r)>-1||Y.globals.collapsedSeriesIndices.indexOf(r)>-1?"none":Y.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(i){var r=this.w;if(i)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var d=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");d&&(d.classList.add("apexcharts-active"),d.style.display=r.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(i){var r=i.i,d=i.j,g=this.w,x=this.ctx.series.filteredSeriesX(),w="",I="",R=null,Y=null,W={series:g.globals.series,seriesIndex:r,dataPointIndex:d,w:g},X=g.globals.ttZFormatter;null===d?Y=g.globals.series[r]:g.globals.isXNumeric&&"treemap"!==g.config.chart.type?(w=x[r][d],0===x[r].length&&(w=x[this.tooltipUtil.getFirstActiveXArray(x)][d])):w=void 0!==g.globals.labels[d]?g.globals.labels[d]:"";var Q=w;return w=g.globals.isXNumeric&&"datetime"===g.config.xaxis.type?new ki(this.ctx).xLabelFormat(g.globals.ttKeyFormatter,Q,Q,{i:void 0,dateFormatter:new Ii(this.ctx).formatDate,w:this.w}):g.globals.isBarHorizontal?g.globals.yLabelFormatters[0](Q,W):g.globals.xLabelFormatter(Q,W),void 0!==g.config.tooltip.x.formatter&&(w=g.globals.ttKeyFormatter(Q,W)),g.globals.seriesZ.length>0&&g.globals.seriesZ[r].length>0&&(R=X(g.globals.seriesZ[r][d],g)),I="function"==typeof g.config.xaxis.tooltip.formatter?g.globals.xaxisTooltipFormatter(Q,W):w,{val:Array.isArray(Y)?Y.join(" "):Y,xVal:Array.isArray(w)?w.join(" "):w,xAxisTTVal:Array.isArray(I)?I.join(" "):I,zVal:R}}},{key:"handleCustomTooltip",value:function(i){var r=i.i,d=i.j,g=i.y1,x=i.y2,w=i.w,I=this.ttCtx.getElTooltip(),R=w.config.tooltip.custom;Array.isArray(R)&&R[r]&&(R=R[r]),I.innerHTML=R({ctx:this.ctx,series:w.globals.series,seriesIndex:r,dataPointIndex:d,y1:g,y2:x,w})}}]),pe}(),mr=function(){function pe(i){Z(this,pe),this.ttCtx=i,this.ctx=i.ctx,this.w=i.w}return we(pe,[{key:"moveXCrosshairs",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=this.ttCtx,g=this.w,x=d.getElXCrosshairs(),w=i-d.xcrosshairsWidth/2,I=g.globals.labels.slice().length;if(null!==r&&(w=g.globals.gridWidth/I*r),null===x||g.globals.isBarHorizontal||(x.setAttribute("x",w),x.setAttribute("x1",w),x.setAttribute("x2",w),x.setAttribute("y2",g.globals.gridHeight),x.classList.add("apexcharts-active")),w<0&&(w=0),w>g.globals.gridWidth&&(w=g.globals.gridWidth),d.isXAxisTooltipEnabled){var R=w;"tickWidth"!==g.config.xaxis.crosshairs.width&&"barWidth"!==g.config.xaxis.crosshairs.width||(R=w+d.xcrosshairsWidth/2),this.moveXAxisTooltip(R)}}},{key:"moveYCrosshairs",value:function(i){var r=this.ttCtx;null!==r.ycrosshairs&&rt.setAttrs(r.ycrosshairs,{y1:i,y2:i}),null!==r.ycrosshairsHidden&&rt.setAttrs(r.ycrosshairsHidden,{y1:i,y2:i})}},{key:"moveXAxisTooltip",value:function(i){var r=this.w,d=this.ttCtx;if(null!==d.xaxisTooltip&&0!==d.xcrosshairsWidth){d.xaxisTooltip.classList.add("apexcharts-active");var x,g=d.xaxisOffY+r.config.xaxis.tooltip.offsetY+r.globals.translateY+1+r.config.xaxis.offsetY;i-=d.xaxisTooltip.getBoundingClientRect().width/2,isNaN(i)||(i+=r.globals.translateX,x=new rt(this.ctx).getTextRects(d.xaxisTooltipText.innerHTML),d.xaxisTooltipText.style.minWidth=x.width+"px",d.xaxisTooltip.style.left=i+"px",d.xaxisTooltip.style.top=g+"px")}}},{key:"moveYAxisTooltip",value:function(i){var r=this.w,d=this.ttCtx;null===d.yaxisTTEls&&(d.yaxisTTEls=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var g=parseInt(d.ycrosshairsHidden.getAttribute("y1"),10),x=r.globals.translateY+g,w=d.yaxisTTEls[i].getBoundingClientRect().height,I=r.globals.translateYAxisX[i]-2;r.config.yaxis[i].opposite&&(I-=26),x-=w/2,-1===r.globals.ignoreYAxisIndexes.indexOf(i)?(d.yaxisTTEls[i].classList.add("apexcharts-active"),d.yaxisTTEls[i].style.top=x+"px",d.yaxisTTEls[i].style.left=I+r.config.yaxis[i].tooltip.offsetX+"px"):d.yaxisTTEls[i].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=this.w,x=this.ttCtx,w=x.getElTooltip(),I=x.tooltipRect,R=null!==d?parseFloat(d):1,Y=parseFloat(i)+R+5,W=parseFloat(r)+R/2;if(Y>g.globals.gridWidth/2&&(Y=Y-I.ttWidth-R-10),Y>g.globals.gridWidth-I.ttWidth-10&&(Y=g.globals.gridWidth-I.ttWidth),Y<-20&&(Y=-20),g.config.tooltip.followCursor){var X=x.getElGrid().getBoundingClientRect();(Y=x.e.clientX-X.left)>g.globals.gridWidth/2&&(Y-=x.tooltipRect.ttWidth),(W=x.e.clientY+g.globals.translateY-X.top)>g.globals.gridHeight/2&&(W-=x.tooltipRect.ttHeight)}else g.globals.isBarHorizontal||I.ttHeight/2+W>g.globals.gridHeight&&(W=g.globals.gridHeight-I.ttHeight+g.globals.translateY);isNaN(Y)||(w.style.left=(Y+=g.globals.translateX)+"px",w.style.top=W+"px")}},{key:"moveMarkers",value:function(i,r){var d=this.w,g=this.ttCtx;if(d.globals.markers.size[i]>0)for(var x=d.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(i,"'] .apexcharts-marker")),w=0;w<x.length;w++)parseInt(x[w].getAttribute("rel"),10)===r&&(g.marker.resetPointsSize(),g.marker.enlargeCurrentPoint(r,x[w]));else g.marker.resetPointsSize(),this.moveDynamicPointOnHover(r,i)}},{key:"moveDynamicPointOnHover",value:function(i,r){var d,g,x=this.w,w=this.ttCtx,I=x.globals.pointsArray,R=w.tooltipUtil.getHoverMarkerSize(r),Y=x.config.series[r].type;if(!Y||"column"!==Y&&"candlestick"!==Y&&"boxPlot"!==Y){d=I[r][i][0],g=I[r][i][1]?I[r][i][1]:0;var W=x.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-series-markers circle"));W&&g<x.globals.gridHeight&&g>0&&(W.setAttribute("r",R),W.setAttribute("cx",d),W.setAttribute("cy",g)),this.moveXCrosshairs(d),w.fixedTooltip||this.moveTooltip(d,g,R)}}},{key:"moveDynamicPointsOnHover",value:function(i){var r,d=this.ttCtx,g=d.w,x=0,w=0,I=g.globals.pointsArray;r=new Yn(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var R=d.tooltipUtil.getHoverMarkerSize(r);I[r]&&(x=I[r][i][0],w=I[r][i][1]);var Y=d.tooltipUtil.getAllMarkers();if(null!==Y)for(var W=0;W<g.globals.series.length;W++){var X=I[W];if(g.globals.comboCharts&&void 0===X&&Y.splice(W,0,null),X&&X.length){var Q=I[W][i][1];Y[W].setAttribute("cx",x),"rangeArea"!==g.config.chart.type||g.globals.comboCharts||(Q-=Math.abs(Q-I[W][i+g.globals.series[W].length][1])/2),null!==Q&&!isNaN(Q)&&Q<g.globals.gridHeight+R&&Q+R>0?(Y[W]&&Y[W].setAttribute("r",R),Y[W]&&Y[W].setAttribute("cy",Q)):Y[W]&&Y[W].setAttribute("r",0)}}this.moveXCrosshairs(x),d.fixedTooltip||this.moveTooltip(x,w||g.globals.gridHeight,R)}},{key:"moveStickyTooltipOverBars",value:function(i,r){var d=this.w,g=this.ttCtx,x=d.globals.columnSeries?d.globals.columnSeries.length:d.globals.series.length,w=x>=2&&x%2==0?Math.floor(x/2):Math.floor(x/2)+1;d.globals.isBarHorizontal&&(w=new Yn(this.ctx).getActiveConfigSeriesIndex("desc")+1);var I=d.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(w,"'] path[j='").concat(i,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(w,"'] path[j='").concat(i,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(w,"'] path[j='").concat(i,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(w,"'] path[j='").concat(i,"']"));I||"number"!=typeof r||(I=d.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(r,"'] path[j='").concat(i,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(r,"'] path[j='").concat(i,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(r,"'] path[j='").concat(i,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(r,"'] path[j='").concat(i,"']")));var R=I?parseFloat(I.getAttribute("cx")):0,Y=I?parseFloat(I.getAttribute("cy")):0,W=I?parseFloat(I.getAttribute("barWidth")):0,X=g.getElGrid().getBoundingClientRect(),Q=I&&(I.classList.contains("apexcharts-candlestick-area")||I.classList.contains("apexcharts-boxPlot-area"));d.globals.isXNumeric?(I&&!Q&&(R-=x%2!=0?W/2:0),I&&Q&&d.globals.comboCharts&&(R-=W/2)):d.globals.isBarHorizontal||(R=g.xAxisTicksPositions[i-1]+g.dataPointsDividedWidth/2,isNaN(R)&&(R=g.xAxisTicksPositions[i]-g.dataPointsDividedWidth/2)),d.globals.isBarHorizontal?Y-=g.tooltipRect.ttHeight:d.config.tooltip.followCursor?Y=g.e.clientY-X.top-g.tooltipRect.ttHeight/2:Y+g.tooltipRect.ttHeight+15>d.globals.gridHeight&&(Y=d.globals.gridHeight),d.globals.isBarHorizontal||this.moveXCrosshairs(R),g.fixedTooltip||this.moveTooltip(R,Y||d.globals.gridHeight)}}]),pe}(),kr=function(){function pe(i){Z(this,pe),this.w=i.w,this.ttCtx=i,this.ctx=i.ctx,this.tooltipPosition=new mr(i)}return we(pe,[{key:"drawDynamicPoints",value:function(){var i=this.w,r=new rt(this.ctx),d=new _n(this.ctx),g=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series");g=tt(g),i.config.chart.stacked&&g.sort(function(X,Q){return parseFloat(X.getAttribute("data:realIndex"))-parseFloat(Q.getAttribute("data:realIndex"))});for(var x=0;x<g.length;x++){var w=g[x].querySelector(".apexcharts-series-markers-wrap");if(null!==w){var I=void 0,R="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==i.config.chart.type&&"area"!==i.config.chart.type||i.globals.comboCharts||i.config.tooltip.intersect||(R+=" no-pointer-events");var Y=d.getMarkerConfig({cssClass:R,seriesIndex:Number(w.getAttribute("data:realIndex"))});(I=r.drawMarker(0,0,Y)).node.setAttribute("default-marker-size",0);var W=document.createElementNS(i.globals.SVGNS,"g");W.classList.add("apexcharts-series-markers"),W.appendChild(I.node),w.appendChild(W)}}}},{key:"enlargeCurrentPoint",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,x=this.w;"bubble"!==x.config.chart.type&&this.newPointSize(i,r);var w=r.getAttribute("cx"),I=r.getAttribute("cy");if(null!==d&&null!==g&&(w=d,I=g),this.tooltipPosition.moveXCrosshairs(w),!this.fixedTooltip){if("radar"===x.config.chart.type){var R=this.ttCtx.getElGrid().getBoundingClientRect();w=this.ttCtx.e.clientX-R.left}this.tooltipPosition.moveTooltip(w,I,x.config.markers.hover.size)}}},{key:"enlargePoints",value:function(i){for(var r=this.w,d=this,g=this.ttCtx,x=i,w=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),I=r.config.markers.hover.size,R=0;R<w.length;R++){var Y=w[R].getAttribute("rel"),W=w[R].getAttribute("index");if(void 0===I&&(I=r.globals.markers.size[W]+r.config.markers.hover.sizeOffset),x===parseInt(Y,10)){d.newPointSize(x,w[R]);var X=w[R].getAttribute("cx"),Q=w[R].getAttribute("cy");d.tooltipPosition.moveXCrosshairs(X),g.fixedTooltip||d.tooltipPosition.moveTooltip(X,Q,I)}else d.oldPointSize(w[R])}}},{key:"newPointSize",value:function(i,r){var d=this.w,g=d.config.markers.hover.size,x=0===i?r.parentNode.firstChild:r.parentNode.lastChild;if("0"!==x.getAttribute("default-marker-size")){var w=parseInt(x.getAttribute("index"),10);void 0===g&&(g=d.globals.markers.size[w]+d.config.markers.hover.sizeOffset),g<0&&(g=0),x.setAttribute("r",g)}}},{key:"oldPointSize",value:function(i){var r=parseFloat(i.getAttribute("default-marker-size"));i.setAttribute("r",r)}},{key:"resetPointsSize",value:function(){for(var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=0;r<i.length;r++){var d=parseFloat(i[r].getAttribute("default-marker-size"));Je.isNumber(d)&&d>=0?i[r].setAttribute("r",d):i[r].setAttribute("r",0)}}}]),pe}(),Ft=function(){function pe(i){Z(this,pe),this.w=i.w;var r=this.w;this.ttCtx=i,this.isVerticalGroupedRangeBar=!r.globals.isBarHorizontal&&"rangeBar"===r.config.chart.type&&r.config.plotOptions.bar.rangeBarGroupRows}return we(pe,[{key:"getAttr",value:function(i,r){return parseFloat(i.target.getAttribute(r))}},{key:"handleHeatTreeTooltip",value:function(i){var r=i.e,d=i.opt,g=i.x,x=i.y,I=this.ttCtx,R=this.w;if(r.target.classList.contains("apexcharts-".concat(i.type,"-rect"))){var Y=this.getAttr(r,"i"),W=this.getAttr(r,"j"),X=this.getAttr(r,"cx"),Q=this.getAttr(r,"cy"),ce=this.getAttr(r,"width"),me=this.getAttr(r,"height");if(I.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:Y,j:W,shared:!1,e:r}),R.globals.capturedSeriesIndex=Y,R.globals.capturedDataPointIndex=W,g=X+I.tooltipRect.ttWidth/2+ce,x=Q+I.tooltipRect.ttHeight/2-me/2,I.tooltipPosition.moveXCrosshairs(X+ce/2),g>R.globals.gridWidth/2&&(g=X-I.tooltipRect.ttWidth/2+ce),I.w.config.tooltip.followCursor){var Ee=R.globals.dom.elWrap.getBoundingClientRect();g=R.globals.clientX-Ee.left-(g>R.globals.gridWidth/2?I.tooltipRect.ttWidth:0),x=R.globals.clientY-Ee.top-(x>R.globals.gridHeight/2?I.tooltipRect.ttHeight:0)}}return{x:g,y:x}}},{key:"handleMarkerTooltip",value:function(i){var r,d,g=i.e,x=i.opt,w=i.x,I=i.y,R=this.w,Y=this.ttCtx;if(g.target.classList.contains("apexcharts-marker")){var W=parseInt(x.paths.getAttribute("cx"),10),X=parseInt(x.paths.getAttribute("cy"),10),Q=parseFloat(x.paths.getAttribute("val"));if(d=parseInt(x.paths.getAttribute("rel"),10),r=parseInt(x.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,Y.intersect){var ce=Je.findAncestor(x.paths,"apexcharts-series");ce&&(r=parseInt(ce.getAttribute("data:realIndex"),10))}if(Y.tooltipLabels.drawSeriesTexts({ttItems:x.ttItems,i:r,j:d,shared:!Y.showOnIntersect&&R.config.tooltip.shared,e:g}),"mouseup"===g.type&&Y.markerClick(g,r,d),R.globals.capturedSeriesIndex=r,R.globals.capturedDataPointIndex=d,w=W,I=X+R.globals.translateY-1.4*Y.tooltipRect.ttHeight,Y.w.config.tooltip.followCursor){var me=Y.getElGrid().getBoundingClientRect();I=Y.e.clientY+R.globals.translateY-me.top}Q<0&&(I=X),Y.marker.enlargeCurrentPoint(d,x.paths,w,I)}return{x:w,y:I}}},{key:"handleBarTooltip",value:function(i){var r,d,g=i.e,x=i.opt,w=this.w,I=this.ttCtx,R=I.getElTooltip(),Y=0,W=0,X=0,Q=this.getBarTooltipXY({e:g,opt:x}),ce=Q.barHeight,me=Q.j;w.globals.capturedSeriesIndex=r=Q.i,w.globals.capturedDataPointIndex=me,w.globals.isBarHorizontal&&I.tooltipUtil.hasBars()||!w.config.tooltip.shared?(W=Q.x,X=Q.y,d=Array.isArray(w.config.stroke.width)?w.config.stroke.width[r]:w.config.stroke.width,Y=W):w.globals.comboCharts||w.config.tooltip.shared||(Y/=2),isNaN(X)&&(X=w.globals.svgHeight-I.tooltipRect.ttHeight);var Ee=parseInt(x.paths.parentNode.getAttribute("data:realIndex"),10),De=w.globals.isMultipleYAxis?w.config.yaxis[Ee]&&w.config.yaxis[Ee].reversed:w.config.yaxis[0].reversed;if(W+I.tooltipRect.ttWidth>w.globals.gridWidth&&!De?W-=I.tooltipRect.ttWidth:W<0&&(W=0),I.w.config.tooltip.followCursor){var Ce=I.getElGrid().getBoundingClientRect();X=I.e.clientY-Ce.top}null===I.tooltip&&(I.tooltip=w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),w.config.tooltip.shared||I.tooltipPosition.moveXCrosshairs(w.globals.comboBarCount>0?Y+d/2:Y),!I.fixedTooltip&&(!w.config.tooltip.shared||w.globals.isBarHorizontal&&I.tooltipUtil.hasBars())&&(De&&(W-=I.tooltipRect.ttWidth)<0&&(W=0),!De||w.globals.isBarHorizontal&&I.tooltipUtil.hasBars()||(X=X+ce-2*(w.globals.series[r][me]<0?ce:0)),X=X+w.globals.translateY-I.tooltipRect.ttHeight/2,R.style.left=W+w.globals.translateX+"px",R.style.top=X+"px")}},{key:"getBarTooltipXY",value:function(i){var r=this,d=i.e,g=i.opt,x=this.w,w=null,I=this.ttCtx,R=0,Y=0,W=0,X=0,Q=0,ce=d.target.classList;if(ce.contains("apexcharts-bar-area")||ce.contains("apexcharts-candlestick-area")||ce.contains("apexcharts-boxPlot-area")||ce.contains("apexcharts-rangebar-area")){var me=d.target,Ee=me.getBoundingClientRect(),De=g.elGrid.getBoundingClientRect(),Ce=Ee.height;Q=Ee.height;var Re=Ee.width,G=parseInt(me.getAttribute("cx"),10),re=parseInt(me.getAttribute("cy"),10);X=parseFloat(me.getAttribute("barWidth"));var te="touchmove"===d.type?d.touches[0].clientX:d.clientX;w=parseInt(me.getAttribute("j"),10),R=parseInt(me.parentNode.getAttribute("rel"),10)-1;var oe=me.getAttribute("data-range-y1"),ye=me.getAttribute("data-range-y2");x.globals.comboCharts&&(R=parseInt(me.parentNode.getAttribute("data:realIndex"),10));var Fe=function(yt){return x.globals.isXNumeric?G-Re/2:r.isVerticalGroupedRangeBar?G+Re/2:G-I.dataPointsDividedWidth+Re/2},ht=function(){return re-I.dataPointsDividedHeight+Ce/2-I.tooltipRect.ttHeight/2};I.tooltipLabels.drawSeriesTexts({ttItems:g.ttItems,i:R,j:w,y1:oe?parseInt(oe,10):null,y2:ye?parseInt(ye,10):null,shared:!I.showOnIntersect&&x.config.tooltip.shared,e:d}),x.config.tooltip.followCursor?x.globals.isBarHorizontal?(Y=te-De.left+15,W=ht()):(Y=Fe(),W=d.clientY-De.top-I.tooltipRect.ttHeight/2-15):x.globals.isBarHorizontal?((Y=G)<I.xyRatios.baseLineInvertedY&&(Y=G-I.tooltipRect.ttWidth),W=ht()):(Y=Fe(),W=re)}return{x:Y,y:W,barHeight:Q,barWidth:X,i:R,j:w}}}]),pe}(),Ze=function(){function pe(i){Z(this,pe),this.w=i.w,this.ttCtx=i}return we(pe,[{key:"drawXaxisTooltip",value:function(){var i=this.w,r=this.ttCtx,d="bottom"===i.config.xaxis.position;r.xaxisOffY=d?i.globals.gridHeight+1:-i.globals.xAxisHeight-i.config.xaxis.axisTicks.height+3;var g=d?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",x=i.globals.dom.elWrap;r.isXAxisTooltipEnabled&&null===i.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(r.xaxisTooltip=document.createElement("div"),r.xaxisTooltip.setAttribute("class",g+" apexcharts-theme-"+i.config.tooltip.theme),x.appendChild(r.xaxisTooltip),r.xaxisTooltipText=document.createElement("div"),r.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),r.xaxisTooltipText.style.fontFamily=i.config.xaxis.tooltip.style.fontFamily||i.config.chart.fontFamily,r.xaxisTooltipText.style.fontSize=i.config.xaxis.tooltip.style.fontSize,r.xaxisTooltip.appendChild(r.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var i=this.w,r=this.ttCtx,d=0;d<i.config.yaxis.length;d++){var g=i.config.yaxis[d].opposite||i.config.yaxis[d].crosshairs.opposite;r.yaxisOffX=g?i.globals.gridWidth+1:1;var x="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(d,g?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),w=i.globals.dom.elWrap;null===i.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(d))&&(r.yaxisTooltip=document.createElement("div"),r.yaxisTooltip.setAttribute("class",x+" apexcharts-theme-"+i.config.tooltip.theme),w.appendChild(r.yaxisTooltip),0===d&&(r.yaxisTooltipText=[]),r.yaxisTooltipText[d]=document.createElement("div"),r.yaxisTooltipText[d].classList.add("apexcharts-yaxistooltip-text"),r.yaxisTooltip.appendChild(r.yaxisTooltipText[d]))}}},{key:"setXCrosshairWidth",value:function(){var i=this.w,r=this.ttCtx,d=r.getElXCrosshairs();if(r.xcrosshairsWidth=parseInt(i.config.xaxis.crosshairs.width,10),i.globals.comboCharts){var g=i.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==g&&"barWidth"===i.config.xaxis.crosshairs.width){var x=parseFloat(g.getAttribute("barWidth"));r.xcrosshairsWidth=x}else"tickWidth"===i.config.xaxis.crosshairs.width&&(r.xcrosshairsWidth=i.globals.gridWidth/i.globals.labels.length)}else if("tickWidth"===i.config.xaxis.crosshairs.width)r.xcrosshairsWidth=i.globals.gridWidth/i.globals.labels.length;else if("barWidth"===i.config.xaxis.crosshairs.width){var R=i.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==R){var Y=parseFloat(R.getAttribute("barWidth"));r.xcrosshairsWidth=Y}else r.xcrosshairsWidth=1}i.globals.isBarHorizontal&&(r.xcrosshairsWidth=0),null!==d&&r.xcrosshairsWidth>0&&d.setAttribute("width",r.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var i=this.w,r=this.ttCtx;r.ycrosshairs=i.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),r.ycrosshairsHidden=i.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(i,r,d){var g=this.ttCtx,x=this.w,w=x.globals.yLabelFormatters[i];if(g.yaxisTooltips[i]){var I=g.getElGrid().getBoundingClientRect(),W=x.globals.minYArr[i]+(x.globals.maxYArr[i]-x.globals.minYArr[i]-(r-I.top)*d.yRatio[i]);g.tooltipPosition.moveYCrosshairs(r-I.top),g.yaxisTooltipText[i].innerHTML=w(W),g.tooltipPosition.moveYAxisTooltip(i)}}}]),pe}(),Qe=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w;var r=this.w;this.tConfig=r.config.tooltip,this.tooltipUtil=new _r(this),this.tooltipLabels=new ur(this),this.tooltipPosition=new mr(this),this.marker=new kr(this),this.intersect=new Ft(this),this.axesTooltip=new Ze(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!r.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return we(pe,[{key:"getElTooltip",value:function(i){return i||(i=this),i.w.globals.dom.baseEl?i.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(i){var r=this.w;this.xyRatios=i,this.isXAxisTooltipEnabled=r.config.xaxis.tooltip.enabled&&r.globals.axisCharts,this.yaxisTooltips=r.config.yaxis.map(function(w,I){return!!(w.show&&w.tooltip.enabled&&r.globals.axisCharts)}),this.allTooltipSeriesGroups=[],r.globals.axisCharts||(this.showTooltipTitle=!1);var d=document.createElement("div");if(d.classList.add("apexcharts-tooltip"),r.config.tooltip.cssClass&&d.classList.add(r.config.tooltip.cssClass),d.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),r.globals.dom.elWrap.appendChild(d),r.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var g=new V(this.ctx);this.xAxisTicksPositions=g.getXAxisTicksPositions()}if(!r.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==r.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==r.config.markers.size&&0!==r.globals.markers.largestSize||this.marker.drawDynamicPoints(this),r.globals.collapsedSeries.length!==r.globals.series.length){this.dataPointsDividedHeight=r.globals.gridHeight/r.globals.dataPoints,this.dataPointsDividedWidth=r.globals.gridWidth/r.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||r.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,d.appendChild(this.tooltipTitle));var x=r.globals.series.length;(r.globals.xyCharts||r.globals.comboCharts)&&this.tConfig.shared&&(x=this.showOnIntersect?1:r.globals.series.length),this.legendLabels=r.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(x),this.addSVGEvents()}}},{key:"createTTElements",value:function(i){for(var r=this,d=this.w,g=[],x=this.getElTooltip(),w=function(R){var Y=document.createElement("div");Y.classList.add("apexcharts-tooltip-series-group"),Y.style.order=d.config.tooltip.inverseOrder?i-R:R+1,r.tConfig.shared&&r.tConfig.enabledOnSeries&&Array.isArray(r.tConfig.enabledOnSeries)&&r.tConfig.enabledOnSeries.indexOf(R)<0&&Y.classList.add("apexcharts-tooltip-series-group-hidden");var W=document.createElement("span");W.classList.add("apexcharts-tooltip-marker"),W.style.backgroundColor=d.globals.colors[R],Y.appendChild(W);var X=document.createElement("div");X.classList.add("apexcharts-tooltip-text"),X.style.fontFamily=r.tConfig.style.fontFamily||d.config.chart.fontFamily,X.style.fontSize=r.tConfig.style.fontSize,["y","goals","z"].forEach(function(Q){var ce=document.createElement("div");ce.classList.add("apexcharts-tooltip-".concat(Q,"-group"));var me=document.createElement("span");me.classList.add("apexcharts-tooltip-text-".concat(Q,"-label")),ce.appendChild(me);var Ee=document.createElement("span");Ee.classList.add("apexcharts-tooltip-text-".concat(Q,"-value")),ce.appendChild(Ee),X.appendChild(ce)}),Y.appendChild(X),x.appendChild(Y),g.push(Y)},I=0;I<i;I++)w(I);return g}},{key:"addSVGEvents",value:function(){var i=this.w,r=i.config.chart.type,d=this.getElTooltip(),g=!("bar"!==r&&"candlestick"!==r&&"boxPlot"!==r&&"rangeBar"!==r),x="area"===r||"line"===r||"scatter"===r||"bubble"===r||"radar"===r,w=i.globals.dom.Paper.node,I=this.getElGrid();I&&(this.seriesBound=I.getBoundingClientRect());var R,Y=[],W=[],X={hoverArea:w,elGrid:I,tooltipEl:d,tooltipY:Y,tooltipX:W,ttItems:this.ttItems};if(i.globals.axisCharts&&(x?R=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):g?R=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==r&&"treemap"!==r||(R=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),R&&R.length))for(var Q=0;Q<R.length;Q++)Y.push(R[Q].getAttribute("cy")),W.push(R[Q].getAttribute("cx"));if(i.globals.xyCharts&&!this.showOnIntersect||i.globals.comboCharts&&!this.showOnIntersect||g&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([w],X);else if(g&&!i.globals.comboCharts||x&&this.showOnIntersect)this.addDatapointEventsListeners(X);else if(!i.globals.axisCharts||"heatmap"===r||"treemap"===r){var ce=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ce,X)}if(this.showOnIntersect){var me=i.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");me.length>0&&this.addPathsEventListeners(me,X),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(X)}}},{key:"drawFixedTooltipRect",value:function(){var i=this.w,r=this.getElTooltip(),d=r.getBoundingClientRect(),g=d.width+10,x=d.height+10,w=this.tConfig.fixed.offsetX,I=this.tConfig.fixed.offsetY,R=this.tConfig.fixed.position.toLowerCase();return R.indexOf("right")>-1&&(w=w+i.globals.svgWidth-g+10),R.indexOf("bottom")>-1&&(I=I+i.globals.svgHeight-x-10),r.style.left=w+"px",r.style.top=I+"px",{x:w,y:I,ttWidth:g,ttHeight:x}}},{key:"addDatapointEventsListeners",value:function(i){var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(r,i)}},{key:"addPathsEventListeners",value:function(i,r){for(var d=this,g=function(w){var I={paths:i[w],tooltipEl:r.tooltipEl,tooltipY:r.tooltipY,tooltipX:r.tooltipX,elGrid:r.elGrid,hoverArea:r.hoverArea,ttItems:r.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(R){return i[w].addEventListener(R,d.onSeriesHover.bind(d,I),{capture:!1,passive:!0})})},x=0;x<i.length;x++)g(x)}},{key:"onSeriesHover",value:function(i,r){var d=this,g=Date.now()-this.lastHoverTime;g>=100?this.seriesHover(i,r):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){d.seriesHover(i,r)},100-g))}},{key:"seriesHover",value:function(i,r){var d=this;this.lastHoverTime=Date.now();var g=[],x=this.w;x.config.chart.group&&(g=this.ctx.getGroupedCharts()),x.globals.axisCharts&&(x.globals.minX===-1/0&&x.globals.maxX===1/0||0===x.globals.dataPoints)||(g.length?g.forEach(function(w){var I=d.getElTooltip(w);w.w.globals.minX===d.w.globals.minX&&w.w.globals.maxX===d.w.globals.maxX&&w.w.globals.tooltip.seriesHoverByContext({chartCtx:w,ttCtx:w.w.globals.tooltip,opt:{paths:i.paths,tooltipEl:I,tooltipY:i.tooltipY,tooltipX:i.tooltipX,elGrid:i.elGrid,hoverArea:i.hoverArea,ttItems:w.w.globals.tooltip.ttItems},e:r})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:i,e:r}))}},{key:"seriesHoverByContext",value:function(i){var r=i.chartCtx,d=i.ttCtx,g=i.opt,x=i.e,w=r.w,I=this.getElTooltip();I&&(d.tooltipRect={x:0,y:0,ttWidth:I.getBoundingClientRect().width,ttHeight:I.getBoundingClientRect().height},d.e=x,d.tooltipUtil.hasBars()&&!w.globals.comboCharts&&!d.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Yn(r).toggleSeriesOnHover(x,x.target.parentNode),d.fixedTooltip&&d.drawFixedTooltipRect(),w.globals.axisCharts?d.axisChartsTooltips({e:x,opt:g,tooltipRect:d.tooltipRect}):d.nonAxisChartsTooltips({e:x,opt:g,tooltipRect:d.tooltipRect}))}},{key:"axisChartsTooltips",value:function(i){var r,d,g=i.e,x=i.opt,w=this.w,I=x.elGrid.getBoundingClientRect(),R="touchmove"===g.type?g.touches[0].clientX:g.clientX,Y="touchmove"===g.type?g.touches[0].clientY:g.clientY;if(this.clientY=Y,this.clientX=R,w.globals.capturedSeriesIndex=-1,w.globals.capturedDataPointIndex=-1,Y<I.top||Y>I.top+I.height)this.handleMouseOut(x);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!w.config.tooltip.shared){var W=parseInt(x.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(W)<0)return void this.handleMouseOut(x)}var X=this.getElTooltip(),Q=this.getElXCrosshairs(),ce=w.globals.xyCharts||"bar"===w.config.chart.type&&!w.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||w.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===g.type||"touchmove"===g.type||"mouseup"===g.type){if(w.globals.collapsedSeries.length+w.globals.ancillaryCollapsedSeries.length===w.globals.series.length)return;null!==Q&&Q.classList.add("apexcharts-active");var me=this.yaxisTooltips.filter(function(Ce){return!0===Ce});if(null!==this.ycrosshairs&&me.length&&this.ycrosshairs.classList.add("apexcharts-active"),ce&&!this.showOnIntersect)this.handleStickyTooltip(g,R,Y,x);else if("heatmap"===w.config.chart.type||"treemap"===w.config.chart.type){var Ee=this.intersect.handleHeatTreeTooltip({e:g,opt:x,x:r,y:d,type:w.config.chart.type});d=Ee.y,X.style.left=(r=Ee.x)+"px",X.style.top=d+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:g,opt:x}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:g,opt:x,x:r,y:d});if(this.yaxisTooltips.length)for(var De=0;De<w.config.yaxis.length;De++)this.axesTooltip.drawYaxisTooltipText(De,Y,this.xyRatios);x.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==g.type&&"touchend"!==g.type||this.handleMouseOut(x)}}},{key:"nonAxisChartsTooltips",value:function(i){var r=i.e,d=i.opt,g=i.tooltipRect,x=this.w,w=d.paths.getAttribute("rel"),I=this.getElTooltip(),R=x.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===r.type||"touchmove"===r.type){I.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:parseInt(w,10)-1,shared:!1});var W=x.globals.clientY-R.top-g.ttHeight-10;if(I.style.left=x.globals.clientX-R.left-g.ttWidth/2+"px",I.style.top=W+"px",x.config.legend.tooltipHoverFormatter){var X=w-1,Q=(0,x.config.legend.tooltipHoverFormatter)(this.legendLabels[X].getAttribute("data:default-text"),{seriesIndex:X,dataPointIndex:X,w:x});this.legendLabels[X].innerHTML=Q}}else"mouseout"!==r.type&&"touchend"!==r.type||(I.classList.remove("apexcharts-active"),x.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ce){var me=ce.getAttribute("data:default-text");ce.innerHTML=decodeURIComponent(me)}))}},{key:"handleStickyTooltip",value:function(i,r,d,g){var x=this.w,w=this.tooltipUtil.getNearestValues({context:this,hoverArea:g.hoverArea,elGrid:g.elGrid,clientX:r,clientY:d}),I=w.j,R=w.capturedSeries;x.globals.collapsedSeriesIndices.includes(R)&&(R=null);var Y=g.elGrid.getBoundingClientRect();if(w.hoverX<0||w.hoverX>Y.width)this.handleMouseOut(g);else if(null!==R)this.handleStickyCapturedSeries(i,R,g,I);else if(this.tooltipUtil.isXoverlap(I)||x.globals.isBarHorizontal){var W=x.globals.series.findIndex(function(X,Q){return!x.globals.collapsedSeriesIndices.includes(Q)});this.create(i,this,W,I,g.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(i,r,d,g){var x=this.w;if(this.tConfig.shared||null!==x.globals.series[r][g]){if(void 0!==x.globals.series[r][g])this.tConfig.shared&&this.tooltipUtil.isXoverlap(g)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(i,this,r,g,d.ttItems):this.create(i,this,r,g,d.ttItems,!1);else if(this.tooltipUtil.isXoverlap(g)){var w=x.globals.series.findIndex(function(I,R){return!x.globals.collapsedSeriesIndices.includes(R)});this.create(i,this,w,g,d.ttItems)}}else this.handleMouseOut(d)}},{key:"deactivateHoverFilter",value:function(){for(var i=this.w,r=new rt(this.ctx),d=i.globals.dom.Paper.select(".apexcharts-bar-area"),g=0;g<d.length;g++)r.pathMouseLeave(d[g])}},{key:"handleMouseOut",value:function(i){var r=this.w,d=this.getElXCrosshairs();if(i.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==r.config.chart.type&&this.marker.resetPointsSize(),null!==d&&d.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var g=0;g<this.yaxisTTEls.length;g++)this.yaxisTTEls[g].classList.remove("apexcharts-active")}r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(x){var w=x.getAttribute("data:default-text");x.innerHTML=decodeURIComponent(w)})}},{key:"markerClick",value:function(i,r,d){var g=this.w;"function"==typeof g.config.chart.events.markerClick&&g.config.chart.events.markerClick(i,this.ctx,{seriesIndex:r,dataPointIndex:d,w:g}),this.ctx.events.fireEvent("markerClick",[i,this.ctx,{seriesIndex:r,dataPointIndex:d,w:g}])}},{key:"create",value:function(i,r,d,g,x){var w,I,R,Y,W,X,Q,ce,me,Ee,De,Ce,Re,G,re,te,oe=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,ye=this.w,Fe=r;"mouseup"===i.type&&this.markerClick(i,d,g),null===oe&&(oe=this.tConfig.shared);var ht=this.tooltipUtil.hasMarkers(d),yt=this.tooltipUtil.getElBars();if(ye.config.legend.tooltipHoverFormatter){var ii=ye.config.legend.tooltipHoverFormatter,hi=Array.from(this.legendLabels);hi.forEach(function(Br){var Or=Br.getAttribute("data:default-text");Br.innerHTML=decodeURIComponent(Or)});for(var xi=0;xi<hi.length;xi++){var Pi=hi[xi],nn=parseInt(Pi.getAttribute("i"),10),Tn=decodeURIComponent(Pi.getAttribute("data:default-text")),Xn=ii(Tn,{seriesIndex:oe?nn:d,dataPointIndex:g,w:ye});if(oe)Pi.innerHTML=ye.globals.collapsedSeriesIndices.indexOf(nn)<0?Xn:Tn;else if(Pi.innerHTML=nn===d?Xn:Tn,d===nn)break}}var Qn=He(He({ttItems:x,i:d,j:g},void 0!==(null===(w=ye.globals.seriesRange)||void 0===w||null===(I=w[d])||void 0===I||null===(R=I[g])||void 0===R||null===(Y=R.y[0])||void 0===Y?void 0:Y.y1)&&{y1:null===(W=ye.globals.seriesRange)||void 0===W||null===(X=W[d])||void 0===X||null===(Q=X[g])||void 0===Q||null===(ce=Q.y[0])||void 0===ce?void 0:ce.y1}),void 0!==(null===(me=ye.globals.seriesRange)||void 0===me||null===(Ee=me[d])||void 0===Ee||null===(De=Ee[g])||void 0===De||null===(Ce=De.y[0])||void 0===Ce?void 0:Ce.y2)&&{y2:null===(Re=ye.globals.seriesRange)||void 0===Re||null===(G=Re[d])||void 0===G||null===(re=G[g])||void 0===re||null===(te=re.y[0])||void 0===te?void 0:te.y2});if(oe){if(Fe.tooltipLabels.drawSeriesTexts(He(He({},Qn),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),ht)ye.globals.markers.largestSize>0?Fe.marker.enlargePoints(g):Fe.tooltipPosition.moveDynamicPointsOnHover(g);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(yt),this.barSeriesHeight>0)){var hr=new rt(this.ctx),xr=ye.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(g,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(g,d);for(var Rr=0;Rr<xr.length;Rr++)hr.pathMouseEnter(xr[Rr])}}else Fe.tooltipLabels.drawSeriesTexts(He({shared:!1},Qn)),this.tooltipUtil.hasBars()&&Fe.tooltipPosition.moveStickyTooltipOverBars(g,d),ht&&Fe.tooltipPosition.moveMarkers(d,g)}}]),pe}(),Mt=function(){function pe(i){Z(this,pe),this.w=i.w,this.barCtx=i,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return we(pe,[{key:"handleBarDataLabels",value:function(i){var r=i.x,d=i.y,g=i.y1,x=i.y2,w=i.i,I=i.j,R=i.realIndex,Y=i.groupIndex,W=i.series,X=i.barHeight,Q=i.barWidth,ce=i.barXPosition,me=i.barYPosition,Ee=i.visibleSeries,De=i.renderedPath,Ce=this.w,Re=new rt(this.barCtx.ctx),G=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[R]:this.barCtx.strokeWidth,re=r+parseFloat(Q*Ee),te=d+parseFloat(X*Ee);Ce.globals.isXNumeric&&!Ce.globals.isBarHorizontal&&(re=r+parseFloat(Q*(Ee+1)),te=d+parseFloat(X*(Ee+1))-G);var oe,yt,ye=null,Fe=r,ht=d,ii=Ce.config.dataLabels,hi=this.barCtx.barOptions.dataLabels,xi=this.barCtx.barOptions.dataLabels.total;void 0!==me&&this.barCtx.isRangeBar&&(te=me,ht=me),void 0!==ce&&this.barCtx.isVerticalGroupedRangeBar&&(re=ce,Fe=ce);var Pi=ii.offsetX,nn=ii.offsetY,Tn={width:0,height:0};Ce.config.dataLabels.enabled&&(Tn=Re.getTextRects(Ce.globals.yLabelFormatters[0](this.barCtx.series[w][I]),parseFloat(ii.style.fontSize)));var Qn={x:r,y:d,i:w,j:I,realIndex:R,groupIndex:Y||-1,renderedPath:De,bcx:re,bcy:te,barHeight:X,barWidth:Q,textRects:Tn,strokeWidth:G,dataLabelsX:Fe,dataLabelsY:ht,dataLabelsConfig:ii,barDataLabelsConfig:hi,barTotalDataLabelsConfig:xi,offX:Pi,offY:nn};return yt=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(Qn):this.calculateColumnsDataLabelsPosition(Qn),De.attr({cy:yt.bcy,cx:yt.bcx,j:I,val:W[w][I],barHeight:X,barWidth:Q}),oe=this.drawCalculatedDataLabels({x:yt.dataLabelsX,y:yt.dataLabelsY,val:this.barCtx.isRangeBar?[g,x]:W[w][I],i:R,j:I,barWidth:Q,barHeight:X,textRects:Tn,dataLabelsConfig:ii}),Ce.config.chart.stacked&&xi.enabled&&(ye=this.drawTotalDataLabels({x:yt.totalDataLabelsX,y:yt.totalDataLabelsY,barWidth:Q,barHeight:X,realIndex:R,textAnchor:yt.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:R,j:I}),dataLabelsConfig:ii,barTotalDataLabelsConfig:xi})),{dataLabels:oe,totalDataLabels:ye}}},{key:"getStackedTotalDataLabel",value:function(i){var r=i.realIndex,d=i.j,g=this.w,x=this.barCtx.stackedSeriesTotals[d];return this.totalFormatter&&(x=this.totalFormatter(x,He(He({},g),{},{seriesIndex:r,dataPointIndex:d,w:g}))),x}},{key:"calculateColumnsDataLabelsPosition",value:function(i){var r,d,g=this.w,x=i.i,w=i.j,I=i.realIndex,R=i.groupIndex,Y=i.y,W=i.bcx,X=i.barWidth,Q=i.barHeight,ce=i.textRects,me=i.dataLabelsX,Ee=i.dataLabelsY,De=i.dataLabelsConfig,Ce=i.barDataLabelsConfig,Re=i.barTotalDataLabelsConfig,G=i.strokeWidth,re=i.offX,te=i.offY;Q=Math.abs(Q);var oe="vertical"===g.config.plotOptions.bar.dataLabels.orientation,ye=this.barCtx.barHelpers.getZeroValueEncounters({i:x,j:w}).zeroEncounters;W=W-G/2+(-1!==R?R*X:0),this.barCtx.isVerticalGroupedRangeBar?me+=X/2:(me=g.globals.isXNumeric?W-X/2+re:W-g.globals.gridWidth/g.globals.dataPoints+X/2+re,ye>0&&g.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(me-=X*ye)),oe&&(me=me+ce.height/2-G/2-2);var ht=this.barCtx.series[x][w]<0,yt=Y;switch(this.barCtx.isReversed&&(yt=Y-Q+(ht?2*Q:0),Y-=Q),Ce.position){case"center":Ee=oe?ht?yt-Q/2+te:yt+Q/2-te:ht?yt-Q/2+ce.height/2+te:yt+Q/2+ce.height/2-te;break;case"bottom":Ee=oe?ht?yt-Q+te:yt+Q-te:ht?yt-Q+ce.height+G+te:yt+Q-ce.height/2+G-te;break;case"top":Ee=oe?ht?yt+te:yt-te:ht?yt-ce.height/2-te:yt+ce.height+te}if(this.barCtx.lastActiveBarSerieIndex===I&&Re.enabled){var ii=new rt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:I,j:w}),De.fontSize);r=ht?yt-ii.height/2-te-Re.offsetY+18:yt+ii.height+te+Re.offsetY-18,d=me+Re.offsetX}return g.config.chart.stacked||(Ee<0?Ee=0+G:Ee+ce.height/3>g.globals.gridHeight&&(Ee=g.globals.gridHeight-G)),{bcx:W,bcy:Y,dataLabelsX:me,dataLabelsY:Ee,totalDataLabelsX:d,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(i){var r=this.w,d=i.x,g=i.i,x=i.j,w=i.realIndex,I=i.groupIndex,R=i.bcy,Y=i.barHeight,W=i.barWidth,X=i.textRects,Q=i.dataLabelsX,ce=i.strokeWidth,me=i.dataLabelsConfig,Ee=i.barDataLabelsConfig,De=i.barTotalDataLabelsConfig,Ce=i.offX,Re=i.offY,G=r.globals.gridHeight/r.globals.dataPoints;W=Math.abs(W);var re,te,oe=(R+=-1!==I?I*Y:0)-(this.barCtx.isRangeBar?0:G)+Y/2+X.height/2+Re-3,ye="start",Fe=this.barCtx.series[g][x]<0,ht=d;switch(this.barCtx.isReversed&&(ht=d+W-(Fe?2*W:0),d=r.globals.gridWidth-W),Ee.position){case"center":Q=Fe?ht+W/2-Ce:Math.max(X.width/2,ht-W/2)+Ce;break;case"bottom":Q=Fe?ht+W-ce-Math.round(X.width/2)-Ce:ht-W+ce+Math.round(X.width/2)+Ce;break;case"top":Q=Fe?ht-ce+Math.round(X.width/2)-Ce:ht-ce-Math.round(X.width/2)+Ce}if(this.barCtx.lastActiveBarSerieIndex===w&&De.enabled){var yt=new rt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:w,j:x}),me.fontSize);Fe?(re=ht-ce+Math.round(yt.width/2)-Ce-De.offsetX-15,ye="end"):re=ht-ce-Math.round(yt.width/2)+Ce+De.offsetX+15,te=oe+De.offsetY}return r.config.chart.stacked||(Q<0?Q=Q+X.width+ce:Q+X.width/2>r.globals.gridWidth&&(Q=r.globals.gridWidth-X.width-ce)),{bcx:d,bcy:R,dataLabelsX:Q,dataLabelsY:oe,totalDataLabelsX:re,totalDataLabelsY:te,totalDataLabelsAnchor:ye}}},{key:"drawCalculatedDataLabels",value:function(i){var r=i.x,d=i.y,g=i.val,x=i.i,w=i.j,I=i.textRects,R=i.barHeight,Y=i.barWidth,W=i.dataLabelsConfig,X=this.w,Q="rotate(0)";"vertical"===X.config.plotOptions.bar.dataLabels.orientation&&(Q="rotate(-90, ".concat(r,", ").concat(d,")"));var ce=new Gn(this.barCtx.ctx),me=new rt(this.barCtx.ctx),Ee=W.formatter,De=null,Ce=X.globals.collapsedSeriesIndices.indexOf(x)>-1;if(W.enabled&&!Ce){De=me.group({class:"apexcharts-data-labels",transform:Q});var Re="";void 0!==g&&(Re=Ee(g,He(He({},X),{},{seriesIndex:x,dataPointIndex:w,w:X}))),!g&&X.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(Re="");var G=X.globals.series[x][w]<0,re=X.config.plotOptions.bar.dataLabels.position;"vertical"===X.config.plotOptions.bar.dataLabels.orientation&&("top"===re&&(W.textAnchor=G?"end":"start"),"center"===re&&(W.textAnchor="middle"),"bottom"===re&&(W.textAnchor=G?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&Y<me.getTextRects(Re,parseFloat(W.style.fontSize)).width&&(Re=""),X.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?I.width/1.6>Math.abs(Y)&&(Re=""):I.height/1.6>Math.abs(R)&&(Re=""));var te=He({},W);this.barCtx.isHorizontal&&g<0&&("start"===W.textAnchor?te.textAnchor="end":"end"===W.textAnchor&&(te.textAnchor="start")),ce.plotDataLabelsText({x:r,y:d,text:Re,i:x,j:w,parent:De,dataLabelsConfig:te,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return De}},{key:"drawTotalDataLabels",value:function(i){var r,d=i.x,g=i.y,x=i.val,w=i.barWidth,I=i.barHeight,R=i.realIndex,Y=i.textAnchor,W=i.barTotalDataLabelsConfig,X=this.w,Q=new rt(this.barCtx.ctx);return W.enabled&&void 0!==d&&void 0!==g&&this.barCtx.lastActiveBarSerieIndex===R&&(r=Q.drawText({x:d-(!X.globals.isBarHorizontal&&X.globals.seriesGroups.length?w/X.globals.seriesGroups.length:0),y:g-(X.globals.isBarHorizontal&&X.globals.seriesGroups.length?I/X.globals.seriesGroups.length:0),foreColor:W.style.color,text:x,textAnchor:Y,fontFamily:W.style.fontFamily,fontSize:W.style.fontSize,fontWeight:W.style.fontWeight})),r}}]),pe}(),Tt=function(){function pe(i){Z(this,pe),this.w=i.w,this.barCtx=i}return we(pe,[{key:"initVariables",value:function(i){var r=this.w;this.barCtx.series=i,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var d=0;d<i.length;d++)if(i[d].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=i[d].length),r.globals.isXNumeric)for(var g=0;g<i[d].length;g++)r.globals.seriesX[d][g]>r.globals.minX&&r.globals.seriesX[d][g]<r.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=r.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],r.globals.comboCharts||this.checkZeroSeries({series:i})}},{key:"initialPositions",value:function(){var i,r,d,g,x,w,I,R,Y=this.w,W=Y.globals.dataPoints;this.barCtx.isRangeBar&&(W=Y.globals.labels.length);var X=this.barCtx.seriesLen;if(Y.config.plotOptions.bar.rangeBarGroupRows&&(X=1),this.barCtx.isHorizontal)x=(d=Y.globals.gridHeight/W)/X,Y.globals.isXNumeric&&(x=(d=Y.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),x=x*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(x=parseInt(this.barCtx.barOptions.barHeight,10)),R=this.barCtx.baseLineInvertedY+Y.globals.padHorizontal+(this.barCtx.isReversed?Y.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(R=Y.globals.gridWidth/2),r=(d-x*this.barCtx.seriesLen)/2;else{if(g=Y.globals.gridWidth/this.barCtx.visibleItems,Y.config.xaxis.convertedCatToNumeric&&(g=Y.globals.gridWidth/Y.globals.dataPoints),w=g/X*parseInt(this.barCtx.barOptions.columnWidth,10)/100,Y.globals.isXNumeric){var Q=this.barCtx.xRatio;Y.globals.minXDiff&&.5!==Y.globals.minXDiff&&Y.globals.minXDiff/Q>0&&(g=Y.globals.minXDiff/Q),(w=g/X*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(w=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(w=parseInt(this.barCtx.barOptions.columnWidth,10)),I=Y.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?Y.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),i=Y.globals.padHorizontal+(g-w*this.barCtx.seriesLen)/2}return Y.globals.barHeight=x,Y.globals.barWidth=w,{x:i,y:r,yDivision:d,xDivision:g,barHeight:x,barWidth:w,zeroH:I,zeroW:R}}},{key:"initializeStackedPrevVars",value:function(i){var r=i.w;r.globals.hasSeriesGroups?r.globals.seriesGroups.forEach(function(d){i[d]||(i[d]={}),i[d].prevY=[],i[d].prevX=[],i[d].prevYF=[],i[d].prevXF=[],i[d].prevYVal=[],i[d].prevXVal=[]}):(i.prevY=[],i.prevX=[],i.prevYF=[],i.prevXF=[],i.prevYVal=[],i.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(i){var r=i.w;r.globals.hasSeriesGroups?r.globals.seriesGroups.forEach(function(d){i[d]||(i[d]={}),i[d].xArrj=[],i[d].xArrjF=[],i[d].xArrjVal=[],i[d].yArrj=[],i[d].yArrjF=[],i[d].yArrjVal=[]}):(i.xArrj=[],i.xArrjF=[],i.xArrjVal=[],i.yArrj=[],i.yArrjF=[],i.yArrjVal=[])}},{key:"getPathFillColor",value:function(i,r,d,g){var x,w,I,R,Y=this.w,W=new Wi(this.barCtx.ctx),X=null,Q=this.barCtx.barOptions.distributed?d:r;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(ce){i[r][d]>=ce.from&&i[r][d]<=ce.to&&(X=ce.color)}),Y.config.series[r].data[d]&&Y.config.series[r].data[d].fillColor&&(X=Y.config.series[r].data[d].fillColor),W.fillPath({seriesNumber:this.barCtx.barOptions.distributed?Q:g,dataPointIndex:d,color:X,value:i[r][d],fillConfig:null===(x=Y.config.series[r].data[d])||void 0===x?void 0:x.fill,fillType:null!==(w=Y.config.series[r].data[d])&&void 0!==w&&null!==(I=w.fill)&&void 0!==I&&I.type?null===(R=Y.config.series[r].data[d])||void 0===R?void 0:R.fill.type:Array.isArray(Y.config.fill.type)?Y.config.fill.type[r]:Y.config.fill.type})}},{key:"getStrokeWidth",value:function(i,r,d){var g=0,x=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[i][r],x.config.stroke.show&&(this.barCtx.isNullValue||(g=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[d]:this.barCtx.strokeWidth)),g}},{key:"shouldApplyRadius",value:function(i){var r=this.w,d=!1;return r.config.plotOptions.bar.borderRadius>0&&(r.config.chart.stacked&&"last"===r.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===i&&(d=!0):d=!0),d}},{key:"barBackground",value:function(i){var r=i.j,d=i.i,g=i.x1,x=i.x2,w=i.y1,I=i.y2,R=i.elSeries,Y=this.w,W=new rt(this.barCtx.ctx),X=new Yn(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&X===d){r>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(r%=this.barCtx.barOptions.colors.backgroundBarColors.length);var ce=W.drawRect(void 0!==g?g:0,void 0!==w?w:0,void 0!==x?x:Y.globals.gridWidth,void 0!==I?I:Y.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[r],this.barCtx.barOptions.colors.backgroundBarOpacity);R.add(ce),ce.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(i){var r,d=i.barWidth,g=i.barXPosition,x=i.y1,w=i.y2,I=i.strokeWidth,R=i.seriesGroup,Y=i.realIndex,W=i.i,X=i.j,Q=i.w,ce=new rt(this.barCtx.ctx);(I=Array.isArray(I)?I[Y]:I)||(I=0);var me=d,Ee=g;null!==(r=Q.config.series[Y].data[X])&&void 0!==r&&r.columnWidthOffset&&(Ee=g-Q.config.series[Y].data[X].columnWidthOffset/2,me=d+Q.config.series[Y].data[X].columnWidthOffset);var De=Ee,Ce=Ee+me;w+=.001;var Re=ce.move(De,x+=.001),G=ce.move(De,x),re=ce.line(Ce-I,x);if(Q.globals.previousPaths.length>0&&(G=this.barCtx.getPreviousPath(Y,X,!1)),Re=Re+ce.line(De,w)+ce.line(Ce-I,w)+ce.line(Ce-I,x)+("around"===Q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),G=G+ce.line(De,x)+re+re+re+re+re+ce.line(De,x)+("around"===Q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(Y)&&(Re=ce.roundPathCorners(Re,Q.config.plotOptions.bar.borderRadius)),Q.config.chart.stacked){var te=this.barCtx;Q.globals.hasSeriesGroups&&R&&(te=this.barCtx[R]),te.yArrj.push(w),te.yArrjF.push(Math.abs(x-w)),te.yArrjVal.push(this.barCtx.series[W][X])}return{pathTo:Re,pathFrom:G}}},{key:"getBarpaths",value:function(i){var r,d=i.barYPosition,g=i.barHeight,x=i.x1,w=i.x2,I=i.strokeWidth,R=i.seriesGroup,Y=i.realIndex,W=i.i,X=i.j,Q=i.w,ce=new rt(this.barCtx.ctx);(I=Array.isArray(I)?I[Y]:I)||(I=0);var me=d,Ee=g;null!==(r=Q.config.series[Y].data[X])&&void 0!==r&&r.barHeightOffset&&(me=d-Q.config.series[Y].data[X].barHeightOffset/2,Ee=g+Q.config.series[Y].data[X].barHeightOffset);var De=me,Ce=me+Ee;w+=.001;var Re=ce.move(x+=.001,De),G=ce.move(x,De);Q.globals.previousPaths.length>0&&(G=this.barCtx.getPreviousPath(Y,X,!1));var re=ce.line(x,Ce-I);if(Re=Re+ce.line(w,De)+ce.line(w,Ce-I)+re+("around"===Q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),G=G+ce.line(x,De)+re+re+re+re+re+ce.line(x,De)+("around"===Q.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(Y)&&(Re=ce.roundPathCorners(Re,Q.config.plotOptions.bar.borderRadius)),Q.config.chart.stacked){var te=this.barCtx;Q.globals.hasSeriesGroups&&R&&(te=this.barCtx[R]),te.xArrj.push(w),te.xArrjF.push(Math.abs(x-w)),te.xArrjVal.push(this.barCtx.series[W][X])}return{pathTo:Re,pathFrom:G}}},{key:"checkZeroSeries",value:function(i){for(var r=i.series,d=this.w,g=0;g<r.length;g++){for(var x=0,w=0;w<r[d.globals.maxValsInArrayIndex].length;w++)x+=r[g][w];0===x&&this.barCtx.zeroSerieses.push(g)}}},{key:"getXForValue",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:r;return null!=i&&(d=r+i/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?i/this.barCtx.invertedYRatio:0)),d}},{key:"getYForValue",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:r;return null!=i&&(d=r-i/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?i/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),d}},{key:"getGoalValues",value:function(i,r,d,g,x){var w=this,I=this.w,R=[],Y=function(Q,ce){var me;R.push((Se(me={},i,"x"===i?w.getXForValue(Q,r,!1):w.getYForValue(Q,d,!1)),Se(me,"attrs",ce),me))};if(I.globals.seriesGoals[g]&&I.globals.seriesGoals[g][x]&&Array.isArray(I.globals.seriesGoals[g][x])&&I.globals.seriesGoals[g][x].forEach(function(Q){Y(Q.value,Q)}),this.barCtx.barOptions.isDumbbell&&I.globals.seriesRange.length){var W=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:I.globals.colors,X={strokeHeight:"x"===i?0:I.globals.markers.size[g],strokeWidth:"x"===i?I.globals.markers.size[g]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(W[g])?W[g][0]:W[g]};Y(I.globals.seriesRangeStart[g][x],X),Y(I.globals.seriesRangeEnd[g][x],He(He({},X),{},{strokeColor:Array.isArray(W[g])?W[g][1]:W[g]}))}return R}},{key:"drawGoalLine",value:function(i){var r=i.barXPosition,d=i.barYPosition,g=i.goalX,x=i.goalY,w=i.barWidth,I=i.barHeight,R=new rt(this.barCtx.ctx),Y=R.group({className:"apexcharts-bar-goals-groups"});Y.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:Y.node}),Y.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var W=null;return this.barCtx.isHorizontal?Array.isArray(g)&&g.forEach(function(X){var Q=void 0!==X.attrs.strokeHeight?X.attrs.strokeHeight:I/2,ce=d+Q+I/2;W=R.drawLine(X.x,ce-2*Q,X.x,ce,X.attrs.strokeColor?X.attrs.strokeColor:void 0,X.attrs.strokeDashArray,X.attrs.strokeWidth?X.attrs.strokeWidth:2,X.attrs.strokeLineCap),Y.add(W)}):Array.isArray(x)&&x.forEach(function(X){var Q=void 0!==X.attrs.strokeWidth?X.attrs.strokeWidth:w/2,ce=r+Q+w/2;W=R.drawLine(ce-2*Q,X.y,ce,X.y,X.attrs.strokeColor?X.attrs.strokeColor:void 0,X.attrs.strokeDashArray,X.attrs.strokeHeight?X.attrs.strokeHeight:2,X.attrs.strokeLineCap),Y.add(W)}),Y}},{key:"drawBarShadow",value:function(i){var r=i.prevPaths,d=i.currPaths,g=i.color,x=this.w,w=r.x,I=r.x1,Y=d.x,W=d.x1,X=d.barYPosition,Q=r.barYPosition+d.barHeight,ce=new rt(this.barCtx.ctx),me=new Je,Ee=ce.move(I,Q)+ce.line(w,Q)+ce.line(Y,X)+ce.line(W,X)+ce.line(I,Q)+("around"===x.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return ce.drawPath({d:Ee,fill:me.shadeColor(.5,Je.rgb2hex(g)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(i){var r=i.i,d=i.j,x=0,w=0;return this.w.globals.seriesPercent.forEach(function(I,R){I[d]&&x++,R<r&&0===I[d]&&w++}),{nonZeroColumns:x,zeroEncounters:w}}}]),pe}(),Zt=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.w=i.w;var d=this.w;this.barOptions=d.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=d.config.stroke.width,this.isNullValue=!1,this.isRangeBar=d.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!d.globals.isBarHorizontal&&d.globals.seriesRange.length&&d.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=r,null!==this.xyRatios&&(this.xRatio=r.xRatio,this.yRatio=r.yRatio,this.invertedXRatio=r.invertedXRatio,this.invertedYRatio=r.invertedYRatio,this.baseLineY=r.baseLineY,this.baseLineInvertedY=r.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var g=new Yn(this.ctx);this.lastActiveBarSerieIndex=g.getActiveConfigSeriesIndex("desc",["bar","column"]);var x=g.getBarSeriesIndices(),w=new bi(this.ctx);this.stackedSeriesTotals=w.getStackedSeriesTotals(this.w.config.series.map(function(I,R){return-1===x.indexOf(R)?R:-1}).filter(function(I){return-1!==I})),this.barHelpers=new Tt(this)}return we(pe,[{key:"draw",value:function(i,r){var d=this.w,g=new rt(this.ctx),x=new bi(this.ctx,d);i=x.getLogSeries(i),this.series=i,this.yRatio=x.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);var w=g.group({class:"apexcharts-bar-series apexcharts-plot-series"});d.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var I=0,R=0;I<i.length;I++,R++){var Y,W,X,Q,ce=void 0,me=void 0,Ee=[],De=[],Ce=d.globals.comboCharts?r[I]:I,Re=g.group({class:"apexcharts-series",rel:I+1,seriesName:Je.escapeString(d.globals.seriesNames[Ce]),"data:realIndex":Ce});this.ctx.series.addCollapsedClassToSeries(Re,Ce),i[I].length>0&&(this.visibleI=this.visibleI+1);var G=0,re=0;this.yRatio.length>1&&(this.yaxisIndex=Ce),this.isReversed=d.config.yaxis[this.yaxisIndex]&&d.config.yaxis[this.yaxisIndex].reversed;var te=this.barHelpers.initialPositions();me=te.y,G=te.barHeight,W=te.yDivision,Q=te.zeroW,ce=te.x,re=te.barWidth,Y=te.xDivision,X=te.zeroH,this.horizontal||De.push(ce+re/2);var oe=g.group({class:"apexcharts-datalabels","data:realIndex":Ce});d.globals.delayedElements.push({el:oe.node}),oe.node.classList.add("apexcharts-element-hidden");var ye=g.group({class:"apexcharts-bar-goals-markers"}),Fe=g.group({class:"apexcharts-bar-shadows"});d.globals.delayedElements.push({el:Fe.node}),Fe.node.classList.add("apexcharts-element-hidden");for(var ht=0;ht<i[I].length;ht++){var yt=this.barHelpers.getStrokeWidth(I,ht,Ce),ii=null,hi={indexes:{i:I,j:ht,realIndex:Ce,bc:R},x:ce,y:me,strokeWidth:yt,elSeries:Re};this.isHorizontal?(ii=this.drawBarPaths(He(He({},hi),{},{barHeight:G,zeroW:Q,yDivision:W})),re=this.series[I][ht]/this.invertedYRatio):(ii=this.drawColumnPaths(He(He({},hi),{},{xDivision:Y,barWidth:re,zeroH:X})),G=this.series[I][ht]/this.yRatio[this.yaxisIndex]);var xi=this.barHelpers.getPathFillColor(i,I,ht,Ce);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&ht>0){var Pi=this.barHelpers.drawBarShadow({color:"string"==typeof xi&&-1===xi?.indexOf("url")?xi:Je.hexToRgba(d.globals.colors[I]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:ii});Pi&&Fe.add(Pi)}this.pathArr.push(ii);var nn=this.barHelpers.drawGoalLine({barXPosition:ii.barXPosition,barYPosition:ii.barYPosition,goalX:ii.goalX,goalY:ii.goalY,barHeight:G,barWidth:re});nn&&ye.add(nn),me=ii.y,ce=ii.x,ht>0&&De.push(ce+re/2),Ee.push(me),this.renderSeries({realIndex:Ce,pathFill:xi,j:ht,i:I,pathFrom:ii.pathFrom,pathTo:ii.pathTo,strokeWidth:yt,elSeries:Re,x:ce,y:me,series:i,barHeight:ii.barHeight?ii.barHeight:G,barWidth:ii.barWidth?ii.barWidth:re,elDataLabelsWrap:oe,elGoalsMarkers:ye,elBarShadows:Fe,visibleSeries:this.visibleI,type:"bar"})}d.globals.seriesXvalues[Ce]=De,d.globals.seriesYvalues[Ce]=Ee,w.add(Re)}return w}},{key:"renderSeries",value:function(i){var r=i.realIndex,d=i.pathFill,g=i.lineFill,x=i.j,w=i.i,I=i.groupIndex,R=i.pathFrom,Y=i.pathTo,W=i.strokeWidth,X=i.elSeries,Q=i.x,ce=i.y,me=i.y1,Ee=i.y2,De=i.series,Ce=i.barHeight,Re=i.barWidth,G=i.barXPosition,re=i.barYPosition,te=i.elDataLabelsWrap,oe=i.elGoalsMarkers,ye=i.elBarShadows,Fe=i.visibleSeries,ht=i.type,yt=this.w,ii=new rt(this.ctx);g||(g=this.barOptions.distributed?yt.globals.stroke.colors[x]:yt.globals.stroke.colors[r]),yt.config.series[w].data[x]&&yt.config.series[w].data[x].strokeColor&&(g=yt.config.series[w].data[x].strokeColor),this.isNullValue&&(d="none");var xi=ii.renderPaths({i:w,j:x,realIndex:r,pathFrom:R,pathTo:Y,stroke:g,strokeWidth:W,strokeLineCap:yt.config.stroke.lineCap,fill:d,animationDelay:x/yt.config.chart.animations.animateGradually.delay*(yt.config.chart.animations.speed/yt.globals.dataPoints)/2.4,initialSpeed:yt.config.chart.animations.speed,dataChangeSpeed:yt.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(ht,"-area")});xi.attr("clip-path","url(#gridRectMask".concat(yt.globals.cuid,")"));var Pi=yt.config.forecastDataPoints;Pi.count>0&&x>=yt.globals.dataPoints-Pi.count&&(xi.node.setAttribute("stroke-dasharray",Pi.dashArray),xi.node.setAttribute("stroke-width",Pi.strokeWidth),xi.node.setAttribute("fill-opacity",Pi.fillOpacity)),void 0!==me&&void 0!==Ee&&(xi.attr("data-range-y1",me),xi.attr("data-range-y2",Ee)),new yi(this.ctx).setSelectionFilter(xi,r,x),X.add(xi);var nn=new Mt(this).handleBarDataLabels({x:Q,y:ce,y1:me,y2:Ee,i:w,j:x,series:De,realIndex:r,groupIndex:I,barHeight:Ce,barWidth:Re,barXPosition:G,barYPosition:re,renderedPath:xi,visibleSeries:Fe});return null!==nn.dataLabels&&te.add(nn.dataLabels),nn.totalDataLabels&&te.add(nn.totalDataLabels),X.add(te),oe&&X.add(oe),ye&&X.add(ye),X}},{key:"drawBarPaths",value:function(i){var r,I,d=i.indexes,g=i.barHeight,x=i.strokeWidth,w=i.zeroW,R=i.y,Y=i.yDivision,W=i.elSeries,X=this.w,Q=d.i,ce=d.j;if(X.globals.isXNumeric)r=(R=(X.globals.seriesX[Q][ce]-X.globals.minX)/this.invertedXRatio-g)+g*this.visibleI;else if(X.config.plotOptions.bar.hideZeroBarsWhenGrouped){var me=0,Ee=0;X.globals.seriesPercent.forEach(function(Ce,Re){Ce[ce]&&me++,Re<Q&&0===Ce[ce]&&Ee++}),me>0&&(g=this.seriesLen*g/me),r=R+g*this.visibleI,r-=g*Ee}else r=R+g*this.visibleI;this.isFunnel&&(w-=(this.barHelpers.getXForValue(this.series[Q][ce],w)-w)/2),I=this.barHelpers.getXForValue(this.series[Q][ce],w);var De=this.barHelpers.getBarpaths({barYPosition:r,barHeight:g,x1:w,x2:I,strokeWidth:x,series:this.series,realIndex:d.realIndex,i:Q,j:ce,w:X});return X.globals.isXNumeric||(R+=Y),this.barHelpers.barBackground({j:ce,i:Q,y1:r-g*this.visibleI,y2:g*this.seriesLen,elSeries:W}),{pathTo:De.pathTo,pathFrom:De.pathFrom,x1:w,x:I,y:R,goalX:this.barHelpers.getGoalValues("x",w,null,Q,ce),barYPosition:r,barHeight:g}}},{key:"drawColumnPaths",value:function(i){var r,x,d=i.indexes,g=i.x,w=i.xDivision,I=i.barWidth,R=i.zeroH,Y=i.strokeWidth,W=i.elSeries,X=this.w,ce=d.i,me=d.j,Ee=d.bc;if(X.globals.isXNumeric){var De=this.getBarXForNumericXAxis({x:g,j:me,realIndex:d.realIndex,barWidth:I});g=De.x,r=De.barXPosition}else if(X.config.plotOptions.bar.hideZeroBarsWhenGrouped){var Ce=this.barHelpers.getZeroValueEncounters({i:ce,j:me}),Re=Ce.nonZeroColumns;Re>0&&(I=this.seriesLen*I/Re),r=g+I*this.visibleI,r-=I*Ce.zeroEncounters}else r=g+I*this.visibleI;x=this.barHelpers.getYForValue(this.series[ce][me],R);var re=this.barHelpers.getColumnPaths({barXPosition:r,barWidth:I,y1:R,y2:x,strokeWidth:Y,series:this.series,realIndex:d.realIndex,i:ce,j:me,w:X});return X.globals.isXNumeric||(g+=w),this.barHelpers.barBackground({bc:Ee,j:me,i:ce,x1:r-Y/2-I*this.visibleI,x2:I*this.seriesLen+Y/2,elSeries:W}),{pathTo:re.pathTo,pathFrom:re.pathFrom,x:g,y:x,goalY:this.barHelpers.getGoalValues("y",null,R,ce,me),barXPosition:r,barWidth:I}}},{key:"getBarXForNumericXAxis",value:function(i){var r=i.x,d=i.barWidth,g=i.realIndex,x=i.j,w=this.w,I=g;return w.globals.seriesX[g].length||(I=w.globals.maxValsInArrayIndex),w.globals.seriesX[I][x]&&(r=(w.globals.seriesX[I][x]-w.globals.minX)/this.xRatio-d*this.seriesLen/2),{barXPosition:r+d*this.visibleI,x:r}}},{key:"getPreviousPath",value:function(i,r){for(var d,g=this.w,x=0;x<g.globals.previousPaths.length;x++){var w=g.globals.previousPaths[x];w.paths&&w.paths.length>0&&parseInt(w.realIndex,10)===parseInt(i,10)&&void 0!==g.globals.previousPaths[x].paths[r]&&(d=g.globals.previousPaths[x].paths[r].d)}return d}}]),pe}(),Pt=function(pe){Le(r,Zt);var i=ut(r);function r(){return Z(this,r),i.apply(this,arguments)}return we(r,[{key:"draw",value:function(d,g){var x=this,w=this.w;this.graphics=new rt(this.ctx),this.bar=new Zt(this.ctx,this.xyRatios);var I=new bi(this.ctx,w);d=I.getLogSeries(d),this.yRatio=I.getLogYRatios(this.yRatio),this.barHelpers.initVariables(d),"100%"===w.config.chart.stackType&&(d=w.globals.seriesPercent.slice()),this.series=d,this.barHelpers.initializeStackedPrevVars(this);for(var R=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),Y=0,W=0,X=function(me,Ee){var De=void 0,Ce=void 0,Re=void 0,G=void 0,re=-1;x.groupCtx=x,w.globals.seriesGroups.forEach(function(xr,Rr){xr.indexOf(w.config.series[me].name)>-1&&(re=Rr)}),-1!==re&&(x.groupCtx=x[w.globals.seriesGroups[re]]);var te=[],oe=[],ye=w.globals.comboCharts?g[me]:me;x.yRatio.length>1&&(x.yaxisIndex=ye),x.isReversed=w.config.yaxis[x.yaxisIndex]&&w.config.yaxis[x.yaxisIndex].reversed;var Fe=x.graphics.group({class:"apexcharts-series",seriesName:Je.escapeString(w.globals.seriesNames[ye]),rel:me+1,"data:realIndex":ye});x.ctx.series.addCollapsedClassToSeries(Fe,ye);var ht=x.graphics.group({class:"apexcharts-datalabels","data:realIndex":ye}),yt=x.graphics.group({class:"apexcharts-bar-goals-markers"}),ii=0,hi=0,xi=x.initialPositions(Y,W,De,Ce,Re,G);W=xi.y,Ce=xi.yDivision,G=xi.zeroW,Y=xi.x,hi=xi.barWidth,De=xi.xDivision,Re=xi.zeroH,w.globals.barHeight=ii=xi.barHeight,w.globals.barWidth=hi,x.barHelpers.initializeStackedXYVars(x),1===x.groupCtx.prevY.length&&x.groupCtx.prevY[0].every(function(xr){return isNaN(xr)})&&(x.groupCtx.prevY[0]=x.groupCtx.prevY[0].map(function(xr){return Re}),x.groupCtx.prevYF[0]=x.groupCtx.prevYF[0].map(function(xr){return 0}));for(var Pi=0;Pi<w.globals.dataPoints;Pi++){var nn=x.barHelpers.getStrokeWidth(me,Pi,ye),Tn={indexes:{i:me,j:Pi,realIndex:ye,bc:Ee},strokeWidth:nn,x:Y,y:W,elSeries:Fe,groupIndex:re,seriesGroup:w.globals.seriesGroups[re]},Xn=null;x.isHorizontal?(Xn=x.drawStackedBarPaths(He(He({},Tn),{},{zeroW:G,barHeight:ii,yDivision:Ce})),hi=x.series[me][Pi]/x.invertedYRatio):(Xn=x.drawStackedColumnPaths(He(He({},Tn),{},{xDivision:De,barWidth:hi,zeroH:Re})),ii=x.series[me][Pi]/x.yRatio[x.yaxisIndex]);var Qn=x.barHelpers.drawGoalLine({barXPosition:Xn.barXPosition,barYPosition:Xn.barYPosition,goalX:Xn.goalX,goalY:Xn.goalY,barHeight:ii,barWidth:hi});Qn&&yt.add(Qn),W=Xn.y,te.push(Y=Xn.x),oe.push(W);var hr=x.barHelpers.getPathFillColor(d,me,Pi,ye);Fe=x.renderSeries({realIndex:ye,pathFill:hr,j:Pi,i:me,groupIndex:re,pathFrom:Xn.pathFrom,pathTo:Xn.pathTo,strokeWidth:nn,elSeries:Fe,x:Y,y:W,series:d,barHeight:ii,barWidth:hi,elDataLabelsWrap:ht,elGoalsMarkers:yt,type:"bar",visibleSeries:0})}w.globals.seriesXvalues[ye]=te,w.globals.seriesYvalues[ye]=oe,x.groupCtx.prevY.push(x.groupCtx.yArrj),x.groupCtx.prevYF.push(x.groupCtx.yArrjF),x.groupCtx.prevYVal.push(x.groupCtx.yArrjVal),x.groupCtx.prevX.push(x.groupCtx.xArrj),x.groupCtx.prevXF.push(x.groupCtx.xArrjF),x.groupCtx.prevXVal.push(x.groupCtx.xArrjVal),R.add(Fe)},Q=0,ce=0;Q<d.length;Q++,ce++)X(Q,ce);return R}},{key:"initialPositions",value:function(d,g,x,w,I,R){var Y,W,X,Q,ce=this.w;return this.isHorizontal?(X=(X=w=ce.globals.gridHeight/ce.globals.dataPoints)*parseInt(ce.config.plotOptions.bar.barHeight,10)/100,-1===String(ce.config.plotOptions.bar.barHeight).indexOf("%")&&(X=parseInt(ce.config.plotOptions.bar.barHeight,10)),R=this.baseLineInvertedY+ce.globals.padHorizontal+(this.isReversed?ce.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),g=(w-X)/2):(Q=x=ce.globals.gridWidth/ce.globals.dataPoints,Q=ce.globals.isXNumeric&&ce.globals.dataPoints>1?(x=ce.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:Q*parseInt(ce.config.plotOptions.bar.columnWidth,10)/100,-1===String(ce.config.plotOptions.bar.columnWidth).indexOf("%")&&(Q=parseInt(ce.config.plotOptions.bar.columnWidth,10)),I=ce.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?ce.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),d=ce.globals.padHorizontal+(x-Q)/2),{x:d,y:g,yDivision:w,xDivision:x,barHeight:null!==(Y=ce.globals.seriesGroups)&&void 0!==Y&&Y.length?X/ce.globals.seriesGroups.length:X,barWidth:null!==(W=ce.globals.seriesGroups)&&void 0!==W&&W.length?Q/ce.globals.seriesGroups.length:Q,zeroH:I,zeroW:R}}},{key:"drawStackedBarPaths",value:function(d){for(var g,Y,x=d.indexes,w=d.barHeight,I=d.strokeWidth,R=d.zeroW,W=d.y,X=d.groupIndex,Q=d.seriesGroup,ce=d.yDivision,me=d.elSeries,Ee=this.w,De=W+(-1!==X?X*w:0),Ce=x.i,Re=x.j,G=0,re=0;re<this.groupCtx.prevXF.length;re++)G+=this.groupCtx.prevXF[re][Re];var te=Ce;if(Q&&(te=Q.indexOf(Ee.config.series[Ce].name)),te>0){var oe=R;this.groupCtx.prevXVal[te-1][Re]<0?oe=this.series[Ce][Re]>=0?this.groupCtx.prevX[te-1][Re]+G-2*(this.isReversed?G:0):this.groupCtx.prevX[te-1][Re]:this.groupCtx.prevXVal[te-1][Re]>=0&&(oe=this.series[Ce][Re]>=0?this.groupCtx.prevX[te-1][Re]:this.groupCtx.prevX[te-1][Re]-G+2*(this.isReversed?G:0)),g=oe}else g=R;var ye=this.barHelpers.getBarpaths({barYPosition:De,barHeight:w,x1:g,x2:Y=null===this.series[Ce][Re]?g:g+this.series[Ce][Re]/this.invertedYRatio-2*(this.isReversed?this.series[Ce][Re]/this.invertedYRatio:0),strokeWidth:I,series:this.series,realIndex:x.realIndex,seriesGroup:Q,i:Ce,j:Re,w:Ee});return this.barHelpers.barBackground({j:Re,i:Ce,y1:De,y2:w,elSeries:me}),W+=ce,{pathTo:ye.pathTo,pathFrom:ye.pathFrom,goalX:this.barHelpers.getGoalValues("x",R,null,Ce,Re),barYPosition:De,x:Y,y:W}}},{key:"drawStackedColumnPaths",value:function(d){var w,g=d.indexes,x=d.x,I=d.xDivision,R=d.barWidth,Y=d.zeroH,W=d.groupIndex,X=d.seriesGroup,Q=d.elSeries,ce=this.w,me=g.i,Ee=g.j,De=g.bc;if(ce.globals.isXNumeric){var Ce=ce.globals.seriesX[me][Ee];Ce||(Ce=0),x=(Ce-ce.globals.minX)/this.xRatio-R/2,ce.globals.seriesGroups.length&&(x=(Ce-ce.globals.minX)/this.xRatio-R/2*ce.globals.seriesGroups.length)}for(var Re,G=x+(-1!==W?W*R:0),re=0,te=0;te<this.groupCtx.prevYF.length;te++)re+=isNaN(this.groupCtx.prevYF[te][Ee])?0:this.groupCtx.prevYF[te][Ee];var oe=me;if(X&&(oe=X.indexOf(ce.config.series[me].name)),oe>0&&!ce.globals.isXNumeric||oe>0&&ce.globals.isXNumeric&&ce.globals.seriesX[me-1][Ee]===ce.globals.seriesX[me][Ee]){var ye,Fe,ht,yt=Math.min(this.yRatio.length+1,me+1);if(void 0!==this.groupCtx.prevY[oe-1]&&this.groupCtx.prevY[oe-1].length)for(var ii=1;ii<yt;ii++){var hi;if(!isNaN(null===(hi=this.groupCtx.prevY[oe-ii])||void 0===hi?void 0:hi[Ee])){ht=this.groupCtx.prevY[oe-ii][Ee];break}}for(var xi=1;xi<yt;xi++){var Pi,nn;if((null===(Pi=this.groupCtx.prevYVal[oe-xi])||void 0===Pi?void 0:Pi[Ee])<0){Fe=this.series[me][Ee]>=0?ht-re+2*(this.isReversed?re:0):ht;break}if((null===(nn=this.groupCtx.prevYVal[oe-xi])||void 0===nn?void 0:nn[Ee])>=0){Fe=this.series[me][Ee]>=0?ht:ht+re-2*(this.isReversed?re:0);break}}void 0===Fe&&(Fe=ce.globals.gridHeight),Re=null!==(ye=this.groupCtx.prevYF[0])&&void 0!==ye&&ye.every(function(Xn){return 0===Xn})&&this.groupCtx.prevYF.slice(1,oe).every(function(Xn){return Xn.every(function(Qn){return isNaN(Qn)})})?Y:Fe}else Re=Y;var Tn=this.barHelpers.getColumnPaths({barXPosition:G,barWidth:R,y1:Re,y2:w=this.series[me][Ee]?Re-this.series[me][Ee]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[me][Ee]/this.yRatio[this.yaxisIndex]:0):Re,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:X,realIndex:g.realIndex,i:me,j:Ee,w:ce});return this.barHelpers.barBackground({bc:De,j:Ee,i:me,x1:G,x2:R,elSeries:Q}),x+=I,{pathTo:Tn.pathTo,pathFrom:Tn.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,Y,me,Ee),barXPosition:G,x:ce.globals.isXNumeric?x-I:x,y:w}}}]),r}(),Nt=function(pe){Le(r,Zt);var i=ut(r);function r(){return Z(this,r),i.apply(this,arguments)}return we(r,[{key:"draw",value:function(d,g,x){var w=this,I=this.w,R=new rt(this.ctx),Y=I.globals.comboCharts?g:I.config.chart.type,W=new Wi(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=I.config.plotOptions.bar.horizontal;var X=new bi(this.ctx,I);d=X.getLogSeries(d),this.series=d,this.yRatio=X.getLogYRatios(this.yRatio),this.barHelpers.initVariables(d);for(var Q=R.group({class:"apexcharts-".concat(Y,"-series apexcharts-plot-series")}),ce=function(Ee){w.isBoxPlot="boxPlot"===I.config.chart.type||"boxPlot"===I.config.series[Ee].type;var De,Ce,Re,G,yt,ii,re=void 0,te=void 0,oe=[],ye=[],Fe=I.globals.comboCharts?x[Ee]:Ee,ht=R.group({class:"apexcharts-series",seriesName:Je.escapeString(I.globals.seriesNames[Fe]),rel:Ee+1,"data:realIndex":Fe});w.ctx.series.addCollapsedClassToSeries(ht,Fe),d[Ee].length>0&&(w.visibleI=w.visibleI+1),w.yRatio.length>1&&(w.yaxisIndex=Fe);var hi=w.barHelpers.initialPositions();te=hi.y,yt=hi.barHeight,Ce=hi.yDivision,G=hi.zeroW,De=hi.xDivision,Re=hi.zeroH,ye.push((re=hi.x)+(ii=hi.barWidth)/2);for(var xi=R.group({class:"apexcharts-datalabels","data:realIndex":Fe}),Pi=function(Tn){var Xn=w.barHelpers.getStrokeWidth(Ee,Tn,Fe),Qn=null,hr={indexes:{i:Ee,j:Tn,realIndex:Fe},x:re,y:te,strokeWidth:Xn,elSeries:ht};Qn=w.isHorizontal?w.drawHorizontalBoxPaths(He(He({},hr),{},{yDivision:Ce,barHeight:yt,zeroW:G})):w.drawVerticalBoxPaths(He(He({},hr),{},{xDivision:De,barWidth:ii,zeroH:Re})),te=Qn.y,re=Qn.x,Tn>0&&ye.push(re+ii/2),oe.push(te),Qn.pathTo.forEach(function(xr,Rr){var Br=!w.isBoxPlot&&w.candlestickOptions.wick.useFillColor?Qn.color[Rr]:I.globals.stroke.colors[Ee],Or=W.fillPath({seriesNumber:Fe,dataPointIndex:Tn,color:Qn.color[Rr],value:d[Ee][Tn]});w.renderSeries({realIndex:Fe,pathFill:Or,lineFill:Br,j:Tn,i:Ee,pathFrom:Qn.pathFrom,pathTo:xr,strokeWidth:Xn,elSeries:ht,x:re,y:te,series:d,barHeight:yt,barWidth:ii,elDataLabelsWrap:xi,visibleSeries:w.visibleI,type:I.config.chart.type})})},nn=0;nn<I.globals.dataPoints;nn++)Pi(nn);I.globals.seriesXvalues[Fe]=ye,I.globals.seriesYvalues[Fe]=oe,Q.add(ht)},me=0;me<d.length;me++)ce(me);return Q}},{key:"drawVerticalBoxPaths",value:function(d){var g=d.indexes,x=d.x,w=d.xDivision,I=d.barWidth,R=d.zeroH,Y=d.strokeWidth,W=this.w,X=new rt(this.ctx),Q=g.i,ce=g.j,me=!0,Ee=W.config.plotOptions.candlestick.colors.upward,De=W.config.plotOptions.candlestick.colors.downward,Ce="";this.isBoxPlot&&(Ce=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Re=this.yRatio[this.yaxisIndex],G=g.realIndex,re=this.getOHLCValue(G,ce),te=R,oe=R;re.o>re.c&&(me=!1);var ye=Math.min(re.o,re.c),Fe=Math.max(re.o,re.c),ht=re.m;W.globals.isXNumeric&&(x=(W.globals.seriesX[G][ce]-W.globals.minX)/this.xRatio-I/2);var yt=x+I*this.visibleI;null==this.series[Q][ce]?(ye=R,Fe=R):(ye=R-ye/Re,Fe=R-Fe/Re,te=R-re.h/Re,oe=R-re.l/Re,ht=R-re.m/Re);var ii=X.move(yt,R),hi=X.move(yt+I/2,ye);return W.globals.previousPaths.length>0&&(hi=this.getPreviousPath(G,ce,!0)),ii=this.isBoxPlot?[X.move(yt,ye)+X.line(yt+I/2,ye)+X.line(yt+I/2,te)+X.line(yt+I/4,te)+X.line(yt+I-I/4,te)+X.line(yt+I/2,te)+X.line(yt+I/2,ye)+X.line(yt+I,ye)+X.line(yt+I,ht)+X.line(yt,ht)+X.line(yt,ye+Y/2),X.move(yt,ht)+X.line(yt+I,ht)+X.line(yt+I,Fe)+X.line(yt+I/2,Fe)+X.line(yt+I/2,oe)+X.line(yt+I-I/4,oe)+X.line(yt+I/4,oe)+X.line(yt+I/2,oe)+X.line(yt+I/2,Fe)+X.line(yt,Fe)+X.line(yt,ht)+"z"]:[X.move(yt,Fe)+X.line(yt+I/2,Fe)+X.line(yt+I/2,te)+X.line(yt+I/2,Fe)+X.line(yt+I,Fe)+X.line(yt+I,ye)+X.line(yt+I/2,ye)+X.line(yt+I/2,oe)+X.line(yt+I/2,ye)+X.line(yt,ye)+X.line(yt,Fe-Y/2)],hi+=X.move(yt,ye),W.globals.isXNumeric||(x+=w),{pathTo:ii,pathFrom:hi,x,y:Fe,barXPosition:yt,color:this.isBoxPlot?Ce:me?[Ee]:[De]}}},{key:"drawHorizontalBoxPaths",value:function(d){var g=d.indexes,x=d.y,w=d.yDivision,I=d.barHeight,R=d.zeroW,Y=d.strokeWidth,W=this.w,X=new rt(this.ctx),Q=g.i,ce=g.j,me=this.boxOptions.colors.lower;this.isBoxPlot&&(me=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Ee=this.invertedYRatio,De=g.realIndex,Ce=this.getOHLCValue(De,ce),Re=R,G=R,re=Math.min(Ce.o,Ce.c),te=Math.max(Ce.o,Ce.c),oe=Ce.m;W.globals.isXNumeric&&(x=(W.globals.seriesX[De][ce]-W.globals.minX)/this.invertedXRatio-I/2);var ye=x+I*this.visibleI;null==this.series[Q][ce]?(re=R,te=R):(re=R+re/Ee,te=R+te/Ee,Re=R+Ce.h/Ee,G=R+Ce.l/Ee,oe=R+Ce.m/Ee);var Fe=X.move(R,ye),ht=X.move(re,ye+I/2);return W.globals.previousPaths.length>0&&(ht=this.getPreviousPath(De,ce,!0)),Fe=[X.move(re,ye)+X.line(re,ye+I/2)+X.line(Re,ye+I/2)+X.line(Re,ye+I/2-I/4)+X.line(Re,ye+I/2+I/4)+X.line(Re,ye+I/2)+X.line(re,ye+I/2)+X.line(re,ye+I)+X.line(oe,ye+I)+X.line(oe,ye)+X.line(re+Y/2,ye),X.move(oe,ye)+X.line(oe,ye+I)+X.line(te,ye+I)+X.line(te,ye+I/2)+X.line(G,ye+I/2)+X.line(G,ye+I-I/4)+X.line(G,ye+I/4)+X.line(G,ye+I/2)+X.line(te,ye+I/2)+X.line(te,ye)+X.line(oe,ye)+"z"],ht+=X.move(re,ye),W.globals.isXNumeric||(x+=w),{pathTo:Fe,pathFrom:ht,x:te,y:x,barYPosition:ye,color:me}}},{key:"getOHLCValue",value:function(d,g){var x=this.w;return{o:this.isBoxPlot?x.globals.seriesCandleH[d][g]:x.globals.seriesCandleO[d][g],h:this.isBoxPlot?x.globals.seriesCandleO[d][g]:x.globals.seriesCandleH[d][g],m:x.globals.seriesCandleM[d][g],l:this.isBoxPlot?x.globals.seriesCandleC[d][g]:x.globals.seriesCandleL[d][g],c:this.isBoxPlot?x.globals.seriesCandleL[d][g]:x.globals.seriesCandleC[d][g]}}}]),r}(),ae=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"checkColorRange",value:function(){var i=this.w,r=!1,d=i.config.plotOptions[i.config.chart.type];return d.colorScale.ranges.length>0&&d.colorScale.ranges.map(function(g,x){g.from<=0&&(r=!0)}),r}},{key:"getShadeColor",value:function(i,r,d,g){var x=this.w,w=1,I=x.config.plotOptions[i].shadeIntensity,R=this.determineColor(i,r,d);x.globals.hasNegs||g?w=x.config.plotOptions[i].reverseNegativeShade?R.percent<0?R.percent/100*(1.25*I):1.25*I*(1-R.percent/100):R.percent<=0?1-(1+R.percent/100)*I:(1-R.percent/100)*I:(w=1-R.percent/100,"treemap"===i&&(w=1.25*I*(1-R.percent/100)));var Y=R.color,W=new Je;return x.config.plotOptions[i].enableShades&&(Y=Je.hexToRgba(W.shadeColor("dark"===this.w.config.theme.mode?-1*w:w,R.color),x.config.fill.opacity)),{color:Y,colorProps:R}}},{key:"determineColor",value:function(i,r,d){var g=this.w,x=g.globals.series[r][d],w=g.config.plotOptions[i],I=w.colorScale.inverse?d:r;w.distributed&&"treemap"===g.config.chart.type&&(I=d);var R=g.globals.colors[I],Y=null,W=Math.min.apply(Math,tt(g.globals.series[r])),X=Math.max.apply(Math,tt(g.globals.series[r]));w.distributed||"heatmap"!==i||(W=g.globals.minY,X=g.globals.maxY),void 0!==w.colorScale.min&&(W=w.colorScale.min<g.globals.minY?w.colorScale.min:g.globals.minY,X=w.colorScale.max>g.globals.maxY?w.colorScale.max:g.globals.maxY);var Q=Math.abs(X)+Math.abs(W),ce=100*x/(0===Q?Q-1e-6:Q);return w.colorScale.ranges.length>0&&w.colorScale.ranges.map(function(me,Ee){if(x>=me.from&&x<=me.to){R=me.color,Y=me.foreColor?me.foreColor:null,W=me.from,X=me.to;var De=Math.abs(X)+Math.abs(W);ce=100*x/(0===De?De-1e-6:De)}}),{color:R,foreColor:Y,percent:ce}}},{key:"calculateDataLabels",value:function(i){var r=i.text,d=i.x,g=i.y,x=i.i,w=i.j,I=i.colorProps,R=i.fontSize,Y=this.w.config.dataLabels,W=new rt(this.ctx),X=new Gn(this.ctx),Q=null;if(Y.enabled){Q=W.group({class:"apexcharts-data-labels"});var me=Y.offsetY,Ee=d+Y.offsetX,De=g+parseFloat(Y.style.fontSize)/3+me;X.plotDataLabelsText({x:Ee,y:De,text:r,i:x,j:w,color:I.foreColor,parent:Q,fontSize:R,dataLabelsConfig:Y})}return Q}},{key:"addListeners",value:function(i){var r=new rt(this.ctx);i.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this,i)),i.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this,i)),i.node.addEventListener("mousedown",r.pathMouseDown.bind(this,i))}}]),pe}(),Ne=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.w=i.w,this.xRatio=r.xRatio,this.yRatio=r.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new ae(i),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return we(pe,[{key:"draw",value:function(i){var r=this.w,d=new rt(this.ctx),g=d.group({class:"apexcharts-heatmap"});g.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")"));var x=r.globals.gridWidth/r.globals.dataPoints,w=r.globals.gridHeight/r.globals.series.length,I=0,R=!1;this.negRange=this.helpers.checkColorRange();var Y=i.slice();r.config.yaxis[0].reversed&&(R=!0,Y.reverse());for(var W=R?0:Y.length-1;R?W<Y.length:W>=0;R?W++:W--){var X=d.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:Je.escapeString(r.globals.seriesNames[W]),rel:W+1,"data:realIndex":W});if(this.ctx.series.addCollapsedClassToSeries(X,W),r.config.chart.dropShadow.enabled){var Q=r.config.chart.dropShadow;new yi(this.ctx).dropShadow(X,Q,W)}for(var ce=0,me=r.config.plotOptions.heatmap.shadeIntensity,Ee=0;Ee<Y[W].length;Ee++){var De=this.helpers.getShadeColor(r.config.chart.type,W,Ee,this.negRange),Ce=De.color,Re=De.colorProps;"image"===r.config.fill.type&&(Ce=new Wi(this.ctx).fillPath({seriesNumber:W,dataPointIndex:Ee,opacity:r.globals.hasNegs?Re.percent<0?1-(1+Re.percent/100):me+Re.percent/100:Re.percent/100,patternID:Je.randomId(),width:r.config.fill.image.width?r.config.fill.image.width:x,height:r.config.fill.image.height?r.config.fill.image.height:w}));var re=d.drawRect(ce,I,x,w,this.rectRadius);if(re.attr({cx:ce,cy:I}),re.node.classList.add("apexcharts-heatmap-rect"),X.add(re),re.attr({fill:Ce,i:W,index:W,j:Ee,val:i[W][Ee],"stroke-width":this.strokeWidth,stroke:r.config.plotOptions.heatmap.useFillColorAsStroke?Ce:r.globals.stroke.colors[0],color:Ce}),this.helpers.addListeners(re),r.config.chart.animations.enabled&&!r.globals.dataChanged){var te=1;r.globals.resized||(te=r.config.chart.animations.speed),this.animateHeatMap(re,ce,I,x,w,te)}if(r.globals.dataChanged){var oe=1;if(this.dynamicAnim.enabled&&r.globals.shouldAnimate){oe=this.dynamicAnim.speed;var ye=r.globals.previousPaths[W]&&r.globals.previousPaths[W][Ee]&&r.globals.previousPaths[W][Ee].color;ye||(ye="rgba(255, 255, 255, 0)"),this.animateHeatColor(re,Je.isColorHex(ye)?ye:Je.rgb2hex(ye),Je.isColorHex(Ce)?Ce:Je.rgb2hex(Ce),oe)}}var Fe=(0,r.config.dataLabels.formatter)(r.globals.series[W][Ee],{value:r.globals.series[W][Ee],seriesIndex:W,dataPointIndex:Ee,w:r}),ht=this.helpers.calculateDataLabels({text:Fe,x:ce+x/2,y:I+w/2,i:W,j:Ee,colorProps:Re,series:Y});null!==ht&&X.add(ht),ce+=x}I+=w,g.add(X)}var yt=r.globals.yAxisScale[0].result.slice();return r.config.yaxis[0].reversed?yt.unshift(""):yt.push(""),r.globals.yAxisScale[0].result=yt,g}},{key:"animateHeatMap",value:function(i,r,d,g,x,w){var I=new Jt(this.ctx);I.animateRect(i,{x:r+g/2,y:d+x/2,width:0,height:0},{x:r,y:d,width:g,height:x},w,function(){I.animationCompleted(i)})}},{key:"animateHeatColor",value:function(i,r,d,g){i.attr({fill:r}).animate(g).attr({fill:d})}}]),pe}(),et=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"drawYAxisTexts",value:function(i,r,d,g){var x=this.w,w=x.config.yaxis[0],I=x.globals.yLabelFormatters[0];return new rt(this.ctx).drawText({x:i+w.labels.offsetX,y:r+w.labels.offsetY,text:I(g,d),textAnchor:"middle",fontSize:w.labels.style.fontSize,fontFamily:w.labels.style.fontFamily,foreColor:Array.isArray(w.labels.style.colors)?w.labels.style.colors[d]:w.labels.style.colors})}}]),pe}(),Vt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w;var r=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==r.globals.stroke.colors?r.globals.stroke.colors:r.globals.colors,this.defaultSize=Math.min(r.globals.gridWidth,r.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=r.globals.gridWidth/2,this.fullAngle="radialBar"===r.config.chart.type?360:Math.abs(r.config.plotOptions.pie.endAngle-r.config.plotOptions.pie.startAngle),this.initialAngle=r.config.plotOptions.pie.startAngle%this.fullAngle,r.globals.radialSize=this.defaultSize/2.05-r.config.stroke.width-(r.config.chart.sparkline.enabled?0:r.config.chart.dropShadow.blur),this.donutSize=r.globals.radialSize*parseInt(r.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return we(pe,[{key:"draw",value:function(i){var r=this,d=this.w,g=new rt(this.ctx);if(this.ret=g.group({class:"apexcharts-pie"}),d.globals.noData)return this.ret;for(var x=0,w=0;w<i.length;w++)x+=Je.negToZero(i[w]);var I=[],R=g.group();0===x&&(x=1e-5),i.forEach(function(ye){r.maxY=Math.max(r.maxY,ye)}),d.config.yaxis[0].max&&(this.maxY=d.config.yaxis[0].max),"back"===d.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var Y=0;Y<i.length;Y++){var W=this.fullAngle*Je.negToZero(i[Y])/x;I.push(W),"polarArea"===this.chartType?(I[Y]=this.fullAngle/i.length,this.sliceSizes.push(d.globals.radialSize*i[Y]/this.maxY)):this.sliceSizes.push(d.globals.radialSize)}if(d.globals.dataChanged){for(var X,Q=0,ce=0;ce<d.globals.previousPaths.length;ce++)Q+=Je.negToZero(d.globals.previousPaths[ce]);for(var me=0;me<d.globals.previousPaths.length;me++)X=this.fullAngle*Je.negToZero(d.globals.previousPaths[me])/Q,this.prevSectorAngleArr.push(X)}this.donutSize<0&&(this.donutSize=0);var Ee=d.config.plotOptions.pie.customScale,Re=d.globals.gridWidth/2-d.globals.gridWidth/2*Ee,G=d.globals.gridHeight/2-d.globals.gridHeight/2*Ee;if("donut"===this.chartType){var re=g.drawCircle(this.donutSize);re.attr({cx:this.centerX,cy:this.centerY,fill:d.config.plotOptions.pie.donut.background?d.config.plotOptions.pie.donut.background:"transparent"}),R.add(re)}var te=this.drawArcs(I,i);if(this.sliceLabels.forEach(function(ye){te.add(ye)}),R.attr({transform:"translate(".concat(Re,", ").concat(G,") scale(").concat(Ee,")")}),R.add(te),this.ret.add(R),this.donutDataLabels.show){var oe=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:Re,translateY:G});this.ret.add(oe)}return"front"===d.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(i,r){var d=this.w,g=new yi(this.ctx),x=new rt(this.ctx),w=new Wi(this.ctx),I=x.group({class:"apexcharts-slices"}),R=this.initialAngle,Y=this.initialAngle,W=this.initialAngle,X=this.initialAngle;this.strokeWidth=d.config.stroke.show?d.config.stroke.width:0;for(var Q=0;Q<i.length;Q++){var ce=x.group({class:"apexcharts-series apexcharts-pie-series",seriesName:Je.escapeString(d.globals.seriesNames[Q]),rel:Q+1,"data:realIndex":Q});I.add(ce),W=(R=W)+i[Q],X=(Y=X)+this.prevSectorAngleArr[Q];var me=W<R?this.fullAngle+W-R:W-R,Ee=w.fillPath({seriesNumber:Q,size:this.sliceSizes[Q],value:r[Q]}),De=this.getChangedPath(Y,X),Ce=x.drawPath({d:De,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[Q]:this.lineColorArr,strokeWidth:0,fill:Ee,fillOpacity:d.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(Q)});Ce.attr({index:0,j:Q}),g.setSelectionFilter(Ce,0,Q),d.config.chart.dropShadow.enabled&&g.dropShadow(Ce,d.config.chart.dropShadow,Q),this.addListeners(Ce,this.donutDataLabels),rt.setAttrs(Ce.node,{"data:angle":me,"data:startAngle":R,"data:strokeWidth":this.strokeWidth,"data:value":r[Q]});var G={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?G=Je.polarToCartesian(this.centerX,this.centerY,d.globals.radialSize/1.25+d.config.plotOptions.pie.dataLabels.offset,(R+me/2)%this.fullAngle):"donut"===this.chartType&&(G=Je.polarToCartesian(this.centerX,this.centerY,(d.globals.radialSize+this.donutSize)/2+d.config.plotOptions.pie.dataLabels.offset,(R+me/2)%this.fullAngle)),ce.add(Ce);var re=0;if(!this.initialAnim||d.globals.resized||d.globals.dataChanged?this.animBeginArr.push(0):(0==(re=me/this.fullAngle*d.config.chart.animations.speed)&&(re=1),this.animDur=re+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(Ce,this.dynamicAnim&&d.globals.dataChanged?{size:this.sliceSizes[Q],endAngle:W,startAngle:R,prevStartAngle:Y,prevEndAngle:X,animateStartingPos:!0,i:Q,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:d.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[Q],endAngle:W,startAngle:R,i:Q,totalItems:i.length-1,animBeginArr:this.animBeginArr,dur:re}),d.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&Ce.click(this.pieClicked.bind(this,Q)),void 0!==d.globals.selectedDataPoints[0]&&d.globals.selectedDataPoints[0].indexOf(Q)>-1&&this.pieClicked(Q),d.config.dataLabels.enabled){var te=G.x,oe=G.y,ye=100*me/this.fullAngle+"%";if(0!==me&&d.config.plotOptions.pie.dataLabels.minAngleToShowLabel<i[Q]){var Fe=d.config.dataLabels.formatter;void 0!==Fe&&(ye=Fe(d.globals.seriesPercent[Q][0],{seriesIndex:Q,w:d}));var ht=d.globals.dataLabels.style.colors[Q],yt=x.group({class:"apexcharts-datalabels"}),ii=x.drawText({x:te,y:oe,text:ye,textAnchor:"middle",fontSize:d.config.dataLabels.style.fontSize,fontFamily:d.config.dataLabels.style.fontFamily,fontWeight:d.config.dataLabels.style.fontWeight,foreColor:ht});yt.add(ii),d.config.dataLabels.dropShadow.enabled&&g.dropShadow(ii,d.config.dataLabels.dropShadow),ii.node.classList.add("apexcharts-pie-label"),d.config.chart.animations.animate&&!1===d.globals.resized&&(ii.node.classList.add("apexcharts-pie-label-delay"),ii.node.style.animationDelay=d.config.chart.animations.speed/940+"s"),this.sliceLabels.push(yt)}}}return I}},{key:"addListeners",value:function(i,r){var d=new rt(this.ctx);i.node.addEventListener("mouseenter",d.pathMouseEnter.bind(this,i)),i.node.addEventListener("mouseleave",d.pathMouseLeave.bind(this,i)),i.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,i.node,r)),i.node.addEventListener("mousedown",d.pathMouseDown.bind(this,i)),this.donutDataLabels.total.showAlways||(i.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,i.node,r)),i.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,i.node,r)))}},{key:"animatePaths",value:function(i,r){var g=r.endAngle<r.startAngle?this.fullAngle+r.endAngle-r.startAngle:r.endAngle-r.startAngle,x=g,w=r.startAngle,I=r.startAngle;void 0!==r.prevStartAngle&&void 0!==r.prevEndAngle&&(w=r.prevEndAngle,x=r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle),r.i===this.w.config.series.length-1&&(g+I>this.fullAngle?r.endAngle=r.endAngle-(g+I):g+I<this.fullAngle&&(r.endAngle=r.endAngle+(this.fullAngle-(g+I)))),g===this.fullAngle&&(g=this.fullAngle-.01),this.animateArc(i,w,I,g,x,r)}},{key:"animateArc",value:function(i,r,d,g,x,w){var I,R=this,Y=this.w,W=new Jt(this.ctx),X=w.size;(isNaN(r)||isNaN(x))&&(r=d,x=g,w.dur=0);var Q=g,ce=d,me=r<d?this.fullAngle+r-d:r-d;Y.globals.dataChanged&&w.shouldSetPrevPaths&&w.prevEndAngle&&(I=R.getPiePath({me:R,startAngle:w.prevStartAngle,angle:w.prevEndAngle<w.prevStartAngle?this.fullAngle+w.prevEndAngle-w.prevStartAngle:w.prevEndAngle-w.prevStartAngle,size:X}),i.attr({d:I})),0!==w.dur?i.animate(w.dur,Y.globals.easing,w.animBeginArr[w.i]).afterAll(function(){"pie"!==R.chartType&&"donut"!==R.chartType&&"polarArea"!==R.chartType||this.animate(Y.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":R.strokeWidth}),w.i===Y.config.series.length-1&&W.animationCompleted(i)}).during(function(Ee){Q=me+(g-me)*Ee,w.animateStartingPos&&(Q=x+(g-x)*Ee,ce=r-x+(d-(r-x))*Ee),I=R.getPiePath({me:R,startAngle:ce,angle:Q,size:X}),i.node.setAttribute("data:pathOrig",I),i.attr({d:I})}):(I=R.getPiePath({me:R,startAngle:ce,angle:g,size:X}),w.isTrack||(Y.globals.animationEnded=!0),i.node.setAttribute("data:pathOrig",I),i.attr({d:I,"stroke-width":R.strokeWidth}))}},{key:"pieClicked",value:function(i){var r,d=this.w,g=this,x=g.sliceSizes[i]+(d.config.plotOptions.pie.expandOnClick?4:0),w=d.globals.dom.Paper.select(".apexcharts-".concat(g.chartType.toLowerCase(),"-slice-").concat(i)).members[0];if("true"!==w.attr("data:pieClicked")){var I=d.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(I,function(X){X.setAttribute("data:pieClicked","false");var Q=X.getAttribute("data:pathOrig");Q&&X.setAttribute("d",Q)}),w.attr("data:pieClicked","true");var R=parseInt(w.attr("data:startAngle"),10),Y=parseInt(w.attr("data:angle"),10);r=g.getPiePath({me:g,startAngle:R,angle:Y,size:x}),360!==Y&&w.plot(r)}else{w.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(w.node,this.donutDataLabels);var W=w.attr("data:pathOrig");w.attr({d:W})}}},{key:"getChangedPath",value:function(i,r){var d="";return this.dynamicAnim&&this.w.globals.dataChanged&&(d=this.getPiePath({me:this,startAngle:i,angle:r-i,size:this.size})),d}},{key:"getPiePath",value:function(i){var r,d=i.me,g=i.startAngle,x=i.angle,w=i.size,I=new rt(this.ctx),R=g,Y=Math.PI*(R-90)/180,W=x+g;Math.ceil(W)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(W=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(W)>this.fullAngle&&(W-=this.fullAngle);var X=Math.PI*(W-90)/180,Q=d.centerX+w*Math.cos(Y),ce=d.centerY+w*Math.sin(Y),me=d.centerX+w*Math.cos(X),Ee=d.centerY+w*Math.sin(X),De=Je.polarToCartesian(d.centerX,d.centerY,d.donutSize,W),Ce=Je.polarToCartesian(d.centerX,d.centerY,d.donutSize,R),Re=x>180?1:0,G=["M",Q,ce,"A",w,w,0,Re,1,me,Ee];return r="donut"===d.chartType?[].concat(G,["L",De.x,De.y,"A",d.donutSize,d.donutSize,0,Re,0,Ce.x,Ce.y,"L",Q,ce,"z"]).join(" "):"pie"===d.chartType||"polarArea"===d.chartType?[].concat(G,["L",d.centerX,d.centerY,"L",Q,ce]).join(" "):[].concat(G).join(" "),I.roundPathCorners(r,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(i){var r=this.w,d=new $i(this.ctx),g=new rt(this.ctx),x=new et(this.ctx),w=g.group(),I=g.group(),R=d.niceScale(0,Math.ceil(this.maxY),0),Y=R.result.reverse(),W=R.result.length;this.maxY=R.niceMax;for(var X=r.globals.radialSize,Q=X/(W-1),ce=0;ce<W-1;ce++){var me=g.drawCircle(X);if(me.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":r.config.plotOptions.polarArea.rings.strokeWidth,stroke:r.config.plotOptions.polarArea.rings.strokeColor}),r.config.yaxis[0].show){var Ee=x.drawYAxisTexts(this.centerX,this.centerY-X+parseInt(r.config.yaxis[0].labels.style.fontSize,10)/2,ce,Y[ce]);I.add(Ee)}w.add(me),X-=Q}this.drawSpokes(i),i.add(w),i.add(I)}},{key:"renderInnerDataLabels",value:function(i,r){var d=this.w,g=new rt(this.ctx),x=g.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(r.translateX?r.translateX:0,", ").concat(r.translateY?r.translateY:0,") scale(").concat(d.config.plotOptions.pie.customScale,")")}),w=i.total.show;x.node.style.opacity=r.opacity;var I,R,Y=r.centerX,W=r.centerY;I=void 0===i.name.color?d.globals.colors[0]:i.name.color;var X=i.name.fontSize,Q=i.name.fontFamily,ce=i.name.fontWeight;R=void 0===i.value.color?d.config.chart.foreColor:i.value.color;var me=i.value.formatter,Ee="",De="";if(w?(I=i.total.color,X=i.total.fontSize,Q=i.total.fontFamily,ce=i.total.fontWeight,De=i.total.label,Ee=i.total.formatter(d)):1===d.globals.series.length&&(Ee=me(d.globals.series[0],d),De=d.globals.seriesNames[0]),De&&(De=i.name.formatter(De,i.total.show,d)),i.name.show){var Ce=g.drawText({x:Y,y:W+parseFloat(i.name.offsetY),text:De,textAnchor:"middle",foreColor:I,fontSize:X,fontWeight:ce,fontFamily:Q});Ce.node.classList.add("apexcharts-datalabel-label"),x.add(Ce)}if(i.value.show){var Re=i.name.show?parseFloat(i.value.offsetY)+16:i.value.offsetY,G=g.drawText({x:Y,y:W+Re,text:Ee,textAnchor:"middle",foreColor:R,fontWeight:i.value.fontWeight,fontSize:i.value.fontSize,fontFamily:i.value.fontFamily});G.node.classList.add("apexcharts-datalabel-value"),x.add(G)}return x}},{key:"printInnerLabels",value:function(i,r,d,g){var x,w=this.w;g?x=void 0===i.name.color?w.globals.colors[parseInt(g.parentNode.getAttribute("rel"),10)-1]:i.name.color:w.globals.series.length>1&&i.total.show&&(x=i.total.color);var I=w.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),R=w.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");d=(0,i.value.formatter)(d,w),g||"function"!=typeof i.total.formatter||(d=i.total.formatter(w)),r=i.name.formatter(r,r===i.total.label,w),null!==I&&(I.textContent=r),null!==R&&(R.textContent=d),null!==I&&(I.style.fill=x)}},{key:"printDataLabelsInner",value:function(i,r){var d=this.w,g=i.getAttribute("data:value"),x=d.globals.seriesNames[parseInt(i.parentNode.getAttribute("rel"),10)-1];d.globals.series.length>1&&this.printInnerLabels(r,x,g,i);var w=d.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==w&&(w.style.opacity=1)}},{key:"drawSpokes",value:function(i){var r=this,d=this.w,g=new rt(this.ctx),x=d.config.plotOptions.polarArea.spokes;if(0!==x.strokeWidth){for(var w=[],I=360/d.globals.series.length,R=0;R<d.globals.series.length;R++)w.push(Je.polarToCartesian(this.centerX,this.centerY,d.globals.radialSize,d.config.plotOptions.pie.startAngle+I*R));w.forEach(function(Y,W){var X=g.drawLine(Y.x,Y.y,r.centerX,r.centerY,Array.isArray(x.connectorColors)?x.connectorColors[W]:x.connectorColors);i.add(X)})}}},{key:"revertDataLabelsInner",value:function(i,r,d){var g=this,x=this.w,w=x.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),I=!1,R=x.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),Y=function(Q){var ce=Q.makeSliceOut,me=Q.printLabel;Array.prototype.forEach.call(R,function(Ee){"true"===Ee.getAttribute("data:pieClicked")&&(ce&&(I=!0),me&&g.printDataLabelsInner(Ee,r))})};if(Y({makeSliceOut:!0,printLabel:!1}),r.total.show&&x.globals.series.length>1)I&&!r.total.showAlways?Y({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(r,r.total.label,r.total.formatter(x));else if(Y({makeSliceOut:!1,printLabel:!0}),!I)if(x.globals.selectedDataPoints.length&&x.globals.series.length>1)if(x.globals.selectedDataPoints[0].length>0){var W=x.globals.selectedDataPoints[0],X=x.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(W));this.printDataLabelsInner(X,r)}else w&&x.globals.selectedDataPoints.length&&0===x.globals.selectedDataPoints[0].length&&(w.style.opacity=0);else w&&x.globals.series.length>1&&(w.style.opacity=0)}}]),pe}(),$t=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var r=this.w;this.graphics=new rt(this.ctx),this.lineColorArr=void 0!==r.globals.stroke.colors?r.globals.stroke.colors:r.globals.colors,this.defaultSize=r.globals.svgHeight<r.globals.svgWidth?r.globals.gridHeight+1.5*r.globals.goldenPadding:r.globals.gridWidth,this.isLog=r.config.yaxis[0].logarithmic,this.coreUtils=new bi(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(r.globals.maxY,0):r.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):r.globals.minY,this.polygons=r.config.plotOptions.radar.polygons,this.strokeWidth=r.config.stroke.show?r.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-r.config.chart.dropShadow.blur,r.config.xaxis.labels.show&&(this.size=this.size-r.globals.xAxisLabelsWidth/1.75),void 0!==r.config.plotOptions.radar.size&&(this.size=r.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return we(pe,[{key:"draw",value:function(i){var r=this,d=this.w,g=new Wi(this.ctx),x=[],w=new Gn(this.ctx);i.length&&(this.dataPointsLen=i[d.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var W=d.globals.gridHeight/2+d.config.plotOptions.radar.offsetY,X=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(d.globals.gridWidth/2+d.config.plotOptions.radar.offsetX||0,", ").concat(W||0,")")}),Q=[],ce=null,me=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),i.forEach(function(De,Ce){var Re=De.length===d.globals.dataPoints,G=r.graphics.group().attr({class:"apexcharts-series","data:longestSeries":Re,seriesName:Je.escapeString(d.globals.seriesNames[Ce]),rel:Ce+1,"data:realIndex":Ce});r.dataRadiusOfPercent[Ce]=[],r.dataRadius[Ce]=[],r.angleArr[Ce]=[],De.forEach(function(xi,Pi){var nn=Math.abs(r.maxValue-r.minValue);xi+=Math.abs(r.minValue),r.isLog&&(xi=r.coreUtils.getLogVal(xi,0)),r.dataRadiusOfPercent[Ce][Pi]=xi/nn,r.dataRadius[Ce][Pi]=r.dataRadiusOfPercent[Ce][Pi]*r.size,r.angleArr[Ce][Pi]=Pi*r.disAngle}),Q=r.getDataPointsPos(r.dataRadius[Ce],r.angleArr[Ce]);var re=r.createPaths(Q,{x:0,y:0});ce=r.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),me=r.graphics.group({class:"apexcharts-datalabels","data:realIndex":Ce}),d.globals.delayedElements.push({el:ce.node,index:Ce});var te={i:Ce,realIndex:Ce,animationDelay:Ce,initialSpeed:d.config.chart.animations.speed,dataChangeSpeed:d.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:d.globals.stroke.colors[Ce],strokeLineCap:d.config.stroke.lineCap},oe=null;d.globals.previousPaths.length>0&&(oe=r.getPreviousPath(Ce));for(var ye=0;ye<re.linePathsTo.length;ye++){var Fe=r.graphics.renderPaths(He(He({},te),{},{pathFrom:null===oe?re.linePathsFrom[ye]:oe,pathTo:re.linePathsTo[ye],strokeWidth:Array.isArray(r.strokeWidth)?r.strokeWidth[Ce]:r.strokeWidth,fill:"none",drawShadow:!1}));G.add(Fe);var ht=g.fillPath({seriesNumber:Ce}),yt=r.graphics.renderPaths(He(He({},te),{},{pathFrom:null===oe?re.areaPathsFrom[ye]:oe,pathTo:re.areaPathsTo[ye],strokeWidth:0,fill:ht,drawShadow:!1}));d.config.chart.dropShadow.enabled&&new yi(r.ctx).dropShadow(yt,Object.assign({},d.config.chart.dropShadow,{noUserSpaceOnUse:!0}),Ce),G.add(yt)}De.forEach(function(xi,Pi){var nn=new _n(r.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:Ce,dataPointIndex:Pi}),Tn=r.graphics.drawMarker(Q[Pi].x,Q[Pi].y,nn);Tn.attr("rel",Pi),Tn.attr("j",Pi),Tn.attr("index",Ce),Tn.node.setAttribute("default-marker-size",nn.pSize);var Xn=r.graphics.group({class:"apexcharts-series-markers"});Xn&&Xn.add(Tn),ce.add(Xn),G.add(ce);var Qn=d.config.dataLabels;if(Qn.enabled){var hr=Qn.formatter(d.globals.series[Ce][Pi],{seriesIndex:Ce,dataPointIndex:Pi,w:d});w.plotDataLabelsText({x:Q[Pi].x,y:Q[Pi].y,text:hr,textAnchor:"middle",i:Ce,j:Ce,parent:me,offsetCorrection:!1,dataLabelsConfig:He({},Qn)})}G.add(me)}),x.push(G)}),this.drawPolygons({parent:X}),d.config.xaxis.labels.show){var Ee=this.drawXAxisTexts();X.add(Ee)}return x.forEach(function(De){X.add(De)}),X.add(this.yaxisLabels),X}},{key:"drawPolygons",value:function(i){for(var r=this,d=this.w,g=i.parent,x=new et(this.ctx),w=d.globals.yAxisScale[0].result.reverse(),I=w.length,R=[],Y=this.size/(I-1),W=0;W<I;W++)R[W]=Y*W;R.reverse();var X=[],Q=[];R.forEach(function(ce,me){var Ee=Je.getPolygonPos(ce,r.dataPointsLen),De="";Ee.forEach(function(Ce,Re){if(0===me){var G=r.graphics.drawLine(Ce.x,Ce.y,0,0,Array.isArray(r.polygons.connectorColors)?r.polygons.connectorColors[Re]:r.polygons.connectorColors);Q.push(G)}0===Re&&r.yaxisLabelsTextsPos.push({x:Ce.x,y:Ce.y}),De+=Ce.x+","+Ce.y+" "}),X.push(De)}),X.forEach(function(ce,me){var Ee=r.polygons.strokeColors,De=r.polygons.strokeWidth,Ce=r.graphics.drawPolygon(ce,Array.isArray(Ee)?Ee[me]:Ee,Array.isArray(De)?De[me]:De,d.globals.radarPolygons.fill.colors[me]);g.add(Ce)}),Q.forEach(function(ce){g.add(ce)}),d.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ce,me){var Ee=x.drawYAxisTexts(ce.x,ce.y,me,w[me]);r.yaxisLabels.add(Ee)})}},{key:"drawXAxisTexts",value:function(){var i=this,r=this.w,d=r.config.xaxis.labels,g=this.graphics.group({class:"apexcharts-xaxis"}),x=Je.getPolygonPos(this.size,this.dataPointsLen);return r.globals.labels.forEach(function(w,I){var R=r.config.xaxis.labels.formatter,Y=new Gn(i.ctx);if(x[I]){var W=i.getTextPos(x[I],i.size),X=R(w,{seriesIndex:-1,dataPointIndex:I,w:r});Y.plotDataLabelsText({x:W.newX,y:W.newY,text:X,textAnchor:W.textAnchor,i:I,j:I,parent:g,color:Array.isArray(d.style.colors)&&d.style.colors[I]?d.style.colors[I]:"#a8a8a8",dataLabelsConfig:He({textAnchor:W.textAnchor,dropShadow:{enabled:!1}},d),offsetCorrection:!1})}}),g}},{key:"createPaths",value:function(i,r){var d=this,g=[],x=[],w=[],I=[];if(i.length){x=[this.graphics.move(r.x,r.y)],I=[this.graphics.move(r.x,r.y)];var R=this.graphics.move(i[0].x,i[0].y),Y=this.graphics.move(i[0].x,i[0].y);i.forEach(function(W,X){R+=d.graphics.line(W.x,W.y),Y+=d.graphics.line(W.x,W.y),X===i.length-1&&(R+="Z",Y+="Z")}),g.push(R),w.push(Y)}return{linePathsFrom:x,linePathsTo:g,areaPathsFrom:I,areaPathsTo:w}}},{key:"getTextPos",value:function(i,r){var d="middle",g=i.x,x=i.y;return Math.abs(i.x)>=10?i.x>0?(d="start",g+=10):i.x<0&&(d="end",g-=10):d="middle",Math.abs(i.y)>=r-10&&(i.y<0?x-=10:i.y>0&&(x+=10)),{textAnchor:d,newX:g,newY:x}}},{key:"getPreviousPath",value:function(i){for(var r=this.w,d=null,g=0;g<r.globals.previousPaths.length;g++){var x=r.globals.previousPaths[g];x.paths.length>0&&parseInt(x.realIndex,10)===parseInt(i,10)&&void 0!==r.globals.previousPaths[g].paths[0]&&(d=r.globals.previousPaths[g].paths[0].d)}return d}},{key:"getDataPointsPos",value:function(i,r){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;i=i||[],r=r||[];for(var g=[],x=0;x<d;x++){var w={};w.x=i[x]*Math.sin(r[x]),w.y=-i[x]*Math.cos(r[x]),g.push(w)}return g}}]),pe}(),Hi=function(pe){Le(r,Vt);var i=ut(r);function r(d){var g;Z(this,r),(g=i.call(this,d)).ctx=d,g.w=d.w,g.animBeginArr=[0],g.animDur=0;var x=g.w;return g.startAngle=x.config.plotOptions.radialBar.startAngle,g.endAngle=x.config.plotOptions.radialBar.endAngle,g.totalAngle=Math.abs(x.config.plotOptions.radialBar.endAngle-x.config.plotOptions.radialBar.startAngle),g.trackStartAngle=x.config.plotOptions.radialBar.track.startAngle,g.trackEndAngle=x.config.plotOptions.radialBar.track.endAngle,g.barLabels=g.w.config.plotOptions.radialBar.barLabels,g.donutDataLabels=g.w.config.plotOptions.radialBar.dataLabels,g.radialDataLabels=g.donutDataLabels,g.trackStartAngle||(g.trackStartAngle=g.startAngle),g.trackEndAngle||(g.trackEndAngle=g.endAngle),360===g.endAngle&&(g.endAngle=359.99),g.margin=parseInt(x.config.plotOptions.radialBar.track.margin,10),g.onBarLabelClick=g.onBarLabelClick.bind(We(g)),g}return we(r,[{key:"draw",value:function(d){var g=this.w,x=new rt(this.ctx),w=x.group({class:"apexcharts-radialbar"});if(g.globals.noData)return w;var I=x.group(),R=this.defaultSize/2,Y=g.globals.gridWidth/2,W=this.defaultSize/2.05;g.config.chart.sparkline.enabled||(W=W-g.config.stroke.width-g.config.chart.dropShadow.blur);var X=g.globals.fill.colors;if(g.config.plotOptions.radialBar.track.show){var Q=this.drawTracks({size:W,centerX:Y,centerY:R,colorArr:X,series:d});I.add(Q)}var ce=this.drawArcs({size:W,centerX:Y,centerY:R,colorArr:X,series:d}),me=360;g.config.plotOptions.radialBar.startAngle<0&&(me=this.totalAngle);var Ee=(360-me)/360;if(g.globals.radialSize=W-W*Ee,this.radialDataLabels.value.show){var De=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);g.globals.radialSize+=De*Ee}return I.add(ce.g),"front"===g.config.plotOptions.radialBar.hollow.position&&(ce.g.add(ce.elHollow),ce.dataLabels&&ce.g.add(ce.dataLabels)),w.add(I),w}},{key:"drawTracks",value:function(d){var g=this.w,x=new rt(this.ctx),w=x.group({class:"apexcharts-tracks"}),I=new yi(this.ctx),R=new Wi(this.ctx),Y=this.getStrokeWidth(d);d.size=d.size-Y/2;for(var W=0;W<d.series.length;W++){var X=x.group({class:"apexcharts-radialbar-track apexcharts-track"});w.add(X),X.attr({rel:W+1}),d.size=d.size-Y-this.margin;var Q=g.config.plotOptions.radialBar.track,ce=R.fillPath({seriesNumber:0,size:d.size,fillColors:Array.isArray(Q.background)?Q.background[W]:Q.background,solid:!0}),me=this.trackStartAngle,Ee=this.trackEndAngle;Math.abs(Ee)+Math.abs(me)>=360&&(Ee=360-Math.abs(this.startAngle)-.1);var De=x.drawPath({d:"",stroke:ce,strokeWidth:Y*parseInt(Q.strokeWidth,10)/100,fill:"none",strokeOpacity:Q.opacity,classes:"apexcharts-radialbar-area"});Q.dropShadow.enabled&&I.dropShadow(De,Q.dropShadow),X.add(De),De.attr("id","apexcharts-radialbarTrack-"+W),this.animatePaths(De,{centerX:d.centerX,centerY:d.centerY,endAngle:Ee,startAngle:me,size:d.size,i:W,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:g.globals.easing})}return w}},{key:"drawArcs",value:function(d){var g=this.w,x=new rt(this.ctx),w=new Wi(this.ctx),I=new yi(this.ctx),R=x.group(),Y=this.getStrokeWidth(d);d.size=d.size-Y/2;var W=g.config.plotOptions.radialBar.hollow.background,X=d.size-Y*d.series.length-this.margin*d.series.length-Y*parseInt(g.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,Q=X-g.config.plotOptions.radialBar.hollow.margin;void 0!==g.config.plotOptions.radialBar.hollow.image&&(W=this.drawHollowImage(d,R,X,W));var ce=this.drawHollow({size:Q,centerX:d.centerX,centerY:d.centerY,fill:W||"transparent"});g.config.plotOptions.radialBar.hollow.dropShadow.enabled&&I.dropShadow(ce,g.config.plotOptions.radialBar.hollow.dropShadow);var Ee=1;!this.radialDataLabels.total.show&&g.globals.series.length>1&&(Ee=0);var De=null;this.radialDataLabels.show&&(De=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:X,centerX:d.centerX,centerY:d.centerY,opacity:Ee})),"back"===g.config.plotOptions.radialBar.hollow.position&&(R.add(ce),De&&R.add(De));var Ce=!1;g.config.plotOptions.radialBar.inverseOrder&&(Ce=!0);for(var Re=Ce?d.series.length-1:0;Ce?Re>=0:Re<d.series.length;Ce?Re--:Re++){var G=x.group({class:"apexcharts-series apexcharts-radial-series",seriesName:Je.escapeString(g.globals.seriesNames[Re])});R.add(G),G.attr({rel:Re+1,"data:realIndex":Re}),this.ctx.series.addCollapsedClassToSeries(G,Re),d.size=d.size-Y-this.margin;var re=w.fillPath({seriesNumber:Re,size:d.size,value:d.series[Re]}),te=this.startAngle,oe=void 0,ye=Je.negToZero(d.series[Re]>100?100:d.series[Re])/100,Fe=Math.round(this.totalAngle*ye)+this.startAngle,ht=void 0;g.globals.dataChanged&&(oe=this.startAngle,ht=Math.round(this.totalAngle*Je.negToZero(g.globals.previousPaths[Re])/100)+oe),Math.abs(Fe)+Math.abs(te)>=360&&(Fe-=.01),Math.abs(ht)+Math.abs(oe)>=360&&(ht-=.01);var yt=Fe-te,ii=Array.isArray(g.config.stroke.dashArray)?g.config.stroke.dashArray[Re]:g.config.stroke.dashArray,hi=x.drawPath({d:"",stroke:re,strokeWidth:Y,fill:"none",fillOpacity:g.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Re,strokeDashArray:ii});if(rt.setAttrs(hi.node,{"data:angle":yt,"data:value":d.series[Re]}),g.config.chart.dropShadow.enabled&&I.dropShadow(hi,g.config.chart.dropShadow,Re),I.setSelectionFilter(hi,0,Re),this.addListeners(hi,this.radialDataLabels),G.add(hi),hi.attr({index:0,j:Re}),this.barLabels.enabled){var Pi=Je.polarToCartesian(d.centerX,d.centerY,d.size,te),nn=this.barLabels.formatter(g.globals.seriesNames[Re],{seriesIndex:Re,w:g}),Tn=["apexcharts-radialbar-label"];this.barLabels.onClick||Tn.push("apexcharts-no-click");var Xn=this.barLabels.useSeriesColors?g.globals.colors[Re]:g.config.chart.foreColor;Xn||(Xn=g.config.chart.foreColor);var Qn=Pi.x-this.barLabels.margin,hr=Pi.y,xr=x.drawText({x:Qn,y:hr,text:nn,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:Xn,cssClass:Tn.join(" ")});xr.on("click",this.onBarLabelClick),xr.attr({rel:Re+1}),0!==te&&xr.attr({"transform-origin":"".concat(Qn," ").concat(hr),transform:"rotate(".concat(te," 0 0)")}),G.add(xr)}var Rr=0;!this.initialAnim||g.globals.resized||g.globals.dataChanged||(Rr=g.config.chart.animations.speed),g.globals.dataChanged&&(Rr=g.config.chart.animations.dynamicAnimation.speed),this.animDur=Rr/(1.2*d.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(hi,{centerX:d.centerX,centerY:d.centerY,endAngle:Fe,startAngle:te,prevEndAngle:ht,prevStartAngle:oe,size:d.size,i:Re,totalItems:2,animBeginArr:this.animBeginArr,dur:Rr,shouldSetPrevPaths:!0,easing:g.globals.easing})}return{g:R,elHollow:ce,dataLabels:De}}},{key:"drawHollow",value:function(d){var g=new rt(this.ctx).drawCircle(2*d.size);return g.attr({class:"apexcharts-radialbar-hollow",cx:d.centerX,cy:d.centerY,r:d.size,fill:d.fill}),g}},{key:"drawHollowImage",value:function(d,g,x,w){var I=this.w,R=new Wi(this.ctx),Y=Je.randomId(),W=I.config.plotOptions.radialBar.hollow.image;if(I.config.plotOptions.radialBar.hollow.imageClipped)R.clippedImgArea({width:x,height:x,image:W,patternID:"pattern".concat(I.globals.cuid).concat(Y)}),w="url(#pattern".concat(I.globals.cuid).concat(Y,")");else{var X=I.config.plotOptions.radialBar.hollow.imageWidth,Q=I.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===X&&void 0===Q){var ce=I.globals.dom.Paper.image(W).loaded(function(Ee){this.move(d.centerX-Ee.width/2+I.config.plotOptions.radialBar.hollow.imageOffsetX,d.centerY-Ee.height/2+I.config.plotOptions.radialBar.hollow.imageOffsetY)});g.add(ce)}else{var me=I.globals.dom.Paper.image(W).loaded(function(Ee){this.move(d.centerX-X/2+I.config.plotOptions.radialBar.hollow.imageOffsetX,d.centerY-Q/2+I.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(X,Q)});g.add(me)}}return w}},{key:"getStrokeWidth",value:function(d){return d.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(d.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(d){var g=parseInt(d.target.getAttribute("rel"),10)-1,x=this.barLabels.onClick,w=this.w;x&&x(w.globals.seriesNames[g],{w,seriesIndex:g})}}]),r}(),wt=function(pe){Le(r,Zt);var i=ut(r);function r(){return Z(this,r),i.apply(this,arguments)}return we(r,[{key:"draw",value:function(d,g){var x=this.w,w=new rt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=d,this.seriesRangeStart=x.globals.seriesRangeStart,this.seriesRangeEnd=x.globals.seriesRangeEnd,this.barHelpers.initVariables(d);for(var I=w.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),R=0;R<d.length;R++){var Y,W,X,Q,ce=void 0,me=void 0,Ee=x.globals.comboCharts?g[R]:R,De=w.group({class:"apexcharts-series",seriesName:Je.escapeString(x.globals.seriesNames[Ee]),rel:R+1,"data:realIndex":Ee});this.ctx.series.addCollapsedClassToSeries(De,Ee),d[R].length>0&&(this.visibleI=this.visibleI+1);var Ce=0,Re=0;this.yRatio.length>1&&(this.yaxisIndex=Ee);var G=this.barHelpers.initialPositions();me=G.y,Q=G.zeroW,ce=G.x,Re=G.barWidth,Ce=G.barHeight,Y=G.xDivision,W=G.yDivision,X=G.zeroH;for(var re=w.group({class:"apexcharts-datalabels","data:realIndex":Ee}),te=w.group({class:"apexcharts-rangebar-goals-markers"}),oe=0;oe<x.globals.dataPoints;oe++){var ye,Fe=this.barHelpers.getStrokeWidth(R,oe,Ee),ht=this.seriesRangeStart[R][oe],yt=this.seriesRangeEnd[R][oe],ii=null,hi=null,xi=null,Pi={x:ce,y:me,strokeWidth:Fe,elSeries:De},nn=this.seriesLen;if(x.config.plotOptions.bar.rangeBarGroupRows&&(nn=1),void 0===x.config.series[R].data[oe])break;if(this.isHorizontal){if(xi=me+Ce*this.visibleI,x.config.series[R].data[oe].x){var Xn=this.detectOverlappingBars({i:R,j:oe,barYPosition:xi,srty:(W-Ce*nn)/2,barHeight:Ce,yDivision:W,initPositions:G});Ce=Xn.barHeight,xi=Xn.barYPosition}Re=(ii=this.drawRangeBarPaths(He({indexes:{i:R,j:oe,realIndex:Ee},barHeight:Ce,barYPosition:xi,zeroW:Q,yDivision:W,y1:ht,y2:yt},Pi))).barWidth}else{if(x.globals.isXNumeric&&(ce=(x.globals.seriesX[R][oe]-x.globals.minX)/this.xRatio-Re/2),hi=ce+Re*this.visibleI,x.config.series[R].data[oe].x){var hr=this.detectOverlappingBars({i:R,j:oe,barXPosition:hi,srtx:(Y-Re*nn)/2,barWidth:Re,xDivision:Y,initPositions:G});Re=hr.barWidth,hi=hr.barXPosition}Ce=(ii=this.drawRangeColumnPaths(He({indexes:{i:R,j:oe,realIndex:Ee},barWidth:Re,barXPosition:hi,zeroH:X,xDivision:Y},Pi))).barHeight}var xr=this.barHelpers.drawGoalLine({barXPosition:ii.barXPosition,barYPosition:xi,goalX:ii.goalX,goalY:ii.goalY,barHeight:Ce,barWidth:Re});xr&&te.add(xr),me=ii.y,ce=ii.x;var Rr=this.barHelpers.getPathFillColor(d,R,oe,Ee);this.renderSeries((Se(ye={realIndex:Ee,pathFill:Rr,lineFill:x.globals.stroke.colors[Ee],j:oe,i:R,x:ce,y:me,y1:ht,y2:yt,pathFrom:ii.pathFrom,pathTo:ii.pathTo,strokeWidth:Fe,elSeries:De,series:d,barHeight:Ce,barWidth:Re,barXPosition:hi,barYPosition:xi},"barWidth",Re),Se(ye,"elDataLabelsWrap",re),Se(ye,"elGoalsMarkers",te),Se(ye,"visibleSeries",this.visibleI),Se(ye,"type","rangebar"),ye))}I.add(De)}return I}},{key:"detectOverlappingBars",value:function(d){var g=d.i,x=d.j,w=d.barYPosition,I=d.barXPosition,R=d.srty,Y=d.srtx,W=d.barHeight,X=d.barWidth,Q=d.yDivision,ce=d.xDivision,me=d.initPositions,Ee=this.w,De=[],Ce=Ee.config.series[g].data[x].rangeName,Re=Ee.config.series[g].data[x].x,G=Array.isArray(Re)?Re.join(" "):Re,re=Ee.globals.labels.map(function(oe){return Array.isArray(oe)?oe.join(" "):oe}).indexOf(G),te=Ee.globals.seriesRange[g].findIndex(function(oe){return oe.x===G&&oe.overlaps.length>0});return this.isHorizontal?(w=Ee.config.plotOptions.bar.rangeBarGroupRows?R+Q*re:R+W*this.visibleI+Q*re,te>-1&&!Ee.config.plotOptions.bar.rangeBarOverlap&&(De=Ee.globals.seriesRange[g][te].overlaps).indexOf(Ce)>-1&&(w=(W=me.barHeight/De.length)*this.visibleI+Q*(100-parseInt(this.barOptions.barHeight,10))/100/2+W*(this.visibleI+De.indexOf(Ce))+Q*re)):(re>-1&&(I=Ee.config.plotOptions.bar.rangeBarGroupRows?Y+ce*re:Y+X*this.visibleI+ce*re),te>-1&&!Ee.config.plotOptions.bar.rangeBarOverlap&&(De=Ee.globals.seriesRange[g][te].overlaps).indexOf(Ce)>-1&&(I=(X=me.barWidth/De.length)*this.visibleI+ce*(100-parseInt(this.barOptions.barWidth,10))/100/2+X*(this.visibleI+De.indexOf(Ce))+ce*re)),{barYPosition:w,barXPosition:I,barHeight:W,barWidth:X}}},{key:"drawRangeColumnPaths",value:function(d){var g=d.indexes,x=d.x,w=d.xDivision,I=d.barWidth,R=d.barXPosition,Y=d.zeroH,W=this.w,X=g.i,Q=g.j,ce=this.yRatio[this.yaxisIndex],me=g.realIndex,Ee=this.getRangeValue(me,Q),De=Math.min(Ee.start,Ee.end),Ce=Math.max(Ee.start,Ee.end);null==this.series[X][Q]?De=Y:(De=Y-De/ce,Ce=Y-Ce/ce);var Re=Math.abs(Ce-De),G=this.barHelpers.getColumnPaths({barXPosition:R,barWidth:I,y1:De,y2:Ce,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:g.realIndex,i:me,j:Q,w:W});if(W.globals.isXNumeric){var re=this.getBarXForNumericXAxis({x,j:Q,realIndex:me,barWidth:I});x=re.x,R=re.barXPosition}else x+=w;return{pathTo:G.pathTo,pathFrom:G.pathFrom,barHeight:Re,x,y:Ce,goalY:this.barHelpers.getGoalValues("y",null,Y,X,Q),barXPosition:R}}},{key:"drawRangeBarPaths",value:function(d){var g=d.indexes,x=d.y,R=d.yDivision,Y=d.barHeight,W=d.barYPosition,X=d.zeroW,Q=this.w,ce=X+d.y1/this.invertedYRatio,me=X+d.y2/this.invertedYRatio,Ee=Math.abs(me-ce),De=this.barHelpers.getBarpaths({barYPosition:W,barHeight:Y,x1:ce,x2:me,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:g.realIndex,realIndex:g.realIndex,j:g.j,w:Q});return Q.globals.isXNumeric||(x+=R),{pathTo:De.pathTo,pathFrom:De.pathFrom,barWidth:Ee,x:me,goalX:this.barHelpers.getGoalValues("x",X,null,g.realIndex,g.j),y:x}}},{key:"getRangeValue",value:function(d,g){var x=this.w;return{start:x.globals.seriesRangeStart[d][g],end:x.globals.seriesRangeEnd[d][g]}}}]),r}(),At=function(){function pe(i){Z(this,pe),this.w=i.w,this.lineCtx=i}return we(pe,[{key:"sameValueSeriesFix",value:function(i,r){var d=this.w;if(("gradient"===d.config.fill.type||"gradient"===d.config.fill.type[i])&&new bi(this.lineCtx.ctx,d).seriesHaveSameValues(i)){var g=r[i].slice();g[g.length-1]=g[g.length-1]+1e-6,r[i]=g}return r}},{key:"calculatePoints",value:function(i){var r=i.series,g=i.x,x=i.y,w=i.i,I=i.j,R=i.prevY,Y=this.w,W=[],X=[];if(0===I){var Q=this.lineCtx.categoryAxisCorrection+Y.config.markers.offsetX;Y.globals.isXNumeric&&(Q=(Y.globals.seriesX[i.realIndex][0]-Y.globals.minX)/this.lineCtx.xRatio+Y.config.markers.offsetX),W.push(Q),X.push(Je.isNumber(r[w][0])?R+Y.config.markers.offsetY:null),W.push(g+Y.config.markers.offsetX),X.push(Je.isNumber(r[w][I+1])?x+Y.config.markers.offsetY:null)}else W.push(g+Y.config.markers.offsetX),X.push(Je.isNumber(r[w][I+1])?x+Y.config.markers.offsetY:null);return{x:W,y:X}}},{key:"checkPreviousPaths",value:function(i){for(var r=i.pathFromLine,d=i.pathFromArea,g=i.realIndex,x=this.w,w=0;w<x.globals.previousPaths.length;w++){var I=x.globals.previousPaths[w];("line"===I.type||"area"===I.type)&&I.paths.length>0&&parseInt(I.realIndex,10)===parseInt(g,10)&&("line"===I.type?(this.lineCtx.appendPathFrom=!1,r=x.globals.previousPaths[w].paths[0].d):"area"===I.type&&(this.lineCtx.appendPathFrom=!1,d=x.globals.previousPaths[w].paths[0].d,x.config.stroke.show&&x.globals.previousPaths[w].paths[1]&&(r=x.globals.previousPaths[w].paths[1].d)))}return{pathFromLine:r,pathFromArea:d}}},{key:"determineFirstPrevY",value:function(i){var r,d,g=i.i,x=i.series,w=i.prevY,I=i.lineYPosition,R=this.w,Y=R.config.chart.stacked&&!R.globals.comboCharts||R.config.chart.stacked&&R.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(r=this.w.config.series[g])||void 0===r?void 0:r.type));if(void 0!==(null===(d=x[g])||void 0===d?void 0:d[0]))w=(I=Y&&g>0?this.lineCtx.prevSeriesY[g-1][0]:this.lineCtx.zeroY)-x[g][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?x[g][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(Y&&g>0&&void 0===x[g][0])for(var W=g-1;W>=0;W--)if(null!=x[W][0]){w=I=this.lineCtx.prevSeriesY[W][0];break}return{prevY:w,lineYPosition:I}}}]),pe}(),ot=function(pe){for(var i="",r=0;r<pe.length;r++){var d=pe[r],g=d.length;g>4?(i+="C".concat(d[0],", ").concat(d[1]),i+=", ".concat(d[2],", ").concat(d[3]),i+=", ".concat(d[4],", ").concat(d[5])):g>2&&(i+="S".concat(d[0],", ").concat(d[1]),i+=", ".concat(d[2],", ").concat(d[3]))}return i},qe=function(pe){var i=function(pe){for(var i,r,d,g,x=function(W){for(var X=[],Q=W[0],ce=W[1],me=X[0]=nt(Q,ce),Ee=1,De=W.length-1;Ee<De;Ee++)X[Ee]=.5*(me+(me=nt(Q=ce,ce=W[Ee+1])));return X[Ee]=me,X}(pe),w=pe.length-1,I=[],R=0;R<w;R++)d=nt(pe[R],pe[R+1]),Math.abs(d)<1e-6?x[R]=x[R+1]=0:(g=(i=x[R]/d)*i+(r=x[R+1]/d)*r)>9&&(g=3*d/Math.sqrt(g),x[R]=g*i,x[R+1]=g*r);for(var Y=0;Y<=w;Y++)g=(pe[Math.min(w,Y+1)][0]-pe[Math.max(0,Y-1)][0])/(6*(1+x[Y]*x[Y])),I.push([g||0,x[Y]*g||0]);return I}(pe),r=pe[1],d=pe[0],g=[],x=i[1],w=i[0];g.push(d,[d[0]+w[0],d[1]+w[1],r[0]-x[0],r[1]-x[1],r[0],r[1]]);for(var I=2,R=i.length;I<R;I++){var Y=pe[I],W=i[I];g.push([Y[0]-W[0],Y[1]-W[1],Y[0],Y[1]])}return g};function nt(pe,i){return(i[1]-pe[1])/(i[0]-pe[0])}var It=function(){function pe(i,r,d){Z(this,pe),this.ctx=i,this.w=i.w,this.xyRatios=r,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||d,this.scatter=new Ln(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new At(this),this.markers=new _n(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return we(pe,[{key:"draw",value:function(i,r,d,g){var x,w=this.w,I=new rt(this.ctx),R=w.globals.comboCharts?r:w.config.chart.type,Y=I.group({class:"apexcharts-".concat(R,"-series apexcharts-plot-series")}),W=new bi(this.ctx,w);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,i=W.getLogSeries(i),this.yRatio=W.getLogYRatios(this.yRatio);for(var X=[],Q=0;Q<i.length;Q++){i=this.lineHelpers.sameValueSeriesFix(Q,i);var ce=w.globals.comboCharts?d[Q]:Q;this._initSerieVariables(i,Q,ce);var me=[],Ee=[],De=[],Ce=w.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,ce),w.globals.isXNumeric&&w.globals.seriesX.length>0&&(Ce=(w.globals.seriesX[ce][0]-w.globals.minX)/this.xRatio),De.push(Ce);var Re,G=Ce,re=void 0,te=G,oe=this.zeroY,ye=this.zeroY;oe=this.lineHelpers.determineFirstPrevY({i:Q,series:i,prevY:oe,lineYPosition:0}).prevY,me.push("monotonCubic"===w.config.stroke.curve&&null===i[Q][0]?null:oe),Re=oe,"rangeArea"===R&&(re=ye=this.lineHelpers.determineFirstPrevY({i:Q,series:g,prevY:ye,lineYPosition:0}).prevY,Ee.push(ye));var Fe={type:R,series:i,realIndex:ce,i:Q,x:Ce,y:1,pX:G,pY:Re,pathsFrom:this._calculatePathsFrom({type:R,series:i,i:Q,realIndex:ce,prevX:te,prevY:oe,prevY2:ye}),linePaths:[],areaPaths:[],seriesIndex:d,lineYPosition:0,xArrj:De,yArrj:me,y2Arrj:Ee,seriesRangeEnd:g},ht=this._iterateOverDataPoints(He(He({},Fe),{},{iterations:"rangeArea"===R?i[Q].length-1:void 0,isRangeStart:!0}));if("rangeArea"===R){var yt=this._calculatePathsFrom({series:g,i:Q,realIndex:ce,prevX:te,prevY:ye}),ii=this._iterateOverDataPoints(He(He({},Fe),{},{series:g,pY:re,pathsFrom:yt,iterations:g[Q].length-1,isRangeStart:!1}));ht.linePaths[0]=ii.linePath+ht.linePath,ht.pathFromLine=ii.pathFromLine+ht.pathFromLine}this._handlePaths({type:R,realIndex:ce,i:Q,paths:ht}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),X.push(this.elSeries)}if(void 0!==(null===(x=w.config.series[0])||void 0===x?void 0:x.zIndex)&&X.sort(function(Pi,nn){return Number(Pi.node.getAttribute("zIndex"))-Number(nn.node.getAttribute("zIndex"))}),w.config.chart.stacked)for(var hi=X.length;hi>0;hi--)Y.add(X[hi-1]);else for(var xi=0;xi<X.length;xi++)Y.add(X[xi]);return Y}},{key:"_initSerieVariables",value:function(i,r,d){var g=this.w,x=new rt(this.ctx);this.xDivision=g.globals.gridWidth/(g.globals.dataPoints-("on"===g.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(g.config.stroke.width)?g.config.stroke.width[d]:g.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=d),this.isReversed=g.config.yaxis[this.yaxisIndex]&&g.config.yaxis[this.yaxisIndex].reversed,this.zeroY=g.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?g.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>g.globals.gridHeight||"end"===g.config.plotOptions.area.fillTo)&&(this.areaBottomY=g.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=x.group({class:"apexcharts-series",zIndex:void 0!==g.config.series[d].zIndex?g.config.series[d].zIndex:d,seriesName:Je.escapeString(g.globals.seriesNames[d])}),this.elPointsMain=x.group({class:"apexcharts-series-markers-wrap","data:realIndex":d}),this.elDataLabelsWrap=x.group({class:"apexcharts-datalabels","data:realIndex":d}),this.elSeries.attr({"data:longestSeries":i[r].length===g.globals.dataPoints,rel:r+1,"data:realIndex":d}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(i){var r,d,g,x,w=i.type,I=i.series,R=i.i,Y=i.realIndex,W=i.prevX,X=i.prevY,Q=i.prevY2,ce=this.w,me=new rt(this.ctx);if(null===I[R][0]){for(var Ee=0;Ee<I[R].length;Ee++)if(null!==I[R][Ee]){r=me.move(W=this.xDivision*Ee,X=this.zeroY-I[R][Ee]/this.yRatio[this.yaxisIndex]),d=me.move(W,this.areaBottomY);break}}else r=me.move(W,X),"rangeArea"===w&&(r=me.move(W,Q)+me.line(W,X)),d=me.move(W,this.areaBottomY)+me.line(W,X);if(g=me.move(-1,this.zeroY)+me.line(-1,this.zeroY),x=me.move(-1,this.zeroY)+me.line(-1,this.zeroY),ce.globals.previousPaths.length>0){var De=this.lineHelpers.checkPreviousPaths({pathFromLine:g,pathFromArea:x,realIndex:Y});g=De.pathFromLine,x=De.pathFromArea}return{prevX:W,prevY:X,linePath:r,areaPath:d,pathFromLine:g,pathFromArea:x}}},{key:"_handlePaths",value:function(i){var r=i.type,d=i.realIndex,g=i.i,x=i.paths,w=this.w,I=new rt(this.ctx),R=new Wi(this.ctx);this.prevSeriesY.push(x.yArrj),w.globals.seriesXvalues[d]=x.xArrj,w.globals.seriesYvalues[d]=x.yArrj;var Y=w.config.forecastDataPoints;if(Y.count>0&&"rangeArea"!==r){var W=w.globals.seriesXvalues[d][w.globals.seriesXvalues[d].length-Y.count-1],X=I.drawRect(W,0,w.globals.gridWidth,w.globals.gridHeight,0);w.globals.dom.elForecastMask.appendChild(X.node);var Q=I.drawRect(0,0,W,w.globals.gridHeight,0);w.globals.dom.elNonForecastMask.appendChild(Q.node)}this.pointsChart||w.globals.delayedElements.push({el:this.elPointsMain.node,index:d});var ce={i:g,realIndex:d,animationDelay:g,initialSpeed:w.config.chart.animations.speed,dataChangeSpeed:w.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(r)};if("area"===r)for(var me=R.fillPath({seriesNumber:d}),Ee=0;Ee<x.areaPaths.length;Ee++){var De=I.renderPaths(He(He({},ce),{},{pathFrom:x.pathFromArea,pathTo:x.areaPaths[Ee],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:me}));this.elSeries.add(De)}if(w.config.stroke.show&&!this.pointsChart){var Ce=null;if("line"===r)Ce=R.fillPath({seriesNumber:d,i:g});else if("solid"===w.config.stroke.fill.type)Ce=w.globals.stroke.colors[d];else{var Re=w.config.fill;w.config.fill=w.config.stroke.fill,Ce=R.fillPath({seriesNumber:d,i:g}),w.config.fill=Re}for(var G=0;G<x.linePaths.length;G++){var re=Ce;"rangeArea"===r&&(re=R.fillPath({seriesNumber:d}));var te=He(He({},ce),{},{pathFrom:x.pathFromLine,pathTo:x.linePaths[G],stroke:Ce,strokeWidth:this.strokeWidth,strokeLineCap:w.config.stroke.lineCap,fill:"rangeArea"===r?re:"none"}),oe=I.renderPaths(te);if(this.elSeries.add(oe),oe.attr("fill-rule","evenodd"),Y.count>0&&"rangeArea"!==r){var ye=I.renderPaths(te);ye.node.setAttribute("stroke-dasharray",Y.dashArray),Y.strokeWidth&&ye.node.setAttribute("stroke-width",Y.strokeWidth),this.elSeries.add(ye),ye.attr("clip-path","url(#forecastMask".concat(w.globals.cuid,")")),oe.attr("clip-path","url(#nonForecastMask".concat(w.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(i){var r,d=this,g=i.type,x=i.series,w=i.iterations,I=i.realIndex,R=i.i,Y=i.x,W=i.y,X=i.pX,Q=i.pY,ce=i.pathsFrom,me=i.linePaths,Ee=i.areaPaths,De=i.seriesIndex,Ce=i.lineYPosition,Re=i.xArrj,G=i.yArrj,re=i.y2Arrj,te=i.isRangeStart,oe=i.seriesRangeEnd,ye=this.w,Fe=new rt(this.ctx),ht=this.yRatio,yt=ce.prevY,ii=ce.linePath,hi=ce.areaPath,xi=ce.pathFromLine,Pi=ce.pathFromArea,nn=Je.isNumber(ye.globals.minYArr[I])?ye.globals.minYArr[I]:ye.globals.minY;w||(w=ye.globals.dataPoints>1?ye.globals.dataPoints-1:ye.globals.dataPoints);for(var Tn=function(cr,Ur){return Ur-cr/ht[d.yaxisIndex]+2*(d.isReversed?cr/ht[d.yaxisIndex]:0)},Xn=W,Qn=ye.config.chart.stacked&&!ye.globals.comboCharts||ye.config.chart.stacked&&ye.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(r=this.w.config.series[I])||void 0===r?void 0:r.type)),hr=0;hr<w;hr++){var xr=null==x[R][hr+1];if(ye.globals.isXNumeric){var Rr=ye.globals.seriesX[I][hr+1];void 0===ye.globals.seriesX[I][hr+1]&&(Rr=ye.globals.seriesX[I][w-1]),Y=(Rr-ye.globals.minX)/this.xRatio}else Y+=this.xDivision;Ce=Qn&&R>0&&ye.globals.collapsedSeries.length<ye.config.series.length-1?this.prevSeriesY[function(cr){for(var Ur=cr,ir=0;ir<ye.globals.series.length;ir++)if(ye.globals.collapsedSeriesIndices.indexOf(cr)>-1){Ur--;break}return Ur>=0?Ur:0}(R-1)][hr+1]:this.zeroY,xr?W=Tn(nn,Ce):(W=Tn(x[R][hr+1],Ce),"rangeArea"===g&&(Xn=Tn(oe[R][hr+1],Ce))),Re.push(Y),G.push(xr&&"smooth"===ye.config.stroke.curve?null:W),re.push(Xn);var Br=this.lineHelpers.calculatePoints({series:x,x:Y,y:W,realIndex:I,i:R,j:hr,prevY:yt}),Or=this._createPaths({type:g,series:x,i:R,realIndex:I,j:hr,x:Y,y:W,y2:Xn,xArrj:Re,yArrj:G,y2Arrj:re,pX:X,pY:Q,linePath:ii,areaPath:hi,linePaths:me,areaPaths:Ee,seriesIndex:De,isRangeStart:te});Ee=Or.areaPaths,me=Or.linePaths,X=Or.pX,Q=Or.pY,hi=Or.areaPath,ii=Or.linePath,!this.appendPathFrom||"monotoneCubic"===ye.config.stroke.curve&&"rangeArea"===g||(xi+=Fe.line(Y,this.zeroY),Pi+=Fe.line(Y,this.zeroY)),this.handleNullDataPoints(x,Br,R,hr,I),this._handleMarkersAndLabels({type:g,pointsPos:Br,i:R,j:hr,realIndex:I,isRangeStart:te})}return{yArrj:G,xArrj:Re,pathFromArea:Pi,areaPaths:Ee,pathFromLine:xi,linePaths:me,linePath:ii,areaPath:hi}}},{key:"_handleMarkersAndLabels",value:function(i){var r=i.type,d=i.pointsPos,g=i.isRangeStart,x=i.i,w=i.j,I=i.realIndex,R=this.w,Y=new Gn(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,w,{realIndex:I,pointsPos:d,zRatio:this.zRatio,elParent:this.elPointsMain});else{R.globals.series[x].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var W=this.markers.plotChartMarkers(d,I,w+1);null!==W&&this.elPointsMain.add(W)}var X=Y.drawDataLabel({type:r,isRangeStart:g,pos:d,i:I,j:w+1});null!==X&&this.elDataLabelsWrap.add(X)}},{key:"_createPaths",value:function(i){var r=i.type,d=i.series,g=i.i,x=i.realIndex,w=i.j,I=i.x,R=i.y,Y=i.xArrj,W=i.yArrj,X=i.y2,Q=i.y2Arrj,ce=i.pX,me=i.pY,Ee=i.linePath,De=i.areaPath,Ce=i.linePaths,Re=i.areaPaths,G=i.seriesIndex,re=i.isRangeStart,te=this.w,oe=new rt(this.ctx),ye=te.config.stroke.curve,Fe=this.areaBottomY;if(Array.isArray(te.config.stroke.curve)&&(ye=Array.isArray(G)?te.config.stroke.curve[G[g]]:te.config.stroke.curve[g]),"rangeArea"===r&&(te.globals.hasNullValues||te.config.forecastDataPoints.count>0)&&"monotoneCubic"===ye&&(ye="straight"),"monotoneCubic"===ye){var ht="rangeArea"===r?Y.length===te.globals.dataPoints:w===d[g].length-2,yt=Y.map(function(Qn,hr){return[Y[hr],W[hr]]}).filter(function(Qn){return null!==Qn[1]});if(ht&&yt.length>1){var ii=qe(yt);if(Ee+=ot(ii),null===d[g][0]?De=Ee:De+=ot(ii),"rangeArea"===r&&re){Ee+=oe.line(Y[Y.length-1],Q[Q.length-1]);var hi=Y.slice().reverse(),xi=Q.slice().reverse(),Pi=hi.map(function(Qn,hr){return[hi[hr],xi[hr]]}),nn=qe(Pi);De=Ee+=ot(nn)}else De+=oe.line(yt[yt.length-1][0],Fe)+oe.line(yt[0][0],Fe)+oe.move(yt[0][0],yt[0][1])+"z";Ce.push(Ee),Re.push(De)}}else if("smooth"===ye){var Tn=.35*(I-ce);te.globals.hasNullValues?(null!==d[g][w]&&(null!==d[g][w+1]?(Ee=oe.move(ce,me)+oe.curve(ce+Tn,me,I-Tn,R,I+1,R),De=oe.move(ce+1,me)+oe.curve(ce+Tn,me,I-Tn,R,I+1,R)+oe.line(I,Fe)+oe.line(ce,Fe)+"z"):(Ee=oe.move(ce,me),De=oe.move(ce,me)+"z")),Ce.push(Ee),Re.push(De)):(Ee+=oe.curve(ce+Tn,me,I-Tn,R,I,R),De+=oe.curve(ce+Tn,me,I-Tn,R,I,R)),ce=I,me=R,w===d[g].length-2&&(De=De+oe.curve(ce,me,I,R,I,Fe)+oe.move(I,R)+"z","rangeArea"===r&&re?Ee=Ee+oe.curve(ce,me,I,R,I,X)+oe.move(I,X)+"z":te.globals.hasNullValues||(Ce.push(Ee),Re.push(De)))}else null===d[g][w+1]&&(Ee+=oe.move(I,R),De=De+oe.line(te.globals.isXNumeric?(te.globals.seriesX[x][w]-te.globals.minX)/this.xRatio:I-this.xDivision,Fe)+oe.move(I,R)+"z"),null===d[g][w]&&(Ee+=oe.move(I,R),De+=oe.move(I,Fe)),"stepline"===ye?(Ee=Ee+oe.line(I,null,"H")+oe.line(null,R,"V"),De=De+oe.line(I,null,"H")+oe.line(null,R,"V")):"straight"===ye&&(Ee+=oe.line(I,R),De+=oe.line(I,R)),w===d[g].length-2&&(De=De+oe.line(I,Fe)+oe.move(I,R)+"z","rangeArea"===r&&re?Ee=Ee+oe.line(I,X)+oe.move(I,X)+"z":(Ce.push(Ee),Re.push(De)));return{linePaths:Ce,areaPaths:Re,pX:ce,pY:me,linePath:Ee,areaPath:De}}},{key:"handleNullDataPoints",value:function(i,r,d,g,x){var w=this.w;if(null===i[d][g]&&w.config.markers.showNullDataPoints||1===i[d].length){var I=this.markers.plotChartMarkers(r,x,g+1,this.strokeWidth-w.config.markers.strokeWidth/2,!0);null!==I&&this.elPointsMain.add(I)}}}]),pe}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function pe(I,R,Y,W){this.xoffset=I,this.yoffset=R,this.height=W,this.width=Y,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(X){var Q,ce=[],me=this.xoffset,Ee=this.yoffset,De=x(X)/this.height,Ce=x(X)/this.width;if(this.width>=this.height)for(Q=0;Q<X.length;Q++)ce.push([me,Ee,me+De,Ee+X[Q]/De]),Ee+=X[Q]/De;else for(Q=0;Q<X.length;Q++)ce.push([me,Ee,me+X[Q]/Ce,Ee+Ce]),me+=X[Q]/Ce;return ce},this.cutArea=function(X){var Q;if(this.width>=this.height){var ce=X/this.height;Q=new pe(this.xoffset+ce,this.yoffset,this.width-ce,this.height)}else{var Ee=X/this.width;Q=new pe(this.xoffset,this.yoffset+Ee,this.width,this.height-Ee)}return Q}}function i(I,R,Y,W,X){return W=void 0===W?0:W,X=void 0===X?0:X,function(ce){var me,Ee,De=[];for(me=0;me<ce.length;me++)for(Ee=0;Ee<ce[me].length;Ee++)De.push(ce[me][Ee]);return De}(r(function(ce,me){var Ee,De=[],Ce=me/x(ce);for(Ee=0;Ee<ce.length;Ee++)De[Ee]=ce[Ee]*Ce;return De}(I,R*Y),[],new pe(W,X,R,Y),[]))}function r(I,R,Y,W){var X,Q,ce,me,Ee,De,Ce;if(0!==I.length)return X=Y.shortestEdge(),Ee=Q=I[0],De=X,0===(me=R).length||((Ce=me.slice()).push(Ee),d(me,De)>=d(Ce,De))?(R.push(Q),r(I.slice(1),R,Y,W)):(ce=Y.cutArea(x(R),W),W.push(Y.getCoordinates(R)),r(I,[],ce,W)),W;W.push(Y.getCoordinates(R))}function d(I,R){var Y=Math.min.apply(Math,I),W=Math.max.apply(Math,I),X=x(I);return Math.max(Math.pow(R,2)*W/Math.pow(X,2),Math.pow(X,2)/(Math.pow(R,2)*Y))}function g(I){return I&&I.constructor===Array}function x(I){var R,Y=0;for(R=0;R<I.length;R++)Y+=I[R];return Y}function w(I){var R,Y=0;if(g(I[0]))for(R=0;R<I.length;R++)Y+=w(I[R]);else Y=x(I);return Y}return function I(R,Y,W,X,Q){X=void 0===X?0:X,Q=void 0===Q?0:Q;var ce,me,Ee=[],De=[];if(g(R[0])){for(me=0;me<R.length;me++)Ee[me]=w(R[me]);for(ce=i(Ee,Y,W,X,Q),me=0;me<R.length;me++)De.push(I(R[me],ce[me][2]-ce[me][0],ce[me][3]-ce[me][1],ce[me][0],ce[me][1]))}else De=i(R,Y,W,X,Q);return De}}();var ei,Yi,Ei=function(){function pe(i,r){Z(this,pe),this.ctx=i,this.w=i.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new ae(i),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return we(pe,[{key:"draw",value:function(i){var r=this,d=this.w,g=new rt(this.ctx),x=new Wi(this.ctx),w=g.group({class:"apexcharts-treemap"});if(d.globals.noData)return w;var I=[];return i.forEach(function(R){var Y=R.map(function(W){return Math.abs(W)});I.push(Y)}),this.negRange=this.helpers.checkColorRange(),d.config.series.forEach(function(R,Y){R.data.forEach(function(W){Array.isArray(r.labels[Y])||(r.labels[Y]=[]),r.labels[Y].push(W.x)})}),window.TreemapSquared.generate(I,d.globals.gridWidth,d.globals.gridHeight).forEach(function(R,Y){var W=g.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:Je.escapeString(d.globals.seriesNames[Y]),rel:Y+1,"data:realIndex":Y});if(d.config.chart.dropShadow.enabled){var X=d.config.chart.dropShadow;new yi(r.ctx).dropShadow(w,X,Y)}var Q=g.group({class:"apexcharts-data-labels"});R.forEach(function(ce,me){var Ee=ce[0],De=ce[1],Ce=ce[2],Re=ce[3],G=g.drawRect(Ee,De,Ce-Ee,Re-De,d.config.plotOptions.treemap.borderRadius,"#fff",1,r.strokeWidth,d.config.plotOptions.treemap.useFillColorAsStroke?te:d.globals.stroke.colors[Y]);G.attr({cx:Ee,cy:De,index:Y,i:Y,j:me,width:Ce-Ee,height:Re-De});var re=r.helpers.getShadeColor(d.config.chart.type,Y,me,r.negRange),te=re.color;void 0!==d.config.series[Y].data[me]&&d.config.series[Y].data[me].fillColor&&(te=d.config.series[Y].data[me].fillColor);var oe=x.fillPath({color:te,seriesNumber:Y,dataPointIndex:me});G.node.classList.add("apexcharts-treemap-rect"),G.attr({fill:oe}),r.helpers.addListeners(G);var ye={x:Ee+(Ce-Ee)/2,y:De+(Re-De)/2,width:0,height:0},Fe={x:Ee,y:De,width:Ce-Ee,height:Re-De};if(d.config.chart.animations.enabled&&!d.globals.dataChanged){var ht=1;d.globals.resized||(ht=d.config.chart.animations.speed),r.animateTreemap(G,ye,Fe,ht)}d.globals.dataChanged&&r.dynamicAnim.enabled&&d.globals.shouldAnimate&&(d.globals.previousPaths[Y]&&d.globals.previousPaths[Y][me]&&d.globals.previousPaths[Y][me].rect&&(ye=d.globals.previousPaths[Y][me].rect),r.animateTreemap(G,ye,Fe,r.dynamicAnim.speed));var ii=r.getFontSize(ce),hi=d.config.dataLabels.formatter(r.labels[Y][me],{value:d.globals.series[Y][me],seriesIndex:Y,dataPointIndex:me,w:d});"truncate"===d.config.plotOptions.treemap.dataLabels.format&&(ii=parseInt(d.config.dataLabels.style.fontSize,10),hi=r.truncateLabels(hi,ii,Ee,De,Ce,Re));var xi=r.helpers.calculateDataLabels({text:hi,x:(Ee+Ce)/2,y:(De+Re)/2+r.strokeWidth/2+ii/3,i:Y,j:me,colorProps:re,fontSize:ii,series:i});d.config.dataLabels.enabled&&xi&&r.rotateToFitLabel(xi,ii,hi,Ee,De,Ce,Re),W.add(G),null!==xi&&W.add(xi)}),W.add(Q),w.add(W)}),w}},{key:"getFontSize",value:function(i){var w,r=this.w,I=function R(Y){var W,X=0;if(Array.isArray(Y[0]))for(W=0;W<Y.length;W++)X+=R(Y[W]);else for(W=0;W<Y.length;W++)X+=Y[W].length;return X}(this.labels)/function R(Y){var W,X=0;if(Array.isArray(Y[0]))for(W=0;W<Y.length;W++)X+=R(Y[W]);else for(W=0;W<Y.length;W++)X+=1;return X}(this.labels);return w=Math.pow((i[2]-i[0])*(i[3]-i[1]),.5),Math.min(w/I,parseInt(r.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(i,r,d,g,x,w,I){var R=new rt(this.ctx),Y=R.getTextRects(d,r);if(Y.width+this.w.config.stroke.width+5>w-g&&Y.width<=I-x){var W=R.rotateAroundCenter(i.node);i.node.setAttribute("transform","rotate(-90 ".concat(W.x," ").concat(W.y,") translate(").concat(Y.height/3,")"))}}},{key:"truncateLabels",value:function(i,r,d,g,x,w){var I=new rt(this.ctx),R=I.getTextRects(i,r).width+this.w.config.stroke.width+5>x-d&&w-g>x-d?w-g:x-d,Y=I.getTextBasedOnMaxWidth({text:i,maxWidth:R,fontSize:r});return i.length!==Y.length&&R/r<5?"":Y}},{key:"animateTreemap",value:function(i,r,d,g){var x=new Jt(this.ctx);x.animateRect(i,{x:r.x,y:r.y,width:r.width,height:r.height},{x:d.x,y:d.y,width:d.width,height:d.height},g,function(){x.animationCompleted(i)})}}]),pe}(),Ct=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return we(pe,[{key:"calculateTimeScaleTicks",value:function(i,r){var d=this,g=this.w;if(g.globals.allSeriesCollapsed)return g.globals.labels=[],g.globals.timescaleLabels=[],[];var x=new Ii(this.ctx),w=(r-i)/864e5;this.determineInterval(w),g.globals.disableZoomIn=!1,g.globals.disableZoomOut=!1,w<.00011574074074074075?g.globals.disableZoomIn=!0:w>5e4&&(g.globals.disableZoomOut=!0);var I=x.getTimeUnitsfromTimestamp(i,r,this.utc),R=g.globals.gridWidth/w,Y=R/24,W=Y/60,X=W/60,Q=Math.floor(24*w),ce=Math.floor(1440*w),me=Math.floor(86400*w),Ee=Math.floor(w),De=Math.floor(w/30),Ce=Math.floor(w/365),Re={minMillisecond:I.minMillisecond,minSecond:I.minSecond,minMinute:I.minMinute,minHour:I.minHour,minDate:I.minDate,minMonth:I.minMonth,minYear:I.minYear},G={firstVal:Re,currentMillisecond:Re.minMillisecond,currentSecond:Re.minSecond,currentMinute:Re.minMinute,currentHour:Re.minHour,currentMonthDate:Re.minDate,currentDate:Re.minDate,currentMonth:Re.minMonth,currentYear:Re.minYear,daysWidthOnXAxis:R,hoursWidthOnXAxis:Y,minutesWidthOnXAxis:W,secondsWidthOnXAxis:X,numberOfSeconds:me,numberOfMinutes:ce,numberOfHours:Q,numberOfDays:Ee,numberOfMonths:De,numberOfYears:Ce};switch(this.tickInterval){case"years":this.generateYearScale(G);break;case"months":case"half_year":this.generateMonthScale(G);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(G);break;case"hours":this.generateHourScale(G);break;case"minutes_fives":case"minutes":this.generateMinuteScale(G);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(G)}var re=this.timeScaleArray.map(function(te){var oe={position:te.position,unit:te.unit,year:te.year,day:te.day?te.day:1,hour:te.hour?te.hour:0,month:te.month+1};return"month"===te.unit?He(He({},oe),{},{day:1,value:te.value+1}):"day"===te.unit||"hour"===te.unit?He(He({},oe),{},{value:te.value}):"minute"===te.unit?He(He({},oe),{},{value:te.value,minute:te.value}):"second"===te.unit?He(He({},oe),{},{value:te.value,minute:te.minute,second:te.second}):te});return re.filter(function(te){var oe=1,ye=Math.ceil(g.globals.gridWidth/120),Fe=te.value;void 0!==g.config.xaxis.tickAmount&&(ye=g.config.xaxis.tickAmount),re.length>ye&&(oe=Math.floor(re.length/ye));var ht=!1,yt=!1;switch(d.tickInterval){case"years":"year"===te.unit&&(ht=!0);break;case"half_year":oe=7,"year"===te.unit&&(ht=!0);break;case"months":oe=1,"year"===te.unit&&(ht=!0);break;case"months_fortnight":oe=15,"year"!==te.unit&&"month"!==te.unit||(ht=!0),30===Fe&&(yt=!0);break;case"months_days":oe=10,"month"===te.unit&&(ht=!0),30===Fe&&(yt=!0);break;case"week_days":oe=8,"month"===te.unit&&(ht=!0);break;case"days":oe=1,"month"===te.unit&&(ht=!0);break;case"hours":"day"===te.unit&&(ht=!0);break;case"minutes_fives":case"seconds_fives":Fe%5!=0&&(yt=!0);break;case"seconds_tens":Fe%10!=0&&(yt=!0)}if("hours"===d.tickInterval||"minutes_fives"===d.tickInterval||"seconds_tens"===d.tickInterval||"seconds_fives"===d.tickInterval){if(!yt)return!0}else if((Fe%oe==0||ht)&&!yt)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(i,r){var d=this.w,g=this.formatDates(i),x=this.removeOverlappingTS(g);d.globals.timescaleLabels=x.slice(),new On(this.ctx).plotCoords()}},{key:"determineInterval",value:function(i){var r=24*i,d=60*r;switch(!0){case i/365>5:this.tickInterval="years";break;case i>800:this.tickInterval="half_year";break;case i>180:this.tickInterval="months";break;case i>90:this.tickInterval="months_fortnight";break;case i>60:this.tickInterval="months_days";break;case i>30:this.tickInterval="week_days";break;case i>2:this.tickInterval="days";break;case r>2.4:this.tickInterval="hours";break;case d>15:this.tickInterval="minutes_fives";break;case d>5:this.tickInterval="minutes";break;case d>1:this.tickInterval="seconds_tens";break;case 60*d>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(i){var r=i.firstVal,d=i.currentMonth,g=i.currentYear,x=i.daysWidthOnXAxis,w=i.numberOfYears,I=r.minYear,R=0,Y=new Ii(this.ctx),W="year";if(r.minDate>1||r.minMonth>0){var X=Y.determineRemainingDaysOfYear(r.minYear,r.minMonth,r.minDate);R=(Y.determineDaysOfYear(r.minYear)-X+1)*x,this.timeScaleArray.push({position:R,value:I=r.minYear+1,unit:W,year:I,month:Je.monthMod(d+1)})}else 1===r.minDate&&0===r.minMonth&&this.timeScaleArray.push({position:R,value:I,unit:W,year:g,month:Je.monthMod(d+1)});for(var Q=I,ce=R,me=0;me<w;me++)Q++,ce=Y.determineDaysOfYear(Q-1)*x+ce,this.timeScaleArray.push({position:ce,value:Q,unit:W,year:Q,month:1})}},{key:"generateMonthScale",value:function(i){var r=i.firstVal,d=i.currentMonthDate,g=i.currentMonth,x=i.currentYear,w=i.daysWidthOnXAxis,I=i.numberOfMonths,R=g,Y=0,W=new Ii(this.ctx),X="month",Q=0;if(r.minDate>1){Y=(W.determineDaysOfMonths(g+1,r.minYear)-d+1)*w,R=Je.monthMod(g+1);var ce=x+Q,me=Je.monthMod(R),Ee=R;0===R&&(X="year",Ee=ce,me=1,ce+=Q+=1),this.timeScaleArray.push({position:Y,value:Ee,unit:X,year:ce,month:me})}else this.timeScaleArray.push({position:Y,value:R,unit:X,year:x,month:Je.monthMod(g)});for(var De=R+1,Ce=Y,Re=0,G=1;Re<I;Re++,G++){0===(De=Je.monthMod(De))?(X="year",Q+=1):X="month";var re=this._getYear(x,De,Q);Ce=W.determineDaysOfMonths(De,re)*w+Ce,this.timeScaleArray.push({position:Ce,value:0===De?re:De,unit:X,year:re,month:0===De?1:De}),De++}}},{key:"generateDayScale",value:function(i){var r=i.firstVal,d=i.currentMonth,g=i.currentYear,x=i.hoursWidthOnXAxis,w=i.numberOfDays,I=new Ii(this.ctx),R="day",Y=r.minDate+1,W=Y,X=function(G,re,te){return G>I.determineDaysOfMonths(re+1,te)&&(W=1,R="month",ce=re+=1),re},Q=(24-r.minHour)*x,ce=Y,me=X(W,d,g);0===r.minHour&&1===r.minDate?(Q=0,ce=Je.monthMod(r.minMonth),R="month",W=r.minDate):1!==r.minDate&&0===r.minHour&&0===r.minMinute&&(Q=0,ce=Y=r.minDate,me=X(W=Y,d,g)),this.timeScaleArray.push({position:Q,value:ce,unit:R,year:this._getYear(g,me,0),month:Je.monthMod(me),day:W});for(var Ee=Q,De=0;De<w;De++){R="day",me=X(W+=1,me,this._getYear(g,me,0));var Ce=this._getYear(g,me,0);Ee=24*x+Ee;var Re=1===W?Je.monthMod(me):W;this.timeScaleArray.push({position:Ee,value:Re,unit:R,year:Ce,month:Je.monthMod(me),day:Re})}}},{key:"generateHourScale",value:function(i){var r=i.firstVal,d=i.currentDate,g=i.currentMonth,x=i.currentYear,w=i.minutesWidthOnXAxis,I=i.numberOfHours,R=new Ii(this.ctx),Y="hour",W=function(oe,ye){return oe>R.determineDaysOfMonths(ye+1,x)&&(De=1,ye+=1),{month:ye,date:De}},X=function(oe,ye){return oe>R.determineDaysOfMonths(ye+1,x)?ye+=1:ye},Q=60-(r.minMinute+r.minSecond/60),ce=Q*w,me=r.minHour+1,Ee=me;60===Q&&(ce=0,Ee=me=r.minHour);var De=d;Ee>=24&&(Ee=0,De+=1,Y="day");var Ce=W(De,g).month;Ce=X(De,Ce),this.timeScaleArray.push({position:ce,value:me,unit:Y,day:De,hour:Ee,year:x,month:Je.monthMod(Ce)}),Ee++;for(var Re=ce,G=0;G<I;G++){Y="hour",Ee>=24&&(Ee=0,Y="day",Ce=W(De+=1,Ce).month,Ce=X(De,Ce));var re=this._getYear(x,Ce,0);this.timeScaleArray.push({position:Re=60*w+Re,value:0===Ee?De:Ee,unit:Y,hour:Ee,day:De,year:re,month:Je.monthMod(Ce)}),Ee++}}},{key:"generateMinuteScale",value:function(i){for(var Y=i.minutesWidthOnXAxis,X=i.numberOfMinutes,Q=i.currentMinute+1,ce=i.currentDate,me=i.currentMonth,Ee=i.currentYear,De=i.currentHour,Ce=(60-i.currentSecond-i.currentMillisecond/1e3)*i.secondsWidthOnXAxis,Re=0;Re<X;Re++)Q>=60&&(Q=0,24===(De+=1)&&(De=0)),this.timeScaleArray.push({position:Ce,value:Q,unit:"minute",hour:De,minute:Q,day:ce,year:this._getYear(Ee,me,0),month:Je.monthMod(me)}),Ce+=Y,Q++}},{key:"generateSecondScale",value:function(i){for(var Y=i.secondsWidthOnXAxis,W=i.numberOfSeconds,X=i.currentSecond+1,Q=i.currentMinute,ce=i.currentDate,me=i.currentMonth,Ee=i.currentYear,De=i.currentHour,Ce=(1e3-i.currentMillisecond)/1e3*Y,Re=0;Re<W;Re++)X>=60&&(X=0,++Q>=60&&(Q=0,24==++De&&(De=0))),this.timeScaleArray.push({position:Ce,value:X,unit:"second",hour:De,minute:Q,second:X,day:ce,year:this._getYear(Ee,me,0),month:Je.monthMod(me)}),Ce+=Y,X++}},{key:"createRawDateString",value:function(i,r){var d=i.year;return 0===i.month&&(i.month=1),d+="-"+("0"+i.month.toString()).slice(-2),d+="day"===i.unit?"day"===i.unit?"-"+("0"+r).slice(-2):"-01":"-"+("0"+(i.day?i.day:"1")).slice(-2),d+="hour"===i.unit?"hour"===i.unit?"T"+("0"+r).slice(-2):"T00":"T"+("0"+(i.hour?i.hour:"0")).slice(-2),d+="minute"===i.unit?":"+("0"+r).slice(-2):":"+(i.minute?("0"+i.minute).slice(-2):"00"),d+="second"===i.unit?":"+("0"+r).slice(-2):":00",this.utc&&(d+=".000Z"),d}},{key:"formatDates",value:function(i){var r=this,d=this.w;return i.map(function(g){var x=g.value.toString(),w=new Ii(r.ctx),I=r.createRawDateString(g,x),R=w.getDate(w.parseDate(I));if(r.utc||(R=w.getDate(w.parseDateWithTimezone(I))),void 0===d.config.xaxis.labels.format){var Y="dd MMM",W=d.config.xaxis.labels.datetimeFormatter;"year"===g.unit&&(Y=W.year),"month"===g.unit&&(Y=W.month),"day"===g.unit&&(Y=W.day),"hour"===g.unit&&(Y=W.hour),"minute"===g.unit&&(Y=W.minute),"second"===g.unit&&(Y=W.second),x=w.formatDate(R,Y)}else x=w.formatDate(R,d.config.xaxis.labels.format);return{dateString:I,position:g.position,value:x,unit:g.unit,year:g.year,month:g.month}})}},{key:"removeOverlappingTS",value:function(i){var r,d=this,g=new rt(this.ctx),x=!1;i.length>0&&i[0].value&&i.every(function(R){return R.value.length===i[0].value.length})&&(x=!0,r=g.getTextRects(i[0].value).width);var w=0;return i.map(function(R,Y){if(Y>0&&d.w.config.xaxis.labels.hideOverlappingLabels){var W=x?r:g.getTextRects(i[w].value).width;return R.position>i[w].position+W+10?(w=Y,R):null}return R}).filter(function(R){return null!==R})}},{key:"_getYear",value:function(i,r,d){return i+Math.floor(r/12)+d}}]),pe}(),Ot=function(){function pe(i,r){Z(this,pe),this.ctx=r,this.w=r.w,this.el=i}return we(pe,[{key:"setupElements",value:function(){var i=this.w.globals,r=this.w.config,d=r.chart.type;i.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(d)>-1,i.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(d)>-1,i.isBarHorizontal=("bar"===r.chart.type||"rangeBar"===r.chart.type||"boxPlot"===r.chart.type)&&r.plotOptions.bar.horizontal,i.chartClass=".apexcharts"+i.chartID,i.dom.baseEl=this.el,i.dom.elWrap=document.createElement("div"),rt.setAttrs(i.dom.elWrap,{id:i.chartClass.substring(1),class:"apexcharts-canvas "+i.chartClass.substring(1)}),this.el.appendChild(i.dom.elWrap),i.dom.Paper=new window.SVG.Doc(i.dom.elWrap),i.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(r.chart.offsetX,", ").concat(r.chart.offsetY,")")}),i.dom.Paper.node.style.background="dark"!==r.theme.mode||r.chart.background?r.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),i.dom.elLegendForeign=document.createElementNS(i.SVGNS,"foreignObject"),rt.setAttrs(i.dom.elLegendForeign,{x:0,y:0,width:i.svgWidth,height:i.svgHeight}),i.dom.elLegendWrap=document.createElement("div"),i.dom.elLegendWrap.classList.add("apexcharts-legend"),i.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),i.dom.elLegendForeign.appendChild(i.dom.elLegendWrap),i.dom.Paper.node.appendChild(i.dom.elLegendForeign),i.dom.elGraphical=i.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),i.dom.elDefs=i.dom.Paper.defs(),i.dom.Paper.add(i.dom.elGraphical),i.dom.elGraphical.add(i.dom.elDefs)}},{key:"plotChartType",value:function(i,r){var d=this.w,g=d.config,x=d.globals,w={series:[],i:[]},I={series:[],i:[]},R={series:[],i:[]},Y={series:[],i:[]},W={series:[],i:[]},X={series:[],i:[]},Q={series:[],i:[]},ce={series:[],i:[]},me={series:[],seriesRangeEnd:[],i:[]};x.series.map(function(ye,Fe){var ht=0;void 0!==i[Fe].type?("column"===i[Fe].type||"bar"===i[Fe].type?(x.series.length>1&&g.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),W.series.push(ye),W.i.push(Fe),ht++,d.globals.columnSeries=W.series):"area"===i[Fe].type?(I.series.push(ye),I.i.push(Fe),ht++):"line"===i[Fe].type?(w.series.push(ye),w.i.push(Fe),ht++):"scatter"===i[Fe].type?(R.series.push(ye),R.i.push(Fe)):"bubble"===i[Fe].type?(Y.series.push(ye),Y.i.push(Fe),ht++):"candlestick"===i[Fe].type?(X.series.push(ye),X.i.push(Fe),ht++):"boxPlot"===i[Fe].type?(Q.series.push(ye),Q.i.push(Fe),ht++):"rangeBar"===i[Fe].type?(ce.series.push(ye),ce.i.push(Fe),ht++):"rangeArea"===i[Fe].type?(me.series.push(x.seriesRangeStart[Fe]),me.seriesRangeEnd.push(x.seriesRangeEnd[Fe]),me.i.push(Fe),ht++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),ht>1&&(x.comboCharts=!0)):(w.series.push(ye),w.i.push(Fe))});var Ee=new It(this.ctx,r),De=new Nt(this.ctx,r);this.ctx.pie=new Vt(this.ctx);var Ce=new Hi(this.ctx);this.ctx.rangeBar=new wt(this.ctx,r);var Re=new $t(this.ctx),G=[];if(x.comboCharts){if(I.series.length>0&&G.push(Ee.draw(I.series,"area",I.i)),W.series.length>0)if(d.config.chart.stacked){var re=new Pt(this.ctx,r);G.push(re.draw(W.series,W.i))}else this.ctx.bar=new Zt(this.ctx,r),G.push(this.ctx.bar.draw(W.series,W.i));if(me.series.length>0&&G.push(Ee.draw(me.series,"rangeArea",me.i,me.seriesRangeEnd)),w.series.length>0&&G.push(Ee.draw(w.series,"line",w.i)),X.series.length>0&&G.push(De.draw(X.series,"candlestick",X.i)),Q.series.length>0&&G.push(De.draw(Q.series,"boxPlot",Q.i)),ce.series.length>0&&G.push(this.ctx.rangeBar.draw(ce.series,ce.i)),R.series.length>0){var te=new It(this.ctx,r,!0);G.push(te.draw(R.series,"scatter",R.i))}if(Y.series.length>0){var oe=new It(this.ctx,r,!0);G.push(oe.draw(Y.series,"bubble",Y.i))}}else switch(g.chart.type){case"line":G=Ee.draw(x.series,"line");break;case"area":G=Ee.draw(x.series,"area");break;case"bar":g.chart.stacked?G=new Pt(this.ctx,r).draw(x.series):(this.ctx.bar=new Zt(this.ctx,r),G=this.ctx.bar.draw(x.series));break;case"candlestick":G=new Nt(this.ctx,r).draw(x.series,"candlestick");break;case"boxPlot":G=new Nt(this.ctx,r).draw(x.series,g.chart.type);break;case"rangeBar":G=this.ctx.rangeBar.draw(x.series);break;case"rangeArea":G=Ee.draw(x.seriesRangeStart,"rangeArea",void 0,x.seriesRangeEnd);break;case"heatmap":G=new Ne(this.ctx,r).draw(x.series);break;case"treemap":G=new Ei(this.ctx,r).draw(x.series);break;case"pie":case"donut":case"polarArea":G=this.ctx.pie.draw(x.series);break;case"radialBar":G=Ce.draw(x.series);break;case"radar":G=Re.draw(x.series);break;default:G=Ee.draw(x.series)}return G}},{key:"setSVGDimensions",value:function(){var i=this.w.globals,r=this.w.config;i.svgWidth=r.chart.width,i.svgHeight=r.chart.height;var d=Je.getDimensions(this.el),g=r.chart.width.toString().split(/[0-9]+/g).pop();"%"===g?Je.isNumber(d[0])&&(0===d[0].width&&(d=Je.getDimensions(this.el.parentNode)),i.svgWidth=d[0]*parseInt(r.chart.width,10)/100):"px"!==g&&""!==g||(i.svgWidth=parseInt(r.chart.width,10));var x=r.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==i.svgHeight&&""!==i.svgHeight)if("%"===x){var w=Je.getDimensions(this.el.parentNode);i.svgHeight=w[1]*parseInt(r.chart.height,10)/100}else i.svgHeight=parseInt(r.chart.height,10);else i.svgHeight=i.axisCharts?i.svgWidth/1.61:i.svgWidth/1.2;i.svgWidth<0&&(i.svgWidth=0),i.svgHeight<0&&(i.svgHeight=0),rt.setAttrs(i.dom.Paper.node,{width:i.svgWidth,height:i.svgHeight}),"%"!==x&&(i.dom.Paper.node.parentNode.parentNode.style.minHeight=i.svgHeight+(r.chart.sparkline.enabled?0:i.axisCharts?r.chart.parentHeightOffset:0)+"px"),i.dom.elWrap.style.width=i.svgWidth+"px",i.dom.elWrap.style.height=i.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var i=this.w.globals;rt.setAttrs(i.dom.elGraphical.node,{transform:"translate("+i.translateX+", "+i.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var i=this.w,r=i.globals,d=0,g=i.config.chart.sparkline.enabled?1:15;g+=i.config.grid.padding.bottom,"top"!==i.config.legend.position&&"bottom"!==i.config.legend.position||!i.config.legend.show||i.config.legend.floating||(d=new fr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var x=i.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),w=2.05*i.globals.radialSize;if(x&&!i.config.chart.sparkline.enabled&&0!==i.config.plotOptions.radialBar.startAngle){var I=Je.getBoundingClientRect(x);w=I.bottom,w=Math.max(2.05*i.globals.radialSize,I.bottom-I.top)}var Y=w+r.translateY+d+g;r.dom.elLegendForeign&&r.dom.elLegendForeign.setAttribute("height",Y),i.config.chart.height&&String(i.config.chart.height).indexOf("%")>0||(r.dom.elWrap.style.height=Y+"px",rt.setAttrs(r.dom.Paper.node,{height:Y}),r.dom.Paper.node.parentNode.parentNode.style.minHeight=Y+"px")}},{key:"coreCalculations",value:function(){new en(this.ctx).init()}},{key:"resetGlobals",value:function(){var i=this,r=function(){return i.w.config.series.map(function(x){return[]})},d=new tn,g=this.w.globals;d.initGlobalVars(g),g.seriesXvalues=r(),g.seriesYvalues=r()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var i=null,r=this.w;if(r.globals.axisCharts){if("back"===r.config.xaxis.crosshairs.position&&new Ci(this.ctx).drawXCrosshairs(),"back"===r.config.yaxis[0].crosshairs.position&&new Ci(this.ctx).drawYCrosshairs(),"datetime"===r.config.xaxis.type&&void 0===r.config.xaxis.labels.formatter){this.ctx.timeScale=new Ct(this.ctx);var d=[];isFinite(r.globals.minX)&&isFinite(r.globals.maxX)&&!r.globals.isBarHorizontal?d=this.ctx.timeScale.calculateTimeScaleTicks(r.globals.minX,r.globals.maxX):r.globals.isBarHorizontal&&(d=this.ctx.timeScale.calculateTimeScaleTicks(r.globals.minY,r.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(d)}i=new bi(this.ctx).getCalculatedRatios()}return i}},{key:"updateSourceChart",value:function(i){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:i.w.globals.minX,max:i.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var i=this,r=this.w;if(r.config.chart.brush.enabled&&"function"!=typeof r.config.chart.events.selection){var d=Array.isArray(r.config.chart.brush.targets)?r.config.chart.brush.targets:[r.config.chart.brush.target];d.forEach(function(g){var x=ApexCharts.getChartByID(g);x.w.globals.brushSource=i.ctx,"function"!=typeof x.w.config.chart.events.zoomed&&(x.w.config.chart.events.zoomed=function(){i.updateSourceChart(x)}),"function"!=typeof x.w.config.chart.events.scrolled&&(x.w.config.chart.events.scrolled=function(){i.updateSourceChart(x)})}),r.config.chart.events.selection=function(g,x){d.forEach(function(w){ApexCharts.getChartByID(w).ctx.updateHelpers._updateOptions({xaxis:{min:x.xaxis.min,max:x.xaxis.max}},!1,!1,!1,!1)})}}}}]),pe}(),xe=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"_updateOptions",value:function(i){var r=this,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(I){var R=[r.ctx];x&&(R=r.ctx.getSyncedCharts()),r.ctx.w.globals.isExecCalled&&(R=[r.ctx],r.ctx.w.globals.isExecCalled=!1),R.forEach(function(Y,W){var X=Y.w;if(X.globals.shouldAnimate=g,d||(X.globals.resized=!0,X.globals.dataChanged=!0,g&&Y.series.getPreviousPaths()),i&&"object"===c(i)&&(Y.config=new gn(i),i=bi.extendArrayProps(Y.config,i,X),Y.w.globals.chartID!==r.ctx.w.globals.chartID&&delete i.series,X.config=Je.extend(X.config,i),w&&(X.globals.lastXAxis=i.xaxis?Je.clone(i.xaxis):[],X.globals.lastYAxis=i.yaxis?Je.clone(i.yaxis):[],X.globals.initialConfig=Je.extend({},X.config),X.globals.initialSeries=Je.clone(X.config.series),i.series))){for(var Q=0;Q<X.globals.collapsedSeriesIndices.length;Q++){var ce=X.config.series[X.globals.collapsedSeriesIndices[Q]];X.globals.collapsedSeries[Q].data=X.globals.axisCharts?ce.data.slice():ce}for(var me=0;me<X.globals.ancillaryCollapsedSeriesIndices.length;me++){var Ee=X.config.series[X.globals.ancillaryCollapsedSeriesIndices[me]];X.globals.ancillaryCollapsedSeries[me].data=X.globals.axisCharts?Ee.data.slice():Ee}Y.series.emptyCollapsedSeries(X.config.series)}return Y.update(i).then(function(){W===R.length-1&&I(Y)})})})}},{key:"_updateSeries",value:function(i,r){var d=this,g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(x){var w,I=d.w;return I.globals.shouldAnimate=r,I.globals.dataChanged=!0,r&&d.ctx.series.getPreviousPaths(),I.globals.axisCharts?(0===(w=i.map(function(R,Y){return d._extendSeries(R,Y)})).length&&(w=[{data:[]}]),I.config.series=w):I.config.series=i.slice(),g&&(I.globals.initialConfig.series=Je.clone(I.config.series),I.globals.initialSeries=Je.clone(I.config.series)),d.ctx.update().then(function(){x(d.ctx)})})}},{key:"_extendSeries",value:function(i,r){var d=this.w,g=d.config.series[r];return He(He({},d.config.series[r]),{},{name:i.name?i.name:g?.name,color:i.color?i.color:g?.color,type:i.type?i.type:g?.type,group:i.group?i.group:g?.group,data:i.data?i.data:g?.data,zIndex:void 0!==i.zIndex?i.zIndex:r})}},{key:"toggleDataPointSelection",value:function(i,r){var d=this.w,g=null,x=".apexcharts-series[data\\:realIndex='".concat(i,"']");return d.globals.axisCharts?g=d.globals.dom.Paper.select("".concat(x," path[j='").concat(r,"'], ").concat(x," circle[j='").concat(r,"'], ").concat(x," rect[j='").concat(r,"']")).members[0]:void 0===r&&(g=d.globals.dom.Paper.select("".concat(x," path[j='").concat(i,"']")).members[0],"pie"!==d.config.chart.type&&"polarArea"!==d.config.chart.type&&"donut"!==d.config.chart.type||this.ctx.pie.pieClicked(i)),g?(new rt(this.ctx).pathMouseDown(g,null),g.node?g.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(i){var r=this.w;if(["min","max"].forEach(function(g){void 0!==i.xaxis[g]&&(r.config.xaxis[g]=i.xaxis[g],r.globals.lastXAxis[g]=i.xaxis[g])}),i.xaxis.categories&&i.xaxis.categories.length&&(r.config.xaxis.categories=i.xaxis.categories),r.config.xaxis.convertedCatToNumeric){var d=new ji(i);i=d.convertCatToNumericXaxis(i,this.ctx)}return i}},{key:"forceYAxisUpdate",value:function(i){return i.chart&&i.chart.stacked&&"100%"===i.chart.stackType&&(Array.isArray(i.yaxis)?i.yaxis.forEach(function(r,d){i.yaxis[d].min=0,i.yaxis[d].max=100}):(i.yaxis.min=0,i.yaxis.max=100)),i}},{key:"revertDefaultAxisMinMax",value:function(i){var r=this,d=this.w,g=d.globals.lastXAxis,x=d.globals.lastYAxis;i&&i.xaxis&&(g=i.xaxis),i&&i.yaxis&&(x=i.yaxis),d.config.xaxis.min=g.min,d.config.xaxis.max=g.max,d.config.yaxis.map(function(I,R){d.globals.zoomed||void 0!==x[R]?function(I){void 0!==x[I]&&(d.config.yaxis[I].min=x[I].min,d.config.yaxis[I].max=x[I].max)}(R):void 0!==r.ctx.opts.yaxis[R]&&(I.min=r.ctx.opts.yaxis[R].min,I.max=r.ctx.opts.yaxis[R].max)})}}]),pe}();ei=typeof window<"u"?window:void 0,Yi=function(pe,i){var r=(void 0!==this?this:pe).SVG=function(G){if(r.supported)return G=new r.Doc(G),r.parser.draw||r.prepare(),G};if(r.ns="http://www.w3.org/2000/svg",r.xmlns="http://www.w3.org/2000/xmlns/",r.xlink="http://www.w3.org/1999/xlink",r.svgjs="http://svgjs.dev",r.supported=!0,!r.supported)return!1;r.did=1e3,r.eid=function(G){return"Svgjs"+W(G)+r.did++},r.create=function(G){var re=i.createElementNS(this.ns,G);return re.setAttribute("id",this.eid(G)),re},r.extend=function(){var G,re;re=(G=[].slice.call(arguments)).pop();for(var te=G.length-1;te>=0;te--)if(G[te])for(var oe in re)G[te].prototype[oe]=re[oe];r.Set&&r.Set.inherit&&r.Set.inherit()},r.invent=function(G){var re="function"==typeof G.create?G.create:function(){this.constructor.call(this,r.create(G.create))};return G.inherit&&(re.prototype=new G.inherit),G.extend&&r.extend(re,G.extend),G.construct&&r.extend(G.parent||r.Container,G.construct),re},r.adopt=function(G){return G?G.instance?G.instance:((re="svg"==G.nodeName?G.parentNode instanceof pe.SVGElement?new r.Nested:new r.Doc:"linearGradient"==G.nodeName?new r.Gradient("linear"):"radialGradient"==G.nodeName?new r.Gradient("radial"):r[W(G.nodeName)]?new(r[W(G.nodeName)]):new r.Element(G)).type=G.nodeName,re.node=G,G.instance=re,re instanceof r.Doc&&re.namespace().defs(),re.setData(JSON.parse(G.getAttribute("svgjs:data"))||{}),re):null;var re},r.prepare=function(){var G=i.getElementsByTagName("body")[0],re=(G?new r.Doc(G):r.adopt(i.documentElement).nested()).size(2,0);r.parser={body:G||i.documentElement,draw:re.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:re.polyline().node,path:re.path().node,native:r.create("svg")}},r.parser={native:r.create("svg")},i.addEventListener("DOMContentLoaded",function(){r.parser.draw||r.prepare()},!1),r.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},r.utils={map:function(G,re){for(var te=G.length,oe=[],ye=0;ye<te;ye++)oe.push(re(G[ye]));return oe},filter:function(G,re){for(var te=G.length,oe=[],ye=0;ye<te;ye++)re(G[ye])&&oe.push(G[ye]);return oe},filterSVGElements:function(G){return this.filter(G,function(re){return re instanceof pe.SVGElement})}},r.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},r.Color=function(G){var re,te;this.r=0,this.g=0,this.b=0,G&&("string"==typeof G?r.regex.isRgb.test(G)?(re=r.regex.rgb.exec(G.replace(r.regex.whitespace,"")),this.r=parseInt(re[1]),this.g=parseInt(re[2]),this.b=parseInt(re[3])):r.regex.isHex.test(G)&&(re=r.regex.hex.exec(4==(te=G).length?["#",te.substring(1,2),te.substring(1,2),te.substring(2,3),te.substring(2,3),te.substring(3,4),te.substring(3,4)].join(""):te),this.r=parseInt(re[1],16),this.g=parseInt(re[2],16),this.b=parseInt(re[3],16)):"object"===c(G)&&(this.r=G.r,this.g=G.g,this.b=G.b))},r.extend(r.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+X(this.r)+X(this.g)+X(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(G){return this.destination=new r.Color(G),this},at:function(G){return this.destination?new r.Color({r:~~(this.r+(this.destination.r-this.r)*(G=G<0?0:G>1?1:G)),g:~~(this.g+(this.destination.g-this.g)*G),b:~~(this.b+(this.destination.b-this.b)*G)}):this}}),r.Color.test=function(G){return r.regex.isHex.test(G+="")||r.regex.isRgb.test(G)},r.Color.isRgb=function(G){return G&&"number"==typeof G.r&&"number"==typeof G.g&&"number"==typeof G.b},r.Color.isColor=function(G){return r.Color.isRgb(G)||r.Color.test(G)},r.Array=function(G,re){0==(G=(G||[]).valueOf()).length&&re&&(G=re.valueOf()),this.value=this.parse(G)},r.extend(r.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(G){return G=G.valueOf(),Array.isArray(G)?G:this.split(G)}}),r.PointArray=function(G,re){r.Array.call(this,G,re||[[0,0]])},r.PointArray.prototype=new r.Array,r.PointArray.prototype.constructor=r.PointArray;for(var d={M:function(G,re,te){return re.x=te.x=G[0],re.y=te.y=G[1],["M",re.x,re.y]},L:function(G,re){return re.x=G[0],re.y=G[1],["L",G[0],G[1]]},H:function(G,re){return re.x=G[0],["H",G[0]]},V:function(G,re){return re.y=G[0],["V",G[0]]},C:function(G,re){return re.x=G[4],re.y=G[5],["C",G[0],G[1],G[2],G[3],G[4],G[5]]},Q:function(G,re){return re.x=G[2],re.y=G[3],["Q",G[0],G[1],G[2],G[3]]},S:function(G,re){return re.x=G[2],re.y=G[3],["S",G[0],G[1],G[2],G[3]]},Z:function(G,re,te){return re.x=te.x,re.y=te.y,["Z"]}},g="mlhvqtcsaz".split(""),x=0,w=g.length;x<w;++x)d[g[x]]=function(G){return function(re,te,oe){if("H"==G)re[0]=re[0]+te.x;else if("V"==G)re[0]=re[0]+te.y;else if("A"==G)re[5]=re[5]+te.x,re[6]=re[6]+te.y;else for(var ye=0,Fe=re.length;ye<Fe;++ye)re[ye]=re[ye]+(ye%2?te.y:te.x);if(d&&"function"==typeof d[G])return d[G](re,te,oe)}}(g[x].toUpperCase());r.PathArray=function(G,re){r.Array.call(this,G,re||[["M",0,0]])},r.PathArray.prototype=new r.Array,r.PathArray.prototype.constructor=r.PathArray,r.extend(r.PathArray,{toString:function(){return function(G){for(var re=0,te=G.length,oe="";re<te;re++)oe+=G[re][0],null!=G[re][1]&&(oe+=G[re][1],null!=G[re][2]&&(oe+=" ",oe+=G[re][2],null!=G[re][3]&&(oe+=" ",oe+=G[re][3],oe+=" ",oe+=G[re][4],null!=G[re][5]&&(oe+=" ",oe+=G[re][5],oe+=" ",oe+=G[re][6],null!=G[re][7]&&(oe+=" ",oe+=G[re][7])))));return oe+" "}(this.value)},move:function(G,re){return this.bbox(),this},at:function(G){if(!this.destination)return this;for(var re=this.value,te=this.destination.value,oe=[],ye=new r.PathArray,Fe=0,ht=re.length;Fe<ht;Fe++){oe[Fe]=[re[Fe][0]];for(var yt=1,ii=re[Fe].length;yt<ii;yt++)oe[Fe][yt]=re[Fe][yt]+(te[Fe][yt]-re[Fe][yt])*G;"A"===oe[Fe][0]&&(oe[Fe][4]=+(0!=oe[Fe][4]),oe[Fe][5]=+(0!=oe[Fe][5]))}return ye.value=oe,ye},parse:function(G){if(G instanceof r.PathArray)return G.valueOf();var re,te={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};G="string"==typeof G?G.replace(r.regex.numbersWithDots,R).replace(r.regex.pathLetters," $& ").replace(r.regex.hyphen,"$1 -").trim().split(r.regex.delimiter):G.reduce(function(ii,hi){return[].concat.call(ii,hi)},[]);var oe=[],ye=new r.Point,Fe=new r.Point,ht=0,yt=G.length;do{r.regex.isPathLetter.test(G[ht])?(re=G[ht],++ht):"M"==re?re="L":"m"==re&&(re="l"),oe.push(d[re].call(null,G.slice(ht,ht+=te[re.toUpperCase()]).map(parseFloat),ye,Fe))}while(yt>ht);return oe},bbox:function(){return r.parser.draw||r.prepare(),r.parser.path.setAttribute("d",this.toString()),r.parser.path.getBBox()}}),r.Number=r.invent({create:function(G,re){this.value=0,this.unit=re||"","number"==typeof G?this.value=isNaN(G)?0:isFinite(G)?G:G<0?-34e37:34e37:"string"==typeof G?(re=G.match(r.regex.numberAndUnit))&&(this.value=parseFloat(re[1]),"%"==re[5]?this.value/=100:"s"==re[5]&&(this.value*=1e3),this.unit=re[5]):G instanceof r.Number&&(this.value=G.valueOf(),this.unit=G.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(G){return G=new r.Number(G),new r.Number(this+G,this.unit||G.unit)},minus:function(G){return G=new r.Number(G),new r.Number(this-G,this.unit||G.unit)},times:function(G){return G=new r.Number(G),new r.Number(this*G,this.unit||G.unit)},divide:function(G){return G=new r.Number(G),new r.Number(this/G,this.unit||G.unit)},to:function(G){var re=new r.Number(this);return"string"==typeof G&&(re.unit=G),re},morph:function(G){return this.destination=new r.Number(G),G.relative&&(this.destination.value+=this.value),this},at:function(G){return this.destination?new r.Number(this.destination).minus(this).times(G).plus(this):this}}}),r.Element=r.invent({create:function(G){this._stroke=r.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=G)&&(this.type=G.nodeName,this.node.instance=this,this._stroke=G.getAttribute("stroke")||this._stroke)},extend:{x:function(G){return this.attr("x",G)},y:function(G){return this.attr("y",G)},cx:function(G){return null==G?this.x()+this.width()/2:this.x(G-this.width()/2)},cy:function(G){return null==G?this.y()+this.height()/2:this.y(G-this.height()/2)},move:function(G,re){return this.x(G).y(re)},center:function(G,re){return this.cx(G).cy(re)},width:function(G){return this.attr("width",G)},height:function(G){return this.attr("height",G)},size:function(G,re){var te=Q(this,G,re);return this.width(new r.Number(te.width)).height(new r.Number(te.height))},clone:function(G){this.writeDataToDom();var re=Ee(this.node.cloneNode(!0));return G?G.add(re):this.after(re),re},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(G){return this.after(G).remove(),G},addTo:function(G){return G.put(this)},putIn:function(G){return G.add(this)},id:function(G){return this.attr("id",G)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var G=this.attr("class");return null==G?[]:G.trim().split(r.regex.delimiter)},hasClass:function(G){return-1!=this.classes().indexOf(G)},addClass:function(G){if(!this.hasClass(G)){var re=this.classes();re.push(G),this.attr("class",re.join(" "))}return this},removeClass:function(G){return this.hasClass(G)&&this.attr("class",this.classes().filter(function(re){return re!=G}).join(" ")),this},toggleClass:function(G){return this.hasClass(G)?this.removeClass(G):this.addClass(G)},reference:function(G){return r.get(this.attr(G))},parent:function(G){var re=this;if(!re.node.parentNode)return null;if(re=r.adopt(re.node.parentNode),!G)return re;for(;re&&re.node instanceof pe.SVGElement;){if("string"==typeof G?re.matches(G):re instanceof G)return re;if(!re.node.parentNode||"#document"==re.node.parentNode.nodeName)return null;re=r.adopt(re.node.parentNode)}},doc:function(){return this instanceof r.Doc?this:this.parent(r.Doc)},parents:function(G){var re=[],te=this;do{if(!(te=te.parent(G))||!te.node)break;re.push(te)}while(te.parent);return re},matches:function(G){return((re=this.node).matches||re.matchesSelector||re.msMatchesSelector||re.mozMatchesSelector||re.webkitMatchesSelector||re.oMatchesSelector).call(re,G);var re},native:function(){return this.node},svg:function(G){var re=i.createElement("svg");if(!(G&&this instanceof r.Parent))return re.appendChild(G=i.createElement("svg")),this.writeDataToDom(),G.appendChild(this.node.cloneNode(!0)),re.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");re.innerHTML="<svg>"+G.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var te=0,oe=re.firstChild.childNodes.length;te<oe;te++)this.node.appendChild(re.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(G){return this.dom=G,this},is:function(G){return this instanceof G}}}),r.easing={"-":function(G){return G},"<>":function(G){return-Math.cos(G*Math.PI)/2+.5},">":function(G){return Math.sin(G*Math.PI/2)},"<":function(G){return 1-Math.cos(G*Math.PI/2)}},r.morph=function(G){return function(re,te){return new r.MorphObj(re,te).at(G)}},r.Situation=r.invent({create:function(G){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new r.Number(G.duration).valueOf(),this.delay=new r.Number(G.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=G.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),r.FX=r.invent({create:function(G){this._target=G,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(G,re,te){"object"===c(G)&&(re=G.ease,te=G.delay,G=G.duration);var oe=new r.Situation({duration:G||1e3,delay:te||0,ease:r.easing[re||"-"]||re});return this.queue(oe),this},target:function(G){return G&&G instanceof r.Element?(this._target=G,this):this._target},timeToAbsPos:function(G){return(G-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(G){return this.situation.duration/this._speed*G+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=pe.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){pe.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(G){return("function"==typeof G||G instanceof r.Situation)&&this.situations.push(G),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof r.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var G,re=this.situation;if(re.init)return this;for(var te in re.animations){G=this.target()[te](),Array.isArray(G)||(G=[G]),Array.isArray(re.animations[te])||(re.animations[te]=[re.animations[te]]);for(var oe=G.length;oe--;)re.animations[te][oe]instanceof r.Number&&(G[oe]=new r.Number(G[oe])),re.animations[te][oe]=G[oe].morph(re.animations[te][oe])}for(var te in re.attrs)re.attrs[te]=new r.MorphObj(this.target().attr(te),re.attrs[te]);for(var te in re.styles)re.styles[te]=new r.MorphObj(this.target().style(te),re.styles[te]);return re.initialTransformation=this.target().matrixify(),re.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(G,re){var te=this.active;return this.active=!1,re&&this.clearQueue(),G&&this.situation&&(!te&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(G){var re=this.last();return this.target().on("finished.fx",function te(oe){oe.detail.situation==re&&(G.call(this,re),this.off("finished.fx",te))}),this._callStart()},during:function(G){var re=this.last(),te=function(oe){oe.detail.situation==re&&G.call(this,oe.detail.pos,r.morph(oe.detail.pos),oe.detail.eased,re)};return this.target().off("during.fx",te).on("during.fx",te),this.after(function(){this.off("during.fx",te)}),this._callStart()},afterAll:function(G){var re=function te(oe){G.call(this),this.off("allfinished.fx",te)};return this.target().off("allfinished.fx",re).on("allfinished.fx",re),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(G,re,te){return this.last()[te||"animations"][G]=re,this._callStart()},step:function(G){var re,te,oe;G||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(re=Math.max(this.absPos,0),te=Math.floor(re),!0===this.situation.loops||te<this.situation.loops?(this.pos=re-te,oe=this.situation.loop,this.situation.loop=te):(this.absPos=this.situation.loops,this.pos=1,oe=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-oe)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var ye=this.situation.ease(this.pos);for(var Fe in this.situation.once)Fe>this.lastPos&&Fe<=ye&&(this.situation.once[Fe].call(this.target(),this.pos,ye),delete this.situation.once[Fe]);return this.active&&this.target().fire("during",{pos:this.pos,eased:ye,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=ye,this):this},eachAt:function(){var G,re=this,te=this.target(),oe=this.situation;for(var ye in oe.animations)G=[].concat(oe.animations[ye]).map(function(yt){return"string"!=typeof yt&&yt.at?yt.at(oe.ease(re.pos),re.pos):yt}),te[ye].apply(te,G);for(var ye in oe.attrs)G=[ye].concat(oe.attrs[ye]).map(function(ii){return"string"!=typeof ii&&ii.at?ii.at(oe.ease(re.pos),re.pos):ii}),te.attr.apply(te,G);for(var ye in oe.styles)G=[ye].concat(oe.styles[ye]).map(function(ii){return"string"!=typeof ii&&ii.at?ii.at(oe.ease(re.pos),re.pos):ii}),te.style.apply(te,G);if(oe.transforms.length){G=oe.initialTransformation,ye=0;for(var Fe=oe.transforms.length;ye<Fe;ye++){var ht=oe.transforms[ye];ht instanceof r.Matrix?G=ht.relative?G.multiply((new r.Matrix).morph(ht).at(oe.ease(this.pos))):G.morph(ht).at(oe.ease(this.pos)):(ht.relative||ht.undo(G.extract()),G=G.multiply(ht.at(oe.ease(this.pos))))}te.matrix(G)}return this},once:function(G,re,te){var oe=this.last();return te||(G=oe.ease(G)),oe.once[G]=re,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:r.Element,construct:{animate:function(G,re,te){return(this.fx||(this.fx=new r.FX(this))).animate(G,re,te)},delay:function(G){return(this.fx||(this.fx=new r.FX(this))).delay(G)},stop:function(G,re){return this.fx&&this.fx.stop(G,re),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),r.MorphObj=r.invent({create:function(G,re){return r.Color.isColor(re)?new r.Color(G).morph(re):r.regex.delimiter.test(G)?r.regex.pathLetters.test(G)?new r.PathArray(G).morph(re):new r.Array(G).morph(re):r.regex.numberAndUnit.test(re)?new r.Number(G).morph(re):(this.value=G,void(this.destination=re))},extend:{at:function(G,re){return re<1?this.value:this.destination},valueOf:function(){return this.value}}}),r.extend(r.FX,{attr:function(G,re,te){if("object"===c(G))for(var oe in G)this.attr(oe,G[oe]);else this.add(G,re,"attrs");return this},plot:function(G,re,te,oe){return 4==arguments.length?this.plot([G,re,te,oe]):this.add("plot",new(this.target().morphArray)(G))}}),r.Box=r.invent({create:function(G,re,te,oe){if(!("object"!==c(G)||G instanceof r.Element))return r.Box.call(this,null!=G.left?G.left:G.x,null!=G.top?G.top:G.y,G.width,G.height);var ye;4==arguments.length&&(this.x=G,this.y=re,this.width=te,this.height=oe),null==(ye=this).x&&(ye.x=0,ye.y=0,ye.width=0,ye.height=0),ye.w=ye.width,ye.h=ye.height,ye.x2=ye.x+ye.width,ye.y2=ye.y+ye.height,ye.cx=ye.x+ye.width/2,ye.cy=ye.y+ye.height/2}}),r.BBox=r.invent({create:function(G){if(r.Box.apply(this,[].slice.call(arguments)),G instanceof r.Element){var re;try{if(!i.documentElement.contains){for(var te=G.node;te.parentNode;)te=te.parentNode;if(te!=i)throw new Error("Element not in the dom")}re=G.node.getBBox()}catch{if(G instanceof r.Shape){r.parser.draw||r.prepare();var oe=G.clone(r.parser.draw.instance).show();oe&&oe.node&&"function"==typeof oe.node.getBBox&&(re=oe.node.getBBox()),oe&&"function"==typeof oe.remove&&oe.remove()}else re={x:G.node.clientLeft,y:G.node.clientTop,width:G.node.clientWidth,height:G.node.clientHeight}}r.Box.call(this,re)}},inherit:r.Box,parent:r.Element,construct:{bbox:function(){return new r.BBox(this)}}}),r.BBox.prototype.constructor=r.BBox,r.Matrix=r.invent({create:function(G){var re=me([1,0,0,1,0,0]);G=null===G?re:G instanceof r.Element?G.matrixify():"string"==typeof G?me(G.split(r.regex.delimiter).map(parseFloat)):6==arguments.length?me([].slice.call(arguments)):Array.isArray(G)?me(G):G&&"object"===c(G)?G:re;for(var te=Ce.length-1;te>=0;--te)this[Ce[te]]=null!=G[Ce[te]]?G[Ce[te]]:re[Ce[te]]},extend:{extract:function(){var G=ce(this,0,1);ce(this,1,0);var re=180/Math.PI*Math.atan2(G.y,G.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(re*Math.PI/180)+this.f*Math.sin(re*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(re*Math.PI/180)+this.e*Math.sin(-re*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:re,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new r.Matrix(this)}},clone:function(){return new r.Matrix(this)},morph:function(G){return this.destination=new r.Matrix(G),this},multiply:function(G){return new r.Matrix(this.native().multiply((re=G,re instanceof r.Matrix||(re=new r.Matrix(re)),re).native()));var re},inverse:function(){return new r.Matrix(this.native().inverse())},translate:function(G,re){return new r.Matrix(this.native().translate(G||0,re||0))},native:function(){for(var G=r.parser.native.createSVGMatrix(),re=Ce.length-1;re>=0;re--)G[Ce[re]]=this[Ce[re]];return G},toString:function(){return"matrix("+De(this.a)+","+De(this.b)+","+De(this.c)+","+De(this.d)+","+De(this.e)+","+De(this.f)+")"}},parent:r.Element,construct:{ctm:function(){return new r.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof r.Nested){var G=this.rect(1,1),re=G.node.getScreenCTM();return G.remove(),new r.Matrix(re)}return new r.Matrix(this.node.getScreenCTM())}}}),r.Point=r.invent({create:function(G,re){var te;te=Array.isArray(G)?{x:G[0],y:G[1]}:"object"===c(G)?{x:G.x,y:G.y}:null!=G?{x:G,y:re??G}:{x:0,y:0},this.x=te.x,this.y=te.y},extend:{clone:function(){return new r.Point(this)},morph:function(G,re){return this.destination=new r.Point(G,re),this}}}),r.extend(r.Element,{point:function(G,re){return new r.Point(G,re).transform(this.screenCTM().inverse())}}),r.extend(r.Element,{attr:function(G,re,te){if(null==G){for(G={},te=(re=this.node.attributes).length-1;te>=0;te--)G[re[te].nodeName]=r.regex.isNumber.test(re[te].nodeValue)?parseFloat(re[te].nodeValue):re[te].nodeValue;return G}if("object"===c(G))for(var oe in G)this.attr(oe,G[oe]);else if(null===re)this.node.removeAttribute(G);else{if(null==re)return null==(re=this.node.getAttribute(G))?r.defaults.attrs[G]:r.regex.isNumber.test(re)?parseFloat(re):re;"stroke-width"==G?this.attr("stroke",parseFloat(re)>0?this._stroke:null):"stroke"==G&&(this._stroke=re),"fill"!=G&&"stroke"!=G||(r.regex.isImage.test(re)&&(re=this.doc().defs().image(re,0,0)),re instanceof r.Image&&(re=this.doc().defs().pattern(0,0,function(){this.add(re)}))),"number"==typeof re?re=new r.Number(re):r.Color.isColor(re)?re=new r.Color(re):Array.isArray(re)&&(re=new r.Array(re)),"leading"==G?this.leading&&this.leading(re):"string"==typeof te?this.node.setAttributeNS(te,G,re.toString()):this.node.setAttribute(G,re.toString()),!this.rebuild||"font-size"!=G&&"x"!=G||this.rebuild(G,re)}return this}}),r.extend(r.Element,{transform:function(G,re){var te;return"object"!==c(G)?(te=new r.Matrix(this).extract(),"string"==typeof G?te[G]:te):(te=new r.Matrix(this),re=!!re||!!G.relative,null!=G.a&&(te=re?te.multiply(new r.Matrix(G)):new r.Matrix(G)),this.attr("transform",te))}}),r.extend(r.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(r.regex.transforms).slice(0,-1).map(function(G){var re=G.trim().split("(");return[re[0],re[1].split(r.regex.delimiter).map(function(te){return parseFloat(te)})]}).reduce(function(G,re){return"matrix"==re[0]?G.multiply(me(re[1])):G[re[0]].apply(G,re[1])},new r.Matrix)},toParent:function(G){if(this==G)return this;var re=this.screenCTM(),te=G.screenCTM().inverse();return this.addTo(G).untransform().transform(te.multiply(re)),this},toDoc:function(){return this.toParent(this.doc())}}),r.Transformation=r.invent({create:function(G,re){if(arguments.length>1&&"boolean"!=typeof re)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(G))for(var te=0,oe=this.arguments.length;te<oe;++te)this[this.arguments[te]]=G[te];else if(G&&"object"===c(G))for(te=0,oe=this.arguments.length;te<oe;++te)this[this.arguments[te]]=G[this.arguments[te]];this.inversed=!1,!0===re&&(this.inversed=!0)}}),r.Translate=r.invent({parent:r.Matrix,inherit:r.Transformation,create:function(G,re){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),r.extend(r.Element,{style:function(G,re){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===c(G))for(var te in G)this.style(te,G[te]);else{if(!r.regex.isCss.test(G))return this.node.style[Y(G)];for(G=G.split(/\s*;\s*/).filter(function(oe){return!!oe}).map(function(oe){return oe.split(/\s*:\s*/)});re=G.pop();)this.style(re[0],re[1])}else this.node.style[Y(G)]=null===re||r.regex.isBlank.test(re)?"":re;return this}}),r.Parent=r.invent({create:function(G){this.constructor.call(this,G)},inherit:r.Element,extend:{children:function(){return r.utils.map(r.utils.filterSVGElements(this.node.childNodes),function(G){return r.adopt(G)})},add:function(G,re){return null==re?this.node.appendChild(G.node):G.node!=this.node.childNodes[re]&&this.node.insertBefore(G.node,this.node.childNodes[re]),this},put:function(G,re){return this.add(G,re),G},has:function(G){return this.index(G)>=0},index:function(G){return[].slice.call(this.node.childNodes).indexOf(G.node)},get:function(G){return r.adopt(this.node.childNodes[G])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(G,re){for(var te=this.children(),oe=0,ye=te.length;oe<ye;oe++)te[oe]instanceof r.Element&&G.apply(te[oe],[oe,te]),re&&te[oe]instanceof r.Container&&te[oe].each(G,re);return this},removeElement:function(G){return this.node.removeChild(G.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),r.extend(r.Parent,{ungroup:function(G,re){return 0===re||this instanceof r.Defs||this.node==r.parser.draw||(G=G||(this instanceof r.Doc?this:this.parent(r.Parent)),re=re||1/0,this.each(function(){return this instanceof r.Defs?this:this instanceof r.Parent?this.ungroup(G,re-1):this.toParent(G)}),this.node.firstChild||this.remove()),this},flatten:function(G,re){return this.ungroup(G,re)}}),r.Container=r.invent({create:function(G){this.constructor.call(this,G)},inherit:r.Parent}),r.ViewBox=r.invent({parent:r.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(G){r.Element.prototype[G]=function(re){return r.on(this.node,G,re),this}}),r.listeners=[],r.handlerMap=[],r.listenerId=0,r.on=function(G,re,te,oe,ye){var Fe=te.bind(oe||G.instance||G),ht=(r.handlerMap.indexOf(G)+1||r.handlerMap.push(G))-1,yt=re.split(".")[0],ii=re.split(".")[1]||"*";r.listeners[ht]=r.listeners[ht]||{},r.listeners[ht][yt]=r.listeners[ht][yt]||{},r.listeners[ht][yt][ii]=r.listeners[ht][yt][ii]||{},te._svgjsListenerId||(te._svgjsListenerId=++r.listenerId),r.listeners[ht][yt][ii][te._svgjsListenerId]=Fe,G.addEventListener(yt,Fe,ye||{passive:!1})},r.off=function(G,re,te){var oe=r.handlerMap.indexOf(G),ye=re&&re.split(".")[0],Fe=re&&re.split(".")[1],ht="";if(-1!=oe)if(te){if("function"==typeof te&&(te=te._svgjsListenerId),!te)return;r.listeners[oe][ye]&&r.listeners[oe][ye][Fe||"*"]&&(G.removeEventListener(ye,r.listeners[oe][ye][Fe||"*"][te],!1),delete r.listeners[oe][ye][Fe||"*"][te])}else if(Fe&&ye){if(r.listeners[oe][ye]&&r.listeners[oe][ye][Fe]){for(var yt in r.listeners[oe][ye][Fe])r.off(G,[ye,Fe].join("."),yt);delete r.listeners[oe][ye][Fe]}}else if(Fe)for(var ii in r.listeners[oe])for(var ht in r.listeners[oe][ii])Fe===ht&&r.off(G,[ii,Fe].join("."));else if(ye){if(r.listeners[oe][ye]){for(var ht in r.listeners[oe][ye])r.off(G,[ye,ht].join("."));delete r.listeners[oe][ye]}}else{for(var ii in r.listeners[oe])r.off(G,ii);delete r.listeners[oe],delete r.handlerMap[oe]}},r.extend(r.Element,{on:function(G,re,te,oe){return r.on(this.node,G,re,te,oe),this},off:function(G,re){return r.off(this.node,G,re),this},fire:function(G,re){return this.node.dispatchEvent(G instanceof pe.Event?G:G=new r.CustomEvent(G,{detail:re,cancelable:!0})),this._event=G,this},event:function(){return this._event}}),r.Defs=r.invent({create:"defs",inherit:r.Container}),r.G=r.invent({create:"g",inherit:r.Container,extend:{x:function(G){return null==G?this.transform("x"):this.transform({x:G-this.x()},!0)}},construct:{group:function(){return this.put(new r.G)}}}),r.Doc=r.invent({create:function(G){G&&("svg"==(G="string"==typeof G?i.getElementById(G):G).nodeName?this.constructor.call(this,G):(this.constructor.call(this,r.create("svg")),G.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:r.Container,extend:{namespace:function(){return this.attr({xmlns:r.ns,version:"1.1"}).attr("xmlns:xlink",r.xlink,r.xmlns).attr("xmlns:svgjs",r.svgjs,r.xmlns)},defs:function(){var G;return this._defs||(this._defs=(G=this.node.getElementsByTagName("defs")[0])?r.adopt(G):new r.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,r.parser.draw&&!r.parser.draw.parentNode&&this.node.appendChild(r.parser.draw),this},clone:function(G){this.writeDataToDom();var re=this.node,te=Ee(re.cloneNode(!0));return G?(G.node||G).appendChild(te.node):re.parentNode.insertBefore(te.node,re.nextSibling),te}}}),r.extend(r.Element,{}),r.Gradient=r.invent({create:function(G){this.constructor.call(this,r.create(G+"Gradient")),this.type=G},inherit:r.Container,extend:{at:function(G,re,te){return this.put(new r.Stop).update(G,re,te)},update:function(G){return this.clear(),"function"==typeof G&&G.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(G,re,te){return"transform"==G&&(G="gradientTransform"),r.Container.prototype.attr.call(this,G,re,te)}},construct:{gradient:function(G,re){return this.defs().gradient(G,re)}}}),r.extend(r.Gradient,r.FX,{from:function(G,re){return this.attr("radial"==(this._target||this).type?{fx:new r.Number(G),fy:new r.Number(re)}:{x1:new r.Number(G),y1:new r.Number(re)})},to:function(G,re){return this.attr("radial"==(this._target||this).type?{cx:new r.Number(G),cy:new r.Number(re)}:{x2:new r.Number(G),y2:new r.Number(re)})}}),r.extend(r.Defs,{gradient:function(G,re){return this.put(new r.Gradient(G)).update(re)}}),r.Stop=r.invent({create:"stop",inherit:r.Element,extend:{update:function(G){return("number"==typeof G||G instanceof r.Number)&&(G={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=G.opacity&&this.attr("stop-opacity",G.opacity),null!=G.color&&this.attr("stop-color",G.color),null!=G.offset&&this.attr("offset",new r.Number(G.offset)),this}}}),r.Pattern=r.invent({create:"pattern",inherit:r.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(G){return this.clear(),"function"==typeof G&&G.call(this,this),this},toString:function(){return this.fill()},attr:function(G,re,te){return"transform"==G&&(G="patternTransform"),r.Container.prototype.attr.call(this,G,re,te)}},construct:{pattern:function(G,re,te){return this.defs().pattern(G,re,te)}}}),r.extend(r.Defs,{pattern:function(G,re,te){return this.put(new r.Pattern).update(te).attr({x:0,y:0,width:G,height:re,patternUnits:"userSpaceOnUse"})}}),r.Shape=r.invent({create:function(G){this.constructor.call(this,G)},inherit:r.Element}),r.Symbol=r.invent({create:"symbol",inherit:r.Container,construct:{symbol:function(){return this.put(new r.Symbol)}}}),r.Use=r.invent({create:"use",inherit:r.Shape,extend:{element:function(G,re){return this.attr("href",(re||"")+"#"+G,r.xlink)}},construct:{use:function(G,re){return this.put(new r.Use).element(G,re)}}}),r.Rect=r.invent({create:"rect",inherit:r.Shape,construct:{rect:function(G,re){return this.put(new r.Rect).size(G,re)}}}),r.Circle=r.invent({create:"circle",inherit:r.Shape,construct:{circle:function(G){return this.put(new r.Circle).rx(new r.Number(G).divide(2)).move(0,0)}}}),r.extend(r.Circle,r.FX,{rx:function(G){return this.attr("r",G)},ry:function(G){return this.rx(G)}}),r.Ellipse=r.invent({create:"ellipse",inherit:r.Shape,construct:{ellipse:function(G,re){return this.put(new r.Ellipse).size(G,re).move(0,0)}}}),r.extend(r.Ellipse,r.Rect,r.FX,{rx:function(G){return this.attr("rx",G)},ry:function(G){return this.attr("ry",G)}}),r.extend(r.Circle,r.Ellipse,{x:function(G){return null==G?this.cx()-this.rx():this.cx(G+this.rx())},y:function(G){return null==G?this.cy()-this.ry():this.cy(G+this.ry())},cx:function(G){return null==G?this.attr("cx"):this.attr("cx",G)},cy:function(G){return null==G?this.attr("cy"):this.attr("cy",G)},width:function(G){return null==G?2*this.rx():this.rx(new r.Number(G).divide(2))},height:function(G){return null==G?2*this.ry():this.ry(new r.Number(G).divide(2))},size:function(G,re){var te=Q(this,G,re);return this.rx(new r.Number(te.width).divide(2)).ry(new r.Number(te.height).divide(2))}}),r.Line=r.invent({create:"line",inherit:r.Shape,extend:{array:function(){return new r.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(G,re,te,oe){return null==G?this.array():(G=void 0!==re?{x1:G,y1:re,x2:te,y2:oe}:new r.PointArray(G).toLine(),this.attr(G))},move:function(G,re){return this.attr(this.array().move(G,re).toLine())},size:function(G,re){var te=Q(this,G,re);return this.attr(this.array().size(te.width,te.height).toLine())}},construct:{line:function(G,re,te,oe){return r.Line.prototype.plot.apply(this.put(new r.Line),null!=G?[G,re,te,oe]:[0,0,0,0])}}}),r.Polyline=r.invent({create:"polyline",inherit:r.Shape,construct:{polyline:function(G){return this.put(new r.Polyline).plot(G||new r.PointArray)}}}),r.Polygon=r.invent({create:"polygon",inherit:r.Shape,construct:{polygon:function(G){return this.put(new r.Polygon).plot(G||new r.PointArray)}}}),r.extend(r.Polyline,r.Polygon,{array:function(){return this._array||(this._array=new r.PointArray(this.attr("points")))},plot:function(G){return null==G?this.array():this.clear().attr("points","string"==typeof G?G:this._array=new r.PointArray(G))},clear:function(){return delete this._array,this},move:function(G,re){return this.attr("points",this.array().move(G,re))},size:function(G,re){var te=Q(this,G,re);return this.attr("points",this.array().size(te.width,te.height))}}),r.extend(r.Line,r.Polyline,r.Polygon,{morphArray:r.PointArray,x:function(G){return null==G?this.bbox().x:this.move(G,this.bbox().y)},y:function(G){return null==G?this.bbox().y:this.move(this.bbox().x,G)},width:function(G){var re=this.bbox();return null==G?re.width:this.size(G,re.height)},height:function(G){var re=this.bbox();return null==G?re.height:this.size(re.width,G)}}),r.Path=r.invent({create:"path",inherit:r.Shape,extend:{morphArray:r.PathArray,array:function(){return this._array||(this._array=new r.PathArray(this.attr("d")))},plot:function(G){return null==G?this.array():this.clear().attr("d","string"==typeof G?G:this._array=new r.PathArray(G))},clear:function(){return delete this._array,this}},construct:{path:function(G){return this.put(new r.Path).plot(G||new r.PathArray)}}}),r.Image=r.invent({create:"image",inherit:r.Shape,extend:{load:function(G){if(!G)return this;var re=this,te=new pe.Image;return r.on(te,"load",function(){r.off(te);var oe=re.parent(r.Pattern);null!==oe&&(0==re.width()&&0==re.height()&&re.size(te.width,te.height),oe&&0==oe.width()&&0==oe.height()&&oe.size(re.width(),re.height()),"function"==typeof re._loaded&&re._loaded.call(re,{width:te.width,height:te.height,ratio:te.width/te.height,url:G}))}),r.on(te,"error",function(oe){r.off(te),"function"==typeof re._error&&re._error.call(re,oe)}),this.attr("href",te.src=this.src=G,r.xlink)},loaded:function(G){return this._loaded=G,this},error:function(G){return this._error=G,this}},construct:{image:function(G,re,te){return this.put(new r.Image).load(G).size(re||0,te||re||0)}}}),r.Text=r.invent({create:function(){this.constructor.call(this,r.create("text")),this.dom.leading=new r.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",r.defaults.attrs["font-family"])},inherit:r.Shape,extend:{x:function(G){return null==G?this.attr("x"):this.attr("x",G)},text:function(G){if(void 0===G){G="";for(var re=this.node.childNodes,te=0,oe=re.length;te<oe;++te)0!=te&&3!=re[te].nodeType&&1==r.adopt(re[te]).dom.newLined&&(G+="\n"),G+=re[te].textContent;return G}if(this.clear().build(!0),"function"==typeof G)G.call(this,this);else{te=0;for(var ye=(G=G.split("\n")).length;te<ye;te++)this.tspan(G[te]).newLine()}return this.build(!1).rebuild()},size:function(G){return this.attr("font-size",G).rebuild()},leading:function(G){return null==G?this.dom.leading:(this.dom.leading=new r.Number(G),this.rebuild())},lines:function(){var G=(this.textPath&&this.textPath()||this).node,re=r.utils.map(r.utils.filterSVGElements(G.childNodes),function(te){return r.adopt(te)});return new r.Set(re)},rebuild:function(G){if("boolean"==typeof G&&(this._rebuild=G),this._rebuild){var re=this,te=0,oe=this.dom.leading*new r.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(re.textPath()||this.attr("x",re.attr("x")),"\n"==this.text()?te+=oe:(this.attr("dy",oe+te),te=0))}),this.fire("rebuild")}return this},build:function(G){return this._build=!!G,this},setData:function(G){return this.dom=G,this.dom.leading=new r.Number(G.leading||1.3),this}},construct:{text:function(G){return this.put(new r.Text).text(G)},plain:function(G){return this.put(new r.Text).plain(G)}}}),r.Tspan=r.invent({create:"tspan",inherit:r.Shape,extend:{text:function(G){return null==G?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof G?G.call(this,this):this.plain(G),this)},dx:function(G){return this.attr("dx",G)},dy:function(G){return this.attr("dy",G)},newLine:function(){var G=this.parent(r.Text);return this.dom.newLined=!0,this.dy(G.dom.leading*G.attr("font-size")).attr("x",G.x())}}}),r.extend(r.Text,r.Tspan,{plain:function(G){return!1===this._build&&this.clear(),this.node.appendChild(i.createTextNode(G)),this},tspan:function(G){var re=(this.textPath&&this.textPath()||this).node,te=new r.Tspan;return!1===this._build&&this.clear(),re.appendChild(te.node),te.text(G)},clear:function(){for(var G=(this.textPath&&this.textPath()||this).node;G.hasChildNodes();)G.removeChild(G.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),r.TextPath=r.invent({create:"textPath",inherit:r.Parent,parent:r.Text,construct:{morphArray:r.PathArray,array:function(){var G=this.track();return G?G.array():null},plot:function(G){var re=this.track(),te=null;return re&&(te=re.plot(G)),null==G?te:this},track:function(){var G=this.textPath();if(G)return G.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return r.adopt(this.node.firstChild)}}}),r.Nested=r.invent({create:function(){this.constructor.call(this,r.create("svg")),this.style("overflow","visible")},inherit:r.Container,construct:{nested:function(){return this.put(new r.Nested)}}});var I={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(G,re){return"color"==re?G:G+"-"+re}};function R(G,re,te,oe){return te+oe.replace(r.regex.dots," .")}function Y(G){return G.toLowerCase().replace(/-(.)/g,function(re,te){return te.toUpperCase()})}function W(G){return G.charAt(0).toUpperCase()+G.slice(1)}function X(G){var re=G.toString(16);return 1==re.length?"0"+re:re}function Q(G,re,te){if(null==re||null==te){var oe=G.bbox();null==re?re=oe.width/oe.height*te:null==te&&(te=oe.height/oe.width*re)}return{width:re,height:te}}function ce(G,re,te){return{x:re*G.a+te*G.c+0,y:re*G.b+te*G.d+0}}function me(G){return{a:G[0],b:G[1],c:G[2],d:G[3],e:G[4],f:G[5]}}function Ee(G){for(var re=G.childNodes.length-1;re>=0;re--)G.childNodes[re]instanceof pe.SVGElement&&Ee(G.childNodes[re]);return r.adopt(G).id(r.eid(G.nodeName))}function De(G){return Math.abs(G)>1e-37?G:0}["fill","stroke"].forEach(function(G){var re={};re[G]=function(te){if(void 0===te)return this;if("string"==typeof te||r.Color.isRgb(te)||te&&"function"==typeof te.fill)this.attr(G,te);else for(var oe=I[G].length-1;oe>=0;oe--)null!=te[I[G][oe]]&&this.attr(I.prefix(G,I[G][oe]),te[I[G][oe]]);return this},r.extend(r.Element,r.FX,re)}),r.extend(r.Element,r.FX,{translate:function(G,re){return this.transform({x:G,y:re})},matrix:function(G){return this.attr("transform",new r.Matrix(6==arguments.length?[].slice.call(arguments):G))},opacity:function(G){return this.attr("opacity",G)},dx:function(G){return this.x(new r.Number(G).plus(this instanceof r.FX?0:this.x()),!0)},dy:function(G){return this.y(new r.Number(G).plus(this instanceof r.FX?0:this.y()),!0)}}),r.extend(r.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(G){return this.node.getPointAtLength(G)}}),r.Set=r.invent({create:function(G){Array.isArray(G)?this.members=G:this.clear()},extend:{add:function(){for(var G=[].slice.call(arguments),re=0,te=G.length;re<te;re++)this.members.push(G[re]);return this},remove:function(G){var re=this.index(G);return re>-1&&this.members.splice(re,1),this},each:function(G){for(var re=0,te=this.members.length;re<te;re++)G.apply(this.members[re],[re,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(G){return this.index(G)>=0},index:function(G){return this.members.indexOf(G)},get:function(G){return this.members[G]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(G){return new r.Set(G)}}}),r.FX.Set=r.invent({create:function(G){this.set=G}}),r.Set.inherit=function(){var G=[];for(var re in r.Shape.prototype)"function"==typeof r.Shape.prototype[re]&&"function"!=typeof r.Set.prototype[re]&&G.push(re);for(var re in G.forEach(function(oe){r.Set.prototype[oe]=function(){for(var ye=0,Fe=this.members.length;ye<Fe;ye++)this.members[ye]&&"function"==typeof this.members[ye][oe]&&this.members[ye][oe].apply(this.members[ye],arguments);return"animate"==oe?this.fx||(this.fx=new r.FX.Set(this)):this}}),G=[],r.FX.prototype)"function"==typeof r.FX.prototype[re]&&"function"!=typeof r.FX.Set.prototype[re]&&G.push(re);G.forEach(function(te){r.FX.Set.prototype[te]=function(){for(var oe=0,ye=this.set.members.length;oe<ye;oe++)this.set.members[oe].fx[te].apply(this.set.members[oe].fx,arguments);return this}})},r.extend(r.Element,{}),r.extend(r.Element,{remember:function(G,re){if("object"===c(arguments[0]))for(var te in G)this.remember(te,G[te]);else{if(1==arguments.length)return this.memory()[G];this.memory()[G]=re}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var G=arguments.length-1;G>=0;G--)delete this.memory()[arguments[G]];return this},memory:function(){return this._memory||(this._memory={})}}),r.get=function(G){var re=i.getElementById(function(te){var oe=(te||"").toString().match(r.regex.reference);if(oe)return oe[1]}(G)||G);return r.adopt(re)},r.select=function(G,re){return new r.Set(r.utils.map((re||i).querySelectorAll(G),function(te){return r.adopt(te)}))},r.extend(r.Parent,{select:function(G){return r.select(G,this.node)}});var Ce="abcdef".split("");if("function"!=typeof pe.CustomEvent){var Re=function(G,re){re=re||{bubbles:!1,cancelable:!1,detail:void 0};var te=i.createEvent("CustomEvent");return te.initCustomEvent(G,re.bubbles,re.cancelable,re.detail),te};Re.prototype=pe.Event.prototype,r.CustomEvent=Re}else r.CustomEvent=pe.CustomEvent;return r},void 0!==(e=function(){return Yi(ei,ei.document)}.call(lr,Et,lr,ms))&&(ms.exports=e),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(w,I){return this.add(w,I),!w.attr("in")&&this.autoSetIn&&w.attr("in",this.source),w.attr("result")||w.attr("result",w),w},blend:function(w,I,R){return this.put(new SVG.BlendEffect(w,I,R))},colorMatrix:function(w,I){return this.put(new SVG.ColorMatrixEffect(w,I))},convolveMatrix:function(w){return this.put(new SVG.ConvolveMatrixEffect(w))},componentTransfer:function(w){return this.put(new SVG.ComponentTransferEffect(w))},composite:function(w,I,R){return this.put(new SVG.CompositeEffect(w,I,R))},flood:function(w,I){return this.put(new SVG.FloodEffect(w,I))},offset:function(w,I){return this.put(new SVG.OffsetEffect(w,I))},image:function(w){return this.put(new SVG.ImageEffect(w))},merge:function(){var w=[void 0];for(var I in arguments)w.push(arguments[I]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,w)))},gaussianBlur:function(w,I){return this.put(new SVG.GaussianBlurEffect(w,I))},morphology:function(w,I){return this.put(new SVG.MorphologyEffect(w,I))},diffuseLighting:function(w,I,R){return this.put(new SVG.DiffuseLightingEffect(w,I,R))},displacementMap:function(w,I,R,Y,W){return this.put(new SVG.DisplacementMapEffect(w,I,R,Y,W))},specularLighting:function(w,I,R,Y){return this.put(new SVG.SpecularLightingEffect(w,I,R,Y))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(w,I,R,Y,W){return this.put(new SVG.TurbulenceEffect(w,I,R,Y,W))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(w){var I=this.put(new SVG.Filter);return"function"==typeof w&&w.call(I,I),I}}),SVG.extend(SVG.Container,{filter:function(w){return this.defs().filter(w)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(w){return this.filterer=w instanceof SVG.Element?w:this.doc().filter(w),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(w){return this.filterer&&!0===w&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(w){return null==w?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",w)},result:function(w){return null==w?this.attr("result"):this.attr("result",w)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(w){return null==w?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",w)},result:function(w){return null==w?this.attr("result"):this.attr("result",w)},toString:function(){return this.result()}}});var pe={blend:function(w,I){return this.parent()&&this.parent().blend(this,w,I)},colorMatrix:function(w,I){return this.parent()&&this.parent().colorMatrix(w,I).in(this)},convolveMatrix:function(w){return this.parent()&&this.parent().convolveMatrix(w).in(this)},componentTransfer:function(w){return this.parent()&&this.parent().componentTransfer(w).in(this)},composite:function(w,I){return this.parent()&&this.parent().composite(this,w,I)},flood:function(w,I){return this.parent()&&this.parent().flood(w,I)},offset:function(w,I){return this.parent()&&this.parent().offset(w,I).in(this)},image:function(w){return this.parent()&&this.parent().image(w)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(w,I){return this.parent()&&this.parent().gaussianBlur(w,I).in(this)},morphology:function(w,I){return this.parent()&&this.parent().morphology(w,I).in(this)},diffuseLighting:function(w,I,R){return this.parent()&&this.parent().diffuseLighting(w,I,R).in(this)},displacementMap:function(w,I,R,Y){return this.parent()&&this.parent().displacementMap(this,w,I,R,Y)},specularLighting:function(w,I,R,Y){return this.parent()&&this.parent().specularLighting(w,I,R,Y).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(w,I,R,Y,W){return this.parent()&&this.parent().turbulence(w,I,R,Y,W).in(this)}};SVG.extend(SVG.Effect,pe),SVG.extend(SVG.ParentEffect,pe),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(w){this.attr("in",w)}}});var i={blend:function(w,I,R){this.attr({in:w,in2:I,mode:R||"normal"})},colorMatrix:function(w,I){"matrix"==w&&(I=g(I)),this.attr({type:w,values:void 0===I?null:I})},convolveMatrix:function(w){w=g(w),this.attr({order:Math.sqrt(w.split(" ").length),kernelMatrix:w})},composite:function(w,I,R){this.attr({in:w,in2:I,operator:R})},flood:function(w,I){this.attr("flood-color",w),null!=I&&this.attr("flood-opacity",I)},offset:function(w,I){this.attr({dx:w,dy:I})},image:function(w){this.attr("href",w,SVG.xlink)},displacementMap:function(w,I,R,Y,W){this.attr({in:w,in2:I,scale:R,xChannelSelector:Y,yChannelSelector:W})},gaussianBlur:function(w,I){this.attr("stdDeviation",null!=w||null!=I?function(R){if(!Array.isArray(R))return R;for(var Y=0,W=R.length,X=[];Y<W;Y++)X.push(R[Y]);return X.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(w,I){this.attr({operator:w,radius:I})},tile:function(){},turbulence:function(w,I,R,Y,W){this.attr({numOctaves:I,seed:R,stitchTiles:Y,baseFrequency:w,type:W})}},r={merge:function(){var w;if(arguments[0]instanceof SVG.Set){var I=this;arguments[0].each(function(Y){this instanceof SVG.MergeNode?I.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&I.put(new SVG.MergeNode(this))})}else{w=Array.isArray(arguments[0])?arguments[0]:arguments;for(var R=0;R<w.length;R++)w[R]instanceof SVG.MergeNode?this.put(w[R]):this.put(new SVG.MergeNode(w[R]))}},componentTransfer:function(w){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(R){this[R]=new(SVG["Func"+R.toUpperCase()])("identity"),this.rgb.add(this[R]),this.node.appendChild(this[R].node)}.bind(this)),w)for(var I in w.rgb&&(["r","g","b"].forEach(function(R){this[R].attr(w.rgb)}.bind(this)),delete w.rgb),w)this[I].attr(w[I])},diffuseLighting:function(w,I,R){this.attr({surfaceScale:w,diffuseConstant:I,kernelUnitLength:R})},specularLighting:function(w,I,R,Y){this.attr({surfaceScale:w,diffuseConstant:I,specularExponent:R,kernelUnitLength:Y})}},d={distantLight:function(w,I){this.attr({azimuth:w,elevation:I})},pointLight:function(w,I,R){this.attr({x:w,y:I,z:R})},spotLight:function(w,I,R,Y,W,X){this.attr({x:w,y:I,z:R,pointsAtX:Y,pointsAtY:W,pointsAtZ:X})},mergeNode:function(w){this.attr("in",w)}};function g(w){return Array.isArray(w)&&(w=new SVG.Array(w)),w.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function x(){var w=function(){};for(var I in"function"==typeof arguments[arguments.length-1]&&(w=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var R in arguments[I])w(arguments[I][R],R,arguments[I])}["r","g","b","a"].forEach(function(w){d["Func"+w.toUpperCase()]=function(I){switch(this.attr("type",I),I){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),x(i,function(w,I){var R=I.charAt(0).toUpperCase()+I.slice(1);SVG[R+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+R)),w.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),x(r,function(w,I){var R=I.charAt(0).toUpperCase()+I.slice(1);SVG[R+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+R)),w.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),x(d,function(w,I){var R=I.charAt(0).toUpperCase()+I.slice(1);SVG[R]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+R)),w.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(w){return w instanceof SVG.MergeNode?this.add(w,0):this.add(new SVG.MergeNode(w),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(w){return null==w?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",w)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function pe(x,w,I,R,Y,W,X){for(var Q=x.slice(w,I||X),ce=R.slice(Y,W||X),me=0,Ee={pos:[0,0],start:[0,0]},De={pos:[0,0],start:[0,0]};Q[me]=i.call(Ee,Q[me]),ce[me]=i.call(De,ce[me]),Q[me][0]!=ce[me][0]||"M"==Q[me][0]||"A"==Q[me][0]&&(Q[me][4]!=ce[me][4]||Q[me][5]!=ce[me][5])?(Array.prototype.splice.apply(Q,[me,1].concat(d.call(Ee,Q[me]))),Array.prototype.splice.apply(ce,[me,1].concat(d.call(De,ce[me])))):(Q[me]=r.call(Ee,Q[me]),ce[me]=r.call(De,ce[me])),++me!=Q.length||me!=ce.length;)me==Q.length&&Q.push(["C",Ee.pos[0],Ee.pos[1],Ee.pos[0],Ee.pos[1],Ee.pos[0],Ee.pos[1]]),me==ce.length&&ce.push(["C",De.pos[0],De.pos[1],De.pos[0],De.pos[1],De.pos[0],De.pos[1]]);return{start:Q,dest:ce}}function i(x){switch(x[0]){case"z":case"Z":x[0]="L",x[1]=this.start[0],x[2]=this.start[1];break;case"H":x[0]="L",x[2]=this.pos[1];break;case"V":x[0]="L",x[2]=x[1],x[1]=this.pos[0];break;case"T":x[0]="Q",x[3]=x[1],x[4]=x[2],x[1]=this.reflection[1],x[2]=this.reflection[0];break;case"S":x[0]="C",x[6]=x[4],x[5]=x[3],x[4]=x[2],x[3]=x[1],x[2]=this.reflection[1],x[1]=this.reflection[0]}return x}function r(x){var w=x.length;return this.pos=[x[w-2],x[w-1]],-1!="SCQT".indexOf(x[0])&&(this.reflection=[2*this.pos[0]-x[w-4],2*this.pos[1]-x[w-3]]),x}function d(x){var w=[x];switch(x[0]){case"M":return this.pos=this.start=[x[1],x[2]],w;case"L":x[5]=x[3]=x[1],x[6]=x[4]=x[2],x[1]=this.pos[0],x[2]=this.pos[1];break;case"Q":x[6]=x[4],x[5]=x[3],x[4]=1*x[4]/3+2*x[2]/3,x[3]=1*x[3]/3+2*x[1]/3,x[2]=1*this.pos[1]/3+2*x[2]/3,x[1]=1*this.pos[0]/3+2*x[1]/3;break;case"A":x=(w=function(I,R){var Y,W,X,Q,ce,me,Ee,De,Ce,Re,G,re,te,oe,ye,Fe,ht,yt,ii,hi,xi,Pi,nn,Tn,Xn,Qn,hr=Math.abs(R[1]),xr=Math.abs(R[2]),Rr=R[3]%360,Br=R[4],Or=R[5],cr=R[6],Ur=R[7],ir=new SVG.Point(I),Ar=new SVG.Point(cr,Ur),pa=[];if(0===hr||0===xr||ir.x===Ar.x&&ir.y===Ar.y)return[["C",ir.x,ir.y,Ar.x,Ar.y,Ar.x,Ar.y]];for((W=(Y=new SVG.Point((ir.x-Ar.x)/2,(ir.y-Ar.y)/2).transform((new SVG.Matrix).rotate(Rr))).x*Y.x/(hr*hr)+Y.y*Y.y/(xr*xr))>1&&(hr*=W=Math.sqrt(W),xr*=W),X=(new SVG.Matrix).rotate(Rr).scale(1/hr,1/xr).rotate(-Rr),ir=ir.transform(X),me=(Q=[(Ar=Ar.transform(X)).x-ir.x,Ar.y-ir.y])[0]*Q[0]+Q[1]*Q[1],ce=Math.sqrt(me),Q[0]/=ce,Q[1]/=ce,Ee=me<4?Math.sqrt(1-me/4):0,Br===Or&&(Ee*=-1),De=new SVG.Point((Ar.x+ir.x)/2+Ee*-Q[1],(Ar.y+ir.y)/2+Ee*Q[0]),Ce=new SVG.Point(ir.x-De.x,ir.y-De.y),Re=new SVG.Point(Ar.x-De.x,Ar.y-De.y),G=Math.acos(Ce.x/Math.sqrt(Ce.x*Ce.x+Ce.y*Ce.y)),Ce.y<0&&(G*=-1),re=Math.acos(Re.x/Math.sqrt(Re.x*Re.x+Re.y*Re.y)),Re.y<0&&(re*=-1),Or&&G>re&&(re+=2*Math.PI),!Or&&G<re&&(re-=2*Math.PI),Fe=[],ht=G,te=(re-G)/(oe=Math.ceil(2*Math.abs(G-re)/Math.PI)),ye=4*Math.tan(te/4)/3,xi=0;xi<=oe;xi++)ii=Math.cos(ht),yt=Math.sin(ht),hi=new SVG.Point(De.x+ii,De.y+yt),Fe[xi]=[new SVG.Point(hi.x+ye*yt,hi.y-ye*ii),hi,new SVG.Point(hi.x-ye*yt,hi.y+ye*ii)],ht+=te;for(Fe[0][0]=Fe[0][1].clone(),Fe[Fe.length-1][2]=Fe[Fe.length-1][1].clone(),X=(new SVG.Matrix).rotate(Rr).scale(hr,xr).rotate(-Rr),xi=0,Pi=Fe.length;xi<Pi;xi++)Fe[xi][0]=Fe[xi][0].transform(X),Fe[xi][1]=Fe[xi][1].transform(X),Fe[xi][2]=Fe[xi][2].transform(X);for(xi=1,Pi=Fe.length;xi<Pi;xi++)nn=(hi=Fe[xi-1][2]).x,Tn=hi.y,Xn=(hi=Fe[xi][0]).x,Qn=hi.y,cr=(hi=Fe[xi][1]).x,pa.push(["C",nn,Tn,Xn,Qn,cr,Ur=hi.y]);return pa}(this.pos,x))[0]}return x[0]="C",this.pos=[x[5],x[6]],this.reflection=[2*x[5]-x[3],2*x[6]-x[4]],w}function g(x,w){if(!1===w)return!1;for(var I=w,R=x.length;I<R;++I)if("M"==x[I][0])return I;return!1}SVG.extend(SVG.PathArray,{morph:function(x){for(var w=this.value,I=this.parse(x),R=0,Y=0,W=!1,X=!1;!1!==R||!1!==Y;){var Q;W=g(w,!1!==R&&R+1),X=g(I,!1!==Y&&Y+1),!1===R&&(R=0==(Q=new SVG.PathArray(ce.start).bbox()).height||0==Q.width?w.push(w[0])-1:w.push(["M",Q.x+Q.width/2,Q.y+Q.height/2])-1),!1===Y&&(Y=0==(Q=new SVG.PathArray(ce.dest).bbox()).height||0==Q.width?I.push(I[0])-1:I.push(["M",Q.x+Q.width/2,Q.y+Q.height/2])-1);var ce=pe(w,R,W,I,Y,X);w=w.slice(0,R).concat(ce.start,!1===W?[]:w.slice(W)),I=I.slice(0,Y).concat(ce.dest,!1===X?[]:I.slice(X)),R=!1!==W&&R+ce.start.length,Y=!1!==X&&Y+ce.dest.length}return this.value=w,this.destination=new SVG.PathArray,this.destination.value=I,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function pe(i){i.remember("_draggable",this),this.el=i}pe.prototype.init=function(i,r){var d=this;this.constraint=i,this.value=r,this.el.on("mousedown.drag",function(g){d.start(g)}),this.el.on("touchstart.drag",function(g){d.start(g)})},pe.prototype.transformPoint=function(i,r){var d=(i=i||window.event).changedTouches&&i.changedTouches[0]||i;return this.p.x=d.clientX-(r||0),this.p.y=d.clientY,this.p.matrixTransform(this.m)},pe.prototype.getBBox=function(){var i=this.el.bbox();return this.el instanceof SVG.Nested&&(i=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(i.x=this.el.x(),i.y=this.el.y()),i},pe.prototype.start=function(i){if("click"!=i.type&&"mousedown"!=i.type&&"mousemove"!=i.type||1==(i.which||i.buttons)){var r=this;if(this.el.fire("beforedrag",{event:i,handler:this}),!this.el.event().defaultPrevented){i.preventDefault(),i.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var d,g=this.getBBox();if(this.el instanceof SVG.Text)switch(d=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":d/=2;break;case"start":d=0}this.startPoints={point:this.transformPoint(i,d),box:g,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(x){r.drag(x)}),SVG.on(window,"touchmove.drag",function(x){r.drag(x)}),SVG.on(window,"mouseup.drag",function(x){r.end(x)}),SVG.on(window,"touchend.drag",function(x){r.end(x)}),this.el.fire("dragstart",{event:i,p:this.startPoints.point,m:this.m,handler:this})}}},pe.prototype.drag=function(i){var r=this.getBBox(),d=this.transformPoint(i),g=this.startPoints.box.x+d.x-this.startPoints.point.x,x=this.startPoints.box.y+d.y-this.startPoints.point.y,w=this.constraint,I=d.x-this.startPoints.point.x,R=d.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:i,p:d,m:this.m,handler:this}),this.el.event().defaultPrevented)return d;if("function"==typeof w){var Y=w.call(this.el,g,x,this.m);"boolean"==typeof Y&&(Y={x:Y,y:Y}),!0===Y.x?this.el.x(g):!1!==Y.x&&this.el.x(Y.x),!0===Y.y?this.el.y(x):!1!==Y.y&&this.el.y(Y.y)}else"object"==typeof w&&(null!=w.minX&&g<w.minX?I=(g=w.minX)-this.startPoints.box.x:null!=w.maxX&&g>w.maxX-r.width&&(I=(g=w.maxX-r.width)-this.startPoints.box.x),null!=w.minY&&x<w.minY?R=(x=w.minY)-this.startPoints.box.y:null!=w.maxY&&x>w.maxY-r.height&&(R=(x=w.maxY-r.height)-this.startPoints.box.y),null!=w.snapToGrid&&(g-=g%w.snapToGrid,x-=x%w.snapToGrid,I-=I%w.snapToGrid,R-=R%w.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:I,y:R},!0):this.el.move(g,x));return d},pe.prototype.end=function(i){var r=this.drag(i);this.el.fire("dragend",{event:i,p:r,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(i,r){"function"!=typeof i&&"object"!=typeof i||(r=i,i=!0);var d=this.remember("_draggable")||new pe(this);return(i=void 0===i||i)?d.init(r||{},i):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function pe(i){this.el=i,i.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(r,d,g){var x="string"!=typeof r?r:d[r];return g?x/2:x},this.pointCoords=function(r,d){var g=this.pointsList[r];return{x:this.pointCoord(g[0],d,"t"===r||"b"===r),y:this.pointCoord(g[1],d,"r"===r||"l"===r)}}}pe.prototype.init=function(i,r){var d=this.el.bbox();this.options={};var g=this.el.selectize.defaults.points;for(var x in this.el.selectize.defaults)this.options[x]=this.el.selectize.defaults[x],void 0!==r[x]&&(this.options[x]=r[x]);var w=["points","pointsExclude"];for(var x in w){var I=this.options[w[x]];"string"==typeof I?I=I.length>0?I.split(/\s*,\s*/i):[]:"boolean"==typeof I&&"points"===w[x]&&(I=I?g:[]),this.options[w[x]]=I}this.options.points=[g,this.options.points].reduce(function(R,Y){return R.filter(function(W){return Y.indexOf(W)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(R,Y){return R.filter(function(W){return Y.indexOf(W)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(d.x,d.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(i):this.selectRect(i),this.observe(),this.cleanup()},pe.prototype.selectPoints=function(i){return this.pointSelection.isSelected=i,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},pe.prototype.getPointArray=function(){var i=this.el.bbox();return this.el.array().valueOf().map(function(r){return[r[0]-i.x,r[1]-i.y]})},pe.prototype.drawPoints=function(){for(var i=this,r=this.getPointArray(),d=0,g=r.length;d<g;++d){var x=function(I){return function(R){(R=R||window.event).preventDefault?R.preventDefault():R.returnValue=!1,R.stopPropagation(),i.el.fire("point",{x:R.pageX||R.touches[0].pageX,y:R.pageY||R.touches[0].pageY,i:I,event:R})}}(d),w=this.drawPoint(r[d][0],r[d][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",x).on("mousedown",x);this.pointSelection.set.add(w)}},pe.prototype.drawPoint=function(i,r){var d=this.options.pointType;switch(d){case"circle":return this.drawCircle(i,r);case"rect":return this.drawRect(i,r);default:if("function"==typeof d)return d.call(this,i,r);throw new Error("Unknown "+d+" point type!")}},pe.prototype.drawCircle=function(i,r){return this.nested.circle(this.options.pointSize).center(i,r)},pe.prototype.drawRect=function(i,r){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(i,r)},pe.prototype.updatePointSelection=function(){var i=this.getPointArray();this.pointSelection.set.each(function(r){this.cx()===i[r][0]&&this.cy()===i[r][1]||this.center(i[r][0],i[r][1])})},pe.prototype.updateRectSelection=function(){var i=this,r=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:r.width,height:r.height}),this.options.points.length&&this.options.points.map(function(g,x){var w=i.pointCoords(g,r);i.rectSelection.set.get(x+1).center(w.x,w.y)}),this.options.rotationPoint){var d=this.rectSelection.set.length();this.rectSelection.set.get(d-1).center(r.width/2,20)}},pe.prototype.selectRect=function(i){var r=this,d=this.el.bbox();function g(I){return function(R){(R=R||window.event).preventDefault?R.preventDefault():R.returnValue=!1,R.stopPropagation(),r.el.fire(I,{x:R.pageX||R.touches[0].pageX,y:R.pageY||R.touches[0].pageY,event:R})}}if(this.rectSelection.isSelected=i,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(d.width,d.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(I,R){var Y=r.pointCoords(I,d),W=r.drawPoint(Y.x,Y.y).attr("class",r.options.classPoints+"_"+I).on("mousedown",g(I)).on("touchstart",g(I));r.rectSelection.set.add(W)}),this.rectSelection.set.each(function(){this.addClass(r.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var x=function(I){(I=I||window.event).preventDefault?I.preventDefault():I.returnValue=!1,I.stopPropagation(),r.el.fire("rot",{x:I.pageX||I.touches[0].pageX,y:I.pageY||I.touches[0].pageY,event:I})},w=this.drawPoint(d.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",x).on("mousedown",x);this.rectSelection.set.add(w)}},pe.prototype.handler=function(){var i=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},pe.prototype.observe=function(){var i=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){i.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){i.handler()})},pe.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(i,r){return"object"==typeof i&&(r=i,i=!0),(this.remember("_selectHandler")||new pe(this)).init(void 0===i||i,r||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function pe(i){i.remember("_resizeHandler",this),this.el=i,this.parameters={},this.lastUpdateCall=null,this.p=i.doc().node.createSVGPoint()}pe.prototype.transformPoint=function(i,r,d){return this.p.x=i-(this.offset.x-window.pageXOffset),this.p.y=r-(this.offset.y-window.pageYOffset),this.p.matrixTransform(d||this.m)},pe.prototype._extractPosition=function(i){return{x:null!=i.clientX?i.clientX:i.touches[0].clientX,y:null!=i.clientY?i.clientY:i.touches[0].clientY}},pe.prototype.init=function(i){var r=this;if(this.stop(),"stop"!==i){for(var d in this.options={},this.el.resize.defaults)this.options[d]=this.el.resize.defaults[d],void 0!==i[d]&&(this.options[d]=i[d]);this.el.on("lt.resize",function(g){r.resize(g||window.event)}),this.el.on("rt.resize",function(g){r.resize(g||window.event)}),this.el.on("rb.resize",function(g){r.resize(g||window.event)}),this.el.on("lb.resize",function(g){r.resize(g||window.event)}),this.el.on("t.resize",function(g){r.resize(g||window.event)}),this.el.on("r.resize",function(g){r.resize(g||window.event)}),this.el.on("b.resize",function(g){r.resize(g||window.event)}),this.el.on("l.resize",function(g){r.resize(g||window.event)}),this.el.on("rot.resize",function(g){r.resize(g||window.event)}),this.el.on("point.resize",function(g){r.resize(g||window.event)}),this.update()}},pe.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},pe.prototype.resize=function(i){var r=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var d=this._extractPosition(i.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(d.x,d.y),x:i.detail.x,y:i.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==i.detail.i){var g=this.el.array().valueOf();this.parameters.i=i.detail.i,this.parameters.pointCoords=[g[i.detail.i][0],g[i.detail.i][1]]}switch(i.type){case"lt":this.calc=function(x,w){var I=this.snapToGrid(x,w);if(this.parameters.box.width-I[0]>0&&this.parameters.box.height-I[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+I[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-I[0]);I=this.checkAspectRatio(I),this.el.move(this.parameters.box.x+I[0],this.parameters.box.y+I[1]).size(this.parameters.box.width-I[0],this.parameters.box.height-I[1])}};break;case"rt":this.calc=function(x,w){var I=this.snapToGrid(x,w,2);if(this.parameters.box.width+I[0]>0&&this.parameters.box.height-I[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-I[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+I[0]);I=this.checkAspectRatio(I,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+I[1]).size(this.parameters.box.width+I[0],this.parameters.box.height-I[1])}};break;case"rb":this.calc=function(x,w){var I=this.snapToGrid(x,w,0);if(this.parameters.box.width+I[0]>0&&this.parameters.box.height+I[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-I[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+I[0]);I=this.checkAspectRatio(I),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+I[0],this.parameters.box.height+I[1])}};break;case"lb":this.calc=function(x,w){var I=this.snapToGrid(x,w,1);if(this.parameters.box.width-I[0]>0&&this.parameters.box.height+I[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+I[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-I[0]);I=this.checkAspectRatio(I,!0),this.el.move(this.parameters.box.x+I[0],this.parameters.box.y).size(this.parameters.box.width-I[0],this.parameters.box.height+I[1])}};break;case"t":this.calc=function(x,w){var I=this.snapToGrid(x,w,2);if(this.parameters.box.height-I[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+I[1]).height(this.parameters.box.height-I[1])}};break;case"r":this.calc=function(x,w){var I=this.snapToGrid(x,w,0);if(this.parameters.box.width+I[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+I[0])}};break;case"b":this.calc=function(x,w){var I=this.snapToGrid(x,w,0);if(this.parameters.box.height+I[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+I[1])}};break;case"l":this.calc=function(x,w){var I=this.snapToGrid(x,w,1);if(this.parameters.box.width-I[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+I[0],this.parameters.box.y).width(this.parameters.box.width-I[0])}};break;case"rot":this.calc=function(x,w){var I=x+this.parameters.p.x,R=w+this.parameters.p.y,Y=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),W=Math.atan2(R-this.parameters.box.y-this.parameters.box.height/2,I-this.parameters.box.x-this.parameters.box.width/2),X=this.parameters.rotation+180*(W-Y)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(X-X%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(x,w){var I=this.snapToGrid(x,w,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),R=this.el.array().valueOf();R[this.parameters.i][0]=this.parameters.pointCoords[0]+I[0],R[this.parameters.i][1]=this.parameters.pointCoords[1]+I[1],this.el.plot(R)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:i}),SVG.on(window,"touchmove.resize",function(x){r.update(x||window.event)}),SVG.on(window,"touchend.resize",function(){r.done()}),SVG.on(window,"mousemove.resize",function(x){r.update(x||window.event)}),SVG.on(window,"mouseup.resize",function(){r.done()})},pe.prototype.update=function(i){if(i){var r=this._extractPosition(i),d=this.transformPoint(r.x,r.y),g=d.x-this.parameters.p.x,x=d.y-this.parameters.p.y;this.lastUpdateCall=[g,x],this.calc(g,x),this.el.fire("resizing",{dx:g,dy:x,event:i})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},pe.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},pe.prototype.snapToGrid=function(i,r,d,g){var x;return x=void 0!==g?[(d+i)%this.options.snapToGrid,(g+r)%this.options.snapToGrid]:[(this.parameters.box.x+i+(1&(d=d??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+r+(2&d?0:this.parameters.box.height))%this.options.snapToGrid],i<0&&(x[0]-=this.options.snapToGrid),r<0&&(x[1]-=this.options.snapToGrid),i-=Math.abs(x[0])<this.options.snapToGrid/2?x[0]:x[0]-(i<0?-this.options.snapToGrid:this.options.snapToGrid),r-=Math.abs(x[1])<this.options.snapToGrid/2?x[1]:x[1]-(r<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(i,r,d,g)},pe.prototype.constraintToBox=function(i,r,d,g){var x,w,I=this.options.constraint||{};return void 0!==g?(x=d,w=g):(x=this.parameters.box.x+(1&d?0:this.parameters.box.width),w=this.parameters.box.y+(2&d?0:this.parameters.box.height)),void 0!==I.minX&&x+i<I.minX&&(i=I.minX-x),void 0!==I.maxX&&x+i>I.maxX&&(i=I.maxX-x),void 0!==I.minY&&w+r<I.minY&&(r=I.minY-w),void 0!==I.maxY&&w+r>I.maxY&&(r=I.maxY-w),[i,r]},pe.prototype.checkAspectRatio=function(i,r){if(!this.options.saveAspectRatio)return i;var d=i.slice(),g=this.parameters.box.width/this.parameters.box.height,x=this.parameters.box.width+i[0],w=this.parameters.box.height-i[1],I=x/w;return I<g?(d[1]=x/g-this.parameters.box.height,r&&(d[1]=-d[1])):I>g&&(d[0]=this.parameters.box.width-w*g,r&&(d[0]=-d[0])),d},SVG.extend(SVG.Element,{resize:function(i){return(this.remember("_resizeHandler")||new pe(this)).init(i||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var bt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Jt(this.ctx),this.ctx.axes=new fn(this.ctx),this.ctx.core=new Ot(this.ctx.el,this.ctx),this.ctx.config=new gn({}),this.ctx.data=new on(this.ctx),this.ctx.grid=new Bi(this.ctx),this.ctx.graphics=new rt(this.ctx),this.ctx.coreUtils=new bi(this.ctx),this.ctx.crosshairs=new Ci(this.ctx),this.ctx.events=new Qi(this.ctx),this.ctx.exports=new gi(this.ctx),this.ctx.localization=new Pn(this.ctx),this.ctx.options=new Ti,this.ctx.responsive=new En(this.ctx),this.ctx.series=new Yn(this.ctx),this.ctx.theme=new Dn(this.ctx),this.ctx.formatters=new ki(this.ctx),this.ctx.titleSubtitle=new cn(this.ctx),this.ctx.legend=new fr(this.ctx),this.ctx.toolbar=new Yr(this.ctx),this.ctx.tooltip=new Qe(this.ctx),this.ctx.dimensions=new On(this.ctx),this.ctx.updateHelpers=new xe(this.ctx),this.ctx.zoomPanSelection=new Nn(this.ctx),this.ctx.w.globals.tooltip=new Qe(this.ctx)}}]),pe}(),Yt=function(){function pe(i){Z(this,pe),this.ctx=i,this.w=i.w}return we(pe,[{key:"clear",value:function(i){var r=i.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:r})}},{key:"killSVG",value:function(i){i.each(function(r,d){this.removeClass("*"),this.off(),this.stop()},!0),i.ungroup(),i.clear()}},{key:"clearDomElements",value:function(i){var r=this,g=this.w.globals.dom.Paper.node;g.parentNode&&g.parentNode.parentNode&&!i.isUpdating&&(g.parentNode.parentNode.style.minHeight="unset");var x=this.w.globals.dom.baseEl;x&&this.ctx.eventList.forEach(function(I){x.removeEventListener(I,r.ctx.events.documentEvent)});var w=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(w.Paper),w.Paper.remove(),w.elWrap=null,w.elGraphical=null,w.elLegendWrap=null,w.elLegendForeign=null,w.baseEl=null,w.elGridRect=null,w.elGridRectMask=null,w.elGridRectMarkerMask=null,w.elForecastMask=null,w.elNonForecastMask=null,w.elDefs=null}}]),pe}(),Xe=new WeakMap,Ut=function(){function pe(i,r){Z(this,pe),this.opts=r,this.ctx=this,this.w=new di(r).init(),this.el=i,this.w.globals.cuid=Je.randomId(),this.w.globals.chartID=this.w.config.chart.id?Je.escapeString(this.w.config.chart.id):this.w.globals.cuid,new bt(this).initModules(),this.create=Je.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return we(pe,[{key:"render",value:function(){var i=this;return new Promise(function(r,d){if(null!==i.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),i.w.config.chart.id&&Apex._chartInstances.push({id:i.w.globals.chartID,group:i.w.config.chart.group,chart:i}),i.setLocale(i.w.config.chart.defaultLocale);var g=i.w.config.chart.events.beforeMount;if("function"==typeof g&&g(i,i.w),i.events.fireEvent("beforeMount",[i,i.w]),window.addEventListener("resize",i.windowResizeHandler),function(Q,ce){var me=!1;if(Q.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var Ee=Q.getBoundingClientRect();"none"!==Q.style.display&&0!==Ee.width||(me=!0)}var De=new ResizeObserver(function(Ce){me&&ce.call(Q,Ce),me=!0});Q.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(Q.children).forEach(function(Ce){return De.observe(Ce)}):De.observe(Q),Xe.set(ce,De)}(i.el.parentNode,i.parentResizeHandler),!i.css){var x=i.el.getRootNode&&i.el.getRootNode(),w=Je.is("ShadowRoot",x),I=i.el.ownerDocument,R=I.getElementById("apexcharts-css");if(w||!R){var Y;i.css=document.createElement("style"),i.css.id="apexcharts-css",i.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var W=(null===(Y=i.opts.chart)||void 0===Y?void 0:Y.nonce)||i.w.config.chart.nonce;W&&i.css.setAttribute("nonce",W),w?x.prepend(i.css):I.head.appendChild(i.css)}}var X=i.create(i.w.config.series,{});if(!X)return r(i);i.mount(X).then(function(){"function"==typeof i.w.config.chart.events.mounted&&i.w.config.chart.events.mounted(i,i.w),i.events.fireEvent("mounted",[i,i.w]),r(X)}).catch(function(Q){d(Q)})}else d(new Error("Element not found"))})}},{key:"create",value:function(i,r){var d=this.w;new bt(this).initModules();var g=this.w.globals;if(g.noData=!1,g.animationEnded=!1,this.responsive.checkResponsiveConfig(r),d.config.xaxis.convertedCatToNumeric&&new ji(d.config).convertCatToNumericXaxis(d.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===d.config.chart.type&&(d.config.grid.show=!1,d.config.yaxis[0].show=!1),0===g.svgWidth))return g.animationEnded=!0,null;var x=bi.checkComboSeries(i);g.comboCharts=x.comboCharts,g.comboBarCount=x.comboBarCount;var w=i.every(function(W){return W.data&&0===W.data.length});(0===i.length||w)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(i),this.theme.init(),new _n(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),g.noData&&g.collapsedSeries.length!==g.series.length&&!d.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),g.axisCharts&&(this.core.coreCalculations(),"category"!==d.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=d.globals.minX,this.ctx.toolbar.maxX=d.globals.maxX),this.formatters.heatmapLabelFormatters(),new bi(this).getLargestMarkerSize(),this.dimensions.plotCoords();var I=this.core.xySettings();this.grid.createGridMask();var R=this.core.plotChartType(i,I),Y=new Gn(this);return Y.bringForward(),d.config.dataLabels.background.enabled&&Y.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:R,xyRatios:I,dimensions:{plot:{left:d.globals.translateX,top:d.globals.translateY,width:d.globals.gridWidth,height:d.globals.gridHeight}}}}},{key:"mount",value:function(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,d=this,g=d.w;return new Promise(function(x,w){if(null===d.el)return w(new Error("Not enough data to display or target element not found"));(null===r||g.globals.allSeriesCollapsed)&&d.series.handleNoData(),d.grid=new Bi(d);var I,R,Y=d.grid.drawGrid();if(d.annotations=new Ji(d),d.annotations.drawImageAnnos(),d.annotations.drawTextAnnos(),"back"===g.config.grid.position&&(Y&&g.globals.dom.elGraphical.add(Y.el),null!=Y&&null!==(I=Y.elGridBorders)&&void 0!==I&&I.node&&g.globals.dom.elGraphical.add(Y.elGridBorders)),Array.isArray(r.elGraph))for(var W=0;W<r.elGraph.length;W++)g.globals.dom.elGraphical.add(r.elGraph[W]);else g.globals.dom.elGraphical.add(r.elGraph);"front"===g.config.grid.position&&(Y&&g.globals.dom.elGraphical.add(Y.el),null!=Y&&null!==(R=Y.elGridBorders)&&void 0!==R&&R.node&&g.globals.dom.elGraphical.add(Y.elGridBorders)),"front"===g.config.xaxis.crosshairs.position&&d.crosshairs.drawXCrosshairs(),"front"===g.config.yaxis[0].crosshairs.position&&d.crosshairs.drawYCrosshairs(),"treemap"!==g.config.chart.type&&d.axes.drawAxis(g.config.chart.type,Y);var X=new V(i.ctx,Y),Q=new Xi(i.ctx,Y);if(null!==Y&&(X.xAxisLabelCorrections(Y.xAxisTickWidth),Q.setYAxisTextAlignments(),g.config.yaxis.map(function(me,Ee){-1===g.globals.ignoreYAxisIndexes.indexOf(Ee)&&Q.yAxisTitleRotate(Ee,me.opposite)})),d.annotations.drawAxesAnnotations(),!g.globals.noData){if(g.config.tooltip.enabled&&!g.globals.noData&&d.w.globals.tooltip.drawTooltip(r.xyRatios),g.globals.axisCharts&&(g.globals.isXNumeric||g.config.xaxis.convertedCatToNumeric||g.globals.isRangeBar))(g.config.chart.zoom.enabled||g.config.chart.selection&&g.config.chart.selection.enabled||g.config.chart.pan&&g.config.chart.pan.enabled)&&d.zoomPanSelection.init({xyRatios:r.xyRatios});else{var ce=g.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(me){ce[me]=!1})}g.config.chart.toolbar.show&&!g.globals.allSeriesCollapsed&&d.toolbar.createToolbar()}g.globals.memory.methodsToExec.length>0&&g.globals.memory.methodsToExec.forEach(function(me){me.method(me.params,!1,me.context)}),g.globals.axisCharts||g.globals.noData||d.core.resizeNonAxisCharts(),x(d)})}},{key:"destroy",value:function(){var i,r;window.removeEventListener("resize",this.windowResizeHandler),(r=Xe.get(i=this.parentResizeHandler))&&(r.disconnect(),Xe.delete(i));var d=this.w.config.chart.id;d&&Apex._chartInstances.forEach(function(g,x){g.id===Je.escapeString(d)&&Apex._chartInstances.splice(x,1)}),new Yt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(i){var r=this,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],I=this.w;return I.globals.selection=void 0,i.series&&(this.series.resetSeries(!1,!0,!1),i.series.length&&i.series[0].data&&(i.series=i.series.map(function(R,Y){return r.updateHelpers._extendSeries(R,Y)})),this.updateHelpers.revertDefaultAxisMinMax()),i.xaxis&&(i=this.updateHelpers.forceXAxisUpdate(i)),i.yaxis&&(i=this.updateHelpers.forceYAxisUpdate(i)),I.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),i.theme&&(i=this.theme.updateThemeOptions(i)),this.updateHelpers._updateOptions(i,d,g,x,w)}},{key:"updateSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(i,r,d)}},{key:"appendSeries",value:function(i){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],g=this.w.config.series.slice();return g.push(i),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(g,r,d)}},{key:"appendData",value:function(i){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this;d.w.globals.dataChanged=!0,d.series.getPreviousPaths();for(var g=d.w.config.series.slice(),x=0;x<g.length;x++)if(null!=i[x])for(var w=0;w<i[x].data.length;w++)g[x].data.push(i[x].data[w]);return d.w.config.series=g,r&&(d.w.globals.initialSeries=Je.clone(d.w.config.series)),this.update()}},{key:"update",value:function(i){var r=this;return new Promise(function(d,g){new Yt(r.ctx).clear({isUpdating:!0});var x=r.create(r.w.config.series,i);if(!x)return d(r);r.mount(x).then(function(){"function"==typeof r.w.config.chart.events.updated&&r.w.config.chart.events.updated(r,r.w),r.events.fireEvent("updated",[r,r.w]),r.w.globals.isDirty=!0,d(r)}).catch(function(w){g(w)})})}},{key:"getSyncedCharts",value:function(){var i=this.getGroupedCharts(),r=[this];return i.length&&(r=[],i.forEach(function(d){r.push(d)})),r}},{key:"getGroupedCharts",value:function(){var i=this;return Apex._chartInstances.filter(function(r){if(r.group)return!0}).map(function(r){return i.w.config.chart.group===r.group?r.chart:i})}},{key:"toggleSeries",value:function(i){return this.series.toggleSeries(i)}},{key:"highlightSeriesOnLegendHover",value:function(i,r){return this.series.toggleSeriesOnHover(i,r)}},{key:"showSeries",value:function(i){this.series.showSeries(i)}},{key:"hideSeries",value:function(i){this.series.hideSeries(i)}},{key:"isSeriesHidden",value:function(i){this.series.isSeriesHidden(i)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(i,r){this.events.addEventListener(i,r)}},{key:"removeEventListener",value:function(i,r){this.events.removeEventListener(i,r)}},{key:"addXaxisAnnotation",value:function(i){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;d&&(g=d),g.annotations.addXaxisAnnotationExternal(i,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"addYaxisAnnotation",value:function(i){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;d&&(g=d),g.annotations.addYaxisAnnotationExternal(i,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"addPointAnnotation",value:function(i){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,g=this;d&&(g=d),g.annotations.addPointAnnotationExternal(i,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],g)}},{key:"clearAnnotations",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=this;i&&(r=i),r.annotations.clearAnnotations(r)}},{key:"removeAnnotation",value:function(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,d=this;r&&(d=r),d.annotations.removeAnnotation(d,i)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(i,r){return this.coreUtils.getSeriesTotalsXRange(i,r)}},{key:"getHighestValueInSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new en(this.ctx).getMinYMaxY(i).highestY}},{key:"getLowestValueInSeries",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new en(this.ctx).getMinYMaxY(i).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(i,r){return this.updateHelpers.toggleDataPointSelection(i,r)}},{key:"zoomX",value:function(i,r){this.ctx.toolbar.zoomUpdateOptions(i,r)}},{key:"setLocale",value:function(i){this.localization.setCurrentLocaleValues(i)}},{key:"dataURI",value:function(i){return new gi(this.ctx).dataURI(i)}},{key:"exportToCSV",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new gi(this.ctx).exportToCSV(i)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var i=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){i.w.globals.resized=!0,i.w.globals.dataChanged=!1,i.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var i=this.w.config.chart.redrawOnWindowResize;"function"==typeof i&&(i=i()),i&&this._windowResize()}}],[{key:"getChartByID",value:function(i){var r=Je.escapeString(i);if(Apex._chartInstances){var d=Apex._chartInstances.filter(function(g){return g.id===r})[0];return d&&d.chart}}},{key:"initOnLoad",value:function(){for(var i=document.querySelectorAll("[data-apexcharts]"),r=0;r<i.length;r++)new pe(i[r],JSON.parse(i[r].getAttribute("data-options"))).render()}},{key:"exec",value:function(i,r){var d=this.getChartByID(i);if(d){d.w.globals.isExecCalled=!0;var g=null;if(-1!==d.publicMethods.indexOf(r)){for(var x=arguments.length,w=new Array(x>2?x-2:0),I=2;I<x;I++)w[I-2]=arguments[I];g=d[r].apply(d,w)}return g}}},{key:"merge",value:function(i,r){return Je.extend(i,r)}}]),pe}();ms.exports=Ut},1176:ms=>{self,ms.exports=function(){var lr={3099:function(He){He.exports=function(c){if("function"!=typeof c)throw TypeError(String(c)+" is not a function");return c}},6077:function(He,c,Z){var Be=Z(111);He.exports=function(we){if(!Be(we)&&null!==we)throw TypeError("Can't set "+String(we)+" as a prototype");return we}},1223:function(He,c,Z){var Be=Z(5112),we=Z(30),Se=Z(3070),Le=Be("unscopables"),Te=Array.prototype;null==Te[Le]&&Se.f(Te,Le,{configurable:!0,value:we(null)}),He.exports=function(Ve){Te[Le][Ve]=!0}},1530:function(He,c,Z){"use strict";var Be=Z(8710).charAt;He.exports=function(we,Se,Le){return Se+(Le?Be(we,Se).length:1)}},5787:function(He){He.exports=function(c,Z,Be){if(!(c instanceof Z))throw TypeError("Incorrect "+(Be?Be+" ":"")+"invocation");return c}},9670:function(He,c,Z){var Be=Z(111);He.exports=function(we){if(!Be(we))throw TypeError(String(we)+" is not an object");return we}},4019:function(He){He.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(He,c,Z){"use strict";var Ii,Be=Z(4019),we=Z(9781),Se=Z(7854),Le=Z(111),Te=Z(6656),Ve=Z(648),We=Z(8880),ut=Z(1320),vt=Z(3070).f,tt=Z(9518),ze=Z(7674),ct=Z(5112),qt=Z(9711),Je=Se.Int8Array,Jt=Je&&Je.prototype,yi=Se.Uint8ClampedArray,rt=yi&&yi.prototype,bi=Je&&tt(Je),ci=Jt&&tt(Jt),ti=Object.prototype,St=ti.isPrototypeOf,pi=ct("toStringTag"),vi=qt("TYPED_ARRAY_TAG"),Ti=Be&&!!ze&&"Opera"!==Ve(Se.opera),Ji=!1,ki={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Zi={BigInt64Array:8,BigUint64Array:8},ji=function(_n){if(!Le(_n))return!1;var Ln=Ve(_n);return Te(ki,Ln)||Te(Zi,Ln)};for(Ii in ki)Se[Ii]||(Ti=!1);if((!Ti||"function"!=typeof bi||bi===Function.prototype)&&(bi=function(){throw TypeError("Incorrect invocation")},Ti))for(Ii in ki)Se[Ii]&&ze(Se[Ii],bi);if((!Ti||!ci||ci===ti)&&(ci=bi.prototype,Ti))for(Ii in ki)Se[Ii]&&ze(Se[Ii].prototype,ci);if(Ti&&tt(rt)!==ci&&ze(rt,ci),we&&!Te(ci,pi))for(Ii in Ji=!0,vt(ci,pi,{get:function(){return Le(this)?this[vi]:void 0}}),ki)Se[Ii]&&We(Se[Ii],vi,Ii);He.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ti,TYPED_ARRAY_TAG:Ji&&vi,aTypedArray:function(_n){if(ji(_n))return _n;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(_n){if(ze){if(St.call(bi,_n))return _n}else for(var Ln in ki)if(Te(ki,Ii)){var Gn=Se[Ln];if(Gn&&(_n===Gn||St.call(Gn,_n)))return _n}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(_n,Ln,Gn){if(we){if(Gn)for(var Yn in ki){var on=Se[Yn];on&&Te(on.prototype,_n)&&delete on.prototype[_n]}(!ci[_n]||Gn)&&ut(ci,_n,Gn?Ln:Ti&&Jt[_n]||Ln)}},exportTypedArrayStaticMethod:function(_n,Ln,Gn){var Yn,on;if(we){if(ze){if(Gn)for(Yn in ki)(on=Se[Yn])&&Te(on,_n)&&delete on[_n];if(bi[_n]&&!Gn)return;try{return ut(bi,_n,Gn?Ln:Ti&&Je[_n]||Ln)}catch{}}for(Yn in ki)(on=Se[Yn])&&(!on[_n]||Gn)&&ut(on,_n,Ln)}},isView:function(Ln){if(!Le(Ln))return!1;var Gn=Ve(Ln);return"DataView"===Gn||Te(ki,Gn)||Te(Zi,Gn)},isTypedArray:ji,TypedArray:bi,TypedArrayPrototype:ci}},3331:function(He,c,Z){"use strict";var Be=Z(7854),we=Z(9781),Se=Z(4019),Le=Z(8880),Te=Z(2248),Ve=Z(7293),We=Z(5787),ut=Z(9958),vt=Z(7466),tt=Z(7067),ze=Z(1179),ct=Z(9518),qt=Z(7674),Je=Z(8006).f,Jt=Z(3070).f,yi=Z(1285),rt=Z(8003),bi=Z(9909),ci=bi.get,ti=bi.set,St="ArrayBuffer",pi="DataView",vi="prototype",Ji="Wrong index",Ii=Be[St],ki=Ii,Zi=Be[pi],pn=Zi&&Zi[vi],ji=Object.prototype,gn=Be.RangeError,tn=ze.pack,di=ze.unpack,Wi=function(fn){return[255&fn]},_n=function(fn){return[255&fn,fn>>8&255]},Ln=function(fn){return[255&fn,fn>>8&255,fn>>16&255,fn>>24&255]},Gn=function(fn){return fn[3]<<24|fn[2]<<16|fn[1]<<8|fn[0]},Yn=function(fn){return tn(fn,23,4)},on=function(fn){return tn(fn,52,8)},jt=function(fn,Ci){Jt(fn[vi],Ci,{get:function(){return ci(this)[Ci]}})},gi=function(fn,Ci,En,Dn){var cn=tt(En),br=ci(fn);if(cn+Ci>br.byteLength)throw gn(Ji);var wi=ci(br.buffer).bytes,Jn=cn+br.byteOffset,zn=wi.slice(Jn,Jn+Ci);return Dn?zn:zn.reverse()},V=function(fn,Ci,En,Dn,cn,br){var wi=tt(En),Jn=ci(fn);if(wi+Ci>Jn.byteLength)throw gn(Ji);for(var zn=ci(Jn.buffer).bytes,On=wi+Jn.byteOffset,sr=Dn(+cn),fr=0;fr<Ci;fr++)zn[On+fr]=sr[br?fr:Ci-fr-1]};if(Se){if(!Ve(function(){Ii(1)})||!Ve(function(){new Ii(-1)})||Ve(function(){return new Ii,new Ii(1.5),new Ii(NaN),Ii.name!=St})){for(var Xi,Bi=(ki=function(Ci){return We(this,ki),new Ii(tt(Ci))})[vi]=Ii[vi],$i=Je(Ii),en=0;$i.length>en;)(Xi=$i[en++])in ki||Le(ki,Xi,Ii[Xi]);Bi.constructor=ki}qt&&ct(pn)!==ji&&qt(pn,ji);var Qi=new Zi(new ki(2)),Pn=pn.setInt8;Qi.setInt8(0,2147483648),Qi.setInt8(1,2147483649),(Qi.getInt8(0)||!Qi.getInt8(1))&&Te(pn,{setInt8:function(Ci,En){Pn.call(this,Ci,En<<24>>24)},setUint8:function(Ci,En){Pn.call(this,Ci,En<<24>>24)}},{unsafe:!0})}else ki=function(Ci){We(this,ki,St);var En=tt(Ci);ti(this,{bytes:yi.call(new Array(En),0),byteLength:En}),we||(this.byteLength=En)},Zi=function(Ci,En,Dn){We(this,Zi,pi),We(Ci,ki,pi);var cn=ci(Ci).byteLength,br=ut(En);if(br<0||br>cn)throw gn("Wrong offset");if(br+(Dn=void 0===Dn?cn-br:vt(Dn))>cn)throw gn("Wrong length");ti(this,{buffer:Ci,byteLength:Dn,byteOffset:br}),we||(this.buffer=Ci,this.byteLength=Dn,this.byteOffset=br)},we&&(jt(ki,"byteLength"),jt(Zi,"buffer"),jt(Zi,"byteLength"),jt(Zi,"byteOffset")),Te(Zi[vi],{getInt8:function(Ci){return gi(this,1,Ci)[0]<<24>>24},getUint8:function(Ci){return gi(this,1,Ci)[0]},getInt16:function(Ci){var En=gi(this,2,Ci,arguments.length>1?arguments[1]:void 0);return(En[1]<<8|En[0])<<16>>16},getUint16:function(Ci){var En=gi(this,2,Ci,arguments.length>1?arguments[1]:void 0);return En[1]<<8|En[0]},getInt32:function(Ci){return Gn(gi(this,4,Ci,arguments.length>1?arguments[1]:void 0))},getUint32:function(Ci){return Gn(gi(this,4,Ci,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(Ci){return di(gi(this,4,Ci,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(Ci){return di(gi(this,8,Ci,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(Ci,En){V(this,1,Ci,Wi,En)},setUint8:function(Ci,En){V(this,1,Ci,Wi,En)},setInt16:function(Ci,En){V(this,2,Ci,_n,En,arguments.length>2?arguments[2]:void 0)},setUint16:function(Ci,En){V(this,2,Ci,_n,En,arguments.length>2?arguments[2]:void 0)},setInt32:function(Ci,En){V(this,4,Ci,Ln,En,arguments.length>2?arguments[2]:void 0)},setUint32:function(Ci,En){V(this,4,Ci,Ln,En,arguments.length>2?arguments[2]:void 0)},setFloat32:function(Ci,En){V(this,4,Ci,Yn,En,arguments.length>2?arguments[2]:void 0)},setFloat64:function(Ci,En){V(this,8,Ci,on,En,arguments.length>2?arguments[2]:void 0)}});rt(ki,St),rt(Zi,pi),He.exports={ArrayBuffer:ki,DataView:Zi}},1048:function(He,c,Z){"use strict";var Be=Z(7908),we=Z(1400),Se=Z(7466),Le=Math.min;He.exports=[].copyWithin||function(Ve,We){var ut=Be(this),vt=Se(ut.length),tt=we(Ve,vt),ze=we(We,vt),ct=arguments.length>2?arguments[2]:void 0,qt=Le((void 0===ct?vt:we(ct,vt))-ze,vt-tt),Je=1;for(ze<tt&&tt<ze+qt&&(Je=-1,ze+=qt-1,tt+=qt-1);qt-- >0;)ze in ut?ut[tt]=ut[ze]:delete ut[tt],tt+=Je,ze+=Je;return ut}},1285:function(He,c,Z){"use strict";var Be=Z(7908),we=Z(1400),Se=Z(7466);He.exports=function(Te){for(var Ve=Be(this),We=Se(Ve.length),ut=arguments.length,vt=we(ut>1?arguments[1]:void 0,We),tt=ut>2?arguments[2]:void 0,ze=void 0===tt?We:we(tt,We);ze>vt;)Ve[vt++]=Te;return Ve}},8533:function(He,c,Z){"use strict";var Be=Z(2092).forEach,Se=Z(9341)("forEach");He.exports=Se?[].forEach:function(Te){return Be(this,Te,arguments.length>1?arguments[1]:void 0)}},8457:function(He,c,Z){"use strict";var Be=Z(9974),we=Z(7908),Se=Z(3411),Le=Z(7659),Te=Z(7466),Ve=Z(6135),We=Z(1246);He.exports=function(vt){var rt,bi,ci,ti,St,pi,tt=we(vt),ze="function"==typeof this?this:Array,ct=arguments.length,qt=ct>1?arguments[1]:void 0,Je=void 0!==qt,Jt=We(tt),yi=0;if(Je&&(qt=Be(qt,ct>2?arguments[2]:void 0,2)),null==Jt||ze==Array&&Le(Jt))for(bi=new ze(rt=Te(tt.length));rt>yi;yi++)pi=Je?qt(tt[yi],yi):tt[yi],Ve(bi,yi,pi);else for(St=(ti=Jt.call(tt)).next,bi=new ze;!(ci=St.call(ti)).done;yi++)pi=Je?Se(ti,qt,[ci.value,yi],!0):ci.value,Ve(bi,yi,pi);return bi.length=yi,bi}},1318:function(He,c,Z){var Be=Z(5656),we=Z(7466),Se=Z(1400),Le=function(Te){return function(Ve,We,ut){var ct,vt=Be(Ve),tt=we(vt.length),ze=Se(ut,tt);if(Te&&We!=We){for(;tt>ze;)if((ct=vt[ze++])!=ct)return!0}else for(;tt>ze;ze++)if((Te||ze in vt)&&vt[ze]===We)return Te||ze||0;return!Te&&-1}};He.exports={includes:Le(!0),indexOf:Le(!1)}},2092:function(He,c,Z){var Be=Z(9974),we=Z(8361),Se=Z(7908),Le=Z(7466),Te=Z(5417),Ve=[].push,We=function(ut){var vt=1==ut,tt=2==ut,ze=3==ut,ct=4==ut,qt=6==ut,Je=7==ut,Jt=5==ut||qt;return function(yi,rt,bi,ci){for(var ki,Zi,ti=Se(yi),St=we(ti),pi=Be(rt,bi,3),vi=Le(St.length),Ti=0,Ji=ci||Te,Ii=vt?Ji(yi,vi):tt||Je?Ji(yi,0):void 0;vi>Ti;Ti++)if((Jt||Ti in St)&&(Zi=pi(ki=St[Ti],Ti,ti),ut))if(vt)Ii[Ti]=Zi;else if(Zi)switch(ut){case 3:return!0;case 5:return ki;case 6:return Ti;case 2:Ve.call(Ii,ki)}else switch(ut){case 4:return!1;case 7:Ve.call(Ii,ki)}return qt?-1:ze||ct?ct:Ii}};He.exports={forEach:We(0),map:We(1),filter:We(2),some:We(3),every:We(4),find:We(5),findIndex:We(6),filterOut:We(7)}},6583:function(He,c,Z){"use strict";var Be=Z(5656),we=Z(9958),Se=Z(7466),Le=Z(9341),Te=Math.min,Ve=[].lastIndexOf,We=!!Ve&&1/[1].lastIndexOf(1,-0)<0,ut=Le("lastIndexOf");He.exports=We||!ut?function(ze){if(We)return Ve.apply(this,arguments)||0;var ct=Be(this),qt=Se(ct.length),Je=qt-1;for(arguments.length>1&&(Je=Te(Je,we(arguments[1]))),Je<0&&(Je=qt+Je);Je>=0;Je--)if(Je in ct&&ct[Je]===ze)return Je||0;return-1}:Ve},1194:function(He,c,Z){var Be=Z(7293),we=Z(5112),Se=Z(7392),Le=we("species");He.exports=function(Te){return Se>=51||!Be(function(){var Ve=[];return(Ve.constructor={})[Le]=function(){return{foo:1}},1!==Ve[Te](Boolean).foo})}},9341:function(He,c,Z){"use strict";var Be=Z(7293);He.exports=function(we,Se){var Le=[][we];return!!Le&&Be(function(){Le.call(null,Se||function(){throw 1},1)})}},3671:function(He,c,Z){var Be=Z(3099),we=Z(7908),Se=Z(8361),Le=Z(7466),Te=function(Ve){return function(We,ut,vt,tt){Be(ut);var ze=we(We),ct=Se(ze),qt=Le(ze.length),Je=Ve?qt-1:0,Jt=Ve?-1:1;if(vt<2)for(;;){if(Je in ct){tt=ct[Je],Je+=Jt;break}if(Je+=Jt,Ve?Je<0:qt<=Je)throw TypeError("Reduce of empty array with no initial value")}for(;Ve?Je>=0:qt>Je;Je+=Jt)Je in ct&&(tt=ut(tt,ct[Je],Je,ze));return tt}};He.exports={left:Te(!1),right:Te(!0)}},5417:function(He,c,Z){var Be=Z(111),we=Z(3157),Le=Z(5112)("species");He.exports=function(Te,Ve){var We;return we(Te)&&("function"!=typeof(We=Te.constructor)||We!==Array&&!we(We.prototype)?Be(We)&&null===(We=We[Le])&&(We=void 0):We=void 0),new(void 0===We?Array:We)(0===Ve?0:Ve)}},3411:function(He,c,Z){var Be=Z(9670),we=Z(9212);He.exports=function(Se,Le,Te,Ve){try{return Ve?Le(Be(Te)[0],Te[1]):Le(Te)}catch(We){throw we(Se),We}}},7072:function(He,c,Z){var we=Z(5112)("iterator"),Se=!1;try{var Le=0,Te={next:function(){return{done:!!Le++}},return:function(){Se=!0}};Te[we]=function(){return this},Array.from(Te,function(){throw 2})}catch{}He.exports=function(Ve,We){if(!We&&!Se)return!1;var ut=!1;try{var vt={};vt[we]=function(){return{next:function(){return{done:ut=!0}}}},Ve(vt)}catch{}return ut}},4326:function(He){var c={}.toString;He.exports=function(Z){return c.call(Z).slice(8,-1)}},648:function(He,c,Z){var Be=Z(1694),we=Z(4326),Le=Z(5112)("toStringTag"),Te="Arguments"==we(function(){return arguments}());He.exports=Be?we:function(We){var ut,vt,tt;return void 0===We?"Undefined":null===We?"Null":"string"==typeof(vt=function(We,ut){try{return We[ut]}catch{}}(ut=Object(We),Le))?vt:Te?we(ut):"Object"==(tt=we(ut))&&"function"==typeof ut.callee?"Arguments":tt}},9920:function(He,c,Z){var Be=Z(6656),we=Z(3887),Se=Z(1236),Le=Z(3070);He.exports=function(Te,Ve){for(var We=we(Ve),ut=Le.f,vt=Se.f,tt=0;tt<We.length;tt++){var ze=We[tt];Be(Te,ze)||ut(Te,ze,vt(Ve,ze))}}},8544:function(He,c,Z){var Be=Z(7293);He.exports=!Be(function(){function we(){}return we.prototype.constructor=null,Object.getPrototypeOf(new we)!==we.prototype})},4994:function(He,c,Z){"use strict";var Be=Z(3383).IteratorPrototype,we=Z(30),Se=Z(9114),Le=Z(8003),Te=Z(7497),Ve=function(){return this};He.exports=function(We,ut,vt){var tt=ut+" Iterator";return We.prototype=we(Be,{next:Se(1,vt)}),Le(We,tt,!1,!0),Te[tt]=Ve,We}},8880:function(He,c,Z){var Be=Z(9781),we=Z(3070),Se=Z(9114);He.exports=Be?function(Le,Te,Ve){return we.f(Le,Te,Se(1,Ve))}:function(Le,Te,Ve){return Le[Te]=Ve,Le}},9114:function(He){He.exports=function(c,Z){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:Z}}},6135:function(He,c,Z){"use strict";var Be=Z(7593),we=Z(3070),Se=Z(9114);He.exports=function(Le,Te,Ve){var We=Be(Te);We in Le?we.f(Le,We,Se(0,Ve)):Le[We]=Ve}},654:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(4994),Se=Z(9518),Le=Z(7674),Te=Z(8003),Ve=Z(8880),We=Z(1320),ut=Z(5112),vt=Z(1913),tt=Z(7497),ze=Z(3383),ct=ze.IteratorPrototype,qt=ze.BUGGY_SAFARI_ITERATORS,Je=ut("iterator"),yi="values",rt="entries",bi=function(){return this};He.exports=function(ci,ti,St,pi,vi,Ti,Ji){we(St,ti,pi);var di,Wi,_n,Ii=function(Ln){if(Ln===vi&&gn)return gn;if(!qt&&Ln in pn)return pn[Ln];switch(Ln){case"keys":case yi:case rt:return function(){return new St(this,Ln)}}return function(){return new St(this)}},ki=ti+" Iterator",Zi=!1,pn=ci.prototype,ji=pn[Je]||pn["@@iterator"]||vi&&pn[vi],gn=!qt&&ji||Ii(vi),tn="Array"==ti&&pn.entries||ji;if(tn&&(di=Se(tn.call(new ci)),ct!==Object.prototype&&di.next&&(!vt&&Se(di)!==ct&&(Le?Le(di,ct):"function"!=typeof di[Je]&&Ve(di,Je,bi)),Te(di,ki,!0,!0),vt&&(tt[ki]=bi))),vi==yi&&ji&&ji.name!==yi&&(Zi=!0,gn=function(){return ji.call(this)}),(!vt||Ji)&&pn[Je]!==gn&&Ve(pn,Je,gn),tt[ti]=gn,vi)if(Wi={values:Ii(yi),keys:Ti?gn:Ii("keys"),entries:Ii(rt)},Ji)for(_n in Wi)(qt||Zi||!(_n in pn))&&We(pn,_n,Wi[_n]);else Be({target:ti,proto:!0,forced:qt||Zi},Wi);return Wi}},9781:function(He,c,Z){var Be=Z(7293);He.exports=!Be(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(He,c,Z){var Be=Z(7854),we=Z(111),Se=Be.document,Le=we(Se)&&we(Se.createElement);He.exports=function(Te){return Le?Se.createElement(Te):{}}},8324:function(He){He.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(He,c,Z){var Be=Z(5005);He.exports=Be("navigator","userAgent")||""},7392:function(He,c,Z){var Ve,We,Be=Z(7854),we=Z(8113),Se=Be.process,Le=Se&&Se.versions,Te=Le&&Le.v8;Te?We=(Ve=Te.split("."))[0]+Ve[1]:we&&(!(Ve=we.match(/Edge\/(\d+)/))||Ve[1]>=74)&&(Ve=we.match(/Chrome\/(\d+)/))&&(We=Ve[1]),He.exports=We&&+We},748:function(He){He.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(He,c,Z){var Be=Z(7854),we=Z(1236).f,Se=Z(8880),Le=Z(1320),Te=Z(3505),Ve=Z(9920),We=Z(4705);He.exports=function(ut,vt){var Je,Jt,yi,rt,bi,tt=ut.target,ze=ut.global,ct=ut.stat;if(Je=ze?Be:ct?Be[tt]||Te(tt,{}):(Be[tt]||{}).prototype)for(Jt in vt){if(rt=vt[Jt],yi=ut.noTargetGet?(bi=we(Je,Jt))&&bi.value:Je[Jt],!We(ze?Jt:tt+(ct?".":"#")+Jt,ut.forced)&&void 0!==yi){if(typeof rt==typeof yi)continue;Ve(rt,yi)}(ut.sham||yi&&yi.sham)&&Se(rt,"sham",!0),Le(Je,Jt,rt,ut)}}},7293:function(He){He.exports=function(c){try{return!!c()}catch{return!0}}},7007:function(He,c,Z){"use strict";Z(4916);var Be=Z(1320),we=Z(7293),Se=Z(5112),Le=Z(2261),Te=Z(8880),Ve=Se("species"),We=!we(function(){var ct=/./;return ct.exec=function(){var qt=[];return qt.groups={a:"7"},qt},"7"!=="".replace(ct,"$<a>")}),ut="$0"==="a".replace(/./,"$0"),vt=Se("replace"),tt=!!/./[vt]&&""===/./[vt]("a","$0"),ze=!we(function(){var ct=/(?:)/,qt=ct.exec;ct.exec=function(){return qt.apply(this,arguments)};var Je="ab".split(ct);return 2!==Je.length||"a"!==Je[0]||"b"!==Je[1]});He.exports=function(ct,qt,Je,Jt){var yi=Se(ct),rt=!we(function(){var vi={};return vi[yi]=function(){return 7},7!=""[ct](vi)}),bi=rt&&!we(function(){var vi=!1,Ti=/a/;return"split"===ct&&((Ti={}).constructor={},Ti.constructor[Ve]=function(){return Ti},Ti.flags="",Ti[yi]=/./[yi]),Ti.exec=function(){return vi=!0,null},Ti[yi](""),!vi});if(!rt||!bi||"replace"===ct&&(!We||!ut||tt)||"split"===ct&&!ze){var ci=/./[yi],ti=Je(yi,""[ct],function(vi,Ti,Ji,Ii,ki){return Ti.exec===Le?rt&&!ki?{done:!0,value:ci.call(Ti,Ji,Ii)}:{done:!0,value:vi.call(Ji,Ti,Ii)}:{done:!1}},{REPLACE_KEEPS_$0:ut,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:tt}),pi=ti[1];Be(String.prototype,ct,ti[0]),Be(RegExp.prototype,yi,2==qt?function(vi,Ti){return pi.call(vi,this,Ti)}:function(vi){return pi.call(vi,this)})}Jt&&Te(RegExp.prototype[yi],"sham",!0)}},9974:function(He,c,Z){var Be=Z(3099);He.exports=function(we,Se,Le){if(Be(we),void 0===Se)return we;switch(Le){case 0:return function(){return we.call(Se)};case 1:return function(Te){return we.call(Se,Te)};case 2:return function(Te,Ve){return we.call(Se,Te,Ve)};case 3:return function(Te,Ve,We){return we.call(Se,Te,Ve,We)}}return function(){return we.apply(Se,arguments)}}},5005:function(He,c,Z){var Be=Z(857),we=Z(7854),Se=function(Le){return"function"==typeof Le?Le:void 0};He.exports=function(Le,Te){return arguments.length<2?Se(Be[Le])||Se(we[Le]):Be[Le]&&Be[Le][Te]||we[Le]&&we[Le][Te]}},1246:function(He,c,Z){var Be=Z(648),we=Z(7497),Le=Z(5112)("iterator");He.exports=function(Te){if(null!=Te)return Te[Le]||Te["@@iterator"]||we[Be(Te)]}},8554:function(He,c,Z){var Be=Z(9670),we=Z(1246);He.exports=function(Se){var Le=we(Se);if("function"!=typeof Le)throw TypeError(String(Se)+" is not iterable");return Be(Le.call(Se))}},647:function(He,c,Z){var Be=Z(7908),we=Math.floor,Se="".replace,Le=/\$([$&'`]|\d\d?|<[^>]*>)/g,Te=/\$([$&'`]|\d\d?)/g;He.exports=function(Ve,We,ut,vt,tt,ze){var ct=ut+Ve.length,qt=vt.length,Je=Te;return void 0!==tt&&(tt=Be(tt),Je=Le),Se.call(ze,Je,function(Jt,yi){var rt;switch(yi.charAt(0)){case"$":return"$";case"&":return Ve;case"`":return We.slice(0,ut);case"'":return We.slice(ct);case"<":rt=tt[yi.slice(1,-1)];break;default:var bi=+yi;if(0===bi)return Jt;if(bi>qt){var ci=we(bi/10);return 0===ci?Jt:ci<=qt?void 0===vt[ci-1]?yi.charAt(1):vt[ci-1]+yi.charAt(1):Jt}rt=vt[bi-1]}return void 0===rt?"":rt})}},7854:function(He,c,Z){var Be=function(we){return we&&we.Math==Math&&we};He.exports=Be("object"==typeof globalThis&&globalThis)||Be("object"==typeof window&&window)||Be("object"==typeof self&&self)||Be("object"==typeof Z.g&&Z.g)||function(){return this}()||Function("return this")()},6656:function(He){var c={}.hasOwnProperty;He.exports=function(Z,Be){return c.call(Z,Be)}},3501:function(He){He.exports={}},490:function(He,c,Z){var Be=Z(5005);He.exports=Be("document","documentElement")},4664:function(He,c,Z){var Be=Z(9781),we=Z(7293),Se=Z(317);He.exports=!Be&&!we(function(){return 7!=Object.defineProperty(Se("div"),"a",{get:function(){return 7}}).a})},1179:function(He){var c=Math.abs,Z=Math.pow,Be=Math.floor,we=Math.log,Se=Math.LN2;He.exports={pack:function(Ve,We,ut){var yi,rt,bi,vt=new Array(ut),tt=8*ut-We-1,ze=(1<<tt)-1,ct=ze>>1,qt=23===We?Z(2,-24)-Z(2,-77):0,Je=Ve<0||0===Ve&&1/Ve<0?1:0,Jt=0;for((Ve=c(Ve))!=Ve||Ve===1/0?(rt=Ve!=Ve?1:0,yi=ze):(yi=Be(we(Ve)/Se),Ve*(bi=Z(2,-yi))<1&&(yi--,bi*=2),(Ve+=yi+ct>=1?qt/bi:qt*Z(2,1-ct))*bi>=2&&(yi++,bi/=2),yi+ct>=ze?(rt=0,yi=ze):yi+ct>=1?(rt=(Ve*bi-1)*Z(2,We),yi+=ct):(rt=Ve*Z(2,ct-1)*Z(2,We),yi=0));We>=8;vt[Jt++]=255&rt,rt/=256,We-=8);for(yi=yi<<We|rt,tt+=We;tt>0;vt[Jt++]=255&yi,yi/=256,tt-=8);return vt[--Jt]|=128*Je,vt},unpack:function(Ve,We){var yi,ut=Ve.length,vt=8*ut-We-1,tt=(1<<vt)-1,ze=tt>>1,ct=vt-7,qt=ut-1,Je=Ve[qt--],Jt=127&Je;for(Je>>=7;ct>0;Jt=256*Jt+Ve[qt],qt--,ct-=8);for(yi=Jt&(1<<-ct)-1,Jt>>=-ct,ct+=We;ct>0;yi=256*yi+Ve[qt],qt--,ct-=8);if(0===Jt)Jt=1-ze;else{if(Jt===tt)return yi?NaN:Je?-1/0:1/0;yi+=Z(2,We),Jt-=ze}return(Je?-1:1)*yi*Z(2,Jt-We)}}},8361:function(He,c,Z){var Be=Z(7293),we=Z(4326),Se="".split;He.exports=Be(function(){return!Object("z").propertyIsEnumerable(0)})?function(Le){return"String"==we(Le)?Se.call(Le,""):Object(Le)}:Object},9587:function(He,c,Z){var Be=Z(111),we=Z(7674);He.exports=function(Se,Le,Te){var Ve,We;return we&&"function"==typeof(Ve=Le.constructor)&&Ve!==Te&&Be(We=Ve.prototype)&&We!==Te.prototype&&we(Se,We),Se}},2788:function(He,c,Z){var Be=Z(5465),we=Function.toString;"function"!=typeof Be.inspectSource&&(Be.inspectSource=function(Se){return we.call(Se)}),He.exports=Be.inspectSource},9909:function(He,c,Z){var tt,ze,ct,Be=Z(8536),we=Z(7854),Se=Z(111),Le=Z(8880),Te=Z(6656),Ve=Z(5465),We=Z(6200),ut=Z(3501);if(Be){var Jt=Ve.state||(Ve.state=new(0,we.WeakMap)),yi=Jt.get,rt=Jt.has,bi=Jt.set;tt=function(ti,St){return St.facade=ti,bi.call(Jt,ti,St),St},ze=function(ti){return yi.call(Jt,ti)||{}},ct=function(ti){return rt.call(Jt,ti)}}else{var ci=We("state");ut[ci]=!0,tt=function(ti,St){return St.facade=ti,Le(ti,ci,St),St},ze=function(ti){return Te(ti,ci)?ti[ci]:{}},ct=function(ti){return Te(ti,ci)}}He.exports={set:tt,get:ze,has:ct,enforce:function(ti){return ct(ti)?ze(ti):tt(ti,{})},getterFor:function(ti){return function(St){var pi;if(!Se(St)||(pi=ze(St)).type!==ti)throw TypeError("Incompatible receiver, "+ti+" required");return pi}}}},7659:function(He,c,Z){var Be=Z(5112),we=Z(7497),Se=Be("iterator"),Le=Array.prototype;He.exports=function(Te){return void 0!==Te&&(we.Array===Te||Le[Se]===Te)}},3157:function(He,c,Z){var Be=Z(4326);He.exports=Array.isArray||function(Se){return"Array"==Be(Se)}},4705:function(He,c,Z){var Be=Z(7293),we=/#|\.prototype\./,Se=function(ut,vt){var tt=Te[Le(ut)];return tt==We||tt!=Ve&&("function"==typeof vt?Be(vt):!!vt)},Le=Se.normalize=function(ut){return String(ut).replace(we,".").toLowerCase()},Te=Se.data={},Ve=Se.NATIVE="N",We=Se.POLYFILL="P";He.exports=Se},111:function(He){He.exports=function(c){return"object"==typeof c?null!==c:"function"==typeof c}},1913:function(He){He.exports=!1},7850:function(He,c,Z){var Be=Z(111),we=Z(4326),Le=Z(5112)("match");He.exports=function(Te){var Ve;return Be(Te)&&(void 0!==(Ve=Te[Le])?!!Ve:"RegExp"==we(Te))}},9212:function(He,c,Z){var Be=Z(9670);He.exports=function(we){var Se=we.return;if(void 0!==Se)return Be(Se.call(we)).value}},3383:function(He,c,Z){"use strict";var tt,ze,ct,Be=Z(7293),we=Z(9518),Se=Z(8880),Le=Z(6656),Te=Z(5112),Ve=Z(1913),We=Te("iterator"),ut=!1;[].keys&&("next"in(ct=[].keys())?(ze=we(we(ct)))!==Object.prototype&&(tt=ze):ut=!0);var qt=null==tt||Be(function(){var Je={};return tt[We].call(Je)!==Je});qt&&(tt={}),(!Ve||qt)&&!Le(tt,We)&&Se(tt,We,function(){return this}),He.exports={IteratorPrototype:tt,BUGGY_SAFARI_ITERATORS:ut}},7497:function(He){He.exports={}},133:function(He,c,Z){var Be=Z(7293);He.exports=!!Object.getOwnPropertySymbols&&!Be(function(){return!String(Symbol())})},590:function(He,c,Z){var Be=Z(7293),we=Z(5112),Se=Z(1913),Le=we("iterator");He.exports=!Be(function(){var Te=new URL("b?a=1&b=2&c=3","http://a"),Ve=Te.searchParams,We="";return Te.pathname="c%20d",Ve.forEach(function(ut,vt){Ve.delete("b"),We+=vt+ut}),Se&&!Te.toJSON||!Ve.sort||"http://a/c%20d?a=1&c=3"!==Te.href||"3"!==Ve.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!Ve[Le]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==We||"x"!==new URL("http://x",void 0).host})},8536:function(He,c,Z){var Be=Z(7854),we=Z(2788),Se=Be.WeakMap;He.exports="function"==typeof Se&&/native code/.test(we(Se))},1574:function(He,c,Z){"use strict";var Be=Z(9781),we=Z(7293),Se=Z(1956),Le=Z(5181),Te=Z(5296),Ve=Z(7908),We=Z(8361),ut=Object.assign,vt=Object.defineProperty;He.exports=!ut||we(function(){if(Be&&1!==ut({b:1},ut(vt({},"a",{enumerable:!0,get:function(){vt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var tt={},ze={},ct=Symbol(),qt="abcdefghijklmnopqrst";return tt[ct]=7,qt.split("").forEach(function(Je){ze[Je]=Je}),7!=ut({},tt)[ct]||Se(ut({},ze)).join("")!=qt})?function(ze,ct){for(var qt=Ve(ze),Je=arguments.length,Jt=1,yi=Le.f,rt=Te.f;Je>Jt;)for(var pi,bi=We(arguments[Jt++]),ci=yi?Se(bi).concat(yi(bi)):Se(bi),ti=ci.length,St=0;ti>St;)pi=ci[St++],(!Be||rt.call(bi,pi))&&(qt[pi]=bi[pi]);return qt}:ut},30:function(He,c,Z){var rt,Be=Z(9670),we=Z(6048),Se=Z(748),Le=Z(3501),Te=Z(490),Ve=Z(317),We=Z(6200),tt="prototype",ze="script",ct=We("IE_PROTO"),qt=function(){},Je=function(ci){return"<script>"+ci+"</"+ze+">"},bi=function(){try{rt=document.domain&&new ActiveXObject("htmlfile")}catch{}bi=rt?function(ci){ci.write(Je("")),ci.close();var ti=ci.parentWindow.Object;return ci=null,ti}(rt):function(){var St,ci=Ve("iframe");return ci.style.display="none",Te.appendChild(ci),ci.src=String("javascript:"),(St=ci.contentWindow.document).open(),St.write(Je("document.F=Object")),St.close(),St.F}();for(var ci=Se.length;ci--;)delete bi[tt][Se[ci]];return bi()};Le[ct]=!0,He.exports=Object.create||function(ti,St){var pi;return null!==ti?(qt[tt]=Be(ti),pi=new qt,qt[tt]=null,pi[ct]=ti):pi=bi(),void 0===St?pi:we(pi,St)}},6048:function(He,c,Z){var Be=Z(9781),we=Z(3070),Se=Z(9670),Le=Z(1956);He.exports=Be?Object.defineProperties:function(Ve,We){Se(Ve);for(var ze,ut=Le(We),vt=ut.length,tt=0;vt>tt;)we.f(Ve,ze=ut[tt++],We[ze]);return Ve}},3070:function(He,c,Z){var Be=Z(9781),we=Z(4664),Se=Z(9670),Le=Z(7593),Te=Object.defineProperty;c.f=Be?Te:function(We,ut,vt){if(Se(We),ut=Le(ut,!0),Se(vt),we)try{return Te(We,ut,vt)}catch{}if("get"in vt||"set"in vt)throw TypeError("Accessors not supported");return"value"in vt&&(We[ut]=vt.value),We}},1236:function(He,c,Z){var Be=Z(9781),we=Z(5296),Se=Z(9114),Le=Z(5656),Te=Z(7593),Ve=Z(6656),We=Z(4664),ut=Object.getOwnPropertyDescriptor;c.f=Be?ut:function(tt,ze){if(tt=Le(tt),ze=Te(ze,!0),We)try{return ut(tt,ze)}catch{}if(Ve(tt,ze))return Se(!we.f.call(tt,ze),tt[ze])}},8006:function(He,c,Z){var Be=Z(6324),Se=Z(748).concat("length","prototype");c.f=Object.getOwnPropertyNames||function(Te){return Be(Te,Se)}},5181:function(He,c){c.f=Object.getOwnPropertySymbols},9518:function(He,c,Z){var Be=Z(6656),we=Z(7908),Se=Z(6200),Le=Z(8544),Te=Se("IE_PROTO"),Ve=Object.prototype;He.exports=Le?Object.getPrototypeOf:function(We){return We=we(We),Be(We,Te)?We[Te]:"function"==typeof We.constructor&&We instanceof We.constructor?We.constructor.prototype:We instanceof Object?Ve:null}},6324:function(He,c,Z){var Be=Z(6656),we=Z(5656),Se=Z(1318).indexOf,Le=Z(3501);He.exports=function(Te,Ve){var tt,We=we(Te),ut=0,vt=[];for(tt in We)!Be(Le,tt)&&Be(We,tt)&&vt.push(tt);for(;Ve.length>ut;)Be(We,tt=Ve[ut++])&&(~Se(vt,tt)||vt.push(tt));return vt}},1956:function(He,c,Z){var Be=Z(6324),we=Z(748);He.exports=Object.keys||function(Le){return Be(Le,we)}},5296:function(He,c){"use strict";var Z={}.propertyIsEnumerable,Be=Object.getOwnPropertyDescriptor,we=Be&&!Z.call({1:2},1);c.f=we?function(Le){var Te=Be(this,Le);return!!Te&&Te.enumerable}:Z},7674:function(He,c,Z){var Be=Z(9670),we=Z(6077);He.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var Te,Se=!1,Le={};try{(Te=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(Le,[]),Se=Le instanceof Array}catch{}return function(We,ut){return Be(We),we(ut),Se?Te.call(We,ut):We.__proto__=ut,We}}():void 0)},288:function(He,c,Z){"use strict";var Be=Z(1694),we=Z(648);He.exports=Be?{}.toString:function(){return"[object "+we(this)+"]"}},3887:function(He,c,Z){var Be=Z(5005),we=Z(8006),Se=Z(5181),Le=Z(9670);He.exports=Be("Reflect","ownKeys")||function(Ve){var We=we.f(Le(Ve)),ut=Se.f;return ut?We.concat(ut(Ve)):We}},857:function(He,c,Z){var Be=Z(7854);He.exports=Be},2248:function(He,c,Z){var Be=Z(1320);He.exports=function(we,Se,Le){for(var Te in Se)Be(we,Te,Se[Te],Le);return we}},1320:function(He,c,Z){var Be=Z(7854),we=Z(8880),Se=Z(6656),Le=Z(3505),Te=Z(2788),Ve=Z(9909),We=Ve.get,ut=Ve.enforce,vt=String(String).split("String");(He.exports=function(tt,ze,ct,qt){var rt,Je=!!qt&&!!qt.unsafe,Jt=!!qt&&!!qt.enumerable,yi=!!qt&&!!qt.noTargetGet;"function"==typeof ct&&("string"==typeof ze&&!Se(ct,"name")&&we(ct,"name",ze),(rt=ut(ct)).source||(rt.source=vt.join("string"==typeof ze?ze:""))),tt!==Be?(Je?!yi&&tt[ze]&&(Jt=!0):delete tt[ze],Jt?tt[ze]=ct:we(tt,ze,ct)):Jt?tt[ze]=ct:Le(ze,ct)})(Function.prototype,"toString",function(){return"function"==typeof this&&We(this).source||Te(this)})},7651:function(He,c,Z){var Be=Z(4326),we=Z(2261);He.exports=function(Se,Le){var Te=Se.exec;if("function"==typeof Te){var Ve=Te.call(Se,Le);if("object"!=typeof Ve)throw TypeError("RegExp exec method returned something other than an Object or null");return Ve}if("RegExp"!==Be(Se))throw TypeError("RegExp#exec called on incompatible receiver");return we.call(Se,Le)}},2261:function(He,c,Z){"use strict";var tt,ze,Be=Z(7066),we=Z(2999),Se=RegExp.prototype.exec,Le=String.prototype.replace,Te=Se,Ve=(ze=/b*/g,Se.call(tt=/a/,"a"),Se.call(ze,"a"),0!==tt.lastIndex||0!==ze.lastIndex),We=we.UNSUPPORTED_Y||we.BROKEN_CARET,ut=void 0!==/()??/.exec("")[1];(Ve||ut||We)&&(Te=function(ze){var qt,Je,Jt,yi,ct=this,rt=We&&ct.sticky,bi=Be.call(ct),ci=ct.source,ti=0,St=ze;return rt&&(-1===(bi=bi.replace("y","")).indexOf("g")&&(bi+="g"),St=String(ze).slice(ct.lastIndex),ct.lastIndex>0&&(!ct.multiline||ct.multiline&&"\n"!==ze[ct.lastIndex-1])&&(ci="(?: "+ci+")",St=" "+St,ti++),Je=new RegExp("^(?:"+ci+")",bi)),ut&&(Je=new RegExp("^"+ci+"$(?!\\s)",bi)),Ve&&(qt=ct.lastIndex),Jt=Se.call(rt?Je:ct,St),rt?Jt?(Jt.input=Jt.input.slice(ti),Jt[0]=Jt[0].slice(ti),Jt.index=ct.lastIndex,ct.lastIndex+=Jt[0].length):ct.lastIndex=0:Ve&&Jt&&(ct.lastIndex=ct.global?Jt.index+Jt[0].length:qt),ut&&Jt&&Jt.length>1&&Le.call(Jt[0],Je,function(){for(yi=1;yi<arguments.length-2;yi++)void 0===arguments[yi]&&(Jt[yi]=void 0)}),Jt}),He.exports=Te},7066:function(He,c,Z){"use strict";var Be=Z(9670);He.exports=function(){var we=Be(this),Se="";return we.global&&(Se+="g"),we.ignoreCase&&(Se+="i"),we.multiline&&(Se+="m"),we.dotAll&&(Se+="s"),we.unicode&&(Se+="u"),we.sticky&&(Se+="y"),Se}},2999:function(He,c,Z){"use strict";var Be=Z(7293);function we(Se,Le){return RegExp(Se,Le)}c.UNSUPPORTED_Y=Be(function(){var Se=we("a","y");return Se.lastIndex=2,null!=Se.exec("abcd")}),c.BROKEN_CARET=Be(function(){var Se=we("^r","gy");return Se.lastIndex=2,null!=Se.exec("str")})},4488:function(He){He.exports=function(c){if(null==c)throw TypeError("Can't call method on "+c);return c}},3505:function(He,c,Z){var Be=Z(7854),we=Z(8880);He.exports=function(Se,Le){try{we(Be,Se,Le)}catch{Be[Se]=Le}return Le}},6340:function(He,c,Z){"use strict";var Be=Z(5005),we=Z(3070),Se=Z(5112),Le=Z(9781),Te=Se("species");He.exports=function(Ve){var We=Be(Ve);Le&&We&&!We[Te]&&(0,we.f)(We,Te,{configurable:!0,get:function(){return this}})}},8003:function(He,c,Z){var Be=Z(3070).f,we=Z(6656),Le=Z(5112)("toStringTag");He.exports=function(Te,Ve,We){Te&&!we(Te=We?Te:Te.prototype,Le)&&Be(Te,Le,{configurable:!0,value:Ve})}},6200:function(He,c,Z){var Be=Z(2309),we=Z(9711),Se=Be("keys");He.exports=function(Le){return Se[Le]||(Se[Le]=we(Le))}},5465:function(He,c,Z){var Be=Z(7854),we=Z(3505),Se="__core-js_shared__",Le=Be[Se]||we(Se,{});He.exports=Le},2309:function(He,c,Z){var Be=Z(1913),we=Z(5465);(He.exports=function(Se,Le){return we[Se]||(we[Se]=void 0!==Le?Le:{})})("versions",[]).push({version:"3.9.0",mode:Be?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(He,c,Z){var Be=Z(9670),we=Z(3099),Le=Z(5112)("species");He.exports=function(Te,Ve){var ut,We=Be(Te).constructor;return void 0===We||null==(ut=Be(We)[Le])?Ve:we(ut)}},8710:function(He,c,Z){var Be=Z(9958),we=Z(4488),Se=function(Le){return function(Te,Ve){var tt,ze,We=String(we(Te)),ut=Be(Ve),vt=We.length;return ut<0||ut>=vt?Le?"":void 0:(tt=We.charCodeAt(ut))<55296||tt>56319||ut+1===vt||(ze=We.charCodeAt(ut+1))<56320||ze>57343?Le?We.charAt(ut):tt:Le?We.slice(ut,ut+2):ze-56320+(tt-55296<<10)+65536}};He.exports={codeAt:Se(!1),charAt:Se(!0)}},3197:function(He){"use strict";var c=2147483647,ut=/[^\0-\u007E]/,vt=/[.\u3002\uFF0E\uFF61]/g,tt="Overflow: input needs wider integers to process",ct=Math.floor,qt=String.fromCharCode,Jt=function(bi){return bi+22+75*(bi<26)},yi=function(bi,ci,ti){var St=0;for(bi=ti?ct(bi/700):bi>>1,bi+=ct(bi/ci);bi>455;St+=36)bi=ct(bi/35);return ct(St+36*bi/(bi+38))},rt=function(bi){var Ti,Ji,ci=[],ti=(bi=function(bi){for(var ci=[],ti=0,St=bi.length;ti<St;){var pi=bi.charCodeAt(ti++);if(pi>=55296&&pi<=56319&&ti<St){var vi=bi.charCodeAt(ti++);56320==(64512&vi)?ci.push(((1023&pi)<<10)+(1023&vi)+65536):(ci.push(pi),ti--)}else ci.push(pi)}return ci}(bi)).length,St=128,pi=0,vi=72;for(Ti=0;Ti<bi.length;Ti++)(Ji=bi[Ti])<128&&ci.push(qt(Ji));var Ii=ci.length,ki=Ii;for(Ii&&ci.push("-");ki<ti;){var Zi=c;for(Ti=0;Ti<bi.length;Ti++)(Ji=bi[Ti])>=St&&Ji<Zi&&(Zi=Ji);var pn=ki+1;if(Zi-St>ct((c-pi)/pn))throw RangeError(tt);for(pi+=(Zi-St)*pn,St=Zi,Ti=0;Ti<bi.length;Ti++){if((Ji=bi[Ti])<St&&++pi>c)throw RangeError(tt);if(Ji==St){for(var ji=pi,gn=36;;gn+=36){var tn=gn<=vi?1:gn>=vi+26?26:gn-vi;if(ji<tn)break;var di=ji-tn,Wi=36-tn;ci.push(qt(Jt(tn+di%Wi))),ji=ct(di/Wi)}ci.push(qt(Jt(ji))),vi=yi(pi,pn,ki==Ii),pi=0,++ki}}++pi,++St}return ci.join("")};He.exports=function(bi){var St,pi,ci=[],ti=bi.toLowerCase().replace(vt,".").split(".");for(St=0;St<ti.length;St++)ci.push(ut.test(pi=ti[St])?"xn--"+rt(pi):pi);return ci.join(".")}},6091:function(He,c,Z){var Be=Z(7293),we=Z(1361);He.exports=function(Le){return Be(function(){return!!we[Le]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[Le]()||we[Le].name!==Le})}},3111:function(He,c,Z){var Be=Z(4488),Se="["+Z(1361)+"]",Le=RegExp("^"+Se+Se+"*"),Te=RegExp(Se+Se+"*$"),Ve=function(We){return function(ut){var vt=String(Be(ut));return 1&We&&(vt=vt.replace(Le,"")),2&We&&(vt=vt.replace(Te,"")),vt}};He.exports={start:Ve(1),end:Ve(2),trim:Ve(3)}},1400:function(He,c,Z){var Be=Z(9958),we=Math.max,Se=Math.min;He.exports=function(Le,Te){var Ve=Be(Le);return Ve<0?we(Ve+Te,0):Se(Ve,Te)}},7067:function(He,c,Z){var Be=Z(9958),we=Z(7466);He.exports=function(Se){if(void 0===Se)return 0;var Le=Be(Se),Te=we(Le);if(Le!==Te)throw RangeError("Wrong length or index");return Te}},5656:function(He,c,Z){var Be=Z(8361),we=Z(4488);He.exports=function(Se){return Be(we(Se))}},9958:function(He){var c=Math.ceil,Z=Math.floor;He.exports=function(Be){return isNaN(Be=+Be)?0:(Be>0?Z:c)(Be)}},7466:function(He,c,Z){var Be=Z(9958),we=Math.min;He.exports=function(Se){return Se>0?we(Be(Se),9007199254740991):0}},7908:function(He,c,Z){var Be=Z(4488);He.exports=function(we){return Object(Be(we))}},4590:function(He,c,Z){var Be=Z(3002);He.exports=function(we,Se){var Le=Be(we);if(Le%Se)throw RangeError("Wrong offset");return Le}},3002:function(He,c,Z){var Be=Z(9958);He.exports=function(we){var Se=Be(we);if(Se<0)throw RangeError("The argument can't be less than 0");return Se}},7593:function(He,c,Z){var Be=Z(111);He.exports=function(we,Se){if(!Be(we))return we;var Le,Te;if(Se&&"function"==typeof(Le=we.toString)&&!Be(Te=Le.call(we))||"function"==typeof(Le=we.valueOf)&&!Be(Te=Le.call(we))||!Se&&"function"==typeof(Le=we.toString)&&!Be(Te=Le.call(we)))return Te;throw TypeError("Can't convert object to primitive value")}},1694:function(He,c,Z){var Se={};Se[Z(5112)("toStringTag")]="z",He.exports="[object z]"===String(Se)},9843:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(7854),Se=Z(9781),Le=Z(3832),Te=Z(260),Ve=Z(3331),We=Z(5787),ut=Z(9114),vt=Z(8880),tt=Z(7466),ze=Z(7067),ct=Z(4590),qt=Z(7593),Je=Z(6656),Jt=Z(648),yi=Z(111),rt=Z(30),bi=Z(7674),ci=Z(8006).f,ti=Z(7321),St=Z(2092).forEach,pi=Z(6340),vi=Z(3070),Ti=Z(1236),Ji=Z(9909),Ii=Z(9587),ki=Ji.get,Zi=Ji.set,pn=vi.f,ji=Ti.f,gn=Math.round,tn=we.RangeError,di=Ve.ArrayBuffer,Wi=Ve.DataView,_n=Te.NATIVE_ARRAY_BUFFER_VIEWS,Ln=Te.TYPED_ARRAY_TAG,Gn=Te.TypedArray,Yn=Te.TypedArrayPrototype,on=Te.aTypedArrayConstructor,jt=Te.isTypedArray,gi="BYTES_PER_ELEMENT",V="Wrong length",Bi=function(fn,Ci){for(var En=0,Dn=Ci.length,cn=new(on(fn))(Dn);Dn>En;)cn[En]=Ci[En++];return cn},$i=function(fn,Ci){pn(fn,Ci,{get:function(){return ki(this)[Ci]}})},en=function(fn){var Ci;return fn instanceof di||"ArrayBuffer"==(Ci=Jt(fn))||"SharedArrayBuffer"==Ci},Xi=function(fn,Ci){return jt(fn)&&"symbol"!=typeof Ci&&Ci in fn&&String(+Ci)==String(Ci)},Qi=function(Ci,En){return Xi(Ci,En=qt(En,!0))?ut(2,Ci[En]):ji(Ci,En)},Pn=function(Ci,En,Dn){return!(Xi(Ci,En=qt(En,!0))&&yi(Dn)&&Je(Dn,"value"))||Je(Dn,"get")||Je(Dn,"set")||Dn.configurable||Je(Dn,"writable")&&!Dn.writable||Je(Dn,"enumerable")&&!Dn.enumerable?pn(Ci,En,Dn):(Ci[En]=Dn.value,Ci)};Se?(_n||(Ti.f=Qi,vi.f=Pn,$i(Yn,"buffer"),$i(Yn,"byteOffset"),$i(Yn,"byteLength"),$i(Yn,"length")),Be({target:"Object",stat:!0,forced:!_n},{getOwnPropertyDescriptor:Qi,defineProperty:Pn}),He.exports=function(fn,Ci,En){var Dn=fn.match(/\d+$/)[0]/8,cn=fn+(En?"Clamped":"")+"Array",br="get"+fn,wi="set"+fn,Jn=we[cn],zn=Jn,On=zn&&zn.prototype,sr={},Nn=function(_r,ur){pn(_r,ur,{get:function(){return function(_r,ur){var mr=ki(_r);return mr.view[br](ur*Dn+mr.byteOffset,!0)}(this,ur)},set:function(mr){return function(_r,ur,mr){var kr=ki(_r);En&&(mr=(mr=gn(mr))<0?0:mr>255?255:255&mr),kr.view[wi](ur*Dn+kr.byteOffset,mr,!0)}(this,ur,mr)},enumerable:!0})};_n?Le&&(zn=Ci(function(_r,ur,mr,kr){return We(_r,zn,cn),Ii(yi(ur)?en(ur)?void 0!==kr?new Jn(ur,ct(mr,Dn),kr):void 0!==mr?new Jn(ur,ct(mr,Dn)):new Jn(ur):jt(ur)?Bi(zn,ur):ti.call(zn,ur):new Jn(ze(ur)),_r,zn)}),bi&&bi(zn,Gn),St(ci(Jn),function(_r){_r in zn||vt(zn,_r,Jn[_r])}),zn.prototype=On):(zn=Ci(function(_r,ur,mr,kr){We(_r,zn,cn);var Qe,Mt,Tt,Ft=0,Ze=0;if(yi(ur)){if(!en(ur))return jt(ur)?Bi(zn,ur):ti.call(zn,ur);Qe=ur,Ze=ct(mr,Dn);var Zt=ur.byteLength;if(void 0===kr){if(Zt%Dn||(Mt=Zt-Ze)<0)throw tn(V)}else if((Mt=tt(kr)*Dn)+Ze>Zt)throw tn(V);Tt=Mt/Dn}else Tt=ze(ur),Qe=new di(Mt=Tt*Dn);for(Zi(_r,{buffer:Qe,byteOffset:Ze,byteLength:Mt,length:Tt,view:new Wi(Qe)});Ft<Tt;)Nn(_r,Ft++)}),bi&&bi(zn,Gn),On=zn.prototype=rt(Yn)),On.constructor!==zn&&vt(On,"constructor",zn),Ln&&vt(On,Ln,cn),sr[cn]=zn,Be({global:!0,forced:zn!=Jn,sham:!_n},sr),gi in zn||vt(zn,gi,Dn),gi in On||vt(On,gi,Dn),pi(cn)}):He.exports=function(){}},3832:function(He,c,Z){var Be=Z(7854),we=Z(7293),Se=Z(7072),Le=Z(260).NATIVE_ARRAY_BUFFER_VIEWS,Te=Be.ArrayBuffer,Ve=Be.Int8Array;He.exports=!Le||!we(function(){Ve(1)})||!we(function(){new Ve(-1)})||!Se(function(We){new Ve,new Ve(null),new Ve(1.5),new Ve(We)},!0)||we(function(){return 1!==new Ve(new Te(2),1,void 0).length})},3074:function(He,c,Z){var Be=Z(260).aTypedArrayConstructor,we=Z(6707);He.exports=function(Se,Le){for(var Te=we(Se,Se.constructor),Ve=0,We=Le.length,ut=new(Be(Te))(We);We>Ve;)ut[Ve]=Le[Ve++];return ut}},7321:function(He,c,Z){var Be=Z(7908),we=Z(7466),Se=Z(1246),Le=Z(7659),Te=Z(9974),Ve=Z(260).aTypedArrayConstructor;He.exports=function(ut){var Je,Jt,yi,rt,bi,ci,vt=Be(ut),tt=arguments.length,ze=tt>1?arguments[1]:void 0,ct=void 0!==ze,qt=Se(vt);if(null!=qt&&!Le(qt))for(ci=(bi=qt.call(vt)).next,vt=[];!(rt=ci.call(bi)).done;)vt.push(rt.value);for(ct&&tt>2&&(ze=Te(ze,arguments[2],2)),Jt=we(vt.length),yi=new(Ve(this))(Jt),Je=0;Jt>Je;Je++)yi[Je]=ct?ze(vt[Je],Je):vt[Je];return yi}},9711:function(He){var c=0,Z=Math.random();He.exports=function(Be){return"Symbol("+String(void 0===Be?"":Be)+")_"+(++c+Z).toString(36)}},3307:function(He,c,Z){var Be=Z(133);He.exports=Be&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(He,c,Z){var Be=Z(7854),we=Z(2309),Se=Z(6656),Le=Z(9711),Te=Z(133),Ve=Z(3307),We=we("wks"),ut=Be.Symbol,vt=Ve?ut:ut&&ut.withoutSetter||Le;He.exports=function(tt){return Se(We,tt)||(We[tt]=Te&&Se(ut,tt)?ut[tt]:vt("Symbol."+tt)),We[tt]}},1361:function(He){He.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(7854),Se=Z(3331),Le=Z(6340),Te="ArrayBuffer",Ve=Se[Te];Be({global:!0,forced:we[Te]!==Ve},{ArrayBuffer:Ve}),Le(Te)},2222:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(7293),Se=Z(3157),Le=Z(111),Te=Z(7908),Ve=Z(7466),We=Z(6135),ut=Z(5417),vt=Z(1194),tt=Z(5112),ze=Z(7392),ct=tt("isConcatSpreadable"),qt=9007199254740991,Je="Maximum allowed index exceeded",Jt=ze>=51||!we(function(){var ci=[];return ci[ct]=!1,ci.concat()[0]!==ci}),yi=vt("concat"),rt=function(ci){if(!Le(ci))return!1;var ti=ci[ct];return void 0!==ti?!!ti:Se(ci)};Be({target:"Array",proto:!0,forced:!Jt||!yi},{concat:function(ti){var Ti,Ji,Ii,ki,Zi,St=Te(this),pi=ut(St,0),vi=0;for(Ti=-1,Ii=arguments.length;Ti<Ii;Ti++)if(rt(Zi=-1===Ti?St:arguments[Ti])){if(vi+(ki=Ve(Zi.length))>qt)throw TypeError(Je);for(Ji=0;Ji<ki;Ji++,vi++)Ji in Zi&&We(pi,vi,Zi[Ji])}else{if(vi>=qt)throw TypeError(Je);We(pi,vi++,Zi)}return pi.length=vi,pi}})},7327:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(2092).filter;Be({target:"Array",proto:!0,forced:!Z(1194)("filter")},{filter:function(Ve){return we(this,Ve,arguments.length>1?arguments[1]:void 0)}})},2772:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(1318).indexOf,Se=Z(9341),Le=[].indexOf,Te=!!Le&&1/[1].indexOf(1,-0)<0,Ve=Se("indexOf");Be({target:"Array",proto:!0,forced:Te||!Ve},{indexOf:function(ut){return Te?Le.apply(this,arguments)||0:we(this,ut,arguments.length>1?arguments[1]:void 0)}})},6992:function(He,c,Z){"use strict";var Be=Z(5656),we=Z(1223),Se=Z(7497),Le=Z(9909),Te=Z(654),Ve="Array Iterator",We=Le.set,ut=Le.getterFor(Ve);He.exports=Te(Array,"Array",function(vt,tt){We(this,{type:Ve,target:Be(vt),index:0,kind:tt})},function(){var vt=ut(this),tt=vt.target,ze=vt.kind,ct=vt.index++;return!tt||ct>=tt.length?(vt.target=void 0,{value:void 0,done:!0}):"keys"==ze?{value:ct,done:!1}:"values"==ze?{value:tt[ct],done:!1}:{value:[ct,tt[ct]],done:!1}},"values"),Se.Arguments=Se.Array,we("keys"),we("values"),we("entries")},1249:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(2092).map;Be({target:"Array",proto:!0,forced:!Z(1194)("map")},{map:function(Ve){return we(this,Ve,arguments.length>1?arguments[1]:void 0)}})},7042:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(111),Se=Z(3157),Le=Z(1400),Te=Z(7466),Ve=Z(5656),We=Z(6135),ut=Z(5112),tt=Z(1194)("slice"),ze=ut("species"),ct=[].slice,qt=Math.max;Be({target:"Array",proto:!0,forced:!tt},{slice:function(Jt,yi){var St,pi,vi,rt=Ve(this),bi=Te(rt.length),ci=Le(Jt,bi),ti=Le(void 0===yi?bi:yi,bi);if(Se(rt)&&("function"!=typeof(St=rt.constructor)||St!==Array&&!Se(St.prototype)?we(St)&&null===(St=St[ze])&&(St=void 0):St=void 0,St===Array||void 0===St))return ct.call(rt,ci,ti);for(pi=new(void 0===St?Array:St)(qt(ti-ci,0)),vi=0;ci<ti;ci++,vi++)ci in rt&&We(pi,vi,rt[ci]);return pi.length=vi,pi}})},561:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(1400),Se=Z(9958),Le=Z(7466),Te=Z(7908),Ve=Z(5417),We=Z(6135),vt=Z(1194)("splice"),tt=Math.max,ze=Math.min;Be({target:"Array",proto:!0,forced:!vt},{splice:function(Jt,yi){var St,pi,vi,Ti,Ji,Ii,rt=Te(this),bi=Le(rt.length),ci=we(Jt,bi),ti=arguments.length;if(0===ti?St=pi=0:1===ti?(St=0,pi=bi-ci):(St=ti-2,pi=ze(tt(Se(yi),0),bi-ci)),bi+St-pi>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(vi=Ve(rt,pi),Ti=0;Ti<pi;Ti++)(Ji=ci+Ti)in rt&&We(vi,Ti,rt[Ji]);if(vi.length=pi,St<pi){for(Ti=ci;Ti<bi-pi;Ti++)Ii=Ti+St,(Ji=Ti+pi)in rt?rt[Ii]=rt[Ji]:delete rt[Ii];for(Ti=bi;Ti>bi-pi+St;Ti--)delete rt[Ti-1]}else if(St>pi)for(Ti=bi-pi;Ti>ci;Ti--)Ii=Ti+St-1,(Ji=Ti+pi-1)in rt?rt[Ii]=rt[Ji]:delete rt[Ii];for(Ti=0;Ti<St;Ti++)rt[Ti+ci]=arguments[Ti+2];return rt.length=bi-pi+St,vi}})},8309:function(He,c,Z){var Be=Z(9781),we=Z(3070).f,Se=Function.prototype,Le=Se.toString,Te=/^\s*function ([^ (]*)/;Be&&!("name"in Se)&&we(Se,"name",{configurable:!0,get:function(){try{return Le.call(this).match(Te)[1]}catch{return""}}})},489:function(He,c,Z){var Be=Z(2109),we=Z(7293),Se=Z(7908),Le=Z(9518),Te=Z(8544);Be({target:"Object",stat:!0,forced:we(function(){Le(1)}),sham:!Te},{getPrototypeOf:function(ut){return Le(Se(ut))}})},1539:function(He,c,Z){var Be=Z(1694),we=Z(1320),Se=Z(288);Be||we(Object.prototype,"toString",Se,{unsafe:!0})},4916:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(2261);Be({target:"RegExp",proto:!0,forced:/./.exec!==we},{exec:we})},9714:function(He,c,Z){"use strict";var Be=Z(1320),we=Z(9670),Se=Z(7293),Le=Z(7066),Te="toString",Ve=RegExp.prototype,We=Ve[Te];(Se(function(){return"/a/b"!=We.call({source:"a",flags:"b"})})||We.name!=Te)&&Be(RegExp.prototype,Te,function(){var ze=we(this),ct=String(ze.source),qt=ze.flags;return"/"+ct+"/"+String(void 0===qt&&ze instanceof RegExp&&!("flags"in Ve)?Le.call(ze):qt)},{unsafe:!0})},8783:function(He,c,Z){"use strict";var Be=Z(8710).charAt,we=Z(9909),Se=Z(654),Le="String Iterator",Te=we.set,Ve=we.getterFor(Le);Se(String,"String",function(We){Te(this,{type:Le,string:String(We),index:0})},function(){var ze,ut=Ve(this),vt=ut.string,tt=ut.index;return tt>=vt.length?{value:void 0,done:!0}:(ze=Be(vt,tt),ut.index+=ze.length,{value:ze,done:!1})})},4723:function(He,c,Z){"use strict";var Be=Z(7007),we=Z(9670),Se=Z(7466),Le=Z(4488),Te=Z(1530),Ve=Z(7651);Be("match",1,function(We,ut,vt){return[function(ze){var ct=Le(this),qt=ze?.[We];return void 0!==qt?qt.call(ze,ct):new RegExp(ze)[We](String(ct))},function(tt){var ze=vt(ut,tt,this);if(ze.done)return ze.value;var ct=we(tt),qt=String(this);if(!ct.global)return Ve(ct,qt);var Je=ct.unicode;ct.lastIndex=0;for(var rt,Jt=[],yi=0;null!==(rt=Ve(ct,qt));){var bi=String(rt[0]);Jt[yi]=bi,""===bi&&(ct.lastIndex=Te(qt,Se(ct.lastIndex),Je)),yi++}return 0===yi?null:Jt}]})},5306:function(He,c,Z){"use strict";var Be=Z(7007),we=Z(9670),Se=Z(7466),Le=Z(9958),Te=Z(4488),Ve=Z(1530),We=Z(647),ut=Z(7651),vt=Math.max,tt=Math.min,ze=function(ct){return void 0===ct?ct:String(ct)};Be("replace",2,function(ct,qt,Je,Jt){var yi=Jt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,rt=Jt.REPLACE_KEEPS_$0,bi=yi?"$":"$0";return[function(ti,St){var pi=Te(this),vi=ti?.[ct];return void 0!==vi?vi.call(ti,pi,St):qt.call(String(pi),ti,St)},function(ci,ti){if(!yi&&rt||"string"==typeof ti&&-1===ti.indexOf(bi)){var St=Je(qt,ci,this,ti);if(St.done)return St.value}var pi=we(ci),vi=String(this),Ti="function"==typeof ti;Ti||(ti=String(ti));var Ji=pi.global;if(Ji){var Ii=pi.unicode;pi.lastIndex=0}for(var ki=[];;){var Zi=ut(pi,vi);if(null===Zi||(ki.push(Zi),!Ji))break;""===String(Zi[0])&&(pi.lastIndex=Ve(vi,Se(pi.lastIndex),Ii))}for(var ji="",gn=0,tn=0;tn<ki.length;tn++){Zi=ki[tn];for(var di=String(Zi[0]),Wi=vt(tt(Le(Zi.index),vi.length),0),_n=[],Ln=1;Ln<Zi.length;Ln++)_n.push(ze(Zi[Ln]));var Gn=Zi.groups;if(Ti){var Yn=[di].concat(_n,Wi,vi);void 0!==Gn&&Yn.push(Gn);var on=String(ti.apply(void 0,Yn))}else on=We(di,vi,Wi,_n,Gn,ti);Wi>=gn&&(ji+=vi.slice(gn,Wi)+on,gn=Wi+di.length)}return ji+vi.slice(gn)}]})},3123:function(He,c,Z){"use strict";var Be=Z(7007),we=Z(7850),Se=Z(9670),Le=Z(4488),Te=Z(6707),Ve=Z(1530),We=Z(7466),ut=Z(7651),vt=Z(2261),tt=Z(7293),ze=[].push,ct=Math.min,qt=4294967295,Je=!tt(function(){return!RegExp(qt,"y")});Be("split",2,function(Jt,yi,rt){var bi;return bi="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(ci,ti){var St=String(Le(this)),pi=void 0===ti?qt:ti>>>0;if(0===pi)return[];if(void 0===ci)return[St];if(!we(ci))return yi.call(St,ci,pi);for(var ki,Zi,pn,vi=[],Ji=0,Ii=new RegExp(ci.source,(ci.ignoreCase?"i":"")+(ci.multiline?"m":"")+(ci.unicode?"u":"")+(ci.sticky?"y":"")+"g");(ki=vt.call(Ii,St))&&!((Zi=Ii.lastIndex)>Ji&&(vi.push(St.slice(Ji,ki.index)),ki.length>1&&ki.index<St.length&&ze.apply(vi,ki.slice(1)),pn=ki[0].length,Ji=Zi,vi.length>=pi));)Ii.lastIndex===ki.index&&Ii.lastIndex++;return Ji===St.length?(pn||!Ii.test(""))&&vi.push(""):vi.push(St.slice(Ji)),vi.length>pi?vi.slice(0,pi):vi}:"0".split(void 0,0).length?function(ci,ti){return void 0===ci&&0===ti?[]:yi.call(this,ci,ti)}:yi,[function(ti,St){var pi=Le(this),vi=ti?.[Jt];return void 0!==vi?vi.call(ti,pi,St):bi.call(String(pi),ti,St)},function(ci,ti){var St=rt(bi,ci,this,ti,bi!==yi);if(St.done)return St.value;var pi=Se(ci),vi=String(this),Ti=Te(pi,RegExp),Ji=pi.unicode,ki=new Ti(Je?pi:"^(?:"+pi.source+")",(pi.ignoreCase?"i":"")+(pi.multiline?"m":"")+(pi.unicode?"u":"")+(Je?"y":"g")),Zi=void 0===ti?qt:ti>>>0;if(0===Zi)return[];if(0===vi.length)return null===ut(ki,vi)?[vi]:[];for(var pn=0,ji=0,gn=[];ji<vi.length;){ki.lastIndex=Je?ji:0;var di,tn=ut(ki,Je?vi:vi.slice(ji));if(null===tn||(di=ct(We(ki.lastIndex+(Je?0:ji)),vi.length))===pn)ji=Ve(vi,ji,Ji);else{if(gn.push(vi.slice(pn,ji)),gn.length===Zi)return gn;for(var Wi=1;Wi<=tn.length-1;Wi++)if(gn.push(tn[Wi]),gn.length===Zi)return gn;ji=pn=di}}return gn.push(vi.slice(pn)),gn}]},!Je)},3210:function(He,c,Z){"use strict";var Be=Z(2109),we=Z(3111).trim;Be({target:"String",proto:!0,forced:Z(6091)("trim")},{trim:function(){return we(this)}})},2990:function(He,c,Z){"use strict";var Be=Z(260),we=Z(1048),Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("copyWithin",function(Ve,We){return we.call(Se(this),Ve,We,arguments.length>2?arguments[2]:void 0)})},8927:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).every,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("every",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},3105:function(He,c,Z){"use strict";var Be=Z(260),we=Z(1285),Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("fill",function(Ve){return we.apply(Se(this),arguments)})},5035:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).filter,Se=Z(3074),Le=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("filter",function(We){var ut=we(Le(this),We,arguments.length>1?arguments[1]:void 0);return Se(this,ut)})},7174:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).findIndex,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("findIndex",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},4345:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).find,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("find",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},2846:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).forEach,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("forEach",function(Ve){we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},4731:function(He,c,Z){"use strict";var Be=Z(260),we=Z(1318).includes,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("includes",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},7209:function(He,c,Z){"use strict";var Be=Z(260),we=Z(1318).indexOf,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("indexOf",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},6319:function(He,c,Z){"use strict";var Be=Z(7854),we=Z(260),Se=Z(6992),Te=Z(5112)("iterator"),Ve=Be.Uint8Array,We=Se.values,ut=Se.keys,vt=Se.entries,tt=we.aTypedArray,ze=we.exportTypedArrayMethod,ct=Ve&&Ve.prototype[Te],qt=!!ct&&("values"==ct.name||null==ct.name),Je=function(){return We.call(tt(this))};ze("entries",function(){return vt.call(tt(this))}),ze("keys",function(){return ut.call(tt(this))}),ze("values",Je,!qt),ze(Te,Je,!qt)},8867:function(He,c,Z){"use strict";var Be=Z(260),we=Be.aTypedArray,Le=[].join;(0,Be.exportTypedArrayMethod)("join",function(Ve){return Le.apply(we(this),arguments)})},7789:function(He,c,Z){"use strict";var Be=Z(260),we=Z(6583),Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("lastIndexOf",function(Ve){return we.apply(Se(this),arguments)})},3739:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).map,Se=Z(6707),Le=Be.aTypedArray,Te=Be.aTypedArrayConstructor;(0,Be.exportTypedArrayMethod)("map",function(ut){return we(Le(this),ut,arguments.length>1?arguments[1]:void 0,function(vt,tt){return new(Te(Se(vt,vt.constructor)))(tt)})})},4483:function(He,c,Z){"use strict";var Be=Z(260),we=Z(3671).right,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("reduceRight",function(Ve){return we(Se(this),Ve,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(He,c,Z){"use strict";var Be=Z(260),we=Z(3671).left,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("reduce",function(Ve){return we(Se(this),Ve,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(He,c,Z){"use strict";var Be=Z(260),we=Be.aTypedArray,Le=Math.floor;(0,Be.exportTypedArrayMethod)("reverse",function(){for(var tt,Ve=this,We=we(Ve).length,ut=Le(We/2),vt=0;vt<ut;)tt=Ve[vt],Ve[vt++]=Ve[--We],Ve[We]=tt;return Ve})},3462:function(He,c,Z){"use strict";var Be=Z(260),we=Z(7466),Se=Z(4590),Le=Z(7908),Te=Z(7293),Ve=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("set",function(tt){Ve(this);var ze=Se(arguments.length>1?arguments[1]:void 0,1),ct=this.length,qt=Le(tt),Je=we(qt.length),Jt=0;if(Je+ze>ct)throw RangeError("Wrong length");for(;Jt<Je;)this[ze+Jt]=qt[Jt++]},Te(function(){new Int8Array(1).set({})}))},678:function(He,c,Z){"use strict";var Be=Z(260),we=Z(6707),Se=Z(7293),Le=Be.aTypedArray,Te=Be.aTypedArrayConstructor,We=[].slice;(0,Be.exportTypedArrayMethod)("slice",function(tt,ze){for(var ct=We.call(Le(this),tt,ze),qt=we(this,this.constructor),Je=0,Jt=ct.length,yi=new(Te(qt))(Jt);Jt>Je;)yi[Je]=ct[Je++];return yi},Se(function(){new Int8Array(1).slice()}))},7462:function(He,c,Z){"use strict";var Be=Z(260),we=Z(2092).some,Se=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("some",function(Ve){return we(Se(this),Ve,arguments.length>1?arguments[1]:void 0)})},3824:function(He,c,Z){"use strict";var Be=Z(260),we=Be.aTypedArray,Le=[].sort;(0,Be.exportTypedArrayMethod)("sort",function(Ve){return Le.call(we(this),Ve)})},5021:function(He,c,Z){"use strict";var Be=Z(260),we=Z(7466),Se=Z(1400),Le=Z(6707),Te=Be.aTypedArray;(0,Be.exportTypedArrayMethod)("subarray",function(ut,vt){var tt=Te(this),ze=tt.length,ct=Se(ut,ze);return new(Le(tt,tt.constructor))(tt.buffer,tt.byteOffset+ct*tt.BYTES_PER_ELEMENT,we((void 0===vt?ze:Se(vt,ze))-ct))})},2974:function(He,c,Z){"use strict";var Be=Z(7854),we=Z(260),Se=Z(7293),Le=Be.Int8Array,Te=we.aTypedArray,Ve=we.exportTypedArrayMethod,We=[].toLocaleString,ut=[].slice,vt=!!Le&&Se(function(){We.call(new Le(1))});Ve("toLocaleString",function(){return We.apply(vt?ut.call(Te(this)):Te(this),arguments)},Se(function(){return[1,2].toLocaleString()!=new Le([1,2]).toLocaleString()})||!Se(function(){Le.prototype.toLocaleString.call([1,2])}))},5016:function(He,c,Z){"use strict";var Be=Z(260).exportTypedArrayMethod,we=Z(7293),Le=Z(7854).Uint8Array,Te=Le&&Le.prototype||{},Ve=[].toString,We=[].join;we(function(){Ve.call({})})&&(Ve=function(){return We.call(this)}),Be("toString",Ve,Te.toString!=Ve)},2472:function(He,c,Z){Z(9843)("Uint8",function(we){return function(Le,Te,Ve){return we(this,Le,Te,Ve)}})},4747:function(He,c,Z){var Be=Z(7854),we=Z(8324),Se=Z(8533),Le=Z(8880);for(var Te in we){var Ve=Be[Te],We=Ve&&Ve.prototype;if(We&&We.forEach!==Se)try{Le(We,"forEach",Se)}catch{We.forEach=Se}}},3948:function(He,c,Z){var Be=Z(7854),we=Z(8324),Se=Z(6992),Le=Z(8880),Te=Z(5112),Ve=Te("iterator"),We=Te("toStringTag"),ut=Se.values;for(var vt in we){var tt=Be[vt],ze=tt&&tt.prototype;if(ze){if(ze[Ve]!==ut)try{Le(ze,Ve,ut)}catch{ze[Ve]=ut}if(ze[We]||Le(ze,We,vt),we[vt])for(var ct in Se)if(ze[ct]!==Se[ct])try{Le(ze,ct,Se[ct])}catch{ze[ct]=Se[ct]}}}},1637:function(He,c,Z){"use strict";Z(6992);var Be=Z(2109),we=Z(5005),Se=Z(590),Le=Z(1320),Te=Z(2248),Ve=Z(8003),We=Z(4994),ut=Z(9909),vt=Z(5787),tt=Z(6656),ze=Z(9974),ct=Z(648),qt=Z(9670),Je=Z(111),Jt=Z(30),yi=Z(9114),rt=Z(8554),bi=Z(1246),ci=Z(5112),ti=we("fetch"),St=we("Headers"),pi=ci("iterator"),vi="URLSearchParams",Ti=vi+"Iterator",Ji=ut.set,Ii=ut.getterFor(vi),ki=ut.getterFor(Ti),Zi=/\+/g,pn=Array(4),ji=function(Bi){return pn[Bi-1]||(pn[Bi-1]=RegExp("((?:%[\\da-f]{2}){"+Bi+"})","gi"))},gn=function(Bi){try{return decodeURIComponent(Bi)}catch{return Bi}},tn=function(Bi){var $i=Bi.replace(Zi," "),en=4;try{return decodeURIComponent($i)}catch{for(;en;)$i=$i.replace(ji(en--),gn);return $i}},di=/[!'()~]|%20/g,Wi={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_n=function(Bi){return Wi[Bi]},Ln=function(Bi){return encodeURIComponent(Bi).replace(di,_n)},Gn=function(Bi,$i){if($i)for(var Qi,Pn,en=$i.split("&"),Xi=0;Xi<en.length;)(Qi=en[Xi++]).length&&(Pn=Qi.split("="),Bi.push({key:tn(Pn.shift()),value:tn(Pn.join("="))}))},Yn=function(Bi){this.entries.length=0,Gn(this.entries,Bi)},on=function(Bi,$i){if(Bi<$i)throw TypeError("Not enough arguments")},jt=We(function($i,en){Ji(this,{type:Ti,iterator:rt(Ii($i).entries),kind:en})},"Iterator",function(){var $i=ki(this),en=$i.kind,Xi=$i.iterator.next(),Qi=Xi.value;return Xi.done||(Xi.value="keys"===en?Qi.key:"values"===en?Qi.value:[Qi.key,Qi.value]),Xi}),gi=function(){vt(this,gi,vi);var Qi,Pn,fn,Ci,En,Dn,cn,br,wi,$i=arguments.length>0?arguments[0]:void 0,Xi=[];if(Ji(this,{type:vi,entries:Xi,updateURL:function(){},updateSearchParams:Yn}),void 0!==$i)if(Je($i))if("function"==typeof(Qi=bi($i)))for(fn=(Pn=Qi.call($i)).next;!(Ci=fn.call(Pn)).done;){if((cn=(Dn=(En=rt(qt(Ci.value))).next).call(En)).done||(br=Dn.call(En)).done||!Dn.call(En).done)throw TypeError("Expected sequence with length 2");Xi.push({key:cn.value+"",value:br.value+""})}else for(wi in $i)tt($i,wi)&&Xi.push({key:wi,value:$i[wi]+""});else Gn(Xi,"string"==typeof $i?"?"===$i.charAt(0)?$i.slice(1):$i:$i+"")},V=gi.prototype;Te(V,{append:function($i,en){on(arguments.length,2);var Xi=Ii(this);Xi.entries.push({key:$i+"",value:en+""}),Xi.updateURL()},delete:function(Bi){on(arguments.length,1);for(var $i=Ii(this),en=$i.entries,Xi=Bi+"",Qi=0;Qi<en.length;)en[Qi].key===Xi?en.splice(Qi,1):Qi++;$i.updateURL()},get:function($i){on(arguments.length,1);for(var en=Ii(this).entries,Xi=$i+"",Qi=0;Qi<en.length;Qi++)if(en[Qi].key===Xi)return en[Qi].value;return null},getAll:function($i){on(arguments.length,1);for(var en=Ii(this).entries,Xi=$i+"",Qi=[],Pn=0;Pn<en.length;Pn++)en[Pn].key===Xi&&Qi.push(en[Pn].value);return Qi},has:function($i){on(arguments.length,1);for(var en=Ii(this).entries,Xi=$i+"",Qi=0;Qi<en.length;)if(en[Qi++].key===Xi)return!0;return!1},set:function($i,en){on(arguments.length,1);for(var Dn,Xi=Ii(this),Qi=Xi.entries,Pn=!1,fn=$i+"",Ci=en+"",En=0;En<Qi.length;En++)(Dn=Qi[En]).key===fn&&(Pn?Qi.splice(En--,1):(Pn=!0,Dn.value=Ci));Pn||Qi.push({key:fn,value:Ci}),Xi.updateURL()},sort:function(){var Qi,Pn,fn,$i=Ii(this),en=$i.entries,Xi=en.slice();for(en.length=0,fn=0;fn<Xi.length;fn++){for(Qi=Xi[fn],Pn=0;Pn<fn;Pn++)if(en[Pn].key>Qi.key){en.splice(Pn,0,Qi);break}Pn===fn&&en.push(Qi)}$i.updateURL()},forEach:function($i){for(var Pn,en=Ii(this).entries,Xi=ze($i,arguments.length>1?arguments[1]:void 0,3),Qi=0;Qi<en.length;)Xi((Pn=en[Qi++]).value,Pn.key,this)},keys:function(){return new jt(this,"keys")},values:function(){return new jt(this,"values")},entries:function(){return new jt(this,"entries")}},{enumerable:!0}),Le(V,pi,V.entries),Le(V,"toString",function(){for(var Qi,$i=Ii(this).entries,en=[],Xi=0;Xi<$i.length;)Qi=$i[Xi++],en.push(Ln(Qi.key)+"="+Ln(Qi.value));return en.join("&")},{enumerable:!0}),Ve(gi,vi),Be({global:!0,forced:!Se},{URLSearchParams:gi}),!Se&&"function"==typeof ti&&"function"==typeof St&&Be({global:!0,enumerable:!0,forced:!0},{fetch:function($i){var Xi,Qi,Pn,en=[$i];return arguments.length>1&&(Je(Xi=arguments[1])&&ct(Qi=Xi.body)===vi&&((Pn=Xi.headers?new St(Xi.headers):new St).has("content-type")||Pn.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Xi=Jt(Xi,{body:yi(0,String(Qi)),headers:yi(0,Pn)})),en.push(Xi)),ti.apply(this,en)}}),He.exports={URLSearchParams:gi,getState:Ii}},285:function(He,c,Z){"use strict";Z(8783);var Yn,Be=Z(2109),we=Z(9781),Se=Z(590),Le=Z(7854),Te=Z(6048),Ve=Z(1320),We=Z(5787),ut=Z(6656),vt=Z(1574),tt=Z(8457),ze=Z(8710).codeAt,ct=Z(3197),qt=Z(8003),Je=Z(1637),Jt=Z(9909),yi=Le.URL,rt=Je.URLSearchParams,bi=Je.getState,ci=Jt.set,ti=Jt.getterFor("URL"),St=Math.floor,pi=Math.pow,Ti="Invalid scheme",Ji="Invalid host",Ii="Invalid port",ki=/[A-Za-z]/,Zi=/[\d+-.A-Za-z]/,pn=/\d/,ji=/^(0x|0X)/,gn=/^[0-7]+$/,tn=/^\d+$/,di=/^[\dA-Fa-f]+$/,Wi=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,_n=/[\u0000\t\u000A\u000D #/:?@[\\]]/,Ln=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Gn=/[\t\u000A\u000D]/g,on=function(Xe,Ut){var pe,i,r;if("["==Ut.charAt(0)){if("]"!=Ut.charAt(Ut.length-1)||!(pe=gi(Ut.slice(1,-1))))return Ji;Xe.host=pe}else if(Ci(Xe)){if(Ut=ct(Ut),Wi.test(Ut)||null===(pe=jt(Ut)))return Ji;Xe.host=pe}else{if(_n.test(Ut))return Ji;for(pe="",i=tt(Ut),r=0;r<i.length;r++)pe+=Pn(i[r],$i);Xe.host=pe}},jt=function(Xe){var pe,i,r,d,g,x,w,Ut=Xe.split(".");if(Ut.length&&""==Ut[Ut.length-1]&&Ut.pop(),(pe=Ut.length)>4)return Xe;for(i=[],r=0;r<pe;r++){if(""==(d=Ut[r]))return Xe;if(g=10,d.length>1&&"0"==d.charAt(0)&&(g=ji.test(d)?16:8,d=d.slice(8==g?1:2)),""===d)x=0;else{if(!(10==g?tn:8==g?gn:di).test(d))return Xe;x=parseInt(d,g)}i.push(x)}for(r=0;r<pe;r++)if(x=i[r],r==pe-1){if(x>=pi(256,5-pe))return null}else if(x>255)return null;for(w=i.pop(),r=0;r<i.length;r++)w+=i[r]*pi(256,3-r);return w},gi=function(Xe){var d,g,x,w,I,R,Y,Ut=[0,0,0,0,0,0,0,0],pe=0,i=null,r=0,W=function(){return Xe.charAt(r)};if(":"==W()){if(":"!=Xe.charAt(1))return;r+=2,i=++pe}for(;W();){if(8==pe)return;if(":"!=W()){for(d=g=0;g<4&&di.test(W());)d=16*d+parseInt(W(),16),r++,g++;if("."==W()){if(0==g||(r-=g,pe>6))return;for(x=0;W();){if(w=null,x>0){if(!("."==W()&&x<4))return;r++}if(!pn.test(W()))return;for(;pn.test(W());){if(I=parseInt(W(),10),null===w)w=I;else{if(0==w)return;w=10*w+I}if(w>255)return;r++}Ut[pe]=256*Ut[pe]+w,(2==++x||4==x)&&pe++}if(4!=x)return;break}if(":"==W()){if(r++,!W())return}else if(W())return;Ut[pe++]=d}else{if(null!==i)return;r++,i=++pe}}if(null!==i)for(R=pe-i,pe=7;0!=pe&&R>0;)Y=Ut[pe],Ut[pe--]=Ut[i+R-1],Ut[i+--R]=Y;else if(8!=pe)return;return Ut},Bi=function(Xe){var Ut,pe,i,r;if("number"==typeof Xe){for(Ut=[],pe=0;pe<4;pe++)Ut.unshift(Xe%256),Xe=St(Xe/256);return Ut.join(".")}if("object"==typeof Xe){for(Ut="",i=function(Xe){for(var Ut=null,pe=1,i=null,r=0,d=0;d<8;d++)0!==Xe[d]?(r>pe&&(Ut=i,pe=r),i=null,r=0):(null===i&&(i=d),++r);return r>pe&&(Ut=i,pe=r),Ut}(Xe),pe=0;pe<8;pe++)r&&0===Xe[pe]||(r&&(r=!1),i===pe?(Ut+=pe?":":"::",r=!0):(Ut+=Xe[pe].toString(16),pe<7&&(Ut+=":")));return"["+Ut+"]"}return Xe},$i={},en=vt({},$i,{" ":1,'"':1,"<":1,">":1,"`":1}),Xi=vt({},en,{"#":1,"?":1,"{":1,"}":1}),Qi=vt({},Xi,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Pn=function(Xe,Ut){var pe=ze(Xe,0);return pe>32&&pe<127&&!ut(Ut,Xe)?Xe:encodeURIComponent(Xe)},fn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ci=function(Xe){return ut(fn,Xe.scheme)},En=function(Xe){return""!=Xe.username||""!=Xe.password},Dn=function(Xe){return!Xe.host||Xe.cannotBeABaseURL||"file"==Xe.scheme},cn=function(Xe,Ut){var pe;return 2==Xe.length&&ki.test(Xe.charAt(0))&&(":"==(pe=Xe.charAt(1))||!Ut&&"|"==pe)},br=function(Xe){var Ut;return Xe.length>1&&cn(Xe.slice(0,2))&&(2==Xe.length||"/"===(Ut=Xe.charAt(2))||"\\"===Ut||"?"===Ut||"#"===Ut)},wi=function(Xe){var Ut=Xe.path,pe=Ut.length;pe&&("file"!=Xe.scheme||1!=pe||!cn(Ut[0],!0))&&Ut.pop()},Jn=function(Xe){return"."===Xe||"%2e"===Xe.toLowerCase()},zn=function(Xe){return".."===(Xe=Xe.toLowerCase())||"%2e."===Xe||".%2e"===Xe||"%2e%2e"===Xe},On={},sr={},fr={},Yr={},Nn={},_r={},ur={},mr={},kr={},Ft={},Ze={},Qe={},Mt={},Tt={},Zt={},Pt={},Nt={},ae={},Ne={},et={},Vt={},$t=function(Xe,Ut,pe,i){var R,Y,W,X,r=pe||On,d=0,g="",x=!1,w=!1,I=!1;for(pe||(Xe.scheme="",Xe.username="",Xe.password="",Xe.host=null,Xe.port=null,Xe.path=[],Xe.query=null,Xe.fragment=null,Xe.cannotBeABaseURL=!1,Ut=Ut.replace(Ln,"")),Ut=Ut.replace(Gn,""),R=tt(Ut);d<=R.length;){switch(Y=R[d],r){case On:if(!Y||!ki.test(Y)){if(pe)return Ti;r=fr;continue}g+=Y.toLowerCase(),r=sr;break;case sr:if(Y&&(Zi.test(Y)||"+"==Y||"-"==Y||"."==Y))g+=Y.toLowerCase();else{if(":"!=Y){if(pe)return Ti;g="",r=fr,d=0;continue}if(pe&&(Ci(Xe)!=ut(fn,g)||"file"==g&&(En(Xe)||null!==Xe.port)||"file"==Xe.scheme&&!Xe.host))return;if(Xe.scheme=g,pe)return void(Ci(Xe)&&fn[Xe.scheme]==Xe.port&&(Xe.port=null));g="","file"==Xe.scheme?r=Tt:Ci(Xe)&&i&&i.scheme==Xe.scheme?r=Yr:Ci(Xe)?r=mr:"/"==R[d+1]?(r=Nn,d++):(Xe.cannotBeABaseURL=!0,Xe.path.push(""),r=Ne)}break;case fr:if(!i||i.cannotBeABaseURL&&"#"!=Y)return Ti;if(i.cannotBeABaseURL&&"#"==Y){Xe.scheme=i.scheme,Xe.path=i.path.slice(),Xe.query=i.query,Xe.fragment="",Xe.cannotBeABaseURL=!0,r=Vt;break}r="file"==i.scheme?Tt:_r;continue;case Yr:if("/"!=Y||"/"!=R[d+1]){r=_r;continue}r=kr,d++;break;case Nn:if("/"==Y){r=Ft;break}r=ae;continue;case _r:if(Xe.scheme=i.scheme,Y==Yn)Xe.username=i.username,Xe.password=i.password,Xe.host=i.host,Xe.port=i.port,Xe.path=i.path.slice(),Xe.query=i.query;else if("/"==Y||"\\"==Y&&Ci(Xe))r=ur;else if("?"==Y)Xe.username=i.username,Xe.password=i.password,Xe.host=i.host,Xe.port=i.port,Xe.path=i.path.slice(),Xe.query="",r=et;else{if("#"!=Y){Xe.username=i.username,Xe.password=i.password,Xe.host=i.host,Xe.port=i.port,Xe.path=i.path.slice(),Xe.path.pop(),r=ae;continue}Xe.username=i.username,Xe.password=i.password,Xe.host=i.host,Xe.port=i.port,Xe.path=i.path.slice(),Xe.query=i.query,Xe.fragment="",r=Vt}break;case ur:if(!Ci(Xe)||"/"!=Y&&"\\"!=Y){if("/"!=Y){Xe.username=i.username,Xe.password=i.password,Xe.host=i.host,Xe.port=i.port,r=ae;continue}r=Ft}else r=kr;break;case mr:if(r=kr,"/"!=Y||"/"!=g.charAt(d+1))continue;d++;break;case kr:if("/"!=Y&&"\\"!=Y){r=Ft;continue}break;case Ft:if("@"==Y){x&&(g="%40"+g),x=!0,W=tt(g);for(var Q=0;Q<W.length;Q++){var ce=W[Q];if(":"!=ce||I){var me=Pn(ce,Qi);I?Xe.password+=me:Xe.username+=me}else I=!0}g=""}else if(Y==Yn||"/"==Y||"?"==Y||"#"==Y||"\\"==Y&&Ci(Xe)){if(x&&""==g)return"Invalid authority";d-=tt(g).length+1,g="",r=Ze}else g+=Y;break;case Ze:case Qe:if(pe&&"file"==Xe.scheme){r=Pt;continue}if(":"!=Y||w){if(Y==Yn||"/"==Y||"?"==Y||"#"==Y||"\\"==Y&&Ci(Xe)){if(Ci(Xe)&&""==g)return Ji;if(pe&&""==g&&(En(Xe)||null!==Xe.port))return;if(X=on(Xe,g))return X;if(g="",r=Nt,pe)return;continue}"["==Y?w=!0:"]"==Y&&(w=!1),g+=Y}else{if(""==g)return Ji;if(X=on(Xe,g))return X;if(g="",r=Mt,pe==Qe)return}break;case Mt:if(!pn.test(Y)){if(Y==Yn||"/"==Y||"?"==Y||"#"==Y||"\\"==Y&&Ci(Xe)||pe){if(""!=g){var Ee=parseInt(g,10);if(Ee>65535)return Ii;Xe.port=Ci(Xe)&&Ee===fn[Xe.scheme]?null:Ee,g=""}if(pe)return;r=Nt;continue}return Ii}g+=Y;break;case Tt:if(Xe.scheme="file","/"==Y||"\\"==Y)r=Zt;else{if(!i||"file"!=i.scheme){r=ae;continue}if(Y==Yn)Xe.host=i.host,Xe.path=i.path.slice(),Xe.query=i.query;else if("?"==Y)Xe.host=i.host,Xe.path=i.path.slice(),Xe.query="",r=et;else{if("#"!=Y){br(R.slice(d).join(""))||(Xe.host=i.host,Xe.path=i.path.slice(),wi(Xe)),r=ae;continue}Xe.host=i.host,Xe.path=i.path.slice(),Xe.query=i.query,Xe.fragment="",r=Vt}}break;case Zt:if("/"==Y||"\\"==Y){r=Pt;break}i&&"file"==i.scheme&&!br(R.slice(d).join(""))&&(cn(i.path[0],!0)?Xe.path.push(i.path[0]):Xe.host=i.host),r=ae;continue;case Pt:if(Y==Yn||"/"==Y||"\\"==Y||"?"==Y||"#"==Y){if(!pe&&cn(g))r=ae;else if(""==g){if(Xe.host="",pe)return;r=Nt}else{if(X=on(Xe,g))return X;if("localhost"==Xe.host&&(Xe.host=""),pe)return;g="",r=Nt}continue}g+=Y;break;case Nt:if(Ci(Xe)){if(r=ae,"/"!=Y&&"\\"!=Y)continue}else if(pe||"?"!=Y)if(pe||"#"!=Y){if(Y!=Yn&&(r=ae,"/"!=Y))continue}else Xe.fragment="",r=Vt;else Xe.query="",r=et;break;case ae:if(Y==Yn||"/"==Y||"\\"==Y&&Ci(Xe)||!pe&&("?"==Y||"#"==Y)){if(zn(g)?(wi(Xe),"/"!=Y&&!("\\"==Y&&Ci(Xe))&&Xe.path.push("")):Jn(g)?"/"!=Y&&!("\\"==Y&&Ci(Xe))&&Xe.path.push(""):("file"==Xe.scheme&&!Xe.path.length&&cn(g)&&(Xe.host&&(Xe.host=""),g=g.charAt(0)+":"),Xe.path.push(g)),g="","file"==Xe.scheme&&(Y==Yn||"?"==Y||"#"==Y))for(;Xe.path.length>1&&""===Xe.path[0];)Xe.path.shift();"?"==Y?(Xe.query="",r=et):"#"==Y&&(Xe.fragment="",r=Vt)}else g+=Pn(Y,Xi);break;case Ne:"?"==Y?(Xe.query="",r=et):"#"==Y?(Xe.fragment="",r=Vt):Y!=Yn&&(Xe.path[0]+=Pn(Y,$i));break;case et:pe||"#"!=Y?Y!=Yn&&("'"==Y&&Ci(Xe)?Xe.query+="%27":Xe.query+="#"==Y?"%23":Pn(Y,$i)):(Xe.fragment="",r=Vt);break;case Vt:Y!=Yn&&(Xe.fragment+=Pn(Y,en))}d++}},Hi=function(Ut){var g,x,pe=We(this,Hi,"URL"),i=arguments.length>1?arguments[1]:void 0,r=String(Ut),d=ci(pe,{type:"URL"});if(void 0!==i)if(i instanceof Hi)g=ti(i);else if(x=$t(g={},String(i)))throw TypeError(x);if(x=$t(d,r,null,g))throw TypeError(x);var w=d.searchParams=new rt,I=bi(w);I.updateSearchParams(d.query),I.updateURL=function(){d.query=String(w)||null},we||(pe.href=At.call(pe),pe.origin=st.call(pe),pe.protocol=ot.call(pe),pe.username=qe.call(pe),pe.password=nt.call(pe),pe.host=It.call(pe),pe.hostname=ei.call(pe),pe.port=Yi.call(pe),pe.pathname=Ei.call(pe),pe.search=Ki.call(pe),pe.searchParams=Ct.call(pe),pe.hash=Ot.call(pe))},wt=Hi.prototype,At=function(){var Xe=ti(this),Ut=Xe.scheme,pe=Xe.username,i=Xe.password,r=Xe.host,d=Xe.port,g=Xe.path,x=Xe.query,w=Xe.fragment,I=Ut+":";return null!==r?(I+="//",En(Xe)&&(I+=pe+(i?":"+i:"")+"@"),I+=Bi(r),null!==d&&(I+=":"+d)):"file"==Ut&&(I+="//"),I+=Xe.cannotBeABaseURL?g[0]:g.length?"/"+g.join("/"):"",null!==x&&(I+="?"+x),null!==w&&(I+="#"+w),I},st=function(){var Xe=ti(this),Ut=Xe.scheme,pe=Xe.port;if("blob"==Ut)try{return new URL(Ut.path[0]).origin}catch{return"null"}return"file"!=Ut&&Ci(Xe)?Ut+"://"+Bi(Xe.host)+(null!==pe?":"+pe:""):"null"},ot=function(){return ti(this).scheme+":"},qe=function(){return ti(this).username},nt=function(){return ti(this).password},It=function(){var Xe=ti(this),Ut=Xe.host,pe=Xe.port;return null===Ut?"":null===pe?Bi(Ut):Bi(Ut)+":"+pe},ei=function(){var Xe=ti(this).host;return null===Xe?"":Bi(Xe)},Yi=function(){var Xe=ti(this).port;return null===Xe?"":String(Xe)},Ei=function(){var Xe=ti(this),Ut=Xe.path;return Xe.cannotBeABaseURL?Ut[0]:Ut.length?"/"+Ut.join("/"):""},Ki=function(){var Xe=ti(this).query;return Xe?"?"+Xe:""},Ct=function(){return ti(this).searchParams},Ot=function(){var Xe=ti(this).fragment;return Xe?"#"+Xe:""},xe=function(Xe,Ut){return{get:Xe,set:Ut,configurable:!0,enumerable:!0}};if(we&&Te(wt,{href:xe(At,function(Xe){var Ut=ti(this),pe=String(Xe),i=$t(Ut,pe);if(i)throw TypeError(i);bi(Ut.searchParams).updateSearchParams(Ut.query)}),origin:xe(st),protocol:xe(ot,function(Xe){var Ut=ti(this);$t(Ut,String(Xe)+":",On)}),username:xe(qe,function(Xe){var Ut=ti(this),pe=tt(String(Xe));if(!Dn(Ut)){Ut.username="";for(var i=0;i<pe.length;i++)Ut.username+=Pn(pe[i],Qi)}}),password:xe(nt,function(Xe){var Ut=ti(this),pe=tt(String(Xe));if(!Dn(Ut)){Ut.password="";for(var i=0;i<pe.length;i++)Ut.password+=Pn(pe[i],Qi)}}),host:xe(It,function(Xe){var Ut=ti(this);Ut.cannotBeABaseURL||$t(Ut,String(Xe),Ze)}),hostname:xe(ei,function(Xe){var Ut=ti(this);Ut.cannotBeABaseURL||$t(Ut,String(Xe),Qe)}),port:xe(Yi,function(Xe){var Ut=ti(this);Dn(Ut)||(""==(Xe=String(Xe))?Ut.port=null:$t(Ut,Xe,Mt))}),pathname:xe(Ei,function(Xe){var Ut=ti(this);Ut.cannotBeABaseURL||(Ut.path=[],$t(Ut,Xe+"",Nt))}),search:xe(Ki,function(Xe){var Ut=ti(this);""==(Xe=String(Xe))?Ut.query=null:("?"==Xe.charAt(0)&&(Xe=Xe.slice(1)),Ut.query="",$t(Ut,Xe,et)),bi(Ut.searchParams).updateSearchParams(Ut.query)}),searchParams:xe(Ct),hash:xe(Ot,function(Xe){var Ut=ti(this);""!=(Xe=String(Xe))?("#"==Xe.charAt(0)&&(Xe=Xe.slice(1)),Ut.fragment="",$t(Ut,Xe,Vt)):Ut.fragment=null})}),Ve(wt,"toJSON",function(){return At.call(this)},{enumerable:!0}),Ve(wt,"toString",function(){return At.call(this)},{enumerable:!0}),yi){var bt=yi.createObjectURL,Yt=yi.revokeObjectURL;bt&&Ve(Hi,"createObjectURL",function(Ut){return bt.apply(yi,arguments)}),Yt&&Ve(Hi,"revokeObjectURL",function(Ut){return Yt.apply(yi,arguments)})}qt(Hi,"URL"),Be({global:!0,forced:!Se,sham:!we},{URL:Hi})}},Et={};function e(He){if(Et[He])return Et[He].exports;var c=Et[He]={exports:{}};return lr[He](c,c.exports,e),c.exports}e.d=function(He,c){for(var Z in c)e.o(c,Z)&&!e.o(He,Z)&&Object.defineProperty(He,Z,{enumerable:!0,get:c[Z]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),e.o=function(He,c){return Object.prototype.hasOwnProperty.call(He,c)},e.r=function(He){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(He,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(He,"__esModule",{value:!0})};var Mi={};return function(){"use strict";function Bi(wt,At){var st;if(typeof Symbol>"u"||null==wt[Symbol.iterator]){if(Array.isArray(wt)||(st=function $i(wt,At){if(wt){if("string"==typeof wt)return en(wt,At);var st=Object.prototype.toString.call(wt).slice(8,-1);if("Object"===st&&wt.constructor&&(st=wt.constructor.name),"Map"===st||"Set"===st)return Array.from(wt);if("Arguments"===st||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return en(wt,At)}}(wt))||At&&wt&&"number"==typeof wt.length){st&&(wt=st);var ot=0,qe=function(){};return{s:qe,n:function(){return ot>=wt.length?{done:!0}:{done:!1,value:wt[ot++]}},e:function(Ei){throw Ei},f:qe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ei,nt=!0,It=!1;return{s:function(){st=wt[Symbol.iterator]()},n:function(){var Ei=st.next();return nt=Ei.done,Ei},e:function(Ei){It=!0,ei=Ei},f:function(){try{!nt&&null!=st.return&&st.return()}finally{if(It)throw ei}}}}function en(wt,At){(null==At||At>wt.length)&&(At=wt.length);for(var st=0,ot=new Array(At);st<At;st++)ot[st]=wt[st];return ot}function Qi(wt,At){for(var st=0;st<At.length;st++){var ot=At[st];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(wt,ot.key,ot)}}e.r(Mi),e.d(Mi,{Dropzone:function(){return Tt},default:function(){return Hi}}),e(2222),e(7327),e(2772),e(6992),e(1249),e(7042),e(561),e(8264),e(8309),e(489),e(1539),e(4916),e(9714),e(8783),e(4723),e(5306),e(3123),e(3210),e(2472),e(2990),e(8927),e(3105),e(5035),e(4345),e(7174),e(2846),e(4731),e(7209),e(6319),e(8867),e(7789),e(3739),e(9368),e(4483),e(2056),e(3462),e(678),e(7462),e(3824),e(5021),e(2974),e(5016),e(4747),e(3948),e(285);var fn=function(){function wt(){!function Xi(wt,At){if(!(wt instanceof At))throw new TypeError("Cannot call a class as a function")}(this,wt)}return function Pn(wt,At,st){return At&&Qi(wt.prototype,At),st&&Qi(wt,st),wt}(wt,[{key:"on",value:function(st,ot){return this._callbacks=this._callbacks||{},this._callbacks[st]||(this._callbacks[st]=[]),this._callbacks[st].push(ot),this}},{key:"emit",value:function(st){this._callbacks=this._callbacks||{};for(var ot=this._callbacks[st],qe=arguments.length,nt=new Array(qe>1?qe-1:0),It=1;It<qe;It++)nt[It-1]=arguments[It];if(ot){var Yi,ei=Bi(ot,!0);try{for(ei.s();!(Yi=ei.n()).done;)Yi.value.apply(this,nt)}catch(Ki){ei.e(Ki)}finally{ei.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+st,{args:nt})),this}},{key:"makeEvent",value:function(st,ot){var qe={bubbles:!0,cancelable:!0,detail:ot};if("function"==typeof window.CustomEvent)return new CustomEvent(st,qe);var nt=document.createEvent("CustomEvent");return nt.initCustomEvent(st,qe.bubbles,qe.cancelable,qe.detail),nt}},{key:"off",value:function(st,ot){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var qe=this._callbacks[st];if(!qe)return this;if(1===arguments.length)return delete this._callbacks[st],this;for(var nt=0;nt<qe.length;nt++)if(qe[nt]===ot){qe.splice(nt,1);break}return this}}]),wt}();function Dn(wt,At){var st;if(typeof Symbol>"u"||null==wt[Symbol.iterator]){if(Array.isArray(wt)||(st=function cn(wt,At){if(wt){if("string"==typeof wt)return br(wt,At);var st=Object.prototype.toString.call(wt).slice(8,-1);if("Object"===st&&wt.constructor&&(st=wt.constructor.name),"Map"===st||"Set"===st)return Array.from(wt);if("Arguments"===st||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return br(wt,At)}}(wt))||At&&wt&&"number"==typeof wt.length){st&&(wt=st);var ot=0,qe=function(){};return{s:qe,n:function(){return ot>=wt.length?{done:!0}:{done:!1,value:wt[ot++]}},e:function(Ei){throw Ei},f:qe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ei,nt=!0,It=!1;return{s:function(){st=wt[Symbol.iterator]()},n:function(){var Ei=st.next();return nt=Ei.done,Ei},e:function(Ei){It=!0,ei=Ei},f:function(){try{!nt&&null!=st.return&&st.return()}finally{if(It)throw ei}}}}function br(wt,At){(null==At||At>wt.length)&&(At=wt.length);for(var st=0,ot=new Array(At);st<At;st++)ot[st]=wt[st];return ot}var Jn={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(At,st,ot){if(ot)return{dzuuid:ot.file.upload.uuid,dzchunkindex:ot.index,dztotalfilesize:ot.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:ot.file.upload.totalChunkCount,dzchunkbyteoffset:ot.index*this.options.chunkSize}},accept:function(At,st){return st()},chunksUploaded:function(At,st){st()},fallback:function(){var At;this.element.className="".concat(this.element.className," dz-browser-not-supported");var ot,st=Dn(this.element.getElementsByTagName("div"),!0);try{for(st.s();!(ot=st.n()).done;){var qe=ot.value;if(/(^| )dz-message($| )/.test(qe.className)){At=qe,qe.className="dz-message";break}}}catch(It){st.e(It)}finally{st.f()}At||(At=Tt.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(At));var nt=At.getElementsByTagName("span")[0];return nt&&(null!=nt.textContent?nt.textContent=this.options.dictFallbackMessage:null!=nt.innerText&&(nt.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(At,st,ot,qe){var nt={srcX:0,srcY:0,srcWidth:At.width,srcHeight:At.height},It=At.width/At.height;null==st&&null==ot?(st=nt.srcWidth,ot=nt.srcHeight):null==st?st=ot*It:null==ot&&(ot=st/It);var ei=(st=Math.min(st,nt.srcWidth))/(ot=Math.min(ot,nt.srcHeight));if(nt.srcWidth>st||nt.srcHeight>ot)if("crop"===qe)It>ei?(nt.srcHeight=At.height,nt.srcWidth=nt.srcHeight*ei):(nt.srcWidth=At.width,nt.srcHeight=nt.srcWidth/ei);else{if("contain"!==qe)throw new Error("Unknown resizeMethod '".concat(qe,"'"));It>ei?ot=st/It:st=ot*It}return nt.srcX=(At.width-nt.srcWidth)/2,nt.srcY=(At.height-nt.srcHeight)/2,nt.trgWidth=st,nt.trgHeight=ot,nt},transformFile:function(At,st){return(this.options.resizeWidth||this.options.resizeHeight)&&At.type.match(/image.*/)?this.resizeImage(At,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,st):st(At)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(At){return this.element.classList.remove("dz-drag-hover")},dragstart:function(At){},dragend:function(At){return this.element.classList.remove("dz-drag-hover")},dragenter:function(At){return this.element.classList.add("dz-drag-hover")},dragover:function(At){return this.element.classList.add("dz-drag-hover")},dragleave:function(At){return this.element.classList.remove("dz-drag-hover")},paste:function(At){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(At){var st=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){At.previewElement=Tt.createElement(this.options.previewTemplate.trim()),At.previewTemplate=At.previewElement,this.previewsContainer.appendChild(At.previewElement);var qe,ot=Dn(At.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(ot.s();!(qe=ot.n()).done;){var nt=qe.value;nt.textContent=At.name}}catch(Ot){ot.e(Ot)}finally{ot.f()}var ei,It=Dn(At.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(It.s();!(ei=It.n()).done;)(nt=ei.value).innerHTML=this.filesize(At.size)}catch(Ot){It.e(Ot)}finally{It.f()}this.options.addRemoveLinks&&(At._removeLink=Tt.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),At.previewElement.appendChild(At._removeLink));var Ki,Yi=function(xe){return xe.preventDefault(),xe.stopPropagation(),At.status===Tt.UPLOADING?Tt.confirm(st.options.dictCancelUploadConfirmation,function(){return st.removeFile(At)}):st.options.dictRemoveFileConfirmation?Tt.confirm(st.options.dictRemoveFileConfirmation,function(){return st.removeFile(At)}):st.removeFile(At)},Ei=Dn(At.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(Ei.s();!(Ki=Ei.n()).done;)Ki.value.addEventListener("click",Yi)}catch(Ot){Ei.e(Ot)}finally{Ei.f()}}},removedfile:function(At){return null!=At.previewElement&&null!=At.previewElement.parentNode&&At.previewElement.parentNode.removeChild(At.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(At,st){if(At.previewElement){At.previewElement.classList.remove("dz-file-preview");var qe,ot=Dn(At.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(ot.s();!(qe=ot.n()).done;){var nt=qe.value;nt.alt=At.name,nt.src=st}}catch(It){ot.e(It)}finally{ot.f()}return setTimeout(function(){return At.previewElement.classList.add("dz-image-preview")},1)}},error:function(At,st){if(At.previewElement){At.previewElement.classList.add("dz-error"),"string"!=typeof st&&st.error&&(st=st.error);var qe,ot=Dn(At.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(ot.s();!(qe=ot.n()).done;)qe.value.textContent=st}catch(It){ot.e(It)}finally{ot.f()}}},errormultiple:function(){},processing:function(At){if(At.previewElement&&(At.previewElement.classList.add("dz-processing"),At._removeLink))return At._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(At,st,ot){if(At.previewElement){var nt,qe=Dn(At.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(qe.s();!(nt=qe.n()).done;){var It=nt.value;"PROGRESS"===It.nodeName?It.value=st:It.style.width="".concat(st,"%")}}catch(ei){qe.e(ei)}finally{qe.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(At){if(At.previewElement)return At.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(At){return this.emit("error",At,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(At){if(At._removeLink&&(At._removeLink.innerHTML=this.options.dictRemoveFile),At.previewElement)return At.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function zn(wt){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(st){return typeof st}:function(st){return st&&"function"==typeof Symbol&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st})(wt)}function On(wt,At){var st;if(typeof Symbol>"u"||null==wt[Symbol.iterator]){if(Array.isArray(wt)||(st=function sr(wt,At){if(wt){if("string"==typeof wt)return fr(wt,At);var st=Object.prototype.toString.call(wt).slice(8,-1);if("Object"===st&&wt.constructor&&(st=wt.constructor.name),"Map"===st||"Set"===st)return Array.from(wt);if("Arguments"===st||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return fr(wt,At)}}(wt))||At&&wt&&"number"==typeof wt.length){st&&(wt=st);var ot=0,qe=function(){};return{s:qe,n:function(){return ot>=wt.length?{done:!0}:{done:!1,value:wt[ot++]}},e:function(Ei){throw Ei},f:qe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ei,nt=!0,It=!1;return{s:function(){st=wt[Symbol.iterator]()},n:function(){var Ei=st.next();return nt=Ei.done,Ei},e:function(Ei){It=!0,ei=Ei},f:function(){try{!nt&&null!=st.return&&st.return()}finally{if(It)throw ei}}}}function fr(wt,At){(null==At||At>wt.length)&&(At=wt.length);for(var st=0,ot=new Array(At);st<At;st++)ot[st]=wt[st];return ot}function Yr(wt,At){if(!(wt instanceof At))throw new TypeError("Cannot call a class as a function")}function Nn(wt,At){for(var st=0;st<At.length;st++){var ot=At[st];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(wt,ot.key,ot)}}function _r(wt,At,st){return At&&Nn(wt.prototype,At),st&&Nn(wt,st),wt}function ur(wt,At){if("function"!=typeof At&&null!==At)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(At&&At.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),At&&mr(wt,At)}function mr(wt,At){return(mr=Object.setPrototypeOf||function(ot,qe){return ot.__proto__=qe,ot})(wt,At)}function kr(wt){var At=function Qe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var qe,ot=Mt(wt);if(At){var nt=Mt(this).constructor;qe=Reflect.construct(ot,arguments,nt)}else qe=ot.apply(this,arguments);return Ft(this,qe)}}function Ft(wt,At){return!At||"object"!==zn(At)&&"function"!=typeof At?Ze(wt):At}function Ze(wt){if(void 0===wt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}function Mt(wt){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(st){return st.__proto__||Object.getPrototypeOf(st)})(wt)}var Tt=function(wt){ur(st,wt);var At=kr(st);function st(ot,qe){var nt,It,ei;if(Yr(this,st),(nt=At.call(this)).element=ot,nt.version=st.version,nt.clickableElements=[],nt.listeners=[],nt.files=[],"string"==typeof nt.element&&(nt.element=document.querySelector(nt.element)),!nt.element||null==nt.element.nodeType)throw new Error("Invalid dropzone element.");if(nt.element.dropzone)throw new Error("Dropzone already attached.");st.instances.push(Ze(nt)),nt.element.dropzone=Ze(nt);var Yi=null!=(ei=st.optionsForElement(nt.element))?ei:{};if(nt.options=st.extend({},Jn,Yi,qe??{}),nt.options.previewTemplate=nt.options.previewTemplate.replace(/\n*/g,""),nt.options.forceFallback||!st.isBrowserSupported())return Ft(nt,nt.options.fallback.call(Ze(nt)));if(null==nt.options.url&&(nt.options.url=nt.element.getAttribute("action")),!nt.options.url)throw new Error("No URL provided.");if(nt.options.acceptedFiles&&nt.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(nt.options.uploadMultiple&&nt.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return nt.options.acceptedMimeTypes&&(nt.options.acceptedFiles=nt.options.acceptedMimeTypes,delete nt.options.acceptedMimeTypes),null!=nt.options.renameFilename&&(nt.options.renameFile=function(Ei){return nt.options.renameFilename.call(Ze(nt),Ei.name,Ei)}),"string"==typeof nt.options.method&&(nt.options.method=nt.options.method.toUpperCase()),(It=nt.getExistingFallback())&&It.parentNode&&It.parentNode.removeChild(It),!1!==nt.options.previewsContainer&&(nt.previewsContainer=nt.options.previewsContainer?st.getElement(nt.options.previewsContainer,"previewsContainer"):nt.element),nt.options.clickable&&(nt.clickableElements=!0===nt.options.clickable?[nt.element]:st.getElements(nt.options.clickable,"clickable")),nt.init(),nt}return _r(st,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(qe){return qe.accepted}).map(function(qe){return qe})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(qe){return!qe.accepted}).map(function(qe){return qe})}},{key:"getFilesWithStatus",value:function(qe){return this.files.filter(function(nt){return nt.status===qe}).map(function(nt){return nt})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(st.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(st.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(st.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(qe){return qe.status===st.UPLOADING||qe.status===st.QUEUED}).map(function(qe){return qe})}},{key:"init",value:function(){var qe=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(st.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function Ct(){qe.hiddenFileInput&&qe.hiddenFileInput.parentNode.removeChild(qe.hiddenFileInput),qe.hiddenFileInput=document.createElement("input"),qe.hiddenFileInput.setAttribute("type","file"),(null===qe.options.maxFiles||qe.options.maxFiles>1)&&qe.hiddenFileInput.setAttribute("multiple","multiple"),qe.hiddenFileInput.className="dz-hidden-input",null!==qe.options.acceptedFiles&&qe.hiddenFileInput.setAttribute("accept",qe.options.acceptedFiles),null!==qe.options.capture&&qe.hiddenFileInput.setAttribute("capture",qe.options.capture),qe.hiddenFileInput.setAttribute("tabindex","-1"),qe.hiddenFileInput.style.visibility="hidden",qe.hiddenFileInput.style.position="absolute",qe.hiddenFileInput.style.top="0",qe.hiddenFileInput.style.left="0",qe.hiddenFileInput.style.height="0",qe.hiddenFileInput.style.width="0",st.getElement(qe.options.hiddenInputContainer,"hiddenInputContainer").appendChild(qe.hiddenFileInput),qe.hiddenFileInput.addEventListener("change",function(){var Ot=qe.hiddenFileInput.files;if(Ot.length){var bt,xe=On(Ot,!0);try{for(xe.s();!(bt=xe.n()).done;)qe.addFile(bt.value)}catch(Xe){xe.e(Xe)}finally{xe.f()}}qe.emit("addedfiles",Ot),Ct()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var ei,It=On(this.events,!0);try{for(It.s();!(ei=It.n()).done;){var Yi=ei.value;this.on(Yi,this.options[Yi])}}catch(Ct){It.e(Ct)}finally{It.f()}this.on("uploadprogress",function(){return qe.updateTotalUploadProgress()}),this.on("removedfile",function(){return qe.updateTotalUploadProgress()}),this.on("canceled",function(Ct){return qe.emit("complete",Ct)}),this.on("complete",function(Ct){if(0===qe.getAddedFiles().length&&0===qe.getUploadingFiles().length&&0===qe.getQueuedFiles().length)return setTimeout(function(){return qe.emit("queuecomplete")},0)});var Ki=function(Ot){if(function(Ot){if(Ot.dataTransfer.types)for(var xe=0;xe<Ot.dataTransfer.types.length;xe++)if("Files"===Ot.dataTransfer.types[xe])return!0;return!1}(Ot))return Ot.stopPropagation(),Ot.preventDefault?Ot.preventDefault():Ot.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Ot){return qe.emit("dragstart",Ot)},dragenter:function(Ot){return Ki(Ot),qe.emit("dragenter",Ot)},dragover:function(Ot){var xe;try{xe=Ot.dataTransfer.effectAllowed}catch{}return Ot.dataTransfer.dropEffect="move"===xe||"linkMove"===xe?"move":"copy",Ki(Ot),qe.emit("dragover",Ot)},dragleave:function(Ot){return qe.emit("dragleave",Ot)},drop:function(Ot){return Ki(Ot),qe.drop(Ot)},dragend:function(Ot){return qe.emit("dragend",Ot)}}}],this.clickableElements.forEach(function(Ct){return qe.listeners.push({element:Ct,events:{click:function(xe){return(Ct!==qe.element||xe.target===qe.element||st.elementInside(xe.target,qe.element.querySelector(".dz-message")))&&qe.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,st.instances.splice(st.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var qe,nt=0,It=0;if(this.getActiveFiles().length){var Ei,Yi=On(this.getActiveFiles(),!0);try{for(Yi.s();!(Ei=Yi.n()).done;){var Ki=Ei.value;nt+=Ki.upload.bytesSent,It+=Ki.upload.total}}catch(Ct){Yi.e(Ct)}finally{Yi.f()}qe=100*nt/It}else qe=100;return this.emit("totaluploadprogress",qe,It,nt)}},{key:"_getParamName",value:function(qe){return"function"==typeof this.options.paramName?this.options.paramName(qe):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(qe,"]"):"")}},{key:"_renameFile",value:function(qe){return"function"!=typeof this.options.renameFile?qe.name:this.options.renameFile(qe)}},{key:"getFallbackForm",value:function(){var qe,nt;if(qe=this.getExistingFallback())return qe;var It='<div class="dz-fallback">';this.options.dictFallbackText&&(It+="<p>".concat(this.options.dictFallbackText,"</p>")),It+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var ei=st.createElement(It);return"FORM"!==this.element.tagName?(nt=st.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(ei):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),nt??ei}},{key:"getExistingFallback",value:function(){for(var qe=function(Ki){var Ot,Ct=On(Ki,!0);try{for(Ct.s();!(Ot=Ct.n()).done;){var xe=Ot.value;if(/(^| )fallback($| )/.test(xe.className))return xe}}catch(bt){Ct.e(bt)}finally{Ct.f()}},nt=0,It=["div","form"];nt<It.length;nt++){var Yi;if(Yi=qe(this.element.getElementsByTagName(It[nt])))return Yi}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(qe){return function(){var nt=[];for(var It in qe.events)nt.push(qe.element.addEventListener(It,qe.events[It],!1));return nt}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(qe){return function(){var nt=[];for(var It in qe.events)nt.push(qe.element.removeEventListener(It,qe.events[It],!1));return nt}()})}},{key:"disable",value:function(){var qe=this;return this.clickableElements.forEach(function(nt){return nt.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(nt){return qe.cancelUpload(nt)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(qe){return qe.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(qe){var nt=0,It="b";if(qe>0){for(var ei=["tb","gb","mb","kb","b"],Yi=0;Yi<ei.length;Yi++){var Ei=ei[Yi];if(qe>=Math.pow(this.options.filesizeBase,4-Yi)/10){nt=qe/Math.pow(this.options.filesizeBase,4-Yi),It=Ei;break}}nt=Math.round(10*nt)/10}return"<strong>".concat(nt,"</strong> ").concat(this.options.dictFileSizeUnits[It])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(qe){if(qe.dataTransfer){this.emit("drop",qe);for(var nt=[],It=0;It<qe.dataTransfer.files.length;It++)nt[It]=qe.dataTransfer.files[It];if(nt.length){var ei=qe.dataTransfer.items;ei&&ei.length&&null!=ei[0].webkitGetAsEntry?this._addFilesFromItems(ei):this.handleFiles(nt)}this.emit("addedfiles",nt)}}},{key:"paste",value:function(qe){if(null!=function Vt(wt,At){return typeof wt<"u"&&null!==wt?At(wt):void 0}(qe?.clipboardData,function(It){return It.items})){this.emit("paste",qe);var nt=qe.clipboardData.items;if(nt.length)return this._addFilesFromItems(nt)}}},{key:"handleFiles",value:function(qe){var It,nt=On(qe,!0);try{for(nt.s();!(It=nt.n()).done;)this.addFile(It.value)}catch(Yi){nt.e(Yi)}finally{nt.f()}}},{key:"_addFilesFromItems",value:function(qe){var nt=this;return function(){var Yi,It=[],ei=On(qe,!0);try{for(ei.s();!(Yi=ei.n()).done;){var Ki,Ei=Yi.value;null!=Ei.webkitGetAsEntry&&(Ki=Ei.webkitGetAsEntry())?It.push(Ki.isFile?nt.addFile(Ei.getAsFile()):Ki.isDirectory?nt._addFilesFromDirectory(Ki,Ki.name):void 0):It.push(null==Ei.getAsFile||null!=Ei.kind&&"file"!==Ei.kind?void 0:nt.addFile(Ei.getAsFile()))}}catch(Ct){ei.e(Ct)}finally{ei.f()}return It}()}},{key:"_addFilesFromDirectory",value:function(qe,nt){var It=this,ei=qe.createReader(),Yi=function(Ct){return function $t(wt,At,st){if(typeof wt<"u"&&null!==wt&&"function"==typeof wt[At])return st(wt,At)}(console,"log",function(Ot){return Ot.log(Ct)})};return function Ki(){return ei.readEntries(function(Ct){if(Ct.length>0){var xe,Ot=On(Ct,!0);try{for(Ot.s();!(xe=Ot.n()).done;){var bt=xe.value;bt.isFile?bt.file(function(Yt){if(!It.options.ignoreHiddenFiles||"."!==Yt.name.substring(0,1))return Yt.fullPath="".concat(nt,"/").concat(Yt.name),It.addFile(Yt)}):bt.isDirectory&&It._addFilesFromDirectory(bt,"".concat(nt,"/").concat(bt.name))}}catch(Yt){Ot.e(Yt)}finally{Ot.f()}Ki()}return null},Yi)}()}},{key:"accept",value:function(qe,nt){this.options.maxFilesize&&qe.size>1024*this.options.maxFilesize*1024?nt(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(qe.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):st.isValidFile(qe,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(nt(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",qe)):this.options.accept.call(this,qe,nt):nt(this.options.dictInvalidFileType)}},{key:"addFile",value:function(qe){var nt=this;qe.upload={uuid:st.uuidv4(),progress:0,total:qe.size,bytesSent:0,filename:this._renameFile(qe)},this.files.push(qe),qe.status=st.ADDED,this.emit("addedfile",qe),this._enqueueThumbnail(qe),this.accept(qe,function(It){It?(qe.accepted=!1,nt._errorProcessing([qe],It)):(qe.accepted=!0,nt.options.autoQueue&&nt.enqueueFile(qe)),nt._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(qe){var It,nt=On(qe,!0);try{for(nt.s();!(It=nt.n()).done;)this.enqueueFile(It.value)}catch(Yi){nt.e(Yi)}finally{nt.f()}return null}},{key:"enqueueFile",value:function(qe){var nt=this;if(qe.status!==st.ADDED||!0!==qe.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(qe.status=st.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return nt.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(qe){var nt=this;if(this.options.createImageThumbnails&&qe.type.match(/image.*/)&&qe.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(qe),setTimeout(function(){return nt._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var qe=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var nt=this._thumbnailQueue.shift();return this.createThumbnail(nt,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(It){return qe.emit("thumbnail",nt,It),qe._processingThumbnail=!1,qe._processThumbnailQueue()})}}},{key:"removeFile",value:function(qe){if(qe.status===st.UPLOADING&&this.cancelUpload(qe),this.files=Zt(this.files,qe),this.emit("removedfile",qe),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(qe){null==qe&&(qe=!1);var It,nt=On(this.files.slice(),!0);try{for(nt.s();!(It=nt.n()).done;){var ei=It.value;(ei.status!==st.UPLOADING||qe)&&this.removeFile(ei)}}catch(Yi){nt.e(Yi)}finally{nt.f()}return null}},{key:"resizeImage",value:function(qe,nt,It,ei,Yi){var Ei=this;return this.createThumbnail(qe,nt,It,ei,!0,function(Ki,Ct){if(null==Ct)return Yi(qe);var Ot=Ei.options.resizeMimeType;null==Ot&&(Ot=qe.type);var xe=Ct.toDataURL(Ot,Ei.options.resizeQuality);return("image/jpeg"===Ot||"image/jpg"===Ot)&&(xe=Ne.restore(qe.dataURL,xe)),Yi(st.dataURItoBlob(xe))})}},{key:"createThumbnail",value:function(qe,nt,It,ei,Yi,Ei){var Ki=this,Ct=new FileReader;Ct.onload=function(){qe.dataURL=Ct.result,"image/svg+xml"!==qe.type?Ki.createThumbnailFromUrl(qe,nt,It,ei,Yi,Ei):Ei?.(Ct.result)},Ct.readAsDataURL(qe)}},{key:"displayExistingFile",value:function(qe,nt,It,ei){var Yi=this,Ei=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",qe),this.emit("complete",qe),Ei){qe.dataURL=nt,this.createThumbnailFromUrl(qe,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(Ot){Yi.emit("thumbnail",qe,Ot),It&&It()},ei)}else this.emit("thumbnail",qe,nt),It&&It()}},{key:"createThumbnailFromUrl",value:function(qe,nt,It,ei,Yi,Ei,Ki){var Ct=this,Ot=document.createElement("img");return Ki&&(Ot.crossOrigin=Ki),Yi="from-image"!=getComputedStyle(document.body).imageOrientation&&Yi,Ot.onload=function(){var xe=function(Yt){return Yt(1)};return typeof EXIF<"u"&&null!==EXIF&&Yi&&(xe=function(Yt){return EXIF.getData(Ot,function(){return Yt(EXIF.getTag(this,"Orientation"))})}),xe(function(bt){qe.width=Ot.width,qe.height=Ot.height;var Yt=Ct.options.resize.call(Ct,qe,nt,It,ei),Xe=document.createElement("canvas"),Ut=Xe.getContext("2d");switch(Xe.width=Yt.trgWidth,Xe.height=Yt.trgHeight,bt>4&&(Xe.width=Yt.trgHeight,Xe.height=Yt.trgWidth),bt){case 2:Ut.translate(Xe.width,0),Ut.scale(-1,1);break;case 3:Ut.translate(Xe.width,Xe.height),Ut.rotate(Math.PI);break;case 4:Ut.translate(0,Xe.height),Ut.scale(1,-1);break;case 5:Ut.rotate(.5*Math.PI),Ut.scale(1,-1);break;case 6:Ut.rotate(.5*Math.PI),Ut.translate(0,-Xe.width);break;case 7:Ut.rotate(.5*Math.PI),Ut.translate(Xe.height,-Xe.width),Ut.scale(-1,1);break;case 8:Ut.rotate(-.5*Math.PI),Ut.translate(-Xe.height,0)}ae(Ut,Ot,null!=Yt.srcX?Yt.srcX:0,null!=Yt.srcY?Yt.srcY:0,Yt.srcWidth,Yt.srcHeight,null!=Yt.trgX?Yt.trgX:0,null!=Yt.trgY?Yt.trgY:0,Yt.trgWidth,Yt.trgHeight);var pe=Xe.toDataURL("image/png");if(null!=Ei)return Ei(pe,Xe)})},null!=Ei&&(Ot.onerror=Ei),Ot.src=qe.dataURL}},{key:"processQueue",value:function(){var qe=this.options.parallelUploads,nt=this.getUploadingFiles().length,It=nt;if(!(nt>=qe)){var ei=this.getQueuedFiles();if(ei.length>0){if(this.options.uploadMultiple)return this.processFiles(ei.slice(0,qe-nt));for(;It<qe;){if(!ei.length)return;this.processFile(ei.shift()),It++}}}}},{key:"processFile",value:function(qe){return this.processFiles([qe])}},{key:"processFiles",value:function(qe){var It,nt=On(qe,!0);try{for(nt.s();!(It=nt.n()).done;){var ei=It.value;ei.processing=!0,ei.status=st.UPLOADING,this.emit("processing",ei)}}catch(Yi){nt.e(Yi)}finally{nt.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",qe),this.uploadFiles(qe)}},{key:"_getFilesWithXhr",value:function(qe){return this.files.filter(function(It){return It.xhr===qe}).map(function(It){return It})}},{key:"cancelUpload",value:function(qe){if(qe.status===st.UPLOADING){var ei,nt=this._getFilesWithXhr(qe.xhr),It=On(nt,!0);try{for(It.s();!(ei=It.n()).done;)ei.value.status=st.CANCELED}catch(Ot){It.e(Ot)}finally{It.f()}typeof qe.xhr<"u"&&qe.xhr.abort();var Ki,Ei=On(nt,!0);try{for(Ei.s();!(Ki=Ei.n()).done;)this.emit("canceled",Ki.value)}catch(Ot){Ei.e(Ot)}finally{Ei.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",nt)}else(qe.status===st.ADDED||qe.status===st.QUEUED)&&(qe.status=st.CANCELED,this.emit("canceled",qe),this.options.uploadMultiple&&this.emit("canceledmultiple",[qe]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(qe){if("function"==typeof qe){for(var nt=arguments.length,It=new Array(nt>1?nt-1:0),ei=1;ei<nt;ei++)It[ei-1]=arguments[ei];return qe.apply(this,It)}return qe}},{key:"uploadFile",value:function(qe){return this.uploadFiles([qe])}},{key:"uploadFiles",value:function(qe){var nt=this;this._transformFiles(qe,function(It){if(nt.options.chunking){var ei=It[0];qe[0].upload.chunked=nt.options.chunking&&(nt.options.forceChunking||ei.size>nt.options.chunkSize),qe[0].upload.totalChunkCount=Math.ceil(ei.size/nt.options.chunkSize)}if(qe[0].upload.chunked){var Yi=qe[0],Ei=It[0];Yi.upload.chunks=[];var Ct=function(){for(var Xe=0;void 0!==Yi.upload.chunks[Xe];)Xe++;if(!(Xe>=Yi.upload.totalChunkCount)){var Ut=Xe*nt.options.chunkSize,pe=Math.min(Ut+nt.options.chunkSize,Ei.size),i={name:nt._getParamName(0),data:Ei.webkitSlice?Ei.webkitSlice(Ut,pe):Ei.slice(Ut,pe),filename:Yi.upload.filename,chunkIndex:Xe};Yi.upload.chunks[Xe]={file:Yi,index:Xe,dataBlock:i,status:st.UPLOADING,progress:0,retries:0},nt._uploadData(qe,[i])}};if(Yi.upload.finishedChunkUpload=function(Yt,Xe){var Ut=!0;Yt.status=st.SUCCESS,Yt.dataBlock=null,Yt.xhr=null;for(var pe=0;pe<Yi.upload.totalChunkCount;pe++){if(void 0===Yi.upload.chunks[pe])return Ct();Yi.upload.chunks[pe].status!==st.SUCCESS&&(Ut=!1)}Ut&&nt.options.chunksUploaded(Yi,function(){nt._finished(qe,Xe,null)})},nt.options.parallelChunkUploads)for(var Ot=0;Ot<Yi.upload.totalChunkCount;Ot++)Ct();else Ct()}else{for(var xe=[],bt=0;bt<qe.length;bt++)xe[bt]={name:nt._getParamName(bt),data:It[bt],filename:qe[bt].upload.filename};nt._uploadData(qe,xe)}})}},{key:"_getChunk",value:function(qe,nt){for(var It=0;It<qe.upload.totalChunkCount;It++)if(void 0!==qe.upload.chunks[It]&&qe.upload.chunks[It].xhr===nt)return qe.upload.chunks[It]}},{key:"_uploadData",value:function(qe,nt){var Ei,It=this,ei=new XMLHttpRequest,Yi=On(qe,!0);try{for(Yi.s();!(Ei=Yi.n()).done;)Ei.value.xhr=ei}catch(W){Yi.e(W)}finally{Yi.f()}qe[0].upload.chunked&&(qe[0].upload.chunks[nt[0].chunkIndex].xhr=ei);var Ct=this.resolveOption(this.options.method,qe),Ot=this.resolveOption(this.options.url,qe);ei.open(Ct,Ot,!0),this.resolveOption(this.options.timeout,qe)&&(ei.timeout=this.resolveOption(this.options.timeout,qe)),ei.withCredentials=!!this.options.withCredentials,ei.onload=function(W){It._finishedUploading(qe,ei,W)},ei.ontimeout=function(){It._handleUploadError(qe,ei,"Request timedout after ".concat(It.options.timeout/1e3," seconds"))},ei.onerror=function(){It._handleUploadError(qe,ei)},(null!=ei.upload?ei.upload:ei).onprogress=function(W){return It._updateFilesUploadProgress(qe,ei,W)};var Yt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Xe in this.options.headers&&st.extend(Yt,this.options.headers),Yt){var Ut=Yt[Xe];Ut&&ei.setRequestHeader(Xe,Ut)}var pe=new FormData;if(this.options.params){var i=this.options.params;for(var r in"function"==typeof i&&(i=i.call(this,qe,ei,qe[0].upload.chunked?this._getChunk(qe[0],ei):null)),i){var d=i[r];if(Array.isArray(d))for(var g=0;g<d.length;g++)pe.append(r,d[g]);else pe.append(r,d)}}var w,x=On(qe,!0);try{for(x.s();!(w=x.n()).done;)this.emit("sending",w.value,ei,pe)}catch(W){x.e(W)}finally{x.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",qe,ei,pe),this._addFormElementData(pe);for(var R=0;R<nt.length;R++){var Y=nt[R];pe.append(Y.name,Y.data,Y.filename)}this.submitRequest(ei,pe,qe)}},{key:"_transformFiles",value:function(qe,nt){for(var It=this,ei=[],Yi=0,Ei=function(Ot){It.options.transformFile.call(It,qe[Ot],function(xe){ei[Ot]=xe,++Yi===qe.length&&nt(ei)})},Ki=0;Ki<qe.length;Ki++)Ei(Ki)}},{key:"_addFormElementData",value:function(qe){if("FORM"===this.element.tagName){var It,nt=On(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(nt.s();!(It=nt.n()).done;){var ei=It.value,Yi=ei.getAttribute("name"),Ei=ei.getAttribute("type");if(Ei&&(Ei=Ei.toLowerCase()),!(typeof Yi>"u"||null===Yi))if("SELECT"===ei.tagName&&ei.hasAttribute("multiple")){var Ct,Ki=On(ei.options,!0);try{for(Ki.s();!(Ct=Ki.n()).done;){var Ot=Ct.value;Ot.selected&&qe.append(Yi,Ot.value)}}catch(xe){Ki.e(xe)}finally{Ki.f()}}else(!Ei||"checkbox"!==Ei&&"radio"!==Ei||ei.checked)&&qe.append(Yi,ei.value)}}catch(xe){nt.e(xe)}finally{nt.f()}}}},{key:"_updateFilesUploadProgress",value:function(qe,nt,It){if(qe[0].upload.chunked){var Ki=qe[0],Ct=this._getChunk(Ki,nt);It?(Ct.progress=100*It.loaded/It.total,Ct.total=It.total,Ct.bytesSent=It.loaded):(Ct.progress=100,Ct.bytesSent=Ct.total),Ki.upload.progress=0,Ki.upload.total=0,Ki.upload.bytesSent=0;for(var Ot=0;Ot<Ki.upload.totalChunkCount;Ot++)Ki.upload.chunks[Ot]&&typeof Ki.upload.chunks[Ot].progress<"u"&&(Ki.upload.progress+=Ki.upload.chunks[Ot].progress,Ki.upload.total+=Ki.upload.chunks[Ot].total,Ki.upload.bytesSent+=Ki.upload.chunks[Ot].bytesSent);Ki.upload.progress=Ki.upload.progress/Ki.upload.totalChunkCount,this.emit("uploadprogress",Ki,Ki.upload.progress,Ki.upload.bytesSent)}else{var Yi,ei=On(qe,!0);try{for(ei.s();!(Yi=ei.n()).done;){var Ei=Yi.value;Ei.upload.total&&Ei.upload.bytesSent&&Ei.upload.bytesSent==Ei.upload.total||(It?(Ei.upload.progress=100*It.loaded/It.total,Ei.upload.total=It.total,Ei.upload.bytesSent=It.loaded):(Ei.upload.progress=100,Ei.upload.bytesSent=Ei.upload.total),this.emit("uploadprogress",Ei,Ei.upload.progress,Ei.upload.bytesSent))}}catch(xe){ei.e(xe)}finally{ei.f()}}}},{key:"_finishedUploading",value:function(qe,nt,It){var ei;if(qe[0].status!==st.CANCELED&&4===nt.readyState){if("arraybuffer"!==nt.responseType&&"blob"!==nt.responseType&&(ei=nt.responseText,nt.getResponseHeader("content-type")&&~nt.getResponseHeader("content-type").indexOf("application/json")))try{ei=JSON.parse(ei)}catch(Yi){It=Yi,ei="Invalid JSON response from server."}this._updateFilesUploadProgress(qe,nt),200<=nt.status&&nt.status<300?qe[0].upload.chunked?qe[0].upload.finishedChunkUpload(this._getChunk(qe[0],nt),ei):this._finished(qe,ei,It):this._handleUploadError(qe,nt,ei)}}},{key:"_handleUploadError",value:function(qe,nt,It){if(qe[0].status!==st.CANCELED){if(qe[0].upload.chunked&&this.options.retryChunks){var ei=this._getChunk(qe[0],nt);if(ei.retries++<this.options.retryChunksLimit)return void this._uploadData(qe,[ei.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(qe,It||this.options.dictResponseError.replace("{{statusCode}}",nt.status),nt)}}},{key:"submitRequest",value:function(qe,nt,It){1==qe.readyState?qe.send(nt):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(qe,nt,It){var Yi,ei=On(qe,!0);try{for(ei.s();!(Yi=ei.n()).done;){var Ei=Yi.value;Ei.status=st.SUCCESS,this.emit("success",Ei,nt,It),this.emit("complete",Ei)}}catch(Ki){ei.e(Ki)}finally{ei.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",qe,nt,It),this.emit("completemultiple",qe)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(qe,nt,It){var Yi,ei=On(qe,!0);try{for(ei.s();!(Yi=ei.n()).done;){var Ei=Yi.value;Ei.status=st.ERROR,this.emit("error",Ei,nt,It),this.emit("complete",Ei)}}catch(Ki){ei.e(Ki)}finally{ei.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",qe,nt,It),this.emit("completemultiple",qe)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=fn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(qe){for(var nt=arguments.length,It=new Array(nt>1?nt-1:0),ei=1;ei<nt;ei++)It[ei-1]=arguments[ei];for(var Yi=0,Ei=It;Yi<Ei.length;Yi++){var Ki=Ei[Yi];for(var Ct in Ki)qe[Ct]=Ki[Ct]}return qe}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(qe){var nt=16*Math.random()|0;return("x"===qe?nt:3&nt|8).toString(16)})}}]),st}(fn);Tt.initClass(),Tt.version="5.9.3",Tt.options={},Tt.optionsForElement=function(wt){if(wt.getAttribute("id"))return Tt.options[Pt(wt.getAttribute("id"))]},Tt.instances=[],Tt.forElement=function(wt){if("string"==typeof wt&&(wt=document.querySelector(wt)),null==wt?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return wt.dropzone},Tt.autoDiscover=!0,Tt.discover=function(){var wt;if(document.querySelectorAll)wt=document.querySelectorAll(".dropzone");else{wt=[];var At=function(ot){return function(){var It,qe=[],nt=On(ot,!0);try{for(nt.s();!(It=nt.n()).done;){var ei=It.value;/(^| )dropzone($| )/.test(ei.className)?qe.push(wt.push(ei)):qe.push(void 0)}}catch(Yi){nt.e(Yi)}finally{nt.f()}return qe}()};At(document.getElementsByTagName("div")),At(document.getElementsByTagName("form"))}return function(){var qe,st=[],ot=On(wt,!0);try{for(ot.s();!(qe=ot.n()).done;){var nt=qe.value;!1!==Tt.optionsForElement(nt)?st.push(new Tt(nt)):st.push(void 0)}}catch(It){ot.e(It)}finally{ot.f()}return st}()},Tt.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Tt.isBrowserSupported=function(){var wt=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==Tt.blacklistedBrowsers&&(Tt.blockedBrowsers=Tt.blacklistedBrowsers);var st,At=On(Tt.blockedBrowsers,!0);try{for(At.s();!(st=At.n()).done;)st.value.test(navigator.userAgent)&&(wt=!1)}catch(qe){At.e(qe)}finally{At.f()}}else wt=!1;else wt=!1;return wt},Tt.dataURItoBlob=function(wt){for(var At=atob(wt.split(",")[1]),st=wt.split(",")[0].split(":")[1].split(";")[0],ot=new ArrayBuffer(At.length),qe=new Uint8Array(ot),nt=0,It=At.length,ei=0<=It;ei?nt<=It:nt>=It;ei?nt++:nt--)qe[nt]=At.charCodeAt(nt);return new Blob([ot],{type:st})};var Zt=function(At,st){return At.filter(function(ot){return ot!==st}).map(function(ot){return ot})},Pt=function(At){return At.replace(/[\-_](\w)/g,function(st){return st.charAt(1).toUpperCase()})};Tt.createElement=function(wt){var At=document.createElement("div");return At.innerHTML=wt,At.childNodes[0]},Tt.elementInside=function(wt,At){if(wt===At)return!0;for(;wt=wt.parentNode;)if(wt===At)return!0;return!1},Tt.getElement=function(wt,At){var st;if("string"==typeof wt?st=document.querySelector(wt):null!=wt.nodeType&&(st=wt),null==st)throw new Error("Invalid `".concat(At,"` option provided. Please provide a CSS selector or a plain HTML element."));return st},Tt.getElements=function(wt,At){var ot;if(wt instanceof Array){ot=[];try{var nt,qe=On(wt,!0);try{for(qe.s();!(nt=qe.n()).done;)ot.push(this.getElement(nt.value,At))}catch(Yi){qe.e(Yi)}finally{qe.f()}}catch{ot=null}}else if("string"==typeof wt){ot=[];var ei,It=On(document.querySelectorAll(wt),!0);try{for(It.s();!(ei=It.n()).done;)ot.push(ei.value)}catch(Yi){It.e(Yi)}finally{It.f()}}else null!=wt.nodeType&&(ot=[wt]);if(null==ot||!ot.length)throw new Error("Invalid `".concat(At,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return ot},Tt.confirm=function(wt,At,st){return window.confirm(wt)?At():null!=st?st():void 0},Tt.isValidFile=function(wt,At){if(!At)return!0;At=At.split(",");var nt,st=wt.type,ot=st.replace(/\/.*$/,""),qe=On(At,!0);try{for(qe.s();!(nt=qe.n()).done;){var It=nt.value;if("."===(It=It.trim()).charAt(0)){if(-1!==wt.name.toLowerCase().indexOf(It.toLowerCase(),wt.name.length-It.length))return!0}else if(/\/\*$/.test(It)){if(ot===It.replace(/\/.*$/,""))return!0}else if(st===It)return!0}}catch(ei){qe.e(ei)}finally{qe.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(wt){return this.each(function(){return new Tt(this,wt)})}),Tt.ADDED="added",Tt.QUEUED="queued",Tt.ACCEPTED=Tt.QUEUED,Tt.UPLOADING="uploading",Tt.PROCESSING=Tt.UPLOADING,Tt.CANCELED="canceled",Tt.ERROR="error",Tt.SUCCESS="success";var ae=function(At,st,ot,qe,nt,It,ei,Yi,Ei,Ki){var Ct=function(At){var ot=At.naturalHeight,qe=document.createElement("canvas");qe.width=1,qe.height=ot;var nt=qe.getContext("2d");nt.drawImage(At,0,0);for(var ei=nt.getImageData(1,0,1,ot).data,Yi=0,Ei=ot,Ki=ot;Ki>Yi;)0===ei[4*(Ki-1)+3]?Ei=Ki:Yi=Ki,Ki=Ei+Yi>>1;var Ot=Ki/ot;return 0===Ot?1:Ot}(st);return At.drawImage(st,ot,qe,nt,It,ei,Yi,Ei,Ki/Ct)},Ne=function(){function wt(){Yr(this,wt)}return _r(wt,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(st){for(var ot="",qe=void 0,nt=void 0,It="",ei=void 0,Yi=void 0,Ei=void 0,Ki="",Ct=0;ei=(qe=st[Ct++])>>2,Yi=(3&qe)<<4|(nt=st[Ct++])>>4,Ei=(15&nt)<<2|(It=st[Ct++])>>6,Ki=63&It,isNaN(nt)?Ei=Ki=64:isNaN(It)&&(Ki=64),ot=ot+this.KEY_STR.charAt(ei)+this.KEY_STR.charAt(Yi)+this.KEY_STR.charAt(Ei)+this.KEY_STR.charAt(Ki),qe=nt=It="",ei=Yi=Ei=Ki="",Ct<st.length;);return ot}},{key:"restore",value:function(st,ot){if(!st.match("data:image/jpeg;base64,"))return ot;var qe=this.decode64(st.replace("data:image/jpeg;base64,","")),nt=this.slice2Segments(qe),It=this.exifManipulation(ot,nt);return"data:image/jpeg;base64,".concat(this.encode64(It))}},{key:"exifManipulation",value:function(st,ot){var qe=this.getExifArray(ot),nt=this.insertExif(st,qe);return new Uint8Array(nt)}},{key:"getExifArray",value:function(st){for(var ot=void 0,qe=0;qe<st.length;){if(255===(ot=st[qe])[0]&225===ot[1])return ot;qe++}return[]}},{key:"insertExif",value:function(st,ot){var qe=st.replace("data:image/jpeg;base64,",""),nt=this.decode64(qe),It=nt.indexOf(255,3),ei=nt.slice(0,It),Yi=nt.slice(It),Ei=ei;return(Ei=Ei.concat(ot)).concat(Yi)}},{key:"slice2Segments",value:function(st){for(var ot=0,qe=[];!(255===st[ot]&218===st[ot+1]);){if(255===st[ot]&216===st[ot+1])ot+=2;else{var It=ot+(256*st[ot+2]+st[ot+3])+2,ei=st.slice(ot,It);qe.push(ei),ot=It}if(ot>st.length)break}return qe}},{key:"decode64",value:function(st){var nt=void 0,It="",ei=void 0,Yi=void 0,Ei=void 0,Ki="",Ct=0,Ot=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(st)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),st=st.replace(/[^A-Za-z0-9\+\/\=]/g,"");ei=this.KEY_STR.indexOf(st.charAt(Ct++)),nt=(15&(Yi=this.KEY_STR.indexOf(st.charAt(Ct++))))<<4|(Ei=this.KEY_STR.indexOf(st.charAt(Ct++)))>>2,It=(3&Ei)<<6|(Ki=this.KEY_STR.indexOf(st.charAt(Ct++))),Ot.push(ei<<2|Yi>>4),64!==Ei&&Ot.push(nt),64!==Ki&&Ot.push(It),nt=It="",ei=Yi=Ei=Ki="",Ct<st.length;);return Ot}}]),wt}();Ne.initClass();Tt._autoDiscoverFunction=function(){if(Tt.autoDiscover)return Tt.discover()},function(At,st){var ot=!1,qe=!0,nt=At.document,It=nt.documentElement,ei=nt.addEventListener?"addEventListener":"attachEvent",Yi=nt.addEventListener?"removeEventListener":"detachEvent",Ei=nt.addEventListener?"":"on",Ki=function Ot(xe){if(("readystatechange"!==xe.type||"complete"===nt.readyState)&&(("load"===xe.type?At:nt)[Yi](Ei+xe.type,Ot,!1),!ot&&(ot=!0)))return st.call(At,xe.type||xe)};if("complete"!==nt.readyState){if(nt.createEventObject&&It.doScroll){try{qe=!At.frameElement}catch{}qe&&function Ot(){try{It.doScroll("left")}catch{return void setTimeout(Ot,50)}return Ki("poll")}()}nt[ei](Ei+"DOMContentLoaded",Ki,!1),nt[ei](Ei+"readystatechange",Ki,!1),At[ei](Ei+"load",Ki,!1)}}(window,Tt._autoDiscoverFunction),window.Dropzone=Tt;var Hi=Tt}(),Mi}()},6900:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(ms){for(var lr=[],Et=1;Et<arguments.length;Et++)lr[Et-1]=arguments[Et];if(!ms)throw TypeError("Cannot convert undefined or null to object");for(var e=function(Z){Z&&Object.keys(Z).forEach(function(Be){return ms[Be]=Z[Be]})},Mi=0,He=lr;Mi<He.length;Mi++)e(He[Mi]);return ms})},9216:function(ms,lr){!function(Et){"use strict";function Mi(p){var A,U,de,Ie;for(U=1,de=arguments.length;U<de;U++)for(A in Ie=arguments[U])p[A]=Ie[A];return p}var He=Object.create||function(){function p(){}return function(A){return p.prototype=A,new p}}();function c(p,A){var U=Array.prototype.slice;if(p.bind)return p.bind.apply(p,U.call(arguments,1));var de=U.call(arguments,2);return function(){return p.apply(A,de.length?de.concat(U.call(arguments)):arguments)}}var Z=0;function Be(p){return"_leaflet_id"in p||(p._leaflet_id=++Z),p._leaflet_id}function we(p,A,U){var de,Ie,lt,ri;return ri=function(){de=!1,Ie&&(lt.apply(U,Ie),Ie=!1)},lt=function(){de?Ie=arguments:(p.apply(U,arguments),setTimeout(ri,A),de=!0)},lt}function Se(p,A,U){var de=A[1],Ie=A[0],lt=de-Ie;return p===de&&U?p:((p-Ie)%lt+lt)%lt+Ie}function Le(){return!1}function Te(p,A){if(!1===A)return p;var U=Math.pow(10,void 0===A?6:A);return Math.round(p*U)/U}function Ve(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function We(p){return Ve(p).split(/\s+/)}function ut(p,A){for(var U in Object.prototype.hasOwnProperty.call(p,"options")||(p.options=p.options?He(p.options):{}),A)p.options[U]=A[U];return p.options}function vt(p,A,U){var de=[];for(var Ie in p)de.push(encodeURIComponent(U?Ie.toUpperCase():Ie)+"="+encodeURIComponent(p[Ie]));return(A&&-1!==A.indexOf("?")?"&":"?")+de.join("&")}var tt=/\{ *([\w_ -]+) *\}/g;function ze(p,A){return p.replace(tt,function(U,de){var Ie=A[de];if(void 0===Ie)throw new Error("No value provided for variable "+U);return"function"==typeof Ie&&(Ie=Ie(A)),Ie})}var ct=Array.isArray||function(p){return"[object Array]"===Object.prototype.toString.call(p)};function qt(p,A){for(var U=0;U<p.length;U++)if(p[U]===A)return U;return-1}var Je="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Jt(p){return window["webkit"+p]||window["moz"+p]||window["ms"+p]}var yi=0;function rt(p){var A=+new Date,U=Math.max(0,16-(A-yi));return yi=A+U,window.setTimeout(p,U)}var bi=window.requestAnimationFrame||Jt("RequestAnimationFrame")||rt,ci=window.cancelAnimationFrame||Jt("CancelAnimationFrame")||Jt("CancelRequestAnimationFrame")||function(p){window.clearTimeout(p)};function ti(p,A,U){if(!U||bi!==rt)return bi.call(window,c(p,A));p.call(A)}function St(p){p&&ci.call(window,p)}var pi={__proto__:null,extend:Mi,create:He,bind:c,get lastId(){return Z},stamp:Be,throttle:we,wrapNum:Se,falseFn:Le,formatNum:Te,trim:Ve,splitWords:We,setOptions:ut,getParamString:vt,template:ze,isArray:ct,indexOf:qt,emptyImageUrl:Je,requestFn:bi,cancelFn:ci,requestAnimFrame:ti,cancelAnimFrame:St};function vi(){}vi.extend=function(p){var A=function(){ut(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},U=A.__super__=this.prototype,de=He(U);for(var Ie in de.constructor=A,A.prototype=de,this)Object.prototype.hasOwnProperty.call(this,Ie)&&"prototype"!==Ie&&"__super__"!==Ie&&(A[Ie]=this[Ie]);return p.statics&&Mi(A,p.statics),p.includes&&(function Ti(p){if(!(typeof L>"u")&&L&&L.Mixin){p=ct(p)?p:[p];for(var A=0;A<p.length;A++)p[A]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(p.includes),Mi.apply(null,[de].concat(p.includes))),Mi(de,p),delete de.statics,delete de.includes,de.options&&(de.options=U.options?He(U.options):{},Mi(de.options,p.options)),de._initHooks=[],de.callInitHooks=function(){if(!this._initHooksCalled){U.callInitHooks&&U.callInitHooks.call(this),this._initHooksCalled=!0;for(var lt=0,ri=de._initHooks.length;lt<ri;lt++)de._initHooks[lt].call(this)}},A},vi.include=function(p){var A=this.prototype.options;return Mi(this.prototype,p),p.options&&(this.prototype.options=A,this.mergeOptions(p.options)),this},vi.mergeOptions=function(p){return Mi(this.prototype.options,p),this},vi.addInitHook=function(p){var A=Array.prototype.slice.call(arguments,1),U="function"==typeof p?p:function(){this[p].apply(this,A)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(U),this};var Ji={on:function(p,A,U){if("object"==typeof p)for(var de in p)this._on(de,p[de],A);else for(var Ie=0,lt=(p=We(p)).length;Ie<lt;Ie++)this._on(p[Ie],A,U);return this},off:function(p,A,U){if(arguments.length)if("object"==typeof p)for(var de in p)this._off(de,p[de],A);else{p=We(p);for(var Ie=1===arguments.length,lt=0,ri=p.length;lt<ri;lt++)Ie?this._off(p[lt]):this._off(p[lt],A,U)}else delete this._events;return this},_on:function(p,A,U,de){if("function"==typeof A){if(!1===this._listens(p,A,U)){U===this&&(U=void 0);var Ie={fn:A,ctx:U};de&&(Ie.once=!0),this._events=this._events||{},this._events[p]=this._events[p]||[],this._events[p].push(Ie)}}else console.warn("wrong listener type: "+typeof A)},_off:function(p,A,U){var de,Ie,lt;if(this._events&&(de=this._events[p])){if(1===arguments.length){if(this._firingCount)for(Ie=0,lt=de.length;Ie<lt;Ie++)de[Ie].fn=Le;return void delete this._events[p]}if("function"!=typeof A)return void console.warn("wrong listener type: "+typeof A);var ri=this._listens(p,A,U);!1!==ri&&(this._firingCount&&(de[ri].fn=Le,this._events[p]=de=de.slice()),de.splice(ri,1))}},fire:function(p,A,U){if(!this.listens(p,U))return this;var de=Mi({},A,{type:p,target:this,sourceTarget:A&&A.sourceTarget||this});if(this._events){var Ie=this._events[p];if(Ie){this._firingCount=this._firingCount+1||1;for(var lt=0,ri=Ie.length;lt<ri;lt++){var Si=Ie[lt],Vi=Si.fn;Si.once&&this.off(p,Vi,Si.ctx),Vi.call(Si.ctx||this,de)}this._firingCount--}}return U&&this._propagateEvent(de),this},listens:function(p,A,U,de){"string"!=typeof p&&console.warn('"string" type argument expected');var Ie=A;"function"!=typeof A&&(de=!!A,Ie=void 0,U=void 0);var lt=this._events&&this._events[p];if(lt&&lt.length&&!1!==this._listens(p,Ie,U))return!0;if(de)for(var ri in this._eventParents)if(this._eventParents[ri].listens(p,A,U,de))return!0;return!1},_listens:function(p,A,U){if(!this._events)return!1;var de=this._events[p]||[];if(!A)return!!de.length;U===this&&(U=void 0);for(var Ie=0,lt=de.length;Ie<lt;Ie++)if(de[Ie].fn===A&&de[Ie].ctx===U)return Ie;return!1},once:function(p,A,U){if("object"==typeof p)for(var de in p)this._on(de,p[de],A,!0);else for(var Ie=0,lt=(p=We(p)).length;Ie<lt;Ie++)this._on(p[Ie],A,U,!0);return this},addEventParent:function(p){return this._eventParents=this._eventParents||{},this._eventParents[Be(p)]=p,this},removeEventParent:function(p){return this._eventParents&&delete this._eventParents[Be(p)],this},_propagateEvent:function(p){for(var A in this._eventParents)this._eventParents[A].fire(p.type,Mi({layer:p.target,propagatedFrom:p.target},p),!0)}};Ji.addEventListener=Ji.on,Ji.removeEventListener=Ji.clearAllEventListeners=Ji.off,Ji.addOneTimeEventListener=Ji.once,Ji.fireEvent=Ji.fire,Ji.hasEventListeners=Ji.listens;var Ii=vi.extend(Ji);function ki(p,A,U){this.x=U?Math.round(p):p,this.y=U?Math.round(A):A}var Zi=Math.trunc||function(p){return p>0?Math.floor(p):Math.ceil(p)};function pn(p,A,U){return p instanceof ki?p:ct(p)?new ki(p[0],p[1]):null==p?p:"object"==typeof p&&"x"in p&&"y"in p?new ki(p.x,p.y):new ki(p,A,U)}function ji(p,A){if(p)for(var U=A?[p,A]:p,de=0,Ie=U.length;de<Ie;de++)this.extend(U[de])}function gn(p,A){return!p||p instanceof ji?p:new ji(p,A)}function tn(p,A){if(p)for(var U=A?[p,A]:p,de=0,Ie=U.length;de<Ie;de++)this.extend(U[de])}function di(p,A){return p instanceof tn?p:new tn(p,A)}function Wi(p,A,U){if(isNaN(p)||isNaN(A))throw new Error("Invalid LatLng object: ("+p+", "+A+")");this.lat=+p,this.lng=+A,void 0!==U&&(this.alt=+U)}function _n(p,A,U){return p instanceof Wi?p:ct(p)&&"object"!=typeof p[0]?3===p.length?new Wi(p[0],p[1],p[2]):2===p.length?new Wi(p[0],p[1]):null:null==p?p:"object"==typeof p&&"lat"in p?new Wi(p.lat,"lng"in p?p.lng:p.lon,p.alt):void 0===A?null:new Wi(p,A,U)}ki.prototype={clone:function(){return new ki(this.x,this.y)},add:function(p){return this.clone()._add(pn(p))},_add:function(p){return this.x+=p.x,this.y+=p.y,this},subtract:function(p){return this.clone()._subtract(pn(p))},_subtract:function(p){return this.x-=p.x,this.y-=p.y,this},divideBy:function(p){return this.clone()._divideBy(p)},_divideBy:function(p){return this.x/=p,this.y/=p,this},multiplyBy:function(p){return this.clone()._multiplyBy(p)},_multiplyBy:function(p){return this.x*=p,this.y*=p,this},scaleBy:function(p){return new ki(this.x*p.x,this.y*p.y)},unscaleBy:function(p){return new ki(this.x/p.x,this.y/p.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Zi(this.x),this.y=Zi(this.y),this},distanceTo:function(p){var A=(p=pn(p)).x-this.x,U=p.y-this.y;return Math.sqrt(A*A+U*U)},equals:function(p){return(p=pn(p)).x===this.x&&p.y===this.y},contains:function(p){return p=pn(p),Math.abs(p.x)<=Math.abs(this.x)&&Math.abs(p.y)<=Math.abs(this.y)},toString:function(){return"Point("+Te(this.x)+", "+Te(this.y)+")"}},ji.prototype={extend:function(p){var A,U;if(!p)return this;if(p instanceof ki||"number"==typeof p[0]||"x"in p)A=U=pn(p);else if(U=(p=gn(p)).max,!(A=p.min)||!U)return this;return this.min||this.max?(this.min.x=Math.min(A.x,this.min.x),this.max.x=Math.max(U.x,this.max.x),this.min.y=Math.min(A.y,this.min.y),this.max.y=Math.max(U.y,this.max.y)):(this.min=A.clone(),this.max=U.clone()),this},getCenter:function(p){return pn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,p)},getBottomLeft:function(){return pn(this.min.x,this.max.y)},getTopRight:function(){return pn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(p){var A,U;return(p="number"==typeof p[0]||p instanceof ki?pn(p):gn(p))instanceof ji?(A=p.min,U=p.max):A=U=p,A.x>=this.min.x&&U.x<=this.max.x&&A.y>=this.min.y&&U.y<=this.max.y},intersects:function(p){p=gn(p);var A=this.min,U=this.max,de=p.min,Ie=p.max;return Ie.x>=A.x&&de.x<=U.x&&Ie.y>=A.y&&de.y<=U.y},overlaps:function(p){p=gn(p);var A=this.min,U=this.max,de=p.min,Ie=p.max;return Ie.x>A.x&&de.x<U.x&&Ie.y>A.y&&de.y<U.y},isValid:function(){return!(!this.min||!this.max)},pad:function(p){var A=this.min,U=this.max,de=Math.abs(A.x-U.x)*p,Ie=Math.abs(A.y-U.y)*p;return gn(pn(A.x-de,A.y-Ie),pn(U.x+de,U.y+Ie))},equals:function(p){return!!p&&(p=gn(p),this.min.equals(p.getTopLeft())&&this.max.equals(p.getBottomRight()))}},tn.prototype={extend:function(p){var de,Ie,A=this._southWest,U=this._northEast;if(p instanceof Wi)de=p,Ie=p;else{if(!(p instanceof tn))return p?this.extend(_n(p)||di(p)):this;if(Ie=p._northEast,!(de=p._southWest)||!Ie)return this}return A||U?(A.lat=Math.min(de.lat,A.lat),A.lng=Math.min(de.lng,A.lng),U.lat=Math.max(Ie.lat,U.lat),U.lng=Math.max(Ie.lng,U.lng)):(this._southWest=new Wi(de.lat,de.lng),this._northEast=new Wi(Ie.lat,Ie.lng)),this},pad:function(p){var A=this._southWest,U=this._northEast,de=Math.abs(A.lat-U.lat)*p,Ie=Math.abs(A.lng-U.lng)*p;return new tn(new Wi(A.lat-de,A.lng-Ie),new Wi(U.lat+de,U.lng+Ie))},getCenter:function(){return new Wi((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Wi(this.getNorth(),this.getWest())},getSouthEast:function(){return new Wi(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(p){p="number"==typeof p[0]||p instanceof Wi||"lat"in p?_n(p):di(p);var de,Ie,A=this._southWest,U=this._northEast;return p instanceof tn?(de=p.getSouthWest(),Ie=p.getNorthEast()):de=Ie=p,de.lat>=A.lat&&Ie.lat<=U.lat&&de.lng>=A.lng&&Ie.lng<=U.lng},intersects:function(p){p=di(p);var A=this._southWest,U=this._northEast,de=p.getSouthWest(),Ie=p.getNorthEast();return Ie.lat>=A.lat&&de.lat<=U.lat&&Ie.lng>=A.lng&&de.lng<=U.lng},overlaps:function(p){p=di(p);var A=this._southWest,U=this._northEast,de=p.getSouthWest(),Ie=p.getNorthEast();return Ie.lat>A.lat&&de.lat<U.lat&&Ie.lng>A.lng&&de.lng<U.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(p,A){return!!p&&(p=di(p),this._southWest.equals(p.getSouthWest(),A)&&this._northEast.equals(p.getNorthEast(),A))},isValid:function(){return!(!this._southWest||!this._northEast)}},Wi.prototype={equals:function(p,A){return!!p&&(p=_n(p),Math.max(Math.abs(this.lat-p.lat),Math.abs(this.lng-p.lng))<=(void 0===A?1e-9:A))},toString:function(p){return"LatLng("+Te(this.lat,p)+", "+Te(this.lng,p)+")"},distanceTo:function(p){return Gn.distance(this,_n(p))},wrap:function(){return Gn.wrapLatLng(this)},toBounds:function(p){var A=180*p/40075017,U=A/Math.cos(Math.PI/180*this.lat);return di([this.lat-A,this.lng-U],[this.lat+A,this.lng+U])},clone:function(){return new Wi(this.lat,this.lng,this.alt)}};var p,Ln={latLngToPoint:function(p,A){var U=this.projection.project(p),de=this.scale(A);return this.transformation._transform(U,de)},pointToLatLng:function(p,A){var U=this.scale(A),de=this.transformation.untransform(p,U);return this.projection.unproject(de)},project:function(p){return this.projection.project(p)},unproject:function(p){return this.projection.unproject(p)},scale:function(p){return 256*Math.pow(2,p)},zoom:function(p){return Math.log(p/256)/Math.LN2},getProjectedBounds:function(p){if(this.infinite)return null;var A=this.projection.bounds,U=this.scale(p);return new ji(this.transformation.transform(A.min,U),this.transformation.transform(A.max,U))},infinite:!1,wrapLatLng:function(p){var A=this.wrapLng?Se(p.lng,this.wrapLng,!0):p.lng;return new Wi(this.wrapLat?Se(p.lat,this.wrapLat,!0):p.lat,A,p.alt)},wrapLatLngBounds:function(p){var A=p.getCenter(),U=this.wrapLatLng(A),de=A.lat-U.lat,Ie=A.lng-U.lng;if(0===de&&0===Ie)return p;var lt=p.getSouthWest(),ri=p.getNorthEast();return new tn(new Wi(lt.lat-de,lt.lng-Ie),new Wi(ri.lat-de,ri.lng-Ie))}},Gn=Mi({},Ln,{wrapLng:[-180,180],R:6371e3,distance:function(p,A){var U=Math.PI/180,de=p.lat*U,Ie=A.lat*U,lt=Math.sin((A.lat-p.lat)*U/2),ri=Math.sin((A.lng-p.lng)*U/2),Si=lt*lt+Math.cos(de)*Math.cos(Ie)*ri*ri,Vi=2*Math.atan2(Math.sqrt(Si),Math.sqrt(1-Si));return this.R*Vi}}),on={R:6378137,MAX_LATITUDE:85.0511287798,project:function(p){var A=Math.PI/180,U=this.MAX_LATITUDE,de=Math.max(Math.min(U,p.lat),-U),Ie=Math.sin(de*A);return new ki(this.R*p.lng*A,this.R*Math.log((1+Ie)/(1-Ie))/2)},unproject:function(p){var A=180/Math.PI;return new Wi((2*Math.atan(Math.exp(p.y/this.R))-Math.PI/2)*A,p.x*A/this.R)},bounds:(p=6378137*Math.PI,new ji([-p,-p],[p,p]))};function jt(p,A,U,de){if(ct(p))return this._a=p[0],this._b=p[1],this._c=p[2],void(this._d=p[3]);this._a=p,this._b=A,this._c=U,this._d=de}function gi(p,A,U,de){return new jt(p,A,U,de)}jt.prototype={transform:function(p,A){return this._transform(p.clone(),A)},_transform:function(p,A){return p.x=(A=A||1)*(this._a*p.x+this._b),p.y=A*(this._c*p.y+this._d),p},untransform:function(p,A){return new ki((p.x/(A=A||1)-this._b)/this._a,(p.y/A-this._d)/this._c)}};var V=Mi({},Gn,{code:"EPSG:3857",projection:on,transformation:function(){var p=.5/(Math.PI*on.R);return gi(p,.5,-p,.5)}()}),Bi=Mi({},V,{code:"EPSG:900913"});function $i(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function en(p,A){var de,Ie,lt,ri,Si,Vi,U="";for(de=0,lt=p.length;de<lt;de++){for(Ie=0,ri=(Si=p[de]).length;Ie<ri;Ie++)U+=(Ie?"L":"M")+(Vi=Si[Ie]).x+" "+Vi.y;U+=A?ot.svg?"z":"x":""}return U||"M0 0"}var Xi=document.documentElement.style,Qi="ActiveXObject"in window,Pn=Qi&&!document.addEventListener,fn="msLaunchUri"in navigator&&!("documentMode"in document),Ci=st("webkit"),En=st("android"),Dn=st("android 2")||st("android 3"),cn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),br=En&&st("Google")&&cn<537&&!("AudioNode"in window),wi=!!window.opera,Jn=!fn&&st("chrome"),zn=st("gecko")&&!Ci&&!wi&&!Qi,On=!Jn&&st("safari"),sr=st("phantom"),fr="OTransition"in Xi,Yr=0===navigator.platform.indexOf("Win"),Nn=Qi&&"transition"in Xi,_r="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dn,ur="MozPerspective"in Xi,mr=!window.L_DISABLE_3D&&(Nn||_r||ur)&&!fr&&!sr,kr=typeof orientation<"u"||st("mobile"),Ft=kr&&Ci,Ze=kr&&_r,Qe=!window.PointerEvent&&window.MSPointerEvent,Mt=!(!window.PointerEvent&&!Qe),Tt="ontouchstart"in window||!!window.TouchEvent,Zt=!window.L_NO_TOUCH&&(Tt||Mt),Pt=kr&&wi,Nt=kr&&zn,ae=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ne=function(){var p=!1;try{var A=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("testPassiveEventSupport",Le,A),window.removeEventListener("testPassiveEventSupport",Le,A)}catch{}return p}(),et=!!document.createElement("canvas").getContext,Vt=!(!document.createElementNS||!$i("svg").createSVGRect),$t=!!Vt&&function(){var p=document.createElement("div");return p.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(p.firstChild&&p.firstChild.namespaceURI)}(),Hi=!Vt&&function(){try{var p=document.createElement("div");p.innerHTML='<v:shape adj="1"/>';var A=p.firstChild;return A.style.behavior="url(#default#VML)",A&&"object"==typeof A.adj}catch{return!1}}();function st(p){return navigator.userAgent.toLowerCase().indexOf(p)>=0}var ot={ie:Qi,ielt9:Pn,edge:fn,webkit:Ci,android:En,android23:Dn,androidStock:br,opera:wi,chrome:Jn,gecko:zn,safari:On,phantom:sr,opera12:fr,win:Yr,ie3d:Nn,webkit3d:_r,gecko3d:ur,any3d:mr,mobile:kr,mobileWebkit:Ft,mobileWebkit3d:Ze,msPointer:Qe,pointer:Mt,touch:Zt,touchNative:Tt,mobileOpera:Pt,mobileGecko:Nt,retina:ae,passiveEvents:Ne,canvas:et,svg:Vt,vml:Hi,inlineSvg:$t,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},qe=ot.msPointer?"MSPointerDown":"pointerdown",nt=ot.msPointer?"MSPointerMove":"pointermove",It=ot.msPointer?"MSPointerUp":"pointerup",ei=ot.msPointer?"MSPointerCancel":"pointercancel",Yi={touchstart:qe,touchmove:nt,touchend:It,touchcancel:ei},Ei={touchstart:function i(p,A){A.MSPOINTER_TYPE_TOUCH&&A.pointerType===A.MSPOINTER_TYPE_TOUCH&&or(A),pe(p,A)},touchmove:pe,touchend:pe,touchcancel:pe},Ki={},Ct=!1;function Ot(p,A,U){return"touchstart"===A&&function Ut(){Ct||(document.addEventListener(qe,bt,!0),document.addEventListener(nt,Yt,!0),document.addEventListener(It,Xe,!0),document.addEventListener(ei,Xe,!0),Ct=!0)}(),Ei[A]?(U=Ei[A].bind(this,U),p.addEventListener(Yi[A],U,!1),U):(console.warn("wrong event specified:",A),Le)}function bt(p){Ki[p.pointerId]=p}function Yt(p){Ki[p.pointerId]&&(Ki[p.pointerId]=p)}function Xe(p){delete Ki[p.pointerId]}function pe(p,A){if(A.pointerType!==(A.MSPOINTER_TYPE_MOUSE||"mouse")){for(var U in A.touches=[],Ki)A.touches.push(Ki[U]);A.changedTouches=[A],p(A)}}var d=200;var ii,hi,xi,Xn,Qn,w=ye(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),I=ye(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),R="webkitTransition"===I||"OTransition"===I?I+"End":"transitionend";function Y(p){return"string"==typeof p?document.getElementById(p):p}function W(p,A){var U=p.style[A]||p.currentStyle&&p.currentStyle[A];if((!U||"auto"===U)&&document.defaultView){var de=document.defaultView.getComputedStyle(p,null);U=de?de[A]:null}return"auto"===U?null:U}function X(p,A,U){var de=document.createElement(p);return de.className=A||"",U&&U.appendChild(de),de}function Q(p){var A=p.parentNode;A&&A.removeChild(p)}function ce(p){for(;p.firstChild;)p.removeChild(p.firstChild)}function me(p){var A=p.parentNode;A&&A.lastChild!==p&&A.appendChild(p)}function Ee(p){var A=p.parentNode;A&&A.firstChild!==p&&A.insertBefore(p,A.firstChild)}function De(p,A){if(void 0!==p.classList)return p.classList.contains(A);var U=re(p);return U.length>0&&new RegExp("(^|\\s)"+A+"(\\s|$)").test(U)}function Ce(p,A){if(void 0!==p.classList)for(var U=We(A),de=0,Ie=U.length;de<Ie;de++)p.classList.add(U[de]);else if(!De(p,A)){var lt=re(p);G(p,(lt?lt+" ":"")+A)}}function Re(p,A){void 0!==p.classList?p.classList.remove(A):G(p,Ve((" "+re(p)+" ").replace(" "+A+" "," ")))}function G(p,A){void 0===p.className.baseVal?p.className=A:p.className.baseVal=A}function re(p){return p.correspondingElement&&(p=p.correspondingElement),void 0===p.className.baseVal?p.className:p.className.baseVal}function te(p,A){"opacity"in p.style?p.style.opacity=A:"filter"in p.style&&function oe(p,A){var U=!1,de="DXImageTransform.Microsoft.Alpha";try{U=p.filters.item(de)}catch{if(1===A)return}A=Math.round(100*A),U?(U.Enabled=100!==A,U.Opacity=A):p.style.filter+=" progid:"+de+"(opacity="+A+")"}(p,A)}function ye(p){for(var A=document.documentElement.style,U=0;U<p.length;U++)if(p[U]in A)return p[U];return!1}function Fe(p,A,U){var de=A||new ki(0,0);p.style[w]=(ot.ie3d?"translate("+de.x+"px,"+de.y+"px)":"translate3d("+de.x+"px,"+de.y+"px,0)")+(U?" scale("+U+")":"")}function ht(p,A){p._leaflet_pos=A,ot.any3d?Fe(p,A):(p.style.left=A.x+"px",p.style.top=A.y+"px")}function yt(p){return p._leaflet_pos||new ki(0,0)}if("onselectstart"in document)ii=function(){cr(window,"selectstart",or)},hi=function(){ir(window,"selectstart",or)};else{var Pi=ye(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ii=function(){if(Pi){var p=document.documentElement.style;xi=p[Pi],p[Pi]="none"}},hi=function(){Pi&&(document.documentElement.style[Pi]=xi,xi=void 0)}}function nn(){cr(window,"dragstart",or)}function Tn(){ir(window,"dragstart",or)}function hr(p){for(;-1===p.tabIndex;)p=p.parentNode;p.style&&(xr(),Xn=p,Qn=p.style.outlineStyle,p.style.outlineStyle="none",cr(window,"keydown",xr))}function xr(){Xn&&(Xn.style.outlineStyle=Qn,Xn=void 0,Qn=void 0,ir(window,"keydown",xr))}function Rr(p){do{p=p.parentNode}while(!(p.offsetWidth&&p.offsetHeight||p===document.body));return p}function Br(p){var A=p.getBoundingClientRect();return{x:A.width/p.offsetWidth||1,y:A.height/p.offsetHeight||1,boundingClientRect:A}}var Or={__proto__:null,TRANSFORM:w,TRANSITION:I,TRANSITION_END:R,get:Y,getStyle:W,create:X,remove:Q,empty:ce,toFront:me,toBack:Ee,hasClass:De,addClass:Ce,removeClass:Re,setClass:G,getClass:re,setOpacity:te,testProp:ye,setTransform:Fe,setPosition:ht,getPosition:yt,get disableTextSelection(){return ii},get enableTextSelection(){return hi},disableImageDrag:nn,enableImageDrag:Tn,preventOutline:hr,restoreOutline:xr,getSizedParentNode:Rr,getScale:Br};function cr(p,A,U,de){if(A&&"object"==typeof A)for(var Ie in A)fo(p,Ie,A[Ie],U);else for(var lt=0,ri=(A=We(A)).length;lt<ri;lt++)fo(p,A[lt],U,de);return this}var Ur="_leaflet_events";function ir(p,A,U,de){if(1===arguments.length)Ar(p),delete p[Ur];else if(A&&"object"==typeof A)for(var Ie in A)nr(p,Ie,A[Ie],U);else if(A=We(A),2===arguments.length)Ar(p,function(Si){return-1!==qt(A,Si)});else for(var lt=0,ri=A.length;lt<ri;lt++)nr(p,A[lt],U,de);return this}function Ar(p,A){for(var U in p[Ur]){var de=U.split(/\d/)[0];(!A||A(de))&&nr(p,de,null,null,U)}}var pa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fo(p,A,U,de){var Ie=A+Be(U)+(de?"_"+Be(de):"");if(p[Ur]&&p[Ur][Ie])return this;var lt=function(Si){return U.call(de||p,Si||window.event)},ri=lt;!ot.touchNative&&ot.pointer&&0===A.indexOf("touch")?lt=Ot(p,A,lt):ot.touch&&"dblclick"===A?lt=function g(p,A){p.addEventListener("dblclick",A);var de,U=0;function Ie(lt){if(1===lt.detail){if("mouse"!==lt.pointerType&&(!lt.sourceCapabilities||lt.sourceCapabilities.firesTouchEvents)){var ri=yr(lt);if(!ri.some(function(Vi){return Vi instanceof HTMLLabelElement&&Vi.attributes.for})||ri.some(function(Vi){return Vi instanceof HTMLInputElement||Vi instanceof HTMLSelectElement})){var Si=Date.now();Si-U<=d?2==++de&&A(function r(p){var U,de,A={};for(de in p)A[de]=(U=p[de])&&U.bind?U.bind(p):U;return p=A,A.type="dblclick",A.detail=2,A.isTrusted=!1,A._simulated=!0,A}(lt)):de=1,U=Si}}}else de=lt.detail}return p.addEventListener("click",Ie),{dblclick:A,simDblclick:Ie}}(p,lt):"addEventListener"in p?"touchstart"===A||"touchmove"===A||"wheel"===A||"mousewheel"===A?p.addEventListener(pa[A]||A,lt,!!ot.passiveEvents&&{passive:!1}):"mouseenter"===A||"mouseleave"===A?p.addEventListener(pa[A],lt=function(Si){Si=Si||window.event,Da(p,Si)&&ri(Si)},!1):p.addEventListener(A,ri,!1):p.attachEvent("on"+A,lt),p[Ur]=p[Ur]||{},p[Ur][Ie]=lt}function nr(p,A,U,de,Ie){Ie=Ie||A+Be(U)+(de?"_"+Be(de):"");var lt=p[Ur]&&p[Ur][Ie];if(!lt)return this;!ot.touchNative&&ot.pointer&&0===A.indexOf("touch")?function xe(p,A,U){Yi[A]?p.removeEventListener(Yi[A],U,!1):console.warn("wrong event specified:",A)}(p,A,lt):ot.touch&&"dblclick"===A?function x(p,A){p.removeEventListener("dblclick",A.dblclick),p.removeEventListener("click",A.simDblclick)}(p,lt):"removeEventListener"in p?p.removeEventListener(pa[A]||A,lt,!1):p.detachEvent("on"+A,lt),p[Ur][Ie]=null}function Co(p){return p.stopPropagation?p.stopPropagation():p.originalEvent?p.originalEvent._stopped=!0:p.cancelBubble=!0,this}function cl(p){return fo(p,"wheel",Co),this}function oo(p){return cr(p,"mousedown touchstart dblclick contextmenu",Co),p._leaflet_disable_click=!0,this}function or(p){return p.preventDefault?p.preventDefault():p.returnValue=!1,this}function Fs(p){return or(p),Co(p),this}function yr(p){if(p.composedPath)return p.composedPath();for(var A=[],U=p.target;U;)A.push(U),U=U.parentNode;return A}function No(p,A){if(!A)return new ki(p.clientX,p.clientY);var U=Br(A),de=U.boundingClientRect;return new ki((p.clientX-de.left)/U.x-A.clientLeft,(p.clientY-de.top)/U.y-A.clientTop)}var bs=ot.linux&&ot.chrome?window.devicePixelRatio:ot.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function dl(p){return ot.edge?p.wheelDeltaY/2:p.deltaY&&0===p.deltaMode?-p.deltaY/bs:p.deltaY&&1===p.deltaMode?20*-p.deltaY:p.deltaY&&2===p.deltaMode?60*-p.deltaY:p.deltaX||p.deltaZ?0:p.wheelDelta?(p.wheelDeltaY||p.wheelDelta)/2:p.detail&&Math.abs(p.detail)<32765?20*-p.detail:p.detail?p.detail/-32765*60:0}function Da(p,A){var U=A.relatedTarget;if(!U)return!0;try{for(;U&&U!==p;)U=U.parentNode}catch{return!1}return U!==p}var Wl={__proto__:null,on:cr,off:ir,stopPropagation:Co,disableScrollPropagation:cl,disableClickPropagation:oo,preventDefault:or,stop:Fs,getPropagationPath:yr,getMousePosition:No,getWheelDelta:dl,isExternalTarget:Da,addListener:cr,removeListener:ir},Xa=Ii.extend({run:function(p,A,U,de){this.stop(),this._el=p,this._inProgress=!0,this._duration=U||.25,this._easeOutPower=1/Math.max(de||.5,.2),this._startPos=yt(p),this._offset=A.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ti(this._animate,this),this._step()},_step:function(p){var A=+new Date-this._startTime,U=1e3*this._duration;A<U?this._runFrame(this._easeOut(A/U),p):(this._runFrame(1),this._complete())},_runFrame:function(p,A){var U=this._startPos.add(this._offset.multiplyBy(p));A&&U._round(),ht(this._el,U),this.fire("step")},_complete:function(){St(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(p){return 1-Math.pow(1-p,this._easeOutPower)}}),wr=Ii.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(p,A){A=ut(this,A),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(p),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),A.maxBounds&&this.setMaxBounds(A.maxBounds),void 0!==A.zoom&&(this._zoom=this._limitZoom(A.zoom)),A.center&&void 0!==A.zoom&&this.setView(_n(A.center),A.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=I&&ot.any3d&&!ot.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),cr(this._proxy,R,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(p,A,U){return A=void 0===A?this._zoom:this._limitZoom(A),p=this._limitCenter(_n(p),A,this.options.maxBounds),U=U||{},this._stop(),this._loaded&&!U.reset&&!0!==U&&(void 0!==U.animate&&(U.zoom=Mi({animate:U.animate},U.zoom),U.pan=Mi({animate:U.animate,duration:U.duration},U.pan)),this._zoom!==A?this._tryAnimatedZoom&&this._tryAnimatedZoom(p,A,U.zoom):this._tryAnimatedPan(p,U.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(p,A,U.pan&&U.pan.noMoveStart),this)},setZoom:function(p,A){return this._loaded?this.setView(this.getCenter(),p,{zoom:A}):(this._zoom=p,this)},zoomIn:function(p,A){return this.setZoom(this._zoom+(p=p||(ot.any3d?this.options.zoomDelta:1)),A)},zoomOut:function(p,A){return this.setZoom(this._zoom-(p=p||(ot.any3d?this.options.zoomDelta:1)),A)},setZoomAround:function(p,A,U){var de=this.getZoomScale(A),Ie=this.getSize().divideBy(2),ri=(p instanceof ki?p:this.latLngToContainerPoint(p)).subtract(Ie).multiplyBy(1-1/de),Si=this.containerPointToLatLng(Ie.add(ri));return this.setView(Si,A,{zoom:U})},_getBoundsCenterZoom:function(p,A){A=A||{},p=p.getBounds?p.getBounds():di(p);var U=pn(A.paddingTopLeft||A.padding||[0,0]),de=pn(A.paddingBottomRight||A.padding||[0,0]),Ie=this.getBoundsZoom(p,!1,U.add(de));if((Ie="number"==typeof A.maxZoom?Math.min(A.maxZoom,Ie):Ie)===1/0)return{center:p.getCenter(),zoom:Ie};var lt=de.subtract(U).divideBy(2),ri=this.project(p.getSouthWest(),Ie),Si=this.project(p.getNorthEast(),Ie);return{center:this.unproject(ri.add(Si).divideBy(2).add(lt),Ie),zoom:Ie}},fitBounds:function(p,A){if(!(p=di(p)).isValid())throw new Error("Bounds are not valid.");var U=this._getBoundsCenterZoom(p,A);return this.setView(U.center,U.zoom,A)},fitWorld:function(p){return this.fitBounds([[-90,-180],[90,180]],p)},panTo:function(p,A){return this.setView(p,this._zoom,{pan:A})},panBy:function(p,A){if(A=A||{},!(p=pn(p).round()).x&&!p.y)return this.fire("moveend");if(!0!==A.animate&&!this.getSize().contains(p))return this._resetView(this.unproject(this.project(this.getCenter()).add(p)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Xa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),A.noMoveStart||this.fire("movestart"),!1!==A.animate){Ce(this._mapPane,"leaflet-pan-anim");var U=this._getMapPanePos().subtract(p).round();this._panAnim.run(this._mapPane,U,A.duration||.25,A.easeLinearity)}else this._rawPanBy(p),this.fire("move").fire("moveend");return this},flyTo:function(p,A,U){if(!1===(U=U||{}).animate||!ot.any3d)return this.setView(p,A,U);this._stop();var de=this.project(this.getCenter()),Ie=this.project(p),lt=this.getSize(),ri=this._zoom;p=_n(p),A=void 0===A?ri:A;var Si=Math.max(lt.x,lt.y),Vi=Si*this.getZoomScale(ri,A),xn=Ie.distanceTo(de)||1,$n=1.42,Un=$n*$n;function Ir(Ye){var an=(Vi*Vi-Si*Si+(Ye?-1:1)*Un*Un*xn*xn)/(2*(Ye?Vi:Si)*Un*xn),Hn=Math.sqrt(an*an+1)-an;return Hn<1e-9?-18:Math.log(Hn)}function Lr(Ye){return(Math.exp(Ye)-Math.exp(-Ye))/2}function _s(Ye){return(Math.exp(Ye)+Math.exp(-Ye))/2}var Gs=Ir(0);function va(Ye){return Si*(_s(Gs)*function Os(Ye){return Lr(Ye)/_s(Ye)}(Gs+$n*Ye)-Lr(Gs))/Un}var Fl=Date.now(),Ha=(Ir(1)-Gs)/$n,Fo=U.duration?1e3*U.duration:1e3*Ha*.8;return this._moveStart(!0,U.noMoveStart),function sl(){var Ye=(Date.now()-Fl)/Fo,ne=function po(Ye){return 1-Math.pow(1-Ye,1.5)}(Ye)*Ha;Ye<=1?(this._flyToFrame=ti(sl,this),this._move(this.unproject(de.add(Ie.subtract(de).multiplyBy(va(ne)/xn)),ri),this.getScaleZoom(Si/function To(Ye){return Si*(_s(Gs)/_s(Gs+$n*Ye))}(ne),ri),{flyTo:!0})):this._move(p,A)._moveEnd(!0)}.call(this),this},flyToBounds:function(p,A){var U=this._getBoundsCenterZoom(p,A);return this.flyTo(U.center,U.zoom,A)},setMaxBounds:function(p){return p=di(p),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),p.isValid()?(this.options.maxBounds=p,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(p){var A=this.options.minZoom;return this.options.minZoom=p,this._loaded&&A!==p&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(p):this},setMaxZoom:function(p){var A=this.options.maxZoom;return this.options.maxZoom=p,this._loaded&&A!==p&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(p):this},panInsideBounds:function(p,A){this._enforcingBounds=!0;var U=this.getCenter(),de=this._limitCenter(U,this._zoom,di(p));return U.equals(de)||this.panTo(de,A),this._enforcingBounds=!1,this},panInside:function(p,A){var U=pn((A=A||{}).paddingTopLeft||A.padding||[0,0]),de=pn(A.paddingBottomRight||A.padding||[0,0]),Ie=this.project(this.getCenter()),lt=this.project(p),ri=this.getPixelBounds(),Si=gn([ri.min.add(U),ri.max.subtract(de)]),Vi=Si.getSize();if(!Si.contains(lt)){this._enforcingBounds=!0;var xn=lt.subtract(Si.getCenter()),$n=Si.extend(lt).getSize().subtract(Vi);Ie.x+=xn.x<0?-$n.x:$n.x,Ie.y+=xn.y<0?-$n.y:$n.y,this.panTo(this.unproject(Ie),A),this._enforcingBounds=!1}return this},invalidateSize:function(p){if(!this._loaded)return this;p=Mi({animate:!1,pan:!0},!0===p?{animate:!0}:p);var A=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var U=this.getSize(),de=A.divideBy(2).round(),Ie=U.divideBy(2).round(),lt=de.subtract(Ie);return lt.x||lt.y?(p.animate&&p.pan?this.panBy(lt):(p.pan&&this._rawPanBy(lt),this.fire("move"),p.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:A,newSize:U})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(p){if(p=this._locateOptions=Mi({timeout:1e4,watch:!1},p),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var A=c(this._handleGeolocationResponse,this),U=c(this._handleGeolocationError,this);return p.watch?this._locationWatchId=navigator.geolocation.watchPosition(A,U,p):navigator.geolocation.getCurrentPosition(A,U,p),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(p){if(this._container._leaflet_id){var A=p.code,U=p.message||(1===A?"permission denied":2===A?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:A,message:"Geolocation error: "+U+"."})}},_handleGeolocationResponse:function(p){if(this._container._leaflet_id){var de=new Wi(p.coords.latitude,p.coords.longitude),Ie=de.toBounds(2*p.coords.accuracy),lt=this._locateOptions;if(lt.setView){var ri=this.getBoundsZoom(Ie);this.setView(de,lt.maxZoom?Math.min(ri,lt.maxZoom):ri)}var Si={latlng:de,bounds:Ie,timestamp:p.timestamp};for(var Vi in p.coords)"number"==typeof p.coords[Vi]&&(Si[Vi]=p.coords[Vi]);this.fire("locationfound",Si)}},addHandler:function(p,A){if(!A)return this;var U=this[p]=new A(this);return this._handlers.push(U),this.options[p]&&U.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var p;for(p in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Q(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(St(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[p].remove();for(p in this._panes)Q(this._panes[p]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(p,A){var de=X("div","leaflet-pane"+(p?" leaflet-"+p.replace("Pane","")+"-pane":""),A||this._mapPane);return p&&(this._panes[p]=de),de},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var p=this.getPixelBounds();return new tn(this.unproject(p.getBottomLeft()),this.unproject(p.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(p,A,U){p=di(p),U=pn(U||[0,0]);var de=this.getZoom()||0,Ie=this.getMinZoom(),lt=this.getMaxZoom(),ri=p.getNorthWest(),Si=p.getSouthEast(),Vi=this.getSize().subtract(U),xn=gn(this.project(Si,de),this.project(ri,de)).getSize(),$n=ot.any3d?this.options.zoomSnap:1,Un=Vi.x/xn.x,Ir=Vi.y/xn.y,Lr=A?Math.max(Un,Ir):Math.min(Un,Ir);return de=this.getScaleZoom(Lr,de),$n&&(de=Math.round(de/($n/100))*($n/100),de=A?Math.ceil(de/$n)*$n:Math.floor(de/$n)*$n),Math.max(Ie,Math.min(lt,de))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ki(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(p,A){var U=this._getTopLeftPoint(p,A);return new ji(U,U.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(p){return this.options.crs.getProjectedBounds(void 0===p?this.getZoom():p)},getPane:function(p){return"string"==typeof p?this._panes[p]:p},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(p,A){var U=this.options.crs;return A=void 0===A?this._zoom:A,U.scale(p)/U.scale(A)},getScaleZoom:function(p,A){var U=this.options.crs,de=U.zoom(p*U.scale(A=void 0===A?this._zoom:A));return isNaN(de)?1/0:de},project:function(p,A){return A=void 0===A?this._zoom:A,this.options.crs.latLngToPoint(_n(p),A)},unproject:function(p,A){return A=void 0===A?this._zoom:A,this.options.crs.pointToLatLng(pn(p),A)},layerPointToLatLng:function(p){var A=pn(p).add(this.getPixelOrigin());return this.unproject(A)},latLngToLayerPoint:function(p){return this.project(_n(p))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(p){return this.options.crs.wrapLatLng(_n(p))},wrapLatLngBounds:function(p){return this.options.crs.wrapLatLngBounds(di(p))},distance:function(p,A){return this.options.crs.distance(_n(p),_n(A))},containerPointToLayerPoint:function(p){return pn(p).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(p){return pn(p).add(this._getMapPanePos())},containerPointToLatLng:function(p){var A=this.containerPointToLayerPoint(pn(p));return this.layerPointToLatLng(A)},latLngToContainerPoint:function(p){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_n(p)))},mouseEventToContainerPoint:function(p){return No(p,this._container)},mouseEventToLayerPoint:function(p){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(p))},mouseEventToLatLng:function(p){return this.layerPointToLatLng(this.mouseEventToLayerPoint(p))},_initContainer:function(p){var A=this._container=Y(p);if(!A)throw new Error("Map container not found.");if(A._leaflet_id)throw new Error("Map container is already initialized.");cr(A,"scroll",this._onScroll,this),this._containerId=Be(A)},_initLayout:function(){var p=this._container;this._fadeAnimated=this.options.fadeAnimation&&ot.any3d,Ce(p,"leaflet-container"+(ot.touch?" leaflet-touch":"")+(ot.retina?" leaflet-retina":"")+(ot.ielt9?" leaflet-oldie":"")+(ot.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var A=W(p,"position");"absolute"!==A&&"relative"!==A&&"fixed"!==A&&"sticky"!==A&&(p.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var p=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new ki(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ce(p.markerPane,"leaflet-zoom-hide"),Ce(p.shadowPane,"leaflet-zoom-hide"))},_resetView:function(p,A,U){ht(this._mapPane,new ki(0,0));var de=!this._loaded;this._loaded=!0,A=this._limitZoom(A),this.fire("viewprereset");var Ie=this._zoom!==A;this._moveStart(Ie,U)._move(p,A)._moveEnd(Ie),this.fire("viewreset"),de&&this.fire("load")},_moveStart:function(p,A){return p&&this.fire("zoomstart"),A||this.fire("movestart"),this},_move:function(p,A,U,de){void 0===A&&(A=this._zoom);var Ie=this._zoom!==A;return this._zoom=A,this._lastCenter=p,this._pixelOrigin=this._getNewPixelOrigin(p),de?U&&U.pinch&&this.fire("zoom",U):((Ie||U&&U.pinch)&&this.fire("zoom",U),this.fire("move",U)),this},_moveEnd:function(p){return p&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return St(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(p){ht(this._mapPane,this._getMapPanePos().subtract(p))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(p){this._targets={},this._targets[Be(this._container)]=this;var A=p?ir:cr;A(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&A(window,"resize",this._onResize,this),ot.any3d&&this.options.transform3DLimit&&(p?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){St(this._resizeRequest),this._resizeRequest=ti(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var p=this._getMapPanePos();Math.max(Math.abs(p.x),Math.abs(p.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(p,A){for(var de,U=[],Ie="mouseout"===A||"mouseover"===A,lt=p.target||p.srcElement,ri=!1;lt;){if((de=this._targets[Be(lt)])&&("click"===A||"preclick"===A)&&this._draggableMoved(de)){ri=!0;break}if(de&&de.listens(A,!0)&&(Ie&&!Da(lt,p)||(U.push(de),Ie))||lt===this._container)break;lt=lt.parentNode}return!U.length&&!ri&&!Ie&&this.listens(A,!0)&&(U=[this]),U},_isClickDisabled:function(p){for(;p&&p!==this._container;){if(p._leaflet_disable_click)return!0;p=p.parentNode}},_handleDOMEvent:function(p){var A=p.target||p.srcElement;if(!(!this._loaded||A._leaflet_disable_events||"click"===p.type&&this._isClickDisabled(A))){var U=p.type;"mousedown"===U&&hr(A),this._fireDOMEvent(p,U)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(p,A,U){if("click"===p.type){var de=Mi({},p);de.type="preclick",this._fireDOMEvent(de,de.type,U)}var Ie=this._findEventTargets(p,A);if(U){for(var lt=[],ri=0;ri<U.length;ri++)U[ri].listens(A,!0)&&lt.push(U[ri]);Ie=lt.concat(Ie)}if(Ie.length){"contextmenu"===A&&or(p);var Si=Ie[0],Vi={originalEvent:p};if("keypress"!==p.type&&"keydown"!==p.type&&"keyup"!==p.type){var xn=Si.getLatLng&&(!Si._radius||Si._radius<=10);Vi.containerPoint=xn?this.latLngToContainerPoint(Si.getLatLng()):this.mouseEventToContainerPoint(p),Vi.layerPoint=this.containerPointToLayerPoint(Vi.containerPoint),Vi.latlng=xn?Si.getLatLng():this.layerPointToLatLng(Vi.layerPoint)}for(ri=0;ri<Ie.length;ri++)if(Ie[ri].fire(A,Vi,!0),Vi.originalEvent._stopped||!1===Ie[ri].options.bubblingMouseEvents&&-1!==qt(this._mouseEvents,A))return}},_draggableMoved:function(p){return(p=p.dragging&&p.dragging.enabled()?p:this).dragging&&p.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var p=0,A=this._handlers.length;p<A;p++)this._handlers[p].disable()},whenReady:function(p,A){return this._loaded?p.call(A||this,{target:this}):this.on("load",p,A),this},_getMapPanePos:function(){return yt(this._mapPane)||new ki(0,0)},_moved:function(){var p=this._getMapPanePos();return p&&!p.equals([0,0])},_getTopLeftPoint:function(p,A){return(p&&void 0!==A?this._getNewPixelOrigin(p,A):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(p,A){var U=this.getSize()._divideBy(2);return this.project(p,A)._subtract(U)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(p,A,U){var de=this._getNewPixelOrigin(U,A);return this.project(p,A)._subtract(de)},_latLngBoundsToNewLayerBounds:function(p,A,U){var de=this._getNewPixelOrigin(U,A);return gn([this.project(p.getSouthWest(),A)._subtract(de),this.project(p.getNorthWest(),A)._subtract(de),this.project(p.getSouthEast(),A)._subtract(de),this.project(p.getNorthEast(),A)._subtract(de)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(p){return this.latLngToLayerPoint(p).subtract(this._getCenterLayerPoint())},_limitCenter:function(p,A,U){if(!U)return p;var de=this.project(p,A),Ie=this.getSize().divideBy(2),lt=new ji(de.subtract(Ie),de.add(Ie)),ri=this._getBoundsOffset(lt,U,A);return Math.abs(ri.x)<=1&&Math.abs(ri.y)<=1?p:this.unproject(de.add(ri),A)},_limitOffset:function(p,A){if(!A)return p;var U=this.getPixelBounds(),de=new ji(U.min.add(p),U.max.add(p));return p.add(this._getBoundsOffset(de,A))},_getBoundsOffset:function(p,A,U){var de=gn(this.project(A.getNorthEast(),U),this.project(A.getSouthWest(),U)),Ie=de.min.subtract(p.min),lt=de.max.subtract(p.max);return new ki(this._rebound(Ie.x,-lt.x),this._rebound(Ie.y,-lt.y))},_rebound:function(p,A){return p+A>0?Math.round(p-A)/2:Math.max(0,Math.ceil(p))-Math.max(0,Math.floor(A))},_limitZoom:function(p){var A=this.getMinZoom(),U=this.getMaxZoom(),de=ot.any3d?this.options.zoomSnap:1;return de&&(p=Math.round(p/de)*de),Math.max(A,Math.min(U,p))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Re(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(p,A){var U=this._getCenterOffset(p)._trunc();return!(!0!==(A&&A.animate)&&!this.getSize().contains(U)||(this.panBy(U,A),0))},_createAnimProxy:function(){var p=this._proxy=X("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(p),this.on("zoomanim",function(A){var U=w,de=this._proxy.style[U];Fe(this._proxy,this.project(A.center,A.zoom),this.getZoomScale(A.zoom,1)),de===this._proxy.style[U]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Q(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var p=this.getCenter(),A=this.getZoom();Fe(this._proxy,this.project(p,A),this.getZoomScale(A,1))},_catchTransitionEnd:function(p){this._animatingZoom&&p.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(p,A,U){if(this._animatingZoom)return!0;if(U=U||{},!this._zoomAnimated||!1===U.animate||this._nothingToAnimate()||Math.abs(A-this._zoom)>this.options.zoomAnimationThreshold)return!1;var de=this.getZoomScale(A),Ie=this._getCenterOffset(p)._divideBy(1-1/de);return!(!0!==U.animate&&!this.getSize().contains(Ie)||(ti(function(){this._moveStart(!0,U.noMoveStart||!1)._animateZoom(p,A,!0)},this),0))},_animateZoom:function(p,A,U,de){this._mapPane&&(U&&(this._animatingZoom=!0,this._animateToCenter=p,this._animateToZoom=A,Ce(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:p,zoom:A,noUpdate:de}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Re(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Us=vi.extend({options:{position:"topright"},initialize:function(p){ut(this,p)},getPosition:function(){return this.options.position},setPosition:function(p){var A=this._map;return A&&A.removeControl(this),this.options.position=p,A&&A.addControl(this),this},getContainer:function(){return this._container},addTo:function(p){this.remove(),this._map=p;var A=this._container=this.onAdd(p),U=this.getPosition(),de=p._controlCorners[U];return Ce(A,"leaflet-control"),-1!==U.indexOf("bottom")?de.insertBefore(A,de.firstChild):de.appendChild(A),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Q(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(p){this._map&&p&&p.screenX>0&&p.screenY>0&&this._map.getContainer().focus()}}),Ds=function(p){return new Us(p)};wr.include({addControl:function(p){return p.addTo(this),this},removeControl:function(p){return p.remove(),this},_initControlPos:function(){var p=this._controlCorners={},A="leaflet-",U=this._controlContainer=X("div",A+"control-container",this._container);function de(Ie,lt){p[Ie+lt]=X("div",A+Ie+" "+A+lt,U)}de("top","left"),de("top","right"),de("bottom","left"),de("bottom","right")},_clearControlPos:function(){for(var p in this._controlCorners)Q(this._controlCorners[p]);Q(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fa=Us.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(p,A,U,de){return U<de?-1:de<U?1:0}},initialize:function(p,A,U){for(var de in ut(this,U),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,p)this._addLayer(p[de],de);for(de in A)this._addLayer(A[de],de,!0)},onAdd:function(p){this._initLayout(),this._update(),this._map=p,p.on("zoomend",this._checkDisabledLayers,this);for(var A=0;A<this._layers.length;A++)this._layers[A].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(p){return Us.prototype.addTo.call(this,p),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(p,A){return this._addLayer(p,A),this._map?this._update():this},addOverlay:function(p,A){return this._addLayer(p,A,!0),this._map?this._update():this},removeLayer:function(p){p.off("add remove",this._onLayerChange,this);var A=this._getLayer(Be(p));return A&&this._layers.splice(this._layers.indexOf(A),1),this._map?this._update():this},expand:function(){Ce(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var p=this._map.getSize().y-(this._container.offsetTop+50);return p<this._section.clientHeight?(Ce(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=p+"px"):Re(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Re(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var p="leaflet-control-layers",A=this._container=X("div",p),U=this.options.collapsed;A.setAttribute("aria-haspopup",!0),oo(A),cl(A);var de=this._section=X("section",p+"-list");U&&(this._map.on("click",this.collapse,this),cr(A,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ie=this._layersLink=X("a",p+"-toggle",A);Ie.href="#",Ie.title="Layers",Ie.setAttribute("role","button"),cr(Ie,{keydown:function(lt){13===lt.keyCode&&this._expandSafely()},click:function(lt){or(lt),this._expandSafely()}},this),U||this.expand(),this._baseLayersList=X("div",p+"-base",de),this._separator=X("div",p+"-separator",de),this._overlaysList=X("div",p+"-overlays",de),A.appendChild(de)},_getLayer:function(p){for(var A=0;A<this._layers.length;A++)if(this._layers[A]&&Be(this._layers[A].layer)===p)return this._layers[A]},_addLayer:function(p,A,U){this._map&&p.on("add remove",this._onLayerChange,this),this._layers.push({layer:p,name:A,overlay:U}),this.options.sortLayers&&this._layers.sort(c(function(de,Ie){return this.options.sortFunction(de.layer,Ie.layer,de.name,Ie.name)},this)),this.options.autoZIndex&&p.setZIndex&&(this._lastZIndex++,p.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ce(this._baseLayersList),ce(this._overlaysList),this._layerControlInputs=[];var p,A,U,de,Ie=0;for(U=0;U<this._layers.length;U++)this._addItem(de=this._layers[U]),A=A||de.overlay,p=p||!de.overlay,Ie+=de.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(p=p&&Ie>1)?"":"none"),this._separator.style.display=A&&p?"":"none",this},_onLayerChange:function(p){this._handlingClick||this._update();var A=this._getLayer(Be(p.target)),U=A.overlay?"add"===p.type?"overlayadd":"overlayremove":"add"===p.type?"baselayerchange":null;U&&this._map.fire(U,A)},_createRadioElement:function(p,A){var U='<input type="radio" class="leaflet-control-layers-selector" name="'+p+'"'+(A?' checked="checked"':"")+"/>",de=document.createElement("div");return de.innerHTML=U,de.firstChild},_addItem:function(p){var de,A=document.createElement("label"),U=this._map.hasLayer(p.layer);p.overlay?((de=document.createElement("input")).type="checkbox",de.className="leaflet-control-layers-selector",de.defaultChecked=U):de=this._createRadioElement("leaflet-base-layers_"+Be(this),U),this._layerControlInputs.push(de),de.layerId=Be(p.layer),cr(de,"click",this._onInputClick,this);var Ie=document.createElement("span");Ie.innerHTML=" "+p.name;var lt=document.createElement("span");return A.appendChild(lt),lt.appendChild(de),lt.appendChild(Ie),(p.overlay?this._overlaysList:this._baseLayersList).appendChild(A),this._checkDisabledLayers(),A},_onInputClick:function(){if(!this._preventClick){var A,U,p=this._layerControlInputs,de=[],Ie=[];this._handlingClick=!0;for(var lt=p.length-1;lt>=0;lt--)U=this._getLayer((A=p[lt]).layerId).layer,A.checked?de.push(U):A.checked||Ie.push(U);for(lt=0;lt<Ie.length;lt++)this._map.hasLayer(Ie[lt])&&this._map.removeLayer(Ie[lt]);for(lt=0;lt<de.length;lt++)this._map.hasLayer(de[lt])||this._map.addLayer(de[lt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var A,U,p=this._layerControlInputs,de=this._map.getZoom(),Ie=p.length-1;Ie>=0;Ie--)U=this._getLayer((A=p[Ie]).layerId).layer,A.disabled=void 0!==U.options.minZoom&&de<U.options.minZoom||void 0!==U.options.maxZoom&&de>U.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var p=this._section;this._preventClick=!0,cr(p,"click",or),this.expand();var A=this;setTimeout(function(){ir(p,"click",or),A._preventClick=!1})}}),ma=Us.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(p){var A="leaflet-control-zoom",U=X("div",A+" leaflet-bar"),de=this.options;return this._zoomInButton=this._createButton(de.zoomInText,de.zoomInTitle,A+"-in",U,this._zoomIn),this._zoomOutButton=this._createButton(de.zoomOutText,de.zoomOutTitle,A+"-out",U,this._zoomOut),this._updateDisabled(),p.on("zoomend zoomlevelschange",this._updateDisabled,this),U},onRemove:function(p){p.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(p){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(p.shiftKey?3:1))},_zoomOut:function(p){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(p.shiftKey?3:1))},_createButton:function(p,A,U,de,Ie){var lt=X("a",U,de);return lt.innerHTML=p,lt.href="#",lt.title=A,lt.setAttribute("role","button"),lt.setAttribute("aria-label",A),oo(lt),cr(lt,"click",Fs),cr(lt,"click",Ie,this),cr(lt,"click",this._refocusOnMap,this),lt},_updateDisabled:function(){var p=this._map,A="leaflet-disabled";Re(this._zoomInButton,A),Re(this._zoomOutButton,A),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||p._zoom===p.getMinZoom())&&(Ce(this._zoomOutButton,A),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||p._zoom===p.getMaxZoom())&&(Ce(this._zoomInButton,A),this._zoomInButton.setAttribute("aria-disabled","true"))}});wr.mergeOptions({zoomControl:!0}),wr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ma,this.addControl(this.zoomControl))});var Zo=Us.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(p){var A="leaflet-control-scale",U=X("div",A),de=this.options;return this._addScales(de,A+"-line",U),p.on(de.updateWhenIdle?"moveend":"move",this._update,this),p.whenReady(this._update,this),U},onRemove:function(p){p.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(p,A,U){p.metric&&(this._mScale=X("div",A,U)),p.imperial&&(this._iScale=X("div",A,U))},_update:function(){var p=this._map,A=p.getSize().y/2,U=p.distance(p.containerPointToLatLng([0,A]),p.containerPointToLatLng([this.options.maxWidth,A]));this._updateScales(U)},_updateScales:function(p){this.options.metric&&p&&this._updateMetric(p),this.options.imperial&&p&&this._updateImperial(p)},_updateMetric:function(p){var A=this._getRoundNum(p);this._updateScale(this._mScale,A<1e3?A+" m":A/1e3+" km",A/p)},_updateImperial:function(p){var U,de,Ie,A=3.2808399*p;A>5280?(de=this._getRoundNum(U=A/5280),this._updateScale(this._iScale,de+" mi",de/U)):(Ie=this._getRoundNum(A),this._updateScale(this._iScale,Ie+" ft",Ie/A))},_updateScale:function(p,A,U){p.style.width=Math.round(this.options.maxWidth*U)+"px",p.innerHTML=A},_getRoundNum:function(p){var A=Math.pow(10,(Math.floor(p)+"").length-1),U=p/A;return A*(U>=10?10:U>=5?5:U>=3?3:U>=2?2:1)}}),Ao=Us.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ot.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(p){ut(this,p),this._attributions={}},onAdd:function(p){for(var A in p.attributionControl=this,this._container=X("div","leaflet-control-attribution"),oo(this._container),p._layers)p._layers[A].getAttribution&&this.addAttribution(p._layers[A].getAttribution());return this._update(),p.on("layeradd",this._addAttribution,this),this._container},onRemove:function(p){p.off("layeradd",this._addAttribution,this)},_addAttribution:function(p){p.layer.getAttribution&&(this.addAttribution(p.layer.getAttribution()),p.layer.once("remove",function(){this.removeAttribution(p.layer.getAttribution())},this))},setPrefix:function(p){return this.options.prefix=p,this._update(),this},addAttribution:function(p){return p?(this._attributions[p]||(this._attributions[p]=0),this._attributions[p]++,this._update(),this):this},removeAttribution:function(p){return p?(this._attributions[p]&&(this._attributions[p]--,this._update()),this):this},_update:function(){if(this._map){var p=[];for(var A in this._attributions)this._attributions[A]&&p.push(A);var U=[];this.options.prefix&&U.push(this.options.prefix),p.length&&U.push(p.join(", ")),this._container.innerHTML=U.join(' <span aria-hidden="true">|</span> ')}}});wr.mergeOptions({attributionControl:!0}),wr.addInitHook(function(){this.options.attributionControl&&(new Ao).addTo(this)});Us.Layers=fa,Us.Zoom=ma,Us.Scale=Zo,Us.Attribution=Ao,Ds.layers=function(p,A,U){return new fa(p,A,U)},Ds.zoom=function(p){return new ma(p)},Ds.scale=function(p){return new Zo(p)},Ds.attribution=function(p){return new Ao(p)};var as=vi.extend({initialize:function(p){this._map=p},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});as.addTo=function(p,A){return p.addHandler(A,this),this};var Mr={Events:Ji},oc=ot.touch?"touchstart mousedown":"mousedown",Ws=Ii.extend({options:{clickTolerance:3},initialize:function(p,A,U,de){ut(this,de),this._element=p,this._dragStartTarget=A||p,this._preventOutline=U},enable:function(){this._enabled||(cr(this._dragStartTarget,oc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ws._dragging===this&&this.finishDrag(!0),ir(this._dragStartTarget,oc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(p){if(this._enabled&&(this._moved=!1,!De(this._element,"leaflet-zoom-anim"))){if(p.touches&&1!==p.touches.length)return void(Ws._dragging===this&&this.finishDrag());if(!(Ws._dragging||p.shiftKey||1!==p.which&&1!==p.button&&!p.touches||(Ws._dragging=this,this._preventOutline&&hr(this._element),nn(),ii(),this._moving))){this.fire("down");var A=p.touches?p.touches[0]:p,U=Rr(this._element);this._startPoint=new ki(A.clientX,A.clientY),this._startPos=yt(this._element),this._parentScale=Br(U);var de="mousedown"===p.type;cr(document,de?"mousemove":"touchmove",this._onMove,this),cr(document,de?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(p){if(this._enabled){if(p.touches&&p.touches.length>1)return void(this._moved=!0);var A=p.touches&&1===p.touches.length?p.touches[0]:p,U=new ki(A.clientX,A.clientY)._subtract(this._startPoint);!U.x&&!U.y||Math.abs(U.x)+Math.abs(U.y)<this.options.clickTolerance||(U.x/=this._parentScale.x,U.y/=this._parentScale.y,or(p),this._moved||(this.fire("dragstart"),this._moved=!0,Ce(document.body,"leaflet-dragging"),this._lastTarget=p.target||p.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ce(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(U),this._moving=!0,this._lastEvent=p,this._updatePosition())}},_updatePosition:function(){var p={originalEvent:this._lastEvent};this.fire("predrag",p),ht(this._element,this._newPos),this.fire("drag",p)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(p){Re(document.body,"leaflet-dragging"),this._lastTarget&&(Re(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ir(document,"mousemove touchmove",this._onMove,this),ir(document,"mouseup touchend touchcancel",this._onUp,this),Tn(),hi();var A=this._moved&&this._moving;this._moving=!1,Ws._dragging=!1,A&&this.fire("dragend",{noInertia:p,distance:this._newPos.distanceTo(this._startPos)})}});function Ko(p,A,U){var de,lt,ri,Si,Vi,xn,$n,Un,Ir,Ie=[1,4,2,8];for(lt=0,$n=p.length;lt<$n;lt++)p[lt]._code=ns(p[lt],A);for(Si=0;Si<4;Si++){for(Un=Ie[Si],de=[],lt=0,ri=($n=p.length)-1;lt<$n;ri=lt++)xn=p[ri],(Vi=p[lt])._code&Un?xn._code&Un||((Ir=go(xn,Vi,Un,A,U))._code=ns(Ir,A),de.push(Ir)):(xn._code&Un&&((Ir=go(xn,Vi,Un,A,U))._code=ns(Ir,A),de.push(Ir)),de.push(Vi));p=de}return p}function zl(p,A){var U,de,Ie,lt,ri,Si,Vi,xn;if(!p||0===p.length)throw new Error("latlngs not passed");Jr(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var Un=_n([0,0]),Ir=di(p);Ir.getNorthWest().distanceTo(Ir.getSouthWest())*Ir.getNorthEast().distanceTo(Ir.getNorthWest())<1700&&(Un=Do(p));var _s=p.length,Os=[];for(U=0;U<_s;U++){var Gs=_n(p[U]);Os.push(A.project(_n([Gs.lat-Un.lat,Gs.lng-Un.lng])))}for(Si=Vi=xn=0,U=0,de=_s-1;U<_s;de=U++)Vi+=((Ie=Os[U]).x+(lt=Os[de]).x)*(ri=Ie.y*lt.x-lt.y*Ie.x),xn+=(Ie.y+lt.y)*ri,Si+=3*ri;var To=A.unproject(pn(0===Si?Os[0]:[Vi/Si,xn/Si]));return _n([To.lat+Un.lat,To.lng+Un.lng])}function Do(p){for(var A=0,U=0,de=0,Ie=0;Ie<p.length;Ie++){var lt=_n(p[Ie]);A+=lt.lat,U+=lt.lng,de++}return _n([A/de,U/de])}var Rs,is={__proto__:null,clipPolygon:Ko,polygonCenter:zl,centroid:Do};function Ro(p,A){if(!A||!p.length)return p.slice();var U=A*A;return function lo(p,A){var U=p.length,Ie=new(typeof Uint8Array<"u"?Uint8Array:Array)(U);Ie[0]=Ie[U-1]=1,Xr(p,Ie,A,0,U-1);var lt,ri=[];for(lt=0;lt<U;lt++)Ie[lt]&&ri.push(p[lt]);return ri}(p=function ul(p,A){for(var U=[p[0]],de=1,Ie=0,lt=p.length;de<lt;de++)kl(p[de],p[Ie])>A&&(U.push(p[de]),Ie=de);return Ie<lt-1&&U.push(p[lt-1]),U}(p,U),U)}function ao(p,A,U){return Math.sqrt(_o(p,A,U,!0))}function Xr(p,A,U,de,Ie){var ri,Si,Vi,lt=0;for(Si=de+1;Si<=Ie-1;Si++)(Vi=_o(p[Si],p[de],p[Ie],!0))>lt&&(ri=Si,lt=Vi);lt>U&&(A[ri]=1,Xr(p,A,U,de,ri),Xr(p,A,U,ri,Ie))}function Ra(p,A,U,de,Ie){var Si,Vi,xn,lt=de?Rs:ns(p,U),ri=ns(A,U);for(Rs=ri;;){if(!(lt|ri))return[p,A];if(lt&ri)return!1;xn=ns(Vi=go(p,A,Si=lt||ri,U,Ie),U),Si===lt?(p=Vi,lt=xn):(A=Vi,ri=xn)}}function go(p,A,U,de,Ie){var xn,$n,lt=A.x-p.x,ri=A.y-p.y,Si=de.min,Vi=de.max;return 8&U?(xn=p.x+lt*(Vi.y-p.y)/ri,$n=Vi.y):4&U?(xn=p.x+lt*(Si.y-p.y)/ri,$n=Si.y):2&U?(xn=Vi.x,$n=p.y+ri*(Vi.x-p.x)/lt):1&U&&(xn=Si.x,$n=p.y+ri*(Si.x-p.x)/lt),new ki(xn,$n,Ie)}function ns(p,A){var U=0;return p.x<A.min.x?U|=1:p.x>A.max.x&&(U|=2),p.y<A.min.y?U|=4:p.y>A.max.y&&(U|=8),U}function kl(p,A){var U=A.x-p.x,de=A.y-p.y;return U*U+de*de}function _o(p,A,U,de){var xn,Ie=A.x,lt=A.y,ri=U.x-Ie,Si=U.y-lt,Vi=ri*ri+Si*Si;return Vi>0&&((xn=((p.x-Ie)*ri+(p.y-lt)*Si)/Vi)>1?(Ie=U.x,lt=U.y):xn>0&&(Ie+=ri*xn,lt+=Si*xn)),ri=p.x-Ie,Si=p.y-lt,de?ri*ri+Si*Si:new ki(Ie,lt)}function Jr(p){return!ct(p[0])||"object"!=typeof p[0][0]&&typeof p[0][0]<"u"}function Cr(p){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jr(p)}function eo(p,A){var U,de,Ie,lt,ri,Si,Vi,xn;if(!p||0===p.length)throw new Error("latlngs not passed");Jr(p)||(console.warn("latlngs are not flat! Only the first ring will be used"),p=p[0]);var $n=_n([0,0]),Un=di(p);Un.getNorthWest().distanceTo(Un.getSouthWest())*Un.getNorthEast().distanceTo(Un.getNorthWest())<1700&&($n=Do(p));var Lr=p.length,_s=[];for(U=0;U<Lr;U++){var Os=_n(p[U]);_s.push(A.project(_n([Os.lat-$n.lat,Os.lng-$n.lng])))}for(U=0,de=0;U<Lr-1;U++)de+=_s[U].distanceTo(_s[U+1])/2;if(0===de)xn=_s[0];else for(U=0,lt=0;U<Lr-1;U++)if((lt+=Ie=(ri=_s[U]).distanceTo(Si=_s[U+1]))>de){xn=[Si.x-(Vi=(lt-de)/Ie)*(Si.x-ri.x),Si.y-Vi*(Si.y-ri.y)];break}var Gs=A.unproject(pn(xn));return _n([Gs.lat+$n.lat,Gs.lng+$n.lng])}var Qo={__proto__:null,simplify:Ro,pointToSegmentDistance:ao,closestPointOnSegment:function Jo(p,A,U){return _o(p,A,U)},clipSegment:Ra,_getEdgeIntersection:go,_getBitCode:ns,_sqClosestPointOnSegment:_o,isFlat:Jr,_flat:Cr,polylineCenter:eo},Ts={project:function(p){return new ki(p.lng,p.lat)},unproject:function(p){return new Wi(p.y,p.x)},bounds:new ji([-180,-90],[180,90])},hl={R:6378137,R_MINOR:6356752.314245179,bounds:new ji([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(p){var A=Math.PI/180,U=this.R,de=p.lat*A,Ie=this.R_MINOR/U,lt=Math.sqrt(1-Ie*Ie),ri=lt*Math.sin(de),Si=Math.tan(Math.PI/4-de/2)/Math.pow((1-ri)/(1+ri),lt/2);return de=-U*Math.log(Math.max(Si,1e-10)),new ki(p.lng*A*U,de)},unproject:function(p){for(var xn,A=180/Math.PI,U=this.R,de=this.R_MINOR/U,Ie=Math.sqrt(1-de*de),lt=Math.exp(-p.y/U),ri=Math.PI/2-2*Math.atan(lt),Si=0,Vi=.1;Si<15&&Math.abs(Vi)>1e-7;Si++)xn=Ie*Math.sin(ri),xn=Math.pow((1-xn)/(1+xn),Ie/2),ri+=Vi=Math.PI/2-2*Math.atan(lt*xn)-ri;return new Wi(ri*A,p.x*A/U)}},gs={__proto__:null,LonLat:Ts,Mercator:hl,SphericalMercator:on},Ys=Mi({},Gn,{code:"EPSG:3395",projection:hl,transformation:function(){var p=.5/(Math.PI*hl.R);return gi(p,.5,-p,.5)}()}),Es=Mi({},Gn,{code:"EPSG:4326",projection:Ts,transformation:gi(1/180,1,-1/180,.5)}),Cc=Mi({},Ln,{projection:Ts,transformation:gi(1,0,-1,0),scale:function(p){return Math.pow(2,p)},zoom:function(p){return Math.log(p)/Math.LN2},distance:function(p,A){var U=A.lng-p.lng,de=A.lat-p.lat;return Math.sqrt(U*U+de*de)},infinite:!0});Ln.Earth=Gn,Ln.EPSG3395=Ys,Ln.EPSG3857=V,Ln.EPSG900913=Bi,Ln.EPSG4326=Es,Ln.Simple=Cc;var Ss=Ii.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(p){return p.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(p){return p&&p.removeLayer(this),this},getPane:function(p){return this._map.getPane(p?this.options[p]||p:this.options.pane)},addInteractiveTarget:function(p){return this._map._targets[Be(p)]=this,this},removeInteractiveTarget:function(p){return delete this._map._targets[Be(p)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(p){var A=p.target;if(A.hasLayer(this)){if(this._map=A,this._zoomAnimated=A._zoomAnimated,this.getEvents){var U=this.getEvents();A.on(U,this),this.once("remove",function(){A.off(U,this)},this)}this.onAdd(A),this.fire("add"),A.fire("layeradd",{layer:this})}}});wr.include({addLayer:function(p){if(!p._layerAdd)throw new Error("The provided object is not a Layer.");var A=Be(p);return this._layers[A]||(this._layers[A]=p,p._mapToAdd=this,p.beforeAdd&&p.beforeAdd(this),this.whenReady(p._layerAdd,p)),this},removeLayer:function(p){var A=Be(p);return this._layers[A]?(this._loaded&&p.onRemove(this),delete this._layers[A],this._loaded&&(this.fire("layerremove",{layer:p}),p.fire("remove")),p._map=p._mapToAdd=null,this):this},hasLayer:function(p){return Be(p)in this._layers},eachLayer:function(p,A){for(var U in this._layers)p.call(A,this._layers[U]);return this},_addLayers:function(p){for(var A=0,U=(p=p?ct(p)?p:[p]:[]).length;A<U;A++)this.addLayer(p[A])},_addZoomLimit:function(p){(!isNaN(p.options.maxZoom)||!isNaN(p.options.minZoom))&&(this._zoomBoundLayers[Be(p)]=p,this._updateZoomLevels())},_removeZoomLimit:function(p){var A=Be(p);this._zoomBoundLayers[A]&&(delete this._zoomBoundLayers[A],this._updateZoomLevels())},_updateZoomLevels:function(){var p=1/0,A=-1/0,U=this._getZoomSpan();for(var de in this._zoomBoundLayers){var Ie=this._zoomBoundLayers[de].options;p=void 0===Ie.minZoom?p:Math.min(p,Ie.minZoom),A=void 0===Ie.maxZoom?A:Math.max(A,Ie.maxZoom)}this._layersMaxZoom=A===-1/0?void 0:A,this._layersMinZoom=p===1/0?void 0:p,U!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jo=Ss.extend({initialize:function(p,A){var U,de;if(ut(this,A),this._layers={},p)for(U=0,de=p.length;U<de;U++)this.addLayer(p[U])},addLayer:function(p){var A=this.getLayerId(p);return this._layers[A]=p,this._map&&this._map.addLayer(p),this},removeLayer:function(p){var A=p in this._layers?p:this.getLayerId(p);return this._map&&this._layers[A]&&this._map.removeLayer(this._layers[A]),delete this._layers[A],this},hasLayer:function(p){return("number"==typeof p?p:this.getLayerId(p))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(p){var U,de,A=Array.prototype.slice.call(arguments,1);for(U in this._layers)(de=this._layers[U])[p]&&de[p].apply(de,A);return this},onAdd:function(p){this.eachLayer(p.addLayer,p)},onRemove:function(p){this.eachLayer(p.removeLayer,p)},eachLayer:function(p,A){for(var U in this._layers)p.call(A,this._layers[U]);return this},getLayer:function(p){return this._layers[p]},getLayers:function(){var p=[];return this.eachLayer(p.push,p),p},setZIndex:function(p){return this.invoke("setZIndex",p)},getLayerId:function(p){return Be(p)}}),to=jo.extend({addLayer:function(p){return this.hasLayer(p)?this:(p.addEventParent(this),jo.prototype.addLayer.call(this,p),this.fire("layeradd",{layer:p}))},removeLayer:function(p){return this.hasLayer(p)?(p in this._layers&&(p=this._layers[p]),p.removeEventParent(this),jo.prototype.removeLayer.call(this,p),this.fire("layerremove",{layer:p})):this},setStyle:function(p){return this.invoke("setStyle",p)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var p=new tn;for(var A in this._layers){var U=this._layers[A];p.extend(U.getBounds?U.getBounds():U.getLatLng())}return p}}),ea=vi.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(p){ut(this,p)},createIcon:function(p){return this._createIcon("icon",p)},createShadow:function(p){return this._createIcon("shadow",p)},_createIcon:function(p,A){var U=this._getIconUrl(p);if(!U){if("icon"===p)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var de=this._createImg(U,A&&"IMG"===A.tagName?A:null);return this._setIconStyles(de,p),(this.options.crossOrigin||""===this.options.crossOrigin)&&(de.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),de},_setIconStyles:function(p,A){var U=this.options,de=U[A+"Size"];"number"==typeof de&&(de=[de,de]);var Ie=pn(de),lt=pn("shadow"===A&&U.shadowAnchor||U.iconAnchor||Ie&&Ie.divideBy(2,!0));p.className="leaflet-marker-"+A+" "+(U.className||""),lt&&(p.style.marginLeft=-lt.x+"px",p.style.marginTop=-lt.y+"px"),Ie&&(p.style.width=Ie.x+"px",p.style.height=Ie.y+"px")},_createImg:function(p,A){return(A=A||document.createElement("img")).src=p,A},_getIconUrl:function(p){return ot.retina&&this.options[p+"RetinaUrl"]||this.options[p+"Url"]}});var Pa=ea.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(p){return"string"!=typeof Pa.imagePath&&(Pa.imagePath=this._detectIconPath()),(this.options.imagePath||Pa.imagePath)+ea.prototype._getIconUrl.call(this,p)},_stripUrl:function(p){var A=function(U,de,Ie){var lt=de.exec(U);return lt&&lt[Ie]};return(p=A(p,/^url\((['"])?(.+)\1\)$/,2))&&A(p,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var p=X("div","leaflet-default-icon-path",document.body),A=W(p,"background-image")||W(p,"backgroundImage");if(document.body.removeChild(p),A=this._stripUrl(A))return A;var U=document.querySelector('link[href$="leaflet.css"]');return U?U.href.substring(0,U.href.length-11-1):""}}),Ka=as.extend({initialize:function(p){this._marker=p},addHooks:function(){var p=this._marker._icon;this._draggable||(this._draggable=new Ws(p,p,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ce(p,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Re(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(p){var A=this._marker,U=A._map,de=this._marker.options.autoPanSpeed,Ie=this._marker.options.autoPanPadding,lt=yt(A._icon),ri=U.getPixelBounds(),Si=U.getPixelOrigin(),Vi=gn(ri.min._subtract(Si).add(Ie),ri.max._subtract(Si).subtract(Ie));if(!Vi.contains(lt)){var xn=pn((Math.max(Vi.max.x,lt.x)-Vi.max.x)/(ri.max.x-Vi.max.x)-(Math.min(Vi.min.x,lt.x)-Vi.min.x)/(ri.min.x-Vi.min.x),(Math.max(Vi.max.y,lt.y)-Vi.max.y)/(ri.max.y-Vi.max.y)-(Math.min(Vi.min.y,lt.y)-Vi.min.y)/(ri.min.y-Vi.min.y)).multiplyBy(de);U.panBy(xn,{animate:!1}),this._draggable._newPos._add(xn),this._draggable._startPos._add(xn),ht(A._icon,this._draggable._newPos),this._onDrag(p),this._panRequest=ti(this._adjustPan.bind(this,p))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(p){this._marker.options.autoPan&&(St(this._panRequest),this._panRequest=ti(this._adjustPan.bind(this,p)))},_onDrag:function(p){var A=this._marker,U=A._shadow,de=yt(A._icon),Ie=A._map.layerPointToLatLng(de);U&&ht(U,de),A._latlng=Ie,p.latlng=Ie,p.oldLatLng=this._oldLatLng,A.fire("move",p).fire("drag",p)},_onDragEnd:function(p){St(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",p)}}),Uo=Ss.extend({options:{icon:new Pa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(p,A){ut(this,A),this._latlng=_n(p)},onAdd:function(p){this._zoomAnimated=this._zoomAnimated&&p.options.markerZoomAnimation,this._zoomAnimated&&p.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(p){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&p.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(p){var A=this._latlng;return this._latlng=_n(p),this.update(),this.fire("move",{oldLatLng:A,latlng:this._latlng})},setZIndexOffset:function(p){return this.options.zIndexOffset=p,this.update()},getIcon:function(){return this.options.icon},setIcon:function(p){return this.options.icon=p,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var p=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(p)}return this},_initIcon:function(){var p=this.options,A="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),U=p.icon.createIcon(this._icon),de=!1;U!==this._icon&&(this._icon&&this._removeIcon(),de=!0,p.title&&(U.title=p.title),"IMG"===U.tagName&&(U.alt=p.alt||"")),Ce(U,A),p.keyboard&&(U.tabIndex="0",U.setAttribute("role","button")),this._icon=U,p.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&cr(U,"focus",this._panOnFocus,this);var Ie=p.icon.createShadow(this._shadow),lt=!1;Ie!==this._shadow&&(this._removeShadow(),lt=!0),Ie&&(Ce(Ie,A),Ie.alt=""),this._shadow=Ie,p.opacity<1&&this._updateOpacity(),de&&this.getPane().appendChild(this._icon),this._initInteraction(),Ie&&lt&&this.getPane(p.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ir(this._icon,"focus",this._panOnFocus,this),Q(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Q(this._shadow),this._shadow=null},_setPos:function(p){this._icon&&ht(this._icon,p),this._shadow&&ht(this._shadow,p),this._zIndex=p.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(p){this._icon&&(this._icon.style.zIndex=this._zIndex+p)},_animateZoom:function(p){var A=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center).round();this._setPos(A)},_initInteraction:function(){if(this.options.interactive&&(Ce(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ka)){var p=this.options.draggable;this.dragging&&(p=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ka(this),p&&this.dragging.enable()}},setOpacity:function(p){return this.options.opacity=p,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var p=this.options.opacity;this._icon&&te(this._icon,p),this._shadow&&te(this._shadow,p)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var p=this._map;if(p){var A=this.options.icon.options,U=A.iconSize?pn(A.iconSize):pn(0,0),de=A.iconAnchor?pn(A.iconAnchor):pn(0,0);p.panInside(this._latlng,{paddingTopLeft:de,paddingBottomRight:U.subtract(de)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var ks=Ss.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(p){this._renderer=p.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(p){return ut(this,p),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&p&&Object.prototype.hasOwnProperty.call(p,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ga=ks.extend({options:{fill:!0,radius:10},initialize:function(p,A){ut(this,A),this._latlng=_n(p),this._radius=this.options.radius},setLatLng:function(p){var A=this._latlng;return this._latlng=_n(p),this.redraw(),this.fire("move",{oldLatLng:A,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(p){return this.options.radius=this._radius=p,this.redraw()},getRadius:function(){return this._radius},setStyle:function(p){var A=p&&p.radius||this._radius;return ks.prototype.setStyle.call(this,p),this.setRadius(A),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var p=this._radius,A=this._radiusY||p,U=this._clickTolerance(),de=[p+U,A+U];this._pxBounds=new ji(this._point.subtract(de),this._point.add(de))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ja=ga.extend({initialize:function(p,A,U){if("number"==typeof A&&(A=Mi({},U,{radius:A})),ut(this,A),this._latlng=_n(p),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(p){return this._mRadius=p,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var p=[this._radius,this._radiusY||this._radius];return new tn(this._map.layerPointToLatLng(this._point.subtract(p)),this._map.layerPointToLatLng(this._point.add(p)))},setStyle:ks.prototype.setStyle,_project:function(){var p=this._latlng.lng,A=this._latlng.lat,U=this._map,de=U.options.crs;if(de.distance===Gn.distance){var Ie=Math.PI/180,lt=this._mRadius/Gn.R/Ie,ri=U.project([A+lt,p]),Si=U.project([A-lt,p]),Vi=ri.add(Si).divideBy(2),xn=U.unproject(Vi).lat,$n=Math.acos((Math.cos(lt*Ie)-Math.sin(A*Ie)*Math.sin(xn*Ie))/(Math.cos(A*Ie)*Math.cos(xn*Ie)))/Ie;(isNaN($n)||0===$n)&&($n=lt/Math.cos(Math.PI/180*A)),this._point=Vi.subtract(U.getPixelOrigin()),this._radius=isNaN($n)?0:Vi.x-U.project([xn,p-$n]).x,this._radiusY=Vi.y-ri.y}else{var Un=de.unproject(de.project(this._latlng).subtract([this._mRadius,0]));this._point=U.latLngToLayerPoint(this._latlng),this._radius=this._point.x-U.latLngToLayerPoint(Un).x}this._updateBounds()}});var yo=ks.extend({options:{smoothFactor:1,noClip:!1},initialize:function(p,A){ut(this,A),this._setLatLngs(p)},getLatLngs:function(){return this._latlngs},setLatLngs:function(p){return this._setLatLngs(p),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var Ie,lt,A=1/0,U=null,de=_o,ri=0,Si=this._parts.length;ri<Si;ri++)for(var Vi=this._parts[ri],xn=1,$n=Vi.length;xn<$n;xn++){var Un=de(p,Ie=Vi[xn-1],lt=Vi[xn],!0);Un<A&&(A=Un,U=de(p,Ie,lt))}return U&&(U.distance=Math.sqrt(A)),U},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(p,A){return A=A||this._defaultShape(),p=_n(p),A.push(p),this._bounds.extend(p),this.redraw()},_setLatLngs:function(p){this._bounds=new tn,this._latlngs=this._convertLatLngs(p)},_defaultShape:function(){return Jr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(p){for(var A=[],U=Jr(p),de=0,Ie=p.length;de<Ie;de++)U?(A[de]=_n(p[de]),this._bounds.extend(A[de])):A[de]=this._convertLatLngs(p[de]);return A},_project:function(){var p=new ji;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,p),this._bounds.isValid()&&p.isValid()&&(this._rawPxBounds=p,this._updateBounds())},_updateBounds:function(){var p=this._clickTolerance(),A=new ki(p,p);this._rawPxBounds&&(this._pxBounds=new ji([this._rawPxBounds.min.subtract(A),this._rawPxBounds.max.add(A)]))},_projectLatlngs:function(p,A,U){var lt,ri,Ie=p.length;if(p[0]instanceof Wi){for(ri=[],lt=0;lt<Ie;lt++)ri[lt]=this._map.latLngToLayerPoint(p[lt]),U.extend(ri[lt]);A.push(ri)}else for(lt=0;lt<Ie;lt++)this._projectLatlngs(p[lt],A,U)},_clipPoints:function(){var p=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(p)){if(this.options.noClip)return void(this._parts=this._rings);var U,de,Ie,lt,ri,Si,Vi,A=this._parts;for(U=0,Ie=0,lt=this._rings.length;U<lt;U++)for(de=0,ri=(Vi=this._rings[U]).length;de<ri-1;de++)(Si=Ra(Vi[de],Vi[de+1],p,de,!0))&&(A[Ie]=A[Ie]||[],A[Ie].push(Si[0]),(Si[1]!==Vi[de+1]||de===ri-2)&&(A[Ie].push(Si[1]),Ie++))}},_simplifyPoints:function(){for(var p=this._parts,A=this.options.smoothFactor,U=0,de=p.length;U<de;U++)p[U]=Ro(p[U],A)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,A){var U,de,Ie,lt,ri,Si,Vi=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(U=0,lt=this._parts.length;U<lt;U++)for(de=0,Ie=(ri=(Si=this._parts[U]).length)-1;de<ri;Ie=de++)if((A||0!==de)&&ao(p,Si[Ie],Si[de])<=Vi)return!0;return!1}});yo._flat=Cr;var So=yo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(p){var A=yo.prototype._convertLatLngs.call(this,p),U=A.length;return U>=2&&A[0]instanceof Wi&&A[0].equals(A[U-1])&&A.pop(),A},_setLatLngs:function(p){yo.prototype._setLatLngs.call(this,p),Jr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var p=this._renderer._bounds,A=this.options.weight,U=new ki(A,A);if(p=new ji(p.min.subtract(U),p.max.add(U)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(p)){if(this.options.noClip)return void(this._parts=this._rings);for(var lt,de=0,Ie=this._rings.length;de<Ie;de++)(lt=Ko(this._rings[de],p,!0)).length&&this._parts.push(lt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var U,de,Ie,lt,ri,Si,Vi,xn,A=!1;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(lt=0,Vi=this._parts.length;lt<Vi;lt++)for(ri=0,Si=(xn=(U=this._parts[lt]).length)-1;ri<xn;Si=ri++)(de=U[ri]).y>p.y!=(Ie=U[Si]).y>p.y&&p.x<(Ie.x-de.x)*(p.y-de.y)/(Ie.y-de.y)+de.x&&(A=!A);return A||yo.prototype._containsPoint.call(this,p,!0)}});var Wo=to.extend({initialize:function(p,A){ut(this,A),this._layers={},p&&this.addData(p)},addData:function(p){var U,de,Ie,A=ct(p)?p:p.features;if(A){for(U=0,de=A.length;U<de;U++)((Ie=A[U]).geometries||Ie.geometry||Ie.features||Ie.coordinates)&&this.addData(Ie);return this}var lt=this.options;if(lt.filter&&!lt.filter(p))return this;var ri=za(p,lt);return ri?(ri.feature=Fa(p),ri.defaultOptions=ri.options,this.resetStyle(ri),lt.onEachFeature&&lt.onEachFeature(p,ri),this.addLayer(ri)):this},resetStyle:function(p){return void 0===p?this.eachLayer(this.resetStyle,this):(p.options=Mi({},p.defaultOptions),this._setLayerStyle(p,this.options.style),this)},setStyle:function(p){return this.eachLayer(function(A){this._setLayerStyle(A,p)},this)},_setLayerStyle:function(p,A){p.setStyle&&("function"==typeof A&&(A=A(p.feature)),p.setStyle(A))}});function za(p,A){var Si,Vi,xn,$n,U="Feature"===p.type?p.geometry:p,de=U?U.coordinates:null,Ie=[],lt=A&&A.pointToLayer,ri=A&&A.coordsToLatLng||Qa;if(!de&&!U)return null;switch(U.type){case"Point":return co(lt,p,Si=ri(de),A);case"MultiPoint":for(xn=0,$n=de.length;xn<$n;xn++)Si=ri(de[xn]),Ie.push(co(lt,p,Si,A));return new to(Ie);case"LineString":case"MultiLineString":return Vi=Ls(de,"LineString"===U.type?0:1,ri),new yo(Vi,A);case"Polygon":case"MultiPolygon":return Vi=Ls(de,"Polygon"===U.type?1:2,ri),new So(Vi,A);case"GeometryCollection":for(xn=0,$n=U.geometries.length;xn<$n;xn++){var Un=za({geometry:U.geometries[xn],type:"Feature",properties:p.properties},A);Un&&Ie.push(Un)}return new to(Ie);case"FeatureCollection":for(xn=0,$n=U.features.length;xn<$n;xn++){var Ir=za(U.features[xn],A);Ir&&Ie.push(Ir)}return new to(Ie);default:throw new Error("Invalid GeoJSON object.")}}function co(p,A,U,de){return p?p(A,U):new Uo(U,de&&de.markersInheritOptions&&de)}function Qa(p){return new Wi(p[1],p[0],p[2])}function Ls(p,A,U){for(var ri,de=[],Ie=0,lt=p.length;Ie<lt;Ie++)ri=A?Ls(p[Ie],A-1,U):(U||Qa)(p[Ie]),de.push(ri);return de}function el(p,A){return void 0!==(p=_n(p)).alt?[Te(p.lng,A),Te(p.lat,A),Te(p.alt,A)]:[Te(p.lng,A),Te(p.lat,A)]}function ta(p,A,U,de){for(var Ie=[],lt=0,ri=p.length;lt<ri;lt++)Ie.push(A?ta(p[lt],Jr(p[lt])?0:A-1,U,de):el(p[lt],de));return!A&&U&&Ie.length>0&&Ie.push(Ie[0].slice()),Ie}function bo(p,A){return p.feature?Mi({},p.feature,{geometry:A}):Fa(A)}function Fa(p){return"Feature"===p.type||"FeatureCollection"===p.type?p:{type:"Feature",properties:{},geometry:p}}var Ya={toGeoJSON:function(p){return bo(this,{type:"Point",coordinates:el(this.getLatLng(),p)})}};function fl(p,A){return new Wo(p,A)}Uo.include(Ya),Ja.include(Ya),ga.include(Ya),yo.include({toGeoJSON:function(p){var A=!Jr(this._latlngs);return bo(this,{type:(A?"Multi":"")+"LineString",coordinates:ta(this._latlngs,A?1:0,!1,p)})}}),So.include({toGeoJSON:function(p){var A=!Jr(this._latlngs),U=A&&!Jr(this._latlngs[0]),de=ta(this._latlngs,U?2:A?1:0,!0,p);return A||(de=[de]),bo(this,{type:(U?"Multi":"")+"Polygon",coordinates:de})}}),jo.include({toMultiPoint:function(p){var A=[];return this.eachLayer(function(U){A.push(U.toGeoJSON(p).geometry.coordinates)}),bo(this,{type:"MultiPoint",coordinates:A})},toGeoJSON:function(p){var A=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===A)return this.toMultiPoint(p);var U="GeometryCollection"===A,de=[];return this.eachLayer(function(Ie){if(Ie.toGeoJSON){var lt=Ie.toGeoJSON(p);if(U)de.push(lt.geometry);else{var ri=Fa(lt);"FeatureCollection"===ri.type?de.push.apply(de,ri.features):de.push(ri)}}}),U?bo(this,{geometries:de,type:"GeometryCollection"}):{type:"FeatureCollection",features:de}}});var Il=fl,ia=Ss.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(p,A,U){this._url=p,this._bounds=di(A),ut(this,U)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ce(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Q(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(p){return this.options.opacity=p,this._image&&this._updateOpacity(),this},setStyle:function(p){return p.opacity&&this.setOpacity(p.opacity),this},bringToFront:function(){return this._map&&me(this._image),this},bringToBack:function(){return this._map&&Ee(this._image),this},setUrl:function(p){return this._url=p,this._image&&(this._image.src=p),this},setBounds:function(p){return this._bounds=di(p),this._map&&this._reset(),this},getEvents:function(){var p={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var p="IMG"===this._url.tagName,A=this._image=p?this._url:X("img");Ce(A,"leaflet-image-layer"),this._zoomAnimated&&Ce(A,"leaflet-zoom-animated"),this.options.className&&Ce(A,this.options.className),A.onselectstart=Le,A.onmousemove=Le,A.onload=c(this.fire,this,"load"),A.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(A.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),p?this._url=A.src:(A.src=this._url,A.alt=this.options.alt)},_animateZoom:function(p){var A=this._map.getZoomScale(p.zoom),U=this._map._latLngBoundsToNewLayerBounds(this._bounds,p.zoom,p.center).min;Fe(this._image,U,A)},_reset:function(){var p=this._image,A=new ji(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),U=A.getSize();ht(p,A.min),p.style.width=U.x+"px",p.style.height=U.y+"px"},_updateOpacity:function(){te(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var p=this.options.errorOverlayUrl;p&&this._url!==p&&(this._url=p,this._image.src=p)},getCenter:function(){return this._bounds.getCenter()}}),ml=ia.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var p="VIDEO"===this._url.tagName,A=this._image=p?this._url:X("video");if(Ce(A,"leaflet-image-layer"),this._zoomAnimated&&Ce(A,"leaflet-zoom-animated"),this.options.className&&Ce(A,this.options.className),A.onselectstart=Le,A.onmousemove=Le,A.onloadeddata=c(this.fire,this,"load"),p){for(var U=A.getElementsByTagName("source"),de=[],Ie=0;Ie<U.length;Ie++)de.push(U[Ie].src);this._url=U.length>0?de:[A.src]}else{ct(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(A.style,"objectFit")&&(A.style.objectFit="fill"),A.autoplay=!!this.options.autoplay,A.loop=!!this.options.loop,A.muted=!!this.options.muted,A.playsInline=!!this.options.playsInline;for(var lt=0;lt<this._url.length;lt++){var ri=X("source");ri.src=this._url[lt],A.appendChild(ri)}}}});var Zl=ia.extend({_initImage:function(){var p=this._image=this._url;Ce(p,"leaflet-image-layer"),this._zoomAnimated&&Ce(p,"leaflet-zoom-animated"),this.options.className&&Ce(p,this.options.className),p.onselectstart=Le,p.onmousemove=Le}});var Is=Ss.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(p,A){p&&(p instanceof Wi||ct(p))?(this._latlng=_n(p),ut(this,A)):(ut(this,p),this._source=A),this.options.content&&(this._content=this.options.content)},openOn:function(p){return(p=arguments.length?p:this._source._map).hasLayer(this)||p.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(p){return this._map?this.close():(arguments.length?this._source=p:p=this._source,this._prepareOpen(),this.openOn(p._map)),this},onAdd:function(p){this._zoomAnimated=p._zoomAnimated,this._container||this._initLayout(),p._fadeAnimated&&te(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),p._fadeAnimated&&te(this._container,1),this.bringToFront(),this.options.interactive&&(Ce(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(p){p._fadeAnimated?(te(this._container,0),this._removeTimeout=setTimeout(c(Q,void 0,this._container),200)):Q(this._container),this.options.interactive&&(Re(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(p){return this._latlng=_n(p),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(p){return this._content=p,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var p={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&me(this._container),this},bringToBack:function(){return this._map&&Ee(this._container),this},_prepareOpen:function(p){var A=this._source;if(!A._map)return!1;if(A instanceof to){A=null;var U=this._source._layers;for(var de in U)if(U[de]._map){A=U[de];break}if(!A)return!1;this._source=A}if(!p)if(A.getCenter)p=A.getCenter();else if(A.getLatLng)p=A.getLatLng();else{if(!A.getBounds)throw new Error("Unable to get source layer LatLng.");p=A.getBounds().getCenter()}return this.setLatLng(p),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var p=this._contentNode,A="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof A)p.innerHTML=A;else{for(;p.hasChildNodes();)p.removeChild(p.firstChild);p.appendChild(A)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var p=this._map.latLngToLayerPoint(this._latlng),A=pn(this.options.offset),U=this._getAnchor();this._zoomAnimated?ht(this._container,p.add(U)):A=A.add(p).add(U);var de=this._containerBottom=-A.y,Ie=this._containerLeft=-Math.round(this._containerWidth/2)+A.x;this._container.style.bottom=de+"px",this._container.style.left=Ie+"px"}},_getAnchor:function(){return[0,0]}});wr.include({_initOverlay:function(p,A,U,de){var Ie=A;return Ie instanceof p||(Ie=new p(de).setContent(A)),U&&Ie.setLatLng(U),Ie}}),Ss.include({_initOverlay:function(p,A,U,de){var Ie=U;return Ie instanceof p?(ut(Ie,de),Ie._source=this):(Ie=A&&!de?A:new p(de,this)).setContent(U),Ie}});var xo=Is.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(p){return!(p=arguments.length?p:this._source._map).hasLayer(this)&&p._popup&&p._popup.options.autoClose&&p.removeLayer(p._popup),p._popup=this,Is.prototype.openOn.call(this,p)},onAdd:function(p){Is.prototype.onAdd.call(this,p),p.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ks||this._source.on("preclick",Co))},onRemove:function(p){Is.prototype.onRemove.call(this,p),p.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ks||this._source.off("preclick",Co))},getEvents:function(){var p=Is.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(p.preclick=this.close),this.options.keepInView&&(p.moveend=this._adjustPan),p},_initLayout:function(){var p="leaflet-popup",A=this._container=X("div",p+" "+(this.options.className||"")+" leaflet-zoom-animated"),U=this._wrapper=X("div",p+"-content-wrapper",A);if(this._contentNode=X("div",p+"-content",U),oo(A),cl(this._contentNode),cr(A,"contextmenu",Co),this._tipContainer=X("div",p+"-tip-container",A),this._tip=X("div",p+"-tip",this._tipContainer),this.options.closeButton){var de=this._closeButton=X("a",p+"-close-button",A);de.setAttribute("role","button"),de.setAttribute("aria-label","Close popup"),de.href="#close",de.innerHTML='<span aria-hidden="true">&#215;</span>',cr(de,"click",function(Ie){or(Ie),this.close()},this)}},_updateLayout:function(){var p=this._contentNode,A=p.style;A.width="",A.whiteSpace="nowrap";var U=p.offsetWidth;U=Math.min(U,this.options.maxWidth),U=Math.max(U,this.options.minWidth),A.width=U+1+"px",A.whiteSpace="",A.height="";var Ie=this.options.maxHeight,lt="leaflet-popup-scrolled";Ie&&p.offsetHeight>Ie?(A.height=Ie+"px",Ce(p,lt)):Re(p,lt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(p){var A=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center),U=this._getAnchor();ht(this._container,A.add(U))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var p=this._map,A=parseInt(W(this._container,"marginBottom"),10)||0,U=this._container.offsetHeight+A,de=this._containerWidth,Ie=new ki(this._containerLeft,-U-this._containerBottom);Ie._add(yt(this._container));var lt=p.layerPointToContainerPoint(Ie),ri=pn(this.options.autoPanPadding),Si=pn(this.options.autoPanPaddingTopLeft||ri),Vi=pn(this.options.autoPanPaddingBottomRight||ri),xn=p.getSize(),$n=0,Un=0;lt.x+de+Vi.x>xn.x&&($n=lt.x+de-xn.x+Vi.x),lt.x-$n-Si.x<0&&($n=lt.x-Si.x),lt.y+U+Vi.y>xn.y&&(Un=lt.y+U-xn.y+Vi.y),lt.y-Un-Si.y<0&&(Un=lt.y-Si.y),($n||Un)&&(this.options.keepInView&&(this._autopanning=!0),p.fire("autopanstart").panBy([$n,Un]))}},_getAnchor:function(){return pn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});wr.mergeOptions({closePopupOnClick:!0}),wr.include({openPopup:function(p,A,U){return this._initOverlay(xo,p,A,U).openOn(this),this},closePopup:function(p){return(p=arguments.length?p:this._popup)&&p.close(),this}}),Ss.include({bindPopup:function(p,A){return this._popup=this._initOverlay(xo,this._popup,p,A),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(p){return this._popup&&(this instanceof to||(this._popup._source=this),this._popup._prepareOpen(p||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(p){return this._popup&&this._popup.setContent(p),this},getPopup:function(){return this._popup},_openPopup:function(p){if(this._popup&&this._map){Fs(p);var A=p.layer||p.target;if(this._popup._source===A&&!(A instanceof ks))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(p.latlng));this._popup._source=A,this.openPopup(p.latlng)}},_movePopup:function(p){this._popup.setLatLng(p.latlng)},_onKeyPress:function(p){13===p.originalEvent.keyCode&&this._openPopup(p)}});var gl=Is.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(p){Is.prototype.onAdd.call(this,p),this.setOpacity(this.options.opacity),p.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(p){Is.prototype.onRemove.call(this,p),p.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var p=Is.prototype.getEvents.call(this);return this.options.permanent||(p.preclick=this.close),p},_initLayout:function(){this._contentNode=this._container=X("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+Be(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(p){var A,U,de=this._map,Ie=this._container,lt=de.latLngToContainerPoint(de.getCenter()),ri=de.layerPointToContainerPoint(p),Si=this.options.direction,Vi=Ie.offsetWidth,xn=Ie.offsetHeight,$n=pn(this.options.offset),Un=this._getAnchor();"top"===Si?(A=Vi/2,U=xn):"bottom"===Si?(A=Vi/2,U=0):"center"===Si?(A=Vi/2,U=xn/2):"right"===Si?(A=0,U=xn/2):"left"===Si?(A=Vi,U=xn/2):ri.x<lt.x?(Si="right",A=0,U=xn/2):(Si="left",A=Vi+2*($n.x+Un.x),U=xn/2),p=p.subtract(pn(A,U,!0)).add($n).add(Un),Re(Ie,"leaflet-tooltip-right"),Re(Ie,"leaflet-tooltip-left"),Re(Ie,"leaflet-tooltip-top"),Re(Ie,"leaflet-tooltip-bottom"),Ce(Ie,"leaflet-tooltip-"+Si),ht(Ie,p)},_updatePosition:function(){var p=this._map.latLngToLayerPoint(this._latlng);this._setPosition(p)},setOpacity:function(p){this.options.opacity=p,this._container&&te(this._container,p)},_animateZoom:function(p){var A=this._map._latLngToNewLayerPoint(this._latlng,p.zoom,p.center);this._setPosition(A)},_getAnchor:function(){return pn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});wr.include({openTooltip:function(p,A,U){return this._initOverlay(gl,p,A,U).openOn(this),this},closeTooltip:function(p){return p.close(),this}}),Ss.include({bindTooltip:function(p,A){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gl,this._tooltip,p,A),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(p){if(p||!this._tooltipHandlersAdded){var A=p?"off":"on",U={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?U.add=this._openTooltip:(U.mouseover=this._openTooltip,U.mouseout=this.closeTooltip,U.click=this._openTooltip,this._map?this._addFocusListeners():U.add=this._addFocusListeners),this._tooltip.options.sticky&&(U.mousemove=this._moveTooltip),this[A](U),this._tooltipHandlersAdded=!p}},openTooltip:function(p){return this._tooltip&&(this instanceof to||(this._tooltip._source=this),this._tooltip._prepareOpen(p)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(p){return this._tooltip&&this._tooltip.setContent(p),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(p){var A="function"==typeof p.getElement&&p.getElement();A&&(cr(A,"focus",function(){this._tooltip._source=p,this.openTooltip()},this),cr(A,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(p){var A="function"==typeof p.getElement&&p.getElement();A&&A.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(p){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var A=this;return void this._map.once("moveend",function(){A._openOnceFlag=!1,A._openTooltip(p)})}this._tooltip._source=p.layer||p.target,this.openTooltip(this._tooltip.options.sticky?p.latlng:void 0)}},_moveTooltip:function(p){var U,de,A=p.latlng;this._tooltip.options.sticky&&p.originalEvent&&(U=this._map.mouseEventToContainerPoint(p.originalEvent),de=this._map.containerPointToLayerPoint(U),A=this._map.layerPointToLatLng(de)),this._tooltip.setLatLng(A)}});var As=ea.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(p){var A=p&&"DIV"===p.tagName?p:document.createElement("div"),U=this.options;if(U.html instanceof Element?(ce(A),A.appendChild(U.html)):A.innerHTML=!1!==U.html?U.html:"",U.bgPos){var de=pn(U.bgPos);A.style.backgroundPosition=-de.x+"px "+-de.y+"px"}return this._setIconStyles(A,"icon"),A},createShadow:function(){return null}});ea.Default=Pa;var rs=Ss.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ot.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(p){ut(this,p)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(p){p._addZoomLimit(this)},onRemove:function(p){this._removeAllTiles(),Q(this._container),p._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ee(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(p){return this.options.opacity=p,this._updateOpacity(),this},setZIndex:function(p){return this.options.zIndex=p,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var p=this._clampZoom(this._map.getZoom());p!==this._tileZoom&&(this._tileZoom=p,this._updateLevels()),this._update()}return this},getEvents:function(){var p={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=we(this._onMoveEnd,this.options.updateInterval,this)),p.move=this._onMove),this._zoomAnimated&&(p.zoomanim=this._animateZoom),p},createTile:function(){return document.createElement("div")},getTileSize:function(){var p=this.options.tileSize;return p instanceof ki?p:new ki(p,p)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(p){for(var lt,A=this.getPane().children,U=-p(-1/0,1/0),de=0,Ie=A.length;de<Ie;de++)lt=A[de].style.zIndex,A[de]!==this._container&&lt&&(U=p(U,+lt));isFinite(U)&&(this.options.zIndex=U+p(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ot.ielt9){te(this._container,this.options.opacity);var p=+new Date,A=!1,U=!1;for(var de in this._tiles){var Ie=this._tiles[de];if(Ie.current&&Ie.loaded){var lt=Math.min(1,(p-Ie.loaded)/200);te(Ie.el,lt),lt<1?A=!0:(Ie.active?U=!0:this._onOpaqueTile(Ie),Ie.active=!0)}}U&&!this._noPrune&&this._pruneTiles(),A&&(St(this._fadeFrame),this._fadeFrame=ti(this._updateOpacity,this))}},_onOpaqueTile:Le,_initContainer:function(){this._container||(this._container=X("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var p=this._tileZoom,A=this.options.maxZoom;if(void 0!==p){for(var U in this._levels)U=Number(U),this._levels[U].el.children.length||U===p?(this._levels[U].el.style.zIndex=A-Math.abs(p-U),this._onUpdateLevel(U)):(Q(this._levels[U].el),this._removeTilesAtZoom(U),this._onRemoveLevel(U),delete this._levels[U]);var de=this._levels[p],Ie=this._map;return de||((de=this._levels[p]={}).el=X("div","leaflet-tile-container leaflet-zoom-animated",this._container),de.el.style.zIndex=A,de.origin=Ie.project(Ie.unproject(Ie.getPixelOrigin()),p).round(),de.zoom=p,this._setZoomTransform(de,Ie.getCenter(),Ie.getZoom()),this._onCreateLevel(de)),this._level=de,de}},_onUpdateLevel:Le,_onRemoveLevel:Le,_onCreateLevel:Le,_pruneTiles:function(){if(this._map){var p,A,U=this._map.getZoom();if(U>this.options.maxZoom||U<this.options.minZoom)return void this._removeAllTiles();for(p in this._tiles)(A=this._tiles[p]).retain=A.current;for(p in this._tiles)if((A=this._tiles[p]).current&&!A.active){var de=A.coords;this._retainParent(de.x,de.y,de.z,de.z-5)||this._retainChildren(de.x,de.y,de.z,de.z+2)}for(p in this._tiles)this._tiles[p].retain||this._removeTile(p)}},_removeTilesAtZoom:function(p){for(var A in this._tiles)this._tiles[A].coords.z===p&&this._removeTile(A)},_removeAllTiles:function(){for(var p in this._tiles)this._removeTile(p)},_invalidateAll:function(){for(var p in this._levels)Q(this._levels[p].el),this._onRemoveLevel(Number(p)),delete this._levels[p];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(p,A,U,de){var Ie=Math.floor(p/2),lt=Math.floor(A/2),ri=U-1,Si=new ki(+Ie,+lt);Si.z=+ri;var Vi=this._tileCoordsToKey(Si),xn=this._tiles[Vi];return xn&&xn.active?(xn.retain=!0,!0):(xn&&xn.loaded&&(xn.retain=!0),ri>de&&this._retainParent(Ie,lt,ri,de))},_retainChildren:function(p,A,U,de){for(var Ie=2*p;Ie<2*p+2;Ie++)for(var lt=2*A;lt<2*A+2;lt++){var ri=new ki(Ie,lt);ri.z=U+1;var Si=this._tileCoordsToKey(ri),Vi=this._tiles[Si];Vi&&Vi.active?Vi.retain=!0:(Vi&&Vi.loaded&&(Vi.retain=!0),U+1<de&&this._retainChildren(Ie,lt,U+1,de))}},_resetView:function(p){var A=p&&(p.pinch||p.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),A,A)},_animateZoom:function(p){this._setView(p.center,p.zoom,!0,p.noUpdate)},_clampZoom:function(p){var A=this.options;return void 0!==A.minNativeZoom&&p<A.minNativeZoom?A.minNativeZoom:void 0!==A.maxNativeZoom&&A.maxNativeZoom<p?A.maxNativeZoom:p},_setView:function(p,A,U,de){var Ie=Math.round(A);Ie=void 0!==this.options.maxZoom&&Ie>this.options.maxZoom||void 0!==this.options.minZoom&&Ie<this.options.minZoom?void 0:this._clampZoom(Ie),(!de||this.options.updateWhenZooming&&Ie!==this._tileZoom)&&(this._tileZoom=Ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==Ie&&this._update(p),U||this._pruneTiles(),this._noPrune=!!U),this._setZoomTransforms(p,A)},_setZoomTransforms:function(p,A){for(var U in this._levels)this._setZoomTransform(this._levels[U],p,A)},_setZoomTransform:function(p,A,U){var de=this._map.getZoomScale(U,p.zoom),Ie=p.origin.multiplyBy(de).subtract(this._map._getNewPixelOrigin(A,U)).round();ot.any3d?Fe(p.el,Ie,de):ht(p.el,Ie)},_resetGrid:function(){var p=this._map,A=p.options.crs,U=this._tileSize=this.getTileSize(),de=this._tileZoom,Ie=this._map.getPixelWorldBounds(this._tileZoom);Ie&&(this._globalTileRange=this._pxBoundsToTileRange(Ie)),this._wrapX=A.wrapLng&&!this.options.noWrap&&[Math.floor(p.project([0,A.wrapLng[0]],de).x/U.x),Math.ceil(p.project([0,A.wrapLng[1]],de).x/U.y)],this._wrapY=A.wrapLat&&!this.options.noWrap&&[Math.floor(p.project([A.wrapLat[0],0],de).y/U.x),Math.ceil(p.project([A.wrapLat[1],0],de).y/U.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(p){var A=this._map,U=A._animatingZoom?Math.max(A._animateToZoom,A.getZoom()):A.getZoom(),de=A.getZoomScale(U,this._tileZoom),Ie=A.project(p,this._tileZoom).floor(),lt=A.getSize().divideBy(2*de);return new ji(Ie.subtract(lt),Ie.add(lt))},_update:function(p){var A=this._map;if(A){var U=this._clampZoom(A.getZoom());if(void 0===p&&(p=A.getCenter()),void 0!==this._tileZoom){var de=this._getTiledPixelBounds(p),Ie=this._pxBoundsToTileRange(de),lt=Ie.getCenter(),ri=[],Si=this.options.keepBuffer,Vi=new ji(Ie.getBottomLeft().subtract([Si,-Si]),Ie.getTopRight().add([Si,-Si]));if(!(isFinite(Ie.min.x)&&isFinite(Ie.min.y)&&isFinite(Ie.max.x)&&isFinite(Ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var xn in this._tiles){var $n=this._tiles[xn].coords;($n.z!==this._tileZoom||!Vi.contains(new ki($n.x,$n.y)))&&(this._tiles[xn].current=!1)}if(Math.abs(U-this._tileZoom)>1)return void this._setView(p,U);for(var Un=Ie.min.y;Un<=Ie.max.y;Un++)for(var Ir=Ie.min.x;Ir<=Ie.max.x;Ir++){var Lr=new ki(Ir,Un);if(Lr.z=this._tileZoom,this._isValidTile(Lr)){var _s=this._tiles[this._tileCoordsToKey(Lr)];_s?_s.current=!0:ri.push(Lr)}}if(ri.sort(function(Gs,To){return Gs.distanceTo(lt)-To.distanceTo(lt)}),0!==ri.length){this._loading||(this._loading=!0,this.fire("loading"));var Os=document.createDocumentFragment();for(Ir=0;Ir<ri.length;Ir++)this._addTile(ri[Ir],Os);this._level.el.appendChild(Os)}}}},_isValidTile:function(p){var A=this._map.options.crs;if(!A.infinite){var U=this._globalTileRange;if(!A.wrapLng&&(p.x<U.min.x||p.x>U.max.x)||!A.wrapLat&&(p.y<U.min.y||p.y>U.max.y))return!1}if(!this.options.bounds)return!0;var de=this._tileCoordsToBounds(p);return di(this.options.bounds).overlaps(de)},_keyToBounds:function(p){return this._tileCoordsToBounds(this._keyToTileCoords(p))},_tileCoordsToNwSe:function(p){var A=this._map,U=this.getTileSize(),de=p.scaleBy(U),Ie=de.add(U);return[A.unproject(de,p.z),A.unproject(Ie,p.z)]},_tileCoordsToBounds:function(p){var A=this._tileCoordsToNwSe(p),U=new tn(A[0],A[1]);return this.options.noWrap||(U=this._map.wrapLatLngBounds(U)),U},_tileCoordsToKey:function(p){return p.x+":"+p.y+":"+p.z},_keyToTileCoords:function(p){var A=p.split(":"),U=new ki(+A[0],+A[1]);return U.z=+A[2],U},_removeTile:function(p){var A=this._tiles[p];A&&(Q(A.el),delete this._tiles[p],this.fire("tileunload",{tile:A.el,coords:this._keyToTileCoords(p)}))},_initTile:function(p){Ce(p,"leaflet-tile");var A=this.getTileSize();p.style.width=A.x+"px",p.style.height=A.y+"px",p.onselectstart=Le,p.onmousemove=Le,ot.ielt9&&this.options.opacity<1&&te(p,this.options.opacity)},_addTile:function(p,A){var U=this._getTilePos(p),de=this._tileCoordsToKey(p),Ie=this.createTile(this._wrapCoords(p),c(this._tileReady,this,p));this._initTile(Ie),this.createTile.length<2&&ti(c(this._tileReady,this,p,null,Ie)),ht(Ie,U),this._tiles[de]={el:Ie,coords:p,current:!0},A.appendChild(Ie),this.fire("tileloadstart",{tile:Ie,coords:p})},_tileReady:function(p,A,U){A&&this.fire("tileerror",{error:A,tile:U,coords:p});var de=this._tileCoordsToKey(p);(U=this._tiles[de])&&(U.loaded=+new Date,this._map._fadeAnimated?(te(U.el,0),St(this._fadeFrame),this._fadeFrame=ti(this._updateOpacity,this)):(U.active=!0,this._pruneTiles()),A||(Ce(U.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:U.el,coords:p})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ot.ielt9||!this._map._fadeAnimated?ti(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(p){return p.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(p){var A=new ki(this._wrapX?Se(p.x,this._wrapX):p.x,this._wrapY?Se(p.y,this._wrapY):p.y);return A.z=p.z,A},_pxBoundsToTileRange:function(p){var A=this.getTileSize();return new ji(p.min.unscaleBy(A).floor(),p.max.unscaleBy(A).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var p in this._tiles)if(!this._tiles[p].loaded)return!1;return!0}});var Ga=rs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(p,A){this._url=p,(A=ut(this,A)).detectRetina&&ot.retina&&A.maxZoom>0?(A.tileSize=Math.floor(A.tileSize/2),A.zoomReverse?(A.zoomOffset--,A.minZoom=Math.min(A.maxZoom,A.minZoom+1)):(A.zoomOffset++,A.maxZoom=Math.max(A.minZoom,A.maxZoom-1)),A.minZoom=Math.max(0,A.minZoom)):A.zoomReverse?A.minZoom=Math.min(A.maxZoom,A.minZoom):A.maxZoom=Math.max(A.minZoom,A.maxZoom),"string"==typeof A.subdomains&&(A.subdomains=A.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(p,A){return this._url===p&&void 0===A&&(A=!0),this._url=p,A||this.redraw(),this},createTile:function(p,A){var U=document.createElement("img");return cr(U,"load",c(this._tileOnLoad,this,A,U)),cr(U,"error",c(this._tileOnError,this,A,U)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(U.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(U.referrerPolicy=this.options.referrerPolicy),U.alt="",U.src=this.getTileUrl(p),U},getTileUrl:function(p){var A={r:ot.retina?"@2x":"",s:this._getSubdomain(p),x:p.x,y:p.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var U=this._globalTileRange.max.y-p.y;this.options.tms&&(A.y=U),A["-y"]=U}return ze(this._url,Mi(A,this.options))},_tileOnLoad:function(p,A){ot.ielt9?setTimeout(c(p,this,null,A),0):p(null,A)},_tileOnError:function(p,A,U){var de=this.options.errorTileUrl;de&&A.getAttribute("src")!==de&&(A.src=de),p(U,A)},_onTileRemove:function(p){p.tile.onload=null},_getZoomForUrl:function(){var p=this._tileZoom;return this.options.zoomReverse&&(p=this.options.maxZoom-p),p+this.options.zoomOffset},_getSubdomain:function(p){var A=Math.abs(p.x+p.y)%this.options.subdomains.length;return this.options.subdomains[A]},_abortLoading:function(){var p,A;for(p in this._tiles)if(this._tiles[p].coords.z!==this._tileZoom&&((A=this._tiles[p].el).onload=Le,A.onerror=Le,!A.complete)){A.src=Je;var U=this._tiles[p].coords;Q(A),delete this._tiles[p],this.fire("tileabort",{tile:A,coords:U})}},_removeTile:function(p){var A=this._tiles[p];if(A)return A.el.setAttribute("src",Je),rs.prototype._removeTile.call(this,p)},_tileReady:function(p,A,U){if(this._map&&(!U||U.getAttribute("src")!==Je))return rs.prototype._tileReady.call(this,p,A,U)}});function Na(p,A){return new Ga(p,A)}var qs=Ga.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(p,A){this._url=p;var U=Mi({},this.defaultWmsParams);for(var de in A)de in this.options||(U[de]=A[de]);var Ie=(A=ut(this,A)).detectRetina&&ot.retina?2:1,lt=this.getTileSize();U.width=lt.x*Ie,U.height=lt.y*Ie,this.wmsParams=U},onAdd:function(p){this._crs=this.options.crs||p.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Ga.prototype.onAdd.call(this,p)},getTileUrl:function(p){var A=this._tileCoordsToNwSe(p),U=this._crs,de=gn(U.project(A[0]),U.project(A[1])),Ie=de.min,lt=de.max,ri=(this._wmsVersion>=1.3&&this._crs===Es?[Ie.y,Ie.x,lt.y,lt.x]:[Ie.x,Ie.y,lt.x,lt.y]).join(","),Si=Ga.prototype.getTileUrl.call(this,p);return Si+vt(this.wmsParams,Si,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ri},setParams:function(p,A){return Mi(this.wmsParams,p),A||this.redraw(),this}});Ga.WMS=qs,Na.wms=function qo(p,A){return new qs(p,A)};var ko=Ss.extend({options:{padding:.1},initialize:function(p){ut(this,p),Be(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ce(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var p={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(p.zoomanim=this._onAnimZoom),p},_onAnimZoom:function(p){this._updateTransform(p.center,p.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(p,A){var U=this._map.getZoomScale(A,this._zoom),de=this._map.getSize().multiplyBy(.5+this.options.padding),Ie=this._map.project(this._center,A),lt=de.multiplyBy(-U).add(Ie).subtract(this._map._getNewPixelOrigin(p,A));ot.any3d?Fe(this._container,lt,U):ht(this._container,lt)},_reset:function(){for(var p in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[p]._reset()},_onZoomEnd:function(){for(var p in this._layers)this._layers[p]._project()},_updatePaths:function(){for(var p in this._layers)this._layers[p]._update()},_update:function(){var p=this.options.padding,A=this._map.getSize(),U=this._map.containerPointToLayerPoint(A.multiplyBy(-p)).round();this._bounds=new ji(U,U.add(A.multiplyBy(1+2*p)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gr=ko.extend({options:{tolerance:0},getEvents:function(){var p=ko.prototype.getEvents.call(this);return p.viewprereset=this._onViewPreReset,p},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ko.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var p=this._container=document.createElement("canvas");cr(p,"mousemove",this._onMouseMove,this),cr(p,"click dblclick mousedown mouseup contextmenu",this._onClick,this),cr(p,"mouseout",this._handleMouseOut,this),p._leaflet_disable_events=!0,this._ctx=p.getContext("2d")},_destroyContainer:function(){St(this._redrawRequest),delete this._ctx,Q(this._container),ir(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var A in this._redrawBounds=null,this._layers)this._layers[A]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ko.prototype._update.call(this);var p=this._bounds,A=this._container,U=p.getSize(),de=ot.retina?2:1;ht(A,p.min),A.width=de*U.x,A.height=de*U.y,A.style.width=U.x+"px",A.style.height=U.y+"px",ot.retina&&this._ctx.scale(2,2),this._ctx.translate(-p.min.x,-p.min.y),this.fire("update")}},_reset:function(){ko.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(p){this._updateDashArray(p),this._layers[Be(p)]=p;var A=p._order={layer:p,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=A),this._drawLast=A,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(p){this._requestRedraw(p)},_removePath:function(p){var A=p._order,U=A.next,de=A.prev;U?U.prev=de:this._drawLast=de,de?de.next=U:this._drawFirst=U,delete p._order,delete this._layers[Be(p)],this._requestRedraw(p)},_updatePath:function(p){this._extendRedrawBounds(p),p._project(),p._update(),this._requestRedraw(p)},_updateStyle:function(p){this._updateDashArray(p),this._requestRedraw(p)},_updateDashArray:function(p){if("string"==typeof p.options.dashArray){var de,Ie,A=p.options.dashArray.split(/[, ]+/),U=[];for(Ie=0;Ie<A.length;Ie++){if(de=Number(A[Ie]),isNaN(de))return;U.push(de)}p.options._dashArray=U}else p.options._dashArray=p.options.dashArray},_requestRedraw:function(p){this._map&&(this._extendRedrawBounds(p),this._redrawRequest=this._redrawRequest||ti(this._redraw,this))},_extendRedrawBounds:function(p){if(p._pxBounds){var A=(p.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ji,this._redrawBounds.extend(p._pxBounds.min.subtract([A,A])),this._redrawBounds.extend(p._pxBounds.max.add([A,A]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var p=this._redrawBounds;if(p){var A=p.getSize();this._ctx.clearRect(p.min.x,p.min.y,A.x,A.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var p,A=this._redrawBounds;if(this._ctx.save(),A){var U=A.getSize();this._ctx.beginPath(),this._ctx.rect(A.min.x,A.min.y,U.x,U.y),this._ctx.clip()}this._drawing=!0;for(var de=this._drawFirst;de;de=de.next)p=de.layer,(!A||p._pxBounds&&p._pxBounds.intersects(A))&&p._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(p,A){if(this._drawing){var U,de,Ie,lt,ri=p._parts,Si=ri.length,Vi=this._ctx;if(Si){for(Vi.beginPath(),U=0;U<Si;U++){for(de=0,Ie=ri[U].length;de<Ie;de++)Vi[de?"lineTo":"moveTo"]((lt=ri[U][de]).x,lt.y);A&&Vi.closePath()}this._fillStroke(Vi,p)}}},_updateCircle:function(p){if(this._drawing&&!p._empty()){var A=p._point,U=this._ctx,de=Math.max(Math.round(p._radius),1),Ie=(Math.max(Math.round(p._radiusY),1)||de)/de;1!==Ie&&(U.save(),U.scale(1,Ie)),U.beginPath(),U.arc(A.x,A.y/Ie,de,0,2*Math.PI,!1),1!==Ie&&U.restore(),this._fillStroke(U,p)}},_fillStroke:function(p,A){var U=A.options;U.fill&&(p.globalAlpha=U.fillOpacity,p.fillStyle=U.fillColor||U.color,p.fill(U.fillRule||"evenodd")),U.stroke&&0!==U.weight&&(p.setLineDash&&p.setLineDash(A.options&&A.options._dashArray||[]),p.globalAlpha=U.opacity,p.lineWidth=U.weight,p.strokeStyle=U.color,p.lineCap=U.lineCap,p.lineJoin=U.lineJoin,p.stroke())},_onClick:function(p){for(var U,de,A=this._map.mouseEventToLayerPoint(p),Ie=this._drawFirst;Ie;Ie=Ie.next)(U=Ie.layer).options.interactive&&U._containsPoint(A)&&("click"!==p.type&&"preclick"!==p.type||!this._map._draggableMoved(U))&&(de=U);this._fireEvent(!!de&&[de],p)},_onMouseMove:function(p){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var A=this._map.mouseEventToLayerPoint(p);this._handleMouseHover(p,A)}},_handleMouseOut:function(p){var A=this._hoveredLayer;A&&(Re(this._container,"leaflet-interactive"),this._fireEvent([A],p,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(p,A){if(!this._mouseHoverThrottled){for(var U,de,Ie=this._drawFirst;Ie;Ie=Ie.next)(U=Ie.layer).options.interactive&&U._containsPoint(A)&&(de=U);de!==this._hoveredLayer&&(this._handleMouseOut(p),de&&(Ce(this._container,"leaflet-interactive"),this._fireEvent([de],p,"mouseover"),this._hoveredLayer=de)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],p),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(p,A,U){this._map._fireDOMEvent(A,U||A.type,p)},_bringToFront:function(p){var A=p._order;if(A){var U=A.next,de=A.prev;if(!U)return;U.prev=de,de?de.next=U:U&&(this._drawFirst=U),A.prev=this._drawLast,this._drawLast.next=A,A.next=null,this._drawLast=A,this._requestRedraw(p)}},_bringToBack:function(p){var A=p._order;if(A){var U=A.next,de=A.prev;if(!de)return;de.next=U,U?U.prev=de:de&&(this._drawLast=de),A.prev=null,A.next=this._drawFirst,this._drawFirst.prev=A,this._drawFirst=A,this._requestRedraw(p)}}});function _l(p){return ot.canvas?new Gr(p):null}var _a=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(p){return document.createElement("<lvml:"+p+' class="lvml">')}}catch{}return function(p){return document.createElement("<"+p+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),na={_initContainer:function(){this._container=X("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ko.prototype._update.call(this),this.fire("update"))},_initPath:function(p){var A=p._container=_a("shape");Ce(A,"leaflet-vml-shape "+(this.options.className||"")),A.coordsize="1 1",p._path=_a("path"),A.appendChild(p._path),this._updateStyle(p),this._layers[Be(p)]=p},_addPath:function(p){var A=p._container;this._container.appendChild(A),p.options.interactive&&p.addInteractiveTarget(A)},_removePath:function(p){var A=p._container;Q(A),p.removeInteractiveTarget(A),delete this._layers[Be(p)]},_updateStyle:function(p){var A=p._stroke,U=p._fill,de=p.options,Ie=p._container;Ie.stroked=!!de.stroke,Ie.filled=!!de.fill,de.stroke?(A||(A=p._stroke=_a("stroke")),Ie.appendChild(A),A.weight=de.weight+"px",A.color=de.color,A.opacity=de.opacity,A.dashStyle=de.dashArray?ct(de.dashArray)?de.dashArray.join(" "):de.dashArray.replace(/( *, *)/g," "):"",A.endcap=de.lineCap.replace("butt","flat"),A.joinstyle=de.lineJoin):A&&(Ie.removeChild(A),p._stroke=null),de.fill?(U||(U=p._fill=_a("fill")),Ie.appendChild(U),U.color=de.fillColor||de.color,U.opacity=de.fillOpacity):U&&(Ie.removeChild(U),p._fill=null)},_updateCircle:function(p){var A=p._point.round(),U=Math.round(p._radius),de=Math.round(p._radiusY||U);this._setPath(p,p._empty()?"M0 0":"AL "+A.x+","+A.y+" "+U+","+de+" 0,23592600")},_setPath:function(p,A){p._path.v=A},_bringToFront:function(p){me(p._container)},_bringToBack:function(p){Ee(p._container)}},ra=ot.vml?_a:$i,zo=ko.extend({_initContainer:function(){this._container=ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Q(this._container),ir(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ko.prototype._update.call(this);var p=this._bounds,A=p.getSize(),U=this._container;(!this._svgSize||!this._svgSize.equals(A))&&(this._svgSize=A,U.setAttribute("width",A.x),U.setAttribute("height",A.y)),ht(U,p.min),U.setAttribute("viewBox",[p.min.x,p.min.y,A.x,A.y].join(" ")),this.fire("update")}},_initPath:function(p){var A=p._path=ra("path");p.options.className&&Ce(A,p.options.className),p.options.interactive&&Ce(A,"leaflet-interactive"),this._updateStyle(p),this._layers[Be(p)]=p},_addPath:function(p){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(p._path),p.addInteractiveTarget(p._path)},_removePath:function(p){Q(p._path),p.removeInteractiveTarget(p._path),delete this._layers[Be(p)]},_updatePath:function(p){p._project(),p._update()},_updateStyle:function(p){var A=p._path,U=p.options;A&&(U.stroke?(A.setAttribute("stroke",U.color),A.setAttribute("stroke-opacity",U.opacity),A.setAttribute("stroke-width",U.weight),A.setAttribute("stroke-linecap",U.lineCap),A.setAttribute("stroke-linejoin",U.lineJoin),U.dashArray?A.setAttribute("stroke-dasharray",U.dashArray):A.removeAttribute("stroke-dasharray"),U.dashOffset?A.setAttribute("stroke-dashoffset",U.dashOffset):A.removeAttribute("stroke-dashoffset")):A.setAttribute("stroke","none"),U.fill?(A.setAttribute("fill",U.fillColor||U.color),A.setAttribute("fill-opacity",U.fillOpacity),A.setAttribute("fill-rule",U.fillRule||"evenodd")):A.setAttribute("fill","none"))},_updatePoly:function(p,A){this._setPath(p,en(p._parts,A))},_updateCircle:function(p){var A=p._point,U=Math.max(Math.round(p._radius),1),Ie="a"+U+","+(Math.max(Math.round(p._radiusY),1)||U)+" 0 1,0 ",lt=p._empty()?"M0 0":"M"+(A.x-U)+","+A.y+Ie+2*U+",0 "+Ie+2*-U+",0 ";this._setPath(p,lt)},_setPath:function(p,A){p._path.setAttribute("d",A)},_bringToFront:function(p){me(p._path)},_bringToBack:function(p){Ee(p._path)}});function vl(p){return ot.svg||ot.vml?new zo(p):null}ot.vml&&zo.include(na),wr.include({getRenderer:function(p){var A=p.options.renderer||this._getPaneRenderer(p.options.pane)||this.options.renderer||this._renderer;return A||(A=this._renderer=this._createRenderer()),this.hasLayer(A)||this.addLayer(A),A},_getPaneRenderer:function(p){if("overlayPane"===p||void 0===p)return!1;var A=this._paneRenderers[p];return void 0===A&&(A=this._createRenderer({pane:p}),this._paneRenderers[p]=A),A},_createRenderer:function(p){return this.options.preferCanvas&&_l(p)||vl(p)}});var sa=So.extend({initialize:function(p,A){So.prototype.initialize.call(this,this._boundsToLatLngs(p),A)},setBounds:function(p){return this.setLatLngs(this._boundsToLatLngs(p))},_boundsToLatLngs:function(p){return[(p=di(p)).getSouthWest(),p.getNorthWest(),p.getNorthEast(),p.getSouthEast()]}});zo.create=ra,zo.pointsToPath=en,Wo.geometryToLayer=za,Wo.coordsToLatLng=Qa,Wo.coordsToLatLngs=Ls,Wo.latLngToCoords=el,Wo.latLngsToCoords=ta,Wo.getFeature=bo,Wo.asFeature=Fa,wr.mergeOptions({boxZoom:!0});var Ol=as.extend({initialize:function(p){this._map=p,this._container=p._container,this._pane=p._panes.overlayPane,this._resetStateTimeout=0,p.on("unload",this._destroy,this)},addHooks:function(){cr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ir(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Q(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(p){if(!p.shiftKey||1!==p.which&&1!==p.button)return!1;this._clearDeferredResetState(),this._resetState(),ii(),nn(),this._startPoint=this._map.mouseEventToContainerPoint(p),cr(document,{contextmenu:Fs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(p){this._moved||(this._moved=!0,this._box=X("div","leaflet-zoom-box",this._container),Ce(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(p);var A=new ji(this._point,this._startPoint),U=A.getSize();ht(this._box,A.min),this._box.style.width=U.x+"px",this._box.style.height=U.y+"px"},_finish:function(){this._moved&&(Q(this._box),Re(this._container,"leaflet-crosshair")),hi(),Tn(),ir(document,{contextmenu:Fs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(p){if((1===p.which||1===p.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var A=new tn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(A).fire("boxzoomend",{boxZoomBounds:A})}},_onKeyDown:function(p){27===p.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});wr.addInitHook("addHandler","boxZoom",Ol),wr.mergeOptions({doubleClickZoom:!0});var oa=as.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(p){var A=this._map,U=A.getZoom(),de=A.options.zoomDelta,Ie=p.originalEvent.shiftKey?U-de:U+de;"center"===A.options.doubleClickZoom?A.setZoom(Ie):A.setZoomAround(p.containerPoint,Ie)}});wr.addInitHook("addHandler","doubleClickZoom",oa),wr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nl=as.extend({addHooks:function(){if(!this._draggable){var p=this._map;this._draggable=new Ws(p._mapPane,p._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),p.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),p.on("zoomend",this._onZoomEnd,this),p.whenReady(this._onZoomEnd,this))}Ce(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Re(this._map._container,"leaflet-grab"),Re(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var p=this._map;if(p._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var A=di(this._map.options.maxBounds);this._offsetLimit=gn(this._map.latLngToContainerPoint(A.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(A.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;p.fire("movestart").fire("dragstart"),p.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(p){if(this._map.options.inertia){var A=this._lastTime=+new Date,U=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(U),this._times.push(A),this._prunePositions(A)}this._map.fire("move",p).fire("drag",p)},_prunePositions:function(p){for(;this._positions.length>1&&p-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var p=this._map.getSize().divideBy(2),A=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=A.subtract(p).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(p,A){return p-(p-A)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var p=this._draggable._newPos.subtract(this._draggable._startPos),A=this._offsetLimit;p.x<A.min.x&&(p.x=this._viscousLimit(p.x,A.min.x)),p.y<A.min.y&&(p.y=this._viscousLimit(p.y,A.min.y)),p.x>A.max.x&&(p.x=this._viscousLimit(p.x,A.max.x)),p.y>A.max.y&&(p.y=this._viscousLimit(p.y,A.max.y)),this._draggable._newPos=this._draggable._startPos.add(p)}},_onPreDragWrap:function(){var p=this._worldWidth,A=Math.round(p/2),U=this._initialWorldOffset,de=this._draggable._newPos.x,Ie=(de-A+U)%p+A-U,lt=(de+A+U)%p-A-U,ri=Math.abs(Ie+U)<Math.abs(lt+U)?Ie:lt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ri},_onDragEnd:function(p){var A=this._map,U=A.options,de=!U.inertia||p.noInertia||this._times.length<2;if(A.fire("dragend",p),de)A.fire("moveend");else{this._prunePositions(+new Date);var Ie=this._lastPos.subtract(this._positions[0]),ri=U.easeLinearity,Si=Ie.multiplyBy(ri/((this._lastTime-this._times[0])/1e3)),Vi=Si.distanceTo([0,0]),xn=Math.min(U.inertiaMaxSpeed,Vi),$n=Si.multiplyBy(xn/Vi),Un=xn/(U.inertiaDeceleration*ri),Ir=$n.multiplyBy(-Un/2).round();Ir.x||Ir.y?(Ir=A._limitOffset(Ir,A.options.maxBounds),ti(function(){A.panBy(Ir,{duration:Un,easeLinearity:ri,noMoveStart:!0,animate:!0})})):A.fire("moveend")}}});wr.addInitHook("addHandler","dragging",nl),wr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Va=as.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(p){this._map=p,this._setPanDelta(p.options.keyboardPanDelta),this._setZoomDelta(p.options.zoomDelta)},addHooks:function(){var p=this._map._container;p.tabIndex<=0&&(p.tabIndex="0"),cr(p,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ir(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var p=document.body,A=document.documentElement,U=p.scrollTop||A.scrollTop,de=p.scrollLeft||A.scrollLeft;this._map._container.focus(),window.scrollTo(de,U)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(p){var de,Ie,A=this._panKeys={},U=this.keyCodes;for(de=0,Ie=U.left.length;de<Ie;de++)A[U.left[de]]=[-1*p,0];for(de=0,Ie=U.right.length;de<Ie;de++)A[U.right[de]]=[p,0];for(de=0,Ie=U.down.length;de<Ie;de++)A[U.down[de]]=[0,p];for(de=0,Ie=U.up.length;de<Ie;de++)A[U.up[de]]=[0,-1*p]},_setZoomDelta:function(p){var de,Ie,A=this._zoomKeys={},U=this.keyCodes;for(de=0,Ie=U.zoomIn.length;de<Ie;de++)A[U.zoomIn[de]]=p;for(de=0,Ie=U.zoomOut.length;de<Ie;de++)A[U.zoomOut[de]]=-p},_addHooks:function(){cr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ir(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(p){if(!(p.altKey||p.ctrlKey||p.metaKey)){var de,A=p.keyCode,U=this._map;if(A in this._panKeys){if(!U._panAnim||!U._panAnim._inProgress)if(de=this._panKeys[A],p.shiftKey&&(de=pn(de).multiplyBy(3)),U.options.maxBounds&&(de=U._limitOffset(pn(de),U.options.maxBounds)),U.options.worldCopyJump){var Ie=U.wrapLatLng(U.unproject(U.project(U.getCenter()).add(de)));U.panTo(Ie)}else U.panBy(de)}else if(A in this._zoomKeys)U.setZoom(U.getZoom()+(p.shiftKey?3:1)*this._zoomKeys[A]);else{if(27!==A||!U._popup||!U._popup.options.closeOnEscapeKey)return;U.closePopup()}Fs(p)}}});wr.addInitHook("addHandler","keyboard",Va),wr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $a=as.extend({addHooks:function(){cr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ir(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(p){var A=dl(p),U=this._map.options.wheelDebounceTime;this._delta+=A,this._lastMousePos=this._map.mouseEventToContainerPoint(p),this._startTime||(this._startTime=+new Date);var de=Math.max(U-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),de),Fs(p)},_performZoom:function(){var p=this._map,A=p.getZoom(),U=this._map.options.zoomSnap||0;p._stop();var Ie=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,lt=U?Math.ceil(Ie/U)*U:Ie,ri=p._limitZoom(A+(this._delta>0?lt:-lt))-A;this._delta=0,this._startTime=null,ri&&("center"===p.options.scrollWheelZoom?p.setZoom(A+ri):p.setZoomAround(this._lastMousePos,A+ri))}});wr.addInitHook("addHandler","scrollWheelZoom",$a);wr.mergeOptions({tapHold:ot.touchNative&&ot.safari&&ot.mobile,tapTolerance:15});var Bs=as.extend({addHooks:function(){cr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ir(this._map._container,"touchstart",this._onDown,this)},_onDown:function(p){if(clearTimeout(this._holdTimeout),1===p.touches.length){var A=p.touches[0];this._startPos=this._newPos=new ki(A.clientX,A.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(cr(document,"touchend",or),cr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",A))},this),600),cr(document,"touchend touchcancel contextmenu",this._cancel,this),cr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function p(){ir(document,"touchend",or),ir(document,"touchend touchcancel",p)},_cancel:function(){clearTimeout(this._holdTimeout),ir(document,"touchend touchcancel contextmenu",this._cancel,this),ir(document,"touchmove",this._onMove,this)},_onMove:function(p){var A=p.touches[0];this._newPos=new ki(A.clientX,A.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(p,A){var U=new MouseEvent(p,{bubbles:!0,cancelable:!0,view:window,screenX:A.screenX,screenY:A.screenY,clientX:A.clientX,clientY:A.clientY});U._simulated=!0,A.target.dispatchEvent(U)}});wr.addInitHook("addHandler","tapHold",Bs),wr.mergeOptions({touchZoom:ot.touch,bounceAtZoomLimits:!0});var cs=as.extend({addHooks:function(){Ce(this._map._container,"leaflet-touch-zoom"),cr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Re(this._map._container,"leaflet-touch-zoom"),ir(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(p){var A=this._map;if(p.touches&&2===p.touches.length&&!A._animatingZoom&&!this._zooming){var U=A.mouseEventToContainerPoint(p.touches[0]),de=A.mouseEventToContainerPoint(p.touches[1]);this._centerPoint=A.getSize()._divideBy(2),this._startLatLng=A.containerPointToLatLng(this._centerPoint),"center"!==A.options.touchZoom&&(this._pinchStartLatLng=A.containerPointToLatLng(U.add(de)._divideBy(2))),this._startDist=U.distanceTo(de),this._startZoom=A.getZoom(),this._moved=!1,this._zooming=!0,A._stop(),cr(document,"touchmove",this._onTouchMove,this),cr(document,"touchend touchcancel",this._onTouchEnd,this),or(p)}},_onTouchMove:function(p){if(p.touches&&2===p.touches.length&&this._zooming){var A=this._map,U=A.mouseEventToContainerPoint(p.touches[0]),de=A.mouseEventToContainerPoint(p.touches[1]),Ie=U.distanceTo(de)/this._startDist;if(this._zoom=A.getScaleZoom(Ie,this._startZoom),!A.options.bounceAtZoomLimits&&(this._zoom<A.getMinZoom()&&Ie<1||this._zoom>A.getMaxZoom()&&Ie>1)&&(this._zoom=A._limitZoom(this._zoom)),"center"===A.options.touchZoom){if(this._center=this._startLatLng,1===Ie)return}else{var lt=U._add(de)._divideBy(2)._subtract(this._centerPoint);if(1===Ie&&0===lt.x&&0===lt.y)return;this._center=A.unproject(A.project(this._pinchStartLatLng,this._zoom).subtract(lt),this._zoom)}this._moved||(A._moveStart(!0,!1),this._moved=!0),St(this._animRequest);var ri=c(A._move,A,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ti(ri,this,!0),or(p)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,St(this._animRequest),ir(document,"touchmove",this._onTouchMove,this),ir(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});wr.addInitHook("addHandler","touchZoom",cs),wr.BoxZoom=Ol,wr.DoubleClickZoom=oa,wr.Drag=nl,wr.Keyboard=Va,wr.ScrollWheelZoom=$a,wr.TapHold=Bs,wr.TouchZoom=cs,Et.Bounds=ji,Et.Browser=ot,Et.CRS=Ln,Et.Canvas=Gr,Et.Circle=Ja,Et.CircleMarker=ga,Et.Class=vi,Et.Control=Us,Et.DivIcon=As,Et.DivOverlay=Is,Et.DomEvent=Wl,Et.DomUtil=Or,Et.Draggable=Ws,Et.Evented=Ii,Et.FeatureGroup=to,Et.GeoJSON=Wo,Et.GridLayer=rs,Et.Handler=as,Et.Icon=ea,Et.ImageOverlay=ia,Et.LatLng=Wi,Et.LatLngBounds=tn,Et.Layer=Ss,Et.LayerGroup=jo,Et.LineUtil=Qo,Et.Map=wr,Et.Marker=Uo,Et.Mixin=Mr,Et.Path=ks,Et.Point=ki,Et.PolyUtil=is,Et.Polygon=So,Et.Polyline=yo,Et.Popup=xo,Et.PosAnimation=Xa,Et.Projection=gs,Et.Rectangle=sa,Et.Renderer=ko,Et.SVG=zo,Et.SVGOverlay=Zl,Et.TileLayer=Ga,Et.Tooltip=gl,Et.Transformation=jt,Et.Util=pi,Et.VideoOverlay=ml,Et.bind=c,Et.bounds=gn,Et.canvas=_l,Et.circle=function pl(p,A,U){return new Ja(p,A,U)},Et.circleMarker=function vo(p,A){return new ga(p,A)},Et.control=Ds,Et.divIcon=function Ba(p){return new As(p)},Et.extend=Mi,Et.featureGroup=function(p,A){return new to(p,A)},Et.geoJSON=fl,Et.geoJson=Il,Et.gridLayer=function uo(p){return new rs(p)},Et.icon=function La(p){return new ea(p)},Et.imageOverlay=function(p,A,U){return new ia(p,A,U)},Et.latLng=_n,Et.latLngBounds=di,Et.layerGroup=function(p,A){return new jo(p,A)},Et.map=function Pl(p,A){return new wr(p,A)},Et.marker=function Tl(p,A){return new Uo(p,A)},Et.point=pn,Et.polygon=function lc(p,A){return new So(p,A)},Et.polyline=function ql(p,A){return new yo(p,A)},Et.popup=function(p,A){return new xo(p,A)},Et.rectangle=function ho(p,A){return new sa(p,A)},Et.setOptions=ut,Et.stamp=Be,Et.svg=vl,Et.svgOverlay=function tl(p,A,U){return new Zl(p,A,U)},Et.tileLayer=Na,Et.tooltip=function(p,A){return new gl(p,A)},Et.transformation=gi,Et.version="1.9.4",Et.videoOverlay=function Lo(p,A,U){return new ml(p,A,U)};var Mn=window.L;Et.noConflict=function(){return window.L=Mn,this},window.L=Et}(lr)},4448:function(ms){ms.exports=function(){"use strict";var lr,Et,e;function Mi(c,Z){if(lr)if(Et){var Be="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+lr+")(sharedChunk); ("+Et+")(sharedChunk); self.onerror = null;",we={};lr(we),e=Z(we),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(e.workerUrl=window.URL.createObjectURL(new Blob([Be],{type:"text/javascript"})))}else Et=Z;else lr=Z}return Mi(0,function(c){var Z=typeof self<"u"?self:{},Be="2.15.0";let we;const Se={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==we){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{we=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):n}catch{we=n}}return we},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Se.API_URL)return null;try{const n=new URL(Se.API_URL);return"api.mapbox.cn"===n.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===n.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Le={supported:!1,testSupport:function(n){!We&&Ve&&(ut?vt(n):Te=n)}};let Te,Ve,We=!1,ut=!1;function vt(n){const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Ve),n.isContextLost())return;Le.supported=!0}catch{}n.deleteTexture(t),We=!0}Z.document&&(Ve=Z.document.createElement("img"),Ve.onload=function(){Te&&vt(Te),Te=null,ut=!0},Ve.onerror=function(){We=!0,Te=null},Ve.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const tt="01";function ze(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ct=qt;function qt(n,t,s,u){this.cx=3*n,this.bx=3*(s-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=s,this.p2y=u}qt.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(void 0===t&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var s=n,u=0;u<8;u++){var _=this.sampleCurveX(s)-n;if(Math.abs(_)<t)return s;var S=this.sampleCurveDerivativeX(s);if(Math.abs(S)<1e-6)break;s-=_/S}var O=0,F=1;for(s=n,u=0;u<20&&(_=this.sampleCurveX(s),!(Math.abs(_-n)<t));u++)n>_?O=s:F=s,s=.5*(F-O)+O;return s},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Je=ze(ct),Jt=yi;function yi(n,t){this.x=n,this.y=t}yi.prototype={clone:function(){return new yi(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,s=n.y-this.y;return t*t+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),s=Math.sin(n),u=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=u,this},_rotateAround:function(n,t){var s=Math.cos(n),u=Math.sin(n),_=t.y+u*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-u*(this.y-t.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},yi.convert=function(n){return n instanceof yi?n:Array.isArray(n)?new yi(n[0],n[1]):n};var rt=ze(Jt);const bi=Math.PI/180,ci=180/Math.PI;function ti(n){return n*bi}function St(n){return n*ci}const pi=[[0,0],[1,0],[1,1],[0,1]];function vi(n){if(n<=0)return 0;if(n>=1)return 1;const t=n*n,s=t*n;return 4*(n<.5?s:3*(n-t)+s-.75)}function Ti(n,t,s,u){const _=new Je(n,t,s,u);return function(S){return _.solve(S)}}const Ji=Ti(.25,.1,.25,1);function Ii(n,t,s){return Math.min(s,Math.max(t,n))}function ki(n,t,s){return(s=Ii((s-n)/(t-n),0,1))*s*(3-2*s)}function Zi(n,t,s){const u=s-t,_=((n-t)%u+u)%u+t;return _===t?s:_}function pn(n,t,s){if(!n.length)return s(null,[]);let u=n.length;const _=new Array(n.length);let S=null;n.forEach((O,F)=>{t(O,(H,q)=>{H&&(S=H),_[F]=q,0==--u&&s(S,_)})})}function ji(n){const t=[];for(const s in n)t.push(n[s]);return t}function gn(n,...t){for(const s of t)for(const u in s)n[u]=s[u];return n}let tn=1;function di(){return tn++}function Wi(){return function n(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function _n(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ln(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Gn(n,t){n.forEach(s=>{t[s]&&(t[s]=t[s].bind(t))})}function Yn(n,t){return-1!==n.indexOf(t,n.length-t.length)}function on(n,t,s){const u={};for(const _ in n)u[_]=t.call(s||this,n[_],_,n);return u}function jt(n,t,s){const u={};for(const _ in n)t.call(s||this,n[_],_,n)&&(u[_]=n[_]);return u}function gi(n){return Array.isArray(n)?n.map(gi):"object"==typeof n&&n?on(n,gi):n}const V={};function Bi(n){V[n]||(typeof console<"u"&&console.warn(n),V[n]=!0)}function $i(n,t,s){return(s.y-n.y)*(t.x-n.x)>(t.y-n.y)*(s.x-n.x)}function en(n){let t=0;for(let s,u,_=0,S=n.length,O=S-1;_<S;O=_++)s=n[_],u=n[O],t+=(u.x-s.x)*(s.y+u.y);return t}function Xi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qi(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,_,S)=>{const O=_||S;return t[u]=!O||O.toLowerCase(),""}),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t}let Pn=null;function fn(n){if(null==Pn){const t=n.navigator?n.navigator.userAgent:null;Pn=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Pn}function Ci(n){try{const t=Z[n];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function En(n,t){return[n[4*t],n[4*t+1],n[4*t+2],n[4*t+3]]}const Dn="mapbox-tiles";let wi,Jn,cn=500,br=50;function zn(){try{return Z.caches}catch{}}function On(){zn()&&!wi&&(wi=Z.caches.open(Dn))}function sr(n){const t=n.indexOf("?");if(t<0)return n;const u=function(_){const S=_.indexOf("?");return S>0?_.slice(S+1).split("&"):[]}(n).filter(_=>{const S=_.split("=");return"language"===S[0]||"worldview"===S[0]});return u.length?`${n.slice(0,t)}?${u.join("&")}`:n.slice(0,t)}let fr=1/0;const Yr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Yr);class Nn extends Error{constructor(t,s,u){401===s&&Pt(u)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const _r=Xi()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Z.location.protocol?Z.parent:Z).location.href,ur=function(n,t){if(!(/^file:/.test(s=n.url)||/^file:/.test(_r())&&!/^\w+:/.test(s))){if(Z.fetch&&Z.Request&&Z.AbortController&&Z.Request.prototype.hasOwnProperty("signal"))return function(u,_){const S=new Z.AbortController,O=new Z.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:_r(),referrerPolicy:u.referrerPolicy,signal:S.signal});let F=!1,H=!1;const q=(se=O.url).indexOf("sku=")>0&&Pt(se);var se;"json"===u.type&&O.headers.set("Accept","application/json");const ue=(ke,Ae,Ue)=>{if(H)return;if(ke&&"SecurityError"!==ke.message&&Bi(ke.toString()),Ae&&Ue)return ge(Ae);const pt=Date.now();Z.fetch(O).then(Rt=>{if(Rt.ok){const Xt=q?Rt.clone():null;return ge(Rt,Xt,pt)}return _(new Nn(Rt.statusText,Rt.status,u.url))}).catch(Rt=>{"AbortError"!==Rt.name&&_(new Error(`${Rt.message} ${u.url}`))})},ge=(ke,Ae,Ue)=>{("arrayBuffer"===u.type?ke.arrayBuffer():"json"===u.type?ke.json():ke.text()).then(pt=>{H||(Ae&&Ue&&function(Rt,Xt,Lt){if(On(),!wi)return;const Wt={status:Xt.status,statusText:Xt.statusText,headers:new Z.Headers};Xt.headers.forEach((Ni,Fi)=>Wt.headers.set(Fi,Ni));const li=Qi(Xt.headers.get("Cache-Control")||"");if(li["no-store"])return;li["max-age"]&&Wt.headers.set("Expires",new Date(Lt+1e3*li["max-age"]).toUTCString());const si=Wt.headers.get("Expires");si&&(new Date(si).getTime()-Lt<42e4||function(Ni,Fi){if(void 0===Jn)try{new Response(new ReadableStream),Jn=!0}catch{Jn=!1}Jn?Fi(Ni.body):Ni.blob().then(Fi)}(Xt,Ni=>{const Fi=new Z.Response(Ni,Wt);On(),wi&&wi.then(ln=>ln.put(sr(Rt.url),Fi)).catch(ln=>Bi(ln.message))}))}(O,Ae,Ue),F=!0,_(null,pt,ke.headers.get("Cache-Control"),ke.headers.get("Expires")))}).catch(pt=>{H||_(new Error(pt.message))})};return q?function(ke,Ae){if(On(),!wi)return Ae(null);const Ue=sr(ke.url);wi.then(pt=>{pt.match(Ue).then(Rt=>{const Xt=function(Lt){if(!Lt)return!1;const Wt=new Date(Lt.headers.get("Expires")||0),li=Qi(Lt.headers.get("Cache-Control")||"");return Wt>Date.now()&&!li["no-cache"]}(Rt);pt.delete(Ue),Xt&&pt.put(Ue,Rt.clone()),Ae(null,Rt,Xt)}).catch(Ae)}).catch(Ae)}(O,ue):ue(null,null),{cancel:()=>{H=!0,F||S.abort()}}}(n,t);if(Xi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,t,void 0,!0)}var s;return function(u,_){const S=new Z.XMLHttpRequest;S.open(u.method||"GET",u.url,!0),"arrayBuffer"===u.type&&(S.responseType="arraybuffer");for(const O in u.headers)S.setRequestHeader(O,u.headers[O]);return"json"===u.type&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials="include"===u.credentials,S.onerror=()=>{_(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||0===S.status)&&null!==S.response){let O=S.response;if("json"===u.type)try{O=JSON.parse(S.response)}catch(F){return _(F)}_(null,O,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else _(new Nn(S.statusText,S.status,u.url))},S.send(u.body),{cancel:()=>S.abort()}}(n,t)},mr=function(n,t){return ur(gn(n,{type:"arrayBuffer"}),t)};function kr(n){const t=Z.document.createElement("a");return t.href=n,t.protocol===Z.document.location.protocol&&t.host===Z.document.location.host}const Ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ze,Qe;Ze=[],Qe=0;const Mt=function(n,t){if(Le.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Qe>=Se.MAX_PARALLEL_IMAGE_REQUESTS){const S={requestParameters:n,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Ze.push(S),S}Qe++;let s=!1;const u=()=>{if(!s)for(s=!0,Qe--;Ze.length&&Qe<Se.MAX_PARALLEL_IMAGE_REQUESTS;){const S=Ze.shift(),{requestParameters:O,callback:F,cancelled:H}=S;H||(S.cancel=Mt(O,F).cancel)}},_=mr(n,(S,O,F,H)=>{u(),S?t(S):O&&(Z.createImageBitmap?function(q,se){const ue=new Z.Blob([new Uint8Array(q)],{type:"image/png"});Z.createImageBitmap(ue).then(ge=>{se(null,ge)}).catch(ge=>{se(new Error(`Could not load image because of ${ge.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(O,(q,se)=>t(q,se,F,H)):function(q,se){const ue=new Z.Image,ge=Z.URL;ue.onload=()=>{se(null,ue),ge.revokeObjectURL(ue.src),ue.onload=null,Z.requestAnimationFrame(()=>{ue.src=Ft})},ue.onerror=()=>se(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ke=new Z.Blob([new Uint8Array(q)],{type:"image/png"});ue.src=q.byteLength?ge.createObjectURL(ke):Ft}(O,(q,se)=>t(q,se,F,H)))});return{cancel:()=>{_.cancel(),u()}}},Tt="NO_ACCESS_TOKEN";function Zt(n){return 0===n.indexOf("mapbox:")}function Pt(n){return Se.API_URL_REGEX.test(n)}function Nt(n){return Se.API_CDN_URL_REGEX.test(n)}function ae(n){return Se.API_STYLE_REGEX.test(n)&&!Ne(n)}function Ne(n){return Se.API_SPRITE_REGEX.test(n)}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Vt(n){const t=n.match(et);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function $t(n){const t=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${t}`}const Hi="mapbox.eventData";function wt(n){if(!n)return null;const t=n.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(Z.atob(t[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class At{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const s=wt(Se.ACCESS_TOKEN);let u="";return u=s&&s.u?Z.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(_,S)=>String.fromCharCode(+("0x"+S)))):Se.ACCESS_TOKEN||"",t?`${Hi}.${t}:${u}`:`${Hi}:${u}`}fetchEventData(){const t=Ci("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(t)try{const _=Z.localStorage.getItem(s);_&&(this.eventData=JSON.parse(_));const S=Z.localStorage.getItem(u);S&&(this.anonId=S)}catch{Bi("Unable to read from LocalStorage")}}saveEventData(){const t=Ci("localStorage"),s=this.getStorageKey(),u=this.getStorageKey("uuid");if(t)try{Z.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&Z.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Bi("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,s,u,_){if(!Se.EVENTS_URL)return;const S=Vt(Se.EVENTS_URL);S.params.push(`access_token=${_||Se.ACCESS_TOKEN||""}`);const O={event:this.type,created:new Date(t).toISOString()},F=s?gn(O,s):O,H={url:$t(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([F])};var se;this.pendingRequest=(se=q=>{this.pendingRequest=null,u(q),this.saveEventData(),this.processRequests(_)},ur(gn(H,{method:"POST"}),se))}queueRequest(t,s){this.queue.push(t),this.processRequests(s)}}const st=new class extends At{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,t){Se.EVENTS_URL&&Se.ACCESS_TOKEN&&Array.isArray(n)&&n.some(s=>Zt(s)||Pt(s))&&this.queueRequest(Date.now(),t)}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=wt(Se.ACCESS_TOKEN),s=t?t.u:Se.ACCESS_TOKEN;let u=s!==this.eventData.tokenU;Ln(this.anonId)||(this.anonId=Wi(),u=!0);const _=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),O=new Date(_),F=(_-this.eventData.lastSuccess)/864e5;u=u||F>=1||F<-1||S.getDate()!==O.getDate()}else u=!0;u?this.postEvent(_,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Be,skuId:tt,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=_,this.eventData.tokenU=s)},n):this.processRequests()}},ot=st.postTurnstileEvent.bind(st),qe=new class extends At{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,t,s,u){this.skuToken=t,this.errorCb=u,Se.EVENTS_URL&&(s||Se.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},s):this.errorCb(new Error(Tt)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:s}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),Ln(this.anonId)||(this.anonId=Wi()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:Be,skuId:tt,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):t&&(this.success[t]=!0)},n))}},nt=qe.postMapLoadEvent.bind(qe),It=new class extends At{constructor(){super("gljs.performance")}postPerformanceEvent(n,t){Se.EVENTS_URL&&(n||Se.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},n)}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:t,performanceData:s}=this.queue.shift(),u=function(_){const S=Z.performance.getEntriesByType("resource"),O=Z.performance.getEntriesByType("mark"),F=function(ge){const ke={};if(ge)for(const Ae in ge)if("other"!==Ae)for(const Ue of ge[Ae]){const pt=`${Ae}ResolveRangeMin`,Rt=`${Ae}ResolveRangeMax`,Xt=`${Ae}RequestCount`,Lt=`${Ae}RequestCachedCount`;ke[pt]=Math.min(ke[pt]||1/0,Ue.startTime),ke[Rt]=Math.max(ke[Rt]||-1/0,Ue.responseEnd);const Wt=li=>{void 0===ke[li]&&(ke[li]=0),++ke[li]};void 0!==Ue.transferSize&&0===Ue.transferSize&&Wt(Lt),Wt(Xt)}return ke}(function(ge,ke){const Ae={};if(ge)for(const Ue of ge){const pt=ke(Ue);void 0===Ae[pt]&&(Ae[pt]=[]),Ae[pt].push(Ue)}return Ae}(S,xe)),H=Z.devicePixelRatio,q=Z.navigator.connection||Z.navigator.mozConnection||Z.navigator.webkitConnection,se={counters:[],metadata:[],attributes:[]},ue=(ge,ke,Ae)=>{null!=Ae&&ge.push({name:ke,value:Ae.toString()})};for(const ge in F)ue(se.counters,ge,F[ge]);if(_.interactionRange[0]!==1/0&&_.interactionRange[1]!==-1/0&&(ue(se.counters,"interactionRangeMin",_.interactionRange[0]),ue(se.counters,"interactionRangeMax",_.interactionRange[1])),O)for(const ge of Object.keys(Ct)){const ke=Ct[ge],Ae=O.find(Ue=>Ue.name===ke);Ae&&ue(se.counters,ke,Ae.startTime)}return ue(se.counters,"visibilityHidden",_.visibilityHidden),ue(se.attributes,"style",function(ge){if(ge)for(const ke of ge){const Ae=ke.name.split("?")[0];if(ae(Ae)){const Ue=Ae.split("/").slice(-2);if(2===Ue.length)return`mapbox://styles/${Ue[0]}/${Ue[1]}`}}}(S)),ue(se.attributes,"terrainEnabled",_.terrainEnabled?"true":"false"),ue(se.attributes,"fogEnabled",_.fogEnabled?"true":"false"),ue(se.attributes,"projection",_.projection),ue(se.attributes,"zoom",_.zoom),ue(se.metadata,"devicePixelRatio",H),ue(se.metadata,"connectionEffectiveType",q?q.effectiveType:void 0),ue(se.metadata,"navigatorUserAgent",Z.navigator.userAgent),ue(se.metadata,"screenWidth",Z.screen.width),ue(se.metadata,"screenHeight",Z.screen.height),ue(se.metadata,"windowWidth",Z.innerWidth),ue(se.metadata,"windowHeight",Z.innerHeight),ue(se.metadata,"mapWidth",_.width/H),ue(se.metadata,"mapHeight",_.height/H),ue(se.metadata,"webglRenderer",_.renderer),ue(se.metadata,"webglVendor",_.vendor),ue(se.metadata,"sdkVersion",Be),ue(se.metadata,"sdkIdentifier","mapbox-gl-js"),se}(s);for(const _ of u.metadata);for(const _ of u.counters);for(const _ of u.attributes);this.postEvent(t,u,()=>{},n)}},ei=It.postPerformanceEvent.bind(It),Yi=new class extends At{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,t,s,u){if(!Se.API_URL||!Se.SESSION_PATH)return;const _=Vt(Se.API_URL+Se.SESSION_PATH);_.params.push(`sku=${t||""}`),_.params.push(`access_token=${u||Se.ACCESS_TOKEN||""}`);const S={url:$t(_),headers:{"Content-Type":"text/plain"}};var F;this.pendingRequest=(F=O=>{this.pendingRequest=null,s(O),this.saveEventData(),this.processRequests(u)},ur(gn(S,{method:"GET"}),F))}getSessionAPI(n,t,s,u){this.skuToken=t,this.errorCb=u,Se.SESSION_PATH&&Se.API_URL&&(s||Se.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},s):this.errorCb(new Error(Tt)))}processRequests(n){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:s}=this.queue.shift();t&&this.success[t]||this.getSession(s,this.skuToken,u=>{u?this.errorCb(u):t&&(this.success[t]=!0)},n)}},Ei=Yi.getSessionAPI.bind(Yi),Ki=new Set,Ct={create:"create",load:"load",fullLoad:"fullLoad"},Ot={mark(n){Z.performance.mark(n)},measure(n,t,s){Z.performance.measure(n,t,s)}};function xe(n){const t=n.name.split("?")[0];return Nt(t)&&t.includes("mapbox-gl.js")?"javascript":Nt(t)&&t.includes("mapbox-gl.css")?"css":Se.API_FONTS_REGEX.test(t)?"fontRange":Ne(t)?"sprite":ae(t)?"style":Se.API_TILEJSON_REGEX.test(t)?"tilejson":"other"}const bt=Z.performance;function Yt(n){const t=n?n.url.toString():void 0;return bt.getEntriesByName(t)}let Xe,Ut,pe,i;const r={now:()=>void 0!==pe?pe:Z.performance.now(),setNow(n){pe=n},restoreNow(){pe=void 0},frame(n){const t=Z.requestAnimationFrame(n);return{cancel:()=>Z.cancelAnimationFrame(t)}},getImageData(n,t=0){const{width:s,height:u}=n;i||(i=Z.document.createElement("canvas"));const _=i.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(s>i.width||u>i.height)&&(i.width=s,i.height=u),_.clearRect(-t,-t,s+2*t,u+2*t),_.drawImage(n,0,0,s,u),_.getImageData(-t,-t,s+2*t,u+2*t)},resolveURL:n=>(Xe||(Xe=Z.document.createElement("a")),Xe.href=n,Xe.href),get devicePixelRatio(){return Z.devicePixelRatio},get prefersReducedMotion(){return!!Z.matchMedia&&(null==Ut&&(Ut=Z.matchMedia("(prefers-reduced-motion: reduce)")),Ut.matches)}};function d(n,t,s){s[n]&&-1!==s[n].indexOf(t)||(s[n]=s[n]||[],s[n].push(t))}function g(n,t,s){if(s&&s[n]){const u=s[n].indexOf(t);-1!==u&&s[n].splice(u,1)}}class x{constructor(t,s={}){gn(this,s),this.type=t}}class w extends x{constructor(t,s={}){super("error",gn({error:t},s))}}class I{on(t,s){return this._listeners=this._listeners||{},d(t,s,this._listeners),this}off(t,s){return g(t,s,this._listeners),g(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},d(t,s,this._oneTimeListeners),this):new Promise(u=>this.once(t,u))}fire(t,s){"string"==typeof t&&(t=new x(t,s||{}));const u=t.type;if(this.listens(u)){t.target=this;const _=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const F of _)F.call(this,t);const S=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const F of S)g(u,F,this._oneTimeListeners),F.call(this,t);const O=this._eventedParent;O&&(gn(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),O.fire(t))}else t instanceof w&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var R=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Y(n,...t){for(const s of t)for(const u in s)n[u]=s[u];return n}function W(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function X(n){if(Array.isArray(n))return n.map(X);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const s in n)t[s]=X(n[s]);return t}return W(n)}class Q extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}var ce=Q;class me{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[u,_]of s)this.bindings[u]=_}concat(t){return new me(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Ee=me;const De={kind:"null"},Ce={kind:"number"},Re={kind:"string"},G={kind:"boolean"},re={kind:"color"},te={kind:"object"},oe={kind:"value"},ye={kind:"collator"},Fe={kind:"formatted"},ht={kind:"resolvedImage"};function yt(n,t){return{kind:"array",itemType:n,N:t}}function ii(n){if("array"===n.kind){const t=ii(n.itemType);return"number"==typeof n.N?`array<${t}, ${n.N}>`:"value"===n.itemType.kind?"array":`array<${t}>`}return n.kind}const hi=[De,Ce,Re,G,re,Fe,te,yt(oe),ht];function xi(n,t){if("error"===t.kind)return null;if("array"===n.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!xi(n.itemType,t.itemType))&&("number"!=typeof n.N||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if("value"===n.kind)for(const s of hi)if(!xi(s,t))return null}return`Expected ${ii(n)} but found ${ii(t)} instead.`}function Pi(n,t){return t.some(s=>s.kind===n.kind)}function nn(n,t){return t.some(s=>"null"===s?null===n:"array"===s?Array.isArray(n):"object"===s?n&&!Array.isArray(n)&&"object"==typeof n:s===typeof n)}var Tn,Xn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Qn(n){return(n=Math.round(n))<0?0:n>255?255:n}function hr(n){return Qn("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n))}function xr(n){return(t="%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))<0?0:t>1?1:t;var t}function Rr(n,t,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?n+(t-n)*s*6:2*s<1?t:3*s<2?n+(t-n)*(2/3-s)*6:n}try{Tn={}.parseCSSColor=function(n){var t,s=n.replace(/ /g,"").toLowerCase();if(s in Xn)return Xn[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),_=s.indexOf(")");if(-1!==u&&_+1===s.length){var S=s.substr(0,u),O=s.substr(u+1,_-(u+1)).split(","),F=1;switch(S){case"rgba":if(4!==O.length)return null;F=xr(O.pop());case"rgb":return 3!==O.length?null:[hr(O[0]),hr(O[1]),hr(O[2]),F];case"hsla":if(4!==O.length)return null;F=xr(O.pop());case"hsl":if(3!==O.length)return null;var H=(parseFloat(O[0])%360+360)%360/360,q=xr(O[1]),se=xr(O[2]),ue=se<=.5?se*(q+1):se+q-se*q,ge=2*se-ue;return[Qn(255*Rr(ge,ue,H+1/3)),Qn(255*Rr(ge,ue,H)),Qn(255*Rr(ge,ue,H-1/3)),F];default:return null}}return null}}catch{}class Br{constructor(t,s,u,_=1){this.r=t,this.g=s,this.b=u,this.a=_}static parse(t){if(!t)return;if(t instanceof Br)return t;if("string"!=typeof t)return;const s=Tn(t);return s?new Br(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[t,s,u,_]=this.toArray();return`rgba(${Math.round(t)},${Math.round(s)},${Math.round(u)},${_})`}toArray(){const{r:t,g:s,b:u,a:_}=this;return 0===_?[0,0,0,0]:[255*t/_,255*s/_,255*u/_,_]}toArray01(){const{r:t,g:s,b:u,a:_}=this;return 0===_?[0,0,0,0]:[t/_,s/_,u/_,_]}toArray01PremultipliedAlpha(){const{r:t,g:s,b:u,a:_}=this;return[t,s,u,_]}}Br.black=new Br(0,0,0,1),Br.white=new Br(1,1,1,1),Br.transparent=new Br(0,0,0,0),Br.red=new Br(1,0,0,1),Br.blue=new Br(0,0,1,1);var Or=Br;class cr{constructor(t,s,u){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ur{constructor(t,s,u,_,S){this.text=t.normalize?t.normalize():t,this.image=s,this.scale=u,this.fontStack=_,this.textColor=S}}class ir{constructor(t){this.sections=t}static fromString(t){return new ir([new Ur(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof ir?t:ir.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const s of this.sections){if(s.image){t.push(["image",s.image.name]);continue}t.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toArray())),t.push(u)}return t}}class Ar{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ar({name:t,available:!1}):null}serialize(){return["image",this.name]}}function pa(n,t,s,u){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:`Invalid rgba value [${[n,t,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof u?[n,t,s,u]:[n,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fo(n){if(null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n||n instanceof Or||n instanceof cr||n instanceof ir||n instanceof Ar)return!0;if(Array.isArray(n)){for(const t of n)if(!fo(t))return!1;return!0}if("object"==typeof n){for(const t in n)if(!fo(n[t]))return!1;return!0}return!1}function nr(n){if(null===n)return De;if("string"==typeof n)return Re;if("boolean"==typeof n)return G;if("number"==typeof n)return Ce;if(n instanceof Or)return re;if(n instanceof cr)return ye;if(n instanceof ir)return Fe;if(n instanceof Ar)return ht;if(Array.isArray(n)){const t=n.length;let s;for(const u of n){const _=nr(u);if(s){if(s===_)continue;s=oe;break}s=_}return yt(s||oe,t)}return te}function Co(n){const t=typeof n;return null===n?"":"string"===t||"number"===t||"boolean"===t?String(n):n instanceof Or||n instanceof ir||n instanceof Ar?n.toString():JSON.stringify(n)}class cl{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(2!==t.length)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!fo(t[1]))return s.error("invalid value");const u=t[1];let _=nr(u);const S=s.expectedType;return"array"!==_.kind||0!==_.N||!S||"array"!==S.kind||"number"==typeof S.N&&0!==S.N||(_=S),new cl(_,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Or?["rgba"].concat(this.value.toArray()):this.value instanceof ir?this.value.serialize():this.value}}var oo=cl,or=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const Fs={string:Re,number:Ce,boolean:G,object:te};class yr{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let u,_=1;const S=t[0];if("array"===S){let F,H;if(t.length>2){const q=t[1];if("string"!=typeof q||!(q in Fs)||"object"===q)return s.error('The item type argument of "array" must be one of string, number, boolean',1);F=Fs[q],_++}else F=oe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);H=t[2],_++}u=yt(F,H)}else u=Fs[S];const O=[];for(;_<t.length;_++){const F=s.parse(t[_],_,oe);if(!F)return null;O.push(F)}return new yr(u,O)}evaluate(t){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(t);if(!xi(this.type,nr(u)))return u;if(s===this.args.length-1)throw new or(`Expected value to be of type ${ii(this.type)}, but found ${ii(nr(u))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,s=[t.kind];if("array"===t.kind){const u=t.itemType;if("string"===u.kind||"number"===u.kind||"boolean"===u.kind){s.push(u.kind);const _=t.N;("number"==typeof _||this.args.length>1)&&s.push(_)}}return s.concat(this.args.map(u=>u.serialize()))}}var No=yr;class bs{constructor(t){this.type=Fe,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&"object"==typeof u)return s.error("First argument must be an image or text section.");const _=[];let S=!1;for(let O=1;O<=t.length-1;++O){const F=t[O];if(S&&"object"==typeof F&&!Array.isArray(F)){S=!1;let H=null;if(F["font-scale"]&&(H=s.parse(F["font-scale"],1,Ce),!H))return null;let q=null;if(F["text-font"]&&(q=s.parse(F["text-font"],1,yt(Re)),!q))return null;let se=null;if(F["text-color"]&&(se=s.parse(F["text-color"],1,re),!se))return null;const ue=_[_.length-1];ue.scale=H,ue.font=q,ue.textColor=se}else{const H=s.parse(t[O],1,oe);if(!H)return null;const q=H.type.kind;if("string"!==q&&"value"!==q&&"null"!==q&&"resolvedImage"!==q)return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:H,scale:null,font:null,textColor:null})}}return new bs(_)}evaluate(t){return new ir(this.sections.map(s=>{const u=s.content.evaluate(t);return nr(u)===ht?new Ur("",u,null,null,null):new Ur(Co(u),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null)}))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const s of this.sections){t.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),t.push(u)}return t}}class dl{constructor(t){this.type=ht,this.input=t}static parse(t,s){if(2!==t.length)return s.error("Expected two arguments.");const u=s.parse(t[1],1,Re);return u?new dl(u):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),u=Ar.fromString(s);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(s)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Da={"to-boolean":G,"to-color":re,"to-number":Ce,"to-string":Re};class Wl{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const u=t[0];if(("to-boolean"===u||"to-string"===u)&&2!==t.length)return s.error("Expected one argument.");const _=Da[u],S=[];for(let O=1;O<t.length;O++){const F=s.parse(t[O],O,oe);if(!F)return null;S.push(F)}return new Wl(_,S)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let s,u;for(const _ of this.args){if(s=_.evaluate(t),u=null,s instanceof Or)return s;if("string"==typeof s){const S=t.parseColor(s);if(S)return S}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:pa(s[0],s[1],s[2],s[3]),!u))return new Or(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new or(u||`Could not parse color from value '${"string"==typeof s?s:String(JSON.stringify(s))}'`)}if("number"===this.type.kind){let s=null;for(const u of this.args){if(s=u.evaluate(t),null===s)return 0;const _=Number(s);if(!isNaN(_))return _}throw new or(`Could not convert ${JSON.stringify(s)} to number.`)}return"formatted"===this.type.kind?ir.fromString(Co(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ar.fromString(Co(this.args[0].evaluate(t))):Co(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new bs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new dl(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(s=>{t.push(s.serialize())}),t}}var Xa=Wl;const wr=["Unknown","Point","LineString","Polygon"];var Pl=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?wr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:s,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*t-n[0])+this.featureDistanceData.bearing[1]*(u*t-n[1])}return 0}parseColor(n){let t=this._parseColorCache[n];return t||(t=this._parseColorCache[n]=Or.parse(n)),t}};class Us{constructor(t,s,u,_){this.name=t,this.type=s,this._evaluate=u,this.args=_}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,s){const u=t[0],_=Us.definitions[u];if(!_)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,O=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,F=O.filter(([q])=>!Array.isArray(q)||q.length===t.length-1);let H=null;for(const[q,se]of F){H=new go(s.registry,s.path,null,s.scope);const ue=[];let ge=!1;for(let ke=1;ke<t.length;ke++){const Ae=t[ke],Ue=Array.isArray(q)?q[ke-1]:q.type,pt=H.parse(Ae,1+ue.length,Ue);if(!pt){ge=!0;break}ue.push(pt)}if(!ge)if(Array.isArray(q)&&q.length!==ue.length)H.error(`Expected ${q.length} arguments, but found ${ue.length} instead.`);else{for(let ke=0;ke<ue.length;ke++){const Ae=Array.isArray(q)?q[ke]:q.type,Ue=ue[ke];H.concat(ke+1).checkSubtype(Ae,Ue.type)}if(0===H.errors.length)return new Us(u,S,se,ue)}}if(1===F.length)s.errors.push(...H.errors);else{const q=(F.length?F:O).map(([ue])=>{return ge=ue,Array.isArray(ge)?`(${ge.map(ii).join(", ")})`:`(${ii(ge.type)}...)`;var ge}).join(" | "),se=[];for(let ue=1;ue<t.length;ue++){const ge=s.parse(t[ue],1+se.length);if(!ge)return null;se.push(ii(ge.type))}s.error(`Expected arguments of type ${q}, but found (${se.join(", ")}) instead.`)}return null}static register(t,s){Us.definitions=s;for(const u in s)t[u]=Us}}var Ds=Us;class fa{constructor(t,s,u){this.type=ye,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(2!==t.length)return s.error("Expected one argument.");const u=t[1];if("object"!=typeof u||Array.isArray(u))return s.error("Collator options argument must be an object.");const _=s.parse(void 0!==u["case-sensitive"]&&u["case-sensitive"],1,G);if(!_)return null;const S=s.parse(void 0!==u["diacritic-sensitive"]&&u["diacritic-sensitive"],1,G);if(!S)return null;let O=null;return u.locale&&(O=s.parse(u.locale,1,Re),!O)?null:new fa(_,S,O)}evaluate(t){return new cr(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Vo=8192;function ma(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function $o(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function Zo(n,t){const s=(180+n[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,_=Math.pow(2,t.z);return[Math.round(s*_*Vo),Math.round(u*_*Vo)]}function Ho(n,t,s){const u=n[0]-t[0],_=n[1]-t[1],S=n[0]-s[0],O=n[1]-s[1];return u*O-S*_==0&&u*S<=0&&_*O<=0}function Za(n,t){let s=!1;for(let O=0,F=t.length;O<F;O++){const H=t[O];for(let q=0,se=H.length;q<se-1;q++){if(Ho(n,H[q],H[q+1]))return!1;(_=H[q])[1]>(u=n)[1]!=(S=H[q+1])[1]>u[1]&&u[0]<(S[0]-_[0])*(u[1]-_[1])/(S[1]-_[1])+_[0]&&(s=!s)}}var u,_,S;return s}function Ao(n,t){for(let s=0;s<t.length;s++)if(Za(n,t[s]))return!0;return!1}function mo(n,t,s,u){const _=u[0]-s[0],S=u[1]-s[1],O=(n[0]-s[0])*S-_*(n[1]-s[1]),F=(t[0]-s[0])*S-_*(t[1]-s[1]);return O>0&&F<0||O<0&&F>0}function as(n,t,s){for(const q of s)for(let se=0;se<q.length-1;++se)if((F=[(O=q[se+1])[0]-(S=q[se])[0],O[1]-S[1]])[0]*(H=[(_=t)[0]-(u=n)[0],_[1]-u[1]])[1]-F[1]*H[0]!=0&&mo(u,_,S,O)&&mo(S,O,u,_))return!0;var u,_,S,O,F,H;return!1}function Mr(n,t){for(let s=0;s<n.length;++s)if(!Za(n[s],t))return!1;for(let s=0;s<n.length-1;++s)if(as(n[s],n[s+1],t))return!1;return!0}function oc(n,t){for(let s=0;s<t.length;s++)if(Mr(n,t[s]))return!0;return!1}function Ws(n,t,s){const u=[];for(let _=0;_<n.length;_++){const S=[];for(let O=0;O<n[_].length;O++){const F=Zo(n[_][O],s);ma(t,F),S.push(F)}u.push(S)}return u}function Ko(n,t,s){const u=[];for(let _=0;_<n.length;_++){const S=Ws(n[_],t,s);u.push(S)}return u}function zl(n,t,s,u){if(n[0]<s[0]||n[0]>s[2]){const _=.5*u;let S=n[0]-s[0]>_?-u:s[0]-n[0]>_?u:0;0===S&&(S=n[0]-s[2]>_?-u:s[2]-n[0]>_?u:0),n[0]+=S}ma(t,n)}function Do(n,t,s,u){const _=Math.pow(2,u.z)*Vo,S=[u.x*Vo,u.y*Vo],O=[];if(!n)return O;for(const F of n)for(const H of F){const q=[H.x+S[0],H.y+S[1]];zl(q,t,s,_),O.push(q)}return O}function is(n,t,s,u){const _=Math.pow(2,u.z)*Vo,S=[u.x*Vo,u.y*Vo],O=[];if(!n)return O;for(const H of n){const q=[];for(const se of H){const ue=[se.x+S[0],se.y+S[1]];ma(t,ue),q.push(ue)}O.push(q)}if(t[2]-t[0]<=_/2){(F=t)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(const H of O)for(const q of H)zl(q,t,s,_)}var F;return O}class Ro{constructor(t,s){this.type=G,this.geojson=t,this.geometries=s}static parse(t,s){if(2!==t.length)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fo(t[1])){const u=t[1];if("FeatureCollection"===u.type)for(let _=0;_<u.features.length;++_){const S=u.features[_].geometry.type;if("Polygon"===S||"MultiPolygon"===S)return new Ro(u,u.features[_].geometry)}else if("Feature"===u.type){const _=u.geometry.type;if("Polygon"===_||"MultiPolygon"===_)return new Ro(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new Ro(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(s,u){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],O=s.canonicalID();if(!O)return!1;if("Polygon"===u.type){const F=Ws(u.coordinates,S,O),H=Do(s.geometry(),_,S,O);if(!$o(_,S))return!1;for(const q of H)if(!Za(q,F))return!1}if("MultiPolygon"===u.type){const F=Ko(u.coordinates,S,O),H=Do(s.geometry(),_,S,O);if(!$o(_,S))return!1;for(const q of H)if(!Ao(q,F))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(s,u){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],O=s.canonicalID();if(!O)return!1;if("Polygon"===u.type){const F=Ws(u.coordinates,S,O),H=is(s.geometry(),_,S,O);if(!$o(_,S))return!1;for(const q of H)if(!Mr(q,F))return!1}if("MultiPolygon"===u.type){const F=Ko(u.coordinates,S,O),H=is(s.geometry(),_,S,O);if(!$o(_,S))return!1;for(const q of H)if(!oc(q,F))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ao=Ro;function Jo(n){if(n instanceof Ds&&("get"===n.name&&1===n.args.length||"feature-state"===n.name||"has"===n.name&&1===n.args.length||"properties"===n.name||"geometry-type"===n.name||"id"===n.name||/^filter-/.test(n.name))||n instanceof ao)return!1;let t=!0;return n.eachChild(s=>{t&&!Jo(s)&&(t=!1)}),t}function lo(n){if(n instanceof Ds&&"feature-state"===n.name)return!1;let t=!0;return n.eachChild(s=>{t&&!lo(s)&&(t=!1)}),t}function Xr(n,t){if(n instanceof Ds&&t.indexOf(n.name)>=0)return!1;let s=!0;return n.eachChild(u=>{s&&!Xr(u,t)&&(s=!1)}),s}class ul{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(2!==t.length||"string"!=typeof t[1])return s.error("'var' expression requires exactly one string literal argument.");const u=t[1];return s.scope.has(u)?new ul(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Rs=ul;class Ra{constructor(t,s=[],u,_=new Ee,S=[]){this.registry=t,this.path=s,this.key=s.map(O=>`[${O}]`).join(""),this.scope=_,this.errors=S,this.expectedType=u}parse(t,s,u,_,S={}){return s?this.concat(s,u,_)._parse(t,S):this._parse(t,S)}_parse(t,s){function u(_,S,O){return"assert"===O?new No(S,[_]):"coerce"===O?new Xa(S,[_]):_}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=t[0];if("string"!=typeof _)return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let O=S.parse(t,this);if(!O)return null;if(this.expectedType){const F=this.expectedType,H=O.type;if("string"!==F.kind&&"number"!==F.kind&&"boolean"!==F.kind&&"object"!==F.kind&&"array"!==F.kind||"value"!==H.kind)if("color"!==F.kind&&"formatted"!==F.kind&&"resolvedImage"!==F.kind||"value"!==H.kind&&"string"!==H.kind){if(this.checkSubtype(F,H))return null}else O=u(O,F,s.typeAnnotation||"coerce");else O=u(O,F,s.typeAnnotation||"assert")}if(!(O instanceof oo)&&"resolvedImage"!==O.type.kind&&ns(O)){const F=new Pl;try{O=new oo(O.type,O.evaluate(F))}catch(H){return this.error(H.message),null}}return O}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,u){const _="number"==typeof t?this.path.concat(t):this.path,S=u?this.scope.concat(u):this.scope;return new Ra(this.registry,_,s||null,S,this.errors)}error(t,...s){const u=`${this.key}${s.map(_=>`[${_}]`).join("")}`;this.errors.push(new ce(u,t))}checkSubtype(t,s){const u=xi(t,s);return u&&this.error(u),u}}var go=Ra;function ns(n){if(n instanceof Rs)return ns(n.boundExpression);if(n instanceof Ds&&"error"===n.name||n instanceof fa||n instanceof ao)return!1;const t=n instanceof Xa||n instanceof No;let s=!0;return n.eachChild(u=>{s=t?s&&ns(u):s&&u instanceof oo}),!!s&&Jo(n)&&Xr(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function kl(n,t){const s=n.length-1;let u,_,S=0,O=s,F=0;for(;S<=O;)if(F=Math.floor((S+O)/2),u=n[F],_=n[F+1],u<=t){if(F===s||t<_)return F;S=F+1}else{if(!(u>t))throw new or("Input is not a number.");O=F-1}return 0}class _o{constructor(t,s,u){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[_,S]of u)this.labels.push(_),this.outputs.push(S)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(t[1],1,Ce);if(!u)return null;const _=[];let S=null;s.expectedType&&"value"!==s.expectedType.kind&&(S=s.expectedType);for(let O=1;O<t.length;O+=2){const F=1===O?-1/0:t[O],H=t[O+1],q=O,se=O+1;if("number"!=typeof F)return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(_.length&&_[_.length-1][0]>=F)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',q);const ue=s.parse(H,se,S);if(!ue)return null;S=S||ue.type,_.push([F,ue])}return new _o(S,u,_)}evaluate(t){const s=this.labels,u=this.outputs;if(1===s.length)return u[0].evaluate(t);const _=this.input.evaluate(t);if(_<=s[0])return u[0].evaluate(t);const S=s.length;return _>=s[S-1]?u[S-1].evaluate(t):u[kl(s,_)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&t.push(this.labels[s]),t.push(this.outputs[s].serialize());return t}}var Jr=_o;function Cr(n,t,s){return n*(1-s)+t*s}var eo=Object.freeze({__proto__:null,array:function(n,t,s){return n.map((u,_)=>Cr(u,t[_],s))},color:function(n,t,s){return new Or(Cr(n.r,t.r,s),Cr(n.g,t.g,s),Cr(n.b,t.b,s),Cr(n.a,t.a,s))},number:Cr});const hl=4/29,gs=6/29,Ys=3*gs*gs,Es=gs*gs*gs,Cc=Math.PI/180,Ss=180/Math.PI;function jo(n){return n>Es?Math.pow(n,1/3):n/Ys+hl}function ac(n){return n>gs?n*n*n:Ys*(n-hl)}function to(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Eo(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ea(n){const t=Eo(n.r),s=Eo(n.g),u=Eo(n.b),_=jo((.4124564*t+.3575761*s+.1804375*u)/.95047),S=jo((.2126729*t+.7151522*s+.072175*u)/1);return{l:116*S-16,a:500*(_-S),b:200*(S-jo((.0193339*t+.119192*s+.9503041*u)/1.08883)),alpha:n.a}}function La(n){let t=(n.l+16)/116,s=isNaN(n.a)?t:t+n.a/500,u=isNaN(n.b)?t:t-n.b/200;return t=1*ac(t),s=.95047*ac(s),u=1.08883*ac(u),new Or(to(3.2404542*s-1.5371385*t-.4985314*u),to(-.969266*s+1.8760108*t+.041556*u),to(.0556434*s-.2040259*t+1.0572252*u),n.alpha)}function Pa(n,t,s){const u=t-n;return n+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Ka={forward:ea,reverse:La,interpolate:function(n,t,s){return{l:Cr(n.l,t.l,s),a:Cr(n.a,t.a,s),b:Cr(n.b,t.b,s),alpha:Cr(n.alpha,t.alpha,s)}}},Uo={forward:function(n){const{l:t,a:s,b:u}=ea(n),_=Math.atan2(u,s)*Ss;return{h:_<0?_+360:_,c:Math.sqrt(s*s+u*u),l:t,alpha:n.a}},reverse:function(n){const t=n.h*Cc,s=n.c;return La({l:n.l,a:Math.cos(t)*s,b:Math.sin(t)*s,alpha:n.alpha})},interpolate:function(n,t,s){return{h:Pa(n.h,t.h,s),c:Cr(n.c,t.c,s),l:Cr(n.l,t.l,s),alpha:Cr(n.alpha,t.alpha,s)}}};var Tl=Object.freeze({__proto__:null,hcl:Uo,lab:Ka});class ks{constructor(t,s,u,_,S){this.type=t,this.operator=s,this.interpolation=u,this.input=_,this.labels=[],this.outputs=[];for(const[O,F]of S)this.labels.push(O),this.outputs.push(F)}static interpolationFactor(t,s,u,_){let S=0;if("exponential"===t.name)S=ga(s,t.base,u,_);else if("linear"===t.name)S=ga(s,1,u,_);else if("cubic-bezier"===t.name){const O=t.controlPoints;S=new Je(O[0],O[1],O[2],O[3]).solve(ga(s,1,u,_))}return S}static parse(t,s){let[u,_,S,...O]=t;if(!Array.isArray(_)||0===_.length)return s.error("Expected an interpolation type expression.",1);if("linear"===_[0])_={name:"linear"};else if("exponential"===_[0]){const q=_[1];if("number"!=typeof q)return s.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:q}}else{if("cubic-bezier"!==_[0])return s.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const q=_.slice(1);if(4!==q.length||q.some(se=>"number"!=typeof se||se<0||se>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:q}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(S=s.parse(S,2,Ce),!S)return null;const F=[];let H=null;"interpolate-hcl"===u||"interpolate-lab"===u?H=re:s.expectedType&&"value"!==s.expectedType.kind&&(H=s.expectedType);for(let q=0;q<O.length;q+=2){const se=O[q],ue=O[q+1],ge=q+3,ke=q+4;if("number"!=typeof se)return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ge);if(F.length&&F[F.length-1][0]>=se)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ge);const Ae=s.parse(ue,ke,H);if(!Ae)return null;H=H||Ae.type,F.push([se,Ae])}return"number"===H.kind||"color"===H.kind||"array"===H.kind&&"number"===H.itemType.kind&&"number"==typeof H.N?new ks(H,u,_,S,F):s.error(`Type ${ii(H)} is not interpolatable.`)}evaluate(t){const s=this.labels,u=this.outputs;if(1===s.length)return u[0].evaluate(t);const _=this.input.evaluate(t);if(_<=s[0])return u[0].evaluate(t);const S=s.length;if(_>=s[S-1])return u[S-1].evaluate(t);const O=kl(s,_),F=ks.interpolationFactor(this.interpolation,_,s[O],s[O+1]),H=u[O].evaluate(t),q=u[O+1].evaluate(t);return"interpolate"===this.operator?eo[this.type.kind.toLowerCase()](H,q,F):"interpolate-hcl"===this.operator?Uo.reverse(Uo.interpolate(Uo.forward(H),Uo.forward(q),F)):Ka.reverse(Ka.interpolate(Ka.forward(H),Ka.forward(q),F))}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,t,this.input.serialize()];for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function ga(n,t,s,u){const _=u-s,S=n-s;return 0===_?0:1===t?S/_:(Math.pow(t,S)-1)/(Math.pow(t,_)-1)}var vo=ks;class Ja{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expectected at least one argument.");let u=null;const _=s.expectedType;_&&"value"!==_.kind&&(u=_);const S=[];for(const F of t.slice(1)){const H=s.parse(F,1+S.length,u,void 0,{typeAnnotation:"omit"});if(!H)return null;u=u||H.type,S.push(H)}const O=_&&S.some(F=>xi(_,F.type));return new Ja(O?oe:u,S)}evaluate(t){let s,u=null,_=0;for(const S of this.args){if(_++,u=S.evaluate(t),u&&u instanceof Ar&&!u.available&&(s||(s=u),u=null,_===this.args.length))return s;if(null!==u)break}return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(s=>{t.push(s.serialize())}),t}}var pl=Ja;class yo{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let S=1;S<t.length-1;S+=2){const O=t[S];if("string"!=typeof O)return s.error(`Expected string, but found ${typeof O} instead.`,S);if(/[^a-zA-Z0-9_]/.test(O))return s.error("Variable names must contain only alphanumeric characters or '_'.",S);const F=s.parse(t[S+1],S+1);if(!F)return null;u.push([O,F])}const _=s.parse(t[t.length-1],t.length-1,s.expectedType,u);return _?new yo(u,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[s,u]of this.bindings)t.push(s,u.serialize());return t.push(this.result.serialize()),t}}var ql=yo;class So{constructor(t,s,u){this.type=t,this.index=s,this.input=u}static parse(t,s){if(3!==t.length)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=s.parse(t[1],1,Ce),_=s.parse(t[2],2,yt(s.expectedType||oe));return u&&_?new So(_.type.itemType,u,_):null}evaluate(t){const s=this.index.evaluate(t),u=this.input.evaluate(t);if(s<0)throw new or(`Array index out of bounds: ${s} < 0.`);if(s>=u.length)throw new or(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s!==Math.floor(s))throw new or(`Array index must be an integer, but found ${s} instead.`);return u[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var lc=So;class Wo{constructor(t,s){this.type=G,this.needle=t,this.haystack=s}static parse(t,s){if(3!==t.length)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=s.parse(t[1],1,oe),_=s.parse(t[2],2,oe);return u&&_?Pi(u.type,[G,Re,Ce,De,oe])?new Wo(u,_):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ii(u.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(null==u)return!1;if(!nn(s,["boolean","string","number","null"]))throw new or(`Expected first argument to be of type boolean, string, number or null, but found ${ii(nr(s))} instead.`);if(!nn(u,["string","array"]))throw new or(`Expected second argument to be of type array or string, but found ${ii(nr(u))} instead.`);return u.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var za=Wo;class co{constructor(t,s,u){this.type=Ce,this.needle=t,this.haystack=s,this.fromIndex=u}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=s.parse(t[1],1,oe),_=s.parse(t[2],2,oe);if(!u||!_)return null;if(!Pi(u.type,[G,Re,Ce,De,oe]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ii(u.type)} instead`);if(4===t.length){const S=s.parse(t[3],3,Ce);return S?new co(u,_,S):null}return new co(u,_)}evaluate(t){const s=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!nn(s,["boolean","string","number","null"]))throw new or(`Expected first argument to be of type boolean, string, number or null, but found ${ii(nr(s))} instead.`);if(!nn(u,["string","array"]))throw new or(`Expected second argument to be of type array or string, but found ${ii(nr(u))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(t);return u.indexOf(s,_)}return u.indexOf(s)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Qa=co;class Ls{constructor(t,s,u,_,S,O){this.inputType=t,this.type=s,this.input=u,this.cases=_,this.outputs=S,this.otherwise=O}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let u,_;s.expectedType&&"value"!==s.expectedType.kind&&(_=s.expectedType);const S={},O=[];for(let q=2;q<t.length-1;q+=2){let se=t[q];const ue=t[q+1];Array.isArray(se)||(se=[se]);const ge=s.concat(q);if(0===se.length)return ge.error("Expected at least one branch label.");for(const Ae of se){if("number"!=typeof Ae&&"string"!=typeof Ae)return ge.error("Branch labels must be numbers or strings.");if("number"==typeof Ae&&Math.abs(Ae)>Number.MAX_SAFE_INTEGER)return ge.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Ae&&Math.floor(Ae)!==Ae)return ge.error("Numeric branch labels must be integer values.");if(u){if(ge.checkSubtype(u,nr(Ae)))return null}else u=nr(Ae);if(void 0!==S[String(Ae)])return ge.error("Branch labels must be unique.");S[String(Ae)]=O.length}const ke=s.parse(ue,q,_);if(!ke)return null;_=_||ke.type,O.push(ke)}const F=s.parse(t[1],1,oe);if(!F)return null;const H=s.parse(t[t.length-1],t.length-1,_);return H?"value"!==F.type.kind&&s.concat(1).checkSubtype(u,F.type)?null:new Ls(u,_,F,S,O,H):null}evaluate(t){const s=this.input.evaluate(t);return(nr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],_={};for(const O of s){const F=_[this.cases[O]];void 0===F?(_[this.cases[O]]=u.length,u.push([this.cases[O],[O]])):u[F][1].push(O)}const S=O=>"number"===this.inputType.kind?Number(O):O;for(const[O,F]of u)t.push(1===F.length?S(F[0]):F.map(S)),t.push(this.outputs[O].serialize());return t.push(this.otherwise.serialize()),t}}var el=Ls;class ta{constructor(t,s,u){this.type=t,this.branches=s,this.otherwise=u}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&"value"!==s.expectedType.kind&&(u=s.expectedType);const _=[];for(let O=1;O<t.length-1;O+=2){const F=s.parse(t[O],O,G);if(!F)return null;const H=s.parse(t[O+1],O+1,u);if(!H)return null;_.push([F,H]),u=u||H.type}const S=s.parse(t[t.length-1],t.length-1,u);return S?new ta(u,_,S):null}evaluate(t){for(const[s,u]of this.branches)if(s.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,u]of this.branches)t(s),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(s=>{t.push(s.serialize())}),t}}var bo=ta;class Fa{constructor(t,s,u,_){this.type=t,this.input=s,this.beginIndex=u,this.endIndex=_}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=s.parse(t[1],1,oe),_=s.parse(t[2],2,Ce);if(!u||!_)return null;if(!Pi(u.type,[yt(oe),Re,oe]))return s.error(`Expected first argument to be of type array or string, but found ${ii(u.type)} instead`);if(4===t.length){const S=s.parse(t[3],3,Ce);return S?new Fa(u.type,u,_,S):null}return new Fa(u.type,u,_)}evaluate(t){const s=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!nn(s,["string","array"]))throw new or(`Expected first argument to be of type array or string, but found ${ii(nr(s))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(t);return s.slice(u,_)}return s.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Ya=Fa;function fl(n,t){return"=="===n||"!="===n?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Il(n,t,s,u){return 0===u.compare(t,s)}function ia(n,t,s){const u="=="!==n&&"!="!==n;return class Mg{constructor(S,O,F){this.type=G,this.lhs=S,this.rhs=O,this.collator=F,this.hasUntypedArgument="value"===S.type.kind||"value"===O.type.kind}static parse(S,O){if(3!==S.length&&4!==S.length)return O.error("Expected two or three arguments.");const F=S[0];let H=O.parse(S[1],1,oe);if(!H)return null;if(!fl(F,H.type))return O.concat(1).error(`"${F}" comparisons are not supported for type '${ii(H.type)}'.`);let q=O.parse(S[2],2,oe);if(!q)return null;if(!fl(F,q.type))return O.concat(2).error(`"${F}" comparisons are not supported for type '${ii(q.type)}'.`);if(H.type.kind!==q.type.kind&&"value"!==H.type.kind&&"value"!==q.type.kind)return O.error(`Cannot compare types '${ii(H.type)}' and '${ii(q.type)}'.`);u&&("value"===H.type.kind&&"value"!==q.type.kind?H=new No(q.type,[H]):"value"!==H.type.kind&&"value"===q.type.kind&&(q=new No(H.type,[q])));let se=null;if(4===S.length){if("string"!==H.type.kind&&"string"!==q.type.kind&&"value"!==H.type.kind&&"value"!==q.type.kind)return O.error("Cannot use collator to compare non-string types.");if(se=O.parse(S[3],3,ye),!se)return null}return new Mg(H,q,se)}evaluate(S){const O=this.lhs.evaluate(S),F=this.rhs.evaluate(S);if(u&&this.hasUntypedArgument){const H=nr(O),q=nr(F);if(H.kind!==q.kind||"string"!==H.kind&&"number"!==H.kind)throw new or(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${H.kind}, ${q.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const H=nr(O),q=nr(F);if("string"!==H.kind||"string"!==q.kind)return t(S,O,F)}return this.collator?s(S,O,F,this.collator.evaluate(S)):t(S,O,F)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}serialize(){const S=[n];return this.eachChild(O=>{S.push(O.serialize())}),S}}}const Xl=ia("==",function(n,t,s){return t===s},Il),ml=ia("!=",function(n,t,s){return t!==s},function(n,t,s,u){return!Il(0,t,s,u)}),Lo=ia("<",function(n,t,s){return t<s},function(n,t,s,u){return u.compare(t,s)<0}),Zl=ia(">",function(n,t,s){return t>s},function(n,t,s,u){return u.compare(t,s)>0}),tl=ia("<=",function(n,t,s){return t<=s},function(n,t,s,u){return u.compare(t,s)<=0}),Is=ia(">=",function(n,t,s){return t>=s},function(n,t,s,u){return u.compare(t,s)>=0});class xo{constructor(t,s,u,_,S,O){this.type=Re,this.number=t,this.locale=s,this.currency=u,this.unit=_,this.minFractionDigits=S,this.maxFractionDigits=O}static parse(t,s){if(3!==t.length)return s.error("Expected two arguments.");const u=s.parse(t[1],1,Ce);if(!u)return null;const _=t[2];if("object"!=typeof _||Array.isArray(_))return s.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=s.parse(_.locale,1,Re),!S))return null;let O=null;if(_.currency&&(O=s.parse(_.currency,1,Re),!O))return null;let F=null;if(_.unit&&(F=s.parse(_.unit,1,Re),!F))return null;let H=null;if(_["min-fraction-digits"]&&(H=s.parse(_["min-fraction-digits"],1,Ce),!H))return null;let q=null;return _["max-fraction-digits"]&&(q=s.parse(_["max-fraction-digits"],1,Ce),!q)?null:new xo(u,S,O,F,H,q)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class il{constructor(t){this.type=Ce,this.input=t}static parse(t,s){if(2!==t.length)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=s.parse(t[1],1);return u?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?s.error(`Expected argument of type string or array, but found ${ii(u.type)} instead.`):new il(u):null}evaluate(t){const s=this.input.evaluate(t);if("string"==typeof s||Array.isArray(s))return s.length;throw new or(`Expected value to be of type string or array, but found ${ii(nr(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(s=>{t.push(s.serialize())}),t}}const gl={"==":Xl,"!=":ml,">":Zl,"<":Lo,">=":Is,"<=":tl,array:No,at:lc,boolean:No,case:bo,coalesce:pl,collator:fa,format:bs,image:dl,in:za,"index-of":Qa,interpolate:vo,"interpolate-hcl":vo,"interpolate-lab":vo,length:il,let:ql,literal:oo,match:el,number:No,"number-format":xo,object:No,slice:Ya,step:Jr,string:No,"to-boolean":Xa,"to-color":Xa,"to-number":Xa,"to-string":Xa,var:Rs,within:ao};function Po(n,[t,s,u,_]){t=t.evaluate(n),s=s.evaluate(n),u=u.evaluate(n);const S=_?_.evaluate(n):1,O=pa(t,s,u,S);if(O)throw new or(O);return new Or(t/255*S,s/255*S,u/255*S,S)}function As(n,t){return n in t}function Ba(n,t){const s=t[n];return void 0===s?null:s}function rs(n){return{type:n}}Ds.register(gl,{error:[{kind:"error"},[Re],(n,[t])=>{throw new or(t.evaluate(n))}],typeof:[Re,[oe],(n,[t])=>ii(nr(t.evaluate(n)))],"to-rgba":[yt(Ce,4),[re],(n,[t])=>t.evaluate(n).toArray()],rgb:[re,[Ce,Ce,Ce],Po],rgba:[re,[Ce,Ce,Ce,Ce],Po],has:{type:G,overloads:[[[Re],(n,[t])=>As(t.evaluate(n),n.properties())],[[Re,te],(n,[t,s])=>As(t.evaluate(n),s.evaluate(n))]]},get:{type:oe,overloads:[[[Re],(n,[t])=>Ba(t.evaluate(n),n.properties())],[[Re,te],(n,[t,s])=>Ba(t.evaluate(n),s.evaluate(n))]]},"feature-state":[oe,[Re],(n,[t])=>Ba(t.evaluate(n),n.featureState||{})],properties:[te,[],n=>n.properties()],"geometry-type":[Re,[],n=>n.geometryType()],id:[oe,[],n=>n.id()],zoom:[Ce,[],n=>n.globals.zoom],pitch:[Ce,[],n=>n.globals.pitch||0],"distance-from-center":[Ce,[],n=>n.distanceFromCenter()],"heatmap-density":[Ce,[],n=>n.globals.heatmapDensity||0],"line-progress":[Ce,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Ce,[],n=>n.globals.skyRadialProgress||0],accumulated:[oe,[],n=>void 0===n.globals.accumulated?null:n.globals.accumulated],"+":[Ce,rs(Ce),(n,t)=>{let s=0;for(const u of t)s+=u.evaluate(n);return s}],"*":[Ce,rs(Ce),(n,t)=>{let s=1;for(const u of t)s*=u.evaluate(n);return s}],"-":{type:Ce,overloads:[[[Ce,Ce],(n,[t,s])=>t.evaluate(n)-s.evaluate(n)],[[Ce],(n,[t])=>-t.evaluate(n)]]},"/":[Ce,[Ce,Ce],(n,[t,s])=>t.evaluate(n)/s.evaluate(n)],"%":[Ce,[Ce,Ce],(n,[t,s])=>t.evaluate(n)%s.evaluate(n)],ln2:[Ce,[],()=>Math.LN2],pi:[Ce,[],()=>Math.PI],e:[Ce,[],()=>Math.E],"^":[Ce,[Ce,Ce],(n,[t,s])=>Math.pow(t.evaluate(n),s.evaluate(n))],sqrt:[Ce,[Ce],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[Ce,[Ce],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[Ce,[Ce],(n,[t])=>Math.log(t.evaluate(n))],log2:[Ce,[Ce],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[Ce,[Ce],(n,[t])=>Math.sin(t.evaluate(n))],cos:[Ce,[Ce],(n,[t])=>Math.cos(t.evaluate(n))],tan:[Ce,[Ce],(n,[t])=>Math.tan(t.evaluate(n))],asin:[Ce,[Ce],(n,[t])=>Math.asin(t.evaluate(n))],acos:[Ce,[Ce],(n,[t])=>Math.acos(t.evaluate(n))],atan:[Ce,[Ce],(n,[t])=>Math.atan(t.evaluate(n))],min:[Ce,rs(Ce),(n,t)=>Math.min(...t.map(s=>s.evaluate(n)))],max:[Ce,rs(Ce),(n,t)=>Math.max(...t.map(s=>s.evaluate(n)))],abs:[Ce,[Ce],(n,[t])=>Math.abs(t.evaluate(n))],round:[Ce,[Ce],(n,[t])=>{const s=t.evaluate(n);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ce,[Ce],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[Ce,[Ce],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[G,[Re,oe],(n,[t,s])=>n.properties()[t.value]===s.value],"filter-id-==":[G,[oe],(n,[t])=>n.id()===t.value],"filter-type-==":[G,[Re],(n,[t])=>n.geometryType()===t.value],"filter-<":[G,[Re,oe],(n,[t,s])=>{const u=n.properties()[t.value],_=s.value;return typeof u==typeof _&&u<_}],"filter-id-<":[G,[oe],(n,[t])=>{const s=n.id(),u=t.value;return typeof s==typeof u&&s<u}],"filter->":[G,[Re,oe],(n,[t,s])=>{const u=n.properties()[t.value],_=s.value;return typeof u==typeof _&&u>_}],"filter-id->":[G,[oe],(n,[t])=>{const s=n.id(),u=t.value;return typeof s==typeof u&&s>u}],"filter-<=":[G,[Re,oe],(n,[t,s])=>{const u=n.properties()[t.value],_=s.value;return typeof u==typeof _&&u<=_}],"filter-id-<=":[G,[oe],(n,[t])=>{const s=n.id(),u=t.value;return typeof s==typeof u&&s<=u}],"filter->=":[G,[Re,oe],(n,[t,s])=>{const u=n.properties()[t.value],_=s.value;return typeof u==typeof _&&u>=_}],"filter-id->=":[G,[oe],(n,[t])=>{const s=n.id(),u=t.value;return typeof s==typeof u&&s>=u}],"filter-has":[G,[oe],(n,[t])=>t.value in n.properties()],"filter-has-id":[G,[],n=>null!==n.id()&&void 0!==n.id()],"filter-type-in":[G,[yt(Re)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[G,[yt(oe)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[G,[Re,yt(oe)],(n,[t,s])=>s.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[G,[Re,yt(oe)],(n,[t,s])=>function(u,_,S,O){for(;S<=O;){const F=S+O>>1;if(_[F]===u)return!0;_[F]>u?O=F-1:S=F+1}return!1}(n.properties()[t.value],s.value,0,s.value.length-1)],all:{type:G,overloads:[[[G,G],(n,[t,s])=>t.evaluate(n)&&s.evaluate(n)],[rs(G),(n,t)=>{for(const s of t)if(!s.evaluate(n))return!1;return!0}]]},any:{type:G,overloads:[[[G,G],(n,[t,s])=>t.evaluate(n)||s.evaluate(n)],[rs(G),(n,t)=>{for(const s of t)if(s.evaluate(n))return!0;return!1}]]},"!":[G,[G],(n,[t])=>!t.evaluate(n)],"is-supported-script":[G,[Re],(n,[t])=>{const s=n.globals&&n.globals.isSupportedScript;return!s||s(t.evaluate(n))}],upcase:[Re,[Re],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[Re,[Re],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[Re,rs(oe),(n,t)=>t.map(s=>Co(s.evaluate(n))).join("")],"resolved-locale":[Re,[ye],(n,[t])=>t.evaluate(n).resolvedLocale()]});var uo=gl;function Ga(n){return{result:"success",value:n}}function Na(n){return{result:"error",value:n}}function qs(n){return"data-driven"===n["property-type"]}function qo(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function ko(n){return!!n.expression&&n.expression.interpolated}function Gr(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function _l(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function _a(n){return n}function na(n,t){const s="color"===t.type,u=n.stops&&"object"==typeof n.stops[0][0],_=u||!(u||void 0!==n.property),S=n.type||(ko(t)?"exponential":"interval");if(s&&((n=Y({},n)).stops&&(n.stops=n.stops.map(q=>[q[0],Or.parse(q[1])])),n.default=Or.parse(n.default?n.default:t.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!Tl[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let O,F,H;if("exponential"===S)O=sa;else if("interval"===S)O=vl;else if("categorical"===S){O=zo,F=Object.create(null);for(const q of n.stops)F[q[0]]=q[1];H=typeof n.stops[0][0]}else{if("identity"!==S)throw new Error(`Unknown function type "${S}"`);O=ho}if(u){const q={},se=[];for(let ke=0;ke<n.stops.length;ke++){const Ae=n.stops[ke],Ue=Ae[0].zoom;void 0===q[Ue]&&(q[Ue]={zoom:Ue,type:n.type,property:n.property,default:n.default,stops:[]},se.push(Ue)),q[Ue].stops.push([Ae[0].value,Ae[1]])}const ue=[];for(const ke of se)ue.push([q[ke].zoom,na(q[ke],t)]);const ge={name:"linear"};return{kind:"composite",interpolationType:ge,interpolationFactor:vo.interpolationFactor.bind(void 0,ge),zoomStops:ue.map(ke=>ke[0]),evaluate:({zoom:ke},Ae)=>sa({stops:ue,base:n.base},t,ke).evaluate(ke,Ae)}}if(_){const q="exponential"===S?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:vo.interpolationFactor.bind(void 0,q),zoomStops:n.stops.map(se=>se[0]),evaluate:({zoom:se})=>O(n,t,se,F,H)}}return{kind:"source",evaluate(q,se){const ue=se&&se.properties?se.properties[n.property]:void 0;return void 0===ue?ra(n.default,t.default):O(n,t,ue,F,H)}}}function ra(n,t,s){return void 0!==n?n:void 0!==t?t:void 0!==s?s:void 0}function zo(n,t,s,u,_){return ra(typeof s===_?u[s]:void 0,n.default,t.default)}function vl(n,t,s){if("number"!==Gr(s))return ra(n.default,t.default);const u=n.stops.length;if(1===u||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[u-1][0])return n.stops[u-1][1];const _=kl(n.stops.map(S=>S[0]),s);return n.stops[_][1]}function sa(n,t,s){const u=void 0!==n.base?n.base:1;if("number"!==Gr(s))return ra(n.default,t.default);const _=n.stops.length;if(1===_||s<=n.stops[0][0])return n.stops[0][1];if(s>=n.stops[_-1][0])return n.stops[_-1][1];const S=kl(n.stops.map(se=>se[0]),s),O=function(se,ue,ge,ke){const Ae=ke-ge,Ue=se-ge;return 0===Ae?0:1===ue?Ue/Ae:(Math.pow(ue,Ue)-1)/(Math.pow(ue,Ae)-1)}(s,u,n.stops[S][0],n.stops[S+1][0]),F=n.stops[S][1],H=n.stops[S+1][1];let q=eo[t.type]||_a;if(n.colorSpace&&"rgb"!==n.colorSpace){const se=Tl[n.colorSpace];q=(ue,ge)=>se.reverse(se.interpolate(se.forward(ue),se.forward(ge),O))}return"function"==typeof F.evaluate?{evaluate(...se){const ue=F.evaluate.apply(void 0,se),ge=H.evaluate.apply(void 0,se);if(void 0!==ue&&void 0!==ge)return q(ue,ge,O)}}:q(F,H,O)}function ho(n,t,s){return"color"===t.type?s=Or.parse(s):"formatted"===t.type?s=ir.fromString(s.toString()):"resolvedImage"===t.type?s=Ar.fromString(s.toString()):Gr(s)===t.type||"enum"===t.type&&t.values[s]||(s=void 0),ra(s,n.default,t.default)}class Ol{constructor(t,s){var u;this.expression=t,this._warningHistory={},this._evaluator=new Pl,this._defaultValue=s?"color"===(u=s).type&&(_l(u.default)||Array.isArray(u.default))?new Or(0,0,0,0):"color"===u.type?Or.parse(u.default)||null:void 0===u.default?null:u.default:null,this._enumValues=s&&"enum"===s.type?s.values:null}evaluateWithoutErrorHandling(t,s,u,_,S,O,F,H){return this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=_||null,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=O,this._evaluator.featureTileCoord=F||null,this._evaluator.featureDistanceData=H||null,this.expression.evaluate(this._evaluator)}evaluate(t,s,u,_,S,O,F,H){this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=O||null,this._evaluator.featureTileCoord=F||null,this._evaluator.featureDistanceData=H||null;try{const q=this.expression.evaluate(this._evaluator);if(null==q||"number"==typeof q&&q!=q)return this._defaultValue;if(this._enumValues&&!(q in this._enumValues))throw new or(`Expected value to be one of ${Object.keys(this._enumValues).map(se=>JSON.stringify(se)).join(", ")}, but found ${JSON.stringify(q)} instead.`);return q}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}}}function oa(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in uo}function nl(n,t){const s=new go(uo,[],t?function(_){const S={color:re,string:Re,number:Ce,enum:Re,boolean:G,formatted:Fe,resolvedImage:ht};return"array"===_.type?yt(S[_.value]||oe,_.length):S[_.type]}(t):void 0),u=s.parse(n,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return u?Ga(new Ol(u,t)):Na(s.errors)}class Va{constructor(t,s){this.kind=t,this._styleExpression=s,this.isStateDependent="constant"!==t&&!lo(s.expression)}evaluateWithoutErrorHandling(t,s,u,_,S,O){return this._styleExpression.evaluateWithoutErrorHandling(t,s,u,_,S,O)}evaluate(t,s,u,_,S,O){return this._styleExpression.evaluate(t,s,u,_,S,O)}}class $a{constructor(t,s,u,_){this.kind=t,this.zoomStops=u,this._styleExpression=s,this.isStateDependent="camera"!==t&&!lo(s.expression),this.interpolationType=_}evaluateWithoutErrorHandling(t,s,u,_,S,O){return this._styleExpression.evaluateWithoutErrorHandling(t,s,u,_,S,O)}evaluate(t,s,u,_,S,O){return this._styleExpression.evaluate(t,s,u,_,S,O)}interpolationFactor(t,s,u){return this.interpolationType?vo.interpolationFactor(this.interpolationType,t,s,u):0}}function rl(n,t){if("error"===(n=nl(n,t)).result)return n;const s=n.value.expression,u=Jo(s);if(!u&&!qs(t))return Na([new ce("","data expressions not supported")]);const _=Xr(s,["zoom","pitch","distance-from-center"]);if(!_&&!qo(t))return Na([new ce("","zoom expressions not supported")]);const S=cs(s);return S||_?S instanceof ce?Na([S]):S instanceof vo&&!ko(t)?Na([new ce("",'"interpolate" expressions cannot be used with this property')]):Ga(S?new $a(u?"camera":"composite",n.value,S.labels,S instanceof vo?S.interpolation:void 0):new Va(u?"constant":"source",n.value)):Na([new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bs{constructor(t,s){this._parameters=t,this._specification=s,Y(this,na(this._parameters,this._specification))}static deserialize(t){return new Bs(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function cs(n){let t=null;if(n instanceof ql)t=cs(n.result);else if(n instanceof pl){for(const s of n.args)if(t=cs(s),t)break}else(n instanceof Jr||n instanceof vo)&&n.input instanceof Ds&&"zoom"===n.input.name&&(t=n);return t instanceof ce||n.eachChild(s=>{const u=cs(s);u instanceof ce?t=u:!t&&u?t=new ce("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new ce("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}class Mn{constructor(t,s,u,_){this.message=(t?`${t}: `:"")+u,_&&(this.identifier=_),null!=s&&s.__line__&&(this.line=s.__line__)}}function p(n){const t=n.key,s=n.value,u=n.valueSpec||{},_=n.objectElementValidators||{},S=n.style,O=n.styleSpec;let F=[];const H=Gr(s);if("object"!==H)return[new Mn(t,s,`object expected, ${H} found`)];for(const q in s){const se=q.split(".")[0];let ue;_[se]?ue=_[se]:u[se]?ue=Ns:_["*"]?ue=_["*"]:u["*"]&&(ue=Ns),ue?F=F.concat(ue({key:(t&&`${t}.`)+q,value:s[q],valueSpec:u[se]||u["*"],style:S,styleSpec:O,object:s,objectKey:q},s)):F.push(new Mn(t,s[q],`unknown property "${q}"`))}for(const q in u)_[q]||u[q].required&&void 0===u[q].default&&void 0===s[q]&&F.push(new Mn(t,s,`missing required property "${q}"`));return F}function A(n){const t=n.value,s=n.valueSpec,u=n.style,_=n.styleSpec,S=n.key,O=n.arrayElementValidator||Ns;if("array"!==Gr(t))return[new Mn(S,t,`array expected, ${Gr(t)} found`)];if(s.length&&t.length!==s.length)return[new Mn(S,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Mn(S,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let F={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};_.$version<7&&(F.function=s.function),"object"===Gr(s.value)&&(F=s.value);let H=[];for(let q=0;q<t.length;q++)H=H.concat(O({array:t,arrayIndex:q,value:t[q],valueSpec:F,style:u,styleSpec:_,key:`${S}[${q}]`}));return H}function U(n){const t=n.key,s=n.value,u=n.valueSpec;let _=Gr(s);if("number"===_&&s!=s&&(_="NaN"),"number"!==_)return[new Mn(t,s,`number expected, ${_} found`)];if("minimum"in u){let S=u.minimum;if("array"===Gr(u.minimum)&&(S=u.minimum[n.arrayIndex]),s<S)return[new Mn(t,s,`${s} is less than the minimum value ${S}`)]}if("maximum"in u){let S=u.maximum;if("array"===Gr(u.maximum)&&(S=u.maximum[n.arrayIndex]),s>S)return[new Mn(t,s,`${s} is greater than the maximum value ${S}`)]}return[]}function de(n){const t=n.valueSpec,s=W(n.value.type);let u,_,S,O={};const F="categorical"!==s&&void 0===n.value.property,H=!F,q="array"===Gr(n.value.stops)&&"array"===Gr(n.value.stops[0])&&"object"===Gr(n.value.stops[0][0]),se=p({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(ke){if("identity"===s)return[new Mn(ke.key,ke.value,'identity function may not have a "stops" property')];let Ae=[];const Ue=ke.value;return Ae=Ae.concat(A({key:ke.key,value:Ue,valueSpec:ke.valueSpec,style:ke.style,styleSpec:ke.styleSpec,arrayElementValidator:ue})),"array"===Gr(Ue)&&0===Ue.length&&Ae.push(new Mn(ke.key,Ue,"array must have at least one stop")),Ae},default:function(ke){return Ns({key:ke.key,value:ke.value,valueSpec:t,style:ke.style,styleSpec:ke.styleSpec})}}});return"identity"===s&&F&&se.push(new Mn(n.key,n.value,'missing required property "property"')),"identity"===s||n.value.stops||se.push(new Mn(n.key,n.value,'missing required property "stops"')),"exponential"===s&&n.valueSpec.expression&&!ko(n.valueSpec)&&se.push(new Mn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(H&&!qs(n.valueSpec)?se.push(new Mn(n.key,n.value,"property functions not supported")):F&&!qo(n.valueSpec)&&se.push(new Mn(n.key,n.value,"zoom functions not supported"))),"categorical"!==s&&!q||void 0!==n.value.property||se.push(new Mn(n.key,n.value,'"property" property is required')),se;function ue(ke){let Ae=[];const Ue=ke.value,pt=ke.key;if("array"!==Gr(Ue))return[new Mn(pt,Ue,`array expected, ${Gr(Ue)} found`)];if(2!==Ue.length)return[new Mn(pt,Ue,`array length 2 expected, length ${Ue.length} found`)];if(q){if("object"!==Gr(Ue[0]))return[new Mn(pt,Ue,`object expected, ${Gr(Ue[0])} found`)];if(void 0===Ue[0].zoom)return[new Mn(pt,Ue,"object stop key must have zoom")];if(void 0===Ue[0].value)return[new Mn(pt,Ue,"object stop key must have value")];const Rt=W(Ue[0].zoom);if("number"!=typeof Rt)return[new Mn(pt,Ue[0].zoom,"stop zoom values must be numbers")];if(S&&S>Rt)return[new Mn(pt,Ue[0].zoom,"stop zoom values must appear in ascending order")];Rt!==S&&(S=Rt,_=void 0,O={}),Ae=Ae.concat(p({key:`${pt}[0]`,value:Ue[0],valueSpec:{zoom:{}},style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{zoom:U,value:ge}}))}else Ae=Ae.concat(ge({key:`${pt}[0]`,value:Ue[0],valueSpec:{},style:ke.style,styleSpec:ke.styleSpec},Ue));return oa(X(Ue[1]))?Ae.concat([new Mn(`${pt}[1]`,Ue[1],"expressions are not allowed in function stops.")]):Ae.concat(Ns({key:`${pt}[1]`,value:Ue[1],valueSpec:t,style:ke.style,styleSpec:ke.styleSpec}))}function ge(ke,Ae){const Ue=Gr(ke.value),pt=W(ke.value),Rt=null!==ke.value?ke.value:Ae;if(u){if(Ue!==u)return[new Mn(ke.key,Rt,`${Ue} stop domain type must match previous stop domain type ${u}`)]}else u=Ue;if("number"!==Ue&&"string"!==Ue&&"boolean"!==Ue&&"number"!=typeof pt&&"string"!=typeof pt&&"boolean"!=typeof pt)return[new Mn(ke.key,Rt,"stop domain value must be a number, string, or boolean")];if("number"!==Ue&&"categorical"!==s){let Xt=`number expected, ${Ue} found`;return qs(t)&&void 0===s&&(Xt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Mn(ke.key,Rt,Xt)]}return"categorical"!==s||"number"!==Ue||"number"==typeof pt&&isFinite(pt)&&Math.floor(pt)===pt?"categorical"!==s&&"number"===Ue&&"number"==typeof pt&&"number"==typeof _&&void 0!==_&&pt<_?[new Mn(ke.key,Rt,"stop domain values must appear in ascending order")]:(_=pt,"categorical"===s&&pt in O?[new Mn(ke.key,Rt,"stop domain values must be unique")]:(O[pt]=!0,[])):[new Mn(ke.key,Rt,`integer expected, found ${String(pt)}`)]}}function Ie(n){const t=("property"===n.expressionContext?rl:nl)(X(n.value),n.valueSpec);if("error"===t.result)return t.value.map(u=>new Mn(`${n.key}${u.key}`,n.value,u.message));const s=t.value.expression||t.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!s.outputDefined())return[new Mn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===n.expressionContext&&"layout"===n.propertyType&&!lo(s))return[new Mn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext)return lt(s,n);if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!Xr(s,["zoom","feature-state"]))return[new Mn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!Jo(s))return[new Mn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lt(n,t){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const _ of t.valueSpec.expression.parameters)s.delete(_);if(0===s.size)return[];const u=[];return n instanceof Ds&&s.has(n.name)?[new Mn(t.key,t.value,`["${n.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(n.eachChild(_=>{u.push(...lt(_,t))}),u)}function ri(n){const t=n.key,s=n.value,u=n.valueSpec,_=[];return Array.isArray(u.values)?-1===u.values.indexOf(W(s))&&_.push(new Mn(t,s,`expected one of [${u.values.join(", ")}], ${JSON.stringify(s)} found`)):-1===Object.keys(u.values).indexOf(W(s))&&_.push(new Mn(t,s,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(s)} found`)),_}function Si(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!Si(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Vi(n,t="fill"){if(null==n)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Si(n)||(n=Os(n));const s=n;let u=!0;try{u=function(q){if(!Un(q))return q;let se=X(q);return $n(se),se=xn(se),se}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(s,null,2)}\n        `)}const _=R[`filter_${t}`],S=nl(u,_);let O=null;if("error"===S.result)throw new Error(S.value.map(q=>`${q.key}: ${q.message}`).join(", "));O=(q,se,ue)=>S.value.evaluate(q,se,{},ue);let F=null,H=null;if(u!==s){const q=nl(s,_);if("error"===q.result)throw new Error(q.value.map(se=>`${se.key}: ${se.message}`).join(", "));F=(se,ue,ge,ke,Ae)=>q.value.evaluate(se,ue,{},ge,void 0,void 0,ke,Ae),H=!Jo(q.value.expression)}return{filter:O,dynamicFilter:F||void 0,needGeometry:_s(u),needFeature:!!H}}function xn(n){if(!Array.isArray(n))return n;const t=function(s){if(Ir.has(s[0]))for(let u=1;u<s.length;u++)if(Un(s[u]))return!0;return s}(n);return!0===t?t:t.map(s=>xn(s))}function $n(n){let t=!1;const s=[];if("case"===n[0]){for(let u=1;u<n.length-1;u+=2)t=t||Un(n[u]),s.push(n[u+1]);s.push(n[n.length-1])}else if("match"===n[0]){t=t||Un(n[1]);for(let u=2;u<n.length-1;u+=2)s.push(n[u+1]);s.push(n[n.length-1])}else if("step"===n[0]){t=t||Un(n[1]);for(let u=1;u<n.length-1;u+=2)s.push(n[u+1])}t&&(n.length=0,n.push("any",...s));for(let u=1;u<n.length;u++)$n(n[u])}function Un(n){if(!Array.isArray(n))return!1;if("pitch"===(t=n[0])||"distance-from-center"===t)return!0;var t;for(let s=1;s<n.length;s++)if(Un(n[s]))return!0;return!1}const Ir=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Lr(n,t){return n<t?-1:n>t?1:0}function _s(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let t=1;t<n.length;t++)if(_s(n[t]))return!0;return!1}function Os(n){if(!n)return!0;const t=n[0];return n.length<=1?"any"!==t:"=="===t?Gs(n[1],n[2],"=="):"!="===t?po(Gs(n[1],n[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Gs(n[1],n[2],t):"any"===t?(s=n.slice(1),["any"].concat(s.map(Os))):"all"===t?["all"].concat(n.slice(1).map(Os)):"none"===t?["all"].concat(n.slice(1).map(Os).map(po)):"in"===t?To(n[1],n.slice(2)):"!in"===t?po(To(n[1],n.slice(2))):"has"===t?va(n[1]):"!has"===t?po(va(n[1])):"within"!==t||n;var s}function Gs(n,t,s){switch(n){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,n,t]}}function To(n,t){if(0===t.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(s=>typeof s!=typeof t[0])?["filter-in-large",n,["literal",t.sort(Lr)]]:["filter-in-small",n,["literal",t]]}}function va(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function po(n){return["!",n]}function Fl(n){return Si(X(n.value))?Ie(Y({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):Ha(n)}function Ha(n){const t=n.value,s=n.key;if("array"!==Gr(t))return[new Mn(s,t,`array expected, ${Gr(t)} found`)];const u=n.styleSpec;let _,S=[];if(t.length<1)return[new Mn(s,t,"filter array must have at least 1 element")];switch(S=S.concat(ri({key:`${s}[0]`,value:t[0],valueSpec:u.filter_operator,style:n.style,styleSpec:n.styleSpec})),W(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===W(t[1])&&S.push(new Mn(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&S.push(new Mn(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(_=Gr(t[1]),"string"!==_&&S.push(new Mn(`${s}[1]`,t[1],`string expected, ${_} found`)));for(let O=2;O<t.length;O++)_=Gr(t[O]),"$type"===W(t[1])?S=S.concat(ri({key:`${s}[${O}]`,value:t[O],valueSpec:u.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==_&&"number"!==_&&"boolean"!==_&&S.push(new Mn(`${s}[${O}]`,t[O],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let O=1;O<t.length;O++)S=S.concat(Ha({key:`${s}[${O}]`,value:t[O],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":_=Gr(t[1]),2!==t.length?S.push(new Mn(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==_&&S.push(new Mn(`${s}[1]`,t[1],`string expected, ${_} found`));break;case"within":_=Gr(t[1]),2!==t.length?S.push(new Mn(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==_&&S.push(new Mn(`${s}[1]`,t[1],`object expected, ${_} found`))}return S}function Fo(n,t){const s=n.key,u=n.style,_=n.styleSpec,S=n.value,O=n.objectKey,F=_[`${t}_${n.layerType}`];if(!F)return[];const H=O.match(/^(.*)-transition$/);if("paint"===t&&H&&F[H[1]]&&F[H[1]].transition)return Ns({key:s,value:S,valueSpec:_.transition,style:u,styleSpec:_});const q=n.valueSpec||F[O];if(!q)return[new Mn(s,S,`unknown property "${O}"`)];let se;if("string"===Gr(S)&&qs(q)&&!q.tokens&&(se=/^{([^}]+)}$/.exec(S))){const ge=`\`{ "type": "identity", "property": ${se?JSON.stringify(se[1]):'"_"'} }\``;return[new Mn(s,S,`"${O}" does not support interpolation syntax\nUse an identity property function instead: ${ge}.`)]}const ue=[];return"symbol"===n.layerType&&("text-field"===O&&u&&!u.glyphs&&ue.push(new Mn(s,S,'use of "text-field" requires a style "glyphs" property')),"text-font"===O&&_l(X(S))&&"identity"===W(S.type)&&ue.push(new Mn(s,S,'"text-font" does not support identity functions'))),ue.concat(Ns({key:n.key,value:S,valueSpec:q,style:u,styleSpec:_,expressionContext:"property",propertyType:t,propertyKey:O}))}function sl(n){return Fo(n,"paint")}function Ye(n){return Fo(n,"layout")}function ne(n){let t=[];const s=n.value,u=n.key,_=n.style,S=n.styleSpec;s.type||s.ref||t.push(new Mn(u,s,'either "type" or "ref" is required'));let O=W(s.type);const F=W(s.ref);if(s.id){const H=W(s.id);for(let q=0;q<n.arrayIndex;q++){const se=_.layers[q];W(se.id)===H&&t.push(new Mn(u,s.id,`duplicate layer id "${s.id}", previously used at line ${se.id.__line__}`))}}if("ref"in s){let H;["type","source","source-layer","filter","layout"].forEach(q=>{q in s&&t.push(new Mn(u,s[q],`"${q}" is prohibited for ref layers`))}),_.layers.forEach(q=>{W(q.id)===F&&(H=q)}),H?H.ref?t.push(new Mn(u,s.ref,"ref cannot reference another ref layer")):O=W(H.type):"string"==typeof F&&t.push(new Mn(u,s.ref,`ref layer "${F}" not found`))}else if("background"!==O&&"sky"!==O)if(s.source){const H=_.sources&&_.sources[s.source],q=H&&W(H.type);H?"vector"===q&&"raster"===O?t.push(new Mn(u,s.source,`layer "${s.id}" requires a raster source`)):"raster"===q&&"raster"!==O?t.push(new Mn(u,s.source,`layer "${s.id}" requires a vector source`)):"vector"!==q||s["source-layer"]?"raster-dem"===q&&"hillshade"!==O?t.push(new Mn(u,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==O||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||"geojson"===q&&H.lineMetrics||t.push(new Mn(u,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Mn(u,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Mn(u,s.source,`source "${s.source}" not found`))}else t.push(new Mn(u,s,'missing required property "source"'));return t=t.concat(p({key:u,value:s,valueSpec:S.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ns({key:`${u}.type`,value:s.type,valueSpec:S.layer.type,style:n.style,styleSpec:n.styleSpec,object:s,objectKey:"type"}),filter:H=>Fl(Y({layerType:O},H)),layout:H=>p({layer:s,key:H.key,value:H.value,valueSpec:{},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":q=>Ye(Y({layerType:O},q))}}),paint:H=>p({layer:s,key:H.key,value:H.value,valueSpec:{},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":q=>sl(Y({layerType:O},q))}})}})),t}function fe(n){const t=n.value,s=n.key,u=Gr(t);return"string"!==u?[new Mn(s,t,`string expected, ${u} found`)]:[]}const $e={promoteId:function({key:n,value:t}){if("string"===Gr(t))return fe({key:n,value:t});{const s=[];for(const u in t)s.push(...fe({key:`${n}.${u}`,value:t[u]}));return s}}};function Kt(n){const t=n.value,s=n.key,u=n.styleSpec,_=n.style;if(!t.type)return[new Mn(s,t,'"type" is required')];const S=W(t.type);let O;switch(S){case"vector":case"raster":case"raster-dem":return O=p({key:s,value:t,valueSpec:u[`source_${S.replace("-","_")}`],style:n.style,styleSpec:u,objectElementValidators:$e}),O;case"geojson":if(O=p({key:s,value:t,valueSpec:u.source_geojson,style:_,styleSpec:u,objectElementValidators:$e}),t.cluster)for(const F in t.clusterProperties){const[H,q]=t.clusterProperties[F],se="string"==typeof H?[H,["accumulated"],["get",F]]:H;O.push(...Ie({key:`${s}.${F}.map`,value:q,expressionContext:"cluster-map"})),O.push(...Ie({key:`${s}.${F}.reduce`,value:se,expressionContext:"cluster-reduce"}))}return O;case"video":return p({key:s,value:t,valueSpec:u.source_video,style:_,styleSpec:u});case"image":return p({key:s,value:t,valueSpec:u.source_image,style:_,styleSpec:u});case"canvas":return[new Mn(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ri({key:`${s}.type`,value:t.type,valueSpec:{values:an(u)},style:_,styleSpec:u})}}function an(n){return n.source.reduce((t,s)=>{const u=n[s];return"enum"===u.type.type&&(t=t.concat(Object.keys(u.type.values))),t},[])}function Hn(n){const t=n.value,s=n.styleSpec,u=s.light,_=n.style;let S=[];const O=Gr(t);if(void 0===t)return S;if("object"!==O)return S=S.concat([new Mn("light",t,`object expected, ${O} found`)]),S;for(const F in t){const H=F.match(/^(.*)-transition$/);S=S.concat(H&&u[H[1]]&&u[H[1]].transition?Ns({key:F,value:t[F],valueSpec:s.transition,style:_,styleSpec:s}):u[F]?Ns({key:F,value:t[F],valueSpec:u[F],style:_,styleSpec:s}):[new Mn(F,t[F],`unknown property "${F}"`)])}return S}function Pr(n){const t=n.value,s=n.key,u=n.style,_=n.styleSpec,S=_.terrain;let O=[];const F=Gr(t);if(void 0===t)return O;if("object"!==F)return O=O.concat([new Mn("terrain",t,`object expected, ${F} found`)]),O;for(const H in t){const q=H.match(/^(.*)-transition$/);O=O.concat(q&&S[q[1]]&&S[q[1]].transition?Ns({key:H,value:t[H],valueSpec:_.transition,style:u,styleSpec:_}):S[H]?Ns({key:H,value:t[H],valueSpec:S[H],style:u,styleSpec:_}):[new Mn(H,t[H],`unknown property "${H}"`)])}if(t.source){const H=u.sources&&u.sources[t.source],q=H&&W(H.type);H?"raster-dem"!==q&&O.push(new Mn(s,t.source,`terrain cannot be used with a source of type ${String(q)}, it only be used with a "raster-dem" source type`)):O.push(new Mn(s,t.source,`source "${t.source}" not found`))}else O.push(new Mn(s,t,'terrain is missing required property "source"'));return O}function Fr(n){const t=n.value,s=n.style,u=n.styleSpec,_=u.fog;let S=[];const O=Gr(t);if(void 0===t)return S;if("object"!==O)return S=S.concat([new Mn("fog",t,`object expected, ${O} found`)]),S;for(const F in t){const H=F.match(/^(.*)-transition$/);S=S.concat(H&&_[H[1]]&&_[H[1]].transition?Ns({key:F,value:t[F],valueSpec:u.transition,style:s,styleSpec:u}):_[F]?Ns({key:F,value:t[F],valueSpec:_[F],style:s,styleSpec:u}):[new Mn(F,t[F],`unknown property "${F}"`)])}return S}const xs={"*":()=>[],array:A,boolean:function(n){const t=n.value,s=n.key,u=Gr(t);return"boolean"!==u?[new Mn(s,t,`boolean expected, ${u} found`)]:[]},number:U,color:function(n){const t=n.key,s=n.value,u=Gr(s);return"string"!==u?[new Mn(t,s,`color expected, ${u} found`)]:null===Tn(s)?[new Mn(t,s,`color expected, "${s}" found`)]:[]},enum:ri,filter:Fl,function:de,layer:ne,object:p,source:Kt,light:Hn,terrain:Pr,fog:Fr,string:fe,formatted:function(n){return 0===fe(n).length?[]:Ie(n)},resolvedImage:function(n){return 0===fe(n).length?[]:Ie(n)},projection:function(n){const t=n.value,s=n.styleSpec,u=s.projection,_=n.style;let S=[];const O=Gr(t);if("object"===O)for(const F in t)S=S.concat(Ns({key:F,value:t[F],valueSpec:u[F],style:_,styleSpec:s}));else"string"!==O&&(S=S.concat([new Mn("projection",t,`object or string expected, ${O} found`)]));return S}};function Ns(n){const t=n.value,s=n.valueSpec,u=n.styleSpec;return s.expression&&_l(W(t))?de(n):s.expression&&oa(X(t))?Ie(n):s.type&&xs[s.type]?xs[s.type](n):p(Y({},n,{valueSpec:s.type?u[s.type]:s}))}function Qc(n){const t=n.value,s=n.key,u=fe(n);return u.length||(-1===t.indexOf("{fontstack}")&&u.push(new Mn(s,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&u.push(new Mn(s,t,'"glyphs" url must include a "{range}" token'))),u}function Lc(n,t=R){return ya(Ns({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:Qc,"*":()=>[]}}))}const zd=n=>ya(sl(n)),ed=n=>ya(Ye(n));function ya(n){return n.slice().sort((t,s)=>t.line&&s.line?t.line-s.line:0)}function ud(n,t){let s=!1;if(t&&t.length)for(const u of t)n.fire(new w(new Error(u.message))),s=!0;return s}var ol=ba,yl=3;function ba(n,t,s){var u=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(t=_[1])+2*(s=_[2]);for(var S=0;S<this.d*this.d;S++){var O=_[yl+S],F=_[yl+S+1];u.push(O===F?null:_.subarray(O,F))}var H=_[yl+u.length+1];this.keys=_.subarray(_[yl+u.length],H),this.bboxes=_.subarray(H),this.insert=this._insertReadonly}else{this.d=t+2*s;for(var q=0;q<this.d*this.d;q++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=n,this.padding=s,this.scale=t/n,this.uid=0;var se=s/t*n;this.min=-se,this.max=n+se}ba.prototype.insert=function(n,t,s,u,_){this._forEachCell(t,s,u,_,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(t),this.bboxes.push(s),this.bboxes.push(u),this.bboxes.push(_)},ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ba.prototype._insertCell=function(n,t,s,u,_,S){this.cells[_].push(S)},ba.prototype.query=function(n,t,s,u,_){var S=this.min,O=this.max;if(n<=S&&t<=S&&O<=s&&O<=u&&!_)return Array.prototype.slice.call(this.keys);var F=[];return this._forEachCell(n,t,s,u,this._queryCell,F,{},_),F},ba.prototype._queryCell=function(n,t,s,u,_,S,O,F){var H=this.cells[_];if(null!==H)for(var q=this.keys,se=this.bboxes,ue=0;ue<H.length;ue++){var ge=H[ue];if(void 0===O[ge]){var ke=4*ge;(F?F(se[ke+0],se[ke+1],se[ke+2],se[ke+3]):n<=se[ke+2]&&t<=se[ke+3]&&s>=se[ke+0]&&u>=se[ke+1])?(O[ge]=!0,S.push(q[ge])):O[ge]=!1}}},ba.prototype._forEachCell=function(n,t,s,u,_,S,O,F){for(var H=this._convertToCellCoord(n),q=this._convertToCellCoord(t),se=this._convertToCellCoord(s),ue=this._convertToCellCoord(u),ge=H;ge<=se;ge++)for(var ke=q;ke<=ue;ke++){var Ae=this.d*ke+ge;if((!F||F(this._convertFromCellCoord(ge),this._convertFromCellCoord(ke),this._convertFromCellCoord(ge+1),this._convertFromCellCoord(ke+1)))&&_.call(this,n,t,s,u,Ae,S,O,F))return}},ba.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},ba.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,t=yl+this.cells.length+1+1,s=0,u=0;u<this.cells.length;u++)s+=this.cells[u].length;var _=new Int32Array(t+s+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var S=t,O=0;O<n.length;O++){var F=n[O];_[yl+O]=S,_.set(F,S),S+=F.length}return _[yl+n.length]=S,_.set(this.keys,S),_[yl+n.length+1]=S+=this.keys.length,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer};var Xs=ze(ol);const ds={};function Vn(n,t,s={}){Object.defineProperty(n,"_classRegistryKey",{value:t,writeable:!1}),ds[t]={klass:n,omit:s.omit||[]}}Vn(Object,"Object"),Xs.serialize=function(n,t){const s=n.toArrayBuffer();return t&&t.push(s),{buffer:s}},Xs.deserialize=function(n){return new Xs(n.buffer)},Object.defineProperty(Xs,"name",{value:"Grid"}),Vn(Xs,"Grid"),Vn(Or,"Color"),Vn(Error,"Error"),Vn(Nn,"AJAXError"),Vn(Ar,"ResolvedImage"),Vn(Bs,"StylePropertyFunction"),Vn(Ol,"StyleExpression",{omit:["_evaluator"]}),Vn($a,"ZoomDependentExpression"),Vn(Va,"ZoomConstantExpression"),Vn(Ds,"CompoundExpression",{omit:["_evaluate"]});for(const n in uo)ds[uo[n]._classRegistryKey]||Vn(uo[n],`Expression${n}`);function hd(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function pd(n){return Z.ImageBitmap&&n instanceof Z.ImageBitmap}function aa(n,t){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(hd(n)||pd(n))return t&&t.push(n),n;if(ArrayBuffer.isView(n)){const s=n;return t&&t.push(s.buffer),s}if(n instanceof Z.ImageData)return t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const s=[];for(const u of n)s.push(aa(u,t));return s}if("object"==typeof n){const s=n.constructor,u=s._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const _=s.serialize?s.serialize(n,t):{};if(!s.serialize){for(const S in n)n.hasOwnProperty(S)&&(ds[u].omit.indexOf(S)>=0||(_[S]=aa(n[S],t)));n instanceof Error&&(_.message=n.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(_.$name=u),_}throw new Error("can't serialize object of type "+typeof n)}function Kl(n){if(null==n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||hd(n)||pd(n)||ArrayBuffer.isView(n)||n instanceof Z.ImageData)return n;if(Array.isArray(n))return n.map(Kl);if("object"==typeof n){const t=n.$name||"Object",{klass:s}=ds[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(n);const u=Object.create(s.prototype);for(const _ of Object.keys(n))"$name"!==_&&(u[_]=Kl(n[_]));return u}throw new Error("can't deserialize object of type "+typeof n)}const An={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function cc(n){for(const t of n)if(dc(t.charCodeAt(0)))return!0;return!1}function cu(n){for(const t of n)if(!Fd(t.charCodeAt(0)))return!1;return!0}function Fd(n){return!(An.Arabic(n)||An["Arabic Supplement"](n)||An["Arabic Extended-A"](n)||An["Arabic Presentation Forms-A"](n)||An["Arabic Presentation Forms-B"](n))}function dc(n){return!(746!==n&&747!==n&&(n<4352||!(An["Bopomofo Extended"](n)||An.Bopomofo(n)||An["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||An["CJK Compatibility Ideographs"](n)||An["CJK Compatibility"](n)||An["CJK Radicals Supplement"](n)||An["CJK Strokes"](n)||!(!An["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||12336===n)||An["CJK Unified Ideographs Extension A"](n)||An["CJK Unified Ideographs"](n)||An["Enclosed CJK Letters and Months"](n)||An["Hangul Compatibility Jamo"](n)||An["Hangul Jamo Extended-A"](n)||An["Hangul Jamo Extended-B"](n)||An["Hangul Jamo"](n)||An["Hangul Syllables"](n)||An.Hiragana(n)||An["Ideographic Description Characters"](n)||An.Kanbun(n)||An["Kangxi Radicals"](n)||An["Katakana Phonetic Extensions"](n)||An.Katakana(n)&&12540!==n||!(!An["Halfwidth and Fullwidth Forms"](n)||65288===n||65289===n||65293===n||n>=65306&&n<=65310||65339===n||65341===n||65343===n||n>=65371&&n<=65503||65507===n||n>=65512&&n<=65519)||!(!An["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||An["Unified Canadian Aboriginal Syllabics"](n)||An["Unified Canadian Aboriginal Syllabics Extended"](n)||An["Vertical Forms"](n)||An["Yijing Hexagram Symbols"](n)||An["Yi Syllables"](n)||An["Yi Radicals"](n))))}function fd(n){return!(dc(n)||(t=n,An["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||An["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||An["Letterlike Symbols"](t)||An["Number Forms"](t)||An["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||An["Control Pictures"](t)&&9251!==t||An["Optical Character Recognition"](t)||An["Enclosed Alphanumerics"](t)||An["Geometric Shapes"](t)||An["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||An["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||An["CJK Symbols and Punctuation"](t)||An.Katakana(t)||An["Private Use Area"](t)||An["CJK Compatibility Forms"](t)||An["Small Form Variants"](t)||An["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}function td(n){return n>=1424&&n<=2303||An["Arabic Presentation Forms-A"](n)||An["Arabic Presentation Forms-B"](n)}function uc(n,t){return!(!t&&td(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||An.Khmer(n))}function xa(n){for(const t of n)if(td(t.charCodeAt(0)))return!0;return!1}const Pc="deferred",md="loading",gd="loaded";let Ec=null,C="unavailable",o=null;const f=function(n){n&&"string"==typeof n&&n.indexOf("NetworkError")>-1&&(C="error"),Ec&&Ec(n)};function T(){z.fire(new x("pluginStateChange",{pluginStatus:C,pluginURL:o}))}const z=new I,B=function(){return C},K=function(){if(C!==Pc||!o)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");C=md,T(),o&&mr({url:o},n=>{n?f(n):(C=gd,T())})},ie={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>C===gd||null!=ie.applyArabicShaping,isLoading:()=>C===md,setState(n){C=n.pluginStatus,o=n.pluginURL},isParsed:()=>null!=ie.applyArabicShaping&&null!=ie.processBidirectionalText&&null!=ie.processStyledBidirectionalText,getPluginURL:()=>o};class le{constructor(t,s){this.zoom=t,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(s,u){for(const _ of s)if(!uc(_.charCodeAt(0),u))return!1;return!0}(t,ie.isLoaded())}}class ve{constructor(t,s){this.property=t,this.value=s,this.expression=function(u,_){if(_l(u))return new Bs(u,_);if(oa(u)){const S=rl(u,_);if("error"===S.result)throw new Error(S.value.map(O=>`${O.key}: ${O.message}`).join(", "));return S.value}{let S=u;return"string"==typeof u&&"color"===_.type&&(S=Or.parse(u)),{kind:"constant",evaluate:()=>S}}}(void 0===s?t.specification.default:s,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,s,u){return this.property.possiblyEvaluate(this,t,s,u)}}class _e{constructor(t){this.property=t,this.value=new ve(t,void 0)}transitioned(t,s){return new at(this.property,this.value,s,gn({},t.transition,this.transition),t.now)}untransitioned(){return new at(this.property,this.value,null,{},0)}}class Pe{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return gi(this._values[t].value.value)}setValue(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new _e(this._values[t].property)),this._values[t].value=new ve(this._values[t].property,null===s?void 0:gi(s))}getTransition(t){return gi(this._values[t].transition)}setTransition(t,s){this._values.hasOwnProperty(t)||(this._values[t]=new _e(this._values[t].property)),this._values[t].transition=gi(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const u=this.getValue(s);void 0!==u&&(t[s]=u);const _=this.getTransition(s);void 0!==_&&(t[`${s}-transition`]=_)}return t}transitioned(t,s){const u=new gt(this._properties);for(const _ of Object.keys(this._values))u._values[_]=this._values[_].transitioned(t,s._values[_]);return u}untransitioned(){const t=new gt(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class at{constructor(t,s,u,_,S){const O=_.delay||0,F=_.duration||0;S=S||0,this.property=t,this.value=s,this.begin=S+O,this.end=this.begin+F,t.specification.transition&&(_.delay||_.duration)&&(this.prior=u)}possiblyEvaluate(t,s,u){const _=t.now||0,S=this.value.possiblyEvaluate(t,s,u),O=this.prior;if(O){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return O.possiblyEvaluate(t,s,u);{const F=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(O.possiblyEvaluate(t,s,u),S,vi(F))}}return S}}class gt{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,u){const _=new kt(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(t,s,u);return _}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class mt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return gi(this._values[t].value)}setValue(t,s){this._values[t]=new ve(this._values[t].property,null===s?void 0:gi(s))}serialize(){const t={};for(const s of Object.keys(this._values)){const u=this.getValue(s);void 0!==u&&(t[s]=u)}return t}possiblyEvaluate(t,s,u){const _=new kt(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(t,s,u);return _}}class xt{constructor(t,s,u){this.property=t,this.value=s,this.parameters=u}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,s,u,_){return this.property.evaluate(this.value,this.parameters,t,s,u,_)}}class kt{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Ge{constructor(t){this.specification=t}possiblyEvaluate(t,s){return t.expression.evaluate(s)}interpolate(t,s,u){const _=eo[this.specification.type];return _?_(t,s,u):t}}class ft{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,u,_){return new xt(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(s,null,{},u,_)}:t.expression,s)}interpolate(t,s,u){if("constant"!==t.value.kind||"constant"!==s.value.kind)return t;if(void 0===t.value.value||void 0===s.value.value)return new xt(this,{kind:"constant",value:void 0},t.parameters);const _=eo[this.specification.type];return _?new xt(this,{kind:"constant",value:_(t.value.value,s.value.value,u)},t.parameters):t}evaluate(t,s,u,_,S,O){return"constant"===t.kind?t.value:t.evaluate(s,u,_,S,O)}}class Dt{constructor(t){this.specification=t}possiblyEvaluate(t,s,u,_){return!!t.expression.evaluate(s,null,{},u,_)}interpolate(){return!1}}class Bt{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new le(0,{});for(const u in t){const _=t[u];_.specification.overridable&&this.overridableProperties.push(u);const S=this.defaultPropertyValues[u]=new ve(_,void 0),O=this.defaultTransitionablePropertyValues[u]=new _e(_);this.defaultTransitioningPropertyValues[u]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=S.possiblyEvaluate(s)}}}function Qt(n,t){return 256*(n=Ii(Math.floor(n),0,255))+Ii(Math.floor(t),0,255)}Vn(ft,"DataDrivenProperty"),Vn(Ge,"DataConstantProperty"),Vn(Dt,"ColorRampProperty");const oi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ni{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function fi(n,t=1){let s=0,u=0;return{members:n.map(_=>{const S=oi[_.type].BYTES_PER_ELEMENT,O=s=Ai(s,Math.max(t,S)),F=_.components||1;return u=Math.max(u,S),s+=S*F,{name:_.name,type:_.type,components:F,offset:O}}),size:Ai(s,Math.max(u,t)),alignment:t}}function Ai(n,t){return Math.ceil(n/t)*t}class yn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,s)}emplace(t,s,u){const _=2*t;return this.int16[_+0]=s,this.int16[_+1]=u,t}}yn.prototype.bytesPerElement=4,Vn(yn,"StructArrayLayout2i4");class Oi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,u){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,u)}emplace(t,s,u,_){const S=3*t;return this.int16[S+0]=s,this.int16[S+1]=u,this.int16[S+2]=_,t}}Oi.prototype.bytesPerElement=6,Vn(Oi,"StructArrayLayout3i6");class rn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,u,_){const S=this.length;return this.resize(S+1),this.emplace(S,t,s,u,_)}emplace(t,s,u,_,S){const O=4*t;return this.int16[O+0]=s,this.int16[O+1]=u,this.int16[O+2]=_,this.int16[O+3]=S,t}}rn.prototype.bytesPerElement=8,Vn(rn,"StructArrayLayout4i8");class zi extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F){const H=this.length;return this.resize(H+1),this.emplace(H,t,s,u,_,S,O,F)}emplace(t,s,u,_,S,O,F,H){const q=6*t,se=12*t,ue=3*t;return this.int16[q+0]=s,this.int16[q+1]=u,this.uint8[se+4]=_,this.uint8[se+5]=S,this.uint8[se+6]=O,this.uint8[se+7]=F,this.float32[ue+2]=H,t}}zi.prototype.bytesPerElement=12,Vn(zi,"StructArrayLayout2i4ub1f12");class bn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_){const S=this.length;return this.resize(S+1),this.emplace(S,t,s,u,_)}emplace(t,s,u,_,S){const O=4*t;return this.float32[O+0]=s,this.float32[O+1]=u,this.float32[O+2]=_,this.float32[O+3]=S,t}}bn.prototype.bytesPerElement=16,Vn(bn,"StructArrayLayout4f16");class Ri extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S){const O=this.length;return this.resize(O+1),this.emplace(O,t,s,u,_,S)}emplace(t,s,u,_,S,O){const F=6*t,H=3*t;return this.uint16[F+0]=s,this.uint16[F+1]=u,this.uint16[F+2]=_,this.uint16[F+3]=S,this.float32[H+2]=O,t}}Ri.prototype.bytesPerElement=12,Vn(Ri,"StructArrayLayout4ui1f12");class Li extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,u,_){const S=this.length;return this.resize(S+1),this.emplace(S,t,s,u,_)}emplace(t,s,u,_,S){const O=4*t;return this.uint16[O+0]=s,this.uint16[O+1]=u,this.uint16[O+2]=_,this.uint16[O+3]=S,t}}Li.prototype.bytesPerElement=8,Vn(Li,"StructArrayLayout4ui8");class vn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O){const F=this.length;return this.resize(F+1),this.emplace(F,t,s,u,_,S,O)}emplace(t,s,u,_,S,O,F){const H=6*t;return this.int16[H+0]=s,this.int16[H+1]=u,this.int16[H+2]=_,this.int16[H+3]=S,this.int16[H+4]=O,this.int16[H+5]=F,t}}vn.prototype.bytesPerElement=12,Vn(vn,"StructArrayLayout6i12");class dn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F,H,q,se,ue,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,t,s,u,_,S,O,F,H,q,se,ue,ge)}emplace(t,s,u,_,S,O,F,H,q,se,ue,ge,ke){const Ae=12*t;return this.int16[Ae+0]=s,this.int16[Ae+1]=u,this.int16[Ae+2]=_,this.int16[Ae+3]=S,this.uint16[Ae+4]=O,this.uint16[Ae+5]=F,this.uint16[Ae+6]=H,this.uint16[Ae+7]=q,this.int16[Ae+8]=se,this.int16[Ae+9]=ue,this.int16[Ae+10]=ge,this.int16[Ae+11]=ke,t}}dn.prototype.bytesPerElement=24,Vn(dn,"StructArrayLayout4i4ui4i24");class mn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O){const F=this.length;return this.resize(F+1),this.emplace(F,t,s,u,_,S,O)}emplace(t,s,u,_,S,O,F){const H=10*t,q=5*t;return this.int16[H+0]=s,this.int16[H+1]=u,this.int16[H+2]=_,this.float32[q+2]=S,this.float32[q+3]=O,this.float32[q+4]=F,t}}mn.prototype.bytesPerElement=20,Vn(mn,"StructArrayLayout3i3f20");class er extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}er.prototype.bytesPerElement=4,Vn(er,"StructArrayLayout1ul4");class Er extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F,H,q,se,ue,ge,ke){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,t,s,u,_,S,O,F,H,q,se,ue,ge,ke)}emplace(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae){const Ue=20*t,pt=10*t;return this.int16[Ue+0]=s,this.int16[Ue+1]=u,this.int16[Ue+2]=_,this.int16[Ue+3]=S,this.int16[Ue+4]=O,this.float32[pt+3]=F,this.float32[pt+4]=H,this.float32[pt+5]=q,this.float32[pt+6]=se,this.int16[Ue+14]=ue,this.uint32[pt+8]=ge,this.uint16[Ue+18]=ke,this.uint16[Ue+19]=Ae,t}}Er.prototype.bytesPerElement=40,Vn(Er,"StructArrayLayout5i4f1i1ul2ui40");class jn extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F){const H=this.length;return this.resize(H+1),this.emplace(H,t,s,u,_,S,O,F)}emplace(t,s,u,_,S,O,F,H){const q=8*t;return this.int16[q+0]=s,this.int16[q+1]=u,this.int16[q+2]=_,this.int16[q+4]=S,this.int16[q+5]=O,this.int16[q+6]=F,this.int16[q+7]=H,t}}jn.prototype.bytesPerElement=16,Vn(jn,"StructArrayLayout3i2i2i16");class dr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S){const O=this.length;return this.resize(O+1),this.emplace(O,t,s,u,_,S)}emplace(t,s,u,_,S,O){const F=4*t,H=8*t;return this.float32[F+0]=s,this.float32[F+1]=u,this.float32[F+2]=_,this.int16[H+6]=S,this.int16[H+7]=O,t}}dr.prototype.bytesPerElement=16,Vn(dr,"StructArrayLayout2f1f2i16");class Tr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_){const S=this.length;return this.resize(S+1),this.emplace(S,t,s,u,_)}emplace(t,s,u,_,S){const O=12*t,F=3*t;return this.uint8[O+0]=s,this.uint8[O+1]=u,this.float32[F+1]=_,this.float32[F+2]=S,t}}Tr.prototype.bytesPerElement=12,Vn(Tr,"StructArrayLayout2ub2f12");class pr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,u)}emplace(t,s,u,_){const S=3*t;return this.float32[S+0]=s,this.float32[S+1]=u,this.float32[S+2]=_,t}}pr.prototype.bytesPerElement=12,Vn(pr,"StructArrayLayout3f12");class tr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,u){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,u)}emplace(t,s,u,_){const S=3*t;return this.uint16[S+0]=s,this.uint16[S+1]=u,this.uint16[S+2]=_,t}}tr.prototype.bytesPerElement=6,Vn(tr,"StructArrayLayout3ui6");class zr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li){const si=this.length;return this.resize(si+1),this.emplace(si,t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li)}emplace(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li,si){const Ni=30*t,Fi=15*t,ln=60*t;return this.int16[Ni+0]=s,this.int16[Ni+1]=u,this.int16[Ni+2]=_,this.float32[Fi+2]=S,this.float32[Fi+3]=O,this.uint16[Ni+8]=F,this.uint16[Ni+9]=H,this.uint32[Fi+5]=q,this.uint32[Fi+6]=se,this.uint32[Fi+7]=ue,this.uint16[Ni+16]=ge,this.uint16[Ni+17]=ke,this.uint16[Ni+18]=Ae,this.float32[Fi+10]=Ue,this.float32[Fi+11]=pt,this.uint8[ln+48]=Rt,this.uint8[ln+49]=Xt,this.uint8[ln+50]=Lt,this.uint32[Fi+13]=Wt,this.int16[Ni+28]=li,this.uint8[ln+58]=si,t}}zr.prototype.bytesPerElement=60,Vn(zr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ls extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li,si,Ni,Fi,ln,Sn,Ui,un,hn,Cn){const kn=this.length;return this.resize(kn+1),this.emplace(kn,t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li,si,Ni,Fi,ln,Sn,Ui,un,hn,Cn)}emplace(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt,Rt,Xt,Lt,Wt,li,si,Ni,Fi,ln,Sn,Ui,un,hn,Cn,kn){const sn=38*t,Fn=19*t;return this.int16[sn+0]=s,this.int16[sn+1]=u,this.int16[sn+2]=_,this.float32[Fn+2]=S,this.float32[Fn+3]=O,this.int16[sn+8]=F,this.int16[sn+9]=H,this.int16[sn+10]=q,this.int16[sn+11]=se,this.int16[sn+12]=ue,this.int16[sn+13]=ge,this.uint16[sn+14]=ke,this.uint16[sn+15]=Ae,this.uint16[sn+16]=Ue,this.uint16[sn+17]=pt,this.uint16[sn+18]=Rt,this.uint16[sn+19]=Xt,this.uint16[sn+20]=Lt,this.uint16[sn+21]=Wt,this.uint16[sn+22]=li,this.uint16[sn+23]=si,this.uint16[sn+24]=Ni,this.uint16[sn+25]=Fi,this.uint16[sn+26]=ln,this.uint16[sn+27]=Sn,this.uint16[sn+28]=Ui,this.uint32[Fn+15]=un,this.float32[Fn+16]=hn,this.float32[Fn+17]=Cn,this.float32[Fn+18]=kn,t}}ls.prototype.bytesPerElement=76,Vn(ls,"StructArrayLayout3i2f6i15ui1ul3f76");class us extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}us.prototype.bytesPerElement=4,Vn(us,"StructArrayLayout1f4");class hs extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,u,_,S){const O=this.length;return this.resize(O+1),this.emplace(O,t,s,u,_,S)}emplace(t,s,u,_,S,O){const F=5*t;return this.float32[F+0]=s,this.float32[F+1]=u,this.float32[F+2]=_,this.float32[F+3]=S,this.float32[F+4]=O,t}}hs.prototype.bytesPerElement=20,Vn(hs,"StructArrayLayout5f20");class la extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,u,_){const S=this.length;return this.resize(S+1),this.emplace(S,t,s,u,_)}emplace(t,s,u,_,S){const O=6*t;return this.uint32[3*t+0]=s,this.uint16[O+2]=u,this.uint16[O+3]=_,this.uint16[O+4]=S,t}}la.prototype.bytesPerElement=12,Vn(la,"StructArrayLayout1ul3ui12");class Qr extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,s)}emplace(t,s,u){const _=2*t;return this.uint16[_+0]=s,this.uint16[_+1]=u,t}}Qr.prototype.bytesPerElement=4,Vn(Qr,"StructArrayLayout2ui4");class wa extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}wa.prototype.bytesPerElement=2,Vn(wa,"StructArrayLayout1ui2");class Yl extends mi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const u=this.length;return this.resize(u+1),this.emplace(u,t,s)}emplace(t,s,u){const _=2*t;return this.float32[_+0]=s,this.float32[_+1]=u,t}}Yl.prototype.bytesPerElement=8,Vn(Yl,"StructArrayLayout2f8");class ws extends ni{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ws.prototype.size=40;class es extends Er{get(t){return new ws(this,t)}}Vn(es,"CollisionBoxArray");class ts extends ni{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}ts.prototype.size=60;class it extends zr{get(t){return new ts(this,t)}}Vn(it,"PlacedSymbolArray");class _t extends ni{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}_t.prototype.size=76;class Ht extends ls{get(t){return new _t(this,t)}}Vn(Ht,"SymbolInstanceArray");class Gi extends us{getoffsetX(t){return this.float32[1*t+0]}}Vn(Gi,"GlyphOffsetArray");class Zn extends yn{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}Vn(Zn,"SymbolLineVertexArray");class Wn extends ni{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Wn.prototype.size=12;class rr extends la{get(t){return new Wn(this,t)}}Vn(rr,"FeatureIndexArray");class vr extends Qr{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}Vn(vr,"FillExtrusionCentroidArray");const Zr=fi([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Dr=fi([{name:"a_dash",components:4,type:"Uint16"}]);var Kr={exports:{}},Yd=function(n,t){var s,u,_,S,O,F,H,q;for(u=n.length-(s=3&n.length),_=t,O=3432918353,F=461845907,q=0;q<u;)H=255&n.charCodeAt(q)|(255&n.charCodeAt(++q))<<8|(255&n.charCodeAt(++q))<<16|(255&n.charCodeAt(++q))<<24,++q,_=27492+(65535&(S=5*(65535&(_=(_^=H=(65535&(H=(H=(65535&H)*O+(((H>>>16)*O&65535)<<16)&4294967295)<<15|H>>>17))*F+(((H>>>16)*F&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(H=0,s){case 3:H^=(255&n.charCodeAt(q+2))<<16;case 2:H^=(255&n.charCodeAt(q+1))<<8;case 1:_^=H=(65535&(H=(H=(65535&(H^=255&n.charCodeAt(q)))*O+(((H>>>16)*O&65535)<<16)&4294967295)<<15|H>>>17))*F+(((H>>>16)*F&65535)<<16)&4294967295}return _^=n.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0},Bd=function(n,t){for(var s,u=n.length,_=t^u,S=0;u>=4;)s=1540483477*(65535&(s=255&n.charCodeAt(S)|(255&n.charCodeAt(++S))<<8|(255&n.charCodeAt(++S))<<16|(255&n.charCodeAt(++S))<<24))+((1540483477*(s>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),u-=4,++S;switch(u){case 3:_^=(255&n.charCodeAt(S+2))<<16;case 2:_^=(255&n.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&n.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};Kr.exports=Yd,Kr.exports.murmur3=Yd,Kr.exports.murmur2=Bd;var Al=ze(Kr.exports);class bl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,u,_){this.ids.push(bp(t)),this.positions.push(s,u,_)}getPositions(t){const s=bp(t);let u=0,_=this.ids.length-1;for(;u<_;){const O=u+_>>1;this.ids[O]>=s?_=O:u=O+1}const S=[];for(;this.ids[u]===s;)S.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return S}static serialize(t,s){const u=new Float64Array(t.ids),_=new Uint32Array(t.positions);return zu(u,_,0,u.length-1),s&&s.push(u.buffer,_.buffer),{ids:u,positions:_}}static deserialize(t){const s=new bl;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function bp(n){const t=+n;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Al(String(n))}function zu(n,t,s,u){for(;s<u;){const _=n[s+u>>1];let S=s-1,O=u+1;for(;;){do{S++}while(n[S]<_);do{O--}while(n[O]>_);if(S>=O)break;du(n,S,O),du(t,3*S,3*O),du(t,3*S+1,3*O+1),du(t,3*S+2,3*O+2)}O-s<u-O?(zu(n,t,s,O),s=O+1):(zu(n,t,O+1,u),u=O)}}function du(n,t,s){const u=n[t];n[t]=n[s],n[s]=u}Vn(bl,"FeaturePositionMap");class Sc{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,s),this.initialized=!0),!!this.location}}class Gd extends Sc{constructor(t){super(t),this.current=0}set(t,s,u){this.fetchUniformLocation(t,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Sh extends Sc{constructor(t){super(t),this.current=[0,0,0,0]}set(t,s,u){this.fetchUniformLocation(t,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class kh extends Sc{constructor(t){super(t),this.current=Or.transparent}set(t,s,u){this.fetchUniformLocation(t,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Th=new Float32Array(16),Jp=new Float32Array(9),Qp=new Float32Array(4);function Ih(n){return[Qt(255*n.r,255*n.g),Qt(255*n.b,255*n.a)]}class uu{constructor(t,s,u){this.value=t,this.uniformNames=s.map(_=>`u_${_}`),this.type=u}setUniform(t,s,u,_,S){s.set(t,S,_.constantOr(this.value))}getBinding(t,s){return"color"===this.type?new kh(t):new Gd(t)}}class Nd{constructor(t,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,s,u,_,S){const O="u_pattern"===S||"u_dash"===S?this.pattern:"u_pixel_ratio"===S?this.pixelRatio:null;O&&s.set(t,S,O)}getBinding(t,s){return"u_pattern"===s||"u_dash"===s?new Sh(t):new Gd(t)}}class zc{constructor(t,s,u,_){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:"color"===u?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(t,s,u,_,S,O){const F=this.paintVertexArray.length,H=this.expression.evaluate(new le(0),s,{},S,_,O);this.paintVertexArray.resize(t),this._setPaintValue(F,t,H)}updatePaintArray(t,s,u,_,S){const O=this.expression.evaluate({zoom:0},u,_,void 0,S);this._setPaintValue(t,s,O)}_setPaintValue(t,s,u){if("color"===this.type){const _=Ih(u);for(let S=t;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=t;_<s;_++)this.paintVertexArray.emplace(_,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ca{constructor(t,s,u,_,S,O){this.expression=t,this.uniformNames=s.map(F=>`u_${F}_t`),this.type=u,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=s.map(F=>({name:`a_${F}`,type:"Float32",components:"color"===u?4:2,offset:0})),this.paintVertexArray=new O}populatePaintArray(t,s,u,_,S,O){const F=this.expression.evaluate(new le(this.zoom),s,{},S,_,O),H=this.expression.evaluate(new le(this.zoom+1),s,{},S,_,O),q=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(q,t,F,H)}updatePaintArray(t,s,u,_,S){const O=this.expression.evaluate({zoom:this.zoom},u,_,void 0,S),F=this.expression.evaluate({zoom:this.zoom+1},u,_,void 0,S);this._setPaintValue(t,s,O,F)}_setPaintValue(t,s,u,_){if("color"===this.type){const S=Ih(u),O=Ih(_);for(let F=t;F<s;F++)this.paintVertexArray.emplace(F,S[0],S[1],O[0],O[1])}else{for(let S=t;S<s;S++)this.paintVertexArray.emplace(S,u,_);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(_))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s,u,_,S){const O=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,F=Ii(this.expression.interpolationFactor(O,this.zoom,this.zoom+1),0,1);s.set(t,S,F)}getBinding(t,s){return new Gd(t)}}class id{constructor(t,s,u,_,S){this.expression=t,this.layerId=S,this.paintVertexAttributes=("array"===u?Dr:Zr).members;for(let O=0;O<s.length;++O);this.paintVertexArray=new _}populatePaintArray(t,s,u){const _=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(_,t,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(t,s,u,_,S,O){this._setPaintValues(t,s,u.patterns&&u.patterns[this.layerId],O)}_setPaintValues(t,s,u,_){if(!_||!u)return;const S=_[u];if(!S)return;const{tl:O,br:F,pixelRatio:H}=S;for(let q=t;q<s;q++)this.paintVertexArray.emplace(q,O[0],O[1],F[0],F[1],H)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fc{constructor(t,s,u=(()=>!0)){this.binders={},this._buffers=[];const _=[];for(const S in t.paint._values){if(!u(S))continue;const O=t.paint.get(S);if(!(O instanceof xt&&qs(O.property.specification)))continue;const F=wp(S,t.type),H=O.value,q=O.property.specification.type,se=!!O.property.useIntegerZoom,ue="line-dasharray"===S||S.endsWith("pattern"),ge="line-dasharray"===S&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==H.kind||ge)if("source"===H.kind||ge||ue){const ke=Bc(S,q,"source");this.binders[S]=ue?new id(H,F,q,ke,t.id):new zc(H,F,q,ke),_.push(`/a_${S}`)}else{const ke=Bc(S,q,"composite");this.binders[S]=new ca(H,F,q,se,s,ke),_.push(`/z_${S}`)}else this.binders[S]=ue?new Nd(H.value,F):new uu(H.value,F,q),_.push(`/u_${S}`)}this.cacheKey=_.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof zc||s instanceof ca?s.maxValue:0}populatePaintArrays(t,s,u,_,S,O){for(const F in this.binders){const H=this.binders[F];(H instanceof zc||H instanceof ca||H instanceof id)&&H.populatePaintArray(t,s,u,_,S,O)}}setConstantPatternPositions(t){for(const s in this.binders){const u=this.binders[s];u instanceof Nd&&u.setConstantPatternPositions(t)}}updatePaintArrays(t,s,u,_,S,O){let F=!1;for(const H in t){const q=s.getPositions(H);for(const se of q){const ue=u.feature(se.index);for(const ge in this.binders){const ke=this.binders[ge];if((ke instanceof zc||ke instanceof ca||ke instanceof id)&&!0===ke.expression.isStateDependent){const Ae=_.paint.get(ge);ke.expression=Ae.value,ke.updatePaintArray(se.start,se.end,ue,t[H],S,O),F=!0}}}}return F}defines(){const t=[];for(const s in this.binders){const u=this.binders[s];(u instanceof uu||u instanceof Nd)&&t.push(...u.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof zc||u instanceof ca||u instanceof id)for(let _=0;_<u.paintVertexAttributes.length;_++)t.push(u.paintVertexAttributes[_].name)}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof uu||u instanceof Nd||u instanceof ca)for(const _ of u.uniformNames)t.push(_)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const s=[];for(const u in this.binders){const _=this.binders[u];if(_ instanceof uu||_ instanceof Nd||_ instanceof ca)for(const S of _.uniformNames)s.push({name:S,property:u,binding:_.getBinding(t,S)})}return s}setUniforms(t,s,u,_,S){for(const{name:O,property:F,binding:H}of u)this.binders[F].setUniform(t,H,S,_.get(F),O)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const s=this.binders[t];(s instanceof zc||s instanceof ca||s instanceof id)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const s in this.binders){const u=this.binders[s];(u instanceof zc||u instanceof ca||u instanceof id)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof zc||s instanceof ca||s instanceof id)&&s.destroy()}}}class Yc{constructor(t,s,u=(()=>!0)){this.programConfigurations={};for(const _ of t)this.programConfigurations[_.id]=new Fc(_,s,u);this.needsUpload=!1,this._featureMap=new bl,this._bufferOffset=0}populatePaintArrays(t,s,u,_,S,O,F){for(const H in this.programConfigurations)this.programConfigurations[H].populatePaintArrays(t,s,_,S,O,F);void 0!==s.id&&this._featureMap.add(s.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,u,_,S){for(const O of u)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(t,this._featureMap,s,O,_,S)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const xp={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function wp(n,t){return xp[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}const Fu={"line-pattern":{source:Ri,composite:Ri},"fill-pattern":{source:Ri,composite:Ri},"fill-extrusion-pattern":{source:Ri,composite:Ri},"line-dasharray":{source:Li,composite:Li}},Yu={color:{source:Yl,composite:bn},number:{source:us,composite:Yl}};function Bc(n,t,s){const u=Fu[n];return u&&u[s]||Yu[t][s]}Vn(uu,"ConstantBinder"),Vn(Nd,"PatternConstantBinder"),Vn(zc,"SourceExpressionBinder"),Vn(id,"PatternCompositeBinder"),Vn(ca,"CompositeExpressionBinder"),Vn(Fc,"ProgramConfiguration",{omit:["_buffers"]}),Vn(Yc,"ProgramConfigurationSet");const Cp="-transition";class Bl extends I{constructor(t,s){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),s.layout&&(this._unevaluatedLayout=new mt(s.layout)),s.paint)){this._transitionablePaint=new Pe(s.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new kt(s.paint)}}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,s,u={}){null!=s&&this._validate(ed,`layers.${this.id}.layout.${t}`,t,s,u)||("visibility"!==t?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return Yn(t,Cp)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,u={}){if(null!=s&&this._validate(zd,`layers.${this.id}.paint.${t}`,t,s,u))return!1;if(Yn(t,Cp))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const _=this._transitionablePaint._values[t],S=_.value.isDataDriven(),O=_.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value,H=F.isDataDriven(),q=Yn(t,"pattern")||"line-dasharray"===t;return H||S||q||this._handleOverridablePaintPropertyUpdate(t,O,F)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,s,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),jt(t,(s,u)=>!(void 0===s||"layout"===u&&!Object.keys(s).length||"paint"===u&&!Object.keys(s).length))}_validate(t,s,u,_,S={}){return(!S||!1!==S.validate)&&ud(this,t.call(Lc,{key:s,layerType:this.type,objectKey:u,value:_,styleSpec:R,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof xt&&qs(s.property.specification)&&("source"===s.value.kind||"composite"===s.value.kind)&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Vi(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Oh=fi([{name:"a_pos",components:2,type:"Int16"}],4),Mh=fi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class io{constructor(t=[]){this.segments=t}prepareSegment(t,s,u,_){let S=this.segments[this.segments.length-1];return t>io.MAX_VERTEX_ARRAY_LENGTH&&Bi(`Max vertices per segment is ${io.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!S||S.vertexLength+t>io.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:s.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},void 0!==_&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,u,_){return new io([{vertexOffset:t,primitiveOffset:s,vertexLength:u,primitiveLength:_,vaos:{},sortKey:0}])}}io.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vn(io,"SegmentVector");var qn=8192;class kc{constructor(t,s){t&&(s?this.setSouthWest(t).setNorthEast(s):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ps?new ps(t.lng,t.lat):ps.convert(t),this}setSouthWest(t){return this._sw=t instanceof ps?new ps(t.lng,t.lat):ps.convert(t),this}extend(t){const s=this._sw,u=this._ne;let _,S;if(t instanceof ps)_=t,S=t;else{if(!(t instanceof kc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(kc.convert(t)):this.extend(ps.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(ps.convert(t)):this;if(_=t._sw,S=t._ne,!_||!S)return this}return s||u?(s.lng=Math.min(_.lng,s.lng),s.lat=Math.min(_.lat,s.lat),u.lng=Math.max(S.lng,u.lng),u.lat=Math.max(S.lat,u.lat)):(this._sw=new ps(_.lng,_.lat),this._ne=new ps(S.lng,S.lat)),this}getCenter(){return new ps((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ps(this.getWest(),this.getNorth())}getSouthEast(){return new ps(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:s,lat:u}=ps.convert(t);let _=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&_}static convert(t){return!t||t instanceof kc?t:new kc(t)}}var hc=1e-6,Ea=typeof Float32Array<"u"?Float32Array:Array;function hu(){var n=new Ea(9);return Ea!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function Bu(n,t,s){var u=t[0],_=t[1],S=t[2],O=t[3],F=t[4],H=t[5],q=t[6],se=t[7],ue=t[8],ge=s[0],ke=s[1],Ae=s[2],Ue=s[3],pt=s[4],Rt=s[5],Xt=s[6],Lt=s[7],Wt=s[8];return n[0]=ge*u+ke*O+Ae*q,n[1]=ge*_+ke*F+Ae*se,n[2]=ge*S+ke*H+Ae*ue,n[3]=Ue*u+pt*O+Rt*q,n[4]=Ue*_+pt*F+Rt*se,n[5]=Ue*S+pt*H+Rt*ue,n[6]=Xt*u+Lt*O+Wt*q,n[7]=Xt*_+Lt*F+Wt*se,n[8]=Xt*S+Lt*H+Wt*ue,n}function Jl(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ah(n,t){var s=t[0],u=t[1],_=t[2],S=t[3],O=t[4],F=t[5],H=t[6],q=t[7],se=t[8],ue=t[9],ge=t[10],ke=t[11],Ae=t[12],Ue=t[13],pt=t[14],Rt=t[15],Xt=s*F-u*O,Lt=s*H-_*O,Wt=s*q-S*O,li=u*H-_*F,si=u*q-S*F,Ni=_*q-S*H,Fi=se*Ue-ue*Ae,ln=se*pt-ge*Ae,Sn=se*Rt-ke*Ae,Ui=ue*pt-ge*Ue,un=ue*Rt-ke*Ue,hn=ge*Rt-ke*pt,Cn=Xt*hn-Lt*un+Wt*Ui+li*Sn-si*ln+Ni*Fi;return Cn?(n[0]=(F*hn-H*un+q*Ui)*(Cn=1/Cn),n[1]=(_*un-u*hn-S*Ui)*Cn,n[2]=(Ue*Ni-pt*si+Rt*li)*Cn,n[3]=(ge*si-ue*Ni-ke*li)*Cn,n[4]=(H*Sn-O*hn-q*ln)*Cn,n[5]=(s*hn-_*Sn+S*ln)*Cn,n[6]=(pt*Wt-Ae*Ni-Rt*Lt)*Cn,n[7]=(se*Ni-ge*Wt+ke*Lt)*Cn,n[8]=(O*un-F*Sn+q*Fi)*Cn,n[9]=(u*Sn-s*un-S*Fi)*Cn,n[10]=(Ae*si-Ue*Wt+Rt*Xt)*Cn,n[11]=(ue*Wt-se*si-ke*Xt)*Cn,n[12]=(F*ln-O*Ui-H*Fi)*Cn,n[13]=(s*Ui-u*ln+_*Fi)*Cn,n[14]=(Ue*Lt-Ae*li-pt*Xt)*Cn,n[15]=(se*li-ue*Lt+ge*Xt)*Cn,n):null}function Gc(n,t,s){var u=t[0],_=t[1],S=t[2],O=t[3],F=t[4],H=t[5],q=t[6],se=t[7],ue=t[8],ge=t[9],ke=t[10],Ae=t[11],Ue=t[12],pt=t[13],Rt=t[14],Xt=t[15],Lt=s[0],Wt=s[1],li=s[2],si=s[3];return n[0]=Lt*u+Wt*F+li*ue+si*Ue,n[1]=Lt*_+Wt*H+li*ge+si*pt,n[2]=Lt*S+Wt*q+li*ke+si*Rt,n[3]=Lt*O+Wt*se+li*Ae+si*Xt,n[4]=(Lt=s[4])*u+(Wt=s[5])*F+(li=s[6])*ue+(si=s[7])*Ue,n[5]=Lt*_+Wt*H+li*ge+si*pt,n[6]=Lt*S+Wt*q+li*ke+si*Rt,n[7]=Lt*O+Wt*se+li*Ae+si*Xt,n[8]=(Lt=s[8])*u+(Wt=s[9])*F+(li=s[10])*ue+(si=s[11])*Ue,n[9]=Lt*_+Wt*H+li*ge+si*pt,n[10]=Lt*S+Wt*q+li*ke+si*Rt,n[11]=Lt*O+Wt*se+li*Ae+si*Xt,n[12]=(Lt=s[12])*u+(Wt=s[13])*F+(li=s[14])*ue+(si=s[15])*Ue,n[13]=Lt*_+Wt*H+li*ge+si*pt,n[14]=Lt*S+Wt*q+li*ke+si*Rt,n[15]=Lt*O+Wt*se+li*Ae+si*Xt,n}function Ql(n,t,s){var u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue=s[0],pt=s[1],Rt=s[2];return t===n?(n[12]=t[0]*Ue+t[4]*pt+t[8]*Rt+t[12],n[13]=t[1]*Ue+t[5]*pt+t[9]*Rt+t[13],n[14]=t[2]*Ue+t[6]*pt+t[10]*Rt+t[14],n[15]=t[3]*Ue+t[7]*pt+t[11]*Rt+t[15]):(_=t[1],S=t[2],O=t[3],F=t[4],H=t[5],q=t[6],se=t[7],ue=t[8],ge=t[9],ke=t[10],Ae=t[11],n[0]=u=t[0],n[1]=_,n[2]=S,n[3]=O,n[4]=F,n[5]=H,n[6]=q,n[7]=se,n[8]=ue,n[9]=ge,n[10]=ke,n[11]=Ae,n[12]=u*Ue+F*pt+ue*Rt+t[12],n[13]=_*Ue+H*pt+ge*Rt+t[13],n[14]=S*Ue+q*pt+ke*Rt+t[14],n[15]=O*Ue+se*pt+Ae*Rt+t[15]),n}function pc(n,t,s){var u=s[0],_=s[1],S=s[2];return n[0]=t[0]*u,n[1]=t[1]*u,n[2]=t[2]*u,n[3]=t[3]*u,n[4]=t[4]*_,n[5]=t[5]*_,n[6]=t[6]*_,n[7]=t[7]*_,n[8]=t[8]*S,n[9]=t[9]*S,n[10]=t[10]*S,n[11]=t[11]*S,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Vd(n,t,s){var u=Math.sin(s),_=Math.cos(s),S=t[4],O=t[5],F=t[6],H=t[7],q=t[8],se=t[9],ue=t[10],ge=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=S*_+q*u,n[5]=O*_+se*u,n[6]=F*_+ue*u,n[7]=H*_+ge*u,n[8]=q*_-S*u,n[9]=se*_-O*u,n[10]=ue*_-F*u,n[11]=ge*_-H*u,n}function $d(n,t,s){var u=Math.sin(s),_=Math.cos(s),S=t[0],O=t[1],F=t[2],H=t[3],q=t[8],se=t[9],ue=t[10],ge=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=S*_-q*u,n[1]=O*_-se*u,n[2]=F*_-ue*u,n[3]=H*_-ge*u,n[8]=S*u+q*_,n[9]=O*u+se*_,n[10]=F*u+ue*_,n[11]=H*u+ge*_,n}function Dh(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Gu(n,t,s){var u,_,S,O=s[0],F=s[1],H=s[2],q=Math.hypot(O,F,H);return q<hc?null:(O*=q=1/q,F*=q,H*=q,u=Math.sin(t),_=Math.cos(t),n[0]=O*O*(S=1-_)+_,n[1]=F*O*S+H*u,n[2]=H*O*S-F*u,n[3]=0,n[4]=O*F*S-H*u,n[5]=F*F*S+_,n[6]=H*F*S+O*u,n[7]=0,n[8]=O*H*S+F*u,n[9]=F*H*S-O*u,n[10]=H*H*S+_,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var Nu=Gc;function Vu(){var n=new Ea(3);return Ea!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Rh(n){var t=new Ea(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function _d(n){return Math.hypot(n[0],n[1],n[2])}function fc(n,t,s){var u=new Ea(3);return u[0]=n,u[1]=t,u[2]=s,u}function ec(n,t,s){return n[0]=t[0]+s[0],n[1]=t[1]+s[1],n[2]=t[2]+s[2],n}function vd(n,t,s){return n[0]=t[0]-s[0],n[1]=t[1]-s[1],n[2]=t[2]-s[2],n}function $u(n,t,s){return n[0]=t[0]*s[0],n[1]=t[1]*s[1],n[2]=t[2]*s[2],n}function da(n,t,s){return n[0]=Math.min(t[0],s[0]),n[1]=Math.min(t[1],s[1]),n[2]=Math.min(t[2],s[2]),n}function Nc(n,t,s){return n[0]=Math.max(t[0],s[0]),n[1]=Math.max(t[1],s[1]),n[2]=Math.max(t[2],s[2]),n}function al(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n}function Vc(n,t,s,u){return n[0]=t[0]+s[0]*u,n[1]=t[1]+s[1]*u,n[2]=t[2]+s[2]*u,n}function ja(n,t){var s=t[0],u=t[1],_=t[2],S=s*s+u*u+_*_;return S>0&&(S=1/Math.sqrt(S)),n[0]=t[0]*S,n[1]=t[1]*S,n[2]=t[2]*S,n}function xl(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Hu(n,t,s){var u=t[0],_=t[1],S=t[2],O=s[0],F=s[1],H=s[2];return n[0]=_*H-S*F,n[1]=S*O-u*H,n[2]=u*F-_*O,n}function Zs(n,t,s){var u=t[0],_=t[1],S=t[2],O=s[3]*u+s[7]*_+s[11]*S+s[15];return n[0]=(s[0]*u+s[4]*_+s[8]*S+s[12])/(O=O||1),n[1]=(s[1]*u+s[5]*_+s[9]*S+s[13])/O,n[2]=(s[2]*u+s[6]*_+s[10]*S+s[14])/O,n}function ju(n,t,s){var u=s[0],_=s[1],S=s[2],O=t[0],F=t[1],H=t[2],q=_*H-S*F,se=S*O-u*H,ue=u*F-_*O,ge=_*ue-S*se,ke=S*q-u*ue,Ae=u*se-_*q,Ue=2*s[3];return se*=Ue,ue*=Ue,ke*=2,Ae*=2,n[0]=O+(q*=Ue)+(ge*=2),n[1]=F+se+ke,n[2]=H+ue+Ae,n}var Hd,tc=vd,Ep=$u,Uu=_d;function Lh(n,t,s){return n[0]=t[0]*s,n[1]=t[1]*s,n[2]=t[2]*s,n[3]=t[3]*s,n}function nd(n,t){var s=t[0],u=t[1],_=t[2],S=t[3],O=s*s+u*u+_*_+S*S;return O>0&&(O=1/Math.sqrt(O)),n[0]=s*O,n[1]=u*O,n[2]=_*O,n[3]=S*O,n}function rd(n,t,s){var u=t[0],_=t[1],S=t[2],O=t[3];return n[0]=s[0]*u+s[4]*_+s[8]*S+s[12]*O,n[1]=s[1]*u+s[5]*_+s[9]*S+s[13]*O,n[2]=s[2]*u+s[6]*_+s[10]*S+s[14]*O,n[3]=s[3]*u+s[7]*_+s[11]*S+s[15]*O,n}function Sp(){var n=new Ea(4);return Ea!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function yd(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function pu(n,t,s){s*=.5;var u=t[0],_=t[1],S=t[2],O=t[3],F=Math.sin(s),H=Math.cos(s);return n[0]=u*H+O*F,n[1]=_*H+S*F,n[2]=S*H-_*F,n[3]=O*H-u*F,n}function Wu(n,t,s){s*=.5;var u=t[0],_=t[1],S=t[2],O=t[3],F=Math.sin(s),H=Math.cos(s);return n[0]=u*H-S*F,n[1]=_*H+O*F,n[2]=S*H+u*F,n[3]=O*H-_*F,n}Vu(),Hd=new Ea(4),Ea!=Float32Array&&(Hd[0]=0,Hd[1]=0,Hd[2]=0,Hd[3]=0);var Tc=nd;Vu(),fc(1,0,0),fc(0,1,0),Sp(),Sp(),hu();const Ph=fi([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:kp}=Ph,zh=fi([{name:"a_pos_3",components:3,type:"Int16"}]);var Dl=fi([{name:"a_pos",type:"Int16",components:2}]);class qu{constructor(t,s){this.pos=t,this.dir=s}intersectsPlane(t,s,u){const _=xl(s,this.dir);if(Math.abs(_)<1e-6)return!1;const S=((t[0]-this.pos[0])*s[0]+(t[1]-this.pos[1])*s[1]+(t[2]-this.pos[2])*s[2])/_;return u[0]=this.pos[0]+this.dir[0]*S,u[1]=this.pos[1]+this.dir[1]*S,u[2]=this.pos[2]+this.dir[2]*S,!0}closestPointOnSphere(t,s,u){if(Ue=(ke=this.pos)[0],pt=ke[1],Rt=ke[2],Xt=(Ae=t)[0],Lt=Ae[1],Wt=Ae[2],Math.abs(Ue-Xt)<=hc*Math.max(1,Math.abs(Ue),Math.abs(Xt))&&Math.abs(pt-Lt)<=hc*Math.max(1,Math.abs(pt),Math.abs(Lt))&&Math.abs(Rt-Wt)<=hc*Math.max(1,Math.abs(Rt),Math.abs(Wt))||0===s)return u[0]=u[1]=u[2]=0,!1;var ke,Ae,Ue,pt,Rt,Xt,Lt,Wt;const[_,S,O]=this.dir,F=this.pos[0]-t[0],H=this.pos[1]-t[1],q=this.pos[2]-t[2],se=_*_+S*S+O*O,ue=2*(F*_+H*S+q*O),ge=ue*ue-4*se*(F*F+H*H+q*q-s*s);if(ge<0){const ke=Math.max(-ue/2,0),Ae=F+_*ke,Ue=H+S*ke,pt=q+O*ke,Rt=Math.hypot(Ae,Ue,pt);return u[0]=Ae*s/Rt,u[1]=Ue*s/Rt,u[2]=pt*s/Rt,!1}{const ke=(-ue-Math.sqrt(ge))/(2*se);if(ke<0){const Ae=Math.hypot(F,H,q);return u[0]=F*s/Ae,u[1]=H*s/Ae,u[2]=q*s/Ae,!1}return u[0]=F+_*ke,u[1]=H+S*ke,u[2]=q+O*ke,!0}}}class Xu{constructor(t,s,u,_,S){this.TL=t,this.TR=s,this.BR=u,this.BL=_,this.horizon=S}static fromInvProjectionMatrix(t,s,u){const _=[-1,1,1],S=[1,1,1],O=[1,-1,1],F=[-1,-1,1],H=Zs(_,_,t),q=Zs(S,S,t),se=Zs(O,O,t),ue=Zs(F,F,t);return new Xu(H,q,se,ue,s/u)}}class fu{constructor(t,s){this.points=t,this.planes=s}static fromInvProjectionMatrix(t,s,u,_){const S=Math.pow(2,u),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>{const q=rd([],H,t),se=1/q[3]/s*S;return(ue=q)[0]=(ge=q)[0]*(ke=[se,se,_?1/q[3]:se,se])[0],ue[1]=ge[1]*ke[1],ue[2]=ge[2]*ke[2],ue[3]=ge[3]*ke[3],ue;var ue,ge,ke}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(H=>{const q=ja([],Hu([],tc([],O[H[0]],O[H[1]]),tc([],O[H[2]],O[H[1]]))),se=-xl(q,O[H[1]]);return q.concat(se)});return new fu(O,F)}}class Sa{static fromPoints(t){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const _ of t)da(s,s,_),Nc(u,u,_);return new Sa(s,u)}static applyTransform(t,s){const u=t.getCorners();for(let _=0;_<u.length;++_)Zs(u[_],u[_],s);return Sa.fromPoints(u)}constructor(t,s){this.min=t,this.max=s,this.center=al([],ec([],this.min,this.max),.5)}quadrant(t){const s=[t%2==0,t<2],u=Rh(this.min),_=Rh(this.max);for(let S=0;S<s.length;S++)u[S]=s[S]?this.min[S]:this.center[S],_[S]=s[S]?this.center[S]:this.max[S];return _[2]=this.max[2],new Sa(u,_)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,s=this.max;return[[t[0],t[1],t[2]],[s[0],t[1],t[2]],[s[0],s[1],t[2]],[t[0],s[1],t[2]],[t[0],t[1],s[2]],[s[0],t[1],s[2]],[s[0],s[1],s[2]],[t[0],s[1],s[2]]]}intersects(t){const s=this.getCorners();let u=!0;for(let _=0;_<t.planes.length;_++){const S=t.planes[_];let O=0;for(let F=0;F<s.length;F++)O+=xl(S,s[F])+S[3]>=0;if(0===O)return 0;O!==s.length&&(u=!1)}if(u)return 2;for(let _=0;_<3;_++){let S=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let F=0;F<t.points.length;F++){const H=t.points[F][_]-this.min[_];S=Math.min(S,H),O=Math.max(O,H)}if(O<0||S>this.max[_]-this.min[_])return 0}return 1}}const Fh=5,Yh=6,mc=qn/Math.PI/2,Tp=16383,jd=[64,32,16],Gl=-mc,Nl=mc,Zu=[new Sa([Gl,Gl,Gl],[Nl,Nl,Nl]),new Sa([Gl,Gl,Gl],[0,0,Nl]),new Sa([0,Gl,Gl],[Nl,0,Nl]),new Sa([Gl,0,Gl],[0,Nl,Nl]),new Sa([0,0,Gl],[Nl,Nl,Nl])];function Ud(n){return n*mc/qd}function mu(n,t,s,u=!0){const _=al([],n._camera.position,n.worldSize),S=[t,s,1,1];rd(S,S,n.pixelMatrixInverse),Lh(S,S,1/S[3]);const O=ja([],tc([],S,_)),F=n.globeMatrix,H=[F[12],F[13],F[14]],q=tc([],H,_),se=_d(q),ue=ja([],q),ge=n.worldSize/(2*Math.PI),ke=xl(ue,O),Ae=Math.asin(ge/se);if(Ae<Math.acos(ke)){if(!u)return null;const Sn=[],Ui=[];al(Sn,O,se/ke),ja(Ui,tc(Ui,Sn,q)),ja(O,ec(O,q,al(O,Ui,Math.tan(Ae)*se)))}const Ue=[];new qu(_,O).closestPointOnSphere(H,ge,Ue);const pt=ja([],En(F,0)),Rt=ja([],En(F,1)),Xt=ja([],En(F,2)),Lt=xl(pt,Ue),Wt=xl(Rt,Ue),li=xl(Xt,Ue),si=St(Math.asin(-Wt/ge));let Ni=St(Math.atan2(Lt,li));Ni=n.center.lng+function(Sn,Ui){const un=(Ui-Sn+180)%360-180;return un<-180?un+360:un}(n.center.lng,Ni);const Fi=ic(Ni),ln=Ii(_c(si),0,1);return new Cd(Fi,ln)}class Ip{constructor(t,s,u){this.a=tc([],t,u),this.b=tc([],s,u),this.center=u;const _=ja([],this.a),S=ja([],this.b);this.angle=Math.acos(xl(_,S))}}function gu(n,t){if(0===n.angle)return null;let s;return s=0===n.a[t]?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[t]/n.a[t]/Math.sin(n.angle)-1/Math.tan(n.angle)),s<0||s>1?null:function(u,_,S,O){const F=Math.sin(S);return u*(Math.sin((1-O)*S)/F)+_*(Math.sin(O*S)/F)}(n.a[t],n.b[t],n.angle,Ii(s,0,1))+n.center[t]}function gc(n){if(n.z<=1)return Zu[n.z+2*n.y+n.x];const t=vu(_u(n));return Sa.fromPoints(t)}function $c(n,t,s){return al(n,n,1-s),Vc(n,n,t,s)}function Ku(n,t){const s=wd(t.zoom);if(0===s)return gc(n);const u=_u(n),_=vu(u),S=ic(u.getWest())*t.worldSize,O=ic(u.getEast())*t.worldSize,F=_c(u.getNorth())*t.worldSize,H=_c(u.getSouth())*t.worldSize,q=[S,F,0],se=[O,F,0],ue=[S,H,0],ge=[O,H,0],ke=Ah([],t.globeMatrix);return Zs(q,q,ke),Zs(se,se,ke),Zs(ue,ue,ke),Zs(ge,ge,ke),_[0]=$c(_[0],ue,s),_[1]=$c(_[1],ge,s),_[2]=$c(_[2],se,s),_[3]=$c(_[3],q,s),Sa.fromPoints(_)}function Ju(n,t,s){for(const u of n)Zs(u,u,t),al(u,u,s)}function _u({x:n,y:t,z:s}){const u=1/(1<<s),_=new ps(Rl(n*u),Ps((t+1)*u)),S=new ps(Rl((n+1)*u),Ps(t*u));return new kc(_,S)}function vu(n){const t=ti(n.getNorth()),s=ti(n.getSouth()),u=Math.cos(t),_=Math.cos(s),S=Math.sin(t),O=Math.sin(s),F=n.getWest(),H=n.getEast();return[bd(_,O,F),bd(_,O,H),bd(u,S,H),bd(u,S,F)]}function bd(n,t,s,u=mc){return s=ti(s),[n*Math.sin(s)*u,-t*u,n*Math.cos(s)*u]}function xd(n,t,s){return bd(Math.cos(ti(n)),Math.sin(ti(n)),t,s)}function Vl(n,t,s,u){const _=1<<s.z,S=(n/qn+s.x)/_;return xd(Ps((t/qn+s.y)/_),Rl(S),u)}function od({min:n,max:t}){return Tp/Math.max(t[0]-n[0],t[1]-n[1],t[2]-n[2])}const Bh=new Float64Array(16);function Wd(n){const t=od(n),s=Dh(Bh,[t,t,t]);return Ql(s,s,((u=[])[0]=-(_=n.min)[0],u[1]=-_[1],u[2]=-_[2],u));var u,_}function ua(n){const t=(u=n.min,(s=Bh)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=u[0],s[13]=u[1],s[14]=u[2],s[15]=1,s);var s,u;const _=1/od(n);return pc(t,t,[_,_,_])}function yu(n,t,s,u,_){const S=function(H){const q=qn/(2*Math.PI);return H/(2*Math.PI)/q}(s),O=[n,t,-s/(2*Math.PI)],F=Jl(new Float64Array(16));return Ql(F,F,O),pc(F,F,[S,S,S]),Vd(F,F,ti(-_)),$d(F,F,ti(-u)),F}function wd(n){return ki(Fh,Yh,n)}function Gh(n,t){const s=xd(t.lat,t.lng);return O=(_=vd([],function(Ae){const Ue=xd(Ae._center.lat,Ae._center.lng);let pt=Hu([],fc(0,1,0),Ue);const Rt=Gu([],-Ae.angle,Ue);pt=Zs(pt,pt,Rt),Gu(Rt,-Ae._pitch,pt);const Xt=ja([],Ue);return al(Xt,Xt,Ud(Ae.cameraToCenterDistance/Ae.pixelsPerMeter)),Zs(Xt,Xt,Rt),ec([],Ue,Xt)}(n),s))[0],F=_[1],H=_[2],q=(S=s)[0],se=S[1],ue=S[2],ke=(ge=Math.sqrt(O*O+F*F+H*H)*Math.sqrt(q*q+se*se+ue*ue))&&xl(_,S)/ge,Math.acos(Math.min(Math.max(ke,-1),1));var _,S,O,F,H,q,se,ue,ge,ke}function Qu(n,t){return Gh(n,t)>Math.PI/2*1.01}const Nh=ti(85),eh=Math.cos(Nh),bu=Math.sin(Nh),qd=6371008.8,Xd=2*Math.PI*qd;class no{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new no(Zi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,u=this.lat*s,_=t.lat*s,S=Math.sin(u)*Math.sin(_)+Math.cos(u)*Math.cos(_)*Math.cos((t.lng-this.lng)*s);return qd*Math.acos(Math.min(S,1))}toBounds(t=0){const s=360*t/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new kc(new no(this.lng-u,this.lat-s),new no(this.lng+u,this.lat+s))}toEcef(t){const s=Ud(t);return xd(this.lat,this.lng,mc+s)}static convert(t){if(t instanceof no)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new no(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new no(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ps=no;function th(n){return Xd*Math.cos(n*Math.PI/180)}function ic(n){return(180+n)/360}function _c(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Io(n,t){return n/th(t)}function Rl(n){return 360*n-180}function Ps(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function Ic(n,t){return n*th(Ps(t))}const ha=85.051129;function Vh(n){return 1/Math.cos(n*Math.PI/180)}class Cd{constructor(t,s,u=0){this.x=+t,this.y=+s,this.z=+u}static fromLngLat(t,s=0){const u=ps.convert(t);return new Cd(ic(u.lng),_c(u.lat),Io(s,u.lat))}toLngLat(){return new ps(Rl(this.x),Ps(this.y))}toAltitude(){return Ic(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Xd*Vh(Ps(this.y))}}function xu(n,t,s,u,_,S,O,F,H){const q=(t+u)/2,se=(s+_)/2,ue=new rt(q,se);F(ue),function(ge,ke,Ae,Ue,pt,Rt){const Xt=Ae-pt,Lt=Ue-Rt;return Math.abs((Ue-ke)*Xt-(Ae-ge)*Lt)/Math.hypot(Xt,Lt)}(ue.x,ue.y,S.x,S.y,O.x,O.y)>=H?(xu(n,t,s,q,se,S,ue,F,H),xu(n,q,se,u,_,ue,O,F,H)):n.push(O)}function wu(n,t,s){let u=n[0],_=u.x,S=u.y;t(u);const O=[u];for(let F=1;F<n.length;F++){const H=n[F],{x:q,y:se}=H;t(H),xu(O,_,S,q,se,u,H,t,s),_=q,S=se,u=H}return O}function Cu(n,t,s,u){if(u(t,s)){const _=t.add(s)._mult(.5);Cu(n,t,_,u),Cu(n,_,s,u)}else n.push(s)}function ih(n,t){let s=n[0];const u=[s];for(let _=1;_<n.length;_++){const S=n[_];Cu(u,s,S,t),s=S}return u}const Eu=Math.pow(2,14)-1,Zd=-Eu-1;function ef(n,t){const s=Math.round(n.x*t),u=Math.round(n.y*t);return n.x=Ii(s,Zd,Eu),n.y=Ii(u,Zd,Eu),(s<n.x||s>n.x+1||u<n.y||u>n.y+1)&&Bi("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function ka(n,t,s){const u=n.loadGeometry(),_=n.extent,S=qn/_;if(t&&s&&s.projection.isReprojectedInTileSpace){const O=1<<t.z,{scale:F,x:H,y:q,projection:se}=s,ue=ge=>{const ke=Rl((t.x+ge.x/_)/O),Ae=Ps((t.y+ge.y/_)/O),Ue=se.project(ke,Ae);ge.x=(Ue.x*F-H)*_,ge.y=(Ue.y*F-q)*_};for(let ge=0;ge<u.length;ge++)if(1!==n.type)u[ge]=wu(u[ge],ue,1);else{const ke=[];for(const Ae of u[ge])Ae.x<0||Ae.x>=_||Ae.y<0||Ae.y>=_||(ue(Ae),ke.push(Ae));u[ge]=ke}}for(const O of u)for(const F of O)ef(F,S);return u}function Ua(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?ka(n):[]}}function Kd(n,t,s,u,_){n.emplaceBack(2*t+(u+1)/2,2*s+(_+1)/2)}function Ed(n,t,s){n.emplaceBack(t.x,t.y,t.z,16384*s[0],16384*s[1],16384*s[2])}class Sd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new yn,this.indexArray=new tr,this.segments=new io,this.programConfigurations=new Yc(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,u,_){const S=this.layers[0],O=[];let F=null;"circle"===S.type&&(F=S.layout.get("circle-sort-key"));for(const{feature:q,id:se,index:ue,sourceLayerIndex:ge}of t){const ke=this.layers[0]._featureFilter.needGeometry,Ae=Ua(q,ke);if(!this.layers[0]._featureFilter.filter(new le(this.zoom),Ae,u))continue;const Ue=F?F.evaluate(Ae,{},u):void 0,pt={id:se,properties:q.properties,type:q.type,sourceLayerIndex:ge,index:ue,geometry:ke?Ae.geometry:ka(q,u,_),patterns:{},sortKey:Ue};O.push(pt)}F&&O.sort((q,se)=>q.sortKey-se.sortKey);let H=null;"globe"===_.projection.name&&(this.globeExtVertexArray=new vn,H=_.projection);for(const q of O){const{geometry:se,index:ue,sourceLayerIndex:ge}=q,ke=t[ue].feature;this.addFeature(q,se,ue,s.availableImages,u,H),s.featureIndex.insert(ke,se,ue,ge,this.index)}}update(t,s,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,u,_)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Oh.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,Mh.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,s,u,_,S,O){for(const F of s)for(const H of F){const q=H.x,se=H.y;if(q<0||q>=qn||se<0||se>=qn)continue;if(O){const ke=O.projectTilePoint(q,se,S),Ae=O.upVector(S,q,se),Ue=this.globeExtVertexArray;Ed(Ue,ke,Ae),Ed(Ue,ke,Ae),Ed(Ue,ke,Ae),Ed(Ue,ke,Ae)}const ue=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),ge=ue.vertexLength;Kd(this.layoutVertexArray,q,se,-1,-1),Kd(this.layoutVertexArray,q,se,1,-1),Kd(this.layoutVertexArray,q,se,1,1),Kd(this.layoutVertexArray,q,se,-1,1),this.indexArray.emplaceBack(ge,ge+1,ge+2),this.indexArray.emplaceBack(ge,ge+2,ge+3),ue.vertexLength+=4,ue.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},_,S)}}function Yo(n,t){for(let s=0;s<n.length;s++)if(ad(t,n[s]))return!0;for(let s=0;s<t.length;s++)if(ad(n,t[s]))return!0;return!!rh(n,t)}function nh(n,t,s){return!!ad(n,t)||!!Su(t,n,s)}function kd(n,t){if(1===n.length)return $h(t,n[0]);for(let s=0;s<t.length;s++){const u=t[s];for(let _=0;_<u.length;_++)if(ad(n,u[_]))return!0}for(let s=0;s<n.length;s++)if($h(t,n[s]))return!0;for(let s=0;s<t.length;s++)if(rh(n,t[s]))return!0;return!1}function Mp(n,t,s){if(n.length>1){if(rh(n,t))return!0;for(let u=0;u<t.length;u++)if(Su(t[u],n,s))return!0}for(let u=0;u<n.length;u++)if(Su(n[u],t,s))return!0;return!1}function rh(n,t){if(0===n.length||0===t.length)return!1;for(let s=0;s<n.length-1;s++){const u=n[s],_=n[s+1];for(let S=0;S<t.length-1;S++)if(tf(u,_,t[S],t[S+1]))return!0}return!1}function tf(n,t,s,u){return $i(n,s,u)!==$i(t,s,u)&&$i(n,t,s)!==$i(n,t,u)}function Su(n,t,s){const u=s*s;if(1===t.length)return n.distSqr(t[0])<u;for(let _=1;_<t.length;_++)if(sh(n,t[_-1],t[_])<u)return!0;return!1}function sh(n,t,s){const u=t.distSqr(s);if(0===u)return n.distSqr(t);const _=((n.x-t.x)*(s.x-t.x)+(n.y-t.y)*(s.y-t.y))/u;return n.distSqr(_<0?t:_>1?s:s.sub(t)._mult(_)._add(t))}function $h(n,t){let s,u,_,S=!1;for(let O=0;O<n.length;O++){s=n[O];for(let F=0,H=s.length-1;F<s.length;H=F++)u=s[F],_=s[H],u.y>t.y!=_.y>t.y&&t.x<(_.x-u.x)*(t.y-u.y)/(_.y-u.y)+u.x&&(S=!S)}return S}function ad(n,t){let s=!1;for(let u=0,_=n.length-1;u<n.length;_=u++){const S=n[u],O=n[_];S.y>t.y!=O.y>t.y&&t.x<(O.x-S.x)*(t.y-S.y)/(O.y-S.y)+S.x&&(s=!s)}return s}function ku(n,t,s,u,_){for(const O of n)if(t<=O.x&&s<=O.y&&u>=O.x&&_>=O.y)return!0;const S=[new rt(t,s),new rt(t,_),new rt(u,_),new rt(u,s)];if(n.length>2)for(const O of S)if(ad(n,O))return!0;for(let O=0;O<n.length-1;O++)if(Jd(n[O],n[O+1],S))return!0;return!1}function Jd(n,t,s){const u=s[0],_=s[2];if(n.x<u.x&&t.x<u.x||n.x>_.x&&t.x>_.x||n.y<u.y&&t.y<u.y||n.y>_.y&&t.y>_.y)return!1;const S=$i(n,t,s[0]);return S!==$i(n,t,s[1])||S!==$i(n,t,s[2])||S!==$i(n,t,s[3])}function Hc(n,t,s){const u=t.paint.get(n).value;return"constant"===u.kind?u.value:s.programConfigurations.get(t.id).getMaxValue(n)}function Td(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function oh(n,t,s,u,_){if(!t[0]&&!t[1])return n;const S=rt.convert(t)._mult(_);"viewport"===s&&S._rotate(-u);const O=[];for(let F=0;F<n.length;F++)O.push(n[F].sub(S));return O}function Hh(n,t,s,u){const _=rt.convert(n)._mult(u);return"viewport"===t&&_._rotate(-s),_}Vn(Sd,"CircleBucket",{omit:["layers"]});const jh=new Bt({"circle-sort-key":new ft(R.layout_circle["circle-sort-key"])});var Uh={paint:new Bt({"circle-radius":new ft(R.paint_circle["circle-radius"]),"circle-color":new ft(R.paint_circle["circle-color"]),"circle-blur":new ft(R.paint_circle["circle-blur"]),"circle-opacity":new ft(R.paint_circle["circle-opacity"]),"circle-translate":new Ge(R.paint_circle["circle-translate"]),"circle-translate-anchor":new Ge(R.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ge(R.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ge(R.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(R.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(R.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(R.paint_circle["circle-stroke-opacity"])}),layout:jh};function ah(n,t,s,u,_,S,O,F,H){if(S&&n.queryGeometry.isAboveHorizon)return!1;S&&(H*=n.pixelToTileUnitsFactor);const q=n.tileID.canonical,se=s.projection.upVectorScale(q,s.center.lat,s.worldSize).metersToTile;for(const ue of t)for(const ge of ue){const ke=ge.add(F),Ae=_&&s.elevation?s.elevation.exaggeration()*_.getElevationAt(ke.x,ke.y,!0):0,Ue=s.projection.projectTilePoint(ke.x,ke.y,q);if(Ae>0){const Lt=s.projection.upVector(q,ke.x,ke.y);Ue.x+=Lt[0]*se*Ae,Ue.y+=Lt[1]*se*Ae,Ue.z+=Lt[2]*se*Ae}const pt=S?ke:Wh(Ue.x,Ue.y,Ue.z,u),Rt=S?n.tilespaceRays.map(Lt=>dh(Lt,Ae)):n.queryGeometry.screenGeometry,Xt=rd([],[Ue.x,Ue.y,Ue.z,1],u);if(!O&&S?H*=Xt[3]/s.cameraToCenterDistance:O&&!S&&(H*=s.cameraToCenterDistance/Xt[3]),S){const Lt=Ps((ge.y/qn+q.y)/(1<<q.z));H/=s.projection.pixelsPerMeter(Lt,1)/Io(1,Lt)}if(nh(Rt,pt,H))return!0}return!1}function Wh(n,t,s,u){const _=rd([],[n,t,s,1],u);return new rt(_[0]/_[3],_[1]/_[3])}const lh=fc(0,0,0),ch=fc(0,0,1);function dh(n,t){const s=Vu();return lh[2]=t,n.intersectsPlane(lh,ch,s),new rt(s[0],s[1])}class qh extends Sd{}function Xh(n,{width:t,height:s},u,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==t*s*u)throw new RangeError("mismatched image size")}else _=new Uint8Array(t*s*u);return n.width=t,n.height=s,n.data=_,n}function Zh(n,t,s){const{width:u,height:_}=t;u===n.width&&_===n.height||(uh(n,t,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,u),height:Math.min(n.height,_)},s),n.width=u,n.height=_,n.data=t.data)}function uh(n,t,s,u,_,S){if(0===_.width||0===_.height)return t;if(_.width>n.width||_.height>n.height||s.x>n.width-_.width||s.y>n.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>t.width||_.height>t.height||u.x>t.width-_.width||u.y>t.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const O=n.data,F=t.data;for(let H=0;H<_.height;H++){const q=((s.y+H)*n.width+s.x)*S,se=((u.y+H)*t.width+u.x)*S;for(let ue=0;ue<_.width*S;ue++)F[se+ue]=O[q+ue]}return t}Vn(qh,"HeatmapBucket",{omit:["layers"]});class Oc{constructor(t,s){Xh(this,t,1,s)}resize(t){Zh(this,new Oc(t),1)}clone(){return new Oc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,u,_,S){uh(t,s,u,_,S,1)}}class ll{constructor(t,s){Xh(this,t,4,s)}resize(t){Zh(this,new ll(t),4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ll({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,u,_,S){uh(t,s,u,_,S,4)}}Vn(Oc,"AlphaImage"),Vn(ll,"RGBAImage");var Ap={paint:new Bt({"heatmap-radius":new ft(R.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(R.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ge(R.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dt(R.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ge(R.paint_heatmap["heatmap-opacity"])})};function hh(n){const t={},s=n.resolution||256,u=n.clips?n.clips.length:1,_=n.image||new ll({width:s,height:u}),S=(O,F,H)=>{t[n.evaluationKey]=H;const q=n.expression.evaluate(t);_.data[O+F+0]=Math.floor(255*q.r/q.a),_.data[O+F+1]=Math.floor(255*q.g/q.a),_.data[O+F+2]=Math.floor(255*q.b/q.a),_.data[O+F+3]=Math.floor(255*q.a)};if(n.clips)for(let O=0,F=0;O<u;++O,F+=4*s)for(let H=0,q=0;H<s;H++,q+=4){const se=H/(s-1),{start:ue,end:ge}=n.clips[O];S(F,q,ue*(1-se)+ge*se)}else for(let O=0,F=0;O<s;O++,F+=4)S(0,F,O/(s-1));return _}var Dp={paint:new Bt({"hillshade-illumination-direction":new Ge(R.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ge(R.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ge(R.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ge(R.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ge(R.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ge(R.paint_hillshade["hillshade-accent-color"])})};const Kh=fi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rp}=Kh;var Qd={exports:{}};function Id(n,t,s){s=s||2;var u,_,S,O,F,H,q,se=t&&t.length,ue=se?t[0]*s:n.length,ge=Od(n,0,ue,s,!0),ke=[];if(!ge||ge.next===ge.prev)return ke;if(se&&(ge=function(Ue,pt,Rt,Xt){var Lt,Wt,li,si=[];for(Lt=0,Wt=pt.length;Lt<Wt;Lt++)(li=Od(Ue,pt[Lt]*Xt,Lt<Wt-1?pt[Lt+1]*Xt:Ue.length,Xt,!1))===li.next&&(li.steiner=!0),si.push(Yp(li));for(si.sort(ph),Lt=0;Lt<si.length;Lt++)Rt=Qh(si[Lt],Rt);return Rt}(n,t,ge,s)),n.length>80*s){u=S=n[0],_=O=n[1];for(var Ae=s;Ae<ue;Ae+=s)(F=n[Ae])<u&&(u=F),(H=n[Ae+1])<_&&(_=H),F>S&&(S=F),H>O&&(O=H);q=0!==(q=Math.max(S-u,O-_))?32767/q:0}return eu(ge,ke,s,u,_,q,0),ke}function Od(n,t,s,u,_){var S,O;if(_===$l(n,t,s,u)>0)for(S=t;S<s;S+=u)O=ip(S,n[S],n[S+1],O);else for(S=s-u;S>=t;S-=u)O=ip(S,n[S],n[S+1],O);return O&&cd(O,O.next)&&(rc(O),O=O.next),O}function ld(n,t){if(!n)return n;t||(t=n);var s,u=n;do{if(s=!1,u.steiner||!cd(u,u.next)&&0!==zs(u.prev,u,u.next))u=u.next;else{if(rc(u),(u=t=u.prev)===u.next)break;s=!0}}while(s||u!==t);return t}function eu(n,t,s,u,_,S,O){if(n){!O&&S&&function(se,ue,ge,ke){var Ae=se;do{0===Ae.z&&(Ae.z=fh(Ae.x,Ae.y,ue,ge,ke)),Ae.prevZ=Ae.prev,Ae.nextZ=Ae.next,Ae=Ae.next}while(Ae!==se);Ae.prevZ.nextZ=null,Ae.prevZ=null,function(Ue){var pt,Rt,Xt,Lt,Wt,li,si,Ni,Fi=1;do{for(Rt=Ue,Ue=null,Wt=null,li=0;Rt;){for(li++,Xt=Rt,si=0,pt=0;pt<Fi&&(si++,Xt=Xt.nextZ);pt++);for(Ni=Fi;si>0||Ni>0&&Xt;)0!==si&&(0===Ni||!Xt||Rt.z<=Xt.z)?(Lt=Rt,Rt=Rt.nextZ,si--):(Lt=Xt,Xt=Xt.nextZ,Ni--),Wt?Wt.nextZ=Lt:Ue=Lt,Lt.prevZ=Wt,Wt=Lt;Rt=Xt}Wt.nextZ=null,Fi*=2}while(li>1)}(Ae)}(n,u,_,S);for(var F,H,q=n;n.prev!==n.next;)if(F=n.prev,H=n.next,S?Lp(n,u,_,S):Jh(n))t.push(F.i/s|0),t.push(n.i/s|0),t.push(H.i/s|0),rc(n),n=H.next,q=H.next;else if((n=H)===q){O?1===O?eu(n=Pp(ld(n),t,s),t,s,u,_,S,2):2===O&&zp(n,t,s,u,_,S):eu(ld(n),t,s,u,_,S,1);break}}}function Jh(n){var t=n.prev,s=n,u=n.next;if(zs(t,s,u)>=0)return!1;for(var _=t.x,S=s.x,O=u.x,F=t.y,H=s.y,q=u.y,se=_<S?_<O?_:O:S<O?S:O,ue=F<H?F<q?F:q:H<q?H:q,ge=_>S?_>O?_:O:S>O?S:O,ke=F>H?F>q?F:q:H>q?H:q,Ae=u.next;Ae!==t;){if(Ae.x>=se&&Ae.x<=ge&&Ae.y>=ue&&Ae.y<=ke&&Md(_,F,S,H,O,q,Ae.x,Ae.y)&&zs(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.next}return!0}function Lp(n,t,s,u){var _=n.prev,S=n,O=n.next;if(zs(_,S,O)>=0)return!1;for(var F=_.x,H=S.x,q=O.x,se=_.y,ue=S.y,ge=O.y,ke=F<H?F<q?F:q:H<q?H:q,Ae=se<ue?se<ge?se:ge:ue<ge?ue:ge,Ue=F>H?F>q?F:q:H>q?H:q,pt=se>ue?se>ge?se:ge:ue>ge?ue:ge,Rt=fh(ke,Ae,t,s,u),Xt=fh(Ue,pt,t,s,u),Lt=n.prevZ,Wt=n.nextZ;Lt&&Lt.z>=Rt&&Wt&&Wt.z<=Xt;){if(Lt.x>=ke&&Lt.x<=Ue&&Lt.y>=Ae&&Lt.y<=pt&&Lt!==_&&Lt!==O&&Md(F,se,H,ue,q,ge,Lt.x,Lt.y)&&zs(Lt.prev,Lt,Lt.next)>=0||(Lt=Lt.prevZ,Wt.x>=ke&&Wt.x<=Ue&&Wt.y>=Ae&&Wt.y<=pt&&Wt!==_&&Wt!==O&&Md(F,se,H,ue,q,ge,Wt.x,Wt.y)&&zs(Wt.prev,Wt,Wt.next)>=0))return!1;Wt=Wt.nextZ}for(;Lt&&Lt.z>=Rt;){if(Lt.x>=ke&&Lt.x<=Ue&&Lt.y>=Ae&&Lt.y<=pt&&Lt!==_&&Lt!==O&&Md(F,se,H,ue,q,ge,Lt.x,Lt.y)&&zs(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.prevZ}for(;Wt&&Wt.z<=Xt;){if(Wt.x>=ke&&Wt.x<=Ue&&Wt.y>=Ae&&Wt.y<=pt&&Wt!==_&&Wt!==O&&Md(F,se,H,ue,q,ge,Wt.x,Wt.y)&&zs(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.nextZ}return!0}function Pp(n,t,s){var u=n;do{var _=u.prev,S=u.next.next;!cd(_,S)&&mh(_,u,u.next,S)&&nc(_,S)&&nc(S,_)&&(t.push(_.i/s|0),t.push(u.i/s|0),t.push(S.i/s|0),rc(u),rc(u.next),u=n=S),u=u.next}while(u!==n);return ld(u)}function zp(n,t,s,u,_,S){var O=n;do{for(var F=O.next.next;F!==O.prev;){if(O.i!==F.i&&ep(O,F)){var H=tp(O,F);return O=ld(O,O.next),H=ld(H,H.next),eu(O,t,s,u,_,S,0),void eu(H,t,s,u,_,S,0)}F=F.next}O=O.next}while(O!==n)}function ph(n,t){return n.x-t.x}function Qh(n,t){var s=function(_,S){var O,F=S,H=_.x,q=_.y,se=-1/0;do{if(q<=F.y&&q>=F.next.y&&F.next.y!==F.y){var ue=F.x+(q-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(ue<=H&&ue>se&&(se=ue,O=F.x<F.next.x?F:F.next,ue===H))return O}F=F.next}while(F!==S);if(!O)return null;var ge,ke=O,Ae=O.x,Ue=O.y,pt=1/0;F=O;do{H>=F.x&&F.x>=Ae&&H!==F.x&&Md(q<Ue?H:se,q,Ae,Ue,q<Ue?se:H,q,F.x,F.y)&&(ge=Math.abs(q-F.y)/(H-F.x),nc(F,_)&&(ge<pt||ge===pt&&(F.x>O.x||F.x===O.x&&Fp(O,F)))&&(O=F,pt=ge)),F=F.next}while(F!==ke);return O}(n,t);if(!s)return t;var u=tp(s,n);return ld(u,u.next),ld(s,s.next)}function Fp(n,t){return zs(n.prev,n,t.prev)<0&&zs(t.next,n,n.next)<0}function fh(n,t,s,u,_){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-s)*_|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*_|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Yp(n){var t=n,s=n;do{(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next}while(t!==n);return s}function Md(n,t,s,u,_,S,O,F){return(_-O)*(t-F)>=(n-O)*(S-F)&&(n-O)*(u-F)>=(s-O)*(t-F)&&(s-O)*(S-F)>=(_-O)*(u-F)}function ep(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(s,u){var _=s;do{if(_.i!==s.i&&_.next.i!==s.i&&_.i!==u.i&&_.next.i!==u.i&&mh(_,_.next,s,u))return!0;_=_.next}while(_!==s);return!1}(n,t)&&(nc(n,t)&&nc(t,n)&&function(s,u){var _=s,S=!1,O=(s.x+u.x)/2,F=(s.y+u.y)/2;do{_.y>F!=_.next.y>F&&_.next.y!==_.y&&O<(_.next.x-_.x)*(F-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next}while(_!==s);return S}(n,t)&&(zs(n.prev,n,t.prev)||zs(n,t.prev,t))||cd(n,t)&&zs(n.prev,n,n.next)>0&&zs(t.prev,t,t.next)>0)}function zs(n,t,s){return(t.y-n.y)*(s.x-t.x)-(t.x-n.x)*(s.y-t.y)}function cd(n,t){return n.x===t.x&&n.y===t.y}function mh(n,t,s,u){var _=Ad(zs(n,t,s)),S=Ad(zs(n,t,u)),O=Ad(zs(s,u,n)),F=Ad(zs(s,u,t));return _!==S&&O!==F||!(0!==_||!Mc(n,s,t))||!(0!==S||!Mc(n,u,t))||!(0!==O||!Mc(s,n,u))||!(0!==F||!Mc(s,t,u))}function Mc(n,t,s){return t.x<=Math.max(n.x,s.x)&&t.x>=Math.min(n.x,s.x)&&t.y<=Math.max(n.y,s.y)&&t.y>=Math.min(n.y,s.y)}function Ad(n){return n>0?1:n<0?-1:0}function nc(n,t){return zs(n.prev,n,n.next)<0?zs(n,t,n.next)>=0&&zs(n,n.prev,t)>=0:zs(n,t,n.prev)<0||zs(n,n.next,t)<0}function tp(n,t){var s=new gh(n.i,n.x,n.y),u=new gh(t.i,t.x,t.y),_=n.next,S=t.prev;return n.next=t,t.prev=n,s.next=_,_.prev=s,u.next=s,s.prev=u,S.next=u,u.prev=S,u}function ip(n,t,s,u){var _=new gh(n,t,s);return u?(_.next=u.next,_.prev=u,u.next.prev=_,u.next=_):(_.prev=_,_.next=_),_}function rc(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function gh(n,t,s){this.i=n,this.x=t,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $l(n,t,s,u){for(var _=0,S=t,O=s-u;S<s;S+=u)_+=(n[O]-n[S])*(n[S+1]+n[O+1]),O=S;return _}Qd.exports=Id,Qd.exports.default=Id,Id.deviation=function(n,t,s,u){var _=t&&t.length,S=Math.abs($l(n,0,_?t[0]*s:n.length,s));if(_)for(var O=0,F=t.length;O<F;O++)S-=Math.abs($l(n,t[O]*s,O<F-1?t[O+1]*s:n.length,s));var H=0;for(O=0;O<u.length;O+=3){var q=u[O]*s,se=u[O+1]*s,ue=u[O+2]*s;H+=Math.abs((n[q]-n[ue])*(n[se+1]-n[q+1])-(n[q]-n[se])*(n[ue+1]-n[q+1]))}return 0===S&&0===H?0:Math.abs((H-S)/S)},Id.flatten=function(n){for(var t=n[0][0].length,s={vertices:[],holes:[],dimensions:t},u=0,_=0;_<n.length;_++){for(var S=0;S<n[_].length;S++)for(var O=0;O<t;O++)s.vertices.push(n[_][S][O]);_>0&&s.holes.push(u+=n[_-1].length)}return s};var Ac=ze(Qd.exports);function np(n,t,s,u,_){_h(n,t,s||0,u||n.length-1,_||Hl)}function _h(n,t,s,u,_){for(;u>s;){if(u-s>600){var S=u-s+1,O=t-s+1,F=Math.log(S),H=.5*Math.exp(2*F/3),q=.5*Math.sqrt(F*H*(S-H)/S)*(O-S/2<0?-1:1);_h(n,t,Math.max(s,Math.floor(t-O*H/S+q)),Math.min(u,Math.floor(t+(S-O)*H/S+q)),_)}var se=n[t],ue=s,ge=u;for(jc(n,s,t),_(n[u],se)>0&&jc(n,s,u);ue<ge;){for(jc(n,ue,ge),ue++,ge--;_(n[ue],se)<0;)ue++;for(;_(n[ge],se)>0;)ge--}0===_(n[s],se)?jc(n,s,ge):jc(n,++ge,u),ge<=t&&(s=ge+1),t<=ge&&(u=ge-1)}}function jc(n,t,s){var u=n[t];n[t]=n[s],n[s]=u}function Hl(n,t){return n<t?-1:n>t?1:0}function Uc(n,t){const s=n.length;if(s<=1)return[n];const u=[];let _,S;for(let O=0;O<s;O++){const F=en(n[O]);0!==F&&(n[O].area=Math.abs(F),void 0===S&&(S=F<0),S===F<0?(_&&u.push(_),_=[n[O]]):_.push(n[O]))}if(_&&u.push(_),t>1)for(let O=0;O<u.length;O++)u[O].length<=t||(np(u[O],t,1,u[O].length-1,nf),u[O]=u[O].slice(0,t));return u}function nf(n,t){return t.area-n.area}function Tu(n,t,s){const u=s.patternDependencies;let _=!1;for(const S of t){const O=S.paint.get(`${n}-pattern`);O.isConstant()||(_=!0);const F=O.constantOr(null);F&&(_=!0,u[F]=!0)}return _}function vh(n,t,s,u,_){const S=_.patternDependencies;for(const O of t){const F=O.paint.get(`${n}-pattern`).value;if("constant"!==F.kind){let H=F.evaluate({zoom:u},s,{},_.availableImages);H=H&&H.name?H.name:H,S[H]=!0,s.patterns[O.id]=H}}return s}class Wc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yn,this.indexArray=new tr,this.indexArray2=new Qr,this.programConfigurations=new Yc(t.layers,t.zoom),this.segments=new io,this.segments2=new io,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=t.projection}populate(t,s,u,_){this.hasPattern=Tu("fill",this.layers,s);const S=this.layers[0].layout.get("fill-sort-key"),O=[];for(const{feature:F,id:H,index:q,sourceLayerIndex:se}of t){const ue=this.layers[0]._featureFilter.needGeometry,ge=Ua(F,ue);if(!this.layers[0]._featureFilter.filter(new le(this.zoom),ge,u))continue;const ke=S?S.evaluate(ge,{},u,s.availableImages):void 0,Ae={id:H,properties:F.properties,type:F.type,sourceLayerIndex:se,index:q,geometry:ue?ge.geometry:ka(F,u,_),patterns:{},sortKey:ke};O.push(Ae)}S&&O.sort((F,H)=>F.sortKey-H.sortKey);for(const F of O){const{geometry:H,index:q,sourceLayerIndex:se}=F;if(this.hasPattern){const ue=vh("fill",this.layers,F,this.zoom,s);this.patternFeatures.push(ue)}else this.addFeature(F,H,q,u,{},s.availableImages);s.featureIndex.insert(t[q].feature,H,q,se,this.index)}}update(t,s,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,u,_)}addFeatures(t,s,u,_,S){for(const O of this.patternFeatures)this.addFeature(O,O.geometry,O.index,s,u,_)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rp),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,u,_,S,O=[]){for(const F of Uc(s,500)){let H=0;for(const Ae of F)H+=Ae.length;const q=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray),se=q.vertexLength,ue=[],ge=[];for(const Ae of F){if(0===Ae.length)continue;Ae!==F[0]&&ge.push(ue.length/2);const Ue=this.segments2.prepareSegment(Ae.length,this.layoutVertexArray,this.indexArray2),pt=Ue.vertexLength;this.layoutVertexArray.emplaceBack(Ae[0].x,Ae[0].y),this.indexArray2.emplaceBack(pt+Ae.length-1,pt),ue.push(Ae[0].x),ue.push(Ae[0].y);for(let Rt=1;Rt<Ae.length;Rt++)this.layoutVertexArray.emplaceBack(Ae[Rt].x,Ae[Rt].y),this.indexArray2.emplaceBack(pt+Rt-1,pt+Rt),ue.push(Ae[Rt].x),ue.push(Ae[Rt].y);Ue.vertexLength+=Ae.length,Ue.primitiveLength+=Ae.length}const ke=Ac(ue,ge);for(let Ae=0;Ae<ke.length;Ae+=3)this.indexArray.emplaceBack(se+ke[Ae],se+ke[Ae+1],se+ke[Ae+2]);q.vertexLength+=H,q.primitiveLength+=ke.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,S,O,_)}}Vn(Wc,"FillBucket",{omit:["layers","patternFeatures"]});const rp=new Bt({"fill-sort-key":new ft(R.layout_fill["fill-sort-key"])});var jl={paint:new Bt({"fill-antialias":new Ge(R.paint_fill["fill-antialias"]),"fill-opacity":new ft(R.paint_fill["fill-opacity"]),"fill-color":new ft(R.paint_fill["fill-color"]),"fill-outline-color":new ft(R.paint_fill["fill-outline-color"]),"fill-translate":new Ge(R.paint_fill["fill-translate"]),"fill-translate-anchor":new Ge(R.paint_fill["fill-translate-anchor"]),"fill-pattern":new ft(R.paint_fill["fill-pattern"])}),layout:rp};const rf=fi([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Bp=fi([{name:"a_centroid_pos",components:2,type:"Uint16"}]),sp=fi([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:tu}=rf;var Iu={},qc=Jt,op=Dd;function Dd(n,t,s,u,_){this.properties={},this.extent=s,this.type=0,this._pbf=n,this._geometry=-1,this._keys=u,this._values=_,n.readFields(Gp,this,t)}function Gp(n,t,s){1==n?t.id=s.readVarint():2==n?function(u,_){for(var S=u.readVarint()+u.pos;u.pos<S;){var O=_._keys[u.readVarint()],F=_._values[u.readVarint()];_.properties[O]=F}}(s,t):3==n?t.type=s.readVarint():4==n&&(t._geometry=s.pos)}function ap(n){for(var t,s,u=0,_=0,S=n.length,O=S-1;_<S;O=_++)u+=((s=n[O]).x-(t=n[_]).x)*(t.y+s.y);return u}Dd.types=["Unknown","Point","LineString","Polygon"],Dd.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,s=n.readVarint()+n.pos,u=1,_=0,S=0,O=0,F=[];n.pos<s;){if(_<=0){var H=n.readVarint();u=7&H,_=H>>3}if(_--,1===u||2===u)S+=n.readSVarint(),O+=n.readSVarint(),1===u&&(t&&F.push(t),t=[]),t.push(new qc(S,O));else{if(7!==u)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&F.push(t),F},Dd.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,s=1,u=0,_=0,S=0,O=1/0,F=-1/0,H=1/0,q=-1/0;n.pos<t;){if(u<=0){var se=n.readVarint();s=7&se,u=se>>3}if(u--,1===s||2===s)(_+=n.readSVarint())<O&&(O=_),_>F&&(F=_),(S+=n.readSVarint())<H&&(H=S),S>q&&(q=S);else if(7!==s)throw new Error("unknown command "+s)}return[O,H,F,q]},Dd.prototype.toGeoJSON=function(n,t,s){var u,_,S=this.extent*Math.pow(2,s),O=this.extent*n,F=this.extent*t,H=this.loadGeometry(),q=Dd.types[this.type];function se(ke){for(var Ae=0;Ae<ke.length;Ae++){var Ue=ke[Ae];ke[Ae]=[360*(Ue.x+O)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ue.y+F)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var ue=[];for(u=0;u<H.length;u++)ue[u]=H[u][0];se(H=ue);break;case 2:for(u=0;u<H.length;u++)se(H[u]);break;case 3:for(H=function(ke){var Ae=ke.length;if(Ae<=1)return[ke];for(var Ue,pt,Rt=[],Xt=0;Xt<Ae;Xt++){var Lt=ap(ke[Xt]);0!==Lt&&(void 0===pt&&(pt=Lt<0),pt===Lt<0?(Ue&&Rt.push(Ue),Ue=[ke[Xt]]):Ue.push(ke[Xt]))}return Ue&&Rt.push(Ue),Rt}(H),u=0;u<H.length;u++)for(_=0;_<H[u].length;_++)se(H[u][_])}1===H.length?H=H[0]:q="Multi"+q;var ge={type:"Feature",geometry:{type:q,coordinates:H},properties:this.properties};return"id"in this&&(ge.id=this.id),ge};var Np=op,v=P;function P(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(k,this,t),this.length=this._features.length}function k(n,t,s){15===n?t.version=s.readVarint():1===n?t.name=s.readString():5===n?t.extent=s.readVarint():2===n?t._features.push(s.pos):3===n?t._keys.push(s.readString()):4===n&&t._values.push(function(u){for(var _=null,S=u.readVarint()+u.pos;u.pos<S;){var O=u.readVarint()>>3;_=1===O?u.readString():2===O?u.readFloat():3===O?u.readDouble():4===O?u.readVarint64():5===O?u.readVarint():6===O?u.readSVarint():7===O?u.readBoolean():null}return _}(s))}P.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new Np(this._pbf,t,this.extent,this._keys,this._values)};var j=v;function ee(n,t,s){if(3===n){var u=new j(s,s.readVarint()+s.pos);u.length&&(t[u.name]=u)}}var Me=Iu.VectorTile=function(n,t){this.layers=n.readFields(ee,{},t)},zt=Iu.VectorTileFeature=op;function qi(n,t,s,u){const _=[],S=0===u?(O,F,H,q,se,ue)=>{O.push(new rt(ue,H+(ue-F)/(q-F)*(se-H)))}:(O,F,H,q,se,ue)=>{O.push(new rt(F+(ue-H)/(se-H)*(q-F),ue))};for(const O of n){const F=[];for(const H of O){if(H.length<=2)continue;const q=[];for(let ge=0;ge<H.length-1;ge++){const ke=H[ge].x,Ae=H[ge].y,Ue=H[ge+1].x,pt=H[ge+1].y,Rt=0===u?ke:Ae,Xt=0===u?Ue:pt;Rt<t?Xt>t&&S(q,ke,Ae,Ue,pt,t):Rt>s?Xt<s&&S(q,ke,Ae,Ue,pt,s):q.push(H[ge]),Xt<t&&Rt>=t&&S(q,ke,Ae,Ue,pt,t),Xt>s&&Rt<=s&&S(q,ke,Ae,Ue,pt,s)}let se=H[H.length-1];const ue=0===u?se.x:se.y;ue>=t&&ue<=s&&q.push(se),q.length&&(se=q[q.length-1],q[0].x===se.x&&q[0].y===se.y||q.push(q[0]),F.push(q))}F.length&&_.push(F)}return _}Iu.VectorTileLayer=v;const Rn=zt.types,ss=Math.pow(2,13);function Ms(n,t,s,u,_,S,O,F){n.emplaceBack((t<<1)+O,(s<<1)+S,(Math.floor(u*ss)<<1)+_,Math.round(F))}function Bo(n,t,s){n.emplaceBack(t.x,t.y,t.z,16384*s[0],16384*s[1],16384*s[2])}class Wa{constructor(){this.acc=new rt(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new rt(t.x,t.y),this.max=new rt(t.x,t.y))}append(t,s){this.currentPolyCount.edges++,this.acc._add(t);const u=this.min,_=this.max;t.x<u.x?u.x=t.x:t.x>_.x&&(_.x=t.x),t.y<u.y?u.y=t.y:t.y>_.y&&(_.y=t.y),((0===t.x||t.x===qn)&&t.x===s.x)!=((0===t.y||t.y===qn)&&t.y===s.y)&&this.processBorderOverlap(t,s),s.x<0!=t.x<0&&this.addBorderIntersection(0,Cr(s.y,t.y,(0-s.x)/(t.x-s.x))),s.x>qn!=t.x>qn&&this.addBorderIntersection(1,Cr(s.y,t.y,(qn-s.x)/(t.x-s.x))),s.y<0!=t.y<0&&this.addBorderIntersection(2,Cr(s.x,t.x,(0-s.y)/(t.y-s.y))),s.y>qn!=t.y>qn&&this.addBorderIntersection(3,Cr(s.x,t.x,(qn-s.y)/(t.y-s.y)))}addBorderIntersection(t,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[t];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(t,s){if(t.x===s.x){if(t.y===s.y)return;const u=0===t.x?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,t.y)}else{const u=0===t.y?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,t.x)}}centroid(){const t=this.polyCount.reduce((s,u)=>s+u.edges,0);return 0!==t?this.acc.div(t)._round():new rt(0,0)}span(){return new rt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,s)=>t+ +(s[0]!==Number.MAX_VALUE),0)}}class vc{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new rn,this.centroidVertexArray=new vr,this.indexArray=new tr,this.programConfigurations=new Yc(t.layers,t.zoom),this.segments=new io,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=t.enableTerrain}populate(t,s,u,_){this.features=[],this.hasPattern=Tu("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(S){const O=Math.exp(Math.PI*(1-S.y/(1<<S.z)*2));return 80150034*O/(O*O+1)/qn/(1<<S.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:S,id:O,index:F,sourceLayerIndex:H}of t){const q=this.layers[0]._featureFilter.needGeometry,se=Ua(S,q);if(!this.layers[0]._featureFilter.filter(new le(this.zoom),se,u))continue;const ue={id:O,sourceLayerIndex:H,index:F,geometry:q?se.geometry:ka(S,u,_),properties:S.properties,type:S.type,patterns:{}},ge=this.layoutVertexArray.length;this.hasPattern?this.features.push(vh("fill-extrusion",this.layers,ue,this.zoom,s)):this.addFeature(ue,ue.geometry,F,u,{},s.availableImages,_),s.featureIndex.insert(S,ue.geometry,F,H,this.index,ge)}this.sortBorders()}addFeatures(t,s,u,_,S){for(const O of this.features){const{geometry:F}=O;this.addFeature(O,F,O.index,s,u,_,S)}this.sortBorders()}update(t,s,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,u,_)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,tu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,sp.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Bp.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,u,_,S,O,F){const H=[new rt(0,0),new rt(qn,qn)],q=F.projection,se="globe"===q.name,ue=this.enableTerrain&&!se?new Wa:null,ge="Polygon"===Rn[t.type];se&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new vn);const ke=Uc(s,500);for(let Rt=ke.length-1;Rt>=0;Rt--){const Xt=ke[Rt];(0===Xt.length||(Ae=Xt[0]).every(Lt=>Lt.x<=0)||Ae.every(Lt=>Lt.x>=qn)||Ae.every(Lt=>Lt.y<=0)||Ae.every(Lt=>Lt.y>=qn))&&ke.splice(Rt,1)}var Ae;let Ue;if(se)Ue=of(ke,H,_);else{Ue=[];for(const Rt of ke)Ue.push({polygon:Rt,bounds:H})}const pt=ge?this.edgeRadius:0;for(const{polygon:Rt,bounds:Xt}of Ue){let Lt=0,Wt=0;for(const si of Rt)ge&&!si[0].equals(si[si.length-1])&&si.push(si[0]),Wt+=ge?si.length-1:si.length;const li=this.segments.prepareSegment((ge?5:4)*Wt,this.layoutVertexArray,this.indexArray);if(ge){const si=[],Ni=[];Lt=li.vertexLength;for(const ln of Rt){let Sn,Ui;ln.length&&ln!==Rt[0]&&Ni.push(si.length/2),Sn=ln[1].sub(ln[0])._perp()._unit();for(let un=1;un<ln.length;un++){const hn=ln[un],Cn=ln[un===ln.length-1?1:un+1];let{x:kn,y:sn}=hn;if(pt){Ui=Cn.sub(hn)._perp()._unit();const Fn=Sn.add(Ui)._unit(),Kn=pt*Math.min(4,1/(Sn.x*Fn.x+Sn.y*Fn.y));kn+=Kn*Fn.x,sn+=Kn*Fn.y,Sn=Ui}Ms(this.layoutVertexArray,kn,sn,0,0,1,1,0),li.vertexLength++,si.push(hn.x,hn.y),se&&Bo(this.layoutVertexExtArray,q.projectTilePoint(kn,sn,_),q.upVector(_,kn,sn))}}const Fi=Ac(si,Ni);for(let ln=0;ln<Fi.length;ln+=3)this.indexArray.emplaceBack(Lt+Fi[ln],Lt+Fi[ln+2],Lt+Fi[ln+1]),li.primitiveLength++}for(const si of Rt){ue&&si.length&&ue.startRing(si[0]);let Ni,Fi,ln,Sn=si.length>4&&Ou(si[si.length-2],si[0],si[1]),Ui=pt?iu(si[si.length-2],si[0],si[1],pt):0;Fi=si[1].sub(si[0])._perp()._unit();let un=!0;for(let hn=1,Cn=0;hn<si.length;hn++){let kn=si[hn-1],sn=si[hn];const Fn=si[hn===si.length-1?1:hn+1];if(ue&&ge&&ue.currentPolyCount.top++,sc(sn,kn,Xt)){pt&&(Fi=Fn.sub(sn)._perp()._unit(),un=!un);continue}ue&&ue.append(sn,kn);const Kn=sn.sub(kn)._perp(),Bn=Kn.x/(Math.abs(Kn.x)+Math.abs(Kn.y)),Nr=Kn.y>0?1:0,In=kn.dist(sn);if(Cn+In>32768&&(Cn=0),pt){ln=Fn.sub(sn)._perp()._unit();let $r=Ul(kn,sn,Fn,yh(Fi,ln),pt);isNaN($r)&&($r=0);const Sr=sn.sub(kn)._unit();kn=kn.add(Sr.mult(Ui))._round(),sn=sn.add(Sr.mult(-$r))._round(),Ui=$r,Fi=ln}const gr=li.vertexLength,Vr=si.length>4&&Ou(kn,sn,Fn);let ys=lp(Cn,Sn,un);if(Ms(this.layoutVertexArray,kn.x,kn.y,Bn,Nr,0,0,ys),Ms(this.layoutVertexArray,kn.x,kn.y,Bn,Nr,0,1,ys),Cn+=In,ys=lp(Cn,Vr,!un),Sn=Vr,Ms(this.layoutVertexArray,sn.x,sn.y,Bn,Nr,0,0,ys),Ms(this.layoutVertexArray,sn.x,sn.y,Bn,Nr,0,1,ys),li.vertexLength+=4,this.indexArray.emplaceBack(gr+0,gr+1,gr+2),this.indexArray.emplaceBack(gr+1,gr+3,gr+2),li.primitiveLength+=2,pt){const $r=Lt+(1===hn?si.length-2:hn-2),Sr=1===hn?Lt:$r+1;if(this.indexArray.emplaceBack(gr+1,$r,gr+3),this.indexArray.emplaceBack($r,Sr,gr+3),li.primitiveLength+=2,void 0===Ni&&(Ni=gr),!sc(Fn,si[hn],Xt)){const so=hn===si.length-1?Ni:li.vertexLength;this.indexArray.emplaceBack(gr+2,gr+3,so),this.indexArray.emplaceBack(gr+3,so+1,so),this.indexArray.emplaceBack(gr+3,Sr,so+1),li.primitiveLength+=3}un=!un}if(se){const $r=this.layoutVertexExtArray,Sr=q.projectTilePoint(kn.x,kn.y,_),so=q.projectTilePoint(sn.x,sn.y,_),Hr=q.upVector(_,kn.x,kn.y),jr=q.upVector(_,sn.x,sn.y);Bo($r,Sr,Hr),Bo($r,Sr,Hr),Bo($r,so,jr),Bo($r,so,jr)}}ge&&(Lt+=si.length-1)}}if(ue&&ue.polyCount.length>0){if(ue.borders){ue.vertexArrayOffset=this.centroidVertexArray.length;const Rt=ue.borders,Xt=this.featuresOnBorder.push(ue)-1;for(let Lt=0;Lt<4;Lt++)Rt[Lt][0]!==Number.MAX_VALUE&&this.borders[Lt].push(Xt)}this.encodeCentroid(ue.borders?void 0:ue.centroid(),ue)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,S,O,_)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((s,u)=>this.featuresOnBorder[s].borders[t][0]-this.featuresOnBorder[u].borders[t][0])}encodeCentroid(t,s,u=!0){let _,S;if(t)if(0!==t.y){const F=s.span()._mult(this.tileToMeter);_=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(F.x/10)),S=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(F.y/10))}else _=Math.ceil(7*(t.x+450)),S=0;else _=0,S=+u;let O=u?this.centroidVertexArray.length:s.vertexArrayOffset;for(const F of s.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*F.edges+F.top);for(let H=0;H<F.top;H++)this.centroidVertexArray.emplace(O++,_,S);for(let H=0;H<2*F.edges;H++)this.centroidVertexArray.emplace(O++,0,S),this.centroidVertexArray.emplace(O++,_,S)}}}function yh(n,t){const s=n.add(t)._unit();return n.x*s.x+n.y*s.y}function iu(n,t,s,u){const _=t.sub(n)._perp()._unit(),S=s.sub(t)._perp()._unit();return Ul(n,t,s,yh(_,S),u)}function Ul(n,t,s,u,_){const S=Math.sqrt(1-u*u);return Math.min(n.dist(t)/3,t.dist(s)/3,_*S/u)}function sc(n,t,s){return n.x<s[0].x&&t.x<s[0].x||n.x>s[1].x&&t.x>s[1].x||n.y<s[0].y&&t.y<s[0].y||n.y>s[1].y&&t.y>s[1].y}function Ou(n,t,s){if(n.x<0||n.x>=qn||t.x<0||t.x>=qn||s.x<0||s.x>=qn)return!1;const u=s.sub(t),_=u.perp(),S=n.sub(t);return(u.x*S.x+u.y*S.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(S.x*S.x+S.y*S.y))>-.866&&_.x*S.x+_.y*S.y<0}function lp(n,t,s){const u=t?2|n:-3&n;return s?1|u:-2&u}function sf(){const n=Math.PI/32,t=Math.tan(n),s=qd;return s*Math.sqrt(1+2*t*t)-s}function of(n,t,s){const u=1<<s.z,_=Rl(s.x/u),S=Rl((s.x+1)/u),O=Ps(s.y/u),F=Ps((s.y+1)/u);return function(H,q,se,ue,ge=0,ke){const Ae=[];if(!H.length||!se||!ue)return Ae;const Ue=(si,Ni)=>{for(const Fi of si)Ae.push({polygon:Fi,bounds:Ni})},pt=Math.ceil(Math.log2(se)),Rt=Math.ceil(Math.log2(ue)),Xt=pt-Rt,Lt=[];for(let si=0;si<Math.abs(Xt);si++)Lt.push(Xt>0?0:1);for(let si=0;si<Math.min(pt,Rt);si++)Lt.push(0),Lt.push(1);let Wt=H;if(Wt=qi(Wt,q[0].y-ge,q[1].y+ge,1),Wt=qi(Wt,q[0].x-ge,q[1].x+ge,0),!Wt.length)return Ae;const li=[];for(Lt.length?li.push({polygons:Wt,bounds:q,depth:0}):Ue(Wt,q);li.length;){const si=li.pop(),Ni=si.depth,Fi=Lt[Ni],ln=si.bounds[0],Sn=si.bounds[1],Ui=0===Fi?ln.x:ln.y,un=0===Fi?Sn.x:Sn.y,hn=ke?ke(Fi,Ui,un):.5*(Ui+un),Cn=qi(si.polygons,Ui-ge,hn+ge,Fi),kn=qi(si.polygons,hn-ge,un+ge,Fi);if(Cn.length){const sn=[ln,new rt(0===Fi?hn:Sn.x,1===Fi?hn:Sn.y)];Lt.length>Ni+1?li.push({polygons:Cn,bounds:sn,depth:Ni+1}):Ue(Cn,sn)}if(kn.length){const sn=[new rt(0===Fi?hn:ln.x,1===Fi?hn:ln.y),Sn];Lt.length>Ni+1?li.push({polygons:kn,bounds:sn,depth:Ni+1}):Ue(kn,sn)}}return Ae}(n,t,Math.ceil((S-_)/11.25),Math.ceil((O-F)/11.25),1,(H,q,se)=>{if(0===H)return.5*(q+se);{const ue=Ps((s.y+q/qn)/u);return(_c(.5*(Ps((s.y+se/qn)/u)+ue))*u-s.y)*qn}})}Vn(vc,"FillExtrusionBucket",{omit:["layers","features"]}),Vn(Wa,"PartMetadata");const Cf=new Bt({"fill-extrusion-edge-radius":new Ge(R["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Ef={paint:new Bt({"fill-extrusion-opacity":new Ge(R["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(R["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ge(R["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ge(R["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ft(R["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(R["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(R["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ge(R["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ge(R["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ge(R["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ge(R["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Cf};function Rd(n,t,s){var u=2*Math.PI*6378137/256/Math.pow(2,s);return[n*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class cp{constructor(t,s,u){this.z=t,this.x=s,this.y=u,this.key=bh(0,t,t,s,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s){const u=(O=this.y,F=this.z,H=Rd(256*(S=this.x),256*(O=Math.pow(2,F)-O-1),F),q=Rd(256*(S+1),256*(O+1),F),H[0]+","+H[1]+","+q[0]+","+q[1]),_=function(S,O,F){let H,q="";for(let se=S;se>0;se--)H=1<<se-1,q+=(O&H?1:0)+(F&H?2:0);return q}(this.z,this.x,this.y);var S,O,F,H,q;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===s?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class af{constructor(t,s){this.wrap=t,this.canonical=s,this.key=bh(t,s.z,s.z,s.x,s.y)}}class wl{constructor(t,s,u,_,S){this.overscaledZ=t,this.wrap=s,this.canonical=new cp(u,+_,+S),this.key=0===s&&t===u?this.canonical.key:bh(s,t,u,_,S)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const s=this.canonical.z-t;return t>this.canonical.z?new wl(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wl(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(t,s=!0){if(this.overscaledZ===t&&s)return this.key;if(t>this.canonical.z)return bh(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-t;return bh(this.wrap*+s,t,t,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const s=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new wl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,_=2*this.canonical.y;return[new wl(s,this.wrap,s,u,_),new wl(s,this.wrap,s,u+1,_),new wl(s,this.wrap,s,u,_+1),new wl(s,this.wrap,s,u+1,_+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new wl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new wl(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new af(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function bh(n,t,s,u,_){const S=1<<Math.min(s,22);let O=S*(_%S)+u%S;return n&&s<22&&(O+=S*S*((n<0?-2*n-1:2*n)%(1<<2*(22-s)))),16*(32*O+s)+(t-s)}Vn(cp,"CanonicalTileID"),Vn(wl,"OverscaledTileID",{omit:["projMatrix"]});class Mu extends rt{constructor(t,s,u){super(t,s),this.z=u}}function xh(n,t){return n.x*t.x+n.y*t.y}function lf(n,t){if(1===n.length){let s=0;const u=t[s++];let _;for(;!_||u.equals(_);)if(_=t[s++],!_)return 1/0;for(;s<t.length;s++){const S=t[s],O=n[0],F=_.sub(u),H=S.sub(u),q=O.sub(u),se=xh(F,F),ue=xh(F,H),ge=xh(H,H),ke=xh(q,F),Ae=xh(q,H),Ue=se*ge-ue*ue,pt=(ge*ke-ue*Ae)/Ue,Rt=(se*Ae-ue*ke)/Ue,Xt=u.z*(1-pt-Rt)+_.z*pt+S.z*Rt;if(isFinite(Xt))return Xt}return 1/0}{let s=1/0;for(const u of t)s=Math.min(s,u.z);return s}}function cf(n,t,s,u,_,S,O,F){const H=O*_.getElevationAt(n,t,!0,!0),q=0!==S[0],se=q?0===S[1]?O*(S[0]/7-450):O*function(ue,ge,ke){const Ae=Math.floor(ge[0]/8),Ue=Math.floor(ge[1]/8),pt=10*(ge[0]-8*Ae),Rt=10*(ge[1]-8*Ue),Xt=ue.getElevationAt(Ae,Ue,!0,!0),Lt=ue.getMeterToDEM(ke),Wt=Math.floor(.5*(pt*Lt-1)),li=Math.floor(.5*(Rt*Lt-1)),si=ue.tileCoordToPixel(Ae,Ue),Ni=2*Wt+1,Fi=2*li+1,ln=(Kn=Ni,Bn=Fi,[(kn=ue).getElevationAtPixel(sn=si.x-Wt,Fn=si.y-li,!0),kn.getElevationAtPixel(sn+Bn,Fn,!0),kn.getElevationAtPixel(sn,Fn+Bn,!0),kn.getElevationAtPixel(sn+Kn,Fn+Bn,!0)]),Sn=Math.abs(ln[0]-ln[1]),Ui=Math.abs(ln[2]-ln[3]),un=Math.abs(ln[0]-ln[2])+Math.abs(ln[1]-ln[3]),hn=Math.min(.25,.5*Lt*(Sn+Ui)/Ni),Cn=Math.min(.25,.5*Lt*un/Fi);var kn,sn,Fn,Kn,Bn;return Xt+Math.max(hn*pt,Cn*Rt)}(_,S,F):H;return{base:H+(0===s)?-1:s,top:q?Math.max(se+u,H+s+2):H+u}}const Sf=fi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:kf}=Sf,Tf=fi([{name:"a_packed",components:4,type:"Float32"}]),{members:If}=Tf,jf=zt.types,Of=Math.cos(Math.PI/180*37.5);class dp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(s=>s.id),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new zi,this.layoutVertexArray2=new bn,this.indexArray=new tr,this.programConfigurations=new Yc(t.layers,t.zoom),this.segments=new io,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(t,s,u,_){this.hasPattern=Tu("line",this.layers,s);const S=this.layers[0].layout.get("line-sort-key"),O=[];for(const{feature:se,id:ue,index:ge,sourceLayerIndex:ke}of t){const Ae=this.layers[0]._featureFilter.needGeometry,Ue=Ua(se,Ae);if(!this.layers[0]._featureFilter.filter(new le(this.zoom),Ue,u))continue;const pt=S?S.evaluate(Ue,{},u):void 0,Rt={id:ue,properties:se.properties,type:se.type,sourceLayerIndex:ke,index:ge,geometry:Ae?Ue.geometry:ka(se,u,_),patterns:{},sortKey:pt};O.push(Rt)}S&&O.sort((se,ue)=>se.sortKey-ue.sortKey);const{lineAtlas:F,featureIndex:H}=s,q=this.addConstantDashes(F);for(const se of O){const{geometry:ue,index:ge,sourceLayerIndex:ke}=se;if(q&&this.addFeatureDashes(se,F),this.hasPattern){const Ae=vh("line",this.layers,se,this.zoom,s);this.patternFeatures.push(Ae)}else this.addFeature(se,ue,ge,u,F.positions,s.availableImages);H.insert(t[ge].feature,ue,ge,ke,this.index)}}addConstantDashes(t){let s=!1;for(const u of this.layers){const _=u.paint.get("line-dasharray").value,S=u.layout.get("line-cap").value;if("constant"!==_.kind||"constant"!==S.kind)s=!0;else{const O=S.value,F=_.value;if(!F)continue;t.addDash(F,O)}}return s}addFeatureDashes(t,s){const u=this.zoom;for(const _ of this.layers){const S=_.paint.get("line-dasharray").value,O=_.layout.get("line-cap").value;if("constant"===S.kind&&"constant"===O.kind)continue;let F,H;if("constant"===S.kind){if(F=S.value,!F)continue}else F=S.evaluate({zoom:u},t);H="constant"===O.kind?O.value:O.evaluate({zoom:u},t),s.addDash(F,H),t.patterns[_.id]=s.getKey(F,H)}}update(t,s,u,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,u,_)}addFeatures(t,s,u,_,S){for(const O of this.patternFeatures)this.addFeature(O,O.geometry,O.index,s,u,_)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,If)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,kf),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,u,_,S,O){const F=this.layers[0].layout,H=F.get("line-join").evaluate(t,{}),q=F.get("line-cap").evaluate(t,{}),se=F.get("line-miter-limit"),ue=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const ge of s)this.addLine(ge,t,H,q,se,ue);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,S,O,_)}addLine(t,s,u,_,S,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Rt=0;Rt<t.length-1;Rt++)this.totalDistance+=t[Rt].dist(t[Rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const F="Polygon"===jf[s.type];let H=t.length;for(;H>=2&&t[H-1].equals(t[H-2]);)H--;let q=0;for(;q<H-1&&t[q].equals(t[q+1]);)q++;if(H<(F?3:2))return;"bevel"===u&&(S=1.05);const se=this.overscaling<=16?15*qn/(512*this.overscaling):0,ue=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ge,ke,Ae,Ue,pt;this.e1=this.e2=-1,F&&(ge=t[H-2],pt=t[q].sub(ge)._unit()._perp());for(let Rt=q;Rt<H;Rt++){if(Ae=Rt===H-1?F?t[q+1]:void 0:t[Rt+1],Ae&&t[Rt].equals(Ae))continue;pt&&(Ue=pt),ge&&(ke=ge),ge=t[Rt],pt=Ae?Ae.sub(ge)._unit()._perp():Ue,Ue=Ue||pt;let Xt=Ue.add(pt);0===Xt.x&&0===Xt.y||Xt._unit();const Lt=Ue.x*pt.x+Ue.y*pt.y,Wt=Xt.x*pt.x+Xt.y*pt.y,li=0!==Wt?1/Wt:1/0,si=2*Math.sqrt(2-2*Wt),Ni=Wt<Of&&ke&&Ae,Fi=Ue.x*pt.y-Ue.y*pt.x>0;if(Ni&&Rt>q){const Ui=ge.dist(ke);if(Ui>2*se){const un=ge.sub(ge.sub(ke)._mult(se/Ui)._round());this.updateDistance(ke,un),this.addCurrentVertex(un,Ue,0,0,ue),ke=un}}const ln=ke&&Ae;let Sn=ln?u:F?"butt":_;if(ln&&"round"===Sn&&(li<O?Sn="miter":li<=2&&(Sn="fakeround")),"miter"===Sn&&li>S&&(Sn="bevel"),"bevel"===Sn&&(li>2&&(Sn="flipbevel"),li<S&&(Sn="miter")),ke&&this.updateDistance(ke,ge),"miter"===Sn)Xt._mult(li),this.addCurrentVertex(ge,Xt,0,0,ue);else if("flipbevel"===Sn){if(li>100)Xt=pt.mult(-1);else{const Ui=li*Ue.add(pt).mag()/Ue.sub(pt).mag();Xt._perp()._mult(Ui*(Fi?-1:1))}this.addCurrentVertex(ge,Xt,0,0,ue),this.addCurrentVertex(ge,Xt.mult(-1),0,0,ue)}else if("bevel"===Sn||"fakeround"===Sn){const Ui=-Math.sqrt(li*li-1),un=Fi?Ui:0,hn=Fi?0:Ui;if(ke&&this.addCurrentVertex(ge,Ue,un,hn,ue),"fakeround"===Sn){const Cn=Math.round(180*si/Math.PI/20);for(let kn=1;kn<Cn;kn++){let sn=kn/Cn;if(.5!==sn){const Kn=sn-.5;sn+=sn*Kn*(sn-1)*((1.0904+Lt*(Lt*(3.55645-1.43519*Lt)-3.2452))*Kn*Kn+(.848013+Lt*(.215638*Lt-1.06021)))}const Fn=pt.sub(Ue)._mult(sn)._add(Ue)._unit()._mult(Fi?-1:1);this.addHalfVertex(ge,Fn.x,Fn.y,!1,Fi,0,ue)}}Ae&&this.addCurrentVertex(ge,pt,-un,-hn,ue)}else if("butt"===Sn)this.addCurrentVertex(ge,Xt,0,0,ue);else if("square"===Sn){const Ui=ke?1:-1;ke||this.addCurrentVertex(ge,Xt,Ui,Ui,ue),this.addCurrentVertex(ge,Xt,0,0,ue),ke&&this.addCurrentVertex(ge,Xt,Ui,Ui,ue)}else"round"===Sn&&(ke&&(this.addCurrentVertex(ge,Ue,0,0,ue),this.addCurrentVertex(ge,Ue,1,1,ue,!0)),Ae&&(this.addCurrentVertex(ge,pt,-1,-1,ue,!0),this.addCurrentVertex(ge,pt,0,0,ue)));if(Ni&&Rt<H-1){const Ui=ge.dist(Ae);if(Ui>2*se){const un=ge.add(Ae.sub(ge)._mult(se/Ui)._round());this.updateDistance(ge,un),this.addCurrentVertex(un,pt,0,0,ue),ge=un}}}}addCurrentVertex(t,s,u,_,S,O=!1){const F=s.y*_-s.x,H=-s.y-s.x*_;this.addHalfVertex(t,s.x+s.y*u,s.y-s.x*u,O,!1,u,S),this.addHalfVertex(t,F,H,O,!0,-_,S)}addHalfVertex({x:t,y:s},u,_,S,O,F,H){this.layoutVertexArray.emplaceBack((t<<1)+(S?1:0),(s<<1)+(O?1:0),Math.round(63*u)+128,Math.round(63*_)+128,1+(0===F?0:F<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const q=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),H.primitiveLength++),O?this.e2=q:this.e1=q}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}}Vn(dp,"LineBucket",{omit:["layers","patternFeatures"]});const Mf=new Bt({"line-cap":new ft(R.layout_line["line-cap"]),"line-join":new ft(R.layout_line["line-join"]),"line-miter-limit":new Ge(R.layout_line["line-miter-limit"]),"line-round-limit":new Ge(R.layout_line["line-round-limit"]),"line-sort-key":new ft(R.layout_line["line-sort-key"])});var df={paint:new Bt({"line-opacity":new ft(R.paint_line["line-opacity"]),"line-color":new ft(R.paint_line["line-color"]),"line-translate":new Ge(R.paint_line["line-translate"]),"line-translate-anchor":new Ge(R.paint_line["line-translate-anchor"]),"line-width":new ft(R.paint_line["line-width"]),"line-gap-width":new ft(R.paint_line["line-gap-width"]),"line-offset":new ft(R.paint_line["line-offset"]),"line-blur":new ft(R.paint_line["line-blur"]),"line-dasharray":new ft(R.paint_line["line-dasharray"]),"line-pattern":new ft(R.paint_line["line-pattern"]),"line-gradient":new Dt(R.paint_line["line-gradient"]),"line-trim-offset":new Ge(R.paint_line["line-trim-offset"])}),layout:Mf};const uf=new class extends ft{possiblyEvaluate(n,t){return t=new le(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(n,t)}evaluate(n,t,s,u){return t=gn({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(n,t,s,u)}}(df.paint.properties["line-width"].specification);function Vp(n,t){return t>0?t+2*n:n}uf.useIntegerZoom=!0;const Af=fi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$p=fi([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),nu=fi([{name:"a_projected_pos",components:4,type:"Float32"}],4);fi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const hf=fi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Au=fi([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);fi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const pf=fi([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Df=fi([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);fi([{name:"triangle",components:3,type:"Uint16"}]),fi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),fi([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fi([{type:"Float32",name:"offsetX"}]),fi([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ta=24;const Dc=128;function Hp(n,t){const{expression:s}=t;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new le(n+1))};if("source"===s.kind)return{kind:"source"};{const{zoomStops:u,interpolationType:_}=s;let S=0;for(;S<u.length&&u[S]<=n;)S++;S=Math.max(0,S-1);let O=S;for(;O<u.length&&u[O]<n+1;)O++;O=Math.min(u.length-1,O);const F=u[S],H=u[O];return"composite"===s.kind?{kind:"composite",minZoom:F,maxZoom:H,interpolationType:_}:{kind:"camera",minZoom:F,maxZoom:H,minSize:s.evaluate(new le(F)),maxSize:s.evaluate(new le(H)),interpolationType:_}}}function up(n,{uSize:t,uSizeT:s},{lowerSize:u,upperSize:_}){return"source"===n.kind?u/Dc:"composite"===n.kind?Cr(u/Dc,_/Dc,s):t}function M(n,t){let s=0,u=0;if("constant"===n.kind)u=n.layoutSize;else if("source"!==n.kind){const{interpolationType:_,minZoom:S,maxZoom:O}=n,F=_?Ii(vo.interpolationFactor(_,t,S,O),0,1):0;"camera"===n.kind?u=Cr(n.minSize,n.maxSize,F):s=F}return{uSizeT:s,uSize:u}}var be=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Dc,evaluateSizeForFeature:up,evaluateSizeForZoom:M,getSizeData:Hp});function h(n,t,s){return n.sections.forEach(u=>{u.text=function(_,S,O){const F=S.layout.get("text-transform").evaluate(O,{});return"uppercase"===F?_=_.toLocaleUpperCase():"lowercase"===F&&(_=_.toLocaleLowerCase()),ie.applyArabicShaping&&(_=ie.applyArabicShaping(_)),_}(u.text,t,s)}),n}const $={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function y(n){return"\ufe36"===n||"\ufe48"===n||"\ufe38"===n||"\ufe44"===n||"\ufe42"===n||"\ufe3e"===n||"\ufe3c"===n||"\ufe3a"===n||"\ufe18"===n||"\ufe40"===n||"\ufe10"===n||"\ufe13"===n||"\ufe14"===n||"\uff40"===n||"\uffe3"===n||"\ufe11"===n||"\ufe12"===n}function Ke(n){return"\ufe35"===n||"\ufe47"===n||"\ufe37"===n||"\ufe43"===n||"\ufe41"===n||"\ufe3d"===n||"\ufe3b"===n||"\ufe39"===n||"\ufe17"===n||"\ufe3f"===n}var dt=Wr,ai=function(n,t,s,u,_){var S,O,F=8*_-u-1,H=(1<<F)-1,q=H>>1,se=-7,ue=s?_-1:0,ge=s?-1:1,ke=n[t+ue];for(ue+=ge,S=ke&(1<<-se)-1,ke>>=-se,se+=F;se>0;S=256*S+n[t+ue],ue+=ge,se-=8);for(O=S&(1<<-se)-1,S>>=-se,se+=u;se>0;O=256*O+n[t+ue],ue+=ge,se-=8);if(0===S)S=1-q;else{if(S===H)return O?NaN:1/0*(ke?-1:1);O+=Math.pow(2,u),S-=q}return(ke?-1:1)*O*Math.pow(2,S-u)},fs=function(n,t,s,u,_,S){var O,F,H,q=8*S-_-1,se=(1<<q)-1,ue=se>>1,ge=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,ke=u?0:S-1,Ae=u?1:-1,Ue=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(F=isNaN(t)?1:0,O=se):(O=Math.floor(Math.log(t)/Math.LN2),t*(H=Math.pow(2,-O))<1&&(O--,H*=2),(t+=O+ue>=1?ge/H:ge*Math.pow(2,1-ue))*H>=2&&(O++,H/=2),O+ue>=se?(F=0,O=se):O+ue>=1?(F=(t*H-1)*Math.pow(2,_),O+=ue):(F=t*Math.pow(2,ue-1)*Math.pow(2,_),O=0));_>=8;n[s+ke]=255&F,ke+=Ae,F/=256,_-=8);for(O=O<<_|F,q+=_;q>0;n[s+ke]=255&O,ke+=Ae,O/=256,q-=8);n[s+ke-Ae]|=128*Ue};function Wr(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Wr.Varint=0,Wr.Fixed64=1,Wr.Bytes=2,Wr.Fixed32=5;var yc=4294967296,Oo=1/yc,Xc=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function wo(n){return n.type===Wr.Bytes?n.readVarint()+n.pos:n.pos+1}function ro(n,t,s){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(u);for(var _=s.pos-1;_>=n;_--)s.buf[_+u]=s.buf[_]}function Rc(n,t){for(var s=0;s<n.length;s++)t.writeVarint(n[s])}function wh(n,t){for(var s=0;s<n.length;s++)t.writeSVarint(n[s])}function Ch(n,t){for(var s=0;s<n.length;s++)t.writeFloat(n[s])}function om(n,t){for(var s=0;s<n.length;s++)t.writeDouble(n[s])}function am(n,t){for(var s=0;s<n.length;s++)t.writeBoolean(n[s])}function lm(n,t){for(var s=0;s<n.length;s++)t.writeFixed32(n[s])}function cm(n,t){for(var s=0;s<n.length;s++)t.writeSFixed32(n[s])}function dm(n,t){for(var s=0;s<n.length;s++)t.writeFixed64(n[s])}function um(n,t){for(var s=0;s<n.length;s++)t.writeSFixed64(n[s])}function ff(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function hp(n,t,s){n[s]=t,n[s+1]=t>>>8,n[s+2]=t>>>16,n[s+3]=t>>>24}function Uf(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}Wr.prototype={destroy:function(){this.buf=null},readFields:function(n,t,s){for(s=s||this.length;this.pos<s;){var u=this.readVarint(),_=u>>3,S=this.pos;this.type=7&u,n(_,t,this),this.pos===S&&this.skip(u)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=ff(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Uf(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=ff(this.buf,this.pos)+ff(this.buf,this.pos+4)*yc;return this.pos+=8,n},readSFixed64:function(){var n=ff(this.buf,this.pos)+Uf(this.buf,this.pos+4)*yc;return this.pos+=8,n},readFloat:function(){var n=ai(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=ai(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,s,u=this.buf;return t=127&(s=u[this.pos++]),s<128?t:(t|=(127&(s=u[this.pos++]))<<7,s<128?t:(t|=(127&(s=u[this.pos++]))<<14,s<128?t:(t|=(127&(s=u[this.pos++]))<<21,s<128?t:function(_,S,O){var F,H,q=O.buf;if(F=(112&(H=q[O.pos++]))>>4,H<128||(F|=(127&(H=q[O.pos++]))<<3,H<128)||(F|=(127&(H=q[O.pos++]))<<10,H<128)||(F|=(127&(H=q[O.pos++]))<<17,H<128)||(F|=(127&(H=q[O.pos++]))<<24,H<128)||(F|=(1&(H=q[O.pos++]))<<31,H<128))return function Zc(n,t,s){return s?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}(_,F,S);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(s=u[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&Xc?Xc.decode(this.buf.subarray(t,n)):function(s,u,_){for(var S="",O=u;O<_;){var F,H,q,se=s[O],ue=null,ge=se>239?4:se>223?3:se>191?2:1;if(O+ge>_)break;1===ge?se<128&&(ue=se):2===ge?128==(192&(F=s[O+1]))&&(ue=(31&se)<<6|63&F)<=127&&(ue=null):3===ge?(H=s[O+2],128==(192&(F=s[O+1]))&&128==(192&H)&&((ue=(15&se)<<12|(63&F)<<6|63&H)<=2047||ue>=55296&&ue<=57343)&&(ue=null)):4===ge&&(H=s[O+2],q=s[O+3],128==(192&(F=s[O+1]))&&128==(192&H)&&128==(192&q)&&((ue=(15&se)<<18|(63&F)<<12|(63&H)<<6|63&q)<=65535||ue>=1114112)&&(ue=null)),null===ue?(ue=65533,ge=1):ue>65535&&(ue-=65536,S+=String.fromCharCode(ue>>>10&1023|55296),ue=56320|1023&ue),S+=String.fromCharCode(ue),O+=ge}return S}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==Wr.Bytes)return n.push(this.readVarint(t));var s=wo(this);for(n=n||[];this.pos<s;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==Wr.Bytes)return n.push(this.readSVarint());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Wr.Bytes)return n.push(this.readBoolean());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Wr.Bytes)return n.push(this.readFloat());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Wr.Bytes)return n.push(this.readDouble());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Wr.Bytes)return n.push(this.readFixed32());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Wr.Bytes)return n.push(this.readSFixed32());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Wr.Bytes)return n.push(this.readFixed64());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Wr.Bytes)return n.push(this.readSFixed64());var t=wo(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===Wr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Wr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Wr.Fixed32)this.pos+=4;else{if(t!==Wr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var s=new Uint8Array(t);s.set(this.buf),this.buf=s,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),hp(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),hp(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),hp(this.buf,-1&n,this.pos),hp(this.buf,Math.floor(n*Oo),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),hp(this.buf,-1&n,this.pos),hp(this.buf,Math.floor(n*Oo),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,s){var u,_,S,F;if(t>=0?(u=t%4294967296|0,_=t/4294967296|0):(_=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,_=_+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),S=u,(F=s).buf[F.pos++]=127&S|128,S>>>=7,F.buf[F.pos++]=127&S|128,S>>>=7,F.buf[F.pos++]=127&S|128,S>>>=7,F.buf[F.pos++]=127&S|128,F.buf[F.pos]=127&(S>>>=7),function(S,O){var F=(7&S)<<4;O.buf[O.pos++]|=F|((S>>>=3)?128:0),S&&(O.buf[O.pos++]=127&S|((S>>>=7)?128:0),S&&(O.buf[O.pos++]=127&S|((S>>>=7)?128:0),S&&(O.buf[O.pos++]=127&S|((S>>>=7)?128:0),S&&(O.buf[O.pos++]=127&S|((S>>>=7)?128:0),S&&(O.buf[O.pos++]=127&S)))))}(_,s)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(u,_,S){for(var O,F,H=0;H<_.length;H++){if((O=_.charCodeAt(H))>55295&&O<57344){if(!F){O>56319||H+1===_.length?(u[S++]=239,u[S++]=191,u[S++]=189):F=O;continue}if(O<56320){u[S++]=239,u[S++]=191,u[S++]=189,F=O;continue}O=F-55296<<10|O-56320|65536,F=null}else F&&(u[S++]=239,u[S++]=191,u[S++]=189,F=null);O<128?u[S++]=O:(O<2048?u[S++]=O>>6|192:(O<65536?u[S++]=O>>12|224:(u[S++]=O>>18|240,u[S++]=O>>12&63|128),u[S++]=O>>6&63|128),u[S++]=63&O|128)}return S}(this.buf,n,this.pos);var s=this.pos-t;s>=128&&ro(t,s,this),this.pos=t-1,this.writeVarint(s),this.pos+=s},writeFloat:function(n){this.realloc(4),fs(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),fs(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var s=0;s<t;s++)this.buf[this.pos++]=n[s]},writeRawMessage:function(n,t){this.pos++;var s=this.pos;n(t,this);var u=this.pos-s;u>=128&&ro(s,u,this),this.pos=s-1,this.writeVarint(u),this.pos+=u},writeMessage:function(n,t,s){this.writeTag(n,Wr.Bytes),this.writeRawMessage(t,s)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,Rc,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,wh,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,am,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,Ch,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,om,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,lm,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,cm,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,dm,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,um,t)},writeBytesField:function(n,t){this.writeTag(n,Wr.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,Wr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,Wr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,Wr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,Wr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,Wr.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,Wr.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,Wr.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,Wr.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,Wr.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var jp=ze(dt);const mf=3;function hm(n,t,s){t.glyphs=[],1===n&&s.readMessage(b,t)}function b(n,t,s){if(3===n){const{id:u,bitmap:_,width:S,height:O,left:F,top:H,advance:q}=s.readMessage(a,{});t.glyphs.push({id:u,bitmap:new Oc({width:S+2*mf,height:O+2*mf},_),metrics:{width:S,height:O,left:F,top:H,advance:q}})}else 4===n?t.ascender=s.readSVarint():5===n&&(t.descender=s.readSVarint())}function a(n,t,s){1===n?t.id=s.readVarint():2===n?t.bitmap=s.readBytes():3===n?t.width=s.readVarint():4===n?t.height=s.readVarint():5===n?t.left=s.readSVarint():6===n?t.top=s.readSVarint():7===n&&(t.advance=s.readVarint())}const l=mf;function m(n){let t=0,s=0;for(const O of n)t+=O.w*O.h,s=Math.max(s,O.w);n.sort((O,F)=>F.h-O.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let _=0,S=0;for(const O of n)for(let F=u.length-1;F>=0;F--){const H=u[F];if(!(O.w>H.w||O.h>H.h)){if(O.x=H.x,O.y=H.y,S=Math.max(S,O.y+O.h),_=Math.max(_,O.x+O.w),O.w===H.w&&O.h===H.h){const q=u.pop();F<u.length&&(u[F]=q)}else O.h===H.h?(H.x+=O.w,H.w-=O.w):O.w===H.w?(H.y+=O.h,H.h-=O.h):(u.push({x:H.x+O.w,y:H.y,w:H.w-O.w,h:O.h}),H.y+=O.h,H.h-=O.h);break}}return{w:_,h:S,fill:t/(_*S)||0}}const E=1;class D{constructor(t,{pixelRatio:s,version:u,stretchX:_,stretchY:S,content:O}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=_,this.stretchY=S,this.content=O,this.version=u}get tl(){return[this.paddedRect.x+E,this.paddedRect.y+E]}get br(){return[this.paddedRect.x+this.paddedRect.w-E,this.paddedRect.y+this.paddedRect.h-E]}get displaySize(){return[(this.paddedRect.w-2*E)/this.pixelRatio,(this.paddedRect.h-2*E)/this.pixelRatio]}}class N{constructor(t,s){const u={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(t,u,S),this.addImages(s,_,S);const{w:O,h:F}=m(S),H=new ll({width:O||1,height:F||1});for(const q in t){const se=t[q],ue=u[q].paddedRect;ll.copy(se.data,H,{x:0,y:0},{x:ue.x+E,y:ue.y+E},se.data)}for(const q in s){const se=s[q],ue=_[q].paddedRect,ge=ue.x+E,ke=ue.y+E,Ae=se.data.width,Ue=se.data.height;ll.copy(se.data,H,{x:0,y:0},{x:ge,y:ke},se.data),ll.copy(se.data,H,{x:0,y:Ue-1},{x:ge,y:ke-1},{width:Ae,height:1}),ll.copy(se.data,H,{x:0,y:0},{x:ge,y:ke+Ue},{width:Ae,height:1}),ll.copy(se.data,H,{x:Ae-1,y:0},{x:ge-1,y:ke},{width:1,height:Ue}),ll.copy(se.data,H,{x:0,y:0},{x:ge+Ae,y:ke},{width:1,height:Ue})}this.image=H,this.iconPositions=u,this.patternPositions=_}addImages(t,s,u){for(const _ in t){const S=t[_],O={x:0,y:0,w:S.data.width+2*E,h:S.data.height+2*E};u.push(O),s[_]=new D(O,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(t,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>t.hasImage(u)),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),s),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),s)}patchUpdatedImage(t,s,u){if(!t||!s||t.version===s.version)return;t.version=s.version;const[_,S]=t.tl;u.update(s.data,void 0,{x:_,y:S})}}Vn(D,"ImagePosition"),Vn(N,"ImageAtlas");const J={horizontal:1,vertical:2,horizontalOnly:3},he=-17;class Oe{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,s){const u=new Oe;return u.scale=t||1,u.fontStack=s,u}static forImage(t){const s=new Oe;return s.imageName=t,s}}class je{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,s){const u=new je;for(let _=0;_<t.sections.length;_++){const S=t.sections[_];S.image?u.addImageSection(S):u.addTextSection(S,s)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(s,u){let _="";for(let S=0;S<s.length;S++){const O=s.charCodeAt(S+1)||null,F=s.charCodeAt(S-1)||null;_+=!u&&(O&&fd(O)&&!$[s[S+1]]||F&&fd(F)&&!$[s[S-1]])||!$[s[S]]?s[S]:$[s[S]]}return _}(this.text,t)}trim(){let t=0;for(let u=0;u<this.text.length&&ui[this.text.charCodeAt(u)];u++)t++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&ui[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(t,s),this.sectionIndex=this.sectionIndex.slice(t,s)}substring(t,s){const u=new je;return u.text=this.text.substring(t,s),u.sectionIndex=this.sectionIndex.slice(t,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,s)=>Math.max(t,this.sections[s].scale),0)}addTextSection(t,s){this.text+=t.text,this.sections.push(Oe.forText(t.scale,t.fontStack||s));const u=this.sections.length-1;for(let _=0;_<t.text.length;++_)this.sectionIndex.push(u)}addImageSection(t){const s=t.image?t.image.name:"";if(0===s.length)return void Bi("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Oe.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Bi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Gt(n,t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae){const Ue=je.fromFeature(n,_);ue===J.vertical&&Ue.verticalizePunctuation(ge);let pt=[];const Rt=function(si,Ni,Fi,ln,Sn,Ui){if(!si)return[];const un=[],hn=function(Fn,Kn,Bn,Nr,In,gr){let Vr=0;for(let ys=0;ys<Fn.length();ys++){const $r=Fn.getSection(ys);Vr+=_i(Fn.getCharCode(ys),$r,Nr,In,Kn,gr)}return Vr/Math.max(1,Math.ceil(Vr/Bn))}(si,Ni,Fi,ln,Sn,Ui),Cn=si.text.indexOf("\u200b")>=0;let kn=0;for(let Fn=0;Fn<si.length();Fn++){const Kn=si.getSection(Fn),Bn=si.getCharCode(Fn);if(ui[Bn]||(kn+=_i(Bn,Kn,ln,Sn,Ni,Ui)),Fn<si.length()-1){const Nr=!((sn=Bn)<11904||!(An["Bopomofo Extended"](sn)||An.Bopomofo(sn)||An["CJK Compatibility Forms"](sn)||An["CJK Compatibility Ideographs"](sn)||An["CJK Compatibility"](sn)||An["CJK Radicals Supplement"](sn)||An["CJK Strokes"](sn)||An["CJK Symbols and Punctuation"](sn)||An["CJK Unified Ideographs Extension A"](sn)||An["CJK Unified Ideographs"](sn)||An["Enclosed CJK Letters and Months"](sn)||An["Halfwidth and Fullwidth Forms"](sn)||An.Hiragana(sn)||An["Ideographic Description Characters"](sn)||An["Kangxi Radicals"](sn)||An["Katakana Phonetic Extensions"](sn)||An.Katakana(sn)||An["Vertical Forms"](sn)||An["Yi Radicals"](sn)||An["Yi Syllables"](sn)));(Di[Bn]||Nr||Kn.imageName)&&un.push(qr(Fn+1,kn,hn,un,ar(Bn,si.getCharCode(Fn+1),Nr&&Cn),!1))}}var sn;return Cl(qr(si.length(),kn,hn,un,0,!0))}(Ue,q,S,t,u,ke),{processBidirectionalText:Xt,processStyledBidirectionalText:Lt}=ie;if(Xt&&1===Ue.sections.length){const si=Xt(Ue.toString(),Rt);for(const Ni of si){const Fi=new je;Fi.text=Ni,Fi.sections=Ue.sections;for(let ln=0;ln<Ni.length;ln++)Fi.sectionIndex.push(0);pt.push(Fi)}}else if(Lt){const si=Lt(Ue.text,Ue.sectionIndex,Rt);for(const Ni of si){const Fi=new je;Fi.text=Ni[0],Fi.sectionIndex=Ni[1],Fi.sections=Ue.sections,pt.push(Fi)}}else pt=function(si,Ni){const Fi=[],ln=si.text;let Sn=0;for(const Ui of Ni)Fi.push(si.substring(Sn,Ui)),Sn=Ui;return Sn<ln.length&&Fi.push(si.substring(Sn,ln.length)),Fi}(Ue,Rt);const Wt=[],li={positionedLines:Wt,text:Ue.toString(),top:se[1],bottom:se[1],left:se[0],right:se[0],writingMode:ue,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(si,Ni,Fi,ln,Sn,Ui,un,hn,Cn,kn,sn,Fn){let Kn=0,Bn=0,Nr=0;const In="right"===hn?1:"left"===hn?0:.5;let gr=!1;for(const Hr of Sn){const jr=Hr.getSections();for(const $s of jr){if($s.imageName)continue;const Ks=Ni[$s.fontStack];if(Ks&&(gr=void 0!==Ks.ascender&&void 0!==Ks.descender,!gr))break}if(!gr)break}let Vr=0;for(const Hr of Sn){Hr.trim();const jr=Hr.getMaxScale(),$s=(jr-1)*Ta,Ks={positionedGlyphs:[],lineOffset:0};si.positionedLines[Vr]=Ks;const Js=Ks.positionedGlyphs;let Hs=0;if(!Hr.length()){Bn+=Ui,++Vr;continue}let Mo=0,Xo=0;for(let js=0;js<Hr.length();js++){const qa=Hr.getSection(js),Oa=Hr.getSectionIndex(js),Go=Hr.getCharCode(js);let Cs=qa.scale,Ma=null,Qs=null,xc=null,Aa=Ta,Ll=0;const El=!(Cn===J.horizontal||!sn&&!dc(Go)||sn&&(ui[Go]||(ys=Go,An.Arabic(ys)||An["Arabic Supplement"](ys)||An["Arabic Extended-A"](ys)||An["Arabic Presentation Forms-A"](ys)||An["Arabic Presentation Forms-B"](ys))));if(qa.imageName){const wc=ln[qa.imageName];if(!wc)continue;xc=qa.imageName,si.iconsInText=si.iconsInText||!0,Qs=wc.paddedRect;const Sl=wc.displaySize;Cs=Cs*Ta/Fn,Ma={width:Sl[0],height:Sl[1],left:E,top:-l,advance:El?Sl[1]:Sl[0],localGlyph:!1},Ll=gr?-Ma.height*Cs:he+jr*Ta-Sl[1]*Cs,Aa=Ma.advance;const lu=(El?Sl[0]:Sl[1])*Cs-Ta*jr;lu>0&&lu>Hs&&(Hs=lu)}else{const wc=Fi[qa.fontStack];if(!wc)continue;wc[Go]&&(Qs=wc[Go]);const Sl=Ni[qa.fontStack];if(!Sl)continue;const lu=Sl.glyphs[Go];if(!lu)continue;if(Ma=lu.metrics,Aa=8203!==Go?Ta:0,gr){const wf=void 0!==Sl.ascender?Math.abs(Sl.ascender):0,Vf=void 0!==Sl.descender?Math.abs(Sl.descender):0,$f=(wf+Vf)*Cs;Mo<$f&&(Mo=$f,Xo=(wf-Vf)/2*Cs),Ll=-wf*Cs}else Ll=he+(jr-Cs)*Ta}El?(si.verticalizable=!0,Js.push({glyph:Go,imageName:xc,x:Kn,y:Bn+Ll,vertical:El,scale:Cs,localGlyph:Ma.localGlyph,fontStack:qa.fontStack,sectionIndex:Oa,metrics:Ma,rect:Qs}),Kn+=Aa*Cs+kn):(Js.push({glyph:Go,imageName:xc,x:Kn,y:Bn+Ll,vertical:El,scale:Cs,localGlyph:Ma.localGlyph,fontStack:qa.fontStack,sectionIndex:Oa,metrics:Ma,rect:Qs}),Kn+=Ma.advance*Cs+kn)}0!==Js.length&&(Nr=Math.max(Kn-kn,Nr),gr?ru(Js,In,Hs,Xo,Ui*jr/2):ru(Js,In,Hs,0,Ui/2)),Kn=0;const Ia=Ui*jr+Hs;Ks.lineOffset=Math.max(Hs,$s),Bn+=Ia,++Vr}var ys;const $r=Bn,{horizontalAlign:Sr,verticalAlign:so}=Ld(un);(function(Hr,jr,$s,Ks,Js,Hs){const Mo=(jr-$s)*Js,Xo=-Hs*Ks;for(const Ia of Hr)for(const js of Ia.positionedGlyphs)js.x+=Mo,js.y+=Xo})(si.positionedLines,In,Sr,so,Nr,$r),si.top+=-so*$r,si.bottom=si.top+$r,si.left+=-Sr*Nr,si.right=si.left+Nr,si.hasBaseline=gr}(li,t,s,u,pt,O,F,H,ue,q,ge,Ae),!function(si){for(const Ni of si)if(0!==Ni.positionedGlyphs.length)return!1;return!0}(Wt)&&li}const ui={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Di={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _i(n,t,s,u,_,S){if(t.imageName){const O=u[t.imageName];return O?O.displaySize[0]*t.scale*Ta/S+_:0}{const O=s[t.fontStack],F=O&&O.glyphs[n];return F?F.metrics.advance*t.scale+_:0}}function wn(n,t,s,u){const _=Math.pow(n-t,2);return u?n<t?_/2:2*_:_+Math.abs(s)*s}function ar(n,t,s){let u=0;return 10===n&&(u-=1e4),s&&(u+=150),40!==n&&65288!==n||(u+=50),41!==t&&65289!==t||(u+=50),u}function qr(n,t,s,u,_,S){let O=null,F=wn(t,s,_,S);for(const H of u){const q=wn(t-H.x,s,_,S)+H.badness;q<=F&&(O=H,F=q)}return{index:n,x:t,priorBreak:O,badness:F}}function Cl(n){return n?Cl(n.priorBreak).concat(n.index):[]}function Ld(n){let t=.5,s=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function ru(n,t,s,u,_){if(!(t||s||u||_))return;const S=n.length-1,O=n[S],F=(O.x+O.metrics.advance*O.scale)*t;for(let H=0;H<=S;H++)n[H].x-=F,n[H].y+=s+u+_}function Eh(n,t,s){const{horizontalAlign:u,verticalAlign:_}=Ld(s),S=t[0]-n.displaySize[0]*u,O=t[1]-n.displaySize[1]*_;return{image:n,top:O,bottom:O+n.displaySize[1],left:S,right:S+n.displaySize[0]}}function bc(n,t,s,u,_,S){const O=n.image;let F;if(O.content){const pt=O.content,Rt=O.pixelRatio||1;F=[pt[0]/Rt,pt[1]/Rt,O.displaySize[0]-pt[2]/Rt,O.displaySize[1]-pt[3]/Rt]}const H=t.left*S,q=t.right*S;let se,ue,ge,ke;"width"===s||"both"===s?(ke=_[0]+H-u[3],ue=_[0]+q+u[1]):(ke=_[0]+(H+q-O.displaySize[0])/2,ue=ke+O.displaySize[0]);const Ae=t.top*S,Ue=t.bottom*S;return"height"===s||"both"===s?(se=_[1]+Ae-u[0],ge=_[1]+Ue+u[2]):(se=_[1]+(Ae+Ue-O.displaySize[1])/2,ge=se+O.displaySize[1]),{image:O,top:se,right:ue,bottom:ge,left:ke,collisionPadding:F}}class dd extends rt{constructor(t,s,u,_,S){super(t,s),this.angle=_,this.z=u,void 0!==S&&(this.segment=S)}clone(){return new dd(this.x,this.y,this.z,this.angle,this.segment)}}function Up(n,t,s,u,_){if(void 0===t.segment)return!0;let S=t,O=t.segment+1,F=0;for(;F>-s/2;){if(O--,O<0)return!1;F-=n[O].dist(S),S=n[O]}F+=n[O].dist(n[O+1]),O++;const H=[];let q=0;for(;F<s/2;){const se=n[O],ue=n[O+1];if(!ue)return!1;let ge=n[O-1].angleTo(se)-se.angleTo(ue);for(ge=Math.abs((ge+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:F,angleDelta:ge}),q+=ge;F-H[0].distance>u;)q-=H.shift().angleDelta;if(q>_)return!1;O++,F+=se.dist(ue)}return!0}function vs(n){let t=0;for(let s=0;s<n.length-1;s++)t+=n[s].dist(n[s+1]);return t}function su(n,t,s){return n?.6*t*s:0}function Wp(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function pm(n,t,s,u,_,S){const O=su(s,_,S),F=Wp(s,u)*S;let H=0;const q=vs(n)/2;for(let se=0;se<n.length-1;se++){const ue=n[se],ge=n[se+1],ke=ue.dist(ge);if(H+ke>q){const Ae=(q-H)/ke,Ue=Cr(ue.x,ge.x,Ae),pt=Cr(ue.y,ge.y,Ae),Rt=new dd(Ue,pt,0,ge.angleTo(ue),se);return!O||Up(n,Rt,F,O,t)?Rt:void 0}H+=ke}}function Ag(n,t,s,u,_,S,O,F,H){const q=su(u,S,O),se=Wp(u,_),ue=se*O,ge=0===n[0].x||n[0].x===H||0===n[0].y||n[0].y===H;return t-ue<t/4&&(t=ue+t/4),Fm(n,ge?t/2*F%t:(se/2+2*S)*O*F%t,t,q,s,ue,ge,!1,H)}function Fm(n,t,s,u,_,S,O,F,H){const q=S/2,se=vs(n);let ue=0,ge=t-s,ke=[];for(let Ae=0;Ae<n.length-1;Ae++){const Ue=n[Ae],pt=n[Ae+1],Rt=Ue.dist(pt),Xt=pt.angleTo(Ue);for(;ge+s<ue+Rt;){ge+=s;const Lt=(ge-ue)/Rt,Wt=Cr(Ue.x,pt.x,Lt),li=Cr(Ue.y,pt.y,Lt);if(Wt>=0&&Wt<H&&li>=0&&li<H&&ge-q>=0&&ge+q<=se){const si=new dd(Wt,li,0,Xt,Ae);si._round(),u&&!Up(n,si,S,u,_)||ke.push(si)}}ue+=Rt}return F||ke.length||O||(ke=Fm(n,ue/2,s,u,_,S,O,!0,H)),ke}function Ym(n,t,s,u,_){const S=[];for(let O=0;O<n.length;O++){const F=n[O];let H;for(let q=0;q<F.length-1;q++){let se=F[q],ue=F[q+1];se.x<t&&ue.x<t||(se.x<t?se=new rt(t,se.y+(t-se.x)/(ue.x-se.x)*(ue.y-se.y))._round():ue.x<t&&(ue=new rt(t,se.y+(t-se.x)/(ue.x-se.x)*(ue.y-se.y))._round()),se.y<s&&ue.y<s||(se.y<s?se=new rt(se.x+(s-se.y)/(ue.y-se.y)*(ue.x-se.x),s)._round():ue.y<s&&(ue=new rt(se.x+(s-se.y)/(ue.y-se.y)*(ue.x-se.x),s)._round()),se.x>=u&&ue.x>=u||(se.x>=u?se=new rt(u,se.y+(u-se.x)/(ue.x-se.x)*(ue.y-se.y))._round():ue.x>=u&&(ue=new rt(u,se.y+(u-se.x)/(ue.x-se.x)*(ue.y-se.y))._round()),se.y>=_&&ue.y>=_||(se.y>=_?se=new rt(se.x+(_-se.y)/(ue.y-se.y)*(ue.x-se.x),_)._round():ue.y>=_&&(ue=new rt(se.x+(_-se.y)/(ue.y-se.y)*(ue.x-se.x),_)._round()),H&&se.equals(H[H.length-1])||(H=[se],S.push(H)),H.push(ue)))))}}return S}Vn(dd,"Anchor");const Rf=1e20;function Bm(n,t,s,u,_,S,O,F,H){for(let q=t;q<t+u;q++)Gm(n,s*S+q,S,_,O,F,H);for(let q=s;q<s+_;q++)Gm(n,q*S+t,1,u,O,F,H)}function Gm(n,t,s,u,_,S,O){S[0]=0,O[0]=-Rf,O[1]=Rf,_[0]=n[t];for(let F=1,H=0,q=0;F<u;F++){_[F]=n[t+F*s];const se=F*F;do{const ue=S[H];q=(_[F]-_[ue]+se-ue*ue)/(F-ue)/2}while(q<=O[H]&&--H>-1);H++,S[H]=F,O[H]=q,O[H+1]=Rf}for(let F=0,H=0;F<u;F++){for(;O[H+1]<F;)H++;const q=S[H],se=F-q;n[t+F*s]=_[q]+se*se}}const ou=2,fm={none:0,ideographs:1,all:2};class gf{constructor(t,s,u){this.requestManager=t,this.localGlyphMode=s,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,s){const u=[];for(const _ in t)for(const S of t[_])u.push({stack:_,id:S});pn(u,({stack:_,id:S},O)=>{let F=this.entries[_];F||(F=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let H=F.glyphs[S];if(void 0!==H)return void O(null,{stack:_,id:S,glyph:H});if(H=this._tinySDF(F,_,S),H)return F.glyphs[S]=H,void O(null,{stack:_,id:S,glyph:H});const q=Math.floor(S/256);if(256*q>65535)return void O(new Error("glyphs > 65535 not supported"));if(F.ranges[q])return void O(null,{stack:_,id:S,glyph:H});let se=F.requests[q];se||(se=F.requests[q]=[],gf.loadGlyphRange(_,q,this.url,this.requestManager,(ue,ge)=>{if(ge){F.ascender=ge.ascender,F.descender=ge.descender;for(const ke in ge.glyphs)this._doesCharSupportLocalGlyph(+ke)||(F.glyphs[+ke]=ge.glyphs[+ke]);F.ranges[q]=!0}for(const ke of se)ke(ue,ge);delete F.requests[q]})),se.push((ue,ge)=>{ue?O(ue):ge&&O(null,{stack:_,id:S,glyph:ge.glyphs[S]||null})})},(_,S)=>{if(_)s(_);else if(S){const O={};for(const{stack:F,id:H,glyph:q}of S)void 0===O[F]&&(O[F]={}),void 0===O[F].glyphs&&(O[F].glyphs={}),O[F].glyphs[H]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics},O[F].ascender=this.entries[F].ascender,O[F].descender=this.entries[F].descender;s(null,O)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==fm.none&&(this.localGlyphMode===fm.all?!!this.localFontFamily:!!this.localFontFamily&&(An["CJK Unified Ideographs"](t)||An["Hangul Syllables"](t)||An.Hiragana(t)||An.Katakana(t)||An["CJK Symbols and Punctuation"](t)))}_tinySDF(t,s,u){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(u))return;let S=t.tinySDF;if(!S){let Ue="400";/bold/i.test(s)?Ue="900":/medium/i.test(s)?Ue="500":/light/i.test(s)&&(Ue="200"),S=t.tinySDF=new gf.TinySDF({fontFamily:_,fontWeight:Ue,fontSize:24*ou,buffer:3*ou,radius:8*ou}),S.fontWeight=Ue}if(this.localGlyphs[S.fontWeight][u])return this.localGlyphs[S.fontWeight][u];const O=String.fromCharCode(u),{data:F,width:H,height:q,glyphWidth:se,glyphHeight:ue,glyphLeft:ge,glyphTop:ke,glyphAdvance:Ae}=S.draw(O);return this.localGlyphs[S.fontWeight][u]={id:u,bitmap:new Oc({width:H,height:q},F),metrics:{width:se/ou,height:ue/ou,left:ge/ou,top:ke/ou-27,advance:Ae/ou,localGlyph:!0}}}}gf.loadGlyphRange=function(n,t,s,u,_){const S=256*t,O=S+255,F=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",n).replace("{range}",`${S}-${O}`),Yr.Glyphs);mr(F,(H,q)=>{if(H)_(H);else if(q){const se={},ue=new jp(q).readFields(hm,{});for(const ge of ue.glyphs)se[ge.id]=ge;_(null,{glyphs:se,ascender:ue.ascender,descender:ue.descender})}})},gf.TinySDF=class{constructor({fontSize:n=24,buffer:t=3,radius:s=8,cutoff:u=.25,fontFamily:_="sans-serif",fontWeight:S="normal",fontStyle:O="normal"}={}){this.buffer=t,this.cutoff=u,this.radius=s;const F=this.size=n+4*t,H=this._createCanvas(F),q=this.ctx=H.getContext("2d",{willReadFrequently:!0});q.font=`${O} ${S} ${n}px ${_}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(n){const t=document.createElement("canvas");return t.width=t.height=n,t}draw(n){const{width:t,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:_,actualBoundingBoxRight:S}=this.ctx.measureText(n),O=Math.ceil(s),F=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-_))),H=Math.min(this.size-this.buffer,O+Math.ceil(u)),q=F+2*this.buffer,se=H+2*this.buffer,ue=Math.max(q*se,0),ge=new Uint8ClampedArray(ue),ke={data:ge,width:q,height:se,glyphWidth:F,glyphHeight:H,glyphTop:O,glyphLeft:0,glyphAdvance:t};if(0===F||0===H)return ke;const{ctx:Ae,buffer:Ue,gridInner:pt,gridOuter:Rt}=this;Ae.clearRect(Ue,Ue,F,H),Ae.fillText(n,Ue,Ue+O);const Xt=Ae.getImageData(Ue,Ue,F,H);Rt.fill(Rf,0,ue),pt.fill(0,0,ue);for(let Lt=0;Lt<H;Lt++)for(let Wt=0;Wt<F;Wt++){const li=Xt.data[4*(Lt*F+Wt)+3]/255;if(0===li)continue;const si=(Lt+Ue)*q+Wt+Ue;if(1===li)Rt[si]=0,pt[si]=Rf;else{const Ni=.5-li;Rt[si]=Ni>0?Ni*Ni:0,pt[si]=Ni<0?Ni*Ni:0}}Bm(Rt,0,0,q,se,q,this.f,this.v,this.z),Bm(pt,Ue,Ue,F,H,q,this.f,this.v,this.z);for(let Lt=0;Lt<ue;Lt++){const Wt=Math.sqrt(Rt[Lt])-Math.sqrt(pt[Lt]);ge[Lt]=Math.round(255-255*(Wt/this.radius+this.cutoff))}return ke}};const _f=E;function Nm(n,t,s,u){const _=[],S=n.image,O=S.pixelRatio,F=S.paddedRect.w-2*_f,H=S.paddedRect.h-2*_f,q=n.right-n.left,se=n.bottom-n.top,ue=S.stretchX||[[0,F]],ge=S.stretchY||[[0,H]],ke=(Ui,un)=>Ui+un[1]-un[0],Ae=ue.reduce(ke,0),Ue=ge.reduce(ke,0),pt=F-Ae,Rt=H-Ue;let Xt=0,Lt=Ae,Wt=0,li=Ue,si=0,Ni=pt,Fi=0,ln=Rt;if(S.content&&u){const Ui=S.content;Xt=Wf(ue,0,Ui[0]),Wt=Wf(ge,0,Ui[1]),Lt=Wf(ue,Ui[0],Ui[2]),li=Wf(ge,Ui[1],Ui[3]),si=Ui[0]-Xt,Fi=Ui[1]-Wt,Ni=Ui[2]-Ui[0]-Lt,ln=Ui[3]-Ui[1]-li}const Sn=(Ui,un,hn,Cn)=>{const kn=qf(Ui.stretch-Xt,Lt,q,n.left),sn=Xf(Ui.fixed-si,Ni,Ui.stretch,Ae),Fn=qf(un.stretch-Wt,li,se,n.top),Kn=Xf(un.fixed-Fi,ln,un.stretch,Ue),Bn=qf(hn.stretch-Xt,Lt,q,n.left),Nr=Xf(hn.fixed-si,Ni,hn.stretch,Ae),In=qf(Cn.stretch-Wt,li,se,n.top),gr=Xf(Cn.fixed-Fi,ln,Cn.stretch,Ue),Vr=new rt(kn,Fn),ys=new rt(Bn,Fn),$r=new rt(Bn,In),Sr=new rt(kn,In),so=new rt(sn/O,Kn/O),Hr=new rt(Nr/O,gr/O),jr=t*Math.PI/180;if(jr){const Js=Math.sin(jr),Hs=Math.cos(jr),Mo=[Hs,-Js,Js,Hs];Vr._matMult(Mo),ys._matMult(Mo),Sr._matMult(Mo),$r._matMult(Mo)}const $s=Ui.stretch+Ui.fixed,Ks=un.stretch+un.fixed;return{tl:Vr,tr:ys,bl:Sr,br:$r,tex:{x:S.paddedRect.x+_f+$s,y:S.paddedRect.y+_f+Ks,w:hn.stretch+hn.fixed-$s,h:Cn.stretch+Cn.fixed-Ks},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:so,pixelOffsetBR:Hr,minFontScaleX:Ni/O/q,minFontScaleY:ln/O/se,isSDF:s}};if(u&&(S.stretchX||S.stretchY)){const Ui=Vm(ue,pt,Ae),un=Vm(ge,Rt,Ue);for(let hn=0;hn<Ui.length-1;hn++){const Cn=Ui[hn],kn=Ui[hn+1];for(let sn=0;sn<un.length-1;sn++)_.push(Sn(Cn,un[sn],kn,un[sn+1]))}}else _.push(Sn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:H+1}));return _}function Wf(n,t,s){let u=0;for(const _ of n)u+=Math.max(t,Math.min(s,_[1]))-Math.max(t,Math.min(s,_[0]));return u}function Vm(n,t,s){const u=[{fixed:-_f,stretch:0}];for(const[_,S]of n){const O=u[u.length-1];u.push({fixed:_-O.stretch,stretch:O.stretch}),u.push({fixed:_-O.stretch,stretch:O.stretch+(S-_)})}return u.push({fixed:t+_f,stretch:s}),u}function qf(n,t,s,u){return n/t*s+u}function Xf(n,t,s,u){return n-t*s/u}function Dg(n,t,s,u){const _=t+n.positionedLines[u].lineOffset;return 0===u?s+_/2:s+(_+(t+n.positionedLines[u-1].lineOffset))/2}class Rg{constructor(t=[],s=Lg){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:u}=this,_=s[t];for(;t>0;){const S=t-1>>1,O=s[S];if(u(_,O)>=0)break;s[t]=O,t=S}s[t]=_}_down(t){const{data:s,compare:u}=this,_=this.length>>1,S=s[t];for(;t<_;){let O=1+(t<<1),F=s[O];const H=O+1;if(H<this.length&&u(s[H],F)<0&&(O=H,F=s[H]),u(F,S)>=0)break;s[t]=F,t=O}s[t]=S}}function Lg(n,t){return n<t?-1:n>t?1:0}function Pg(n,t=1,s=!1){let u=1/0,_=1/0,S=-1/0,O=-1/0;const F=n[0];for(let ke=0;ke<F.length;ke++){const Ae=F[ke];(!ke||Ae.x<u)&&(u=Ae.x),(!ke||Ae.y<_)&&(_=Ae.y),(!ke||Ae.x>S)&&(S=Ae.x),(!ke||Ae.y>O)&&(O=Ae.y)}const H=Math.min(S-u,O-_);let q=H/2;const se=new Rg([],zg);if(0===H)return new rt(u,_);for(let ke=u;ke<S;ke+=H)for(let Ae=_;Ae<O;Ae+=H)se.push(new vf(ke+q,Ae+q,q,n));let ue=function(ke){let Ae=0,Ue=0,pt=0;const Rt=ke[0];for(let Xt=0,Lt=Rt.length,Wt=Lt-1;Xt<Lt;Wt=Xt++){const li=Rt[Xt],si=Rt[Wt],Ni=li.x*si.y-si.x*li.y;Ue+=(li.x+si.x)*Ni,pt+=(li.y+si.y)*Ni,Ae+=3*Ni}return new vf(Ue/Ae,pt/Ae,0,ke)}(n),ge=se.length;for(;se.length;){const ke=se.pop();(ke.d>ue.d||!ue.d)&&(ue=ke,s&&console.log("found best %d after %d probes",Math.round(1e4*ke.d)/1e4,ge)),ke.max-ue.d<=t||(q=ke.h/2,se.push(new vf(ke.p.x-q,ke.p.y-q,q,n)),se.push(new vf(ke.p.x+q,ke.p.y-q,q,n)),se.push(new vf(ke.p.x-q,ke.p.y+q,q,n)),se.push(new vf(ke.p.x+q,ke.p.y+q,q,n)),ge+=4)}return s&&(console.log(`num probes: ${ge}`),console.log(`best distance: ${ue.d}`)),ue.p}function zg(n,t){return t.max-n.max}class vf{constructor(t,s,u,_){this.p=new rt(t,s),this.h=u,this.d=function(S,O){let F=!1,H=1/0;for(let q=0;q<O.length;q++){const se=O[q];for(let ue=0,ge=se.length,ke=ge-1;ue<ge;ke=ue++){const Ae=se[ue],Ue=se[ke];Ae.y>S.y!=Ue.y>S.y&&S.x<(Ue.x-Ae.x)*(S.y-Ae.y)/(Ue.y-Ae.y)+Ae.x&&(F=!F),H=Math.min(H,sh(S,Ae,Ue))}}return(F?1:-1)*Math.sqrt(H)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const yf=7,mm=Number.POSITIVE_INFINITY,Fg=Math.sqrt(2);function $m(n,[t,s]){let u=0,_=0;if(s===mm){t<0&&(t=0);const S=t/Fg;switch(n){case"top-right":case"top-left":_=S-yf;break;case"bottom-right":case"bottom-left":_=-S+yf;break;case"bottom":_=-t+yf;break;case"top":_=t-yf}switch(n){case"top-right":case"bottom-right":u=-S;break;case"top-left":case"bottom-left":u=S;break;case"left":u=t;break;case"right":u=-t}}else{switch(t=Math.abs(t),s=Math.abs(s),n){case"top-right":case"top-left":case"top":_=s-yf;break;case"bottom-right":case"bottom-left":case"bottom":_=-s+yf}switch(n){case"top-right":case"bottom-right":case"right":u=-t;break;case"top-left":case"bottom-left":case"left":u=t}}return[u,_]}function Yg(n,t,s,u,_,S,O,F,H,q){n.createArrays(),n.tilePixelRatio=qn/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const se=n.layers[0].layout,ue=n.layers[0]._unevaluatedLayout._values,ge={};if("composite"===n.textSizeData.kind){const{minZoom:Ue,maxZoom:pt}=n.textSizeData;ge.compositeTextSizes=[ue["text-size"].possiblyEvaluate(new le(Ue),F),ue["text-size"].possiblyEvaluate(new le(pt),F)]}if("composite"===n.iconSizeData.kind){const{minZoom:Ue,maxZoom:pt}=n.iconSizeData;ge.compositeIconSizes=[ue["icon-size"].possiblyEvaluate(new le(Ue),F),ue["icon-size"].possiblyEvaluate(new le(pt),F)]}ge.layoutTextSize=ue["text-size"].possiblyEvaluate(new le(H+1),F),ge.layoutIconSize=ue["icon-size"].possiblyEvaluate(new le(H+1),F),ge.textMaxSize=ue["text-size"].possiblyEvaluate(new le(18),F);const ke="map"===se.get("text-rotation-alignment")&&"point"!==se.get("symbol-placement"),Ae=se.get("text-size");for(const Ue of n.features){const pt=se.get("text-font").evaluate(Ue,{},F).join(","),Rt=Ae.evaluate(Ue,{},F),Xt=ge.layoutTextSize.evaluate(Ue,{},F),Lt=(ge.layoutIconSize.evaluate(Ue,{},F),{horizontal:{},vertical:void 0}),Wt=Ue.text;let li,si=[0,0];if(Wt){const ln=Wt.toString(),Sn=se.get("text-letter-spacing").evaluate(Ue,{},F)*Ta,Ui=se.get("text-line-height").evaluate(Ue,{},F)*Ta,un=cu(ln)?Sn:0,hn=se.get("text-anchor").evaluate(Ue,{},F),Cn=se.get("text-variable-anchor");if(!Cn){const Bn=se.get("text-radial-offset").evaluate(Ue,{},F);si=Bn?$m(hn,[Bn*Ta,mm]):se.get("text-offset").evaluate(Ue,{},F).map(Nr=>Nr*Ta)}let kn=ke?"center":se.get("text-justify").evaluate(Ue,{},F);const sn="point"===se.get("symbol-placement"),Fn=sn?se.get("text-max-width").evaluate(Ue,{},F)*Ta:1/0,Kn=Bn=>{n.allowVerticalPlacement&&cc(ln)&&(Lt.vertical=Gt(Wt,t,s,_,pt,Fn,Ui,hn,Bn,un,si,J.vertical,!0,Xt,Rt))};if(!ke&&Cn){const Bn="auto"===kn?Cn.map(In=>gm(In)):[kn];let Nr=!1;for(let In=0;In<Bn.length;In++){const gr=Bn[In];if(!Lt.horizontal[gr])if(Nr)Lt.horizontal[gr]=Lt.horizontal[0];else{const Vr=Gt(Wt,t,s,_,pt,Fn,Ui,"center",gr,un,si,J.horizontal,!1,Xt,Rt);Vr&&(Lt.horizontal[gr]=Vr,Nr=1===Vr.positionedLines.length)}}Kn("left")}else{if("auto"===kn&&(kn=gm(hn)),sn||se.get("text-writing-mode").indexOf("horizontal")>=0||!cc(ln)){const Bn=Gt(Wt,t,s,_,pt,Fn,Ui,hn,kn,un,si,J.horizontal,!1,Xt,Rt);Bn&&(Lt.horizontal[kn]=Bn)}Kn(sn?"left":kn)}}let Ni=!1;if(Ue.icon&&Ue.icon.name){const ln=u[Ue.icon.name];ln&&(li=Eh(_[Ue.icon.name],se.get("icon-offset").evaluate(Ue,{},F),se.get("icon-anchor").evaluate(Ue,{},F)),Ni=ln.sdf,void 0===n.sdfIcons?n.sdfIcons=ln.sdf:n.sdfIcons!==ln.sdf&&Bi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ln.pixelRatio!==n.pixelRatio||0!==se.get("icon-rotate").constantOr(1))&&(n.iconsNeedLinear=!0))}const Fi=jm(Lt.horizontal)||Lt.vertical;n.iconsInText||(n.iconsInText=!!Fi&&Fi.iconsInText),(Fi||li)&&Bg(n,Ue,Lt,li,u,ge,Xt,0,si,Ni,O,F,q)}S&&n.generateCollisionDebugBuffers(H,n.collisionBoxArray)}function gm(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Bg(n,t,s,u,_,S,O,F,H,q,se,ue,ge){let ke=S.textMaxSize.evaluate(t,{},ue);void 0===ke&&(ke=O);const Ae=n.layers[0].layout,Ue=Ae.get("icon-offset").evaluate(t,{},ue),pt=jm(s.horizontal)||s.vertical,Rt="globe"===ge.name,Xt=Ta,Lt=O/Xt,Wt=n.tilePixelRatio*ke/Xt,li=(hn=n.overscaling,n.zoom>18&&hn>2&&(hn>>=1),Math.max(qn/(512*hn),1)*Ae.get("symbol-spacing")),si=Ae.get("text-padding")*n.tilePixelRatio,Ni=Ae.get("icon-padding")*n.tilePixelRatio,Fi=ti(Ae.get("text-max-angle")),ln="map"===Ae.get("text-rotation-alignment")&&"point"!==Ae.get("symbol-placement"),Sn="map"===Ae.get("icon-rotation-alignment")&&"point"!==Ae.get("symbol-placement"),Ui=Ae.get("symbol-placement"),un=li/2;var hn;const Cn=Ae.get("icon-text-fit");let kn;u&&"none"!==Cn&&(n.allowVerticalPlacement&&s.vertical&&(kn=bc(u,s.vertical,Cn,Ae.get("icon-text-fit-padding"),Ue,Lt)),pt&&(u=bc(u,pt,Cn,Ae.get("icon-text-fit-padding"),Ue,Lt)));const sn=(Fn,Kn,Bn)=>{if(Kn.x<0||Kn.x>=qn||Kn.y<0||Kn.y>=qn)return;let Nr=null;if(Rt){const{x:In,y:gr,z:Vr}=ge.projectTilePoint(Kn.x,Kn.y,Bn);Nr={anchor:new dd(In,gr,Vr,0,void 0),up:ge.upVector(Bn,Kn.x,Kn.y)}}!function(In,gr,Vr,ys,$r,Sr,so,Hr,jr,$s,Ks,Js,Hs,Mo,Xo,Ia,js,qa,Oa,Go,Cs,Ma,Qs,xc,Aa){const Ll=In.addToLineVertexArray(gr,ys);let El,wc,Sl,lu,wf,Vf,$f,Eg=0,Sg=0,kg=0,Tg=0,Am=-1,Dm=-1;const Pu={};let Ig=Al("");const Zp=Vr?Vr.anchor:gr;let Rm=0,Lm=0;if(void 0===jr._unevaluatedLayout.getValue("text-radial-offset")?[Rm,Lm]=jr.layout.get("text-offset").evaluate(Cs,{},Aa).map(Kc=>Kc*Ta):(Rm=jr.layout.get("text-radial-offset").evaluate(Cs,{},Aa)*Ta,Lm=mm),In.allowVerticalPlacement&&$r.vertical){const Kc=$r.vertical;if(Xo)Vf=_m(Kc),Hr&&($f=_m(Hr));else{const Jc=jr.layout.get("text-rotate").evaluate(Cs,{},Aa)+90;Sl=Zf($s,Zp,gr,Ks,Js,Hs,Kc,Mo,Jc,Ia),Hr&&(lu=Zf($s,Zp,gr,Ks,Js,Hs,Hr,qa,Jc))}}if(Sr){const Kc=jr.layout.get("icon-rotate").evaluate(Cs,{},Aa),Jc="none"!==jr.layout.get("icon-text-fit"),Hf=Nm(Sr,Kc,Qs,Jc),zm=Hr?Nm(Hr,Kc,Qs,Jc):void 0;wc=Zf($s,Zp,gr,Ks,Js,Hs,Sr,qa,Kc),Eg=4*Hf.length;const Og=In.iconSizeData;let Kp=null;"source"===Og.kind?(Kp=[Dc*jr.layout.get("icon-size").evaluate(Cs,{},Aa)],Kp[0]>pp&&Bi(`${In.layerIds[0]}: Value for "icon-size" is >= ${Lf}. Reduce your "icon-size".`)):"composite"===Og.kind&&(Kp=[Dc*Ma.compositeIconSizes[0].evaluate(Cs,{},Aa),Dc*Ma.compositeIconSizes[1].evaluate(Cs,{},Aa)],(Kp[0]>pp||Kp[1]>pp)&&Bi(`${In.layerIds[0]}: Value for "icon-size" is >= ${Lf}. Reduce your "icon-size".`)),In.addSymbols(In.icon,Hf,Kp,Go,Oa,Cs,!1,Vr,gr,Ll.lineStartIndex,Ll.lineLength,-1,xc,Aa),Am=In.icon.placedSymbolArray.length-1,zm&&(Sg=4*zm.length,In.addSymbols(In.icon,zm,Kp,Go,Oa,Cs,J.vertical,Vr,gr,Ll.lineStartIndex,Ll.lineLength,-1,xc,Aa),Dm=In.icon.placedSymbolArray.length-1)}for(const Kc in $r.horizontal){const Jc=$r.horizontal[Kc];El||(Ig=Al(Jc.text),Xo?wf=_m(Jc):El=Zf($s,Zp,gr,Ks,Js,Hs,Jc,Mo,jr.layout.get("text-rotate").evaluate(Cs,{},Aa),Ia));const Hf=1===Jc.positionedLines.length;if(kg+=Hm(In,Vr,gr,Jc,so,jr,Xo,Cs,Ia,Ll,$r.vertical?J.horizontal:J.horizontalOnly,Hf?Object.keys($r.horizontal):[Kc],Pu,Am,Ma,xc,Aa),Hf)break}$r.vertical&&(Tg+=Hm(In,Vr,gr,$r.vertical,so,jr,Xo,Cs,Ia,Ll,J.vertical,["vertical"],Pu,Dm,Ma,xc,Aa));let yp=-1;const Pm=(Kc,Jc)=>Kc?Math.max(Kc,Jc):Jc;yp=Pm(wf,yp),yp=Pm(Vf,yp),yp=Pm($f,yp);const p_=yp>-1?1:0;In.glyphOffsetArray.length>=mp.MAX_GLYPHS&&Bi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Cs.sortKey&&In.addToSortKeyRanges(In.symbolInstances.length,Cs.sortKey),In.symbolInstances.emplaceBack(Zp.x,Zp.y,Zp.z,gr.x,gr.y,Pu.right>=0?Pu.right:-1,Pu.center>=0?Pu.center:-1,Pu.left>=0?Pu.left:-1,Pu.vertical>=0?Pu.vertical:-1,Am,Dm,Ig,void 0!==El?El:In.collisionBoxArray.length,void 0!==El?El+1:In.collisionBoxArray.length,void 0!==Sl?Sl:In.collisionBoxArray.length,void 0!==Sl?Sl+1:In.collisionBoxArray.length,void 0!==wc?wc:In.collisionBoxArray.length,void 0!==wc?wc+1:In.collisionBoxArray.length,lu||In.collisionBoxArray.length,lu?lu+1:In.collisionBoxArray.length,Ks,kg,Tg,Eg,Sg,p_,0,Rm,Lm,yp)}(n,Kn,Nr,Fn,s,u,_,kn,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,si,ln,H,0,Ni,Sn,Ue,t,S,q,se,ue)};if("line"===Ui)for(const Fn of Ym(t.geometry,0,0,qn,qn)){const Kn=Ag(Fn,li,Fi,s.vertical||pt,u,Xt,Wt,n.overscaling,qn);for(const Bn of Kn)pt&&Gg(n,pt.text,un,Bn)||sn(Fn,Bn,ue)}else if("line-center"===Ui){for(const Fn of t.geometry)if(Fn.length>1){const Kn=pm(Fn,Fi,s.vertical||pt,u,Xt,Wt);Kn&&sn(Fn,Kn,ue)}}else if("Polygon"===t.type)for(const Fn of Uc(t.geometry,0)){const Kn=Pg(Fn,16);sn(Fn[0],new dd(Kn.x,Kn.y,0,0,void 0),ue)}else if("LineString"===t.type)for(const Fn of t.geometry)sn(Fn,new dd(Fn[0].x,Fn[0].y,0,0,void 0),ue);else if("Point"===t.type)for(const Fn of t.geometry)for(const Kn of Fn)sn([Kn],new dd(Kn.x,Kn.y,0,0,void 0),ue)}const Lf=255,pp=Lf*Dc;function Hm(n,t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae,Ue,pt){const Rt=function(Wt,li,si,Ni,Fi,ln,Sn,Ui){const un=[];if(0===li.positionedLines.length)return un;const hn=Ni.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,Cn=function(Bn){const Nr=Bn[0],In=Bn[1],gr=Nr*In;return gr>0?[Nr,-In]:gr<0?[-Nr,In]:0===Nr?[In,Nr]:[In,-Nr]}(si);let kn=Math.abs(li.top-li.bottom);for(const Bn of li.positionedLines)kn-=Bn.lineOffset;const sn=li.positionedLines.length,Fn=kn/sn;let Kn=li.top-si[1];for(let Bn=0;Bn<sn;++Bn){const Nr=li.positionedLines[Bn];Kn=Dg(li,Fn,Kn,Bn);for(const In of Nr.positionedGlyphs){if(!In.rect)continue;const gr=In.rect||{};let Vr=l+1,ys=!0,$r=1,Sr=0;if(In.imageName){const Qs=Sn[In.imageName];if(!Qs)continue;if(Qs.sdf){Bi("SDF images are not supported in formatted text and will be ignored.");continue}ys=!1,$r=Qs.pixelRatio,Vr=E/$r}const so=(Fi||Ui)&&In.vertical,Hr=In.metrics.advance*In.scale/2,jr=In.metrics,$s=In.rect;if(null===$s)continue;Ui&&li.verticalizable&&(Sr=In.imageName?Hr-In.metrics.width*In.scale/2:0);const Ks=Fi?[In.x+Hr,In.y]:[0,0];let Js=[0,0],Hs=[0,0],Mo=!1;Fi||(so?(Hs=[In.x+Hr+Cn[0],In.y+Cn[1]-Sr],Mo=!0):Js=[In.x+Hr+si[0],In.y+si[1]-Sr]);const Xo=$s.w*In.scale/($r*(In.localGlyph?ou:1)),Ia=$s.h*In.scale/($r*(In.localGlyph?ou:1));let js,qa,Oa,Go;if(so){const Qs=In.y-Kn,xc=new rt(-Hr,Hr-Qs),Aa=-Math.PI/2,Ll=new rt(...Hs);js=new rt(-Hr+Js[0],Js[1]),js._rotateAround(Aa,xc)._add(Ll),js.x+=-Qs+Hr,js.y-=(jr.left-Vr)*In.scale;const El=In.imageName?jr.advance*In.scale:Ta*In.scale,wc=String.fromCharCode(In.glyph);y(wc)?js.x+=(1-Vr)*In.scale:Ke(wc)?js.x+=El-jr.height*In.scale+(-Vr-1)*In.scale:js.x+=In.imageName||jr.width+2*Vr===$s.w&&jr.height+2*Vr===$s.h?(El-Ia)/2:(El-(jr.height+2*Vr)*In.scale)/2,qa=new rt(js.x,js.y-Xo),Oa=new rt(js.x+Ia,js.y),Go=new rt(js.x+Ia,js.y-Xo)}else{const Qs=(jr.left-Vr)*In.scale-Hr+Js[0],xc=(-jr.top-Vr)*In.scale+Js[1],Aa=Qs+Xo,Ll=xc+Ia;js=new rt(Qs,xc),qa=new rt(Aa,xc),Oa=new rt(Qs,Ll),Go=new rt(Aa,Ll)}if(hn){let Qs;Qs=Fi?new rt(0,0):Mo?new rt(Cn[0],Cn[1]):new rt(si[0],si[1]),js._rotateAround(hn,Qs),qa._rotateAround(hn,Qs),Oa._rotateAround(hn,Qs),Go._rotateAround(hn,Qs)}const Cs=new rt(0,0),Ma=new rt(0,0);un.push({tl:js,tr:qa,bl:Oa,br:Go,tex:gr,writingMode:li.writingMode,glyphOffset:Ks,sectionIndex:In.sectionIndex,isSDF:ys,pixelOffsetTL:Cs,pixelOffsetBR:Ma,minFontScaleX:0,minFontScaleY:0})}}return un}(0,u,H,S,O,F,_,n.allowVerticalPlacement),Xt=n.textSizeData;let Lt=null;"source"===Xt.kind?(Lt=[Dc*S.layout.get("text-size").evaluate(F,{},pt)],Lt[0]>pp&&Bi(`${n.layerIds[0]}: Value for "text-size" is >= ${Lf}. Reduce your "text-size".`)):"composite"===Xt.kind&&(Lt=[Dc*Ae.compositeTextSizes[0].evaluate(F,{},pt),Dc*Ae.compositeTextSizes[1].evaluate(F,{},pt)],(Lt[0]>pp||Lt[1]>pp)&&Bi(`${n.layerIds[0]}: Value for "text-size" is >= ${Lf}. Reduce your "text-size".`)),n.addSymbols(n.text,Rt,Lt,H,O,F,se,t,s,q.lineStartIndex,q.lineLength,ke,Ue,pt);for(const Wt of ue)ge[Wt]=n.text.placedSymbolArray.length-1;return 4*Rt.length}function jm(n){for(const t in n)return n[t];return null}function Zf(n,t,s,u,_,S,O,F,H,q){let se=O.top,ue=O.bottom,ge=O.left,ke=O.right;const Ae=O.collisionPadding;if(Ae&&(ge-=Ae[0],se-=Ae[1],ke+=Ae[2],ue+=Ae[3]),H){const Ue=new rt(ge,se),pt=new rt(ke,se),Rt=new rt(ge,ue),Xt=new rt(ke,ue),Lt=ti(H);let Wt=new rt(0,0);q&&(Wt=new rt(q[0],q[1])),Ue._rotateAround(Lt,Wt),pt._rotateAround(Lt,Wt),Rt._rotateAround(Lt,Wt),Xt._rotateAround(Lt,Wt),ge=Math.min(Ue.x,pt.x,Rt.x,Xt.x),ke=Math.max(Ue.x,pt.x,Rt.x,Xt.x),se=Math.min(Ue.y,pt.y,Rt.y,Xt.y),ue=Math.max(Ue.y,pt.y,Rt.y,Xt.y)}return n.emplaceBack(t.x,t.y,t.z,s.x,s.y,ge,se,ke,ue,F,u,_,S),n.length-1}function _m(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const t=n.bottom-n.top;return t>0?Math.max(10,t):null}function Gg(n,t,s,u){const _=n.compareText;if(t in _){const S=_[t];for(let O=S.length-1;O>=0;O--)if(u.dist(S[O])<s)return!0}else _[t]=[];return _[t].push(u),!1}function Um(n,t){const s=n.fovAboveCenter,u=n.elevation?n.elevation.getMinElevationBelowMSL()*t:0,_=(n._camera.position[2]*n.worldSize-u)/Math.cos(n._pitch),S=Math.sin(s)*_/Math.sin(Math.max(Math.PI/2-n._pitch-s,.01)),O=Math.sin(n._pitch)*S+_;return Math.min(1.01*O,_*(1/n._horizonShift))}function qp(n,t){if(!t.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:t};const s=Math.pow(2,-n.z),u=n.x*s,_=(n.x+1)*s,S=n.y*s,O=(n.y+1)*s,F=Rl(u),H=Rl(_),q=Ps(S),se=Ps(O),ue=t.project(F,q),ge=t.project(H,q),ke=t.project(H,se),Ae=t.project(F,se);let Ue=Math.min(ue.x,ge.x,ke.x,Ae.x),pt=Math.min(ue.y,ge.y,ke.y,Ae.y),Rt=Math.max(ue.x,ge.x,ke.x,Ae.x),Xt=Math.max(ue.y,ge.y,ke.y,Ae.y);const Lt=s/16;function Wt(si,Ni,Fi,ln,Sn,Ui){const un=(Fi+Sn)/2,hn=(ln+Ui)/2,Cn=t.project(Rl(un),Ps(hn)),kn=Math.max(0,Ue-Cn.x,pt-Cn.y,Cn.x-Rt,Cn.y-Xt);Ue=Math.min(Ue,Cn.x),Rt=Math.max(Rt,Cn.x),pt=Math.min(pt,Cn.y),Xt=Math.max(Xt,Cn.y),kn>Lt&&(Wt(si,Cn,Fi,ln,un,hn),Wt(Cn,Ni,un,hn,Sn,Ui))}Wt(ue,ge,u,S,_,S),Wt(ge,ke,_,S,_,O),Wt(ke,Ae,_,O,u,O),Wt(Ae,ue,u,O,u,S),Ue-=Lt,pt-=Lt,Rt+=Lt,Xt+=Lt;const li=1/Math.max(Rt-Ue,Xt-pt);return{scale:li,x:Ue*li,y:pt*li,x2:Rt*li,y2:Xt*li,projection:t}}const Ng=Jl(new Float32Array(16));class fp{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,s){return{x:0,y:0,z:0}}unproject(t,s){return new ps(0,0)}projectTilePoint(t,s,u){return{x:t,y:s,z:0}}locationPoint(t,s,u=!0){return t._coordinatePoint(t.locationCoordinate(s),u)}pixelsPerMeter(t,s){return Io(1,t)*s}pixelSpaceConversion(t,s,u){return 1}farthestPixelDistance(t){return Um(t,t.pixelsPerMeter)}pointCoordinate(t,s,u,_){const S=t.horizonLineFromTop(!1),O=new rt(s,Math.max(S,u));return t.rayIntersectionCoordinate(t.pointRayIntersection(O,_))}pointCoordinate3D(t,s,u){const _=new rt(s,u);if(t.elevation)return t.elevation.pointCoordinate(_);{const S=this.pointCoordinate(t,_.x,_.y,0);return[S.x,S.y,S.z]}}isPointAboveHorizon(t,s){if(t.elevation)return!this.pointCoordinate3D(t,s.x,s.y);const u=t.horizonLineFromTop();return s.y<u}createInversionMatrix(t,s){return Ng}createTileMatrix(t,s,u){let _,S,O;const F=u.canonical,H=Jl(new Float64Array(16));if(this.isReprojectedInTileSpace){const q=qp(F,this);_=1,S=q.x+u.wrap*q.scale,O=q.y,pc(H,H,[_/q.scale,_/q.scale,t.pixelsPerMeter/s])}else _=s/t.zoomScale(F.z),S=(F.x+Math.pow(2,F.z)*u.wrap)*_,O=F.y*_;return Ql(H,H,[S,O,0]),pc(H,H,[_/qn,_/qn,1]),H}upVector(t,s,u){return[0,0,1]}upVectorScale(t,s,u){return{metersToTile:1}}}class Vg extends fp{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[s,u]=this.parallels=t.parallels||[29.5,45.5],_=Math.sin(ti(s));this.n=(_+Math.sin(ti(u)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(t,s){const{n:u,c:_,r0:S}=this,O=ti(t-this.center[0]),F=ti(s),H=Math.sqrt(_-2*u*Math.sin(F))/u;return{x:H*Math.sin(O*u),y:H*Math.cos(O*u)-S,z:0}}unproject(t,s){const{n:u,c:_,r0:S}=this,O=S+s;let F=Math.atan2(t,Math.abs(O))*Math.sign(O);O*u<0&&(F-=Math.PI*Math.sign(t)*Math.sign(O));const H=ti(this.center[0])*u;F=Zi(F,-Math.PI-H,Math.PI-H);const q=Ii(St(F/u)+this.center[0],-180,180),se=Math.asin(Ii((_-(t*t+O*O)*u*u)/(2*u),-1,1)),ue=Ii(St(se),-ha,ha);return new ps(q,ue)}}const Pf=1.340264,zf=-.081106,Ff=893e-6,Yf=.003796,Kf=Math.sqrt(3)/2;class $g extends fp{project(t,s){s=s/180*Math.PI,t=t/180*Math.PI;const u=Math.asin(Kf*Math.sin(s)),_=u*u,S=_*_*_;return{x:.5*(t*Math.cos(u)/(Kf*(Pf+3*zf*_+S*(7*Ff+9*Yf*_)))/Math.PI+.5),y:1-.5*(u*(Pf+zf*_+S*(Ff+Yf*_))/Math.PI+1),z:0}}unproject(t,s){t=(2*t-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,_=u*u,S=_*_*_;for(let se,ue,ge,ke=0;ke<12&&(ue=u*(Pf+zf*_+S*(Ff+Yf*_))-s,ge=Pf+3*zf*_+S*(7*Ff+9*Yf*_),se=ue/ge,u=Ii(u-se,-Math.PI/3,Math.PI/3),_=u*u,S=_*_*_,!(Math.abs(se)<1e-12));++ke);const O=Kf*t*(Pf+3*zf*_+S*(7*Ff+9*Yf*_))/Math.cos(u),F=Math.asin(Math.sin(u)/Kf),H=Ii(180*O/Math.PI,-180,180),q=Ii(180*F/Math.PI,-ha,ha);return new ps(H,q)}}class Hg extends fp{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,s){return{x:.5+t/360,y:.5-s/360,z:0}}unproject(t,s){const u=360*(t-.5),_=Ii(360*(.5-s),-ha,ha);return new ps(u,_)}}const bf=Math.PI/2;function Jf(n){return Math.tan((bf+n)/2)}class jg extends fp{constructor(t){super(t),this.center=t.center||[0,30];const[s,u]=this.parallels=t.parallels||[30,30];let _=ti(s),S=ti(u);this.southernCenter=_+S<0,this.southernCenter&&(_=-_,S=-S);const O=Math.cos(_),F=Jf(_);this.n=_===S?Math.sin(_):Math.log(O/Math.cos(S))/Math.log(Jf(S)/F),this.f=O*Math.pow(Jf(_),this.n)/this.n}project(t,s){s=ti(s),this.southernCenter&&(s=-s),t=ti(t-this.center[0]);const u=1e-6,{n:_,f:S}=this;S>0?s<-bf+u&&(s=-bf+u):s>bf-u&&(s=bf-u);const O=S/Math.pow(Jf(s),_);let F=O*Math.sin(_*t),H=S-O*Math.cos(_*t);return F=.5*(F/Math.PI+.5),H=.5*(H/Math.PI+.5),{x:F,y:this.southernCenter?H:1-H,z:0}}unproject(t,s){t=(2*t-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:_}=this,S=_-s,O=Math.sign(S),F=Math.sign(u)*Math.sqrt(t*t+S*S);let H=Math.atan2(t,Math.abs(S))*O;S*u<0&&(H-=Math.PI*Math.sign(t)*O);const q=Ii(St(H/u)+this.center[0],-180,180),se=Ii(St(2*Math.atan(Math.pow(_/F,1/u))-bf),-ha,ha);return new ps(q,this.southernCenter?-se:se)}}class Wm extends fp{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,s){return{x:ic(t),y:_c(s),z:0}}unproject(t,s){const u=Rl(t),_=Ps(s);return new ps(u,_)}}const qm=ti(ha);class Ug extends fp{project(t,s){const u=(s=ti(s))*s,_=u*u;return{x:.5*((t=ti(t))*(.8707-.131979*u+_*(_*(.003971*u-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+_*(.028874*u-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(t,s){t=(2*t-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,_=25,S=0,O=u*u;do{O=u*u;const q=O*O;S=(u*(1.007226+O*(.015085+q*(.028874*O-.044475-.005916*q)))-s)/(1.007226+O*(.045255+q*(.259866*O-.311325-.005916*11*q))),u=Ii(u-S,-qm,qm)}while(Math.abs(S)>1e-6&&--_>0);O=u*u;const F=Ii(St(t/(.8707+O*(O*(O*O*O*(.003971-.001529*O)-.013791)-.131979))),-180,180),H=St(u);return new ps(F,H)}}const Xm=ti(ha);class Wg extends fp{project(t,s){s=ti(s),t=ti(t);const u=Math.cos(s),_=2/Math.PI,S=Math.acos(u*Math.cos(t/2)),O=Math.sin(S)/S,F=.5*(t*_+2*u*Math.sin(t/2)/O)||0,H=.5*(s+Math.sin(s)/O)||0;return{x:.5*(F/Math.PI+.5),y:1-.5*(H/Math.PI+1),z:0}}unproject(t,s){let u=t=(2*t-.5)*Math.PI,_=s=(2*(1-s)-1)*Math.PI,S=25;const O=1e-6;let F=0,H=0;do{const q=Math.cos(_),se=Math.sin(_),ue=2*se*q,ge=se*se,ke=q*q,Ae=Math.cos(u/2),Ue=Math.sin(u/2),pt=2*Ae*Ue,Rt=Ue*Ue,Xt=1-ke*Ae*Ae,Lt=Xt?1/Xt:0,Wt=Xt?Math.acos(q*Ae)*Math.sqrt(1/Xt):0,li=.5*(2*Wt*q*Ue+2*u/Math.PI)-t,si=.5*(Wt*se+_)-s,Ni=.5*Lt*(ke*Rt+Wt*q*Ae*ge)+1/Math.PI,Fi=Lt*(pt*ue/4-Wt*se*Ue),ln=.125*Lt*(ue*Ue-Wt*se*ke*pt),Sn=.5*Lt*(ge*Ae+Wt*Rt*q)+.5,Ui=Fi*ln-Sn*Ni;F=(si*Fi-li*Sn)/Ui,H=(li*ln-si*Ni)/Ui,u=Ii(u-F,-Math.PI,Math.PI),_=Ii(_-H,-Xm,Xm)}while((Math.abs(F)>O||Math.abs(H)>O)&&--S>0);return new ps(St(u),St(_))}}class Zm extends fp{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ti(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,s){const{scale:u,cosPhi:_}=this;return{x:ti(t)*_*u+.5,y:-Math.sin(ti(s))/_*u+.5,z:0}}unproject(t,s){const{scale:u,cosPhi:_}=this,S=-(s-.5)/u,O=Ii(St((t-.5)/u)/_,-180,180),F=Math.asin(Ii(S*_,-1,1)),H=Ii(St(F),-ha,ha);return new ps(O,H)}}class qg extends Wm{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,s,u){const _=Vl(t,s,u);return Zs(_,_,Wd(gc(u))),{x:_[0],y:_[1],z:_[2]}}locationPoint(t,s){const u=xd(s.lat,s.lng),_=ja([],u),S=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(s),t._centerAltitude):t._centerAltitude;Vc(u,u,_,Io(1,0)*qn*S);const O=Jl(new Float64Array(16));return Gc(O,t.pixelMatrix,t.globeMatrix),Zs(u,u,O),new rt(u[0],u[1])}pixelsPerMeter(t,s){return Io(1,0)*s}pixelSpaceConversion(t,s,u){const _=Io(1,t)*s,S=Cr(Io(1,45)*s,_,u);return this.pixelsPerMeter(t,s)/S}createTileMatrix(t,s,u){const _=ua(gc(u.canonical));return Gc(new Float64Array(16),t.globeMatrix,_)}createInversionMatrix(t,s){const{center:u}=t,_=Wd(gc(s));return $d(_,_,ti(u.lng)),Vd(_,_,ti(u.lat)),pc(_,_,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(t,s,u,_){return mu(t,s,u,!0)||new Cd(0,0)}pointCoordinate3D(t,s,u){const _=this.pointCoordinate(t,s,u,0);return[_.x,_.y,_.z]}isPointAboveHorizon(t,s){return!mu(t,s.x,s.y,!1)}farthestPixelDistance(t){const s=function(_,S){const O=_.cameraToCenterDistance,F=_._centerAltitude*S,H=_._camera,q=_._camera.forward(),se=ec([],al([],q,-O),[0,0,F]),ue=_.worldSize/(2*Math.PI),ge=[0,0,-ue],ke=_.width/_.height,Ae=Math.tan(_.fovAboveCenter),Ue=al([],H.up(),Ae),pt=al([],H.right(),Ae*ke),Rt=ja([],ec([],ec([],q,Ue),pt)),Xt=[];let Lt;if(new qu(se,Rt).closestPointOnSphere(ge,ue,Xt)){const Wt=ec([],Xt,ge),li=tc([],Wt,se);Lt=Math.cos(_.fovAboveCenter)*_d(li)}else{const Wt=tc([],se,ge),li=tc([],ge,se);ja(li,li);const si=_d(Wt)-ue;Lt=Math.sqrt(si*(si+2*ue));const Ni=Math.acos(Lt/(ue+si))-Math.acos(xl(q,li));Lt*=Math.cos(Ni)}return 1.01*Lt}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),u=wd(t.zoom);if(u>0){const _=Um(t,Io(1,t.center.lat)*t.worldSize),S=t.worldSize/(2*Math.PI),O=Math.max(t.width,t.height)/t.worldSize*Math.PI;return Cr(s,_+S*(1-Math.cos(O)),Math.pow(u,10))}return s}upVector(t,s,u){return Vl(s,u,t,1)}upVectorScale(t){return{metersToTile:Ud(od(gc(t)))}}}function Km(n){const t=n.parallels,s=!!t&&Math.abs(t[0]+t[1])<.01;switch(n.name){case"mercator":return new Wm(n);case"equirectangular":return new Hg(n);case"naturalEarth":return new Ug(n);case"equalEarth":return new $g(n);case"winkelTripel":return new Wg(n);case"albers":return s?new Zm(n):new Vg(n);case"lambertConformalConic":return s?new Zm(n):new jg(n);case"globe":return new qg(n)}throw new Error(`Invalid projection name: ${n.name}`)}const Xg=zt.types,Zg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qf(n,t,s,u,_,S,O,F,H,q,se,ue,ge){const ke=F?Math.min(pp,Math.round(F[0])):0,Ae=F?Math.min(pp,Math.round(F[1])):0;n.emplaceBack(t,s,Math.round(32*u),Math.round(32*_),S,O,(ke<<1)+(H?1:0),Ae,16*q,16*se,256*ue,256*ge)}function em(n,t,s,u,_,S,O){n.emplaceBack(t,s,u,_,S,O)}function tm(n,t,s,u,_){n.emplaceBack(t,s,u,_),n.emplaceBack(t,s,u,_),n.emplaceBack(t,s,u,_),n.emplaceBack(t,s,u,_)}function Kg(n){for(const t of n.sections)if(xa(t.text))return!0;return!1}class vm{constructor(t){this.layoutVertexArray=new dn,this.indexArray=new tr,this.programConfigurations=t,this.segments=new io,this.dynamicLayoutVertexArray=new bn,this.opacityVertexArray=new er,this.placedSymbolArray=new it,this.globeExtVertexArray=new mn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,s,u,_){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Af.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,nu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Zg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,$p.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||_)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Vn(vm,"SymbolBuffers");class ym{constructor(t,s,u){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new u,this.segments=new io,this.collisionVertexArray=new Tr,this.collisionVertexArrayExt=new pr}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,hf.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Au.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Vn(ym,"CollisionBuffers");class mp{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(O=>O.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Jl([]),this.placementViewportMatrix=Jl([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hp(this.zoom,s["text-size"]),this.iconSizeData=Hp(this.zoom,s["icon-size"]);const u=this.layers[0].layout,_=u.get("symbol-sort-key"),S=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==S&&void 0!==_.constantOr(1),this.sortFeaturesByY=("viewport-y"===S||"auto"===S&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(O=>J[O]),this.stateDependentLayerIds=this.layers.filter(O=>O.isStateDependent()).map(O=>O.id),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new vm(new Yc(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new vm(new Yc(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Gi,this.lineVertexArray=new Zn,this.symbolInstances=new Ht}calculateGlyphDependencies(t,s,u,_,S){for(let O=0;O<t.length;O++)if(s[t.charCodeAt(O)]=!0,_&&S){const F=$[t.charAt(O)];F&&(s[F.charCodeAt(0)]=!0)}}populate(t,s,u,_){const S=this.layers[0],O=S.layout,F="globe"===this.projection.name,H=O.get("text-font"),q=O.get("text-field"),se=O.get("icon-image"),ue=("constant"!==q.value.kind||q.value.value instanceof ir&&!q.value.value.isEmpty()||q.value.value.toString().length>0)&&("constant"!==H.value.kind||H.value.value.length>0),ge="constant"!==se.value.kind||!!se.value.value||Object.keys(se.parameters).length>0,ke=O.get("symbol-sort-key");if(this.features=[],!ue&&!ge)return;const Ae=s.iconDependencies,Ue=s.glyphDependencies,pt=s.availableImages,Rt=new le(this.zoom);for(const{feature:Xt,id:Lt,index:Wt,sourceLayerIndex:li}of t){const si=S._featureFilter.needGeometry,Ni=Ua(Xt,si);if(!S._featureFilter.filter(Rt,Ni,u))continue;if(si||(Ni.geometry=ka(Xt,u,_)),F&&1!==Xt.type&&u.z<=5){const Ui=Ni.geometry,un=.98078528056,hn=(Cn,kn)=>xl(Vl(Cn.x,Cn.y,u,1),Vl(kn.x,kn.y,u,1))<un;for(let Cn=0;Cn<Ui.length;Cn++)Ui[Cn]=ih(Ui[Cn],hn)}let Fi,ln;if(ue){const Ui=S.getValueAndResolveTokens("text-field",Ni,u,pt),un=ir.factory(Ui);Kg(un)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===B()||this.hasRTLText&&ie.isParsed())&&(Fi=h(un,S,Ni))}if(ge){const Ui=S.getValueAndResolveTokens("icon-image",Ni,u,pt);ln=Ui instanceof Ar?Ui:Ar.fromString(Ui)}if(!Fi&&!ln)continue;const Sn=this.sortFeaturesByKey?ke.evaluate(Ni,{},u):void 0;if(this.features.push({id:Lt,text:Fi,icon:ln,index:Wt,sourceLayerIndex:li,geometry:Ni.geometry,properties:Xt.properties,type:Xg[Xt.type],sortKey:Sn}),ln&&(Ae[ln.name]=!0),Fi){const Ui=H.evaluate(Ni,{},u).join(","),un="map"===O.get("text-rotation-alignment")&&"point"!==O.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(J.vertical)>=0;for(const hn of Fi.sections)if(hn.image)Ae[hn.image.name]=!0;else{const Cn=cc(Fi.toString()),kn=hn.fontStack||Ui,sn=Ue[kn]=Ue[kn]||{};this.calculateGlyphDependencies(hn.text,sn,un,this.allowVerticalPlacement,Cn)}}}"line"===O.get("symbol-placement")&&(this.features=function(Xt){const Lt={},Wt={},li=[];let si=0;function Ni(Ui){li.push(Xt[Ui]),si++}function Fi(Ui,un,hn){const Cn=Wt[Ui];return delete Wt[Ui],Wt[un]=Cn,li[Cn].geometry[0].pop(),li[Cn].geometry[0]=li[Cn].geometry[0].concat(hn[0]),Cn}function ln(Ui,un,hn){const Cn=Lt[un];return delete Lt[un],Lt[Ui]=Cn,li[Cn].geometry[0].shift(),li[Cn].geometry[0]=hn[0].concat(li[Cn].geometry[0]),Cn}function Sn(Ui,un,hn){const Cn=hn?un[0][un[0].length-1]:un[0][0];return`${Ui}:${Cn.x}:${Cn.y}`}for(let Ui=0;Ui<Xt.length;Ui++){const un=Xt[Ui],hn=un.geometry,Cn=un.text?un.text.toString():null;if(!Cn){Ni(Ui);continue}const kn=Sn(Cn,hn),sn=Sn(Cn,hn,!0);if(kn in Wt&&sn in Lt&&Wt[kn]!==Lt[sn]){const Fn=ln(kn,sn,hn),Kn=Fi(kn,sn,li[Fn].geometry);delete Lt[kn],delete Wt[sn],Wt[Sn(Cn,li[Kn].geometry,!0)]=Kn,li[Fn].geometry=null}else kn in Wt?Fi(kn,sn,hn):sn in Lt?ln(kn,sn,hn):(Ni(Ui),Lt[kn]=si-1,Wt[sn]=si-1)}return li.filter(Ui=>Ui.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Xt,Lt)=>Xt.sortKey-Lt.sortKey)}update(t,s,u,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,u,_),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,u,_))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Km(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const u=this.lineVertexArray.length;if(void 0!==t.segment)for(const{x:_,y:S}of s)this.lineVertexArray.emplaceBack(_,S);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,s,u,_,S,O,F,H,q,se,ue,ge,ke,Ae){const Ue=t.indexArray,pt=t.layoutVertexArray,Rt=t.globeExtVertexArray,Xt=t.segments.prepareSegment(4*s.length,pt,Ue,this.canOverlap?O.sortKey:void 0),Lt=this.glyphOffsetArray.length,Wt=Xt.vertexLength,li=this.allowVerticalPlacement&&F===J.vertical?Math.PI/2:0,si=O.text&&O.text.sections;for(let Fi=0;Fi<s.length;Fi++){const{tl:ln,tr:Sn,bl:Ui,br:un,tex:hn,pixelOffsetTL:Cn,pixelOffsetBR:kn,minFontScaleX:sn,minFontScaleY:Fn,glyphOffset:Kn,isSDF:Bn,sectionIndex:Nr}=s[Fi],In=Xt.vertexLength,gr=Kn[1];if(Qf(pt,q.x,q.y,ln.x,gr+ln.y,hn.x,hn.y,u,Bn,Cn.x,Cn.y,sn,Fn),Qf(pt,q.x,q.y,Sn.x,gr+Sn.y,hn.x+hn.w,hn.y,u,Bn,kn.x,Cn.y,sn,Fn),Qf(pt,q.x,q.y,Ui.x,gr+Ui.y,hn.x,hn.y+hn.h,u,Bn,Cn.x,kn.y,sn,Fn),Qf(pt,q.x,q.y,un.x,gr+un.y,hn.x+hn.w,hn.y+hn.h,u,Bn,kn.x,kn.y,sn,Fn),H){const{x:Vr,y:ys,z:$r}=H.anchor,[Sr,so,Hr]=H.up;em(Rt,Vr,ys,$r,Sr,so,Hr),em(Rt,Vr,ys,$r,Sr,so,Hr),em(Rt,Vr,ys,$r,Sr,so,Hr),em(Rt,Vr,ys,$r,Sr,so,Hr),tm(t.dynamicLayoutVertexArray,Vr,ys,$r,li)}else tm(t.dynamicLayoutVertexArray,q.x,q.y,q.z,li);Ue.emplaceBack(In,In+1,In+2),Ue.emplaceBack(In+1,In+2,In+3),Xt.vertexLength+=4,Xt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Kn[0]),Fi!==s.length-1&&Nr===s[Fi+1].sectionIndex||t.programConfigurations.populatePaintArrays(pt.length,O,O.index,{},ke,Ae,si&&si[Nr])}const Ni=H?H.anchor:q;t.placedSymbolArray.emplaceBack(Ni.x,Ni.y,Ni.z,q.x,q.y,Lt,this.glyphOffsetArray.length-Lt,Wt,se,ue,q.segment,u?u[0]:0,u?u[1]:0,_[0],_[1],F,0,!1,0,ge,0)}_commitLayoutVertex(t,s,u,_,S,O,F){t.emplaceBack(s,u,_,S,O,Math.round(F.x),Math.round(F.y))}_addCollisionDebugVertices(t,s,u,_,S,O,F){const H=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),q=H.vertexLength,se=F.tileAnchorX,ue=F.tileAnchorY;for(let ke=0;ke<4;ke++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(s,-t.padding,-t.padding),u.collisionVertexArrayExt.emplaceBack(s,t.padding,-t.padding),u.collisionVertexArrayExt.emplaceBack(s,t.padding,t.padding),u.collisionVertexArrayExt.emplaceBack(s,-t.padding,t.padding),this._commitLayoutVertex(u.layoutVertexArray,_,S,O,se,ue,new rt(t.x1,t.y1)),this._commitLayoutVertex(u.layoutVertexArray,_,S,O,se,ue,new rt(t.x2,t.y1)),this._commitLayoutVertex(u.layoutVertexArray,_,S,O,se,ue,new rt(t.x2,t.y2)),this._commitLayoutVertex(u.layoutVertexArray,_,S,O,se,ue,new rt(t.x1,t.y2)),H.vertexLength+=4;const ge=u.indexArray;ge.emplaceBack(q,q+1),ge.emplaceBack(q+1,q+2),ge.emplaceBack(q+2,q+3),ge.emplaceBack(q+3,q),H.primitiveLength+=4}_addTextDebugCollisionBoxes(t,s,u,_,S,O){for(let F=_;F<S;F++){const H=u.get(F),q=this.getSymbolInstanceTextSize(t,O,s,F);this._addCollisionDebugVertices(H,q,this.textCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,O)}}_addIconDebugCollisionBoxes(t,s,u,_,S,O){for(let F=_;F<S;F++){const H=u.get(F),q=this.getSymbolInstanceIconSize(t,s,O.placedIconSymbolIndex);this._addCollisionDebugVertices(H,q,this.iconCollisionBox,H.projectedAnchorX,H.projectedAnchorY,H.projectedAnchorZ,O)}}generateCollisionDebugBuffers(t,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ym(jn,pf.members,Qr),this.iconCollisionBox=new ym(jn,pf.members,Qr);const u=M(this.iconSizeData,t),_=M(this.textSizeData,t);for(let S=0;S<this.symbolInstances.length;S++){const O=this.symbolInstances.get(S);this._addTextDebugCollisionBoxes(_,t,s,O.textBoxStartIndex,O.textBoxEndIndex,O),this._addTextDebugCollisionBoxes(_,t,s,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O),this._addIconDebugCollisionBoxes(u,t,s,O.iconBoxStartIndex,O.iconBoxEndIndex,O),this._addIconDebugCollisionBoxes(u,t,s,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O)}}getSymbolInstanceTextSize(t,s,u,_){const S=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:_),O=up(this.textSizeData,t,S)/Ta;return this.tilePixelRatio*O}getSymbolInstanceIconSize(t,s,u){const _=this.icon.placedSymbolArray.get(u),S=up(this.iconSizeData,t,_);return this.tilePixelRatio*S}_commitDebugCollisionVertexUpdate(t,s,u){t.emplaceBack(s,-u,-u),t.emplaceBack(s,u,-u),t.emplaceBack(s,u,u),t.emplaceBack(s,-u,u)}_updateTextDebugCollisionBoxes(t,s,u,_,S,O){for(let F=_;F<S;F++){const H=u.get(F),q=this.getSymbolInstanceTextSize(t,O,s,F);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,q,H.padding)}}_updateIconDebugCollisionBoxes(t,s,u,_,S,O){for(let F=_;F<S;F++){const H=u.get(F),q=this.getSymbolInstanceIconSize(t,s,O);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,q,H.padding)}}updateCollisionDebugBuffers(t,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=M(this.iconSizeData,t),_=M(this.textSizeData,t);for(let S=0;S<this.symbolInstances.length;S++){const O=this.symbolInstances.get(S);this._updateTextDebugCollisionBoxes(_,t,s,O.textBoxStartIndex,O.textBoxEndIndex,O),this._updateTextDebugCollisionBoxes(_,t,s,O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O),this._updateIconDebugCollisionBoxes(u,t,s,O.iconBoxStartIndex,O.iconBoxEndIndex,O.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,t,s,O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,s,u,_,S,O,F,H,q){const se={};if(s<u){const{x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt,featureIndex:li}=t.get(s);se.textBox={x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt},se.textFeatureIndex=li}if(_<S){const{x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt,featureIndex:li}=t.get(_);se.verticalTextBox={x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt},se.verticalTextFeatureIndex=li}if(O<F){const{x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt,featureIndex:li}=t.get(O);se.iconBox={x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt},se.iconFeatureIndex=li}if(H<q){const{x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt,featureIndex:li}=t.get(H);se.verticalIconBox={x1:ue,y1:ge,x2:ke,y2:Ae,padding:Ue,projectedAnchorX:pt,projectedAnchorY:Rt,projectedAnchorZ:Xt,tileAnchorX:Lt,tileAnchorY:Wt},se.verticalIconFeatureIndex=li}return se}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const u=t.placedSymbolArray.get(s),_=u.vertexStartIndex+4*u.numGlyphs;for(let S=u.vertexStartIndex;S<_;S+=4)t.indexArray.emplaceBack(S,S+1,S+2),t.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const s=Math.sin(t),u=Math.cos(t),_=[],S=[],O=[];for(let F=0;F<this.symbolInstances.length;++F){O.push(F);const H=this.symbolInstances.get(F);_.push(0|Math.round(s*H.tileAnchorX+u*H.tileAnchorY)),S.push(H.featureIndex)}return O.sort((F,H)=>_[F]-_[H]||S[H]-S[F]),O}addToSortKeyRanges(t,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:S,leftJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:F,placedIconSymbolIndex:H,verticalPlacedIconSymbolIndex:q}=u;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),S>=0&&S!==_&&this.addIndicesForPlacedSymbol(this.text,S),O>=0&&O!==S&&O!==_&&this.addIndicesForPlacedSymbol(this.text,O),F>=0&&this.addIndicesForPlacedSymbol(this.text,F),H>=0&&this.addIndicesForPlacedSymbol(this.icon,H),q>=0&&this.addIndicesForPlacedSymbol(this.icon,q)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Vn(mp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),mp.MAX_GLYPHS=65535,mp.addDynamicAttributes=tm;const Jg=new Bt({"symbol-placement":new Ge(R.layout_symbol["symbol-placement"]),"symbol-spacing":new Ge(R.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ge(R.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(R.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ge(R.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ge(R.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ge(R.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ge(R.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ge(R.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(R.layout_symbol["icon-size"]),"icon-text-fit":new Ge(R.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ge(R.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(R.layout_symbol["icon-image"]),"icon-rotate":new ft(R.layout_symbol["icon-rotate"]),"icon-padding":new Ge(R.layout_symbol["icon-padding"]),"icon-keep-upright":new Ge(R.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(R.layout_symbol["icon-offset"]),"icon-anchor":new ft(R.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ge(R.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ge(R.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ge(R.layout_symbol["text-rotation-alignment"]),"text-field":new ft(R.layout_symbol["text-field"]),"text-font":new ft(R.layout_symbol["text-font"]),"text-size":new ft(R.layout_symbol["text-size"]),"text-max-width":new ft(R.layout_symbol["text-max-width"]),"text-line-height":new ft(R.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(R.layout_symbol["text-letter-spacing"]),"text-justify":new ft(R.layout_symbol["text-justify"]),"text-radial-offset":new ft(R.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ge(R.layout_symbol["text-variable-anchor"]),"text-anchor":new ft(R.layout_symbol["text-anchor"]),"text-max-angle":new Ge(R.layout_symbol["text-max-angle"]),"text-writing-mode":new Ge(R.layout_symbol["text-writing-mode"]),"text-rotate":new ft(R.layout_symbol["text-rotate"]),"text-padding":new Ge(R.layout_symbol["text-padding"]),"text-keep-upright":new Ge(R.layout_symbol["text-keep-upright"]),"text-transform":new ft(R.layout_symbol["text-transform"]),"text-offset":new ft(R.layout_symbol["text-offset"]),"text-allow-overlap":new Ge(R.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ge(R.layout_symbol["text-ignore-placement"]),"text-optional":new Ge(R.layout_symbol["text-optional"])});var bm={paint:new Bt({"icon-opacity":new ft(R.paint_symbol["icon-opacity"]),"icon-color":new ft(R.paint_symbol["icon-color"]),"icon-halo-color":new ft(R.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(R.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(R.paint_symbol["icon-halo-blur"]),"icon-translate":new Ge(R.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ge(R.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(R.paint_symbol["text-opacity"]),"text-color":new ft(R.paint_symbol["text-color"],{runtimeType:re,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new ft(R.paint_symbol["text-halo-color"]),"text-halo-width":new ft(R.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(R.paint_symbol["text-halo-blur"]),"text-translate":new Ge(R.paint_symbol["text-translate"]),"text-translate-anchor":new Ge(R.paint_symbol["text-translate-anchor"])}),layout:Jg};class Jm{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:De,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vn(Jm,"FormatSectionOverride",{omit:["defaultValue"]});class im extends Bl{constructor(t){super(t,bm)}recalculate(t,s){super.recalculate(t,s),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const _=[];for(const S of u)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,s,u,_){const S=this.layout.get(t).evaluate(s,{},u,_),O=this._unevaluatedLayout._values[t];return O.isDataDriven()||oa(O.value)||!S?S:(F=s.properties,S.replace(/{([^{}]+)}/g,(q,se)=>se in F?String(F[se]):""));var F}createBucket(t){return new mp(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of bm.paint.overridableProperties){if(!im.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),u=new Jm(s),_=new Ol(u,s.property.specification);let S=null;S="constant"===s.value.kind||"source"===s.value.kind?new Va("source",_):new $a("composite",_,s.value.zoomStops,s.value._interpolationType),this.paint._values[t]=new xt(s.property,S,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&im.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const u=t.get("text-field"),_=bm.paint.properties[s];let S=!1;const O=F=>{for(const H of F)if(_.overrides&&_.overrides.hasOverride(H))return void(S=!0)};if("constant"===u.value.kind&&u.value.value instanceof ir)O(u.value.value.sections);else if("source"===u.value.kind){const F=q=>{S||(q instanceof oo&&nr(q.value)===Fe?O(q.value.sections):q instanceof bs?O(q.sections):q.eachChild(F))},H=u.value;H._styleExpression&&F(H._styleExpression.expression)}return S}getProgramConfiguration(t){return new Fc(this,t)}}var Qg={paint:new Bt({"background-color":new Ge(R.paint_background["background-color"]),"background-pattern":new Ge(R.paint_background["background-pattern"]),"background-opacity":new Ge(R.paint_background["background-opacity"])})},e_={paint:new Bt({"raster-opacity":new Ge(R.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ge(R.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ge(R.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ge(R.paint_raster["raster-brightness-max"]),"raster-saturation":new Ge(R.paint_raster["raster-saturation"]),"raster-contrast":new Ge(R.paint_raster["raster-contrast"]),"raster-resampling":new Ge(R.paint_raster["raster-resampling"]),"raster-fade-duration":new Ge(R.paint_raster["raster-fade-duration"])})};class t_ extends Bl{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var i_={paint:new Bt({"sky-type":new Ge(R.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ge(R.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ge(R.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ge(R.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ge(R.paint_sky["sky-gradient-radius"]),"sky-gradient":new Dt(R.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ge(R.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ge(R.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ge(R.paint_sky["sky-opacity"])})};function xm(n,t,s){const u=[0,0,1],_=yd([]);return Wu(_,_,s?-ti(n)+Math.PI:ti(n)),pu(_,_,-ti(t)),ju(u,u,_),ja(u,u)}const n_={circle:class extends Bl{constructor(n){super(n,Uh)}createBucket(n){return new Sd(n)}queryRadius(n){const t=n;return Hc("circle-radius",this,t)+Hc("circle-stroke-width",this,t)+Td(this.paint.get("circle-translate"))}queryIntersectsFeature(n,t,s,u,_,S,O,F){const H=Hh(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,n.pixelToTileUnitsFactor),q=this.paint.get("circle-radius").evaluate(t,s)+this.paint.get("circle-stroke-width").evaluate(t,s);return ah(n,u,S,O,F,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),H,q)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new Fc(this,n)}},heatmap:class extends Bl{createBucket(n){return new qh(n)}constructor(n){super(n,Ap),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"heatmap-color"===n&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Hc("heatmap-radius",this,n)}queryIntersectsFeature(n,t,s,u,_,S,O,F){const H=this.paint.get("heatmap-radius").evaluate(t,s);return ah(n,u,S,O,F,!0,!0,new rt(0,0),H)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new Fc(this,n)}},hillshade:class extends Bl{constructor(n){super(n,Dp)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Bl{constructor(n){super(n,jl)}getProgramIds(){const n=this.paint.get("fill-pattern"),t=n&&n.constantOr(1),s=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(n){return new Fc(this,n)}recalculate(n,t){super.recalculate(n,t);const s=this.paint._values["fill-outline-color"];"constant"===s.value.kind&&void 0===s.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Wc(n)}queryRadius(){return Td(this.paint.get("fill-translate"))}queryIntersectsFeature(n,t,s,u,_,S){return!n.queryGeometry.isAboveHorizon&&kd(oh(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,n.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Bl{constructor(n){super(n,Ef)}createBucket(n){return new vc(n)}queryRadius(){return Td(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new Fc(this,n)}queryIntersectsFeature(n,t,s,u,_,S,O,F,H){const q=Hh(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,n.pixelToTileUnitsFactor),se=this.paint.get("fill-extrusion-height").evaluate(t,s),ue=this.paint.get("fill-extrusion-base").evaluate(t,s),ge=[0,0],ke=F&&S.elevation,Ae=S.elevation?S.elevation.exaggeration():1,Ue=n.tile.getBucket(this);if(ke&&Ue instanceof vc){const Wt=Ue.centroidVertexArray,li=H+1;li<Wt.length&&(ge[0]=Wt.geta_centroid_pos0(li),ge[1]=Wt.geta_centroid_pos1(li))}if(0===ge[0]&&1===ge[1])return!1;"globe"===S.projection.name&&(u=of([u],[new rt(0,0),new rt(qn,qn)],n.tileID.canonical).map(Wt=>Wt.polygon).flat());const pt=ke?F:null,[Rt,Xt]=(li=u,si=ue,Ni=se,Fi=q,ln=O,Sn=pt,Ui=ge,un=Ae,hn=S.center.lat,"globe"===(Wt=S).projection.name?function(kn,sn,Fn,Kn,Bn,Nr,In,gr,Vr,ys,$r){const Sr=[],so=[],Hr=kn.projection.upVectorScale($r,kn.center.lat,kn.worldSize).metersToTile,jr=[0,0,0,1],$s=[0,0,0,1],Ks=(Hs,Mo,Xo,Ia)=>{Hs[0]=Mo,Hs[1]=Xo,Hs[2]=Ia,Hs[3]=1},Js=sf();Fn>0&&(Fn+=Js),Kn+=Js;for(const Hs of sn){const Mo=[],Xo=[];for(const Ia of Hs){const js=Ia.x+Bn.x,qa=Ia.y+Bn.y,Oa=kn.projection.projectTilePoint(js,qa,$r),Go=kn.projection.upVector($r,Ia.x,Ia.y);let Cs=Fn,Ma=Kn;if(In){const Qs=cf(js,qa,Fn,Kn,In,gr,Vr,ys);Cs+=Qs.base,Ma+=Qs.top}0!==Fn?Ks(jr,Oa.x+Go[0]*Hr*Cs,Oa.y+Go[1]*Hr*Cs,Oa.z+Go[2]*Hr*Cs):Ks(jr,Oa.x,Oa.y,Oa.z),Ks($s,Oa.x+Go[0]*Hr*Ma,Oa.y+Go[1]*Hr*Ma,Oa.z+Go[2]*Hr*Ma),Zs(jr,jr,Nr),Zs($s,$s,Nr),Mo.push(new Mu(jr[0],jr[1],jr[2])),Xo.push(new Mu($s[0],$s[1],$s[2]))}Sr.push(Mo),so.push(Xo)}return[Sr,so]}(Wt,li,si,Ni,Fi,ln,Sn,Ui,un,hn,n.tileID.canonical):Sn?function(kn,sn,Fn,Kn,Bn,Nr,In,gr,Vr){const ys=[],$r=[],Sr=[0,0,0,1];for(const so of kn){const Hr=[],jr=[];for(const $s of so){const Ks=$s.x+Kn.x,Js=$s.y+Kn.y,Hs=cf(Ks,Js,sn,Fn,Nr,In,gr,Vr);Sr[0]=Ks,Sr[1]=Js,Sr[2]=Hs.base,Sr[3]=1,rd(Sr,Sr,Bn),Sr[3]=Math.max(Sr[3],1e-5);const Mo=new Mu(Sr[0]/Sr[3],Sr[1]/Sr[3],Sr[2]/Sr[3]);Sr[0]=Ks,Sr[1]=Js,Sr[2]=Hs.top,Sr[3]=1,rd(Sr,Sr,Bn),Sr[3]=Math.max(Sr[3],1e-5);const Xo=new Mu(Sr[0]/Sr[3],Sr[1]/Sr[3],Sr[2]/Sr[3]);Hr.push(Mo),jr.push(Xo)}ys.push(Hr),$r.push(jr)}return[ys,$r]}(li,si,Ni,Fi,ln,Sn,Ui,un,hn):function(kn,sn,Fn,Kn,Bn){const Nr=[],In=[],gr=Bn[8]*sn,Vr=Bn[9]*sn,ys=Bn[10]*sn,$r=Bn[11]*sn,Sr=Bn[8]*Fn,so=Bn[9]*Fn,Hr=Bn[10]*Fn,jr=Bn[11]*Fn;for(const $s of kn){const Ks=[],Js=[];for(const Hs of $s){const Mo=Hs.x+Kn.x,Xo=Hs.y+Kn.y,Ia=Bn[0]*Mo+Bn[4]*Xo+Bn[12],js=Bn[1]*Mo+Bn[5]*Xo+Bn[13],qa=Bn[2]*Mo+Bn[6]*Xo+Bn[14],Oa=Bn[3]*Mo+Bn[7]*Xo+Bn[15],Go=Ia+gr,Cs=js+Vr,Ma=qa+ys,Qs=Math.max(Oa+$r,1e-5),xc=Ia+Sr,Aa=js+so,Ll=qa+Hr,El=Math.max(Oa+jr,1e-5);Ks.push(new Mu(Go/Qs,Cs/Qs,Ma/Qs)),Js.push(new Mu(xc/El,Aa/El,Ll/El))}Nr.push(Ks),In.push(Js)}return[Nr,In]}(li,si,Ni,Fi,ln)),Lt=n.queryGeometry;var Wt,li,si,Ni,Fi,ln,Sn,Ui,un,hn;return function(Wt,li,si){let Ni=1/0;kd(si,li)&&(Ni=lf(si,li[0]));for(let Fi=0;Fi<li.length;Fi++){const ln=li[Fi],Sn=Wt[Fi];for(let Ui=0;Ui<ln.length-1;Ui++){const un=ln[Ui],hn=[un,ln[Ui+1],Sn[Ui+1],Sn[Ui],un];Yo(si,hn)&&(Ni=Math.min(Ni,lf(si,hn)))}}return Ni!==1/0&&Ni}(Rt,Xt,Lt.isPointQuery()?Lt.screenBounds:Lt.screenGeometry)}},line:class extends Bl{constructor(n){super(n,df),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if("line-gradient"===n){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Jr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,t){super.recalculate(n,t),this.paint._values["line-floorwidth"]=uf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new dp(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new Fc(this,n)}queryRadius(n){const t=n,s=Vp(Hc("line-width",this,t),Hc("line-gap-width",this,t)),u=Hc("line-offset",this,t);return s/2+Math.abs(u)+Td(this.paint.get("line-translate"))}queryIntersectsFeature(n,t,s,u,_,S){if(n.queryGeometry.isAboveHorizon)return!1;const O=oh(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,n.pixelToTileUnitsFactor),F=n.pixelToTileUnitsFactor/2*Vp(this.paint.get("line-width").evaluate(t,s),this.paint.get("line-gap-width").evaluate(t,s)),H=this.paint.get("line-offset").evaluate(t,s);return H&&(u=function(q,se){const ue=[],ge=new rt(0,0);for(let ke=0;ke<q.length;ke++){const Ae=q[ke],Ue=[];for(let pt=0;pt<Ae.length;pt++){const Rt=Ae[pt],Xt=Ae[pt+1],Lt=0===pt?ge:Rt.sub(Ae[pt-1])._unit()._perp(),Wt=pt===Ae.length-1?ge:Xt.sub(Rt)._unit()._perp(),li=Lt._add(Wt)._unit();li._mult(1/(li.x*Wt.x+li.y*Wt.y)),Ue.push(li._mult(se)._add(Rt))}ue.push(Ue)}return ue}(u,H*n.pixelToTileUnitsFactor)),function(q,se,ue){for(let ge=0;ge<se.length;ge++){const ke=se[ge];if(q.length>=3)for(let Ae=0;Ae<ke.length;Ae++)if(ad(q,ke[Ae]))return!0;if(Mp(q,ke,ue))return!0}return!1}(O,u,F)}isTileClipped(){return!0}},symbol:im,background:class extends Bl{constructor(n){super(n,Qg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Bl{constructor(n){super(n,e_)}getProgramIds(){return["raster"]}},sky:class extends Bl{constructor(n){super(n,i_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){"sky-gradient"===n?this._updateColorRamp():"sky-atmosphere-sun"!==n&&"sky-atmosphere-halo-color"!==n&&"sky-atmosphere-color"!==n&&"sky-atmosphere-sun-intensity"!==n||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=hh({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(n,t){if("atmosphere"===this.paint.get("sky-type")){const u=this.paint.get("sky-atmosphere-sun"),_=!u,S=n.style.light,O=S.properties.get("position");return _&&"viewport"===S.properties.get("anchor")&&Bi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?xm(O.azimuthal,90-O.polar,t):xm(u[0],90-u[1],t)}const s=this.paint.get("sky-gradient-center");return xm(s[0],90-s[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return"atmosphere"===n?["skyboxCapture","skybox"]:"gradient"===n?["skyboxGradient"]:null}}};class Bf{constructor(t,s,u,_){this.context=t,this.format=u,this.texture=t.gl.createTexture(),this.update(s,_)}update(t,s,u){const{width:_,height:S}=t,{context:O}=this,{gl:F}=O,{HTMLImageElement:H,HTMLCanvasElement:q,HTMLVideoElement:se,ImageData:ue,ImageBitmap:ge}=Z;if(F.bindTexture(F.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!s||!1!==s.premultiply)),u||this.size&&this.size[0]===_&&this.size[1]===S){const{x:ke,y:Ae}=u||{x:0,y:0};t instanceof H||t instanceof q||t instanceof se||t instanceof ue||ge&&t instanceof ge?F.texSubImage2D(F.TEXTURE_2D,0,ke,Ae,F.RGBA,F.UNSIGNED_BYTE,t):F.texSubImage2D(F.TEXTURE_2D,0,ke,Ae,_,S,F.RGBA,F.UNSIGNED_BYTE,t.data)}else this.size=[_,S],t instanceof H||t instanceof q||t instanceof se||t instanceof ue||ge&&t instanceof ge?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,t):F.texImage2D(F.TEXTURE_2D,0,this.format,_,S,0,this.format,F.UNSIGNED_BYTE,t.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&F.generateMipmap(F.TEXTURE_2D)}bind(t,s){const{context:u}=this,{gl:_}=u;_.bindTexture(_.TEXTURE_2D,this.texture),t!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,t),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?t===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_NEAREST:t),this.filter=t),s!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class r_{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class s_{constructor(){this.tasks={},this.taskQueue=[],Gn(["process"],this),this.invoker=new r_(this.process),this.nextId=0}add(t,s){const u=this.nextId++,_=function({type:S,isSymbolTile:O,zoom:F}){return F=F||0,"message"===S?0:"maybePrepare"!==S||O?"parseTile"!==S||O?"parseTile"===S&&O?300-F:"maybePrepare"===S&&O?400-F:500:200-F:100-F}(s);if(0===_){Xi();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:t,metadata:s,priority:_,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Xi();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const s=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let t=null,s=1/0;for(let _=0;_<this.taskQueue.length;_++){const S=this.tasks[this.taskQueue[_]];S.priority<s&&(s=S.priority,t=_)}if(null===t)return null;const u=this.taskQueue[t];return this.taskQueue.splice(t,1),u}remove(){this.invoker.remove()}}class Qm{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const u=t[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const o_=["tile","layer","source","sourceLayer","state"];class eg{constructor(t,s,u,_,S){this.type="Feature",this._vectorTileFeature=t,this._z=s,this._x=u,this._y=_,this.properties=t.properties,this.id=S}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(t.id=this.id);for(const s of o_)void 0!==this[s]&&(t[s]=this[s]);return t}}const gp=new Uint16Array(8184);for(let n=0;n<2046;n++){let t=n+2,s=0,u=0,_=0,S=0,O=0,F=0;for(1&t?_=S=O=32:s=u=F=32;(t>>=1)>1;){const q=s+_>>1,se=u+S>>1;1&t?(_=s,S=u,s=O,u=F):(s=_,u=S,_=O,S=F),O=q,F=se}const H=4*n;gp[H+0]=s,gp[H+1]=u,gp[H+2]=_,gp[H+3]=S}const Ru=new Uint16Array(2178),_p=new Uint8Array(1089),nm=new Uint16Array(1089);function tg(n){return 0===n?-.03125:32===n?.03125:0}var ig=fi([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const ng={type:2,extent:qn,loadGeometry:()=>[[new rt(0,0),new rt(qn+1,0),new rt(qn+1,qn+1),new rt(0,qn+1),new rt(0,0)]]};class wm{constructor(t,s,u,_,S){this.tileID=t,this.uid=di(),this.uses=0,this.tileSize=s,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,this.expiredRequestCount=0,this.state="loading",_&&_.transform&&(this.projection=_.transform.projection)}registerFadeDuration(t){const s=t+this.timeAdded;s<r.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=qp(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,s,u){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(_,S){const O={};if(!S)return O;for(const F of _){const H=F.layerIds.map(q=>S.getLayer(q)).filter(Boolean);if(0!==H.length){F.layers=H,F.stateDependentLayerIds&&(F.stateDependentLayers=F.stateDependentLayerIds.map(q=>H.filter(se=>se.id===q)[0]));for(const q of H)O[q.id]=F}}return O}(t.buckets,s.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof mp){if(this.hasSymbolBuckets=!0,!u)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const S=this.buckets[_];if(S instanceof mp&&S.hasRTLText){this.hasRTLText=!0,ie.isLoading()||ie.isLoaded()||"deferred"!==B()||K();break}}this.queryPadding=0;for(const _ in this.buckets){const S=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(_).queryRadius(S))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new es}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const u in this.buckets){const _=this.buckets[u];_.uploadPending()&&_.upload(t)}const s=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Bf(t,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Bf(t,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Bf(t,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,s,u,_,S,O,F,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:_,pixelPosMatrix:F,transform:O,params:S,tileTransform:this.tileTransform},t,s,u):{}}querySourceFeatures(t,s){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const _=u.loadVTLayers(),S=s?s.sourceLayer:"",O=_._geojsonTileLayer||_[S];if(!O)return;const F=Vi(s&&s.filter),{z:H,x:q,y:se}=this.tileID.canonical,ue={z:H,x:q,y:se};for(let ge=0;ge<O.length;ge++){const ke=O.feature(ge);if(F.needGeometry){const pt=Ua(ke,!0);if(!F.filter(new le(this.tileID.overscaledZ),pt,this.tileID.canonical))continue}else if(!F.filter(new le(this.tileID.overscaledZ),ke))continue;const Ae=u.getId(ke,S),Ue=new eg(ke,H,q,se,Ae);Ue.tile=ue,t.push(Ue)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const s=this.expirationTime;if(t.cacheControl){const u=Qi(t.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const u=Date.now();let _=!1;if(this.expirationTime>u)_=!1;else if(s)if(this.expirationTime<s)_=!0;else{const S=this.expirationTime-s;S?this.expirationTime=u+Math.max(S,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!s)return;const u=this.latestFeatureIndex.loadVTLayers(),_=s.style.listImages();for(const S in this.buckets){if(!s.style.hasLayer(S))continue;const O=this.buckets[S],F=O.layers[0].sourceLayer||"_geojsonTileLayer",H=u[F],q=t[F];if(!H||!q||0===Object.keys(q).length)continue;if(O.update(q,H,_,this.imageAtlas&&this.imageAtlas.patternPositions||{}),O instanceof dp||O instanceof Wc){const ue=s.style._getSourceCache(O.layers[0].source);s._terrain&&s._terrain.enabled&&ue&&O.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(ue.id,this.tileID)}const se=s&&s.style&&s.style.getLayer(S);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(O)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=r.now()+t}setTexture(t,s){const u=s.context,_=u.gl;this.texture=this.texture||s.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new Bf(u,t,_.RGBA,{useMipmap:!0}),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE))}setDependencies(t,s){const u={};for(const _ of s)u[_]=!0;this.dependencies[t]=u}hasDependency(t,s){for(const u of t){const _=this.dependencies[u];if(_)for(const S of s)if(_[S])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,s){if(!s||"mercator"===s.name||this._tileDebugBuffer)return;const u=ka(ng,this.tileID.canonical,this.tileTransform)[0],_=new yn,S=new wa;for(let O=0;O<u.length;O++){const{x:F,y:H}=u[O];_.emplaceBack(F,H),S.emplaceBack(O)}S.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(S),this._tileDebugBuffer=t.createVertexBuffer(_,Dl.members),this._tileDebugSegments=io.simpleSegment(0,0,_.length,S.length)}_makeTileBoundsBuffers(t,s){if(this._tileBoundsBuffer||!s||"mercator"===s.name)return;const u=ka(ng,this.tileID.canonical,this.tileTransform)[0];let _,S;if(this.isRaster){const O=function(F,H){const q=qp(F,H),se=Math.pow(2,F.z);for(let pt=0;pt<33;pt++)for(let Rt=0;Rt<33;Rt++){const Xt=Rl((F.x+(Rt+tg(Rt))/32)/se),Lt=Ps((F.y+(pt+tg(pt))/32)/se),Wt=H.project(Xt,Lt),li=33*pt+Rt;Ru[2*li+0]=Math.round((Wt.x*q.scale-q.x)*qn),Ru[2*li+1]=Math.round((Wt.y*q.scale-q.y)*qn)}_p.fill(0),nm.fill(0);for(let pt=2045;pt>=0;pt--){const Rt=4*pt,Xt=gp[Rt+0],Lt=gp[Rt+1],Wt=gp[Rt+2],li=gp[Rt+3],si=Xt+Wt>>1,Ni=Lt+li>>1,Fi=si+Ni-Lt,ln=Ni+Xt-si,Sn=33*Lt+Xt,Ui=33*li+Wt,un=33*Ni+si,hn=Math.hypot((Ru[2*Sn+0]+Ru[2*Ui+0])/2-Ru[2*un+0],(Ru[2*Sn+1]+Ru[2*Ui+1])/2-Ru[2*un+1])>=16;_p[un]=_p[un]||(hn?1:0),pt<1022&&(_p[un]=_p[un]||_p[33*(Lt+ln>>1)+(Xt+Fi>>1)]||_p[33*(li+ln>>1)+(Wt+Fi>>1)])}const ue=new rn,ge=new tr;let ke=0;function Ae(pt,Rt){const Xt=33*Rt+pt;return 0===nm[Xt]&&(ue.emplaceBack(Ru[2*Xt+0],Ru[2*Xt+1],pt*qn/32,Rt*qn/32),nm[Xt]=++ke),nm[Xt]-1}function Ue(pt,Rt,Xt,Lt,Wt,li){const si=pt+Xt>>1,Ni=Rt+Lt>>1;if(Math.abs(pt-Wt)+Math.abs(Rt-li)>1&&_p[33*Ni+si])Ue(Wt,li,pt,Rt,si,Ni),Ue(Xt,Lt,Wt,li,si,Ni);else{const Fi=Ae(pt,Rt),ln=Ae(Xt,Lt),Sn=Ae(Wt,li);ge.emplaceBack(Fi,ln,Sn)}}return Ue(0,0,32,32,32,0),Ue(32,32,0,0,0,32),{vertices:ue,indices:ge}}(this.tileID.canonical,s);_=O.vertices,S=O.indices}else{_=new rn,S=new tr;for(const{x:F,y:H}of u)_.emplaceBack(F,H,0,0);const O=Ac(_.int16,void 0,4);for(let F=0;F<O.length;F+=3)S.emplaceBack(O[F],O[F+1],O[F+2])}this._tileBoundsBuffer=t.createVertexBuffer(_,ig.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(S),this._tileBoundsSegments=io.simpleSegment(0,0,_.length,S.length)}_makeGlobeTileDebugBuffers(t,s){const u=s.projection;if(!u||"globe"!==u.name||s.freezeTileCoverage)return;const _=this.tileID.canonical,S=Wd(Ku(_,s)),O=wd(s.zoom);let F;O>0&&(F=Ah(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,_,s,S,F,O),this._makeGlobeTileDebugTextBuffer(t,_,s,S,F,O)}_globePoint(t,s,u,_,S,O,F){let H=Vl(t,s,u);if(O){const q=1<<u.z,se=ic(_.center.lng),ue=_c(_.center.lat),ge=(u.x+.5)/q-se;let ke=0;ge>.5?ke=-1:ge<-.5&&(ke=1);let Ae=(t/qn+u.x)/q+ke,Ue=(s/qn+u.y)/q;Ae=(Ae-se)*_._pixelsPerMercatorPixel+se,Ue=(Ue-ue)*_._pixelsPerMercatorPixel+ue;const pt=[Ae*_.worldSize,Ue*_.worldSize,0];Zs(pt,pt,O),H=$c(H,pt,F)}return Zs(H,H,S)}_makeGlobeTileDebugBorderBuffer(t,s,u,_,S,O){const F=new yn,H=new wa,q=new Oi,se=(ge,ke,Ae,Ue,pt)=>{const Rt=(Ae-ge)/(pt-1),Xt=(Ue-ke)/(pt-1),Lt=F.length;for(let Wt=0;Wt<pt;Wt++){const li=ge+Wt*Rt,si=ke+Wt*Xt;F.emplaceBack(li,si);const Ni=this._globePoint(li,si,s,u,_,S,O);q.emplaceBack(Ni[0],Ni[1],Ni[2]),H.emplaceBack(Lt+Wt)}},ue=qn;se(0,0,ue,0,16),se(ue,0,ue,ue,16),se(ue,ue,0,ue,16),se(0,ue,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(H),this._tileDebugBuffer=t.createVertexBuffer(F,Dl.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(q,zh.members),this._tileDebugSegments=io.simpleSegment(0,0,F.length,H.length)}_makeGlobeTileDebugTextBuffer(t,s,u,_,S,O){const F=qn/4,H=new yn,q=new tr,se=new Oi;q.reserve(32),H.reserve(25),se.reserve(25);const ge=(ke,Ae)=>25*ke+Ae;for(let ke=0;ke<25;ke++){const Ae=ke*F;for(let Ue=0;Ue<25;Ue++){const pt=Ue*F;H.emplaceBack(pt,Ae);const Rt=this._globePoint(pt,Ae,s,u,_,S,O);se.emplaceBack(Rt[0],Rt[1],Rt[2])}}for(let ke=0;ke<4;ke++)for(let Ae=0;Ae<4;Ae++){const Ue=ge(ke,Ae),pt=ge(ke,Ae+1),Rt=ge(ke+1,Ae),Xt=ge(ke+1,Ae+1);q.emplaceBack(Ue,pt,Rt),q.emplaceBack(Rt,pt,Xt)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(q),this._tileDebugTextBuffer=t.createVertexBuffer(H,Dl.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(se,zh.members),this._tileDebugTextSegments=io.simpleSegment(0,0,25,32)}}class a_{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,s,u){const _=String(s);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][_]=this.stateChanges[t][_]||{},gn(this.stateChanges[t][_],u),null===this.deletedStates[t]){this.deletedStates[t]={};for(const S in this.state[t])S!==_&&(this.deletedStates[t][S]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][_]){this.deletedStates[t][_]={};for(const S in this.state[t][_])u[S]||(this.deletedStates[t][_][S]=null)}else for(const S in u)this.deletedStates[t]&&this.deletedStates[t][_]&&null===this.deletedStates[t][_][S]&&delete this.deletedStates[t][_][S]}removeFeatureState(t,s,u){if(null===this.deletedStates[t])return;const _=String(s);if(this.deletedStates[t]=this.deletedStates[t]||{},u&&void 0!==s)null!==this.deletedStates[t][_]&&(this.deletedStates[t][_]=this.deletedStates[t][_]||{},this.deletedStates[t][_][u]=null);else if(void 0!==s)if(this.stateChanges[t]&&this.stateChanges[t][_])for(u in this.deletedStates[t][_]={},this.stateChanges[t][_])this.deletedStates[t][_][u]=null;else this.deletedStates[t][_]=null;else this.deletedStates[t]=null}getState(t,s){const u=String(s),_=gn({},(this.state[t]||{})[u],(this.stateChanges[t]||{})[u]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const S=this.deletedStates[t][s];if(null===S)return{};for(const O in S)delete _[O]}return _}initializeTileState(t,s){t.setFeatureState(this.state,s)}coalesceChanges(t,s){const u={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const S={};for(const O in this.stateChanges[_])this.state[_][O]||(this.state[_][O]={}),gn(this.state[_][O],this.stateChanges[_][O]),S[O]=this.state[_][O];u[_]=S}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const S={};if(null===this.deletedStates[_])for(const O in this.state[_])S[O]={},this.state[_][O]={};else for(const O in this.deletedStates[_]){if(null===this.deletedStates[_][O])this.state[_][O]={};else if(this.state[_][O])for(const F of Object.keys(this.deletedStates[_][O]))delete this.state[_][O][F];S[O]=this.state[_][O]}u[_]=u[_]||{},gn(u[_],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(u).length)for(const _ in t)t[_].setFeatureState(u,s)}}class rg{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,s){const u=this.toIdx(t,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(t,s){return this.leaves[this.toIdx(t,s)]}toIdx(t,s){return s*this.size+t}}function sg(n,t,s,u){let _=0,S=Number.MAX_VALUE;for(let O=0;O<3;O++)if(Math.abs(u[O])<1e-15){if(s[O]<n[O]||s[O]>t[O])return null}else{const F=1/u[O];let H=(n[O]-s[O])*F,q=(t[O]-s[O])*F;if(H>q){const se=H;H=q,q=se}if(H>_&&(_=H),q<S&&(S=q),_>S)return null}return _}function og(n,t,s,u,_,S,O,F,H,q,se){const ue=u-n,ge=_-t,ke=S-s,Ae=O-n,Ue=F-t,pt=H-s,Rt=se[1]*pt-se[2]*Ue,Xt=se[2]*Ae-se[0]*pt,Lt=se[0]*Ue-se[1]*Ae,Wt=ue*Rt+ge*Xt+ke*Lt;if(Math.abs(Wt)<1e-15)return null;const li=1/Wt,si=q[0]-n,Ni=q[1]-t,Fi=q[2]-s,ln=(si*Rt+Ni*Xt+Fi*Lt)*li;if(ln<0||ln>1)return null;const Sn=Ni*ke-Fi*ge,Ui=Fi*ue-si*ke,un=si*ge-Ni*ue,hn=(se[0]*Sn+se[1]*Ui+se[2]*un)*li;return hn<0||ln+hn>1?null:(Ae*Sn+Ue*Ui+pt*un)*li}function ag(n,t,s){return(n-t)/(s-t)}function lg(n,t,s,u,_,S,O,F,H){const q=1<<s,se=S-u,ue=O-_,ge=(n+1)/q*se+u,ke=(t+0)/q*ue+_,Ae=(t+1)/q*ue+_;F[0]=(n+0)/q*se+u,F[1]=ke,H[0]=ge,H[1]=Ae}class cg{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(S){const O=Math.ceil(Math.log2(S.dim/8)),F=[];let H=Math.ceil(Math.pow(2,O));const q=1/H,se=(ke,Ae,Ue,pt,Rt)=>{const Xt=pt?1:0,Lt=(ke+1)*Ue-Xt,Wt=Ae*Ue,li=(Ae+1)*Ue-Xt;Rt[0]=ke*Ue,Rt[1]=Wt,Rt[2]=Lt,Rt[3]=li};let ue=new rg(H);const ge=[];for(let ke=0;ke<H*H;ke++){se(ke%H,Math.floor(ke/H),q,!1,ge);const Ae=vp(ge[0],ge[1],S),Ue=vp(ge[2],ge[1],S),pt=vp(ge[2],ge[3],S),Rt=vp(ge[0],ge[3],S);ue.minimums.push(Math.min(Ae,Ue,pt,Rt)),ue.maximums.push(Math.max(Ae,Ue,pt,Rt)),ue.leaves.push(1)}for(F.push(ue),H/=2;H>=1;H/=2){const ke=F[F.length-1];ue=new rg(H);for(let Ae=0;Ae<H*H;Ae++){se(Ae%H,Math.floor(Ae/H),2,!0,ge);const Ue=ke.getElevation(ge[0],ge[1]),pt=ke.getElevation(ge[2],ge[1]),Rt=ke.getElevation(ge[2],ge[3]),Xt=ke.getElevation(ge[0],ge[3]),Lt=ke.isLeaf(ge[0],ge[1]),Wt=ke.isLeaf(ge[2],ge[1]),li=ke.isLeaf(ge[2],ge[3]),si=ke.isLeaf(ge[0],ge[3]),Ni=Math.min(Ue.min,pt.min,Rt.min,Xt.min),Fi=Math.max(Ue.max,pt.max,Rt.max,Xt.max),ln=Lt&&Wt&&li&&si;ue.maximums.push(Fi),ue.minimums.push(Ni),ue.leaves.push(Fi-Ni<=5&&ln?1:0)}F.push(ue)}return F}(this.dem),u=s.length-1,_=s[u];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(t,s,u,_,S,O,F=1){return sg([t,s,-100],[u,_,this.maximums[0]*F],S,O)}raycast(t,s,u,_,S,O,F=1){if(!this.nodeCount)return null;const H=this.raycastRoot(t,s,u,_,S,O,F);if(null==H)return null;const q=[],se=[],ue=[],ge=[],ke=[{idx:0,t:H,nodex:0,nodey:0,depth:0}];for(;ke.length>0;){const{idx:Ae,t:Ue,nodex:pt,nodey:Rt,depth:Xt}=ke.pop();if(this.leaves[Ae]){lg(pt,Rt,Xt,t,s,u,_,ue,ge);const Wt=1<<Xt,li=(pt+0)/Wt,si=(pt+1)/Wt,Ni=(Rt+0)/Wt,Fi=(Rt+1)/Wt,ln=vp(li,Ni,this.dem)*F,Sn=vp(si,Ni,this.dem)*F,Ui=vp(si,Fi,this.dem)*F,un=vp(li,Fi,this.dem)*F,hn=og(ue[0],ue[1],ln,ge[0],ue[1],Sn,ge[0],ge[1],Ui,S,O),Cn=og(ge[0],ge[1],Ui,ue[0],ge[1],un,ue[0],ue[1],ln,S,O),kn=Math.min(null!==hn?hn:Number.MAX_VALUE,null!==Cn?Cn:Number.MAX_VALUE);if(kn!==Number.MAX_VALUE)return kn;{const sn=Vc([],S,O,Ue);if(dg(ln,Sn,un,Ui,ag(sn[0],ue[0],ge[0]),ag(sn[1],ue[1],ge[1]))>=sn[2])return Ue}continue}let Lt=0;for(let Wt=0;Wt<this._siblingOffset.length;Wt++){lg((pt<<1)+this._siblingOffset[Wt][0],(Rt<<1)+this._siblingOffset[Wt][1],Xt+1,t,s,u,_,ue,ge),ue[2]=-100,ge[2]=this.maximums[this.childOffsets[Ae]+Wt]*F;const li=sg(ue,ge,S,O);if(null!=li){const si=li;q[Wt]=si;let Ni=!1;for(let Fi=0;Fi<Lt&&!Ni;Fi++)si>=q[se[Fi]]&&(se.splice(Fi,0,Wt),Ni=!0);Ni||(se[Lt]=Wt),Lt++}}for(let Wt=0;Wt<Lt;Wt++){const li=se[Wt];ke.push({idx:this.childOffsets[Ae]+li,t:q[li],nodex:(pt<<1)+this._siblingOffset[li][0],nodey:(Rt<<1)+this._siblingOffset[li][1],depth:Xt+1})}}return null}_addNode(t,s,u){return this.minimums.push(t),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(t,s,u,_,S){if(1===t[_].isLeaf(s,u))return;this.childOffsets[S]||(this.childOffsets[S]=this.nodeCount);const O=_-1,F=t[O];let H=0,q=0;for(let se=0;se<this._siblingOffset.length;se++){const ue=2*s+this._siblingOffset[se][0],ge=2*u+this._siblingOffset[se][1],ke=F.getElevation(ue,ge),Ae=F.isLeaf(ue,ge),Ue=this._addNode(ke.min,ke.max,Ae);Ae&&(H|=1<<se),q||(q=Ue)}for(let se=0;se<this._siblingOffset.length;se++)H&1<<se||this._construct(t,2*s+this._siblingOffset[se][0],2*u+this._siblingOffset[se][1],O,q+se)}}function dg(n,t,s,u,_,S){return Cr(Cr(n,s,S),Cr(t,u,S),_)}function vp(n,t,s){const u=s.dim,_=Ii(n*u-.5,0,u-1),S=Ii(t*u-.5,0,u-1),O=Math.floor(_),F=Math.floor(S),H=Math.min(O+1,u-1),q=Math.min(F+1,u-1);return dg(s.get(O,F),s.get(H,F),s.get(O,q),s.get(H,q),_-O,S-F)}const ug={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function l_(n,t,s){return(256*n*256+256*t+s)/10-1e4}function c_(n,t,s){return 256*n+t+s/256-32768}class rm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,s,u,_=!1,S=!1){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&"mapbox"!==u&&"terrarium"!==u)return Bi(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const O=this.dim=s.height-2,F=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=u||"mapbox",this.borderReady=_,!_){for(let H=0;H<O;H++)F[this._idx(-1,H)]=F[this._idx(0,H)],F[this._idx(O,H)]=F[this._idx(O-1,H)],F[this._idx(H,-1)]=F[this._idx(H,0)],F[this._idx(H,O)]=F[this._idx(H,O-1)];F[this._idx(-1,-1)]=F[this._idx(0,0)],F[this._idx(O,-1)]=F[this._idx(O-1,0)],F[this._idx(-1,O)]=F[this._idx(0,O-1)],F[this._idx(O,O)]=F[this._idx(O-1,O-1)],S&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new cg(this)}get(t,s,u=!1){u&&(t=Ii(t,-1,this.dim),s=Ii(s,-1,this.dim));const _=4*this._idx(t,s);return("terrarium"===this.encoding?c_:l_)(this.pixels[_],this.pixels[_+1],this.pixels[_+2])}static getUnpackVector(t){return ug[t]}get unpackVector(){return ug[this.encoding]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}static pack(t,s){const u=[0,0,0,0],_=rm.getUnpackVector(s);let S=Math.floor((t+_[3])/_[2]);return u[2]=S%256,S=Math.floor(S/256),u[1]=S%256,S=Math.floor(S/256),u[0]=S,u}getPixels(){return new ll({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,s,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let _=s*this.dim,S=s*this.dim+this.dim,O=u*this.dim,F=u*this.dim+this.dim;switch(s){case-1:_=S-1;break;case 1:S=_+1}switch(u){case-1:O=F-1;break;case 1:F=O+1}const H=-s*this.dim,q=-u*this.dim;for(let se=O;se<F;se++)for(let ue=_;ue<S;ue++){const ge=4*this._idx(ue,se),ke=4*this._idx(ue+H,se+q);this.pixels[ge+0]=t.pixels[ke+0],this.pixels[ge+1]=t.pixels[ke+1],this.pixels[ge+2]=t.pixels[ke+2],this.pixels[ge+3]=t.pixels[ke+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Vn(rm,"DEMData"),Vn(cg,"DemMinMaxQuadTree",{omit:["dem"]});class d_{constructor(t,s){this.max=t,this.onRemove=s,this.reset()}reset(){for(const t in this.data)for(const s of this.data[t])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(t,s,u){const _=t.wrapped().key;void 0===this.data[_]&&(this.data[_]=[]);const S={value:s,timeout:void 0};if(void 0!==u&&(S.timeout=setTimeout(()=>{this.remove(t,S)},u)),this.data[_].push(S),this.order.push(_),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const s=this.data[t].shift();return s.timeout&&clearTimeout(s.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),s.value}getByKey(t){const s=this.data[t];return s?s[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,s){if(!this.has(t))return this;const u=t.wrapped().key,_=void 0===s?0:this.data[u].indexOf(s),S=this.data[u][_];return this.data[u].splice(_,1),S.timeout&&clearTimeout(S.timeout),0===this.data[u].length&&delete this.data[u],this.onRemove(S.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(t){const s=[];for(const u in this.data)for(const _ of this.data[u])t(_.value)||s.push(_);for(const u of s)this.remove(u.value.tileID,u)}}class xf{constructor(t,s,u){this.func=t,this.mask=s,this.range=u}}xf.ReadOnly=!1,xf.ReadWrite=!0,xf.disabled=new xf(519,xf.ReadOnly,[0,1]);class Em{constructor(t,s,u,_,S,O){this.test=t,this.ref=s,this.mask=u,this.fail=_,this.depthFail=S,this.pass=O}}Em.disabled=new Em({func:519,mask:0},0,0,7680,7680,7680);class Lu{constructor(t,s,u){this.blendFunction=t,this.blendColor=s,this.mask=u}}Lu.Replace=[1,0],Lu.disabled=new Lu(Lu.Replace,Or.transparent,[!1,!1,!1,!1]),Lu.unblended=new Lu(Lu.Replace,Or.transparent,[!0,!0,!0,!0]),Lu.alphaBlended=new Lu([1,771],Or.transparent,[!0,!0,!0,!0]);class au{constructor(t,s,u){this.enable=t,this.mode=s,this.frontFace=u}}au.disabled=new au(!1,1029,2305),au.backCCW=new au(!0,1029,2305),au.backCW=new au(!0,1029,2304),au.frontCW=new au(!0,1028,2304),au.frontCCW=new au(!0,1028,2305);class Xp extends I{constructor(t,s,u){super(),this.id=t,this._onlySymbols=u,s.on("data",_=>{"source"===_.dataType&&"metadata"===_.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===_.dataType&&"content"===_.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new d_(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new a_,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(t){this.map=t,this._minTileCacheSize=void 0===this._minTileCacheSize&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const s=this._tiles[t];if("loaded"!==s.state&&"errored"!==s.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,s){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,s)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const u=this._tiles[s];u.upload(t),u.prepare(this.map.style.imageManager)}}getIds(){return ji(this._tiles).map(t=>t.tileID).sort(hg).map(t=>t.key)}getRenderableIds(t){const s=[];for(const u in this._tiles)this._isIdRenderable(+u,t)&&s.push(this._tiles[u]);return t?s.sort((u,_)=>{const S=u.tileID,O=_.tileID,F=new rt(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),H=new rt(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-O.overscaledZ||H.y-F.y||H.x-F.x}).map(u=>u.tileID.key):s.map(u=>u.tileID).sort(hg).map(u=>u.key)}hasRenderableParent(t){const s=this.findLoadedParent(t,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(t,s){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(s||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,s){const u=this._tiles[t];u&&("loading"!==u.state&&(u.state=s),this._loadTile(u,this._tileLoaded.bind(this,u,t,s)))}_tileLoaded(t,s,u,_){if(_)if(t.state="errored",404!==_.status)this._source.fire(new w(_,{tile:t}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=r.now(),"expired"===u&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(s,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new x("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const s=this.getRenderableIds();for(let _=0;_<s.length;_++){const S=s[_];if(t.neighboringTiles&&t.neighboringTiles[S]){const O=this.getTileByID(S);u(t,O),u(O,t)}}function u(_,S){if(!_.dem||_.dem.borderReady)return;_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0;let O=S.tileID.canonical.x-_.tileID.canonical.x;const F=S.tileID.canonical.y-_.tileID.canonical.y,H=Math.pow(2,_.tileID.canonical.z),q=S.tileID.key;0===O&&0===F||Math.abs(F)>1||(Math.abs(O)>1&&(1===Math.abs(O+H)?O+=H:1===Math.abs(O-H)&&(O-=H)),S.dem&&_.dem&&(_.dem.backfillBorder(S.dem,O,F),_.neighboringTiles&&_.neighboringTiles[q]&&(_.neighboringTiles[q].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,s,u,_){for(const S in this._tiles){let O=this._tiles[S];if(_[S]||!O.hasData()||O.tileID.overscaledZ<=s||O.tileID.overscaledZ>u)continue;let F=O.tileID;for(;O&&O.tileID.overscaledZ>s+1;){const q=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[q.key],O&&O.hasData()&&(F=q)}let H=F;for(;H.overscaledZ>s;)if(H=H.scaledTo(H.overscaledZ-1),t[H.key]){_[F.key]=F;break}}}findLoadedParent(t,s){if(t.key in this._loadedParentTiles){const u=this._loadedParentTiles[t.key];return u&&u.tileID.overscaledZ>=s?u:null}for(let u=t.overscaledZ-1;u>=s;u--){const _=t.scaledTo(u),S=this._getLoadedTile(_);if(S)return S}}_getLoadedTile(t){const s=this._tiles[t.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,s){s=s||this._source.tileSize;const u=Math.ceil(t.width/s)+1,_=Math.ceil(t.height/s)+1,S=Math.floor(u*_*5),O="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,S):S,F="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,O):O;this._cache.setMaxSize(F)}handleWrapJump(t){const s=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,s){const u={};for(const _ in this._tiles){const S=this._tiles[_];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+s),u[S.tileID.key]=S}this._tiles=u;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(+_,this._tiles[_])}}update(t,s,u){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let _;this.updateCacheSize(t,s),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new wl(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(_=t.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(_=_.filter(F=>this._source.hasTile(F)))):_=[];const S=this._updateRetainedTiles(_);if(pg(this._source.type)&&0!==_.length){const F={},H={},q=Object.keys(S);for(const ue of q){const ge=S[ue],ke=this._tiles[ue];if(!ke||ke.fadeEndTime&&ke.fadeEndTime<=r.now())continue;const Ae=this.findLoadedParent(ge,Math.max(ge.overscaledZ-Xp.maxOverzooming,this._source.minzoom));Ae&&(this._addTile(Ae.tileID),F[Ae.tileID.key]=Ae.tileID),H[ue]=ge}const se=_[_.length-1].overscaledZ;for(const ue in this._tiles){const ge=this._tiles[ue];if(S[ue]||!ge.hasData())continue;let ke=ge.tileID;for(;ke.overscaledZ>se;){ke=ke.scaledTo(ke.overscaledZ-1);const Ae=this._tiles[ke.key];if(Ae&&Ae.hasData()&&H[ke.key]){S[ue]=ge.tileID;break}}}for(const ue in F)S[ue]||(this._coveredTiles[ue]=!0,S[ue]=F[ue])}for(const F in S)this._tiles[F].clearFadeHold();const O=function(F,H){const q=[];for(const se in F)se in H||q.push(se);return q}(this._tiles,S);for(const F of O){const H=this._tiles[F];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(+F)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const s={};if(0===t.length)return s;const u={},_=t.reduce((q,se)=>Math.min(q,se.overscaledZ),1/0),S=t[0].overscaledZ,O=Math.max(S-Xp.maxOverzooming,this._source.minzoom),F=Math.max(S+Xp.maxUnderzooming,this._source.minzoom),H={};for(const q of t){const se=this._addTile(q);s[q.key]=q,se.hasData()||_<this._source.maxzoom&&(H[q.key]=q)}this._retainLoadedChildren(H,_,F,s);for(const q of t){let se=this._tiles[q.key];if(se.hasData())continue;if(q.canonical.z>=this._source.maxzoom){const ge=q.children(this._source.maxzoom)[0],ke=this.getTile(ge);if(ke&&ke.hasData()){s[ge.key]=ge;continue}}else{const ge=q.children(this._source.maxzoom);if(s[ge[0].key]&&s[ge[1].key]&&s[ge[2].key]&&s[ge[3].key])continue}let ue=se.wasRequested();for(let ge=q.overscaledZ-1;ge>=O;--ge){const ke=q.scaledTo(ge);if(u[ke.key]||(u[ke.key]=!0,se=this.getTile(ke),!se&&ue&&(se=this._addTile(ke)),se&&(s[ke.key]=ke,ue=se.wasRequested(),se.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const s=[];let u,_=this._tiles[t].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){u=this._loadedParentTiles[_.key];break}s.push(_.key);const S=_.scaledTo(_.overscaledZ-1);if(u=this._getLoadedTile(S),u)break;_=S}for(const S of s)this._loadedParentTiles[S]=u}}_addTile(t){let s=this._tiles[t.key];if(s)return s;s=this._cache.getAndRemove(t),s&&(this._setTileReloadTimer(t.key,s),s.tileID=t,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,s)));const u=!!s;if(!u){const _=this.map?this.map.painter:null;s=new wm(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,_,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,t.key,s.state))}return s?(s.uses++,this._tiles[t.key]=s,u||this._source.fire(new x("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(t,s){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const u=s.getExpiryTimeout();u&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},u))}_removeTile(t){const s=this._tiles[t];s&&(s.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),s.uses>0||(s.hasData()&&"reloading"!==s.state?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,s,u){const _=[],S=this.transform;if(!S)return _;const O="globe"===S.projection.name,F=ic(S.center.lng);for(const H in this._tiles){const q=this._tiles[H];if(u&&q.clearQueryDebugViz(),q.holdingForFade())continue;let se;if(O){const ue=q.tileID.canonical;if(0===ue.z){const ge=[Math.abs(Ii(F,...Gf(ue,-1))-F),Math.abs(Ii(F,...Gf(ue,1))-F)];se=[0,2*ge.indexOf(Math.min(...ge))-1]}else{const ge=[Math.abs(Ii(F,...Gf(ue,-1))-F),Math.abs(Ii(F,...Gf(ue,0))-F),Math.abs(Ii(F,...Gf(ue,1))-F)];se=[ge.indexOf(Math.min(...ge))-1]}}else se=[0];for(const ue of se){const ge=t.containsTile(q,S,s,ue);ge&&_.push(ge)}}return _}getVisibleCoordinates(t){const s=this.getRenderableIds(t).map(u=>this._tiles[u].tileID);for(const u of s)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(pg(this._source.type))for(const t in this._tiles){const s=this._tiles[t];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=r.now())return!0}return!1}setFeatureState(t,s,u){this._state.updateState(t=t||"_geojsonTileLayer",s,u)}removeFeatureState(t,s,u){this._state.removeFeatureState(t=t||"_geojsonTileLayer",s,u)}getFeatureState(t,s){return this._state.getState(t=t||"_geojsonTileLayer",s)}setDependencies(t,s,u){const _=this._tiles[t];_&&_.setDependencies(s,u)}reloadTilesForDependencies(t,s){for(const u in this._tiles)this._tiles[u].hasDependency(t,s)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(t,s))}_preloadTiles(t,s){if(!this._sourceLoaded){const F=()=>{this._sourceLoaded&&(this._source.off("data",F),this._preloadTiles(t,s))};return void this._source.on("data",F)}const u=new Map,_=Array.isArray(t)?t:[t],S=this.map.painter.terrain,O=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const F of _){const H=F.coveringTiles({tileSize:O,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const q of H)u.set(q.key,q);this.usedForTerrain&&F.updateElevation(!1)}pn(Array.from(u.values()),(F,H)=>{const q=new wm(F,this._source.tileSize*F.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(q,se=>{"raster-dem"===this._source.type&&q.dem&&this._backfillDEM(q),H(se,q)})},s)}}function hg(n,t){const s=Math.abs(2*n.wrap)-+(n.wrap<0),u=Math.abs(2*t.wrap)-+(t.wrap<0);return n.overscaledZ-t.overscaledZ||u-s||t.canonical.y-n.canonical.y||t.canonical.x-n.canonical.x}function pg(n){return"raster"===n||"image"===n||"video"===n||"custom"===n}function Gf(n,t){const s=1<<n.z;return[n.x/s+t,(n.x+1)/s+t]}Xp.maxOverzooming=10,Xp.maxUnderzooming=3;class sm{constructor(t,s,u){this._demTile=t,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(t,s,u){const _=u||t.findDEMTileFor(s);if(!_||!_.dem)return;const S=_.dem,O=_.tileID,F=1<<s.canonical.z-O.canonical.z;return new sm(_,_.tileSize/qn/F,[(s.canonical.x/F-O.canonical.x)*S.dim,(s.canonical.y/F-O.canonical.y)*S.dim])}tileCoordToPixel(t,s){const u=s*this._scale+this._offset[1],_=Math.floor(t*this._scale+this._offset[0]),S=Math.floor(u);return new rt(_,S)}getElevationAt(t,s,u,_){const S=t*this._scale+this._offset[0],O=s*this._scale+this._offset[1],F=Math.floor(S),H=Math.floor(O),q=this._dem;return _=!!_,u?Cr(Cr(q.get(F,H,_),q.get(F,H+1,_),O-H),Cr(q.get(F+1,H,_),q.get(F+1,H+1,_),O-H),S-F):q.get(F,H,_)}getElevationAtPixel(t,s,u){return this._dem.get(t,s,!!u)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Io(1,t)*this._dem.stride}}class fg{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Xs(qn,16,0),this.featureIndexArray=new rr,this.promoteId=s}insert(t,s,u,_,S,O=0){const F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,_,S,O);const H=this.grid;for(let q=0;q<s.length;q++){const se=s[q],ue=[1/0,1/0,-1/0,-1/0];for(let ge=0;ge<se.length;ge++){const ke=se[ge];ue[0]=Math.min(ue[0],ke.x),ue[1]=Math.min(ue[1],ke.y),ue[2]=Math.max(ue[2],ke.x),ue[3]=Math.max(ue[3],ke.y)}ue[0]<qn&&ue[1]<qn&&ue[2]>=0&&ue[3]>=0&&H.insert(F,ue[0],ue[1],ue[2],ue[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Me(new jp(this.rawTileData)).layers,this.sourceLayerCoder=new Qm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,s,u,_){this.loadVTLayers();const S=t.params||{},O=Vi(S.filter),F=t.tileResult,H=t.transform,q=F.bufferedTilespaceBounds,se=this.grid.query(q.min.x,q.min.y,q.max.x,q.max.y,(Ae,Ue,pt,Rt)=>ku(F.bufferedTilespaceGeometry,Ae,Ue,pt,Rt));se.sort(u_);let ue=null;H.elevation&&se.length>0&&(ue=sm.create(H.elevation,this.tileID));const ge={};let ke;for(let Ae=0;Ae<se.length;Ae++){const Ue=se[Ae];if(Ue===ke)continue;ke=Ue;const pt=this.featureIndexArray.get(Ue);let Rt=null;this.loadMatchingFeature(ge,pt,O,S.layers,S.availableImages,s,u,_,(Xt,Lt,Wt,li=0)=>(Rt||(Rt=ka(Xt,this.tileID.canonical,t.tileTransform)),Lt.queryIntersectsFeature(F,Xt,Wt,Rt,this.z,t.transform,t.pixelPosMatrix,ue,li)))}return ge}loadMatchingFeature(t,s,u,_,S,O,F,H,q){const{featureIndex:se,bucketIndex:ue,sourceLayerIndex:ge,layoutVertexArrayOffset:ke}=s,Ae=this.bucketLayerIDs[ue];if(_&&!function(Xt,Lt){for(let Wt=0;Wt<Xt.length;Wt++)if(Lt.indexOf(Xt[Wt])>=0)return!0;return!1}(_,Ae))return;const Ue=this.sourceLayerCoder.decode(ge),pt=this.vtLayers[Ue].feature(se);if(u.needGeometry){const Xt=Ua(pt,!0);if(!u.filter(new le(this.tileID.overscaledZ),Xt,this.tileID.canonical))return}else if(!u.filter(new le(this.tileID.overscaledZ),pt))return;const Rt=this.getId(pt,Ue);for(let Xt=0;Xt<Ae.length;Xt++){const Lt=Ae[Xt];if(_&&_.indexOf(Lt)<0)continue;const Wt=O[Lt];if(!Wt)continue;let li={};void 0!==Rt&&H&&(li=H.getState(Wt.sourceLayer||"_geojsonTileLayer",Rt));const si=gn({},F[Lt]);si.paint=mg(si.paint,Wt.paint,pt,li,S),si.layout=mg(si.layout,Wt.layout,pt,li,S);const Ni=!q||q(pt,Wt,li,ke);if(!Ni)continue;const Fi=new eg(pt,this.z,this.x,this.y,Rt);Fi.layer=si;let ln=t[Lt];void 0===ln&&(ln=t[Lt]=[]),ln.push({featureIndex:se,feature:Fi,intersectionZ:Ni})}}lookupSymbolFeatures(t,s,u,_,S,O,F,H){const q={};this.loadVTLayers();const se=Vi(S);for(const ue of t)this.loadMatchingFeature(q,{bucketIndex:u,sourceLayerIndex:_,featureIndex:ue,layoutVertexArrayOffset:0},se,O,F,H,s);return q}loadFeature(t){const{featureIndex:s,sourceLayerIndex:u}=t;this.loadVTLayers();const _=this.sourceLayerCoder.decode(u),S=this.vtFeatures[_];if(S[s])return S[s];const O=this.vtLayers[_].feature(s);return S[s]=O,O}hasLayer(t){for(const s of this.bucketLayerIDs)for(const u of s)if(t===u)return!0;return!1}getId(t,s){let u=t.id;if(this.promoteId){const _="string"==typeof this.promoteId?this.promoteId:this.promoteId[s];null!=_&&(u=t.properties[_]),"boolean"==typeof u&&(u=Number(u))}return u}}function mg(n,t,s,u,_){return on(n,(S,O)=>{const F=t instanceof kt?t.get(O):null;return F&&F.evaluate?F.evaluate(s,u,_):F})}function u_(n,t){return t-n}Vn(fg,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class gg{constructor(t,s){this.width=t,this.height=s,this.nextRow=0,this.image=new Oc({width:t,height:s}),this.positions={},this.uploaded=!1}getDash(t,s){const u=this.getKey(t,s);return this.positions[u]}trim(){const t=this.width,s=this.height=_n(this.nextRow);this.image.resize({width:t,height:s})}getKey(t,s){return t.join(",")+s}getDashRanges(t,s,u){const _=[];let S=t.length%2==1?-t[t.length-1]*u:0,O=t[0]*u,F=!0;_.push({left:S,right:O,isDash:F,zeroLength:0===t[0]});let H=t[0];for(let q=1;q<t.length;q++){F=!F;const se=t[q];S=H*u,H+=se,O=H*u,_.push({left:S,right:O,isDash:F,zeroLength:0===se})}return _}addRoundDash(t,s,u){const _=s/2;for(let S=-u;S<=u;S++){const O=this.width*(this.nextRow+u+S);let F=0,H=t[F];for(let q=0;q<this.width;q++){q/H.right>1&&(H=t[++F]);const se=Math.abs(q-H.left),ue=Math.abs(q-H.right),ge=Math.min(se,ue);let ke;const Ae=S/u*(_+1);if(H.isDash){const Ue=_-Math.abs(Ae);ke=Math.sqrt(ge*ge+Ue*Ue)}else ke=_-Math.sqrt(ge*ge+Ae*Ae);this.image.data[O+q]=Math.max(0,Math.min(255,ke+128))}}}addRegularDash(t,s){for(let H=t.length-1;H>=0;--H){const q=t[H],se=t[H+1];q.zeroLength?t.splice(H,1):se&&se.isDash===q.isDash&&(se.left=q.left,t.splice(H,1))}const u=t[0],_=t[t.length-1];u.isDash===_.isDash&&(u.left=_.left-this.width,_.right=u.right+this.width);const S=this.width*this.nextRow;let O=0,F=t[O];for(let H=0;H<this.width;H++){H/F.right>1&&(F=t[++O]);const q=Math.abs(H-F.left),se=Math.abs(H-F.right),ue=Math.min(q,se);this.image.data[S+H]=Math.max(0,Math.min(255,(F.isDash?ue:-ue)+s+128))}}addDash(t,s){const u=this.getKey(t,s);if(this.positions[u])return this.positions[u];const _="round"===s,S=_?7:0,O=2*S+1;if(this.nextRow+O>this.height)return Bi("LineAtlas out of space"),null;0===t.length&&t.push(1);let F=0;for(let se=0;se<t.length;se++)t[se]<0&&(Bi("Negative value is found in line dasharray, replacing values with 0"),t[se]=0),F+=t[se];if(0!==F){const se=this.width/F,ue=this.getDashRanges(t,this.width,se);_?this.addRoundDash(ue,se,S):this.addRegularDash(ue,"square"===s?.5*se:0)}const H=this.nextRow+S;this.nextRow+=O;const q={tl:[H,S],br:[F,0]};return this.positions[u]=q,q}}Vn(gg,"LineAtlas");const _g=1*ou;class vg{constructor(t){const s={},u=[];for(const F in t){const H=t[F],q=s[F]={};for(const se in H.glyphs){const ue=H.glyphs[+se];if(!ue||0===ue.bitmap.width||0===ue.bitmap.height)continue;const ge=ue.metrics.localGlyph?_g:1,ke={x:0,y:0,w:ue.bitmap.width+2*ge,h:ue.bitmap.height+2*ge};u.push(ke),q[se]=ke}}const{w:_,h:S}=m(u),O=new Oc({width:_||1,height:S||1});for(const F in t){const H=t[F];for(const q in H.glyphs){const se=H.glyphs[+q];if(!se||0===se.bitmap.width||0===se.bitmap.height)continue;const ue=s[F][q],ge=se.metrics.localGlyph?_g:1;Oc.copy(se.bitmap,O,{x:0,y:0},{x:ue.x+ge,y:ue.y+ge},se.bitmap)}}this.image=O,this.positions=s}}Vn(vg,"GlyphAtlas");class h_{constructor(t){this.tileID=new wl(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=qp(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,s,u,_,S){this.status="parsing",this.data=t,this.collisionBoxArray=new es;const O=new Qm(Object.keys(t.layers).sort()),F=new fg(this.tileID,this.promoteId);F.bucketLayerIDs=[];const H={},q=new gg(256,256),se={featureIndex:F,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:q,availableImages:u},ue=s.familiesBySource[this.source];for(const li in ue){const si=t.layers[li];if(!si)continue;let Ni=!1,Fi=!1;for(const Ui of ue[li])"symbol"===Ui[0].type?Ni=!0:Fi=!0;if(!0===this.isSymbolTile&&!Ni||!1===this.isSymbolTile&&!Fi)continue;1===si.version&&Bi(`Vector tile source "${this.source}" layer "${li}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ln=O.encode(li),Sn=[];for(let Ui=0;Ui<si.length;Ui++){const un=si.feature(Ui),hn=F.getId(un,li);Sn.push({feature:un,id:hn,index:Ui,sourceLayerIndex:ln})}for(const Ui of ue[li]){const un=Ui[0];void 0!==this.isSymbolTile&&"symbol"===un.type!==this.isSymbolTile||un.minzoom&&this.zoom<Math.floor(un.minzoom)||un.maxzoom&&this.zoom>=un.maxzoom||"none"!==un.visibility&&(Tm(Ui,this.zoom,u),(H[un.id]=un.createBucket({index:F.bucketLayerIDs.length,layers:Ui,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ln,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(Sn,se,this.tileID.canonical,this.tileTransform),F.bucketLayerIDs.push(Ui.map(hn=>hn.id)))}}let ge,ke,Ae,Ue;q.trim();const pt={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Rt=()=>{if(ge)return S(ge);if(ke&&Ae&&Ue){const li=new vg(ke),si=new N(Ae,Ue);for(const Ni in H){const Fi=H[Ni];Fi instanceof mp?(Tm(Fi.layers,this.zoom,u),Yg(Fi,ke,li.positions,Ae,si.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):Fi.hasPattern&&(Fi instanceof dp||Fi instanceof Wc||Fi instanceof vc)&&(Tm(Fi.layers,this.zoom,u),Fi.addFeatures(se,this.tileID.canonical,si.patternPositions,u,this.tileTransform))}this.status="done",S(null,{buckets:ji(H).filter(Ni=>!Ni.isEmpty()),featureIndex:F,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:li.image,lineAtlas:q,imageAtlas:si,glyphMap:this.returnDependencies?ke:null,iconMap:this.returnDependencies?Ae:null,glyphPositions:this.returnDependencies?li.positions:null})}},Xt=on(se.glyphDependencies,li=>Object.keys(li).map(Number));Object.keys(Xt).length?_.send("getGlyphs",{uid:this.uid,stacks:Xt},(li,si)=>{ge||(ge=li,ke=si,Rt())},void 0,!1,pt):ke={};const Lt=Object.keys(se.iconDependencies);Lt.length?_.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"icons"},(li,si)=>{ge||(ge=li,Ae=si,Rt())},void 0,!1,pt):Ae={};const Wt=Object.keys(se.patternDependencies);Wt.length?_.send("getImages",{icons:Wt,source:this.source,tileID:this.tileID,type:"patterns"},(li,si)=>{ge||(ge=li,Ue=si,Rt())},void 0,!1,pt):Ue={},Rt()}}function Tm(n,t,s){const u=new le(t);for(const _ of n)_.recalculate(u,s)}class yg{constructor(t){this.entries={},this.scheduler=t}request(t,s,u,_){const S=this.entries[t]=this.entries[t]||{callbacks:[]};if(S.result){const[O,F]=S.result;return this.scheduler?this.scheduler.add(()=>{_(O,F)},s):_(O,F),()=>{}}return S.callbacks.push(_),S.cancel||(S.cancel=u((O,F)=>{S.result=[O,F];for(const H of S.callbacks)this.scheduler?this.scheduler.add(()=>{H(O,F)},s):H(O,F);setTimeout(()=>delete this.entries[t],3e3)})),()=>{S.result||(S.callbacks=S.callbacks.filter(O=>O!==_),S.callbacks.length||(S.cancel(),delete this.entries[t]))}}}function bg(n,t,s){const u=JSON.stringify(n.request);return n.data&&(this.deduped.entries[u]={result:[null,n.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},_=>{const S=mr(n.request,(O,F,H,q)=>{O?_(O):F&&_(null,{vectorTile:s?void 0:new Me(new jp(F)),rawData:F,cacheControl:H,expires:q})});return()=>{S.cancel(),_()}},t)}const xg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Im{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(t,0,2);if(219!==s)throw new Error("Data does not appear to be in a KDBush format.");const _=u>>4;if(1!==_)throw new Error(`Got v${_} data when expected v1.`);const S=xg[15&u];if(!S)throw new Error("Unrecognized array type.");const[O]=new Uint16Array(t,2,1),[F]=new Uint32Array(t,4,1);return new Im(F,O,S,t)}constructor(t,s=64,u=Float64Array,_){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const S=xg.indexOf(this.ArrayType),O=2*t*this.ArrayType.BYTES_PER_ELEMENT,F=t*this.IndexArrayType.BYTES_PER_ELEMENT,H=(8-F%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${u}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+F+H,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+O+F+H),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+F+H,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=t,this.coords[this._pos++]=s,u}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Om(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,u,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:O,nodeSize:F}=this,H=[0,S.length-1,0],q=[];for(;H.length;){const se=H.pop()||0,ue=H.pop()||0,ge=H.pop()||0;if(ue-ge<=F){for(let pt=ge;pt<=ue;pt++){const Rt=O[2*pt],Xt=O[2*pt+1];Rt>=t&&Rt<=u&&Xt>=s&&Xt<=_&&q.push(S[pt])}continue}const ke=ge+ue>>1,Ae=O[2*ke],Ue=O[2*ke+1];Ae>=t&&Ae<=u&&Ue>=s&&Ue<=_&&q.push(S[ke]),(0===se?t<=Ae:s<=Ue)&&(H.push(ge),H.push(ke-1),H.push(1-se)),(0===se?u>=Ae:_>=Ue)&&(H.push(ke+1),H.push(ue),H.push(1-se))}return q}within(t,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:O}=this,F=[0,_.length-1,0],H=[],q=u*u;for(;F.length;){const se=F.pop()||0,ue=F.pop()||0,ge=F.pop()||0;if(ue-ge<=O){for(let pt=ge;pt<=ue;pt++)Cg(S[2*pt],S[2*pt+1],t,s)<=q&&H.push(_[pt]);continue}const ke=ge+ue>>1,Ae=S[2*ke],Ue=S[2*ke+1];Cg(Ae,Ue,t,s)<=q&&H.push(_[ke]),(0===se?t-u<=Ae:s-u<=Ue)&&(F.push(ge),F.push(ke-1),F.push(1-se)),(0===se?t+u>=Ae:s+u>=Ue)&&(F.push(ke+1),F.push(ue),F.push(1-se))}return H}}function Om(n,t,s,u,_,S){if(_-u<=s)return;const O=u+_>>1;wg(n,t,O,u,_,S),Om(n,t,s,u,O-1,1-S),Om(n,t,s,O+1,_,1-S)}function wg(n,t,s,u,_,S){for(;_>u;){if(_-u>600){const q=_-u+1,se=s-u+1,ue=Math.log(q),ge=.5*Math.exp(2*ue/3),ke=.5*Math.sqrt(ue*ge*(q-ge)/q)*(se-q/2<0?-1:1);wg(n,t,s,Math.max(u,Math.floor(s-se*ge/q+ke)),Math.min(_,Math.floor(s+(q-se)*ge/q+ke)),S)}const O=t[2*s+S];let F=u,H=_;for(Nf(n,t,u,s),t[2*_+S]>O&&Nf(n,t,u,_);F<H;){for(Nf(n,t,F,H),F++,H--;t[2*F+S]<O;)F++;for(;t[2*H+S]>O;)H--}t[2*u+S]===O?Nf(n,t,u,H):(H++,Nf(n,t,H,_)),H<=s&&(u=H+1),s<=H&&(_=H-1)}}function Nf(n,t,s,u){Mm(n,s,u),Mm(t,2*s,2*u),Mm(t,2*s+1,2*u+1)}function Mm(n,t,s){const u=n[t];n[t]=n[s],n[s]=u}function Cg(n,t,s,u){const _=n-s,S=t-u;return _*_+S*S}c.ARRAY_TYPE=Ea,c.AUTH_ERR_MSG=Tt,c.Aabb=Sa,c.Actor=class{constructor(n,t,s){this.target=n,this.parent=t,this.mapId=s,this.callbacks={},this.cancelCallbacks={},Gn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Xi()?n:Z,this.scheduler=new s_}send(n,t,s,u,_=!1,S){const O=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=S,this.callbacks[O]=s);const F=fn(this.globalScope)?void 0:[];return this.target.postMessage({id:O,type:n,hasCallback:!!s,targetMapId:u,mustQueue:_,sourceMapId:this.mapId,data:aa(t,F)},F),{cancel:()=>{s&&delete this.callbacks[O],this.target.postMessage({id:O,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(n){const t=n.data,s=t.id;if(s&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const u=this.cancelCallbacks[s];delete this.cancelCallbacks[s],u&&u.cancel()}else if(t.mustQueue||Xi()){const u=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,t),u&&u.metadata||{type:"message"})}else this.processTask(s,t)}processTask(n,t){if("<response>"===t.type){const s=this.callbacks[n];delete this.callbacks[n],s&&(t.error?s(Kl(t.error)):s(null,Kl(t.data)))}else{const s=fn(this.globalScope)?void 0:[],u=t.hasCallback?(S,O)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:S?aa(S):null,data:aa(O,s)},s)}:S=>{},_=Kl(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,_,u);else if(this.parent.getWorkerSource){const S=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,S[0],_.source)[S[1]](_,u)}else u(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.CanonicalTileID=cp,c.Color=Or,c.ColorMode=Lu,c.CullFaceMode=au,c.DEMData=rm,c.DataConstantProperty=Ge,c.DedupedRequest=yg,c.DepthMode=xf,c.EXTENT=qn,c.Elevation=class{isDataAvailableAtPoint(n){const t=this._source();if(this.isUsingMockSource()||!t||n.y<0||n.y>1)return!1;const s=t.getSource().maxzoom,u=1<<s,_=Math.floor(n.x),S=Math.floor((n.x-_)*u),O=Math.floor(n.y*u),F=this.findDEMTileFor(new wl(s,_,s,S,O));return!(!F||!F.dem)}getAtPointOrZero(n,t=0){return this.getAtPoint(n,t)||0}getAtPoint(n,t,s=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const u=this._source();if(!u||n.y<0||n.y>1)return t;const _=u.getSource().maxzoom,S=1<<_,O=Math.floor(n.x),F=n.x-O,H=new wl(_,O,_,Math.floor(F*S),Math.floor(n.y*S)),q=this.findDEMTileFor(H);if(!q||!q.dem)return t;const se=q.dem,ue=1<<q.tileID.canonical.z,ge=(F*ue-q.tileID.canonical.x)*se.dim,ke=(n.y*ue-q.tileID.canonical.y)*se.dim,Ae=Math.floor(ge),Ue=Math.floor(ke);return(s?this.exaggeration():1)*Cr(Cr(se.get(Ae,Ue),se.get(Ae,Ue+1),ke-Ue),Cr(se.get(Ae+1,Ue),se.get(Ae+1,Ue+1),ke-Ue),ge-Ae)}getAtTileOffset(n,t,s){const u=1<<n.canonical.z;return this.getAtPointOrZero(new Cd(n.wrap+(n.canonical.x+t/qn)/u,(n.canonical.y+s/qn)/u))}getAtTileOffsetFunc(n,t,s,u){return _=>{const S=this.getAtTileOffset(n,_.x,_.y),O=u.upVector(n.canonical,_.x,_.y);return al(O,O,S*u.upVectorScale(n.canonical,t,s).metersToTile),O}}getForTilePoints(n,t,s,u){if(this.isUsingMockSource())return!1;const _=sm.create(this,n,u);return!!_&&(t.forEach(S=>{S[2]=this.exaggeration()*_.getElevationAt(S[0],S[1],s)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(n);if(!t||!t.dem)return null;const s=t.dem.tree,u=t.tileID,_=1<<n.canonical.z-u.canonical.z;let S=n.canonical.x/_-u.canonical.x,O=n.canonical.y/_-u.canonical.y,F=0;for(let H=0;H<n.canonical.z-u.canonical.z&&!s.leaves[F];H++){S*=2,O*=2;const q=2*Math.floor(O)+Math.floor(S);F=s.childOffsets[F]+q,S%=1,O%=1}return{min:this.exaggeration()*s.minimums[F],max:this.exaggeration()*s.maximums[F]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,t,s){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},c.ErrorEvent=w,c.EvaluationParameters=le,c.Event=x,c.Evented=I,c.FillExtrusionBucket=vc,c.Frustum=fu,c.FrustumCorners=Xu,c.GLOBE_RADIUS=mc,c.GLOBE_SCALE_MATCH_LATITUDE=45,c.GLOBE_ZOOM_THRESHOLD_MAX=Yh,c.GLOBE_ZOOM_THRESHOLD_MIN=Fh,c.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,t){const s=new yn,u=new tr,_=[],S=n+1+2,O=t[0]+1,F=t[0]+1+(1+t.length),H=(q,se,ue)=>{let ge=q===S-1?q-2:0===q?q:q-1;return ge+=ue?24575:0,[ge,se]};for(let q=0;q<S;++q)s.emplaceBack(...H(q,0,!0));for(let q=0;q<O;++q)for(let se=0;se<S;++se)s.emplaceBack(...H(se,q,(0===se||se===S-1)&&!0));for(let q=0;q<t.length;++q){const se=t[q];for(let ue=0;ue<S;++ue)s.emplaceBack(...H(ue,se,!0))}for(let q=0;q<t.length;++q){const se=u.length,ue=t[q]+1+2,ge=new tr;for(let Ue=0;Ue<ue-1;Ue++){const pt=Ue===ue-2,Rt=pt?S*(F-t.length+q-Ue):S;for(let Xt=0;Xt<S-1;Xt++){const Lt=Ue*S+Xt;0===Ue||pt||0===Xt||Xt===S-2?(ge.emplaceBack(Lt+1,Lt,Lt+Rt),ge.emplaceBack(Lt+Rt,Lt+Rt+1,Lt+1)):(u.emplaceBack(Lt+1,Lt,Lt+Rt),u.emplaceBack(Lt+Rt,Lt+Rt+1,Lt+1))}}const ke=io.simpleSegment(0,se,s.length,u.length-se);for(let Ue=0;Ue<ge.uint16.length;Ue+=3)u.emplaceBack(ge.uint16[Ue],ge.uint16[Ue+1],ge.uint16[Ue+2]);const Ae=io.simpleSegment(0,se,s.length,u.length-se);_.push({withoutSkirts:ke,withSkirts:Ae})}return{vertices:s,indices:u,segments:_}}_createGrid(n){const t=this._fillGridMeshWithLods(64,jd);this._gridSegments=t.segments,this._gridBuffer=n.createVertexBuffer(t.vertices,Dl.members),this._gridIndexBuffer=n.createIndexBuffer(t.indices,!0)}_createPoles(n){const t=new tr;for(let _=0;_<=64;_++)t.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=n.createIndexBuffer(t,!0);const s=new hs,u=new hs;this._poleSegments=[];for(let _=0,S=0;_<Fh;_++){const O=360/(1<<_);s.emplaceBack(0,-mc,0,.5,0),u.emplaceBack(0,-mc,0,.5,1);for(let F=0;F<=64;F++){const H=F/64,q=Cr(0,O,H),[se,ue,ge]=bd(eh,bu,q,mc);s.emplaceBack(se,ue,ge,H,0),u.emplaceBack(se,ue,ge,H,1)}this._poleSegments.push(io.simpleSegment(S,0,66,64)),S+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(s,kp,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(u,kp,!1)}getGridBuffers(n,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,t){if(!this._wireframeSegments){const s=new Qr,u=64,_=u+1+2,S=1;this._wireframeSegments=[];for(let O=0,F=0;O<jd.length;O++){const H=jd[O];for(let se=S;se<H+S;se++)for(let ue=S;ue<u+S;ue++){const ge=se*_+ue;s.emplaceBack(ge,ge+1),s.emplaceBack(ge,ge+_),s.emplaceBack(ge,ge+_+1)}const q=H*u*3;this._wireframeSegments.push(io.simpleSegment(0,F,(H+1)*_,q)),F+=q}this._wireframeIndexBuffer=n.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},c.GlyphManager=gf,c.ImagePosition=D,c.KDBush=Im,c.LivePerformanceUtils=Ot,c.LngLat=ps,c.LngLatBounds=kc,c.LocalGlyphMode=fm,c.MAX_MERCATOR_LATITUDE=ha,c.MercatorCoordinate=Cd,c.ONE_EM=Ta,c.OverscaledTileID=wl,c.PerformanceMarkers=Ct,c.Point=rt,c.Properties=Bt,c.RGBAImage=ll,c.Ray=qu,c.RequestManager=class{constructor(n,t,s){this._transformRequestFn=n,this._customAccessToken=t,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const n=function(){let t="";for(let s=0;s<10;s++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",tt,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,t){return this._transformRequestFn&&this._transformRequestFn(n,t)||{url:n}}normalizeStyleURL(n,t){if(!Zt(n))return n;const s=Vt(n);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||t)}normalizeGlyphsURL(n,t){if(!Zt(n))return n;const s=Vt(n);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||t)}normalizeSourceURL(n,t,s,u){if(!Zt(n))return n;const _=Vt(n);return _.path=`/v4/${_.authority}.json`,_.params.push("secure"),s&&_.params.push(`language=${s}`),u&&_.params.push(`worldview=${u}`),this._makeAPIURL(_,this._customAccessToken||t)}normalizeSpriteURL(n,t,s,u){const _=Vt(n);return Zt(n)?(_.path=`/styles/v1${_.path}/sprite${t}${s}`,this._makeAPIURL(_,this._customAccessToken||u)):(_.path+=`${t}${s}`,$t(_))}normalizeTileURL(n,t,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!Zt(n))return n;const u=Vt(n);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||s&&"raster"!==u.authority&&512===s?"@2x":""}${Le.supported?".webp":"$1"}`),"raster"===u.authority?u.path=`/${Se.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${Se.TILE_URL_VERSION}${u.path}`);const _=this._customAccessToken||function(S){for(const O of S){const F=O.match(/^access_token=(.*)$/);if(F)return F[1]}return null}(u.params)||Se.ACCESS_TOKEN;return Se.REQUIRE_ACCESS_TOKEN&&_&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,_)}canonicalizeTileURL(n,t){const s=Vt(n);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return n;let u="mapbox://";s.path.match(/^\/raster\/v1\//)?u+=`raster/${s.path.replace(`/${Se.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${s.path.replace(`/${Se.TILE_URL_VERSION}/`,"")}`;let _=s.params;return t&&(_=_.filter(S=>!S.match(/^access_token=/))),_.length&&(u+=`?${_.join("&")}`),u}canonicalizeTileset(n,t){const s=!!t&&Zt(t),u=[];for(const _ of n.tiles||[])Pt(_)?u.push(this.canonicalizeTileURL(_,s)):u.push(_);return u}_makeAPIURL(n,t){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Vt(Se.API_URL);if(n.protocol=u.protocol,n.authority=u.authority,"http"===n.protocol){const _=n.params.indexOf("secure");_>=0&&n.params.splice(_,1)}if("/"!==u.path&&(n.path=`${u.path}${n.path}`),!Se.REQUIRE_ACCESS_TOKEN)return $t(n);if(t=t||Se.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return n.params=n.params.filter(_=>-1===_.indexOf("access_token")),n.params.push(`access_token=${t||""}`),$t(n)}},c.ResourceType=Yr,c.SegmentVector=io,c.SourceCache=Xp,c.StencilMode=Em,c.StructArrayLayout1ui2=wa,c.StructArrayLayout2f1f2i16=dr,c.StructArrayLayout2i4=yn,c.StructArrayLayout2ui4=Qr,c.StructArrayLayout3f12=pr,c.StructArrayLayout3ui6=tr,c.StructArrayLayout4i8=rn,c.StructArrayLayout5f20=hs,c.Texture=Bf,c.Tile=wm,c.Transitionable=Pe,c.Uniform1f=Gd,c.Uniform1i=class extends Sc{constructor(n){super(n),this.current=0}set(n,t,s){this.fetchUniformLocation(n,t)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},c.Uniform2f=class extends Sc{constructor(n){super(n),this.current=[0,0]}set(n,t,s){this.fetchUniformLocation(n,t)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},c.Uniform3f=class extends Sc{constructor(n){super(n),this.current=[0,0,0]}set(n,t,s){this.fetchUniformLocation(n,t)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},c.Uniform4f=Sh,c.UniformColor=kh,c.UniformMatrix2f=class extends Sc{constructor(n){super(n),this.current=Qp}set(n,t,s){if(this.fetchUniformLocation(n,t))for(let u=0;u<4;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}},c.UniformMatrix3f=class extends Sc{constructor(n){super(n),this.current=Jp}set(n,t,s){if(this.fetchUniformLocation(n,t))for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}},c.UniformMatrix4f=class extends Sc{constructor(n){super(n),this.current=Th}set(n,t,s){if(this.fetchUniformLocation(n,t)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let u=1;u<16;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},c.UnwrappedTileID=af,c.ValidationError=Mn,c.VectorTileFeature=zt,c.VectorTileWorkerSource=class extends I{constructor(n,t,s,u,_){super(),this.actor=n,this.layerIndex=t,this.availableImages=s,this.loadVectorData=_||bg,this.loading={},this.loaded={},this.deduped=new yg(n.scheduler),this.isSpriteLoaded=u,this.scheduler=n.scheduler}loadTile(n,t){const s=n.uid,u=n&&n.request,_=u&&u.collectResourceTiming,S=this.loading[s]=new h_(n);S.abort=this.loadVectorData(n,(O,F)=>{const H=!this.loading[s];if(delete this.loading[s],H||O||!F)return S.status="done",H||(this.loaded[s]=S),t(O);const q=F.rawData,se={};F.expires&&(se.expires=F.expires),F.cacheControl&&(se.cacheControl=F.cacheControl),S.vectorTile=F.vectorTile||new Me(new jp(q));const ue=()=>{S.parse(S.vectorTile,this.layerIndex,this.availableImages,this.actor,(ge,ke)=>{if(ge||!ke)return t(ge);const Ae={};if(_){const Ue=Yt(u);Ue.length>0&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ue)))}t(null,gn({rawTileData:q.slice(0)},ke,se,Ae))})};this.isSpriteLoaded?ue():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(ue,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):ue()}),this.loaded=this.loaded||{},this.loaded[s]=S})}reloadTile(n,t){const s=this.loaded,u=n.uid,_=this;if(s&&s[u]){const S=s[u];S.showCollisionBoxes=n.showCollisionBoxes,S.enableTerrain=!!n.enableTerrain,S.projection=n.projection,S.tileTransform=qp(n.tileID.canonical,n.projection);const O=(F,H)=>{const q=S.reloadCallback;q&&(delete S.reloadCallback,S.parse(S.vectorTile,_.layerIndex,this.availableImages,_.actor,q)),t(F,H)};"parsing"===S.status?S.reloadCallback=O:"done"===S.status&&(S.vectorTile?S.parse(S.vectorTile,this.layerIndex,this.availableImages,this.actor,O):O())}}abortTile(n,t){const s=n.uid,u=this.loading[s];u&&(u.abort&&u.abort(),delete this.loading[s]),t()}removeTile(n,t){const s=this.loaded,u=n.uid;s&&s[u]&&delete s[u],t()}},c.WritingMode=J,c.ZoomDependentExpression=$a,c.add=ec,c.addDynamicAttributes=tm,c.adjoint=function(n,t){var s=t[0],u=t[1],_=t[2],S=t[3],O=t[4],F=t[5],H=t[6],q=t[7],se=t[8];return n[0]=O*se-F*q,n[1]=_*q-u*se,n[2]=u*F-_*O,n[3]=F*H-S*se,n[4]=s*se-_*H,n[5]=_*S-s*F,n[6]=S*q-O*H,n[7]=u*H-s*q,n[8]=s*O-u*S,n},c.asyncAll=pn,c.bezier=Ti,c.bindAll=Gn,c.boundsAttributes=ig,c.bufferConvexPolygon=function(n,t){const s=[];for(let u=0;u<n.length;u++){const _=Zi(u-1,-1,n.length-1),S=Zi(u+1,-1,n.length-1),O=n[u],F=n[S],H=n[_].sub(O).unit(),q=F.sub(O).unit(),se=q.angleWithSep(H.x,H.y),ue=H.add(q).unit().mult(-1*t/Math.sin(se/2));s.push(O.add(ue))}return s},c.cacheEntryPossiblyAdded=function(n){fr++,fr>br&&(n.getActor().send("enforceCacheSizeLimit",cn),fr=0)},c.calculateGlobeLabelMatrix=function(n,t){const{x:s,y:u}=n.point,_=yu(s,u,n.worldSize/n._pixelsPerMercatorPixel,0,0);return Gc(_,_,ua(gc(t)))},c.calculateGlobeMatrix=function(n){const{x:t,y:s}=n.point,{lng:u,lat:_}=n._center;return yu(t,s,n.worldSize,u,_)},c.calculateGlobeMercatorMatrix=function(n){const t=n.pixelsPerMeter,s=t/Io(1,n.center.lat),u=Jl(new Float64Array(16));return Ql(u,u,[n.point.x,n.point.y,0]),pc(u,u,[s,s,t]),Float32Array.from(u)},c.circumferenceAtLatitude=th,c.clamp=Ii,c.clearTileCache=function(n){if(!zn())return;const t=Z.caches.delete(Dn);n&&t.catch(n).then(()=>n())},c.clipLine=Ym,c.clone=function(n){var t=new Ea(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},c.clone$1=gi,c.collisionCircleLayout=Df,c.config=Se,c.conjugate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n},c.create=function(){var n=new Ea(16);return Ea!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},c.create$1=hu,c.createExpression=nl,c.createLayout=fi,c.createStyleLayer=function(n){return"custom"===n.type?new t_(n):new n_[n.type](n)},c.cross=Hu,c.degToRad=ti,c.distance=function(n,t){return Math.hypot(t[0]-n[0],t[1]-n[1],t[2]-n[2])},c.div=function(n,t,s){return n[0]=t[0]/s[0],n[1]=t[1]/s[1],n[2]=t[2]/s[2],n},c.dot=xl,c.earthRadius=qd,c.ease=Ji,c.easeCubicInOut=vi,c.ecefToLatLng=function([n,t,s]){const u=Math.hypot(n,t,s),_=Math.atan2(n,s),S=.5*Math.PI-Math.acos(-t/u);return new ps(St(_),St(S))},c.emitValidationErrors=ud,c.endsWith=Yn,c.enforceCacheSizeLimit=function(n){On(),wi&&wi.then(t=>{t.keys().then(s=>{for(let u=0;u<s.length-n;u++)t.delete(s[u])})})},c.evaluateSizeForFeature=up,c.evaluateSizeForZoom=M,c.evaluateVariableOffset=$m,c.evented=z,c.exactEquals=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},c.exactEquals$1=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]},c.exported=r,c.exported$1=Le,c.extend=gn,c.extend$1=Y,c.fillExtrusionHeightLift=sf,c.filterObject=jt,c.fromMat4=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n},c.fromQuat=function(n,t){var s=t[0],u=t[1],_=t[2],S=t[3],O=s+s,F=u+u,H=_+_,q=s*O,se=u*O,ue=u*F,ge=_*O,ke=_*F,Ae=_*H,Ue=S*O,pt=S*F,Rt=S*H;return n[0]=1-ue-Ae,n[1]=se+Rt,n[2]=ge-pt,n[3]=0,n[4]=se-Rt,n[5]=1-q-Ae,n[6]=ke+Ue,n[7]=0,n[8]=ge+pt,n[9]=ke-Ue,n[10]=1-q-ue,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},c.fromRotation=function(n,t){var s=Math.sin(t),u=Math.cos(t);return n[0]=u,n[1]=s,n[2]=0,n[3]=-s,n[4]=u,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},c.fromScaling=Dh,c.furthestTileCorner=function(n){const t=Math.round((n+45+360)%360/90)%4;return pi[t]},c.getAABBPointSquareDist=function(n,t,s){let u=0;for(let _=0;_<2;++_){const S=s?s[_]:0;n[_]>S&&(u+=(n[_]-S)*(n[_]-S)),t[_]<S&&(u+=(S-t[_])*(S-t[_]))}return u},c.getAnchorAlignment=Ld,c.getAnchorJustification=gm,c.getBounds=function(n){let t=1/0,s=1/0,u=-1/0,_=-1/0;for(const S of n)t=Math.min(t,S.x),s=Math.min(s,S.y),u=Math.max(u,S.x),_=Math.max(_,S.y);return{min:new rt(t,s),max:new rt(u,_)}},c.getColumn=En,c.getDefaultExportFromCjs=ze,c.getGridMatrix=function(n,t,s,u){const _=t.getNorth(),S=t.getSouth(),O=t.getWest(),F=t.getEast(),H=1<<n.z,q=F-O,se=_-S,ue=q/64,ge=-se/jd[s],ke=[0,ue,0,ge,0,0,_,O,0];if(n.z>0){const Ae=180/u;Bu(ke,ke,[Ae/q+1,0,0,0,Ae/se+1,0,-.5*Ae/ue,.5*Ae/ge,1])}return ke[2]=H,ke[5]=n.x,ke[8]=n.y,ke},c.getImage=Mt,c.getJSON=function(n,t){return ur(gn(n,{type:"json"}),t)},c.getLatitudinalLod=function(n){const t=ha-5;n=Ii(n,-t,t)/t*90;const s=Math.pow(Math.abs(Math.sin(ti(n))),3);return Math.round(s*(jd.length-1))},c.getMapSessionAPI=Ei,c.getPerformanceMeasurement=Yt,c.getProjection=Km,c.getRTLTextPluginStatus=B,c.getReferrer=_r,c.getTilePoint=function(n,{x:t,y:s},u=0){return new rt(((t-u)*n.scale-n.x)*qn,(s*n.scale-n.y)*qn)},c.getTileVec3=function(n,t,s=0){return fc(((t.x-s)*n.scale-n.x)*qn,(t.y*n.scale-n.y)*qn,Ic(t.z,t.y))},c.getVideo=function(n,t){const s=Z.document.createElement("video");s.muted=!0,s.onloadstart=function(){t(null,s)};for(let u=0;u<n.length;u++){const _=Z.document.createElement("source");kr(n[u])||(s.crossOrigin="Anonymous"),_.src=n[u],s.appendChild(_)}return{cancel:()=>{}}},c.globeCenterToScreenPoint=function(n){const t=[0,0,0],s=Jl(new Float64Array(16));return Gc(s,n.pixelMatrix,n.globeMatrix),Zs(t,t,s),new rt(t[0],t[1])},c.globeDenormalizeECEF=ua,c.globeECEFOrigin=function(n,t){const s=[0,0,0];return Zs(s,s,Wd(gc(t.canonical))),Zs(s,s,n),s},c.globeMetersToEcef=Ud,c.globeNormalizeECEF=Wd,c.globePixelsToTileUnits=function(n,t){return qn/(512*Math.pow(2,n))*od(gc(t))},c.globePoleMatrixForTile=function(n,t,s){const u=Jl(new Float64Array(16)),_=(t/(1<<n)-.5)*Math.PI*2;return $d(u,s.globeMatrix,_),Float32Array.from(u)},c.globeTileBounds=gc,c.globeTiltAtLngLat=Gh,c.globeToMercatorTransition=wd,c.globeUseCustomAntiAliasing=function(n,t,s){const u=wd(s.zoom),_=n.style.map._antialias,S=!!t.extStandardDerivatives,O=t.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return 0===u&&!_&&!O&&S},c.identity=Jl,c.identity$1=yd,c.invert=Ah,c.isFullscreen=function(){return!!Z.document.fullscreenElement||!!Z.document.webkitFullscreenElement},c.isLngLatBehindGlobe=Qu,c.isMapAuthenticated=function(n){return Ki.has(n)},c.isMapboxURL=Zt,c.isSafariWithAntialiasingBug=function(n){const t=n.navigator?n.navigator.userAgent:null;return!!fn(n)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},c.latFromMercatorY=Ps,c.latLngToECEF=xd,c.len=Uu,c.length=_d,c.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},c.lngFromMercatorX=Rl,c.loadVectorTile=bg,c.makeRequest=ur,c.mapValue=function(n,t,s,u,_){return Ii((n-t)/(s-t)*(_-u)+u,u,_)},c.mercatorScale=Vh,c.mercatorXfromLng=ic,c.mercatorYfromLat=_c,c.mercatorZfromAltitude=Io,c.mul=Nu,c.mul$1=Ep,c.multiply=Gc,c.multiply$1=Bu,c.multiply$2=$u,c.nextPowerOfTwo=_n,c.normalize=ja,c.normalize$1=Tc,c.normalize$2=nd,c.number=Cr,c.ortho=function(n,t,s,u,_,S,O){var F=1/(t-s),H=1/(u-_),q=1/(S-O);return n[0]=-2*F,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*H,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*q,n[11]=0,n[12]=(t+s)*F,n[13]=(_+u)*H,n[14]=(O+S)*q,n[15]=1,n},c.pbf=dt,c.perspective=function(n,t,s,u,_){var S,O=1/Math.tan(t/2);return n[0]=O/s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=O,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=_&&_!==1/0?(n[10]=(_+u)*(S=1/(u-_)),n[14]=2*_*u*S):(n[10]=-1,n[14]=-2*u),n},c.pick=function(n,t){const s={};for(let u=0;u<t.length;u++){const _=t[u];_ in n&&(s[_]=n[_])}return s},c.plugin=ie,c.pointGeometry=Jt,c.polesInViewport=function(n){const t=Jl(new Float64Array(16));Gc(t,n.pixelMatrix,n.globeMatrix);const s=[0,Gl,0],u=[0,Nl,0];return Zs(s,s,t),Zs(u,u,t),[s[0]>0&&s[0]<=n.width&&s[1]>0&&s[1]<=n.height&&!Qu(n,new ps(n.center.lat,90)),u[0]>0&&u[0]<=n.width&&u[1]>0&&u[1]<=n.height&&!Qu(n,new ps(n.center.lat,-90))]},c.polygonContainsPoint=ad,c.polygonIntersectsBox=ku,c.polygonIntersectsPolygon=Yo,c.polygonizeBounds=function(n,t,s=0,u=!0){const _=new rt(s,s),S=n.sub(_),O=t.add(_),F=[S,new rt(O.x,S.y),O,new rt(S.x,O.y)];return u&&F.push(S.clone()),F},c.posAttributes=Dl,c.postMapLoadEvent=nt,c.postPerformanceEvent=ei,c.postTurnstileEvent=ot,c.potpack=m,c.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},c.radToDeg=St,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.registerForPluginStateChange=function(n){return n({pluginStatus:C,pluginURL:o}),z.on("pluginStateChange",n),n},c.removeAuthState=function(n){Ki.delete(n)},c.renderColorRamp=hh,c.resample=wu,c.rotateX=Vd,c.rotateX$1=pu,c.rotateY=$d,c.rotateY$1=Wu,c.rotateZ=function(n,t,s){var u=Math.sin(s),_=Math.cos(s),S=t[0],O=t[1],F=t[2],H=t[3],q=t[4],se=t[5],ue=t[6],ge=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=S*_+q*u,n[1]=O*_+se*u,n[2]=F*_+ue*u,n[3]=H*_+ge*u,n[4]=q*_-S*u,n[5]=se*_-O*u,n[6]=ue*_-F*u,n[7]=ge*_-H*u,n},c.rotateZ$1=function(n,t,s){s*=.5;var u=t[0],_=t[1],S=t[2],O=t[3],F=Math.sin(s),H=Math.cos(s);return n[0]=u*H+_*F,n[1]=_*H-u*F,n[2]=S*H+O*F,n[3]=O*H-S*F,n},c.scale=pc,c.scale$1=Lh,c.scale$2=al,c.scaleAndAdd=Vc,c.set=function(n,t,s,u){return n[0]=t,n[1]=s,n[2]=u,n},c.setCacheLimits=function(n,t){cn=n,br=t},c.setColumn=function(n,t,s){n[4*t+0]=s[0],n[4*t+1]=s[1],n[4*t+2]=s[2],n[4*t+3]=s[3]},c.setRTLTextPlugin=function(n,t,s=!1){if(C===Pc||C===md||C===gd)throw new Error("setRTLTextPlugin cannot be called multiple times.");o=r.resolveURL(n),C=Pc,Ec=t,T(),s||K()},c.smoothstep=ki,c.spec=R,c.squaredLength=function(n){var t=n[0],s=n[1],u=n[2];return t*t+s*s+u*u},c.storeAuthState=function(n,t){t?Ki.add(n):Ki.delete(n)},c.sub=tc,c.subtract=vd,c.symbolSize=be,c.tileAABB=function(n,t,s,u,_,S,O,F,H){if("globe"===H.name)return function Op(n,t,s){const u=t/n.worldSize,_=n.globeMatrix;if(s.z<=1){const Fi=gc(s).getCorners();return Ju(Fi,_,u),Sa.fromPoints(Fi)}const S=_u(s),O=vu(S);Ju(O,_,u);const F=Number.MAX_VALUE,H=[-F,-F,-F],q=[F,F,F];if(S.contains(n.center)){for(const Sn of O)da(q,q,Sn),Nc(H,H,Sn);H[2]=0;const Fi=n.point,ln=[Fi.x*u,Fi.y*u,0];return da(q,q,ln),Nc(H,H,ln),new Sa(q,H)}const se=[_[12]*u,_[13]*u,_[14]*u],ue=S.getCenter(),ge=Ii(n.center.lat,-ha,ha),ke=Ii(ue.lat,-ha,ha),Ae=ic(n.center.lng),Ue=_c(ge);let pt=Ae-ic(ue.lng);const Rt=Ue-_c(ke);pt>.5?pt-=1:pt<-.5&&(pt+=1);let Xt=0;Math.abs(pt)>Math.abs(Rt)?Xt=pt>=0?1:3:(Xt=Rt>=0?0:2,Vc(se,se,[_[4]*u,_[5]*u,_[6]*u],-Math.sin(ti(Rt>=0?S.getSouth():S.getNorth()))*mc));const Lt=O[Xt],Wt=O[(Xt+1)%4],li=new Ip(Lt,Wt,se),si=[gu(li,0)||Lt[0],gu(li,1)||Lt[1],gu(li,2)||Lt[2]],Ni=wd(n.zoom);if(Ni>0){const Fi=function({x:Sn,y:Ui,z:un},hn,Cn,kn,sn){const Fn=1/(1<<un);let Kn=Sn*Fn,Bn=Kn+Fn,Nr=Ui*Fn,In=Nr+Fn,gr=0;const Vr=(Kn+Bn)/2-kn;return Vr>.5?gr=-1:Vr<-.5&&(gr=1),Kn=((Kn+gr)*hn-(kn*=hn))*Cn+kn,Bn=((Bn+gr)*hn-kn)*Cn+kn,Nr=(Nr*hn-(sn*=hn))*Cn+sn,In=(In*hn-sn)*Cn+sn,[[Kn,In,0],[Bn,In,0],[Bn,Nr,0],[Kn,Nr,0]]}(s,t,n._pixelsPerMercatorPixel,Ae,Ue);for(let Sn=0;Sn<O.length;Sn++)$c(O[Sn],Fi[Sn],Ni);const ln=ec([],Fi[Xt],Fi[(Xt+1)%4]);al(ln,ln,.5),$c(si,ln,Ni)}for(const Fi of O)da(q,q,Fi),Nc(H,H,Fi);return q[2]=Math.min(Lt[2],Wt[2]),da(q,q,si),Nc(H,H,si),new Sa(q,H)}(n,t,new cp(s,u,_));const q=qp({z:s,x:u,y:_},H);return new Sa([(S+q.x/q.scale)*t,t*(q.y/q.scale),O],[(S+q.x2/q.scale)*t,t*(q.y2/q.scale),F])},c.tileCornersToBounds=_u,c.tileTransform=qp,c.transformMat3=function(n,t,s){var u=t[0],_=t[1],S=t[2];return n[0]=u*s[0]+_*s[3]+S*s[6],n[1]=u*s[1]+_*s[4]+S*s[7],n[2]=u*s[2]+_*s[5]+S*s[8],n},c.transformMat4=Zs,c.transformMat4$1=rd,c.transformQuat=ju,c.transitionTileAABBinECEF=Ku,c.translate=Ql,c.transpose=function(n,t){if(n===t){var s=t[1],u=t[2],_=t[5];n[1]=t[3],n[2]=t[6],n[3]=s,n[5]=t[7],n[6]=u,n[7]=_}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n},c.triggerPluginCompletionEvent=f,c.uniqueId=di,c.updateGlobeVertexNormal=function(n,t,s,u,_){const S=5*t+2;n.float32[S+0]=s,n.float32[S+1]=u,n.float32[S+2]=_},c.validateCustomStyleLayer=function(n){const t=[],s=n.id;return void 0===s&&t.push({message:`layers.${s}: missing required property "id"`}),void 0===n.render&&t.push({message:`layers.${s}: missing required method "render"`}),n.renderingMode&&"2d"!==n.renderingMode&&"3d"!==n.renderingMode&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},c.validateFilter=n=>ya(Fl(n)),c.validateFog=n=>ya(Fr(n)),c.validateLayer=n=>ya(ne(n)),c.validateLight=n=>ya(Hn(n)),c.validateSource=n=>ya(Kt(n)),c.validateStyle=Lc,c.validateTerrain=n=>ya(Pr(n)),c.values=ji,c.vectorTile=Iu,c.version=Be,c.warnOnce=Bi,c.window=Z,c.wrap=Zi}),Mi(0,function(c){function Z(Ft){if("number"==typeof Ft||"boolean"==typeof Ft||"string"==typeof Ft||null==Ft)return JSON.stringify(Ft);if(Array.isArray(Ft)){let Qe="[";for(const Mt of Ft)Qe+=`${Z(Mt)},`;return`${Qe}]`}let Ze="{";for(const Qe of Object.keys(Ft).sort())Ze+=`${Qe}:${Z(Ft[Qe])},`;return`${Ze}}`}function Be(Ft){let Ze="";for(const Qe of c.refProperties)Ze+=`/${Z(Ft[Qe])}`;return Ze}class we{constructor(Ze){this.keyCache={},Ze&&this.replace(Ze)}replace(Ze){this._layerConfigs={},this._layers={},this.update(Ze,[])}update(Ze,Qe){for(const Tt of Ze)this._layerConfigs[Tt.id]=Tt,(this._layers[Tt.id]=c.createStyleLayer(Tt)).compileFilter(),this.keyCache[Tt.id]&&delete this.keyCache[Tt.id];for(const Tt of Qe)delete this.keyCache[Tt],delete this._layerConfigs[Tt],delete this._layers[Tt];this.familiesBySource={};const Mt=function(Tt,Zt){const Pt={};for(let ae=0;ae<Tt.length;ae++){const Ne=Zt&&Zt[Tt[ae].id]||Be(Tt[ae]);Zt&&(Zt[Tt[ae].id]=Ne);let et=Pt[Ne];et||(et=Pt[Ne]=[]),et.push(Tt[ae])}const Nt=[];for(const ae in Pt)Nt.push(Pt[ae]);return Nt}(c.values(this._layerConfigs),this.keyCache);for(const Tt of Mt){const Zt=Tt.map(Vt=>this._layers[Vt.id]),Pt=Zt[0];if("none"===Pt.visibility)continue;const Nt=Pt.source||"";let ae=this.familiesBySource[Nt];ae||(ae=this.familiesBySource[Nt]={});const Ne=Pt.sourceLayer||"_geojsonTileLayer";let et=ae[Ne];et||(et=ae[Ne]=[]),et.push(Zt)}}}class Se{loadTile(Ze,Qe){const{uid:Mt,encoding:Tt,rawImageData:Zt,padding:Pt,buildQuadTree:Nt}=Ze,ae=c.window.ImageBitmap&&Zt instanceof c.window.ImageBitmap?this.getImageData(Zt,Pt):Zt;Qe(null,new c.DEMData(Mt,ae,Tt,Pt<1,Nt))}getImageData(Ze,Qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ze.width,Ze.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Ze.width,this.offscreenCanvas.height=Ze.height,this.offscreenCanvasContext.drawImage(Ze,0,0,Ze.width,Ze.height);const Mt=this.offscreenCanvasContext.getImageData(-Qe,-Qe,Ze.width+2*Qe,Ze.height+2*Qe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Mt}}function Le(Ft,Ze){if(0!==Ft.length){Te(Ft[0],Ze);for(var Qe=1;Qe<Ft.length;Qe++)Te(Ft[Qe],!Ze)}}function Te(Ft,Ze){for(var Qe=0,Mt=0,Tt=0,Zt=Ft.length,Pt=Zt-1;Tt<Zt;Pt=Tt++){var Nt=(Ft[Tt][0]-Ft[Pt][0])*(Ft[Pt][1]+Ft[Tt][1]),ae=Qe+Nt;Mt+=Math.abs(Qe)>=Math.abs(Nt)?Qe-ae+Nt:Nt-ae+Qe,Qe=ae}Qe+Mt>=0!=!!Ze&&Ft.reverse()}var Ve=c.getDefaultExportFromCjs(function Ft(Ze,Qe){var Mt,Tt=Ze&&Ze.type;if("FeatureCollection"===Tt)for(Mt=0;Mt<Ze.features.length;Mt++)Ft(Ze.features[Mt],Qe);else if("GeometryCollection"===Tt)for(Mt=0;Mt<Ze.geometries.length;Mt++)Ft(Ze.geometries[Mt],Qe);else if("Feature"===Tt)Ft(Ze.geometry,Qe);else if("Polygon"===Tt)Le(Ze.coordinates,Qe);else if("MultiPolygon"===Tt)for(Mt=0;Mt<Ze.coordinates.length;Mt++)Le(Ze.coordinates[Mt],Qe);return Ze});const We=c.VectorTileFeature.prototype.toGeoJSON;var ut={exports:{}},vt=c.pointGeometry,tt=c.vectorTile.VectorTileFeature,ze=ct;function ct(Ft,Ze){this.options=Ze||{},this.features=Ft,this.length=Ft.length}function qt(Ft,Ze){this.id="number"==typeof Ft.id?Ft.id:void 0,this.type=Ft.type,this.rawGeometry=1===Ft.type?[Ft.geometry]:Ft.geometry,this.properties=Ft.tags,this.extent=Ze||4096}ct.prototype.feature=function(Ft){return new qt(this.features[Ft],this.options.extent)},qt.prototype.loadGeometry=function(){var Ft=this.rawGeometry;this.geometry=[];for(var Ze=0;Ze<Ft.length;Ze++){for(var Qe=Ft[Ze],Mt=[],Tt=0;Tt<Qe.length;Tt++)Mt.push(new vt(Qe[Tt][0],Qe[Tt][1]));this.geometry.push(Mt)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ft=this.geometry,Ze=1/0,Qe=-1/0,Mt=1/0,Tt=-1/0,Zt=0;Zt<Ft.length;Zt++)for(var Pt=Ft[Zt],Nt=0;Nt<Pt.length;Nt++){var ae=Pt[Nt];Ze=Math.min(Ze,ae.x),Qe=Math.max(Qe,ae.x),Mt=Math.min(Mt,ae.y),Tt=Math.max(Tt,ae.y)}return[Ze,Mt,Qe,Tt]},qt.prototype.toGeoJSON=tt.prototype.toGeoJSON;var Je=c.pbf,Jt=ze;function yi(Ft){var Ze=new Je;return function(Qe,Mt){for(var Tt in Qe.layers)Mt.writeMessage(3,rt,Qe.layers[Tt])}(Ft,Ze),Ze.finish()}function rt(Ft,Ze){var Qe;Ze.writeVarintField(15,Ft.version||1),Ze.writeStringField(1,Ft.name||""),Ze.writeVarintField(5,Ft.extent||4096);var Mt={keys:[],values:[],keycache:{},valuecache:{}};for(Qe=0;Qe<Ft.length;Qe++)Mt.feature=Ft.feature(Qe),Ze.writeMessage(2,bi,Mt);var Tt=Mt.keys;for(Qe=0;Qe<Tt.length;Qe++)Ze.writeStringField(3,Tt[Qe]);var Zt=Mt.values;for(Qe=0;Qe<Zt.length;Qe++)Ze.writeMessage(4,vi,Zt[Qe])}function bi(Ft,Ze){var Qe=Ft.feature;void 0!==Qe.id&&Ze.writeVarintField(1,Qe.id),Ze.writeMessage(2,ci,Ft),Ze.writeVarintField(3,Qe.type),Ze.writeMessage(4,pi,Qe)}function ci(Ft,Ze){var Qe=Ft.feature,Mt=Ft.keys,Tt=Ft.values,Zt=Ft.keycache,Pt=Ft.valuecache;for(var Nt in Qe.properties){var ae=Qe.properties[Nt],Ne=Zt[Nt];if(null!==ae){void 0===Ne&&(Mt.push(Nt),Zt[Nt]=Ne=Mt.length-1),Ze.writeVarint(Ne);var et=typeof ae;"string"!==et&&"boolean"!==et&&"number"!==et&&(ae=JSON.stringify(ae));var Vt=et+":"+ae,$t=Pt[Vt];void 0===$t&&(Tt.push(ae),Pt[Vt]=$t=Tt.length-1),Ze.writeVarint($t)}}}function ti(Ft,Ze){return(Ze<<3)+(7&Ft)}function St(Ft){return Ft<<1^Ft>>31}function pi(Ft,Ze){for(var Qe=Ft.loadGeometry(),Mt=Ft.type,Tt=0,Zt=0,Pt=Qe.length,Nt=0;Nt<Pt;Nt++){var ae=Qe[Nt],Ne=1;1===Mt&&(Ne=ae.length),Ze.writeVarint(ti(1,Ne));for(var et=3===Mt?ae.length-1:ae.length,Vt=0;Vt<et;Vt++){1===Vt&&1!==Mt&&Ze.writeVarint(ti(2,et-1));var $t=ae[Vt].x-Tt,Hi=ae[Vt].y-Zt;Ze.writeVarint(St($t)),Ze.writeVarint(St(Hi)),Tt+=$t,Zt+=Hi}3===Mt&&Ze.writeVarint(ti(7,1))}}function vi(Ft,Ze){var Qe=typeof Ft;"string"===Qe?Ze.writeStringField(1,Ft):"boolean"===Qe?Ze.writeBooleanField(7,Ft):"number"===Qe&&(Ft%1!=0?Ze.writeDoubleField(3,Ft):Ft<0?Ze.writeSVarintField(6,Ft):Ze.writeVarintField(5,Ft))}ut.exports=yi,ut.exports.fromVectorTileJs=yi,ut.exports.fromGeojsonVt=function(Ft,Ze){Ze=Ze||{};var Qe={};for(var Mt in Ft)Qe[Mt]=new Jt(Ft[Mt].features,Ze),Qe[Mt].name=Mt,Qe[Mt].version=Ze.version,Qe[Mt].extent=Ze.extent;return yi({layers:Qe})},ut.exports.GeoJSONWrapper=Jt;var Ti=c.getDefaultExportFromCjs(ut.exports);const Ji={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ft=>Ft},Ii=Math.fround||(ki=new Float32Array(1),Ft=>(ki[0]=+Ft,ki[0]));var ki;const Zi=3,pn=5,ji=6;class gn{constructor(Ze){this.options=Object.assign(Object.create(Ji),Ze),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ze){const{log:Qe,minZoom:Mt,maxZoom:Tt}=this.options;Qe&&console.time("total time");const Zt=`prepare ${Ze.length} points`;Qe&&console.time(Zt),this.points=Ze;const Pt=[];for(let ae=0;ae<Ze.length;ae++){const Ne=Ze[ae];if(!Ne.geometry)continue;const[et,Vt]=Ne.geometry.coordinates,$t=Ii(Wi(et)),Hi=Ii(_n(Vt));Pt.push($t,Hi,1/0,ae,-1,1),this.options.reduce&&Pt.push(0)}let Nt=this.trees[Tt+1]=this._createTree(Pt);Qe&&console.timeEnd(Zt);for(let ae=Tt;ae>=Mt;ae--){const Ne=+Date.now();Nt=this.trees[ae]=this._createTree(this._cluster(Nt,ae)),Qe&&console.log("z%d: %d clusters in %dms",ae,Nt.numItems,+Date.now()-Ne)}return Qe&&console.timeEnd("total time"),this}getClusters(Ze,Qe){let Mt=((Ze[0]+180)%360+360)%360-180;const Tt=Math.max(-90,Math.min(90,Ze[1]));let Zt=180===Ze[2]?180:((Ze[2]+180)%360+360)%360-180;const Pt=Math.max(-90,Math.min(90,Ze[3]));if(Ze[2]-Ze[0]>=360)Mt=-180,Zt=180;else if(Mt>Zt){const Vt=this.getClusters([Mt,Tt,180,Pt],Qe),$t=this.getClusters([-180,Tt,Zt,Pt],Qe);return Vt.concat($t)}const Nt=this.trees[this._limitZoom(Qe)],ae=Nt.range(Wi(Mt),_n(Pt),Wi(Zt),_n(Tt)),Ne=Nt.data,et=[];for(const Vt of ae){const $t=this.stride*Vt;et.push(Ne[$t+pn]>1?tn(Ne,$t,this.clusterProps):this.points[Ne[$t+Zi]])}return et}getChildren(Ze){const Qe=this._getOriginId(Ze),Mt=this._getOriginZoom(Ze),Tt="No cluster with the specified id.",Zt=this.trees[Mt];if(!Zt)throw new Error(Tt);const Pt=Zt.data;if(Qe*this.stride>=Pt.length)throw new Error(Tt);const Nt=this.options.radius/(this.options.extent*Math.pow(2,Mt-1)),ae=Zt.within(Pt[Qe*this.stride],Pt[Qe*this.stride+1],Nt),Ne=[];for(const et of ae){const Vt=et*this.stride;Pt[Vt+4]===Ze&&Ne.push(Pt[Vt+pn]>1?tn(Pt,Vt,this.clusterProps):this.points[Pt[Vt+Zi]])}if(0===Ne.length)throw new Error(Tt);return Ne}getLeaves(Ze,Qe,Mt){const Tt=[];return this._appendLeaves(Tt,Ze,Qe=Qe||10,Mt=Mt||0,0),Tt}getTile(Ze,Qe,Mt){const Tt=this.trees[this._limitZoom(Ze)],Zt=Math.pow(2,Ze),{extent:Pt,radius:Nt}=this.options,ae=Nt/Pt,Ne=(Mt-ae)/Zt,et=(Mt+1+ae)/Zt,Vt={features:[]};return this._addTileFeatures(Tt.range((Qe-ae)/Zt,Ne,(Qe+1+ae)/Zt,et),Tt.data,Qe,Mt,Zt,Vt),0===Qe&&this._addTileFeatures(Tt.range(1-ae/Zt,Ne,1,et),Tt.data,Zt,Mt,Zt,Vt),Qe===Zt-1&&this._addTileFeatures(Tt.range(0,Ne,ae/Zt,et),Tt.data,-1,Mt,Zt,Vt),Vt.features.length?Vt:null}getClusterExpansionZoom(Ze){let Qe=this._getOriginZoom(Ze)-1;for(;Qe<=this.options.maxZoom;){const Mt=this.getChildren(Ze);if(Qe++,1!==Mt.length)break;Ze=Mt[0].properties.cluster_id}return Qe}_appendLeaves(Ze,Qe,Mt,Tt,Zt){const Pt=this.getChildren(Qe);for(const Nt of Pt){const ae=Nt.properties;if(ae&&ae.cluster?Zt+ae.point_count<=Tt?Zt+=ae.point_count:Zt=this._appendLeaves(Ze,ae.cluster_id,Mt,Tt,Zt):Zt<Tt?Zt++:Ze.push(Nt),Ze.length===Mt)break}return Zt}_createTree(Ze){const Qe=new c.KDBush(Ze.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Mt=0;Mt<Ze.length;Mt+=this.stride)Qe.add(Ze[Mt],Ze[Mt+1]);return Qe.finish(),Qe.data=Ze,Qe}_addTileFeatures(Ze,Qe,Mt,Tt,Zt,Pt){for(const Nt of Ze){const ae=Nt*this.stride,Ne=Qe[ae+pn]>1;let et,Vt,$t;if(Ne)et=di(Qe,ae,this.clusterProps),Vt=Qe[ae],$t=Qe[ae+1];else{const At=this.points[Qe[ae+Zi]];et=At.properties;const[st,ot]=At.geometry.coordinates;Vt=Wi(st),$t=_n(ot)}const Hi={type:1,geometry:[[Math.round(this.options.extent*(Vt*Zt-Mt)),Math.round(this.options.extent*($t*Zt-Tt))]],tags:et};let wt;wt=Ne||this.options.generateId?Qe[ae+Zi]:this.points[Qe[ae+Zi]].id,void 0!==wt&&(Hi.id=wt),Pt.features.push(Hi)}}_limitZoom(Ze){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ze),this.options.maxZoom+1))}_cluster(Ze,Qe){const{radius:Mt,extent:Tt,reduce:Zt,minPoints:Pt}=this.options,Nt=Mt/(Tt*Math.pow(2,Qe)),ae=Ze.data,Ne=[],et=this.stride;for(let Vt=0;Vt<ae.length;Vt+=et){if(ae[Vt+2]<=Qe)continue;ae[Vt+2]=Qe;const $t=ae[Vt],Hi=ae[Vt+1],wt=Ze.within(ae[Vt],ae[Vt+1],Nt),At=ae[Vt+pn];let st=At;for(const ot of wt){const qe=ot*et;ae[qe+2]>Qe&&(st+=ae[qe+pn])}if(st>At&&st>=Pt){let ot,qe=$t*At,nt=Hi*At,It=-1;const ei=((Vt/et|0)<<5)+(Qe+1)+this.points.length;for(const Yi of wt){const Ei=Yi*et;if(ae[Ei+2]<=Qe)continue;ae[Ei+2]=Qe;const Ki=ae[Ei+pn];qe+=ae[Ei]*Ki,nt+=ae[Ei+1]*Ki,ae[Ei+4]=ei,Zt&&(ot||(ot=this._map(ae,Vt,!0),It=this.clusterProps.length,this.clusterProps.push(ot)),Zt(ot,this._map(ae,Ei)))}ae[Vt+4]=ei,Ne.push(qe/st,nt/st,1/0,ei,-1,st),Zt&&Ne.push(It)}else{for(let ot=0;ot<et;ot++)Ne.push(ae[Vt+ot]);if(st>1)for(const ot of wt){const qe=ot*et;if(!(ae[qe+2]<=Qe)){ae[qe+2]=Qe;for(let nt=0;nt<et;nt++)Ne.push(ae[qe+nt])}}}}return Ne}_getOriginId(Ze){return Ze-this.points.length>>5}_getOriginZoom(Ze){return(Ze-this.points.length)%32}_map(Ze,Qe,Mt){if(Ze[Qe+pn]>1){const Pt=this.clusterProps[Ze[Qe+ji]];return Mt?Object.assign({},Pt):Pt}const Tt=this.points[Ze[Qe+Zi]].properties,Zt=this.options.map(Tt);return Mt&&Zt===Tt?Object.assign({},Zt):Zt}}function tn(Ft,Ze,Qe){return{type:"Feature",id:Ft[Ze+Zi],properties:di(Ft,Ze,Qe),geometry:{type:"Point",coordinates:[(Mt=Ft[Ze],360*(Mt-.5)),Ln(Ft[Ze+1])]}};var Mt}function di(Ft,Ze,Qe){const Mt=Ft[Ze+pn],Tt=Mt>=1e4?`${Math.round(Mt/1e3)}k`:Mt>=1e3?Math.round(Mt/100)/10+"k":Mt,Zt=Ft[Ze+ji],Pt=-1===Zt?{}:Object.assign({},Qe[Zt]);return Object.assign(Pt,{cluster:!0,cluster_id:Ft[Ze+Zi],point_count:Mt,point_count_abbreviated:Tt})}function Wi(Ft){return Ft/360+.5}function _n(Ft){const Ze=Math.sin(Ft*Math.PI/180),Qe=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Qe<0?0:Qe>1?1:Qe}function Ln(Ft){const Ze=(180-360*Ft)*Math.PI/180;return 360*Math.atan(Math.exp(Ze))/Math.PI-90}function Gn(Ft,Ze,Qe,Mt){for(var Tt,Zt=Mt,Pt=Qe-Ze>>1,Nt=Qe-Ze,ae=Ft[Ze],Ne=Ft[Ze+1],et=Ft[Qe],Vt=Ft[Qe+1],$t=Ze+3;$t<Qe;$t+=3){var Hi=Yn(Ft[$t],Ft[$t+1],ae,Ne,et,Vt);if(Hi>Zt)Tt=$t,Zt=Hi;else if(Hi===Zt){var wt=Math.abs($t-Pt);wt<Nt&&(Tt=$t,Nt=wt)}}Zt>Mt&&(Tt-Ze>3&&Gn(Ft,Ze,Tt,Mt),Ft[Tt+2]=Zt,Qe-Tt>3&&Gn(Ft,Tt,Qe,Mt))}function Yn(Ft,Ze,Qe,Mt,Tt,Zt){var Pt=Tt-Qe,Nt=Zt-Mt;if(0!==Pt||0!==Nt){var ae=((Ft-Qe)*Pt+(Ze-Mt)*Nt)/(Pt*Pt+Nt*Nt);ae>1?(Qe=Tt,Mt=Zt):ae>0&&(Qe+=Pt*ae,Mt+=Nt*ae)}return(Pt=Ft-Qe)*Pt+(Nt=Ze-Mt)*Nt}function on(Ft,Ze,Qe,Mt){var Tt={id:void 0===Ft?null:Ft,type:Ze,geometry:Qe,tags:Mt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Zt){var Pt=Zt.geometry,Nt=Zt.type;if("Point"===Nt||"MultiPoint"===Nt||"LineString"===Nt)jt(Zt,Pt);else if("Polygon"===Nt||"MultiLineString"===Nt)for(var ae=0;ae<Pt.length;ae++)jt(Zt,Pt[ae]);else if("MultiPolygon"===Nt)for(ae=0;ae<Pt.length;ae++)for(var Ne=0;Ne<Pt[ae].length;Ne++)jt(Zt,Pt[ae][Ne])}(Tt),Tt}function jt(Ft,Ze){for(var Qe=0;Qe<Ze.length;Qe+=3)Ft.minX=Math.min(Ft.minX,Ze[Qe]),Ft.minY=Math.min(Ft.minY,Ze[Qe+1]),Ft.maxX=Math.max(Ft.maxX,Ze[Qe]),Ft.maxY=Math.max(Ft.maxY,Ze[Qe+1])}function gi(Ft,Ze,Qe,Mt){if(Ze.geometry){var Tt=Ze.geometry.coordinates,Zt=Ze.geometry.type,Pt=Math.pow(Qe.tolerance/((1<<Qe.maxZoom)*Qe.extent),2),Nt=[],ae=Ze.id;if(Qe.promoteId?ae=Ze.properties[Qe.promoteId]:Qe.generateId&&(ae=Mt||0),"Point"===Zt)V(Tt,Nt);else if("MultiPoint"===Zt)for(var Ne=0;Ne<Tt.length;Ne++)V(Tt[Ne],Nt);else if("LineString"===Zt)Bi(Tt,Nt,Pt,!1);else if("MultiLineString"===Zt){if(Qe.lineMetrics){for(Ne=0;Ne<Tt.length;Ne++)Bi(Tt[Ne],Nt=[],Pt,!1),Ft.push(on(ae,"LineString",Nt,Ze.properties));return}$i(Tt,Nt,Pt,!1)}else if("Polygon"===Zt)$i(Tt,Nt,Pt,!0);else{if("MultiPolygon"!==Zt){if("GeometryCollection"===Zt){for(Ne=0;Ne<Ze.geometry.geometries.length;Ne++)gi(Ft,{id:ae,geometry:Ze.geometry.geometries[Ne],properties:Ze.properties},Qe,Mt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ne=0;Ne<Tt.length;Ne++){var et=[];$i(Tt[Ne],et,Pt,!0),Nt.push(et)}}Ft.push(on(ae,Zt,Nt,Ze.properties))}}function V(Ft,Ze){Ze.push(en(Ft[0])),Ze.push(Xi(Ft[1])),Ze.push(0)}function Bi(Ft,Ze,Qe,Mt){for(var Tt,Zt,Pt=0,Nt=0;Nt<Ft.length;Nt++){var ae=en(Ft[Nt][0]),Ne=Xi(Ft[Nt][1]);Ze.push(ae),Ze.push(Ne),Ze.push(0),Nt>0&&(Pt+=Mt?(Tt*Ne-ae*Zt)/2:Math.sqrt(Math.pow(ae-Tt,2)+Math.pow(Ne-Zt,2))),Tt=ae,Zt=Ne}var et=Ze.length-3;Ze[2]=1,Gn(Ze,0,et,Qe),Ze[et+2]=1,Ze.size=Math.abs(Pt),Ze.start=0,Ze.end=Ze.size}function $i(Ft,Ze,Qe,Mt){for(var Tt=0;Tt<Ft.length;Tt++){var Zt=[];Bi(Ft[Tt],Zt,Qe,Mt),Ze.push(Zt)}}function en(Ft){return Ft/360+.5}function Xi(Ft){var Ze=Math.sin(Ft*Math.PI/180),Qe=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Qe<0?0:Qe>1?1:Qe}function Qi(Ft,Ze,Qe,Mt,Tt,Zt,Pt,Nt){if(Mt/=Ze,Zt>=(Qe/=Ze)&&Pt<Mt)return Ft;if(Pt<Qe||Zt>=Mt)return null;for(var ae=[],Ne=0;Ne<Ft.length;Ne++){var et=Ft[Ne],Vt=et.geometry,$t=et.type,Hi=0===Tt?et.minX:et.minY,wt=0===Tt?et.maxX:et.maxY;if(Hi>=Qe&&wt<Mt)ae.push(et);else if(!(wt<Qe||Hi>=Mt)){var At=[];if("Point"===$t||"MultiPoint"===$t)Pn(Vt,At,Qe,Mt,Tt);else if("LineString"===$t)fn(Vt,At,Qe,Mt,Tt,!1,Nt.lineMetrics);else if("MultiLineString"===$t)En(Vt,At,Qe,Mt,Tt,!1);else if("Polygon"===$t)En(Vt,At,Qe,Mt,Tt,!0);else if("MultiPolygon"===$t)for(var st=0;st<Vt.length;st++){var ot=[];En(Vt[st],ot,Qe,Mt,Tt,!0),ot.length&&At.push(ot)}if(At.length){if(Nt.lineMetrics&&"LineString"===$t){for(st=0;st<At.length;st++)ae.push(on(et.id,$t,At[st],et.tags));continue}"LineString"!==$t&&"MultiLineString"!==$t||(1===At.length?($t="LineString",At=At[0]):$t="MultiLineString"),"Point"!==$t&&"MultiPoint"!==$t||($t=3===At.length?"Point":"MultiPoint"),ae.push(on(et.id,$t,At,et.tags))}}}return ae.length?ae:null}function Pn(Ft,Ze,Qe,Mt,Tt){for(var Zt=0;Zt<Ft.length;Zt+=3){var Pt=Ft[Zt+Tt];Pt>=Qe&&Pt<=Mt&&(Ze.push(Ft[Zt]),Ze.push(Ft[Zt+1]),Ze.push(Ft[Zt+2]))}}function fn(Ft,Ze,Qe,Mt,Tt,Zt,Pt){for(var Nt,ae,Ne=Ci(Ft),et=0===Tt?cn:br,Vt=Ft.start,$t=0;$t<Ft.length-3;$t+=3){var Hi=Ft[$t],wt=Ft[$t+1],At=Ft[$t+2],st=Ft[$t+3],ot=Ft[$t+4],qe=0===Tt?Hi:wt,nt=0===Tt?st:ot,It=!1;Pt&&(Nt=Math.sqrt(Math.pow(Hi-st,2)+Math.pow(wt-ot,2))),qe<Qe?nt>Qe&&(ae=et(Ne,Hi,wt,st,ot,Qe),Pt&&(Ne.start=Vt+Nt*ae)):qe>Mt?nt<Mt&&(ae=et(Ne,Hi,wt,st,ot,Mt),Pt&&(Ne.start=Vt+Nt*ae)):Dn(Ne,Hi,wt,At),nt<Qe&&qe>=Qe&&(ae=et(Ne,Hi,wt,st,ot,Qe),It=!0),nt>Mt&&qe<=Mt&&(ae=et(Ne,Hi,wt,st,ot,Mt),It=!0),!Zt&&It&&(Pt&&(Ne.end=Vt+Nt*ae),Ze.push(Ne),Ne=Ci(Ft)),Pt&&(Vt+=Nt)}var ei=Ft.length-3;Hi=Ft[ei],wt=Ft[ei+1],At=Ft[ei+2],(qe=0===Tt?Hi:wt)>=Qe&&qe<=Mt&&Dn(Ne,Hi,wt,At),ei=Ne.length-3,Zt&&ei>=3&&(Ne[ei]!==Ne[0]||Ne[ei+1]!==Ne[1])&&Dn(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&Ze.push(Ne)}function Ci(Ft){var Ze=[];return Ze.size=Ft.size,Ze.start=Ft.start,Ze.end=Ft.end,Ze}function En(Ft,Ze,Qe,Mt,Tt,Zt){for(var Pt=0;Pt<Ft.length;Pt++)fn(Ft[Pt],Ze,Qe,Mt,Tt,Zt,!1)}function Dn(Ft,Ze,Qe,Mt){Ft.push(Ze),Ft.push(Qe),Ft.push(Mt)}function cn(Ft,Ze,Qe,Mt,Tt,Zt){var Pt=(Zt-Ze)/(Mt-Ze);return Ft.push(Zt),Ft.push(Qe+(Tt-Qe)*Pt),Ft.push(1),Pt}function br(Ft,Ze,Qe,Mt,Tt,Zt){var Pt=(Zt-Qe)/(Tt-Qe);return Ft.push(Ze+(Mt-Ze)*Pt),Ft.push(Zt),Ft.push(1),Pt}function wi(Ft,Ze){for(var Qe=[],Mt=0;Mt<Ft.length;Mt++){var Tt,Zt=Ft[Mt],Pt=Zt.type;if("Point"===Pt||"MultiPoint"===Pt||"LineString"===Pt)Tt=Jn(Zt.geometry,Ze);else if("MultiLineString"===Pt||"Polygon"===Pt){Tt=[];for(var Nt=0;Nt<Zt.geometry.length;Nt++)Tt.push(Jn(Zt.geometry[Nt],Ze))}else if("MultiPolygon"===Pt)for(Tt=[],Nt=0;Nt<Zt.geometry.length;Nt++){for(var ae=[],Ne=0;Ne<Zt.geometry[Nt].length;Ne++)ae.push(Jn(Zt.geometry[Nt][Ne],Ze));Tt.push(ae)}Qe.push(on(Zt.id,Pt,Tt,Zt.tags))}return Qe}function Jn(Ft,Ze){var Qe=[];Qe.size=Ft.size,void 0!==Ft.start&&(Qe.start=Ft.start,Qe.end=Ft.end);for(var Mt=0;Mt<Ft.length;Mt+=3)Qe.push(Ft[Mt]+Ze,Ft[Mt+1],Ft[Mt+2]);return Qe}function zn(Ft,Ze){if(Ft.transformed)return Ft;var Qe,Mt,Tt,Zt=1<<Ft.z,Pt=Ft.x,Nt=Ft.y;for(Qe=0;Qe<Ft.features.length;Qe++){var ae=Ft.features[Qe],Ne=ae.geometry,et=ae.type;if(ae.geometry=[],1===et)for(Mt=0;Mt<Ne.length;Mt+=2)ae.geometry.push(On(Ne[Mt],Ne[Mt+1],Ze,Zt,Pt,Nt));else for(Mt=0;Mt<Ne.length;Mt++){var Vt=[];for(Tt=0;Tt<Ne[Mt].length;Tt+=2)Vt.push(On(Ne[Mt][Tt],Ne[Mt][Tt+1],Ze,Zt,Pt,Nt));ae.geometry.push(Vt)}}return Ft.transformed=!0,Ft}function On(Ft,Ze,Qe,Mt,Tt,Zt){return[Math.round(Qe*(Ft*Mt-Tt)),Math.round(Qe*(Ze*Mt-Zt))]}function sr(Ft,Ze,Qe,Mt,Tt){for(var Zt=Ze===Tt.maxZoom?0:Tt.tolerance/((1<<Ze)*Tt.extent),Pt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qe,y:Mt,z:Ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Nt=0;Nt<Ft.length;Nt++){Pt.numFeatures++,fr(Pt,Ft[Nt],Zt,Tt);var ae=Ft[Nt].minX,Ne=Ft[Nt].minY,et=Ft[Nt].maxX,Vt=Ft[Nt].maxY;ae<Pt.minX&&(Pt.minX=ae),Ne<Pt.minY&&(Pt.minY=Ne),et>Pt.maxX&&(Pt.maxX=et),Vt>Pt.maxY&&(Pt.maxY=Vt)}return Pt}function fr(Ft,Ze,Qe,Mt){var Tt=Ze.geometry,Zt=Ze.type,Pt=[];if("Point"===Zt||"MultiPoint"===Zt)for(var Nt=0;Nt<Tt.length;Nt+=3)Pt.push(Tt[Nt]),Pt.push(Tt[Nt+1]),Ft.numPoints++,Ft.numSimplified++;else if("LineString"===Zt)Yr(Pt,Tt,Ft,Qe,!1,!1);else if("MultiLineString"===Zt||"Polygon"===Zt)for(Nt=0;Nt<Tt.length;Nt++)Yr(Pt,Tt[Nt],Ft,Qe,"Polygon"===Zt,0===Nt);else if("MultiPolygon"===Zt)for(var ae=0;ae<Tt.length;ae++){var Ne=Tt[ae];for(Nt=0;Nt<Ne.length;Nt++)Yr(Pt,Ne[Nt],Ft,Qe,!0,0===Nt)}if(Pt.length){var et=Ze.tags||null;if("LineString"===Zt&&Mt.lineMetrics){for(var Vt in et={},Ze.tags)et[Vt]=Ze.tags[Vt];et.mapbox_clip_start=Tt.start/Tt.size,et.mapbox_clip_end=Tt.end/Tt.size}var $t={geometry:Pt,type:"Polygon"===Zt||"MultiPolygon"===Zt?3:"LineString"===Zt||"MultiLineString"===Zt?2:1,tags:et};null!==Ze.id&&($t.id=Ze.id),Ft.features.push($t)}}function Yr(Ft,Ze,Qe,Mt,Tt,Zt){var Pt=Mt*Mt;if(Mt>0&&Ze.size<(Tt?Pt:Mt))Qe.numPoints+=Ze.length/3;else{for(var Nt=[],ae=0;ae<Ze.length;ae+=3)(0===Mt||Ze[ae+2]>Pt)&&(Qe.numSimplified++,Nt.push(Ze[ae]),Nt.push(Ze[ae+1])),Qe.numPoints++;Tt&&function(Ne,et){for(var Vt=0,$t=0,Hi=Ne.length,wt=Hi-2;$t<Hi;wt=$t,$t+=2)Vt+=(Ne[$t]-Ne[wt])*(Ne[$t+1]+Ne[wt+1]);if(Vt>0===et)for($t=0,Hi=Ne.length;$t<Hi/2;$t+=2){var At=Ne[$t],st=Ne[$t+1];Ne[$t]=Ne[Hi-2-$t],Ne[$t+1]=Ne[Hi-1-$t],Ne[Hi-2-$t]=At,Ne[Hi-1-$t]=st}}(Nt,Zt),Ft.push(Nt)}}function Nn(Ft,Ze){var Qe=(Ze=this.options=function(Tt,Zt){for(var Pt in Zt)Tt[Pt]=Zt[Pt];return Tt}(Object.create(this.options),Ze)).debug;if(Qe&&console.time("preprocess data"),Ze.maxZoom<0||Ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ze.promoteId&&Ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var Tt,Zt,Pt,Nt,ae,Ne,Mt=function(Tt,Zt){var Pt=[];if("FeatureCollection"===Tt.type)for(var Nt=0;Nt<Tt.features.length;Nt++)gi(Pt,Tt.features[Nt],Zt,Nt);else gi(Pt,"Feature"===Tt.type?Tt:{geometry:Tt},Zt);return Pt}(Ft,Ze);this.tiles={},this.tileCoords=[],Qe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ze.indexMaxZoom,Ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Nt=Tt=Mt,ae=Qi(Tt,1,-1-(Pt=(Zt=Ze).buffer/Zt.extent),Pt,0,-1,2,Zt),Ne=Qi(Tt,1,1-Pt,2+Pt,0,-1,2,Zt),(ae||Ne)&&(Nt=Qi(Tt,1,-Pt,1+Pt,0,-1,2,Zt)||[],ae&&(Nt=wi(ae,1).concat(Nt)),Ne&&(Nt=Nt.concat(wi(Ne,-1)))),(Mt=Nt).length&&this.splitTile(Mt,0,0,0),Qe&&(Mt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _r(Ft,Ze,Qe){return 32*((1<<Ft)*Qe+Ze)+Ft}function ur(Ft,Ze){const Qe=Ft.tileID.canonical;if(!this._geoJSONIndex)return Ze(null,null);const Mt=this._geoJSONIndex.getTile(Qe.z,Qe.x,Qe.y);if(!Mt)return Ze(null,null);const Tt=new class{constructor(Pt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=Pt.length,this._features=Pt}feature(Pt){return new class{constructor(Nt){this._feature=Nt,this.extent=c.EXTENT,this.type=Nt.type,this.properties=Nt.tags,"id"in Nt&&!isNaN(Nt.id)&&(this.id=parseInt(Nt.id,10))}loadGeometry(){if(1===this._feature.type){const Nt=[];for(const ae of this._feature.geometry)Nt.push([new c.Point(ae[0],ae[1])]);return Nt}{const Nt=[];for(const ae of this._feature.geometry){const Ne=[];for(const et of ae)Ne.push(new c.Point(et[0],et[1]));Nt.push(Ne)}return Nt}}toGeoJSON(Nt,ae,Ne){return We.call(this,Nt,ae,Ne)}}(this._features[Pt])}}(Mt.features);let Zt=Ti(Tt);0===Zt.byteOffset&&Zt.byteLength===Zt.buffer.byteLength||(Zt=new Uint8Array(Zt)),Ze(null,{vectorTile:Tt,rawData:Zt.buffer})}Nn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Nn.prototype.splitTile=function(Ft,Ze,Qe,Mt,Tt,Zt,Pt){for(var Nt=[Ft,Ze,Qe,Mt],ae=this.options,Ne=ae.debug;Nt.length;){Mt=Nt.pop(),Qe=Nt.pop(),Ze=Nt.pop(),Ft=Nt.pop();var et=1<<Ze,Vt=_r(Ze,Qe,Mt),$t=this.tiles[Vt];if(!$t&&(Ne>1&&console.time("creation"),$t=this.tiles[Vt]=sr(Ft,Ze,Qe,Mt,ae),this.tileCoords.push({z:Ze,x:Qe,y:Mt}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ze,Qe,Mt,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var Hi="z"+Ze;this.stats[Hi]=(this.stats[Hi]||0)+1,this.total++}if($t.source=Ft,Tt){if(Ze===ae.maxZoom||Ze===Tt)continue;var wt=1<<Tt-Ze;if(Qe!==Math.floor(Zt/wt)||Mt!==Math.floor(Pt/wt))continue}else if(Ze===ae.indexMaxZoom||$t.numPoints<=ae.indexMaxPoints)continue;if($t.source=null,0!==Ft.length){Ne>1&&console.time("clipping");var At,st,ot,qe,nt,It,ei=.5*ae.buffer/ae.extent,Yi=.5-ei,Ei=.5+ei,Ki=1+ei;At=st=ot=qe=null,nt=Qi(Ft,et,Qe-ei,Qe+Ei,0,$t.minX,$t.maxX,ae),It=Qi(Ft,et,Qe+Yi,Qe+Ki,0,$t.minX,$t.maxX,ae),Ft=null,nt&&(At=Qi(nt,et,Mt-ei,Mt+Ei,1,$t.minY,$t.maxY,ae),st=Qi(nt,et,Mt+Yi,Mt+Ki,1,$t.minY,$t.maxY,ae),nt=null),It&&(ot=Qi(It,et,Mt-ei,Mt+Ei,1,$t.minY,$t.maxY,ae),qe=Qi(It,et,Mt+Yi,Mt+Ki,1,$t.minY,$t.maxY,ae),It=null),Ne>1&&console.timeEnd("clipping"),Nt.push(At||[],Ze+1,2*Qe,2*Mt),Nt.push(st||[],Ze+1,2*Qe,2*Mt+1),Nt.push(ot||[],Ze+1,2*Qe+1,2*Mt),Nt.push(qe||[],Ze+1,2*Qe+1,2*Mt+1)}}},Nn.prototype.getTile=function(Ft,Ze,Qe){var Mt=this.options,Tt=Mt.extent,Zt=Mt.debug;if(Ft<0||Ft>24)return null;var Pt=1<<Ft,Nt=_r(Ft,Ze=(Ze%Pt+Pt)%Pt,Qe);if(this.tiles[Nt])return zn(this.tiles[Nt],Tt);Zt>1&&console.log("drilling down to z%d-%d-%d",Ft,Ze,Qe);for(var ae,Ne=Ft,et=Ze,Vt=Qe;!ae&&Ne>0;)Ne--,et=Math.floor(et/2),Vt=Math.floor(Vt/2),ae=this.tiles[_r(Ne,et,Vt)];return ae&&ae.source?(Zt>1&&console.log("found parent tile z%d-%d-%d",Ne,et,Vt),Zt>1&&console.time("drilling down"),this.splitTile(ae.source,Ne,et,Vt,Ft,Ze,Qe),Zt>1&&console.timeEnd("drilling down"),this.tiles[Nt]?zn(this.tiles[Nt],Tt):null):null};class mr extends c.VectorTileWorkerSource{constructor(Ze,Qe,Mt,Tt,Zt){super(Ze,Qe,Mt,Tt,ur),Zt&&(this.loadGeoJSON=Zt)}loadData(Ze,Qe){const Mt=Ze&&Ze.request,Tt=Mt&&Mt.collectResourceTiming;this.loadGeoJSON(Ze,(Zt,Pt)=>{if(Zt||!Pt)return Qe(Zt);if("object"!=typeof Pt)return Qe(new Error(`Input data given to '${Ze.source}' is not a valid GeoJSON object.`));{Ve(Pt,!0);try{if(Ze.filter){const ae=c.createExpression(Ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ae.result)throw new Error(ae.value.map(et=>`${et.key}: ${et.message}`).join(", "));Pt={type:"FeatureCollection",features:Pt.features.filter(et=>ae.value.evaluate({zoom:0},et))}}this._geoJSONIndex=Ze.cluster?new gn(function({superclusterOptions:ae,clusterProperties:Ne}){if(!Ne||!ae)return ae;const et={},Vt={},$t={accumulated:null,zoom:0},Hi={properties:null},wt=Object.keys(Ne);for(const At of wt){const[st,ot]=Ne[At],qe=c.createExpression(ot),nt=c.createExpression("string"==typeof st?[st,["accumulated"],["get",At]]:st);et[At]=qe.value,Vt[At]=nt.value}return ae.map=At=>{Hi.properties=At;const st={};for(const ot of wt)st[ot]=et[ot].evaluate($t,Hi);return st},ae.reduce=(At,st)=>{Hi.properties=st;for(const ot of wt)$t.accumulated=At[ot],At[ot]=Vt[ot].evaluate($t,Hi)},ae}(Ze)).load(Pt.features):new Nn(ae=Pt,Ze.geojsonVtOptions)}catch(ae){return Qe(ae)}this.loaded={};const Nt={};if(Tt){const ae=c.getPerformanceMeasurement(Mt);ae&&(Nt.resourceTiming={},Nt.resourceTiming[Ze.source]=JSON.parse(JSON.stringify(ae)))}Qe(null,Nt)}var ae})}reloadTile(Ze,Qe){const Mt=this.loaded;return Mt&&Mt[Ze.uid]?super.reloadTile(Ze,Qe):this.loadTile(Ze,Qe)}loadGeoJSON(Ze,Qe){if(Ze.request)c.getJSON(Ze.request,Qe);else{if("string"!=typeof Ze.data)return Qe(new Error(`Input data given to '${Ze.source}' is not a valid GeoJSON object.`));try{return Qe(null,JSON.parse(Ze.data))}catch{return Qe(new Error(`Input data given to '${Ze.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Ze,Qe){try{Qe(null,this._geoJSONIndex.getClusterExpansionZoom(Ze.clusterId))}catch(Mt){Qe(Mt)}}getClusterChildren(Ze,Qe){try{Qe(null,this._geoJSONIndex.getChildren(Ze.clusterId))}catch(Mt){Qe(Mt)}}getClusterLeaves(Ze,Qe){try{Qe(null,this._geoJSONIndex.getLeaves(Ze.clusterId,Ze.limit,Ze.offset))}catch(Mt){Qe(Mt)}}}class kr{constructor(Ze){this.self=Ze,this.actor=new c.Actor(Ze,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=c.getProjection({name:"mercator"}),this.workerSourceTypes={vector:c.VectorTileWorkerSource,geojson:mr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Qe,Mt)=>{if(this.workerSourceTypes[Qe])throw new Error(`Worker source with name "${Qe}" already registered.`);this.workerSourceTypes[Qe]=Mt},this.self.registerRTLTextPlugin=Qe=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=Qe.applyArabicShaping,c.plugin.processBidirectionalText=Qe.processBidirectionalText,c.plugin.processStyledBidirectionalText=Qe.processStyledBidirectionalText}}clearCaches(Ze,Qe,Mt){delete this.layerIndexes[Ze],delete this.availableImages[Ze],delete this.workerSources[Ze],delete this.demWorkerSources[Ze],Mt()}checkIfReady(Ze,Qe,Mt){Mt()}setReferrer(Ze,Qe){this.referrer=Qe}spriteLoaded(Ze,Qe){this.isSpriteLoaded[Ze]=Qe;for(const Mt in this.workerSources[Ze]){const Tt=this.workerSources[Ze][Mt];for(const Zt in Tt)Tt[Zt]instanceof c.VectorTileWorkerSource&&(Tt[Zt].isSpriteLoaded=Qe,Tt[Zt].fire(new c.Event("isSpriteLoaded")))}}setImages(Ze,Qe,Mt){this.availableImages[Ze]=Qe;for(const Tt in this.workerSources[Ze]){const Zt=this.workerSources[Ze][Tt];for(const Pt in Zt)Zt[Pt].availableImages=Qe}Mt()}enableTerrain(Ze,Qe,Mt){this.terrain=Qe,Mt()}setProjection(Ze,Qe){this.projections[Ze]=c.getProjection(Qe)}setLayers(Ze,Qe,Mt){this.getLayerIndex(Ze).replace(Qe),Mt()}updateLayers(Ze,Qe,Mt){this.getLayerIndex(Ze).update(Qe.layers,Qe.removedIds),Mt()}loadTile(Ze,Qe,Mt){const Tt=this.enableTerrain?c.extend({enableTerrain:this.terrain},Qe):Qe;Tt.projection=this.projections[Ze]||this.defaultProjection,this.getWorkerSource(Ze,Qe.type,Qe.source).loadTile(Tt,Mt)}loadDEMTile(Ze,Qe,Mt){const Tt=this.enableTerrain?c.extend({buildQuadTree:this.terrain},Qe):Qe;this.getDEMWorkerSource(Ze,Qe.source).loadTile(Tt,Mt)}reloadTile(Ze,Qe,Mt){const Tt=this.enableTerrain?c.extend({enableTerrain:this.terrain},Qe):Qe;Tt.projection=this.projections[Ze]||this.defaultProjection,this.getWorkerSource(Ze,Qe.type,Qe.source).reloadTile(Tt,Mt)}abortTile(Ze,Qe,Mt){this.getWorkerSource(Ze,Qe.type,Qe.source).abortTile(Qe,Mt)}removeTile(Ze,Qe,Mt){this.getWorkerSource(Ze,Qe.type,Qe.source).removeTile(Qe,Mt)}removeSource(Ze,Qe,Mt){if(!this.workerSources[Ze]||!this.workerSources[Ze][Qe.type]||!this.workerSources[Ze][Qe.type][Qe.source])return;const Tt=this.workerSources[Ze][Qe.type][Qe.source];delete this.workerSources[Ze][Qe.type][Qe.source],void 0!==Tt.removeSource?Tt.removeSource(Qe,Mt):Mt()}loadWorkerSource(Ze,Qe,Mt){try{this.self.importScripts(Qe.url),Mt()}catch(Tt){Mt(Tt.toString())}}syncRTLPluginState(Ze,Qe,Mt){try{c.plugin.setState(Qe);const Tt=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&null!=Tt){this.self.importScripts(Tt);const Zt=c.plugin.isParsed();Mt(Zt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Tt}`),Zt)}}catch(Tt){Mt(Tt.toString())}}getAvailableImages(Ze){let Qe=this.availableImages[Ze];return Qe||(Qe=[]),Qe}getLayerIndex(Ze){let Qe=this.layerIndexes[Ze];return Qe||(Qe=this.layerIndexes[Ze]=new we),Qe}getWorkerSource(Ze,Qe,Mt){return this.workerSources[Ze]||(this.workerSources[Ze]={}),this.workerSources[Ze][Qe]||(this.workerSources[Ze][Qe]={}),this.workerSources[Ze][Qe][Mt]||(this.workerSources[Ze][Qe][Mt]=new this.workerSourceTypes[Qe]({send:(Zt,Pt,Nt,ae,Ne,et)=>{this.actor.send(Zt,Pt,Nt,Ze,Ne,et)},scheduler:this.actor.scheduler},this.getLayerIndex(Ze),this.getAvailableImages(Ze),this.isSpriteLoaded[Ze])),this.workerSources[Ze][Qe][Mt]}getDEMWorkerSource(Ze,Qe){return this.demWorkerSources[Ze]||(this.demWorkerSources[Ze]={}),this.demWorkerSources[Ze][Qe]||(this.demWorkerSources[Ze][Qe]=new Se),this.demWorkerSources[Ze][Qe]}enforceCacheSizeLimit(Ze,Qe){c.enforceCacheSizeLimit(Qe)}getWorkerPerformanceMetrics(Ze,Qe,Mt){Mt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new kr(self)),kr}),Mi(0,function(c){function Z(C,o){if(Array.isArray(C)){if(!Array.isArray(o)||C.length!==o.length)return!1;for(let f=0;f<C.length;f++)if(!Z(C[f],o[f]))return!1;return!0}if("object"==typeof C&&null!==C&&null!==o){if("object"!=typeof o||Object.keys(C).length!==Object.keys(o).length)return!1;for(const f in C)if(!Z(C[f],o[f]))return!1;return!0}return C===o}var Be=we;function we(C){return o=C,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var T,z,B=new Blob([""],{type:"text/javascript"}),K=URL.createObjectURL(B);try{z=new Worker(K),T=!0}catch{T=!1}return z&&z.terminate(),URL.revokeObjectURL(K),T}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var T=document.createElement("canvas");T.width=T.height=1;var z=T.getContext("2d");if(!z)return!1;var B=z.getImageData(0,0,1,1);return B&&B.width===T.width}()||(void 0===Se[f=o&&o.failIfMajorPerformanceCaveat]&&(Se[f]=function(T){var z,K,ie,le,B=(K=T,ie=document.createElement("canvas"),(le=Object.create(we.webGLContextAttributes)).failIfMajorPerformanceCaveat=K,ie.getContext("webgl",le)||ie.getContext("experimental-webgl",le));if(!B)return!1;try{z=B.createShader(B.VERTEX_SHADER)}catch{return!1}return!(!z||B.isContextLost())&&(B.shaderSource(z,"void main() {}"),B.compileShader(z),!0===B.getShaderParameter(z,B.COMPILE_STATUS))}(f)),!Se[f]||document.documentMode));var o,f}var Se={};function Le(C,o,f){const T=c.window.document.createElement(C);return void 0!==o&&(T.className=o),f&&f.appendChild(T),T}function Te(C,o,f){const T=c.window.document.createElementNS("http://www.w3.org/2000/svg",C);for(const z of Object.keys(o))T.setAttributeNS(null,z,o[z]);return f&&f.appendChild(T),T}we.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Ve=c.window.document&&c.window.document.documentElement.style,We=Ve&&void 0!==Ve.userSelect?"userSelect":"WebkitUserSelect";let ut;function vt(){Ve&&We&&(ut=Ve[We],Ve[We]="none")}function tt(){Ve&&We&&(Ve[We]=ut)}function ze(C){C.preventDefault(),C.stopPropagation(),c.window.removeEventListener("click",ze,!0)}function ct(){c.window.addEventListener("click",ze,!0),c.window.setTimeout(()=>{c.window.removeEventListener("click",ze,!0)},0)}function qt(C,o){const f=C.getBoundingClientRect();return yi(C,f,o)}function Je(C,o){const f=C.getBoundingClientRect(),T=[];for(let z=0;z<o.length;z++)T.push(yi(C,f,o[z]));return T}function Jt(C){return void 0!==c.window.InstallTrigger&&2===C.button&&C.ctrlKey&&c.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:C.button}function yi(C,o,f){const T=C.offsetWidth===o.width?1:C.offsetWidth/o.width;return new c.Point((f.clientX-o.left)*T,(f.clientY-o.top)*T)}function rt(C,o){var f=o[0],T=o[1],z=o[2],B=o[3],K=f*B-z*T;return K?(C[0]=B*(K=1/K),C[1]=-T*K,C[2]=-z*K,C[3]=f*K,C):null}function bi(C){const{userImage:o}=C;return!!(o&&o.render&&o.render())&&(C.data.replace(new Uint8Array(o.data.buffer)),!0)}class ci extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,callback:T}of this.requestors)this._notify(f,T);this.requestors=[]}}hasImage(o){return!!this.getImage(o)}getImage(o){return this.images[o]}addImage(o,f){this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let T=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),T=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),T=!1),this._validateContent(f.content,f)||(this.fire(new c.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),T=!1),T}_validateStretch(o,f){if(!o)return!0;let T=0;for(const z of o){if(z[0]<T||z[1]<z[0]||f<z[1])return!1;T=z[1]}return!0}_validateContent(o,f){return!(o&&(4!==o.length||o[0]<0||f.data.width<o[0]||o[1]<0||f.data.height<o[1]||o[2]<0||f.data.width<o[2]||o[3]<0||f.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,f){f.version=this.images[o].version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,f){let T=!0;if(!this.isLoaded())for(const z of o)this.images[z]||(T=!1);this.isLoaded()||T?this._notify(o,f):this.requestors.push({ids:o,callback:f})}_notify(o,f){const T={};for(const z of o){this.images[z]||this.fire(new c.Event("styleimagemissing",{id:z}));const B=this.images[z];B?T[z]={data:B.data.clone(),pixelRatio:B.pixelRatio,sdf:B.sdf,version:B.version,stretchX:B.stretchX,stretchY:B.stretchY,content:B.content,hasRenderCallback:!(!B.userImage||!B.userImage.render)}:c.warnOnce(`Image "${z}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,T)}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],T=this.getImage(o);if(!T)return null;if(f&&f.position.version===T.version)return f.position;if(f)f.position.version=T.version;else{const z={w:T.data.width+2,h:T.data.height+2,x:0,y:0},B=new c.ImagePosition(z,T);this.patterns[o]={bin:z,position:B}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.Texture(o,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const B in this.patterns)o.push(this.patterns[B].bin);const{w:f,h:T}=c.potpack(o),z=this.atlasImage;z.resize({width:f||1,height:T||1});for(const B in this.patterns){const{bin:K}=this.patterns[B],ie=K.x+1,le=K.y+1,ve=this.images[B].data,_e=ve.width,Pe=ve.height;c.RGBAImage.copy(ve,z,{x:0,y:0},{x:ie,y:le},{width:_e,height:Pe}),c.RGBAImage.copy(ve,z,{x:0,y:Pe-1},{x:ie,y:le-1},{width:_e,height:1}),c.RGBAImage.copy(ve,z,{x:0,y:0},{x:ie,y:le+Pe},{width:_e,height:1}),c.RGBAImage.copy(ve,z,{x:_e-1,y:0},{x:ie-1,y:le},{width:1,height:Pe}),c.RGBAImage.copy(ve,z,{x:0,y:0},{x:ie+_e,y:le},{width:1,height:Pe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const T=this.images[f];bi(T)&&this.updateImage(f,T)}}}const ti=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(C,o){return function([f,T,z]){const B=c.degToRad(T+90),K=c.degToRad(z);return{x:f*Math.cos(B)*Math.sin(K),y:f*Math.sin(B)*Math.sin(K),z:f*Math.cos(K),azimuthal:T,polar:z}}(C.expression.evaluate(o))}interpolate(C,o,f){return{x:c.number(C.x,o.x,f),y:c.number(C.y,o.y,f),z:c.number(C.z,o.z,f),azimuthal:c.number(C.azimuthal,o.azimuthal,f),polar:c.number(C.polar,o.polar,f)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)});class St extends c.Evented{constructor(o){super(),this._transitionable=new c.Transitionable(ti),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(c.validateLight,o,f))for(const T in o){const z=o[T];c.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),z):this._transitionable.setValue(T,z)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,T){return(!T||!1!==T.validate)&&c.emitValidationErrors(this,o.call(c.validateStyle,c.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}const pi=new c.Properties({source:new c.DataConstantProperty(c.spec.terrain.source),exaggeration:new c.DataConstantProperty(c.spec.terrain.exaggeration)});let vi=class extends c.Evented{constructor(C,o){super(),this._transitionable=new c.Transitionable(pi),this.set(C),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(C){for(const o in C){const f=C[o];c.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-11),f):this._transitionable.setValue(o,f)}}updateTransitions(C){this._transitioning=this._transitionable.transitioned(C,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(C){this.properties=this._transitioning.possiblyEvaluate(C)}};function Ti(C,o,f,T){const z=c.smoothstep(45,65,f),[B,K]=Ji(C,T),ie=c.length(o);let le=1-Math.min(1,Math.exp((ie-B)/(K-B)*-6));return le*=le*le,le=Math.min(1,1.00747*le),le*z*C.alpha}function Ji(C,o){const f=.5/Math.tan(.5*o);return[C.range[0]+f,C.range[1]+f]}const Ii=new c.Properties({range:new c.DataConstantProperty(c.spec.fog.range),color:new c.DataConstantProperty(c.spec.fog.color),"high-color":new c.DataConstantProperty(c.spec.fog["high-color"]),"space-color":new c.DataConstantProperty(c.spec.fog["space-color"]),"horizon-blend":new c.DataConstantProperty(c.spec.fog["horizon-blend"]),"star-intensity":new c.DataConstantProperty(c.spec.fog["star-intensity"])});class ki extends c.Evented{constructor(o,f){super(),this._transitionable=new c.Transitionable(Ii),this.set(o),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const o=this._transform,f="globe"===o.projection.name,T=c.globeToMercatorTransition(o.zoom),z=this.properties.get("range"),B=[.5,3];return{range:f?[c.number(B[0],z[0],T),c.number(B[1],z[1],T)]:z,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,f={}){if(!this._validate(c.validateFog,o,f)){for(const T of Object.keys(c.spec.fog))o&&void 0===o[T]&&(o[T]=c.spec.fog[T].default);for(const T in o){const z=o[T];c.endsWith(T,"-transition")?this._transitionable.setTransition(T.slice(0,-11),z):this._transitionable.setValue(T,z)}}}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:c.smoothstep(45,65,o))*f.a}getOpacityAtLatLng(o,f){return this._transform.projection.supportsFog?function(T,z,B){const K=c.MercatorCoordinate.fromLngLat(z),ie=B.elevation?B.elevation.getAtPointOrZero(K):0,le=[K.x,K.y,ie];return c.transformMat4(le,le,B.mercatorFogMatrix),Ti(T,le,B.pitch,B._fov)}(this.state,o,f):0}getFovAdjustedRange(o){return this._transform.projection.supportsFog?Ji(this.state,o):[0,1]}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,T){return(!T||!1!==T.validate)&&c.emitValidationErrors(this,o.call(c.validateStyle,c.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class Zi{constructor(o,f){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const T=this.workerPool.acquire(this.id);for(let z=0;z<T.length;z++){const B=new Zi.Actor(T[z],f,this.id);B.name=`Worker ${z}`,this.actors.push(B)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,f,T){c.asyncAll(this.actors,(z,B)=>{z.send(o,f,B)},T=T||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function pn(C,o,f){return o*(c.EXTENT/(C.tileSize*Math.pow(2,f-C.tileID.overscaledZ)))}Zi.Actor=c.Actor;class ji{constructor(o,f,T,z){this.screenBounds=o,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=T,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,z)}static createFromScreenPoints(o,f){let T,z;if(o instanceof c.Point||"number"==typeof o[0]){const B=c.Point.convert(o);T=[B],z=f.isPointAboveHorizon(B)}else{const B=c.Point.convert(o[0]),K=c.Point.convert(o[1]);T=[B,K],z=c.polygonizeBounds(B,K).every(ie=>f.isPointAboveHorizon(ie))}return new ji(T,f.getCameraPoint(),z,f)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(o){return c.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const f=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new c.Point(1,1)):this.screenBounds[1],z=c.polygonizeBounds(f,T,0,!1);return this.cameraPoint.y>T.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<T.x?z.splice(3,0,this.cameraPoint):this.cameraPoint.x>=T.x?z[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(z[3]=this.cameraPoint)),c.bufferConvexPolygon(z,o)}bufferedCameraGeometryGlobe(o){const f=this.screenBounds[0],T=1===this.screenBounds.length?this.screenBounds[0].add(new c.Point(1,1)):this.screenBounds[1],z=c.polygonizeBounds(f,T,o),B=this.cameraPoint.clone();switch(3*((B.y>f.y)+(B.y>T.y))+((B.x>f.x)+(B.x>T.x))){case 0:z[0]=B,z[4]=B.clone();break;case 1:z.splice(1,0,B);break;case 2:z[1]=B;break;case 3:z.splice(4,0,B);break;case 5:z.splice(2,0,B);break;case 6:z[3]=B;break;case 7:z.splice(3,0,B);break;case 8:z[2]=B}return z}containsTile(o,f,T,z=0){const B=o.queryPadding/f._pixelsPerMercatorPixel+1,K=T?this._bufferedCameraMercator(B,f):this._bufferedScreenMercator(B,f);let ie=o.tileID.wrap+(K.unwrapped?z:0);const le=K.polygon.map(kt=>c.getTilePoint(o.tileTransform,kt,ie));if(!c.polygonIntersectsBox(le,0,0,c.EXTENT,c.EXTENT))return;ie=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?z:0);const ve=this.screenGeometryMercator.polygon.map(kt=>c.getTileVec3(o.tileTransform,kt,ie)),_e=ve.map(kt=>new c.Point(kt[0],kt[1])),Pe=f.getFreeCameraOptions().position||new c.MercatorCoordinate(0,0,0),at=c.getTileVec3(o.tileTransform,Pe,ie),gt=ve.map(kt=>{const Ge=c.sub(kt,kt,at);return c.normalize(Ge,Ge),new c.Ray(at,Ge)}),mt=pn(o,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:_e,tilespaceRays:gt,bufferedTilespaceGeometry:le,bufferedTilespaceBounds:(xt=c.getBounds(le),xt.min.x=c.clamp(xt.min.x,0,c.EXTENT),xt.min.y=c.clamp(xt.min.y,0,c.EXTENT),xt.max.x=c.clamp(xt.max.x,0,c.EXTENT),xt.max.y=c.clamp(xt.max.y,0,c.EXTENT),xt),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:mt};var xt}_bufferedScreenMercator(o,f){const T=di(o);if(this._screenRaycastCache[T])return this._screenRaycastCache[T];{let z;return z="globe"===f.projection.name?this._projectAndResample(this.bufferedScreenGeometry(o),f):{polygon:this.bufferedScreenGeometry(o).map(B=>f.pointCoordinate3D(B)),unwrapped:!0},this._screenRaycastCache[T]=z,z}}_bufferedCameraMercator(o,f){const T=di(o);if(this._cameraRaycastCache[T])return this._cameraRaycastCache[T];{let z;return z="globe"===f.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),f):{polygon:this.bufferedCameraGeometry(o).map(B=>f.pointCoordinate3D(B)),unwrapped:!0},this._cameraRaycastCache[T]=z,z}}_projectAndResample(o,f){const T=function(B,K){const ie=c.multiply([],K.pixelMatrix,K.globeMatrix),le=[0,-c.GLOBE_RADIUS,0,1],ve=[0,c.GLOBE_RADIUS,0,1],_e=[0,0,0,1];c.transformMat4$1(le,le,ie),c.transformMat4$1(ve,ve,ie),c.transformMat4$1(_e,_e,ie);const Pe=new c.Point(le[0]/le[3],le[1]/le[3]),at=new c.Point(ve[0]/ve[3],ve[1]/ve[3]),gt=c.polygonContainsPoint(B,Pe)&&le[3]<_e[3],mt=c.polygonContainsPoint(B,at)&&ve[3]<_e[3];if(!gt&&!mt)return null;const xt=function(ni,mi,fi){for(let Ai=1;Ai<ni.length;Ai++){const yn=tn(mi.pointCoordinate3D(ni[Ai-1]).x),Oi=tn(mi.pointCoordinate3D(ni[Ai]).x);if(fi<0){if(yn<Oi)return{idx:Ai,t:-yn/(Oi-1-yn)}}else if(Oi<yn)return{idx:Ai,t:(1-yn)/(Oi+1-yn)}}return null}(B,K,gt?-1:1);if(!xt)return null;const{idx:kt,t:Ge}=xt;let ft=kt>1?gn(B.slice(0,kt),K):[],Dt=kt<B.length?gn(B.slice(kt),K):[];ft=ft.map(ni=>new c.Point(tn(ni.x),ni.y)),Dt=Dt.map(ni=>new c.Point(tn(ni.x),ni.y));const Bt=[...ft];0===Bt.length&&Bt.push(Dt[Dt.length-1]);const Qt=c.number(Bt[Bt.length-1].y,(0===Dt.length?ft[0]:Dt[0]).y,Ge);let oi;return oi=gt?[new c.Point(0,Qt),new c.Point(0,0),new c.Point(1,0),new c.Point(1,Qt)]:[new c.Point(1,Qt),new c.Point(1,1),new c.Point(0,1),new c.Point(0,Qt)],Bt.push(...oi),0===Dt.length?Bt.push(ft[0]):Bt.push(...Dt),{polygon:Bt.map(ni=>new c.MercatorCoordinate(ni.x,ni.y)),unwrapped:!1}}(o,f);if(T)return T;const z=function(B,K){let ie=!1,le=-1/0,ve=0;for(let Pe=0;Pe<B.length-1;Pe++)B[Pe].x>le&&(le=B[Pe].x,ve=Pe);for(let Pe=0;Pe<B.length-1;Pe++){const at=(ve+Pe)%(B.length-1),gt=B[at],mt=B[at+1];Math.abs(gt.x-mt.x)>.5&&(gt.x<mt.x?(gt.x+=1,0===at&&(B[B.length-1].x+=1)):(mt.x+=1,at+1===B.length-1&&(B[0].x+=1)),ie=!0)}const _e=c.mercatorXfromLng(K.center.lng);return ie&&_e<Math.abs(_e-1)&&B.forEach(Pe=>{Pe.x-=1}),{polygon:B,unwrapped:ie}}(gn(o,f).map(B=>new c.Point(tn(B.x),B.y)),f);return{polygon:z.polygon.map(B=>new c.MercatorCoordinate(B.x,B.y)),unwrapped:z.unwrapped}}}function gn(C,o){return c.resample(C,f=>{const T=o.pointCoordinate3D(f);f.x=T.x,f.y=T.y},1/256)}function tn(C){return C<0?1+C%1:C%1}function di(C){return 100*C|0}function Wi(C,o,f,T,z){const B=function(K,ie){if(K)return z(K);if(ie){C.url&&ie.tiles&&C.tiles&&delete C.tiles;const le=c.pick(c.extend(ie,C),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ie.vector_layers&&(le.vectorLayers=ie.vector_layers,le.vectorLayerIds=le.vectorLayers.map(ve=>ve.id)),le.tiles=o.canonicalizeTileset(le,C.url),z(null,le)}};return C.url?c.getJSON(o.transformRequest(o.normalizeSourceURL(C.url,null,f,T),c.ResourceType.Source),B):c.exported.frame(()=>B(null,C))}class _n{constructor(o,f,T){this.bounds=c.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=T||24}validateBounds(o){return Array.isArray(o)&&4===o.length?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),T=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*f),z=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*f),B=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*f),K=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*f);return o.x>=T&&o.x<B&&o.y>=z&&o.y<K}}class Ln{constructor(o,f,T){this.context=o;const z=o.gl;this.buffer=z.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),z.bufferData(z.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Gn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Yn{constructor(o,f,T,z){this.length=f.length,this.attributes=T,this.itemSize=f.bytesPerElement,this.dynamicDraw=z,this.context=o;const B=o.gl;this.buffer=B.createBuffer(),o.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let T=0;T<this.attributes.length;T++){const z=f.attributes[this.attributes[T].name];void 0!==z&&o.enableVertexAttribArray(z)}}setVertexAttribPointers(o,f,T){for(let z=0;z<this.attributes.length;z++){const B=this.attributes[z],K=f.attributes[B.name];void 0!==K&&o.vertexAttribPointer(K,B.components,o[Gn[B.type]],!1,this.itemSize,B.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class on{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class jt extends on{getDefault(){return c.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class gi extends on{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class V extends on{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class Bi extends on{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class $i extends on{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class en extends on{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Xi extends on{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Qi extends on{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Pn extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class fn extends on{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class Ci extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class En extends on{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Dn extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class cn extends on{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class br extends on{getDefault(){return c.Color.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class wi extends on{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class Jn extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class zn extends on{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class On extends on{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let sr,fr=class extends on{getDefault(){return null}set(C){(C!==this.current||this.dirty)&&(this.gl.useProgram(C),this.current=C,this.dirty=!1)}};class Yr extends on{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Nn extends on{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class _r extends on{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class ur extends on{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class mr extends on{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class kr extends on{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ft extends on{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ze extends on{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class Qe extends on{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Mt extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Tt extends on{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Zt extends on{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Pt extends Zt{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Nt extends Zt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ae extends Nt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ne{constructor(o,f,T,z){this.context=o,this.width=f,this.height=T;const B=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new Pt(o,B),z&&(this.depthAttachment=new Nt(o,B))}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const T=this.depthAttachment.get();T&&o.deleteRenderbuffer(T)}o.deleteFramebuffer(this.framebuffer)}}class et{constructor(o,f=!1){if(this.gl=o,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const T=o;this.extVertexArrayObject={createVertexArrayOES:T.createVertexArray.bind(o),deleteVertexArrayOES:T.deleteVertexArray.bind(o),bindVertexArrayOES:T.bindVertexArray.bind(o)}}this.clearColor=new jt(this),this.clearDepth=new gi(this),this.clearStencil=new V(this),this.colorMask=new Bi(this),this.depthMask=new $i(this),this.stencilMask=new en(this),this.stencilFunc=new Xi(this),this.stencilOp=new Qi(this),this.stencilTest=new Pn(this),this.depthRange=new fn(this),this.depthTest=new Ci(this),this.depthFunc=new En(this),this.blend=new Dn(this),this.blendFunc=new cn(this),this.blendColor=new br(this),this.blendEquation=new wi(this),this.cullFace=new Jn(this),this.cullFaceSide=new zn(this),this.frontFace=new On(this),this.program=new fr(this),this.activeTexture=new Yr(this),this.viewport=new Nn(this),this.bindFramebuffer=new _r(this),this.bindRenderbuffer=new ur(this),this.bindTexture=new mr(this),this.bindVertexBuffer=new kr(this),this.bindElementBuffer=new Ft(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ze(this),this.pixelStoreUnpack=new Qe(this),this.pixelStoreUnpackPremultiplyAlpha=new Mt(this),this.pixelStoreUnpackFlipY=new Tt(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=o.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&o.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||o.getExtension("OES_standard_derivatives"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new Ln(this,o,f)}createVertexBuffer(o,f,T){return new Yn(this,o,f,T)}createRenderbuffer(o,f,T){const z=this.gl,B=z.createRenderbuffer();return this.bindRenderbuffer.set(B),z.renderbufferStorage(z.RENDERBUFFER,o,f,T),this.bindRenderbuffer.set(null),B}createFramebuffer(o,f,T){return new Ne(this,o,f,T)}clear({color:o,depth:f,stencil:T}){const z=this.gl;let B=0;o&&(B|=z.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==f&&(B|=z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),void 0!==T&&(B|=z.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),z.clear(B)}setCullFace(o){!1===o.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){Z(o.blendFunction,c.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Vt extends c.Evented{constructor(o,f,T,z){if(super(),this.id=o,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(f,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(z),this._tileWorkers={},this._deduped=new c.DedupedRequest}load(o){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,T=this.map._worldview;this._tileJSONRequest=Wi(this._options,this.map._requestManager,f,T,(z,B)=>{this._tileJSONRequest=null,this._loaded=!0,z?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),T&&2!==T.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${T}`),this.fire(new c.ErrorEvent(z))):B&&(c.extend(this,B),B.bounds&&(this.tileBounds=new _n(B.bounds,this.minzoom,this.maxzoom)),c.postTurnstileEvent(B.tiles,this.map._requestManager._customAccessToken),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(z)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return c.extend({},this._options)}loadTile(o,f){const T=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),z={request:this.map._requestManager.transformRequest(T,c.ResourceType.Tile),data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:c.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile};if(z.request.collectResourceTiming=this._collectResourceTiming,o.actor&&"expired"!==o.state)"loading"===o.state?o.reloadCallback=f:o.request=o.actor.send("reloadTile",z,B.bind(this));else if(o.actor=this._tileWorkers[T]=this._tileWorkers[T]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",z,B.bind(this),void 0,!0);else{const K=c.loadVectorTile.call({deduped:this._deduped},z,(ie,le)=>{ie||!le?B.call(this,ie):(z.data={cacheControl:le.cacheControl,expires:le.expires,rawData:le.rawData.slice(0)},o.actor&&o.actor.send("loadTile",z,B.bind(this),void 0,!0))},!0);o.request={cancel:K}}function B(K,ie){return delete o.request,o.aborted?f(null):K&&404!==K.status?f(K):(ie&&ie.resourceTiming&&(o.resourceTiming=ie.resourceTiming),this.map._refreshExpiredTiles&&ie&&o.setExpiryData(ie),o.loadVectorData(ie,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id})}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class $t extends c.Evented{constructor(o,f,T,z){super(),this.id=o,this.dispatcher=T,this.setEventedParent(z),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},f),c.extend(this,c.pick(f,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Wi(this._options,this.map._requestManager,null,null,(f,T)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new c.ErrorEvent(f)):T&&(c.extend(this,T),T.bounds&&(this.tileBounds=new _n(T.bounds,this.minzoom,this.maxzoom)),c.postTurnstileEvent(T.tiles),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(f)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return c.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,f){const T=c.exported.devicePixelRatio>=2,z=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),T,this.tileSize);o.request=c.getImage(this.map._requestManager.transformRequest(z,c.ResourceType.Tile),(B,K,ie,le)=>(delete o.request,o.aborted?(o.state="unloaded",f(null)):B?(o.state="errored",f(B)):K?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:ie,expires:le}),o.setTexture(K,this.map.painter),o.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(o,f,T){o.setTexture(f,T)}static unloadTileData(o,f){o.texture&&f.saveTileTexture(o.texture)}abortTile(o,f){o.request&&(o.request.cancel(),delete o.request),f()}unloadTile(o,f){o.texture&&this.map.painter.saveTileTexture(o.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Hi(C,o,f,T,z,B,K,ie){const le=[C,f,z,o,T,B,1,1,1],ve=[K,ie,1],_e=c.adjoint([],le),[Pe,at,gt]=c.transformMat3(ve,ve,c.transpose(_e,_e));return c.multiply$1(le,[Pe,0,0,0,at,0,0,0,gt],le)}class wt extends c.Evented{constructor(o,f,T,z){super(),this.id=o,this.dispatcher=T,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(z),this.options=f,this._dirty=!1}load(o,f){this._loaded=f||!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(T,z)=>{if(this._imageRequest=null,this._loaded=!0,T)this.fire(new c.ErrorEvent(T));else if(z){const{HTMLImageElement:B}=c.window;this.image=z instanceof B?c.exported.getImageData(z):z,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading()}})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(o){this.coordinates=o,this._boundsArray=void 0;const f=o.map(c.MercatorCoordinate.fromLngLat);return this.tileID=function(T){let z=1/0,B=1/0,K=-1/0,ie=-1/0;for(const Pe of T)z=Math.min(z,Pe.x),B=Math.min(B,Pe.y),K=Math.max(K,Pe.x),ie=Math.max(ie,Pe.y);const le=Math.max(K-z,ie-B),ve=Math.max(0,Math.floor(-Math.log(le)/Math.LN2)),_e=Math.pow(2,ve);return new c.CanonicalTileID(ve,Math.floor((z+K)/2*_e),Math.floor((B+ie)/2*_e))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(o){for(const le in this.tiles){const ve=this.tiles[le];"loaded"!==ve.state&&(ve.state="loaded",ve.texture=this.texture)}if(this._boundsArray)return;const f=c.tileTransform(this.tileID,this.map.transform.projection),[T,z,B,K]=this.coordinates.map(le=>{const ve=f.projection.project(le[0],le[1]);return c.getTilePoint(f,ve)._round()});this.perspectiveTransform=function(le,ve,_e,Pe,at,gt,mt,xt,kt,Ge){const ft=Hi(0,0,le,0,0,ve,le,ve),Dt=Hi(_e,Pe,at,gt,mt,xt,kt,Ge);return c.multiply$1(Dt,c.adjoint(ft,ft),Dt),[Dt[6]/Dt[8]*le/c.EXTENT,Dt[7]/Dt[8]*ve/c.EXTENT]}(this.width,this.height,T.x,T.y,z.x,z.y,K.x,K.y,B.x,B.y);const ie=this._boundsArray=new c.StructArrayLayout4i8;ie.emplaceBack(T.x,T.y,0,0),ie.emplaceBack(z.x,z.y,c.EXTENT,0),ie.emplaceBack(K.x,K.y,0,c.EXTENT),ie.emplaceBack(B.x,B.y,c.EXTENT,c.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=o.createVertexBuffer(ie,c.boundsAttributes.members),this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const o=this.map.painter.context,f=o.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new c.Texture(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(o)}loadTile(o,f){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},f(null)):(o.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const At={vector:Vt,raster:$t,"raster-dem":class extends $t{constructor(C,o,f,T){super(C,o,f,T),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(C,o){const f=this.map._requestManager.normalizeTileURL(C.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function T(z,B){z&&(C.state="errored",o(z)),B&&(C.dem=B,C.dem.onDeserialize(),C.needsHillshadePrepare=!0,C.needsDEMTextureUpload=!0,C.state="loaded",o(null))}C.request=c.getImage(this.map._requestManager.transformRequest(f,c.ResourceType.Tile),function(z,B,K,ie){if(delete C.request,C.aborted)C.state="unloaded",o(null);else if(z)C.state="errored",o(z);else if(B){this.map._refreshExpiredTiles&&C.setExpiryData({cacheControl:K,expires:ie});const le=c.window.ImageBitmap&&B instanceof c.window.ImageBitmap&&(null==sr&&(sr=c.window.OffscreenCanvas&&new c.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof c.window.createImageBitmap),sr),ve=1-(B.width-c.prevPowerOfTwo(B.width))/2;ve<1||C.neighboringTiles||(C.neighboringTiles=this._getNeighboringTiles(C.tileID));const _e=le?B:c.exported.getImageData(B,ve),Pe={uid:C.uid,coord:C.tileID,source:this.id,rawImageData:_e,encoding:this.encoding,padding:ve};C.actor&&"expired"!==C.state||(C.actor=this.dispatcher.getActor(),C.actor.send("loadDEMTile",Pe,T.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(C){const o=C.canonical,f=Math.pow(2,o.z),T=(o.x-1+f)%f,z=0===o.x?C.wrap-1:C.wrap,B=(o.x+1+f)%f,K=o.x+1===f?C.wrap+1:C.wrap,ie={};return ie[new c.OverscaledTileID(C.overscaledZ,z,o.z,T,o.y).key]={backfilled:!1},ie[new c.OverscaledTileID(C.overscaledZ,K,o.z,B,o.y).key]={backfilled:!1},o.y>0&&(ie[new c.OverscaledTileID(C.overscaledZ,z,o.z,T,o.y-1).key]={backfilled:!1},ie[new c.OverscaledTileID(C.overscaledZ,C.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},ie[new c.OverscaledTileID(C.overscaledZ,K,o.z,B,o.y-1).key]={backfilled:!1}),o.y+1<f&&(ie[new c.OverscaledTileID(C.overscaledZ,z,o.z,T,o.y+1).key]={backfilled:!1},ie[new c.OverscaledTileID(C.overscaledZ,C.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},ie[new c.OverscaledTileID(C.overscaledZ,K,o.z,B,o.y+1).key]={backfilled:!1}),ie}unloadTile(C){C.demTexture&&this.map.painter.saveTileTexture(C.demTexture),C.fbo&&(C.fbo.destroy(),delete C.fbo),C.dem&&delete C.dem,delete C.neighboringTiles,C.state="unloaded"}},geojson:class extends c.Evented{constructor(C,o,f,T){super(),this.id=C,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(T),this._data=o.data,this._options=c.extend({},o),this._collectResourceTiming=o.collectResourceTiming,void 0!==o.maxzoom&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const z=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(void 0!==o.buffer?o.buffer:128)*z,tolerance:(void 0!==o.tolerance?o.tolerance:.375)*z,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:void 0!==o.clusterMaxZoom?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:c.EXTENT,radius:(void 0!==o.clusterRadius?o.clusterRadius:50)*z,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}onAdd(C){this.map=C,this.setData(this._data)}setData(C){return this._data=C,this._updateWorkerData(),this}getClusterExpansionZoom(C,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:C,source:this.id},o),this}getClusterChildren(C,o){return this.actor.send("geojson.getClusterChildren",{clusterId:C,source:this.id},o),this}getClusterLeaves(C,o,f,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:C,limit:o,offset:f},T),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new c.Event("dataloading",{dataType:"source"})),this._loaded=!1;const C=c.extend({},this.workerOptions),o=this._data;"string"==typeof o?(C.request=this.map._requestManager.transformRequest(c.exported.resolveURL(o),c.ResourceType.Source),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,C,(f,T)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new c.ErrorEvent(f));else{const z={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&T&&T.resourceTiming&&T.resourceTiming[this.id]&&(z.resourceTiming=T.resourceTiming[this.id]),this.fire(new c.Event("data",z)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(C,o){const f=C.actor?"reloadTile":"loadTile";C.actor=this.actor,C.request=this.actor.send(f,{type:this.type,uid:C.uid,tileID:C.tileID,tileZoom:C.tileZoom,zoom:C.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(T,z)=>(delete C.request,C.unloadVectorData(),C.aborted?o(null):T?o(T):(C.loadVectorData(z,this.map.painter,"reloadTile"===f),o(null))),void 0,"loadTile"===f)}abortTile(C){C.request&&(C.request.cancel(),delete C.request),C.aborted=!0}unloadTile(C){C.unloadVectorData(),this.actor.send("removeTile",{uid:C.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends wt{constructor(C,o,f,T){super(C,o,f,T),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const C=this.options;this.urls=[];for(const o of C.urls)this.urls.push(this.map._requestManager.transformRequest(o,c.ResourceType.Source).url);c.getVideo(this.urls,(o,f)=>{this._loaded=!0,o?this.fire(new c.ErrorEvent(o)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(C){if(this.video){const o=this.video.seekable;C<o.start(0)||C>o.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=C}}getVideo(){return this.video}onAdd(C){this.map||(this.map=C,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const C=this.map.painter.context,o=C.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new c.Texture(C,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(C)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:wt,canvas:class extends wt{constructor(C,o,f,T){super(C,o,f,T),o.coordinates?Array.isArray(o.coordinates)&&4===o.coordinates.length&&!o.coordinates.some(z=>!Array.isArray(z)||2!==z.length||z.some(B=>"number"!=typeof B))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${C}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${C}`,null,'missing required property "coordinates"'))),o.animate&&"boolean"!=typeof o.animate&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${C}`,null,'optional "animate" property must be a boolean value'))),o.canvas?"string"==typeof o.canvas||o.canvas instanceof c.window.HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${C}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${C}`,null,'missing required property "canvas"'))),this.options=o,this.animate=void 0===o.animate||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof c.window.HTMLCanvasElement?this.options.canvas:c.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(C){this.map=C,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let C=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,C=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,C=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const o=this.map.painter.context;this.texture?(C||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new c.Texture(o,this.canvas,o.gl.RGBA,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const C of[this.canvas.width,this.canvas.height])if(isNaN(C)||C<=0)return!0;return!1}},custom:class extends c.Evented{constructor(C,o,f,T){super(),this.id=C,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=o,this.setEventedParent(T),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new c.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new c.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new _n(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),c.extend(this,c.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return c.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(C){this._map=C,this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(C),this.load()}onRemove(C){this._implementation.onRemove&&this._implementation.onRemove(C)}hasTile(C){if(this._implementation.hasTile){const{x:o,y:f,z:T}=C.canonical;return this._implementation.hasTile({x:o,y:f,z:T})}return!this.tileBounds||this.tileBounds.contains(C.canonical)}loadTile(C,o){const{x:f,y:T,z}=C.tileID.canonical,B=new c.window.AbortController;C.request=Promise.resolve(this._implementation.loadTile({x:f,y:T,z},{signal:B.signal})).then(function(K){return delete C.request,C.aborted?(C.state="unloaded",o(null)):void 0===K?(C.state="errored",o(null)):null===K?(this.loadTileData(C,{width:this.tileSize,height:this.tileSize,data:null}),C.state="loaded",o(null)):(ie=K)instanceof c.window.ImageData||ie instanceof c.window.HTMLCanvasElement||ie instanceof c.window.ImageBitmap||ie instanceof c.window.HTMLImageElement?(this.loadTileData(C,K),C.state="loaded",void o(null)):(C.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var ie}.bind(this)).catch(K=>{20!==K.code&&(C.state="errored",o(K))}),C.request.cancel=()=>B.abort()}loadTileData(C,o){$t.loadTileData(C,o,this._map.painter)}unloadTileData(C){$t.unloadTileData(C,this._map.painter)}unloadTile(C,o){if(this.unloadTileData(C),this._implementation.unloadTile){const{x:f,y:T,z}=C.tileID.canonical;this._implementation.unloadTile({x:f,y:T,z})}o()}abortTile(C,o){C.request&&C.request.cancel&&(C.request.cancel(),delete C.request),o()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(C=>({x:C.canonical.x,y:C.canonical.y,z:C.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"}))}}},st=function(C,o,f,T){const z=new At[o.type](C,o,f,T);if(z.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${z.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],z),z};function ot(C,o){const f=c.identity([]);return c.scale(f,f,[.5*C.width,.5*-C.height,1]),c.translate(f,f,[1,-1,0]),c.multiply(f,f,C.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(f)}function qe(C,o,f,T,z,B,K,ie=!1){const le=C.tilesIn(T,K,ie);le.sort(It);const ve=[];for(const Pe of le)ve.push({wrappedTileID:Pe.tile.tileID.wrapped().key,queryResults:Pe.tile.queryRenderedFeatures(o,f,C._state,Pe,z,B,ot(C.transform,Pe.tile.tileID),ie)});const _e=function(Pe){const at={},gt={};for(const mt of Pe){const xt=mt.queryResults,kt=mt.wrappedTileID,Ge=gt[kt]=gt[kt]||{};for(const ft in xt){const Dt=xt[ft],Bt=Ge[ft]=Ge[ft]||{},Qt=at[ft]=at[ft]||[];for(const oi of Dt)Bt[oi.featureIndex]||(Bt[oi.featureIndex]=!0,Qt.push(oi))}}return at}(ve);for(const Pe in _e)_e[Pe].forEach(at=>{const gt=at.feature,mt=gt.layer;mt&&"background"!==mt.type&&"sky"!==mt.type&&(gt.source=mt.source,mt["source-layer"]&&(gt.sourceLayer=mt["source-layer"]),gt.state=void 0!==gt.id?C.getFeatureState(mt["source-layer"],gt.id):{})});return _e}function nt(C,o){const f=C.getRenderableIds().map(B=>C.getTileByID(B)),T=[],z={};for(let B=0;B<f.length;B++){const K=f[B],ie=K.tileID.canonical.key;z[ie]||(z[ie]=!0,K.querySourceFeatures(T,o))}return T}function It(C,o){const f=C.tileID,T=o.tileID;return f.overscaledZ-T.overscaledZ||f.canonical.y-T.canonical.y||f.wrap-T.wrap||f.canonical.x-T.canonical.x}function ei(){return null!=Ec.workerClass?new Ec.workerClass:new c.window.Worker(Ec.workerUrl)}const Yi="mapboxgl_preloaded_worker_pool";class Ei{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Ei.workerCount;)this.workers.push(new ei);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],0===this.numActive()&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Yi]}numActive(){return Object.keys(this.active).length}}let Ki;function Ct(){return Ki||(Ki=new Ei),Ki}function Ot(C,o){const f={};for(const T in C)"ref"!==T&&(f[T]=C[T]);return c.refProperties.forEach(T=>{T in o&&(f[T]=o[T])}),f}function xe(C){C=C.slice();const o=Object.create(null);for(let f=0;f<C.length;f++)o[C[f].id]=C[f];for(let f=0;f<C.length;f++)"ref"in C[f]&&(C[f]=Ot(C[f],o[C[f].ref]));return C}Ei.workerCount=2;const bt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Yt(C,o,f){f.push({command:bt.addSource,args:[C,o[C]]})}function Xe(C,o,f){o.push({command:bt.removeSource,args:[C]}),f[C]=!0}function Ut(C,o,f,T){Xe(C,f,T),Yt(C,o,f)}function pe(C,o,f){let T;for(T in C[f])if(C[f].hasOwnProperty(T)&&"data"!==T&&!Z(C[f][T],o[f][T]))return!1;for(T in o[f])if(o[f].hasOwnProperty(T)&&"data"!==T&&!Z(C[f][T],o[f][T]))return!1;return!0}function i(C,o,f,T,z,B){let K;for(K in o=o||{},C=C||{})C.hasOwnProperty(K)&&(Z(C[K],o[K])||f.push({command:B,args:[T,K,o[K],z]}));for(K in o)o.hasOwnProperty(K)&&!C.hasOwnProperty(K)&&(Z(C[K],o[K])||f.push({command:B,args:[T,K,o[K],z]}))}function r(C){return C.id}function d(C,o){return C[o.id]=o,C}class g{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(1===this.points.length)return this.points[0];o=c.clamp(o,0,1);let f=1,T=this._distances[f];const z=o*this.paddedLength+this.padding;for(;T<z&&f<this._distances.length;)T=this._distances[++f];const B=f-1,K=this._distances[B],ie=T-K,le=ie>0?(z-K)/ie:0;return this.points[B].mult(1-le).add(this.points[f].mult(le))}}class x{constructor(o,f,T){const z=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(o/T),this.yCellCount=Math.ceil(f/T);for(let K=0;K<this.xCellCount*this.yCellCount;K++)z.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,T,z,B){this._forEachCell(f,T,z,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(T),this.bboxes.push(z),this.bboxes.push(B)}insertCircle(o,f,T,z){this._forEachCell(f-z,T-z,f+z,T+z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(T),this.circles.push(z)}_insertBoxCell(o,f,T,z,B,K){this.boxCells[B].push(K)}_insertCircleCell(o,f,T,z,B,K){this.circleCells[B].push(K)}_query(o,f,T,z,B,K){if(T<0||o>this.width||z<0||f>this.height)return!B&&[];const ie=[];if(o<=0&&f<=0&&this.width<=T&&this.height<=z){if(B)return!0;for(let le=0;le<this.boxKeys.length;le++)ie.push({key:this.boxKeys[le],x1:this.bboxes[4*le],y1:this.bboxes[4*le+1],x2:this.bboxes[4*le+2],y2:this.bboxes[4*le+3]});for(let le=0;le<this.circleKeys.length;le++){const ve=this.circles[3*le],_e=this.circles[3*le+1],Pe=this.circles[3*le+2];ie.push({key:this.circleKeys[le],x1:ve-Pe,y1:_e-Pe,x2:ve+Pe,y2:_e+Pe})}return K?ie.filter(K):ie}return this._forEachCell(o,f,T,z,this._queryCell,ie,{hitTest:B,seenUids:{box:{},circle:{}}},K),B?ie.length>0:ie}_queryCircle(o,f,T,z,B){const K=o-T,ie=o+T,le=f-T,ve=f+T;if(ie<0||K>this.width||ve<0||le>this.height)return!z&&[];const _e=[];return this._forEachCell(K,le,ie,ve,this._queryCellCircle,_e,{hitTest:z,circle:{x:o,y:f,radius:T},seenUids:{box:{},circle:{}}},B),z?_e.length>0:_e}query(o,f,T,z,B){return this._query(o,f,T,z,!1,B)}hitTest(o,f,T,z,B){return this._query(o,f,T,z,!0,B)}hitTestCircle(o,f,T,z){return this._queryCircle(o,f,T,!0,z)}_queryCell(o,f,T,z,B,K,ie,le){const ve=ie.seenUids,_e=this.boxCells[B];if(null!==_e){const at=this.bboxes;for(const gt of _e)if(!ve.box[gt]){ve.box[gt]=!0;const mt=4*gt;if(o<=at[mt+2]&&f<=at[mt+3]&&T>=at[mt+0]&&z>=at[mt+1]&&(!le||le(this.boxKeys[gt]))){if(ie.hitTest)return K.push(!0),!0;K.push({key:this.boxKeys[gt],x1:at[mt],y1:at[mt+1],x2:at[mt+2],y2:at[mt+3]})}}}const Pe=this.circleCells[B];if(null!==Pe){const at=this.circles;for(const gt of Pe)if(!ve.circle[gt]){ve.circle[gt]=!0;const mt=3*gt;if(this._circleAndRectCollide(at[mt],at[mt+1],at[mt+2],o,f,T,z)&&(!le||le(this.circleKeys[gt]))){if(ie.hitTest)return K.push(!0),!0;{const xt=at[mt],kt=at[mt+1],Ge=at[mt+2];K.push({key:this.circleKeys[gt],x1:xt-Ge,y1:kt-Ge,x2:xt+Ge,y2:kt+Ge})}}}}}_queryCellCircle(o,f,T,z,B,K,ie,le){const ve=ie.circle,_e=ie.seenUids,Pe=this.boxCells[B];if(null!==Pe){const gt=this.bboxes;for(const mt of Pe)if(!_e.box[mt]){_e.box[mt]=!0;const xt=4*mt;if(this._circleAndRectCollide(ve.x,ve.y,ve.radius,gt[xt+0],gt[xt+1],gt[xt+2],gt[xt+3])&&(!le||le(this.boxKeys[mt])))return K.push(!0),!0}}const at=this.circleCells[B];if(null!==at){const gt=this.circles;for(const mt of at)if(!_e.circle[mt]){_e.circle[mt]=!0;const xt=3*mt;if(this._circlesCollide(gt[xt],gt[xt+1],gt[xt+2],ve.x,ve.y,ve.radius)&&(!le||le(this.circleKeys[mt])))return K.push(!0),!0}}}_forEachCell(o,f,T,z,B,K,ie,le){const ve=this._convertToXCellCoord(o),_e=this._convertToYCellCoord(f),Pe=this._convertToXCellCoord(T),at=this._convertToYCellCoord(z);for(let gt=ve;gt<=Pe;gt++)for(let mt=_e;mt<=at;mt++)if(B.call(this,o,f,T,z,this.xCellCount*mt+gt,K,ie,le))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,T,z,B,K){const ie=z-o,le=B-f,ve=T+K;return ve*ve>ie*ie+le*le}_circleAndRectCollide(o,f,T,z,B,K,ie){const le=(K-z)/2,ve=Math.abs(o-(z+le));if(ve>le+T)return!1;const _e=(ie-B)/2,Pe=Math.abs(f-(B+_e));if(Pe>_e+T)return!1;if(ve<=le||Pe<=_e)return!0;const at=ve-le,gt=Pe-_e;return at*at+gt*gt<=T*T}}const w={unknown:0,flipRequired:1,flipNotRequired:2},I=Math.tan(85*Math.PI/180);function R(C,o,f,T,z,B,K){const ie=c.create();if(f)if("globe"===B.name){const le=c.calculateGlobeLabelMatrix(z,o);c.multiply(ie,ie,le)}else{const le=rt([],K);ie[0]=le[0],ie[1]=le[1],ie[4]=le[2],ie[5]=le[3],T||c.rotateZ(ie,ie,z.angle)}else c.multiply(ie,z.labelPlaneMatrix,C);return ie}function Y(C,o,f,T,z,B,K){const ie=R(C,o,f,T,z,B,K);return"globe"===B.name&&f||(ie[2]=ie[6]=ie[10]=ie[14]=0),ie}function W(C,o,f,T,z,B,K){if(f){if("globe"===B.name){const ie=R(C,o,f,T,z,B,K);return c.invert(ie,ie),c.multiply(ie,C,ie),ie}{const ie=c.clone(C),le=c.identity([]);return le[0]=K[0],le[1]=K[1],le[4]=K[2],le[5]=K[3],c.multiply(ie,ie,le),T||c.rotateZ(ie,ie,-z.angle),ie}}return z.glCoordMatrix}function X(C,o,f,T){const z=[C,o,f,1];f?c.transformMat4$1(z,z,T):oe(z,z,T);const B=z[3];return z[0]/=B,z[1]/=B,z[2]/=B,z}function Q(C,o){return Math.min(.5+C/o*.5,1.5)}function ce(C,o){const f=C[0]/C[3],T=C[1]/C[3];return f>=-o[0]&&f<=o[0]&&T>=-o[1]&&T<=o[1]}function me(C,o,f,T,z,B,K,ie,le,ve){const _e=f.transform,Pe=T?C.textSizeData:C.iconSizeData,at=c.evaluateSizeForZoom(Pe,f.transform.zoom),gt="globe"===_e.projection.name,mt=[256/f.width*2+1,256/f.height*2+1],xt=T?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;xt.clear();let kt=null;gt&&(kt=T?C.text.globeExtVertexArray:C.icon.globeExtVertexArray);const Ge=C.lineVertexArray,ft=T?C.text.placedSymbolArray:C.icon.placedSymbolArray,Dt=f.transform.width/f.transform.height;let Bt,Qt=!1;for(let oi=0;oi<ft.length;oi++){const ni=ft.get(oi),{numGlyphs:mi,writingMode:fi}=ni;if(fi!==c.WritingMode.vertical||Qt||Bt===c.WritingMode.horizontal||(Qt=!0),Bt=fi,(ni.hidden||fi===c.WritingMode.vertical)&&!Qt){te(mi,xt);continue}Qt=!1;const Ai=new c.Point(ni.tileAnchorX,ni.tileAnchorY);let{x:yn,y:Oi,z:rn}=_e.projection.projectTilePoint(Ai.x,Ai.y,ve.canonical);if(le){const[Er,jn,dr]=le(Ai);yn+=Er,Oi+=jn,rn+=dr}const zi=[yn,Oi,rn,1];if(c.transformMat4$1(zi,zi,o),!ce(zi,mt)){te(mi,xt);continue}const bn=Q(f.transform.cameraToCenterDistance,zi[3]),Ri=c.evaluateSizeForFeature(Pe,at,ni),Li=K?Ri/bn:Ri*bn,vn=X(yn,Oi,rn,z);if(vn[3]<=0){te(mi,xt);continue}let dn={};const mn=K?null:le,er=Ce(ni,Li,!1,ie,o,z,B,C.glyphOffsetArray,Ge,xt,kt,vn,Ai,dn,Dt,mn,_e.projection,ve,K);Qt=er.useVertical,mn&&er.needsFlipping&&(dn={}),(er.notEnoughRoom||Qt||er.needsFlipping&&Ce(ni,Li,!0,ie,o,z,B,C.glyphOffsetArray,Ge,xt,kt,vn,Ai,dn,Dt,mn,_e.projection,ve,K).notEnoughRoom)&&te(mi,xt)}T?(C.text.dynamicLayoutVertexBuffer.updateData(xt),kt&&C.text.globeExtVertexBuffer.updateData(kt)):(C.icon.dynamicLayoutVertexBuffer.updateData(xt),kt&&C.icon.globeExtVertexBuffer.updateData(kt))}function Ee(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt){const{lineStartIndex:kt,glyphStartIndex:Ge,segment:ft}=ie,Dt=Ge+ie.numGlyphs,Bt=kt+ie.lineLength,Qt=o.getoffsetX(Ge),oi=o.getoffsetX(Dt-1),ni=re(C*Qt,f,T,z,B,K,ft,kt,Bt,le,ve,_e,Pe,at,!0,gt,mt,xt);if(!ni)return null;const mi=re(C*oi,f,T,z,B,K,ft,kt,Bt,le,ve,_e,Pe,at,!0,gt,mt,xt);return mi?{first:ni,last:mi}:null}function De(C,o,f,T){return C===c.WritingMode.horizontal&&Math.abs(T)>Math.abs(f)?{useVertical:!0}:C===c.WritingMode.vertical?T>0?{needsFlipping:!0}:null:o!==w.unknown&&(0===(z=f)||Math.abs(T/z)>I)?o===w.flipRequired?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null;var z}function Ce(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt,kt,Ge,ft){const Dt=o/24,Bt=C.lineOffsetX*Dt,Qt=C.lineOffsetY*Dt,{lineStartIndex:oi,glyphStartIndex:ni,numGlyphs:mi,segment:fi,writingMode:Ai,flipState:yn}=C,Oi=oi+C.lineLength,rn=zi=>{if(_e){const[vn,dn,mn]=zi.up,er=ve.length;c.updateGlobeVertexNormal(_e,er+0,vn,dn,mn),c.updateGlobeVertexNormal(_e,er+1,vn,dn,mn),c.updateGlobeVertexNormal(_e,er+2,vn,dn,mn),c.updateGlobeVertexNormal(_e,er+3,vn,dn,mn)}const[bn,Ri,Li]=zi.point;c.addDynamicAttributes(ve,bn,Ri,Li,zi.angle)};if(mi>1){const zi=Ee(Dt,ie,Bt,Qt,f,Pe,at,C,le,B,gt,xt,!1,kt,Ge,ft);if(!zi)return{notEnoughRoom:!0};if(T&&!f){let[bn,Ri,Li]=zi.first.point,[vn,dn,mn]=zi.last.point;[bn,Ri]=X(bn,Ri,Li,K),[vn,dn]=X(vn,dn,mn,K);const er=De(Ai,yn,(vn-bn)*mt,dn-Ri);if(C.flipState=er&&er.needsFlipping?w.flipRequired:w.flipNotRequired,er)return er}rn(zi.first);for(let bn=ni+1;bn<ni+mi-1;bn++){const Ri=re(Dt*ie.getoffsetX(bn),Bt,Qt,f,Pe,at,fi,oi,Oi,le,B,gt,xt,!1,!1,kt,Ge,ft);if(!Ri)return ve.length-=4*(bn-ni),{notEnoughRoom:!0};rn(Ri)}rn(zi.last)}else{if(T&&!f){const bn=X(at.x,at.y,0,z),Ri=oi+fi+1,Li=new c.Point(le.getx(Ri),le.gety(Ri)),vn=X(Li.x,Li.y,0,z),dn=vn[3]>0?vn:G(at,Li,bn,1,z,void 0,kt,Ge.canonical),mn=De(Ai,yn,(dn[0]-bn[0])*mt,dn[1]-bn[1]);if(C.flipState=mn&&mn.needsFlipping?w.flipRequired:w.flipNotRequired,mn)return mn}const zi=re(Dt*ie.getoffsetX(ni),Bt,Qt,f,Pe,at,fi,oi,Oi,le,B,gt,xt,!1,!1,kt,Ge,ft);if(!zi)return{notEnoughRoom:!0};rn(zi)}return{}}function Re(C,o,f,T,z){const{x:B,y:K,z:ie}=T.projectTilePoint(C.x,C.y,o);if(!z)return X(B,K,ie,f);const[le,ve,_e]=z(C);return X(B+le,K+ve,ie+_e,f)}function G(C,o,f,T,z,B,K,ie){const le=Re(C.sub(o)._unit()._add(C),ie,z,K,B);return c.sub(le,f,le),c.normalize(le,le),c.scaleAndAdd(le,f,le,T)}function re(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt,kt,Ge){const ft=T?C-o:C+o;let Dt=ft>0?1:-1,Bt=0;T&&(Dt*=-1,Bt=Math.PI),Dt<0&&(Bt+=Math.PI);let Qt=ie+K+(Dt>0?0:1)|0,oi=z,ni=z,mi=0,fi=0;const Ai=Math.abs(ft),yn=[],Oi=[];let rn=B,zi=rn;const bn=()=>G(zi,rn,ni,Ai-mi+1,_e,at,xt,kt.canonical);for(;mi+fi<=Ai;){if(Qt+=Dt,Qt<ie||Qt>=le)return null;if(ni=oi,zi=rn,yn.push(ni),gt&&Oi.push(zi),rn=new c.Point(ve.getx(Qt),ve.gety(Qt)),oi=Pe[Qt],!oi){const dr=Re(rn,kt.canonical,_e,xt,at);oi=dr[3]>0?Pe[Qt]=dr:bn()}mi+=fi,fi=c.distance(ni,oi)}mt&&at&&(Pe[Qt]&&(oi=bn(),fi=c.distance(ni,oi)),Pe[Qt]=oi);const Ri=(Ai-mi)/fi,Li=rn.sub(zi)._mult(Ri)._add(zi),vn=c.sub([],oi,ni),dn=c.scaleAndAdd([],ni,vn,Ri);let mn=[0,0,1],er=vn[0],Er=vn[1];if(Ge&&(mn=xt.upVector(kt.canonical,Li.x,Li.y),0!==mn[0]||0!==mn[1]||1!==mn[2])){const dr=[mn[2],0,-mn[0]],Tr=c.cross([],mn,dr);c.normalize(dr,dr),c.normalize(Tr,Tr),er=c.dot(vn,dr),Er=c.dot(vn,Tr)}if(f){const dr=c.cross([],mn,vn);c.normalize(dr,dr),c.scaleAndAdd(dn,dn,dr,f*Dt)}const jn=Bt+Math.atan2(Er,er);return yn.push(dn),gt&&Oi.push(Li),{point:dn,angle:jn,path:yn,tilePath:Oi,up:mn}}function te(C,o){const f=o.length,T=f+4*C;o.resize(T),o.float32.fill(-1/0,4*f,4*T)}function oe(C,o,f){const T=o[0],z=o[1];return C[0]=f[0]*T+f[4]*z+f[12],C[1]=f[1]*T+f[5]*z+f[13],C[3]=f[3]*T+f[7]*z+f[15],C}const ye=100;class Fe{constructor(o,f,T=new x(o.width+200,o.height+200,25),z=new x(o.width+200,o.height+200,25)){this.transform=o,this.grid=T,this.ignoredGrid=z,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+ye,this.screenBottomBoundary=o.height+ye,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=f}placeCollisionBox(o,f,T,z,B,K,ie,le){let ve=T.projectedAnchorX,_e=T.projectedAnchorY,Pe=T.projectedAnchorZ;const at=T.elevation,gt=T.tileID,mt=o.getProjection();if(at&&gt){const[oi,ni,mi]=mt.upVector(gt.canonical,T.tileAnchorX,T.tileAnchorY),fi=mt.upVectorScale(gt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ve+=oi*at*fi,_e+=ni*at*fi,Pe+=mi*at*fi}const xt=this.projectAndGetPerspectiveRatio(ie,ve,_e,Pe,T.tileID,"globe"===mt.name||!!at||this.transform.pitch>0,mt),kt=K*xt.perspectiveRatio,Ge=(T.x1*f+z.x-T.padding)*kt+xt.point.x,ft=(T.y1*f+z.y-T.padding)*kt+xt.point.y,Dt=(T.x2*f+z.x+T.padding)*kt+xt.point.x,Bt=(T.y2*f+z.y+T.padding)*kt+xt.point.y,Qt=xt.perspectiveRatio<=.55||xt.occluded;return!this.isInsideGrid(Ge,ft,Dt,Bt)||!B&&this.grid.hitTest(Ge,ft,Dt,Bt,le)||Qt?{box:[],offscreen:!1,occluded:xt.occluded}:{box:[Ge,ft,Dt,Bt],offscreen:this.isOffscreen(Ge,ft,Dt,Bt),occluded:!1}}placeCollisionCircles(o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt){const kt=[],Ge=this.transform.elevation,ft=o.getProjection(),Dt=Ge?Ge.getAtTileOffsetFunc(xt,this.transform.center.lat,this.transform.worldSize,ft):null,Bt=new c.Point(T.tileAnchorX,T.tileAnchorY);let{x:Qt,y:oi,z:ni}=ft.projectTilePoint(Bt.x,Bt.y,xt.canonical);if(Dt){const[Li,vn,dn]=Dt(Bt);Qt+=Li,oi+=vn,ni+=dn}const mi="globe"===ft.name,fi=this.projectAndGetPerspectiveRatio(ie,Qt,oi,ni,xt,mi||!!Ge||this.transform.pitch>0,ft),{perspectiveRatio:Ai}=fi,yn=(Pe?K/Ai:K*Ai)/c.ONE_EM,Oi=X(Qt,oi,ni,le),rn=fi.signedDistanceFromCamera>0?Ee(yn,B,T.lineOffsetX*yn,T.lineOffsetY*yn,!1,Oi,Bt,T,z,le,{},Ge&&!Pe?Dt:null,Pe&&!!Ge,ft,xt,Pe):null;let zi=!1,bn=!1,Ri=!0;if(rn&&!fi.occluded){const Li=.5*gt*Ai+mt,vn=new c.Point(-100,-100),dn=new c.Point(this.screenRightBoundary,this.screenBottomBoundary),mn=new g,{first:er,last:Er}=rn,jn=er.path.length;let dr=[];for(let tr=jn-1;tr>=1;tr--)dr.push(er.path[tr]);for(let tr=1;tr<Er.path.length;tr++)dr.push(Er.path[tr]);const Tr=2.5*Li;ve&&(dr=dr.map(([tr,zr,ls],us)=>(Dt&&!mi&&(ls=Dt(us<jn-1?er.tilePath[jn-1-us]:Er.tilePath[us-jn+2])[2]),X(tr,zr,ls,ve))),dr.some(tr=>tr[3]<=0)&&(dr=[]));let pr=[];if(dr.length>0){let tr=1/0,zr=-1/0,ls=1/0,us=-1/0;for(const hs of dr)tr=Math.min(tr,hs[0]),ls=Math.min(ls,hs[1]),zr=Math.max(zr,hs[0]),us=Math.max(us,hs[1]);zr>=vn.x&&tr<=dn.x&&us>=vn.y&&ls<=dn.y&&(pr=[dr.map(hs=>new c.Point(hs[0],hs[1]))],(tr<vn.x||zr>dn.x||ls<vn.y||us>dn.y)&&(pr=c.clipLine(pr,vn.x,vn.y,dn.x,dn.y)))}for(const tr of pr){mn.reset(tr,.25*Li);let zr=0;zr=mn.length<=.5*Li?1:Math.ceil(mn.paddedLength/Tr)+1;for(let ls=0;ls<zr;ls++){const us=ls/Math.max(zr-1,1),hs=mn.lerp(us),la=hs.x+ye,Qr=hs.y+ye;kt.push(la,Qr,Li,0);const wa=la-Li,Yl=Qr-Li,ws=la+Li,es=Qr+Li;if(Ri=Ri&&this.isOffscreen(wa,Yl,ws,es),bn=bn||this.isInsideGrid(wa,Yl,ws,es),!f&&this.grid.hitTestCircle(la,Qr,Li,at)&&(zi=!0,!_e))return{circles:[],offscreen:!1,collisionDetected:zi,occluded:!1}}}}return{circles:!_e&&zi||!bn?[]:kt,offscreen:Ri,collisionDetected:zi,occluded:fi.occluded}}queryRenderedSymbols(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const f=[];let T=1/0,z=1/0,B=-1/0,K=-1/0;for(const _e of o){const Pe=new c.Point(_e.x+ye,_e.y+ye);T=Math.min(T,Pe.x),z=Math.min(z,Pe.y),B=Math.max(B,Pe.x),K=Math.max(K,Pe.y),f.push(Pe)}const ie=this.grid.query(T,z,B,K).concat(this.ignoredGrid.query(T,z,B,K)),le={},ve={};for(const _e of ie){const Pe=_e.key;if(void 0===le[Pe.bucketInstanceId]&&(le[Pe.bucketInstanceId]={}),le[Pe.bucketInstanceId][Pe.featureIndex])continue;const at=[new c.Point(_e.x1,_e.y1),new c.Point(_e.x2,_e.y1),new c.Point(_e.x2,_e.y2),new c.Point(_e.x1,_e.y2)];c.polygonIntersectsPolygon(f,at)&&(le[Pe.bucketInstanceId][Pe.featureIndex]=!0,void 0===ve[Pe.bucketInstanceId]&&(ve[Pe.bucketInstanceId]=[]),ve[Pe.bucketInstanceId].push(Pe.featureIndex))}return ve}insertCollisionBox(o,f,T,z,B){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:T,featureIndex:z,collisionGroupID:B},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,T,z,B){const K=f?this.ignoredGrid:this.grid,ie={bucketInstanceId:T,featureIndex:z,collisionGroupID:B};for(let le=0;le<o.length;le+=4)K.insertCircle(ie,o[le],o[le+1],o[le+2])}projectAndGetPerspectiveRatio(o,f,T,z,B,K,ie){const le=[f,T,z,1];let ve=!1;z||this.transform.pitch>0?(c.transformMat4$1(le,le,o),this.fogState&&B&&"globe"!==ie.name&&(ve=function(at,gt,mt,xt,kt,Ge){const ft=Ge.calculateFogTileMatrix(kt),Dt=[gt,mt,xt];return c.transformMat4(Dt,Dt,ft),Ti(at,Dt,Ge.pitch,Ge._fov)}(this.fogState,f,T,z,B.toUnwrapped(),this.transform)>.9)):oe(le,le,o);const _e=le[3];return{point:new c.Point((le[0]/_e+1)/2*this.transform.width+ye,(-le[1]/_e+1)/2*this.transform.height+ye),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(ie)/_e*.5,1.5),signedDistanceFromCamera:_e,occluded:K&&le[2]>_e||ve}}isOffscreen(o,f,T,z){return T<ye||o>=this.screenRightBoundary||z<ye||f>this.screenBottomBoundary}isInsideGrid(o,f,T,z){return T>=0&&o<this.gridRightBoundary&&z>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=c.identity([]);return c.translate(o,o,[-100,-100,0]),o}}function ht(C,o,f){const T=o.createTileMatrix(C,C.worldSize,f.toUnwrapped());return c.multiply(new Float32Array(16),C.projMatrix,T)}function yt(C,o,f){if(o.projection.name===f.projection.name)return C.projMatrix;const T=f.clone();return T.setProjection(o.projection),ht(T,o.getProjection(),C)}function ii(C,o,f){return o.name===f.projection.name?C.projMatrix:ht(f,o,C)}class hi{constructor(o,f,T,z){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):z&&T?1:0,this.placed=T}isHidden(){return 0===this.opacity&&!this.placed}}class xi{constructor(o,f,T,z,B,K=!1){this.text=new hi(o?o.text:null,f,T,B),this.icon=new hi(o?o.icon:null,f,z,B),this.clipped=K}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pi{constructor(o,f,T,z=!1){this.text=o,this.icon=f,this.skipFade=T,this.clipped=z}}class nn{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class Tn{constructor(o,f,T,z,B){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=T,this.bucketIndex=z,this.tileID=B}}class Xn{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:T=>T.collisionGroupID===f}}return this.collisionGroups[o]}}function Qn(C,o,f,T,z){const{horizontalAlign:B,verticalAlign:K}=c.getAnchorAlignment(C),ie=-(B-.5)*o,le=-(K-.5)*f,ve=c.evaluateVariableOffset(C,T);return new c.Point(ie+ve[0]*z,le+ve[1]*z)}function hr(C,o,f,T,z){const B=new c.Point(C,o);return f&&B._rotate(T?z:-z),B}class xr{constructor(o,f,T,z,B){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Fe(this.transform,B),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Xn(T),this.collisionCircleArrays={},this.prevPlacement=z,z&&(z.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,f,T,z){const B=T.getBucket(f),K=T.latestFeatureIndex;if(!B||!K||f.id!==B.layerIds[0])return;const ie=B.layers[0].layout,le=T.collisionBoxArray,ve=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),_e=T.tileSize/c.EXTENT,Pe=T.tileID.toUnwrapped();this.transform.setProjection(B.projection);const at=(gt=T.tileID,mt=B.getProjection(),xt=this.transform,mt.name===this.projection?xt.calculateProjMatrix(gt.toUnwrapped()):ht(xt,mt,gt));var gt,mt,xt;const kt="map"===ie.get("text-pitch-alignment"),Ge="map"===ie.get("text-rotation-alignment");f.compileFilter();const ft=f.dynamicFilter(),Dt=f.dynamicFilterNeedsFeature(),Bt=this.transform.calculatePixelsToTileUnitsMatrix(T),Qt=Y(at,T.tileID.canonical,kt,Ge,this.transform,B.getProjection(),Bt);let oi=null;if(kt){const fi=W(at,T.tileID.canonical,kt,Ge,this.transform,B.getProjection(),Bt);oi=c.multiply([],this.transform.labelPlaneMatrix,fi)}let ni=null;ft&&T.latestFeatureIndex&&(ni={unwrappedTileID:Pe,dynamicFilter:ft,dynamicFilterNeedsFeature:Dt,featureIndex:T.latestFeatureIndex}),this.retainedQueryData[B.bucketInstanceId]=new Tn(B.bucketInstanceId,K,B.sourceLayerIndex,B.index,T.tileID);const mi={bucket:B,layout:ie,posMatrix:at,textLabelPlaneMatrix:Qt,labelToScreenMatrix:oi,clippingData:ni,scale:ve,textPixelRatio:_e,holdingForFade:T.holdingForFade(),collisionBoxArray:le,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(B.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:c.evaluateSizeForZoom(B.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(z)for(const fi of B.sortKeyRanges){const{sortKey:Ai,symbolInstanceStart:yn,symbolInstanceEnd:Oi}=fi;o.push({sortKey:Ai,symbolInstanceStart:yn,symbolInstanceEnd:Oi,parameters:mi})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:mi})}attemptAnchorPlacement(o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt,kt,Ge,ft){const{textOffset0:Dt,textOffset1:Bt,crossTileID:Qt}=at,oi=[Dt,Bt],ni=Qn(o,T,z,oi,B),mi=this.collisionIndex.placeCollisionBox(mt,B,f,hr(ni.x,ni.y,K,ie,this.transform.angle),Pe,le,ve,_e.predicate);if(kt){const fi=mt.getSymbolInstanceIconSize(ft,this.transform.zoom,at.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(mt,fi,kt,hr(ni.x,ni.y,K,ie,this.transform.angle),Pe,le,ve,_e.predicate).box.length)return}if(mi.box.length>0){let fi;return this.prevPlacement&&this.prevPlacement.variableOffsets[Qt]&&this.prevPlacement.placements[Qt]&&this.prevPlacement.placements[Qt].text&&(fi=this.prevPlacement.variableOffsets[Qt].anchor),this.variableOffsets[Qt]={textOffset:oi,width:T,height:z,anchor:o,textScale:B,prevAnchor:fi},this.markUsedJustification(mt,o,at,xt),mt.allowVerticalPlacement&&(this.markUsedOrientation(mt,xt,at),this.placedOrientations[Qt]=xt),{shift:ni,placedGlyphBoxes:mi}}}placeLayerBucketPart(o,f,T,z){const{bucket:B,layout:K,posMatrix:ie,textLabelPlaneMatrix:le,labelToScreenMatrix:ve,clippingData:_e,textPixelRatio:Pe,holdingForFade:at,collisionBoxArray:gt,partiallyEvaluatedTextSize:mt,partiallyEvaluatedIconSize:xt,collisionGroup:kt}=o.parameters,Ge=K.get("text-optional"),ft=K.get("icon-optional"),Dt=K.get("text-allow-overlap"),Bt=K.get("icon-allow-overlap"),Qt="map"===K.get("text-rotation-alignment"),oi="map"===K.get("text-pitch-alignment"),ni="none"!==K.get("icon-text-fit"),mi="viewport-y"===K.get("symbol-z-order");this.transform.setProjection(B.projection);let fi=Dt&&(Bt||!B.hasIconData()||ft),Ai=Bt&&(Dt||!B.hasTextData()||Ge);!B.collisionArrays&&gt&&B.deserializeCollisionBoxes(gt),T&&z&&B.updateCollisionDebugBuffers(this.transform.zoom,gt);const yn=(Oi,rn,zi)=>{const{crossTileID:bn,numVerticalGlyphVertices:Ri}=Oi;if(_e){const ws={zoom:this.transform.zoom,pitch:this.transform.pitch};let es=null;if(_e.dynamicFilterNeedsFeature){const ts=this.retainedQueryData[B.bucketInstanceId];es=_e.featureIndex.loadFeature({featureIndex:Oi.featureIndex,bucketIndex:ts.bucketIndex,sourceLayerIndex:ts.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,_e.dynamicFilter)(ws,es,this.retainedQueryData[B.bucketInstanceId].tileID.canonical,new c.Point(Oi.tileAnchorX,Oi.tileAnchorY),this.transform.calculateDistanceTileData(_e.unwrappedTileID)))return this.placements[bn]=new Pi(!1,!1,!1,!0),void f.add(bn)}if(f.has(bn))return;if(at)return void(this.placements[bn]=new Pi(!1,!1,!1));let Li=!1,vn=!1,dn=!0,mn=!1,er=!1,Er=null,jn={box:null,offscreen:null,occluded:null},dr={box:null,offscreen:null,occluded:null},Tr=null,pr=null,tr=null,zr=0,ls=0,us=0;zi.textFeatureIndex?zr=zi.textFeatureIndex:Oi.useRuntimeCollisionCircles&&(zr=Oi.featureIndex),zi.verticalTextFeatureIndex&&(ls=zi.verticalTextFeatureIndex);const hs=ws=>{ws.tileID=this.retainedQueryData[B.bucketInstanceId].tileID;const es=this.transform.elevation;(es||ws.elevation)&&(ws.elevation=es?es.getAtTileOffset(ws.tileID,ws.tileAnchorX,ws.tileAnchorY):0)},la=zi.textBox;if(la){hs(la);const ws=ts=>{let it=c.WritingMode.horizontal;if(B.allowVerticalPlacement&&!ts&&this.prevPlacement){const _t=this.prevPlacement.placedOrientations[bn];_t&&(this.placedOrientations[bn]=_t,it=_t,this.markUsedOrientation(B,it,Oi))}return it},es=(ts,it)=>{if(B.allowVerticalPlacement&&Ri>0&&zi.verticalTextBox){for(const _t of B.writingModes)if(_t===c.WritingMode.vertical?(jn=it(),dr=jn):jn=ts(),jn&&jn.box&&jn.box.length)break}else jn=ts()};if(K.get("text-variable-anchor")){let ts=K.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[bn]){const Ht=this.prevPlacement.variableOffsets[bn];ts.indexOf(Ht.anchor)>0&&(ts=ts.filter(Gi=>Gi!==Ht.anchor),ts.unshift(Ht.anchor))}const it=(Ht,Gi,Zn)=>{const Wn=B.getSymbolInstanceTextSize(mt,Oi,this.transform.zoom,rn),rr=(Ht.x2-Ht.x1)*Wn+2*Ht.padding,vr=(Ht.y2-Ht.y1)*Wn+2*Ht.padding,Zr=ni&&!Bt?Gi:null;Zr&&hs(Zr);let Dr={box:[],offscreen:!1,occluded:!1};const Kr=Dt?2*ts.length:ts.length;for(let Ca=0;Ca<Kr;++Ca){const Ml=this.attemptAnchorPlacement(ts[Ca%ts.length],Ht,rr,vr,Wn,Qt,oi,Pe,ie,kt,Ca>=ts.length,Oi,rn,B,Zn,Zr,mt,xt);if(Ml&&(Dr=Ml.placedGlyphBoxes,Dr&&Dr.box&&Dr.box.length)){Li=!0,Er=Ml.shift;break}}return Dr};es(()=>it(la,zi.iconBox,c.WritingMode.horizontal),()=>{const Ht=zi.verticalTextBox;return Ht&&hs(Ht),B.allowVerticalPlacement&&!(jn&&jn.box&&jn.box.length)&&Ri>0&&Ht?it(Ht,zi.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),jn&&(Li=jn.box,dn=jn.offscreen,mn=jn.occluded);const _t=ws(!(!jn||!jn.box));if(!Li&&this.prevPlacement){const Ht=this.prevPlacement.variableOffsets[bn];Ht&&(this.variableOffsets[bn]=Ht,this.markUsedJustification(B,Ht.anchor,Oi,_t))}}else{const ts=(it,_t)=>{const Ht=B.getSymbolInstanceTextSize(mt,Oi,this.transform.zoom,rn),Gi=this.collisionIndex.placeCollisionBox(B,Ht,it,new c.Point(0,0),Dt,Pe,ie,kt.predicate);return Gi&&Gi.box&&Gi.box.length&&(this.markUsedOrientation(B,_t,Oi),this.placedOrientations[bn]=_t),Gi};es(()=>ts(la,c.WritingMode.horizontal),()=>{const it=zi.verticalTextBox;return B.allowVerticalPlacement&&Ri>0&&it?(hs(it),ts(it,c.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),ws(!!(jn&&jn.box&&jn.box.length))}}if(Tr=jn,Li=Tr&&Tr.box&&Tr.box.length>0,dn=Tr&&Tr.offscreen,mn=Tr&&Tr.occluded,Oi.useRuntimeCollisionCircles){const ws=B.text.placedSymbolArray.get(Oi.centerJustifiedTextSymbolIndex>=0?Oi.centerJustifiedTextSymbolIndex:Oi.verticalPlacedTextSymbolIndex),es=c.evaluateSizeForFeature(B.textSizeData,mt,ws),ts=K.get("text-padding");pr=this.collisionIndex.placeCollisionCircles(B,Dt,ws,B.lineVertexArray,B.glyphOffsetArray,es,ie,le,ve,T,oi,kt.predicate,Oi.collisionCircleDiameter*es/c.ONE_EM,ts,this.retainedQueryData[B.bucketInstanceId].tileID),Li=Dt||pr.circles.length>0&&!pr.collisionDetected,dn=dn&&pr.offscreen,mn=pr.occluded}if(zi.iconFeatureIndex&&(us=zi.iconFeatureIndex),zi.iconBox){const ws=es=>{hs(es);const ts=ni&&Er?hr(Er.x,Er.y,Qt,oi,this.transform.angle):new c.Point(0,0),it=B.getSymbolInstanceIconSize(xt,this.transform.zoom,Oi.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(B,it,es,ts,Bt,Pe,ie,kt.predicate)};dr&&dr.box&&dr.box.length&&zi.verticalIconBox?(tr=ws(zi.verticalIconBox),vn=tr.box.length>0):(tr=ws(zi.iconBox),vn=tr.box.length>0),dn=dn&&tr.offscreen,er=tr.occluded}const Qr=Ge||0===Oi.numHorizontalGlyphVertices&&0===Ri,wa=ft||0===Oi.numIconVertices;if(Qr||wa?wa?Qr||(vn=vn&&Li):Li=vn&&Li:vn=Li=vn&&Li,Li&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,K.get("text-ignore-placement"),B.bucketInstanceId,dr&&dr.box&&ls?ls:zr,kt.ID),vn&&tr&&this.collisionIndex.insertCollisionBox(tr.box,K.get("icon-ignore-placement"),B.bucketInstanceId,us,kt.ID),pr&&(Li&&this.collisionIndex.insertCollisionCircles(pr.circles,K.get("text-ignore-placement"),B.bucketInstanceId,zr,kt.ID),T)){const ws=B.bucketInstanceId;let es=this.collisionCircleArrays[ws];void 0===es&&(es=this.collisionCircleArrays[ws]=new nn);for(let ts=0;ts<pr.circles.length;ts+=4)es.circles.push(pr.circles[ts+0]),es.circles.push(pr.circles[ts+1]),es.circles.push(pr.circles[ts+2]),es.circles.push(pr.collisionDetected?1:0)}const Yl="globe"!==B.projection.name;fi=fi&&(Yl||!mn),Ai=Ai&&(Yl||!er),this.placements[bn]=new Pi(Li||fi,vn||Ai,dn||B.justReloaded),f.add(bn)};if(mi){const Oi=B.getSortedSymbolIndexes(this.transform.angle);for(let rn=Oi.length-1;rn>=0;--rn){const zi=Oi[rn];yn(B.symbolInstances.get(zi),zi,B.collisionArrays[zi])}}else for(let Oi=o.symbolInstanceStart;Oi<o.symbolInstanceEnd;Oi++)yn(B.symbolInstances.get(Oi),Oi,B.collisionArrays[Oi]);if(T&&B.bucketInstanceId in this.collisionCircleArrays){const Oi=this.collisionCircleArrays[B.bucketInstanceId];c.invert(Oi.invProjMatrix,ie),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}B.justReloaded=!1}markUsedJustification(o,f,T,z){const{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:K,rightJustifiedTextSymbolIndex:ie,verticalPlacedTextSymbolIndex:le,crossTileID:ve}=T,_e=c.getAnchorJustification(f),Pe=z===c.WritingMode.vertical?le:"left"===_e?B:"center"===_e?K:"right"===_e?ie:-1;B>=0&&(o.text.placedSymbolArray.get(B).crossTileID=Pe>=0&&B!==Pe?0:ve),K>=0&&(o.text.placedSymbolArray.get(K).crossTileID=Pe>=0&&K!==Pe?0:ve),ie>=0&&(o.text.placedSymbolArray.get(ie).crossTileID=Pe>=0&&ie!==Pe?0:ve),le>=0&&(o.text.placedSymbolArray.get(le).crossTileID=Pe>=0&&le!==Pe?0:ve)}markUsedOrientation(o,f,T){const z=f===c.WritingMode.horizontal||f===c.WritingMode.horizontalOnly?f:0,B=f===c.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:K,centerJustifiedTextSymbolIndex:ie,rightJustifiedTextSymbolIndex:le,verticalPlacedTextSymbolIndex:ve}=T,_e=o.text.placedSymbolArray;K>=0&&(_e.get(K).placedOrientation=z),ie>=0&&(_e.get(ie).placedOrientation=z),le>=0&&(_e.get(le).placedOrientation=z),ve>=0&&(_e.get(ve).placedOrientation=B)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let T=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const z=f?f.symbolFadeChange(o):1,B=f?f.opacities:{},K=f?f.variableOffsets:{},ie=f?f.placedOrientations:{};for(const le in this.placements){const ve=this.placements[le],_e=B[le];_e?(this.opacities[le]=new xi(_e,z,ve.text,ve.icon,null,ve.clipped),T=T||ve.text!==_e.text.placed||ve.icon!==_e.icon.placed):(this.opacities[le]=new xi(null,z,ve.text,ve.icon,ve.skipFade,ve.clipped),T=T||ve.text||ve.icon)}for(const le in B){const ve=B[le];if(!this.opacities[le]){const _e=new xi(ve,z,!1,!1);_e.isHidden()||(this.opacities[le]=_e,T=T||ve.text.placed||ve.icon.placed)}}for(const le in K)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=K[le]);for(const le in ie)this.placedOrientations[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.placedOrientations[le]=ie[le]);T?this.lastPlacementChangeTime=o:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const T=new Set;for(const z of f){const B=z.getBucket(o);B&&z.latestFeatureIndex&&o.id===B.layerIds[0]&&this.updateBucketOpacities(B,T,z.collisionBoxArray)}}updateBucketOpacities(o,f,T){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const z=o.layers[0].layout,B=!!o.layers[0].dynamicFilter(),K=new xi(null,0,!1,!1,!0),ie=z.get("text-allow-overlap"),le=z.get("icon-allow-overlap"),ve=z.get("text-variable-anchor"),_e="map"===z.get("text-rotation-alignment"),Pe="map"===z.get("text-pitch-alignment"),at="none"!==z.get("icon-text-fit"),gt=new xi(null,0,ie&&(le||!o.hasIconData()||z.get("icon-optional")),le&&(ie||!o.hasTextData()||z.get("text-optional")),!0);!o.collisionArrays&&T&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(T);const mt=(kt,Ge,ft)=>{for(let Dt=0;Dt<Ge/4;Dt++)kt.opacityVertexArray.emplaceBack(ft)};let xt=0;for(let kt=0;kt<o.symbolInstances.length;kt++){const Ge=o.symbolInstances.get(kt),{numHorizontalGlyphVertices:ft,numVerticalGlyphVertices:Dt,crossTileID:Bt,numIconVertices:Qt}=Ge,oi=f.has(Bt);let ni=this.opacities[Bt];oi?ni=K:ni||(ni=gt,this.opacities[Bt]=ni),f.add(Bt);const mi=ft>0||Dt>0,fi=Qt>0,Ai=this.placedOrientations[Bt],yn=Ai===c.WritingMode.vertical,Oi=Ai===c.WritingMode.horizontal||Ai===c.WritingMode.horizontalOnly;if(!mi&&!fi||ni.isHidden()||xt++,mi){const rn=fo(ni.text);mt(o.text,ft,yn?nr:rn),mt(o.text,Dt,Oi?nr:rn);const zi=ni.text.isHidden(),{leftJustifiedTextSymbolIndex:bn,centerJustifiedTextSymbolIndex:Ri,rightJustifiedTextSymbolIndex:Li,verticalPlacedTextSymbolIndex:vn}=Ge,dn=o.text.placedSymbolArray,mn=zi||yn?1:0;bn>=0&&(dn.get(bn).hidden=mn),Ri>=0&&(dn.get(Ri).hidden=mn),Li>=0&&(dn.get(Li).hidden=mn),vn>=0&&(dn.get(vn).hidden=zi||Oi?1:0);const er=this.variableOffsets[Bt];er&&this.markUsedJustification(o,er.anchor,Ge,Ai);const Er=this.placedOrientations[Bt];Er&&(this.markUsedJustification(o,"left",Ge,Er),this.markUsedOrientation(o,Er,Ge))}if(fi){const rn=fo(ni.icon),{placedIconSymbolIndex:zi,verticalPlacedIconSymbolIndex:bn}=Ge,Ri=o.icon.placedSymbolArray,Li=ni.icon.isHidden()?1:0;zi>=0&&(mt(o.icon,Qt,yn?nr:rn),Ri.get(zi).hidden=Li),bn>=0&&(mt(o.icon,Ge.numVerticalIconVertices,Oi?nr:rn),Ri.get(bn).hidden=Li)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const rn=o.collisionArrays[kt];if(rn){let zi=new c.Point(0,0),bn=!0;if(rn.textBox||rn.verticalTextBox){if(ve){const Li=this.variableOffsets[Bt];Li?(zi=Qn(Li.anchor,Li.width,Li.height,Li.textOffset,Li.textScale),_e&&zi._rotate(Pe?this.transform.angle:-this.transform.angle)):bn=!1}B&&(bn=!ni.clipped),rn.textBox&&Rr(o.textCollisionBox.collisionVertexArray,ni.text.placed,!bn||yn,zi.x,zi.y),rn.verticalTextBox&&Rr(o.textCollisionBox.collisionVertexArray,ni.text.placed,!bn||Oi,zi.x,zi.y)}const Ri=bn&&!(Oi||!rn.verticalIconBox);rn.iconBox&&Rr(o.iconCollisionBox.collisionVertexArray,ni.icon.placed,Ri,at?zi.x:0,at?zi.y:0),rn.verticalIconBox&&Rr(o.iconCollisionBox.collisionVertexArray,ni.icon.placed,!Ri,at?zi.x:0,at?zi.y:0)}}}if(o.fullyClipped=0===xt,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=kt.invProjMatrix,o.placementViewportMatrix=kt.viewportMatrix,o.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return 0===this.fadeDuration?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const T=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*T>o}setStale(){this.stale=!0}}function Rr(C,o,f,T,z){C.emplaceBack(o?1:0,f?1:0,T||0,z||0),C.emplaceBack(o?1:0,f?1:0,T||0,z||0),C.emplaceBack(o?1:0,f?1:0,T||0,z||0),C.emplaceBack(o?1:0,f?1:0,T||0,z||0)}const Br=Math.pow(2,25),Or=Math.pow(2,24),cr=Math.pow(2,17),Ur=Math.pow(2,16),ir=Math.pow(2,9),Ar=Math.pow(2,8),pa=Math.pow(2,1);function fo(C){if(0===C.opacity&&!C.placed)return 0;if(1===C.opacity&&C.placed)return 4294967295;const o=C.placed?1:0,f=Math.floor(127*C.opacity);return f*Br+o*Or+f*cr+o*Ur+f*ir+o*Ar+f*pa+o}const nr=0;class Co{constructor(o){this._sortAcrossTiles="viewport-y"!==o.layout.get("symbol-z-order")&&void 0!==o.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,f,T,z,B){const K=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(K,z,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,K.sort((ie,le)=>ie.sortKey-le.sortKey));this._currentPartIndex<K.length;){const ie=K[this._currentPartIndex];if(f.placeLayerBucketPart(ie,this._seenCrossTileIDs,T,0===ie.symbolInstanceStart),this._currentPartIndex++,B())return!0}return!1}}class cl{constructor(o,f,T,z,B,K,ie,le){this.placement=new xr(o,B,K,ie,le),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=T,this._showCollisionBoxes=z,this._done=!1}isDone(){return this._done}continuePlacement(o,f,T){const z=c.exported.now(),B=()=>{const K=c.exported.now()-z;return!this._forceFullPlacement&&K>2};for(;this._currentPlacementIndex>=0;){const K=f[o[this._currentPlacementIndex]],ie=this.placement.collisionIndex.transform.zoom;if("symbol"===K.type&&(!K.minzoom||K.minzoom<=ie)&&(!K.maxzoom||K.maxzoom>ie)){if(this._inProgressLayer||(this._inProgressLayer=new Co(K)),this._inProgressLayer.continuePlacement(T[K.source],this.placement,this._showCollisionBoxes,K,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const oo=512/c.EXTENT/2;class or{constructor(o,f,T){this.tileID=o,this.bucketInstanceId=T,this.index=new c.KDBush(f.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const z=o.canonical.x*c.EXTENT,B=o.canonical.y*c.EXTENT;for(let K=0;K<f.length;K++){const{key:ie,crossTileID:le,tileAnchorX:ve,tileAnchorY:_e}=f.get(K),Pe=Math.floor((z+ve)*oo),at=Math.floor((B+_e)*oo);this.index.add(Pe,at),this.keys.push(ie),this.crossTileIDs.push(le)}this.index.finish()}findMatches(o,f,T){const z=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z),B=oo/Math.pow(2,f.canonical.z-this.tileID.canonical.z),K=f.canonical.x*c.EXTENT,ie=f.canonical.y*c.EXTENT;for(let le=0;le<o.length;le++){const ve=o.get(le);if(ve.crossTileID)continue;const{key:_e,tileAnchorX:Pe,tileAnchorY:at}=ve,gt=Math.floor((K+Pe)*B),mt=Math.floor((ie+at)*B),xt=this.index.range(gt-z,mt-z,gt+z,mt+z);for(const kt of xt){const Ge=this.crossTileIDs[kt];if(this.keys[kt]===_e&&!T.has(Ge)){T.add(Ge),ve.crossTileID=Ge;break}}}}}class Fs{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class yr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(0!==f)for(const T in this.indexes){const z=this.indexes[T],B={};for(const K in z){const ie=z[K];ie.tileID=ie.tileID.unwrapTo(ie.tileID.wrap+f),B[ie.tileID.key]=ie}this.indexes[T]=B}this.lng=o}addBucket(o,f,T){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let B=0;B<f.symbolInstances.length;B++)f.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const z=this.usedCrossTileIDs[o.overscaledZ];for(const B in this.indexes){const K=this.indexes[B];if(Number(B)>o.overscaledZ)for(const ie in K){const le=K[ie];le.tileID.isChildOf(o)&&le.findMatches(f.symbolInstances,o,z)}else{const ie=K[o.scaledTo(Number(B)).key];ie&&ie.findMatches(f.symbolInstances,o,z)}}for(let B=0;B<f.symbolInstances.length;B++){const K=f.symbolInstances.get(B);K.crossTileID||(K.crossTileID=T.generate(),z.add(K.crossTileID))}return void 0===this.indexes[o.overscaledZ]&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new or(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const T of f.crossTileIDs)this.usedCrossTileIDs[o].delete(T)}removeStaleBuckets(o){let f=!1;for(const T in this.indexes){const z=this.indexes[T];for(const B in z)o[z[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,z[B]),delete z[B],f=!0)}return f}}class No{constructor(){this.layerIndexes={},this.crossTileIDs=new Fs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,T,z){let B=this.layerIndexes[o.id];void 0===B&&(B=this.layerIndexes[o.id]=new yr);let K=!1;const ie={};"globe"!==z.name&&B.handleWrapJump(T);for(const le of f){const ve=le.getBucket(o);ve&&o.id===ve.layerIds[0]&&(ve.bucketInstanceId||(ve.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(le.tileID,ve,this.crossTileIDs)&&(K=!0),ie[ve.bucketInstanceId]=!0)}return B.removeStaleBuckets(ie)&&(K=!0),K}pruneUnusedLayers(o){const f={};o.forEach(T=>{f[T]=!0});for(const T in this.layerIndexes)f[T]||delete this.layerIndexes[T]}}const bs=(C,o)=>c.emitValidationErrors(C,o&&o.filter(f=>"source.canvas"!==f.identifier)),dl=c.pick(bt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Da=c.pick(bt,["setCenter","setZoom","setBearing","setPitch"]),Wl={version:8,layers:[],sources:{}},Xa={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class wr extends c.Evented{constructor(o,f={}){super(),this.map=o,this.dispatcher=new Zi(Ct(),this),this.imageManager=new ci,this.imageManager.setEventedParent(this),this.glyphManager=new c.GlyphManager(o._requestManager,f.localFontFamily?c.LocalGlyphMode.all:f.localIdeographFontFamily?c.LocalGlyphMode.ideographs:c.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new No,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const T=this;this._rtlTextPluginCallback=wr.registerForPluginStateChange(z=>{T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},(B,K)=>{if(c.triggerPluginCompletionEvent(B),K&&K.every(ie=>ie))for(const ie in T._sourceCaches){const le=T._sourceCaches[ie],ve=le.getSource().type;"vector"!==ve&&"geojson"!==ve||le.reload()}})}),this.on("data",z=>{if("source"!==z.dataType||"metadata"!==z.sourceDataType)return;const B=this.getSource(z.sourceId);if(B&&B.vectorLayerIds)for(const K in this._layers){const ie=this._layers[K];ie.source===B.id&&this._validateLayer(ie)}})}loadURL(o,f={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const T="boolean"==typeof f.validate?f.validate:!c.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,f.accessToken);const z=this.map._requestManager.transformRequest(o,c.ResourceType.Style);this._request=c.getJSON(z,(B,K)=>{this._request=null,B?this.fire(new c.ErrorEvent(B)):K&&this._load(K,T)})}loadJSON(o,f={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(o,!1!==f.validate)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(Wl,!1)}_updateLayerCount(o,f){const T=f?1:-1;o.is3D()&&(this._num3DLayers+=T),"circle"===o.type&&(this._numCircleLayers+=T),"symbol"===o.type&&(this._numSymbolLayers+=T)}_load(o,f){if(f&&bs(this,c.validateStyle(o)))return;this._loaded=!0,this.stylesheet=c.clone$1(o),this._updateMapProjection();for(const z in o.sources)this.addSource(z,o.sources[z],{validate:!1});this._changed=!1,o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(o.glyphs);const T=xe(this.stylesheet.layers);this._order=T.map(z=>z.id),this._layers={},this._serializedLayers={};for(const z of T){const B=c.createStyleLayer(z);B.setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=B,this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new St(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(o){this._spriteRequest=function(f,T,z){let B,K,ie;const le=c.exported.devicePixelRatio>1?"@2x":"";let ve=c.getJSON(T.transformRequest(T.normalizeSpriteURL(f,le,".json"),c.ResourceType.SpriteJSON),(at,gt)=>{ve=null,ie||(ie=at,B=gt,Pe())}),_e=c.getImage(T.transformRequest(T.normalizeSpriteURL(f,le,".png"),c.ResourceType.SpriteImage),(at,gt)=>{_e=null,ie||(ie=at,K=gt,Pe())});function Pe(){if(ie)z(ie);else if(B&&K){const at=c.exported.getImageData(K),gt={};for(const mt in B){const{width:xt,height:kt,x:Ge,y:ft,sdf:Dt,pixelRatio:Bt,stretchX:Qt,stretchY:oi,content:ni}=B[mt],mi=new c.RGBAImage({width:xt,height:kt});c.RGBAImage.copy(at,mi,{x:Ge,y:ft},{x:0,y:0},{width:xt,height:kt}),gt[mt]={data:mi,pixelRatio:Bt,sdf:Dt,stretchX:Qt,stretchY:oi,content:ni}}z(null,gt)}}return{cancel(){ve&&(ve.cancel(),ve=null),_e&&(_e.cancel(),_e=null)}}}(o,this.map._requestManager,(f,T)=>{if(this._spriteRequest=null,f)this.fire(new c.ErrorEvent(f));else if(T)for(const z in T)this.imageManager.addImage(z,T[z]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(o){const f=this.getSource(o.source);if(!f)return;const T=o.sourceLayer;T&&("geojson"===f.type||f.vectorLayerIds&&-1===f.vectorLayerIds.indexOf(T))&&this.fire(new c.ErrorEvent(new Error(`Source layer "${T}" does not exist on source "${f.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const f=[];for(const T of o){const z=this._layers[T];"custom"!==z.type&&f.push(z.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(o){return!!this.terrain&&("function"==typeof o.isLayerDraped?o.isLayerDraped():Xa[o.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(o){if(!this._loaded)return;const f=this._changed;if(this._changed){const z=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(z.length||B.length)&&this._updateWorkerLayers(z,B);for(const K in this._updatedSources){const ie=this._updatedSources[K];"reload"===ie?this._reloadSource(K):"clear"===ie&&this._clearSource(K)}this._updateTilesForChangedImages();for(const K in this._updatedPaintProps)this._layers[K].updateTransitions(o);this.light.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._resetUpdates()}const T={};for(const z in this._sourceCaches){const B=this._sourceCaches[z];T[z]=B.used,B.used=!1}for(const z of this._order){const B=this._layers[z];if(B.recalculate(o,this._availableImages),!B.isHidden(o.zoom)){const ie=this._getLayerSourceCache(B);ie&&(ie.used=!0)}const K=this.map.painter;if(K){const ie=B.getProgramIds();if(!ie)continue;const le=B.getProgramConfiguration(o.zoom);for(const ve of ie)K.useProgram(ve,le)}}for(const z in T){const B=this._sourceCaches[z];T[z]!==B.used&&B.getSource().fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:B.getSource().id}))}this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(o){if(this._checkLoaded(),bs(this,c.validateStyle(o)))return!1;(o=c.clone$1(o)).layers=xe(o.layers);const f=function(z,B){if(!z)return[{command:bt.setStyle,args:[B]}];let K=[];try{if(!Z(z.version,B.version))return[{command:bt.setStyle,args:[B]}];Z(z.center,B.center)||K.push({command:bt.setCenter,args:[B.center]}),Z(z.zoom,B.zoom)||K.push({command:bt.setZoom,args:[B.zoom]}),Z(z.bearing,B.bearing)||K.push({command:bt.setBearing,args:[B.bearing]}),Z(z.pitch,B.pitch)||K.push({command:bt.setPitch,args:[B.pitch]}),Z(z.sprite,B.sprite)||K.push({command:bt.setSprite,args:[B.sprite]}),Z(z.glyphs,B.glyphs)||K.push({command:bt.setGlyphs,args:[B.glyphs]}),Z(z.transition,B.transition)||K.push({command:bt.setTransition,args:[B.transition]}),Z(z.light,B.light)||K.push({command:bt.setLight,args:[B.light]}),Z(z.fog,B.fog)||K.push({command:bt.setFog,args:[B.fog]}),Z(z.projection,B.projection)||K.push({command:bt.setProjection,args:[B.projection]});const ie={},le=[];!function(Pe,at,gt,mt){let xt;for(xt in at=at||{},Pe=Pe||{})Pe.hasOwnProperty(xt)&&(at.hasOwnProperty(xt)||Xe(xt,gt,mt));for(xt in at){if(!at.hasOwnProperty(xt))continue;const kt=at[xt];Pe.hasOwnProperty(xt)?Z(Pe[xt],kt)||("geojson"===Pe[xt].type&&"geojson"===kt.type&&pe(Pe,at,xt)?gt.push({command:bt.setGeoJSONSourceData,args:[xt,kt.data]}):Ut(xt,at,gt,mt)):Yt(xt,at,gt)}}(z.sources,B.sources,le,ie);const ve=[];z.layers&&z.layers.forEach(Pe=>{Pe.source&&ie[Pe.source]?K.push({command:bt.removeLayer,args:[Pe.id]}):ve.push(Pe)});let _e=z.terrain;_e&&ie[_e.source]&&(K.push({command:bt.setTerrain,args:[void 0]}),_e=void 0),K=K.concat(le),Z(_e,B.terrain)||K.push({command:bt.setTerrain,args:[B.terrain]}),function(Pe,at,gt){at=at||[];const mt=(Pe=Pe||[]).map(r),xt=at.map(r),kt=Pe.reduce(d,{}),Ge=at.reduce(d,{}),ft=mt.slice(),Dt=Object.create(null);let Bt,Qt,oi,ni,mi,fi,Ai;for(Bt=0,Qt=0;Bt<mt.length;Bt++)oi=mt[Bt],Ge.hasOwnProperty(oi)?Qt++:(gt.push({command:bt.removeLayer,args:[oi]}),ft.splice(ft.indexOf(oi,Qt),1));for(Bt=0,Qt=0;Bt<xt.length;Bt++)oi=xt[xt.length-1-Bt],ft[ft.length-1-Bt]!==oi&&(kt.hasOwnProperty(oi)?(gt.push({command:bt.removeLayer,args:[oi]}),ft.splice(ft.lastIndexOf(oi,ft.length-Qt),1)):Qt++,fi=ft[ft.length-Bt],gt.push({command:bt.addLayer,args:[Ge[oi],fi]}),ft.splice(ft.length-Bt,0,oi),Dt[oi]=!0);for(Bt=0;Bt<xt.length;Bt++)if(oi=xt[Bt],ni=kt[oi],mi=Ge[oi],!Dt[oi]&&!Z(ni,mi))if(Z(ni.source,mi.source)&&Z(ni["source-layer"],mi["source-layer"])&&Z(ni.type,mi.type)){for(Ai in i(ni.layout,mi.layout,gt,oi,null,bt.setLayoutProperty),i(ni.paint,mi.paint,gt,oi,null,bt.setPaintProperty),Z(ni.filter,mi.filter)||gt.push({command:bt.setFilter,args:[oi,mi.filter]}),Z(ni.minzoom,mi.minzoom)&&Z(ni.maxzoom,mi.maxzoom)||gt.push({command:bt.setLayerZoomRange,args:[oi,mi.minzoom,mi.maxzoom]}),ni)ni.hasOwnProperty(Ai)&&"layout"!==Ai&&"paint"!==Ai&&"filter"!==Ai&&"metadata"!==Ai&&"minzoom"!==Ai&&"maxzoom"!==Ai&&(0===Ai.indexOf("paint.")?i(ni[Ai],mi[Ai],gt,oi,Ai.slice(6),bt.setPaintProperty):Z(ni[Ai],mi[Ai])||gt.push({command:bt.setLayerProperty,args:[oi,Ai,mi[Ai]]}));for(Ai in mi)mi.hasOwnProperty(Ai)&&!ni.hasOwnProperty(Ai)&&"layout"!==Ai&&"paint"!==Ai&&"filter"!==Ai&&"metadata"!==Ai&&"minzoom"!==Ai&&"maxzoom"!==Ai&&(0===Ai.indexOf("paint.")?i(ni[Ai],mi[Ai],gt,oi,Ai.slice(6),bt.setPaintProperty):Z(ni[Ai],mi[Ai])||gt.push({command:bt.setLayerProperty,args:[oi,Ai,mi[Ai]]}))}else gt.push({command:bt.removeLayer,args:[oi]}),fi=ft[ft.lastIndexOf(oi)+1],gt.push({command:bt.addLayer,args:[mi,fi]})}(ve,B.layers,K)}catch(ie){console.warn("Unable to compute style diff:",ie),K=[{command:bt.setStyle,args:[B]}]}return K}(this.serialize(),o).filter(z=>!(z.command in Da));if(0===f.length)return!1;const T=f.filter(z=>!(z.command in dl));if(T.length>0)throw new Error(`Unimplemented: ${T.map(z=>z.command).join(", ")}.`);return f.forEach(z=>{"setTransition"!==z.command&&"setProjection"!==z.command&&this[z.command].apply(this,z.args)}),this.stylesheet=o,this._updateMapProjection(),!0}addImage(o,f){return this.getImage(o)?this.fire(new c.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,f),this._afterImageUpdated(o),this)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o),this._afterImageUpdated(o),this):this.fire(new c.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(o,f,T={}){if(this._checkLoaded(),void 0!==this.getSource(o))throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(c.validateSource,`sources.${o}`,f,null,T))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const z=st(o,f,this.dispatcher,this);z.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(o),source:z.serialize(),sourceId:o}));const B=K=>{const ie=(K?"symbol:":"other:")+o,le=this._sourceCaches[ie]=new c.SourceCache(ie,z,K);(K?this._symbolSourceCaches:this._otherSourceCaches)[o]=le,le.style=this,le.onAdd(this.map)};B(!1),"vector"!==f.type&&"geojson"!==f.type||B(!0),z.onAdd&&z.onAdd(this.map),this._changed=!0}removeSource(o){this._checkLoaded();const f=this.getSource(o);if(!f)throw new Error("There is no source with this ID");for(const z in this._layers)if(this._layers[z].source===o)return this.fire(new c.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${z}" is using it.`)));if(this.terrain&&this.terrain.get().source===o)return this.fire(new c.ErrorEvent(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const T=this._getSourceCaches(o);for(const z of T)delete this._sourceCaches[z.id],delete this._updatedSources[z.id],z.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:z.getSource().id})),z.setEventedParent(null),z.clearTiles();return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(o,f){this._checkLoaded(),this.getSource(o).setData(f),this._changed=!0}getSource(o){const f=this._getSourceCache(o);return f&&f.getSource()}_getSources(){const o=[];for(const f in this._otherSourceCaches){const T=this._getSourceCache(f);T&&o.push(T.getSource())}return o}addLayer(o,f,T={}){this._checkLoaded();const z=o.id;if(this.getLayer(z))return void this.fire(new c.ErrorEvent(new Error(`Layer with id "${z}" already exists on this map`)));let B;if("custom"===o.type){if(bs(this,c.validateCustomStyleLayer(o)))return;B=c.createStyleLayer(o)}else{if("object"==typeof o.source&&(this.addSource(z,o.source),o=c.clone$1(o),o=c.extend(o,{source:z})),this._validate(c.validateLayer,`layers.${z}`,o,{arrayIndex:-1},T))return;B=c.createStyleLayer(o),this._validateLayer(B),B.setEventedParent(this,{layer:{id:z}}),this._serializedLayers[B.id]=B.serialize(),this._updateLayerCount(B,!0)}const K=f?this._order.indexOf(f):this._order.length;if(f&&-1===K)return void this.fire(new c.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(K,0,z),this._layerOrderChanged=!0,this._layers[z]=B;const ie=this._getLayerSourceCache(B);if(this._removedLayers[z]&&B.source&&ie&&"custom"!==B.type){const le=this._removedLayers[z];delete this._removedLayers[z],le.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",ie.pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const T=this._order.indexOf(o);this._order.splice(T,1);const z=f?this._order.indexOf(f):this._order.length;f&&-1===z?this.fire(new c.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(z,0,o),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const T=this._order.indexOf(o);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}hasLayerType(o){for(const f in this._layers)if(this._layers[f].type===o)return!0;return!1}setLayerZoomRange(o,f,T){this._checkLoaded();const z=this.getLayer(o);z?z.minzoom===f&&z.maxzoom===T||(null!=f&&(z.minzoom=f),null!=T&&(z.maxzoom=T),this._updateLayer(z)):this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(o,f,T={}){this._checkLoaded();const z=this.getLayer(o);if(z){if(!Z(z.filter,f))return null==f?(z.filter=void 0,void this._updateLayer(z)):void(this._validate(c.validateFilter,`layers.${z.id}.filter`,f,{layerType:z.type},T)||(z.filter=c.clone$1(f),this._updateLayer(z)))}else this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be filtered.`)))}getFilter(o){const f=this.getLayer(o);return f&&c.clone$1(f.filter)}setLayoutProperty(o,f,T,z={}){this._checkLoaded();const B=this.getLayer(o);B?Z(B.getLayoutProperty(f),T)||(B.setLayoutProperty(f,T,z),this._updateLayer(B)):this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(o,f){const T=this.getLayer(o);if(T)return T.getLayoutProperty(f);this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style.`)))}setPaintProperty(o,f,T,z={}){this._checkLoaded();const B=this.getLayer(o);B?Z(B.getPaintProperty(f),T)||(B.setPaintProperty(f,T,z)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new c.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(o,f){const T=this.getLayer(o);return T&&T.getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const T=o.source,z=o.sourceLayer,B=this.getSource(T);if(!B)return void this.fire(new c.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const K=B.type;if("geojson"===K&&z)return void this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===K&&!z)return void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===o.id&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided.")));const ie=this._getSourceCaches(T);for(const le of ie)le.setFeatureState(z,o.id,f)}removeFeatureState(o,f){this._checkLoaded();const T=o.source,z=this.getSource(T);if(!z)return void this.fire(new c.ErrorEvent(new Error(`The source '${T}' does not exist in the map's style.`)));const B=z.type,K="vector"===B?o.sourceLayer:void 0;if("vector"===B&&!K)return void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&"string"!=typeof o.id&&"number"!=typeof o.id)return void this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const ie=this._getSourceCaches(T);for(const le of ie)le.removeFeatureState(K,o.id,f)}getFeatureState(o){this._checkLoaded();const f=o.source,T=o.sourceLayer,z=this.getSource(f);if(z){if("vector"!==z.type||T)return void 0===o.id&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(T,o.id);this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new c.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o={};for(const f in this._sourceCaches){const T=this._sourceCaches[f].getSource();o[T.id]||(o[T.id]=T.serialize())}return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:o,layers:this._serializeLayers(this._order)},f=>void 0!==f)}_updateLayer(o){this._updatedLayers[o.id]=!0;const f=this._getLayerSourceCache(o);o.source&&!this._updatedSources[o.source]&&f&&"raster"!==f.getSource().type&&(this._updatedSources[o.source]="reload",f.pause()),this._changed=!0,o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const f=K=>"fill-extrusion"===this._layers[K].type,T={},z=[];for(let K=this._order.length-1;K>=0;K--){const ie=this._order[K];if(f(ie)){T[ie]=K;for(const le of o){const ve=le[ie];if(ve)for(const _e of ve)z.push(_e)}}}z.sort((K,ie)=>ie.intersectionZ-K.intersectionZ);const B=[];for(let K=this._order.length-1;K>=0;K--){const ie=this._order[K];if(f(ie))for(let le=z.length-1;le>=0;le--){const ve=z[le].feature;if(T[ve.layer.id]<K)break;B.push(ve),z.pop()}else for(const le of o){const ve=le[ie];if(ve)for(const _e of ve)B.push(_e.feature)}}return B}queryRenderedFeatures(o,f,T){f&&f.filter&&this._validate(c.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const z={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const le of f.layers){const ve=this._layers[le];if(!ve)return this.fire(new c.ErrorEvent(new Error(`The layer '${le}' does not exist in the map's style and cannot be queried for features.`))),[];z[ve.source]=!0}}const B=[];f.availableImages=this._availableImages;const K=f&&f.layers?f.layers.some(le=>{const ve=this.getLayer(le);return ve&&ve.is3D()}):this.has3DLayers(),ie=ji.createFromScreenPoints(o,T);for(const le in this._sourceCaches){const ve=this._sourceCaches[le].getSource().id;f.layers&&!z[ve]||B.push(qe(this._sourceCaches[le],this._layers,this._serializedLayers,ie,f,T,K,!!this.map._showQueryGeometry))}return this.placement&&B.push(function(le,ve,_e,Pe,at,gt,mt){const xt={},kt=gt.queryRenderedSymbols(Pe),Ge=[];for(const ft of Object.keys(kt).map(Number))Ge.push(mt[ft]);Ge.sort(It);for(const ft of Ge){const Dt=ft.featureIndex.lookupSymbolFeatures(kt[ft.bucketInstanceId],ve,ft.bucketIndex,ft.sourceLayerIndex,at.filter,at.layers,at.availableImages,le);for(const Bt in Dt){const Qt=xt[Bt]=xt[Bt]||[],oi=Dt[Bt];oi.sort((ni,mi)=>{const fi=ft.featureSortOrder;if(fi){const Ai=fi.indexOf(ni.featureIndex);return fi.indexOf(mi.featureIndex)-Ai}return mi.featureIndex-ni.featureIndex});for(const ni of oi)Qt.push(ni)}}for(const ft in xt)xt[ft].forEach(Dt=>{const Bt=Dt.feature,Qt=_e(le[ft]);if(!Qt)return;const oi=Qt.getFeatureState(Bt.layer["source-layer"],Bt.id);Bt.source=Bt.layer.source,Bt.layer["source-layer"]&&(Bt.sourceLayer=Bt.layer["source-layer"]),Bt.state=oi});return xt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),ie.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(o,f){f&&f.filter&&this._validate(c.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const T=this._getSourceCaches(o);let z=[];for(const B of T)z=z.concat(nt(B,f));return z}addSourceType(o,f,T){return wr.getSourceType(o)?T(new Error(`A source type called "${o}" already exists.`)):(wr.setSourceType(o,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:f.workerSourceURL},T):T(null,null))}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const T=this.light.getLight();let z=!1;for(const K in o)if(!Z(o[K],T[K])){z=!0;break}if(!z)return;const B=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(o,f),this.light.updateTransitions(B)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(o,f=1){if(this._checkLoaded(),!o)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let T=o;if(1===f){if("object"==typeof T.source){const z="terrain-dem-src";this.addSource(z,T.source),T=c.clone$1(T),T=c.extend(T,{source:z})}if(this._validate(c.validateTerrain,"terrain",T))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!T)return;this._createTerrain(T,f)}else{const z=this.terrain,B=z.get();for(const K of Object.keys(c.spec.terrain))!T.hasOwnProperty(K)&&c.spec.terrain[K].default&&(T[K]=c.spec.terrain[K].default);for(const K in T)if(!Z(T[K],B[K])){z.set(T),this.stylesheet.terrain=T;const ie=this._setTransitionParameters({duration:0});z.updateTransitions(ie);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const f=this.fog=new ki(o,this.map.transform);this.stylesheet.fog=o;const T=this._setTransitionParameters({duration:0});f.updateTransitions(T)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,T=f.get();0===Object.keys(o).length&&f.set(o);for(const z in o)if(!Z(o[z],T[z])){f.set(o),this.stylesheet.fog=o;const B=this._setTransitionParameters({duration:0});f.updateTransitions(B);break}}else this._createFog(o);this._markersNeedUpdate=!0}_setTransitionParameters(o){return{now:c.exported.now(),transition:c.extend(o,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const o=this._order.filter(T=>this.isLayerDraped(this._layers[T])),f=this._order.filter(T=>!this.isLayerDraped(this._layers[T]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...f)}_createTerrain(o,f){const T=this.terrain=new vi(o,f);this.stylesheet.terrain=o,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const z=this._setTransitionParameters({duration:0});T.updateTransitions(z)}_force3DLayerUpdate(){for(const o in this._layers){const f=this._layers[o];"fill-extrusion"===f.type&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const f=this._layers[o];"symbol"===f.type&&this._updateLayer(f)}}_validate(o,f,T,z,B={}){return(!B||!1!==B.validate)&&bs(this,o.call(c.validateStyle,c.extend({key:f,style:this.serialize(),value:T,styleSpec:c.spec},z)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this._sourceCaches)this._sourceCaches[o].clearTiles(),this._sourceCaches[o].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){const f=this._getSourceCaches(o);for(const T of f)T.clearTiles()}_reloadSource(o){const f=this._getSourceCaches(o);for(const T of f)T.resume(),T.reload()}_reloadSources(){for(const o of this._getSources())o.reload&&o.reload()}_updateSources(o){for(const f in this._sourceCaches)this._sourceCaches[f].update(o)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const f=this._sourceCaches[o];f.resume(),f.reload()}}_updatePlacement(o,f,T,z,B=!1){let K=!1,ie=!1;const le={};for(const ve of this._order){const _e=this._layers[ve];if("symbol"!==_e.type)continue;if(!le[_e.source]){const at=this._getLayerSourceCache(_e);if(!at)continue;le[_e.source]=at.getRenderableIds(!0).map(gt=>at.getTileByID(gt)).sort((gt,mt)=>mt.tileID.overscaledZ-gt.tileID.overscaledZ||(gt.tileID.isLessThan(mt.tileID)?-1:1))}const Pe=this.crossTileSymbolIndex.addLayer(_e,le[_e.source],o.center.lng,o.projection);K=K||Pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),B=B||this._layerOrderChanged||0===T,this._layerOrderChanged&&this.fire(new c.Event("neworder")),(B||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),o.zoom))&&(this.pauseablePlacement=new cl(o,this._order,B,f,T,z,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),ie=!0),K&&this.pauseablePlacement.placement.setStale()),ie||K)for(const ve of this._order){const _e=this._layers[ve];"symbol"===_e.type&&this.placement.updateLayerOpacities(_e,le[_e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f,T){this.imageManager.getImages(f.icons,T),this._updateTilesForChangedImages();const z=B=>{B&&B.setDependencies(f.tileID.key,f.type,f.icons)};z(this._otherSourceCaches[f.source]),z(this._symbolSourceCaches[f.source])}getGlyphs(o,f,T){this.glyphManager.getGlyphs(f.stacks,T)}getResource(o,f,T){return c.makeRequest(f,T)}_getSourceCache(o){return this._otherSourceCaches[o]}_getLayerSourceCache(o){return"symbol"===o.type?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}_getSourceCaches(o){const f=[];return this._otherSourceCaches[o]&&f.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&f.push(this._symbolSourceCaches[o]),f}_isSourceCacheLoaded(o){const f=this._getSourceCaches(o);return 0===f.length?(this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${o}'`))),!1):f.every(T=>T.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}wr.getSourceType=function(C){return At[C]},wr.setSourceType=function(C,o){At[C]=o},wr.registerForPluginStateChange=c.registerForPluginStateChange;var Pl="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Us="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Ds="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",fa="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Vo="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let ma={},$o={};const Zo=[];as(Pl,Zo),as(Ds,Zo),as(fa,Zo),as(Vo,Zo),ma=Mr("",Ds),$o=Mr(Vo,fa);const Ho=Mr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Za=Pl,Ao="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var mo={background:Mr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Mr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Mr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Mr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Mr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Mr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Mr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Mr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Mr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Mr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Mr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Mr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Mr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Us),skyboxGradient:Mr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Us),skyboxCapture:Mr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Mr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function as(C,o){const f=C.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let T of f)if(T=T.trim(),"#"===T[0]&&T.includes("if")&&!T.includes("endif")){T=T.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const z=T.split(" ");for(const B of z)o.includes(B)||o.push(B)}}function Mr(C,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=o.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),z={},B=[...Zo];return as(C,B),as(o,B),{fragmentSource:C=C.replace(f,(K,ie,le,ve,_e)=>(z[_e]=!0,"define"===ie?`\n#ifndef HAS_UNIFORM_u_${_e}\nvarying ${le} ${ve} ${_e};\n#else\nuniform ${le} ${ve} u_${_e};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${_e}\n    ${le} ${ve} ${_e} = u_${_e};\n#endif\n`)),vertexSource:o=o.replace(f,(K,ie,le,ve,_e)=>{const Pe="float"===ve?"vec2":"vec4",at=_e.match(/color/)?"color":Pe;return z[_e]?"define"===ie?`\n#ifndef HAS_UNIFORM_u_${_e}\nuniform lowp float u_${_e}_t;\nattribute ${le} ${Pe} a_${_e};\nvarying ${le} ${ve} ${_e};\n#else\nuniform ${le} ${ve} u_${_e};\n#endif\n`:"vec4"===at?`\n#ifndef HAS_UNIFORM_u_${_e}\n    ${_e} = a_${_e};\n#else\n    ${le} ${ve} ${_e} = u_${_e};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${_e}\n    ${_e} = unpack_mix_${at}(a_${_e}, u_${_e}_t);\n#else\n    ${le} ${ve} ${_e} = u_${_e};\n#endif\n`:"define"===ie?`\n#ifndef HAS_UNIFORM_u_${_e}\nuniform lowp float u_${_e}_t;\nattribute ${le} ${Pe} a_${_e};\n#else\nuniform ${le} ${ve} u_${_e};\n#endif\n`:"vec4"===at?`\n#ifndef HAS_UNIFORM_u_${_e}\n    ${le} ${ve} ${_e} = a_${_e};\n#else\n    ${le} ${ve} ${_e} = u_${_e};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${_e}\n    ${le} ${ve} ${_e} = unpack_mix_${at}(a_${_e}, u_${_e}_t);\n#else\n    ${le} ${ve} ${_e} = u_${_e};\n#endif\n`}),staticAttributes:T,usedDefines:B}}class oc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,f,T,z,B,K,ie){this.context=o;let le=this.boundPaintVertexBuffers.length!==z.length;for(let _e=0;!le&&_e<z.length;_e++)this.boundPaintVertexBuffers[_e]!==z[_e]&&(le=!0);let ve=this.boundDynamicVertexBuffers.length!==ie.length;for(let _e=0;!ve&&_e<ie.length;_e++)this.boundDynamicVertexBuffers[_e]!==ie[_e]&&(ve=!0);if(!o.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==T||le||ve||this.boundIndexBuffer!==B||this.boundVertexOffset!==K)this.freshBind(f,T,z,B,K,ie);else{o.bindVertexArrayOES.set(this.vao);for(const _e of ie)_e&&_e.bind();B&&B.dynamicDraw&&B.bind()}}freshBind(o,f,T,z,B,K){let ie;const le=o.numAttributes,ve=this.context,_e=ve.gl;if(ve.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ve.extVertexArrayObject.createVertexArrayOES(),ve.bindVertexArrayOES.set(this.vao),ie=0,this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=z,this.boundVertexOffset=B,this.boundDynamicVertexBuffers=K;else{ie=ve.currentNumAttributes||0;for(let Pe=le;Pe<ie;Pe++)_e.disableVertexAttribArray(Pe)}f.enableAttributes(_e,o),f.bind(),f.setVertexAttribPointers(_e,o,B);for(const Pe of T)Pe.enableAttributes(_e,o),Pe.bind(),Pe.setVertexAttribPointers(_e,o,B);for(const Pe of K)Pe&&(Pe.enableAttributes(_e,o),Pe.bind(),Pe.setVertexAttribPointers(_e,o,B));z&&z.bind(),ve.currentNumAttributes=le}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ws(C,o){const f=Math.pow(2,o.canonical.z),T=o.canonical.y;return[new c.MercatorCoordinate(0,T/f).toLngLat().lat,new c.MercatorCoordinate(0,(T+1)/f).toLngLat().lat]}function Ko(C,o,f,T,z,B,K){const ie=C.context,le=ie.gl,ve=f.fbo;if(!ve)return;C.prepareDrawTile();const _e=C.useProgram("hillshade");ie.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,ve.colorAttachment.get());const Pe=((xt,kt,Ge,ft)=>{const Dt=Ge.paint.get("hillshade-shadow-color"),Bt=Ge.paint.get("hillshade-highlight-color"),Qt=Ge.paint.get("hillshade-accent-color");let oi=Ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ge.paint.get("hillshade-illumination-anchor")&&(oi-=xt.transform.angle);const ni=!xt.options.moving;return{u_matrix:ft||xt.transform.calculateProjMatrix(kt.tileID.toUnwrapped(),ni),u_image:0,u_latrange:Ws(0,kt.tileID),u_light:[Ge.paint.get("hillshade-exaggeration"),oi],u_shadow:Dt,u_highlight:Bt,u_accent:Qt}})(C,f,T,C.terrain?o.projMatrix:null);C.prepareDrawProgram(ie,_e,o.toUnwrapped());const{tileBoundsBuffer:at,tileBoundsIndexBuffer:gt,tileBoundsSegments:mt}=C.getTileBoundsBuffers(f);_e.draw(ie,le.TRIANGLES,z,B,K,c.CullFaceMode.disabled,Pe,T.id,at,gt,mt)}function zl(C,o,f){if(!o.needsDEMTextureUpload)return;const T=C.context,z=T.gl;T.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||C.getTileTexture(f.stride);const B=f.getPixels();o.demTexture?o.demTexture.update(B,{premultiply:!1}):o.demTexture=new c.Texture(T,B,z.RGBA,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Do(C,o,f,T,z,B){const K=C.context,ie=K.gl;if(!o.dem)return;const le=o.dem;if(K.activeTexture.set(ie.TEXTURE1),zl(C,o,le),!o.demTexture)return;o.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);const ve=le.dim;K.activeTexture.set(ie.TEXTURE0);let _e=o.fbo;if(!_e){const mt=new c.Texture(K,{width:ve,height:ve,data:null},ie.RGBA);mt.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),_e=o.fbo=K.createFramebuffer(ve,ve,!0),_e.colorAttachment.set(mt.texture)}K.bindFramebuffer.set(_e.framebuffer),K.viewport.set([0,0,ve,ve]);const{tileBoundsBuffer:Pe,tileBoundsIndexBuffer:at,tileBoundsSegments:gt}=C.getMercatorTileBoundsBuffers();C.useProgram("hillshadePrepare").draw(K,ie.TRIANGLES,T,z,B,c.CullFaceMode.disabled,((mt,xt)=>{const kt=xt.stride,Ge=c.create();return c.ortho(Ge,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(Ge,Ge,[0,-c.EXTENT,0]),{u_matrix:Ge,u_image:1,u_dimension:[kt,kt],u_zoom:mt.overscaledZ,u_unpack:xt.unpackVector}})(o.tileID,le),f.id,Pe,at,gt),o.needsHillshadePrepare=!1}const is=C=>({u_matrix:new c.UniformMatrix4f(C),u_image0:new c.Uniform1i(C),u_skirt_height:new c.Uniform1f(C)}),Ro=(C,o)=>({u_matrix:C,u_image0:0,u_skirt_height:o}),ao=(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt)=>({u_proj_matrix:Float32Array.from(C),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(T),u_merc_matrix:f,u_zoom_transition:z,u_merc_center:B,u_image0:0,u_frustum_tl:K,u_frustum_tr:ie,u_frustum_br:le,u_frustum_bl:ve,u_globe_pos:_e,u_globe_radius:Pe,u_viewport:at,u_grid_matrix:mt?Float32Array.from(mt):new Float32Array(9),u_skirt_height:gt});function Jo(C,o){return null!=C&&null!=o&&!(!C.hasData()||!o.hasData())&&null!=C.demTexture&&null!=o.demTexture&&C.tileID.key!==o.tileID.key}const lo=new class{constructor(){this.operations={}}newMorphing(C,o,f,T,z){if(C in this.operations){const B=this.operations[C];B.to.tileID.key!==f.tileID.key&&(B.queued=f)}else this.operations[C]={startTime:T,phase:0,duration:z,from:o,to:f,queued:null}}getMorphValuesForProxy(C){if(!(C in this.operations))return null;const o=this.operations[C];return{from:o.from,to:o.to,phase:o.phase}}update(C){for(const o in this.operations){const f=this.operations[o];for(f.phase=(C-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,C)){delete this.operations[o];break}}}_nextOp(C,o){return!!C.queued&&(C.from=C.to,C.to=C.queued,C.queued=null,C.phase=0,C.startTime=o,!0)}_validOp(C){return C.from.hasData()&&C.to.hasData()}},Xr={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ul(C){return 6*Math.pow(1.5,22-C)}function Rs(C,o){const f=1<<C.z;return!o&&(0===C.x||C.x===f-1)||0===C.y||C.y===f-1}const Ra=C=>({u_matrix:C});function go(C,o,f,T,z){if(z>0){const B=c.exported.now(),K=(B-C.timeAdded)/z,ie=o?(B-o.timeAdded)/z:-1,le=f.getSource(),ve=T.coveringZoomLevel({tileSize:le.tileSize,roundZoom:le.roundZoom}),_e=!o||Math.abs(o.tileID.overscaledZ-ve)>Math.abs(C.tileID.overscaledZ-ve),Pe=_e&&C.refreshedUponExpiration?1:c.clamp(_e?K:1-ie,0,1);return C.refreshedUponExpiration&&K>=1&&(C.refreshedUponExpiration=!1),o?{opacity:1,mix:1-Pe}:{opacity:Pe,mix:0}}return{opacity:1,mix:0}}class ns extends c.SourceCache{constructor(o){const f={type:"raster-dem",maxzoom:o.transform.maxZoom},T=new Zi(Ct(),null),z=st("mock-dem",f,T,o.style);super("mock-dem",z,!1),z.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,f){o.state="loaded",f(null)}}class kl extends c.SourceCache{constructor(o){const f=st("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new Zi(Ct(),null),o.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,f,T){if(o.freezeTileCoverage)return;this.transform=o;const z=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((B,K)=>{if(B[K.key]="",!this._tiles[K.key]){const ie=new c.Tile(K,this._source.tileSize*K.overscaleFactor(),o.tileZoom);ie.state="loaded",this._tiles[K.key]=ie}return B},{});for(const B in this._tiles)B in z||(this.freeFBO(B),this._tiles[B].unloadVectorData(),delete this._tiles[B])}freeFBO(o){const f=this.proxyCachedFBO[o];if(void 0!==f){const T=Object.values(f);this.renderCachePool.push(...T),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class _o extends c.OverscaledTileID{constructor(o,f,T){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=f,this.projMatrix=T}}class Jr extends c.Elevation{constructor(o,f){super(),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[T,z,B]=function(le){const ve=new c.StructArrayLayout2i4,_e=new c.StructArrayLayout3ui6;ve.reserve(17161),_e.reserve(33800);const at=c.EXTENT/128,gt=c.EXTENT+at/2,mt=gt+at;for(let kt=-at;kt<mt;kt+=at)for(let Ge=-at;Ge<mt;Ge+=at){const ft=Ge<0||Ge>gt||kt<0||kt>gt?24575:0,Dt=c.clamp(Math.round(Ge),0,c.EXTENT),Bt=c.clamp(Math.round(kt),0,c.EXTENT);ve.emplaceBack(Dt+ft,Bt)}const xt=(kt,Ge)=>{const ft=131*Ge+kt;_e.emplaceBack(ft+1,ft,ft+131),_e.emplaceBack(ft+131,ft+131+1,ft+1)};for(let kt=1;kt<129;kt++)for(let Ge=1;Ge<129;Ge++)xt(Ge,kt);return[0,129].forEach(kt=>{for(let Ge=0;Ge<130;Ge++)xt(Ge,kt),xt(kt,Ge)}),[ve,_e,32768]}(),K=o.context;this.gridBuffer=K.createVertexBuffer(T,c.posAttributes.members),this.gridIndexBuffer=K.createIndexBuffer(z),this.gridSegments=c.SegmentVector.simpleSegment(0,0,T.length,z.length),this.gridNoSkirtSegments=c.SegmentVector.simpleSegment(0,0,T.length,B),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new kl(f.map),this.orthoMatrix=c.create(),c.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,c.EXTENT,0,c.EXTENT,0,1);const ie=K.gl;this._overlapStencilMode=new c.StencilMode({func:ie.GEQUAL,mask:255},0,255,ie.KEEP,ie.KEEP,ie.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ns(f.map)}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),o.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=o,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,f,T){if(o&&o.terrain){this._style!==o&&(this.style=o),this.enabled=!0;const z=o.terrain.properties;this.sourceCache=0===o.terrain.drapeRenderMode?this._mockSourceCache:o._getSourceCache(z.get("source")),this._exaggeration=z.get("exaggeration");const B=()=>{this.sourceCache.used&&c.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const K=this.getScaledDemTileSize();this.sourceCache.update(f,K,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,B(),this._initializing=!0),B(),f.updateElevation(!0,T),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const o=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==o.efficiency&&c.warnOnce(`Terrain render cache efficiency is not optimal (${o.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${o.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(o){o.coord&&"source"===o.dataType?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):"style"===o.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._sourceCaches)this._style._sourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,T=this.painter.transform;this._initializing&&(this._initializing=0===T._centerAltitude&&-1===this.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(T.center),-1),this._emptyDEMTextureDirty=!this._initializing);const z=this.proxyCoords=f.getIds().map(le=>{const ve=f.getTileByID(le).tileID;return ve.projMatrix=T.calculateProjMatrix(ve.toUnwrapped()),ve});(function(le,ve){const _e=ve.transform.pointCoordinate(ve.transform.getCameraPoint()),Pe=new c.Point(_e.x,_e.y);le.sort((at,gt)=>{if(gt.overscaledZ-at.overscaledZ)return gt.overscaledZ-at.overscaledZ;const mt=new c.Point(at.canonical.x+(1<<at.canonical.z)*at.wrap,at.canonical.y),xt=new c.Point(gt.canonical.x+(1<<gt.canonical.z)*gt.wrap,gt.canonical.y),kt=Pe.mult(1<<at.canonical.z);return kt.x-=.5,kt.y-=.5,kt.distSqr(mt)-kt.distSqr(xt)})})(z,this.painter),this._previousZoom=T.zoom;const B=this.proxyToSource||{};this.proxyToSource={},z.forEach(le=>{this.proxyToSource[le.key]={}}),this.terrainTileForTile={};const K=this._style._sourceCaches;for(const le in K){const ve=K[le];if(!ve.used||(ve!==this.sourceCache&&this.resetTileLookupCache(ve.id),this._setupProxiedCoordsForOrtho(ve,o[le],B),ve.usedForTerrain))continue;const _e=o[le];ve.getSource().reparseOverscaled&&this._assignTerrainTiles(_e)}this.proxiedCoords[f.id]=z.map(le=>new _o(le,le.key,this.orthoMatrix)),this._assignTerrainTiles(z),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(B),this.renderingToTexture=!1,this._updateTimestamp=c.exported.now();const ie={};this._visibleDemTiles=[];for(const le of this.proxyCoords){const ve=this.terrainTileForTile[le.key];if(!ve)continue;const _e=ve.tileID.key;_e in ie||(this._visibleDemTiles.push(ve),ie[_e]=_e)}}_assignTerrainTiles(o){this._initializing||o.forEach(f=>{if(this.terrainTileForTile[f.key])return;const T=this._findTileCoveringTileID(f,this.sourceCache);T&&(this.terrainTileForTile[f.key]=T)})}_prepareDEMTextures(){const o=this.painter.context,f=o.gl;for(const T in this.terrainTileForTile){const z=this.terrainTileForTile[T],B=z.dem;!B||z.demTexture&&!z.needsDEMTextureUpload||(o.activeTexture.set(f.TEXTURE1),zl(this.painter,z,B))}}_prepareDemTileUniforms(o,f,T,z){if(!f||null==f.demTexture)return!1;const B=o.tileID.canonical,K=Math.pow(2,f.tileID.canonical.z-B.z),ie=z||"";return T[`u_dem_tl${ie}`]=[B.x*K%1,B.y*K%1],T[`u_dem_scale${ie}`]=K,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const o=this.painter.context,f=o.gl;if(!this._emptyDepthBufferTexture){const T=new c.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new c.Texture(o,T,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let o=0;const f=this._visibleDemTiles.reduce((T,z)=>{if(!z.dem)return T;const B=z.dem.tree.minimums[0];return B>0&&o++,T+B},0);return o?f/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,f=o.gl;o.activeTexture.set(f.TEXTURE2);const T=this._getLoadedAreaMinimum(),z=new c.RGBAImage({width:1,height:1},new Uint8Array(c.DEMData.pack(T,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(z,{premultiply:!1}):B=this._emptyDEMTexture=new c.Texture(o,z,f.RGBA,{premultiply:!1}),B}setupElevationDraw(o,f,T){const z=this.painter.context,B=z.gl,K=(ie=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:c.DEMData.getUnpackVector(ie),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var ie;K.u_dem_size=this.sourceCache.getSource().tileSize,K.u_exaggeration=this.exaggeration();let le=null,ve=null,_e=1;if(T&&T.morphing&&this._useVertexMorphing){const Pe=T.morphing.srcDemTile,at=T.morphing.dstDemTile;_e=T.morphing.phase,Pe&&at&&(this._prepareDemTileUniforms(o,Pe,K,"_prev")&&(ve=Pe),this._prepareDemTileUniforms(o,at,K)&&(le=at))}if(ve&&le?(z.activeTexture.set(B.TEXTURE2),le.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),z.activeTexture.set(B.TEXTURE4),ve.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE,B.NEAREST),K.u_dem_lerp=_e):(le=this.terrainTileForTile[o.tileID.key],z.activeTexture.set(B.TEXTURE2),(this._prepareDemTileUniforms(o,le,K)?le.demTexture:this.emptyDEMTexture).bind(B.NEAREST,B.CLAMP_TO_EDGE)),z.activeTexture.set(B.TEXTURE3),T&&T.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),this._depthFBO&&(K.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),K.u_depth_size_inv=[1,1]),T&&T.useMeterToDem&&le){const Pe=(1<<le.tileID.canonical.z)*c.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;K.u_meter_to_dem=Pe}if(T&&T.labelPlaneMatrixInv&&(K.u_label_plane_matrix_inv=T.labelPlaneMatrixInv),f.setTerrainUniformValues(z,K),"globe"===this.painter.transform.projection.name){const Pe=this.globeUniformValues(this.painter.transform,o.tileID.canonical,T&&T.useDenormalizedUpVectorScale);f.setGlobeUniformValues(z,Pe)}}globeUniformValues(o,f,T){const z=o.projection;return{u_tile_tl_up:z.upVector(f,0,0),u_tile_tr_up:z.upVector(f,c.EXTENT,0),u_tile_br_up:z.upVector(f,c.EXTENT,c.EXTENT),u_tile_bl_up:z.upVector(f,0,c.EXTENT),u_tile_up_scale:T?c.globeMetersToEcef(1):z.upVectorScale(f,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const f=this.painter,T=this.painter.context;0!==o.length&&(T.bindFramebuffer.set(null),T.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(z,B,K,ie,le){if("globe"===z.transform.projection.name)!function(ve,_e,Pe,at,gt){const mt=ve.context,xt=mt.gl;let kt,Ge;const ft=ve.options.showTerrainWireframe?2:0,Dt=ve.transform,Bt=c.globeUseCustomAntiAliasing(ve,mt,Dt),Qt=(bn,Ri)=>{if(Ge===bn)return;const Li=[Xr[bn],"PROJECTION_GLOBE_VIEW"];Bt&&Li.push("CUSTOM_ANTIALIASING"),Ri&&Li.push(Xr[ft]),kt=ve.useProgram("globeRaster",null,Li),Ge=bn},oi=ve.colorModeForRenderPass(),ni=new c.DepthMode(xt.LEQUAL,c.DepthMode.ReadWrite,ve.depthRangeFor3D);lo.update(gt);const mi=c.calculateGlobeMercatorMatrix(Dt),fi=[c.mercatorXfromLng(Dt.center.lng),c.mercatorYfromLat(Dt.center.lat)],Ai=ft?[!1,!0]:[!1],yn=ve.globeSharedBuffers,Oi=[Dt.width*c.exported.devicePixelRatio,Dt.height*c.exported.devicePixelRatio],rn=Float32Array.from(Dt.globeMatrix),zi={useDenormalizedUpVectorScale:!0};if(Ai.forEach(bn=>{const Ri=ve.transform,Li=ul(Ri.zoom)*_e.exaggeration();Ge=-1;const vn=bn?xt.LINES:xt.TRIANGLES;for(const dn of at){const mn=Pe.getTile(dn),er=c.StencilMode.disabled,Er=_e.prevTerrainTileForTile[dn.key],jn=_e.terrainTileForTile[dn.key];Jo(Er,jn)&&lo.newMorphing(dn.key,Er,jn,gt,250),mt.activeTexture.set(xt.TEXTURE0),mn.texture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE);const dr=lo.getMorphValuesForProxy(dn.key),Tr=dr?1:0;dr&&c.extend$1(zi,{morphing:{srcDemTile:dr.from,dstDemTile:dr.to,phase:c.easeCubicInOut(dr.phase)}});const pr=c.tileCornersToBounds(dn.canonical),tr=c.getLatitudinalLod(pr.getCenter().lat),zr=c.getGridMatrix(dn.canonical,pr,tr,Ri.worldSize/Ri._pixelsPerMercatorPixel),ls=c.globeNormalizeECEF(c.globeTileBounds(dn.canonical)),us=ao(Ri.projMatrix,rn,mi,ls,c.globeToMercatorTransition(Ri.zoom),fi,Ri.frustumCorners.TL,Ri.frustumCorners.TR,Ri.frustumCorners.BR,Ri.frustumCorners.BL,Ri.globeCenterInViewSpace,Ri.globeRadius,Oi,Li,zr);if(Qt(Tr,bn),_e.setupElevationDraw(mn,kt,zi),ve.prepareDrawProgram(mt,kt,dn.toUnwrapped()),yn){const[hs,la,Qr]=bn?yn.getWirefameBuffers(ve.context,tr):yn.getGridBuffers(tr,0!==Li);kt.draw(mt,vn,ni,er,oi,c.CullFaceMode.backCCW,us,"globe_raster",hs,la,Qr)}}}),yn){const bn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Bt&&bn.push("CUSTOM_ANTIALIASING"),kt=ve.useProgram("globeRaster",null,bn);for(const Ri of at){const{x:Li,y:vn,z:dn}=Ri.canonical,mn=0===vn,er=vn===(1<<dn)-1,[Er,jn,dr,Tr]=yn.getPoleBuffers(dn);if(Tr&&(mn||er)){const pr=Pe.getTile(Ri);mt.activeTexture.set(xt.TEXTURE0),pr.texture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE);let tr=c.globePoleMatrixForTile(dn,Li,Dt);const zr=c.globeNormalizeECEF(c.globeTileBounds(Ri.canonical)),ls=(us,hs)=>us.draw(mt,xt.TRIANGLES,ni,c.StencilMode.disabled,oi,c.CullFaceMode.disabled,ao(Dt.projMatrix,tr,tr,zr,0,fi,Dt.frustumCorners.TL,Dt.frustumCorners.TR,Dt.frustumCorners.BR,Dt.frustumCorners.BL,Dt.globeCenterInViewSpace,Dt.globeRadius,Oi,0),"globe_pole_raster",hs,dr,Tr);_e.setupElevationDraw(pr,kt,zi),ve.prepareDrawProgram(mt,kt,Ri.toUnwrapped()),mn&&ls(kt,Er),er&&(tr=c.scale(c.create(),tr,[1,-1,1]),ls(kt,jn))}}}}(z,B,K,ie,le);else{const ve=z.context,_e=ve.gl;let Pe,at;const gt=z.options.showTerrainWireframe?2:0,mt=(Dt,Bt)=>{if(at===Dt)return;const Qt=[Xr[Dt]];Bt&&Qt.push(Xr[gt]),Pe=z.useProgram("terrainRaster",null,Qt),at=Dt},xt=z.colorModeForRenderPass(),kt=new c.DepthMode(_e.LEQUAL,c.DepthMode.ReadWrite,z.depthRangeFor3D);lo.update(le);const Ge=z.transform,ft=ul(Ge.zoom)*B.exaggeration();(gt?[!1,!0]:[!1]).forEach(Dt=>{at=-1;const Bt=Dt?_e.LINES:_e.TRIANGLES,[Qt,oi]=Dt?B.getWirefameBuffer():[B.gridIndexBuffer,B.gridSegments];for(const ni of ie){const mi=K.getTile(ni),fi=c.StencilMode.disabled,Ai=B.prevTerrainTileForTile[ni.key],yn=B.terrainTileForTile[ni.key];Jo(Ai,yn)&&lo.newMorphing(ni.key,Ai,yn,le,250),ve.activeTexture.set(_e.TEXTURE0),mi.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST);const Oi=lo.getMorphValuesForProxy(ni.key),rn=Oi?1:0;let zi;Oi&&(zi={morphing:{srcDemTile:Oi.from,dstDemTile:Oi.to,phase:c.easeCubicInOut(Oi.phase)}});const bn=Ro(ni.projMatrix,Rs(ni.canonical,Ge.renderWorldCopies)?ft/10:ft);mt(rn,Dt),B.setupElevationDraw(mi,Pe,zi),z.prepareDrawProgram(ve,Pe,ni.toUnwrapped()),Pe.draw(ve,Bt,kt,fi,xt,c.CullFaceMode.backCCW,bn,"terrain_raster",B.gridBuffer,Qt,oi)}})}}(f,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(0===this._drapedRenderBatches.length)return o+1;this.renderingToTexture=!0;const f=this.painter,T=this.painter.context,z=this.proxySourceCache,B=this.proxiedCoords[z.id],K=this._drapedRenderBatches.shift(),ie=[],le=f.style.order;let ve=0;for(const _e of B){const Pe=z.getTileByID(_e.proxyTileKey),at=z.proxyCachedFBO[_e.key]?z.proxyCachedFBO[_e.key][o]:void 0,gt=void 0!==at?z.renderCache[at]:this.pool[ve++],mt=void 0!==at;if(Pe.texture=gt.tex,mt&&!gt.dirty){ie.push(Pe.tileID);continue}let xt;T.bindFramebuffer.set(gt.fb.framebuffer),this.renderedToTile=!1,gt.dirty&&(T.clear({color:c.Color.transparent,stencil:0}),gt.dirty=!1);for(let kt=K.start;kt<=K.end;++kt){const Ge=f.style._layers[le[kt]];if(Ge.isHidden(f.transform.zoom))continue;const ft=f.style._getLayerSourceCache(Ge),Dt=ft?this.proxyToSource[_e.key][ft.id]:[_e];if(!Dt)continue;const Bt=Dt;T.viewport.set([0,0,gt.fb.width,gt.fb.height]),xt!==(ft?ft.id:null)&&(this._setupStencil(gt,Dt,Ge,ft),xt=ft?ft.id:null),f.renderLayer(f,ft,Ge,Bt)}this.renderedToTile?(gt.dirty=!0,ie.push(Pe.tileID)):mt||--ve,5===ve&&(ve=0,this.renderToBackBuffer(ie))}return this.renderToBackBuffer(ie),this.renderingToTexture=!1,T.bindFramebuffer.set(null),T.viewport.set([0,0,f.width,f.height]),K.end+1}postRender(){}renderCacheEfficiency(o){const f=o.order.length;if(0===f)return{efficiency:100};let T,z=0,B=0,K=!1;for(let ie=0;ie<f;++ie){const le=o._layers[o.order[ie]];this._style.isLayerDraped(le)?(K&&++z,++B):K||(K=!0,T=le.id)}return 0===B?{efficiency:100}:{efficiency:100*(1-z/B),firstUndrapedLayer:T}}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{o=Math.min(o,f.dem.tree.minimums[0])}),0===o?o:(o-30)*this._exaggeration}raycast(o,f,T){if(!this._visibleDemTiles)return null;const z=this._visibleDemTiles.filter(B=>B.dem).map(B=>{const K=B.tileID,ie=1<<K.overscaledZ,{x:le,y:ve}=K.canonical,_e=le/ie,Pe=(le+1)/ie,at=ve/ie,gt=(ve+1)/ie;return{minx:_e,miny:at,maxx:Pe,maxy:gt,t:B.dem.tree.raycastRoot(_e,at,Pe,gt,o,f,T),tile:B}});z.sort((B,K)=>(null!==B.t?B.t:Number.MAX_VALUE)-(null!==K.t?K.t:Number.MAX_VALUE));for(const B of z){if(null==B.t)return null;const K=B.tile.dem.tree.raycast(B.minx,B.miny,B.maxx,B.maxy,o,f,T);if(null!=K)return K}return null}_createFBO(){const o=this.painter.context,f=o.gl,T=this.drapeBufferSize;o.activeTexture.set(f.TEXTURE0);const z=new c.Texture(o,{width:T[0],height:T[1],data:null},f.RGBA);z.bind(f.LINEAR,f.CLAMP_TO_EDGE);const B=o.createFramebuffer(T[0],T[1],!1);return B.colorAttachment.set(z.texture),B.depthAttachment=new ae(o,B.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,T[0],T[1]),this._stencilRef=0,B.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):B.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&!o.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:B,tex:z,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const f=this._style._layers[o],T=f.isHidden(this.painter.transform.zoom);return"custom"===f.type?!T&&f.shouldRedrape():!T&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const T of this._style._getSources())if(T instanceof Vt){o=!0;break}if(!o)return;const f={};for(let T=0;T<this._style.order.length;++T){const z=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(z);if(B&&!f[B.id]&&!z.isHidden(this.painter.transform.zoom)&&"line"===z.type&&z.widthExpression()instanceof c.ZoomDependentExpression){f[B.id]=!0;for(const K of this.proxyCoords){const ie=this.proxyToSource[K.key][B.id];if(ie)for(const le of ie)this._clearRenderCacheForTile(B.id,le)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const T in this._style._sourceCaches)if(this._style._sourceCaches[T]._source instanceof $t){o=!0;break}if(!o)return;const f={};for(let T=0;T<this._style.order.length;++T){const z=this._style._layers[this._style.order[T]],B=this._style._getLayerSourceCache(z);if(!B||f[B.id]||z.isHidden(this.painter.transform.zoom)||"raster"!==z.type)continue;const K=z.paint.get("raster-fade-duration");for(const ie of this.proxyCoords){const le=this.proxyToSource[ie.key][B.id];if(le)for(const ve of le){const _e=go(B.getTile(ve),B.findLoadedParent(ve,0),B,this.painter.transform,K);(1!==_e.opacity||0!==_e.mix)&&this._clearRenderCacheForTile(B.id,ve)}}}}_setupDrapedRenderBatches(){const o=this._style.order,f=o.length;if(0===f)return;const T=[];let z,B=0,K=this._style._layers[o[B]];for(;!this._style.isLayerDraped(K)&&K.isHidden(this.painter.transform.zoom)&&++B<f;)K=this._style._layers[o[B]];for(;B<f;++B){const ie=this._style._layers[o[B]];ie.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(ie)?void 0===z&&(z=B):void 0!==z&&(T.push({start:z,end:B-1}),z=void 0))}void 0!==z&&T.push({start:z,end:B-1}),this._drapedRenderBatches=T}_setupRenderCache(o){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const K=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let ie=0;ie<K.length;++ie){const le=Object.values(K[ie]);f.renderCachePool.push(...le)}}return}this._clearRasterLayersFromRenderCache();const T=this.proxyCoords,z=this._tilesDirty;for(let K=T.length-1;K>=0;K--){const ie=T[K];if(f.getTileByID(ie.key),void 0!==f.proxyCachedFBO[ie.key]){const le=o[ie.key],ve=this.proxyToSource[ie.key];let _e=0;for(const Pe in ve){const at=ve[Pe],gt=le[Pe];if(!gt||gt.length!==at.length||at.some((mt,xt)=>mt!==gt[xt]||z[Pe]&&z[Pe].hasOwnProperty(mt.key))){_e=-1;break}++_e}for(const Pe in f.proxyCachedFBO[ie.key])f.renderCache[f.proxyCachedFBO[ie.key][Pe]].dirty=_e<0||_e!==Object.values(le).length}}const B=[...this._drapedRenderBatches];B.sort((K,ie)=>ie.end-ie.start-(K.end-K.start));for(const K of B)for(const ie of T){if(f.proxyCachedFBO[ie.key])continue;let le=f.renderCachePool.pop();void 0===le&&f.renderCache.length<50&&(le=f.renderCache.length,f.renderCache.push(this._createFBO())),void 0!==le&&(f.proxyCachedFBO[ie.key]={},f.proxyCachedFBO[ie.key][K.start]=le,f.renderCache[le].dirty=!0)}this._tilesDirty={}}_setupStencil(o,f,T,z){if(!z||!this._sourceTilesOverlap[z.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const B=this.painter.context,K=B.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let ie;if(T.isTileClipped())ie=f.length,this._overlapStencilMode.test={func:K.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);ie=1,this._overlapStencilMode.test={func:K.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+ie>255&&(B.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=ie,this._overlapStencilMode.ref=this._stencilRef,T.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):c.StencilMode.disabled}_renderTileClippingMasks(o,f){const T=this.painter,z=this.painter.context,B=z.gl;T._tileClippingMaskIDs={},z.setColorMode(c.ColorMode.disabled),z.setDepthMode(c.DepthMode.disabled);const K=T.useProgram("clippingMask");for(const ie of o){const le=T._tileClippingMaskIDs[ie.key]=--f;K.draw(z,B.TRIANGLES,c.DepthMode.disabled,new c.StencilMode({func:B.ALWAYS,mask:0},le,255,B.KEEP,B.KEEP,B.REPLACE),c.ColorMode.disabled,c.CullFaceMode.disabled,Ra(ie.projMatrix),"$clipping",T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}}pointCoordinate(o){const f=this.painter.transform;if(o.x<0||o.x>f.width||o.y<0||o.y>f.height)return null;const T=[o.x,o.y,1,1];c.transformMat4$1(T,T,f.pixelMatrixInverse),c.scale$1(T,T,1/T[3]),T[0]/=f.worldSize,T[1]/=f.worldSize;const z=f._camera.position,B=c.mercatorZfromAltitude(1,f.center.lat),K=[z[0],z[1],z[2]/B,0],ie=c.subtract([],T.slice(0,3),K);c.normalize(ie,ie);const le=this.raycast(K,ie,this._exaggeration);return null!==le&&le?(c.scaleAndAdd(K,K,ie,le),K[3]=K[2],K[2]*=B,K):null}drawDepth(){const o=this.painter,f=o.context,T=this.proxySourceCache,z=Math.ceil(o.width),B=Math.ceil(o.height);if(!this._depthFBO||this._depthFBO.width===z&&this._depthFBO.height===B||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const K=f.gl,ie=f.createFramebuffer(z,B,!0);f.activeTexture.set(K.TEXTURE0);const le=new c.Texture(f,{width:z,height:B,data:null},K.RGBA);le.bind(K.NEAREST,K.CLAMP_TO_EDGE),ie.colorAttachment.set(le.texture);const ve=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,z,B);ie.depthAttachment.set(ve),this._depthFBO=ie,this._depthTexture=le}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,z,B]),function(K,ie,le,ve){if("globe"===K.transform.projection.name)return;const _e=K.context,Pe=_e.gl;_e.clear({depth:1});const at=K.useProgram("terrainDepth"),gt=new c.DepthMode(Pe.LESS,c.DepthMode.ReadWrite,K.depthRangeFor3D);for(const mt of ve){const xt=le.getTile(mt),kt=Ro(mt.projMatrix,0);ie.setupElevationDraw(xt,at),at.draw(_e,Pe.TRIANGLES,gt,c.StencilMode.disabled,c.ColorMode.unblended,c.CullFaceMode.backCCW,kt,"terrain_depth",ie.gridBuffer,ie.gridIndexBuffer,ie.gridNoSkirtSegments)}}(o,this,T,this.proxyCoords)}_setupProxiedCoordsForOrtho(o,f,T){if(o.getSource()instanceof wt)return this._setupProxiedCoordsForImageSource(o,f,T);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const z=this.proxiedCoords[o.id]=[],B=this.proxyCoords;for(let ie=0;ie<B.length;ie++){const le=B[ie],ve=this._findTileCoveringTileID(le,o);if(ve){const _e=this._createProxiedId(le,ve,T[le.key]&&T[le.key][o.id]);z.push(_e),this.proxyToSource[le.key][o.id]=[_e]}}let K=!1;for(let ie=0;ie<f.length;ie++){const le=o.getTile(f[ie]);if(!le||!le.hasData())continue;const ve=this._findTileCoveringTileID(le.tileID,this.proxySourceCache);if(ve&&ve.tileID.canonical.z!==le.tileID.canonical.z){const _e=this.proxyToSource[ve.tileID.key][o.id],Pe=this._createProxiedId(ve.tileID,le,T[ve.tileID.key]&&T[ve.tileID.key][o.id]);_e?_e.splice(_e.length-1,0,Pe):this.proxyToSource[ve.tileID.key][o.id]=[Pe],z.push(Pe),K=!0}}this._sourceTilesOverlap[o.id]=K}_setupProxiedCoordsForImageSource(o,f,T){if(!o.getSource().loaded())return;const z=this.proxiedCoords[o.id]=[],B=this.proxyCoords,K=o.getSource(),ie=new c.Point(K.tileID.x,K.tileID.y)._div(1<<K.tileID.z),le=K.coordinates.map(c.MercatorCoordinate.fromLngLat).reduce((_e,Pe)=>(_e.min.x=Math.min(_e.min.x,Pe.x-ie.x),_e.min.y=Math.min(_e.min.y,Pe.y-ie.y),_e.max.x=Math.max(_e.max.x,Pe.x-ie.x),_e.max.y=Math.max(_e.max.y,Pe.y-ie.y),_e),{min:new c.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new c.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),ve=(_e,Pe)=>{const at=_e.wrap+_e.canonical.x/(1<<_e.canonical.z),gt=_e.canonical.y/(1<<_e.canonical.z),mt=c.EXTENT/(1<<_e.canonical.z),xt=Pe.wrap+Pe.canonical.x/(1<<Pe.canonical.z),kt=Pe.canonical.y/(1<<Pe.canonical.z);return at+mt<xt+le.min.x||at>xt+le.max.x||gt+mt<kt+le.min.y||gt>kt+le.max.y};for(let _e=0;_e<B.length;_e++){const Pe=B[_e];for(let at=0;at<f.length;at++){const gt=o.getTile(f[at]);if(!gt||!gt.hasData()||ve(Pe,gt.tileID))continue;const mt=this._createProxiedId(Pe,gt,T[Pe.key]&&T[Pe.key][o.id]),xt=this.proxyToSource[Pe.key][o.id];xt?xt.push(mt):this.proxyToSource[Pe.key][o.id]=[mt],z.push(mt)}}}_createProxiedId(o,f,T){let z=this.orthoMatrix;if(T){const B=T.find(K=>K.key===f.tileID.key);if(B)return B}if(f.tileID.key!==o.key){const B=o.canonical.z-f.tileID.canonical.z;let K,ie,le;z=c.create();const ve=f.tileID.wrap-o.wrap<<o.overscaledZ;B>0?(K=c.EXTENT>>B,ie=K*((f.tileID.canonical.x<<B)-o.canonical.x+ve),le=K*((f.tileID.canonical.y<<B)-o.canonical.y)):(K=c.EXTENT<<-B,ie=c.EXTENT*(f.tileID.canonical.x-(o.canonical.x+ve<<-B)),le=c.EXTENT*(f.tileID.canonical.y-(o.canonical.y<<-B))),c.ortho(z,0,K,0,K,0,1),c.translate(z,z,[ie,le,0])}return new _o(f.tileID,o.key,z)}_findTileCoveringTileID(o,f){let T=f.getTile(o);if(T&&T.hasData())return T;const z=this._findCoveringTileCache[f.id],B=z[o.key];if(T=B?f.getTileByID(B):null,T&&T.hasData()||null===B)return T;let K=T?T.tileID:o,ie=K.overscaledZ;const le=f.getSource().minzoom,ve=[];if(!B){const Pe=f.getSource().maxzoom;if(o.canonical.z>=Pe){const at=o.canonical.z-Pe;f.getSource().reparseOverscaled?(ie=Math.max(o.canonical.z+2,f.transform.tileZoom),K=new c.OverscaledTileID(ie,o.wrap,Pe,o.canonical.x>>at,o.canonical.y>>at)):0!==at&&(ie=Pe,K=new c.OverscaledTileID(ie,o.wrap,Pe,o.canonical.x>>at,o.canonical.y>>at))}K.key!==o.key&&(ve.push(K.key),T=f.getTile(K))}const _e=Pe=>{ve.forEach(at=>{z[at]=Pe}),ve.length=0};for(ie-=1;ie>=le&&(!T||!T.hasData());ie--){T&&_e(T.tileID.key);const Pe=K.calculateScaledKey(ie);if(T=f.getTileByID(Pe),T&&T.hasData())break;const at=z[Pe];if(null===at)break;void 0===at?ve.push(Pe):T=f.getTileByID(at)}return _e(T?T.tileID.key:null),T&&T.hasData()?T:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,f){let T=this._tilesDirty[o];T||(T=this._tilesDirty[o]={}),T[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const o=function(f){let T=0;const z=new c.StructArrayLayout2ui4,B=131;for(let K=1;K<129;K++){for(let ie=1;ie<129;ie++)T=K*B+ie,z.emplaceBack(T,T+1),z.emplaceBack(T,T+B),z.emplaceBack(T+1,T+B),128===K&&z.emplaceBack(T+B,T+B+1);z.emplaceBack(T+1,T+1+B)}return z}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(o),this.wireframeSegments=c.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Cr{static cacheKey(o,f,T,z){let B=`${f}${z?z.cacheKey:""}`;for(const K of T)o.usedDefines.includes(K)&&(B+=`/${K}`);return B}constructor(o,f,T,z,B,K){const ie=o.gl;this.program=ie.createProgram();const le=function(Ge){const ft=[];for(let Dt=0;Dt<Ge.length;Dt++){if(null===Ge[Dt])continue;const Bt=Ge[Dt].split(" ");ft.push(Bt.pop())}return ft}(T.staticAttributes),ve=z?z.getBinderAttributes():[],_e=le.concat(ve);let Pe=z?z.defines():[];Pe=Pe.concat(K.map(Ge=>`#define ${Ge}`));const at=o.isWebGL2?"#version 300 es\n":"",gt=at+Pe.concat(o.extStandardDerivatives&&0===at.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Ao):Ao,Ao,Za,Ho.fragmentSource,$o.fragmentSource,T.fragmentSource).join("\n"),mt=at+Pe.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Za,Ho.vertexSource,$o.vertexSource,ma.vertexSource,T.vertexSource).join("\n"),xt=ie.createShader(ie.FRAGMENT_SHADER);if(ie.isContextLost())return void(this.failedToCreate=!0);ie.shaderSource(xt,gt),ie.compileShader(xt),ie.attachShader(this.program,xt);const kt=ie.createShader(ie.VERTEX_SHADER);if(ie.isContextLost())this.failedToCreate=!0;else{ie.shaderSource(kt,mt),ie.compileShader(kt),ie.attachShader(this.program,kt),this.attributes={},this.numAttributes=_e.length;for(let Ge=0;Ge<this.numAttributes;Ge++)_e[Ge]&&(ie.bindAttribLocation(this.program,Ge,_e[Ge]),this.attributes[_e[Ge]]=Ge);ie.linkProgram(this.program),ie.deleteShader(kt),ie.deleteShader(xt),this.fixedUniforms=B(o),this.binderUniforms=z?z.getUniforms(o):[],K.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new c.Uniform1i(Ge=o),u_dem_prev:new c.Uniform1i(Ge),u_dem_unpack:new c.Uniform4f(Ge),u_dem_tl:new c.Uniform2f(Ge),u_dem_scale:new c.Uniform1f(Ge),u_dem_tl_prev:new c.Uniform2f(Ge),u_dem_scale_prev:new c.Uniform1f(Ge),u_dem_size:new c.Uniform1f(Ge),u_dem_lerp:new c.Uniform1f(Ge),u_exaggeration:new c.Uniform1f(Ge),u_depth:new c.Uniform1i(Ge),u_depth_size_inv:new c.Uniform2f(Ge),u_meter_to_dem:new c.Uniform1f(Ge),u_label_plane_matrix_inv:new c.UniformMatrix4f(Ge)}),K.includes("GLOBE")&&(this.globeUniforms=(Ge=>({u_tile_tl_up:new c.Uniform3f(Ge),u_tile_tr_up:new c.Uniform3f(Ge),u_tile_br_up:new c.Uniform3f(Ge),u_tile_bl_up:new c.Uniform3f(Ge),u_tile_up_scale:new c.Uniform1f(Ge)}))(o)),K.includes("FOG")&&(this.fogUniforms=(Ge=>({u_fog_matrix:new c.UniformMatrix4f(Ge),u_fog_range:new c.Uniform2f(Ge),u_fog_color:new c.Uniform4f(Ge),u_fog_horizon_blend:new c.Uniform1f(Ge),u_fog_temporal_offset:new c.Uniform1f(Ge),u_frustum_tl:new c.Uniform3f(Ge),u_frustum_tr:new c.Uniform3f(Ge),u_frustum_br:new c.Uniform3f(Ge),u_frustum_bl:new c.Uniform3f(Ge),u_globe_pos:new c.Uniform3f(Ge),u_globe_radius:new c.Uniform1f(Ge),u_globe_transition:new c.Uniform1f(Ge),u_is_globe:new c.Uniform1i(Ge),u_viewport:new c.Uniform2f(Ge)}))(o))}var Ge}setTerrainUniformValues(o,f){if(!this.terrainUniforms)return;const T=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const z in f)T[z]&&T[z].set(this.program,z,f[z])}}setGlobeUniformValues(o,f){if(!this.globeUniforms)return;const T=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const z in f)T[z]&&T[z].set(this.program,z,f[z])}}setFogUniformValues(o,f){if(!this.fogUniforms)return;const T=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const z in f)T[z].set(this.program,z,f[z])}}draw(o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt){const kt=o.gl;if(this.failedToCreate)return;o.program.set(this.program),o.setDepthMode(T),o.setStencilMode(z),o.setColorMode(B),o.setCullFace(K);for(const ft of Object.keys(this.fixedUniforms))this.fixedUniforms[ft].set(this.program,ft,ie[ft]);mt&&mt.setUniforms(this.program,o,this.binderUniforms,at,{zoom:gt});const Ge={[kt.LINES]:2,[kt.TRIANGLES]:3,[kt.LINE_STRIP]:1}[f];for(const ft of Pe.get()){const Dt=ft.vaos||(ft.vaos={});(Dt[le]||(Dt[le]=new oc)).bind(o,this,ve,mt?mt.getPaintVertexBuffers():[],_e,ft.vertexOffset,xt||[]),kt.drawElements(f,ft.primitiveLength*Ge,kt.UNSIGNED_SHORT,ft.primitiveOffset*Ge*2)}}}function eo(C,o){const f=Math.pow(2,o.tileID.overscaledZ),T=o.tileSize*Math.pow(2,C.transform.tileZoom)/f,z=T*(o.tileID.canonical.x+o.tileID.wrap*f),B=T*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_tile_units_to_pixels:1/pn(o,1,C.transform.tileZoom),u_pixel_coord_upper:[z>>16,B>>16],u_pixel_coord_lower:[65535&z,65535&B]}}const Qo=c.create(),Ts=(C,o,f,T,z,B,K,ie,le,ve,_e)=>{const Pe=o.style.light,at=Pe.properties.get("position"),gt=[at.x,at.y,at.z],mt=c.create$1();"viewport"===Pe.properties.get("anchor")&&(c.fromRotation(mt,-o.transform.angle),c.transformMat3(gt,gt,mt));const xt=Pe.properties.get("color"),kt=o.transform,Ge={u_matrix:C,u_lightpos:gt,u_lightintensity:Pe.properties.get("intensity"),u_lightcolor:[xt.r,xt.g,xt.b],u_vertical_gradient:+f,u_opacity:T,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:z,u_edge_radius:B};return"globe"===kt.projection.name&&(Ge.u_tile_id=[K.canonical.x,K.canonical.y,1<<K.canonical.z],Ge.u_zoom_transition=le,Ge.u_inv_rot_matrix=_e,Ge.u_merc_center=ve,Ge.u_up_dir=kt.projection.upVector(new c.CanonicalTileID(0,0,0),ve[0]*c.EXTENT,ve[1]*c.EXTENT),Ge.u_height_lift=ie),Ge},hl=(C,o,f,T,z,B,K,ie,le,ve,_e,Pe)=>{const at=Ts(C,o,f,T,z,B,K,le,ve,_e,Pe),gt={u_height_factor:-Math.pow(2,K.overscaledZ)/ie.tileSize/8};return c.extend(at,eo(o,ie),gt)},gs=C=>({u_matrix:C}),Ys=(C,o,f)=>c.extend(gs(C),eo(o,f)),Es=(C,o)=>({u_matrix:C,u_world:o}),Cc=(C,o,f,T)=>c.extend(Ys(C,o,f),{u_world:T}),Ss=c.create(),jo=(C,o,f,T,z,B)=>{const K=C.transform,ie="globe"===K.projection.name;let le;if("map"===B.paint.get("circle-pitch-alignment"))if(ie){const _e=c.globePixelsToTileUnits(K.zoom,o.canonical)*K._pixelsPerMercatorPixel;le=Float32Array.from([_e,0,0,_e])}else le=K.calculatePixelsToTileUnitsMatrix(f);else le=new Float32Array([K.pixelsToGLUnits[0],0,0,K.pixelsToGLUnits[1]]);const ve={u_camera_to_center_distance:K.cameraToCenterDistance,u_matrix:C.translatePosMatrix(o.projMatrix,f,B.paint.get("circle-translate"),B.paint.get("circle-translate-anchor")),u_device_pixel_ratio:c.exported.devicePixelRatio,u_extrude_scale:le,u_inv_rot_matrix:Ss,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(ie){ve.u_inv_rot_matrix=T,ve.u_merc_center=z,ve.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],ve.u_zoom_transition=c.globeToMercatorTransition(K.zoom);const _e=z[0]*c.EXTENT,Pe=z[1]*c.EXTENT;ve.u_up_dir=K.projection.upVector(new c.CanonicalTileID(0,0,0),_e,Pe)}return ve},ac=C=>{const o=[];return"map"===C.paint.get("circle-pitch-alignment")&&o.push("PITCH_WITH_MAP"),"map"===C.paint.get("circle-pitch-scale")&&o.push("SCALE_WITH_MAP"),o},to=(C,o,f,T)=>{const z=c.EXTENT/f.tileSize;return{u_matrix:C,u_camera_to_center_distance:o.getCameraToCenterDistance(T),u_extrude_scale:[o.pixelsToGLUnits[0]/z,o.pixelsToGLUnits[1]/z]}},Eo=(C,o,f=1)=>({u_matrix:C,u_color:o,u_overlay:0,u_overlay_scale:f}),ea=c.create(),La=(C,o,f,T,z,B,K)=>{const ie=C.transform,le="globe"===ie.projection.name,ve=le?c.globePixelsToTileUnits(ie.zoom,o.canonical)*ie._pixelsPerMercatorPixel:pn(f,1,B),_e={u_matrix:o.projMatrix,u_extrude_scale:ve,u_intensity:K,u_inv_rot_matrix:ea,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(le){_e.u_inv_rot_matrix=T,_e.u_merc_center=z,_e.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],_e.u_zoom_transition=c.globeToMercatorTransition(ie.zoom);const Pe=z[0]*c.EXTENT,at=z[1]*c.EXTENT;_e.u_up_dir=ie.projection.upVector(new c.CanonicalTileID(0,0,0),Pe,at)}return _e},Pa=(C,o,f,T,z,B,K)=>{const ie=C.transform,le=ie.calculatePixelsToTileUnitsMatrix(o);return{u_matrix:Tl(C,o,f,T),u_pixels_to_tile_units:le,u_device_pixel_ratio:B,u_units_to_pixels:[1/ie.pixelsToGLUnits[0],1/ie.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:z,u_texsize:ks(f)?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Uo(o,C.transform),u_alpha_discard_threshold:0,u_trim_offset:K}},Ka=(C,o,f,T,z)=>{const B=C.transform;return{u_matrix:Tl(C,o,f,T),u_texsize:o.imageAtlasTexture.size,u_pixels_to_tile_units:B.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:z,u_image:0,u_tile_units_to_pixels:Uo(o,B),u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Uo(C,o){return 1/pn(C,1,o.tileZoom)}function Tl(C,o,f,T){return C.translatePosMatrix(T||o.tileID.projMatrix,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function ks(C){const o=C.paint.get("line-dasharray").value;return o.value||"constant"!==o.kind}const ga=(C,o,f,T,z,B)=>{return{u_matrix:C,u_tl_parent:o,u_scale_parent:f,u_fade_t:T.mix,u_opacity:T.opacity*z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:z.paint.get("raster-brightness-min"),u_brightness_high:z.paint.get("raster-brightness-max"),u_saturation_factor:(ie=z.paint.get("raster-saturation"),ie>0?1-1/(1.001-ie):-ie),u_contrast_factor:(K=z.paint.get("raster-contrast"),K>0?1/(1-K):1+K),u_spin_weights:vo(z.paint.get("raster-hue-rotate")),u_perspective_transform:B};var K,ie};function vo(C){C*=Math.PI/180;const o=Math.sin(C),f=Math.cos(C);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const Ja=c.create(),pl=(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt)=>{const kt=z.transform,Ge={u_is_size_zoom_constant:+("constant"===C||"source"===C),u_is_size_feature_constant:+("constant"===C||"camera"===C),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:kt.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:kt.width/kt.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:K,u_coord_matrix:ie,u_is_text:+le,u_pitch_with_map:+T,u_texsize:ve,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ja,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ja,u_up_vector:[0,-1,0]};return"globe"===xt.name&&(Ge.u_tile_id=[_e.canonical.x,_e.canonical.y,1<<_e.canonical.z],Ge.u_zoom_transition=Pe,Ge.u_inv_rot_matrix=gt,Ge.u_merc_center=at,Ge.u_camera_forward=kt._camera.forward(),Ge.u_ecef_origin=c.globeECEFOrigin(kt.globeMatrix,_e.toUnwrapped()),Ge.u_tile_matrix=Float32Array.from(kt.globeMatrix),Ge.u_up_vector=mt),Ge},yo=(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt,kt)=>c.extend(pl(C,o,f,T,z,B,K,ie,le,ve,Pe,at,gt,mt,xt,kt),{u_gamma_scale:T?z.transform.cameraToCenterDistance*Math.cos(z.terrain?0:z.transform._pitch):1,u_device_pixel_ratio:c.exported.devicePixelRatio,u_is_halo:+_e}),ql=(C,o,f,T,z,B,K,ie,le,ve,_e,Pe,at,gt,mt,xt)=>c.extend(yo(C,o,f,T,z,B,K,ie,!0,le,!0,_e,Pe,at,gt,mt,xt),{u_texsize_icon:ve,u_texture_icon:1}),So=(C,o,f)=>({u_matrix:C,u_opacity:o,u_color:f}),lc=(C,o,f,T,z)=>c.extend(function(B,K,ie){const le=K.imageManager.getPattern(B.toString()),{width:ve,height:_e}=K.imageManager.getPixelSize(),Pe=Math.pow(2,ie.tileID.overscaledZ),at=ie.tileSize*Math.pow(2,K.transform.tileZoom)/Pe,gt=at*(ie.tileID.canonical.x+ie.tileID.wrap*Pe),mt=at*ie.tileID.canonical.y;return{u_image:0,u_pattern_tl:le.tl,u_pattern_br:le.br,u_texsize:[ve,_e],u_pattern_size:le.displaySize,u_tile_units_to_pixels:1/pn(ie,1,K.transform.tileZoom),u_pixel_coord_upper:[gt>>16,mt>>16],u_pixel_coord_lower:[65535&gt,65535&mt]}}(T,f,z),{u_matrix:C,u_opacity:o}),Wo={fillExtrusion:C=>({u_matrix:new c.UniformMatrix4f(C),u_lightpos:new c.Uniform3f(C),u_lightintensity:new c.Uniform1f(C),u_lightcolor:new c.Uniform3f(C),u_vertical_gradient:new c.Uniform1f(C),u_opacity:new c.Uniform1f(C),u_edge_radius:new c.Uniform1f(C),u_ao:new c.Uniform2f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_up_dir:new c.Uniform3f(C),u_height_lift:new c.Uniform1f(C)}),fillExtrusionPattern:C=>({u_matrix:new c.UniformMatrix4f(C),u_lightpos:new c.Uniform3f(C),u_lightintensity:new c.Uniform1f(C),u_lightcolor:new c.Uniform3f(C),u_vertical_gradient:new c.Uniform1f(C),u_height_factor:new c.Uniform1f(C),u_edge_radius:new c.Uniform1f(C),u_ao:new c.Uniform2f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_up_dir:new c.Uniform3f(C),u_height_lift:new c.Uniform1f(C),u_image:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_pixel_coord_upper:new c.Uniform2f(C),u_pixel_coord_lower:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C),u_opacity:new c.Uniform1f(C)}),fill:C=>({u_matrix:new c.UniformMatrix4f(C)}),fillPattern:C=>({u_matrix:new c.UniformMatrix4f(C),u_image:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_pixel_coord_upper:new c.Uniform2f(C),u_pixel_coord_lower:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C)}),fillOutline:C=>({u_matrix:new c.UniformMatrix4f(C),u_world:new c.Uniform2f(C)}),fillOutlinePattern:C=>({u_matrix:new c.UniformMatrix4f(C),u_world:new c.Uniform2f(C),u_image:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_pixel_coord_upper:new c.Uniform2f(C),u_pixel_coord_lower:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C)}),circle:C=>({u_camera_to_center_distance:new c.Uniform1f(C),u_extrude_scale:new c.UniformMatrix2f(C),u_device_pixel_ratio:new c.Uniform1f(C),u_matrix:new c.UniformMatrix4f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_up_dir:new c.Uniform3f(C)}),collisionBox:C=>({u_matrix:new c.UniformMatrix4f(C),u_camera_to_center_distance:new c.Uniform1f(C),u_extrude_scale:new c.Uniform2f(C)}),collisionCircle:C=>({u_matrix:new c.UniformMatrix4f(C),u_inv_matrix:new c.UniformMatrix4f(C),u_camera_to_center_distance:new c.Uniform1f(C),u_viewport_size:new c.Uniform2f(C)}),debug:C=>({u_color:new c.UniformColor(C),u_matrix:new c.UniformMatrix4f(C),u_overlay:new c.Uniform1i(C),u_overlay_scale:new c.Uniform1f(C)}),clippingMask:C=>({u_matrix:new c.UniformMatrix4f(C)}),heatmap:C=>({u_extrude_scale:new c.Uniform1f(C),u_intensity:new c.Uniform1f(C),u_matrix:new c.UniformMatrix4f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_up_dir:new c.Uniform3f(C)}),heatmapTexture:C=>({u_image:new c.Uniform1i(C),u_color_ramp:new c.Uniform1i(C),u_opacity:new c.Uniform1f(C)}),hillshade:C=>({u_matrix:new c.UniformMatrix4f(C),u_image:new c.Uniform1i(C),u_latrange:new c.Uniform2f(C),u_light:new c.Uniform2f(C),u_shadow:new c.UniformColor(C),u_highlight:new c.UniformColor(C),u_accent:new c.UniformColor(C)}),hillshadePrepare:C=>({u_matrix:new c.UniformMatrix4f(C),u_image:new c.Uniform1i(C),u_dimension:new c.Uniform2f(C),u_zoom:new c.Uniform1f(C),u_unpack:new c.Uniform4f(C)}),line:C=>({u_matrix:new c.UniformMatrix4f(C),u_pixels_to_tile_units:new c.UniformMatrix2f(C),u_device_pixel_ratio:new c.Uniform1f(C),u_units_to_pixels:new c.Uniform2f(C),u_dash_image:new c.Uniform1i(C),u_gradient_image:new c.Uniform1i(C),u_image_height:new c.Uniform1f(C),u_texsize:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C),u_alpha_discard_threshold:new c.Uniform1f(C),u_trim_offset:new c.Uniform2f(C)}),linePattern:C=>({u_matrix:new c.UniformMatrix4f(C),u_texsize:new c.Uniform2f(C),u_pixels_to_tile_units:new c.UniformMatrix2f(C),u_device_pixel_ratio:new c.Uniform1f(C),u_image:new c.Uniform1i(C),u_units_to_pixels:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C),u_alpha_discard_threshold:new c.Uniform1f(C)}),raster:C=>({u_matrix:new c.UniformMatrix4f(C),u_tl_parent:new c.Uniform2f(C),u_scale_parent:new c.Uniform1f(C),u_fade_t:new c.Uniform1f(C),u_opacity:new c.Uniform1f(C),u_image0:new c.Uniform1i(C),u_image1:new c.Uniform1i(C),u_brightness_low:new c.Uniform1f(C),u_brightness_high:new c.Uniform1f(C),u_saturation_factor:new c.Uniform1f(C),u_contrast_factor:new c.Uniform1f(C),u_spin_weights:new c.Uniform3f(C),u_perspective_transform:new c.Uniform2f(C)}),symbolIcon:C=>({u_is_size_zoom_constant:new c.Uniform1i(C),u_is_size_feature_constant:new c.Uniform1i(C),u_size_t:new c.Uniform1f(C),u_size:new c.Uniform1f(C),u_camera_to_center_distance:new c.Uniform1f(C),u_rotate_symbol:new c.Uniform1i(C),u_aspect_ratio:new c.Uniform1f(C),u_fade_change:new c.Uniform1f(C),u_matrix:new c.UniformMatrix4f(C),u_label_plane_matrix:new c.UniformMatrix4f(C),u_coord_matrix:new c.UniformMatrix4f(C),u_is_text:new c.Uniform1i(C),u_pitch_with_map:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_camera_forward:new c.Uniform3f(C),u_tile_matrix:new c.UniformMatrix4f(C),u_up_vector:new c.Uniform3f(C),u_ecef_origin:new c.Uniform3f(C),u_texture:new c.Uniform1i(C)}),symbolSDF:C=>({u_is_size_zoom_constant:new c.Uniform1i(C),u_is_size_feature_constant:new c.Uniform1i(C),u_size_t:new c.Uniform1f(C),u_size:new c.Uniform1f(C),u_camera_to_center_distance:new c.Uniform1f(C),u_rotate_symbol:new c.Uniform1i(C),u_aspect_ratio:new c.Uniform1f(C),u_fade_change:new c.Uniform1f(C),u_matrix:new c.UniformMatrix4f(C),u_label_plane_matrix:new c.UniformMatrix4f(C),u_coord_matrix:new c.UniformMatrix4f(C),u_is_text:new c.Uniform1i(C),u_pitch_with_map:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_texture:new c.Uniform1i(C),u_gamma_scale:new c.Uniform1f(C),u_device_pixel_ratio:new c.Uniform1f(C),u_tile_id:new c.Uniform3f(C),u_zoom_transition:new c.Uniform1f(C),u_inv_rot_matrix:new c.UniformMatrix4f(C),u_merc_center:new c.Uniform2f(C),u_camera_forward:new c.Uniform3f(C),u_tile_matrix:new c.UniformMatrix4f(C),u_up_vector:new c.Uniform3f(C),u_ecef_origin:new c.Uniform3f(C),u_is_halo:new c.Uniform1i(C)}),symbolTextAndIcon:C=>({u_is_size_zoom_constant:new c.Uniform1i(C),u_is_size_feature_constant:new c.Uniform1i(C),u_size_t:new c.Uniform1f(C),u_size:new c.Uniform1f(C),u_camera_to_center_distance:new c.Uniform1f(C),u_rotate_symbol:new c.Uniform1i(C),u_aspect_ratio:new c.Uniform1f(C),u_fade_change:new c.Uniform1f(C),u_matrix:new c.UniformMatrix4f(C),u_label_plane_matrix:new c.UniformMatrix4f(C),u_coord_matrix:new c.UniformMatrix4f(C),u_is_text:new c.Uniform1i(C),u_pitch_with_map:new c.Uniform1i(C),u_texsize:new c.Uniform2f(C),u_texsize_icon:new c.Uniform2f(C),u_texture:new c.Uniform1i(C),u_texture_icon:new c.Uniform1i(C),u_gamma_scale:new c.Uniform1f(C),u_device_pixel_ratio:new c.Uniform1f(C),u_is_halo:new c.Uniform1i(C)}),background:C=>({u_matrix:new c.UniformMatrix4f(C),u_opacity:new c.Uniform1f(C),u_color:new c.UniformColor(C)}),backgroundPattern:C=>({u_matrix:new c.UniformMatrix4f(C),u_opacity:new c.Uniform1f(C),u_image:new c.Uniform1i(C),u_pattern_tl:new c.Uniform2f(C),u_pattern_br:new c.Uniform2f(C),u_texsize:new c.Uniform2f(C),u_pattern_size:new c.Uniform2f(C),u_pixel_coord_upper:new c.Uniform2f(C),u_pixel_coord_lower:new c.Uniform2f(C),u_tile_units_to_pixels:new c.Uniform1f(C)}),terrainRaster:is,terrainDepth:is,skybox:C=>({u_matrix:new c.UniformMatrix4f(C),u_sun_direction:new c.Uniform3f(C),u_cubemap:new c.Uniform1i(C),u_opacity:new c.Uniform1f(C),u_temporal_offset:new c.Uniform1f(C)}),skyboxGradient:C=>({u_matrix:new c.UniformMatrix4f(C),u_color_ramp:new c.Uniform1i(C),u_center_direction:new c.Uniform3f(C),u_radius:new c.Uniform1f(C),u_opacity:new c.Uniform1f(C),u_temporal_offset:new c.Uniform1f(C)}),skyboxCapture:C=>({u_matrix_3f:new c.UniformMatrix3f(C),u_sun_direction:new c.Uniform3f(C),u_sun_intensity:new c.Uniform1f(C),u_color_tint_r:new c.Uniform4f(C),u_color_tint_m:new c.Uniform4f(C),u_luminance:new c.Uniform1f(C)}),globeRaster:C=>({u_proj_matrix:new c.UniformMatrix4f(C),u_globe_matrix:new c.UniformMatrix4f(C),u_normalize_matrix:new c.UniformMatrix4f(C),u_merc_matrix:new c.UniformMatrix4f(C),u_zoom_transition:new c.Uniform1f(C),u_merc_center:new c.Uniform2f(C),u_image0:new c.Uniform1i(C),u_grid_matrix:new c.UniformMatrix3f(C),u_skirt_height:new c.Uniform1f(C),u_frustum_tl:new c.Uniform3f(C),u_frustum_tr:new c.Uniform3f(C),u_frustum_br:new c.Uniform3f(C),u_frustum_bl:new c.Uniform3f(C),u_globe_pos:new c.Uniform3f(C),u_globe_radius:new c.Uniform1f(C),u_viewport:new c.Uniform2f(C)}),globeAtmosphere:C=>({u_frustum_tl:new c.Uniform3f(C),u_frustum_tr:new c.Uniform3f(C),u_frustum_br:new c.Uniform3f(C),u_frustum_bl:new c.Uniform3f(C),u_horizon:new c.Uniform1f(C),u_transition:new c.Uniform1f(C),u_fadeout_range:new c.Uniform1f(C),u_color:new c.Uniform4f(C),u_high_color:new c.Uniform4f(C),u_space_color:new c.Uniform4f(C),u_star_intensity:new c.Uniform1f(C),u_star_density:new c.Uniform1f(C),u_star_size:new c.Uniform1f(C),u_temporal_offset:new c.Uniform1f(C),u_horizon_angle:new c.Uniform1f(C),u_rotation_matrix:new c.UniformMatrix4f(C)})};let za;function co(C,o,f,T,z,B,K){const ie=C.context,le=ie.gl,ve=C.transform,_e=C.useProgram("collisionBox"),Pe=[];let at=0,gt=0;for(let Bt=0;Bt<T.length;Bt++){const Qt=T[Bt],oi=o.getTile(Qt),ni=oi.getBucket(f);if(!ni)continue;const mi=yt(Qt,ni,ve);let fi=mi;0===z[0]&&0===z[1]||(fi=C.translatePosMatrix(mi,oi,z,B));const Ai=K?ni.textCollisionBox:ni.iconCollisionBox,yn=ni.collisionCircleArray;if(yn.length>0){const Oi=c.create(),rn=fi;c.mul(Oi,ni.placementInvProjMatrix,ve.glCoordMatrix),c.mul(Oi,Oi,ni.placementViewportMatrix),Pe.push({circleArray:yn,circleOffset:gt,transform:rn,invTransform:Oi,projection:ni.getProjection()}),at+=yn.length/4,gt=at}Ai&&(C.terrain&&C.terrain.setupElevationDraw(oi,_e),_e.draw(ie,le.LINES,c.DepthMode.disabled,c.StencilMode.disabled,C.colorModeForRenderPass(),c.CullFaceMode.disabled,to(fi,ve,oi,ni.getProjection()),f.id,Ai.layoutVertexBuffer,Ai.indexBuffer,Ai.segments,null,ve.zoom,null,[Ai.collisionVertexBuffer,Ai.collisionVertexBufferExt]))}if(!K||!Pe.length)return;const mt=C.useProgram("collisionCircle"),xt=new c.StructArrayLayout2f1f2i16;xt.resize(4*at),xt._trim();let kt=0;for(const Bt of Pe)for(let Qt=0;Qt<Bt.circleArray.length/4;Qt++){const oi=4*Qt,ni=Bt.circleArray[oi+0],mi=Bt.circleArray[oi+1],fi=Bt.circleArray[oi+2],Ai=Bt.circleArray[oi+3];xt.emplace(kt++,ni,mi,fi,Ai,0),xt.emplace(kt++,ni,mi,fi,Ai,1),xt.emplace(kt++,ni,mi,fi,Ai,2),xt.emplace(kt++,ni,mi,fi,Ai,3)}(!za||za.length<2*at)&&(za=function(Bt){const Qt=2*Bt,oi=new c.StructArrayLayout3ui6;oi.resize(Qt),oi._trim();for(let ni=0;ni<Qt;ni++){const mi=6*ni;oi.uint16[mi+0]=4*ni+0,oi.uint16[mi+1]=4*ni+1,oi.uint16[mi+2]=4*ni+2,oi.uint16[mi+3]=4*ni+2,oi.uint16[mi+4]=4*ni+3,oi.uint16[mi+5]=4*ni+0}return oi}(at));const Ge=ie.createIndexBuffer(za,!0),ft=ie.createVertexBuffer(xt,c.collisionCircleLayout.members,!0);for(const Bt of Pe){const Qt={u_matrix:Bt.transform,u_inv_matrix:Bt.invTransform,u_camera_to_center_distance:(Dt=ve).getCameraToCenterDistance(Bt.projection),u_viewport_size:[Dt.width,Dt.height]};mt.draw(ie,le.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,C.colorModeForRenderPass(),c.CullFaceMode.disabled,Qt,f.id,ft,Ge,c.SegmentVector.simpleSegment(0,2*Bt.circleOffset,Bt.circleArray.length,Bt.circleArray.length/2),null,ve.zoom)}var Dt;ft.destroy(),Ge.destroy()}const Qa=c.create();function Ls({width:C,height:o,anchor:f,textOffset:T,textScale:z},B){const{horizontalAlign:K,verticalAlign:ie}=c.getAnchorAlignment(f),le=-(K-.5)*C,ve=-(ie-.5)*o,_e=c.evaluateVariableOffset(f,T);return new c.Point((le/z+_e[0])*B,(ve/z+_e[1])*B)}function el(C,o,f,T,z,B,K,ie,le,ve,_e){const Pe=C.text.placedSymbolArray,at=C.text.dynamicLayoutVertexArray,gt=C.icon.dynamicLayoutVertexArray,mt={},xt=C.getProjection(),kt=ii(ie,xt,B),Ge=B.elevation,ft=xt.upVectorScale(ie.canonical,B.center.lat,B.worldSize).metersToTile;at.clear();for(let Dt=0;Dt<Pe.length;Dt++){const Bt=Pe.get(Dt),{tileAnchorX:Qt,tileAnchorY:oi,numGlyphs:ni}=Bt,mi=Bt.hidden||!Bt.crossTileID||C.allowVerticalPlacement&&!Bt.placedOrientation?null:T[Bt.crossTileID];if(mi){let fi=0,Ai=0,yn=0;if(Ge){const mn=Ge?Ge.getAtTileOffset(ie,Qt,oi):0,[er,Er,jn]=xt.upVector(ie.canonical,Qt,oi);fi=mn*er*ft,Ai=mn*Er*ft,yn=mn*jn*ft}let[Oi,rn,zi,bn]=X(Bt.projectedAnchorX+fi,Bt.projectedAnchorY+Ai,Bt.projectedAnchorZ+yn,f?kt:K);const Ri=Q(B.getCameraToCenterDistance(xt),bn);let Li=z.evaluateSizeForFeature(C.textSizeData,ve,Bt)*Ri/c.ONE_EM;f&&(Li*=C.tilePixelRatio/le);const vn=Ls(mi,Li);f?(({x:Oi,y:rn,z:zi}=xt.projectTilePoint(Qt+vn.x,oi+vn.y,ie.canonical)),[Oi,rn,zi]=X(Oi+fi,rn+Ai,zi+yn,K)):(o&&vn._rotate(-B.angle),Oi+=vn.x,rn+=vn.y,zi=0);const dn=C.allowVerticalPlacement&&Bt.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let mn=0;mn<ni;mn++)c.addDynamicAttributes(at,Oi,rn,zi,dn);_e&&Bt.associatedIconIndex>=0&&(mt[Bt.associatedIconIndex]={x:Oi,y:rn,z:zi,angle:dn})}else te(ni,at)}if(_e){gt.clear();const Dt=C.icon.placedSymbolArray;for(let Bt=0;Bt<Dt.length;Bt++){const Qt=Dt.get(Bt),{numGlyphs:oi}=Qt,ni=mt[Bt];if(Qt.hidden||!ni)te(oi,gt);else{const{x:mi,y:fi,z:Ai,angle:yn}=ni;for(let Oi=0;Oi<oi;Oi++)c.addDynamicAttributes(gt,mi,fi,Ai,yn)}}C.icon.dynamicLayoutVertexBuffer.updateData(gt)}C.text.dynamicLayoutVertexBuffer.updateData(at)}function ta(C,o,f){return f.iconsInText&&o?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function bo(C,o,f,T,z,B,K,ie,le,ve,_e,Pe){const at=C.context,gt=at.gl,mt=C.transform,xt="map"===ie,kt="map"===le,Ge=xt&&"point"!==f.layout.get("symbol-placement"),ft=xt&&!kt&&!Ge,Dt=void 0!==f.layout.get("symbol-sort-key").constantOr(1);let Bt=!1;const Qt=C.depthModeForSublayer(0,c.DepthMode.ReadOnly),oi=[c.mercatorXfromLng(mt.center.lng),c.mercatorYfromLat(mt.center.lat)],ni=f.layout.get("text-variable-anchor"),mi="globe"===mt.projection.name,fi=[],Ai=[0,-1,0];let yn=Ai;!mi&&!mt.mercatorFromTransition||xt||(yn=function(Oi){const rn=Oi._camera.getWorldToCamera(Oi.worldSize,1),zi=c.multiply([],rn,Oi.globeMatrix);c.invert(zi,zi);const bn=[0,0,0],Ri=[0,1,0,0];return c.transformMat4$1(Ri,Ri,zi),bn[0]=Ri[0],bn[1]=Ri[1],bn[2]=Ri[2],c.normalize(bn,bn),bn}(mt));for(const Oi of T){const rn=o.getTile(Oi),zi=rn.getBucket(f);if(!zi||"mercator"===zi.projection.name&&mi)continue;const bn=z?zi.text:zi.icon;if(!bn||zi.fullyClipped||!bn.segments.get().length)continue;const Ri=bn.programConfigurations.get(f.id),Li=z||zi.sdfIcons,vn=z?zi.textSizeData:zi.iconSizeData,dn=kt||0!==mt.pitch,mn=c.evaluateSizeForZoom(vn,mt.zoom);let er,Er,jn,dr,Tr=[0,0],pr=null;if(z)Er=rn.glyphAtlasTexture,jn=gt.LINEAR,er=rn.glyphAtlasTexture.size,zi.iconsInText&&(Tr=rn.imageAtlasTexture.size,pr=rn.imageAtlasTexture,dr=dn||C.options.rotating||C.options.zooming||"composite"===vn.kind||"camera"===vn.kind?gt.LINEAR:gt.NEAREST);else{const vr=1!==f.layout.get("icon-size").constantOr(0)||zi.iconsNeedLinear;Er=rn.imageAtlasTexture,jn=Li||C.options.rotating||C.options.zooming||vr||dn?gt.LINEAR:gt.NEAREST,er=rn.imageAtlasTexture.size}const tr="globe"===zi.projection.name,zr=tr?yn:Ai,ls=tr?c.globeToMercatorTransition(mt.zoom):0,us=ii(Oi,zi.getProjection(),mt),hs=mt.calculatePixelsToTileUnitsMatrix(rn),la=R(us,rn.tileID.canonical,kt,xt,mt,zi.getProjection(),hs),Qr=C.terrain&&kt&&Ge?c.invert(c.create(),la):Qa,wa=W(us,rn.tileID.canonical,kt,xt,mt,zi.getProjection(),hs),Yl=ni&&zi.hasTextData(),ws="none"!==f.layout.get("icon-text-fit")&&Yl&&zi.hasIconData();if(Ge){const vr=mt.elevation,Zr=vr?vr.getAtTileOffsetFunc(Oi,mt.center.lat,mt.worldSize,zi.getProjection()):null,Dr=Y(us,rn.tileID.canonical,kt,xt,mt,zi.getProjection(),hs);me(zi,us,C,z,Dr,wa,kt,ve,Zr,Oi)}const es=Ge||z&&ni||ws,ts=C.translatePosMatrix(us,rn,B,K),it=es?Qa:la,_t=C.translatePosMatrix(wa,rn,B,K,!0),Ht=zi.getProjection().createInversionMatrix(mt,Oi.canonical),Gi=[];C.terrainRenderModeElevated()&&kt&&Gi.push("PITCH_WITH_MAP_TERRAIN"),tr&&Gi.push("PROJECTION_GLOBE_VIEW"),es&&Gi.push("PROJECTED_POS_ON_VIEWPORT");const Zn=Li&&0!==f.paint.get(z?"text-halo-width":"icon-halo-width").constantOr(1);let Wn;Wn=Li?zi.iconsInText?ql(vn.kind,mn,ft,kt,C,ts,it,_t,er,Tr,Oi,ls,oi,Ht,zr,zi.getProjection()):yo(vn.kind,mn,ft,kt,C,ts,it,_t,z,er,!0,Oi,ls,oi,Ht,zr,zi.getProjection()):pl(vn.kind,mn,ft,kt,C,ts,it,_t,z,er,Oi,ls,oi,Ht,zr,zi.getProjection());const rr={program:C.useProgram(ta(Li,z,zi),Ri,Gi),buffers:bn,uniformValues:Wn,atlasTexture:Er,atlasTextureIcon:pr,atlasInterpolation:jn,atlasInterpolationIcon:dr,isSDF:Li,hasHalo:Zn,tile:rn,labelPlaneMatrixInv:Qr};if(Dt&&zi.canOverlap){Bt=!0;const vr=bn.segments.get();for(const Zr of vr)fi.push({segments:new c.SegmentVector([Zr]),sortKey:Zr.sortKey,state:rr})}else fi.push({segments:bn.segments,sortKey:0,state:rr})}Bt&&fi.sort((Oi,rn)=>Oi.sortKey-rn.sortKey);for(const Oi of fi){const rn=Oi.state;if(C.terrain&&C.terrain.setupElevationDraw(rn.tile,rn.program,{useDepthForOcclusion:!mi,labelPlaneMatrixInv:rn.labelPlaneMatrixInv}),at.activeTexture.set(gt.TEXTURE0),rn.atlasTexture.bind(rn.atlasInterpolation,gt.CLAMP_TO_EDGE),rn.atlasTextureIcon&&(at.activeTexture.set(gt.TEXTURE1),rn.atlasTextureIcon&&rn.atlasTextureIcon.bind(rn.atlasInterpolationIcon,gt.CLAMP_TO_EDGE)),rn.isSDF){const zi=rn.uniformValues;rn.hasHalo&&(zi.u_is_halo=1,Fa(rn.buffers,Oi.segments,f,C,rn.program,Qt,_e,Pe,zi)),zi.u_is_halo=0}Fa(rn.buffers,Oi.segments,f,C,rn.program,Qt,_e,Pe,rn.uniformValues)}}function Fa(C,o,f,T,z,B,K,ie,le){const ve=T.context,_e=[C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer,C.globeExtVertexBuffer];z.draw(ve,ve.gl.TRIANGLES,B,K,ie,c.CullFaceMode.disabled,le,f.id,C.layoutVertexBuffer,C.indexBuffer,o,f.paint,T.transform.zoom,C.programConfigurations.get(f.id),_e)}function Ya(C,o,f,T,z,B,K){const ie=C.context.gl,le=f.paint.get("fill-pattern"),ve=le&&le.constantOr(1);let _e,Pe,at,gt,mt;K?(Pe=ve&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=ie.LINES):(Pe=ve?"fillPattern":"fill",_e=ie.TRIANGLES);for(const xt of T){const kt=o.getTile(xt);if(ve&&!kt.patternsLoaded())continue;const Ge=kt.getBucket(f);if(!Ge)continue;C.prepareDrawTile();const ft=Ge.programConfigurations.get(f.id),Dt=C.useProgram(Pe,ft);ve&&(C.context.activeTexture.set(ie.TEXTURE0),kt.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),ft.updatePaintBuffers());const Bt=le.constantOr(null);if(Bt&&kt.imageAtlas){const oi=kt.imageAtlas.patternPositions[Bt.toString()];oi&&ft.setConstantPatternPositions(oi)}const Qt=C.translatePosMatrix(xt.projMatrix,kt,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(K){gt=Ge.indexBuffer2,mt=Ge.segments2;const oi=C.terrain&&C.terrain.renderingToTexture?C.terrain.drapeBufferSize:[ie.drawingBufferWidth,ie.drawingBufferHeight];at="fillOutlinePattern"===Pe&&ve?Cc(Qt,C,kt,oi):Es(Qt,oi)}else gt=Ge.indexBuffer,mt=Ge.segments,at=ve?Ys(Qt,C,kt):gs(Qt);C.prepareDrawProgram(C.context,Dt,xt.toUnwrapped()),Dt.draw(C.context,_e,z,C.stencilModeForClipping(xt),B,c.CullFaceMode.disabled,at,f.id,Ge.layoutVertexBuffer,gt,mt,f.paint,C.transform.zoom,ft)}}function fl(C,o,f,T,z,B,K){const ie=C.context,le=ie.gl,ve=C.transform,_e=f.paint.get("fill-extrusion-pattern"),Pe=_e.constantOr(1),at=f.paint.get("fill-extrusion-opacity"),gt=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],mt=f.layout.get("fill-extrusion-edge-radius"),xt=mt>0&&!f.paint.get("fill-extrusion-rounded-roof"),kt=xt?0:mt,Ge="globe"===ve.projection.name?c.fillExtrusionHeightLift():0,ft="globe"===ve.projection.name,Dt=ft?c.globeToMercatorTransition(ve.zoom):0,Bt=[c.mercatorXfromLng(ve.center.lng),c.mercatorYfromLat(ve.center.lat)],Qt=[];ft&&Qt.push("PROJECTION_GLOBE_VIEW"),gt[0]>0&&Qt.push("FAUX_AO"),xt&&Qt.push("ZERO_ROOF_RADIUS");for(const oi of T){const ni=o.getTile(oi),mi=ni.getBucket(f);if(!mi||mi.projection.name!==ve.projection.name)continue;const fi=mi.programConfigurations.get(f.id),Ai=C.useProgram(Pe?"fillExtrusionPattern":"fillExtrusion",fi,Qt);if(C.terrain){const Li=C.terrain;if(C.style.terrainSetForDrapingOnly())Li.setupElevationDraw(ni,Ai,{useMeterToDem:!0});else{if(!mi.enableTerrain)continue;if(Li.setupElevationDraw(ni,Ai,{useMeterToDem:!0}),Il(ie,o,oi,mi,f,Li),!mi.centroidVertexBuffer){const vn=Ai.attributes.a_centroid_pos;void 0!==vn&&le.vertexAttrib2f(vn,0,0)}}}Pe&&(C.context.activeTexture.set(le.TEXTURE0),ni.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),fi.updatePaintBuffers());const yn=_e.constantOr(null);if(yn&&ni.imageAtlas){const Li=ni.imageAtlas.patternPositions[yn.toString()];Li&&fi.setConstantPatternPositions(Li)}const Oi=C.translatePosMatrix(oi.projMatrix,ni,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),rn=ve.projection.createInversionMatrix(ve,oi.canonical),zi=f.paint.get("fill-extrusion-vertical-gradient"),bn=Pe?hl(Oi,C,zi,at,gt,kt,oi,ni,Ge,Dt,Bt,rn):Ts(Oi,C,zi,at,gt,kt,oi,Ge,Dt,Bt,rn);C.prepareDrawProgram(ie,Ai,oi.toUnwrapped());const Ri=[];C.terrain&&Ri.push(mi.centroidVertexBuffer),ft&&Ri.push(mi.layoutVertexExtBuffer),Ai.draw(ie,ie.gl.TRIANGLES,z,B,K,c.CullFaceMode.backCCW,bn,f.id,mi.layoutVertexBuffer,mi.indexBuffer,mi.segments,f.paint,C.transform.zoom,fi,Ri)}}function Il(C,o,f,T,z,B){const K=[Ge=>{let ft=Ge.canonical.x-1,Dt=Ge.wrap;return ft<0&&(ft=(1<<Ge.canonical.z)-1,Dt--),new c.OverscaledTileID(Ge.overscaledZ,Dt,Ge.canonical.z,ft,Ge.canonical.y)},Ge=>{let ft=Ge.canonical.x+1,Dt=Ge.wrap;return ft===1<<Ge.canonical.z&&(ft=0,Dt++),new c.OverscaledTileID(Ge.overscaledZ,Dt,Ge.canonical.z,ft,Ge.canonical.y)},Ge=>new c.OverscaledTileID(Ge.overscaledZ,Ge.wrap,Ge.canonical.z,Ge.canonical.x,(0===Ge.canonical.y?1<<Ge.canonical.z:Ge.canonical.y)-1),Ge=>new c.OverscaledTileID(Ge.overscaledZ,Ge.wrap,Ge.canonical.z,Ge.canonical.x,Ge.canonical.y===(1<<Ge.canonical.z)-1?0:Ge.canonical.y+1)],ie=Ge=>{const ft=o.getSource().minzoom,Dt=Qt=>{const oi=o.getTileByID(Qt);if(oi&&oi.hasData())return oi.getBucket(z)},Bt=[0,-1,1];for(const Qt of Bt){if(Ge.overscaledZ+Qt<ft)continue;const oi=Dt(Ge.calculateScaledKey(Ge.overscaledZ+Qt));if(oi)return oi}},le=[0,0,0],ve=(Ge,ft)=>(le[0]=Math.min(Ge.min.y,ft.min.y),le[1]=Math.max(Ge.max.y,ft.max.y),le[2]=c.EXTENT-ft.min.x>Ge.max.x?ft.min.x-c.EXTENT:Ge.max.x,le),_e=(Ge,ft)=>(le[0]=Math.min(Ge.min.x,ft.min.x),le[1]=Math.max(Ge.max.x,ft.max.x),le[2]=c.EXTENT-ft.min.y>Ge.max.y?ft.min.y-c.EXTENT:Ge.max.y,le),Pe=[(Ge,ft)=>ve(Ge,ft),(Ge,ft)=>ve(ft,Ge),(Ge,ft)=>_e(Ge,ft),(Ge,ft)=>_e(ft,Ge)],at=new c.Point(0,0);let gt,mt,xt;const kt=(Ge,ft,Dt,Bt,Qt)=>{const oi=[[Bt?Dt:Ge,Bt?Ge:Dt,0],[Bt?Dt:ft,Bt?ft:Dt,0]],ni=Qt<0?c.EXTENT+Qt:Qt,mi=[Bt?ni:(Ge+ft)/2,Bt?(Ge+ft)/2:ni,0];return 0===Dt&&Qt<0||0!==Dt&&Qt>0?B.getForTilePoints(xt,[mi],!0,mt):oi.push(mi),B.getForTilePoints(f,oi,!0,gt),Math.max(oi[0][2],oi[1][2],mi[2])/B.exaggeration()};for(let Ge=0;Ge<4;Ge++){const ft=(Ge<2?1:5)-Ge,Dt=T.borders[Ge];if(0===Dt.length)continue;const Bt=xt=K[Ge](f),Qt=ie(Bt);if(!(Qt&&Qt instanceof c.FillExtrusionBucket&&Qt.enableTerrain)||T.borderDoneWithNeighborZ[Ge]===Qt.canonical.z&&Qt.borderDoneWithNeighborZ[ft]===T.canonical.z||(mt=B.findDEMTileFor(Bt),!mt||!mt.dem))continue;if(!gt){const fi=B.findDEMTileFor(f);if(!fi||!fi.dem)return;gt=fi}const oi=Qt.borders[ft];let ni=0;const mi=Qt.borderDoneWithNeighborZ[ft]!==T.canonical.z;if(T.canonical.z===Qt.canonical.z){for(let fi=0;fi<Dt.length;fi++){const Ai=T.featuresOnBorder[Dt[fi]],yn=Ai.borders[Ge];let Oi;for(;ni<oi.length&&(Oi=Qt.featuresOnBorder[oi[ni]],!(Oi.borders[ft][1]>yn[0]+3));)mi&&Qt.encodeCentroid(void 0,Oi,!1),ni++;if(Oi&&ni<oi.length){const rn=ni;let zi=0;for(;!(Oi.borders[ft][0]>yn[1]-3)&&(zi++,++ni!==oi.length);)Oi=Qt.featuresOnBorder[oi[ni]];if(Oi=Qt.featuresOnBorder[oi[rn]],Ai.intersectsCount()>1||Oi.intersectsCount()>1||1!==zi){1!==zi&&(ni=rn),T.encodeCentroid(void 0,Ai,!1),mi&&Qt.encodeCentroid(void 0,Oi,!1);continue}const bn=Pe[Ge](Ai,Oi),Ri=Ge%2?c.EXTENT-1:0;at.x=kt(bn[0],Math.min(c.EXTENT-1,bn[1]),Ri,Ge<2,bn[2]),at.y=0,T.encodeCentroid(at,Ai,!1),mi&&Qt.encodeCentroid(at,Oi,!1)}else T.encodeCentroid(void 0,Ai,!1)}T.borderDoneWithNeighborZ[Ge]=Qt.canonical.z,T.needsCentroidUpdate=!0,mi&&(Qt.borderDoneWithNeighborZ[ft]=T.canonical.z,Qt.needsCentroidUpdate=!0)}else{for(const fi of Dt)T.encodeCentroid(void 0,T.featuresOnBorder[fi],!1);if(mi){for(const fi of oi)Qt.encodeCentroid(void 0,Qt.featuresOnBorder[fi],!1);Qt.borderDoneWithNeighborZ[ft]=T.canonical.z,Qt.needsCentroidUpdate=!0}T.borderDoneWithNeighborZ[Ge]=Qt.canonical.z,T.needsCentroidUpdate=!0}}(T.needsCentroidUpdate||!T.centroidVertexBuffer&&0!==T.centroidVertexArray.length)&&T.uploadCentroid(C)}const ia=new c.Color(1,0,0,1),Xl=new c.Color(0,1,0,1),ml=new c.Color(0,0,1,1),Lo=new c.Color(1,0,1,1),Zl=new c.Color(0,1,1,1);function tl(C,o,f){const T=C.context,z=C.transform,B=T.gl,K="globe"===z.projection.name,ie=K?["PROJECTION_GLOBE_VIEW"]:null;let le=f.projMatrix;if(K&&c.globeToMercatorTransition(z.zoom)>0){const Ai=c.transitionTileAABBinECEF(f.canonical,z),yn=c.globeDenormalizeECEF(Ai);le=c.multiply(new Float32Array(16),z.globeMatrix,yn),c.multiply(le,z.projMatrix,le)}const ve=C.useProgram("debug",null,ie),_e=o.getTileByID(f.key);C.terrain&&C.terrain.setupElevationDraw(_e,ve);const Pe=c.DepthMode.disabled,at=c.StencilMode.disabled,gt=C.colorModeForRenderPass();T.activeTexture.set(B.TEXTURE0),C.emptyTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),K?_e._makeGlobeTileDebugBuffers(C.context,z):_e._makeDebugTileBoundsBuffers(C.context,z.projection);const xt=_e._tileDebugBuffer||C.debugBuffer,kt=_e._tileDebugIndexBuffer||C.debugIndexBuffer,Ge=_e._tileDebugSegments||C.debugSegments;ve.draw(T,B.LINE_STRIP,Pe,at,gt,c.CullFaceMode.disabled,Eo(le,c.Color.red),"$debug",xt,kt,Ge,null,null,null,[_e._globeTileDebugBorderBuffer]);const ft=_e.latestRawTileData,Dt=Math.floor((ft&&ft.byteLength||0)/1024),Bt=o.getTile(f).tileSize,Qt=512/Math.min(Bt,512)*(f.overscaledZ/z.zoom)*.5;let oi=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(oi+=` => ${f.overscaledZ}`),oi+=` ${Dt}kb`,function(Ai,yn){Ai.initDebugOverlayCanvas();const Oi=Ai.debugOverlayCanvas,rn=Ai.context.gl,zi=Ai.debugOverlayCanvas.getContext("2d");zi.clearRect(0,0,Oi.width,Oi.height),zi.shadowColor="white",zi.shadowBlur=2,zi.lineWidth=1.5,zi.strokeStyle="white",zi.textBaseline="top",zi.font="bold 36px Open Sans, sans-serif",zi.fillText(yn,5,5),zi.strokeText(yn,5,5),Ai.debugOverlayTexture.update(Oi),Ai.debugOverlayTexture.bind(rn.LINEAR,rn.CLAMP_TO_EDGE)}(C,oi);const ni=_e._tileDebugTextBuffer||C.debugBuffer,mi=_e._tileDebugTextIndexBuffer||C.quadTriangleIndexBuffer,fi=_e._tileDebugTextSegments||C.debugSegments;ve.draw(T,B.TRIANGLES,Pe,at,c.ColorMode.alphaBlended,c.CullFaceMode.disabled,Eo(le,c.Color.transparent,Qt),"$debug",ni,mi,fi,null,null,null,[_e._globeTileDebugTextBuffer])}function Is(C,o,f,T){il(C,0,o+f/2,C.transform.width,f,T)}function xo(C,o,f,T){il(C,o-f/2,0,f,C.transform.height,T)}function il(C,o,f,T,z,B){const K=C.context,ie=K.gl;ie.enable(ie.SCISSOR_TEST),ie.scissor(o*c.exported.devicePixelRatio,f*c.exported.devicePixelRatio,T*c.exported.devicePixelRatio,z*c.exported.devicePixelRatio),K.clear({color:B}),ie.disable(ie.SCISSOR_TEST)}const gl=c.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Po}=gl;function As(C,o,f,T){C.emplaceBack(o,f,T)}class Ba{constructor(o){this.vertexArray=new c.StructArrayLayout3f12,this.indices=new c.StructArrayLayout3ui6,As(this.vertexArray,-1,-1,1),As(this.vertexArray,1,-1,1),As(this.vertexArray,-1,1,1),As(this.vertexArray,1,1,1),As(this.vertexArray,-1,-1,-1),As(this.vertexArray,1,-1,-1),As(this.vertexArray,-1,1,-1),As(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,Po),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=c.SegmentVector.simpleSegment(0,0,36,12)}}function rs(C,o,f,T,z,B){const K=C.gl,ie=o.paint.get("sky-atmosphere-color"),le=o.paint.get("sky-atmosphere-halo-color"),ve=o.paint.get("sky-atmosphere-sun-intensity"),_e={u_matrix_3f:c.fromMat4(c.create$1(),T),u_sun_direction:z,u_sun_intensity:ve,u_color_tint_r:[(mt=ie).r,mt.g,mt.b,mt.a],u_color_tint_m:[(xt=le).r,xt.g,xt.b,xt.a],u_luminance:5e-5};var mt,xt;K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+B,o.skyboxTexture,0),f.draw(C,K.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,c.ColorMode.unblended,c.CullFaceMode.frontCW,_e,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const uo=c.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ga{constructor(o){const f=new c.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const T=new c.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(f,uo.members),this.indexBuffer=o.createIndexBuffer(T),this.segments=c.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Na={symbol:function(C,o,f,T,z){if("translucent"!==C.renderPass)return;const B=c.StencilMode.disabled,K=C.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(ie,le,ve,_e,Pe,at,gt){const mt=le.transform,xt="map"===Pe,kt="map"===at;for(const Ge of ie){const ft=_e.getTile(Ge),Dt=ft.getBucket(ve);if(!Dt||!Dt.text||!Dt.text.segments.get().length)continue;const Bt=c.evaluateSizeForZoom(Dt.textSizeData,mt.zoom),Qt=ii(Ge,Dt.getProjection(),mt),oi=mt.calculatePixelsToTileUnitsMatrix(ft),ni=R(Qt,ft.tileID.canonical,kt,xt,mt,Dt.getProjection(),oi),mi="none"!==ve.layout.get("icon-text-fit")&&Dt.hasIconData();if(Bt){const fi=Math.pow(2,mt.zoom-ft.tileID.overscaledZ);el(Dt,xt,kt,gt,c.symbolSize,mt,ni,Ge,fi,Bt,mi)}}}(T,C,f,o,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),z),0!==f.paint.get("icon-opacity").constantOr(1)&&bo(C,o,f,T,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),B,K),0!==f.paint.get("text-opacity").constantOr(1)&&bo(C,o,f,T,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),B,K),o.map.showCollisionBoxes&&(co(C,o,f,T,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),co(C,o,f,T,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(C,o,f,T){if("translucent"!==C.renderPass)return;const z=f.paint.get("circle-opacity"),B=f.paint.get("circle-stroke-width"),K=f.paint.get("circle-stroke-opacity"),ie=void 0!==f.layout.get("circle-sort-key").constantOr(1);if(0===z.constantOr(1)&&(0===B.constantOr(1)||0===K.constantOr(1)))return;const le=C.context,ve=le.gl,_e=C.transform,Pe=C.depthModeForSublayer(0,c.DepthMode.ReadOnly),at=c.StencilMode.disabled,gt=C.colorModeForRenderPass(),mt="globe"===_e.projection.name,xt=[c.mercatorXfromLng(_e.center.lng),c.mercatorYfromLat(_e.center.lat)],kt=[];for(let ft=0;ft<T.length;ft++){const Dt=T[ft],Bt=o.getTile(Dt),Qt=Bt.getBucket(f);if(!Qt||Qt.projection.name!==_e.projection.name)continue;const oi=Qt.programConfigurations.get(f.id),ni=ac(f);mt&&ni.push("PROJECTION_GLOBE_VIEW");const mi=C.useProgram("circle",oi,ni),fi=Qt.layoutVertexBuffer,Ai=Qt.globeExtVertexBuffer,yn=Qt.indexBuffer,Oi=_e.projection.createInversionMatrix(_e,Dt.canonical),rn={programConfiguration:oi,program:mi,layoutVertexBuffer:fi,globeExtVertexBuffer:Ai,indexBuffer:yn,uniformValues:jo(C,Dt,Bt,Oi,xt,f),tile:Bt};if(ie){const zi=Qt.segments.get();for(const bn of zi)kt.push({segments:new c.SegmentVector([bn]),sortKey:bn.sortKey,state:rn})}else kt.push({segments:Qt.segments,sortKey:0,state:rn})}ie&&kt.sort((ft,Dt)=>ft.sortKey-Dt.sortKey);const Ge={useDepthForOcclusion:!mt};for(const ft of kt){const{programConfiguration:Dt,program:Bt,layoutVertexBuffer:Qt,globeExtVertexBuffer:oi,indexBuffer:ni,uniformValues:mi,tile:fi}=ft.state,Ai=ft.segments;C.terrain&&C.terrain.setupElevationDraw(fi,Bt,Ge),C.prepareDrawProgram(le,Bt,fi.tileID.toUnwrapped()),Bt.draw(le,ve.TRIANGLES,Pe,at,gt,c.CullFaceMode.disabled,mi,f.id,Qt,ni,Ai,f.paint,_e.zoom,Dt,[oi])}},heatmap:function(C,o,f,T){if(0!==f.paint.get("heatmap-opacity"))if("offscreen"===C.renderPass){const z=C.context,B=z.gl,K=c.StencilMode.disabled,ie=new c.ColorMode([B.ONE,B.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(gt,mt,xt,kt){const Ge=gt.gl,ft=mt.width*kt,Dt=mt.height*kt;gt.activeTexture.set(Ge.TEXTURE1),gt.viewport.set([0,0,ft,Dt]);let Bt=xt.heatmapFbo;if(!Bt||Bt&&(Bt.width!==ft||Bt.height!==Dt)){Bt&&Bt.destroy();const Qt=Ge.createTexture();Ge.bindTexture(Ge.TEXTURE_2D,Qt),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_WRAP_S,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_WRAP_T,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_MIN_FILTER,Ge.LINEAR),Ge.texParameteri(Ge.TEXTURE_2D,Ge.TEXTURE_MAG_FILTER,Ge.LINEAR),Bt=xt.heatmapFbo=gt.createFramebuffer(ft,Dt,!1),function(oi,ni,mi,fi,Ai,yn){const Oi=oi.gl;Oi.texImage2D(Oi.TEXTURE_2D,0,oi.isWebGL2&&oi.extRenderToTextureHalfFloat?Oi.RGBA16F:Oi.RGBA,Ai,yn,0,Oi.RGBA,oi.extRenderToTextureHalfFloat?oi.isWebGL2?Oi.HALF_FLOAT:oi.extTextureHalfFloat.HALF_FLOAT_OES:Oi.UNSIGNED_BYTE,null),fi.colorAttachment.set(mi)}(gt,0,Qt,Bt,ft,Dt)}else Ge.bindTexture(Ge.TEXTURE_2D,Bt.colorAttachment.get()),gt.bindFramebuffer.set(Bt.framebuffer)})(z,C,f,"globe"===C.transform.projection.name?.5:.25),z.clear({color:c.Color.transparent});const le=C.transform,ve="globe"===le.projection.name,_e=ve?["PROJECTION_GLOBE_VIEW"]:null,Pe=ve?c.CullFaceMode.frontCCW:c.CullFaceMode.disabled,at=[c.mercatorXfromLng(le.center.lng),c.mercatorYfromLat(le.center.lat)];for(let gt=0;gt<T.length;gt++){const mt=T[gt];if(o.hasRenderableParent(mt))continue;const xt=o.getTile(mt),kt=xt.getBucket(f);if(!kt||kt.projection.name!==le.projection.name)continue;const Ge=kt.programConfigurations.get(f.id),ft=C.useProgram("heatmap",Ge,_e),{zoom:Dt}=C.transform;C.terrain&&C.terrain.setupElevationDraw(xt,ft),C.prepareDrawProgram(z,ft,mt.toUnwrapped());const Bt=le.projection.createInversionMatrix(le,mt.canonical);ft.draw(z,B.TRIANGLES,c.DepthMode.disabled,K,ie,Pe,La(C,mt,xt,Bt,at,Dt,f.paint.get("heatmap-intensity")),f.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,f.paint,C.transform.zoom,Ge,ve?[kt.globeExtVertexBuffer]:null)}z.viewport.set([0,0,C.width,C.height])}else"translucent"===C.renderPass&&(C.context.setColorMode(C.colorModeForRenderPass()),function(z,B){const K=z.context,ie=K.gl,le=B.heatmapFbo;if(!le)return;K.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,le.colorAttachment.get()),K.activeTexture.set(ie.TEXTURE1);let ve=B.colorRampTexture;ve||(ve=B.colorRampTexture=new c.Texture(K,B.colorRamp,ie.RGBA)),ve.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(K,ie.TRIANGLES,c.DepthMode.disabled,c.StencilMode.disabled,z.colorModeForRenderPass(),c.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:B.paint.get("heatmap-opacity")},B.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,B.paint,z.transform.zoom)}(C,f))},line:function(C,o,f,T){if("translucent"!==C.renderPass)return;const z=f.paint.get("line-opacity"),B=f.paint.get("line-width");if(0===z.constantOr(1)||0===B.constantOr(1))return;const K=C.depthModeForSublayer(0,c.DepthMode.ReadOnly),ie=C.colorModeForRenderPass(),le=C.terrain&&C.terrain.renderingToTexture?1:c.exported.devicePixelRatio,ve=f.paint.get("line-dasharray"),_e=ve.constantOr(1),Pe=f.layout.get("line-cap"),at=f.paint.get("line-pattern"),gt=at.constantOr(1),mt=f.paint.get("line-gradient"),xt=gt?"linePattern":"line",kt=C.context,Ge=kt.gl,ft=(Bt=>{const Qt=[];ks(Bt)&&Qt.push("RENDER_LINE_DASH"),Bt.paint.get("line-gradient")&&Qt.push("RENDER_LINE_GRADIENT");const oi=Bt.paint.get("line-trim-offset");0===oi[0]&&0===oi[1]||Qt.push("RENDER_LINE_TRIM_OFFSET");const ni=Bt.paint.get("line-pattern").constantOr(1),mi=1!==Bt.paint.get("line-opacity").constantOr(1);return!ni&&mi&&Qt.push("RENDER_LINE_ALPHA_DISCARD"),Qt})(f);let Dt=ft.includes("RENDER_LINE_ALPHA_DISCARD");C.terrain&&C.terrain.clipOrMaskOverlapStencilType()&&(Dt=!1);for(const Bt of T){const Qt=o.getTile(Bt);if(gt&&!Qt.patternsLoaded())continue;const oi=Qt.getBucket(f);if(!oi)continue;C.prepareDrawTile();const ni=oi.programConfigurations.get(f.id),mi=C.useProgram(xt,ni,ft),fi=at.constantOr(null);if(fi&&Qt.imageAtlas){const Li=Qt.imageAtlas.patternPositions[fi.toString()];Li&&ni.setConstantPatternPositions(Li)}const Ai=ve.constantOr(null),yn=Pe.constantOr(null);if(!gt&&Ai&&yn&&Qt.lineAtlas){const Li=Qt.lineAtlas.getDash(Ai,yn);Li&&ni.setConstantPatternPositions(Li)}let[Oi,rn]=f.paint.get("line-trim-offset");("round"===yn||"square"===yn)&&Oi!==rn&&(0===Oi&&(Oi-=1),1===rn&&(rn+=1));const zi=C.terrain?Bt.projMatrix:null,bn=gt?Ka(C,Qt,f,zi,le):Pa(C,Qt,f,zi,oi.lineClipsArray.length,le,[Oi,rn]);if(mt){const Li=oi.gradients[f.id];let vn=Li.texture;if(f.gradientVersion!==Li.version){let dn=256;if(f.stepInterpolant){const mn=o.getSource().maxzoom,er=Bt.canonical.z===mn?Math.ceil(1<<C.transform.maxZoom-Bt.canonical.z):1;dn=c.clamp(c.nextPowerOfTwo(oi.maxLineLength/c.EXTENT*1024*er),256,kt.maxTextureSize)}Li.gradient=c.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:dn,image:Li.gradient||void 0,clips:oi.lineClipsArray}),Li.texture?Li.texture.update(Li.gradient):Li.texture=new c.Texture(kt,Li.gradient,Ge.RGBA),Li.version=f.gradientVersion,vn=Li.texture}kt.activeTexture.set(Ge.TEXTURE1),vn.bind(f.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}_e&&(kt.activeTexture.set(Ge.TEXTURE0),Qt.lineAtlasTexture.bind(Ge.LINEAR,Ge.REPEAT),ni.updatePaintBuffers()),gt&&(kt.activeTexture.set(Ge.TEXTURE0),Qt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),ni.updatePaintBuffers()),C.prepareDrawProgram(kt,mi,Bt.toUnwrapped());const Ri=Li=>{mi.draw(kt,Ge.TRIANGLES,K,Li,ie,c.CullFaceMode.disabled,bn,f.id,oi.layoutVertexBuffer,oi.indexBuffer,oi.segments,f.paint,C.transform.zoom,ni,[oi.layoutVertexBuffer2])};if(Dt){const Li=C.stencilModeForClipping(Bt).ref;0===Li&&C.terrain&&kt.clear({stencil:0});const vn={func:Ge.EQUAL,mask:255};bn.u_alpha_discard_threshold=.8,Ri(new c.StencilMode(vn,Li,255,Ge.KEEP,Ge.KEEP,Ge.INVERT)),bn.u_alpha_discard_threshold=0,Ri(new c.StencilMode(vn,Li,255,Ge.KEEP,Ge.KEEP,Ge.KEEP))}else Ri(C.stencilModeForClipping(Bt))}Dt&&(C.resetStencilClippingMasks(),C.terrain&&kt.clear({stencil:0}))},fill:function(C,o,f,T){const z=f.paint.get("fill-color"),B=f.paint.get("fill-opacity");if(0===B.constantOr(1))return;const K=C.colorModeForRenderPass(),ie=f.paint.get("fill-pattern"),le=C.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&1===z.constantOr(c.Color.transparent).a&&1===B.constantOr(0)?"opaque":"translucent";if(C.renderPass===le){const ve=C.depthModeForSublayer(1,"opaque"===C.renderPass?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly);Ya(C,o,f,T,ve,K,!1)}if("translucent"===C.renderPass&&f.paint.get("fill-antialias")){const ve=C.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,c.DepthMode.ReadOnly);Ya(C,o,f,T,ve,K,!0)}},"fill-extrusion":function(C,o,f,T){const z=f.paint.get("fill-extrusion-opacity");if(0!==z&&"translucent"===C.renderPass){const B=new c.DepthMode(C.context.gl.LEQUAL,c.DepthMode.ReadWrite,C.depthRangeFor3D);if(1!==z||f.paint.get("fill-extrusion-pattern").constantOr(1))fl(C,o,f,T,B,c.StencilMode.disabled,c.ColorMode.disabled),fl(C,o,f,T,B,C.stencilModeFor3D(),C.colorModeForRenderPass()),C.resetStencilClippingMasks();else{const K=C.colorModeForRenderPass();fl(C,o,f,T,B,c.StencilMode.disabled,K)}}},hillshade:function(C,o,f,T){if("offscreen"!==C.renderPass&&"translucent"!==C.renderPass)return;const z=C.context,B=C.depthModeForSublayer(0,c.DepthMode.ReadOnly),K=C.colorModeForRenderPass(),ie=C.terrain&&C.terrain.renderingToTexture,[le,ve]="translucent"!==C.renderPass||ie?[{},T]:C.stencilConfigForOverlap(T);for(const _e of ve){const Pe=o.getTile(_e);if(Pe.needsHillshadePrepare&&"offscreen"===C.renderPass)Do(C,Pe,f,B,c.StencilMode.disabled,K);else if("translucent"===C.renderPass){const at=ie&&C.terrain?C.terrain.stencilModeForRTTOverlap(_e):le[_e.overscaledZ];Ko(C,_e,Pe,f,B,at,K)}}z.viewport.set([0,0,C.width,C.height]),C.resetStencilClippingMasks()},raster:function(C,o,f,T,z,B){if("translucent"!==C.renderPass||0===f.paint.get("raster-opacity")||!T.length)return;const K=C.context,ie=K.gl,le=o.getSource(),ve=C.useProgram("raster"),_e=C.colorModeForRenderPass(),Pe=C.terrain&&C.terrain.renderingToTexture,[at,gt]=le instanceof wt||Pe?[{},T]:C.stencilConfigForOverlap(T),mt=gt[gt.length-1].overscaledZ,xt=!C.options.moving;for(const kt of gt){const Ge=Pe?c.DepthMode.disabled:C.depthModeForSublayer(kt.overscaledZ-mt,1===f.paint.get("raster-opacity")?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly,ie.LESS),ft=kt.toUnwrapped(),Dt=o.getTile(kt);if(Pe&&(!Dt||!Dt.hasData()))continue;const Bt=Pe?kt.projMatrix:C.transform.calculateProjMatrix(ft,xt),Qt=C.terrain&&Pe?C.terrain.stencilModeForRTTOverlap(kt):at[kt.overscaledZ],oi=B?0:f.paint.get("raster-fade-duration");Dt.registerFadeDuration(oi);const ni=o.findLoadedParent(kt,0),mi=go(Dt,ni,o,C.transform,oi);let fi,Ai;C.terrain&&C.terrain.prepareDrawTile();const yn="nearest"===f.paint.get("raster-resampling")?ie.NEAREST:ie.LINEAR;K.activeTexture.set(ie.TEXTURE0),Dt.texture.bind(yn,ie.CLAMP_TO_EDGE),K.activeTexture.set(ie.TEXTURE1),ni?(ni.texture.bind(yn,ie.CLAMP_TO_EDGE),fi=Math.pow(2,ni.tileID.overscaledZ-Dt.tileID.overscaledZ),Ai=[Dt.tileID.canonical.x*fi%1,Dt.tileID.canonical.y*fi%1]):Dt.texture.bind(yn,ie.CLAMP_TO_EDGE),Dt.texture.useMipmap&&K.extTextureFilterAnisotropic&&C.transform.pitch>20&&ie.texParameterf(ie.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Oi=ga(Bt,Ai||[0,0],fi||1,mi,f,le instanceof wt?le.perspectiveTransform:[0,0]);if(C.prepareDrawProgram(K,ve,ft),le instanceof wt)le.boundsBuffer&&le.boundsSegments&&ve.draw(K,ie.TRIANGLES,Ge,c.StencilMode.disabled,_e,c.CullFaceMode.disabled,Oi,f.id,le.boundsBuffer,C.quadTriangleIndexBuffer,le.boundsSegments);else{const{tileBoundsBuffer:rn,tileBoundsIndexBuffer:zi,tileBoundsSegments:bn}=C.getTileBoundsBuffers(Dt);ve.draw(K,ie.TRIANGLES,Ge,Qt,_e,c.CullFaceMode.disabled,Oi,f.id,rn,zi,bn)}}C.resetStencilClippingMasks()},background:function(C,o,f,T){const z=f.paint.get("background-color"),B=f.paint.get("background-opacity");if(0===B)return;const K=C.context,ie=K.gl,le=C.transform,ve=le.tileSize,_e=f.paint.get("background-pattern");if(C.isPatternMissing(_e))return;const Pe=!_e&&1===z.a&&1===B&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Pe)return;const at=c.StencilMode.disabled,gt=C.depthModeForSublayer(0,"opaque"===Pe?c.DepthMode.ReadWrite:c.DepthMode.ReadOnly),mt=C.colorModeForRenderPass(),xt=C.useProgram(_e?"backgroundPattern":"background");let kt,Ge=T;Ge||(kt=C.getBackgroundTiles(),Ge=Object.values(kt).map(ft=>ft.tileID)),_e&&(K.activeTexture.set(ie.TEXTURE0),C.imageManager.bind(C.context));for(const ft of Ge){const Dt=ft.toUnwrapped(),Bt=T?ft.projMatrix:C.transform.calculateProjMatrix(Dt);C.prepareDrawTile();const Qt=o?o.getTile(ft):kt?kt[ft.key]:new c.Tile(ft,ve,le.zoom,C),oi=_e?lc(Bt,B,C,_e,{tileID:ft,tileSize:ve}):So(Bt,B,z);C.prepareDrawProgram(K,xt,Dt);const{tileBoundsBuffer:ni,tileBoundsIndexBuffer:mi,tileBoundsSegments:fi}=C.getTileBoundsBuffers(Qt);xt.draw(K,ie.TRIANGLES,gt,at,mt,c.CullFaceMode.disabled,oi,f.id,ni,mi,fi)}},sky:function(C,o,f){const T=C.transform,z="mercator"===T.projection.name||"globe"===T.projection.name?1:c.smoothstep(7,8,T.zoom),B=f.paint.get("sky-opacity")*z;if(0===B)return;const K=C.context,ie=f.paint.get("sky-type"),le=new c.DepthMode(K.gl.LEQUAL,c.DepthMode.ReadOnly,[0,1]),ve=C.frameCounter/1e3%1;"atmosphere"===ie?"offscreen"===C.renderPass?f.needsSkyboxCapture(C)&&(function(_e,Pe,at,gt){const mt=_e.context,xt=mt.gl;let kt=Pe.skyboxFbo;if(!kt){kt=Pe.skyboxFbo=mt.createFramebuffer(32,32,!1),Pe.skyboxGeometry=new Ba(mt),Pe.skyboxTexture=mt.gl.createTexture(),xt.bindTexture(xt.TEXTURE_CUBE_MAP,Pe.skyboxTexture),xt.texParameteri(xt.TEXTURE_CUBE_MAP,xt.TEXTURE_WRAP_S,xt.CLAMP_TO_EDGE),xt.texParameteri(xt.TEXTURE_CUBE_MAP,xt.TEXTURE_WRAP_T,xt.CLAMP_TO_EDGE),xt.texParameteri(xt.TEXTURE_CUBE_MAP,xt.TEXTURE_MIN_FILTER,xt.LINEAR),xt.texParameteri(xt.TEXTURE_CUBE_MAP,xt.TEXTURE_MAG_FILTER,xt.LINEAR);for(let Bt=0;Bt<6;++Bt)xt.texImage2D(xt.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0,xt.RGBA,32,32,0,xt.RGBA,xt.UNSIGNED_BYTE,null)}mt.bindFramebuffer.set(kt.framebuffer),mt.viewport.set([0,0,32,32]);const Ge=Pe.getCenter(_e,!0),ft=_e.useProgram("skyboxCapture"),Dt=new Float64Array(16);c.identity(Dt),c.rotateY(Dt,Dt,.5*-Math.PI),rs(mt,Pe,ft,Dt,Ge,0),c.identity(Dt),c.rotateY(Dt,Dt,.5*Math.PI),rs(mt,Pe,ft,Dt,Ge,1),c.identity(Dt),c.rotateX(Dt,Dt,.5*-Math.PI),rs(mt,Pe,ft,Dt,Ge,2),c.identity(Dt),c.rotateX(Dt,Dt,.5*Math.PI),rs(mt,Pe,ft,Dt,Ge,3),c.identity(Dt),rs(mt,Pe,ft,Dt,Ge,4),c.identity(Dt),c.rotateY(Dt,Dt,Math.PI),rs(mt,Pe,ft,Dt,Ge,5),mt.viewport.set([0,0,_e.width,_e.height])}(C,f),f.markSkyboxValid(C)):"sky"===C.renderPass&&function(_e,Pe,at,gt,mt){const xt=_e.context,kt=xt.gl,Ge=_e.transform,ft=_e.useProgram("skybox");xt.activeTexture.set(kt.TEXTURE0),kt.bindTexture(kt.TEXTURE_CUBE_MAP,Pe.skyboxTexture);const Dt=((Bt,Qt,oi,ni,mi)=>({u_matrix:Bt,u_sun_direction:Qt,u_cubemap:0,u_opacity:ni,u_temporal_offset:mi}))(Ge.skyboxMatrix,Pe.getCenter(_e,!1),0,gt,mt);_e.prepareDrawProgram(xt,ft),ft.draw(xt,kt.TRIANGLES,at,c.StencilMode.disabled,_e.colorModeForRenderPass(),c.CullFaceMode.backCW,Dt,"skybox",Pe.skyboxGeometry.vertexBuffer,Pe.skyboxGeometry.indexBuffer,Pe.skyboxGeometry.segment)}(C,f,le,B,ve):"gradient"===ie&&"sky"===C.renderPass&&function(_e,Pe,at,gt,mt){const xt=_e.context,kt=xt.gl,Ge=_e.transform,ft=_e.useProgram("skyboxGradient");Pe.skyboxGeometry||(Pe.skyboxGeometry=new Ba(xt)),xt.activeTexture.set(kt.TEXTURE0);let Dt=Pe.colorRampTexture;Dt||(Dt=Pe.colorRampTexture=new c.Texture(xt,Pe.colorRamp,kt.RGBA)),Dt.bind(kt.LINEAR,kt.CLAMP_TO_EDGE);const Bt=(Qt=Ge.skyboxMatrix,oi=Pe.getCenter(_e,!1),ni=Pe.paint.get("sky-gradient-radius"),mi=gt,fi=mt,{u_matrix:Qt,u_color_ramp:0,u_center_direction:oi,u_radius:c.degToRad(ni),u_opacity:mi,u_temporal_offset:fi});var Qt,oi,ni,mi,fi;_e.prepareDrawProgram(xt,ft),ft.draw(xt,kt.TRIANGLES,at,c.StencilMode.disabled,_e.colorModeForRenderPass(),c.CullFaceMode.backCW,Bt,"skyboxGradient",Pe.skyboxGeometry.vertexBuffer,Pe.skyboxGeometry.indexBuffer,Pe.skyboxGeometry.segment)}(C,f,le,B,ve)},debug:function(C,o,f){for(let T=0;T<f.length;T++)tl(C,o,f[T])},custom:function(C,o,f,T){const z=C.context,B=f.implementation;if(!C.transform.projection.unsupportedLayers||!C.transform.projection.unsupportedLayers.includes("custom")||C.terrain&&(C.terrain.renderingToTexture||"offscreen"===C.renderPass)&&f.isLayerDraped()){if("offscreen"===C.renderPass){const K=B.prerender;if(K){if(C.setCustomLayerDefaults(),z.setColorMode(C.colorModeForRenderPass()),"globe"===C.transform.projection.name){const ie=C.transform.pointMerc;K.call(B,z.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),c.globeToMercatorTransition(C.transform.zoom),[ie.x,ie.y],C.transform.pixelsPerMeterRatio)}else K.call(B,z.gl,C.transform.customLayerMatrix());z.setDirty(),C.setBaseState()}}else if("translucent"===C.renderPass){if(C.terrain&&C.terrain.renderingToTexture){const ie=B.renderToTile;if(ie){const le=T[0].canonical,ve=new c.MercatorCoordinate(le.x+T[0].wrap*(1<<le.z),le.y,le.z);z.setDepthMode(c.DepthMode.disabled),z.setStencilMode(c.StencilMode.disabled),z.setColorMode(C.colorModeForRenderPass()),C.setCustomLayerDefaults(),ie.call(B,z.gl,ve),z.setDirty(),C.setBaseState()}return}C.setCustomLayerDefaults(),z.setColorMode(C.colorModeForRenderPass()),z.setStencilMode(c.StencilMode.disabled);const K="3d"===B.renderingMode?new c.DepthMode(C.context.gl.LEQUAL,c.DepthMode.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,c.DepthMode.ReadOnly);if(z.setDepthMode(K),"globe"===C.transform.projection.name){const ie=C.transform.pointMerc;B.render(z.gl,C.transform.customLayerMatrix(),C.transform.getProjection(),C.transform.globeToMercatorMatrix(),c.globeToMercatorTransition(C.transform.zoom),[ie.x,ie.y],C.transform.pixelsPerMeterRatio)}else B.render(z.gl,C.transform.customLayerMatrix());z.setDirty(),C.setBaseState(),z.bindFramebuffer.set(null)}}else c.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class qs{constructor(o,f,T=!1){this.context=new et(o,T),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=c.SourceCache.maxUnderzooming+c.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(o,f){const T=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(T||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Jr(this,o));const z=this._terrain;this.transform.elevation=T?z:null,z.update(o,this.transform,f)}_updateFog(o){const f=o.fog;if(!f||"globe"===this.transform.projection.name||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[T,z]=f.getFovAdjustedRange(this.transform._fov);if(T>z)return void(this.transform.fogCullDistSq=null);const B=T+.78*(z-T);this.transform.fogCullDistSq=B*B}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(o,f){if(this.width=o*c.exported.devicePixelRatio,this.height=f*c.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const T of this.style.order)this.style._layers[T].resize()}setup(){const o=this.context,f=new c.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(c.EXTENT,0),f.emplaceBack(0,c.EXTENT),f.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(f,c.posAttributes.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const T=new c.StructArrayLayout2i4;T.emplaceBack(0,0),T.emplaceBack(c.EXTENT,0),T.emplaceBack(0,c.EXTENT),T.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=o.createVertexBuffer(T,c.posAttributes.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const z=new c.StructArrayLayout2i4;z.emplaceBack(-1,-1),z.emplaceBack(1,-1),z.emplaceBack(-1,1),z.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(z,c.posAttributes.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const B=new c.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(c.EXTENT,0,c.EXTENT,0),B.emplaceBack(0,c.EXTENT,0,c.EXTENT),B.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.mercatorBoundsBuffer=o.createVertexBuffer(B,c.boundsAttributes.members),this.mercatorBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const K=new c.StructArrayLayout3ui6;K.emplaceBack(0,1,2),K.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(K);const ie=new c.StructArrayLayout1ui2;for(const ve of[0,1,3,2,0])ie.emplaceBack(ve);this.debugIndexBuffer=o.createIndexBuffer(ie),this.emptyTexture=new c.Texture(o,new c.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA),this.identityMat=c.create();const le=this.context.gl;this.stencilClearMode=new c.StencilMode({func:le.ALWAYS,mask:0},0,255,le.ZERO,le.ZERO,le.ZERO),this.loadTimeStamps.push(c.window.performance.now()),this.atmosphereBuffer=new Ga(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(o,f.TRIANGLES,c.DepthMode.disabled,this.stencilClearMode,c.ColorMode.disabled,c.CullFaceMode.disabled,Ra(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,f,T){if(!f||this.currentStencilSource===f.id||!o.isTileClipped()||!T||0===T.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let ie=!1;for(const le of T)if(void 0===this._tileClippingMaskIDs[le.key]){ie=!0;break}if(!ie)return}this.currentStencilSource=f.id;const z=this.context,B=z.gl;this.nextStencilID+T.length>256&&this.clearStencil(),z.setColorMode(c.ColorMode.disabled),z.setDepthMode(c.DepthMode.disabled);const K=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const ie of T){const le=f.getTile(ie),ve=this._tileClippingMaskIDs[ie.key]=this.nextStencilID++,{tileBoundsBuffer:_e,tileBoundsIndexBuffer:Pe,tileBoundsSegments:at}=this.getTileBoundsBuffers(le);K.draw(z,B.TRIANGLES,c.DepthMode.disabled,new c.StencilMode({func:B.ALWAYS,mask:0},ve,255,B.KEEP,B.KEEP,B.REPLACE),c.ColorMode.disabled,c.CullFaceMode.disabled,Ra(ie.projMatrix),"$clipping",_e,Pe,at)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new c.StencilMode({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const f=this.context.gl;return new c.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(o){const f=this.context.gl,T=o.sort((K,ie)=>ie.overscaledZ-K.overscaledZ),z=T[T.length-1].overscaledZ,B=T[0].overscaledZ-z+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const K={};for(let ie=0;ie<B;ie++)K[ie+z]=new c.StencilMode({func:f.GEQUAL,mask:255},ie+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=B,[K,T]}return[{[z]:c.StencilMode.disabled},T]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new c.ColorMode([o.CONSTANT_COLOR,o.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?c.ColorMode.unblended:c.ColorMode.alphaBlended}depthModeForSublayer(o,f,T){if(!this.opaquePassEnabledForLayer())return c.DepthMode.disabled;const z=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new c.DepthMode(T||this.context.gl.LEQUAL,f,[z,z])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){this.style=o,this.options=f,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const T=this.style.order,z=this.style._sourceCaches;for(const ve in z){const _e=z[ve];_e.used&&_e.prepare(this.context)}const B={},K={},ie={};for(const ve in z){const _e=z[ve];B[ve]=_e.getVisibleCoordinates(),K[ve]=B[ve].slice().reverse(),ie[ve]=_e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ve=0;ve<T.length;ve++)if(this.style._layers[T[ve]].is3D()){this.opaquePassCutoff=ve;break}if(this.terrain&&(this.terrain.updateTileBinding(ie),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new c.GlobeSharedBuffers(this.context)),!c.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const ve of T){const _e=this.style._layers[ve],Pe=o._getLayerSourceCache(_e);if(!_e.hasOffscreenPass()||_e.isHidden(this.transform.zoom))continue;const at=Pe?K[Pe.id]:void 0;("custom"===_e.type||_e.isSky()||at&&at.length)&&this.renderLayer(this,Pe,_e,at)}this.depthRangeFor3D=[0,1-(o.order.length+2)*this.numSublayers*this.depthEpsilon];const le=this.terrain;if(le&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&le.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const ve=this.style._layers[T[this.currentLayer]],_e=o._getLayerSourceCache(ve);if(ve.isSky())continue;const Pe=_e?K[_e.id]:void 0;this._renderTileClippingMasks(ve,_e,Pe),this.renderLayer(this,_e,ve,Pe)}if(this.style.fog&&this.transform.projection.supportsFog&&function(ve,_e){const Pe=ve.context,at=Pe.gl,gt=ve.transform,mt=new c.DepthMode(at.LEQUAL,c.DepthMode.ReadOnly,[0,1]),xt=ve.useProgram("globeAtmosphere",null,"globe"===gt.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),kt=c.globeToMercatorTransition(gt.zoom),Ge=_e.properties.get("color").toArray01(),ft=_e.properties.get("high-color").toArray01(),Dt=_e.properties.get("space-color").toArray01PremultipliedAlpha(),Bt=c.identity$1([]);c.rotateY$1(Bt,Bt,-c.degToRad(gt._center.lng)),c.rotateX$1(Bt,Bt,c.degToRad(gt._center.lat)),c.rotateZ$1(Bt,Bt,gt.angle),c.rotateX$1(Bt,Bt,-gt._pitch);const Qt=c.fromQuat(new Float32Array(16),Bt),oi=c.mapValue(_e.properties.get("star-intensity"),0,1,0,.25),mi=c.mapValue(_e.properties.get("horizon-blend"),0,1,5e-4,.25),fi=c.globeUseCustomAntiAliasing(ve,Pe,gt)&&5e-4===mi?gt.worldSize/(2*Math.PI*1.025)-1:gt.globeRadius,Ai=ve.frameCounter/1e3%1,yn=c.length(gt.globeCenterInViewSpace),Oi=Math.sqrt(Math.pow(yn,2)-Math.pow(fi,2)),rn=Math.acos(Oi/yn),zi={u_frustum_tl:gt.frustumCorners.TL,u_frustum_tr:gt.frustumCorners.TR,u_frustum_br:gt.frustumCorners.BR,u_frustum_bl:gt.frustumCorners.BL,u_horizon:gt.frustumCorners.horizon,u_transition:kt,u_fadeout_range:mi,u_color:Ge,u_high_color:ft,u_space_color:Dt,u_star_intensity:oi,u_star_size:5*c.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Ai,u_horizon_angle:rn,u_rotation_matrix:Qt};ve.prepareDrawProgram(Pe,xt);const bn=ve.atmosphereBuffer;bn&&xt.draw(Pe,at.TRIANGLES,mt,c.StencilMode.disabled,c.ColorMode.alphaBlended,c.CullFaceMode.backCW,zi,"skybox",bn.vertexBuffer,bn.indexBuffer,bn.segments)}(this,this.style.fog),this.renderPass="sky",(c.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const ve=this.style._layers[T[this.currentLayer]],_e=o._getLayerSourceCache(ve);ve.isSky()&&this.renderLayer(this,_e,ve,_e?K[_e.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;){const ve=this.style._layers[T[this.currentLayer]],_e=o._getLayerSourceCache(ve);if(ve.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(ve)){if(ve.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Pe=_e?("symbol"===ve.type?ie:K)[_e.id]:void 0;this._renderTileClippingMasks(ve,_e,_e?B[_e.id]:void 0),this.renderLayer(this,_e,ve,Pe),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ve=null;c.values(this.style._layers).forEach(_e=>{const Pe=o._getLayerSourceCache(_e);Pe&&!_e.isHidden(this.transform.zoom)&&(!ve||ve.getSource().maxzoom<Pe.getSource().maxzoom)&&(ve=Pe)}),ve&&this.options.showTileBoundaries&&Na.debug(this,ve,ve.getVisibleCoordinates())}this.options.showPadding&&function(ve){const _e=ve.transform.padding;Is(ve,ve.transform.height-(_e.top||0),3,ia),Is(ve,_e.bottom||0,3,Xl),xo(ve,_e.left||0,3,ml),xo(ve,ve.transform.width-(_e.right||0),3,Lo);const Pe=ve.transform.centerPoint;var at,gt,mt,xt;il(at=ve,(gt=Pe.x)-1,(mt=ve.transform.height-Pe.y)-10,2,20,xt=Zl),il(at,gt-10,mt-1,20,2,xt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(c.window.performance.now()),this.saveCanvasCopy())}renderLayer(o,f,T,z){T.isHidden(this.transform.zoom)||("background"===T.type||"sky"===T.type||"custom"===T.type||z&&z.length)&&(this.id=T.id,this.gpuTimingStart(T),(!o.transform.projection.unsupportedLayers||!o.transform.projection.unsupportedLayers.includes(T.type)||o.terrain&&"custom"===T.type)&&Na[T.type](o,f,T,z,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let T=this.gpuTimers[o.id];T||(T=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),T.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,T.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,f=o.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),o.beginQueryEXT(o.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const f={};for(const T in o){const z=o[T],B=this.context.extTimerQuery,K=B.getQueryObjectEXT(z.query,B.QUERY_RESULT_EXT)/1e6;B.deleteQueryEXT(z.query),f[T]=K}return f}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let T=0;for(const z of o)T+=f.getQueryObjectEXT(z,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(z);return T}translatePosMatrix(o,f,T,z,B){if(!T[0]&&!T[1])return o;const K=B?"map"===z?this.transform.angle:0:"viewport"===z?-this.transform.angle:0;if(K){const ve=Math.sin(K),_e=Math.cos(K);T=[T[0]*_e-T[1]*ve,T[0]*ve+T[1]*_e]}const ie=[B?T[0]:pn(f,T[0],this.transform.zoom),B?T[1]:pn(f,T[1],this.transform.zoom),0],le=new Float32Array(16);return c.translate(le,o,ie),le}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){return null===o||void 0!==o&&!this.imageManager.getPattern(o.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const o=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&0===this.terrain.exaggeration(),T=this.style&&this.style.fog,z=[];return this.terrainRenderModeElevated()&&z.push("TERRAIN"),"globe"===this.transform.projection.name&&z.push("GLOBE"),f&&z.push("ZERO_EXAGGERATION"),T&&!o&&0!==T.getOpacity(this.transform.pitch)&&z.push("FOG"),o&&z.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&z.push("OVERDRAW_INSPECTOR"),z}useProgram(o,f,T){this.cache=this.cache||{};const z=T||[],B=this.currentGlobalDefines().concat(z),K=Cr.cacheKey(mo[o],o,B,f);return this.cache[K]||(this.cache[K]=new Cr(this.context,o,mo[o],f,Wo[o],B)),this.cache[K]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=c.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(o,f,T){if(this.terrain&&this.terrain.renderingToTexture)return;const z=this.style.fog;if(z){const B=z.getOpacity(this.transform.pitch),K=((ie,le,ve,_e,Pe,at,gt,mt,xt,kt,Ge)=>{const ft=ie.transform,Dt=le.properties.get("color").toArray01();Dt[3]=_e;const Bt=ie.frameCounter/1e3%1;return{u_fog_matrix:ve?ft.calculateFogTileMatrix(ve):ie.identityMat,u_fog_range:le.getFovAdjustedRange(ft._fov),u_fog_color:Dt,u_fog_horizon_blend:le.properties.get("horizon-blend"),u_fog_temporal_offset:Bt,u_frustum_tl:Pe,u_frustum_tr:at,u_frustum_br:gt,u_frustum_bl:mt,u_globe_pos:xt,u_globe_radius:kt,u_viewport:Ge,u_globe_transition:c.globeToMercatorTransition(ft.zoom),u_is_globe:+("globe"===ft.projection.name)}})(this,z,T,B,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*c.exported.devicePixelRatio,this.transform.height*c.exported.devicePixelRatio]);f.setFogUniformValues(o,K)}}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,f=o.createTexture();return o.bindTexture(o.TEXTURE_2D,f),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&0!==o.getOpacity(this.transform.pitch)}getBackgroundTiles(){const o=this._backgroundTiles,f=this._backgroundTiles={},T=this.transform.coveringTiles({tileSize:512});for(const z of T)f[z.key]=o[z.key]||new c.Tile(z,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class qo{constructor(o=0,f=0,T=0,z=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(T)||T<0||isNaN(z)||z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=T,this.right=z}interpolate(o,f,T){return null!=f.top&&null!=o.top&&(this.top=c.number(o.top,f.top,T)),null!=f.bottom&&null!=o.bottom&&(this.bottom=c.number(o.bottom,f.bottom,T)),null!=f.left&&null!=o.left&&(this.left=c.number(o.left,f.left,T)),null!=f.right&&null!=o.right&&(this.right=c.number(o.right,f.right,T)),this}getCenter(o,f){const T=c.clamp((this.left+o-this.right)/2,0,o),z=c.clamp((this.top+f-this.bottom)/2,0,f);return new c.Point(T,z)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new qo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ko(C,o){const f=c.getColumn(C,3);c.fromQuat(C,o),c.setColumn(C,3,f)}function Gr(C,o){const f=c.identity$1([]);return c.rotateZ$1(f,f,-o),c.rotateX$1(f,f,-C),f}function _l(C,o){const f=[C[0],C[1],0],T=[o[0],o[1],0];if(c.length(f)>=1e-15){const K=c.normalize([],f);c.scale$2(T,K,c.dot(T,K)),o[0]=T[0],o[1]=T[1]}const z=c.cross([],o,C);if(c.len(z)<1e-15)return null;const B=Math.atan2(-z[1],z[0]);return Gr(Math.atan2(Math.sqrt(C[0]*C[0]+C[1]*C[1]),-C[2]),B)}class _a{constructor(o,f){this.position=o,this.orientation=f}get position(){return this._position}set position(o){if(o){const f=o instanceof c.MercatorCoordinate?o:new c.MercatorCoordinate(o[0],o[1],o[2]);this._renderWorldCopies&&(f.x=c.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(o,f){if(this.orientation=null,!this.position)return;const T=this.position,z=this._elevation?this._elevation.getAtPointOrZero(c.MercatorCoordinate.fromLngLat(o)):0,B=c.MercatorCoordinate.fromLngLat(o,z),K=[B.x-T.x,B.y-T.y,B.z-T.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=_l(K,f)}setPitchBearing(o,f){this.orientation=Gr(c.degToRad(o),c.degToRad(-f))}}class na{constructor(o,f){this._transform=c.identity([]),this.orientation=f,this.position=o}get mercatorPosition(){const o=this.position;return new c.MercatorCoordinate(o[0],o[1],o[2])}get position(){const o=c.getColumn(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var f;o&&c.setColumn(this._transform,3,[(f=o)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||c.identity$1([]),o&&ko(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,f){this._orientation=Gr(o,f),ko(this._transform,this._orientation)}forward(){const o=c.getColumn(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=c.getColumn(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=c.getColumn(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,f){const T=new Float64Array(16);return c.invert(T,this.getWorldToCamera(o,f)),T}getWorldToCameraPosition(o,f,T){const z=this.position;c.scale$2(z,z,-o);const B=new Float64Array(16);return c.fromScaling(B,[T,T,T]),c.translate(B,B,z),B[10]*=f,B}getWorldToCamera(o,f){const T=new Float64Array(16),z=new Float64Array(4),B=this.position;return c.conjugate(z,this._orientation),c.scale$2(B,B,-o),c.fromQuat(T,z),c.translate(T,T,B),T[1]*=-1,T[5]*=-1,T[9]*=-1,T[13]*=-1,T[8]*=f,T[9]*=f,T[10]*=f,T[11]*=f,T}getCameraToClipPerspective(o,f,T,z){const B=new Float64Array(16);return c.perspective(B,o,f,T,z),B}getDistanceToElevation(o,f=!1){const T=0===o?0:c.mercatorZfromAltitude(o,f?c.latFromMercatorY(this.position[1]):this.position[1]),z=this.forward();return(T-this.position[2])/z[2]}clone(){return new na([...this.position],[...this.orientation])}}function ra(C,o){const f=vl(C.projection,C.zoom,C.width,C.height),T=function(B,K,ie,le,ve){const _e=new c.LngLat(ie.lng-180*sa,ie.lat),Pe=new c.LngLat(ie.lng+180*sa,ie.lat),at=B.project(_e.lng,_e.lat),gt=B.project(Pe.lng,Pe.lat),mt=-Math.atan2(gt.y-at.y,gt.x-at.x),xt=c.MercatorCoordinate.fromLngLat(ie);xt.y=c.clamp(xt.y,-1+sa,1-sa);const kt=xt.toLngLat(),Ge=B.project(kt.lng,kt.lat),ft=c.MercatorCoordinate.fromLngLat(kt);ft.x+=sa;const Dt=ft.toLngLat(),Bt=B.project(Dt.lng,Dt.lat),Qt=Ol(Bt.x-Ge.x,Bt.y-Ge.y,mt),oi=c.MercatorCoordinate.fromLngLat(kt);oi.y+=sa;const ni=oi.toLngLat(),mi=B.project(ni.lng,ni.lat),fi=Ol(mi.x-Ge.x,mi.y-Ge.y,mt),Ai=Math.abs(Qt.x)/Math.abs(fi.y),yn=c.identity([]);c.rotateZ(yn,yn,-mt*(1-(ve?0:le)));const Oi=c.identity([]);return c.scale(Oi,Oi,[1,1-(1-Ai)*le,1]),Oi[4]=-fi.x/fi.y*le,c.rotateZ(Oi,Oi,mt),c.multiply(Oi,yn,Oi),Oi}(C.projection,0,C.center,f,o),z=zo(C);return c.scale(T,T,[z,z,1]),T}function zo(C){const o=C.projection,f=vl(C.projection,C.zoom,C.width,C.height),T=ho(o,C.center),z=ho(o,c.LngLat.convert(o.center));return Math.pow(2,T*f+(1-f)*z)}function vl(C,o,f,T,z=1/0){const B=C.range;if(!B)return 0;const K=Math.min(z,Math.max(f,T)),ie=Math.log(K/1024)/Math.LN2;return c.smoothstep(B[0]+ie,B[1]+ie,o)}const sa=1/4e4;function ho(C,o){const f=c.clamp(o.lat,-c.MAX_MERCATOR_LATITUDE,c.MAX_MERCATOR_LATITUDE),T=new c.LngLat(o.lng-180*sa,f),z=new c.LngLat(o.lng+180*sa,f),B=C.project(T.lng,f),K=C.project(z.lng,f),ie=c.MercatorCoordinate.fromLngLat(T),le=c.MercatorCoordinate.fromLngLat(z),ve=K.x-B.x,_e=K.y-B.y,Pe=le.x-ie.x,at=le.y-ie.y,gt=Math.sqrt((Pe*Pe+at*at)/(ve*ve+_e*_e));return Math.log(gt)/Math.LN2}function Ol(C,o,f){const T=Math.cos(f),z=Math.sin(f);return{x:C*T-o*z,y:C*z+o*T}}class oa{constructor(o,f,T,z,B,K,ie){this.tileSize=512,this._renderWorldCopies=void 0===B||B,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=T??0,this._maxPitch=z??60,this.setProjection(K),this.setMaxBounds(ie),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new qo,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new na,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const o=new oa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(o,f=!1){const T=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||T)&&this._updateCameraOnTerrain(),(o||T)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return c.pick(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=c.getProjection(this.projectionOptions);const T=!Z(f,this.getProjection());return T&&this._calcMatrices(),this.mercatorFromTransition=!1,T}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=c.getProjection({name:"mercator"});const f=o!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(o){void 0===o?o=!0:null===o&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return c.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.Point(this.width,this.height)}get bearing(){return c.wrap(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const f=-o*Math.PI/180;var T,z,B,K,ie,le,ve,_e,Pe,at;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(T=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T),z=this.rotationMatrix,K=this.angle,ie=(B=this.rotationMatrix)[0],le=B[1],ve=B[2],_e=B[3],Pe=Math.sin(K),at=Math.cos(K),z[0]=ie*at+ve*Pe,z[1]=le*at+_e*Pe,z[2]=ie*-Pe+ve*at,z[3]=le*-Pe+_e*at)}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const f=c.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=c.degToRad(o),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const f=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const o=this._elevation;this._centerAltitude=o.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=o.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],T=this.horizonLineFromTop();let z=0,B=0;for(let K=0;K<f.length;K++){const ie=new c.Point(f[K][0]*this.width,T+f[K][1]*(this.height-T)),le=o.pointCoordinate(ie);if(!le)continue;const ve=1/Math.hypot(le[0]-this._camera.position[0],le[1]-this._camera.position[1]);z+=le[3]*ve,B+=ve}return 0===B?NaN:z/B}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const o=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),T=this.pixelsPerMeter/this.worldSize*f,z=this._mercatorZfromZoom(o),B=this._mercatorZfromZoom(this._maxZoom),K=Math.max(z-T,B);this._setZoom(this._zoomFromMercatorZ(K))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let T;T=o.z<this._camera.position[2]?[f.x,f.y,f.z]:[o.x,o.y,o.z];const z=c.length(c.sub([],this._camera.position,T));return c.clamp(this._zoomFromMercatorZ(z),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let f=!1;if(o.orientation&&!c.exactEquals(o.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(o.orientation)),o.position){const T=[o.position.x,o.position.y,o.position.z];c.exactEquals$1(T,this._camera.position)||(this._setCameraPosition(T),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,f=new _a;return f.position=new c.MercatorCoordinate(o[0],o[1],o[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(o){if(!c.length$1(o))return!1;c.normalize$1(o,o);const f=c.transformQuat([],[0,0,-1],o),T=c.transformQuat([],[0,-1,0],o);if(T[2]<0)return!1;const z=_l(f,T);return!!z&&(this._camera.orientation=z,!0)}_setCameraPosition(o){const f=this.zoomScale(this.minZoom)*this.tileSize,T=this.zoomScale(this.maxZoom)*this.tileSize,z=this.cameraToCenterDistance;o[2]=c.clamp(o[2],z/T,z/f),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,T){this._unmodified=!1,this._edgeInsets.interpolate(o,f,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const f=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(o){const f=[new c.UnwrappedTileID(0,o)];if(this.renderWorldCopies){const T=this.pointCoordinate(new c.Point(0,0)),z=this.pointCoordinate(new c.Point(this.width,0)),B=this.pointCoordinate(new c.Point(this.width,this.height)),K=this.pointCoordinate(new c.Point(0,this.height)),ie=Math.floor(Math.min(T.x,z.x,B.x,K.x)),le=Math.floor(Math.max(T.x,z.x,B.x,K.x)),ve=1;for(let _e=ie-ve;_e<=le+ve;_e++)0!==_e&&f.push(new c.UnwrappedTileID(_e,o))}return f}coveringTiles(o){let f=this.coveringZoomLevel(o);const T=f,z=this.elevation&&!o.isTerrainDEM,B="mercator"===this.projection.name;if(void 0!==o.minzoom&&f<o.minzoom)return[];void 0!==o.maxzoom&&f>o.maxzoom&&(f=o.maxzoom);const K=this.locationCoordinate(this.center),ie=this.center.lat,le=1<<f,ve=[le*K.x,le*K.y,0],_e="globe"===this.projection.name,Pe=!_e,at=c.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,Pe),gt=_e?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),mt=le*c.mercatorZfromAltitude(1,this.center.lat),xt=this._camera.position[2]/c.mercatorZfromAltitude(1,this.center.lat),kt=[le*gt.x,le*gt.y,xt*(Pe?1:mt)],Ge=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),ft=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,Dt=o.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Bt=o.isTerrainDEM?-Dt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Qt=this.projection.isReprojectedInTileSpace?zo(this):1,oi=Ri=>{const vn=new c.MercatorCoordinate(Ri.x+25e-6,Ri.y,Ri.z),dn=new c.MercatorCoordinate(Ri.x,Ri.y+25e-6,Ri.z),mn=Ri.toLngLat(),er=vn.toLngLat(),Er=dn.toLngLat(),jn=this.locationCoordinate(mn),dr=this.locationCoordinate(er),Tr=this.locationCoordinate(Er),pr=Math.hypot(dr.x-jn.x,dr.y-jn.y),tr=Math.hypot(Tr.x-jn.x,Tr.y-jn.y);return Math.sqrt(pr*tr)*Qt/25e-6},ni=Ri=>{const Li=Dt,vn=Bt;return{aabb:c.tileAABB(this,le,0,0,0,Ri,vn,Li,this.projection),zoom:0,x:0,y:0,minZ:vn,maxZ:Li,wrap:Ri,fullyVisible:!1}},mi=[];let fi=[];const Ai=f,yn=o.reparseOverscaled?T:f,Oi=Ri=>Ri*Ri,rn=Oi((xt-this._centerAltitude)*mt),zi=Ri=>{if(!this._elevation||!Ri.tileID||!B)return;const Li=this._elevation.getMinMaxForTile(Ri.tileID),vn=Ri.aabb;Li?(vn.min[2]=Li.min,vn.max[2]=Li.max,vn.center[2]=(vn.min[2]+vn.max[2])/2):(Ri.shouldSplit=bn(Ri),Ri.shouldSplit||(vn.min[2]=vn.max[2]=vn.center[2]=this._centerAltitude))},bn=Ri=>{if(Ri.zoom<ft)return!0;if(Ri.zoom===Ai)return!1;if(null!=Ri.shouldSplit)return Ri.shouldSplit;const Li=Ri.aabb.distanceX(kt),vn=Ri.aabb.distanceY(kt);let dn=rn,mn=1;if(_e){dn=Oi(Ri.aabb.distanceZ(kt));const jn=Math.pow(2,Ri.zoom),dr=c.latFromMercatorY((Ri.y+1)/jn),Tr=c.latFromMercatorY(Ri.y/jn),pr=Math.min(Math.max(ie,dr),Tr),tr=c.circumferenceAtLatitude(pr)/c.circumferenceAtLatitude(ie);if(mn=pr===ie?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,tr/this._mercatorScaleRatio),this.zoom<=c.GLOBE_ZOOM_THRESHOLD_MIN&&Ri.zoom===Ai-1&&tr>=.9)return!0}else if(z&&(dn=Oi(Ri.aabb.distanceZ(kt)*mt)),this.projection.isReprojectedInTileSpace&&T<=5){const jn=Math.pow(2,Ri.zoom),dr=oi(new c.MercatorCoordinate((Ri.x+.5)/jn,(Ri.y+.5)/jn));mn=dr>.85?1:dr}const er=Li*Li+vn*vn+dn;return er<Oi((1<<Ai-Ri.zoom)*Ge*mn*((jn,dr)=>{if(dr*Oi(.707)<jn)return 1;const Tr=Math.sqrt(dr/jn);return Tr/(1.4144271570014144+(Math.pow(1.1,Tr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(dn,rn),er))};if(this.renderWorldCopies)for(let Ri=1;Ri<=3;Ri++)mi.push(ni(-Ri)),mi.push(ni(Ri));for(mi.push(ni(0));mi.length>0;){const Ri=mi.pop(),Li=Ri.x,vn=Ri.y;let dn=Ri.fullyVisible;if(!dn){const mn=Ri.aabb.intersects(at);if(0===mn)continue;dn=2===mn}if(Ri.zoom!==Ai&&bn(Ri))for(let mn=0;mn<4;mn++){const er=(Li<<1)+mn%2,Er=(vn<<1)+(mn>>1),jn={aabb:B?Ri.aabb.quadrant(mn):c.tileAABB(this,le,Ri.zoom+1,er,Er,Ri.wrap,Ri.minZ,Ri.maxZ,this.projection),zoom:Ri.zoom+1,x:er,y:Er,wrap:Ri.wrap,fullyVisible:dn,tileID:void 0,shouldSplit:void 0,minZ:Ri.minZ,maxZ:Ri.maxZ};z&&!_e&&(jn.tileID=new c.OverscaledTileID(Ri.zoom+1===Ai?yn:Ri.zoom+1,Ri.wrap,Ri.zoom+1,er,Er),zi(jn)),mi.push(jn)}else{const mn=Ri.zoom===Ai?yn:Ri.zoom;if(o.minzoom&&o.minzoom>mn)continue;const er=ve[0]-(.5+Li+(Ri.wrap<<Ri.zoom))*(1<<f-Ri.zoom),Er=ve[1]-.5-vn,jn=Ri.tileID?Ri.tileID:new c.OverscaledTileID(mn,Ri.wrap,Ri.zoom,Li,vn);fi.push({tileID:jn,distanceSq:er*er+Er*Er})}}if(this.fogCullDistSq){const Ri=this.fogCullDistSq,Li=this.horizonLineFromTop();fi=fi.filter(vn=>{const dn=[0,0,0,1],mn=[c.EXTENT,c.EXTENT,0,1],er=this.calculateFogTileMatrix(vn.tileID.toUnwrapped());c.transformMat4$1(dn,dn,er),c.transformMat4$1(mn,mn,er);const Er=c.getAABBPointSquareDist(dn,mn);if(0===Er)return!0;let jn=!1;const dr=this._elevation;if(dr&&Er>Ri&&0!==Li){const Tr=this.calculateProjMatrix(vn.tileID.toUnwrapped());let pr;o.isTerrainDEM||(pr=dr.getMinMaxForTile(vn.tileID)),pr||(pr={min:Bt,max:Dt});const tr=c.furthestTileCorner(this.rotation),zr=[tr[0]*c.EXTENT,tr[1]*c.EXTENT,pr.max];c.transformMat4(zr,zr,Tr),jn=(1-zr[1])*this.height*.5<Li}return Er<Ri||jn})}return fi.sort((Ri,Li)=>Ri.distanceSq-Li.distanceSq).map(Ri=>Ri.tileID)}resize(o,f){this.width=o,this.height=f,this.pixelsToGLUnits=[2/o,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const f=c.clamp(o.lat,-c.MAX_MERCATOR_LATITUDE,c.MAX_MERCATOR_LATITUDE),T=this.projection.project(o.lng,f);return new c.Point(T.x*this.worldSize,T.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/c.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,f){let T,z;const B=this.centerPoint;if("globe"===this.projection.name){const ie=this.worldSize;T=(f.x-B.x)/ie,z=(f.y-B.y)/ie}else{const ie=this.pointCoordinate(f),le=this.pointCoordinate(B);T=ie.x-le.x,z=ie.y-le.y}const K=this.locationCoordinate(o);this.setLocation(new c.MercatorCoordinate(K.x-T,K.y-z))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,f){const T=f?c.mercatorZfromAltitude(f,o.lat):void 0,z=this.projection.project(o.lng,o.lat);return new c.MercatorCoordinate(z.x,z.y,T)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,f){const T=f??this._centerAltitude,z=[o.x,o.y,0,1],B=[o.x,o.y,1,1];c.transformMat4$1(z,z,this.pixelMatrixInverse),c.transformMat4$1(B,B,this.pixelMatrixInverse);const K=B[3];c.scale$1(z,z,1/z[3]),c.scale$1(B,B,1/K);const ie=z[2],le=B[2];return{p0:z,p1:B,t:ie===le?0:(T-ie)/(le-ie)}}screenPointToMercatorRay(o){const f=[o.x,o.y,0,1],T=[o.x,o.y,1,1];return c.transformMat4$1(f,f,this.pixelMatrixInverse),c.transformMat4$1(T,T,this.pixelMatrixInverse),c.scale$1(f,f,1/f[3]),c.scale$1(T,T,1/T[3]),f[2]=c.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,T[2]=c.mercatorZfromAltitude(T[2],this._center.lat)*this.worldSize,c.scale$1(f,f,1/this.worldSize),c.scale$1(T,T,1/this.worldSize),new c.Ray([f[0],f[1],f[2]],c.normalize([],c.sub([],T,f)))}rayIntersectionCoordinate(o){const{p0:f,p1:T,t:z}=o,B=c.mercatorZfromAltitude(f[2],this._center.lat),K=c.mercatorZfromAltitude(T[2],this._center.lat);return new c.MercatorCoordinate(c.number(f[0],T[0],z)/this.worldSize,c.number(f[1],T[1],z)/this.worldSize,c.number(B,K,z))}pointCoordinate(o,f=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,f)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let f=this.projection.pointCoordinate3D(this,o.x,o.y);if(f)return new c.MercatorCoordinate(f[0],f[1],f[2]);let T=0,z=this.horizonLineFromTop();if(o.y>z)return this.pointCoordinate(o);const B=.02*z,K=o.clone();for(let ie=0;ie<10&&z-T>B;ie++){K.y=c.number(T,z,.66);const le=this.projection.pointCoordinate3D(this,K.x,K.y);le?(z=K.y,f=le):T=K.y}return f?new c.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=c.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(o);const f=this.pointCoordinate(o);return f.y>=0&&f.y<=1}_coordinatePoint(o,f){const T=f&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,z=[o.x*this.worldSize,o.y*this.worldSize,T+o.toAltitude(),1];return c.transformMat4$1(z,z,this.pixelMatrix),z[3]>0?new c.Point(z[0]/z[3],z[1]/z[3]):new c.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:f}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,z=this.width-this._edgeInsets.right,B=this.pointLocation3D(new c.Point(f,o)),K=this.pointLocation3D(new c.Point(z,o)),ie=this.pointLocation3D(new c.Point(z,T)),le=this.pointLocation3D(new c.Point(f,T));let ve=Math.min(B.lng,K.lng,ie.lng,le.lng),_e=Math.max(B.lng,K.lng,ie.lng,le.lng),Pe=Math.min(B.lat,K.lat,ie.lat,le.lat),at=Math.max(B.lat,K.lat,ie.lat,le.lat);const gt=Math.pow(2,-this.zoom)/16*270,mt="globe"===this.projection.name?1:4,xt=(kt,Ge,ft,Dt,Bt)=>{const Qt=(kt+ft)/2,oi=(Ge+Dt)/2,ni=new c.Point(Qt,oi),{lng:mi,lat:fi}=this.pointLocation3D(ni),Ai=Math.max(0,ve-mi,Pe-fi,mi-_e,fi-at);ve=Math.min(ve,mi),_e=Math.max(_e,mi),Pe=Math.min(Pe,fi),at=Math.max(at,fi),(Bt<mt||Ai>gt)&&(xt(kt,Ge,Qt,oi,Bt+1),xt(Qt,oi,ft,Dt,Bt+1))};if(xt(f,o,z,o,1),xt(z,o,z,T,1),xt(z,T,f,T,1),xt(f,T,f,o,1),"globe"===this.projection.name){const[kt,Ge]=c.polesInViewport(this);kt?(at=90,_e=180,ve=-180):Ge&&(Pe=-90,_e=180,ve=-180)}return new c.LngLatBounds(new c.LngLat(ve,Pe),new c.LngLat(_e,at))}_getBoundsRectangular(o,f){const{top:T,left:z}=this._edgeInsets,B=this.height-this._edgeInsets.bottom,K=this.width-this._edgeInsets.right,ie=new c.Point(z,T),le=new c.Point(K,T),ve=new c.Point(K,B),_e=new c.Point(z,B);let Pe=this.pointCoordinate(ie,o),at=this.pointCoordinate(le,o);const gt=this.pointCoordinate(ve,f),mt=this.pointCoordinate(_e,f),xt=(kt,Ge)=>(Ge.y-kt.y)/(Ge.x-kt.x);return Pe.y>1&&at.y>=0?Pe=new c.MercatorCoordinate((1-mt.y)/xt(mt,Pe)+mt.x,1):Pe.y<0&&at.y<=1&&(Pe=new c.MercatorCoordinate(-mt.y/xt(mt,Pe)+mt.x,0)),at.y>1&&Pe.y>=0?at=new c.MercatorCoordinate((1-gt.y)/xt(gt,at)+gt.x,1):at.y<0&&Pe.y<=1&&(at=new c.MercatorCoordinate(-gt.y/xt(gt,at)+gt.x,0)),(new c.LngLatBounds).extend(this.coordinateLocation(Pe)).extend(this.coordinateLocation(at)).extend(this.coordinateLocation(mt)).extend(this.coordinateLocation(gt))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=o.visibleDemTiles.reduce((T,z)=>{if(z.dem){const B=z.dem.tree;T.min=Math.min(T.min,B.minimums[0]),T.max=Math.max(T.max,B.maximums[0])}return T},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*o.exaggeration(),f.max*o.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,T=this.height/2-f*(1-this._horizonShift);return o?Math.max(0,T):T}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-c.MAX_MERCATOR_LATITUDE,this.maxLat=c.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=c.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=c.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=c.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=c.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,f){return this.projection.createTileMatrix(this,f,o)}calculateDistanceTileData(o){const f=o.key,T=this._distanceTileDataCache;if(T[f])return T[f];const z=o.canonical,B=1/this.height,K=this.cameraWorldSize,ie=K/this.zoomScale(z.z),le=(z.x+Math.pow(2,z.z)*o.wrap)*ie,ve=z.y*ie,_e=this.point;_e.x*=K/this.worldSize,_e.y*=K/this.worldSize;const Pe=this.angle,at=Math.sin(-Pe),gt=-Math.cos(-Pe);return T[f]={bearing:[at,gt],center:[(_e.x-le)*B,(_e.y-ve)*B],scale:ie/c.EXTENT*B},T[f]}calculateFogTileMatrix(o){const f=o.key,T=this._fogTileMatrixCache;if(T[f])return T[f];const z=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return c.multiply(z,this.worldToFogMatrix,z),T[f]=new Float32Array(z),T[f]}calculateProjMatrix(o,f=!1){const T=o.key,z=f?this._alignedProjMatrixCache:this._projMatrixCache;if(z[T])return z[T];const B=this.calculatePosMatrix(o,this.worldSize);return c.multiply(B,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,B),z[T]=new Float32Array(B),z[T]}calculatePixelsToTileUnitsMatrix(o){const f=o.tileID.key,T=this._pixelsToTileUnitsCache;if(T[f])return T[f];const z=function(B,K){const{scale:ie}=B.tileTransform,le=ie*c.EXTENT/(B.tileSize*Math.pow(2,K.zoom-B.tileID.overscaledZ+B.tileID.canonical.z));return ve=new Float32Array(4),at=(_e=K.inverseAdjustmentMatrix)[1],gt=_e[2],mt=_e[3],kt=(Pe=[le,le])[1],ve[0]=_e[0]*(xt=Pe[0]),ve[1]=at*xt,ve[2]=gt*kt,ve[3]=mt*kt,ve;var ve,_e,Pe,at,gt,mt,xt,kt}(o,this);return T[f]=z,T[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const o=1/this.worldSize,f=c.fromScaling([],[o,o,o]);return c.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const o=this._elevation;this._updateCameraState();const f=c.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,T=this._computeCameraPosition(f),z=this._camera.forward(),B=c.mercatorZfromAltitude(1,this._center.lat);T[2]/=B,z[2]/=B,c.normalize(z,z);const K=o.raycast(T,z,o.exaggeration());if(K){const ie=c.scaleAndAdd([],T,z,K),le=new c.MercatorCoordinate(ie[0],ie[1],c.mercatorZfromAltitude(ie[2],c.latFromMercatorY(ie[1]))),ve=(le.z+c.length([le.x-T[0],le.y-T[1],le.z-T[2]*B]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(ve),this._centerAltitude=le.toAltitude(),this._center=this.coordinateLocation(le),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const f=this._elevation,T=c.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,z=this._computeCameraPosition(T),B=f.getAtPointOrZero(new c.MercatorCoordinate(...z)),K=this.pixelsPerMeter/this.worldSize*B,ie=this._minimumHeightOverTerrain(),le=z[2]-K;if(le<=ie)if(le<0||o){const ve=this.locationCoordinate(this._center,this._centerAltitude),_e=[z[0],z[1],ve.z-z[2]],Pe=c.length(_e);_e[2]-=(ie-le)/this._pixelsPerMercatorPixel;const at=c.length(_e);if(0===at)return;c.scale$2(_e,_e,Pe/at*this._pixelsPerMercatorPixel),this._camera.position=[z[0],z[1],ve.z*this._pixelsPerMercatorPixel-_e[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const at=this.center;return at.lat=c.clamp(at.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(at.lng=c.clamp(at.lng,this.minLng,this.maxLng)),this.center=at,void(this._constraining=!1)}const f=this._unmodified,{x:T,y:z}=this.point;let B=0,K=T,ie=z;const le=this.width/2,ve=this.height/2,_e=this.worldMinY*this.scale,Pe=this.worldMaxY*this.scale;if(z-ve<_e&&(ie=_e+ve),z+ve>Pe&&(ie=Pe-ve),Pe-_e<this.height&&(B=Math.max(B,this.height/(Pe-_e)),ie=(Pe+_e)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const at=this.worldMinX*this.scale,gt=this.worldMaxX*this.scale,mt=this.worldSize/2-(at+gt)/2;K=(T+mt+this.worldSize)%this.worldSize-mt,K-le<at&&(K=at+le),K+le>gt&&(K=gt-le),gt-at<this.width&&(B=Math.max(B,this.width/(gt-at)),K=(gt+at)/2)}K===T&&ie===z||(this.center=this.unproject(new c.Point(K,ie))),B&&(this.zoom+=this.scaleZoom(B)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,f=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=c.mercatorZfromAltitude(1,this.center.lat)/c.mercatorZfromAltitude(1,c.GLOBE_SCALE_MATCH_LATITUDE));const T=vl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,T),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const z="meters"===this.projection.zAxisUnit?f:1,B=this._camera.getWorldToCamera(this.worldSize,z),K=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);K[8]=2*-o.x/this.width,K[9]=2*o.y/this.height;let ie=c.mul([],K,B);if(this.projection.isReprojectedInTileSpace){const oi=this.locationCoordinate(this.center),ni=c.identity([]);c.translate(ni,ni,[oi.x*this.worldSize,oi.y*this.worldSize,0]),c.multiply(ni,ni,ra(this)),c.translate(ni,ni,[-oi.x*this.worldSize,-oi.y*this.worldSize,0]),c.multiply(ie,ie,ni),this.inverseAdjustmentMatrix=function(mi){const fi=ra(mi,!0);return rt([],[fi[0],fi[1],fi[4],fi[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=c.scale([],ie,[this.worldSize,this.worldSize,this.worldSize/z,1]),this.projMatrix=ie,this.invProjMatrix=c.invert(new Float64Array(16),this.projMatrix);const le=c.invert([],K);this.frustumCorners=c.FrustumCorners.fromInvProjectionMatrix(le,this.horizonLineFromTop(),this.height);const ve=new Float32Array(16);c.identity(ve),c.scale(ve,ve,[1,-1,1]),c.rotateX(ve,ve,this._pitch),c.rotateZ(ve,ve,this.angle);const _e=c.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Pe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;_e[8]=2*-o.x/this.width,_e[9]=2*(o.y+Pe)/this.height,this.skyboxMatrix=c.multiply(ve,_e,ve);const at=this.point,gt=at.x,mt=at.y,xt=this.width%2/2,kt=this.height%2/2,Ge=Math.cos(this.angle),ft=Math.sin(this.angle),Dt=gt-Math.round(gt)+Ge*xt+ft*kt,Bt=mt-Math.round(mt)+Ge*kt+ft*xt,Qt=new Float64Array(ie);if(c.translate(Qt,Qt,[Dt>.5?Dt-1:Dt,Bt>.5?Bt-1:Bt,0]),this.alignedProjMatrix=Qt,ie=c.create(),c.scale(ie,ie,[this.width/2,-this.height/2,1]),c.translate(ie,ie,[1,-1,0]),this.labelPlaneMatrix=ie,ie=c.create(),c.scale(ie,ie,[1,-1,1]),c.translate(ie,ie,[-1,-1,0]),c.scale(ie,ie,[2/this.width,2/this.height,1]),this.glCoordMatrix=ie,this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},ie=c.invert(new Float64Array(16),this.pixelMatrix),!ie)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=ie,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=c.calculateGlobeMatrix(this);const oi=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=c.transformMat4(oi,oi,B),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=ie;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,T=this._camera.position,z=1/this.height/this._pixelsPerMercatorPixel,B=[o,o,f];c.scale$2(B,B,z),c.scale$2(T,T,-1),c.multiply$2(T,T,B);const K=c.create();c.translate(K,K,T),c.scale(K,K,B),this.mercatorFogMatrix=K,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,f,z)}_computeCameraPosition(o){const f=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,T=this._camera.forward(),z=this.point,B=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-o/this.worldSize*this._centerAltitude;return[z.x/this.worldSize-T[0]*B,z.y/this.worldSize-T[1]*B,o/this.worldSize*this._centerAltitude-T[2]*B]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),T=this._camera.position[2],z=o[2];let B=1;this.projection.wrap&&(this.center=this.center.wrap()),z>0&&(B=Math.min((f-T)/z,1)),this._camera.position=c.scaleAndAdd([],this._camera.position,o,B),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,f=this._camera.forward(),{pitch:T,bearing:z}=this._camera.getPitchBearing(),B=c.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,K=this._mercatorZfromZoom(this._maxZoom)*Math.cos(c.degToRad(this._maxPitch)),ie=Math.max((o[2]-B)/Math.cos(T),K),le=this._zoomFromMercatorZ(ie);c.scaleAndAdd(o,o,f,ie),this._pitch=c.clamp(T,c.degToRad(this.minPitch),c.degToRad(this.maxPitch)),this.angle=c.wrap(z,-Math.PI,Math.PI),this._setZoom(c.clamp(le,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new c.MercatorCoordinate(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let f=0,T=c.GLOBE_ZOOM_THRESHOLD_MAX,z=0,B=1/0;for(;T-f>1e-6&&T>f;){const K=f+.5*(T-f),ie=this.tileSize*Math.pow(2,K),le=this.getCameraToCenterDistance(this.projection,K,ie),ve=this.scaleZoom(le/(o*this.tileSize)),_e=Math.abs(K-ve);_e<B&&(B=_e,z=K),K<ve?f=K:T=K}return z}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(c.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,f){const T=Math.min(o.x,f.x),z=Math.max(o.x,f.x),B=Math.min(o.y,f.y),K=Math.max(o.y,f.y);if(B<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const ie=[new c.Point(T,B),new c.Point(z,K),new c.Point(T,K),new c.Point(z,B)],le=this.renderWorldCopies?-3:0,ve=this.renderWorldCopies?4:1;for(const _e of ie){const Pe=this.pointRayIntersection(_e);if(Pe.t<0)return!0;const at=this.rayIntersectionCoordinate(Pe);if(at.x<le||at.y<0||at.x>ve||at.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+c.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new c.Point(0,0),new c.Point(this.width,this.height))}zoomDeltaToMovement(o,f){const T=c.length(c.sub([],this._camera.position,o)),z=this._zoomFromMercatorZ(T)+f;return T-this._mercatorZfromZoom(z)}getCameraPoint(){if("globe"===this.projection.name){const o=function([f,T,z],B){const K=[f,T,z,1];c.transformMat4$1(K,K,B);const ie=K[3]=Math.max(K[3],1e-6);return K[0]/=ie,K[1]/=ie,K[2]/=ie,K}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new c.Point(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.Point(0,o))}}getCameraToCenterDistance(o,f=this.zoom,T=this.worldSize){const z=vl(o,f,this.width,this.height,1024),B=o.pixelSpaceConversion(this.center.lat,T,z);return.5/Math.tan(.5*this._fov)*this.height*B}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&c.multiply(o,o,this.globeMatrix),o}}function nl(C,o){let f=!1,T=null;const z=()=>{T=null,f&&(C(),T=setTimeout(z,o),f=!1)};return()=>(f=!0,T||z(),T)}class Va{constructor(o){this._hashName=o&&encodeURIComponent(o),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=nl(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,c.window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),c.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const f=$a(o);if(this._hashName){const T=this._hashName;let z=!1;const B=c.window.location.hash.slice(1).split("&").map(K=>{const ie=K.split("=")[0];return ie===T?(z=!0,`${ie}=${f}`):K}).filter(K=>K);return z||B.push(`${T}=${f}`),`#${B.join("&")}`}return`#${f}`}_getCurrentHash(){const o=c.window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(T=>T.split("=")).forEach(T=>{T[0]===this._hashName&&(f=T)}),(f&&f[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(T=>isNaN(T))){const T=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(f[3]||0):o.getBearing();return o.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:T,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=c.window.location.href.replace(/(#.+)?$/,this.getHashString());c.window.history.replaceState(c.window.history.state,null,o)}}function $a(C,o){const f=C.getCenter(),T=Math.round(100*C.getZoom())/100,z=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,z),K=Math.round(f.lng*B)/B,ie=Math.round(f.lat*B)/B,le=C.getBearing(),ve=C.getPitch();let _e=o?`/${K}/${ie}/${T}`:`${T}/${ie}/${K}`;return(le||ve)&&(_e+="/"+Math.round(10*le)/10),ve&&(_e+=`/${Math.round(ve)}`),_e}const rl={linearity:.3,easing:c.bezier(0,0,.3,1)},Bs=c.extend({deceleration:2500,maxSpeed:1400},rl),cs=c.extend({deceleration:20,maxSpeed:1400},rl),Mn=c.extend({deceleration:1e3,maxSpeed:360},rl),p=c.extend({deceleration:1e3,maxSpeed:90},rl);class A{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=c.exported.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new c.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)f.zoom+=B.zoomDelta||0,f.bearing+=B.bearingDelta||0,f.pitch+=B.pitchDelta||0,B.panDelta&&f.pan._add(B.panDelta),B.around&&(f.around=B.around),B.pinchAround&&(f.pinchAround=B.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(f.pan.mag()){const B=de(f.pan.mag(),T,c.extend({},Bs,o||{}));z.offset=f.pan.mult(B.amount/f.pan.mag()),z.center=this._map.transform.center,U(z,B)}if(f.zoom){const B=de(f.zoom,T,cs);z.zoom=this._map.transform.zoom+B.amount,U(z,B)}if(f.bearing){const B=de(f.bearing,T,Mn);z.bearing=this._map.transform.bearing+c.clamp(B.amount,-179,179),U(z,B)}if(f.pitch){const B=de(f.pitch,T,p);z.pitch=this._map.transform.pitch+B.amount,U(z,B)}if(z.zoom||z.bearing){const B=void 0===f.pinchAround?f.around:f.pinchAround;z.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),z.noMoveStart=!0,z}}function U(C,o){(!C.duration||C.duration<o.duration)&&(C.duration=o.duration,C.easing=o.easing)}function de(C,o,f){const{maxSpeed:T,linearity:z,deceleration:B}=f,K=c.clamp(C*z/(o/1e3),-T,T),ie=Math.abs(K)/(B*z);return{easing:f.easing,duration:1e3*ie,amount:K*(ie/2)}}class Ie extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,T,z={}){const B=qt(f.getCanvasContainer(),T),K=f.unproject(B);super(o,c.extend({point:B,lngLat:K,originalEvent:T},z)),this._defaultPrevented=!1,this.target=f}}class lt extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,T){const z="touchend"===o?T.changedTouches:T.touches,B=Je(f.getCanvasContainer(),z),K=B.map(le=>f.unproject(le)),ie=B.reduce((le,ve,_e,Pe)=>le.add(ve.div(Pe.length)),new c.Point(0,0));super(o,{points:B,point:ie,lngLats:K,lngLat:f.unproject(ie),originalEvent:T}),this._defaultPrevented=!1}}class ri extends c.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,T){super(o,{originalEvent:T}),this._defaultPrevented=!1}}class Si{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new ri(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new Ie(o.type,this._map,o))}mouseup(o){this._map.fire(new Ie(o.type,this._map,o))}preclick(o){const f=c.extend({},o);f.type="preclick",this._map.fire(new Ie(f.type,this._map,f))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Ie(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Ie(o.type,this._map,o))}mouseover(o){this._map.fire(new Ie(o.type,this._map,o))}mouseout(o){this._map.fire(new Ie(o.type,this._map,o))}touchstart(o){return this._firePreventable(new lt(o.type,this._map,o))}touchmove(o){this._map.fire(new lt(o.type,this._map,o))}touchend(o){this._map.fire(new lt(o.type,this._map,o))}touchcancel(o){this._map.fire(new lt(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vi{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Ie(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ie("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Ie(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xn{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&0===o.button&&(vt(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const T=f,z=this._startPos,B=this._lastPos;if(!z||!B||B.equals(T)||!this._box&&T.dist(z)<this._clickTolerance)return;this._lastPos=T,this._box||(this._box=Le("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const K=Math.min(z.x,T.x),ie=Math.max(z.x,T.x),le=Math.min(z.y,T.y),ve=Math.max(z.y,T.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${K}px,${le}px)`,this._box.style.width=ie-K+"px",this._box.style.height=ve-le+"px")})}mouseupWindow(o,f){if(!this._active)return;const T=this._startPos,z=f;if(T&&0===o.button){if(this.reset(),ct(),T.x!==z.x||T.y!==z.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:B=>B.fitScreenCoordinates(T,z,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&27===o.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),tt(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new c.Event(o,{originalEvent:f}))}}function $n(C,o){const f={};for(let T=0;T<C.length;T++)f[C[T].identifier]=o[T];return f}class Un{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,f,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=o.timeStamp),T.length===this.numTouches&&(this.centroid=function(z){const B=new c.Point(0,0);for(const K of z)B._add(K);return B.div(z.length)}(f),this.touches=$n(T,f)))}touchmove(o,f,T){if(this.aborted||!this.centroid)return;const z=$n(T,f);for(const B in this.touches){const K=z[B];(!K||K.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(o,f,T){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),0===T.length){const z=!this.aborted&&this.centroid;if(this.reset(),z)return z}}}class Ir{constructor(o){this.singleTap=new Un(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,f,T){this.singleTap.touchstart(o,f,T)}touchmove(o,f,T){this.singleTap.touchmove(o,f,T)}touchend(o,f,T){const z=this.singleTap.touchend(o,f,T);if(z){const B=o.timeStamp-this.lastTime<500,K=!this.lastTap||this.lastTap.dist(z)<30;if(B&&K||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=z,this.count===this.numTaps)return this.reset(),z}}}class Lr{constructor(){this._zoomIn=new Ir({numTouches:1,numTaps:2}),this._zoomOut=new Ir({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,T){this._zoomIn.touchstart(o,f,T),this._zoomOut.touchstart(o,f,T)}touchmove(o,f,T){this._zoomIn.touchmove(o,f,T),this._zoomOut.touchmove(o,f,T)}touchend(o,f,T){const z=this._zoomIn.touchend(o,f,T),B=this._zoomOut.touchend(o,f,T);return z?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:K=>K.easeTo({duration:300,zoom:K.getZoom()+1,around:K.unproject(z)},{originalEvent:o})}):B?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:K=>K.easeTo({duration:300,zoom:K.getZoom()-1,around:K.unproject(B)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _s={0:1,2:2};class Os{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,f){return!1}_move(o,f){return{}}mousedown(o,f){if(this._lastPoint)return;const T=Jt(o);this._correctButton(o,T)&&(this._lastPoint=f,this._eventButton=T)}mousemoveWindow(o,f){const T=this._lastPoint;if(T)if(o.preventDefault(),null!=this._eventButton&&function(z,B){const K=_s[B];return void 0===z.buttons||(z.buttons&K)!==K}(o,this._eventButton))this.reset();else if(this._moved||!(f.dist(T)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(T,f)}mouseupWindow(o){this._lastPoint&&Jt(o)===this._eventButton&&(this._moved&&ct(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gs extends Os{mousedown(o,f){super.mousedown(o,f),this._lastPoint&&(this._active=!0)}_correctButton(o,f){return 0===f&&!o.ctrlKey}_move(o,f){return{around:f,panDelta:f.sub(o)}}}class To extends Os{_correctButton(o,f){return 0===f&&o.ctrlKey||2===f}_move(o,f){const T=.8*(f.x-o.x);if(T)return this._active=!0,{bearingDelta:T}}contextmenu(o){o.preventDefault()}}class va extends Os{_correctButton(o,f){return 0===f&&o.ctrlKey||2===f}_move(o,f){const T=-.5*(f.y-o.y);if(T)return this._active=!0,{pitchDelta:T}}contextmenu(o){o.preventDefault()}}class po{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),c.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new c.Point(0,0)}touchstart(o,f,T){return this._calculateTransform(o,f,T)}touchmove(o,f,T){if(this._active&&!(T.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===T.length&&!c.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,f,T)}}touchend(o,f,T){this._calculateTransform(o,f,T),this._active&&T.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,T){T.length>0&&(this._active=!0);const z=$n(T,f),B=new c.Point(0,0),K=new c.Point(0,0);let ie=0;for(const ve in z){const _e=z[ve],Pe=this._touches[ve];Pe&&(B._add(_e),K._add(_e.sub(Pe)),ie++,z[ve]=_e)}if(this._touches=z,ie<this._minTouches||!K.mag())return;const le=K.div(ie);return this._sum._add(le),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(ie),panDelta:le}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Le("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Fl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,f,T){return{}}touchstart(o,f,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,T){const z=this._firstTwoTouches;if(!z)return;o.preventDefault();const[B,K]=z,ie=Ha(T,f,B),le=Ha(T,f,K);if(!ie||!le)return;const ve=this._aroundCenter?null:ie.add(le).div(2);return this._move([ie,le],ve,o)}touchend(o,f,T){if(!this._firstTwoTouches)return;const[z,B]=this._firstTwoTouches,K=Ha(T,f,z),ie=Ha(T,f,B);K&&ie||(this._active&&ct(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ha(C,o,f){for(let T=0;T<C.length;T++)if(C[T].identifier===f)return o[T]}function Fo(C,o){return Math.log(C/o)/Math.LN2}class sl extends Fl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const T=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(Fo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fo(this._distance,T),pinchAround:f}}}function Ye(C,o){return 180*C.angleWith(o)/Math.PI}class ne extends Fl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f){const T=this._vector;if(this._vector=o[0].sub(o[1]),T&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ye(this._vector,T),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,T=this._startVector;if(!T)return!1;const z=Ye(o,T);return Math.abs(z)<f}}function fe(C){return Math.abs(C.y)>Math.abs(C.x)}class $e extends Fl{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,fe(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,T){const z=this._lastPoints;if(!z)return;const B=o[0].sub(z[0]),K=o[1].sub(z[1]);return this._map._cooperativeGestures&&!c.isFullscreen()&&T.touches.length<3||(this._valid=this.gestureBeginsVertically(B,K,T.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(B.y+K.y)/2*-.5})}gestureBeginsVertically(o,f,T){if(void 0!==this._valid)return this._valid;const z=o.mag()>=2,B=f.mag()>=2;if(!z&&!B)return;if(!z||!B)return null==this._firstMove&&(this._firstMove=T),T-this._firstMove<100&&void 0;const K=o.y>0==f.y>0;return fe(o)&&fe(f)&&K}}const Kt={panStep:100,bearingStep:15,pitchStep:10};class an{constructor(){const o=Kt;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,T=0,z=0,B=0,K=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?T=-1:(o.preventDefault(),B=-1);break;case 39:o.shiftKey?T=1:(o.preventDefault(),B=1);break;case 38:o.shiftKey?z=1:(o.preventDefault(),K=-1);break;case 40:o.shiftKey?z=-1:(o.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(T=0,z=0),{cameraAnimation:ie=>{const le=ie.getZoom();ie.easeTo({duration:300,easeId:"keyboardHandler",easing:Hn,zoom:f?Math.round(le)+f*(o.shiftKey?2:1):le,bearing:ie.getBearing()+T*this._bearingStep,pitch:ie.getPitch()+z*this._pitchStep,offset:[-B*this._panStep,-K*this._panStep],center:ie.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hn(C){return C*(2-C)}const Pr=4.000244140625;class Fr{constructor(o,f){this._map=o,this._el=o.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||c.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=o.deltaMode===c.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const T=c.exported.now(),z=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,0!==f&&f%Pr==0?this._type="wheel":0!==f&&Math.abs(f)<4?this._type="trackpad":z>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(z*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=qt(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;"wheel"===this._type&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(0!==this._delta){const le="wheel"===this._type&&Math.abs(this._delta)>Pr?this._wheelZoomRate:this._defaultZoomRate;let ve=2/(1+Math.exp(-Math.abs(this._delta*le)));this._delta<0&&0!==ve&&(ve=1/ve);const _e=f(),Pe=Math.pow(2,_e),at="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):Pe;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(at*ve))),"wheel"===this._type&&(this._startZoom=_e,this._easing=this._smoothOutEasing(200)),this._delta=0}const T="number"==typeof this._targetZoom?this._targetZoom:f(),z=this._startZoom,B=this._easing;let K,ie=!1;if("wheel"===this._type&&z&&B){const le=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),ve=B(le);K=c.number(z,T,ve),le<1?this._frameId||(this._frameId=!0):ie=!0}else K=T,ie=!0;return this._active=!0,ie&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ie,zoomDelta:K-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=c.ease;if(this._prevEase){const T=this._prevEase,z=(c.exported.now()-T.start)/T.duration,B=T.easing(z+.01)-T.easing(z),K=.27/Math.sqrt(B*B+1e-4)*.01,ie=Math.sqrt(.0729-K*K);f=c.bezier(K,ie,.25,1)}return this._prevEase={start:c.exported.now(),duration:o,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Le("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(c.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class xs{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ns{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,f){return o.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:T.getZoom()+(o.shiftKey?-1:1),around:T.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qc{constructor(){this._tap=new Ir({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,f,T){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?T.length>0&&(this._swipePoint=f[0],this._swipeTouch=T[0].identifier):this._tap.touchstart(o,f,T))}touchmove(o,f,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const z=f[0],B=z.y-this._swipePoint.y;return this._swipePoint=z,o.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(o,f,T)}touchend(o,f,T){this._tapTime?this._swipePoint&&0===T.length&&this.reset():this._tap.touchend(o,f,T)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lc{constructor(o,f,T){this._el=o,this._mousePan=f,this._touchPan=T}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zd{constructor(o,f,T){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=f,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ed{constructor(o,f,T,z){this._el=o,this._touchZoom=f,this._touchRotate=T,this._tapDragZoom=z,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ya=C=>C.zoom||C.drag||C.pitch||C.rotate;class ud extends c.Event{}class ol{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,f){const T=c.sub([],f,o);this.radius=c.length(T[2]<0?c.div([],T,this.constants):[T[0],T[1],0])}projectRay(o){c.div(o,o,this.constants),c.normalize(o,o),c.mul$1(o,o,this.constants);const f=c.scale$2([],o,this.radius);if(f[2]>0){const T=c.scale$2([],[0,0,1],c.dot(f,[0,0,1])),z=c.scale$2([],c.normalize([],[f[0],f[1],0]),this.radius),B=c.add([],f,c.scale$2([],c.sub([],c.add([],z,T),f),2));f[0]=B[0],f[1]=B[1]}return f}}function yl(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}class ba{constructor(o,f){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new A(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ol,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),c.bindAll(["handleEvent","handleWindowEvent"],this);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[c.window.document,"mousemove",{capture:!0}],[c.window.document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[c.window,"blur",void 0]];for(const[z,B,K]of this._listeners)z.addEventListener(B,z===c.window.document?this.handleWindowEvent:this.handleEvent,K)}destroy(){for(const[o,f,T]of this._listeners)o.removeEventListener(f,o===c.window.document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(o){const f=this._map,T=f.getCanvasContainer();this._add("mapEvent",new Si(f,o));const z=f.boxZoom=new xn(f,o);this._add("boxZoom",z);const B=new Lr,K=new Ns;f.doubleClickZoom=new xs(K,B),this._add("tapZoom",B),this._add("clickZoom",K);const ie=new Qc;this._add("tapDragZoom",ie);const le=f.touchPitch=new $e(f);this._add("touchPitch",le);const ve=new To(o),_e=new va(o);f.dragRotate=new zd(o,ve,_e),this._add("mouseRotate",ve,["mousePitch"]),this._add("mousePitch",_e,["mouseRotate"]);const Pe=new Gs(o),at=new po(f,o);f.dragPan=new Lc(T,Pe,at),this._add("mousePan",Pe),this._add("touchPan",at,["touchZoom","touchRotate"]);const gt=new ne,mt=new sl;f.touchZoomRotate=new ed(T,mt,gt,ie),this._add("touchRotate",gt,["touchPan","touchZoom"]),this._add("touchZoom",mt,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Vi(f));const xt=f.scrollZoom=new Fr(f,this);this._add("scrollZoom",xt,["mousePan"]);const kt=f.keyboard=new an;this._add("keyboard",kt);for(const Ge of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ge]&&f[Ge].enable(o[Ge])}_add(o,f,T){this._handlers.push({handlerName:o,handler:f,allowed:T}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ya(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,f,T){for(const z in o)if(z!==T&&(!f||f.indexOf(z)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const f=[];for(const T of o)this._el.contains(T.target)&&f.push(T);return f}handleEvent(o,f){this._updatingCamera=!0;const T="renderFrame"===o.type,z=T?void 0:o,B={needsRenderFrame:!1},K={},ie={},le=o.touches?this._getMapTouches(o.touches):void 0,ve=le?Je(this._el,le):T?void 0:qt(this._el,o);for(const{handlerName:at,handler:gt,allowed:mt}of this._handlers){if(!gt.isEnabled())continue;let xt;this._blockedByActive(ie,mt,at)?gt.reset():gt[f||o.type]&&(xt=gt[f||o.type](o,ve,le),this.mergeHandlerResult(B,K,xt,at,z),xt&&xt.needsRenderFrame&&this._triggerRenderFrame()),(xt||gt.isActive())&&(ie[at]=gt)}const _e={};for(const at in this._previousActiveHandlers)ie[at]||(_e[at]=z);this._previousActiveHandlers=ie,(Object.keys(_e).length||yl(B))&&(this._changes.push([B,K,_e]),this._triggerRenderFrame()),(Object.keys(ie).length||yl(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=B;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))}mergeHandlerResult(o,f,T,z,B){if(!T)return;c.extend(o,T);const K={handlerName:z,originalEvent:T.originalEvent||B};void 0!==T.zoomDelta&&(f.zoom=K),void 0!==T.panDelta&&(f.drag=K),void 0!==T.pitchDelta&&(f.pitch=K),void 0!==T.bearingDelta&&(f.rotate=K)}_applyChanges(){const o={},f={},T={};for(const[z,B,K]of this._changes)z.panDelta&&(o.panDelta=(o.panDelta||new c.Point(0,0))._add(z.panDelta)),z.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+z.pitchDelta),void 0!==z.around&&(o.around=z.around),void 0!==z.aroundCoord&&(o.aroundCoord=z.aroundCoord),void 0!==z.pinchAround&&(o.pinchAround=z.pinchAround),z.noInertia&&(o.noInertia=z.noInertia),c.extend(f,B),c.extend(T,K);this._updateMapTransform(o,f,T),this._changes=[]}_updateMapTransform(o,f,T){const z=this._map,B=z.transform,K=ft=>[ft.x,ft.y,ft.z];if((ft=>{const Dt=this._eventsInProgress.drag;return Dt&&!this._handlersById[Dt.handlerName].isActive()})()&&!yl(o)){const ft=B.zoom;B.cameraElevationReference="sea",B.recenterOnTerrain(),B.cameraElevationReference="ground",ft!==B.zoom&&this._map._update(!0)}if(B._isCameraConstrained&&z._stop(!0),!yl(o))return void this._fireEvents(f,T,!0);let{panDelta:ie,zoomDelta:le,bearingDelta:ve,pitchDelta:_e,around:Pe,aroundCoord:at,pinchAround:gt}=o;B._isCameraConstrained&&(le>0&&(le=0),B._isCameraConstrained=!1),void 0!==gt&&(Pe=gt),(le||(ft=>f.drag&&!this._eventsInProgress.drag)())&&Pe&&(this._dragOrigin=K(B.pointCoordinate3D(Pe)),this._trackingEllipsoid.setup(B._camera.position,this._dragOrigin)),B.cameraElevationReference="sea",z._stop(!0),Pe=Pe||z.transform.centerPoint,ve&&(B.bearing+=ve),_e&&(B.pitch+=_e),B._updateCameraState();const mt=[0,0,0];if(ie)if("mercator"===B.projection.name){const ft=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Pe).dir),Dt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(Pe.sub(ie)).dir);mt[0]=Dt[0]-ft[0],mt[1]=Dt[1]-ft[1]}else{const ft=B.pointCoordinate(Pe);if("globe"===B.projection.name){ie=ie.rotate(-B.angle);const Dt=B._pixelsPerMercatorPixel/B.worldSize;mt[0]=-ie.x*c.mercatorScale(c.latFromMercatorY(ft.y))*Dt,mt[1]=-ie.y*c.mercatorScale(B.center.lat)*Dt}else{const Dt=B.pointCoordinate(Pe.sub(ie));ft&&Dt&&(mt[0]=Dt.x-ft.x,mt[1]=Dt.y-ft.y)}}const xt=B.zoom,kt=[0,0,0];if(le){const ft=K(at||B.pointCoordinate3D(Pe)),Dt={dir:c.normalize([],c.sub([],ft,B._camera.position))};if(Dt.dir[2]<0){const Bt=B.zoomDeltaToMovement(ft,le);c.scale$2(kt,Dt.dir,Bt)}}const Ge=c.add(mt,mt,kt);B._translateCameraConstrained(Ge),le&&Math.abs(B.zoom-xt)>1e-4&&B.recenterOnTerrain(),B.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,T,!0)}_fireEvents(o,f,T){const z=ya(this._eventsInProgress),B=ya(o),K={};for(const _e in o){const{originalEvent:Pe}=o[_e];this._eventsInProgress[_e]||(K[`${_e}start`]=Pe),this._eventsInProgress[_e]=o[_e]}!z&&B&&this._fireEvent("movestart",B.originalEvent);for(const _e in K)this._fireEvent(_e,K[_e]);B&&this._fireEvent("move",B.originalEvent);for(const _e in o){const{originalEvent:Pe}=o[_e];this._fireEvent(_e,Pe)}const ie={};let le;for(const _e in this._eventsInProgress){const{handlerName:Pe,originalEvent:at}=this._eventsInProgress[_e];this._handlersById[Pe].isActive()||(delete this._eventsInProgress[_e],le=f[Pe]||at,ie[`${_e}end`]=le)}for(const _e in ie)this._fireEvent(_e,ie[_e]);const ve=ya(this._eventsInProgress);if(T&&(z||B)&&!ve){this._updatingCamera=!0;const _e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Pe=at=>0!==at&&-this._bearingSnap<at&&at<this._bearingSnap;_e?(Pe(_e.bearing||this._map.getBearing())&&(_e.bearing=0),this._map.easeTo(_e,{originalEvent:le})):(this._map.fire(new c.Event("moveend",{originalEvent:le})),Pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new c.Event(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new ud("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Xs="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ds extends c.Evented{constructor(o,f){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=f.bearingSnap,this._respectPrefersReducedMotion=!1!==f.respectPrefersReducedMotion,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}panBy(o,f,T){return o=c.Point.convert(o).mult(-1),this.panTo(this.transform.center,c.extend({offset:o},f),T)}panTo(o,f,T){return this.easeTo(c.extend({center:o},f),T)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,T){return this.easeTo(c.extend({zoom:o},f),T)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,T){return this.easeTo(c.extend({bearing:o},f),T)}resetNorth(o,f){return this.rotateTo(0,c.extend({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}cameraForBounds(o,f){o=c.LngLatBounds.convert(o);const T=f&&f.bearing||0,z=f&&f.pitch||0,B=o.getNorthWest(),K=o.getSouthEast();return this._cameraForBounds(this.transform,B,K,T,z,f)}_extendCameraOptions(o){const f={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=c.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){const T=o.padding;o.padding={top:T,bottom:T,right:T,left:T}}return o.padding=c.extend(f,o.padding),o}_minimumAABBFrustumDistance(o,f){const T=f.max[0]-f.min[0],z=f.max[1]-f.min[1];return T/z>o.aspect?T/(2*Math.tan(.5*o.fovX)*o.aspect):z/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,f,T,z,B,K){const ie=o.clone(),le=this._extendCameraOptions(K);ie.bearing=z,ie.pitch=B;const ve=c.LngLat.convert(f),_e=c.LngLat.convert(T),Pe=.5*(ve.lat+_e.lat),at=.5*(ve.lng+_e.lng),gt=c.latLngToECEF(Pe,at),mt=c.normalize([],gt),xt=c.normalize([],c.cross([],mt,[0,1,0])),kt=c.cross([],xt,mt),Ge=[xt[0],xt[1],xt[2],0,kt[0],kt[1],kt[2],0,mt[0],mt[1],mt[2],0,0,0,0,1],ft=[gt,c.latLngToECEF(ve.lat,ve.lng),c.latLngToECEF(_e.lat,ve.lng),c.latLngToECEF(_e.lat,_e.lng),c.latLngToECEF(ve.lat,_e.lng),c.latLngToECEF(Pe,ve.lng),c.latLngToECEF(Pe,_e.lng),c.latLngToECEF(ve.lat,at),c.latLngToECEF(_e.lat,at)];let Dt=c.Aabb.fromPoints(ft.map(dn=>[c.dot(xt,dn),c.dot(kt,dn),c.dot(mt,dn)]));const Bt=c.transformMat4([],Dt.center,Ge);0===c.squaredLength(Bt)&&c.set(Bt,0,0,1),c.normalize(Bt,Bt),c.scale$2(Bt,Bt,c.GLOBE_RADIUS),ie.center=c.ecefToLatLng(Bt);const Qt=ie.getWorldToCameraMatrix(),oi=c.invert(new Float64Array(16),Qt);Dt=c.Aabb.applyTransform(Dt,c.multiply([],Qt,Ge)),c.transformMat4(Bt,Bt,Qt);const ni=.5*(Dt.max[2]-Dt.min[2]),mi=this._minimumAABBFrustumDistance(ie,Dt),fi=c.scale$2([],[0,0,1],ni),Ai=c.add(fi,Bt,fi),yn=mi+(0===ie.pitch?0:c.distance(Bt,Ai)),Oi=ie.globeCenterInViewSpace,rn=c.sub([],Bt,[Oi[0],Oi[1],Oi[2]]);c.normalize(rn,rn),c.scale$2(rn,rn,yn);const zi=c.add([],Bt,rn);c.transformMat4(zi,zi,oi);const bn=c.earthRadius/c.GLOBE_RADIUS,Ri=c.length(zi),Li=c.mercatorZfromAltitude(Math.max(Ri*bn-c.earthRadius,Number.EPSILON),0),vn=Math.min(ie.zoomFromMercatorZAdjusted(Li),le.maxZoom);return vn>.5*(c.GLOBE_ZOOM_THRESHOLD_MIN+c.GLOBE_ZOOM_THRESHOLD_MAX)?(ie.setProjection({name:"mercator"}),ie.zoom=vn,this._cameraForBounds(ie,f,T,z,B,K)):{center:ie.center,zoom:vn,bearing:z,pitch:B}}queryTerrainElevation(o,f){const T=this.transform.elevation;return T?(f=c.extend({},{exaggerated:!0},f),T.getAtPoint(c.MercatorCoordinate.fromLngLat(o),null,f.exaggerated)):null}_cameraForBounds(o,f,T,z,B,K){if("globe"===o.projection.name)return this._cameraForBoundsOnGlobe(o,f,T,z,B,K);const ie=o.clone(),le=this._extendCameraOptions(K),ve=ie.padding;ie.bearing=z,ie.pitch=B;const _e=c.LngLat.convert(f),Pe=c.LngLat.convert(T),at=new c.LngLat(_e.lng,Pe.lat),gt=new c.LngLat(Pe.lng,_e.lat),mt=ie.project(_e),xt=ie.project(Pe),kt=this.queryTerrainElevation(_e),Ge=this.queryTerrainElevation(Pe),ft=this.queryTerrainElevation(at),Dt=this.queryTerrainElevation(gt),Bt=[[mt.x,mt.y,Math.min(kt||0,Ge||0,ft||0,Dt||0)],[xt.x,xt.y,Math.max(kt||0,Ge||0,ft||0,Dt||0)]];let Qt=c.Aabb.fromPoints(Bt);const oi=ie.getWorldToCameraMatrix(),ni=c.invert(new Float64Array(16),oi);Qt=c.Aabb.applyTransform(Qt,oi);const mi=c.sub([],Qt.max,Qt.min),fi=ve.left||0,Ai=ve.right||0,yn=ve.bottom||0,Oi=ve.top||0,{left:rn,right:zi,top:bn,bottom:Ri}=le.padding,Li=.5*(fi+Ai),vn=.5*(Oi+yn),dn=Math.min(ie.scaleZoom(ie.scale*Math.min((ie.width-(fi+Ai+rn+zi))/mi[0],(ie.height-(yn+Oi+Ri+bn))/mi[1])),le.maxZoom),mn=ie.scale/ie.zoomScale(dn);Qt=new c.Aabb([Qt.min[0]-(rn+Li)*mn,Qt.min[1]-(Ri+vn)*mn,Qt.min[2]],[Qt.max[0]+(zi+Li)*mn,Qt.max[1]+(bn+vn)*mn,Qt.max[2]]);const er=.5*mi[2],Er=this._minimumAABBFrustumDistance(ie,Qt),jn=[0,0,1,0];c.transformMat4$1(jn,jn,oi),c.normalize$2(jn,jn);const dr=c.scale$2([],jn,Er+er),Tr=c.add([],Qt.center,dr),pr=("number"==typeof le.offset.x&&"number"==typeof le.offset.y?new c.Point(le.offset.x,le.offset.y):c.Point.convert(le.offset)).rotate(-c.degToRad(z));Qt.center[0]-=pr.x*mn,Qt.center[1]+=pr.y*mn,c.transformMat4(Qt.center,Qt.center,ni),c.transformMat4(Tr,Tr,ni);const tr=[Qt.center[0],Qt.center[1],Tr[2]*ie.pixelsPerMeter];c.scale$2(tr,tr,1/ie.worldSize);const zr=c.lngFromMercatorX(tr[0]),ls=c.latFromMercatorY(tr[1]),us=Math.min(ie._zoomFromMercatorZ(tr[2]),le.maxZoom),hs=new c.LngLat(zr,ls);return ie.mercatorFromTransition&&us<.5*(c.GLOBE_ZOOM_THRESHOLD_MIN+c.GLOBE_ZOOM_THRESHOLD_MAX)?(ie.setProjection({name:"globe"}),ie.zoom=us,this._cameraForBounds(ie,f,T,z,B,K)):{center:hs,zoom:us,bearing:z,pitch:B}}fitBounds(o,f,T){const z=this.cameraForBounds(o,f);return this._fitInternal(z,f,T)}fitScreenCoordinates(o,f,T,z,B){const K=c.Point.convert(o),ie=c.Point.convert(f),le=new c.Point(Math.min(K.x,ie.x),Math.min(K.y,ie.y)),ve=new c.Point(Math.max(K.x,ie.x),Math.max(K.y,ie.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(K,ie))return this;const _e=this.transform.pointLocation3D(le),Pe=this.transform.pointLocation3D(ve),at=this.transform.pointLocation3D(new c.Point(le.x,ve.y)),gt=this.transform.pointLocation3D(new c.Point(ve.x,le.y)),mt=[Math.min(_e.lng,Pe.lng,at.lng,gt.lng),Math.min(_e.lat,Pe.lat,at.lat,gt.lat)],xt=[Math.max(_e.lng,Pe.lng,at.lng,gt.lng),Math.max(_e.lat,Pe.lat,at.lat,gt.lat)],kt=z&&z.pitch?z.pitch:this.getPitch(),Ge=this._cameraForBounds(this.transform,mt,xt,T,kt,z);return this._fitInternal(Ge,z,B)}_fitInternal(o,f,T){return o?(delete(f=c.extend(o,f)).padding,f.linear?this.easeTo(f,T):this.flyTo(f,T)):this}jumpTo(o,f){this.stop();const T=o.preloadOnly?this.transform.clone():this.transform;let z=!1,B=!1,K=!1;return"zoom"in o&&T.zoom!==+o.zoom&&(z=!0,T.zoom=+o.zoom),void 0!==o.center&&(T.center=c.LngLat.convert(o.center)),"bearing"in o&&T.bearing!==+o.bearing&&(B=!0,T.bearing=+o.bearing),"pitch"in o&&T.pitch!==+o.pitch&&(K=!0,T.pitch=+o.pitch),null==o.padding||T.isPaddingEqual(o.padding)||(T.padding=o.padding),o.preloadOnly?(this._preloadTiles(T),this):(this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f)),z&&this.fire(new c.Event("zoomstart",f)).fire(new c.Event("zoom",f)).fire(new c.Event("zoomend",f)),B&&this.fire(new c.Event("rotatestart",f)).fire(new c.Event("rotate",f)).fire(new c.Event("rotateend",f)),K&&this.fire(new c.Event("pitchstart",f)).fire(new c.Event("pitch",f)).fire(new c.Event("pitchend",f)),this.fire(new c.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||c.warnOnce(Xs),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,f){const T=this.transform;if(!T.projection.supportsFreeCamera)return c.warnOnce(Xs),this;this.stop();const z=T.zoom,B=T.pitch,K=T.bearing;T.setFreeCameraOptions(o);const ie=z!==T.zoom,le=B!==T.pitch,ve=K!==T.bearing;return this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f)),ie&&this.fire(new c.Event("zoomstart",f)).fire(new c.Event("zoom",f)).fire(new c.Event("zoomend",f)),ve&&this.fire(new c.Event("rotatestart",f)).fire(new c.Event("rotate",f)).fire(new c.Event("rotateend",f)),le&&this.fire(new c.Event("pitchstart",f)).fire(new c.Event("pitch",f)).fire(new c.Event("pitchend",f)),this.fire(new c.Event("moveend",f)),this}easeTo(o,f){this._stop(!1,o.easeId),(!1===(o=c.extend({offset:[0,0],duration:500,easing:c.ease},o)).animate||this._prefersReducedMotion(o))&&(o.duration=0);const T=this.transform,z=this.getZoom(),B=this.getBearing(),K=this.getPitch(),ie=this.getPadding(),le="zoom"in o?+o.zoom:z,ve="bearing"in o?this._normalizeBearing(o.bearing,B):B,_e="pitch"in o?+o.pitch:K,Pe="padding"in o?o.padding:T.padding,at=c.Point.convert(o.offset);let gt,mt,xt;if("globe"===T.projection.name){const fi=c.MercatorCoordinate.fromLngLat(T.center),Ai=at.rotate(-T.angle);fi.x+=Ai.x/T.worldSize,fi.y+=Ai.y/T.worldSize;const yn=fi.toLngLat(),Oi=c.LngLat.convert(o.center||yn);this._normalizeCenter(Oi),gt=T.centerPoint.add(Ai),mt=new c.Point(fi.x,fi.y).mult(T.worldSize),xt=new c.Point(c.mercatorXfromLng(Oi.lng),c.mercatorYfromLat(Oi.lat)).mult(T.worldSize).sub(mt)}else{gt=T.centerPoint.add(at);const fi=T.pointLocation(gt),Ai=c.LngLat.convert(o.center||fi);this._normalizeCenter(Ai),mt=T.project(fi),xt=T.project(Ai).sub(mt)}const kt=T.zoomScale(le-z);let Ge,ft;o.around&&(Ge=c.LngLat.convert(o.around),ft=T.locationPoint(Ge));const Dt=this._zooming||le!==z,Bt=this._rotating||B!==ve,Qt=this._pitching||_e!==K,oi=!T.isPaddingEqual(Pe),ni=fi=>Ai=>{if(Dt&&(fi.zoom=c.number(z,le,Ai)),Bt&&(fi.bearing=c.number(B,ve,Ai)),Qt&&(fi.pitch=c.number(K,_e,Ai)),oi&&(fi.interpolatePadding(ie,Pe,Ai),gt=fi.centerPoint.add(at)),Ge)fi.setLocationAtPoint(Ge,ft);else{const yn=fi.zoomScale(fi.zoom-z),Oi=le>z?Math.min(2,kt):Math.max(.5,kt),rn=Math.pow(Oi,1-Ai),zi=fi.unproject(mt.add(xt.mult(Ai*rn)).mult(yn));fi.setLocationAtPoint(fi.renderWorldCopies?zi.wrap():zi,gt)}return o.preloadOnly||this._fireMoveEvents(f),fi};if(o.preloadOnly){const fi=this._emulate(ni,o.duration,T);return this._preloadTiles(fi),this}const mi={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Dt,this._rotating=Bt,this._pitching=Qt,this._padding=oi,this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,mi),this._ease(ni(T),fi=>{T.recenterOnTerrain(),this._afterEase(f,fi)},o),this}_prepareEase(o,f,T={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||T.moving||this.fire(new c.Event("movestart",o)),this._zooming&&!T.zooming&&this.fire(new c.Event("zoomstart",o)),this._rotating&&!T.rotating&&this.fire(new c.Event("rotatestart",o)),this._pitching&&!T.pitching&&this.fire(new c.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new c.Event("move",o)),this._zooming&&this.fire(new c.Event("zoom",o)),this._rotating&&this.fire(new c.Event("rotate",o)),this._pitching&&this.fire(new c.Event("pitch",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const T=this._zooming,z=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new c.Event("zoomend",o)),z&&this.fire(new c.Event("rotateend",o)),B&&this.fire(new c.Event("pitchend",o)),this.fire(new c.Event("moveend",o))}flyTo(o,f){if(this._prefersReducedMotion(o)){const dn=c.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(dn,f)}this.stop(),o=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},o);const T=this.transform,z=this.getZoom(),B=this.getBearing(),K=this.getPitch(),ie=this.getPadding(),le="zoom"in o?c.clamp(+o.zoom,T.minZoom,T.maxZoom):z,ve="bearing"in o?this._normalizeBearing(o.bearing,B):B,_e="pitch"in o?+o.pitch:K,Pe="padding"in o?o.padding:T.padding,at=T.zoomScale(le-z),gt=c.Point.convert(o.offset);let mt=T.centerPoint.add(gt);const xt=T.pointLocation(mt),kt=c.LngLat.convert(o.center||xt);this._normalizeCenter(kt);const Ge=T.project(xt),ft=T.project(kt).sub(Ge);let Dt=o.curve;const Bt=Math.max(T.width,T.height),Qt=Bt/at,oi=ft.mag();if("minZoom"in o){const dn=c.clamp(Math.min(o.minZoom,z,le),T.minZoom,T.maxZoom),mn=Bt/T.zoomScale(dn-z);Dt=Math.sqrt(mn/oi*2)}const ni=Dt*Dt;function mi(dn){const mn=(Qt*Qt-Bt*Bt+(dn?-1:1)*ni*ni*oi*oi)/(2*(dn?Qt:Bt)*ni*oi);return Math.log(Math.sqrt(mn*mn+1)-mn)}function fi(dn){return(Math.exp(dn)-Math.exp(-dn))/2}function Ai(dn){return(Math.exp(dn)+Math.exp(-dn))/2}const yn=mi(0);let Oi=function(dn){return Ai(yn)/Ai(yn+Dt*dn)},rn=function(dn){return Bt*((Ai(yn)*(fi(mn=yn+Dt*dn)/Ai(mn))-fi(yn))/ni)/oi;var mn},zi=(mi(1)-yn)/Dt;if(Math.abs(oi)<1e-6||!isFinite(zi)){if(Math.abs(Bt-Qt)<1e-6)return this.easeTo(o,f);const dn=Qt<Bt?-1:1;zi=Math.abs(Math.log(Qt/Bt))/Dt,rn=function(){return 0},Oi=function(mn){return Math.exp(dn*Dt*mn)}}o.duration="duration"in o?+o.duration:1e3*zi/("screenSpeed"in o?+o.screenSpeed/Dt:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const bn=B!==ve,Ri=_e!==K,Li=!T.isPaddingEqual(Pe),vn=dn=>mn=>{const er=mn*zi,Er=1/Oi(er);dn.zoom=1===mn?le:z+dn.scaleZoom(Er),bn&&(dn.bearing=c.number(B,ve,mn)),Ri&&(dn.pitch=c.number(K,_e,mn)),Li&&(dn.interpolatePadding(ie,Pe,mn),mt=dn.centerPoint.add(gt));const jn=1===mn?kt:dn.unproject(Ge.add(ft.mult(rn(er))).mult(Er));return dn.setLocationAtPoint(dn.renderWorldCopies?jn.wrap():jn,mt),dn._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(f),dn};if(o.preloadOnly){const dn=this._emulate(vn,o.duration,T);return this._preloadTiles(dn),this}return this._zooming=!0,this._rotating=bn,this._pitching=Ri,this._padding=Li,this._prepareEase(f,!1),this._ease(vn(T),()=>this._afterEase(f),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const T=this._onEaseEnd;this._onEaseEnd=void 0,T.call(this,f)}if(!o){const T=this.handlers;T&&T.stop(!1)}return this}_ease(o,f,T){!1===T.animate||0===T.duration?(o(1),f()):(this._easeStart=c.exported.now(),this._easeOptions=T,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,f){o=c.wrap(o,-180,180);const T=Math.abs(o-f);return Math.abs(o-360-f)<T&&(o-=360),Math.abs(o+360-f)<T&&(o+=360),o}_normalizeCenter(o){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const T=o.lng-f.center.lng;o.lng+=T>180?-360:T<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&c.exported.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,f,T){const z=Math.ceil(15*f/1e3),B=[],K=o(T.clone());for(let ie=0;ie<=z;ie++){const le=K(ie/z);B.push(le.clone())}return B}}class Vn{constructor(o={}){this.options=o,c.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const f=this.options&&this.options.compact;return this._map=o,this._container=Le("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Le("button","mapboxgl-ctrl-attrib-button",this._container),Le("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Le("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===f&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const T=this._map._getUIString(`AttributionControl.${f}`);o.setAttribute("aria-label",T),o.removeAttribute("title"),o.firstElementChild&&o.firstElementChild.setAttribute("title",T)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||c.config.ACCESS_TOKEN}];if(o){const T=f.reduce((z,B,K)=>(B.value&&(z+=`${B.key}=${B.value}${K<f.length-1?"&":""}`),z),"?");o.href=`${c.config.FEEDBACK_URL}/${T}#${$a(this._map,!0)}`,o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}}_updateData(o){!o||"metadata"!==o.sourceDataType&&"visibility"!==o.sourceDataType&&"style"!==o.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}const f=this._map.style._sourceCaches;for(const z in f){const B=f[z];if(B.used){const K=B.getSource();K.attribution&&o.indexOf(K.attribution)<0&&o.push(K.attribution)}}o.sort((z,B)=>z.length-B.length),o=o.filter((z,B)=>{for(let K=B+1;K<o.length;K++)if(o[K].indexOf(z)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const T=o.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,o.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class hd{constructor(){c.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=Le("div","mapboxgl-ctrl");const f=Le("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&"metadata"!==o.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(0===Object.entries(o).length)return!0;for(const f in o){const T=o[f].getSource();if(T.hasOwnProperty("mapbox_logo")&&!T.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const f=o[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class pd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,T=f?this._queue.concat(f):this._queue;for(const z of T)if(z.id===o)return void(z.cancelled=!0)}run(o=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const T of f)if(!T.cancelled&&(T.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function aa(C,o,f){if(C=new c.LngLat(C.lng,C.lat),o){const T=new c.LngLat(C.lng-360,C.lat),z=new c.LngLat(C.lng+360,C.lat),B=360*Math.ceil(Math.abs(C.lng-f.center.lng)/360),K=f.locationPoint(C).distSqr(o),ie=o.x<0||o.y<0||o.x>f.width||o.y>f.height;f.locationPoint(T).distSqr(o)<K&&(ie||Math.abs(T.lng-f.center.lng)<B)?C=T:f.locationPoint(z).distSqr(o)<K&&(ie||Math.abs(z.lng-f.center.lng)<B)&&(C=z)}for(;Math.abs(C.lng-f.center.lng)>180;){const T=f.locationPoint(C);if(T.x>=0&&T.y>=0&&T.x<=f.width&&T.y<=f.height)break;C.lng>f.center.lng?C.lng-=360:C.lng+=360}return C}const Kl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class An extends c.Evented{constructor(o,f){if(super(),(o instanceof c.window.HTMLElement||f)&&(o=c.extend({element:o},f)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=o&&o.occludedOpacity||.2,o&&o.element)this._element=o.element,this._offset=c.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=Le("div");const z=41,B=27,K=Te("svg",{display:"block",height:z*this._scale+"px",width:B*this._scale+"px",viewBox:`0 0 ${B} ${z}`},this._element),ie=Te("radialGradient",{id:"shadowGradient"},Te("defs",{},K));Te("stop",{offset:"10%","stop-opacity":.4},ie),Te("stop",{offset:"100%","stop-opacity":.05},ie),Te("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},K),Te("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},K),Te("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},K),Te("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},K),this._offset=c.Point.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",z=>{z.preventDefault()}),this._element.addEventListener("mousedown",z=>{z.preventDefault()});const T=this._element.classList;for(const z in Kl)T.remove(`mapboxgl-marker-anchor-${z}`);T.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=c.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const z=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[z,-1*(24.6+z)],"bottom-right":[-z,-1*(24.6+z)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const f=o.code,T=o.charCode||o.keyCode;"Space"!==f&&"Enter"!==f&&32!==T&&13!==T||this.togglePopup()}_onMapClick(o){const f=o.originalEvent.target,T=this._element;this._popup&&(f===T||T.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,f=this._pos;if(!o||!f)return!1;const T=o.unproject(f),z=o.getFreeCameraOptions();if(!z.position)return!1;const B=z.position.toLngLat();return B.distanceTo(T)<.9*B.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const f=this._pos;if(!f||f.x<0||f.x>o.transform.width||f.y<0||f.y>o.transform.height)return void this._clearFadeTimer();const T=o.unproject(f);let z;o._showingGlobe()&&c.isLngLatBehindGlobe(o.transform,this._lngLat)?z=0:(z=1-o._queryFogOpacity(T),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(z*=this._occludedOpacity)),this._element.style.opacity=`${z}`,this._element.style.pointerEvents=z>0?"auto":"none",this._popup&&this._popup._setOpacity(z),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${o.x}px,${o.y}px)\n            ${Kl[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${f.x}px,${f.y}px)\n        `}_calculateXYTransform(){const o=this._pos,f=this._map,T=this.getPitchAlignment();if(!f||!o||"map"!==T)return"";if(!f._showingGlobe()){const le=f.getPitch();return le?`rotateX(${le}deg)`:""}const z=c.radToDeg(c.globeTiltAtLngLat(f.transform,this._lngLat)),B=o.sub(c.globeCenterToScreenPoint(f.transform)),K=Math.abs(B.x)+Math.abs(B.y);if(0===K)return"";const ie=z/K;return`rotateX(${-B.y*ie}deg) rotateY(${B.x*ie}deg)`}_calculateZTransform(){const o=this._pos,f=this._map;if(!f||!o)return"";let T=0;const z=this.getRotationAlignment();if("map"===z)if(f._showingGlobe()){const B=f.project(new c.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),K=f.project(new c.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(B);T=c.radToDeg(Math.atan2(K.y,K.x))-90}else T=-f.getBearing();else if("horizon"===z){const B=c.smoothstep(4,6,f.getZoom()),K=c.globeCenterToScreenPoint(f.transform);K.y+=B*f.transform.height;const ie=o.sub(K),le=c.radToDeg(Math.atan2(ie.y,ie.x));T=(le>90?le-270:le+90)*(1-B)}return T+=this._rotation,T?`rotateZ(${T}deg)`:""}_update(o){c.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=aa(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),!0===o?this._updateFrameId=c.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=c.Point.convert(o),this._update(),this}_onMove(o){const f=this._map;if(!f)return;const T=this._pointerdownPos,z=this._positionDelta;if(T&&z){if(!this._isDragging){const B=this._clickTolerance||f._clickTolerance;if(o.point.dist(T)<B)return;this._isDragging=!0}this._pos=o.point.sub(z),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(o){const f=this._map,T=this._pos;f&&T&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(T),this._pointerdownPos=o.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const f=this._map;return f&&(o?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const cc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fd(C=new c.Point(0,0),o="bottom"){if("number"==typeof C){const f=Math.round(Math.sqrt(.5*Math.pow(C,2)));switch(o){case"top":return new c.Point(0,C);case"top-left":return new c.Point(f,f);case"top-right":return new c.Point(-f,f);case"bottom":return new c.Point(0,-C);case"bottom-left":return new c.Point(f,-f);case"bottom-right":return new c.Point(-f,-f);case"left":return new c.Point(C,0);case"right":return new c.Point(-C,0)}return new c.Point(0,0)}return C instanceof c.Point||Array.isArray(C)?c.Point.convert(C):c.Point.convert(C[o]||[0,0])}class dc{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const f=c.easeCubicInOut((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,f,T){this._start=this.getValue(f),this._end=o,this._startTime=f,this._endTime=f+T}}const fd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},td={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},uc={showCompass:!0,showZoom:!0,visualizePitch:!1};class xa{constructor(o,f,T=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new To({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,T&&(this.mousePitch=new va({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(o,f){this.mouseRotate.mousedown(o,f),this.mousePitch&&this.mousePitch.mousedown(o,f),vt()}move(o,f){const T=this.map,z=this.mouseRotate.mousemoveWindow(o,f),B=z&&z.bearingDelta;if(B&&T.setBearing(T.getBearing()+B),this.mousePitch){const K=this.mousePitch.mousemoveWindow(o,f),ie=K&&K.pitchDelta;ie&&T.setPitch(T.getPitch()+ie)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){tt(),c.window.removeEventListener("mousemove",this.mousemove),c.window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(c.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),qt(this.element,o)),c.window.addEventListener("mousemove",this.mousemove),c.window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,qt(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){1!==o.targetTouches.length?this.reset():(this._startPos=this._lastPos=Je(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){1!==o.targetTouches.length?this.reset():(this._lastPos=Je(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){0===o.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Pc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},md={maxWidth:100,unit:"metric"},gd={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ec={version:c.version,supported:Be,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends ds{constructor(C){if(c.LivePerformanceUtils.mark(c.PerformanceMarkers.create),null!=(C=c.extend({},td,C)).minZoom&&null!=C.maxZoom&&C.minZoom>C.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=C.minPitch&&null!=C.maxPitch&&C.minPitch>C.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=C.minPitch&&C.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=C.maxPitch&&C.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(C.antialias&&c.isSafariWithAntialiasingBug(c.window)&&(C.antialias=!1,c.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new oa(C.minZoom,C.maxZoom,C.minPitch,C.maxPitch,C.renderWorldCopies),C),this._interactive=C.interactive,this._minTileCacheSize=C.minTileCacheSize,this._maxTileCacheSize=C.maxTileCacheSize,this._failIfMajorPerformanceCaveat=C.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=C.preserveDrawingBuffer,this._antialias=C.antialias,this._useWebGL2=C.useWebGL2,this._trackResize=C.trackResize,this._bearingSnap=C.bearingSnap,this._refreshExpiredTiles=C.refreshExpiredTiles,this._fadeDuration=C.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=C.crossSourceCollisions,this._collectResourceTiming=C.collectResourceTiming,this._optimizeForTerrain=C.optimizeForTerrain,this._language=this._parseLanguage(C.language),this._worldview=C.worldview,this._renderTaskQueue=new pd,this._domRenderTaskQueue=new pd,this._controls=[],this._markers=[],this._popups=[],this._mapId=c.uniqueId(),this._locale=c.extend({},fd,C.locale),this._clickTolerance=C.clickTolerance,this._cooperativeGestures=C.cooperativeGestures,this._performanceMetricsCollection=C.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new dc(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new c.RequestManager(C.transformRequest,C.accessToken,C.testMode),this._silenceAuthErrors=!!C.testMode,"string"==typeof C.container){if(this._container=c.window.document.getElementById(C.container),!this._container)throw new Error(`Container '${C.container}' not found.`)}else{if(!(C.container instanceof c.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=C.container}if(this._container.childNodes.length>0&&c.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),C.maxBounds&&this.setMaxBounds(C.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==c.window&&(c.window.addEventListener("online",this._onWindowOnline,!1),c.window.addEventListener("resize",this._onWindowResize,!1),c.window.addEventListener("orientationchange",this._onWindowResize,!1),c.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),c.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ba(this,C),this._localFontFamily=C.localFontFamily,this._localIdeographFontFamily=C.localIdeographFontFamily,C.style&&this.setStyle(C.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),C.projection&&this.setProjection(C.projection),this._hash=C.hash&&new Va("string"==typeof C.hash&&C.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch}),C.bounds&&(this.resize(),this.fitBounds(C.bounds,c.extend({},C.fitBoundsOptions,{duration:0})))),this.resize(),C.attributionControl&&this.addControl(new Vn({customAttribution:C.customAttribution})),this._logoControl=new hd,this.addControl(this._logoControl,C.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update("style"===o.dataType),this.fire(new c.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new c.Event(`${o.dataType}dataloading`,o))})}_getMapId(){return this._mapId}addControl(C,o){if(void 0===o&&(o=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=C.onAdd(this);this._controls.push(C);const T=this._controlPositions[o];return-1!==o.indexOf("bottom")?T.insertBefore(f,T.firstChild):T.appendChild(f),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(C);return o>-1&&this._controls.splice(o,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(C){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new c.Event("movestart",C)).fire(new c.Event("move",C)),this.fire(new c.Event("resize",C)),o&&this.fire(new c.Event("moveend",C)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(C){return this.transform.setMaxBounds(c.LngLatBounds.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom)return this.transform.minZoom=C,this._update(),this.getZoom()<C?this.setZoom(C):this.fire(new c.Event("zoomstart")).fire(new c.Event("zoom")).fire(new c.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom)return this.transform.maxZoom=C,this._update(),this.getZoom()>C?this.setZoom(C):this.fire(new c.Event("zoomstart")).fire(new c.Event("zoom")).fire(new c.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch)return this.transform.minPitch=C,this._update(),this.getPitch()<C?this.setPitch(C):this.fire(new c.Event("pitchstart")).fire(new c.Event("pitch")).fire(new c.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(C>=this.transform.minPitch)return this.transform.maxPitch=C,this._update(),this.getPitch()>C?this.setPitch(C):this.fire(new c.Event("pitchstart")).fire(new c.Event("pitch")).fire(new c.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.renderWorldCopies=C,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(C){return"auto"===C?c.window.navigator.language:Array.isArray(C)?0===C.length?void 0:C.map(o=>"auto"===o?c.window.navigator.language:o):C}setLanguage(C){const o=this._parseLanguage(C);if(!this.style||o===this._language)return this;this._language=o,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(C){return this.style&&C!==this._worldview?(this._worldview=C,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(C){return this._lazyInitEmptyStyle(),C?"string"==typeof C&&(C={name:C}):C=null,this._useExplicitProjection=!!C,this._prioritizeAndUpdateProjection(C,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const C=this.transform,o=C.projection.name;let f;"globe"===o&&C.zoom>=c.GLOBE_ZOOM_THRESHOLD_MAX?(C.setMercatorFromTransition(),f=!0):"mercator"===o&&C.zoom<c.GLOBE_ZOOM_THRESHOLD_MAX&&(C.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(C,o){return this._updateProjection(C||o||{name:"mercator"})}_updateProjection(C){let o;if(o="globe"===C.name&&this.transform.zoom>=c.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(C),this.style.applyProjectionUpdate(),o){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(C){return this.transform.locationPoint3D(c.LngLat.convert(C))}unproject(C){return this.transform.pointLocation3D(c.Point.convert(C))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(C,o,f){if("mouseenter"===C||"mouseover"===C){let T=!1;const z=K=>{const ie=o.filter(ve=>this.getLayer(ve)),le=ie.length?this.queryRenderedFeatures(K.point,{layers:ie}):[];le.length?T||(T=!0,f.call(this,new Ie(C,this,K.originalEvent,{features:le}))):T=!1},B=()=>{T=!1};return{layers:new Set(o),listener:f,delegates:{mousemove:z,mouseout:B}}}if("mouseleave"===C||"mouseout"===C){let T=!1;const z=K=>{const ie=o.filter(le=>this.getLayer(le));(ie.length?this.queryRenderedFeatures(K.point,{layers:ie}):[]).length?T=!0:T&&(T=!1,f.call(this,new Ie(C,this,K.originalEvent)))},B=K=>{T&&(T=!1,f.call(this,new Ie(C,this,K.originalEvent)))};return{layers:new Set(o),listener:f,delegates:{mousemove:z,mouseout:B}}}{const T=z=>{const B=o.filter(ie=>this.getLayer(ie)),K=B.length?this.queryRenderedFeatures(z.point,{layers:B}):[];K.length&&(z.features=K,f.call(this,z),delete z.features)};return{layers:new Set(o),listener:f,delegates:{[C]:T}}}}on(C,o,f){if(void 0===f)return super.on(C,o);Array.isArray(o)||(o=[o]);const T=this._createDelegatedListener(C,o,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(T);for(const z in T.delegates)this.on(z,T.delegates[z]);return this}once(C,o,f){if(void 0===f)return super.once(C,o);Array.isArray(o)||(o=[o]);const T=this._createDelegatedListener(C,o,f);for(const z in T.delegates)this.once(z,T.delegates[z]);return this}off(C,o,f){if(void 0===f)return super.off(C,o);o=new Set(Array.isArray(o)?o:[o]);const T=(B,K)=>{if(B.size!==K.size)return!1;for(const ie of B)if(!K.has(ie))return!1;return!0},z=this._delegatedListeners?this._delegatedListeners[C]:void 0;return z&&(B=>{for(let K=0;K<B.length;K++){const ie=B[K];if(ie.listener===f&&T(ie.layers,o)){for(const le in ie.delegates)this.off(le,ie.delegates[le]);return B.splice(K,1),this}}})(z),this}queryRenderedFeatures(C,o){return this.style?(void 0!==o||void 0===C||C instanceof c.Point||Array.isArray(C)||(o=C,C=void 0),this.style.queryRenderedFeatures(C=C||[[0,0],[this.transform.width,this.transform.height]],o=o||{},this.transform)):[]}querySourceFeatures(C,o){return this.style.querySourceFeatures(C,o)}isPointOnSurface(C){const{name:o}=this.transform.projection;return"globe"!==o&&"mercator"!==o&&c.warnOnce(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(c.Point.convert(C))}setStyle(C,o){return!1!==(o=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o)).diff&&o.localIdeographFontFamily===this._localIdeographFontFamily&&o.localFontFamily===this._localFontFamily&&this.style&&C?(this._diffStyle(C,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(C,o))}_getUIString(C){const o=this._locale[C];if(null==o)throw new Error(`Missing UI string '${C}'`);return o}_updateStyle(C,o){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),C&&(this.style=new wr(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof C?this.style.loadURL(C):this.style.loadJSON(C)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new wr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,o){if("string"==typeof C){const f=this._requestManager.normalizeStyleURL(C),T=this._requestManager.transformRequest(f,c.ResourceType.Style);c.getJSON(T,(z,B)=>{z?this.fire(new c.ErrorEvent(z)):B&&this._updateDiff(B,o)})}else"object"==typeof C&&this._updateDiff(C,o)}_updateDiff(C,o){try{this.style.setState(C)&&this._update(!0)}catch(f){c.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(C,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(c.warnOnce("There is no style added to the map."),!1)}addSource(C,o){return this._lazyInitEmptyStyle(),this.style.addSource(C,o),this._update(!0)}isSourceLoaded(C){return!!this.style&&this.style._isSourceCacheLoaded(C)}areTilesLoaded(){const C=this.style&&this.style._sourceCaches;for(const o in C){const f=C[o]._tiles;for(const T in f){const z=f[T];if("loaded"!==z.state&&"errored"!==z.state)return!1}}return!0}addSourceType(C,o,f){this._lazyInitEmptyStyle(),this.style.addSourceType(C,o,f)}removeSource(C){return this.style.removeSource(C),this._updateTerrain(),this._update(!0)}getSource(C){return this.style.getSource(C)}addImage(C,o,{pixelRatio:f=1,sdf:T=!1,stretchX:z,stretchY:B,content:K}={}){if(this._lazyInitEmptyStyle(),o instanceof c.window.HTMLImageElement||c.window.ImageBitmap&&o instanceof c.window.ImageBitmap){const{width:ie,height:le,data:ve}=c.exported.getImageData(o);this.style.addImage(C,{data:new c.RGBAImage({width:ie,height:le},ve),pixelRatio:f,stretchX:z,stretchY:B,content:K,sdf:T,version:0})}else if(void 0===o.width||void 0===o.height)this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:ie,height:le}=o,ve=o;this.style.addImage(C,{data:new c.RGBAImage({width:ie,height:le},new Uint8Array(ve.data)),pixelRatio:f,stretchX:z,stretchY:B,content:K,sdf:T,version:0,userImage:ve}),ve.onAdd&&ve.onAdd(this,C)}}updateImage(C,o){const f=this.style.getImage(C);if(!f)return void this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=o instanceof c.window.HTMLImageElement||c.window.ImageBitmap&&o instanceof c.window.ImageBitmap?c.exported.getImageData(o):o,{width:z,height:B}=T;void 0!==z&&void 0!==B?z===f.data.width&&B===f.data.height?(f.data.replace(T.data,!(o instanceof c.window.HTMLImageElement||c.window.ImageBitmap&&o instanceof c.window.ImageBitmap)),this.style.updateImage(C,f)):this.fire(new c.ErrorEvent(new Error(`The width and height of the updated image (${z}, ${B})\n                must be that same as the previous version of the image\n                (${f.data.width}, ${f.data.height})`))):this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C,o){c.getImage(this._requestManager.transformRequest(C,c.ResourceType.Image),(f,T)=>{o(f,T instanceof c.window.HTMLImageElement?c.exported.getImageData(T):T)})}listImages(){return this.style.listImages()}addLayer(C,o){return this._lazyInitEmptyStyle(),this.style.addLayer(C,o),this._update(!0)}moveLayer(C,o){return this.style.moveLayer(C,o),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}setLayerZoomRange(C,o,f){return this.style.setLayerZoomRange(C,o,f),this._update(!0)}setFilter(C,o,f={}){return this.style.setFilter(C,o,f),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,o,f,T={}){return this.style.setPaintProperty(C,o,f,T),this._update(!0)}getPaintProperty(C,o){return this.style.getPaintProperty(C,o)}setLayoutProperty(C,o,f,T={}){return this.style.setLayoutProperty(C,o,f,T),this._update(!0)}getLayoutProperty(C,o){return this.style.getLayoutProperty(C,o)}setLight(C,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,o),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(C){return this._lazyInitEmptyStyle(),!C&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(C),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(C){return this._lazyInitEmptyStyle(),this.style.setFog(C),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(C){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(c.LngLat.convert(C),this.transform):0}setFeatureState(C,o){return this.style.setFeatureState(C,o),this._update()}removeFeatureState(C,o){return this.style.removeFeatureState(C,o),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}_updateContainerDimensions(){if(!this._container)return;const C=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let f,T,z,B=this._container;for(;B&&(!T||!z);){const K=c.window.getComputedStyle(B).transform;K&&"none"!==K&&(f=K.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&"0"!==f[0]&&"1"!==f[0]&&(T=f[0]),f[3]&&"0"!==f[3]&&"1"!==f[3]&&(z=f[3])),B=B.parentElement}this._containerWidth=T?Math.abs(C/T):C,this._containerHeight=z?Math.abs(o/z):o}_detectMissingCSS(){"rgb(250, 128, 114)"!==c.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&c.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const C=this._container;C.classList.add("mapboxgl-map"),(this._missingCSSCanary=Le("div","mapboxgl-canary",C)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=Le("div","mapboxgl-canvas-container",C);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=Le("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=Le("div","mapboxgl-control-container",C),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(z=>{T[z]=Le("div",`mapboxgl-ctrl-${z}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,o){const f=c.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(C),this._canvas.height=f*Math.ceil(o),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${o}px`}_addMarker(C){this._markers.push(C)}_removeMarker(C){const o=this._markers.indexOf(C);-1!==o&&this._markers.splice(o,1)}_addPopup(C){this._popups.push(C)}_removePopup(C){const o=this._popups.indexOf(C);-1!==o&&this._popups.splice(o,1)}_setupPainter(){const C=c.extend({},Be.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._useWebGL2&&this._canvas.getContext("webgl2",C),f=o||this._canvas.getContext("webgl",C)||this._canvas.getContext("experimental-webgl",C);f?(this._useWebGL2&&!o&&c.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),c.storeAuthState(f,!0),this.painter=new qs(f,this.transform,!!o),this.on("data",T=>{"source"===T.dataType&&this.painter.setTileLoadedFlag(!0)}),c.exported$1.testSupport(f)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(C){C.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:C}))}_contextRestored(C){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:C}))}_onMapScroll(C){if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_requestDomTask(C){!this.loaded()||this.loaded()&&!this.isMoving()?C():this._domRenderTaskQueue.add(C)}_render(C){let o;const f=this.painter.context.extTimerQuery,T=c.exported.now();if(this.listens("gpu-timing-frame")&&(o=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],c.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],c.window.performance.now())),this._renderTaskQueue.run(C),this._domRenderTaskQueue.run(C),this._removed)return;this._updateProjectionTransition();const z=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ie=this.transform.zoom,le=this.transform.pitch,ve=c.exported.now(),_e=new c.EvaluationParameters(ie,{now:ve,fadeDuration:z,pitch:le,transition:this.style.getTransition()});this.style.update(_e)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let B=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),B=this._updateAverageElevation(T),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):B=this._updateAverageElevation(T),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,z,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new c.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const ie=c.exported.now()-T;f.endQueryEXT(f.TIME_ELAPSED_EXT,o),setTimeout(()=>{const le=f.getQueryObjectEXT(o,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(o),this.fire(new c.Event("gpu-timing-frame",{cpuTime:ie,gpuTime:le})),c.window.performance.mark("frame-gpu",{startTime:T,detail:{gpuTime:le}})},50)}if(this.listens("gpu-timing-layer")){const ie=this.painter.collectGpuTimers();setTimeout(()=>{const le=this.painter.queryGpuTimers(ie);this.fire(new c.Event("gpu-timing-layer",{layerTimes:le}))},50)}if(this.listens("gpu-timing-deferred-render")){const ie=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const le=this.painter.queryGpuTimeDeferredRender(ie);this.fire(new c.Event("gpu-timing-deferred-render",{gpuTime:le}))},50)}const K=this._sourcesDirty||this._styleDirty||this._placementDirty||B;if(K||this._repaint)this.triggerRepaint();else{const ie=!this.isMoving()&&this.loaded();if(ie&&(B=this._updateAverageElevation(T,!0)),B)this.triggerRepaint();else if(this._triggerFrame(!1),ie&&(this.fire(new c.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const le=this._calculateSpeedIndex();this.fire(new c.Event("speedindexcompleted",{speedIndex:le})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0,c.LivePerformanceUtils.mark(c.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&c.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(C){for(const o of this._markers)C&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!C||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(C,o=!1){const f=T=>(this.transform.averageElevation=T,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&f(0);if((o||C-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(C)){const T=this.transform.averageElevation;let z=this.transform.sampleAverageElevation(),B=!1;this.transform.elevation&&(B=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(z)?z=0:this._averageElevationLastSampledAt=C;const K=Math.abs(T-z);if(K>1){if(this._isInitialLoad||B)return this._averageElevation.jumpTo(z),f(z);this._averageElevation.easeTo(z,C,300)}else if(K>1e-4)return this._averageElevation.jumpTo(z),f(z)}return!!this._averageElevation.isEasing(C)&&f(this._averageElevation.getValue(C))}_authenticate(){c.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,C=>{if(C&&(C.message===c.AUTH_ERR_MSG||401===C.status)){const o=this.painter.context.gl;c.storeAuthState(o,!1),this._logoControl instanceof hd&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new c.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),c.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const C=this._isDragging();this.painter.updateTerrain(this.style,C)}_calculateSpeedIndex(){const C=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const f=this.painter.context.gl,T=f.createFramebuffer();function z(B){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,B,0);const K=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,K),K}return f.bindFramebuffer(f.FRAMEBUFFER,T),this._canvasPixelComparison(z(C),o.canvasCopies.map(z),o.timeStamps)}_canvasPixelComparison(C,o,f){let T=f[1]-f[0];const z=C.length/4;for(let B=0;B<o.length;B++){const K=o[B];let ie=0;for(let le=0;le<K.length;le+=4)K[le]===C[le]&&K[le+1]===C[le+1]&&K[le+2]===C[le+2]&&K[le+3]===C[le+3]&&(ie+=1);T+=(f[B+2]-f[B+1])*(1-ie/z)}return T}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==c.window&&(c.window.removeEventListener("resize",this._onWindowResize,!1),c.window.removeEventListener("orientationchange",this._onWindowResize,!1),c.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),c.window.removeEventListener("online",this._onWindowOnline,!1),c.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const C=this.painter.context.gl.getExtension("WEBGL_lose_context");C&&C.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),c.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(C){this._renderNextFrame=this._renderNextFrame||C,this.style&&!this._frame&&(this._frame=c.exported.frame(o=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(o)}))}_preloadTiles(C){const o=this.style?Object.values(this.style._sourceCaches):[];return c.asyncAll(o,(f,T)=>f._preloadTiles(C,T),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(C){this._trackResize&&this.resize({originalEvent:C})._update()}_onVisibilityChange(){"hidden"===c.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(C){this._showTerrainWireframe!==C&&(this._showTerrainWireframe=C,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(C){this._speedIndexTiming!==C&&(this._speedIndexTiming=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(C){this._showTileAABBs!==C&&(this._showTileAABBs=C,C&&this._update())}_setCacheLimits(C,o){c.setCacheLimits(C,o)}get version(){return c.version}},NavigationControl:class{constructor(C){this.options=c.extend({},uc,C),this._container=Le("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),Le("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),Le("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:o}):f.resetNorth({},{originalEvent:o}))}),this._compassIcon=Le("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const C=this._map;if(!C)return;const o=C.getZoom(),f=o===C.getMaxZoom(),T=o===C.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())}_rotateCompassArrow(){const C=this._map;if(!C)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(C.transform.pitch*(Math.PI/180)),.5)}) rotateX(${C.transform.pitch}deg) rotateZ(${C.transform.angle*(180/Math.PI)}deg)`:`rotate(${C.transform.angle*(180/Math.PI)}deg)`;C._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),C.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&C.on("pitch",this._rotateCompassArrow),C.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(C,this._compass,this.options.visualizePitch)),this._container}onRemove(){const C=this._map;C&&(this._container.remove(),this.options.showZoom&&C.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&C.off("pitch",this._rotateCompassArrow),C.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(C,o){const f=Le("button",C,this._container);return f.type="button",f.addEventListener("click",o),f}_setButtonTitle(C,o){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${o}`);C.setAttribute("aria-label",f),C.firstElementChild&&C.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends c.Evented{constructor(C){super(),this.options=c.extend({geolocation:c.window.navigator.geolocation},Pc,C),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=nl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(C){return this._map=C,this._container=Le("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(C){const o=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,C(f)};void 0!==this._supportsGeolocation?C(this._supportsGeolocation):void 0!==c.window.navigator.permissions?c.window.navigator.permissions.query({name:"geolocation"}).then(f=>o("denied"!==f.state)).catch(()=>o()):o()}_isOutOfMapMaxBounds(C){const o=this._map.getMaxBounds(),f=C.coords;return!!o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(C){if(this._map){if(this._isOutOfMapMaxBounds(C))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",C)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=C,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(C),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(C),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",C)),this._finish()}}_updateCamera(C){const o=new c.LngLat(C.coords.longitude,C.coords.latitude),f=C.coords.accuracy,T=this._map.getBearing(),z=c.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(f),z,{geolocateSource:!0})}_updateMarker(C){if(C){const o=new c.LngLat(C.coords.longitude,C.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=C.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const C=this._map.transform,o=c.mercatorZfromAltitude(1,C._center.lat)*C.worldSize,f=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(C){if(this._map){if(this.options.trackUserLocation)if(1===C.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===C.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",C)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(C){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=Le("button","mapboxgl-ctrl-geolocate",this._container),Le("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===C){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Le("div","mapboxgl-user-location"),this._dotElement.appendChild(Le("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Le("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new An({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Le("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new An({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||"ACTIVE_LOCK"!==this._watchState||o.originalEvent&&"resize"===o.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}}_onDeviceOrientation(C){this._userLocationDotMarker&&(C.webkitCompassHeading?this._heading=C.webkitCompassHeading:!0===C.absolute&&(this._heading=-1*C.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let C;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(C={maximumAge:6e5,timeout:0},this._noTimeout=!0):(C=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,C),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const C=()=>{c.window.addEventListener("ondeviceorientationabsolute"in c.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==c.window.DeviceMotionEvent&&"function"==typeof c.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(o=>{"granted"===o&&C()}).catch(console.error):C()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),c.window.removeEventListener("deviceorientation",this._onDeviceOrientation),c.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Vn,ScaleControl:class{constructor(C){this.options=c.extend({},md,C),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),c.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const C=this.options.maxWidth||100,o=this._map,f=o._containerHeight/2,T=o._containerWidth/2-C/2,z=o.unproject([T,f]),B=o.unproject([T+C,f]),K=z.distanceTo(B);if("imperial"===this.options.unit){const ie=3.2808*K;ie>5280?this._setScale(C,ie/5280,"mile"):this._setScale(C,ie,"foot")}else"nautical"===this.options.unit?this._setScale(C,K/1852,"nautical-mile"):K>=1e3?this._setScale(C,K/1e3,"kilometer"):this._setScale(C,K,"meter")}_setScale(C,o,f){this._map._requestDomTask(()=>{const T=function(B){const K=Math.pow(10,`${Math.floor(B)}`.length-1);let ie=B/K;return ie=ie>=10?10:ie>=5?5:ie>=3?3:ie>=2?2:ie>=1?1:function(le){const ve=Math.pow(10,Math.ceil(-Math.log(le)/Math.LN10));return Math.round(le*ve)/ve}(ie),K*ie}(o),z=T/o;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==f?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:f}).format(T):`${T}&nbsp;${gd[f]}`,this._container.style.width=C*z+"px"})}onAdd(C){return this._map=C,this._language=C.getLanguage(),this._container=Le("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(C){this._language=C,this._update()}setUnit(C){this.options.unit=C,this._update()}},FullscreenControl:class{constructor(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof c.window.HTMLElement?this._container=C.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in c.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in c.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=Le("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,c.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!c.window.document.fullscreenEnabled&&!c.window.document.webkitFullscreenEnabled)}_setupUI(){const C=this._fullscreenButton=Le("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Le("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),c.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",C)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(c.window.document.fullscreenElement||c.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?c.window.document.exitFullscreen?c.window.document.exitFullscreen():c.window.document.webkitCancelFullScreen&&c.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends c.Evented{constructor(C){super(),this.options=c.extend(Object.create(cc),C),c.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(C&&C.className?C.className.trim().split(/\s+/):[])}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&C.on("preclick",this._onClose),this.options.closeOnMove&&C.on("move",this._onClose),C.on("remove",this.remove),this._update(),C._addPopup(this),this._focusFirstElement(),this._trackPointer?(C.on("mousemove",this._onMouseEvent),C.on("mouseup",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")):C.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const C=this._map;return C&&(C.off("move",this._update),C.off("move",this._onClose),C.off("preclick",this._onClose),C.off("click",this._onClose),C.off("remove",this.remove),C.off("mousemove",this._onMouseEvent),C.off("mouseup",this._onMouseEvent),C.off("drag",this._onMouseEvent),C._canvasContainer&&C._canvasContainer.classList.remove("mapboxgl-track-pointer"),C._removePopup(this),this._map=void 0),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(C){this._lngLat=c.LngLat.convert(C),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const C=this._map;return C&&(C.off("move",this._update),C.on("mousemove",this._onMouseEvent),C.on("drag",this._onMouseEvent),C._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(c.window.document.createTextNode(C))}setHTML(C){const o=c.window.document.createDocumentFragment(),f=c.window.document.createElement("body");let T;for(f.innerHTML=C;T=f.firstChild,T;)o.appendChild(T);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=Le("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(C),this.options.closeButton){const f=this._closeButton=Le("button","mapboxgl-popup-close-button",o);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(C){return this._classList.add(C),this._updateClassList(),this}removeClassName(C){return this._classList.delete(C),this._updateClassList(),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){let o;return this._classList.delete(C)?o=!1:(this._classList.add(C),o=!0),this._updateClassList(),o}_onMouseEvent(C){this._update(C.point)}_getAnchor(C){if(this.options.anchor)return this.options.anchor;const o=this._map,f=this._container,T=this._pos;if(!o||!f||!T)return"bottom";const z=f.offsetWidth,B=f.offsetHeight,K=T.x<z/2,ie=T.x>o.transform.width-z/2;if(T.y+C<B)return K?"top-left":ie?"top-right":"top";if(T.y>o.transform.height-B){if(K)return"bottom-left";if(ie)return"bottom-right"}return K?"left":ie?"right":"bottom"}_updateClassList(){const C=this._container;if(!C)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),C.className=o.join(" ")}_update(C){const o=this._map,f=this._content;if(!o||!this._lngLat&&!this._trackPointer||!f)return;let T=this._container;if(T||(T=this._container=Le("div","mapboxgl-popup",o.getContainer()),this._tip=Le("div","mapboxgl-popup-tip",T),T.appendChild(f)),this.options.maxWidth&&T.style.maxWidth!==this.options.maxWidth&&(T.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=aa(this._lngLat,this._pos,o.transform)),!this._trackPointer||C){const z=this._pos=this._trackPointer&&C?C:o.project(this._lngLat),B=Fd(this.options.offset),K=this._anchor=this._getAnchor(B.y),ie=Fd(this.options.offset,K),le=z.add(ie).round();o._requestDomTask(()=>{this._container&&K&&(this._container.style.transform=`${Kl[K]} translate(${le.x}px,${le.y}px)`)})}if(!this._marker&&o._showingGlobe()){const z=c.isLngLatBehindGlobe(o.transform,this._lngLat)?0:1;this._setOpacity(z)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(cu);C&&C.focus()}_onClose(){this.remove()}_setOpacity(C){this._container&&(this._container.style.opacity=`${C}`),this._content&&(this._content.style.pointerEvents=C?"auto":"none")}},Marker:An,Style:wr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.Point,MercatorCoordinate:c.MercatorCoordinate,FreeCameraOptions:_a,Evented:c.Evented,config:c.config,prewarm:function(){Ct().acquire(Yi)},clearPrewarmedResources:function(){const C=Ki;C&&(C.isPreloaded()&&1===C.numActive()?(C.release(Yi),Ki=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return c.config.ACCESS_TOKEN},set accessToken(C){c.config.ACCESS_TOKEN=C},get baseApiUrl(){return c.config.API_URL},set baseApiUrl(C){c.config.API_URL=C},get workerCount(){return Ei.workerCount},set workerCount(C){Ei.workerCount=C},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){c.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage(C){c.clearTileCache(C)},workerUrl:"",workerClass:null,setNow:c.exported.setNow,restoreNow:c.exported.restoreNow};return Ec}),e}()},1472:(ms,lr,Et)=>{"use strict";Et.d(lr,{u:()=>vt});var e=Et(1364);let He,Mi=1;const c={};function Z(ze){return ze in c&&(delete c[ze],!0)}const Be={setImmediate(ze){const ct=Mi++;return c[ct]=!0,He||(He=Promise.resolve()),He.then(()=>Z(ct)&&ze()),ct},clearImmediate(ze){Z(ze)}},{setImmediate:Se,clearImmediate:Le}=Be,Te={setImmediate(...ze){const{delegate:ct}=Te;return(ct?.setImmediate||Se)(...ze)},clearImmediate(ze){const{delegate:ct}=Te;return(ct?.clearImmediate||Le)(ze)},delegate:void 0};var We=Et(9816);const vt=new class ut extends We.k{flush(ct){this._active=!0;const qt=this._scheduled;this._scheduled=void 0;const{actions:Je}=this;let Jt;ct=ct||Je.shift();do{if(Jt=ct.execute(ct.state,ct.delay))break}while((ct=Je[0])&&ct.id===qt&&Je.shift());if(this._active=!1,Jt){for(;(ct=Je[0])&&ct.id===qt&&Je.shift();)ct.unsubscribe();throw Jt}}}(class Ve extends e.m{constructor(ct,qt){super(ct,qt),this.scheduler=ct,this.work=qt}requestAsyncId(ct,qt,Je=0){return null!==Je&&Je>0?super.requestAsyncId(ct,qt,Je):(ct.actions.push(this),ct._scheduled||(ct._scheduled=Te.setImmediate(ct.flush.bind(ct,void 0))))}recycleAsyncId(ct,qt,Je=0){var Jt;if(null!=Je?Je>0:this.delay>0)return super.recycleAsyncId(ct,qt,Je);const{actions:yi}=ct;null!=qt&&(null===(Jt=yi[yi.length-1])||void 0===Jt?void 0:Jt.id)!==qt&&(Te.clearImmediate(qt),ct._scheduled===qt&&(ct._scheduled=void 0))}})},3756:function(ms){ms.exports=function(){"use strict";function lr(Ye,ne,fe){return ne=Te(ne),function ut(Ye,ne){if(ne&&("object"==typeof ne||"function"==typeof ne))return ne;if(void 0!==ne)throw new TypeError("Derived constructors may only return object or undefined");return function We(Ye){if(void 0===Ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ye}(Ye)}(Ye,e()?Reflect.construct(ne,fe||[],Te(Ye).constructor):ne.apply(Ye,fe))}function e(){try{var Ye=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e=function(){return!!Ye})()}function c(Ye){var ne=function He(Ye,ne){if("object"!=typeof Ye||!Ye)return Ye;var fe=Ye[Symbol.toPrimitive];if(void 0!==fe){var $e=fe.call(Ye,ne||"default");if("object"!=typeof $e)return $e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===ne?String:Number)(Ye)}(Ye,"string");return"symbol"==typeof ne?ne:String(ne)}function Z(Ye){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ne){return typeof ne}:function(ne){return ne&&"function"==typeof Symbol&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne})(Ye)}function Be(Ye,ne){if(!(Ye instanceof ne))throw new TypeError("Cannot call a class as a function")}function we(Ye,ne){for(var fe=0;fe<ne.length;fe++){var $e=ne[fe];$e.enumerable=$e.enumerable||!1,$e.configurable=!0,"value"in $e&&($e.writable=!0),Object.defineProperty(Ye,c($e.key),$e)}}function Se(Ye,ne,fe){return ne&&we(Ye.prototype,ne),fe&&we(Ye,fe),Object.defineProperty(Ye,"prototype",{writable:!1}),Ye}function Te(Ye){return(Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(Ye)}function Ve(Ye,ne){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($e,Kt){return $e.__proto__=Kt,$e})(Ye,ne)}function tt(){return tt=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(ne,fe,$e){var Kt=function vt(Ye,ne){for(;!Object.prototype.hasOwnProperty.call(Ye,ne)&&null!==(Ye=Te(Ye)););return Ye}(ne,fe);if(Kt){var an=Object.getOwnPropertyDescriptor(Kt,fe);return an.get?an.get.call(arguments.length<3?ne:$e):an.value}},tt.apply(this,arguments)}function ze(Ye,ne){return function Je(Ye){if(Array.isArray(Ye))return Ye}(Ye)||function Mi(Ye,ne){var fe=null==Ye?null:typeof Symbol<"u"&&Ye[Symbol.iterator]||Ye["@@iterator"];if(null!=fe){var $e,Kt,an,Hn,Pr=[],Fr=!0,xs=!1;try{if(an=(fe=fe.call(Ye)).next,0===ne){if(Object(fe)!==fe)return;Fr=!1}else for(;!(Fr=($e=an.call(fe)).done)&&(Pr.push($e.value),Pr.length!==ne);Fr=!0);}catch(Ns){xs=!0,Kt=Ns}finally{try{if(!Fr&&null!=fe.return&&(Hn=fe.return(),Object(Hn)!==Hn))return}finally{if(xs)throw Kt}}return Pr}}(Ye,ne)||yi(Ye,ne)||function ci(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(Ye){return function qt(Ye){if(Array.isArray(Ye))return rt(Ye)}(Ye)||function Jt(Ye){if(typeof Symbol<"u"&&null!=Ye[Symbol.iterator]||null!=Ye["@@iterator"])return Array.from(Ye)}(Ye)||yi(Ye)||function bi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yi(Ye,ne){if(Ye){if("string"==typeof Ye)return rt(Ye,ne);var fe=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===fe&&Ye.constructor&&(fe=Ye.constructor.name),"Map"===fe||"Set"===fe)return Array.from(Ye);if("Arguments"===fe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe))return rt(Ye,ne)}}function rt(Ye,ne){(null==ne||ne>Ye.length)&&(ne=Ye.length);for(var fe=0,$e=new Array(ne);fe<ne;fe++)$e[fe]=Ye[fe];return $e}function ti(Ye,ne){return function vi(Ye,ne){return ne.get?ne.get.call(Ye):ne.value}(Ye,pi(Ye,ne,"get"))}function St(Ye,ne,fe){return function Ti(Ye,ne,fe){if(ne.set)ne.set.call(Ye,fe);else{if(!ne.writable)throw new TypeError("attempted to set read only private field");ne.value=fe}}(Ye,pi(Ye,ne,"set"),fe),fe}function pi(Ye,ne,fe){if(!ne.has(Ye))throw new TypeError("attempted to "+fe+" private field on non-instance");return ne.get(Ye)}function Ii(Ye,ne,fe){(function Ji(Ye,ne){if(ne.has(Ye))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Ye,ne),ne.set(Ye,fe)}var Zi={},ji=function(ne){return new Promise(function(fe){if(!ne)return fe();var $e=window.scrollX,Kt=window.scrollY;Zi.restoreFocusTimeout=setTimeout(function(){Zi.previousActiveElement instanceof HTMLElement?(Zi.previousActiveElement.focus(),Zi.previousActiveElement=null):document.body&&document.body.focus(),fe()},100),window.scrollTo($e,Kt)})},di=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(Ye,ne){return Ye[ne]="swal2-"+ne,Ye},{}),_n=["success","warning","info","question","error"].reduce(function(Ye,ne){return Ye[ne]="swal2-"+ne,Ye},{}),Ln="SweetAlert2:",Gn=function(ne){return ne.charAt(0).toUpperCase()+ne.slice(1)},Yn=function(ne){console.warn("".concat(Ln," ").concat("object"===Z(ne)?ne.join(" "):ne))},on=function(ne){console.error("".concat(Ln," ").concat(ne))},jt=[],V=function(ne,fe){!function(ne){jt.includes(ne)||(jt.push(ne),Yn(ne))}('"'.concat(ne,'" is deprecated and will be removed in the next major release. Please use "').concat(fe,'" instead.'))},Bi=function(ne){return"function"==typeof ne?ne():ne},$i=function(ne){return ne&&"function"==typeof ne.toPromise},en=function(ne){return $i(ne)?ne.toPromise():Promise.resolve(ne)},Xi=function(ne){return ne&&Promise.resolve(ne)===ne},Qi=function(){return document.body.querySelector(".".concat(di.container))},Pn=function(ne){var fe=Qi();return fe?fe.querySelector(ne):null},fn=function(ne){return Pn(".".concat(ne))},Ci=function(){return fn(di.popup)},En=function(){return fn(di.icon)},cn=function(){return fn(di.title)},br=function(){return fn(di["html-container"])},wi=function(){return fn(di.image)},Jn=function(){return fn(di["progress-steps"])},zn=function(){return fn(di["validation-message"])},On=function(){return Pn(".".concat(di.actions," .").concat(di.confirm))},sr=function(){return Pn(".".concat(di.actions," .").concat(di.cancel))},fr=function(){return Pn(".".concat(di.actions," .").concat(di.deny))},Nn=function(){return Pn(".".concat(di.loader))},_r=function(){return fn(di.actions)},ur=function(){return fn(di.footer)},mr=function(){return fn(di["timer-progress-bar"])},kr=function(){return fn(di.close)},Ze=function(){var ne=Ci();if(!ne)return[];var fe=ne.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),$e=Array.from(fe).sort(function(Hn,Pr){var Fr=parseInt(Hn.getAttribute("tabindex")||"0"),xs=parseInt(Pr.getAttribute("tabindex")||"0");return Fr>xs?1:Fr<xs?-1:0}),Kt=ne.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),an=Array.from(Kt).filter(function(Hn){return"-1"!==Hn.getAttribute("tabindex")});return ct(new Set($e.concat(an))).filter(function(Hn){return ei(Hn)})},Qe=function(){return Pt(document.body,di.shown)&&!Pt(document.body,di["toast-shown"])&&!Pt(document.body,di["no-backdrop"])},Mt=function(){var ne=Ci();return!!ne&&Pt(ne,di.toast)},Zt=function(ne,fe){if(ne.textContent="",fe){var Kt=(new DOMParser).parseFromString(fe,"text/html"),an=Kt.querySelector("head");an&&Array.from(an.childNodes).forEach(function(Pr){ne.appendChild(Pr)});var Hn=Kt.querySelector("body");Hn&&Array.from(Hn.childNodes).forEach(function(Pr){Pr instanceof HTMLVideoElement||Pr instanceof HTMLAudioElement?ne.appendChild(Pr.cloneNode(!0)):ne.appendChild(Pr)})}},Pt=function(ne,fe){if(!fe)return!1;for(var $e=fe.split(/\s+/),Kt=0;Kt<$e.length;Kt++)if(!ne.classList.contains($e[Kt]))return!1;return!0},ae=function(ne,fe,$e){if(function(ne,fe){Array.from(ne.classList).forEach(function($e){!Object.values(di).includes($e)&&!Object.values(_n).includes($e)&&!Object.values(fe.showClass||{}).includes($e)&&ne.classList.remove($e)})}(ne,fe),fe.customClass&&fe.customClass[$e]){if("string"!=typeof fe.customClass[$e]&&!fe.customClass[$e].forEach)return void Yn("Invalid type of customClass.".concat($e,'! Expected string or iterable object, got "').concat(Z(fe.customClass[$e]),'"'));$t(ne,fe.customClass[$e])}},Ne=function(ne,fe){if(!fe)return null;switch(fe){case"select":case"textarea":case"file":return ne.querySelector(".".concat(di.popup," > .").concat(di[fe]));case"checkbox":return ne.querySelector(".".concat(di.popup," > .").concat(di.checkbox," input"));case"radio":return ne.querySelector(".".concat(di.popup," > .").concat(di.radio," input:checked"))||ne.querySelector(".".concat(di.popup," > .").concat(di.radio," input:first-child"));case"range":return ne.querySelector(".".concat(di.popup," > .").concat(di.range," input"));default:return ne.querySelector(".".concat(di.popup," > .").concat(di.input))}},et=function(ne){if(ne.focus(),"file"!==ne.type){var fe=ne.value;ne.value="",ne.value=fe}},Vt=function(ne,fe,$e){!ne||!fe||("string"==typeof fe&&(fe=fe.split(/\s+/).filter(Boolean)),fe.forEach(function(Kt){Array.isArray(ne)?ne.forEach(function(an){$e?an.classList.add(Kt):an.classList.remove(Kt)}):$e?ne.classList.add(Kt):ne.classList.remove(Kt)}))},$t=function(ne,fe){Vt(ne,fe,!0)},Hi=function(ne,fe){Vt(ne,fe,!1)},wt=function(ne,fe){for(var $e=Array.from(ne.children),Kt=0;Kt<$e.length;Kt++){var an=$e[Kt];if(an instanceof HTMLElement&&Pt(an,fe))return an}},At=function(ne,fe,$e){$e==="".concat(parseInt($e))&&($e=parseInt($e)),$e||0===parseInt($e)?ne.style.setProperty(fe,"number"==typeof $e?"".concat($e,"px"):$e):ne.style.removeProperty(fe)},st=function(ne){ne&&(ne.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},ot=function(ne){ne&&(ne.style.display="none")},qe=function(ne){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";ne&&new MutationObserver(function(){It(ne,ne.innerHTML,fe)}).observe(ne,{childList:!0,subtree:!0})},nt=function(ne,fe,$e,Kt){var an=ne.querySelector(fe);an&&an.style.setProperty($e,Kt)},It=function(ne,fe){fe?st(ne,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ot(ne)},ei=function(ne){return!(!ne||!(ne.offsetWidth||ne.offsetHeight||ne.getClientRects().length))},Ei=function(ne){return ne.scrollHeight>ne.clientHeight},Ki=function(ne){var fe=window.getComputedStyle(ne),$e=parseFloat(fe.getPropertyValue("animation-duration")||"0"),Kt=parseFloat(fe.getPropertyValue("transition-duration")||"0");return $e>0||Kt>0},Ct=function(ne){var fe=arguments.length>1&&void 0!==arguments[1]&&arguments[1],$e=mr();$e&&ei($e)&&(fe&&($e.style.transition="none",$e.style.width="100%"),setTimeout(function(){$e.style.transition="width ".concat(ne/1e3,"s linear"),$e.style.width="0%"},10))},xe=function(){return typeof window>"u"||typeof document>"u"},bt='\n <div aria-labelledby="'.concat(di.title,'" aria-describedby="').concat(di["html-container"],'" class="').concat(di.popup,'" tabindex="-1">\n   <button type="button" class="').concat(di.close,'"></button>\n   <ul class="').concat(di["progress-steps"],'"></ul>\n   <div class="').concat(di.icon,'"></div>\n   <img class="').concat(di.image,'" />\n   <h2 class="').concat(di.title,'" id="').concat(di.title,'"></h2>\n   <div class="').concat(di["html-container"],'" id="').concat(di["html-container"],'"></div>\n   <input class="').concat(di.input,'" id="').concat(di.input,'" />\n   <input type="file" class="').concat(di.file,'" />\n   <div class="').concat(di.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(di.select,'" id="').concat(di.select,'"></select>\n   <div class="').concat(di.radio,'"></div>\n   <label class="').concat(di.checkbox,'">\n     <input type="checkbox" id="').concat(di.checkbox,'" />\n     <span class="').concat(di.label,'"></span>\n   </label>\n   <textarea class="').concat(di.textarea,'" id="').concat(di.textarea,'"></textarea>\n   <div class="').concat(di["validation-message"],'" id="').concat(di["validation-message"],'"></div>\n   <div class="').concat(di.actions,'">\n     <div class="').concat(di.loader,'"></div>\n     <button type="button" class="').concat(di.confirm,'"></button>\n     <button type="button" class="').concat(di.deny,'"></button>\n     <button type="button" class="').concat(di.cancel,'"></button>\n   </div>\n   <div class="').concat(di.footer,'"></div>\n   <div class="').concat(di["timer-progress-bar-container"],'">\n     <div class="').concat(di["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Xe=function(){Zi.currentInstance.resetValidationMessage()},d=function(ne){var fe=function(){var ne=Qi();return!!ne&&(ne.remove(),Hi([document.documentElement,document.body],[di["no-backdrop"],di["toast-shown"],di["has-column"]]),!0)}();if(xe())on("SweetAlert2 requires document to initialize");else{var $e=document.createElement("div");$e.className=di.container,fe&&$t($e,di["no-transition"]),Zt($e,bt);var Kt=function(ne){return"string"==typeof ne?document.querySelector(ne):ne}(ne.target);Kt.appendChild($e),function(ne){var fe=Ci();fe.setAttribute("role",ne.toast?"alert":"dialog"),fe.setAttribute("aria-live",ne.toast?"polite":"assertive"),ne.toast||fe.setAttribute("aria-modal","true")}(ne),function(ne){"rtl"===window.getComputedStyle(ne).direction&&$t(Qi(),di.rtl)}(Kt),function(){var ne=Ci(),fe=wt(ne,di.input),$e=wt(ne,di.file),Kt=ne.querySelector(".".concat(di.range," input")),an=ne.querySelector(".".concat(di.range," output")),Hn=wt(ne,di.select),Pr=ne.querySelector(".".concat(di.checkbox," input")),Fr=wt(ne,di.textarea);fe.oninput=Xe,$e.onchange=Xe,Hn.onchange=Xe,Pr.onchange=Xe,Fr.oninput=Xe,Kt.oninput=function(){Xe(),an.value=Kt.value},Kt.onchange=function(){Xe(),an.value=Kt.value}}()}},g=function(ne,fe){ne instanceof HTMLElement?fe.appendChild(ne):"object"===Z(ne)?x(ne,fe):ne&&Zt(fe,ne)},x=function(ne,fe){ne.jquery?w(fe,ne):Zt(fe,ne.toString())},w=function(ne,fe){if(ne.textContent="",0 in fe)for(var $e=0;$e in fe;$e++)ne.appendChild(fe[$e].cloneNode(!0));else ne.appendChild(fe.cloneNode(!0))},I=function(){if(xe())return!1;var Ye=document.createElement("div");return typeof Ye.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof Ye.style.animation<"u"&&"animationend"}(),R=function(ne,fe){var $e=_r(),Kt=Nn();!$e||!Kt||(fe.showConfirmButton||fe.showDenyButton||fe.showCancelButton?st($e):ot($e),ae($e,fe,"actions"),function Y(Ye,ne,fe){var $e=On(),Kt=fr(),an=sr();!$e||!Kt||!an||(X($e,"confirm",fe),X(Kt,"deny",fe),X(an,"cancel",fe),function W(Ye,ne,fe,$e){$e.buttonsStyling?($t([Ye,ne,fe],di.styled),$e.confirmButtonColor&&(Ye.style.backgroundColor=$e.confirmButtonColor,$t(Ye,di["default-outline"])),$e.denyButtonColor&&(ne.style.backgroundColor=$e.denyButtonColor,$t(ne,di["default-outline"])),$e.cancelButtonColor&&(fe.style.backgroundColor=$e.cancelButtonColor,$t(fe,di["default-outline"]))):Hi([Ye,ne,fe],di.styled)}($e,Kt,an,fe),fe.reverseButtons&&(fe.toast?(Ye.insertBefore(an,$e),Ye.insertBefore(Kt,$e)):(Ye.insertBefore(an,ne),Ye.insertBefore(Kt,ne),Ye.insertBefore($e,ne))))}($e,Kt,fe),Zt(Kt,fe.loaderHtml||""),ae(Kt,fe,"loader"))};function X(Ye,ne,fe){var $e=Gn(ne);It(Ye,fe["show".concat($e,"Button")],"inline-block"),Zt(Ye,fe["".concat(ne,"ButtonText")]||""),Ye.setAttribute("aria-label",fe["".concat(ne,"ButtonAriaLabel")]||""),Ye.className=di[ne],ae(Ye,fe,"".concat(ne,"Button"))}var ce=function(ne,fe){var $e=Qi();$e&&(function me(Ye,ne){"string"==typeof ne?Ye.style.background=ne:ne||$t([document.documentElement,document.body],di["no-backdrop"])}($e,fe.backdrop),function Ee(Ye,ne){ne&&(ne in di?$t(Ye,di[ne]):(Yn('The "position" parameter is not valid, defaulting to "center"'),$t(Ye,di.center)))}($e,fe.position),function De(Ye,ne){ne&&$t(Ye,di["grow-".concat(ne)])}($e,fe.grow),ae($e,fe,"container"))};var Ce={innerParams:new WeakMap,domCache:new WeakMap},Re=["input","file","range","select","radio","checkbox","textarea"],re=function(ne){if(ne.input){if(!hi[ne.input])return void on("Unexpected type of input! Expected ".concat(Object.keys(hi).join(" | "),', got "').concat(ne.input,'"'));var fe=yt(ne.input),$e=hi[ne.input](fe,ne);st(fe),ne.inputAutoFocus&&setTimeout(function(){et($e)})}},oe=function(ne,fe){var $e=Ne(Ci(),ne);if($e)for(var Kt in function(ne){for(var fe=0;fe<ne.attributes.length;fe++){var $e=ne.attributes[fe].name;["id","type","value","style"].includes($e)||ne.removeAttribute($e)}}($e),fe)$e.setAttribute(Kt,fe[Kt])},ye=function(ne){var fe=yt(ne.input);"object"===Z(ne.customClass)&&$t(fe,ne.customClass.input)},Fe=function(ne,fe){(!ne.placeholder||fe.inputPlaceholder)&&(ne.placeholder=fe.inputPlaceholder)},ht=function(ne,fe,$e){if($e.inputLabel){var Kt=document.createElement("label"),an=di["input-label"];Kt.setAttribute("for",ne.id),Kt.className=an,"object"===Z($e.customClass)&&$t(Kt,$e.customClass.inputLabel),Kt.innerText=$e.inputLabel,fe.insertAdjacentElement("beforebegin",Kt)}},yt=function(ne){return wt(Ci(),di[ne]||di.input)},ii=function(ne,fe){["string","number"].includes(Z(fe))?ne.value="".concat(fe):Xi(fe)||Yn('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Z(fe),'"'))},hi={};hi.text=hi.email=hi.password=hi.number=hi.tel=hi.url=hi.search=hi.date=hi["datetime-local"]=hi.time=hi.week=hi.month=function(Ye,ne){return ii(Ye,ne.inputValue),ht(Ye,Ye,ne),Fe(Ye,ne),Ye.type=ne.input,Ye},hi.file=function(Ye,ne){return ht(Ye,Ye,ne),Fe(Ye,ne),Ye},hi.range=function(Ye,ne){var fe=Ye.querySelector("input"),$e=Ye.querySelector("output");return ii(fe,ne.inputValue),fe.type=ne.input,ii($e,ne.inputValue),ht(fe,Ye,ne),Ye},hi.select=function(Ye,ne){if(Ye.textContent="",ne.inputPlaceholder){var fe=document.createElement("option");Zt(fe,ne.inputPlaceholder),fe.value="",fe.disabled=!0,fe.selected=!0,Ye.appendChild(fe)}return ht(Ye,Ye,ne),Ye},hi.radio=function(Ye){return Ye.textContent="",Ye},hi.checkbox=function(Ye,ne){var fe=Ne(Ci(),"checkbox");fe.value="1",fe.checked=!!ne.inputValue;var $e=Ye.querySelector("span");return Zt($e,ne.inputPlaceholder),fe},hi.textarea=function(Ye,ne){ii(Ye,ne.inputValue),Fe(Ye,ne),ht(Ye,Ye,ne);return setTimeout(function(){if("MutationObserver"in window){var $e=parseInt(window.getComputedStyle(Ci()).width);new MutationObserver(function(){if(document.body.contains(Ye)){var Hn=Ye.offsetWidth+(Kt=Ye,parseInt(window.getComputedStyle(Kt).marginLeft)+parseInt(window.getComputedStyle(Kt).marginRight));Hn>$e?Ci().style.width="".concat(Hn,"px"):At(Ci(),"width",ne.width)}var Kt}).observe(Ye,{attributes:!0,attributeFilter:["style"]})}}),Ye};var xi=function(ne,fe){var $e=br();$e&&(qe($e),ae($e,fe,"htmlContainer"),fe.html?(g(fe.html,$e),st($e,"block")):fe.text?($e.textContent=fe.text,st($e,"block")):ot($e),function(ne,fe){var $e=Ci();if($e){var Kt=Ce.innerParams.get(ne),an=!Kt||fe.input!==Kt.input;Re.forEach(function(Hn){var Pr=wt($e,di[Hn]);Pr&&(oe(Hn,fe.inputAttributes),Pr.className=di[Hn],an&&ot(Pr))}),fe.input&&(an&&re(fe),ye(fe))}}(ne,fe))},Tn=function(ne,fe){for(var $e=0,Kt=Object.entries(_n);$e<Kt.length;$e++){var an=ze(Kt[$e],2);fe.icon!==an[0]&&Hi(ne,an[1])}$t(ne,fe.icon&&_n[fe.icon]),Rr(ne,fe),Xn(),ae(ne,fe,"icon")},Xn=function(){var ne=Ci();if(ne)for(var fe=window.getComputedStyle(ne).getPropertyValue("background-color"),$e=ne.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Kt=0;Kt<$e.length;Kt++)$e[Kt].style.backgroundColor=fe},xr=function(ne,fe){if(fe.icon||fe.iconHtml){var $e=ne.innerHTML,Kt="";fe.iconHtml?Kt=Br(fe.iconHtml):"success"===fe.icon?(Kt='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',$e=$e.replace(/ style=".*?"/g,"")):"error"===fe.icon?Kt='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':fe.icon&&(Kt=Br({question:"?",warning:"!",info:"i"}[fe.icon])),$e.trim()!==Kt.trim()&&Zt(ne,Kt)}},Rr=function(ne,fe){if(fe.iconColor){ne.style.color=fe.iconColor,ne.style.borderColor=fe.iconColor;for(var $e=0,Kt=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];$e<Kt.length;$e++)nt(ne,Kt[$e],"background-color",fe.iconColor);nt(ne,".swal2-success-ring","border-color",fe.iconColor)}},Br=function(ne){return'<div class="'.concat(di["icon-content"],'">').concat(ne,"</div>")},Ur=function(ne,fe){var $e=fe.showClass||{};ne.className="".concat(di.popup," ").concat(ei(ne)?$e.popup:""),fe.toast?($t([document.documentElement,document.body],di["toast-shown"]),$t(ne,di.toast)):$t(ne,di.modal),ae(ne,fe,"popup"),"string"==typeof fe.customClass&&$t(ne,fe.customClass),fe.icon&&$t(ne,di["icon-".concat(fe.icon)])},Ar=function(ne){var fe=document.createElement("li");return $t(fe,di["progress-step"]),Zt(fe,ne),fe},pa=function(ne){var fe=document.createElement("li");return $t(fe,di["progress-step-line"]),ne.progressStepsDistance&&At(fe,"width",ne.progressStepsDistance),fe},nr=function(ne,fe){(function(ne,fe){var $e=Qi(),Kt=Ci();if($e&&Kt){if(fe.toast){At($e,"width",fe.width),Kt.style.width="100%";var an=Nn();an&&Kt.insertBefore(an,En())}else At(Kt,"width",fe.width);At(Kt,"padding",fe.padding),fe.color&&(Kt.style.color=fe.color),fe.background&&(Kt.style.background=fe.background),ot(zn()),Ur(Kt,fe)}})(0,fe),ce(0,fe),function(ne,fe){var $e=Jn();if($e){var Kt=fe.progressSteps,an=fe.currentProgressStep;if(!Kt||0===Kt.length||void 0===an)return void ot($e);st($e),$e.textContent="",an>=Kt.length&&Yn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Kt.forEach(function(Hn,Pr){var Fr=Ar(Hn);if($e.appendChild(Fr),Pr===an&&$t(Fr,di["active-progress-step"]),Pr!==Kt.length-1){var xs=pa(fe);$e.appendChild(xs)}})}}(0,fe),function(ne,fe){var $e=Ce.innerParams.get(ne),Kt=En();if(Kt){if($e&&fe.icon===$e.icon)return xr(Kt,fe),void Tn(Kt,fe);if(!fe.icon&&!fe.iconHtml)return void ot(Kt);if(fe.icon&&-1===Object.keys(_n).indexOf(fe.icon))return on('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(fe.icon,'"')),void ot(Kt);st(Kt),xr(Kt,fe),Tn(Kt,fe),$t(Kt,fe.showClass&&fe.showClass.icon)}}(ne,fe),function(ne,fe){var $e=wi();if($e){if(!fe.imageUrl)return void ot($e);st($e,""),$e.setAttribute("src",fe.imageUrl),$e.setAttribute("alt",fe.imageAlt||""),At($e,"width",fe.imageWidth),At($e,"height",fe.imageHeight),$e.className=di.image,ae($e,fe,"image")}}(0,fe),function(ne,fe){var $e=cn();$e&&(qe($e),It($e,fe.title||fe.titleText,"block"),fe.title&&g(fe.title,$e),fe.titleText&&($e.innerText=fe.titleText),ae($e,fe,"title"))}(0,fe),function(ne,fe){var $e=kr();$e&&(Zt($e,fe.closeButtonHtml||""),ae($e,fe,"closeButton"),It($e,fe.showCloseButton),$e.setAttribute("aria-label",fe.closeButtonAriaLabel||""))}(0,fe),xi(ne,fe),R(0,fe),function(ne,fe){var $e=ur();$e&&(qe($e),It($e,fe.footer,"block"),fe.footer&&g(fe.footer,$e),ae($e,fe,"footer"))}(0,fe);var $e=Ci();"function"==typeof fe.didRender&&$e&&fe.didRender($e)},cl=function(){var ne;return null===(ne=On())||void 0===ne?void 0:ne.click()},Fs=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),yr=function(ne){ne.keydownTarget&&ne.keydownHandlerAdded&&(ne.keydownTarget.removeEventListener("keydown",ne.keydownHandler,{capture:ne.keydownListenerCapture}),ne.keydownHandlerAdded=!1)},bs=function(ne,fe){var $e,Kt=Ze();if(Kt.length)return(ne+=fe)===Kt.length?ne=0:-1===ne&&(ne=Kt.length-1),void Kt[ne].focus();null===($e=Ci())||void 0===$e||$e.focus()},dl=["ArrowRight","ArrowDown"],Da=["ArrowLeft","ArrowUp"],Wl=function(ne,fe,$e){ne&&(fe.isComposing||229===fe.keyCode||(ne.stopKeydownPropagation&&fe.stopPropagation(),"Enter"===fe.key?Xa(fe,ne):"Tab"===fe.key?wr(fe):[].concat(dl,Da).includes(fe.key)?Pl(fe.key):"Escape"===fe.key&&Us(fe,ne,$e)))},Xa=function(ne,fe){if(Bi(fe.allowEnterKey)){var $e=Ne(Ci(),fe.input);if(ne.target&&$e&&ne.target instanceof HTMLElement&&ne.target.outerHTML===$e.outerHTML){if(["textarea","file"].includes(fe.input))return;cl(),ne.preventDefault()}}},wr=function(ne){for(var fe=ne.target,$e=Ze(),Kt=-1,an=0;an<$e.length;an++)if(fe===$e[an]){Kt=an;break}bs(Kt,ne.shiftKey?-1:1),ne.stopPropagation(),ne.preventDefault()},Pl=function(ne){var fe=_r(),$e=On(),Kt=fr(),an=sr();if(fe&&$e&&Kt&&an&&(!(document.activeElement instanceof HTMLElement)||[$e,Kt,an].includes(document.activeElement))){var Pr=dl.includes(ne)?"nextElementSibling":"previousElementSibling",Fr=document.activeElement;if(Fr){for(var xs=0;xs<fe.children.length;xs++){if(!(Fr=Fr[Pr]))return;if(Fr instanceof HTMLButtonElement&&ei(Fr))break}Fr instanceof HTMLButtonElement&&Fr.focus()}}},Us=function(ne,fe,$e){Bi(fe.allowEscapeKey)&&(ne.preventDefault(),$e(Fs.esc))},Ds={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Vo=function(){Array.from(document.body.children).forEach(function(fe){fe.hasAttribute("data-previous-aria-hidden")?(fe.setAttribute("aria-hidden",fe.getAttribute("data-previous-aria-hidden")||""),fe.removeAttribute("data-previous-aria-hidden")):fe.removeAttribute("aria-hidden")})},ma=typeof window<"u"&&!!window.GestureEvent,Zo=function(){var fe,ne=Qi();ne&&(ne.ontouchstart=function($e){fe=Ho($e)},ne.ontouchmove=function($e){fe&&($e.preventDefault(),$e.stopPropagation())})},Ho=function(ne){var fe=ne.target,$e=Qi(),Kt=br();return!(!$e||!Kt||Za(ne)||Ao(ne)||fe!==$e&&(Ei($e)||!(fe instanceof HTMLElement)||"INPUT"===fe.tagName||"TEXTAREA"===fe.tagName||Ei(Kt)&&Kt.contains(fe)))},Za=function(ne){return ne.touches&&ne.touches.length&&"stylus"===ne.touches[0].touchType},Ao=function(ne){return ne.touches&&ne.touches.length>1},Mr=null,oc=function(ne){null===Mr&&(document.body.scrollHeight>window.innerHeight||"scroll"===ne)&&(Mr=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Mr+function(){var ne=document.createElement("div");ne.className=di["scrollbar-measure"],document.body.appendChild(ne);var fe=ne.getBoundingClientRect().width-ne.clientWidth;return document.body.removeChild(ne),fe}(),"px"))};function Ko(Ye,ne,fe,$e){Mt()?ul(Ye,$e):(ji(fe).then(function(){return ul(Ye,$e)}),yr(Zi)),ma?(ne.setAttribute("style","display:none !important"),ne.removeAttribute("class"),ne.innerHTML=""):ne.remove(),Qe()&&(null!==Mr&&(document.body.style.paddingRight="".concat(Mr,"px"),Mr=null),function(){if(Pt(document.body,di.iosfix)){var ne=parseInt(document.body.style.top,10);Hi(document.body,di.iosfix),document.body.style.top="",document.body.scrollTop=-1*ne}}(),Vo()),function zl(){Hi([document.documentElement,document.body],[di.shown,di["height-auto"],di["no-backdrop"],di["toast-shown"]])}()}function Do(Ye){Ye=Jo(Ye);var ne=Ds.swalPromiseResolve.get(this),fe=is(this);this.isAwaitingPromise?Ye.isDismissed||(ao(this),ne(Ye)):fe&&ne(Ye)}var is=function(ne){var fe=Ci();if(!fe)return!1;var $e=Ce.innerParams.get(ne);if(!$e||Pt(fe,$e.hideClass.popup))return!1;Hi(fe,$e.showClass.popup),$t(fe,$e.hideClass.popup);var Kt=Qi();return Hi(Kt,$e.showClass.backdrop),$t(Kt,$e.hideClass.backdrop),lo(ne,fe,$e),!0};function Ro(Ye){var ne=Ds.swalPromiseReject.get(this);ao(this),ne&&ne(Ye)}var ao=function(ne){ne.isAwaitingPromise&&(delete ne.isAwaitingPromise,Ce.innerParams.get(ne)||ne._destroy())},Jo=function(ne){return typeof ne>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},ne)},lo=function(ne,fe,$e){var Kt=Qi(),an=I&&Ki(fe);"function"==typeof $e.willClose&&$e.willClose(fe),an?Xr(ne,fe,Kt,$e.returnFocus,$e.didClose):Ko(ne,Kt,$e.returnFocus,$e.didClose)},Xr=function(ne,fe,$e,Kt,an){I&&(Zi.swalCloseEventFinishedCallback=Ko.bind(null,ne,$e,Kt,an),fe.addEventListener(I,function(Hn){Hn.target===fe&&(Zi.swalCloseEventFinishedCallback(),delete Zi.swalCloseEventFinishedCallback)}))},ul=function(ne,fe){setTimeout(function(){"function"==typeof fe&&fe.bind(ne.params)(),ne._destroy&&ne._destroy()})},Rs=function(ne){var fe=Ci();if(fe||new sl,fe=Ci()){var $e=Nn();Mt()?ot(En()):Ra(fe,ne),st($e),fe.setAttribute("data-loading","true"),fe.setAttribute("aria-busy","true"),fe.focus()}},Ra=function(ne,fe){var $e=_r(),Kt=Nn();!$e||!Kt||(!fe&&ei(On())&&(fe=On()),st($e),fe&&(ot(fe),Kt.setAttribute("data-button-to-replace",fe.className),$e.insertBefore(Kt,fe)),$t([ne,$e],di.loading))},kl=function(ne){return ne.checked?1:0},_o=function(ne){return ne.checked?ne.value:null},Jr=function(ne){return ne.files&&ne.files.length?null!==ne.getAttribute("multiple")?ne.files:ne.files[0]:null},Cr=function(ne,fe){var $e=Ci();if($e){var Kt=function(Hn){"select"===fe.input?function Qo(Ye,ne,fe){var $e=wt(Ye,di.select);if($e){var Kt=function(Hn,Pr,Fr){var xs=document.createElement("option");xs.value=Fr,Zt(xs,Pr),xs.selected=gs(Fr,fe.inputValue),Hn.appendChild(xs)};ne.forEach(function(an){var Hn=an[0],Pr=an[1];if(Array.isArray(Pr)){var Fr=document.createElement("optgroup");Fr.label=Hn,Fr.disabled=!1,$e.appendChild(Fr),Pr.forEach(function(xs){return Kt(Fr,xs[1],xs[0])})}else Kt($e,Pr,Hn)}),$e.focus()}}($e,hl(Hn),fe):"radio"===fe.input&&function Ts(Ye,ne,fe){var $e=wt(Ye,di.radio);if($e){ne.forEach(function(an){var Hn=an[0],Pr=an[1],Fr=document.createElement("input"),xs=document.createElement("label");Fr.type="radio",Fr.name=di.radio,Fr.value=Hn,gs(Hn,fe.inputValue)&&(Fr.checked=!0);var Ns=document.createElement("span");Zt(Ns,Pr),Ns.className=di.label,xs.appendChild(Fr),xs.appendChild(Ns),$e.appendChild(xs)});var Kt=$e.querySelectorAll("input");Kt.length&&Kt[0].focus()}}($e,hl(Hn),fe)};$i(fe.inputOptions)||Xi(fe.inputOptions)?(Rs(On()),en(fe.inputOptions).then(function(an){ne.hideLoading(),Kt(an)})):"object"===Z(fe.inputOptions)?Kt(fe.inputOptions):on("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Z(fe.inputOptions)))}},eo=function(ne,fe){var $e=ne.getInput();$e&&(ot($e),en(fe.inputValue).then(function(Kt){$e.value="".concat("number"===fe.input?parseFloat(Kt)||0:Kt),st($e),$e.focus(),ne.hideLoading()}).catch(function(Kt){on("Error in inputValue promise: ".concat(Kt)),$e.value="",st($e),$e.focus(),ne.hideLoading()}))};var hl=function Ye(ne){var fe=[];return ne instanceof Map?ne.forEach(function($e,Kt){var an=$e;"object"===Z(an)&&(an=Ye(an)),fe.push([Kt,an])}):Object.keys(ne).forEach(function($e){var Kt=ne[$e];"object"===Z(Kt)&&(Kt=Ye(Kt)),fe.push([$e,Kt])}),fe},gs=function(ne,fe){return!!fe&&fe.toString()===ne.toString()},Ys=void 0,jo=function(ne,fe){var $e=Ce.innerParams.get(ne);if($e.input){var Kt=ne.getInput(),an=function(ne,fe){var $e=ne.getInput();if(!$e)return null;switch(fe.input){case"checkbox":return kl($e);case"radio":return _o($e);case"file":return Jr($e);default:return fe.inputAutoTrim?$e.value.trim():$e.value}}(ne,$e);$e.inputValidator?ac(ne,an,fe):Kt&&!Kt.checkValidity()?(ne.enableButtons(),ne.showValidationMessage($e.validationMessage||Kt.validationMessage)):"deny"===fe?to(ne,an):La(ne,an)}else on('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Gn(fe)))},ac=function(ne,fe,$e){var Kt=Ce.innerParams.get(ne);ne.disableInput(),Promise.resolve().then(function(){return en(Kt.inputValidator(fe,Kt.validationMessage))}).then(function(Hn){ne.enableButtons(),ne.enableInput(),Hn?ne.showValidationMessage(Hn):"deny"===$e?to(ne,fe):La(ne,fe)})},to=function(ne,fe){var $e=Ce.innerParams.get(ne||Ys);$e.showLoaderOnDeny&&Rs(fr()),$e.preDeny?(ne.isAwaitingPromise=!0,Promise.resolve().then(function(){return en($e.preDeny(fe,$e.validationMessage))}).then(function(an){!1===an?(ne.hideLoading(),ao(ne)):ne.close({isDenied:!0,value:typeof an>"u"?fe:an})}).catch(function(an){return ea(ne||Ys,an)})):ne.close({isDenied:!0,value:fe})},Eo=function(ne,fe){ne.close({isConfirmed:!0,value:fe})},ea=function(ne,fe){ne.rejectPromise(fe)},La=function(ne,fe){var $e=Ce.innerParams.get(ne||Ys);$e.showLoaderOnConfirm&&Rs(),$e.preConfirm?(ne.resetValidationMessage(),ne.isAwaitingPromise=!0,Promise.resolve().then(function(){return en($e.preConfirm(fe,$e.validationMessage))}).then(function(an){ei(zn())||!1===an?(ne.hideLoading(),ao(ne)):Eo(ne,typeof an>"u"?fe:an)}).catch(function(an){return ea(ne||Ys,an)})):Eo(ne,fe)};function Pa(){var Ye=Ce.innerParams.get(this);if(Ye){var ne=Ce.domCache.get(this);ot(ne.loader),Mt()?Ye.icon&&st(En()):Ka(ne),Hi([ne.popup,ne.actions],di.loading),ne.popup.removeAttribute("aria-busy"),ne.popup.removeAttribute("data-loading"),ne.confirmButton.disabled=!1,ne.denyButton.disabled=!1,ne.cancelButton.disabled=!1}}var Ka=function(ne){var fe=ne.popup.getElementsByClassName(ne.loader.getAttribute("data-button-to-replace"));fe.length?st(fe[0],"inline-block"):!ei(On())&&!ei(fr())&&!ei(sr())&&ot(ne.actions)};function Uo(){var Ye=Ce.innerParams.get(this),ne=Ce.domCache.get(this);return ne?Ne(ne.popup,Ye.input):null}function Tl(Ye,ne,fe){var $e=Ce.domCache.get(Ye);ne.forEach(function(Kt){$e[Kt].disabled=fe})}function ks(Ye,ne){var fe=Ci();if(fe&&Ye)if("radio"===Ye.type)for(var $e=fe.querySelectorAll('[name="'.concat(di.radio,'"]')),Kt=0;Kt<$e.length;Kt++)$e[Kt].disabled=ne;else Ye.disabled=ne}function ga(){Tl(this,["confirmButton","denyButton","cancelButton"],!1)}function vo(){Tl(this,["confirmButton","denyButton","cancelButton"],!0)}function Ja(){ks(this.getInput(),!1)}function pl(){ks(this.getInput(),!0)}function yo(Ye){var ne=Ce.domCache.get(this),fe=Ce.innerParams.get(this);Zt(ne.validationMessage,Ye),ne.validationMessage.className=di["validation-message"],fe.customClass&&fe.customClass.validationMessage&&$t(ne.validationMessage,fe.customClass.validationMessage),st(ne.validationMessage);var $e=this.getInput();$e&&($e.setAttribute("aria-invalid","true"),$e.setAttribute("aria-describedby",di["validation-message"]),et($e),$t($e,di.inputerror))}function ql(){var Ye=Ce.domCache.get(this);Ye.validationMessage&&ot(Ye.validationMessage);var ne=this.getInput();ne&&(ne.removeAttribute("aria-invalid"),ne.removeAttribute("aria-describedby"),Hi(ne,di.inputerror))}var So={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},lc=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Wo={},za=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],co=function(ne){return Object.prototype.hasOwnProperty.call(So,ne)},Qa=function(ne){return-1!==lc.indexOf(ne)},Ls=function(ne){return Wo[ne]},el=function(ne){co(ne)||Yn('Unknown parameter "'.concat(ne,'"'))},ta=function(ne){za.includes(ne)&&Yn('The parameter "'.concat(ne,'" is incompatible with toasts'))},bo=function(ne){var fe=Ls(ne);fe&&V(ne,fe)};function Ya(Ye){var ne=Ci(),fe=Ce.innerParams.get(this);if(ne&&!Pt(ne,fe.hideClass.popup)){var $e=fl(Ye),Kt=Object.assign({},fe,$e);nr(this,Kt),Ce.innerParams.set(this,Kt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Ye),writable:!1,enumerable:!0}})}else Yn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var fl=function(ne){var fe={};return Object.keys(ne).forEach(function($e){Qa($e)?fe[$e]=ne[$e]:Yn("Invalid parameter to update: ".concat($e))}),fe};function Il(){var Ye=Ce.domCache.get(this),ne=Ce.innerParams.get(this);ne?(Ye.popup&&Zi.swalCloseEventFinishedCallback&&(Zi.swalCloseEventFinishedCallback(),delete Zi.swalCloseEventFinishedCallback),"function"==typeof ne.didDestroy&&ne.didDestroy(),ia(this)):Xl(this)}var ia=function(ne){Xl(ne),delete ne.params,delete Zi.keydownHandler,delete Zi.keydownTarget,delete Zi.currentInstance},Xl=function(ne){ne.isAwaitingPromise?(ml(Ce,ne),ne.isAwaitingPromise=!0):(ml(Ds,ne),ml(Ce,ne),delete ne.isAwaitingPromise,delete ne.disableButtons,delete ne.enableButtons,delete ne.getInput,delete ne.disableInput,delete ne.enableInput,delete ne.hideLoading,delete ne.disableLoading,delete ne.showValidationMessage,delete ne.resetValidationMessage,delete ne.close,delete ne.closePopup,delete ne.closeModal,delete ne.closeToast,delete ne.rejectPromise,delete ne.update,delete ne._destroy)},ml=function(ne,fe){for(var $e in ne)ne[$e].delete(fe)},Lo=Object.freeze({__proto__:null,_destroy:Il,close:Do,closeModal:Do,closePopup:Do,closeToast:Do,disableButtons:vo,disableInput:pl,disableLoading:Pa,enableButtons:ga,enableInput:Ja,getInput:Uo,handleAwaitingPromise:ao,hideLoading:Pa,rejectPromise:Ro,resetValidationMessage:ql,showValidationMessage:yo,update:Ya}),tl=function(ne,fe,$e){fe.popup.onclick=function(){ne&&(Is(ne)||ne.timer||ne.input)||$e(Fs.close)}},Is=function(ne){return!!(ne.showConfirmButton||ne.showDenyButton||ne.showCancelButton||ne.showCloseButton)},xo=!1,il=function(ne){ne.popup.onmousedown=function(){ne.container.onmouseup=function(fe){ne.container.onmouseup=function(){},fe.target===ne.container&&(xo=!0)}}},gl=function(ne){ne.container.onmousedown=function(){ne.popup.onmouseup=function(fe){ne.popup.onmouseup=function(){},(fe.target===ne.popup||fe.target instanceof HTMLElement&&ne.popup.contains(fe.target))&&(xo=!0)}}},Po=function(ne,fe,$e){fe.container.onclick=function(Kt){xo?xo=!1:Kt.target===fe.container&&Bi(ne.allowOutsideClick)&&$e(Fs.backdrop)}},Ba=function(ne){return ne instanceof Element||function(ne){return"object"===Z(ne)&&ne.jquery}(ne)};var qs=function(){if(Zi.timeout)return function(){var ne=mr();if(ne){var fe=parseInt(window.getComputedStyle(ne).width);ne.style.removeProperty("transition"),ne.style.width="100%";var $e=parseInt(window.getComputedStyle(ne).width);ne.style.width="".concat(fe/$e*100,"%")}}(),Zi.timeout.stop()},qo=function(){if(Zi.timeout){var ne=Zi.timeout.start();return Ct(ne),ne}},_a=!1,na={};var zo=function(ne){for(var fe=ne.target;fe&&fe!==document;fe=fe.parentNode)for(var $e in na){var Kt=fe.getAttribute($e);if(Kt)return void na[$e].fire({template:Kt})}},vl=Object.freeze({__proto__:null,argsToParams:function(ne){var fe={};return"object"!==Z(ne[0])||Ba(ne[0])?["title","html","icon"].forEach(function($e,Kt){var an=ne[Kt];"string"==typeof an||Ba(an)?fe[$e]=an:void 0!==an&&on("Unexpected type of ".concat($e,'! Expected "string" or "Element", got ').concat(Z(an)))}):Object.assign(fe,ne[0]),fe},bindClickHandler:function ra(){na[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,_a||(document.body.addEventListener("click",zo),_a=!0)},clickCancel:function(){var ne;return null===(ne=sr())||void 0===ne?void 0:ne.click()},clickConfirm:cl,clickDeny:function(){var ne;return null===(ne=fr())||void 0===ne?void 0:ne.click()},enableLoading:Rs,fire:function uo(){for(var ne=arguments.length,fe=new Array(ne),$e=0;$e<ne;$e++)fe[$e]=arguments[$e];return function Et(Ye,ne,fe){if(e())return Reflect.construct.apply(null,arguments);var $e=[null];$e.push.apply($e,ne);var Kt=new(Ye.bind.apply(Ye,$e));return fe&&Ve(Kt,fe.prototype),Kt}(this,fe)},getActions:_r,getCancelButton:sr,getCloseButton:kr,getConfirmButton:On,getContainer:Qi,getDenyButton:fr,getFocusableElements:Ze,getFooter:ur,getHtmlContainer:br,getIcon:En,getIconContent:function(){return fn(di["icon-content"])},getImage:wi,getInputLabel:function(){return fn(di["input-label"])},getLoader:Nn,getPopup:Ci,getProgressSteps:Jn,getTimerLeft:function(){return Zi.timeout&&Zi.timeout.getTimerLeft()},getTimerProgressBar:mr,getTitle:cn,getValidationMessage:zn,increaseTimer:function(ne){if(Zi.timeout){var fe=Zi.timeout.increase(ne);return Ct(fe,!0),fe}},isDeprecatedParameter:Ls,isLoading:function(){var ne=Ci();return!!ne&&ne.hasAttribute("data-loading")},isTimerRunning:function(){return!(!Zi.timeout||!Zi.timeout.isRunning())},isUpdatableParameter:Qa,isValidParameter:co,isVisible:function(){return ei(Ci())},mixin:function Ga(Ye){var ne=function(fe){function $e(){return Be(this,$e),lr(this,$e,arguments)}return function Le(Ye,ne){if("function"!=typeof ne&&null!==ne)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Object.defineProperty(Ye,"prototype",{writable:!1}),ne&&Ve(Ye,ne)}($e,fe),Se($e,[{key:"_main",value:function(an,Hn){return tt(Te($e.prototype),"_main",this).call(this,an,Object.assign({},Ye,Hn))}}]),$e}(this);return ne},resumeTimer:qo,showLoading:Rs,stopTimer:qs,toggleTimer:function(){var ne=Zi.timeout;return ne&&(ne.running?qs():qo())}}),sa=function(){function Ye(ne,fe){Be(this,Ye),this.callback=ne,this.remaining=fe,this.running=!1,this.start()}return Se(Ye,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(fe){var $e=this.running;return $e&&this.stop(),this.remaining+=fe,$e&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),Ye}(),ho=["swal-title","swal-html","swal-footer"],oa=function(ne){var fe={};return Array.from(ne.querySelectorAll("swal-param")).forEach(function(Kt){p(Kt,["name","value"]);var an=Kt.getAttribute("name"),Hn=Kt.getAttribute("value");fe[an]="boolean"==typeof So[an]?"false"!==Hn:"object"===Z(So[an])?JSON.parse(Hn):Hn}),fe},nl=function(ne){var fe={};return Array.from(ne.querySelectorAll("swal-function-param")).forEach(function(Kt){var an=Kt.getAttribute("name"),Hn=Kt.getAttribute("value");fe[an]=new Function("return ".concat(Hn))()}),fe},Va=function(ne){var fe={};return Array.from(ne.querySelectorAll("swal-button")).forEach(function(Kt){p(Kt,["type","color","aria-label"]);var an=Kt.getAttribute("type");fe["".concat(an,"ButtonText")]=Kt.innerHTML,fe["show".concat(Gn(an),"Button")]=!0,Kt.hasAttribute("color")&&(fe["".concat(an,"ButtonColor")]=Kt.getAttribute("color")),Kt.hasAttribute("aria-label")&&(fe["".concat(an,"ButtonAriaLabel")]=Kt.getAttribute("aria-label"))}),fe},$a=function(ne){var fe={},$e=ne.querySelector("swal-image");return $e&&(p($e,["src","width","height","alt"]),$e.hasAttribute("src")&&(fe.imageUrl=$e.getAttribute("src")),$e.hasAttribute("width")&&(fe.imageWidth=$e.getAttribute("width")),$e.hasAttribute("height")&&(fe.imageHeight=$e.getAttribute("height")),$e.hasAttribute("alt")&&(fe.imageAlt=$e.getAttribute("alt"))),fe},rl=function(ne){var fe={},$e=ne.querySelector("swal-icon");return $e&&(p($e,["type","color"]),$e.hasAttribute("type")&&(fe.icon=$e.getAttribute("type")),$e.hasAttribute("color")&&(fe.iconColor=$e.getAttribute("color")),fe.iconHtml=$e.innerHTML),fe},Bs=function(ne){var fe={},$e=ne.querySelector("swal-input");$e&&(p($e,["type","label","placeholder","value"]),fe.input=$e.getAttribute("type")||"text",$e.hasAttribute("label")&&(fe.inputLabel=$e.getAttribute("label")),$e.hasAttribute("placeholder")&&(fe.inputPlaceholder=$e.getAttribute("placeholder")),$e.hasAttribute("value")&&(fe.inputValue=$e.getAttribute("value")));var Kt=Array.from(ne.querySelectorAll("swal-input-option"));return Kt.length&&(fe.inputOptions={},Kt.forEach(function(an){p(an,["value"]);var Hn=an.getAttribute("value");fe.inputOptions[Hn]=an.innerHTML})),fe},cs=function(ne,fe){var $e={};for(var Kt in fe){var an=fe[Kt],Hn=ne.querySelector(an);Hn&&(p(Hn,[]),$e[an.replace(/^swal-/,"")]=Hn.innerHTML.trim())}return $e},Mn=function(ne){var fe=ho.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(ne.children).forEach(function($e){var Kt=$e.tagName.toLowerCase();fe.includes(Kt)||Yn("Unrecognized element <".concat(Kt,">"))})},p=function(ne,fe){Array.from(ne.attributes).forEach(function($e){-1===fe.indexOf($e.name)&&Yn(['Unrecognized attribute "'.concat($e.name,'" on <').concat(ne.tagName.toLowerCase(),">."),"".concat(fe.length?"Allowed attributes are: ".concat(fe.join(", ")):"To set the value, use HTML within the element.")])})},U=function(ne){var fe=Qi(),$e=Ci();"function"==typeof ne.willOpen&&ne.willOpen($e);var an=window.getComputedStyle(document.body).overflowY;ri(fe,$e,ne),setTimeout(function(){Ie(fe,$e)},10),Qe()&&(lt(fe,ne.scrollbarPadding,an),Array.from(document.body.children).forEach(function(fe){fe===Qi()||fe.contains(Qi())||(fe.hasAttribute("aria-hidden")&&fe.setAttribute("data-previous-aria-hidden",fe.getAttribute("aria-hidden")||""),fe.setAttribute("aria-hidden","true"))})),!Mt()&&!Zi.previousActiveElement&&(Zi.previousActiveElement=document.activeElement),"function"==typeof ne.didOpen&&setTimeout(function(){return ne.didOpen($e)}),Hi(fe,di["no-transition"])},de=function Ye(ne){var fe=Ci();if(ne.target===fe&&I){var $e=Qi();fe.removeEventListener(I,Ye),$e.style.overflowY="auto"}},Ie=function(ne,fe){I&&Ki(fe)?(ne.style.overflowY="hidden",fe.addEventListener(I,de)):ne.style.overflowY="auto"},lt=function(ne,fe,$e){(function(){if(ma&&!Pt(document.body,di.iosfix)){var ne=document.body.scrollTop;document.body.style.top="".concat(-1*ne,"px"),$t(document.body,di.iosfix),Zo()}})(),fe&&"hidden"!==$e&&oc($e),setTimeout(function(){ne.scrollTop=0})},ri=function(ne,fe,$e){$t(ne,$e.showClass.backdrop),$e.animation?(fe.style.setProperty("opacity","0","important"),st(fe,"grid"),setTimeout(function(){$t(fe,$e.showClass.popup),fe.style.removeProperty("opacity")},10)):st(fe,"grid"),$t([document.documentElement,document.body],di.shown),$e.heightAuto&&$e.backdrop&&!$e.toast&&$t([document.documentElement,document.body],di["height-auto"])},Si={email:function(ne,fe){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(ne)?Promise.resolve():Promise.resolve(fe||"Invalid email address")},url:function(ne,fe){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(ne)?Promise.resolve():Promise.resolve(fe||"Invalid URL")}};function $n(Ye){(function Vi(Ye){Ye.inputValidator||("email"===Ye.input&&(Ye.inputValidator=Si.email),"url"===Ye.input&&(Ye.inputValidator=Si.url))})(Ye),Ye.showLoaderOnConfirm&&!Ye.preConfirm&&Yn("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function xn(Ye){(!Ye.target||"string"==typeof Ye.target&&!document.querySelector(Ye.target)||"string"!=typeof Ye.target&&!Ye.target.appendChild)&&(Yn('Target parameter is not valid, defaulting to "body"'),Ye.target="body")}(Ye),"string"==typeof Ye.title&&(Ye.title=Ye.title.split("\n").join("<br />")),d(Ye)}var Un,Ir=new WeakMap,Lr=function(){function Ye(){if(Be(this,Ye),Ii(this,Ir,{writable:!0,value:void 0}),!(typeof window>"u")){Un=this;for(var ne=arguments.length,fe=new Array(ne),$e=0;$e<ne;$e++)fe[$e]=arguments[$e];var Kt=Object.freeze(this.constructor.argsToParams(fe));this.params=Kt,this.isAwaitingPromise=!1,St(this,Ir,this._main(Un.params))}}return Se(Ye,[{key:"_main",value:function(fe){var $e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(ne){for(var fe in!1===ne.backdrop&&ne.allowOutsideClick&&Yn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),ne)el(fe),ne.toast&&ta(fe),bo(fe)}(Object.assign({},$e,fe)),Zi.currentInstance){var Kt=Ds.swalPromiseResolve.get(Zi.currentInstance),an=Zi.currentInstance.isAwaitingPromise;Zi.currentInstance._destroy(),an||Kt({isDismissed:!0}),Qe()&&Vo()}Zi.currentInstance=Un;var Hn=Os(fe,$e);$n(Hn),Object.freeze(Hn),Zi.timeout&&(Zi.timeout.stop(),delete Zi.timeout),clearTimeout(Zi.restoreFocusTimeout);var Pr=Gs(Un);return nr(Un,Hn),Ce.innerParams.set(Un,Hn),_s(Un,Pr,Hn)}},{key:"then",value:function(fe){return ti(this,Ir).then(fe)}},{key:"finally",value:function(fe){return ti(this,Ir).finally(fe)}}]),Ye}(),_s=function(ne,fe,$e){return new Promise(function(Kt,an){var Hn=function(Fr){ne.close({isDismissed:!0,dismiss:Fr})};Ds.swalPromiseResolve.set(ne,Kt),Ds.swalPromiseReject.set(ne,an),fe.confirmButton.onclick=function(){!function(ne){var fe=Ce.innerParams.get(ne);ne.disableButtons(),fe.input?jo(ne,"confirm"):La(ne,!0)}(ne)},fe.denyButton.onclick=function(){!function(ne){var fe=Ce.innerParams.get(ne);ne.disableButtons(),fe.returnInputValueOnDeny?jo(ne,"deny"):to(ne,!1)}(ne)},fe.cancelButton.onclick=function(){!function(ne,fe){ne.disableButtons(),fe(Fs.cancel)}(ne,Hn)},fe.closeButton.onclick=function(){Hn(Fs.close)},function(ne,fe,$e){ne.toast?tl(ne,fe,$e):(il(fe),gl(fe),Po(ne,fe,$e))}($e,fe,Hn),function(ne,fe,$e){yr(ne),fe.toast||(ne.keydownHandler=function(Kt){return Wl(fe,Kt,$e)},ne.keydownTarget=fe.keydownListenerCapture?window:Ci(),ne.keydownListenerCapture=fe.keydownListenerCapture,ne.keydownTarget.addEventListener("keydown",ne.keydownHandler,{capture:ne.keydownListenerCapture}),ne.keydownHandlerAdded=!0)}(Zi,$e,Hn),function(ne,fe){"select"===fe.input||"radio"===fe.input?Cr(ne,fe):["text","email","number","tel","textarea"].some(function($e){return $e===fe.input})&&($i(fe.inputValue)||Xi(fe.inputValue))&&(Rs(On()),eo(ne,fe))}(ne,$e),U($e),To(Zi,$e,Hn),va(fe,$e),setTimeout(function(){fe.container.scrollTop=0})})},Os=function(ne,fe){var $e=function(ne){var fe="string"==typeof ne.template?document.querySelector(ne.template):ne.template;if(!fe)return{};var $e=fe.content;return Mn($e),Object.assign(oa($e),nl($e),Va($e),$a($e),rl($e),Bs($e),cs($e,ho))}(ne),Kt=Object.assign({},So,fe,$e,ne);return Kt.showClass=Object.assign({},So.showClass,Kt.showClass),Kt.hideClass=Object.assign({},So.hideClass,Kt.hideClass),!1===Kt.animation&&(Kt.showClass={backdrop:"swal2-noanimation"},Kt.hideClass={}),Kt},Gs=function(ne){var fe={popup:Ci(),container:Qi(),actions:_r(),confirmButton:On(),denyButton:fr(),cancelButton:sr(),loader:Nn(),closeButton:kr(),validationMessage:zn(),progressSteps:Jn()};return Ce.domCache.set(ne,fe),fe},To=function(ne,fe,$e){var Kt=mr();ot(Kt),fe.timer&&(ne.timeout=new sa(function(){$e("timer"),delete ne.timeout},fe.timer),fe.timerProgressBar&&(st(Kt),ae(Kt,fe,"timerProgressBar"),setTimeout(function(){ne.timeout&&ne.timeout.running&&Ct(fe.timer)})))},va=function(ne,fe){if(!fe.toast){if(!Bi(fe.allowEnterKey))return void Fl();po(ne,fe)||bs(-1,1)}},po=function(ne,fe){return fe.focusDeny&&ei(ne.denyButton)?(ne.denyButton.focus(),!0):fe.focusCancel&&ei(ne.cancelButton)?(ne.cancelButton.focus(),!0):!(!fe.focusConfirm||!ei(ne.confirmButton)||(ne.confirmButton.focus(),0))},Fl=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Ha=new Date,Fo=localStorage.getItem("swal-initiation");Fo?(Ha.getTime()-Date.parse(Fo))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var Ye=document.createElement("audio");Ye.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Ye.loop=!0,document.body.appendChild(Ye),setTimeout(function(){Ye.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Ha))}Lr.prototype.disableButtons=vo,Lr.prototype.enableButtons=ga,Lr.prototype.getInput=Uo,Lr.prototype.disableInput=pl,Lr.prototype.enableInput=Ja,Lr.prototype.hideLoading=Pa,Lr.prototype.disableLoading=Pa,Lr.prototype.showValidationMessage=yo,Lr.prototype.resetValidationMessage=ql,Lr.prototype.close=Do,Lr.prototype.closePopup=Do,Lr.prototype.closeModal=Do,Lr.prototype.closeToast=Do,Lr.prototype.rejectPromise=Ro,Lr.prototype.update=Ya,Lr.prototype._destroy=Il,Object.assign(Lr,vl),Object.keys(Lo).forEach(function(Ye){Lr[Ye]=function(){var ne;return Un&&Un[Ye]?(ne=Un)[Ye].apply(ne,arguments):null}}),Lr.DismissReason=Fs,Lr.version="11.10.6";var sl=Lr;return sl.default=sl,sl}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(lr,Et){var e=lr.createElement("style");if(lr.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=Et);else try{e.innerHTML=Et}catch{e.innerText=Et}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},7432:(ms,lr,Et)=>{"use strict";Et.d(lr,{Ar:()=>ut});var e=Et(4496);Et(9216);let ut=(()=>{class tt{static#e=this.\u0275fac=function(qt){return new(qt||tt)};static#t=this.\u0275mod=e.a4G({type:tt});static#i=this.\u0275inj=e.s3X({})}return tt})()},8096:(ms,lr,Et)=>{"use strict";Et.d(lr,{k:()=>ts});var e=Et(4496);Et(9400);var Le=Et(6764),Te=Et(2780);const We=function Ve(it,_t){return function(Ht){return it(_t(Ht))}};We(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const vi=function pi(it,_t){return it===_t||it!=it&&_t!=_t},Ji=function Ti(it,_t){for(var Ht=it.length;Ht--;)if(vi(it[Ht][0],_t))return Ht;return-1};var ki=Array.prototype.splice;function Ln(it){var _t=-1,Ht=null==it?0:it.length;for(this.clear();++_t<Ht;){var Gi=it[_t];this.set(Gi[0],Gi[1])}}Ln.prototype.clear=function ti(){this.__data__=[],this.size=0},Ln.prototype.delete=function Zi(it){var _t=this.__data__,Ht=Ji(_t,it);return!(Ht<0||(Ht==_t.length-1?_t.pop():ki.call(_t,Ht,1),--this.size,0))},Ln.prototype.get=function ji(it){var _t=this.__data__,Ht=Ji(_t,it);return Ht<0?void 0:_t[Ht][1]},Ln.prototype.has=function tn(it){return Ji(this.__data__,it)>-1},Ln.prototype.set=function Wi(it,_t){var Ht=this.__data__,Gi=Ji(Ht,it);return Gi<0?(++this.size,Ht.push([it,_t])):Ht[Gi][1]=_t,this};const Gn=Ln;var Xi=Et(4556);var it,cn=Et(7616),br=cn.c["__core-js_shared__"],Jn=(it=/[^.]+$/.exec(br&&br.keys&&br.keys.IE_PROTO||""))?"Symbol(src)_1."+it:"";var fr=Function.prototype.toString;const Nn=function Yr(it){if(null!=it){try{return fr.call(it)}catch{}try{return it+""}catch{}}return""};var ur=/^\[object .+?Constructor\]$/,Qe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Tt=function Mt(it){return!(!(0,Xi.c)(it)||function zn(it){return!!Jn&&Jn in it}(it))&&(function En(it){if(!(0,Xi.c)(it))return!1;var _t=(0,Te.c)(it);return"[object Function]"==_t||"[object GeneratorFunction]"==_t||"[object AsyncFunction]"==_t||"[object Proxy]"==_t}(it)?Qe:ur).test(Nn(it))},ae=function Nt(it,_t){var Ht=function Zt(it,_t){return it?.[_t]}(it,_t);return Tt(Ht)?Ht:void 0},et=ae(cn.c,"Map"),$t=ae(Object,"create");var nt=Object.prototype.hasOwnProperty;var Ei=Object.prototype.hasOwnProperty;function Yt(it){var _t=-1,Ht=null==it?0:it.length;for(this.clear();++_t<Ht;){var Gi=it[_t];this.set(Gi[0],Gi[1])}}Yt.prototype.clear=function Hi(){this.__data__=$t?$t(null):{},this.size=0},Yt.prototype.delete=function At(it){var _t=this.has(it)&&delete this.__data__[it];return this.size-=_t?1:0,_t},Yt.prototype.get=function It(it){var _t=this.__data__;if($t){var Ht=_t[it];return"__lodash_hash_undefined__"===Ht?void 0:Ht}return nt.call(_t,it)?_t[it]:void 0},Yt.prototype.has=function Ki(it){var _t=this.__data__;return $t?void 0!==_t[it]:Ei.call(_t,it)},Yt.prototype.set=function xe(it,_t){var Ht=this.__data__;return this.size+=this.has(it)?0:1,Ht[it]=$t&&void 0===_t?"__lodash_hash_undefined__":_t,this};const Xe=Yt,g=function d(it,_t){var Ht=it.__data__;return function i(it){var _t=typeof it;return"string"==_t||"number"==_t||"symbol"==_t||"boolean"==_t?"__proto__"!==it:null===it}(_t)?Ht["string"==typeof _t?"string":"hash"]:Ht.map};function ce(it){var _t=-1,Ht=null==it?0:it.length;for(this.clear();++_t<Ht;){var Gi=it[_t];this.set(Gi[0],Gi[1])}}ce.prototype.clear=function Ut(){this.size=0,this.__data__={hash:new Xe,map:new(et||Gn),string:new Xe}},ce.prototype.delete=function x(it){var _t=g(this,it).delete(it);return this.size-=_t?1:0,_t},ce.prototype.get=function I(it){return g(this,it).get(it)},ce.prototype.has=function Y(it){return g(this,it).has(it)},ce.prototype.set=function X(it,_t){var Ht=g(this,it),Gi=Ht.size;return Ht.set(it,_t),this.size+=Ht.size==Gi?0:1,this};const me=ce;function Re(it){var _t=this.__data__=new Gn(it);this.size=_t.size}Re.prototype.clear=function Yn(){this.__data__=new Gn,this.size=0},Re.prototype.delete=function jt(it){var _t=this.__data__,Ht=_t.delete(it);return this.size=_t.size,Ht},Re.prototype.get=function V(it){return this.__data__.get(it)},Re.prototype.has=function $i(it){return this.__data__.has(it)},Re.prototype.set=function De(it,_t){var Ht=this.__data__;if(Ht instanceof Gn){var Gi=Ht.__data__;if(!et||Gi.length<199)return Gi.push([it,_t]),this.size=++Ht.size,this;Ht=this.__data__=new me(Gi)}return Ht.set(it,_t),this.size=Ht.size,this},function(){try{var it=ae(Object,"defineProperty");return it({},"",{}),it}catch{}}();!function hr(it){(0,Le.c)(it)&&(0,Te.c)(it)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var Xr={};Xr["[object Float32Array]"]=Xr["[object Float64Array]"]=Xr["[object Int8Array]"]=Xr["[object Int16Array]"]=Xr["[object Int32Array]"]=Xr["[object Uint8Array]"]=Xr["[object Uint8ClampedArray]"]=Xr["[object Uint16Array]"]=Xr["[object Uint32Array]"]=!0,Xr["[object Arguments]"]=Xr["[object Array]"]=Xr["[object ArrayBuffer]"]=Xr["[object Boolean]"]=Xr["[object DataView]"]=Xr["[object Date]"]=Xr["[object Error]"]=Xr["[object Function]"]=Xr["[object Map]"]=Xr["[object Number]"]=Xr["[object Object]"]=Xr["[object RegExp]"]=Xr["[object Set]"]=Xr["[object String]"]=Xr["[object WeakMap]"]=!1;const go=function Ra(it){return function(_t){return it(_t)}};var ns=Et(8616),kl="object"==typeof exports&&exports&&!exports.nodeType&&exports,_o=kl&&"object"==typeof module&&module&&!module.nodeType&&module,Cr=_o&&_o.exports===kl&&ns.c.process;const Qo=function(){try{return _o&&_o.require&&_o.require("util").types||Cr&&Cr.binding&&Cr.binding("util")}catch{}}();var Ts=Qo&&Qo.isTypedArray;Ts&&go(Ts),We(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const ho=ae(cn.c,"DataView"),oa=ae(cn.c,"Promise"),Va=ae(cn.c,"Set"),rl=ae(cn.c,"WeakMap");var Bs="[object Map]",Mn="[object Promise]",p="[object Set]",A="[object WeakMap]",U="[object DataView]",de=Nn(ho),Ie=Nn(et),lt=Nn(oa),ri=Nn(Va),Si=Nn(rl),Vi=Te.c;(ho&&Vi(new ho(new ArrayBuffer(1)))!=U||et&&Vi(new et)!=Bs||oa&&Vi(oa.resolve())!=Mn||Va&&Vi(new Va)!=p||rl&&Vi(new rl)!=A)&&(Vi=function(it){var _t=(0,Te.c)(it),Ht="[object Object]"==_t?it.constructor:void 0,Gi=Ht?Nn(Ht):"";if(Gi)switch(Gi){case de:return U;case Ie:return Bs;case lt:return Mn;case ri:return p;case Si:return A}return _t});Et(312);var xa=Qo&&Qo.isMap;xa&&go(xa);var o=Qo&&Qo.isSet;o&&go(o);var Li={};Li["[object Arguments]"]=Li["[object Array]"]=Li["[object ArrayBuffer]"]=Li["[object DataView]"]=Li["[object Boolean]"]=Li["[object Date]"]=Li["[object Float32Array]"]=Li["[object Float64Array]"]=Li["[object Int8Array]"]=Li["[object Int16Array]"]=Li["[object Int32Array]"]=Li["[object Map]"]=Li["[object Number]"]=Li["[object Object]"]=Li["[object RegExp]"]=Li["[object Set]"]=Li["[object String]"]=Li["[object Symbol]"]=Li["[object Uint8Array]"]=Li["[object Uint8ClampedArray]"]=Li["[object Uint16Array]"]=Li["[object Uint32Array]"]=!0,Li["[object Error]"]=Li["[object Function]"]=Li["[object WeakMap]"]=!1,Symbol("MainQueueId");var us=Et(6504),hs=Et(1368);new Array(256).fill(0).map((it,_t)=>("0"+_t.toString(16)).slice(-2));let ts=(()=>{class it{}return it.\u0275fac=function(Ht){return new(Ht||it)},it.\u0275mod=e.a4G({type:it}),it.\u0275inj=e.s3X({imports:[[us.y,hs.MD]]}),it})()},4884:(ms,lr,Et)=>{"use strict";Et.d(lr,{GU:()=>mr,UT:()=>ei,gb:()=>Ki});var e=Et(4496),Mi=Et(6504),He=Et(3616),c=Et(112),Z=Et(5448),Be=Et(560),we=Et(7773),Le=Et(3120);var Ve=Et(5568),We=Et(9212),ut=Et(4680),vt=Et(6684),tt=Et(4704),ze=Et(4096),ct=Et(1472),qt=Et(5657),Je=Et(800),Jt=Et(3412),yi=Et(1368);const rt=["content"],bi=["scroll"],ci=["padding"],ti=Ct=>({searchTerm:Ct});function St(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",6),e.C_f(1,7),e.C$Y()),2&Ct){const xe=e.GaO();e.yG2(),e.E7m("ngTemplateOutlet",xe.headerTemplate)("ngTemplateOutletContext",e.S45(2,ti,xe.filterValue))}}function pi(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",8),e.C_f(1,7),e.C$Y()),2&Ct){const xe=e.GaO();e.yG2(),e.E7m("ngTemplateOutlet",xe.footerTemplate)("ngTemplateOutletContext",e.S45(2,ti,xe.filterValue))}}const vi=["*"],Ti=["searchInput"],Ji=["clearButton"];function Ii(Ct,Ot){if(1&Ct){const xe=e.KQA();e.I0R(0,"span",15),e.qCj("click",function(){e.usT(xe);const Yt=e.GaO().$implicit,Xe=e.GaO(2);return e.CGJ(Xe.unselect(Yt))}),e.OEk(1,"\xd7"),e.C$Y(),e.wR5(2,"span",16)}if(2&Ct){const xe=e.GaO().$implicit,bt=e.GaO(2);e.yG2(2),e.E7m("ngItemLabel",xe.label)("escape",bt.escapeHTML)}}function ki(Ct,Ot){}const Zi=(Ct,Ot,xe)=>({item:Ct,clear:Ot,label:xe});function pn(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",12),e.yuY(1,Ii,3,2,"ng-template",null,13,e.gJz)(3,ki,0,0,"ng-template",14),e.C$Y()),2&Ct){const xe=Ot.$implicit,bt=e.Gew(2),Yt=e.GaO(2);e.eAK("ng-value-disabled",xe.disabled),e.yG2(3),e.E7m("ngTemplateOutlet",Yt.labelTemplate||bt)("ngTemplateOutletContext",e.uAc(4,Zi,xe.value,Yt.clearItem,xe.label))}}function ji(Ct,Ot){if(1&Ct&&(e.SAx(0),e.yuY(1,pn,4,8,"div",11),e.k70()),2&Ct){const xe=e.GaO();e.yG2(),e.E7m("ngForOf",xe.selectedItems)("ngForTrackBy",xe.trackByOption)}}function gn(Ct,Ot){}const tn=(Ct,Ot)=>({items:Ct,clear:Ot});function di(Ct,Ot){if(1&Ct&&e.yuY(0,gn,0,0,"ng-template",14),2&Ct){const xe=e.GaO();e.E7m("ngTemplateOutlet",xe.multiLabelTemplate)("ngTemplateOutletContext",e.IBC(2,tn,xe.selectedValues,xe.clearItem))}}function Wi(Ct,Ot){1&Ct&&e.wR5(0,"div",19)}function _n(Ct,Ot){}function Ln(Ct,Ot){if(1&Ct&&(e.SAx(0),e.yuY(1,Wi,1,0,"ng-template",null,17,e.gJz)(3,_n,0,0,"ng-template",18),e.k70()),2&Ct){const xe=e.Gew(2),bt=e.GaO();e.yG2(3),e.E7m("ngTemplateOutlet",bt.loadingSpinnerTemplate||xe)}}function Gn(Ct,Ot){if(1&Ct&&(e.I0R(0,"span",20,21)(2,"span",22),e.OEk(3,"\xd7"),e.C$Y()()),2&Ct){const xe=e.GaO();e._6D("title",xe.clearAllText)}}function Yn(Ct,Ot){if(1&Ct&&e.wR5(0,"span",28),2&Ct){const xe=e.GaO().$implicit,bt=e.GaO(2);e.E7m("ngItemLabel",xe.label)("escape",bt.escapeHTML)}}function on(Ct,Ot){}const jt=(Ct,Ot,xe,bt)=>({item:Ct,item$:Ot,index:xe,searchTerm:bt});function gi(Ct,Ot){if(1&Ct){const xe=e.KQA();e.I0R(0,"div",26),e.qCj("click",function(){const Xe=e.usT(xe).$implicit,Ut=e.GaO(2);return e.CGJ(Ut.toggleItem(Xe))})("mouseover",function(){const Xe=e.usT(xe).$implicit,Ut=e.GaO(2);return e.CGJ(Ut.onItemHover(Xe))}),e.yuY(1,Yn,1,2,"ng-template",null,27,e.gJz)(3,on,0,0,"ng-template",14),e.C$Y()}if(2&Ct){const xe=Ot.$implicit,bt=e.Gew(2),Yt=e.GaO(2);e.eAK("ng-option-disabled",xe.disabled)("ng-option-selected",xe.selected)("ng-optgroup",xe.children)("ng-option",!xe.children)("ng-option-child",!!xe.parent)("ng-option-marked",xe===Yt.itemsList.markedItem),e.e48("role",xe.children?"group":"option")("aria-selected",xe.selected)("id",null==xe?null:xe.htmlId),e.yG2(3),e.E7m("ngTemplateOutlet",xe.children?Yt.optgroupTemplate||bt:Yt.optionTemplate||bt)("ngTemplateOutletContext",e.WuN(17,jt,xe.value,xe,xe.index,Yt.searchTerm))}}function V(Ct,Ot){if(1&Ct&&(e.I0R(0,"span")(1,"span",31),e.OEk(2),e.C$Y(),e.OEk(3),e.C$Y()),2&Ct){const xe=e.GaO(3);e.yG2(2),e.cNF(xe.addTagText),e.yG2(),e.oRS('"',xe.searchTerm,'"')}}function Bi(Ct,Ot){}function $i(Ct,Ot){if(1&Ct){const xe=e.KQA();e.I0R(0,"div",29),e.qCj("mouseover",function(){e.usT(xe);const Yt=e.GaO(2);return e.CGJ(Yt.itemsList.unmarkItem())})("click",function(){e.usT(xe);const Yt=e.GaO(2);return e.CGJ(Yt.selectTag())}),e.yuY(1,V,4,2,"ng-template",null,30,e.gJz)(3,Bi,0,0,"ng-template",14),e.C$Y()}if(2&Ct){const xe=e.Gew(2),bt=e.GaO(2);e.eAK("ng-option-marked",!bt.itemsList.markedItem),e.yG2(3),e.E7m("ngTemplateOutlet",bt.tagTemplate||xe)("ngTemplateOutletContext",e.S45(4,ti,bt.searchTerm))}}function en(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",33),e.OEk(1),e.C$Y()),2&Ct){const xe=e.GaO(3);e.yG2(),e.cNF(xe.notFoundText)}}function Xi(Ct,Ot){}function Qi(Ct,Ot){if(1&Ct&&(e.SAx(0),e.yuY(1,en,2,1,"ng-template",null,32,e.gJz)(3,Xi,0,0,"ng-template",14),e.k70()),2&Ct){const xe=e.Gew(2),bt=e.GaO(2);e.yG2(3),e.E7m("ngTemplateOutlet",bt.notFoundTemplate||xe)("ngTemplateOutletContext",e.S45(2,ti,bt.searchTerm))}}function Pn(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",33),e.OEk(1),e.C$Y()),2&Ct){const xe=e.GaO(3);e.yG2(),e.cNF(xe.typeToSearchText)}}function fn(Ct,Ot){}function Ci(Ct,Ot){if(1&Ct&&(e.SAx(0),e.yuY(1,Pn,2,1,"ng-template",null,34,e.gJz)(3,fn,0,0,"ng-template",18),e.k70()),2&Ct){const xe=e.Gew(2),bt=e.GaO(2);e.yG2(3),e.E7m("ngTemplateOutlet",bt.typeToSearchTemplate||xe)}}function En(Ct,Ot){if(1&Ct&&(e.I0R(0,"div",33),e.OEk(1),e.C$Y()),2&Ct){const xe=e.GaO(3);e.yG2(),e.cNF(xe.loadingText)}}function Dn(Ct,Ot){}function cn(Ct,Ot){if(1&Ct&&(e.SAx(0),e.yuY(1,En,2,1,"ng-template",null,35,e.gJz)(3,Dn,0,0,"ng-template",14),e.k70()),2&Ct){const xe=e.Gew(2),bt=e.GaO(2);e.yG2(3),e.E7m("ngTemplateOutlet",bt.loadingTextTemplate||xe)("ngTemplateOutletContext",e.S45(2,ti,bt.searchTerm))}}function br(Ct,Ot){if(1&Ct){const xe=e.KQA();e.I0R(0,"ng-dropdown-panel",23),e.qCj("update",function(Yt){e.usT(xe);const Xe=e.GaO();return e.CGJ(Xe.viewPortItems=Yt)})("scroll",function(Yt){e.usT(xe);const Xe=e.GaO();return e.CGJ(Xe.scroll.emit(Yt))})("scrollToEnd",function(Yt){e.usT(xe);const Xe=e.GaO();return e.CGJ(Xe.scrollToEnd.emit(Yt))})("outsideClick",function(){e.usT(xe);const Yt=e.GaO();return e.CGJ(Yt.close())}),e.SAx(1),e.yuY(2,gi,4,22,"div",24)(3,$i,4,6,"div",25),e.k70(),e.yuY(4,Qi,4,4,"ng-container",3)(5,Ci,4,1,"ng-container",3)(6,cn,4,4,"ng-container",3),e.C$Y()}if(2&Ct){const xe=e.GaO();e.eAK("ng-select-multiple",xe.multiple),e.E7m("virtualScroll",xe.virtualScroll)("bufferAmount",xe.bufferAmount)("appendTo",xe.appendTo)("position",xe.dropdownPosition)("headerTemplate",xe.headerTemplate)("footerTemplate",xe.footerTemplate)("filterValue",xe.searchTerm)("items",xe.itemsList.filteredItems)("markedItem",xe.itemsList.markedItem)("ngClass",xe.appendTo?xe.classes:null)("id",xe.dropdownId),e.yG2(2),e.E7m("ngForOf",xe.viewPortItems)("ngForTrackBy",xe.trackByOption),e.yG2(),e.E7m("ngIf",xe.showAddTag),e.yG2(),e.E7m("ngIf",xe.showNoItemsFound()),e.yG2(),e.E7m("ngIf",xe.showTypeToSearch()),e.yG2(),e.E7m("ngIf",xe.loading&&0===xe.itemsList.filteredItems.length)}}const wi=/[&<>"']/g,Jn=RegExp(wi.source),zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function sr(Ct){return null!=Ct}function fr(Ct){return"object"==typeof Ct&&sr(Ct)}function Nn(Ct){return Ct instanceof Function}let _r=(()=>{class Ct{constructor(xe){this.element=xe,this.escape=!0}ngOnChanges(xe){this.element.nativeElement.innerHTML=this.escape?function On(Ct){return Ct&&Jn.test(Ct)?Ct.replace(wi,Ot=>zn[Ot]):Ct}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.GMv))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[e.SYr]})}return Ct})(),ur=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-option-tmp",""]]})}return Ct})(),mr=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-optgroup-tmp",""]]})}return Ct})(),kr=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-label-tmp",""]]})}return Ct})(),Ft=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-multi-label-tmp",""]]})}return Ct})(),Ze=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-header-tmp",""]]})}return Ct})(),Qe=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-footer-tmp",""]]})}return Ct})(),Mt=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-notfound-tmp",""]]})}return Ct})(),Tt=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-typetosearch-tmp",""]]})}return Ct})(),Zt=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-loadingtext-tmp",""]]})}return Ct})(),Pt=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-tag-tmp",""]]})}return Ct})(),Nt=(()=>{class Ct{constructor(xe){this.template=xe}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.Yw2))};static#t=this.\u0275dir=e.Sc5({type:Ct,selectors:[["","ng-loadingspinner-tmp",""]]})}return Ct})();function ae(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const Ne={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function et(Ct){return Ct.replace(/[^\u0000-\u007E]/g,xe=>Ne[xe]||xe)}class Vt{constructor(Ot,xe){this._ngSelect=Ot,this._selectionModel=xe,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let Ot=this.selectedItems.length-1;for(;Ot>=0;Ot--){const xe=this.selectedItems[Ot];if(!xe.disabled)return xe}return null}setItems(Ot){this._items=Ot.map((xe,bt)=>this.mapItem(xe,bt)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(Ot){if(Ot.selected||this.maxItemsSelected)return;const xe=this._ngSelect.multiple;xe||this.clearSelected(),this._selectionModel.select(Ot,xe,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(Ot)}unselect(Ot){Ot.selected&&(this._selectionModel.unselect(Ot,this._ngSelect.multiple),this._ngSelect.hideSelected&&sr(Ot.index)&&this._ngSelect.multiple&&this._showSelected(Ot))}findItem(Ot){let xe;return xe=this._ngSelect.compareWith?bt=>this._ngSelect.compareWith(bt.value,Ot):this._ngSelect.bindValue?bt=>!bt.children&&this.resolveNested(bt.value,this._ngSelect.bindValue)===Ot:bt=>bt.value===Ot||!bt.children&&bt.label&&bt.label===this.resolveNested(Ot,this._ngSelect.bindLabel),this._items.find(bt=>xe(bt))}addItem(Ot){const xe=this.mapItem(Ot,this._items.length);return this._items.push(xe),this._filteredItems.push(xe),xe}clearSelected(Ot=!1){this._selectionModel.clear(Ot),this._items.forEach(xe=>{xe.selected=Ot&&xe.selected&&xe.disabled,xe.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(Ot){return Ot=et(Ot).toLocaleLowerCase(),this.filteredItems.find(xe=>et(xe.label).toLocaleLowerCase().substr(0,Ot.length)===Ot)}filter(Ot){if(!Ot)return void this.resetFilteredItems();this._filteredItems=[],Ot=this._ngSelect.searchFn?Ot:et(Ot).toLocaleLowerCase();const xe=this._ngSelect.searchFn||this._defaultSearchFn,bt=this._ngSelect.hideSelected;for(const Yt of Array.from(this._groups.keys())){const Xe=[];for(const Ut of this._groups.get(Yt))bt&&(Ut.parent&&Ut.parent.selected||Ut.selected)||xe(Ot,this._ngSelect.searchFn?Ut.value:Ut)&&Xe.push(Ut);if(Xe.length>0){const[Ut]=Xe.slice(-1);if(Ut.parent){const pe=this._items.find(i=>i===Ut.parent);this._filteredItems.push(pe)}this._filteredItems.push(...Xe)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(Ot=>!Ot.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(Ot){this._markedIndex=this._filteredItems.indexOf(Ot)}markSelectedOrDefault(Ot){if(0===this._filteredItems.length)return;const xe=this._getLastMarkedIndex();this._markedIndex=xe>-1?xe:Ot?this.filteredItems.findIndex(bt=>!bt.disabled):-1}resolveNested(Ot,xe){if(!fr(Ot))return Ot;if(-1===xe.indexOf("."))return Ot[xe];{const bt=xe.split(".");let Yt=Ot;for(let Xe=0,Ut=bt.length;Xe<Ut;++Xe){if(null==Yt)return null;Yt=Yt[bt[Xe]]}return Yt}}mapItem(Ot,xe){const bt=sr(Ot.$ngOptionLabel)?Ot.$ngOptionLabel:this.resolveNested(Ot,this._ngSelect.bindLabel),Yt=sr(Ot.$ngOptionValue)?Ot.$ngOptionValue:Ot;return{index:xe,label:sr(bt)?bt.toString():"",value:Yt,disabled:Ot.disabled,htmlId:`${this._ngSelect.dropdownId}-${xe}`}}mapSelectedItems(){const Ot=this._ngSelect.multiple;for(const xe of this.selectedItems){const bt=this._ngSelect.bindValue?this.resolveNested(xe.value,this._ngSelect.bindValue):xe.value,Yt=sr(bt)?this.findItem(bt):null;this._selectionModel.unselect(xe,Ot),this._selectionModel.select(Yt||xe,Ot,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(xe=>-1===this.selectedItems.indexOf(xe)))}_showSelected(Ot){if(this._filteredItems.push(Ot),Ot.parent){const xe=Ot.parent;this._filteredItems.find(Yt=>Yt===xe)||this._filteredItems.push(xe)}else if(Ot.children)for(const xe of Ot.children)xe.selected=!1,this._filteredItems.push(xe);this._filteredItems=[...this._filteredItems.sort((xe,bt)=>xe.index-bt.index)]}_hideSelected(Ot){this._filteredItems=this._filteredItems.filter(xe=>xe!==Ot),Ot.parent?Ot.parent.children.every(bt=>bt.selected)&&(this._filteredItems=this._filteredItems.filter(bt=>bt!==Ot.parent)):Ot.children&&(this._filteredItems=this.filteredItems.filter(xe=>xe.parent!==Ot))}_defaultSearchFn(Ot,xe){return et(xe.label).toLocaleLowerCase().indexOf(Ot)>-1}_getNextItemIndex(Ot){return Ot>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(Ot){0===this._filteredItems.length||this._filteredItems.every(xe=>xe.disabled)||(this._markedIndex=this._getNextItemIndex(Ot),this.markedItem.disabled&&this._stepToItem(Ot))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const Ot=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&Ot<0?-1:Math.max(this.markedIndex,Ot)}_groupBy(Ot,xe){const bt=new Map;if(0===Ot.length)return bt;if(Array.isArray(Ot[0].value[xe])){for(const Ut of Ot){const pe=(Ut.value[xe]||[]).map((i,r)=>this.mapItem(i,r));bt.set(Ut,pe)}return bt}const Yt=Nn(this._ngSelect.groupBy),Xe=Ut=>{const pe=Yt?xe(Ut.value):Ut.value[xe];return sr(pe)?pe:void 0};for(const Ut of Ot){const pe=Xe(Ut),i=bt.get(pe);i?i.push(Ut):bt.set(pe,[Ut])}return bt}_flatten(Ot){const xe=Nn(this._ngSelect.groupBy),bt=[];for(const Yt of Array.from(Ot.keys())){let Xe=bt.length;if(void 0===Yt){const g=Ot.get(void 0)||[];bt.push(...g.map(x=>(x.index=Xe++,x)));continue}const Ut=fr(Yt),pe={label:Ut?"":String(Yt),children:void 0,parent:null,index:Xe++,disabled:!this._ngSelect.selectableGroup,htmlId:ae()},i=xe?this._ngSelect.bindLabel:this._ngSelect.groupBy,r=this._ngSelect.groupValue||(()=>Ut?Yt.value:{[i]:Yt}),d=Ot.get(Yt).map(g=>(g.parent=pe,g.children=void 0,g.index=Xe++,g));pe.children=d,pe.value=r(Yt,d.map(g=>g.value)),bt.push(pe),bt.push(...d)}return bt}}var $t=function(Ct){return Ct[Ct.Tab=9]="Tab",Ct[Ct.Enter=13]="Enter",Ct[Ct.Esc=27]="Esc",Ct[Ct.Space=32]="Space",Ct[Ct.ArrowUp=38]="ArrowUp",Ct[Ct.ArrowDown=40]="ArrowDown",Ct[Ct.Backspace=8]="Backspace",Ct}($t||{});let Hi=(()=>{class Ct{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(xe,bt,Yt){const Xe=this._dimensions,Ut=Xe.itemHeight*bt,i=Math.max(0,xe)/Ut*bt;let r=Math.min(bt,Math.ceil(i)+(Xe.itemsPerViewport+1));const g=Math.max(0,r-Xe.itemsPerViewport);let x=Math.min(g,Math.floor(i)),w=Xe.itemHeight*Math.ceil(x)-Xe.itemHeight*Math.min(x,Yt);return w=isNaN(w)?0:w,x=isNaN(x)?-1:x,r=isNaN(r)?-1:r,x-=Yt,x=Math.max(0,x),r+=Yt,r=Math.min(bt,r),{topPadding:w,scrollHeight:Ut,start:x,end:r}}setDimensions(xe,bt){const Yt=Math.max(1,Math.floor(bt/xe));this._dimensions={itemHeight:xe,panelHeight:bt,itemsPerViewport:Yt}}getScrollTo(xe,bt,Yt){const{panelHeight:Xe}=this.dimensions,Ut=xe+bt,i=Yt+Xe;return Xe>=Ut&&Yt===xe?null:Ut>i?Yt+Ut-i:xe<=Yt?xe:null}static#e=this.\u0275fac=function(bt){return new(bt||Ct)};static#t=this.\u0275prov=e.wxM({token:Ct,factory:Ct.\u0275fac})}return Ct})();const wt=["top","right","bottom","left"],At=typeof requestAnimationFrame<"u"?ze.A:ct.u;let st=(()=>{class Ct{constructor(xe,bt,Yt,Xe,Ut){this._renderer=xe,this._zone=bt,this._panelService=Yt,this._document=Ut,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new e._w7,this.scroll=new e._w7,this.scrollToEnd=new e._w7,this.outsideClick=new e._w7,this._destroy$=new qt.E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=Xe.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(xe){xe!==this._itemsLength&&(this._itemsLength=xe,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:xe,panelHeight:bt}=this._panelService.dimensions,Yt=this.markedItem.index*xe;return bt>Yt?0:Yt}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(xe){if(xe.items){const bt=xe.items;this._onItemsChange(bt.currentValue,bt.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(xe,bt=!1){if(!xe)return;const Yt=this.items.indexOf(xe);if(Yt<0||Yt>=this.itemsLength)return;let Xe;if(this.virtualScroll){const Ut=this._panelService.dimensions.itemHeight;Xe=this._panelService.getScrollTo(Yt*Ut,Ut,this._lastScrollPosition)}else{const Ut=this._dropdown.querySelector(`#${xe.htmlId}`);Xe=this._panelService.getScrollTo(Ut.offsetTop,Ut.clientHeight,bt?Ut.offsetTop:this._lastScrollPosition)}sr(Xe)&&(this._scrollablePanel.scrollTop=Xe)}scrollToTag(){const xe=this._scrollablePanel;xe.scrollTop=xe.scrollHeight-xe.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),wt.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(xe){wt.forEach(Yt=>{const Xe=`ng-select-${Yt}`;this._renderer.removeClass(this._dropdown,Xe),this._renderer.removeClass(this._select,Xe)});const bt=`ng-select-${xe}`;this._renderer.addClass(this._dropdown,bt),this._renderer.addClass(this._select,bt)}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,Je.w)(this.scrollElementRef.nativeElement,"scroll").pipe((0,He.a)(this._destroy$),function Te(Ct,Ot=c.M){return function Se(Ct){return(0,Z.i)((Ot,xe)=>{let bt=!1,Yt=null,Xe=null,Ut=!1;const pe=()=>{if(Xe?.unsubscribe(),Xe=null,bt){bt=!1;const r=Yt;Yt=null,xe.next(r)}Ut&&xe.complete()},i=()=>{Xe=null,Ut&&xe.complete()};Ot.subscribe((0,we.e)(xe,r=>{bt=!0,Yt=r,Xe||(0,Be.Uv)(Ct(r)).subscribe(Xe=(0,we.e)(xe,pe,i))},()=>{Ut=!0,(!bt||!Xe||Xe.closed)&&xe.complete()}))})}(()=>(0,Le.k)(Ct,Ot))}(0,At)).subscribe(xe=>{const bt=xe.path||xe.composedPath&&xe.composedPath();bt&&(0!==bt.length||xe.target)&&this._onContentScrolled(bt&&0!==bt.length?bt[0].scrollTop:xe.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{(0,Jt.U)((0,Je.w)(this._document,"touchstart",{capture:!0}),(0,Je.w)(this._document,"mousedown",{capture:!0})).pipe((0,He.a)(this._destroy$)).subscribe(xe=>this._checkToClose(xe))})}_checkToClose(xe){if(this._select.contains(xe.target)||this._dropdown.contains(xe.target))return;const bt=xe.path||xe.composedPath&&xe.composedPath();xe.target&&xe.target.shadowRoot&&bt&&bt[0]&&this._select.contains(bt[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(xe,bt){this.items=xe||[],this._scrollToEndFired=!1,this.itemsLength=xe.length,this.virtualScroll?this._updateItemsRange(bt):(this._setVirtualHeight(),this._updateItems(bt))}_updateItems(xe){this.update.emit(this.items),!1!==xe&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,xe)})})}_updateItemsRange(xe){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{xe?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(xe){this.virtualScroll&&this._renderItemsRange(xe),this._lastScrollPosition=xe,this._fireScrollToEnd(xe)}_updateVirtualHeight(xe){this._updateScrollHeight&&(this._virtualPadding.style.height=`${xe}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(xe=null){if(xe&&this._lastScrollPosition===xe)return;const bt=this._panelService.calculateItems(xe=xe||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(bt.scrollHeight),this._contentPanel.style.transform=`translateY(${bt.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(bt.start,bt.end)),this.scroll.emit({start:bt.start,end:bt.end})}),sr(xe)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=xe,this._lastScrollPosition=xe)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[xe]=this.items;return this.update.emit([xe]),Promise.resolve().then(()=>{const Yt=this._dropdown.querySelector(`#${xe.htmlId}`).clientHeight;return this._virtualPadding.style.height=Yt*this.itemsLength+"px",this._panelService.setDimensions(Yt,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(xe){this._scrollToEndFired||0===xe||xe+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(xe){if("auto"!==this.position)return this.position;const bt=this._select.getBoundingClientRect(),Yt=document.documentElement.scrollTop||document.body.scrollTop;return bt.top+window.pageYOffset+bt.height+xe.getBoundingClientRect().height>Yt+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const xe=this._select.getBoundingClientRect(),bt=this._parent.getBoundingClientRect();this._dropdown.style.left=xe.left-bt.left+"px",this._dropdown.style.width=xe.width+"px",this._dropdown.style.minWidth=xe.width+"px"}_updateYPosition(){const xe=this._select.getBoundingClientRect(),bt=this._parent.getBoundingClientRect(),Yt=xe.height;"top"===this._currentPosition?(this._dropdown.style.bottom=bt.bottom-xe.bottom+Yt+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=xe.top-bt.top+Yt+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{(0,Je.w)(this._dropdown,"mousedown").pipe((0,He.a)(this._destroy$)).subscribe(xe=>{"INPUT"!==xe.target.tagName&&xe.preventDefault()})})}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.q87),e.GI1(e.WW2),e.GI1(Hi),e.GI1(e.GMv),e.GI1(yi.Ud,8))};static#t=this.\u0275cmp=e.In1({type:Ct,selectors:[["ng-dropdown-panel"]],viewQuery:function(bt,Yt){if(1&bt&&(e.CC$(rt,7,e.GMv),e.CC$(bi,7,e.GMv),e.CC$(ci,7,e.GMv)),2&bt){let Xe;e.wto(Xe=e.Gqi())&&(Yt.contentElementRef=Xe.first),e.wto(Xe=e.Gqi())&&(Yt.scrollElementRef=Xe.first),e.wto(Xe=e.Gqi())&&(Yt.paddingElementRef=Xe.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[e.SYr],ngContentSelectors:vi,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(bt,Yt){1&bt&&(e.kPM(),e.yuY(0,St,2,4,"div",0),e.I0R(1,"div",1,2),e.wR5(3,"div",null,3),e.I0R(5,"div",null,4),e._Xx(7),e.C$Y()(),e.yuY(8,pi,2,4,"div",5)),2&bt&&(e.E7m("ngIf",Yt.headerTemplate),e.yG2(3),e.eAK("total-padding",Yt.virtualScroll),e.yG2(2),e.eAK("scrollable-content",Yt.virtualScroll&&Yt.items.length),e.yG2(3),e.E7m("ngIf",Yt.footerTemplate))},dependencies:[yi.u_,yi.XV],encapsulation:2,changeDetection:0})}return Ct})(),ot=(()=>{class Ct{get disabled(){return this._disabled}set disabled(xe){this._disabled=this._isDisabled(xe)}constructor(xe){this.elementRef=xe,this.stateChange$=new qt.E,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(xe){xe.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(xe){return null!=xe&&"false"!=`${xe}`}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.GI1(e.GMv))};static#t=this.\u0275cmp=e.In1({type:Ct,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[e.SYr],ngContentSelectors:vi,decls:1,vars:0,template:function(bt,Yt){1&bt&&(e.kPM(),e._Xx(0))},encapsulation:2,changeDetection:0})}return Ct})(),qe=(()=>{class Ct{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(bt){return new(bt||Ct)};static#t=this.\u0275prov=e.wxM({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})(),nt=(()=>{class Ct{warn(xe){console.warn(xe)}static#e=this.\u0275fac=function(bt){return new(bt||Ct)};static#t=this.\u0275prov=e.wxM({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})();const It=new e.UbH("ng-select-selection-model");let ei=(()=>{class Ct{get items(){return this._items}set items(xe){null===xe&&(xe=[]),this._itemsAreUsed=!0,this._items=xe}get compareWith(){return this._compareWith}set compareWith(xe){if(null!=xe&&!Nn(xe))throw Error("`compareWith` must be a function.");this._compareWith=xe}get clearSearchOnAdd(){return sr(this._clearSearchOnAdd)?this._clearSearchOnAdd:sr(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(xe){this._clearSearchOnAdd=xe}get deselectOnClick(){return sr(this._deselectOnClick)?this._deselectOnClick:sr(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(xe){this._deselectOnClick=xe}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(xe,bt,Yt,Xe,Ut,pe,i){this.classes=xe,this.autoFocus=bt,this.config=Yt,this._cd=pe,this._console=i,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=r=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new e._w7,this.focusEvent=new e._w7,this.changeEvent=new e._w7,this.openEvent=new e._w7,this.closeEvent=new e._w7,this.searchEvent=new e._w7,this.clearEvent=new e._w7,this.addEvent=new e._w7,this.removeEvent=new e._w7,this.scroll=new e._w7,this.scrollToEnd=new e._w7,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=ae(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new qt.E,this._keyPress$=new qt.E,this._onChange=r=>{},this._onTouched=()=>{},this.clearItem=r=>{const d=this.selectedItems.find(g=>g.value===r);this.unselect(d)},this.trackByOption=(r,d)=>this.trackByFn?this.trackByFn(d.value):d,this._mergeGlobalConfig(Yt),this.itemsList=new Vt(this,Xe()),this.element=Ut.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(xe=>xe.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(xe){xe.multiple&&this.itemsList.clearSelected(),xe.items&&this._setItems(xe.items.currentValue||[]),xe.isOpen&&(this._manualOpen=sr(xe.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),sr(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(xe){if($t[xe.which]){if(!1===this.keyDownFn(xe))return;this.handleKeyCode(xe)}else xe.key&&1===xe.key.length&&this._keyPress$.next(xe.key.toLocaleLowerCase())}handleKeyCode(xe){this.clearButton&&this.clearButton.nativeElement===xe.target?this.handleKeyCodeClear(xe):this.handleKeyCodeInput(xe)}handleKeyCodeInput(xe){switch(xe.which){case $t.ArrowDown:this._handleArrowDown(xe);break;case $t.ArrowUp:this._handleArrowUp(xe);break;case $t.Space:this._handleSpace(xe);break;case $t.Enter:this._handleEnter(xe);break;case $t.Tab:this._handleTab(xe);break;case $t.Esc:this.close(),xe.preventDefault();break;case $t.Backspace:this._handleBackspace()}}handleKeyCodeClear(xe){xe.which===$t.Enter&&(this.handleClearClick(),xe.preventDefault())}handleMousedown(xe){const bt=xe.target;"INPUT"!==bt.tagName&&xe.preventDefault(),bt.classList.contains("ng-clear-wrapper")?this.handleClearClick():bt.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():bt.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(xe){this.itemsList.clearSelected(),this._handleWriteValue(xe),this._cd.markForCheck()}registerOnChange(xe){this._onChange=xe}registerOnTouched(xe){this._onTouched=xe}setDisabledState(xe){this._disabled=xe,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(xe){!xe||xe.disabled||this.disabled||(this.deselectOnClick&&xe.selected?this.unselect(xe):this.select(xe),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(xe){xe.selected||(this.itemsList.select(xe),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(xe.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(xe){xe&&(this.itemsList.unselect(xe),this.focus(),this._updateNgModel(),this.removeEvent.emit(xe.value))}selectTag(){let xe;xe=Nn(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const bt=Yt=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(Yt,null):this.itemsList.addItem(Yt);!function Yr(Ct){return Ct instanceof Promise}(xe)?xe&&this.select(bt(xe)):xe.then(Yt=>this.select(bt(Yt))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const xe=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(bt=>bt.label.toLowerCase()===xe)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(bt=>bt.label.toLowerCase()===xe))&&!this.loading}showNoItemsFound(){const xe=0===this.itemsList.filteredItems.length;return(xe&&!this._isTypeahead&&!this.loading||xe&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(xe){this._isComposing=!1,!this.searchWhileComposing&&this.filter(xe)}filter(xe){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=xe,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(xe),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:xe,items:this.itemsList.filteredItems.map(bt=>bt.value)}),this.open())}onInputFocus(xe){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(xe),this.focused=!0)}onInputBlur(xe){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(xe),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(xe){xe.disabled||this.itemsList.markItem(xe)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const xe=this.selectedItems&&this.selectedItems[0];this.searchTerm=xe&&xe.label||null}_setItems(xe){const bt=xe[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=sr(bt)?!fr(bt):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(xe),xe.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&sr(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const xe=Yt=>{this.items=Yt.map(Xe=>({$ngOptionValue:Xe.value,$ngOptionLabel:Xe.elementRef.nativeElement.innerHTML,disabled:Xe.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},bt=()=>{const Yt=(0,Jt.U)(this.ngOptions.changes,this._destroy$);(0,Jt.U)(...this.ngOptions.map(Xe=>Xe.stateChange$)).pipe((0,He.a)(Yt)).subscribe(Xe=>{const Ut=this.itemsList.findItem(Xe.value);Ut.disabled=Xe.disabled,Ut.label=Xe.label||Ut.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe((0,Ve.W)(this.ngOptions),(0,He.a)(this._destroy$)).subscribe(Yt=>{this.bindLabel=this._defaultLabel,xe(Yt),bt()})}_isValidWriteValue(xe){if(!sr(xe)||this.multiple&&""===xe||Array.isArray(xe)&&0===xe.length)return!1;const bt=Yt=>!(!sr(this.compareWith)&&fr(Yt)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(Yt)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(xe)?xe.every(Yt=>bt(Yt)):(this._console.warn("Multiple select ngModel should be array."),!1):bt(xe)}_handleWriteValue(xe){if(!this._isValidWriteValue(xe))return;const bt=Yt=>{let Xe=this.itemsList.findItem(Yt);if(Xe)this.itemsList.select(Xe);else{const Ut=fr(Yt);Ut||!Ut&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(Yt,null)):this.bindValue&&(Xe={[this.bindLabel]:null,[this.bindValue]:Yt},this.itemsList.select(this.itemsList.mapItem(Xe,null)))}};this.multiple?xe.forEach(Yt=>bt(Yt)):bt(xe)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,He.a)(this._destroy$),(0,We.y)(xe=>this._pressedKeys.push(xe)),(0,ut.o)(200),(0,vt.I)(()=>this._pressedKeys.length>0),(0,tt.k)(()=>this._pressedKeys.join(""))).subscribe(xe=>{const bt=this.itemsList.findByLabel(xe);bt&&(this.isOpen?(this.itemsList.markItem(bt),this._scrollToMarked(),this._cd.markForCheck()):this.select(bt)),this._pressedKeys=[]})}_setInputAttributes(){const xe=this.searchInput.nativeElement,bt={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const Yt of Object.keys(bt))xe.setAttribute(Yt,bt[Yt])}_updateNgModel(){const xe=[];for(const Yt of this.selectedItems)if(this.bindValue){let Xe=null;Xe=Yt.children?Yt.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(Yt.value,this.bindValue),xe.push(Xe)}else xe.push(Yt.value);const bt=this.selectedItems.map(Yt=>Yt.value);this.multiple?(this._onChange(xe),this.changeEvent.emit(bt)):(this._onChange(sr(xe[0])?xe[0]:null),this.changeEvent.emit(bt[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(xe){this.searchTerm=xe,this._isTypeahead&&this.typeahead.next(xe)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(xe){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),xe.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),xe.preventDefault()):this.showAddTag?(this.selectTag(),xe.preventDefault()):this.close():this.close()}_handleEnter(xe){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}xe.preventDefault()}_handleSpace(xe){this.isOpen||this._manualOpen||(this.open(),xe.preventDefault())}_handleArrowDown(xe){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),xe.preventDefault()}_handleArrowUp(xe){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),xe.preventDefault())}_nextItemIsTag(xe){const bt=this.itemsList.markedIndex+xe;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(bt<0||bt===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const xe=this.searchTerm&&this.searchTerm.trim();return xe&&xe.length>=this.minTermLength}_mergeGlobalConfig(xe){this.placeholder=this.placeholder||xe.placeholder,this.notFoundText=this.notFoundText||xe.notFoundText,this.typeToSearchText=this.typeToSearchText||xe.typeToSearchText,this.addTagText=this.addTagText||xe.addTagText,this.loadingText=this.loadingText||xe.loadingText,this.clearAllText=this.clearAllText||xe.clearAllText,this.virtualScroll=sr(this.virtualScroll)?this.virtualScroll:!!sr(xe.disableVirtualScroll)&&!xe.disableVirtualScroll,this.openOnEnter=sr(this.openOnEnter)?this.openOnEnter:xe.openOnEnter,this.appendTo=this.appendTo||xe.appendTo,this.bindValue=this.bindValue||xe.bindValue,this.bindLabel=this.bindLabel||xe.bindLabel,this.appearance=this.appearance||xe.appearance}static#e=this.\u0275fac=function(bt){return new(bt||Ct)(e.gJ8("class"),e.gJ8("autofocus"),e.GI1(qe),e.GI1(It),e.GI1(e.GMv),e.GI1(e.kD9),e.GI1(nt))};static#t=this.\u0275cmp=e.In1({type:Ct,selectors:[["ng-select"]],contentQueries:function(bt,Yt,Xe){if(1&bt&&(e.szK(Xe,ur,5,e.Yw2),e.szK(Xe,mr,5,e.Yw2),e.szK(Xe,kr,5,e.Yw2),e.szK(Xe,Ft,5,e.Yw2),e.szK(Xe,Ze,5,e.Yw2),e.szK(Xe,Qe,5,e.Yw2),e.szK(Xe,Mt,5,e.Yw2),e.szK(Xe,Tt,5,e.Yw2),e.szK(Xe,Zt,5,e.Yw2),e.szK(Xe,Pt,5,e.Yw2),e.szK(Xe,Nt,5,e.Yw2),e.szK(Xe,ot,5)),2&bt){let Ut;e.wto(Ut=e.Gqi())&&(Yt.optionTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.optgroupTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.labelTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.multiLabelTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.headerTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.footerTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.notFoundTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.typeToSearchTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.loadingTextTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.tagTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.loadingSpinnerTemplate=Ut.first),e.wto(Ut=e.Gqi())&&(Yt.ngOptions=Ut)}},viewQuery:function(bt,Yt){if(1&bt&&(e.CC$(st,5),e.CC$(Ti,7),e.CC$(Ji,5)),2&bt){let Xe;e.wto(Xe=e.Gqi())&&(Yt.dropdownPanel=Xe.first),e.wto(Xe=e.Gqi())&&(Yt.searchInput=Xe.first),e.wto(Xe=e.Gqi())&&(Yt.clearButton=Xe.first)}},hostVars:20,hostBindings:function(bt,Yt){1&bt&&e.qCj("keydown",function(Ut){return Yt.handleKeyDown(Ut)}),2&bt&&e.eAK("ng-select-typeahead",Yt.typeahead)("ng-select-multiple",Yt.multiple)("ng-select-taggable",Yt.addTag)("ng-select-searchable",Yt.searchable)("ng-select-clearable",Yt.clearable)("ng-select-opened",Yt.isOpen)("ng-select",Yt.useDefaultClass)("ng-select-disabled",Yt.disabled)("ng-select-filtered",Yt.filtered)("ng-select-single",Yt.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[e.M5G([{provide:Mi.Y6,useExisting:(0,e.wd)(()=>Ct),multi:!0},Hi]),e.SYr],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(bt,Yt){if(1&bt){const Xe=e.KQA();e.I0R(0,"div",0),e.qCj("mousedown",function(pe){return Yt.handleMousedown(pe)}),e.I0R(1,"div",1)(2,"div",2),e.OEk(3),e.C$Y(),e.yuY(4,ji,2,2,"ng-container",3)(5,di,1,5,null,3),e.I0R(6,"div",4)(7,"input",5,6),e.qCj("input",function(){e.usT(Xe);const pe=e.Gew(8);return e.CGJ(Yt.filter(pe.value))})("compositionstart",function(){return Yt.onCompositionStart()})("compositionend",function(){e.usT(Xe);const pe=e.Gew(8);return e.CGJ(Yt.onCompositionEnd(pe.value))})("focus",function(pe){return Yt.onInputFocus(pe)})("blur",function(pe){return Yt.onInputBlur(pe)})("change",function(pe){return pe.stopPropagation()}),e.C$Y()()(),e.yuY(9,Ln,4,1,"ng-container",3)(10,Gn,4,1,"span",7),e.I0R(11,"span",8),e.wR5(12,"span",9),e.C$Y()(),e.yuY(13,br,7,19,"ng-dropdown-panel",10)}2&bt&&(e.eAK("ng-appearance-outline","outline"===Yt.appearance)("ng-has-value",Yt.hasValue),e.yG2(3),e.cNF(Yt.placeholder),e.yG2(),e.E7m("ngIf",(!Yt.multiLabelTemplate||!Yt.multiple)&&Yt.selectedItems.length>0),e.yG2(),e.E7m("ngIf",Yt.multiple&&Yt.multiLabelTemplate&&Yt.selectedValues.length>0),e.yG2(),e.e48("aria-expanded",Yt.isOpen)("aria-owns",Yt.isOpen?Yt.dropdownId:null),e.yG2(),e.E7m("readOnly",!Yt.searchable||Yt.itemsList.maxItemsSelected)("disabled",Yt.disabled)("value",Yt.searchTerm?Yt.searchTerm:""),e.e48("id",Yt.labelForId)("tabindex",Yt.tabIndex)("aria-activedescendant",Yt.isOpen?null==Yt.itemsList||null==Yt.itemsList.markedItem?null:Yt.itemsList.markedItem.htmlId:null)("aria-controls",Yt.isOpen?Yt.dropdownId:null),e.yG2(2),e.E7m("ngIf",Yt.loading),e.yG2(),e.E7m("ngIf",Yt.showClear()),e.yG2(3),e.E7m("ngIf",Yt.isOpen))},dependencies:[yi.QF,yi.ay,yi.u_,yi.XV,st,_r],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return Ct})();function Yi(){return new Ei}class Ei{constructor(){this._selected=[]}get value(){return this._selected}select(Ot,xe,bt){if(Ot.selected=!0,(!Ot.children||!xe&&bt)&&this._selected.push(Ot),xe)if(Ot.parent){const Yt=Ot.parent.children.length,Xe=Ot.parent.children.filter(Ut=>Ut.selected).length;Ot.parent.selected=Yt===Xe}else Ot.children&&(this._setChildrenSelectedState(Ot.children,!0),this._removeChildren(Ot),this._selected=bt&&this._activeChildren(Ot)?[...this._selected.filter(Yt=>Yt.parent!==Ot),Ot]:[...this._selected,...Ot.children.filter(Yt=>!Yt.disabled)])}unselect(Ot,xe){if(this._selected=this._selected.filter(bt=>bt!==Ot),Ot.selected=!1,xe)if(Ot.parent&&Ot.parent.selected){const bt=Ot.parent.children;this._removeParent(Ot.parent),this._removeChildren(Ot.parent),this._selected.push(...bt.filter(Yt=>Yt!==Ot&&!Yt.disabled)),Ot.parent.selected=!1}else Ot.children&&(this._setChildrenSelectedState(Ot.children,!1),this._removeChildren(Ot))}clear(Ot){this._selected=Ot?this._selected.filter(xe=>xe.disabled):[]}_setChildrenSelectedState(Ot,xe){for(const bt of Ot)bt.disabled||(bt.selected=xe)}_removeChildren(Ot){this._selected=[...this._selected.filter(xe=>xe.parent!==Ot),...Ot.children.filter(xe=>xe.parent===Ot&&xe.disabled&&xe.selected)]}_removeParent(Ot){this._selected=this._selected.filter(xe=>xe!==Ot)}_activeChildren(Ot){return Ot.children.every(xe=>!xe.disabled||xe.selected)}}let Ki=(()=>{class Ct{static#e=this.\u0275fac=function(bt){return new(bt||Ct)};static#t=this.\u0275mod=e.a4G({type:Ct});static#i=this.\u0275inj=e.s3X({providers:[{provide:It,useValue:Yi}],imports:[yi.MD]})}return Ct})()},9100:(ms,lr,Et)=>{"use strict";Et.d(lr,{gZ:()=>Zi,kV:()=>pn});var e=Et(4496),Mi=Et(1368),He=Et(6504),c=Et(800),Z=Et(3616),Be=Et(5084),we=Et(4704),Se=Et(6700),Le=Et(6684),Te=Et(7368),Ve=Et(8716),We=Et(5657);const ut=()=>{const ji=typeof window<"u"?window:void 0;return ji&&ji.tinymce?ji.tinymce:null};let vt=(()=>{class ji{onBeforePaste=new e._w7;onBlur=new e._w7;onClick=new e._w7;onCompositionEnd=new e._w7;onCompositionStart=new e._w7;onCompositionUpdate=new e._w7;onContextMenu=new e._w7;onCopy=new e._w7;onCut=new e._w7;onDblclick=new e._w7;onDrag=new e._w7;onDragDrop=new e._w7;onDragEnd=new e._w7;onDragGesture=new e._w7;onDragOver=new e._w7;onDrop=new e._w7;onFocus=new e._w7;onFocusIn=new e._w7;onFocusOut=new e._w7;onKeyDown=new e._w7;onKeyPress=new e._w7;onKeyUp=new e._w7;onMouseDown=new e._w7;onMouseEnter=new e._w7;onMouseLeave=new e._w7;onMouseMove=new e._w7;onMouseOut=new e._w7;onMouseOver=new e._w7;onMouseUp=new e._w7;onPaste=new e._w7;onSelectionChange=new e._w7;onActivate=new e._w7;onAddUndo=new e._w7;onBeforeAddUndo=new e._w7;onBeforeExecCommand=new e._w7;onBeforeGetContent=new e._w7;onBeforeRenderUI=new e._w7;onBeforeSetContent=new e._w7;onChange=new e._w7;onClearUndos=new e._w7;onDeactivate=new e._w7;onDirty=new e._w7;onExecCommand=new e._w7;onGetContent=new e._w7;onHide=new e._w7;onInit=new e._w7;onInput=new e._w7;onInitNgModel=new e._w7;onLoadContent=new e._w7;onNodeChange=new e._w7;onPostProcess=new e._w7;onPostRender=new e._w7;onPreInit=new e._w7;onPreProcess=new e._w7;onProgressState=new e._w7;onRedo=new e._w7;onRemove=new e._w7;onReset=new e._w7;onResizeEditor=new e._w7;onSaveContent=new e._w7;onSetAttrib=new e._w7;onObjectResizeStart=new e._w7;onObjectResized=new e._w7;onObjectSelected=new e._w7;onSetContent=new e._w7;onShow=new e._w7;onSubmit=new e._w7;onUndo=new e._w7;onVisualAid=new e._w7;static \u0275fac=function(di){return new(di||ji)};static \u0275dir=e.Sc5({type:ji,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return ji})();const tt=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ze=(ji,gn,tn)=>(0,c.w)(ji,gn).pipe((0,Z.a)(tn)),Je=(ji,gn)=>"string"==typeof ji?ji.split(",").map(tn=>tn.trim()):Array.isArray(ji)?ji:gn;let Jt=0;const rt=ji=>typeof ji<"u"&&"textarea"===ji.tagName.toLowerCase(),bi=ji=>typeof ji>"u"||""===ji?[]:Array.isArray(ji)?ji:ji.split(" "),ci=(ji,gn)=>bi(ji).concat(bi(gn)),ti=()=>{},St=ji=>null==ji,Ji=(()=>{const ji=new Se.g(null),gn=ji.pipe((0,Le.I)(Boolean),(0,Te.G)(([tn,di])=>{const Wi=tn.createElement("script");return Wi.referrerPolicy="origin",Wi.type="application/javascript",Wi.src=di,tn.head.appendChild(Wi),(0,c.w)(Wi,"load").pipe(ji=>ji.pipe((0,Be.K)(),(0,we.k)(()=>{})))}),(0,Ve.C)({bufferSize:1,refCount:!0}));return{load:(...tn)=>(ji.getValue()||ji.next(tn),gn),reinitialize:()=>{ji.next(null)}}})(),Ii=new e.UbH("TINYMCE_SCRIPT_SRC"),ki={provide:He.Y6,useExisting:(0,e.wd)(()=>Zi),multi:!0};let Zi=(()=>{class ji extends vt{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(tn){this._disabled=tn,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(tn?"readonly":"design"):this._editor.setMode(tn?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=ti;onChangeCallback;destroy$=new We.E;constructor(tn,di,Wi,_n,Ln){super(),this.cdRef=Wi,this.platformId=_n,this.tinymceScriptSrc=Ln,this._elementRef=tn,this.ngZone=di}writeValue(tn){this._editor&&this._editor.initialized?this._editor.setContent(St(tn)?"":tn):this.initialValue=null===tn?void 0:tn}registerOnChange(tn){this.onChangeCallback=tn}registerOnTouched(tn){this.onTouchedCallback=tn}setDisabledState(tn){this.disabled=tn}ngAfterViewInit(){(0,Mi.c0)(this.platformId)&&(this.id=this.id||(ji=>{const tn=(new Date).getTime(),di=Math.floor(1e9*Math.random());return Jt++,"tiny-angular_"+di+Jt+String(tn)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==ut()?this.initialise():this._element&&this._element.ownerDocument&&Ji.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,Z.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==ut()&&ut().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,rt(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const tn={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:ci(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:di=>{this._editor=di,ze(di,"init",this.destroy$).subscribe(()=>{this.initEditor(di)}),((ji,gn,tn)=>{(ji=>{const gn=Je(ji.ignoreEvents,[]);return Je(ji.allowedEvents,tt).filter(di=>tt.includes(di)&&!gn.includes(di))})(ji).forEach(Wi=>{const _n=ji[Wi];ze(gn,Wi.substring(2),tn).subscribe(Ln=>{(ji=>ji.observed||ji.observers?.length>0)(_n)&&ji.ngZone.run(()=>_n.emit({event:Ln,editor:gn}))})})})(this,di,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(di)}};rt(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{ut().init(tn)})};getScriptSrc(){return St(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(tn){ze(tn,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),ze(tn,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(tn))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{tn.setContent(this.initialValue),tn.getContent()!==this.initialValue&&this.emitOnChange(tn),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(tn)})}emitOnChange(tn){this.onChangeCallback&&this.onChangeCallback(tn.getContent({format:this.outputFormat}))}static \u0275fac=function(di){return new(di||ji)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(e.kD9),e.GI1(e.AHE),e.GI1(Ii,8))};static \u0275cmp=e.In1({type:ji,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[e.M5G([ki]),e.eg9,e.UHJ],decls:0,vars:0,template:function(di,Wi){},dependencies:[Mi.MD,He.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return ji})(),pn=(()=>{class ji{static \u0275fac=function(di){return new(di||ji)};static \u0275mod=e.a4G({type:ji});static \u0275inj=e.s3X({imports:[Zi]})}return ji})()},9884:(ms,lr,Et)=>{"use strict";Et.d(lr,{c1:()=>on});var e=Et(4496),Mi=Et(6504),He=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],c={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(jt){return typeof console<"u"&&console.warn(jt)},getWeek:function(jt){var gi=new Date(jt.getTime());gi.setHours(0,0,0,0),gi.setDate(gi.getDate()+3-(gi.getDay()+6)%7);var V=new Date(gi.getFullYear(),0,4);return 1+Math.round(((gi.getTime()-V.getTime())/864e5-3+(V.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Z={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(jt){var gi=jt%100;if(gi>3&&gi<21)return"th";switch(gi%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const Be=Z;var we=function(jt,gi){return void 0===gi&&(gi=2),("000"+jt).slice(-1*gi)},Se=function(jt){return!0===jt?1:0};function Le(jt,gi){var V;return function(){var Bi=this,$i=arguments;clearTimeout(V),V=setTimeout(function(){return jt.apply(Bi,$i)},gi)}}var Te=function(jt){return jt instanceof Array?jt:[jt]};function Ve(jt,gi,V){if(!0===V)return jt.classList.add(gi);jt.classList.remove(gi)}function We(jt,gi,V){var Bi=window.document.createElement(jt);return V=V||"",Bi.className=gi=gi||"",void 0!==V&&(Bi.textContent=V),Bi}function ut(jt){for(;jt.firstChild;)jt.removeChild(jt.firstChild)}function vt(jt,gi){return gi(jt)?jt:jt.parentNode?vt(jt.parentNode,gi):void 0}function tt(jt,gi){var V=We("div","numInputWrapper"),Bi=We("input","numInput "+jt),$i=We("span","arrowUp"),en=We("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?Bi.type="number":(Bi.type="text",Bi.pattern="\\d*"),void 0!==gi)for(var Xi in gi)Bi.setAttribute(Xi,gi[Xi]);return V.appendChild(Bi),V.appendChild($i),V.appendChild(en),V}function ze(jt){try{return"function"==typeof jt.composedPath?jt.composedPath()[0]:jt.target}catch{return jt.target}}var ct=function(){},qt=function(jt,gi,V){return V.months[gi?"shorthand":"longhand"][jt]},Je={D:ct,F:function(jt,gi,V){jt.setMonth(V.months.longhand.indexOf(gi))},G:function(jt,gi){jt.setHours((jt.getHours()>=12?12:0)+parseFloat(gi))},H:function(jt,gi){jt.setHours(parseFloat(gi))},J:function(jt,gi){jt.setDate(parseFloat(gi))},K:function(jt,gi,V){jt.setHours(jt.getHours()%12+12*Se(new RegExp(V.amPM[1],"i").test(gi)))},M:function(jt,gi,V){jt.setMonth(V.months.shorthand.indexOf(gi))},S:function(jt,gi){jt.setSeconds(parseFloat(gi))},U:function(jt,gi){return new Date(1e3*parseFloat(gi))},W:function(jt,gi,V){var Bi=parseInt(gi),$i=new Date(jt.getFullYear(),0,2+7*(Bi-1),0,0,0,0);return $i.setDate($i.getDate()-$i.getDay()+V.firstDayOfWeek),$i},Y:function(jt,gi){jt.setFullYear(parseFloat(gi))},Z:function(jt,gi){return new Date(gi)},d:function(jt,gi){jt.setDate(parseFloat(gi))},h:function(jt,gi){jt.setHours((jt.getHours()>=12?12:0)+parseFloat(gi))},i:function(jt,gi){jt.setMinutes(parseFloat(gi))},j:function(jt,gi){jt.setDate(parseFloat(gi))},l:ct,m:function(jt,gi){jt.setMonth(parseFloat(gi)-1)},n:function(jt,gi){jt.setMonth(parseFloat(gi)-1)},s:function(jt,gi){jt.setSeconds(parseFloat(gi))},u:function(jt,gi){return new Date(parseFloat(gi))},w:ct,y:function(jt,gi){jt.setFullYear(2e3+parseFloat(gi))}},Jt={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},yi={Z:function(jt){return jt.toISOString()},D:function(jt,gi,V){return gi.weekdays.shorthand[yi.w(jt,gi,V)]},F:function(jt,gi,V){return qt(yi.n(jt,gi,V)-1,!1,gi)},G:function(jt,gi,V){return we(yi.h(jt,gi,V))},H:function(jt){return we(jt.getHours())},J:function(jt,gi){return void 0!==gi.ordinal?jt.getDate()+gi.ordinal(jt.getDate()):jt.getDate()},K:function(jt,gi){return gi.amPM[Se(jt.getHours()>11)]},M:function(jt,gi){return qt(jt.getMonth(),!0,gi)},S:function(jt){return we(jt.getSeconds())},U:function(jt){return jt.getTime()/1e3},W:function(jt,gi,V){return V.getWeek(jt)},Y:function(jt){return we(jt.getFullYear(),4)},d:function(jt){return we(jt.getDate())},h:function(jt){return jt.getHours()%12?jt.getHours()%12:12},i:function(jt){return we(jt.getMinutes())},j:function(jt){return jt.getDate()},l:function(jt,gi){return gi.weekdays.longhand[jt.getDay()]},m:function(jt){return we(jt.getMonth()+1)},n:function(jt){return jt.getMonth()+1},s:function(jt){return jt.getSeconds()},u:function(jt){return jt.getTime()},w:function(jt){return jt.getDay()},y:function(jt){return String(jt.getFullYear()).substring(2)}},rt=function(jt){var gi=jt.config,V=void 0===gi?c:gi,Bi=jt.l10n,$i=void 0===Bi?Z:Bi,en=jt.isMobile,Xi=void 0!==en&&en;return function(Qi,Pn,fn){var Ci=fn||$i;return void 0===V.formatDate||Xi?Pn.split("").map(function(En,Dn,cn){return yi[En]&&"\\"!==cn[Dn-1]?yi[En](Qi,Ci,V):"\\"!==En?En:""}).join(""):V.formatDate(Qi,Pn,Ci)}},bi=function(jt){var gi=jt.config,V=void 0===gi?c:gi,Bi=jt.l10n,$i=void 0===Bi?Z:Bi;return function(en,Xi,Qi,Pn){if(0===en||en){var Ci,fn=Pn||$i,En=en;if(en instanceof Date)Ci=new Date(en.getTime());else if("string"!=typeof en&&void 0!==en.toFixed)Ci=new Date(en);else if("string"==typeof en){var Dn=Xi||(V||c).dateFormat,cn=String(en).trim();if("today"===cn)Ci=new Date,Qi=!0;else if(V&&V.parseDate)Ci=V.parseDate(en,Dn);else if(/Z$/.test(cn)||/GMT$/.test(cn))Ci=new Date(en);else{for(var br=void 0,wi=[],Jn=0,zn=0,On="";Jn<Dn.length;Jn++){var sr=Dn[Jn],fr="\\"===sr;if(Jt[sr]&&"\\"!==Dn[Jn-1]&&!fr){On+=Jt[sr];var Nn=new RegExp(On).exec(en);Nn&&(br=!0)&&wi["Y"!==sr?"push":"unshift"]({fn:Je[sr],val:Nn[++zn]})}else fr||(On+=".")}Ci=V&&V.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),wi.forEach(function(_r){return Ci=(0,_r.fn)(Ci,_r.val,fn)||Ci}),Ci=br?Ci:void 0}}return Ci instanceof Date&&!isNaN(Ci.getTime())?(!0===Qi&&Ci.setHours(0,0,0,0),Ci):void V.errorHandler(new Error("Invalid date provided: "+En))}}};function ci(jt,gi,V){return void 0===V&&(V=!0),!1!==V?new Date(jt.getTime()).setHours(0,0,0,0)-new Date(gi.getTime()).setHours(0,0,0,0):jt.getTime()-gi.getTime()}var St=function(jt,gi,V){return jt>Math.min(gi,V)&&jt<Math.max(gi,V)},pi=function(jt,gi,V){return 3600*jt+60*gi+V},vi=function(jt){var gi=Math.floor(jt/3600),V=(jt-3600*gi)/60;return[gi,V,jt-3600*gi-60*V]},Ti={DAY:864e5};function Ji(jt){var gi=jt.defaultHour,V=jt.defaultMinute,Bi=jt.defaultSeconds;if(void 0!==jt.minDate){var $i=jt.minDate.getHours(),en=jt.minDate.getMinutes(),Xi=jt.minDate.getSeconds();gi<$i&&(gi=$i),gi===$i&&V<en&&(V=en),gi===$i&&V===en&&Bi<Xi&&(Bi=jt.minDate.getSeconds())}if(void 0!==jt.maxDate){var Qi=jt.maxDate.getHours(),Pn=jt.maxDate.getMinutes();(gi=Math.min(gi,Qi))===Qi&&(V=Math.min(Pn,V)),gi===Qi&&V===Pn&&(Bi=jt.maxDate.getSeconds())}return{hours:gi,minutes:V,seconds:Bi}}Et(6900);var ki=function(){return ki=Object.assign||function(jt){for(var gi,V=1,Bi=arguments.length;V<Bi;V++)for(var $i in gi=arguments[V])Object.prototype.hasOwnProperty.call(gi,$i)&&(jt[$i]=gi[$i]);return jt},ki.apply(this,arguments)},Zi=function(){for(var jt=0,gi=0,V=arguments.length;gi<V;gi++)jt+=arguments[gi].length;var Bi=Array(jt),$i=0;for(gi=0;gi<V;gi++)for(var en=arguments[gi],Xi=0,Qi=en.length;Xi<Qi;Xi++,$i++)Bi[$i]=en[Xi];return Bi},pn=300;function ji(jt,gi){var V={config:ki(ki({},c),tn.defaultConfig),l10n:Be};function en(){var te;return(null===(te=V.calendarContainer)||void 0===te?void 0:te.getRootNode()).activeElement||document.activeElement}function Xi(te){return te.bind(V)}function Qi(){var te=V.config;!1===te.weekNumbers&&1===te.showMonths||!0!==te.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==V.calendarContainer&&(V.calendarContainer.style.visibility="hidden",V.calendarContainer.style.display="block"),void 0!==V.daysContainer){var oe=(V.days.offsetWidth+1)*te.showMonths;V.daysContainer.style.width=oe+"px",V.calendarContainer.style.width=oe+(void 0!==V.weekWrapper?V.weekWrapper.offsetWidth:0)+"px",V.calendarContainer.style.removeProperty("visibility"),V.calendarContainer.style.removeProperty("display")}})}function Pn(te){if(0===V.selectedDates.length){var oe=void 0===V.config.minDate||ci(new Date,V.config.minDate)>=0?new Date:new Date(V.config.minDate.getTime()),ye=Ji(V.config);oe.setHours(ye.hours,ye.minutes,ye.seconds,oe.getMilliseconds()),V.selectedDates=[oe],V.latestSelectedDateObj=oe}void 0!==te&&"blur"!==te.type&&function re(te){te.preventDefault();var oe="keydown"===te.type,ye=ze(te),Fe=ye;void 0!==V.amPM&&ye===V.amPM&&(V.amPM.textContent=V.l10n.amPM[Se(V.amPM.textContent===V.l10n.amPM[0])]);var ht=parseFloat(Fe.getAttribute("min")),yt=parseFloat(Fe.getAttribute("max")),ii=parseFloat(Fe.getAttribute("step")),hi=parseInt(Fe.value,10),Pi=hi+ii*(te.delta||(oe?38===te.which?1:-1:0));if(typeof Fe.value<"u"&&2===Fe.value.length){var nn=Fe===V.hourElement,Tn=Fe===V.minuteElement;Pi<ht?(Pi=yt+Pi+Se(!nn)+(Se(nn)&&Se(!V.amPM)),Tn&&fr(void 0,-1,V.hourElement)):Pi>yt&&(Pi=Fe===V.hourElement?Pi-yt-Se(!V.amPM):ht,Tn&&fr(void 0,1,V.hourElement)),V.amPM&&nn&&(1===ii?Pi+hi===23:Math.abs(Pi-hi)>ii)&&(V.amPM.textContent=V.l10n.amPM[Se(V.amPM.textContent===V.l10n.amPM[0])]),Fe.value=we(Pi)}}(te);var Fe=V._input.value;En(),Re(),V._input.value!==Fe&&V._debouncedChange()}function En(){if(void 0!==V.hourElement&&void 0!==V.minuteElement){var te=(parseInt(V.hourElement.value.slice(-2),10)||0)%24,oe=(parseInt(V.minuteElement.value,10)||0)%60,ye=void 0!==V.secondElement?(parseInt(V.secondElement.value,10)||0)%60:0;void 0!==V.amPM&&(te=function fn(te,oe){return te%12+12*Se(oe===V.l10n.amPM[1])}(te,V.amPM.textContent));var Fe=void 0!==V.config.minTime||V.config.minDate&&V.minDateHasTime&&V.latestSelectedDateObj&&0===ci(V.latestSelectedDateObj,V.config.minDate,!0),ht=void 0!==V.config.maxTime||V.config.maxDate&&V.maxDateHasTime&&V.latestSelectedDateObj&&0===ci(V.latestSelectedDateObj,V.config.maxDate,!0);if(void 0!==V.config.maxTime&&void 0!==V.config.minTime&&V.config.minTime>V.config.maxTime){var yt=pi(V.config.minTime.getHours(),V.config.minTime.getMinutes(),V.config.minTime.getSeconds()),ii=pi(V.config.maxTime.getHours(),V.config.maxTime.getMinutes(),V.config.maxTime.getSeconds()),hi=pi(te,oe,ye);if(hi>ii&&hi<yt){var xi=vi(yt);te=xi[0],oe=xi[1],ye=xi[2]}}else{if(ht){var Pi=void 0!==V.config.maxTime?V.config.maxTime:V.config.maxDate;(te=Math.min(te,Pi.getHours()))===Pi.getHours()&&(oe=Math.min(oe,Pi.getMinutes())),oe===Pi.getMinutes()&&(ye=Math.min(ye,Pi.getSeconds()))}if(Fe){var nn=void 0!==V.config.minTime?V.config.minTime:V.config.minDate;(te=Math.max(te,nn.getHours()))===nn.getHours()&&oe<nn.getMinutes()&&(oe=nn.getMinutes()),oe===nn.getMinutes()&&(ye=Math.max(ye,nn.getSeconds()))}}cn(te,oe,ye)}}function Dn(te){var oe=te||V.latestSelectedDateObj;oe&&oe instanceof Date&&cn(oe.getHours(),oe.getMinutes(),oe.getSeconds())}function cn(te,oe,ye){void 0!==V.latestSelectedDateObj&&V.latestSelectedDateObj.setHours(te%24,oe,ye||0,0),V.hourElement&&V.minuteElement&&!V.isMobile&&(V.hourElement.value=we(V.config.time_24hr?te:(12+te)%12+12*Se(te%12==0)),V.minuteElement.value=we(oe),void 0!==V.amPM&&(V.amPM.textContent=V.l10n.amPM[Se(te>=12)]),void 0!==V.secondElement&&(V.secondElement.value=we(ye)))}function br(te){var oe=ze(te),ye=parseInt(oe.value)+(te.delta||0);(ye/1e3>1||"Enter"===te.key&&!/[^\d]/.test(ye.toString()))&&st(ye)}function wi(te,oe,ye,Fe){return oe instanceof Array?oe.forEach(function(ht){return wi(te,ht,ye,Fe)}):te instanceof Array?te.forEach(function(ht){return wi(ht,oe,ye,Fe)}):(te.addEventListener(oe,ye,Fe),void V._handlers.push({remove:function(){return te.removeEventListener(oe,ye,Fe)}}))}function Jn(){Q("onChange")}function On(te,oe){var ye=void 0!==te?V.parseDate(te):V.latestSelectedDateObj||(V.config.minDate&&V.config.minDate>V.now?V.config.minDate:V.config.maxDate&&V.config.maxDate<V.now?V.config.maxDate:V.now),Fe=V.currentYear,ht=V.currentMonth;try{void 0!==ye&&(V.currentYear=ye.getFullYear(),V.currentMonth=ye.getMonth())}catch(yt){yt.message="Invalid date supplied: "+ye,V.config.errorHandler(yt)}oe&&V.currentYear!==Fe&&(Q("onYearChange"),Qe()),oe&&(V.currentYear!==Fe||V.currentMonth!==ht)&&Q("onMonthChange"),V.redraw()}function sr(te){var oe=ze(te);~oe.className.indexOf("arrow")&&fr(te,oe.classList.contains("arrowUp")?1:-1)}function fr(te,oe,ye){var Fe=te&&ze(te),ht=ye||Fe&&Fe.parentNode&&Fe.parentNode.firstChild,yt=ce("increment");yt.delta=oe,ht&&ht.dispatchEvent(yt)}function Nn(te,oe,ye,Fe){var ht=ot(oe,!0),yt=We("span",te,oe.getDate().toString());return yt.dateObj=oe,yt.$i=Fe,yt.setAttribute("aria-label",V.formatDate(oe,V.config.ariaDateFormat)),-1===te.indexOf("hidden")&&0===ci(oe,V.now)&&(V.todayDateElem=yt,yt.classList.add("today"),yt.setAttribute("aria-current","date")),ht?(yt.tabIndex=-1,me(oe)&&(yt.classList.add("selected"),V.selectedDateElem=yt,"range"===V.config.mode&&(Ve(yt,"startRange",V.selectedDates[0]&&0===ci(oe,V.selectedDates[0],!0)),Ve(yt,"endRange",V.selectedDates[1]&&0===ci(oe,V.selectedDates[1],!0)),"nextMonthDay"===te&&yt.classList.add("inRange")))):yt.classList.add("flatpickr-disabled"),"range"===V.config.mode&&function Ee(te){return!("range"!==V.config.mode||V.selectedDates.length<2)&&ci(te,V.selectedDates[0])>=0&&ci(te,V.selectedDates[1])<=0}(oe)&&!me(oe)&&yt.classList.add("inRange"),V.weekNumbers&&1===V.config.showMonths&&"prevMonthDay"!==te&&Fe%7==6&&V.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+V.config.getWeek(oe)+"</span>"),Q("onDayCreate",yt),yt}function _r(te){te.focus(),"range"===V.config.mode&&ei(te)}function ur(te){for(var ye=te>0?V.config.showMonths:-1,Fe=te>0?0:V.config.showMonths-1;Fe!=ye;Fe+=te)for(var ht=V.daysContainer.children[Fe],ii=te>0?ht.children.length:-1,hi=te>0?0:ht.children.length-1;hi!=ii;hi+=te){var xi=ht.children[hi];if(-1===xi.className.indexOf("hidden")&&ot(xi.dateObj))return xi}}function kr(te,oe){var ye=en(),Fe=qe(ye||document.body),ht=void 0!==te?te:Fe?ye:void 0!==V.selectedDateElem&&qe(V.selectedDateElem)?V.selectedDateElem:void 0!==V.todayDateElem&&qe(V.todayDateElem)?V.todayDateElem:ur(oe>0?1:-1);void 0===ht?V._input.focus():Fe?function mr(te,oe){for(var ye=-1===te.className.indexOf("Month")?te.dateObj.getMonth():V.currentMonth,Fe=oe>0?V.config.showMonths:-1,ht=oe>0?1:-1,yt=ye-V.currentMonth;yt!=Fe;yt+=ht)for(var ii=V.daysContainer.children[yt],xi=ii.children.length,Pi=ye-V.currentMonth===yt?te.$i+oe:oe<0?ii.children.length-1:0;Pi>=0&&Pi<xi&&Pi!=(oe>0?xi:-1);Pi+=ht){var nn=ii.children[Pi];if(-1===nn.className.indexOf("hidden")&&ot(nn.dateObj)&&Math.abs(te.$i-Pi)>=Math.abs(oe))return _r(nn)}V.changeMonth(ht),kr(ur(ht),0)}(ht,oe):_r(ht)}function Ft(te,oe){for(var ye=(new Date(te,oe,1).getDay()-V.l10n.firstDayOfWeek+7)%7,Fe=V.utils.getDaysInMonth((oe-1+12)%12,te),ht=V.utils.getDaysInMonth(oe,te),yt=window.document.createDocumentFragment(),ii=V.config.showMonths>1,hi=ii?"prevMonthDay hidden":"prevMonthDay",xi=ii?"nextMonthDay hidden":"nextMonthDay",Pi=Fe+1-ye,nn=0;Pi<=Fe;Pi++,nn++)yt.appendChild(Nn("flatpickr-day "+hi,new Date(te,oe-1,Pi),0,nn));for(Pi=1;Pi<=ht;Pi++,nn++)yt.appendChild(Nn("flatpickr-day",new Date(te,oe,Pi),0,nn));for(var Tn=ht+1;Tn<=42-ye&&(1===V.config.showMonths||nn%7!=0);Tn++,nn++)yt.appendChild(Nn("flatpickr-day "+xi,new Date(te,oe+1,Tn%ht),0,nn));var Xn=We("div","dayContainer");return Xn.appendChild(yt),Xn}function Ze(){if(void 0!==V.daysContainer){ut(V.daysContainer),V.weekNumbers&&ut(V.weekNumbers);for(var te=document.createDocumentFragment(),oe=0;oe<V.config.showMonths;oe++){var ye=new Date(V.currentYear,V.currentMonth,1);ye.setMonth(V.currentMonth+oe),te.appendChild(Ft(ye.getFullYear(),ye.getMonth()))}V.daysContainer.appendChild(te),V.days=V.daysContainer.firstChild,"range"===V.config.mode&&1===V.selectedDates.length&&ei()}}function Qe(){if(!(V.config.showMonths>1||"dropdown"!==V.config.monthSelectorType)){V.monthsDropdownContainer.tabIndex=-1,V.monthsDropdownContainer.innerHTML="";for(var oe=0;oe<12;oe++)if(Fe=oe,!(void 0!==V.config.minDate&&V.currentYear===V.config.minDate.getFullYear()&&Fe<V.config.minDate.getMonth()||void 0!==V.config.maxDate&&V.currentYear===V.config.maxDate.getFullYear()&&Fe>V.config.maxDate.getMonth())){var ye=We("option","flatpickr-monthDropdown-month");ye.value=new Date(V.currentYear,oe).getMonth().toString(),ye.textContent=qt(oe,V.config.shorthandCurrentMonth,V.l10n),ye.tabIndex=-1,V.currentMonth===oe&&(ye.selected=!0),V.monthsDropdownContainer.appendChild(ye)}}var Fe}function Mt(){var ye,te=We("div","flatpickr-month"),oe=window.document.createDocumentFragment();V.config.showMonths>1||"static"===V.config.monthSelectorType?ye=We("span","cur-month"):(V.monthsDropdownContainer=We("select","flatpickr-monthDropdown-months"),V.monthsDropdownContainer.setAttribute("aria-label",V.l10n.monthAriaLabel),wi(V.monthsDropdownContainer,"change",function(ii){var hi=ze(ii),xi=parseInt(hi.value,10);V.changeMonth(xi-V.currentMonth),Q("onMonthChange")}),Qe(),ye=V.monthsDropdownContainer);var Fe=tt("cur-year",{tabindex:"-1"}),ht=Fe.getElementsByTagName("input")[0];ht.setAttribute("aria-label",V.l10n.yearAriaLabel),V.config.minDate&&ht.setAttribute("min",V.config.minDate.getFullYear().toString()),V.config.maxDate&&(ht.setAttribute("max",V.config.maxDate.getFullYear().toString()),ht.disabled=!!V.config.minDate&&V.config.minDate.getFullYear()===V.config.maxDate.getFullYear());var yt=We("div","flatpickr-current-month");return yt.appendChild(ye),yt.appendChild(Fe),oe.appendChild(yt),te.appendChild(oe),{container:te,yearElement:ht,monthElement:ye}}function Tt(){ut(V.monthNav),V.monthNav.appendChild(V.prevMonthNav),V.config.showMonths&&(V.yearElements=[],V.monthElements=[]);for(var te=V.config.showMonths;te--;){var oe=Mt();V.yearElements.push(oe.yearElement),V.monthElements.push(oe.monthElement),V.monthNav.appendChild(oe.container)}V.monthNav.appendChild(V.nextMonthNav)}function Nt(){V.weekdayContainer?ut(V.weekdayContainer):V.weekdayContainer=We("div","flatpickr-weekdays");for(var te=V.config.showMonths;te--;){var oe=We("div","flatpickr-weekdaycontainer");V.weekdayContainer.appendChild(oe)}return ae(),V.weekdayContainer}function ae(){if(V.weekdayContainer){var te=V.l10n.firstDayOfWeek,oe=Zi(V.l10n.weekdays.shorthand);te>0&&te<oe.length&&(oe=Zi(oe.splice(te,oe.length),oe.splice(0,te)));for(var ye=V.config.showMonths;ye--;)V.weekdayContainer.children[ye].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+oe.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function et(te,oe){void 0===oe&&(oe=!0);var ye=oe?te:te-V.currentMonth;ye<0&&!0===V._hidePrevMonthArrow||ye>0&&!0===V._hideNextMonthArrow||(V.currentMonth+=ye,(V.currentMonth<0||V.currentMonth>11)&&(V.currentYear+=V.currentMonth>11?1:-1,V.currentMonth=(V.currentMonth+12)%12,Q("onYearChange"),Qe()),Ze(),Q("onMonthChange"),De())}function wt(te){return V.calendarContainer.contains(te)}function At(te){if(V.isOpen&&!V.config.inline){var oe=ze(te),ye=wt(oe),ht=!(oe===V.input||oe===V.altInput||V.element.contains(oe)||te.path&&te.path.indexOf&&(~te.path.indexOf(V.input)||~te.path.indexOf(V.altInput))||ye||wt(te.relatedTarget)),yt=!V.config.ignoredFocusElements.some(function(ii){return ii.contains(oe)});ht&&yt&&(V.config.allowInput&&V.setDate(V._input.value,!1,V.config.altInput?V.config.altFormat:V.config.dateFormat),void 0!==V.timeContainer&&void 0!==V.minuteElement&&void 0!==V.hourElement&&""!==V.input.value&&void 0!==V.input.value&&Pn(),V.close(),V.config&&"range"===V.config.mode&&1===V.selectedDates.length&&V.clear(!1))}}function st(te){if(!(!te||V.config.minDate&&te<V.config.minDate.getFullYear()||V.config.maxDate&&te>V.config.maxDate.getFullYear())){var ye=V.currentYear!==te;V.currentYear=te||V.currentYear,V.config.maxDate&&V.currentYear===V.config.maxDate.getFullYear()?V.currentMonth=Math.min(V.config.maxDate.getMonth(),V.currentMonth):V.config.minDate&&V.currentYear===V.config.minDate.getFullYear()&&(V.currentMonth=Math.max(V.config.minDate.getMonth(),V.currentMonth)),ye&&(V.redraw(),Q("onYearChange"),Qe())}}function ot(te,oe){var ye;void 0===oe&&(oe=!0);var Fe=V.parseDate(te,void 0,oe);if(V.config.minDate&&Fe&&ci(Fe,V.config.minDate,void 0!==oe?oe:!V.minDateHasTime)<0||V.config.maxDate&&Fe&&ci(Fe,V.config.maxDate,void 0!==oe?oe:!V.maxDateHasTime)>0)return!1;if(!V.config.enable&&0===V.config.disable.length)return!0;if(void 0===Fe)return!1;for(var ht=!!V.config.enable,yt=null!==(ye=V.config.enable)&&void 0!==ye?ye:V.config.disable,ii=0,hi=void 0;ii<yt.length;ii++){if("function"==typeof(hi=yt[ii])&&hi(Fe))return ht;if(hi instanceof Date&&void 0!==Fe&&hi.getTime()===Fe.getTime())return ht;if("string"==typeof hi){var xi=V.parseDate(hi,void 0,!0);return xi&&xi.getTime()===Fe.getTime()?ht:!ht}if("object"==typeof hi&&void 0!==Fe&&hi.from&&hi.to&&Fe.getTime()>=hi.from.getTime()&&Fe.getTime()<=hi.to.getTime())return ht}return!ht}function qe(te){return void 0!==V.daysContainer&&-1===te.className.indexOf("hidden")&&-1===te.className.indexOf("flatpickr-disabled")&&V.daysContainer.contains(te)}function nt(te){var oe=te.target===V._input,ye=V._input.value.trimEnd()!==Ce();oe&&ye&&(!te.relatedTarget||!wt(te.relatedTarget))&&V.setDate(V._input.value,!0,te.target===V.altInput?V.config.altFormat:V.config.dateFormat)}function It(te){var oe=ze(te),ye=V.config.wrap?jt.contains(oe):oe===V._input,Fe=V.config.allowInput,ht=V.isOpen&&(!Fe||!ye),yt=V.config.inline&&ye&&!Fe;if(13===te.keyCode&&ye){if(Fe)return V.setDate(V._input.value,!0,oe===V.altInput?V.config.altFormat:V.config.dateFormat),V.close(),oe.blur();V.open()}else if(wt(oe)||ht||yt){var ii=!!V.timeContainer&&V.timeContainer.contains(oe);switch(te.keyCode){case 13:ii?(te.preventDefault(),Pn(),pe()):i(te);break;case 27:te.preventDefault(),pe();break;case 8:case 46:ye&&!V.config.allowInput&&(te.preventDefault(),V.clear());break;case 37:case 39:if(ii||ye)V.hourElement&&V.hourElement.focus();else{te.preventDefault();var hi=en();if(void 0!==V.daysContainer&&(!1===Fe||hi&&qe(hi))){var xi=39===te.keyCode?1:-1;te.ctrlKey?(te.stopPropagation(),et(xi),kr(ur(1),0)):kr(void 0,xi)}}break;case 38:case 40:te.preventDefault();var Pi=40===te.keyCode?1:-1;V.daysContainer&&void 0!==oe.$i||oe===V.input||oe===V.altInput?te.ctrlKey?(te.stopPropagation(),st(V.currentYear-Pi),kr(ur(1),0)):ii||kr(void 0,7*Pi):oe===V.currentYearElement?st(V.currentYear-Pi):V.config.enableTime&&(!ii&&V.hourElement&&V.hourElement.focus(),Pn(te),V._debouncedChange());break;case 9:if(ii){var nn=[V.hourElement,V.minuteElement,V.secondElement,V.amPM].concat(V.pluginElements).filter(function(Qn){return Qn}),Tn=nn.indexOf(oe);if(-1!==Tn){var Xn=nn[Tn+(te.shiftKey?-1:1)];te.preventDefault(),(Xn||V._input).focus()}}else!V.config.noCalendar&&V.daysContainer&&V.daysContainer.contains(oe)&&te.shiftKey&&(te.preventDefault(),V._input.focus())}}if(void 0!==V.amPM&&oe===V.amPM)switch(te.key){case V.l10n.amPM[0].charAt(0):case V.l10n.amPM[0].charAt(0).toLowerCase():V.amPM.textContent=V.l10n.amPM[0],En(),Re();break;case V.l10n.amPM[1].charAt(0):case V.l10n.amPM[1].charAt(0).toLowerCase():V.amPM.textContent=V.l10n.amPM[1],En(),Re()}(ye||wt(oe))&&Q("onKeyDown",te)}function ei(te,oe){if(void 0===oe&&(oe="flatpickr-day"),1===V.selectedDates.length&&(!te||te.classList.contains(oe)&&!te.classList.contains("flatpickr-disabled"))){for(var ye=te?te.dateObj.getTime():V.days.firstElementChild.dateObj.getTime(),Fe=V.parseDate(V.selectedDates[0],void 0,!0).getTime(),ht=Math.min(ye,V.selectedDates[0].getTime()),yt=Math.max(ye,V.selectedDates[0].getTime()),ii=!1,hi=0,xi=0,Pi=ht;Pi<yt;Pi+=Ti.DAY)ot(new Date(Pi),!0)||(ii=ii||Pi>ht&&Pi<yt,Pi<Fe&&(!hi||Pi>hi)?hi=Pi:Pi>Fe&&(!xi||Pi<xi)&&(xi=Pi));Array.from(V.rContainer.querySelectorAll("*:nth-child(-n+"+V.config.showMonths+") > ."+oe)).forEach(function(Tn){var Qn=Tn.dateObj.getTime(),hr=hi>0&&Qn<hi||xi>0&&Qn>xi;if(hr)return Tn.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(xr){Tn.classList.remove(xr)});ii&&!hr||(["startRange","inRange","endRange","notAllowed"].forEach(function(xr){Tn.classList.remove(xr)}),void 0!==te&&(te.classList.add(ye<=V.selectedDates[0].getTime()?"startRange":"endRange"),Fe<ye&&Qn===Fe?Tn.classList.add("startRange"):Fe>ye&&Qn===Fe&&Tn.classList.add("endRange"),Qn>=hi&&(0===xi||Qn<=xi)&&St(Qn,Fe,ye)&&Tn.classList.add("inRange")))})}}function Yi(){V.isOpen&&!V.config.static&&!V.config.inline&&bt()}function Ki(te){return function(oe){var ye=V.config["_"+te+"Date"]=V.parseDate(oe,V.config.dateFormat),Fe=V.config["_"+("min"===te?"max":"min")+"Date"];void 0!==ye&&(V["min"===te?"minDateHasTime":"maxDateHasTime"]=ye.getHours()>0||ye.getMinutes()>0||ye.getSeconds()>0),V.selectedDates&&(V.selectedDates=V.selectedDates.filter(function(ht){return ot(ht)}),!V.selectedDates.length&&"min"===te&&Dn(ye),Re()),V.daysContainer&&(Ut(),void 0!==ye?V.currentYearElement[te]=ye.getFullYear().toString():V.currentYearElement.removeAttribute(te),V.currentYearElement.disabled=!!Fe&&void 0!==ye&&Fe.getFullYear()===ye.getFullYear())}}function Ot(){return V.config.wrap?jt.querySelector("[data-input]"):jt}function xe(){"object"!=typeof V.config.locale&&typeof tn.l10ns[V.config.locale]>"u"&&V.config.errorHandler(new Error("flatpickr: invalid locale "+V.config.locale)),V.l10n=ki(ki({},tn.l10ns.default),"object"==typeof V.config.locale?V.config.locale:"default"!==V.config.locale?tn.l10ns[V.config.locale]:void 0),Jt.D="("+V.l10n.weekdays.shorthand.join("|")+")",Jt.l="("+V.l10n.weekdays.longhand.join("|")+")",Jt.M="("+V.l10n.months.shorthand.join("|")+")",Jt.F="("+V.l10n.months.longhand.join("|")+")",Jt.K="("+V.l10n.amPM[0]+"|"+V.l10n.amPM[1]+"|"+V.l10n.amPM[0].toLowerCase()+"|"+V.l10n.amPM[1].toLowerCase()+")",void 0===ki(ki({},gi),JSON.parse(JSON.stringify(jt.dataset||{}))).time_24hr&&void 0===tn.defaultConfig.time_24hr&&(V.config.time_24hr=V.l10n.time_24hr),V.formatDate=rt(V),V.parseDate=bi({config:V.config,l10n:V.l10n})}function bt(te){if("function"!=typeof V.config.position){if(void 0!==V.calendarContainer){Q("onPreCalendarPosition");var oe=te||V._positionElement,ye=Array.prototype.reduce.call(V.calendarContainer.children,function(fo,nr){return fo+nr.offsetHeight},0),Fe=V.calendarContainer.offsetWidth,ht=V.config.position.split(" "),yt=ht[0],ii=ht.length>1?ht[1]:null,hi=oe.getBoundingClientRect(),xi=window.innerHeight-hi.bottom,Pi="above"===yt||"below"!==yt&&xi<ye&&hi.top>ye,nn=window.pageYOffset+hi.top+(Pi?-ye-2:oe.offsetHeight+2);if(Ve(V.calendarContainer,"arrowTop",!Pi),Ve(V.calendarContainer,"arrowBottom",Pi),!V.config.inline){var Tn=window.pageXOffset+hi.left,Xn=!1,Qn=!1;"center"===ii?(Tn-=(Fe-hi.width)/2,Xn=!0):"right"===ii&&(Tn-=Fe-hi.width,Qn=!0),Ve(V.calendarContainer,"arrowLeft",!Xn&&!Qn),Ve(V.calendarContainer,"arrowCenter",Xn),Ve(V.calendarContainer,"arrowRight",Qn);var hr=window.document.body.offsetWidth-(window.pageXOffset+hi.right),xr=Tn+Fe>window.document.body.offsetWidth,Rr=hr+Fe>window.document.body.offsetWidth;if(Ve(V.calendarContainer,"rightMost",xr),!V.config.static)if(V.calendarContainer.style.top=nn+"px",xr)if(Rr){var Br=function Yt(){for(var te=null,oe=0;oe<document.styleSheets.length;oe++){var ye=document.styleSheets[oe];if(ye.cssRules){te=ye;break}}return te??function Xe(){var te=document.createElement("style");return document.head.appendChild(te),te.sheet}()}();if(void 0===Br)return;var Or=window.document.body.offsetWidth,cr=Math.max(0,Or/2-Fe/2),Ar=Br.cssRules.length,pa="{left:"+hi.left+"px;right:auto;}";Ve(V.calendarContainer,"rightMost",!1),Ve(V.calendarContainer,"centerMost",!0),Br.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+pa,Ar),V.calendarContainer.style.left=cr+"px",V.calendarContainer.style.right="auto"}else V.calendarContainer.style.left="auto",V.calendarContainer.style.right=hr+"px";else V.calendarContainer.style.left=Tn+"px",V.calendarContainer.style.right="auto"}}}else V.config.position(V,te)}function Ut(){V.config.noCalendar||V.isMobile||(Qe(),De(),Ze())}function pe(){V._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(V.close,0):V.close()}function i(te){te.preventDefault(),te.stopPropagation();var ye=vt(ze(te),function(nn){return nn.classList&&nn.classList.contains("flatpickr-day")&&!nn.classList.contains("flatpickr-disabled")&&!nn.classList.contains("notAllowed")});if(void 0!==ye){var Fe=ye,ht=V.latestSelectedDateObj=new Date(Fe.dateObj.getTime()),yt=(ht.getMonth()<V.currentMonth||ht.getMonth()>V.currentMonth+V.config.showMonths-1)&&"range"!==V.config.mode;if(V.selectedDateElem=Fe,"single"===V.config.mode)V.selectedDates=[ht];else if("multiple"===V.config.mode){var ii=me(ht);ii?V.selectedDates.splice(parseInt(ii),1):V.selectedDates.push(ht)}else"range"===V.config.mode&&(2===V.selectedDates.length&&V.clear(!1,!1),V.latestSelectedDateObj=ht,V.selectedDates.push(ht),0!==ci(ht,V.selectedDates[0],!0)&&V.selectedDates.sort(function(nn,Tn){return nn.getTime()-Tn.getTime()}));if(En(),yt){var hi=V.currentYear!==ht.getFullYear();V.currentYear=ht.getFullYear(),V.currentMonth=ht.getMonth(),hi&&(Q("onYearChange"),Qe()),Q("onMonthChange")}De(),Ze(),Re(),yt||"range"===V.config.mode||1!==V.config.showMonths?void 0!==V.selectedDateElem&&void 0===V.hourElement&&V.selectedDateElem&&V.selectedDateElem.focus():_r(Fe),void 0!==V.hourElement&&void 0!==V.hourElement&&V.hourElement.focus(),V.config.closeOnSelect&&("single"===V.config.mode&&!V.config.enableTime||"range"===V.config.mode&&2===V.selectedDates.length&&!V.config.enableTime)&&pe(),Jn()}}V.parseDate=bi({config:V.config,l10n:V.l10n}),V._handlers=[],V.pluginElements=[],V.loadedPlugins=[],V._bind=wi,V._setHoursFromDate=Dn,V._positionCalendar=bt,V.changeMonth=et,V.changeYear=st,V.clear=function Vt(te,oe){if(void 0===te&&(te=!0),void 0===oe&&(oe=!0),V.input.value="",void 0!==V.altInput&&(V.altInput.value=""),void 0!==V.mobileInput&&(V.mobileInput.value=""),V.selectedDates=[],V.latestSelectedDateObj=void 0,!0===oe&&(V.currentYear=V._initialDate.getFullYear(),V.currentMonth=V._initialDate.getMonth()),!0===V.config.enableTime){var ye=Ji(V.config);cn(ye.hours,ye.minutes,ye.seconds)}V.redraw(),te&&Q("onChange")},V.close=function $t(){V.isOpen=!1,V.isMobile||(void 0!==V.calendarContainer&&V.calendarContainer.classList.remove("open"),void 0!==V._input&&V._input.classList.remove("active")),Q("onClose")},V.onMouseOver=ei,V._createElement=We,V.createDay=Nn,V.destroy=function Hi(){void 0!==V.config&&Q("onDestroy");for(var te=V._handlers.length;te--;)V._handlers[te].remove();if(V._handlers=[],V.mobileInput)V.mobileInput.parentNode&&V.mobileInput.parentNode.removeChild(V.mobileInput),V.mobileInput=void 0;else if(V.calendarContainer&&V.calendarContainer.parentNode)if(V.config.static&&V.calendarContainer.parentNode){var oe=V.calendarContainer.parentNode;if(oe.lastChild&&oe.removeChild(oe.lastChild),oe.parentNode){for(;oe.firstChild;)oe.parentNode.insertBefore(oe.firstChild,oe);oe.parentNode.removeChild(oe)}}else V.calendarContainer.parentNode.removeChild(V.calendarContainer);V.altInput&&(V.input.type="text",V.altInput.parentNode&&V.altInput.parentNode.removeChild(V.altInput),delete V.altInput),V.input&&(V.input.type=V.input._type,V.input.classList.remove("flatpickr-input"),V.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ye){try{delete V[ye]}catch{}})},V.isEnabled=ot,V.jumpToDate=On,V.updateValue=Re,V.open=function Ei(te,oe){if(void 0===oe&&(oe=V._positionElement),!0===V.isMobile){if(te){te.preventDefault();var ye=ze(te);ye&&ye.blur()}return void 0!==V.mobileInput&&(V.mobileInput.focus(),V.mobileInput.click()),void Q("onOpen")}if(!V._input.disabled&&!V.config.inline){var Fe=V.isOpen;V.isOpen=!0,Fe||(V.calendarContainer.classList.add("open"),V._input.classList.add("active"),Q("onOpen"),bt(oe)),!0===V.config.enableTime&&!0===V.config.noCalendar&&!1===V.config.allowInput&&(void 0===te||!V.timeContainer.contains(te.relatedTarget))&&setTimeout(function(){return V.hourElement.select()},50)}},V.redraw=Ut,V.set=function d(te,oe){if(null!==te&&"object"==typeof te)for(var ye in Object.assign(V.config,te),te)void 0!==r[ye]&&r[ye].forEach(function(Fe){return Fe()});else V.config[te]=oe,void 0!==r[te]?r[te].forEach(function(Fe){return Fe()}):He.indexOf(te)>-1&&(V.config[te]=Te(oe));V.redraw(),Re(!0)},V.setDate=function x(te,oe,ye){if(void 0===oe&&(oe=!1),void 0===ye&&(ye=V.config.dateFormat),0!==te&&!te||te instanceof Array&&0===te.length)return V.clear(oe);g(te,ye),V.latestSelectedDateObj=V.selectedDates[V.selectedDates.length-1],V.redraw(),On(void 0,oe),Dn(),0===V.selectedDates.length&&V.clear(!1),Re(oe),oe&&Q("onChange")},V.toggle=function X(te){if(!0===V.isOpen)return V.close();V.open(te)};var r={locale:[xe,ae],showMonths:[Tt,Qi,Nt],minDate:[On],maxDate:[On],positionElement:[Y],clickOpens:[function(){!0===V.config.clickOpens?(wi(V._input,"focus",V.open),wi(V._input,"click",V.open)):(V._input.removeEventListener("focus",V.open),V._input.removeEventListener("click",V.open))}]};function g(te,oe){var ye=[];if(te instanceof Array)ye=te.map(function(Fe){return V.parseDate(Fe,oe)});else if(te instanceof Date||"number"==typeof te)ye=[V.parseDate(te,oe)];else if("string"==typeof te)switch(V.config.mode){case"single":case"time":ye=[V.parseDate(te,oe)];break;case"multiple":ye=te.split(V.config.conjunction).map(function(Fe){return V.parseDate(Fe,oe)});break;case"range":ye=te.split(V.l10n.rangeSeparator).map(function(Fe){return V.parseDate(Fe,oe)})}else V.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(te)));V.selectedDates=V.config.allowInvalidPreload?ye:ye.filter(function(Fe){return Fe instanceof Date&&ot(Fe,!1)}),"range"===V.config.mode&&V.selectedDates.sort(function(Fe,ht){return Fe.getTime()-ht.getTime()})}function w(te){return te.slice().map(function(oe){return"string"==typeof oe||"number"==typeof oe||oe instanceof Date?V.parseDate(oe,void 0,!0):oe&&"object"==typeof oe&&oe.from&&oe.to?{from:V.parseDate(oe.from,void 0),to:V.parseDate(oe.to,void 0)}:oe}).filter(function(oe){return oe})}function Y(){V._positionElement=V.config.positionElement||V._input}function Q(te,oe){if(void 0!==V.config){var ye=V.config[te];if(void 0!==ye&&ye.length>0)for(var Fe=0;ye[Fe]&&Fe<ye.length;Fe++)ye[Fe](V.selectedDates,V.input.value,V,oe);"onChange"===te&&(V.input.dispatchEvent(ce("change")),V.input.dispatchEvent(ce("input")))}}function ce(te){var oe=document.createEvent("Event");return oe.initEvent(te,!0,!0),oe}function me(te){for(var oe=0;oe<V.selectedDates.length;oe++){var ye=V.selectedDates[oe];if(ye instanceof Date&&0===ci(ye,te))return""+oe}return!1}function De(){V.config.noCalendar||V.isMobile||!V.monthNav||(V.yearElements.forEach(function(te,oe){var ye=new Date(V.currentYear,V.currentMonth,1);ye.setMonth(V.currentMonth+oe),V.config.showMonths>1||"static"===V.config.monthSelectorType?V.monthElements[oe].textContent=qt(ye.getMonth(),V.config.shorthandCurrentMonth,V.l10n)+" ":V.monthsDropdownContainer.value=ye.getMonth().toString(),te.value=ye.getFullYear().toString()}),V._hidePrevMonthArrow=void 0!==V.config.minDate&&(V.currentYear===V.config.minDate.getFullYear()?V.currentMonth<=V.config.minDate.getMonth():V.currentYear<V.config.minDate.getFullYear()),V._hideNextMonthArrow=void 0!==V.config.maxDate&&(V.currentYear===V.config.maxDate.getFullYear()?V.currentMonth+1>V.config.maxDate.getMonth():V.currentYear>V.config.maxDate.getFullYear()))}function Ce(te){var oe=te||(V.config.altInput?V.config.altFormat:V.config.dateFormat);return V.selectedDates.map(function(ye){return V.formatDate(ye,oe)}).filter(function(ye,Fe,ht){return"range"!==V.config.mode||V.config.enableTime||ht.indexOf(ye)===Fe}).join("range"!==V.config.mode?V.config.conjunction:V.l10n.rangeSeparator)}function Re(te){void 0===te&&(te=!0),void 0!==V.mobileInput&&V.mobileFormatStr&&(V.mobileInput.value=void 0!==V.latestSelectedDateObj?V.formatDate(V.latestSelectedDateObj,V.mobileFormatStr):""),V.input.value=Ce(V.config.dateFormat),void 0!==V.altInput&&(V.altInput.value=Ce(V.config.altFormat)),!1!==te&&Q("onValueUpdate")}function G(te){var oe=ze(te),ye=V.prevMonthNav.contains(oe),Fe=V.nextMonthNav.contains(oe);ye||Fe?et(ye?-1:1):V.yearElements.indexOf(oe)>=0?oe.select():oe.classList.contains("arrowUp")?V.changeYear(V.currentYear+1):oe.classList.contains("arrowDown")&&V.changeYear(V.currentYear-1)}return function $i(){V.element=V.input=jt,V.isOpen=!1,function Ct(){var te=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],oe=ki(ki({},JSON.parse(JSON.stringify(jt.dataset||{}))),gi),ye={};V.config.parseDate=oe.parseDate,V.config.formatDate=oe.formatDate,Object.defineProperty(V.config,"enable",{get:function(){return V.config._enable},set:function(nn){V.config._enable=w(nn)}}),Object.defineProperty(V.config,"disable",{get:function(){return V.config._disable},set:function(nn){V.config._disable=w(nn)}});var Fe="time"===oe.mode;oe.dateFormat||!oe.enableTime&&!Fe||(ye.dateFormat=oe.noCalendar||Fe?"H:i"+(oe.enableSeconds?":S":""):(tn.defaultConfig.dateFormat||c.dateFormat)+" H:i"+(oe.enableSeconds?":S":"")),oe.altInput&&(oe.enableTime||Fe)&&!oe.altFormat&&(ye.altFormat=oe.noCalendar||Fe?"h:i"+(oe.enableSeconds?":S K":" K"):(tn.defaultConfig.altFormat||c.altFormat)+" h:i"+(oe.enableSeconds?":S":"")+" K"),Object.defineProperty(V.config,"minDate",{get:function(){return V.config._minDate},set:Ki("min")}),Object.defineProperty(V.config,"maxDate",{get:function(){return V.config._maxDate},set:Ki("max")});var ii=function(nn){return function(Tn){V.config["min"===nn?"_minTime":"_maxTime"]=V.parseDate(Tn,"H:i:S")}};Object.defineProperty(V.config,"minTime",{get:function(){return V.config._minTime},set:ii("min")}),Object.defineProperty(V.config,"maxTime",{get:function(){return V.config._maxTime},set:ii("max")}),"time"===oe.mode&&(V.config.noCalendar=!0,V.config.enableTime=!0),Object.assign(V.config,ye,oe);for(var hi=0;hi<te.length;hi++)V.config[te[hi]]=!0===V.config[te[hi]]||"true"===V.config[te[hi]];for(He.filter(function(nn){return void 0!==V.config[nn]}).forEach(function(nn){V.config[nn]=Te(V.config[nn]||[]).map(Xi)}),V.isMobile=!V.config.disableMobile&&!V.config.inline&&"single"===V.config.mode&&!V.config.disable.length&&!V.config.enable&&!V.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),hi=0;hi<V.config.plugins.length;hi++){var xi=V.config.plugins[hi](V)||{};for(var Pi in xi)He.indexOf(Pi)>-1?V.config[Pi]=Te(xi[Pi]).map(Xi).concat(V.config[Pi]):typeof oe[Pi]>"u"&&(V.config[Pi]=xi[Pi])}oe.altInputClass||(V.config.altInputClass=Ot().className+" "+V.config.altInputClass),Q("onParseConfig")}(),xe(),function R(){V.input=Ot(),V.input?(V.input._type=V.input.type,V.input.type="text",V.input.classList.add("flatpickr-input"),V._input=V.input,V.config.altInput&&(V.altInput=We(V.input.nodeName,V.config.altInputClass),V._input=V.altInput,V.altInput.placeholder=V.input.placeholder,V.altInput.disabled=V.input.disabled,V.altInput.required=V.input.required,V.altInput.tabIndex=V.input.tabIndex,V.altInput.type="text",V.input.setAttribute("type","hidden"),!V.config.static&&V.input.parentNode&&V.input.parentNode.insertBefore(V.altInput,V.input.nextSibling)),V.config.allowInput||V._input.setAttribute("readonly","readonly"),Y()):V.config.errorHandler(new Error("Invalid input element specified"))}(),function I(){V.selectedDates=[],V.now=V.parseDate(V.config.now)||new Date;var te=V.config.defaultDate||("INPUT"!==V.input.nodeName&&"TEXTAREA"!==V.input.nodeName||!V.input.placeholder||V.input.value!==V.input.placeholder?V.input.value:null);te&&g(te,V.config.dateFormat),V._initialDate=V.selectedDates.length>0?V.selectedDates[0]:V.config.minDate&&V.config.minDate.getTime()>V.now.getTime()?V.config.minDate:V.config.maxDate&&V.config.maxDate.getTime()<V.now.getTime()?V.config.maxDate:V.now,V.currentYear=V._initialDate.getFullYear(),V.currentMonth=V._initialDate.getMonth(),V.selectedDates.length>0&&(V.latestSelectedDateObj=V.selectedDates[0]),void 0!==V.config.minTime&&(V.config.minTime=V.parseDate(V.config.minTime,"H:i")),void 0!==V.config.maxTime&&(V.config.maxTime=V.parseDate(V.config.maxTime,"H:i")),V.minDateHasTime=!!V.config.minDate&&(V.config.minDate.getHours()>0||V.config.minDate.getMinutes()>0||V.config.minDate.getSeconds()>0),V.maxDateHasTime=!!V.config.maxDate&&(V.config.maxDate.getHours()>0||V.config.maxDate.getMinutes()>0||V.config.maxDate.getSeconds()>0)}(),function Bi(){V.utils={getDaysInMonth:function(te,oe){return void 0===te&&(te=V.currentMonth),void 0===oe&&(oe=V.currentYear),1===te&&(oe%4==0&&oe%100!=0||oe%400==0)?29:V.l10n.daysInMonth[te]}}}(),V.isMobile||function Yr(){var te=window.document.createDocumentFragment();if(V.calendarContainer=We("div","flatpickr-calendar"),V.calendarContainer.tabIndex=-1,!V.config.noCalendar){if(te.appendChild(function Zt(){return V.monthNav=We("div","flatpickr-months"),V.yearElements=[],V.monthElements=[],V.prevMonthNav=We("span","flatpickr-prev-month"),V.prevMonthNav.innerHTML=V.config.prevArrow,V.nextMonthNav=We("span","flatpickr-next-month"),V.nextMonthNav.innerHTML=V.config.nextArrow,Tt(),Object.defineProperty(V,"_hidePrevMonthArrow",{get:function(){return V.__hidePrevMonthArrow},set:function(te){V.__hidePrevMonthArrow!==te&&(Ve(V.prevMonthNav,"flatpickr-disabled",te),V.__hidePrevMonthArrow=te)}}),Object.defineProperty(V,"_hideNextMonthArrow",{get:function(){return V.__hideNextMonthArrow},set:function(te){V.__hideNextMonthArrow!==te&&(Ve(V.nextMonthNav,"flatpickr-disabled",te),V.__hideNextMonthArrow=te)}}),V.currentYearElement=V.yearElements[0],De(),V.monthNav}()),V.innerContainer=We("div","flatpickr-innerContainer"),V.config.weekNumbers){var oe=function Ne(){V.calendarContainer.classList.add("hasWeeks");var te=We("div","flatpickr-weekwrapper");te.appendChild(We("span","flatpickr-weekday",V.l10n.weekAbbreviation));var oe=We("div","flatpickr-weeks");return te.appendChild(oe),{weekWrapper:te,weekNumbers:oe}}(),ye=oe.weekWrapper,Fe=oe.weekNumbers;V.innerContainer.appendChild(ye),V.weekNumbers=Fe,V.weekWrapper=ye}V.rContainer=We("div","flatpickr-rContainer"),V.rContainer.appendChild(Nt()),V.daysContainer||(V.daysContainer=We("div","flatpickr-days"),V.daysContainer.tabIndex=-1),Ze(),V.rContainer.appendChild(V.daysContainer),V.innerContainer.appendChild(V.rContainer),te.appendChild(V.innerContainer)}V.config.enableTime&&te.appendChild(function Pt(){V.calendarContainer.classList.add("hasTime"),V.config.noCalendar&&V.calendarContainer.classList.add("noCalendar");var te=Ji(V.config);V.timeContainer=We("div","flatpickr-time"),V.timeContainer.tabIndex=-1;var oe=We("span","flatpickr-time-separator",":"),ye=tt("flatpickr-hour",{"aria-label":V.l10n.hourAriaLabel});V.hourElement=ye.getElementsByTagName("input")[0];var Fe=tt("flatpickr-minute",{"aria-label":V.l10n.minuteAriaLabel});if(V.minuteElement=Fe.getElementsByTagName("input")[0],V.hourElement.tabIndex=V.minuteElement.tabIndex=-1,V.hourElement.value=we(V.latestSelectedDateObj?V.latestSelectedDateObj.getHours():V.config.time_24hr?te.hours:function Ci(te){switch(te%24){case 0:case 12:return 12;default:return te%12}}(te.hours)),V.minuteElement.value=we(V.latestSelectedDateObj?V.latestSelectedDateObj.getMinutes():te.minutes),V.hourElement.setAttribute("step",V.config.hourIncrement.toString()),V.minuteElement.setAttribute("step",V.config.minuteIncrement.toString()),V.hourElement.setAttribute("min",V.config.time_24hr?"0":"1"),V.hourElement.setAttribute("max",V.config.time_24hr?"23":"12"),V.hourElement.setAttribute("maxlength","2"),V.minuteElement.setAttribute("min","0"),V.minuteElement.setAttribute("max","59"),V.minuteElement.setAttribute("maxlength","2"),V.timeContainer.appendChild(ye),V.timeContainer.appendChild(oe),V.timeContainer.appendChild(Fe),V.config.time_24hr&&V.timeContainer.classList.add("time24hr"),V.config.enableSeconds){V.timeContainer.classList.add("hasSeconds");var ht=tt("flatpickr-second");V.secondElement=ht.getElementsByTagName("input")[0],V.secondElement.value=we(V.latestSelectedDateObj?V.latestSelectedDateObj.getSeconds():te.seconds),V.secondElement.setAttribute("step",V.minuteElement.getAttribute("step")),V.secondElement.setAttribute("min","0"),V.secondElement.setAttribute("max","59"),V.secondElement.setAttribute("maxlength","2"),V.timeContainer.appendChild(We("span","flatpickr-time-separator",":")),V.timeContainer.appendChild(ht)}return V.config.time_24hr||(V.amPM=We("span","flatpickr-am-pm",V.l10n.amPM[Se((V.latestSelectedDateObj?V.hourElement.value:V.config.defaultHour)>11)]),V.amPM.title=V.l10n.toggleTitle,V.amPM.tabIndex=-1,V.timeContainer.appendChild(V.amPM)),V.timeContainer}()),Ve(V.calendarContainer,"rangeMode","range"===V.config.mode),Ve(V.calendarContainer,"animate",!0===V.config.animate),Ve(V.calendarContainer,"multiMonth",V.config.showMonths>1),V.calendarContainer.appendChild(te);var ht=void 0!==V.config.appendTo&&void 0!==V.config.appendTo.nodeType;if((V.config.inline||V.config.static)&&(V.calendarContainer.classList.add(V.config.inline?"inline":"static"),V.config.inline&&(!ht&&V.element.parentNode?V.element.parentNode.insertBefore(V.calendarContainer,V._input.nextSibling):void 0!==V.config.appendTo&&V.config.appendTo.appendChild(V.calendarContainer)),V.config.static)){var yt=We("div","flatpickr-wrapper");V.element.parentNode&&V.element.parentNode.insertBefore(yt,V.element),yt.appendChild(V.element),V.altInput&&yt.appendChild(V.altInput),yt.appendChild(V.calendarContainer)}!V.config.static&&!V.config.inline&&(void 0!==V.config.appendTo?V.config.appendTo:window.document.body).appendChild(V.calendarContainer)}(),function zn(){if(V.config.wrap&&["open","close","toggle","clear"].forEach(function(ye){Array.prototype.forEach.call(V.element.querySelectorAll("[data-"+ye+"]"),function(Fe){return wi(Fe,"click",V[ye])})}),V.isMobile)!function W(){var te=V.config.enableTime?V.config.noCalendar?"time":"datetime-local":"date";V.mobileInput=We("input",V.input.className+" flatpickr-mobile"),V.mobileInput.tabIndex=1,V.mobileInput.type=te,V.mobileInput.disabled=V.input.disabled,V.mobileInput.required=V.input.required,V.mobileInput.placeholder=V.input.placeholder,V.mobileFormatStr="datetime-local"===te?"Y-m-d\\TH:i:S":"date"===te?"Y-m-d":"H:i:S",V.selectedDates.length>0&&(V.mobileInput.defaultValue=V.mobileInput.value=V.formatDate(V.selectedDates[0],V.mobileFormatStr)),V.config.minDate&&(V.mobileInput.min=V.formatDate(V.config.minDate,"Y-m-d")),V.config.maxDate&&(V.mobileInput.max=V.formatDate(V.config.maxDate,"Y-m-d")),V.input.getAttribute("step")&&(V.mobileInput.step=String(V.input.getAttribute("step"))),V.input.type="hidden",void 0!==V.altInput&&(V.altInput.type="hidden");try{V.input.parentNode&&V.input.parentNode.insertBefore(V.mobileInput,V.input.nextSibling)}catch{}wi(V.mobileInput,"change",function(oe){V.setDate(ze(oe).value,!1,V.mobileFormatStr),Q("onChange"),Q("onClose")})}();else{var te=Le(Yi,50);if(V._debouncedChange=Le(Jn,pn),V.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&wi(V.daysContainer,"mouseover",function(ye){"range"===V.config.mode&&ei(ze(ye))}),wi(V._input,"keydown",It),void 0!==V.calendarContainer&&wi(V.calendarContainer,"keydown",It),!V.config.inline&&!V.config.static&&wi(window,"resize",te),void 0!==window.ontouchstart?wi(window.document,"touchstart",At):wi(window.document,"mousedown",At),wi(window.document,"focus",At,{capture:!0}),!0===V.config.clickOpens&&(wi(V._input,"focus",V.open),wi(V._input,"click",V.open)),void 0!==V.daysContainer&&(wi(V.monthNav,"click",G),wi(V.monthNav,["keyup","increment"],br),wi(V.daysContainer,"click",i)),void 0!==V.timeContainer&&void 0!==V.minuteElement&&void 0!==V.hourElement){wi(V.timeContainer,["increment"],Pn),wi(V.timeContainer,"blur",Pn,{capture:!0}),wi(V.timeContainer,"click",sr),wi([V.hourElement,V.minuteElement],["focus","click"],function(ye){return ze(ye).select()}),void 0!==V.secondElement&&wi(V.secondElement,"focus",function(){return V.secondElement&&V.secondElement.select()}),void 0!==V.amPM&&wi(V.amPM,"click",function(ye){Pn(ye)})}V.config.allowInput&&wi(V._input,"blur",nt)}}(),(V.selectedDates.length||V.config.noCalendar)&&(V.config.enableTime&&Dn(V.config.noCalendar?V.latestSelectedDateObj:void 0),Re(!1)),Qi();var te=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!V.isMobile&&te&&bt(),Q("onReady")}(),V}function gn(jt,gi){for(var V=Array.prototype.slice.call(jt).filter(function(Xi){return Xi instanceof HTMLElement}),Bi=[],$i=0;$i<V.length;$i++){var en=V[$i];try{if(null!==en.getAttribute("data-fp-omit"))continue;void 0!==en._flatpickr&&(en._flatpickr.destroy(),en._flatpickr=void 0),en._flatpickr=ji(en,gi||{}),Bi.push(en._flatpickr)}catch(Xi){console.error(Xi)}}return 1===Bi.length?Bi[0]:Bi}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(jt){return gn(this,jt)},HTMLElement.prototype.flatpickr=function(jt){return gn([this],jt)});var tn=function(jt,gi){return"string"==typeof jt?gn(window.document.querySelectorAll(jt),gi):jt instanceof Node?gn([jt],gi):gn(jt,gi)};tn.defaultConfig={},tn.l10ns={en:ki({},Be),default:ki({},Be)},tn.localize=function(jt){tn.l10ns.default=ki(ki({},tn.l10ns.default),jt)},tn.setDefaults=function(jt){tn.defaultConfig=ki(ki({},tn.defaultConfig),jt)},tn.parseDate=bi({}),tn.formatDate=rt({}),tn.compareDates=ci,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(jt){return gn(this,jt)}),Date.prototype.fp_incr=function(jt){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof jt?parseInt(jt,10):jt))},typeof window<"u"&&(window.flatpickr=tn);const di=tn;let Wi=(()=>{class jt{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return jt.\u0275fac=function(V){return new(V||jt)},jt.\u0275prov=e.wxM({token:jt,factory:jt.\u0275fac}),jt})();const _n={provide:Mi.Y6,useExisting:(0,e.wd)(()=>Ln),multi:!0};let Ln=(()=>{class jt{constructor(V,Bi,$i){this.elm=V,this.defaults=Bi,this.renderer=$i,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new e._w7,this.flatpickrChange=new e._w7,this.flatpickrValueUpdate=new e._w7,this.flatpickrOpen=new e._w7,this.flatpickrClose=new e._w7,this.flatpickrMonthChange=new e._w7,this.flatpickrYearChange=new e._w7,this.flatpickrDayCreate=new e._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const V={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(Bi,$i,en)=>{this.flatpickrChange.emit({selectedDates:Bi,dateString:$i,instance:en})},onOpen:(Bi,$i,en)=>{this.flatpickrOpen.emit({selectedDates:Bi,dateString:$i,instance:en})},onClose:(Bi,$i,en)=>{this.flatpickrClose.emit({selectedDates:Bi,dateString:$i,instance:en})},onMonthChange:(Bi,$i,en)=>{this.flatpickrMonthChange.emit({selectedDates:Bi,dateString:$i,instance:en})},onYearChange:(Bi,$i,en)=>{this.flatpickrYearChange.emit({selectedDates:Bi,dateString:$i,instance:en})},onReady:(Bi,$i,en)=>{this.flatpickrReady.emit({selectedDates:Bi,dateString:$i,instance:en})},onValueUpdate:(Bi,$i,en)=>{this.flatpickrValueUpdate.emit({selectedDates:Bi,dateString:$i,instance:en})},onDayCreate:(Bi,$i,en,Xi)=>{this.flatpickrDayCreate.emit({selectedDates:Bi,dateString:$i,instance:en,dayElement:Xi})}};Object.keys(V).forEach(Bi=>{typeof V[Bi]>"u"&&(V[Bi]=typeof this.options[Bi]<"u"?this.options[Bi]:this.defaults[Bi])}),V.time_24hr=V.time24hr,V.altInputClass=(V.altInputClass||"")+" "+this.elm.nativeElement.className,V.enable||delete V.enable,this.instance=di(this.elm.nativeElement,V),this.setDisabledState(this.isDisabled)}ngOnChanges(V){this.instance&&Object.keys(V).forEach(Bi=>{this.instance.set(Bi,this[Bi])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(V){let Bi=V;this.convertModelValue&&"range"===this.mode&&V&&(Bi=[V.from,V.to]),this.instance?this.instance.setDate(Bi):this.initialValue=Bi}registerOnChange(V){this.onChangeFn=V}registerOnTouched(V){this.onTouchedFn=V}setDisabledState(V){this.isDisabled=V,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const V=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof V)switch(this.mode){case"multiple":const Bi=V.split("; ").map(Xi=>this.instance.parseDate(Xi,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(Bi);break;case"range":const[$i,en]=V.split(this.instance.l10n.rangeSeparator).map(Xi=>this.instance.parseDate(Xi,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:$i,to:en});break;default:this.onChangeFn(this.instance.parseDate(V,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(V)}}return jt.\u0275fac=function(V){return new(V||jt)(e.GI1(e.GMv),e.GI1(Wi),e.GI1(e.q87))},jt.\u0275dir=e.Sc5({type:jt,selectors:[["","mwlFlatpickr",""]],hostBindings:function(V,Bi){1&V&&e.qCj("blur",function(){return Bi.onTouchedFn()})("input",function(){return Bi.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[e.M5G([_n]),e.SYr]}),jt})();const Gn=new e.UbH("flatpickr defaults");function Yn(jt){const gi=new Wi;return Object.assign(gi,jt),gi}let on=(()=>{class jt{static forRoot(V={}){return{ngModule:jt,providers:[{provide:Gn,useValue:V},{provide:Wi,useFactory:Yn,deps:[Gn]}]}}}return jt.\u0275fac=function(V){return new(V||jt)},jt.\u0275mod=e.a4G({type:jt}),jt.\u0275inj=e.s3X({}),jt})()},2508:(ms,lr,Et)=>{"use strict";Et.d(lr,{G:()=>we});var e=Et(4496),He=(Et(1472),Et(2164));window.ApexCharts=He;let we=(()=>{class Se{}return Se.\u0275fac=function(Te){return new(Te||Se)},Se.\u0275mod=e.a4G({type:Se}),Se.\u0275inj=e.s3X({}),Se})()},2728:(ms,lr,Et)=>{"use strict";Et.d(lr,{C:()=>We,Wz:()=>Te,gD:()=>Ve});var e=Et(4496),Mi=Et(1368),He=Et(4984);const c=["*"],Z=ut=>({"text-muted":ut});function Be(ut,vt){if(1&ut&&(e.I0R(0,"button",7),e.OEk(1),e.C$Y()),2&ut){const tt=e.GaO();e.E7m("ngClass",e.S45(2,Z,tt.isDisabled)),e.yG2(),e.oRS(" ",tt.heading," ")}}const we=[[["","accordion-heading",""]],"*"],Se=["[accordion-heading]","*"];let Le=(()=>{class ut{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(ze){return new(ze||ut)};static#t=this.\u0275prov=e.wxM({token:ut,factory:ut.\u0275fac,providedIn:"root"})}return ut})(),Te=(()=>{class ut{constructor(tt){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,tt)}closeOtherPanels(tt){this.closeOthers&&this.groups.forEach(ze=>{ze!==tt&&(ze.isOpen=!1)})}addGroup(tt){tt.isAnimated=this.isAnimated,this.groups.push(tt)}removeGroup(tt){const ze=this.groups.indexOf(tt);-1!==ze&&this.groups.splice(ze,1)}static#e=this.\u0275fac=function(ze){return new(ze||ut)(e.GI1(Le))};static#t=this.\u0275cmp=e.In1({type:ut,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(ze,ct){2&ze&&e.e48("aria-multiselectable",ct.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:c,decls:1,vars:0,template:function(ze,ct){1&ze&&(e.kPM(),e._Xx(0))},encapsulation:2})}return ut})(),Ve=(()=>{class ut{get isOpen(){return this._isOpen}set isOpen(tt){tt!==this.isOpen&&(tt&&this.accordion.closeOtherPanels(this),this._isOpen=tt,Promise.resolve(null).then(()=>{this.isOpenChange.emit(tt)}))}constructor(tt){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new e._w7,this._isOpen=!1,this.accordion=tt}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(ze){return new(ze||ut)(e.GI1(Te))};static#t=this.\u0275cmp=e.In1({type:ut,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(ze,ct){2&ze&&e.eAK("panel-open",ct.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:Se,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(ze,ct){1&ze&&(e.kPM(we),e.I0R(0,"div",0)(1,"div",1),e.qCj("click",function(){return ct.toggleOpen()}),e.I0R(2,"div",2)(3,"div",3),e.yuY(4,Be,2,4,"button",4),e._Xx(5),e.C$Y()()(),e.I0R(6,"div",5)(7,"div",6),e._Xx(8,1),e.C$Y()()()),2&ze&&(e.E7m("ngClass",ct.panelClass),e.yG2(),e.E7m("ngClass",ct.isDisabled?"panel-disabled":"panel-enabled"),e.yG2(2),e.e48("aria-expanded",ct.isOpen),e.yG2(),e.E7m("ngIf",ct.heading),e.yG2(2),e.E7m("collapse",!ct.isOpen)("isAnimated",ct.isAnimated))},dependencies:[Mi.QF,Mi.u_,He.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return ut})(),We=(()=>{class ut{static forRoot(){return{ngModule:ut,providers:[]}}static#e=this.\u0275fac=function(ze){return new(ze||ut)};static#t=this.\u0275mod=e.a4G({type:ut});static#i=this.\u0275inj=e.s3X({imports:[Mi.MD,He.a]})}return ut})()},2296:(ms,lr,Et)=>{"use strict";Et.d(lr,{cH:()=>Se});var e=Et(4496),Mi=Et(1368);let Se=(()=>{class Le{static forRoot(){return{ngModule:Le,providers:[]}}static#e=this.\u0275fac=function(We){return new(We||Le)};static#t=this.\u0275mod=e.a4G({type:Le});static#i=this.\u0275inj=e.s3X({imports:[Mi.MD]})}return Le})()},3304:(ms,lr,Et)=>{"use strict";Et.d(lr,{em:()=>Uc,U5:()=>tu,SO:()=>Np});var e=Et(4496),Mi=Et(6684),He=Et(4704),c=Et(3992),Z=Et(3616),Be=Et(4e3);function Se(v){return v<0?Math.ceil(v)||0:Math.floor(v)}function Le(v){return"string"==typeof v}function Te(v){return v instanceof Date||"[object Date]"===Object.prototype.toString.call(v)}function We(v){return v&&v.getTime&&!isNaN(v.getTime())}function ut(v){return v instanceof Function||"[object Function]"===Object.prototype.toString.call(v)}function vt(v){return"number"==typeof v||"[object Number]"===Object.prototype.toString.call(v)}function tt(v){return v instanceof Array||"[object Array]"===Object.prototype.toString.call(v)}function ze(v,P){return Object.prototype.hasOwnProperty.call(v,P)}function ct(v){return null!=v&&"[object Object]"===Object.prototype.toString.call(v)}function Je(v){return void 0===v}function Jt(v){const P=+v;let k=0;return 0!==P&&isFinite(P)&&(k=Se(P)),k}const yi={},rt={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function bi(v,P){const k=v.toLowerCase();let j=v;k in rt&&(j=rt[k]),yi[k]=yi[`${k}s`]=yi[P]=j}function ci(v){return Le(v)?yi[v]||yi[v.toLowerCase()]:void 0}const St=0,pi=1,vi=2,Ti=3,Ji=4,Ii=5,ki=6,Zi=7,pn=8;function ji(v,P,k){const j=`${Math.abs(v)}`;return(v>=0?k?"+":"":"-")+Math.pow(10,Math.max(0,P-j.length)).toString().substr(1)+j}const gn={},tn={},di=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function Wi(v,P,k,j){v&&(tn[v]=j),P&&(tn[P[0]]=function(){return ji(j.apply(null,arguments),P[1],P[2])}),k&&(tn[k]=function(ee,Me){return Me.locale.ordinal(j.apply(null,arguments),v)})}function Ln(v){return v.match(/\[[\s\S]/)?v.replace(/^\[|\]$/g,""):v.replace(/\\/g,"")}function Gn(v,P,k){const j=new Date(Date.UTC.apply(null,arguments));return v<100&&v>=0&&isFinite(j.getUTCFullYear())&&j.setUTCFullYear(v),j}function Yn(v,P=0,k=1,j=0,ee=0,Me=0,zt=0){const qi=new Date(v,P,k,j,ee,Me,zt);return v<100&&v>=0&&isFinite(qi.getFullYear())&&qi.setFullYear(v),qi}function on(v,P=!1){return P?v.getUTCHours():v.getHours()}function jt(v,P=!1){return P?v.getUTCMinutes():v.getMinutes()}function gi(v,P=!1){return P?v.getUTCSeconds():v.getSeconds()}function V(v,P=!1){return P?v.getUTCMilliseconds():v.getMilliseconds()}function $i(v,P=!1){return P?v.getUTCDay():v.getDay()}function en(v,P=!1){return P?v.getUTCDate():v.getDate()}function Xi(v,P=!1){return P?v.getUTCMonth():v.getMonth()}function Qi(v,P=!1){return P?v.getUTCFullYear():v.getFullYear()}function br(v,P){return!(!v||!P)&&wi(v,P)&&Xi(v)===Xi(P)}function wi(v,P){return!(!v||!P)&&Qi(v)===Qi(P)}function Jn(v,P){return!(!v||!P)&&wi(v,P)&&br(v,P)&&en(v)===en(P)}const zn=/\d/,On=/\d\d/,sr=/\d{3}/,fr=/\d{4}/,Yr=/[+-]?\d{6}/,Nn=/\d\d?/,_r=/\d\d\d\d?/,ur=/\d\d\d\d\d\d?/,mr=/\d{1,3}/,kr=/\d{1,4}/,Ft=/[+-]?\d{1,6}/,Ze=/\d+/,Qe=/[+-]?\d+/,Tt=/Z|[+-]\d\d(?::?\d\d)?/gi,Zt=/[+-]?\d+(\.\d{1,3})?/,Pt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Nt={};function ae(v,P,k){Nt[v]=ut(P)?P:function(j,ee){return j&&k?k:P}}function Ne(v,P){return ze(Nt,v)?Nt[v](!1,P):new RegExp(function et(v){return Vt(v.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(P,k,j,ee,Me)=>k||j||ee||Me))}(v))}function Vt(v){return v.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const $t={};function Hi(v,P){const k=Le(v)?[v]:v;let j=P;if(vt(P)&&(j=function(ee,Me,zt){return Me[P]=Jt(ee),zt}),tt(k)&&ut(j)){let ee;for(ee=0;ee<k.length;ee++)$t[k[ee]]=j}}function wt(v,P){Hi(v,function(k,j,ee,Me){return ee._w=ee._w||{},P(k,ee._w,ee,Me)})}function At(v,P,k){return null!=P&&ze($t,v)&&$t[v](P,k._a,k,v),k}const st={};function ot(v,P){st[v]=P}function It(v){return null==v._pf&&(v._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),v._pf}function ei(v,P){return P.locale.getFullYear?P.locale.getFullYear(v,P.isUTC).toString():Qi(v,P.isUTC).toString()}function Ei(v){return Jt(v)+(Jt(v)>68?1900:2e3)}function Ki(v){return Ct(v)?366:365}function Ct(v){return v%4==0&&v%100!=0||v%400==0}function Ot(v,P){if(isNaN(v)||isNaN(P))return NaN;const k=function we(v,P){return(v%P+P)%P}(P,12);return 1===k?Ct(v+(P-k)/12)?29:28:31-k%7%2}const bt={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function Yt(v,P){const k=Object.assign({},bt,P),j=v.getFullYear()+(k.year||0),ee=v.getMonth()+(k.month||0);let Me=v.getDate()+(k.day||0);return k.month&&!k.day&&(Me=Math.min(Me,Ot(j,ee))),Yn(j,ee,Me,v.getHours()+(k.hour||0),v.getMinutes()+(k.minute||0),v.getSeconds()+(k.seconds||0))}function Ut(v,P){return vt(P)?P:v}function i(v,P,k){const j=Math.min(en(v),Ot(Qi(v),P));return k?v.setUTCMonth(P,j):v.setMonth(P,j),v}function I(v,P,k){return k?v.setUTCDate(P):v.setDate(P),v}function Y(v){return new Date(v.getTime())}function W(v,P,k){const j=Y(v);switch(P){case"year":i(j,0,k);case"quarter":case"month":I(j,1,k);case"week":case"isoWeek":case"day":case"date":!function d(v,P,k){k?v.setUTCHours(P):v.setHours(P)}(j,0,k);case"hours":!function g(v,P,k){k?v.setUTCMinutes(P):v.setMinutes(P)}(j,0,k);case"minutes":!function x(v,P,k){k?v.setUTCSeconds(P):v.setSeconds(P)}(j,0,k);case"seconds":!function w(v,P,k){k?v.setUTCMilliseconds(P):v.setMilliseconds(P)}(j,0,k)}return"week"===P&&function p(v,P,k={}){ho(v,P-Mn(v,k.locale,k.isUTC),"day")}(j,0,{isUTC:k}),"isoWeek"===P&&function U(v,P,k={}){const j=function $a(v,P=ns()){return Le(v)?P.weekdaysParse(v)%7||7:vt(v)&&isNaN(v)?null:v}(P,k.locale);Bs(v,function cs(v,P){return $i(v,P)}(v)%7?j:j-7)}(j,1),"quarter"===P&&i(j,3*Math.floor(Xi(j,k)/3),k),j}function X(v,P,k){let j=P;return"date"===j&&(j="day"),function Ol(v,P,k,j){return oa(v,na(P,k),-1,j)}(ho(W(v,j,k),1,"isoWeek"===j?"week":j,k),1,"milliseconds",k)}function ce(v,P){const k=+W(v,"day",P),j=+W(v,"year",P);return Math.round((k-j)/864e5)+1}function Ee(v,P,k){const j=P-k+7;return-(Gn(v,0,j).getUTCDay()-P+7)%7+j-1}function Ce(v,P,k,j){const ee=Ee(Qi(v,j),P,k),Me=Math.floor((ce(v,j)-ee-1)/7)+1;let zt,qi;return Me<1?(qi=Qi(v,j)-1,zt=Me+Re(qi,P,k)):Me>Re(Qi(v,j),P,k)?(zt=Me-Re(Qi(v,j),P,k),qi=Qi(v,j)+1):(qi=Qi(v,j),zt=Me),{week:zt,year:qi}}function Re(v,P,k){const j=Ee(v,P,k),ee=Ee(v+1,P,k);return(Ki(v)-j+ee)/7}const G=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,re="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),te="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),oe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ye="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Fe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ht={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},hi=Pt,xi=Pt;class Pi{constructor(P){P&&this.set(P)}set(P){let k;for(k in P){if(!P.hasOwnProperty(k))continue;const j=P[k];this[ut(j)?k:`_${k}`]=j}this._config=P}calendar(P,k,j){const ee=this._calendar[P]||this._calendar.sameElse;return ut(ee)?ee.call(null,k,j):ee}longDateFormat(P){const k=this._longDateFormat[P],j=this._longDateFormat[P.toUpperCase()];return k||!j?k:(this._longDateFormat[P]=j.replace(/MMMM|MM|DD|dddd/g,function(ee){return ee.slice(1)}),this._longDateFormat[P])}get invalidDate(){return this._invalidDate}set invalidDate(P){this._invalidDate=P}ordinal(P,k){return this._ordinal.replace("%d",P.toString(10))}preparse(P,k){return P}getFullYear(P,k=!1){return Qi(P,k)}postformat(P){return P}relativeTime(P,k,j,ee){const Me=this._relativeTime[j];return ut(Me)?Me(P,k,j,ee):Me.replace(/%d/i,P.toString(10))}pastFuture(P,k){const j=this._relativeTime[P>0?"future":"past"];return ut(j)?j(k):j.replace(/%s/i,k)}months(P,k,j=!1){if(!P)return tt(this._months)?this._months:this._months.standalone;if(tt(this._months))return this._months[Xi(P,j)];const ee=(this._months.isFormat||G).test(k)?"format":"standalone";return this._months[ee][Xi(P,j)]}monthsShort(P,k,j=!1){if(!P)return tt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(tt(this._monthsShort))return this._monthsShort[Xi(P,j)];const ee=G.test(k)?"format":"standalone";return this._monthsShort[ee][Xi(P,j)]}monthsParse(P,k,j){let ee,Me,zt;if(this._monthsParseExact)return this.handleMonthStrictParse(P,k,j);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),zt=0;zt<12;zt++){if(ee=new Date(Date.UTC(2e3,zt)),j&&!this._longMonthsParse[zt]){const qi=this.months(ee,"",!0).replace(".",""),Rn=this.monthsShort(ee,"",!0).replace(".","");this._longMonthsParse[zt]=new RegExp(`^${qi}$`,"i"),this._shortMonthsParse[zt]=new RegExp(`^${Rn}$`,"i")}if(!j&&!this._monthsParse[zt]&&(Me=`^${this.months(ee,"",!0)}|^${this.monthsShort(ee,"",!0)}`,this._monthsParse[zt]=new RegExp(Me.replace(".",""),"i")),j&&"MMMM"===k&&this._longMonthsParse[zt].test(P)||j&&"MMM"===k&&this._shortMonthsParse[zt].test(P)||!j&&this._monthsParse[zt].test(P))return zt}}monthsRegex(P){return this._monthsParseExact?(ze(this,"_monthsRegex")||this.computeMonthsParse(),P?this._monthsStrictRegex:this._monthsRegex):(ze(this,"_monthsRegex")||(this._monthsRegex=xi),this._monthsStrictRegex&&P?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(P){return this._monthsParseExact?(ze(this,"_monthsRegex")||this.computeMonthsParse(),P?this._monthsShortStrictRegex:this._monthsShortRegex):(ze(this,"_monthsShortRegex")||(this._monthsShortRegex=hi),this._monthsShortStrictRegex&&P?this._monthsShortStrictRegex:this._monthsShortRegex)}week(P,k){return Ce(P,this._week.dow,this._week.doy,k).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(P,k,j){if(!P)return tt(this._weekdays)?this._weekdays:this._weekdays.standalone;if(tt(this._weekdays))return this._weekdays[$i(P,j)];const ee=this._weekdays.isFormat.test(k)?"format":"standalone";return this._weekdays[ee][$i(P,j)]}weekdaysMin(P,k,j){return P?this._weekdaysMin[$i(P,j)]:this._weekdaysMin}weekdaysShort(P,k,j){return P?this._weekdaysShort[$i(P,j)]:this._weekdaysShort}weekdaysParse(P,k,j){let ee,Me;if(this._weekdaysParseExact)return this.handleWeekStrictParse(P,k,j);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),ee=0;ee<7;ee++){const zt=Bs(new Date(Date.UTC(2e3,1)),ee,null,!0);if(j&&!this._fullWeekdaysParse[ee]&&(this._fullWeekdaysParse[ee]=new RegExp(`^${this.weekdays(zt,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[ee]=new RegExp(`^${this.weekdaysShort(zt,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[ee]=new RegExp(`^${this.weekdaysMin(zt,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[ee]||(Me=`^${this.weekdays(zt,"",!0)}|^${this.weekdaysShort(zt,"",!0)}|^${this.weekdaysMin(zt,"",!0)}`,this._weekdaysParse[ee]=new RegExp(Me.replace(".",""),"i")),!(tt(this._fullWeekdaysParse)&&tt(this._shortWeekdaysParse)&&tt(this._minWeekdaysParse)&&tt(this._weekdaysParse)))return;if(j&&"dddd"===k&&this._fullWeekdaysParse[ee].test(P))return ee;if(j&&"ddd"===k&&this._shortWeekdaysParse[ee].test(P))return ee;if(j&&"dd"===k&&this._minWeekdaysParse[ee].test(P))return ee;if(!j&&this._weekdaysParse[ee].test(P))return ee}}weekdaysRegex(P){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||this.computeWeekdaysParse(),P?this._weekdaysStrictRegex:this._weekdaysRegex):(ze(this,"_weekdaysRegex")||(this._weekdaysRegex=Pt),this._weekdaysStrictRegex&&P?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(P){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||this.computeWeekdaysParse(),P?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ze(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Pt),this._weekdaysShortStrictRegex&&P?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(P){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||this.computeWeekdaysParse(),P?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ze(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pt),this._weekdaysMinStrictRegex&&P?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(P){return"p"===P.toLowerCase().charAt(0)}meridiem(P,k,j){return P>11?j?"pm":"PM":j?"am":"AM"}formatLongDate(P){this._longDateFormat=this._longDateFormat?this._longDateFormat:ht;const k=this._longDateFormat[P],j=this._longDateFormat[P.toUpperCase()];return k||!j?k:(this._longDateFormat[P]=j.replace(/MMMM|MM|DD|dddd/g,ee=>ee.slice(1)),this._longDateFormat[P])}handleMonthStrictParse(P,k,j){const ee=P.toLocaleLowerCase();let Me,zt,qi;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Me=0;Me<12;++Me)qi=new Date(2e3,Me),this._shortMonthsParse[Me]=this.monthsShort(qi,"").toLocaleLowerCase(),this._longMonthsParse[Me]=this.months(qi,"").toLocaleLowerCase();return j?"MMM"===k?(zt=this._shortMonthsParse.indexOf(ee),-1!==zt?zt:null):(zt=this._longMonthsParse.indexOf(ee),-1!==zt?zt:null):"MMM"===k?(zt=this._shortMonthsParse.indexOf(ee),-1!==zt?zt:(zt=this._longMonthsParse.indexOf(ee),-1!==zt?zt:null)):(zt=this._longMonthsParse.indexOf(ee),-1!==zt?zt:(zt=this._shortMonthsParse.indexOf(ee),-1!==zt?zt:null))}handleWeekStrictParse(P,k,j){let ee;const Me=P.toLocaleLowerCase();if(!this._weekdaysParse){let zt;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],zt=0;zt<7;++zt){const qi=Bs(new Date(Date.UTC(2e3,1)),zt,null,!0);this._minWeekdaysParse[zt]=this.weekdaysMin(qi).toLocaleLowerCase(),this._shortWeekdaysParse[zt]=this.weekdaysShort(qi).toLocaleLowerCase(),this._weekdaysParse[zt]=this.weekdays(qi,"").toLocaleLowerCase()}}if(tt(this._weekdaysParse)&&tt(this._shortWeekdaysParse)&&tt(this._minWeekdaysParse))return j?"dddd"===k?(ee=this._weekdaysParse.indexOf(Me),-1!==ee?ee:null):"ddd"===k?(ee=this._shortWeekdaysParse.indexOf(Me),-1!==ee?ee:null):(ee=this._minWeekdaysParse.indexOf(Me),-1!==ee?ee:null):"dddd"===k?(ee=this._weekdaysParse.indexOf(Me),-1!==ee||(ee=this._shortWeekdaysParse.indexOf(Me),-1!==ee)?ee:(ee=this._minWeekdaysParse.indexOf(Me),-1!==ee?ee:null)):"ddd"===k?(ee=this._shortWeekdaysParse.indexOf(Me),-1!==ee||(ee=this._weekdaysParse.indexOf(Me),-1!==ee)?ee:(ee=this._minWeekdaysParse.indexOf(Me),-1!==ee?ee:null)):(ee=this._minWeekdaysParse.indexOf(Me),-1!==ee||(ee=this._weekdaysParse.indexOf(Me),-1!==ee)?ee:(ee=this._shortWeekdaysParse.indexOf(Me),-1!==ee?ee:null))}computeMonthsParse(){const P=[],k=[],j=[];let ee,Me;for(Me=0;Me<12;Me++)ee=new Date(2e3,Me),P.push(this.monthsShort(ee,"")),k.push(this.months(ee,"")),j.push(this.months(ee,"")),j.push(this.monthsShort(ee,""));for(P.sort(nn),k.sort(nn),j.sort(nn),Me=0;Me<12;Me++)P[Me]=Vt(P[Me]),k[Me]=Vt(k[Me]);for(Me=0;Me<24;Me++)j[Me]=Vt(j[Me]);this._monthsRegex=new RegExp(`^(${j.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${k.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${P.join("|")})`,"i")}computeWeekdaysParse(){const P=[],k=[],j=[],ee=[];let Me;for(Me=0;Me<7;Me++){const zt=Bs(new Date(Date.UTC(2e3,1)),Me,null,!0),qi=this.weekdaysMin(zt),Rn=this.weekdaysShort(zt),ss=this.weekdays(zt);P.push(qi),k.push(Rn),j.push(ss),ee.push(qi),ee.push(Rn),ee.push(ss)}for(P.sort(nn),k.sort(nn),j.sort(nn),ee.sort(nn),Me=0;Me<7;Me++)k[Me]=Vt(k[Me]),j[Me]=Vt(j[Me]),ee[Me]=Vt(ee[Me]);this._weekdaysRegex=new RegExp(`^(${ee.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${j.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${k.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${P.join("|")})`,"i")}}function nn(v,P){return P.length-v.length}const Rr={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:ht,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:re,monthsShort:te,week:{dow:0,doy:6},weekdays:oe,weekdaysMin:Fe,weekdaysShort:ye,meridiemParse:/[ap]\.?m?\.?/i};function Br(v,P,k){const j=Math.min(v.length,P.length),ee=Math.abs(v.length-P.length);let zt,Me=0;for(zt=0;zt<j;zt++)(k&&v[zt]!==P[zt]||!k&&Jt(v[zt])!==Jt(P[zt]))&&Me++;return Me+ee}function fo(v,P){Wi(null,[v,v.length,!1],null,P)}function nr(v,P){return oo(v,P.locale).toString()}function Co(v){return Fs(v).toString()}function oo(v,P=ns(),k){return Ce(v,P.firstDayOfWeek(),P.firstDayOfYear(),k).year}function Fs(v,P){return Ce(v,1,4,P).year}function Vo(v,P){Wi(v,null,null,function(k,j){let ee=function Ao(v,P={}){return P._isUTC?P._offset||0:function Za(v){return 15*-Math.round(v.getTimezoneOffset()/15)}(v)}(k,{_isUTC:j.isUTC,_offset:j.offset}),Me="+";return ee<0&&(ee=-ee,Me="-"),Me+ji(~~(ee/60),2)+P+ji(~~ee%60,2)})}const $o=/([\+\-]|\d\d)/gi;const is={},Ro={};let ao;function Jo(v){return v&&v.toLowerCase().replace("_","-")}function ul(v){return is[v]||console.error(`Khronos locale error: please load locale "${v}" before using it`),is[v]}function Rs(v,P){let k;return v&&(Je(P)?k=ns(v):Le(v)&&(k=Ra(v,P)),k&&(ao=k)),ao&&ao._abbr}function Ra(v,P){if(null===P)return delete is[v],ao=ns("en"),null;if(!P)return;let k=Rr;if(P.abbr=v,null!=P.parentLocale){if(null==is[P.parentLocale])return Ro[P.parentLocale]||(Ro[P.parentLocale]=[]),Ro[P.parentLocale].push({name:v,config:P}),null;k=is[P.parentLocale]._config}return is[v]=new Pi(function Xr(v,P){const k=Object.assign({},v);for(const j in P)ze(P,j)&&(ct(v[j])&&ct(P[j])?(k[j]={},Object.assign(k[j],v[j]),Object.assign(k[j],P[j])):null!=P[j]?k[j]=P[j]:delete k[j]);for(const j in v)ze(v,j)&&!ze(P,j)&&ct(v[j])&&(k[j]=Object.assign({},k[j]));return k}(k,P)),Ro[v]&&Ro[v].forEach(function(j){Ra(j.name,j.config)}),Rs(v),is[v]}function ns(v){return function _o(){is.en||(Rs("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(v){const P=v%10;return v+(1===Jt(v%100/10)?"th":1===P?"st":2===P?"nd":3===P?"rd":"th")}}),function Or(){Wi("w",["ww",2,!1],"wo",function(v,P){return function Ur(v,P=ns(),k){return P.week(v,k)}(v,P.locale).toString(10)}),Wi("W",["WW",2,!1],"Wo",function(v){return function Ar(v,P){return Ce(v,1,4,P).week}(v).toString(10)}),bi("week","w"),bi("isoWeek","W"),ot("week",5),ot("isoWeek",5),ae("w",Nn),ae("ww",Nn,On),ae("W",Nn),ae("WW",Nn,On),wt(["w","ww","W","WW"],function(v,P,k,j){return P[j.substr(0,1)]=Jt(v),k})}(),function pa(){Wi(null,["gg",2,!1],null,function(v,P){return(oo(v,P.locale)%100).toString()}),Wi(null,["GG",2,!1],null,function(v){return(Fs(v)%100).toString()}),fo("gggg",nr),fo("ggggg",nr),fo("GGGG",Co),fo("GGGGG",Co),bi("weekYear","gg"),bi("isoWeekYear","GG"),ot("weekYear",1),ot("isoWeekYear",1),ae("G",Qe),ae("g",Qe),ae("GG",Nn,On),ae("gg",Nn,On),ae("GGGG",kr,fr),ae("gggg",kr,fr),ae("GGGGG",Ft,Yr),ae("ggggg",Ft,Yr),wt(["gggg","ggggg","GGGG","GGGGG"],function(v,P,k,j){return P[j.substr(0,2)]=Jt(v),k}),wt(["gg","GG"],function(v,P,k,j){return P[j]=Ei(v),k})}(),function Yi(){Wi("Y",null,null,function(v,P){const k=Qi(v,P.isUTC);return k<=9999?k.toString(10):`+${k}`}),Wi(null,["YY",2,!1],null,function(v,P){return(Qi(v,P.isUTC)%100).toString(10)}),Wi(null,["YYYY",4,!1],null,ei),Wi(null,["YYYYY",5,!1],null,ei),Wi(null,["YYYYYY",6,!0],null,ei),bi("year","y"),ot("year",1),ae("Y",Qe),ae("YY",Nn,On),ae("YYYY",kr,fr),ae("YYYYY",Ft,Yr),ae("YYYYYY",Ft,Yr),Hi(["YYYYY","YYYYYY"],St),Hi("YYYY",function(v,P,k){return P[St]=2===v.length?Ei(v):Jt(v),k}),Hi("YY",function(v,P,k){return P[St]=Ei(v),k}),Hi("Y",function(v,P,k){return P[St]=parseInt(v,10),k})}(),function Da(){Wi("z",null,null,function(v,P){return P.isUTC?"UTC":""}),Wi("zz",null,null,function(v,P){return P.isUTC?"Coordinated Universal Time":""})}(),function wr(){Wi("X",null,null,function(v){return function fn(v){return Math.floor(v.valueOf()/1e3)}(v).toString(10)}),Wi("x",null,null,function(v){return v.valueOf().toString(10)}),ae("x",Qe),ae("X",Zt),Hi("X",function(v,P,k){return k._d=new Date(1e3*parseFloat(v)),k}),Hi("x",function(v,P,k){return k._d=new Date(Jt(v)),k})}(),function Pl(){Wi("s",["ss",2,!1],null,function(v,P){return gi(v,P.isUTC).toString(10)}),bi("second","s"),ot("second",15),ae("s",Nn),ae("ss",Nn,On),Hi(["s","ss"],Ii)}(),function Us(){Wi("Q",null,"Qo",function(v,P){return function Ds(v,P=!1){return Math.ceil((Xi(v,P)+1)/3)}(v,P.isUTC).toString(10)}),bi("quarter","Q"),ot("quarter",7),ae("Q",zn),Hi("Q",function(v,P,k){return P[pi]=3*(Jt(v)-1),k})}(),function ma(){Vo("Z",":"),Vo("ZZ",""),ae("Z",Tt),ae("ZZ",Tt),Hi(["Z","ZZ"],function(v,P,k){return k._useUTC=!0,k._tzm=function Zo(v,P){const k=(P||"").match(v);if(null===k)return null;const ee=k[k.length-1].match($o)||["-","0","0"],Me=60*parseInt(ee[1],10)+Jt(ee[2]);return 0===Me?0:"+"===ee[0]?Me:-Me}(Tt,v),k})}(),function xe(){Wi("M",["MM",2,!1],"Mo",function(v,P){return(Xi(v,P.isUTC)+1).toString(10)}),Wi("MMM",null,null,function(v,P){return P.locale.monthsShort(v,P.format,P.isUTC)}),Wi("MMMM",null,null,function(v,P){return P.locale.months(v,P.format,P.isUTC)}),bi("month","M"),ot("month",8),ae("M",Nn),ae("MM",Nn,On),ae("MMM",function(v,P){return P.monthsShortRegex(v)}),ae("MMMM",function(v,P){return P.monthsRegex(v)}),Hi(["M","MM"],function(v,P,k){return P[pi]=Jt(v)-1,k}),Hi(["MMM","MMMM"],function(v,P,k,j){const ee=k._locale.monthsParse(v,j,k._strict);return null!=ee?P[pi]=ee:It(k).invalidMonth=!!v,k})}(),function Ko(){Wi("m",["mm",2,!1],null,function(v,P){return jt(v,P.isUTC).toString(10)}),bi("minute","m"),ot("minute",14),ae("m",Nn),ae("mm",Nn,On),Hi(["m","mm"],Ji)}(),function zl(){let v;for(Wi("S",null,null,function(k,j){return(~~(V(k,j.isUTC)/100)).toString(10)}),Wi(null,["SS",2,!1],null,function(k,j){return(~~(V(k,j.isUTC)/10)).toString(10)}),Wi(null,["SSS",3,!1],null,function(k,j){return V(k,j.isUTC).toString(10)}),Wi(null,["SSSS",4,!1],null,function(k,j){return(10*V(k,j.isUTC)).toString(10)}),Wi(null,["SSSSS",5,!1],null,function(k,j){return(100*V(k,j.isUTC)).toString(10)}),Wi(null,["SSSSSS",6,!1],null,function(k,j){return(1e3*V(k,j.isUTC)).toString(10)}),Wi(null,["SSSSSSS",7,!1],null,function(k,j){return(1e4*V(k,j.isUTC)).toString(10)}),Wi(null,["SSSSSSSS",8,!1],null,function(k,j){return(1e5*V(k,j.isUTC)).toString(10)}),Wi(null,["SSSSSSSSS",9,!1],null,function(k,j){return(1e6*V(k,j.isUTC)).toString(10)}),bi("millisecond","ms"),ot("millisecond",16),ae("S",mr,zn),ae("SS",mr,On),ae("SSS",mr,sr),v="SSSS";v.length<=9;v+="S")ae(v,Ze);function P(k,j,ee){return j[ki]=Jt(1e3*parseFloat(`0.${k}`)),ee}for(v="S";v.length<=9;v+="S")Hi(v,P)}(),function Do(){function v(ee,Me){return on(ee,Me)%12||12}function k(ee,Me){Wi(ee,null,null,function(zt,qi){return qi.locale.meridiem(on(zt,qi.isUTC),jt(zt,qi.isUTC),Me)})}function j(ee,Me){return Me._meridiemParse}Wi("H",["HH",2,!1],null,function(ee,Me){return on(ee,Me.isUTC).toString(10)}),Wi("h",["hh",2,!1],null,function(ee,Me){return v(ee,Me.isUTC).toString(10)}),Wi("k",["kk",2,!1],null,function(ee,Me){return function P(ee,Me){return on(ee,Me)||24}(ee,Me.isUTC).toString(10)}),Wi("hmm",null,null,function(ee,Me){return`${v(ee,Me.isUTC)}${ji(jt(ee,Me.isUTC),2)}`}),Wi("hmmss",null,null,function(ee,Me){return`${v(ee,Me.isUTC)}${ji(jt(ee,Me.isUTC),2)}${ji(gi(ee,Me.isUTC),2)}`}),Wi("Hmm",null,null,function(ee,Me){return`${on(ee,Me.isUTC)}${ji(jt(ee,Me.isUTC),2)}`}),Wi("Hmmss",null,null,function(ee,Me){return`${on(ee,Me.isUTC)}${ji(jt(ee,Me.isUTC),2)}${ji(gi(ee,Me.isUTC),2)}`}),k("a",!0),k("A",!1),bi("hour","h"),ot("hour",13),ae("a",j),ae("A",j),ae("H",Nn),ae("h",Nn),ae("k",Nn),ae("HH",Nn,On),ae("hh",Nn,On),ae("kk",Nn,On),ae("hmm",_r),ae("hmmss",ur),ae("Hmm",_r),ae("Hmmss",ur),Hi(["H","HH"],Ti),Hi(["k","kk"],function(ee,Me,zt){const qi=Jt(ee);return Me[Ti]=24===qi?0:qi,zt}),Hi(["a","A"],function(ee,Me,zt){return zt._isPm=zt._locale.isPM(ee),zt._meridiem=ee,zt}),Hi(["h","hh"],function(ee,Me,zt){return Me[Ti]=Jt(ee),It(zt).bigHour=!0,zt}),Hi("hmm",function(ee,Me,zt){const qi=ee.length-2;return Me[Ti]=Jt(ee.substr(0,qi)),Me[Ji]=Jt(ee.substr(qi)),It(zt).bigHour=!0,zt}),Hi("hmmss",function(ee,Me,zt){const qi=ee.length-4,Rn=ee.length-2;return Me[Ti]=Jt(ee.substr(0,qi)),Me[Ji]=Jt(ee.substr(qi,2)),Me[Ii]=Jt(ee.substr(Rn)),It(zt).bigHour=!0,zt}),Hi("Hmm",function(ee,Me,zt){const qi=ee.length-2;return Me[Ti]=Jt(ee.substr(0,qi)),Me[Ji]=Jt(ee.substr(qi)),zt}),Hi("Hmmss",function(ee,Me,zt){const qi=ee.length-4,Rn=ee.length-2;return Me[Ti]=Jt(ee.substr(0,qi)),Me[Ji]=Jt(ee.substr(qi,2)),Me[Ii]=Jt(ee.substr(Rn)),zt})}(),function Q(){Wi("DDD",["DDDD",3,!1],"DDDo",function(v){return ce(v).toString(10)}),bi("dayOfYear","DDD"),ot("dayOfYear",4),ae("DDD",mr),ae("DDDD",sr),Hi(["DDD","DDDD"],function(v,P,k){return k._dayOfYear=Jt(v),k})}(),function nl(){Wi("d",null,"do",function(v,P){return $i(v,P.isUTC).toString(10)}),Wi("dd",null,null,function(v,P){return P.locale.weekdaysMin(v,P.format,P.isUTC)}),Wi("ddd",null,null,function(v,P){return P.locale.weekdaysShort(v,P.format,P.isUTC)}),Wi("dddd",null,null,function(v,P){return P.locale.weekdays(v,P.format,P.isUTC)}),Wi("e",null,null,function(v,P){return Mn(v,P.locale,P.isUTC).toString(10)}),Wi("E",null,null,function(v,P){return function A(v,P){return $i(v,P)||7}(v,P.isUTC).toString(10)}),bi("day","d"),bi("weekday","e"),bi("isoWeekday","E"),ot("day",11),ot("weekday",11),ot("isoWeekday",11),ae("d",Nn),ae("e",Nn),ae("E",Nn),ae("dd",function(v,P){return P.weekdaysMinRegex(v)}),ae("ddd",function(v,P){return P.weekdaysShortRegex(v)}),ae("dddd",function(v,P){return P.weekdaysRegex(v)}),wt(["dd","ddd","dddd"],function(v,P,k,j){const ee=k._locale.weekdaysParse(v,j,k._strict);return null!=ee?P.d=ee:It(k).invalidWeekday=!!v,k}),wt(["d","e","E"],function(v,P,k,j){return P[j]=Jt(v),k})}(),function qe(){Wi("D",["DD",2,!1],"Do",function(v,P){return en(v,P.isUTC).toString(10)}),bi("date","D"),ot("date",9),ae("D",Nn),ae("DD",Nn,On),ae("Do",function(v,P){return P._dayOfMonthOrdinalParse||P._ordinalParse}),Hi(["D","DD"],vi),Hi("Do",function(v,P,k){return P[vi]=Jt(v.match(Nn)[0]),k})}())}(),v?function lo(v){let P,k,j=0;for(;j<v.length;){const ee=Jo(v[j]).split("-");let Me=ee.length;for(P=Jo(v[j+1]),P=P?P.split("-"):null;Me>0;){if(k=ul(ee.slice(0,Me).join("-")),k)return k;if(P&&P.length>=Me&&Br(ee,P,!0)>=Me-1)break;Me--}j++}return null}(tt(v)?v:[v]):ao}const Jr=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],Cr=Jr.reduce((v,P)=>(v[P]=!0,v),{});function Qo(v){return v<0?Math.floor(v):Math.ceil(v)}function hl(v){return 4800*v/146097}function gs(v){return 146097*v/4800}let Ys=Math.round;const Es_ss=44,Es_s=45,Es_m=45,Es_h=22,Es_d=26,Es_M=11;function Cc(v,P,k,j,ee){return ee.relativeTime(P||1,!!k,v,j)}class to{constructor(P,k={}){this._data={},this._locale=ns(),this._locale=k&&k._locale||ns();const ee=P.year||0,Me=P.quarter||0,zt=P.month||0,qi=P.week||0,Rn=P.day||0,ss=P.hours||0,Ms=P.minutes||0,Bo=P.seconds||0,Wa=P.milliseconds||0;return this._isValid=function eo(v){if(Object.keys(v).some(j=>j in Cr&&null===v[j]||isNaN(v[j])))return!1;let k=!1;for(let j=0;j<Jr.length;++j)if(v[Jr[j]]){if(k)return!1;v[Jr[j]]!==Jt(v[Jr[j]])&&(k=!0)}return!0}(P),this._milliseconds=+Wa+1e3*Bo+60*Ms*1e3+1e3*ss*60*60,this._days=+Rn+7*qi,this._months=+zt+3*Me+12*ee,function Ts(v){let P=v._milliseconds,k=v._days,j=v._months;const ee=v._data;P>=0&&k>=0&&j>=0||P<=0&&k<=0&&j<=0||(P+=864e5*Qo(gs(j)+k),k=0,j=0),ee.milliseconds=P%1e3;const Me=Se(P/1e3);ee.seconds=Me%60;const zt=Se(Me/60);ee.minutes=zt%60;const qi=Se(zt/60);ee.hours=qi%24,k+=Se(qi/24);const Rn=Se(hl(k));j+=Rn,k-=Qo(gs(Rn));const ss=Se(j/12);return j%=12,ee.day=k,ee.month=j,ee.year=ss,v}(this)}isValid(){return this._isValid}humanize(P){if(!this.isValid())return this.localeData().invalidDate;const k=this.localeData();let j=function Ss(v,P,k){const j=na(v).abs(),ee=Ys(j.as("s")),Me=Ys(j.as("m")),zt=Ys(j.as("h")),qi=Ys(j.as("d")),Rn=Ys(j.as("M")),ss=Ys(j.as("y")),Ms=ee<=Es_ss&&["s",ee]||ee<Es_s&&["ss",ee]||Me<=1&&["m"]||Me<Es_m&&["mm",Me]||zt<=1&&["h"]||zt<Es_h&&["hh",zt]||qi<=1&&["d"]||qi<Es_d&&["dd",qi]||Rn<=1&&["M"]||Rn<Es_M&&["MM",Rn]||ss<=1&&["y"]||["yy",ss];return Cc.apply(null,[Ms[0],Ms[1],P,+v>0,k])}(this,!P,k);return P&&(j=k.pastFuture(+this,j)),k.postformat(j)}localeData(){return this._locale}locale(P){return P?(this._locale=ns(P)||this._locale,this):this._locale._abbr}abs(){const P=Math.abs,k=this._data;return this._milliseconds=P(this._milliseconds),this._days=P(this._days),this._months=P(this._months),k.milliseconds=P(k.milliseconds),k.seconds=P(k.seconds),k.minutes=P(k.minutes),k.hours=P(k.hours),k.month=P(k.month),k.year=P(k.year),this}as(P){if(!this.isValid())return NaN;let k,j;const ee=this._milliseconds,Me=ci(P);if("month"===Me||"year"===Me)return k=this._days+ee/864e5,j=this._months+hl(k),"month"===Me?j:j/12;switch(k=this._days+Math.round(gs(this._months)),Me){case"week":return k/7+ee/6048e5;case"day":return k+ee/864e5;case"hours":return 24*k+ee/36e5;case"minutes":return 1440*k+ee/6e4;case"seconds":return 86400*k+ee/1e3;case"milliseconds":return Math.floor(864e5*k)+ee;default:throw new Error(`Unknown unit ${Me}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Jt(this._months/12):NaN}}function ea(v){if(null==v._isValid){const P=It(v),k=Array.prototype.some.call(P.parsedDateParts,function(ee){return null!=ee});let j=!isNaN(v._d&&v._d.getTime())&&P.overflow<0&&!P.empty&&!P.invalidMonth&&!P.invalidWeekday&&!P.weekdayMismatch&&!P.nullInput&&!P.invalidFormat&&!P.userInvalidated&&(!P.meridiem||P.meridiem&&k);if(v._strict&&(j=j&&0===P.charsLeftOver&&0===P.unusedTokens.length&&void 0===P.bigHour),null!=Object.isFrozen&&Object.isFrozen(v))return j;v._isValid=j}return v._isValid}function La(v,P){return v._d=new Date(NaN),Object.assign(It(v),P||{userInvalidated:!0}),v}const Ka=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Uo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tl=/Z|[+-]\d\d(?::?\d\d)?/,ks=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],ga=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],vo=/^\/?Date\((\-?\d+)/i,Ja={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},pl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function yo(v){if(!Le(v._i))return v;const P=v._i,k=Ka.exec(P)||Uo.exec(P);let j,ee,Me,zt,qi,Rn;if(!k)return v._isValid=!1,v;for(qi=0,Rn=ks.length;qi<Rn;qi++)if(ks[qi][1].exec(k[1])){ee=ks[qi][0],j=!1!==ks[qi][2];break}if(null==ee)return v._isValid=!1,v;if(k[3]){for(qi=0,Rn=ga.length;qi<Rn;qi++)if(ga[qi][1].exec(k[3])){Me=(k[2]||" ")+ga[qi][0];break}if(null==Me)return v._isValid=!1,v}if(!j&&null!=Me)return v._isValid=!1,v;if(k[4]){if(!Tl.exec(k[4]))return v._isValid=!1,v;zt="Z"}return v._f=ee+(Me||"")+(zt||""),ml(v)}function So(v){const P=parseInt(v,10);return P<=49?P+2e3:P}function co(v){if(!Le(v._i))return v;const P=pl.exec(function lc(v){return v.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(v._i));if(!P)return function Pa(v){return v._isValid=!1,v}(v);const k=function ql(v,P,k,j,ee,Me){const zt=[So(v),te.indexOf(P),parseInt(k,10),parseInt(j,10),parseInt(ee,10)];return Me&&zt.push(parseInt(Me,10)),zt}(P[4],P[3],P[2],P[5],P[6],P[7]);return function Wo(v,P,k){return!v||ye.indexOf(v)===new Date(P[0],P[1],P[2]).getDay()||(It(k).weekdayMismatch=!0,k._isValid=!1,!1)}(P[1],k,v)&&(v._a=k,v._tzm=function za(v,P,k){if(v)return Ja[v];if(P)return 0;{const j=parseInt(k,10),ee=j%100;return(j-ee)/100*60+ee}}(P[8],P[9],P[10]),v._d=Gn.apply(null,v._a),v._d.setUTCMinutes(v._d.getUTCMinutes()-v._tzm),It(v).rfc2822=!0),v}function Ls(v,P,k,j,ee=0){const Me=ns(k||"en");if(!Me)throw new Error(`Locale "${k}" is not defined, please add it with "defineLocale(...)"`);const qi=function el(v,P,k,j,ee=0){if(!We(v))return k.invalidDate;const Me=ta(P,k);return gn[Me]=gn[Me]||function _n(v){const P=v.match(di),k=P.length,j=new Array(k);for(let ee=0;ee<k;ee++)j[ee]=tn[P[ee]]?tn[P[ee]]:Ln(P[ee]);return function(ee,Me,zt,qi=0){let Rn="";for(let ss=0;ss<k;ss++)Rn+=ut(j[ss])?j[ss].call(null,ee,{format:v,locale:Me,isUTC:zt,offset:qi}):j[ss];return Rn}}(Me),gn[Me](v,k,j,ee)}(v,P||(j?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),Me,j,ee);return qi&&Me.postformat(qi)}function ta(v,P){let k=v,j=5;const ee=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Me=zt=>P.formatLongDate(zt)||zt;for(ee.lastIndex=0;j>=0&&ee.test(k);)k=k.replace(ee,Me),ee.lastIndex=0,j-=1;return k}function bo(v,P,k){return v??P??k}function Ya(v){const P=[];let k,j,ee;if(v._d)return v;const Me=function Fa(v){const P=new Date;return v._useUTC?[P.getUTCFullYear(),P.getUTCMonth(),P.getUTCDate()]:[P.getFullYear(),P.getMonth(),P.getDate()]}(v);for(v._w&&null==v._a[vi]&&null==v._a[pi]&&function fl(v){let P,k,j,ee,Me,zt,qi;const Rn=v._w;if(null!=Rn.GG||null!=Rn.W||null!=Rn.E)ee=1,Me=4,P=bo(Rn.GG,v._a[St],Ce(new Date,1,4).year),k=bo(Rn.W,1),j=bo(Rn.E,1),(j<1||j>7)&&(qi=!0);else{ee=v._locale._week.dow,Me=v._locale._week.doy;const ss=Ce(new Date,ee,Me);P=bo(Rn.gg,v._a[St],ss.year),k=bo(Rn.w,ss.week),null!=Rn.d?(j=Rn.d,(j<0||j>6)&&(qi=!0)):null!=Rn.e?(j=Rn.e+ee,(Rn.e<0||Rn.e>6)&&(qi=!0)):j=ee}k<1||k>Re(P,ee,Me)?It(v)._overflowWeeks=!0:null!=qi?It(v)._overflowWeekday=!0:(zt=function De(v,P,k,j,ee){const qi=1+7*(P-1)+(7+k-j)%7+Ee(v,j,ee);let Rn,ss;return qi<=0?(Rn=v-1,ss=Ki(Rn)+qi):qi>Ki(v)?(Rn=v+1,ss=qi-Ki(v)):(Rn=v,ss=qi),{year:Rn,dayOfYear:ss}}(P,k,j,ee,Me),v._a[St]=zt.year,v._dayOfYear=zt.dayOfYear)}(v),null!=v._dayOfYear&&(ee=bo(v._a[St],Me[St]),(v._dayOfYear>Ki(ee)||0===v._dayOfYear)&&(It(v)._overflowDayOfYear=!0),j=new Date(Date.UTC(ee,0,v._dayOfYear)),v._a[pi]=j.getUTCMonth(),v._a[vi]=j.getUTCDate()),k=0;k<3&&null==v._a[k];++k)v._a[k]=P[k]=Me[k];for(;k<7;k++)v._a[k]=P[k]=null==v._a[k]?2===k?1:0:v._a[k];24===v._a[Ti]&&0===v._a[Ji]&&0===v._a[Ii]&&0===v._a[ki]&&(v._nextDay=!0,v._a[Ti]=0),v._d=(v._useUTC?Gn:Yn).apply(null,P);const zt=v._useUTC?v._d.getUTCDay():v._d.getDay();return null!=v._tzm&&v._d.setUTCMinutes(v._d.getUTCMinutes()-v._tzm),v._nextDay&&(v._a[Ti]=24),v._w&&typeof v._w.d<"u"&&v._w.d!==zt&&(It(v).weekdayMismatch=!0),v}function Il(v){let P;const k=v._a;return k&&-2===It(v).overflow&&(P=k[pi]<0||k[pi]>11?pi:k[vi]<1||k[vi]>Ot(k[St],k[pi])?vi:k[Ti]<0||k[Ti]>24||24===k[Ti]&&(0!==k[Ji]||0!==k[Ii]||0!==k[ki])?Ti:k[Ji]<0||k[Ji]>59?Ji:k[Ii]<0||k[Ii]>59?Ii:k[ki]<0||k[ki]>999?ki:-1,It(v)._overflowDayOfYear&&(P<St||P>vi)&&(P=vi),It(v)._overflowWeeks&&-1===P&&(P=Zi),It(v)._overflowWeekday&&-1===P&&(P=pn),It(v).overflow=P),v}const ia="ISO_8601",Xl="RFC_2822";function ml(v){if(v._f===ia)return yo(v);if(v._f===Xl)return co(v);if(v._a=[],It(v).empty=!0,tt(v._f)||!v._i&&0!==v._i)return v;let P=v._i.toString(),k=0;const j=P.length,ee=ta(v._f,v._locale).match(di)||[];let Me,zt,qi,Rn;for(Me=0;Me<ee.length;Me++)zt=ee[Me],qi=(P.match(Ne(zt,v._locale))||[])[0],qi&&(Rn=P.substr(0,P.indexOf(qi)),Rn.length>0&&It(v).unusedInput.push(Rn),P=P.slice(P.indexOf(qi)+qi.length),k+=qi.length),tn[zt]?(qi?It(v).empty=!1:It(v).unusedTokens.push(zt),At(zt,qi,v)):v._strict&&!qi&&It(v).unusedTokens.push(zt);return It(v).charsLeftOver=j-k,P.length>0&&It(v).unusedInput.push(P),v._a[Ti]<=12&&!0===It(v).bigHour&&v._a[Ti]>0&&(It(v).bigHour=void 0),It(v).parsedDateParts=v._a.slice(0),It(v).meridiem=v._meridiem,v._a[Ti]=function Lo(v,P,k){let j=P;if(null==k)return j;if(null!=v.meridiemHour)return v.meridiemHour(j,k);if(null==v.isPM)return j;const ee=v.isPM(k);return ee&&j<12&&(j+=12),!ee&&12===j&&(j=0),j}(v._locale,v._a[Ti],v._meridiem),Ya(v),Il(v)}function Is(v){const P=Il(function xo(v){let P=v._i;const k=v._f;return v._locale=v._locale||ns(v._l),null===P||void 0===k&&""===P?La(v,{nullInput:!0}):(Le(P)&&(v._i=P=v._locale.preparse(P,k)),Te(P)?(v._d=Y(P),v):(tt(k)?function Zl(v){let P,k,j,ee,Me;if(!v._f||0===v._f.length)return It(v).invalidFormat=!0,La(v);for(Me=0;Me<v._f.length;Me++)ee=0,P=Object.assign({},v),null!=v._useUTC&&(P._useUTC=v._useUTC),P._f=v._f[Me],ml(P),ea(P)&&(ee+=It(P).charsLeftOver,ee+=10*It(P).unusedTokens.length,It(P).score=ee,(null==j||ee<j)&&(j=ee,k=P));Object.assign(v,k||P)}(v):k?ml(v):function il(v){const P=v._i;if(Je(P))v._d=new Date;else if(Te(P))v._d=Y(P);else if(Le(P))!function Qa(v){if(!Le(v._i))return v;const P=vo.exec(v._i);null!==P?v._d=new Date(+P[1]):(yo(v),!1!==v._isValid||(delete v._isValid,co(v),!1!==v._isValid||(delete v._isValid,La(v))))}(v);else if(tt(P)&&P.length){const k=P.slice(0);v._a=k.map(j=>Le(j)?parseInt(j,10):j),Ya(v)}else if(ct(P))!function tl(v){if(v._d)return v;const P=v._i;if(ct(P)){const k=function ti(v){const P={};let k,j;for(j in v)ze(v,j)&&(k=ci(j),k&&(P[k]=v[j]));return P}(P);v._a=[k.year,k.month,k.day,k.hours,k.minutes,k.seconds,k.milliseconds].map(j=>Le(j)?parseInt(j,10):j)}return Ya(v)}(v);else{if(!vt(P))return La(v);v._d=new Date(P)}}(v),ea(v)||(v._d=null),v))}(v));return P._d=new Date(null!=P._d?P._d.getTime():NaN),ea(Object.assign({},P,{_isValid:null}))||(P._d=new Date(NaN)),P}function Po(v,P,k,j,ee){return Te(v)?v:function gl(v,P,k,j,ee){const Me={};let zt=v;return(ct(zt)&&function qt(v){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(v).length;let P;for(P in v)if(v.hasOwnProperty(P))return!1;return!0}(zt)||tt(zt)&&0===zt.length)&&(zt=void 0),Me._useUTC=Me._isUTC=ee,Me._l=k,Me._i=zt,Me._f=P,Me._strict=j,Is(Me)}(v,P,k,j,ee)._d}function As(v){return v instanceof Date?new Date(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate(),v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()):null}function Ba(v){return v<0?-1*Math.round(-1*v):Math.round(v)}function rs(v,P,k="milliseconds"){return!(!v||!P)&&("milliseconds"===k?v.valueOf()>P.valueOf():P.valueOf()<W(v,k).valueOf())}function uo(v,P,k="milliseconds"){return!(!v||!P)&&("milliseconds"===k?v.valueOf()<P.valueOf():X(v,k).valueOf()<P.valueOf())}function qs(v,P,k="milliseconds"){if(!v||!P)return!1;if("milliseconds"===k)return v.valueOf()===P.valueOf();const j=P.valueOf();return W(v,k).valueOf()<=j&&j<=X(v,k).valueOf()}const _l=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,_a=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function na(v,P,k={}){const j=function ra(v,P){if(null==v)return{};if(function Eo(v){return v instanceof to}(v))return{milliseconds:v._milliseconds,day:v._days,month:v._months};if(vt(v))return P?{[P]:v}:{milliseconds:v};if(Le(v)){let k=_l.exec(v);if(k){const j="-"===k[1]?-1:1;return{year:0,day:Jt(k[vi])*j,hours:Jt(k[Ti])*j,minutes:Jt(k[Ji])*j,seconds:Jt(k[Ii])*j,milliseconds:Jt(Ba(1e3*Jt(k[ki])))*j}}if(k=_a.exec(v),k){const j="-"===k[1]?-1:1;return{year:zo(k[2],j),month:zo(k[3],j),week:zo(k[4],j),day:zo(k[5],j),hours:zo(k[6],j),minutes:zo(k[7],j),seconds:zo(k[8],j)}}}if(ct(v)&&("from"in v||"to"in v)){const k=function sa(v,P){if(!We(v)||!We(P))return{milliseconds:0,months:0};let k;const j=function Ho(v,P,k={}){if(!k._isUTC)return v;const j=Y(P),ee=6e4*(k._offset||0),Me=v.valueOf()-j.valueOf()+ee;return j.setTime(j.valueOf()+Me),j}(P,v,{_offset:v.getTimezoneOffset()});return uo(v,j)?k=vl(v,j):(k=vl(j,v),k.milliseconds=-k.milliseconds,k.months=-k.months),k}(Po(v.from),Po(v.to));return{milliseconds:k.milliseconds,month:k.months}}return v}(v,P);return new to(j,k)}function zo(v,P){const k=v&&parseFloat(v.replace(",","."));return(isNaN(k)?0:k)*P}function vl(v,P){const k={milliseconds:0,months:0};return k.months=Xi(P)-Xi(v)+12*(Qi(P)-Qi(v)),rs(ho(Y(v),k.months,"month"),P)&&--k.months,k.milliseconds=+P-+ho(Y(v),k.months,"month"),k}function ho(v,P,k,j){return oa(v,na(P,k),1,j)}function oa(v,P,k,j){const ee=P._milliseconds,Me=Ba(P._days),zt=Ba(P._months);return zt&&i(v,Xi(v,j)+zt*k,j),Me&&I(v,en(v,j)+Me*k,j),ee&&function R(v,P){v.setTime(P)}(v,function Bi(v){return v.getTime()}(v)+ee*k),Y(v)}function Bs(v,P,k=ns(),j){const ee=$i(v,j),Me=function Va(v,P){if(!Le(v))return v;const k=parseInt(v,10);if(!isNaN(k))return k;const j=P.weekdaysParse(v);return vt(j)?j:null}(P,k);return ho(v,Me-ee,"day")}function Mn(v,P=ns(),k){return($i(v,k)+7-P.firstDayOfWeek())%7}const lt=function(v){return 0===v?0:1===v?1:2===v?2:v%100>=3&&v%100<=10?3:v%100>=11?4:5},ri={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Si=function(v){return function(P,k){const j=lt(P);let ee=ri[v][lt(P)];return 2===j&&(ee=ee[k?0:1]),ee.replace(/%d/i,P.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),Si("s"),Si("s"),Si("m"),Si("m"),Si("h"),Si("h"),Si("d"),Si("d"),Si("M"),Si("M"),Si("y"),Si("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const Gs="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),To="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(v,P){let k,j=[];for(k=0;k<12;k++)j[k]=new RegExp("^"+v[k]+"$|^"+P[k]+"$","i")})(Gs,To),function(v){let P,k=[];for(P=0;P<12;P++)k[P]=new RegExp("^"+v[P]+"$","i")}(To),function(v){let P,k=[];for(P=0;P<12;P++)k[P]=new RegExp("^"+v[P]+"$","i")}(Gs),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const Qr={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:v=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===v,meridiem:(v,P,k)=>v<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(v,P){const k=Qr.longDateFormat[P]?Qr.longDateFormat[P]:P;return-1!==k.indexOf("YYYY",k.length-4)?v.substr(0,v.length-4)+(parseInt(v.substr(v.length-4),10)-543):v},getFullYear:(v,P=!1)=>543+(P?v.getUTCFullYear():v.getFullYear())};function it(v){return function(P){return v+"\u043e"+(11===on(P)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),it("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),it("[\u0417\u0430\u0432\u0442\u0440\u0430 "),it("[\u0412\u0447\u043e\u0440\u0430 "),it("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var Zn=Et(140),Wn=Et(6504),rr=Et(6700),vr=Et(756),Zr=Et(3252),Dr=Et(3920),Kr=Et(208);class Ca extends rr.g{constructor(P,k,j){super(P),k.pipe((0,Dr.y)(vr.M)).pipe((0,Kr.K)((zt,qi)=>qi?j(zt,qi):zt,P)).subscribe(zt=>this.next(zt))}}class Ml extends Zr._{constructor(P,k,j){super(),this._dispatcher=P,this._reducer=k,this.source=j}select(P){return(this.source?.pipe((0,He.k)(P))||(new Zr._).pipe((0,He.k)(P))).pipe((0,Be.a)())}lift(P){const k=new Ml(this._dispatcher,this._reducer,this);return k.operator=P,k}dispatch(P){this._dispatcher.next(P)}next(P){this._dispatcher.next(P)}error(P){this._dispatcher.error(P)}complete(){}}var Vs=Et(1368);function Yd(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0\xa0\xa0"),e.C$Y())}function Bd(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td")(1,"a",1),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeMinutes(ee.minuteStep))}),e.wR5(2,"span",2),e.C$Y()()}if(2&v){const k=e.GaO();e.yG2(),e.eAK("disabled",!k.canIncrementMinutes||!k.isEditable)}}function Al(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0"),e.C$Y())}function bl(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td")(1,"a",1),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeSeconds(ee.secondsStep))}),e.wR5(2,"span",2),e.C$Y()()}if(2&v){const k=e.GaO();e.yG2(),e.eAK("disabled",!k.canIncrementSeconds||!k.isEditable)}}function bp(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0\xa0\xa0"),e.C$Y())}function zu(v,P){1&v&&e.wR5(0,"td")}function du(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0:\xa0"),e.C$Y())}function Sc(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td",4)(1,"input",5),e.qCj("wheel",function(ee){e.usT(k);const Me=e.GaO();return Me.prevDef(ee),e.CGJ(Me.changeMinutes(Me.minuteStep*Me.wheelSign(ee),"wheel"))})("keydown.ArrowUp",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeMinutes(ee.minuteStep,"key"))})("keydown.ArrowDown",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeMinutes(-ee.minuteStep,"key"))})("change",function(ee){e.usT(k);const Me=e.GaO();return e.CGJ(Me.updateMinutes(ee.target))}),e.C$Y()()}if(2&v){const k=e.GaO();e.eAK("has-error",k.invalidMinutes),e.yG2(),e.eAK("is-invalid",k.invalidMinutes),e.E7m("placeholder",k.minutesPlaceholder)("readonly",k.readonlyInput)("disabled",k.disabled)("value",k.minutes),e.e48("aria-label",k.labelMinutes)}}function Gd(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0:\xa0"),e.C$Y())}function Sh(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td",4)(1,"input",5),e.qCj("wheel",function(ee){e.usT(k);const Me=e.GaO();return Me.prevDef(ee),e.CGJ(Me.changeSeconds(Me.secondsStep*Me.wheelSign(ee),"wheel"))})("keydown.ArrowUp",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeSeconds(ee.secondsStep,"key"))})("keydown.ArrowDown",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeSeconds(-ee.secondsStep,"key"))})("change",function(ee){e.usT(k);const Me=e.GaO();return e.CGJ(Me.updateSeconds(ee.target))}),e.C$Y()()}if(2&v){const k=e.GaO();e.eAK("has-error",k.invalidSeconds),e.yG2(),e.eAK("is-invalid",k.invalidSeconds),e.E7m("placeholder",k.secondsPlaceholder)("readonly",k.readonlyInput)("disabled",k.disabled)("value",k.seconds),e.e48("aria-label",k.labelSeconds)}}function kh(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0\xa0\xa0"),e.C$Y())}function Th(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td")(1,"button",8),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.toggleMeridian())}),e.OEk(2),e.C$Y()()}if(2&v){const k=e.GaO();e.yG2(),e.eAK("disabled",!k.isEditable||!k.canToggleMeridian),e.E7m("disabled",!k.isEditable||!k.canToggleMeridian),e.yG2(),e.oRS("",k.meridian," ")}}function Jp(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0\xa0\xa0"),e.C$Y())}function Qp(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td")(1,"a",1),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeMinutes(-ee.minuteStep))}),e.wR5(2,"span",7),e.C$Y()()}if(2&v){const k=e.GaO();e.yG2(),e.eAK("disabled",!k.canDecrementMinutes||!k.isEditable)}}function Ih(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0"),e.C$Y())}function uu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td")(1,"a",1),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.changeSeconds(-ee.secondsStep))}),e.wR5(2,"span",7),e.C$Y()()}if(2&v){const k=e.GaO();e.yG2(),e.eAK("disabled",!k.canDecrementSeconds||!k.isEditable)}}function Nd(v,P){1&v&&(e.I0R(0,"td"),e.OEk(1,"\xa0\xa0\xa0"),e.C$Y())}function zc(v,P){1&v&&e.wR5(0,"td")}let ca=(()=>{class v{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#s=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(k){return{type:v.WRITE_VALUE,payload:k}}changeHours(k){return{type:v.CHANGE_HOURS,payload:k}}changeMinutes(k){return{type:v.CHANGE_MINUTES,payload:k}}changeSeconds(k){return{type:v.CHANGE_SECONDS,payload:k}}setTime(k){return{type:v.SET_TIME_UNIT,payload:k}}updateControls(k){return{type:v.UPDATE_CONTROLS,payload:k}}static#o=this.\u0275fac=function(j){return new(j||v)};static#a=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})();const id=10,Fc=24,Yc=12,xp=60,wp=60;function Fu(v){return!(!v||v instanceof Date&&isNaN(v.getHours()))&&("string"!=typeof v||Fu(new Date(v)))}function Yu(v,P){return!(v.min&&P<v.min||v.max&&P>v.max)}function Bc(v){return typeof v>"u"?NaN:"number"==typeof v?v:parseInt(v,id)}function Bl(v,P=!1){const k=Bc(v);return isNaN(k)||k<0||k>(P?Yc:Fc)?NaN:k}function Oh(v){const P=Bc(v);return isNaN(P)||P<0||P>xp?NaN:P}function Mh(v){const P=Bc(v);return isNaN(P)||P<0||P>wp?NaN:P}function io(v){return"string"==typeof v?new Date(v):v}function qn(v,P){if(!v)return qn(hc(new Date,0,0,0),P);if(!P)return v;let k=v.getHours(),j=v.getMinutes(),ee=v.getSeconds();return P.hour&&(k+=Bc(P.hour)),P.minute&&(j+=Bc(P.minute)),P.seconds&&(ee+=Bc(P.seconds)),hc(v,k,j,ee)}function kc(v,P){let k=Bl(P.hour);const j=Oh(P.minute),ee=Mh(P.seconds)||0;return P.isPM&&12!==k&&(k+=Yc),v?isNaN(k)||isNaN(j)?v:hc(v,k,j,ee):isNaN(k)||isNaN(j)?v:hc(new Date,k,j,ee)}function hc(v,P,k,j){const ee=new Date(v.getFullYear(),v.getMonth(),v.getDate(),P,k,j,v.getMilliseconds());return ee.setFullYear(v.getFullYear()),ee.setMonth(v.getMonth()),ee.setDate(v.getDate()),ee}function Ea(v){const P=v.toString();return P.length>1?P:`0${P}`}function hu(v,P){return!isNaN(Bl(v,P))}function Bu(v){return!isNaN(Oh(v))}function Jl(v){return!isNaN(Mh(v))}function Ql(v,P="0",k="0",j){return hu(v,j)&&Bu(P)&&Jl(k)}function pc(v,P){return!(v.readonlyInput||v.disabled||P&&("wheel"===P.source&&!v.mousewheel||"key"===P.source&&!v.arrowkeys))}function Gu(v){const{hourStep:P,minuteStep:k,secondsStep:j,readonlyInput:ee,disabled:Me,mousewheel:zt,arrowkeys:qi,showSpinners:Rn,showMeridian:ss,showSeconds:Ms,meridians:Bo,min:Wa,max:vc}=v;return{hourStep:P,minuteStep:k,secondsStep:j,readonlyInput:ee,disabled:Me,mousewheel:zt,arrowkeys:qi,showSpinners:Rn,showMeridian:ss,showSeconds:Ms,meridians:Bo,min:Wa,max:vc}}let Vu=(()=>{class v{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Rh={value:void 0,config:new Vu,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function _d(v=Rh,P){switch(P.type){case ca.WRITE_VALUE:return Object.assign({},v,{value:P.payload});case ca.CHANGE_HOURS:{if(!pc(v.config,P.payload)||!function Vd(v,P){return!(!v.step||v.step>0&&!P.canIncrementHours||v.step<0&&!P.canDecrementHours)}(P.payload,v.controls))return v;const k=qn(v.value,{hour:P.payload.step});return!v.config.max&&!v.config.min||Yu(v.config,k)?Object.assign({},v,{value:k}):v}case ca.CHANGE_MINUTES:{if(!pc(v.config,P.payload)||!function $d(v,P){return!(!v.step||v.step>0&&!P.canIncrementMinutes||v.step<0&&!P.canDecrementMinutes)}(P.payload,v.controls))return v;const k=qn(v.value,{minute:P.payload.step});return!v.config.max&&!v.config.min||Yu(v.config,k)?Object.assign({},v,{value:k}):v}case ca.CHANGE_SECONDS:{if(!pc(v.config,P.payload)||!function Dh(v,P){return!(!v.step||v.step>0&&!P.canIncrementSeconds||v.step<0&&!P.canDecrementSeconds)}(P.payload,v.controls))return v;const k=qn(v.value,{seconds:P.payload.step});return!v.config.max&&!v.config.min||Yu(v.config,k)?Object.assign({},v,{value:k}):v}case ca.SET_TIME_UNIT:{if(!pc(v.config))return v;const k=kc(v.value,P.payload);return Object.assign({},v,{value:k})}case ca.UPDATE_CONTROLS:{const k=function Nu(v,P){const{min:ee,max:Me,hourStep:zt,minuteStep:qi,secondsStep:Rn,showSeconds:ss}=P,Ms={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!v)return Ms;if(Me){const Bo=qn(v,{hour:zt});if(Ms.canIncrementHours=Me>Bo&&v.getHours()+zt<24,!Ms.canIncrementHours){const Wa=qn(v,{minute:qi});Ms.canIncrementMinutes=ss?Me>Wa:Me>=Wa}if(!Ms.canIncrementMinutes){const Wa=qn(v,{seconds:Rn});Ms.canIncrementSeconds=Me>=Wa}v.getHours()<12&&(Ms.canToggleMeridian=qn(v,{hour:12})<Me)}if(ee){const Bo=qn(v,{hour:-zt});if(Ms.canDecrementHours=ee<Bo,!Ms.canDecrementHours){const Wa=qn(v,{minute:-qi});Ms.canDecrementMinutes=ss?ee<Wa:ee<=Wa}if(!Ms.canDecrementMinutes){const Wa=qn(v,{seconds:-Rn});Ms.canDecrementSeconds=ee<=Wa}v.getHours()>=12&&(Ms.canToggleMeridian=qn(v,{hour:-12})>ee)}return Ms}(v.value,P.payload),j={value:v.value,config:P.payload,controls:k};return v.config.showMeridian!==j.config.showMeridian&&v.value&&(j.value=new Date(v.value)),Object.assign({},v,j)}default:return v}}let fc=(()=>{class v extends Ml{constructor(){const k=new rr.g({type:"[mini-ngrx] dispatcher init"});super(k,_d,new Ca(Rh,k,_d))}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})();const ec={provide:Wn.Y6,useExisting:(0,e.wd)(()=>vd),multi:!0};let vd=(()=>{class v{constructor(k,j,ee,Me){this._cd=j,this._store=ee,this._timepickerActions=Me,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new e._w7,this.meridianChange=new e._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=k,Object.assign(this,this.config),this.timepickerSub=ee.select(zt=>zt.value).subscribe(zt=>{this._renderTime(zt),this.onChange(zt),this._store.dispatch(this._timepickerActions.updateControls(Gu(this)))}),ee.select(zt=>zt.controls).subscribe(zt=>{const qi=Ql(this.hours,this.minutes,this.seconds,this.isPM()),Rn=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||qi;this.isValid.emit(Rn),Object.assign(this,zt),j.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(k){k.preventDefault()}wheelSign(k){return-1*Math.sign(k.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(Gu(this)))}changeHours(k,j=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:k,source:j}))}changeMinutes(k,j=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:k,source:j}))}changeSeconds(k,j=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:k,source:j}))}updateHours(k){this.resetValidation(),this.hours=k.value;const j=hu(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||j))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(k){this.resetValidation(),this.minutes=k.value;const j=Bu(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||j))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(k){this.resetValidation(),this.seconds=k.value;const j=Jl(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||j))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function Ah(v,P,k){const j=kc(new Date,v);return!(!j||P&&j>P||k&&j<k)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function Gc(v,P,k){return 0===v.length||0===P.length||0===k.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const ee=Ql(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||ee))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(k){Fu(k)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(io(k)))):null==k&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(k){this.onChange=k}registerOnTouched(k){this.onTouched=k}setDisabledState(k){this.disabled=k,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(k){if(!k||!Fu(k))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const j=io(k);if(!j)return;let Me=j.getHours();this.showMeridian&&(this.meridian=this.meridians[Me>=12?1:0],this.meridianChange.emit(this.meridian),Me%=12,0===Me&&(Me=12)),this.hours=Ea(Me),this.minutes=Ea(j.getMinutes()),this.seconds=Ea(j.getUTCSeconds())}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Vu),e.GI1(e.kD9),e.GI1(fc),e.GI1(ca))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[e.M5G([ec,fc]),e.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(j,ee){1&j&&(e.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),e.qCj("click",function(){return ee.changeHours(ee.hourStep)}),e.wR5(5,"span",2),e.C$Y()(),e.yuY(6,Yd,2,0,"td",3)(7,Bd,3,2,"td",3)(8,Al,2,0,"td",3)(9,bl,3,2,"td",3)(10,bp,2,0,"td",3)(11,zu,1,0,"td",3),e.C$Y(),e.I0R(12,"tr")(13,"td",4)(14,"input",5),e.qCj("wheel",function(zt){return ee.prevDef(zt),ee.changeHours(ee.hourStep*ee.wheelSign(zt),"wheel")})("keydown.ArrowUp",function(){return ee.changeHours(ee.hourStep,"key")})("keydown.ArrowDown",function(){return ee.changeHours(-ee.hourStep,"key")})("change",function(zt){return ee.updateHours(zt.target)}),e.C$Y()(),e.yuY(15,du,2,0,"td",3)(16,Sc,2,9,"td",6)(17,Gd,2,0,"td",3)(18,Sh,2,9,"td",6)(19,kh,2,0,"td",3)(20,Th,3,4,"td",3),e.C$Y(),e.I0R(21,"tr",0)(22,"td")(23,"a",1),e.qCj("click",function(){return ee.changeHours(-ee.hourStep)}),e.wR5(24,"span",7),e.C$Y()(),e.yuY(25,Jp,2,0,"td",3)(26,Qp,3,2,"td",3)(27,Ih,2,0,"td",3)(28,uu,3,2,"td",3)(29,Nd,2,0,"td",3)(30,zc,1,0,"td",3),e.C$Y()()()),2&j&&(e.yG2(2),e.E7m("hidden",!ee.showSpinners),e.yG2(2),e.eAK("disabled",!ee.canIncrementHours||!ee.isEditable),e.yG2(2),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showMeridian),e.yG2(),e.E7m("ngIf",ee.showMeridian),e.yG2(2),e.eAK("has-error",ee.invalidHours),e.yG2(),e.eAK("is-invalid",ee.invalidHours),e.E7m("placeholder",ee.hoursPlaceholder)("readonly",ee.readonlyInput)("disabled",ee.disabled)("value",ee.hours),e.e48("aria-label",ee.labelHours),e.yG2(),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showMeridian),e.yG2(),e.E7m("ngIf",ee.showMeridian),e.yG2(),e.E7m("hidden",!ee.showSpinners),e.yG2(2),e.eAK("disabled",!ee.canDecrementHours||!ee.isEditable),e.yG2(2),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showMinutes),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showSeconds),e.yG2(),e.E7m("ngIf",ee.showMeridian),e.yG2(),e.E7m("ngIf",ee.showMeridian))},dependencies:[Vs.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return v})(),$u=(()=>{class v{static forRoot(){return{ngModule:v,providers:[ca,fc]}}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({providers:[fc],imports:[Vs.MD]})}return v})();var da=Et(9684),Nc=Et(6928),al=Et(6040),Vc=Et(5657),ja=Et(7995),xl=Et(6552);function Hu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"button",2),e.qCj("click",function(){const Me=e.usT(k).$implicit,zt=e.GaO();return e.CGJ(zt.selectFromRanges(Me))}),e.OEk(1),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO();e.eAK("selected",k.value===j.selectedRange),e.yG2(),e.oRS(" ",k.label," ")}}function Zs(v,P){1&v&&e.wR5(0,"bs-current-date",4)}function ju(v,P){1&v&&e.wR5(0,"bs-timepicker")}const Hd=[[["bs-datepicker-navigation-view"]],"*"],tc=["bs-datepicker-navigation-view","*"],Ep=["bsDatepickerDayDecorator",""];function Uu(v,P){if(1&v){const k=e.KQA();e.SAx(0),e.OEk(1," \u200b "),e.I0R(2,"button",2),e.qCj("click",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.view("month"))}),e.I0R(3,"span"),e.OEk(4),e.C$Y()(),e.k70()}if(2&v){const k=e.GaO();e.yG2(2),e.E7m("disabled",k.isDisabled),e.yG2(2),e.cNF(k.calendar.monthTitle)}}function Lh(v,P){1&v&&e.wR5(0,"th")}function nd(v,P){if(1&v&&(e.I0R(0,"th",5),e.OEk(1),e.C$Y()),2&v){const k=P.index,j=e.GaO();e.yG2(),e.oRS("",j.calendar.weekdays[k]," ")}}function rd(v,P){if(1&v){const k=e.KQA();e.I0R(0,"span",11),e.qCj("click",function(){e.usT(k);const ee=e.GaO(2).$implicit,Me=e.GaO();return e.CGJ(Me.selectWeek(ee))}),e.OEk(1),e.C$Y()}if(2&v){const k=e.GaO(2).index,j=e.GaO();e.yG2(),e.cNF(j.calendar.weekNumbers[k])}}function Sp(v,P){if(1&v){const k=e.KQA();e.I0R(0,"span",12),e.qCj("click",function(){e.usT(k);const ee=e.GaO(2).$implicit,Me=e.GaO();return e.CGJ(Me.selectWeek(ee))})("mouseenter",function(){e.usT(k);const ee=e.GaO(2).$implicit,Me=e.GaO();return e.CGJ(Me.weekHoverHandler(ee,!0))})("mouseleave",function(){e.usT(k);const ee=e.GaO(2).$implicit,Me=e.GaO();return e.CGJ(Me.weekHoverHandler(ee,!1))}),e.OEk(1),e.C$Y()}if(2&v){const k=e.GaO(2).index,j=e.GaO();e.yG2(),e.cNF(j.calendar.weekNumbers[k])}}function yd(v,P){if(1&v&&(e.I0R(0,"td",8),e.yuY(1,rd,2,1,"span",9)(2,Sp,2,1,"span",10),e.C$Y()),2&v){const k=e.GaO(2);e.eAK("active-week",k.isWeekHovered),e.yG2(),e.E7m("ngIf",k.isiOS),e.yG2(),e.E7m("ngIf",!k.isiOS)}}function pu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"span",17),e.qCj("click",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.selectDay(ee))})("mouseenter",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.hoverDay(ee,!0))})("mouseleave",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.hoverDay(ee,!1))}),e.OEk(1),e.C$Y()}if(2&v){const k=e.GaO().$implicit;e._6D("tooltip",k.tooltipText),e.E7m("day",k),e.yG2(),e.oRS("",k.label," 3")}}function Wu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"span",18),e.qCj("click",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.selectDay(ee))})("mouseenter",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.hoverDay(ee,!0))})("mouseleave",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.hoverDay(ee,!1))}),e.OEk(1),e.C$Y()}if(2&v){const k=e.GaO().$implicit;e.E7m("day",k),e.yG2(),e.oRS("",k.label," 2")}}function Tc(v,P){if(1&v){const k=e.KQA();e.I0R(0,"span",19),e.qCj("click",function(){e.usT(k);const ee=e.GaO().$implicit,Me=e.GaO(2);return e.CGJ(Me.selectDay(ee))}),e.OEk(1),e.C$Y()}if(2&v){const k=e.GaO().$implicit;e.E7m("day",k),e.yG2(),e.oRS("",k.label," 1")}}function Ph(v,P){if(1&v&&(e.I0R(0,"td",13),e.yuY(1,pu,2,3,"span",14)(2,Wu,2,2,"span",15)(3,Tc,2,2,"span",16),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngIf",!k.isiOS&&k.isShowTooltip),e.yG2(),e.E7m("ngIf",!k.isiOS&&!k.isShowTooltip),e.yG2(),e.E7m("ngIf",k.isiOS)}}function kp(v,P){if(1&v&&(e.I0R(0,"tr"),e.yuY(1,yd,3,4,"td",6)(2,Ph,4,3,"td",7),e.C$Y()),2&v){const k=P.$implicit,j=e.GaO();e.yG2(),e.E7m("ngIf",j.options&&j.options.showWeekNumbers),e.yG2(),e.E7m("ngForOf",k.days)}}function zh(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td",4),e.qCj("click",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.viewMonth(Me))})("mouseenter",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.hoverMonth(Me,!0))})("mouseleave",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.hoverMonth(Me,!1))}),e.I0R(1,"span"),e.OEk(2),e.C$Y()()}if(2&v){const k=P.$implicit;e.eAK("disabled",k.isDisabled)("is-highlighted",k.isHovered),e.yG2(),e.eAK("selected",k.isSelected),e.yG2(),e.cNF(k.label)}}function Dl(v,P){if(1&v&&(e.I0R(0,"tr"),e.yuY(1,zh,3,7,"td",3),e.C$Y()),2&v){const k=P.$implicit;e.yG2(),e.E7m("ngForOf",k)}}function qu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"td",4),e.qCj("click",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.viewYear(Me))})("mouseenter",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.hoverYear(Me,!0))})("mouseleave",function(){const Me=e.usT(k).$implicit,zt=e.GaO(2);return e.CGJ(zt.hoverYear(Me,!1))}),e.I0R(1,"span"),e.OEk(2),e.C$Y()()}if(2&v){const k=P.$implicit;e.eAK("disabled",k.isDisabled)("is-highlighted",k.isHovered),e.yG2(),e.eAK("selected",k.isSelected),e.yG2(),e.cNF(k.label)}}function Xu(v,P){if(1&v&&(e.I0R(0,"tr"),e.yuY(1,qu,3,7,"td",3),e.C$Y()),2&v){const k=P.$implicit;e.yG2(),e.E7m("ngForOf",k)}}const fu=["startTP"];function Sa(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-days-calendar-view",11),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.dayHoverHandler(ee))})("onHoverWeek",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.weekHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.daySelectHandler(ee))}),e.wVc(1,"async"),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)("isDisabled",j.isDatePickerDisabled)("options",e.kDX(1,5,j.options$))}}function Fh(v,P){if(1&v&&e.wR5(0,"timepicker",13,16),2&v){const k=e.GaO(4);e.E7m("disabled",k.isDatePickerDisabled)}}function Yh(v,P){if(1&v&&(e.I0R(0,"div",12),e.wR5(1,"timepicker",13,14),e.yuY(3,Fh,2,1,"timepicker",15),e.C$Y()),2&v){const k=e.GaO(3);e.yG2(),e.E7m("disabled",k.isDatePickerDisabled),e.yG2(2),e.E7m("ngIf",k.isRangePicker)}}function mc(v,P){if(1&v&&(e.SAx(0),e.I0R(1,"div",8),e.yuY(2,Sa,2,7,"bs-days-calendar-view",9),e.wVc(3,"async"),e.C$Y(),e.yuY(4,Yh,4,2,"div",10),e.k70()),2&v){const k=e.GaO(2);e.yG2(2),e.E7m("ngForOf",e.kDX(3,2,k.daysCalendar$)),e.yG2(2),e.E7m("ngIf",k.withTimepicker)}}function Tp(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-month-calendar-view",18),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.monthHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.monthSelectHandler(ee))}),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)}}function sd(v,P){if(1&v&&(e.I0R(0,"div",8),e.yuY(1,Tp,1,3,"bs-month-calendar-view",17),e.wVc(2,"async"),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngForOf",e.kDX(2,1,k.monthsCalendar))}}function jd(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-years-calendar-view",18),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.yearHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.yearSelectHandler(ee))}),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)}}function Gl(v,P){if(1&v&&(e.I0R(0,"div",8),e.yuY(1,jd,1,3,"bs-years-calendar-view",17),e.wVc(2,"async"),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngForOf",e.kDX(2,1,k.yearsCalendar))}}function Nl(v,P){1&v&&(e.I0R(0,"div",19)(1,"button",20),e.OEk(2,"Apply"),e.C$Y(),e.I0R(3,"button",21),e.OEk(4,"Cancel"),e.C$Y()())}function Zu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",24)(1,"button",25),e.qCj("click",function(){e.usT(k);const ee=e.GaO(3);return e.CGJ(ee.setToday())}),e.OEk(2),e.C$Y()()}if(2&v){const k=e.GaO(3);e.eAK("today-left","left"===k.todayPos)("today-right","right"===k.todayPos)("today-center","center"===k.todayPos),e.yG2(2),e.cNF(k.todayBtnLbl)}}function Ud(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",26)(1,"button",25),e.qCj("click",function(){e.usT(k);const ee=e.GaO(3);return e.CGJ(ee.clearDate())}),e.OEk(2),e.C$Y()()}if(2&v){const k=e.GaO(3);e.eAK("clear-left","left"===k.clearPos)("clear-right","right"===k.clearPos)("clear-center","center"===k.clearPos),e.yG2(2),e.cNF(k.clearBtnLbl)}}function mu(v,P){if(1&v&&(e.I0R(0,"div",19),e.yuY(1,Zu,3,7,"div",22)(2,Ud,3,7,"div",23),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngIf",k.showTodayBtn),e.yG2(),e.E7m("ngIf",k.showClearBtn)}}function Ip(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",27)(1,"bs-custom-date-view",28),e.qCj("onSelect",function(ee){e.usT(k);const Me=e.GaO(2);return e.CGJ(Me.setRangeOnCalendar(ee))}),e.C$Y()()}if(2&v){const k=e.GaO(2);e.yG2(),e.E7m("selectedRange",k.chosenRange)("ranges",k.customRanges)("customRangeLabel",k.customRangeBtnLbl)}}function gu(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",1)(1,"div",2),e.qCj("@datepickerAnimation.done",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.positionServiceEnable())}),e.I0R(2,"div",3),e.wVc(3,"async"),e.yuY(4,mc,5,4,"ng-container",4)(5,sd,3,3,"div",5)(6,Gl,3,3,"div",5),e.C$Y(),e.yuY(7,Nl,5,0,"div",6)(8,mu,3,2,"div",6),e.C$Y(),e.yuY(9,Ip,2,3,"div",7),e.C$Y()}if(2&v){const k=e.GaO();e.E7m("ngClass",k.containerClass),e.yG2(),e.E7m("@datepickerAnimation",k.animationState),e.yG2(),e.E7m("ngSwitch",e.kDX(3,9,k.viewMode)),e.yG2(2),e.E7m("ngSwitchCase","day"),e.yG2(),e.E7m("ngSwitchCase","month"),e.yG2(),e.E7m("ngSwitchCase","year"),e.yG2(),e.E7m("ngIf",!1),e.yG2(),e.E7m("ngIf",k.showTodayBtn||k.showClearBtn),e.yG2(),e.E7m("ngIf",k.customRanges&&k.customRanges.length>0)}}const yu=["endTP"];function wd(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-days-calendar-view",11),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.dayHoverHandler(ee))})("onHoverWeek",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.weekHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.daySelectHandler(ee))}),e.wVc(1,"async"),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)("isDisabled",j.isDatePickerDisabled)("options",e.kDX(1,5,j.options$))}}function Gh(v,P){if(1&v&&e.wR5(0,"timepicker",13,16),2&v){const k=e.GaO(4);e.E7m("disabled",k.isDatePickerDisabled)}}function Qu(v,P){if(1&v&&(e.I0R(0,"div",12),e.wR5(1,"timepicker",13,14),e.yuY(3,Gh,2,1,"timepicker",15),e.C$Y()),2&v){const k=e.GaO(3);e.yG2(),e.E7m("disabled",k.isDatePickerDisabled),e.yG2(2),e.E7m("ngIf",k.isRangePicker)}}function Nh(v,P){if(1&v&&(e.SAx(0),e.I0R(1,"div",8),e.yuY(2,wd,2,7,"bs-days-calendar-view",9),e.wVc(3,"async"),e.C$Y(),e.yuY(4,Qu,4,2,"div",10),e.k70()),2&v){const k=e.GaO(2);e.yG2(2),e.E7m("ngForOf",e.kDX(3,2,k.daysCalendar$)),e.yG2(2),e.E7m("ngIf",k.withTimepicker)}}function eh(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-month-calendar-view",18),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.monthHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.monthSelectHandler(ee))}),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)}}function bu(v,P){if(1&v&&(e.I0R(0,"div",8),e.yuY(1,eh,1,3,"bs-month-calendar-view",17),e.wVc(2,"async"),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngForOf",e.kDX(2,1,k.monthsCalendar))}}function qd(v,P){if(1&v){const k=e.KQA();e.I0R(0,"bs-years-calendar-view",18),e.qCj("onNavigate",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.navigateTo(ee))})("onViewMode",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.setViewMode(ee))})("onHover",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.yearHoverHandler(ee))})("onSelect",function(ee){e.usT(k);const Me=e.GaO(3);return e.CGJ(Me.yearSelectHandler(ee))}),e.C$Y()}if(2&v){const k=P.$implicit,j=e.GaO(3);e.eAK("bs-datepicker-multiple",j.multipleCalendars),e.E7m("calendar",k)}}function Xd(v,P){if(1&v&&(e.I0R(0,"div",8),e.yuY(1,qd,1,3,"bs-years-calendar-view",17),e.wVc(2,"async"),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngForOf",e.kDX(2,1,k.yearsCalendar))}}function no(v,P){1&v&&(e.I0R(0,"div",19)(1,"button",20),e.OEk(2,"Apply"),e.C$Y(),e.I0R(3,"button",21),e.OEk(4,"Cancel"),e.C$Y()())}function ps(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",24)(1,"button",25),e.qCj("click",function(){e.usT(k);const ee=e.GaO(3);return e.CGJ(ee.setToday())}),e.OEk(2),e.C$Y()()}if(2&v){const k=e.GaO(3);e.eAK("today-left","left"===k.todayPos)("today-right","right"===k.todayPos)("today-center","center"===k.todayPos),e.yG2(2),e.cNF(k.todayBtnLbl)}}function th(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",26)(1,"button",25),e.qCj("click",function(){e.usT(k);const ee=e.GaO(3);return e.CGJ(ee.clearDate())}),e.OEk(2),e.C$Y()()}if(2&v){const k=e.GaO(3);e.eAK("clear-left","left"===k.clearPos)("clear-right","right"===k.clearPos)("clear-center","center"===k.clearPos),e.yG2(2),e.cNF(k.clearBtnLbl)}}function ic(v,P){if(1&v&&(e.I0R(0,"div",19),e.yuY(1,ps,3,7,"div",22)(2,th,3,7,"div",23),e.C$Y()),2&v){const k=e.GaO(2);e.yG2(),e.E7m("ngIf",k.showTodayBtn),e.yG2(),e.E7m("ngIf",k.showClearBtn)}}function _c(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",27)(1,"bs-custom-date-view",28),e.qCj("onSelect",function(ee){e.usT(k);const Me=e.GaO(2);return e.CGJ(Me.setRangeOnCalendar(ee))}),e.C$Y()()}if(2&v){const k=e.GaO(2);e.yG2(),e.E7m("selectedRange",k.chosenRange)("ranges",k.customRanges)("customRangeLabel",k.customRangeBtnLbl)}}function Io(v,P){if(1&v){const k=e.KQA();e.I0R(0,"div",1)(1,"div",2),e.qCj("@datepickerAnimation.done",function(){e.usT(k);const ee=e.GaO();return e.CGJ(ee.positionServiceEnable())}),e.I0R(2,"div",3),e.wVc(3,"async"),e.yuY(4,Nh,5,4,"ng-container",4)(5,bu,3,3,"div",5)(6,Xd,3,3,"div",5),e.C$Y(),e.yuY(7,no,5,0,"div",6)(8,ic,3,2,"div",6),e.C$Y(),e.yuY(9,_c,2,3,"div",7),e.C$Y()}if(2&v){const k=e.GaO();e.E7m("ngClass",k.containerClass),e.yG2(),e.E7m("@datepickerAnimation",k.animationState),e.yG2(),e.E7m("ngSwitch",e.kDX(3,9,k.viewMode)),e.yG2(2),e.E7m("ngSwitchCase","day"),e.yG2(),e.E7m("ngSwitchCase","month"),e.yG2(),e.E7m("ngSwitchCase","year"),e.yG2(),e.E7m("ngIf",!1),e.yG2(),e.E7m("ngIf",k.showTodayBtn||k.showClearBtn),e.yG2(),e.E7m("ngIf",k.customRanges&&k.customRanges.length>0)}}let Ua=(()=>{class v{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Kd="220ms cubic-bezier(0, 0, 0.2, 1)",Ed=(0,da.gV)("datepickerAnimation",[(0,da.K2)("animated-down",(0,da.wb)({height:"*",overflow:"hidden"})),(0,da.aK)("* => animated-down",[(0,da.wb)({height:0,overflow:"hidden"}),(0,da.Cs)(Kd)]),(0,da.K2)("animated-up",(0,da.wb)({height:"*",overflow:"hidden"})),(0,da.aK)("* => animated-up",[(0,da.wb)({height:"*",overflow:"hidden"}),(0,da.Cs)(Kd)]),(0,da.aK)("* => unanimated",(0,da.Cs)("0s"))]);class Sd{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Nc.wH,this.selectedTimeSub=new Nc.wH}set minDate(P){this._effects?.setMinDate(P)}set maxDate(P){this._effects?.setMaxDate(P)}set daysDisabled(P){this._effects?.setDaysDisabled(P)}set datesDisabled(P){this._effects?.setDatesDisabled(P)}set datesEnabled(P){this._effects?.setDatesEnabled(P)}set isDisabled(P){this._effects?.setDisabled(P)}set dateCustomClasses(P){this._effects?.setDateCustomClasses(P)}set dateTooltipTexts(P){this._effects?.setDateTooltipTexts(P)}set daysCalendar$(P){this._daysCalendar$=P,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(k=>{this.multipleCalendars=!!k&&k.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(P){}navigateTo(P){}dayHoverHandler(P){}weekHoverHandler(P){}monthHoverHandler(P){}yearHoverHandler(P){}timeSelectHandler(P,k){}daySelectHandler(P){}monthSelectHandler(P){}yearSelectHandler(P){}setRangeOnCalendar(P){}setToday(){}clearDate(){}_stopPropagation(P){P.stopPropagation()}}let Yo=(()=>{class v{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#s=this.NAVIGATE_TO="[datepicker] change view date";static#o=this.SET_OPTIONS="[datepicker] update render options";static#a=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#d=this.SET_MAX_DATE="[datepicker] set max date";static#u=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#h=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#p=this.SET_DATESENABLED="[datepicker] set dates enabled";static#f=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#_=this.SET_LOCALE="[datepicker] set datepicker locale";static#v=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:v.CALCULATE}}format(){return{type:v.FORMAT}}flag(){return{type:v.FLAG}}select(k){return{type:v.SELECT,payload:k}}selectTime(k,j){return{type:v.SELECT_TIME,payload:{date:k,index:j}}}changeViewMode(k){return{type:v.CHANGE_VIEWMODE,payload:k}}navigateTo(k){return{type:v.NAVIGATE_TO,payload:k}}navigateStep(k){return{type:v.NAVIGATE_OFFSET,payload:k}}setOptions(k){return{type:v.SET_OPTIONS,payload:k}}selectRange(k){return{type:v.SELECT_RANGE,payload:k}}hoverDay(k){return{type:v.HOVER,payload:k.isHovered?k.cell.date:null}}minDate(k){return{type:v.SET_MIN_DATE,payload:k}}maxDate(k){return{type:v.SET_MAX_DATE,payload:k}}daysDisabled(k){return{type:v.SET_DAYSDISABLED,payload:k}}datesDisabled(k){return{type:v.SET_DATESDISABLED,payload:k}}datesEnabled(k){return{type:v.SET_DATESENABLED,payload:k}}isDisabled(k){return{type:v.SET_IS_DISABLED,payload:k}}setDateCustomClasses(k){return{type:v.SET_DATE_CUSTOM_CLASSES,payload:k}}setDateTooltipTexts(k){return{type:v.SET_DATE_TOOLTIP_TEXTS,payload:k}}setLocale(k){return{type:v.SET_LOCALE,payload:k}}static#b=this.\u0275fac=function(j){return new(j||v)};static#x=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})(),nh=(()=>{class v{constructor(){this._defaultLocale="en",this._locale=new rr.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(k){k!==this.currentLocale&&this._locale.next(k)}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})(),kd=(()=>{class v{constructor(k,j){this._actions=k,this._localeService=j,this._subs=[]}init(k){return this._store=k,this}setValue(k){this._store?.dispatch(this._actions.select(k))}setRangeValue(k){this._store?.dispatch(this._actions.selectRange(k))}setMinDate(k){return this._store?.dispatch(this._actions.minDate(k)),this}setMaxDate(k){return this._store?.dispatch(this._actions.maxDate(k)),this}setDaysDisabled(k){return this._store?.dispatch(this._actions.daysDisabled(k)),this}setDatesDisabled(k){return this._store?.dispatch(this._actions.datesDisabled(k)),this}setDatesEnabled(k){return this._store?.dispatch(this._actions.datesEnabled(k)),this}setDisabled(k){return this._store?.dispatch(this._actions.isDisabled(k)),this}setDateCustomClasses(k){return this._store?.dispatch(this._actions.setDateCustomClasses(k)),this}setDateTooltipTexts(k){return this._store?.dispatch(this._actions.setDateTooltipTexts(k)),this}setOptions(k){const j=Object.assign({locale:this._localeService.currentLocale},k);return this._store?.dispatch(this._actions.setOptions(j)),this}setBindings(k){return this._store?(k.selectedTime=this._store.select(j=>j.selectedTime).pipe((0,Mi.I)(j=>!!j)),k.daysCalendar$=this._store.select(j=>j.flaggedMonths).pipe((0,Mi.I)(j=>!!j)),k.monthsCalendar=this._store.select(j=>j.flaggedMonthsCalendar).pipe((0,Mi.I)(j=>!!j)),k.yearsCalendar=this._store.select(j=>j.yearsCalendarFlagged).pipe((0,Mi.I)(j=>!!j)),k.viewMode=this._store.select(j=>j.view?.mode),k.options$=(0,al.E)([this._store.select(j=>j.showWeekNumbers),this._store.select(j=>j.displayMonths)]).pipe((0,He.k)(j=>({showWeekNumbers:j[0],displayMonths:j[1]}))),this):this}setEventHandlers(k){return k.setViewMode=j=>{this._store?.dispatch(this._actions.changeViewMode(j))},k.navigateTo=j=>{this._store?.dispatch(this._actions.navigateStep(j.step))},k.dayHoverHandler=j=>{const ee=j.cell;ee.isOtherMonth||ee.isDisabled||(this._store?.dispatch(this._actions.hoverDay(j)),ee.isHovered=j.isHovered)},k.monthHoverHandler=j=>{j.cell.isHovered=j.isHovered},k.yearHoverHandler=j=>{j.cell.isHovered=j.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(k=>k.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(k=>k.monthsModel).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(k=>k.formattedMonths).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.selectedDate).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.selectedRange).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.yearsCalendarModel).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.hoveredDate).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.dateCustomClasses).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(k=>k.dateTooltipTexts).pipe((0,Mi.I)(k=>!!k)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(k=>this._store?.dispatch(this._actions.setLocale(k)))),this):this}destroy(){for(const k of this._subs)k.unsubscribe()}static#e=this.\u0275fac=function(j){return new(j||v)(e.CoB(Yo),e.CoB(nh))};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})();const Su={date:new Date,mode:"day"},sh=Object.assign(new Ua,{locale:"en",view:Su,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function ku(v,P,k){const j=P&&uo(X(v,"month"),P,"day"),ee=k&&rs(W(v,"month"),k,"day");return j||ee||!1}function Jd(v,P,k){const j=P&&uo(X(v,"year"),P,"day"),ee=k&&rs(W(v,"year"),k,"day");return j||ee||!1}function Hc(v,P,k){return!!(P&&tt(P)&&P.length)&&(k&&"year"===k&&!P[0].getDate()?P.some(j=>qs(v,j,"year")):P.some(j=>qs(v,j,"date")))}function Td(v,P,k){return!!(P&&tt(P)&&P.length)&&!P.some(j=>qs(v,j,k||"date"))}function oh(v,P=0){const k=v&&v.yearsCalendarModel&&v.yearsCalendarModel[P];return k?.years[0]&&k.years[0][0]&&k.years[0][0].date}function Hh(v,P){return!v||!P||!v.length&&!v[0].value||v.forEach(k=>(!k||!k.value||k.value instanceof Date||!(k.value instanceof Array&&k.value.length)||(k.value=Uh(k.value,P)),v)),v}function jh(v,P){return!v||!P||v instanceof Array&&!v.length||v instanceof Date?v:Uh(v,P)}function Uh(v,P){return v instanceof Array?v.map(j=>j&&(rs(j,P,"date")&&(j=P),j)):v}function ah(v){return v&&lh(v)}function Wh(v){return v?.length&&v.map(P=>P&&lh(P)),v}function lh(v){const P=new Date;return v.setMilliseconds(P.getMilliseconds()),v.setSeconds(P.getSeconds()),v.setMinutes(P.getMinutes()),v.setHours(P.getHours()),v}function ch(v,P){let k=v.initialDate;const j=new Array(v.height);for(let ee=0;ee<v.height;ee++){j[ee]=new Array(v.width);for(let Me=0;Me<v.width;Me++)j[ee][Me]=P(k),k=Yt(k,v.shift)}return j}function dh(v,P){const k=function Ci(v){return Yn(v.getFullYear(),v.getMonth(),1,v.getHours(),v.getMinutes(),v.getSeconds())}(v),j=function $h(v,P){if(function cn(v,P){return v.getDay()===Number(P)}(v,P.firstDayOfWeek))return v;const j=function ad(v,P){const k=Number(P);if(isNaN(k))return 0;if(0===k)return v;const j=v-k%7;return j<0?j+7:j}($i(v),P.firstDayOfWeek);return Yt(v,{day:-j})}(k,P);return{daysMatrix:ch({width:P.width||0,height:P.height||0,initialDate:j,shift:{day:1}},zt=>zt),month:k}}function Xh(v,P,k){return v.map(j=>j[0]?Ls(j[0],P,k):"")}function Zh(v){const P=ns(v),k=P.weekdaysShort(),j=P.firstDayOfWeek();return[...k.slice(j),...k.slice(0,j)]}function ll(v,P){return!P||v>=P}const Ap=4,hh=3,Dp={month:1};function Kh(v,P){const k=W(v,"year");return{months:ch({width:hh,height:Ap,initialDate:k,shift:Dp},Me=>({date:Me,label:Ls(Me,P.monthLabel,P.locale)})),monthTitle:"",yearTitle:Ls(v,P.yearTitle,P.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const Qd=4,Id=4,Od=Qd*Id,ld=-1*(Math.floor(Od/2)-1),eu={year:1};function Jh(v,P,k){const j=function Lp(v,P){return P&&v.getFullYear()>=P.getFullYear()&&v.getFullYear()<P.getFullYear()+Od?P:Yt(v,{year:ld})}(v,k),Me=ch({width:Id,height:Qd,initialDate:j,shift:eu},qi=>({date:qi,label:Ls(qi,P.yearLabel,P.locale)})),zt=function Pp(v,P){return`${Ls(v[0][0].date,P.yearTitle,P.locale)} - ${Ls(v[Qd-1][Id-1].date,P.yearTitle,P.locale)}`}(Me,P);return{years:Me,monthTitle:"",yearTitle:zt,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function ph(v,P){!v||!isNaN(v.getTime())||(v.setHours(P.getHours()),v.setMinutes(P.getMinutes()),v.setSeconds(P.getSeconds()),v.setMilliseconds(P.getMilliseconds()))}function Qh(v=sh,P){switch(P.type){case Yo.CALCULATE:return function Fp(v){if(!v.view)return v;let P;P=v.displayOneMonthRange&&mh(v.view.date,v.minDate,v.maxDate)?1:v.displayMonths||1;let k=v.view.date;if("day"===v.view.mode&&v.monthViewOptions){v.showPreviousMonth&&v.selectedRange&&0===v.selectedRange.length&&(k=Yt(k,{month:-1})),v.monthViewOptions.firstDayOfWeek=ns(v.locale).firstDayOfWeek();let j=new Array(P);for(let ee=0;ee<P;ee++)j[ee]=dh(k,v.monthViewOptions),k=Yt(k,{month:1});if(v.preventChangeToNextMonth&&v.flaggedMonths&&v.hoveredDate){const ee=dh(v.view.date,v.monthViewOptions);v.flaggedMonths.length&&v.flaggedMonths[1].month.getMonth()===ee.month.getMonth()&&(j=v.flaggedMonths.map(Me=>v.monthViewOptions?dh(Me.month,v.monthViewOptions):null).filter(Me=>null!==Me))}return Object.assign({},v,{monthsModel:j})}if("month"===v.view.mode){const j=new Array(P);for(let ee=0;ee<P;ee++)j[ee]=Kh(k,zs(v)),k=Yt(k,{year:1});return Object.assign({},v,{monthsCalendar:j})}if("year"===v.view.mode){const j=new Array(P);for(let ee=0;ee<P;ee++)j[ee]=Jh(k,zs(v),"year"===v.minMode?oh(v,ee):void 0),k=Yt(k,{year:Od});return Object.assign({},v,{yearsCalendarModel:j})}return v}(v);case Yo.FORMAT:return function fh(v){if(!v.view)return v;if("day"===v.view.mode&&v.monthsModel){const j=v.monthsModel.map((ee,Me)=>function qh(v,P,k){return{month:v.month,monthTitle:Ls(v.month,P.monthTitle,P.locale),yearTitle:Ls(v.month,P.yearTitle,P.locale),weekNumbers:Xh(v.daysMatrix,P.weekNumbers,P.locale),weekdays:Zh(P.locale),weeks:v.daysMatrix.map((j,ee)=>({days:j.map((Me,zt)=>({date:Me,label:Ls(Me,P.dayLabel,P.locale),monthIndex:k,weekIndex:ee,dayIndex:zt}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(ee,zs(v),Me));return Object.assign({},v,{formattedMonths:j})}const P=v.displayMonths||1;let k=v.view.date;if("month"===v.view.mode){const j=new Array(P);for(let ee=0;ee<P;ee++)j[ee]=Kh(k,zs(v)),k=Yt(k,{year:1});return Object.assign({},v,{monthsCalendar:j})}if("year"===v.view.mode){const j=new Array(P);for(let ee=0;ee<P;ee++)j[ee]=Jh(k,zs(v)),k=Yt(k,{year:16});return Object.assign({},v,{yearsCalendarModel:j})}return v}(v);case Yo.FLAG:return function Yp(v){if(!v.view)return v;const P=mh(v.view.date,v.minDate,v.maxDate)?1:v.displayMonths;if(v.formattedMonths&&"day"===v.view.mode){const k=v.formattedMonths.map((j,ee)=>function uh(v,P){return v.weeks.forEach(k=>{k.days.forEach((j,ee)=>{const Me=!br(j.date,v.month),zt=!Me&&Jn(j.date,P.hoveredDate),qi=!Me&&P.selectedRange&&Jn(j.date,P.selectedRange[0]),Rn=!Me&&P.selectedRange&&Jn(j.date,P.selectedRange[1]),ss=!Me&&Jn(j.date,P.selectedDate)||qi||Rn,Ms=!Me&&P.selectedRange&&function Oc(v,P,k){return!!(v&&P&&P[0])&&(P[1]?v>P[0]&&v<=P[1]:!!k&&v>P[0]&&v<=k)}(j.date,P.selectedRange,P.hoveredDate),Bo=P.isDisabled||uo(j.date,P.minDate,"day")||rs(j.date,P.maxDate,"day")||function Ga(v,P){return!(typeof P>"u"||!P||!P.length)&&P.some(k=>k===v.getDay())}(j.date,P.daysDisabled)||Hc(j.date,P.datesDisabled)||Td(j.date,P.datesEnabled),vc=!Me&&Jn(j.date,new Date),yh=P.dateCustomClasses&&P.dateCustomClasses.map(sc=>Jn(j.date,sc.date)?sc.classes:[]).reduce((sc,Ou)=>sc.concat(Ou),[]).join(" ")||"",iu=P.dateTooltipTexts&&P.dateTooltipTexts.map(sc=>Jn(j.date,sc.date)?sc.tooltipText:"").reduce((sc,Ou)=>(sc.push(Ou),sc),[]).join(" ")||"",Ul=Object.assign({},j,{isOtherMonth:Me,isHovered:zt,isSelected:ss,isSelectionStart:qi,isSelectionEnd:Rn,isInRange:Ms,isDisabled:Bo,isToday:vc,customClasses:yh,tooltipText:iu});(j.isOtherMonth!==Ul.isOtherMonth||j.isHovered!==Ul.isHovered||j.isSelected!==Ul.isSelected||j.isSelectionStart!==Ul.isSelectionStart||j.isSelectionEnd!==Ul.isSelectionEnd||j.isDisabled!==Ul.isDisabled||j.isInRange!==Ul.isInRange||j.customClasses!==Ul.customClasses||j.tooltipText!==Ul.tooltipText)&&(k.days[ee]=Ul)})}),v.hideLeftArrow=P.isDisabled||!!P.monthIndex&&P.monthIndex>0&&P.monthIndex!==P.displayMonths,v.hideRightArrow=P.isDisabled||(!!P.monthIndex||0===P.monthIndex)&&!!P.displayMonths&&P.monthIndex<P.displayMonths&&P.monthIndex+1!==P.displayMonths,v.disableLeftArrow=ku(Yt(v.month,{month:-1}),P.minDate,P.maxDate),v.disableRightArrow=ku(Yt(v.month,{month:1}),P.minDate,P.maxDate),v}(j,{isDisabled:v.isDisabled,minDate:v.minDate,maxDate:v.maxDate,daysDisabled:v.daysDisabled,datesDisabled:v.datesDisabled,datesEnabled:v.datesEnabled,hoveredDate:v.hoveredDate,selectedDate:v.selectedDate,selectedRange:v.selectedRange,displayMonths:P,dateCustomClasses:v.dateCustomClasses,dateTooltipTexts:v.dateTooltipTexts,monthIndex:ee}));return Object.assign({},v,{flaggedMonths:k})}if("month"===v.view.mode&&v.monthsCalendar){const k=v.monthsCalendar.map((j,ee)=>function Rp(v,P){return v.months.forEach((k,j)=>{k.forEach((ee,Me)=>{let zt;const qi=br(ee.date,P.hoveredMonth),Rn=P.isDisabled||Hc(ee.date,P.datesDisabled)||Td(ee.date,P.datesEnabled,"month")||ku(ee.date,P.minDate,P.maxDate);!P.selectedDate&&P.selectedRange?(zt=br(ee.date,P.selectedRange[0]),zt||(zt=br(ee.date,P.selectedRange[1]))):zt=br(ee.date,P.selectedDate);const ss=Object.assign(ee,{isHovered:qi,isDisabled:Rn,isSelected:zt});(ee.isHovered!==ss.isHovered||ee.isDisabled!==ss.isDisabled||ee.isSelected!==ss.isSelected)&&(v.months[j][Me]=ss)})}),v.hideLeftArrow=!!P.monthIndex&&P.monthIndex>0&&P.monthIndex!==P.displayMonths,v.hideRightArrow=(!!P.monthIndex||0===P.monthIndex)&&(!!P.displayMonths||0===P.displayMonths)&&P.monthIndex<P.displayMonths&&P.monthIndex+1!==P.displayMonths,v.disableLeftArrow=Jd(Yt(v.months[0][0].date,{year:-1}),P.minDate,P.maxDate),v.disableRightArrow=Jd(Yt(v.months[0][0].date,{year:1}),P.minDate,P.maxDate),v}(j,{isDisabled:v.isDisabled,minDate:v.minDate,maxDate:v.maxDate,hoveredMonth:v.hoveredMonth,selectedDate:v.selectedDate,datesDisabled:v.datesDisabled,datesEnabled:v.datesEnabled,selectedRange:v.selectedRange,displayMonths:P,monthIndex:ee}));return Object.assign({},v,{flaggedMonthsCalendar:k})}if("year"===v.view.mode&&v.yearsCalendarModel){const k=v.yearsCalendarModel.map((j,ee)=>function zp(v,P){v.years.forEach((ee,Me)=>{ee.forEach((zt,qi)=>{let Rn;const ss=wi(zt.date,P.hoveredYear),Ms=P.isDisabled||Hc(zt.date,P.datesDisabled,"year")||Td(zt.date,P.datesEnabled,"year")||Jd(zt.date,P.minDate,P.maxDate);!P.selectedDate&&P.selectedRange?(Rn=wi(zt.date,P.selectedRange[0]),Rn||(Rn=wi(zt.date,P.selectedRange[1]))):Rn=wi(zt.date,P.selectedDate);const Bo=Object.assign(zt,{isHovered:ss,isDisabled:Ms,isSelected:Rn});(zt.isHovered!==Bo.isHovered||zt.isDisabled!==Bo.isDisabled||zt.isSelected!==Bo.isSelected)&&(v.years[Me][qi]=Bo)})}),v.hideLeftArrow=!!P.yearIndex&&P.yearIndex>0&&P.yearIndex!==P.displayMonths,v.hideRightArrow=!!P.yearIndex&&!!P.displayMonths&&P.yearIndex<P.displayMonths&&P.yearIndex+1!==P.displayMonths,v.disableLeftArrow=Jd(Yt(v.years[0][0].date,{year:-1}),P.minDate,P.maxDate);const k=v.years.length-1;return v.disableRightArrow=Jd(Yt(v.years[k][v.years[k].length-1].date,{year:1}),P.minDate,P.maxDate),v}(j,{isDisabled:v.isDisabled,minDate:v.minDate,maxDate:v.maxDate,hoveredYear:v.hoveredYear,selectedDate:v.selectedDate,datesDisabled:v.datesDisabled,datesEnabled:v.datesEnabled,selectedRange:v.selectedRange,displayMonths:P,yearIndex:ee}));return Object.assign({},v,{yearsCalendarFlagged:k})}return v}(v);case Yo.NAVIGATE_OFFSET:return function Md(v,P){if(!v.view)return v;const k=function ep(v,P){if(v.view){if("year"===v.view.mode&&"year"===v.minMode){const k=oh(v,0);if(k){const j=Yt(k,{year:-ld});return Yt(j,P.payload)}}return Yt(W(v.view.date,"month"),P.payload)}}(v,P);if(!k)return v;return Object.assign({},v,{view:{mode:v.view.mode,date:k}})}(v,P);case Yo.NAVIGATE_TO:{const k=P.payload;if(!v.view||!k.unit)return v;const j=function Xe(v,P){return Yn(Ut(v.getFullYear(),P.year),Ut(v.getMonth(),P.month),1,Ut(v.getHours(),P.hour),Ut(v.getMinutes(),P.minute),Ut(v.getSeconds(),P.seconds),Ut(v.getMilliseconds(),P.milliseconds))}(v.view.date,k.unit);let ee,Me;return ll(k.viewMode,v.minMode)?(Me=k.viewMode,ee={view:{date:j,mode:Me}}):(Me=v.view.mode,ee={selectedDate:j,view:{date:j,mode:Me}}),Object.assign({},v,ee)}case Yo.CHANGE_VIEWMODE:return ll(P.payload,v.minMode)&&v.view?Object.assign({},v,{view:{date:v.view.date,mode:P.payload}}):v;case Yo.HOVER:return Object.assign({},v,{hoveredDate:P.payload});case Yo.SELECT:{if(!v.view)return v;const k={selectedDate:P.payload,view:v.view};if(Array.isArray(v.selectedTime)){const zt=v.selectedTime[0];k.selectedDate&&zt&&ph(k.selectedDate,zt)}const j=v.view.mode,Me=cd(P.payload||v.view.date,v.minDate,v.maxDate);return k.view={mode:j,date:Me},Object.assign({},v,k)}case Yo.SELECT_TIME:{const{date:k,index:j}=P.payload,ee=v.selectedTime?[...v.selectedTime]:[];return ee[j]=k,Object.assign({},v,{selectedTime:ee})}case Yo.SET_OPTIONS:{if(!v.view)return v;const k=P.payload,j=k.minMode?k.minMode:v.view.mode,Me=cd(We(k.value)&&k.value||tt(k.value)&&We(k.value[0])&&k.value[0]||v.view.date,k.minDate,k.maxDate);return k.view={mode:j,date:Me},k.value&&(tt(k.value)&&(k.selectedRange=k.value,k.selectedTime=k.value.map(zt=>zt)),k.value instanceof Date&&(k.selectedDate=k.value,k.selectedTime=[k.value])),Object.assign({},v,k)}case Yo.SELECT_RANGE:{if(!v.view)return v;const k={selectedRange:P.payload,view:v.view};k.selectedRange?.forEach((zt,qi)=>{if(Array.isArray(v.selectedTime)){const Rn=v.selectedTime[qi];Rn&&ph(zt,Rn)}});const j=v.view.mode,Me=cd(P.payload&&P.payload[0]||v.view.date,v.minDate,v.maxDate);return k.view={mode:j,date:Me},Object.assign({},v,k)}case Yo.SET_MIN_DATE:return Object.assign({},v,{minDate:P.payload});case Yo.SET_MAX_DATE:return Object.assign({},v,{maxDate:P.payload});case Yo.SET_IS_DISABLED:return Object.assign({},v,{isDisabled:P.payload});case Yo.SET_DATE_CUSTOM_CLASSES:return Object.assign({},v,{dateCustomClasses:P.payload});case Yo.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},v,{dateTooltipTexts:P.payload});default:return v}}function zs(v){return{locale:v.locale,monthTitle:v.monthTitle,yearTitle:v.yearTitle,dayLabel:v.dayLabel,monthLabel:v.monthLabel,yearLabel:v.yearLabel,weekNumbers:v.weekNumbers}}function cd(v,P,k){const j=Array.isArray(v)?v[0]:v;return P&&rs(P,j,"day")?P:k&&uo(k,j,"day")?k:j}function mh(v,P,k){return!(!k||!qs(k,v,"day"))||P&&k&&P.getMonth()===k.getMonth()}let Mc=(()=>{class v extends Ml{constructor(){const k=new rr.g({type:"[datepicker] dispatcher init"});super(k,Qh,new Ca(sh,k,Qh))}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"platform"})}return v})(),Ad=(()=>{class v{constructor(){this.onSelect=new e._w7}selectFromRanges(k){this.onSelect.emit(k)}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(j,ee){1&j&&(e.I0R(0,"div",0),e.yuY(1,Hu,2,3,"button",1),e.C$Y()),2&j&&(e.yG2(),e.E7m("ngForOf",ee.ranges))},dependencies:[Vs.ay],encapsulation:2,changeDetection:0})}return v})();var nc=function(v){return v[v.UP=0]="UP",v[v.DOWN=1]="DOWN",v}(nc||{});let Hl,tp=(()=>{class v{static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(j,ee){1&j&&(e.I0R(0,"div",0)(1,"span"),e.OEk(2),e.C$Y()()),2&j&&(e.yG2(2),e.cNF(ee.title))},encapsulation:2})}return v})(),ip=(()=>{class v{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(j,ee){1&j&&(e.I0R(0,"div",0)(1,"div",1)(2,"button",2),e.OEk(3,"-"),e.C$Y(),e.wR5(4,"input",3),e.I0R(5,"button",4),e.OEk(6,"+"),e.C$Y()(),e.I0R(7,"div",1)(8,"button",2),e.OEk(9,"-"),e.C$Y(),e.wR5(10,"input",3),e.I0R(11,"button",4),e.OEk(12,"+"),e.C$Y()(),e.I0R(13,"button",5),e.OEk(14),e.wR5(15,"img",6),e.C$Y()()),2&j&&(e.yG2(4),e.E7m("value",ee.hours),e.yG2(6),e.E7m("value",ee.minutes),e.yG2(4),e.oRS("",ee.ampm," "))},encapsulation:2})}return v})(),rc=(()=>{class v{static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-calendar-layout"]],ngContentSelectors:tc,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(j,ee){1&j&&(e.kPM(Hd),e.yuY(0,Zs,1,0,"bs-current-date",0),e.I0R(1,"div",1),e._Xx(2),e.C$Y(),e.I0R(3,"div",2),e._Xx(4,1),e.C$Y(),e.yuY(5,ju,1,0,"bs-timepicker",3)),2&j&&(e.E7m("ngIf",!1),e.yG2(5),e.E7m("ngIf",!1))},dependencies:[Vs.u_,tp,ip],encapsulation:2})}return v})(),gh=(()=>{class v{constructor(k,j,ee){this._config=k,this._elRef=j,this._renderer=ee,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(k=>k).forEach(k=>{this._renderer.addClass(this._elRef.nativeElement,k)})}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Ua),e.GI1(e.GMv),e.GI1(e.q87))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(j,ee){2&j&&e.eAK("disabled",ee.day.isDisabled)("is-highlighted",ee.day.isHovered)("is-other-month",ee.day.isOtherMonth)("is-active-other-month",ee.day.isOtherMonthHovered)("in-range",ee.day.isInRange)("select-start",ee.day.isSelectionStart)("select-end",ee.day.isSelectionEnd)("selected",ee.day.isSelected)},inputs:{day:"day"},attrs:Ep,decls:1,vars:1,template:function(j,ee){1&j&&e.OEk(0),2&j&&e.cNF(ee.day&&ee.day.label||"")},encapsulation:2,changeDetection:0})}return v})(),$l=(()=>{class v{constructor(){this.isDisabled=!1,this.onNavigate=new e._w7,this.onViewMode=new e._w7}navTo(k){this.onNavigate.emit(k?nc.DOWN:nc.UP)}view(k){this.isDisabled||this.onViewMode.emit(k)}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(j,ee){1&j&&(e.I0R(0,"button",0),e.qCj("click",function(){return ee.navTo(!0)}),e.I0R(1,"span"),e.OEk(2,"\u2039"),e.C$Y()(),e.yuY(3,Uu,5,2,"ng-container",1),e.OEk(4," \u200b "),e.I0R(5,"button",2),e.qCj("click",function(){return ee.view("year")}),e.I0R(6,"span"),e.OEk(7),e.C$Y()(),e.OEk(8," \u200b "),e.I0R(9,"button",3),e.qCj("click",function(){return ee.navTo(!1)}),e.I0R(10,"span"),e.OEk(11,"\u203a"),e.C$Y()()),2&j&&(e.m4B("visibility",ee.calendar.hideLeftArrow?"hidden":"visible"),e.E7m("disabled",ee.calendar.disableLeftArrow),e.yG2(3),e.E7m("ngIf",ee.calendar&&ee.calendar.monthTitle),e.yG2(2),e.E7m("disabled",ee.isDisabled),e.yG2(2),e.cNF(ee.calendar.yearTitle),e.yG2(2),e.m4B("visibility",ee.calendar.hideRightArrow?"hidden":"visible"),e.E7m("disabled",ee.calendar.disableRightArrow))},dependencies:[Vs.u_],encapsulation:2,changeDetection:0})}return v})(),Ac=(()=>{class v{constructor(k){this._config=k,this.onNavigate=new e._w7,this.onViewMode=new e._w7,this.onSelect=new e._w7,this.onHover=new e._w7,this.onHoverWeek=new e._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(k){this.onNavigate.emit({step:{month:nc.DOWN===k?-1:1}})}changeViewMode(k){this.onViewMode.emit(k)}selectDay(k){this.onSelect.emit(k)}selectWeek(k){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===k.days.length)return;if(this._config.selectWeek&&k.days[0]&&!k.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(k.days[0]);const j=k.days.find(ee=>(this._config.selectFromOtherMonth||!ee.isOtherMonth)&&!ee.isDisabled);if(this.onSelect.emit(j),this._config.selectWeekDateRange){const Me=k.days.slice(0).reverse().find(zt=>(this._config.selectFromOtherMonth||!zt.isOtherMonth)&&!zt.isDisabled);this.onSelect.emit(Me)}}weekHoverHandler(k,j){(this._config.selectWeek||this._config.selectWeekDateRange)&&k.days.find(Me=>(this._config.selectFromOtherMonth||!Me.isOtherMonth)&&!Me.isDisabled)&&(k.isHovered=j,this.isWeekHovered=j,this.onHoverWeek.emit(k))}hoverDay(k,j){this._config.selectFromOtherMonth&&k.isOtherMonth&&(k.isOtherMonthHovered=j),this._config.dateTooltipTexts&&(k.tooltipText="",this._config.dateTooltipTexts.forEach(ee=>{Jn(ee.date,k.date)&&(k.tooltipText=ee.tooltipText)})),this.onHover.emit({cell:k,isHovered:j})}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Ua))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(j,ee){1&j&&(e.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),e.qCj("onNavigate",function(zt){return ee.navigateTo(zt)})("onViewMode",function(zt){return ee.changeViewMode(zt)}),e.C$Y(),e.I0R(2,"table",1)(3,"thead")(4,"tr"),e.yuY(5,Lh,1,0,"th",2)(6,nd,2,1,"th",3),e.C$Y()(),e.I0R(7,"tbody"),e.yuY(8,kp,3,2,"tr",4),e.C$Y()()()),2&j&&(e.yG2(),e.E7m("calendar",ee.calendar)("isDisabled",!!ee.isDisabled),e.yG2(4),e.E7m("ngIf",ee.options&&ee.options.showWeekNumbers),e.yG2(),e.E7m("ngForOf",ee.calendar.weekdays),e.yG2(2),e.E7m("ngForOf",ee.calendar.weeks))},dependencies:[Vs.ay,Vs.u_,ja.uM,rc,gh,$l],encapsulation:2})}return v})(),np=(()=>{class v{constructor(){this.onNavigate=new e._w7,this.onViewMode=new e._w7,this.onSelect=new e._w7,this.onHover=new e._w7}navigateTo(k){this.onNavigate.emit({step:{year:nc.DOWN===k?-1:1}})}viewMonth(k){this.onSelect.emit(k)}hoverMonth(k,j){this.onHover.emit({cell:k,isHovered:j})}changeViewMode(k){this.onViewMode.emit(k)}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(j,ee){1&j&&(e.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),e.qCj("onNavigate",function(zt){return ee.navigateTo(zt)})("onViewMode",function(zt){return ee.changeViewMode(zt)}),e.C$Y(),e.I0R(2,"table",1)(3,"tbody"),e.yuY(4,Dl,2,1,"tr",2),e.C$Y()()()),2&j&&(e.yG2(),e.E7m("calendar",ee.calendar),e.yG2(3),e.E7m("ngForOf",null==ee.calendar?null:ee.calendar.months))},dependencies:[Vs.ay,rc,$l],encapsulation:2})}return v})(),_h=(()=>{class v{constructor(){this.onNavigate=new e._w7,this.onViewMode=new e._w7,this.onSelect=new e._w7,this.onHover=new e._w7}navigateTo(k){this.onNavigate.emit({step:{year:(nc.DOWN===k?-1:1)*Od}})}viewYear(k){this.onSelect.emit(k)}hoverYear(k,j){this.onHover.emit({cell:k,isHovered:j})}changeViewMode(k){this.onViewMode.emit(k)}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(j,ee){1&j&&(e.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),e.qCj("onNavigate",function(zt){return ee.navigateTo(zt)})("onViewMode",function(zt){return ee.changeViewMode(zt)}),e.C$Y(),e.I0R(2,"table",1)(3,"tbody"),e.yuY(4,Xu,2,1,"tr",2),e.C$Y()()()),2&j&&(e.yG2(),e.E7m("calendar",ee.calendar),e.yG2(3),e.E7m("ngForOf",null==ee.calendar?null:ee.calendar.years))},dependencies:[Vs.ay,rc,$l],encapsulation:2})}return v})(),jc=(()=>{class v extends Sd{set value(k){this._effects?.setValue(k)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(k,j,ee,Me,zt,qi,Rn){super(),this._config=j,this._store=ee,this._element=Me,this._actions=zt,this._positionService=Rn,this.valueChange=new e._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=qi,k.setStyle(Me.nativeElement,"display","block"),k.setStyle(Me.nativeElement,"position","absolute")}ngOnInit(){let k;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,c.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(j=>j.selectedDate).subscribe(j=>{k=j,this.valueChange.emit(j)})),this._subs.push(this._store.select(j=>j.selectedTime).subscribe(j=>{!j[0]||!(j[0]instanceof Date)||j[0]===k||this.valueChange.emit(j[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(k=>{Array.isArray(k)&&k.length>=1&&this.startTimepicker?.writeValue(k[0])})),this.startTimepicker?.registerOnChange(k=>{this.timeSelectHandler(k,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(k,j){this._store.dispatch(this._actions.selectTime(k,j))}daySelectHandler(k){!k||(this.isOtherMonthsActive?k.isDisabled:k.isOtherMonth||k.isDisabled)||this._store.dispatch(this._actions.select(k.date))}monthSelectHandler(k){!k||k.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:Xi(k.date),year:Qi(k.date)},viewMode:"day"}))}yearSelectHandler(k){!k||k.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:Qi(k.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const k of this._subs)k.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(e.q87),e.GI1(Ua),e.GI1(Mc),e.GI1(e.GMv),e.GI1(Yo),e.GI1(kd),e.GI1(Zn.O4))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-datepicker-container"]],viewQuery:function(j,ee){if(1&j&&e.CC$(fu,5),2&j){let Me;e.wto(Me=e.Gqi())&&(ee.startTimepicker=Me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(j,ee){1&j&&e.qCj("click",function(zt){return ee._stopPropagation(zt)}),2&j&&e.e48("disabled",ee.isDatepickerDisabled)("readonly",ee.isDatepickerReadonly)},features:[e.M5G([Mc,kd]),e.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(j,ee){1&j&&(e.yuY(0,gu,10,11,"div",0),e.wVc(1,"async")),2&j&&e.E7m("ngIf",e.kDX(1,1,ee.viewMode))},dependencies:[Vs.QF,Vs.ay,Vs.u_,Vs.Ko,Vs.Wm,vd,Ad,Ac,np,_h,Vs.a],encapsulation:2,data:{animation:[Ed]}})}return v})(),Uc=(()=>{class v{get readonlyValue(){return this.isDisabled?"":null}constructor(k,j,ee,Me,zt){this._config=k,this._elementRef=j,this._renderer=ee,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Vc.E,this.isDisabled=!1,this.bsValueChange=new e._w7,this._subs=[],this._dateInputFormat$=new Vc.E,Object.assign(this,this._config),this._datepicker=zt.createLoader(j,Me,ee),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new rr.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(k){this.isOpen$.next(k)}set bsValue(k){this._bsValue&&k&&this._bsValue.getTime()===k.getTime()||(!this._bsValue&&k&&!this._config.withTimepicker&&ph(k,new Date),k&&this.bsConfig?.initCurrentTime&&(k=ah(k)),this.initPreviousValue(),this._bsValue=k,this.bsValueChange.emit(k))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){Hl=this._bsValue}ngOnChanges(k){k.bsConfig&&(k.bsConfig.currentValue?.initCurrentTime&&k.bsConfig.currentValue?.initCurrentTime!==k.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=ah(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(k.minDate&&(this._datepickerRef.instance.minDate=this.minDate),k.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),k.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),k.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),k.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),k.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),k.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),k.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(k=>{this._datepickerRef&&(this._datepickerRef.instance.value=k)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(k=>{this.initPreviousValue(),this.bsValue=k,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(Hl&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return Hl instanceof Date&&this._bsValue?.getDate()===Hl?.getDate()&&this._bsValue?.getMonth()===Hl?.getMonth()&&this._bsValue?.getFullYear()===Hl?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,Mi.I)(k=>k!==this.isOpen),(0,Z.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Ua,useValue:this._config}).attach(jc).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const k of this._subs)k.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:jh(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(k=>k.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Ua),e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.y8U),e.GI1(xl.Sy))};static#t=this.\u0275dir=e.Sc5({type:v,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(j,ee){2&j&&e.e48("readonly",ee.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[e.SYr]})}return v})(),rp=(()=>{class v extends Sd{set value(k){this._effects?.setRangeValue(k)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(k,j,ee,Me,zt,qi,Rn){super(),this._config=j,this._store=ee,this._element=Me,this._actions=zt,this._positionService=Rn,this.valueChange=new e._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=qi,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,k.setStyle(Me.nativeElement,"display","block"),k.setStyle(Me.nativeElement,"position","absolute")}ngOnInit(){let k;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,c.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(j=>j.selectedRange).subscribe(j=>{k=j,this.valueChange.emit(j),this.chosenRange=j||[]})),this._subs.push(this._store.select(j=>j.selectedTime).subscribe(j=>{!j[0]||!j[1]||!(j[0]instanceof Date)||!(j[1]instanceof Date)||k&&j[0]===k[0]&&j[1]===k[1]||(this.valueChange.emit(j),this.chosenRange=j||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(k=>{Array.isArray(k)&&k.length>=2&&(this.startTimepicker?.writeValue(k[0]),this.endTimepicker?.writeValue(k[1]))})),this.startTimepicker?.registerOnChange(k=>{this.timeSelectHandler(k,0)}),this.endTimepicker?.registerOnChange(k=>{this.timeSelectHandler(k,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(k,j){this._store.dispatch(this._actions.selectTime(k,j))}daySelectHandler(k){!k||(this.isOtherMonthsActive?k.isDisabled:k.isOtherMonth||k.isDisabled)||this.rangesProcessing(k)}monthSelectHandler(k){if(k&&!k.isDisabled){if(k.isSelected=!0,"month"!==this._config.minMode){if(k.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:Xi(k.date),year:Qi(k.date)},viewMode:"day"}))}this.rangesProcessing(k)}}yearSelectHandler(k){if(k&&!k.isDisabled){if(k.isSelected=!0,"year"!==this._config.minMode){if(k.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:Qi(k.date)},viewMode:"month"}))}this.rangesProcessing(k)}}rangesProcessing(k){1===this._rangeStack.length&&(this._rangeStack=k.date>=this._rangeStack[0]?[this._rangeStack[0],k.date]:[k.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(k.date),0===this._rangeStack.length&&(this._rangeStack=[k.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(k.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const k of this._subs)k.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(k){k&&(this._rangeStack=k.value instanceof Date?[k.value]:k.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(k){let j=new Date(k);if(this._config.maxDate){const ee=this._config.maxDate.getTime(),Me=k.getTime()+864e5*(this._config.maxDateRange||0);j=Me>ee?new Date(this._config.maxDate):new Date(Me)}else j.setDate(k.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(j)}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(e.q87),e.GI1(Ua),e.GI1(Mc),e.GI1(e.GMv),e.GI1(Yo),e.GI1(kd),e.GI1(Zn.O4))};static#t=this.\u0275cmp=e.In1({type:v,selectors:[["bs-daterangepicker-container"]],viewQuery:function(j,ee){if(1&j&&(e.CC$(fu,5),e.CC$(yu,5)),2&j){let Me;e.wto(Me=e.Gqi())&&(ee.startTimepicker=Me.first),e.wto(Me=e.Gqi())&&(ee.endTimepicker=Me.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(j,ee){1&j&&e.qCj("click",function(zt){return ee._stopPropagation(zt)}),2&j&&e.e48("disabled",ee.isDatepickerDisabled)("readonly",ee.isDatepickerReadonly)},features:[e.M5G([Mc,kd]),e.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(j,ee){1&j&&(e.yuY(0,Io,10,11,"div",0),e.wVc(1,"async")),2&j&&e.E7m("ngIf",e.kDX(1,1,ee.viewMode))},dependencies:[Vs.QF,Vs.ay,Vs.u_,Vs.Ko,Vs.Wm,vd,Ad,Ac,np,_h,Vs.a],encapsulation:2,data:{animation:[Ed]}})}return v})();const Bp={provide:Wn.Y6,useExisting:(0,e.wd)(()=>tu),multi:!0},sp={provide:Wn.WM,useExisting:(0,e.wd)(()=>tu),multi:!0};let qc,tu=(()=>{class v{constructor(k,j,ee,Me,zt){this._picker=k,this._localeService=j,this._renderer=ee,this._elRef=Me,this.changeDetection=zt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Nc.wH}ngOnInit(){const k=j=>{this._setInputValue(j),this._value!==j&&(this._value=j,this._onChange(j),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&k(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(k)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,Be.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(k){(13===k.keyCode||"Enter"===k.code)&&this.hide()}_setInputValue(k){const j=k?Ls(k,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",j)}onChange(k){this.writeValue(k.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(k){const j=k.value;if(null==j||""===j)return null;if(Te(j)){if(!We(j))return{bsDate:{invalid:j}};if(this._picker&&this._picker.minDate&&uo(j,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&rs(j,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(k){this._validatorChange=k}writeValue(k){if(k){const j=this._localeService.currentLocale;if(!ns(j))throw new Error(`Locale "${j}" is not defined, please add it with "defineLocale(...)"`);this._value=Po(k,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=As(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(k){this._picker.isDisabled=k,k?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(k){this._onChange=k}registerOnTouched(k){this._onTouched=k}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Uc,1),e.GI1(nh),e.GI1(e.q87),e.GI1(e.GMv),e.GI1(e.kD9))};static#t=this.\u0275dir=e.Sc5({type:v,selectors:[["input","bsDatepicker",""]],hostBindings:function(j,ee){1&j&&e.qCj("change",function(zt){return ee.onChange(zt)})("keyup.esc",function(){return ee.hide()})("keydown",function(zt){return ee.onKeydownEvent(zt)})("blur",function(){return ee.onBlur()})},features:[e.M5G([Bp,sp])]})}return v})(),Iu=(()=>{class v extends Ua{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let k;return function(ee){return(k||(k=e.otF(v)))(ee||v)}})();static#t=this.\u0275prov=e.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),op=(()=>{class v{get isOpen(){return this._datepicker.isShown}set isOpen(k){this.isOpen$.next(k)}set bsValue(k){this._bsValue!==k&&(k&&this.bsConfig?.initCurrentTime&&(k=Wh(k)),this.initPreviousValue(),this._bsValue=k,this.bsValueChange.emit(k))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(k,j,ee,Me,zt){this._config=k,this._elementRef=j,this._renderer=ee,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Vc.E,this.isDisabled=!1,this.bsValueChange=new e._w7,this._subs=[],this._rangeInputFormat$=new Vc.E,this._datepicker=zt.createLoader(j,Me,ee),Object.assign(this,k),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new rr.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Vc.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(k){k.bsConfig&&(k.bsConfig.currentValue?.initCurrentTime&&k.bsConfig.currentValue?.initCurrentTime!==k.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Wh(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(k.bsConfig.currentValue&&k.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(k.minDate&&(this._datepickerRef.instance.minDate=this.minDate),k.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),k.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),k.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),k.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),k.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),k.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,Mi.I)(k=>k!==this.isOpen),(0,Z.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Ua,useValue:this._config}).attach(rp).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(k=>{this._datepickerRef&&(this._datepickerRef.instance.value=k)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,Mi.I)(k=>k&&k[0]&&!!k[1])).subscribe(k=>{this.initPreviousValue(),this.bsValue=k,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){qc=this._bsValue}keepDatepickerModalOpened(){return!!(qc&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===qc?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===qc?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===qc?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===qc?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===qc?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===qc?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:jh(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:Hh(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const k of this._subs)k.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(k=>k.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(Iu),e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.y8U),e.GI1(xl.Sy))};static#t=this.\u0275dir=e.Sc5({type:v,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(j,ee){2&j&&e.e48("readonly",ee.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[e.SYr]})}return v})();const Dd={provide:Wn.Y6,useExisting:(0,e.wd)(()=>ap),multi:!0},Gp={provide:Wn.WM,useExisting:(0,e.wd)(()=>ap),multi:!0};let ap=(()=>{class v{constructor(k,j,ee,Me,zt){this._picker=k,this._localeService=j,this._renderer=ee,this._elRef=Me,this.changeDetection=zt,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Nc.wH}ngOnInit(){this._picker._bsValue&&(j=>{this._setInputValue(j),this._value!==j&&(this._value=j,this._onChange(j),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(j=>{this._setInputValue(j),this._value!==j&&(this._value=j,this._onChange(j),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,Be.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(k){(13===k.keyCode||"Enter"===k.code)&&this.hide()}_setInputValue(k){let j="";if(k){const ee=k[0]?Ls(k[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",Me=k[1]?Ls(k[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";j=ee&&Me?ee+this._picker._config.rangeSeparator+Me:""}this._renderer.setProperty(this._elRef.nativeElement,"value",j)}onChange(k){this.writeValue(k.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(k){let j=k.value;const ee=[];if(null==j||!tt(j))return null;j=j.slice().sort((qi,Rn)=>qi.getTime()-Rn.getTime());const Me=We(j[0]),zt=We(j[1]);return Me?zt?(this._picker&&this._picker.minDate&&uo(j[0],this._picker.minDate,"date")&&(j[0]=this._picker.minDate,ee.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&rs(j[1],this._picker.maxDate,"date")&&(j[1]=this._picker.maxDate,ee.push({bsDate:{maxDate:this._picker.maxDate}})),ee.length>0?(this.writeValue(j),ee):null):{bsDate:{invalid:j[1]}}:{bsDate:{invalid:j[0]}}}registerOnValidatorChange(k){this._validatorChange=k}writeValue(k){if(k){const j=this._localeService.currentLocale;if(!ns(j))throw new Error(`Locale "${j}" is not defined, please add it with "defineLocale(...)"`);let Me=[];if("string"==typeof k){const zt=this._picker._config.rangeSeparator.trim();Me=k.replace(/[^-]/g,"").length>1?k.split(this._picker._config.rangeSeparator):k.split(zt.length>0?zt:this._picker._config.rangeSeparator).map(qi=>qi.trim())}Array.isArray(k)&&(Me=k),this._value=Me.map(zt=>this._picker._config.useUtc?As(Po(zt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):Po(zt,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(zt=>isNaN(zt.valueOf())?void 0:zt)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(k){this._picker.isDisabled=k,k?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(k){this._onChange=k}registerOnTouched(k){this._onTouched=k}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(j){return new(j||v)(e.GI1(op,1),e.GI1(nh),e.GI1(e.q87),e.GI1(e.GMv),e.GI1(e.kD9))};static#t=this.\u0275dir=e.Sc5({type:v,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(j,ee){1&j&&e.qCj("change",function(zt){return ee.onChange(zt)})("keyup.esc",function(){return ee.hide()})("keydown",function(zt){return ee.onKeydownEvent(zt)})("blur",function(){return ee.onBlur()})},features:[e.M5G([Dd,Gp])]})}return v})(),Np=(()=>{class v{static forRoot(){return{ngModule:v,providers:[xl.Sy,Zn.O4,Mc,Yo,kd,nh,ca]}}static#e=this.\u0275fac=function(j){return new(j||v)};static#t=this.\u0275mod=e.a4G({type:v});static#i=this.\u0275inj=e.s3X({imports:[Vs.MD,ja.as,$u]})}return v})()},8216:(ms,lr,Et)=>{"use strict";Et.d(lr,{im:()=>rt,rO:()=>bi});var e=Et(4496),Mi=Et(6504),He=Et(1368);const c=(ci,ti)=>({"pull-left":ci,"float-left":ti}),Z=(ci,ti)=>({"pull-right":ci,"float-right":ti}),Be=(ci,ti)=>({disabled:ci,currentPage:ti});function we(ci,ti){if(1&ci){const St=e.KQA();e.I0R(0,"li",11)(1,"a",12),e.qCj("click",function(vi){e.usT(St);const Ti=e.GaO();return e.CGJ(Ti.selectPage(1,vi))}),e.C_f(2,13),e.C$Y()()}if(2&ci){const St=e.GaO(),pi=e.Gew(13);e.eAK("disabled",St.noPrevious()||St.disabled),e.yG2(2),e.E7m("ngTemplateOutlet",St.customFirstTemplate||pi)("ngTemplateOutletContext",e.IBC(4,Be,St.noPrevious()||St.disabled,St.page))}}function Se(ci,ti){if(1&ci){const St=e.KQA();e.I0R(0,"li",14)(1,"a",12),e.qCj("click",function(vi){e.usT(St);const Ti=e.GaO();return e.CGJ(Ti.selectPage(Ti.page-1,vi))}),e.C_f(2,13),e.C$Y()()}if(2&ci){const St=e.GaO(),pi=e.Gew(11);e.eAK("disabled",St.noPrevious()||St.disabled),e.yG2(2),e.E7m("ngTemplateOutlet",St.customPreviousTemplate||pi)("ngTemplateOutletContext",e.IBC(4,Be,St.noPrevious()||St.disabled,St.page))}}const Le=(ci,ti,St)=>({disabled:ci,$implicit:ti,currentPage:St});function Te(ci,ti){if(1&ci){const St=e.KQA();e.I0R(0,"li",15)(1,"a",12),e.qCj("click",function(vi){const Ji=e.usT(St).$implicit,Ii=e.GaO();return e.CGJ(Ii.selectPage(Ji.number,vi))}),e.C_f(2,13),e.C$Y()()}if(2&ci){const St=ti.$implicit,pi=e.GaO(),vi=e.Gew(7);e.eAK("active",St.active)("disabled",pi.disabled&&!St.active),e.yG2(2),e.E7m("ngTemplateOutlet",pi.customPageTemplate||vi)("ngTemplateOutletContext",e.uAc(6,Le,pi.disabled,St,pi.page))}}function Ve(ci,ti){if(1&ci){const St=e.KQA();e.I0R(0,"li",16)(1,"a",12),e.qCj("click",function(vi){e.usT(St);const Ti=e.GaO();return e.CGJ(Ti.selectPage(Ti.page+1,vi))}),e.C_f(2,13),e.C$Y()()}if(2&ci){const St=e.GaO(),pi=e.Gew(9);e.eAK("disabled",St.noNext()||St.disabled),e.yG2(2),e.E7m("ngTemplateOutlet",St.customNextTemplate||pi)("ngTemplateOutletContext",e.IBC(4,Be,St.noNext()||St.disabled,St.page))}}function We(ci,ti){if(1&ci){const St=e.KQA();e.I0R(0,"li",17)(1,"a",12),e.qCj("click",function(vi){e.usT(St);const Ti=e.GaO();return e.CGJ(Ti.selectPage(Ti.totalPages,vi))}),e.C_f(2,13),e.C$Y()()}if(2&ci){const St=e.GaO(),pi=e.Gew(15);e.eAK("disabled",St.noNext()||St.disabled),e.yG2(2),e.E7m("ngTemplateOutlet",St.customLastTemplate||pi)("ngTemplateOutletContext",e.IBC(4,Be,St.noNext()||St.disabled,St.page))}}function ut(ci,ti){1&ci&&e.OEk(0),2&ci&&e.cNF(ti.$implicit.text)}function vt(ci,ti){if(1&ci&&e.OEk(0),2&ci){const St=e.GaO();e.cNF(St.getText("next"))}}function tt(ci,ti){if(1&ci&&e.OEk(0),2&ci){const St=e.GaO();e.cNF(St.getText("previous"))}}function ze(ci,ti){if(1&ci&&e.OEk(0),2&ci){const St=e.GaO();e.cNF(St.getText("first"))}}function ct(ci,ti){if(1&ci&&e.OEk(0),2&ci){const St=e.GaO();e.cNF(St.getText("last"))}}let qt=(()=>{class ci{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(pi){return new(pi||ci)};static#t=this.\u0275prov=e.wxM({token:ci,factory:ci.\u0275fac,providedIn:"root"})}return ci})();const Je={provide:Mi.Y6,useExisting:(0,e.wd)(()=>Jt),multi:!0};let Jt=(()=>{class ci{constructor(St,pi,vi){this.elementRef=St,this.changeDetection=vi,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new e._w7,this.pageChanged=new e._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=St,this.config||this.configureOptions(Object.assign({},pi.main,pi.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(St){this._itemsPerPage=St,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(St){this._totalItems=St,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(St){this._totalPages=St,this.numPages.emit(St),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(St){const pi=this._page;this._page=St>this.totalPages?this.totalPages:St||1,this.changeDetection.markForCheck(),!(pi===this._page||typeof pi>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(St){this.config=Object.assign({},St)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(St){this.page=St,this.pages=this.getPages(this.page,this.totalPages)}getText(St){return this[`${St}Text`]||this.config[`${St}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(St){this.onChange=St}registerOnTouched(St){this.onTouched=St}selectPage(St,pi){pi&&pi.preventDefault(),this.disabled||(pi&&pi.target&&pi.target.blur(),this.writeValue(St),this.onChange(this.page))}makePage(St,pi,vi){return{text:pi,number:St,active:vi}}getPages(St,pi){const vi=[];let Ti=1,Ji=pi;const Ii=typeof this.maxSize<"u"&&this.maxSize<pi;Ii&&this.maxSize&&(this.rotate?(Ti=Math.max(St-Math.floor(this.maxSize/2),1),Ji=Ti+this.maxSize-1,Ji>pi&&(Ji=pi,Ti=Ji-this.maxSize+1)):(Ti=(Math.ceil(St/this.maxSize)-1)*this.maxSize+1,Ji=Math.min(Ti+this.maxSize-1,pi)));for(let ki=Ti;ki<=Ji;ki++){const Zi=this.makePage(ki,ki.toString(),ki===St);vi.push(Zi)}if(Ii&&!this.rotate){if(Ti>1){const ki=this.makePage(Ti-1,"...",!1);vi.unshift(ki)}if(Ji<pi){const ki=this.makePage(Ji+1,"...",!1);vi.push(ki)}}return vi}calculateTotalPages(){const St=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(St||0,1)}static#e=this.\u0275fac=function(pi){return new(pi||ci)(e.GI1(e.GMv),e.GI1(qt),e.GI1(e.kD9))};static#t=this.\u0275cmp=e.In1({type:ci,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[e.M5G([Je])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(pi,vi){1&pi&&(e.I0R(0,"ul",0)(1,"li",1)(2,"a",2),e.qCj("click",function(Ji){return vi.selectPage(vi.page-1,Ji)}),e.OEk(3),e.C$Y()(),e.I0R(4,"li",1)(5,"a",2),e.qCj("click",function(Ji){return vi.selectPage(vi.page+1,Ji)}),e.OEk(6),e.C$Y()()()),2&pi&&(e.yG2(),e.m8U(vi.pageBtnClass),e.eAK("disabled",vi.noPrevious())("previous",vi.align),e.E7m("ngClass",e.IBC(18,c,vi.align,vi.align)),e.yG2(2),e.cNF(vi.getText("previous")),e.yG2(),e.m8U(vi.pageBtnClass),e.eAK("disabled",vi.noNext())("next",vi.align),e.E7m("ngClass",e.IBC(21,Z,vi.align,vi.align)),e.yG2(2),e.cNF(vi.getText("next")))},dependencies:[He.QF],encapsulation:2})}return ci})();const yi={provide:Mi.Y6,useExisting:(0,e.wd)(()=>rt),multi:!0};let rt=(()=>{class ci{constructor(St,pi,vi){this.elementRef=St,this.changeDetection=vi,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new e._w7,this.pageChanged=new e._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=St,this.config||this.configureOptions(pi.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(St){this._itemsPerPage=St,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(St){this._totalItems=St,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(St){this._totalPages=St,this.numPages.emit(St),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(St){const pi=this._page;this._page=St>this.totalPages?this.totalPages:St||1,this.changeDetection.markForCheck(),!(pi===this._page||typeof pi>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(St){this.config=Object.assign({},St)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(St){this.page=St,this.pages=this.getPages(this.page,this.totalPages)}getText(St){return this[`${St}Text`]||this.config[`${St}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(St){this.onChange=St}registerOnTouched(St){this.onTouched=St}selectPage(St,pi){pi&&pi.preventDefault(),this.disabled||(pi&&pi.target&&pi.target.blur(),this.writeValue(St),this.onChange(this.page))}makePage(St,pi,vi){return{text:pi,number:St,active:vi}}getPages(St,pi){const vi=[];let Ti=1,Ji=pi;const Ii=typeof this.maxSize<"u"&&this.maxSize<pi;Ii&&this.maxSize&&(this.rotate?(Ti=Math.max(St-Math.floor(this.maxSize/2),1),Ji=Ti+this.maxSize-1,Ji>pi&&(Ji=pi,Ti=Ji-this.maxSize+1)):(Ti=(Math.ceil(St/this.maxSize)-1)*this.maxSize+1,Ji=Math.min(Ti+this.maxSize-1,pi)));for(let ki=Ti;ki<=Ji;ki++){const Zi=this.makePage(ki,ki.toString(),ki===St);vi.push(Zi)}if(Ii&&!this.rotate){if(Ti>1){const ki=this.makePage(Ti-1,"...",!1);vi.unshift(ki)}if(Ji<pi){const ki=this.makePage(Ji+1,"...",!1);vi.push(ki)}}return vi}calculateTotalPages(){const St=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(St||0,1)}static#e=this.\u0275fac=function(pi){return new(pi||ci)(e.GI1(e.GMv),e.GI1(qt),e.GI1(e.kD9))};static#t=this.\u0275cmp=e.In1({type:ci,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[e.M5G([yi])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(pi,vi){1&pi&&(e.I0R(0,"ul",0),e.yuY(1,we,3,7,"li",1)(2,Se,3,7,"li",2)(3,Te,3,10,"li",3)(4,Ve,3,7,"li",4)(5,We,3,7,"li",5),e.C$Y(),e.yuY(6,ut,1,1,"ng-template",null,6,e.gJz)(8,vt,1,1,"ng-template",null,7,e.gJz)(10,tt,1,1,"ng-template",null,8,e.gJz)(12,ze,1,1,"ng-template",null,9,e.gJz)(14,ct,1,1,"ng-template",null,10,e.gJz)),2&pi&&(e.E7m("ngClass",vi.classMap),e.yG2(),e.E7m("ngIf",vi.boundaryLinks),e.yG2(),e.E7m("ngIf",vi.directionLinks),e.yG2(),e.E7m("ngForOf",vi.pages),e.yG2(),e.E7m("ngIf",vi.directionLinks),e.yG2(),e.E7m("ngIf",vi.boundaryLinks))},dependencies:[He.QF,He.ay,He.u_,He.XV],encapsulation:2})}return ci})(),bi=(()=>{class ci{static forRoot(){return{ngModule:ci,providers:[]}}static#e=this.\u0275fac=function(pi){return new(pi||ci)};static#t=this.\u0275mod=e.a4G({type:ci});static#i=this.\u0275inj=e.s3X({imports:[He.MD]})}return ci})()},8987:(ms,lr,Et)=>{"use strict";Et.d(lr,{iU:()=>Ve});var e=Et(4496),Mi=Et(1368);let Ve=(()=>{class We{static forRoot(){return{ngModule:We,providers:[]}}static#e=this.\u0275fac=function(tt){return new(tt||We)};static#t=this.\u0275mod=e.a4G({type:We});static#i=this.\u0275inj=e.s3X({imports:[Mi.MD]})}return We})()},3952:(ms,lr,Et)=>{"use strict";Et.d(lr,{RR:()=>Ve});var e=Et(4496),Mi=Et(6504),He=Et(1368);function c(We,ut){1&We&&e.OEk(0),2&We&&e.cNF(ut.index<ut.value?"\u2605":"\u2606")}function Z(We,ut){}const Be=(We,ut)=>({index:We,value:ut});function we(We,ut){if(1&We){const vt=e.KQA();e.I0R(0,"span",3),e.OEk(1),e.C$Y(),e.I0R(2,"span",4),e.qCj("mouseenter",function(){const ct=e.usT(vt).index,qt=e.GaO();return e.CGJ(qt.enter(ct+1))})("click",function(){const ct=e.usT(vt).index,qt=e.GaO();return e.CGJ(qt.rate(ct+1))}),e.yuY(3,Z,0,0,"ng-template",5),e.C$Y()}if(2&We){const vt=ut.$implicit,tt=ut.index,ze=e.GaO(),ct=e.Gew(2);e.yG2(),e.oRS("(",tt<ze.value?"*":" ",")"),e.yG2(),e.m4B("cursor",ze.readonly?"default":"pointer"),e.eAK("active",tt<ze.value),e.E7m("title",vt.title),e.yG2(),e.E7m("ngTemplateOutlet",ze.customTemplate||ct)("ngTemplateOutletContext",e.IBC(8,Be,tt,ze.value))}}let Se=(()=>{class We{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(tt){return new(tt||We)};static#t=this.\u0275prov=e.wxM({token:We,factory:We.\u0275fac,providedIn:"root"})}return We})();const Le={provide:Mi.Y6,useExisting:(0,e.wd)(()=>Te),multi:!0};let Te=(()=>{class We{constructor(vt,tt){this.changeDetection=vt,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new e._w7,this.onLeave=new e._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,tt)}onKeydown(vt){-1!==[37,38,39,40].indexOf(vt.which)&&(vt.preventDefault(),vt.stopPropagation(),this.rate(this.value+(38===vt.which||39===vt.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(vt){if(vt%1!==vt)return this.value=Math.round(vt),this.preValue=vt,void this.changeDetection.markForCheck();this.preValue=vt,this.value=vt,this.changeDetection.markForCheck()}enter(vt){this.readonly||(this.value=vt,this.changeDetection.markForCheck(),this.onHover.emit(vt))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(vt){this.onChange=vt}registerOnTouched(vt){this.onTouched=vt}rate(vt){!this.readonly&&this.range&&vt>=0&&vt<=this.range.length&&(this.writeValue(vt),this.onChange(vt))}buildTemplateObjects(vt){const tt=[];for(let ze=0;ze<vt;ze++)tt.push({index:ze,title:this.titles[ze]||ze+1});return tt}static#e=this.\u0275fac=function(tt){return new(tt||We)(e.GI1(e.kD9),e.GI1(Se))};static#t=this.\u0275cmp=e.In1({type:We,selectors:[["rating"]],hostBindings:function(tt,ze){1&tt&&e.qCj("keydown",function(qt){return ze.onKeydown(qt)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[e.M5G([Le])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(tt,ze){1&tt&&(e.I0R(0,"span",0),e.qCj("mouseleave",function(){return ze.reset()})("keydown",function(qt){return ze.onKeydown(qt)}),e.yuY(1,c,1,1,"ng-template",null,1,e.gJz)(3,we,4,11,"ng-template",2),e.C$Y()),2&tt&&(e.e48("aria-label",ze.ariaLabel)("aria-valuemax",ze.range.length)("aria-valuenow",ze.value),e.yG2(3),e.E7m("ngForOf",ze.range))},dependencies:[He.ay,He.XV],encapsulation:2,changeDetection:0})}return We})(),Ve=(()=>{class We{static forRoot(){return{ngModule:We,providers:[]}}static#e=this.\u0275fac=function(tt){return new(tt||We)};static#t=this.\u0275mod=e.a4G({type:We});static#i=this.\u0275inj=e.s3X({imports:[He.MD]})}return We})()},7995:(ms,lr,Et)=>{"use strict";Et.d(lr,{as:()=>ut,uM:()=>We});var e=Et(4496),Mi=Et(3676),He=Et(140),c=Et(1316),Z=Et(6552),Be=Et(3120),we=Et(1368);const Se=["*"];let Le=(()=>{class vt{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(ct){return new(ct||vt)};static#t=this.\u0275prov=e.wxM({token:vt,factory:vt.\u0275fac,providedIn:"root"})}return vt})(),Te=(()=>{class vt{get _bsVersions(){return(0,Mi.w3)()}constructor(ze){Object.assign(this,ze)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=He.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(ct){return new(ct||vt)(e.GI1(Le))};static#t=this.\u0275cmp=e.In1({type:vt,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(ct,qt){2&ct&&(e.e48("id",qt.id),e.m8U("show tooltip in tooltip-"+qt.placement+" bs-tooltip-"+qt.placement+" "+qt.placement+" "+qt.containerClass))},ngContentSelectors:Se,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(ct,qt){1&ct&&(e.kPM(),e.wR5(0,"div",0),e.I0R(1,"div",1),e._Xx(2),e.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return vt})(),Ve=0,We=(()=>{class vt{get isOpen(){return this._tooltip.isShown}set isOpen(ze){ze?this.show():this.hide()}set htmlContent(ze){(0,Mi.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=ze}set _placement(ze){(0,Mi.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=ze}set _isOpen(ze){(0,Mi.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=ze}get _isOpen(){return(0,Mi.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(ze){(0,Mi.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!ze}get _enable(){return(0,Mi.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(ze){(0,Mi.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=ze?"body":this.container}get _appendToBody(){return(0,Mi.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(ze){(0,Mi.eG)("tooltipClass deprecated")}set _tooltipContext(ze){(0,Mi.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(ze){(0,Mi.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=ze}get _tooltipTrigger(){return(0,Mi.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(ze){(0,Mi.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(ze||"").toString()}constructor(ze,ct,qt,Je,Jt,yi){this._elementRef=Je,this._renderer=Jt,this._positionService=yi,this.tooltipId=Ve++,this.adaptivePosition=!0,this.tooltipChange=new e._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new e._w7,this._tooltip=ct.createLoader(this._elementRef,ze,this._renderer).provide({provide:Le,useValue:qt}),Object.assign(this,qt),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(ze=>{ze||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const ze=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(Te).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},ct=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,Be.k)(this.delay).subscribe(()=>{ze(),ct()}),this.triggers&&(0,Mi.GY)(this.triggers).forEach(qt=>{qt.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,qt.close,()=>{this._delaySubscription?.unsubscribe(),ct()}))})):ze()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(ct){return new(ct||vt)(e.GI1(e.y8U),e.GI1(Z.Sy),e.GI1(Le),e.GI1(e.GMv),e.GI1(e.q87),e.GI1(He.O4))};static#t=this.\u0275dir=e.Sc5({type:vt,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[e.Wk5.None,"tooltipHtml","htmlContent"],_placement:[e.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[e.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[e.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[e.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[e.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[e.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[e.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[e.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,c.UN)([(0,Mi.s9)(),(0,c.YR)("design:type",Object)],vt.prototype,"tooltip",void 0),vt})(),ut=(()=>{class vt{static forRoot(){return{ngModule:vt,providers:[Z.Sy,He.O4]}}static#e=this.\u0275fac=function(ct){return new(ct||vt)};static#t=this.\u0275mod=e.a4G({type:vt});static#i=this.\u0275inj=e.s3X({imports:[we.MD]})}return vt})()},1972:(ms,lr,Et)=>{"use strict";Et.d(lr,{m:()=>Z});var e=Et(4496),Mi=function(){return Mi=Object.assign||function(Be){for(var we,Se=1,Le=arguments.length;Se<Le;Se++)for(var Te in we=arguments[Se])Object.prototype.hasOwnProperty.call(we,Te)&&(Be[Te]=we[Te]);return Be},Mi.apply(this,arguments)};!function(){function Be(we,Se,Le){var Te=this;this.endVal=Se,this.options=Le,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(Ve){Te.startTime||(Te.startTime=Ve);var We=Ve-Te.startTime;Te.remaining=Te.duration-We,Te.frameVal=Te.useEasing?Te.countDown?Te.startVal-Te.easingFn(We,0,Te.startVal-Te.endVal,Te.duration):Te.easingFn(We,Te.startVal,Te.endVal-Te.startVal,Te.duration):Te.startVal+We/Te.duration*(Te.endVal-Te.startVal),Te.frameVal=(Te.countDown?Te.frameVal<Te.endVal:Te.frameVal>Te.endVal)?Te.endVal:Te.frameVal,Te.frameVal=Number(Te.frameVal.toFixed(Te.options.decimalPlaces)),Te.printValue(Te.frameVal),We<Te.duration?Te.rAF=requestAnimationFrame(Te.count):null!==Te.finalEndVal?Te.update(Te.finalEndVal):Te.options.onCompleteCallback&&Te.options.onCompleteCallback()},this.formatNumber=function(Ve){var We,ut,vt,tt,ze=Ve<0?"-":"";We=Math.abs(Ve).toFixed(Te.options.decimalPlaces);var ct=(We+="").split(".");if(ut=ct[0],vt=ct.length>1?Te.options.decimal+ct[1]:"",Te.options.useGrouping){tt="";for(var qt=3,Je=0,Jt=0,yi=ut.length;Jt<yi;++Jt)Te.options.useIndianSeparators&&4===Jt&&(qt=2,Je=1),0!==Jt&&Je%qt==0&&(tt=Te.options.separator+tt),Je++,tt=ut[yi-Jt-1]+tt;ut=tt}return Te.options.numerals&&Te.options.numerals.length&&(ut=ut.replace(/[0-9]/g,function(rt){return Te.options.numerals[+rt]}),vt=vt.replace(/[0-9]/g,function(rt){return Te.options.numerals[+rt]})),ze+Te.options.prefix+ut+vt+Te.options.suffix},this.easeOutExpo=function(Ve,We,ut,vt){return ut*(1-Math.pow(2,-10*Ve/vt))*1024/1023+We},this.options=Mi(Mi({},this.defaults),Le),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(Se),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof we?document.getElementById(we):we,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,we):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return Te.handleScroll(Te)}),window.onscroll=function(){window.onScrollFns.forEach(function(Ve){return Ve()})},this.handleScroll(this)))}Be.prototype.handleScroll=function(we){if(we&&window&&!we.once){var Se=window.innerHeight+window.scrollY,Le=we.el.getBoundingClientRect(),Te=Le.top+window.pageYOffset,Ve=Le.top+Le.height+window.pageYOffset;Ve<Se&&Ve>window.scrollY&&we.paused?(we.paused=!1,setTimeout(function(){return we.start()},we.options.scrollSpyDelay),we.options.scrollSpyOnce&&(we.once=!0)):(window.scrollY>Ve||Te>Se)&&!we.paused&&we.reset()}},Be.prototype.determineDirectionAndSmartEasing=function(){var we=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>we,Math.abs(we-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=we,this.endVal=we+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=we,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},Be.prototype.start=function(we){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),we&&(this.options.onCompleteCallback=we),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},Be.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},Be.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},Be.prototype.update=function(we){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(we),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},Be.prototype.printValue=function(we){var Se;if(this.el){var Le=this.formattingFn(we);null!==(Se=this.options.plugin)&&void 0!==Se&&Se.render?this.options.plugin.render(this.el,Le):"INPUT"===this.el.tagName?this.el.value=Le:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=Le:this.el.innerHTML=Le}},Be.prototype.ensureNumber=function(we){return"number"==typeof we&&!isNaN(we)},Be.prototype.validateValue=function(we){var Se=Number(we);return this.ensureNumber(Se)?Se:(this.error="[CountUp] invalid start or end value: ".concat(we),null)},Be.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration}}();let Z=(()=>{class Be{}return Be.\u0275fac=function(Se){return new(Se||Be)},Be.\u0275mod=e.a4G({type:Be}),Be.\u0275inj=e.s3X({imports:[[]]}),Be})()},8612:(ms,lr,Et)=>{"use strict";Et.d(lr,{oP:()=>Ve});var e=Et(4496),Mi=Et(1368);Et(1176),new e.UbH("DROPZONE_CONFIG");let Ve=(()=>{class We{static \u0275fac=function(tt){return new(tt||We)};static \u0275mod=e.a4G({type:We});static \u0275inj=e.s3X({imports:[Mi.MD,Mi.MD]})}return We})()},9048:(ms,lr,Et)=>{"use strict";Et.d(lr,{GW:()=>hm,Sw:()=>y,Ip:()=>gh,Fd:()=>yc,Ad:()=>h});var e=Et(4496),Mi=Et(6504),He=Et(5657),c=Et(1116),Z=Et(2700),Be=Et(3616);const Te=b=>{const a=(b=>{const a={};return Object.keys(b).forEach(l=>{b[l]&&(a[l]=b[l])}),a})(b);return Object.entries(a).map(([l,m])=>`${(b=>b.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`))(l)}:${m}`).join(";")};class Ve extends Error{constructor(a){super(a),this.name=this.constructor.name}}function We(b){this.content=b}We.prototype={constructor:We,find:function(b){for(var a=0;a<this.content.length;a+=2)if(this.content[a]===b)return a;return-1},get:function(b){var a=this.find(b);return-1==a?void 0:this.content[a+1]},update:function(b,a,l){var m=l&&l!=b?this.remove(l):this,E=m.find(b),D=m.content.slice();return-1==E?D.push(l||b,a):(D[E+1]=a,l&&(D[E]=l)),new We(D)},remove:function(b){var a=this.find(b);if(-1==a)return this;var l=this.content.slice();return l.splice(a,2),new We(l)},addToStart:function(b,a){return new We([b,a].concat(this.remove(b).content))},addToEnd:function(b,a){var l=this.remove(b).content.slice();return l.push(b,a),new We(l)},addBefore:function(b,a,l){var m=this.remove(a),E=m.content.slice(),D=m.find(b);return E.splice(-1==D?E.length:D,0,a,l),new We(E)},forEach:function(b){for(var a=0;a<this.content.length;a+=2)b(this.content[a],this.content[a+1])},prepend:function(b){return(b=We.from(b)).size?new We(b.content.concat(this.subtract(b).content)):this},append:function(b){return(b=We.from(b)).size?new We(this.subtract(b).content.concat(b.content)):this},subtract:function(b){var a=this;b=We.from(b);for(var l=0;l<b.content.length;l+=2)a=a.remove(b.content[l]);return a},toObject:function(){var b={};return this.forEach(function(a,l){b[a]=l}),b},get size(){return this.content.length>>1}},We.from=function(b){if(b instanceof We)return b;var a=[];if(b)for(var l in b)a.push(l,b[l]);return new We(a)};const ut=We;function vt(b,a,l){for(let m=0;;m++){if(m==b.childCount||m==a.childCount)return b.childCount==a.childCount?null:l;let E=b.child(m),D=a.child(m);if(E!=D){if(!E.sameMarkup(D))return l;if(E.isText&&E.text!=D.text){for(let N=0;E.text[N]==D.text[N];N++)l++;return l}if(E.content.size||D.content.size){let N=vt(E.content,D.content,l+1);if(null!=N)return N}l+=E.nodeSize}else l+=E.nodeSize}}function tt(b,a,l,m){for(let E=b.childCount,D=a.childCount;;){if(0==E||0==D)return E==D?null:{a:l,b:m};let N=b.child(--E),J=a.child(--D),he=N.nodeSize;if(N!=J){if(!N.sameMarkup(J))return{a:l,b:m};if(N.isText&&N.text!=J.text){let Oe=0,je=Math.min(N.text.length,J.text.length);for(;Oe<je&&N.text[N.text.length-Oe-1]==J.text[J.text.length-Oe-1];)Oe++,l--,m--;return{a:l,b:m}}if(N.content.size||J.content.size){let Oe=tt(N.content,J.content,l-1,m-1);if(Oe)return Oe}l-=he,m-=he}else l-=he,m-=he}}class ze{constructor(a,l){if(this.content=a,this.size=l||0,null==l)for(let m=0;m<a.length;m++)this.size+=a[m].nodeSize}nodesBetween(a,l,m,E=0,D){for(let N=0,J=0;J<l;N++){let he=this.content[N],Oe=J+he.nodeSize;if(Oe>a&&!1!==m(he,E+J,D||null,N)&&he.content.size){let je=J+1;he.nodesBetween(Math.max(0,a-je),Math.min(he.content.size,l-je),m,E+je)}J=Oe}}descendants(a){this.nodesBetween(0,this.size,a)}textBetween(a,l,m,E){let D="",N=!0;return this.nodesBetween(a,l,(J,he)=>{J.isText?(D+=J.text.slice(Math.max(a,he)-he,l-he),N=!m):J.isLeaf?(E?D+="function"==typeof E?E(J):E:J.type.spec.leafText&&(D+=J.type.spec.leafText(J)),N=!m):!N&&J.isBlock&&(D+=m,N=!0)},0),D}append(a){if(!a.size)return this;if(!this.size)return a;let l=this.lastChild,m=a.firstChild,E=this.content.slice(),D=0;for(l.isText&&l.sameMarkup(m)&&(E[E.length-1]=l.withText(l.text+m.text),D=1);D<a.content.length;D++)E.push(a.content[D]);return new ze(E,this.size+a.size)}cut(a,l=this.size){if(0==a&&l==this.size)return this;let m=[],E=0;if(l>a)for(let D=0,N=0;N<l;D++){let J=this.content[D],he=N+J.nodeSize;he>a&&((N<a||he>l)&&(J=J.isText?J.cut(Math.max(0,a-N),Math.min(J.text.length,l-N)):J.cut(Math.max(0,a-N-1),Math.min(J.content.size,l-N-1))),m.push(J),E+=J.nodeSize),N=he}return new ze(m,E)}cutByIndex(a,l){return a==l?ze.empty:0==a&&l==this.content.length?this:new ze(this.content.slice(a,l))}replaceChild(a,l){let m=this.content[a];if(m==l)return this;let E=this.content.slice(),D=this.size+l.nodeSize-m.nodeSize;return E[a]=l,new ze(E,D)}addToStart(a){return new ze([a].concat(this.content),this.size+a.nodeSize)}addToEnd(a){return new ze(this.content.concat(a),this.size+a.nodeSize)}eq(a){if(this.content.length!=a.content.length)return!1;for(let l=0;l<this.content.length;l++)if(!this.content[l].eq(a.content[l]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(a){let l=this.content[a];if(!l)throw new RangeError("Index "+a+" out of range for "+this);return l}maybeChild(a){return this.content[a]||null}forEach(a){for(let l=0,m=0;l<this.content.length;l++){let E=this.content[l];a(E,m,l),m+=E.nodeSize}}findDiffStart(a,l=0){return vt(this,a,l)}findDiffEnd(a,l=this.size,m=a.size){return tt(this,a,l,m)}findIndex(a,l=-1){if(0==a)return qt(0,a);if(a==this.size)return qt(this.content.length,a);if(a>this.size||a<0)throw new RangeError(`Position ${a} outside of fragment (${this})`);for(let m=0,E=0;;m++){let N=E+this.child(m).nodeSize;if(N>=a)return N==a||l>0?qt(m+1,N):qt(m,E);E=N}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(a=>a.toJSON()):null}static fromJSON(a,l){if(!l)return ze.empty;if(!Array.isArray(l))throw new RangeError("Invalid input for Fragment.fromJSON");return new ze(l.map(a.nodeFromJSON))}static fromArray(a){if(!a.length)return ze.empty;let l,m=0;for(let E=0;E<a.length;E++){let D=a[E];m+=D.nodeSize,E&&D.isText&&a[E-1].sameMarkup(D)?(l||(l=a.slice(0,E)),l[l.length-1]=D.withText(l[l.length-1].text+D.text)):l&&l.push(D)}return new ze(l||a,m)}static from(a){if(!a)return ze.empty;if(a instanceof ze)return a;if(Array.isArray(a))return this.fromArray(a);if(a.attrs)return new ze([a],a.nodeSize);throw new RangeError("Can not convert "+a+" to a Fragment"+(a.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ze.empty=new ze([],0);const ct={index:0,offset:0};function qt(b,a){return ct.index=b,ct.offset=a,ct}function Je(b,a){if(b===a)return!0;if(!b||"object"!=typeof b||!a||"object"!=typeof a)return!1;let l=Array.isArray(b);if(Array.isArray(a)!=l)return!1;if(l){if(b.length!=a.length)return!1;for(let m=0;m<b.length;m++)if(!Je(b[m],a[m]))return!1}else{for(let m in b)if(!(m in a)||!Je(b[m],a[m]))return!1;for(let m in a)if(!(m in b))return!1}return!0}let Jt=(()=>{class b{constructor(l,m){this.type=l,this.attrs=m}addToSet(l){let m,E=!1;for(let D=0;D<l.length;D++){let N=l[D];if(this.eq(N))return l;if(this.type.excludes(N.type))m||(m=l.slice(0,D));else{if(N.type.excludes(this.type))return l;!E&&N.type.rank>this.type.rank&&(m||(m=l.slice(0,D)),m.push(this),E=!0),m&&m.push(N)}}return m||(m=l.slice()),E||m.push(this),m}removeFromSet(l){for(let m=0;m<l.length;m++)if(this.eq(l[m]))return l.slice(0,m).concat(l.slice(m+1));return l}isInSet(l){for(let m=0;m<l.length;m++)if(this.eq(l[m]))return!0;return!1}eq(l){return this==l||this.type==l.type&&Je(this.attrs,l.attrs)}toJSON(){let l={type:this.type.name};for(let m in this.attrs){l.attrs=this.attrs;break}return l}static fromJSON(l,m){if(!m)throw new RangeError("Invalid input for Mark.fromJSON");let E=l.marks[m.type];if(!E)throw new RangeError(`There is no mark type ${m.type} in this schema`);return E.create(m.attrs)}static sameSet(l,m){if(l==m)return!0;if(l.length!=m.length)return!1;for(let E=0;E<l.length;E++)if(!l[E].eq(m[E]))return!1;return!0}static setFrom(l){if(!l||Array.isArray(l)&&0==l.length)return b.none;if(l instanceof b)return[l];let m=l.slice();return m.sort((E,D)=>E.type.rank-D.type.rank),m}}return b.none=[],b})();class yi extends Error{}class rt{constructor(a,l,m){this.content=a,this.openStart=l,this.openEnd=m}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(a,l){let m=ci(this.content,a+this.openStart,l);return m&&new rt(m,this.openStart,this.openEnd)}removeBetween(a,l){return new rt(bi(this.content,a+this.openStart,l+this.openStart),this.openStart,this.openEnd)}eq(a){return this.content.eq(a.content)&&this.openStart==a.openStart&&this.openEnd==a.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let a={content:this.content.toJSON()};return this.openStart>0&&(a.openStart=this.openStart),this.openEnd>0&&(a.openEnd=this.openEnd),a}static fromJSON(a,l){if(!l)return rt.empty;let m=l.openStart||0,E=l.openEnd||0;if("number"!=typeof m||"number"!=typeof E)throw new RangeError("Invalid input for Slice.fromJSON");return new rt(ze.fromJSON(a,l.content),m,E)}static maxOpen(a,l=!0){let m=0,E=0;for(let D=a.firstChild;D&&!D.isLeaf&&(l||!D.type.spec.isolating);D=D.firstChild)m++;for(let D=a.lastChild;D&&!D.isLeaf&&(l||!D.type.spec.isolating);D=D.lastChild)E++;return new rt(a,m,E)}}function bi(b,a,l){let{index:m,offset:E}=b.findIndex(a),D=b.maybeChild(m),{index:N,offset:J}=b.findIndex(l);if(E==a||D.isText){if(J!=l&&!b.child(N).isText)throw new RangeError("Removing non-flat range");return b.cut(0,a).append(b.cut(l))}if(m!=N)throw new RangeError("Removing non-flat range");return b.replaceChild(m,D.copy(bi(D.content,a-E-1,l-E-1)))}function ci(b,a,l,m){let{index:E,offset:D}=b.findIndex(a),N=b.maybeChild(E);if(D==a||N.isText)return m&&!m.canReplace(E,E,l)?null:b.cut(0,a).append(l).append(b.cut(a));let J=ci(N.content,a-D-1,l);return J&&b.replaceChild(E,N.copy(J))}function ti(b,a,l){if(l.openStart>b.depth)throw new yi("Inserted content deeper than insertion position");if(b.depth-l.openStart!=a.depth-l.openEnd)throw new yi("Inconsistent open depths");return St(b,a,l,0)}function St(b,a,l,m){let E=b.index(m),D=b.node(m);if(E==a.index(m)&&m<b.depth-l.openStart){let N=St(b,a,l,m+1);return D.copy(D.content.replaceChild(E,N))}if(l.content.size){if(l.openStart||l.openEnd||b.depth!=m||a.depth!=m){let{start:N,end:J}=function pn(b,a){let l=a.depth-b.openStart,E=a.node(l).copy(b.content);for(let D=l-1;D>=0;D--)E=a.node(D).copy(ze.from(E));return{start:E.resolveNoCache(b.openStart+l),end:E.resolveNoCache(E.content.size-b.openEnd-l)}}(l,b);return Ii(D,ki(b,N,J,a,m))}{let N=b.parent,J=N.content;return Ii(N,J.cut(0,b.parentOffset).append(l.content).append(J.cut(a.parentOffset)))}}return Ii(D,Zi(b,a,m))}function pi(b,a){if(!a.type.compatibleContent(b.type))throw new yi("Cannot join "+a.type.name+" onto "+b.type.name)}function vi(b,a,l){let m=b.node(l);return pi(m,a.node(l)),m}function Ti(b,a){let l=a.length-1;l>=0&&b.isText&&b.sameMarkup(a[l])?a[l]=b.withText(a[l].text+b.text):a.push(b)}function Ji(b,a,l,m){let E=(a||b).node(l),D=0,N=a?a.index(l):E.childCount;b&&(D=b.index(l),b.depth>l?D++:b.textOffset&&(Ti(b.nodeAfter,m),D++));for(let J=D;J<N;J++)Ti(E.child(J),m);a&&a.depth==l&&a.textOffset&&Ti(a.nodeBefore,m)}function Ii(b,a){return b.type.checkContent(a),b.copy(a)}function ki(b,a,l,m,E){let D=b.depth>E&&vi(b,a,E+1),N=m.depth>E&&vi(l,m,E+1),J=[];return Ji(null,b,E,J),D&&N&&a.index(E)==l.index(E)?(pi(D,N),Ti(Ii(D,ki(b,a,l,m,E+1)),J)):(D&&Ti(Ii(D,Zi(b,a,E+1)),J),Ji(a,l,E,J),N&&Ti(Ii(N,Zi(l,m,E+1)),J)),Ji(m,null,E,J),new ze(J)}function Zi(b,a,l){let m=[];return Ji(null,b,l,m),b.depth>l&&Ti(Ii(vi(b,a,l+1),Zi(b,a,l+1)),m),Ji(a,null,l,m),new ze(m)}rt.empty=new rt(ze.empty,0,0);class ji{constructor(a,l,m){this.pos=a,this.path=l,this.parentOffset=m,this.depth=l.length/3-1}resolveDepth(a){return null==a?this.depth:a<0?this.depth+a:a}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(a){return this.path[3*this.resolveDepth(a)]}index(a){return this.path[3*this.resolveDepth(a)+1]}indexAfter(a){return a=this.resolveDepth(a),this.index(a)+(a!=this.depth||this.textOffset?1:0)}start(a){return 0==(a=this.resolveDepth(a))?0:this.path[3*a-1]+1}end(a){return a=this.resolveDepth(a),this.start(a)+this.node(a).content.size}before(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position before the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]}after(a){if(!(a=this.resolveDepth(a)))throw new RangeError("There is no position after the top-level node");return a==this.depth+1?this.pos:this.path[3*a-1]+this.path[3*a].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let a=this.parent,l=this.index(this.depth);if(l==a.childCount)return null;let m=this.pos-this.path[this.path.length-1],E=a.child(l);return m?a.child(l).cut(m):E}get nodeBefore(){let a=this.index(this.depth),l=this.pos-this.path[this.path.length-1];return l?this.parent.child(a).cut(0,l):0==a?null:this.parent.child(a-1)}posAtIndex(a,l){l=this.resolveDepth(l);let m=this.path[3*l],E=0==l?0:this.path[3*l-1]+1;for(let D=0;D<a;D++)E+=m.child(D).nodeSize;return E}marks(){let a=this.parent,l=this.index();if(0==a.content.size)return Jt.none;if(this.textOffset)return a.child(l).marks;let m=a.maybeChild(l-1),E=a.maybeChild(l);if(!m){let J=m;m=E,E=J}let D=m.marks;for(var N=0;N<D.length;N++)!1===D[N].type.spec.inclusive&&(!E||!D[N].isInSet(E.marks))&&(D=D[N--].removeFromSet(D));return D}marksAcross(a){let l=this.parent.maybeChild(this.index());if(!l||!l.isInline)return null;let m=l.marks,E=a.parent.maybeChild(a.index());for(var D=0;D<m.length;D++)!1===m[D].type.spec.inclusive&&(!E||!m[D].isInSet(E.marks))&&(m=m[D--].removeFromSet(m));return m}sharedDepth(a){for(let l=this.depth;l>0;l--)if(this.start(l)<=a&&this.end(l)>=a)return l;return 0}blockRange(a=this,l){if(a.pos<this.pos)return a.blockRange(this);for(let m=this.depth-(this.parent.inlineContent||this.pos==a.pos?1:0);m>=0;m--)if(a.pos<=this.end(m)&&(!l||l(this.node(m))))return new Wi(this,a,m);return null}sameParent(a){return this.pos-this.parentOffset==a.pos-a.parentOffset}max(a){return a.pos>this.pos?a:this}min(a){return a.pos<this.pos?a:this}toString(){let a="";for(let l=1;l<=this.depth;l++)a+=(a?"/":"")+this.node(l).type.name+"_"+this.index(l-1);return a+":"+this.parentOffset}static resolve(a,l){if(!(l>=0&&l<=a.content.size))throw new RangeError("Position "+l+" out of range");let m=[],E=0,D=l;for(let N=a;;){let{index:J,offset:he}=N.content.findIndex(D),Oe=D-he;if(m.push(N,J,E+he),!Oe||(N=N.child(J),N.isText))break;D=Oe-1,E+=he+1}return new ji(l,m,D)}static resolveCached(a,l){for(let E=0;E<gn.length;E++){let D=gn[E];if(D.pos==l&&D.doc==a)return D}let m=gn[tn]=ji.resolve(a,l);return tn=(tn+1)%di,m}}let gn=[],tn=0,di=12;class Wi{constructor(a,l,m){this.$from=a,this.$to=l,this.depth=m}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _n=Object.create(null);class Ln{constructor(a,l,m,E=Jt.none){this.type=a,this.attrs=l,this.marks=E,this.content=m||ze.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(a){return this.content.child(a)}maybeChild(a){return this.content.maybeChild(a)}forEach(a){this.content.forEach(a)}nodesBetween(a,l,m,E=0){this.content.nodesBetween(a,l,m,E,this)}descendants(a){this.nodesBetween(0,this.content.size,a)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(a,l,m,E){return this.content.textBetween(a,l,m,E)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(a){return this==a||this.sameMarkup(a)&&this.content.eq(a.content)}sameMarkup(a){return this.hasMarkup(a.type,a.attrs,a.marks)}hasMarkup(a,l,m){return this.type==a&&Je(this.attrs,l||a.defaultAttrs||_n)&&Jt.sameSet(this.marks,m||Jt.none)}copy(a=null){return a==this.content?this:new Ln(this.type,this.attrs,a,this.marks)}mark(a){return a==this.marks?this:new Ln(this.type,this.attrs,this.content,a)}cut(a,l=this.content.size){return 0==a&&l==this.content.size?this:this.copy(this.content.cut(a,l))}slice(a,l=this.content.size,m=!1){if(a==l)return rt.empty;let E=this.resolve(a),D=this.resolve(l),N=m?0:E.sharedDepth(l),J=E.start(N),Oe=E.node(N).content.cut(E.pos-J,D.pos-J);return new rt(Oe,E.depth-N,D.depth-N)}replace(a,l,m){return ti(this.resolve(a),this.resolve(l),m)}nodeAt(a){for(let l=this;;){let{index:m,offset:E}=l.content.findIndex(a);if(l=l.maybeChild(m),!l)return null;if(E==a||l.isText)return l;a-=E+1}}childAfter(a){let{index:l,offset:m}=this.content.findIndex(a);return{node:this.content.maybeChild(l),index:l,offset:m}}childBefore(a){if(0==a)return{node:null,index:0,offset:0};let{index:l,offset:m}=this.content.findIndex(a);if(m<a)return{node:this.content.child(l),index:l,offset:m};let E=this.content.child(l-1);return{node:E,index:l-1,offset:m-E.nodeSize}}resolve(a){return ji.resolveCached(this,a)}resolveNoCache(a){return ji.resolve(this,a)}rangeHasMark(a,l,m){let E=!1;return l>a&&this.nodesBetween(a,l,D=>(m.isInSet(D.marks)&&(E=!0),!E)),E}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let a=this.type.name;return this.content.size&&(a+="("+this.content.toStringInner()+")"),Yn(this.marks,a)}contentMatchAt(a){let l=this.type.contentMatch.matchFragment(this.content,0,a);if(!l)throw new Error("Called contentMatchAt on a node with invalid content");return l}canReplace(a,l,m=ze.empty,E=0,D=m.childCount){let N=this.contentMatchAt(a).matchFragment(m,E,D),J=N&&N.matchFragment(this.content,l);if(!J||!J.validEnd)return!1;for(let he=E;he<D;he++)if(!this.type.allowsMarks(m.child(he).marks))return!1;return!0}canReplaceWith(a,l,m,E){if(E&&!this.type.allowsMarks(E))return!1;let D=this.contentMatchAt(a).matchType(m),N=D&&D.matchFragment(this.content,l);return!!N&&N.validEnd}canAppend(a){return a.content.size?this.canReplace(this.childCount,this.childCount,a.content):this.type.compatibleContent(a.type)}check(){this.type.checkContent(this.content);let a=Jt.none;for(let l=0;l<this.marks.length;l++)a=this.marks[l].addToSet(a);if(!Jt.sameSet(a,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(l=>l.type.name)}`);this.content.forEach(l=>l.check())}toJSON(){let a={type:this.type.name};for(let l in this.attrs){a.attrs=this.attrs;break}return this.content.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(l=>l.toJSON())),a}static fromJSON(a,l){if(!l)throw new RangeError("Invalid input for Node.fromJSON");let m=null;if(l.marks){if(!Array.isArray(l.marks))throw new RangeError("Invalid mark data for Node.fromJSON");m=l.marks.map(a.markFromJSON)}if("text"==l.type){if("string"!=typeof l.text)throw new RangeError("Invalid text node in JSON");return a.text(l.text,m)}let E=ze.fromJSON(a,l.content);return a.nodeType(l.type).create(l.attrs,E,m)}}Ln.prototype.text=void 0;class Gn extends Ln{constructor(a,l,m,E){if(super(a,l,null,E),!m)throw new RangeError("Empty text nodes are not allowed");this.text=m}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Yn(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(a,l){return this.text.slice(a,l)}get nodeSize(){return this.text.length}mark(a){return a==this.marks?this:new Gn(this.type,this.attrs,this.text,a)}withText(a){return a==this.text?this:new Gn(this.type,this.attrs,a,this.marks)}cut(a=0,l=this.text.length){return 0==a&&l==this.text.length?this:this.withText(this.text.slice(a,l))}eq(a){return this.sameMarkup(a)&&this.text==a.text}toJSON(){let a=super.toJSON();return a.text=this.text,a}}function Yn(b,a){for(let l=b.length-1;l>=0;l--)a=b[l].type.name+"("+a+")";return a}class on{constructor(a){this.validEnd=a,this.next=[],this.wrapCache=[]}static parse(a,l){let m=new jt(a,l);if(null==m.next)return on.empty;let E=gi(m);m.next&&m.err("Unexpected trailing text");let D=function En(b){let a=Object.create(null);return function l(m){let E=[];m.forEach(N=>{b[N].forEach(({term:J,to:he})=>{if(!J)return;let Oe;for(let je=0;je<E.length;je++)E[je][0]==J&&(Oe=E[je][1]);Ci(b,he).forEach(je=>{Oe||E.push([J,Oe=[]]),-1==Oe.indexOf(je)&&Oe.push(je)})})});let D=a[m.join(",")]=new on(m.indexOf(b.length-1)>-1);for(let N=0;N<E.length;N++){let J=E[N][1].sort(fn);D.next.push({type:E[N][0],next:a[J.join(",")]||l(J)})}return D}(Ci(b,0))}(function Pn(b){let a=[[]];return E(function D(N,J){if("choice"==N.type)return N.exprs.reduce((he,Oe)=>he.concat(D(Oe,J)),[]);if("seq"!=N.type){if("star"==N.type){let he=l();return m(J,he),E(D(N.expr,he),he),[m(he)]}if("plus"==N.type){let he=l();return E(D(N.expr,J),he),E(D(N.expr,he),he),[m(he)]}if("opt"==N.type)return[m(J)].concat(D(N.expr,J));if("range"==N.type){let he=J;for(let Oe=0;Oe<N.min;Oe++){let je=l();E(D(N.expr,he),je),he=je}if(-1==N.max)E(D(N.expr,he),he);else for(let Oe=N.min;Oe<N.max;Oe++){let je=l();m(he,je),E(D(N.expr,he),je),he=je}return[m(he)]}if("name"==N.type)return[m(J,void 0,N.value)];throw new Error("Unknown expr type")}for(let he=0;;he++){let Oe=D(N.exprs[he],J);if(he==N.exprs.length-1)return Oe;E(Oe,J=l())}}(b,0),l()),a;function l(){return a.push([])-1}function m(N,J,he){let Oe={term:he,to:J};return a[N].push(Oe),Oe}function E(N,J){N.forEach(he=>he.to=J)}}(E));return function Dn(b,a){for(let l=0,m=[b];l<m.length;l++){let E=m[l],D=!E.validEnd,N=[];for(let J=0;J<E.next.length;J++){let{type:he,next:Oe}=E.next[J];N.push(he.name),D&&!(he.isText||he.hasRequiredAttrs())&&(D=!1),-1==m.indexOf(Oe)&&m.push(Oe)}D&&a.err("Only non-generatable nodes ("+N.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(D,m),D}matchType(a){for(let l=0;l<this.next.length;l++)if(this.next[l].type==a)return this.next[l].next;return null}matchFragment(a,l=0,m=a.childCount){let E=this;for(let D=l;E&&D<m;D++)E=E.matchType(a.child(D).type);return E}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let a=0;a<this.next.length;a++){let{type:l}=this.next[a];if(!l.isText&&!l.hasRequiredAttrs())return l}return null}compatible(a){for(let l=0;l<this.next.length;l++)for(let m=0;m<a.next.length;m++)if(this.next[l].type==a.next[m].type)return!0;return!1}fillBefore(a,l=!1,m=0){let E=[this];return function D(N,J){let he=N.matchFragment(a,m);if(he&&(!l||he.validEnd))return ze.from(J.map(Oe=>Oe.createAndFill()));for(let Oe=0;Oe<N.next.length;Oe++){let{type:je,next:Gt}=N.next[Oe];if(!je.isText&&!je.hasRequiredAttrs()&&-1==E.indexOf(Gt)){E.push(Gt);let ui=D(Gt,J.concat(je));if(ui)return ui}}return null}(this,[])}findWrapping(a){for(let m=0;m<this.wrapCache.length;m+=2)if(this.wrapCache[m]==a)return this.wrapCache[m+1];let l=this.computeWrapping(a);return this.wrapCache.push(a,l),l}computeWrapping(a){let l=Object.create(null),m=[{match:this,type:null,via:null}];for(;m.length;){let E=m.shift(),D=E.match;if(D.matchType(a)){let N=[];for(let J=E;J.type;J=J.via)N.push(J.type);return N.reverse()}for(let N=0;N<D.next.length;N++){let{type:J,next:he}=D.next[N];!J.isLeaf&&!J.hasRequiredAttrs()&&!(J.name in l)&&(!E.type||he.validEnd)&&(m.push({match:J.contentMatch,type:J,via:E}),l[J.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(a){if(a>=this.next.length)throw new RangeError(`There's no ${a}th edge in this content match`);return this.next[a]}toString(){let a=[];return function l(m){a.push(m);for(let E=0;E<m.next.length;E++)-1==a.indexOf(m.next[E].next)&&l(m.next[E].next)}(this),a.map((m,E)=>{let D=E+(m.validEnd?"*":" ")+" ";for(let N=0;N<m.next.length;N++)D+=(N?", ":"")+m.next[N].type.name+"->"+a.indexOf(m.next[N].next);return D}).join("\n")}}on.empty=new on(!0);class jt{constructor(a,l){this.string=a,this.nodeTypes=l,this.inline=null,this.pos=0,this.tokens=a.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(a){return this.next==a&&(this.pos++||!0)}err(a){throw new SyntaxError(a+" (in content expression '"+this.string+"')")}}function gi(b){let a=[];do{a.push(V(b))}while(b.eat("|"));return 1==a.length?a[0]:{type:"choice",exprs:a}}function V(b){let a=[];do{a.push(Bi(b))}while(b.next&&")"!=b.next&&"|"!=b.next);return 1==a.length?a[0]:{type:"seq",exprs:a}}function Bi(b){let a=function Qi(b){if(b.eat("(")){let a=gi(b);return b.eat(")")||b.err("Missing closing paren"),a}if(!/\W/.test(b.next)){let a=function Xi(b,a){let l=b.nodeTypes,m=l[a];if(m)return[m];let E=[];for(let D in l){let N=l[D];N.groups.indexOf(a)>-1&&E.push(N)}return 0==E.length&&b.err("No node type or group '"+a+"' found"),E}(b,b.next).map(l=>(null==b.inline?b.inline=l.isInline:b.inline!=l.isInline&&b.err("Mixing inline and block content"),{type:"name",value:l}));return b.pos++,1==a.length?a[0]:{type:"choice",exprs:a}}b.err("Unexpected token '"+b.next+"'")}(b);for(;;)if(b.eat("+"))a={type:"plus",expr:a};else if(b.eat("*"))a={type:"star",expr:a};else if(b.eat("?"))a={type:"opt",expr:a};else{if(!b.eat("{"))break;a=en(b,a)}return a}function $i(b){/\D/.test(b.next)&&b.err("Expected number, got '"+b.next+"'");let a=Number(b.next);return b.pos++,a}function en(b,a){let l=$i(b),m=l;return b.eat(",")&&(m="}"!=b.next?$i(b):-1),b.eat("}")||b.err("Unclosed braced range"),{type:"range",min:l,max:m,expr:a}}function fn(b,a){return a-b}function Ci(b,a){let l=[];return function m(E){let D=b[E];if(1==D.length&&!D[0].term)return m(D[0].to);l.push(E);for(let N=0;N<D.length;N++){let{term:J,to:he}=D[N];!J&&-1==l.indexOf(he)&&m(he)}}(a),l.sort(fn)}function cn(b){let a=Object.create(null);for(let l in b){let m=b[l];if(!m.hasDefault)return null;a[l]=m.default}return a}function br(b,a){let l=Object.create(null);for(let m in b){let E=a&&a[m];if(void 0===E){let D=b[m];if(!D.hasDefault)throw new RangeError("No value supplied for attribute "+m);E=D.default}l[m]=E}return l}function wi(b){let a=Object.create(null);if(b)for(let l in b)a[l]=new zn(b[l]);return a}class Jn{constructor(a,l,m){this.name=a,this.schema=l,this.spec=m,this.markSet=null,this.groups=m.group?m.group.split(" "):[],this.attrs=wi(m.attrs),this.defaultAttrs=cn(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(m.inline||"text"==a),this.isText="text"==a}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==on.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let a in this.attrs)if(this.attrs[a].isRequired)return!0;return!1}compatibleContent(a){return this==a||this.contentMatch.compatible(a.contentMatch)}computeAttrs(a){return!a&&this.defaultAttrs?this.defaultAttrs:br(this.attrs,a)}create(a=null,l,m){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ln(this,this.computeAttrs(a),ze.from(l),Jt.setFrom(m))}createChecked(a=null,l,m){return l=ze.from(l),this.checkContent(l),new Ln(this,this.computeAttrs(a),l,Jt.setFrom(m))}createAndFill(a=null,l,m){if(a=this.computeAttrs(a),(l=ze.from(l)).size){let N=this.contentMatch.fillBefore(l);if(!N)return null;l=N.append(l)}let E=this.contentMatch.matchFragment(l),D=E&&E.fillBefore(ze.empty,!0);return D?new Ln(this,a,l.append(D),Jt.setFrom(m)):null}validContent(a){let l=this.contentMatch.matchFragment(a);if(!l||!l.validEnd)return!1;for(let m=0;m<a.childCount;m++)if(!this.allowsMarks(a.child(m).marks))return!1;return!0}checkContent(a){if(!this.validContent(a))throw new RangeError(`Invalid content for node ${this.name}: ${a.toString().slice(0,50)}`)}allowsMarkType(a){return null==this.markSet||this.markSet.indexOf(a)>-1}allowsMarks(a){if(null==this.markSet)return!0;for(let l=0;l<a.length;l++)if(!this.allowsMarkType(a[l].type))return!1;return!0}allowedMarks(a){if(null==this.markSet)return a;let l;for(let m=0;m<a.length;m++)this.allowsMarkType(a[m].type)?l&&l.push(a[m]):l||(l=a.slice(0,m));return l?l.length?l:Jt.none:a}static compile(a,l){let m=Object.create(null);a.forEach((D,N)=>m[D]=new Jn(D,l,N));let E=l.spec.topNode||"doc";if(!m[E])throw new RangeError("Schema is missing its top node type ('"+E+"')");if(!m.text)throw new RangeError("Every schema needs a 'text' type");for(let D in m.text.attrs)throw new RangeError("The text node type should not have attributes");return m}}class zn{constructor(a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default}get isRequired(){return!this.hasDefault}}class On{constructor(a,l,m,E){this.name=a,this.rank=l,this.schema=m,this.spec=E,this.attrs=wi(E.attrs),this.excluded=null;let D=cn(this.attrs);this.instance=D?new Jt(this,D):null}create(a=null){return!a&&this.instance?this.instance:new Jt(this,br(this.attrs,a))}static compile(a,l){let m=Object.create(null),E=0;return a.forEach((D,N)=>m[D]=new On(D,E++,l,N)),m}removeFromSet(a){for(var l=0;l<a.length;l++)a[l].type==this&&(a=a.slice(0,l).concat(a.slice(l+1)),l--);return a}isInSet(a){for(let l=0;l<a.length;l++)if(a[l].type==this)return a[l]}excludes(a){return this.excluded.indexOf(a)>-1}}function fr(b,a){let l=[];for(let m=0;m<a.length;m++){let E=a[m],D=b.marks[E],N=D;if(D)l.push(D);else for(let J in b.marks){let he=b.marks[J];("_"==E||he.spec.group&&he.spec.group.split(" ").indexOf(E)>-1)&&l.push(N=he)}if(!N)throw new SyntaxError("Unknown mark type: '"+a[m]+"'")}return l}class Yr{constructor(a,l){this.schema=a,this.rules=l,this.tags=[],this.styles=[],l.forEach(m=>{m.tag?this.tags.push(m):m.style&&this.styles.push(m)}),this.normalizeLists=!this.tags.some(m=>{if(!/^(ul|ol)\b/.test(m.tag)||!m.node)return!1;let E=a.nodes[m.node];return E.contentMatch.matchType(E)})}parse(a,l={}){let m=new Mt(this,l,!1);return m.addAll(a,l.from,l.to),m.finish()}parseSlice(a,l={}){let m=new Mt(this,l,!0);return m.addAll(a,l.from,l.to),rt.maxOpen(m.finish())}matchTag(a,l,m){for(let E=m?this.tags.indexOf(m)+1:0;E<this.tags.length;E++){let D=this.tags[E];if(Zt(a,D.tag)&&(void 0===D.namespace||a.namespaceURI==D.namespace)&&(!D.context||l.matchesContext(D.context))){if(D.getAttrs){let N=D.getAttrs(a);if(!1===N)continue;D.attrs=N||void 0}return D}}}matchStyle(a,l,m,E){for(let D=E?this.styles.indexOf(E)+1:0;D<this.styles.length;D++){let N=this.styles[D],J=N.style;if(!(0!=J.indexOf(a)||N.context&&!m.matchesContext(N.context)||J.length>a.length&&(61!=J.charCodeAt(a.length)||J.slice(a.length+1)!=l))){if(N.getAttrs){let he=N.getAttrs(l);if(!1===he)continue;N.attrs=he||void 0}return N}}}static schemaRules(a){let l=[];function m(E){let D=null==E.priority?50:E.priority,N=0;for(;N<l.length;N++){let J=l[N];if((null==J.priority?50:J.priority)<D)break}l.splice(N,0,E)}for(let E in a.marks){let D=a.marks[E].spec.parseDOM;D&&D.forEach(N=>{m(N=Nt(N)),N.mark||N.ignore||N.clearMark||(N.mark=E)})}for(let E in a.nodes){let D=a.nodes[E].spec.parseDOM;D&&D.forEach(N=>{m(N=Nt(N)),N.node||N.ignore||N.mark||(N.node=E)})}return l}static fromSchema(a){return a.cached.domParser||(a.cached.domParser=new Yr(a,Yr.schemaRules(a)))}}const Nn={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_r={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ur={ol:!0,ul:!0};function Ze(b,a,l){return null!=a?(a?1:0)|("full"===a?2:0):b&&"pre"==b.whitespace?3:-5&l}class Qe{constructor(a,l,m,E,D,N,J){this.type=a,this.attrs=l,this.marks=m,this.pendingMarks=E,this.solid=D,this.options=J,this.content=[],this.activeMarks=Jt.none,this.stashMarks=[],this.match=N||(4&J?null:a.contentMatch)}findWrapping(a){if(!this.match){if(!this.type)return[];let l=this.type.contentMatch.fillBefore(ze.from(a));if(!l){let E,m=this.type.contentMatch;return(E=m.findWrapping(a.type))?(this.match=m,E):null}this.match=this.type.contentMatch.matchFragment(l)}return this.match.findWrapping(a.type)}finish(a){if(!(1&this.options)){let E,m=this.content[this.content.length-1];if(m&&m.isText&&(E=/[ \t\r\n\u000c]+$/.exec(m.text))){let D=m;m.text.length==E[0].length?this.content.pop():this.content[this.content.length-1]=D.withText(D.text.slice(0,D.text.length-E[0].length))}}let l=ze.from(this.content);return!a&&this.match&&(l=l.append(this.match.fillBefore(ze.empty,!0))),this.type?this.type.create(this.attrs,l,this.marks):l}popFromStashMark(a){for(let l=this.stashMarks.length-1;l>=0;l--)if(a.eq(this.stashMarks[l]))return this.stashMarks.splice(l,1)[0]}applyPending(a){for(let l=0,m=this.pendingMarks;l<m.length;l++){let E=m[l];(this.type?this.type.allowsMarkType(E.type):ae(E.type,a))&&!E.isInSet(this.activeMarks)&&(this.activeMarks=E.addToSet(this.activeMarks),this.pendingMarks=E.removeFromSet(this.pendingMarks))}}inlineContext(a){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:a.parentNode&&!Nn.hasOwnProperty(a.parentNode.nodeName.toLowerCase())}}class Mt{constructor(a,l,m){this.parser=a,this.options=l,this.isOpen=m,this.open=0;let D,E=l.topNode,N=Ze(null,l.preserveWhitespace,0)|(m?4:0);D=E?new Qe(E.type,E.attrs,Jt.none,Jt.none,!0,l.topMatch||E.type.contentMatch,N):new Qe(m?null:a.schema.topNodeType,null,Jt.none,Jt.none,!0,null,N),this.nodes=[D],this.find=l.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(a){3==a.nodeType?this.addTextNode(a):1==a.nodeType&&this.addElement(a)}withStyleRules(a,l){let m=a.getAttribute("style");if(!m)return l();let E=this.readStyles(function Pt(b){let l,a=/\s*([\w-]+)\s*:\s*([^;]+)/g,m=[];for(;l=a.exec(b);)m.push(l[1],l[2].trim());return m}(m));if(!E)return;let[D,N]=E,J=this.top;for(let he=0;he<N.length;he++)this.removePendingMark(N[he],J);for(let he=0;he<D.length;he++)this.addPendingMark(D[he]);l();for(let he=0;he<D.length;he++)this.removePendingMark(D[he],J);for(let he=0;he<N.length;he++)this.addPendingMark(N[he])}addTextNode(a){let l=a.nodeValue,m=this.top;if(2&m.options||m.inlineContext(a)||/[^ \t\r\n\u000c]/.test(l)){if(1&m.options)l=2&m.options?l.replace(/\r\n?/g,"\n"):l.replace(/\r?\n|\r/g," ");else if(l=l.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(l)&&this.open==this.nodes.length-1){let E=m.content[m.content.length-1],D=a.previousSibling;(!E||D&&"BR"==D.nodeName||E.isText&&/[ \t\r\n\u000c]$/.test(E.text))&&(l=l.slice(1))}l&&this.insertNode(this.parser.schema.text(l)),this.findInText(a)}else this.findInside(a)}addElement(a,l){let E,m=a.nodeName.toLowerCase();ur.hasOwnProperty(m)&&this.parser.normalizeLists&&function Tt(b){for(let a=b.firstChild,l=null;a;a=a.nextSibling){let m=1==a.nodeType?a.nodeName.toLowerCase():null;m&&ur.hasOwnProperty(m)&&l?(l.appendChild(a),a=l):"li"==m?l=a:m&&(l=null)}}(a);let D=this.options.ruleFromNode&&this.options.ruleFromNode(a)||(E=this.parser.matchTag(a,this,l));if(D?D.ignore:_r.hasOwnProperty(m))this.findInside(a),this.ignoreFallback(a);else if(!D||D.skip||D.closeParent){D&&D.closeParent?this.open=Math.max(0,this.open-1):D&&D.skip.nodeType&&(a=D.skip);let N,J=this.top,he=this.needsBlock;if(Nn.hasOwnProperty(m))J.content.length&&J.content[0].isInline&&this.open&&(this.open--,J=this.top),N=!0,J.type||(this.needsBlock=!0);else if(!a.firstChild)return void this.leafFallback(a);D&&D.skip?this.addAll(a):this.withStyleRules(a,()=>this.addAll(a)),N&&this.sync(J),this.needsBlock=he}else this.withStyleRules(a,()=>{this.addElementByRule(a,D,!1===D.consuming?E:void 0)})}leafFallback(a){"BR"==a.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(a.ownerDocument.createTextNode("\n"))}ignoreFallback(a){"BR"==a.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(a){let l=Jt.none,m=Jt.none;for(let E=0;E<a.length;E+=2)for(let D;;){let N=this.parser.matchStyle(a[E],a[E+1],this,D);if(!N)break;if(N.ignore)return null;if(N.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(J=>{N.clearMark(J)&&(m=J.addToSet(m))}):l=this.parser.schema.marks[N.mark].create(N.attrs).addToSet(l),!1!==N.consuming)break;D=N}return[l,m]}addElementByRule(a,l,m){let E,D,N;l.node?(D=this.parser.schema.nodes[l.node],D.isLeaf?this.insertNode(D.create(l.attrs))||this.leafFallback(a):E=this.enter(D,l.attrs||null,l.preserveWhitespace)):(N=this.parser.schema.marks[l.mark].create(l.attrs),this.addPendingMark(N));let J=this.top;if(D&&D.isLeaf)this.findInside(a);else if(m)this.addElement(a,m);else if(l.getContent)this.findInside(a),l.getContent(a,this.parser.schema).forEach(he=>this.insertNode(he));else{let he=a;"string"==typeof l.contentElement?he=a.querySelector(l.contentElement):"function"==typeof l.contentElement?he=l.contentElement(a):l.contentElement&&(he=l.contentElement),this.findAround(a,he,!0),this.addAll(he)}E&&this.sync(J)&&this.open--,N&&this.removePendingMark(N,J)}addAll(a,l,m){let E=l||0;for(let D=l?a.childNodes[l]:a.firstChild,N=null==m?null:a.childNodes[m];D!=N;D=D.nextSibling,++E)this.findAtPoint(a,E),this.addDOM(D);this.findAtPoint(a,E)}findPlace(a){let l,m;for(let E=this.open;E>=0;E--){let D=this.nodes[E],N=D.findWrapping(a);if(N&&(!l||l.length>N.length)&&(l=N,m=D,!N.length)||D.solid)break}if(!l)return!1;this.sync(m);for(let E=0;E<l.length;E++)this.enterInner(l[E],null,!1);return!0}insertNode(a){if(a.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&this.enterInner(l)}if(this.findPlace(a)){this.closeExtra();let l=this.top;l.applyPending(a.type),l.match&&(l.match=l.match.matchType(a.type));let m=l.activeMarks;for(let E=0;E<a.marks.length;E++)(!l.type||l.type.allowsMarkType(a.marks[E].type))&&(m=a.marks[E].addToSet(m));return l.content.push(a.mark(m)),!0}return!1}enter(a,l,m){let E=this.findPlace(a.create(l));return E&&this.enterInner(a,l,!0,m),E}enterInner(a,l=null,m=!1,E){this.closeExtra();let D=this.top;D.applyPending(a),D.match=D.match&&D.match.matchType(a);let N=Ze(a,E,D.options);4&D.options&&0==D.content.length&&(N|=4),this.nodes.push(new Qe(a,l,D.activeMarks,D.pendingMarks,m,null,N)),this.open++}closeExtra(a=!1){let l=this.nodes.length-1;if(l>this.open){for(;l>this.open;l--)this.nodes[l-1].content.push(this.nodes[l].finish(a));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(a){for(let l=this.open;l>=0;l--)if(this.nodes[l]==a)return this.open=l,!0;return!1}get currentPos(){this.closeExtra();let a=0;for(let l=this.open;l>=0;l--){let m=this.nodes[l].content;for(let E=m.length-1;E>=0;E--)a+=m[E].nodeSize;l&&a++}return a}findAtPoint(a,l){if(this.find)for(let m=0;m<this.find.length;m++)this.find[m].node==a&&this.find[m].offset==l&&(this.find[m].pos=this.currentPos)}findInside(a){if(this.find)for(let l=0;l<this.find.length;l++)null==this.find[l].pos&&1==a.nodeType&&a.contains(this.find[l].node)&&(this.find[l].pos=this.currentPos)}findAround(a,l,m){if(a!=l&&this.find)for(let E=0;E<this.find.length;E++)null==this.find[E].pos&&1==a.nodeType&&a.contains(this.find[E].node)&&l.compareDocumentPosition(this.find[E].node)&(m?2:4)&&(this.find[E].pos=this.currentPos)}findInText(a){if(this.find)for(let l=0;l<this.find.length;l++)this.find[l].node==a&&(this.find[l].pos=this.currentPos-(a.nodeValue.length-this.find[l].offset))}matchesContext(a){if(a.indexOf("|")>-1)return a.split(/\s*\|\s*/).some(this.matchesContext,this);let l=a.split("/"),m=this.options.context,E=!(this.isOpen||m&&m.parent.type!=this.nodes[0].type),D=(E?0:1)-(m?m.depth+1:0),N=(J,he)=>{for(;J>=0;J--){let Oe=l[J];if(""==Oe){if(J==l.length-1||0==J)continue;for(;he>=D;he--)if(N(J-1,he))return!0;return!1}{let je=he>0||0==he&&E?this.nodes[he].type:m&&he>=D?m.node(he-D).type:null;if(!je||je.name!=Oe&&-1==je.groups.indexOf(Oe))return!1;he--}}return!0};return N(l.length-1,this.open)}textblockFromContext(){let a=this.options.context;if(a)for(let l=a.depth;l>=0;l--){let m=a.node(l).contentMatchAt(a.indexAfter(l)).defaultType;if(m&&m.isTextblock&&m.defaultAttrs)return m}for(let l in this.parser.schema.nodes){let m=this.parser.schema.nodes[l];if(m.isTextblock&&m.defaultAttrs)return m}}addPendingMark(a){let l=function Ne(b,a){for(let l=0;l<a.length;l++)if(b.eq(a[l]))return a[l]}(a,this.top.pendingMarks);l&&this.top.stashMarks.push(l),this.top.pendingMarks=a.addToSet(this.top.pendingMarks)}removePendingMark(a,l){for(let m=this.open;m>=0;m--){let E=this.nodes[m];if(E.pendingMarks.lastIndexOf(a)>-1)E.pendingMarks=a.removeFromSet(E.pendingMarks);else{E.activeMarks=a.removeFromSet(E.activeMarks);let N=E.popFromStashMark(a);N&&E.type&&E.type.allowsMarkType(N.type)&&(E.activeMarks=N.addToSet(E.activeMarks))}if(E==l)break}}}function Zt(b,a){return(b.matches||b.msMatchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector).call(b,a)}function Nt(b){let a={};for(let l in b)a[l]=b[l];return a}function ae(b,a){let l=a.schema.nodes;for(let m in l){let E=l[m];if(!E.allowsMarkType(b))continue;let D=[],N=J=>{D.push(J);for(let he=0;he<J.edgeCount;he++){let{type:Oe,next:je}=J.edge(he);if(Oe==a||D.indexOf(je)<0&&N(je))return!0}};if(N(E.contentMatch))return!0}}class et{constructor(a,l){this.nodes=a,this.marks=l}serializeFragment(a,l={},m){m||(m=$t(l).createDocumentFragment());let E=m,D=[];return a.forEach(N=>{if(D.length||N.marks.length){let J=0,he=0;for(;J<D.length&&he<N.marks.length;){let Oe=N.marks[he];if(this.marks[Oe.type.name]){if(!Oe.eq(D[J][0])||!1===Oe.type.spec.spanning)break;J++,he++}else he++}for(;J<D.length;)E=D.pop()[1];for(;he<N.marks.length;){let Oe=N.marks[he++],je=this.serializeMark(Oe,N.isInline,l);je&&(D.push([Oe,E]),E.appendChild(je.dom),E=je.contentDOM||je.dom)}}E.appendChild(this.serializeNodeInner(N,l))}),m}serializeNodeInner(a,l){let{dom:m,contentDOM:E}=et.renderSpec($t(l),this.nodes[a.type.name](a));if(E){if(a.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(a.content,l,E)}return m}serializeNode(a,l={}){let m=this.serializeNodeInner(a,l);for(let E=a.marks.length-1;E>=0;E--){let D=this.serializeMark(a.marks[E],a.isInline,l);D&&((D.contentDOM||D.dom).appendChild(m),m=D.dom)}return m}serializeMark(a,l,m={}){let E=this.marks[a.type.name];return E&&et.renderSpec($t(m),E(a,l))}static renderSpec(a,l,m=null){if("string"==typeof l)return{dom:a.createTextNode(l)};if(null!=l.nodeType)return{dom:l};if(l.dom&&null!=l.dom.nodeType)return l;let E=l[0],D=E.indexOf(" ");D>0&&(m=E.slice(0,D),E=E.slice(D+1));let N,J=m?a.createElementNS(m,E):a.createElement(E),he=l[1],Oe=1;if(he&&"object"==typeof he&&null==he.nodeType&&!Array.isArray(he)){Oe=2;for(let je in he)if(null!=he[je]){let Gt=je.indexOf(" ");Gt>0?J.setAttributeNS(je.slice(0,Gt),je.slice(Gt+1),he[je]):J.setAttribute(je,he[je])}}for(let je=Oe;je<l.length;je++){let Gt=l[je];if(0===Gt){if(je<l.length-1||je>Oe)throw new RangeError("Content hole must be the only child of its parent node");return{dom:J,contentDOM:J}}{let{dom:ui,contentDOM:Di}=et.renderSpec(a,Gt,m);if(J.appendChild(ui),Di){if(N)throw new RangeError("Multiple content holes");N=Di}}}return{dom:J,contentDOM:N}}static fromSchema(a){return a.cached.domSerializer||(a.cached.domSerializer=new et(this.nodesFromSchema(a),this.marksFromSchema(a)))}static nodesFromSchema(a){let l=Vt(a.nodes);return l.text||(l.text=m=>m.text),l}static marksFromSchema(a){return Vt(a.marks)}}function Vt(b){let a={};for(let l in b){let m=b[l].spec.toDOM;m&&(a[l]=m)}return a}function $t(b){return b.document||window.document}const wt=Math.pow(2,16);function At(b,a){return b+a*wt}function st(b){return 65535&b}class Yi{constructor(a,l,m){this.pos=a,this.delInfo=l,this.recover=m}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Ei{constructor(a,l=!1){if(this.ranges=a,this.inverted=l,!a.length&&Ei.empty)return Ei.empty}recover(a){let l=0,m=st(a);if(!this.inverted)for(let E=0;E<m;E++)l+=this.ranges[3*E+2]-this.ranges[3*E+1];return this.ranges[3*m]+l+function ot(b){return(b-(65535&b))/wt}(a)}mapResult(a,l=1){return this._map(a,l,!1)}map(a,l=1){return this._map(a,l,!0)}_map(a,l,m){let E=0,D=this.inverted?2:1,N=this.inverted?1:2;for(let J=0;J<this.ranges.length;J+=3){let he=this.ranges[J]-(this.inverted?E:0);if(he>a)break;let Oe=this.ranges[J+D],je=this.ranges[J+N],Gt=he+Oe;if(a<=Gt){let Di=he+E+((Oe?a==he?-1:a==Gt?1:l:l)<0?0:je);if(m)return Di;let _i=a==(l<0?he:Gt)?null:At(J/3,a-he),wn=a==he?2:a==Gt?1:4;return(l<0?a!=he:a!=Gt)&&(wn|=8),new Yi(Di,wn,_i)}E+=je-Oe}return m?a+E:new Yi(a+E,0,null)}touches(a,l){let m=0,E=st(l),D=this.inverted?2:1,N=this.inverted?1:2;for(let J=0;J<this.ranges.length;J+=3){let he=this.ranges[J]-(this.inverted?m:0);if(he>a)break;let Oe=this.ranges[J+D];if(a<=he+Oe&&J==3*E)return!0;m+=this.ranges[J+N]-Oe}return!1}forEach(a){let l=this.inverted?2:1,m=this.inverted?1:2;for(let E=0,D=0;E<this.ranges.length;E+=3){let N=this.ranges[E],J=N-(this.inverted?D:0),he=N+(this.inverted?0:D),Oe=this.ranges[E+l],je=this.ranges[E+m];a(J,J+Oe,he,he+je),D+=je-Oe}}invert(){return new Ei(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(a){return 0==a?Ei.empty:new Ei(a<0?[0,-a,0]:[0,0,a])}}Ei.empty=new Ei([]);class Ki{constructor(a=[],l,m=0,E=a.length){this.maps=a,this.mirror=l,this.from=m,this.to=E}slice(a=0,l=this.maps.length){return new Ki(this.maps,this.mirror,a,l)}copy(){return new Ki(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(a,l){this.to=this.maps.push(a),null!=l&&this.setMirror(this.maps.length-1,l)}appendMapping(a){for(let l=0,m=this.maps.length;l<a.maps.length;l++){let E=a.getMirror(l);this.appendMap(a.maps[l],null!=E&&E<l?m+E:void 0)}}getMirror(a){if(this.mirror)for(let l=0;l<this.mirror.length;l++)if(this.mirror[l]==a)return this.mirror[l+(l%2?-1:1)]}setMirror(a,l){this.mirror||(this.mirror=[]),this.mirror.push(a,l)}appendMappingInverted(a){for(let l=a.maps.length-1,m=this.maps.length+a.maps.length;l>=0;l--){let E=a.getMirror(l);this.appendMap(a.maps[l].invert(),null!=E&&E>l?m-E-1:void 0)}}invert(){let a=new Ki;return a.appendMappingInverted(this),a}map(a,l=1){if(this.mirror)return this._map(a,l,!0);for(let m=this.from;m<this.to;m++)a=this.maps[m].map(a,l);return a}mapResult(a,l=1){return this._map(a,l,!1)}_map(a,l,m){let E=0;for(let D=this.from;D<this.to;D++){let J=this.maps[D].mapResult(a,l);if(null!=J.recover){let he=this.getMirror(D);if(null!=he&&he>D&&he<this.to){D=he,a=this.maps[he].recover(J.recover);continue}}E|=J.delInfo,a=J.pos}return m?a:new Yi(a,E,null)}}const Ct=Object.create(null);class Ot{getMap(){return Ei.empty}merge(a){return null}static fromJSON(a,l){if(!l||!l.stepType)throw new RangeError("Invalid input for Step.fromJSON");let m=Ct[l.stepType];if(!m)throw new RangeError(`No step type ${l.stepType} defined`);return m.fromJSON(a,l)}static jsonID(a,l){if(a in Ct)throw new RangeError("Duplicate use of step JSON ID "+a);return Ct[a]=l,l.prototype.jsonID=a,l}}class xe{constructor(a,l){this.doc=a,this.failed=l}static ok(a){return new xe(a,null)}static fail(a){return new xe(null,a)}static fromReplace(a,l,m,E){try{return xe.ok(a.replace(l,m,E))}catch(D){if(D instanceof yi)return xe.fail(D.message);throw D}}}function bt(b,a,l){let m=[];for(let E=0;E<b.childCount;E++){let D=b.child(E);D.content.size&&(D=D.copy(bt(D.content,a,D))),D.isInline&&(D=a(D,l,E)),m.push(D)}return ze.fromArray(m)}class Yt extends Ot{constructor(a,l,m){super(),this.from=a,this.to=l,this.mark=m}apply(a){let l=a.slice(this.from,this.to),m=a.resolve(this.from),E=m.node(m.sharedDepth(this.to)),D=new rt(bt(l.content,(N,J)=>N.isAtom&&J.type.allowsMarkType(this.mark.type)?N.mark(this.mark.addToSet(N.marks)):N,E),l.openStart,l.openEnd);return xe.fromReplace(a,this.from,this.to,D)}invert(){return new Xe(this.from,this.to,this.mark)}map(a){let l=a.mapResult(this.from,1),m=a.mapResult(this.to,-1);return l.deleted&&m.deleted||l.pos>=m.pos?null:new Yt(l.pos,m.pos,this.mark)}merge(a){return a instanceof Yt&&a.mark.eq(this.mark)&&this.from<=a.to&&this.to>=a.from?new Yt(Math.min(this.from,a.from),Math.max(this.to,a.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(a,l){if("number"!=typeof l.from||"number"!=typeof l.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yt(l.from,l.to,a.markFromJSON(l.mark))}}Ot.jsonID("addMark",Yt);class Xe extends Ot{constructor(a,l,m){super(),this.from=a,this.to=l,this.mark=m}apply(a){let l=a.slice(this.from,this.to),m=new rt(bt(l.content,E=>E.mark(this.mark.removeFromSet(E.marks)),a),l.openStart,l.openEnd);return xe.fromReplace(a,this.from,this.to,m)}invert(){return new Yt(this.from,this.to,this.mark)}map(a){let l=a.mapResult(this.from,1),m=a.mapResult(this.to,-1);return l.deleted&&m.deleted||l.pos>=m.pos?null:new Xe(l.pos,m.pos,this.mark)}merge(a){return a instanceof Xe&&a.mark.eq(this.mark)&&this.from<=a.to&&this.to>=a.from?new Xe(Math.min(this.from,a.from),Math.max(this.to,a.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(a,l){if("number"!=typeof l.from||"number"!=typeof l.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Xe(l.from,l.to,a.markFromJSON(l.mark))}}Ot.jsonID("removeMark",Xe);class Ut extends Ot{constructor(a,l){super(),this.pos=a,this.mark=l}apply(a){let l=a.nodeAt(this.pos);if(!l)return xe.fail("No node at mark step's position");let m=l.type.create(l.attrs,null,this.mark.addToSet(l.marks));return xe.fromReplace(a,this.pos,this.pos+1,new rt(ze.from(m),0,l.isLeaf?0:1))}invert(a){let l=a.nodeAt(this.pos);if(l){let m=this.mark.addToSet(l.marks);if(m.length==l.marks.length){for(let E=0;E<l.marks.length;E++)if(!l.marks[E].isInSet(m))return new Ut(this.pos,l.marks[E]);return new Ut(this.pos,this.mark)}}return new pe(this.pos,this.mark)}map(a){let l=a.mapResult(this.pos,1);return l.deletedAfter?null:new Ut(l.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(a,l){if("number"!=typeof l.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ut(l.pos,a.markFromJSON(l.mark))}}Ot.jsonID("addNodeMark",Ut);class pe extends Ot{constructor(a,l){super(),this.pos=a,this.mark=l}apply(a){let l=a.nodeAt(this.pos);if(!l)return xe.fail("No node at mark step's position");let m=l.type.create(l.attrs,null,this.mark.removeFromSet(l.marks));return xe.fromReplace(a,this.pos,this.pos+1,new rt(ze.from(m),0,l.isLeaf?0:1))}invert(a){let l=a.nodeAt(this.pos);return l&&this.mark.isInSet(l.marks)?new Ut(this.pos,this.mark):this}map(a){let l=a.mapResult(this.pos,1);return l.deletedAfter?null:new pe(l.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(a,l){if("number"!=typeof l.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new pe(l.pos,a.markFromJSON(l.mark))}}Ot.jsonID("removeNodeMark",pe);class i extends Ot{constructor(a,l,m,E=!1){super(),this.from=a,this.to=l,this.slice=m,this.structure=E}apply(a){return this.structure&&d(a,this.from,this.to)?xe.fail("Structure replace would overwrite content"):xe.fromReplace(a,this.from,this.to,this.slice)}getMap(){return new Ei([this.from,this.to-this.from,this.slice.size])}invert(a){return new i(this.from,this.from+this.slice.size,a.slice(this.from,this.to))}map(a){let l=a.mapResult(this.from,1),m=a.mapResult(this.to,-1);return l.deletedAcross&&m.deletedAcross?null:new i(l.pos,Math.max(l.pos,m.pos),this.slice)}merge(a){if(!(a instanceof i)||a.structure||this.structure)return null;if(this.from+this.slice.size!=a.from||this.slice.openEnd||a.slice.openStart){if(a.to!=this.from||this.slice.openStart||a.slice.openEnd)return null;{let l=this.slice.size+a.slice.size==0?rt.empty:new rt(a.slice.content.append(this.slice.content),a.slice.openStart,this.slice.openEnd);return new i(a.from,this.to,l,this.structure)}}{let l=this.slice.size+a.slice.size==0?rt.empty:new rt(this.slice.content.append(a.slice.content),this.slice.openStart,a.slice.openEnd);return new i(this.from,this.to+(a.to-a.from),l,this.structure)}}toJSON(){let a={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(a.slice=this.slice.toJSON()),this.structure&&(a.structure=!0),a}static fromJSON(a,l){if("number"!=typeof l.from||"number"!=typeof l.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(l.from,l.to,rt.fromJSON(a,l.slice),!!l.structure)}}Ot.jsonID("replace",i);class r extends Ot{constructor(a,l,m,E,D,N,J=!1){super(),this.from=a,this.to=l,this.gapFrom=m,this.gapTo=E,this.slice=D,this.insert=N,this.structure=J}apply(a){if(this.structure&&(d(a,this.from,this.gapFrom)||d(a,this.gapTo,this.to)))return xe.fail("Structure gap-replace would overwrite content");let l=a.slice(this.gapFrom,this.gapTo);if(l.openStart||l.openEnd)return xe.fail("Gap is not a flat range");let m=this.slice.insertAt(this.insert,l.content);return m?xe.fromReplace(a,this.from,this.to,m):xe.fail("Content does not fit in gap")}getMap(){return new Ei([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(a){let l=this.gapTo-this.gapFrom;return new r(this.from,this.from+this.slice.size+l,this.from+this.insert,this.from+this.insert+l,a.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(a){let l=a.mapResult(this.from,1),m=a.mapResult(this.to,-1),E=a.map(this.gapFrom,-1),D=a.map(this.gapTo,1);return l.deletedAcross&&m.deletedAcross||E<l.pos||D>m.pos?null:new r(l.pos,m.pos,E,D,this.slice,this.insert,this.structure)}toJSON(){let a={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(a.slice=this.slice.toJSON()),this.structure&&(a.structure=!0),a}static fromJSON(a,l){if("number"!=typeof l.from||"number"!=typeof l.to||"number"!=typeof l.gapFrom||"number"!=typeof l.gapTo||"number"!=typeof l.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new r(l.from,l.to,l.gapFrom,l.gapTo,rt.fromJSON(a,l.slice),l.insert,!!l.structure)}}function d(b,a,l){let m=b.resolve(a),E=l-a,D=m.depth;for(;E>0&&D>0&&m.indexAfter(D)==m.node(D).childCount;)D--,E--;if(E>0){let N=m.node(D).maybeChild(m.indexAfter(D));for(;E>0;){if(!N||N.isLeaf)return!0;N=N.firstChild,E--}}return!1}function I(b,a,l){return(0==a||b.canReplace(a,b.childCount))&&(l==b.childCount||b.canReplace(0,l))}function R(b){let l=b.parent.content.cutByIndex(b.startIndex,b.endIndex);for(let m=b.depth;;--m){let E=b.$from.node(m),D=b.$from.index(m),N=b.$to.indexAfter(m);if(m<b.depth&&E.canReplace(D,N,l))return m;if(0==m||E.type.spec.isolating||!I(E,D,N))break}return null}function W(b,a,l=null,m=b){let E=function Q(b,a){let{parent:l,startIndex:m,endIndex:E}=b,D=l.contentMatchAt(m).findWrapping(a);return D&&l.canReplaceWith(m,E,D.length?D[0]:a)?D:null}(b,a),D=E&&function ce(b,a){let{parent:l,startIndex:m,endIndex:E}=b,D=l.child(m),N=a.contentMatch.findWrapping(D.type);if(!N)return null;let he=(N.length?N[N.length-1]:a).contentMatch;for(let Oe=m;he&&Oe<E;Oe++)he=he.matchType(l.child(Oe).type);return he&&he.validEnd?N:null}(m,a);return D?E.map(X).concat({type:a,attrs:l}).concat(D.map(X)):null}function X(b){return{type:b,attrs:null}}function Re(b,a,l=1,m){let E=b.resolve(a),D=E.depth-l,N=m&&m[m.length-1]||E.parent;if(D<0||E.parent.type.spec.isolating||!E.parent.canReplace(E.index(),E.parent.childCount)||!N.type.validContent(E.parent.content.cutByIndex(E.index(),E.parent.childCount)))return!1;for(let Oe=E.depth-1,je=l-2;Oe>D;Oe--,je--){let Gt=E.node(Oe),ui=E.index(Oe);if(Gt.type.spec.isolating)return!1;let Di=Gt.content.cutByIndex(ui,Gt.childCount),_i=m&&m[je+1];_i&&(Di=Di.replaceChild(0,_i.type.create(_i.attrs)));let wn=m&&m[je]||Gt;if(!Gt.canReplace(ui+1,Gt.childCount)||!wn.type.validContent(Di))return!1}let J=E.indexAfter(D),he=m&&m[0];return E.node(D).canReplaceWith(J,J,he?he.type:E.node(D+1).type)}function re(b,a){let l=b.resolve(a),m=l.index();return function te(b,a){return!(!b||!a||b.isLeaf||!b.canAppend(a))}(l.nodeBefore,l.nodeAfter)&&l.parent.canReplace(m,m+1)}function yt(b,a,l=a,m=rt.empty){if(a==l&&!m.size)return null;let E=b.resolve(a),D=b.resolve(l);return ii(E,D,m)?new i(a,l,m):new hi(E,D,m).fit()}function ii(b,a,l){return!l.openStart&&!l.openEnd&&b.start()==a.start()&&b.parent.canReplace(b.index(),a.index(),l.content)}Ot.jsonID("replaceAround",r);class hi{constructor(a,l,m){this.$from=a,this.$to=l,this.unplaced=m,this.frontier=[],this.placed=ze.empty;for(let E=0;E<=a.depth;E++){let D=a.node(E);this.frontier.push({type:D.type,match:D.contentMatchAt(a.indexAfter(E))})}for(let E=a.depth;E>0;E--)this.placed=ze.from(a.node(E).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Oe=this.findFittable();Oe?this.placeNodes(Oe):this.openMore()||this.dropNode()}let a=this.mustMoveInline(),l=this.placed.size-this.depth-this.$from.depth,m=this.$from,E=this.close(a<0?this.$to:m.doc.resolve(a));if(!E)return null;let D=this.placed,N=m.depth,J=E.depth;for(;N&&J&&1==D.childCount;)D=D.firstChild.content,N--,J--;let he=new rt(D,N,J);return a>-1?new r(m.pos,a,this.$to.pos,this.$to.end(),he,l):he.size||m.pos!=this.$to.pos?new i(m.pos,E.pos,he):null}findFittable(){let a=this.unplaced.openStart;for(let l=this.unplaced.content,m=0,E=this.unplaced.openEnd;m<a;m++){let D=l.firstChild;if(l.childCount>1&&(E=0),D.type.spec.isolating&&E<=m){a=m;break}l=D.content}for(let l=1;l<=2;l++)for(let m=1==l?a:this.unplaced.openStart;m>=0;m--){let E,D=null;m?(D=nn(this.unplaced.content,m-1).firstChild,E=D.content):E=this.unplaced.content;let N=E.firstChild;for(let J=this.depth;J>=0;J--){let je,{type:he,match:Oe}=this.frontier[J],Gt=null;if(1==l&&(N?Oe.matchType(N.type)||(Gt=Oe.fillBefore(ze.from(N),!1)):D&&he.compatibleContent(D.type)))return{sliceDepth:m,frontierDepth:J,parent:D,inject:Gt};if(2==l&&N&&(je=Oe.findWrapping(N.type)))return{sliceDepth:m,frontierDepth:J,parent:D,wrap:je};if(D&&Oe.matchType(D.type))break}}}openMore(){let{content:a,openStart:l,openEnd:m}=this.unplaced,E=nn(a,l);return!(!E.childCount||E.firstChild.isLeaf||(this.unplaced=new rt(a,l+1,Math.max(m,E.size+l>=a.size-m?l+1:0)),0))}dropNode(){let{content:a,openStart:l,openEnd:m}=this.unplaced,E=nn(a,l);if(E.childCount<=1&&l>0){let D=a.size-l<=l+E.size;this.unplaced=new rt(xi(a,l-1,1),l-1,D?l-1:m)}else this.unplaced=new rt(xi(a,l,1),l,m)}placeNodes({sliceDepth:a,frontierDepth:l,parent:m,inject:E,wrap:D}){for(;this.depth>l;)this.closeFrontierNode();if(D)for(let wn=0;wn<D.length;wn++)this.openFrontierNode(D[wn]);let N=this.unplaced,J=m?m.content:N.content,he=N.openStart-a,Oe=0,je=[],{match:Gt,type:ui}=this.frontier[l];if(E){for(let wn=0;wn<E.childCount;wn++)je.push(E.child(wn));Gt=Gt.matchFragment(E)}let Di=J.size+a-(N.content.size-N.openEnd);for(;Oe<J.childCount;){let wn=J.child(Oe),ar=Gt.matchType(wn.type);if(!ar)break;Oe++,(Oe>1||0==he||wn.content.size)&&(Gt=ar,je.push(Tn(wn.mark(ui.allowedMarks(wn.marks)),1==Oe?he:0,Oe==J.childCount?Di:-1)))}let _i=Oe==J.childCount;_i||(Di=-1),this.placed=Pi(this.placed,l,ze.from(je)),this.frontier[l].match=Gt,_i&&Di<0&&m&&m.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let wn=0,ar=J;wn<Di;wn++){let qr=ar.lastChild;this.frontier.push({type:qr.type,match:qr.contentMatchAt(qr.childCount)}),ar=qr.content}this.unplaced=_i?0==a?rt.empty:new rt(xi(N.content,a-1,1),a-1,Di<0?N.openEnd:a-1):new rt(xi(N.content,a,Oe),N.openStart,N.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let l,a=this.frontier[this.depth];if(!a.type.isTextblock||!Xn(this.$to,this.$to.depth,a.type,a.match,!1)||this.$to.depth==this.depth&&(l=this.findCloseLevel(this.$to))&&l.depth==this.depth)return-1;let{depth:m}=this.$to,E=this.$to.after(m);for(;m>1&&E==this.$to.end(--m);)++E;return E}findCloseLevel(a){e:for(let l=Math.min(this.depth,a.depth);l>=0;l--){let{match:m,type:E}=this.frontier[l],D=l<a.depth&&a.end(l+1)==a.pos+(a.depth-(l+1)),N=Xn(a,l,E,m,D);if(N){for(let J=l-1;J>=0;J--){let{match:he,type:Oe}=this.frontier[J],je=Xn(a,J,Oe,he,!0);if(!je||je.childCount)continue e}return{depth:l,fit:N,move:D?a.doc.resolve(a.after(l+1)):a}}}}close(a){let l=this.findCloseLevel(a);if(!l)return null;for(;this.depth>l.depth;)this.closeFrontierNode();l.fit.childCount&&(this.placed=Pi(this.placed,l.depth,l.fit)),a=l.move;for(let m=l.depth+1;m<=a.depth;m++){let E=a.node(m),D=E.type.contentMatch.fillBefore(E.content,!0,a.index(m));this.openFrontierNode(E.type,E.attrs,D)}return a}openFrontierNode(a,l=null,m){let E=this.frontier[this.depth];E.match=E.match.matchType(a),this.placed=Pi(this.placed,this.depth,ze.from(a.create(l,m))),this.frontier.push({type:a,match:a.contentMatch})}closeFrontierNode(){let l=this.frontier.pop().match.fillBefore(ze.empty,!0);l.childCount&&(this.placed=Pi(this.placed,this.frontier.length,l))}}function xi(b,a,l){return 0==a?b.cutByIndex(l,b.childCount):b.replaceChild(0,b.firstChild.copy(xi(b.firstChild.content,a-1,l)))}function Pi(b,a,l){return 0==a?b.append(l):b.replaceChild(b.childCount-1,b.lastChild.copy(Pi(b.lastChild.content,a-1,l)))}function nn(b,a){for(let l=0;l<a;l++)b=b.firstChild.content;return b}function Tn(b,a,l){if(a<=0)return b;let m=b.content;return a>1&&(m=m.replaceChild(0,Tn(m.firstChild,a-1,1==m.childCount?l-1:0))),a>0&&(m=b.type.contentMatch.fillBefore(m).append(m),l<=0&&(m=m.append(b.type.contentMatch.matchFragment(m).fillBefore(ze.empty,!0)))),b.copy(m)}function Xn(b,a,l,m,E){let D=b.node(a),N=E?b.indexAfter(a):b.index(a);if(N==D.childCount&&!l.compatibleContent(D.type))return null;let J=m.fillBefore(D.content,!0,N);return J&&!function Qn(b,a,l){for(let m=l;m<a.childCount;m++)if(!b.allowsMarks(a.child(m).marks))return!0;return!1}(l,D.content,N)?J:null}function hr(b){return b.spec.defining||b.spec.definingForContent}function Rr(b,a,l,m,E){if(a<l){let D=b.firstChild;b=b.replaceChild(0,D.copy(Rr(D.content,a+1,l,m,D)))}if(a>m){let D=E.contentMatchAt(0),N=D.fillBefore(b).append(b);b=N.append(D.matchFragment(N).fillBefore(ze.empty,!0))}return b}function cr(b,a){let l=[];for(let E=Math.min(b.depth,a.depth);E>=0;E--){let D=b.start(E);if(D<b.pos-(b.depth-E)||a.end(E)>a.pos+(a.depth-E)||b.node(E).type.spec.isolating||a.node(E).type.spec.isolating)break;(D==a.start(E)||E==b.depth&&E==a.depth&&b.parent.inlineContent&&a.parent.inlineContent&&E&&a.start(E-1)==D-1)&&l.push(E)}return l}class Ur extends Ot{constructor(a,l,m){super(),this.pos=a,this.attr=l,this.value=m}apply(a){let l=a.nodeAt(this.pos);if(!l)return xe.fail("No node at attribute step's position");let m=Object.create(null);for(let D in l.attrs)m[D]=l.attrs[D];m[this.attr]=this.value;let E=l.type.create(m,null,l.marks);return xe.fromReplace(a,this.pos,this.pos+1,new rt(ze.from(E),0,l.isLeaf?0:1))}getMap(){return Ei.empty}invert(a){return new Ur(this.pos,this.attr,a.nodeAt(this.pos).attrs[this.attr])}map(a){let l=a.mapResult(this.pos,1);return l.deletedAfter?null:new Ur(l.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(a,l){if("number"!=typeof l.pos||"string"!=typeof l.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ur(l.pos,l.attr,l.value)}}Ot.jsonID("attr",Ur);class ir extends Ot{constructor(a,l){super(),this.attr=a,this.value=l}apply(a){let l=Object.create(null);for(let E in a.attrs)l[E]=a.attrs[E];l[this.attr]=this.value;let m=a.type.create(l,a.content,a.marks);return xe.ok(m)}getMap(){return Ei.empty}invert(a){return new ir(this.attr,a.attrs[this.attr])}map(a){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(a,l){if("string"!=typeof l.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ir(l.attr,l.value)}}Ot.jsonID("docAttr",ir);let Ar=class extends Error{};Ar=function b(a){let l=Error.call(this,a);return l.__proto__=b.prototype,l},(Ar.prototype=Object.create(Error.prototype)).constructor=Ar,Ar.prototype.name="TransformError";class pa{constructor(a){this.doc=a,this.steps=[],this.docs=[],this.mapping=new Ki}get before(){return this.docs.length?this.docs[0]:this.doc}step(a){let l=this.maybeStep(a);if(l.failed)throw new Ar(l.failed);return this}maybeStep(a){let l=a.apply(this.doc);return l.failed||this.addStep(a,l.doc),l}get docChanged(){return this.steps.length>0}addStep(a,l){this.docs.push(this.doc),this.steps.push(a),this.mapping.appendMap(a.getMap()),this.doc=l}replace(a,l=a,m=rt.empty){let E=yt(this.doc,a,l,m);return E&&this.step(E),this}replaceWith(a,l,m){return this.replace(a,l,new rt(ze.from(m),0,0))}delete(a,l){return this.replace(a,l,rt.empty)}insert(a,l){return this.replaceWith(a,a,l)}replaceRange(a,l,m){return function xr(b,a,l,m){if(!m.size)return b.deleteRange(a,l);let E=b.doc.resolve(a),D=b.doc.resolve(l);if(ii(E,D,m))return b.step(new i(a,l,m));let N=cr(E,b.doc.resolve(l));0==N[N.length-1]&&N.pop();let J=-(E.depth+1);N.unshift(J);for(let ui=E.depth,Di=E.pos-1;ui>0;ui--,Di--){let _i=E.node(ui).type.spec;if(_i.defining||_i.definingAsContext||_i.isolating)break;N.indexOf(ui)>-1?J=ui:E.before(ui)==Di&&N.splice(1,0,-ui)}let he=N.indexOf(J),Oe=[],je=m.openStart;for(let ui=m.content,Di=0;;Di++){let _i=ui.firstChild;if(Oe.push(_i),Di==m.openStart)break;ui=_i.content}for(let ui=je-1;ui>=0;ui--){let Di=Oe[ui],_i=hr(Di.type);if(_i&&!Di.sameMarkup(E.node(Math.abs(J)-1)))je=ui;else if(_i||!Di.type.isTextblock)break}for(let ui=m.openStart;ui>=0;ui--){let Di=(ui+je+1)%(m.openStart+1),_i=Oe[Di];if(_i)for(let wn=0;wn<N.length;wn++){let ar=N[(wn+he)%N.length],qr=!0;ar<0&&(qr=!1,ar=-ar);let Cl=E.node(ar-1),Ld=E.index(ar-1);if(Cl.canReplaceWith(Ld,Ld,_i.type,_i.marks))return b.replace(E.before(ar),qr?D.after(ar):l,new rt(Rr(m.content,0,m.openStart,Di),Di,m.openEnd))}}let Gt=b.steps.length;for(let ui=N.length-1;ui>=0&&(b.replace(a,l,m),!(b.steps.length>Gt));ui--){let Di=N[ui];Di<0||(a=E.before(Di),l=D.after(Di))}}(this,a,l,m),this}replaceRangeWith(a,l,m){return function Br(b,a,l,m){if(!m.isInline&&a==l&&b.doc.resolve(a).parent.content.size){let E=function Fe(b,a,l){let m=b.resolve(a);if(m.parent.canReplaceWith(m.index(),m.index(),l))return a;if(0==m.parentOffset)for(let E=m.depth-1;E>=0;E--){let D=m.index(E);if(m.node(E).canReplaceWith(D,D,l))return m.before(E+1);if(D>0)return null}if(m.parentOffset==m.parent.content.size)for(let E=m.depth-1;E>=0;E--){let D=m.indexAfter(E);if(m.node(E).canReplaceWith(D,D,l))return m.after(E+1);if(D<m.node(E).childCount)return null}return null}(b.doc,a,m.type);null!=E&&(a=l=E)}b.replaceRange(a,l,new rt(ze.from(m),0,0))}(this,a,l,m),this}deleteRange(a,l){return function Or(b,a,l){let m=b.doc.resolve(a),E=b.doc.resolve(l),D=cr(m,E);for(let N=0;N<D.length;N++){let J=D[N],he=N==D.length-1;if(he&&0==J||m.node(J).type.contentMatch.validEnd)return b.delete(m.start(J),E.end(J));if(J>0&&(he||m.node(J-1).canReplace(m.index(J-1),E.indexAfter(J-1))))return b.delete(m.before(J),E.after(J))}for(let N=1;N<=m.depth&&N<=E.depth;N++)if(a-m.start(N)==m.depth-N&&l>m.end(N)&&E.end(N)-l!=E.depth-N)return b.delete(m.before(N),l);b.delete(a,l)}(this,a,l),this}lift(a,l){return function Y(b,a,l){let{$from:m,$to:E,depth:D}=a,N=m.before(D+1),J=E.after(D+1),he=N,Oe=J,je=ze.empty,Gt=0;for(let _i=D,wn=!1;_i>l;_i--)wn||m.index(_i)>0?(wn=!0,je=ze.from(m.node(_i).copy(je)),Gt++):he--;let ui=ze.empty,Di=0;for(let _i=D,wn=!1;_i>l;_i--)wn||E.after(_i+1)<E.end(_i)?(wn=!0,ui=ze.from(E.node(_i).copy(ui)),Di++):Oe++;b.step(new r(he,Oe,N,J,new rt(je.append(ui),Gt,Di),je.size-Gt,!0))}(this,a,l),this}join(a,l=1){return function ye(b,a,l){let m=new i(a-l,a+l,rt.empty,!0);b.step(m)}(this,a,l),this}wrap(a,l){return function me(b,a,l){let m=ze.empty;for(let N=l.length-1;N>=0;N--){if(m.size){let J=l[N].type.contentMatch.matchFragment(m);if(!J||!J.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}m=ze.from(l[N].type.create(l[N].attrs,m))}let E=a.start,D=a.end;b.step(new r(E,D,E,D,new rt(m,0,0),l.length,!0))}(this,a,l),this}setBlockType(a,l=a,m,E=null){return function Ee(b,a,l,m,E){if(!m.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let D=b.steps.length;b.doc.nodesBetween(a,l,(N,J)=>{if(N.isTextblock&&!N.hasMarkup(m,E)&&function De(b,a,l){let m=b.resolve(a),E=m.index();return m.parent.canReplaceWith(E,E+1,l)}(b.doc,b.mapping.slice(D).map(J),m)){b.clearIncompatible(b.mapping.slice(D).map(J,1),m);let he=b.mapping.slice(D),Oe=he.map(J,1),je=he.map(J+N.nodeSize,1);return b.step(new r(Oe,je,Oe+1,je-1,new rt(ze.from(m.create(E,null,N.marks)),0,0),1,!0)),!1}})}(this,a,l,m,E),this}setNodeMarkup(a,l,m=null,E){return function Ce(b,a,l,m,E){let D=b.doc.nodeAt(a);if(!D)throw new RangeError("No node at given position");l||(l=D.type);let N=l.create(m,null,E||D.marks);if(D.isLeaf)return b.replaceWith(a,a+D.nodeSize,N);if(!l.validContent(D.content))throw new RangeError("Invalid content for node type "+l.name);b.step(new r(a,a+D.nodeSize,a+1,a+D.nodeSize-1,new rt(ze.from(N),0,0),1,!0))}(this,a,l,m,E),this}setNodeAttribute(a,l,m){return this.step(new Ur(a,l,m)),this}setDocAttribute(a,l){return this.step(new ir(a,l)),this}addNodeMark(a,l){return this.step(new Ut(a,l)),this}removeNodeMark(a,l){if(!(l instanceof Jt)){let m=this.doc.nodeAt(a);if(!m)throw new RangeError("No node at position "+a);if(!(l=l.isInSet(m.marks)))return this}return this.step(new pe(a,l)),this}split(a,l=1,m){return function G(b,a,l=1,m){let E=b.doc.resolve(a),D=ze.empty,N=ze.empty;for(let J=E.depth,he=E.depth-l,Oe=l-1;J>he;J--,Oe--){D=ze.from(E.node(J).copy(D));let je=m&&m[Oe];N=ze.from(je?je.type.create(je.attrs,N):E.node(J).copy(N))}b.step(new i(a,a,new rt(D.append(N),l,l),!0))}(this,a,l,m),this}addMark(a,l,m){return function g(b,a,l,m){let N,J,E=[],D=[];b.doc.nodesBetween(a,l,(he,Oe,je)=>{if(!he.isInline)return;let Gt=he.marks;if(!m.isInSet(Gt)&&je.type.allowsMarkType(m.type)){let ui=Math.max(Oe,a),Di=Math.min(Oe+he.nodeSize,l),_i=m.addToSet(Gt);for(let wn=0;wn<Gt.length;wn++)Gt[wn].isInSet(_i)||(N&&N.to==ui&&N.mark.eq(Gt[wn])?N.to=Di:E.push(N=new Xe(ui,Di,Gt[wn])));J&&J.to==ui?J.to=Di:D.push(J=new Yt(ui,Di,m))}}),E.forEach(he=>b.step(he)),D.forEach(he=>b.step(he))}(this,a,l,m),this}removeMark(a,l,m){return function x(b,a,l,m){let E=[],D=0;b.doc.nodesBetween(a,l,(N,J)=>{if(!N.isInline)return;D++;let he=null;if(m instanceof On){let je,Oe=N.marks;for(;je=m.isInSet(Oe);)(he||(he=[])).push(je),Oe=je.removeFromSet(Oe)}else m?m.isInSet(N.marks)&&(he=[m]):he=N.marks;if(he&&he.length){let Oe=Math.min(J+N.nodeSize,l);for(let je=0;je<he.length;je++){let ui,Gt=he[je];for(let Di=0;Di<E.length;Di++){let _i=E[Di];_i.step==D-1&&Gt.eq(E[Di].style)&&(ui=_i)}ui?(ui.to=Oe,ui.step=D):E.push({style:Gt,from:Math.max(J,a),to:Oe,step:D})}}}),E.forEach(N=>b.step(new Xe(N.from,N.to,N.style)))}(this,a,l,m),this}clearIncompatible(a,l,m){return function w(b,a,l,m=l.contentMatch){let E=b.doc.nodeAt(a),D=[],N=a+1;for(let J=0;J<E.childCount;J++){let he=E.child(J),Oe=N+he.nodeSize,je=m.matchType(he.type);if(je){m=je;for(let Gt=0;Gt<he.marks.length;Gt++)l.allowsMarkType(he.marks[Gt].type)||b.step(new Xe(N,Oe,he.marks[Gt]));if(he.isText&&!l.spec.code){let Gt,Di,ui=/\r?\n|\r/g;for(;Gt=ui.exec(he.text);)Di||(Di=new rt(ze.from(l.schema.text(" ",l.allowedMarks(he.marks))),0,0)),D.push(new i(N+Gt.index,N+Gt.index+Gt[0].length,Di))}}else D.push(new i(N,Oe,rt.empty));N=Oe}if(!m.validEnd){let J=m.fillBefore(ze.empty,!0);b.replace(N,N,new rt(J,0,0))}for(let J=D.length-1;J>=0;J--)b.step(D[J])}(this,a,l,m),this}}const fo=Object.create(null);class nr{constructor(a,l,m){this.$anchor=a,this.$head=l,this.ranges=m||[new Co(a.min(l),a.max(l))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let a=this.ranges;for(let l=0;l<a.length;l++)if(a[l].$from.pos!=a[l].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(a,l=rt.empty){let m=l.content.lastChild,E=null;for(let J=0;J<l.openEnd;J++)E=m,m=m.lastChild;let D=a.steps.length,N=this.ranges;for(let J=0;J<N.length;J++){let{$from:he,$to:Oe}=N[J],je=a.mapping.slice(D);a.replaceRange(je.map(he.pos),je.map(Oe.pos),J?rt.empty:l),0==J&&Wl(a,D,(m?m.isInline:E&&E.isTextblock)?-1:1)}}replaceWith(a,l){let m=a.steps.length,E=this.ranges;for(let D=0;D<E.length;D++){let{$from:N,$to:J}=E[D],he=a.mapping.slice(m),Oe=he.map(N.pos),je=he.map(J.pos);D?a.deleteRange(Oe,je):(a.replaceRangeWith(Oe,je,l),Wl(a,m,l.isInline?-1:1))}}static findFrom(a,l,m=!1){let E=a.parent.inlineContent?new or(a):Da(a.node(0),a.parent,a.pos,a.index(),l,m);if(E)return E;for(let D=a.depth-1;D>=0;D--){let N=l<0?Da(a.node(0),a.node(D),a.before(D+1),a.index(D),l,m):Da(a.node(0),a.node(D),a.after(D+1),a.index(D)+1,l,m);if(N)return N}return null}static near(a,l=1){return this.findFrom(a,l)||this.findFrom(a,-l)||new bs(a.node(0))}static atStart(a){return Da(a,a,0,0,1)||new bs(a)}static atEnd(a){return Da(a,a,a.content.size,a.childCount,-1)||new bs(a)}static fromJSON(a,l){if(!l||!l.type)throw new RangeError("Invalid input for Selection.fromJSON");let m=fo[l.type];if(!m)throw new RangeError(`No selection type ${l.type} defined`);return m.fromJSON(a,l)}static jsonID(a,l){if(a in fo)throw new RangeError("Duplicate use of selection JSON ID "+a);return fo[a]=l,l.prototype.jsonID=a,l}getBookmark(){return or.between(this.$anchor,this.$head).getBookmark()}}nr.prototype.visible=!0;class Co{constructor(a,l){this.$from=a,this.$to=l}}let cl=!1;function oo(b){!cl&&!b.parent.inlineContent&&(cl=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+b.parent.type.name+")"))}class or extends nr{constructor(a,l=a){oo(a),oo(l),super(a,l)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(a,l){let m=a.resolve(l.map(this.head));if(!m.parent.inlineContent)return nr.near(m);let E=a.resolve(l.map(this.anchor));return new or(E.parent.inlineContent?E:m,m)}replace(a,l=rt.empty){if(super.replace(a,l),l==rt.empty){let m=this.$from.marksAcross(this.$to);m&&a.ensureMarks(m)}}eq(a){return a instanceof or&&a.anchor==this.anchor&&a.head==this.head}getBookmark(){return new Fs(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(a,l){if("number"!=typeof l.anchor||"number"!=typeof l.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new or(a.resolve(l.anchor),a.resolve(l.head))}static create(a,l,m=l){let E=a.resolve(l);return new this(E,m==l?E:a.resolve(m))}static between(a,l,m){let E=a.pos-l.pos;if((!m||E)&&(m=E>=0?1:-1),!l.parent.inlineContent){let D=nr.findFrom(l,m,!0)||nr.findFrom(l,-m,!0);if(!D)return nr.near(l,m);l=D.$head}return a.parent.inlineContent||(0==E||(a=(nr.findFrom(a,-m,!0)||nr.findFrom(a,m,!0)).$anchor).pos<l.pos!=E<0)&&(a=l),new or(a,l)}}nr.jsonID("text",or);class Fs{constructor(a,l){this.anchor=a,this.head=l}map(a){return new Fs(a.map(this.anchor),a.map(this.head))}resolve(a){return or.between(a.resolve(this.anchor),a.resolve(this.head))}}class yr extends nr{constructor(a){let l=a.nodeAfter,m=a.node(0).resolve(a.pos+l.nodeSize);super(a,m),this.node=l}map(a,l){let{deleted:m,pos:E}=l.mapResult(this.anchor),D=a.resolve(E);return m?nr.near(D):new yr(D)}content(){return new rt(ze.from(this.node),0,0)}eq(a){return a instanceof yr&&a.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new No(this.anchor)}static fromJSON(a,l){if("number"!=typeof l.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new yr(a.resolve(l.anchor))}static create(a,l){return new yr(a.resolve(l))}static isSelectable(a){return!a.isText&&!1!==a.type.spec.selectable}}yr.prototype.visible=!1,nr.jsonID("node",yr);class No{constructor(a){this.anchor=a}map(a){let{deleted:l,pos:m}=a.mapResult(this.anchor);return l?new Fs(m,m):new No(m)}resolve(a){let l=a.resolve(this.anchor),m=l.nodeAfter;return m&&yr.isSelectable(m)?new yr(l):nr.near(l)}}class bs extends nr{constructor(a){super(a.resolve(0),a.resolve(a.content.size))}replace(a,l=rt.empty){if(l==rt.empty){a.delete(0,a.doc.content.size);let m=nr.atStart(a.doc);m.eq(a.selection)||a.setSelection(m)}else super.replace(a,l)}toJSON(){return{type:"all"}}static fromJSON(a){return new bs(a)}map(a){return new bs(a)}eq(a){return a instanceof bs}getBookmark(){return dl}}nr.jsonID("all",bs);const dl={map(){return this},resolve:b=>new bs(b)};function Da(b,a,l,m,E,D=!1){if(a.inlineContent)return or.create(b,l);for(let N=m-(E>0?0:1);E>0?N<a.childCount:N>=0;N+=E){let J=a.child(N);if(J.isAtom){if(!D&&yr.isSelectable(J))return yr.create(b,l-(E<0?J.nodeSize:0))}else{let he=Da(b,J,l+E,E<0?J.childCount:0,E,D);if(he)return he}l+=J.nodeSize*E}return null}function Wl(b,a,l){let m=b.steps.length-1;if(m<a)return;let N,E=b.steps[m];(E instanceof i||E instanceof r)&&(b.mapping.maps[m].forEach((J,he,Oe,je)=>{null==N&&(N=je)}),b.setSelection(nr.near(b.doc.resolve(N),l)))}class Us extends pa{constructor(a){super(a.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=a.selection,this.storedMarks=a.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(a){if(a.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=a,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(a){return this.storedMarks=a,this.updated|=2,this}ensureMarks(a){return Jt.sameSet(this.storedMarks||this.selection.$from.marks(),a)||this.setStoredMarks(a),this}addStoredMark(a){return this.ensureMarks(a.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(a){return this.ensureMarks(a.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(a,l){super.addStep(a,l),this.updated=-3&this.updated,this.storedMarks=null}setTime(a){return this.time=a,this}replaceSelection(a){return this.selection.replace(this,a),this}replaceSelectionWith(a,l=!0){let m=this.selection;return l&&(a=a.mark(this.storedMarks||(m.empty?m.$from.marks():m.$from.marksAcross(m.$to)||Jt.none))),m.replaceWith(this,a),this}deleteSelection(){return this.selection.replace(this),this}insertText(a,l,m){let E=this.doc.type.schema;if(null==l)return a?this.replaceSelectionWith(E.text(a),!0):this.deleteSelection();{if(null==m&&(m=l),m=m??l,!a)return this.deleteRange(l,m);let D=this.storedMarks;if(!D){let N=this.doc.resolve(l);D=m==l?N.marks():N.marksAcross(this.doc.resolve(m))}return this.replaceRangeWith(l,m,E.text(a,D)),this.selection.empty||this.setSelection(nr.near(this.selection.$to)),this}}setMeta(a,l){return this.meta["string"==typeof a?a:a.key]=l,this}getMeta(a){return this.meta["string"==typeof a?a:a.key]}get isGeneric(){for(let a in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function Ds(b,a){return a&&b?b.bind(a):b}class fa{constructor(a,l,m){this.name=a,this.init=Ds(l.init,m),this.apply=Ds(l.apply,m)}}const Vo=[new fa("doc",{init:b=>b.doc||b.schema.topNodeType.createAndFill(),apply:b=>b.doc}),new fa("selection",{init:(b,a)=>b.selection||nr.atStart(a.doc),apply:b=>b.selection}),new fa("storedMarks",{init:b=>b.storedMarks||null,apply:(b,a,l,m)=>m.selection.$cursor?b.storedMarks:null}),new fa("scrollToSelection",{init:()=>0,apply:(b,a)=>b.scrolledIntoView?a+1:a})];class ma{constructor(a,l){this.schema=a,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Vo.slice(),l&&l.forEach(m=>{if(this.pluginsByKey[m.key])throw new RangeError("Adding different instances of a keyed plugin ("+m.key+")");this.plugins.push(m),this.pluginsByKey[m.key]=m,m.spec.state&&this.fields.push(new fa(m.key,m.spec.state,m))})}}class $o{constructor(a){this.config=a}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(a){return this.applyTransaction(a).state}filterTransaction(a,l=-1){for(let m=0;m<this.config.plugins.length;m++)if(m!=l){let E=this.config.plugins[m];if(E.spec.filterTransaction&&!E.spec.filterTransaction.call(E,a,this))return!1}return!0}applyTransaction(a){if(!this.filterTransaction(a))return{state:this,transactions:[]};let l=[a],m=this.applyInner(a),E=null;for(;;){let D=!1;for(let N=0;N<this.config.plugins.length;N++){let J=this.config.plugins[N];if(J.spec.appendTransaction){let he=E?E[N].n:0,Oe=E?E[N].state:this,je=he<l.length&&J.spec.appendTransaction.call(J,he?l.slice(he):l,Oe,m);if(je&&m.filterTransaction(je,N)){if(je.setMeta("appendedTransaction",a),!E){E=[];for(let Gt=0;Gt<this.config.plugins.length;Gt++)E.push(Gt<N?{state:m,n:l.length}:{state:this,n:0})}l.push(je),m=m.applyInner(je),D=!0}E&&(E[N]={state:m,n:l.length})}}if(!D)return{state:m,transactions:l}}}applyInner(a){if(!a.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let l=new $o(this.config),m=this.config.fields;for(let E=0;E<m.length;E++){let D=m[E];l[D.name]=D.apply(a,this[D.name],this,l)}return l}get tr(){return new Us(this)}static create(a){let l=new ma(a.doc?a.doc.type.schema:a.schema,a.plugins),m=new $o(l);for(let E=0;E<l.fields.length;E++)m[l.fields[E].name]=l.fields[E].init(a,m);return m}reconfigure(a){let l=new ma(this.schema,a.plugins),m=l.fields,E=new $o(l);for(let D=0;D<m.length;D++){let N=m[D].name;E[N]=this.hasOwnProperty(N)?this[N]:m[D].init(a,E)}return E}toJSON(a){let l={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(l.storedMarks=this.storedMarks.map(m=>m.toJSON())),a&&"object"==typeof a)for(let m in a){if("doc"==m||"selection"==m)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let E=a[m],D=E.spec.state;D&&D.toJSON&&(l[m]=D.toJSON.call(E,this[E.key]))}return l}static fromJSON(a,l,m){if(!l)throw new RangeError("Invalid input for EditorState.fromJSON");if(!a.schema)throw new RangeError("Required config field 'schema' missing");let E=new ma(a.schema,a.plugins),D=new $o(E);return E.fields.forEach(N=>{if("doc"==N.name)D.doc=Ln.fromJSON(a.schema,l.doc);else if("selection"==N.name)D.selection=nr.fromJSON(D.doc,l.selection);else if("storedMarks"==N.name)l.storedMarks&&(D.storedMarks=l.storedMarks.map(a.schema.markFromJSON));else{if(m)for(let J in m){let he=m[J],Oe=he.spec.state;if(he.key==N.name&&Oe&&Oe.fromJSON&&Object.prototype.hasOwnProperty.call(l,J))return void(D[N.name]=Oe.fromJSON.call(he,a,l[J],D))}D[N.name]=N.init(a,D)}}),D}}function Zo(b,a,l){for(let m in b){let E=b[m];E instanceof Function?E=E.bind(a):"handleDOMEvents"==m&&(E=Zo(E,a,{})),l[m]=E}return l}class Ho{constructor(a){this.spec=a,this.props={},a.props&&Zo(a.props,this,this.props),this.key=a.key?a.key.key:Ao("plugin")}getState(a){return a[this.key]}}const Za=Object.create(null);function Ao(b){return b in Za?b+"$"+ ++Za[b]:(Za[b]=0,b+"$")}class mo{constructor(a="key"){this.key=Ao(a)}get(a){return a.config.pluginsByKey[this.key]}getState(a){return a[this.key]}}const as=function(b){for(var a=0;;a++)if(!(b=b.previousSibling))return a},Mr=function(b){let a=b.assignedSlot||b.parentNode;return a&&11==a.nodeType?a.host:a};let oc=null;const Ws=function(b,a,l){let m=oc||(oc=document.createRange());return m.setEnd(b,l??b.nodeValue.length),m.setStart(b,a||0),m},Ko=function(b,a,l,m){return l&&(Do(b,a,l,m,-1)||Do(b,a,l,m,1))},zl=/^(img|br|input|textarea|hr)$/i;function Do(b,a,l,m,E){for(;;){if(b==l&&a==m)return!0;if(a==(E<0?0:is(b))){let D=b.parentNode;if(!D||1!=D.nodeType||ao(b)||zl.test(b.nodeName)||"false"==b.contentEditable)return!1;a=as(b)+(E<0?0:1),b=D}else{if(1!=b.nodeType)return!1;if("false"==(b=b.childNodes[a+(E<0?-1:0)]).contentEditable)return!1;a=E<0?is(b):0}}}function is(b){return 3==b.nodeType?b.nodeValue.length:b.childNodes.length}function ao(b){let a;for(let l=b;l&&!(a=l.pmViewDesc);l=l.parentNode);return a&&a.node&&a.node.isBlock&&(a.dom==b||a.contentDOM==b)}const Jo=function(b){return b.focusNode&&Ko(b.focusNode,b.focusOffset,b.anchorNode,b.anchorOffset)};function lo(b,a){let l=document.createEvent("Event");return l.initEvent("keydown",!0,!0),l.keyCode=b,l.key=l.code=a,l}const Rs=typeof navigator<"u"?navigator:null,Ra=typeof document<"u"?document:null,go=Rs&&Rs.userAgent||"",ns=/Edge\/(\d+)/.exec(go),kl=/MSIE \d/.exec(go),_o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(go),Jr=!!(kl||_o||ns),Cr=kl?document.documentMode:_o?+_o[1]:ns?+ns[1]:0,eo=!Jr&&/gecko\/(\d+)/i.test(go);eo&&/Firefox\/(\d+)/.exec(go);const Qo=!Jr&&/Chrome\/(\d+)/.exec(go),Ts=!!Qo,hl=Qo?+Qo[1]:0,gs=!Jr&&!!Rs&&/Apple Computer/.test(Rs.vendor),Ys=gs&&(/Mobile\/\w+/.test(go)||!!Rs&&Rs.maxTouchPoints>2),Es=Ys||!!Rs&&/Mac/.test(Rs.platform),Cc=!!Rs&&/Win/.test(Rs.platform),Ss=/Android \d/.test(go),jo=!!Ra&&"webkitFontSmoothing"in Ra.documentElement.style,ac=jo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function to(b){return{left:0,right:b.documentElement.clientWidth,top:0,bottom:b.documentElement.clientHeight}}function Eo(b,a){return"number"==typeof b?b:b[a]}function ea(b){let a=b.getBoundingClientRect();return{left:a.left,right:a.left+b.clientWidth*(a.width/b.offsetWidth||1),top:a.top,bottom:a.top+b.clientHeight*(a.height/b.offsetHeight||1)}}function La(b,a,l){let m=b.someProp("scrollThreshold")||0,E=b.someProp("scrollMargin")||5,D=b.dom.ownerDocument;for(let N=l||b.dom;N;N=Mr(N)){if(1!=N.nodeType)continue;let J=N,he=J==D.body,Oe=he?to(D):ea(J),je=0,Gt=0;if(a.top<Oe.top+Eo(m,"top")?Gt=-(Oe.top-a.top+Eo(E,"top")):a.bottom>Oe.bottom-Eo(m,"bottom")&&(Gt=a.bottom-a.top>Oe.bottom-Oe.top?a.top+Eo(E,"top")-Oe.top:a.bottom-Oe.bottom+Eo(E,"bottom")),a.left<Oe.left+Eo(m,"left")?je=-(Oe.left-a.left+Eo(E,"left")):a.right>Oe.right-Eo(m,"right")&&(je=a.right-Oe.right+Eo(E,"right")),je||Gt)if(he)D.defaultView.scrollBy(je,Gt);else{let ui=J.scrollLeft,Di=J.scrollTop;Gt&&(J.scrollTop+=Gt),je&&(J.scrollLeft+=je);let _i=J.scrollLeft-ui,wn=J.scrollTop-Di;a={left:a.left-_i,top:a.top-wn,right:a.right-_i,bottom:a.bottom-wn}}if(he||/^(fixed|sticky)$/.test(getComputedStyle(N).position))break}}function Ka(b){let a=[],l=b.ownerDocument;for(let m=b;m&&(a.push({dom:m,top:m.scrollTop,left:m.scrollLeft}),b!=l);m=Mr(m));return a}function Tl(b,a){for(let l=0;l<b.length;l++){let{dom:m,top:E,left:D}=b[l];m.scrollTop!=E+a&&(m.scrollTop=E+a),m.scrollLeft!=D&&(m.scrollLeft=D)}}let ks=null;function vo(b,a){let l,E,he,Oe,m=2e8,D=0,N=a.top,J=a.top;for(let je=b.firstChild,Gt=0;je;je=je.nextSibling,Gt++){let ui;if(1==je.nodeType)ui=je.getClientRects();else{if(3!=je.nodeType)continue;ui=Ws(je).getClientRects()}for(let Di=0;Di<ui.length;Di++){let _i=ui[Di];if(_i.top<=N&&_i.bottom>=J){N=Math.max(_i.bottom,N),J=Math.min(_i.top,J);let wn=_i.left>a.left?_i.left-a.left:_i.right<a.left?a.left-_i.right:0;if(wn<m){l=je,m=wn,E=wn&&3==l.nodeType?{left:_i.right<a.left?_i.right:_i.left,top:a.top}:a,1==je.nodeType&&wn&&(D=Gt+(a.left>=(_i.left+_i.right)/2?1:0));continue}}else _i.top>a.top&&!he&&_i.left<=a.left&&_i.right>=a.left&&(he=je,Oe={left:Math.max(_i.left,Math.min(_i.right,a.left)),top:_i.top});!l&&(a.left>=_i.right&&a.top>=_i.top||a.left>=_i.left&&a.top>=_i.bottom)&&(D=Gt+1)}}return!l&&he&&(l=he,E=Oe,m=0),l&&3==l.nodeType?function Ja(b,a){let l=b.nodeValue.length,m=document.createRange();for(let E=0;E<l;E++){m.setEnd(b,E+1),m.setStart(b,E);let D=co(m,1);if(D.top!=D.bottom&&pl(a,D))return{node:b,offset:E+(a.left>=(D.left+D.right)/2?1:0)}}return{node:b,offset:0}}(l,E):!l||m&&1==l.nodeType?{node:b,offset:D}:vo(l,E)}function pl(b,a){return b.left>=a.left-1&&b.left<=a.right+1&&b.top>=a.top-1&&b.top<=a.bottom+1}function lc(b,a,l){let m=b.childNodes.length;if(m&&l.top<l.bottom)for(let E=Math.max(0,Math.min(m-1,Math.floor(m*(a.top-l.top)/(l.bottom-l.top))-2)),D=E;;){let N=b.childNodes[D];if(1==N.nodeType){let J=N.getClientRects();for(let he=0;he<J.length;he++){let Oe=J[he];if(pl(a,Oe))return lc(N,a,Oe)}}if((D=(D+1)%m)==E)break}return b}function Wo(b,a){let m,l=b.dom.ownerDocument,E=0,D=function ul(b,a,l){if(b.caretPositionFromPoint)try{let m=b.caretPositionFromPoint(a,l);if(m)return{node:m.offsetNode,offset:m.offset}}catch{}if(b.caretRangeFromPoint){let m=b.caretRangeFromPoint(a,l);if(m)return{node:m.startContainer,offset:m.startOffset}}}(l,a.left,a.top);D&&({node:m,offset:E}=D);let J,N=(b.root.elementFromPoint?b.root:l).elementFromPoint(a.left,a.top);if(!N||!b.dom.contains(1!=N.nodeType?N.parentNode:N)){let Oe=b.dom.getBoundingClientRect();if(!pl(a,Oe)||(N=lc(b.dom,a,Oe),!N))return null}if(gs)for(let Oe=N;m&&Oe;Oe=Mr(Oe))Oe.draggable&&(m=void 0);if(N=function yo(b,a){let l=b.parentNode;return l&&/^li$/i.test(l.nodeName)&&a.left<b.getBoundingClientRect().left?l:b}(N,a),m){if(eo&&1==m.nodeType&&(E=Math.min(E,m.childNodes.length),E<m.childNodes.length)){let je,Oe=m.childNodes[E];"IMG"==Oe.nodeName&&(je=Oe.getBoundingClientRect()).right<=a.left&&je.bottom>a.top&&E++}m==b.dom&&E==m.childNodes.length-1&&1==m.lastChild.nodeType&&a.top>m.lastChild.getBoundingClientRect().bottom?J=b.state.doc.content.size:(0==E||1!=m.nodeType||"BR"!=m.childNodes[E-1].nodeName)&&(J=function So(b,a,l,m){let E=-1;for(let D=a,N=!1;D!=b.dom;){let J=b.docView.nearestDesc(D,!0);if(!J)return null;if(1==J.dom.nodeType&&(J.node.isBlock&&J.parent&&!N||!J.contentDOM)){let he=J.dom.getBoundingClientRect();if(J.node.isBlock&&J.parent&&!N&&(N=!0,he.left>m.left||he.top>m.top?E=J.posBefore:(he.right<m.left||he.bottom<m.top)&&(E=J.posAfter)),!J.contentDOM&&E<0&&!J.node.isText)return(J.node.isBlock?m.top<(he.top+he.bottom)/2:m.left<(he.left+he.right)/2)?J.posBefore:J.posAfter}D=J.dom.parentNode}return E>-1?E:b.docView.posFromDOM(a,l,-1)}(b,m,E,a))}null==J&&(J=function ql(b,a,l){let{node:m,offset:E}=vo(a,l),D=-1;if(1==m.nodeType&&!m.firstChild){let N=m.getBoundingClientRect();D=N.left!=N.right&&l.left>(N.left+N.right)/2?1:-1}return b.docView.posFromDOM(m,E,D)}(b,N,a));let he=b.docView.nearestDesc(N,!0);return{pos:J,inside:he?he.posAtStart-he.border:-1}}function za(b){return b.top<b.bottom||b.left<b.right}function co(b,a){let l=b.getClientRects();if(l.length){let m=l[a<0?0:l.length-1];if(za(m))return m}return Array.prototype.find.call(l,za)||b.getBoundingClientRect()}const Qa=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ls(b,a,l){let{node:m,offset:E,atom:D}=b.docView.domFromPos(a,l<0?-1:1),N=jo||eo;if(3==m.nodeType){if(!N||!Qa.test(m.nodeValue)&&(l<0?E:E!=m.nodeValue.length)){let he=E,Oe=E,je=l<0?1:-1;return l<0&&!E?(Oe++,je=-1):l>=0&&E==m.nodeValue.length?(he--,je=1):l<0?he--:Oe++,el(co(Ws(m,he,Oe),je),je<0)}{let he=co(Ws(m,E,E),l);if(eo&&E&&/\s/.test(m.nodeValue[E-1])&&E<m.nodeValue.length){let Oe=co(Ws(m,E-1,E-1),-1);if(Oe.top==he.top){let je=co(Ws(m,E,E+1),-1);if(je.top!=he.top)return el(je,je.left<Oe.left)}}return he}}if(!b.state.doc.resolve(a-(D||0)).parent.inlineContent){if(null==D&&E&&(l<0||E==is(m))){let he=m.childNodes[E-1];if(1==he.nodeType)return ta(he.getBoundingClientRect(),!1)}if(null==D&&E<is(m)){let he=m.childNodes[E];if(1==he.nodeType)return ta(he.getBoundingClientRect(),!0)}return ta(m.getBoundingClientRect(),l>=0)}if(null==D&&E&&(l<0||E==is(m))){let he=m.childNodes[E-1],Oe=3==he.nodeType?Ws(he,is(he)-(N?0:1)):1!=he.nodeType||"BR"==he.nodeName&&he.nextSibling?null:he;if(Oe)return el(co(Oe,1),!1)}if(null==D&&E<is(m)){let he=m.childNodes[E];for(;he.pmViewDesc&&he.pmViewDesc.ignoreForCoords;)he=he.nextSibling;let Oe=he?3==he.nodeType?Ws(he,0,N?0:1):1==he.nodeType?he:null:null;if(Oe)return el(co(Oe,-1),!0)}return el(co(3==m.nodeType?Ws(m):m,-l),l>=0)}function el(b,a){if(0==b.width)return b;let l=a?b.left:b.right;return{top:b.top,bottom:b.bottom,left:l,right:l}}function ta(b,a){if(0==b.height)return b;let l=a?b.top:b.bottom;return{top:l,bottom:l,left:b.left,right:b.right}}function bo(b,a,l){let m=b.state,E=b.root.activeElement;m!=a&&b.updateState(a),E!=b.dom&&b.focus();try{return l()}finally{m!=a&&b.updateState(m),E!=b.dom&&E&&E.focus()}}const Ya=/[\u0590-\u08ac]/;let Il=null,ia=null,Xl=!1;class xo{constructor(a,l,m,E){this.parent=a,this.children=l,this.dom=m,this.contentDOM=E,this.dirty=0,m.pmViewDesc=this}matchesWidget(a){return!1}matchesMark(a){return!1}matchesNode(a,l,m){return!1}matchesHack(a){return!1}parseRule(){return null}stopEvent(a){return!1}get size(){let a=0;for(let l=0;l<this.children.length;l++)a+=this.children[l].size;return a}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let a=0;a<this.children.length;a++)this.children[a].destroy()}posBeforeChild(a){for(let l=0,m=this.posAtStart;;l++){let E=this.children[l];if(E==a)return m;m+=E.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(a,l,m){if(this.contentDOM&&this.contentDOM.contains(1==a.nodeType?a:a.parentNode)){if(m<0){let D,N;if(a==this.contentDOM)D=a.childNodes[l-1];else{for(;a.parentNode!=this.contentDOM;)a=a.parentNode;D=a.previousSibling}for(;D&&(!(N=D.pmViewDesc)||N.parent!=this);)D=D.previousSibling;return D?this.posBeforeChild(N)+N.size:this.posAtStart}{let D,N;if(a==this.contentDOM)D=a.childNodes[l];else{for(;a.parentNode!=this.contentDOM;)a=a.parentNode;D=a.nextSibling}for(;D&&(!(N=D.pmViewDesc)||N.parent!=this);)D=D.nextSibling;return D?this.posBeforeChild(N):this.posAtEnd}}let E;if(a==this.dom&&this.contentDOM)E=l>as(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))E=2&a.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==l)for(let D=a;;D=D.parentNode){if(D==this.dom){E=!1;break}if(D.previousSibling)break}if(null==E&&l==a.childNodes.length)for(let D=a;;D=D.parentNode){if(D==this.dom){E=!0;break}if(D.nextSibling)break}}return E??m>0?this.posAtEnd:this.posAtStart}nearestDesc(a,l=!1){for(let m=!0,E=a;E;E=E.parentNode){let N,D=this.getDesc(E);if(D&&(!l||D.node)){if(!m||!(N=D.nodeDOM)||(1==N.nodeType?N.contains(1==a.nodeType?a:a.parentNode):N==a))return D;m=!1}}}getDesc(a){let l=a.pmViewDesc;for(let m=l;m;m=m.parent)if(m==this)return l}posFromDOM(a,l,m){for(let E=a;E;E=E.parentNode){let D=this.getDesc(E);if(D)return D.localPosFromDOM(a,l,m)}return-1}descAt(a){for(let l=0,m=0;l<this.children.length;l++){let E=this.children[l],D=m+E.size;if(m==a&&D!=m){for(;!E.border&&E.children.length;)E=E.children[0];return E}if(a<D)return E.descAt(a-m-E.border);m=D}}domFromPos(a,l){if(!this.contentDOM)return{node:this.dom,offset:0,atom:a+1};let m=0,E=0;for(let D=0;m<this.children.length;m++){let N=this.children[m],J=D+N.size;if(J>a||N instanceof uo){E=a-D;break}D=J}if(E)return this.children[m].domFromPos(E-this.children[m].border,l);for(let D;m&&!(D=this.children[m-1]).size&&D instanceof il&&D.side>=0;m--);if(l<=0){let D,N=!0;for(;D=m?this.children[m-1]:null,D&&D.dom.parentNode!=this.contentDOM;m--,N=!1);return D&&l&&N&&!D.border&&!D.domAtom?D.domFromPos(D.size,l):{node:this.contentDOM,offset:D?as(D.dom)+1:0}}{let D,N=!0;for(;D=m<this.children.length?this.children[m]:null,D&&D.dom.parentNode!=this.contentDOM;m++,N=!1);return D&&N&&!D.border&&!D.domAtom?D.domFromPos(0,l):{node:this.contentDOM,offset:D?as(D.dom):this.contentDOM.childNodes.length}}}parseRange(a,l,m=0){if(0==this.children.length)return{node:this.contentDOM,from:a,to:l,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let E=-1,D=-1;for(let N=m,J=0;;J++){let he=this.children[J],Oe=N+he.size;if(-1==E&&a<=Oe){let je=N+he.border;if(a>=je&&l<=Oe-he.border&&he.node&&he.contentDOM&&this.contentDOM.contains(he.contentDOM))return he.parseRange(a,l,je);a=N;for(let Gt=J;Gt>0;Gt--){let ui=this.children[Gt-1];if(ui.size&&ui.dom.parentNode==this.contentDOM&&!ui.emptyChildAt(1)){E=as(ui.dom)+1;break}a-=ui.size}-1==E&&(E=0)}if(E>-1&&(Oe>l||J==this.children.length-1)){l=Oe;for(let je=J+1;je<this.children.length;je++){let Gt=this.children[je];if(Gt.size&&Gt.dom.parentNode==this.contentDOM&&!Gt.emptyChildAt(-1)){D=as(Gt.dom);break}l+=Gt.size}-1==D&&(D=this.contentDOM.childNodes.length);break}N=Oe}return{node:this.contentDOM,from:a,to:l,fromOffset:E,toOffset:D}}emptyChildAt(a){if(this.border||!this.contentDOM||!this.children.length)return!1;let l=this.children[a<0?0:this.children.length-1];return 0==l.size||l.emptyChildAt(a)}domAfterPos(a){let{node:l,offset:m}=this.domFromPos(a,0);if(1!=l.nodeType||m==l.childNodes.length)throw new RangeError("No node after pos "+a);return l.childNodes[m]}setSelection(a,l,m,E=!1){let D=Math.min(a,l),N=Math.max(a,l);for(let ui=0,Di=0;ui<this.children.length;ui++){let _i=this.children[ui],wn=Di+_i.size;if(D>Di&&N<wn)return _i.setSelection(a-Di-_i.border,l-Di-_i.border,m,E);Di=wn}let J=this.domFromPos(a,a?-1:1),he=l==a?J:this.domFromPos(l,l?-1:1),Oe=m.getSelection(),je=!1;if((eo||gs)&&a==l){let{node:ui,offset:Di}=J;if(3==ui.nodeType){if(je=!(!Di||"\n"!=ui.nodeValue[Di-1]),je&&Di==ui.nodeValue.length)for(let wn,_i=ui;_i;_i=_i.parentNode){if(wn=_i.nextSibling){"BR"==wn.nodeName&&(J=he={node:wn.parentNode,offset:as(wn)+1});break}let ar=_i.pmViewDesc;if(ar&&ar.node&&ar.node.isBlock)break}}else{let _i=ui.childNodes[Di-1];je=_i&&("BR"==_i.nodeName||"false"==_i.contentEditable)}}if(eo&&Oe.focusNode&&Oe.focusNode!=he.node&&1==Oe.focusNode.nodeType){let ui=Oe.focusNode.childNodes[Oe.focusOffset];ui&&"false"==ui.contentEditable&&(E=!0)}if(!(E||je&&gs)&&Ko(J.node,J.offset,Oe.anchorNode,Oe.anchorOffset)&&Ko(he.node,he.offset,Oe.focusNode,Oe.focusOffset))return;let Gt=!1;if((Oe.extend||a==l)&&!je){Oe.collapse(J.node,J.offset);try{a!=l&&Oe.extend(he.node,he.offset),Gt=!0}catch{}}if(!Gt){if(a>l){let Di=J;J=he,he=Di}let ui=document.createRange();ui.setEnd(he.node,he.offset),ui.setStart(J.node,J.offset),Oe.removeAllRanges(),Oe.addRange(ui)}}ignoreMutation(a){return!this.contentDOM&&"selection"!=a.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(a,l){for(let m=0,E=0;E<this.children.length;E++){let D=this.children[E],N=m+D.size;if(m==N?a<=N&&l>=m:a<N&&l>m){let J=m+D.border,he=N-D.border;if(a>=J&&l<=he)return this.dirty=a==m||l==N?2:1,void(a!=J||l!=he||!D.contentLost&&D.dom.parentNode==this.contentDOM?D.markDirty(a-J,l-J):D.dirty=3);D.dirty=D.dom!=D.contentDOM||D.dom.parentNode!=this.contentDOM||D.children.length?3:2}m=N}this.dirty=2}markParentsDirty(){let a=1;for(let l=this.parent;l;l=l.parent,a++){let m=1==a?2:1;l.dirty<m&&(l.dirty=m)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class il extends xo{constructor(a,l,m,E){let D,N=l.type.toDOM;if("function"==typeof N&&(N=N(m,()=>D?D.parent?D.parent.posBeforeChild(D):void 0:E)),!l.type.spec.raw){if(1!=N.nodeType){let J=document.createElement("span");J.appendChild(N),N=J}N.contentEditable="false",N.classList.add("ProseMirror-widget")}super(a,[],N,null),this.widget=l,this.widget=l,D=this}matchesWidget(a){return 0==this.dirty&&a.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(a){let l=this.widget.spec.stopEvent;return!!l&&l(a)}ignoreMutation(a){return"selection"!=a.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class gl extends xo{constructor(a,l,m,E){super(a,[],l,null),this.textDOM=m,this.text=E}get size(){return this.text.length}localPosFromDOM(a,l){return a!=this.textDOM?this.posAtStart+(l?this.size:0):this.posAtStart+l}domFromPos(a){return{node:this.textDOM,offset:a}}ignoreMutation(a){return"characterData"===a.type&&a.target.nodeValue==a.oldValue}}class Po extends xo{constructor(a,l,m,E){super(a,[],m,E),this.mark=l}static create(a,l,m,E){let D=E.nodeViews[l.type.name],N=D&&D(l,E,m);return(!N||!N.dom)&&(N=et.renderSpec(document,l.type.spec.toDOM(l,m))),new Po(a,l,N.dom,N.contentDOM||N.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(a){return 3!=this.dirty&&this.mark.eq(a)}markDirty(a,l){if(super.markDirty(a,l),0!=this.dirty){let m=this.parent;for(;!m.node;)m=m.parent;m.dirty<this.dirty&&(m.dirty=this.dirty),this.dirty=0}}slice(a,l,m){let E=Po.create(this.parent,this.mark,!0,m),D=this.children,N=this.size;l<N&&(D=Va(D,l,N,m)),a>0&&(D=Va(D,0,a,m));for(let J=0;J<D.length;J++)D[J].parent=E;return E.children=D,E}}class As extends xo{constructor(a,l,m,E,D,N,J,he,Oe){super(a,[],D,N),this.node=l,this.outerDeco=m,this.innerDeco=E,this.nodeDOM=J}static create(a,l,m,E,D,N){let he,J=D.nodeViews[l.type.name],Oe=J&&J(l,D,()=>he?he.parent?he.parent.posBeforeChild(he):void 0:N,m,E),je=Oe&&Oe.dom,Gt=Oe&&Oe.contentDOM;if(l.isText)if(je){if(3!=je.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else je=document.createTextNode(l.text);else je||({dom:je,contentDOM:Gt}=et.renderSpec(document,l.type.spec.toDOM(l)));!Gt&&!l.isText&&"BR"!=je.nodeName&&(je.hasAttribute("contenteditable")||(je.contentEditable="false"),l.type.spec.draggable&&(je.draggable=!0));let ui=je;return je=_a(je,m,l),Oe?he=new Ga(a,l,m,E,je,Gt||null,ui,Oe,D,N+1):l.isText?new rs(a,l,m,E,je,ui,D):new As(a,l,m,E,je,Gt||null,ui,D,N+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let a={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(a.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let l=this.children.length-1;l>=0;l--){let m=this.children[l];if(this.dom.contains(m.dom.parentNode)){a.contentElement=m.dom.parentNode;break}}a.contentElement||(a.getContent=()=>ze.empty)}else a.contentElement=this.contentDOM;else a.getContent=()=>this.node.content;return a}matchesNode(a,l,m){return 0==this.dirty&&a.eq(this.node)&&na(l,this.outerDeco)&&m.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(a,l){let m=this.node.inlineContent,E=l,D=a.composing?this.localCompositionInfo(a,l):null,N=D&&D.pos>-1?D:null,J=D&&D.pos<0,he=new zo(this,N&&N.node,a);(function ho(b,a,l,m){let E=a.locals(b),D=0;if(0==E.length){for(let Oe=0;Oe<b.childCount;Oe++){let je=b.child(Oe);m(je,E,a.forChild(D,je),Oe),D+=je.nodeSize}return}let N=0,J=[],he=null;for(let Oe=0;;){if(N<E.length&&E[N].to==D){let wn,_i=E[N++];for(;N<E.length&&E[N].to==D;)(wn||(wn=[_i])).push(E[N++]);if(wn){wn.sort(sa);for(let ar=0;ar<wn.length;ar++)l(wn[ar],Oe,!!he)}else l(_i,Oe,!!he)}let je,Gt;if(he)Gt=-1,je=he,he=null;else{if(!(Oe<b.childCount))break;Gt=Oe,je=b.child(Oe++)}for(let _i=0;_i<J.length;_i++)J[_i].to<=D&&J.splice(_i--,1);for(;N<E.length&&E[N].from<=D&&E[N].to>D;)J.push(E[N++]);let ui=D+je.nodeSize;if(je.isText){let _i=ui;N<E.length&&E[N].from<_i&&(_i=E[N].from);for(let wn=0;wn<J.length;wn++)J[wn].to<_i&&(_i=J[wn].to);_i<ui&&(he=je.cut(_i-D),je=je.cut(0,_i-D),ui=_i,Gt=-1)}m(je,je.isInline&&!je.isLeaf?J.filter(_i=>!_i.inline):J.slice(),a.forChild(D,je),Gt),D=ui}})(this.node,this.innerDeco,(Oe,je,Gt)=>{Oe.spec.marks?he.syncToMarks(Oe.spec.marks,m,a):Oe.type.side>=0&&!Gt&&he.syncToMarks(je==this.node.childCount?Jt.none:this.node.child(je).marks,m,a),he.placeWidget(Oe,a,E)},(Oe,je,Gt,ui)=>{let Di;he.syncToMarks(Oe.marks,m,a),he.findNodeMatch(Oe,je,Gt,ui)||J&&a.state.selection.from>E&&a.state.selection.to<E+Oe.nodeSize&&(Di=he.findIndexWithChild(D.node))>-1&&he.updateNodeAt(Oe,je,Gt,Di,a)||he.updateNextNode(Oe,je,Gt,a,ui,E)||he.addNode(Oe,je,Gt,a,E),E+=Oe.nodeSize}),he.syncToMarks([],m,a),this.node.isTextblock&&he.addTextblockHacks(),he.destroyRest(),(he.changed||2==this.dirty)&&(N&&this.protectLocalComposition(a,N),Na(this.contentDOM,this.children,a),Ys&&function Ol(b){if("UL"==b.nodeName||"OL"==b.nodeName){let a=b.style.cssText;b.style.cssText=a+"; list-style: square !important",window.getComputedStyle(b),b.style.cssText=a}}(this.dom))}localCompositionInfo(a,l){let{from:m,to:E}=a.state.selection;if(!(a.state.selection instanceof or)||m<l||E>l+this.node.content.size)return null;let D=a.domSelectionRange(),N=function oa(b,a){for(;;){if(3==b.nodeType)return b;if(1==b.nodeType&&a>0){if(b.childNodes.length>a&&3==b.childNodes[a].nodeType)return b.childNodes[a];a=is(b=b.childNodes[a-1])}else{if(!(1==b.nodeType&&a<b.childNodes.length))return null;b=b.childNodes[a],a=0}}}(D.focusNode,D.focusOffset);if(!N||!this.dom.contains(N.parentNode))return null;if(this.node.inlineContent){let J=N.nodeValue,he=function nl(b,a,l,m){for(let E=0,D=0;E<b.childCount&&D<=m;){let N=b.child(E++),J=D;if(D+=N.nodeSize,!N.isText)continue;let he=N.text;for(;E<b.childCount;){let Oe=b.child(E++);if(D+=Oe.nodeSize,!Oe.isText)break;he+=Oe.text}if(D>=l){let Oe=J<m?he.lastIndexOf(a,m-J-1):-1;if(Oe>=0&&Oe+a.length+J>=l)return J+Oe;if(l==m&&he.length>=m+a.length-J&&he.slice(m-J,m-J+a.length)==a)return m}}return-1}(this.node.content,J,m-l,E-l);return he<0?null:{node:N,pos:he,text:J}}return{node:N,pos:-1,text:""}}protectLocalComposition(a,{node:l,pos:m,text:E}){if(this.getDesc(l))return;let D=l;for(;D.parentNode!=this.contentDOM;D=D.parentNode){for(;D.previousSibling;)D.parentNode.removeChild(D.previousSibling);for(;D.nextSibling;)D.parentNode.removeChild(D.nextSibling);D.pmViewDesc&&(D.pmViewDesc=void 0)}let N=new gl(this,D,l,E);a.input.compositionNodes.push(N),this.children=Va(this.children,m,m+E.length,a,N)}update(a,l,m,E){return!(3==this.dirty||!a.sameMarkup(this.node)||(this.updateInner(a,l,m,E),0))}updateInner(a,l,m,E){this.updateOuterDeco(l),this.node=a,this.innerDeco=m,this.contentDOM&&this.updateChildren(E,this.posAtStart),this.dirty=0}updateOuterDeco(a){if(na(a,this.outerDeco))return;let l=1!=this.nodeDOM.nodeType,m=this.dom;this.dom=Gr(this.dom,this.nodeDOM,ko(this.outerDeco,this.node,l),ko(a,this.node,l)),this.dom!=m&&(m.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=a}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Ba(b,a,l,m,E){_a(m,a,b);let D=new As(void 0,b,a,l,m,m,m,E,0);return D.contentDOM&&D.updateChildren(E,0),D}class rs extends As{constructor(a,l,m,E,D,N,J){super(a,l,m,E,D,null,N,J,0)}parseRule(){let a=this.nodeDOM.parentNode;for(;a&&a!=this.dom&&!a.pmIsDeco;)a=a.parentNode;return{skip:a||!0}}update(a,l,m,E){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!a.sameMarkup(this.node)||(this.updateOuterDeco(l),(0!=this.dirty||a.text!=this.node.text)&&a.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=a.text,E.trackWrites==this.nodeDOM&&(E.trackWrites=null)),this.node=a,this.dirty=0,0))}inParent(){let a=this.parent.contentDOM;for(let l=this.nodeDOM;l;l=l.parentNode)if(l==a)return!0;return!1}domFromPos(a){return{node:this.nodeDOM,offset:a}}localPosFromDOM(a,l,m){return a==this.nodeDOM?this.posAtStart+Math.min(l,this.node.text.length):super.localPosFromDOM(a,l,m)}ignoreMutation(a){return"characterData"!=a.type&&"selection"!=a.type}slice(a,l,m){let E=this.node.cut(a,l),D=document.createTextNode(E.text);return new rs(this.parent,E,this.outerDeco,this.innerDeco,D,D,m)}markDirty(a,l){super.markDirty(a,l),this.dom!=this.nodeDOM&&(0==a||l==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class uo extends xo{parseRule(){return{ignore:!0}}matchesHack(a){return 0==this.dirty&&this.dom.nodeName==a}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Ga extends As{constructor(a,l,m,E,D,N,J,he,Oe,je){super(a,l,m,E,D,N,J,Oe,je),this.spec=he}update(a,l,m,E){if(3==this.dirty)return!1;if(this.spec.update){let D=this.spec.update(a,l,m);return D&&this.updateInner(a,l,m,E),D}return!(!this.contentDOM&&!a.isLeaf)&&super.update(a,l,m,E)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(a,l,m,E){this.spec.setSelection?this.spec.setSelection(a,l,m):super.setSelection(a,l,m,E)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(a){return!!this.spec.stopEvent&&this.spec.stopEvent(a)}ignoreMutation(a){return this.spec.ignoreMutation?this.spec.ignoreMutation(a):super.ignoreMutation(a)}}function Na(b,a,l){let m=b.firstChild,E=!1;for(let D=0;D<a.length;D++){let N=a[D],J=N.dom;if(J.parentNode==b){for(;J!=m;)m=ra(m),E=!0;m=m.nextSibling}else E=!0,b.insertBefore(J,m);if(N instanceof Po){let he=m?m.previousSibling:b.lastChild;Na(N.contentDOM,N.children,l),m=he?he.nextSibling:b.firstChild}}for(;m;)m=ra(m),E=!0;E&&l.trackWrites==b&&(l.trackWrites=null)}const qs=function(b){b&&(this.nodeName=b)};qs.prototype=Object.create(null);const qo=[new qs];function ko(b,a,l){if(0==b.length)return qo;let m=l?qo[0]:new qs,E=[m];for(let D=0;D<b.length;D++){let N=b[D].type.attrs;if(N){N.nodeName&&E.push(m=new qs(N.nodeName));for(let J in N){let he=N[J];null!=he&&(l&&1==E.length&&E.push(m=new qs(a.isInline?"span":"div")),"class"==J?m.class=(m.class?m.class+" ":"")+he:"style"==J?m.style=(m.style?m.style+";":"")+he:"nodeName"!=J&&(m[J]=he))}}}return E}function Gr(b,a,l,m){if(l==qo&&m==qo)return a;let E=a;for(let D=0;D<m.length;D++){let N=m[D],J=l[D];if(D){let he;J&&J.nodeName==N.nodeName&&E!=b&&(he=E.parentNode)&&he.nodeName.toLowerCase()==N.nodeName||(he=document.createElement(N.nodeName),he.pmIsDeco=!0,he.appendChild(E),J=qo[0]),E=he}_l(E,J||qo[0],N)}return E}function _l(b,a,l){for(let m in a)"class"!=m&&"style"!=m&&"nodeName"!=m&&!(m in l)&&b.removeAttribute(m);for(let m in l)"class"!=m&&"style"!=m&&"nodeName"!=m&&l[m]!=a[m]&&b.setAttribute(m,l[m]);if(a.class!=l.class){let m=a.class?a.class.split(" ").filter(Boolean):[],E=l.class?l.class.split(" ").filter(Boolean):[];for(let D=0;D<m.length;D++)-1==E.indexOf(m[D])&&b.classList.remove(m[D]);for(let D=0;D<E.length;D++)-1==m.indexOf(E[D])&&b.classList.add(E[D]);0==b.classList.length&&b.removeAttribute("class")}if(a.style!=l.style){if(a.style){let E,m=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;E=m.exec(a.style);)b.style.removeProperty(E[1])}l.style&&(b.style.cssText+=l.style)}}function _a(b,a,l){return Gr(b,b,qo,ko(a,l,1!=b.nodeType))}function na(b,a){if(b.length!=a.length)return!1;for(let l=0;l<b.length;l++)if(!b[l].type.eq(a[l].type))return!1;return!0}function ra(b){let a=b.nextSibling;return b.parentNode.removeChild(b),a}class zo{constructor(a,l,m){this.lock=l,this.view=m,this.index=0,this.stack=[],this.changed=!1,this.top=a,this.preMatch=function vl(b,a){let l=a,m=l.children.length,E=b.childCount,D=new Map,N=[];e:for(;E>0;){let J;for(;;)if(m){let Oe=l.children[m-1];if(!(Oe instanceof Po)){J=Oe,m--;break}l=Oe,m=Oe.children.length}else{if(l==a)break e;m=l.parent.children.indexOf(l),l=l.parent}let he=J.node;if(he){if(he!=b.child(E-1))break;--E,D.set(J,E),N.push(J)}}return{index:E,matched:D,matches:N.reverse()}}(a.node.content,a)}destroyBetween(a,l){if(a!=l){for(let m=a;m<l;m++)this.top.children[m].destroy();this.top.children.splice(a,l-a),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(a,l,m){let E=0,D=this.stack.length>>1,N=Math.min(D,a.length);for(;E<N&&(E==D-1?this.top:this.stack[E+1<<1]).matchesMark(a[E])&&!1!==a[E].type.spec.spanning;)E++;for(;E<D;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),D--;for(;D<a.length;){this.stack.push(this.top,this.index+1);let J=-1;for(let he=this.index;he<Math.min(this.index+3,this.top.children.length);he++){let Oe=this.top.children[he];if(Oe.matchesMark(a[D])&&!this.isLocked(Oe.dom)){J=he;break}}if(J>-1)J>this.index&&(this.changed=!0,this.destroyBetween(this.index,J)),this.top=this.top.children[this.index];else{let he=Po.create(this.top,a[D],l,m);this.top.children.splice(this.index,0,he),this.top=he,this.changed=!0}this.index=0,D++}}findNodeMatch(a,l,m,E){let N,D=-1;if(E>=this.preMatch.index&&(N=this.preMatch.matches[E-this.preMatch.index]).parent==this.top&&N.matchesNode(a,l,m))D=this.top.children.indexOf(N,this.index);else for(let J=this.index,he=Math.min(this.top.children.length,J+5);J<he;J++){let Oe=this.top.children[J];if(Oe.matchesNode(a,l,m)&&!this.preMatch.matched.has(Oe)){D=J;break}}return!(D<0||(this.destroyBetween(this.index,D),this.index++,0))}updateNodeAt(a,l,m,E,D){let N=this.top.children[E];return 3==N.dirty&&N.dom==N.contentDOM&&(N.dirty=2),!!N.update(a,l,m,D)&&(this.destroyBetween(this.index,E),this.index++,!0)}findIndexWithChild(a){for(;;){let l=a.parentNode;if(!l)return-1;if(l==this.top.contentDOM){let m=a.pmViewDesc;if(m)for(let E=this.index;E<this.top.children.length;E++)if(this.top.children[E]==m)return E;return-1}a=l}}updateNextNode(a,l,m,E,D,N){for(let J=this.index;J<this.top.children.length;J++){let he=this.top.children[J];if(he instanceof As){let Oe=this.preMatch.matched.get(he);if(null!=Oe&&Oe!=D)return!1;let Gt,je=he.dom,ui=this.isLocked(je)&&!(a.isText&&he.node&&he.node.isText&&he.nodeDOM.nodeValue==a.text&&3!=he.dirty&&na(l,he.outerDeco));if(!ui&&he.update(a,l,m,E))return this.destroyBetween(this.index,J),he.dom!=je&&(this.changed=!0),this.index++,!0;if(!ui&&(Gt=this.recreateWrapper(he,a,l,m,E,N)))return this.top.children[this.index]=Gt,Gt.dirty=2,Gt.updateChildren(E,N+1),Gt.dirty=0,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(a,l,m,E,D,N){if(a.dirty||l.isAtom||!a.children.length||!a.node.content.eq(l.content))return null;let J=As.create(this.top,l,m,E,D,N);if(!J.contentDOM)return null;J.children=a.children,a.children=[],a.destroy();for(let he of J.children)he.parent=J;return J}addNode(a,l,m,E,D){let N=As.create(this.top,a,l,m,E,D);N.contentDOM&&N.updateChildren(E,D+1),this.top.children.splice(this.index++,0,N),this.changed=!0}placeWidget(a,l,m){let E=this.index<this.top.children.length?this.top.children[this.index]:null;if(!E||!E.matchesWidget(a)||a!=E.widget&&E.widget.type.toDOM.parentNode){let D=new il(this.top,a,l,m);this.top.children.splice(this.index++,0,D),this.changed=!0}else this.index++}addTextblockHacks(){let a=this.top.children[this.index-1],l=this.top;for(;a instanceof Po;)l=a,a=l.children[l.children.length-1];(!a||!(a instanceof rs)||/\n$/.test(a.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(a.node.text))&&((gs||Ts)&&a&&"false"==a.dom.contentEditable&&this.addHackNode("IMG",l),this.addHackNode("BR",this.top))}addHackNode(a,l){if(l==this.top&&this.index<l.children.length&&l.children[this.index].matchesHack(a))this.index++;else{let m=document.createElement(a);"IMG"==a&&(m.className="ProseMirror-separator",m.alt=""),"BR"==a&&(m.className="ProseMirror-trailingBreak");let E=new uo(this.top,[],m,null);l!=this.top?l.children.push(E):l.children.splice(this.index++,0,E),this.changed=!0}}isLocked(a){return this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))}}function sa(b,a){return b.type.side-a.type.side}function Va(b,a,l,m,E){let D=[];for(let N=0,J=0;N<b.length;N++){let he=b[N],Oe=J,je=J+=he.size;Oe>=l||je<=a?D.push(he):(Oe<a&&D.push(he.slice(0,a-Oe,m)),E&&(D.push(E),E=void 0),je>l&&D.push(he.slice(l-Oe,he.size,m)))}return D}function $a(b,a=null){let l=b.domSelectionRange(),m=b.state.doc;if(!l.focusNode)return null;let E=b.docView.nearestDesc(l.focusNode),D=E&&0==E.size,N=b.docView.posFromDOM(l.focusNode,l.focusOffset,1);if(N<0)return null;let he,Oe,J=m.resolve(N);if(Jo(l)){for(he=J;E&&!E.node;)E=E.parent;let je=E.node;if(E&&je.isAtom&&yr.isSelectable(je)&&E.parent&&(!je.isInline||!function Ro(b,a,l){for(let m=0==a,E=a==is(b);m||E;){if(b==l)return!0;let D=as(b);if(!(b=b.parentNode))return!1;m=m&&0==D,E=E&&D==is(b)}}(l.focusNode,l.focusOffset,E.dom))){let Gt=E.posBefore;Oe=new yr(N==Gt?J:m.resolve(Gt))}}else{let je=b.docView.posFromDOM(l.anchorNode,l.anchorOffset,1);if(je<0)return null;he=m.resolve(je)}return Oe||(Oe=ri(b,he,J,"pointer"==a||b.state.selection.head<J.pos&&!D?1:-1)),Oe}function rl(b){return b.editable?b.hasFocus():Vi(b)&&document.activeElement&&document.activeElement.contains(b.dom)}function Bs(b,a=!1){let l=b.state.selection;if(Ie(b,l),rl(b)){if(!a&&b.input.mouseDown&&b.input.mouseDown.allowDefault&&Ts){let m=b.domSelectionRange(),E=b.domObserver.currentSelection;if(m.anchorNode&&E.anchorNode&&Ko(m.anchorNode,m.anchorOffset,E.anchorNode,E.anchorOffset))return b.input.mouseDown.delayedSelectionSync=!0,void b.domObserver.setCurSelection()}if(b.domObserver.disconnectSelection(),b.cursorWrapper)!function de(b){let a=b.domSelection(),l=document.createRange(),m=b.cursorWrapper.dom,E="IMG"==m.nodeName;E?l.setEnd(m.parentNode,as(m)+1):l.setEnd(m,0),l.collapse(!1),a.removeAllRanges(),a.addRange(l),!E&&!b.state.selection.visible&&Jr&&Cr<=11&&(m.disabled=!0,m.disabled=!1)}(b);else{let D,N,{anchor:m,head:E}=l;cs&&!(l instanceof or)&&(l.$from.parent.inlineContent||(D=Mn(b,l.from)),!l.empty&&!l.$from.parent.inlineContent&&(N=Mn(b,l.to))),b.docView.setSelection(m,E,b.root,a),cs&&(D&&A(D),N&&A(N)),l.visible?b.dom.classList.remove("ProseMirror-hideselection"):(b.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function U(b){let a=b.dom.ownerDocument;a.removeEventListener("selectionchange",b.input.hideSelectionGuard);let l=b.domSelectionRange(),m=l.anchorNode,E=l.anchorOffset;a.addEventListener("selectionchange",b.input.hideSelectionGuard=()=>{(l.anchorNode!=m||l.anchorOffset!=E)&&(a.removeEventListener("selectionchange",b.input.hideSelectionGuard),setTimeout(()=>{(!rl(b)||b.state.selection.visible)&&b.dom.classList.remove("ProseMirror-hideselection")},20))})}(b))}b.domObserver.setCurSelection(),b.domObserver.connectSelection()}}const cs=gs||Ts&&hl<63;function Mn(b,a){let{node:l,offset:m}=b.docView.domFromPos(a,0),E=m<l.childNodes.length?l.childNodes[m]:null,D=m?l.childNodes[m-1]:null;if(gs&&E&&"false"==E.contentEditable)return p(E);if(!(E&&"false"!=E.contentEditable||D&&"false"!=D.contentEditable)){if(E)return p(E);if(D)return p(D)}}function p(b){return b.contentEditable="true",gs&&b.draggable&&(b.draggable=!1,b.wasDraggable=!0),b}function A(b){b.contentEditable="false",b.wasDraggable&&(b.draggable=!0,b.wasDraggable=null)}function Ie(b,a){if(a instanceof yr){let l=b.docView.descAt(a.from);l!=b.lastSelectedViewDesc&&(lt(b),l&&l.selectNode(),b.lastSelectedViewDesc=l)}else lt(b)}function lt(b){b.lastSelectedViewDesc&&(b.lastSelectedViewDesc.parent&&b.lastSelectedViewDesc.deselectNode(),b.lastSelectedViewDesc=void 0)}function ri(b,a,l,m){return b.someProp("createSelectionBetween",E=>E(b,a,l))||or.between(a,l,m)}function Si(b){return!(b.editable&&!b.hasFocus())&&Vi(b)}function Vi(b){let a=b.domSelectionRange();if(!a.anchorNode)return!1;try{return b.dom.contains(3==a.anchorNode.nodeType?a.anchorNode.parentNode:a.anchorNode)&&(b.editable||b.dom.contains(3==a.focusNode.nodeType?a.focusNode.parentNode:a.focusNode))}catch{return!1}}function $n(b,a){let{$anchor:l,$head:m}=b.selection,E=a>0?l.max(m):l.min(m),D=E.parent.inlineContent?E.depth?b.doc.resolve(a>0?E.after():E.before()):null:E;return D&&nr.findFrom(D,a)}function Un(b,a){return b.dispatch(b.state.tr.setSelection(a).scrollIntoView()),!0}function Ir(b,a,l){let m=b.state.selection;if(!(m instanceof or)){if(m instanceof yr&&m.node.isInline)return Un(b,new or(a>0?m.$to:m.$from));{let E=$n(b.state,a);return!!E&&Un(b,E)}}if(!m.empty||l.indexOf("s")>-1)return!1;if(b.endOfTextblock(a>0?"forward":"backward")){let E=$n(b.state,a);return!!(E&&E instanceof yr)&&Un(b,E)}if(!(Es&&l.indexOf("m")>-1)){let N,E=m.$head,D=E.textOffset?null:a<0?E.nodeBefore:E.nodeAfter;if(!D||D.isText)return!1;let J=a<0?E.pos-D.nodeSize:E.pos;return!!(D.isAtom||(N=b.docView.descAt(J))&&!N.contentDOM)&&(yr.isSelectable(D)?Un(b,new yr(a<0?b.state.doc.resolve(E.pos-D.nodeSize):E)):!!jo&&Un(b,new or(b.state.doc.resolve(a<0?J:J+D.nodeSize))))}}function Lr(b){return 3==b.nodeType?b.nodeValue.length:b.childNodes.length}function _s(b){if("false"==b.contentEditable)return!0;let a=b.pmViewDesc;return a&&0==a.size&&(b.nextSibling||"BR"!=b.nodeName)}function Os(b,a){return a<0?function Gs(b){let a=b.domSelectionRange(),l=a.focusNode,m=a.focusOffset;if(!l)return;let E,D,N=!1;for(eo&&1==l.nodeType&&m<Lr(l)&&_s(l.childNodes[m])&&(N=!0);;)if(m>0){if(1!=l.nodeType)break;{let J=l.childNodes[m-1];if(_s(J))E=l,D=--m;else{if(3!=J.nodeType)break;l=J,m=l.nodeValue.length}}}else{if(va(l))break;{let J=l.previousSibling;for(;J&&_s(J);)E=l.parentNode,D=as(J),J=J.previousSibling;if(J)l=J,m=Lr(l);else{if(l=l.parentNode,l==b.dom)break;m=0}}}N?Ha(b,l,m):E&&Ha(b,E,D)}(b):To(b)}function To(b){let a=b.domSelectionRange(),l=a.focusNode,m=a.focusOffset;if(!l)return;let D,N,E=Lr(l);for(;;)if(m<E){if(1!=l.nodeType)break;if(!_s(l.childNodes[m]))break;D=l,N=++m}else{if(va(l))break;{let J=l.nextSibling;for(;J&&_s(J);)D=J.parentNode,N=as(J)+1,J=J.nextSibling;if(J)l=J,m=0,E=Lr(l);else{if(l=l.parentNode,l==b.dom)break;m=E=0}}}D&&Ha(b,D,N)}function va(b){let a=b.pmViewDesc;return a&&a.node&&a.node.isBlock}function Ha(b,a,l){if(3!=a.nodeType){let D,N;(N=function po(b,a){for(;b&&a==b.childNodes.length&&!ao(b);)a=as(b)+1,b=b.parentNode;for(;b&&a<b.childNodes.length;){if(3==(b=b.childNodes[a]).nodeType)return b;a=0}}(a,l))?(a=N,l=0):(D=function Fl(b,a){for(;b&&!a&&!ao(b);)a=as(b),b=b.parentNode;for(;b&&a;){if(3==(b=b.childNodes[a-1]).nodeType)return b;a=b.childNodes.length}}(a,l))&&(a=D,l=D.nodeValue.length)}let m=b.domSelection();if(Jo(m)){let D=document.createRange();D.setEnd(a,l),D.setStart(a,l),m.removeAllRanges(),m.addRange(D)}else m.extend&&m.extend(a,l);b.domObserver.setCurSelection();let{state:E}=b;setTimeout(()=>{b.state==E&&Bs(b)},50)}function Fo(b,a){let l=b.state.doc.resolve(a);if(!Ts&&!Cc&&l.parent.inlineContent){let E=b.coordsAtPos(a);if(a>l.start()){let D=b.coordsAtPos(a-1),N=(D.top+D.bottom)/2;if(N>E.top&&N<E.bottom&&Math.abs(D.left-E.left)>1)return D.left<E.left?"ltr":"rtl"}if(a<l.end()){let D=b.coordsAtPos(a+1),N=(D.top+D.bottom)/2;if(N>E.top&&N<E.bottom&&Math.abs(D.left-E.left)>1)return D.left>E.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(b.dom).direction?"rtl":"ltr"}function sl(b,a,l){let m=b.state.selection;if(m instanceof or&&!m.empty||l.indexOf("s")>-1||Es&&l.indexOf("m")>-1)return!1;let{$from:E,$to:D}=m;if(!E.parent.inlineContent||b.endOfTextblock(a<0?"up":"down")){let N=$n(b.state,a);if(N&&N instanceof yr)return Un(b,N)}if(!E.parent.inlineContent){let N=a<0?E:D,J=m instanceof bs?nr.near(N,a):nr.findFrom(N,a);return!!J&&Un(b,J)}return!1}function Ye(b,a){if(!(b.state.selection instanceof or))return!0;let{$head:l,$anchor:m,empty:E}=b.state.selection;if(!l.sameParent(m))return!0;if(!E)return!1;if(b.endOfTextblock(a>0?"forward":"backward"))return!0;let D=!l.textOffset&&(a<0?l.nodeBefore:l.nodeAfter);if(D&&!D.isText){let N=b.state.tr;return a<0?N.delete(l.pos-D.nodeSize,l.pos):N.delete(l.pos,l.pos+D.nodeSize),b.dispatch(N),!0}return!1}function ne(b,a,l){b.domObserver.stop(),a.contentEditable=l,b.domObserver.start()}function an(b,a){b.someProp("transformCopied",Di=>{a=Di(a,b)});let l=[],{content:m,openStart:E,openEnd:D}=a;for(;E>1&&D>1&&1==m.childCount&&1==m.firstChild.childCount;){E--,D--;let Di=m.firstChild;l.push(Di.type.name,Di.attrs!=Di.type.defaultAttrs?Di.attrs:null),m=Di.content}let N=b.someProp("clipboardSerializer")||et.fromSchema(b.state.schema),J=ud(),he=J.createElement("div");he.appendChild(N.serializeFragment(m,{document:J}));let je,Oe=he.firstChild,Gt=0;for(;Oe&&1==Oe.nodeType&&(je=ed[Oe.nodeName.toLowerCase()]);){for(let Di=je.length-1;Di>=0;Di--){let _i=J.createElement(je[Di]);for(;he.firstChild;)_i.appendChild(he.firstChild);he.appendChild(_i),Gt++}Oe=he.firstChild}return Oe&&1==Oe.nodeType&&Oe.setAttribute("data-pm-slice",`${E} ${D}${Gt?` -${Gt}`:""} ${JSON.stringify(l)}`),{dom:he,text:b.someProp("clipboardTextSerializer",Di=>Di(a,b))||a.content.textBetween(0,a.content.size,"\n\n")}}function Hn(b,a,l,m,E){let N,J,D=E.parent.type.spec.code;if(!l&&!a)return null;let he=a&&(m||D||!l);if(he){if(b.someProp("transformPastedText",ui=>{a=ui(a,D||m,b)}),D)return a?new rt(ze.from(b.state.schema.text(a.replace(/\r\n?/g,"\n"))),0,0):rt.empty;let Gt=b.someProp("clipboardTextParser",ui=>ui(a,E,m,b));if(Gt)J=Gt;else{let ui=E.marks(),{schema:Di}=b.state,_i=et.fromSchema(Di);N=document.createElement("div"),a.split(/(?:\r\n?|\n)+/).forEach(wn=>{let ar=N.appendChild(document.createElement("p"));wn&&ar.appendChild(_i.serializeNode(Di.text(wn,ui)))})}}else b.someProp("transformPastedHTML",Gt=>{l=Gt(l,b)}),N=function ol(b){let a=/^(\s*<meta [^>]*>)*/.exec(b);a&&(b=b.slice(a[0].length));let E,l=ud().createElement("div"),m=/<([a-z][^>\s]+)/i.exec(b);if((E=m&&ed[m[1].toLowerCase()])&&(b=E.map(D=>"<"+D+">").join("")+b+E.map(D=>"</"+D+">").reverse().join("")),l.innerHTML=b,E)for(let D=0;D<E.length;D++)l=l.querySelector(E[D])||l;return l}(l),jo&&function yl(b){let a=b.querySelectorAll(Ts?"span:not([class]):not([style])":"span.Apple-converted-space");for(let l=0;l<a.length;l++){let m=a[l];1==m.childNodes.length&&"\xa0"==m.textContent&&m.parentNode&&m.parentNode.replaceChild(b.ownerDocument.createTextNode(" "),m)}}(N);let Oe=N&&N.querySelector("[data-pm-slice]"),je=Oe&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(Oe.getAttribute("data-pm-slice")||"");if(je&&je[3])for(let Gt=+je[3];Gt>0;Gt--){let ui=N.firstChild;for(;ui&&1!=ui.nodeType;)ui=ui.nextSibling;if(!ui)break;N=ui}if(J||(J=(b.someProp("clipboardParser")||b.someProp("domParser")||Yr.fromSchema(b.state.schema)).parseSlice(N,{preserveWhitespace:!(!he&&!je),context:E,ruleFromNode:ui=>"BR"!=ui.nodeName||ui.nextSibling||!ui.parentNode||Pr.test(ui.parentNode.nodeName)?null:{ignore:!0}})),je)J=function ba(b,a){if(!b.size)return b;let m,l=b.content.firstChild.type.schema;try{m=JSON.parse(a)}catch{return b}let{content:E,openStart:D,openEnd:N}=b;for(let J=m.length-2;J>=0;J-=2){let he=l.nodes[m[J]];if(!he||he.hasRequiredAttrs())break;E=ze.from(he.create(m[J+1],E)),D++,N++}return new rt(E,D,N)}(zd(J,+je[1],+je[2]),je[4]);else if(J=rt.maxOpen(function Fr(b,a){if(b.childCount<2)return b;for(let l=a.depth;l>=0;l--){let D,E=a.node(l).contentMatchAt(a.index(l)),N=[];if(b.forEach(J=>{if(!N)return;let Oe,he=E.findWrapping(J.type);if(!he)return N=null;if(Oe=N.length&&D.length&&Ns(he,D,J,N[N.length-1],0))N[N.length-1]=Oe;else{N.length&&(N[N.length-1]=Qc(N[N.length-1],D.length));let je=xs(J,he);N.push(je),E=E.matchType(je.type),D=he}}),N)return ze.from(N)}return b}(J.content,E),!0),J.openStart||J.openEnd){let Gt=0,ui=0;for(let Di=J.content.firstChild;Gt<J.openStart&&!Di.type.spec.isolating;Gt++,Di=Di.firstChild);for(let Di=J.content.lastChild;ui<J.openEnd&&!Di.type.spec.isolating;ui++,Di=Di.lastChild);J=zd(J,Gt,ui)}return b.someProp("transformPasted",Gt=>{J=Gt(J,b)}),J}const Pr=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xs(b,a,l=0){for(let m=a.length-1;m>=l;m--)b=a[m].create(null,ze.from(b));return b}function Ns(b,a,l,m,E){if(E<b.length&&E<a.length&&b[E]==a[E]){let D=Ns(b,a,l,m.lastChild,E+1);if(D)return m.copy(m.content.replaceChild(m.childCount-1,D));if(m.contentMatchAt(m.childCount).matchType(E==b.length-1?l.type:b[E+1]))return m.copy(m.content.append(ze.from(xs(l,b,E+1))))}}function Qc(b,a){if(0==a)return b;let l=b.content.replaceChild(b.childCount-1,Qc(b.lastChild,a-1)),m=b.contentMatchAt(b.childCount).fillBefore(ze.empty,!0);return b.copy(l.append(m))}function Lc(b,a,l,m,E,D){let N=a<0?b.firstChild:b.lastChild,J=N.content;return b.childCount>1&&(D=0),E<m-1&&(J=Lc(J,a,l,m,E+1,D)),E>=l&&(J=a<0?N.contentMatchAt(0).fillBefore(J,D<=E).append(J):J.append(N.contentMatchAt(N.childCount).fillBefore(ze.empty,!0))),b.replaceChild(a<0?0:b.childCount-1,N.copy(J))}function zd(b,a,l){return a<b.openStart&&(b=new rt(Lc(b.content,-1,a,b.openStart,0,b.openEnd),a,b.openEnd)),l<b.openEnd&&(b=new rt(Lc(b.content,1,l,b.openEnd,0,0),b.openStart,l)),b}const ed={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ya=null;function ud(){return ya||(ya=document.implementation.createHTMLDocument("title"))}const Xs={},ds={},Vn={touchstart:!0,touchmove:!0};class hd{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function aa(b,a){b.input.lastSelectionOrigin=a,b.input.lastSelectionTime=Date.now()}function An(b){b.someProp("handleDOMEvents",a=>{for(let l in a)b.input.eventHandlers[l]||b.dom.addEventListener(l,b.input.eventHandlers[l]=m=>cc(b,m))})}function cc(b,a){return b.someProp("handleDOMEvents",l=>{let m=l[a.type];return!!m&&(m(b,a)||a.defaultPrevented)})}function cu(b,a){if(!a.bubbles)return!0;if(a.defaultPrevented)return!1;for(let l=a.target;l!=b.dom;l=l.parentNode)if(!l||11==l.nodeType||l.pmViewDesc&&l.pmViewDesc.stopEvent(a))return!1;return!0}function dc(b){return{left:b.clientX,top:b.clientY}}function td(b,a,l,m,E){if(-1==m)return!1;let D=b.state.doc.resolve(m);for(let N=D.depth+1;N>0;N--)if(b.someProp(a,J=>N>D.depth?J(b,l,D.nodeAfter,D.before(N),E,!0):J(b,l,D.node(N),D.before(N),E,!1)))return!0;return!1}function uc(b,a,l){b.focused||b.focus();let m=b.state.tr.setSelection(a);"pointer"==l&&m.setMeta("pointer",!0),b.dispatch(m)}function gd(b,a,l,m){return td(b,"handleDoubleClickOn",a,l,m)||b.someProp("handleDoubleClick",E=>E(b,a,m))}function Ec(b,a,l,m){return td(b,"handleTripleClickOn",a,l,m)||b.someProp("handleTripleClick",E=>E(b,a,m))||function C(b,a,l){if(0!=l.button)return!1;let m=b.state.doc;if(-1==a)return!!m.inlineContent&&(uc(b,or.create(m,0,m.content.size),"pointer"),!0);let E=m.resolve(a);for(let D=E.depth+1;D>0;D--){let N=D>E.depth?E.nodeAfter:E.node(D),J=E.before(D);if(N.inlineContent)uc(b,or.create(m,J+1,J+1+N.content.size),"pointer");else{if(!yr.isSelectable(N))continue;uc(b,yr.create(m,J),"pointer")}return!0}}(b,l,m)}function o(b){return ve(b)}ds.keydown=(b,a)=>{let l=a;if(b.input.shiftKey=16==l.keyCode||l.shiftKey,!z(b,l)&&(b.input.lastKeyCode=l.keyCode,b.input.lastKeyCodeTime=Date.now(),!Ss||!Ts||13!=l.keyCode))if(229!=l.keyCode&&b.domObserver.forceFlush(),!Ys||13!=l.keyCode||l.ctrlKey||l.altKey||l.metaKey)b.someProp("handleKeyDown",m=>m(b,l))||function Kt(b,a){let l=a.keyCode,m=function $e(b){let a="";return b.ctrlKey&&(a+="c"),b.metaKey&&(a+="m"),b.altKey&&(a+="a"),b.shiftKey&&(a+="s"),a}(a);if(8==l||Es&&72==l&&"c"==m)return Ye(b,-1)||Os(b,-1);if(46==l&&!a.shiftKey||Es&&68==l&&"c"==m)return Ye(b,1)||Os(b,1);if(13==l||27==l)return!0;if(37==l||Es&&66==l&&"c"==m){let E=37==l?"ltr"==Fo(b,b.state.selection.from)?-1:1:-1;return Ir(b,E,m)||Os(b,E)}if(39==l||Es&&70==l&&"c"==m){let E=39==l?"ltr"==Fo(b,b.state.selection.from)?1:-1:1;return Ir(b,E,m)||Os(b,E)}return 38==l||Es&&80==l&&"c"==m?sl(b,-1,m)||Os(b,-1):40==l||Es&&78==l&&"c"==m?function fe(b){if(!gs||b.state.selection.$head.parentOffset>0)return!1;let{focusNode:a,focusOffset:l}=b.domSelectionRange();if(a&&1==a.nodeType&&0==l&&a.firstChild&&"false"==a.firstChild.contentEditable){let m=a.firstChild;ne(b,m,"true"),setTimeout(()=>ne(b,m,"false"),20)}return!1}(b)||sl(b,1,m)||To(b):m==(Es?"m":"c")&&(66==l||73==l||89==l||90==l)}(b,l)?l.preventDefault():aa(b,"key");else{let m=Date.now();b.input.lastIOSEnter=m,b.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{b.input.lastIOSEnter==m&&(b.someProp("handleKeyDown",E=>E(b,lo(13,"Enter"))),b.input.lastIOSEnter=0)},200)}},ds.keyup=(b,a)=>{16==a.keyCode&&(b.input.shiftKey=!1)},ds.keypress=(b,a)=>{let l=a;if(z(b,l)||!l.charCode||l.ctrlKey&&!l.altKey||Es&&l.metaKey)return;if(b.someProp("handleKeyPress",E=>E(b,l)))return void l.preventDefault();let m=b.state.selection;if(!(m instanceof or&&m.$from.sameParent(m.$to))){let E=String.fromCharCode(l.charCode);!/[\r\n]/.test(E)&&!b.someProp("handleTextInput",D=>D(b,m.$from.pos,m.$to.pos,E))&&b.dispatch(b.state.tr.insertText(E).scrollIntoView()),l.preventDefault()}};const f=Es?"metaKey":"ctrlKey";Xs.mousedown=(b,a)=>{let l=a;b.input.shiftKey=l.shiftKey;let m=o(b),E=Date.now(),D="singleClick";E-b.input.lastClick.time<500&&function fd(b,a){let l=a.x-b.clientX,m=a.y-b.clientY;return l*l+m*m<100}(l,b.input.lastClick)&&!l[f]&&("singleClick"==b.input.lastClick.type?D="doubleClick":"doubleClick"==b.input.lastClick.type&&(D="tripleClick")),b.input.lastClick={time:E,x:l.clientX,y:l.clientY,type:D};let N=b.posAtCoords(dc(l));N&&("singleClick"==D?(b.input.mouseDown&&b.input.mouseDown.done(),b.input.mouseDown=new T(b,N,l,!!m)):("doubleClick"==D?gd:Ec)(b,N.pos,N.inside,l)?l.preventDefault():aa(b,"pointer"))};class T{constructor(a,l,m,E){let D,N;if(this.view=a,this.pos=l,this.event=m,this.flushed=E,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=a.state.doc,this.selectNode=!!m[f],this.allowDefault=m.shiftKey,l.inside>-1)D=a.state.doc.nodeAt(l.inside),N=l.inside;else{let je=a.state.doc.resolve(l.pos);D=je.parent,N=je.depth?je.before():0}const J=E?null:m.target,he=J?a.docView.nearestDesc(J,!0):null;this.target=he?he.dom:null;let{selection:Oe}=a.state;(0==m.button&&D.type.spec.draggable&&!1!==D.type.spec.selectable||Oe instanceof yr&&Oe.from<=N&&Oe.to>N)&&(this.mightDrag={node:D,pos:N,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!eo||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),a.root.addEventListener("mouseup",this.up=this.up.bind(this)),a.root.addEventListener("mousemove",this.move=this.move.bind(this)),aa(a,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bs(this.view)),this.view.input.mouseDown=null}up(a){if(this.done(),!this.view.dom.contains(a.target))return;let l=this.pos;this.view.state.doc!=this.startDoc&&(l=this.view.posAtCoords(dc(a))),this.updateAllowDefault(a),this.allowDefault||!l?aa(this.view,"pointer"):function md(b,a,l,m,E){return td(b,"handleClickOn",a,l,m)||b.someProp("handleClick",D=>D(b,a,m))||(E?function Pc(b,a){if(-1==a)return!1;let m,E,l=b.state.selection;l instanceof yr&&(m=l.node);let D=b.state.doc.resolve(a);for(let N=D.depth+1;N>0;N--){let J=N>D.depth?D.nodeAfter:D.node(N);if(yr.isSelectable(J)){E=m&&l.$from.depth>0&&N>=l.$from.depth&&D.before(l.$from.depth+1)==l.$from.pos?D.before(l.$from.depth):D.before(N);break}}return null!=E&&(uc(b,yr.create(b.state.doc,E),"pointer"),!0)}(b,l):function xa(b,a){if(-1==a)return!1;let l=b.state.doc.resolve(a),m=l.nodeAfter;return!!(m&&m.isAtom&&yr.isSelectable(m))&&(uc(b,new yr(l),"pointer"),!0)}(b,l))}(this.view,l.pos,l.inside,a,this.selectNode)?a.preventDefault():0==a.button&&(this.flushed||gs&&this.mightDrag&&!this.mightDrag.node.isAtom||Ts&&!this.view.state.selection.visible&&Math.min(Math.abs(l.pos-this.view.state.selection.from),Math.abs(l.pos-this.view.state.selection.to))<=2)?(uc(this.view,nr.near(this.view.state.doc.resolve(l.pos)),"pointer"),a.preventDefault()):aa(this.view,"pointer")}move(a){this.updateAllowDefault(a),aa(this.view,"pointer"),0==a.buttons&&this.done()}updateAllowDefault(a){!this.allowDefault&&(Math.abs(this.event.x-a.clientX)>4||Math.abs(this.event.y-a.clientY)>4)&&(this.allowDefault=!0)}}function z(b,a){return!!b.composing||!!(gs&&Math.abs(a.timeStamp-b.input.compositionEndedAt)<500)&&(b.input.compositionEndedAt=-2e8,!0)}Xs.touchstart=b=>{b.input.lastTouch=Date.now(),o(b),aa(b,"pointer")},Xs.touchmove=b=>{b.input.lastTouch=Date.now(),aa(b,"pointer")},Xs.contextmenu=b=>o(b);const B=Ss?5e3:-1;function K(b,a){clearTimeout(b.input.composingTimeout),a>-1&&(b.input.composingTimeout=setTimeout(()=>ve(b),a))}function ie(b){for(b.composing&&(b.input.composing=!1,b.input.compositionEndedAt=function le(){let b=document.createEvent("Event");return b.initEvent("event",!0,!0),b.timeStamp}());b.input.compositionNodes.length>0;)b.input.compositionNodes.pop().markParentsDirty()}function ve(b,a=!1){if(!(Ss&&b.domObserver.flushingSoon>=0)){if(b.domObserver.forceFlush(),ie(b),a||b.docView&&b.docView.dirty){let l=$a(b);return l&&!l.eq(b.state.selection)?b.dispatch(b.state.tr.setSelection(l)):b.updateState(b.state),!0}return!1}}ds.compositionstart=ds.compositionupdate=b=>{if(!b.composing){b.domObserver.flush();let{state:a}=b,l=a.selection.$from;if(a.selection.empty&&(a.storedMarks||!l.textOffset&&l.parentOffset&&l.nodeBefore.marks.some(m=>!1===m.type.spec.inclusive)))b.markCursor=b.state.storedMarks||l.marks(),ve(b,!0),b.markCursor=null;else if(ve(b),eo&&a.selection.empty&&l.parentOffset&&!l.textOffset&&l.nodeBefore.marks.length){let m=b.domSelectionRange();for(let E=m.focusNode,D=m.focusOffset;E&&1==E.nodeType&&0!=D;){let N=D<0?E.lastChild:E.childNodes[D-1];if(!N)break;if(3==N.nodeType){b.domSelection().collapse(N,N.nodeValue.length);break}E=N,D=-1}}b.input.composing=!0}K(b,B)},ds.compositionend=(b,a)=>{b.composing&&(b.input.composing=!1,b.input.compositionEndedAt=a.timeStamp,b.input.compositionPendingChanges=b.domObserver.pendingRecords().length?b.input.compositionID:0,b.input.compositionPendingChanges&&Promise.resolve().then(()=>b.domObserver.flush()),b.input.compositionID++,K(b,20))};const Pe=Jr&&Cr<15||Ys&&ac<604;function mt(b,a,l,m,E){let D=Hn(b,a,l,m,b.state.selection.$from);if(b.someProp("handlePaste",he=>he(b,E,D||rt.empty)))return!0;if(!D)return!1;let N=function at(b){return 0==b.openStart&&0==b.openEnd&&1==b.content.childCount?b.content.firstChild:null}(D),J=N?b.state.tr.replaceSelectionWith(N,m):b.state.tr.replaceSelection(D);return b.dispatch(J.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Xs.copy=ds.cut=(b,a)=>{let l=a,m=b.state.selection,E="cut"==l.type;if(m.empty)return;let D=Pe?null:l.clipboardData,N=m.content(),{dom:J,text:he}=an(b,N);D?(l.preventDefault(),D.clearData(),D.setData("text/html",J.innerHTML),D.setData("text/plain",he)):function _e(b,a){if(!b.dom.parentNode)return;let l=b.dom.parentNode.appendChild(document.createElement("div"));l.appendChild(a),l.style.cssText="position: fixed; left: -10000px; top: 10px";let m=getSelection(),E=document.createRange();E.selectNodeContents(a),b.dom.blur(),m.removeAllRanges(),m.addRange(E),setTimeout(()=>{l.parentNode&&l.parentNode.removeChild(l),b.focus()},50)}(b,J),E&&b.dispatch(b.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},ds.paste=(b,a)=>{let l=a;if(b.composing&&!Ss)return;let m=Pe?null:l.clipboardData,E=b.input.shiftKey&&45!=b.input.lastKeyCode;m&&mt(b,m.getData("text/plain"),m.getData("text/html"),E,l)?l.preventDefault():function gt(b,a){if(!b.dom.parentNode)return;let l=b.input.shiftKey||b.state.selection.$from.parent.type.spec.code,m=b.dom.parentNode.appendChild(document.createElement(l?"textarea":"div"));l||(m.contentEditable="true"),m.style.cssText="position: fixed; left: -10000px; top: 10px",m.focus();let E=b.input.shiftKey&&45!=b.input.lastKeyCode;setTimeout(()=>{b.focus(),m.parentNode&&m.parentNode.removeChild(m),l?mt(b,m.value,null,E,a):mt(b,m.textContent,m.innerHTML,E,a)},50)}(b,l)};class xt{constructor(a,l){this.slice=a,this.move=l}}const kt=Es?"altKey":"ctrlKey";Xs.dragstart=(b,a)=>{let l=a,m=b.input.mouseDown;if(m&&m.done(),!l.dataTransfer)return;let E=b.state.selection,D=E.empty?null:b.posAtCoords(dc(l));if(!(D&&D.pos>=E.from&&D.pos<=(E instanceof yr?E.to-1:E.to)))if(m&&m.mightDrag)b.dispatch(b.state.tr.setSelection(yr.create(b.state.doc,m.mightDrag.pos)));else if(l.target&&1==l.target.nodeType){let Oe=b.docView.nearestDesc(l.target,!0);Oe&&Oe.node.type.spec.draggable&&Oe!=b.docView&&b.dispatch(b.state.tr.setSelection(yr.create(b.state.doc,Oe.posBefore)))}let N=b.state.selection.content(),{dom:J,text:he}=an(b,N);l.dataTransfer.clearData(),l.dataTransfer.setData(Pe?"Text":"text/html",J.innerHTML),l.dataTransfer.effectAllowed="copyMove",Pe||l.dataTransfer.setData("text/plain",he),b.dragging=new xt(N,!l[kt])},Xs.dragend=b=>{let a=b.dragging;window.setTimeout(()=>{b.dragging==a&&(b.dragging=null)},50)},ds.dragover=ds.dragenter=(b,a)=>a.preventDefault(),ds.drop=(b,a)=>{let l=a,m=b.dragging;if(b.dragging=null,!l.dataTransfer)return;let E=b.posAtCoords(dc(l));if(!E)return;let D=b.state.doc.resolve(E.pos),N=m&&m.slice;N?b.someProp("transformPasted",_i=>{N=_i(N,b)}):N=Hn(b,l.dataTransfer.getData(Pe?"Text":"text/plain"),Pe?null:l.dataTransfer.getData("text/html"),!1,D);let J=!(!m||l[kt]);if(b.someProp("handleDrop",_i=>_i(b,l,N||rt.empty,J)))return void l.preventDefault();if(!N)return;l.preventDefault();let he=N?function ht(b,a,l){let m=b.resolve(a);if(!l.content.size)return a;let E=l.content;for(let D=0;D<l.openStart;D++)E=E.firstChild.content;for(let D=1;D<=(0==l.openStart&&l.size?2:1);D++)for(let N=m.depth;N>=0;N--){let J=N==m.depth?0:m.pos<=(m.start(N+1)+m.end(N+1))/2?-1:1,he=m.index(N)+(J>0?1:0),Oe=m.node(N),je=!1;if(1==D)je=Oe.canReplace(he,he,E);else{let Gt=Oe.contentMatchAt(he).findWrapping(E.firstChild.type);je=Gt&&Oe.canReplaceWith(he,he,Gt[0])}if(je)return 0==J?m.pos:J<0?m.before(N+1):m.after(N+1)}return null}(b.state.doc,D.pos,N):D.pos;null==he&&(he=D.pos);let Oe=b.state.tr;J&&Oe.deleteSelection();let je=Oe.mapping.map(he),Gt=0==N.openStart&&0==N.openEnd&&1==N.content.childCount,ui=Oe.doc;if(Gt?Oe.replaceRangeWith(je,je,N.content.firstChild):Oe.replaceRange(je,je,N),Oe.doc.eq(ui))return;let Di=Oe.doc.resolve(je);if(Gt&&yr.isSelectable(N.content.firstChild)&&Di.nodeAfter&&Di.nodeAfter.sameMarkup(N.content.firstChild))Oe.setSelection(new yr(Di));else{let _i=Oe.mapping.map(he);Oe.mapping.maps[Oe.mapping.maps.length-1].forEach((wn,ar,qr,Cl)=>_i=Cl),Oe.setSelection(ri(b,Di,Oe.doc.resolve(_i)))}b.focus(),b.dispatch(Oe.setMeta("uiEvent","drop"))},Xs.focus=b=>{b.input.lastFocus=Date.now(),b.focused||(b.domObserver.stop(),b.dom.classList.add("ProseMirror-focused"),b.domObserver.start(),b.focused=!0,setTimeout(()=>{b.docView&&b.hasFocus()&&!b.domObserver.currentSelection.eq(b.domSelectionRange())&&Bs(b)},20))},Xs.blur=(b,a)=>{let l=a;b.focused&&(b.domObserver.stop(),b.dom.classList.remove("ProseMirror-focused"),b.domObserver.start(),l.relatedTarget&&b.dom.contains(l.relatedTarget)&&b.domObserver.currentSelection.clear(),b.focused=!1)},Xs.beforeinput=(b,a)=>{if(Ts&&Ss&&"deleteContentBackward"==a.inputType){b.domObserver.flushSoon();let{domChangeCount:m}=b.input;setTimeout(()=>{if(b.input.domChangeCount!=m||(b.dom.blur(),b.focus(),b.someProp("handleKeyDown",D=>D(b,lo(8,"Backspace")))))return;let{$cursor:E}=b.state.selection;E&&E.pos>0&&b.dispatch(b.state.tr.delete(E.pos-1,E.pos).scrollIntoView())},50)}};for(let b in ds)Xs[b]=ds[b];function Ge(b,a){if(b==a)return!0;for(let l in b)if(b[l]!==a[l])return!1;for(let l in a)if(!(l in b))return!1;return!0}class ft{constructor(a,l){this.toDOM=a,this.spec=l||ni,this.side=this.spec.side||0}map(a,l,m,E){let{pos:D,deleted:N}=a.mapResult(l.from+E,this.side<0?-1:1);return N?null:new Qt(D-m,D-m,this)}valid(){return!0}eq(a){return this==a||a instanceof ft&&(this.spec.key&&this.spec.key==a.spec.key||this.toDOM==a.toDOM&&Ge(this.spec,a.spec))}destroy(a){this.spec.destroy&&this.spec.destroy(a)}}class Dt{constructor(a,l){this.attrs=a,this.spec=l||ni}map(a,l,m,E){let D=a.map(l.from+E,this.spec.inclusiveStart?-1:1)-m,N=a.map(l.to+E,this.spec.inclusiveEnd?1:-1)-m;return D>=N?null:new Qt(D,N,this)}valid(a,l){return l.from<l.to}eq(a){return this==a||a instanceof Dt&&Ge(this.attrs,a.attrs)&&Ge(this.spec,a.spec)}static is(a){return a.type instanceof Dt}destroy(){}}class Bt{constructor(a,l){this.attrs=a,this.spec=l||ni}map(a,l,m,E){let D=a.mapResult(l.from+E,1);if(D.deleted)return null;let N=a.mapResult(l.to+E,-1);return N.deleted||N.pos<=D.pos?null:new Qt(D.pos-m,N.pos-m,this)}valid(a,l){let D,{index:m,offset:E}=a.content.findIndex(l.from);return E==l.from&&!(D=a.child(m)).isText&&E+D.nodeSize==l.to}eq(a){return this==a||a instanceof Bt&&Ge(this.attrs,a.attrs)&&Ge(this.spec,a.spec)}destroy(){}}class Qt{constructor(a,l,m){this.from=a,this.to=l,this.type=m}copy(a,l){return new Qt(a,l,this.type)}eq(a,l=0){return this.type.eq(a.type)&&this.from+l==a.from&&this.to+l==a.to}map(a,l,m){return this.type.map(a,this,l,m)}static widget(a,l,m){return new Qt(a,a,new ft(l,m))}static inline(a,l,m,E){return new Qt(a,l,new Dt(m,E))}static node(a,l,m,E){return new Qt(a,l,new Bt(m,E))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dt}}const oi=[],ni={};class mi{constructor(a,l){this.local=a.length?a:oi,this.children=l.length?l:oi}static create(a,l){return l.length?Ri(l,a,0,ni):fi}find(a,l,m){let E=[];return this.findInner(a??0,l??1e9,E,0,m),E}findInner(a,l,m,E,D){for(let N=0;N<this.local.length;N++){let J=this.local[N];J.from<=l&&J.to>=a&&(!D||D(J.spec))&&m.push(J.copy(J.from+E,J.to+E))}for(let N=0;N<this.children.length;N+=3)if(this.children[N]<l&&this.children[N+1]>a){let J=this.children[N]+1;this.children[N+2].findInner(a-J,l-J,m,E+J,D)}}map(a,l,m){return this==fi||0==a.maps.length?this:this.mapInner(a,l,0,0,m||ni)}mapInner(a,l,m,E,D){let N;for(let J=0;J<this.local.length;J++){let he=this.local[J].map(a,m,E);he&&he.type.valid(l,he)?(N||(N=[])).push(he):D.onRemove&&D.onRemove(this.local[J].spec)}return this.children.length?function yn(b,a,l,m,E,D,N){let J=b.slice();for(let Oe=0,je=D;Oe<l.maps.length;Oe++){let Gt=0;l.maps[Oe].forEach((ui,Di,_i,wn)=>{let ar=wn-_i-(Di-ui);for(let qr=0;qr<J.length;qr+=3){let Cl=J[qr+1];if(Cl<0||ui>Cl+je-Gt)continue;let Ld=J[qr]+je-Gt;Di>=Ld?J[qr+1]=ui<=Ld?-2:-1:_i>=E&&ar&&(J[qr]+=ar,J[qr+1]+=ar)}Gt+=ar}),je=l.maps[Oe].map(je,-1)}let he=!1;for(let Oe=0;Oe<J.length;Oe+=3)if(J[Oe+1]<0){if(-2==J[Oe+1]){he=!0,J[Oe+1]=-1;continue}let je=l.map(b[Oe]+D),Gt=je-E;if(Gt<0||Gt>=m.content.size){he=!0;continue}let Di=l.map(b[Oe+1]+D,-1)-E,{index:_i,offset:wn}=m.content.findIndex(Gt),ar=m.maybeChild(_i);if(ar&&wn==Gt&&wn+ar.nodeSize==Di){let qr=J[Oe+2].mapInner(l,ar,je+1,b[Oe]+D+1,N);qr!=fi?(J[Oe]=Gt,J[Oe+1]=Di,J[Oe+2]=qr):(J[Oe+1]=-2,he=!0)}else he=!0}if(he){let Oe=function rn(b,a,l,m,E,D,N){function J(he,Oe){for(let je=0;je<he.local.length;je++){let Gt=he.local[je].map(m,E,Oe);Gt?l.push(Gt):N.onRemove&&N.onRemove(he.local[je].spec)}for(let je=0;je<he.children.length;je+=3)J(he.children[je+2],he.children[je]+Oe+1)}for(let he=0;he<b.length;he+=3)-1==b[he+1]&&J(b[he+2],a[he]+D+1);return l}(J,b,a,l,E,D,N),je=Ri(Oe,m,0,N);a=je.local;for(let Gt=0;Gt<J.length;Gt+=3)J[Gt+1]<0&&(J.splice(Gt,3),Gt-=3);for(let Gt=0,ui=0;Gt<je.children.length;Gt+=3){let Di=je.children[Gt];for(;ui<J.length&&J[ui]<Di;)ui+=3;J.splice(ui,0,je.children[Gt],je.children[Gt+1],je.children[Gt+2])}}return new mi(a.sort(Li),J)}(this.children,N||[],a,l,m,E,D):N?new mi(N.sort(Li),oi):fi}add(a,l){return l.length?this==fi?mi.create(a,l):this.addInner(a,l,0):this}addInner(a,l,m){let E,D=0;a.forEach((J,he)=>{let je,Oe=he+m;if(je=zi(l,J,Oe)){for(E||(E=this.children.slice());D<E.length&&E[D]<he;)D+=3;E[D]==he?E[D+2]=E[D+2].addInner(J,je,Oe+1):E.splice(D,0,he,he+J.nodeSize,Ri(je,J,Oe+1,ni)),D+=3}});let N=Oi(D?bn(l):l,-m);for(let J=0;J<N.length;J++)N[J].type.valid(a,N[J])||N.splice(J--,1);return new mi(N.length?this.local.concat(N).sort(Li):this.local,E||this.children)}remove(a){return 0==a.length||this==fi?this:this.removeInner(a,0)}removeInner(a,l){let m=this.children,E=this.local;for(let D=0;D<m.length;D+=3){let N,J=m[D]+l,he=m[D+1]+l;for(let Gt,je=0;je<a.length;je++)(Gt=a[je])&&Gt.from>J&&Gt.to<he&&(a[je]=null,(N||(N=[])).push(Gt));if(!N)continue;m==this.children&&(m=this.children.slice());let Oe=m[D+2].removeInner(N,J+1);Oe!=fi?m[D+2]=Oe:(m.splice(D,3),D-=3)}if(E.length)for(let N,D=0;D<a.length;D++)if(N=a[D])for(let J=0;J<E.length;J++)E[J].eq(N,l)&&(E==this.local&&(E=this.local.slice()),E.splice(J--,1));return m==this.children&&E==this.local?this:E.length||m.length?new mi(E,m):fi}forChild(a,l){if(this==fi)return this;if(l.isLeaf)return mi.empty;let m,E;for(let J=0;J<this.children.length;J+=3)if(this.children[J]>=a){this.children[J]==a&&(m=this.children[J+2]);break}let D=a+1,N=D+l.content.size;for(let J=0;J<this.local.length;J++){let he=this.local[J];if(he.from<N&&he.to>D&&he.type instanceof Dt){let Oe=Math.max(D,he.from)-D,je=Math.min(N,he.to)-D;Oe<je&&(E||(E=[])).push(he.copy(Oe,je))}}if(E){let J=new mi(E.sort(Li),oi);return m?new Ai([J,m]):J}return m||fi}eq(a){if(this==a)return!0;if(!(a instanceof mi)||this.local.length!=a.local.length||this.children.length!=a.children.length)return!1;for(let l=0;l<this.local.length;l++)if(!this.local[l].eq(a.local[l]))return!1;for(let l=0;l<this.children.length;l+=3)if(this.children[l]!=a.children[l]||this.children[l+1]!=a.children[l+1]||!this.children[l+2].eq(a.children[l+2]))return!1;return!0}locals(a){return vn(this.localsInner(a))}localsInner(a){if(this==fi)return oi;if(a.inlineContent||!this.local.some(Dt.is))return this.local;let l=[];for(let m=0;m<this.local.length;m++)this.local[m].type instanceof Dt||l.push(this.local[m]);return l}}mi.empty=new mi([],[]),mi.removeOverlap=vn;const fi=mi.empty;class Ai{constructor(a){this.members=a}map(a,l){const m=this.members.map(E=>E.map(a,l,ni));return Ai.from(m)}forChild(a,l){if(l.isLeaf)return mi.empty;let m=[];for(let E=0;E<this.members.length;E++){let D=this.members[E].forChild(a,l);D!=fi&&(D instanceof Ai?m=m.concat(D.members):m.push(D))}return Ai.from(m)}eq(a){if(!(a instanceof Ai)||a.members.length!=this.members.length)return!1;for(let l=0;l<this.members.length;l++)if(!this.members[l].eq(a.members[l]))return!1;return!0}locals(a){let l,m=!0;for(let E=0;E<this.members.length;E++){let D=this.members[E].localsInner(a);if(D.length)if(l){m&&(l=l.slice(),m=!1);for(let N=0;N<D.length;N++)l.push(D[N])}else l=D}return l?vn(m?l:l.sort(Li)):oi}static from(a){switch(a.length){case 0:return fi;case 1:return a[0];default:return new Ai(a.every(l=>l instanceof mi)?a:a.reduce((l,m)=>l.concat(m instanceof mi?m:m.members),[]))}}}function Oi(b,a){if(!a||!b.length)return b;let l=[];for(let m=0;m<b.length;m++){let E=b[m];l.push(new Qt(E.from+a,E.to+a,E.type))}return l}function zi(b,a,l){if(a.isLeaf)return null;let m=l+a.nodeSize,E=null;for(let N,D=0;D<b.length;D++)(N=b[D])&&N.from>l&&N.to<m&&((E||(E=[])).push(N),b[D]=null);return E}function bn(b){let a=[];for(let l=0;l<b.length;l++)null!=b[l]&&a.push(b[l]);return a}function Ri(b,a,l,m){let E=[],D=!1;a.forEach((J,he)=>{let Oe=zi(b,J,he+l);if(Oe){D=!0;let je=Ri(Oe,J,l+he+1,m);je!=fi&&E.push(he,he+J.nodeSize,je)}});let N=Oi(D?bn(b):b,-l).sort(Li);for(let J=0;J<N.length;J++)N[J].type.valid(a,N[J])||(m.onRemove&&m.onRemove(N[J].spec),N.splice(J--,1));return N.length||E.length?new mi(N,E):fi}function Li(b,a){return b.from-a.from||b.to-a.to}function vn(b){let a=b;for(let l=0;l<a.length-1;l++){let m=a[l];if(m.from!=m.to)for(let E=l+1;E<a.length;E++){let D=a[E];if(D.from!=m.from){D.from<m.to&&(a==b&&(a=b.slice()),a[l]=m.copy(m.from,D.from),dn(a,E,m.copy(D.from,m.to)));break}D.to!=m.to&&(a==b&&(a=b.slice()),a[E]=D.copy(D.from,m.to),dn(a,E+1,D.copy(m.to,D.to)))}}return a}function dn(b,a,l){for(;a<b.length&&Li(l,b[a])>0;)a++;b.splice(a,0,l)}function mn(b){let a=[];return b.someProp("decorations",l=>{let m=l(b.state);m&&m!=fi&&a.push(m)}),b.cursorWrapper&&a.push(mi.create(b.state.doc,[b.cursorWrapper.deco])),Ai.from(a)}const er={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Er=Jr&&Cr<=11;class jn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(a){this.anchorNode=a.anchorNode,this.anchorOffset=a.anchorOffset,this.focusNode=a.focusNode,this.focusOffset=a.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(a){return a.anchorNode==this.anchorNode&&a.anchorOffset==this.anchorOffset&&a.focusNode==this.focusNode&&a.focusOffset==this.focusOffset}}class dr{constructor(a,l){this.view=a,this.handleDOMChange=l,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new jn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(m=>{for(let E=0;E<m.length;E++)this.queue.push(m[E]);Jr&&Cr<=11&&m.some(E=>"childList"==E.type&&E.removedNodes.length||"characterData"==E.type&&E.oldValue.length>E.target.nodeValue.length)?this.flushSoon():this.flush()}),Er&&(this.onCharData=m=>{this.queue.push({target:m.target,type:"characterData",oldValue:m.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,er)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let a=this.observer.takeRecords();if(a.length){for(let l=0;l<a.length;l++)this.queue.push(a[l]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Si(this.view)){if(this.suppressingSelectionUpdates)return Bs(this.view);if(Jr&&Cr<=11&&!this.view.state.selection.empty){let a=this.view.domSelectionRange();if(a.focusNode&&Ko(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(a){if(!a.focusNode)return!0;let m,l=new Set;for(let D=a.focusNode;D;D=Mr(D))l.add(D);for(let D=a.anchorNode;D;D=Mr(D))if(l.has(D)){m=D;break}let E=m&&this.view.docView.nearestDesc(m);return E&&E.ignoreMutation({type:"selection",target:3==m.nodeType?m.parentNode:m})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let a of this.observer.takeRecords())this.queue.push(a);return this.queue}flush(){let{view:a}=this;if(!a.docView||this.flushingSoon>-1)return;let l=this.pendingRecords();l.length&&(this.queue=[]);let m=a.domSelectionRange(),E=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(m)&&Si(a)&&!this.ignoreSelectionChange(m),D=-1,N=-1,J=!1,he=[];if(a.editable)for(let je=0;je<l.length;je++){let Gt=this.registerMutation(l[je],he);Gt&&(D=D<0?Gt.from:Math.min(Gt.from,D),N=N<0?Gt.to:Math.max(Gt.to,N),Gt.typeOver&&(J=!0))}if(eo&&he.length>1){let je=he.filter(Gt=>"BR"==Gt.nodeName);if(2==je.length){let Gt=je[0],ui=je[1];Gt.parentNode&&Gt.parentNode.parentNode==ui.parentNode?ui.remove():Gt.remove()}}let Oe=null;D<0&&E&&a.input.lastFocus>Date.now()-200&&Math.max(a.input.lastTouch,a.input.lastClick.time)<Date.now()-300&&Jo(m)&&(Oe=$a(a))&&Oe.eq(nr.near(a.state.doc.resolve(0),1))?(a.input.lastFocus=0,Bs(a),this.currentSelection.set(m),a.scrollToSelection()):(D>-1||E)&&(D>-1&&(a.docView.markDirty(D,N),function tr(b){if(!Tr.has(b)&&(Tr.set(b,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(b.dom).whiteSpace))){if(b.requiresGeckoHackNode=eo,pr)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),pr=!0}}(a)),this.handleDOMChange(D,N,J,he),a.docView&&a.docView.dirty?a.updateState(a.state):this.currentSelection.eq(m)||Bs(a),this.currentSelection.set(m))}registerMutation(a,l){if(l.indexOf(a.target)>-1)return null;let m=this.view.docView.nearestDesc(a.target);if("attributes"==a.type&&(m==this.view.docView||"contenteditable"==a.attributeName||"style"==a.attributeName&&!a.oldValue&&!a.target.getAttribute("style"))||!m||m.ignoreMutation(a))return null;if("childList"==a.type){for(let je=0;je<a.addedNodes.length;je++)l.push(a.addedNodes[je]);if(m.contentDOM&&m.contentDOM!=m.dom&&!m.contentDOM.contains(a.target))return{from:m.posBefore,to:m.posAfter};let E=a.previousSibling,D=a.nextSibling;if(Jr&&Cr<=11&&a.addedNodes.length)for(let je=0;je<a.addedNodes.length;je++){let{previousSibling:Gt,nextSibling:ui}=a.addedNodes[je];(!Gt||Array.prototype.indexOf.call(a.addedNodes,Gt)<0)&&(E=Gt),(!ui||Array.prototype.indexOf.call(a.addedNodes,ui)<0)&&(D=ui)}let N=E&&E.parentNode==a.target?as(E)+1:0,J=m.localPosFromDOM(a.target,N,-1),he=D&&D.parentNode==a.target?as(D):a.target.childNodes.length;return{from:J,to:m.localPosFromDOM(a.target,he,1)}}return"attributes"==a.type?{from:m.posAtStart-m.border,to:m.posAtEnd+m.border}:{from:m.posAtStart,to:m.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}}}let Tr=new WeakMap,pr=!1;function us(b){let a=b.pmViewDesc;if(a)return a.parseRule();if("BR"==b.nodeName&&b.parentNode){if(gs&&/^(ul|ol)$/i.test(b.parentNode.nodeName)){let l=document.createElement("div");return l.appendChild(document.createElement("li")),{skip:l}}if(b.parentNode.lastChild==b||gs&&/^(tr|table)$/i.test(b.parentNode.nodeName))return{ignore:!0}}else if("IMG"==b.nodeName&&b.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hs=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Qr(b,a,l){return Math.max(l.anchor,l.head)>a.content.size?null:ri(b,a.resolve(l.anchor),a.resolve(l.head))}function ws(b,a,l){let m=b.depth,E=a?b.end():b.pos;for(;m>0&&(a||b.indexAfter(m)==b.node(m).childCount);)m--,E++,a=!1;if(l){let D=b.node(m).maybeChild(b.indexAfter(m));for(;D&&!D.isLeaf;)D=D.firstChild,E++}return E}class Ht{constructor(a,l){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new hd,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=l,this.state=l.state,this.directPlugins=l.plugins||[],this.directPlugins.forEach(Dr),this.dispatch=this.dispatch.bind(this),this.dom=a&&a.mount||document.createElement("div"),a&&(a.appendChild?a.appendChild(this.dom):"function"==typeof a?a(this.dom):a.mount&&(this.mounted=!0)),this.editable=Wn(this),Zn(this),this.nodeViews=vr(this),this.docView=Ba(this.state.doc,Gi(this),mn(this),this.dom,this),this.domObserver=new dr(this,(m,E,D,N)=>function la(b,a,l,m,E){let D=b.input.compositionPendingChanges||(b.composing?b.input.compositionID:0);if(b.input.compositionPendingChanges=0,a<0){let vs=b.input.lastSelectionTime>Date.now()-50?b.input.lastSelectionOrigin:null,su=$a(b,vs);if(su&&!b.state.selection.eq(su)){if(Ts&&Ss&&13===b.input.lastKeyCode&&Date.now()-100<b.input.lastKeyCodeTime&&b.someProp("handleKeyDown",pm=>pm(b,lo(13,"Enter"))))return;let Wp=b.state.tr.setSelection(su);"pointer"==vs?Wp.setMeta("pointer",!0):"key"==vs&&Wp.scrollIntoView(),D&&Wp.setMeta("composition",D),b.dispatch(Wp)}return}let N=b.state.doc.resolve(a),J=N.sharedDepth(l);a=N.before(J+1),l=b.state.doc.resolve(l).after(J+1);let ui,Di,he=b.state.selection,Oe=function ls(b,a,l){let Oe,{node:m,fromOffset:E,toOffset:D,from:N,to:J}=b.docView.parseRange(a,l),he=b.domSelectionRange(),je=he.anchorNode;if(je&&b.dom.contains(1==je.nodeType?je:je.parentNode)&&(Oe=[{node:je,offset:he.anchorOffset}],Jo(he)||Oe.push({node:he.focusNode,offset:he.focusOffset})),Ts&&8===b.input.lastKeyCode)for(let ar=D;ar>E;ar--){let qr=m.childNodes[ar-1],Cl=qr.pmViewDesc;if("BR"==qr.nodeName&&!Cl){D=ar;break}if(!Cl||Cl.size)break}let Gt=b.state.doc,ui=b.someProp("domParser")||Yr.fromSchema(b.state.schema),Di=Gt.resolve(N),_i=null,wn=ui.parse(m,{topNode:Di.parent,topMatch:Di.parent.contentMatchAt(Di.index()),topOpen:!0,from:E,to:D,preserveWhitespace:"pre"!=Di.parent.type.whitespace||"full",findPositions:Oe,ruleFromNode:us,context:Di});if(Oe&&null!=Oe[0].pos){let ar=Oe[0].pos,qr=Oe[1]&&Oe[1].pos;null==qr&&(qr=ar),_i={anchor:ar+N,head:qr+N}}return{doc:wn,sel:_i,from:N,to:J}}(b,a,l),je=b.state.doc,Gt=je.slice(Oe.from,Oe.to);8===b.input.lastKeyCode&&Date.now()-100<b.input.lastKeyCodeTime?(ui=b.state.selection.to,Di="end"):(ui=b.state.selection.from,Di="start"),b.input.lastKeyCode=null;let _i=function es(b,a,l,m,E){let D=b.findDiffStart(a,l);if(null==D)return null;let{a:N,b:J}=b.findDiffEnd(a,l+b.size,l+a.size);return"end"==E&&(m-=N+Math.max(0,D-Math.min(N,J))-D),N<D&&b.size<a.size?(D-=m<=D&&m>=N?D-m:0,J=D+(J-N),N=D):J<D&&(D-=m<=D&&m>=J?D-m:0,N=D+(N-J),J=D),{start:D,endA:N,endB:J}}(Gt.content,Oe.doc.content,Oe.from,ui,Di);if((Ys&&b.input.lastIOSEnter>Date.now()-225||Ss)&&E.some(vs=>1==vs.nodeType&&!hs.test(vs.nodeName))&&(!_i||_i.endA>=_i.endB)&&b.someProp("handleKeyDown",vs=>vs(b,lo(13,"Enter"))))return void(b.input.lastIOSEnter=0);if(!_i){if(!(m&&he instanceof or&&!he.empty&&he.$head.sameParent(he.$anchor))||b.composing||Oe.sel&&Oe.sel.anchor!=Oe.sel.head){if(Oe.sel){let vs=Qr(b,b.state.doc,Oe.sel);if(vs&&!vs.eq(b.state.selection)){let su=b.state.tr.setSelection(vs);D&&su.setMeta("composition",D),b.dispatch(su)}}return}_i={start:he.from,endA:he.to,endB:he.to}}if(Ts&&b.cursorWrapper&&Oe.sel&&Oe.sel.anchor==b.cursorWrapper.deco.from&&Oe.sel.head==Oe.sel.anchor){let vs=_i.endB-_i.start;Oe.sel={anchor:Oe.sel.anchor+vs,head:Oe.sel.anchor+vs}}b.input.domChangeCount++,b.state.selection.from<b.state.selection.to&&_i.start==_i.endB&&b.state.selection instanceof or&&(_i.start>b.state.selection.from&&_i.start<=b.state.selection.from+2&&b.state.selection.from>=Oe.from?_i.start=b.state.selection.from:_i.endA<b.state.selection.to&&_i.endA>=b.state.selection.to-2&&b.state.selection.to<=Oe.to&&(_i.endB+=b.state.selection.to-_i.endA,_i.endA=b.state.selection.to)),Jr&&Cr<=11&&_i.endB==_i.start+1&&_i.endA==_i.start&&_i.start>Oe.from&&" \xa0"==Oe.doc.textBetween(_i.start-Oe.from-1,_i.start-Oe.from+1)&&(_i.start--,_i.endA--,_i.endB--);let Ld,wn=Oe.doc.resolveNoCache(_i.start-Oe.from),ar=Oe.doc.resolveNoCache(_i.endB-Oe.from),qr=je.resolve(_i.start),Cl=wn.sameParent(ar)&&wn.parent.inlineContent&&qr.end()>=_i.endA;if((Ys&&b.input.lastIOSEnter>Date.now()-225&&(!Cl||E.some(vs=>"DIV"==vs.nodeName||"P"==vs.nodeName))||!Cl&&wn.pos<Oe.doc.content.size&&!wn.sameParent(ar)&&(Ld=nr.findFrom(Oe.doc.resolve(wn.pos+1),1,!0))&&Ld.head==ar.pos)&&b.someProp("handleKeyDown",vs=>vs(b,lo(13,"Enter"))))return void(b.input.lastIOSEnter=0);if(b.state.selection.anchor>_i.start&&function Yl(b,a,l,m,E){if(!m.parent.isTextblock||l-a<=E.pos-m.pos||ws(m,!0,!1)<E.pos)return!1;let D=b.resolve(a);if(D.parentOffset<D.parent.content.size||!D.parent.isTextblock)return!1;let N=b.resolve(ws(D,!0,!0));return!(!N.parent.isTextblock||N.pos>l||ws(N,!0,!1)<l)&&m.parent.content.cut(m.parentOffset).eq(N.parent.content)}(je,_i.start,_i.endA,wn,ar)&&b.someProp("handleKeyDown",vs=>vs(b,lo(8,"Backspace"))))return void(Ss&&Ts&&b.domObserver.suppressSelectionUpdates());Ts&&Ss&&_i.endB==_i.start&&(b.input.lastAndroidDelete=Date.now()),Ss&&!Cl&&wn.start()!=ar.start()&&0==ar.parentOffset&&wn.depth==ar.depth&&Oe.sel&&Oe.sel.anchor==Oe.sel.head&&Oe.sel.head==_i.endA&&(_i.endB-=2,ar=Oe.doc.resolveNoCache(_i.endB-Oe.from),setTimeout(()=>{b.someProp("handleKeyDown",function(vs){return vs(b,lo(13,"Enter"))})},20));let bc,dd,Up,ru=_i.start,Eh=_i.endA;if(Cl)if(wn.pos==ar.pos)Jr&&Cr<=11&&0==wn.parentOffset&&(b.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bs(b),20)),bc=b.state.tr.delete(ru,Eh),dd=je.resolve(_i.start).marksAcross(je.resolve(_i.endA));else if(_i.endA==_i.endB&&(Up=function wa(b,a){let N,J,he,l=b.firstChild.marks,m=a.firstChild.marks,E=l,D=m;for(let je=0;je<m.length;je++)E=m[je].removeFromSet(E);for(let je=0;je<l.length;je++)D=l[je].removeFromSet(D);if(1==E.length&&0==D.length)J=E[0],N="add",he=je=>je.mark(J.addToSet(je.marks));else{if(0!=E.length||1!=D.length)return null;J=D[0],N="remove",he=je=>je.mark(J.removeFromSet(je.marks))}let Oe=[];for(let je=0;je<a.childCount;je++)Oe.push(he(a.child(je)));if(ze.from(Oe).eq(b))return{mark:J,type:N}}(wn.parent.content.cut(wn.parentOffset,ar.parentOffset),qr.parent.content.cut(qr.parentOffset,_i.endA-qr.start()))))bc=b.state.tr,"add"==Up.type?bc.addMark(ru,Eh,Up.mark):bc.removeMark(ru,Eh,Up.mark);else if(wn.parent.child(wn.index()).isText&&wn.index()==ar.index()-(ar.textOffset?0:1)){let vs=wn.parent.textBetween(wn.parentOffset,ar.parentOffset);if(b.someProp("handleTextInput",su=>su(b,ru,Eh,vs)))return;bc=b.state.tr.insertText(vs,ru,Eh)}if(bc||(bc=b.state.tr.replace(ru,Eh,Oe.doc.slice(_i.start-Oe.from,_i.endB-Oe.from))),Oe.sel){let vs=Qr(b,bc.doc,Oe.sel);vs&&!(Ts&&Ss&&b.composing&&vs.empty&&(_i.start!=_i.endB||b.input.lastAndroidDelete<Date.now()-100)&&(vs.head==ru||vs.head==bc.mapping.map(Eh)-1)||Jr&&vs.empty&&vs.head==ru)&&bc.setSelection(vs)}dd&&bc.ensureMarks(dd),D&&bc.setMeta("composition",D),b.dispatch(bc.scrollIntoView())}(this,m,E,D,N)),this.domObserver.start(),function pd(b){for(let a in Xs){let l=Xs[a];b.dom.addEventListener(a,b.input.eventHandlers[a]=m=>{cu(b,m)&&!cc(b,m)&&(b.editable||!(m.type in ds))&&l(b,m)},Vn[a]?{passive:!0}:void 0)}gs&&b.dom.addEventListener("input",()=>null),An(b)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let a=this._props;this._props={};for(let l in a)this._props[l]=a[l];this._props.state=this.state}return this._props}update(a){a.handleDOMEvents!=this._props.handleDOMEvents&&An(this);let l=this._props;this._props=a,a.plugins&&(a.plugins.forEach(Dr),this.directPlugins=a.plugins),this.updateStateInner(a.state,l)}setProps(a){let l={};for(let m in this._props)l[m]=this._props[m];l.state=this.state;for(let m in a)l[m]=a[m];this.update(l)}updateState(a){this.updateStateInner(a,this._props)}updateStateInner(a,l){let m=this.state,E=!1,D=!1;a.storedMarks&&this.composing&&(ie(this),D=!0),this.state=a;let N=m.plugins!=a.plugins||this._props.plugins!=l.plugins;if(N||this._props.plugins!=l.plugins||this._props.nodeViews!=l.nodeViews){let ui=vr(this);(function Zr(b,a){let l=0,m=0;for(let E in b){if(b[E]!=a[E])return!0;l++}for(let E in a)m++;return l!=m})(ui,this.nodeViews)&&(this.nodeViews=ui,E=!0)}(N||l.handleDOMEvents!=this._props.handleDOMEvents)&&An(this),this.editable=Wn(this),Zn(this);let J=mn(this),he=Gi(this),Oe=m.plugins==a.plugins||m.doc.eq(a.doc)?a.scrollToSelection>m.scrollToSelection?"to selection":"preserve":"reset",je=E||!this.docView.matchesNode(a.doc,he,J);(je||!a.selection.eq(m.selection))&&(D=!0);let Gt="preserve"==Oe&&D&&null==this.dom.style.overflowAnchor&&function Pa(b){let m,E,a=b.dom.getBoundingClientRect(),l=Math.max(0,a.top);for(let D=(a.left+a.right)/2,N=l+1;N<Math.min(innerHeight,a.bottom);N+=5){let J=b.root.elementFromPoint(D,N);if(!J||J==b.dom||!b.dom.contains(J))continue;let he=J.getBoundingClientRect();if(he.top>=l-20){m=J,E=he.top;break}}return{refDOM:m,refTop:E,stack:Ka(b.dom)}}(this);if(D){this.domObserver.stop();let ui=je&&(Jr||Ts)&&!this.composing&&!m.selection.empty&&!a.selection.empty&&function rr(b,a){let l=Math.min(b.$anchor.sharedDepth(b.head),a.$anchor.sharedDepth(a.head));return b.$anchor.start(l)!=a.$anchor.start(l)}(m.selection,a.selection);if(je){let Di=Ts?this.trackWrites=this.domSelectionRange().focusNode:null;(E||!this.docView.update(a.doc,he,J,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ba(a.doc,he,J,this.dom,this)),Di&&!this.trackWrites&&(ui=!0)}ui||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function xn(b){let a=b.docView.domFromPos(b.state.selection.anchor,0),l=b.domSelectionRange();return Ko(a.node,a.offset,l.anchorNode,l.anchorOffset)}(this))?Bs(this,ui):(Ie(this,a.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(m),"reset"==Oe?this.dom.scrollTop=0:"to selection"==Oe?this.scrollToSelection():Gt&&function Uo({refDOM:b,refTop:a,stack:l}){let m=b?b.getBoundingClientRect().top:0;Tl(l,0==m?0:m-a)}(Gt)}scrollToSelection(){let a=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",l=>l(this)))if(this.state.selection instanceof yr){let l=this.docView.domAfterPos(this.state.selection.from);1==l.nodeType&&La(this,l.getBoundingClientRect(),a)}else La(this,this.coordsAtPos(this.state.selection.head,1),a)}destroyPluginViews(){let a;for(;a=this.pluginViews.pop();)a.destroy&&a.destroy()}updatePluginViews(a){if(a&&a.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let l=0;l<this.pluginViews.length;l++){let m=this.pluginViews[l];m.update&&m.update(this,a)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let l=0;l<this.directPlugins.length;l++){let m=this.directPlugins[l];m.spec.view&&this.pluginViews.push(m.spec.view(this))}for(let l=0;l<this.state.plugins.length;l++){let m=this.state.plugins[l];m.spec.view&&this.pluginViews.push(m.spec.view(this))}}}someProp(a,l){let E,m=this._props&&this._props[a];if(null!=m&&(E=l?l(m):m))return E;for(let N=0;N<this.directPlugins.length;N++){let J=this.directPlugins[N].props[a];if(null!=J&&(E=l?l(J):J))return E}let D=this.state.plugins;if(D)for(let N=0;N<D.length;N++){let J=D[N].props[a];if(null!=J&&(E=l?l(J):J))return E}}hasFocus(){if(Jr){let a=this.root.activeElement;if(a==this.dom)return!0;if(!a||!this.dom.contains(a))return!1;for(;a&&this.dom!=a&&this.dom.contains(a);){if("false"==a.contentEditable)return!1;a=a.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function ga(b){if(b.setActive)return b.setActive();if(ks)return b.focus(ks);let a=Ka(b);b.focus(null==ks?{get preventScroll(){return ks={preventScroll:!0},!0}}:void 0),ks||(ks=!1,Tl(a,0))}(this.dom),Bs(this),this.domObserver.start()}get root(){let a=this._root;if(null==a)for(let l=this.dom.parentNode;l;l=l.parentNode)if(9==l.nodeType||11==l.nodeType&&l.host)return l.getSelection||(Object.getPrototypeOf(l).getSelection=()=>l.ownerDocument.getSelection()),this._root=l;return a||document}posAtCoords(a){return Wo(this,a)}coordsAtPos(a,l=1){return Ls(this,a,l)}domAtPos(a,l=0){return this.docView.domFromPos(a,l)}nodeDOM(a){let l=this.docView.descAt(a);return l?l.nodeDOM:null}posAtDOM(a,l,m=-1){let E=this.docView.posFromDOM(a,l,m);if(null==E)throw new RangeError("DOM position not inside the editor");return E}endOfTextblock(a,l){return function ml(b,a,l){return Il==a&&ia==l?Xl:(Il=a,ia=l,Xl="up"==l||"down"==l?function Fa(b,a,l){let m=a.selection,E="up"==l?m.$from:m.$to;return bo(b,a,()=>{let{node:D}=b.docView.domFromPos(E.pos,"up"==l?-1:1);for(;;){let J=b.docView.nearestDesc(D,!0);if(!J)break;if(J.node.isBlock){D=J.contentDOM||J.dom;break}D=J.dom.parentNode}let N=Ls(b,E.pos,1);for(let J=D.firstChild;J;J=J.nextSibling){let he;if(1==J.nodeType)he=J.getClientRects();else{if(3!=J.nodeType)continue;he=Ws(J,0,J.nodeValue.length).getClientRects()}for(let Oe=0;Oe<he.length;Oe++){let je=he[Oe];if(je.bottom>je.top+1&&("up"==l?N.top-je.top>2*(je.bottom-N.top):je.bottom-N.bottom>2*(N.bottom-je.top)))return!1}}return!0})}(b,a,l):function fl(b,a,l){let{$head:m}=a.selection;if(!m.parent.isTextblock)return!1;let E=m.parentOffset,D=!E,N=E==m.parent.content.size,J=b.domSelection();return Ya.test(m.parent.textContent)&&J.modify?bo(b,a,()=>{let{focusNode:he,focusOffset:Oe,anchorNode:je,anchorOffset:Gt}=b.domSelectionRange(),ui=J.caretBidiLevel;J.modify("move",l,"character");let Di=m.depth?b.docView.domAfterPos(m.before()):b.dom,{focusNode:_i,focusOffset:wn}=b.domSelectionRange(),ar=_i&&!Di.contains(1==_i.nodeType?_i:_i.parentNode)||he==_i&&Oe==wn;try{J.collapse(je,Gt),he&&(he!=je||Oe!=Gt)&&J.extend&&J.extend(he,Oe)}catch{}return null!=ui&&(J.caretBidiLevel=ui),ar}):"left"==l||"backward"==l?D:N}(b,a,l))}(this,l||this.state,a)}pasteHTML(a,l){return mt(this,"",a,!1,l||new ClipboardEvent("paste"))}pasteText(a,l){return mt(this,a,null,!0,l||new ClipboardEvent("paste"))}destroy(){this.docView&&(function Kl(b){b.domObserver.stop();for(let a in b.input.eventHandlers)b.dom.removeEventListener(a,b.input.eventHandlers[a]);clearTimeout(b.input.composingTimeout),clearTimeout(b.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],mn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(a){return function Fd(b,a){!cc(b,a)&&Xs[a.type]&&(b.editable||!(a.type in ds))&&Xs[a.type](b,a)}(this,a)}dispatch(a){let l=this._props.dispatchTransaction;l?l.call(this,a):this.updateState(this.state.apply(a))}domSelectionRange(){return gs&&11===this.root.nodeType&&function Xr(b){let a=b.activeElement;for(;a&&a.shadowRoot;)a=a.shadowRoot.activeElement;return a}(this.dom.ownerDocument)==this.dom?function zr(b){let a;function l(he){he.preventDefault(),he.stopImmediatePropagation(),a=he.getTargetRanges()[0]}b.dom.addEventListener("beforeinput",l,!0),document.execCommand("indent"),b.dom.removeEventListener("beforeinput",l,!0);let m=a.startContainer,E=a.startOffset,D=a.endContainer,N=a.endOffset,J=b.domAtPos(b.state.selection.anchor);return Ko(J.node,J.offset,D,N)&&([m,E,D,N]=[D,N,m,E]),{anchorNode:m,anchorOffset:E,focusNode:D,focusOffset:N}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function Gi(b){let a=Object.create(null);return a.class="ProseMirror",a.contenteditable=String(b.editable),b.someProp("attributes",l=>{if("function"==typeof l&&(l=l(b.state)),l)for(let m in l)"class"==m?a.class+=" "+l[m]:"style"==m?a.style=(a.style?a.style+";":"")+l[m]:!a[m]&&"contenteditable"!=m&&"nodeName"!=m&&(a[m]=String(l[m]))}),a.translate||(a.translate="no"),[Qt.node(0,b.state.doc.content.size,a)]}function Zn(b){if(b.markCursor){let a=document.createElement("img");a.className="ProseMirror-separator",a.setAttribute("mark-placeholder","true"),a.setAttribute("alt",""),b.cursorWrapper={dom:a,deco:Qt.widget(b.state.selection.head,a,{raw:!0,marks:b.markCursor})}}else b.cursorWrapper=null}function Wn(b){return!b.someProp("editable",a=>!1===a(b.state))}function vr(b){let a=Object.create(null);function l(m){for(let E in m)Object.prototype.hasOwnProperty.call(a,E)||(a[E]=m[E])}return b.someProp("nodeViews",l),b.someProp("markViews",l),a}function Dr(b){if(b.spec.state||b.spec.filterTransaction||b.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Kr=Et(1368);const Ca=["ol",0],Ml=["ul",0],Vs=["li",0];function Sc(b,a){return function(l,m){let{$from:E,$to:D,node:N}=l.selection;if(N&&N.isBlock||E.depth<2||!E.sameParent(D))return!1;let J=E.node(-1);if(J.type!=b)return!1;if(0==E.parent.content.size&&E.node(-1).childCount==E.indexAfter(-1)){if(3==E.depth||E.node(-3).type!=b||E.index(-2)!=E.node(-2).childCount-1)return!1;if(m){let Gt=ze.empty,ui=E.index(-1)?1:E.index(-2)?2:3;for(let qr=E.depth-ui;qr>=E.depth-3;qr--)Gt=ze.from(E.node(qr).copy(Gt));let Di=E.indexAfter(-1)<E.node(-2).childCount?1:E.indexAfter(-2)<E.node(-3).childCount?2:3;Gt=Gt.append(ze.from(b.createAndFill()));let _i=E.before(E.depth-(ui-1)),wn=l.tr.replace(_i,E.after(-Di),new rt(Gt,4-ui,0)),ar=-1;wn.doc.nodesBetween(_i,wn.doc.content.size,(qr,Cl)=>{if(ar>-1)return!1;qr.isTextblock&&0==qr.content.size&&(ar=Cl+1)}),ar>-1&&wn.setSelection(nr.near(wn.doc.resolve(ar))),m(wn.scrollIntoView())}return!0}let he=D.pos==E.end()?J.contentMatchAt(0).defaultType:null,Oe=l.tr.delete(E.pos,D.pos),je=he?[a?{type:b,attrs:a}:null,{type:he}]:void 0;return!!Re(Oe.doc,E.pos,2,je)&&(m&&m(Oe.split(E.pos,2,je).scrollIntoView()),!0)}}function Gd(b){return function(a,l){let{$from:m,$to:E}=a.selection,D=m.blockRange(E,N=>N.childCount>0&&N.firstChild.type==b);return!!D&&(!l||(m.node(D.depth-1).type==b?function Sh(b,a,l,m){let E=b.tr,D=m.end,N=m.$to.end(m.depth);D<N&&(E.step(new r(D-1,N,D,N,new rt(ze.from(l.create(null,m.parent.copy())),1,0),1,!0)),m=new Wi(E.doc.resolve(m.$from.pos),E.doc.resolve(N),m.depth));const J=R(m);if(null==J)return!1;E.lift(m,J);let he=E.mapping.map(D,-1)-1;return re(E.doc,he)&&E.join(he),a(E.scrollIntoView()),!0}(a,l,b,D):function kh(b,a,l){let m=b.tr,E=l.parent;for(let Di=l.end,_i=l.endIndex-1,wn=l.startIndex;_i>wn;_i--)Di-=E.child(_i).nodeSize,m.delete(Di-1,Di+1);let D=m.doc.resolve(l.start),N=D.nodeAfter;if(m.mapping.map(l.end)!=l.start+D.nodeAfter.nodeSize)return!1;let J=0==l.startIndex,he=l.endIndex==E.childCount,Oe=D.node(-1),je=D.index(-1);if(!Oe.canReplace(je+(J?0:1),je+1,N.content.append(he?ze.empty:ze.from(E))))return!1;let Gt=D.pos,ui=Gt+N.nodeSize;return m.step(new r(Gt-(J?1:0),ui+(he?1:0),Gt+1,ui-1,new rt((J?ze.empty:ze.from(E.copy(ze.empty))).append(he?ze.empty:ze.from(E.copy(ze.empty))),J?0:1,he?0:1),J?0:1)),a(m.scrollIntoView()),!0}(a,l,D)))}}function Th(b){return function(a,l){let{$from:m,$to:E}=a.selection,D=m.blockRange(E,Oe=>Oe.childCount>0&&Oe.firstChild.type==b);if(!D)return!1;let N=D.startIndex;if(0==N)return!1;let J=D.parent,he=J.child(N-1);if(he.type!=b)return!1;if(l){let Oe=he.lastChild&&he.lastChild.type==J.type,je=ze.from(Oe?b.create():null),Gt=new rt(ze.from(b.create(null,ze.from(J.type.create(null,je)))),Oe?3:1,0),ui=D.start,Di=D.end;l(a.tr.step(new r(ui-(Oe?3:1),Di,ui,Di,Gt,1,!0)).scrollIntoView())}return!0}}const Fc={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:b=>({href:b.getAttribute("href"),title:b.getAttribute("title"),target:b.getAttribute("target")})}],toDOM(b){const{href:a,title:l,target:m}=b.attrs;return["a",{href:a,title:l,target:m},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:b=>"normal"!==b.style.fontWeight&&null},{style:"font-weight",getAttrs:b=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(b)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:b=>({color:b})}],toDOM(b){const{color:a}=b.attrs;return["span",{style:`color:${a};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:b=>({backgroundColor:b})}],toDOM(b){const{backgroundColor:a}=b.attrs;return["span",{style:`background-color:${a};`},0]}}},kc={doc:{content:"block+"},text:{group:"inline"},paragraph:{content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(b){const{textAlign:a}=b.style;return{align:b.getAttribute("align")||a||null}}}],toDOM(b){const{align:a}=b.attrs;return["p",{style:Te({textAlign:"left"!==a?a:null})||null},0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:{attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(b){const{textAlign:a}=b.style;return{level:1,align:b.getAttribute("align")||a||null}}},{tag:"h2",getAttrs(b){const{textAlign:a}=b.style;return{level:2,align:b.getAttribute("align")||a||null}}},{tag:"h3",getAttrs(b){const{textAlign:a}=b.style;return{level:3,align:b.getAttribute("align")||a||null}}},{tag:"h4",getAttrs(b){const{textAlign:a}=b.style;return{level:4,align:b.getAttribute("align")||a||null}}},{tag:"h5",getAttrs(b){const{textAlign:a}=b.style;return{level:5,align:b.getAttribute("align")||a||null}}},{tag:"h6",getAttrs(b){const{textAlign:a}=b.style;return{level:6,align:b.getAttribute("align")||a||null}}}],toDOM(b){const{level:a,align:l}=b.attrs;return[`h${a}`,{style:Te({textAlign:"left"!==l?l:null})||null},0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:b=>({src:b.getAttribute("src"),title:b.getAttribute("title"),alt:b.getAttribute("alt"),width:b.getAttribute("width")})}],toDOM(b){const{src:a,alt:l,title:m,width:E}=b.attrs;return["img",{src:a,alt:l,title:m,width:E}]}},list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>Vs,defining:!0},content:"paragraph block*"},ordered_list:{...{attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:b=>({order:b.hasAttribute("start")?+b.getAttribute("start"):1})}],toDOM:b=>1==b.attrs.order?Ca:["ol",{start:b.attrs.order},0]},content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>Ml},content:"list_item+",group:"block"}},hc=new class sr{constructor(a){this.cached=Object.create(null);let l=this.spec={};for(let E in a)l[E]=a[E];l.nodes=ut.from(a.nodes),l.marks=ut.from(a.marks||{}),this.nodes=Jn.compile(this.spec.nodes,this),this.marks=On.compile(this.spec.marks,this);let m=Object.create(null);for(let E in this.nodes){if(E in this.marks)throw new RangeError(E+" can not be both a node and a mark");let D=this.nodes[E],N=D.spec.content||"",J=D.spec.marks;D.contentMatch=m[N]||(m[N]=on.parse(N,this.nodes)),D.inlineContent=D.contentMatch.inlineContent,D.markSet="_"==J?null:J?fr(this,J.split(" ")):""!=J&&D.inlineContent?null:[]}for(let E in this.marks){let D=this.marks[E],N=D.spec.excludes;D.excluded=null==N?[D]:""==N?[]:fr(this,N.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(a,l=null,m,E){if("string"==typeof a)a=this.nodeType(a);else{if(!(a instanceof Jn))throw new RangeError("Invalid node type: "+a);if(a.schema!=this)throw new RangeError("Node type from different schema used ("+a.name+")")}return a.createChecked(l,m,E)}text(a,l){let m=this.nodes.text;return new Gn(m,m.defaultAttrs,a,Jt.setFrom(l))}mark(a,l){return"string"==typeof a&&(a=this.marks[a]),a.create(l)}nodeFromJSON(a){return Ln.fromJSON(this,a)}markFromJSON(a){return Jt.fromJSON(this,a)}nodeType(a){let l=this.nodes[a];if(!l)throw new RangeError("Unknown node type: "+a);return l}}({marks:Fc,nodes:kc}),Ea=(b,a)=>!b.selection.empty&&(a&&a(b.tr.deleteSelection().scrollIntoView()),!0);function Ql(b,a,l=!1){for(let m=b;m;m="start"==a?m.firstChild:m.lastChild){if(m.isTextblock)return!0;if(l&&1!=m.childCount)return!1}return!1}function Vd(b){if(!b.parent.type.spec.isolating)for(let a=b.depth-1;a>=0;a--){if(b.index(a)>0)return b.doc.resolve(b.before(a+1));if(b.node(a).type.spec.isolating)break}return null}function Nu(b){if(!b.parent.type.spec.isolating)for(let a=b.depth-1;a>=0;a--){let l=b.node(a);if(b.index(a)+1<l.childCount)return b.doc.resolve(b.after(a+1));if(l.type.spec.isolating)break}return null}const fc=(b,a)=>{let{$head:l,$anchor:m}=b.selection;return!(!l.parent.type.spec.code||!l.sameParent(m)||(a&&a(b.tr.insertText("\n").scrollIntoView()),0))};function ec(b){for(let a=0;a<b.edgeCount;a++){let{type:l}=b.edge(a);if(l.isTextblock&&!l.hasRequiredAttrs())return l}return null}const vd=(b,a)=>{let{$head:l,$anchor:m}=b.selection;if(!l.parent.type.spec.code||!l.sameParent(m))return!1;let E=l.node(-1),D=l.indexAfter(-1),N=ec(E.contentMatchAt(D));if(!N||!E.canReplaceWith(D,D,N))return!1;if(a){let J=l.after(),he=b.tr.replaceWith(J,J,N.createAndFill());he.setSelection(nr.near(he.doc.resolve(J),1)),a(he.scrollIntoView())}return!0},$u=(b,a)=>{let l=b.selection,{$from:m,$to:E}=l;if(l instanceof bs||m.parent.inlineContent||E.parent.inlineContent)return!1;let D=ec(E.parent.contentMatchAt(E.indexAfter()));if(!D||!D.isTextblock)return!1;if(a){let N=(!m.parentOffset&&E.index()<E.parent.childCount?m:E).pos,J=b.tr.insert(N,D.createAndFill());J.setSelection(or.create(J.doc,N+1)),a(J.scrollIntoView())}return!0},da=(b,a)=>{let{$cursor:l}=b.selection;if(!l||l.parent.content.size)return!1;if(l.depth>1&&l.after()!=l.end(-1)){let D=l.before();if(Re(b.doc,D))return a&&a(b.tr.split(D).scrollIntoView()),!0}let m=l.blockRange(),E=m&&R(m);return null!=E&&(a&&a(b.tr.lift(m,E).scrollIntoView()),!0)},al=function Nc(b){return(a,l)=>{let{$from:m,$to:E}=a.selection;if(a.selection instanceof yr&&a.selection.node.isBlock)return!(!m.parentOffset||!Re(a.doc,m.pos)||(l&&l(a.tr.split(m.pos).scrollIntoView()),0));if(!m.parent.isBlock)return!1;if(l){let D=E.parentOffset==E.parent.content.size,N=a.tr;(a.selection instanceof or||a.selection instanceof bs)&&N.deleteSelection();let J=0==m.depth?null:ec(m.node(-1).contentMatchAt(m.indexAfter(-1))),he=b&&b(E.parent,D),Oe=he?[he]:D&&J?[{type:J}]:void 0,je=Re(N.doc,N.mapping.map(m.pos),1,Oe);if(!Oe&&!je&&Re(N.doc,N.mapping.map(m.pos),1,J?[{type:J}]:void 0)&&(J&&(Oe=[{type:J}]),je=!0),je&&(N.split(N.mapping.map(m.pos),1,Oe),!D&&!m.parentOffset&&m.parent.type!=J)){let Gt=N.mapping.map(m.before()),ui=N.doc.resolve(Gt);J&&m.node(-1).canReplaceWith(ui.index(),ui.index()+1,J)&&N.setNodeMarkup(N.mapping.map(m.before()),J)}l(N.scrollIntoView())}return!0}}();function Zs(b,a,l){let D,N,m=a.nodeBefore,E=a.nodeAfter;if(m.type.spec.isolating||E.type.spec.isolating)return!1;if(function Hu(b,a,l){let m=a.nodeBefore,E=a.nodeAfter,D=a.index();return!(!(m&&E&&m.type.compatibleContent(E.type))||(!m.content.size&&a.parent.canReplace(D-1,D)?(l&&l(b.tr.delete(a.pos-m.nodeSize,a.pos).scrollIntoView()),0):!a.parent.canReplace(D,D+1)||!E.isTextblock&&!re(b.doc,a.pos)||(l&&l(b.tr.clearIncompatible(a.pos,m.type,m.contentMatchAt(m.childCount)).join(a.pos).scrollIntoView()),0)))}(b,a,l))return!0;let J=a.parent.canReplace(a.index(),a.index()+1);if(J&&(D=(N=m.contentMatchAt(m.childCount)).findWrapping(E.type))&&N.matchType(D[0]||E.type).validEnd){if(l){let Gt=a.pos+E.nodeSize,ui=ze.empty;for(let wn=D.length-1;wn>=0;wn--)ui=ze.from(D[wn].create(null,ui));ui=ze.from(m.copy(ui));let Di=b.tr.step(new r(a.pos-1,Gt,a.pos,Gt,new rt(ui,1,0),D.length,!0)),_i=Gt+2*D.length;re(Di.doc,_i)&&Di.join(_i),l(Di.scrollIntoView())}return!0}let he=nr.findFrom(a,1),Oe=he&&he.$from.blockRange(he.$to),je=Oe&&R(Oe);if(null!=je&&je>=a.depth)return l&&l(b.tr.lift(Oe,je).scrollIntoView()),!0;if(J&&Ql(E,"start",!0)&&Ql(m,"end")){let Gt=m,ui=[];for(;ui.push(Gt),!Gt.isTextblock;)Gt=Gt.lastChild;let Di=E,_i=1;for(;!Di.isTextblock;Di=Di.firstChild)_i++;if(Gt.canReplace(Gt.childCount,Gt.childCount,Di.content)){if(l){let wn=ze.empty;for(let qr=ui.length-1;qr>=0;qr--)wn=ze.from(ui[qr].copy(wn));l(b.tr.step(new r(a.pos-ui.length,a.pos+E.nodeSize,a.pos+_i,a.pos+E.nodeSize-_i,new rt(wn,ui.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function ju(b){return function(a,l){let m=a.selection,E=b<0?m.$from:m.$to,D=E.depth;for(;E.node(D).isInline;){if(!D)return!1;D--}return!!E.node(D).isTextblock&&(l&&l(a.tr.setSelection(or.create(a.doc,b<0?E.start(D):E.end(D)))),!0)}}const Hd=ju(-1),tc=ju(1);function Uu(b,a=null){return function(l,m){let E=!1;for(let D=0;D<l.selection.ranges.length&&!E;D++){let{$from:{pos:N},$to:{pos:J}}=l.selection.ranges[D];l.doc.nodesBetween(N,J,(he,Oe)=>{if(E)return!1;if(he.isTextblock&&!he.hasMarkup(b,a))if(he.type==b)E=!0;else{let je=l.doc.resolve(Oe),Gt=je.index();E=je.parent.canReplaceWith(Gt,Gt+1,b)}})}if(!E)return!1;if(m){let D=l.tr;for(let N=0;N<l.selection.ranges.length;N++){let{$from:{pos:J},$to:{pos:he}}=l.selection.ranges[N];D.setBlockType(J,he,b,a)}m(D.scrollIntoView())}return!0}}function nd(b,a=null){return function(l,m){let{empty:E,$cursor:D,ranges:N}=l.selection;if(E&&!D||!function Lh(b,a,l){for(let m=0;m<a.length;m++){let{$from:E,$to:D}=a[m],N=0==E.depth&&b.inlineContent&&b.type.allowsMarkType(l);if(b.nodesBetween(E.pos,D.pos,J=>{if(N)return!1;N=J.inlineContent&&J.type.allowsMarkType(l)}),N)return!0}return!1}(l.doc,N,b))return!1;if(m)if(D)b.isInSet(l.storedMarks||D.marks())?m(l.tr.removeStoredMark(b)):m(l.tr.addStoredMark(b.create(a)));else{let J=!1,he=l.tr;for(let Oe=0;!J&&Oe<N.length;Oe++){let{$from:je,$to:Gt}=N[Oe];J=l.doc.rangeHasMark(je.pos,Gt.pos,b)}for(let Oe=0;Oe<N.length;Oe++){let{$from:je,$to:Gt}=N[Oe];if(J)he.removeMark(je.pos,Gt.pos,b);else{let ui=je.pos,Di=Gt.pos,_i=je.nodeAfter,wn=Gt.nodeBefore,ar=_i&&_i.isText?/^\s*/.exec(_i.text)[0].length:0,qr=wn&&wn.isText?/\s*$/.exec(wn.text)[0].length:0;ui+ar<Di&&(ui+=ar,Di-=qr),he.addMark(ui,Di,b.create(a))}}m(he.scrollIntoView())}return!0}}function yd(...b){return function(a,l,m){for(let E=0;E<b.length;E++)if(b[E](a,l,m))return!0;return!1}}let pu=yd(Ea,(b,a,l)=>{let m=function hu(b,a){let{$cursor:l}=b.selection;return!l||(a?!a.endOfTextblock("backward",b):l.parentOffset>0)?null:l}(b,l);if(!m)return!1;let E=Vd(m);if(!E){let N=m.blockRange(),J=N&&R(N);return null!=J&&(a&&a(b.tr.lift(N,J).scrollIntoView()),!0)}let D=E.nodeBefore;if(!D.type.spec.isolating&&Zs(b,E,a))return!0;if(0==m.parent.content.size&&(Ql(D,"end")||yr.isSelectable(D))){let N=yt(b.doc,m.before(),m.after(),rt.empty);if(N&&N.slice.size<N.to-N.from){if(a){let J=b.tr.step(N);J.setSelection(Ql(D,"end")?nr.findFrom(J.doc.resolve(J.mapping.map(E.pos,-1)),-1):yr.create(J.doc,E.pos-D.nodeSize)),a(J.scrollIntoView())}return!0}}return!(!D.isAtom||E.depth!=m.depth-1||(a&&a(b.tr.delete(E.pos-D.nodeSize,E.pos).scrollIntoView()),0))},(b,a,l)=>{let{$head:m,empty:E}=b.selection,D=m;if(!E)return!1;if(m.parent.isTextblock){if(l?!l.endOfTextblock("backward",b):m.parentOffset>0)return!1;D=Vd(m)}let N=D&&D.nodeBefore;return!(!N||!yr.isSelectable(N)||(a&&a(b.tr.setSelection(yr.create(b.doc,D.pos-N.nodeSize)).scrollIntoView()),0))}),Wu=yd(Ea,(b,a,l)=>{let m=function $d(b,a){let{$cursor:l}=b.selection;return!l||(a?!a.endOfTextblock("forward",b):l.parentOffset<l.parent.content.size)?null:l}(b,l);if(!m)return!1;let E=Nu(m);if(!E)return!1;let D=E.nodeAfter;if(Zs(b,E,a))return!0;if(0==m.parent.content.size&&(Ql(D,"start")||yr.isSelectable(D))){let N=yt(b.doc,m.before(),m.after(),rt.empty);if(N&&N.slice.size<N.to-N.from){if(a){let J=b.tr.step(N);J.setSelection(Ql(D,"start")?nr.findFrom(J.doc.resolve(J.mapping.map(E.pos)),1):yr.create(J.doc,J.mapping.map(E.pos))),a(J.scrollIntoView())}return!0}}return!(!D.isAtom||E.depth!=m.depth-1||(a&&a(b.tr.delete(E.pos,E.pos+D.nodeSize).scrollIntoView()),0))},(b,a,l)=>{let{$head:m,empty:E}=b.selection,D=m;if(!E)return!1;if(m.parent.isTextblock){if(l?!l.endOfTextblock("forward",b):m.parentOffset<m.parent.content.size)return!1;D=Nu(m)}let N=D&&D.nodeAfter;return!(!N||!yr.isSelectable(N)||(a&&a(b.tr.setSelection(yr.create(b.doc,D.pos)).scrollIntoView()),0))});const Tc={Enter:yd(fc,$u,da,al),"Mod-Enter":vd,Backspace:pu,"Mod-Backspace":pu,"Shift-Backspace":pu,Delete:Wu,"Mod-Delete":Wu,"Mod-a":(b,a)=>(a&&a(b.tr.setSelection(new bs(b.doc))),!0)},Ph={"Ctrl-h":Tc.Backspace,"Alt-Backspace":Tc["Mod-Backspace"],"Ctrl-d":Tc.Delete,"Ctrl-Alt-Backspace":Tc["Mod-Delete"],"Alt-Delete":Tc["Mod-Delete"],"Alt-d":Tc["Mod-Delete"],"Ctrl-a":Hd,"Ctrl-e":tc};for(let b in Tc)Ph[b]=Tc[b];const zh=(typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&"darwin"==os.platform())?Ph:Tc;class Dl{constructor(a,l){this.match=a,this.match=a,this.handler="string"==typeof l?function qu(b){return function(a,l,m,E){let D=b;if(l[1]){let N=l[0].lastIndexOf(l[1]);D+=l[0].slice(N+l[1].length);let J=(m+=N)-E;J>0&&(D=l[0].slice(N-J,N)+D,m=E)}return a.tr.insertText(D,m,E)}}(l):l}}function Sa(b,a,l,m,E,D){if(b.composing)return!1;let N=b.state,J=N.doc.resolve(a);if(J.parent.type.spec.code)return!1;let he=J.parent.textBetween(Math.max(0,J.parentOffset-500),J.parentOffset,null,"\ufffc")+m;for(let Oe=0;Oe<E.length;Oe++){let je=E[Oe].match.exec(he),Gt=je&&E[Oe].handler(N,je,a-(je[0].length-m.length),l);if(Gt)return b.dispatch(Gt.setMeta(D,{transform:Gt,from:a,to:l,text:m})),!0}return!1}const Yh=new Dl(/--$/,"\u2014"),mc=new Dl(/\.\.\.$/,"\u2026"),Nl=[new Dl(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new Dl(/"$/,"\u201d"),new Dl(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new Dl(/'$/,"\u2019")];function Zu(b,a,l=null,m){return new Dl(b,(E,D,N,J)=>{let he=l instanceof Function?l(D):l,Oe=E.tr.delete(N,J),Gt=Oe.doc.resolve(N).blockRange(),ui=Gt&&W(Gt,a,he);if(!ui)return null;Oe.wrap(Gt,ui);let Di=Oe.doc.resolve(N-1).nodeBefore;return Di&&Di.type==a&&re(Oe.doc,N-1)&&(!m||m(D,Di))&&Oe.join(N-1),Oe})}function Ud(b,a,l=null){return new Dl(b,(m,E,D,N)=>{let J=m.doc.resolve(D),he=l instanceof Function?l(E):l;return J.node(-1).canReplaceWith(J.index(-1),J.indexAfter(-1),a)?m.tr.delete(D,N).setBlockType(D,D,a,he):null})}const mu=(b,a)=>{const{from:l,$from:m,to:E,empty:D}=b.selection;return D?!!a.isInSet(b.storedMarks||m.marks()):b.doc.rangeHasMark(l,E,a)},gu=(b,a,l={})=>{const{selection:m}=b,{$from:E,to:D}=m,N=((b,a)=>{for(let l=a.depth;l>0;l-=1)if(a.node(l).type===b)return a.node(l).type;return null})(a,E);return Object.entries(l).length&&N?D<=E.end()&&E.parent.hasMarkup(a,l):!!N},$c=b=>{const a=[],{selection:{from:l,to:m}}=b;return b.doc.nodesBetween(l,m,E=>{a.push(E)}),a},Ku=(b,a,l)=>{for(const m of a){const{$from:E,$to:D}=m;let N=0===E.depth&&b.type.allowsMarkType(l);if(b.nodesBetween(E.pos,D.pos,J=>!N&&(N=J.inlineContent&&J.type.allowsMarkType(l),!0)),N)return!0}return!1},Ju=(b,a,l)=>new Dl(b,(m,E,D,N)=>{const{tr:J}=m,he=D;let Oe=N;const[je,,Gt]=E,ui=je.search(/\S/);if(Gt){const Di=D+je.indexOf(Gt),_i=Di+Gt.length;_i<N&&J.delete(_i,N),Di>D&&J.delete(D+ui,Di),Oe=D+Gt.length+ui}return J.addMark(he,Oe,a.create(l)),J.removeStoredMark(a),J}),vu=(b,a={})=>(l,m)=>{const{tr:E,selection:D}=l,{empty:N,ranges:J,$from:he,$to:Oe}=D;if(N&&D instanceof or){const{$cursor:je}=D;if(!je||!Ku(l.doc,J,b)||(E.addStoredMark(b.create(a)),!E.storedMarksSet))return!1;m?.(E)}else{if(E.addMark(he.pos,Oe.pos,b.create(a)),!E.docChanged)return!1;m?.(E.scrollIntoView())}return!0};for(var xd=Et(4476),Vl={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},od={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Bh=typeof navigator<"u"&&/Mac/.test(navigator.platform),Wd=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ua=0;ua<10;ua++)Vl[48+ua]=Vl[96+ua]=String(ua);for(ua=1;ua<=24;ua++)Vl[ua+111]="F"+ua;for(ua=65;ua<=90;ua++)Vl[ua]=String.fromCharCode(ua+32),od[ua]=String.fromCharCode(ua);for(var yu in Vl)od.hasOwnProperty(yu)||(od[yu]=Vl[yu]);const Gh=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Qu(b){let m,E,D,N,a=b.split(/-(?!$)/),l=a[a.length-1];"Space"==l&&(l=" ");for(let J=0;J<a.length-1;J++){let he=a[J];if(/^(cmd|meta|m)$/i.test(he))N=!0;else if(/^a(lt)?$/i.test(he))m=!0;else if(/^(c|ctrl|control)$/i.test(he))E=!0;else if(/^s(hift)?$/i.test(he))D=!0;else{if(!/^mod$/i.test(he))throw new Error("Unrecognized modifier name: "+he);Gh?N=!0:E=!0}}return m&&(l="Alt-"+l),E&&(l="Ctrl-"+l),N&&(l="Meta-"+l),D&&(l="Shift-"+l),l}function eh(b,a,l=!0){return a.altKey&&(b="Alt-"+b),a.ctrlKey&&(b="Ctrl-"+b),a.metaKey&&(b="Meta-"+b),l&&a.shiftKey&&(b="Shift-"+b),b}function bu(b){return new Ho({props:{handleKeyDown:qd(b)}})}function qd(b){let a=function Nh(b){let a=Object.create(null);for(let l in b)a[Qu(l)]=b[l];return a}(b);return function(l,m){let D,E=function wd(b){var l=!(Bh&&b.metaKey&&b.shiftKey&&!b.ctrlKey&&!b.altKey||Wd&&b.shiftKey&&b.key&&1==b.key.length||"Unidentified"==b.key)&&b.key||(b.shiftKey?od:Vl)[b.keyCode]||b.key||"Unidentified";return"Esc"==l&&(l="Escape"),"Del"==l&&(l="Delete"),"Left"==l&&(l="ArrowLeft"),"Up"==l&&(l="ArrowUp"),"Right"==l&&(l="ArrowRight"),"Down"==l&&(l="ArrowDown"),l}(m),N=a[eh(E,m)];if(N&&N(l.state,l.dispatch,l))return!0;if(1==E.length&&" "!=E){if(m.shiftKey){let J=a[eh(E,m,!1)];if(J&&J(l.state,l.dispatch,l))return!0}if((m.shiftKey||m.altKey||m.metaKey||E.charCodeAt(0)>127)&&(D=Vl[m.keyCode])&&D!=E){let J=a[eh(D,m)];if(J&&J(l.state,l.dispatch,l))return!0}}return!1}}var no=function(){};no.prototype.append=function(a){return a.length?(a=no.from(a),!this.length&&a||a.length<200&&this.leafAppend(a)||this.length<200&&a.leafPrepend(this)||this.appendInner(a)):this},no.prototype.prepend=function(a){return a.length?no.from(a).append(this):this},no.prototype.appendInner=function(a){return new th(this,a)},no.prototype.slice=function(a,l){return void 0===a&&(a=0),void 0===l&&(l=this.length),a>=l?no.empty:this.sliceInner(Math.max(0,a),Math.min(this.length,l))},no.prototype.get=function(a){if(!(a<0||a>=this.length))return this.getInner(a)},no.prototype.forEach=function(a,l,m){void 0===l&&(l=0),void 0===m&&(m=this.length),l<=m?this.forEachInner(a,l,m,0):this.forEachInvertedInner(a,l,m,0)},no.prototype.map=function(a,l,m){void 0===l&&(l=0),void 0===m&&(m=this.length);var E=[];return this.forEach(function(D,N){return E.push(a(D,N))},l,m),E},no.from=function(a){return a instanceof no?a:a&&a.length?new ps(a):no.empty};var ps=function(b){function a(m){b.call(this),this.values=m}b&&(a.__proto__=b),(a.prototype=Object.create(b&&b.prototype)).constructor=a;var l={length:{configurable:!0},depth:{configurable:!0}};return a.prototype.flatten=function(){return this.values},a.prototype.sliceInner=function(E,D){return 0==E&&D==this.length?this:new a(this.values.slice(E,D))},a.prototype.getInner=function(E){return this.values[E]},a.prototype.forEachInner=function(E,D,N,J){for(var he=D;he<N;he++)if(!1===E(this.values[he],J+he))return!1},a.prototype.forEachInvertedInner=function(E,D,N,J){for(var he=D-1;he>=N;he--)if(!1===E(this.values[he],J+he))return!1},a.prototype.leafAppend=function(E){if(this.length+E.length<=200)return new a(this.values.concat(E.flatten()))},a.prototype.leafPrepend=function(E){if(this.length+E.length<=200)return new a(E.flatten().concat(this.values))},l.length.get=function(){return this.values.length},l.depth.get=function(){return 0},Object.defineProperties(a.prototype,l),a}(no);no.empty=new ps([]);var th=function(b){function a(l,m){b.call(this),this.left=l,this.right=m,this.length=l.length+m.length,this.depth=Math.max(l.depth,m.depth)+1}return b&&(a.__proto__=b),(a.prototype=Object.create(b&&b.prototype)).constructor=a,a.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},a.prototype.getInner=function(m){return m<this.left.length?this.left.get(m):this.right.get(m-this.left.length)},a.prototype.forEachInner=function(m,E,D,N){var J=this.left.length;if(E<J&&!1===this.left.forEachInner(m,E,Math.min(D,J),N)||D>J&&!1===this.right.forEachInner(m,Math.max(E-J,0),Math.min(this.length,D)-J,N+J))return!1},a.prototype.forEachInvertedInner=function(m,E,D,N){var J=this.left.length;if(E>J&&!1===this.right.forEachInvertedInner(m,E-J,Math.max(D,J)-J,N+J)||D<J&&!1===this.left.forEachInvertedInner(m,Math.min(E,J),D,N))return!1},a.prototype.sliceInner=function(m,E){if(0==m&&E==this.length)return this;var D=this.left.length;return E<=D?this.left.slice(m,E):m>=D?this.right.slice(m-D,E-D):this.left.slice(m,D).append(this.right.slice(0,E-D))},a.prototype.leafAppend=function(m){var E=this.right.leafAppend(m);if(E)return new a(this.left,E)},a.prototype.leafPrepend=function(m){var E=this.left.leafPrepend(m);if(E)return new a(E,this.right)},a.prototype.appendInner=function(m){return this.left.depth>=Math.max(this.right.depth,m.depth)+1?new a(this.left,new a(this.right,m)):new a(this,m)},a}(no);const ic=no;class Io{constructor(a,l){this.items=a,this.eventCount=l}popEvent(a,l){if(0==this.eventCount)return null;let E,D,m=this.items.length;for(;;m--)if(this.items.get(m-1).selection){--m;break}l&&(E=this.remapping(m,this.items.length),D=E.maps.length);let J,he,N=a.tr,Oe=[],je=[];return this.items.forEach((Gt,ui)=>{if(!Gt.step)return E||(E=this.remapping(m,ui+1),D=E.maps.length),D--,void je.push(Gt);if(E){je.push(new Ps(Gt.map));let _i,Di=Gt.step.map(E.slice(D));Di&&N.maybeStep(Di).doc&&(_i=N.mapping.maps[N.mapping.maps.length-1],Oe.push(new Ps(_i,void 0,void 0,Oe.length+je.length))),D--,_i&&E.appendMap(_i,D)}else N.maybeStep(Gt.step);return Gt.selection?(J=E?Gt.selection.map(E.slice(D)):Gt.selection,he=new Io(this.items.slice(0,m).append(je.reverse().concat(Oe)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:he,transform:N,selection:J}}addTransform(a,l,m,E){let D=[],N=this.eventCount,J=this.items,he=!E&&J.length?J.get(J.length-1):null;for(let je=0;je<a.steps.length;je++){let Di,Gt=a.steps[je].invert(a.docs[je]),ui=new Ps(a.mapping.maps[je],Gt,l);(Di=he&&he.merge(ui))&&(ui=Di,je?D.pop():J=J.slice(0,J.length-1)),D.push(ui),l&&(N++,l=void 0),E||(he=ui)}let Oe=N-m.depth;return Oe>ha&&(J=function Rl(b,a){let l;return b.forEach((m,E)=>{if(m.selection&&0==a--)return l=E,!1}),b.slice(l)}(J,Oe),N-=Oe),new Io(J.append(D),N)}remapping(a,l){let m=new Ki;return this.items.forEach((E,D)=>{m.appendMap(E.map,null!=E.mirrorOffset&&D-E.mirrorOffset>=a?m.maps.length-E.mirrorOffset:void 0)},a,l),m}addMaps(a){return 0==this.eventCount?this:new Io(this.items.append(a.map(l=>new Ps(l))),this.eventCount)}rebased(a,l){if(!this.eventCount)return this;let m=[],E=Math.max(0,this.items.length-l),D=a.mapping,N=a.steps.length,J=this.eventCount;this.items.forEach(ui=>{ui.selection&&J--},E);let he=l;this.items.forEach(ui=>{let Di=D.getMirror(--he);if(null==Di)return;N=Math.min(N,Di);let _i=D.maps[Di];if(ui.step){let wn=a.steps[Di].invert(a.docs[Di]),ar=ui.selection&&ui.selection.map(D.slice(he+1,Di));ar&&J++,m.push(new Ps(_i,wn,ar))}else m.push(new Ps(_i))},E);let Oe=[];for(let ui=l;ui<N;ui++)Oe.push(new Ps(D.maps[ui]));let je=this.items.slice(0,E).append(Oe).append(m),Gt=new Io(je,J);return Gt.emptyItemCount()>500&&(Gt=Gt.compress(this.items.length-m.length)),Gt}emptyItemCount(){let a=0;return this.items.forEach(l=>{l.step||a++}),a}compress(a=this.items.length){let l=this.remapping(0,a),m=l.maps.length,E=[],D=0;return this.items.forEach((N,J)=>{if(J>=a)E.push(N),N.selection&&D++;else if(N.step){let he=N.step.map(l.slice(m)),Oe=he&&he.getMap();if(m--,Oe&&l.appendMap(Oe,m),he){let je=N.selection&&N.selection.map(l.slice(m));je&&D++;let ui,Gt=new Ps(Oe.invert(),he,je),Di=E.length-1;(ui=E.length&&E[Di].merge(Gt))?E[Di]=ui:E.push(Gt)}}else N.map&&m--},this.items.length,0),new Io(ic.from(E.reverse()),D)}}Io.empty=new Io(ic.empty,0);class Ps{constructor(a,l,m,E){this.map=a,this.step=l,this.selection=m,this.mirrorOffset=E}merge(a){if(this.step&&a.step&&!a.selection){let l=a.step.merge(this.step);if(l)return new Ps(l.getMap().invert(),l,this.selection)}}}class Ic{constructor(a,l,m,E,D){this.done=a,this.undone=l,this.prevRanges=m,this.prevTime=E,this.prevComposition=D}}const ha=20;function xu(b){let a=[];return b.forEach((l,m,E,D)=>a.push(E,D)),a}function wu(b,a){if(!b)return null;let l=[];for(let m=0;m<b.length;m+=2){let E=a.map(b[m],1),D=a.map(b[m+1],-1);E<=D&&l.push(E,D)}return l}function Cu(b,a,l,m){let E=Zd(a),D=ka.get(a).spec.config,N=(m?b.undone:b.done).popEvent(a,E);if(!N)return;let J=N.selection.resolve(N.transform.doc),he=(m?b.done:b.undone).addTransform(N.transform,a.selection.getBookmark(),D,E),Oe=new Ic(m?he:N.remaining,m?N.remaining:he,null,0,-1);l(N.transform.setSelection(J).setMeta(ka,{redo:m,historyState:Oe}).scrollIntoView())}let ih=!1,Eu=null;function Zd(b){let a=b.plugins;if(Eu!=a){ih=!1,Eu=a;for(let l=0;l<a.length;l++)if(a[l].spec.historyPreserveItems){ih=!0;break}}return ih}const ka=new mo("history"),Ua=new mo("closeHistory");const Ed=(b,a)=>{let l=ka.getState(b);return!(!l||0==l.done.eventCount||(a&&Cu(l,b,a,!1),0))},Sd=(b,a)=>{let l=ka.getState(b);return!(!l||0==l.undone.eventCount||(a&&Cu(l,b,a,!0),0))},kd=["imgEl"];function Mp(b,a){if(1&b){const l=e.KQA();e.I0R(0,"span",4)(1,"span",5),e.qCj("mousedown",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.startResizing(E,"left"))}),e.C$Y(),e.I0R(2,"span",6),e.qCj("mousedown",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.startResizing(E,"right"))}),e.C$Y(),e.I0R(3,"span",7),e.qCj("mousedown",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.startResizing(E,"left"))}),e.C$Y(),e.I0R(4,"span",8),e.qCj("mousedown",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.startResizing(E,"right"))}),e.C$Y()()}}const rh=b=>({"NgxEditor__Resizer--Active":b}),tf=["ngxEditor"],Su=["*"];function sh(b,a){if(1&b&&(e.I0R(0,"div",12),e.OEk(1),e.C$Y()),2&b){const l=e.GaO(2);e.yG2(),e.oRS(" ",(null==l.href.errors?null:l.href.errors.pattern)&&"Please enter valid url."," ")}}function $h(b,a){if(1&b&&(e.I0R(0,"div",12),e.OEk(1),e.C$Y()),2&b){const l=e.GaO(2);e.yG2(),e.oRS(" ",(null==l.text.errors?null:l.text.errors.required)&&"This is required"," ")}}function ad(b,a){if(1&b){const l=e.KQA();e.I0R(0,"div",2)(1,"form",3),e.qCj("ngSubmit",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.insertLink(E))}),e.I0R(2,"div",4)(3,"div",5)(4,"label",6),e.OEk(5),e.wVc(6,"async"),e.C$Y(),e.wR5(7,"input",7),e.yuY(8,sh,2,1,"div",8),e.C$Y()(),e.I0R(9,"div",4)(10,"div",5)(11,"label",6),e.OEk(12),e.wVc(13,"async"),e.C$Y(),e.wR5(14,"input",9),e.yuY(15,$h,2,1,"div",8),e.C$Y()(),e.I0R(16,"div",4)(17,"div",5)(18,"label"),e.wR5(19,"input",10),e.OEk(20),e.wVc(21,"async"),e.C$Y()()(),e.I0R(22,"button",11),e.OEk(23),e.wVc(24,"async"),e.C$Y()()()}if(2&b){const l=e.GaO();e.yG2(),e.E7m("formGroup",l.form),e.yG2(4),e.cNF(e.kDX(6,8,l.getLabel("url"))),e.yG2(3),e.E7m("ngIf",l.href.touched&&l.href.invalid),e.yG2(4),e.cNF(e.kDX(13,10,l.getLabel("text"))),e.yG2(3),e.E7m("ngIf",l.text.touched&&l.text.invalid),e.yG2(5),e.oRS(" ",e.kDX(21,12,l.getLabel("openInNewTab"))," "),e.yG2(2),e.E7m("disabled",!l.form.valid),e.yG2(),e.cNF(e.kDX(24,14,l.getLabel("insert")))}}const ku=(b,a)=>({"NgxEditor__Dropdown--Active":b,"NgxEditor--Disabled":a});function Jd(b,a){if(1&b){const l=e.KQA();e.I0R(0,"div",4),e.qCj("mousedown",function(E){const N=e.usT(l).$implicit,J=e.GaO(2);return e.CGJ(J.onClick(E,N))}),e.OEk(1),e.wVc(2,"async"),e.C$Y()}if(2&b){const l=a.$implicit,m=e.GaO(2);e.E7m("ngClass",e.IBC(4,ku,l===m.activeItem,m.disabledItems.includes(l))),e.yG2(),e.oRS(" ",e.kDX(2,2,m.getName(l))," ")}}function Hc(b,a){if(1&b&&(e.I0R(0,"div",2),e.yuY(1,Jd,3,7,"div",3),e.C$Y()),2&b){const l=e.GaO();e.yG2(),e.E7m("ngForOf",l.items)("ngForTrackBy",l.trackByIndex)}}function Td(b,a){if(1&b&&(e.I0R(0,"div",12),e.OEk(1),e.C$Y()),2&b){const l=e.GaO(2);e.yG2(),e.oRS(" ",(null==l.src.errors?null:l.src.errors.pattern)&&"Please enter valid url."," ")}}function oh(b,a){if(1&b){const l=e.KQA();e.I0R(0,"div",2)(1,"form",3),e.qCj("ngSubmit",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.insertLink(E))}),e.I0R(2,"div",4)(3,"div",5)(4,"label",6),e.OEk(5),e.wVc(6,"async"),e.C$Y(),e.wR5(7,"input",7),e.yuY(8,Td,2,1,"div",8),e.C$Y()(),e.I0R(9,"div",4)(10,"div",5)(11,"label",6),e.OEk(12),e.wVc(13,"async"),e.C$Y(),e.wR5(14,"input",9),e.C$Y()(),e.I0R(15,"div",4)(16,"div",5)(17,"label",6),e.OEk(18),e.wVc(19,"async"),e.C$Y(),e.wR5(20,"input",10),e.C$Y()(),e.I0R(21,"button",11),e.OEk(22),e.wVc(23,"async"),e.C$Y()()()}if(2&b){const l=e.GaO();e.yG2(),e.E7m("formGroup",l.form),e.yG2(4),e.cNF(e.kDX(6,7,l.getLabel("url"))),e.yG2(3),e.E7m("ngIf",l.src.touched&&l.src.invalid),e.yG2(4),e.cNF(e.kDX(13,9,l.getLabel("altText"))),e.yG2(6),e.cNF(e.kDX(19,11,l.getLabel("title"))),e.yG2(3),e.E7m("disabled",!l.form.valid||!l.form.dirty),e.yG2(),e.cNF(e.kDX(23,13,l.getLabel("insert")))}}const Hh=(b,a)=>({backgroundColor:b,color:a}),jh=b=>({"NgxEditor__Color--Active":b});function Uh(b,a){if(1&b){const l=e.KQA();e.I0R(0,"button",7),e.qCj("mousedown",function(E){const N=e.usT(l).$implicit,J=e.GaO(3);return e.CGJ(J.onColorSelect(E,N))}),e.C$Y()}if(2&b){const l=a.$implicit,m=e.GaO(3);e.E7m("ngStyle",e.IBC(3,Hh,l,m.getContrastYIQ(l)))("title",l)("ngClass",e.S45(6,jh,m.activeColors.includes(l)))}}function ah(b,a){if(1&b&&(e.I0R(0,"div",5),e.yuY(1,Uh,1,8,"button",6),e.C$Y()),2&b){const l=a.$implicit,m=e.GaO(2);e.yG2(),e.E7m("ngForOf",l)("ngForTrackBy",m.trackByIndex)}}function Wh(b,a){if(1&b){const l=e.KQA();e.I0R(0,"div",2),e.yuY(1,ah,2,2,"div",3),e.I0R(2,"button",4),e.qCj("mousedown",function(E){e.usT(l);const D=e.GaO();return e.CGJ(D.remove(E))}),e.OEk(3),e.wVc(4,"async"),e.C$Y()()}if(2&b){const l=e.GaO();e.yG2(),e.E7m("ngForOf",l.presets)("ngForTrackBy",l.trackByIndex),e.yG2(),e.E7m("disabled",!l.isActive),e.yG2(),e.oRS(" ",e.kDX(4,4,l.getLabel("remove"))," ")}}function lh(b,a){if(1&b&&e.wR5(0,"ngx-toggle-command",7),2&b){const l=e.GaO().$implicit,m=e.GaO(2);e.m8U(m.iconContainerClass),e.E7m("toolbarItem",l)}}function ch(b,a){if(1&b&&e.wR5(0,"ngx-insert-command",7),2&b){const l=e.GaO().$implicit,m=e.GaO(2);e.m8U(m.iconContainerClass),e.E7m("toolbarItem",l)}}function dh(b,a){if(1&b&&e.wR5(0,"ngx-link"),2&b){const l=e.GaO(3);e.m8U(l.iconContainerClass)}}function qh(b,a){if(1&b&&e.wR5(0,"ngx-image"),2&b){const l=e.GaO(3);e.m8U(l.iconContainerClass)}}function Xh(b,a){if(1&b&&e.wR5(0,"ngx-dropdown",9),2&b){const l=a.$implicit,m=e.GaO(4);e.m8U(m.dropdownContainerClass),e.E7m("group",l.key)("items",l.value)}}function Zh(b,a){if(1&b&&(e.SAx(0),e.yuY(1,Xh,1,4,"ngx-dropdown",8),e.wVc(2,"keyvalue"),e.k70()),2&b){const l=e.GaO().$implicit,m=e.GaO(2);e.yG2(),e.E7m("ngForOf",e.kDX(2,2,m.getDropdownItems(l)))("ngForTrackBy",m.trackByIndex)}}function uh(b,a){if(1&b&&e.wR5(0,"ngx-color-picker",10),2&b){const l=e.GaO(3);e.m8U(l.iconContainerClass),e.E7m("presets",l.presets)}}function Oc(b,a){if(1&b&&e.wR5(0,"ngx-color-picker",11),2&b){const l=e.GaO(3);e.m8U(l.iconContainerClass),e.E7m("presets",l.presets)}}function ll(b,a){if(1&b&&e.wR5(0,"div"),2&b){const l=e.GaO(3);e.m8U(l.seperatorClass)}}function Ap(b,a){if(1&b&&(e.SAx(0),e.yuY(1,lh,1,3,"ngx-toggle-command",3)(2,ch,1,3,"ngx-insert-command",3)(3,dh,1,2,"ngx-link",4)(4,qh,1,2,"ngx-image",4)(5,Zh,3,4,"ng-container",2)(6,uh,1,3,"ngx-color-picker",5)(7,Oc,1,3,"ngx-color-picker",6)(8,ll,1,2,"div",4),e.k70()),2&b){const l=a.$implicit,m=a.last,E=e.GaO().last,D=e.GaO();e.yG2(),e.E7m("ngIf",D.toggleCommands.includes(l)),e.yG2(),e.E7m("ngIf",D.insertCommands.includes(l)),e.yG2(),e.E7m("ngIf","link"===l),e.yG2(),e.E7m("ngIf","image"===l),e.yG2(),e.E7m("ngIf",D.isDropDown(l)),e.yG2(),e.E7m("ngIf","text_color"===l),e.yG2(),e.E7m("ngIf","background_color"===l),e.yG2(),e.E7m("ngIf",m&&!E)}}function hh(b,a){if(1&b&&(e.SAx(0),e.yuY(1,Ap,9,8,"ng-container",1),e.k70()),2&b){const l=a.$implicit,m=e.GaO();e.yG2(),e.E7m("ngForOf",l)("ngForTrackBy",m.trackByIndex)}}function Dp(b,a){if(1&b&&(e.SAx(0),e.C_f(1,12),e.k70()),2&b){const l=e.GaO();e.yG2(),e.E7m("ngTemplateOutlet",l.customMenuRef)}}const Kh=(b,a)=>({"NgxEditor--Disabled":b,"NgxEditor__MenuBar--Reverse":a}),Jh=(b=!0)=>new Ho({key:new mo("editable"),state:{init:()=>b,apply:(a,l)=>a.getMeta("UPDATE_EDITABLE")??l},props:{editable(a){return this.getState(a)},attributes(a){return this.getState(a)?null:{class:"NgxEditor__Content--Disabled"}}}}),Pp=b=>new Ho({key:new mo("placeholder"),state:{init:()=>b??"",apply:(a,l)=>a.getMeta("UPDATE_PLACEHOLDER")??l},props:{decorations(a){const{doc:l}=a,{textContent:m,childCount:E}=l,D=this.getState(a);if(!D||E>1)return mi.empty;const N=[];return l.descendants((he,Oe)=>{if(he.type.isBlock&&0===he.childCount&&0===m.length){const ui=Qt.node(Oe,Oe+he.nodeSize,{class:"NgxEditor__Placeholder","data-placeholder":D,"data-align":he.attrs.align??null});N.push(ui)}return!1}),mi.create(l,N)}}});let Fp=(()=>{class b{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new e._w7}startResizing(l,m){l.preventDefault(),this.resizeImage(l,m)}resizeImage(l,m){const E=l.pageX,D=this.imgEl.nativeElement.clientWidth,N="left"===m,{width:J}=window.getComputedStyle(this.view.dom),he=parseInt(J,10),Oe=Gt=>{const Di=Gt.pageX-E,_i=N?D-Di:D+Di;_i>he||_i<20||(this.outerWidth=`${_i}px`)},je=Gt=>{Gt.preventDefault(),document.removeEventListener("mousemove",Oe),document.removeEventListener("mouseup",je),this.imageResize.emit()};document.addEventListener("mousemove",Oe),document.addEventListener("mouseup",je)}static#e=this.\u0275fac=function(m){return new(m||b)};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-image-view"]],viewQuery:function(m,E){if(1&m&&e.CC$(kd,7),2&m){let D;e.wto(D=e.Gqi())&&(E.imgEl=D.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(m,E){1&m&&(e.I0R(0,"span",0),e.yuY(1,Mp,5,0,"span",1),e.wR5(2,"img",2,3),e.C$Y()),2&m&&(e.m4B("width",E.outerWidth),e.E7m("ngClass",e.S45(7,rh,E.selected)),e.yG2(),e.E7m("ngIf",E.selected),e.yG2(),e.E7m("src",E.src,e.K6U)("alt",E.alt)("title",E.title))},dependencies:[Kr.QF,Kr.u_],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]})}return b})();class fh{constructor(a,l,m,E){this.updating=!1,this.handleResize=()=>{if(this.updating)return;const{state:D,dispatch:N}=this.view,{tr:J}=D,he=J.setNodeMarkup(this.getPos(),void 0,{...this.node.attrs,width:this.imageComponentRef.instance.outerWidth}),Oe=he.doc.resolve(this.getPos()),je=new yr(Oe);he.setSelection(je),N(he)},this.applicationRef=E.get(e.Swk),this.imageComponentRef=(0,e.kdu)(Fp,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(a.attrs),this.imageComponentRef.instance.view=l,this.dom=this.imageComponentRef.location.nativeElement,this.view=l,this.node=a,this.getPos=m,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(a,l){return JSON.stringify(a)===JSON.stringify(l)}setNodeAttributes(a){this.imageComponentRef.instance.src=a.src,this.imageComponentRef.instance.alt=a.alt,this.imageComponentRef.instance.title=a.title,this.imageComponentRef.instance.outerWidth=a.width}update(a){return a.type===this.node.type&&(this.node=a,this.computeChanges(this.node.attrs,a.attrs)&&(this.updating=!0,this.setNodeAttributes(a.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}const Md=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,ep=b=>{const a=[];return b.forEach(l=>{if(l.isText){const m=l.text;let E=0;const D=Md.exec(m);if(D){const N=D.index,J=N+D[0].length,{link:he}=l.type.schema.marks;N>0&&a.push(l.cut(E,N));const Oe=m.slice(N,J);a.push(l.cut(N,J).mark(he.create({href:Oe}).addToSet(l.marks))),E=J}E<m.length&&a.push(l.cut(E))}else a.push(l.copy(ep(l.content)))}),ze.fromArray(a)},cd=b=>"string"==typeof b,Mc=b=>window.trustedTypes?.isHTML(b)??!1,Ad=b=>cd(b)||Mc(b),nc={type:"doc",content:[{type:"paragraph"}]},rc=(b,a)=>{if(!b)return a.nodeFromJSON(nc);if(!Ad(b))return a.nodeFromJSON(b);const l=((b,a)=>{const l=a??hc,m=document.createElement("div");return m.innerHTML=b,Yr.fromSchema(l).parse(m).toJSON()})(b,a);return a.nodeFromJSON(l)};let gh=(()=>{class b{constructor(l,m,E){this.renderer=l,this.injector=m,this.elementRef=E,this.placeholder="Type Here...",this.focusOut=new e._w7,this.focusIn=new e._w7,this.unsubscribe=new He.E,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(l){!this.outputFormat&&Ad(l)&&(this.outputFormat="html"),this.editor.setContent(l??nc)}registerOnChange(l){this.onChange=l}registerOnTouched(l){this.onTouched=l}setDisabledState(l){this.setMeta("UPDATE_EDITABLE",!l),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",l)}handleChange(l){if("html"!==this.outputFormat)this.onChange(l);else{const m=((b,a)=>{const l=this.editor.schema??hc,m=l.nodeFromJSON(b),E=et.fromSchema(l).serializeFragment(m.content),D=document.createElement("div");return D.appendChild(E),D.innerHTML})(l);this.onChange(m)}}setMeta(l,m){const{dispatch:E,state:{tr:D}}=this.editor.view;E(D.setMeta(l,m))}setPlaceholder(l){this.setMeta("UPDATE_PLACEHOLDER",l)}registerPlugins(){this.editor.registerPlugin(Jh()),this.editor.registerPlugin(Pp(this.placeholder)),this.editor.registerPlugin(((b={})=>new Ho({key:new mo("attributes"),props:{attributes:b}}))({class:"NgxEditor__Content"})),this.editor.registerPlugin((b=>new Ho({key:new mo("focus"),props:{handleDOMEvents:{focus:()=>(b(),!1)}}}))(()=>{this.focusIn.emit()})),this.editor.registerPlugin((b=>new Ho({key:new mo("blur"),props:{handleDOMEvents:{blur:()=>(b(),!1)}}}))(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin((b=>new Ho({key:new mo("image-resize"),props:{nodeViews:{image:(a,l,m)=>new fh(a,l,m,b)}}}))(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(new Ho({key:new mo("linkify"),props:{transformPasted:b=>new rt(ep(b.content),b.openStart,b.openEnd)}}))}ngOnInit(){if(!this.editor)throw new Ve("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe((0,Be.a)(this.unsubscribe)).subscribe(l=>{this.handleChange(l)})}ngOnChanges(l){l.placeholder&&!l.placeholder.isFirstChange()&&this.setPlaceholder(l.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(e.q87),e.GI1(e.zZn),e.GI1(e.GMv))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-editor"]],viewQuery:function(m,E){if(1&m&&e.CC$(tf,7),2&m){let D;e.wto(D=e.Gqi())&&(E.ngxEditor=D.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[e.M5G([{provide:Mi.Y6,useExisting:(0,e.wd)(()=>b),multi:!0}]),e.SYr],ngContentSelectors:Su,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(m,E){1&m&&(e.kPM(),e.I0R(0,"div",0,1),e._Xx(2),e.C$Y())},styles:['.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\n'],encapsulation:2})}return b})(),$l=(()=>{class b{constructor(){this.customMenuRefChange=new He.E}setCustomMenuRef(l){this.customMenuRefChange.next(l)}static#e=this.\u0275fac=function(m){return new(m||b)};static#t=this.\u0275prov=e.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();class Ac{constructor(a){this.name=a}apply(){return(a,l)=>{const{schema:m}=a,E=m.marks[this.name];return!!E&&vu(E)(a,l)}}toggle(){return(a,l)=>{const{schema:m}=a,E=m.marks[this.name];return!!E&&nd(E)(a,l)}}isActive(a){const{schema:l}=a,m=l.marks[this.name];return!!m&&mu(a,m)}canExecute(a){return this.toggle()(a)}}class jc{constructor(a=!1){this.isBulletList=!1,this.isBulletList=a}getType(a){return this.isBulletList?a.nodes.bullet_list:a.nodes.ordered_list}toggle(){return(a,l)=>{const{schema:m}=a,E=this.getType(m);return!!E&&(this.isActive(a)?Gd(m.nodes.list_item)(a,l):function zu(b,a=null){return function(l,m){let{$from:E,$to:D}=l.selection,N=E.blockRange(D),J=!1,he=N;if(!N)return!1;if(N.depth>=2&&E.node(N.depth-1).type.compatibleContent(b)&&0==N.startIndex){if(0==E.index(N.depth-1))return!1;let je=l.doc.resolve(N.start-2);he=new Wi(je,je,N.depth),N.endIndex<N.parent.childCount&&(N=new Wi(E,l.doc.resolve(D.end(N.depth)),N.depth)),J=!0}let Oe=W(he,b,a,N);return!!Oe&&(m&&m(function du(b,a,l,m,E){let D=ze.empty;for(let je=l.length-1;je>=0;je--)D=ze.from(l[je].type.create(l[je].attrs,D));b.step(new r(a.start-(m?2:0),a.end,a.start,a.end,new rt(D,0,0),l.length,!0));let N=0;for(let je=0;je<l.length;je++)l[je].type==E&&(N=je+1);let J=l.length-N,he=a.start+l.length-(m?2:0),Oe=a.parent;for(let je=a.startIndex,Gt=a.endIndex,ui=!0;je<Gt;je++,ui=!1)!ui&&Re(b.doc,he,J)&&(b.split(he,J),he+=2*J),he+=Oe.child(je).nodeSize;return b}(l.tr,N,Oe,J,b).scrollIntoView()),!0)}}(E)(a,l))}}isActive(a){const{schema:l}=a,m=this.getType(l);return!!m&&gu(a,m)}canExecute(a){return this.toggle()(a)}}class Hl{constructor(a){this.level=a}apply(){return(a,l)=>{const{schema:m}=a,E=m.nodes.heading;return!!E&&Uu(E)(a,l)}}toggle(){return(a,l)=>{const{schema:m,selection:E,doc:D}=a,N=m.nodes.heading;if(!N)return!1;const J=E.$from.before(1),Oe=D.nodeAt(J)?.attrs??{};return this.isActive(a)?Uu(m.nodes.paragraph,Oe)(a,l):Uu(N,{...Oe,level:this.level})(a,l)}}isActive(a){const{schema:l}=a,m=$c(a),E=l.nodes.heading;if(!E)return!1;const D=[E,l.nodes.text,l.nodes.blockquote];return!!m.filter(he=>D.includes(he.type)).find(he=>he.attrs.level===this.level)}canExecute(a){return this.toggle()(a)}}class Uc{constructor(a){this.align=a}toggle(){return(a,l)=>{const{doc:m,selection:E,tr:D,schema:N}=a,{from:J,to:he}=E;let Oe=!1;return m.nodesBetween(J,he,(je,Gt)=>{const ui=je.type;return[N.nodes.paragraph,N.nodes.heading].includes(ui)&&(Oe=!0,D.setNodeMarkup(Gt,ui,{...je.attrs,align:this.align})),!0}),!!Oe&&(D.docChanged&&l?.(D),!0)}}isActive(a){return!!$c(a).find(E=>E.attrs.align===this.align)}canExecute(a){return this.toggle()(a)}}const nf={strict:!0};let Tu=class{update(a){return(l,m)=>{const{schema:E,selection:D}=l,N=E.marks.link;return!(!N||D.empty)&&nd(N,a)(l,m)}}insert(a,l){return(m,E)=>{const{schema:D,tr:N}=m;if(!D.marks.link)return!1;const Oe=D.text(a,[D.marks.link.create({href:l.href,title:l.title??a,target:l.target??"_blank"})]);return N.replaceSelectionWith(Oe,!1).scrollIntoView(),!!N.docChanged&&(E?.(N),!0)}}isActive(a,l=nf){if(l.strict)return!0;const{schema:m}=a,E=m.marks.link;return!!E&&mu(a,E)}remove(a,l){return((b,a)=>{const{doc:l,selection:m,tr:E}=b,{$head:{pos:D},from:N,to:J}=m;if(N===J){const he=l.resolve(D),Oe=D-he.textOffset,je=Oe+he.parent.child(he.index()).nodeSize;E.removeMark(Oe,je)}else E.removeMark(N,J);return!!E.docChanged&&(a?.(E),!0)})(a,l)}canExecute(a){const l={href:""};return this.insert("Exec",l)(a)||this.update(l)(a)}},vh=class{insert(a,l){return(m,E)=>{const{schema:D,tr:N,selection:J}=m,he=D.nodes.image;if(!he)return!1;const Oe={width:null,src:a,...l};!Oe.width&&J instanceof yr&&J.node.type===he&&(Oe.width=J.node.attrs.width),N.replaceSelectionWith(he.createAndFill(Oe));const je=N.doc.resolve(N.selection.anchor-N.selection.$anchor.nodeBefore.nodeSize);return N.setSelection(new yr(je)).scrollIntoView(),!!N.docChanged&&(E?.(N),!0)}}isActive(a){const{selection:l}=a;return l instanceof yr&&"image"===l.node.type.name}},Wc=class{constructor(a,l="color"){this.name=a,this.attrName=l}apply(a){return(l,m)=>{const{schema:E,selection:D,doc:N}=l,J=E.marks[this.name];if(!J)return!1;const{from:he,to:Oe,empty:je}=D;if(!je&&he+1===Oe){const Gt=N.nodeAt(he);if(Gt?.isAtom&&!Gt.isText&&Gt.isLeaf)return!1}return vu(J,a)(l,m)}}isActive(a){const{schema:l}=a,m=l.marks[this.name];return!!m&&mu(a,m)}getActiveColors(a){if(!this.isActive(a))return[];const{schema:l}=a;return(b=>{let a=[];const{selection:l,storedMarks:m}=b,{from:E,to:D,empty:N,$from:J}=l;return N?a=m||J.marks():b.doc.nodesBetween(E,D,he=>{a=[...a,...he.marks]}),a})(a).filter(D=>D.type===l.marks[this.name]).map(D=>D.attrs[this.attrName]).filter(Boolean)}remove(){return(a,l)=>{const{schema:m}=a,E=m.marks[this.name];return!!E&&(b=E,(a,l)=>{const{tr:m,selection:E,storedMarks:D,doc:N}=a,{empty:J,ranges:he}=E;if(J&&E instanceof or){const{$cursor:Oe}=E;if(!Oe||!Ku(a.doc,he,b))return!1;if(b.isInSet(D||Oe.marks()))return m.removeStoredMark(b),l?.(m),!0}else{for(const Oe of he){const{$from:je,$to:Gt}=Oe;N.rangeHasMark(je.pos,Gt.pos,b)&&m.removeMark(je.pos,Gt.pos,b)}if(!m.docChanged)return!1;l?.(m.scrollIntoView())}return!1})(a,l);var b}}canExecute(a){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(a)}};const rp=["link"],rf=new Ac("strong"),Bp=new Ac("em"),sp=new Ac("code"),tu=new Ac("u"),Iu=new Ac("s"),qc=new class np{toggle(){return(a,l)=>{const{schema:m}=a,E=m.nodes.blockquote;return!!E&&(this.isActive(a)?((b,a)=>{let{$from:l,$to:m}=b.selection,E=l.blockRange(m),D=E&&R(E);return null!=D&&(a&&a(b.tr.lift(E,D).scrollIntoView()),!0)})(a,l):function Ep(b,a=null){return function(l,m){let{$from:E,$to:D}=l.selection,N=E.blockRange(D),J=N&&W(N,b,a);return!!J&&(m&&m(l.tr.wrap(N,J).scrollIntoView()),!0)}}(E)(a,l))}}isActive(a){const{schema:l}=a,m=l.nodes.blockquote;return!!m&&gu(a,m)}canExecute(a){return this.toggle()(a)}},op=new class _h{insert(){return(a,l)=>{const{schema:m,tr:E}=a,D=m.nodes.horizontal_rule;return!!D&&(l(E.replaceSelectionWith(D.create()).scrollIntoView()),!0)}}canExecute(a){return((b,a)=>{const{$from:l}=b.selection;for(let m=l.depth;m>=0;m-=1){const E=l.index(m);if(l.node(m).canReplaceWith(E,E,a))return!0}return!1})(a,a.schema.nodes.horizontal_rule)}},Dd=new class jl{insert(){return(a,l)=>{const{tr:m}=a,{ranges:E,empty:D}=m.selection;return D||(Object.entries(a.schema.marks).forEach(([N,J])=>{rp.includes(N)||E.forEach(he=>{m.removeMark(he.$from.pos,he.$to.pos,J)})}),l(m)),!0}}canExecute(){return!0}},Gp=new jc(!0),ap=new jc(!1),Np=new Hl(1),v=new Hl(2),P=new Hl(3),k=new Hl(4),j=new Hl(5),ee=new Hl(6),Me=new Uc("left"),zt=new Uc("center"),qi=new Uc("right"),Rn=new Uc("justify"),ss=new Tu,Ms=new vh,Bo=new Wc("text_color","color"),Wa=new Wc("text_background_color","backgroundColor"),vc={bold:rf,italic:Bp,code:sp,underline:tu,strike:Iu,blockquote:qc,bullet_list:Gp,ordered_list:ap,h1:Np,h2:v,h3:P,h4:k,h5:j,h6:ee,align_left:Me,align_center:zt,align_right:qi,align_justify:Rn},yh={horizontal_rule:op,format_clear:Dd},iu=ss,Ul=Ms,sc=Bo,Ou=Wa,lp={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class sf{constructor(a={}){this.locals=lp,this.get=l=>{const m=this.locals[l];return m?(0,c.X)(m)?m:(0,Z.of)(m):(0,Z.of)("")},this.locals={...lp,...a}}}const Vp={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class Af{static get(a,l="currentColor"){const m=Vp[a];return m&&(m.includes("<path")||m.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${l}\n          height=20\n          width=20\n        >\n          ${m}\n        </svg>\n      `:m}}let $p=(()=>{class b{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(m){return new(m||b)};static#t=this.\u0275prov=e.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),nu=(()=>{class b{constructor(l){this.config=l}get locals(){return new sf(this.config.locals)}getIcon(l){return this.config.icons[l]?this.config.icons[l]:Af.get(l)}static#e=this.\u0275fac=function(m){return new(m||b)(e.CoB($p,8))};static#t=this.\u0275prov=e.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const hf=b=>({locals:b.locals??{},icons:b.icons??{}});let Au=(()=>{class b{constructor(l){this.sanitizer=l}transform(l){return Mc(l)?l:this.sanitizer.bypassSecurityTrustHtml(l)}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(xd.mI,16))};static#t=this.\u0275pipe=e.UTH({name:"sanitizeHtml",type:b,pure:!0})}return b})(),pf=(()=>{class b{get name(){return this.toolbarItem}constructor(l,m){this.ngxeService=l,this.menuService=m,this.isActive=!1,this.disabled=!1,this.update=E=>{const{state:D}=E,N=vc[this.name];this.isActive=N.isActive(D),this.disabled=!N.canExecute(D)}}toggle(l){if(l.preventDefault(),0!==l.button)return;const{state:m,dispatch:E}=this.editorView;vc[this.name].toggle()(m,E)}getTitle(l){return this.ngxeService.locals.get(l)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(nu),e.GI1($l))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:3,vars:10,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.toggle(N)}),e.wVc(1,"sanitizeHtml"),e.wVc(2,"async"),e.C$Y()),2&m&&(e.eAK("NgxEditor__MenuItem--Active",E.isActive)("NgxEditor--Disabled",E.disabled),e.E7m("innerHTML",e.kDX(1,6,E.html),e.E3n)("title",e.kDX(2,8,E.getTitle(E.name))))},dependencies:[Kr.a,Au]})}return b})(),Df=(()=>{class b{get name(){return this.toolbarItem}constructor(l,m){this.ngxeService=l,this.menuService=m,this.disabled=!1,this.update=E=>{const{state:D}=E;this.disabled=!yh[this.name].canExecute(D)}}insert(l){if(l.preventDefault(),0!==l.button)return;const{state:m,dispatch:E}=this.editorView;yh[this.name].insert()(m,E)}getTitle(l){return this.ngxeService.locals.get(l)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(nu),e.GI1($l))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:3,vars:8,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.insert(N)}),e.wVc(1,"sanitizeHtml"),e.wVc(2,"async"),e.C$Y()),2&m&&(e.eAK("NgxEditor--Disabled",E.disabled),e.E7m("innerHTML",e.kDX(1,4,E.html),e.E3n)("title",e.kDX(2,6,E.getTitle(E.name))))},dependencies:[Kr.a,Au]})}return b})(),Ta=(()=>{class b{constructor(l,m,E){this.el=l,this.ngxeService=m,this.menuService=E,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.setText=()=>{const{state:{selection:D,doc:N}}=this.editorView,{empty:J,from:he,to:Oe}=D,je=J?"":N.textBetween(he,Oe);je&&(this.text.patchValue(je),this.text.disable())},this.update=D=>{const{state:N}=D;this.isActive=iu.isActive(N,{strict:!1}),this.canExecute=iu.canExecute(N)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(l){!this.el.nativeElement.contains(l.target)&&this.showPopup&&this.hideForm()}getLabel(l){return this.ngxeService.locals.get(l)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(l){if(0!==l.button)return;const{state:m,dispatch:E}=this.editorView;this.isActive?iu.remove(m,E):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}insertLink(l){l.preventDefault();const{text:m,href:E,openInNewTab:D}=this.form.getRawValue(),{dispatch:N,state:J}=this.editorView,{selection:he}=J,Oe={title:E,href:E,target:D?"_blank":"_self"};he.empty?(iu.insert(m,Oe)(J,N),this.editorView.focus()):iu.update(Oe)(J,N),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new Mi.WC({href:new Mi.Ku("",[Mi.AQ.required,Mi.AQ.pattern(this.menuService.editor.linkValidationPattern)]),text:new Mi.Ku("",[Mi.AQ.required]),openInNewTab:new Mi.Ku(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(e.GMv),e.GI1(nu),e.GI1($l))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-link"]],hostBindings:function(m,E){1&m&&e.qCj("mousedown",function(N){return E.onDocumentClick(N)},!1,e.wLc)},decls:4,vars:11,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.onMouseDown(N)}),e.wVc(1,"sanitizeHtml"),e.wVc(2,"async"),e.C$Y(),e.yuY(3,ad,25,16,"div",1)),2&m&&(e.eAK("NgxEditor__MenuItem--Active",E.isActive||E.showPopup)("NgxEditor--Disabled",!E.canExecute),e.E7m("innerHTML",e.kDX(1,7,E.icon),e.E3n)("title",e.kDX(2,9,E.title)),e.yG2(3),e.E7m("ngIf",E.showPopup))},dependencies:[Kr.u_,Mi.sz,Mi.ot,Mi.SU,Mi.ue,Mi.u,Mi.uW,Mi.Wo,Kr.a,Au]})}return b})(),Dc=(()=>{class b{constructor(l,m,E){this.ngxeService=l,this.menuService=m,this.el=E,this.isDropdownOpen=!1,this.disabledItems=[],this.update=D=>{const{state:N}=D;this.disabledItems=[];const J=[];this.items.forEach(he=>{const Oe=vc[he];Oe.isActive(N)&&J.push(he),Oe.canExecute(N)||this.disabledItems.push(he)}),1===J.length?[this.activeItem]=J:this.activeItem=null}}get isSelected(){return!(!this.activeItem&&!this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(l){!this.el.nativeElement.contains(l)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(l){return this.ngxeService.locals.get(l)}toggleDropdown(l){l.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(l){return l}onClick(l,m){if(l.preventDefault(),0!==l.button)return;const E=vc[m],{state:D,dispatch:N}=this.editorView;E.toggle()(D,N),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(nu),e.GI1($l),e.GI1(e.GMv))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-dropdown"]],hostBindings:function(m,E){1&m&&e.qCj("mousedown",function(N){return E.onDocumentClick(N.target)},!1,e.wLc)},inputs:{group:"group",items:"items"},decls:4,vars:8,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.toggleDropdown(N)}),e.OEk(1),e.wVc(2,"async"),e.C$Y(),e.yuY(3,Hc,2,2,"div",1)),2&m&&(e.eAK("NgxEditor__Dropdown--Selected",E.isSelected)("NgxEditor--Disabled",E.isDropdownDisabled),e.yG2(),e.oRS(" ",e.kDX(2,6,E.getName(E.activeItem||E.group)),"\n"),e.yG2(2),e.E7m("ngIf",E.isDropdownOpen))},dependencies:[Kr.QF,Kr.ay,Kr.u_,Kr.a]})}return b})(),Hp=(()=>{class b{constructor(l,m,E){this.el=l,this.ngxeService=m,this.menuService=E,this.showPopup=!1,this.isActive=!1,this.form=new Mi.WC({src:new Mi.Ku("",[Mi.AQ.required,Mi.AQ.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new Mi.Ku(""),title:new Mi.Ku("")}),this.update=D=>{const{state:N}=D;this.isActive=Ul.isActive(N)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(l){!this.el.nativeElement.contains(l.target)&&this.showPopup&&this.hideForm()}getLabel(l){return this.ngxeService.locals.get(l)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(l){0===l.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){const{state:l}=this.editorView,{selection:m}=l;if(m instanceof yr&&this.isActive){const{src:E,alt:D="",title:N=""}=m.node.attrs;this.form.setValue({src:E,alt:D,title:N})}}insertLink(l){l.preventDefault();const{src:m,alt:E,title:D}=this.form.getRawValue(),{dispatch:N,state:J}=this.editorView;Ul.insert(m,{alt:E,title:D})(J,N),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(e.GMv),e.GI1(nu),e.GI1($l))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-image"]],hostBindings:function(m,E){1&m&&e.qCj("mousedown",function(N){return E.onDocumentClick(N)},!1,e.wLc)},decls:4,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.onMouseDown(N)}),e.wVc(1,"sanitizeHtml"),e.wVc(2,"async"),e.C$Y(),e.yuY(3,oh,24,15,"div",1)),2&m&&(e.eAK("NgxEditor__MenuItem--Active",E.isActive||E.showPopup),e.E7m("innerHTML",e.kDX(1,5,E.icon),e.E3n)("title",e.kDX(2,7,E.getLabel("insertImage"))),e.yG2(3),e.E7m("ngIf",E.showPopup))},dependencies:[Kr.u_,Mi.sz,Mi.ot,Mi.ue,Mi.u,Mi.uW,Mi.Wo,Kr.a,Au]})}return b})(),up=(()=>{class b{constructor(l,m,E){this.el=l,this.menuService=m,this.ngxeService=E,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=D=>{const{state:N}=D;this.canExecute=this.command.canExecute(N),this.isActive=this.command.isActive(N),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(N))}}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?sc:Ou}getContrastYIQ(l){const m=l.replace("#","");return(299*parseInt(m.substring(0,2),16)+587*parseInt(m.substring(2,4),16)+114*parseInt(m.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(l){!this.el.nativeElement.contains(l.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(l){l.preventDefault(),0===l.button&&(this.showPopup=!this.showPopup)}remove(l){l.preventDefault();const{state:m,dispatch:E}=this.editorView;this.command.remove()(m,E),this.hidePopup()}trackByIndex(l){return l}onColorSelect(l,m){if(l.preventDefault(),0!==l.button)return;const{state:E,dispatch:D}=this.editorView;"text_color"===this.type?this.command.apply({color:m})(E,D):this.command.apply({backgroundColor:m})(E,D),this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(l){return this.ngxeService.locals.get(l)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(l=>{this.update(l)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1(e.GMv),e.GI1($l),e.GI1(nu))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-color-picker"]],hostBindings:function(m,E){1&m&&e.qCj("mousedown",function(N){return E.onDocumentClick(N)},!1,e.wLc)},inputs:{presets:"presets",type:"type"},decls:4,vars:11,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.qCj("mousedown",function(N){return E.togglePopup(N)}),e.wVc(1,"sanitizeHtml"),e.wVc(2,"async"),e.C$Y(),e.yuY(3,Wh,5,6,"div",1)),2&m&&(e.eAK("NgxEditor__MenuItem--Active",E.isActive||E.showPopup)("NgxEditor--Disabled",!E.canExecute),e.E7m("innerHTML",e.kDX(1,7,E.icon),e.E3n)("title",e.kDX(2,9,E.title)),e.yG2(3),e.E7m("ngIf",E.showPopup))},dependencies:[Kr.QF,Kr.ay,Kr.u_,Kr.Qt,Kr.a,Au],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']})}return b})();const be=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],h=[["bold","italic"],["code","blockquote"],["underline","strike"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"],["horizontal_rule"]],$=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];let y=(()=>{class b{constructor(l){this.menuService=l,this.toolbar=be,this.colorPresets=$,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule","format_clear"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){const m=[];return this.colorPresets.forEach((E,D)=>{const N=Math.floor(D/8);m[N]||m.push([]),m[N].push(E)}),m}trackByIndex(l){return l}isDropDown(l){return!!l?.heading}getDropdownItems(l){return l}ngOnInit(){if(!this.editor)throw new Ve("Required editor instance to initialize menu component");this.menuService.editor=this.editor}static#e=this.\u0275fac=function(m){return new(m||b)(e.GI1($l))};static#t=this.\u0275cmp=e.In1({type:b,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[e.M5G([$l])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(m,E){1&m&&(e.I0R(0,"div",0),e.yuY(1,hh,2,2,"ng-container",1)(2,Dp,2,1,"ng-container",2),e.C$Y()),2&m&&(e.E7m("ngClass",e.IBC(4,Kh,E.disabled,"top"===E.dropdownPlacement)),e.yG2(),e.E7m("ngForOf",E.toolbar)("ngForTrackBy",E.trackByIndex),e.yG2(),e.E7m("ngIf",E.customMenuRef))},dependencies:[Kr.QF,Kr.ay,Kr.u_,Kr.XV,pf,Df,Ta,Dc,Hp,up,Kr.uq]})}return b})(),ai=(()=>{class b{static#e=this.\u0275fac=function(m){return new(m||b)};static#t=this.\u0275mod=e.a4G({type:b});static#i=this.\u0275inj=e.s3X({providers:[Au],imports:[Kr.MD,Mi.sl]})}return b})();const fs=new e.UbH("NgxEditorConfig"),Wr={locals:lp,icons:Vp};let yc=(()=>{class b{static forRoot(l=Wr){return{ngModule:b,providers:[{provide:fs,useValue:l},{provide:$p,useFactory:hf,deps:[fs]}]}}static forChild(l=Wr){return{ngModule:b,providers:[{provide:fs,useValue:l},{provide:$p,useFactory:hf,deps:[fs]},nu]}}static#e=this.\u0275fac=function(m){return new(m||b)};static#t=this.\u0275mod=e.a4G({type:b});static#i=this.\u0275inj=e.s3X({imports:[Kr.MD,ai]})}return b})();const ro=(b,a=!1)=>(l,m)=>{const E=new Ac(b);return a?E.toggle()(l,m):E.apply()(l,m)};class Rc{constructor(a){if(this.applyTrx=l=>{this.state=this.state.apply(l??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=l=>{this.applyTrx(l)},!a)throw new Ve("Required view to initialize commands.");this.view=a,this.state=a.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const a=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const l=this.tr.setMeta("FORCE_EMIT",a);return this.view.dispatch(l),!0}focus(a="end"){const l="start"===a?nr.atStart(this.state.doc):nr.atEnd(this.state.doc);return this.tr.setSelection(l),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(a){return this.tr.insertText(a),this.applyTrx(),this}insertNewLine(){return yd(fc,$u,da,al)(this.state,this.dispatch),this}applyMark(a){return ro(a,!1)(this.state,this.dispatch),this}toggleMark(a){return ro(a,!0)(this.state,this.dispatch),this}bold(){return ro("strong")(this.state,this.dispatch),this}toggleBold(){return ro("strong",!0)(this.state,this.dispatch),this}italics(){return ro("em")(this.state,this.dispatch),this}toggleItalics(){return ro("em",!0)(this.state,this.dispatch),this}underline(){return ro("u")(this.state,this.dispatch),this}toggleUnderline(){return ro("u",!0)(this.state,this.dispatch),this}strike(){return ro("s")(this.state,this.dispatch),this}toggleStrike(){return ro("s",!0)(this.state,this.dispatch),this}code(){return ro("code")(this.state,this.dispatch),this}toggleCode(){return ro("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new jc(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new jc(!0).toggle()(this.state,this.dispatch),this}toggleHeading(a){return new Hl(a).toggle()(this.state,this.dispatch),this}insertLink(a,l){return(new Tu).insert(a,l)(this.state,this.dispatch),this}updateLink(a){return(new Tu).update(a)(this.state,this.dispatch),this}insertImage(a,l={}){return(new vh).insert(a,l)(this.state,this.dispatch),this}textColor(a){return new Wc("text_color").apply({color:a})(this.state,this.dispatch),this}backgroundColor(a){return new Wc("text_background_color").apply({backgroundColor:a})(this.state,this.dispatch),this}removeTextColor(){return new Wc("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new Wc("text_background_color").remove()(this.state,this.dispatch),this}align(a){return new Uc(a).toggle()(this.state,this.dispatch),this}insertHTML(a){const{selection:l,schema:m,tr:E}=this.state,{from:D,to:N}=l,J=document.createElement("div");J.innerHTML=cd(a)?a.trim():a;const he=Yr.fromSchema(m).parseSlice(J),Oe=E.replaceRange(D,N,he);return this.applyTrx(Oe),this}}const wh=typeof navigator<"u"&&/Mac/.test(navigator.platform),ff=b=>{const a=Nl.concat(mc,Yh);return a.push((b=>Ju(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,b))(b.marks.strong)),a.push((b=>Ju(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,b))(b.marks.em)),a.push((b=>Zu(/^\s*>\s$/,b))(b.nodes.blockquote)),a.push((b=>Zu(/^(?:\d+)\.\s$/,b,a=>({order:Number(a[1])}),(a,l)=>l.childCount+l.attrs.order===Number(a[1])))(b.nodes.ordered_list)),a.push((b=>Zu(/^\s*(?:[-+*])\s$/,b))(b.nodes.bullet_list)),a.push((b=>Ud(/^```$/,b))(b.nodes.code_block)),a.push(((b,a)=>Ud(new RegExp("^(#{1,6})\\s$"),b,l=>({level:l[1].length})))(b.nodes.heading)),function fu({rules:b}){let a=new Ho({state:{init:()=>null,apply(l,m){return l.getMeta(this)||(l.selectionSet||l.docChanged?null:m)}},props:{handleTextInput:(l,m,E,D)=>Sa(l,m,E,D,b,a),handleDOMEvents:{compositionend:l=>{setTimeout(()=>{let{$cursor:m}=l.state.selection;m&&Sa(l,m.pos,m.pos,"",b,a)})}}},isInputRules:!0});return a}({rules:a})},Uf=(b,a)=>{const l=[];return a.keyboardShortcuts&&l.push(...((b,a)=>{const l={};l["Mod-z"]=Ed,wh?l["Shift-Mod-z"]=Sd:l["Mod-y"]=Sd;const m=[bu({"Mod-b":nd(b.marks.strong),"Mod-i":nd(b.marks.em),"Mod-u":nd(b.marks.u),"Mod-`":nd(b.marks.code)}),bu({Enter:Sc(b.nodes.list_item),"Shift-Enter":yd(vd,(E,D)=>{const{tr:N}=E;return D(N.replaceSelectionWith(b.nodes.hard_break.create()).scrollIntoView()),!0}),"Mod-[":Gd(b.nodes.list_item),"Mod-]":Th(b.nodes.list_item),Tab:Th(b.nodes.list_item)}),bu(zh)];return a.history&&m.push(bu(l)),m})(b,{history:a.history})),a.history&&l.push(function Kd(b={}){return new Ho({key:ka,state:{init:()=>new Ic(Io.empty,Io.empty,null,0,-1),apply:(a,l,m)=>function Vh(b,a,l,m){let D,E=l.getMeta(ka);if(E)return E.historyState;l.getMeta(Ua)&&(b=new Ic(b.done,b.undone,null,0,-1));let N=l.getMeta("appendedTransaction");if(0==l.steps.length)return b;if(N&&N.getMeta(ka))return N.getMeta(ka).redo?new Ic(b.done.addTransform(l,void 0,m,Zd(a)),b.undone,xu(l.mapping.maps[l.steps.length-1]),b.prevTime,b.prevComposition):new Ic(b.done,b.undone.addTransform(l,void 0,m,Zd(a)),null,b.prevTime,b.prevComposition);if(!1===l.getMeta("addToHistory")||N&&!1===N.getMeta("addToHistory"))return(D=l.getMeta("rebased"))?new Ic(b.done.rebased(l,D),b.undone.rebased(l,D),wu(b.prevRanges,l.mapping),b.prevTime,b.prevComposition):new Ic(b.done.addMaps(l.mapping.maps),b.undone.addMaps(l.mapping.maps),wu(b.prevRanges,l.mapping),b.prevTime,b.prevComposition);{let J=l.getMeta("composition"),he=0==b.prevTime||!N&&b.prevComposition!=J&&(b.prevTime<(l.time||0)-m.newGroupDelay||!function Cd(b,a){if(!a)return!1;if(!b.docChanged)return!0;let l=!1;return b.mapping.maps[0].forEach((m,E)=>{for(let D=0;D<a.length;D+=2)m<=a[D+1]&&E>=a[D]&&(l=!0)}),l}(l,b.prevRanges)),Oe=N?wu(b.prevRanges,l.mapping):xu(l.mapping.maps[l.steps.length-1]);return new Ic(b.done.addTransform(l,he?a.selection.getBookmark():void 0,m,Zd(a)),Io.empty,Oe,l.time,J??b.prevComposition)}}(l,m,a,b)},config:b={depth:b.depth||100,newGroupDelay:b.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(a,l){let m=l.inputType,E="historyUndo"==m?Ed:"historyRedo"==m?Sd:null;return!!E&&(l.preventDefault(),E(a.state,a.dispatch))}}}})}()),a.inputRules&&l.push(ff(b)),l},jp={linkOnPaste:!0,resizeImage:!0},mf={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:hc,plugins:[],nodeViews:{},attributes:{},features:jp,handleScrollToSelection:null,linkValidationPattern:"(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)|(mailto:.*[@].*)"};class hm{constructor(a=mf){this.valueChangesSubject=new He.E,this.updateSubject=new He.E,this.options={...mf,...a},this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||hc}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new Rc(this.view)}get features(){return{...jp,...this.options.features}}handleTransactions(a){const l=this.view.state.apply(a);if(this.view.updateState(l),this.updateSubject.next(this.view),!a.docChanged&&!a.getMeta("FORCE_EMIT"))return;const m=l.doc.toJSON();this.valueChangesSubject.next(m)}createEditor(){const{options:a,schema:l}=this,{content:m=null,nodeViews:E}=a,{history:D=!0,keyboardShortcuts:N=!0,inputRules:J=!0}=a,he=rc(m,l),Oe=a.plugins??[],je=a.attributes??{},Gt=Uf(l,{history:D,keyboardShortcuts:N,inputRules:J});this.view=new Ht(null,{state:$o.create({doc:he,schema:l,plugins:[...Gt,...Oe]}),nodeViews:E,dispatchTransaction:this.handleTransactions.bind(this),attributes:je,handleScrollToSelection:a.handleScrollToSelection})}setContent(a){if(typeof(b=a)>"u"||null===b)return;var b;const{state:l}=this.view,{tr:m,doc:E}=l,D=rc(a,this.schema);m.replaceWith(0,l.doc.content.size,D),!E.eq(m.doc)&&m.docChanged&&this.view.dispatch(m)}registerPlugin(a){const{state:l}=this.view,m=[...l.plugins,a],E=l.reconfigure({plugins:m});this.view.updateState(E)}destroy(){this.view.destroy()}}},1876:(ms,lr,Et)=>{"use strict";Et.d(lr,{or:()=>Be});var e=Et(1368),Mi=Et(4496);let Be=(()=>{class we{static \u0275fac=function(Te){return new(Te||we)};static \u0275mod=Mi.a4G({type:we});static \u0275inj=Mi.s3X({imports:[e.MD]})}return we})()},8088:(ms,lr,Et)=>{"use strict";Et.d(lr,{GG:()=>Zt});var e=Et(4496),Mi=Et(1368),He=Et(6504),c=Et(5657),Z=Et(112),Be=Et(5448),we=Et(7773),Se=Et(560),Te=Et(3120);function Ve(Pt,Nt=Z.M,ae){const Ne=(0,Te.k)(Pt,Nt);return function Le(Pt,Nt){return(0,Be.i)((ae,Ne)=>{const{leading:et=!0,trailing:Vt=!1}=Nt??{};let $t=!1,Hi=null,wt=null,At=!1;const st=()=>{wt?.unsubscribe(),wt=null,Vt&&(nt(),At&&Ne.complete())},ot=()=>{wt=null,At&&Ne.complete()},qe=It=>wt=(0,Se.Uv)(Pt(It)).subscribe((0,we.e)(Ne,st,ot)),nt=()=>{if($t){$t=!1;const It=Hi;Hi=null,Ne.next(It),!At&&qe(It)}};ae.subscribe((0,we.e)(Ne,It=>{$t=!0,Hi=It,(!wt||wt.closed)&&(et?nt():qe(It))},()=>{At=!0,(!(Vt&&$t&&wt)||wt.closed)&&Ne.complete()}))})}(()=>Ne,ae)}var We=Et(9212),ut=Et(4e3),vt=Et(6684),tt=typeof window<"u"?window:{screen:{},navigator:{}},ze=(tt.matchMedia||function(){return{matches:!1}}).bind(tt),ct=!1,Je=function(){};tt.addEventListener&&tt.addEventListener("p",Je,{get passive(){return ct=!0}}),tt.removeEventListener&&tt.removeEventListener("p",Je,!1);var Jt=ct,rt="ontouchstart"in tt,St=(rt||"TouchEvent"in tt&&ze("(any-pointer: coarse)"),tt.navigator.userAgent||"");ze("(pointer: coarse)").matches&&/iPad|Macintosh/.test(St)&&Math.min(tt.screen.width||0,tt.screen.height||0);function ki(Pt,Nt){}function Zi(Pt,Nt){1&Pt&&e.yuY(0,ki,0,0,"ng-template")}(ze("(pointer: coarse)").matches||!ze("(pointer: fine)").matches&&rt)&&/Windows.*Firefox/.test(St),ze("(any-pointer: fine)").matches||ze("(any-hover: hover)");const pn=(Pt,Nt,ae)=>({tooltip:Pt,placement:Nt,content:ae});function ji(Pt,Nt){if(1&Pt&&(e.SAx(0),e.yuY(1,Zi,1,0,null,1),e.k70()),2&Pt){const ae=e.GaO();e.yG2(),e.E7m("ngTemplateOutlet",ae.template)("ngTemplateOutletContext",e.uAc(2,pn,ae.tooltip,ae.placement,ae.content))}}function gn(Pt,Nt){if(1&Pt&&(e.SAx(0),e.I0R(1,"div",2),e.OEk(2),e.C$Y(),e.k70()),2&Pt){const ae=e.GaO();e.yG2(),e.e48("title",ae.tooltip)("data-tooltip-placement",ae.placement),e.yG2(),e.oRS(" ",ae.content," ")}}const tn=["tooltipTemplate"],di=["leftOuterSelectionBar"],Wi=["rightOuterSelectionBar"],_n=["fullBar"],Ln=["selectionBar"],Gn=["minHandle"],Yn=["maxHandle"],on=["floorLabel"],jt=["ceilLabel"],gi=["minHandleLabel"],V=["maxHandleLabel"],Bi=["combinedLabel"],$i=["ticksElement"];function en(Pt,Nt){if(1&Pt&&e.wR5(0,"ngx-slider-tooltip-wrapper",32),2&Pt){const ae=e.GaO().$implicit,Ne=e.GaO();e.E7m("template",Ne.tooltipTemplate)("tooltip",ae.valueTooltip)("placement",ae.valueTooltipPlacement)("content",ae.value)}}function Xi(Pt,Nt){if(1&Pt&&e.wR5(0,"span",33),2&Pt){const ae=e.GaO().$implicit;e.E7m("innerText",ae.legend)}}function Qi(Pt,Nt){if(1&Pt&&e.wR5(0,"span",34),2&Pt){const ae=e.GaO().$implicit;e.E7m("innerHTML",ae.legend,e.E3n)}}const Pn=Pt=>({"ngx-slider-selected":Pt});function fn(Pt,Nt){if(1&Pt&&(e.I0R(0,"span",27),e.wR5(1,"ngx-slider-tooltip-wrapper",28),e.yuY(2,en,1,4,"ngx-slider-tooltip-wrapper",29)(3,Xi,1,1,"span",30)(4,Qi,1,1,"span",31),e.C$Y()),2&Pt){const ae=Nt.$implicit,Ne=e.GaO();e.E7m("ngClass",e.S45(8,Pn,ae.selected))("ngStyle",ae.style),e.yG2(),e.E7m("template",Ne.tooltipTemplate)("tooltip",ae.tooltip)("placement",ae.tooltipPlacement),e.yG2(),e.E7m("ngIf",null!=ae.value),e.yG2(),e.E7m("ngIf",null!=ae.legend&&!1===Ne.allowUnsafeHtmlInSlider),e.yG2(),e.E7m("ngIf",null!=ae.legend&&(null==Ne.allowUnsafeHtmlInSlider||Ne.allowUnsafeHtmlInSlider))}}var Ci=function(Pt){return Pt[Pt.Low=0]="Low",Pt[Pt.High=1]="High",Pt[Pt.Floor=2]="Floor",Pt[Pt.Ceil=3]="Ceil",Pt[Pt.TickValue=4]="TickValue",Pt}(Ci||{});class En{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const Dn=new e.UbH("AllowUnsafeHtmlInSlider");var cn=function(Pt){return Pt[Pt.Min=0]="Min",Pt[Pt.Max=1]="Max",Pt}(cn||{});class br{value;highValue;pointerType}class wi{static isNullOrUndefined(Nt){return null==Nt}static areArraysEqual(Nt,ae){if(Nt.length!==ae.length)return!1;for(let Ne=0;Ne<Nt.length;++Ne)if(Nt[Ne]!==ae[Ne])return!1;return!0}static linearValueToPosition(Nt,ae,Ne){return(Nt-ae)/(Ne-ae)}static logValueToPosition(Nt,ae,Ne){return((Nt=Math.log(Nt))-(ae=Math.log(ae)))/((Ne=Math.log(Ne))-ae)}static linearPositionToValue(Nt,ae,Ne){return Nt*(Ne-ae)+ae}static logPositionToValue(Nt,ae,Ne){return ae=Math.log(ae),Ne=Math.log(Ne),Math.exp(Nt*(Ne-ae)+ae)}static findStepIndex(Nt,ae){const Ne=ae.map(Vt=>Math.abs(Nt-Vt.value));let et=0;for(let Vt=0;Vt<ae.length;Vt++)Ne[Vt]!==Ne[et]&&Ne[Vt]<Ne[et]&&(et=Vt);return et}}class Jn{static isTouchEvent(Nt){return void 0!==window.TouchEvent?Nt instanceof TouchEvent:void 0!==Nt.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class zn{static roundToPrecisionLimit(Nt,ae){return+Nt.toPrecision(ae)}static isModuloWithinPrecisionLimit(Nt,ae,Ne){const et=Math.pow(10,-Ne);return Math.abs(Nt%ae)<=et||Math.abs(Math.abs(Nt%ae)-ae)<=et}static clampToRange(Nt,ae,Ne){return Math.min(Math.max(Nt,ae),Ne)}}class On{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class sr{renderer;constructor(Nt){this.renderer=Nt}attachPassiveEventListener(Nt,ae,Ne,et){if(!0!==Jt)return this.attachEventListener(Nt,ae,Ne,et);const Vt=new On;Vt.eventName=ae,Vt.events=new c.E;const $t=Hi=>{Vt.events.next(Hi)};return Nt.addEventListener(ae,$t,{passive:!0,capture:!1}),Vt.teardownCallback=()=>{Nt.removeEventListener(ae,$t,{passive:!0,capture:!1})},Vt.eventsSubscription=Vt.events.pipe(wi.isNullOrUndefined(et)?(0,We.y)(()=>{}):Ve(et,void 0,{leading:!0,trailing:!0})).subscribe(Hi=>{Ne(Hi)}),Vt}detachEventListener(Nt){wi.isNullOrUndefined(Nt.eventsSubscription)||(Nt.eventsSubscription.unsubscribe(),Nt.eventsSubscription=null),wi.isNullOrUndefined(Nt.events)||(Nt.events.complete(),Nt.events=null),wi.isNullOrUndefined(Nt.teardownCallback)||(Nt.teardownCallback(),Nt.teardownCallback=null)}attachEventListener(Nt,ae,Ne,et){const Vt=new On;return Vt.eventName=ae,Vt.events=new c.E,Vt.teardownCallback=this.renderer.listen(Nt,ae,Hi=>{Vt.events.next(Hi)}),Vt.eventsSubscription=Vt.events.pipe(wi.isNullOrUndefined(et)?(0,We.y)(()=>{}):Ve(et,void 0,{leading:!0,trailing:!0})).subscribe(Hi=>{Ne(Hi)}),Vt}}let fr=(()=>{class Pt{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(ae,Ne,et){this.elemRef=ae,this.renderer=Ne,this.changeDetectionRef=et,this.eventListenerHelper=new sr(this.renderer)}setAlwaysHide(ae){this._alwaysHide=ae,this.visibility=ae?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(ae){this._vertical=ae,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(ae){this._scale=ae}setRotate(ae){this._rotate=ae,this.transform="rotate("+ae+"deg)"}getRotate(){return this._rotate}setPosition(ae){this._position!==ae&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=ae,this._vertical?this.bottom=Math.round(ae)+"px":this.left=Math.round(ae)+"px"}calculateDimension(){const ae=this.getBoundingClientRect();this._dimension=this.vertical?(ae.bottom-ae.top)*this.scale:(ae.right-ae.left)*this.scale}setDimension(ae){this._dimension!==ae&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=ae,this._vertical?this.height=Math.round(ae)+"px":this.width=Math.round(ae)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(ae,Ne,et){const Vt=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,ae,Ne,et);this.eventListeners.push(Vt)}onPassive(ae,Ne,et){const Vt=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,ae,Ne,et);this.eventListeners.push(Vt)}off(ae){let Ne,et;wi.isNullOrUndefined(ae)?(Ne=[],et=this.eventListeners):(Ne=this.eventListeners.filter(Vt=>Vt.eventName!==ae),et=this.eventListeners.filter(Vt=>Vt.eventName===ae));for(const Vt of et)this.eventListenerHelper.detachEventListener(Vt);this.eventListeners=Ne}isRefDestroyed(){return wi.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(Ne){return new(Ne||Pt)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9))};static \u0275dir=e.Sc5({type:Pt,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(Ne,et){2&Ne&&e.m4B("opacity",et.opacity)("visibility",et.visibility)("left",et.left)("bottom",et.bottom)("height",et.height)("width",et.width)("transform",et.transform)}})}return Pt})(),Yr=(()=>{class Pt extends fr{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(ae,Ne,et){super(ae,Ne,et)}static \u0275fac=function(Ne){return new(Ne||Pt)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9))};static \u0275dir=e.Sc5({type:Pt,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(Ne,et){2&Ne&&(e.e48("role",et.role)("tabindex",et.tabindex)("aria-orientation",et.ariaOrientation)("aria-label",et.ariaLabel)("aria-labelledby",et.ariaLabelledBy)("aria-valuenow",et.ariaValueNow)("aria-valuetext",et.ariaValueText)("aria-valuemin",et.ariaValueMin)("aria-valuemax",et.ariaValueMax),e.eAK("ngx-slider-active",et.active))},features:[e.eg9]})}return Pt})(),Nn=(()=>{class Pt extends fr{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(ae,Ne,et,Vt){super(ae,Ne,et),this.allowUnsafeHtmlInSlider=Vt}setValue(ae){let Ne=!1;!this.alwaysHide&&(wi.isNullOrUndefined(this.value)||this.value.length!==ae.length||this.value.length>0&&0===this.dimension)&&(Ne=!0),this._value=ae,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=ae:this.elemRef.nativeElement.innerHTML=ae,Ne&&this.calculateDimension()}static \u0275fac=function(Ne){return new(Ne||Pt)(e.GI1(e.GMv),e.GI1(e.q87),e.GI1(e.kD9),e.GI1(Dn,8))};static \u0275dir=e.Sc5({type:Pt,selectors:[["","ngxSliderLabel",""]],features:[e.eg9]})}return Pt})(),_r=(()=>{class Pt{template;tooltip;placement;content;static \u0275fac=function(Ne){return new(Ne||Pt)};static \u0275cmp=e.In1({type:Pt,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(Ne,et){1&Ne&&e.yuY(0,ji,2,6,"ng-container",0)(1,gn,3,3,"ng-container",0),2&Ne&&(e.E7m("ngIf",et.template),e.yG2(),e.E7m("ngIf",!et.template))},dependencies:[Mi.u_,Mi.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return Pt})();class ur{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class mr{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class kr{value;highValue;static compare(Nt,ae){return!(wi.isNullOrUndefined(Nt)&&wi.isNullOrUndefined(ae)||wi.isNullOrUndefined(Nt)!==wi.isNullOrUndefined(ae))&&Nt.value===ae.value&&Nt.highValue===ae.highValue}}class Ft extends kr{forceChange;static compare(Nt,ae){return!(wi.isNullOrUndefined(Nt)&&wi.isNullOrUndefined(ae)||wi.isNullOrUndefined(Nt)!==wi.isNullOrUndefined(ae))&&Nt.value===ae.value&&Nt.highValue===ae.highValue&&Nt.forceChange===ae.forceChange}}const Mt={provide:He.Y6,useExisting:(0,e.wd)(()=>Tt),multi:!0};let Tt=(()=>{class Pt{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new e._w7;highValue=null;highValueChange=new e._w7;options=new En;userChangeStart=new e._w7;userChange=new e._w7;userChangeEnd=new e._w7;manualRefreshSubscription;set manualRefresh(ae){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=ae.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(ae){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=ae.subscribe(Ne=>{this.focusPointer(Ne)})}get range(){return!wi.isNullOrUndefined(this.value)&&!wi.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new c.E;inputModelChangeSubscription=null;outputModelChangeSubject=new c.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new En;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new mr;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(ae,Ne,et,Vt,$t){this.renderer=ae,this.elementRef=Ne,this.changeDetectionRef=et,this.zone=Vt,this.allowUnsafeHtmlInSlider=$t,this.eventListenerHelper=new sr(this.renderer)}ngOnInit(){this.viewOptions=new En,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(ae){!wi.isNullOrUndefined(ae.options)&&JSON.stringify(ae.options.previousValue)!==JSON.stringify(ae.options.currentValue)&&this.onChangeOptions(),(!wi.isNullOrUndefined(ae.value)||!wi.isNullOrUndefined(ae.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(ae){ae instanceof Array?(this.value=ae[0],this.highValue=ae[1]):this.value=ae,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(ae){this.onChangeCallback=ae}registerOnTouched(ae){this.onTouchedCallback=ae}setDisabledState(ae){this.viewOptions.disabled=ae,this.updateDisabledState()}setAriaLabel(ae){this.viewOptions.ariaLabel=ae,this.updateAriaLabel()}onResize(ae){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,ut.a)(Ft.compare),(0,vt.I)(ae=>!ae.forceChange&&!ae.internalChange)).subscribe(ae=>this.applyInputModelChange(ae))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,ut.a)(Ft.compare)).subscribe(ae=>this.publishOutputModelChange(ae))}subscribeResizeObserver(){Jn.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){Jn.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){wi.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){wi.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){wi.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){wi.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){wi.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){wi.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(ae){return ae===cn.Min?this.minHandleElement:ae===cn.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===cn.Min?this.viewLowValue:this.currentTrackingPointer===cn.Max?this.viewHighValue:null}modelValueToViewValue(ae){return wi.isNullOrUndefined(ae)?NaN:wi.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+ae:wi.findStepIndex(+ae,this.viewOptions.stepsArray)}viewValueToModelValue(ae){return wi.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?ae:this.getStepValue(ae)}getStepValue(ae){const Ne=this.viewOptions.stepsArray[ae];return wi.isNullOrUndefined(Ne)?NaN:Ne.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(ae){const Ne=this.normaliseModelValues(ae),et=!kr.compare(ae,Ne);et&&(this.value=Ne.value,this.highValue=Ne.highValue),this.viewLowValue=this.modelValueToViewValue(Ne.value),this.viewHighValue=this.range?this.modelValueToViewValue(Ne.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:Ne.value,highValue:Ne.highValue,forceChange:et,userEventInitiated:!1})}publishOutputModelChange(ae){const Ne=()=>{this.valueChange.emit(ae.value),this.range&&this.highValueChange.emit(ae.highValue),wi.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[ae.value,ae.highValue]:ae.value),wi.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[ae.value,ae.highValue]:ae.value)};ae.userEventInitiated?(Ne(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{Ne()})}normaliseModelValues(ae){const Ne=new kr;if(Ne.value=ae.value,Ne.highValue=ae.highValue,!wi.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const et=wi.findStepIndex(Ne.value,this.viewOptions.stepsArray);if(Ne.value=this.viewOptions.stepsArray[et].value,this.range){const Vt=wi.findStepIndex(Ne.highValue,this.viewOptions.stepsArray);Ne.highValue=this.viewOptions.stepsArray[Vt].value}}return Ne}if(this.viewOptions.enforceStep&&(Ne.value=this.roundStep(Ne.value),this.range&&(Ne.highValue=this.roundStep(Ne.highValue))),this.viewOptions.enforceRange&&(Ne.value=zn.clampToRange(Ne.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(Ne.highValue=zn.clampToRange(Ne.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&ae.value>ae.highValue))if(this.viewOptions.noSwitching)Ne.value=Ne.highValue;else{const et=ae.value;Ne.value=ae.highValue,Ne.highValue=et}return Ne}renormaliseModelValues(){const ae={value:this.value,highValue:this.highValue},Ne=this.normaliseModelValues(ae);kr.compare(Ne,ae)||(this.value=Ne.value,this.highValue=Ne.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const ae=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const Ne=this.getOptionsInfluencingEventBindings(this.viewOptions),et=!wi.areArraysEqual(ae,Ne);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(et)}applyOptions(){if(this.viewOptions=new En,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!wi.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!wi.isNullOrUndefined(this.viewOptions.tickStep)||!wi.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!wi.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),wi.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),wi.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(ae,Ne)=>ae+" - "+Ne),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,wi.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=ae=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(ae):ae))}applyFloorCeilOptions(){if(wi.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),wi.isNullOrUndefined(this.viewOptions.ceil)||wi.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,wi.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=ae=>String(ae))}resetSlider(ae=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),ae&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(ae){ae!==cn.Min&&ae!==cn.Max&&(ae=cn.Min),ae===cn.Min?this.minHandleElement.focus():this.range&&ae===cn.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){wi.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const ae=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(ae||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(ae||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(ae||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const ae of this.getAllSliderElements())wi.isNullOrUndefined(ae)||ae.setVertical(this.viewOptions.vertical)}updateScale(){for(const ae of this.getAllSliderElements())ae.setScale(this.viewOptions.scale)}updateRotate(){for(const ae of this.getAllSliderElements())ae.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",wi.isNullOrUndefined(this.viewOptions.ariaLabel)?wi.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",wi.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?wi.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Ci.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Ci.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){wi.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const ae=this.minHandleElement.dimension;this.handleHalfDimension=ae/2,wi.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-ae,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const ae=wi.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,Ne=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&ae.reverse();const et=wi.isNullOrUndefined(this.viewOptions.tickValueStep)?wi.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let Vt=!1;const $t=ae.map(Hi=>{let wt=this.valueToPosition(Hi);this.viewOptions.vertical&&(wt=this.maxHandlePosition-wt);const At=Ne+"("+Math.round(wt)+"px)",st=new ur;st.selected=this.isTickSelected(Hi),st.style={"-webkit-transform":At,"-moz-transform":At,"-o-transform":At,"-ms-transform":At,transform:At},st.selected&&!wi.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(st.style["background-color"]=this.getSelectionBarColor()),!st.selected&&!wi.isNullOrUndefined(this.viewOptions.getTickColor)&&(st.style["background-color"]=this.getTickColor(Hi)),wi.isNullOrUndefined(this.viewOptions.ticksTooltip)||(st.tooltip=this.viewOptions.ticksTooltip(Hi),st.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!wi.isNullOrUndefined(et)&&zn.isModuloWithinPrecisionLimit(Hi,et,this.viewOptions.precisionLimit)&&(st.value=this.getDisplayValue(Hi,Ci.TickValue),wi.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(st.valueTooltip=this.viewOptions.ticksValuesTooltip(Hi),st.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let ot=null;if(wi.isNullOrUndefined(this.viewOptions.stepsArray))wi.isNullOrUndefined(this.viewOptions.getLegend)||(ot=this.viewOptions.getLegend(Hi));else{const qe=this.viewOptions.stepsArray[Hi];wi.isNullOrUndefined(this.viewOptions.getStepLegend)?wi.isNullOrUndefined(qe)||(ot=qe.legend):ot=this.viewOptions.getStepLegend(qe)}return wi.isNullOrUndefined(ot)||(st.legend=ot,Vt=!0),st});if(this.sliderElementWithLegendClass!==Vt&&setTimeout(()=>{this.sliderElementWithLegendClass=Vt}),wi.isNullOrUndefined(this.ticks)||this.ticks.length!==$t.length)this.ticks=$t,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let Hi=0;Hi<$t.length;++Hi)Object.assign(this.ticks[Hi],$t[Hi])}getTicksArray(){const ae=wi.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,Ne=[],et=1+Math.floor(zn.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/ae,this.viewOptions.precisionLimit));for(let Vt=0;Vt<et;++Vt)Ne.push(zn.roundToPrecisionLimit(this.viewOptions.floor+ae*Vt,this.viewOptions.precisionLimit));return Ne}isTickSelected(ae){if(!this.range)if(wi.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(ae>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&ae<=this.viewLowValue)return!0}else{const Ne=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>Ne&&ae>=Ne&&ae<=this.viewLowValue)return!0;if(this.viewLowValue<Ne&&ae<=Ne&&ae>=this.viewLowValue)return!0}return!!(this.range&&ae>=this.viewLowValue&&ae<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Ci.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Ci.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(ae,Ne){ae===cn.Min?this.updateLowHandle(Ne):ae===cn.Max&&this.updateHighHandle(Ne),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(ae,Ne){const et=ae===cn.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,Vt=Ne-et/2+this.handleHalfDimension,$t=this.fullBarElement.dimension-et;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&ae===cn.Min||!this.viewOptions.rightToLeft&&ae===cn.Max?Math.min(Vt,$t):Math.min(Math.max(Vt,0),$t):Vt}updateLowHandle(ae){this.minHandleElement.setPosition(ae),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Ci.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(cn.Min,ae)),wi.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(cn.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(ae){this.maxHandleElement.setPosition(ae),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Ci.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(cn.Max,ae)),wi.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(cn.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let ae=!1,Ne=!1;const et=this.isLabelBelowFloorLabel(this.minHandleLabelElement),Vt=this.isLabelAboveCeilLabel(this.minHandleLabelElement),$t=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),Hi=this.isLabelBelowFloorLabel(this.combinedLabelElement),wt=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(et?(ae=!0,this.floorLabelElement.hide()):(ae=!1,this.floorLabelElement.show()),Vt?(Ne=!0,this.ceilLabelElement.hide()):(Ne=!1,this.ceilLabelElement.show()),this.range){const At=this.combinedLabelElement.isVisible()?wt:$t,st=this.combinedLabelElement.isVisible()?Hi:et;At?this.ceilLabelElement.hide():Ne||this.ceilLabelElement.show(),st?this.floorLabelElement.hide():ae||this.floorLabelElement.show()}}isLabelBelowFloorLabel(ae){const Ne=ae.position,Vt=this.floorLabelElement.position;return this.viewOptions.rightToLeft?Ne+ae.dimension>=Vt-2:Ne<=Vt+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(ae){const Ne=ae.position,Vt=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?Ne<=Vt+this.ceilLabelElement.dimension+2:Ne+ae.dimension>=Vt-2}updateSelectionBar(){let ae=0,Ne=0;const et=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,Vt=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)Ne=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),ae=Vt;else if(wi.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))et?(Ne=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),ae=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(Ne=this.minHandleElement.position+this.handleHalfDimension,ae=0);else{const $t=this.viewOptions.showSelectionBarFromValue,Hi=this.valueToPosition($t);(this.viewOptions.rightToLeft?this.viewLowValue<=$t:this.viewLowValue>$t)?(Ne=this.minHandleElement.position-Hi,ae=Hi+this.handleHalfDimension):(Ne=Hi-this.minHandleElement.position,ae=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(Ne),this.selectionBarElement.setPosition(ae),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(ae),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(ae+Ne)),this.leftOuterSelectionBarElement.setPosition(ae+Ne)):(this.leftOuterSelectionBarElement.setDimension(ae),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(ae+Ne)),this.rightOuterSelectionBarElement.setPosition(ae+Ne))),wi.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!wi.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const $t=wi.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),Hi=$t-ae>0&&!et||$t-ae<=0&&et;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?Hi?"bottom":"top":Hi?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+($t+Ne+ae+(Hi?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=$t-ae+(Hi?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const $t=this.getSelectionBarColor();this.barStyle={backgroundColor:$t}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(ae){return this.viewOptions.getPointerColor(ae===cn.Max?this.highValue:this.value,ae)}getTickColor(ae){return this.viewOptions.getTickColor(ae)}updateCombinedLabel(){let ae=null;if(ae=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,ae){const Ne=this.getDisplayValue(this.viewLowValue,Ci.Low),et=this.getDisplayValue(this.viewHighValue,Ci.High),Vt=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(et,Ne):this.viewOptions.combineLabels(Ne,et);this.combinedLabelElement.setValue(Vt);const $t=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition($t),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(ae,Ne){return!wi.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(ae=this.getStepValue(ae)),this.viewOptions.translate(ae,Ne)}roundStep(ae,Ne){const et=wi.isNullOrUndefined(Ne)?this.viewOptions.step:Ne;let Vt=zn.roundToPrecisionLimit((ae-this.viewOptions.floor)/et,this.viewOptions.precisionLimit);return Vt=Math.round(Vt)*et,zn.roundToPrecisionLimit(this.viewOptions.floor+Vt,this.viewOptions.precisionLimit)}valueToPosition(ae){let Ne=wi.linearValueToPosition;wi.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(Ne=wi.logValueToPosition):Ne=this.viewOptions.customValueToPosition;let et=Ne(ae=zn.clampToRange(ae,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return wi.isNullOrUndefined(et)&&(et=0),this.viewOptions.rightToLeft&&(et=1-et),et*this.maxHandlePosition}positionToValue(ae){let Ne=ae/this.maxHandlePosition;this.viewOptions.rightToLeft&&(Ne=1-Ne);let et=wi.linearPositionToValue;wi.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(et=wi.logPositionToValue):et=this.viewOptions.customPositionToValue;const Vt=et(Ne,this.viewOptions.floor,this.viewOptions.ceil);return wi.isNullOrUndefined(Vt)?0:Vt}getEventXY(ae,Ne){if(ae instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?ae.clientY:ae.clientX;let et=0;const Vt=ae.touches;if(!wi.isNullOrUndefined(Ne))for(let $t=0;$t<Vt.length;$t++)if(Vt[$t].identifier===Ne){et=$t;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?Vt[et].clientY:Vt[et].clientX}getEventPosition(ae,Ne){const et=this.elementRef.nativeElement.getBoundingClientRect(),Vt=this.viewOptions.vertical||0!==this.viewOptions.rotate?et.bottom:et.left;let $t=0;return $t=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(ae,Ne)+Vt:this.getEventXY(ae,Ne)-Vt,$t*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(ae){if(!this.range)return cn.Min;const Ne=this.getEventPosition(ae),et=Math.abs(Ne-this.minHandleElement.position),Vt=Math.abs(Ne-this.maxHandleElement.position);return et<Vt?cn.Min:et>Vt?cn.Max:this.viewOptions.rightToLeft?Ne>this.minHandleElement.position?cn.Min:cn.Max:Ne<this.minHandleElement.position?cn.Min:cn.Max}bindEvents(){const ae=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",Ne=>this.onBarStart(null,ae,Ne,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",Ne=>this.onBarStart(cn.Min,ae,Ne,!0,!0)),this.maxHandleElement.on("mousedown",Ne=>this.onBarStart(cn.Max,ae,Ne,!0,!0))):(this.minHandleElement.on("mousedown",Ne=>this.onStart(cn.Min,Ne,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",Ne=>this.onStart(cn.Max,Ne,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",Ne=>this.onStart(null,Ne,!0,!0,!0)),this.ticksElement.on("mousedown",Ne=>this.onStart(null,Ne,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",Ne=>this.onBarStart(null,ae,Ne,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",Ne=>this.onBarStart(cn.Min,ae,Ne,!0,!0)),this.maxHandleElement.onPassive("touchstart",Ne=>this.onBarStart(cn.Max,ae,Ne,!0,!0))):(this.minHandleElement.onPassive("touchstart",Ne=>this.onStart(cn.Min,Ne,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",Ne=>this.onStart(cn.Max,Ne,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",Ne=>this.onStart(null,Ne,!0,!0,!0)),this.ticksElement.onPassive("touchstart",Ne=>this.onStart(null,Ne,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(cn.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(cn.Max)))}getOptionsInfluencingEventBindings(ae){return[ae.disabled,ae.readOnly,ae.draggableRange,ae.draggableRangeOnly,ae.onlyBindHandles,ae.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const ae of this.getAllSliderElements())wi.isNullOrUndefined(ae)||ae.off()}onBarStart(ae,Ne,et,Vt,$t,Hi,wt){Ne?this.onDragStart(ae,et,Vt,$t):this.onStart(ae,et,Vt,$t,Hi,wt)}onStart(ae,Ne,et,Vt,$t,Hi){Ne.stopPropagation(),!Jn.isTouchEvent(Ne)&&!Jt&&Ne.preventDefault(),this.moving=!1,this.calculateViewDimensions(),wi.isNullOrUndefined(ae)&&(ae=this.getNearestHandle(Ne)),this.currentTrackingPointer=ae;const wt=this.getPointerElement(ae);if(wt.active=!0,this.viewOptions.keyboardSupport&&wt.focus(),et){this.unsubscribeOnMove();const At=st=>this.dragging.active?this.onDragMove(st):this.onMove(st);this.onMoveEventListener=Jn.isTouchEvent(Ne)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",At):this.eventListenerHelper.attachEventListener(document,"mousemove",At)}if(Vt){this.unsubscribeOnEnd();const At=st=>this.onEnd(st);this.onEndEventListener=Jn.isTouchEvent(Ne)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",At):this.eventListenerHelper.attachEventListener(document,"mouseup",At)}this.userChangeStart.emit(this.getChangeContext()),Jn.isTouchEvent(Ne)&&!wi.isNullOrUndefined(Ne.changedTouches)&&wi.isNullOrUndefined(this.touchId)&&(this.touchId=Ne.changedTouches[0].identifier),$t&&this.onMove(Ne,!0),Hi&&this.onEnd(Ne)}onMove(ae,Ne){let et=null;if(Jn.isTouchEvent(ae)){const At=ae.changedTouches;for(let st=0;st<At.length;st++)if(At[st].identifier===this.touchId){et=At[st];break}if(wi.isNullOrUndefined(et))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const Vt=wi.isNullOrUndefined(et)?this.getEventPosition(ae):this.getEventPosition(ae,et.identifier);let $t;Vt<=0?$t=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:Vt>=this.maxHandlePosition?$t=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:($t=this.positionToValue(Vt),$t=Ne&&!wi.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep($t,this.viewOptions.tickStep):this.roundStep($t)),this.positionTrackingHandle($t)}onEnd(ae){Jn.isTouchEvent(ae)&&ae.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(ae){const Ne=this.getPointerElement(ae);Ne.on("blur",()=>this.onPointerBlur(Ne)),Ne.on("keydown",et=>this.onKeyboardEvent(et)),Ne.on("keyup",()=>this.onKeyUp()),Ne.active=!0,this.currentTrackingPointer=ae,this.currentFocusPointer=ae,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(ae){ae.off("blur"),ae.off("keydown"),ae.off("keyup"),ae.active=!1,wi.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(ae){const Ne=this.viewOptions.ceil-this.viewOptions.floor;let et=ae+this.viewOptions.step,Vt=ae-this.viewOptions.step,$t=ae+Ne/10,Hi=ae-Ne/10;this.viewOptions.reversedControls&&(et=ae-this.viewOptions.step,Vt=ae+this.viewOptions.step,$t=ae-Ne/10,Hi=ae+Ne/10);const wt={UP:et,DOWN:Vt,LEFT:Vt,RIGHT:et,PAGEUP:$t,PAGEDOWN:Hi,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(wt.LEFT=et,wt.RIGHT=Vt,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(wt.UP=Vt,wt.DOWN=et)),wt}onKeyboardEvent(ae){const Ne=this.getCurrentTrackingValue(),et=wi.isNullOrUndefined(ae.keyCode)?ae.which:ae.keyCode,wt=this.getKeyActions(Ne)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[et]];if(wi.isNullOrUndefined(wt)||wi.isNullOrUndefined(this.currentTrackingPointer))return;ae.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const At=zn.clampToRange(wt,this.viewOptions.floor,this.viewOptions.ceil),st=this.roundStep(At);if(this.viewOptions.draggableRangeOnly){const ot=this.viewHighValue-this.viewLowValue;let qe,nt;this.currentTrackingPointer===cn.Min?(qe=st,nt=st+ot,nt>this.viewOptions.ceil&&(nt=this.viewOptions.ceil,qe=nt-ot)):this.currentTrackingPointer===cn.Max&&(nt=st,qe=st-ot,qe<this.viewOptions.floor&&(qe=this.viewOptions.floor,nt=qe+ot)),this.positionTrackingBar(qe,nt)}else this.positionTrackingHandle(st)}onDragStart(ae,Ne,et,Vt){const $t=this.getEventPosition(Ne);this.dragging=new mr,this.dragging.active=!0,this.dragging.value=this.positionToValue($t),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-$t:$t-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?$t-this.maxHandleElement.position:this.maxHandleElement.position-$t,this.onStart(ae,Ne,et,Vt)}getMinValue(ae,Ne,et){const Vt=this.viewOptions.rightToLeft;let $t=null;return $t=Ne?et?Vt?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:Vt?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(Vt?ae+this.dragging.lowLimit:ae-this.dragging.lowLimit),this.roundStep($t)}getMaxValue(ae,Ne,et){const Vt=this.viewOptions.rightToLeft;let $t=null;return $t=Ne?et?Vt?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:Vt?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:Vt?this.positionToValue(ae+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(ae-this.dragging.lowLimit)+this.dragging.difference,this.roundStep($t)}onDragMove(ae){const Ne=this.getEventPosition(ae);let et,Vt,$t,Hi;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(et=this.dragging.lowLimit,Vt=this.dragging.highLimit,$t=this.maxHandleElement,Hi=this.minHandleElement):(et=this.dragging.highLimit,Vt=this.dragging.lowLimit,$t=this.minHandleElement,Hi=this.maxHandleElement);const At=Ne>=this.maxHandlePosition-et;let st,ot;if(Ne<=Vt){if(0===$t.position)return;st=this.getMinValue(Ne,!0,!1),ot=this.getMaxValue(Ne,!0,!1)}else if(At){if(Hi.position===this.maxHandlePosition)return;ot=this.getMaxValue(Ne,!0,!0),st=this.getMinValue(Ne,!0,!0)}else st=this.getMinValue(Ne,!1,!1),ot=this.getMaxValue(Ne,!1,!1);this.positionTrackingBar(st,ot)}positionTrackingBar(ae,Ne){!wi.isNullOrUndefined(this.viewOptions.minLimit)&&ae<this.viewOptions.minLimit&&(Ne=zn.roundToPrecisionLimit((ae=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!wi.isNullOrUndefined(this.viewOptions.maxLimit)&&Ne>this.viewOptions.maxLimit&&(ae=zn.roundToPrecisionLimit((Ne=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=ae,this.viewHighValue=Ne,this.applyViewChange(),this.updateHandles(cn.Min,this.valueToPosition(ae)),this.updateHandles(cn.Max,this.valueToPosition(Ne))}positionTrackingHandle(ae){ae=this.applyMinMaxLimit(ae),this.range&&(this.viewOptions.pushRange?ae=this.applyPushRange(ae):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===cn.Min&&ae>this.viewHighValue?ae=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===cn.Max&&ae<this.viewLowValue&&(ae=this.applyMinMaxRange(this.viewLowValue))),ae=this.applyMinMaxRange(ae),this.currentTrackingPointer===cn.Min&&ae>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(cn.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=cn.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===cn.Max&&ae<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(cn.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=cn.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==ae&&(this.currentTrackingPointer===cn.Min?(this.viewLowValue=ae,this.applyViewChange()):this.currentTrackingPointer===cn.Max&&(this.viewHighValue=ae,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(ae)),this.updateAriaAttributes())}applyMinMaxLimit(ae){return!wi.isNullOrUndefined(this.viewOptions.minLimit)&&ae<this.viewOptions.minLimit?this.viewOptions.minLimit:!wi.isNullOrUndefined(this.viewOptions.maxLimit)&&ae>this.viewOptions.maxLimit?this.viewOptions.maxLimit:ae}applyMinMaxRange(ae){const et=Math.abs(ae-(this.currentTrackingPointer===cn.Min?this.viewHighValue:this.viewLowValue));if(!wi.isNullOrUndefined(this.viewOptions.minRange)&&et<this.viewOptions.minRange){if(this.currentTrackingPointer===cn.Min)return zn.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===cn.Max)return zn.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!wi.isNullOrUndefined(this.viewOptions.maxRange)&&et>this.viewOptions.maxRange){if(this.currentTrackingPointer===cn.Min)return zn.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===cn.Max)return zn.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return ae}applyPushRange(ae){const Ne=this.currentTrackingPointer===cn.Min?this.viewHighValue-ae:ae-this.viewLowValue,et=wi.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,Vt=this.viewOptions.maxRange;return Ne<et?(this.currentTrackingPointer===cn.Min?(this.viewHighValue=zn.roundToPrecisionLimit(Math.min(ae+et,this.viewOptions.ceil),this.viewOptions.precisionLimit),ae=zn.roundToPrecisionLimit(this.viewHighValue-et,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(cn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===cn.Max&&(this.viewLowValue=zn.roundToPrecisionLimit(Math.max(ae-et,this.viewOptions.floor),this.viewOptions.precisionLimit),ae=zn.roundToPrecisionLimit(this.viewLowValue+et,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(cn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!wi.isNullOrUndefined(Vt)&&Ne>Vt&&(this.currentTrackingPointer===cn.Min?(this.viewHighValue=zn.roundToPrecisionLimit(ae+Vt,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(cn.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===cn.Max&&(this.viewLowValue=zn.roundToPrecisionLimit(ae-Vt,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(cn.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),ae}getChangeContext(){const ae=new br;return ae.pointerType=this.currentTrackingPointer,ae.value=+this.value,this.range&&(ae.highValue=+this.highValue),ae}static \u0275fac=function(Ne){return new(Ne||Pt)(e.GI1(e.q87),e.GI1(e.GMv),e.GI1(e.kD9),e.GI1(e.WW2),e.GI1(Dn,8))};static \u0275cmp=e.In1({type:Pt,selectors:[["ngx-slider"]],contentQueries:function(Ne,et,Vt){if(1&Ne&&e.szK(Vt,tn,5),2&Ne){let $t;e.wto($t=e.Gqi())&&(et.tooltipTemplate=$t.first)}},viewQuery:function(Ne,et){if(1&Ne&&(e.CC$(di,5,fr),e.CC$(Wi,5,fr),e.CC$(_n,5,fr),e.CC$(Ln,5,fr),e.CC$(Gn,5,Yr),e.CC$(Yn,5,Yr),e.CC$(on,5,Nn),e.CC$(jt,5,Nn),e.CC$(gi,5,Nn),e.CC$(V,5,Nn),e.CC$(Bi,5,Nn),e.CC$($i,5,fr)),2&Ne){let Vt;e.wto(Vt=e.Gqi())&&(et.leftOuterSelectionBarElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.rightOuterSelectionBarElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.fullBarElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.selectionBarElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.minHandleElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.maxHandleElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.floorLabelElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.ceilLabelElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.minHandleLabelElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.maxHandleLabelElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.combinedLabelElement=Vt.first),e.wto(Vt=e.Gqi())&&(et.ticksElement=Vt.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(Ne,et){1&Ne&&e.qCj("resize",function($t){return et.onResize($t)},!1,e.MbM),2&Ne&&(e.e48("disabled",et.sliderElementDisabledAttr)("aria-label",et.sliderElementAriaLabel),e.eAK("vertical",et.sliderElementVerticalClass)("animate",et.sliderElementAnimateClass)("with-legend",et.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[e.M5G([Mt]),e.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(Ne,et){1&Ne&&(e.I0R(0,"span",0,1),e.wR5(2,"span",2),e.C$Y(),e.I0R(3,"span",3,4),e.wR5(5,"span",2),e.C$Y(),e.I0R(6,"span",5,6),e.wR5(8,"span",2),e.C$Y(),e.I0R(9,"span",7,8),e.wR5(11,"span",9),e.C$Y(),e.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),e.I0R(26,"span",24,25),e.yuY(28,fn,5,10,"span",26),e.C$Y()),2&Ne&&(e.yG2(6),e.eAK("ngx-slider-transparent",et.fullBarTransparentClass),e.yG2(3),e.eAK("ngx-slider-draggable",et.selectionBarDraggableClass),e.yG2(2),e.E7m("ngStyle",et.barStyle),e.yG2(),e.E7m("ngStyle",et.minPointerStyle),e.yG2(2),e.m4B("display",et.range?"inherit":"none"),e.E7m("ngStyle",et.maxPointerStyle),e.yG2(12),e.eAK("ngx-slider-ticks-values-under",et.ticksUnderValuesClass),e.E7m("hidden",!et.showTicks),e.yG2(2),e.E7m("ngForOf",et.ticks))},dependencies:[Mi.QF,Mi.ay,Mi.u_,Mi.Qt,fr,Yr,Nn,_r],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return Pt})(),Zt=(()=>{class Pt{static \u0275fac=function(Ne){return new(Ne||Pt)};static \u0275mod=e.a4G({type:Pt});static \u0275inj=e.s3X({imports:[Mi.MD]})}return Pt})()}}]);