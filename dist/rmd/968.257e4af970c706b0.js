(self.webpackChunkSteex=self.webpackChunkSteex||[]).push([[968],{2500:(uo,ja,Zt)=>{"use strict";Zt.r(ja),Zt.d(ja,{CustomPagesModule:()=>mZ});var T=Zt(9072),xt=Zt(3756),Ze=Zt.n(xt),t=Zt(4496),j=Zt(6504),He=Zt(3364),Be=Zt(4400),Me=Zt(1368),We=Zt(6708),nt=Zt(8216);const at=(n,i)=>({"bg-info-subtle text-info":n,"bg-danger-subtle text-danger":i});function Ct(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr")(1,"td",38),t.OEk(2),t.C$Y(),t.wR5(3,"td",39)(4,"td",39),t.I0R(5,"td",40)(6,"div",41)(7,"input",42),t.qCj("change",function(a){const d=t.usT(e).$implicit,p=t.GaO();return t.CGJ(p.setStatus(d.id,a))}),t.C$Y(),t.I0R(8,"label",43)(9,"span",44),t.OEk(10),t.C$Y()()()(),t.I0R(11,"td",45)(12,"ul",46)(13,"li")(14,"a",47),t.wR5(15,"i",48),t.C$Y()(),t.I0R(16,"li")(17,"a",49),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.delete(o.id))}),t.wR5(18,"i",50),t.C$Y()()()()()}if(2&n){const e=i.$implicit,r=i.$index,a=t.GaO();t.yG2(2),t.oRS(" ",(a.currentPage-1)*a.itemsPerPage+r+1," "),t.yG2(),t.E7m("innerHtml",e.name,t.E3n),t.yG2(),t.E7m("innerHtml",e.cin_id,t.E3n),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),t.yG2(),t.E7m("for","customSwitchsizemd"+r),t.yG2(),t.E7m("ngClass",t.IBC(9,at,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(4),t.CI5("routerLink","/edit-company/",e.id,"")}}function ot(n,i){1&n&&(t.I0R(0,"div",37)(1,"div",51)(2,"span",52),t.OEk(3,"Loading..."),t.C$Y()()())}let Wt=(()=>{class n{constructor(e,r,a){this.formBuilder=e,this.api=r,this.toastService=a,this.spinnerStatus=!1,this.companyData=[],this.companyDataList=[],this.term="",this.currentPage=1,this.totalItems=0,this.itemsPerPage=5}ngOnInit(){this.breadCrumbItems=[{label:"Company",active:!0},{label:"Company list",active:!0}],this.getCompanyData()}getCompanyData(){this.toggleSpinner(!0),this.api.getwithoutid("company").subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.companyData=e.data||[],this.companyDataList=e.data||[],this.updatePagination(),this.updateDisplayedItems()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,r){const o=r.target.checked?"active":"inactive",d=new FormData;d.append("status",o),this.toggleSpinner(!0),this.api.put("company",e,d).subscribe(p=>this.handleStatusChangeResponse(p),p=>this.handleError(p))}toggleSpinner(e){this.spinnerStatus=e}delete(e){e&&Ze().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&this.api.deleteWithId("company",e).subscribe(a=>this.handleStatusChangeResponse(a),a=>this.handleError(a))})}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getCompanyData()):(console.log(e),this.toastService.error(e.message))}handleError(e){this.toggleSpinner(!1)}filterdata(){this.companyData=this.term?this.companyDataList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.cin_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.companyDataList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.companyData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.companyDataList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.companyData=this.companyDataList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(j.im),t.GI1(He.W),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-company-list"]],decls:61,vars:7,consts:[["title","Company List",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,""],[1,"col-lg-12"],["id","coursesList",1,"card"],[1,"card-body","ps-0"],[1,"row","align-items-center","g-2"],[1,"col-6","mt-0"],[1,"card-header","ps-0","pt-0"],[1,"d-flex","justify-content-between","align-items-center"],[1,"col-lg-5","d-flex","justify-content-end"],[1,"search-box"],["type","text","placeholder","Search",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-1"],[1,"hstack","flex-wrap","gap-2"],["routerLink","/add-company",1,"btn","btn-secondary"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-bordered","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"text-muted","text-center"],["scope","col",1,"cursor-pointer"],["scope","col"],[1,"list","form-check-all","text-center"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"ph-magnifying-glass","fs-1","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["id","elmLoader"],[1,"id"],[1,"instructor",3,"innerHtml"],[1,"status"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"px-0"],[1,"d-flex","justify-content-center","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink"],[1,"ph-pencil","fs-5"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash","fs-5"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,a){1&r&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),t.wR5(12,"div",10),t.C$Y()(),t.I0R(13,"div",11)(14,"div",12)(15,"input",13),t.iHE("ngModelChange",function(d){return t.kNx(a.term,d)||(a.term=d),d}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(16,"i",14),t.C$Y()(),t.I0R(17,"div",15)(18,"div",16)(19,"div")(20,"a",17),t.wR5(21,"i",18),t.OEk(22,"Add"),t.C$Y()()()()()(),t.I0R(23,"div",19)(24,"div",20)(25,"table",21)(26,"thead",22)(27,"tr")(28,"th",23),t.OEk(29,"S No."),t.C$Y(),t.I0R(30,"th",23),t.OEk(31,"Company Name"),t.C$Y(),t.I0R(32,"th",23),t.OEk(33,"CIN"),t.C$Y(),t.I0R(34,"th",23),t.OEk(35,"Status"),t.C$Y(),t.I0R(36,"th",24),t.OEk(37,"Action"),t.C$Y()()(),t.I0R(38,"tbody",25),t.c53(39,Ct,19,12,"tr",null,t.wJt),t.C$Y()(),t.I0R(41,"div",26)(42,"div",27),t.wR5(43,"i",28),t.I0R(44,"h5",29),t.OEk(45,"Sorry! No Result Found"),t.C$Y(),t.I0R(46,"p",30),t.OEk(47," We did not find any Details for you search. "),t.C$Y()()()(),t.I0R(48,"div",31)(49,"div",32)(50,"div",33),t.OEk(51," Showing "),t.I0R(52,"span",34),t.OEk(53),t.C$Y(),t.OEk(54," of "),t.I0R(55,"span",34),t.OEk(56),t.C$Y(),t.OEk(57," Results "),t.C$Y()(),t.I0R(58,"div",35)(59,"pagination",36),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()(),t.yuY(60,ot,4,0,"div",37),t.C$Y()()()()),2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(15),t.OKB("ngModel",a.term),t.yG2(24),t.oho(a.companyData),t.yG2(14),t.cNF(null==a.companyData?null:a.companyData.length),t.yG2(3),t.cNF(null==a.companyDataList?null:a.companyDataList.length),t.yG2(3),t.E7m("totalItems",null==a.companyDataList?null:a.companyDataList.length)("itemsPerPage",5),t.yG2(),t.C0Y(60,a.spinnerStatus?60:-1))},dependencies:[Me.QF,We.O,T.ER,j.ot,j.ue,j._G,nt.im]})}return n})();function et(n,i){if(1&n&&t.wR5(0,"img",89),2&n){const e=t.GaO(2);t.E7m("src",e.companyselectedImagePreview,t.K6U)}}function lt(n,i){if(1&n&&t.yuY(0,et,1,1,"img",88),2&n){const e=t.GaO();t.C0Y(0,e.companyselectedImagePreview?0:-1)}}function gt(n,i){if(1&n&&t.wR5(0,"img",90),2&n){const e=t.GaO();t.E7m("src",e.companyuploadedImage,t.K6U)}}function _i(n,i){1&n&&t.wR5(0,"img",91)}function tt(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Logo is required."),t.C$Y())}function yi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Company name is required."),t.C$Y())}function Pi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Company name must be at most 45 characters "),t.C$Y())}function Dt(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Business type is required."),t.C$Y())}function Fi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Business type must be at most 45 characters "),t.C$Y())}function xi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"TIN is required."),t.C$Y())}function fi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"CIN is required."),t.C$Y())}function It(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"No. of Employee is required."),t.C$Y())}function Si(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Website url is required."),t.C$Y())}function Ni(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Contact person is required."),t.C$Y())}function Zi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Email is required."),t.C$Y())}function Rn(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Email must be a valid email address "),t.C$Y())}function Ki(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Mobile is required."),t.C$Y())}function tn(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Please, Enter 10 digit Mobile Number. "),t.C$Y())}function yn(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"City is required."),t.C$Y())}function Nn(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"State is required."),t.C$Y())}function yr(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"zip_code is required."),t.C$Y())}function fr(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Address is required."),t.C$Y())}function Nr(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Address must be at most 100 characters "),t.C$Y())}function Mi(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Password is required. "),t.C$Y())}function In(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Confirm Password is required. "),t.C$Y())}function Jn(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1," Password and Confirm Password does not match. "),t.C$Y())}function ia(n,i){1&n&&(t.I0R(0,"div",92),t.OEk(1,"Status is required."),t.C$Y())}function jr(n,i){1&n&&(t.I0R(0,"button",93),t.OEk(1,"Save"),t.C$Y())}function Pr(n,i){1&n&&(t.I0R(0,"button",94),t.wR5(1,"span",95),t.OEk(2," Please wait "),t.C$Y())}function Mn(n,i){if(1&n&&(t.I0R(0,"div",96)(1,"div",97)(2,"div",27)(3,"div",98)(4,"h5",99),t.OEk(5,"Password must contain:"),t.C$Y()(),t.I0R(6,"div")(7,"p",100),t.OEk(8," Minimum "),t.I0R(9,"b"),t.OEk(10,"8 characters"),t.C$Y()(),t.I0R(11,"p",101),t.OEk(12," At least "),t.I0R(13,"b"),t.OEk(14,"one lowercase"),t.C$Y(),t.OEk(15," letter (a-z) "),t.C$Y(),t.I0R(16,"p",102),t.OEk(17," At least "),t.I0R(18,"b"),t.OEk(19,"one uppercase"),t.C$Y(),t.OEk(20," letter (A-Z) "),t.C$Y(),t.I0R(21,"p",103),t.OEk(22," At least "),t.I0R(23,"b"),t.OEk(24,"one number"),t.C$Y(),t.OEk(25," (0-9) "),t.C$Y(),t.I0R(26,"p",104),t.OEk(27," At least "),t.I0R(28,"b"),t.OEk(29,"one special character"),t.C$Y(),t.OEk(30," (!@#$!%*?&) "),t.C$Y()()()()()),2&n){const e=t.GaO();t.yG2(7),t.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),t.yG2(4),t.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),t.yG2(5),t.eAK("valid",e.passwordValidations.upper),t.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.number?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.special?"valid":"invalid")}}function Ya(n,i){1&n&&(t.I0R(0,"div",87)(1,"div",105)(2,"span",106),t.OEk(3,"Loading..."),t.C$Y()()())}const ka=n=>({"is-invalid":n}),Ma=(n,i)=>({"mdi-eye-off-outline":n,"mdi-eye-outline":i});let pr=(()=>{class n{constructor(e,r,a,o,d){this.route=e,this.formBuilder=r,this.api=a,this.router=o,this.toastService=d,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.companyselectedImage=null,this.companyselectedImagePreview=null,this.companyuploadedImage=null,this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1,special:!1}}ngOnInit(){this.breadCrumbItems=[{label:"Compay",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.initializeForm(),this.urlId&&this.getCompanyData()}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],address:["",[j.AQ.maxLength(100),j.AQ.required]],no_of_emp:["",[j.AQ.required]],logo:["",this.imageValidator()],cin_id:["",[j.AQ.required]],tax_no:["",[j.AQ.required]],website_url:["",[j.AQ.required]],email:["",[j.AQ.required,j.AQ.email,j.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[j.AQ.required,j.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],business_type:["",[j.AQ.maxLength(45),j.AQ.required]],password:["",this.urlId?[j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]:[j.AQ.required,j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:["",this.urlId?[]:[j.AQ.required]],status:["",[j.AQ.required]],city:["",[j.AQ.required]],state:["",[j.AQ.required]],zip_code:["",[j.AQ.required]],contact_person:["",[j.AQ.required]],check_out_time:["",[j.AQ.required]],check_in_time_start:["",[j.AQ.required]],check_in_time_end:["",[j.AQ.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){const r=e.get("password")?.value,a=e.get("confirmPassword")?.value;return r&&a?r===a?null:{mismatch:!0}:null}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e),this.passwordValidations.special=/[@$!%*?&]/.test(e);const r=this.formGroup.get("confirmPassword");e?r?.setValidators([j.AQ.required]):r?.clearValidators(),r?.updateValueAndValidity()}imageValidator(){return e=>this.urlId?null:j.AQ.required(e)}get f(){return this.formGroup.controls}getCompanyData(){this.toggleSpinner(!0),this.api.get("company",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setCompanyDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setCompanyDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,no_of_emp:e.no_of_emp,cin_id:e.cin_id,tax_no:e.tax_no,email:e.email,status:e.status,mobile:e.mobile,business_type:e.business_type,city:e.city,state:e.state,zip_code:e.zip_code,contact_person:e.contact_person,website_url:e.website_url,check_in_time_start:e.check_in_time_start,check_in_time_end:e.check_in_time_end,check_out_time:e.check_out_time}),this.companyuploadedImage=e.logo||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData(),r=this.f.check_in_time_start.value,a=this.f.check_in_time_end.value,o=this.f.check_out_time.value;if(r>a)return void this.toastService.error("Check-in start time must be before the end time.");if(o<=a)return void this.toastService.error("Check-out time must be after the check-in end time.");if(o<=r)return void this.toastService.error("Check-out time must be after the check-in start time.");this.urlId?this.updateCompany(e):this.addCompany(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("name",this.f.name.value),e.append("address",this.f.address.value),e.append("no_of_emp",this.f.no_of_emp.value),e.append("cin_id",this.f.cin_id.value),e.append("email",this.f.email.value),this.f.password.value&&e.append("password",this.f.password.value),e.append("status",this.f.status.value),e.append("mobile",this.f.mobile.value),e.append("business_type",this.f.business_type.value),e.append("tax_no",this.f.tax_no.value),e.append("city",this.f.city.value),e.append("state",this.f.state.value),e.append("zip_code",this.f.zip_code.value),e.append("contact_person",this.f.contact_person.value),e.append("website_url",this.f.website_url.value),e.append("check_out_time",this.f.check_out_time.value),e.append("check_in_time_start",this.f.check_in_time_start.value),e.append("check_in_time_end",this.f.check_in_time_end.value),this.companyselectedImage&&e.append("logo",this.companyselectedImage),e}addCompany(e){this.api.post("company",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}updateCompany(e){this.api.put("company",this.urlId,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["company"])):this.toastService.error(e.message)}resetForm(){this.companyselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}companyimageSelect(e){const r=e.target.files[0];r&&(this.companyselectedImage=r,this.companyselectedImagePreview=URL.createObjectURL(r))}companyremoveImage(){this.companyselectedImage=null,this.companyselectedImagePreview=null}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(T.gV),t.GI1(j.im),t.GI1(He.W),t.GI1(T.E5),t.GI1(Be.SA))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-add-company"]],decls:248,vars:69,consts:[[3,"title","breadcrumbItems"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-4"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],[1,"avatar-lg","mt-n5","position-relative","mx-auto"],["type","file","id","companylogo","accept","image/*","formControlName","logo","hidden","",3,"change"],["companylogo",""],["for","companylogo",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","companylogo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"mt-3"],[1,"mb-2"],[1,"text-muted","mb-4","pb-2"],[1,"card-body","pt-1"],[1,"table-responsive","table-card"],[1,"table","align-middle","table-borderless","mb-0"],[1,"col-xl-8"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter company name","value","name",1,"form-control",3,"ngClass"],["for","business_type",1,"form-label"],["type","text","id","business_type","formControlName","business_type","placeholder","Enter Business type","value","business_type",1,"form-control",3,"ngClass"],["for","tax_no",1,"form-label"],["type","text","id","tax_no","formControlName","tax_no","placeholder","Enter TIN","value","tax_no",1,"form-control",3,"ngClass"],["for","cin_id",1,"form-label"],["type","text","id","cin_id","formControlName","cin_id","placeholder","Enter CIN","value","cin_id",1,"form-control",3,"ngClass"],["for","no_of_emp",1,"form-label"],["type","number","id","no_of_emp","formControlName","no_of_emp","placeholder","Enter No. of employee","value","no_of_emp",1,"form-control",3,"ngClass"],["for","website_url",1,"form-label"],["type","text","id","website_url","formControlName","website_url","placeholder","Enter Website Url","value","website_url",1,"form-control",3,"ngClass"],["for","checkInTimeStart",1,"form-label"],[1,"row","g-2"],[1,"col-lg-5"],["type","time","id","checkInTimeStart","formControlName","check_in_time_start",1,"form-control"],[1,"col-auto","align-self-center"],["type","time","id","checkInTimeEnd","formControlName","check_in_time_end",1,"form-control"],["for","checkOutTime",1,"form-label"],["type","time","id","checkOutTime","formControlName","check_out_time",1,"form-control"],[1,"card","mt-3"],[1,"col-lg-4"],["for","contact_person",1,"form-label"],["type","text","id","contact_person","formControlName","contact_person","placeholder","Enter Contact person","value","contact_person",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter City","value","city",1,"form-control",3,"ngClass"],["for","State",1,"form-label"],["type","text","id","State","formControlName","state","placeholder","Enter state","value","state",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","text","id","zip_code","formControlName","zip_code","placeholder","Enter zip code","value","zip_code",1,"form-control",3,"ngClass"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","5","formControlName","address",1,"form-control",3,"ngClass"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text",4,"ngIf"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],["class","btn btn-primary"],["class","col-lg-12 mt-4"],["id","elmLoader"],["alt","","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],["alt","",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,a){1&r&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"form",1),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(2,"div",2)(3,"div",3)(4,"div",4)(5,"div"),t.wR5(6,"img",5),t.C$Y(),t.I0R(7,"div",6)(8,"div",7)(9,"div",8),t.yuY(10,lt,1,1)(11,gt,1,1)(12,_i,1,0)(13,tt,2,0,"div",9),t.I0R(14,"div",10)(15,"input",11,12),t.qCj("change",function(d){return a.companyimageSelect(d)}),t.C$Y(),t.I0R(17,"div",13)(18,"label",14)(19,"span",15),t.wR5(20,"i",16),t.C$Y()()()()(),t.I0R(21,"div",17)(22,"h5",18),t.OEk(23),t.C$Y(),t.I0R(24,"p",19),t.OEk(25),t.C$Y()()()(),t.I0R(26,"div",20)(27,"div",21)(28,"table",22)(29,"tbody")(30,"tr")(31,"th"),t.OEk(32,"TIN"),t.C$Y(),t.I0R(33,"td"),t.OEk(34),t.C$Y()(),t.I0R(35,"tr")(36,"th"),t.OEk(37,"CIN"),t.C$Y(),t.I0R(38,"td"),t.OEk(39),t.C$Y()(),t.I0R(40,"tr")(41,"th"),t.OEk(42,"Location"),t.C$Y(),t.I0R(43,"td"),t.OEk(44),t.C$Y()(),t.I0R(45,"tr")(46,"th"),t.OEk(47,"Website"),t.C$Y(),t.I0R(48,"td"),t.OEk(49),t.C$Y()(),t.I0R(50,"tr")(51,"th"),t.OEk(52,"Phone Number"),t.C$Y(),t.I0R(53,"td")(54,"a"),t.OEk(55),t.C$Y()()()()()()()()(),t.I0R(56,"div",23)(57,"div",24)(58,"div",25)(59,"h6",26),t.OEk(60,"Company Information"),t.C$Y()(),t.I0R(61,"div",27)(62,"div",28)(63,"div",2)(64,"div",29)(65,"div",30)(66,"label",31),t.OEk(67,"Company name "),t.I0R(68,"span",32),t.OEk(69,"*"),t.C$Y()(),t.wR5(70,"input",33),t.yuY(71,yi,2,0,"div",9)(72,Pi,2,0,"div",9),t.C$Y()(),t.I0R(73,"div",29)(74,"div",30)(75,"label",34),t.OEk(76,"Business type "),t.I0R(77,"span",32),t.OEk(78,"*"),t.C$Y()(),t.wR5(79,"input",35),t.yuY(80,Dt,2,0,"div",9)(81,Fi,2,0,"div",9),t.C$Y()(),t.I0R(82,"div",29)(83,"div",30)(84,"label",36),t.OEk(85,"Tax Identification Number (TIN) "),t.I0R(86,"span",32),t.OEk(87,"*"),t.C$Y()(),t.wR5(88,"input",37),t.yuY(89,xi,2,0,"div",9),t.C$Y()(),t.I0R(90,"div",29)(91,"div",30)(92,"label",38),t.OEk(93,"Corporate Identification Number (CIN) "),t.I0R(94,"span",32),t.OEk(95,"*"),t.C$Y()(),t.wR5(96,"input",39),t.yuY(97,fi,2,0,"div",9),t.C$Y()(),t.I0R(98,"div",29)(99,"div",30)(100,"label",40),t.OEk(101,"No. of Employee "),t.I0R(102,"span",32),t.OEk(103,"*"),t.C$Y()(),t.wR5(104,"input",41),t.yuY(105,It,2,0,"div",9),t.C$Y()(),t.I0R(106,"div",29)(107,"div",30)(108,"label",42),t.OEk(109,"Website Url"),t.I0R(110,"span",32),t.OEk(111,"*"),t.C$Y()(),t.wR5(112,"input",43),t.yuY(113,Si,2,0,"div",9),t.C$Y()(),t.I0R(114,"div",29)(115,"div",30)(116,"label",44),t.OEk(117,"Check-In Time"),t.C$Y(),t.I0R(118,"div",45)(119,"div",46),t.wR5(120,"input",47),t.C$Y(),t.I0R(121,"div",48),t.OEk(122,"to"),t.C$Y(),t.I0R(123,"div",46),t.wR5(124,"input",49),t.C$Y()()()(),t.I0R(125,"div",29)(126,"div",30)(127,"label",50),t.OEk(128,"Check-Out Time"),t.C$Y(),t.wR5(129,"input",51),t.C$Y()()()()()(),t.I0R(130,"div",52)(131,"div",25)(132,"h6",26),t.OEk(133,"Contact Information"),t.C$Y()(),t.I0R(134,"div",27)(135,"div",28)(136,"div",2)(137,"div",53)(138,"div",30)(139,"label",54),t.OEk(140,"Contact person "),t.I0R(141,"span",32),t.OEk(142,"*"),t.C$Y()(),t.wR5(143,"input",55),t.yuY(144,Ni,2,0,"div",9),t.C$Y()(),t.I0R(145,"div",53)(146,"div",30)(147,"label",56),t.OEk(148,"Email "),t.I0R(149,"span",32),t.OEk(150,"*"),t.C$Y()(),t.wR5(151,"input",57),t.yuY(152,Zi,2,0,"div",9)(153,Rn,2,0,"div",9),t.C$Y()(),t.I0R(154,"div",53)(155,"div",30)(156,"label",58),t.OEk(157,"Contact Number "),t.I0R(158,"span",32),t.OEk(159,"*"),t.C$Y()(),t.wR5(160,"input",59),t.yuY(161,Ki,2,0,"div",9)(162,tn,2,0,"div",9),t.C$Y()()()()()(),t.I0R(163,"div",52)(164,"div",25)(165,"h6",26),t.OEk(166,"Address Information"),t.C$Y()(),t.I0R(167,"div",27)(168,"div",28)(169,"div",2)(170,"div",53)(171,"div",30)(172,"label",60),t.OEk(173,"City "),t.I0R(174,"span",32),t.OEk(175,"*"),t.C$Y()(),t.wR5(176,"input",61),t.yuY(177,yn,2,0,"div",9),t.C$Y()(),t.I0R(178,"div",53)(179,"div",30)(180,"label",62),t.OEk(181,"State "),t.I0R(182,"span",32),t.OEk(183,"*"),t.C$Y()(),t.wR5(184,"input",63),t.yuY(185,Nn,2,0,"div",9),t.C$Y()(),t.I0R(186,"div",53)(187,"div",30)(188,"label",64),t.OEk(189,"Zip code "),t.I0R(190,"span",32),t.OEk(191,"*"),t.C$Y()(),t.wR5(192,"input",65),t.yuY(193,yr,2,0,"div",9),t.C$Y()(),t.I0R(194,"div",66)(195,"div",30)(196,"label",67),t.OEk(197," Address "),t.I0R(198,"span",32),t.OEk(199,"*"),t.C$Y()(),t.wR5(200,"textarea",68),t.yuY(201,fr,2,0,"div",9)(202,Nr,2,0,"div",9),t.C$Y()()()()()(),t.I0R(203,"div",52)(204,"div",25)(205,"h6",26),t.OEk(206,"Password"),t.C$Y()(),t.I0R(207,"div",27)(208,"div",2)(209,"div",53)(210,"div",69)(211,"label",70),t.OEk(212,"New Password*"),t.C$Y(),t.I0R(213,"div",71)(214,"input",72),t.qCj("input",function(){return a.checkPasswordPattern()}),t.C$Y(),t.I0R(215,"button",73),t.qCj("click",function(){return a.toggleFieldTextType1()}),t.wR5(216,"i",74),t.C$Y()(),t.yuY(217,Mi,2,0,"div",75),t.C$Y()(),t.I0R(218,"div",53)(219,"div",69)(220,"label",76),t.OEk(221,"Confirm Password*"),t.C$Y(),t.I0R(222,"div",71),t.wR5(223,"input",77),t.I0R(224,"button",73),t.qCj("click",function(){return a.toggleFieldTextType2()}),t.wR5(225,"i",74),t.C$Y()(),t.yuY(226,In,2,0,"div",75)(227,Jn,2,0,"div",75),t.C$Y()(),t.I0R(228,"div",53)(229,"div",30)(230,"label",78),t.OEk(231,"Status "),t.I0R(232,"span",32),t.OEk(233,"*"),t.C$Y()(),t.I0R(234,"select",79)(235,"option",80),t.OEk(236,"Select Status"),t.C$Y(),t.I0R(237,"option",81),t.OEk(238,"Active"),t.C$Y(),t.I0R(239,"option",82),t.OEk(240,"Inactive"),t.C$Y()(),t.yuY(241,ia,2,0,"div",9),t.C$Y()(),t.I0R(242,"div",83)(243,"div",84),t.yuY(244,jr,2,0,"button",85)(245,Pr,3,0),t.C$Y()(),t.yuY(246,Mn,31,7,"div",86),t.C$Y()()()(),t.yuY(247,Ya,4,0,"div",87),t.C$Y()()),2&r&&(t.E7m("title",a.urlId?"Edit Company":"Add Company")("breadcrumbItems",a.breadCrumbItems),t.yG2(),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(10,a.companyselectedImage?10:a.companyuploadedImage?11:12),t.yG2(3),t.C0Y(13,a.f.logo&&a.f.logo.hasError("required")&&a.f.logo.touched?13:-1),t.yG2(10),t.cNF(a.f.name.value),t.yG2(2),t.cNF(a.f.business_type.value),t.yG2(9),t.cNF(a.f.tax_no.value),t.yG2(5),t.cNF(a.f.cin_id.value),t.yG2(5),t.cNF(a.f.address.value),t.yG2(5),t.cNF(a.f.website_url.value),t.yG2(6),t.cNF(a.f.mobile.value),t.yG2(15),t.E7m("ngClass",a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?"is-invalid":""),t.yG2(),t.C0Y(71,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?71:-1),t.yG2(),t.C0Y(72,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?72:-1),t.yG2(7),t.E7m("ngClass",a.f.business_type&&a.f.business_type.hasError("required")&&a.f.business_type.touched?"is-invalid":""),t.yG2(),t.C0Y(80,a.f.business_type&&a.f.business_type.hasError("required")&&a.f.business_type.touched?80:-1),t.yG2(),t.C0Y(81,a.f.business_type&&a.f.business_type.hasError("maxlength")&&a.f.business_type.touched?81:-1),t.yG2(7),t.E7m("ngClass",a.f.tax_no&&a.f.tax_no.hasError("required")&&a.f.tax_no.touched?"is-invalid":""),t.yG2(),t.C0Y(89,a.f.tax_no&&a.f.tax_no.hasError("required")&&a.f.tax_no.touched?89:-1),t.yG2(7),t.E7m("ngClass",a.f.cin_id&&a.f.cin_id.hasError("required")&&a.f.cin_id.touched?"is-invalid":""),t.yG2(),t.C0Y(97,a.f.cin_id&&a.f.cin_id.hasError("required")&&a.f.cin_id.touched?97:-1),t.yG2(7),t.E7m("ngClass",a.f.no_of_emp&&a.f.no_of_emp.hasError("required")&&a.f.no_of_emp.touched?"is-invalid":""),t.yG2(),t.C0Y(105,a.f.no_of_emp&&a.f.no_of_emp.hasError("required")&&a.f.no_of_emp.touched?105:-1),t.yG2(7),t.E7m("ngClass",a.f.website_url&&a.f.website_url.hasError("required")&&a.f.website_url.touched?"is-invalid":""),t.yG2(),t.C0Y(113,a.f.website_url&&a.f.website_url.hasError("required")&&a.f.website_url.touched?113:-1),t.yG2(30),t.E7m("ngClass",a.f.contact_person&&a.f.contact_person.hasError("required")&&a.f.contact_person.touched?"is-invalid":""),t.yG2(),t.C0Y(144,a.f.contact_person&&a.f.contact_person.hasError("required")&&a.f.contact_person.touched?144:-1),t.yG2(7),t.E7m("ngClass",a.f.email&&a.f.email.hasError("required")&&a.f.email.touched?"is-invalid":""),t.yG2(),t.C0Y(152,a.f.email&&a.f.email.hasError("required")&&a.f.email.touched?152:-1),t.yG2(),t.C0Y(153,a.f.email.hasError("pattern")?153:-1),t.yG2(7),t.E7m("ngClass",a.f.mobile&&a.f.mobile.hasError("required")&&a.f.mobile.touched?"is-invalid":""),t.yG2(),t.C0Y(161,a.f.mobile&&a.f.mobile.hasError("required")&&a.f.mobile.touched?161:-1),t.yG2(),t.C0Y(162,a.f.mobile.hasError("pattern")?162:-1),t.yG2(14),t.E7m("ngClass",a.f.city&&a.f.city.hasError("required")&&a.f.city.touched?"is-invalid":""),t.yG2(),t.C0Y(177,a.f.city&&a.f.city.hasError("required")&&a.f.city.touched?177:-1),t.yG2(7),t.E7m("ngClass",a.f.state&&a.f.state.hasError("required")&&a.f.state.touched?"is-invalid":""),t.yG2(),t.C0Y(185,a.f.state&&a.f.state.hasError("required")&&a.f.state.touched?185:-1),t.yG2(7),t.E7m("ngClass",a.f.zip_code&&a.f.zip_code.hasError("required")&&a.f.zip_code.touched?"is-invalid":""),t.yG2(),t.C0Y(193,a.f.zip_code&&a.f.zip_code.hasError("required")&&a.f.zip_code.touched?193:-1),t.yG2(7),t.E7m("ngClass",t.S45(57,ka,a.f.address&&a.f.address.errors&&a.f.address.touched)),t.yG2(),t.C0Y(201,a.f.address&&a.f.address.hasError("required")&&a.f.address.touched?201:-1),t.yG2(),t.C0Y(202,a.f.address&&a.f.address.hasError("maxlength")&&a.f.address.touched?202:-1),t.yG2(12),t.E7m("type",a.fieldTextType1?"text":"password")("ngClass",t.S45(59,ka,a.f.password.hasError("required")&&a.f.password.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(61,Ma,!a.fieldTextType1,a.fieldTextType1)),t.yG2(),t.E7m("ngIf",a.f.password.hasError("required")&&a.f.password.touched),t.yG2(6),t.E7m("type",a.fieldTextType2?"text":"password")("ngClass",t.S45(64,ka,a.f.confirmPassword.hasError("required")&&a.f.confirmPassword.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(66,Ma,!a.fieldTextType2,a.fieldTextType2)),t.yG2(),t.E7m("ngIf",a.f.confirmPassword.hasError("required")&&a.f.confirmPassword.touched),t.yG2(),t.E7m("ngIf",a.formGroup.hasError("mismatch")&&(null==a.f.confirmPassword?null:a.f.confirmPassword.value)&&(null==a.f.password?null:a.f.password.value)),t.yG2(7),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(241,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?241:-1),t.yG2(3),t.C0Y(244,a.saveButtonActive?244:245),t.yG2(2),t.C0Y(246,a.f.password&&a.f.password.hasError("pattern")?246:-1),t.yG2(),t.C0Y(247,a.spinnerStatus?247:-1))},dependencies:[Me.QF,Me.u_,We.O,j.sz,j.wd,j.GO,j.ot,j.O4,j.GC,j.ue,j.u,j.uW,j.Wo],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}.match-parent[_ngcontent-%COMP%]{width:100%;height:500px}.mt-n5[_ngcontent-%COMP%]{margin-top:-5rem!important}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return n})();var $n=Zt(4940),ar={version:"0.18.5"},Sn=1200,Dn=1252,Gr=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Vn={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},rn=function(n){-1!=Gr.indexOf(n)&&(Dn=Vn[0]=n)},lr=function(n){Sn=n,rn(n)};function Pa(){lr(1200),function ur(){rn(1252)}()}function Ga(n){for(var i=[],e=0,r=n.length;e<r;++e)i[e]=n.charCodeAt(e);return i}function Ra(n){for(var i=[],e=0;e<n.length>>1;++e)i[e]=String.fromCharCode(n.charCodeAt(2*e+1)+(n.charCodeAt(2*e)<<8));return i.join("")}var Mr,ha=function(n){var i=n.charCodeAt(0),e=n.charCodeAt(1);return 255==i&&254==e?function Ja(n){for(var i=[],e=0;e<n.length>>1;++e)i[e]=String.fromCharCode(n.charCodeAt(2*e)+(n.charCodeAt(2*e+1)<<8));return i.join("")}(n.slice(2)):254==i&&255==e?Ra(n.slice(2)):65279==i?n.slice(1):n},xr=function(i){return String.fromCharCode(i)},da=function(i){return String.fromCharCode(i)},Dr=null,fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ia(n){for(var i="",e=0,r=0,a=0,o=0,d=0,p=0,D=0,P=0;P<n.length;)o=(e=n.charCodeAt(P++))>>2,d=(3&e)<<4|(r=n.charCodeAt(P++))>>4,p=(15&r)<<2|(a=n.charCodeAt(P++))>>6,D=63&a,isNaN(r)?p=D=64:isNaN(a)&&(D=64),i+=fa.charAt(o)+fa.charAt(d)+fa.charAt(p)+fa.charAt(D);return i}function Fa(n){var i="",o=0,d=0,p=0,D=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var P=0;P<n.length;)o=fa.indexOf(n.charAt(P++)),d=fa.indexOf(n.charAt(P++)),i+=String.fromCharCode(o<<2|d>>4),64!==(p=fa.indexOf(n.charAt(P++)))&&(i+=String.fromCharCode((15&d)<<4|p>>2)),64!==(D=fa.indexOf(n.charAt(P++)))&&(i+=String.fromCharCode((3&p)<<6|D));return i}var Et=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),je=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(i,e){return e?new Buffer(i,e):new Buffer(i)}:Buffer.from.bind(Buffer)}return function(){}}();function Je(n){return Et?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function At(n){return Et?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var kt=function(i){return Et?je(i,"binary"):i.split("").map(function(e){return 255&e.charCodeAt(0)})};function ai(n){if(typeof ArrayBuffer>"u")return kt(n);for(var i=new ArrayBuffer(n.length),e=new Uint8Array(i),r=0;r!=n.length;++r)e[r]=255&n.charCodeAt(r);return i}function Ci(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var i=[],e=0;e<n.length;++e)i[e]=String.fromCharCode(n[e]);return i.join("")}function Mt(n){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(n instanceof ArrayBuffer)return Mt(new Uint8Array(n));for(var i=new Array(n.length),e=0;e<n.length;++e)i[e]=n[e];return i}var Bi=Et?function(n){return Buffer.concat(n.map(function(i){return Buffer.isBuffer(i)?i:je(i)}))}:function(n){if(typeof Uint8Array<"u"){var i=0,e=0;for(i=0;i<n.length;++i)e+=n[i].length;var r=new Uint8Array(e),a=0;for(i=0,e=0;i<n.length;e+=a,++i)if(a=n[i].length,n[i]instanceof Uint8Array)r.set(n[i],e);else{if("string"==typeof n[i])throw"wtf";r.set(new Uint8Array(n[i]),e)}return r}return[].concat.apply([],n.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))},_n=/\u0000/g,Vi=/[\u0001-\u0006]/g;function Qn(n){for(var i="",e=n.length-1;e>=0;)i+=n.charAt(e--);return i}function Yt(n,i){var e=""+n;return e.length>=i?e:ra("0",i-e.length)+e}function Ut(n,i){var e=""+n;return e.length>=i?e:ra(" ",i-e.length)+e}function vt(n,i){var e=""+n;return e.length>=i?e:e+ra(" ",i-e.length)}var rt=Math.pow(2,32);function Ot(n,i){return n>rt||n<-rt?function pt(n,i){var e=""+Math.round(n);return e.length>=i?e:ra("0",i-e.length)+e}(n,i):function Ke(n,i){var e=""+n;return e.length>=i?e:ra("0",i-e.length)+e}(Math.round(n),i)}function ci(n,i){return n.length>=7+(i=i||0)&&103==(32|n.charCodeAt(i))&&101==(32|n.charCodeAt(i+1))&&110==(32|n.charCodeAt(i+2))&&101==(32|n.charCodeAt(i+3))&&114==(32|n.charCodeAt(i+4))&&97==(32|n.charCodeAt(i+5))&&108==(32|n.charCodeAt(i+6))}var en=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],$i=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],st={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Bt={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ke={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function wt(n,i,e){for(var r=n<0?-1:1,a=n*r,o=0,d=1,p=0,D=1,P=0,B=0,te=Math.floor(a);P<i&&(p=(te=Math.floor(a))*d+o,B=te*P+D,!(a-te<5e-8));)a=1/(a-te),o=d,d=p,D=P,P=B;if(B>i&&(P>i?(B=D,p=o):(B=P,p=d)),!e)return[0,r*p,B];var ae=Math.floor(r*p/B);return[ae,r*p-ae*B,B]}function jt(n,i,e){if(n>2958465||n<0)return null;var r=0|n,a=Math.floor(86400*(n-r)),o=0,d=[],p={D:r,T:a,u:86400*(n-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(p.u)<1e-6&&(p.u=0),i&&i.date1904&&(r+=1462),p.u>.9999&&(p.u=0,86400==++a&&(p.T=a=0,++r,++p.D)),60===r)d=e?[1317,10,29]:[1900,2,29],o=3;else if(0===r)d=e?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var D=new Date(1900,0,1);D.setDate(D.getDate()+r-1),d=[D.getFullYear(),D.getMonth()+1,D.getDate()],o=D.getDay(),r<60&&(o=(o+6)%7),e&&(o=function N(n,i){i[0]-=581;var e=n.getDay();return n<60&&(e=(e+6)%7),e}(D,d))}return p.y=d[0],p.m=d[1],p.d=d[2],p.S=a%60,a=Math.floor(a/60),p.M=a%60,a=Math.floor(a/60),p.H=a,p.q=o,p}var Xe=new Date(1899,11,31,0,0,0),Qt=Xe.getTime(),ve=new Date(1900,2,1,0,0,0);function l(n,i){var e=n.getTime();return i?e-=1262304e5:n>=ve&&(e+=864e5),(e-(Qt+6e4*(n.getTimezoneOffset()-Xe.getTimezoneOffset())))/864e5}function u(n){return-1==n.indexOf(".")?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function E(n){var e,i=Math.floor(Math.log(Math.abs(n))*Math.LOG10E);return e=i>=-4&&i<=-1?n.toPrecision(10+i):Math.abs(i)<=9?function x(n){var i=n<0?12:11,e=u(n.toFixed(12));return e.length<=i||(e=n.toPrecision(10)).length<=i?e:n.toExponential(5)}(n):10===i?n.toFixed(10).substr(0,12):function w(n){var i=u(n.toFixed(11));return i.length>(n<0?12:11)||"0"===i||"-0"===i?n.toPrecision(6):i}(n),u(function m(n){return-1==n.indexOf("E")?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(e.toUpperCase()))}function M(n,i){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(0|n)===n?n.toString(10):E(n);case"undefined":return"";case"object":if(null==n)return"";if(n instanceof Date)return va(14,l(n,i&&i.date1904),i)}throw new Error("unsupported value in General format: "+n)}function H(n,i,e,r){var D,a="",o=0,d=0,p=e.y,P=0;switch(n){case 98:p=e.y+543;case 121:switch(i.length){case 1:case 2:D=p%100,P=2;break;default:D=p%1e4,P=4}break;case 109:switch(i.length){case 1:case 2:D=e.m,P=i.length;break;case 3:return $i[e.m-1][1];case 5:return $i[e.m-1][0];default:return $i[e.m-1][2]}break;case 100:switch(i.length){case 1:case 2:D=e.d,P=i.length;break;case 3:return en[e.q][0];default:return en[e.q][1]}break;case 104:switch(i.length){case 1:case 2:D=1+(e.H+11)%12,P=i.length;break;default:throw"bad hour format: "+i}break;case 72:switch(i.length){case 1:case 2:D=e.H,P=i.length;break;default:throw"bad hour format: "+i}break;case 77:switch(i.length){case 1:case 2:D=e.M,P=i.length;break;default:throw"bad minute format: "+i}break;case 115:if("s"!=i&&"ss"!=i&&".0"!=i&&".00"!=i&&".000"!=i)throw"bad second format: "+i;return 0!==e.u||"s"!=i&&"ss"!=i?(d=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(d*(e.S+e.u)))>=60*d&&(o=0),"s"===i?0===o?"0":""+o/d:(a=Yt(o,2+r),"ss"===i?a.substr(0,2):"."+a.substr(2,i.length-1))):Yt(e.S,i.length);case 90:switch(i){case"[h]":case"[hh]":D=24*e.D+e.H;break;case"[m]":case"[mm]":D=60*(24*e.D+e.H)+e.M;break;case"[s]":case"[ss]":D=60*(60*(24*e.D+e.H)+e.M)+Math.round(e.S+e.u);break;default:throw"bad abstime format: "+i}P=3===i.length?1:2;break;case 101:D=p,P=1}return P>0?Yt(D,P):""}function Z(n){if(n.length<=3)return n;for(var e=n.length%3,r=n.substr(0,e);e!=n.length;e+=3)r+=(r.length>0?",":"")+n.substr(e,3);return r}var J=/%/g;function ye(n,i){var e,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(0==i)return"0.0E+0";if(i<0)return"-"+ye(n,-i);var a=n.indexOf(".");-1===a&&(a=n.indexOf("E"));var o=Math.floor(Math.log(i)*Math.LOG10E)%a;if(o<0&&(o+=a),-1===(e=(i/Math.pow(10,o)).toPrecision(r+1+(a+o)%a)).indexOf("e")){var d=Math.floor(Math.log(i)*Math.LOG10E);for(-1===e.indexOf(".")?e=e.charAt(0)+"."+e.substr(1)+"E+"+(d-e.length+o):e+="E+"+(d-o);"0."===e.substr(0,2);)e=(e=e.charAt(0)+e.substr(2,a)+"."+e.substr(2+a)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(p,D,P,B){return D+P+B.substr(0,(a+o)%a)+"."+B.substr(o)+"E"})}else e=i.toExponential(r);return n.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),n.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}var De=/# (\?+)( ?)\/( ?)(\d+)/,ze=/^#*0*\.([0#]+)/,U=/\).*[0#]/,le=/\(###\) ###\\?-####/;function we(n){for(var e,i="",r=0;r!=n.length;++r)switch(e=n.charCodeAt(r)){case 35:break;case 63:i+=" ";break;case 48:i+="0";break;default:i+=String.fromCharCode(e)}return i}function Le(n,i){var e=Math.pow(10,i);return""+Math.round(n*e)/e}function $e(n,i){var e=n-Math.floor(n),r=Math.pow(10,i);return i<(""+Math.round(e*r)).length?0:Math.round(e*r)}function Xt(n,i,e){if(40===n.charCodeAt(0)&&!i.match(U)){var r=i.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?Xt("n",r,e):"("+Xt("n",r,-e)+")"}if(44===i.charCodeAt(i.length-1))return function fe(n,i,e){for(var r=i.length-1;44===i.charCodeAt(r-1);)--r;return cr(n,i.substr(0,r),e/Math.pow(10,3*(i.length-r)))}(n,i,e);if(-1!==i.indexOf("%"))return function ne(n,i,e){var r=i.replace(J,""),a=i.length-r.length;return cr(n,r,e*Math.pow(10,2*a))+ra("%",a)}(n,i,e);if(-1!==i.indexOf("E"))return ye(i,e);if(36===i.charCodeAt(0))return"$"+Xt(n,i.substr(" "==i.charAt(1)?2:1),e);var a,o,d,p,D=Math.abs(e),P=e<0?"-":"";if(i.match(/^00+$/))return P+Ot(D,i.length);if(i.match(/^[#?]+$/))return"0"===(a=Ot(e,0))&&(a=""),a.length>i.length?a:we(i.substr(0,i.length-a.length))+a;if(o=i.match(De))return function Pe(n,i,e){var r=parseInt(n[4],10),a=Math.round(i*r),o=Math.floor(a/r),d=a-o*r,p=r;return e+(0===o?"":""+o)+" "+(0===d?ra(" ",n[1].length+1+n[4].length):Ut(d,n[1].length)+n[2]+"/"+n[3]+Yt(p,n[4].length))}(o,D,P);if(i.match(/^#+0+$/))return P+Ot(D,i.length-i.indexOf("0"));if(o=i.match(ze))return a=Le(e,o[1].length).replace(/^([^\.]+)$/,"$1."+we(o[1])).replace(/\.$/,"."+we(o[1])).replace(/\.(\d*)$/,function(ge,ue){return"."+ue+ra("0",we(o[1]).length-ue.length)}),-1!==i.indexOf("0.")?a:a.replace(/^0\./,".");if(i=i.replace(/^#+([0.])/,"$1"),o=i.match(/^(0*)\.(#*)$/))return P+Le(D,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=i.match(/^#{1,3},##0(\.?)$/))return P+Z(Ot(D,0));if(o=i.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+Xt(n,i,-e):Z(""+(Math.floor(e)+function mt(n,i){return i<(""+Math.round((n-Math.floor(n))*Math.pow(10,i))).length?1:0}(e,o[1].length)))+"."+Yt($e(e,o[1].length),o[1].length);if(o=i.match(/^#,#*,#0/))return Xt(n,i.replace(/^#,#*,/,""),e);if(o=i.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Qn(Xt(n,i.replace(/[\\-]/g,""),e)),d=0,Qn(Qn(i.replace(/\\/g,"")).replace(/[0#]/g,function(ge){return d<a.length?a.charAt(d++):"0"===ge?"0":""}));if(i.match(le))return"("+(a=Xt(n,"##########",e)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var B="";if(o=i.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(o[4].length,7),p=wt(D,Math.pow(10,d)-1,!1),a=""+P," "==(B=cr("n",o[1],p[1])).charAt(B.length-1)&&(B=B.substr(0,B.length-1)+"0"),a+=B+o[2]+"/"+o[3],(B=vt(p[2],d)).length<o[4].length&&(B=we(o[4].substr(o[4].length-B.length))+B),a+=B;if(o=i.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(o[1].length,o[4].length),7),P+((p=wt(D,Math.pow(10,d)-1,!0))[0]||(p[1]?"":"0"))+" "+(p[1]?Ut(p[1],d)+o[2]+"/"+o[3]+vt(p[2],d):ra(" ",2*d+1+o[2].length+o[3].length));if(o=i.match(/^[#0?]+$/))return a=Ot(e,0),i.length<=a.length?a:we(i.substr(0,i.length-a.length))+a;if(o=i.match(/^([#0?]+)\.([#0]+)$/)){a=""+e.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),d=a.indexOf(".");var te=i.indexOf(".")-d,ae=i.length-a.length-te;return we(i.substr(0,te)+a+i.substr(i.length-ae))}if(o=i.match(/^00,000\.([#0]*0)$/))return d=$e(e,o[1].length),e<0?"-"+Xt(n,i,-e):Z(function $t(n){return n<2147483647&&n>-2147483648?""+(n>=0?0|n:n-1|0):""+Math.floor(n)}(e)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(ge){return"00,"+(ge.length<3?Yt(0,3-ge.length):"")+ge})+"."+Yt(d,o[1].length);switch(i){case"###,##0.00":return Xt(n,"#,##0.00",e);case"###,###":case"##,###":case"#,###":var oe=Z(Ot(D,0));return"0"!==oe?P+oe:"";case"###,###.00":return Xt(n,"###,##0.00",e).replace(/^0\./,".");case"#,###.00":return Xt(n,"#,##0.00",e).replace(/^0\./,".")}throw new Error("unsupported format |"+i+"|")}function ln(n,i){var e,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(0==i)return"0.0E+0";if(i<0)return"-"+ln(n,-i);var a=n.indexOf(".");-1===a&&(a=n.indexOf("E"));var o=Math.floor(Math.log(i)*Math.LOG10E)%a;if(o<0&&(o+=a),!(e=(i/Math.pow(10,o)).toPrecision(r+1+(a+o)%a)).match(/[Ee]/)){var d=Math.floor(Math.log(i)*Math.LOG10E);-1===e.indexOf(".")?e=e.charAt(0)+"."+e.substr(1)+"E+"+(d-e.length+o):e+="E+"+(d-o),e=e.replace(/\+-/,"-")}e=e.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(p,D,P,B){return D+P+B.substr(0,(a+o)%a)+"."+B.substr(o)+"E"})}else e=i.toExponential(r);return n.match(/E\+00$/)&&e.match(/e[+-]\d$/)&&(e=e.substr(0,e.length-1)+"0"+e.charAt(e.length-1)),n.match(/E\-/)&&e.match(/e\+/)&&(e=e.replace(/e\+/,"e")),e.replace("e","E")}function Un(n,i,e){if(40===n.charCodeAt(0)&&!i.match(U)){var r=i.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return e>=0?Un("n",r,e):"("+Un("n",r,-e)+")"}if(44===i.charCodeAt(i.length-1))return function Li(n,i,e){for(var r=i.length-1;44===i.charCodeAt(r-1);)--r;return cr(n,i.substr(0,r),e/Math.pow(10,3*(i.length-r)))}(n,i,e);if(-1!==i.indexOf("%"))return function Ji(n,i,e){var r=i.replace(J,""),a=i.length-r.length;return cr(n,r,e*Math.pow(10,2*a))+ra("%",a)}(n,i,e);if(-1!==i.indexOf("E"))return ln(i,e);if(36===i.charCodeAt(0))return"$"+Un(n,i.substr(" "==i.charAt(1)?2:1),e);var a,o,d,p,D=Math.abs(e),P=e<0?"-":"";if(i.match(/^00+$/))return P+Yt(D,i.length);if(i.match(/^[#?]+$/))return a=""+e,0===e&&(a=""),a.length>i.length?a:we(i.substr(0,i.length-a.length))+a;if(o=i.match(De))return function Se(n,i,e){return e+(0===i?"":""+i)+ra(" ",n[1].length+2+n[4].length)}(o,D,P);if(i.match(/^#+0+$/))return P+Yt(D,i.length-i.indexOf("0"));if(o=i.match(ze))return a=(a=(""+e).replace(/^([^\.]+)$/,"$1."+we(o[1])).replace(/\.$/,"."+we(o[1]))).replace(/\.(\d*)$/,function(ge,ue){return"."+ue+ra("0",we(o[1]).length-ue.length)}),-1!==i.indexOf("0.")?a:a.replace(/^0\./,".");if(i=i.replace(/^#+([0.])/,"$1"),o=i.match(/^(0*)\.(#*)$/))return P+(""+D).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=i.match(/^#{1,3},##0(\.?)$/))return P+Z(""+D);if(o=i.match(/^#,##0\.([#0]*0)$/))return e<0?"-"+Un(n,i,-e):Z(""+e)+"."+ra("0",o[1].length);if(o=i.match(/^#,#*,#0/))return Un(n,i.replace(/^#,#*,/,""),e);if(o=i.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Qn(Un(n,i.replace(/[\\-]/g,""),e)),d=0,Qn(Qn(i.replace(/\\/g,"")).replace(/[0#]/g,function(ge){return d<a.length?a.charAt(d++):"0"===ge?"0":""}));if(i.match(le))return"("+(a=Un(n,"##########",e)).substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var B="";if(o=i.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(o[4].length,7),p=wt(D,Math.pow(10,d)-1,!1),a=""+P," "==(B=cr("n",o[1],p[1])).charAt(B.length-1)&&(B=B.substr(0,B.length-1)+"0"),a+=B+o[2]+"/"+o[3],(B=vt(p[2],d)).length<o[4].length&&(B=we(o[4].substr(o[4].length-B.length))+B),a+=B;if(o=i.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return d=Math.min(Math.max(o[1].length,o[4].length),7),P+((p=wt(D,Math.pow(10,d)-1,!0))[0]||(p[1]?"":"0"))+" "+(p[1]?Ut(p[1],d)+o[2]+"/"+o[3]+vt(p[2],d):ra(" ",2*d+1+o[2].length+o[3].length));if(o=i.match(/^[#0?]+$/))return i.length<=(a=""+e).length?a:we(i.substr(0,i.length-a.length))+a;if(o=i.match(/^([#0]+)\.([#0]+)$/)){a=""+e.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),d=a.indexOf(".");var te=i.indexOf(".")-d,ae=i.length-a.length-te;return we(i.substr(0,te)+a+i.substr(i.length-ae))}if(o=i.match(/^00,000\.([#0]*0)$/))return e<0?"-"+Un(n,i,-e):Z(""+e).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(ge){return"00,"+(ge.length<3?Yt(0,3-ge.length):"")+ge})+"."+Yt(0,o[1].length);switch(i){case"###,###":case"##,###":case"#,###":var oe=Z(""+D);return"0"!==oe?P+oe:"";default:if(i.match(/\.[0#?]*$/))return Un(n,i.slice(0,i.lastIndexOf(".")),e)+we(i.slice(i.lastIndexOf(".")))}throw new Error("unsupported format |"+i+"|")}function cr(n,i,e){return(0|e)===e?Un(n,i,e):Xt(n,i,e)}var pa=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function la(n){for(var i=0,e="",r="";i<n.length;)switch(e=n.charAt(i)){case"G":ci(n,i)&&(i+=6),i++;break;case'"':for(;34!==n.charCodeAt(++i)&&i<n.length;);++i;break;case"\\":case"_":i+=2;break;case"@":++i;break;case"B":case"b":if("1"===n.charAt(i+1)||"2"===n.charAt(i+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===n.substr(i,3).toUpperCase()||"AM/PM"===n.substr(i,5).toUpperCase()||"\u4e0a\u5348/\u4e0b\u5348"===n.substr(i,5).toUpperCase())return!0;++i;break;case"[":for(r=e;"]"!==n.charAt(i++)&&i<n.length;)r+=n.charAt(i);if(r.match(pa))return!0;break;case".":case"0":case"#":for(;i<n.length&&("0#?.,E+-%".indexOf(e=n.charAt(++i))>-1||"\\"==e&&"-"==n.charAt(i+1)&&"0#".indexOf(n.charAt(i+2))>-1););break;case"?":for(;n.charAt(++i)===e;);break;case"*":++i,(" "==n.charAt(i)||"*"==n.charAt(i))&&++i;break;case"(":case")":++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;i<n.length&&"0123456789".indexOf(n.charAt(++i))>-1;);break;default:++i}return!1}var es=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ms(n,i){if(null==i)return!1;var e=parseFloat(i[2]);switch(i[1]){case"=":if(n==e)return!0;break;case">":if(n>e)return!0;break;case"<":if(n<e)return!0;break;case"<>":if(n!=e)return!0;break;case">=":if(n>=e)return!0;break;case"<=":if(n<=e)return!0}return!1}function va(n,i,e){null==e&&(e={});var r="";switch(typeof n){case"string":r="m/d/yy"==n&&e.dateNF?e.dateNF:n;break;case"number":null==(r=14==n&&e.dateNF?e.dateNF:(null!=e.table?e.table:st)[n])&&(r=e.table&&e.table[Bt[n]]||st[Bt[n]]),null==r&&(r=ke[n]||"General")}if(ci(r,0))return M(i,e);i instanceof Date&&(i=l(i,e.date1904));var a=function Is(n,i){var e=function Wr(n){for(var i=[],e=!1,r=0,a=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:e=!e;break;case 95:case 42:case 92:++r;break;case 59:i[i.length]=n.substr(a,r-a),a=r+1}if(i[i.length]=n.substr(a),!0===e)throw new Error("Format |"+n+"| unterminated string ");return i}(n),r=e.length,a=e[r-1].indexOf("@");if(r<4&&a>-1&&--r,e.length>4)throw new Error("cannot find right format for |"+e.join("|")+"|");if("number"!=typeof i)return[4,4===e.length||a>-1?e[e.length-1]:"@"];switch(e.length){case 1:e=a>-1?["General","General","General",e[0]]:[e[0],e[0],e[0],"@"];break;case 2:e=a>-1?[e[0],e[0],e[0],e[1]]:[e[0],e[1],e[0],"@"];break;case 3:e=a>-1?[e[0],e[1],e[0],e[2]]:[e[0],e[1],e[2],"@"]}var o=i>0?e[0]:i<0?e[1]:e[2];if(-1===e[0].indexOf("[")&&-1===e[1].indexOf("["))return[r,o];if(null!=e[0].match(/\[[=<>]/)||null!=e[1].match(/\[[=<>]/)){var d=e[0].match(es),p=e[1].match(es);return ms(i,d)?[r,e[0]]:ms(i,p)?[r,e[1]]:[r,e[null!=d&&null!=p?2:1]]}return[r,o]}(r,i);if(ci(a[1]))return M(i,e);if(!0===i)i="TRUE";else if(!1===i)i="FALSE";else if(""===i||null==i)return"";return function Ta(n,i,e,r){for(var P,B,te,a=[],o="",d=0,p="",D="t",ae="H";d<n.length;)switch(p=n.charAt(d)){case"G":if(!ci(n,d))throw new Error("unrecognized character "+p+" in "+n);a[a.length]={t:"G",v:"General"},d+=7;break;case'"':for(o="";34!==(te=n.charCodeAt(++d))&&d<n.length;)o+=String.fromCharCode(te);a[a.length]={t:"t",v:o},++d;break;case"\\":var oe=n.charAt(++d);a[a.length]={t:"("===oe||")"===oe?oe:"t",v:oe},++d;break;case"_":a[a.length]={t:"t",v:" "},d+=2;break;case"@":a[a.length]={t:"T",v:i},++d;break;case"B":case"b":if("1"===n.charAt(d+1)||"2"===n.charAt(d+1)){if(null==P&&null==(P=jt(i,e,"2"===n.charAt(d+1))))return"";a[a.length]={t:"X",v:n.substr(d,2)},D=p,d+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":p=p.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(i<0||null==P&&null==(P=jt(i,e)))return"";for(o=p;++d<n.length&&n.charAt(d).toLowerCase()===p;)o+=p;"m"===p&&"h"===D.toLowerCase()&&(p="M"),"h"===p&&(p=ae),a[a.length]={t:p,v:o},D=p;break;case"A":case"a":case"\u4e0a":var ue={t:p,v:p};if(null==P&&(P=jt(i,e)),"A/P"===n.substr(d,3).toUpperCase()?(null!=P&&(ue.v=P.H>=12?"P":"A"),ue.t="T",ae="h",d+=3):"AM/PM"===n.substr(d,5).toUpperCase()?(null!=P&&(ue.v=P.H>=12?"PM":"AM"),ue.t="T",d+=5,ae="h"):"\u4e0a\u5348/\u4e0b\u5348"===n.substr(d,5).toUpperCase()?(null!=P&&(ue.v=P.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),ue.t="T",d+=5,ae="h"):(ue.t="t",++d),null==P&&"T"===ue.t)return"";a[a.length]=ue,D=p;break;case"[":for(o=p;"]"!==n.charAt(d++)&&d<n.length;)o+=n.charAt(d);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(pa)){if(null==P&&null==(P=jt(i,e)))return"";a[a.length]={t:"Z",v:o.toLowerCase()},D=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",la(n)||(a[a.length]={t:"t",v:o}));break;case".":if(null!=P){for(o=p;++d<n.length&&"0"===(p=n.charAt(d));)o+=p;a[a.length]={t:"s",v:o};break}case"0":case"#":for(o=p;++d<n.length&&"0#?.,E+-%".indexOf(p=n.charAt(d))>-1;)o+=p;a[a.length]={t:"n",v:o};break;case"?":for(o=p;n.charAt(++d)===p;)o+=p;a[a.length]={t:p,v:o},D=p;break;case"*":++d,(" "==n.charAt(d)||"*"==n.charAt(d))&&++d;break;case"(":case")":a[a.length]={t:1===r?"t":p,v:p},++d;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=p;d<n.length&&"0123456789".indexOf(n.charAt(++d))>-1;)o+=n.charAt(d);a[a.length]={t:"D",v:o};break;case" ":a[a.length]={t:p,v:p},++d;break;case"$":a[a.length]={t:"t",v:"$"},++d;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(p))throw new Error("unrecognized character "+p+" in "+n);a[a.length]={t:"t",v:p},++d}var ht,Te=0,qe=0;for(d=a.length-1,D="t";d>=0;--d)switch(a[d].t){case"h":case"H":a[d].t=ae,D="h",Te<1&&(Te=1);break;case"s":(ht=a[d].v.match(/\.0+$/))&&(qe=Math.max(qe,ht[0].length-1)),Te<3&&(Te=3);case"d":case"y":case"M":case"e":D=a[d].t;break;case"m":"s"===D&&(a[d].t="M",Te<2&&(Te=2));break;case"X":break;case"Z":Te<1&&a[d].v.match(/[Hh]/)&&(Te=1),Te<2&&a[d].v.match(/[Mm]/)&&(Te=2),Te<3&&a[d].v.match(/[Ss]/)&&(Te=3)}switch(Te){case 0:break;case 1:P.u>=.5&&(P.u=0,++P.S),P.S>=60&&(P.S=0,++P.M),P.M>=60&&(P.M=0,++P.H);break;case 2:P.u>=.5&&(P.u=0,++P.S),P.S>=60&&(P.S=0,++P.M)}var mi,ut="";for(d=0;d<a.length;++d)switch(a[d].t){case"t":case"T":case" ":case"D":break;case"X":a[d].v="",a[d].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[d].v=H(a[d].t.charCodeAt(0),a[d].v,P,qe),a[d].t="t";break;case"n":case"?":for(mi=d+1;null!=a[mi]&&("?"===(p=a[mi].t)||"D"===p||(" "===p||"t"===p)&&null!=a[mi+1]&&("?"===a[mi+1].t||"t"===a[mi+1].t&&"/"===a[mi+1].v)||"("===a[d].t&&(" "===p||"n"===p||")"===p)||"t"===p&&("/"===a[mi].v||" "===a[mi].v&&null!=a[mi+1]&&"?"==a[mi+1].t));)a[d].v+=a[mi].v,a[mi]={v:"",t:";"},++mi;ut+=a[d].v,d=mi-1;break;case"G":a[d].t="t",a[d].v=M(i,e)}var vi,Vt,zi="";if(ut.length>0){40==ut.charCodeAt(0)?(vi=i<0&&45===ut.charCodeAt(0)?-i:i,Vt=cr("n",ut,vi)):(Vt=cr("n",ut,vi=i<0&&r>1?-i:i),vi<0&&a[0]&&"t"==a[0].t&&(Vt=Vt.substr(1),a[0].v="-"+a[0].v)),mi=Vt.length-1;var wi=a.length;for(d=0;d<a.length;++d)if(null!=a[d]&&"t"!=a[d].t&&a[d].v.indexOf(".")>-1){wi=d;break}var Yi=a.length;if(wi===a.length&&-1===Vt.indexOf("E")){for(d=a.length-1;d>=0;--d)null==a[d]||-1==="n?".indexOf(a[d].t)||(mi>=a[d].v.length-1?a[d].v=Vt.substr(1+(mi-=a[d].v.length),a[d].v.length):mi<0?a[d].v="":(a[d].v=Vt.substr(0,mi+1),mi=-1),a[d].t="t",Yi=d);mi>=0&&Yi<a.length&&(a[Yi].v=Vt.substr(0,mi+1)+a[Yi].v)}else if(wi!==a.length&&-1===Vt.indexOf("E")){for(mi=Vt.indexOf(".")-1,d=wi;d>=0;--d)if(null!=a[d]&&-1!=="n?".indexOf(a[d].t)){for(B=a[d].v.indexOf(".")>-1&&d===wi?a[d].v.indexOf(".")-1:a[d].v.length-1,zi=a[d].v.substr(B+1);B>=0;--B)mi>=0&&("0"===a[d].v.charAt(B)||"#"===a[d].v.charAt(B))&&(zi=Vt.charAt(mi--)+zi);a[d].v=zi,a[d].t="t",Yi=d}for(mi>=0&&Yi<a.length&&(a[Yi].v=Vt.substr(0,mi+1)+a[Yi].v),mi=Vt.indexOf(".")+1,d=wi;d<a.length;++d)if(null!=a[d]&&(-1!=="n?(".indexOf(a[d].t)||d===wi)){for(B=a[d].v.indexOf(".")>-1&&d===wi?a[d].v.indexOf(".")+1:0,zi=a[d].v.substr(0,B);B<a[d].v.length;++B)mi<Vt.length&&(zi+=Vt.charAt(mi++));a[d].v=zi,a[d].t="t",Yi=d}}}for(d=0;d<a.length;++d)null!=a[d]&&"n?".indexOf(a[d].t)>-1&&(a[d].v=cr(a[d].t,a[d].v,vi=r>1&&i<0&&d>0&&"-"===a[d-1].v?-i:i),a[d].t="t");var hn="";for(d=0;d!==a.length;++d)null!=a[d]&&(hn+=a[d].v);return hn}(a[1],i,e,a[0])}function Qr(n,i){if("number"!=typeof i){i=+i||-1;for(var e=0;e<392;++e)if(null!=st[e]){if(st[e]==n){i=e;break}}else i<0&&(i=e);i<0&&(i=391)}return st[i]=n,i}function Ms(n){for(var i=0;392!=i;++i)void 0!==n[i]&&Qr(n[i],i)}function na(){st=function En(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',n}()}var Ku={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Pc=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,Rd=function(){var n={version:"1.2.0"},e=function i(){for(var Vt=0,wi=new Array(256),Yi=0;256!=Yi;++Yi)wi[Yi]=Vt=1&(Vt=1&(Vt=1&(Vt=1&(Vt=1&(Vt=1&(Vt=1&(Vt=1&(Vt=Yi)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1)?-306674912^Vt>>>1:Vt>>>1;return typeof Int32Array<"u"?new Int32Array(wi):wi}(),a=function r(Vt){var wi=0,Yi=0,hn=0,Tn=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(hn=0;256!=hn;++hn)Tn[hn]=Vt[hn];for(hn=0;256!=hn;++hn)for(Yi=Vt[hn],wi=256+hn;wi<4096;wi+=256)Yi=Tn[wi]=Yi>>>8^Vt[255&Yi];var Wi=[];for(hn=1;16!=hn;++hn)Wi[hn-1]=typeof Int32Array<"u"?Tn.subarray(256*hn,256*hn+256):Tn.slice(256*hn,256*hn+256);return Wi}(e),o=a[0],d=a[1],p=a[2],D=a[3],P=a[4],B=a[5],te=a[6],ae=a[7],oe=a[8],ge=a[9],ue=a[10],Te=a[11],qe=a[12],ht=a[13],ut=a[14];return n.table=e,n.bstr=function mi(Vt,wi){for(var Yi=-1^wi,hn=0,Tn=Vt.length;hn<Tn;)Yi=Yi>>>8^e[255&(Yi^Vt.charCodeAt(hn++))];return~Yi},n.buf=function zi(Vt,wi){for(var Yi=-1^wi,hn=Vt.length-15,Tn=0;Tn<hn;)Yi=ut[Vt[Tn++]^255&Yi]^ht[Vt[Tn++]^Yi>>8&255]^qe[Vt[Tn++]^Yi>>16&255]^Te[Vt[Tn++]^Yi>>>24]^ue[Vt[Tn++]]^ge[Vt[Tn++]]^oe[Vt[Tn++]]^ae[Vt[Tn++]]^te[Vt[Tn++]]^B[Vt[Tn++]]^P[Vt[Tn++]]^D[Vt[Tn++]]^p[Vt[Tn++]]^d[Vt[Tn++]]^o[Vt[Tn++]]^e[Vt[Tn++]];for(hn+=15;Tn<hn;)Yi=Yi>>>8^e[255&(Yi^Vt[Tn++])];return~Yi},n.str=function vi(Vt,wi){for(var Yi=-1^wi,hn=0,Tn=Vt.length,Wi=0,Cr=0;hn<Tn;)(Wi=Vt.charCodeAt(hn++))<128?Yi=Yi>>>8^e[255&(Yi^Wi)]:Wi<2048?Yi=(Yi=Yi>>>8^e[255&(Yi^(192|Wi>>6&31))])>>>8^e[255&(Yi^(128|63&Wi))]:Wi>=55296&&Wi<57344?(Wi=64+(1023&Wi),Cr=1023&Vt.charCodeAt(hn++),Yi=(Yi=(Yi=(Yi=Yi>>>8^e[255&(Yi^(240|Wi>>8&7))])>>>8^e[255&(Yi^(128|Wi>>2&63))])>>>8^e[255&(Yi^(128|Cr>>6&15|(3&Wi)<<4))])>>>8^e[255&(Yi^(128|63&Cr))]):Yi=(Yi=(Yi=Yi>>>8^e[255&(Yi^(224|Wi>>12&15))])>>>8^e[255&(Yi^(128|Wi>>6&63))])>>>8^e[255&(Yi^(128|63&Wi))];return~Yi},n}(),$r=function(){var D,i={};function r(ct){if("/"==ct.charAt(ct.length-1))return-1===ct.slice(0,-1).indexOf("/")?ct:r(ct.slice(0,-1));var qt=ct.lastIndexOf("/");return-1===qt?ct:ct.slice(0,qt+1)}function a(ct){if("/"==ct.charAt(ct.length-1))return a(ct.slice(0,-1));var qt=ct.lastIndexOf("/");return-1===qt?ct:ct.slice(qt+1)}function o(ct,qt){"string"==typeof qt&&(qt=new Date(qt));var Pt=qt.getHours();Pt=(Pt=Pt<<6|qt.getMinutes())<<5|qt.getSeconds()>>>1,ct.write_shift(2,Pt);var Ht=qt.getFullYear()-1980;Ht=(Ht=Ht<<4|qt.getMonth()+1)<<5|qt.getDate(),ct.write_shift(2,Ht)}function p(ct){v(ct,0);for(var qt={},Pt=0;ct.l<=ct.length-4;){var Ht=ct.read_shift(2),ei=ct.read_shift(2),ti=ct.l+ei,dn={};21589===Ht&&(1&(Pt=ct.read_shift(1))&&(dn.mtime=ct.read_shift(4)),ei>5&&(2&Pt&&(dn.atime=ct.read_shift(4)),4&Pt&&(dn.ctime=ct.read_shift(4))),dn.mtime&&(dn.mt=new Date(1e3*dn.mtime))),ct.l=ti,qt[Ht]=dn}return qt}function P(){return D||(D={})}function B(ct,qt){if(80==ct[0]&&75==ct[1])return Wy(ct,qt);if(109==(32|ct[0])&&105==(32|ct[1]))return function sa(ct,qt){if("mime-version:"!=Ur(ct.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var Pt=qt&&qt.root||"",Ht=(Et&&Buffer.isBuffer(ct)?ct.toString("binary"):Ur(ct)).split("\r\n"),ei=0,ti="";for(ei=0;ei<Ht.length;++ei)if(/^Content-Location:/i.test(ti=Ht[ei])&&(ti=ti.slice(ti.indexOf("file")),Pt||(Pt=ti.slice(0,ti.lastIndexOf("/")+1)),ti.slice(0,Pt.length)!=Pt))for(;Pt.length>0&&(Pt=(Pt=Pt.slice(0,Pt.length-1)).slice(0,Pt.lastIndexOf("/")+1),ti.slice(0,Pt.length)!=Pt););var dn=(Ht[1]||"").match(/boundary="(.*?)"/);if(!dn)throw new Error("MAD cannot find boundary");var zn="--"+(dn[1]||""),Cn={FileIndex:[],FullPaths:[]};Vt(Cn);var br,Lr=0;for(ei=0;ei<Ht.length;++ei){var ga=Ht[ei];ga!==zn&&ga!==zn+"--"||(Lr++&&Or(Cn,Ht.slice(br,ei),Pt),br=ei)}return Cn}(ct,qt);if(ct.length<512)throw new Error("CFB file size "+ct.length+" < 512");var Pt,ei,ti,dn,zn,gn,Ht=512,fn=[],Cn=ct.slice(0,512);v(Cn,0);var br=function te(ct){if(80==ct[ct.l]&&75==ct[ct.l+1])return[0,0];ct.chk(aa,"Header Signature: "),ct.l+=16;var qt=ct.read_shift(2,"u");return[ct.read_shift(2,"u"),qt]}(Cn);switch(Pt=br[0]){case 3:Ht=512;break;case 4:Ht=4096;break;case 0:if(0==br[1])return Wy(ct,qt);default:throw new Error("Major Version: Expected 3 or 4 saw "+Pt)}512!==Ht&&v(Cn=ct.slice(0,Ht),28);var Lr=ct.slice(0,Ht);!function ae(ct,qt){var Pt;switch(ct.l+=2,Pt=ct.read_shift(2)){case 9:if(3!=qt)throw new Error("Sector Shift: Expected 9 saw "+Pt);break;case 12:if(4!=qt)throw new Error("Sector Shift: Expected 12 saw "+Pt);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Pt)}ct.chk("0600","Mini Sector Shift: "),ct.chk("000000000000","Reserved: ")}(Cn,Pt);var ga=Cn.read_shift(4,"i");if(3===Pt&&0!==ga)throw new Error("# Directory Sectors: Expected 0 saw "+ga);Cn.l+=4,dn=Cn.read_shift(4,"i"),Cn.l+=4,Cn.chk("00100000","Mini Stream Cutoff Size: "),zn=Cn.read_shift(4,"i"),ei=Cn.read_shift(4,"i"),gn=Cn.read_shift(4,"i"),ti=Cn.read_shift(4,"i");for(var Yr=-1,Kr=0;Kr<109&&!((Yr=Cn.read_shift(4,"i"))<0);++Kr)fn[Kr]=Yr;var Gs=function oe(ct,qt){for(var Pt=Math.ceil(ct.length/qt)-1,Ht=[],ei=1;ei<Pt;++ei)Ht[ei-1]=ct.slice(ei*qt,(ei+1)*qt);return Ht[Pt-1]=ct.slice(Pt*qt),Ht}(ct,Ht);Te(gn,ti,Gs,Ht,fn);var yc=function ht(ct,qt,Pt,Ht){var ei=ct.length,ti=[],dn=[],zn=[],gn=[],fn=Ht-1,Cn=0,br=0,Lr=0,ga=0;for(Cn=0;Cn<ei;++Cn)if(zn=[],(Lr=Cn+qt)>=ei&&(Lr-=ei),!dn[Lr]){gn=[];var Yr=[];for(br=Lr;br>=0;){Yr[br]=!0,dn[br]=!0,zn[zn.length]=br,gn.push(ct[br]);var Kr=Pt[Math.floor(4*br/Ht)];if(Ht<4+(ga=4*br&fn))throw new Error("FAT boundary crossed: "+br+" 4 "+Ht);if(!ct[Kr]||Yr[br=kl(ct[Kr],ga)])break}ti[Lr]={nodes:zn,data:Yo([gn])}}return ti}(Gs,dn,fn,Ht);yc[dn].name="!Directory",ei>0&&zn!==Cr&&(yc[zn].name="!MiniFAT"),yc[fn[0]].name="!FAT",yc.fat_addrs=fn,yc.ssz=Ht;var Zu=[],Gf=[],Lx=[];(function ut(ct,qt,Pt,Ht,ei,ti,dn,zn){for(var ga,gn=0,fn=Ht.length?2:0,Cn=qt[ct].data,br=0,Lr=0;br<Cn.length;br+=128){var Yr=Cn.slice(br,br+128);v(Yr,64),Lr=Yr.read_shift(2),ga=El(Yr,0,Lr-fn),Ht.push(ga);var Kr={name:ga,type:Yr.read_shift(1),color:Yr.read_shift(1),L:Yr.read_shift(4,"i"),R:Yr.read_shift(4,"i"),C:Yr.read_shift(4,"i"),clsid:Yr.read_shift(16),state:Yr.read_shift(4,"i"),start:0,size:0};0!==Yr.read_shift(2)+Yr.read_shift(2)+Yr.read_shift(2)+Yr.read_shift(2)&&(Kr.ct=mi(Yr,Yr.l-8)),0!==Yr.read_shift(2)+Yr.read_shift(2)+Yr.read_shift(2)+Yr.read_shift(2)&&(Kr.mt=mi(Yr,Yr.l-8)),Kr.start=Yr.read_shift(4,"i"),Kr.size=Yr.read_shift(4,"i"),Kr.size<0&&Kr.start<0&&(Kr.size=Kr.type=0,Kr.start=Cr,Kr.name=""),5===Kr.type?(gn=Kr.start,ei>0&&gn!==Cr&&(qt[gn].name="!StreamData")):Kr.size>=4096?(Kr.storage="fat",void 0===qt[Kr.start]&&(qt[Kr.start]=qe(Pt,Kr.start,qt.fat_addrs,qt.ssz)),qt[Kr.start].name=Kr.name,Kr.content=qt[Kr.start].data.slice(0,Kr.size)):(Kr.storage="minifat",Kr.size<0?Kr.size=0:gn!==Cr&&Kr.start!==Cr&&qt[gn]&&(Kr.content=ue(Kr,qt[gn].data,(qt[zn]||{}).data))),Kr.content&&v(Kr.content,0),ti[ga]=Kr,dn.push(Kr)}})(dn,yc,Gs,Zu,ei,{},Gf,zn),function ge(ct,qt,Pt){for(var Ht=0,ei=0,ti=0,dn=0,zn=0,gn=Pt.length,fn=[],Cn=[];Ht<gn;++Ht)fn[Ht]=Cn[Ht]=Ht,qt[Ht]=Pt[Ht];for(;zn<Cn.length;++zn)ei=ct[Ht=Cn[zn]].L,ti=ct[Ht].R,dn=ct[Ht].C,fn[Ht]===Ht&&(-1!==ei&&fn[ei]!==ei&&(fn[Ht]=fn[ei]),-1!==ti&&fn[ti]!==ti&&(fn[Ht]=fn[ti])),-1!==dn&&(fn[dn]=Ht),-1!==ei&&Ht!=fn[Ht]&&(fn[ei]=fn[Ht],Cn.lastIndexOf(ei)<zn&&Cn.push(ei)),-1!==ti&&Ht!=fn[Ht]&&(fn[ti]=fn[Ht],Cn.lastIndexOf(ti)<zn&&Cn.push(ti));for(Ht=1;Ht<gn;++Ht)fn[Ht]===Ht&&(-1!==ti&&fn[ti]!==ti?fn[Ht]=fn[ti]:-1!==ei&&fn[ei]!==ei&&(fn[Ht]=fn[ei]));for(Ht=1;Ht<gn;++Ht)if(0!==ct[Ht].type){if((zn=Ht)!=fn[zn])do{qt[Ht]=qt[zn=fn[zn]]+"/"+qt[Ht]}while(0!==zn&&-1!==fn[zn]&&zn!=fn[zn]);fn[Ht]=-1}for(qt[0]+="/",Ht=1;Ht<gn;++Ht)2!==ct[Ht].type&&(qt[Ht]+="/")}(Gf,Lx,Zu),Zu.shift();var Px={FileIndex:Gf,FullPaths:Lx};return qt&&qt.raw&&(Px.raw={header:Lr,sectors:Gs}),Px}function ue(ct,qt,Pt){for(var ei=ct.size,ti=[],dn=ct.start;Pt&&ei>0&&dn>=0;)ti.push(qt.slice(dn*Wi,dn*Wi+Wi)),ei-=Wi,dn=kl(Pt,4*dn);return 0===ti.length?W(0):Bi(ti).slice(0,ct.size)}function Te(ct,qt,Pt,Ht,ei){var ti=Cr;if(ct===Cr){if(0!==qt)throw new Error("DIFAT chain shorter than expected")}else if(-1!==ct){var dn=Pt[ct],zn=(Ht>>>2)-1;if(!dn)return;for(var gn=0;gn<zn&&(ti=kl(dn,4*gn))!==Cr;++gn)ei.push(ti);Te(kl(dn,Ht-4),qt-1,Pt,Ht,ei)}}function qe(ct,qt,Pt,Ht,ei){var ti=[],dn=[];ei||(ei=[]);var zn=Ht-1,gn=0,fn=0;for(gn=qt;gn>=0;){ei[gn]=!0,ti[ti.length]=gn,dn.push(ct[gn]);var Cn=Pt[Math.floor(4*gn/Ht)];if(Ht<4+(fn=4*gn&zn))throw new Error("FAT boundary crossed: "+gn+" 4 "+Ht);if(!ct[Cn])break;gn=kl(ct[Cn],fn)}return{nodes:ti,data:Yo([dn])}}function mi(ct,qt){return new Date(1e3*(ho(ct,qt+4)/1e7*Math.pow(2,32)+ho(ct,qt)/1e7-11644473600))}function Vt(ct,qt){var Pt=qt||{},Ht=Pt.root||"Root Entry";if(ct.FullPaths||(ct.FullPaths=[]),ct.FileIndex||(ct.FileIndex=[]),ct.FullPaths.length!==ct.FileIndex.length)throw new Error("inconsistent CFB structure");0===ct.FullPaths.length&&(ct.FullPaths[0]=Ht+"/",ct.FileIndex[0]={name:Ht,type:5}),Pt.CLSID&&(ct.FileIndex[0].clsid=Pt.CLSID),function wi(ct){var qt="\x01Sh33tJ5";if(!$r.find(ct,"/"+qt)){var Pt=W(4);Pt[0]=55,Pt[1]=Pt[3]=50,Pt[2]=54,ct.FileIndex.push({name:qt,type:2,content:Pt,size:4,L:69,R:69,C:69}),ct.FullPaths.push(ct.FullPaths[0]+qt),Yi(ct)}}(ct)}function Yi(ct,qt){Vt(ct);for(var Pt=!1,Ht=!1,ei=ct.FullPaths.length-1;ei>=0;--ei){var ti=ct.FileIndex[ei];switch(ti.type){case 0:Ht?Pt=!0:(ct.FileIndex.pop(),ct.FullPaths.pop());break;case 1:case 2:case 5:Ht=!0,isNaN(ti.R*ti.L*ti.C)&&(Pt=!0),ti.R>-1&&ti.L>-1&&ti.R==ti.L&&(Pt=!0);break;default:Pt=!0}}if(Pt||qt){var dn=new Date(1987,1,19),zn=0,gn=Object.create?Object.create(null):{},fn=[];for(ei=0;ei<ct.FullPaths.length;++ei)gn[ct.FullPaths[ei]]=!0,0!==ct.FileIndex[ei].type&&fn.push([ct.FullPaths[ei],ct.FileIndex[ei]]);for(ei=0;ei<fn.length;++ei){var Cn=r(fn[ei][0]);(Ht=gn[Cn])||(fn.push([Cn,{name:a(Cn).replace("/",""),type:1,clsid:La,ct:dn,mt:dn,content:null}]),gn[Cn]=!0)}for(fn.sort(function(ga,Yr){return function e(ct,qt){for(var Pt=ct.split("/"),Ht=qt.split("/"),ei=0,ti=0,dn=Math.min(Pt.length,Ht.length);ei<dn;++ei){if(ti=Pt[ei].length-Ht[ei].length)return ti;if(Pt[ei]!=Ht[ei])return Pt[ei]<Ht[ei]?-1:1}return Pt.length-Ht.length}(ga[0],Yr[0])}),ct.FullPaths=[],ct.FileIndex=[],ei=0;ei<fn.length;++ei)ct.FullPaths[ei]=fn[ei][0],ct.FileIndex[ei]=fn[ei][1];for(ei=0;ei<fn.length;++ei){var br=ct.FileIndex[ei],Lr=ct.FullPaths[ei];if(br.name=a(Lr).replace("/",""),br.L=br.R=br.C=-(br.color=1),br.size=br.content?br.content.length:0,br.start=0,br.clsid=br.clsid||La,0===ei)br.C=fn.length>1?1:-1,br.size=0,br.type=5;else if("/"==Lr.slice(-1)){for(zn=ei+1;zn<fn.length&&r(ct.FullPaths[zn])!=Lr;++zn);for(br.C=zn>=fn.length?-1:zn,zn=ei+1;zn<fn.length&&r(ct.FullPaths[zn])!=r(Lr);++zn);br.R=zn>=fn.length?-1:zn,br.type=1}else r(ct.FullPaths[ei+1]||"")==r(Lr)&&(br.R=ei+1),br.type=2}}}function hn(ct,qt){var Pt=qt||{};if("mad"==Pt.fileType)return function js(ct,qt){for(var Pt=qt||{},Ht=Pt.boundary||"SheetJS",ei=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(Ht="------="+Ht).slice(2)+'"',"","",""],ti=ct.FullPaths[0],dn=ti,zn=ct.FileIndex[0],gn=1;gn<ct.FullPaths.length;++gn)if(dn=ct.FullPaths[gn].slice(ti.length),(zn=ct.FileIndex[gn]).size&&zn.content&&"\x01Sh33tJ5"!=dn){dn=dn.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Gs){return"_x"+Gs.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Gs){return"_u"+Gs.charCodeAt(0).toString(16)+"_"});for(var fn=zn.content,Cn=Et&&Buffer.isBuffer(fn)?fn.toString("binary"):Ur(fn),br=0,Lr=Math.min(1024,Cn.length),ga=0,Yr=0;Yr<=Lr;++Yr)(ga=Cn.charCodeAt(Yr))>=32&&ga<128&&++br;var Kr=br>=4*Lr/5;ei.push(Ht),ei.push("Content-Location: "+(Pt.root||"file:///C:/SheetJS/")+dn),ei.push("Content-Transfer-Encoding: "+(Kr?"quoted-printable":"base64")),ei.push("Content-Type: "+Nt(zn,dn)),ei.push(""),ei.push(Kr?qi(Cn):Kt(Cn))}return ei.push(Ht+"--\r\n"),ei.join("\r\n")}(ct,Pt);if("zip"===(Yi(ct),Pt.fileType))return function fE(ct,qt){var Pt=qt||{},Ht=[],ei=[],ti=W(1),dn=Pt.compression?8:0,zn=0,fn=0,Cn=0,br=0,Lr=0,ga=ct.FullPaths[0],Yr=ga,Kr=ct.FileIndex[0],Gs=[],yc=0;for(fn=1;fn<ct.FullPaths.length;++fn)if(Yr=ct.FullPaths[fn].slice(ga.length),(Kr=ct.FileIndex[fn]).size&&Kr.content&&"\x01Sh33tJ5"!=Yr){var lf=br,Zu=W(Yr.length);for(Cn=0;Cn<Yr.length;++Cn)Zu.write_shift(1,127&Yr.charCodeAt(Cn));Zu=Zu.slice(0,Zu.l),Gs[Lr]=Rd.buf(Kr.content,0);var Gf=Kr.content;8==dn&&(Gf=Ti(Gf)),(ti=W(30)).write_shift(4,67324752),ti.write_shift(2,20),ti.write_shift(2,zn),ti.write_shift(2,dn),Kr.mt?o(ti,Kr.mt):ti.write_shift(4,0),ti.write_shift(-4,8&zn?0:Gs[Lr]),ti.write_shift(4,8&zn?0:Gf.length),ti.write_shift(4,8&zn?0:Kr.content.length),ti.write_shift(2,Zu.length),ti.write_shift(2,0),br+=ti.length,Ht.push(ti),br+=Zu.length,Ht.push(Zu),br+=Gf.length,Ht.push(Gf),8&zn&&((ti=W(12)).write_shift(-4,Gs[Lr]),ti.write_shift(4,Gf.length),ti.write_shift(4,Kr.content.length),br+=ti.l,Ht.push(ti)),(ti=W(46)).write_shift(4,33639248),ti.write_shift(2,0),ti.write_shift(2,20),ti.write_shift(2,zn),ti.write_shift(2,dn),ti.write_shift(4,0),ti.write_shift(-4,Gs[Lr]),ti.write_shift(4,Gf.length),ti.write_shift(4,Kr.content.length),ti.write_shift(2,Zu.length),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(4,0),ti.write_shift(4,lf),yc+=ti.l,ei.push(ti),yc+=Zu.length,ei.push(Zu),++Lr}return(ti=W(22)).write_shift(4,101010256),ti.write_shift(2,0),ti.write_shift(2,0),ti.write_shift(2,Lr),ti.write_shift(2,Lr),ti.write_shift(4,yc),ti.write_shift(4,br),ti.write_shift(2,0),Bi([Bi(Ht),Bi(ei),ti])}(ct,Pt);var Ht=function(ga){for(var Yr=0,Kr=0,Gs=0;Gs<ga.FileIndex.length;++Gs){var yc=ga.FileIndex[Gs];if(yc.content){var lf=yc.content.length;lf>0&&(lf<4096?Yr+=lf+63>>6:Kr+=lf+511>>9)}}for(var Zu=ga.FullPaths.length+3>>2,Lx=Yr+127>>7,Px=(Yr+7>>3)+Kr+Zu+Lx,S_=Px+127>>7,pE=S_<=109?0:Math.ceil((S_-109)/127);Px+S_+pE+127>>7>S_;)pE=++S_<=109?0:Math.ceil((S_-109)/127);var t0=[1,pE,S_,Lx,Zu,Kr,Yr,0];return ga.FileIndex[0].size=Yr<<6,t0[7]=(ga.FileIndex[0].start=t0[0]+t0[1]+t0[2]+t0[3]+t0[4]+t0[5])+(t0[6]+7>>3),t0}(ct),ei=W(Ht[7]<<9),ti=0,dn=0;for(ti=0;ti<8;++ti)ei.write_shift(1,Sr[ti]);for(ti=0;ti<8;++ti)ei.write_shift(2,0);for(ei.write_shift(2,62),ei.write_shift(2,3),ei.write_shift(2,65534),ei.write_shift(2,9),ei.write_shift(2,6),ti=0;ti<3;++ti)ei.write_shift(2,0);for(ei.write_shift(4,0),ei.write_shift(4,Ht[2]),ei.write_shift(4,Ht[0]+Ht[1]+Ht[2]+Ht[3]-1),ei.write_shift(4,0),ei.write_shift(4,4096),ei.write_shift(4,Ht[3]?Ht[0]+Ht[1]+Ht[2]-1:Cr),ei.write_shift(4,Ht[3]),ei.write_shift(-4,Ht[1]?Ht[0]-1:Cr),ei.write_shift(4,Ht[1]),ti=0;ti<109;++ti)ei.write_shift(-4,ti<Ht[2]?Ht[1]+ti:-1);if(Ht[1])for(dn=0;dn<Ht[1];++dn){for(;ti<236+127*dn;++ti)ei.write_shift(-4,ti<Ht[2]?Ht[1]+ti:-1);ei.write_shift(-4,dn===Ht[1]-1?Cr:dn+1)}var zn=function(ga){for(dn+=ga;ti<dn-1;++ti)ei.write_shift(-4,ti+1);ga&&(++ti,ei.write_shift(-4,Cr))};for(dn=ti=0,dn+=Ht[1];ti<dn;++ti)ei.write_shift(-4,ma.DIFSECT);for(dn+=Ht[2];ti<dn;++ti)ei.write_shift(-4,ma.FATSECT);zn(Ht[3]),zn(Ht[4]);for(var gn=0,fn=0,Cn=ct.FileIndex[0];gn<ct.FileIndex.length;++gn)(Cn=ct.FileIndex[gn]).content&&!((fn=Cn.content.length)<4096)&&(Cn.start=dn,zn(fn+511>>9));for(zn(Ht[6]+7>>3);511&ei.l;)ei.write_shift(-4,ma.ENDOFCHAIN);for(dn=ti=0,gn=0;gn<ct.FileIndex.length;++gn)(Cn=ct.FileIndex[gn]).content&&(fn=Cn.content.length)&&!(fn>=4096)&&(Cn.start=dn,zn(fn+63>>6));for(;511&ei.l;)ei.write_shift(-4,ma.ENDOFCHAIN);for(ti=0;ti<Ht[4]<<2;++ti){var br=ct.FullPaths[ti];if(br&&0!==br.length){Cn=ct.FileIndex[ti],0===ti&&(Cn.start=Cn.size?Cn.start-1:Cr);var Lr=0===ti&&Pt.root||Cn.name;if(fn=2*(Lr.length+1),ei.write_shift(64,Lr,"utf16le"),ei.write_shift(2,fn),ei.write_shift(1,Cn.type),ei.write_shift(1,Cn.color),ei.write_shift(-4,Cn.L),ei.write_shift(-4,Cn.R),ei.write_shift(-4,Cn.C),Cn.clsid)ei.write_shift(16,Cn.clsid,"hex");else for(gn=0;gn<4;++gn)ei.write_shift(4,0);ei.write_shift(4,Cn.state||0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,0),ei.write_shift(4,Cn.start),ei.write_shift(4,Cn.size),ei.write_shift(4,0)}else{for(gn=0;gn<17;++gn)ei.write_shift(4,0);for(gn=0;gn<3;++gn)ei.write_shift(4,-1);for(gn=0;gn<12;++gn)ei.write_shift(4,0)}}for(ti=1;ti<ct.FileIndex.length;++ti)if((Cn=ct.FileIndex[ti]).size>=4096)if(ei.l=Cn.start+1<<9,Et&&Buffer.isBuffer(Cn.content))Cn.content.copy(ei,ei.l,0,Cn.size),ei.l+=Cn.size+511&-512;else{for(gn=0;gn<Cn.size;++gn)ei.write_shift(1,Cn.content[gn]);for(;511&gn;++gn)ei.write_shift(1,0)}for(ti=1;ti<ct.FileIndex.length;++ti)if((Cn=ct.FileIndex[ti]).size>0&&Cn.size<4096)if(Et&&Buffer.isBuffer(Cn.content))Cn.content.copy(ei,ei.l,0,Cn.size),ei.l+=Cn.size+63&-64;else{for(gn=0;gn<Cn.size;++gn)ei.write_shift(1,Cn.content[gn]);for(;63&gn;++gn)ei.write_shift(1,0)}if(Et)ei.l=ei.length;else for(;ei.l<ei.length;)ei.write_shift(1,0);return ei}i.version="1.2.1";var qn,Wi=64,Cr=-2,aa="d0cf11e0a1b11ae1",Sr=[208,207,17,224,161,177,26,225],La="00000000000000000000000000000000",ma={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Cr,FREESECT:-1,HEADER_SIGNATURE:aa,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:La,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ur(ct){for(var qt=new Array(ct.length),Pt=0;Pt<ct.length;++Pt)qt[Pt]=String.fromCharCode(ct[Pt]);return qt.join("")}function Ti(ct){return qn?qn.deflateRawSync(ct):io(ct)}for(var ct,qt,bi=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Yn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Rr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],kr=typeof Uint8Array<"u",er=kr?new Uint8Array(256):[],Bs=0;Bs<256;++Bs)er[Bs]=(void 0,255&((qt=139536&((ct=Bs)<<1|ct<<11)|558144&(ct<<5|ct<<15))>>16|qt>>8|qt));function ui(ct,qt){var Pt=er[255&ct];return qt<=8?Pt>>>8-qt:(Pt=Pt<<8|er[ct>>8&255],qt<=16?Pt>>>16-qt:(Pt=Pt<<8|er[ct>>16&255])>>>24-qt)}function Qo(ct,qt){var Pt=7&qt,Ht=qt>>>3;return(ct[Ht]|(Pt<=6?0:ct[Ht+1]<<8))>>>Pt&3}function oo(ct,qt){var Pt=7&qt,Ht=qt>>>3;return(ct[Ht]|(Pt<=5?0:ct[Ht+1]<<8))>>>Pt&7}function lo(ct,qt){var Pt=7&qt,Ht=qt>>>3;return(ct[Ht]|(Pt<=3?0:ct[Ht+1]<<8))>>>Pt&31}function Jr(ct,qt){var Pt=7&qt,Ht=qt>>>3;return(ct[Ht]|(Pt<=1?0:ct[Ht+1]<<8))>>>Pt&127}function Lc(ct,qt,Pt){var Ht=7&qt,ei=qt>>>3,dn=ct[ei]>>>Ht;return Pt<8-Ht||(dn|=ct[ei+1]<<8-Ht,Pt<16-Ht)||(dn|=ct[ei+2]<<16-Ht,Pt<24-Ht)||(dn|=ct[ei+3]<<24-Ht),dn&(1<<Pt)-1}function $d(ct,qt,Pt){var Ht=7&qt,ei=qt>>>3;return Ht<=5?ct[ei]|=(7&Pt)<<Ht:(ct[ei]|=Pt<<Ht&255,ct[ei+1]=(7&Pt)>>8-Ht),qt+3}function bp(ct,qt,Pt){return ct[qt>>>3]|=Pt=(1&Pt)<<(7&qt),qt+1}function Qp(ct,qt,Pt){var ei=qt>>>3;return ct[ei]|=255&(Pt<<=7&qt),ct[ei+1]=Pt>>>=8,qt+8}function mv(ct,qt,Pt){var ei=qt>>>3;return ct[ei]|=255&(Pt<<=7&qt),ct[ei+1]=255&(Pt>>>=8),ct[ei+2]=Pt>>>8,qt+16}function wp(ct,qt){var Pt=ct.length,Ht=2*Pt>qt?2*Pt:qt+5,ei=0;if(Pt>=qt)return ct;if(Et){var ti=At(Ht);if(ct.copy)ct.copy(ti);else for(;ei<ct.length;++ei)ti[ei]=ct[ei];return ti}if(kr){var dn=new Uint8Array(Ht);if(dn.set)dn.set(ct);else for(;ei<Pt;++ei)dn[ei]=ct[ei];return dn}return ct.length=Ht,ct}function kh(ct){for(var qt=new Array(ct),Pt=0;Pt<ct;++Pt)qt[Pt]=0;return qt}function of(ct,qt,Pt){var Ht=1,ei=0,ti=0,dn=0,zn=0,gn=ct.length,fn=kr?new Uint16Array(32):kh(32);for(ti=0;ti<32;++ti)fn[ti]=0;for(ti=gn;ti<Pt;++ti)ct[ti]=0;gn=ct.length;var Cn=kr?new Uint16Array(gn):kh(gn);for(ti=0;ti<gn;++ti)fn[ei=ct[ti]]++,Ht<ei&&(Ht=ei),Cn[ti]=0;for(fn[0]=0,ti=1;ti<=Ht;++ti)fn[ti+16]=zn=zn+fn[ti-1]<<1;for(ti=0;ti<gn;++ti)0!=(zn=ct[ti])&&(Cn[ti]=fn[zn+16]++);var br=0;for(ti=0;ti<gn;++ti)if(0!=(br=ct[ti]))for(zn=ui(Cn[ti],Ht)>>Ht-br,dn=(1<<Ht+4-br)-1;dn>=0;--dn)qt[zn|dn<<br]=15&br|ti<<4;return Ht}var Xm=kr?new Uint16Array(512):kh(512),gv=kr?new Uint16Array(32):kh(32);if(!kr){for(var Wd=0;Wd<512;++Wd)Xm[Wd]=0;for(Wd=0;Wd<32;++Wd)gv[Wd]=0}!function(){for(var ct=[],qt=0;qt<32;qt++)ct.push(5);of(ct,gv,32);var Pt=[];for(qt=0;qt<=143;qt++)Pt.push(8);for(;qt<=255;qt++)Pt.push(9);for(;qt<=279;qt++)Pt.push(7);for(;qt<=287;qt++)Pt.push(8);of(Pt,Xm,288)}();var Yf=function(){for(var qt=kr?new Uint8Array(32768):[],Pt=0,Ht=0;Pt<Rr.length-1;++Pt)for(;Ht<Rr[Pt+1];++Ht)qt[Ht]=Pt;for(;Ht<32768;++Ht)qt[Ht]=29;var ei=kr?new Uint8Array(259):[];for(Pt=0,Ht=0;Pt<Yn.length-1;++Pt)for(;Ht<Yn[Pt+1];++Ht)ei[Ht]=Pt;return function(gn,fn){return gn.length<8?function ti(zn,gn){for(var fn=0;fn<zn.length;){var Cn=Math.min(65535,zn.length-fn);for(gn.write_shift(1,+(fn+Cn==zn.length)),gn.write_shift(2,Cn),gn.write_shift(2,65535&~Cn);Cn-- >0;)gn[gn.l++]=zn[fn++]}return gn.l}(gn,fn):function dn(zn,gn){for(var fn=0,Cn=0,br=kr?new Uint16Array(32768):[];Cn<zn.length;){var Lr=Math.min(65535,zn.length-Cn);if(Lr<10){for(7&(fn=$d(gn,fn,+(Cn+Lr==zn.length)))&&(fn+=8-(7&fn)),gn.l=fn/8|0,gn.write_shift(2,Lr),gn.write_shift(2,65535&~Lr);Lr-- >0;)gn[gn.l++]=zn[Cn++];fn=8*gn.l}else{fn=$d(gn,fn,+(Cn+Lr==zn.length)+2);for(var ga=0;Lr-- >0;){var Yr=zn[Cn],Kr=-1,Gs=0;if((Kr=br[ga=32767&(ga<<5^Yr)])&&((Kr|=-32768&Cn)>Cn&&(Kr-=32768),Kr<Cn))for(;zn[Kr+Gs]==zn[Cn+Gs]&&Gs<250;)++Gs;if(Gs>2){(Yr=ei[Gs])<=22?fn=Qp(gn,fn,er[Yr+1]>>1)-1:(Qp(gn,fn,3),Qp(gn,fn+=5,er[Yr-23]>>5),fn+=3);var yc=Yr<8?0:Yr-4>>2;yc>0&&(mv(gn,fn,Gs-Yn[Yr]),fn+=yc),fn=Qp(gn,fn,er[Yr=qt[Cn-Kr]]>>3),fn-=3;var lf=Yr<4?0:Yr-2>>1;lf>0&&(mv(gn,fn,Cn-Kr-Rr[Yr]),fn+=lf);for(var Zu=0;Zu<Gs;++Zu)br[ga]=32767&Cn,ga=32767&(ga<<5^zn[Cn]),++Cn;Lr-=Gs-1}else Yr<=143?Yr+=48:fn=bp(gn,fn,1),fn=Qp(gn,fn,er[Yr]),br[ga]=32767&Cn,++Cn}fn=Qp(gn,fn,0)-1}}return gn.l=(fn+7)/8|0,gn.l}(gn,fn)}}();function io(ct){var qt=W(50+Math.floor(1.1*ct.length)),Pt=Yf(ct,qt);return qt.slice(0,Pt)}var Zc=kr?new Uint16Array(32768):kh(32768),Uh=kr?new Uint16Array(32768):kh(32768),Du=kr?new Uint16Array(128):kh(128),e0=1,Kl=1;function Rx(ct,qt){var Pt=lo(ct,qt)+257,Ht=lo(ct,qt+=5)+1,ei=function $o(ct,qt){var Pt=7&qt,Ht=qt>>>3;return(ct[Ht]|(Pt<=4?0:ct[Ht+1]<<8))>>>Pt&15}(ct,qt+=5)+4;qt+=4;for(var ti=0,dn=kr?new Uint8Array(19):kh(19),zn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],gn=1,fn=kr?new Uint8Array(8):kh(8),Cn=kr?new Uint8Array(8):kh(8),br=dn.length,Lr=0;Lr<ei;++Lr)dn[bi[Lr]]=ti=oo(ct,qt),gn<ti&&(gn=ti),fn[ti]++,qt+=3;var ga=0;for(fn[0]=0,Lr=1;Lr<=gn;++Lr)Cn[Lr]=ga=ga+fn[Lr-1]<<1;for(Lr=0;Lr<br;++Lr)0!=(ga=dn[Lr])&&(zn[Lr]=Cn[ga]++);var Yr=0;for(Lr=0;Lr<br;++Lr)if(0!=(Yr=dn[Lr])){ga=er[zn[Lr]]>>8-Yr;for(var Kr=(1<<7-Yr)-1;Kr>=0;--Kr)Du[ga|Kr<<Yr]=7&Yr|Lr<<3}var Gs=[];for(gn=1;Gs.length<Pt+Ht;)switch(ga=Du[Jr(ct,qt)],qt+=7&ga,ga>>>=3){case 16:for(ti=3+Qo(ct,qt),qt+=2,ga=Gs[Gs.length-1];ti-- >0;)Gs.push(ga);break;case 17:for(ti=3+oo(ct,qt),qt+=3;ti-- >0;)Gs.push(0);break;case 18:for(ti=11+Jr(ct,qt),qt+=7;ti-- >0;)Gs.push(0);break;default:Gs.push(ga),gn<ga&&(gn=ga)}var yc=Gs.slice(0,Pt),lf=Gs.slice(Pt);for(Lr=Pt;Lr<286;++Lr)yc[Lr]=0;for(Lr=Ht;Lr<30;++Lr)lf[Lr]=0;return e0=of(yc,Zc,286),Kl=of(lf,Uh,30),qt}function xw(ct,qt){var Ht=function Ox(ct,qt){if(3==ct[0]&&!(3&ct[1]))return[Je(qt),2];for(var Pt=0,Ht=0,ei=At(qt||1<<18),ti=0,dn=ei.length>>>0,zn=0,gn=0;!(1&Ht);)if(Ht=oo(ct,Pt),Pt+=3,Ht>>>1)for(Ht>>1==1?(zn=9,gn=5):(Pt=Rx(ct,Pt),zn=e0,gn=Kl);;){!qt&&dn<ti+32767&&(dn=(ei=wp(ei,ti+32767)).length);var Cn=Lc(ct,Pt,zn),br=Ht>>>1==1?Xm[Cn]:Zc[Cn];if(Pt+=15&br,(br>>>=4)>>>8&255){if(256==br)break;var Lr=(br-=257)<8?0:br-4>>2;Lr>5&&(Lr=0);var ga=ti+Yn[br];Lr>0&&(ga+=Lc(ct,Pt,Lr),Pt+=Lr),Cn=Lc(ct,Pt,gn),Pt+=15&(br=Ht>>>1==1?gv[Cn]:Uh[Cn]);var Yr=(br>>>=4)<4?0:br-2>>1,Kr=Rr[br];for(Yr>0&&(Kr+=Lc(ct,Pt,Yr),Pt+=Yr),!qt&&dn<ga&&(dn=(ei=wp(ei,ga+100)).length);ti<ga;)ei[ti]=ei[ti-Kr],++ti}else ei[ti++]=br}else{7&Pt&&(Pt+=8-(7&Pt));var fn=ct[Pt>>>3]|ct[1+(Pt>>>3)]<<8;if(Pt+=32,fn>0)for(!qt&&dn<ti+fn&&(dn=(ei=wp(ei,ti+fn)).length);fn-- >0;)ei[ti++]=ct[Pt>>>3],Pt+=8}return qt?[ei,Pt+7>>>3]:[ei.slice(0,ti),Pt+7>>>3]}(ct.slice(ct.l||0),qt);return ct.l+=Ht[1],Ht[0]}function T_(ct,qt){if(!ct)throw new Error(qt);typeof console<"u"&&console.error(qt)}function Wy(ct,qt){var Pt=ct;v(Pt,0);var ti={FileIndex:[],FullPaths:[]};Vt(ti,{root:qt.root});for(var dn=Pt.length-4;(80!=Pt[dn]||75!=Pt[dn+1]||5!=Pt[dn+2]||6!=Pt[dn+3])&&dn>=0;)--dn;Pt.l=dn+4,Pt.l+=4;var zn=Pt.read_shift(2);Pt.l+=6;var gn=Pt.read_shift(4);for(Pt.l=gn,dn=0;dn<zn;++dn){Pt.l+=20;var fn=Pt.read_shift(4),Cn=Pt.read_shift(4),br=Pt.read_shift(2),Lr=Pt.read_shift(2),ga=Pt.read_shift(2);Pt.l+=8;var Yr=Pt.read_shift(4),Kr=p(Pt.slice(Pt.l+br,Pt.l+br+Lr));Pt.l+=br+Lr+ga;var Gs=Pt.l;Pt.l=Yr+4,em(Pt,fn,Cn,ti,Kr),Pt.l=Gs}return ti}function em(ct,qt,Pt,Ht,ei){ct.l+=2;var ti=ct.read_shift(2),dn=ct.read_shift(2),zn=function d(ct){var qt=65535&ct.read_shift(2),Pt=65535&ct.read_shift(2),Ht=new Date,ei=31&Pt,ti=15&(Pt>>>=5);Pt>>>=4,Ht.setMilliseconds(0),Ht.setFullYear(Pt+1980),Ht.setMonth(ti-1),Ht.setDate(ei);var dn=31&qt,zn=63&(qt>>>=5);return Ht.setHours(qt>>>=6),Ht.setMinutes(zn),Ht.setSeconds(dn<<1),Ht}(ct);if(8257&ti)throw new Error("Unsupported ZIP encryption");ct.read_shift(4);for(var fn=ct.read_shift(4),Cn=ct.read_shift(4),br=ct.read_shift(2),Lr=ct.read_shift(2),ga="",Yr=0;Yr<br;++Yr)ga+=String.fromCharCode(ct[ct.l++]);if(Lr){var Kr=p(ct.slice(ct.l,ct.l+Lr));(Kr[21589]||{}).mt&&(zn=Kr[21589].mt),((ei||{})[21589]||{}).mt&&(zn=ei[21589].mt)}ct.l+=Lr;var Gs=ct.slice(ct.l,ct.l+fn);switch(dn){case 8:Gs=function mn(ct,qt){if(!qn)return xw(ct,qt);var Ht=new(0,qn.InflateRaw),ei=Ht._processChunk(ct.slice(ct.l),Ht._finishFlushFlag);return ct.l+=Ht.bytesRead,ei}(ct,Cn);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+dn)}var yc=!1;8&ti&&(134695760==ct.read_shift(4)&&(ct.read_shift(4),yc=!0),fn=ct.read_shift(4),Cn=ct.read_shift(4)),fn!=qt&&T_(yc,"Bad compressed size: "+qt+" != "+fn),Cn!=Pt&&T_(yc,"Bad uncompressed size: "+Pt+" != "+Cn),$s(Ht,ga,Gs,{unsafe:!0,mt:zn})}var Xy={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(ct,qt){if(ct.ctype)return ct.ctype;var Pt=ct.name||"",Ht=Pt.match(/\.([^\.]+)$/);return Ht&&Xy[Ht[1]]||qt&&(Ht=(Pt=qt).match(/[\.\\]([^\.\\])+$/))&&Xy[Ht[1]]?Xy[Ht[1]]:"application/octet-stream"}function Kt(ct){for(var qt=Ia(ct),Pt=[],Ht=0;Ht<qt.length;Ht+=76)Pt.push(qt.slice(Ht,Ht+76));return Pt.join("\r\n")+"\r\n"}function qi(ct){var qt=ct.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(fn){var Cn=fn.charCodeAt(0).toString(16).toUpperCase();return"="+(1==Cn.length?"0"+Cn:Cn)});"\n"==(qt=qt.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(qt="=0D"+qt.slice(1));for(var Pt=[],Ht=(qt=qt.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),ei=0;ei<Ht.length;++ei){var ti=Ht[ei];if(0!=ti.length)for(var dn=0;dn<ti.length;){var zn=76,gn=ti.slice(dn,dn+zn);"="==gn.charAt(zn-1)?zn--:"="==gn.charAt(zn-2)?zn-=2:"="==gn.charAt(zn-3)&&(zn-=3),gn=ti.slice(dn,dn+zn),(dn+=zn)<ti.length&&(gn+="="),Pt.push(gn)}else Pt.push("")}return Pt.join("\r\n")}function Or(ct,qt,Pt){for(var dn,Ht="",ei="",ti="",zn=0;zn<10;++zn){var gn=qt[zn];if(!gn||gn.match(/^\s*$/))break;var fn=gn.match(/^(.*?):\s*([^\s].*)$/);if(fn)switch(fn[1].toLowerCase()){case"content-location":Ht=fn[2].trim();break;case"content-type":ti=fn[2].trim();break;case"content-transfer-encoding":ei=fn[2].trim()}}switch(++zn,ei.toLowerCase()){case"base64":dn=kt(Fa(qt.slice(zn).join("")));break;case"quoted-printable":dn=function Fn(ct){for(var qt=[],Pt=0;Pt<ct.length;++Pt){for(var Ht=ct[Pt];Pt<=ct.length&&"="==Ht.charAt(Ht.length-1);)Ht=Ht.slice(0,Ht.length-1)+ct[++Pt];qt.push(Ht)}for(var ei=0;ei<qt.length;++ei)qt[ei]=qt[ei].replace(/[=][0-9A-Fa-f]{2}/g,function(ti){return String.fromCharCode(parseInt(ti.slice(1),16))});return kt(qt.join("\r\n"))}(qt.slice(zn));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ei)}var Cn=$s(ct,Ht.slice(Pt.length),dn,{unsafe:!0});ti&&(Cn.ctype=ti)}function $s(ct,qt,Pt,Ht){var ei=Ht&&Ht.unsafe;ei||Vt(ct);var ti=!ei&&$r.find(ct,qt);if(!ti){var dn=ct.FullPaths[0];qt.slice(0,dn.length)==dn?dn=qt:("/"!=dn.slice(-1)&&(dn+="/"),dn=(dn+qt).replace("//","/")),ti={name:a(qt),type:2},ct.FileIndex.push(ti),ct.FullPaths.push(dn),ei||$r.utils.cfb_gc(ct)}return ti.content=Pt,ti.size=Pt?Pt.length:0,Ht&&(Ht.CLSID&&(ti.clsid=Ht.CLSID),Ht.mt&&(ti.mt=Ht.mt),Ht.ct&&(ti.ct=Ht.ct)),ti}return i.find=function Tn(ct,qt){var Pt=ct.FullPaths.map(function(gn){return gn.toUpperCase()}),Ht=Pt.map(function(gn){var fn=gn.split("/");return fn[fn.length-("/"==gn.slice(-1)?2:1)]}),ei=!1;47===qt.charCodeAt(0)?(ei=!0,qt=Pt[0].slice(0,-1)+qt):ei=-1!==qt.indexOf("/");var ti=qt.toUpperCase(),dn=!0===ei?Pt.indexOf(ti):Ht.indexOf(ti);if(-1!==dn)return ct.FileIndex[dn];var zn=!ti.match(Vi);for(ti=ti.replace(_n,""),zn&&(ti=ti.replace(Vi,"!")),dn=0;dn<Pt.length;++dn)if((zn?Pt[dn].replace(Vi,"!"):Pt[dn]).replace(_n,"")==ti||(zn?Ht[dn].replace(Vi,"!"):Ht[dn]).replace(_n,"")==ti)return ct.FileIndex[dn];return null},i.read=function vi(ct,qt){var Pt=qt&&qt.type;switch(Pt||Et&&Buffer.isBuffer(ct)&&(Pt="buffer"),Pt||"base64"){case"file":return function zi(ct,qt){return P(),B(D.readFileSync(ct),qt)}(ct,qt);case"base64":return B(kt(Fa(ct)),qt);case"binary":return B(kt(ct),qt)}return B(ct,qt)},i.parse=B,i.write=function Ca(ct,qt){var Pt=hn(ct,qt);switch(qt&&qt.type||"buffer"){case"file":return P(),D.writeFileSync(qt.filename,Pt),Pt;case"binary":return"string"==typeof Pt?Pt:Ur(Pt);case"base64":return Ia("string"==typeof Pt?Pt:Ur(Pt));case"buffer":if(Et)return Buffer.isBuffer(Pt)?Pt:je(Pt);case"array":return"string"==typeof Pt?kt(Pt):Pt}return Pt},i.writeFile=function qs(ct,qt,Pt){P();var Ht=hn(ct,Pt);D.writeFileSync(qt,Ht)},i.utils={cfb_new:function Da(ct){var qt={};return Vt(qt,ct),qt},cfb_add:$s,cfb_del:function Ea(ct,qt){Vt(ct);var Pt=$r.find(ct,qt);if(Pt)for(var Ht=0;Ht<ct.FileIndex.length;++Ht)if(ct.FileIndex[Ht]==Pt)return ct.FileIndex.splice(Ht,1),ct.FullPaths.splice(Ht,1),!0;return!1},cfb_mov:function ws(ct,qt,Pt){Vt(ct);var Ht=$r.find(ct,qt);if(Ht)for(var ei=0;ei<ct.FileIndex.length;++ei)if(ct.FileIndex[ei]==Ht)return ct.FileIndex[ei].name=a(Pt),ct.FullPaths[ei]=Pt,!0;return!1},cfb_gc:function hl(ct){Yi(ct,!0)},ReadShift:Gl,CheckField:dr,prep_blob:v,bconcat:Bi,use_zlib:function gi(ct){try{var Pt=new(0,ct.InflateRaw);if(Pt._processChunk(new Uint8Array([3,0]),Pt._finishFlushFlag),!Pt.bytesRead)throw new Error("zlib does not expose bytesRead");qn=ct}catch(Ht){console.error("cannot use native zlib: "+(Ht.message||Ht))}},_deflateRaw:io,_inflateRaw:xw,consts:ma},i}();let fs;function Zs(n){return"string"==typeof n?ai(n):Array.isArray(n)?function Ii(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}(n):n}function gs(n,i,e){if(typeof fs<"u"&&fs.writeFileSync)return e?fs.writeFileSync(n,i,e):fs.writeFileSync(n,i);if(typeof Deno<"u"){if(e&&"string"==typeof i)switch(e){case"utf8":i=new TextEncoder(e).encode(i);break;case"binary":i=ai(i);break;default:throw new Error("Unsupported encoding "+e)}return Deno.writeFileSync(n,i)}var r="utf8"==e?_o(i):i;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var a=new Blob([Zs(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,n);if(typeof saveAs<"u")return saveAs(a,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(a);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:n,saveAs:!0});var d=document.createElement("a");if(null!=d.download)return d.download=n,d.href=o,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var p=File(n);return p.open("w"),p.encoding="binary",Array.isArray(i)&&(i=Ci(i)),p.write(i),p.close(),i}catch(D){if(!D.message||!D.message.match(/onstruct/))throw D}throw new Error("cannot save file "+n)}function no(n){for(var i=Object.keys(n),e=[],r=0;r<i.length;++r)Object.prototype.hasOwnProperty.call(n,i[r])&&e.push(i[r]);return e}function Xd(n,i){for(var e=[],r=no(n),a=0;a!==r.length;++a)null==e[n[r[a]][i]]&&(e[n[r[a]][i]]=r[a]);return e}function Od(n){for(var i=[],e=no(n),r=0;r!==e.length;++r)i[n[e[r]]]=e[r];return i}function uu(n){for(var i=[],e=no(n),r=0;r!==e.length;++r)i[n[e[r]]]=parseInt(e[r],10);return i}var Ju=new Date(1899,11,30,0,0,0);function Es(n,i){var e=n.getTime();return i&&(e-=1263168e5),(e-(Ju.getTime()+6e4*(n.getTimezoneOffset()-Ju.getTimezoneOffset())))/864e5}var ks=new Date,gd=Ju.getTime()+6e4*(ks.getTimezoneOffset()-Ju.getTimezoneOffset()),fl=ks.getTimezoneOffset();function Bc(n){var i=new Date;return i.setTime(24*n*60*60*1e3+gd),i.getTimezoneOffset()!==fl&&i.setTime(i.getTime()+6e4*(i.getTimezoneOffset()-fl)),i}function Au(n){var i=0,e=0,r=!1,a=n.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+n+"| is not an ISO8601 Duration");for(var o=1;o!=a.length;++o)if(a[o]){switch(e=1,o>3&&(r=!0),a[o].slice(a[o].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[o].slice(a[o].length-1));case"D":e*=24;case"H":e*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");e*=60}i+=e*parseInt(a[o],10)}return i}var No=new Date("2017-02-19T19:06:09.000Z"),qd=isNaN(No.getFullYear())?new Date("2/19/17"):No,vd=2017==qd.getFullYear();function Cs(n,i){var e=new Date(n);if(vd)return i>0?e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3):i<0&&e.setTime(e.getTime()-60*e.getTimezoneOffset()*1e3),e;if(n instanceof Date)return n;if(1917==qd.getFullYear()&&!isNaN(e.getFullYear())){var r=e.getFullYear();return n.indexOf(""+r)>-1||e.setFullYear(e.getFullYear()+100),e}var a=n.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return n.indexOf("Z")>-1&&(o=new Date(o.getTime()-60*o.getTimezoneOffset()*1e3)),o}function Jl(n,i){if(Et&&Buffer.isBuffer(n)){if(i){if(255==n[0]&&254==n[1])return _o(n.slice(2).toString("utf16le"));if(254==n[1]&&255==n[2])return _o(Ra(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(i){if(255==n[0]&&254==n[1])return _o(new TextDecoder("utf-16le").decode(n.slice(2)));if(254==n[0]&&255==n[1])return _o(new TextDecoder("utf-16be").decode(n.slice(2)))}var e={"\u20ac":"\x80","\u201a":"\x82",\u0192:"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87",\u02c6:"\x88","\u2030":"\x89",\u0160:"\x8a","\u2039":"\x8b",\u0152:"\x8c",\u017d:"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99",\u0161:"\x9a","\u203a":"\x9b",\u0153:"\x9c",\u017e:"\x9e",\u0178:"\x9f"};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(o){return e[o]||o})}catch{}for(var r=[],a=0;a!=n.length;++a)r.push(String.fromCharCode(n[a]));return r.join("")}function ts(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if("object"!=typeof n||null==n)return n;if(n instanceof Date)return new Date(n.getTime());var i={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(i[e]=ts(n[e]));return i}function ra(n,i){for(var e="";e.length<i;)e+=n;return e}function bo(n){var i=Number(n);if(!isNaN(i))return isFinite(i)?i:NaN;if(!/\d/.test(n))return i;var e=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return e*=100,""});return isNaN(i=Number(r))&&(r=r.replace(/[(](.*)[)]/,function(a,o){return e=-e,o}),isNaN(i=Number(r)))?i:i/e}var du=["january","february","march","april","may","june","july","august","september","october","november","december"];function zo(n){var i=new Date(n),e=new Date(NaN),r=i.getYear(),a=i.getMonth(),o=i.getDate();if(isNaN(o))return e;var d=n.toLowerCase();if(d.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((d=d.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==du.indexOf(d))return e}else if(d.match(/[a-z]/))return e;return r<0||r>8099?e:(a>0||o>1)&&101!=r?i:n.match(/[^-0-9:,\/\\]/)?e:i}var Zd=function(){var n=5=="abacaba".split(/(:?b)/i).length;return function(e,r,a){if(n||"string"==typeof r)return e.split(r);for(var o=e.split(r),d=[o[0]],p=1;p<o.length;++p)d.push(a),d.push(o[p]);return d}}();function Ql(n){return n?n.content&&n.type?Jl(n.content,!0):n.data?ha(n.data):n.asNodeBuffer&&Et?ha(n.asNodeBuffer().toString("binary")):n.asBinary?ha(n.asBinary()):n._data&&n._data.getContent?ha(Jl(Array.prototype.slice.call(n._data.getContent(),0))):null:null}function Ks(n){if(!n)return null;if(n.data)return Ga(n.data);if(n.asNodeBuffer&&Et)return n.asNodeBuffer();if(n._data&&n._data.getContent){var i=n._data.getContent();return"string"==typeof i?Ga(i):Array.prototype.slice.call(i)}return n.content&&n.type?n.content:null}function co(n,i){for(var e=n.FullPaths||no(n.files),r=i.toLowerCase().replace(/[\/]/g,"\\"),a=r.replace(/\\/g,"/"),o=0;o<e.length;++o){var d=e[o].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==d||a==d)return n.files?n.files[e[o]]:n.FileIndex[o]}return null}function zs(n,i){var e=co(n,i);if(null==e)throw new Error("Cannot find file "+i+" in zip");return e}function Ts(n,i,e){if(!e)return function wl(n){return n&&".bin"===n.name.slice(-4)?Ks(n):Ql(n)}(zs(n,i));if(!i)return null;try{return Ts(n,i)}catch{return null}}function vo(n,i,e){if(!e)return Ql(zs(n,i));if(!i)return null;try{return vo(n,i)}catch{return null}}function Qu(n,i,e){if(!e)return Ks(zs(n,i));if(!i)return null;try{return Qu(n,i)}catch{return null}}function ec(n){for(var i=n.FullPaths||no(n.files),e=[],r=0;r<i.length;++r)"/"!=i[r].slice(-1)&&e.push(i[r].replace(/^Root Entry[\/]/,""));return e.sort()}function Oa(n,i,e){if(n.FullPaths){var r;if("string"==typeof e)return r=Et?je(e):function On(n){for(var i=[],e=0,r=n.length+250,a=Je(n.length+255),o=0;o<n.length;++o){var d=n.charCodeAt(o);if(d<128)a[e++]=d;else if(d<2048)a[e++]=192|d>>6&31,a[e++]=128|63&d;else if(d>=55296&&d<57344){d=64+(1023&d);var p=1023&n.charCodeAt(++o);a[e++]=240|d>>8&7,a[e++]=128|d>>2&63,a[e++]=128|p>>6&15|(3&d)<<4,a[e++]=128|63&p}else a[e++]=224|d>>12&15,a[e++]=128|d>>6&63,a[e++]=128|63&d;e>r&&(i.push(a.slice(0,e)),e=0,a=Je(65535),r=65530)}return i.push(a.slice(0,e)),Bi(i)}(e),$r.utils.cfb_add(n,i,r);$r.utils.cfb_add(n,i,e)}else n.file(i,e)}function ed(){return $r.utils.cfb_new()}function Js(n,i){switch(i.type){case"base64":return $r.read(n,{type:"base64"});case"binary":return $r.read(n,{type:"binary"});case"buffer":case"array":return $r.read(n,{type:"buffer"})}throw new Error("Unrecognized type "+i.type)}function Iu(n,i){if("/"==n.charAt(0))return n.slice(1);var e=i.split("/");"/"!=i.slice(-1)&&e.pop();for(var r=n.split("/");0!==r.length;){var a=r.shift();".."===a?e.pop():"."!==a&&e.push(a)}return e.join("/")}var Ys='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',wo=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ps=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,Wo=Ys.match(ps)?ps:/<[^>]*>/g,id=/<\w*:/,Mu=/<(\/?)\w+:/;function oa(n,i,e){for(var r={},a=0,o=0;a!==n.length&&32!==(o=n.charCodeAt(a))&&10!==o&&13!==o;++a);if(i||(r[0]=n.slice(0,a)),a===n.length)return r;var d=n.match(wo),p=0,D="",P=0,B="",te="",ae=1;if(d)for(P=0;P!=d.length;++P){for(te=d[P],o=0;o!=te.length&&61!==te.charCodeAt(o);++o);for(B=te.slice(0,o).trim();32==te.charCodeAt(o+1);)++o;for(ae=34==(a=te.charCodeAt(o+1))||39==a?1:0,D=te.slice(o+1+ae,te.length-ae),p=0;p!=B.length&&58!==B.charCodeAt(p);++p);if(p===B.length)B.indexOf("_")>0&&(B=B.slice(0,B.indexOf("_"))),r[B]=D,e||(r[B.toLowerCase()]=D);else{var oe=(5===p&&"xmlns"===B.slice(0,5)?"xmlns":"")+B.slice(p+1);if(r[oe]&&"ext"==B.slice(p-3,p))continue;r[oe]=D,e||(r[oe.toLowerCase()]=D)}}return r}function ko(n){return n.replace(Mu,"<$1")}var Ol={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ld=Od(Ol),qa=function(){var n=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,i=/_x([\da-fA-F]{4})_/gi;return function e(r){var a=r+"",o=a.indexOf("<![CDATA[");if(-1==o)return a.replace(n,function(p,D){return Ol[p]||String.fromCharCode(parseInt(D,p.indexOf("x")>-1?16:10))||p}).replace(i,function(p,D){return String.fromCharCode(parseInt(D,16))});var d=a.indexOf("]]>");return e(a.slice(0,o))+a.slice(o+9,d)+e(a.slice(d+3))}}(),Nc=/[&<>'"]/g,Ll=/[\u0000-\u0008\u000b-\u001f]/g;function $a(n){return(n+"").replace(Nc,function(e){return Ld[e]}).replace(Ll,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Kc(n){return $a(n).replace(/ /g,"_x0020_")}var bc=/[\u0000-\u001f]/g;function Jc(n){return(n+"").replace(Nc,function(e){return Ld[e]}).replace(/\n/g,"<br/>").replace(bc,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}var nd=function(){var n=/&#(\d+);/g;function i(e,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(n,i)}}();function Qs(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function el(n){for(var i="",e=0,r=0,a=0,o=0,d=0,p=0;e<n.length;)(r=n.charCodeAt(e++))<128?i+=String.fromCharCode(r):(a=n.charCodeAt(e++),r>191&&r<224?(d=(31&r)<<6,d|=63&a,i+=String.fromCharCode(d)):(o=n.charCodeAt(e++),r<240?i+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&o):(p=((7&r)<<18|(63&a)<<12|(63&o)<<6|63&(d=n.charCodeAt(e++)))-65536,i+=String.fromCharCode(55296+(p>>>10&1023)),i+=String.fromCharCode(56320+(1023&p)))));return i}function Cl(n){var e,r,p,i=Je(2*n.length),a=1,o=0,d=0;for(r=0;r<n.length;r+=a)a=1,(p=n.charCodeAt(r))<128?e=p:p<224?(e=64*(31&p)+(63&n.charCodeAt(r+1)),a=2):p<240?(e=4096*(15&p)+64*(63&n.charCodeAt(r+1))+(63&n.charCodeAt(r+2)),a=3):(a=4,e=262144*(7&p)+4096*(63&n.charCodeAt(r+1))+64*(63&n.charCodeAt(r+2))+(63&n.charCodeAt(r+3)),d=55296+((e-=65536)>>>10&1023),e=56320+(1023&e)),0!==d&&(i[o++]=255&d,i[o++]=d>>>8,d=0),i[o++]=e%256,i[o++]=e>>>8;return i.slice(0,o).toString("ucs2")}function wc(n){return je(n,"binary").toString("utf8")}var eu="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Rs=Et&&(wc(eu)==el(eu)&&wc||Cl(eu)==el(eu)&&Cl)||el,_o=Et?function(n){return je(n,"utf8").toString("binary")}:function(n){for(var i=[],e=0,r=0,a=0;e<n.length;)switch(r=n.charCodeAt(e++),!0){case r<128:i.push(String.fromCharCode(r));break;case r<2048:i.push(String.fromCharCode(192+(r>>6))),i.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,a=n.charCodeAt(e++)-56320+(r<<10),i.push(String.fromCharCode(240+(a>>18&7))),i.push(String.fromCharCode(144+(a>>12&63))),i.push(String.fromCharCode(128+(a>>6&63))),i.push(String.fromCharCode(128+(63&a)));break;default:i.push(String.fromCharCode(224+(r>>12))),i.push(String.fromCharCode(128+(r>>6&63))),i.push(String.fromCharCode(128+(63&r)))}return i.join("")},Pl=function(){var n={};return function(e,r){var a=e+"|"+(r||"");return n[a]?n[a]:n[a]=new RegExp("<(?:\\w+:)?"+e+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+e+">",r||"")}}(),sl=function(){var n=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(i){return[new RegExp("&"+i[0]+";","ig"),i[1]]});return function(e){for(var r=e.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),a=0;a<n.length;++a)r=r.replace(n[a][0],n[a][1]);return r}}(),cf=function(){var n={};return function(e){return void 0!==n[e]?n[e]:n[e]=new RegExp("<(?:vt:)?"+e+">([\\s\\S]*?)</(?:vt:)?"+e+">","g")}}(),zc=/<\/?(?:vt:)?variant>/g,rd=/<(?:vt:)([^>]*)>([\s\S]*)</;function Fl(n,i){var e=oa(n),r=n.match(cf(e.baseType))||[],a=[];if(r.length!=e.size){if(i.WTF)throw new Error("unexpected vector length "+r.length+" != "+e.size);return a}return r.forEach(function(o){var d=o.replace(zc,"").match(rd);d&&a.push({v:Rs(d[2]),t:d[1]})}),a}var pl=/(^\s|\s$|\n)/;function Ss(n,i){return"<"+n+(i.match(pl)?' xml:space="preserve"':"")+">"+i+"</"+n+">"}function ad(n){return no(n).map(function(i){return" "+i+'="'+n[i]+'"'}).join("")}function or(n,i,e){return"<"+n+(null!=e?ad(e):"")+(null!=i?(i.match(pl)?' xml:space="preserve"':"")+">"+i+"</"+n:"/")+">"}function Bl(n,i){try{return n.toISOString().replace(/\.\d*/,"")}catch(e){if(i)throw e}return""}function hu(n){if(Et&&Buffer.isBuffer(n))return n.toString("utf8");if("string"==typeof n)return n;if(typeof Uint8Array<"u"&&n instanceof Uint8Array)return Rs(Ci(Mt(n)));throw new Error("Bad input format: expected Buffer or string")}var Cc=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,Ei={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},pn=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],nn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"},Os=function(n){for(var i=[],r=0;r<n[0].length;++r)if(n[0][r])for(var a=0,o=n[0][r].length;a<o;a+=10240)i.push.apply(i,n[0][r].slice(a,a+10240));return i},Yo=Et?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(i){return Buffer.isBuffer(i)?i:je(i)})):Os(n)}:Os,vs=function(n,i,e){for(var r=[],a=i;a<e;a+=2)r.push(String.fromCharCode(Xo(n,a)));return r.join("").replace(_n,"")},El=Et?function(n,i,e){return Buffer.isBuffer(n)?n.toString("utf16le",i,e).replace(_n,""):vs(n,i,e)}:vs,sd=function(n,i,e){for(var r=[],a=i;a<i+e;++a)r.push(("0"+n[a].toString(16)).slice(-2));return r.join("")},ol=Et?function(n,i,e){return Buffer.isBuffer(n)?n.toString("hex",i,i+e):sd(n,i,e)}:sd,tu=function(n,i,e){for(var r=[],a=i;a<e;a++)r.push(String.fromCharCode(Yl(n,a)));return r.join("")},ml=Et?function(i,e,r){return Buffer.isBuffer(i)?i.toString("utf8",e,r):tu(i,e,r)}:tu,tc=function(n,i){var e=ho(n,i);return e>0?ml(n,i+4,i+4+e-1):""},Hs=tc,tl=function(n,i){var e=ho(n,i);return e>0?ml(n,i+4,i+4+e-1):""},xs=tl,Lu=function(n,i){var e=2*ho(n,i);return e>0?ml(n,i+4,i+4+e-1):""},gl=Lu,Pu=function(i,e){var r=ho(i,e);return r>0?El(i,e+4,e+4+r):""},ic=Pu,bs=function(n,i){var e=ho(n,i);return e>0?ml(n,i+4,i+4+e):""},Fu=bs,Yc=function(n,i){return function Fr(n,i){for(var e=1-2*(n[i+7]>>>7),r=((127&n[i+7])<<4)+(n[i+6]>>>4&15),a=15&n[i+6],o=5;o>=0;--o)a=256*a+n[i+o];return 2047==r?0==a?e*(1/0):NaN:(0==r?r=-1022:(r-=1023,a+=Math.pow(2,52)),e*Math.pow(2,r-52)*a)}(n,i)},il=Yc,Nl=function(i){return Array.isArray(i)||typeof Uint8Array<"u"&&i instanceof Uint8Array};Et&&(Hs=function(i,e){if(!Buffer.isBuffer(i))return tc(i,e);var r=i.readUInt32LE(e);return r>0?i.toString("utf8",e+4,e+4+r-1):""},xs=function(i,e){if(!Buffer.isBuffer(i))return tl(i,e);var r=i.readUInt32LE(e);return r>0?i.toString("utf8",e+4,e+4+r-1):""},gl=function(i,e){if(!Buffer.isBuffer(i))return Lu(i,e);var r=2*i.readUInt32LE(e);return i.toString("utf16le",e+4,e+4+r-1)},ic=function(i,e){if(!Buffer.isBuffer(i))return Pu(i,e);var r=i.readUInt32LE(e);return i.toString("utf16le",e+4,e+4+r)},Fu=function(i,e){if(!Buffer.isBuffer(i))return bs(i,e);var r=i.readUInt32LE(e);return i.toString("utf8",e+4,e+4+r)},il=function(i,e){return Buffer.isBuffer(i)?i.readDoubleLE(e):Yc(i,e)},Nl=function(i){return Buffer.isBuffer(i)||Array.isArray(i)||typeof Uint8Array<"u"&&i instanceof Uint8Array}),typeof Mr<"u"&&function zl(){El=function(n,i,e){return Mr.utils.decode(1200,n.slice(i,e)).replace(_n,"")},ml=function(n,i,e){return Mr.utils.decode(65001,n.slice(i,e))},Hs=function(n,i){var e=ho(n,i);return e>0?Mr.utils.decode(Dn,n.slice(i+4,i+4+e-1)):""},xs=function(n,i){var e=ho(n,i);return e>0?Mr.utils.decode(Sn,n.slice(i+4,i+4+e-1)):""},gl=function(n,i){var e=2*ho(n,i);return e>0?Mr.utils.decode(1200,n.slice(i+4,i+4+e-1)):""},ic=function(n,i){var e=ho(n,i);return e>0?Mr.utils.decode(1200,n.slice(i+4,i+4+e)):""},Fu=function(n,i){var e=ho(n,i);return e>0?Mr.utils.decode(65001,n.slice(i+4,i+4+e)):""}}();var Yl=function(n,i){return n[i]},Xo=function(n,i){return 256*n[i+1]+n[i]},nc=function(n,i){var e=256*n[i+1]+n[i];return e<32768?e:-1*(65535-e+1)},ho=function(n,i){return n[i+3]*(1<<24)+(n[i+2]<<16)+(n[i+1]<<8)+n[i]},kl=function(n,i){return n[i+3]<<24|n[i+2]<<16|n[i+1]<<8|n[i]},Gc=function(n,i){return n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]};function Gl(n,i){var r,a,d,p,D,P,e="",o=[];switch(i){case"dbcs":if(P=this.l,Et&&Buffer.isBuffer(this))e=this.slice(this.l,this.l+2*n).toString("utf16le");else for(D=0;D<n;++D)e+=String.fromCharCode(Xo(this,P)),P+=2;n*=2;break;case"utf8":e=ml(this,this.l,this.l+n);break;case"utf16le":e=El(this,this.l,this.l+(n*=2));break;case"wstr":if(!(typeof Mr<"u"))return Gl.call(this,n,"dbcs");e=Mr.utils.decode(Sn,this.slice(this.l,this.l+2*n)),n*=2;break;case"lpstr-ansi":e=Hs(this,this.l),n=4+ho(this,this.l);break;case"lpstr-cp":e=xs(this,this.l),n=4+ho(this,this.l);break;case"lpwstr":e=gl(this,this.l),n=4+2*ho(this,this.l);break;case"lpp4":n=4+ho(this,this.l),e=ic(this,this.l),2&n&&(n+=2);break;case"8lpp4":n=4+ho(this,this.l),e=Fu(this,this.l),3&n&&(n+=4-(3&n));break;case"cstr":for(n=0,e="";0!==(d=Yl(this,this.l+n++));)o.push(xr(d));e=o.join("");break;case"_wstr":for(n=0,e="";0!==(d=Xo(this,this.l+n));)o.push(xr(d)),n+=2;n+=2,e=o.join("");break;case"dbcs-cont":for(e="",P=this.l,D=0;D<n;++D){if(this.lens&&-1!==this.lens.indexOf(P))return d=Yl(this,P),this.l=P+1,p=Gl.call(this,n-D,d?"dbcs-cont":"sbcs-cont"),o.join("")+p;o.push(xr(Xo(this,P))),P+=2}e=o.join(""),n*=2;break;case"cpstr":if(typeof Mr<"u"){e=Mr.utils.decode(Sn,this.slice(this.l,this.l+n));break}case"sbcs-cont":for(e="",P=this.l,D=0;D!=n;++D){if(this.lens&&-1!==this.lens.indexOf(P))return d=Yl(this,P),this.l=P+1,p=Gl.call(this,n-D,d?"dbcs-cont":"sbcs-cont"),o.join("")+p;o.push(xr(Yl(this,P))),P+=1}e=o.join("");break;default:switch(n){case 1:return r=Yl(this,this.l),this.l++,r;case 2:return r=("i"===i?nc:Xo)(this,this.l),this.l+=2,r;case 4:case-4:return"i"!==i&&128&this[this.l+3]?(a=ho(this,this.l),this.l+=4,a):(r=(n>0?kl:Gc)(this,this.l),this.l+=4,r);case 8:case-8:if("f"===i)return a=8==n?il(this,this.l):il([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;n=8;case 16:e=ol(this,this.l,n)}}return this.l+=n,e}var fu=function(n,i,e){n[e]=255&i,n[e+1]=i>>>8&255,n[e+2]=i>>>16&255,n[e+3]=i>>>24&255},Kd=function(n,i,e){n[e]=255&i,n[e+1]=i>>8&255,n[e+2]=i>>16&255,n[e+3]=i>>24&255},pu=function(n,i,e){n[e]=255&i,n[e+1]=i>>>8&255};function yo(n,i,e){var r=0,a=0;if("dbcs"===e){for(a=0;a!=i.length;++a)pu(this,i.charCodeAt(a),this.l+2*a);r=2*i.length}else if("sbcs"===e){if(typeof Mr<"u"&&874==Dn)for(a=0;a!=i.length;++a){var o=Mr.utils.encode(Dn,i.charAt(a));this[this.l+a]=o[0]}else for(i=i.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=i.length;++a)this[this.l+a]=255&i.charCodeAt(a);r=i.length}else{if("hex"===e){for(;a<n;++a)this[this.l++]=parseInt(i.slice(2*a,2*a+2),16)||0;return this}if("utf16le"===e){var d=Math.min(this.l+n,this.length);for(a=0;a<Math.min(i.length,n);++a){var p=i.charCodeAt(a);this[this.l++]=255&p,this[this.l++]=p>>8}for(;this.l<d;)this[this.l++]=0;return this}switch(n){case 1:r=1,this[this.l]=255&i;break;case 2:r=2,this[this.l]=255&i,this[this.l+1]=255&(i>>>=8);break;case 3:r=3,this[this.l]=255&i,this[this.l+1]=255&(i>>>=8),this[this.l+2]=255&(i>>>=8);break;case 4:r=4,fu(this,i,this.l);break;case 8:if(r=8,"f"===e){!function Wa(n,i,e){var r=(i<0||1/i==-1/0?1:0)<<7,a=0,o=0,d=r?-i:i;isFinite(d)?0==d?a=o=0:(a=Math.floor(Math.log(d)/Math.LN2),o=d*Math.pow(2,52-a),a<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?a=-1022:(o-=Math.pow(2,52),a+=1023)):(a=2047,o=isNaN(i)?26985:0);for(var p=0;p<=5;++p,o/=256)n[e+p]=255&o;n[e+6]=(15&a)<<4|15&o,n[e+7]=a>>4|r}(this,i,this.l);break}case 16:break;case-4:r=4,Kd(this,i,this.l)}}return this.l+=r,this}function dr(n,i){var e=ol(this,this.l,n.length>>1);if(e!==n)throw new Error(i+"Expected "+n+" saw "+e);this.l+=n.length>>1}function v(n,i){n.l=i,n.read_shift=Gl,n.chk=dr,n.write_shift=yo}function O(n,i){n.l+=i}function W(n){var i=Je(n);return v(i,0),i}function he(n,i,e){if(n){var r,a,o;v(n,n.l||0);for(var d=n.length,p=0,D=0;n.l<d;){128&(p=n.read_shift(1))&&(p=(127&p)+((127&n.read_shift(1))<<7));var P=j1[p]||j1[65535];for(o=127&(r=n.read_shift(1)),a=1;a<4&&128&r;++a)o+=(127&(r=n.read_shift(1)))<<7*a;D=n.l+o;var B=P.f&&P.f(n,o,e);if(n.l=D,i(B,P,p))return}}}function Ie(){var n=[],i=Et?256:2048,e=function(P){var B=W(P);return v(B,0),B},r=e(i),a=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&n.push(r),r=null)},o=function(P){return r&&P<r.length-r.l?r:(a(),r=e(Math.max(P+1,i)))};return{next:o,push:function(P){a(),null==(r=P).l&&(r.l=r.length),o(i)},end:function(){return a(),Bi(n)},_bufs:n}}function Ye(n,i,e,r){var o,a=+i;if(!isNaN(a)){r||(r=j1[a].p||(e||[]).length||0),o=1+(a>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var d=n.next(o);a<=127?d.write_shift(1,a):(d.write_shift(1,128+(127&a)),d.write_shift(1,a>>7));for(var p=0;4!=p;++p){if(!(r>=128)){d.write_shift(1,r);break}d.write_shift(1,128+(127&r)),r>>=7}r>0&&Nl(e)&&n.push(e)}}function ni(n,i,e){var r=ts(n);if(i.s?(r.cRel&&(r.c+=i.s.c),r.rRel&&(r.r+=i.s.r)):(r.cRel&&(r.c+=i.c),r.rRel&&(r.r+=i.r)),!e||e.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Ri(n,i,e){var r=ts(n);return r.s=ni(r.s,i.s,e),r.e=ni(r.e,i.s,e),r}function on(n,i){if(n.cRel&&n.c<0)for(n=ts(n);n.c<0;)n.c+=i>8?16384:256;if(n.rRel&&n.r<0)for(n=ts(n);n.r<0;)n.r+=i>8?1048576:i>5?65536:16384;var e=xa(n);return!n.cRel&&null!=n.cRel&&(e=function To(n){return n.replace(/^([A-Z])/,"$$$1")}(e)),!n.rRel&&null!=n.rRel&&(e=function Ha(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(e)),e}function Zn(n,i){return 0!=n.s.r||n.s.rRel||n.e.r!=(i.biff>=12?1048575:i.biff>=8?65536:16384)||n.e.rRel?0!=n.s.c||n.s.cRel||n.e.c!=(i.biff>=12?16383:255)||n.e.cRel?on(n.s,i.biff)+":"+on(n.e,i.biff):(n.s.rRel?"":"$")+gr(n.s.r)+":"+(n.e.rRel?"":"$")+gr(n.e.r):(n.s.cRel?"":"$")+Va(n.s.c)+":"+(n.e.cRel?"":"$")+Va(n.e.c)}function Ar(n){return parseInt(function is(n){return n.replace(/\$(\d+)$/,"$1")}(n),10)-1}function gr(n){return""+(n+1)}function xo(n){for(var i=function Hl(n){return n.replace(/^\$([A-Z])/,"$1")}(n),e=0,r=0;r!==i.length;++r)e=26*e+i.charCodeAt(r)-64;return e-1}function Va(n){if(n<0)throw new Error("invalid column "+n);var i="";for(++n;n;n=Math.floor((n-1)/26))i=String.fromCharCode((n-1)%26+65)+i;return i}function Qa(n){for(var i=0,e=0,r=0;r<n.length;++r){var a=n.charCodeAt(r);a>=48&&a<=57?i=10*i+(a-48):a>=65&&a<=90&&(e=26*e+(a-64))}return{c:e-1,r:i-1}}function xa(n){for(var i=n.c+1,e="";i;i=(i-1)/26|0)e=String.fromCharCode((i-1)%26+65)+e;return e+(n.r+1)}function Go(n){var i=n.indexOf(":");return-1==i?{s:Qa(n),e:Qa(n)}:{s:Qa(n.slice(0,i)),e:Qa(n.slice(i+1))}}function ba(n,i){return typeof i>"u"||"number"==typeof i?ba(n.s,n.e):("string"!=typeof n&&(n=xa(n)),"string"!=typeof i&&(i=xa(i)),n==i?n:n+":"+i)}function ls(n){var i={s:{c:0,r:0},e:{c:0,r:0}},e=0,r=0,a=0,o=n.length;for(e=0;r<o&&!((a=n.charCodeAt(r)-64)<1||a>26);++r)e=26*e+a;for(i.s.c=--e,e=0;r<o&&!((a=n.charCodeAt(r)-48)<0||a>9);++r)e=10*e+a;if(i.s.r=--e,r===o||10!=a)return i.e.c=i.s.c,i.e.r=i.s.r,i;for(++r,e=0;r!=o&&!((a=n.charCodeAt(r)-64)<1||a>26);++r)e=26*e+a;for(i.e.c=--e,e=0;r!=o&&!((a=n.charCodeAt(r)-48)<0||a>9);++r)e=10*e+a;return i.e.r=--e,i}function se(n,i,e){return null==n||null==n.t||"z"==n.t?"":void 0!==n.w?n.w:("d"==n.t&&!n.z&&e&&e.dateNF&&(n.z=e.dateNF),"e"==n.t?ri[n.v]||n.v:function Ge(n,i){var e="d"==n.t&&i instanceof Date;if(null!=n.z)try{return n.w=va(n.z,e?Es(i):i)}catch{}try{return n.w=va((n.XF||{}).numFmtId||(e?14:0),e?Es(i):i)}catch{return""+i}}(n,null==i?n.v:i))}function me(n,i){var e=i&&i.sheet?i.sheet:"Sheet1",r={};return r[e]=n,{SheetNames:[e],Sheets:r}}function Ve(n,i,e){var r=e||{},a=n?Array.isArray(n):r.dense;null!=Dr&&null==a&&(a=Dr);var o=n||(a?[]:{}),d=0,p=0;if(o&&null!=r.origin){if("number"==typeof r.origin)d=r.origin;else{var D="string"==typeof r.origin?Qa(r.origin):r.origin;d=D.r,p=D.c}o["!ref"]||(o["!ref"]="A1:A1")}var P={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var B=ls(o["!ref"]);P.s.c=B.s.c,P.s.r=B.s.r,P.e.c=Math.max(P.e.c,B.e.c),P.e.r=Math.max(P.e.r,B.e.r),-1==d&&(P.e.r=d=B.e.r+1)}for(var te=0;te!=i.length;++te)if(i[te]){if(!Array.isArray(i[te]))throw new Error("aoa_to_sheet expects an array of arrays");for(var ae=0;ae!=i[te].length;++ae)if(!(typeof i[te][ae]>"u")){var oe={v:i[te][ae]},ge=d+te,ue=p+ae;if(P.s.r>ge&&(P.s.r=ge),P.s.c>ue&&(P.s.c=ue),P.e.r<ge&&(P.e.r=ge),P.e.c<ue&&(P.e.c=ue),!i[te][ae]||"object"!=typeof i[te][ae]||Array.isArray(i[te][ae])||i[te][ae]instanceof Date)if(Array.isArray(oe.v)&&(oe.f=i[te][ae][1],oe.v=oe.v[0]),null===oe.v)if(oe.f)oe.t="n";else if(r.nullError)oe.t="e",oe.v=0;else{if(!r.sheetStubs)continue;oe.t="z"}else"number"==typeof oe.v?oe.t="n":"boolean"==typeof oe.v?oe.t="b":oe.v instanceof Date?(oe.z=r.dateNF||st[14],r.cellDates?(oe.t="d",oe.w=va(oe.z,Es(oe.v))):(oe.t="n",oe.v=Es(oe.v),oe.w=va(oe.z,oe.v))):oe.t="s";else oe=i[te][ae];if(a)o[ge]||(o[ge]=[]),o[ge][ue]&&o[ge][ue].z&&(oe.z=o[ge][ue].z),o[ge][ue]=oe;else{var Te=xa({c:ue,r:ge});o[Te]&&o[Te].z&&(oe.z=o[Te].z),o[Te]=oe}}}return P.s.c<1e7&&(o["!ref"]=ba(P)),o}function Ee(n,i){return Ve(null,n,i)}function vr(n,i){return i||(i=W(4)),i.write_shift(4,n),i}function Xr(n){var i=n.read_shift(4);return 0===i?"":n.read_shift(i,"dbcs")}function hr(n,i){var e=!1;return null==i&&(e=!0,i=W(4+2*n.length)),i.write_shift(4,n.length),n.length>0&&i.write_shift(0,n,"dbcs"),e?i.slice(0,i.l):i}function So(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function Hf(n,i){var e=n.l,r=n.read_shift(1),a=Xr(n),o=[],d={t:a,h:a};if(1&r){for(var p=n.read_shift(4),D=0;D!=p;++D)o.push(So(n));d.r=o}else d.r=[{ich:0,ifnt:0}];return n.l=e+i,d}var n0=Hf;function qo(n){var i=n.read_shift(4),e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:i,iStyleRef:e}}function Th(n,i){return null==i&&(i=W(8)),i.write_shift(-4,n.c),i.write_shift(3,n.iStyleRef||n.s),i.write_shift(1,0),i}function rc(n){var i=n.read_shift(2);return i+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:i}}function Ho(n,i){return null==i&&(i=W(4)),i.write_shift(3,n.iStyleRef||n.s),i.write_shift(1,0),i}var mu=Xr,Qd=hr;function ac(n){var i=n.read_shift(4);return 0===i||4294967295===i?"":n.read_shift(i,"dbcs")}function Tr(n,i){var e=!1;return null==i&&(e=!0,i=W(127)),i.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&i.write_shift(0,n,"dbcs"),e?i.slice(0,i.l):i}var im=Xr,Bu=ac,Pd=Tr;function Fd(n){var i=n.slice(n.l,n.l+4),e=1&i[0],r=2&i[0];n.l+=4;var a=0===r?il([0,0,0,0,252&i[0],i[1],i[2],i[3]],0):kl(i,0)>>2;return e?a/100:a}function mr(n,i){null==i&&(i=W(4));var e=0,r=0,a=100*n;if(n==(0|n)&&n>=-(1<<29)&&n<1<<29?r=1:a==(0|a)&&a>=-(1<<29)&&a<1<<29&&(r=1,e=1),!r)throw new Error("unsupported RkNumber "+n);i.write_shift(-4,((e?a:n)<<2)+(e+2))}function uf(n){var i={s:{},e:{}};return i.s.r=n.read_shift(4),i.e.r=n.read_shift(4),i.s.c=n.read_shift(4),i.e.c=n.read_shift(4),i}var gu=uf,eh=function r0(n,i){return i||(i=W(16)),i.write_shift(4,n.s.r),i.write_shift(4,n.e.r),i.write_shift(4,n.s.c),i.write_shift(4,n.e.c),i};function sc(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function oc(n,i){return(i||W(8)).write_shift(8,n,"f")}function Vc(n,i){if(i||(i=W(8)),!n||n.auto)return i.write_shift(4,0),i.write_shift(4,0),i;null!=n.index?(i.write_shift(1,2),i.write_shift(1,n.index)):null!=n.theme?(i.write_shift(1,6),i.write_shift(1,n.theme)):(i.write_shift(1,5),i.write_shift(1,0));var e=n.tint||0;if(e>0?e*=32767:e<0&&(e*=32768),i.write_shift(2,e),n.rgb&&null==n.theme){var r=n.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),i.write_shift(1,parseInt(r.slice(0,2),16)),i.write_shift(1,parseInt(r.slice(2,4),16)),i.write_shift(1,parseInt(r.slice(4,6),16)),i.write_shift(1,255)}else i.write_shift(2,0),i.write_shift(1,0),i.write_shift(1,0);return i}function Cp(n,i){var r=n.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[n.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return n.l-=4,n.read_shift(0,1==i?"lpstr":"lpwstr")}var f=2,_=3,Y=12,yt=81,bt=[80,yt],Tt={1:{n:"CodePage",t:f},2:{n:"Category",t:80},3:{n:"PresentationFormat",t:80},4:{n:"ByteCount",t:_},5:{n:"LineCount",t:_},6:{n:"ParagraphCount",t:_},7:{n:"SlideCount",t:_},8:{n:"NoteCount",t:_},9:{n:"HiddenCount",t:_},10:{n:"MultimediaClipCount",t:_},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:80},15:{n:"Company",t:80},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:_},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:_,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:80},27:{n:"ContentStatus",t:80},28:{n:"Language",t:80},29:{n:"Version",t:80},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Ne={1:{n:"CodePage",t:f},2:{n:"Title",t:80},3:{n:"Subject",t:80},4:{n:"Author",t:80},5:{n:"Keywords",t:80},6:{n:"Comments",t:80},7:{n:"Template",t:80},8:{n:"LastAuthor",t:80},9:{n:"RevNumber",t:80},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:_},15:{n:"WordCount",t:_},16:{n:"CharCount",t:_},17:{n:"Thumbnail",t:71},18:{n:"Application",t:80},19:{n:"DocSecurity",t:_},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},_t={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},zt=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Gt(n){return n.map(function(i){return[i>>16&255,i>>8&255,255&i]})}var hi=ts(Gt([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),ri={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Oi={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ai={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Gi={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function un(n,i){var a,e=function Xa(n){for(var i=[],e=no(n),r=0;r!==e.length;++r)null==i[n[e[r]]]&&(i[n[e[r]]]=[]),i[n[e[r]]].push(e[r]);return i}(Ai),r=[];r[r.length]=Ys,r[r.length]=or("Types",null,{xmlns:Ei.CT,"xmlns:xsd":Ei.xsd,"xmlns:xsi":Ei.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(D){return or("Default",null,{Extension:D[0],ContentType:D[1]})}));var o=function(D){n[D]&&n[D].length>0&&(r[r.length]=or("Override",null,{PartName:("/"==(a=n[D][0])[0]?"":"/")+a,ContentType:Gi[D][i.bookType]||Gi[D].xlsx}))},d=function(D){(n[D]||[]).forEach(function(P){r[r.length]=or("Override",null,{PartName:("/"==P[0]?"":"/")+P,ContentType:Gi[D][i.bookType]||Gi[D].xlsx})})},p=function(D){(n[D]||[]).forEach(function(P){r[r.length]=or("Override",null,{PartName:("/"==P[0]?"":"/")+P,ContentType:e[D][0]})})};return o("workbooks"),d("sheets"),d("charts"),p("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(p),p("vba"),p("comments"),p("threadedcomments"),p("drawings"),d("metadata"),p("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var ki={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function An(n){var i=n.lastIndexOf("/");return n.slice(0,i+1)+"_rels/"+n.slice(i+1)+".rels"}function Ui(n,i){var e={"!id":{}};if(!n)return e;"/"!==i.charAt(0)&&(i="/"+i);var r={};return(n.match(Wo)||[]).forEach(function(a){var o=oa(a);if("<Relationship"===o[0]){var d={};d.Type=o.Type,d.Target=o.Target,d.Id=o.Id,o.TargetMode&&(d.TargetMode=o.TargetMode);var p="External"===o.TargetMode?o.Target:Iu(o.Target,i);e[p]=d,r[o.Id]=d}}),e["!id"]=r,e}function cn(n){var i=[Ys,or("Relationships",null,{xmlns:Ei.RELS})];return no(n["!id"]).forEach(function(e){i[i.length]=or("Relationship",null,n["!id"][e])}),i.length>2&&(i[i.length]="</Relationships>",i[1]=i[1].replace("/>",">")),i.join("")}function bn(n,i,e,r,a,o){if(a||(a={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),i<0)for(i=n["!idx"];n["!id"]["rId"+i];++i);if(n["!idx"]=i+1,a.Id="rId"+i,a.Type=r,a.Target=e,o?a.TargetMode=o:[ki.HLINK,ki.XPATH,ki.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),n["!id"][a.Id])throw new Error("Cannot rewrite rId "+i);return n["!id"][a.Id]=a,n[("/"+a.Target).replace("//","/")]=a,i}var Bn="application/vnd.oasis.opendocument.spreadsheet";function wa(n,i,e){return['  <rdf:Description rdf:about="'+n+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(e||"odf")+"#"+i+'"/>\n',"  </rdf:Description>\n"].join("")}function Ir(n,i){return['  <rdf:Description rdf:about="'+n+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+i+'"/>\n',"  </rdf:Description>\n"].join("")}function Ua(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ar.version+"</meta:generator></office:meta></office:document-meta>"}var qr=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ta=function(){for(var n=new Array(qr.length),i=0;i<qr.length;++i){var e=qr[i],r="(?:"+e[0].slice(0,e[0].indexOf(":"))+":)"+e[0].slice(e[0].indexOf(":")+1);n[i]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return n}();function ns(n){var i={};n=Rs(n);for(var e=0;e<qr.length;++e){var r=qr[e],a=n.match(ta[e]);null!=a&&a.length>0&&(i[r[1]]=qa(a[1])),"date"===r[2]&&i[r[1]]&&(i[r[1]]=Cs(i[r[1]]))}return i}function Xs(n,i,e,r,a){null!=a[n]||null==i||""===i||(a[n]=i,i=$a(i),r[r.length]=e?or(n,i,e):Ss(n,i))}function ro(n,i){var e=i||{},r=[Ys,or("cp:coreProperties",null,{"xmlns:cp":Ei.CORE_PROPS,"xmlns:dc":Ei.dc,"xmlns:dcterms":Ei.dcterms,"xmlns:dcmitype":Ei.dcmitype,"xmlns:xsi":Ei.xsi})],a={};if(!n&&!e.Props)return r.join("");n&&(null!=n.CreatedDate&&Xs("dcterms:created","string"==typeof n.CreatedDate?n.CreatedDate:Bl(n.CreatedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),null!=n.ModifiedDate&&Xs("dcterms:modified","string"==typeof n.ModifiedDate?n.ModifiedDate:Bl(n.ModifiedDate,e.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var o=0;o!=qr.length;++o){var d=qr[o],p=e.Props&&null!=e.Props[d[1]]?e.Props[d[1]]:n?n[d[1]]:null;!0===p?p="1":!1===p?p="0":"number"==typeof p&&(p=String(p)),null!=p&&Xs(d[0],p,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Vs=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Ec=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function vl(n,i,e,r){var a=[];if("string"==typeof n)a=Fl(n,r);else for(var o=0;o<n.length;++o)a=a.concat(n[o].map(function(B){return{v:B}}));var d="string"==typeof i?Fl(i,r).map(function(B){return B.v}):i,p=0,D=0;if(d.length>0)for(var P=0;P!==a.length;P+=2){switch(D=+a[P+1].v,a[P].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":e.Worksheets=D,e.SheetNames=d.slice(p,p+D);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":e.NamedRanges=D,e.DefinedNames=d.slice(p,p+D);break;case"Charts":case"Diagramme":e.Chartsheets=D,e.ChartNames=d.slice(p,p+D)}p+=D}}function Nu(n){var i=[],e=or;return n||(n={}),n.Application="SheetJS",i[i.length]=Ys,i[i.length]=or("Properties",null,{xmlns:Ei.EXT_PROPS,"xmlns:vt":Ei.vt}),Vs.forEach(function(r){if(void 0!==n[r[1]]){var a;switch(r[2]){case"string":a=$a(String(n[r[1]]));break;case"bool":a=n[r[1]]?"true":"false"}void 0!==a&&(i[i.length]=e(r[0],a))}}),i[i.length]=e("HeadingPairs",e("vt:vector",e("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+e("vt:variant",e("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),i[i.length]=e("TitlesOfParts",e("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+$a(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),i.length>2&&(i[i.length]="</Properties>",i[1]=i[1].replace("/>",">")),i.join("")}var Do=/<[^>]+>[^<]*/g;function Ls(n){var i=[Ys,or("Properties",null,{xmlns:Ei.CUST_PROPS,"xmlns:vt":Ei.vt})];if(!n)return i.join("");var e=1;return no(n).forEach(function(a){++e,i[i.length]=or("property",function Ou(n,i){switch(typeof n){case"string":var e=or("vt:lpwstr",$a(n));return i&&(e=e.replace(/&quot;/g,"_x0022_")),e;case"number":return or((0|n)==n?"vt:i4":"vt:r8",$a(String(n)));case"boolean":return or("vt:bool",n?"true":"false")}if(n instanceof Date)return or("vt:filetime",Bl(n));throw new Error("Unable to serialize "+n)}(n[a],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e,name:$a(a)})}),i.length>2&&(i[i.length]="</Properties>",i[1]=i[1].replace("/>",">")),i.join("")}var lc,fo={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function po(n,i,e){lc||(lc=Od(fo)),n[i=lc[i]||i]=e}function iu(n){var i=n.read_shift(4),e=n.read_shift(4);return new Date(1e3*(e/1e7*Math.pow(2,32)+i/1e7-11644473600)).toISOString().replace(/\.000/,"")}function od(n,i,e){var r=n.l,a=n.read_shift(0,"lpstr-cp");if(e)for(;n.l-r&3;)++n.l;return a}function yd(n,i,e){var r=n.read_shift(0,"lpwstr");return e&&(n.l+=4-(r.length+1&3)&3),r}function xd(n,i,e){return 31===i?yd(n):od(n,0,e)}function Dh(n,i,e){return xd(n,i,!1===e?0:4)}function As(n){var i=n.l,e=Uf(n,yt);return 0==n[n.l]&&0==n[n.l+1]&&n.l-i&2&&(n.l+=2),[e,Uf(n,_)]}function rm(n,i){for(var e=n.read_shift(4),r={},a=0;a!=e;++a){var o=n.read_shift(4),d=n.read_shift(4);r[o]=n.read_shift(d,1200===i?"utf16le":"utf8").replace(_n,"").replace(Vi,"!"),1200===i&&d%2&&(n.l+=2)}return 3&n.l&&(n.l=n.l>>3<<2),r}function Ah(n){var i=n.read_shift(4),e=n.slice(n.l,n.l+i);return n.l+=i,(3&i)>0&&(n.l+=4-(3&i)&3),e}function Uf(n,i,e){var a,r=n.read_shift(2),o=e||{};if(n.l+=2,i!==Y&&r!==i&&-1===bt.indexOf(i)&&(4126!=(65534&i)||4126!=(65534&r)))throw new Error("Expected type "+i+" saw "+r);switch(i===Y?r:i){case 2:return a=n.read_shift(2,"i"),o.raw||(n.l+=2),a;case 3:return n.read_shift(4,"i");case 11:return 0!==n.read_shift(4);case 19:return n.read_shift(4);case 30:return od(n,0,4).replace(_n,"");case 31:return yd(n);case 64:return iu(n);case 65:return Ah(n);case 71:return function Zm(n){var i={};return i.Size=n.read_shift(4),n.l+=i.Size+3-(i.Size-1)%4,i}(n);case 80:return Dh(n,r,!o.raw).replace(_n,"");case 81:return function th(n,i){if(!i)throw new Error("VtUnalignedString must have positive length");return xd(n,i,0)}(n,r).replace(_n,"");case 4108:return function vv(n){for(var i=n.read_shift(4),e=[],r=0;r<i/2;++r)e.push(As(n));return e}(n);case 4126:case 4127:return 4127==r?function $h(n){for(var i=n.read_shift(4),e=[],r=0;r!=i;++r){var a=n.l;e[r]=n.read_shift(0,"lpwstr").replace(_n,""),n.l-a&2&&(n.l+=2)}return e}(n):function Zo(n){for(var i=n.read_shift(4),e=[],r=0;r!=i;++r)e[r]=n.read_shift(0,"lpstr-cp").replace(_n,"");return e}(n);default:throw new Error("TypedPropertyValue unrecognized type "+i+" "+r)}}function Ep(n,i){var e=W(4),r=W(4);switch(e.write_shift(4,80==n?31:n),n){case 3:r.write_shift(-4,i);break;case 5:(r=W(8)).write_shift(8,i,"f");break;case 11:r.write_shift(4,i?1:0);break;case 64:r=function _d(n){var e=("string"==typeof n?new Date(Date.parse(n)):n).getTime()/1e3+11644473600,r=e%Math.pow(2,32),a=(e-r)/Math.pow(2,32);a*=1e7;var o=(r*=1e7)/Math.pow(2,32)|0;o>0&&(r%=Math.pow(2,32),a+=o);var d=W(8);return d.write_shift(4,r),d.write_shift(4,a),d}(i);break;case 31:case 80:for((r=W(4+2*(i.length+1)+(i.length%2?0:2))).write_shift(4,i.length+1),r.write_shift(0,i,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+i)}return Bi([e,r])}function Tl(n,i){var e=n.l,r=n.read_shift(4),a=n.read_shift(4),o=[],d=0,p=0,D=-1,P={};for(d=0;d!=a;++d){var B=n.read_shift(4),te=n.read_shift(4);o[d]=[B,te+e]}o.sort(function(ht,ut){return ht[1]-ut[1]});var ae={};for(d=0;d!=a;++d){if(n.l!==o[d][1]){var oe=!0;if(d>0&&i)switch(i[o[d-1][0]].t){case 2:n.l+2===o[d][1]&&(n.l+=2,oe=!1);break;case 80:case 4108:n.l<=o[d][1]&&(n.l=o[d][1],oe=!1)}if((!i||0==d)&&n.l<=o[d][1]&&(oe=!1,n.l=o[d][1]),oe)throw new Error("Read Error: Expected address "+o[d][1]+" at "+n.l+" :"+d)}if(i){var ge=i[o[d][0]];if(ae[ge.n]=Uf(n,ge.t,{raw:!0}),"version"===ge.p&&(ae[ge.n]=String(ae[ge.n]>>16)+"."+("0000"+String(65535&ae[ge.n])).slice(-4)),"CodePage"==ge.n)switch(ae[ge.n]){case 0:ae[ge.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:lr(p=ae[ge.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+ae[ge.n])}}else if(1===o[d][0]){if(p=ae.CodePage=Uf(n,f),lr(p),-1!==D){var ue=n.l;n.l=o[D][1],P=rm(n,p),n.l=ue}}else if(0===o[d][0]){if(0===p){D=d,n.l=o[d+1][1];continue}P=rm(n,p)}else{var qe,Te=P[o[d][0]];switch(n[n.l]){case 65:n.l+=4,qe=Ah(n);break;case 30:case 31:n.l+=4,qe=Dh(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 3:n.l+=4,qe=n.read_shift(4,"i");break;case 19:n.l+=4,qe=n.read_shift(4);break;case 5:n.l+=4,qe=n.read_shift(8,"f");break;case 11:n.l+=4,qe=Lo(n,4);break;case 64:n.l+=4,qe=Cs(iu(n));break;default:throw new Error("unparsed value: "+n[n.l])}ae[Te]=qe}}return n.l=e+r,ae}var kp=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Tp(n){switch(typeof n){case"boolean":return 11;case"number":return(0|n)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64}return-1}function Sp(n,i,e){var r=W(8),a=[],o=[],d=8,p=0,D=W(8),P=W(8);if(D.write_shift(4,2),D.write_shift(4,1200),P.write_shift(4,1),o.push(D),a.push(P),d+=8+D.length,!i){(P=W(8)).write_shift(4,0),a.unshift(P);var B=[W(4)];for(B[0].write_shift(4,n.length),p=0;p<n.length;++p){var te=n[p][0];for((D=W(8+2*(te.length+1)+(te.length%2?0:2))).write_shift(4,p+2),D.write_shift(4,te.length+1),D.write_shift(0,te,"dbcs");D.l!=D.length;)D.write_shift(1,0);B.push(D)}D=Bi(B),o.unshift(D),d+=8+D.length}for(p=0;p<n.length;++p)if((!i||i[n[p][0]])&&!(kp.indexOf(n[p][0])>-1||Ec.indexOf(n[p][0])>-1)&&null!=n[p][1]){var ae=n[p][1],oe=0;if(i){var ge=e[oe=+i[n[p][0]]];if("version"==ge.p&&"string"==typeof ae){var ue=ae.split(".");ae=(+ue[0]<<16)+(+ue[1]||0)}D=Ep(ge.t,ae)}else{var Te=Tp(ae);-1==Te&&(Te=31,ae=String(ae)),D=Ep(Te,ae)}o.push(D),(P=W(8)).write_shift(4,i?oe:2+p),a.push(P),d+=8+D.length}var qe=8*(o.length+1);for(p=0;p<o.length;++p)a[p].write_shift(4,qe),qe+=o[p].length;return r.write_shift(4,d),r.write_shift(4,o.length),Bi([r].concat(a).concat(o))}function Km(n,i,e){var r=n.content;if(!r)return{};v(r,0);var a,o,d,p,D=0;r.chk("feff","Byte Order: "),r.read_shift(2);var P=r.read_shift(4),B=r.read_shift(16);if(B!==$r.utils.consts.HEADER_CLSID&&B!==e)throw new Error("Bad PropertySet CLSID "+B);if(1!==(a=r.read_shift(4))&&2!==a)throw new Error("Unrecognized #Sets: "+a);if(o=r.read_shift(16),p=r.read_shift(4),1===a&&p!==r.l)throw new Error("Length mismatch: "+p+" !== "+r.l);2===a&&(d=r.read_shift(16),D=r.read_shift(4));var ge,te=Tl(r,i),ae={SystemIdentifier:P};for(var oe in te)ae[oe]=te[oe];if(ae.FMTID=o,1===a)return ae;if(D-r.l==2&&(r.l+=2),r.l!==D)throw new Error("Length mismatch 2: "+r.l+" !== "+D);try{ge=Tl(r,null)}catch{}for(oe in ge)ae[oe]=ge[oe];return ae.FMTID=[o,d],ae}function Jm(n,i,e,r,a,o){var d=W(a?68:48),p=[d];d.write_shift(2,65534),d.write_shift(2,0),d.write_shift(4,842412599),d.write_shift(16,$r.utils.consts.HEADER_CLSID,"hex"),d.write_shift(4,a?2:1),d.write_shift(16,i,"hex"),d.write_shift(4,a?68:48);var D=Sp(n,e,r);if(p.push(D),a){var P=Sp(a,null,null);d.write_shift(16,o,"hex"),d.write_shift(4,68+D.length),p.push(P)}return Bi(p)}function Vl(n,i){return n.read_shift(i),null}function Lo(n,i){return 1===n.read_shift(i)}function Vo(n,i){return i||(i=W(2)),i.write_shift(2,+!!n),i}function Ps(n){return n.read_shift(2,"u")}function Sl(n,i){return i||(i=W(2)),i.write_shift(2,n),i}function nh(n,i){return function df(n,i,e){for(var r=[],a=n.l+i;n.l<a;)r.push(e(n,a-n.l));if(a!==n.l)throw new Error("Slurp error");return r}(n,i,Ps)}function am(n,i,e){return e||(e=W(2)),e.write_shift(1,"e"==i?+n:+!!n),e.write_shift(1,"e"==i?1:0),e}function bd(n,i,e){var r=n.read_shift(e&&e.biff>=12?2:1),a="sbcs-cont",o=Sn;e&&e.biff>=8&&(Sn=1200),e&&8!=e.biff?12==e.biff&&(a="wstr"):n.read_shift(1)&&(a="dbcs-cont"),e.biff>=2&&e.biff<=5&&(a="cpstr");var p=r?n.read_shift(r,a):"";return Sn=o,p}function Qm(n){var i=Sn;Sn=1200;var D,e=n.read_shift(2),r=n.read_shift(1),a=4&r,o=8&r,d=1+(1&r),p=0,P={};o&&(p=n.read_shift(2)),a&&(D=n.read_shift(4));var te=0===e?"":n.read_shift(e,2==d?"dbcs-cont":"sbcs-cont");return o&&(n.l+=4*p),a&&(n.l+=D),P.t=te,o||(P.raw="<t>"+P.t+"</t>",P.r=P.t),Sn=i,P}function ah(n){var i=n.t||"",r=W(3);r.write_shift(2,i.length),r.write_shift(1,1);var a=W(2*i.length);return a.write_shift(2*i.length,i,"utf16le"),Bi([r,a])}function _u(n,i,e){if(e){if(e.biff>=2&&e.biff<=5)return n.read_shift(i,"cpstr");if(e.biff>=12)return n.read_shift(i,"dbcs-cont")}var a=n.read_shift(1);return n.read_shift(i,0===a?"sbcs-cont":"dbcs-cont")}function jf(n,i,e){var r=n.read_shift(e&&2==e.biff?1:2);return 0===r?(n.l++,""):_u(n,r,e)}function Ul(n,i,e){if(e.biff>5)return jf(n,0,e);var r=n.read_shift(1);return 0===r?(n.l++,""):n.read_shift(r,e.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function eg(n,i,e){return e||(e=W(3+2*n.length)),e.write_shift(2,n.length),e.write_shift(1,1),e.write_shift(31,n,"utf16le"),e}function oh(n){var i=n.read_shift(4);return i>0?n.read_shift(i,"utf16le").replace(_n,""):""}function kc(n,i){i||(i=W(6+2*n.length)),i.write_shift(4,1+n.length);for(var e=0;e<n.length;++e)i.write_shift(2,n.charCodeAt(e));return i.write_shift(2,0),i}function nu(n){var i=W(512),e=0,r=n.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var a=r.indexOf("#"),o=a>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3}i.write_shift(4,2),i.write_shift(4,o);var d=[8,6815827,6619237,4849780,83];for(e=0;e<d.length;++e)i.write_shift(4,d[e]);if(28==o)kc(r=r.slice(1),i);else if(2&o){for(d="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),e=0;e<d.length;++e)i.write_shift(1,parseInt(d[e],16));var p=a>-1?r.slice(0,a):r;for(i.write_shift(4,2*(p.length+1)),e=0;e<p.length;++e)i.write_shift(2,p.charCodeAt(e));i.write_shift(2,0),8&o&&kc(a>-1?r.slice(a+1):"",i)}else{for(d="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),e=0;e<d.length;++e)i.write_shift(1,parseInt(d[e],16));for(var D=0;"../"==r.slice(3*D,3*D+3)||"..\\"==r.slice(3*D,3*D+3);)++D;for(i.write_shift(2,D),i.write_shift(4,r.length-3*D+1),e=0;e<r.length-3*D;++e)i.write_shift(1,255&r.charCodeAt(e+3*D));for(i.write_shift(1,0),i.write_shift(2,65535),i.write_shift(2,57005),e=0;e<6;++e)i.write_shift(4,0)}return i.slice(0,i.l)}function _l(n){return[n.read_shift(1),n.read_shift(1),n.read_shift(1),n.read_shift(1)]}function om(n,i){var e=_l(n);return e[3]=0,e}function ru(n){return{r:n.read_shift(2),c:n.read_shift(2),ixfe:n.read_shift(2)}}function yu(n,i,e,r){return r||(r=W(6)),r.write_shift(2,n),r.write_shift(2,i),r.write_shift(2,e||0),r}function Dp(n,i,e){var r=e.biff>8?4:2;return[n.read_shift(r),n.read_shift(r,"i"),n.read_shift(r,"i")]}function tg(n){return[n.read_shift(2),Fd(n)]}function Ih(n){var i=n.read_shift(2),e=n.read_shift(2);return{s:{c:n.read_shift(2),r:i},e:{c:n.read_shift(2),r:e}}}function Mh(n,i){return i||(i=W(8)),i.write_shift(2,n.s.r),i.write_shift(2,n.e.r),i.write_shift(2,n.s.c),i.write_shift(2,n.e.c),i}function um(n){var i=n.read_shift(2),e=n.read_shift(2);return{s:{c:n.read_shift(1),r:i},e:{c:n.read_shift(1),r:e}}}var hf=um;function Bd(n){n.l+=4;var i=n.read_shift(2),e=n.read_shift(2),r=n.read_shift(2);return n.l+=12,[e,i,r]}function jl(n){n.l+=2,n.l+=n.read_shift(2)}var cc={0:jl,4:jl,5:jl,6:jl,7:function $f(n){return n.l+=4,n.cf=n.read_shift(2),{}},8:jl,9:jl,10:jl,11:jl,12:jl,13:function wd(n){var i={};return n.l+=4,n.l+=16,i.fSharedNote=n.read_shift(2),n.l+=4,i},14:jl,15:jl,16:jl,17:jl,18:jl,19:jl,20:jl,21:Bd};function au(n,i){var e={BIFFVer:0,dt:0};switch(e.BIFFVer=n.read_shift(2),(i-=2)>=2&&(e.dt=n.read_shift(2),n.l-=2),e.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(i>6)throw new Error("Unexpected BIFF Ver "+e.BIFFVer)}return n.read_shift(i),e}function Cd(n,i,e){var r=1536,a=16;switch(e.bookType){case"biff8":case"xla":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;default:throw new Error("unsupported BIFF version")}var o=W(a);return o.write_shift(2,r),o.write_shift(2,i),a>4&&o.write_shift(2,29282),a>6&&o.write_shift(2,1997),a>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function ld(n,i){var e=!i||i.biff>=8?2:1,r=W(8+e*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),i.biff>=8&&r.write_shift(1,1),r.write_shift(e*n.name.length,n.name,i.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function zd(n,i,e){var r=0;e&&2==e.biff||(r=n.read_shift(2));var a=n.read_shift(2);return e&&2==e.biff&&(r=1-(a>>15),a&=32767),[{Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3},a]}function Tc(n,i,e,r){var a=e&&5==e.biff;r||(r=W(a?3+i.length:5+2*i.length)),r.write_shift(2,n),r.write_shift(a?1:2,i.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*i.length,i,a?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return null==o.l&&(o.l=o.length),o}var l0=Ul;function Yd(n,i,e){var r=n.l+i,a=8!=e.biff&&e.biff?2:4,o=n.read_shift(a),d=n.read_shift(a),p=n.read_shift(2),D=n.read_shift(2);return n.l=r,{s:{r:o,c:p},e:{r:d,c:D}}}function cd(n,i,e,r){var a=e&&5==e.biff;r||(r=W(a?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,i<<4));var o=0;return n.numFmtId>0&&a&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function mm(n,i,e){var r=ru(n);(2==e.biff||9==i)&&++n.l;var a=function rh(n){var i=n.read_shift(1);return 1===n.read_shift(1)?i:1===i}(n);return r.val=a,r.t=!0===a||!1===a?"b":"e",r}var vf=function lm(n,i,e){return 0===i?"":Ul(n,0,e)};function Zf(n,i,e){var a,r=n.read_shift(2),o={fBuiltIn:1&r,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return 14849===e.sbcch&&(a=function cm(n,i,e){n.l+=4;var r=n.l+(i-=4),a=bd(n,0,e),o=n.read_shift(2);if(o!==(r-=n.l))throw new Error("Malformed AddinUdf: padding = "+r+" != "+o);return n.l+=o,a}(n,i-2,e)),o.body=a||n.read_shift(i-2),"string"==typeof a&&(o.Name=a),o}var sg=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function _f(n,i,e){var r=n.l+i,a=n.read_shift(2),o=n.read_shift(1),d=n.read_shift(1),p=n.read_shift(e&&2==e.biff?1:2),D=0;(!e||e.biff>=5)&&(5!=e.biff&&(n.l+=2),D=n.read_shift(2),5==e.biff&&(n.l+=2),n.l+=4);var P=_u(n,d,e);32&a&&(P=sg[P.charCodeAt(0)]);var B=r-n.l;e&&2==e.biff&&--B;var te=r!=n.l&&0!==p&&B>0?function Bm(n,i,e,r){var d,a=n.l+i,o=Wp(n,r,e);return a!==n.l&&(d=Fm(n,a-n.l,o,e)),[o,d]}(n,B,e,p):[];return{chKey:o,Name:P,itab:D,rgce:te}}function yf(n,i,e){if(e.biff<8)return function Mp(n,i,e){3==n[n.l+1]&&n[n.l]++;var r=bd(n,0,e);return 3==r.charCodeAt(0)?r.slice(1):r}(n,0,e);for(var r=[],a=n.l+i,o=n.read_shift(e.biff>8?4:2);0!=o--;)r.push(Dp(n,0,e));if(n.l!=a)throw new Error("Bad ExternSheet: "+n.l+" != "+a);return r}function Kf(n,i,e){var r=hf(n,6);switch(e.biff){case 2:n.l++,i-=7;break;case 3:case 4:n.l+=2,i-=8;break;default:n.l+=6,i-=12}return[r,w1(n,i,e)]}var ym={8:function(n,i){var e=n.l+i;n.l+=10;var r=n.read_shift(2);n.l+=4,n.l+=2,n.l+=2,n.l+=2,n.l+=4;var a=n.read_shift(1);return n.l+=a,n.l=e,{fmt:r}}};function Xh(n){var i=W(24),e=Qa(n[0]);i.write_shift(2,e.r),i.write_shift(2,e.r),i.write_shift(2,e.c),i.write_shift(2,e.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)i.write_shift(1,parseInt(r[a],16));return Bi([i,nu(n[1])])}function ug(n){var i=n[1].Tooltip,e=W(10+2*(i.length+1));e.write_shift(2,2048);var r=Qa(n[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var a=0;a<i.length;++a)e.write_shift(2,i.charCodeAt(a));return e.write_shift(2,0),e}function dg(n,i,e){if(!e.cellStyles)return O(n,i);var r=e&&e.biff>=12?4:2,a=n.read_shift(r),o=n.read_shift(r),d=n.read_shift(r),p=n.read_shift(r),D=n.read_shift(2);2==r&&(n.l+=2);var P={s:a,e:o,w:d,ixfe:p,flags:D};return(e.biff>=5||!e.biff)&&(P.level=D>>8&7),P}var fg=ru,xm=nh,p0=jf,wm=[2,3,48,49,131,139,140,245],uc=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},i=Od({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(p,D){var P=D||{};P.dateNF||(P.dateNF="yyyymmdd");var B=Ee(function e(p,D){var P=[],B=Je(1);switch(D.type){case"base64":B=kt(Fa(p));break;case"binary":B=kt(p);break;case"buffer":case"array":B=p}v(B,0);var te=B.read_shift(1),ae=!!(136&te),oe=!1,ge=!1;switch(te){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:oe=!0,ae=!0;break;case 140:ge=!0;break;default:throw new Error("DBF Unsupported Version: "+te.toString(16))}var ue=0,Te=521;2==te&&(ue=B.read_shift(2)),B.l+=3,2!=te&&(ue=B.read_shift(4)),ue>1048576&&(ue=1e6),2!=te&&(Te=B.read_shift(2));var qe=B.read_shift(2),ht=D.codepage||1252;2!=te&&(B.l+=16,B.read_shift(1),0!==B[B.l]&&(ht=n[B[B.l]]),B.l+=1,B.l+=2),ge&&(B.l+=36);for(var ut=[],mi={},zi=Math.min(B.length,2==te?521:Te-10-(oe?264:0)),vi=ge?32:11;B.l<zi&&13!=B[B.l];)switch(mi={},mi.name=Mr.utils.decode(ht,B.slice(B.l,B.l+vi)).replace(/[\u0000\r\n].*$/g,""),B.l+=vi,mi.type=String.fromCharCode(B.read_shift(1)),2!=te&&!ge&&(mi.offset=B.read_shift(4)),mi.len=B.read_shift(1),2==te&&(mi.offset=B.read_shift(2)),mi.dec=B.read_shift(1),mi.name.length&&ut.push(mi),2!=te&&(B.l+=ge?13:14),mi.type){case"B":(!oe||8!=mi.len)&&D.WTF&&console.log("Skipping "+mi.name+":"+mi.type);break;case"G":case"P":D.WTF&&console.log("Skipping "+mi.name+":"+mi.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+mi.type)}if(13!==B[B.l]&&(B.l=Te-1),13!==B.read_shift(1))throw new Error("DBF Terminator not found "+B.l+" "+B[B.l]);B.l=Te;var Vt=0,wi=0;for(P[0]=[],wi=0;wi!=ut.length;++wi)P[0][wi]=ut[wi].name;for(;ue-- >0;)if(42!==B[B.l])for(++B.l,P[++Vt]=[],wi=0,wi=0;wi!=ut.length;++wi){var Yi=B.slice(B.l,B.l+ut[wi].len);B.l+=ut[wi].len,v(Yi,0);var hn=Mr.utils.decode(ht,Yi);switch(ut[wi].type){case"C":hn.trim().length&&(P[Vt][wi]=hn.replace(/\s+$/,""));break;case"D":P[Vt][wi]=8===hn.length?new Date(+hn.slice(0,4),+hn.slice(4,6)-1,+hn.slice(6,8)):hn;break;case"F":P[Vt][wi]=parseFloat(hn.trim());break;case"+":case"I":P[Vt][wi]=ge?2147483648^Yi.read_shift(-4,"i"):Yi.read_shift(4,"i");break;case"L":switch(hn.trim().toUpperCase()){case"Y":case"T":P[Vt][wi]=!0;break;case"N":case"F":P[Vt][wi]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+hn+"|")}break;case"M":if(!ae)throw new Error("DBF Unexpected MEMO for type "+te.toString(16));P[Vt][wi]="##MEMO##"+(ge?parseInt(hn.trim(),10):Yi.read_shift(4));break;case"N":(hn=hn.replace(/\u0000/g,"").trim())&&"."!=hn&&(P[Vt][wi]=+hn||0);break;case"@":P[Vt][wi]=new Date(Yi.read_shift(-8,"f")-621356832e5);break;case"T":P[Vt][wi]=new Date(864e5*(Yi.read_shift(4)-2440588)+Yi.read_shift(4));break;case"Y":P[Vt][wi]=Yi.read_shift(4,"i")/1e4+Yi.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":P[Vt][wi]=-Yi.read_shift(-8,"f");break;case"B":if(oe&&8==ut[wi].len){P[Vt][wi]=Yi.read_shift(8,"f");break}case"G":case"P":Yi.l+=ut[wi].len;break;case"0":if("_NullFlags"===ut[wi].name)break;default:throw new Error("DBF Unsupported data type "+ut[wi].type)}}else B.l+=qe;if(2!=te&&B.l<B.length&&26!=B[B.l++])throw new Error("DBF EOF Marker missing "+(B.l-1)+" of "+B.length+" "+B[B.l-1].toString(16));return D&&D.sheetRows&&(P=P.slice(0,D.sheetRows)),D.DBF=ut,P}(p,P),P);return B["!cols"]=P.DBF.map(function(te){return{wch:te.len,DBF:te}}),delete P.DBF,B}var o={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function a(p,D){try{return me(r(p,D),D)}catch(P){if(D&&D.WTF)throw P}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function d(p,D){var P=D||{};if(+P.codepage>=0&&lr(+P.codepage),"string"==P.type)throw new Error("Cannot write DBF to JS string");var B=Ie(),te=tb(p,{header:1,raw:!0,cellDates:!0}),ae=te[0],oe=te.slice(1),ge=p["!cols"]||[],ue=0,Te=0,qe=0,ht=1;for(ue=0;ue<ae.length;++ue)if(((ge[ue]||{}).DBF||{}).name)ae[ue]=ge[ue].DBF.name,++qe;else if(null!=ae[ue]){if(++qe,"number"==typeof ae[ue]&&(ae[ue]=ae[ue].toString(10)),"string"!=typeof ae[ue])throw new Error("DBF Invalid column name "+ae[ue]+" |"+typeof ae[ue]+"|");if(ae.indexOf(ae[ue])!==ue)for(Te=0;Te<1024;++Te)if(-1==ae.indexOf(ae[ue]+"_"+Te)){ae[ue]+="_"+Te;break}}var ut=ls(p["!ref"]),mi=[],zi=[],vi=[];for(ue=0;ue<=ut.e.c-ut.s.c;++ue){var Vt="",wi="",Yi=0,hn=[];for(Te=0;Te<oe.length;++Te)null!=oe[Te][ue]&&hn.push(oe[Te][ue]);if(0!=hn.length&&null!=ae[ue]){for(Te=0;Te<hn.length;++Te){switch(typeof hn[Te]){case"number":wi="B";break;case"string":default:wi="C";break;case"boolean":wi="L";break;case"object":wi=hn[Te]instanceof Date?"D":"C"}Yi=Math.max(Yi,String(hn[Te]).length),Vt=Vt&&Vt!=wi?"C":wi}Yi>250&&(Yi=250),"C"==(wi=((ge[ue]||{}).DBF||{}).type)&&ge[ue].DBF.len>Yi&&(Yi=ge[ue].DBF.len),"B"==Vt&&"N"==wi&&(Vt="N",vi[ue]=ge[ue].DBF.dec,Yi=ge[ue].DBF.len),zi[ue]="C"==Vt||"N"==wi?Yi:o[Vt]||0,ht+=zi[ue],mi[ue]=Vt}else mi[ue]="?"}var Tn=B.next(32);for(Tn.write_shift(4,318902576),Tn.write_shift(4,oe.length),Tn.write_shift(2,296+32*qe),Tn.write_shift(2,ht),ue=0;ue<4;++ue)Tn.write_shift(4,0);for(Tn.write_shift(4,0|(+i[Dn]||3)<<8),ue=0,Te=0;ue<ae.length;++ue)if(null!=ae[ue]){var Wi=B.next(32),Cr=(ae[ue].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Wi.write_shift(1,Cr,"sbcs"),Wi.write_shift(1,"?"==mi[ue]?"C":mi[ue],"sbcs"),Wi.write_shift(4,Te),Wi.write_shift(1,zi[ue]||o[mi[ue]]||0),Wi.write_shift(1,vi[ue]||0),Wi.write_shift(1,2),Wi.write_shift(4,0),Wi.write_shift(1,0),Wi.write_shift(4,0),Wi.write_shift(4,0),Te+=zi[ue]||o[mi[ue]]||0}var aa=B.next(264);for(aa.write_shift(4,13),ue=0;ue<65;++ue)aa.write_shift(4,0);for(ue=0;ue<oe.length;++ue){var Sr=B.next(ht);for(Sr.write_shift(1,0),Te=0;Te<ae.length;++Te)if(null!=ae[Te])switch(mi[Te]){case"L":Sr.write_shift(1,null==oe[ue][Te]?63:oe[ue][Te]?84:70);break;case"B":Sr.write_shift(8,oe[ue][Te]||0,"f");break;case"N":var La="0";for("number"==typeof oe[ue][Te]&&(La=oe[ue][Te].toFixed(vi[Te]||0)),qe=0;qe<zi[Te]-La.length;++qe)Sr.write_shift(1,32);Sr.write_shift(1,La,"sbcs");break;case"D":oe[ue][Te]?(Sr.write_shift(4,("0000"+oe[ue][Te].getFullYear()).slice(-4),"sbcs"),Sr.write_shift(2,("00"+(oe[ue][Te].getMonth()+1)).slice(-2),"sbcs"),Sr.write_shift(2,("00"+oe[ue][Te].getDate()).slice(-2),"sbcs")):Sr.write_shift(8,"00000000","sbcs");break;case"C":var ma=String(null!=oe[ue][Te]?oe[ue][Te]:"").slice(0,zi[Te]);for(Sr.write_shift(1,ma,"sbcs"),qe=0;qe<zi[Te]-ma.length;++qe)Sr.write_shift(1,32)}}return B.next(1).write_shift(1,26),B.end()}}}(),g0=function(){var n={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},i=new RegExp("\x1bN("+no(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),e=function(ae,oe){var ge=n[oe];return"number"==typeof ge?da(ge):ge},r=function(ae,oe,ge){var ue=oe.charCodeAt(0)-32<<4|ge.charCodeAt(0)-48;return 59==ue?ae:da(ue)};function o(ae,oe){var Tn,ge=ae.split(/[\n\r]+/),ue=-1,Te=-1,qe=0,ht=0,ut=[],mi=[],zi=null,vi={},Vt=[],wi=[],Yi=[],hn=0;for(+oe.codepage>=0&&lr(+oe.codepage);qe!==ge.length;++qe){hn=0;var Sr,Wi=ge[qe].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(i,e),Cr=Wi.replace(/;;/g,"\0").split(";").map(function(bi){return bi.replace(/\u0000/g,";")});if(Wi.length>0)switch(Cr[0]){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==Cr[1].charAt(0)&&mi.push(Wi.slice(3).replace(/;;/g,";"));break;case"C":var La=!1,ma=!1,qs=!1,Ur=!1,Ca=-1,qn=-1;for(ht=1;ht<Cr.length;++ht)switch(Cr[ht].charAt(0)){case"A":case"G":break;case"X":Te=parseInt(Cr[ht].slice(1))-1,ma=!0;break;case"Y":for(ue=parseInt(Cr[ht].slice(1))-1,ma||(Te=0),Tn=ut.length;Tn<=ue;++Tn)ut[Tn]=[];break;case"K":'"'===(Sr=Cr[ht].slice(1)).charAt(0)?Sr=Sr.slice(1,Sr.length-1):"TRUE"===Sr?Sr=!0:"FALSE"===Sr?Sr=!1:isNaN(bo(Sr))?isNaN(zo(Sr).getDate())||(Sr=Cs(Sr)):(Sr=bo(Sr),null!==zi&&la(zi)&&(Sr=Bc(Sr))),typeof Mr<"u"&&"string"==typeof Sr&&"string"!=(oe||{}).type&&(oe||{}).codepage&&(Sr=Mr.utils.decode(oe.codepage,Sr)),La=!0;break;case"E":Ur=!0;var gi=lp(Cr[ht].slice(1),{r:ue,c:Te});ut[ue][Te]=[ut[ue][Te],gi];break;case"S":qs=!0,ut[ue][Te]=[ut[ue][Te],"S5S"];break;case"R":Ca=parseInt(Cr[ht].slice(1))-1;break;case"C":qn=parseInt(Cr[ht].slice(1))-1;break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Wi)}if(La&&(ut[ue][Te]&&2==ut[ue][Te].length?ut[ue][Te][0]=Sr:ut[ue][Te]=Sr,zi=null),qs){if(Ur)throw new Error("SYLK shared formula cannot have own formula");var mn=Ca>-1&&ut[Ca][qn];if(!mn||!mn[1])throw new Error("SYLK shared formula cannot find base");ut[ue][Te][1]=V_(mn[1],{r:ue-Ca,c:Te-qn})}break;case"F":var Ti=0;for(ht=1;ht<Cr.length;++ht)switch(Cr[ht].charAt(0)){case"X":Te=parseInt(Cr[ht].slice(1))-1,++Ti;break;case"Y":for(ue=parseInt(Cr[ht].slice(1))-1,Tn=ut.length;Tn<=ue;++Tn)ut[Tn]=[];break;case"M":hn=parseInt(Cr[ht].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":zi=mi[parseInt(Cr[ht].slice(1))];break;case"W":for(Yi=Cr[ht].slice(1).split(" "),Tn=parseInt(Yi[0],10);Tn<=parseInt(Yi[1],10);++Tn)hn=parseInt(Yi[2],10),wi[Tn-1]=0===hn?{hidden:!0}:{wch:hn},hd(wi[Tn-1]);break;case"C":wi[Te=parseInt(Cr[ht].slice(1))-1]||(wi[Te]={});break;case"R":Vt[ue=parseInt(Cr[ht].slice(1))-1]||(Vt[ue]={}),hn>0?(Vt[ue].hpt=hn,Vt[ue].hpx=Tf(hn)):0===hn&&(Vt[ue].hidden=!0);break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Wi)}Ti<1&&(zi=null);break;default:if(oe&&oe.WTF)throw new Error("SYLK bad record "+Wi)}}return Vt.length>0&&(vi["!rows"]=Vt),wi.length>0&&(vi["!cols"]=wi),oe&&oe.sheetRows&&(ut=ut.slice(0,oe.sheetRows)),[ut,vi]}function d(ae,oe){var ge=function a(ae,oe){switch(oe.type){case"base64":return o(Fa(ae),oe);case"binary":return o(ae,oe);case"buffer":return o(Et&&Buffer.isBuffer(ae)?ae.toString("binary"):Ci(ae),oe);case"array":return o(Jl(ae),oe)}throw new Error("Unrecognized type "+oe.type)}(ae,oe),Te=ge[1],qe=Ee(ge[0],oe);return no(Te).forEach(function(ht){qe[ht]=Te[ht]}),qe}function D(ae,oe,ge,ue){var Te="C;Y"+(ge+1)+";X"+(ue+1)+";K";switch(ae.t){case"n":Te+=ae.v||0,ae.f&&!ae.F&&(Te+=";E"+Vv(ae.f,{r:ge,c:ue}));break;case"b":Te+=ae.v?"TRUE":"FALSE";break;case"e":Te+=ae.w||ae.v;break;case"d":Te+='"'+(ae.w||ae.v)+'"';break;case"s":Te+='"'+ae.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return Te}return n["|"]=254,{to_workbook:function p(ae,oe){return me(d(ae,oe),oe)},to_sheet:d,from_sheet:function te(ae,oe){var qe,ge=["ID;PWXL;N;E"],ue=[],Te=ls(ae["!ref"]),ht=Array.isArray(ae),ut="\r\n";ge.push("P;PGeneral"),ge.push("F;P0;DG0G8;M255"),ae["!cols"]&&function P(ae,oe){oe.forEach(function(ge,ue){var Te="F;W"+(ue+1)+" "+(ue+1)+" ";ge.hidden?Te+="0":("number"==typeof ge.width&&!ge.wpx&&(ge.wpx=Ph(ge.width)),"number"==typeof ge.wpx&&!ge.wch&&(ge.wch=Fh(ge.wpx)),"number"==typeof ge.wch&&(Te+=Math.round(ge.wch)))," "!=Te.charAt(Te.length-1)&&ae.push(Te)})}(ge,ae["!cols"]),ae["!rows"]&&function B(ae,oe){oe.forEach(function(ge,ue){var Te="F;";ge.hidden?Te+="M0;":ge.hpt?Te+="M"+20*ge.hpt+";":ge.hpx&&(Te+="M"+20*ap(ge.hpx)+";"),Te.length>2&&ae.push(Te+"R"+(ue+1))})}(ge,ae["!rows"]),ge.push("B;Y"+(Te.e.r-Te.s.r+1)+";X"+(Te.e.c-Te.s.c+1)+";D"+[Te.s.c,Te.s.r,Te.e.c,Te.e.r].join(" "));for(var mi=Te.s.r;mi<=Te.e.r;++mi)for(var zi=Te.s.c;zi<=Te.e.c;++zi){var vi=xa({r:mi,c:zi});(qe=ht?(ae[mi]||[])[zi]:ae[vi])&&(null!=qe.v||qe.f&&!qe.F)&&ue.push(D(qe,0,mi,zi))}return ge.join(ut)+ut+ue.join(ut)+ut+"E"+ut}}}(),Cm=function(){function i(o,d){for(var p=o.split("\n"),D=-1,P=-1,B=0,te=[];B!==p.length;++B)if("BOT"!==p[B].trim()){if(!(D<0)){for(var ae=p[B].trim().split(","),oe=ae[0],ge=ae[1],ue=p[++B]||"";1&(ue.match(/["]/g)||[]).length&&B<p.length-1;)ue+="\n"+p[++B];switch(ue=ue.trim(),+oe){case-1:if("BOT"===ue){te[++D]=[],P=0;continue}if("EOD"!==ue)throw new Error("Unrecognized DIF special command "+ue);break;case 0:te[D][P]="TRUE"===ue||"FALSE"!==ue&&(isNaN(bo(ge))?isNaN(zo(ge).getDate())?ge:Cs(ge):bo(ge)),++P;break;case 1:(ue=(ue=ue.slice(1,ue.length-1)).replace(/""/g,'"'))&&ue.match(/^=".*"$/)&&(ue=ue.slice(2,-1)),te[D][P++]=""!==ue?ue:null}if("EOD"===ue)break}}else te[++D]=[],P=0;return d&&d.sheetRows&&(te=te.slice(0,d.sheetRows)),te}function e(o,d){return Ee(function n(o,d){switch(d.type){case"base64":return i(Fa(o),d);case"binary":return i(o,d);case"buffer":return i(Et&&Buffer.isBuffer(o)?o.toString("binary"):Ci(o),d);case"array":return i(Jl(o),d)}throw new Error("Unrecognized type "+d.type)}(o,d),d)}return{to_workbook:function r(o,d){return me(e(o,d),d)},to_sheet:e,from_sheet:function(){var o=function(D,P,B,te,ae){D.push(P),D.push(B+","+te),D.push('"'+ae.replace(/"/g,'""')+'"')},d=function(D,P,B,te){D.push(P+","+B),D.push(1==P?'"'+te.replace(/"/g,'""')+'"':te)};return function(D){var te,P=[],B=ls(D["!ref"]),ae=Array.isArray(D);o(P,"TABLE",0,1,"sheetjs"),o(P,"VECTORS",0,B.e.r-B.s.r+1,""),o(P,"TUPLES",0,B.e.c-B.s.c+1,""),o(P,"DATA",0,0,"");for(var oe=B.s.r;oe<=B.e.r;++oe){d(P,-1,0,"BOT");for(var ge=B.s.c;ge<=B.e.c;++ge){var ue=xa({r:oe,c:ge});if(te=ae?(D[oe]||[])[ge]:D[ue])switch(te.t){case"n":var Te=te.w;!Te&&null!=te.v&&(Te=te.v),null==Te?d(P,1,0,te.f&&!te.F?"="+te.f:""):d(P,0,Te,"V");break;case"b":d(P,0,te.v?1:0,te.v?"TRUE":"FALSE");break;case"s":d(P,1,0,isNaN(te.v)?te.v:'="'+te.v+'"');break;case"d":te.w||(te.w=va(te.z||st[14],Es(Cs(te.v)))),d(P,0,te.w,"V");break;default:d(P,1,0,"")}else d(P,1,0,"")}}return d(P,-1,0,"EOD"),P.join("\r\n")}}()}}(),bv=function(){function n(te){return te.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function i(te){return te.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(te,ae){return Ee(function e(te,ae){for(var oe=te.split("\n"),ge=-1,ue=-1,Te=0,qe=[];Te!==oe.length;++Te){var ht=oe[Te].trim().split(":");if("cell"===ht[0]){var ut=Qa(ht[1]);if(qe.length<=ut.r)for(ge=qe.length;ge<=ut.r;++ge)qe[ge]||(qe[ge]=[]);switch(ge=ut.r,ue=ut.c,ht[2]){case"t":qe[ge][ue]=n(ht[3]);break;case"v":qe[ge][ue]=+ht[3];break;case"vtf":var mi=ht[ht.length-1];case"vtc":qe[ge][ue]="nl"===ht[3]?!!+ht[4]:+ht[4],"vtf"==ht[2]&&(qe[ge][ue]=[qe[ge][ue],mi])}}}return ae&&ae.sheetRows&&(qe=qe.slice(0,ae.sheetRows)),qe}(te,ae),ae)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),d=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",p=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),D="--SocialCalcSpreadsheetControlSave--";function P(te){if(!te||!te["!ref"])return"";for(var ge,ae=[],oe=[],ue="",Te=Go(te["!ref"]),qe=Array.isArray(te),ht=Te.s.r;ht<=Te.e.r;++ht)for(var ut=Te.s.c;ut<=Te.e.c;++ut)if(ue=xa({r:ht,c:ut}),(ge=qe?(te[ht]||[])[ut]:te[ue])&&null!=ge.v&&"z"!==ge.t){switch(oe=["cell",ue,"t"],ge.t){case"s":case"str":oe.push(i(ge.v));break;case"n":ge.f?(oe[2]="vtf",oe[3]="n",oe[4]=ge.v,oe[5]=i(ge.f)):(oe[2]="v",oe[3]=ge.v);break;case"b":oe[2]="vt"+(ge.f?"f":"c"),oe[3]="nl",oe[4]=ge.v?"1":"0",oe[5]=i(ge.f||(ge.v?"TRUE":"FALSE"));break;case"d":var mi=Es(Cs(ge.v));oe[2]="vtc",oe[3]="nd",oe[4]=""+mi,oe[5]=ge.w||va(ge.z||st[14],mi);break;case"e":continue}ae.push(oe.join(":"))}return ae.push("sheet:c:"+(Te.e.c-Te.s.c+1)+":r:"+(Te.e.r-Te.s.r+1)+":tvf:1"),ae.push("valueformat:1:text-wiki"),ae.join("\n")}return{to_workbook:function a(te,ae){return me(r(te,ae),ae)},to_sheet:r,from_sheet:function B(te){return[o,d,p,d,P(te),D].join("\n")}}}(),Lh=function(){function n(B,te,ae,oe,ge){ge.raw?te[ae][oe]=B:""===B||(te[ae][oe]="TRUE"===B||"FALSE"!==B&&(isNaN(bo(B))?isNaN(zo(B).getDate())?B:Cs(B):bo(B)))}var e={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function a(B){for(var te={},ae=!1,oe=0,ge=0;oe<B.length;++oe)34==(ge=B.charCodeAt(oe))?ae=!ae:!ae&&ge in e&&(te[ge]=(te[ge]||0)+1);for(oe in ge=[],te)Object.prototype.hasOwnProperty.call(te,oe)&&ge.push([te[oe],oe]);if(!ge.length)for(oe in te=r)Object.prototype.hasOwnProperty.call(te,oe)&&ge.push([te[oe],oe]);return ge.sort(function(ue,Te){return ue[0]-Te[0]||r[ue[1]]-r[Te[1]]}),e[ge.pop()[1]]||44}function d(B,te){return!te||!te.PRN||te.FS||"sep="==B.slice(0,4)||B.indexOf("\t")>=0||B.indexOf(",")>=0||B.indexOf(";")>=0?function o(B,te){var ae=te||{},oe="";null!=Dr&&null==ae.dense&&(ae.dense=Dr);var ge=ae.dense?[]:{},ue={s:{c:0,r:0},e:{c:0,r:0}};"sep="==B.slice(0,4)?13==B.charCodeAt(5)&&10==B.charCodeAt(6)?(oe=B.charAt(4),B=B.slice(7)):13==B.charCodeAt(5)||10==B.charCodeAt(5)?(oe=B.charAt(4),B=B.slice(6)):oe=a(B.slice(0,1024)):oe=ae&&ae.FS?ae.FS:a(B.slice(0,1024));var Te=0,qe=0,ht=0,ut=0,mi=0,zi=oe.charCodeAt(0),vi=!1,Vt=0,wi=B.charCodeAt(0);B=B.replace(/\r\n/gm,"\n");var Yi=null!=ae.dateNF?function Ws(n){var i="number"==typeof n?st[n]:n;return i=i.replace(Pc,"(\\d+)"),new RegExp("^"+i+"$")}(ae.dateNF):null;function hn(){var Tn=B.slice(ut,mi),Wi={};if('"'==Tn.charAt(0)&&'"'==Tn.charAt(Tn.length-1)&&(Tn=Tn.slice(1,-1).replace(/""/g,'"')),0===Tn.length)Wi.t="z";else if(ae.raw)Wi.t="s",Wi.v=Tn;else if(0===Tn.trim().length)Wi.t="s",Wi.v=Tn;else if(61==Tn.charCodeAt(0))34==Tn.charCodeAt(1)&&34==Tn.charCodeAt(Tn.length-1)?(Wi.t="s",Wi.v=Tn.slice(2,-1).replace(/""/g,'"')):function Uv(n){return 1!=n.length}(Tn)?(Wi.t="n",Wi.f=Tn.slice(1)):(Wi.t="s",Wi.v=Tn);else if("TRUE"==Tn)Wi.t="b",Wi.v=!0;else if("FALSE"==Tn)Wi.t="b",Wi.v=!1;else if(isNaN(ht=bo(Tn)))if(!isNaN(zo(Tn).getDate())||Yi&&Tn.match(Yi)){Wi.z=ae.dateNF||st[14];var Cr=0;Yi&&Tn.match(Yi)&&(Tn=function xc(n,i,e){var r=-1,a=-1,o=-1,d=-1,p=-1,D=-1;(i.match(Pc)||[]).forEach(function(te,ae){var oe=parseInt(e[ae+1],10);switch(te.toLowerCase().charAt(0)){case"y":r=oe;break;case"d":o=oe;break;case"h":d=oe;break;case"s":D=oe;break;case"m":d>=0?p=oe:a=oe}}),D>=0&&-1==p&&a>=0&&(p=a,a=-1);var P=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);7==P.length&&(P="0"+P),8==P.length&&(P="20"+P);var B=("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(p>=0?p:0)).slice(-2)+":"+("00"+(D>=0?D:0)).slice(-2);return-1==d&&-1==p&&-1==D?P:-1==r&&-1==a&&-1==o?B:P+"T"+B}(0,ae.dateNF,Tn.match(Yi)||[]),Cr=1),ae.cellDates?(Wi.t="d",Wi.v=Cs(Tn,Cr)):(Wi.t="n",Wi.v=Es(Cs(Tn,Cr))),!1!==ae.cellText&&(Wi.w=va(Wi.z,Wi.v instanceof Date?Es(Wi.v):Wi.v)),ae.cellNF||delete Wi.z}else Wi.t="s",Wi.v=Tn;else Wi.t="n",!1!==ae.cellText&&(Wi.w=Tn),Wi.v=ht;if("z"==Wi.t||(ae.dense?(ge[Te]||(ge[Te]=[]),ge[Te][qe]=Wi):ge[xa({c:qe,r:Te})]=Wi),wi=B.charCodeAt(ut=mi+1),ue.e.c<qe&&(ue.e.c=qe),ue.e.r<Te&&(ue.e.r=Te),Vt==zi)++qe;else if(qe=0,++Te,ae.sheetRows&&ae.sheetRows<=Te)return!0}e:for(;mi<B.length;++mi)switch(Vt=B.charCodeAt(mi)){case 34:34===wi&&(vi=!vi);break;case zi:case 10:case 13:if(!vi&&hn())break e}return mi-ut>0&&hn(),ge["!ref"]=ba(ue),ge}(B,te):Ee(function i(B,te){var ae=te||{},oe=[];if(!B||0===B.length)return oe;for(var ge=B.split(/[\r\n]/),ue=ge.length-1;ue>=0&&0===ge[ue].length;)--ue;for(var Te=10,qe=0,ht=0;ht<=ue;++ht)-1==(qe=ge[ht].indexOf(" "))?qe=ge[ht].length:qe++,Te=Math.max(Te,qe);for(ht=0;ht<=ue;++ht){oe[ht]=[];var ut=0;for(n(ge[ht].slice(0,Te).trim(),oe,ht,ut,ae),ut=1;ut<=(ge[ht].length-Te)/10+1;++ut)n(ge[ht].slice(Te+10*(ut-1),Te+10*ut).trim(),oe,ht,ut,ae)}return ae.sheetRows&&(oe=oe.slice(0,ae.sheetRows)),oe}(B,te),te)}function p(B,te){var ae="",oe="string"==te.type?[0,0,0,0]:Lw(B,te);switch(te.type){case"base64":ae=Fa(B);break;case"binary":case"string":ae=B;break;case"buffer":ae=65001==te.codepage?B.toString("utf8"):te.codepage&&typeof Mr<"u"?Mr.utils.decode(te.codepage,B):Et&&Buffer.isBuffer(B)?B.toString("binary"):Ci(B);break;case"array":ae=Jl(B);break;default:throw new Error("Unrecognized type "+te.type)}return 239==oe[0]&&187==oe[1]&&191==oe[2]?ae=Rs(ae.slice(3)):"string"!=te.type&&"buffer"!=te.type&&65001==te.codepage?ae=Rs(ae):"binary"==te.type&&typeof Mr<"u"&&te.codepage&&(ae=Mr.utils.decode(te.codepage,Mr.utils.encode(28591,ae))),"socialcalc:version:"==ae.slice(0,19)?bv.to_sheet("string"==te.type?ae:Rs(ae),te):d(ae,te)}return{to_workbook:function D(B,te){return me(p(B,te),te)},to_sheet:p,from_sheet:function P(B){for(var oe,te=[],ae=ls(B["!ref"]),ge=Array.isArray(B),ue=ae.s.r;ue<=ae.e.r;++ue){for(var Te=[],qe=ae.s.c;qe<=ae.e.c;++qe){var ht=xa({r:ue,c:qe});if((oe=ge?(B[ue]||[])[qe]:B[ht])&&null!=oe.v){for(var ut=(oe.w||(se(oe),oe.w)||"").slice(0,10);ut.length<10;)ut+=" ";Te.push(ut+(0===qe?" ":""))}else Te.push("          ")}te.push(Te.join(""))}return te.join("\n")}}}(),qh=function(){function n(gi,mn,Ti){if(gi){v(gi,gi.l||0);for(var bi=Ti.Enum||Ca;gi.l<gi.length;){var Yn=gi.read_shift(2),Rr=bi[Yn]||bi[65535],_r=gi.read_shift(2),kr=gi.l+_r,er=Rr.f&&Rr.f(gi,_r,Ti);if(gi.l=kr,mn(er,Rr,Yn))return}}}function e(gi,mn){if(!gi)return gi;var Ti=mn||{};null!=Dr&&null==Ti.dense&&(Ti.dense=Dr);var bi=Ti.dense?[]:{},Yn="Sheet1",Rr="",_r=0,kr={},er=[],Bs=[],ui={s:{r:0,c:0},e:{r:0,c:0}},Qo=Ti.sheetRows||0;if(0==gi[2]&&(8==gi[3]||9==gi[3])&&gi.length>=16&&5==gi[14]&&108===gi[15])throw new Error("Unsupported Works 3 for Mac file");if(2==gi[2])Ti.Enum=Ca,n(gi,function(Jr,Lc,$d){switch($d){case 0:Ti.vers=Jr,Jr>=4096&&(Ti.qpro=!0);break;case 6:ui=Jr;break;case 204:Jr&&(Rr=Jr);break;case 222:Rr=Jr;break;case 15:case 51:Ti.qpro||(Jr[1].v=Jr[1].v.slice(1));case 13:case 14:case 16:14==$d&&112==(112&Jr[2])&&(15&Jr[2])>1&&(15&Jr[2])<15&&(Jr[1].z=Ti.dateNF||st[14],Ti.cellDates&&(Jr[1].t="d",Jr[1].v=Bc(Jr[1].v))),Ti.qpro&&Jr[3]>_r&&(bi["!ref"]=ba(ui),kr[Yn]=bi,er.push(Yn),bi=Ti.dense?[]:{},ui={s:{r:0,c:0},e:{r:0,c:0}},_r=Jr[3],Yn=Rr||"Sheet"+(_r+1),Rr="");var bp=Ti.dense?(bi[Jr[0].r]||[])[Jr[0].c]:bi[xa(Jr[0])];if(bp){bp.t=Jr[1].t,bp.v=Jr[1].v,null!=Jr[1].z&&(bp.z=Jr[1].z),null!=Jr[1].f&&(bp.f=Jr[1].f);break}Ti.dense?(bi[Jr[0].r]||(bi[Jr[0].r]=[]),bi[Jr[0].r][Jr[0].c]=Jr[1]):bi[xa(Jr[0])]=Jr[1]}},Ti);else{if(26!=gi[2]&&14!=gi[2])throw new Error("Unrecognized LOTUS BOF "+gi[2]);Ti.Enum=qn,14==gi[2]&&(Ti.qpro=!0,gi.l=0),n(gi,function(Jr,Lc,$d){switch($d){case 204:Yn=Jr;break;case 22:Jr[1].v=Jr[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Jr[3]>_r&&(bi["!ref"]=ba(ui),kr[Yn]=bi,er.push(Yn),bi=Ti.dense?[]:{},ui={s:{r:0,c:0},e:{r:0,c:0}},Yn="Sheet"+((_r=Jr[3])+1)),Qo>0&&Jr[0].r>=Qo)break;Ti.dense?(bi[Jr[0].r]||(bi[Jr[0].r]=[]),bi[Jr[0].r][Jr[0].c]=Jr[1]):bi[xa(Jr[0])]=Jr[1],ui.e.c<Jr[0].c&&(ui.e.c=Jr[0].c),ui.e.r<Jr[0].r&&(ui.e.r=Jr[0].r);break;case 27:Jr[14e3]&&(Bs[Jr[14e3][0]]=Jr[14e3][1]);break;case 1537:Bs[Jr[0]]=Jr[1],Jr[0]==_r&&(Yn=Jr[1])}},Ti)}if(bi["!ref"]=ba(ui),kr[Rr||Yn]=bi,er.push(Rr||Yn),!Bs.length)return{SheetNames:er,Sheets:kr};for(var oo={},$o=[],lo=0;lo<Bs.length;++lo)kr[er[lo]]?($o.push(Bs[lo]||er[lo]),oo[Bs[lo]]=kr[Bs[lo]]||kr[er[lo]]):($o.push(Bs[lo]),oo[Bs[lo]]={"!ref":"A1"});return{SheetNames:$o,Sheets:oo}}function P(gi,mn,Ti){var bi=[{c:0,r:0},{t:"n",v:0},0,0];return Ti.qpro&&20768!=Ti.vers?(bi[0].c=gi.read_shift(1),bi[3]=gi.read_shift(1),bi[0].r=gi.read_shift(2),gi.l+=2):(bi[2]=gi.read_shift(1),bi[0].c=gi.read_shift(2),bi[0].r=gi.read_shift(2)),bi}function B(gi,mn,Ti){var bi=gi.l+mn,Yn=P(gi,0,Ti);if(Yn[1].t="s",20768==Ti.vers){gi.l++;var Rr=gi.read_shift(1);return Yn[1].v=gi.read_shift(Rr,"utf8"),Yn}return Ti.qpro&&gi.l++,Yn[1].v=gi.read_shift(bi-gi.l,"cstr"),Yn}function te(gi,mn,Ti){var bi=W(7+Ti.length);bi.write_shift(1,255),bi.write_shift(2,mn),bi.write_shift(2,gi),bi.write_shift(1,39);for(var Yn=0;Yn<bi.length;++Yn){var Rr=Ti.charCodeAt(Yn);bi.write_shift(1,Rr>=128?95:Rr)}return bi.write_shift(1,0),bi}function oe(gi,mn,Ti){var bi=W(7);return bi.write_shift(1,255),bi.write_shift(2,mn),bi.write_shift(2,gi),bi.write_shift(2,Ti,"i"),bi}function ue(gi,mn,Ti){var bi=W(13);return bi.write_shift(1,255),bi.write_shift(2,mn),bi.write_shift(2,gi),bi.write_shift(8,Ti,"f"),bi}function qe(gi,mn,Ti){var bi=32768&mn;return mn=(bi?gi:0)+((mn&=-32769)>=8192?mn-16384:mn),(bi?"":"$")+(Ti?Va(mn):gr(mn))}var ht={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},ut=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function zi(gi){var mn=[{c:0,r:0},{t:"n",v:0},0];return mn[0].r=gi.read_shift(2),mn[3]=gi[gi.l++],mn[0].c=gi[gi.l++],mn}function Vt(gi,mn,Ti,bi){var Yn=W(6+bi.length);Yn.write_shift(2,gi),Yn.write_shift(1,Ti),Yn.write_shift(1,mn),Yn.write_shift(1,39);for(var Rr=0;Rr<bi.length;++Rr){var _r=bi.charCodeAt(Rr);Yn.write_shift(1,_r>=128?95:_r)}return Yn.write_shift(1,0),Yn}function Yi(gi,mn){var Ti=zi(gi),bi=gi.read_shift(4),Yn=gi.read_shift(4),Rr=gi.read_shift(2);if(65535==Rr)return 0===bi&&3221225472===Yn?(Ti[1].t="e",Ti[1].v=15):0===bi&&3489660928===Yn?(Ti[1].t="e",Ti[1].v=42):Ti[1].v=0,Ti;var _r=32768&Rr;return Rr=(32767&Rr)-16446,Ti[1].v=(1-2*_r)*(Yn*Math.pow(2,Rr+32)+bi*Math.pow(2,Rr)),Ti}function hn(gi,mn,Ti,bi){var Yn=W(14);if(Yn.write_shift(2,gi),Yn.write_shift(1,Ti),Yn.write_shift(1,mn),0==bi)return Yn.write_shift(4,0),Yn.write_shift(4,0),Yn.write_shift(2,65535),Yn;var Rr=0,_r=0,er=0;return bi<0&&(Rr=1,bi=-bi),_r=0|Math.log2(bi),2147483648&(er=(bi/=Math.pow(2,_r-31))>>>0)||(++_r,er=(bi/=2)>>>0),bi-=er,er|=2147483648,er>>>=0,bi*=Math.pow(2,32),Yn.write_shift(4,bi>>>0),Yn.write_shift(4,er),Yn.write_shift(2,_r+=16383+(Rr?32768:0)),Yn}function Cr(gi,mn){var Ti=zi(gi),bi=gi.read_shift(8,"f");return Ti[1].v=bi,Ti}function Sr(gi,mn){return 0==gi[gi.l+mn-1]?gi.read_shift(mn,"cstr"):""}function Ur(gi,mn){var Ti=W(5+gi.length);Ti.write_shift(2,14e3),Ti.write_shift(2,mn);for(var bi=0;bi<gi.length;++bi){var Yn=gi.charCodeAt(bi);Ti[Ti.l++]=Yn>127?95:Yn}return Ti[Ti.l++]=0,Ti}var Ca={0:{n:"BOF",f:Ps},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function p(gi,mn,Ti){var bi={s:{c:0,r:0},e:{c:0,r:0}};return 8==mn&&Ti.qpro?(bi.s.c=gi.read_shift(1),gi.l++,bi.s.r=gi.read_shift(2),bi.e.c=gi.read_shift(1),gi.l++,bi.e.r=gi.read_shift(2),bi):(bi.s.c=gi.read_shift(2),bi.s.r=gi.read_shift(2),12==mn&&Ti.qpro&&(gi.l+=2),bi.e.c=gi.read_shift(2),bi.e.r=gi.read_shift(2),12==mn&&Ti.qpro&&(gi.l+=2),65535==bi.s.c&&(bi.s.c=bi.e.c=bi.s.r=bi.e.r=0),bi)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function ae(gi,mn,Ti){var bi=P(gi,0,Ti);return bi[1].v=gi.read_shift(2,"i"),bi}},14:{n:"NUMBER",f:function ge(gi,mn,Ti){var bi=P(gi,0,Ti);return bi[1].v=gi.read_shift(8,"f"),bi}},15:{n:"LABEL",f:B},16:{n:"FORMULA",f:function Te(gi,mn,Ti){var bi=gi.l+mn,Yn=P(gi,0,Ti);if(Yn[1].v=gi.read_shift(8,"f"),Ti.qpro)gi.l=bi;else{var Rr=gi.read_shift(2);(function mi(gi,mn){v(gi,0);for(var Ti=[],bi=0,Yn="",Rr="",_r="",kr="";gi.l<gi.length;){var er=gi[gi.l++];switch(er){case 0:Ti.push(gi.read_shift(8,"f"));break;case 1:Rr=qe(mn[0].c,gi.read_shift(2),!0),Yn=qe(mn[0].r,gi.read_shift(2),!1),Ti.push(Rr+Yn);break;case 2:var Bs=qe(mn[0].c,gi.read_shift(2),!0),ui=qe(mn[0].r,gi.read_shift(2),!1);Rr=qe(mn[0].c,gi.read_shift(2),!0),Yn=qe(mn[0].r,gi.read_shift(2),!1),Ti.push(Bs+ui+":"+Rr+Yn);break;case 3:if(gi.l<gi.length)return void console.error("WK1 premature formula end");break;case 4:Ti.push("("+Ti.pop()+")");break;case 5:Ti.push(gi.read_shift(2));break;case 6:for(var Qo="";er=gi[gi.l++];)Qo+=String.fromCharCode(er);Ti.push('"'+Qo.replace(/"/g,'""')+'"');break;case 8:Ti.push("-"+Ti.pop());break;case 23:Ti.push("+"+Ti.pop());break;case 22:Ti.push("NOT("+Ti.pop()+")");break;case 20:case 21:kr=Ti.pop(),_r=Ti.pop(),Ti.push(["AND","OR"][er-20]+"("+_r+","+kr+")");break;default:if(er<32&&ut[er])kr=Ti.pop(),_r=Ti.pop(),Ti.push(_r+ut[er]+kr);else{if(!ht[er])return er<=7?console.error("WK1 invalid opcode "+er.toString(16)):er<=24?console.error("WK1 unsupported op "+er.toString(16)):er<=30?console.error("WK1 invalid opcode "+er.toString(16)):er<=115?console.error("WK1 unsupported function opcode "+er.toString(16)):console.error("WK1 unrecognized opcode "+er.toString(16));if(69==(bi=ht[er][1])&&(bi=gi[gi.l++]),bi>Ti.length)return void console.error("WK1 bad formula parse 0x"+er.toString(16)+":|"+Ti.join("|")+"|");var oo=Ti.slice(-bi);Ti.length-=bi,Ti.push(ht[er][0]+"("+oo.join(",")+")")}}}1==Ti.length?mn[1].f=""+Ti[0]:console.error("WK1 bad formula parse |"+Ti.join("|")+"|")})(gi.slice(gi.l,gi.l+Rr),Yn),gi.l+=Rr}return Yn}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:B},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Sr},222:{n:"SHEETNAMELP",f:function La(gi,mn){var Ti=gi[gi.l++];Ti>mn-1&&(Ti=mn-1);for(var bi="";bi.length<Ti;)bi+=String.fromCharCode(gi[gi.l++]);return bi}},65535:{n:""}},qn={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function vi(gi,mn){var Ti=zi(gi);return Ti[1].t="s",Ti[1].v=gi.read_shift(mn-4,"cstr"),Ti}},23:{n:"NUMBER17",f:Yi},24:{n:"NUMBER18",f:function wi(gi,mn){var Ti=zi(gi);Ti[1].v=gi.read_shift(2);var bi=Ti[1].v>>1;if(1&Ti[1].v)switch(7&bi){case 0:bi=5e3*(bi>>3);break;case 1:bi=500*(bi>>3);break;case 2:bi=(bi>>3)/20;break;case 3:bi=(bi>>3)/200;break;case 4:bi=(bi>>3)/2e3;break;case 5:bi=(bi>>3)/2e4;break;case 6:bi=(bi>>3)/16;break;case 7:bi=(bi>>3)/64}return Ti[1].v=bi,Ti}},25:{n:"FORMULA19",f:function Tn(gi,mn){var Ti=Yi(gi);return gi.l+=mn-14,Ti}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function qs(gi,mn){for(var Ti={},bi=gi.l+mn;gi.l<bi;){var Yn=gi.read_shift(2);if(14e3==Yn){for(Ti[Yn]=[0,""],Ti[Yn][0]=gi.read_shift(2);gi[gi.l];)Ti[Yn][1]+=String.fromCharCode(gi[gi.l]),gi.l++;gi.l++}}return Ti}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function Wi(gi,mn){var Ti=zi(gi),bi=gi.read_shift(4);return Ti[1].v=bi>>6,Ti}},38:{n:"??"},39:{n:"NUMBER27",f:Cr},40:{n:"FORMULA28",f:function aa(gi,mn){var Ti=Cr(gi);return gi.l+=mn-10,Ti}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Sr},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function ma(gi,mn,Ti){if(Ti.qpro&&!(mn<21)){var bi=gi.read_shift(1);return gi.l+=17,gi.l+=1,gi.l+=2,[bi,gi.read_shift(mn-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function r(gi,mn){var Ti=mn||{};if(+Ti.codepage>=0&&lr(+Ti.codepage),"string"==Ti.type)throw new Error("Cannot write WK1 to JS string");var bi=Ie(),Yn=ls(gi["!ref"]),Rr=Array.isArray(gi),_r=[];Br(bi,0,function o(gi){var mn=W(2);return mn.write_shift(2,gi),mn}(1030)),Br(bi,6,function D(gi){var mn=W(8);return mn.write_shift(2,gi.s.c),mn.write_shift(2,gi.s.r),mn.write_shift(2,gi.e.c),mn.write_shift(2,gi.e.r),mn}(Yn));for(var kr=Math.min(Yn.e.r,8191),er=Yn.s.r;er<=kr;++er)for(var Bs=gr(er),ui=Yn.s.c;ui<=Yn.e.c;++ui){er===Yn.s.r&&(_r[ui]=Va(ui));var oo=Rr?(gi[er]||[])[ui]:gi[_r[ui]+Bs];oo&&"z"!=oo.t&&("n"==oo.t?(0|oo.v)==oo.v&&oo.v>=-32768&&oo.v<=32767?Br(bi,13,oe(er,ui,oo.v)):Br(bi,14,ue(er,ui,oo.v)):Br(bi,15,te(er,ui,se(oo).slice(0,239))))}return Br(bi,1),bi.end()},book_to_wk3:function a(gi,mn){var Ti=mn||{};if(+Ti.codepage>=0&&lr(+Ti.codepage),"string"==Ti.type)throw new Error("Cannot write WK3 to JS string");var bi=Ie();Br(bi,0,function d(gi){var mn=W(26);mn.write_shift(2,4096),mn.write_shift(2,4),mn.write_shift(4,0);for(var Ti=0,bi=0,Yn=0,Rr=0;Rr<gi.SheetNames.length;++Rr){var kr=gi.Sheets[gi.SheetNames[Rr]];if(kr&&kr["!ref"]){++Yn;var er=Go(kr["!ref"]);Ti<er.e.r&&(Ti=er.e.r),bi<er.e.c&&(bi=er.e.c)}}return Ti>8191&&(Ti=8191),mn.write_shift(2,Ti),mn.write_shift(1,Yn),mn.write_shift(1,bi),mn.write_shift(2,0),mn.write_shift(2,0),mn.write_shift(1,1),mn.write_shift(1,2),mn.write_shift(4,0),mn.write_shift(4,0),mn}(gi));for(var Yn=0,Rr=0;Yn<gi.SheetNames.length;++Yn)(gi.Sheets[gi.SheetNames[Yn]]||{})["!ref"]&&Br(bi,27,Ur(gi.SheetNames[Yn],Rr++));var _r=0;for(Yn=0;Yn<gi.SheetNames.length;++Yn){var kr=gi.Sheets[gi.SheetNames[Yn]];if(kr&&kr["!ref"]){for(var er=ls(kr["!ref"]),Bs=Array.isArray(kr),ui=[],Qo=Math.min(er.e.r,8191),oo=er.s.r;oo<=Qo;++oo)for(var $o=gr(oo),lo=er.s.c;lo<=er.e.c;++lo){oo===er.s.r&&(ui[lo]=Va(lo));var Lc=Bs?(kr[oo]||[])[lo]:kr[ui[lo]+$o];Lc&&"z"!=Lc.t&&("n"==Lc.t?Br(bi,23,hn(oo,lo,_r,Lc.v)):Br(bi,22,Vt(oo,lo,_r,se(Lc).slice(0,239))))}++_r}}return Br(bi,1),bi.end()},to_workbook:function i(gi,mn){switch(mn.type){case"base64":return e(kt(Fa(gi)),mn);case"binary":return e(kt(gi),mn);case"buffer":case"array":return e(gi,mn)}throw"Unsupported type "+mn.type}}}(),Em=function(){var n=Pl("t"),i=Pl("rPr");function e(o){var d=o.match(n);if(!d)return{t:"s",v:""};var p={t:"s",v:qa(d[1])},D=o.match(i);return D&&(p.s=function xf(n){var i={},e=n.match(Wo),r=0,a=!1;if(e)for(;r!=e.length;++r){var o=oa(e[r]);switch(o[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!o.val)break;case"<shadow>":case"<shadow/>":i.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==o.val)break;i.cp=Vn[parseInt(o.val,10)];break;case"<outline":if(!o.val)break;case"<outline>":case"<outline/>":i.outline=1;break;case"</outline>":break;case"<rFont":i.name=o.val;break;case"<sz":i.sz=o.val;break;case"<strike":if(!o.val)break;case"<strike>":case"<strike/>":i.strike=1;break;case"</strike>":break;case"<u":if(!o.val)break;switch(o.val){case"double":i.uval="double";break;case"singleAccounting":i.uval="single-accounting";break;case"doubleAccounting":i.uval="double-accounting"}case"<u>":case"<u/>":i.u=1;break;case"</u>":break;case"<b":if("0"==o.val)break;case"<b>":case"<b/>":i.b=1;break;case"</b>":break;case"<i":if("0"==o.val)break;case"<i>":case"<i/>":i.i=1;break;case"</i>":break;case"<color":o.rgb&&(i.color=o.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":i.family=o.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":i.valign=o.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(47!==o[0].charCodeAt(1)&&!a)throw new Error("Unrecognized rich format "+o[0])}}return i}(D[1])),p}var r=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(d){return d.replace(r,"").split(a).map(e).filter(function(p){return p.v})}}(),bf=function(){var i=/(\r\n|\n)/g;function r(a){var o=[[],a.v,[]];return a.v?(a.s&&function e(a,o,d){var p=[];a.u&&p.push("text-decoration: underline;"),a.uval&&p.push("text-underline-style:"+a.uval+";"),a.sz&&p.push("font-size:"+a.sz+"pt;"),a.outline&&p.push("text-effect: outline;"),a.shadow&&p.push("text-shadow: auto;"),o.push('<span style="'+p.join("")+'">'),a.b&&(o.push("<b>"),d.push("</b>")),a.i&&(o.push("<i>"),d.push("</i>")),a.strike&&(o.push("<s>"),d.push("</s>"));var D=a.valign||"";"superscript"==D||"super"==D?D="sup":"subscript"==D&&(D="sub"),""!=D&&(o.push("<"+D+">"),d.push("</"+D+">")),d.push("</span>")}(a.s,o[0],o[2]),o[0].join("")+o[1].replace(i,"<br/>")+o[2].join("")):""}return function(o){return o.map(r).join("")}}(),Zh=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Qf=/<(?:\w+:)?r>/,gg=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function km(n,i){var e=!i||i.cellHTML,r={};return n?(n.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=qa(Rs(n.slice(n.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Rs(n),e&&(r.h=Jc(r.t))):n.match(Qf)&&(r.r=Rs(n),r.t=qa(Rs((n.replace(gg,"").match(Zh)||[]).join("").replace(Wo,""))),e&&(r.h=bf(Em(r.r)))),r):{t:""}}var v0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,_0=/<(?:\w+:)?(?:si|sstItem)>/g,vg=/<\/(?:\w+:)?(?:si|sstItem)>/,_g=/^\s|\s$|[\t\n\r]/;function Tm(n,i){if(!i.bookSST)return"";var e=[Ys];e[e.length]=or("sst",null,{xmlns:pn[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(null!=n[r]){var a=n[r],o="<si>";a.r?o+=a.r:(o+="<t",a.t||(a.t=""),a.t.match(_g)&&(o+=' xml:space="preserve"'),o+=">"+$a(a.t)+"</t>"),e[e.length]=o+="</si>"}return e.length>2&&(e[e.length]="</sst>",e[1]=e[1].replace("/>",">")),e.join("")}var w0=function Jd(n,i){var e=!1;return null==i&&(e=!0,i=W(15+4*n.t.length)),i.write_shift(1,0),hr(n.t,i),e?i.slice(0,i.l):i};function xg(n){var i=Ie();Ye(i,159,function b0(n,i){return i||(i=W(8)),i.write_shift(4,n.Count),i.write_shift(4,n.Unique),i}(n));for(var e=0;e<n.length;++e)Ye(i,19,w0(n[e]));return Ye(i,160),i.end()}function dh(n){if(typeof Mr<"u")return Mr.utils.encode(Dn,n);for(var i=[],e=n.split(""),r=0;r<e.length;++r)i[r]=e[r].charCodeAt(0);return i}function cl(n,i){var e={};return e.Major=n.read_shift(2),e.Minor=n.read_shift(2),i>=4&&(n.l+=i-4),e}function bg(n){for(var i=n.read_shift(4),e=n.l+i-4,r={},a=n.read_shift(4),o=[];a-- >0;)o.push({t:n.read_shift(4),v:n.read_shift(0,"lpp4")});if(r.name=n.read_shift(0,"lpp4"),r.comps=o,n.l!=e)throw new Error("Bad DataSpaceMapEntry: "+n.l+" != "+e);return r}function wf(n,i){var e=n.l+i,r={};r.Flags=63&n.read_shift(4),n.l+=4,r.AlgID=n.read_shift(4);var a=!1;switch(r.AlgID){case 26126:case 26127:case 26128:a=36==r.Flags;break;case 26625:a=4==r.Flags;break;case 0:a=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=n.read_shift(4),r.KeySize=n.read_shift(4),r.ProviderType=n.read_shift(4),n.l+=8,r.CSPName=n.read_shift(e-n.l>>1,"utf16le"),n.l=e,r}function ep(n,i){var e={},r=n.l+i;return n.l+=4,e.Salt=n.slice(n.l,n.l+16),n.l+=16,e.Verifier=n.slice(n.l,n.l+16),n.l+=16,n.read_shift(4),e.VerifierHash=n.slice(n.l,r),n.l=r,e}function Fp(n){if(36!=(63&n.read_shift(4)))throw new Error("EncryptionInfo mismatch");var e=n.read_shift(4);return{t:"Std",h:wf(n,e),v:ep(n,n.length-n.l)}}function E0(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Ev(n){var i=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];n.l+=4;var e=n.read_shift(n.length-n.l,"utf8"),r={};return e.replace(Wo,function(o){var d=oa(o);switch(ko(d[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":i.forEach(function(p){r[p]=d[p]});break;case"<dataIntegrity":r.encryptedHmacKey=d.encryptedHmacKey,r.encryptedHmacValue=d.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"<keyEncryptor":r.uri=d.uri;break;case"<encryptedKey":r.encs.push(d);break;default:throw d[0]}}),r}function Bp(n){var e,o,i=0,r=dh(n),a=r.length+1;for((e=Je(a))[0]=r.length,o=1;o!=a;++o)e[o]=r[o-1];for(o=a-1;o>=0;--o)i=((16384&i?1:0)|i<<1&32767)^e[o];return 52811^i}var tp=function(){var n=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],i=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],e=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(d,p){return function(d){return 255&(d/2|128*d)}(d^p)};return function(d){for(var p=dh(d),D=function(d){for(var p=i[d.length-1],D=104,P=d.length-1;P>=0;--P)for(var B=d[P],te=0;7!=te;++te)64&B&&(p^=e[D]),B*=2,--D;return p}(p),P=p.length,B=Je(16),te=0;16!=te;++te)B[te]=0;var ge;for(1==(1&P)&&(B[P]=a(n[0],D>>8),B[--P]=a(p[p.length-1],255&D));P>0;)B[--P]=a(p[P],D>>8),B[--P]=a(p[P],255&D);for(P=15,ge=15-p.length;ge>0;)B[P]=a(n[ge],D>>8),--ge,B[--P]=a(p[P],255&D),--P,--ge;return B}}();var Ao=function(){function n(a,o){switch(o.type){case"base64":return i(Fa(a),o);case"binary":return i(a,o);case"buffer":return i(Et&&Buffer.isBuffer(a)?a.toString("binary"):Ci(a),o);case"array":return i(Jl(a),o)}throw new Error("Unrecognized type "+o.type)}function i(a,o){var p=(o||{}).dense?[]:{},D=a.match(/\\trowd.*?\\row\b/g);if(!D.length)throw new Error("RTF missing table");var P={s:{c:0,r:0},e:{c:0,r:D.length-1}};return D.forEach(function(B,te){Array.isArray(p)&&(p[te]=[]);for(var ge,ae=/\\\w+\b/g,oe=0,ue=-1;ge=ae.exec(B);){if("\\cell"===ge[0]){var Te=B.slice(oe,ae.lastIndex-ge[0].length);if(" "==Te[0]&&(Te=Te.slice(1)),++ue,Te.length){var qe={v:Te,t:"s"};Array.isArray(p)?p[te][ue]=qe:p[xa({r:te,c:ue})]=qe}}oe=ae.lastIndex}ue>P.e.c&&(P.e.c=ue)}),p["!ref"]=ba(P),p}return{to_workbook:function e(a,o){return me(n(a,o),o)},to_sheet:n,from_sheet:function r(a){for(var p,o=["{\\rtf1\\ansi"],d=ls(a["!ref"]),D=Array.isArray(a),P=d.s.r;P<=d.e.r;++P){o.push("\\trowd\\trautofit1");for(var B=d.s.c;B<=d.e.c;++B)o.push("\\cellx"+(B+1));for(o.push("\\pard\\intbl"),B=d.s.c;B<=d.e.c;++B){var te=xa({r:P,c:B});(p=D?(a[P]||[])[B]:a[te])&&(null!=p.v||p.f&&!p.F)&&(o.push(" "+(p.w||(se(p),p.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}}}();function Cf(n){for(var i=0,e=1;3!=i;++i)e=256*e+(n[i]>255?255:n[i]<0?0:n[i]);return e.toString(16).toUpperCase().slice(1)}function dd(n,i){if(0===i)return n;var e=function Jh(n){var i=n[0]/255,e=n[1]/255,r=n[2]/255,a=Math.max(i,e,r),o=Math.min(i,e,r),d=a-o;if(0===d)return[0,0,i];var D,p=0,P=a+o;switch(D=d/(P>1?2-P:P),a){case i:p=((e-r)/d+6)%6;break;case e:p=(r-i)/d+2;break;case r:p=(i-e)/d+4}return[p/6,D,P/2]}(function np(n){var i=n.slice("#"===n[0]?1:0).slice(0,6);return[parseInt(i.slice(0,2),16),parseInt(i.slice(2,4),16),parseInt(i.slice(4,6),16)]}(n));return e[2]=i<0?e[2]*(1+i):1-(1-e[2])*(1-i),Cf(function Np(n){var D,e=n[1],r=n[2],a=2*e*(r<.5?r:1-r),o=r-a/2,d=[o,o,o],p=6*n[0];if(0!==e)switch(0|p){case 0:case 6:D=a*p,d[0]+=a,d[1]+=D;break;case 1:d[0]+=D=a*(2-p),d[1]+=a;break;case 2:D=a*(p-2),d[1]+=a,d[2]+=D;break;case 3:d[1]+=D=a*(4-p),d[2]+=a;break;case 4:D=a*(p-4),d[2]+=a,d[0]+=D;break;case 5:d[2]+=D=a*(6-p),d[0]+=a}for(var P=0;3!=P;++P)d[P]=Math.round(255*d[P]);return d}(e))}var Cg=6,T0=15,Ef=1,Ac=Cg;function Ph(n){return Math.floor((n+Math.round(128/Ac)/256)*Ac)}function Fh(n){return Math.floor((n-5)/Ac*100+.5)/100}function rp(n){return Math.round((n*Ac+5)/Ac*256)/256}function zp(n){return rp(Fh(Ph(n)))}function kf(n){var i=Math.abs(n-zp(n)),e=Ac;if(i>.005)for(Ac=Ef;Ac<T0;++Ac)Math.abs(n-zp(n))<=i&&(i=Math.abs(n-zp(n)),e=Ac);Ac=e}function hd(n){n.width?(n.wpx=Ph(n.width),n.wch=Fh(n.wpx),n.MDW=Ac):n.wpx?(n.wch=Fh(n.wpx),n.width=rp(n.wch),n.MDW=Ac):"number"==typeof n.wch&&(n.width=rp(n.wch),n.wpx=Ph(n.width),n.MDW=Ac),n.customWidth&&delete n.customWidth}var Am=96;function ap(n){return 96*n/Am}function Tf(n){return n*Am/96}var Eg={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"},sp=["numFmtId","fillId","fontId","borderId","xfId"],Sf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"],op=function(){var i=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,e=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,o=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(p,D,P){var te,B={};return p?((te=(p=p.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(i))&&function Iv(n,i,e){i.NumberFmt=[];for(var r=no(st),a=0;a<r.length;++a)i.NumberFmt[r[a]]=st[r[a]];var o=n[0].match(Wo);if(o)for(a=0;a<o.length;++a){var d=oa(o[a]);switch(ko(d[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var p=qa(Rs(d.formatCode)),D=parseInt(d.numFmtId,10);if(i.NumberFmt[D]=p,D>0){if(D>392){for(D=392;D>60&&null!=i.NumberFmt[D];--D);i.NumberFmt[D]=p}Qr(p,D)}break;default:if(e.WTF)throw new Error("unrecognized "+d[0]+" in numFmts")}}}(te,B,P),(te=p.match(a))&&function A_(n,i,e,r){i.Fonts=[];var a={},o=!1;(n[0].match(Wo)||[]).forEach(function(d){var p=oa(d);switch(ko(p[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":i.Fonts.push(a),a={};break;case"<name":p.val&&(a.name=Rs(p.val));break;case"<b":a.bold=p.val?Qs(p.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=p.val?Qs(p.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(p.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=p.val?Qs(p.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=p.val?Qs(p.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=p.val?Qs(p.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=p.val?Qs(p.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=p.val?Qs(p.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":p.val&&(a.sz=+p.val);break;case"<vertAlign":p.val&&(a.vertAlign=p.val);break;case"<family":p.val&&(a.family=parseInt(p.val,10));break;case"<scheme":p.val&&(a.scheme=p.val);break;case"<charset":if("1"==p.val)break;p.codepage=Vn[parseInt(p.val,10)];break;case"<color":if(a.color||(a.color={}),p.auto&&(a.color.auto=Qs(p.auto)),p.rgb)a.color.rgb=p.rgb.slice(-6);else if(p.indexed){a.color.index=parseInt(p.indexed,10);var D=hi[a.color.index];81==a.color.index&&(D=hi[1]),D||(D=hi[1]),a.color.rgb=D[0].toString(16)+D[1].toString(16)+D[2].toString(16)}else p.theme&&(a.color.theme=parseInt(p.theme,10),p.tint&&(a.color.tint=parseFloat(p.tint)),p.theme&&e.themeElements&&e.themeElements.clrScheme&&(a.color.rgb=dd(e.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<AlternateContent":case"<ext":o=!0;break;case"</AlternateContent>":case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+p[0]+" in fonts")}})}(te,B,D,P),(te=p.match(r))&&function D_(n,i,e,r){i.Fills=[];var a={},o=!1;(n[0].match(Wo)||[]).forEach(function(d){var p=oa(d);switch(ko(p[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":i.Fills.push(a={});break;case"<gradientFill":case"</gradientFill>":i.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":p.patternType&&(a.patternType=p.patternType);break;case"<bgColor":a.bgColor||(a.bgColor={}),p.indexed&&(a.bgColor.indexed=parseInt(p.indexed,10)),p.theme&&(a.bgColor.theme=parseInt(p.theme,10)),p.tint&&(a.bgColor.tint=parseFloat(p.tint)),p.rgb&&(a.bgColor.rgb=p.rgb.slice(-6));break;case"<fgColor":a.fgColor||(a.fgColor={}),p.theme&&(a.fgColor.theme=parseInt(p.theme,10)),p.tint&&(a.fgColor.tint=parseFloat(p.tint)),null!=p.rgb&&(a.fgColor.rgb=p.rgb.slice(-6));break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+p[0]+" in fills")}})}(te,B,0,P),(te=p.match(o))&&function Av(n,i,e,r){i.Borders=[];var a={},o=!1;(n[0].match(Wo)||[]).forEach(function(d){var p=oa(d);switch(ko(p[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":a={},p.diagonalUp&&(a.diagonalUp=Qs(p.diagonalUp)),p.diagonalDown&&(a.diagonalDown=Qs(p.diagonalDown)),i.Borders.push(a);break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(r&&r.WTF&&!o)throw new Error("unrecognized "+p[0]+" in borders")}})}(te,B,0,P),(te=p.match(e))&&function Qh(n,i,e){i.CellXf=[];var r,a=!1;(n[0].match(Wo)||[]).forEach(function(o){var d=oa(o),p=0;switch(ko(d[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(r=d)[0],p=0;p<sp.length;++p)r[sp[p]]&&(r[sp[p]]=parseInt(r[sp[p]],10));for(p=0;p<Sf.length;++p)r[Sf[p]]&&(r[Sf[p]]=Qs(r[Sf[p]]));if(i.NumberFmt&&r.numFmtId>392)for(p=392;p>60;--p)if(i.NumberFmt[r.numFmtId]==i.NumberFmt[p]){r.numFmtId=p;break}i.CellXf.push(r);break;case"<alignment":case"<alignment/>":var D={};d.vertical&&(D.vertical=d.vertical),d.horizontal&&(D.horizontal=d.horizontal),null!=d.textRotation&&(D.textRotation=d.textRotation),d.indent&&(D.indent=d.indent),d.wrapText&&(D.wrapText=Qs(d.wrapText)),r.alignment=D;break;case"<AlternateContent":case"<ext":a=!0;break;case"</AlternateContent>":case"</ext>":a=!1;break;default:if(e&&e.WTF&&!a)throw new Error("unrecognized "+d[0]+" in cellXfs")}})}(te,B,P),B):B}}();function kg(n,i){var r,e=[Ys,or("styleSheet",null,{xmlns:pn[0],"xmlns:vt":Ei.vt})];return n.SSF&&null!=(r=function Mv(n){var i=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=n[r]&&(i[i.length]=or("numFmt",null,{numFmtId:r,formatCode:$a(n[r])}))}),1===i.length?"":(i[i.length]="</numFmts>",i[0]=or("numFmts",null,{count:i.length-2}).replace("/>",">"),i.join(""))}(n.SSF))&&(e[e.length]=r),e[e.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',e[e.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',e[e.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',e[e.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function Yp(n){var i=[];return i[i.length]=or("cellXfs",null),n.forEach(function(e){i[i.length]=or("xf",null,e)}),i[i.length]="</cellXfs>",2===i.length?"":(i[0]=or("cellXfs",null,{count:i.length-2}).replace("/>",">"),i.join(""))}(i.cellXfs))&&(e[e.length]=r),e[e.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',e[e.length]='<dxfs count="0"/>',e[e.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',e.length>2&&(e[e.length]="</styleSheet>",e[1]=e[1].replace("/>",">")),e.join("")}function Sg(n,i,e){e||(e=W(6+4*i.length)),e.write_shift(2,n),hr(i,e);var r=e.length>e.l?e.slice(0,e.l):e;return null==e.l&&(e.l=e.length),r}var q,A=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],ie=O;function Re(n,i){i||(i=W(84)),q||(q=Od(A));var e=q[n.patternType];null==e&&(e=40),i.write_shift(4,e);var r=0;if(40!=e)for(Vc({auto:1},i),Vc({auto:1},i);r<12;++r)i.write_shift(4,0);else{for(;r<4;++r)i.write_shift(4,0);for(;r<12;++r)i.write_shift(4,0)}return i.length>i.l?i.slice(0,i.l):i}function an(n,i,e){return e||(e=W(16)),e.write_shift(2,i||0),e.write_shift(2,n.numFmtId||0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(1,0),e}function sr(n,i){return i||(i=W(10)),i.write_shift(1,0),i.write_shift(1,0),i.write_shift(4,0),i.write_shift(4,0),i}var Us=O;function O_(n,i){var e=Ie();return Ye(e,278),function S0(n,i){if(i){var e=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)null!=i[a]&&++e}),0!=e&&(Ye(n,615,vr(e)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)null!=i[a]&&Ye(n,44,Sg(a,i[a]))}),Ye(n,616))}}(e,n.SSF),function Rv(n){Ye(n,611,vr(1)),Ye(n,43,function z(n,i){i||(i=W(153)),i.write_shift(2,20*n.sz),function nm(n,i){i||(i=W(2)),i.write_shift(1,(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0)),i.write_shift(1,0)}(n,i),i.write_shift(2,n.bold?700:400);var e=0;"superscript"==n.vertAlign?e=1:"subscript"==n.vertAlign&&(e=2),i.write_shift(2,e),i.write_shift(1,n.underline||0),i.write_shift(1,n.family||0),i.write_shift(1,n.charset||0),i.write_shift(1,0),Vc(n.color,i);var r=0;return"major"==n.scheme&&(r=1),"minor"==n.scheme&&(r=2),i.write_shift(1,r),hr(n.name,i),i.length>i.l?i.slice(0,i.l):i}({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Ye(n,612)}(e),function Hd(n){Ye(n,603,vr(2)),Ye(n,45,Re({patternType:"none"})),Ye(n,45,Re({patternType:"gray125"})),Ye(n,604)}(e),function Vd(n){Ye(n,613,vr(1)),Ye(n,46,function Co(n,i){return i||(i=W(51)),i.write_shift(1,0),sr(0,i),sr(0,i),sr(0,i),sr(0,i),sr(0,i),i.length>i.l?i.slice(0,i.l):i}()),Ye(n,614)}(e),function Im(n){Ye(n,626,vr(1)),Ye(n,47,an({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Ye(n,627)}(e),function I_(n,i){Ye(n,617,vr(i.length)),i.forEach(function(e){Ye(n,47,an(e,0))}),Ye(n,618)}(e,i.cellXfs),function M_(n){Ye(n,619,vr(1)),Ye(n,48,function yl(n,i){return i||(i=W(52)),i.write_shift(4,n.xfId),i.write_shift(2,1),i.write_shift(1,+n.builtinId),i.write_shift(1,0),Tr(n.name||"",i),i.length>i.l?i.slice(0,i.l):i}({xfId:0,builtinId:0,name:"Normal"})),Ye(n,620)}(e),function R_(n){Ye(n,505,vr(0)),Ye(n,506)}(e),function qy(n){Ye(n,508,function $c(n,i,e){var r=W(2052);return r.write_shift(4,n),Tr(i,r),Tr(e,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),Ye(n,509)}(e),Ye(e,279),e.end()}var Dd=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function L_(n,i,e){i.themeElements.clrScheme=[];var r={};(n[0].match(Wo)||[]).forEach(function(a){var o=oa(a);switch(o[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=o.val;break;case"<a:sysClr":r.rgb=o.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===o[0].charAt(1)?(i.themeElements.clrScheme[Dd.indexOf(o[0])]=r,r={}):r.name=o[0].slice(3,o[0].length-1);break;default:if(e&&e.WTF)throw new Error("Unrecognized "+o[0]+" in clrScheme")}})}function Yu(){}function Bh(){}var cs=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Dg=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fd=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/,Zy=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Af(n,i){(!n||0===n.length)&&(n=Ov());var e,r={};if(!(e=n.match(Zy)))throw new Error("themeElements not found in theme");return function Wl(n,i,e){var r;i.themeElements={},[["clrScheme",cs,L_],["fontScheme",Dg,Yu],["fmtScheme",fd,Bh]].forEach(function(a){if(!(r=n.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](r,i,e)})}(e[0],r,i),r.raw=n,r}function Ov(n,i){if(i&&i.themeXLSX)return i.themeXLSX;if(n&&"string"==typeof n.raw)return n.raw;var e=[Ys];return e[e.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',e[e.length]="<a:themeElements>",e[e.length]='<a:clrScheme name="Office">',e[e.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',e[e.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',e[e.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',e[e.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',e[e.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',e[e.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',e[e.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',e[e.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',e[e.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',e[e.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',e[e.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',e[e.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',e[e.length]="</a:clrScheme>",e[e.length]='<a:fontScheme name="Office">',e[e.length]="<a:majorFont>",e[e.length]='<a:latin typeface="Cambria"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',e[e.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',e[e.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',e[e.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',e[e.length]='<a:font script="Arab" typeface="Times New Roman"/>',e[e.length]='<a:font script="Hebr" typeface="Times New Roman"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="MoolBoran"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Times New Roman"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:majorFont>",e[e.length]="<a:minorFont>",e[e.length]='<a:latin typeface="Calibri"/>',e[e.length]='<a:ea typeface=""/>',e[e.length]='<a:cs typeface=""/>',e[e.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',e[e.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',e[e.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',e[e.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',e[e.length]='<a:font script="Arab" typeface="Arial"/>',e[e.length]='<a:font script="Hebr" typeface="Arial"/>',e[e.length]='<a:font script="Thai" typeface="Tahoma"/>',e[e.length]='<a:font script="Ethi" typeface="Nyala"/>',e[e.length]='<a:font script="Beng" typeface="Vrinda"/>',e[e.length]='<a:font script="Gujr" typeface="Shruti"/>',e[e.length]='<a:font script="Khmr" typeface="DaunPenh"/>',e[e.length]='<a:font script="Knda" typeface="Tunga"/>',e[e.length]='<a:font script="Guru" typeface="Raavi"/>',e[e.length]='<a:font script="Cans" typeface="Euphemia"/>',e[e.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',e[e.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',e[e.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',e[e.length]='<a:font script="Thaa" typeface="MV Boli"/>',e[e.length]='<a:font script="Deva" typeface="Mangal"/>',e[e.length]='<a:font script="Telu" typeface="Gautami"/>',e[e.length]='<a:font script="Taml" typeface="Latha"/>',e[e.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',e[e.length]='<a:font script="Orya" typeface="Kalinga"/>',e[e.length]='<a:font script="Mlym" typeface="Kartika"/>',e[e.length]='<a:font script="Laoo" typeface="DokChampa"/>',e[e.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',e[e.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',e[e.length]='<a:font script="Viet" typeface="Arial"/>',e[e.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',e[e.length]='<a:font script="Geor" typeface="Sylfaen"/>',e[e.length]="</a:minorFont>",e[e.length]="</a:fontScheme>",e[e.length]='<a:fmtScheme name="Office">',e[e.length]="<a:fillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="1"/>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:lin ang="16200000" scaled="0"/>',e[e.length]="</a:gradFill>",e[e.length]="</a:fillStyleLst>",e[e.length]="<a:lnStyleLst>",e[e.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',e[e.length]="</a:lnStyleLst>",e[e.length]="<a:effectStyleLst>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]="</a:effectStyle>",e[e.length]="<a:effectStyle>",e[e.length]="<a:effectLst>",e[e.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',e[e.length]="</a:effectLst>",e[e.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',e[e.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',e[e.length]="</a:effectStyle>",e[e.length]="</a:effectStyleLst>",e[e.length]="<a:bgFillStyleLst>",e[e.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]='<a:gradFill rotWithShape="1">',e[e.length]="<a:gsLst>",e[e.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',e[e.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',e[e.length]="</a:gsLst>",e[e.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',e[e.length]="</a:gradFill>",e[e.length]="</a:bgFillStyleLst>",e[e.length]="</a:fmtScheme>",e[e.length]="</a:themeElements>",e[e.length]="<a:objectDefaults>",e[e.length]="<a:spDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',e[e.length]="</a:spDef>",e[e.length]="<a:lnDef>",e[e.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',e[e.length]="</a:lnDef>",e[e.length]="</a:objectDefaults>",e[e.length]="<a:extraClrSchemeLst/>",e[e.length]="</a:theme>",e.join("")}function P_(n){var i=n.read_shift(2),e=n.read_shift(2)-4,r=[i];switch(i){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=function Qy(n){var i={};switch(i.xclrType=n.read_shift(2),i.nTintShade=n.read_shift(2),i.xclrType){case 0:case 4:n.l+=4;break;case 1:i.xclrValue=function D0(n,i){return O(n,i)}(n,4);break;case 2:i.xclrValue=_l(n);break;case 3:i.xclrValue=function Jy(n){return n.read_shift(4)}(n)}return n.l+=8,i}(n);break;case 6:r[1]=function Lv(n,i){return O(n,i)}(n,e);break;case 14:case 15:r[1]=n.read_shift(1===e?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+i+" "+e)}return r}function Pv(n,i){i.forEach(function(e){})}function Nh(){var n=Ie();return Ye(n,332),Ye(n,334,vr(1)),Ye(n,335,function Al(n){var i=W(12+2*n.name.length);return i.write_shift(4,n.flags),i.write_shift(4,n.version),hr(n.name,i),i.slice(0,i.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),Ye(n,336),Ye(n,339,function e1(n,i){var e=W(8+2*i.length);return e.write_shift(4,n),hr(i,e),e.slice(0,e.l)}(1,"XLDAPR")),Ye(n,52),Ye(n,35,vr(514)),Ye(n,4096,vr(0)),Ye(n,4097,Sl(1)),Ye(n,36),Ye(n,53),Ye(n,340),Ye(n,337,function t1(n,i){var e=W(8);return e.write_shift(4,n),e.write_shift(4,i?1:0),e}(1,!0)),Ye(n,51,function F_(n){var i=W(4+8*n.length);i.write_shift(4,n.length);for(var e=0;e<n.length;++e)i.write_shift(4,n[e][0]),i.write_shift(4,n[e][1]);return i}([[1,0]])),Ye(n,338),Ye(n,333),n.end()}function Mm(){var n=[Ys];return n.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),n.join("")}var hh=1024;function Nv(n,i){for(var e=[21600,21600],r=["m0,0l0",e[1],e[0],e[1],e[0],"0xe"].join(","),a=[or("xml",null,{"xmlns:v":nn.v,"xmlns:o":nn.o,"xmlns:x":nn.x,"xmlns:mv":nn.mv}).replace(/\/>/,">"),or("o:shapelayout",or("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),or("v:shapetype",[or("v:stroke",null,{joinstyle:"miter"}),or("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:e.join(","),path:r})];hh<1e3*n;)hh+=1e3;return i.forEach(function(o){var d=Qa(o[0]),p={color2:"#BEFF82",type:"gradient"};"gradient"==p.type&&(p.angle="-180");var D="gradient"==p.type?or("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,P=or("v:fill",D,p);++hh,a=a.concat(["<v:shape"+ad({id:"_x0000_s"+hh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",P,or("v:shadow",null,{on:"t",obscured:"t"}),or("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ss("x:Anchor",[d.c+1,0,d.r+1,0,d.c+3,20,d.r+5,20].join(",")),Ss("x:AutoFill","False"),Ss("x:Row",String(d.r)),Ss("x:Column",String(d.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function zv(n,i,e,r){var o,a=Array.isArray(n);i.forEach(function(d){var p=Qa(d.ref);if(a?(n[p.r]||(n[p.r]=[]),o=n[p.r][p.c]):o=n[d.ref],!o){o={t:"z"},a?n[p.r][p.c]=o:n[d.ref]=o;var D=ls(n["!ref"]||"BDWGO1000001:A1");D.s.r>p.r&&(D.s.r=p.r),D.e.r<p.r&&(D.e.r=p.r),D.s.c>p.c&&(D.s.c=p.c),D.e.c<p.c&&(D.e.c=p.c);var P=ba(D);P!==n["!ref"]&&(n["!ref"]=P)}o.c||(o.c=[]);var B={a:d.author,t:d.t,r:d.r,T:e};d.h&&(B.h=d.h);for(var te=o.c.length-1;te>=0;--te){if(!e&&o.c[te].T)return;e&&!o.c[te].T&&o.c.splice(te,1)}if(e&&r)for(te=0;te<r.length;++te)if(B.a==r[te].id){B.a=r[te].name||B.a;break}o.c.push(B)})}function M0(n){var i=[Ys,or("comments",null,{xmlns:pn[0]})],e=[];return i.push("<authors>"),n.forEach(function(r){r[1].forEach(function(a){var o=$a(a.a);-1==e.indexOf(o)&&(e.push(o),i.push("<author>"+o+"</author>")),a.T&&a.ID&&-1==e.indexOf("tc="+a.ID)&&(e.push("tc="+a.ID),i.push("<author>tc="+a.ID+"</author>"))})}),0==e.length&&(e.push("SheetJ5"),i.push("<author>SheetJ5</author>")),i.push("</authors>"),i.push("<commentList>"),n.forEach(function(r){var a=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?a=e.indexOf("tc="+r[1][0].ID):r[1].forEach(function(D){D.a&&(a=e.indexOf($a(D.a))),o.push(D.t||"")}),i.push('<comment ref="'+r[0]+'" authorId="'+a+'"><text>'),o.length<=1)i.push(Ss("t",$a(o[0]||"")));else{for(var d="Comment:\n    "+o[0]+"\n",p=1;p<o.length;++p)d+="Reply:\n    "+o[p]+"\n";i.push(Ss("t",$a(d)))}i.push("</text></comment>")}),i.push("</commentList>"),i.length>2&&(i[i.length]="</comments>",i[1]=i[1].replace("/>",">")),i.join("")}function Yv(n,i,e){var r=[Ys,or("ThreadedComments",null,{xmlns:Ei.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(a){var o="";(a[1]||[]).forEach(function(d,p){if(d.T){d.a&&-1==i.indexOf(d.a)&&i.push(d.a);var D={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+e.tcid++).slice(-12)+"}"};0==p?o=D.id:D.parentId=o,d.ID=D.id,d.a&&(D.personId="{54EE7950-7262-4200-6969-"+("000000000000"+i.indexOf(d.a)).slice(-12)+"}"),r.push(or("threadedComment",Ss("text",d.t||""),D))}else delete d.ID})}),r.push("</ThreadedComments>"),r.join("")}var z_=Xr;function a1(n){var i=Ie(),e=[];return Ye(i,628),Ye(i,630),n.forEach(function(r){r[1].forEach(function(a){e.indexOf(a.a)>-1||(e.push(a.a.slice(0,54)),Ye(i,632,function r1(n){return hr(n.slice(0,54))}(a.a)))})}),Ye(i,631),Ye(i,633),n.forEach(function(r){r[1].forEach(function(a){a.iauthor=e.indexOf(a.a);var o={s:Qa(r[0]),e:Qa(r[0])};Ye(i,635,function fh(n,i){return null==i&&(i=W(36)),i.write_shift(4,n[1].iauthor),eh(n[0],i),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i.write_shift(4,0),i}([o,a])),a.t&&a.t.length>0&&Ye(i,637,function tm(n,i){var e=!1;return null==i&&(e=!0,i=W(23+4*n.t.length)),i.write_shift(1,1),hr(n.t,i),i.write_shift(4,1),function ll(n,i){i||(i=W(4)),i.write_shift(2,n.ich||0),i.write_shift(2,n.ifnt||0)}({ich:0,ifnt:0},i),e?i.slice(0,i.l):i}(a)),Ye(i,636),delete a.iauthor})}),Ye(i,634),Ye(i,629),i.end()}var Y_="application/vnd.ms-office.vbaProject",G_=["xlsb","xlsm","xlam","biff8","xla"],lp=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,i={r:0,c:0};function e(r,a,o,d){var p=!1,D=!1;0==o.length?D=!0:"["==o.charAt(0)&&(D=!0,o=o.slice(1,-1)),0==d.length?p=!0:"["==d.charAt(0)&&(p=!0,d=d.slice(1,-1));var P=o.length>0?0|parseInt(o,10):0,B=d.length>0?0|parseInt(d,10):0;return p?B+=i.c:--B,D?P+=i.r:--P,a+(p?"":"$")+Va(B)+(D?"":"$")+gr(P)}return function(a,o){return i=o,a.replace(n,e)}}(),Hv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Vv=function(){return function(i,e){return i.replace(Hv,function(r,a,o,d,p,D){var P=xo(d)-(o?0:e.c),B=Ar(D)-(p?0:e.r);return a+"R"+(0==B?"":p?B+1:"["+B+"]")+"C"+(0==P?"":o?P+1:"["+P+"]")})}}();function V_(n,i){return n.replace(Hv,function(e,r,a,o,d,p){return r+("$"==a?a+o:Va(xo(o)+i.c))+("$"==d?d+p:gr(Ar(p)+i.r))})}function U_(n,i,e){var a=Go(i).s,o=Qa(e);return V_(n,{r:o.r-a.r,c:o.c-a.c})}function Gu(n){return n.replace(/_xlfn\./g,"")}function xl(n){n.l+=1}function If(n,i){var e=n.read_shift(1==i?1:2);return[16383&e,e>>14&1,e>>15&1]}function Hu(n,i,e){var r=2;if(e){if(e.biff>=2&&e.biff<=5)return jv(n);12==e.biff&&(r=4)}var a=n.read_shift(r),o=n.read_shift(r),d=If(n,2),p=If(n,2);return{s:{r:a,c:d[0],cRel:d[1],rRel:d[2]},e:{r:o,c:p[0],cRel:p[1],rRel:p[2]}}}function jv(n){var i=If(n,2),e=If(n,2),r=n.read_shift(1),a=n.read_shift(1);return{s:{r:i[0],c:r,cRel:i[1],rRel:i[2]},e:{r:e[0],c:a,cRel:e[1],rRel:e[2]}}}function Gp(n,i,e){if(e&&e.biff>=2&&e.biff<=5)return function Ic(n){var i=If(n,2),e=n.read_shift(1);return{r:i[0],c:e,cRel:i[1],rRel:i[2]}}(n);var r=n.read_shift(e&&12==e.biff?4:2),a=If(n,2);return{r,c:a[0],cRel:a[1],rRel:a[2]}}function Eu(n){var i=n.read_shift(2),e=n.read_shift(2);return{r:i,c:255&e,fQuoted:!!(16384&e),cRel:e>>15,rRel:e>>15}}function Z_(n){var i=1&n[n.l+1];return n.l+=4,[i,1]}function Zv(n){return[n.read_shift(1),n.read_shift(1)]}function N0(n,i){var e=[n.read_shift(1)];if(12==i)switch(e[0]){case 2:e[0]=4;break;case 4:e[0]=16;break;case 0:e[0]=1;break;case 1:e[0]=2}switch(e[0]){case 4:e[1]=Lo(n,1)?"TRUE":"FALSE",12!=i&&(n.l+=7);break;case 37:case 16:e[1]=ri[n[n.l]],n.l+=12==i?4:8;break;case 0:n.l+=8;break;case 1:e[1]=sc(n);break;case 2:e[1]=Ul(n,0,{biff:i>0&&i<8?2:i});break;default:throw new Error("Bad SerAr: "+e[0])}return e}function u1(n,i,e){for(var r=n.read_shift(12==e.biff?4:2),a=[],o=0;o!=r;++o)a.push((12==e.biff?gu:Ih)(n,8));return a}function d1(n,i,e){var r=0,a=0;12==e.biff?(r=n.read_shift(4),a=n.read_shift(4)):(a=1+n.read_shift(1),r=1+n.read_shift(2)),e.biff>=2&&e.biff<8&&(--r,0==--a&&(a=256));for(var o=0,d=[];o!=r&&(d[o]=[]);++o)for(var p=0;p!=a;++p)d[o][p]=N0(n,e.biff);return d}function Rg(n,i,e){return n.l+=2,[Eu(n)]}function Up(n){return n.l+=6,[]}function Y0(n){return n.l+=2,[Ps(n),1&n.read_shift(2)]}var _1=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],$p={1:{n:"PtgExp",f:function Vp(n,i,e){return n.l++,e&&12==e.biff?[n.read_shift(4,"i"),0]:[n.read_shift(2),n.read_shift(e&&2==e.biff?1:2)]}},2:{n:"PtgTbl",f:O},3:{n:"PtgAdd",f:xl},4:{n:"PtgSub",f:xl},5:{n:"PtgMul",f:xl},6:{n:"PtgDiv",f:xl},7:{n:"PtgPower",f:xl},8:{n:"PtgConcat",f:xl},9:{n:"PtgLt",f:xl},10:{n:"PtgLe",f:xl},11:{n:"PtgEq",f:xl},12:{n:"PtgGe",f:xl},13:{n:"PtgGt",f:xl},14:{n:"PtgNe",f:xl},15:{n:"PtgIsect",f:xl},16:{n:"PtgUnion",f:xl},17:{n:"PtgRange",f:xl},18:{n:"PtgUplus",f:xl},19:{n:"PtgUminus",f:xl},20:{n:"PtgPercent",f:xl},21:{n:"PtgParen",f:xl},22:{n:"PtgMissArg",f:xl},23:{n:"PtgStr",f:function B0(n,i,e){return n.l++,bd(n,0,e)}},26:{n:"PtgSheet",f:function Lg(n,i,e){return n.l+=5,n.l+=2,n.l+=2==e.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function Pg(n,i,e){return n.l+=2==e.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function Om(n){return n.l++,ri[n.read_shift(1)]}},29:{n:"PtgBool",f:function F0(n){return n.l++,0!==n.read_shift(1)}},30:{n:"PtgInt",f:function iy(n){return n.l++,n.read_shift(2)}},31:{n:"PtgNum",f:function ny(n){return n.l++,sc(n)}},32:{n:"PtgArray",f:function Wv(n,i,e){var r=(96&n[n.l++])>>5;return n.l+=2==e.biff?6:12==e.biff?14:7,[r]}},33:{n:"PtgFunc",f:function ey(n,i,e){var r=(96&n[n.l])>>5;n.l+=1;var a=n.read_shift(e&&e.biff<=3?1:2);return[T1[a],uy[a],r]}},34:{n:"PtgFuncVar",f:function ty(n,i,e){var r=n[n.l++],a=n.read_shift(1),o=e&&e.biff<=3?[88==r?-1:0,n.read_shift(1)]:function zh(n){return[n[n.l+1]>>7,32767&n.read_shift(2)]}(n);return[a,(0===o[0]?uy:k1)[o[1]]]}},35:{n:"PtgName",f:function h1(n,i,e){var r=n.read_shift(1)>>>5&3,o=n.read_shift(!e||e.biff>=8?4:2);switch(e.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12}return[r,0,o]}},36:{n:"PtgRef",f:function Hp(n,i,e){var r=(96&n[n.l])>>5;return n.l+=1,[r,Gp(n,0,e)]}},37:{n:"PtgArea",f:function $_(n,i,e){return[(96&n[n.l++])>>5,Hu(n,0,e)]}},38:{n:"PtgMemArea",f:function Lm(n,i,e){var r=n.read_shift(1)>>>5&3;return n.l+=e&&2==e.biff?3:4,[r,n.read_shift(e&&2==e.biff?1:2)]}},39:{n:"PtgMemErr",f:O},40:{n:"PtgMemNoMem",f:O},41:{n:"PtgMemFunc",f:function Pm(n,i,e){return[n.read_shift(1)>>>5&3,n.read_shift(e&&2==e.biff?1:2)]}},42:{n:"PtgRefErr",f:function Kv(n,i,e){var r=n.read_shift(1)>>>5&3;return n.l+=4,e.biff<8&&n.l--,12==e.biff&&(n.l+=2),[r]}},43:{n:"PtgAreaErr",f:function X_(n,i,e){var r=(96&n[n.l++])>>5;return n.l+=e&&e.biff>8?12:e.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function Q_(n,i,e){var r=(96&n[n.l])>>5;n.l+=1;var a=function o1(n,i,e){var r=e&&e.biff?e.biff:8;if(r>=2&&r<=5)return function j_(n){var i=n.read_shift(2),e=n.read_shift(1),r=(32768&i)>>15,a=(16384&i)>>14;return i&=16383,1==r&&i>=8192&&(i-=16384),1==a&&e>=128&&(e-=256),{r:i,c:e,cRel:a,rRel:r}}(n);var a=n.read_shift(r>=12?4:2),o=n.read_shift(2),d=(16384&o)>>14,p=(32768&o)>>15;if(o&=16383,1==p)for(;a>524287;)a-=1048576;if(1==d)for(;o>8191;)o-=16384;return{r:a,c:o,cRel:d,rRel:p}}(n,0,e);return[r,a]}},45:{n:"PtgAreaN",f:function $v(n,i,e){var r=(96&n[n.l++])>>5,a=function Ig(n,i,e){if(e.biff<8)return jv(n);var r=n.read_shift(12==e.biff?4:2),a=n.read_shift(12==e.biff?4:2),o=If(n,2),d=If(n,2);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:d[0],cRel:d[1],rRel:d[2]}}}(n,0,e);return[r,a]}},46:{n:"PtgMemAreaN",f:function ku(n){return[n.read_shift(1)>>>5&3,n.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function t_(n){return[n.read_shift(1)>>>5&3,n.read_shift(2)]}},57:{n:"PtgNameX",f:function f1(n,i,e){return 5==e.biff?function p1(n){var i=n.read_shift(1)>>>5&3,e=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[i,e,r]}(n):[n.read_shift(1)>>>5&3,n.read_shift(2),n.read_shift(4)]}},58:{n:"PtgRef3d",f:function Mg(n,i,e){var r=(96&n[n.l])>>5;n.l+=1;var a=n.read_shift(2);return e&&5==e.biff&&(n.l+=12),[r,a,Gp(n,0,e)]}},59:{n:"PtgArea3d",f:function W_(n,i,e){var r=(96&n[n.l++])>>5,a=n.read_shift(2,"i");if(e&&5===e.biff)n.l+=12;return[r,a,Hu(n,0,e)]}},60:{n:"PtgRefErr3d",f:function m1(n,i,e){var r=(96&n[n.l++])>>5,a=n.read_shift(2),o=4;if(e)switch(e.biff){case 5:o=15;break;case 12:o=6}return n.l+=o,[r,a]}},61:{n:"PtgAreaErr3d",f:function q_(n,i,e){var r=(96&n[n.l++])>>5,a=n.read_shift(2),o=8;if(e)switch(e.biff){case 5:n.l+=12,o=6;break;case 12:o=12}return n.l+=o,[r,a]}},255:{}},G0={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},x1={1:{n:"PtgElfLel",f:Y0},2:{n:"PtgElfRw",f:Rg},3:{n:"PtgElfCol",f:Rg},6:{n:"PtgElfRwV",f:Rg},7:{n:"PtgElfColV",f:Rg},10:{n:"PtgElfRadical",f:Rg},11:{n:"PtgElfRadicalS",f:Up},13:{n:"PtgElfColS",f:Up},15:{n:"PtgElfColSV",f:Up},16:{n:"PtgElfRadicalLel",f:Y0},25:{n:"PtgList",f:function jp(n){n.l+=2;var i=n.read_shift(2),e=n.read_shift(2),r=n.read_shift(4),a=n.read_shift(2),o=n.read_shift(2);return{ixti:i,coltype:3&e,rt:_1[e>>2&31],idx:r,c:a,C:o}}},29:{n:"PtgSxName",f:function Og(n){return n.l+=2,[n.read_shift(4)]}},255:{}},H0={0:{n:"PtgAttrNoop",f:function y1(n){return n.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function J_(n,i,e){var r=255&n[n.l+1]?1:0;return n.l+=e&&2==e.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function Xv(n,i,e){var r=255&n[n.l+1]?1:0;return n.l+=2,[r,n.read_shift(e&&2==e.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function K_(n,i,e){n.l+=2;for(var r=n.read_shift(e&&2==e.biff?1:2),a=[],o=0;o<=r;++o)a.push(n.read_shift(e&&2==e.biff?1:2));return a}},8:{n:"PtgAttrGoto",f:function Mf(n,i,e){var r=255&n[n.l+1]?1:0;return n.l+=2,[r,n.read_shift(e&&2==e.biff?1:2)]}},16:{n:"PtgAttrSum",f:function P0(n,i,e){n.l+=e&&2==e.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Z_},33:{n:"PtgAttrBaxcel",f:Z_},64:{n:"PtgAttrSpace",f:function l1(n){return n.read_shift(2),Zv(n)}},65:{n:"PtgAttrSpaceSemi",f:function c1(n){return n.read_shift(2),Zv(n)}},128:{n:"PtgAttrIfError",f:function qv(n){var i=255&n[n.l+1]?1:0;return n.l+=2,[i,n.read_shift(2)]}},255:{}};function Fm(n,i,e,r){if(r.biff<8)return O(n,i);for(var a=n.l+i,o=[],d=0;d!==e.length;++d)switch(e[d][0]){case"PtgArray":e[d][1]=d1(n,0,r),o.push(e[d][1]);break;case"PtgMemArea":e[d][2]=u1(n,0,r),o.push(e[d][2]);break;case"PtgExp":r&&12==r.biff&&(e[d][1][1]=n.read_shift(4),o.push(e[d][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+e[d][0]}return 0!=(i=a-n.l)&&o.push(O(n,i)),o}function Wp(n,i,e){for(var a,o,r=n.l+i,d=[];r!=n.l;)i=r-n.l,a=$p[o=n[n.l]]||$p[G0[o]],(24===o||25===o)&&(a=(24===o?x1:H0)[n[n.l+1]]),a&&a.f?d.push([a.n,a.f(n,i,e)]):O(n,i);return d}function oy(n){for(var i=[],e=0;e<n.length;++e){for(var r=n[e],a=[],o=0;o<r.length;++o){var d=r[o];a.push(d?2===d[0]?'"'+d[1].replace(/"/g,'""')+'"':d[1]:"")}i.push(a.join(","))}return i.join(";")}var b1={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function cy(n,i,e){if(!n)return"SH33TJSERR0";if(e.biff>8&&(!n.XTI||!n.XTI[i]))return n.SheetNames[i];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[i];if(e.biff<8)return i>1e4&&(i-=65536),i<0&&(i=-i),0==i?"":n.XTI[i-1];if(!r)return"SH33TJSERR1";var a="";if(e.biff>8)switch(n[r[0]][0]){case 357:return a=-1==r[1]?"#REF":n.SheetNames[r[1]],r[1]==r[2]?a:a+":"+n.SheetNames[r[2]];case 358:return null!=e.SID?n.SheetNames[e.SID]:"SH33TJSSAME"+n[r[0]][0];default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return a=-1==r[1]?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return n[r[0]][0][3]?(a=-1==r[1]?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function V0(n,i,e){var r=cy(n,i,e);return"#REF"==r?r:function ly(n,i){if(!(n||i&&i.biff<=5&&i.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}(r,e)}function Vu(n,i,e,r,a){var D,P,B,oe,o=a&&a.biff||8,d={s:{c:0,r:0},e:{c:0,r:0}},p=[],te=0,ae=0,ge="";if(!n[0]||!n[0][0])return"";for(var ue=-1,Te="",qe=0,ht=n[0].length;qe<ht;++qe){var ut=n[0][qe];switch(ut[0]){case"PtgUminus":p.push("-"+p.pop());break;case"PtgUplus":p.push("+"+p.pop());break;case"PtgPercent":p.push(p.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(D=p.pop(),P=p.pop(),ue>=0){switch(n[0][ue][1][0]){case 0:Te=ra(" ",n[0][ue][1][1]);break;case 1:Te=ra("\r",n[0][ue][1][1]);break;default:if(Te="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][ue][1][0])}P+=Te,ue=-1}p.push(P+b1[ut[0]]+D);break;case"PtgIsect":D=p.pop(),P=p.pop(),p.push(P+" "+D);break;case"PtgUnion":D=p.pop(),P=p.pop(),p.push(P+","+D);break;case"PtgRange":D=p.pop(),P=p.pop(),p.push(P+":"+D);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":B=ni(ut[1][1],d,a),p.push(on(B,o));break;case"PtgRefN":B=e?ni(ut[1][1],e,a):ut[1][1],p.push(on(B,o));break;case"PtgRef3d":te=ut[1][1],B=ni(ut[1][2],d,a),ge=V0(r,te,a),p.push(ge+"!"+on(B,o));break;case"PtgFunc":case"PtgFuncVar":var zi=ut[1][0],vi=ut[1][1];zi||(zi=0);var Vt=0==(zi&=127)?[]:p.slice(-zi);p.length-=zi,"User"===vi&&(vi=Vt.shift()),p.push(vi+"("+Vt.join(",")+")");break;case"PtgBool":p.push(ut[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":p.push(ut[1]);break;case"PtgNum":p.push(String(ut[1]));break;case"PtgStr":p.push('"'+ut[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":oe=Ri(ut[1][1],e?{s:e}:d,a),p.push(Zn(oe,a));break;case"PtgArea":oe=Ri(ut[1][1],d,a),p.push(Zn(oe,a));break;case"PtgArea3d":oe=ut[1][2],ge=V0(r,te=ut[1][1],a),p.push(ge+"!"+Zn(oe,a));break;case"PtgAttrSum":p.push("SUM("+p.pop()+")");break;case"PtgName":var wi=(r.names||[])[(ae=ut[1][2])-1]||(r[0]||[])[ae],Yi=wi?wi.Name:"SH33TJSNAME"+String(ae);Yi&&"_xlfn."==Yi.slice(0,6)&&!a.xlfn&&(Yi=Yi.slice(6)),p.push(Yi);break;case"PtgNameX":var Tn,hn=ut[1][1];if(ae=ut[1][2],!(a.biff<=5)){var Wi="";if(14849==((r[hn]||[])[0]||[])[0]||(1025==((r[hn]||[])[0]||[])[0]?r[hn][ae]&&r[hn][ae].itab>0&&(Wi=r.SheetNames[r[hn][ae].itab-1]+"!"):Wi=r.SheetNames[ae-1]+"!"),r[hn]&&r[hn][ae])Wi+=r[hn][ae].Name;else if(r[0]&&r[0][ae])Wi+=r[0][ae].Name;else{var Cr=(cy(r,hn,a)||"").split(";;");Cr[ae-1]?Wi=Cr[ae-1]:Wi+="SH33TJSERRX"}p.push(Wi);break}hn<0&&(hn=-hn),r[hn]&&(Tn=r[hn][ae]),Tn||(Tn={Name:"SH33TJSERRY"}),p.push(Tn.Name);break;case"PtgParen":var aa="(",Sr=")";if(ue>=0){switch(Te="",n[0][ue][1][0]){case 2:aa=ra(" ",n[0][ue][1][1])+aa;break;case 3:aa=ra("\r",n[0][ue][1][1])+aa;break;case 4:Sr=ra(" ",n[0][ue][1][1])+Sr;break;case 5:Sr=ra("\r",n[0][ue][1][1])+Sr;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][ue][1][0])}ue=-1}p.push(aa+p.pop()+Sr);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":p.push("#REF!");break;case"PtgExp":var La={c:e.c,r:e.r};if(r.sharedf[xa(B={c:ut[1][1],r:ut[1][0]})]){var ma=r.sharedf[xa(B)];p.push(Vu(ma,0,La,r,a))}else{var qs=!1;for(D=0;D!=r.arrayf.length;++D)if(!(B.c<(P=r.arrayf[D])[0].s.c||B.c>P[0].e.c||B.r<P[0].s.r||B.r>P[0].e.r)){p.push(Vu(P[1],0,La,r,a)),qs=!0;break}qs||p.push(ut[1])}break;case"PtgArray":p.push("{"+oy(ut[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":ue=qe;break;case"PtgMissArg":p.push("");break;case"PtgList":p.push("Table"+ut[1].idx+"[#"+ut[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(ut))}if(3!=a.biff&&ue>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(n[0][qe][0])){var Ca=!0;switch((ut=n[0][ue])[1][0]){case 4:Ca=!1;case 0:Te=ra(" ",ut[1][1]);break;case 5:Ca=!1;case 1:Te=ra("\r",ut[1][1]);break;default:if(Te="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+ut[1][0])}p.push((Ca?Te:"")+p.pop()+(Ca?"":Te)),ue=-1}}if(p.length>1&&a.WTF)throw new Error("bad formula stack");return p[0]}function w1(n,i,e){var o,r=n.l+i,a=2==e.biff?1:2,d=n.read_shift(a);if(65535==d)return[[],O(n,i-2)];var p=Wp(n,d,e);return i!==d+a&&(o=Fm(n,i-d-a,p,e)),n.l=r,[p,o]}function Nm(n,i,e){var a,r=n.l+i,o=n.read_shift(2),d=Wp(n,o,e);return 65535==o?[[],O(n,i-2)]:(i!==o+2&&(a=Fm(n,r-o-2,d,e)),[d,a])}function Fg(n,i,e){var r=n.l+i,a=ru(n);2==e.biff&&++n.l;var o=function C1(n){var i;if(65535!==Xo(n,n.l+6))return[sc(n),"n"];switch(n[n.l]){case 0:return n.l+=8,["String","s"];case 1:return i=1===n[n.l+2],n.l+=8,[i,"b"];case 2:return i=n[n.l+2],n.l+=8,[i,"e"];case 3:return n.l+=8,["","s"]}return[]}(n),d=n.read_shift(1);2!=e.biff&&(n.read_shift(1),e.biff>=5&&n.read_shift(4));var p=function U0(n,i,e){var o,r=n.l+i,a=2==e.biff?1:2,d=n.read_shift(a);if(65535==d)return[[],O(n,i-2)];var p=Wp(n,d,e);return i!==d+a&&(o=Fm(n,i-d-a,p,e)),n.l=r,[p,o]}(n,r-n.l,e);return{cell:a,val:o[0],formula:p,shared:d>>3&1,tt:o[1]}}function j0(n,i,e){var r=n.read_shift(4),a=Wp(n,r,e),o=n.read_shift(4);return[a,o>0?Fm(n,o,a,e):null]}var n_=j0,Bg=j0,$0=j0,E1=j0,k1={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},uy={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},T1={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function W0(n){return"of:"==n.slice(0,3)&&(n=n.slice(3)),61==n.charCodeAt(0)&&61==(n=n.slice(1)).charCodeAt(0)&&(n=n.slice(1)),(n=(n=(n=n.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(i,e){return e.replace(/\./g,"")})).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function S1(n){return("of:="+n.replace(Hv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function Xp(n){var i=n.split(":");return[i[0].split(".")[0],i[0].split(".")[1]+(i.length>1?":"+(i[1].split(".")[1]||i[1].split(".")[0]):"")]}function D1(n){return n.replace(/\./,"!")}var Ng={},qp={},zg=typeof Map<"u";function X0(n,i,e){var r=0,a=n.length;if(e){if(zg?e.has(i):Object.prototype.hasOwnProperty.call(e,i))for(var o=zg?e.get(i):e[i];r<o.length;++r)if(n[o[r]].t===i)return n.Count++,o[r]}else for(;r<a;++r)if(n[r].t===i)return n.Count++,r;return n[a]={t:i},n.Count++,n.Unique++,e&&(zg?(e.has(i)||e.set(i,[]),e.get(i).push(a)):(Object.prototype.hasOwnProperty.call(e,i)||(e[i]=[]),e[i].push(a))),a}function pd(n,i){var e={min:n+1,max:n+1},r=-1;return i.MDW&&(Ac=i.MDW),null!=i.width?e.customWidth=1:null!=i.wpx?r=Fh(i.wpx):null!=i.wch&&(r=i.wch),r>-1?(e.width=rp(r),e.customWidth=1):null!=i.width&&(e.width=i.width),i.hidden&&(e.hidden=!0),null!=i.level&&(e.outlineLevel=e.level=i.level),e}function C(n,i){if(n){var e=[.7,.7,.75,.75,.3,.3];"xlml"==i&&(e=[1,1,1,1,.5,.5]),null==n.left&&(n.left=e[0]),null==n.right&&(n.right=e[1]),null==n.top&&(n.top=e[2]),null==n.bottom&&(n.bottom=e[3]),null==n.header&&(n.header=e[4]),null==n.footer&&(n.footer=e[5])}}function F(n,i,e){var r=e.revssf[null!=i.z?i.z:"General"],a=60,o=n.length;if(null==r&&e.ssf)for(;a<392;++a)if(null==e.ssf[a]){Qr(i.z,a),e.ssf[a]=i.z,e.revssf[i.z]=r=a;break}for(a=0;a!=o;++a)if(n[a].numFmtId===r)return a;return n[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function ee(n,i,e,r,a,o){try{r.cellNF&&(n.z=st[i])}catch(p){if(r.WTF)throw p}if("z"!==n.t||r.cellStyles){if("d"===n.t&&"string"==typeof n.v&&(n.v=Cs(n.v)),(!r||!1!==r.cellText)&&"z"!==n.t)try{if(null==st[i]&&Qr(Ku[i]||"General",i),"e"===n.t)n.w=n.w||ri[n.v];else if(0===i)if("n"===n.t)n.w=(0|n.v)===n.v?n.v.toString(10):E(n.v);else if("d"===n.t){var d=Es(n.v);n.w=(0|d)===d?d.toString(10):E(d)}else{if(void 0===n.v)return"";n.w=M(n.v,qp)}else n.w=va(i,"d"===n.t?Es(n.v):n.v,qp)}catch(p){if(r.WTF)throw p}if(r.cellStyles&&null!=e)try{n.s=o.Fills[e],n.s.fgColor&&n.s.fgColor.theme&&!n.s.fgColor.rgb&&(n.s.fgColor.rgb=dd(a.themeElements.clrScheme[n.s.fgColor.theme].rgb,n.s.fgColor.tint||0),r.WTF&&(n.s.fgColor.raw_rgb=a.themeElements.clrScheme[n.s.fgColor.theme].rgb)),n.s.bgColor&&n.s.bgColor.theme&&(n.s.bgColor.rgb=dd(a.themeElements.clrScheme[n.s.bgColor.theme].rgb,n.s.bgColor.tint||0),r.WTF&&(n.s.bgColor.raw_rgb=a.themeElements.clrScheme[n.s.bgColor.theme].rgb))}catch(p){if(r.WTF&&o.Fills)throw p}}}function Ce(n,i,e){if(n&&n["!ref"]){var r=ls(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+e+"): "+n["!ref"])}}var St=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,oi=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Di=/<(?:\w:)?hyperlink [^>]*>/gm,ji=/"(\w*:\w*)"/,Wn=/<(?:\w:)?col\b[^>]*[\/]?>/g,Xn=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,rr=/<(?:\w:)?pageMargins[^>]*\/>/g,Hr=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,_a=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Za=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ys(n,i,e,r){var a=oa(n);e.Sheets[r]||(e.Sheets[r]={}),a.codeName&&(e.Sheets[r].CodeName=qa(Rs(a.codeName)))}var md=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Uu=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"],Yg=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function r_(n,i,e,r){if(n.c&&e["!comments"].push([i,n.c]),void 0===n.v&&"string"!=typeof n.f||"z"===n.t&&!n.f)return"";var a="",o=n.t,d=n.v;if("z"!==n.t)switch(n.t){case"b":a=n.v?"1":"0";break;case"n":a=""+n.v;break;case"e":a=ri[n.v];break;case"d":r&&r.cellDates?a=Cs(n.v,-1).toISOString():((n=ts(n)).t="n",a=""+(n.v=Es(Cs(n.v)))),typeof n.z>"u"&&(n.z=st[14]);break;default:a=n.v}var p=Ss("v",$a(a)),D={r:i},P=F(r.cellXfs,n,r);switch(0!==P&&(D.s=P),n.t){case"n":case"z":break;case"d":D.t="d";break;case"b":D.t="b";break;case"e":D.t="e";break;default:if(null==n.v){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){p=Ss("v",""+X0(r.Strings,n.v,r.revStrings)),D.t="s";break}D.t="str"}if(n.t!=o&&(n.t=o,n.v=d),"string"==typeof n.f&&n.f){var B=n.F&&n.F.slice(0,i.length)==i?{t:"array",ref:n.F}:null;p=or("f",$a(n.f),B)+(null!=n.v?p:"")}return n.l&&e["!links"].push([i,n.l]),n.D&&(D.cm=1),or("c",p,D)}var dy=function(){var n=/<(?:\w+:)?c[ \/>]/,i=/<\/(?:\w+:)?row>/,e=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,o=Pl("v"),d=Pl("f");return function(D,P,B,te,ae,oe){for(var vi,Vt,hn,Tn,Sr,ge=0,ue="",Te=[],qe=[],ht=0,ut=0,mi=0,zi="",wi=0,Yi=0,Wi=0,Cr=0,aa=Array.isArray(oe.CellXf),La=[],ma=[],qs=Array.isArray(P),Ur=[],Ca={},qn=!1,gi=!!B.sheetStubs,mn=D.split(i),Ti=0,bi=mn.length;Ti!=bi;++Ti){var Yn=(ue=mn[Ti].trim()).length;if(0!==Yn){var Rr=0;e:for(ge=0;ge<Yn;++ge)switch(ue[ge]){case">":if("/"!=ue[ge-1]){++ge;break e}if(B&&B.cellStyles){if(wi=null!=(Vt=oa(ue.slice(Rr,ge),!0)).r?parseInt(Vt.r,10):wi+1,Yi=-1,B.sheetRows&&B.sheetRows<wi)continue;Ca={},qn=!1,Vt.ht&&(qn=!0,Ca.hpt=parseFloat(Vt.ht),Ca.hpx=Tf(Ca.hpt)),"1"==Vt.hidden&&(qn=!0,Ca.hidden=!0),null!=Vt.outlineLevel&&(qn=!0,Ca.level=+Vt.outlineLevel),qn&&(Ur[wi-1]=Ca)}break;case"<":Rr=ge}if(Rr>=ge)break;if(wi=null!=(Vt=oa(ue.slice(Rr,ge),!0)).r?parseInt(Vt.r,10):wi+1,Yi=-1,!(B.sheetRows&&B.sheetRows<wi)){te.s.r>wi-1&&(te.s.r=wi-1),te.e.r<wi-1&&(te.e.r=wi-1),B&&B.cellStyles&&(Ca={},qn=!1,Vt.ht&&(qn=!0,Ca.hpt=parseFloat(Vt.ht),Ca.hpx=Tf(Ca.hpt)),"1"==Vt.hidden&&(qn=!0,Ca.hidden=!0),null!=Vt.outlineLevel&&(qn=!0,Ca.level=+Vt.outlineLevel),qn&&(Ur[wi-1]=Ca)),Te=ue.slice(ge).split(n);for(var _r=0;_r!=Te.length&&"<"==Te[_r].trim().charAt(0);++_r);for(Te=Te.slice(_r),ge=0;ge!=Te.length;++ge)if(0!==(ue=Te[ge].trim()).length){if(qe=ue.match(e),ht=ge,ut=0,mi=0,ue="<c "+("<"==ue.slice(0,1)?">":"")+ue,null!=qe&&2===qe.length){for(ht=0,zi=qe[1],ut=0;ut!=zi.length&&!((mi=zi.charCodeAt(ut)-64)<1||mi>26);++ut)ht=26*ht+mi;Yi=--ht}else++Yi;for(ut=0;ut!=ue.length&&62!==ue.charCodeAt(ut);++ut);if(++ut,(Vt=oa(ue.slice(0,ut),!0)).r||(Vt.r=xa({r:wi-1,c:Yi})),vi={t:""},null!=(qe=(zi=ue.slice(ut)).match(o))&&""!==qe[1]&&(vi.v=qa(qe[1])),B.cellFormula){if(null!=(qe=zi.match(d))&&""!==qe[1]){if(vi.f=qa(Rs(qe[1])).replace(/\r\n/g,"\n"),B.xlfn||(vi.f=Gu(vi.f)),qe[0].indexOf('t="array"')>-1)vi.F=(zi.match(a)||[])[1],vi.F.indexOf(":")>-1&&La.push([ls(vi.F),vi.F]);else if(qe[0].indexOf('t="shared"')>-1){Tn=oa(qe[0]);var kr=qa(Rs(qe[1]));B.xlfn||(kr=Gu(kr)),ma[parseInt(Tn.si,10)]=[Tn,kr,Vt.r]}}else(qe=zi.match(/<f[^>]*\/>/))&&ma[(Tn=oa(qe[0])).si]&&(vi.f=U_(ma[Tn.si][1],ma[Tn.si][2],Vt.r));var er=Qa(Vt.r);for(ut=0;ut<La.length;++ut)er.r>=La[ut][0].s.r&&er.r<=La[ut][0].e.r&&er.c>=La[ut][0].s.c&&er.c<=La[ut][0].e.c&&(vi.F=La[ut][1])}if(null==Vt.t&&void 0===vi.v)if(vi.f||vi.F)vi.v=0,vi.t="n";else{if(!gi)continue;vi.t="z"}else vi.t=Vt.t||"n";switch(te.s.c>Yi&&(te.s.c=Yi),te.e.c<Yi&&(te.e.c=Yi),vi.t){case"n":if(""==vi.v||null==vi.v){if(!gi)continue;vi.t="z"}else vi.v=parseFloat(vi.v);break;case"s":if(typeof vi.v>"u"){if(!gi)continue;vi.t="z"}else hn=Ng[parseInt(vi.v,10)],vi.v=hn.t,vi.r=hn.r,B.cellHTML&&(vi.h=hn.h);break;case"str":vi.t="s",vi.v=null!=vi.v?Rs(vi.v):"",B.cellHTML&&(vi.h=Jc(vi.v));break;case"inlineStr":qe=zi.match(r),vi.t="s",null!=qe&&(hn=km(qe[1]))?(vi.v=hn.t,B.cellHTML&&(vi.h=hn.h)):vi.v="";break;case"b":vi.v=Qs(vi.v);break;case"d":B.cellDates?vi.v=Cs(vi.v,1):(vi.v=Es(Cs(vi.v,1)),vi.t="n");break;case"e":(!B||!1!==B.cellText)&&(vi.w=vi.v),vi.v=Oi[vi.v]}if(Wi=Cr=0,Sr=null,aa&&void 0!==Vt.s&&null!=(Sr=oe.CellXf[Vt.s])&&(null!=Sr.numFmtId&&(Wi=Sr.numFmtId),B.cellStyles&&null!=Sr.fillId&&(Cr=Sr.fillId)),ee(vi,Wi,Cr,B,ae,oe),B.cellDates&&aa&&"n"==vi.t&&la(st[Wi])&&(vi.t="d",vi.v=Bc(vi.v)),Vt.cm&&B.xlmeta){var Bs=(B.xlmeta.Cell||[])[+Vt.cm-1];Bs&&"XLDAPR"==Bs.type&&(vi.D=!0)}if(qs){var ui=Qa(Vt.r);P[ui.r]||(P[ui.r]=[]),P[ui.r][ui.c]=vi}else P[Vt.r]=vi}}}}Ur.length>0&&(P["!rows"]=Ur)}}();function M1(n,i,e,r){var d,a=[Ys,or("worksheet",null,{xmlns:pn[0],"xmlns:r":Ei.r})],p="",D=e.Sheets[e.SheetNames[n]];null==D&&(D={});var P=D["!ref"]||"A1",B=ls(P);if(B.e.c>16383||B.e.r>1048575){if(i.WTF)throw new Error("Range "+P+" exceeds format limit A1:XFD1048576");B.e.c=Math.min(B.e.c,16383),B.e.r=Math.min(B.e.c,1048575),P=ba(B)}r||(r={}),D["!comments"]=[];var te=[];(function jd(n,i,e,r,a){var o=!1,d={},p=null;if("xlsx"!==r.bookType&&i.vbaraw){var D=i.SheetNames[e];try{i.Workbook&&(D=i.Workbook.Sheets[e].CodeName||D)}catch{}o=!0,d.codeName=_o($a(D))}if(n&&n["!outline"]){var P={summaryBelow:1,summaryRight:1};n["!outline"].above&&(P.summaryBelow=0),n["!outline"].left&&(P.summaryRight=0),p=(p||"")+or("outlinePr",null,P)}!o&&!p||(a[a.length]=or("sheetPr",p,d))})(D,e,n,i,a),a[a.length]=or("dimension",null,{ref:P}),a[a.length]=function Nx(n,i,e,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),or("sheetViews",or("sheetView",null,a),{})}(0,0,0,e),i.sheetFormat&&(a[a.length]=or("sheetFormatPr",null,{defaultRowHeight:i.sheetFormat.defaultRowHeight||"16",baseColWidth:i.sheetFormat.baseColWidth||"10",outlineLevelRow:i.sheetFormat.outlineLevelRow||"7"})),null!=D["!cols"]&&D["!cols"].length>0&&(a[a.length]=function A1(n,i){for(var r,e=["<cols>"],a=0;a!=i.length;++a)(r=i[a])&&(e[e.length]=or("col",null,pd(a,r)));return e[e.length]="</cols>",e.join("")}(0,D["!cols"])),a[d=a.length]="<sheetData/>",D["!links"]=[],null!=D["!ref"]&&(p=function zx(n,i,e,r){var D,Te,a=[],o=[],d=ls(n["!ref"]),p="",P="",B=[],te=0,ae=0,oe=n["!rows"],ge=Array.isArray(n),ue={r:P},qe=-1;for(ae=d.s.c;ae<=d.e.c;++ae)B[ae]=Va(ae);for(te=d.s.r;te<=d.e.r;++te){for(o=[],P=gr(te),ae=d.s.c;ae<=d.e.c;++ae){D=B[ae]+P;var ht=ge?(n[te]||[])[ae]:n[D];void 0!==ht&&null!=(p=r_(ht,D,n,i))&&o.push(p)}(o.length>0||oe&&oe[te])&&(ue={r:P},oe&&oe[te]&&((Te=oe[te]).hidden&&(ue.hidden=1),qe=-1,Te.hpx?qe=ap(Te.hpx):Te.hpt&&(qe=Te.hpt),qe>-1&&(ue.ht=qe,ue.customHeight=1),Te.level&&(ue.outlineLevel=Te.level)),a[a.length]=or("row",o.join(""),ue))}if(oe)for(;te<oe.length;++te)oe&&oe[te]&&(ue={r:te+1},(Te=oe[te]).hidden&&(ue.hidden=1),qe=-1,Te.hpx?qe=ap(Te.hpx):Te.hpt&&(qe=Te.hpt),qe>-1&&(ue.ht=qe,ue.customHeight=1),Te.level&&(ue.outlineLevel=Te.level),a[a.length]=or("row","",ue));return a.join("")}(D,i),p.length>0&&(a[a.length]=p)),a.length>d+1&&(a[a.length]="</sheetData>",a[d]=a[d].replace("/>",">")),D["!protect"]&&(a[a.length]=function dc(n){var i={sheet:1};return md.forEach(function(e){null!=n[e]&&n[e]&&(i[e]="1")}),Uu.forEach(function(e){null!=n[e]&&!n[e]&&(i[e]="0")}),n.password&&(i.password=Bp(n.password).toString(16).toUpperCase()),or("sheetProtection",null,i)}(D["!protect"])),null!=D["!autofilter"]&&(a[a.length]=function Rf(n,i,e,r){var a="string"==typeof n.ref?n.ref:ba(n.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var o=e.Workbook.Names,d=Go(a);d.s.r==d.e.r&&(d.e.r=Go(i["!ref"]).e.r,a=ba(d));for(var p=0;p<o.length;++p){var D=o[p];if("_xlnm._FilterDatabase"==D.Name&&D.Sheet==r){D.Ref="'"+e.SheetNames[r]+"'!"+a;break}}return p==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+e.SheetNames[r]+"'!"+a}),or("autoFilter",null,{ref:a})}(D["!autofilter"],D,e,n)),null!=D["!merges"]&&D["!merges"].length>0&&(a[a.length]=function Ka(n){if(0===n.length)return"";for(var i='<mergeCells count="'+n.length+'">',e=0;e!=n.length;++e)i+='<mergeCell ref="'+ba(n[e])+'"/>';return i+"</mergeCells>"}(D["!merges"]));var oe,ae=-1,ge=-1;return D["!links"].length>0&&(a[a.length]="<hyperlinks>",D["!links"].forEach(function(ue){ue[1].Target&&(oe={ref:ue[0]},"#"!=ue[1].Target.charAt(0)&&(ge=bn(r,-1,$a(ue[1].Target).replace(/#.*$/,""),ki.HLINK),oe["r:id"]="rId"+ge),(ae=ue[1].Target.indexOf("#"))>-1&&(oe.location=$a(ue[1].Target.slice(ae+1))),ue[1].Tooltip&&(oe.tooltip=$a(ue[1].Tooltip)),a[a.length]=or("hyperlink",null,oe))}),a[a.length]="</hyperlinks>"),delete D["!links"],null!=D["!margins"]&&(a[a.length]=function q0(n){return C(n),or("pageMargins",null,n)}(D["!margins"])),(!i||i.ignoreEC||null==i.ignoreEC)&&(a[a.length]=Ss("ignoredErrors",or("ignoredError",null,{numberStoredAsText:1,sqref:P}))),te.length>0&&(ge=bn(r,-1,"../drawings/drawing"+(n+1)+".xml",ki.DRAW),a[a.length]=or("drawing",null,{"r:id":"rId"+ge}),D["!drawing"]=te),D["!comments"].length>0&&(ge=bn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",ki.VML),a[a.length]=or("legacyDrawing",null,{"r:id":"rId"+ge}),D["!legacy"]=ge),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Gx(n,i,e,r){var a=function Yx(n,i,e){var r=W(145),a=(e["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var o=320;a.hpx?o=20*ap(a.hpx):a.hpt&&(o=20*a.hpt),r.write_shift(2,o),r.write_shift(1,0);var d=0;a.level&&(d|=a.level),a.hidden&&(d|=16),(a.hpx||a.hpt)&&(d|=32),r.write_shift(1,d),r.write_shift(1,0);var p=0,D=r.l;r.l+=4;for(var P={r:n,c:0},B=0;B<16;++B)if(!(i.s.c>B+1<<10||i.e.c<B<<10)){for(var te=-1,ae=-1,oe=B<<10;oe<B+1<<10;++oe)P.c=oe,(Array.isArray(e)?(e[P.r]||[])[P.c]:e[xa(P)])&&(te<0&&(te=oe),ae=oe);te<0||(++p,r.write_shift(4,te),r.write_shift(4,ae))}var ue=r.l;return r.l=D,r.write_shift(4,p),r.l=ue,r.length>r.l?r.slice(0,r.l):r}(r,e,i);(a.length>17||(i["!rows"]||[])[r])&&Ye(n,0,a)}var Hx=gu,ww=eh;function pe(n){return[rc(n),sc(n),"n"]}var Kn=gu,sn=eh,Er=["left","right","top","bottom","header","footer"];function ds(n,i,e,r,a,o,d){if(void 0===i.v)return!1;var p="";switch(i.t){case"b":p=i.v?"1":"0";break;case"d":(i=ts(i)).z=i.z||st[14],i.v=Es(Cs(i.v)),i.t="n";break;case"n":case"e":p=""+i.v;break;default:p=i.v}var D={r:e,c:r};switch(D.s=F(a.cellXfs,i,a),i.l&&o["!links"].push([xa(D),i.l]),i.c&&o["!comments"].push([xa(D),i.c]),i.t){case"s":case"str":return a.bookSST?(p=X0(a.Strings,i.v,a.revStrings),D.t="s",D.v=p,d?Ye(n,18,function X(n,i,e){return null==e&&(e=W(8)),Ho(i,e),e.write_shift(4,i.v),e}(0,D)):Ye(n,7,function R(n,i,e){return null==e&&(e=W(12)),Th(i,e),e.write_shift(4,i.v),e}(0,D))):(D.t="str",d?Ye(n,17,function di(n,i,e){return null==e&&(e=W(8+4*n.v.length)),Ho(i,e),hr(n.v,e),e.length>e.l?e.slice(0,e.l):e}(i,D)):Ye(n,6,function Lt(n,i,e){return null==e&&(e=W(12+4*n.v.length)),Th(i,e),hr(n.v,e),e.length>e.l?e.slice(0,e.l):e}(i,D))),!0;case"n":return i.v==(0|i.v)&&i.v>-1e3&&i.v<1e3?d?Ye(n,13,function dt(n,i,e){return null==e&&(e=W(8)),Ho(i,e),mr(n.v,e),e}(i,D)):Ye(n,2,function Oe(n,i,e){return null==e&&(e=W(12)),Th(i,e),mr(n.v,e),e}(i,D)):d?Ye(n,16,function _e(n,i,e){return null==e&&(e=W(12)),Ho(i,e),oc(n.v,e),e}(i,D)):Ye(n,5,function ce(n,i,e){return null==e&&(e=W(16)),Th(i,e),oc(n.v,e),e}(i,D)),!0;case"b":return D.t="b",d?Ye(n,15,function c(n,i,e){return null==e&&(e=W(5)),Ho(i,e),e.write_shift(1,n.v?1:0),e}(i,D)):Ye(n,4,function P1(n,i,e){return null==e&&(e=W(9)),Th(i,e),e.write_shift(1,n.v?1:0),e}(i,D)),!0;case"e":return D.t="e",d?Ye(n,14,function y(n,i,e){return null==e&&(e=W(8)),Ho(i,e),e.write_shift(1,n.v),e.write_shift(2,0),e.write_shift(1,0),e}(i,D)):Ye(n,3,function h(n,i,e){return null==e&&(e=W(9)),Th(i,e),e.write_shift(1,n.v),e}(i,D)),!0}return d?Ye(n,12,function $x(n,i,e){return null==e&&(e=W(4)),Ho(i,e)}(0,D)):Ye(n,1,function O1(n,i,e){return null==e&&(e=W(8)),Th(i,e)}(0,D)),!0}function bl(n,i,e,r){var a=Ie(),o=e.SheetNames[n],d=e.Sheets[o]||{},p=o;try{e&&e.Workbook&&(p=e.Workbook.Sheets[n].CodeName||p)}catch{}var D=ls(d["!ref"]||"A1");if(D.e.c>16383||D.e.r>1048575){if(i.WTF)throw new Error("Range "+(d["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");D.e.c=Math.min(D.e.c,16383),D.e.r=Math.min(D.e.c,1048575)}return d["!links"]=[],d["!comments"]=[],Ye(a,129),(e.vbaraw||d["!outline"])&&Ye(a,147,function Ux(n,i,e){null==e&&(e=W(84+4*n.length));var r=192;i&&(i.above&&(r&=-65),i.left&&(r&=-129)),e.write_shift(1,r);for(var a=1;a<3;++a)e.write_shift(1,0);return Vc({auto:1},e),e.write_shift(-4,-1),e.write_shift(-4,-1),Qd(n,e),e.slice(0,e.l)}(p,d["!outline"])),Ye(a,148,ww(D)),function Oo(n,i,e){Ye(n,133),Ye(n,137,function as(n,i,e){null==e&&(e=W(30));var r=924;return(((i||{}).Views||[])[0]||{}).RTL&&(r|=32),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,100),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(4,0),e}(0,e)),Ye(n,138),Ye(n,134)}(a,0,e.Workbook),function Fo(n,i){!i||!i["!cols"]||(Ye(n,390),i["!cols"].forEach(function(e,r){e&&Ye(n,60,function Vr(n,i,e){null==e&&(e=W(18));var r=pd(n,i);e.write_shift(-4,n),e.write_shift(-4,n),e.write_shift(4,256*(r.width||10)),e.write_shift(4,0);var a=0;return i.hidden&&(a|=1),"number"==typeof r.width&&(a|=2),i.level&&(a|=i.level<<8),e.write_shift(2,a),e}(r,e))}),Ye(n,391))}(a,d),function Mo(n,i,e,r){var a=ls(i["!ref"]||"A1"),d="",p=[];Ye(n,145);var D=Array.isArray(i),P=a.e.r;i["!rows"]&&(P=Math.max(a.e.r,i["!rows"].length-1));for(var B=a.s.r;B<=P;++B){d=gr(B),Gx(n,i,a,B);var te=!1;if(B<=a.e.r)for(var ae=a.s.c;ae<=a.e.c;++ae){B===a.s.r&&(p[ae]=Va(ae));var oe=D?(i[B]||[])[ae]:i[p[ae]+d];te=!!oe&&ds(n,oe,B,ae,r,i,te)}}Ye(n,146)}(a,d,0,i),function fc(n,i){i["!protect"]&&Ye(n,535,function ss(n,i){return null==i&&(i=W(66)),i.write_shift(2,n.password?Bp(n.password):0),i.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){i.write_shift(4,e[1]?null==n[e[0]]||n[e[0]]?0:1:null!=n[e[0]]&&n[e[0]]?0:1)}),i}(i["!protect"]))}(a,d),function hc(n,i,e,r){if(i["!autofilter"]){var a=i["!autofilter"],o="string"==typeof a.ref?a.ref:ba(a.ref);e.Workbook||(e.Workbook={Sheets:[]}),e.Workbook.Names||(e.Workbook.Names=[]);var d=e.Workbook.Names,p=Go(o);p.s.r==p.e.r&&(p.e.r=Go(i["!ref"]).e.r,o=ba(p));for(var D=0;D<d.length;++D){var P=d[D];if("_xlnm._FilterDatabase"==P.Name&&P.Sheet==r){P.Ref="'"+e.SheetNames[r]+"'!"+o;break}}D==d.length&&d.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+e.SheetNames[r]+"'!"+o}),Ye(n,161,eh(ls(o))),Ye(n,162)}}(a,d,e,n),function Po(n,i){!i||!i["!merges"]||(Ye(n,177,function Ln(n,i){return null==i&&(i=W(4)),i.write_shift(4,n),i}(i["!merges"].length)),i["!merges"].forEach(function(e){Ye(n,176,sn(e))}),Ye(n,178))}(a,d),function ul(n,i,e){i["!links"].forEach(function(r){if(r[1].Target){var a=bn(e,-1,r[1].Target.replace(/#.*$/,""),ki.HLINK);Ye(n,494,function jn(n,i){var e=W(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));eh({s:Qa(n[0]),e:Qa(n[0])},e),Pd("rId"+i,e);var r=n[1].Target.indexOf("#");return hr((-1==r?"":n[1].Target.slice(r+1))||"",e),hr(n[1].Tooltip||"",e),hr("",e),e.slice(0,e.l)}(r,a))}}),delete i["!links"]}(a,d,r),d["!margins"]&&Ye(a,476,function ir(n,i){return null==i&&(i=W(48)),C(n),Er.forEach(function(e){oc(n[e],i)}),i}(d["!margins"])),(!i||i.ignoreEC||null==i.ignoreEC)&&function Ro(n,i){!i||!i["!ref"]||(Ye(n,648),Ye(n,649,function to(n){var i=W(24);return i.write_shift(4,4),i.write_shift(4,1),eh(n,i),i}(ls(i["!ref"]))),Ye(n,650))}(a,d),function Il(n,i,e,r){if(i["!comments"].length>0){var a=bn(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ki.VML);Ye(n,551,Pd("rId"+a)),i["!legacy"]=a}}(a,d,n,r),Ye(a,130),a.end()}var $u=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],lu=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Of=[],Z0=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function K0(n,i){for(var e=0;e!=n.length;++e)for(var r=n[e],a=0;a!=i.length;++a){var o=i[a];if(null==r[o[0]])r[o[0]]=o[1];else switch(o[2]){case"bool":"string"==typeof r[o[0]]&&(r[o[0]]=Qs(r[o[0]]));break;case"int":"string"==typeof r[o[0]]&&(r[o[0]]=parseInt(r[o[0]],10))}}}function J0(n,i){for(var e=0;e!=i.length;++e){var r=i[e];if(null==n[r[0]])n[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof n[r[0]]&&(n[r[0]]=Qs(n[r[0]]));break;case"int":"string"==typeof n[r[0]]&&(n[r[0]]=parseInt(n[r[0]],10))}}}function F1(n){J0(n.WBProps,$u),J0(n.CalcPr,Z0),K0(n.WBView,lu),K0(n.Sheets,Of),qp.date1904=Qs(n.WBProps.date1904)}var qx="][*?/\\".split("");function B1(n,i){if(n.length>31){if(i)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var e=!0;return qx.forEach(function(r){if(-1!=n.indexOf(r)){if(!i)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");e=!1}}),e}var pp=/<\w+:workbook/;function zm(n){var i=[Ys];i[i.length]=or("workbook",null,{xmlns:pn[0],"xmlns:r":Ei.r});var e=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&($u.forEach(function(p){null!=n.Workbook.WBProps[p[0]]&&n.Workbook.WBProps[p[0]]!=p[1]&&(r[p[0]]=n.Workbook.WBProps[p[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),i[i.length]=or("workbookPr",null,r);var a=n.Workbook&&n.Workbook.Sheets||[],o=0;if(a&&a[0]&&a[0].Hidden){for(i[i.length]="<bookViews>",o=0;o!=n.SheetNames.length&&a[o]&&a[o].Hidden;++o);o==n.SheetNames.length&&(o=0),i[i.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',i[i.length]="</bookViews>"}for(i[i.length]="<sheets>",o=0;o!=n.SheetNames.length;++o){var d={name:$a(n.SheetNames[o].slice(0,31))};if(d.sheetId=""+(o+1),d["r:id"]="rId"+(o+1),a[o])switch(a[o].Hidden){case 1:d.state="hidden";break;case 2:d.state="veryHidden"}i[i.length]=or("sheet",null,d)}return i[i.length]="</sheets>",e&&(i[i.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(p){var D={name:p.Name};p.Comment&&(D.comment=p.Comment),null!=p.Sheet&&(D.localSheetId=""+p.Sheet),p.Hidden&&(D.hidden="1"),p.Ref&&(i[i.length]=or("definedName",$a(p.Ref),D))}),i[i.length]="</definedNames>"),i.length>2&&(i[i.length]="</workbook>",i[1]=i[1].replace("/>",">")),i.join("")}function Y1(n,i){return i||(i=W(127)),i.write_shift(4,n.Hidden),i.write_shift(4,n.iTabID),Pd(n.strRelID,i),hr(n.name.slice(0,31),i),i.length>i.l?i.slice(0,i.l):i}function Cw(n,i){var e={};return n.read_shift(4),e.ArchID=n.read_shift(4),n.l+=i-8,e}function oM(n,i){var e=Ie();return Ye(e,131),Ye(e,128,function H1(n,i){i||(i=W(127));for(var e=0;4!=e;++e)i.write_shift(4,0);return hr("SheetJS",i),hr(ar.version,i),hr(ar.version,i),hr("7262",i),i.length>i.l?i.slice(0,i.l):i}()),Ye(e,153,function G1(n,i){i||(i=W(72));var e=0;return n&&n.filterPrivacy&&(e|=8),i.write_shift(4,e),i.write_shift(4,0),Qd(n&&n.CodeName||"ThisWorkbook",i),i.slice(0,i.l)}(n.Workbook&&n.Workbook.WBProps||null)),function Gg(n,i){if(i.Workbook&&i.Workbook.Sheets){for(var e=i.Workbook.Sheets,r=0,a=-1,o=-1;r<e.length;++r)!e[r]||!e[r].Hidden&&-1==a?a=r:1==e[r].Hidden&&-1==o&&(o=r);o>a||(Ye(n,135),Ye(n,158,function Kx(n,i){return i||(i=W(29)),i.write_shift(-4,0),i.write_shift(-4,460),i.write_shift(4,28800),i.write_shift(4,17600),i.write_shift(4,500),i.write_shift(4,n),i.write_shift(4,n),i.write_shift(1,120),i.length>i.l?i.slice(0,i.l):i}(a)),Ye(n,136))}}(e,n),function s_(n,i){Ye(n,143);for(var e=0;e!=i.SheetNames.length;++e)Ye(n,156,Y1({Hidden:i.Workbook&&i.Workbook.Sheets&&i.Workbook.Sheets[e]&&i.Workbook.Sheets[e].Hidden||0,iTabID:e+1,strRelID:"rId"+(e+1),name:i.SheetNames[e]}));Ye(n,144)}(e,n),Ye(e,132),e.end()}function cM(n,i,e,r,a,o,d,p){return".bin"===i.slice(-4)?function us(n,i,e,r,a,o,d){if(!n)return n;var p=i||{};r||(r={"!id":{}}),null!=Dr&&null==p.dense&&(p.dense=Dr);var P,ge,ue,Te,qe,ht,ut,mi,zi,vi,D=p.dense?[]:{},B={s:{r:2e6,c:2e6},e:{r:0,c:0}},te=[],ae=!1,oe=!1,Vt=[];p.biff=12,p["!row"]=0;var wi=0,Yi=!1,hn=[],Tn={},Wi=p.supbooks||a.supbooks||[[]];if(Wi.sharedf=Tn,Wi.arrayf=hn,Wi.SheetNames=a.SheetNames||a.Sheets.map(function(Ca){return Ca.name}),!p.supbooks&&(p.supbooks=Wi,a.Names))for(var Cr=0;Cr<a.Names.length;++Cr)Wi[0][Cr+1]=a.Names[Cr];var ma,qs,aa=[],Sr=[],La=!1;if(j1[16]={n:"BrtShortReal",f:pe},he(n,function(qn,gi,mn){if(!oe)switch(mn){case 148:P=qn;break;case 0:ge=qn,p.sheetRows&&p.sheetRows<=ge.r&&(oe=!0),zi=gr(qe=ge.r),p["!row"]=ge.r,(qn.hidden||qn.hpt||null!=qn.level)&&(qn.hpt&&(qn.hpx=Tf(qn.hpt)),Sr[qn.r]=qn);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(ue={t:qn[2]},qn[2]){case"n":ue.v=qn[1];break;case"s":ue.v=(mi=Ng[qn[1]]).t,ue.r=mi.r;break;case"b":ue.v=!!qn[1];break;case"e":ue.v=qn[1],!1!==p.cellText&&(ue.w=ri[ue.v]);break;case"str":ue.t="s",ue.v=qn[1];break;case"is":ue.t="s",ue.v=qn[1].t}if((Te=d.CellXf[qn[0].iStyleRef])&&ee(ue,Te.numFmtId,null,p,o,d),ht=-1==qn[0].c?ht+1:qn[0].c,p.dense?(D[qe]||(D[qe]=[]),D[qe][ht]=ue):D[Va(ht)+zi]=ue,p.cellFormula){for(Yi=!1,wi=0;wi<hn.length;++wi){var Ti=hn[wi];ge.r>=Ti[0].s.r&&ge.r<=Ti[0].e.r&&ht>=Ti[0].s.c&&ht<=Ti[0].e.c&&(ue.F=ba(Ti[0]),Yi=!0)}!Yi&&qn.length>3&&(ue.f=qn[3])}if(B.s.r>ge.r&&(B.s.r=ge.r),B.s.c>ht&&(B.s.c=ht),B.e.r<ge.r&&(B.e.r=ge.r),B.e.c<ht&&(B.e.c=ht),p.cellDates&&Te&&"n"==ue.t&&la(st[Te.numFmtId])){var bi=jt(ue.v);bi&&(ue.t="d",ue.v=new Date(bi.y,bi.m-1,bi.d,bi.H,bi.M,bi.S,bi.u))}ma&&("XLDAPR"==ma.type&&(ue.D=!0),ma=void 0),qs&&(qs=void 0);break;case 1:case 12:if(!p.sheetStubs||ae)break;ue={t:"z",v:void 0},ht=-1==qn[0].c?ht+1:qn[0].c,p.dense?(D[qe]||(D[qe]=[]),D[qe][ht]=ue):D[Va(ht)+zi]=ue,B.s.r>ge.r&&(B.s.r=ge.r),B.s.c>ht&&(B.s.c=ht),B.e.r<ge.r&&(B.e.r=ge.r),B.e.c<ht&&(B.e.c=ht),ma&&("XLDAPR"==ma.type&&(ue.D=!0),ma=void 0),qs&&(qs=void 0);break;case 176:Vt.push(qn);break;case 49:ma=((p.xlmeta||{}).Cell||[])[qn-1];break;case 494:var Yn=r["!id"][qn.relId];for(Yn?(qn.Target=Yn.Target,qn.loc&&(qn.Target+="#"+qn.loc),qn.Rel=Yn):""==qn.relId&&(qn.Target="#"+qn.loc),qe=qn.rfx.s.r;qe<=qn.rfx.e.r;++qe)for(ht=qn.rfx.s.c;ht<=qn.rfx.e.c;++ht)p.dense?(D[qe]||(D[qe]=[]),D[qe][ht]||(D[qe][ht]={t:"z",v:void 0}),D[qe][ht].l=qn):(ut=xa({c:ht,r:qe}),D[ut]||(D[ut]={t:"z",v:void 0}),D[ut].l=qn);break;case 426:if(!p.cellFormula)break;hn.push(qn),(vi=p.dense?D[qe][ht]:D[Va(ht)+zi]).f=Vu(qn[1],0,{r:ge.r,c:ht},Wi,p),vi.F=ba(qn[0]);break;case 427:if(!p.cellFormula)break;Tn[xa(qn[0].s)]=qn[1],(vi=p.dense?D[qe][ht]:D[Va(ht)+zi]).f=Vu(qn[1],0,{r:ge.r,c:ht},Wi,p);break;case 60:if(!p.cellStyles)break;for(;qn.e>=qn.s;)aa[qn.e--]={width:qn.w/256,hidden:!!(1&qn.flags),level:qn.level},La||(La=!0,kf(qn.w/256)),hd(aa[qn.e+1]);break;case 161:D["!autofilter"]={ref:ba(qn)};break;case 476:D["!margins"]=qn;break;case 147:a.Sheets[e]||(a.Sheets[e]={}),qn.name&&(a.Sheets[e].CodeName=qn.name),(qn.above||qn.left)&&(D["!outline"]={above:qn.above,left:qn.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),qn.RTL&&(a.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:ae=!0;break;case 36:ae=!1;break;case 37:te.push(mn),ae=!0;break;case 38:te.pop(),ae=!1;break;default:if(!gi.T&&(!ae||p.WTF))throw new Error("Unexpected record 0x"+mn.toString(16))}},p),delete p.supbooks,delete p["!row"],!D["!ref"]&&(B.s.r<2e6||P&&(P.e.r>0||P.e.c>0||P.s.r>0||P.s.c>0))&&(D["!ref"]=ba(P||B)),p.sheetRows&&D["!ref"]){var Ur=ls(D["!ref"]);p.sheetRows<=+Ur.e.r&&(Ur.e.r=p.sheetRows-1,Ur.e.r>B.e.r&&(Ur.e.r=B.e.r),Ur.e.r<Ur.s.r&&(Ur.s.r=Ur.e.r),Ur.e.c>B.e.c&&(Ur.e.c=B.e.c),Ur.e.c<Ur.s.c&&(Ur.s.c=Ur.e.c),D["!fullref"]=D["!ref"],D["!ref"]=ba(Ur))}return Vt.length>0&&(D["!merges"]=Vt),aa.length>0&&(D["!cols"]=aa),Sr.length>0&&(D["!rows"]=Sr),D}(n,r,e,a,o,d,p):function Fs(n,i,e,r,a,o,d){if(!n)return n;r||(r={"!id":{}}),null!=Dr&&null==i.dense&&(i.dense=Dr);var p=i.dense?[]:{},D={s:{r:2e6,c:2e6},e:{r:0,c:0}},P="",B="",te=n.match(oi);te?(P=n.slice(0,te.index),B=n.slice(te.index+te[0].length)):P=B=n;var ae=P.match(Hr);ae?ys(ae[0],0,a,e):(ae=P.match(_a))&&function eo(n,i,e,r,a){ys(n.slice(0,n.indexOf(">")),0,r,a)}(ae[0],0,0,a,e);var oe=(P.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(oe>0){var ge=P.slice(oe,oe+50).match(ji);ge&&function Qe(n,i){var e=ls(i);e.s.r<=e.e.r&&e.s.c<=e.e.c&&e.s.r>=0&&e.s.c>=0&&(n["!ref"]=ba(e))}(p,ge[1])}var ue=P.match(Za);ue&&ue[1]&&function Bx(n,i){i.Views||(i.Views=[{}]),(n.match(Yg)||[]).forEach(function(e,r){var a=oa(e);i.Views[r]||(i.Views[r]={}),+a.zoomScale&&(i.Views[r].zoom=+a.zoomScale),Qs(a.rightToLeft)&&(i.Views[r].RTL=!0)})}(ue[1],a);var Te=[];if(i.cellStyles){var qe=P.match(Wn);qe&&function fp(n,i){for(var e=!1,r=0;r!=i.length;++r){var a=oa(i[r],!0);a.hidden&&(a.hidden=Qs(a.hidden));var o=parseInt(a.min,10)-1,d=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!e&&a.width&&(e=!0,kf(a.width)),hd(a);o<=d;)n[o++]=ts(a)}}(Te,qe)}te&&dy(te[1],p,i,D,o,d);var ht=B.match(Xn);ht&&(p["!autofilter"]=function I1(n){return{ref:(n.match(/ref="([^"]*)"/)||[])[1]}}(ht[0]));var ut=[],mi=B.match(St);if(mi)for(oe=0;oe!=mi.length;++oe)ut[oe]=ls(mi[oe].slice(mi[oe].indexOf('"')+1));var zi=B.match(Di);zi&&function ju(n,i,e){for(var r=Array.isArray(n),a=0;a!=i.length;++a){var o=oa(Rs(i[a]),!0);if(!o.ref)return;var d=((e||{})["!id"]||[])[o.id];d?(o.Target=d.Target,o.location&&(o.Target+="#"+qa(o.location))):(o.Target="#"+qa(o.location),d={Target:o.Target,TargetMode:"Internal"}),o.Rel=d,o.tooltip&&(o.Tooltip=o.tooltip,delete o.tooltip);for(var p=ls(o.ref),D=p.s.r;D<=p.e.r;++D)for(var P=p.s.c;P<=p.e.c;++P){var B=xa({c:P,r:D});r?(n[D]||(n[D]=[]),n[D][P]||(n[D][P]={t:"z",v:void 0}),n[D][P].l=o):(n[B]||(n[B]={t:"z",v:void 0}),n[B].l=o)}}}(p,zi,r);var vi=B.match(rr);if(vi&&(p["!margins"]=function Yh(n){var i={};return["left","right","top","bottom","header","footer"].forEach(function(e){n[e]&&(i[e]=parseFloat(n[e]))}),i}(oa(vi[0]))),!p["!ref"]&&D.e.c>=D.s.c&&D.e.r>=D.s.r&&(p["!ref"]=ba(D)),i.sheetRows>0&&p["!ref"]){var Vt=ls(p["!ref"]);i.sheetRows<=+Vt.e.r&&(Vt.e.r=i.sheetRows-1,Vt.e.r>D.e.r&&(Vt.e.r=D.e.r),Vt.e.r<Vt.s.r&&(Vt.s.r=Vt.e.r),Vt.e.c>D.e.c&&(Vt.e.c=D.e.c),Vt.e.c<Vt.s.c&&(Vt.s.c=Vt.e.c),p["!fullref"]=p["!ref"],p["!ref"]=ba(Vt))}return Te.length>0&&(p["!cols"]=Te),ut.length>0&&(p["!merges"]=ut),p}(n,r,e,a,o,d,p)}function bM(n,i,e,r,a){return(".bin"===i.slice(-4)?bl:M1)(n,e,r,a)}function EM(n,i,e){return(".bin"===i.slice(-4)?a1:M0)(n,e)}var V1,mE=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,gE=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Zp(n,i){var e=n.split(/\s+/),r=[];if(i||(r[0]=e[0]),1===e.length)return r;var o,d,D,a=n.match(mE);if(a)for(D=0;D!=a.length;++D)-1===(d=(o=a[D].match(gE))[1].indexOf(":"))?r[o[1]]=o[2].slice(1,o[2].length-1):r["xmlns:"===o[1].slice(0,6)?"xmlns"+o[1].slice(6):o[1].slice(d+1)]=o[2].slice(1,o[2].length-1);return r}function TM(n){var e={};if(1===n.split(/\s+/).length)return e;var a,o,p,r=n.match(mE);if(r)for(p=0;p!=r.length;++p)-1===(o=(a=r[p].match(gE))[1].indexOf(":"))?e[a[1]]=a[2].slice(1,a[2].length-1):e["xmlns:"===a[1].slice(0,6)?"xmlns"+a[1].slice(6):a[1].slice(o+1)]=a[2].slice(1,a[2].length-1);return e}function DM(n,i,e,r){var a=r;switch((e[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Qs(r);break;case"i2":case"int":a=parseInt(r,10);break;case"r4":case"float":a=parseFloat(r);break;case"date":case"dateTime.tz":a=Cs(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+e[0])}n[qa(i)]=a}function IM(n,i,e){if(e.cellStyles&&i.Interior){var r=i.Interior;r.Pattern&&(r.patternType=Eg[r.Pattern]||r.Pattern)}n[i.ID]=i}function MM(n,i,e,r,a,o,d,p,D,P){var B="General",te=r.StyleID,ae={};P=P||{};var oe=[],ge=0;for(void 0===te&&p&&(te=p.StyleID),void 0===te&&d&&(te=d.StyleID);void 0!==o[te]&&(o[te].nf&&(B=o[te].nf),o[te].Interior&&oe.push(o[te].Interior),o[te].Parent);)te=o[te].Parent;switch(e.Type){case"Boolean":r.t="b",r.v=Qs(n);break;case"String":r.t="s",r.r=nd(qa(n)),r.v=n.indexOf("<")>-1?qa(i||n).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=n.slice(-1)&&(n+="Z"),r.v=(Cs(n)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!=r.v?r.v=qa(n):r.v<60&&(r.v=r.v-1),(!B||"General"==B)&&(B="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+n),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Oi[n],!1!==P.cellText&&(r.w=n);break;default:""==n&&""==i?r.t="z":(r.t="s",r.v=nd(i||n))}if(function AM(n,i,e){if("z"!==n.t){if(!e||!1!==e.cellText)try{n.w="e"===n.t?n.w||ri[n.v]:"General"===i?"n"===n.t?(0|n.v)===n.v?n.v.toString(10):E(n.v):M(n.v):function SM(n,i){var e=V1[n]||qa(n);return"General"===e?M(i):va(e,i)}(i||"General",n.v)}catch(o){if(e.WTF)throw o}try{var r=V1[i]||i||"General";if(e.cellNF&&(n.z=r),e.cellDates&&"n"==n.t&&la(r)){var a=jt(n.v);a&&(n.t="d",n.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(o){if(e.WTF)throw o}}}(r,B,P),!1!==P.cellFormula)if(r.Formula){var ue=qa(r.Formula);61==ue.charCodeAt(0)&&(ue=ue.slice(1)),r.f=lp(ue,a),delete r.Formula,"RC"==r.ArrayRange?r.F=lp("RC:RC",a):r.ArrayRange&&(r.F=lp(r.ArrayRange,a),D.push([ls(r.F),r.F]))}else for(ge=0;ge<D.length;++ge)a.r>=D[ge][0].s.r&&a.r<=D[ge][0].e.r&&a.c>=D[ge][0].s.c&&a.c<=D[ge][0].e.c&&(r.F=D[ge][1]);P.cellStyles&&(oe.forEach(function(Te){!ae.patternType&&Te.patternType&&(ae.patternType=Te.patternType)}),r.s=ae),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function RM(n){n.t=n.v||"",n.t=n.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n.v=n.w=n.ixfe=void 0}function Ew(n,i){var e=i||{};na();var r=ha(hu(n));("binary"==e.type||"array"==e.type||"base64"==e.type)&&(r=typeof Mr<"u"?Mr.utils.decode(65001,Ga(r)):Rs(r));var a=r.slice(0,1024).toLowerCase(),o=!1;if((1023&(a=a.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&a.indexOf(","),1023&a.indexOf(";"))){var d=ts(e);return d.type="string",Lh.to_workbook(r,d)}if(-1==a.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach(function(Lc){a.indexOf("<"+Lc)>=0&&(o=!0)}),o)return function pR(n,i){var e=n.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!e||0==e.length)throw new Error("Invalid HTML: could not find <table>");if(1==e.length)return me(xE(e[0],i),i);var r={SheetNames:[],Sheets:{}};return e.forEach(function(a,o){zw(r,xE(a,i),"Sheet"+(o+1))}),r}(r,e);V1={"General Number":"General","General Date":st[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":st[15],"Short Date":st[14],"Long Time":st[19],"Medium Time":st[18],"Short Time":st[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:st[2],Standard:st[4],Percent:st[10],Scientific:st[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var p,P,D=[];null!=Dr&&null==e.dense&&(e.dense=Dr);var ma,B={},te=[],ae=e.dense?[]:{},oe="",ge={},ue={},Te=Zp('<Data ss:Type="String">'),qe=0,ht=0,ut=0,mi={s:{r:2e6,c:2e6},e:{r:0,c:0}},zi={},vi={},Vt="",wi=0,Yi=[],hn={},Tn={},Wi=0,Cr=[],aa=[],Sr={},La=[],qs=!1,Ur=[],Ca=[],qn={},gi=0,mn=0,Ti={Sheets:[],WBProps:{date1904:!1}},bi={};Cc.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");for(var Yn="";p=Cc.exec(r);)switch(p[3]=(Yn=p[3]).toLowerCase()){case"data":if("data"==Yn){if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else"/"!==p[0].charAt(p[0].length-2)&&D.push([p[3],!0]);break}if(D[D.length-1][1])break;"/"===p[1]?MM(r.slice(qe,p.index),Vt,Te,"comment"==D[D.length-1][0]?Sr:ge,{c:ht,r:ut},zi,La[ht],ue,Ur,e):(Vt="",Te=Zp(p[0]),qe=p.index+p[0].length);break;case"cell":if("/"===p[1])if(aa.length>0&&(ge.c=aa),(!e.sheetRows||e.sheetRows>ut)&&void 0!==ge.v&&(e.dense?(ae[ut]||(ae[ut]=[]),ae[ut][ht]=ge):ae[Va(ht)+gr(ut)]=ge),ge.HRef&&(ge.l={Target:qa(ge.HRef)},ge.HRefScreenTip&&(ge.l.Tooltip=ge.HRefScreenTip),delete ge.HRef,delete ge.HRefScreenTip),(ge.MergeAcross||ge.MergeDown)&&(gi=ht+(0|parseInt(ge.MergeAcross,10)),mn=ut+(0|parseInt(ge.MergeDown,10)),Yi.push({s:{c:ht,r:ut},e:{c:gi,r:mn}})),e.sheetStubs)if(ge.MergeAcross||ge.MergeDown){for(var Rr=ht;Rr<=gi;++Rr)for(var _r=ut;_r<=mn;++_r)(Rr>ht||_r>ut)&&(e.dense?(ae[_r]||(ae[_r]=[]),ae[_r][Rr]={t:"z"}):ae[Va(Rr)+gr(_r)]={t:"z"});ht=gi+1}else++ht;else ge.MergeAcross?ht=gi+1:++ht;else(ge=TM(p[0])).Index&&(ht=+ge.Index-1),ht<mi.s.c&&(mi.s.c=ht),ht>mi.e.c&&(mi.e.c=ht),"/>"===p[0].slice(-2)&&++ht,aa=[];break;case"row":"/"===p[1]||"/>"===p[0].slice(-2)?(ut<mi.s.r&&(mi.s.r=ut),ut>mi.e.r&&(mi.e.r=ut),"/>"===p[0].slice(-2)&&(ue=Zp(p[0])).Index&&(ut=+ue.Index-1),ht=0,++ut):((ue=Zp(p[0])).Index&&(ut=+ue.Index-1),qn={},("0"==ue.AutoFitHeight||ue.Height)&&(qn.hpx=parseInt(ue.Height,10),qn.hpt=ap(qn.hpx),Ca[ut]=qn),"1"==ue.Hidden&&(qn.hidden=!0,Ca[ut]=qn));break;case"worksheet":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"));te.push(oe),mi.s.r<=mi.e.r&&mi.s.c<=mi.e.c&&(ae["!ref"]=ba(mi),e.sheetRows&&e.sheetRows<=mi.e.r&&(ae["!fullref"]=ae["!ref"],mi.e.r=e.sheetRows-1,ae["!ref"]=ba(mi))),Yi.length&&(ae["!merges"]=Yi),La.length>0&&(ae["!cols"]=La),Ca.length>0&&(ae["!rows"]=Ca),B[oe]=ae}else mi={s:{r:2e6,c:2e6},e:{r:0,c:0}},ut=ht=0,D.push([p[3],!1]),P=Zp(p[0]),oe=qa(P.Name),ae=e.dense?[]:{},Yi=[],Ur=[],Ca=[],Ti.Sheets.push(bi={name:oe,Hidden:0});break;case"table":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else{if("/>"==p[0].slice(-2))break;D.push([p[3],!1]),La=[],qs=!1}break;case"style":"/"===p[1]?IM(zi,vi,e):vi=Zp(p[0]);break;case"numberformat":vi.nf=qa(Zp(p[0]).Format||"General"),V1[vi.nf]&&(vi.nf=V1[vi.nf]);for(var kr=0;392!=kr&&st[kr]!=vi.nf;++kr);if(392==kr)for(kr=57;392!=kr;++kr)if(null==st[kr]){Qr(vi.nf,kr);break}break;case"column":if("table"!==D[D.length-1][0])break;if((ma=Zp(p[0])).Hidden&&(ma.hidden=!0,delete ma.Hidden),ma.Width&&(ma.wpx=parseInt(ma.Width,10)),!qs&&ma.wpx>10){qs=!0,Ac=Cg;for(var er=0;er<La.length;++er)La[er]&&hd(La[er])}qs&&hd(ma),La[ma.Index-1||La.length]=ma;for(var Bs=0;Bs<+ma.Span;++Bs)La[La.length]=ts(ma);break;case"namedrange":if("/"===p[1])break;Ti.Names||(Ti.Names=[]);var ui=oa(p[0]),Qo={Name:ui.Name,Ref:lp(ui.RefersTo.slice(1),{r:0,c:0})};Ti.Sheets.length>0&&(Qo.Sheet=Ti.Sheets.length-1),Ti.Names.push(Qo);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===p[0].slice(-2))break;"/"===p[1]?Vt+=r.slice(wi,p.index):wi=p.index+p[0].length;break;case"interior":if(!e.cellStyles)break;vi.Interior=Zp(p[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===p[0].slice(-2))break;"/"===p[1]?po(hn,Yn,r.slice(Wi,p.index)):Wi=p.index+p[0].length;break;case"styles":case"workbook":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else D.push([p[3],!1]);break;case"comment":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"));RM(Sr),aa.push(Sr)}else D.push([p[3],!1]),Sr={a:(P=Zp(p[0])).Author};break;case"autofilter":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else if("/"!==p[0].charAt(p[0].length-2)){var oo=Zp(p[0]);ae["!autofilter"]={ref:lp(oo.Range).replace(/\$/g,"")},D.push([p[3],!0])}break;case"datavalidation":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else"/"!==p[0].charAt(p[0].length-2)&&D.push([p[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===p[1]){if((P=D.pop())[0]!==p[3])throw new Error("Bad state: "+P.join("|"))}else"/"!==p[0].charAt(p[0].length-2)&&D.push([p[3],!0]);break;default:if(0==D.length&&"document"==p[3]||0==D.length&&"uof"==p[3])return RE(r,e);var $o=!0;switch(D[D.length-1][0]){case"officedocumentsettings":switch(p[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:$o=!1}break;case"componentoptions":switch(p[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:$o=!1}break;case"excelworkbook":switch(p[3]){case"date1904":Ti.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:$o=!1}break;case"workbookoptions":switch(p[3]){case"owcversion":case"height":case"width":break;default:$o=!1}break;case"worksheetoptions":switch(p[3]){case"visible":if("/>"!==p[0].slice(-2))if("/"===p[1])switch(r.slice(Wi,p.index)){case"SheetHidden":bi.Hidden=1;break;case"SheetVeryHidden":bi.Hidden=2}else Wi=p.index+p[0].length;break;case"header":ae["!margins"]||C(ae["!margins"]={},"xlml"),isNaN(+oa(p[0]).Margin)||(ae["!margins"].header=+oa(p[0]).Margin);break;case"footer":ae["!margins"]||C(ae["!margins"]={},"xlml"),isNaN(+oa(p[0]).Margin)||(ae["!margins"].footer=+oa(p[0]).Margin);break;case"pagemargins":var lo=oa(p[0]);ae["!margins"]||C(ae["!margins"]={},"xlml"),isNaN(+lo.Top)||(ae["!margins"].top=+lo.Top),isNaN(+lo.Left)||(ae["!margins"].left=+lo.Left),isNaN(+lo.Right)||(ae["!margins"].right=+lo.Right),isNaN(+lo.Bottom)||(ae["!margins"].bottom=+lo.Bottom);break;case"displayrighttoleft":Ti.Views||(Ti.Views=[]),Ti.Views[0]||(Ti.Views[0]={}),Ti.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":ae["!outline"]||(ae["!outline"]={}),ae["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":ae["!outline"]||(ae["!outline"]={}),ae["!outline"].left=!0;break;default:$o=!1}break;case"pivottable":case"pivotcache":switch(p[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:$o=!1}break;case"pagebreaks":switch(p[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:$o=!1}break;case"autofilter":switch(p[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:$o=!1}break;case"querytable":switch(p[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:$o=!1}break;case"datavalidation":switch(p[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:$o=!1}break;case"sorting":case"conditionalformatting":switch(p[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:$o=!1}break;case"mapinfo":case"schema":case"data":switch(p[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:$o=!1}break;case"smarttags":break;default:$o=!1}if($o||p[3].match(/!\[CDATA/))break;if(!D[D.length-1][1])throw"Unrecognized tag: "+p[3]+"|"+D.join("|");if("customdocumentproperties"===D[D.length-1][0]){if("/>"===p[0].slice(-2))break;"/"===p[1]?DM(Tn,Yn,Cr,r.slice(Wi,p.index)):(Cr=p,Wi=p.index+p[0].length);break}if(e.WTF)throw"Unrecognized tag: "+p[3]+"|"+D.join("|")}var Jr={};return!e.bookSheets&&!e.bookProps&&(Jr.Sheets=B),Jr.SheetNames=te,Jr.Workbook=Ti,Jr.SSF=ts(st),Jr.Props=hn,Jr.Custprops=Tn,Jr}function kw(n,i){switch(Rw(i=i||{}),i.type||"base64"){case"base64":return Ew(Fa(n),i);case"binary":case"buffer":case"file":return Ew(n,i);case"array":return Ew(Ci(n),i)}}function vE(n){return or("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+Vv(n.Ref,{r:0,c:0})})}function YM(n,i,e,r,a,o,d){if(!n||null==n.v&&null==n.f)return"";var p={};if(n.f&&(p["ss:Formula"]="="+$a(Vv(n.f,d))),n.F&&n.F.slice(0,i.length)==i){var D=Qa(n.F.slice(i.length+1));p["ss:ArrayRange"]="RC:R"+(D.r==d.r?"":"["+(D.r-d.r)+"]")+"C"+(D.c==d.c?"":"["+(D.c-d.c)+"]")}if(n.l&&n.l.Target&&(p["ss:HRef"]=$a(n.l.Target),n.l.Tooltip&&(p["x:HRefScreenTip"]=$a(n.l.Tooltip))),e["!merges"])for(var P=e["!merges"],B=0;B!=P.length;++B)P[B].s.c!=d.c||P[B].s.r!=d.r||(P[B].e.c>P[B].s.c&&(p["ss:MergeAcross"]=P[B].e.c-P[B].s.c),P[B].e.r>P[B].s.r&&(p["ss:MergeDown"]=P[B].e.r-P[B].s.r));var te="",ae="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":te="Number",ae=String(n.v);break;case"b":te="Boolean",ae=n.v?"1":"0";break;case"e":te="Error",ae=ri[n.v];break;case"d":te="DateTime",ae=new Date(n.v).toISOString(),null==n.z&&(n.z=n.z||st[14]);break;case"s":te="String",ae=function Ru(n){return(n+"").replace(Nc,function(e){return Ld[e]}).replace(bc,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}(n.v||"")}var oe=F(r.cellXfs,n,r);p["ss:StyleID"]="s"+(21+oe),p["ss:Index"]=d.c+1;var ue="z"==n.t?"":'<Data ss:Type="'+te+'">'+(null!=n.v?ae:"")+"</Data>";return(n.c||[]).length>0&&(ue+=function zM(n){return n.map(function(i){var e=function Qc(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}(i.t||""),r=or("ss:Data",e,{xmlns:"http://www.w3.org/TR/REC-html40"});return or("Comment",r,{"ss:Author":i.a})}).join("")}(n.c)),or("Cell",ue,p)}function GM(n,i){var e='<Row ss:Index="'+(n+1)+'"';return i&&(i.hpt&&!i.hpx&&(i.hpx=Tf(i.hpt)),i.hpx&&(e+=' ss:AutoFitHeight="0" ss:Height="'+i.hpx+'"'),i.hidden&&(e+=' ss:Hidden="1"')),e+">"}function VM(n,i,e){var r=[],o=e.Sheets[e.SheetNames[n]],d=o?function BM(n,i,e,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,o=[],d=0;d<a.length;++d){var p=a[d];p.Sheet==e&&(p.Name.match(/^_xlfn\./)||o.push(vE(p)))}return o.join("")}(o,0,n,e):"";return d.length>0&&r.push("<Names>"+d+"</Names>"),d=o?function HM(n,i,e,r){if(!n["!ref"])return"";var a=ls(n["!ref"]),o=n["!merges"]||[],d=0,p=[];n["!cols"]&&n["!cols"].forEach(function(Te,qe){hd(Te);var ht=!!Te.width,ut=pd(qe,Te),mi={"ss:Index":qe+1};ht&&(mi["ss:Width"]=Ph(ut.width)),Te.hidden&&(mi["ss:Hidden"]="1"),p.push(or("Column",null,mi))});for(var D=Array.isArray(n),P=a.s.r;P<=a.e.r;++P){for(var B=[GM(P,(n["!rows"]||[])[P])],te=a.s.c;te<=a.e.c;++te){var ae=!1;for(d=0;d!=o.length;++d)if(!(o[d].s.c>te||o[d].s.r>P||o[d].e.c<te||o[d].e.r<P)){(o[d].s.c!=te||o[d].s.r!=P)&&(ae=!0);break}if(!ae){var oe={r:P,c:te},ge=xa(oe);B.push(YM(D?(n[P]||[])[te]:n[ge],ge,n,i,0,0,oe))}}B.push("</Row>"),B.length>2&&p.push(B.join(""))}return p.join("")}(o,i):"",d.length>0&&r.push("<Table>"+d+"</Table>"),r.push(function NM(n,i,e,r){if(!n)return"";var a=[];if(n["!margins"]&&(a.push("<PageSetup>"),n["!margins"].header&&a.push(or("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&a.push(or("Footer",null,{"x:Margin":n["!margins"].footer})),a.push(or("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[e])if(r.Workbook.Sheets[e].Hidden)a.push(or("Visible",1==r.Workbook.Sheets[e].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<e&&(!r.Workbook.Sheets[o]||r.Workbook.Sheets[o].Hidden);++o);o==e&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),n["!protect"]&&(a.push(Ss("ProtectContents","True")),n["!protect"].objects&&a.push(Ss("ProtectObjects","True")),n["!protect"].scenarios&&a.push(Ss("ProtectScenarios","True")),null==n["!protect"].selectLockedCells||n["!protect"].selectLockedCells?null!=n["!protect"].selectUnlockedCells&&!n["!protect"].selectUnlockedCells&&a.push(Ss("EnableSelection","UnlockedCells")):a.push(Ss("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(d){n["!protect"][d[0]]&&a.push("<"+d[1]+"/>")})),0==a.length?"":or("WorksheetOptions",a.join(""),{xmlns:nn.x})}(o,0,n,e)),r.join("")}function UM(n,i){i||(i={}),n.SSF||(n.SSF=ts(st)),n.SSF&&(na(),Ms(n.SSF),i.revssf=uu(n.SSF),i.revssf[n.SSF[65535]]=0,i.ssf=n.SSF,i.cellXfs=[],F(i.cellXfs,{},{revssf:{General:0}}));var e=[];e.push(function OM(n,i){var e=[];return n.Props&&e.push(function vu(n,i){var e=[];return no(fo).map(function(r){for(var a=0;a<qr.length;++a)if(qr[a][1]==r)return qr[a];for(a=0;a<Vs.length;++a)if(Vs[a][1]==r)return Vs[a];throw r}).forEach(function(r){if(null!=n[r[1]]){var a=i&&i.Props&&null!=i.Props[r[1]]?i.Props[r[1]]:n[r[1]];"date"===r[2]&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof a?a=String(a):!0===a||!1===a?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),e.push(Ss(fo[r[1]]||r[1],a))}}),or("DocumentProperties",e.join(""),{xmlns:nn.o})}(n.Props,i)),n.Custprops&&e.push(function Sh(n,i){var e=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return n&&no(n).forEach(function(o){if(Object.prototype.hasOwnProperty.call(n,o)){for(var d=0;d<qr.length;++d)if(o==qr[d][1])return;for(d=0;d<Vs.length;++d)if(o==Vs[d][1])return;for(d=0;d<e.length;++d)if(o==e[d])return;var p=n[o],D="string";"number"==typeof p?(D="float",p=String(p)):!0===p||!1===p?(D="boolean",p=p?"1":"0"):p=String(p),a.push(or(Kc(o),p,{"dt:dt":D}))}}),i&&no(i).forEach(function(o){if(Object.prototype.hasOwnProperty.call(i,o)&&(!n||!Object.prototype.hasOwnProperty.call(n,o))){var d=i[o],p="string";"number"==typeof d?(p="float",d=String(d)):!0===d||!1===d?(p="boolean",d=d?"1":"0"):d instanceof Date?(p="dateTime.tz",d=d.toISOString()):d=String(d),a.push(or(Kc(o),d,{"dt:dt":p}))}}),"<"+r+' xmlns="'+nn.o+'">'+a.join("")+"</"+r+">"}(n.Props,n.Custprops)),e.join("")}(n,i)),e.push(""),e.push(""),e.push("");for(var r=0;r<n.SheetNames.length;++r)e.push(or("Worksheet",VM(r,i,n),{"ss:Name":$a(n.SheetNames[r])}));return e[2]=function PM(n,i){var e=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return i.cellXfs.forEach(function(r,a){var o=[];o.push(or("NumberFormat",null,{"ss:Format":$a(st[r.numFmtId])}));var d={"ss:ID":"s"+(21+a)};e.push(or("Style",o.join(""),d))}),or("Styles",e.join(""))}(0,i),e[3]=function FM(n){if(!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,e=[],r=0;r<i.length;++r){var a=i[r];null==a.Sheet&&(a.Name.match(/^_xlfn\./)||e.push(vE(a)))}return or("Names",e.join(""))}(n),Ys+or("Workbook",e.join(""),{xmlns:nn.ss,"xmlns:o":nn.o,"xmlns:x":nn.x,"xmlns:ss":nn.ss,"xmlns:dt":nn.dt,"xmlns:html":nn.html})}var $M=[60,1084,2066,2165,2175];function WM(n,i,e,r,a){var o=r,d=[],p=e.slice(e.l,e.l+o);if(a&&a.enc&&a.enc.insitu&&p.length>0)switch(n){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:a.enc.insitu(p)}d.push(p),e.l+=o;for(var D=Xo(e,e.l),P=Tw[D],B=0;null!=P&&$M.indexOf(D)>-1;)o=Xo(e,e.l+2),B=e.l+4,2066==D?B+=4:(2165==D||2175==D)&&(B+=12),p=e.slice(B,e.l+4+o),d.push(p),e.l+=4+o,P=Tw[D=Xo(e,e.l)];var te=Bi(d);v(te,0);var ae=0;te.lens=[];for(var oe=0;oe<d.length;++oe)te.lens.push(ae),ae+=d[oe].length;if(te.length<r)throw"XLS Record 0x"+n.toString(16)+" Truncated: "+te.length+" < "+r;return i.f(te,te.length,a)}function Gm(n,i,e){if("z"!==n.t&&n.XF){var r=0;try{r=n.z||n.XF.numFmtId||0,i.cellNF&&(n.z=st[r])}catch(o){if(i.WTF)throw o}if(!i||!1!==i.cellText)try{n.w="e"===n.t?n.w||ri[n.v]:0===r||"General"==r?"n"===n.t?(0|n.v)===n.v?n.v.toString(10):E(n.v):M(n.v):va(r,n.v,{date1904:!!e,dateNF:i&&i.dateNF})}catch(o){if(i.WTF)throw o}if(i.cellDates&&r&&"n"==n.t&&la(st[r]||String(r))){var a=jt(n.v);a&&(n.t="d",n.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function Jx(n,i,e){return{v:n,ixfe:i,t:e}}var U1={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _E(n,i){var e,r,a,o;if(i||(i={}),Rw(i),Pa(),i.codepage&&rn(i.codepage),n.FullPaths){if($r.find(n,"/encryption"))throw new Error("File is password-protected");e=$r.find(n,"!CompObj"),r=$r.find(n,"/Workbook")||$r.find(n,"/Book")}else{switch(i.type){case"base64":n=kt(Fa(n));break;case"binary":n=kt(n);break;case"buffer":break;case"array":Array.isArray(n)||(n=Array.prototype.slice.call(n))}v(n,0),r={content:n}}if(e&&function jM(n){var i={},e=n.content;if(e.l=28,i.AnsiUserType=e.read_shift(0,"lpstr-ansi"),i.AnsiClipboardFormat=function jh(n){return Cp(n,1)}(e),e.length-e.l<=4)return i;var r=e.read_shift(4);if(0==r||r>40||(e.l-=4,i.Reserved1=e.read_shift(0,"lpstr-ansi"),e.length-e.l<=4)||1907505652!==(r=e.read_shift(4))||(i.UnicodeClipboardFormat=function k(n){return Cp(n,2)}(e),0==(r=e.read_shift(4))||r>40))return i;e.l-=4,i.Reserved2=e.read_shift(0,"lpwstr")}(e),i.bookProps&&!i.bookSheets)a={};else{var d=Et?"buffer":"array";if(r&&r.content)a=function XM(n,i){var e={opts:{}},r={};null!=Dr&&null==i.dense&&(i.dense=Dr);var te,oe,ue,Te,ut,mi,a=i.dense?[]:{},o={},d={},p=null,D=[],P="",B={},ae="",qe={},ht=[],zi=[],vi=[],Vt={Sheets:[],WBProps:{date1904:!1},Views:[{}]},wi={},Yi=function(io){return io<8?hi[io]:io<64&&vi[io-8]||hi[io]},Tn=function(io,Zc,Uh){if(!(qn>1||Uh.sheetRows&&io.r>=Uh.sheetRows)){if(Uh.cellStyles&&Zc.XF&&Zc.XF.data&&function(io,Zc,Uh){var e0,Du=Zc.XF.data;Du&&Du.patternType&&Uh&&Uh.cellStyles&&(Zc.s={},Zc.s.patternType=Du.patternType,(e0=Cf(Yi(Du.icvFore)))&&(Zc.s.fgColor={rgb:e0}),(e0=Cf(Yi(Du.icvBack)))&&(Zc.s.bgColor={rgb:e0}))}(0,Zc,Uh),delete Zc.ixfe,delete Zc.XF,te=io,ae=xa(io),(!d||!d.s||!d.e)&&(d={s:{r:0,c:0},e:{r:0,c:0}}),io.r<d.s.r&&(d.s.r=io.r),io.c<d.s.c&&(d.s.c=io.c),io.r+1>d.e.r&&(d.e.r=io.r+1),io.c+1>d.e.c&&(d.e.c=io.c+1),Uh.cellFormula&&Zc.f)for(var Du=0;Du<ht.length;++Du)if(!(ht[Du][0].s.c>io.c||ht[Du][0].s.r>io.r||ht[Du][0].e.c<io.c||ht[Du][0].e.r<io.r)){Zc.F=ba(ht[Du][0]),(ht[Du][0].s.c!=io.c||ht[Du][0].s.r!=io.r)&&delete Zc.f,Zc.f&&(Zc.f=""+Vu(ht[Du][1],0,io,Ur,Wi));break}Uh.dense?(a[io.r]||(a[io.r]=[]),a[io.r][io.c]=Zc):a[ae]=Zc}},Wi={enc:!1,sbcch:0,snames:[],sharedf:qe,arrayf:ht,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!i&&!!i.cellStyles,WTF:!!i&&!!i.wtf};i.password&&(Wi.password=i.password);var Cr,aa=[],Sr=[],La=[],ma=[],qs=!1,Ur=[];Ur.SheetNames=Wi.snames,Ur.sharedf=Wi.sharedf,Ur.arrayf=Wi.arrayf,Ur.names=[],Ur.XTI=[];var bi,Ca=0,qn=0,gi=0,mn=[],Ti=[];Wi.codepage=1200,lr(1200);for(var Yn=!1;n.l<n.length-1;){var Rr=n.l,_r=n.read_shift(2);if(0===_r&&10===Ca)break;var kr=n.l===n.length?0:n.read_shift(2),er=Tw[_r];if(er&&er.f){if(i.bookSheets&&133===Ca&&133!==_r)break;if(Ca=_r,2===er.r||12==er.r){var Bs=n.read_shift(2);if(kr-=2,!Wi.enc&&Bs!==_r&&((255&Bs)<<8|Bs>>8)!==_r)throw new Error("rt mismatch: "+Bs+"!="+_r);12==er.r&&(n.l+=10,kr-=10)}var ui={};if(ui=10===_r?er.f(n,kr,Wi):WM(_r,er,n,kr,Wi),0==qn&&-1===[9,521,1033,2057].indexOf(Ca))continue;switch(_r){case 34:e.opts.Date1904=Vt.WBProps.date1904=ui;break;case 134:e.opts.WriteProtect=!0;break;case 47:if(Wi.enc||(n.l=0),Wi.enc=ui,!i.password)throw new Error("File is password-protected");if(null==ui.valid)throw new Error("Encryption scheme unsupported");if(!ui.valid)throw new Error("Password is incorrect");break;case 92:Wi.lastuser=ui;break;case 66:var Qo=Number(ui);switch(Qo){case 21010:Qo=1200;break;case 32768:Qo=1e4;break;case 32769:Qo=1252}lr(Wi.codepage=Qo),Yn=!0;break;case 317:Wi.rrtabid=ui;break;case 25:Wi.winlocked=ui;break;case 439:e.opts.RefreshAll=ui;break;case 12:e.opts.CalcCount=ui;break;case 16:e.opts.CalcDelta=ui;break;case 17:e.opts.CalcIter=ui;break;case 13:e.opts.CalcMode=ui;break;case 14:e.opts.CalcPrecision=ui;break;case 95:e.opts.CalcSaveRecalc=ui;break;case 15:Wi.CalcRefMode=ui;break;case 2211:e.opts.FullCalc=ui;break;case 129:ui.fDialog&&(a["!type"]="dialog"),ui.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ui.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:zi.push(ui);break;case 430:Ur.push([ui]),Ur[Ur.length-1].XTI=[];break;case 35:case 547:Ur[Ur.length-1].push(ui);break;case 24:case 536:bi={Name:ui.Name,Ref:Vu(ui.rgce,0,null,Ur,Wi)},ui.itab>0&&(bi.Sheet=ui.itab-1),Ur.names.push(bi),Ur[0]||(Ur[0]=[],Ur[0].XTI=[]),Ur[Ur.length-1].push(ui),"_xlnm._FilterDatabase"==ui.Name&&ui.itab>0&&ui.rgce&&ui.rgce[0]&&ui.rgce[0][0]&&"PtgArea3d"==ui.rgce[0][0][0]&&(Ti[ui.itab-1]={ref:ba(ui.rgce[0][0][1][2])});break;case 22:Wi.ExternCount=ui;break;case 23:0==Ur.length&&(Ur[0]=[],Ur[0].XTI=[]),Ur[Ur.length-1].XTI=Ur[Ur.length-1].XTI.concat(ui),Ur.XTI=Ur.XTI.concat(ui);break;case 2196:if(Wi.biff<8)break;null!=bi&&(bi.Comment=ui[1]);break;case 18:a["!protect"]=ui;break;case 19:0!==ui&&Wi.WTF&&console.error("Password verifier: "+ui);break;case 133:o[ui.pos]=ui,Wi.snames.push(ui.name);break;case 10:if(--qn)break;if(d.e){if(d.e.r>0&&d.e.c>0){if(d.e.r--,d.e.c--,a["!ref"]=ba(d),i.sheetRows&&i.sheetRows<=d.e.r){var oo=d.e.r;d.e.r=i.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=ba(d),d.e.r=oo}d.e.r++,d.e.c++}aa.length>0&&(a["!merges"]=aa),Sr.length>0&&(a["!objects"]=Sr),La.length>0&&(a["!cols"]=La),ma.length>0&&(a["!rows"]=ma),Vt.Sheets.push(wi)}""===P?B=a:r[P]=a,a=i.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===Wi.biff&&(Wi.biff={9:2,521:3,1033:4}[_r]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ui.BIFFVer]||8),Wi.biffguess=0==ui.BIFFVer,0==ui.BIFFVer&&4096==ui.dt&&(Wi.biff=5,Yn=!0,lr(Wi.codepage=28591)),8==Wi.biff&&0==ui.BIFFVer&&16==ui.dt&&(Wi.biff=2),qn++)break;if(a=i.dense?[]:{},Wi.biff<8&&!Yn&&(Yn=!0,lr(Wi.codepage=i.codepage||1252)),Wi.biff<5||0==ui.BIFFVer&&4096==ui.dt){""===P&&(P="Sheet1"),d={s:{r:0,c:0},e:{r:0,c:0}};var $o={pos:n.l-kr,name:P};o[$o.pos]=$o,Wi.snames.push(P)}else P=(o[Rr]||{name:""}).name;32==ui.dt&&(a["!type"]="chart"),64==ui.dt&&(a["!type"]="macro"),aa=[],Sr=[],Wi.arrayf=ht=[],La=[],ma=[],qs=!1,wi={Hidden:(o[Rr]||{hs:0}).hs,name:P};break;case 515:case 3:case 2:"chart"==a["!type"]&&(i.dense?(a[ui.r]||[])[ui.c]:a[xa({c:ui.c,r:ui.r})])&&++ui.c,ut={ixfe:ui.ixfe,XF:zi[ui.ixfe]||{},v:ui.val,t:"n"},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i);break;case 5:case 517:ut={ixfe:ui.ixfe,XF:zi[ui.ixfe],v:ui.val,t:ui.t},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i);break;case 638:ut={ixfe:ui.ixfe,XF:zi[ui.ixfe],v:ui.rknum,t:"n"},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i);break;case 189:for(var lo=ui.c;lo<=ui.C;++lo){var Jr=ui.rkrec[lo-ui.c][0];ut={ixfe:Jr,XF:zi[Jr],v:ui.rkrec[lo-ui.c][1],t:"n"},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:lo,r:ui.r},ut,i)}break;case 6:case 518:case 1030:if("String"==ui.val){p=ui;break}if((ut=Jx(ui.val,ui.cell.ixfe,ui.tt)).XF=zi[ut.ixfe],i.cellFormula){var Lc=ui.formula;if(Lc&&Lc[0]&&Lc[0][0]&&"PtgExp"==Lc[0][0][0]){var $d=Lc[0][0][1][0],bp=Lc[0][0][1][1],Qp=xa({r:$d,c:bp});qe[Qp]?ut.f=""+Vu(ui.formula,0,ui.cell,Ur,Wi):ut.F=((i.dense?(a[$d]||[])[bp]:a[Qp])||{}).F}else ut.f=""+Vu(ui.formula,0,ui.cell,Ur,Wi)}gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn(ui.cell,ut,i),p=ui;break;case 7:case 519:if(!p)throw new Error("String record expects Formula");p.val=ui,(ut=Jx(ui,p.cell.ixfe,"s")).XF=zi[ut.ixfe],i.cellFormula&&(ut.f=""+Vu(p.formula,0,p.cell,Ur,Wi)),gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn(p.cell,ut,i),p=null;break;case 33:case 545:ht.push(ui);var mv=xa(ui[0].s);if(oe=i.dense?(a[ui[0].s.r]||[])[ui[0].s.c]:a[mv],i.cellFormula&&oe){if(!p||!mv||!oe)break;oe.f=""+Vu(ui[1],0,ui[0],Ur,Wi),oe.F=ba(ui[0])}break;case 1212:if(!i.cellFormula)break;if(ae){if(!p)break;qe[xa(p.cell)]=ui[0],((oe=i.dense?(a[p.cell.r]||[])[p.cell.c]:a[xa(p.cell)])||{}).f=""+Vu(ui[0],0,te,Ur,Wi)}break;case 253:ut=Jx(D[ui.isst].t,ui.ixfe,"s"),D[ui.isst].h&&(ut.h=D[ui.isst].h),ut.XF=zi[ut.ixfe],gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i);break;case 513:i.sheetStubs&&(ut={ixfe:ui.ixfe,XF:zi[ui.ixfe],t:"z"},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i));break;case 190:if(i.sheetStubs)for(var wp=ui.c;wp<=ui.C;++wp){var kh=ui.ixfe[wp-ui.c];ut={ixfe:kh,XF:zi[kh],t:"z"},gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:wp,r:ui.r},ut,i)}break;case 214:case 516:case 4:(ut=Jx(ui.val,ui.ixfe,"s")).XF=zi[ut.ixfe],gi>0&&(ut.z=mn[ut.ixfe>>8&63]),Gm(ut,i,e.opts.Date1904),Tn({c:ui.c,r:ui.r},ut,i);break;case 0:case 512:1===qn&&(d=ui);break;case 252:D=ui;break;case 1054:if(4==Wi.biff){mn[gi++]=ui[1];for(var of=0;of<gi+163&&st[of]!=ui[1];++of);of>=163&&Qr(ui[1],gi+163)}else Qr(ui[1],ui[0]);break;case 30:mn[gi++]=ui;for(var Xm=0;Xm<gi+163&&st[Xm]!=ui;++Xm);Xm>=163&&Qr(ui,gi+163);break;case 229:aa=aa.concat(ui);break;case 93:Sr[ui.cmo[0]]=Wi.lastobj=ui;break;case 438:Wi.lastobj.TxO=ui;break;case 127:Wi.lastobj.ImData=ui;break;case 440:for(Te=ui[0].s.r;Te<=ui[0].e.r;++Te)for(ue=ui[0].s.c;ue<=ui[0].e.c;++ue)(oe=i.dense?(a[Te]||[])[ue]:a[xa({c:ue,r:Te})])&&(oe.l=ui[1]);break;case 2048:for(Te=ui[0].s.r;Te<=ui[0].e.r;++Te)for(ue=ui[0].s.c;ue<=ui[0].e.c;++ue)(oe=i.dense?(a[Te]||[])[ue]:a[xa({c:ue,r:Te})])&&oe.l&&(oe.l.Tooltip=ui[1]);break;case 28:if(Wi.biff<=5&&Wi.biff>=2)break;oe=i.dense?(a[ui[0].r]||[])[ui[0].c]:a[xa(ui[0])];var gv=Sr[ui[2]];oe||(i.dense?(a[ui[0].r]||(a[ui[0].r]=[]),oe=a[ui[0].r][ui[0].c]={t:"z"}):oe=a[xa(ui[0])]={t:"z"},d.e.r=Math.max(d.e.r,ui[0].r),d.s.r=Math.min(d.s.r,ui[0].r),d.e.c=Math.max(d.e.c,ui[0].c),d.s.c=Math.min(d.s.c,ui[0].c)),oe.c||(oe.c=[]),oe.c.push({a:ui[1],t:gv.TxO.t});break;case 2173:Pv(0,ui.ext);break;case 125:if(!Wi.cellStyles)break;for(;ui.e>=ui.s;)La[ui.e--]={width:ui.w/256,level:ui.level||0,hidden:!!(1&ui.flags)},qs||(qs=!0,kf(ui.w/256)),hd(La[ui.e+1]);break;case 520:var Wd={};null!=ui.level&&(ma[ui.r]=Wd,Wd.level=ui.level),ui.hidden&&(ma[ui.r]=Wd,Wd.hidden=!0),ui.hpt&&(ma[ui.r]=Wd,Wd.hpt=ui.hpt,Wd.hpx=Tf(ui.hpt));break;case 38:case 39:case 40:case 41:a["!margins"]||C(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[_r]]=ui;break;case 161:a["!margins"]||C(a["!margins"]={}),a["!margins"].header=ui.header,a["!margins"].footer=ui.footer;break;case 574:ui.RTL&&(Vt.Views[0].RTL=!0);break;case 146:vi=ui;break;case 2198:Cr=ui;break;case 140:mi=ui;break;case 442:P?wi.CodeName=ui||wi.name:Vt.WBProps.CodeName=ui||"ThisWorkbook"}}else er||console.error("Missing Info for XLS Record 0x"+_r.toString(16)),n.l+=kr}return e.SheetNames=no(o).sort(function(Yf,io){return Number(Yf)-Number(io)}).map(function(Yf){return o[Yf].name}),i.bookSheets||(e.Sheets=r),!e.SheetNames.length&&B["!ref"]?(e.SheetNames.push("Sheet1"),e.Sheets&&(e.Sheets.Sheet1=B)):e.Preamble=B,e.Sheets&&Ti.forEach(function(Yf,io){e.Sheets[e.SheetNames[io]]["!autofilter"]=Yf}),e.Strings=D,e.SSF=ts(st),Wi.enc&&(e.Encryption=Wi.enc),Cr&&(e.Themes=Cr),e.Metadata={},void 0!==mi&&(e.Metadata.Country=mi),Ur.names.length>0&&(Vt.Names=Ur.names),e.Workbook=Vt,e}(r.content,i);else if((o=$r.find(n,"PerfectOffice_MAIN"))&&o.content)a=qh.to_workbook(o.content,(i.type=d,i));else{if(!(o=$r.find(n,"NativeContent_MAIN"))||!o.content)throw(o=$r.find(n,"MN0"))&&o.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a=qh.to_workbook(o.content,(i.type=d,i))}i.bookVBA&&n.FullPaths&&$r.find(n,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=function R0(n){var i=$r.utils.cfb_new({root:"R"});return n.FullPaths.forEach(function(e,r){if("/"!==e.slice(-1)&&e.match(/_VBA_PROJECT_CUR/)){var a=e.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");$r.utils.cfb_add(i,a,n.FileIndex[r].content)}}),$r.write(i)}(n))}var p={};return n.FullPaths&&function qM(n,i,e){var r=$r.find(n,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var a=Km(r,Tt,U1.DSI);for(var o in a)i[o]=a[o]}catch(P){if(e.WTF)throw P}var d=$r.find(n,"/!SummaryInformation");if(d&&d.size>0)try{var p=Km(d,Ne,U1.SI);for(var D in p)null==i[D]&&(i[D]=p[D])}catch(P){if(e.WTF)throw P}i.HeadingPairs&&i.TitlesOfParts&&(vl(i.HeadingPairs,i.TitlesOfParts,i,e),delete i.HeadingPairs,delete i.TitlesOfParts)}(n,p,i),a.Props=a.Custprops=p,i.bookFiles&&(a.cfb=n),a}var j1={0:{f:function bw(n,i){var e={},r=n.l+i;e.r=n.read_shift(4),n.l+=4;var a=n.read_shift(2);n.l+=1;var o=n.read_shift(1);return n.l=r,7&o&&(e.level=7&o),16&o&&(e.hidden=!0),32&o&&(e.hpt=a/20),e}},1:{f:function jx(n){return[qo(n)]}},2:{f:function Ae(n){return[qo(n),Fd(n),"n"]}},3:{f:function s(n){return[qo(n),n.read_shift(1),"e"]}},4:{f:function a_(n){return[qo(n),n.read_shift(1),"b"]}},5:{f:function K(n){return[qo(n),sc(n),"n"]}},6:{f:function ii(n){return[qo(n),Xr(n),"str"]}},7:{f:function S(n){return[qo(n),n.read_shift(4),"s"]}},8:{f:function kn(n,i,e){var r=n.l+i,a=qo(n);a.r=e["!row"];var d=[a,Xr(n),"str"];if(e.cellFormula){n.l+=2;var p=Bg(n,r-n.l,e);d[3]=Vu(p,0,a,e.supbooks,e)}else n.l=r;return d}},9:{f:function Xi(n,i,e){var r=n.l+i,a=qo(n);a.r=e["!row"];var d=[a,sc(n),"n"];if(e.cellFormula){n.l+=2;var p=Bg(n,r-n.l,e);d[3]=Vu(p,0,a,e.supbooks,e)}else n.l=r;return d}},10:{f:function li(n,i,e){var r=n.l+i,a=qo(n);a.r=e["!row"];var d=[a,n.read_shift(1),"b"];if(e.cellFormula){n.l+=2;var p=Bg(n,r-n.l,e);d[3]=Vu(p,0,a,e.supbooks,e)}else n.l=r;return d}},11:{f:function Qi(n,i,e){var r=n.l+i,a=qo(n);a.r=e["!row"];var d=[a,n.read_shift(1),"e"];if(e.cellFormula){n.l+=2;var p=Bg(n,r-n.l,e);d[3]=Vu(p,0,a,e.supbooks,e)}else n.l=r;return d}},12:{f:function L1(n){return[rc(n)]}},13:{f:function Ue(n){return[rc(n),Fd(n),"n"]}},14:{f:function g(n){return[rc(n),n.read_shift(1),"e"]}},15:{f:function Wx(n){return[rc(n),n.read_shift(1),"b"]}},16:{f:pe},17:{f:function Jt(n){return[rc(n),Xr(n),"str"]}},18:{f:function G(n){return[rc(n),n.read_shift(4),"s"]}},19:{f:Hf},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function ph(n,i,e){var r=n.l+i;n.l+=4,n.l+=1;var a=n.read_shift(4),o=im(n),d=$0(n,0,e),p=ac(n);n.l=r;var D={Name:o,Ptg:d};return a<268435455&&(D.Sheet=a),p&&(D.Comment=p),D}},40:{},42:{},43:{f:function b(n,i,e){var r={};r.sz=n.read_shift(2)/20;var a=function Vf(n){var i=n.read_shift(1);return n.l++,{fBold:1&i,fItalic:2&i,fUnderline:4&i,fStrikeout:8&i,fOutline:16&i,fShadow:32&i,fCondense:64&i,fExtend:128&i}}(n);switch(a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1),700===n.read_shift(2)&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var d=n.read_shift(1);0!=d&&(r.underline=d);var p=n.read_shift(1);p>0&&(r.family=p);var D=n.read_shift(1);switch(D>0&&(r.charset=D),n.l++,r.color=function qm(n){var i={},r=n.read_shift(1)>>>1,a=n.read_shift(1),o=n.read_shift(2,"i"),d=n.read_shift(1),p=n.read_shift(1),D=n.read_shift(1);switch(n.l++,r){case 0:i.auto=1;break;case 1:i.index=a;var P=hi[a];P&&(i.rgb=Cf(P));break;case 2:i.rgb=Cf([d,p,D]);break;case 3:i.theme=a}return 0!=o&&(i.tint=o>0?o/32767:o/32768),i}(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Xr(n),r}},44:{f:function Tg(n,i){return[n.read_shift(2),Xr(n)]}},45:{f:ie},46:{f:Us},47:{f:function Ft(n,i){var e=n.l+i,r=n.read_shift(2),a=n.read_shift(2);return n.l=e,{ixfe:r,numFmtId:a}}},48:{},49:{f:function xn(n){return n.read_shift(4,"i")}},50:{},51:{f:function Xl(n){for(var i=[],e=n.read_shift(4);e-- >0;)i.push([n.read_shift(4),n.read_shift(4)]);return i}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:dg},62:{f:function Rt(n){return[qo(n),Hf(n),"is"]}},63:{f:function Bv(n){var i={};i.i=n.read_shift(4);var e={};e.r=n.read_shift(4),e.c=n.read_shift(4),i.r=xa(e);var r=n.read_shift(1);return 2&r&&(i.l="1"),8&r&&(i.a="1"),i}},64:{f:function Sa(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:O,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function ua(n){var i=n.read_shift(2);return n.l+=28,{RTL:32&i}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function Vx(n,i){var e={},r=n[n.l];return++n.l,e.above=!(64&r),e.left=!(128&r),n.l+=18,e.name=mu(n,i-19),e}},148:{f:Hx,p:16},151:{f:function tr(){}},152:{},153:{f:function Ym(n,i){var e={},r=n.read_shift(4);e.defaultThemeVersion=n.read_shift(4);var a=i>8?Xr(n):"";return a.length>0&&(e.CodeName=a),e.autoCompressPictures=!!(65536&r),e.backupFile=!!(64&r),e.checkCompatibility=!!(4096&r),e.date1904=!!(1&r),e.filterPrivacy=!!(8&r),e.hidePivotFieldList=!!(1024&r),e.promptedSolutions=!!(16&r),e.publishItems=!!(2048&r),e.refreshAllConnections=!!(262144&r),e.saveExternalLinkValues=!!(128&r),e.showBorderUnselectedTables=!!(4&r),e.showInkAnnotation=!!(32&r),e.showObjects=["all","placeholders","none"][r>>13&3],e.showPivotChartFilter=!!(32768&r),e.updateLinks=["userSet","never","always"][r>>8&3],e}},154:{},155:{},156:{f:function z1(n,i){var e={};return e.Hidden=n.read_shift(4),e.iTabID=n.read_shift(4),e.strRelID=Bu(n,i-8),e.name=Xr(n),e}},157:{},158:{},159:{T:1,f:function yg(n){return[n.read_shift(4),n.read_shift(4)]}},160:{T:-1},161:{T:1,f:gu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Kn},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function A0(n,i){return{flags:n.read_shift(4),version:n.read_shift(4),name:Xr(n)}}},336:{T:-1},337:{f:function B_(n){return n.l+=4,0!=n.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Bu},357:{},358:{},359:{},360:{T:1},361:{},362:{f:yf},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function vn(n,i,e){var r=n.l+i,a=uf(n),o=n.read_shift(1),d=[a];if(d[2]=o,e.cellFormula){var p=n_(n,r-n.l,e);d[1]=p}else n.l=r;return d}},427:{f:function wr(n,i,e){var r=n.l+i,o=[gu(n,16)];if(e.cellFormula){var d=E1(n,r-n.l,e);o[1]=d,n.l=r}else n.l=r;return o}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function rs(n){var i={};return Er.forEach(function(e){i[e]=sc(n)}),i}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function R1(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function Pn(n,i){var e=n.l+i,r=gu(n,16),a=ac(n),o=Xr(n),d=Xr(n),p=Xr(n);n.l=e;var D={rfx:r,relId:a,loc:o,display:p};return d&&(D.Tooltip=d),D}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Bu},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:z_},633:{T:1},634:{T:-1},635:{T:1,f:function Gv(n){var i={};i.iauthor=n.read_shift(4);var e=gu(n,16);return i.rfx=e.s,i.ref=xa(e.s),n.l+=16,i}},636:{T:-1},637:{f:n0},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function mc(n,i){return n.l+=10,{name:Xr(n)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function Uo(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Tw={6:{f:Fg},10:{f:Vl},12:{f:Ps},13:{f:Ps},14:{f:Lo},15:{f:Lo},16:{f:sc},17:{f:Lo},18:{f:Lo},19:{f:Ps},20:{f:vf},21:{f:vf},23:{f:yf},24:{f:_f},25:{f:Lo},26:{},27:{},28:{f:function lh(n,i,e){return function lg(n,i,e){if(!(e.biff<8)){var r=n.read_shift(2),a=n.read_shift(2),o=n.read_shift(2),d=n.read_shift(2),p=Ul(n,0,e);return e.biff<8&&n.read_shift(1),[{r,c:a},p,d,o]}}(n,0,e)}},29:{},34:{f:Lo},35:{f:Zf},38:{f:sc},39:{f:sc},40:{f:sc},41:{f:sc},42:{f:Lo},43:{f:Lo},47:{f:function Dv(n,i,e){var r={Type:e.biff>=8?n.read_shift(2):0};return r.Type?function ip(n,i,e){var r=e||{};return r.Info=n.read_shift(2),n.l-=2,r.Data=1===r.Info?function k0(n){var i={},e=i.EncryptionVersionInfo=cl(n,4);if(1!=e.Major||1!=e.Minor)throw"unrecognized version code "+e.Major+" : "+e.Minor;return i.Salt=n.read_shift(16),i.EncryptedVerifier=n.read_shift(16),i.EncryptedVerifierHash=n.read_shift(16),i}(n):function kv(n,i){var e={},r=e.EncryptionVersionInfo=cl(n,4);if(i-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);e.Flags=n.read_shift(4),i-=4;var a=n.read_shift(4);return i-=4,e.EncryptionHeader=wf(n,a),e.EncryptionVerifier=ep(n,i-=a),e}(n,i),r}(n,i-2,r):function Sv(n,i,e,r){var a={key:Ps(n),verificationBytes:Ps(n)};e.password&&(a.verifier=Bp(e.password)),r.valid=a.verificationBytes===a.verifier,r.valid&&(r.insitu=function(n){var i=0,e=tp(n);return function(r){var a=function(n,i,e,r,a){var o,d;for(a||(a=i),r||(r=tp("")),o=0;o!=i.length;++o)d=i[o],a[o]=d=255&((d^=r[e])>>5|d<<3),++e;return[a,e,r]}(0,r,i,e);return i=a[1],a[0]}}(e.password))}(n,0,e,r),r}},49:{f:function Ba(n,i,e){var r={dyHeight:n.read_shift(2),fl:n.read_shift(2)};switch(e&&e.biff||8){case 2:break;case 3:case 4:n.l+=2;break;default:n.l+=10}return r.name=bd(n,0,e),r}},51:{f:Ps},60:{},61:{f:function dm(n){return{Pos:[n.read_shift(2),n.read_shift(2)],Dim:[n.read_shift(2),n.read_shift(2)],Flags:n.read_shift(2),CurTab:n.read_shift(2),FirstTab:n.read_shift(2),Selected:n.read_shift(2),TabRatio:n.read_shift(2)}}},64:{f:Lo},65:{f:function Wf(){}},66:{f:Ps},77:{},80:{},81:{},82:{},85:{f:Ps},89:{},90:{},91:{},92:{f:function bu(n,i,e){if(e.enc)return n.l+=i,"";var r=n.l,a=Ul(n,0,e);return n.read_shift(i+r-n.l),a}},93:{f:function cg(n,i,e){if(e&&e.biff<8)return function h0(n,i,e){n.l+=4;var r=n.read_shift(2),a=n.read_shift(2),o=n.read_shift(2);n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=6;var d=[];return d.push((ym[r]||O)(n,i-=36,e)),{cmo:[a,r,o],ft:d}}(n,i,e);var r=Bd(n),a=function Nd(n,i){for(var e=n.l+i,r=[];n.l<e;){var a=n.read_shift(2);n.l-=2;try{r.push(cc[a](n,e-n.l))}catch{return n.l=e,r}}return n.l!=e&&(n.l=e),r}(n,i-22);return{cmo:r,ft:a}}},94:{},95:{f:Lo},96:{},97:{},99:{f:Lo},125:{f:dg},128:{f:function su(n){n.l+=4;var i=[n.read_shift(2),n.read_shift(2)];if(0!==i[0]&&i[0]--,0!==i[1]&&i[1]--,i[0]>7||i[1]>7)throw new Error("Bad Gutters: "+i.join("|"));return i}},129:{f:function rl(n,i,e){var r=e&&8==e.biff||2==i?n.read_shift(2):(n.l+=i,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}},130:{f:Ps},131:{f:Lo},132:{f:Lo},133:{f:function ig(n,i,e){var r=n.read_shift(4),a=3&n.read_shift(1),o=n.read_shift(1);switch(o){case 0:o="Worksheet";break;case 1:o="Macrosheet";break;case 2:o="Chartsheet";break;case 6:o="VBAModule"}var d=bd(n,0,e);return 0===d.length&&(d="Sheet1"),{pos:r,hs:a,dt:o,name:d}}},134:{},140:{f:function ch(n){var e,i=[0,0];return e=n.read_shift(2),i[0]=_t[e]||e,e=n.read_shift(2),i[1]=_t[e]||e,i}},141:{f:Ps},144:{},146:{f:function ud(n){for(var i=n.read_shift(2),e=[];i-- >0;)e.push(om(n));return e}},151:{},152:{},153:{},154:{},155:{},156:{f:Ps},157:{},158:{},160:{f:xm},161:{f:function f0(n,i){var e={};return i<32||(n.l+=16,e.header=sc(n),e.footer=sc(n),n.l+=2),e}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function qf(n,i){for(var e=n.l+i-2,r=n.read_shift(2),a=n.read_shift(2),o=[];n.l<e;)o.push(tg(n));if(n.l!==e)throw new Error("MulRK read error");var d=n.read_shift(2);if(o.length!=d-a+1)throw new Error("MulRK length mismatch");return{r,c:a,C:d,rkrec:o}}},190:{f:function kd(n,i){for(var e=n.l+i-2,r=n.read_shift(2),a=n.read_shift(2),o=[];n.l<e;)o.push(n.read_shift(2));if(n.l!==e)throw new Error("MulBlank read error");var d=n.read_shift(2);if(o.length!=d-a+1)throw new Error("MulBlank length mismatch");return{r,c:a,C:d,ixfe:o}}},193:{f:Vl},197:{},198:{},199:{},200:{},201:{},202:{f:Lo},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ps},220:{},221:{f:Lo},222:{},224:{f:function yv(n,i,e){var r={};return r.ifnt=n.read_shift(2),r.numFmtId=n.read_shift(2),r.flags=n.read_shift(2),r.fStyle=r.flags>>2&1,r.data=function Td(n,i,e,r){var a={},o=n.read_shift(4),d=n.read_shift(4),p=n.read_shift(4),D=n.read_shift(2);return a.patternType=zt[p>>26],r.cellStyles&&(a.alc=7&o,a.fWrap=o>>3&1,a.alcV=o>>4&7,a.fJustLast=o>>7&1,a.trot=o>>8&255,a.cIndent=o>>16&15,a.fShrinkToFit=o>>20&1,a.iReadOrder=o>>22&2,a.fAtrNum=o>>26&1,a.fAtrFnt=o>>27&1,a.fAtrAlc=o>>28&1,a.fAtrBdr=o>>29&1,a.fAtrPat=o>>30&1,a.fAtrProt=o>>31&1,a.dgLeft=15&d,a.dgRight=d>>4&15,a.dgTop=d>>8&15,a.dgBottom=d>>12&15,a.icvLeft=d>>16&127,a.icvRight=d>>23&127,a.grbitDiag=d>>30&3,a.icvTop=127&p,a.icvBottom=p>>7&127,a.icvDiag=p>>14&127,a.dgDiag=p>>21&15,a.icvFore=127&D,a.icvBack=D>>7&127,a.fsxButton=D>>14&1),a}(n,0,0,e),r}},225:{f:function $l(n,i){return 0===i||n.read_shift(2),1200}},226:{f:Vl},227:{},229:{f:function vm(n,i){for(var e=[],r=n.read_shift(2);r--;)e.push(Ih(n));return e}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function Ed(n,i){for(var e=n.l+i,r=n.read_shift(4),a=n.read_shift(4),o=[],d=0;d!=a&&n.l<e;++d)o.push(Qm(n));return o.Count=r,o.Unique=a,o}},253:{f:function pf(n){var i=ru(n);return i.isst=n.read_shift(4),i}},255:{f:function _v(n,i){var e={};return e.dsst=n.read_shift(2),n.l+=i-2,e}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:nh},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Lo},353:{f:Vl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function d0(n,i,e){var r=n.l+i,a=n.read_shift(2),o=n.read_shift(2);if(e.sbcch=o,1025==o||14849==o)return[o,a];if(o<1||o>255)throw new Error("Unexpected SupBook type: "+o);for(var d=_u(n,o),p=[];r>n.l;)p.push(jf(n));return[o,a,d,p]}},431:{f:Lo},432:{},433:{},434:{},437:{},438:{f:function zu(n,i,e){var r=n.l,a="";try{n.l+=4,-1==[0,5,7,11,12,14].indexOf((e.lastobj||{cmo:[0,0]}).cmo[1])?n.l+=6:function a0(n){var i=n.read_shift(1);n.l++;var e=n.read_shift(2);n.l+=2}(n);var p=n.read_shift(2);n.read_shift(2),Ps(n);var D=n.read_shift(2);n.l+=D;for(var P=1;P<n.lens.length-1;++P){if(n.l-r!=n.lens[P])throw new Error("TxO: bad continue record");var B=n[n.l];if((a+=_u(n,n.lens[P+1]-n.lens[P]-1)).length>=(B?p:2*p))break}if(a.length!==p&&a.length!==2*p)throw new Error("cchText: "+p+" != "+a.length);return n.l=r+i,{t:a}}catch{return n.l=r+i,{t:a}}}},439:{f:Lo},440:{f:function Wh(n,i){var e=Ih(n);n.l+=16;var r=function sm(n,i){var e=n.l+i,r=n.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var a=n.read_shift(2);n.l+=2;var o,d,p,D,B,te,P="";16&a&&(o=oh(n)),128&a&&(d=oh(n)),257==(257&a)&&(p=oh(n)),1==(257&a)&&(D=function sh(n,i){var e=n.read_shift(16);switch(e){case"e0c9ea79f9bace118c8200aa004ba90b":return function nl(n){var i=n.read_shift(4),e=n.l,r=!1;i>24&&(n.l+=i-24,"795881f43b1d7f48af2c825dc4852763"===n.read_shift(16)&&(r=!0),n.l=e);var a=n.read_shift((r?i-24:i)>>1,"utf16le").replace(_n,"");return r&&(n.l+=24),a}(n);case"0303000000000000c000000000000046":return function zr(n){for(var i=n.read_shift(2),e="";i-- >0;)e+="../";var r=n.read_shift(0,"lpstr-ansi");if(n.l+=2,57005!=n.read_shift(2))throw new Error("Bad FileMoniker");if(0===n.read_shift(4))return e+r.replace(/\\/g,"/");var o=n.read_shift(4);if(3!=n.read_shift(2))throw new Error("Bad FileMoniker");return e+n.read_shift(o>>1,"utf16le").replace(_n,"")}(n);default:throw new Error("Unsupported Moniker "+e)}}(n)),8&a&&(P=oh(n)),32&a&&(B=n.read_shift(16)),64&a&&(te=iu(n)),n.l=e;var ae=d||p||D||"";ae&&P&&(ae+="#"+P),ae||(ae="#"+P),2&a&&"/"==ae.charAt(0)&&"/"!=ae.charAt(1)&&(ae="file://"+ae);var oe={Target:ae};return B&&(oe.guid=B),te&&(oe.time=te),o&&(oe.Tooltip=o),oe}(n,i-24);return[e,r]}},441:{},442:{f:jf},443:{},444:{f:Ps},445:{},446:{},448:{f:Vl},449:{f:function ff(n){return n.read_shift(2),n.read_shift(4)},r:2},450:{f:Vl},512:{f:Yd},513:{f:fg},515:{f:function gf(n,i,e){e.biffguess&&2==e.biff&&(e.biff=5);var r=ru(n),a=sc(n);return r.val=a,r}},516:{f:function rg(n,i,e){e.biffguess&&2==e.biff&&(e.biff=5);var a=ru(n);2==e.biff&&n.l++;var o=jf(n,0,e);return a.val=o,a}},517:{f:mm},519:{f:p0},520:{f:function ng(n){var i={};i.r=n.read_shift(2),i.c=n.read_shift(2),i.cnt=n.read_shift(2)-i.c;var e=n.read_shift(2);n.l+=4;var r=n.read_shift(1);return n.l+=3,7&r&&(i.level=7&r),32&r&&(i.hidden=!0),64&r&&(i.hpt=e/20),i}},523:{},545:{f:Kf},549:{f:zd},566:{},574:{f:function fm(n,i,e){return e&&e.biff>=2&&e.biff<5?{}:{RTL:64&n.read_shift(2)}}},638:{f:function mf(n){var i=n.read_shift(2),e=n.read_shift(2),r=tg(n);return{r:i,c:e,ixfe:r[0],rknum:r[1]}}},659:{},1048:{},1054:{f:function jc(n,i,e){return[n.read_shift(2),Ul(n,0,e)]}},1084:{},1212:{f:function og(n,i,e){var r=um(n);n.l++;var a=n.read_shift(1);return[Nm(n,i-=8,e),a,r]}},2048:{f:function ao(n,i){n.read_shift(2);var e=Ih(n),r=n.read_shift((i-10)/2,"dbcs-cont");return[e,r=r.replace(_n,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:au},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Vl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function Sc(n){n.l+=2;var i={cxfs:0,crc:0};return i.cxfs=n.read_shift(2),i.crc=n.read_shift(4),i},r:12},2173:{f:function ef(n,i){n.l+=2;var r=n.read_shift(2);n.l+=2;for(var a=n.read_shift(2),o=[];a-- >0;)o.push(P_(n));return{ixfe:r,ext:o}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Lo,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function Rp(n,i,e){if(!(e.biff<8)){var r=n.read_shift(2),a=n.read_shift(2);return[_u(n,r,e),_u(n,a,e)]}n.l+=i},r:12},2197:{},2198:{f:function Ky(n,i,e){var r=n.l+i;if(124226!==n.read_shift(4)){if(!e.cellStyles)return void(n.l=r);var d,o=n.slice(n.l);n.l=r;try{d=Js(o,{type:"array"})}catch{return}var p=vo(d,"theme/theme/theme1.xml",!0);if(p)return Af(p,e)}},r:12},2199:{},2200:{},2201:{},2202:{f:function gm(n){return[0!==n.read_shift(4),0!==n.read_shift(4),n.read_shift(4)]},r:12},2203:{f:Vl},2204:{},2205:{},2206:{},2207:{},2211:{f:function o0(n){var i=function xu(n){var i=n.read_shift(2),e=n.read_shift(2);return n.l+=8,{type:i,flags:e}}(n);if(2211!=i.type)throw new Error("Invalid Future Record "+i.type);return 0!==n.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ps},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function Jf(n,i,e){var r={area:!1};if(5!=e.biff)return n.l+=i,r;var a=n.read_shift(1);return n.l+=3,16&a&&(r.area=!0),r}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function Gd(n){for(var i=n.read_shift(2),e=[];i-- >0;)e.push(om(n));return e}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Yd},1:{},2:{f:function wu(n){var i=ru(n);++n.l;var e=n.read_shift(2);return i.t="n",i.val=e,i}},3:{f:function xv(n){var i=ru(n);++n.l;var e=sc(n);return i.t="n",i.val=e,i}},4:{f:function m0(n,i,e){e.biffguess&&5==e.biff&&(e.biff=2);var r=ru(n);++n.l;var a=Ul(n,0,e);return r.t="str",r.val=a,r}},5:{f:mm},7:{f:function Lp(n){var i=n.read_shift(1);return 0===i?(n.l++,""):n.read_shift(i,"sbcs-cont")}},8:{},9:{f:au},11:{},22:{f:Ps},30:{f:l0},31:{},32:{},33:{f:Kf},36:{},37:{f:zd},50:{f:function bm(n,i){n.l+=6,n.l+=2,n.l+=1,n.l+=3,n.l+=1,n.l+=i-13}},62:{},52:{},67:{},68:{f:Ps},69:{},86:{},126:{},127:{f:function pg(n){var i=n.read_shift(2),e=n.read_shift(2),r=n.read_shift(4),a={fmt:i,env:e,len:r,data:n.slice(n.l,n.l+r)};return n.l+=r,a}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function Dl(n,i,e){var r=n.l+i,a=ru(n),o=n.read_shift(2),d=_u(n,o,e);return n.l=r,a.t="str",a.val=d,a}},223:{},234:{},354:{},421:{},518:{f:Fg},521:{f:au},536:{f:_f},547:{f:Zf},561:{},579:{},1030:{f:Fg},1033:{f:au},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Br(n,i,e,r){var a=i;if(!isNaN(a)){var o=r||(e||[]).length||0,d=n.next(4);d.write_shift(2,a),d.write_shift(2,o),o>0&&Nl(e)&&n.push(e)}}function $1(n,i,e){return n||(n=W(7)),n.write_shift(2,i),n.write_shift(2,e),n.write_shift(2,0),n.write_shift(1,0),n}function tR(n,i,e,r){if(null!=i.v)switch(i.t){case"d":case"n":var a="d"==i.t?Es(Cs(i.v)):i.v;return void(a==(0|a)&&a>=0&&a<65536?Br(n,2,function Op(n,i,e){var r=W(9);return $1(r,n,i),r.write_shift(2,e),r}(e,r,a)):Br(n,3,function Oh(n,i,e){var r=W(15);return $1(r,n,i),r.write_shift(8,e,"f"),r}(e,r,a)));case"b":case"e":return void Br(n,5,function QM(n,i,e,r){var a=W(9);return $1(a,n,i),am(e,r||"b",a),a}(e,r,i.v,i.t));case"s":case"str":return void Br(n,4,function eR(n,i,e){var r=W(8+2*e.length);return $1(r,n,i),r.write_shift(1,e.length),r.write_shift(e.length,e,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(e,r,(i.v||"").slice(0,255)))}Br(n,1,$1(null,e,r))}function uR(n,i,e,r,a){var o=16+F(a.cellXfs,i,a);if(null!=i.v||i.bf)if(i.bf)Br(n,6,function hp(n,i,e,r,a){var o=yu(i,e,a),d=function i_(n){if(null==n){var i=W(8);return i.write_shift(1,3),i.write_shift(1,0),i.write_shift(2,0),i.write_shift(2,0),i.write_shift(2,65535),i}return oc("number"==typeof n?n:0)}(n.v),p=W(6);p.write_shift(2,33),p.write_shift(4,0);for(var P=W(n.bf.length),B=0;B<n.bf.length;++B)P[B]=n.bf[B];return Bi([o,d,p,P])}(i,e,r,0,o));else switch(i.t){case"d":case"n":Br(n,515,function u0(n,i,e,r){var a=W(14);return yu(n,i,r,a),oc(e,a),a}(e,r,"d"==i.t?Es(Cs(i.v)):i.v,o));break;case"b":case"e":Br(n,517,function Sd(n,i,e,r,a,o){var d=W(8);return yu(n,i,r,d),am(e,o,d),d}(e,r,i.v,o,0,i.t));break;case"s":case"str":a.bookSST?Br(n,253,function Rh(n,i,e,r){var a=W(10);return yu(n,i,r,a),a.write_shift(4,e),a}(e,r,X0(a.Strings,i.v,a.revStrings),o)):Br(n,516,function Xf(n,i,e,r,a){var o=!a||8==a.biff,d=W(+o+8+(1+o)*e.length);return yu(n,i,r,d),d.write_shift(2,e.length),o&&d.write_shift(1,1),d.write_shift((1+o)*e.length,e,o?"utf16le":"sbcs"),d}(e,r,(i.v||"").slice(0,255),o,a));break;default:Br(n,513,yu(e,r,o))}else Br(n,513,yu(e,r,o))}function dR(n,i,e){var B,r=Ie(),a=e.SheetNames[n],o=e.Sheets[a]||{},d=(e||{}).Workbook||{},p=(d.Sheets||[])[n]||{},D=Array.isArray(o),P=8==i.biff,te="",ae=[],oe=ls(o["!ref"]||"A1"),ge=P?65536:16384;if(oe.e.c>255||oe.e.r>=ge){if(i.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");oe.e.c=Math.min(oe.e.c,255),oe.e.r=Math.min(oe.e.c,ge-1)}Br(r,2057,Cd(0,16,i)),Br(r,13,Sl(1)),Br(r,12,Sl(100)),Br(r,15,Vo(!0)),Br(r,17,Vo(!1)),Br(r,16,oc(.001)),Br(r,95,Vo(!0)),Br(r,42,Vo(!1)),Br(r,43,Vo(!1)),Br(r,130,Sl(1)),Br(r,128,function ag(n){var i=W(8);return i.write_shift(4,0),i.write_shift(2,n[0]?n[0]+1:0),i.write_shift(2,n[1]?n[1]+1:0),i}([0,0])),Br(r,131,Vo(!1)),Br(r,132,Vo(!1)),P&&function cR(n,i){if(i){var e=0;i.forEach(function(r,a){++e<=256&&r&&Br(n,125,function Dc(n,i){var e=W(12);e.write_shift(2,i),e.write_shift(2,i),e.write_shift(2,256*n.width),e.write_shift(2,0);var r=0;return n.hidden&&(r|=1),e.write_shift(1,r),e.write_shift(1,r=n.level||0),e.write_shift(2,0),e}(pd(a,r),a))})}}(r,o["!cols"]),Br(r,512,function c0(n,i){var e=8!=i.biff&&i.biff?2:4,r=W(2*e+6);return r.write_shift(e,n.s.r),r.write_shift(e,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}(oe,i)),P&&(o["!links"]=[]);for(var ue=oe.s.r;ue<=oe.e.r;++ue){te=gr(ue);for(var Te=oe.s.c;Te<=oe.e.c;++Te){ue===oe.s.r&&(ae[Te]=Va(Te)),B=ae[Te]+te;var qe=D?(o[ue]||[])[Te]:o[B];qe&&(uR(r,qe,ue,Te,i),P&&qe.l&&o["!links"].push([B,qe.l]))}}var ht=p.CodeName||p.name||a;return P&&Br(r,574,function pm(n){var i=W(18),e=1718;return n&&n.RTL&&(e|=64),i.write_shift(2,e),i.write_shift(4,0),i.write_shift(4,64),i.write_shift(4,0),i.write_shift(4,0),i}((d.Views||[])[0])),P&&(o["!merges"]||[]).length&&Br(r,229,function _m(n){var i=W(2+8*n.length);i.write_shift(2,n.length);for(var e=0;e<n.length;++e)Mh(n[e],i);return i}(o["!merges"])),P&&function lR(n,i){for(var e=0;e<i["!links"].length;++e){var r=i["!links"][e];Br(n,440,Xh(r)),r[1].Tooltip&&Br(n,2048,ug(r))}delete i["!links"]}(r,o),Br(r,442,eg(ht)),P&&function sR(n,i){var e=W(19);e.write_shift(4,2151),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,1),e.write_shift(4,0),Br(n,2151,e),(e=W(39)).write_shift(4,2152),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(2,3),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(2,1),e.write_shift(4,4),e.write_shift(2,0),Mh(ls(i["!ref"]||"A1"),e),e.write_shift(4,4),Br(n,2152,e)}(r,o),Br(r,10),r.end()}function hR(n,i,e){var r=Ie(),a=(n||{}).Workbook||{},o=a.Sheets||[],d=a.WBProps||{},p=8==e.biff,D=5==e.biff;Br(r,2057,Cd(0,5,e)),"xla"==e.bookType&&Br(r,135),Br(r,225,p?Sl(1200):null),Br(r,193,function ih(n,i){i||(i=W(n));for(var e=0;e<n;++e)i.write_shift(1,0);return i}(2)),D&&Br(r,191),D&&Br(r,192),Br(r,226),Br(r,92,function Ap(n,i){var e=!i||8==i.biff,r=W(e?112:54);for(r.write_shift(8==i.biff?2:1,7),e&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(e?0:536870912));r.l<r.length;)r.write_shift(1,e?0:32);return r}(0,e)),Br(r,66,Sl(p?1200:1252)),p&&Br(r,353,Sl(0)),p&&Br(r,448),Br(r,317,function hg(n){for(var i=W(2*n),e=0;e<n;++e)i.write_shift(2,e+1);return i}(n.SheetNames.length)),p&&n.vbaraw&&Br(r,211),p&&n.vbaraw&&Br(r,442,eg(d.CodeName||"ThisWorkbook")),Br(r,156,Sl(17)),Br(r,25,Vo(!1)),Br(r,18,Vo(!1)),Br(r,19,Sl(0)),p&&Br(r,431,Vo(!1)),p&&Br(r,444,Sl(0)),Br(r,61,function hm(){var n=W(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}()),Br(r,64,Vo(!1)),Br(r,141,Sl(0)),Br(r,34,Vo("true"==function Xx(n){return n.Workbook&&n.Workbook.WBProps&&Qs(n.Workbook.WBProps.date1904)?"true":"false"}(n))),Br(r,14,Vo(!0)),p&&Br(r,439,Vo(!1)),Br(r,218,Sl(0)),function rR(n,i,e){Br(n,49,function Ip(n,i){var e=n.name||"Arial",r=i&&5==i.biff,o=W(r?15+e.length:16+2*e.length);return o.write_shift(2,20*(n.sz||12)),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,e.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*e.length,e,r?"sbcs":"utf16le"),o}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},e))}(r,0,e),function aR(n,i,e){i&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)null!=i[a]&&Br(n,1054,Tc(a,i[a],e))})}(r,n.SSF,e),function oR(n,i){for(var e=0;e<16;++e)Br(n,224,cd({numFmtId:0,style:!0},0,i));i.cellXfs.forEach(function(r){Br(n,224,cd(r,0,i))})}(r,e),p&&Br(r,352,Vo(!1));var B=r.end(),te=Ie();p&&Br(te,140,function uh(n){return n||(n=W(4)),n.write_shift(2,1),n.write_shift(2,1),n}()),p&&e.Strings&&function JM(n,i,e,r){var a=r||(e||[]).length||0;if(a<=8224)return Br(n,i,e,a);var o=i;if(!isNaN(o)){for(var d=e.parts||[],p=0,D=0,P=0;P+(d[p]||8224)<=8224;)P+=d[p]||8224,p++;var B=n.next(4);for(B.write_shift(2,o),B.write_shift(2,P),n.push(e.slice(D,D+P)),D+=P;D<a;){for((B=n.next(4)).write_shift(2,60),P=0;P+(d[p]||8224)<=8224;)P+=d[p]||8224,p++;B.write_shift(2,P),n.push(e.slice(D,D+P)),D+=P}}}(te,252,function s0(n,i){var e=W(8);e.write_shift(4,n.Count),e.write_shift(4,n.Unique);for(var r=[],a=0;a<n.length;++a)r[a]=ah(n[a]);var o=Bi([e].concat(r));return o.parts=[e.length].concat(r.map(function(d){return d.length})),o}(e.Strings)),Br(te,10);var ae=te.end(),oe=Ie(),ge=0,ue=0;for(ue=0;ue<n.SheetNames.length;++ue)ge+=(p?12:11)+(p?2:1)*n.SheetNames[ue].length;var Te=B.length+ge+ae.length;for(ue=0;ue<n.SheetNames.length;++ue)Br(oe,133,ld({pos:Te,hs:(o[ue]||{}).Hidden||0,dt:0,name:n.SheetNames[ue]},e)),Te+=i[ue].length;var ht=oe.end();if(ge!=ht.length)throw new Error("BS8 "+ge+" != "+ht.length);var ut=[];return B.length&&ut.push(B),ht.length&&ut.push(ht),ae.length&&ut.push(ae),Bi(ut)}function yE(n,i){for(var e=0;e<=n.SheetNames.length;++e){var r=n.Sheets[n.SheetNames[e]];r&&r["!ref"]&&Go(r["!ref"]).e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[e]+"' extends beyond column IV (255).  Data may be lost.")}var o=i||{};switch(o.biff||2){case 8:case 5:return function fR(n,i){var e=i||{},r=[];n&&!n.SSF&&(n.SSF=ts(st)),n&&n.SSF&&(na(),Ms(n.SSF),e.revssf=uu(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Ow(e),e.cellXfs=[],F(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var a=0;a<n.SheetNames.length;++a)r[r.length]=dR(a,e,n);return r.unshift(hR(n,r,e)),Bi(r)}(n,i);case 4:case 3:case 2:return function nR(n,i){var e=i||{};null!=Dr&&null==e.dense&&(e.dense=Dr);for(var r=Ie(),a=0,o=0;o<n.SheetNames.length;++o)n.SheetNames[o]==e.sheet&&(a=o);if(0==a&&e.sheet&&n.SheetNames[0]!=e.sheet)throw new Error("Sheet not found: "+e.sheet);return Br(r,4==e.biff?1033:3==e.biff?521:9,Cd(0,16,e)),function iR(n,i,e,r){var d,a=Array.isArray(i),o=ls(i["!ref"]||"A1"),p="",D=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),d=ba(o)}for(var P=o.s.r;P<=o.e.r;++P){p=gr(P);for(var B=o.s.c;B<=o.e.c;++B){P===o.s.r&&(D[B]=Va(B)),d=D[B]+p;var te=a?(i[P]||[])[B]:i[d];te&&tR(n,te,P,B)}}}(r,n.Sheets[n.SheetNames[a]],0,e),Br(r,10),r.end()}(n,i)}throw new Error("invalid type "+o.bookType+" for BIFF")}function xE(n,i){var e=i||{};null!=Dr&&null==e.dense&&(e.dense=Dr);var r=e.dense?[]:{},a=(n=n.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var o=n.match(/<\/table/i),d=a.index,p=o&&o.index||n.length,D=Zd(n.slice(d,p),/(:?<tr[^>]*>)/i,"<tr>"),P=-1,B=0,te=0,ae=0,oe={s:{r:1e7,c:1e7},e:{r:0,c:0}},ge=[];for(d=0;d<D.length;++d){var ue=D[d].trim(),Te=ue.slice(0,3).toLowerCase();if("<tr"!=Te){if("<td"==Te||"<th"==Te){var qe=ue.split(/<\/t[dh]>/i);for(p=0;p<qe.length;++p){var ht=qe[p].trim();if(ht.match(/<t[dh]/i)){for(var ut=ht,mi=0;"<"==ut.charAt(0)&&(mi=ut.indexOf(">"))>-1;)ut=ut.slice(mi+1);for(var zi=0;zi<ge.length;++zi){var vi=ge[zi];vi.s.c==B&&vi.s.r<P&&P<=vi.e.r&&(B=vi.e.c+1,zi=-1)}var Vt=oa(ht.slice(0,ht.indexOf(">")));ae=Vt.colspan?+Vt.colspan:1,((te=+Vt.rowspan)>1||ae>1)&&ge.push({s:{r:P,c:B},e:{r:P+(te||1)-1,c:B+ae-1}});var wi=Vt.t||Vt["data-t"]||"";if(!ut.length){B+=ae;continue}if(ut=sl(ut),oe.s.r>P&&(oe.s.r=P),oe.e.r<P&&(oe.e.r=P),oe.s.c>B&&(oe.s.c=B),oe.e.c<B&&(oe.e.c=B),!ut.length){B+=ae;continue}var Yi={t:"s",v:ut};e.raw||!ut.trim().length||"s"==wi||("TRUE"===ut?Yi={t:"b",v:!0}:"FALSE"===ut?Yi={t:"b",v:!1}:isNaN(bo(ut))?isNaN(zo(ut).getDate())||(Yi={t:"d",v:Cs(ut)},e.cellDates||(Yi={t:"n",v:Es(Yi.v)}),Yi.z=e.dateNF||st[14]):Yi={t:"n",v:bo(ut)}),e.dense?(r[P]||(r[P]=[]),r[P][B]=Yi):r[xa({r:P,c:B})]=Yi,B+=ae}}}}else{if(++P,e.sheetRows&&e.sheetRows<=P){--P;break}B=0}}return r["!ref"]=ba(oe),ge.length&&(r["!merges"]=ge),r}function bE(n,i,e,r){for(var a=n["!merges"]||[],o=[],d=i.s.c;d<=i.e.c;++d){for(var p=0,D=0,P=0;P<a.length;++P)if(!(a[P].s.r>e||a[P].s.c>d||a[P].e.r<e||a[P].e.c<d)){if(a[P].s.r<e||a[P].s.c<d){p=-1;break}p=a[P].e.r-a[P].s.r+1,D=a[P].e.c-a[P].s.c+1;break}if(!(p<0)){var B=xa({r:e,c:d}),te=r.dense?(n[e]||[])[d]:n[B],ae=te&&null!=te.v&&(te.h||Jc(te.w||(se(te),te.w)||""))||"",oe={};p>1&&(oe.rowspan=p),D>1&&(oe.colspan=D),r.editable?ae='<span contenteditable="true">'+ae+"</span>":te&&(oe["data-t"]=te&&te.t||"z",null!=te.v&&(oe["data-v"]=te.v),null!=te.z&&(oe["data-z"]=te.z),te.l&&"#"!=(te.l.Target||"#").charAt(0)&&(ae='<a href="'+te.l.Target+'">'+ae+"</a>")),oe.id=(r.id||"sjs")+"-"+B,o.push(or("td",ae,oe))}}return"<tr>"+o.join("")+"</tr>"}var wE='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',CE="</body></html>";function kE(n,i){var e=i||{},a=null!=e.footer?e.footer:CE,o=[null!=e.header?e.header:wE],d=Go(n["!ref"]);e.dense=Array.isArray(n),o.push(function EE(n,i,e){return[].join("")+"<table"+(e&&e.id?' id="'+e.id+'"':"")+">"}(0,0,e));for(var p=d.s.r;p<=d.e.r;++p)o.push(bE(n,d,p,e));return o.push("</table>"+a),o.join("")}function TE(n,i,e){var r=e||{};null!=Dr&&(r.dense=Dr);var a=0,o=0;if(null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var d="string"==typeof r.origin?Qa(r.origin):r.origin;a=d.r,o=d.c}var p=i.getElementsByTagName("tr"),D=Math.min(r.sheetRows||1e7,p.length),P={s:{r:0,c:0},e:{r:a,c:o}};if(n["!ref"]){var B=Go(n["!ref"]);P.s.r=Math.min(P.s.r,B.s.r),P.s.c=Math.min(P.s.c,B.s.c),P.e.r=Math.max(P.e.r,B.e.r),P.e.c=Math.max(P.e.c,B.e.c),-1==a&&(P.e.r=a=B.e.r+1)}var te=[],ae=0,oe=n["!rows"]||(n["!rows"]=[]),ge=0,ue=0,Te=0,qe=0,ht=0,ut=0;for(n["!cols"]||(n["!cols"]=[]);ge<p.length&&ue<D;++ge){var mi=p[ge];if(DE(mi)){if(r.display)continue;oe[ue]={hidden:!0}}var zi=mi.children;for(Te=qe=0;Te<zi.length;++Te){var vi=zi[Te];if(!r.display||!DE(vi)){var Vt=vi.hasAttribute("data-v")?vi.getAttribute("data-v"):vi.hasAttribute("v")?vi.getAttribute("v"):sl(vi.innerHTML),wi=vi.getAttribute("data-z")||vi.getAttribute("z");for(ae=0;ae<te.length;++ae){var Yi=te[ae];Yi.s.c==qe+o&&Yi.s.r<ue+a&&ue+a<=Yi.e.r&&(qe=Yi.e.c+1-o,ae=-1)}ut=+vi.getAttribute("colspan")||1,((ht=+vi.getAttribute("rowspan")||1)>1||ut>1)&&te.push({s:{r:ue+a,c:qe+o},e:{r:ue+a+(ht||1)-1,c:qe+o+(ut||1)-1}});var hn={t:"s",v:Vt},Tn=vi.getAttribute("data-t")||vi.getAttribute("t")||"";null!=Vt&&(0==Vt.length?hn.t=Tn||"z":r.raw||0==Vt.trim().length||"s"==Tn||("TRUE"===Vt?hn={t:"b",v:!0}:"FALSE"===Vt?hn={t:"b",v:!1}:isNaN(bo(Vt))?isNaN(zo(Vt).getDate())||(hn={t:"d",v:Cs(Vt)},r.cellDates||(hn={t:"n",v:Es(hn.v)}),hn.z=r.dateNF||st[14]):hn={t:"n",v:bo(Vt)})),void 0===hn.z&&null!=wi&&(hn.z=wi);var Wi="",Cr=vi.getElementsByTagName("A");if(Cr&&Cr.length)for(var aa=0;aa<Cr.length&&(!Cr[aa].hasAttribute("href")||"#"==(Wi=Cr[aa].getAttribute("href")).charAt(0));++aa);Wi&&"#"!=Wi.charAt(0)&&(hn.l={Target:Wi}),r.dense?(n[ue+a]||(n[ue+a]=[]),n[ue+a][qe+o]=hn):n[xa({c:qe+o,r:ue+a})]=hn,P.e.c<qe+o&&(P.e.c=qe+o),qe+=ut}}++ue}return te.length&&(n["!merges"]=(n["!merges"]||[]).concat(te)),P.e.r=Math.max(P.e.r,ue-1+a),n["!ref"]=ba(P),ue>=D&&(n["!fullref"]=ba((P.e.r=p.length-ge+ue-1+a,P))),n}function SE(n,i){return TE((i||{}).dense?[]:{},n,i)}function DE(n){var i="",e=function gR(n){return n.ownerDocument.defaultView&&"function"==typeof n.ownerDocument.defaultView.getComputedStyle?n.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(n);return e&&(i=e(n).getPropertyValue("display")),i||(i=n.style&&n.style.display),"none"===i}function vR(n){var i=n.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[qa(i.replace(/<[^>]*>/g,""))]}var AE={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function IE(n,i){var e=i||{};null!=Dr&&null==e.dense&&(e.dense=Dr);var o,d,B,te,ue,Te,r=hu(n),a=[],p={name:""},D="",P=0,ae={},oe=[],ge=e.dense?[]:{},qe={value:""},ht="",ut=0,zi=[],vi=-1,Vt=-1,wi={s:{r:1e6,c:1e7},e:{r:0,c:0}},Yi=0,hn={},Tn=[],Wi={},Cr=0,aa=0,Sr=[],La=1,ma=1,qs=[],Ur={Names:[]},Ca={},qn=["",""],gi=[],mn={},Ti="",bi=0,Yn=!1,Rr=!1,_r=0;for(Cc.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");ue=Cc.exec(r);)switch(ue[3]=ue[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===ue[1]?(ge["!ref"]=wi.e.c>=wi.s.c&&wi.e.r>=wi.s.r?ba(wi):"A1:A1",e.sheetRows>0&&e.sheetRows<=wi.e.r&&(ge["!fullref"]=ge["!ref"],wi.e.r=e.sheetRows-1,ge["!ref"]=ba(wi)),Tn.length&&(ge["!merges"]=Tn),Sr.length&&(ge["!rows"]=Sr),B.name=B.\u540d\u79f0||B.name,typeof JSON<"u"&&JSON.stringify(B),oe.push(B.name),ae[B.name]=ge,Rr=!1):"/"!==ue[0].charAt(ue[0].length-2)&&(B=oa(ue[0],!1),vi=Vt=-1,wi.s.r=wi.s.c=1e7,wi.e.r=wi.e.c=0,ge=e.dense?[]:{},Tn=[],Sr=[],Rr=!0);break;case"table-row-group":"/"===ue[1]?--Yi:++Yi;break;case"table-row":case"\u884c":if("/"===ue[1]){vi+=La,La=1;break}if((te=oa(ue[0],!1)).\u884c\u53f7?vi=te.\u884c\u53f7-1:-1==vi&&(vi=0),(La=+te["number-rows-repeated"]||1)<10)for(_r=0;_r<La;++_r)Yi>0&&(Sr[vi+_r]={level:Yi});Vt=-1;break;case"covered-table-cell":"/"!==ue[1]&&++Vt,e.sheetStubs&&(e.dense?(ge[vi]||(ge[vi]=[]),ge[vi][Vt]={t:"z"}):ge[xa({r:vi,c:Vt})]={t:"z"}),ht="",zi=[];break;case"table-cell":case"\u6570\u636e":if("/"===ue[0].charAt(ue[0].length-2))++Vt,qe=oa(ue[0],!1),ma=parseInt(qe["number-columns-repeated"]||"1",10),Te={t:"z",v:null},qe.formula&&0!=e.cellFormula&&(Te.f=W0(qa(qe.formula))),"string"==(qe.\u6570\u636e\u7c7b\u578b||qe["value-type"])&&(Te.t="s",Te.v=qa(qe["string-value"]||""),e.dense?(ge[vi]||(ge[vi]=[]),ge[vi][Vt]=Te):ge[xa({r:vi,c:Vt})]=Te),Vt+=ma-1;else if("/"!==ue[1]){ht="",ut=0,zi=[],ma=1;var kr=La?vi+La-1:vi;if(++Vt>wi.e.c&&(wi.e.c=Vt),Vt<wi.s.c&&(wi.s.c=Vt),vi<wi.s.r&&(wi.s.r=vi),kr>wi.e.r&&(wi.e.r=kr),gi=[],mn={},Te={t:(qe=oa(ue[0],!1)).\u6570\u636e\u7c7b\u578b||qe["value-type"],v:null},e.cellFormula)if(qe.formula&&(qe.formula=qa(qe.formula)),qe["number-matrix-columns-spanned"]&&qe["number-matrix-rows-spanned"]&&(Cr=parseInt(qe["number-matrix-rows-spanned"],10)||0,aa=parseInt(qe["number-matrix-columns-spanned"],10)||0,Te.F=ba(Wi={s:{r:vi,c:Vt},e:{r:vi+Cr-1,c:Vt+aa-1}}),qs.push([Wi,Te.F])),qe.formula)Te.f=W0(qe.formula);else for(_r=0;_r<qs.length;++_r)vi>=qs[_r][0].s.r&&vi<=qs[_r][0].e.r&&Vt>=qs[_r][0].s.c&&Vt<=qs[_r][0].e.c&&(Te.F=qs[_r][1]);switch((qe["number-columns-spanned"]||qe["number-rows-spanned"])&&(Cr=parseInt(qe["number-rows-spanned"],10)||0,aa=parseInt(qe["number-columns-spanned"],10)||0,Tn.push(Wi={s:{r:vi,c:Vt},e:{r:vi+Cr-1,c:Vt+aa-1}})),qe["number-columns-repeated"]&&(ma=parseInt(qe["number-columns-repeated"],10)),Te.t){case"boolean":Te.t="b",Te.v=Qs(qe["boolean-value"]);break;case"float":case"percentage":case"currency":Te.t="n",Te.v=parseFloat(qe.value);break;case"date":Te.t="d",Te.v=Cs(qe["date-value"]),e.cellDates||(Te.t="n",Te.v=Es(Te.v)),Te.z="m/d/yy";break;case"time":Te.t="n",Te.v=Au(qe["time-value"])/86400,e.cellDates&&(Te.t="d",Te.v=Bc(Te.v)),Te.z="HH:MM:SS";break;case"number":Te.t="n",Te.v=parseFloat(qe.\u6570\u636e\u6570\u503c);break;default:if("string"!==Te.t&&"text"!==Te.t&&Te.t)throw new Error("Unsupported value type "+Te.t);Te.t="s",null!=qe["string-value"]&&(ht=qa(qe["string-value"]),zi=[])}}else{if(Yn=!1,"s"===Te.t&&(Te.v=ht||"",zi.length&&(Te.R=zi),Yn=0==ut),Ca.Target&&(Te.l=Ca),gi.length>0&&(Te.c=gi,gi=[]),ht&&!1!==e.cellText&&(Te.w=ht),Yn&&(Te.t="z",delete Te.v),(!Yn||e.sheetStubs)&&!(e.sheetRows&&e.sheetRows<=vi))for(var er=0;er<La;++er){if(ma=parseInt(qe["number-columns-repeated"]||"1",10),e.dense)for(ge[vi+er]||(ge[vi+er]=[]),ge[vi+er][Vt]=0==er?Te:ts(Te);--ma>0;)ge[vi+er][Vt+ma]=ts(Te);else for(ge[xa({r:vi+er,c:Vt})]=Te;--ma>0;)ge[xa({r:vi+er,c:Vt+ma})]=ts(Te);wi.e.c<=Vt&&(wi.e.c=Vt)}Vt+=(ma=parseInt(qe["number-columns-repeated"]||"1",10))-1,ma=0,Te={},ht="",zi=[]}Ca={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===ue[1]){if((o=a.pop())[0]!==ue[3])throw"Bad state: "+o}else"/"!==ue[0].charAt(ue[0].length-2)&&a.push([ue[3],!0]);break;case"annotation":if("/"===ue[1]){if((o=a.pop())[0]!==ue[3])throw"Bad state: "+o;mn.t=ht,zi.length&&(mn.R=zi),mn.a=Ti,gi.push(mn)}else"/"!==ue[0].charAt(ue[0].length-2)&&a.push([ue[3],!1]);Ti="",bi=0,ht="",ut=0,zi=[];break;case"creator":"/"===ue[1]?Ti=r.slice(bi,ue.index):bi=ue.index+ue[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===ue[1]){if((o=a.pop())[0]!==ue[3])throw"Bad state: "+o}else"/"!==ue[0].charAt(ue[0].length-2)&&a.push([ue[3],!1]);ht="",ut=0,zi=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===ue[1]){if(hn[p.name]=D,(o=a.pop())[0]!==ue[3])throw"Bad state: "+o}else"/"!==ue[0].charAt(ue[0].length-2)&&(D="",p=oa(ue[0],!1),a.push([ue[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":d=oa(ue[0],!1),D+=AE[ue[3]]["long"===d.style?1:0]}break;case"text":if("/>"===ue[0].slice(-2))break;if("/"===ue[1])switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":D+=r.slice(P,ue.index)}else P=ue.index+ue[0].length;break;case"named-range":qn=Xp((d=oa(ue[0],!1))["cell-range-address"]);var Bs={Name:d.name,Ref:qn[0]+"!"+qn[1]};Rr&&(Bs.Sheet=oe.length),Ur.Names.push(Bs);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if("/"!==ue[1]||qe&&qe["string-value"])oa(ue[0],!1),ut=ue.index+ue[0].length;else{var ui=vR(r.slice(ut,ue.index));ht=(ht.length>0?ht+"\n":"")+ui[0]}break;case"database-range":if("/"===ue[1])break;try{ae[(qn=Xp(oa(ue[0])["target-range-address"]))[0]]["!autofilter"]={ref:qn[1]}}catch{}break;case"a":if("/"!==ue[1]){if(!(Ca=oa(ue[0],!1)).href)break;Ca.Target=qa(Ca.href),delete Ca.href,"#"==Ca.Target.charAt(0)&&Ca.Target.indexOf(".")>-1?(qn=Xp(Ca.Target.slice(1)),Ca.Target="#"+qn[0]+"!"+qn[1]):Ca.Target.match(/^\.\.[\\\/]/)&&(Ca.Target=Ca.Target.slice(3))}break;default:switch(ue[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(e.WTF)throw new Error(ue)}}var Qo={Sheets:ae,SheetNames:oe,Workbook:Ur};return e.bookSheets&&delete Qo.Sheets,Qo}function RE(n,i){return IE(n,i)}var _R=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),i="<office:document-styles "+ad({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Ys+i}}(),OE=function(){var n=function(o){return $a(o).replace(/  +/g,function(d){return'<text:s text:c="'+d.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},i="          <table:table-cell />\n",r=function(o,d,p){var D=[];D.push('      <table:table table:name="'+$a(d.SheetNames[p])+'" table:style-name="ta1">\n');var P=0,B=0,te=Go(o["!ref"]||"A1"),ae=o["!merges"]||[],oe=0,ge=Array.isArray(o);if(o["!cols"])for(B=0;B<=te.e.c;++B)D.push("        <table:table-column"+(o["!cols"][B]?' table:style-name="co'+o["!cols"][B].ods+'"':"")+"></table:table-column>\n");var Te=o["!rows"]||[];for(P=0;P<te.s.r;++P)D.push("        <table:table-row"+(Te[P]?' table:style-name="ro'+Te[P].ods+'"':"")+"></table:table-row>\n");for(;P<=te.e.r;++P){for(D.push("        <table:table-row"+(Te[P]?' table:style-name="ro'+Te[P].ods+'"':"")+">\n"),B=0;B<te.s.c;++B)D.push(i);for(;B<=te.e.c;++B){var qe=!1,ht={},ut="";for(oe=0;oe!=ae.length;++oe)if(!(ae[oe].s.c>B||ae[oe].s.r>P||ae[oe].e.c<B||ae[oe].e.r<P)){(ae[oe].s.c!=B||ae[oe].s.r!=P)&&(qe=!0),ht["table:number-columns-spanned"]=ae[oe].e.c-ae[oe].s.c+1,ht["table:number-rows-spanned"]=ae[oe].e.r-ae[oe].s.r+1;break}if(qe)D.push("          <table:covered-table-cell/>\n");else{var mi=xa({r:P,c:B}),zi=ge?(o[P]||[])[B]:o[mi];if(zi&&zi.f&&(ht["table:formula"]=$a(S1(zi.f)),zi.F&&zi.F.slice(0,mi.length)==mi)){var vi=Go(zi.F);ht["table:number-matrix-columns-spanned"]=vi.e.c-vi.s.c+1,ht["table:number-matrix-rows-spanned"]=vi.e.r-vi.s.r+1}if(zi){switch(zi.t){case"b":ut=zi.v?"TRUE":"FALSE",ht["office:value-type"]="boolean",ht["office:boolean-value"]=zi.v?"true":"false";break;case"n":ut=zi.w||String(zi.v||0),ht["office:value-type"]="float",ht["office:value"]=zi.v||0;break;case"s":case"str":ut=null==zi.v?"":zi.v,ht["office:value-type"]="string";break;case"d":ut=zi.w||Cs(zi.v).toISOString(),ht["office:value-type"]="date",ht["office:date-value"]=Cs(zi.v).toISOString(),ht["table:style-name"]="ce1";break;default:D.push(i);continue}var Vt=n(ut);if(zi.l&&zi.l.Target){var wi=zi.l.Target;"#"!=(wi="#"==wi.charAt(0)?"#"+D1(wi.slice(1)):wi).charAt(0)&&!wi.match(/^\w+:/)&&(wi="../"+wi),Vt=or("text:a",Vt,{"xlink:href":wi.replace(/&/g,"&amp;")})}D.push("          "+or("table:table-cell",or("text:p",Vt,{}),ht)+"\n")}else D.push(i)}}D.push("        </table:table-row>\n")}return D.push("      </table:table>\n"),D.join("")};return function(d,p){var D=[Ys],P=ad({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),B=ad({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==p.bookType?(D.push("<office:document"+P+B+">\n"),D.push(Ua().replace(/office:document-meta/g,"office:meta"))):D.push("<office:document-content"+P+">\n"),function(o,d){o.push(" <office:automatic-styles>\n"),o.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),o.push('   <number:month number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push('   <number:day number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push("   <number:year/>\n"),o.push("  </number:date-style>\n");var p=0;d.SheetNames.map(function(P){return d.Sheets[P]}).forEach(function(P){if(P&&P["!cols"])for(var B=0;B<P["!cols"].length;++B)if(P["!cols"][B]){var te=P["!cols"][B];if(null==te.width&&null==te.wpx&&null==te.wch)continue;hd(te),te.ods=p;var ae=P["!cols"][B].wpx+"px";o.push('  <style:style style:name="co'+p+'" style:family="table-column">\n'),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+ae+'"/>\n'),o.push("  </style:style>\n"),++p}});var D=0;d.SheetNames.map(function(P){return d.Sheets[P]}).forEach(function(P){if(P&&P["!rows"])for(var B=0;B<P["!rows"].length;++B)if(P["!rows"][B]){P["!rows"][B].ods=D;var te=P["!rows"][B].hpx+"px";o.push('  <style:style style:name="ro'+D+'" style:family="table-row">\n'),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+te+'"/>\n'),o.push("  </style:style>\n"),++D}}),o.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),o.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),o.push("  </style:style>\n"),o.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),o.push(" </office:automatic-styles>\n")}(D,d),D.push("  <office:body>\n"),D.push("    <office:spreadsheet>\n");for(var te=0;te!=d.SheetNames.length;++te)D.push(r(d.Sheets[d.SheetNames[te]],d,te));return D.push("    </office:spreadsheet>\n"),D.push("  </office:body>\n"),D.push("fods"==p.bookType?"</office:document>":"</office:document-content>"),D.join("")}}();function LE(n,i){if("fods"==i.bookType)return OE(n,i);var e=ed(),r="",a=[],o=[];return Oa(e,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Oa(e,r="content.xml",OE(n,i)),a.push([r,"text/xml"]),o.push([r,"ContentFile"]),Oa(e,r="styles.xml",_R(n,i)),a.push([r,"text/xml"]),o.push([r,"StylesFile"]),Oa(e,r="meta.xml",Ys+Ua()),a.push([r,"text/xml"]),o.push([r,"MetadataFile"]),Oa(e,r="manifest.rdf",function ca(n){var i=[Ys];i.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var e=0;e!=n.length;++e)i.push(wa(n[e][0],n[e][1])),i.push(Ir("",n[e][0]));return i.push(wa("","Document","pkg")),i.push("</rdf:RDF>"),i.join("")}(o)),a.push([r,"application/rdf+xml"]),Oa(e,r="META-INF/manifest.xml",function ea(n){var i=[Ys];i.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),i.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var e=0;e<n.length;++e)i.push('  <manifest:file-entry manifest:full-path="'+n[e][0]+'" manifest:media-type="'+n[e][1]+'"/>\n');return i.push("</manifest:manifest>"),i.join("")}(a)),e}function o_(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Sw(n){return typeof TextDecoder<"u"?(new TextDecoder).decode(n):Rs(Ci(n))}function yR(n){return typeof TextEncoder<"u"?(new TextEncoder).encode(n):kt(_o(n))}function Q0(n){var i=n.reduce(function(a,o){return a+o.length},0),e=new Uint8Array(i),r=0;return n.forEach(function(a){e.set(a,r),r+=a.length}),e}function PE(n){return 16843009*((n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135)>>>24}function W1(n,i){var e=i?i[0]:0,r=127&n[e];e:if(n[e++]>=128&&(r|=(127&n[e])<<7,n[e++]<128||(r|=(127&n[e])<<14,n[e++]<128)||(r|=(127&n[e])<<21,n[e++]<128)||(r+=(127&n[e])*Math.pow(2,28),++e,n[e++]<128)||(r+=(127&n[e])*Math.pow(2,35),++e,n[e++]<128)||(r+=(127&n[e])*Math.pow(2,42),++e,n[e++]<128)))break e;return i&&(i[0]=e),r}function al(n){var i=new Uint8Array(7);i[0]=127&n;var e=1;e:if(n>127){if(i[e-1]|=128,i[e]=n>>7&127,++e,n<=16383||(i[e-1]|=128,i[e]=n>>14&127,++e,n<=2097151)||(i[e-1]|=128,i[e]=n>>21&127,++e,n<=268435455)||(i[e-1]|=128,i[e]=n/256>>>21&127,++e,n<=34359738367)||(i[e-1]|=128,i[e]=n/65536>>>21&127,++e,n<=4398046511103))break e;i[e-1]|=128,i[e]=n/16777216>>>21&127,++e}return i.slice(0,e)}function cu(n){var i=0,e=127&n[i];e:if(n[i++]>=128){if(e|=(127&n[i])<<7,n[i++]<128||(e|=(127&n[i])<<14,n[i++]<128)||(e|=(127&n[i])<<21,n[i++]<128))break e;e|=(127&n[i])<<28}return e}function jo(n){for(var i=[],e=[0];e[0]<n.length;){var p,r=e[0],a=W1(n,e),o=7&a,d=0;if(0==(a=Math.floor(a/8)))break;switch(o){case 0:for(var D=e[0];n[e[0]++]>=128;);p=n.slice(D,e[0]);break;case 5:p=n.slice(e[0],e[0]+(d=4)),e[0]+=d;break;case 1:p=n.slice(e[0],e[0]+(d=8)),e[0]+=d;break;case 2:d=W1(n,e),p=n.slice(e[0],e[0]+d),e[0]+=d;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(a," at offset ").concat(r))}var P={data:p,type:o};null==i[a]?i[a]=[P]:i[a].push(P)}return i}function Id(n){var i=[];return n.forEach(function(e,r){e.forEach(function(a){a.data&&(i.push(al(8*r+a.type)),2==a.type&&i.push(al(a.data.length)),i.push(a.data))})}),Q0(i)}function Dw(n,i){return n?.map(function(e){return i(e.data)})||[]}function mp(n){for(var i,e=[],r=[0];r[0]<n.length;){var a=W1(n,r),o=jo(n.slice(r[0],r[0]+a));r[0]+=a;var d={id:cu(o[1][0].data),messages:[]};o[2].forEach(function(p){var D=jo(p.data),P=cu(D[3][0].data);d.messages.push({meta:D,data:n.slice(r[0],r[0]+P)}),r[0]+=P}),null!=(i=o[3])&&i[0]&&(d.merge=cu(o[3][0].data)>>>0>0),e.push(d)}return e}function fy(n){var i=[];return n.forEach(function(e){var r=[];r[1]=[{data:al(e.id),type:0}],r[2]=[],null!=e.merge&&(r[3]=[{data:al(+!!e.merge),type:0}]);var a=[];e.messages.forEach(function(d){a.push(d.data),d.meta[3]=[{type:0,data:al(d.data.length)}],r[2].push({data:Id(d.meta),type:2})});var o=Id(r);i.push(al(o.length)),i.push(o),a.forEach(function(d){return i.push(d)})}),Q0(i)}function CR(n,i){if(0!=n)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var e=[0],r=W1(i,e),a=[];e[0]<i.length;){var o=3&i[e[0]];if(0!=o){var D=0,P=0;if(1==o?(P=4+(i[e[0]]>>2&7),D=(224&i[e[0]++])<<3,D|=i[e[0]++]):(P=1+(i[e[0]++]>>2),2==o?(D=i[e[0]]|i[e[0]+1]<<8,e[0]+=2):(D=(i[e[0]]|i[e[0]+1]<<8|i[e[0]+2]<<16|i[e[0]+3]<<24)>>>0,e[0]+=4)),a=[Q0(a)],0==D)throw new Error("Invalid offset 0");if(D>a[0].length)throw new Error("Invalid offset beyond length");if(P>=D)for(a.push(a[0].slice(-D)),P-=D;P>=a[a.length-1].length;)a.push(a[a.length-1]),P-=a[a.length-1].length;a.push(a[0].slice(-D,-D+P))}else{var d=i[e[0]++]>>2;if(d<60)++d;else{var p=d-59;d=i[e[0]],p>1&&(d|=i[e[0]+1]<<8),p>2&&(d|=i[e[0]+2]<<16),p>3&&(d|=i[e[0]+3]<<24),d>>>=0,d++,e[0]+=p}a.push(i.slice(e[0],e[0]+d)),e[0]+=d}}var B=Q0(a);if(B.length!=r)throw new Error("Unexpected length: ".concat(B.length," != ").concat(r));return B}function gp(n){for(var i=[],e=0;e<n.length;){var r=n[e++],a=n[e]|n[e+1]<<8|n[e+2]<<16;i.push(CR(r,n.slice(e+=3,e+a))),e+=a}if(e!==n.length)throw new Error("data is not a valid framed stream!");return Q0(i)}function py(n){for(var i=[],e=0;e<n.length;){var r=Math.min(n.length-e,268435455),a=new Uint8Array(4);i.push(a);var o=al(r),d=o.length;i.push(o),r<=60?(d++,i.push(new Uint8Array([r-1<<2]))):r<=256?(d+=2,i.push(new Uint8Array([240,r-1&255]))):r<=65536?(d+=3,i.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(d+=4,i.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(d+=5,i.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),i.push(n.slice(e,e+r)),d+=r,a[0]=0,a[1]=255&d,a[2]=d>>8&255,a[3]=d>>16&255,e+=r}return Q0(i)}function Aw(n,i){var e=new Uint8Array(32),r=o_(e),a=12,o=0;switch(e[0]=5,n.t){case"n":e[1]=2,function wR(n,i,e){var r=Math.floor(0==e?0:Math.LOG10E*Math.log(Math.abs(e)))+6176-20,a=e/Math.pow(10,r-6176);n[i+15]|=r>>7,n[i+14]|=(127&r)<<1;for(var o=0;a>=1;++o,a/=256)n[i+o]=255&a;n[i+15]|=e>=0?0:128}(e,a,n.v),o|=1,a+=16;break;case"b":e[1]=6,r.setFloat64(a,n.v?1:0,!0),o|=2,a+=8;break;case"s":if(-1==i.indexOf(n.v))throw new Error("Value ".concat(n.v," missing from SST!"));e[1]=3,r.setUint32(a,i.indexOf(n.v),!0),o|=8,a+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,o,!0),e.slice(0,a)}function Iw(n,i){var e=new Uint8Array(32),r=o_(e),a=12,o=0;switch(e[0]=3,n.t){case"n":e[2]=2,r.setFloat64(a,n.v,!0),o|=32,a+=8;break;case"b":e[2]=6,r.setFloat64(a,n.v?1:0,!0),o|=32,a+=8;break;case"s":if(-1==i.indexOf(n.v))throw new Error("Value ".concat(n.v," missing from SST!"));e[2]=3,r.setUint32(a,i.indexOf(n.v),!0),o|=16,a+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,o,!0),e.slice(0,a)}function TR(n,i,e){switch(n[0]){case 0:case 1:case 2:case 3:return function ER(n,i,e,r){var te,a=o_(n),o=a.getUint32(4,!0),d=(r>1?12:8)+4*PE(o&(r>1?3470:398)),p=-1,D=-1,P=NaN,B=new Date(2001,0,1);switch(512&o&&(p=a.getUint32(d,!0),d+=4),d+=4*PE(o&(r>1?12288:4096)),16&o&&(D=a.getUint32(d,!0),d+=4),32&o&&(P=a.getFloat64(d,!0),d+=8),64&o&&(B.setTime(B.getTime()+1e3*a.getFloat64(d,!0)),d+=8),n[2]){case 0:break;case 2:te={t:"n",v:P};break;case 3:te={t:"s",v:i[D]};break;case 5:te={t:"d",v:B};break;case 6:te={t:"b",v:P>0};break;case 7:te={t:"n",v:P/86400};break;case 8:te={t:"e",v:0};break;case 9:if(p>-1)te={t:"s",v:e[p]};else if(D>-1)te={t:"s",v:i[D]};else{if(isNaN(P))throw new Error("Unsupported cell type ".concat(n.slice(0,4)));te={t:"n",v:P}}break;default:throw new Error("Unsupported cell type ".concat(n.slice(0,4)))}return te}(n,i,e,n[0]);case 5:return function kR(n,i,e){var te,r=o_(n),a=r.getUint32(8,!0),o=12,d=-1,p=-1,D=NaN,P=NaN,B=new Date(2001,0,1);switch(1&a&&(D=function bR(n,i){for(var e=(127&n[i+15])<<7|n[i+14]>>1,r=1&n[i+14],a=i+13;a>=i;--a)r=256*r+n[a];return(128&n[i+15]?-r:r)*Math.pow(10,e-6176)}(n,o),o+=16),2&a&&(P=r.getFloat64(o,!0),o+=8),4&a&&(B.setTime(B.getTime()+1e3*r.getFloat64(o,!0)),o+=8),8&a&&(p=r.getUint32(o,!0),o+=4),16&a&&(d=r.getUint32(o,!0),o+=4),n[1]){case 0:break;case 2:case 10:te={t:"n",v:D};break;case 3:te={t:"s",v:i[p]};break;case 5:te={t:"d",v:B};break;case 6:te={t:"b",v:P>0};break;case 7:te={t:"n",v:P/86400};break;case 8:te={t:"e",v:0};break;case 9:if(!(d>-1))throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(31&a," : ").concat(n.slice(0,4)));te={t:"s",v:e[d]};break;default:throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(31&a," : ").concat(n.slice(0,4)))}return te}(n,i,e);default:throw new Error("Unsupported payload version ".concat(n[0]))}}function gh(n){return W1(jo(n)[1][0].data)}function FE(n,i){var e=jo(i.data),r=cu(e[1][0].data),o=[];return(e[3]||[]).forEach(function(d){var p=jo(d.data),D=cu(p[1][0].data)>>>0;switch(r){case 1:o[D]=Sw(p[3][0].data);break;case 8:var B=jo(n[gh(p[9][0].data)][0].data),te=n[gh(B[1][0].data)][0],ae=cu(te.meta[1][0].data);if(2001!=ae)throw new Error("2000 unexpected reference to ".concat(ae));var oe=jo(te.data);o[D]=oe[3].map(function(ge){return Sw(ge.data)}).join("")}}),o}function IR(n,i){var r={"!ref":"A1"},a=n[gh(jo(i.data)[2][0].data)],o=cu(a[0].meta[1][0].data);if(6001!=o)throw new Error("6000 unexpected reference to ".concat(o));return function AR(n,i,e){var r,a=jo(i.data),o={s:{r:0,c:0},e:{r:0,c:0}};if(o.e.r=(cu(a[6][0].data)>>>0)-1,o.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(o.e.c=(cu(a[7][0].data)>>>0)-1,o.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));e["!ref"]=ba(o);var d=jo(a[4][0].data),p=FE(n,n[gh(d[4][0].data)][0]),D=null!=(r=d[17])&&r[0]?FE(n,n[gh(d[17][0].data)][0]):[],P=jo(d[3][0].data),B=0;P[1].forEach(function(te){var ae=jo(te.data),oe=n[gh(ae[2][0].data)][0],ge=cu(oe.meta[1][0].data);if(6002!=ge)throw new Error("6001 unexpected reference to ".concat(ge));var ue=function DR(n,i){var e,r=jo(i.data),a=null!=(e=r?.[7])&&e[0]?cu(r[7][0].data)>>>0>0?1:0:-1,o=Dw(r[5],function(d){return function SR(n,i){var e,r,a,o,d,p,D,P,B,te,ae,oe,ge,ue,mi,zi,Te=jo(n),qe=cu(Te[1][0].data)>>>0,ht=cu(Te[2][0].data)>>>0,ut=(null==(r=null==(e=Te[8])?void 0:e[0])?void 0:r.data)&&cu(Te[8][0].data)>0||!1;if(null!=(o=null==(a=Te[7])?void 0:a[0])&&o.data&&0!=i)mi=null==(p=null==(d=Te[7])?void 0:d[0])?void 0:p.data,zi=null==(P=null==(D=Te[6])?void 0:D[0])?void 0:P.data;else{if(null==(te=null==(B=Te[4])?void 0:B[0])||!te.data||1==i)throw"NUMBERS Tile missing ".concat(i," cell storage");mi=null==(oe=null==(ae=Te[4])?void 0:ae[0])?void 0:oe.data,zi=null==(ue=null==(ge=Te[3])?void 0:ge[0])?void 0:ue.data}for(var vi=ut?4:1,Vt=o_(mi),wi=[],Yi=0;Yi<mi.length/2;++Yi){var hn=Vt.getUint16(2*Yi,!0);hn<65535&&wi.push([Yi,hn])}if(wi.length!=ht)throw"Expected ".concat(ht," cells, found ").concat(wi.length);var Tn=[];for(Yi=0;Yi<wi.length-1;++Yi)Tn[wi[Yi][0]]=zi.subarray(wi[Yi][1]*vi,wi[Yi+1][1]*vi);return wi.length>=1&&(Tn[wi[wi.length-1][0]]=zi.subarray(wi[wi.length-1][1]*vi)),{R:qe,cells:Tn}}(d,a)});return{nrows:cu(r[4][0].data)>>>0,data:o.reduce(function(d,p){return d[p.R]||(d[p.R]=[]),p.cells.forEach(function(D,P){if(d[p.R][P])throw new Error("Duplicate cell r=".concat(p.R," c=").concat(P));d[p.R][P]=D}),d},[])}}(0,oe);ue.data.forEach(function(Te,qe){Te.forEach(function(ht,ut){var mi=xa({r:B+qe,c:ut}),zi=TR(ht,p,D);zi&&(e[mi]=zi)})}),B+=ue.nrows})}(n,a[0],r),r}function Mw(n){var i,e,r,a,o={},d=[];if(n.FullPaths.forEach(function(D){if(D.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),n.FileIndex.forEach(function(D){if(D.name.match(/\.iwa$/)){var P,B;try{P=gp(D.content)}catch(te){return console.log("?? "+D.content.length+" "+(te.message||te))}try{B=mp(P)}catch(te){return console.log("## "+(te.message||te))}B.forEach(function(te){o[te.id]=te.messages,d.push(te.id)})}}),!d.length)throw new Error("File has no messages");var p=(null==(a=null==(r=null==(e=null==(i=o?.[1])?void 0:i[0])?void 0:e.meta)?void 0:r[1])?void 0:a[0].data)&&1==cu(o[1][0].meta[1][0].data)&&o[1][0];if(p||d.forEach(function(D){o[D].forEach(function(P){if(1==cu(P.meta[1][0].data)>>>0){if(p)throw new Error("Document has multiple roots");p=P}})}),!p)throw new Error("Cannot find Document root");return function RR(n,i){var e={SheetNames:[],Sheets:{}};if(Dw(jo(i.data)[1],gh).forEach(function(o){n[o].forEach(function(d){if(2==cu(d.meta[1][0].data)){var D=function MR(n,i){var e,r=jo(i.data),a={name:null!=(e=r[1])&&e[0]?Sw(r[1][0].data):"",sheets:[]};return Dw(r[2],gh).forEach(function(d){n[d].forEach(function(p){6e3==cu(p.meta[1][0].data)&&a.sheets.push(IR(n,p))})}),a}(n,d);D.sheets.forEach(function(P,B){zw(e,P,0==B?D.name:D.name+"_"+B,!0)})}})}),0==e.SheetNames.length)throw new Error("Empty NUMBERS file");return e}(o,p)}function OR(n,i,e){var r,a,o,d;if(null==(r=n[6])||!r[0]||null==(a=n[7])||!a[0])throw"Mutation only works on post-BNC storages!";if((null==(d=null==(o=n[8])?void 0:o[0])?void 0:d.data)&&cu(n[8][0].data)>0)throw"Math only works with normal offsets";for(var D=0,P=o_(n[7][0].data),B=0,te=[],ae=o_(n[4][0].data),oe=0,ge=[],ue=0;ue<i.length;++ue)if(null!=i[ue]){var Te,qe;switch(P.setUint16(2*ue,B,!0),ae.setUint16(2*ue,oe,!0),typeof i[ue]){case"string":Te=Aw({t:"s",v:i[ue]},e),qe=Iw({t:"s",v:i[ue]},e);break;case"number":Te=Aw({t:"n",v:i[ue]},e),qe=Iw({t:"n",v:i[ue]},e);break;case"boolean":Te=Aw({t:"b",v:i[ue]},e),qe=Iw({t:"b",v:i[ue]},e);break;default:throw new Error("Unsupported value "+i[ue])}te.push(Te),B+=Te.length,ge.push(qe),oe+=qe.length,++D}else P.setUint16(2*ue,65535,!0),ae.setUint16(2*ue,65535);for(n[2][0].data=al(D);ue<n[7][0].data.length/2;++ue)P.setUint16(2*ue,65535,!0),ae.setUint16(2*ue,65535,!0);return n[6][0].data=Q0(te),n[3][0].data=Q0(ge),D}function BE(n){return function(e){for(var r=0;r!=n.length;++r){var a=n[r];void 0===e[a[0]]&&(e[a[0]]=a[1]),"n"===a[2]&&(e[a[0]]=Number(e[a[0]]))}}}function Rw(n){BE([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(n)}function Ow(n){BE([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function PR(n){return ki.WS.indexOf(n)>-1?"sheet":ki.CS&&n==ki.CS?"chart":ki.DS&&n==ki.DS?"dialog":ki.MS&&n==ki.MS?"macro":n&&n.length?n:"sheet"}function BR(n,i,e,r,a,o,d,p,D,P,B,te){try{o[r]=Ui(vo(n,e,!0),i);var oe,ae=Ts(n,i);switch(p){case"sheet":oe=cM(ae,i,a,D,o[r],P,B,te);break;case"chart":if(!(oe=function uM(n,i,e,r,a,o,d,p){return".bin"===i.slice(-4)?function Tu(n,i,e,r,a){if(!n)return n;r||(r={"!id":{}});var o={"!type":"chart","!drawel":null,"!rel":""},d=[],p=!1;return he(n,function(P,B,te){switch(te){case 550:o["!rel"]=P;break;case 651:a.Sheets[e]||(a.Sheets[e]={}),P.name&&(a.Sheets[e].CodeName=P.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:p=!0;break;case 36:p=!1;break;case 37:d.push(te);break;case 38:d.pop();break;default:if(B.T>0)d.push(te);else if(B.T<0)d.pop();else if(!p||i.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}},i),r["!id"][o["!rel"]]&&(o["!drawel"]=r["!id"][o["!rel"]]),o}(n,r,e,a,o):function Bo(n,i,e,r,a){if(!n)return n;r||(r={"!id":{}});var d,o={"!type":"chart","!drawel":null,"!rel":""},p=n.match(Hr);return p&&ys(p[0],0,a,e),(d=n.match(/drawing r:id="(.*?)"/))&&(o["!rel"]=d[1]),r["!id"][o["!rel"]]&&(o["!drawel"]=r["!id"][o["!rel"]]),o}(n,0,e,a,o)}(ae,i,a,D,o[r],P))||!oe["!drawel"])break;var ge=Iu(oe["!drawel"].Target,i),ue=An(ge),Te=function Ud(n,i){if(!n)return"??";var e=(n.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return i["!id"][e].Target}(vo(n,ge,!0),Ui(vo(n,ue,!0),ge)),qe=Iu(Te,ge),ht=An(qe);oe=function pc(n,i,e,r,a,o){var d=o||{"!type":"chart"};if(!n)return o;var p=0,D=0,P="A",B={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(n.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(te){var ae=function so(n){var r,i=[],e=n.match(/^<c:numCache>/);(n.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(o){var d=o.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);d&&(i[+d[1]]=e?+d[2]:d[2])});var a=qa((n.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(n.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach(function(o){r=o.replace(/<.*?>/g,"")}),[i,a,r]}(te);B.s.r=B.s.c=0,B.e.c=p,P=Va(p),ae[0].forEach(function(oe,ge){d[P+gr(ge)]={t:"n",v:oe,z:ae[1]},D=ge}),B.e.r<D&&(B.e.r=D),++p}),p>0&&(d["!ref"]=ba(B)),d}(vo(n,qe,!0),0,0,Ui(vo(n,ht,!0),qe),0,oe);break;case"macro":oe=function dM(n,i,e,r,a,o,d,p){return i.slice(-4),{"!type":"macro"}}(0,i);break;case"dialog":oe=function hM(n,i,e,r,a,o,d,p){return i.slice(-4),{"!type":"dialog"}}(0,i);break;default:throw new Error("Unrecognized sheet type "+p)}d[r]=oe;var ut=[];o&&o[r]&&no(o[r]).forEach(function(mi){var zi="";if(o[r][mi].Type==ki.CMNT){zi=Iu(o[r][mi].Target,i);var vi=function gM(n,i,e){return".bin"===i.slice(-4)?function Io(n,i){var e=[],r=[],a={},o=!1;return he(n,function(p,D,P){switch(P){case 632:r.push(p);break;case 635:a=p;break;case 637:a.t=p.t,a.h=p.h,a.r=p.r;break;case 636:if(a.author=r[a.iauthor],delete a.iauthor,i.sheetRows&&a.rfx&&i.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,e.push(a);break;case 3072:case 37:case 38:break;case 35:o=!0;break;case 36:o=!1;break;default:if(!D.T&&(!o||i.WTF))throw new Error("Unexpected record 0x"+P.toString(16))}}),e}(n,e):function Eo(n,i){if(n.match(/<(?:\w+:)?comments *\/>/))return[];var e=[],r=[],a=n.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(d){if(""!==d&&""!==d.trim()){var p=d.match(/<(?:\w+:)?author[^>]*>(.*)/);p&&e.push(p[1])}});var o=n.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return o&&o[1]&&o[1].split(/<\/\w*:?comment>/).forEach(function(d){if(""!==d&&""!==d.trim()){var p=d.match(/<(?:\w+:)?comment[^>]*>/);if(p){var D=oa(p[0]),P={author:D.authorId&&e[D.authorId]||"sheetjsghost",ref:D.ref,guid:D.guid},B=Qa(D.ref);if(!(i.sheetRows&&i.sheetRows<=B.r)){var te=d.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),ae=!!te&&!!te[1]&&km(te[1])||{r:"",t:"",h:""};P.r=ae.r,"<t></t>"==ae.r&&(ae.t=ae.h=""),P.t=(ae.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),i.cellHTML&&(P.h=ae.h),r.push(P)}}}}),r}(n,e)}(Ts(n,zi,!0),zi,D);if(!vi||!vi.length)return;zv(oe,vi,!1)}o[r][mi].Type==ki.TCMNT&&(zi=Iu(o[r][mi].Target,i),ut=ut.concat(function N_(n,i){var e=[],r=!1,a={},o=0;return n.replace(Wo,function(p,D){var P=oa(p);switch(ko(P[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":a={author:P.personId,guid:P.id,ref:P.ref,T:1};break;case"</threadedComment>":null!=a.t&&e.push(a);break;case"<text>":case"<text":o=D+p.length;break;case"</text>":a.t=n.slice(o,D).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":r=!0;break;case"</mentions>":case"</ext>":r=!1;break;default:if(!r&&i.WTF)throw new Error("unrecognized "+P[0]+" in threaded comments")}return p}),e}(Ts(n,zi,!0),D)))}),ut&&ut.length&&zv(oe,ut,!0,D.people||[])}catch(mi){if(D.WTF)throw mi}}function vp(n){return"/"==n.charAt(0)?n.slice(1):n}function NR(n,i){if(na(),Rw(i=i||{}),co(n,"META-INF/manifest.xml")||co(n,"objectdata.xml"))return function ME(n,i){i=i||{},co(n,"META-INF/manifest.xml")&&function Hn(n,i){for(var r,a,e=hu(n);r=Cc.exec(e);)switch(r[3]){case"manifest":break;case"file-entry":if("/"==(a=oa(r[0],!1)).path&&a.type!==Bn)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(i&&i.WTF)throw r}}(Ts(n,"META-INF/manifest.xml"),i);var e=vo(n,"content.xml");if(!e)throw new Error("Missing content.xml in ODS / UOF file");var r=IE(Rs(e),i);return co(n,"meta.xml")&&(r.Props=ns(Ts(n,"meta.xml"))),r}(n,i);if(co(n,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(n.FileIndex)return Mw(n);var e=$r.utils.cfb_new();return ec(n).forEach(function(aa){Oa(e,aa,Qu(n,aa))}),Mw(e)}if(!co(n,"[Content_Types].xml"))throw co(n,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):co(n,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var d,p,r=ec(n),a=function Hi(n){var i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!n||!n.match)return i;var e={};if((n.match(Wo)||[]).forEach(function(r){var a=oa(r);switch(a[0].replace(id,"<")){case"<?xml":break;case"<Types":i.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":e[a.Extension]=a.ContentType;break;case"<Override":void 0!==i[Ai[a.ContentType]]&&i[Ai[a.ContentType]].push(a.PartName)}}),i.xmlns!==Ei.CT)throw new Error("Unknown Namespace: "+i.xmlns);return i.calcchain=i.calcchains.length>0?i.calcchains[0]:"",i.sst=i.strs.length>0?i.strs[0]:"",i.style=i.styles.length>0?i.styles[0]:"",i.defaults=e,delete i.calcchains,i}(vo(n,"[Content_Types].xml")),o=!1;if(0===a.workbooks.length&&Ts(n,p="xl/workbook.xml",!0)&&a.workbooks.push(p),0===a.workbooks.length){if(!Ts(n,p="xl/workbook.bin",!0))throw new Error("Could not find workbook");a.workbooks.push(p),o=!0}"bin"==a.workbooks[0].slice(-3)&&(o=!0);var D={},P={};if(!i.bookSheets&&!i.bookProps){if(Ng=[],a.sst)try{Ng=function mM(n,i,e){return".bin"===i.slice(-4)?function x0(n,i){var e=[],r=!1;return he(n,function(o,d,p){switch(p){case 159:e.Count=o[0],e.Unique=o[1];break;case 19:e.push(o);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(!r||i.WTF)throw new Error("Unexpected record 0x"+p.toString(16))}}),e}(n,e):function y0(n,i){var e=[],r="";if(!n)return e;var a=n.match(v0);if(a){r=a[2].replace(_0,"").split(vg);for(var o=0;o!=r.length;++o){var d=km(r[o].trim(),i);null!=d&&(e[e.length]=d)}a=oa(a[1]),e.Count=a.count,e.Unique=a.uniqueCount}return e}(n,e)}(Ts(n,vp(a.sst)),a.sst,i)}catch(aa){if(i.WTF)throw aa}i.cellStyles&&a.themes.length&&(D=function pM(n,i,e){return Af(n,e)}(vo(n,a.themes[0].replace(/^\//,""),!0)||"",0,i)),a.style&&(P=function fM(n,i,e,r){return".bin"===i.slice(-4)?function Df(n,i,e){var r={NumberFmt:[]};for(var a in st)r.NumberFmt[a]=st[a];r.CellXf=[],r.Fonts=[];var o=[],d=!1;return he(n,function(D,P,B){switch(B){case 44:r.NumberFmt[D[0]]=D[1],Qr(D[1],D[0]);break;case 43:r.Fonts.push(D),null!=D.color.theme&&i&&i.themeElements&&i.themeElements.clrScheme&&(D.color.rgb=dd(i.themeElements.clrScheme[D.color.theme].rgb,D.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==o[o.length-1]&&r.CellXf.push(D);break;case 35:d=!0;break;case 36:d=!1;break;case 37:o.push(B),d=!0;break;case 38:o.pop(),d=!1;break;default:if(P.T>0)o.push(B);else if(P.T<0)o.pop();else if(!d||e.WTF&&37!=o[o.length-1])throw new Error("Unexpected record 0x"+B.toString(16))}}),r}(n,e,r):op(n,e,r)}(Ts(n,vp(a.style)),a.style,D,i))}a.links.map(function(aa){try{return Ui(vo(n,An(vp(aa))),aa),function _M(n,i,e,r){return".bin"===e.slice(-4)?function I0(n,i,e,r){if(!n)return n;var a=r||{},o=!1;he(n,function(D,P,B){switch(B){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:o=!0;break;case 36:o=!1;break;default:if(!P.T&&(!o||a.WTF))throw new Error("Unexpected record 0x"+B.toString(16))}},a)}(n,0,0,r):void 0}(Ts(n,vp(aa)),0,aa,i)}catch{}});var B=function lM(n,i,e){return".bin"===i.slice(-4)?function mh(n,i){var e={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],a=!1;i||(i={}),i.biff=12;var o=[],d=[[]];return d.SheetNames=[],d.XTI=[],j1[16]={n:"BrtFRTArchID$",f:Cw},he(n,function(D,P,B){switch(B){case 156:d.SheetNames.push(D.name),e.Sheets.push(D);break;case 153:e.WBProps=D;break;case 39:null!=D.Sheet&&(i.SID=D.Sheet),D.Ref=Vu(D.Ptg,0,null,d,i),delete i.SID,delete D.Ptg,o.push(D);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:d[0].length?d.push([B,D]):d[0]=[B,D],d[d.length-1].XTI=[];break;case 362:0===d.length&&(d[0]=[],d[0].XTI=[]),d[d.length-1].XTI=d[d.length-1].XTI.concat(D),d.XTI=d.XTI.concat(D);break;case 35:case 37:r.push(B),a=!0;break;case 36:case 38:r.pop(),a=!1;break;default:if(!P.T&&(!a||i.WTF&&37!=r[r.length-1]&&35!=r[r.length-1]))throw new Error("Unexpected record 0x"+B.toString(16))}},i),F1(e),e.Names=o,e.supbooks=d,e}(n,e):function Zx(n,i){if(!n)throw new Error("Could not find file");var e={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,a="xmlns",o={},d=0;if(n.replace(Wo,function(D,P){var B=oa(D);switch(ko(B[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":D.match(pp)&&(a="xmlns"+D.match(/<(\w+):/)[1]),e.xmlns=B[a];break;case"<fileVersion":delete B[0],e.AppVersion=B;break;case"<workbookPr":case"<workbookPr/>":$u.forEach(function(te){if(null!=B[te[0]])switch(te[2]){case"bool":e.WBProps[te[0]]=Qs(B[te[0]]);break;case"int":e.WBProps[te[0]]=parseInt(B[te[0]],10);break;default:e.WBProps[te[0]]=B[te[0]]}}),B.codeName&&(e.WBProps.CodeName=Rs(B.codeName));break;case"<workbookView":case"<workbookView/>":delete B[0],e.WBView.push(B);break;case"<sheet":switch(B.state){case"hidden":B.Hidden=1;break;case"veryHidden":B.Hidden=2;break;default:B.Hidden=0}delete B.state,B.name=qa(Rs(B.name)),delete B[0],e.Sheets.push(B);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":r=!1;break;case"<definedName":(o={}).Name=Rs(B.name),B.comment&&(o.Comment=B.comment),B.localSheetId&&(o.Sheet=+B.localSheetId),Qs(B.hidden||"0")&&(o.Hidden=!0),d=P+D.length;break;case"</definedName>":o.Ref=qa(Rs(n.slice(d,P))),e.Names.push(o);break;case"<calcPr":case"<calcPr/>":delete B[0],e.CalcPr=B;break;default:if(!r&&i.WTF)throw new Error("unrecognized "+B[0]+" in workbook")}return D}),-1===pn.indexOf(e.xmlns))throw new Error("Unknown Namespace: "+e.xmlns);return F1(e),e}(n,e)}(Ts(n,vp(a.workbooks[0])),a.workbooks[0],i),te={},ae="";a.coreprops.length&&((ae=Ts(n,vp(a.coreprops[0]),!0))&&(te=ns(ae)),0!==a.extprops.length&&(ae=Ts(n,vp(a.extprops[0]),!0))&&function Uc(n,i,e){var r={};i||(i={}),n=Rs(n),Vs.forEach(function(a){var o=(n.match(Pl(a[0]))||[])[1];switch(a[2]){case"string":o&&(i[a[1]]=qa(o));break;case"bool":i[a[1]]="true"===o;break;case"raw":var d=n.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));d&&d.length>0&&(r[a[1]]=d[1])}}),r.HeadingPairs&&r.TitlesOfParts&&vl(r.HeadingPairs,r.TitlesOfParts,i,e)}(ae,te,i));var oe={};(!i.bookSheets||i.bookProps)&&0!==a.custprops.length&&(ae=vo(n,vp(a.custprops[0]),!0))&&(oe=function Ds(n,i){var e={},r="",a=n.match(Do);if(a)for(var o=0;o!=a.length;++o){var d=a[o],p=oa(d);switch(p[0]){case"<?xml":case"<Properties":break;case"<property":r=qa(p.name);break;case"</property>":r=null;break;default:if(0===d.indexOf("<vt:")){var D=d.split(">"),P=D[0].slice(4),B=D[1];switch(P){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":e[r]=qa(B);break;case"bool":e[r]=Qs(B);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":e[r]=parseInt(B,10);break;case"r4":case"r8":case"decimal":e[r]=parseFloat(B);break;case"filetime":case"date":e[r]=Cs(B);break;default:if("/"==P.slice(-1))break;i.WTF&&typeof console<"u"&&console.warn("Unexpected",d,P,D)}}else if("</"!==d.slice(0,2)&&i.WTF)throw new Error(d)}}return e}(ae,i));var ge={};if((i.bookSheets||i.bookProps)&&(B.Sheets?d=B.Sheets.map(function(Sr){return Sr.name}):te.Worksheets&&te.SheetNames.length>0&&(d=te.SheetNames),i.bookProps&&(ge.Props=te,ge.Custprops=oe),i.bookSheets&&typeof d<"u"&&(ge.SheetNames=d),i.bookSheets?ge.SheetNames:i.bookProps))return ge;d={};var ue={};i.bookDeps&&a.calcchain&&(ue=function vM(n,i,e){return".bin"===i.slice(-4)?function n1(n,i,e){var r=[];return he(n,function(d,p,D){if(63===D)r.push(d);else if(!p.T)throw new Error("Unexpected record 0x"+D.toString(16))}),r}(n):function tf(n){var i=[];if(!n)return i;var e=1;return(n.match(Wo)||[]).forEach(function(r){var a=oa(r);switch(a[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?e=a.i:a.i=e,i.push(a)}}),i}(n)}(Ts(n,vp(a.calcchain)),a.calcchain));var ht,ut,Te=0,qe={},mi=B.Sheets;te.Worksheets=mi.length,te.SheetNames=[];for(var zi=0;zi!=mi.length;++zi)te.SheetNames[zi]=mi[zi].name;var vi=o?"bin":"xml",Vt=a.workbooks[0].lastIndexOf("/"),wi=(a.workbooks[0].slice(0,Vt+1)+"_rels/"+a.workbooks[0].slice(Vt+1)+".rels").replace(/^\//,"");co(n,wi)||(wi="xl/_rels/workbook."+vi+".rels");var Yi=Ui(vo(n,wi,!0),wi.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(i.xlmeta=function yM(n,i,e){return".bin"===i.slice(-4)?function Wc(n,i,e){var r={Types:[],Cell:[],Value:[]},a=e||{},o=[],d=!1,p=2;return he(n,function(D,P,B){switch(B){case 335:r.Types.push({name:D.name});break;case 51:D.forEach(function(te){1==p?r.Cell.push({type:r.Types[te[0]-1].name,index:te[1]}):0==p&&r.Value.push({type:r.Types[te[0]-1].name,index:te[1]})});break;case 337:p=D?1:0;break;case 338:p=2;break;case 35:o.push(B),d=!0;break;case 36:o.pop(),d=!1;break;default:if(!P.T&&(!d||a.WTF&&35!=o[o.length-1]))throw new Error("Unexpected record 0x"+B.toString(16))}}),r}(n,0,e):function Fv(n,i,e){var r={Types:[],Cell:[],Value:[]};if(!n)return r;var d,a=!1,o=2;return n.replace(Wo,function(p){var D=oa(p);switch(ko(D[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":r.Types.push({name:D.name});break;case"<futureMetadata":for(var P=0;P<r.Types.length;++P)r.Types[P].name==D.name&&(d=r.Types[P]);break;case"<rc":1==o?r.Cell.push({type:r.Types[D.t-1].name,index:+D.v}):0==o&&r.Value.push({type:r.Types[D.t-1].name,index:+D.v});break;case"<cellMetadata":o=1;break;case"</cellMetadata>":case"</valueMetadata>":o=2;break;case"<valueMetadata":o=0;break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!d)break;d.offsets||(d.offsets=[]),d.offsets.push(+D.i);break;default:if(!a&&e.WTF)throw new Error("unrecognized "+D[0]+" in metadata")}return p}),r}(n,0,e)}(Ts(n,vp(a.metadata[0])),a.metadata[0],i)),(a.people||[]).length>=1&&(i.people=function Cu(n,i){var e=[],r=!1;return n.replace(Wo,function(o){var d=oa(o);switch(ko(d[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":e.push({name:d.displayname,id:d.id});break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&i.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),e}(Ts(n,vp(a.people[0])),i)),Yi&&(Yi=function FR(n,i){if(!n)return 0;try{n=i.map(function(r){return r.id||(r.id=r.strRelID),[r.name,n["!id"][r.id].Target,PR(n["!id"][r.id].Type)]})}catch{return null}return n&&0!==n.length?n:null}(Yi,B.Sheets));var hn=Ts(n,"xl/worksheets/sheet.xml",!0)?1:0;e:for(Te=0;Te!=te.Worksheets;++Te){var Tn="sheet";if(Yi&&Yi[Te]?(ht="xl/"+Yi[Te][1].replace(/[\/]?xl\//,""),co(n,ht)||(ht=Yi[Te][1]),co(n,ht)||(ht=wi.replace(/_rels\/.*$/,"")+Yi[Te][1]),Tn=Yi[Te][2]):ht=(ht="xl/worksheets/sheet"+(Te+1-hn)+"."+vi).replace(/sheet0\./,"sheet."),ut=ht.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),i&&null!=i.sheets)switch(typeof i.sheets){case"number":if(Te!=i.sheets)continue e;break;case"string":if(te.SheetNames[Te].toLowerCase()!=i.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(i.sheets)){for(var Wi=!1,Cr=0;Cr!=i.sheets.length;++Cr)"number"==typeof i.sheets[Cr]&&i.sheets[Cr]==Te&&(Wi=1),"string"==typeof i.sheets[Cr]&&i.sheets[Cr].toLowerCase()==te.SheetNames[Te].toLowerCase()&&(Wi=1);if(!Wi)continue e}}BR(n,ht,ut,te.SheetNames[Te],Te,qe,d,Tn,i,B,D,P)}return ge={Directory:a,Workbook:B,Props:te,Custprops:oe,Deps:ue,Sheets:d,SheetNames:te.SheetNames,Strings:Ng,Styles:P,Themes:D,SSF:ts(st)},i&&i.bookFiles&&(n.files?(ge.keys=r,ge.files=n.files):(ge.keys=[],ge.files={},n.FullPaths.forEach(function(aa,Sr){aa=aa.replace(/^Root Entry[\/]/,""),ge.keys.push(aa),ge.files[aa]=n.FileIndex[Sr]}))),i&&i.bookVBA&&(a.vba.length>0?ge.vbaraw=Ts(n,vp(a.vba[0]),!0):a.defaults&&a.defaults.bin===Y_&&(ge.vbaraw=Ts(n,"xl/vbaProject.bin",!0))),ge}function zR(n,i){var e=i||{},r="Workbook",a=$r.find(n,r);try{if(!(a=$r.find(n,r="/!DataSpaces/Version"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(function wv(n){var i={};i.id=n.read_shift(0,"lpp4"),i.R=cl(n,4),i.U=cl(n,4),i.W=cl(n,4)}(a.content),!(a=$r.find(n,r="/!DataSpaces/DataSpaceMap"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=function Cv(n){var i=[];n.l+=4;for(var e=n.read_shift(4);e-- >0;)i.push(bg(n));return i}(a.content);if(1!==o.length||1!==o[0].comps.length||0!==o[0].comps[0].t||"StrongEncryptionDataSpace"!==o[0].name||"EncryptedPackage"!==o[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+r);if(!(a=$r.find(n,r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var d=function Sm(n){var i=[];n.l+=4;for(var e=n.read_shift(4);e-- >0;)i.push(n.read_shift(0,"lpp4"));return i}(a.content);if(1!=d.length||"StrongEncryptionTransform"!=d[0])throw new Error("ECMA-376 Encrypted file bad "+r);if(!(a=$r.find(n,r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);!function Pp(n){var i=function C0(n){var i={};return n.read_shift(4),n.l+=4,i.id=n.read_shift(0,"lpp4"),i.name=n.read_shift(0,"lpp4"),i.R=cl(n,4),i.U=cl(n,4),i.W=cl(n,4),i}(n);if(i.ename=n.read_shift(0,"8lpp4"),i.blksz=n.read_shift(4),i.cmode=n.read_shift(4),4!=n.read_shift(4))throw new Error("Bad !Primary record");return i}(a.content)}catch{}if(!(a=$r.find(n,r="/EncryptionInfo"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);var p=function Kh(n){var i=cl(n);switch(i.Minor){case 2:return[i.Minor,Fp(n)];case 3:return[i.Minor,E0()];case 4:return[i.Minor,Ev(n)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+i.Minor)}(a.content);if(!(a=$r.find(n,r="/EncryptedPackage"))||!a.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(4==p[0]&&typeof decrypt_agile<"u")return decrypt_agile(p[1],a.content,e.password||"",e);if(2==p[0]&&typeof decrypt_std76<"u")return decrypt_std76(p[1],a.content,e.password||"",e);throw new Error("File is password-protected")}function YR(n,i){return"ods"==i.bookType?LE(n,i):"numbers"==i.bookType?function LR(n,i){if(!i||!i.numbers)throw new Error("Must pass a `numbers` option -- check the README");var e=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Go(e["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(ba(r)));var o=tb(e,{range:r,header:1}),d=["~Sh33tJ5~"];o.forEach(function(Ti){return Ti.forEach(function(bi){"string"==typeof bi&&d.push(bi)})});var p={},D=[],P=$r.read(i.numbers,{type:"base64"});P.FileIndex.map(function(Ti,bi){return[Ti,P.FullPaths[bi]]}).forEach(function(Ti){var bi=Ti[0],Yn=Ti[1];2==bi.type&&bi.name.match(/\.iwa/)&&mp(gp(bi.content)).forEach(function(er){D.push(er.id),p[er.id]={deps:[],location:Yn,type:cu(er.messages[0].meta[1][0].data)}})}),D.sort(function(Ti,bi){return Ti-bi});var B=D.filter(function(Ti){return Ti>1}).map(function(Ti){return[Ti,al(Ti)]});P.FileIndex.map(function(Ti,bi){return[Ti,P.FullPaths[bi]]}).forEach(function(Ti){var bi=Ti[0];bi.name.match(/\.iwa/)&&mp(gp(bi.content)).forEach(function(_r){_r.messages.forEach(function(kr){B.forEach(function(er){_r.messages.some(function(Bs){return 11006!=cu(Bs.meta[1][0].data)&&function xR(n,i){e:for(var e=0;e<=n.length-i.length;++e){for(var r=0;r<i.length;++r)if(n[e+r]!=i[r])continue e;return!0}return!1}(Bs.data,er[1])})&&p[er[0]].deps.push(_r.id)})})})});for(var ge,ae=$r.find(P,p[1].location),oe=mp(gp(ae.content)),ue=0;ue<oe.length;++ue){var Te=oe[ue];1==Te.id&&(ge=Te)}var qe=gh(jo(ge.messages[0].data)[1][0].data);for(oe=mp(gp((ae=$r.find(P,p[qe].location)).content)),ue=0;ue<oe.length;++ue)(Te=oe[ue]).id==qe&&(ge=Te);for(qe=gh(jo(ge.messages[0].data)[2][0].data),oe=mp(gp((ae=$r.find(P,p[qe].location)).content)),ue=0;ue<oe.length;++ue)(Te=oe[ue]).id==qe&&(ge=Te);for(qe=gh(jo(ge.messages[0].data)[2][0].data),oe=mp(gp((ae=$r.find(P,p[qe].location)).content)),ue=0;ue<oe.length;++ue)(Te=oe[ue]).id==qe&&(ge=Te);var ht=jo(ge.messages[0].data);ht[6][0].data=al(r.e.r+1),ht[7][0].data=al(r.e.c+1);for(var ut=gh(ht[46][0].data),mi=$r.find(P,p[ut].location),zi=mp(gp(mi.content)),vi=0;vi<zi.length&&zi[vi].id!=ut;++vi);if(zi[vi].id!=ut)throw"Bad ColumnRowUIDMapArchive";var Vt=jo(zi[vi].messages[0].data);Vt[1]=[],Vt[2]=[],Vt[3]=[];for(var wi=0;wi<=r.e.c;++wi){var Yi=[];Yi[1]=Yi[2]=[{type:0,data:al(wi+420690)}],Vt[1].push({type:2,data:Id(Yi)}),Vt[2].push({type:0,data:al(wi)}),Vt[3].push({type:0,data:al(wi)})}Vt[4]=[],Vt[5]=[],Vt[6]=[];for(var hn=0;hn<=r.e.r;++hn)(Yi=[])[1]=Yi[2]=[{type:0,data:al(hn+726270)}],Vt[4].push({type:2,data:Id(Yi)}),Vt[5].push({type:0,data:al(hn)}),Vt[6].push({type:0,data:al(hn)});zi[vi].messages[0].data=Id(Vt),mi.content=py(fy(zi)),mi.size=mi.content.length,delete ht[46];var Tn=jo(ht[4][0].data);Tn[7][0].data=al(r.e.r+1);var Cr=gh(jo(Tn[1][0].data)[2][0].data);if((zi=mp(gp((mi=$r.find(P,p[Cr].location)).content)))[0].id!=Cr)throw"Bad HeaderStorageBucket";var aa=jo(zi[0].messages[0].data);for(hn=0;hn<o.length;++hn){var Sr=jo(aa[2][0].data);Sr[1][0].data=al(hn),Sr[4][0].data=al(o[hn].length),aa[2][hn]={type:aa[2][0].type,data:Id(Sr)}}zi[0].messages[0].data=Id(aa),mi.content=py(fy(zi)),mi.size=mi.content.length;var La=gh(Tn[2][0].data);if((zi=mp(gp((mi=$r.find(P,p[La].location)).content)))[0].id!=La)throw"Bad HeaderStorageBucket";for(aa=jo(zi[0].messages[0].data),wi=0;wi<=r.e.c;++wi)(Sr=jo(aa[2][0].data))[1][0].data=al(wi),Sr[4][0].data=al(r.e.r+1),aa[2][wi]={type:aa[2][0].type,data:Id(Sr)};zi[0].messages[0].data=Id(aa),mi.content=py(fy(zi)),mi.size=mi.content.length;var ma=gh(Tn[4][0].data);!function(){for(var Yn,Ti=$r.find(P,p[ma].location),bi=mp(gp(Ti.content)),Rr=0;Rr<bi.length;++Rr){var _r=bi[Rr];_r.id==ma&&(Yn=_r)}var kr=jo(Yn.messages[0].data);kr[3]=[];var er=[];d.forEach(function(Qo,oo){er[1]=[{type:0,data:al(oo)}],er[2]=[{type:0,data:al(1)}],er[3]=[{type:2,data:yR(Qo)}],kr[3].push({type:2,data:Id(er)})}),Yn.messages[0].data=Id(kr);var ui=py(fy(bi));Ti.content=ui,Ti.size=Ti.content.length}();var qs=jo(Tn[3][0].data),Ur=qs[1][0];delete qs[2];var Ca=jo(Ur.data),qn=gh(Ca[2][0].data);!function(){for(var Yn,Ti=$r.find(P,p[qn].location),bi=mp(gp(Ti.content)),Rr=0;Rr<bi.length;++Rr){var _r=bi[Rr];_r.id==qn&&(Yn=_r)}var kr=jo(Yn.messages[0].data);delete kr[6],delete qs[7];var er=new Uint8Array(kr[5][0].data);kr[5]=[];for(var Bs=0,ui=0;ui<=r.e.r;++ui){var Qo=jo(er);Bs+=OR(Qo,o[ui],d),Qo[1][0].data=al(ui),kr[5].push({data:Id(Qo),type:2})}kr[1]=[{type:0,data:al(r.e.c+1)}],kr[2]=[{type:0,data:al(r.e.r+1)}],kr[3]=[{type:0,data:al(Bs)}],kr[4]=[{type:0,data:al(r.e.r+1)}],Yn.messages[0].data=Id(kr);var $o=py(fy(bi));Ti.content=$o,Ti.size=Ti.content.length}(),Ur.data=Id(Ca),Tn[3][0].data=Id(qs),ht[4][0].data=Id(Tn),ge.messages[0].data=Id(ht);var mn=py(fy(oe));return ae.content=mn,ae.size=ae.content.length,P}(n,i):"xlsb"==i.bookType?function GR(n,i){hh=1024,n&&!n.SSF&&(n.SSF=ts(st)),n&&n.SSF&&(na(),Ms(n.SSF),i.revssf=uu(n.SSF),i.revssf[n.SSF[65535]]=0,i.ssf=n.SSF),i.rels={},i.wbrels={},i.Strings=[],i.Strings.Count=0,i.Strings.Unique=0,zg?i.revStrings=new Map:(i.revStrings={},i.revStrings.foo=[],delete i.revStrings.foo);var e="xlsb"==i.bookType?"bin":"xml",r=G_.indexOf(i.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ow(i=i||{});var o=ed(),d="",p=0;if(i.cellXfs=[],F(i.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),Oa(o,d="docProps/core.xml",ro(n.Props,i)),a.coreprops.push(d),bn(i.rels,2,d,ki.CORE_PROPS),d="docProps/app.xml",!n.Props||!n.Props.SheetNames)if(n.Workbook&&n.Workbook.Sheets){for(var D=[],P=0;P<n.SheetNames.length;++P)2!=(n.Workbook.Sheets[P]||{}).Hidden&&D.push(n.SheetNames[P]);n.Props.SheetNames=D}else n.Props.SheetNames=n.SheetNames;for(n.Props.Worksheets=n.Props.SheetNames.length,Oa(o,d,Nu(n.Props)),a.extprops.push(d),bn(i.rels,3,d,ki.EXT_PROPS),n.Custprops!==n.Props&&no(n.Custprops||{}).length>0&&(Oa(o,d="docProps/custom.xml",Ls(n.Custprops)),a.custprops.push(d),bn(i.rels,4,d,ki.CUST_PROPS)),p=1;p<=n.SheetNames.length;++p){var B={"!id":{}},te=n.Sheets[n.SheetNames[p-1]];if(Oa(o,d="xl/worksheets/sheet"+p+"."+e,bM(p-1,d,i,n,B)),a.sheets.push(d),bn(i.wbrels,-1,"worksheets/sheet"+p+"."+e,ki.WS[0]),te){var oe=te["!comments"],ge=!1,ue="";oe&&oe.length>0&&(Oa(o,ue="xl/comments"+p+"."+e,EM(oe,ue,i)),a.comments.push(ue),bn(B,-1,"../comments"+p+"."+e,ki.CMNT),ge=!0),te["!legacy"]&&ge&&Oa(o,"xl/drawings/vmlDrawing"+p+".vml",Nv(p,te["!comments"])),delete te["!comments"],delete te["!legacy"]}B["!id"].rId1&&Oa(o,An(d),cn(B))}return null!=i.Strings&&i.Strings.length>0&&(Oa(o,d="xl/sharedStrings."+e,function CM(n,i,e){return(".bin"===i.slice(-4)?xg:Tm)(n,e)}(i.Strings,d,i)),a.strs.push(d),bn(i.wbrels,-1,"sharedStrings."+e,ki.SST)),Oa(o,d="xl/workbook."+e,function xM(n,i,e){return(".bin"===i.slice(-4)?oM:zm)(n,e)}(n,d,i)),a.workbooks.push(d),bn(i.rels,1,d,ki.WB),Oa(o,d="xl/theme/theme1.xml",Ov(n.Themes,i)),a.themes.push(d),bn(i.wbrels,-1,"theme/theme1.xml",ki.THEME),Oa(o,d="xl/styles."+e,function wM(n,i,e){return(".bin"===i.slice(-4)?O_:kg)(n,e)}(n,d,i)),a.styles.push(d),bn(i.wbrels,-1,"styles."+e,ki.STY),n.vbaraw&&r&&(Oa(o,d="xl/vbaProject.bin",n.vbaraw),a.vba.push(d),bn(i.wbrels,-1,"vbaProject.bin",ki.VBA)),Oa(o,d="xl/metadata."+e,function kM(n){return(".bin"===n.slice(-4)?Nh:Mm)()}(d)),a.metadata.push(d),bn(i.wbrels,-1,"metadata."+e,ki.XLMETA),Oa(o,"[Content_Types].xml",un(a,i)),Oa(o,"_rels/.rels",cn(i.rels)),Oa(o,"xl/_rels/workbook."+e+".rels",cn(i.wbrels)),delete i.revssf,delete i.ssf,o}(n,i):function NE(n,i){hh=1024,n&&!n.SSF&&(n.SSF=ts(st)),n&&n.SSF&&(na(),Ms(n.SSF),i.revssf=uu(n.SSF),i.revssf[n.SSF[65535]]=0,i.ssf=n.SSF),i.rels={},i.wbrels={},i.Strings=[],i.Strings.Count=0,i.Strings.Unique=0,zg?i.revStrings=new Map:(i.revStrings={},i.revStrings.foo=[],delete i.revStrings.foo);var e="xml",r=G_.indexOf(i.bookType)>-1,a={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};Ow(i=i||{});var o=ed(),d="",p=0;if(i.cellXfs=[],F(i.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),Oa(o,d="docProps/core.xml",ro(n.Props,i)),a.coreprops.push(d),bn(i.rels,2,d,ki.CORE_PROPS),d="docProps/app.xml",!n.Props||!n.Props.SheetNames)if(n.Workbook&&n.Workbook.Sheets){for(var D=[],P=0;P<n.SheetNames.length;++P)2!=(n.Workbook.Sheets[P]||{}).Hidden&&D.push(n.SheetNames[P]);n.Props.SheetNames=D}else n.Props.SheetNames=n.SheetNames;n.Props.Worksheets=n.Props.SheetNames.length,Oa(o,d,Nu(n.Props)),a.extprops.push(d),bn(i.rels,3,d,ki.EXT_PROPS),n.Custprops!==n.Props&&no(n.Custprops||{}).length>0&&(Oa(o,d="docProps/custom.xml",Ls(n.Custprops)),a.custprops.push(d),bn(i.rels,4,d,ki.CUST_PROPS));var B=["SheetJ5"];for(i.tcid=0,p=1;p<=n.SheetNames.length;++p){var te={"!id":{}},ae=n.Sheets[n.SheetNames[p-1]];if(Oa(o,d="xl/worksheets/sheet"+p+"."+e,M1(p-1,i,n,te)),a.sheets.push(d),bn(i.wbrels,-1,"worksheets/sheet"+p+"."+e,ki.WS[0]),ae){var ge=ae["!comments"],ue=!1,Te="";if(ge&&ge.length>0){var qe=!1;ge.forEach(function(ht){ht[1].forEach(function(ut){1==ut.T&&(qe=!0)})}),qe&&(Oa(o,Te="xl/threadedComments/threadedComment"+p+"."+e,Yv(ge,B,i)),a.threadedcomments.push(Te),bn(te,-1,"../threadedComments/threadedComment"+p+"."+e,ki.TCMNT)),Oa(o,Te="xl/comments"+p+"."+e,M0(ge)),a.comments.push(Te),bn(te,-1,"../comments"+p+"."+e,ki.CMNT),ue=!0}ae["!legacy"]&&ue&&Oa(o,"xl/drawings/vmlDrawing"+p+".vml",Nv(p,ae["!comments"])),delete ae["!comments"],delete ae["!legacy"]}te["!id"].rId1&&Oa(o,An(d),cn(te))}return null!=i.Strings&&i.Strings.length>0&&(Oa(o,d="xl/sharedStrings."+e,Tm(i.Strings,i)),a.strs.push(d),bn(i.wbrels,-1,"sharedStrings."+e,ki.SST)),Oa(o,d="xl/workbook."+e,zm(n)),a.workbooks.push(d),bn(i.rels,1,d,ki.WB),Oa(o,d="xl/theme/theme1.xml",Ov(n.Themes,i)),a.themes.push(d),bn(i.wbrels,-1,"theme/theme1.xml",ki.THEME),Oa(o,d="xl/styles."+e,kg(n,i)),a.styles.push(d),bn(i.wbrels,-1,"styles."+e,ki.STY),n.vbaraw&&r&&(Oa(o,d="xl/vbaProject.bin",n.vbaraw),a.vba.push(d),bn(i.wbrels,-1,"vbaProject.bin",ki.VBA)),Oa(o,d="xl/metadata."+e,Mm()),a.metadata.push(d),bn(i.wbrels,-1,"metadata."+e,ki.XLMETA),B.length>1&&(Oa(o,d="xl/persons/person.xml",function _s(n){var i=[Ys,or("personList",null,{xmlns:Ei.TCMNT,"xmlns:x":pn[0]}).replace(/[\/]>/,">")];return n.forEach(function(e,r){i.push(or("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:e,providerId:"None"}))}),i.push("</personList>"),i.join("")}(B)),a.people.push(d),bn(i.wbrels,-1,"persons/person.xml",ki.PEOPLE)),Oa(o,"[Content_Types].xml",un(a,i)),Oa(o,"_rels/.rels",cn(i.rels)),Oa(o,"xl/_rels/workbook.xml.rels",cn(i.wbrels)),delete i.revssf,delete i.ssf,o}(n,i)}function Lw(n,i){var e="";switch((i||{}).type||"base64"){case"buffer":case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":e=Fa(n.slice(0,12));break;case"binary":e=n;break;default:throw new Error("Unrecognized type "+(i&&i.type||"undefined"))}return[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3),e.charCodeAt(4),e.charCodeAt(5),e.charCodeAt(6),e.charCodeAt(7)]}function zE(n,i){var e=0;e:for(;e<n.length;)switch(n.charCodeAt(e)){case 10:case 13:case 32:++e;break;case 60:return kw(n.slice(e),i);default:break e}return Lh.to_workbook(n,i)}function Pw(n,i,e,r){return r?(e.type="string",Lh.to_workbook(n,e)):Lh.to_workbook(i,e)}function Qx(n,i){Pa();var e=i||{};if(typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer)return Qx(new Uint8Array(n),((e=ts(e)).type="array",e));typeof Uint8Array<"u"&&n instanceof Uint8Array&&!e.type&&(e.type=typeof Deno<"u"?"buffer":"array");var a,r=n,o=!1;if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),qp={},e.dateNF&&(qp.dateNF=e.dateNF),e.type||(e.type=Et&&Buffer.isBuffer(n)?"buffer":"base64"),"file"==e.type&&(e.type=Et?"buffer":"binary",r=function Fc(n){if(typeof fs<"u")return fs.readFileSync(n);if(typeof Deno<"u")return Deno.readFileSync(n);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var i=File(n);i.open("r"),i.encoding="binary";var e=i.read();return i.close(),e}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+n)}(n),typeof Uint8Array<"u"&&!Et&&(e.type="array")),"string"==e.type&&(o=!0,e.type="binary",e.codepage=65001,r=function $R(n){return n.match(/[^\x00-\x7F]/)?_o(n):n}(n)),"array"==e.type&&typeof Uint8Array<"u"&&n instanceof Uint8Array&&typeof ArrayBuffer<"u"){var d=new ArrayBuffer(3),p=new Uint8Array(d);if(p.foo="bar",!p.foo)return(e=ts(e)).type="array",Qx(Mt(r),e)}switch((a=Lw(r,e))[0]){case 208:if(207===a[1]&&17===a[2]&&224===a[3]&&161===a[4]&&177===a[5]&&26===a[6]&&225===a[7])return function HR(n,i){return $r.find(n,"EncryptedPackage")?zR(n,i):_E(n,i)}($r.read(r,e),e);break;case 9:if(a[1]<=8)return _E(r,e);break;case 60:return kw(r,e);case 73:if(73===a[1]&&42===a[2]&&0===a[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===a[1])return function mg(n,i){var e=i||{},r=!!e.WTF;e.WTF=!0;try{var a=g0.to_workbook(n,e);return e.WTF=r,a}catch(o){if(e.WTF=r,!o.message.match(/SYLK bad record ID/)&&r)throw o;return Lh.to_workbook(n,i)}}(r,e);break;case 84:if(65===a[1]&&66===a[2]&&76===a[3])return Cm.to_workbook(r,e);break;case 80:return 75===a[1]&&a[2]<9&&a[3]<9?function VR(n,i){var r=n,a=i||{};return a.type||(a.type=Et&&Buffer.isBuffer(n)?"buffer":"base64"),NR(Js(r,a),a)}(r,e):Pw(n,r,e,o);case 239:return 60===a[3]?kw(r,e):Pw(n,r,e,o);case 255:if(254===a[1])return function jR(n,i){var e=n;return"base64"==i.type&&(e=Fa(e)),e=Mr.utils.decode(1200,e.slice(2),"str"),i.type="binary",zE(e,i)}(r,e);if(0===a[1]&&2===a[2]&&0===a[3])return qh.to_workbook(r,e);break;case 0:if(0===a[1]&&(a[2]>=2&&0===a[3]||0===a[2]&&(8===a[3]||9===a[3])))return qh.to_workbook(r,e);break;case 3:case 131:case 139:case 140:return uc.to_workbook(r,e);case 123:if(92===a[1]&&114===a[2]&&116===a[3])return Ao.to_workbook(r,e);break;case 10:case 13:case 32:return function UR(n,i){var e="",r=Lw(n,i);switch(i.type){case"base64":e=Fa(n);break;case"binary":e=n;break;case"buffer":e=n.toString("binary");break;case"array":e=Jl(n);break;default:throw new Error("Unrecognized type "+i.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(e=Rs(e)),i.type="binary",zE(e,i)}(r,e);case 137:if(80===a[1]&&78===a[2]&&71===a[3])throw new Error("PNG Image File is not a spreadsheet")}return wm.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?uc.to_workbook(r,e):Pw(n,r,e,o)}function YE(n,i){switch(i.type){case"base64":case"binary":break;case"buffer":case"array":i.type="";break;case"file":return gs(i.file,$r.write(n,{type:Et?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+i.bookType+"' files");default:throw new Error("Unrecognized type "+i.type)}return $r.write(n,i)}function Hm(n,i,e){e||(e="");var r=e+n;switch(i.type){case"base64":return Ia(_o(r));case"binary":return _o(r);case"string":return n;case"file":return gs(i.file,r,"utf8");case"buffer":return Et?je(r,"utf8"):typeof TextEncoder<"u"?(new TextEncoder).encode(r):Hm(r,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+i.type)}function eb(n,i){switch(i.type){case"string":case"base64":case"binary":for(var e="",r=0;r<n.length;++r)e+=String.fromCharCode(n[r]);return"base64"==i.type?Ia(e):"string"==i.type?Rs(e):e;case"file":return gs(i.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+i.type)}}function X1(n,i){Pa(),function hy(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");!function N1(n,i,e){n.forEach(function(r,a){B1(r);for(var o=0;o<a;++o)if(r==n[o])throw new Error("Duplicate Sheet Name: "+r);if(e){var d=i&&i[a]&&i[a].CodeName||r;if(95==d.charCodeAt(0)&&d.length>22)throw new Error("Bad Code Name: Worksheet"+d)}})}(n.SheetNames,n.Workbook&&n.Workbook.Sheets||[],!!n.vbaraw);for(var e=0;e<n.SheetNames.length;++e)Ce(n.Sheets[n.SheetNames[e]],0,e)}(n);var e=ts(i||{});if(e.cellStyles&&(e.cellNF=!0,e.sheetStubs=!0),"array"==e.type){e.type="binary";var r=X1(n,e);return e.type="array",ai(r)}var a=0;if(e.sheet&&(a="number"==typeof e.sheet?e.sheet:n.SheetNames.indexOf(e.sheet),!n.SheetNames[a]))throw new Error("Sheet not found: "+e.sheet+" : "+typeof e.sheet);switch(e.bookType||"xlsb"){case"xml":case"xlml":return Hm(UM(n,e),e);case"slk":case"sylk":return Hm(g0.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"htm":case"html":return Hm(kE(n.Sheets[n.SheetNames[a]],e),e);case"txt":return function ZR(n,i){switch(i.type){case"base64":return Ia(n);case"binary":case"string":return n;case"file":return gs(i.file,n,"binary");case"buffer":return Et?je(n,"binary"):n.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+i.type)}(WE(n.Sheets[n.SheetNames[a]],e),e);case"csv":return Hm(Bw(n.Sheets[n.SheetNames[a]],e),e,"\ufeff");case"dif":return Hm(Cm.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"dbf":return eb(uc.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"prn":return Hm(Lh.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"rtf":return Hm(Ao.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"eth":return Hm(bv.from_sheet(n.Sheets[n.SheetNames[a]],e),e);case"fods":return Hm(LE(n,e),e);case"wk1":return eb(qh.sheet_to_wk1(n.Sheets[n.SheetNames[a]],e),e);case"wk3":return eb(qh.book_to_wk3(n,e),e);case"biff2":e.biff||(e.biff=2);case"biff3":e.biff||(e.biff=3);case"biff4":return e.biff||(e.biff=4),eb(yE(n,e),e);case"biff5":e.biff||(e.biff=5);case"biff8":case"xla":case"xls":return e.biff||(e.biff=8),function qR(n,i){var e=i||{};return YE(function KM(n,i){var e=i||{},r=$r.utils.cfb_new({root:"R"}),a="/Workbook";switch(e.bookType||"xls"){case"xls":e.bookType="biff8";case"xla":e.bookType||(e.bookType="xla");case"biff8":a="/Workbook",e.biff=8;break;case"biff5":a="/Book",e.biff=5;break;default:throw new Error("invalid type "+e.bookType+" for XLS CFB")}return $r.utils.cfb_add(r,a,yE(n,e)),8==e.biff&&(n.Props||n.Custprops)&&function ZM(n,i){var d,e=[],r=[],a=[],o=0,p=Xd(Tt,"n"),D=Xd(Ne,"n");if(n.Props)for(d=no(n.Props),o=0;o<d.length;++o)(Object.prototype.hasOwnProperty.call(p,d[o])?e:Object.prototype.hasOwnProperty.call(D,d[o])?r:a).push([d[o],n.Props[d[o]]]);if(n.Custprops)for(d=no(n.Custprops),o=0;o<d.length;++o)Object.prototype.hasOwnProperty.call(n.Props||{},d[o])||(Object.prototype.hasOwnProperty.call(p,d[o])?e:Object.prototype.hasOwnProperty.call(D,d[o])?r:a).push([d[o],n.Custprops[d[o]]]);var P=[];for(o=0;o<a.length;++o)kp.indexOf(a[o][0])>-1||Ec.indexOf(a[o][0])>-1||null!=a[o][1]&&P.push(a[o]);r.length&&$r.utils.cfb_add(i,"/\x05SummaryInformation",Jm(r,U1.SI,D,Ne)),(e.length||P.length)&&$r.utils.cfb_add(i,"/\x05DocumentSummaryInformation",Jm(e,U1.DSI,p,Tt,P.length?P:null,U1.UDI))}(n,r),8==e.biff&&n.vbaraw&&function s1(n,i){i.FullPaths.forEach(function(e,r){if(0!=r){var a=e.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==a.slice(-1)&&$r.utils.cfb_add(n,a,i.FileIndex[r].content)}})}(r,$r.read(n.vbaraw,{type:"string"==typeof n.vbaraw?"binary":"buffer"})),r}(n,e),e)}(n,e);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function WR(n,i){var e=ts(i||{});return function GE(n,i){var e={},r=Et?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(i.compression&&(e.compression="DEFLATE"),i.password)e.type=r;else switch(i.type){case"base64":e.type="base64";break;case"binary":e.type="string";break;case"string":throw new Error("'string' output type invalid for '"+i.bookType+"' files");case"buffer":case"file":e.type=r;break;default:throw new Error("Unrecognized type "+i.type)}var a=n.FullPaths?$r.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[e.type]||e.type,compression:!!i.compression}):n.generate(e);if(typeof Deno<"u"&&"string"==typeof a){if("binary"==i.type||"base64"==i.type)return a;a=new Uint8Array(ai(a))}return i.password&&typeof encrypt_agile<"u"?YE(encrypt_agile(a,i.password),i):"file"===i.type?gs(i.file,a):"string"==i.type?Rs(a):a}(YR(n,e),e)}(n,e);default:throw new Error("Unrecognized bookType |"+e.bookType+"|")}}function VE(n,i,e){var r=e||{};return r.type="file",r.file=i,function Fw(n){if(!n.bookType){var e=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();e.match(/^\.[a-z]+$/)&&(n.bookType=e.slice(1)),n.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[n.bookType]||n.bookType}}(r),X1(n,r)}function UE(n,i,e,r,a,o,d,p){var D=gr(e),P=p.defval,B=p.raw||!Object.prototype.hasOwnProperty.call(p,"raw"),te=!0,ae=1===a?[]:{};if(1!==a)if(Object.defineProperty)try{Object.defineProperty(ae,"__rowNum__",{value:e,enumerable:!1})}catch{ae.__rowNum__=e}else ae.__rowNum__=e;if(!d||n[e])for(var oe=i.s.c;oe<=i.e.c;++oe){var ge=d?n[e][oe]:n[r[oe]+D];if(void 0!==ge&&void 0!==ge.t){var ue=ge.v;switch(ge.t){case"z":if(null==ue)break;continue;case"e":ue=0==ue?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+ge.t)}if(null!=o[oe]){if(null==ue)if("e"==ge.t&&null===ue)ae[o[oe]]=null;else if(void 0!==P)ae[o[oe]]=P;else{if(!B||null!==ue)continue;ae[o[oe]]=null}else ae[o[oe]]=B&&("n"!==ge.t||"n"===ge.t&&!1!==p.rawNumbers)?ue:se(ge,ue,p);null!=ue&&(te=!1)}}else{if(void 0===P)continue;null!=o[oe]&&(ae[o[oe]]=P)}}return{row:ae,isempty:te}}function tb(n,i){if(null==n||null==n["!ref"])return[];var e={t:"n",v:0},r=0,a=1,o=[],d=0,p="",D={s:{r:0,c:0},e:{r:0,c:0}},P=i||{},B=null!=P.range?P.range:n["!ref"];switch(1===P.header?r=1:"A"===P.header?r=2:Array.isArray(P.header)?r=3:null==P.header&&(r=0),typeof B){case"string":D=ls(B);break;case"number":(D=ls(n["!ref"])).s.r=B;break;default:D=B}r>0&&(a=0);var te=gr(D.s.r),ae=[],oe=[],ge=0,ue=0,Te=Array.isArray(n),qe=D.s.r,ht=0,ut={};Te&&!n[qe]&&(n[qe]=[]);var mi=P.skipHidden&&n["!cols"]||[],zi=P.skipHidden&&n["!rows"]||[];for(ht=D.s.c;ht<=D.e.c;++ht)if(!(mi[ht]||{}).hidden)switch(ae[ht]=Va(ht),e=Te?n[qe][ht]:n[ae[ht]+te],r){case 1:o[ht]=ht-D.s.c;break;case 2:o[ht]=ae[ht];break;case 3:o[ht]=P.header[ht-D.s.c];break;default:if(null==e&&(e={w:"__EMPTY",t:"s"}),p=d=se(e,null,P),ue=ut[d]||0){do{p=d+"_"+ue++}while(ut[p]);ut[d]=ue,ut[p]=1}else ut[d]=1;o[ht]=p}for(qe=D.s.r+a;qe<=D.e.r;++qe)if(!(zi[qe]||{}).hidden){var vi=UE(n,D,qe,ae,r,o,Te,P);(!1===vi.isempty||(1===r?!1!==P.blankrows:P.blankrows))&&(oe[ge++]=vi.row)}return oe.length=ge,oe}var jE=/"/g;function $E(n,i,e,r,a,o,d,p){for(var D=!0,P=[],B="",te=gr(e),ae=i.s.c;ae<=i.e.c;++ae)if(r[ae]){var oe=p.dense?(n[e]||[])[ae]:n[r[ae]+te];if(null==oe)B="";else if(null!=oe.v){D=!1,B=""+(p.rawNumbers&&"n"==oe.t?oe.v:se(oe,null,p));for(var ge=0,ue=0;ge!==B.length;++ge)if((ue=B.charCodeAt(ge))===a||ue===o||34===ue||p.forceQuotes){B='"'+B.replace(jE,'""')+'"';break}"ID"==B&&(B='"ID"')}else null==oe.f||oe.F?B="":(D=!1,(B="="+oe.f).indexOf(",")>=0&&(B='"'+B.replace(jE,'""')+'"'));P.push(B)}return!1===p.blankrows&&D?null:P.join(d)}function Bw(n,i){var e=[],r=i??{};if(null==n||null==n["!ref"])return"";var a=ls(n["!ref"]),o=void 0!==r.FS?r.FS:",",d=o.charCodeAt(0),p=void 0!==r.RS?r.RS:"\n",D=p.charCodeAt(0),P=new RegExp(("|"==o?"\\|":o)+"+$"),B="",te=[];r.dense=Array.isArray(n);for(var ae=r.skipHidden&&n["!cols"]||[],oe=r.skipHidden&&n["!rows"]||[],ge=a.s.c;ge<=a.e.c;++ge)(ae[ge]||{}).hidden||(te[ge]=Va(ge));for(var ue=0,Te=a.s.r;Te<=a.e.r;++Te)(oe[Te]||{}).hidden||null!=(B=$E(n,a,Te,te,d,D,o,r))&&(r.strip&&(B=B.replace(P,"")),(B||!1!==r.blankrows)&&e.push((ue++?p:"")+B));return delete r.dense,e.join("")}function WE(n,i){i||(i={}),i.FS="\t",i.RS="\n";var e=Bw(n,i);return typeof Mr>"u"||"string"==i.type?e:"\xff\xfe"+Mr.utils.encode(1200,e,"str")}function XE(n,i,e){var r=e||{},a=+!r.skipHeader,o=n||{},d=0,p=0;if(o&&null!=r.origin)if("number"==typeof r.origin)d=r.origin;else{var D="string"==typeof r.origin?Qa(r.origin):r.origin;d=D.r,p=D.c}var P,B={s:{c:0,r:0},e:{c:p,r:d+i.length-1+a}};if(o["!ref"]){var te=ls(o["!ref"]);B.e.c=Math.max(B.e.c,te.e.c),B.e.r=Math.max(B.e.r,te.e.r),-1==d&&(B.e.r=(d=te.e.r+1)+i.length-1+a)}else-1==d&&(d=0,B.e.r=i.length-1+a);var ae=r.header||[],oe=0;i.forEach(function(ue,Te){no(ue).forEach(function(qe){-1==(oe=ae.indexOf(qe))&&(ae[oe=ae.length]=qe);var ht=ue[qe],ut="z",mi="",zi=xa({c:p+oe,r:d+Te+a});P=q1(o,zi),!ht||"object"!=typeof ht||ht instanceof Date?("number"==typeof ht?ut="n":"boolean"==typeof ht?ut="b":"string"==typeof ht?ut="s":ht instanceof Date?(ut="d",r.cellDates||(ut="n",ht=Es(ht)),mi=r.dateNF||st[14]):null===ht&&r.nullError&&(ut="e",ht=0),P?(P.t=ut,P.v=ht,delete P.w,delete P.R,mi&&(P.z=mi)):o[zi]=P={t:ut,v:ht},mi&&(P.z=mi)):o[zi]=ht})}),B.e.c=Math.max(B.e.c,p+ae.length-1);var ge=gr(d);if(a)for(oe=0;oe<ae.length;++oe)o[Va(oe+p)+ge]={t:"s",v:ae[oe]};return o["!ref"]=ba(B),o}function q1(n,i,e){if("string"==typeof i){if(Array.isArray(n)){var r=Qa(i);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[i]||(n[i]={t:"z"})}return q1(n,xa("number"!=typeof i?i:{r:i,c:e||0}))}function zw(n,i,e,r){var a=1;if(!e)for(;a<=65535&&-1!=n.SheetNames.indexOf(e="Sheet"+a);++a,e=void 0);if(!e||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(e)>=0){var o=e.match(/(^.*?)(\d+)$/);a=o&&+o[2]||0;var d=o&&o[1]||e;for(++a;a<=65535&&-1!=n.SheetNames.indexOf(e=d+a);++a);}if(B1(e),n.SheetNames.indexOf(e)>=0)throw new Error("Worksheet with name |"+e+"| already exists!");return n.SheetNames.push(e),n.Sheets[e]=i,e}function qE(n,i,e){return i?(n.l={Target:i},e&&(n.l.Tooltip=e)):delete n.l,n}var Kp={encode_col:Va,encode_row:gr,encode_cell:xa,encode_range:ba,decode_col:xo,decode_row:Ar,split_cell:function Hc(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Qa,decode_range:Go,format_cell:se,sheet_add_aoa:Ve,sheet_add_json:XE,sheet_add_dom:TE,aoa_to_sheet:Ee,json_to_sheet:function JR(n,i){return XE(null,n,i)},table_to_sheet:SE,table_to_book:function mR(n,i){return me(SE(n,i),i)},sheet_to_csv:Bw,sheet_to_txt:WE,sheet_to_json:tb,sheet_to_html:kE,sheet_to_formulae:function KR(n){var e,i="",r="";if(null==n||null==n["!ref"])return[];var p,a=ls(n["!ref"]),o="",d=[],D=[],P=Array.isArray(n);for(p=a.s.c;p<=a.e.c;++p)d[p]=Va(p);for(var B=a.s.r;B<=a.e.r;++B)for(o=gr(B),p=a.s.c;p<=a.e.c;++p)if(i=d[p]+o,r="",void 0!==(e=P?(n[B]||[])[p]:n[i])){if(null!=e.F){if(i=e.F,!e.f)continue;r=e.f,-1==i.indexOf(":")&&(i=i+":"+i)}if(null!=e.f)r=e.f;else{if("z"==e.t)continue;if("n"==e.t&&null!=e.v)r=""+e.v;else if("b"==e.t)r=e.v?"TRUE":"FALSE";else if(void 0!==e.w)r="'"+e.w;else{if(void 0===e.v)continue;r="s"==e.t?"'"+e.v:""+e.v}}D[D.length]=i+"="+r}return D},sheet_to_row_object_array:tb,sheet_get_cell:q1,book_new:function Nw(){return{SheetNames:[],Sheets:{}}},book_append_sheet:zw,book_set_sheet_visibility:function eO(n,i,e){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=function QR(n,i){if("number"==typeof i){if(i>=0&&n.SheetNames.length>i)return i;throw new Error("Cannot find sheet # "+i)}if("string"==typeof i){var e=n.SheetNames.indexOf(i);if(e>-1)return e;throw new Error("Cannot find sheet name |"+i+"|")}throw new Error("Cannot find sheet |"+i+"|")}(n,i);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),e){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+e)}n.Workbook.Sheets[r].Hidden=e},cell_set_number_format:function tO(n,i){return n.z=i,n},cell_set_hyperlink:qE,cell_set_internal_link:function iO(n,i,e){return qE(n,"#"+i,e)},cell_add_comment:function nO(n,i,e){n.c||(n.c=[]),n.c.push({t:i,a:e||"SheetJS"})},sheet_set_array_formula:function rO(n,i,e,r){for(var a="string"!=typeof i?i:ls(i),o="string"==typeof i?i:ba(i),d=a.s.r;d<=a.e.r;++d)for(var p=a.s.c;p<=a.e.c;++p){var D=q1(n,d,p);D.t="n",D.F=o,delete D.v,d==a.s.r&&p==a.s.c&&(D.f=e,r&&(D.D=!0))}return n},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},ZE=Zt(2880);let KE=(()=>{class n{constructor(){}exportAsExcelFile(e,r){const d=X1({Sheets:{data:Kp.json_to_sheet(e)},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(d,r)}saveAsExcelFile(e,r){const a=new Blob([e],{type:cO});(0,ZE.saveAs)(a,`${r}_${(new Date).getTime()}${uO}`)}exportToExcel(e,r){const o=Kp.json_to_sheet([{Name:"John Doe",Address:"123 St, City",DOB:"1990-02-15",Email:"john@example.com",Mobile:"9876543210",Status:"Active",Gender:"Male",State:"State1",City:"City1",Zip_Code:"123456",Designation:"",Department:"",Joining_Date:"2024-10-01",Password:"123456",Confirm_Password:"123456"},{Name:"Jane Smith",Address:"456 Ave, City",DOB:"1992-05-20",Email:"jane@example.com",Mobile:"9876543211",Status:"Active",Gender:"Female",State:"State2",City:"City2",Zip_Code:"654321",Designation:"",Department:"",Joining_Date:"2024-09-15",Password:"123456",Confirm_Password:"123456"}]),d=e.map(P=>P.name).join(","),p=r.map(P=>P.name).join(",");console.log(d),o["!dataValidation"]=[{sqref:"K2:K100",type:"list",formula1:`"${p}"`,showDropDown:!0},{sqref:"L2:L100",type:"list",formula1:`"${d}"`,showDropDown:!0}],console.log(o);const D=Kp.book_new();Kp.book_append_sheet(D,o,"EmployeeData"),VE(D,"EmployeeData.xlsx")}createSampleExcel(e,r){const P=[["Department IDs"],["ID","Department"],...e.map(ue=>[ue.id,ue.name]),[],["Designation IDs"],["ID","Designation"],...r.map(ue=>[ue.id,ue.name])],B=Kp.book_new(),te=Kp.aoa_to_sheet([["Name *","Employee ID *","Email *","Mobile *","Date of Birth (YYYY-MM-DD)","Joining Date (YYYY-MM-DD)","Department ID *","Designation ID *","Gender * (Male/Female/Other)","Address","City","Zip Code","State","Status * (Active/Inactive)","Password"],["John Doe","EMPID123","john.doe@example.com","9876543210","1990-01-01","2022-01-01","101","201","Male","123 Main St","A","123456","","Active","123456"]]),ae=Kp.aoa_to_sheet(P);Kp.book_append_sheet(B,te,"Employee Data"),Kp.book_append_sheet(B,ae,"Designations Data");const oe=X1(B,{bookType:"xlsx",type:"array"}),ge=new Blob([oe],{type:"application/octet-stream"});(0,ZE.saveAs)(ge,"Employee_Sample.xlsx")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const cO="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",uO=".xlsx";var Wu=Zt(5140),nf=Zt(1768),ev=Zt(4884);const dO=["showModal"],hO=["deleteRecordModal"];function fO(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function pO(n,i){if(1&n&&(t.I0R(0,"span",100),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}const JE=()=>({tab:"personalDetails"});function mO(n,i){if(1&n){const e=t.KQA();t.I0R(0,"ul",122)(1,"li")(2,"a",123),t.wR5(3,"i",124),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",125),t.wR5(7,"i",126),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",127),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.removeItem(a.id))}),t.wR5(11,"i",128),t.OEk(12," Remove"),t.C$Y()()()}if(2&n){const e=t.GaO().$implicit;t.yG2(2),t.CI5("routerLink","/employee-detail/",e.id,""),t.E7m("queryParams",t.q4q(3,JE)),t.yG2(4),t.CI5("routerLink","/edit-employee/",e.id,"")}}const gO=n=>["/employee-detail",n],vO=(n,i)=>({"bg-info-subtle text-info":n,"bg-danger-subtle text-danger":i});function _O(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",101)(1,"td")(2,"div",36)(3,"input",102),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",103),t.C$Y()(),t.I0R(5,"td",104)(6,"a",105),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",106)(9,"div",107)(10,"div",108),t.wR5(11,"img",109),t.C$Y(),t.I0R(12,"div",80)(13,"h5",110)(14,"a",111),t.OEk(15),t.C$Y()(),t.I0R(16,"p",48),t.OEk(17),t.C$Y()()()(),t.I0R(18,"td",112),t.OEk(19),t.C$Y(),t.I0R(20,"td",112),t.OEk(21),t.C$Y(),t.I0R(22,"td",112),t.OEk(23),t.C$Y(),t.I0R(24,"td",112),t.OEk(25),t.C$Y(),t.I0R(26,"td",113)(27,"div",114)(28,"input",115),t.qCj("change",function(a){const d=t.usT(e).$implicit,p=t.GaO();return t.CGJ(p.setStatus(d.id,a))}),t.C$Y(),t.I0R(29,"label",116)(30,"span",117),t.OEk(31),t.C$Y()()()(),t.I0R(32,"td")(33,"div",118)(34,"button",119),t.wR5(35,"i",120),t.C$Y(),t.yuY(36,mO,13,4,"ul",121),t.C$Y()()()}if(2&n){const e=i.$implicit,r=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(8),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(3),t.E7m("routerLink",t.S45(17,gO,e.id))("queryParams",t.q4q(19,JE)),t.yG2(),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.designation_name," "),t.yG2(2),t.oRS(" ",e.mobile," "),t.yG2(2),t.oRS(" ",e.employee_id," "),t.yG2(2),t.oRS(" ",e.designation_name," "),t.yG2(2),t.oRS(" ",e.department_name," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),t.yG2(),t.E7m("for","customSwitchsizemd"+r),t.yG2(),t.E7m("ngClass",t.IBC(20,vO,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," ")}}function yO(n,i){1&n&&(t.I0R(0,"div",41)(1,"div",129)(2,"span",130),t.OEk(3,"Loading..."),t.C$Y()()())}function xO(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",131),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredemployeeData?null:e.filteredemployeeData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}let bO=(()=>{class n{constructor(e,r,a,o,d,p){this.formBuilder=e,this.api=r,this.ExcelService=a,this.toastService=o,this.route=d,this.router=p,this.spinnerStatus=!1,this.employeeData=[],this.employeeDataList=[],this.filteredemployeeData=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.selectedStatus="",this.departments=[],this.selectedDepartments=[],this.selectedDesignations=[],this.selectedEmp=[],this.designations=[],this.filterCounts={termCount:0,designationCount:0,departmentCount:0,statusCount:0,empCount:0,dateCount:0},this.checkedValGet=[],this.direction="asc"}exportData(){this.ExcelService.createSampleExcel(this.departments,this.designations)}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management",active:!0},{label:"Employees",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedDepartments=r.selectedDepartments?r.selectedDepartments.split(","):[],this.selectedDesignations=r.selectedDesignations?r.selectedDesignations.split(","):[],this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],this.selectedStatus=r.selectedStatus||null,this.filterdata(),this.updatePaginatedData()}),this.company_id&&(this.getemployeeData(),this.getDepartment(),this.getDesignation())}onFileChange(e){const r=e.target;if(1!==r.files.length)throw new Error("Cannot use multiple files");const a=new FileReader;a.onload=o=>{const p=Qx(o.target.result,{type:"binary"}),B=Kp.sheet_to_json(p.Sheets[p.SheetNames[0]],{header:1});this.populateForm(B)},a.readAsBinaryString(r.files[0])}populateForm(e){e.slice(1).forEach(o=>{this.formGroup.patchValue({name:o[0],address:o[1],dob:o[2],emp_id:o[3],email:o[4],mobile:o[5],status:o[6],gender:o[7],state:o[8],city:o[9],zip_code:o[10],designation:o[11],department:o[12],joining_date:o[13],password:o[14],confirmPassword:o[15]})})}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.employeeDataList=r.data||[],this.filterdata()):(this.employeeData=[],this.employeeDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const o=r.target.checked?"active":"inactive",d=new FormData;d.append("status",o),d.append("company_id",this.company_id),this.toggleSpinner(!0),this.api.put("employees",e,d).subscribe(p=>this.handleStatusChangeResponse(p),p=>this.handleError(p))}toggleSpinner(e){this.spinnerStatus=e}handleStatusChangeResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Data Saved Successfully!!"),this.getemployeeData()):this.toastService.error(e.message)}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("employees",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("employees-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.toastService.success("Employee Data Delete Successfully!!"),this.getemployeeData()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.employeeData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.employeeData=r}compare(e,r){return e<r?-1:e>r?1:0}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}filterdata(){let e=this.employeeDataList;this.filterCounts.termCount=0,this.filterCounts.designationCount=0,this.filterCounts.departmentCount=0,this.filterCounts.statusCount=0,this.filterCounts.empCount=0,this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase())||r.mobile.toLowerCase().includes(this.term.toLowerCase())||r.email.toLowerCase().includes(this.term.toLowerCase())||r.employee_id.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedDepartments.length>0&&(e=e.filter(r=>this.selectedDepartments.map(a=>a.toLowerCase()).includes(r.department_name.toLowerCase())),this.filterCounts.departmentCount=1),this.selectedDesignations&&this.selectedDesignations.length>0&&(e=e.filter(r=>this.selectedDesignations.map(a=>a.toLowerCase()).includes(r.designation_name.toLowerCase())),this.filterCounts.designationCount=1),this.selectedEmp&&this.selectedEmp.length>0&&(e=e.filter(r=>this.selectedEmp.map(a=>a.toLowerCase()).includes(r.name.toLowerCase())),this.filterCounts.empCount=1),this.selectedStatus&&(e=e.filter(r=>r.checkin_status===this.selectedStatus),this.filterCounts.statusCount=1),this.filteredemployeeData=e,(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&0===this.filteredemployeeData.length&&(this.currentPage=1),this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredemployeeData.length&&(this.currentPage=1),this.employeeData=(0,$n.cloneDeep)(this.filteredemployeeData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term,selectedDepartments:this.selectedDepartments.join(","),selectedDesignations:this.selectedDesignations.join(","),selectedEmp:this.selectedEmp.join(","),selectedStatus:this.selectedStatus},queryParamsHandling:"merge"})}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}reset(){this.term="",this.selectedDepartments=[],this.selectedDesignations=[],this.selectedEmp=[],this.selectedStatus="",this.employeeData=this.employeeDataList,this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedDepartments:null,selectedDesignations:null,selectedEmp:null,selectedStatus:null,page:1,itemsPerPage:this.currentItemsPerPage},queryParamsHandling:"merge"})}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.designationCount+this.filterCounts.departmentCount+this.filterCounts.statusCount+this.filterCounts.empCount}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.employeeData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onCheckboxChange(e){for(var r=[],o=0;o<this.employeeData.length;o++)1==this.employeeData[o].states&&r.push(this.employeeData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.employeeData=this.employeeData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.employeeData.length;o++)1==this.employeeData[o].states&&r.push(this.employeeData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(j.im),t.GI1(He.W),t.GI1(KE),t.GI1(Be.SA),t.GI1(T.gV),t.GI1(T.E5))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-employee-list"]],viewQuery:function(r,a){if(1&r&&(t.CC$(dO,5),t.CC$(hO,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:221,vars:23,consts:[["title","Employees List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name, mobile,etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button","routerLink","/add-employee",1,"btn","btn-secondary","add-btn"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"text-danger"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],["bsModal","",1,"modal","fade"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],["id","myModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"fs-lg","my-3"],[1,"d-flex"],[1,"ri-checkbox-circle-fill","text-success"],[1,"flex-grow-1","ms-2"],[1,"fw-bold"],[1,"d-flex","mt-2"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-primary"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],["bindLabel","name","bindValue","name","name","Employee name","placeholder","Select Employee name",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"fs-md"],[1,"text-dark",3,"routerLink","queryParams"],[1,"category"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"routerLink"],[1,"ph-pencil","align-middle","me-1"],[1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Employeess "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,fO,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"input",21),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",22),t.C$Y()(),t.I0R(27,"button",23),t.qCj("click",function(){t.usT(o);const p=t.Gew(88);return t.CGJ(p.show())}),t.wR5(28,"i",24),t.C$Y(),t.I0R(29,"button",25),t.wR5(30,"i",26),t.OEk(31," Add Employee "),t.C$Y(),t.I0R(32,"div",27)(33,"div",28)(34,"div")(35,"button",29),t.qCj("click",function(){return a.openEnd()}),t.wR5(36,"i",30),t.OEk(37," Filter "),t.yuY(38,pO,2,1,"span",31),t.C$Y()()()()()()(),t.I0R(39,"div",32)(40,"div",33)(41,"table",34)(42,"thead",35)(43,"tr")(44,"th")(45,"div",36)(46,"input",37),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(47,"label",38),t.C$Y()(),t.I0R(48,"th",39),t.qCj("click",function(){return a.onSort("name")}),t.OEk(49," Employee Name "),t.C$Y(),t.I0R(50,"th",39),t.qCj("click",function(){return a.onSort("mobile")}),t.OEk(51," Mobile "),t.C$Y(),t.I0R(52,"th",39),t.qCj("click",function(){return a.onSort("employee_id")}),t.OEk(53," Employee ID "),t.C$Y(),t.I0R(54,"th",39),t.qCj("click",function(){return a.onSort("designation")}),t.OEk(55," Designation "),t.C$Y(),t.I0R(56,"th",39),t.qCj("click",function(){return a.onSort("department")}),t.OEk(57," Department "),t.C$Y(),t.I0R(58,"th",39),t.qCj("click",function(){return a.onSort("status")}),t.OEk(59," Status "),t.C$Y(),t.I0R(60,"th"),t.OEk(61,"Action"),t.C$Y()()(),t.I0R(62,"tbody",40),t.c53(63,_O,37,23,"tr",101,t.wJt),t.C$Y(),t.yuY(65,yO,4,0,"div",41),t.C$Y()(),t.I0R(66,"div",42)(67,"div",43)(68,"div",44)(69,"div",45),t.wR5(70,"i",46),t.C$Y()(),t.I0R(71,"h5",47),t.OEk(72,"Sorry! No Result Found"),t.C$Y(),t.I0R(73,"p",48),t.OEk(74),t.C$Y()()(),t.I0R(75,"div",49)(76,"div",50)(77,"div",51),t.OEk(78," Showing "),t.I0R(79,"span",52),t.OEk(80),t.C$Y(),t.OEk(81," of "),t.I0R(82,"span",52),t.OEk(83),t.C$Y(),t.OEk(84," Results "),t.C$Y()(),t.I0R(85,"div",53),t.yuY(86,xO,1,4,"pagination",54),t.C$Y()()()()()()(),t.I0R(87,"div",55,56)(89,"div",57)(90,"div",58)(91,"div",59)(92,"button",60),t.qCj("click",function(){t.usT(o);const p=t.Gew(88);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(93,"div",61)(94,"div",62)(95,"div",63),t.wR5(96,"i",64),t.C$Y(),t.I0R(97,"div",65)(98,"h3",66),t.OEk(99,"Are you sure ?"),t.C$Y(),t.I0R(100,"p",67),t.OEk(101," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(102,"div",68)(103,"button",69),t.qCj("click",function(){t.usT(o);const p=t.Gew(88);return t.CGJ(p.hide())}),t.OEk(104," Close "),t.C$Y(),t.I0R(105,"button",70),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(106," Yes, Delete It! "),t.C$Y()()()()()(),t.I0R(107,"div",71,72)(109,"div",73)(110,"div",58)(111,"div",59)(112,"h5",74),t.OEk(113," Instructions for Filling Out the Excel Template "),t.C$Y(),t.I0R(114,"button",75),t.qCj("click",function(){t.usT(o);const p=t.Gew(108);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(115,"div",76)(116,"h6",77),t.OEk(117,"1. General Guidelines:"),t.C$Y(),t.I0R(118,"div",78)(119,"div",17),t.wR5(120,"i",79),t.C$Y(),t.I0R(121,"div",80)(122,"p",48),t.OEk(123," Ensure that all "),t.I0R(124,"span",81),t.OEk(125,"required fields (marked with an asterisk *)"),t.C$Y(),t.OEk(126," are filled out. "),t.C$Y()()(),t.I0R(127,"div",82)(128,"div",17),t.wR5(129,"i",79),t.C$Y(),t.I0R(130,"div",80)(131,"p",48),t.OEk(132," Do not modify the structure of the Excel sheet, such as adding/removing columns or renaming them. "),t.C$Y()()(),t.I0R(133,"h6",77),t.OEk(134,"2. Department and Designation IDs:"),t.C$Y(),t.I0R(135,"div",82)(136,"div",17),t.wR5(137,"i",79),t.C$Y(),t.I0R(138,"div",80)(139,"p",48),t.OEk(140," For columns "),t.I0R(141,"span",81),t.OEk(142," Department and Designation"),t.C$Y(),t.OEk(143,", you are required to enter the corresponding ID instead of the actual name. "),t.C$Y()()(),t.I0R(144,"div",82)(145,"div",17),t.wR5(146,"i",79),t.C$Y(),t.I0R(147,"div",80)(148,"p",48),t.OEk(149," The ID for each department and designation is provided in the Sample Data sheet of the Excel file. "),t.C$Y(),t.I0R(150,"div",82)(151,"div",17),t.wR5(152,"i",79),t.C$Y(),t.I0R(153,"div",80)(154,"p",48)(155,"span",81),t.OEk(156," Example:"),t.C$Y(),t.OEk(157,' If the department is "Human Resources" with ID 101, you must enter 101 in the '),t.I0R(158,"span",81),t.OEk(159,"Department"),t.C$Y(),t.OEk(160," column. "),t.C$Y()()(),t.I0R(161,"div",82)(162,"div",17),t.wR5(163,"i",79),t.C$Y(),t.I0R(164,"div",80)(165,"p",48)(166,"span",81),t.OEk(167," Example:"),t.C$Y(),t.OEk(168,' If the designation is "Manager" with ID 205, you must enter 205 in the '),t.I0R(169,"span",81),t.OEk(170,"Designation"),t.C$Y(),t.OEk(171," column. "),t.C$Y()()()()(),t.I0R(172,"h6",77),t.OEk(173,"3. Date Format:"),t.C$Y(),t.I0R(174,"div",82)(175,"div",17),t.wR5(176,"i",79),t.C$Y(),t.I0R(177,"div",80)(178,"p",48),t.OEk(179," All date fields (e.g., Date of Birth, Joining Date) must follow the format "),t.I0R(180,"span",81),t.OEk(181," YYYY-MM-DD."),t.C$Y()()()()(),t.I0R(182,"div",83)(183,"button",84),t.qCj("click",function(){t.usT(o);const p=t.Gew(108);return t.CGJ(p.hide())}),t.OEk(184," Close "),t.C$Y(),t.I0R(185,"button",85),t.OEk(186,"Save Changes"),t.C$Y()()()()(),t.I0R(187,"div",86)(188,"div",87)(189,"h5",88),t.OEk(190,"Attendance Filters"),t.C$Y(),t.I0R(191,"button",75),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(192,"div",89)(193,"div",2)(194,"div",3)(195,"div",90)(196,"p",91),t.OEk(197," Search name, Employee id etc... "),t.C$Y(),t.I0R(198,"div",20)(199,"input",92),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(200,"i",22),t.C$Y()()(),t.I0R(201,"div",3)(202,"div",90)(203,"p",91),t.OEk(204,"Employee Name"),t.C$Y(),t.I0R(205,"ng-select",93),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedEmp,p)||(a.selectedEmp=p),p}),t.C$Y()()(),t.I0R(206,"div",3)(207,"div",90)(208,"p",91),t.OEk(209,"Department"),t.C$Y(),t.I0R(210,"ng-select",94),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDepartments,p)||(a.selectedDepartments=p),p}),t.C$Y()()(),t.I0R(211,"div",3)(212,"div",90)(213,"p",91),t.OEk(214,"Designation"),t.C$Y(),t.I0R(215,"ng-select",95),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDesignations,p)||(a.selectedDesignations=p),p}),t.C$Y()()()()(),t.I0R(216,"div",96)(217,"button",97),t.qCj("click",function(){return a.reset()}),t.wR5(218,"i",98),t.OEk(219," Reset "),t.C$Y()()(),t.I0R(220,"div",99),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.employeeData?null:a.employeeData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.employeeDataList?null:a.employeeDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(13),t.C0Y(38,a.totalFilterCount>0?38:-1),t.yG2(8),t.OKB("ngModel",a.masterSelected),t.yG2(17),t.oho(a.employeeData),t.yG2(2),t.C0Y(65,a.spinnerStatus?65:-1),t.yG2(9),t.oRS(" We've searched ",a.employeeDataList.length," Empolyee We did not find any Empolyee for you search. "),t.yG2(6),t.cNF(null==a.employeeData?null:a.employeeData.length),t.yG2(3),t.cNF(null==a.filteredemployeeData?null:a.filteredemployeeData.length),t.yG2(3),t.C0Y(86,null!=a.filteredemployeeData&&a.filteredemployeeData.length?86:-1),t.yG2(113),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("items",a.employeeDataList)("multiple",!0),t.OKB("ngModel",a.selectedEmp),t.yG2(5),t.E7m("items",a.departments)("multiple",!0),t.OKB("ngModel",a.selectedDepartments),t.yG2(5),t.E7m("items",a.designations)("multiple",!0),t.OKB("ngModel",a.selectedDesignations))},dependencies:[Me.QF,Me.ay,We.O,T.ER,Wu.uo,Wu.M3,Wu.mY,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j._G,nt.im,nf.uK,ev.UT],styles:[".uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}"]})}return n})();var my=Zt(7995);const wO=["showModal"],CO=["showModalDepartment"];function EO(n,i){if(1&n&&t.wR5(0,"img",101),2&n){const e=t.GaO(2);t.E7m("src",e.employeeselectedImagePreview,t.K6U)}}function kO(n,i){if(1&n&&t.yuY(0,EO,1,1,"img",100),2&n){const e=t.GaO();t.C0Y(0,e.employeeselectedImagePreview?0:-1)}}function TO(n,i){if(1&n&&t.wR5(0,"img",102),2&n){const e=t.GaO();t.E7m("src",e.employeeuploadedImage,t.K6U)}}function SO(n,i){1&n&&t.wR5(0,"img",103)}function DO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Image is required."),t.C$Y())}function AO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Empolyee name is required."),t.C$Y())}function IO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Empolyee name must be at most 45 characters "),t.C$Y())}function MO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Employee Id is required."),t.C$Y())}function RO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Email is required."),t.C$Y())}function OO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Email must be a valid email address "),t.C$Y())}function LO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Mobile is required."),t.C$Y())}function PO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Please, Enter 10 digit Mobile Number. "),t.C$Y())}function FO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Date of Birth is required."),t.C$Y())}function BO(n,i){if(1&n&&(t.I0R(0,"option",105),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t._6D("value",e.id),t.yG2(),t.cNF(e.name)}}function NO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Designation is required."),t.C$Y())}function zO(n,i){if(1&n&&(t.I0R(0,"option",105),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t._6D("value",e.id),t.yG2(),t.cNF(e.name)}}function YO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Department is required."),t.C$Y())}function GO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Gender is required."),t.C$Y())}function HO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Address is required."),t.C$Y())}function VO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Address must be at most 100 characters "),t.C$Y())}function UO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"City is required."),t.C$Y())}function jO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Zip code is required. "),t.C$Y())}function $O(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Invalid zip code. "),t.C$Y())}function WO(n,i){if(1&n&&(t.I0R(0,"div"),t.yuY(1,jO,2,0,"div",106)(2,$O,2,0,"div",106),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("required")),t.yG2(),t.E7m("ngIf",null==e.f.zip_code?null:e.f.zip_code.hasError("maxlength"))}}function XO(n,i){if(1&n&&(t.I0R(0,"option",105),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function qO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"State is required."),t.C$Y())}function ZO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Status is required."),t.C$Y())}function KO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Password is required. "),t.C$Y())}const Yw=n=>({"is-invalid":n}),QE=(n,i)=>({"mdi-eye-off-outline":n,"mdi-eye-outline":i});function JO(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",59)(1,"div",107)(2,"label",108),t.OEk(3,"New Password*"),t.C$Y(),t.I0R(4,"div",109)(5,"input",110),t.qCj("input",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.checkPasswordPattern())}),t.C$Y(),t.I0R(6,"button",111),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.toggleFieldTextType1())}),t.wR5(7,"i",112),t.C$Y()(),t.yuY(8,KO,2,0,"div",106),t.C$Y()()}if(2&n){const e=t.GaO();t.yG2(5),t.E7m("type",e.fieldTextType1?"text":"password")("ngClass",t.S45(4,Yw,e.f.password.hasError("required")&&e.f.password.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(6,QE,!e.fieldTextType1,e.fieldTextType1)),t.yG2(),t.E7m("ngIf",e.f.password.hasError("required")&&e.f.password.touched)}}function QO(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Confirm Password is required. "),t.C$Y())}function eL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Password and Confirm Password does not match. "),t.C$Y())}function tL(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",59)(1,"div",107)(2,"label",113),t.OEk(3,"Confirm Password*"),t.C$Y(),t.I0R(4,"div",109),t.wR5(5,"input",114),t.I0R(6,"button",111),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.toggleFieldTextType2())}),t.wR5(7,"i",112),t.C$Y()(),t.yuY(8,QO,2,0,"div",106)(9,eL,2,0,"div",106),t.C$Y()()}if(2&n){const e=t.GaO();t.yG2(5),t.E7m("type",e.fieldTextType2?"text":"password")("ngClass",t.S45(5,Yw,e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched)),t.yG2(2),t.E7m("ngClass",t.IBC(7,QE,!e.fieldTextType2,e.fieldTextType2)),t.yG2(),t.E7m("ngIf",e.f.confirmPassword.hasError("required")&&e.f.confirmPassword.touched),t.yG2(),t.E7m("ngIf",e.formGroup.hasError("mismatch")&&(null==e.f.confirmPassword?null:e.f.confirmPassword.value)&&(null==e.f.password?null:e.f.password.value))}}function iL(n,i){if(1&n&&(t.I0R(0,"div",115)(1,"div",116)(2,"div",23)(3,"div",117)(4,"h5",118),t.OEk(5,"Password must contain:"),t.C$Y()(),t.I0R(6,"div")(7,"p",119),t.OEk(8," Minimum "),t.I0R(9,"b"),t.OEk(10,"8 characters"),t.C$Y()(),t.I0R(11,"p",120),t.OEk(12," At least "),t.I0R(13,"b"),t.OEk(14,"one lowercase"),t.C$Y(),t.OEk(15," letter (a-z) "),t.C$Y(),t.I0R(16,"p",121),t.OEk(17," At least "),t.I0R(18,"b"),t.OEk(19,"one uppercase"),t.C$Y(),t.OEk(20," letter (A-Z) "),t.C$Y(),t.I0R(21,"p",122),t.OEk(22," At least "),t.I0R(23,"b"),t.OEk(24,"one number"),t.C$Y(),t.OEk(25," (0-9) "),t.C$Y(),t.I0R(26,"p",123),t.OEk(27," At least "),t.I0R(28,"b"),t.OEk(29,"one special character"),t.C$Y(),t.OEk(30," (!@#$!%*?&) "),t.C$Y()()()()()),2&n){const e=t.GaO();t.yG2(7),t.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),t.yG2(4),t.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),t.yG2(5),t.eAK("valid",e.passwordValidations.upper),t.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.number?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.special?"valid":"invalid")}}function nL(n,i){1&n&&(t.I0R(0,"button",124),t.OEk(1,"Save"),t.C$Y())}function rL(n,i){1&n&&(t.I0R(0,"button",125),t.wR5(1,"span",126),t.OEk(2," Please wait "),t.C$Y())}function aL(n,i){1&n&&(t.I0R(0,"div",80)(1,"div",127)(2,"span",128),t.OEk(3,"Loading..."),t.C$Y()()())}function sL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Designation name is required."),t.C$Y())}function oL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Designation name must be at most 45 characters "),t.C$Y())}function lL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Status is required."),t.C$Y())}function cL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Department name is required."),t.C$Y())}function uL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1," Department name must be at most 45 characters "),t.C$Y())}function dL(n,i){1&n&&(t.I0R(0,"div",104),t.OEk(1,"Status is required."),t.C$Y())}let ek=(()=>{class n{constructor(e,r,a,o,d,p){this.route=e,this.formBuilder=r,this.api=a,this.router=o,this.toastService=d,this.location=p,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeselectedImage=null,this.employeeselectedImagePreview=null,this.employeeuploadedImage=null,this.states=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Delhi","Puducherry","Ladakh","Jammu and Kashmir"],this.fieldTextType1=!1,this.fieldTextType2=!1,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1,special:!1},this.useDefaultPassword=!0,this.departments=[],this.designations=[]}ngOnInit(){this.breadCrumbItems=[{label:"Employee",active:!0},{label:"Add",active:!0}],this.route.params.subscribe(r=>{this.urlId=r.id?Number(r.id):null}),this.initializeForm(),this.urlId&&(this.useDefaultPassword=!1,this.getemployeeData());const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.updateFormControls(),this.getDepartment(),this.getDesignation(),this.formGroupDesignation=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]}),this.formGroupDepartment=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}initializeForm(){this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],address:["",[j.AQ.maxLength(100)]],dob:[""],image:["",this.imageValidator()],emp_id:["",[j.AQ.required]],email:["",[j.AQ.required,j.AQ.email,j.AQ.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],mobile:["",[j.AQ.required,j.AQ.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],status:["",[j.AQ.required]],gender:["",[j.AQ.required]],state:[""],city:[""],zip_code:["",[j.AQ.maxLength(6)]],designation:["",[j.AQ.required]],department:["",[j.AQ.required]],joining_date:[""],password:[this.urlId?"":"123456",this.urlId?[j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]:[j.AQ.required,j.AQ.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]],confirmPassword:[this.urlId?"":"123456",this.urlId?[]:[j.AQ.required]]},{validator:this.passwordMatchValidator})}imageValidator(){}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}passwordMatchValidator(e){const r=e.get("password")?.value,a=e.get("confirmPassword")?.value;return r&&a?r===a?null:{mismatch:!0}:null}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e),this.passwordValidations.special=/[@$!%*?&]/.test(e);const r=this.formGroup.get("confirmPassword");e?r?.setValidators([j.AQ.required]):r?.clearValidators(),r?.updateValueAndValidity()}onCheckboxChange(e){this.useDefaultPassword=e.target.checked,this.updateFormControls()}updateFormControls(){this.useDefaultPassword?(this.formGroup.get("password")?.setValue("123456"),this.formGroup.get("confirmPassword")?.setValue("123456"),this.formGroup.get("password")?.disable(),this.formGroup.get("confirmPassword")?.disable()):(this.formGroup.get("password")?.enable(),this.formGroup.get("confirmPassword")?.enable(),this.formGroup.get("password")?.setValue(""),this.formGroup.get("confirmPassword")?.setValue(""))}get f(){return this.formGroup.controls}get d(){return this.formGroupDesignation.controls}get de(){return this.formGroupDepartment.controls}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.setemployeeDetails(e.data[0])):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}setemployeeDetails(e){e&&(this.formGroup.patchValue({name:e.name,address:e.address,dob:e.dob,emp_id:e.employee_id,email:e.email,password:e.password,status:e.status,mobile:e.mobile,joining_date:e.joining_date,gender:e.gender,designation:e.designation,department:e.department,state:e.state,city:e.city,zip_code:e.zip_code}),this.employeeuploadedImage=e.image||"")}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();console.log(this.urlId),this.urlId?this.updateemployee(e):this.addemployee(e)}else this.formGroup.markAllAsTouched()}capitalizeWords(e){return e.toLowerCase().replace(/\b\w/g,r=>r.toUpperCase())}createFormData(){const e=new FormData;return e.append("company_id",this.company_id),e.append("name",this.capitalizeWords(this.f.name.value.trim())),e.append("mobile",this.f.mobile.value),e.append("email",this.f.email.value),e.append("address",this.f.address.value),e.append("dob",this.f.dob.value),e.append("employee_id",this.f.emp_id.value),e.append("status",this.f.status.value),e.append("joining_date",this.f.joining_date.value),e.append("gender",this.f.gender.value),e.append("designation",this.f.designation.value),e.append("department",this.f.department.value),e.append("state",this.f.state.value),e.append("city",this.f.city.value),e.append("zip_code",this.f.zip_code.value),this.f.password.value&&e.append("password",this.f.password.value),this.employeeselectedImage&&e.append("image",this.employeeselectedImage),e}addemployee(e){this.api.post("employees",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}updateemployee(e){const r=this.urlId;console.log("up"),this.api.put("employees",r,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.resetForm(),this.toastService.success("Data Saved Successfully!!"),this.router.navigate(["employee"])):this.toastService.error(e.message)}resetForm(){this.employeeselectedImage=null,this.formGroup.reset()}handleError(e){this.toggleSpinner(!1)}employeeimageSelect(e){const r=e.target.files[0];r&&(this.employeeselectedImage=r,this.employeeselectedImagePreview=URL.createObjectURL(r))}employeeremoveImage(){this.employeeselectedImage=null,this.employeeselectedImagePreview=null}onAdd(){this.resetFormDes(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDes(){this.formGroupDesignation.reset(),this.formGroupDesignation.patchValue({name:"",status:""})}onSubmitDes(){if(this.formGroupDesignation.valid){this.toggleSpinner(!0);const e=this.createFormDataDes();this.adddes(e)}else this.formGroupDesignation.markAllAsTouched()}createFormDataDes(){return{company_id:this.company_id,name:this.d.name.value,status:this.d.status.value}}adddes(e){this.api.post("designation",e).subscribe(r=>this.handleResponseDes(r),r=>this.handleError(r))}handleResponseDes(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDesignation.reset(),this.toastService.success("Designation Created Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}onAdddep(){this.resetFormDes(),this.showModalDepartment?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add"}resetFormDep(){this.formGroupDepartment.reset(),this.formGroupDepartment.patchValue({name:"",status:""})}onSubmitDep(){if(this.formGroupDepartment.valid){this.toggleSpinner(!0);const e=this.createFormDataDep();this.adddep(e)}else this.formGroupDepartment.markAllAsTouched()}createFormDataDep(){return{company_id:this.company_id,name:this.de.name.value,status:this.de.status.value}}adddep(e){this.api.post("department",e).subscribe(r=>this.handleResponseDep(r),r=>this.handleError(r))}handleResponseDep(e){this.toggleSpinner(!1),!0===e.status?(this.formGroupDepartment.reset(),this.toastService.success("Department Created Successfully!!"),this.getDepartment(),this.showModalDepartment?.hide()):this.toastService.error(e.message)}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(T.gV),t.GI1(j.im),t.GI1(He.W),t.GI1(T.E5),t.GI1(Be.SA),t.GI1(Me.oB))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-add-employee"]],viewQuery:function(r,a){if(1&r&&(t.CC$(wO,5),t.CC$(CO,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.showModalDepartment=o.first)}},decls:265,vars:52,consts:[[3,"title","breadcrumbItems"],[1,"text-end"],[1,"btn","btn-secondary","mb-2",3,"click"],[1,"mdi","mdi-keyboard-backspace","align-baseline","me-1"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["class","invalid-text"],["type","file","id","empimage","accept","image/*","formControlName","image","hidden","",3,"change"],["empimage",""],["for","empimage",1,"avatar-xs","p-0","rounded-circle","profile-photo-edit","position-absolute","end-0","bottom-0"],["for","empimage","placement","right","tooltip","Select Employee Photo",1,"profile-photo-edit","avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-body"],[1,"bi","bi-camera"],[1,"col-xl-9"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-xxl-12"],[1,"col-lg-6"],[1,"mb-3"],["for","name",1,"form-label"],[1,"text-danger"],["type","text","id","name","formControlName","name","placeholder","Enter Empolyee name","value","name",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","id","emp_id","formControlName","emp_id","placeholder","Enter Employee Id","value","emp_id",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","placeholder","Enter email","value","email",1,"form-control",3,"ngClass"],["for","contact",1,"form-label"],["type","number","id","contact","formControlName","mobile","placeholder","Enter mobile","value","mobile",1,"form-control",3,"ngClass"],["for","dob",1,"form-label"],["type","date","id","dob","formControlName","dob","placeholder","Enter Date of Birth","value","dob",1,"form-control",3,"ngClass"],["for","JoiningdatInput",1,"form-label"],["formControlName","joining_date","type","date",1,"form-control"],[1,"d-flex"],[1,"flex-grow-1"],["for","designation",1,"form-label"],[1,"flex-shrink-0"],[1,"link-effect",3,"click"],[1,"bi","bi-arrow-right","align-baseline","ms-1"],["id","designation","formControlName","designation","placeholder","Enter Designation",1,"form-select"],["selected",""],["for","departments",1,"form-label"],["id","departments","formControlName","department","placeholder","Enter Department",1,"form-select"],["for","gender",1,"form-label"],["formControlName","gender","data-choices","","id","gender",1,"form-control",3,"ngClass"],["value",""],["value","Male"],["value","Female"],["value","Other"],[1,"col-lg-12"],["for","address",1,"form-label"],["placeholder","Enter address","rows","3","formControlName","address",1,"form-control",3,"ngClass"],[1,"col-lg-4"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter city","value","city",1,"form-control",3,"ngClass"],["for","zip_code",1,"form-label"],["type","number","id","zip_code","formControlName","zip_code","placeholder","Enter zip code",1,"form-control",3,"ngClass"],[4,"ngIf"],["for","state",1,"form-label"],["formControlName","state","data-choices","","id","state",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value","active"],["value","inactive"],[1,"col-lg-6","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","directMessage",1,"form-check-input",3,"checked","change"],["class","col-lg-4",4,"ngIf"],["class","col-lg-12 mt-4"],[1,"col-12"],[1,"hstack","gap-2","justify-content-end","mb-3"],["class","btn btn-primary"],["id","elmLoader"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["showModalDepartment","bs-modal"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image","alt","Dropzone-Image",3,"src"],["alt","Dropzone-Image",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["alt","Uploaded Thumbnail",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"invalid-text"],[3,"value"],["class","invalid-text",4,"ngIf"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","formControlName","password","placeholder","Enter new password",1,"form-control","password-input",3,"type","ngClass","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["for","confirm-password-input",1,"form-label"],["id","confirm-password-input","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","password-input",3,"type","ngClass"],[1,"col-lg-12","mt-4"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"btn","btn-primary"],["type","button","disabled","",1,"btn","btn-secondary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"button",2),t.qCj("click",function(){return a.goBack()}),t.wR5(3,"i",3),t.OEk(4," Back "),t.C$Y()(),t.I0R(5,"form",4),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(6,"div",5)(7,"div",6)(8,"div",7)(9,"div"),t.wR5(10,"img",8),t.C$Y(),t.I0R(11,"div",9)(12,"div",10)(13,"div",11),t.yuY(14,kO,1,1)(15,TO,1,1)(16,SO,1,0)(17,DO,2,0,"div",12),t.I0R(18,"input",13,14),t.qCj("change",function(p){return a.employeeimageSelect(p)}),t.C$Y(),t.I0R(20,"div",15)(21,"label",16)(22,"span",17),t.wR5(23,"i",18),t.C$Y()()()()()()()(),t.I0R(24,"div",19)(25,"div",20)(26,"div",21)(27,"h6",22),t.OEk(28,"Personal Details"),t.C$Y()(),t.I0R(29,"div",23)(30,"div",24)(31,"div",5)(32,"div",25)(33,"div",26)(34,"label",27),t.OEk(35,"Empolyee Name "),t.I0R(36,"span",28),t.OEk(37,"*"),t.C$Y()(),t.wR5(38,"input",29),t.yuY(39,AO,2,0,"div",12)(40,IO,2,0,"div",12),t.C$Y()(),t.I0R(41,"div",25)(42,"div",26)(43,"label",30),t.OEk(44,"Employee Id "),t.I0R(45,"span",28),t.OEk(46,"*"),t.C$Y()(),t.wR5(47,"input",31),t.yuY(48,MO,2,0,"div",12),t.C$Y()(),t.I0R(49,"div",25)(50,"div",26)(51,"label",32),t.OEk(52,"Email "),t.I0R(53,"span",28),t.OEk(54,"*"),t.C$Y()(),t.wR5(55,"input",33),t.yuY(56,RO,2,0,"div",12)(57,OO,2,0,"div",12),t.C$Y()(),t.I0R(58,"div",25)(59,"div",26)(60,"label",34),t.OEk(61,"Contact Number "),t.I0R(62,"span",28),t.OEk(63,"*"),t.C$Y()(),t.wR5(64,"input",35),t.yuY(65,LO,2,0,"div",12)(66,PO,2,0,"div",12),t.C$Y()(),t.I0R(67,"div",25)(68,"div",26)(69,"label",36),t.OEk(70,"Date of Birth "),t.C$Y(),t.wR5(71,"input",37),t.yuY(72,FO,2,0,"div",12),t.C$Y()(),t.I0R(73,"div",25)(74,"div",26)(75,"label",38),t.OEk(76,"Joining Date"),t.C$Y(),t.wR5(77,"input",39),t.C$Y()(),t.I0R(78,"div",25)(79,"div",26)(80,"div",40)(81,"div",41)(82,"label",42),t.OEk(83,"Designation "),t.I0R(84,"span",28),t.OEk(85,"*"),t.C$Y()()(),t.I0R(86,"div",43)(87,"a",44),t.qCj("click",function(){return a.onAdd()}),t.OEk(88,"Create New "),t.wR5(89,"i",45),t.C$Y()()(),t.I0R(90,"select",46)(91,"option",47),t.OEk(92,"Select Designation"),t.C$Y(),t.c53(93,BO,2,2,"option",105,t.wJt),t.C$Y(),t.yuY(95,NO,2,0,"div",12),t.C$Y()(),t.I0R(96,"div",25)(97,"div",26)(98,"div",40)(99,"div",41)(100,"label",48),t.OEk(101,"Department "),t.I0R(102,"span",28),t.OEk(103,"*"),t.C$Y()()(),t.I0R(104,"div",43)(105,"a",44),t.qCj("click",function(){return a.onAdddep()}),t.OEk(106,"Create New "),t.wR5(107,"i",45),t.C$Y()()(),t.I0R(108,"select",49)(109,"option",47),t.OEk(110,"Select Department"),t.C$Y(),t.c53(111,zO,2,2,"option",105,t.wJt),t.C$Y(),t.yuY(113,YO,2,0,"div",12),t.C$Y()(),t.I0R(114,"div",25)(115,"div",26)(116,"label",50),t.OEk(117,"Gender "),t.I0R(118,"span",28),t.OEk(119,"*"),t.C$Y()(),t.I0R(120,"select",51)(121,"option",52),t.OEk(122,"Select Gender"),t.C$Y(),t.I0R(123,"option",53),t.OEk(124,"Male"),t.C$Y(),t.I0R(125,"option",54),t.OEk(126,"Female"),t.C$Y(),t.I0R(127,"option",55),t.OEk(128,"Other"),t.C$Y()(),t.yuY(129,GO,2,0,"div",12),t.C$Y()(),t.I0R(130,"div",56)(131,"div",26)(132,"label",57),t.OEk(133," Address "),t.C$Y(),t.wR5(134,"textarea",58),t.yuY(135,HO,2,0,"div",12)(136,VO,2,0,"div",12),t.C$Y()(),t.I0R(137,"div",59)(138,"div",26)(139,"label",60),t.OEk(140,"City "),t.C$Y(),t.wR5(141,"input",61),t.yuY(142,UO,2,0,"div",12),t.C$Y()(),t.I0R(143,"div",59)(144,"div",26)(145,"label",62),t.OEk(146,"Zip code "),t.C$Y(),t.wR5(147,"input",63),t.yuY(148,WO,3,2,"div",64),t.C$Y()(),t.I0R(149,"div",59)(150,"div",26)(151,"label",65),t.OEk(152,"State "),t.C$Y(),t.I0R(153,"select",66)(154,"option",52),t.OEk(155,"Select State"),t.C$Y(),t.yuY(156,XO,2,2,"option",67),t.C$Y(),t.yuY(157,qO,2,0,"div",12),t.C$Y()(),t.I0R(158,"div",25)(159,"div",26)(160,"label",68),t.OEk(161,"Status "),t.I0R(162,"span",28),t.OEk(163,"*"),t.C$Y()(),t.I0R(164,"select",69)(165,"option",52),t.OEk(166,"Select Status"),t.C$Y(),t.I0R(167,"option",70),t.OEk(168,"Active"),t.C$Y(),t.I0R(169,"option",71),t.OEk(170,"Inactive"),t.C$Y()(),t.yuY(171,ZO,2,0,"div",12),t.C$Y()(),t.I0R(172,"div",72)(173,"li",40)(174,"div",43)(175,"div",73)(176,"input",74),t.qCj("change",function(p){return a.onCheckboxChange(p)}),t.C$Y(),t.OEk(177," Use Default Password (Password : 123456) "),t.C$Y()()()(),t.yuY(178,JO,9,9,"div",75)(179,tL,10,10,"div",75)(180,iL,31,7,"div",76),t.C$Y(),t.I0R(181,"div",77)(182,"div",78),t.yuY(183,nL,2,0,"button",79)(184,rL,3,0),t.C$Y()(),t.wR5(185,"div"),t.C$Y(),t.yuY(186,aL,4,0,"div",80),t.C$Y()()()()(),t.I0R(187,"div",81,82),t.qCj("hidden.bs.modal",function(){return a.resetFormDes()}),t.I0R(189,"div",83)(190,"div",84)(191,"div",85)(192,"h5",86),t.OEk(193,"Add Designation"),t.C$Y(),t.I0R(194,"button",87),t.qCj("click",function(){t.usT(o);const p=t.Gew(188);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(195,"form",88),t.qCj("ngSubmit",function(){return a.onSubmitDes()}),t.I0R(196,"div",89),t.wR5(197,"div",90),t.I0R(198,"div",26)(199,"label",91),t.OEk(200,"Designation Name "),t.I0R(201,"span",28),t.OEk(202,"*"),t.C$Y()(),t.wR5(203,"input",92),t.yuY(204,sL,2,0,"div",12)(205,oL,2,0,"div",12),t.C$Y(),t.I0R(206,"div",26)(207,"label",68),t.OEk(208,"Status "),t.I0R(209,"span",28),t.OEk(210,"*"),t.C$Y()(),t.I0R(211,"select",69)(212,"option",52),t.OEk(213,"Select Status"),t.C$Y(),t.I0R(214,"option",70),t.OEk(215,"Active"),t.C$Y(),t.I0R(216,"option",71),t.OEk(217,"Inactive"),t.C$Y()(),t.yuY(218,lL,2,0,"div",12),t.C$Y()(),t.I0R(219,"div",93)(220,"div",94)(221,"button",95),t.qCj("click",function(){t.usT(o);const p=t.Gew(188);return t.CGJ(p.hide())}),t.wR5(222,"i",96),t.OEk(223," Close "),t.C$Y(),t.I0R(224,"button",97),t.OEk(225," Add "),t.C$Y()()()()()()(),t.I0R(226,"div",81,98),t.qCj("hidden.bs.modal",function(){return a.resetFormDep()}),t.I0R(228,"div",83)(229,"div",84)(230,"div",85)(231,"h5",86),t.OEk(232,"Add Department"),t.C$Y(),t.I0R(233,"button",87),t.qCj("click",function(){t.usT(o);const p=t.Gew(227);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(234,"form",88),t.qCj("ngSubmit",function(){return a.onSubmitDep()}),t.I0R(235,"div",89),t.wR5(236,"div",90),t.I0R(237,"div",26)(238,"label",91),t.OEk(239,"Department Name "),t.I0R(240,"span",28),t.OEk(241,"*"),t.C$Y()(),t.wR5(242,"input",99),t.yuY(243,cL,2,0,"div",12)(244,uL,2,0,"div",12),t.C$Y(),t.I0R(245,"div",26)(246,"label",68),t.OEk(247,"Status "),t.I0R(248,"span",28),t.OEk(249,"*"),t.C$Y()(),t.I0R(250,"select",69)(251,"option",52),t.OEk(252,"Select Status"),t.C$Y(),t.I0R(253,"option",70),t.OEk(254,"Active"),t.C$Y(),t.I0R(255,"option",71),t.OEk(256,"Inactive"),t.C$Y()(),t.yuY(257,dL,2,0,"div",12),t.C$Y()(),t.I0R(258,"div",93)(259,"div",94)(260,"button",95),t.qCj("click",function(){t.usT(o);const p=t.Gew(227);return t.CGJ(p.hide())}),t.wR5(261,"i",96),t.OEk(262," Close "),t.C$Y(),t.I0R(263,"button",97),t.OEk(264," Add "),t.C$Y()()()()()()()}2&r&&(t.E7m("title",a.urlId?"Edit Employee Detail":"Add Employee Detail")("breadcrumbItems",a.breadCrumbItems),t.yG2(5),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(14,a.employeeselectedImage?14:a.employeeuploadedImage?15:16),t.yG2(3),t.C0Y(17,a.f.image&&a.f.image.hasError("required")&&a.f.image.touched?17:-1),t.yG2(21),t.E7m("ngClass",a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?"is-invalid":""),t.yG2(),t.C0Y(39,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?39:-1),t.yG2(),t.C0Y(40,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?40:-1),t.yG2(7),t.E7m("ngClass",a.f.emp_id&&a.f.emp_id.hasError("required")&&a.f.emp_id.touched?"is-invalid":""),t.yG2(),t.C0Y(48,a.f.emp_id&&a.f.emp_id.hasError("required")&&a.f.emp_id.touched?48:-1),t.yG2(7),t.E7m("ngClass",a.f.email&&a.f.email.hasError("required")&&a.f.email.touched?"is-invalid":""),t.yG2(),t.C0Y(56,a.f.email&&a.f.email.hasError("required")&&a.f.email.touched?56:-1),t.yG2(),t.C0Y(57,a.f.email.hasError("pattern")?57:-1),t.yG2(7),t.E7m("ngClass",a.f.mobile&&a.f.mobile.hasError("required")&&a.f.mobile.touched?"is-invalid":""),t.yG2(),t.C0Y(65,a.f.mobile&&a.f.mobile.hasError("required")&&a.f.mobile.touched?65:-1),t.yG2(),t.C0Y(66,a.f.mobile.hasError("pattern")?66:-1),t.yG2(5),t.E7m("ngClass",a.f.dob&&a.f.dob.hasError("required")&&a.f.dob.touched?"is-invalid":""),t.yG2(),t.C0Y(72,a.f.dob&&a.f.dob.hasError("required")&&a.f.dob.touched?72:-1),t.yG2(21),t.oho(a.designations),t.yG2(2),t.C0Y(95,a.f.designation&&a.f.designation.hasError("required")&&a.f.designation.touched?95:-1),t.yG2(16),t.oho(a.departments),t.yG2(2),t.C0Y(113,a.f.department&&a.f.department.hasError("required")&&a.f.department.touched?113:-1),t.yG2(7),t.E7m("ngClass",a.f.gender&&a.f.gender.hasError("required")&&a.f.gender.touched?"is-invalid":""),t.yG2(9),t.C0Y(129,a.f.gender&&a.f.gender.hasError("required")&&a.f.gender.touched?129:-1),t.yG2(5),t.E7m("ngClass",t.S45(50,Yw,a.f.address&&a.f.address.errors&&a.f.address.touched)),t.yG2(),t.C0Y(135,a.f.address&&a.f.address.hasError("required")&&a.f.address.touched?135:-1),t.yG2(),t.C0Y(136,a.f.address&&a.f.address.hasError("maxlength")&&a.f.address.touched?136:-1),t.yG2(5),t.E7m("ngClass",a.f.city&&a.f.city.hasError("required")&&a.f.city.touched?"is-invalid":""),t.yG2(),t.C0Y(142,a.f.city&&a.f.city.hasError("required")&&a.f.city.touched?142:-1),t.yG2(5),t.E7m("ngClass",a.f.zip_code&&a.f.zip_code.hasError("required")&&a.f.zip_code.touched?"is-invalid":""),t.yG2(),t.E7m("ngIf",(null==a.f.zip_code?null:a.f.zip_code.touched)&&(null==a.f.zip_code?null:a.f.zip_code.errors)),t.yG2(5),t.E7m("ngClass",a.f.state&&a.f.state.hasError("required")&&a.f.state.touched?"is-invalid":""),t.yG2(3),t.E7m("ngForOf",a.states),t.yG2(),t.C0Y(157,a.f.state&&a.f.state.hasError("required")&&a.f.state.touched?157:-1),t.yG2(7),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(171,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?171:-1),t.yG2(5),t.E7m("checked",a.useDefaultPassword),t.yG2(2),t.E7m("ngIf",!a.useDefaultPassword),t.yG2(),t.E7m("ngIf",!a.useDefaultPassword),t.yG2(),t.C0Y(180,a.f.password&&a.f.password.hasError("pattern")?180:-1),t.yG2(3),t.C0Y(183,a.saveButtonActive?183:184),t.yG2(3),t.C0Y(186,a.spinnerStatus?186:-1),t.yG2(9),t.E7m("formGroup",a.formGroupDesignation),t.yG2(9),t.C0Y(204,a.d.name&&a.d.name.hasError("required")&&a.d.name.touched?204:-1),t.yG2(),t.C0Y(205,a.d.name&&a.d.name.hasError("maxlength")&&a.d.name.touched?205:-1),t.yG2(6),t.E7m("ngClass",a.d.status&&a.d.status.hasError("required")&&a.d.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(218,a.d.status&&a.d.status.hasError("required")&&a.d.status.touched?218:-1),t.yG2(16),t.E7m("formGroup",a.formGroupDepartment),t.yG2(9),t.C0Y(243,a.de.name&&a.de.name.hasError("required")&&a.de.name.touched?243:-1),t.yG2(),t.C0Y(244,a.de.name&&a.de.name.hasError("maxlength")&&a.de.name.touched?244:-1),t.yG2(6),t.E7m("ngClass",a.de.status&&a.de.status.hasError("required")&&a.de.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(257,a.de.status&&a.de.status.hasError("required")&&a.de.status.touched?257:-1))},dependencies:[Me.QF,Me.ay,Me.u_,We.O,j.sz,j.wd,j.GO,j.ot,j.O4,j.GC,j.ue,j.u,j.uW,j.Wo,nf.uK,my.uM],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}.custom-modal-dropzone[_ngcontent-%COMP%]{height:150px!important;border:2px dashed var(--tb-border-color);background:var(--tb-secondary-bg)!important;border-radius:6px!important;text-align:center;box-sizing:border-box;padding:20px;display:block;width:100%;height:auto}.custom-modalfile-input[_ngcontent-%COMP%]{width:100%;height:100%!important;cursor:pointer;display:flex;justify-content:center;align-items:center}.image-avatar[_ngcontent-%COMP%]{width:3rem}.uploaded-image-avatar[_ngcontent-%COMP%]{width:5rem}.edit-thumbnail-img-fluid[_ngcontent-%COMP%]{max-width:100%}']})}return n})();var Mc=Zt(4448),Hg=Zt(5657),nb=Zt(4680),Vg=Zt(3304);function hL(n,i){if(1&n&&(t.I0R(0,"option",36),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e.id),t.yG2(),t.oRS(" ",e.name," ")}}function fL(n,i){if(1&n&&(t.I0R(0,"div",21)(1,"p",22),t.OEk(2,"Check-In At"),t.C$Y(),t.wR5(3,"h5",37),t.C$Y()),2&n){const e=t.GaO();t.yG2(3),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),t.E3n)}}function pL(n,i){if(1&n&&(t.I0R(0,"div",21)(1,"p",22),t.OEk(2,"Check-out At"),t.C$Y(),t.I0R(3,"h5",23),t.wR5(4,"span",38),t.C$Y()()),2&n){const e=t.GaO();t.yG2(4),t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),t.E3n)}}function mL(n,i){if(1&n&&(t.I0R(0,"div",21)(1,"p",22),t.OEk(2,"Total Time"),t.C$Y(),t.I0R(3,"h5",23)(4,"span",39),t.OEk(5),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(5),t.cNF(null==e.checkIndetails?null:e.checkIndetails.totalDuration)}}function gL(n,i){if(1&n&&(t.I0R(0,"div",21)(1,"p",22),t.OEk(2,"Total Distance"),t.C$Y(),t.I0R(3,"h5",23)(4,"span",39),t.OEk(5),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(5),t.oRS("",e.totaldistanceToshow," km")}}const vL=n=>({"selected-item":n});function _L(n,i){if(1&n){const e=t.KQA();t.I0R(0,"li",40),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.updateMarkerAndPath(o.end.longitude,o.end.latitude,o))}),t.I0R(1,"div",41)(2,"span",42),t.OEk(3),t.C$Y(),t.I0R(4,"button",43),t.wR5(5,"span",44),t.OEk(6),t.C$Y()(),t.I0R(7,"p",45),t.OEk(8),t.C$Y()()}if(2&n){const e=i.$implicit,r=t.GaO();t.E7m("ngClass",t.S45(5,vL,r.selectedItem===e)),t.yG2(3),t.cNF(e.end.formattedTime),t.yG2(),t.E7m("ngClass",r.getBatteryClass(e.end.battery_status.replace("%",""))),t.yG2(2),t.oRS(" ",e.end.battery_status," "),t.yG2(2),t.cNF(e.end.address)}}function yL(n,i){1&n&&(t.I0R(0,"div",46),t.wR5(1,"div",47),t.I0R(2,"button",48)(3,"span",49)(4,"span",50),t.OEk(5," Loading... "),t.C$Y(),t.I0R(6,"span",51)(7,"span",52),t.OEk(8,"Loading..."),t.C$Y()()()()())}const xL=n=>({rotate:n});let bL=(()=>{class n{constructor(e,r,a,o){this.route=e,this.api=r,this.cdr=a,this.router=o,this.employeeChange=new t._w7,this.urlId=null,this.selectedEmployeeId=null,this.dateChangeSubject=new Hg.E,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.employeeTimeline=[],this.employeeDataList=[],this.selectedDate=new Date,this.markers=[],this.selectedItem=null,this.checkIndetails={},this.selectedInterval=15,this.intervalTimeCoordinates=[],this.isRotating=!1,this.uniqueCoordinates=[]}ngOnDestroy(){this.map&&this.map.remove()}ngOnInit(){this.cdr.detectChanges(),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(new Date)),this.bsConfig={dateInputFormat:"DD-MMM-YY",showWeekNumbers:!1},this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.selectedEmployeeId=this.urlId||this.employeeDataList[0]?.id,this.urlId&&this.companyId&&(this.getemployeeTimeline(),this.getCheckInDetail(),this.getemployeeData()),this.dateChangeSubject.pipe((0,nb.o)(300)).subscribe(e=>{this.handleDateChange(e)})}onIntervalChange(){this.initializeMap()}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getemployeeTimeline(),this.getCheckInDetail()}refreshTimeline(){this.isRotating=!0,this.getemployeeTimeline(),setTimeout(()=>{this.isRotating=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.companyId}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?this.employeeDataList=r.data||[]:(this.employeeDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.checkIndetails=e.data[0],this.checkIndetails?.check_in_time&&this.checkIndetails?.check_out_time&&(this.formattedTotalTime=this.calculateTotalTime(this.checkIndetails.check_in_time,this.checkIndetails.check_out_time))):this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getemployeeTimeline(){this.toggleSpinner(!0),this.api.getwithoutid(`getCoordinates?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status&&e.data.length>0){if(this.employeeTimeline=e.data.map(r=>(r.formattedTime=this.formatTime(r.time),r)),this.employeeTimeline&&this.employeeTimeline.length>0){this.initializeMap();let r=0;for(let d=1;d<this.employeeTimeline.length;d++)r+=this.calculateDistance(this.employeeTimeline[d-1].latitude,this.employeeTimeline[d-1].longitude,this.employeeTimeline[d].latitude,this.employeeTimeline[d].longitude);this.calculateTimeSpent(),this.calculateRestPeriods(),this.totaldistanceToshow=r.toFixed(1)}}else this.employeeTimeline=[],this.intervalTimeCoordinates=[],this.totaldistanceToshow=null},e=>{this.toggleSpinner(!1),this.employeeTimeline=[],this.initializeDefaultMap(),this.handleError(e.message||"An error occurred while fetching data")})}filterCoordinatesByInterval(e,r){const[a,o,d]=e.split(":").map(Number),D=[];let P=3600*a+60*o+d;const B=ue=>{const[Te,qe,ht]=ue.split(":").map(Number);return 3600*Te+60*qe+ht},ae=B(this.employeeTimeline[this.employeeTimeline.length-1].time),oe=this.employeeTimeline[0];for(D.push({start:oe,end:oe});P<=ae;){P+=60*r;const ue=this.employeeTimeline.find(Te=>B(Te.time)>=P);if(!ue)break;{const Te=D[D.length-1];(!Te||Te.end.id!==ue.id)&&D.push({start:D[D.length-1].end,end:ue})}}const ge=this.employeeTimeline[this.employeeTimeline.length-1];return(0===D.length||D[D.length-1].end.id!==ge.id)&&D.push({start:D.length>0?D[D.length-1].end:ge,end:ge}),this.intervalTimeCoordinates=D,D}calculateDistance(e,r,a,o){const p=this.deg2rad(a-e),D=this.deg2rad(o-r),P=Math.sin(p/2)*Math.sin(p/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(a))*Math.sin(D/2)*Math.sin(D/2);return 2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P))*6371}deg2rad(e){return e*(Math.PI/180)}calculateTimeSpent(){const e={driving:0,cycling:0,walking:0,stationary:0};for(let a=1;a<this.employeeTimeline.length;a++){const o=this.employeeTimeline[a-1],d=this.employeeTimeline[a],p=new Date(`1970-01-01T${o.time}Z`),P=(new Date(`1970-01-01T${d.time}Z`).getTime()-p.getTime())/1e3/60,te=this.calculateDistance(o.latitude,o.longitude,d.latitude,d.longitude)/(P/60);te>25?e.driving+=P:te>15?e.cycling+=P:te>5?e.walking+=P:e.stationary+=P}const r=a=>`${Math.floor(a/60)} hours ${Math.round(a%60)} minutes`;return{driving:r(e.driving),cycling:r(e.cycling),walking:r(e.walking),stationary:r(e.stationary)}}initializeMap(){this.map=new Mc.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),this.map.addControl(new Mc.NavigationControl),this.map.on("load",()=>{if(!this.employeeTimeline||0===this.employeeTimeline.length)return void console.error("Employee timeline data is empty or undefined.");this.map.resize();const e=this.filterCoordinatesByInterval(this.employeeTimeline[0].time,this.selectedInterval),r=this.employeeTimeline.map(a=>a.address?Promise.resolve():this.geocodeCoordinates(a.longitude,a.latitude).then(o=>{this.uniqueCoordinates.some(p=>p.longitude===a.longitude&&p.latitude===a.latitude)||this.uniqueCoordinates.push({longitude:a.longitude,latitude:a.latitude,address:o}),a.address=o}).catch(o=>{console.error("Error fetching address:",o)}));Promise.all(r).then(()=>{const a=this.employeeTimeline[0],o=this.employeeTimeline[this.employeeTimeline.length-1],d=new Mc.Popup({offset:25}).setHTML(`<h6>${a.formattedTime}</h6>\n              <p>Battery Percentage: ${a.battery_status}%</p>\n              <p>Address: ${a.address}</p>`),p=new Mc.Marker({color:"green"}).setLngLat([a.longitude,a.latitude]).setPopup(d).addTo(this.map),D=new Mc.Popup({offset:25}).setHTML(`<h6>${o.formattedTime}</h6>\n              <p>Battery Percentage: ${o.battery_status}%</p>\n              <p>Address: ${o.address}</p>`),P=new Mc.Marker({color:"red"}).setLngLat([o.longitude,o.latitude]).setPopup(D).addTo(this.map);this.markers.push(p,P),this.calculateRestPeriods().forEach((ae,oe)=>{const ge=new Mc.Popup({offset:25}).setHTML(`<h6>Rest Period ${oe+1}</h6>\n                  <p>Duration: ${ae.duration}</p>\n                  <p>From: ${ae.startTime}</p>\n                  <p>To: ${ae.endTime}</p>\n                  <p>Address: ${ae.address}</p>`),ue=new Mc.Marker({color:"blue"}).setLngLat([ae.start.longitude,ae.start.latitude]).setPopup(ge).addTo(this.map);this.markers.push(ue)}),e.forEach((ae,oe)=>{if(!ae.start||!ae.end)return void console.error(`Segment at index ${oe} is missing start or end coordinates.`);const ue=this.employeeTimeline.filter(qe=>{const ht=this.getTimeInSeconds(qe.time),ut=this.getTimeInSeconds(ae.start.time),mi=this.getTimeInSeconds(ae.end.time);return ht>=ut&&ht<=mi}).map(qe=>[qe.longitude,qe.latitude,qe.time]).filter((qe,ht,ut)=>0===ht||qe[0]!==ut[ht-1][0]||qe[1]!==ut[ht-1][1]||qe[2]!==ut[ht-1][2]).map(qe=>[qe[0],qe[1]]);(ue[0][0]!==ae.start.longitude||ue[0][1]!==ae.start.latitude)&&ue.unshift([ae.start.longitude,ae.start.latitude]),(ue[ue.length-1][0]!==ae.end.longitude||ue[ue.length-1][1]!==ae.end.latitude)&&ue.push([ae.end.longitude,ae.end.latitude]);const Te=`path-${oe}`;this.removeLayerIfExists(Te),this.map.addLayer({id:Te,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:ue}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":4}})});const te=new Mc.LngLatBounds;this.markers.forEach(ae=>te.extend(ae.getLngLat())),this.map.fitBounds(te,{padding:50})})})}chunkArray(e,r){const a=[];for(let o=0;o<e.length;o+=r)a.push(e.slice(o,o+r));return a}getCombinedRoute(e){const r=e.map(a=>this.getOptimizedRoute(a));return Promise.all(r).then(a=>{const o=[];return a.forEach(d=>{d.length>0&&o.push(...d)}),console.log(o),o})}getOptimizedRoute(e){const a=`https://api.mapbox.com/directions/v5/mapbox/driving/${e.map(o=>o.join(",")).join(";")}?geometries=polyline6&overview=full&access_token=${Mc.accessToken}`;return fetch(a).then(o=>o.json()).then(o=>{if(o.matchings&&o.matchings.length>0)return o.matchings[0].geometry.coordinates;throw new Error("No matching route found")}).catch(o=>(console.error("Error fetching matching route:",o),[]))}geocodeCoordinates(e,r){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${r}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(o=>o.json()).then(o=>o.features[0].place_name).catch(o=>(console.error("Error fetching address:",o),""))}calculateRestPeriods(){const e=[];let a=null;for(let o=1;o<this.employeeTimeline.length;o++){const d=this.employeeTimeline[o-1],p=this.employeeTimeline[o];if(this.calculateDistance(d.latitude,d.longitude,p.latitude,p.longitude)<=.02)a||(a=d);else if(a){const P=this.getTimeInSeconds(p.time)-this.getTimeInSeconds(a.time),B=P/60;B>=5&&e.push({...a,start:a,end:p,duration:this.formatDuration(P),durationInMinutes:B.toFixed(1),startTime:this.formatTime(a.time),endTime:this.formatTime(p.time)}),a=null}}return e}formatDuration(e){const r=Math.floor(e/3600),a=Math.floor(e%3600/60),o=Math.floor(e%60);return`${this.pad(r)}:${this.pad(a)}:${this.pad(o)}`}pad(e){return e.toString().padStart(2,"0")}getTimeInSeconds(e){const[r,a,o]=e.split(":").map(Number);return 3600*r+60*a+o}removeLayerIfExists(e){this.map.getLayer(e)&&this.map.removeLayer(e),this.map.getSource(e)&&this.map.removeSource(e)}initializeDefaultMap(){this.map=new Mc.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.9629,20.5937],zoom:13}),this.map.addControl(new Mc.NavigationControl)}formatTime(e){const[r,a,o]=e.split(":");return`${+r%12||12}:${a} ${+r>=12?"PM":"AM"}`}handleError(e){this.toggleSpinner(!1)}updateMarkerAndPath(e,r,a){this.marker&&this.marker.remove(),this.marker=new Mc.Marker({color:"#ffc703"}).setLngLat([e,r]).addTo(this.map);const o=new Mc.Popup({offset:25}).setHTML(`<h6>${a.end.formattedTime}</h6>\n        <p>Battery Percentage: ${a.end.battery_status}%</p>\n        <p>Address: ${a.end.address}</p>`);this.marker.setPopup(o),this.selectedItem=a}getBatteryClass(e){return e>=75?"battery-high":e>=35?"battery-mid":"battery-low"}calculateTotalTime(e,r){const[a,o]=e.split(":").map(Number),[d,p]=r.split(":").map(Number),D=new Date;D.setHours(a,o,0);const P=new Date;P.setHours(d,p,0);const B=P.getTime()-D.getTime(),te=Math.floor(B/6e4);return`${Math.floor(te/60)}h ${te%60}m`}sendCoordinatesToAPI(e){this.api.post("address",e).subscribe(r=>{},r=>this.handleError(r))}handleEmployeeChange(e){const r=+e.target.value;this.router.navigate([`/employee-detail/${r}`],{queryParams:{tab:"timeline"}}),this.urlId=r,this.employeeChange.emit(r),this.getemployeeTimeline(),this.getCheckInDetail()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(T.gV),t.GI1(He.W),t.GI1(t.kD9),t.GI1(T.E5))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-timeline"]],inputs:{companyId:"companyId"},outputs:{employeeChange:"employeeChange"},decls:56,vars:20,consts:[[1,"card","py-3"],[1,"row"],[1,"col-lg-2","mt-2","mt-lg-0"],[1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],["value","1"],["value","3"],["value","10"],["value","15"],["value","30"],["value","60"],[1,"col-6","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"p-3","border-bottom","border-2"],[1,"row","align-items-center","flex-lg-nowrap"],[1,"col-6","col-md-2"],[1,"text-muted","mb-2","text-uppercase"],[1,"fs-md","mb-0"],["id","total-amount"],["class","col-6 col-md-2"],[1,"col-lg-4",3,"ngClass"],[1,"acitivity-timeline-2","list-unstyled","mb-0","mt-3","overflow"],[1,"col-lg-8","mt-3","mt-lg-0",3,"ngClass"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-12"],[1,"mt-2","text-center",3,"ngClass"],[1,"error-img","text-center","px-5"],["src","assets/images/auth/offline-page.gif","alt","",1,"img-fluid","w-25"],[1,"mt-2","fw-semibold"],["id","map",1,"match-parent"],[3,"value"],[1,"fs-md","mb-0",3,"innerHTML"],["id","invoice-date",3,"innerHTML"],["id","invoice-due-date"],[1,"activity-item","pt-2",3,"ngClass","click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fs-md","badge","bg-body-secondary","border","border-secondary","text-secondary"],["type","button","data-bs-toggle","tooltip","placement","top","tooltip","Battery Percentage",1,"btn","battery-status",3,"ngClass"],[1,"ri-battery-saver-line"],[1,"mb-0","mt-2"],[1,"mt-5","pt-5","text-center"],[1,"error-img","text-center","px-5","mt-5"],["type","button",1,"btn","btn-info","btn-load","mt-5"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","me-2"],["role","status",1,"spinner-grow","flex-shrink-0"],[1,"visually-hidden"],["class","activity-item pt-2",3,"ngClass"],["class","mt-5 pt-5 text-center"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"select",3),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedEmployeeId,d)||(a.selectedEmployeeId=d),d}),t.qCj("change",function(d){return a.handleEmployeeChange(d)}),t.yuY(4,hL,2,2,"option",4),t.C$Y()(),t.I0R(5,"div",2)(6,"div",5)(7,"input",6),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedDate,d)||(a.selectedDate=d),d}),t.qCj("bsValueChange",function(d){return a.onDateChange(d)}),t.C$Y(),t.I0R(8,"div",7)(9,"label",8),t.wR5(10,"i",9),t.C$Y()()()(),t.I0R(11,"div",2)(12,"select",3),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedInterval,d)||(a.selectedInterval=d),d}),t.qCj("change",function(){return a.onIntervalChange()}),t.I0R(13,"option",10),t.OEk(14,"1 Minutes"),t.C$Y(),t.I0R(15,"option",11),t.OEk(16,"3 Minutes"),t.C$Y(),t.I0R(17,"option",12),t.OEk(18,"10 Minutes"),t.C$Y(),t.I0R(19,"option",13),t.OEk(20,"15 Minutes"),t.C$Y(),t.I0R(21,"option",14),t.OEk(22,"30 Minutes"),t.C$Y(),t.I0R(23,"option",15),t.OEk(24,"1 Hour"),t.C$Y()()(),t.I0R(25,"div",16)(26,"button",17),t.qCj("click",function(){return a.refreshTimeline()}),t.wR5(27,"i",18),t.C$Y()()()(),t.I0R(28,"div",19)(29,"div",20)(30,"div",21)(31,"p",22),t.OEk(32,"Date"),t.C$Y(),t.I0R(33,"h5",23)(34,"span",24),t.OEk(35),t.wVc(36,"date"),t.C$Y()()(),t.yuY(37,fL,4,1,"div",25)(38,pL,5,1,"div",25)(39,mL,6,1,"div",25)(40,gL,6,1,"div",25),t.C$Y()(),t.I0R(41,"div",1)(42,"div",26)(43,"ul",27),t.c53(44,_L,9,7,"li",53,t.wJt,!1,yL,9,0,"div",54),t.C$Y()(),t.I0R(47,"div",28),t.wR5(48,"div",29),t.C$Y(),t.I0R(49,"div",30)(50,"div",31)(51,"div",32),t.wR5(52,"img",33),t.C$Y(),t.I0R(53,"h3",34),t.OEk(54,"Sorry! No Result Found"),t.C$Y()()()(),t.wR5(55,"div",35)),2&r&&(t.yG2(3),t.OKB("ngModel",a.selectedEmployeeId),t.yG2(),t.E7m("ngForOf",a.employeeDataList),t.yG2(3),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(5),t.OKB("ngModel",a.selectedInterval),t.yG2(14),t.E7m("ngClass",t.S45(18,xL,a.isRotating)),t.yG2(9),t.cNF(t.g7$(36,15,a.formattedDate,"dd/MMM/yyyy")),t.yG2(2),t.C0Y(37,null!=a.checkIndetails&&a.checkIndetails.latestCheckInTime?37:-1),t.yG2(),t.C0Y(38,null!=a.checkIndetails&&a.checkIndetails.latestCheckOutTime?38:-1),t.yG2(),t.C0Y(39,null!=a.checkIndetails&&a.checkIndetails.latestCheckInTime?39:-1),t.yG2(),t.C0Y(40,a.totaldistanceToshow?40:-1),t.yG2(2),t.E7m("ngClass",a.employeeTimeline&&a.employeeTimeline.length>0?"d-block":"d-none"),t.yG2(2),t.oho(a.intervalTimeCoordinates),t.yG2(3),t.E7m("ngClass",a.employeeTimeline&&0==a.employeeTimeline.length?"d-none":"d-block"),t.yG2(3),t.E7m("ngClass",a.employeeTimeline&&0===a.employeeTimeline.length?"d-block":"d-none"))},dependencies:[Me.QF,Me.ay,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,my.uM,Vg.em,Vg.U5,Me.y],styles:[".activity-timeline-2[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.activity-item[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;cursor:pointer}.activity-item[_ngcontent-%COMP%]:hover{background-color:#f8f8f8}.selected-item[_ngcontent-%COMP%]{background-color:#d1ecf1}.battery-status[_ngcontent-%COMP%]{display:flex;align-items:center}.battery-status[_ngcontent-%COMP%]   .ri-battery-saver-line[_ngcontent-%COMP%]{margin-right:5px}.battery-high[_ngcontent-%COMP%]{color:green}.battery-mid[_ngcontent-%COMP%]{color:orange}.battery-low[_ngcontent-%COMP%]{color:red}#noresult[_ngcontent-%COMP%]{text-align:center;padding:20px}#map[_ngcontent-%COMP%]{width:100%!important;border-left:1px solid #e0e0e0}.match-parent[_ngcontent-%COMP%]{height:100%}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:500px}@media screen and (max-width: 991px){.match-parent[_ngcontent-%COMP%]{height:300px!important}.overflow[_ngcontent-%COMP%]{height:auto;margin-bottom:10px}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return n})();function wL(n,i){1&n&&(t.I0R(0,"div",29),t.OEk(1,"Password is required."),t.C$Y())}function CL(n,i){1&n&&(t.I0R(0,"div",29),t.OEk(1,"Confirm Password is required."),t.C$Y())}function EL(n,i){1&n&&(t.I0R(0,"div",29),t.OEk(1," Password and Confirm Password does not match. "),t.C$Y())}function kL(n,i){if(1&n&&(t.I0R(0,"div",18)(1,"div",30)(2,"div",31)(3,"div",32)(4,"h5",33),t.OEk(5,"Password must contain:"),t.C$Y()(),t.I0R(6,"div")(7,"p",34),t.OEk(8," Minimum "),t.I0R(9,"b"),t.OEk(10,"8 characters"),t.C$Y()(),t.I0R(11,"p",35),t.OEk(12," At least "),t.I0R(13,"b"),t.OEk(14,"one lowercase"),t.C$Y(),t.OEk(15," letter (a-z) "),t.C$Y(),t.I0R(16,"p",36),t.OEk(17," At least "),t.I0R(18,"b"),t.OEk(19,"one uppercase"),t.C$Y(),t.OEk(20," letter (A-Z) "),t.C$Y(),t.I0R(21,"p",37),t.OEk(22," At least "),t.I0R(23,"b"),t.OEk(24,"one number"),t.C$Y(),t.OEk(25," (0-9) "),t.C$Y()()()()()),2&n){const e=t.GaO();t.yG2(7),t.E7m("ngClass",e.passwordValidations.length?"valid":"invalid"),t.yG2(4),t.E7m("ngClass",e.passwordValidations.lower?"valid":"invalid"),t.yG2(5),t.eAK("valid",e.passwordValidations.upper),t.E7m("ngClass",e.passwordValidations.upper?"valid":"invalid"),t.yG2(5),t.E7m("ngClass",e.passwordValidations.number?"valid":"invalid")}}function TL(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td"),t.wR5(2,"i",38),t.OEk(3),t.C$Y(),t.I0R(4,"td"),t.OEk(5),t.C$Y(),t.I0R(6,"td"),t.OEk(7),t.wVc(8,"date"),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(3),t.oRS(" ",e.device," "),t.yG2(2),t.cNF(e.ip_address),t.yG2(2),t.cNF(t.g7$(8,4,e.date,"dd MMM , yyyy")),t.yG2(3),t.cNF(e.address)}}const tk=(n,i)=>({"mdi-eye-off-outline":n,"mdi-eye-outline":i});let SL=(()=>{class n{constructor(e,r,a,o){this.route=e,this.api=r,this.toastService=a,this.formBuilder=o,this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.loginDetails=[],this.loginDetailsList=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10,this.passwordValidations={length:!1,lower:!1,upper:!1,number:!1}}ngOnChanges(e){e.employeeChange&&!e.employeeChange.isFirstChange()&&(this.urlId=e.employeeChange.currentValue,this.getemployeeLoginDetail())}ngOnInit(){this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.companyId&&this.getemployeeLoginDetail(),this.initializeForm()}onEmployeeChange(e){console.log(e)}initializeForm(){this.formGroup=this.formBuilder.group({password:["",[j.AQ.required,j.AQ.pattern("(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}")]],confirmPassword:["",j.AQ.required]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){const r=e.get("password")?.value,a=e.get("confirmPassword")?.value;return r===a?null:{mismatch:!0}}checkPasswordPattern(){const e=this.formGroup.get("password")?.value;this.passwordValidations.length=e.length>=8,this.passwordValidations.lower=/[a-z]/.test(e),this.passwordValidations.upper=/[A-Z]/.test(e),this.passwordValidations.number=/\d/.test(e)}get f(){return this.formGroup.controls}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeLoginDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLoginDetail?emp_id=${this.urlId}company_id=${this.companyId}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.loginDetails=r.data||[],this.loginDetailsList=r.data||[],this.loginDetails=(0,$n.cloneDeep)(this.loginDetailsList.slice(0,10))):this.loginDetails=[]},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.updateemployee(e)}else this.formGroup.markAllAsTouched()}createFormData(){const e=new FormData;return e.append("company_id",this.companyId),e.append("password",this.f.password.value),e}updateemployee(e){this.api.put("employees",this.urlId,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!")):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}filterdata(){this.loginDetails=this.term?this.loginDetailsList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.loginDetailsList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.loginDetails.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.loginDetailsList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.loginDetails=this.loginDetailsList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(T.gV),t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-password-change"]],inputs:{companyId:"companyId",employeeChange:"employeeChange"},features:[t.SYr],decls:58,vars:20,consts:[[3,"formGroup","ngSubmit"],[1,"row","g-2","align-items-center"],[1,"col-lg-4"],[1,"auth-pass-inputgroup"],["for","password-input",1,"form-label"],[1,"position-relative"],["id","password-input","onpaste","return false","placeholder","Enter new password","formControlName","password","required","",1,"form-control","password-input",3,"type","input"],["type","button",1,"btn","btn-link","position-absolute","end-0","top-0","text-decoration-none","text-muted","password-addon",3,"click"],[1,"ri-eye-fill","align-middle",3,"ngClass"],["class","invalid-text"],["for","confirm-password-input",1,"form-label"],["onpaste","return false","id","confirm-password-input","placeholder","Confirm password","formControlName","confirmPassword","required","",1,"form-control","password-input",3,"type"],[1,"d-flex","align-items-center","justify-content-between"],["type","submit",1,"btn","btn-success"],["class","col-lg-12"],[1,"mt-4","mb-4","pb-3","border-bottom","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","maxSize","pageChanged"],[1,"invalid-text"],["id","password-contain",1,"card","bg-light","shadow-none","passwd-bg"],[1,"card-body"],[1,"mb-4"],[1,"fs-sm"],["id","pass-length",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-lower",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-upper",1,"fs-xs","mb-2",3,"ngClass"],["id","pass-number",1,"fs-xs","mb-0",3,"ngClass"],[1,"bi","bi-phone","align-baseline","me-1"]],template:function(r,a){1&r&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),t.OEk(5,"New Password*"),t.C$Y(),t.I0R(6,"div",5)(7,"input",6),t.qCj("input",function(){return a.checkPasswordPattern()}),t.C$Y(),t.I0R(8,"button",7),t.qCj("click",function(){return a.toggleFieldTextType1()}),t.wR5(9,"i",8),t.C$Y()(),t.yuY(10,wL,2,0,"div",9),t.C$Y()(),t.I0R(11,"div",2)(12,"div",3)(13,"label",10),t.OEk(14,"Confirm Password*"),t.C$Y(),t.I0R(15,"div",5),t.wR5(16,"input",11),t.I0R(17,"button",7),t.qCj("click",function(){return a.toggleFieldTextType2()}),t.wR5(18,"i",8),t.C$Y()(),t.yuY(19,CL,2,0,"div",9)(20,EL,2,0,"div",9),t.C$Y()(),t.I0R(21,"div",12)(22,"div")(23,"button",13),t.OEk(24,"Change Password"),t.C$Y()()(),t.yuY(25,kL,26,6,"div",14),t.C$Y()(),t.I0R(26,"div",15)(27,"h5",16),t.OEk(28,"Login History"),t.C$Y()(),t.I0R(29,"div",17)(30,"div",18)(31,"div",19)(32,"table",20)(33,"thead",21)(34,"tr")(35,"th",22),t.OEk(36,"Mobile"),t.C$Y(),t.I0R(37,"th",22),t.OEk(38,"IP Address"),t.C$Y(),t.I0R(39,"th",22),t.OEk(40,"Date"),t.C$Y(),t.I0R(41,"th",22),t.OEk(42,"Address"),t.C$Y()()(),t.I0R(43,"tbody"),t.c53(44,TL,11,7,"tr",null,t.wJt),t.C$Y()()(),t.I0R(46,"div",23)(47,"div",24)(48,"div",25),t.OEk(49," Showing "),t.I0R(50,"span",26),t.OEk(51),t.C$Y(),t.OEk(52," of "),t.I0R(53,"span",26),t.OEk(54),t.C$Y(),t.OEk(55," Results "),t.C$Y()(),t.I0R(56,"div",27)(57,"pagination",28),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()),2&r&&(t.E7m("formGroup",a.formGroup),t.yG2(7),t.E7m("type",a.fieldTextType1?"text":"password"),t.yG2(2),t.E7m("ngClass",t.IBC(14,tk,!a.fieldTextType1,a.fieldTextType1)),t.yG2(),t.C0Y(10,a.f.password&&a.f.password.hasError("required")&&a.f.password.touched?10:-1),t.yG2(6),t.E7m("type",a.fieldTextType2?"text":"password"),t.yG2(2),t.E7m("ngClass",t.IBC(17,tk,!a.fieldTextType2,a.fieldTextType2)),t.yG2(),t.C0Y(19,a.f.confirmPassword&&a.f.confirmPassword.hasError("required")&&a.f.confirmPassword.touched?19:-1),t.yG2(),t.C0Y(20,a.formGroup.hasError("mismatch")&&a.f.confirmPassword.value&&a.f.password.value?20:-1),t.yG2(5),t.C0Y(25,a.f.password&&a.f.password.hasError("pattern")?25:-1),t.yG2(19),t.oho(a.loginDetails),t.yG2(7),t.cNF(null==a.loginDetails?null:a.loginDetails.length),t.yG2(3),t.cNF(null==a.loginDetailsList?null:a.loginDetailsList.length),t.yG2(3),t.E7m("totalItems",null==a.loginDetailsList?null:a.loginDetailsList.length)("itemsPerPage",a.itemsPerPage)("maxSize",5))},dependencies:[Me.QF,j.sz,j.ot,j.ue,j.u,j.eJ,j.uW,j.Wo,nt.im,Me.y],styles:['@charset "UTF-8";.invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}#password-contain[_ngcontent-%COMP%]{display:block}#password-contain[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:13px}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]{color:#2dcb73}#password-contain[_ngcontent-%COMP%]   p.valid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2714"}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]{color:#ff6c6c}#password-contain[_ngcontent-%COMP%]   p.invalid[_ngcontent-%COMP%]:before{position:relative;left:-8px;content:"\\2716"}']})}return n})();var rb=Zt(1528),DL=Zt(9260);const AL=n=>({rotate:n});let IL=(()=>{class n{constructor(e,r,a,o){this.api=e,this.route=r,this.toastService=a,this.authService=o,this.urlId=null,this.selectedDate=new Date,this.spinnerStatus=!1,this.isRotatinglive=!1,this.refreshInterval=3e4}ngOnChanges(e){e.employeeChange&&!e.employeeChange.isFirstChange()&&(this.urlId=e.employeeChange.currentValue,this.scheduleNextUpdate())}ngOnDestroy(){this.livemap&&this.livemap.remove(),this.liveLocationTimeout&&clearTimeout(this.liveLocationTimeout)}ngOnInit(){this.authService.requestPermission(),this.authService.receiveMessage(),this.authService.currentMessage.subscribe(e=>{e&&console.log(e)}),this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.companyId&&this.scheduleNextUpdate(),this.initializeMap()}refreshTimeline(){this.isRotatinglive=!0,this.requestLiveLocation(),setTimeout(()=>{this.isRotatinglive=!1},500)}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}requestLiveLocation(){this.toggleSpinner(!0);const e=localStorage.getItem("fcm_token");this.api.post("requestLiveLocation",{emp_id:this.urlId,fcm_token:e,type:1}).subscribe(o=>{this.toggleSpinner(!1),o&&o.status&&(this.toastService.success(o.message),setTimeout(()=>{this.getLiveLocation()},2e3))},o=>{this.toggleSpinner(!1),this.handleError(o.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}getLiveLocation(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmpLiveLocation?emp_id=${this.urlId}&company_id=${this.companyId}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.liveCoordinates=r.data,console.log(this.liveCoordinates),this.addMarkerToMap(this.liveCoordinates)):this.liveCoordinates=[],this.scheduleNextUpdate()},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data"),this.scheduleNextUpdate()})}scheduleNextUpdate(){this.liveLocationTimeout=setTimeout(()=>{this.getLiveLocation()},this.refreshInterval)}handleError(e){this.toggleSpinner(!1),console.error(e)}initializeMap(){Mc.accessToken="pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",this.livemap=new Mc.Map({container:"mapId",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:5}),window.addEventListener("resize",()=>{this.livemap.resize()}),this.livemap.on("load",e=>{this.livemap.resize()}),this.livemap.addControl(new Mc.NavigationControl)}addMarkerToMap(e){var r=this;return(0,rb.c)(function*(){if(!e)return;const a=[e.longitude,e.latitude];try{const o=yield r.geocodeCoordinates(e.longitude,e.latitude),d=new Mc.Popup({offset:25}).setText(`Address: ${o}\nMotion: ${e.motion}`),p=document.createElement("div");p.className="custom-marker",p.style.backgroundImage=`url(${r.emp_image})`,p.style.width="42px",p.style.height="42px",p.style.backgroundSize="100%",p.style.borderRadius="50%",new Mc.Marker(p).setLngLat(a).setPopup(d).addTo(r.livemap).togglePopup(),r.livemap.flyTo({center:a,zoom:14})}catch(o){console.error("Error adding marker to map:",o)}})()}geocodeCoordinates(e,r){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${r}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(o=>o.json()).then(o=>o.features[0].place_name).catch(o=>(console.error("Error fetching address:",o),"Unknown location"))}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(T.gV),t.GI1(Be.SA),t.GI1(DL.o))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-live-location"]],inputs:{companyId:"companyId",emp_image:"emp_image",employeeChange:"employeeChange"},features:[t.SYr],decls:7,vars:3,consts:[[1,"card"],[1,"row"],[1,"col-12","text-end"],["type","button",1,"btn","btn-ghost-secondary","btn-icon","btn-sm","fs-xl","ms-auto",3,"ngClass","click"],[1,"bi","bi-arrow-clockwise"],[1,"col-lg-12"],["id","mapId"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.qCj("click",function(){return a.refreshTimeline()}),t.wR5(4,"i",4),t.C$Y()(),t.I0R(5,"div",5),t.wR5(6,"div",6),t.C$Y()()()),2&r&&(t.yG2(3),t.E7m("ngClass",t.S45(1,AL,a.isRotatinglive)))},dependencies:[Me.QF],styles:["#mapId[_ngcontent-%COMP%]{position:relative;top:0;bottom:0;width:100%!important;height:500px!important}.match-parent[_ngcontent-%COMP%]{height:100%}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate .5s linear}.bi-arrow-clockwise[_ngcontent-%COMP%]{font-size:22px}"]})}return n})();function ML(n,i){if(1&n&&t.wR5(0,"img",48),2&n){const e=t.GaO();t._6D("src",null==e.employeeDetail?null:e.employeeDetail.image,t.K6U)}}function RL(n,i){1&n&&t.wR5(0,"img",49)}function OL(n,i){if(1&n&&(t.I0R(0,"a",50)(1,"span",51),t.wR5(2,"i",52),t.C$Y()()),2&n){const e=t.GaO();t.CI5("href","tel:",null==e.employeeDetail?null:e.employeeDetail.mobile,"",t.K6U)}}function LL(n,i){if(1&n&&(t.I0R(0,"a",50)(1,"span",53),t.wR5(2,"i",54),t.C$Y()()),2&n){const e=t.GaO();t.CI5("href","mailto:",null==e.employeeDetail?null:e.employeeDetail.email,"",t.K6U)}}function PL(n,i){if(1&n&&t.wR5(0,"div",55),2&n){const e=t.GaO();t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckInTime),t.E3n)}}function FL(n,i){1&n&&(t.I0R(0,"div",56),t.OEk(1,"Not Checked In Yet"),t.C$Y())}function BL(n,i){if(1&n&&t.wR5(0,"div",55),2&n){const e=t.GaO();t.E7m("innerHTML",e.formatTime(null==e.checkIndetails?null:e.checkIndetails.latestCheckOutTime),t.E3n)}}function NL(n,i){1&n&&(t.I0R(0,"div",56),t.OEk(1,"Not Checked Out Yet"),t.C$Y())}function zL(n,i){if(1&n&&(t.I0R(0,"div",57),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",null==e.checkIndetails?null:e.checkIndetails.totalDuration," ")}}function YL(n,i){1&n&&t.OEk(0,"-")}function GL(n,i){if(1&n&&t.wR5(0,"app-password-change",43),2&n){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)("employeeChange",e.urlId)}}function HL(n,i){if(1&n){const e=t.KQA();t.I0R(0,"app-timeline",43),t.qCj("employeeChange",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onEmployeeChange(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)}}function VL(n,i){if(1&n&&t.wR5(0,"app-live-location",47),2&n){const e=t.GaO();t.E7m("companyId",null==e.employeeDetail?null:e.employeeDetail.company_id)("emp_image",null==e.employeeDetail?null:e.employeeDetail.image)("employeeChange",e.urlId)}}let UL=(()=>{class n{constructor(e,r,a,o){this.formBuilder=e,this.route=r,this.api=a,this.location=o,this.formGroups=[],this.urlId=null,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.selectedDate=new Date,this.checkIndetails={},this.route.queryParams.subscribe(d=>{this.currentTab=d.tab||"personalDetails"})}ngOnInit(){this.breadCrumbItems=[{label:"Pages",active:!0},{label:"Profile Settings",active:!0}],this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null}),this.urlId&&this.getemployeeData()}onEmployeeChange(e){this.urlId=e,this.getemployeeData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.urlId).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0],this.getCheckInDetail()):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetail?emp_id=${this.urlId}&company_id=${this.employeeDetail.company_id}&date=${this.formattedDate}`).subscribe(e=>{this.toggleSpinner(!1),this.checkIndetails=e&&e.status?e.data[0]:null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType1(){this.fieldTextType1=!this.fieldTextType1}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}addForm(){const e=this.formBuilder.group(this.educationForm.value);this.formGroups.push(e)}deleteForm(e){this.formGroups.splice(e,1)}formatTime(e){if(!e)return"Invalid time";const[r,a,o]=e.split(":");return`${+r%12||12}:${a} ${+r>=12?"PM":"AM"}`}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(j.im),t.GI1(T.gV),t.GI1(He.W),t.GI1(Me.oB))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-employee-detail"]],decls:165,vars:47,consts:[[1,"row"],[1,"col-xxl-3"],[1,"card","overflow-hidden"],["src","assets/images/small/img-7.jpg","alt","","id","cover-img",1,"card-img-top","profile-wid-img","object-fit-cover",2,"height","200px"],[1,"card-body","pt-0","mt-n5"],[1,"text-center"],[1,"profile-user","position-relative","d-inline-block","mx-auto"],["alt","","id","user-img","class","avatar-lg rounded-circle object-fit-cover border-0 img-thumbnail user-profile-image",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"d-flex","justify-content-center","gap-2","mt-2"],["class","avatar-xs d-block",3,"href"],[1,"card","border-top"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"list-unstyled","vstack","gap-2","mb-0"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"ri-login-box-line","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted",3,"innerHTML"],[1,"ri-logout-box-line","align-middle","me-1","text-primary-emphasis"],[1,"ph","ph-timer","align-middle","me-1","text-primary-emphasis"],["class","flex-shrink-0 text-muted"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-primary",3,"routerLink"],[1,"bi","bi-pencil-square","align-baseline","me-1"],[1,"btn","btn-secondary","ms-2",3,"click"],[1,"mdi","mdi-keyboard-backspace","align-baseline","me-1"],[1,"card"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-body","p-4"],[1,""],[1,"table-responsive"],[1,"table","table-sm","table-borderless","align-middle","description-table","mb-0"],["id","changePassword","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","employeeChange"],["id","timeline","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId"],["id","liveLocation","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"companyId","emp_image","employeeChange"],["alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"avatar-xs","d-block",3,"href"],[1,"avatar-title","rounded-circle","bg-primary-subtle","text-primary"],[1,"ri-phone-line"],[1,"avatar-title","rounded-circle","bg-danger-subtle","text-danger"],[1,"ri-mail-line"],[1,"flex-shrink-0","text-muted",3,"innerHTML"],[1,"flex-shrink-0","text-danger"],[1,"flex-shrink-0","text-muted"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),t.wR5(4,"img",3),t.C$Y(),t.I0R(5,"div",4)(6,"div",5)(7,"div",6),t.yuY(8,ML,1,1,"img",7)(9,RL,1,0),t.C$Y(),t.I0R(10,"div",8)(11,"h5"),t.OEk(12),t.C$Y(),t.I0R(13,"p",9),t.OEk(14),t.C$Y()(),t.I0R(15,"div",10),t.yuY(16,OL,3,1,"a",11)(17,LL,3,1,"a",11),t.C$Y()()(),t.I0R(18,"div",12)(19,"div",13)(20,"h6",14),t.OEk(21),t.wVc(22,"date"),t.C$Y()(),t.I0R(23,"div",15)(24,"ul",16)(25,"li")(26,"div",17)(27,"div",18),t.wR5(28,"i",19),t.OEk(29," Checkin Time "),t.C$Y(),t.yuY(30,PL,1,1,"div",20)(31,FL,2,0),t.C$Y()(),t.I0R(32,"li")(33,"div",17)(34,"div",18),t.wR5(35,"i",21),t.OEk(36," Checkout Time "),t.C$Y(),t.yuY(37,BL,1,1,"div",20)(38,NL,2,0),t.C$Y()(),t.I0R(39,"li")(40,"div",17)(41,"div",18),t.wR5(42,"i",22),t.OEk(43," Total Time "),t.C$Y(),t.yuY(44,zL,2,1,"div",23)(45,YL,1,0),t.C$Y()()()()()()(),t.I0R(46,"div",24)(47,"div",25)(48,"ul",26)(49,"li",27)(50,"a",28),t.qCj("click",function(){return a.changeTab("timeline")}),t.OEk(51," Timeline "),t.C$Y()(),t.I0R(52,"li",27)(53,"a",29),t.qCj("click",function(){return a.changeTab("personalDetails")}),t.OEk(54," Personal Details "),t.C$Y()(),t.I0R(55,"li",27)(56,"a",28),t.qCj("click",function(){return a.changeTab("changePassword")}),t.OEk(57," Changes Password "),t.C$Y()(),t.I0R(58,"li",27)(59,"a",28),t.qCj("click",function(){return a.changeTab("liveLocation")}),t.OEk(60," Live Location "),t.C$Y()()(),t.I0R(61,"div",30)(62,"a",31),t.wR5(63,"i",32),t.OEk(64," Edit Profile"),t.C$Y(),t.I0R(65,"button",33),t.qCj("click",function(){return a.goBack()}),t.wR5(66,"i",34),t.OEk(67," Back "),t.C$Y()()(),t.I0R(68,"div",35)(69,"div",36)(70,"div",37)(71,"div",35)(72,"div",13)(73,"h6",14),t.OEk(74,"Personal Details"),t.C$Y()(),t.I0R(75,"div",38)(76,"div",39)(77,"div",40)(78,"table",41)(79,"tbody")(80,"tr")(81,"th"),t.OEk(82,"Name"),t.C$Y(),t.I0R(83,"td"),t.OEk(84),t.C$Y()(),t.I0R(85,"tr")(86,"th"),t.OEk(87,"Gender"),t.C$Y(),t.I0R(88,"td"),t.OEk(89),t.C$Y()(),t.I0R(90,"tr")(91,"th"),t.OEk(92,"Department"),t.C$Y(),t.I0R(93,"td"),t.OEk(94),t.C$Y()(),t.I0R(95,"tr")(96,"th"),t.OEk(97,"Designation"),t.C$Y(),t.I0R(98,"td"),t.OEk(99),t.C$Y()(),t.I0R(100,"tr")(101,"th"),t.OEk(102,"Employee id"),t.C$Y(),t.I0R(103,"td"),t.OEk(104),t.C$Y()(),t.I0R(105,"tr")(106,"th"),t.OEk(107,"Email"),t.C$Y(),t.I0R(108,"td"),t.OEk(109),t.C$Y()(),t.I0R(110,"tr")(111,"th"),t.OEk(112,"Mobile"),t.C$Y(),t.I0R(113,"td"),t.OEk(114),t.C$Y()(),t.I0R(115,"tr")(116,"th"),t.OEk(117,"Date of Birth"),t.C$Y(),t.I0R(118,"td"),t.OEk(119),t.wVc(120,"date"),t.C$Y()(),t.I0R(121,"tr")(122,"th"),t.OEk(123,"Joining date"),t.C$Y(),t.I0R(124,"td"),t.OEk(125),t.wVc(126,"date"),t.C$Y()(),t.I0R(127,"tr")(128,"th"),t.OEk(129,"Address"),t.C$Y(),t.I0R(130,"td"),t.OEk(131),t.C$Y()(),t.I0R(132,"tr")(133,"th"),t.OEk(134,"City"),t.C$Y(),t.I0R(135,"td"),t.OEk(136),t.C$Y()(),t.I0R(137,"tr")(138,"th"),t.OEk(139,"State"),t.C$Y(),t.I0R(140,"td"),t.OEk(141),t.C$Y()(),t.I0R(142,"tr")(143,"th"),t.OEk(144,"Zip code"),t.C$Y(),t.I0R(145,"td"),t.OEk(146),t.C$Y()()()()()()()()(),t.I0R(147,"div",42)(148,"div",13)(149,"h6",14),t.OEk(150,"Changes Password"),t.C$Y()(),t.I0R(151,"div",15),t.yuY(152,GL,1,2,"app-password-change",43),t.C$Y()(),t.I0R(153,"div",44)(154,"div",13)(155,"h6",14),t.OEk(156,"Timeline"),t.C$Y()(),t.I0R(157,"div",15),t.yuY(158,HL,1,1,"app-timeline",45),t.C$Y()(),t.I0R(159,"div",46)(160,"div",13)(161,"h6",14),t.OEk(162,"Live Location"),t.C$Y()(),t.I0R(163,"div",15),t.yuY(164,VL,1,3,"app-live-location",47),t.C$Y()()()()()()),2&r&&(t.yG2(8),t.C0Y(8,null!=a.employeeDetail&&a.employeeDetail.image?8:9),t.yG2(4),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.name," "),t.yG2(2),t.cNF(null==a.employeeDetail?null:a.employeeDetail.designation_name),t.yG2(2),t.C0Y(16,null!=a.employeeDetail&&a.employeeDetail.mobile?16:-1),t.yG2(),t.C0Y(17,null!=a.employeeDetail&&a.employeeDetail.email?17:-1),t.yG2(4),t.oRS(" Today Attendance ( ",t.g7$(22,38,a.selectedDate,"dd MMM , yyyy"),") "),t.yG2(9),t.C0Y(30,null!=a.checkIndetails&&a.checkIndetails.latestCheckInTime?30:31),t.yG2(7),t.C0Y(37,null!=a.checkIndetails&&a.checkIndetails.latestCheckOutTime?37:38),t.yG2(7),t.C0Y(44,null!=a.checkIndetails&&a.checkIndetails.latestCheckInTime&&null!=a.checkIndetails&&a.checkIndetails.latestCheckOutTime?44:45),t.yG2(6),t.eAK("active","timeline"===a.currentTab),t.yG2(3),t.eAK("active","personalDetails"===a.currentTab),t.yG2(3),t.eAK("active","changePassword"===a.currentTab),t.yG2(3),t.eAK("active","liveLocation"===a.currentTab),t.yG2(3),t.CI5("routerLink","/edit-employee/",a.urlId,""),t.yG2(8),t.E7m("hidden","personalDetails"!==a.currentTab),t.yG2(14),t.cNF(null==a.employeeDetail?null:a.employeeDetail.name),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.gender),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.department_name),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.designation_name),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.employee_id),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.email),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.mobile),t.yG2(5),t.oRS(" ",t.g7$(120,41,null==a.employeeDetail?null:a.employeeDetail.dob,"dd/MMM/yyyy")," "),t.yG2(6),t.oRS(" ",t.g7$(126,44,null==a.employeeDetail?null:a.employeeDetail.joining_date,"dd/MMM/yyyy")," "),t.yG2(6),t.cNF(null==a.employeeDetail?null:a.employeeDetail.address),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.city),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.state),t.yG2(5),t.cNF(null==a.employeeDetail?null:a.employeeDetail.zip_code),t.yG2(),t.E7m("hidden","changePassword"!==a.currentTab),t.yG2(5),t.C0Y(152,a.employeeDetail?152:-1),t.yG2(),t.E7m("hidden","timeline"!==a.currentTab),t.yG2(5),t.C0Y(158,a.employeeDetail?158:-1),t.yG2(),t.E7m("hidden","liveLocation"!==a.currentTab),t.yG2(5),t.C0Y(164,a.employeeDetail?164:-1))},dependencies:[T.ER,bL,SL,IL,Me.y]})}return n})();var ab=function(){return ab=Object.assign||function(n){for(var i,e=1,r=arguments.length;e<r;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);return n},ab.apply(this,arguments)},jL=function(){function n(i,e,r){var a=this;this.endVal=e,this.options=r,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(o){a.startTime||(a.startTime=o);var d=o-a.startTime;a.remaining=a.duration-d,a.frameVal=a.useEasing?a.countDown?a.startVal-a.easingFn(d,0,a.startVal-a.endVal,a.duration):a.easingFn(d,a.startVal,a.endVal-a.startVal,a.duration):a.startVal+d/a.duration*(a.endVal-a.startVal),a.frameVal=(a.countDown?a.frameVal<a.endVal:a.frameVal>a.endVal)?a.endVal:a.frameVal,a.frameVal=Number(a.frameVal.toFixed(a.options.decimalPlaces)),a.printValue(a.frameVal),d<a.duration?a.rAF=requestAnimationFrame(a.count):null!==a.finalEndVal?a.update(a.finalEndVal):a.options.onCompleteCallback&&a.options.onCompleteCallback()},this.formatNumber=function(o){var d,p,D,P,B=o<0?"-":"";d=Math.abs(o).toFixed(a.options.decimalPlaces);var te=(d+="").split(".");if(p=te[0],D=te.length>1?a.options.decimal+te[1]:"",a.options.useGrouping){P="";for(var ae=3,oe=0,ge=0,ue=p.length;ge<ue;++ge)a.options.useIndianSeparators&&4===ge&&(ae=2,oe=1),0!==ge&&oe%ae==0&&(P=a.options.separator+P),oe++,P=p[ue-ge-1]+P;p=P}return a.options.numerals&&a.options.numerals.length&&(p=p.replace(/[0-9]/g,function(Te){return a.options.numerals[+Te]}),D=D.replace(/[0-9]/g,function(Te){return a.options.numerals[+Te]})),B+a.options.prefix+p+D+a.options.suffix},this.easeOutExpo=function(o,d,p,D){return p*(1-Math.pow(2,-10*o/D))*1024/1023+d},this.options=ab(ab({},this.defaults),r),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el="string"==typeof i?document.getElementById(i):i,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,i):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return a.handleScroll(a)}),window.onscroll=function(){window.onScrollFns.forEach(function(o){return o()})},this.handleScroll(this)))}return n.prototype.handleScroll=function(i){if(i&&window&&!i.once){var e=window.innerHeight+window.scrollY,r=i.el.getBoundingClientRect(),a=r.top+window.pageYOffset,o=r.top+r.height+window.pageYOffset;o<e&&o>window.scrollY&&i.paused?(i.paused=!1,setTimeout(function(){return i.start()},i.options.scrollSpyDelay),i.options.scrollSpyOnce&&(i.once=!0)):(window.scrollY>o||a>e)&&!i.paused&&i.reset()}},n.prototype.determineDirectionAndSmartEasing=function(){var i=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>i,Math.abs(i-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing?(this.finalEndVal=i,this.endVal=i+(this.countDown?1:-1)*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=i,this.finalEndVal=null),this.useEasing=null===this.finalEndVal&&this.options.useEasing},n.prototype.start=function(i){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),i&&(this.options.onCompleteCallback=i),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},n.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},n.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},n.prototype.update=function(i){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(i),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},n.prototype.printValue=function(i){var e;if(this.el){var r=this.formattingFn(i);null!==(e=this.options.plugin)&&void 0!==e&&e.render?this.options.plugin.render(this.el,r):"INPUT"===this.el.tagName?this.el.value=r:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=r:this.el.innerHTML=r}},n.prototype.ensureNumber=function(i){return"number"==typeof i&&!isNaN(i)},n.prototype.validateValue=function(i){var e=Number(i);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(i),null)},n.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},n}();let ik=(()=>{class n{constructor(e,r,a){this.el=e,this.zone=r,this.platformId=a,this.options={},this.reanimateOnClick=!0,this.complete=new t._w7}onClick(){this.reanimateOnClick&&this.animate()}ngOnChanges(e){if(!(0,Me.c0)(this.platformId))return;const{options:r,endVal:a}=e;void 0!==a?.currentValue?void 0!==this.countUp?this.zone.runOutsideAngular(()=>{this.countUp.update(this.endVal)}):this.initAndRun():void 0!==r?.currentValue&&this.initAndRun()}animate(){this.zone.runOutsideAngular(()=>{this.countUp.reset(),this.countUp.start(()=>{this.zone.run(()=>{this.complete.emit()})})})}initAndRun(){this.zone.runOutsideAngular(()=>{this.countUp=new jL(this.el.nativeElement,this.endVal,this.options),this.options.enableScrollSpy||this.animate()})}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(t.AHE))},n.\u0275dir=t.Sc5({type:n,selectors:[["","countUp",""]],hostBindings:function(e,r){1&e&&t.qCj("click",function(){return r.onClick()})},inputs:{endVal:[t.Wk5.None,"countUp","endVal"],options:"options",reanimateOnClick:"reanimateOnClick"},outputs:{complete:"complete"},features:[t.SYr]}),n})(),$L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[]]}),n})();function WL(n,i){if(1&n&&(t.I0R(0,"option",39),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function XL(n,i){if(1&n&&(t.I0R(0,"span",126),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}function qL(n,i){if(1&n&&t.OEk(0),2&n){const e=t.GaO(2).$implicit;t.oRS(" by ",e.timeDifference," ")}}function ZL(n,i){if(1&n&&(t.I0R(0,"span",146),t.OEk(1),t.yuY(2,qL,1,1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.E7m("ngClass","Early"==e.checkin_status?"bg-warning":"Late"==e.checkin_status?"bg-danger":"bg-success"),t.yG2(),t.oRS("",e.checkin_status," "),t.yG2(),t.C0Y(2,"On-Time"!=e.checkin_status&&"Leave"!=e.checkin_status?2:-1)}}const KL=n=>["/employee-detail",n],JL=()=>({tab:"personalDetails"}),QL=()=>({tab:"timeline"});function eP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",127),t.wR5(1,"td"),t.I0R(2,"td",128)(3,"a",129),t.OEk(4,"#TB01"),t.C$Y()(),t.I0R(5,"td",130)(6,"div",131)(7,"div",132),t.wR5(8,"img",133),t.C$Y(),t.I0R(9,"div",134)(10,"h5",135)(11,"a",136),t.OEk(12),t.C$Y()(),t.I0R(13,"p",13),t.OEk(14),t.C$Y()()()(),t.I0R(15,"td",137),t.OEk(16),t.C$Y(),t.I0R(17,"td",138),t.OEk(18),t.C$Y(),t.I0R(19,"td",139),t.OEk(20),t.C$Y(),t.I0R(21,"td",140)(22,"span",141),t.OEk(23),t.C$Y(),t.wR5(24,"br"),t.yuY(25,ZL,3,3,"span",142),t.C$Y(),t.I0R(26,"td",143),t.OEk(27),t.C$Y(),t.I0R(28,"td",143),t.OEk(29),t.wR5(30,"br"),t.I0R(31,"a",144),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.Gew(178).show(),t.CGJ(d.updateCheckInDetal(o.checkIns,o.totalDuration))}),t.OEk(32,"Check Detail "),t.C$Y()(),t.I0R(33,"td",145)(34,"span",146),t.OEk(35),t.C$Y()(),t.I0R(36,"td")(37,"ul",147)(38,"li")(39,"a",148),t.wR5(40,"i",149),t.C$Y()(),t.I0R(41,"li")(42,"a",150),t.wR5(43,"i",151),t.C$Y()()()()()}if(2&n){const e=i.$implicit,r=t.GaO();t.CI5("id","p_",e._id,""),t.yG2(8),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(3),t.E7m("routerLink",t.S45(19,KL,e.id))("queryParams",t.q4q(21,JL)),t.yG2(),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.designation," "),t.yG2(2),t.cNF(e.mobile),t.yG2(2),t.cNF(e.email),t.yG2(2),t.cNF(e.department),t.yG2(3),t.cNF(r.formatTime(e.latestCheckInTime)),t.yG2(2),t.C0Y(25,"Absent"!=e.checkin_status&&"Leave"!=e.checkin_status?25:-1),t.yG2(2),t.oRS(" ",r.formatTime(e.latestCheckOutTime)," "),t.yG2(2),t.oRS(" ",e.totalDuration,""),t.yG2(5),t.E7m("ngClass","Present"==e.attendance_status?"bg-success":"Absent"==e.attendance_status?"bg-danger":"bg-warning"),t.yG2(),t.cNF(e.attendance_status),t.yG2(4),t.CI5("routerLink","/employee-detail/",e.id,""),t.E7m("queryParams",t.q4q(22,QL)),t.yG2(3),t.u6R("routerLink","/attendance-calender/",e.id,"/",r.company_id,"")}}function tP(n,i){1&n&&(t.I0R(0,"div",65)(1,"div",152)(2,"span",153),t.OEk(3,"Loading..."),t.C$Y()()())}function iP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",154),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredAttendanceData?null:e.filteredAttendanceData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function nP(n,i){if(1&n&&(t.I0R(0,"tr")(1,"th",96),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.C$Y(),t.I0R(5,"td"),t.OEk(6),t.C$Y(),t.I0R(7,"td",97),t.OEk(8),t.C$Y()()),2&n){const e=i.$implicit,r=i.$index,a=t.GaO();t.yG2(2),t.cNF(r+1),t.yG2(2),t.cNF(a.formatTime(e.check_in_time)),t.yG2(2),t.cNF(a.formatTime(e.check_out_time)),t.yG2(2),t.cNF(e.duration)}}const nk=()=>({standalone:!0});let rP=(()=>{class n{constructor(e,r,a){this.api=e,this.router=r,this.route=a,this.dateChangeSubject=new Hg.E,this.spinnerStatus=!1,this.selectedDate=new Date,this.attendanceData=[],this.attendanceDataList=[],this.filteredAttendanceData=[],this.checkInDetails=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.selectValue=["Alaska","Hawaii","California","Nevada","Oregon","Washington","Arizona","Colorado","Idaho","Montana","Nebraska","New Mexico","North Dakota","Utah","Wyoming","Alabama","Arkansas","Illinois","Iowa"],this.departments=[],this.selectedDepartments=[],this.selectedDesignations=[],this.selectedEmp=[],this.designations=[],this.filterCounts={termCount:0,designationCount:0,departmentCount:0,statusCount:0,statusCheckCount:0,dateCount:0,empCount:0},this.selectedStatus="All",this.selectedCheckStatus="All",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.breadCrumbItems=[{label:"Attendance"},{label:"Employee",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedDepartments=r.selectedDepartments?r.selectedDepartments.split(","):[],this.selectedDesignations=r.selectedDesignations?r.selectedDesignations.split(","):[],this.selectedStatus=r.selectedStatus||null,this.selectedCheckStatus=r.selectedCheckStatus||null,this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],this.selectedDate=r.date?new Date(r.date):new Date,this.formattedDate=this.formatDate(this.selectedDate);const a=new Date,o=a.getFullYear()===this.selectedDate.getFullYear()&&a.getMonth()===this.selectedDate.getMonth()&&a.getDate()===this.selectedDate.getDate();this.filterCounts.dateCount=o?0:1,this.filterdata(),this.updatePaginatedData()}),this.dateChangeSubject.pipe((0,nb.o)(300)).subscribe(r=>{this.handleDateChange(r)}),this.company_id&&(this.getAttendance(),this.getDepartment(),this.getDesignation())}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e);const r=new Date,a=r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth()&&r.getDate()===e.getDate();this.filterCounts.dateCount=a?0:1,this.router.navigate([],{relativeTo:this.route,queryParams:{date:this.formattedDate},queryParamsHandling:"merge"}),this.getAttendance()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getAttendence?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.attendanceDataList=r.data||[],this.attendanceCount=r.attendanceCount||[],this.filterdata()):(this.attendanceData=[],this.attendanceDataList=[],this.attendanceCount=[],this.toggleSpinner(!1))},r=>{this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}updateCheckInDetal(e,r){this.totalDuration=r,this.checkInDetails=e}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.attendanceData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.attendanceData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.attendanceDataList;null==this.selectedStatus&&(this.selectedStatus=""),null==this.selectedCheckStatus&&(this.selectedCheckStatus=""),this.filterCounts.termCount=0,this.filterCounts.designationCount=0,this.filterCounts.departmentCount=0,this.filterCounts.statusCount=0,this.filterCounts.statusCheckCount=0,this.filterCounts.empCount=0,this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase())||r.mobile.toLowerCase().includes(this.term.toLowerCase())||r.email.toLowerCase().includes(this.term.toLowerCase())||r.employee_id.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedDepartments.length>0&&(e=e.filter(r=>this.selectedDepartments.map(a=>a.toLowerCase()).includes(r.department.toLowerCase())),this.filterCounts.departmentCount=1),this.selectedDesignations&&this.selectedDesignations.length>0&&(e=e.filter(r=>this.selectedDesignations.map(a=>a.toLowerCase()).includes(r.designation.toLowerCase())),this.filterCounts.designationCount=1),this.selectedEmp&&this.selectedEmp.length>0&&(e=e.filter(r=>this.selectedEmp.map(a=>a.toLowerCase()).includes(r.name.toLowerCase())),this.filterCounts.empCount=1),this.selectedStatus&&(e=e.filter(r=>r.attendance_status===this.selectedStatus),this.filterCounts.statusCount=1),this.selectedCheckStatus&&(e=e.filter(r=>r.checkin_status===this.selectedCheckStatus),this.filterCounts.statusCheckCount=1),this.filteredAttendanceData=e,(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus||this.selectedCheckStatus)&&0===this.filteredAttendanceData.length&&(this.currentPage=1),this.updatePaginatedData()}updatePaginatedData(){(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus||this.selectedCheckStatus)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredAttendanceData.length&&(this.currentPage=1),this.attendanceData=(0,$n.cloneDeep)(this.filteredAttendanceData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term,selectedDepartments:this.selectedDepartments.join(","),selectedDesignations:this.selectedDesignations.join(","),selectedEmp:this.selectedEmp.join(","),selectedStatus:this.selectedStatus,selectedCheckStatus:this.selectedCheckStatus,date:this.formattedDate},queryParamsHandling:"merge"})}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}reset(){this.term="",this.selectedDepartments=[],this.selectedDesignations=[],this.selectedStatus="",this.selectedCheckStatus="",this.attendanceData=this.attendanceDataList,this.selectedEmp=[],this.selectedDate=new Date,this.formattedDate=this.formatDate(this.selectedDate),this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedDepartments:null,selectedDesignations:null,selectedStatus:null,selectedCheckStatus:null,selectedEmp:null,page:1,itemsPerPage:this.currentItemsPerPage,date:this.formattedDate},queryParamsHandling:"merge"}),this.getAttendance()}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.designationCount+this.filterCounts.departmentCount+this.filterCounts.statusCount+this.filterCounts.statusCheckCount+this.filterCounts.dateCount+this.filterCounts.empCount}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.attendanceData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}formatTime(e){if(!e)return"-";const[r,a,o]=e.split(":");return`${+r%12||12}:${a}:${o} ${+r>=12?"PM":"AM"} `}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-attendance-list"]],decls:284,vars:48,consts:[["title","Employee Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"row","g-4","parent"],[1,"child","childA","border-end-sm","h-100"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-user-follow-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-user-unfollow-line"],[1,"avatar-title","bg-body-secondary","border","border-warning-subtle","rounded-circle","text-warning"],[1,"mdi","mdi-account-alert-outline"],[1,"ri-timer-line"],[1,"counter-value"],[1,"avatar-title","bg-body-secondary","border","border-secondary-subtle","rounded-circle","text-secondary"],[1,"bi","bi-clock-history"],[1,"child","childA","h-100"],[1,"bx","bx-timer"],[1,"col-lg-12"],[1,"card-header","d-lg-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name, mobile etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","","id","exampleModalPopovers",1,"modal","fade"],["tooltipmodal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive","mt-4"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-light"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",1,"text-end"],["id","products-list"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],[1,"text-end"],[1,"bi","bi-clock","align-baseline","me-1"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-light",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","id","datepickers","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],["for","datepickers",1,"input-group-text","cursor-pointer"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],["bindLabel","name","bindValue","name","name","Employee name","placeholder","Select Employee name",3,"items","multiple","ngModel","change","ngModelChange"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["value","Present"],["value","Absent"],["value","Leave"],["value","On-Time"],["value","Early"],["value","Late"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1","ms-2"],[1,"fs-md"],[1,"text-dark",3,"routerLink","queryParams"],[1,"discount"],[1,"category"],[1,"stock"],[1,"price"],[1,"text-center"],["class","badge",3,"ngClass"],[1,"orders"],[1,"text-decoration-underline","ng-star-inserted",3,"click"],[1,"published"],[1,"badge",3,"ngClass"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"routerLink","queryParams"],[1,"ph-eye","align-middle"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"routerLink"],[1,"ri-folder-reduce-line","align-middle"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10),t.wR5(11,"i",11),t.C$Y()(),t.I0R(12,"div",12)(13,"p",13),t.OEk(14,"Total Employee"),t.C$Y()()(),t.I0R(15,"h3",14)(16,"span",15),t.OEk(17),t.C$Y()()(),t.I0R(18,"div",7)(19,"div",8)(20,"div",9)(21,"div",16),t.wR5(22,"i",17),t.C$Y()(),t.I0R(23,"div",12)(24,"p",13),t.OEk(25,"Present"),t.C$Y()()(),t.I0R(26,"h3",14)(27,"span",15),t.OEk(28),t.C$Y()()(),t.I0R(29,"div",7)(30,"div",8)(31,"div",9)(32,"div",18),t.wR5(33,"i",19),t.C$Y()(),t.I0R(34,"div",12)(35,"p",13),t.OEk(36,"Absent"),t.C$Y()()(),t.I0R(37,"h3",14)(38,"span",15),t.OEk(39),t.C$Y()()(),t.I0R(40,"div",7)(41,"div",8)(42,"div",9)(43,"div",20),t.wR5(44,"i",21),t.C$Y()(),t.I0R(45,"div",12)(46,"p",13),t.OEk(47,"Leave"),t.C$Y()()(),t.I0R(48,"h3",14)(49,"span",15),t.OEk(50),t.C$Y()()(),t.I0R(51,"div",7)(52,"div",8)(53,"div",9)(54,"div",16),t.wR5(55,"i",22),t.C$Y()(),t.I0R(56,"div",12)(57,"p",13),t.OEk(58,"On Time"),t.C$Y()()(),t.I0R(59,"h3",14)(60,"span",23),t.OEk(61),t.C$Y()()(),t.I0R(62,"div",7)(63,"div",8)(64,"div",9)(65,"div",24),t.wR5(66,"i",25),t.C$Y()(),t.I0R(67,"div",12)(68,"p",13),t.OEk(69,"Early"),t.C$Y()()(),t.I0R(70,"h3",14)(71,"span",23),t.OEk(72),t.C$Y()()(),t.I0R(73,"div",26)(74,"div",8)(75,"div",9)(76,"div",18),t.wR5(77,"i",27),t.C$Y()(),t.I0R(78,"div",12)(79,"p",13),t.OEk(80,"Late"),t.C$Y()()(),t.I0R(81,"h3",14)(82,"span",23),t.OEk(83),t.C$Y()()()()()()()(),t.I0R(84,"div",2)(85,"div",28)(86,"div",4)(87,"div",29)(88,"div",12)(89,"h5",30),t.OEk(90," Employees "),t.I0R(91,"span",31),t.OEk(92),t.C$Y(),t.I0R(93,"span",32)(94,"div",33)(95,"div",34),t.OEk(96," Items per page : "),t.C$Y(),t.I0R(97,"div",35)(98,"div",36)(99,"select",37),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(100,WL,2,2,"option",38),t.I0R(101,"option",39),t.OEk(102," Show All "),t.C$Y()()()()()()(),t.I0R(103,"p",40),t.OEk(104," Showing Result of Date: "),t.I0R(105,"span",41),t.OEk(106),t.wVc(107,"date"),t.C$Y()()(),t.I0R(108,"div",42)(109,"div",43)(110,"div",44)(111,"div",45)(112,"input",46),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDate,p)||(a.selectedDate=p),p}),t.qCj("bsValueChange",function(p){return a.onDateChange(p)}),t.C$Y(),t.I0R(113,"div",47)(114,"label",48),t.wR5(115,"i",49),t.C$Y()()()(),t.I0R(116,"div",50)(117,"input",51),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(118,"i",52),t.C$Y(),t.I0R(119,"div",53)(120,"div",54)(121,"div")(122,"button",55),t.qCj("click",function(){return a.openEnd()}),t.wR5(123,"i",56),t.OEk(124," Filter "),t.yuY(125,XL,2,1,"span",57),t.C$Y()()()()()()(),t.I0R(126,"div",5)(127,"div",58)(128,"table",59)(129,"thead",60)(130,"tr")(131,"th")(132,"div",61),t.wR5(133,"label",62),t.C$Y()(),t.I0R(134,"th",63),t.qCj("click",function(){return a.onSort("name")}),t.OEk(135," Name "),t.C$Y(),t.I0R(136,"th",63),t.qCj("click",function(){return a.onSort("mobile")}),t.OEk(137," Mobile "),t.C$Y(),t.I0R(138,"th",63),t.qCj("click",function(){return a.onSort("email")}),t.OEk(139," Email "),t.C$Y(),t.I0R(140,"th",63),t.qCj("click",function(){return a.onSort("department")}),t.OEk(141," Department "),t.C$Y(),t.I0R(142,"th",63),t.qCj("click",function(){return a.onSort("check_in_time")}),t.OEk(143," Check-in Time "),t.C$Y(),t.I0R(144,"th",63),t.qCj("click",function(){return a.onSort("check_out_time")}),t.OEk(145," Check-out Time "),t.C$Y(),t.I0R(146,"th",63),t.qCj("click",function(){return a.onSort("totalDuration")}),t.OEk(147," Work Hours "),t.C$Y(),t.I0R(148,"th",63),t.qCj("click",function(){return a.onSort("attendance_status")}),t.OEk(149," Attendance Status "),t.C$Y(),t.I0R(150,"th"),t.OEk(151,"Action"),t.C$Y()()(),t.I0R(152,"tbody",64),t.c53(153,eP,44,23,"tr",127,t.wJt),t.C$Y(),t.yuY(155,tP,4,0,"div",65),t.C$Y()(),t.I0R(156,"div",66)(157,"div",67)(158,"div",68)(159,"div",69),t.wR5(160,"i",70),t.C$Y()(),t.I0R(161,"h5",71),t.OEk(162,"Sorry! No Result Found"),t.C$Y(),t.I0R(163,"p",13),t.OEk(164),t.C$Y()()(),t.I0R(165,"div",72)(166,"div",73)(167,"div",74),t.OEk(168," Showing "),t.I0R(169,"span",75),t.OEk(170),t.C$Y(),t.OEk(171," of "),t.I0R(172,"span",75),t.OEk(173),t.C$Y(),t.OEk(174," Results "),t.C$Y()(),t.I0R(175,"div",76),t.yuY(176,iP,1,4,"pagination",77),t.C$Y()()()()()()(),t.I0R(177,"div",78,79)(179,"div",80)(180,"div",81)(181,"div",82)(182,"h5",83),t.OEk(183,"Check-in Detail"),t.C$Y(),t.I0R(184,"button",84),t.qCj("click",function(){t.usT(o);const p=t.Gew(178);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(185,"div",85)(186,"div",86)(187,"table",87)(188,"thead")(189,"tr",88)(190,"th",89),t.OEk(191,"#"),t.C$Y(),t.I0R(192,"th",90),t.OEk(193,"Check-In Time"),t.C$Y(),t.I0R(194,"th",90),t.OEk(195,"Check-Out Time"),t.C$Y(),t.I0R(196,"th",91),t.OEk(197,"Duration"),t.C$Y()()(),t.I0R(198,"tbody",92),t.c53(199,nP,9,4,"tr",null,t.wJt),t.C$Y()()(),t.I0R(201,"div",93)(202,"table",94)(203,"tbody")(204,"tr",95)(205,"th",96),t.OEk(206,"Total Duration"),t.C$Y(),t.I0R(207,"th",97),t.wR5(208,"i",98),t.OEk(209),t.C$Y()()()()()(),t.I0R(210,"div",99)(211,"div",28)(212,"div",100)(213,"button",101),t.qCj("click",function(){t.usT(o);const p=t.Gew(178);return t.CGJ(p.hide())}),t.OEk(214," Close "),t.C$Y()()()()()()(),t.I0R(215,"div",102)(216,"div",103)(217,"h5",104),t.OEk(218,"Attendance Filters"),t.C$Y(),t.I0R(219,"button",84),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(220,"div",105)(221,"div",2)(222,"div",28)(223,"div",106)(224,"p",107),t.OEk(225,"Select Date"),t.C$Y(),t.I0R(226,"div",45)(227,"input",108),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDate,p)||(a.selectedDate=p),p}),t.qCj("bsValueChange",function(p){return a.onDateChange(p)}),t.C$Y(),t.I0R(228,"div",47)(229,"label",109),t.wR5(230,"i",49),t.C$Y()()()()(),t.I0R(231,"div",28)(232,"div",106)(233,"p",107),t.OEk(234," Search name, Employee id etc... "),t.C$Y(),t.I0R(235,"div",50)(236,"input",110),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(237,"i",52),t.C$Y()()(),t.I0R(238,"div",28)(239,"div",106)(240,"p",107),t.OEk(241,"Employee Name"),t.C$Y(),t.I0R(242,"ng-select",111),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedEmp,p)||(a.selectedEmp=p),p}),t.C$Y()()(),t.I0R(243,"div",28)(244,"div",106)(245,"p",107),t.OEk(246," Attendance Status "),t.C$Y(),t.I0R(247,"select",112),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedStatus,p)||(a.selectedStatus=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(248,"option",113),t.OEk(249,"All"),t.C$Y(),t.I0R(250,"option",114),t.OEk(251,"Present"),t.C$Y(),t.I0R(252,"option",115),t.OEk(253,"Absent"),t.C$Y(),t.I0R(254,"option",116),t.OEk(255,"Leave"),t.C$Y()()()(),t.I0R(256,"div",28)(257,"div",106)(258,"p",107),t.OEk(259," Check-in Status "),t.C$Y(),t.I0R(260,"select",112),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedCheckStatus,p)||(a.selectedCheckStatus=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(261,"option",113),t.OEk(262,"All"),t.C$Y(),t.I0R(263,"option",117),t.OEk(264,"On Time"),t.C$Y(),t.I0R(265,"option",118),t.OEk(266,"Early"),t.C$Y(),t.I0R(267,"option",119),t.OEk(268,"Late"),t.C$Y()()()(),t.I0R(269,"div",28)(270,"div",106)(271,"p",107),t.OEk(272,"Department"),t.C$Y(),t.I0R(273,"ng-select",120),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDepartments,p)||(a.selectedDepartments=p),p}),t.C$Y()()(),t.I0R(274,"div",28)(275,"div",106)(276,"p",107),t.OEk(277,"Designation"),t.C$Y(),t.I0R(278,"ng-select",121),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDesignations,p)||(a.selectedDesignations=p),p}),t.C$Y()()()()(),t.I0R(279,"div",122)(280,"button",123),t.qCj("click",function(){return a.reset()}),t.wR5(281,"i",124),t.OEk(282," Reset "),t.C$Y()()(),t.I0R(283,"div",125),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(16),t.E7m("countUp",null==a.attendanceDataList?null:a.attendanceDataList.length),t.yG2(),t.cNF(null==a.attendanceDataList?null:a.attendanceDataList.length),t.yG2(10),t.E7m("countUp",null==a.attendanceCount?null:a.attendanceCount.totalPresent),t.yG2(),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalPresent),t.yG2(10),t.E7m("countUp",null==a.attendanceCount?null:a.attendanceCount.totalAbsent),t.yG2(),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalAbsent),t.yG2(10),t.E7m("countUp",null==a.attendanceCount?null:a.attendanceCount.totalLeave),t.yG2(),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalLeave),t.yG2(11),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalOnTime),t.yG2(11),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalEarly),t.yG2(11),t.cNF(null==a.attendanceCount?null:a.attendanceCount.totalLate),t.yG2(9),t.cNF(null==a.attendanceData?null:a.attendanceData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.attendanceDataList?null:a.attendanceDataList.length),t.yG2(5),t.oRS(" ",t.g7$(107,43,a.formattedDate,"EEEE, dd MMM , yyyy"),""),t.yG2(6),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(5),t.OKB("ngModel",a.term),t.yG2(8),t.C0Y(125,a.totalFilterCount>0?125:-1),t.yG2(28),t.oho(a.attendanceData),t.yG2(2),t.C0Y(155,a.spinnerStatus?155:-1),t.yG2(9),t.oRS(" We've searched ",null==a.attendanceDataList?null:a.attendanceDataList.length," Employee Data. We did not find any Employee for you search. "),t.yG2(6),t.cNF(null==a.attendanceData?null:a.attendanceData.length),t.yG2(3),t.cNF(null==a.filteredAttendanceData?null:a.filteredAttendanceData.length),t.yG2(3),t.C0Y(176,null!=a.filteredAttendanceData&&a.filteredAttendanceData.length?176:-1),t.yG2(23),t.oho(a.checkInDetails),t.yG2(10),t.oRS(" ",a.totalDuration," "),t.yG2(18),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(9),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("items",a.attendanceDataList)("multiple",!0),t.OKB("ngModel",a.selectedEmp),t.yG2(5),t.OKB("ngModel",a.selectedStatus),t.E7m("ngModelOptions",t.q4q(46,nk)),t.yG2(13),t.OKB("ngModel",a.selectedCheckStatus),t.E7m("ngModelOptions",t.q4q(47,nk)),t.yG2(13),t.E7m("items",a.departments)("multiple",!0),t.OKB("ngModel",a.selectedDepartments),t.yG2(5),t.E7m("items",a.designations)("multiple",!0),t.OKB("ngModel",a.selectedDesignations))},dependencies:[Me.QF,Me.ay,We.O,T.ER,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,nt.im,nf.uK,ik,ev.UT,Vg.em,Vg.U5,Me.y],styles:[".parent[_ngcontent-%COMP%]{display:flex}.back-bg[_ngcontent-%COMP%]{background-color:#f3e7e3}.back-bg1[_ngcontent-%COMP%]{background-color:#fff2ee26}.child[_ngcontent-%COMP%]{display:flex;flex-flow:column;justify-content:center}.childA[_ngcontent-%COMP%]{flex:1}@media (max-width: 800px){.parent[_ngcontent-%COMP%]{flex-wrap:wrap}.child[_ngcontent-%COMP%]{height:100px;padding:8%}}"]})}return n})();const aP=["showModal"],sP=["deleteRecordModal"];function oP(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function lP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"ul",104)(1,"li")(2,"a",105),t.wR5(3,"i",106),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",107),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.editList(a))}),t.wR5(7,"i",108),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",109),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.removeItem(a.id))}),t.wR5(11,"i",110),t.OEk(12," Remove"),t.C$Y()()()}}const cP=(n,i)=>({"bg-info-subtle text-info":n,"bg-danger-subtle text-danger":i});function uP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",88)(1,"td")(2,"div",31)(3,"input",89),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",90),t.C$Y()(),t.I0R(5,"td",91)(6,"a",92),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",93),t.OEk(9),t.C$Y(),t.I0R(10,"td",94)(11,"div",95)(12,"input",96),t.qCj("change",function(a){const d=t.usT(e).$implicit,p=t.GaO();return t.CGJ(p.setStatus(d,a))}),t.C$Y(),t.I0R(13,"label",97)(14,"span",98),t.OEk(15),t.C$Y()()()(),t.I0R(16,"td",99),t.OEk(17),t.wVc(18,"date"),t.C$Y(),t.I0R(19,"td")(20,"div",100)(21,"button",101),t.wR5(22,"i",102),t.C$Y(),t.yuY(23,lP,13,0,"ul",103),t.C$Y()()()}if(2&n){const e=i.$implicit,r=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),t.yG2(),t.E7m("for","customSwitchsizemd"+r),t.yG2(),t.E7m("ngClass",t.IBC(13,cP,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(2),t.oRS(" ",t.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function dP(n,i){1&n&&(t.I0R(0,"div",36)(1,"div",111)(2,"span",112),t.OEk(3,"Loading..."),t.C$Y()()())}function hP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",113),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredDepartmentData?null:e.filteredDepartmentData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function fP(n,i){1&n&&(t.I0R(0,"div",114),t.OEk(1,"Department name is required."),t.C$Y())}function pP(n,i){1&n&&(t.I0R(0,"div",114),t.OEk(1," Department name must be at most 45 characters "),t.C$Y())}function mP(n,i){1&n&&(t.I0R(0,"div",114),t.OEk(1,"Status is required."),t.C$Y())}let gP=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.filteredDepartmentData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Department",active:!0}],this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.departmentDataList=r.data||[],this.filterdata()):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const d={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",e.id,d).subscribe(p=>this.handleResponse(p),p=>this.handleError(p))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("department",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("department",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("department",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("department-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.departmentData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.departmentData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.departmentDataList;this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase()))),this.filteredDepartmentData=e,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){this.term&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredDepartmentData.length&&(this.currentPage=1),this.departmentData=(0,$n.cloneDeep)(this.filteredDepartmentData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term},queryParamsHandling:"merge"})}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-department-list"]],viewQuery:function(r,a){if(1&r&&(t.CC$(aP,5),t.CC$(sP,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:133,vars:17,consts:[["title","Department List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-secondary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Departments "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,oP,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"input",21),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",22),t.C$Y()(),t.I0R(27,"button",23),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.show())}),t.wR5(28,"i",24),t.C$Y(),t.I0R(29,"button",25),t.qCj("click",function(){return a.onAdd()}),t.wR5(30,"i",26),t.OEk(31," Add Department "),t.C$Y()()()(),t.I0R(32,"div",27)(33,"div",28)(34,"table",29)(35,"thead",30)(36,"tr")(37,"th")(38,"div",31)(39,"input",32),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(40,"label",33),t.C$Y()(),t.I0R(41,"th",34),t.qCj("click",function(){return a.onSort("name")}),t.OEk(42," Department Name "),t.C$Y(),t.I0R(43,"th",34),t.qCj("click",function(){return a.onSort("status")}),t.OEk(44," Status "),t.C$Y(),t.I0R(45,"th",34),t.qCj("click",function(){return a.onSort("created_at")}),t.OEk(46," Created At "),t.C$Y(),t.I0R(47,"th"),t.OEk(48,"Action"),t.C$Y()()(),t.I0R(49,"tbody",35),t.c53(50,uP,24,16,"tr",88,t.wJt),t.C$Y(),t.yuY(52,dP,4,0,"div",36),t.C$Y()(),t.I0R(53,"div",37)(54,"div",38)(55,"div",39)(56,"div",40),t.wR5(57,"i",41),t.C$Y()(),t.I0R(58,"h5",42),t.OEk(59,"Sorry! No Result Found"),t.C$Y(),t.I0R(60,"p",43),t.OEk(61),t.C$Y()()(),t.I0R(62,"div",44)(63,"div",45)(64,"div",46),t.OEk(65," Showing "),t.I0R(66,"span",47),t.OEk(67),t.C$Y(),t.OEk(68," of "),t.I0R(69,"span",47),t.OEk(70),t.C$Y(),t.OEk(71," Results "),t.C$Y()(),t.I0R(72,"div",48),t.yuY(73,hP,1,4,"pagination",49),t.C$Y()()()()()()(),t.I0R(74,"div",50,51),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(76,"div",52)(77,"div",53)(78,"div",54)(79,"h5",55),t.OEk(80,"Add Department"),t.C$Y(),t.I0R(81,"button",56),t.qCj("click",function(){t.usT(o);const p=t.Gew(75);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(82,"form",57),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(83,"div",58),t.wR5(84,"div",59),t.I0R(85,"div",60)(86,"label",61),t.OEk(87,"Department Name "),t.I0R(88,"span",62),t.OEk(89,"*"),t.C$Y()(),t.wR5(90,"input",63),t.yuY(91,fP,2,0,"div",64)(92,pP,2,0,"div",64),t.C$Y(),t.I0R(93,"div",60)(94,"label",65),t.OEk(95,"Status "),t.I0R(96,"span",62),t.OEk(97,"*"),t.C$Y()(),t.I0R(98,"select",66)(99,"option",67),t.OEk(100,"Select Status"),t.C$Y(),t.I0R(101,"option",68),t.OEk(102,"Active"),t.C$Y(),t.I0R(103,"option",69),t.OEk(104,"Inactive"),t.C$Y()(),t.yuY(105,mP,2,0,"div",64),t.C$Y()(),t.I0R(106,"div",70)(107,"div",71)(108,"button",72),t.qCj("click",function(){t.usT(o);const p=t.Gew(75);return t.CGJ(p.hide())}),t.wR5(109,"i",73),t.OEk(110," Close "),t.C$Y(),t.I0R(111,"button",74),t.OEk(112," Add "),t.C$Y()()()()()()(),t.I0R(113,"div",75,76)(115,"div",52)(116,"div",53)(117,"div",77)(118,"button",78),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(119,"div",79)(120,"div",80)(121,"div",62),t.wR5(122,"i",81),t.C$Y(),t.I0R(123,"div",82)(124,"h3",83),t.OEk(125,"Are you sure ?"),t.C$Y(),t.I0R(126,"p",84),t.OEk(127," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(128,"div",85)(129,"button",86),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.hide())}),t.OEk(130," Close "),t.C$Y(),t.I0R(131,"button",87),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(132," Yes, Delete It! "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.departmentData?null:a.departmentData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.departmentDataList?null:a.departmentDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(14),t.OKB("ngModel",a.masterSelected),t.yG2(11),t.oho(a.departmentData),t.yG2(2),t.C0Y(52,a.spinnerStatus?52:-1),t.yG2(9),t.oRS(" We've searched ",a.departmentDataList.length," Department We did not find any Department for you search. "),t.yG2(6),t.cNF(null==a.departmentData?null:a.departmentData.length),t.yG2(3),t.cNF(null==a.filteredDepartmentData?null:a.filteredDepartmentData.length),t.yG2(3),t.C0Y(73,null!=a.filteredDepartmentData&&a.filteredDepartmentData.length?73:-1),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(91,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?91:-1),t.yG2(),t.C0Y(92,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?92:-1),t.yG2(6),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(105,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?105:-1))},dependencies:[Me.QF,Me.ay,We.O,T.ER,Wu.uo,Wu.M3,Wu.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,Me.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}"]})}return n})();const vP=["showModal"],_P=["deleteRecordModal"];function yP(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function xP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"ul",104)(1,"li")(2,"a",105),t.wR5(3,"i",106),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",107),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.editList(a))}),t.wR5(7,"i",108),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",109),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.removeItem(a.id))}),t.wR5(11,"i",110),t.OEk(12," Remove"),t.C$Y()()()}}const bP=(n,i)=>({"bg-info-subtle text-info":n,"bg-danger-subtle text-danger":i});function wP(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",88)(1,"td")(2,"div",31)(3,"input",89),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",90),t.C$Y()(),t.I0R(5,"td",91)(6,"a",92),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",93),t.OEk(9),t.C$Y(),t.I0R(10,"td",94)(11,"div",95)(12,"input",96),t.qCj("change",function(a){const d=t.usT(e).$implicit,p=t.GaO();return t.CGJ(p.setStatus(d,a))}),t.C$Y(),t.I0R(13,"label",97)(14,"span",98),t.OEk(15),t.C$Y()()()(),t.I0R(16,"td",99),t.OEk(17),t.wVc(18,"date"),t.C$Y(),t.I0R(19,"td")(20,"div",100)(21,"button",101),t.wR5(22,"i",102),t.C$Y(),t.yuY(23,xP,13,0,"ul",103),t.C$Y()()()}if(2&n){const e=i.$implicit,r=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(3),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),t.yG2(),t.E7m("for","customSwitchsizemd"+r),t.yG2(),t.E7m("ngClass",t.IBC(13,bP,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(2),t.oRS(" ",t.g7$(18,10,e.created_at,"dd MMM, YYYY")," ")}}function CP(n,i){1&n&&(t.I0R(0,"div",36)(1,"div",111)(2,"span",112),t.OEk(3,"Loading..."),t.C$Y()()())}function EP(n,i){1&n&&(t.I0R(0,"div",113),t.OEk(1,"Designation name is required."),t.C$Y())}function kP(n,i){1&n&&(t.I0R(0,"div",113),t.OEk(1," Designation name must be at most 45 characters "),t.C$Y())}function TP(n,i){1&n&&(t.I0R(0,"div",113),t.OEk(1,"Status is required."),t.C$Y())}let SP=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.departmentData=[],this.departmentDataList=[],this.filteredDepartmentData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Designation",active:!0}];const e=localStorage.getItem("currentUser");if(this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.filterdata(),this.updatePaginatedData()}),e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDesignation(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.departmentDataList=r.data||[],this.filterdata()):(this.departmentData=[],this.departmentDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const d={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("designation",e.id,d).subscribe(p=>this.handleResponse(p),p=>this.handleError(p))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("designation",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("designation",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Designation",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Designation",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("designation",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("designation-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDesignation(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.departmentData=this.departmentData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.departmentData.length;o++)1==this.departmentData[o].states&&r.push(this.departmentData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.departmentData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.departmentData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.departmentDataList;this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase()))),this.filteredDepartmentData=e,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.departmentData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){this.term&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredDepartmentData.length&&(this.currentPage=1),this.departmentData=(0,$n.cloneDeep)(this.filteredDepartmentData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term},queryParamsHandling:"merge"})}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-designation-list"]],viewQuery:function(r,a){if(1&r&&(t.CC$(vP,5),t.CC$(_P,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:133,vars:18,consts:[["title","Designation List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search Department",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-secondary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Designation Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Designation "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,yP,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"input",21),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",22),t.C$Y()(),t.I0R(27,"button",23),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.show())}),t.wR5(28,"i",24),t.C$Y(),t.I0R(29,"button",25),t.qCj("click",function(){return a.onAdd()}),t.wR5(30,"i",26),t.OEk(31," Add Designation "),t.C$Y()()()(),t.I0R(32,"div",27)(33,"div",28)(34,"table",29)(35,"thead",30)(36,"tr")(37,"th")(38,"div",31)(39,"input",32),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(40,"label",33),t.C$Y()(),t.I0R(41,"th",34),t.qCj("click",function(){return a.onSort("name")}),t.OEk(42," Designation Name "),t.C$Y(),t.I0R(43,"th",34),t.qCj("click",function(){return a.onSort("status")}),t.OEk(44," Status "),t.C$Y(),t.I0R(45,"th",34),t.qCj("click",function(){return a.onSort("created_at")}),t.OEk(46," Created At "),t.C$Y(),t.I0R(47,"th"),t.OEk(48,"Action"),t.C$Y()()(),t.I0R(49,"tbody",35),t.c53(50,wP,24,16,"tr",88,t.wJt),t.C$Y(),t.yuY(52,CP,4,0,"div",36),t.C$Y()(),t.I0R(53,"div",37)(54,"div",38)(55,"div",39)(56,"div",40),t.wR5(57,"i",41),t.C$Y()(),t.I0R(58,"h5",42),t.OEk(59,"Sorry! No Result Found"),t.C$Y(),t.I0R(60,"p",43),t.OEk(61),t.C$Y()()(),t.I0R(62,"div",44)(63,"div",45)(64,"div",46),t.OEk(65," Showing "),t.I0R(66,"span",47),t.OEk(67),t.C$Y(),t.OEk(68," of "),t.I0R(69,"span",47),t.OEk(70),t.C$Y(),t.OEk(71," Results "),t.C$Y()(),t.I0R(72,"div",48)(73,"pagination",49),t.qCj("pageChanged",function(p){return a.pageChanged(p)}),t.C$Y()()()()()()()(),t.I0R(74,"div",50,51),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(76,"div",52)(77,"div",53)(78,"div",54)(79,"h5",55),t.OEk(80,"Add Designation"),t.C$Y(),t.I0R(81,"button",56),t.qCj("click",function(){t.usT(o);const p=t.Gew(75);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(82,"form",57),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(83,"div",58),t.wR5(84,"div",59),t.I0R(85,"div",60)(86,"label",61),t.OEk(87,"Designation Name "),t.I0R(88,"span",62),t.OEk(89,"*"),t.C$Y()(),t.wR5(90,"input",63),t.yuY(91,EP,2,0,"div",64)(92,kP,2,0,"div",64),t.C$Y(),t.I0R(93,"div",60)(94,"label",65),t.OEk(95,"Status "),t.I0R(96,"span",62),t.OEk(97,"*"),t.C$Y()(),t.I0R(98,"select",66)(99,"option",67),t.OEk(100,"Select Status"),t.C$Y(),t.I0R(101,"option",68),t.OEk(102,"Active"),t.C$Y(),t.I0R(103,"option",69),t.OEk(104,"Inactive"),t.C$Y()(),t.yuY(105,TP,2,0,"div",64),t.C$Y()(),t.I0R(106,"div",70)(107,"div",71)(108,"button",72),t.qCj("click",function(){t.usT(o);const p=t.Gew(75);return t.CGJ(p.hide())}),t.wR5(109,"i",73),t.OEk(110," Close "),t.C$Y(),t.I0R(111,"button",74),t.OEk(112," Add "),t.C$Y()()()()()()(),t.I0R(113,"div",75,76)(115,"div",52)(116,"div",53)(117,"div",77)(118,"button",78),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(119,"div",79)(120,"div",80)(121,"div",62),t.wR5(122,"i",81),t.C$Y(),t.I0R(123,"div",82)(124,"h3",83),t.OEk(125,"Are you sure ?"),t.C$Y(),t.I0R(126,"p",84),t.OEk(127," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(128,"div",85)(129,"button",86),t.qCj("click",function(){t.usT(o);const p=t.Gew(114);return t.CGJ(p.hide())}),t.OEk(130," Close "),t.C$Y(),t.I0R(131,"button",87),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(132," Yes, Delete It! "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.departmentData?null:a.departmentData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.departmentDataList?null:a.departmentDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(14),t.OKB("ngModel",a.masterSelected),t.yG2(11),t.oho(a.departmentData),t.yG2(2),t.C0Y(52,a.spinnerStatus?52:-1),t.yG2(9),t.oRS(" We've searched ",a.departmentDataList.length," Department We did not find any Department for you search. "),t.yG2(6),t.cNF(null==a.departmentData?null:a.departmentData.length),t.yG2(3),t.cNF(null==a.filteredDepartmentData?null:a.filteredDepartmentData.length),t.yG2(3),t.E7m("totalItems",null==a.filteredDepartmentData?null:a.filteredDepartmentData.length)("itemsPerPage",10),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(91,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?91:-1),t.yG2(),t.C0Y(92,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?92:-1),t.yG2(6),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(105,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?105:-1))},dependencies:[Me.QF,Me.ay,We.O,T.ER,Wu.uo,Wu.M3,Wu.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,Me.y]})}return n})();var Z1,Na,rk,ak,gy,l_,sk,ok,lk,sb={},ck=[],DP=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ug(n,i){for(var e in i)n[e]=i[e];return n}function uk(n){var i=n.parentNode;i&&i.removeChild(n)}function si(n,i,e){var r,a,o,d={};for(o in i)"key"==o?r=i[o]:"ref"==o?a=i[o]:d[o]=i[o];if(arguments.length>2&&(d.children=arguments.length>3?Z1.call(arguments,2):e),"function"==typeof n&&null!=n.defaultProps)for(o in n.defaultProps)void 0===d[o]&&(d[o]=n.defaultProps[o]);return K1(n,d,r,a,null)}function K1(n,i,e,r,a){var o={type:n,props:i,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++rk};return null==a&&null!=Na.vnode&&Na.vnode(o),o}function dl(n){return n.children}function dk(n,i,e){"-"===i[0]?n.setProperty(i,e??""):n[i]=null==e?"":"number"!=typeof e||DP.test(i)?e:e+"px"}function ob(n,i,e,r,a){var o;e:if("style"===i)if("string"==typeof e)n.style.cssText=e;else{if("string"==typeof r&&(n.style.cssText=r=""),r)for(i in r)e&&i in e||dk(n.style,i,"");if(e)for(i in e)r&&e[i]===r[i]||dk(n.style,i,e[i])}else if("o"===i[0]&&"n"===i[1])o=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in n?i.toLowerCase().slice(2):i.slice(2),n.l||(n.l={}),n.l[i+o]=e,e?r||n.addEventListener(i,o?fk:hk,o):n.removeEventListener(i,o?fk:hk,o);else if("dangerouslySetInnerHTML"!==i){if(a)i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==i&&"height"!==i&&"href"!==i&&"list"!==i&&"form"!==i&&"tabIndex"!==i&&"download"!==i&&i in n)try{n[i]=e??"";break e}catch{}"function"==typeof e||(null==e||!1===e&&-1==i.indexOf("-")?n.removeAttribute(i):n.setAttribute(i,e))}}function hk(n){gy=!0;try{return this.l[n.type+!1](Na.event?Na.event(n):n)}finally{gy=!1}}function fk(n){gy=!0;try{return this.l[n.type+!0](Na.event?Na.event(n):n)}finally{gy=!1}}function rf(n,i){this.props=n,this.context=i}function J1(n,i){if(null==i)return n.__?J1(n.__,n.__.__k.indexOf(n)+1):null;for(var e;i<n.__k.length;i++)if(null!=(e=n.__k[i])&&null!=e.__e)return e.__e;return"function"==typeof n.type?J1(n):null}function pk(n){var i,e;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,i=0;i<n.__k.length;i++)if(null!=(e=n.__k[i])&&null!=e.__e){n.__e=n.__c.base=e.__e;break}return pk(n)}}function IP(n){gy?setTimeout(n):ok(n)}function Gw(n){(!n.__d&&(n.__d=!0)&&l_.push(n)&&!lb.__r++||sk!==Na.debounceRendering)&&((sk=Na.debounceRendering)||IP)(lb)}function lb(){var n,i,e,r,a,o,d,p;for(l_.sort(function(D,P){return D.__v.__b-P.__v.__b});n=l_.shift();)n.__d&&(i=l_.length,r=void 0,a=void 0,d=(o=(e=n).__v).__e,(p=e.__P)&&(r=[],(a=Ug({},o)).__v=o.__v+1,Hw(p,o,a,e.__n,void 0!==p.ownerSVGElement,null!=o.__h?[d]:null,r,d??J1(o),o.__h),yk(r,o),o.__e!=d&&pk(o)),l_.length>i&&l_.sort(function(D,P){return D.__v.__b-P.__v.__b}));lb.__r=0}function mk(n,i,e,r,a,o,d,p,D,P){var B,te,ae,oe,ge,ue,Te,qe=r&&r.__k||ck,ht=qe.length;for(e.__k=[],B=0;B<i.length;B++)if(null!=(oe=e.__k[B]=null==(oe=i[B])||"boolean"==typeof oe?null:"string"==typeof oe||"number"==typeof oe||"bigint"==typeof oe?K1(null,oe,null,null,oe):Array.isArray(oe)?K1(dl,{children:oe},null,null,null):oe.__b>0?K1(oe.type,oe.props,oe.key,oe.ref?oe.ref:null,oe.__v):oe)){if(oe.__=e,oe.__b=e.__b+1,null===(ae=qe[B])||ae&&oe.key==ae.key&&oe.type===ae.type)qe[B]=void 0;else for(te=0;te<ht;te++){if((ae=qe[te])&&oe.key==ae.key&&oe.type===ae.type){qe[te]=void 0;break}ae=null}Hw(n,oe,ae=ae||sb,a,o,d,p,D,P),ge=oe.__e,(te=oe.ref)&&ae.ref!=te&&(Te||(Te=[]),ae.ref&&Te.push(ae.ref,null,oe),Te.push(te,oe.__c||ge,oe)),null!=ge?(null==ue&&(ue=ge),"function"==typeof oe.type&&oe.__k===ae.__k?oe.__d=D=gk(oe,D,n):D=vk(n,oe,ae,qe,ge,D),"function"==typeof e.type&&(e.__d=D)):D&&ae.__e==D&&D.parentNode!=n&&(D=J1(ae))}for(e.__e=ue,B=ht;B--;)null!=qe[B]&&("function"==typeof e.type&&null!=qe[B].__e&&qe[B].__e==e.__d&&(e.__d=_k(r).nextSibling),bk(qe[B],qe[B]));if(Te)for(B=0;B<Te.length;B++)xk(Te[B],Te[++B],Te[++B])}function gk(n,i,e){for(var r,a=n.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=n,i="function"==typeof r.type?gk(r,i,e):vk(e,r,r,a,r.__e,i));return i}function jg(n,i){return i=i||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(e){jg(e,i)}):i.push(n)),i}function vk(n,i,e,r,a,o){var d,p,D;if(void 0!==i.__d)d=i.__d,i.__d=void 0;else if(null==e||a!=o||null==a.parentNode)e:if(null==o||o.parentNode!==n)n.appendChild(a),d=null;else{for(p=o,D=0;(p=p.nextSibling)&&D<r.length;D+=1)if(p==a)break e;n.insertBefore(a,o),d=o}return void 0!==d?d:a.nextSibling}function _k(n){var i,e,r;if(null==n.type||"string"==typeof n.type)return n.__e;if(n.__k)for(i=n.__k.length-1;i>=0;i--)if((e=n.__k[i])&&(r=_k(e)))return r;return null}function Hw(n,i,e,r,a,o,d,p,D){var P,B,te,ae,oe,ge,ue,Te,qe,ht,ut,mi,zi,vi,Vt,wi=i.type;if(void 0!==i.constructor)return null;null!=e.__h&&(D=e.__h,p=i.__e=e.__e,i.__h=null,o=[p]),(P=Na.__b)&&P(i);try{e:if("function"==typeof wi){if(Te=i.props,qe=(P=wi.contextType)&&r[P.__c],ht=P?qe?qe.props.value:P.__:r,e.__c?ue=(B=i.__c=e.__c).__=B.__E:("prototype"in wi&&wi.prototype.render?i.__c=B=new wi(Te,ht):(i.__c=B=new rf(Te,ht),B.constructor=wi,B.render=RP),qe&&qe.sub(B),B.props=Te,B.state||(B.state={}),B.context=ht,B.__n=r,te=B.__d=!0,B.__h=[],B._sb=[]),null==B.__s&&(B.__s=B.state),null!=wi.getDerivedStateFromProps&&(B.__s==B.state&&(B.__s=Ug({},B.__s)),Ug(B.__s,wi.getDerivedStateFromProps(Te,B.__s))),ae=B.props,oe=B.state,B.__v=i,te)null==wi.getDerivedStateFromProps&&null!=B.componentWillMount&&B.componentWillMount(),null!=B.componentDidMount&&B.__h.push(B.componentDidMount);else{if(null==wi.getDerivedStateFromProps&&Te!==ae&&null!=B.componentWillReceiveProps&&B.componentWillReceiveProps(Te,ht),!B.__e&&null!=B.shouldComponentUpdate&&!1===B.shouldComponentUpdate(Te,B.__s,ht)||i.__v===e.__v){for(i.__v!==e.__v&&(B.props=Te,B.state=B.__s,B.__d=!1),i.__e=e.__e,i.__k=e.__k,i.__k.forEach(function(Yi){Yi&&(Yi.__=i)}),ut=0;ut<B._sb.length;ut++)B.__h.push(B._sb[ut]);B._sb=[],B.__h.length&&d.push(B);break e}null!=B.componentWillUpdate&&B.componentWillUpdate(Te,B.__s,ht),null!=B.componentDidUpdate&&B.__h.push(function(){B.componentDidUpdate(ae,oe,ge)})}if(B.context=ht,B.props=Te,B.__P=n,mi=Na.__r,zi=0,"prototype"in wi&&wi.prototype.render){for(B.state=B.__s,B.__d=!1,mi&&mi(i),P=B.render(B.props,B.state,B.context),vi=0;vi<B._sb.length;vi++)B.__h.push(B._sb[vi]);B._sb=[]}else do{B.__d=!1,mi&&mi(i),P=B.render(B.props,B.state,B.context),B.state=B.__s}while(B.__d&&++zi<25);B.state=B.__s,null!=B.getChildContext&&(r=Ug(Ug({},r),B.getChildContext())),te||null==B.getSnapshotBeforeUpdate||(ge=B.getSnapshotBeforeUpdate(ae,oe)),Vt=null!=P&&P.type===dl&&null==P.key?P.props.children:P,mk(n,Array.isArray(Vt)?Vt:[Vt],i,e,r,a,o,d,p,D),B.base=i.__e,i.__h=null,B.__h.length&&d.push(B),ue&&(B.__E=B.__=null),B.__e=!1}else null==o&&i.__v===e.__v?(i.__k=e.__k,i.__e=e.__e):i.__e=function MP(n,i,e,r,a,o,d,p){var D,P,B,te=e.props,ae=i.props,oe=i.type,ge=0;if("svg"===oe&&(a=!0),null!=o)for(;ge<o.length;ge++)if((D=o[ge])&&"setAttribute"in D==!!oe&&(oe?D.localName===oe:3===D.nodeType)){n=D,o[ge]=null;break}if(null==n){if(null===oe)return document.createTextNode(ae);n=a?document.createElementNS("http://www.w3.org/2000/svg",oe):document.createElement(oe,ae.is&&ae),o=null,p=!1}if(null===oe)te===ae||p&&n.data===ae||(n.data=ae);else{if(o=o&&Z1.call(n.childNodes),P=(te=e.props||sb).dangerouslySetInnerHTML,B=ae.dangerouslySetInnerHTML,!p){if(null!=o)for(te={},ge=0;ge<n.attributes.length;ge++)te[n.attributes[ge].name]=n.attributes[ge].value;(B||P)&&(B&&(P&&B.__html==P.__html||B.__html===n.innerHTML)||(n.innerHTML=B&&B.__html||""))}if(function AP(n,i,e,r,a){var o;for(o in e)"children"===o||"key"===o||o in i||ob(n,o,null,e[o],r);for(o in i)a&&"function"!=typeof i[o]||"children"===o||"key"===o||"value"===o||"checked"===o||e[o]===i[o]||ob(n,o,i[o],e[o],r)}(n,ae,te,a,p),B)i.__k=[];else if(ge=i.props.children,mk(n,Array.isArray(ge)?ge:[ge],i,e,r,a&&"foreignObject"!==oe,o,d,o?o[0]:e.__k&&J1(e,0),p),null!=o)for(ge=o.length;ge--;)null!=o[ge]&&uk(o[ge]);p||("value"in ae&&void 0!==(ge=ae.value)&&(ge!==n.value||"progress"===oe&&!ge||"option"===oe&&ge!==te.value)&&ob(n,"value",ge,te.value,!1),"checked"in ae&&void 0!==(ge=ae.checked)&&ge!==n.checked&&ob(n,"checked",ge,te.checked,!1))}return n}(e.__e,i,e,r,a,o,d,D);(P=Na.diffed)&&P(i)}catch(Yi){i.__v=null,(D||null!=o)&&(i.__e=p,i.__h=!!D,o[o.indexOf(p)]=null),Na.__e(Yi,i,e)}}function yk(n,i){Na.__c&&Na.__c(i,n),n.some(function(e){try{n=e.__h,e.__h=[],n.some(function(r){r.call(e)})}catch(r){Na.__e(r,e.__v)}})}function xk(n,i,e){try{"function"==typeof n?n(i):n.current=i}catch(r){Na.__e(r,e)}}function bk(n,i,e){var r,a;if(Na.unmount&&Na.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||xk(r,null,i)),null!=(r=n.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Na.__e(o,i)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(a=0;a<r.length;a++)r[a]&&bk(r[a],i,e||"function"!=typeof n.type);e||null==n.__e||uk(n.__e),n.__=n.__e=n.__d=void 0}function RP(n,i,e){return this.constructor(n,e)}function tv(n,i,e){var r,a,o;Na.__&&Na.__(n,i),a=(r="function"==typeof e)?null:e&&e.__k||i.__k,o=[],Hw(i,n=(!r&&e||i).__k=si(dl,null,[n]),a||sb,sb,void 0!==i.ownerSVGElement,!r&&e?[e]:a?null:i.firstChild?Z1.call(i.childNodes):null,o,!r&&e?e:a?a.__e:i.firstChild,r),yk(o,n)}Z1=ck.slice,Na={__e:function(n,i,e,r){for(var a,o,d;i=i.__;)if((a=i.__c)&&!a.__)try{if((o=a.constructor)&&null!=o.getDerivedStateFromError&&(a.setState(o.getDerivedStateFromError(n)),d=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(n,r||{}),d=a.__d),d)return a.__E=a}catch(p){n=p}throw n}},rk=0,ak=function(n){return null!=n&&void 0===n.constructor},gy=!1,rf.prototype.setState=function(n,i){var e;e=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Ug({},this.state),"function"==typeof n&&(n=n(Ug({},e),this.props)),n&&Ug(e,n),null!=n&&this.__v&&(i&&this._sb.push(i),Gw(this))},rf.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Gw(this))},rf.prototype.render=dl,l_=[],ok="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,lb.__r=0,lk=0;var gc,Vw,Ek,kk=[],cb=[],Tk=Na.__b,Sk=Na.__r,Dk=Na.diffed,Ak=Na.__c,Ik=Na.unmount;function YP(){for(var n;n=kk.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(db),n.__H.__h.forEach($w),n.__H.__h=[]}catch(i){n.__H.__h=[],Na.__e(i,n.__v)}}Na.__b=function(n){gc=null,Tk&&Tk(n)},Na.__r=function(n){Sk&&Sk(n);var i=(gc=n.__c).__H;i&&(Vw===gc?(i.__h=[],gc.__h=[],i.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=cb,e.__N=e.i=void 0})):(i.__h.forEach(db),i.__h.forEach($w),i.__h=[])),Vw=gc},Na.diffed=function(n){Dk&&Dk(n);var i=n.__c;i&&i.__H&&(i.__H.__h.length&&(1!==kk.push(i)&&Ek===Na.requestAnimationFrame||((Ek=Na.requestAnimationFrame)||GP)(YP)),i.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==cb&&(e.__=e.__V),e.i=void 0,e.__V=cb})),Vw=gc=null},Na.__c=function(n,i){i.some(function(e){try{e.__h.forEach(db),e.__h=e.__h.filter(function(r){return!r.__||$w(r)})}catch(r){i.some(function(a){a.__h&&(a.__h=[])}),i=[],Na.__e(r,e.__v)}}),Ak&&Ak(n,i)},Na.unmount=function(n){Ik&&Ik(n);var i,e=n.__c;e&&e.__H&&(e.__H.__.forEach(function(r){try{db(r)}catch(a){i=a}}),e.__H=void 0,i&&Na.__e(i,e.__v))};var Ok="function"==typeof requestAnimationFrame;function GP(n){var i,e=function(){clearTimeout(r),Ok&&cancelAnimationFrame(i),setTimeout(n)},r=setTimeout(e,100);Ok&&(i=requestAnimationFrame(e))}function db(n){var i=gc,e=n.__c;"function"==typeof e&&(n.__c=void 0,e()),gc=i}function $w(n){var i=gc;n.__c=n.__(),gc=i}function Xw(n,i){for(var e in n)if("__source"!==e&&!(e in i))return!0;for(var r in i)if("__source"!==r&&n[r]!==i[r])return!0;return!1}function Zw(n){this.props=n}(Zw.prototype=new rf).isPureReactComponent=!0,Zw.prototype.shouldComponentUpdate=function(n,i){return Xw(this.props,n)||Xw(this.state,i)};var Fk=Na.__b;Na.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Fk&&Fk(n)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var $P=Na.__e;Na.__e=function(n,i,e,r){if(n.then)for(var a,o=i;o=o.__;)if((a=o.__c)&&a.__c)return null==i.__e&&(i.__e=e.__e,i.__k=e.__k),a.__c(n,i);$P(n,i,e,r)};var Nk=Na.unmount;function zk(n,i,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){"function"==typeof r.__c&&r.__c()}),n.__c.__H=null),null!=(n=function Pk(n,i){for(var e in i)n[e]=i[e];return n}({},n)).__c&&(n.__c.__P===e&&(n.__c.__P=i),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return zk(r,i,e)})),n}function Yk(n,i,e){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Yk(r,i,e)}),n.__c&&n.__c.__P===i&&(n.__e&&e.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=e)),n}function hb(){this.__u=0,this.t=null,this.__b=null}function Gk(n){var i=n.__.__c;return i&&i.__a&&i.__a(n)}function Q1(){this.u=null,this.o=null}Na.unmount=function(n){var i=n.__c;i&&i.__R&&i.__R(),i&&!0===n.__h&&(n.type=null),Nk&&Nk(n)},(hb.prototype=new rf).__c=function(n,i){var e=i.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var a=Gk(r.__v),o=!1,d=function(){o||(o=!0,e.__R=null,a?a(p):p())};e.__R=d;var p=function(){if(! --r.__u){if(r.state.__a){var P=r.state.__a;r.__v.__k[0]=Yk(P,P.__c.__P,P.__c.__O)}var B;for(r.setState({__a:r.__b=null});B=r.t.pop();)B.forceUpdate()}},D=!0===i.__h;r.__u++||D||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(d,d)},hb.prototype.componentWillUnmount=function(){this.t=[]},hb.prototype.render=function(n,i){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=zk(this.__b,e,r.__O=r.__P)}this.__b=null}var a=i.__a&&si(dl,null,n.fallback);return a&&(a.__h=null),[si(dl,null,i.__a?null:n.children),a]};var Hk=function(n,i,e){if(++e[1]===e[0]&&n.o.delete(i),n.props.revealOrder&&("t"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function XP(n){return this.getChildContext=function(){return n.context},n.children}function qP(n){var i=this,e=n.i;i.componentWillUnmount=function(){tv(null,i.l),i.l=null,i.i=null},i.i&&i.i!==e&&i.componentWillUnmount(),n.__v?(i.l||(i.i=e,i.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(r){this.childNodes.push(r),i.i.appendChild(r)},insertBefore:function(r,a){this.childNodes.push(r),i.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),i.i.removeChild(r)}}),tv(si(XP,{context:i.context},n.__v),i.l)):i.l&&i.componentWillUnmount()}(Q1.prototype=new rf).__a=function(n){var i=this,e=Gk(i.__v),r=i.o.get(n);return r[0]++,function(a){var o=function(){i.props.revealOrder?(r.push(a),Hk(i,n,r)):a()};e?e(o):o()}},Q1.prototype.render=function(n){this.u=null,this.o=new Map;var i=jg(n.children);n.revealOrder&&"b"===n.revealOrder[0]&&i.reverse();for(var e=i.length;e--;)this.o.set(i[e],this.u=[1,0,this.u]);return n.children},Q1.prototype.componentDidUpdate=Q1.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(i,e){Hk(n,e,i)})};var Uk=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ZP=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,KP=typeof document<"u",JP=function(n){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};rf.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(rf.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(i){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:i})}})});var jk=Na.event;function t3(){}function n3(){return this.cancelBubble}function r3(){return this.defaultPrevented}Na.event=function(n){return jk&&(n=jk(n)),n.persist=t3,n.isPropagationStopped=n3,n.isDefaultPrevented=r3,n.nativeEvent=n};var Wk={configurable:!0,get:function(){return this.class}},Xk=Na.vnode;Na.vnode=function(n){var i=n.type,e=n.props,r=e;if("string"==typeof i){var a=-1===i.indexOf("-");for(var o in r={},e){var d=e[o];KP&&"children"===o&&"noscript"===i||"value"===o&&"defaultValue"in e&&null==d||("defaultValue"===o&&"value"in e&&null==e.value?o="value":"download"===o&&!0===d?d="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+i)&&!JP(e.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():a&&ZP.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===d&&(d=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=d)}"select"==i&&r.multiple&&Array.isArray(r.value)&&(r.value=jg(e.children).forEach(function(p){p.props.selected=-1!=r.value.indexOf(p.props.value)})),"select"==i&&null!=r.defaultValue&&(r.value=jg(e.children).forEach(function(p){p.props.selected=r.multiple?-1!=r.defaultValue.indexOf(p.props.value):r.defaultValue==p.props.value})),n.props=r,e.class!=e.className&&(Wk.enumerable="className"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,"className",Wk))}n.$$typeof=Uk,Xk&&Xk(n)};var qk=Na.__r;Na.__r=function(n){qk&&qk(n)};const Jk=[],Kw=new Map;function fb(n){Jk.push(n),Kw.forEach(i=>{eT(i,n)})}function Qk(n){let i=Kw.get(n);if(!i||!i.isConnected){if(i=n.querySelector("style[data-fullcalendar]"),!i){i=document.createElement("style"),i.setAttribute("data-fullcalendar","");const e=function y3(){return void 0===Jw&&(Jw=function x3(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const i=document.querySelector("script[nonce]");return i&&i.nonce||""}()),Jw}();e&&(i.nonce=e);const r=n===document?document.head:n,a=n===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(i,a)}Kw.set(n,i),function _3(n){for(const i of Jk)eT(n,i)}(i)}}function eT(n,i){const{sheet:e}=n,r=e.cssRules.length;i.split("}").forEach((a,o)=>{(a=a.trim())&&e.insertRule(a+"}",r+o)})}let Jw;typeof document<"u"&&Qk(document),fb(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');class Qw{constructor(i){this.drainedOption=i,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(i){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==i?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),i))}pause(i=""){let{pauseDepths:e}=this;e[i]=(e[i]||0)+1,this.clearTimeout()}resume(i="",e){let{pauseDepths:r}=this;i in r&&(e?delete r[i]:(r[i]-=1,r[i]<=0&&delete r[i]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function eC(n){n.parentNode&&n.parentNode.removeChild(n)}function _h(n,i){if(n.closest)return n.closest(i);if(!document.documentElement.contains(n))return null;do{if(tT(n,i))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}function tT(n,i){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,i)}const C3=/(top|left|right|bottom|width|height)$/i;function ex(n,i){for(let e in i)iT(n,e,i[e])}function iT(n,i,e){n.style[i]=null==e?"":"number"==typeof e&&C3.test(i)?`${e}px`:e}function nT(n){var i,e;return null!==(e=null===(i=n.composedPath)||void 0===i?void 0:i.call(n)[0])&&void 0!==e?e:n.target}let rT=0;function nv(){return rT+=1,"fc-dom-"+rT}function pb(n){n.preventDefault()}function aT(n,i,e,r){let a=function E3(n,i){return e=>{let r=_h(e.target,n);r&&i.call(r,e,r)}}(e,r);return n.addEventListener(i,a),()=>{n.removeEventListener(i,a)}}const sT=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function oT(n){return Object.assign({onClick:n},lT(n))}function lT(n){return{tabIndex:0,onKeyDown(i){("Enter"===i.key||" "===i.key)&&(n(i),i.preventDefault())}}}let cT=0;function u_(){return cT+=1,String(cT)}function tC(){document.body.classList.add("fc-not-allowed")}function iC(){document.body.classList.remove("fc-not-allowed")}function O3(n,i,e){return e.func?e.func(n,i):function L3(n,i){return n||i?null==i?-1:null==n?1:"string"==typeof n||"string"==typeof i?String(n).localeCompare(String(i)):n-i:0}(n[e.field],i[e.field])*(e.order||1)}function _y(n,i){let e=String(n);return"000".substr(0,i-e.length)+e}function tx(n,i,e){return"function"==typeof n?n(...i):"string"==typeof n?i.reduce((r,a,o)=>r.replace("$"+o,a||""),n):e}function P3(n,i){return n-i}function mb(n){return n%1==0}function F3(n){let i=n.querySelector(".fc-scrollgrid-shrink-frame"),e=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!i)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!e)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-i.getBoundingClientRect().width+e.getBoundingClientRect().width}const uT=["years","months","days","milliseconds"],B3=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function mo(n,i){return"string"==typeof n?function N3(n){let i=B3.exec(n);if(i){let e=i[1]?-1:1;return{years:0,months:0,days:e*(i[2]?parseInt(i[2],10):0),milliseconds:e*(60*(i[3]?parseInt(i[3],10):0)*60*1e3+60*(i[4]?parseInt(i[4],10):0)*1e3+1e3*(i[5]?parseInt(i[5],10):0)+(i[6]?parseInt(i[6],10):0))}}return null}(n):"object"==typeof n&&n?dT(n):"number"==typeof n?dT({[i||"milliseconds"]:n}):null}function dT(n){let i={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:60*(n.hours||n.hour||0)*60*1e3+60*(n.minutes||n.minute||0)*1e3+1e3*(n.seconds||n.second||0)+(n.milliseconds||n.millisecond||n.ms||0)},e=n.weeks||n.week;return e&&(i.days+=7*e,i.specifiedWeeks=!0),i}function nC(n,i){return{years:n.years+i.years,months:n.months+i.months,days:n.days+i.days,milliseconds:n.milliseconds+i.milliseconds}}function yy(n){return Lf(n)/864e5}function Lf(n){return 31536e6*n.years+2592e6*n.months+864e5*n.days+n.milliseconds}function rC(n,i){let e=null;for(let r=0;r<uT.length;r+=1){let a=uT[r];if(i[a]){let o=n[a]/i[a];if(!mb(o)||null!==e&&e!==o)return null;e=o}else if(n[a])return null}return e}function aC(n){let i=n.milliseconds;if(i){if(i%1e3!=0)return{unit:"millisecond",value:i};if(i%6e4!=0)return{unit:"second",value:i/1e3};if(i%36e5!=0)return{unit:"minute",value:i/6e4};if(i)return{unit:"hour",value:i/36e5}}return n.days?n.specifiedWeeks&&n.days%7==0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Vm(n,i,e){if(n===i)return!0;let a,r=n.length;if(r!==i.length)return!1;for(a=0;a<r;a+=1)if(!(e?e(n[a],i[a]):n[a]===i[a]))return!1;return!0}const hT=["sun","mon","tue","wed","thu","fri","sat"];function fT(n,i){let e=sv(n);return e[2]+=7*i,af(e)}function Md(n,i){let e=sv(n);return e[2]+=i,af(e)}function rv(n,i){let e=sv(n);return e[6]+=i,af(e)}function av(n,i){return(i.valueOf()-n.valueOf())/864e5}function gb(n,i){return ov(n)===ov(i)?Math.round(av(n,i)):null}function Ml(n){return af([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function sC(n,i,e,r){let a=af([i,0,1+e4(i,e,r)]),o=Ml(n),d=Math.round(av(a,o));return Math.floor(d/7)+1}function e4(n,i,e){let r=7+i-e;return-(7+af([n,0,r]).getUTCDay()-i)%7+r-1}function pT(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function mT(n){return new Date(n[0],n[1]||0,null==n[2]?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function sv(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function af(n){return 1===n.length&&(n=n.concat([0])),new Date(Date.UTC(...n))}function gT(n){return!isNaN(n.valueOf())}function ov(n){return 1e3*n.getUTCHours()*60*60+1e3*n.getUTCMinutes()*60+1e3*n.getUTCSeconds()+n.getUTCMilliseconds()}function vT(n,i,e=!1){let r=n.toISOString();return r=r.replace(".000",""),e&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==i?r=r.replace("Z",""):0!==i&&(r=r.replace("Z",oC(i,!0)))),r}function ix(n){return n.toISOString().replace(/T.*$/,"")}function n4(n){return _y(n.getUTCHours(),2)+":"+_y(n.getUTCMinutes(),2)+":"+_y(n.getUTCSeconds(),2)}function oC(n,i=!1){let e=n<0?"-":"+",r=Math.abs(n),a=Math.floor(r/60),o=Math.round(r%60);return i?`${e+_y(a,2)}:${_y(o,2)}`:`GMT${e}${a}${o?`:${_y(o,2)}`:""}`}function hs(n,i,e){let r,a;return function(...o){if(r){if(!Vm(r,o)){e&&e(a);let d=n.apply(this,o);(!i||!i(d,a))&&(a=d)}}else a=n.apply(this,o);return r=o,a}}function vb(n,i,e){let r,a;return o=>{if(r){if(!Um(r,o)){e&&e(a);let d=n.call(this,o);(!i||!i(d,a))&&(a=d)}}else a=n.call(this,o);return r=o,a}}const _T={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},_b={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},yb=/\s*([ap])\.?m\.?/i,r4=/,/g,a4=/\s+/g,s4=/\u200e/g,o4=/UTC|GMT/;class l4{constructor(i){let e={},r={},a=0;for(let o in i)o in _T?(r[o]=i[o],a=Math.max(_T[o],a)):(e[o]=i[o],o in _b&&(a=Math.max(_b[o],a)));this.standardDateProps=e,this.extendedSettings=r,this.severity=a,this.buildFormattingFunc=hs(yT)}format(i,e){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,e)(i)}formatRange(i,e,r,a){let{standardDateProps:o,extendedSettings:d}=this,p=function p4(n,i,e){return e.getMarkerYear(n)!==e.getMarkerYear(i)?5:e.getMarkerMonth(n)!==e.getMarkerMonth(i)?4:e.getMarkerDay(n)!==e.getMarkerDay(i)?2:ov(n)!==ov(i)?1:0}(i.marker,e.marker,r.calendarSystem);if(!p)return this.format(i,r);let D=p;D>1&&("numeric"===o.year||"2-digit"===o.year)&&("numeric"===o.month||"2-digit"===o.month)&&("numeric"===o.day||"2-digit"===o.day)&&(D=1);let P=this.format(i,r),B=this.format(e,r);if(P===B)return P;let te=function m4(n,i){let e={};for(let r in n)(!(r in _b)||_b[r]<=i)&&(e[r]=n[r]);return e}(o,D),ae=yT(te,d,r),oe=ae(i),ge=ae(e),ue=function g4(n,i,e,r){let a=0;for(;a<n.length;){let o=n.indexOf(i,a);if(-1===o)break;let d=n.substr(0,o);a=o+i.length;let p=n.substr(a),D=0;for(;D<e.length;){let P=e.indexOf(r,D);if(-1===P)break;let B=e.substr(0,P);D=P+r.length;let te=e.substr(D);if(d===B&&p===te)return{before:d,after:p}}}return null}(P,oe,B,ge),Te=d.separator||a||r.defaultSeparator||"";return ue?ue.before+oe+Te+ge+ue.after:P+Te+B}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function yT(n,i,e){let r=Object.keys(n).length;return 1===r&&"short"===n.timeZoneName?a=>oC(a.timeZoneOffset):0===r&&i.week?a=>function f4(n,i,e,r,a){let o=[];return"long"===a?o.push(e):("short"===a||"narrow"===a)&&o.push(i),("long"===a||"short"===a)&&o.push(" "),o.push(r.simpleNumberFormat.format(n)),"rtl"===r.options.direction&&o.reverse(),o.join("")}(e.computeWeekNumber(a.marker),e.weekText,e.weekTextLong,e.locale,i.week):function c4(n,i,e){n=Object.assign({},n),i=Object.assign({},i),function u4(n,i){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),"long"===n.timeZoneName&&(n.timeZoneName="short"),i.omitZeroMinute&&(n.second||n.millisecond)&&delete i.omitZeroMinute}(n,i),n.timeZone="UTC";let a,r=new Intl.DateTimeFormat(e.locale.codes,n);if(i.omitZeroMinute){let o=Object.assign({},n);delete o.minute,a=new Intl.DateTimeFormat(e.locale.codes,o)}return o=>{let p,{marker:d}=o;return p=a&&!d.getUTCMinutes()?a:r,function d4(n,i,e,r,a){return n=n.replace(s4,""),"short"===e.timeZoneName&&(n=function h4(n,i){let e=!1;return n=n.replace(o4,()=>(e=!0,i)),e||(n+=` ${i}`),n}(n,"UTC"===a.timeZone||null==i.timeZoneOffset?"UTC":oC(i.timeZoneOffset))),r.omitCommas&&(n=n.replace(r4,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),!1===r.meridiem?n=n.replace(yb,"").trim():"narrow"===r.meridiem?n=n.replace(yb,(o,d)=>d.toLocaleLowerCase()):"short"===r.meridiem?n=n.replace(yb,(o,d)=>`${d.toLocaleLowerCase()}m`):"lowercase"===r.meridiem&&(n=n.replace(yb,o=>o.toLocaleLowerCase())),n=(n=n.replace(a4," ")).trim()}(p.format(d),o,n,i,e)}}(n,i,e)}function xT(n,i){let e=i.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:e,year:e[0],month:e[1],day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]}}function xb(n,i,e,r){let a=xT(n,e.calendarSystem);return{date:a,start:a,end:i?xT(i,e.calendarSystem):null,timeZone:e.timeZone,localeCodes:e.locale.codes,defaultSeparator:r||e.defaultSeparator}}class v4{constructor(i){this.cmdStr=i}format(i,e,r){return e.cmdFormatter(this.cmdStr,xb(i,null,e,r))}formatRange(i,e,r,a){return r.cmdFormatter(this.cmdStr,xb(i,e,r,a))}}class _4{constructor(i){this.func=i}format(i,e,r){return this.func(xb(i,null,e,r))}formatRange(i,e,r,a){return this.func(xb(i,e,r,a))}}function vc(n){return"object"==typeof n&&n?new l4(n):"string"==typeof n?new v4(n):"function"==typeof n?new _4(n):null}const bT={navLinkDayClick:wn,navLinkWeekClick:wn,duration:mo,bootstrapFontAwesome:wn,buttonIcons:wn,customButtons:wn,defaultAllDayEventDuration:mo,defaultTimedEventDuration:mo,nextDayThreshold:mo,scrollTime:mo,scrollTimeReset:Boolean,slotMinTime:mo,slotMaxTime:mo,dayPopoverFormat:vc,slotDuration:mo,snapDuration:mo,headerToolbar:wn,footerToolbar:wn,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:vc,dayHeaderClassNames:wn,dayHeaderContent:wn,dayHeaderDidMount:wn,dayHeaderWillUnmount:wn,dayCellClassNames:wn,dayCellContent:wn,dayCellDidMount:wn,dayCellWillUnmount:wn,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:wn,weekNumbers:Boolean,weekNumberClassNames:wn,weekNumberContent:wn,weekNumberDidMount:wn,weekNumberWillUnmount:wn,editable:Boolean,viewClassNames:wn,viewDidMount:wn,viewWillUnmount:wn,nowIndicator:Boolean,nowIndicatorClassNames:wn,nowIndicatorContent:wn,nowIndicatorDidMount:wn,nowIndicatorWillUnmount:wn,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:wn,locale:wn,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:wn,eventOrder:function M3(n){let r,a,i=[],e=[];for("string"==typeof n?e=n.split(/\s*,\s*/):"function"==typeof n?e=[n]:Array.isArray(n)&&(e=n),r=0;r<e.length;r+=1)a=e[r],"string"==typeof a?i.push("-"===a.charAt(0)?{field:a.substring(1),order:-1}:{field:a,order:1}):"function"==typeof a&&i.push({func:a});return i},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:wn,contentHeight:wn,direction:String,weekNumberFormat:vc,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:wn,initialDate:wn,now:wn,eventDataTransform:wn,stickyHeaderDates:wn,stickyFooterScrollbar:wn,viewHeight:wn,defaultAllDay:Boolean,eventSourceFailure:wn,eventSourceSuccess:wn,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:wn,eventConstraint:wn,eventAllow:wn,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:wn,eventContent:wn,eventDidMount:wn,eventWillUnmount:wn,selectConstraint:wn,selectOverlap:wn,selectAllow:wn,droppable:Boolean,unselectCancel:String,slotLabelFormat:wn,slotLaneClassNames:wn,slotLaneContent:wn,slotLaneDidMount:wn,slotLaneWillUnmount:wn,slotLabelClassNames:wn,slotLabelContent:wn,slotLabelDidMount:wn,slotLabelWillUnmount:wn,dayMaxEvents:wn,dayMaxEventRows:wn,dayMinWidth:Number,slotLabelInterval:mo,allDayText:String,allDayClassNames:wn,allDayContent:wn,allDayDidMount:wn,allDayWillUnmount:wn,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:vc,rerenderDelay:Number,moreLinkText:wn,moreLinkHint:wn,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:wn,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:mo,hiddenDays:wn,fixedWeekCount:Boolean,validRange:wn,visibleRange:wn,titleFormat:wn,eventInteractive:Boolean,noEventsText:String,viewHint:wn,navLinkHint:wn,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:wn,moreLinkClassNames:wn,moreLinkContent:wn,moreLinkDidMount:wn,moreLinkWillUnmount:wn,monthStartFormat:vc,handleCustomRendering:wn,customRenderingMetaMap:wn,customRenderingReplaces:Boolean},nx={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},wT={datesSet:wn,eventsSet:wn,eventAdd:wn,eventChange:wn,eventRemove:wn,windowResize:wn,eventClick:wn,eventMouseEnter:wn,eventMouseLeave:wn,select:wn,unselect:wn,loading:wn,_unmount:wn,_beforeprint:wn,_afterprint:wn,_noEventDrop:wn,_noEventResize:wn,_resize:wn,_scrollRequest:wn},CT={buttonText:wn,buttonHints:wn,views:wn,plugins:wn,initialEvents:wn,events:wn,eventSources:wn},d_={headerToolbar:h_,footerToolbar:h_,buttonText:h_,buttonHints:h_,buttonIcons:h_,dateIncrement:h_,plugins:bb,events:bb,eventSources:bb,resources:bb};function h_(n,i){return"object"==typeof n&&"object"==typeof i&&n&&i?Um(n,i):n===i}function bb(n,i){return Array.isArray(n)&&Array.isArray(i)?Vm(n,i):n===i}const y4={type:String,component:wn,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:wn,usesMinMaxTime:Boolean,classNames:wn,content:wn,didMount:wn,willUnmount:wn};function lC(n){return cC(n,d_)}function wb(n,i){let e={},r={};for(let a in i)a in n&&(e[a]=i[a](n[a]));for(let a in n)a in i||(r[a]=n[a]);return{refined:e,extra:r}}function wn(n){return n}const{hasOwnProperty:Cb}=Object.prototype;function cC(n,i){let e={};if(i)for(let r in i)if(i[r]===h_){let a=[];for(let o=n.length-1;o>=0;o-=1){let d=n[o][r];if("object"==typeof d&&d)a.unshift(d);else if(void 0!==d){e[r]=d;break}}a.length&&(e[r]=cC(a))}for(let r=n.length-1;r>=0;r-=1){let a=n[r];for(let o in a)o in e||(e[o]=a[o])}return e}function f_(n,i){let e={};for(let r in n)i(n[r],r)&&(e[r]=n[r]);return e}function $g(n,i){let e={};for(let r in n)e[r]=i(n[r],r);return e}function ET(n){let i={};for(let e of n)i[e]=!0;return i}function uC(n){let i=[];for(let e in n)i.push(n[e]);return i}function Um(n,i){if(n===i)return!0;for(let e in n)if(Cb.call(n,e)&&!(e in i))return!1;for(let e in i)if(Cb.call(i,e)&&n[e]!==i[e])return!1;return!0}const x4=/^on[A-Z]/;function dC(n,i){let e=[];for(let r in n)Cb.call(n,r)&&(r in i||e.push(r));for(let r in i)Cb.call(i,r)&&n[r]!==i[r]&&e.push(r);return e}function hC(n,i,e={}){if(n===i)return!0;for(let r in i)if(!(r in n)||!w4(n[r],i[r],e[r]))return!1;for(let r in n)if(!(r in i))return!1;return!0}function w4(n,i,e){return n===i||!0===e||!!e&&e(n,i)}let kT={};!function E4(n,i){kT[n]=i}("gregory",class T4{getMarkerYear(i){return i.getUTCFullYear()}getMarkerMonth(i){return i.getUTCMonth()}getMarkerDay(i){return i.getUTCDate()}arrayToMarker(i){return af(i)}markerToArray(i){return sv(i)}});const S4=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class A4{constructor(i){let e=this.timeZone=i.timeZone,r="local"!==e&&"UTC"!==e;i.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new i.namedTimeZoneImpl(e)),this.canComputeOffset=!(r&&!this.namedTimeZoneImpl),this.calendarSystem=function k4(n){return new kT[n]}(i.calendarSystem),this.locale=i.locale,this.weekDow=i.locale.week.dow,this.weekDoy=i.locale.week.doy,"ISO"===i.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof i.firstDay&&(this.weekDow=i.firstDay),"function"==typeof i.weekNumberCalculation&&(this.weekNumberFunc=i.weekNumberCalculation),this.weekText=null!=i.weekText?i.weekText:i.locale.options.weekText,this.weekTextLong=(null!=i.weekTextLong?i.weekTextLong:i.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=i.cmdFormatter,this.defaultSeparator=i.defaultSeparator}createMarker(i){let e=this.createMarkerMeta(i);return null===e?null:e.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):af(pT(new Date))}createMarkerMeta(i){if("string"==typeof i)return this.parse(i);let e=null;return"number"==typeof i?e=this.timestampToMarker(i):i instanceof Date?(i=i.valueOf(),isNaN(i)||(e=this.timestampToMarker(i))):Array.isArray(i)&&(e=af(i)),null!==e&&gT(e)?{marker:e,isTimeUnspecified:!1,forcedTzo:null}:null}parse(i){let e=function D4(n){let i=S4.exec(n);if(i){let e=new Date(Date.UTC(Number(i[1]),i[3]?Number(i[3])-1:0,Number(i[5]||1),Number(i[7]||0),Number(i[8]||0),Number(i[10]||0),i[12]?1e3*+`0.${i[12]}`:0));if(gT(e)){let r=null;return i[13]&&(r=("-"===i[15]?-1:1)*(60*Number(i[16]||0)+Number(i[18]||0))),{marker:e,isTimeUnspecified:!i[6],timeZoneOffset:r}}}return null}(i);if(null===e)return null;let{marker:r}=e,a=null;return null!==e.timeZoneOffset&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-60*e.timeZoneOffset*1e3):a=e.timeZoneOffset),{marker:r,isTimeUnspecified:e.isTimeUnspecified,forcedTzo:a}}getYear(i){return this.calendarSystem.getMarkerYear(i)}getMonth(i){return this.calendarSystem.getMarkerMonth(i)}getDay(i){return this.calendarSystem.getMarkerDay(i)}add(i,e){let r=this.calendarSystem.markerToArray(i);return r[0]+=e.years,r[1]+=e.months,r[2]+=e.days,r[6]+=e.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(i,e){let r=this.calendarSystem.markerToArray(i);return r[0]-=e.years,r[1]-=e.months,r[2]-=e.days,r[6]-=e.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(i,e){let r=this.calendarSystem.markerToArray(i);return r[0]+=e,this.calendarSystem.arrayToMarker(r)}addMonths(i,e){let r=this.calendarSystem.markerToArray(i);return r[1]+=e,this.calendarSystem.arrayToMarker(r)}diffWholeYears(i,e){let{calendarSystem:r}=this;return ov(i)===ov(e)&&r.getMarkerDay(i)===r.getMarkerDay(e)&&r.getMarkerMonth(i)===r.getMarkerMonth(e)?r.getMarkerYear(e)-r.getMarkerYear(i):null}diffWholeMonths(i,e){let{calendarSystem:r}=this;return ov(i)===ov(e)&&r.getMarkerDay(i)===r.getMarkerDay(e)?r.getMarkerMonth(e)-r.getMarkerMonth(i)+12*(r.getMarkerYear(e)-r.getMarkerYear(i)):null}greatestWholeUnit(i,e){let r=this.diffWholeYears(i,e);return null!==r?{unit:"year",value:r}:(r=this.diffWholeMonths(i,e),null!==r?{unit:"month",value:r}:(r=function q3(n,i){let e=gb(n,i);return null!==e&&e%7==0?e/7:null}(i,e),null!==r?{unit:"week",value:r}:(r=gb(i,e),null!==r?{unit:"day",value:r}:(r=function j3(n,i){return(i.valueOf()-n.valueOf())/36e5}(i,e),mb(r)?{unit:"hour",value:r}:(r=function $3(n,i){return(i.valueOf()-n.valueOf())/6e4}(i,e),mb(r)?{unit:"minute",value:r}:(r=function W3(n,i){return(i.valueOf()-n.valueOf())/1e3}(i,e),mb(r)?{unit:"second",value:r}:{unit:"millisecond",value:e.valueOf()-i.valueOf()}))))))}countDurationsBetween(i,e,r){let a;return r.years&&(a=this.diffWholeYears(i,e),null!==a)?a/function H3(n){return yy(n)/365}(r):r.months&&(a=this.diffWholeMonths(i,e),null!==a)?a/function V3(n){return yy(n)/30}(r):r.days&&(a=gb(i,e),null!==a)?a/yy(r):(e.valueOf()-i.valueOf())/Lf(r)}startOf(i,e){return"year"===e?this.startOfYear(i):"month"===e?this.startOfMonth(i):"week"===e?this.startOfWeek(i):"day"===e?Ml(i):"hour"===e?function Z3(n){return af([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}(i):"minute"===e?function K3(n){return af([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}(i):"second"===e?function J3(n){return af([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}(i):null}startOfYear(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i)])}startOfMonth(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i)])}startOfWeek(i){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(i),this.calendarSystem.getMarkerMonth(i),i.getUTCDate()-(i.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(i){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(i)):function Q3(n,i,e){let r=n.getUTCFullYear(),a=sC(n,r,i,e);if(a<1)return sC(n,r-1,i,e);let o=sC(n,r+1,i,e);return o>=1?Math.min(a,o):a}(i,this.weekDow,this.weekDoy)}format(i,e,r={}){return e.format({marker:i,timeZoneOffset:null!=r.forcedTzo?r.forcedTzo:this.offsetForMarker(i)},this)}formatRange(i,e,r,a={}){return a.isEndExclusive&&(e=rv(e,-1)),r.formatRange({marker:i,timeZoneOffset:null!=a.forcedStartTzo?a.forcedStartTzo:this.offsetForMarker(i)},{marker:e,timeZoneOffset:null!=a.forcedEndTzo?a.forcedEndTzo:this.offsetForMarker(e)},this,a.defaultSeparator)}formatIso(i,e={}){let r=null;return e.omitTimeZoneOffset||(r=null!=e.forcedTzo?e.forcedTzo:this.offsetForMarker(i)),vT(i,r,e.omitTime)}timestampToMarker(i){return"local"===this.timeZone?af(pT(new Date(i))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?af(this.namedTimeZoneImpl.timestampToArray(i)):new Date(i)}offsetForMarker(i){return"local"===this.timeZone?-mT(sv(i)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(sv(i)):null}toDate(i,e){return"local"===this.timeZone?mT(sv(i)):"UTC"===this.timeZone?new Date(i.valueOf()):this.namedTimeZoneImpl?new Date(i.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(sv(i))*60):new Date(i.valueOf()-(e||0))}}class rx{constructor(i){this.iconOverrideOption&&this.setIconOverride(i[this.iconOverrideOption])}setIconOverride(i){let e,r;if("object"==typeof i&&i){for(r in e=Object.assign({},this.iconClasses),i)e[r]=this.applyIconOverridePrefix(i[r]);this.iconClasses=e}else!1===i&&(this.iconClasses={})}applyIconOverridePrefix(i){let e=this.iconOverridePrefix;return e&&0!==i.indexOf(e)&&(i=e+i),i}getClass(i){return this.classes[i]||""}getIconClass(i,e){let r;return r=e&&this.rtlIconClasses&&this.rtlIconClasses[i]||this.iconClasses[i],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(i){let e;return this.iconOverrideCustomButtonOption&&(e=i[this.iconOverrideCustomButtonOption],e)?`${this.baseIconClass} ${this.applyIconOverridePrefix(e)}`:""}}function Eb(n){n();let i=Na.debounceRendering,e=[];for(Na.debounceRendering=function r(a){e.push(a)},tv(si(I4,{}),document.createElement("div"));e.length;)e.shift()();Na.debounceRendering=i}rx.prototype.classes={},rx.prototype.iconClasses={},rx.prototype.baseIconClass="",rx.prototype.iconOverridePrefix="";class I4 extends rf{render(){return si("div",{})}componentDidMount(){this.setState({})}}function TT(n){let i=function Ck(n,i){var e={__c:i="__cC"+lk++,__:n,Consumer:function(r,a){return r.children(a)},Provider:function(r){var a,o;return this.getChildContext||(a=[],(o={})[i]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(d){this.props.value!==d.value&&a.some(function(p){p.__e=!0,Gw(p)})},this.sub=function(d){a.push(d);var p=d.componentWillUnmount;d.componentWillUnmount=function(){a.splice(a.indexOf(d),1),p&&p.call(d)}}),r.children}};return e.Provider.__=e.Consumer.contextType=e}(n),e=i.Provider;return i.Provider=function(){let r=!this.getChildContext,a=e.apply(this,arguments);if(r){let o=[];this.shouldComponentUpdate=d=>{this.props.value!==d.value&&o.forEach(p=>{p.context=d.value,p.forceUpdate()})},this.sub=d=>{o.push(d);let p=d.componentWillUnmount;d.componentWillUnmount=()=>{o.splice(o.indexOf(d),1),p&&p.call(d)}}}return a},i}class M4{constructor(i,e,r,a){this.execFunc=i,this.emitter=e,this.scrollTime=r,this.scrollTimeReset=a,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},e.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(i){i&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Wg=TT({});function R4(n,i,e,r,a,o,d,p,D,P,B,te,ae){return{dateEnv:a,options:e,pluginHooks:d,emitter:P,dispatch:p,getCurrentData:D,calendarApi:B,viewSpec:n,viewApi:i,dateProfileGenerator:r,theme:o,isRtl:"rtl"===e.direction,addResizeHandler(oe){P.on("_resize",oe)},removeResizeHandler(oe){P.off("_resize",oe)},createScrollResponder:oe=>new M4(oe,P,mo(e.scrollTime),e.scrollTimeReset),registerInteractiveComponent:te,unregisterInteractiveComponent:ae}}let kb=(()=>{class n extends rf{shouldComponentUpdate(e,r){return this.debug&&console.log(dC(e,this.props),dC(r,this.state)),!hC(this.props,e,this.propEquality)||!hC(this.state,r,this.stateEquality)}safeSetState(e){hC(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}return n.addPropsEquality=O4,n.addStateEquality=L4,n.contextType=Wg,n})();kb.prototype.propEquality={},kb.prototype.stateEquality={};let Ko=(()=>{class n extends kb{}return n.contextType=Wg,n})();function O4(n){let i=Object.create(this.prototype.propEquality);Object.assign(i,n),this.prototype.propEquality=i}function L4(n){let i=Object.create(this.prototype.stateEquality);Object.assign(i,n),this.prototype.stateEquality=i}function Xg(n,i){"function"==typeof n?n(i):n&&(n.current=i)}class fC extends Ko{constructor(){super(...arguments),this.id=u_(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=i=>{const{options:e}=this.context,{generatorName:r}=this.props;(!e.customRenderingReplaces||!pC(r,e))&&this.updateElRef(i)},this.updateElRef=i=>{this.props.elRef&&Xg(this.props.elRef,i)}}render(){const{props:i,context:e}=this,{options:r}=e,{customGenerator:a,defaultGenerator:o,renderProps:d}=i,p=ST(i,[],this.handleEl);let P,te,D=!1,B=[];if(null!=a){const ae="function"==typeof a?a(d,si):a;if(!0===ae)D=!0;else{const oe=ae&&"object"==typeof ae;oe&&"html"in ae?p.dangerouslySetInnerHTML={__html:ae.html}:oe&&"domNodes"in ae?B=Array.prototype.slice.call(ae.domNodes):(oe?ak(ae):"function"!=typeof ae)?P=ae:te=ae}}else D=!pC(i.generatorName,r);return D&&o&&(P=o(d)),this.queuedDomNodes=B,this.currentGeneratorMeta=te,si(i.elTag,p,P)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(i){var e;const{props:r,context:a}=this,{handleCustomRendering:o,customRenderingMetaMap:d}=a.options;if(o){const p=null!==(e=this.currentGeneratorMeta)&&void 0!==e?e:d?.[r.generatorName];p&&o(Object.assign(Object.assign({id:this.id,isActive:i,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:p},r),{elClasses:(r.elClasses||[]).filter(P4)}))}}applyQueueudDomNodes(){const{queuedDomNodes:i,currentDomNodes:e}=this,r=this.base;if(!Vm(i,e)){e.forEach(eC);for(let a of i)r.appendChild(a);this.currentDomNodes=i}}}function pC(n,i){var e;return!!(i.handleCustomRendering&&n&&null!==(e=i.customRenderingMetaMap)&&void 0!==e&&e[n])}function ST(n,i,e){const r=Object.assign(Object.assign({},n.elAttrs),{ref:e});return(n.elClasses||i)&&(r.className=(n.elClasses||[]).concat(i||[]).concat(r.className||[]).filter(Boolean).join(" ")),n.elStyle&&(r.style=n.elStyle),r}function P4(n){return!!n}fC.addPropsEquality({elClasses:Vm,elStyle:Um,elAttrs:function b4(n,i){const e=dC(n,i);for(let r of e)if(!x4.test(r))return!1;return!0},renderProps:Um});const DT=TT(0);let Gh=(()=>{class n extends rf{constructor(){super(...arguments),this.InnerContent=F4.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Xg(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,r=function B4(n,i){const e="function"==typeof n?n(i):n||[];return"string"==typeof e?[e]:e}(e.classNameGenerator,e.renderProps);if(e.children){const a=ST(e,r,this.handleEl),o=e.children(this.InnerContent,e.renderProps,a);return e.elTag?si(e.elTag,a,o):o}return si(fC,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var e,r;this.el?null===(r=(e=this.props).didMount)||void 0===r||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,r;null===(r=(e=this.props).willUnmount)||void 0===r||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}return n.contextType=DT,n})();function F4(n,i){const e=n.props;return si(fC,Object.assign({renderProps:e.renderProps,generatorName:e.generatorName,customGenerator:e.customGenerator,defaultGenerator:e.defaultGenerator,renderId:n.context},i))}class ax extends Ko{render(){let{props:i,context:e}=this,{options:r}=e,a={view:e.viewApi};return si(Gh,Object.assign({},i,{elTag:i.elTag||"div",elClasses:[...AT(i.viewSpec),...i.elClasses||[]],renderProps:a,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount}),()=>i.children)}}function AT(n){return[`fc-${n.type}-view`,"fc-view"]}function IT(n,i){let a,o,e=[],{start:r}=i;for(n.sort(z4),a=0;a<n.length;a+=1)o=n[a],o.start>r&&e.push({start:r,end:o.start}),o.end>r&&(r=o.end);return r<i.end&&e.push({start:r,end:i.end}),e}function z4(n,i){return n.start.valueOf()-i.start.valueOf()}function lv(n,i){let{start:e,end:r}=n,a=null;return null!==i.start&&(e=null===e?i.start:new Date(Math.max(e.valueOf(),i.start.valueOf()))),null!=i.end&&(r=null===r?i.end:new Date(Math.min(r.valueOf(),i.end.valueOf()))),(null===e||null===r||e<r)&&(a={start:e,end:r}),a}function mC(n,i){return(null===n.end||null===i.start||n.end>i.start)&&(null===n.start||null===i.end||n.start<i.end)}function Tb(n,i){return(null===n.start||null!==i.start&&i.start>=n.start)&&(null===n.end||null!==i.end&&i.end<=n.end)}function qg(n,i){return(null===n.start||i>=n.start)&&(null===n.end||i<n.end)}function MT(n){let i=Math.floor(av(n.start,n.end))||1,e=Ml(n.start);return{start:e,end:Md(e,i)}}function gC(n,i=mo(0)){let e=null,r=null;if(n.end){r=Ml(n.end);let a=n.end.valueOf()-r.valueOf();a&&a>=Lf(i)&&(r=Md(r,1))}return n.start&&(e=Ml(n.start),r&&r<=e&&(r=Md(e,1))),{start:e,end:r}}function xy(n,i,e,r){return"year"===r?mo(e.diffWholeYears(n,i),"year"):"month"===r?mo(e.diffWholeMonths(n,i),"month"):function X3(n,i){let e=Ml(n),r=Ml(i);return{years:0,months:0,days:Math.round(av(e,r)),milliseconds:i.valueOf()-r.valueOf()-(n.valueOf()-e.valueOf())}}(n,i)}function sx(n,i){return"function"==typeof n&&(n=n()),null==n?i.createNowMarker():i.createMarker(n)}class RT{constructor(i){this.props=i,this.nowDate=sx(i.nowInput,i.dateEnv),this.initHiddenDays()}buildPrev(i,e,r){let{dateEnv:a}=this.props,o=a.subtract(a.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(o,-1,r)}buildNext(i,e,r){let{dateEnv:a}=this.props,o=a.add(a.startOf(e,i.currentRangeUnit),i.dateIncrement);return this.build(o,1,r)}build(i,e,r=!0){let o,d,p,D,P,B,{props:a}=this;return o=this.buildValidRange(),o=this.trimHiddenDays(o),r&&(i=function G4(n,i){return null!=i.start&&n<i.start?i.start:null!=i.end&&n>=i.end?new Date(i.end.valueOf()-1):n}(i,o)),d=this.buildCurrentRangeInfo(i,e),p=/^(year|month|week|day)$/.test(d.unit),D=this.buildRenderRange(this.trimHiddenDays(d.range),d.unit,p),D=this.trimHiddenDays(D),P=D,a.showNonCurrentDates||(P=lv(P,d.range)),P=this.adjustActiveRange(P),P=lv(P,o),B=mC(d.range,o),qg(D,i)||(i=D.start),{currentDate:i,validRange:o,currentRange:d.range,currentRangeUnit:d.unit,isRangeAllDay:p,activeRange:P,renderRange:D,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:B,dateIncrement:this.buildDateIncrement(d.duration)}}buildValidRange(){let i=this.props.validRangeInput,e="function"==typeof i?i.call(this.props.calendarApi,this.nowDate):i;return this.refineRange(e)||{start:null,end:null}}buildCurrentRangeInfo(i,e){let p,{props:r}=this,a=null,o=null,d=null;return r.duration?(a=r.duration,o=r.durationUnit,d=this.buildRangeFromDuration(i,e,a,o)):(p=this.props.dayCount)?(o="day",d=this.buildRangeFromDayCount(i,e,p)):(d=this.buildCustomVisibleRange(i))?o=r.dateEnv.greatestWholeUnit(d.start,d.end).unit:(a=this.getFallbackDuration(),o=aC(a).unit,d=this.buildRangeFromDuration(i,e,a,o)),{duration:a,unit:o,range:d}}getFallbackDuration(){return mo({day:1})}adjustActiveRange(i){let{dateEnv:e,usesMinMaxTime:r,slotMinTime:a,slotMaxTime:o}=this.props,{start:d,end:p}=i;return r&&(yy(a)<0&&(d=Ml(d),d=e.add(d,a)),yy(o)>1&&(p=Ml(p),p=Md(p,-1),p=e.add(p,o))),{start:d,end:p}}buildRangeFromDuration(i,e,r,a){let p,D,P,{dateEnv:o,dateAlignment:d}=this.props;if(!d){let{dateIncrement:te}=this.props;d=te&&Lf(te)<Lf(r)?aC(te).unit:a}function B(){p=o.startOf(i,d),D=o.add(p,r),P={start:p,end:D}}return yy(r)<=1&&this.isHiddenDay(p)&&(p=this.skipHiddenDays(p,e),p=Ml(p)),B(),this.trimHiddenDays(P)||(i=this.skipHiddenDays(i,e),B()),P}buildRangeFromDayCount(i,e,r){let D,{dateEnv:a,dateAlignment:o}=this.props,d=0,p=i;o&&(p=a.startOf(p,o)),p=Ml(p),p=this.skipHiddenDays(p,e),D=p;do{D=Md(D,1),this.isHiddenDay(D)||(d+=1)}while(d<r);return{start:p,end:D}}buildCustomVisibleRange(i){let{props:e}=this,r=e.visibleRangeInput,a="function"==typeof r?r.call(e.calendarApi,e.dateEnv.toDate(i)):r,o=this.refineRange(a);return!o||null!=o.start&&null!=o.end?o:null}buildRenderRange(i,e,r){return i}buildDateIncrement(i){let r,{dateIncrement:e}=this.props;return e||((r=this.props.dateAlignment)?mo(1,r):i||mo({days:1}))}refineRange(i){if(i){let e=function N4(n,i){let e=null,r=null;return n.start&&(e=i.createMarker(n.start)),n.end&&(r=i.createMarker(n.end)),!e&&!r||e&&r&&r<e?null:{start:e,end:r}}(i,this.props.dateEnv);return e&&(e=gC(e)),e}return null}initHiddenDays(){let a,i=this.props.hiddenDays||[],e=[],r=0;for(!1===this.props.weekends&&i.push(0,6),a=0;a<7;a+=1)(e[a]=-1!==i.indexOf(a))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=e}trimHiddenDays(i){let{start:e,end:r}=i;return e&&(e=this.skipHiddenDays(e)),r&&(r=this.skipHiddenDays(r,-1,!0)),null==e||null==r||e<r?{start:e,end:r}:null}isHiddenDay(i){return i instanceof Date&&(i=i.getUTCDay()),this.isHiddenDayHash[i]}skipHiddenDays(i,e=1,r=!1){for(;this.isHiddenDayHash[(i.getUTCDay()+(r?e:0)+7)%7];)i=Md(i,e);return i}}function vC(n,i,e,r){return{instanceId:u_(),defId:n,range:i,forcedStartTzo:e??null,forcedEndTzo:r??null}}function p_(n,i,e){let{dateEnv:r,pluginHooks:a,options:o}=e,{defs:d,instances:p}=n;p=f_(p,D=>!d[D.defId].recurringDef);for(let D in d){let P=d[D];if(P.recurringDef){let{duration:B}=P.recurringDef;B||(B=P.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let te=$4(P,B,i,r,a.recurringTypes);for(let ae of te){let oe=vC(D,{start:ae,end:r.add(ae,B)});p[oe.instanceId]=oe}}}return{defs:d,instances:p}}function $4(n,i,e,r,a){let d=a[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(e.start,i),end:e.end},r);return n.allDay&&(d=d.map(Ml)),d}const Sb={id:String,groupId:String,title:String,url:String,interactive:Boolean},OT={start:wn,end:wn,date:wn,allDay:Boolean},W4=Object.assign(Object.assign(Object.assign({},Sb),OT),{extendedProps:wn});function LT(n,i,e,r,a=_C(e),o,d){let{refined:p,extra:D}=PT(n,e,a),P=function q4(n,i){let e=null;return n&&(e=n.defaultAllDay),null==e&&(e=i.options.defaultAllDay),e}(i,e),B=function j4(n,i,e,r){for(let a=0;a<r.length;a+=1){let o=r[a].parse(n,e);if(o){let{allDay:d}=n;return null==d&&(d=i,null==d&&(d=o.allDayGuess,null==d&&(d=!1))),{allDay:d,duration:o.duration,typeData:o.typeData,typeId:a}}}return null}(p,P,e.dateEnv,e.pluginHooks.recurringTypes);if(B){let ae=yC(p,D,i?i.sourceId:"",B.allDay,!!B.duration,e,o);return ae.recurringDef={typeId:B.typeId,typeData:B.typeData,duration:B.duration},{def:ae,instance:null}}let te=function X4(n,i,e,r){let o,D,{allDay:a}=n,d=null,p=!1,P=null;if(o=e.dateEnv.createMarkerMeta(null!=n.start?n.start:n.date),o)d=o.marker;else if(!r)return null;return null!=n.end&&(D=e.dateEnv.createMarkerMeta(n.end)),null==a&&(a=null!=i?i:(!o||o.isTimeUnspecified)&&(!D||D.isTimeUnspecified)),a&&d&&(d=Ml(d)),D&&(P=D.marker,a&&(P=Ml(P)),d&&P<=d&&(P=null)),P?p=!0:r||(p=e.options.forceEventDuration||!1,P=e.dateEnv.add(d,a?e.options.defaultAllDayEventDuration:e.options.defaultTimedEventDuration)),{allDay:a,hasEnd:p,range:{start:d,end:P},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:D?D.forcedTzo:null}}(p,P,e,r);if(te){let ae=yC(p,D,i?i.sourceId:"",te.allDay,te.hasEnd,e,o),oe=vC(ae.defId,te.range,te.forcedStartTzo,te.forcedEndTzo);return d&&ae.publicId&&d[ae.publicId]&&(oe.instanceId=d[ae.publicId]),{def:ae,instance:oe}}return null}function PT(n,i,e=_C(i)){return wb(n,e)}function _C(n){return Object.assign(Object.assign(Object.assign({},Ab),W4),n.pluginHooks.eventRefiners)}function yC(n,i,e,r,a,o,d){let p={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(d&&n.id?d[n.id]:"")||u_(),sourceId:e,allDay:r,hasEnd:a,interactive:n.interactive,ui:Ib(n,o),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),i)};for(let D of o.pluginHooks.eventDefMemberAdders)Object.assign(p,D(n));return Object.freeze(p.ui.classNames),Object.freeze(p.extendedProps),p}function ox(n,i,e,r,a,o){let d={defs:{},instances:{}},p=_C(e);for(let D of n){let P=LT(D,i,e,r,p,a,o);P&&xC(P,d)}return d}function xC(n,i={defs:{},instances:{}}){return i.defs[n.def.defId]=n.def,n.instance&&(i.instances[n.instance.instanceId]=n.instance),i}function bC(n,i){let e=n.instances[i];if(e){let r=n.defs[e.defId],a=Db(n,o=>function Z4(n,i){return!(!n.groupId||n.groupId!==i.groupId)}(r,o));return a.defs[r.defId]=r,a.instances[e.instanceId]=e,a}return{defs:{},instances:{}}}function wC(n,i){return{defs:Object.assign(Object.assign({},n.defs),i.defs),instances:Object.assign(Object.assign({},n.instances),i.instances)}}function Db(n,i){let e=f_(n.defs,i),r=f_(n.instances,a=>e[a.defId]);return{defs:e,instances:r}}function FT(n){return Array.isArray(n)?n:"string"==typeof n?n.split(/\s+/):[]}const Ab={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:wn,overlap:wn,allow:wn,className:FT,classNames:FT,color:String,backgroundColor:String,borderColor:String,textColor:String},Q4={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Ib(n,i){let e=function J4(n,i){return Array.isArray(n)?ox(n,null,i,!0):"object"==typeof n&&n?ox([n],null,i,!0):null!=n?String(n):null}(n.constraint,i);return{display:n.display||null,startEditable:null!=n.startEditable?n.startEditable:n.editable,durationEditable:null!=n.durationEditable?n.durationEditable:n.editable,constraints:null!=e?[e]:[],overlap:null!=n.overlap?n.overlap:null,allows:null!=n.allow?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function BT(n){return n.reduce(eF,Q4)}function eF(n,i){return{display:null!=i.display?i.display:n.display,startEditable:null!=i.startEditable?i.startEditable:n.startEditable,durationEditable:null!=i.durationEditable?i.durationEditable:n.durationEditable,constraints:n.constraints.concat(i.constraints),overlap:"boolean"==typeof i.overlap?i.overlap:n.overlap,allows:n.allows.concat(i.allows),backgroundColor:i.backgroundColor||n.backgroundColor,borderColor:i.borderColor||n.borderColor,textColor:i.textColor||n.textColor,classNames:n.classNames.concat(i.classNames)}}const tF={id:String,defaultAllDay:Boolean,url:String,format:String,events:wn,eventDataTransform:wn,success:wn,failure:wn};function NT(n,i,e=zT(i)){let r;if("string"==typeof n?r={url:n}:"function"==typeof n||Array.isArray(n)?r={events:n}:"object"==typeof n&&n&&(r=n),r){let{refined:a,extra:o}=wb(r,e),d=function iF(n,i){let e=i.pluginHooks.eventSourceDefs;for(let r=e.length-1;r>=0;r-=1){let o=e[r].parseMeta(n);if(o)return{sourceDefId:r,meta:o}}return null}(a,i);if(d)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:u_(),sourceDefId:d.sourceDefId,meta:d.meta,ui:Ib(a,i),extendedProps:o}}return null}function zT(n){return Object.assign(Object.assign(Object.assign({},Ab),tF),n.pluginHooks.eventSourceRefiners)}function YT(n,i,e){let r=e.options.eventDataTransform,a=i?i.eventDataTransform:null;return a&&(n=GT(n,a)),r&&(n=GT(n,r)),n}function GT(n,i){let e;if(i){e=[];for(let r of n){let a=i(r);a?e.push(a):null==a&&e.push(r)}}else e=n;return e}function HT(n,i,e){let{defs:r}=n,a=$g(n.instances,o=>r[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:e.createMarker(i.toDate(o.range.start,o.forcedStartTzo)),end:e.createMarker(i.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:e.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:e.canComputeOffset?null:o.forcedEndTzo}));return{defs:r,instances:a}}function VT(n,i){return Db(n,e=>e.sourceId!==i)}class Mb{constructor(){this.handlers={},this.thisContext=null}setThisContext(i){this.thisContext=i}setOptions(i){this.options=i}on(i,e){!function cF(n,i,e){(n[i]||(n[i]=[])).push(e)}(this.handlers,i,e)}off(i,e){!function uF(n,i,e){e?n[i]&&(n[i]=n[i].filter(r=>r!==e)):delete n[i]}(this.handlers,i,e)}trigger(i,...e){let o=[].concat(this.options&&this.options[i]||[],this.handlers[i]||[]);for(let d of o)d.apply(this.thisContext,e)}hasHandlers(i){return!!(this.handlers[i]&&this.handlers[i].length||this.options&&this.options[i])}}const dF={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function UT(n,i,e){e.emitter.trigger("select",Object.assign(Object.assign({},CC(n,e)),{jsEvent:i?i.origEvent:null,view:e.viewApi||e.calendarApi.view}))}function CC(n,i){let e={};for(let r of i.pluginHooks.dateSpanTransforms)Object.assign(e,r(n,i));return Object.assign(e,function DF(n,i){return Object.assign(Object.assign({},KT(n.range,i,n.allDay)),{allDay:n.allDay})}(n,i.dateEnv)),e}function jT(n,i,e){let{dateEnv:r,options:a}=e,o=i;return n?(o=Ml(o),o=r.add(o,a.defaultAllDayEventDuration)):o=r.add(o,a.defaultTimedEventDuration),o}function EC(n,i,e,r){let a=Rb(n.defs,i),o={defs:{},instances:{}};for(let d in n.defs)o.defs[d]=mF(n.defs[d],a[d],e,r);for(let d in n.instances){let p=n.instances[d];o.instances[d]=gF(p,o.defs[p.defId],a[p.defId],e,r)}return o}function mF(n,i,e,r){let a=e.standardProps||{};null==a.hasEnd&&i.durationEditable&&(e.startDelta||e.endDelta)&&(a.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},n),a),{ui:Object.assign(Object.assign({},n.ui),a.ui)});e.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),e.extendedProps));for(let d of r.pluginHooks.eventDefMutationAppliers)d(o,e,r);return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function gF(n,i,e,r,a){let{dateEnv:o}=a,d=r.standardProps&&!0===r.standardProps.allDay,p=r.standardProps&&!1===r.standardProps.hasEnd,D=Object.assign({},n);return d&&(D.range=MT(D.range)),r.datesDelta&&e.startEditable&&(D.range={start:o.add(D.range.start,r.datesDelta),end:o.add(D.range.end,r.datesDelta)}),r.startDelta&&e.durationEditable&&(D.range={start:o.add(D.range.start,r.startDelta),end:D.range.end}),r.endDelta&&e.durationEditable&&(D.range={start:D.range.start,end:o.add(D.range.end,r.endDelta)}),p&&(D.range={start:D.range.start,end:jT(i.allDay,D.range.start,a)}),i.allDay&&(D.range={start:Ml(D.range.start),end:Ml(D.range.end)}),D.range.end<D.range.start&&(D.range.end=jT(i.allDay,D.range.start,a)),D}class by{constructor(i,e){this.context=i,this.internalEventSource=e}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Rc{constructor(i,e,r){this._context=i,this._def=e,this._instance=r||null}setProp(i,e){if(i in OT)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===i)e=Sb[i](e),this.mutate({standardProps:{publicId:e}});else if(i in Sb)e=Sb[i](e),this.mutate({standardProps:{[i]:e}});else if(i in Ab){let r=Ab[i](e);r="color"===i?{backgroundColor:e,borderColor:e}:"editable"===i?{startEditable:e,durationEditable:e}:{[i]:e},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${i}'. Use setExtendedProp instead.`)}setExtendedProp(i,e){this.mutate({extendedProps:{[i]:e}})}setStart(i,e={}){let{dateEnv:r}=this._context,a=r.createMarker(i);if(a&&this._instance){let d=xy(this._instance.range.start,a,r,e.granularity);this.mutate(e.maintainDuration?{datesDelta:d}:{startDelta:d})}}setEnd(i,e={}){let a,{dateEnv:r}=this._context;if((null==i||(a=r.createMarker(i),a))&&this._instance)if(a){let o=xy(this._instance.range.end,a,r,e.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(i,e,r={}){let p,{dateEnv:a}=this._context,o={allDay:r.allDay},d=a.createMarker(i);if(d&&(null==e||(p=a.createMarker(e),p))&&this._instance){let D=this._instance.range;!0===r.allDay&&(D=MT(D));let P=xy(D.start,d,a,r.granularity);if(p){let B=xy(D.end,p,a,r.granularity);!function z3(n,i){return n.years===i.years&&n.months===i.months&&n.days===i.days&&n.milliseconds===i.milliseconds}(P,B)?this.mutate({startDelta:P,endDelta:B,standardProps:o}):this.mutate({datesDelta:P,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:P,standardProps:o})}}moveStart(i){let e=mo(i);e&&this.mutate({startDelta:e})}moveEnd(i){let e=mo(i);e&&this.mutate({endDelta:e})}moveDates(i){let e=mo(i);e&&this.mutate({datesDelta:e})}setAllDay(i,e={}){let r={allDay:i},{maintainDuration:a}=e;null==a&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==i&&(r.hasEnd=a),this.mutate({standardProps:r})}formatRange(i){let{dateEnv:e}=this._context,r=this._instance,a=vc(i);return this._def.hasEnd?e.formatRange(r.range.start,r.range.end,a,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):e.format(r.range.start,a,{forcedTzo:r.forcedStartTzo})}mutate(i){let e=this._instance;if(e){let r=this._def,a=this._context,{eventStore:o}=a.getCurrentData(),d=bC(o,e.instanceId);d=EC(d,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},i,a);let D=new Rc(a,r,e);this._def=d.defs[r.defId],this._instance=d.instances[e.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:d}),a.emitter.trigger("eventChange",{oldEvent:D,event:this,relatedEvents:m_(d,a,e),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let i=this._context,e=$T(this);i.dispatch({type:"REMOVE_EVENTS",eventStore:e}),i.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){i.dispatch({type:"MERGE_EVENTS",eventStore:e})}})}get source(){let{sourceId:i}=this._def;return i?new by(this._context,this._context.getCurrentData().eventSources[i]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let i=this._instance;return i?this._context.dateEnv.formatIso(i.range.start,{omitTime:this._def.allDay,forcedTzo:i.forcedStartTzo}):""}get endStr(){let i=this._instance;return i&&this._def.hasEnd?this._context.dateEnv.formatIso(i.range.end,{omitTime:this._def.allDay,forcedTzo:i.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(i={}){let e=this._def,{ui:r}=e,{startStr:a,endStr:o}=this,d={allDay:e.allDay};return e.title&&(d.title=e.title),a&&(d.start=a),o&&(d.end=o),e.publicId&&(d.id=e.publicId),e.groupId&&(d.groupId=e.groupId),e.url&&(d.url=e.url),r.display&&"auto"!==r.display&&(d.display=r.display),i.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?d.color=r.backgroundColor:(r.backgroundColor&&(d.backgroundColor=r.backgroundColor),r.borderColor&&(d.borderColor=r.borderColor)),r.textColor&&(d.textColor=r.textColor),r.classNames.length&&(d.classNames=r.classNames),Object.keys(e.extendedProps).length&&(i.collapseExtendedProps?Object.assign(d,e.extendedProps):d.extendedProps=e.extendedProps),d}toJSON(){return this.toPlainObject()}}function $T(n){let i=n._def,e=n._instance;return{defs:{[i.defId]:i},instances:e?{[e.instanceId]:e}:{}}}function m_(n,i,e){let{defs:r,instances:a}=n,o=[],d=e?e.instanceId:"";for(let p in a){let D=a[p];D.instanceId!==d&&o.push(new Rc(i,r[D.defId],D))}return o}function kC(n,i,e,r){let a={},o={},d={},p=[],D=[],P=Rb(n.defs,i);for(let B in n.defs){let te=n.defs[B];"inverse-background"===P[te.defId].display&&(te.groupId?(a[te.groupId]=[],d[te.groupId]||(d[te.groupId]=te)):o[B]=[])}for(let B in n.instances){let te=n.instances[B],ae=n.defs[te.defId],oe=P[ae.defId],ge=te.range,ue=!ae.allDay&&r?gC(ge,r):ge,Te=lv(ue,e);Te&&("inverse-background"===oe.display?ae.groupId?a[ae.groupId].push(Te):o[te.defId].push(Te):"none"!==oe.display&&("background"===oe.display?p:D).push({def:ae,ui:oe,instance:te,range:Te,isStart:ue.start&&ue.start.valueOf()===Te.start.valueOf(),isEnd:ue.end&&ue.end.valueOf()===Te.end.valueOf()}))}for(let B in a){let ae=IT(a[B],e);for(let oe of ae){let ge=d[B];p.push({def:ge,ui:P[ge.defId],instance:null,range:oe,isStart:!1,isEnd:!1})}}for(let B in o){let ae=IT(o[B],e);for(let oe of ae)p.push({def:n.defs[B],ui:P[B],instance:null,range:oe,isStart:!1,isEnd:!1})}return{bg:p,fg:D}}function WT(n,i){n.fcSeg=i}function wy(n){return n.fcSeg||n.parentNode.fcSeg||null}function Rb(n,i){return $g(n,e=>XT(e,i))}function XT(n,i){let e=[];return i[""]&&e.push(i[""]),i[n.defId]&&e.push(i[n.defId]),e.push(n.ui),BT(e)}function TC(n,i){let e=n.map(_F);return e.sort((r,a)=>function R3(n,i,e){let r,a;for(r=0;r<e.length;r+=1)if(a=O3(n,i,e[r]),a)return a;return 0}(r,a,i)),e.map(r=>r._seg)}function _F(n){let{eventRange:i}=n,e=i.def,r=i.instance?i.instance.range:i.range,a=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},e.extendedProps),e),{id:e.publicId,start:a,end:o,duration:o-a,allDay:Number(e.allDay),_seg:n})}function yF(n,i){let{pluginHooks:e}=i,r=e.isDraggableTransformers,{def:a,ui:o}=n.eventRange,d=o.startEditable;for(let p of r)d=p(d,a,o,i);return d}function xF(n,i){return n.isStart&&n.eventRange.ui.durationEditable&&i.options.eventResizableFromStart}function lx(n,i,e,r,a,o,d){let{dateEnv:p,options:D}=e,{displayEventTime:P,displayEventEnd:B}=D,te=n.eventRange.def,ae=n.eventRange.instance;null==P&&(P=!1!==r),null==B&&(B=!1!==a);let oe=ae.range.start,ge=ae.range.end,ue=o||n.start||n.eventRange.range.start,Te=d||n.end||n.eventRange.range.end,qe=Ml(oe).valueOf()===Ml(ue).valueOf(),ht=Ml(rv(ge,-1)).valueOf()===Ml(rv(Te,-1)).valueOf();return P&&!te.allDay&&(qe||ht)?(ue=qe?oe:ue,Te=ht?ge:Te,B&&te.hasEnd?p.formatRange(ue,Te,i,{forcedStartTzo:o?null:ae.forcedStartTzo,forcedEndTzo:d?null:ae.forcedEndTzo}):p.format(ue,i,{forcedTzo:o?null:ae.forcedStartTzo})):""}function Zg(n,i,e){let r=n.eventRange.range;return{isPast:r.end<=(e||i.start),isFuture:r.start>=(e||i.end),isToday:i&&qg(i,r.start)}}function wF(n){let i=["fc-event"];return n.isMirror&&i.push("fc-event-mirror"),n.isDraggable&&i.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&i.push("fc-event-resizable"),n.isDragging&&i.push("fc-event-dragging"),n.isResizing&&i.push("fc-event-resizing"),n.isSelected&&i.push("fc-event-selected"),n.isStart&&i.push("fc-event-start"),n.isEnd&&i.push("fc-event-end"),n.isPast&&i.push("fc-event-past"),n.isToday&&i.push("fc-event-today"),n.isFuture&&i.push("fc-event-future"),i}function qT(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function SC(n,i){let{def:e,instance:r}=n.eventRange,{url:a}=e;if(a)return{href:a};let{emitter:o,options:d}=i,{eventInteractive:p}=d;return null==p&&(p=e.interactive,null==p&&(p=!!o.hasHandlers("eventClick"))),p?lT(D=>{o.trigger("eventClick",{el:D.target,event:new Rc(i,e,r),jsEvent:D,view:i.viewApi})}):{}}const CF={start:wn,end:wn,allDay:Boolean};function ZT(n,i,e){return Object.assign(Object.assign({},KT(n,i,e)),{timeZone:i.timeZone})}function KT(n,i,e){return{start:i.toDate(n.start),end:i.toDate(n.end),startStr:i.formatIso(n.start,{omitTime:e}),endStr:i.formatIso(n.end,{omitTime:e})}}class JT extends Error{constructor(i,e){super(i),this.response=e}}let DC;function QT(){return null==DC&&(DC=function RF(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let e=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),e}()),DC}class OF extends Ko{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Eb(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Eb(()=>{this.setState({forPrint:!1})})}}render(){let{props:i}=this,{options:e}=i,{forPrint:r}=this.state,a=r||"auto"===e.height||"auto"===e.contentHeight,o=a||null==e.height?"":e.height,d=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${e.direction}`,i.theme.getClass("root")];return QT()||d.push("fc-liquid-hack"),i.children(d,o,a,r)}componentDidMount(){let{emitter:i}=this.props;i.on("_beforeprint",this.handleBeforePrint),i.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:i}=this.props;i.off("_beforeprint",this.handleBeforePrint),i.off("_afterprint",this.handleAfterPrint)}}class Cy{constructor(i){this.component=i.component,this.isHitComboAllowed=i.isHitComboAllowed||null}destroy(){}}function AC(n){return{[n.component.uid]:n}}const IC={};class PF{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(i){this.currentDataManager.dispatch(i)}get view(){return this.getCurrentData().viewApi}batchRendering(i){i()}updateSize(){this.trigger("_resize",!0)}setOption(i,e){this.dispatch({type:"SET_OPTION",optionName:i,rawOptionValue:e})}getOption(i){return this.currentDataManager.currentCalendarOptionsInput[i]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(i,e){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[i]?r.emitter.on(i,e):console.warn(`Unknown listener name '${i}'`)}off(i,e){this.currentDataManager.emitter.off(i,e)}trigger(i,...e){this.currentDataManager.emitter.trigger(i,...e)}changeView(i,e){this.batchRendering(()=>{if(this.unselect(),e)if(e.start&&e.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:e});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i,dateMarker:r.createMarker(e)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i})})}zoomTo(i,e){let a;a=this.getCurrentData().viewSpecs[e=e||"day"]||this.getUnitViewSpec(e),this.unselect(),this.dispatch(a?{type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:i}:{type:"CHANGE_DATE",dateMarker:i})}getUnitViewSpec(i){let o,d,{viewSpecs:e,toolbarConfig:r}=this.getCurrentData(),a=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]);for(let p in e)a.push(p);for(o=0;o<a.length;o+=1)if(d=e[a[o]],d&&d.singleUnit===i)return d;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,-1)})}nextYear(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:i.dateEnv.addYears(i.currentDate,1)})}today(){let i=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:sx(i.calendarOptions.now,i.dateEnv)})}gotoDate(i){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.createMarker(i)})}incrementDate(i){let e=this.getCurrentData(),r=mo(i);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.add(e.currentDate,r)}))}getDate(){let i=this.getCurrentData();return i.dateEnv.toDate(i.currentDate)}formatDate(i,e){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(i),vc(e))}formatRange(i,e,r){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(i),a.createMarker(e),vc(r),r)}formatIso(i,e){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(i),{omitTime:e})}select(i,e){let r;r=null==e?null!=i.start?i:{start:i,end:null}:{start:i,end:e};let a=this.getCurrentData(),o=function EF(n,i,e){let r=function kF(n,i){let{refined:e,extra:r}=wb(n,CF),a=e.start?i.createMarkerMeta(e.start):null,o=e.end?i.createMarkerMeta(e.end):null,{allDay:d}=e;return null==d&&(d=a&&a.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:o?o.marker:null},allDay:d},r)}(n,i),{range:a}=r;if(!a.start)return null;if(!a.end){if(null==e)return null;a.end=i.add(a.start,e)}return r}(r,a.dateEnv,mo({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),UT(o,null,a))}unselect(i){let e=this.getCurrentData();e.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function pF(n,i){i.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:i.viewApi||i.calendarApi.view})}(i,e))}addEvent(i,e){if(i instanceof Rc){let d=i._def,p=i._instance;return this.getCurrentData().eventStore.defs[d.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:xC({def:d,instance:p})}),this.triggerEventAdd(i)),i}let a,r=this.getCurrentData();if(e instanceof by)a=e.internalEventSource;else if("boolean"==typeof e)e&&([a]=uC(r.eventSources));else if(null!=e){let d=this.getEventSourceById(e);if(!d)return console.warn(`Could not find an event source with ID "${e}"`),null;a=d.internalEventSource}let o=LT(i,a,r,!1);if(o){let d=new Rc(r,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:xC(o)}),this.triggerEventAdd(d),d}return null}triggerEventAdd(i){let{emitter:e}=this.getCurrentData();e.trigger("eventAdd",{event:i,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:$T(i)})}})}getEventById(i){let e=this.getCurrentData(),{defs:r,instances:a}=e.eventStore;i=String(i);for(let o in r){let d=r[o];if(d.publicId===i){if(d.recurringDef)return new Rc(e,d,null);for(let p in a){let D=a[p];if(D.defId===d.defId)return new Rc(e,d,D)}}}return null}getEvents(){let i=this.getCurrentData();return m_(i.eventStore,i)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let i=this.getCurrentData(),e=i.eventSources,r=[];for(let a in e)r.push(new by(i,e[a]));return r}getEventSourceById(i){let e=this.getCurrentData(),r=e.eventSources;i=String(i);for(let a in r)if(r[a].publicId===i)return new by(e,r[a]);return null}addEventSource(i){let e=this.getCurrentData();if(i instanceof by)return e.eventSources[i.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i.internalEventSource]}),i;let r=NT(i,e);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new by(e,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(i){let e=mo(i);e&&this.trigger("_scrollRequest",{time:e})}}function FF(n,i){return n.left>=i.left&&n.left<i.right&&n.top>=i.top&&n.top<i.bottom}function eS(n,i){let e={left:Math.max(n.left,i.left),right:Math.min(n.right,i.right),top:Math.max(n.top,i.top),bottom:Math.min(n.bottom,i.bottom)};return e.left<e.right&&e.top<e.bottom&&e}const MC={defs:{},instances:{}};class YF{constructor(){this.getKeysForEventDefs=hs(this._getKeysForEventDefs),this.splitDateSelection=hs(this._splitDateSpan),this.splitEventStore=hs(this._splitEventStore),this.splitIndividualUi=hs(this._splitIndividualUi),this.splitEventDrag=hs(this._splitInteraction),this.splitEventResize=hs(this._splitInteraction),this.eventUiBuilders={}}splitProps(i){let e=this.getKeyInfo(i),r=this.getKeysForEventDefs(i.eventStore),a=this.splitDateSelection(i.dateSelection),o=this.splitIndividualUi(i.eventUiBases,r),d=this.splitEventStore(i.eventStore,r),p=this.splitEventDrag(i.eventDrag),D=this.splitEventResize(i.eventResize),P={};this.eventUiBuilders=$g(e,(B,te)=>this.eventUiBuilders[te]||hs(GF));for(let B in e){let te=e[B],ae=d[B]||MC;P[B]={businessHours:te.businessHours||i.businessHours,dateSelection:a[B]||null,eventStore:ae,eventUiBases:(0,this.eventUiBuilders[B])(i.eventUiBases[""],te.ui,o[B]),eventSelection:ae.instances[i.eventSelection]?i.eventSelection:"",eventDrag:p[B]||null,eventResize:D[B]||null}}return P}_splitDateSpan(i){let e={};if(i){let r=this.getKeysForDateSpan(i);for(let a of r)e[a]=i}return e}_getKeysForEventDefs(i){return $g(i.defs,e=>this.getKeysForEventDef(e))}_splitEventStore(i,e){let{defs:r,instances:a}=i,o={};for(let d in r)for(let p of e[d])o[p]||(o[p]={defs:{},instances:{}}),o[p].defs[d]=r[d];for(let d in a){let p=a[d];for(let D of e[p.defId])o[D]&&(o[D].instances[d]=p)}return o}_splitIndividualUi(i,e){let r={};for(let a in i)if(a)for(let o of e[a])r[o]||(r[o]={}),r[o][a]=i[a];return r}_splitInteraction(i){let e={};if(i){let r=this._splitEventStore(i.affectedEvents,this._getKeysForEventDefs(i.affectedEvents)),a=this._getKeysForEventDefs(i.mutatedEvents),o=this._splitEventStore(i.mutatedEvents,a),d=p=>{e[p]||(e[p]={affectedEvents:r[p]||MC,mutatedEvents:o[p]||MC,isEvent:i.isEvent})};for(let p in r)d(p);for(let p in o)d(p)}return e}}function GF(n,i,e){let r=[];n&&r.push(n),i&&r.push(i);let a={"":BT(r)};return e&&Object.assign(a,e),a}function RC(n,i,e,r){return{dow:n.getUTCDay(),isDisabled:!(!r||qg(r.activeRange,n)),isOther:!(!r||qg(r.currentRange,n)),isToday:!(!i||!qg(i,n)),isPast:!!(e?n<e:i&&n<i.start),isFuture:!!(e?n>e:i&&n>=i.end)}}function Ob(n,i){let e=["fc-day",`fc-day-${hT[n.dow]}`];return n.isDisabled?e.push("fc-day-disabled"):(n.isToday&&(e.push("fc-day-today"),e.push(i.getClass("today"))),n.isPast&&e.push("fc-day-past"),n.isFuture&&e.push("fc-day-future"),n.isOther&&e.push("fc-day-other")),e}const HF=vc({year:"numeric",month:"long",day:"numeric"}),VF=vc({week:"long"});function Ey(n,i,e="day",r=!0){const{dateEnv:a,options:o,calendarApi:d}=n;let p=a.format(i,"week"===e?VF:HF);if(o.navLinks){let D=a.toDate(i);const P=B=>{let te="day"===e?o.navLinkDayClick:"week"===e?o.navLinkWeekClick:null;"function"==typeof te?te.call(d,a.toDate(i),B):("string"==typeof te&&(e=te),d.zoomTo(i,e))};return Object.assign({title:tx(o.navLinkHint,[p,D],p),"data-navlink":""},r?oT(P):{onClick:P})}return{"aria-label":p}}let LC,OC=null;function tS(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function qF(n,i=!1,e){let r=e?n.getBoundingClientRect():PC(n),a=function XF(n,i=!1){let e=window.getComputedStyle(n),r=parseInt(e.borderLeftWidth,10)||0,a=parseInt(e.borderRightWidth,10)||0,o=parseInt(e.borderTopWidth,10)||0,d=parseInt(e.borderBottomWidth,10)||0,p=tS(n),D=p.y-r-a,B={borderLeft:r,borderRight:a,borderTop:o,borderBottom:d,scrollbarBottom:p.x-o-d,scrollbarLeft:0,scrollbarRight:0};return function UF(){return null===OC&&(OC=function jF(){let n=document.createElement("div");ex(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let e=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return eC(n),e}()),OC}()&&"rtl"===e.direction?B.scrollbarLeft=D:B.scrollbarRight=D,i&&(B.paddingLeft=parseInt(e.paddingLeft,10)||0,B.paddingRight=parseInt(e.paddingRight,10)||0,B.paddingTop=parseInt(e.paddingTop,10)||0,B.paddingBottom=parseInt(e.paddingBottom,10)||0),B}(n,i),o={left:r.left+a.borderLeft+a.scrollbarLeft,right:r.right-a.borderRight-a.scrollbarRight,top:r.top+a.borderTop,bottom:r.bottom-a.borderBottom-a.scrollbarBottom};return i&&(o.left+=a.paddingLeft,o.right-=a.paddingRight,o.top+=a.paddingTop,o.bottom-=a.paddingBottom),o}function PC(n){let i=n.getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,right:i.right+window.pageXOffset,bottom:i.bottom+window.pageYOffset}}function iS(n){let i=[];for(;n instanceof HTMLElement;){let e=window.getComputedStyle(n);if("fixed"===e.position)break;/(auto|scroll)/.test(e.overflow+e.overflowY+e.overflowX)&&i.push(n),n=n.parentNode}return i}class ky{constructor(i,e,r,a){this.els=e;let o=this.originClientRect=i.getBoundingClientRect();r&&this.buildElHorizontals(o.left),a&&this.buildElVerticals(o.top)}buildElHorizontals(i){let e=[],r=[];for(let a of this.els){let o=a.getBoundingClientRect();e.push(o.left-i),r.push(o.right-i)}this.lefts=e,this.rights=r}buildElVerticals(i){let e=[],r=[];for(let a of this.els){let o=a.getBoundingClientRect();e.push(o.top-i),r.push(o.bottom-i)}this.tops=e,this.bottoms=r}leftToIndex(i){let o,{lefts:e,rights:r}=this,a=e.length;for(o=0;o<a;o+=1)if(i>=e[o]&&i<r[o])return o}topToIndex(i){let o,{tops:e,bottoms:r}=this,a=e.length;for(o=0;o<a;o+=1)if(i>=e[o]&&i<r[o])return o}getWidth(i){return this.rights[i]-this.lefts[i]}getHeight(i){return this.bottoms[i]-this.tops[i]}similarTo(i){return Lb(this.tops||[],i.tops||[])&&Lb(this.bottoms||[],i.bottoms||[])&&Lb(this.lefts||[],i.lefts||[])&&Lb(this.rights||[],i.rights||[])}}function Lb(n,i){const e=n.length;if(e!==i.length)return!1;for(let r=0;r<e;r++)if(Math.round(n[r])!==Math.round(i[r]))return!1;return!0}class FC{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class KF extends FC{constructor(i){super(),this.el=i}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(i){this.el.scrollTop=i}setScrollLeft(i){this.el.scrollLeft=i}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class JF extends FC{getScrollTop(){return window.pageYOffset}getScrollLeft(){return window.pageXOffset}setScrollTop(i){window.scroll(window.pageXOffset,i)}setScrollLeft(i){window.scroll(i,window.pageYOffset)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Jp extends Ko{constructor(){super(...arguments),this.uid=u_()}prepareHits(){}queryHit(i,e,r,a){return null}isValidSegDownEl(i){return!this.props.eventDrag&&!this.props.eventResize&&!_h(i,".fc-event-mirror")}isValidDateDownEl(i){return!(_h(i,".fc-event:not(.fc-bg-event)")||_h(i,".fc-more-link")||_h(i,"a[data-navlink]")||_h(i,".fc-popover"))}}class nS{constructor(i=(e=>e.thickness||1)){this.getEntryThickness=i,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(i){let e=[];for(let r of i)this.insertEntry(r,e);return e}insertEntry(i,e){let r=this.findInsertion(i);this.isInsertionValid(r,i)?this.insertEntryAt(i,r):this.handleInvalidInsertion(r,i,e)}isInsertionValid(i,e){return(-1===this.maxCoord||i.levelCoord+this.getEntryThickness(e)<=this.maxCoord)&&(-1===this.maxStackCnt||i.stackCnt<this.maxStackCnt)}handleInvalidInsertion(i,e,r){if(this.allowReslicing&&i.touchingEntry){const a=Object.assign(Object.assign({},e),{span:NC(e.span,i.touchingEntry.span)});r.push(a),this.splitEntry(e,i.touchingEntry,r)}else r.push(e)}splitEntry(i,e,r){let a=i.span,o=e.span;a.start<o.start&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:a.start,end:o.start}},r),a.end>o.end&&this.insertEntry({index:i.index,thickness:i.thickness,span:{start:o.end,end:a.end}},r)}insertEntryAt(i,e){let{entriesByLevel:r,levelCoords:a}=this;-1===e.lateral?(zC(a,e.level,e.levelCoord),zC(r,e.level,[i])):zC(r[e.level],e.lateral,i),this.stackCnts[g_(i)]=e.stackCnt}findInsertion(i){let{levelCoords:e,entriesByLevel:r,strictOrder:a,stackCnts:o}=this,d=e.length,p=0,D=-1,P=-1,B=null,te=0;for(let ge=0;ge<d;ge+=1){const ue=e[ge];if(!a&&ue>=p+this.getEntryThickness(i))break;let qe,Te=r[ge],ht=YC(Te,i.span.start,BC),ut=ht[0]+ht[1];for(;(qe=Te[ut])&&qe.span.start<i.span.end;){let mi=ue+this.getEntryThickness(qe);mi>p&&(p=mi,B=qe,D=ge,P=ut),mi===p&&(te=Math.max(te,o[g_(qe)]+1)),ut+=1}}let ae=0;if(B)for(ae=D+1;ae<d&&e[ae]<p;)ae+=1;let oe=-1;return ae<d&&e[ae]===p&&(oe=YC(r[ae],i.span.end,BC)[0]),{touchingLevel:D,touchingLateral:P,touchingEntry:B,stackCnt:te,levelCoord:p,level:ae,lateral:oe}}toRects(){let{entriesByLevel:i,levelCoords:e}=this,r=i.length,a=[];for(let o=0;o<r;o+=1){let d=i[o],p=e[o];for(let D of d)a.push(Object.assign(Object.assign({},D),{thickness:this.getEntryThickness(D),levelCoord:p}))}return a}}function BC(n){return n.span.end}function g_(n){return n.index+":"+n.span.start}function e5(n,i){return{start:Math.min(n.start,i.start),end:Math.max(n.end,i.end)}}function NC(n,i){let e=Math.max(n.start,i.start),r=Math.min(n.end,i.end);return e<r?{start:e,end:r}:null}function zC(n,i,e){n.splice(i,0,e)}function YC(n,i,e){let r=0,a=n.length;if(!a||i<e(n[r]))return[0,0];if(i>e(n[a-1]))return[a,0];for(;r<a;){let o=Math.floor(r+(a-r)/2),d=e(n[o]);if(i<d)a=o;else{if(!(i>d))return[o,1];r=o+1}}return[r,0]}class rS{constructor(i,e){this.emitter=new Mb}destroy(){}setMirrorIsVisible(i){}setMirrorNeedsRevert(i){}setAutoScrollEnabled(i){}}const GC={};Boolean;const aS="fc-col-header-cell";function sS(n){return n.text}class r5 extends Ko{render(){let{dateEnv:i,options:e,theme:r,viewApi:a}=this.context,{props:o}=this,{date:d,dateProfile:p}=o,D=RC(d,o.todayRange,null,p),P=[aS].concat(Ob(D,r)),B=i.format(d,o.dayHeaderFormat),te=!D.isDisabled&&o.colCnt>1?Ey(this.context,d):{},ae=Object.assign(Object.assign(Object.assign({date:i.toDate(d),view:a},o.extraRenderProps),{text:B}),D);return si(Gh,{elTag:"th",elClasses:P,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":D.isDisabled?void 0:ix(d)},o.extraDataAttrs),renderProps:ae,generatorName:"dayHeaderContent",customGenerator:e.dayHeaderContent,defaultGenerator:sS,classNameGenerator:e.dayHeaderClassNames,didMount:e.dayHeaderDidMount,willUnmount:e.dayHeaderWillUnmount},oe=>si("div",{className:"fc-scrollgrid-sync-inner"},!D.isDisabled&&si(oe,{elTag:"a",elAttrs:te,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}}const a5=vc({weekday:"long"});class s5 extends Ko{render(){let{props:i}=this,{dateEnv:e,theme:r,viewApi:a,options:o}=this.context,d=Md(new Date(2592e5),i.dow),p={dow:i.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},D=e.format(d,i.dayHeaderFormat),P=Object.assign(Object.assign(Object.assign(Object.assign({date:d},p),{view:a}),i.extraRenderProps),{text:D});return si(Gh,{elTag:"th",elClasses:[aS,...Ob(p,r),...i.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:i.colSpan},i.extraDataAttrs),renderProps:P,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:sS,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},B=>si("div",{className:"fc-scrollgrid-sync-inner"},si(B,{elTag:"a",elClasses:["fc-col-header-cell-cushion",i.isSticky&&"fc-sticky"],elAttrs:{"aria-label":e.format(d,a5)}})))}}let cx=(()=>{class n extends rf{constructor(e,r){super(e,r),this.initialNowDate=sx(r.options.now,r.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:e,state:r}=this;return e.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:e,context:r}=this,a=rv(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),o=r.dateEnv.startOf(a,e.unit),d=r.dateEnv.add(o,mo(1,e.unit)),p=d.valueOf()-a.valueOf();return p=Math.min(864e5,p),{currentState:{nowDate:o,todayRange:oS(o)},nextState:{nowDate:d,todayRange:oS(d)},waitMs:p}}setTimeout(){let{nextState:e,waitMs:r}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(e,()=>{this.setTimeout()})},r)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return n.contextType=Wg,n})();function oS(n){let i=Ml(n);return{start:i,end:Md(i,1)}}class lS extends Ko{constructor(){super(...arguments),this.createDayHeaderFormatter=hs(o5)}render(){let{context:i}=this,{dates:e,dateProfile:r,datesRepDistinctDays:a,renderIntro:o}=this.props,d=this.createDayHeaderFormatter(i.options.dayHeaderFormat,a,e.length);return si(cx,{unit:"day"},(p,D)=>si("tr",{role:"row"},o&&o("day"),e.map(P=>a?si(r5,{key:P.toISOString(),date:P,dateProfile:r,todayRange:D,colCnt:e.length,dayHeaderFormat:d}):si(s5,{key:P.getUTCDay(),dow:P.getUTCDay(),dayHeaderFormat:d}))))}}function o5(n,i,e){return n||function n5(n,i){return vc(!n||i>10?{weekday:"short"}:i>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(i,e)}class cS{constructor(i,e){let r=i.start,{end:a}=i,o=[],d=[],p=-1;for(;r<a;)e.isHiddenDay(r)?o.push(p+.5):(p+=1,o.push(p),d.push(r)),r=Md(r,1);this.dates=d,this.indices=o,this.cnt=d.length}sliceRange(i){let e=this.getDateDayIndex(i.start),r=this.getDateDayIndex(Md(i.end,-1)),a=Math.max(0,e),o=Math.min(this.cnt-1,r);return a=Math.ceil(a),o=Math.floor(o),a<=o?{firstIndex:a,lastIndex:o,isStart:e===a,isEnd:r===o}:null}getDateDayIndex(i){let{indices:e}=this,r=Math.floor(av(this.dates[0],i));return r<0?e[0]-1:r>=e.length?e[e.length-1]+1:e[r]}}class uS{constructor(i,e){let a,o,d,{dates:r}=i;if(e){for(o=r[0].getUTCDay(),a=1;a<r.length&&r[a].getUTCDay()!==o;a+=1);d=Math.ceil(r.length/a)}else d=1,a=r.length;this.rowCnt=d,this.colCnt=a,this.daySeries=i,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let i=[];for(let e=0;e<this.rowCnt;e+=1){let r=[];for(let a=0;a<this.colCnt;a+=1)r.push(this.buildCell(e,a));i.push(r)}return i}buildCell(i,e){let r=this.daySeries.dates[i*this.colCnt+e];return{key:r.toISOString(),date:r}}buildHeaderDates(){let i=[];for(let e=0;e<this.colCnt;e+=1)i.push(this.cells[0][e].date);return i}sliceRange(i){let{colCnt:e}=this,r=this.daySeries.sliceRange(i),a=[];if(r){let{firstIndex:o,lastIndex:d}=r,p=o;for(;p<=d;){let D=Math.floor(p/e),P=Math.min((D+1)*e,d+1);a.push({row:D,firstCol:p%e,lastCol:(P-1)%e,isStart:r.isStart&&p===o,isEnd:r.isEnd&&P-1===d}),p=P}}return a}}class dS{constructor(){this.sliceBusinessHours=hs(this._sliceBusinessHours),this.sliceDateSelection=hs(this._sliceDateSpan),this.sliceEventStore=hs(this._sliceEventStore),this.sliceEventDrag=hs(this._sliceInteraction),this.sliceEventResize=hs(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(i,e,r,a,...o){let{eventUiBases:d}=i,p=this.sliceEventStore(i.eventStore,d,e,r,...o);return{dateSelectionSegs:this.sliceDateSelection(i.dateSelection,e,r,d,a,...o),businessHourSegs:this.sliceBusinessHours(i.businessHours,e,r,a,...o),fgEventSegs:p.fg,bgEventSegs:p.bg,eventDrag:this.sliceEventDrag(i.eventDrag,d,e,r,...o),eventResize:this.sliceEventResize(i.eventResize,d,e,r,...o),eventSelection:i.eventSelection}}sliceNowDate(i,e,r,a,...o){return this._sliceDateSpan({range:{start:i,end:rv(i,1)},allDay:!1},e,r,{},a,...o)}_sliceBusinessHours(i,e,r,a,...o){return i?this._sliceEventStore(p_(i,Pb(e,!!r),a),{},e,r,...o).bg:[]}_sliceEventStore(i,e,r,a,...o){if(i){let d=kC(i,e,Pb(r,!!a),a);return{bg:this.sliceEventRanges(d.bg,o),fg:this.sliceEventRanges(d.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(i,e,r,a,...o){if(!i)return null;let d=kC(i.mutatedEvents,e,Pb(r,!!a),a);return{segs:this.sliceEventRanges(d.fg,o),affectedInstances:i.affectedEvents.instances,isEvent:i.isEvent}}_sliceDateSpan(i,e,r,a,o,...d){if(!i)return[];let p=Pb(e,!!r),D=lv(i.range,p);if(D){let P=function AF(n,i,e){let r=PT({editable:!1},e),a=yC(r.refined,r.extra,"",n.allDay,!0,e);return{def:a,ui:XT(a,i),instance:vC(a.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}(i=Object.assign(Object.assign({},i),{range:D}),a,o),B=this.sliceRange(i.range,...d);for(let te of B)te.eventRange=P;return B}return[]}sliceEventRanges(i,e){let r=[];for(let a of i)r.push(...this.sliceEventRange(a,e));return r}sliceEventRange(i,e){let r=i.range;this.forceDayIfListItem&&"list-item"===i.ui.display&&(r={start:r.start,end:Md(r.start,1)});let a=this.sliceRange(r,...e);for(let o of a)o.eventRange=i,o.isStart=i.isStart&&o.isStart,o.isEnd=i.isEnd&&o.isEnd;return a}}function Pb(n,i){let e=n.activeRange;return i?e:{start:rv(e.start,n.slotMinTime.milliseconds),end:rv(e.end,n.slotMaxTime.milliseconds-864e5)}}function hS(n,i,e){let{instances:r}=n.mutatedEvents;for(let a in r)if(!Tb(i.validRange,r[a].range))return!1;return fS({eventDrag:n},e)}function fS(n,i){let e=i.getCurrentData(),r=Object.assign({businessHours:e.businessHours,dateSelection:"",eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(i.pluginHooks.isPropsValid||c5)(r,i)}function c5(n,i,e={},r){return!(n.eventDrag&&!function u5(n,i,e,r){let a=i.getCurrentData(),o=n.eventDrag,d=o.mutatedEvents,p=d.defs,D=d.instances,P=Rb(p,o.isEvent?n.eventUiBases:{"":a.selectionConfig});r&&(P=$g(P,r));let B=function oF(n,i){return{defs:n.defs,instances:f_(n.instances,e=>!i[e.instanceId])}}(n.eventStore,o.affectedEvents.instances),te=B.defs,ae=B.instances,oe=Rb(te,n.eventUiBases);for(let ge in D){let ue=D[ge],Te=ue.range,qe=P[ue.defId],ht=p[ue.defId];if(!pS(qe.constraints,Te,B,n.businessHours,i))return!1;let{eventOverlap:ut}=i.options,mi="function"==typeof ut?ut:null;for(let vi in ae){let Vt=ae[vi];if(mC(Te,Vt.range)&&(!1===oe[Vt.defId].overlap&&o.isEvent||!1===qe.overlap||mi&&!mi(new Rc(i,te[Vt.defId],Vt),new Rc(i,ht,ue))))return!1}let zi=a.eventStore;for(let vi of qe.allows){let hn,Vt=Object.assign(Object.assign({},e),{range:ue.range,allDay:ht.allDay}),wi=zi.defs[ht.defId];if(hn=wi?new Rc(i,wi,zi.instances[ge]):new Rc(i,ht),!vi(CC(Vt,i),hn))return!1}}return!0}(n,i,e,r)||n.dateSelection&&!function d5(n,i,e,r){let a=n.eventStore,o=a.defs,d=a.instances,p=n.dateSelection,D=p.range,{selectionConfig:P}=i.getCurrentData();if(r&&(P=r(P)),!pS(P.constraints,D,a,n.businessHours,i))return!1;let{selectOverlap:B}=i.options,te="function"==typeof B?B:null;for(let ae in d){let oe=d[ae];if(mC(D,oe.range)&&(!1===P.overlap||te&&!te(new Rc(i,o[oe.defId],oe),null)))return!1}for(let ae of P.allows)if(!ae(CC(Object.assign(Object.assign({},e),p),i),null))return!1;return!0}(n,i,e,r))}function pS(n,i,e,r,a){for(let o of n)if(!f5(h5(o,i,e,r,a),i))return!1;return!0}function h5(n,i,e,r,a){return"businessHours"===n?HC(p_(r,i,a)):"string"==typeof n?HC(Db(e,o=>o.groupId===n)):"object"==typeof n&&n?HC(p_(n,i,a)):[]}function HC(n){let{instances:i}=n,e=[];for(let r in i)e.push(i[r].range);return e}function f5(n,i){for(let e of n)if(Tb(e,i))return!0;return!1}const Fb=/^(visible|hidden)$/;class mS extends Ko{constructor(){super(...arguments),this.handleEl=i=>{this.el=i,Xg(this.props.elRef,i)}}render(){let{props:i}=this,{liquid:e,liquidIsAbsolute:r}=i,a=e&&r,o=["fc-scroller"];return e&&o.push(r?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),si("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:i.overflowX,overflowY:i.overflowY,left:a&&-(i.overcomeLeft||0)||"",right:a&&-(i.overcomeRight||0)||"",bottom:a&&-(i.overcomeBottom||0)||"",marginLeft:!a&&-(i.overcomeLeft||0)||"",marginRight:!a&&-(i.overcomeRight||0)||"",marginBottom:!a&&-(i.overcomeBottom||0)||"",maxHeight:i.maxHeight||""}},i.children)}needsXScrolling(){if(Fb.test(this.props.overflowX))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=i;for(let a=0;a<r.length;a+=1)if(r[a].getBoundingClientRect().width>e)return!0;return!1}needsYScrolling(){if(Fb.test(this.props.overflowY))return!1;let{el:i}=this,e=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=i;for(let a=0;a<r.length;a+=1)if(r[a].getBoundingClientRect().height>e)return!0;return!1}getXScrollbarWidth(){return Fb.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Fb.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Kg{constructor(i){this.masterCallback=i,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(e,r)=>{let{depths:a,currentMap:o}=this,d=!1,p=!1;null!==e?(d=r in o,o[r]=e,a[r]=(a[r]||0)+1,p=!0):(a[r]-=1,a[r]||(delete o[r],delete this.callbackMap[r],d=!0)),this.masterCallback&&(d&&this.masterCallback(null,String(r)),p&&this.masterCallback(e,String(r)))}}createRef(i){let e=this.callbackMap[i];return e||(e=this.callbackMap[i]=r=>{this.handleValue(r,String(i))}),e}collect(i,e,r){return function C4(n,i=0,e,r=1){let a=[];null==e&&(e=Object.keys(n).length);for(let o=i;o<e;o+=r){let d=n[o];void 0!==d&&a.push(d)}return a}(this.currentMap,i,e,r)}getAll(){return uC(this.currentMap)}}function gS(n,i){return n.liquid&&i.liquid}function v5(n,i){return Vm(n,i,Um)}function _5(n,i){let e=[];for(let r of n){let a=r.span||1;for(let o=0;o<a;o+=1)e.push(si("col",{style:{width:"shrink"===r.width?y5(i):r.width||"",minWidth:r.minWidth||""}}))}return si("colgroup",{},...e)}function y5(n){return n??4}function w5(n,i){let e=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return i&&n.liquid&&null==n.maxHeight&&e.push("fc-scrollgrid-section-liquid"),n.isSticky&&e.push("fc-scrollgrid-section-sticky"),e}function VC(n){return si("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Bb(n){let{stickyHeaderDates:i}=n;return(null==i||"auto"===i)&&(i="auto"===n.height||"auto"===n.viewHeight),i}function vS(n){let{stickyFooterScrollbar:i}=n;return(null==i||"auto"===i)&&(i="auto"===n.height||"auto"===n.viewHeight),i}class UC extends Ko{constructor(){super(...arguments),this.processCols=hs(i=>i,v5),this.renderMicroColGroup=hs(_5),this.scrollerRefs=new Kg,this.scrollerElRefs=new Kg(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:i,state:e,context:r}=this,a=i.sections||[],o=this.processCols(i.cols),d=this.renderMicroColGroup(o,e.shrinkWidth),p=function b5(n,i){let e=["fc-scrollgrid",i.theme.getClass("table")];return n&&e.push("fc-scrollgrid-liquid"),e}(i.liquid,r);i.collapsibleWidth&&p.push("fc-scrollgrid-collapsible");let B,D=a.length,P=0,te=[],ae=[],oe=[];for(;P<D&&"header"===(B=a[P]).type;)te.push(this.renderSection(B,d,!0)),P+=1;for(;P<D&&"body"===(B=a[P]).type;)ae.push(this.renderSection(B,d,!1)),P+=1;for(;P<D&&"footer"===(B=a[P]).type;)oe.push(this.renderSection(B,d,!0)),P+=1;let ge=!QT();const ue={role:"rowgroup"};return si("table",{role:"grid",className:p.join(" "),style:{height:i.height}},!(ge||!te.length)&&si("thead",ue,...te),!(ge||!ae.length)&&si("tbody",ue,...ae),!(ge||!oe.length)&&si("tfoot",ue,...oe),ge&&si("tbody",ue,...te,...ae,...oe))}renderSection(i,e,r){return"outerContent"in i?si(dl,{key:i.key},i.outerContent):si("tr",{key:i.key,role:"presentation",className:w5(i,this.props.liquid).join(" ")},this.renderChunkTd(i,e,i.chunk,r))}renderChunkTd(i,e,r,a){if("outerContent"in r)return r.outerContent;let{props:o}=this,{forceYScrollbars:d,scrollerClientWidths:p,scrollerClientHeights:D}=this.state,P=function m5(n,i){return null!=i.maxHeight||gS(n,i)}(o,i),B=gS(o,i),te=o.liquid?d?"scroll":P?"auto":"hidden":"visible",ae=i.key,oe=function g5(n,i,e,r){let{expandRows:a}=e;return"function"==typeof i.content?i.content(e):si("table",{role:"presentation",className:[i.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:a?e.clientHeight:""}},e.tableColGroupNode,si(r?"thead":"tbody",{role:"presentation"},"function"==typeof i.rowContent?i.rowContent(e):i.rowContent))}(i,r,{tableColGroupNode:e,tableMinWidth:"",clientWidth:o.collapsibleWidth||void 0===p[ae]?null:p[ae],clientHeight:void 0!==D[ae]?D[ae]:null,expandRows:i.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return si(a?"th":"td",{ref:r.elRef,role:"presentation"},si("div",{className:"fc-scroller-harness"+(B?" fc-scroller-harness-liquid":"")},si(mS,{ref:this.scrollerRefs.createRef(ae),elRef:this.scrollerElRefs.createRef(ae),overflowY:te,overflowX:o.liquid?"hidden":"visible",maxHeight:i.maxHeight,liquid:B,liquidIsAbsolute:!0},oe)))}_handleScrollerEl(i,e){let r=function C5(n,i){for(let e of n)if(e.key===i)return e;return null}(this.props.sections,e);r&&Xg(r.chunk.scrollerElRef,i)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function x5(n){for(let i of n)if("shrink"===i.width)return!0;return!1}(this.props.cols)?function p5(n){let i=function w3(n,i){let e=n instanceof HTMLElement?[n]:n,r=[];for(let a=0;a<e.length;a+=1){let o=e[a].querySelectorAll(i);for(let d=0;d<o.length;d+=1)r.push(o[d])}return r}(n,".fc-scrollgrid-shrink"),e=0;for(let r of i)e=Math.max(e,F3(r));return Math.ceil(e)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let i=function $F(){return LC||(LC=function WF(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let i=tS(n);return document.body.removeChild(n),i}()),LC}(),{scrollerRefs:e,scrollerElRefs:r}=this,a=!1,o={},d={};for(let p in e.currentMap){let D=e.currentMap[p];if(D&&D.needsYScrolling()){a=!0;break}}for(let p of this.props.sections){let D=p.key,P=r.currentMap[D];if(P){let B=P.parentNode;o[D]=Math.floor(B.getBoundingClientRect().width-(a?i.y:0)),d[D]=Math.floor(B.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:o,scrollerClientHeights:d}}}UC.addStateEquality({scrollerClientWidths:Um,scrollerClientHeights:Um});class Nb extends Ko{constructor(){super(...arguments),this.handleEl=i=>{this.el=i,i&&WT(i,this.props.seg)}}render(){const{props:i,context:e}=this,{options:r}=e,{seg:a}=i,{eventRange:o}=a,{ui:d}=o,p={event:new Rc(e,o.def,o.instance),view:e.viewApi,timeText:i.timeText,textColor:d.textColor,backgroundColor:d.backgroundColor,borderColor:d.borderColor,isDraggable:!i.disableDragging&&yF(a,e),isStartResizable:!i.disableResizing&&xF(a,e),isEndResizable:!i.disableResizing&&(n=a,n.isEnd&&n.eventRange.ui.durationEditable),isMirror:!!(i.isDragging||i.isResizing||i.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!i.isPast,isFuture:!!i.isFuture,isToday:!!i.isToday,isSelected:!!i.isSelected,isDragging:!!i.isDragging,isResizing:!!i.isResizing};var n;return si(Gh,Object.assign({},i,{elRef:this.handleEl,elClasses:[...wF(p),...a.eventRange.ui.classNames,...i.elClasses||[]],renderProps:p,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:i.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount}))}componentDidUpdate(i){this.el&&this.props.seg!==i.seg&&WT(this.el,this.props.seg)}}class _S extends Ko{render(){let{props:i,context:e}=this,{options:r}=e,{seg:a}=i,{ui:o}=a.eventRange,p=lx(a,r.eventTimeFormat||i.defaultTimeFormat,e,i.defaultDisplayEventTime,i.defaultDisplayEventEnd);return si(Nb,Object.assign({},i,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:SC(a,e),defaultGenerator:E5,timeText:p}),(D,P)=>si(dl,null,si(D,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:P.textColor}}),!!P.isStartResizable&&si("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!P.isEndResizable&&si("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function E5(n){return si("div",{className:"fc-event-main-frame"},n.timeText&&si("div",{className:"fc-event-time"},n.timeText),si("div",{className:"fc-event-title-container"},si("div",{className:"fc-event-title fc-sticky"},n.event.title||si(dl,null,"\xa0"))))}const jC=n=>si(Wg.Consumer,null,i=>{let{options:e}=i,r={isAxis:n.isAxis,date:i.dateEnv.toDate(n.date),view:i.viewApi};return si(Gh,Object.assign({},n,{elTag:n.elTag||"div",renderProps:r,generatorName:"nowIndicatorContent",customGenerator:e.nowIndicatorContent,classNameGenerator:e.nowIndicatorClassNames,didMount:e.nowIndicatorDidMount,willUnmount:e.nowIndicatorWillUnmount}))}),k5=vc({day:"numeric"});class $C extends Ko{constructor(){super(...arguments),this.refineRenderProps=vb(T5)}render(){let{props:i,context:e}=this,{options:r}=e,a=this.refineRenderProps({date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,isMonthStart:i.isMonthStart||!1,showDayNumber:i.showDayNumber,extraRenderProps:i.extraRenderProps,viewApi:e.viewApi,dateEnv:e.dateEnv,monthStartFormat:r.monthStartFormat});return si(Gh,Object.assign({},i,{elClasses:[...Ob(a,e.theme),...i.elClasses||[]],elAttrs:Object.assign(Object.assign({},i.elAttrs),a.isDisabled?{}:{"data-date":ix(i.date)}),renderProps:a,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:i.defaultGenerator,classNameGenerator:a.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount}))}}function WC(n){return!(!n.dayCellContent&&!pC("dayCellContent",n))}function T5(n){let{date:i,dateEnv:e,dateProfile:r,isMonthStart:a}=n,o=RC(i,n.todayRange,null,r),d=n.showDayNumber?e.format(i,a?n.monthStartFormat:k5):"";return Object.assign(Object.assign(Object.assign({date:e.toDate(i),view:n.viewApi},o),{isMonthStart:a,dayNumberText:d}),n.extraRenderProps)}class yS extends Ko{render(){let{props:i}=this,{seg:e}=i;return si(Nb,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:e.eventRange.ui.backgroundColor},defaultGenerator:S5,seg:e,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:i.isPast,isFuture:i.isFuture,isToday:i.isToday,disableDragging:!0,disableResizing:!0})}}function S5(n){let{title:i}=n.event;return i&&si("div",{className:"fc-event-title"},n.event.title)}function xS(n){return si("div",{className:`fc-${n}`})}const bS=n=>si(Wg.Consumer,null,i=>{let{dateEnv:e,options:r}=i,{date:a}=n,o=r.weekNumberFormat||n.defaultFormat,d=e.computeWeekNumber(a),p=e.format(a,o);return si(Gh,Object.assign({},n,{renderProps:{num:d,text:p,date:a},generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:D5,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))});function D5(n){return n.text}class A5 extends Ko{constructor(){super(...arguments),this.state={titleId:nv()},this.handleRootEl=i=>{this.rootEl=i,this.props.elRef&&Xg(this.props.elRef,i)},this.handleDocumentMouseDown=i=>{const e=nT(i);this.rootEl.contains(e)||this.handleCloseClick()},this.handleDocumentKeyDown=i=>{"Escape"===i.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:i}=this.props;i&&i()}}render(){let{theme:i,options:e}=this.context,{props:r,state:a}=this,o=["fc-popover",i.getClass("popover")].concat(r.extraClassNames||[]);return function Vk(n,i){var e=si(qP,{__v:n,i});return e.containerInfo=i,e}(si("div",Object.assign({},r.extraAttrs,{id:r.id,className:o.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),si("div",{className:"fc-popover-header "+i.getClass("popoverHeader")},si("span",{className:"fc-popover-title",id:a.titleId},r.title),si("span",{className:"fc-popover-close "+i.getIconClass("close"),title:e.closeHint,onClick:this.handleCloseClick})),si("div",{className:"fc-popover-body "+i.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:i}=this.context,{alignmentEl:e,alignGridTop:r}=this.props,{rootEl:a}=this,o=function ZF(n){let i=iS(n),e=n.getBoundingClientRect();for(let r of i){let a=eS(e,r.getBoundingClientRect());if(!a)return null;e=a}return e}(e);if(o){let d=a.getBoundingClientRect(),p=r?_h(e,".fc-scrollgrid").getBoundingClientRect().top:o.top,D=i?o.right-d.width:o.left;p=Math.max(p,10),D=Math.min(D,document.documentElement.clientWidth-10-d.width),D=Math.max(D,10);let P=a.offsetParent.getBoundingClientRect();ex(a,{top:p-P.top,left:D-P.left})}}}class I5 extends Jp{constructor(){super(...arguments),this.handleRootEl=i=>{this.rootEl=i,i?this.context.registerInteractiveComponent(this,{el:i,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:i,dateEnv:e}=this.context,{props:r}=this,{startDate:a,todayRange:o,dateProfile:d}=r,p=e.format(a,i.dayPopoverFormat);return si($C,{elRef:this.handleRootEl,date:a,dateProfile:d,todayRange:o},(D,P,B)=>si(A5,{elRef:B.ref,id:r.id,title:p,extraClassNames:["fc-more-popover"].concat(B.className||[]),extraAttrs:B,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},WC(i)&&si(D,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(i,e,r,a){let{rootEl:o,props:d}=this;return i>=0&&i<r&&e>=0&&e<a?{dateProfile:d.dateProfile,dateSpan:Object.assign({allDay:!d.forceTimed,range:{start:d.startDate,end:d.endDate}},d.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:r,bottom:a},layer:1}:null}}class wS extends Ko{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:nv()},this.handleLinkEl=i=>{this.linkEl=i,this.props.elRef&&Xg(this.props.elRef,i)},this.handleClick=i=>{let{props:e,context:r}=this,{moreLinkClick:a}=r.options,o=CS(e).start;function d(p){let{def:D,instance:P,range:B}=p.eventRange;return{event:new Rc(r,D,P),start:r.dateEnv.toDate(B.start),end:r.dateEnv.toDate(B.end),isStart:p.isStart,isEnd:p.isEnd}}"function"==typeof a&&(a=a({date:o,allDay:!!e.allDayDate,allSegs:e.allSegs.map(d),hiddenSegs:e.hiddenSegs.map(d),jsEvent:i,view:r.viewApi})),a&&"popover"!==a?"string"==typeof a&&r.calendarApi.zoomTo(o,a):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:i,state:e}=this;return si(Wg.Consumer,null,r=>{let{viewApi:a,options:o,calendarApi:d}=r,{moreLinkText:p}=o,{moreCnt:D}=i,P=CS(i),B="function"==typeof p?p.call(d,D):`+${D} ${p}`,te=tx(o.moreLinkHint,[D],B),ae={num:D,shortText:`+${D}`,text:B,view:a};return si(dl,null,!!i.moreCnt&&si(Gh,{elTag:i.elTag||"a",elRef:this.handleLinkEl,elClasses:[...i.elClasses||[],"fc-more-link"],elStyle:i.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},i.elAttrs),oT(this.handleClick)),{title:te,"aria-expanded":e.isPopoverOpen,"aria-controls":e.isPopoverOpen?e.popoverId:""}),renderProps:ae,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:i.defaultGenerator||M5,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},i.children),e.isPopoverOpen&&si(I5,{id:e.popoverId,startDate:P.start,endDate:P.end,dateProfile:i.dateProfile,todayRange:i.todayRange,extraDateSpan:i.extraDateSpan,parentEl:this.parentEl,alignmentEl:i.alignmentElRef?i.alignmentElRef.current:this.linkEl,alignGridTop:i.alignGridTop,forceTimed:i.forceTimed,onClose:this.handlePopoverClose},i.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=_h(this.linkEl,".fc-view-harness"))}}function M5(n){return n.text}function CS(n){if(n.allDayDate)return{start:n.allDayDate,end:Md(n.allDayDate,1)};let{hiddenSegs:i}=n;return{start:ES(i),end:O5(i)}}function ES(n){return n.reduce(R5).eventRange.range.start}function R5(n,i){return n.eventRange.range.start<i.eventRange.range.start?n:i}function O5(n){return n.reduce(L5).eventRange.range.end}function L5(n,i){return n.eventRange.range.end>i.eventRange.range.end?n:i}class P5{constructor(){this.handlers=[]}set(i){this.currentValue=i;for(let e of this.handlers)e(i)}subscribe(i){this.handlers.push(i),void 0!==this.currentValue&&i(this.currentValue)}}class F5 extends P5{constructor(){super(...arguments),this.map=new Map}handle(i){const{map:e}=this;let r=!1;i.isActive?(e.set(i.id,i),r=!0):e.has(i.id)&&(e.delete(i.id),r=!0),r&&this.set(e)}}const B5=[],kS={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},TS=Object.assign(Object.assign({},kS),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(n,i)=>"day"===i?"Today":`This ${n}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:n=>`Show ${n} more event${1===n?"":"s"}`});function SS(n){let i=n.length>0?n[0].code:"en",e=B5.concat(n),r={en:TS};for(let a of e)r[a.code]=a;return{map:r,defaultCode:i}}function qC(n,i){return"object"!=typeof n||Array.isArray(n)?function N5(n,i){let e=[].concat(n||[]),r=function z5(n,i){for(let e=0;e<n.length;e+=1){let r=n[e].toLocaleLowerCase().split("-");for(let a=r.length;a>0;a-=1){let o=r.slice(0,a).join("-");if(i[o])return i[o]}}return null}(e,i)||TS;return DS(n,e,r)}(n,i):DS(n.code,[n.code],n)}function DS(n,i,e){let r=cC([kS,e],["buttonText"]);delete r.code;let{week:a}=r;return delete r.week,{codeArg:n,codes:i,week:a,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function jm(n){return{id:u_(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function H5(n,i){return{premiumReleaseDate:V5(n.premiumReleaseDate,i.premiumReleaseDate),reducers:n.reducers.concat(i.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(i.isLoadingFuncs),contextInit:n.contextInit.concat(i.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),i.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(i.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),i.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(i.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(i.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(i.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(i.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(i.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(i.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),i.views),viewPropsTransformers:n.viewPropsTransformers.concat(i.viewPropsTransformers),isPropsValid:i.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(i.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(i.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(i.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(i.calendarInteractions),componentInteractions:n.componentInteractions.concat(i.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),i.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(i.eventSourceDefs),cmdFormatter:i.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(i.recurringTypes),namedTimeZonedImpl:i.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||i.initialView,elementDraggingImpl:n.elementDraggingImpl||i.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),i.optionChangeHandlers),scrollGridImpl:i.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),i.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),i.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),i.propSetHandlers)}}function V5(n,i){return void 0===n?i:void 0===i?n:new Date(Math.max(n.valueOf(),i.valueOf()))}class cv extends rx{}function ZC(n,i,e,r){if(i[n])return i[n];let a=function j5(n,i,e,r){let a=e[n],o=r[n],d=B=>a&&null!==a[B]?a[B]:o&&null!==o[B]?o[B]:null,p=d("component"),D=d("superType"),P=null;if(D){if(D===n)throw new Error("Can't have a custom view type that references itself");P=ZC(D,i,e,r)}return!p&&P&&(p=P.component),p?{type:n,component:p,defaults:Object.assign(Object.assign({},P?P.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},P?P.overrides:{}),o?o.rawOptions:{})}:null}(n,i,e,r);return a&&(i[n]=a),a}function AS(n){return $g(n,$5)}function $5(n){let i="function"==typeof n?{component:n}:n,{component:e}=i;return i.content?e=IS(i):e&&!(e.prototype instanceof Ko)&&(e=IS(Object.assign(Object.assign({},i),{content:e}))),{superType:i.type,component:e,rawOptions:i}}function IS(n){return i=>si(Wg.Consumer,null,e=>si(Gh,{elTag:"div",elClasses:AT(e.viewSpec),renderProps:Object.assign(Object.assign({},i),{nextDayThreshold:e.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function W5(n,i,e,r){let a=AS(n),o=AS(i.views),d=function U5(n,i){let r,e={};for(r in n)ZC(r,e,n,i);for(r in i)ZC(r,e,n,i);return e}(a,o);return $g(d,p=>function X5(n,i,e,r,a){let o=n.overrides.duration||n.defaults.duration||r.duration||e.duration,d=null,p="",D="",P={};if(o&&(d=function q5(n){let i=JSON.stringify(n),e=MS[i];return void 0===e&&(e=mo(n),MS[i]=e),e}(o),d)){let ae=aC(d);p=ae.unit,1===ae.value&&(D=p,P=i[p]?i[p].rawOptions:{})}let B=ae=>{let oe=ae.buttonText||{},ge=n.defaults.buttonTextKey;return null!=ge&&null!=oe[ge]?oe[ge]:null!=oe[n.type]?oe[n.type]:null!=oe[D]?oe[D]:null},te=ae=>{let oe=ae.buttonHints||{},ge=n.defaults.buttonTextKey;return null!=ge&&null!=oe[ge]?oe[ge]:null!=oe[n.type]?oe[n.type]:null!=oe[D]?oe[D]:null};return{type:n.type,component:n.component,duration:d,durationUnit:p,singleUnit:D,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},P),n.overrides),buttonTextOverride:B(r)||B(e)||n.overrides.buttonText,buttonTextDefault:B(a)||n.defaults.buttonText||B(nx)||n.type,buttonTitleOverride:te(r)||te(e)||n.overrides.buttonHint,buttonTitleDefault:te(a)||n.defaults.buttonHint||te(nx)}}(p,o,i,e,r))}cv.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},cv.prototype.baseIconClass="fc-icon",cv.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},cv.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},cv.prototype.iconOverrideOption="buttonIcons",cv.prototype.iconOverrideCustomButtonOption="icon",cv.prototype.iconOverridePrefix="fc-icon-";let MS={};function RS(n){for(let i in n)if(n[i].isFetching)return!0;return!1}function OS(n,i,e,r){let a={};for(let o of i)a[o.sourceId]=o;return e&&(a=LS(a,e,r)),Object.assign(Object.assign({},n),a)}function LS(n,i,e){return KC(n,f_(n,r=>function nB(n,i,e){return FS(n,e)?!e.options.lazyFetching||!n.fetchRange||n.isFetching||i.start<n.fetchRange.start||i.end>n.fetchRange.end:!n.latestFetchId}(r,i,e)),i,!1,e)}function KC(n,i,e,r,a){let o={};for(let d in n){let p=n[d];o[d]=i[d]?rB(p,e,r,a):p}return o}function rB(n,i,e,r){let{options:a,calendarApi:o}=r,d=r.pluginHooks.eventSourceDefs[n.sourceDefId],p=u_();return d.fetch({eventSource:n,range:i,isRefetch:e,context:r},D=>{let{rawEvents:P}=D;a.eventSourceSuccess&&(P=a.eventSourceSuccess.call(o,P,D.response)||P),n.success&&(P=n.success.call(o,P,D.response)||P),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:p,fetchRange:i,rawEvents:P})},D=>{let P=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(o,D),P=!0),n.failure&&(n.failure(D),P=!0),P||console.warn(D.message,D),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:p,fetchRange:i,error:D})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:p})}function PS(n,i){return f_(n,e=>FS(e,i))}function FS(n,i){return!i.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function oB(n,i){switch(i.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return i.selection;default:return n}}function lB(n,i){switch(i.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return i.eventInstanceId;default:return n}}function cB(n,i){let e;switch(i.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return n}}function uB(n,i){let e;switch(i.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return e=i.state,{affectedEvents:e.affectedEvents,mutatedEvents:e.mutatedEvents,isEvent:e.isEvent};default:return n}}function dB(n,i,e,r,a){return{header:n.headerToolbar?BS(n.headerToolbar,n,i,e,r,a):null,footer:n.footerToolbar?BS(n.footerToolbar,n,i,e,r,a):null}}function BS(n,i,e,r,a,o){let d={},p=[],D=!1;for(let P in n){let te=hB(n[P],i,e,r,a,o);d[P]=te.widgets,p.push(...te.viewsWithButtons),D=D||te.hasTitle}return{sectionWidgets:d,viewsWithButtons:p,hasTitle:D}}function hB(n,i,e,r,a,o){let d="rtl"===i.direction,p=i.customButtons||{},D=e.buttonText||{},P=i.buttonText||{},B=e.buttonHints||{},te=i.buttonHints||{},ae=n?n.split(" "):[],oe=[],ge=!1;return{widgets:ae.map(Te=>Te.split(",").map(qe=>{if("title"===qe)return ge=!0,{buttonName:qe};let ht,ut,mi,zi,vi,Vt;if(ht=p[qe])mi=wi=>{ht.click&&ht.click.call(wi.target,wi,wi.target)},(zi=r.getCustomButtonIconClass(ht))||(zi=r.getIconClass(qe,d))||(vi=ht.text),Vt=ht.hint||ht.text;else if(ut=a[qe]){oe.push(qe),mi=()=>{o.changeView(qe)},(vi=ut.buttonTextOverride)||(zi=r.getIconClass(qe,d))||(vi=ut.buttonTextDefault);let wi=ut.buttonTextOverride||ut.buttonTextDefault;Vt=tx(ut.buttonTitleOverride||ut.buttonTitleDefault||i.viewHint,[wi,qe],wi)}else if(o[qe])if(mi=()=>{o[qe]()},(vi=D[qe])||(zi=r.getIconClass(qe,d))||(vi=P[qe]),"prevYear"===qe||"nextYear"===qe){let wi="prevYear"===qe?"prev":"next";Vt=tx(B[wi]||te[wi],[P.year||"year","year"],P[qe])}else Vt=wi=>tx(B[qe]||te[qe],[P[wi]||wi,wi],P[qe]);return{buttonName:qe,buttonClick:mi,buttonIcon:zi,buttonText:vi,buttonHint:Vt}})),viewsWithButtons:oe,hasTitle:ge}}class fB{constructor(i,e,r){this.type=i,this.getCurrentData=e,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(i){return this.getCurrentData().options[i]}}const pB=jm({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:n=>Array.isArray(n.events)?n.events:null,fetch(n,i){i({rawEvents:n.eventSource.meta})}}]}),mB=jm({name:"func-event-source",eventSourceDefs:[{parseMeta:n=>"function"==typeof n.events?n.events:null,fetch(n,i,e){const{dateEnv:r}=n.context;!function IF(n,i,e){let r=!1,a=function(p){r||(r=!0,i(p))},o=function(p){r||(r=!0,e(p))},d=n(a,o);d&&"function"==typeof d.then&&d.then(a,o)}(n.eventSource.meta.bind(null,ZT(n.range,r)),o=>i({rawEvents:o}),e)}}]}),gB=jm({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:wn,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:n=>!n.url||"json"!==n.format&&n.format?null:{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam},fetch(n,i,e){const{meta:r}=n.eventSource,a=function vB(n,i,e){let o,d,p,D,{dateEnv:r,options:a}=e,P={};return o=n.startParam,null==o&&(o=a.startParam),d=n.endParam,null==d&&(d=a.endParam),p=n.timeZoneParam,null==p&&(p=a.timeZoneParam),D="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},Object.assign(P,D),P[o]=r.formatIso(i.start),P[d]=r.formatIso(i.end),"local"!==r.timeZone&&(P[p]=r.timeZone),P}(r,n.range,n.context);(function MF(n,i,e){const r={method:n=n.toUpperCase()};return"GET"===n?i+=(-1===i.indexOf("?")?"?":"&")+new URLSearchParams(e):(r.body=new URLSearchParams(e),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(i,r).then(a=>{if(a.ok)return a.json().then(o=>[o,a],()=>{throw new JT("Failure parsing JSON",a)});throw new JT("Request failed",a)})})(r.method,r.url,a).then(([o,d])=>{i({rawEvents:o,response:d})},e)}}]}),_B=jm({name:"simple-recurring-event",recurringTypes:[{parse(n,i){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let r,e={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?i.createMarker(n.startRecur):null,endRecur:n.endRecur?i.createMarker(n.endRecur):null};return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=function Y3(n,i){return{years:n.years-i.years,months:n.months-i.months,days:n.days-i.days,milliseconds:n.milliseconds-i.milliseconds}}(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:r,typeData:e}}return null},expand(n,i,e){let r=lv(i,{start:n.startRecur,end:n.endRecur});return r?function yB(n,i,e,r){let a=n?ET(n):null,o=Ml(e.start),d=e.end,p=[];for(;o<d;){let D;(!a||a[o.getUTCDay()])&&(D=i?r.add(o,i):o,p.push(D)),o=Md(o,1)}return p}(n.daysOfWeek,n.startTime,r,e):[]}}],eventRefiners:{daysOfWeek:wn,startTime:mo,endTime:mo,duration:mo,startRecur:wn,endRecur:wn}}),xB=jm({name:"change-handler",optionChangeHandlers:{events(n,i){NS([n],i)},eventSources:NS}});function NS(n,i){let e=uC(i.getCurrentData().eventSources);if(1===e.length&&1===n.length&&Array.isArray(e[0]._raw)&&Array.isArray(n[0]))return void i.dispatch({type:"RESET_RAW_EVENTS",sourceId:e[0].sourceId,rawEvents:n[0]});let r=[];for(let a of n){let o=!1;for(let d=0;d<e.length;d+=1)if(e[d]._raw===a){e.splice(d,1),o=!0;break}o||r.push(a)}for(let a of e)i.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of r)i.calendarApi.addEventSource(a)}const CB=[pB,mB,gB,_B,xB,jm({name:"misc",isLoadingFuncs:[n=>RS(n.eventSources)],propSetHandlers:{dateProfile:function bB(n,i){i.emitter.trigger("datesSet",Object.assign(Object.assign({},ZT(n.activeRange,i.dateEnv)),{view:i.viewApi}))},eventStore:function wB(n,i){let{emitter:e}=i;e.hasHandlers("eventsSet")&&e.trigger("eventsSet",m_(n,i))}}})];class EB{constructor(i,e){this.runTaskOption=i,this.drainedOption=e,this.queue=[],this.delayedRunner=new Qw(this.drain.bind(this))}request(i,e){this.queue.push(i),this.delayedRunner.request(e)}pause(i){this.delayedRunner.pause(i)}resume(i,e){this.delayedRunner.resume(i,e)}drain(){let{queue:i}=this;for(;i.length;){let r,e=[];for(;r=i.shift();)this.runTask(r),e.push(r);this.drained(e)}}runTask(i){this.runTaskOption&&this.runTaskOption(i)}drained(i){this.drainedOption&&this.drainedOption(i)}}function kB(n,i,e){let r;return r=/^(year|month)$/.test(n.currentRangeUnit)?n.currentRange:n.activeRange,e.formatRange(r.start,r.end,vc(i.titleFormat||function TB(n){let{currentRangeUnit:i}=n;if("year"===i)return{year:"numeric"};if("month"===i)return{year:"numeric",month:"long"};let e=gb(n.currentRange.start,n.currentRange.end);return null!==e&&e>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:i.titleRangeSeparator})}class SB{constructor(i){this.computeCurrentViewData=hs(this._computeCurrentViewData),this.organizeRawLocales=hs(SS),this.buildLocale=hs(qC),this.buildPluginHooks=function G5(){let e,n=[],i=[];return(r,a)=>((!e||!Vm(r,n)||!Vm(a,i))&&(e=function Y5(n,i){let e={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(o){for(let d of o){const p=d.name,D=e[p];void 0===D?(e[p]=d.id,a(d.deps),r=H5(r,d)):D!==d.id&&console.warn(`Duplicate plugin '${p}'`)}}return n&&a(n),a(i),r}(r,a)),n=r,i=a,e)}(),this.buildDateEnv=hs(DB),this.buildTheme=hs(AB),this.parseToolbars=hs(dB),this.buildViewSpecs=hs(W5),this.buildDateProfileGenerator=vb(IB),this.buildViewApi=hs(MB),this.buildViewUiProps=vb(LB),this.buildEventUiBySource=hs(RB,Um),this.buildEventUiBases=hs(OB),this.parseContextBusinessHours=vb(PB),this.buildTitle=hs(kB),this.emitter=new Mb,this.actionRunner=new EB(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=ae=>{this.actionRunner.request(ae)},this.props=i,this.actionRunner.pause();let e={},r=this.computeOptionsData(i.optionOverrides,e,i.calendarApi),a=r.calendarOptions.initialView||r.pluginHooks.initialView,o=this.computeCurrentViewData(a,r,i.optionOverrides,e);i.calendarApi.currentDataManager=this,this.emitter.setThisContext(i.calendarApi),this.emitter.setOptions(o.options);let d=function U4(n,i){let e=n.initialDate;return null!=e?i.createMarker(e):sx(n.now,i)}(r.calendarOptions,r.dateEnv),p=o.dateProfileGenerator.build(d);qg(p.activeRange,d)||(d=p.currentRange.start);let D={dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let ae of r.pluginHooks.contextInit)ae(D);let P=function Q5(n,i,e){let r=i?i.activeRange:null;return OS({},function sB(n,i){let e=zT(i),r=[].concat(n.eventSources||[]),a=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let o of r){let d=NT(o,i,e);d&&a.push(d)}return a}(n,e),r,e)}(r.calendarOptions,p,D),B={dynamicOptionOverrides:e,currentViewType:a,currentDate:d,dateProfile:p,businessHours:this.parseContextBusinessHours(D),eventSources:P,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(D).selectionConfig},te=Object.assign(Object.assign({},D),B);for(let ae of r.pluginHooks.reducers)Object.assign(B,ae(null,null,te));JC(B,D)&&this.emitter.trigger("loading",!0),this.state=B,this.updateData(),this.actionRunner.resume()}resetOptions(i,e){let{props:r}=this;void 0===e?r.optionOverrides=i:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),i),this.optionsForRefining.push(...e)),(void 0===e||e.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(i){let{props:e,state:r,emitter:a}=this,o=function K5(n,i){return"SET_OPTION"===i.type?Object.assign(Object.assign({},n),{[i.optionName]:i.rawOptionValue}):n}(r.dynamicOptionOverrides,i),d=this.computeOptionsData(e.optionOverrides,o,e.calendarApi),p=function Z5(n,i){return"CHANGE_VIEW_TYPE"===i.type&&(n=i.viewType),n}(r.currentViewType,i),D=this.computeCurrentViewData(p,d,e.optionOverrides,o);e.calendarApi.currentDataManager=this,a.setThisContext(e.calendarApi),a.setOptions(D.options);let P={dateEnv:d.dateEnv,options:d.calendarOptions,pluginHooks:d.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:B,dateProfile:te}=r;this.data&&this.data.dateProfileGenerator!==D.dateProfileGenerator&&(te=D.dateProfileGenerator.build(B)),B=function V4(n,i){return"CHANGE_DATE"===i.type?i.dateMarker:n}(B,i),te=function J5(n,i,e,r){let a;switch(i.type){case"CHANGE_VIEW_TYPE":return r.build(i.dateMarker||e);case"CHANGE_DATE":return r.build(i.dateMarker);case"PREV":if(a=r.buildPrev(n,e),a.isValid)return a;break;case"NEXT":if(a=r.buildNext(n,e),a.isValid)return a}return n}(te,i,B,D.dateProfileGenerator),("PREV"===i.type||"NEXT"===i.type||!qg(te.currentRange,B))&&(B=te.currentRange.start);let ae=function eB(n,i,e,r){let a=e?e.activeRange:null;switch(i.type){case"ADD_EVENT_SOURCES":return OS(n,i.sources,a,r);case"REMOVE_EVENT_SOURCE":return function iB(n,i){return f_(n,e=>e.sourceId!==i)}(n,i.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return e?LS(n,a,r):n;case"FETCH_EVENT_SOURCES":return KC(n,i.sourceIds?ET(i.sourceIds):PS(n,r),a,i.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function aB(n,i,e,r){let a=n[i];return a&&e===a.latestFetchId?Object.assign(Object.assign({},n),{[i]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:r})}):n}(n,i.sourceId,i.fetchId,i.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}(r.eventSources,i,te,P),oe=function nF(n,i,e,r,a){switch(i.type){case"RECEIVE_EVENTS":return function rF(n,i,e,r,a,o){if(i&&e===i.latestFetchId){let d=ox(YT(a,i,o),i,o);return r&&(d=p_(d,r,o)),wC(VT(n,i.sourceId),d)}return n}(n,e[i.sourceId],i.fetchId,i.fetchRange,i.rawEvents,a);case"RESET_RAW_EVENTS":return function aF(n,i,e,r,a){const{defIdMap:o,instanceIdMap:d}=function lF(n){const{defs:i,instances:e}=n,r={},a={};for(let o in i){const d=i[o],{publicId:p}=d;p&&(r[p]=o)}for(let o in e){const p=i[e[o].defId],{publicId:D}=p;D&&(a[D]=o)}return{defIdMap:r,instanceIdMap:a}}(n);return p_(ox(YT(e,i,a),i,a,!1,o,d),r,a)}(n,e[i.sourceId],i.rawEvents,r.activeRange,a);case"ADD_EVENTS":return function sF(n,i,e,r){return e&&(i=p_(i,e,r)),wC(n,i)}(n,i.eventStore,r?r.activeRange:null,a);case"RESET_EVENTS":return i.eventStore;case"MERGE_EVENTS":return wC(n,i.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?p_(n,r.activeRange,a):n;case"REMOVE_EVENTS":return function K4(n,i){let{defs:e,instances:r}=n,a={},o={};for(let d in e)i.defs[d]||(a[d]=e[d]);for(let d in r)!i.instances[d]&&a[r[d].defId]&&(o[d]=r[d]);return{defs:a,instances:o}}(n,i.eventStore);case"REMOVE_EVENT_SOURCE":return VT(n,i.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Db(n,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return n}}(r.eventStore,i,ae,te,P),ue=RS(ae)&&!D.options.progressiveEventRendering&&r.renderableEventStore||oe,{eventUiSingleBase:Te,selectionConfig:qe}=this.buildViewUiProps(P),ht=this.buildEventUiBySource(ae),mi={dynamicOptionOverrides:o,currentViewType:p,currentDate:B,dateProfile:te,eventSources:ae,eventStore:oe,renderableEventStore:ue,selectionConfig:qe,eventUiBases:this.buildEventUiBases(ue.defs,Te,ht),businessHours:this.parseContextBusinessHours(P),dateSelection:oB(r.dateSelection,i),eventSelection:lB(r.eventSelection,i),eventDrag:cB(r.eventDrag,i),eventResize:uB(r.eventResize,i)},zi=Object.assign(Object.assign({},P),mi);for(let wi of d.pluginHooks.reducers)Object.assign(mi,wi(r,i,zi));let vi=JC(r,P),Vt=JC(mi,P);!vi&&Vt?a.trigger("loading",!0):vi&&!Vt&&a.trigger("loading",!1),this.state=mi,e.onAction&&e.onAction(i)}updateData(){let{props:i,state:e}=this,r=this.data,a=this.computeOptionsData(i.optionOverrides,e.dynamicOptionOverrides,i.calendarApi),o=this.computeCurrentViewData(e.currentViewType,a,i.optionOverrides,e.dynamicOptionOverrides),d=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(e.dateProfile,o.options,a.dateEnv),calendarApi:i.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),o),e),p=a.pluginHooks.optionChangeHandlers,D=r&&r.calendarOptions,P=a.calendarOptions;if(D&&D!==P){D.timeZone!==P.timeZone&&(e.eventSources=d.eventSources=function tB(n,i,e){let r=i?i.activeRange:null;return KC(n,PS(n,e),r,!0,e)}(d.eventSources,e.dateProfile,d),e.eventStore=d.eventStore=HT(d.eventStore,r.dateEnv,d.dateEnv),e.renderableEventStore=d.renderableEventStore=HT(d.renderableEventStore,r.dateEnv,d.dateEnv));for(let B in p)(-1!==this.optionsForHandling.indexOf(B)||D[B]!==P[B])&&p[B](P[B],d)}this.optionsForHandling=[],i.onData&&i.onData(d)}computeOptionsData(i,e,r){if(!this.optionsForRefining.length&&i===this.stableOptionOverrides&&e===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:o,localeDefaults:d,availableLocaleData:p,extra:D}=this.processRawCalendarOptions(i,e);zS(D);let P=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,o,p,a.defaultRangeSeparator),B=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,d),te=this.buildTheme(a,o),ae=this.parseToolbars(a,this.stableOptionOverrides,te,B,r);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:o,dateEnv:P,viewSpecs:B,theme:te,toolbarConfig:ae,localeDefaults:d,availableRawLocales:p.map}}processRawCalendarOptions(i,e){let{locales:r,locale:a}=lC([nx,i,e]),o=this.organizeRawLocales(r),p=this.buildLocale(a||o.defaultCode,o.map).options,D=this.buildPluginHooks(i.plugins||[],CB),P=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},bT),wT),CT),D.listenerRefiners),D.optionRefiners),B={},te=lC([nx,p,i,e]),ae={},oe=this.currentCalendarOptionsInput,ge=this.currentCalendarOptionsRefined,ue=!1;for(let Te in te)-1===this.optionsForRefining.indexOf(Te)&&(te[Te]===oe[Te]||d_[Te]&&Te in oe&&d_[Te](oe[Te],te[Te]))?ae[Te]=ge[Te]:P[Te]?(ae[Te]=P[Te](te[Te]),ue=!0):B[Te]=oe[Te];return ue&&(this.currentCalendarOptionsInput=te,this.currentCalendarOptionsRefined=ae,this.stableOptionOverrides=i,this.stableDynamicOptionOverrides=e),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:D,availableLocaleData:o,localeDefaults:p,extra:B}}_computeCurrentViewData(i,e,r,a){let o=e.viewSpecs[i];if(!o)throw new Error(`viewType "${i}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:d,extra:p}=this.processRawViewOptions(o,e.pluginHooks,e.localeDefaults,r,a);return zS(p),{viewSpec:o,options:d,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:e.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:d.slotMinTime,slotMaxTime:d.slotMaxTime,showNonCurrentDates:d.showNonCurrentDates,dayCount:d.dayCount,dateAlignment:d.dateAlignment,dateIncrement:d.dateIncrement,hiddenDays:d.hiddenDays,weekends:d.weekends,nowInput:d.now,validRangeInput:d.validRange,visibleRangeInput:d.visibleRange,fixedWeekCount:d.fixedWeekCount}),viewApi:this.buildViewApi(i,this.getCurrentData,e.dateEnv)}}processRawViewOptions(i,e,r,a,o){let d=lC([nx,i.optionDefaults,r,a,i.optionOverrides,o]),p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},bT),wT),CT),y4),e.listenerRefiners),e.optionRefiners),D={},P=this.currentViewOptionsInput,B=this.currentViewOptionsRefined,te=!1,ae={};for(let oe in d)d[oe]===P[oe]||d_[oe]&&d_[oe](d[oe],P[oe])?D[oe]=B[oe]:(d[oe]===this.currentCalendarOptionsInput[oe]||d_[oe]&&d_[oe](d[oe],this.currentCalendarOptionsInput[oe])?oe in this.currentCalendarOptionsRefined&&(D[oe]=this.currentCalendarOptionsRefined[oe]):p[oe]?D[oe]=p[oe](d[oe]):ae[oe]=d[oe],te=!0);return te&&(this.currentViewOptionsInput=d,this.currentViewOptionsRefined=D),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:ae}}}function DB(n,i,e,r,a,o,d,p){let D=qC(i||d.defaultCode,d.map);return new A4({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:D,weekNumberCalculation:e,firstDay:r,weekText:a,cmdFormatter:o.cmdFormatter,defaultSeparator:p})}function AB(n,i){return new(i.themeClasses[n.themeSystem]||cv)(n)}function IB(n){return new(n.dateProfileGeneratorClass||RT)(n)}function MB(n,i,e){return new fB(n,i,e)}function RB(n){return $g(n,i=>i.ui)}function OB(n,i,e){let r={"":i};for(let a in n){let o=n[a];o.sourceId&&e[o.sourceId]&&(r[a]=e[o.sourceId])}return r}function LB(n){let{options:i}=n;return{eventUiSingleBase:Ib({display:i.eventDisplay,editable:i.editable,startEditable:i.eventStartEditable,durationEditable:i.eventDurationEditable,constraint:i.eventConstraint,overlap:"boolean"==typeof i.eventOverlap?i.eventOverlap:void 0,allow:i.eventAllow,backgroundColor:i.eventBackgroundColor,borderColor:i.eventBorderColor,textColor:i.eventTextColor,color:i.eventColor},n),selectionConfig:Ib({constraint:i.selectConstraint,overlap:"boolean"==typeof i.selectOverlap?i.selectOverlap:void 0,allow:i.selectAllow},n)}}function JC(n,i){for(let e of i.pluginHooks.isLoadingFuncs)if(e(n))return!0;return!1}function PB(n){return function hF(n,i){return ox(function fF(n){let i;return i=!0===n?[{}]:Array.isArray(n)?n.filter(e=>e.daysOfWeek):"object"==typeof n&&n?[n]:[],i=i.map(e=>Object.assign(Object.assign({},dF),e)),i}(n),null,i)}(n.options.businessHours,n)}function zS(n,i){for(let e in n)console.warn(`Unknown option '${e}'`+(i?` for view '${i}'`:""))}class FB extends Ko{render(){return si("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(e=>this.renderWidgetGroup(e)))}renderWidgetGroup(i){let{props:e}=this,{theme:r}=this.context,a=[],o=!0;for(let d of i){let{buttonName:p,buttonClick:D,buttonText:P,buttonIcon:B,buttonHint:te}=d;if("title"===p)o=!1,a.push(si("h2",{className:"fc-toolbar-title",id:e.titleId},e.title));else{let ae=p===e.activeButton,oe=!e.isTodayEnabled&&"today"===p||!e.isPrevEnabled&&"prev"===p||!e.isNextEnabled&&"next"===p,ge=[`fc-${p}-button`,r.getClass("button")];ae&&ge.push(r.getClass("buttonActive")),a.push(si("button",{type:"button",title:"function"==typeof te?te(e.navUnit):te,disabled:oe,"aria-pressed":ae,className:ge.join(" "),onClick:D},P||(B?si("span",{className:B,role:"img"}):"")))}}return a.length>1?si("div",{className:o&&r.getClass("buttonGroup")||""},...a):a[0]}}class YS extends Ko{render(){let a,o,{model:i,extraClassName:e}=this.props,r=!1,d=i.sectionWidgets,p=d.center;return d.left?(r=!0,a=d.left):a=d.start,d.right?(r=!0,o=d.right):o=d.end,si("div",{className:[e||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",p||[]),this.renderSection("end",o||[]))}renderSection(i,e){let{props:r}=this;return si(FB,{key:i,widgetGroups:e,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class BB extends Ko{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=i=>{this.el=i,Xg(this.props.elRef,i),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:i,state:e}=this,{aspectRatio:r}=i,o="",d="";return r?null!==e.availableWidth?o=e.availableWidth/r:d=1/r*100+"%":o=i.height||"",si("div",{"aria-labelledby":i.labeledById,ref:this.handleEl,className:["fc-view-harness",r||i.liquid||i.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:o,paddingBottom:d}},i.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class NB extends Cy{constructor(i){super(i),this.handleSegClick=(e,r)=>{let{component:a}=this,{context:o}=a,d=wy(r);if(d&&a.isValidSegDownEl(e.target)){let p=_h(e.target,".fc-event-forced-url"),D=p?p.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:r,event:new Rc(a.context,d.eventRange.def,d.eventRange.instance),jsEvent:e,view:o.viewApi}),D&&!e.defaultPrevented&&(window.location.href=D)}},this.destroy=aT(i.el,"click",".fc-event",this.handleSegClick)}}class zB extends Cy{constructor(i){super(i),this.handleEventElRemove=e=>{e===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(e,r)=>{wy(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",e,r))},this.handleSegLeave=(e,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",e,r))},this.removeHoverListeners=function k3(n,i,e,r){let a;return aT(n,"mouseover",i,(o,d)=>{if(d!==a){a=d,e(o,d);let p=D=>{a=null,r(D,d),d.removeEventListener("mouseleave",p)};d.addEventListener("mouseleave",p)}})}(i.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(i,e,r){let{component:a}=this,{context:o}=a,d=wy(r);(!e||a.isValidSegDownEl(e.target))&&o.emitter.trigger(i,{el:r,event:new Rc(o,d.eventRange.def,d.eventRange.instance),jsEvent:e,view:o.viewApi})}}class YB extends kb{constructor(){super(...arguments),this.buildViewContext=hs(R4),this.buildViewPropTransformers=hs(HB),this.buildToolbarProps=hs(GB),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:nv()},this.registerInteractiveComponent=(i,e)=>{let r=function LF(n,i){return{component:n,el:i.el,useEventCenter:null==i.useEventCenter||i.useEventCenter,isHitComboAllowed:i.isHitComboAllowed||null}}(i,e),d=[NB,zB].concat(this.props.pluginHooks.componentInteractions).map(p=>new p(r));this.interactionsStore[i.uid]=d,IC[i.uid]=r},this.unregisterInteractiveComponent=i=>{let e=this.interactionsStore[i.uid];if(e){for(let r of e)r.destroy();delete this.interactionsStore[i.uid]}delete IC[i.uid]},this.resizeRunner=new Qw(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=i=>{let{options:e}=this.props;e.handleWindowResize&&i.target===window&&this.resizeRunner.request(e.windowResizeDelay)}}render(){let p,{props:i}=this,{toolbarConfig:e,options:r}=i,a=this.buildToolbarProps(i.viewSpec,i.dateProfile,i.dateProfileGenerator,i.currentDate,sx(i.options.now,i.dateEnv),i.viewTitle),o=!1,d="";i.isHeightAuto||i.forPrint?d="":null!=r.height?o=!0:null!=r.contentHeight?d=r.contentHeight:p=Math.max(r.aspectRatio,.5);let D=this.buildViewContext(i.viewSpec,i.viewApi,i.options,i.dateProfileGenerator,i.dateEnv,i.theme,i.pluginHooks,i.dispatch,i.getCurrentData,i.emitter,i.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),P=e.header&&e.header.hasTitle?this.state.viewLabelId:void 0;return si(Wg.Provider,{value:D},e.header&&si(YS,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:e.header,titleId:P},a)),si(BB,{liquid:o,height:d,aspectRatio:p,labeledById:P},this.renderView(i),this.buildAppendContent()),e.footer&&si(YS,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:e.footer,titleId:""},a)))}componentDidMount(){let{props:i}=this;this.calendarInteractions=i.pluginHooks.calendarInteractions.map(r=>new r(i)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:e}=i.pluginHooks;for(let r in e)e[r](i[r],i)}componentDidUpdate(i){let{props:e}=this,{propSetHandlers:r}=e.pluginHooks;for(let a in r)e[a]!==i[a]&&r[a](e[a],e)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let i of this.calendarInteractions)i.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:i}=this;return si(dl,{},...i.pluginHooks.viewContainerAppends.map(r=>r(i)))}renderView(i){let{pluginHooks:e}=i,{viewSpec:r}=i,a={dateProfile:i.dateProfile,businessHours:i.businessHours,eventStore:i.renderableEventStore,eventUiBases:i.eventUiBases,dateSelection:i.dateSelection,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,isHeightAuto:i.isHeightAuto,forPrint:i.forPrint},o=this.buildViewPropTransformers(e.viewPropsTransformers);for(let p of o)Object.assign(a,p.transform(a,i));return si(r.component,Object.assign({},a))}}function GB(n,i,e,r,a,o){let d=e.build(a,void 0,!1),p=e.buildPrev(i,r,!1),D=e.buildNext(i,r,!1);return{title:o,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:d.isValid&&!qg(i.currentRange,a),isPrevEnabled:p.isValid,isNextEnabled:D.isValid}}function HB(n){return n.map(i=>new i)}class VB extends PF{constructor(i,e={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Eb(()=>{tv(si(OF,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(a,o,d,p)=>(this.setClassNames(a),this.setHeight(o),si(DT.Provider,{value:this.customContentRenderId},si(YB,Object.assign({isHeightAuto:d,forPrint:p},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,tv(null,this.el),this.setClassNames([]),this.setHeight(""))},function v3(n){n.isConnected&&n.getRootNode&&Qk(n.getRootNode())}(i),this.el=i,this.renderRunner=new Qw(this.handleRenderRequest),new SB({optionOverrides:e,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let i=this.isRendering;i?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),i&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Eb(()=>{super.updateSize()})}batchRendering(i){this.renderRunner.pause("batchRendering"),i(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(i,e){this.currentDataManager.resetOptions(i,e)}setClassNames(i){if(!Vm(i,this.currentClassNames)){let{classList:e}=this.el;for(let r of this.currentClassNames)e.remove(r);for(let r of i)e.add(r);this.currentClassNames=i}}setHeight(i){iT(this.el,"height",i)}}GC.touchMouseIgnoreWait=500;let QC=0,zb=0,e2=!1;class t2{constructor(i){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=e=>{if(!this.shouldIgnoreMouse()&&function UB(n){return 0===n.button&&!n.ctrlKey}(e)&&this.tryStart(e)){let r=this.createEventFromMouse(e,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=e=>{let r=this.createEventFromMouse(e);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=e=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(e)),this.cleanup()},this.handleTouchStart=e=>{if(this.tryStart(e)){this.isTouchDragging=!0;let r=this.createEventFromTouch(e,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let a=e.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=e=>{let r=this.createEventFromTouch(e);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=e=>{if(this.isDragging){let r=e.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(e)),this.cleanup(),this.isTouchDragging=!1,function jB(){QC+=1,setTimeout(()=>{QC-=1},GC.touchMouseIgnoreWait)}()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=e=>{if(!this.shouldIgnoreMove){let r=window.pageXOffset-this.prevScrollX+this.prevPageX,a=window.pageYOffset-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:e,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:a,deltaX:r-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=i,this.emitter=new Mb,i.addEventListener("mousedown",this.handleMouseDown),i.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),function $B(){zb+=1,1===zb&&window.addEventListener("touchmove",HS,{passive:!1})}()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),function WB(){zb-=1,zb||window.removeEventListener("touchmove",HS,{passive:!1})}()}tryStart(i){let e=this.querySubjectEl(i);return!(!e||this.handleSelector&&!_h(i.target,this.handleSelector)||(this.subjectEl=e,this.isDragging=!0,this.wasTouchScroll=!1,0))}cleanup(){e2=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(i){return this.selector?_h(i.target,this.selector):this.containerEl}shouldIgnoreMouse(){return QC||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(e2=!0)}initScrollWatch(i){this.shouldWatchScroll&&(this.recordCoords(i),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(i){this.shouldWatchScroll&&(this.prevPageX=i.pageX,this.prevPageY=i.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(i,e){let r=0,a=0;return e?(this.origPageX=i.pageX,this.origPageY=i.pageY):(r=i.pageX-this.origPageX,a=i.pageY-this.origPageY),{origEvent:i,isTouch:!1,subjectEl:this.subjectEl,pageX:i.pageX,pageY:i.pageY,deltaX:r,deltaY:a}}createEventFromTouch(i,e){let a,o,r=i.touches,d=0,p=0;return r&&r.length?(a=r[0].pageX,o=r[0].pageY):(a=i.pageX,o=i.pageY),e?(this.origPageX=a,this.origPageY=o):(d=a-this.origPageX,p=o-this.origPageY),{origEvent:i,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:o,deltaX:d,deltaY:p}}}function HS(n){e2&&n.preventDefault()}class XB{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(i,e,r){this.sourceEl=i,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=e-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(i,e){this.deltaX=i-window.pageXOffset-this.origScreenX,this.deltaY=e-window.pageYOffset-this.origScreenY,this.updateElPosition()}setIsVisible(i){i?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=i,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=i)}stop(i,e){let r=()=>{this.cleanup(),e()};i&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(i,e){let r=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();r.style.transition="top "+e+"ms,left "+e+"ms",ex(r,{left:a.left,top:a.top}),function T3(n,i){let e=r=>{i(r),sT.forEach(a=>{n.removeEventListener(a,e)})};sT.forEach(r=>{n.addEventListener(r,e)})}(r,()=>{r.style.transition="",i()})}cleanup(){this.mirrorEl&&(eC(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&ex(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let i=this.sourceElRect,e=this.mirrorEl;return e||(e=this.mirrorEl=this.sourceEl.cloneNode(!0),e.style.userSelect="none",e.style.webkitUserSelect="none",e.classList.add("fc-event-dragging"),ex(e,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:i.right-i.left,height:i.bottom-i.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(e)),e}}class VS extends FC{constructor(i,e){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=i,this.doesListening=e,this.scrollTop=this.origScrollTop=i.getScrollTop(),this.scrollLeft=this.origScrollLeft=i.getScrollLeft(),this.scrollWidth=i.getScrollWidth(),this.scrollHeight=i.getScrollHeight(),this.clientWidth=i.getClientWidth(),this.clientHeight=i.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(i){this.scrollController.setScrollTop(i),this.doesListening||(this.scrollTop=Math.max(Math.min(i,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(i){this.scrollController.setScrollLeft(i),this.doesListening||(this.scrollLeft=Math.max(Math.min(i,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class US extends VS{constructor(i,e){super(new KF(i),e)}getEventTarget(){return this.scrollController.el}computeClientRect(){return qF(this.scrollController.el)}}class qB extends VS{constructor(i){super(new JF,i)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const jS="function"==typeof performance?performance.now:Date.now;class ZB{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let i=this.computeBestEdge(this.pointerScreenX+window.pageXOffset,this.pointerScreenY+window.pageYOffset);if(i){let e=jS();this.handleSide(i,(e-this.msSinceRequest)/1e3),this.requestAnimation(e)}else this.isAnimating=!1}}}start(i,e,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(i,e))}handleMove(i,e){if(this.isEnabled){let r=i-window.pageXOffset,a=e-window.pageYOffset,o=null===this.pointerScreenY?0:a-this.pointerScreenY,d=null===this.pointerScreenX?0:r-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),d<0?this.everMovedLeft=!0:d>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(jS()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let i of this.scrollCaches)i.destroy();this.scrollCaches=null}}requestAnimation(i){this.msSinceRequest=i,requestAnimationFrame(this.animate)}handleSide(i,e){let{scrollCache:r}=i,{edgeThreshold:a}=this,o=a-i.distance,d=o*o/(a*a)*this.maxVelocity*e,p=1;switch(i.name){case"left":p=-1;case"right":r.setScrollLeft(r.getScrollLeft()+d*p);break;case"top":p=-1;case"bottom":r.setScrollTop(r.getScrollTop()+d*p)}}computeBestEdge(i,e){let{edgeThreshold:r}=this,a=null,o=this.scrollCaches||[];for(let d of o){let p=d.clientRect,D=i-p.left,P=p.right-i,B=e-p.top,te=p.bottom-e;D>=0&&P>=0&&B>=0&&te>=0&&(B<=r&&this.everMovedUp&&d.canScrollUp()&&(!a||a.distance>B)&&(a={scrollCache:d,name:"top",distance:B}),te<=r&&this.everMovedDown&&d.canScrollDown()&&(!a||a.distance>te)&&(a={scrollCache:d,name:"bottom",distance:te}),D<=r&&this.everMovedLeft&&d.canScrollLeft()&&(!a||a.distance>D)&&(a={scrollCache:d,name:"left",distance:D}),P<=r&&this.everMovedRight&&d.canScrollRight()&&(!a||a.distance>P)&&(a={scrollCache:d,name:"right",distance:P}))}return a}buildCaches(i){return this.queryScrollEls(i).map(e=>e===window?new qB(!1):new US(e,!1))}queryScrollEls(i){let e=[];for(let r of this.scrollQuery)"object"==typeof r?e.push(r):e.push(...Array.prototype.slice.call(i.getRootNode().querySelectorAll(r)));return e}}class Ty extends rS{constructor(i,e){super(i),this.containerEl=i,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,function S3(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",pb)}(document.body),function A3(n){n.addEventListener("contextmenu",pb)}(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let d,o=this.minDistance,{deltaX:p,deltaY:D}=a;d=p*p+D*D,d>=o*o&&this.handleDistanceSurpassed(a)}this.isDragging&&("scroll"!==a.origEvent.type&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,function D3(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",pb)}(document.body),function I3(n){n.removeEventListener("contextmenu",pb)}(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new t2(i);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),e&&(r.selector=e),this.mirror=new XB,this.autoScroller=new ZB}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(i){"number"==typeof this.delay?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(i)},this.delay):this.handleDelayEnd(i)}handleDelayEnd(i){this.isDelayEnded=!0,this.tryStartDrag(i)}handleDistanceSurpassed(i){this.isDistanceSurpassed=!0,this.tryStartDrag(i)}tryStartDrag(i){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(i.pageX,i.pageY,this.containerEl),this.emitter.trigger("dragstart",i),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll())}tryStopDrag(i){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,i))}stopDrag(i){this.isDragging=!1,this.emitter.trigger("dragend",i)}setIgnoreMove(i){this.pointer.shouldIgnoreMove=i}setMirrorIsVisible(i){this.mirror.setIsVisible(i)}setMirrorNeedsRevert(i){this.mirrorNeedsRevert=i}setAutoScrollEnabled(i){this.autoScroller.isEnabled=i}}class KB{constructor(i){this.origRect=PC(i),this.scrollCaches=iS(i).map(e=>new US(e,!0))}destroy(){for(let i of this.scrollCaches)i.destroy()}computeLeft(){let i=this.origRect.left;for(let e of this.scrollCaches)i+=e.origScrollLeft-e.getScrollLeft();return i}computeTop(){let i=this.origRect.top;for(let e of this.scrollCaches)i+=e.origScrollTop-e.getScrollTop();return i}isWithinClipping(i,e){let r={left:i,top:e};for(let a of this.scrollCaches)if(!JB(a.getEventTarget())&&!FF(r,a.clientRect))return!1;return!0}}function JB(n){let i=n.tagName;return"HTML"===i||"BODY"===i}class ux{constructor(i,e){this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):a.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=e,i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("dragmove",this.handleDragMove),i.emitter.on("pointerup",this.handlePointerUp),i.emitter.on("dragend",this.handleDragEnd),this.dragging=i,this.emitter=new Mb}processFirstCoord(i){let o,e={left:i.pageX,top:i.pageY},r=e,a=i.subjectEl;a instanceof HTMLElement&&(o=PC(a),r=function BF(n,i){return{left:Math.min(Math.max(n.left,i.left),i.right),top:Math.min(Math.max(n.top,i.top),i.bottom)}}(r,o));let d=this.initialHit=this.queryHitForOffset(r.left,r.top);if(d){if(this.useSubjectCenter&&o){let p=eS(o,d.rect);p&&(r=function NF(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}(p))}this.coordAdjust=function zF(n,i){return{left:n.left-i.left,top:n.top-i.top}}(r,e)}else this.coordAdjust={left:0,top:0}}handleMove(i,e){let r=this.queryHitForOffset(i.pageX+this.coordAdjust.left,i.pageY+this.coordAdjust.top);(e||!Yb(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,i))}prepareHits(){this.offsetTrackers=$g(this.droppableStore,i=>(i.component.prepareHits(),new KB(i.el)))}releaseHits(){let{offsetTrackers:i}=this;for(let e in i)i[e].destroy();this.offsetTrackers={}}queryHitForOffset(i,e){let{droppableStore:r,offsetTrackers:a}=this,o=null;for(let d in r){let p=r[d].component,D=a[d];if(D&&D.isWithinClipping(i,e)){let P=D.computeLeft(),B=D.computeTop(),te=i-P,ae=e-B,{origRect:oe}=D,ge=oe.right-oe.left,ue=oe.bottom-oe.top;if(te>=0&&te<ge&&ae>=0&&ae<ue){let Te=p.queryHit(te,ae,ge,ue);Te&&Tb(Te.dateProfile.activeRange,Te.dateSpan.range)&&(!o||Te.layer>o.layer)&&(Te.componentId=d,Te.context=p.context,Te.rect.left+=P,Te.rect.right+=P,Te.rect.top+=B,Te.rect.bottom+=B,o=Te)}}}return o}}function Yb(n,i){return!n&&!i||!!n==!!i&&function TF(n,i){return function Y4(n,i){return(null===n.start?null:n.start.valueOf())===(null===i.start?null:i.start.valueOf())&&(null===n.end?null:n.end.valueOf())===(null===i.end?null:i.end.valueOf())}(n.range,i.range)&&n.allDay===i.allDay&&function SF(n,i){for(let e in i)if("range"!==e&&"allDay"!==e&&n[e]!==i[e])return!1;for(let e in n)if(!(e in i))return!1;return!0}(n,i)}(n.dateSpan,i.dateSpan)}function n2(n,i){let e={};for(let r of i.pluginHooks.datePointTransforms)Object.assign(e,r(n,i));return Object.assign(e,function QB(n,i){return{date:i.toDate(n.range.start),dateStr:i.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}(n,i.dateEnv)),e}let $S=(()=>{class n extends Cy{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=p=>{let D=p.origEvent.target,{component:P,dragging:B}=this,{mirror:te}=B,{options:ae}=P.context,oe=P.context;this.subjectEl=p.subjectEl;let ge=this.subjectSeg=wy(p.subjectEl),Te=(this.eventRange=ge.eventRange).instance.instanceId;this.relevantEvents=bC(oe.getCurrentData().eventStore,Te),B.minDistance=p.isTouch?0:ae.eventDragMinDistance,B.delay=p.isTouch&&Te!==P.props.eventSelection?function aN(n){let{options:i}=n.context,e=i.eventLongPressDelay;return null==e&&(e=i.longPressDelay),e}(P):null,te.parentNode=ae.fixedMirrorParent?ae.fixedMirrorParent:_h(D,".fc"),te.revertDuration=ae.dragRevertDuration;let qe=P.isValidSegDownEl(D)&&!_h(D,".fc-event-resizer");B.setIgnoreMove(!qe),this.isDragging=qe&&p.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=p=>{let D=this.component.context,P=this.eventRange,B=P.instance.instanceId;p.isTouch?B!==this.component.props.eventSelection&&D.dispatch({type:"SELECT_EVENT",eventInstanceId:B}):D.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(D.calendarApi.unselect(p),D.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Rc(D,P.def,P.instance),jsEvent:p.origEvent,view:D.viewApi}))},this.handleHitUpdate=(p,D)=>{if(!this.isDragging)return;let P=this.relevantEvents,B=this.hitDragging.initialHit,te=this.component.context,ae=null,oe=null,ge=null,ue=!1,Te={affectedEvents:P,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(p){ae=p.context;let qe=ae.options;te===ae||qe.editable&&qe.droppable?(oe=function rN(n,i,e){let r=n.dateSpan,a=i.dateSpan,o=r.range.start,d=a.range.start,p={};r.allDay!==a.allDay&&(p.allDay=a.allDay,p.hasEnd=i.context.options.allDayMaintainDuration,a.allDay&&(o=Ml(o)));let D=xy(o,d,n.context.dateEnv,n.componentId===i.componentId?n.largeUnit:null);D.milliseconds&&(p.allDay=!1);let P={datesDelta:D,standardProps:p};for(let B of e)B(P,n,i);return P}(B,p,ae.getCurrentData().pluginHooks.eventDragMutationMassagers),oe&&(ge=EC(P,ae.getCurrentData().eventUiBases,oe,ae),Te.mutatedEvents=ge,hS(Te,p.dateProfile,ae)||(ue=!0,oe=null,ge=null,Te.mutatedEvents={defs:{},instances:{}}))):ae=null}this.displayDrag(ae,Te),ue?tC():iC(),D||(te===ae&&Yb(B,p)&&(oe=null),this.dragging.setMirrorNeedsRevert(!oe),this.dragging.setMirrorIsVisible(!p||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=ae,this.validMutation=oe,this.mutatedRelevantEvents=ge)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=p=>{if(this.isDragging){let D=this.component.context,P=D.viewApi,{receivingContext:B,validMutation:te}=this,ae=this.eventRange.def,oe=this.eventRange.instance,ge=new Rc(D,ae,oe),ue=this.relevantEvents,Te=this.mutatedRelevantEvents,{finalHit:qe}=this.hitDragging;if(this.clearDrag(),D.emitter.trigger("eventDragStop",{el:this.subjectEl,event:ge,jsEvent:p.origEvent,view:P}),te){if(B===D){let ht=new Rc(D,Te.defs[ae.defId],oe?Te.instances[oe.instanceId]:null);D.dispatch({type:"MERGE_EVENTS",eventStore:Te});let ut={oldEvent:ge,event:ht,relatedEvents:m_(Te,D,oe),revert(){D.dispatch({type:"MERGE_EVENTS",eventStore:ue})}},mi={};for(let zi of D.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(mi,zi(te,D));D.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},ut),mi),{el:p.subjectEl,delta:te.datesDelta,jsEvent:p.origEvent,view:P})),D.emitter.trigger("eventChange",ut)}else if(B){let ht={event:ge,relatedEvents:m_(ue,D,oe),revert(){D.dispatch({type:"MERGE_EVENTS",eventStore:ue})}};D.emitter.trigger("eventLeave",Object.assign(Object.assign({},ht),{draggedEl:p.subjectEl,view:P})),D.dispatch({type:"REMOVE_EVENTS",eventStore:ue}),D.emitter.trigger("eventRemove",ht);let mi=Te.instances[oe.instanceId],zi=new Rc(B,Te.defs[ae.defId],mi);B.dispatch({type:"MERGE_EVENTS",eventStore:Te});let vi={event:zi,relatedEvents:m_(Te,B,mi),revert(){B.dispatch({type:"REMOVE_EVENTS",eventStore:Te})}};B.emitter.trigger("eventAdd",vi),p.isTouch&&B.dispatch({type:"SELECT_EVENT",eventInstanceId:oe.instanceId}),B.emitter.trigger("drop",Object.assign(Object.assign({},n2(qe.dateSpan,B)),{draggedEl:p.subjectEl,jsEvent:p.origEvent,view:qe.context.viewApi})),B.emitter.trigger("eventReceive",Object.assign(Object.assign({},vi),{draggedEl:p.subjectEl,view:qe.context.viewApi}))}}else D.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:a}=r.context,o=this.dragging=new Ty(e.el);o.pointer.selector=n.SELECTOR,o.touchScrollAllowed=!1,o.autoScroller.isEnabled=a.dragScroll;let d=this.hitDragging=new ux(this.dragging,IC);d.useSubjectCenter=e.useEventCenter,d.emitter.on("pointerdown",this.handlePointerDown),d.emitter.on("dragstart",this.handleDragStart),d.emitter.on("hitupdate",this.handleHitUpdate),d.emitter.on("pointerup",this.handlePointerUp),d.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,r){let o=this.receivingContext;o&&o!==e&&o.dispatch(o===this.component.context?{type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}:{type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let e=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e!==r&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return n.SELECTOR=".fc-event-draggable, .fc-event-resizable",n})();const cN={fixedMirrorParent:wn},uN={dateClick:wn,eventDragStart:wn,eventDragStop:wn,eventDrop:wn,eventResizeStart:wn,eventResizeStop:wn,eventResize:wn,drop:wn,eventReceive:wn,eventLeave:wn};GC.dataAttrPrefix="";var mN=jm({name:"@fullcalendar/interaction",componentInteractions:[class eN extends Cy{constructor(i){super(i),this.handlePointerDown=r=>{let{dragging:a}=this;a.setIgnoreMove(!this.component.isValidDateDownEl(r.origEvent.target))},this.handleDragEnd=r=>{let{component:a}=this,{pointer:o}=this.dragging;if(!o.wasTouchScroll){let{initialHit:d,finalHit:p}=this.hitDragging;if(d&&p&&Yb(d,p)){let{context:D}=a,P=Object.assign(Object.assign({},n2(d.dateSpan,D)),{dayEl:d.dayEl,jsEvent:r.origEvent,view:D.viewApi||D.calendarApi.view});D.emitter.trigger("dateClick",P)}}},this.dragging=new Ty(i.el),this.dragging.autoScroller.isEnabled=!1;let e=this.hitDragging=new ux(this.dragging,AC(i));e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},class tN extends Cy{constructor(i){super(i),this.dragSelection=null,this.handlePointerDown=d=>{let{component:p,dragging:D}=this,{options:P}=p.context,B=P.selectable&&p.isValidDateDownEl(d.origEvent.target);D.setIgnoreMove(!B),D.delay=d.isTouch?function iN(n){let{options:i}=n.context,e=i.selectLongPressDelay;return null==e&&(e=i.longPressDelay),e}(p):null},this.handleDragStart=d=>{this.component.context.calendarApi.unselect(d)},this.handleHitUpdate=(d,p)=>{let{context:D}=this.component,P=null,B=!1;if(d){let te=this.hitDragging.initialHit;d.componentId===te.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(te,d)||(P=function nN(n,i,e){let r=n.dateSpan,a=i.dateSpan,o=[r.range.start,r.range.end,a.range.start,a.range.end];o.sort(P3);let d={};for(let p of e){let D=p(n,i);if(!1===D)return null;D&&Object.assign(d,D)}return d.range={start:o[0],end:o[3]},d.allDay=r.allDay,d}(te,d,D.pluginHooks.dateSelectionTransformers)),(!P||!function l5(n,i,e){return!!Tb(i.validRange,n.range)&&fS({dateSelection:n},e)}(P,d.dateProfile,D))&&(B=!0,P=null)}P?D.dispatch({type:"SELECT_DATES",selection:P}):p||D.dispatch({type:"UNSELECT_DATES"}),B?tC():iC(),p||(this.dragSelection=P)},this.handlePointerUp=d=>{this.dragSelection&&(UT(this.dragSelection,d,this.component.context),this.dragSelection=null)};let{component:e}=i,{options:r}=e.context,a=this.dragging=new Ty(i.el);a.touchScrollAllowed=!1,a.minDistance=r.selectMinDistance||0,a.autoScroller.isEnabled=r.dragScroll;let o=this.hitDragging=new ux(this.dragging,AC(i));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}},$S,class sN extends Cy{constructor(i){super(i),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let{component:d}=this,D=wy(this.querySegEl(o)),P=this.eventRange=D.eventRange;this.dragging.minDistance=d.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&this.component.props.eventSelection!==P.instance.instanceId)},this.handleDragStart=o=>{let{context:d}=this.component,p=this.eventRange;this.relevantEvents=bC(d.getCurrentData().eventStore,this.eventRange.instance.instanceId);let D=this.querySegEl(o);this.draggingSegEl=D,this.draggingSeg=wy(D),d.calendarApi.unselect(),d.emitter.trigger("eventResizeStart",{el:D,event:new Rc(d,p.def,p.instance),jsEvent:o.origEvent,view:d.viewApi})},this.handleHitUpdate=(o,d,p)=>{let{context:D}=this.component,P=this.relevantEvents,B=this.hitDragging.initialHit,te=this.eventRange.instance,ae=null,oe=null,ge=!1,ue={affectedEvents:P,mutatedEvents:{defs:{},instances:{}},isEvent:!0};o&&(o.componentId===B.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(B,o)||(ae=function oN(n,i,e,r){let a=n.context.dateEnv,p=xy(n.dateSpan.range.start,i.dateSpan.range.start,a,n.largeUnit);if(e){if(a.add(r.start,p)<r.end)return{startDelta:p}}else if(a.add(r.end,p)>r.start)return{endDelta:p};return null}(B,o,p.subjectEl.classList.contains("fc-event-resizer-start"),te.range))),ae&&(oe=EC(P,D.getCurrentData().eventUiBases,ae,D),ue.mutatedEvents=oe,hS(ue,o.dateProfile,D)||(ge=!0,ae=null,oe=null,ue.mutatedEvents=null)),D.dispatch(oe?{type:"SET_EVENT_RESIZE",state:ue}:{type:"UNSET_EVENT_RESIZE"}),ge?tC():iC(),d||(ae&&Yb(B,o)&&(ae=null),this.validMutation=ae,this.mutatedRelevantEvents=oe)},this.handleDragEnd=o=>{let{context:d}=this.component,p=this.eventRange.def,D=this.eventRange.instance,P=new Rc(d,p,D),B=this.relevantEvents,te=this.mutatedRelevantEvents;if(d.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:P,jsEvent:o.origEvent,view:d.viewApi}),this.validMutation){let ae=new Rc(d,te.defs[p.defId],D?te.instances[D.instanceId]:null);d.dispatch({type:"MERGE_EVENTS",eventStore:te});let oe={oldEvent:P,event:ae,relatedEvents:m_(te,d,D),revert(){d.dispatch({type:"MERGE_EVENTS",eventStore:B})}};d.emitter.trigger("eventResize",Object.assign(Object.assign({},oe),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||mo(0),endDelta:this.validMutation.endDelta||mo(0),jsEvent:o.origEvent,view:d.viewApi})),d.emitter.trigger("eventChange",oe)}else d.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:e}=i,r=this.dragging=new Ty(i.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=e.context.options.dragScroll;let a=this.hitDragging=new ux(this.dragging,AC(i));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(i){return _h(i.subjectEl,".fc-event")}}],calendarInteractions:[class lN{constructor(i){this.context=i,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let a=this.context.options.unselectCancel,o=nT(r.origEvent);this.matchesCancel=!!_h(o,a),this.matchesEvent=!!_h(o,$S.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:a}=this,{documentPointer:o}=this,d=a.getCurrentData();if(!o.wasTouchScroll){if(d.dateSelection&&!this.isRecentPointerDateSelect){let p=a.options.unselectAuto;p&&(!p||!this.matchesCancel)&&a.calendarApi.unselect(r)}d.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let e=this.documentPointer=new t2(document);e.shouldIgnoreMove=!0,e.shouldWatchScroll=!1,e.emitter.on("pointerdown",this.onDocumentPointerDown),e.emitter.on("pointerup",this.onDocumentPointerUp),i.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}],elementDraggingImpl:Ty,optionRefiners:cN,listenerRefiners:uN});class gN extends Jp{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(i,e){let{props:r,context:a}=this,o=[],d=Bb(a.options);return i&&o.push({type:"header",key:"header",isSticky:d,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:e}}),si(ax,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},si(UC,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:o}))}renderHScrollLayout(i,e,r,a){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:d,context:p}=this,D=!d.forPrint&&Bb(p.options),P=!d.forPrint&&vS(p.options),B=[];return i&&B.push({type:"header",key:"header",isSticky:D,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),B.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:e}]}),P&&B.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:VC}]}),si(ax,{elClasses:["fc-daygrid"],viewSpec:p.viewSpec},si(o,{liquid:!d.isHeightAuto&&!d.forPrint,forPrint:d.forPrint,collapsibleWidth:d.forPrint,colGroups:[{cols:[{span:r,minWidth:a}]}],sections:B}))}}function Gb(n,i){let e=[];for(let r=0;r<i;r+=1)e[r]=[];for(let r of n)e[r.row].push(r);return e}function Hb(n,i){let e=[];for(let r=0;r<i;r+=1)e[r]=[];for(let r of n)e[r.firstCol].push(r);return e}function XS(n,i){let e=[];if(n){for(let r=0;r<i;r+=1)e[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)e[r.row].segs.push(r)}else for(let r=0;r<i;r+=1)e[r]=null;return e}const qS=vc({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function ZS(n){let{display:i}=n.eventRange.ui;return"list-item"===i||"auto"===i&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class KS extends Ko{render(){let{props:i}=this;return si(_S,Object.assign({},i,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:qS,defaultDisplayEventEnd:i.defaultDisplayEventEnd,disableResizing:!i.seg.eventRange.def.allDay}))}}class JS extends Ko{render(){let{props:i,context:e}=this,{options:r}=e,{seg:a}=i,d=lx(a,r.eventTimeFormat||qS,e,!0,i.defaultDisplayEventEnd);return si(Nb,Object.assign({},i,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:SC(i.seg,e),defaultGenerator:vN,timeText:d,isResizing:!1,isDateSelecting:!1}))}}function vN(n){return si(dl,null,si("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&si("div",{className:"fc-event-time"},n.timeText),si("div",{className:"fc-event-title"},n.event.title||si(dl,null,"\xa0")))}class _N extends Ko{constructor(){super(...arguments),this.compileSegs=hs(yN)}render(){let{props:i}=this,{allSegs:e,invisibleSegs:r}=this.compileSegs(i.singlePlacements);return si(wS,{elClasses:["fc-daygrid-more-link"],dateProfile:i.dateProfile,todayRange:i.todayRange,allDayDate:i.allDayDate,moreCnt:i.moreCnt,allSegs:e,hiddenSegs:r,alignmentElRef:i.alignmentElRef,alignGridTop:i.alignGridTop,extraDateSpan:i.extraDateSpan,popoverContent:()=>{let a=(i.eventDrag?i.eventDrag.affectedInstances:null)||(i.eventResize?i.eventResize.affectedInstances:null)||{};return si(dl,null,e.map(o=>{let d=o.eventRange.instance.instanceId;return si("div",{className:"fc-daygrid-event-harness",key:d,style:{visibility:a[d]?"hidden":""}},ZS(o)?si(JS,Object.assign({seg:o,isDragging:!1,isSelected:d===i.eventSelection,defaultDisplayEventEnd:!1},Zg(o,i.todayRange))):si(KS,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===i.eventSelection,defaultDisplayEventEnd:!1},Zg(o,i.todayRange))))}))}})}}function yN(n){let i=[],e=[];for(let r of n)i.push(r.seg),r.isVisible||e.push(r.seg);return{allSegs:i,invisibleSegs:e}}const xN=vc({week:"narrow"});class bN extends Jp{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:nv()},this.handleRootEl=i=>{Xg(this.rootElRef,i),Xg(this.props.elRef,i)}}render(){let{context:i,props:e,state:r,rootElRef:a}=this,{options:o,dateEnv:d}=i,{date:p,dateProfile:D}=e;const P=e.showDayNumber&&function CN(n,i,e){const{start:r,end:a}=i,o=rv(a,-1),d=e.getYear(r),p=e.getMonth(r),D=e.getYear(o),P=e.getMonth(o);return!(d===D&&p===P)&&(n.valueOf()===r.valueOf()||1===e.getDay(n)&&n.valueOf()<a.valueOf())}(p,D.currentRange,d);return si($C,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...e.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},e.extraDataAttrs),e.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:wN,date:p,dateProfile:D,todayRange:e.todayRange,showDayNumber:e.showDayNumber,isMonthStart:P,extraRenderProps:e.extraRenderProps},(B,te)=>si("div",{ref:e.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:e.minHeight}},e.showWeekNumber&&si(bS,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Ey(i,p,"week"),date:p,defaultFormat:xN}),!te.isDisabled&&(e.showDayNumber||WC(o)||e.forceDayTop)?si("div",{className:"fc-daygrid-day-top"},si(B,{elTag:"a",elClasses:["fc-daygrid-day-number",P&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Ey(i,p)),{id:r.dayNumberId})})):e.showDayNumber?si("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},si("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,si("div",{className:"fc-daygrid-day-events",ref:e.fgContentElRef},e.fgContent,si("div",{className:"fc-daygrid-day-bottom",style:{marginTop:e.moreMarginTop}},si(_N,{allDayDate:p,singlePlacements:e.singlePlacements,moreCnt:e.moreCnt,alignmentElRef:a,alignGridTop:!e.showDayNumber,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange}))),si("div",{className:"fc-daygrid-day-bg"},e.bgContent)))}}function wN(n){return n.dayNumberText||si(dl,null,"\xa0")}function QS(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function eD(n){return QS(n)+":"+n.lastCol}function Sy(n,i,e,r){if(n.firstCol===i&&n.lastCol===e-1)return n;let a=n.eventRange,o=a.range,d=lv(o,{start:r[i].date,end:Md(r[e-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:i,lastCol:e-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:d},isStart:n.isStart&&d.start.valueOf()===o.start.valueOf(),isEnd:n.isEnd&&d.end.valueOf()===o.end.valueOf()})}class SN extends nS{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(i){const e=super.addSegs(i),{entriesByLevel:r}=this,a=o=>!this.forceHidden[g_(o)];for(let o=0;o<r.length;o+=1)r[o]=r[o].filter(a);return e}handleInvalidInsertion(i,e,r){const{entriesByLevel:a,forceHidden:o}=this,{touchingEntry:d,touchingLevel:p,touchingLateral:D}=i;if(this.hiddenConsumes&&d){const P=g_(d);if(!o[P])if(this.allowReslicing){const B=Object.assign(Object.assign({},d),{span:NC(d.span,e.span)});o[g_(B)]=!0,a[p][D]=B,r.push(B),this.splitEntry(d,e,r)}else o[P]=!0,r.push(d)}super.handleInvalidInsertion(i,e,r)}}class tD extends Jp{constructor(){super(...arguments),this.cellElRefs=new Kg,this.frameElRefs=new Kg,this.fgElRefs=new Kg,this.segHarnessRefs=new Kg,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=i=>{i&&this.updateSizing(!0)}}render(){let{props:i,state:e,context:r}=this,{options:a}=r,o=i.cells.length,d=Hb(i.businessHourSegs,o),p=Hb(i.bgEventSegs,o),D=Hb(this.getHighlightSegs(),o),P=Hb(this.getMirrorSegs(),o),{singleColPlacements:B,multiColPlacements:te,moreCnts:ae,moreMarginTops:oe}=function EN(n,i,e,r,a,o,d){let p=new SN(qe=>a[n[qe.index].eventRange.instance.instanceId+":"+qe.span.start+":"+(qe.span.end-1)]||1);p.allowReslicing=!0,p.strictOrder=r,!0===i||!0===e?(p.maxCoord=o,p.hiddenConsumes=!0):"number"==typeof i?p.maxStackCnt=i:"number"==typeof e&&(p.maxStackCnt=e,p.hiddenConsumes=!0);let D=[],P=[];for(let qe=0;qe<n.length;qe+=1){let ht=n[qe],ut=eD(ht);null!=a[ut]?D.push({index:qe,span:{start:ht.firstCol,end:ht.lastCol+1}}):P.push(ht)}let B=p.addSegs(D),te=p.toRects(),{singleColPlacements:ae,multiColPlacements:oe,leftoverMargins:ge}=function kN(n,i,e){let r=function TN(n,i){let e=[];for(let r=0;r<i;r+=1)e.push([]);for(let r of n)for(let a=r.span.start;a<r.span.end;a+=1)e[a].push(r);return e}(n,e.length),a=[],o=[],d=[];for(let p=0;p<e.length;p+=1){let D=r[p],P=[],B=0,te=0;for(let oe of D)P.push({seg:Sy(i[oe.index],p,p+1,e),isVisible:!0,isAbsolute:!1,absoluteTop:oe.levelCoord,marginTop:oe.levelCoord-B}),B=oe.levelCoord+oe.thickness;let ae=[];B=0,te=0;for(let oe of D){let ge=i[oe.index],Te=oe.span.start===p;te+=oe.levelCoord-B,B=oe.levelCoord+oe.thickness,oe.span.end-oe.span.start>1?(te+=oe.thickness,Te&&ae.push({seg:Sy(ge,oe.span.start,oe.span.end,e),isVisible:!0,isAbsolute:!0,absoluteTop:oe.levelCoord,marginTop:0})):Te&&(ae.push({seg:Sy(ge,oe.span.start,oe.span.end,e),isVisible:!0,isAbsolute:!1,absoluteTop:oe.levelCoord,marginTop:te}),te=0)}a.push(P),o.push(ae),d.push(te)}return{singleColPlacements:a,multiColPlacements:o,leftoverMargins:d}}(te,n,d),ue=[],Te=[];for(let qe of P){oe[qe.firstCol].push({seg:qe,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let ht=qe.firstCol;ht<=qe.lastCol;ht+=1)ae[ht].push({seg:Sy(qe,ht,ht+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let qe=0;qe<d.length;qe+=1)ue.push(0);for(let qe of B){let ht=n[qe.index],ut=qe.span;oe[ut.start].push({seg:Sy(ht,ut.start,ut.end,d),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let mi=ut.start;mi<ut.end;mi+=1)ue[mi]+=1,ae[mi].push({seg:Sy(ht,mi,mi+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let qe=0;qe<d.length;qe+=1)Te.push(ge[qe]);return{singleColPlacements:ae,multiColPlacements:oe,moreCnts:ue,moreMarginTops:Te}}(TC(i.fgEventSegs,a.eventOrder),i.dayMaxEvents,i.dayMaxEventRows,a.eventOrderStrict,e.segHeights,e.maxContentHeight,i.cells),ge=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{};return si("tr",{ref:this.rootElRef,role:"row"},i.renderIntro&&i.renderIntro(),i.cells.map((ue,Te)=>{let qe=this.renderFgSegs(Te,i.forPrint?B[Te]:te[Te],i.todayRange,ge),ht=this.renderFgSegs(Te,function DN(n,i){if(!n.length)return[];let e=function AN(n){let i={};for(let e of n)for(let r of e)i[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return i}(i);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:e[r.eventRange.instance.instanceId],marginTop:0}))}(P[Te],te),i.todayRange,{},!!i.eventDrag,!!i.eventResize,!1);return si(bN,{key:ue.key,elRef:this.cellElRefs.createRef(ue.key),innerElRef:this.frameElRefs.createRef(ue.key),dateProfile:i.dateProfile,date:ue.date,showDayNumber:i.showDayNumbers,showWeekNumber:i.showWeekNumbers&&0===Te,forceDayTop:i.showWeekNumbers,todayRange:i.todayRange,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,extraRenderProps:ue.extraRenderProps,extraDataAttrs:ue.extraDataAttrs,extraClassNames:ue.extraClassNames,extraDateSpan:ue.extraDateSpan,moreCnt:ae[Te],moreMarginTop:oe[Te],singlePlacements:B[Te],fgContentElRef:this.fgElRefs.createRef(ue.key),fgContent:si(dl,null,si(dl,null,qe),si(dl,null,ht)),bgContent:si(dl,null,this.renderFillSegs(D[Te],"highlight"),this.renderFillSegs(d[Te],"non-business"),this.renderFillSegs(p[Te],"bg-event")),minHeight:i.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(i,e){this.updateSizing(!Um(i,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:i}=this;return i.eventDrag&&i.eventDrag.segs.length?i.eventDrag.segs:i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:i.dateSelectionSegs}getMirrorSegs(){let{props:i}=this;return i.eventResize&&i.eventResize.segs.length?i.eventResize.segs:[]}renderFgSegs(i,e,r,a,o,d,p){let{context:D}=this,{eventSelection:P}=this.props,{framePositions:B}=this.state,te=1===this.props.cells.length,ae=o||d||p,oe=[];if(B)for(let ge of e){let{seg:ue}=ge,{instanceId:Te}=ue.eventRange.instance,qe=ge.isVisible&&!a[Te],ht=ge.isAbsolute,ut="",mi="";ht&&(D.isRtl?(mi=0,ut=B.lefts[ue.lastCol]-B.lefts[ue.firstCol]):(ut=0,mi=B.rights[ue.firstCol]-B.rights[ue.lastCol])),oe.push(si("div",{className:"fc-daygrid-event-harness"+(ht?" fc-daygrid-event-harness-abs":""),key:QS(ue),ref:ae?null:this.segHarnessRefs.createRef(eD(ue)),style:{visibility:qe?"":"hidden",marginTop:ht?"":ge.marginTop,top:ht?ge.absoluteTop:"",left:ut,right:mi}},ZS(ue)?si(JS,Object.assign({seg:ue,isDragging:o,isSelected:Te===P,defaultDisplayEventEnd:te},Zg(ue,r))):si(KS,Object.assign({seg:ue,isDragging:o,isResizing:d,isDateSelecting:p,isSelected:Te===P,defaultDisplayEventEnd:te},Zg(ue,r)))))}return oe}renderFillSegs(i,e){let{isRtl:r}=this.context,{todayRange:a}=this.props,{framePositions:o}=this.state,d=[];if(o)for(let p of i){let D=r?{right:0,left:o.lefts[p.lastCol]-o.lefts[p.firstCol]}:{left:0,right:o.rights[p.firstCol]-o.rights[p.lastCol]};d.push(si("div",{key:qT(p.eventRange),className:"fc-daygrid-bg-harness",style:D},"bg-event"===e?si(yS,Object.assign({seg:p},Zg(p,a))):xS(e)))}return si(dl,{},...d)}updateSizing(i){let{props:e,state:r,frameElRefs:a}=this;if(!e.forPrint&&null!==e.clientWidth){if(i){let D=e.cells.map(P=>a.currentMap[P.key]);if(D.length){let P=this.rootElRef.current,B=new ky(P,D,!0,!1);(!r.framePositions||!r.framePositions.similarTo(B))&&this.setState({framePositions:new ky(P,D,!0,!1)})}}const o=this.state.segHeights,d=this.querySegHeights(),p=!0===e.dayMaxEvents||!0===e.dayMaxEventRows;this.safeSetState({segHeights:Object.assign(Object.assign({},o),d),maxContentHeight:p?this.computeMaxContentHeight():null})}}querySegHeights(){let i=this.segHarnessRefs.currentMap,e={};for(let r in i){let a=Math.round(i[r].getBoundingClientRect().height);e[r]=Math.max(e[r]||0,a)}return e}computeMaxContentHeight(){let i=this.props.cells[0].key,r=this.fgElRefs.currentMap[i];return this.cellElRefs.currentMap[i].getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let i=this.cellElRefs.currentMap;return this.props.cells.map(e=>i[e.key])}}tD.addStateEquality({segHeights:Um});class IN extends Jp{constructor(){super(...arguments),this.splitBusinessHourSegs=hs(Gb),this.splitBgEventSegs=hs(Gb),this.splitFgEventSegs=hs(Gb),this.splitDateSelectionSegs=hs(Gb),this.splitEventDrag=hs(XS),this.splitEventResize=hs(XS),this.rowRefs=new Kg}render(){let{props:i,context:e}=this,r=i.cells.length,a=this.splitBusinessHourSegs(i.businessHourSegs,r),o=this.splitBgEventSegs(i.bgEventSegs,r),d=this.splitFgEventSegs(i.fgEventSegs,r),p=this.splitDateSelectionSegs(i.dateSelectionSegs,r),D=this.splitEventDrag(i.eventDrag,r),P=this.splitEventResize(i.eventResize,r),B=r>=7&&i.clientWidth?i.clientWidth/e.options.aspectRatio/6:null;return si(cx,{unit:"day"},(te,ae)=>si(dl,null,i.cells.map((oe,ge)=>si(tD,{ref:this.rowRefs.createRef(ge),key:oe.length?oe[0].date.toISOString():ge,showDayNumbers:r>1,showWeekNumbers:i.showWeekNumbers,todayRange:ae,dateProfile:i.dateProfile,cells:oe,renderIntro:i.renderRowIntro,businessHourSegs:a[ge],eventSelection:i.eventSelection,bgEventSegs:o[ge].filter(MN),fgEventSegs:d[ge],dateSelectionSegs:p[ge],eventDrag:D[ge],eventResize:P[ge],dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,clientWidth:i.clientWidth,clientHeight:i.clientHeight,cellMinHeight:B,forPrint:i.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const i=this.rowRefs.currentMap[0].getCellEls()[0],e=i?i.closest(".fc-daygrid-body"):null;e&&(this.rootEl=e,this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ky(this.rootEl,this.rowRefs.collect().map(i=>i.getCellEls()[0]),!1,!0),this.colPositions=new ky(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(i,e){let{colPositions:r,rowPositions:a}=this,o=r.leftToIndex(i),d=a.topToIndex(e);if(null!=d&&null!=o){let p=this.props.cells[d][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(d,o),allDay:!0},p.extraDateSpan),dayEl:this.getCellEl(d,o),rect:{left:r.lefts[o],right:r.rights[o],top:a.tops[d],bottom:a.bottoms[d]},layer:0}}return null}getCellEl(i,e){return this.rowRefs.currentMap[i].getCellEls()[e]}getCellRange(i,e){let r=this.props.cells[i][e].date;return{start:r,end:Md(r,1)}}}function MN(n){return n.eventRange.def.allDay}class RN extends Jp{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:i}=this,{dayMaxEventRows:e,dayMaxEvents:r,expandRows:a}=i,o=!0===r||!0===e;return o&&!a&&(o=!1,e=null,r=null),si("div",{ref:this.elRef,className:["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"].join(" "),style:{width:i.clientWidth,minWidth:i.tableMinWidth}},si("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:i.clientWidth,minWidth:i.tableMinWidth,height:a?i.clientHeight:""}},i.colGroupNode,si("tbody",{role:"presentation"},si(IN,{dateProfile:i.dateProfile,cells:i.cells,renderRowIntro:i.renderRowIntro,showWeekNumbers:i.showWeekNumbers,clientWidth:i.clientWidth,clientHeight:i.clientHeight,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,dayMaxEvents:r,dayMaxEventRows:e,forPrint:i.forPrint,isHitComboAllowed:i.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(i){i.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const i=function ON(n,i){let e;return i.currentRangeUnit.match(/year|month/)&&(e=n.querySelector(`[data-date="${function t4(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}(i.currentDate)}-01"]`)),e||(e=n.querySelector(`[data-date="${ix(i.currentDate)}"]`)),e}(this.elRef.current,this.props.dateProfile);if(i){const e=i.closest(".fc-daygrid-body"),r=e.closest(".fc-scroller"),a=i.getBoundingClientRect().top-e.getBoundingClientRect().top;r.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}class LN extends dS{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(i,e){return e.sliceRange(i)}}class iD extends Jp{constructor(){super(...arguments),this.slicer=new LN,this.tableRef={current:null}}render(){let{props:i,context:e}=this;return si(RN,Object.assign({ref:this.tableRef},this.slicer.sliceProps(i,i.dateProfile,i.nextDayThreshold,e,i.dayTableModel),{dateProfile:i.dateProfile,cells:i.dayTableModel.cells,colGroupNode:i.colGroupNode,tableMinWidth:i.tableMinWidth,renderRowIntro:i.renderRowIntro,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.showWeekNumbers,expandRows:i.expandRows,headerAlignElRef:i.headerAlignElRef,clientWidth:i.clientWidth,clientHeight:i.clientHeight,forPrint:i.forPrint}))}}function FN(n,i){let e=new cS(n.renderRange,i);return new uS(e,/year|month|week/.test(n.currentRangeUnit))}fb(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');var YN=jm({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class PN extends gN{constructor(){super(...arguments),this.buildDayTableModel=hs(FN),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:i,dateProfileGenerator:e}=this.context,{props:r}=this,a=this.buildDayTableModel(r.dateProfile,e),o=i.dayHeaders&&si(lS,{ref:this.headerRef,dateProfile:r.dateProfile,dates:a.headerDates,datesRepDistinctDays:1===a.rowCnt}),d=p=>si(iD,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:a,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:i.nextDayThreshold,colGroupNode:p.tableColGroupNode,tableMinWidth:p.tableMinWidth,dayMaxEvents:i.dayMaxEvents,dayMaxEventRows:i.dayMaxEventRows,showWeekNumbers:i.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:p.clientWidth,clientHeight:p.clientHeight,forPrint:r.forPrint});return i.dayMinWidth?this.renderHScrollLayout(o,d,a.colCnt,i.dayMinWidth):this.renderSimpleLayout(o,d)}},dateProfileGeneratorClass:class BN extends RT{buildRenderRange(i,e,r){let a=super.buildRenderRange(i,e,r),{props:o}=this;return function NN(n){let o,{dateEnv:i,currentRange:e}=n,{start:r,end:a}=e;if(n.snapToWeek&&(r=i.startOfWeek(r),o=i.startOfWeek(a),o.valueOf()!==a.valueOf()&&(a=fT(o,1))),n.fixedWeekCount){let d=i.startOfWeek(i.startOfMonth(Md(e.end,-1))),p=Math.ceil(function U3(n,i){return av(n,i)/7}(d,a));a=fT(a,6-p)}return{start:r,end:a}}({currentRange:a,snapToWeek:/^(year|month)$/.test(e),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class GN extends YF{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(i){return i.allDay?["allDay"]:["timed"]}getKeysForEventDef(i){return i.allDay?function vF(n){return"background"===n.ui.display||"inverse-background"===n.ui.display}(i)?["timed","allDay"]:["allDay"]:["timed"]}}const HN=vc({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function nD(n){let i=["fc-timegrid-slot","fc-timegrid-slot-label",n.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return si(Wg.Consumer,null,e=>{if(!n.isLabeled)return si("td",{className:i.join(" "),"data-time":n.isoTimeStr});let{dateEnv:r,options:a,viewApi:o}=e,d=null==a.slotLabelFormat?HN:Array.isArray(a.slotLabelFormat)?vc(a.slotLabelFormat[0]):vc(a.slotLabelFormat),p={level:0,time:n.time,date:r.toDate(n.date),view:o,text:r.format(n.date,d)};return si(Gh,{elTag:"td",elClasses:i,elAttrs:{"data-time":n.isoTimeStr},renderProps:p,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:VN,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},D=>si("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},si(D,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function VN(n){return n.text}class UN extends Ko{render(){return this.props.slatMetas.map(i=>si("tr",{key:i.key},si(nD,Object.assign({},i))))}}const jN=vc({week:"short"});class WN extends Jp{constructor(){super(...arguments),this.allDaySplitter=new GN,this.headerElRef={current:null},this.rootElRef={current:null},this.scrollerElRef={current:null},this.state={slatCoords:null},this.handleScrollTopRequest=i=>{let e=this.scrollerElRef.current;e&&(e.scrollTop=i)},this.renderHeadAxis=(i,e="")=>{let{options:r}=this.context,{dateProfile:a}=this.props,o=a.renderRange,p=1===av(o.start,o.end)?Ey(this.context,o.start,"week"):{};return r.weekNumbers&&"day"===i?si(bS,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:o.start,defaultFormat:jN},D=>si("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:e}},si(D,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:p}))):si("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},si("div",{className:"fc-timegrid-axis-frame",style:{height:e}}))},this.renderTableRowAxis=i=>{let{options:e,viewApi:r}=this.context;return si(Gh,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:{text:e.allDayText,view:r},generatorName:"allDayContent",customGenerator:e.allDayContent,defaultGenerator:XN,classNameGenerator:e.allDayClassNames,didMount:e.allDayDidMount,willUnmount:e.allDayWillUnmount},o=>si("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==i?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:i}},si(o,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=i=>{this.setState({slatCoords:i})}}renderSimpleLayout(i,e,r){let{context:a,props:o}=this,d=[],p=Bb(a.options);return i&&d.push({type:"header",key:"header",isSticky:p,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}}),e&&(d.push({type:"body",key:"all-day",chunk:{content:e}}),d.push({type:"body",key:"all-day-divider",outerContent:si("tr",{role:"presentation",className:"fc-scrollgrid-section"},si("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),d.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),si(ax,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},si(UC,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[{width:"shrink"}],sections:d}))}renderHScrollLayout(i,e,r,a,o,d,p){let D=this.context.pluginHooks.scrollGridImpl;if(!D)throw new Error("No ScrollGrid implementation");let{context:P,props:B}=this,te=!B.forPrint&&Bb(P.options),ae=!B.forPrint&&vS(P.options),oe=[];i&&oe.push({type:"header",key:"header",isSticky:te,syncRowHeights:!0,chunks:[{key:"axis",rowContent:ue=>si("tr",{role:"presentation"},this.renderHeadAxis("day",ue.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:i}]}),e&&(oe.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:ue=>si("tr",{role:"presentation"},this.renderTableRowAxis(ue.rowSyncHeights[0]))},{key:"cols",content:e}]}),oe.push({key:"all-day-divider",type:"body",outerContent:si("tr",{role:"presentation",className:"fc-scrollgrid-section"},si("td",{colSpan:2,className:"fc-timegrid-divider "+P.theme.getClass("tableCellShaded")}))}));let ge=P.options.nowIndicator;return oe.push({type:"body",key:"body",liquid:!0,expandRows:!!P.options.expandRows,chunks:[{key:"axis",content:ue=>si("div",{className:"fc-timegrid-axis-chunk"},si("table",{"aria-hidden":!0,style:{height:ue.expandRows?ue.clientHeight:""}},ue.tableColGroupNode,si("tbody",null,si(UN,{slatMetas:d}))),si("div",{className:"fc-timegrid-now-indicator-container"},si(cx,{unit:ge?"minute":"day"},Te=>{let qe=ge&&p&&p.safeComputeTop(Te);return"number"==typeof qe?si(jC,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:qe},isAxis:!0,date:Te}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),ae&&oe.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:VC},{key:"cols",content:VC}]}),si(ax,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:P.viewSpec},si(D,{liquid:!B.isHeightAuto&&!B.forPrint,forPrint:B.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:o}]}],sections:oe}))}getAllDayMaxEventProps(){let{dayMaxEvents:i,dayMaxEventRows:e}=this.context.options;return(!0===i||!0===e)&&(i=void 0,e=5),{dayMaxEvents:i,dayMaxEventRows:e}}}function XN(n){return n.text}class qN{constructor(i,e,r){this.positions=i,this.dateProfile=e,this.slotDuration=r}safeComputeTop(i){let{dateProfile:e}=this;if(qg(e.currentRange,i)){let r=Ml(i),a=i.valueOf()-r.valueOf();if(a>=Lf(e.slotMinTime)&&a<Lf(e.slotMaxTime))return this.computeTimeTop(mo(a))}return null}computeDateTop(i,e){return e||(e=Ml(i)),this.computeTimeTop(mo(i.valueOf()-e.valueOf()))}computeTimeTop(i){let d,p,{positions:e,dateProfile:r}=this,a=e.els.length,o=(i.milliseconds-Lf(r.slotMinTime))/Lf(this.slotDuration);return o=Math.max(0,o),o=Math.min(a,o),d=Math.floor(o),d=Math.min(d,a-1),p=o-d,e.tops[d]+e.getHeight(d)*p}}class ZN extends Ko{render(){let{props:i,context:e}=this,{options:r}=e,{slatElRefs:a}=i;return si("tbody",null,i.slatMetas.map((o,d)=>{let p={time:o.time,date:e.dateEnv.toDate(o.date),view:e.viewApi};return si("tr",{key:o.key,ref:a.createRef(o.key)},i.axis&&si(nD,Object.assign({},o)),si(Gh,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!o.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":o.isoTimeStr},renderProps:p,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class KN extends Ko{constructor(){super(...arguments),this.rootElRef={current:null},this.slatElRefs=new Kg}render(){let{props:i,context:e}=this;return si("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},si("table",{"aria-hidden":!0,className:e.theme.getClass("table"),style:{minWidth:i.tableMinWidth,width:i.clientWidth,height:i.minHeight}},i.tableColGroupNode,si(ZN,{slatElRefs:this.slatElRefs,axis:i.axis,slatMetas:i.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:i,props:e}=this;e.onCoords&&null!==e.clientWidth&&this.rootElRef.current.offsetHeight&&e.onCoords(new qN(new ky(this.rootElRef.current,function JN(n,i){return i.map(e=>n[e.key])}(this.slatElRefs.currentMap,e.slatMetas),!1,!0),this.props.dateProfile,i.options.slotDuration))}}function dx(n,i){let r,e=[];for(r=0;r<i;r+=1)e.push([]);if(n)for(r=0;r<n.length;r+=1)e[n[r].col].push(n[r]);return e}function rD(n,i){let e=[];if(n){for(let r=0;r<i;r+=1)e[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)e[r.col].segs.push(r)}else for(let r=0;r<i;r+=1)e[r]=null;return e}class QN extends Ko{render(){let{props:i}=this;return si(wS,{elClasses:["fc-timegrid-more-link"],elStyle:{top:i.top,bottom:i.bottom},allDayDate:null,moreCnt:i.hiddenSegs.length,allSegs:i.hiddenSegs,hiddenSegs:i.hiddenSegs,extraDateSpan:i.extraDateSpan,dateProfile:i.dateProfile,todayRange:i.todayRange,popoverContent:()=>lD(i.hiddenSegs,i),defaultGenerator:e6,forceTimed:!0},e=>si(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function e6(n){return n.shortText}function aD(n,i){if(!n)return[[],0];let{level:e,lateralStart:r,lateralEnd:a}=n,o=r,d=[];for(;o<a;)d.push(i(e,o)),o+=1;return d.sort(r6),[d.map(a6),d[0][1]]}function r6(n,i){return i[1]-n[1]}function a6(n){return n[0]}function l6(n){let i=[];const e=r2((a,o,d)=>g_(a),(a,o,d)=>{let p=Object.assign(Object.assign({},a),{levelCoord:o,stackDepth:d,stackForward:0});return i.push(p),p.stackForward=r(a.nextLevelNodes,o+a.thickness,d+1)+1});function r(a,o,d){let p=0;for(let D of a)p=Math.max(e(D,o,d),p);return p}return r(n,0,0),i}function r2(n,i){const e={};return(...r)=>{let a=n(...r);return a in e?e[a]:e[a]=i(...r)}}function sD(n,i,e=null,r=0){let a=[];if(e)for(let o=0;o<n.length;o+=1){let d=n[o],p=e.computeDateTop(d.start,i),D=Math.max(p+(r||0),e.computeDateTop(d.end,i));a.push({start:Math.round(p),end:Math.round(D)})}return a}const u6=vc({hour:"numeric",minute:"2-digit",meridiem:!1});class oD extends Ko{render(){return si(_S,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:u6}))}}class d6 extends Ko{constructor(){super(...arguments),this.sortEventSegs=hs(TC)}render(){let{props:i,context:e}=this,{options:r}=e,a=r.selectMirror,o=i.eventDrag&&i.eventDrag.segs||i.eventResize&&i.eventResize.segs||a&&i.dateSelectionSegs||[],d=i.eventDrag&&i.eventDrag.affectedInstances||i.eventResize&&i.eventResize.affectedInstances||{},p=this.sortEventSegs(i.fgEventSegs,r.eventOrder);return si($C,{elTag:"td",elRef:i.elRef,elClasses:["fc-timegrid-col",...i.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},i.extraDataAttrs),date:i.date,dateProfile:i.dateProfile,todayRange:i.todayRange,extraRenderProps:i.extraRenderProps},D=>si("div",{className:"fc-timegrid-col-frame"},si("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(i.businessHourSegs,"non-business"),this.renderFillSegs(i.bgEventSegs,"bg-event"),this.renderFillSegs(i.dateSelectionSegs,"highlight")),si("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(p,d,!1,!1,!1)),si("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,{},!!i.eventDrag,!!i.eventResize,!!a,"mirror")),si("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(i.nowIndicatorSegs)),WC(r)&&si(D,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(i,e,r,a,o,d){let{props:p}=this;return p.forPrint?lD(i,p):this.renderPositionedFgSegs(i,e,r,a,o,d)}renderPositionedFgSegs(i,e,r,a,o,d){let{eventMaxStack:p,eventShortHeight:D,eventOrderStrict:P,eventMinHeight:B}=this.context.options,{date:te,slatCoords:ae,eventSelection:oe,todayRange:ge,nowDate:ue}=this.props,Te=r||a||o,qe=sD(i,te,ae,B),{segPlacements:ht,hiddenGroups:ut}=function c6(n,i,e,r){let a=[],o=[];for(let P=0;P<n.length;P+=1){let B=i[P];B?a.push({index:P,thickness:1,span:B}):o.push(n[P])}let{segRects:d,hiddenGroups:p}=function t6(n,i,e){let r=new nS;null!=i&&(r.strictOrder=i),null!=e&&(r.maxStackCnt=e);let o=function QF(n){let i=[];for(let e of n){let r=[],a={span:e.span,entries:[e]};for(let o of i)NC(o.span,a.span)?a={entries:o.entries.concat(a.entries),span:e5(o.span,a.span)}:r.push(o);r.push(a),i=r}return i}(r.addSegs(n)),d=function n6(n){const{entriesByLevel:i}=n,e=r2((r,a)=>r+":"+a,(r,a)=>{let o=function s6(n,i,e){let{levelCoords:r,entriesByLevel:a}=n,o=a[i][e],d=r[i]+o.thickness,p=r.length,D=i;for(;D<p&&r[D]<d;D+=1);for(;D<p;D+=1){let B,P=a[D],te=YC(P,o.span.start,BC),ae=te[0]+te[1],oe=ae;for(;(B=P[oe])&&B.span.start<o.span.end;)oe+=1;if(ae<oe)return{level:D,lateralStart:ae,lateralEnd:oe}}return null}(n,r,a),d=aD(o,e),p=i[r][a];return[Object.assign(Object.assign({},p),{nextLevelNodes:d[0]}),p.thickness+d[1]]});return aD(i.length?{level:0,lateralStart:0,lateralEnd:i[0].length}:null,e)[0]}(r);return d=function o6(n,i){const e=r2((r,a,o)=>g_(r),(r,a,o)=>{let B,{nextLevelNodes:d,thickness:p}=r,D=p+o,P=p/D,te=[];if(d.length)for(let oe of d)if(void 0===B){let ge=e(oe,a,D);B=ge[0],te.push(ge[1])}else{let ge=e(oe,B,0);te.push(ge[1])}else B=i;let ae=(B-a)*P;return[B-ae,Object.assign(Object.assign({},r),{thickness:ae,nextLevelNodes:te})]});return n.map(r=>e(r,0,0)[1])}(d,1),{segRects:l6(d),hiddenGroups:o}}(a,e,r),D=[];for(let P of d)D.push({seg:n[P.index],rect:P});for(let P of o)D.push({seg:P,rect:null});return{segPlacements:D,hiddenGroups:p}}(i,qe,P,p);return si(dl,null,this.renderHiddenGroups(ut,i),ht.map(mi=>{let{seg:zi,rect:vi}=mi,Vt=zi.eventRange.instance.instanceId,wi=Te||!(e[Vt]||!vi),Yi=a2(vi&&vi.span),hn=!Te&&vi?this.computeSegHStyle(vi):{left:0,right:0},Wi=!!vi&&vi.span.end-vi.span.start<D;return si("div",{className:"fc-timegrid-event-harness"+(vi&&vi.stackForward>0?" fc-timegrid-event-harness-inset":""),key:d||Vt,style:Object.assign(Object.assign({visibility:wi?"":"hidden"},Yi),hn)},si(oD,Object.assign({seg:zi,isDragging:r,isResizing:a,isDateSelecting:o,isSelected:Vt===oe,isShort:Wi},Zg(zi,ge,ue))))}))}renderHiddenGroups(i,e){let{extraDateSpan:r,dateProfile:a,todayRange:o,nowDate:d,eventSelection:p,eventDrag:D,eventResize:P}=this.props;return si(dl,null,i.map(B=>{let te=a2(B.span),ae=function h6(n,i){return n.map(e=>i[e.index])}(B.entries,e);return si(QN,{key:vT(ES(ae)),hiddenSegs:ae,top:te.top,bottom:te.bottom,extraDateSpan:r,dateProfile:a,todayRange:o,nowDate:d,eventSelection:p,eventDrag:D,eventResize:P})}))}renderFillSegs(i,e){let{props:r,context:a}=this,d=sD(i,r.date,r.slatCoords,a.options.eventMinHeight).map((p,D)=>{let P=i[D];return si("div",{key:qT(P.eventRange),className:"fc-timegrid-bg-harness",style:a2(p)},"bg-event"===e?si(yS,Object.assign({seg:P},Zg(P,r.todayRange,r.nowDate))):xS(e))});return si(dl,null,d)}renderNowIndicator(i){let{slatCoords:e,date:r}=this.props;return e?i.map((a,o)=>si(jC,{key:o,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:e.computeDateTop(a.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(i){let p,D,{isRtl:e,options:r}=this.context,a=r.slotEventOverlap,o=i.levelCoord,d=i.levelCoord+i.thickness;a&&(d=Math.min(1,o+2*(d-o))),e?(p=1-d,D=o):(p=o,D=1-d);let P={zIndex:i.stackDepth+1,left:100*p+"%",right:100*D+"%"};return a&&!i.stackForward&&(P[e?"marginLeft":"marginRight"]=20),P}}function lD(n,{todayRange:i,nowDate:e,eventSelection:r,eventDrag:a,eventResize:o}){let d=(a?a.affectedInstances:null)||(o?o.affectedInstances:null)||{};return si(dl,null,n.map(p=>{let D=p.eventRange.instance.instanceId;return si("div",{key:D,style:{visibility:d[D]?"hidden":""}},si(oD,Object.assign({seg:p,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:D===r,isShort:!1},Zg(p,i,e))))}))}function a2(n){return n?{top:n.start,bottom:-n.end}:{top:"",bottom:""}}class f6 extends Ko{constructor(){super(...arguments),this.splitFgEventSegs=hs(dx),this.splitBgEventSegs=hs(dx),this.splitBusinessHourSegs=hs(dx),this.splitNowIndicatorSegs=hs(dx),this.splitDateSelectionSegs=hs(dx),this.splitEventDrag=hs(rD),this.splitEventResize=hs(rD),this.rootElRef={current:null},this.cellElRefs=new Kg}render(){let{props:i,context:e}=this,r=e.options.nowIndicator&&i.slatCoords&&i.slatCoords.safeComputeTop(i.nowDate),a=i.cells.length,o=this.splitFgEventSegs(i.fgEventSegs,a),d=this.splitBgEventSegs(i.bgEventSegs,a),p=this.splitBusinessHourSegs(i.businessHourSegs,a),D=this.splitNowIndicatorSegs(i.nowIndicatorSegs,a),P=this.splitDateSelectionSegs(i.dateSelectionSegs,a),B=this.splitEventDrag(i.eventDrag,a),te=this.splitEventResize(i.eventResize,a);return si("div",{className:"fc-timegrid-cols",ref:this.rootElRef},si("table",{role:"presentation",style:{minWidth:i.tableMinWidth,width:i.clientWidth}},i.tableColGroupNode,si("tbody",{role:"presentation"},si("tr",{role:"row"},i.axis&&si("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},si("div",{className:"fc-timegrid-col-frame"},si("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof r&&si(jC,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:i.nowDate})))),i.cells.map((ae,oe)=>si(d6,{key:ae.key,elRef:this.cellElRefs.createRef(ae.key),dateProfile:i.dateProfile,date:ae.date,nowDate:i.nowDate,todayRange:i.todayRange,extraRenderProps:ae.extraRenderProps,extraDataAttrs:ae.extraDataAttrs,extraClassNames:ae.extraClassNames,extraDateSpan:ae.extraDateSpan,fgEventSegs:o[oe],bgEventSegs:d[oe],businessHourSegs:p[oe],nowIndicatorSegs:D[oe],dateSelectionSegs:P[oe],eventDrag:B[oe],eventResize:te[oe],slatCoords:i.slatCoords,eventSelection:i.eventSelection,forPrint:i.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:i}=this;i.onColCoords&&null!==i.clientWidth&&i.onColCoords(new ky(this.rootElRef.current,function p6(n,i){return i.map(e=>n[e.key])}(this.cellElRefs.currentMap,i.cells),!0,!1))}}class m6 extends Jp{constructor(){super(...arguments),this.processSlotOptions=hs(g6),this.state={slatCoords:null},this.handleRootEl=i=>{i?this.context.registerInteractiveComponent(this,{el:i,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=i=>{let{onScrollTopRequest:e}=this.props,{slatCoords:r}=this.state;if(e&&r){if(i.time){let a=r.computeTimeTop(i.time);a=Math.ceil(a),a&&(a+=1),e(a)}return!0}return!1},this.handleColCoords=i=>{this.colCoords=i},this.handleSlatCoords=i=>{this.setState({slatCoords:i}),this.props.onSlatCoords&&this.props.onSlatCoords(i)}}render(){let{props:i,state:e}=this;return si("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:i.clientWidth,minWidth:i.tableMinWidth}},si(KN,{axis:i.axis,dateProfile:i.dateProfile,slatMetas:i.slatMetas,clientWidth:i.clientWidth,minHeight:i.expandRows?i.clientHeight:"",tableMinWidth:i.tableMinWidth,tableColGroupNode:i.axis?i.tableColGroupNode:null,onCoords:this.handleSlatCoords}),si(f6,{cells:i.cells,axis:i.axis,dateProfile:i.dateProfile,businessHourSegs:i.businessHourSegs,bgEventSegs:i.bgEventSegs,fgEventSegs:i.fgEventSegs,dateSelectionSegs:i.dateSelectionSegs,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,todayRange:i.todayRange,nowDate:i.nowDate,nowIndicatorSegs:i.nowIndicatorSegs,clientWidth:i.clientWidth,tableMinWidth:i.tableMinWidth,tableColGroupNode:i.tableColGroupNode,slatCoords:e.slatCoords,onColCoords:this.handleColCoords,forPrint:i.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(i){this.scrollResponder.update(i.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(i,e){let{dateEnv:r,options:a}=this.context,{colCoords:o}=this,{dateProfile:d}=this.props,{slatCoords:p}=this.state,{snapDuration:D,snapsPerSlot:P}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),B=o.leftToIndex(i),te=p.positions.topToIndex(e);if(null!=B&&null!=te){let ae=this.props.cells[B],oe=p.positions.tops[te],ge=p.positions.getHeight(te),Te=Math.floor((e-oe)/ge*P),ht=this.props.cells[B].date,ut=nC(d.slotMinTime,function G3(n,i){return{years:n.years*i,months:n.months*i,days:n.days*i,milliseconds:n.milliseconds*i}}(D,te*P+Te)),mi=r.add(ht,ut),zi=r.add(mi,D);return{dateProfile:d,dateSpan:Object.assign({range:{start:mi,end:zi},allDay:!1},ae.extraDateSpan),dayEl:o.els[B],rect:{left:o.lefts[B],right:o.rights[B],top:oe,bottom:oe+ge},layer:0}}return null}}function g6(n,i){let e=i||n,r=rC(n,e);return null===r&&(e=n,r=1),{snapDuration:e,snapsPerSlot:r}}class v6 extends dS{sliceRange(i,e){let r=[];for(let a=0;a<e.length;a+=1){let o=lv(i,e[a]);o&&r.push({start:o.start,end:o.end,isStart:o.start.valueOf()===i.start.valueOf(),isEnd:o.end.valueOf()===i.end.valueOf(),col:a})}return r}}class _6 extends Jp{constructor(){super(...arguments),this.buildDayRanges=hs(y6),this.slicer=new v6,this.timeColsRef={current:null}}render(){let{props:i,context:e}=this,{dateProfile:r,dayTableModel:a}=i,{nowIndicator:o,nextDayThreshold:d}=e.options,p=this.buildDayRanges(a,r,e.dateEnv);return si(cx,{unit:o?"minute":"day"},(D,P)=>si(m6,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(i,r,null,e,p),{forPrint:i.forPrint,axis:i.axis,dateProfile:r,slatMetas:i.slatMetas,slotDuration:i.slotDuration,cells:a.cells[0],tableColGroupNode:i.tableColGroupNode,tableMinWidth:i.tableMinWidth,clientWidth:i.clientWidth,clientHeight:i.clientHeight,expandRows:i.expandRows,nowDate:D,nowIndicatorSegs:o&&this.slicer.sliceNowDate(D,r,d,e,p),todayRange:P,onScrollTopRequest:i.onScrollTopRequest,onSlatCoords:i.onSlatCoords})))}}function y6(n,i,e){let r=[];for(let a of n.headerDates)r.push({start:e.add(a,i.slotMinTime),end:e.add(a,i.slotMaxTime)});return r}const cD=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function x6(n,i,e,r,a){let o=new Date(0),d=n,p=mo(0),D=e||function b6(n){let i,e,r;for(i=cD.length-1;i>=0;i-=1)if(e=mo(cD[i]),r=rC(e,n),null!==r&&r>1)return e;return n}(r),P=[];for(;Lf(d)<Lf(i);){let B=a.add(o,d),te=null!==rC(p,D);P.push({date:B,time:d,key:B.toISOString(),isoTimeStr:n4(B),isLabeled:te}),d=nC(d,r),p=nC(p,r)}return P}function C6(n,i){let e=new cS(n.renderRange,i);return new uS(e,!1)}fb('.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}');var k6=jm({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:class w6 extends WN{constructor(){super(...arguments),this.buildTimeColsModel=hs(C6),this.buildSlatMetas=hs(x6)}render(){let{options:i,dateEnv:e,dateProfileGenerator:r}=this.context,{props:a}=this,{dateProfile:o}=a,d=this.buildTimeColsModel(o,r),p=this.allDaySplitter.splitProps(a),D=this.buildSlatMetas(o.slotMinTime,o.slotMaxTime,i.slotLabelInterval,i.slotDuration,e),{dayMinWidth:P}=i,B=!P,te=P,ae=i.dayHeaders&&si(lS,{dates:d.headerDates,dateProfile:o,datesRepDistinctDays:!0,renderIntro:B?this.renderHeadAxis:null}),oe=!1!==i.allDaySlot&&(ue=>si(iD,Object.assign({},p.allDay,{dateProfile:o,dayTableModel:d,nextDayThreshold:i.nextDayThreshold,tableMinWidth:ue.tableMinWidth,colGroupNode:ue.tableColGroupNode,renderRowIntro:B?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:ue.clientWidth,clientHeight:ue.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),ge=ue=>si(_6,Object.assign({},p.timed,{dayTableModel:d,dateProfile:o,axis:B,slotDuration:i.slotDuration,slatMetas:D,forPrint:a.forPrint,tableColGroupNode:ue.tableColGroupNode,tableMinWidth:ue.tableMinWidth,clientWidth:ue.clientWidth,clientHeight:ue.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:ue.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return te?this.renderHScrollLayout(ae,oe,ge,d.colCnt,P,D,this.state.slatCoords):this.renderSimpleLayout(ae,oe,ge)}},usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class T6 extends Ko{constructor(){super(...arguments),this.state={textId:nv()}}render(){let{theme:i,dateEnv:e,options:r,viewApi:a}=this.context,{cellId:o,dayDate:d,todayRange:p}=this.props,{textId:D}=this.state,P=RC(d,p),B=r.listDayFormat?e.format(d,r.listDayFormat):"",te=r.listDaySideFormat?e.format(d,r.listDaySideFormat):"",ae=Object.assign({date:e.toDate(d),view:a,textId:D,text:B,sideText:te,navLinkAttrs:Ey(this.context,d),sideNavLinkAttrs:Ey(this.context,d,"day",!1)},P);return si(Gh,{elTag:"tr",elClasses:["fc-list-day",...Ob(P,i)],elAttrs:{"data-date":ix(d)},renderProps:ae,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:S6,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},oe=>si("th",{scope:"colgroup",colSpan:3,id:o,"aria-labelledby":D},si(oe,{elTag:"div",elClasses:["fc-list-day-cushion",i.getClass("tableCellShaded")]})))}}function S6(n){return si(dl,null,n.text&&si("a",Object.assign({id:n.textId,className:"fc-list-day-text"},n.navLinkAttrs),n.text),n.sideText&&si("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},n.sideNavLinkAttrs),n.sideText))}const D6=vc({hour:"numeric",minute:"2-digit",meridiem:"short"});class A6 extends Ko{render(){let{props:i,context:e}=this,{options:r}=e,{seg:a,timeHeaderId:o,eventHeaderId:d,dateHeaderId:p}=i,D=r.eventTimeFormat||D6;return si(Nb,Object.assign({},i,{elTag:"tr",elClasses:["fc-list-event",a.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function I6(n,i){let e=SC(n,i);return si("a",Object.assign({},e),n.eventRange.def.title)}(a,e),seg:a,timeText:"",disableDragging:!0,disableResizing:!0}),(P,B)=>si(dl,null,function M6(n,i,e,r,a){let{options:o}=e;if(!1!==o.displayEventTime){let P,p=n.eventRange.instance,D=!1;return n.eventRange.def.allDay?D=!0:function H4(n){let i=gC(n);return av(i.start,i.end)>1}(n.eventRange.range)?n.isStart?P=lx(n,i,e,null,null,p.range.start,n.end):n.isEnd?P=lx(n,i,e,null,null,n.start,p.range.end):D=!0:P=lx(n,i,e),D?si(Gh,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${a}`},renderProps:{text:e.options.allDayText,view:e.viewApi},generatorName:"allDayContent",customGenerator:o.allDayContent,defaultGenerator:R6,classNameGenerator:o.allDayClassNames,didMount:o.allDayDidMount,willUnmount:o.allDayWillUnmount}):si("td",{className:"fc-list-event-time"},P)}return null}(a,D,e,o,p),si("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},si("span",{className:"fc-list-event-dot",style:{borderColor:B.borderColor||B.backgroundColor}})),si(P,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${d} ${p}`}})))}}function R6(n){return n.text}function L6(n){return n.text}function P6(n){let i=Ml(n.renderRange.start),e=n.renderRange.end,r=[],a=[];for(;i<e;)r.push(i),a.push({start:i,end:Md(i,1)}),i=Md(i,1);return{dayDates:r,dayRanges:a}}function uD(n){return!1===n?null:vc(n)}fb(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');var z6=jm({name:"@fullcalendar/list",optionRefiners:{listDayFormat:uD,listDaySideFormat:uD,noEventsClassNames:wn,noEventsContent:wn,noEventsDidMount:wn,noEventsWillUnmount:wn},views:{list:{component:class O6 extends Jp{constructor(){super(...arguments),this.computeDateVars=hs(P6),this.eventStoreToSegs=hs(this._eventStoreToSegs),this.state={timeHeaderId:nv(),eventHeaderId:nv(),dateHeaderIdRoot:nv()},this.setRootEl=i=>{i?this.context.registerInteractiveComponent(this,{el:i}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:i,context:e}=this,{dayDates:r,dayRanges:a}=this.computeDateVars(i.dateProfile),o=this.eventStoreToSegs(i.eventStore,i.eventUiBases,a);return si(ax,{elRef:this.setRootEl,elClasses:["fc-list",e.theme.getClass("table"),!1!==e.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:e.viewSpec},si(mS,{liquid:!i.isHeightAuto,overflowX:i.isHeightAuto?"visible":"hidden",overflowY:i.isHeightAuto?"visible":"auto"},o.length>0?this.renderSegList(o,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:i,viewApi:e}=this.context;return si(Gh,{elTag:"div",elClasses:["fc-list-empty"],renderProps:{text:i.noEventsText,view:e},generatorName:"noEventsContent",customGenerator:i.noEventsContent,defaultGenerator:L6,classNameGenerator:i.noEventsClassNames,didMount:i.noEventsDidMount,willUnmount:i.noEventsWillUnmount},a=>si(a,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(i,e){let{theme:r,options:a}=this.context,{timeHeaderId:o,eventHeaderId:d,dateHeaderIdRoot:p}=this.state,D=function F6(n){let e,r,i=[];for(e=0;e<n.length;e+=1)r=n[e],(i[r.dayIndex]||(i[r.dayIndex]=[])).push(r);return i}(i);return si(cx,{unit:"day"},(P,B)=>{let te=[];for(let ae=0;ae<D.length;ae+=1){let oe=D[ae];if(oe){let ge=ix(e[ae]),ue=p+"-"+ge;te.push(si(T6,{key:ge,cellId:ue,dayDate:e[ae],todayRange:B})),oe=TC(oe,a.eventOrder);for(let Te of oe)te.push(si(A6,Object.assign({key:ge+":"+Te.eventRange.instance.instanceId,seg:Te,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:o,eventHeaderId:d,dateHeaderId:ue},Zg(Te,B,P))))}}return si("table",{className:"fc-list-table "+r.getClass("table")},si("thead",null,si("tr",null,si("th",{scope:"col",id:o},a.timeHint),si("th",{scope:"col","aria-hidden":!0}),si("th",{scope:"col",id:d},a.eventHint))),si("tbody",null,te))})}_eventStoreToSegs(i,e,r){return this.eventRangesToSegs(kC(i,e,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(i,e){let r=[];for(let a of i)r.push(...this.eventRangeToSegs(a,e));return r}eventRangeToSegs(i,e){let p,D,P,{dateEnv:r}=this.context,{nextDayThreshold:a}=this.context.options,o=i.range,d=i.def.allDay,B=[];for(p=0;p<e.length;p+=1)if(D=lv(o,e[p]),D&&(P={component:this,eventRange:i,start:D.start,end:D.end,isStart:i.isStart&&D.start.valueOf()===o.start.valueOf(),isEnd:i.isEnd&&D.end.valueOf()===o.end.valueOf(),dayIndex:p},B.push(P),!P.isEnd&&!d&&p+1<e.length&&o.end<r.add(e[p+1].start,a))){P.end=o.end,P.isEnd=!0;break}return B}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}}),s2=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Dy={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var i=new Date(n.getTime());i.setHours(0,0,0,0),i.setDate(i.getDate()+3-(i.getDay()+6)%7);var e=new Date(i.getFullYear(),0,4);return 1+Math.round(((i.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},o2={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var i=n%100;if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const l2=o2;var sf=function(n,i){return void 0===i&&(i=2),("000"+n).slice(-1*i)},_p=function(n){return!0===n?1:0};function dD(n,i){var e;return function(){var r=this,a=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(r,a)},i)}}var c2=function(n){return n instanceof Array?n:[n]};function Hh(n,i,e){if(!0===e)return n.classList.add(i);n.classList.remove(i)}function Jo(n,i,e){var r=window.document.createElement(n);return e=e||"",r.className=i=i||"",void 0!==e&&(r.textContent=e),r}function Vb(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function hD(n,i){return i(n)?n:n.parentNode?hD(n.parentNode,i):void 0}function Ub(n,i){var e=Jo("div","numInputWrapper"),r=Jo("input","numInput "+n),a=Jo("span","arrowUp"),o=Jo("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==i)for(var d in i)r.setAttribute(d,i[d]);return e.appendChild(r),e.appendChild(a),e.appendChild(o),e}function Ff(n){try{return"function"==typeof n.composedPath?n.composedPath()[0]:n.target}catch{return n.target}}var u2=function(){},jb=function(n,i,e){return e.months[i?"shorthand":"longhand"][n]},Y6={D:u2,F:function(n,i,e){n.setMonth(e.months.longhand.indexOf(i))},G:function(n,i){n.setHours((n.getHours()>=12?12:0)+parseFloat(i))},H:function(n,i){n.setHours(parseFloat(i))},J:function(n,i){n.setDate(parseFloat(i))},K:function(n,i,e){n.setHours(n.getHours()%12+12*_p(new RegExp(e.amPM[1],"i").test(i)))},M:function(n,i,e){n.setMonth(e.months.shorthand.indexOf(i))},S:function(n,i){n.setSeconds(parseFloat(i))},U:function(n,i){return new Date(1e3*parseFloat(i))},W:function(n,i,e){var r=parseInt(i),a=new Date(n.getFullYear(),0,2+7*(r-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+e.firstDayOfWeek),a},Y:function(n,i){n.setFullYear(parseFloat(i))},Z:function(n,i){return new Date(i)},d:function(n,i){n.setDate(parseFloat(i))},h:function(n,i){n.setHours((n.getHours()>=12?12:0)+parseFloat(i))},i:function(n,i){n.setMinutes(parseFloat(i))},j:function(n,i){n.setDate(parseFloat(i))},l:u2,m:function(n,i){n.setMonth(parseFloat(i)-1)},n:function(n,i){n.setMonth(parseFloat(i)-1)},s:function(n,i){n.setSeconds(parseFloat(i))},u:function(n,i){return new Date(parseFloat(i))},w:u2,y:function(n,i){n.setFullYear(2e3+parseFloat(i))}},v_={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},hx={Z:function(n){return n.toISOString()},D:function(n,i,e){return i.weekdays.shorthand[hx.w(n,i,e)]},F:function(n,i,e){return jb(hx.n(n,i,e)-1,!1,i)},G:function(n,i,e){return sf(hx.h(n,i,e))},H:function(n){return sf(n.getHours())},J:function(n,i){return void 0!==i.ordinal?n.getDate()+i.ordinal(n.getDate()):n.getDate()},K:function(n,i){return i.amPM[_p(n.getHours()>11)]},M:function(n,i){return jb(n.getMonth(),!0,i)},S:function(n){return sf(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,i,e){return e.getWeek(n)},Y:function(n){return sf(n.getFullYear(),4)},d:function(n){return sf(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return sf(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,i){return i.weekdays.longhand[n.getDay()]},m:function(n){return sf(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},fD=function(n){var i=n.config,e=void 0===i?Dy:i,r=n.l10n,a=void 0===r?o2:r,o=n.isMobile,d=void 0!==o&&o;return function(p,D,P){var B=P||a;return void 0===e.formatDate||d?D.split("").map(function(te,ae,oe){return hx[te]&&"\\"!==oe[ae-1]?hx[te](p,B,e):"\\"!==te?te:""}).join(""):e.formatDate(p,D,B)}},d2=function(n){var i=n.config,e=void 0===i?Dy:i,r=n.l10n,a=void 0===r?o2:r;return function(o,d,p,D){if(0===o||o){var B,P=D||a,te=o;if(o instanceof Date)B=new Date(o.getTime());else if("string"!=typeof o&&void 0!==o.toFixed)B=new Date(o);else if("string"==typeof o){var ae=d||(e||Dy).dateFormat,oe=String(o).trim();if("today"===oe)B=new Date,p=!0;else if(e&&e.parseDate)B=e.parseDate(o,ae);else if(/Z$/.test(oe)||/GMT$/.test(oe))B=new Date(o);else{for(var ge=void 0,ue=[],Te=0,qe=0,ht="";Te<ae.length;Te++){var ut=ae[Te],mi="\\"===ut;if(v_[ut]&&"\\"!==ae[Te-1]&&!mi){ht+=v_[ut];var vi=new RegExp(ht).exec(o);vi&&(ge=!0)&&ue["Y"!==ut?"push":"unshift"]({fn:Y6[ut],val:vi[++qe]})}else mi||(ht+=".")}B=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),ue.forEach(function(Vt){return B=(0,Vt.fn)(B,Vt.val,P)||B}),B=ge?B:void 0}}return B instanceof Date&&!isNaN(B.getTime())?(!0===p&&B.setHours(0,0,0,0),B):void e.errorHandler(new Error("Invalid date provided: "+te))}}};function Bf(n,i,e){return void 0===e&&(e=!0),!1!==e?new Date(n.getTime()).setHours(0,0,0,0)-new Date(i.getTime()).setHours(0,0,0,0):n.getTime()-i.getTime()}var G6=function(n,i,e){return n>Math.min(i,e)&&n<Math.max(i,e)},h2=function(n,i,e){return 3600*n+60*i+e},H6=function(n){var i=Math.floor(n/3600),e=(n-3600*i)/60;return[i,e,n-3600*i-60*e]},V6={DAY:864e5};function f2(n){var i=n.defaultHour,e=n.defaultMinute,r=n.defaultSeconds;if(void 0!==n.minDate){var a=n.minDate.getHours(),o=n.minDate.getMinutes(),d=n.minDate.getSeconds();i<a&&(i=a),i===a&&e<o&&(e=o),i===a&&e===o&&r<d&&(r=n.minDate.getSeconds())}if(void 0!==n.maxDate){var p=n.maxDate.getHours(),D=n.maxDate.getMinutes();(i=Math.min(i,p))===p&&(e=Math.min(D,e)),i===p&&e===D&&(r=n.maxDate.getSeconds())}return{hours:i,minutes:e,seconds:r}}Zt(9280);var yh=function(){return yh=Object.assign||function(n){for(var i,e=1,r=arguments.length;e<r;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a]);return n},yh.apply(this,arguments)},pD=function(){for(var n=0,i=0,e=arguments.length;i<e;i++)n+=arguments[i].length;var r=Array(n),a=0;for(i=0;i<e;i++)for(var o=arguments[i],d=0,p=o.length;d<p;d++,a++)r[a]=o[d];return r},U6=300;function j6(n,i){var e={config:yh(yh({},Dy),Xu.defaultConfig),l10n:l2};function o(){var Nt;return(null===(Nt=e.calendarContainer)||void 0===Nt?void 0:Nt.getRootNode()).activeElement||document.activeElement}function d(Nt){return Nt.bind(e)}function p(){var Nt=e.config;!1===Nt.weekNumbers&&1===Nt.showMonths||!0!==Nt.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==e.calendarContainer&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),void 0!==e.daysContainer){var Kt=(e.days.offsetWidth+1)*Nt.showMonths;e.daysContainer.style.width=Kt+"px",e.calendarContainer.style.width=Kt+(void 0!==e.weekWrapper?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function D(Nt){if(0===e.selectedDates.length){var Kt=void 0===e.config.minDate||Bf(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),qi=f2(e.config);Kt.setHours(qi.hours,qi.minutes,qi.seconds,Kt.getMilliseconds()),e.selectedDates=[Kt],e.latestSelectedDateObj=Kt}void 0!==Nt&&"blur"!==Nt.type&&function Xy(Nt){Nt.preventDefault();var Kt="keydown"===Nt.type,qi=Ff(Nt),Fn=qi;void 0!==e.amPM&&qi===e.amPM&&(e.amPM.textContent=e.l10n.amPM[_p(e.amPM.textContent===e.l10n.amPM[0])]);var Or=parseFloat(Fn.getAttribute("min")),sa=parseFloat(Fn.getAttribute("max")),js=parseFloat(Fn.getAttribute("step")),Da=parseInt(Fn.value,10),Ea=Da+js*(Nt.delta||(Kt?38===Nt.which?1:-1:0));if(typeof Fn.value<"u"&&2===Fn.value.length){var ws=Fn===e.hourElement,hl=Fn===e.minuteElement;Ea<Or?(Ea=sa+Ea+_p(!ws)+(_p(ws)&&_p(!e.amPM)),hl&&mi(void 0,-1,e.hourElement)):Ea>sa&&(Ea=Fn===e.hourElement?Ea-sa-_p(!e.amPM):Or,hl&&mi(void 0,1,e.hourElement)),e.amPM&&ws&&(1===js?Ea+Da===23:Math.abs(Ea-Da)>js)&&(e.amPM.textContent=e.l10n.amPM[_p(e.amPM.textContent===e.l10n.amPM[0])]),Fn.value=sf(Ea)}}(Nt);var Fn=e._input.value;te(),em(),e._input.value!==Fn&&e._debouncedChange()}function te(){if(void 0!==e.hourElement&&void 0!==e.minuteElement){var Nt=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,Kt=(parseInt(e.minuteElement.value,10)||0)%60,qi=void 0!==e.secondElement?(parseInt(e.secondElement.value,10)||0)%60:0;void 0!==e.amPM&&(Nt=function P(Nt,Kt){return Nt%12+12*_p(Kt===e.l10n.amPM[1])}(Nt,e.amPM.textContent));var Fn=void 0!==e.config.minTime||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&0===Bf(e.latestSelectedDateObj,e.config.minDate,!0),Or=void 0!==e.config.maxTime||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&0===Bf(e.latestSelectedDateObj,e.config.maxDate,!0);if(void 0!==e.config.maxTime&&void 0!==e.config.minTime&&e.config.minTime>e.config.maxTime){var sa=h2(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),js=h2(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),Da=h2(Nt,Kt,qi);if(Da>js&&Da<sa){var $s=H6(sa);Nt=$s[0],Kt=$s[1],qi=$s[2]}}else{if(Or){var Ea=void 0!==e.config.maxTime?e.config.maxTime:e.config.maxDate;(Nt=Math.min(Nt,Ea.getHours()))===Ea.getHours()&&(Kt=Math.min(Kt,Ea.getMinutes())),Kt===Ea.getMinutes()&&(qi=Math.min(qi,Ea.getSeconds()))}if(Fn){var ws=void 0!==e.config.minTime?e.config.minTime:e.config.minDate;(Nt=Math.max(Nt,ws.getHours()))===ws.getHours()&&Kt<ws.getMinutes()&&(Kt=ws.getMinutes()),Kt===ws.getMinutes()&&(qi=Math.max(qi,ws.getSeconds()))}}oe(Nt,Kt,qi)}}function ae(Nt){var Kt=Nt||e.latestSelectedDateObj;Kt&&Kt instanceof Date&&oe(Kt.getHours(),Kt.getMinutes(),Kt.getSeconds())}function oe(Nt,Kt,qi){void 0!==e.latestSelectedDateObj&&e.latestSelectedDateObj.setHours(Nt%24,Kt,qi||0,0),e.hourElement&&e.minuteElement&&!e.isMobile&&(e.hourElement.value=sf(e.config.time_24hr?Nt:(12+Nt)%12+12*_p(Nt%12==0)),e.minuteElement.value=sf(Kt),void 0!==e.amPM&&(e.amPM.textContent=e.l10n.amPM[_p(Nt>=12)]),void 0!==e.secondElement&&(e.secondElement.value=sf(qi)))}function ge(Nt){var Kt=Ff(Nt),qi=parseInt(Kt.value)+(Nt.delta||0);(qi/1e3>1||"Enter"===Nt.key&&!/[^\d]/.test(qi.toString()))&&Rr(qi)}function ue(Nt,Kt,qi,Fn){return Kt instanceof Array?Kt.forEach(function(Or){return ue(Nt,Or,qi,Fn)}):Nt instanceof Array?Nt.forEach(function(Or){return ue(Or,Kt,qi,Fn)}):(Nt.addEventListener(Kt,qi,Fn),void e._handlers.push({remove:function(){return Nt.removeEventListener(Kt,qi,Fn)}}))}function Te(){Kl("onChange")}function ht(Nt,Kt){var qi=void 0!==Nt?e.parseDate(Nt):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),Fn=e.currentYear,Or=e.currentMonth;try{void 0!==qi&&(e.currentYear=qi.getFullYear(),e.currentMonth=qi.getMonth())}catch(sa){sa.message="Invalid date supplied: "+qi,e.config.errorHandler(sa)}Kt&&e.currentYear!==Fn&&(Kl("onYearChange"),Cr()),Kt&&(e.currentYear!==Fn||e.currentMonth!==Or)&&Kl("onMonthChange"),e.redraw()}function ut(Nt){var Kt=Ff(Nt);~Kt.className.indexOf("arrow")&&mi(Nt,Kt.classList.contains("arrowUp")?1:-1)}function mi(Nt,Kt,qi){var Fn=Nt&&Ff(Nt),Or=qi||Fn&&Fn.parentNode&&Fn.parentNode.firstChild,sa=Rx("increment");sa.delta=Kt,Or&&Or.dispatchEvent(sa)}function vi(Nt,Kt,qi,Fn){var Or=_r(Kt,!0),sa=Jo("span",Nt,Kt.getDate().toString());return sa.dateObj=Kt,sa.$i=Fn,sa.setAttribute("aria-label",e.formatDate(Kt,e.config.ariaDateFormat)),-1===Nt.indexOf("hidden")&&0===Bf(Kt,e.now)&&(e.todayDateElem=sa,sa.classList.add("today"),sa.setAttribute("aria-current","date")),Or?(sa.tabIndex=-1,Ox(Kt)&&(sa.classList.add("selected"),e.selectedDateElem=sa,"range"===e.config.mode&&(Hh(sa,"startRange",e.selectedDates[0]&&0===Bf(Kt,e.selectedDates[0],!0)),Hh(sa,"endRange",e.selectedDates[1]&&0===Bf(Kt,e.selectedDates[1],!0)),"nextMonthDay"===Nt&&sa.classList.add("inRange")))):sa.classList.add("flatpickr-disabled"),"range"===e.config.mode&&function xw(Nt){return!("range"!==e.config.mode||e.selectedDates.length<2)&&Bf(Nt,e.selectedDates[0])>=0&&Bf(Nt,e.selectedDates[1])<=0}(Kt)&&!Ox(Kt)&&sa.classList.add("inRange"),e.weekNumbers&&1===e.config.showMonths&&"prevMonthDay"!==Nt&&Fn%7==6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(Kt)+"</span>"),Kl("onDayCreate",sa),sa}function Vt(Nt){Nt.focus(),"range"===e.config.mode&&ui(Nt)}function wi(Nt){for(var qi=Nt>0?e.config.showMonths:-1,Fn=Nt>0?0:e.config.showMonths-1;Fn!=qi;Fn+=Nt)for(var Or=e.daysContainer.children[Fn],js=Nt>0?Or.children.length:-1,Da=Nt>0?0:Or.children.length-1;Da!=js;Da+=Nt){var $s=Or.children[Da];if(-1===$s.className.indexOf("hidden")&&_r($s.dateObj))return $s}}function hn(Nt,Kt){var qi=o(),Fn=kr(qi||document.body),Or=void 0!==Nt?Nt:Fn?qi:void 0!==e.selectedDateElem&&kr(e.selectedDateElem)?e.selectedDateElem:void 0!==e.todayDateElem&&kr(e.todayDateElem)?e.todayDateElem:wi(Kt>0?1:-1);void 0===Or?e._input.focus():Fn?function Yi(Nt,Kt){for(var qi=-1===Nt.className.indexOf("Month")?Nt.dateObj.getMonth():e.currentMonth,Fn=Kt>0?e.config.showMonths:-1,Or=Kt>0?1:-1,sa=qi-e.currentMonth;sa!=Fn;sa+=Or)for(var js=e.daysContainer.children[sa],$s=js.children.length,Ea=qi-e.currentMonth===sa?Nt.$i+Kt:Kt<0?js.children.length-1:0;Ea>=0&&Ea<$s&&Ea!=(Kt>0?$s:-1);Ea+=Or){var ws=js.children[Ea];if(-1===ws.className.indexOf("hidden")&&_r(ws.dateObj)&&Math.abs(Nt.$i-Ea)>=Math.abs(Kt))return Vt(ws)}e.changeMonth(Or),hn(wi(Or),0)}(Or,Kt):Vt(Or)}function Tn(Nt,Kt){for(var qi=(new Date(Nt,Kt,1).getDay()-e.l10n.firstDayOfWeek+7)%7,Fn=e.utils.getDaysInMonth((Kt-1+12)%12,Nt),Or=e.utils.getDaysInMonth(Kt,Nt),sa=window.document.createDocumentFragment(),js=e.config.showMonths>1,Da=js?"prevMonthDay hidden":"prevMonthDay",$s=js?"nextMonthDay hidden":"nextMonthDay",Ea=Fn+1-qi,ws=0;Ea<=Fn;Ea++,ws++)sa.appendChild(vi("flatpickr-day "+Da,new Date(Nt,Kt-1,Ea),0,ws));for(Ea=1;Ea<=Or;Ea++,ws++)sa.appendChild(vi("flatpickr-day",new Date(Nt,Kt,Ea),0,ws));for(var hl=Or+1;hl<=42-qi&&(1===e.config.showMonths||ws%7!=0);hl++,ws++)sa.appendChild(vi("flatpickr-day "+$s,new Date(Nt,Kt+1,hl%Or),0,ws));var ct=Jo("div","dayContainer");return ct.appendChild(sa),ct}function Wi(){if(void 0!==e.daysContainer){Vb(e.daysContainer),e.weekNumbers&&Vb(e.weekNumbers);for(var Nt=document.createDocumentFragment(),Kt=0;Kt<e.config.showMonths;Kt++){var qi=new Date(e.currentYear,e.currentMonth,1);qi.setMonth(e.currentMonth+Kt),Nt.appendChild(Tn(qi.getFullYear(),qi.getMonth()))}e.daysContainer.appendChild(Nt),e.days=e.daysContainer.firstChild,"range"===e.config.mode&&1===e.selectedDates.length&&ui()}}function Cr(){if(!(e.config.showMonths>1||"dropdown"!==e.config.monthSelectorType)){e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var Kt=0;Kt<12;Kt++)if(Fn=Kt,!(void 0!==e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&Fn<e.config.minDate.getMonth()||void 0!==e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()&&Fn>e.config.maxDate.getMonth())){var qi=Jo("option","flatpickr-monthDropdown-month");qi.value=new Date(e.currentYear,Kt).getMonth().toString(),qi.textContent=jb(Kt,e.config.shorthandCurrentMonth,e.l10n),qi.tabIndex=-1,e.currentMonth===Kt&&(qi.selected=!0),e.monthsDropdownContainer.appendChild(qi)}}var Fn}function aa(){var qi,Nt=Jo("div","flatpickr-month"),Kt=window.document.createDocumentFragment();e.config.showMonths>1||"static"===e.config.monthSelectorType?qi=Jo("span","cur-month"):(e.monthsDropdownContainer=Jo("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),ue(e.monthsDropdownContainer,"change",function(js){var Da=Ff(js),$s=parseInt(Da.value,10);e.changeMonth($s-e.currentMonth),Kl("onMonthChange")}),Cr(),qi=e.monthsDropdownContainer);var Fn=Ub("cur-year",{tabindex:"-1"}),Or=Fn.getElementsByTagName("input")[0];Or.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&Or.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(Or.setAttribute("max",e.config.maxDate.getFullYear().toString()),Or.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var sa=Jo("div","flatpickr-current-month");return sa.appendChild(qi),sa.appendChild(Fn),Kt.appendChild(sa),Nt.appendChild(Kt),{container:Nt,yearElement:Or,monthElement:qi}}function Sr(){Vb(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var Nt=e.config.showMonths;Nt--;){var Kt=aa();e.yearElements.push(Kt.yearElement),e.monthElements.push(Kt.monthElement),e.monthNav.appendChild(Kt.container)}e.monthNav.appendChild(e.nextMonthNav)}function qs(){e.weekdayContainer?Vb(e.weekdayContainer):e.weekdayContainer=Jo("div","flatpickr-weekdays");for(var Nt=e.config.showMonths;Nt--;){var Kt=Jo("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(Kt)}return Ur(),e.weekdayContainer}function Ur(){if(e.weekdayContainer){var Nt=e.l10n.firstDayOfWeek,Kt=pD(e.l10n.weekdays.shorthand);Nt>0&&Nt<Kt.length&&(Kt=pD(Kt.splice(Nt,Kt.length),Kt.splice(0,Nt)));for(var qi=e.config.showMonths;qi--;)e.weekdayContainer.children[qi].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+Kt.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function qn(Nt,Kt){void 0===Kt&&(Kt=!0);var qi=Kt?Nt:Nt-e.currentMonth;qi<0&&!0===e._hidePrevMonthArrow||qi>0&&!0===e._hideNextMonthArrow||(e.currentMonth+=qi,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,Kl("onYearChange"),Cr()),Wi(),Kl("onMonthChange"),T_())}function bi(Nt){return e.calendarContainer.contains(Nt)}function Yn(Nt){if(e.isOpen&&!e.config.inline){var Kt=Ff(Nt),qi=bi(Kt),Or=!(Kt===e.input||Kt===e.altInput||e.element.contains(Kt)||Nt.path&&Nt.path.indexOf&&(~Nt.path.indexOf(e.input)||~Nt.path.indexOf(e.altInput))||qi||bi(Nt.relatedTarget)),sa=!e.config.ignoredFocusElements.some(function(js){return js.contains(Kt)});Or&&sa&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement&&""!==e.input.value&&void 0!==e.input.value&&D(),e.close(),e.config&&"range"===e.config.mode&&1===e.selectedDates.length&&e.clear(!1))}}function Rr(Nt){if(!(!Nt||e.config.minDate&&Nt<e.config.minDate.getFullYear()||e.config.maxDate&&Nt>e.config.maxDate.getFullYear())){var qi=e.currentYear!==Nt;e.currentYear=Nt||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),qi&&(e.redraw(),Kl("onYearChange"),Cr())}}function _r(Nt,Kt){var qi;void 0===Kt&&(Kt=!0);var Fn=e.parseDate(Nt,void 0,Kt);if(e.config.minDate&&Fn&&Bf(Fn,e.config.minDate,void 0!==Kt?Kt:!e.minDateHasTime)<0||e.config.maxDate&&Fn&&Bf(Fn,e.config.maxDate,void 0!==Kt?Kt:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&0===e.config.disable.length)return!0;if(void 0===Fn)return!1;for(var Or=!!e.config.enable,sa=null!==(qi=e.config.enable)&&void 0!==qi?qi:e.config.disable,js=0,Da=void 0;js<sa.length;js++){if("function"==typeof(Da=sa[js])&&Da(Fn))return Or;if(Da instanceof Date&&void 0!==Fn&&Da.getTime()===Fn.getTime())return Or;if("string"==typeof Da){var $s=e.parseDate(Da,void 0,!0);return $s&&$s.getTime()===Fn.getTime()?Or:!Or}if("object"==typeof Da&&void 0!==Fn&&Da.from&&Da.to&&Fn.getTime()>=Da.from.getTime()&&Fn.getTime()<=Da.to.getTime())return Or}return!Or}function kr(Nt){return void 0!==e.daysContainer&&-1===Nt.className.indexOf("hidden")&&-1===Nt.className.indexOf("flatpickr-disabled")&&e.daysContainer.contains(Nt)}function er(Nt){var Kt=Nt.target===e._input,qi=e._input.value.trimEnd()!==Wy();Kt&&qi&&(!Nt.relatedTarget||!bi(Nt.relatedTarget))&&e.setDate(e._input.value,!0,Nt.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Bs(Nt){var Kt=Ff(Nt),qi=e.config.wrap?n.contains(Kt):Kt===e._input,Fn=e.config.allowInput,Or=e.isOpen&&(!Fn||!qi),sa=e.config.inline&&qi&&!Fn;if(13===Nt.keyCode&&qi){if(Fn)return e.setDate(e._input.value,!0,Kt===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),Kt.blur();e.open()}else if(bi(Kt)||Or||sa){var js=!!e.timeContainer&&e.timeContainer.contains(Kt);switch(Nt.keyCode){case 13:js?(Nt.preventDefault(),D(),wp()):kh(Nt);break;case 27:Nt.preventDefault(),wp();break;case 8:case 46:qi&&!e.config.allowInput&&(Nt.preventDefault(),e.clear());break;case 37:case 39:if(js||qi)e.hourElement&&e.hourElement.focus();else{Nt.preventDefault();var Da=o();if(void 0!==e.daysContainer&&(!1===Fn||Da&&kr(Da))){var $s=39===Nt.keyCode?1:-1;Nt.ctrlKey?(Nt.stopPropagation(),qn($s),hn(wi(1),0)):hn(void 0,$s)}}break;case 38:case 40:Nt.preventDefault();var Ea=40===Nt.keyCode?1:-1;e.daysContainer&&void 0!==Kt.$i||Kt===e.input||Kt===e.altInput?Nt.ctrlKey?(Nt.stopPropagation(),Rr(e.currentYear-Ea),hn(wi(1),0)):js||hn(void 0,7*Ea):Kt===e.currentYearElement?Rr(e.currentYear-Ea):e.config.enableTime&&(!js&&e.hourElement&&e.hourElement.focus(),D(Nt),e._debouncedChange());break;case 9:if(js){var ws=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(qt){return qt}),hl=ws.indexOf(Kt);if(-1!==hl){var ct=ws[hl+(Nt.shiftKey?-1:1)];Nt.preventDefault(),(ct||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(Kt)&&Nt.shiftKey&&(Nt.preventDefault(),e._input.focus())}}if(void 0!==e.amPM&&Kt===e.amPM)switch(Nt.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],te(),em();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],te(),em()}(qi||bi(Kt))&&Kl("onKeyDown",Nt)}function ui(Nt,Kt){if(void 0===Kt&&(Kt="flatpickr-day"),1===e.selectedDates.length&&(!Nt||Nt.classList.contains(Kt)&&!Nt.classList.contains("flatpickr-disabled"))){for(var qi=Nt?Nt.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),Fn=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),Or=Math.min(qi,e.selectedDates[0].getTime()),sa=Math.max(qi,e.selectedDates[0].getTime()),js=!1,Da=0,$s=0,Ea=Or;Ea<sa;Ea+=V6.DAY)_r(new Date(Ea),!0)||(js=js||Ea>Or&&Ea<sa,Ea<Fn&&(!Da||Ea>Da)?Da=Ea:Ea>Fn&&(!$s||Ea<$s)&&($s=Ea));Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+Kt)).forEach(function(hl){var qt=hl.dateObj.getTime(),Pt=Da>0&&qt<Da||$s>0&&qt>$s;if(Pt)return hl.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach(function(Ht){hl.classList.remove(Ht)});js&&!Pt||(["startRange","inRange","endRange","notAllowed"].forEach(function(Ht){hl.classList.remove(Ht)}),void 0!==Nt&&(Nt.classList.add(qi<=e.selectedDates[0].getTime()?"startRange":"endRange"),Fn<qi&&qt===Fn?hl.classList.add("startRange"):Fn>qi&&qt===Fn&&hl.classList.add("endRange"),qt>=Da&&(0===$s||qt<=$s)&&G6(qt,Fn,qi)&&hl.classList.add("inRange")))})}}function Qo(){e.isOpen&&!e.config.static&&!e.config.inline&&$d()}function $o(Nt){return function(Kt){var qi=e.config["_"+Nt+"Date"]=e.parseDate(Kt,e.config.dateFormat),Fn=e.config["_"+("min"===Nt?"max":"min")+"Date"];void 0!==qi&&(e["min"===Nt?"minDateHasTime":"maxDateHasTime"]=qi.getHours()>0||qi.getMinutes()>0||qi.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(Or){return _r(Or)}),!e.selectedDates.length&&"min"===Nt&&ae(qi),em()),e.daysContainer&&(mv(),void 0!==qi?e.currentYearElement[Nt]=qi.getFullYear().toString():e.currentYearElement.removeAttribute(Nt),e.currentYearElement.disabled=!!Fn&&void 0!==qi&&Fn.getFullYear()===qi.getFullYear())}}function Jr(){return e.config.wrap?n.querySelector("[data-input]"):n}function Lc(){"object"!=typeof e.config.locale&&typeof Xu.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=yh(yh({},Xu.l10ns.default),"object"==typeof e.config.locale?e.config.locale:"default"!==e.config.locale?Xu.l10ns[e.config.locale]:void 0),v_.D="("+e.l10n.weekdays.shorthand.join("|")+")",v_.l="("+e.l10n.weekdays.longhand.join("|")+")",v_.M="("+e.l10n.months.shorthand.join("|")+")",v_.F="("+e.l10n.months.longhand.join("|")+")",v_.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")",void 0===yh(yh({},i),JSON.parse(JSON.stringify(n.dataset||{}))).time_24hr&&void 0===Xu.defaultConfig.time_24hr&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=fD(e),e.parseDate=d2({config:e.config,l10n:e.l10n})}function $d(Nt){if("function"!=typeof e.config.position){if(void 0!==e.calendarContainer){Kl("onPreCalendarPosition");var Kt=Nt||e._positionElement,qi=Array.prototype.reduce.call(e.calendarContainer.children,function(Lr,ga){return Lr+ga.offsetHeight},0),Fn=e.calendarContainer.offsetWidth,Or=e.config.position.split(" "),sa=Or[0],js=Or.length>1?Or[1]:null,Da=Kt.getBoundingClientRect(),$s=window.innerHeight-Da.bottom,Ea="above"===sa||"below"!==sa&&$s<qi&&Da.top>qi,ws=window.pageYOffset+Da.top+(Ea?-qi-2:Kt.offsetHeight+2);if(Hh(e.calendarContainer,"arrowTop",!Ea),Hh(e.calendarContainer,"arrowBottom",Ea),!e.config.inline){var hl=window.pageXOffset+Da.left,ct=!1,qt=!1;"center"===js?(hl-=(Fn-Da.width)/2,ct=!0):"right"===js&&(hl-=Fn-Da.width,qt=!0),Hh(e.calendarContainer,"arrowLeft",!ct&&!qt),Hh(e.calendarContainer,"arrowCenter",ct),Hh(e.calendarContainer,"arrowRight",qt);var Pt=window.document.body.offsetWidth-(window.pageXOffset+Da.right),Ht=hl+Fn>window.document.body.offsetWidth,ei=Pt+Fn>window.document.body.offsetWidth;if(Hh(e.calendarContainer,"rightMost",Ht),!e.config.static)if(e.calendarContainer.style.top=ws+"px",Ht)if(ei){var ti=function bp(){for(var Nt=null,Kt=0;Kt<document.styleSheets.length;Kt++){var qi=document.styleSheets[Kt];if(qi.cssRules){Nt=qi;break}}return Nt??function Qp(){var Nt=document.createElement("style");return document.head.appendChild(Nt),Nt.sheet}()}();if(void 0===ti)return;var dn=window.document.body.offsetWidth,zn=Math.max(0,dn/2-Fn/2),Cn=ti.cssRules.length,br="{left:"+Da.left+"px;right:auto;}";Hh(e.calendarContainer,"rightMost",!1),Hh(e.calendarContainer,"centerMost",!0),ti.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+br,Cn),e.calendarContainer.style.left=zn+"px",e.calendarContainer.style.right="auto"}else e.calendarContainer.style.left="auto",e.calendarContainer.style.right=Pt+"px";else e.calendarContainer.style.left=hl+"px",e.calendarContainer.style.right="auto"}}}else e.config.position(e,Nt)}function mv(){e.config.noCalendar||e.isMobile||(Cr(),T_(),Wi())}function wp(){e._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(e.close,0):e.close()}function kh(Nt){Nt.preventDefault(),Nt.stopPropagation();var qi=hD(Ff(Nt),function(ws){return ws.classList&&ws.classList.contains("flatpickr-day")&&!ws.classList.contains("flatpickr-disabled")&&!ws.classList.contains("notAllowed")});if(void 0!==qi){var Fn=qi,Or=e.latestSelectedDateObj=new Date(Fn.dateObj.getTime()),sa=(Or.getMonth()<e.currentMonth||Or.getMonth()>e.currentMonth+e.config.showMonths-1)&&"range"!==e.config.mode;if(e.selectedDateElem=Fn,"single"===e.config.mode)e.selectedDates=[Or];else if("multiple"===e.config.mode){var js=Ox(Or);js?e.selectedDates.splice(parseInt(js),1):e.selectedDates.push(Or)}else"range"===e.config.mode&&(2===e.selectedDates.length&&e.clear(!1,!1),e.latestSelectedDateObj=Or,e.selectedDates.push(Or),0!==Bf(Or,e.selectedDates[0],!0)&&e.selectedDates.sort(function(ws,hl){return ws.getTime()-hl.getTime()}));if(te(),sa){var Da=e.currentYear!==Or.getFullYear();e.currentYear=Or.getFullYear(),e.currentMonth=Or.getMonth(),Da&&(Kl("onYearChange"),Cr()),Kl("onMonthChange")}T_(),Wi(),em(),sa||"range"===e.config.mode||1!==e.config.showMonths?void 0!==e.selectedDateElem&&void 0===e.hourElement&&e.selectedDateElem&&e.selectedDateElem.focus():Vt(Fn),void 0!==e.hourElement&&void 0!==e.hourElement&&e.hourElement.focus(),e.config.closeOnSelect&&("single"===e.config.mode&&!e.config.enableTime||"range"===e.config.mode&&2===e.selectedDates.length&&!e.config.enableTime)&&wp(),Te()}}e.parseDate=d2({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=ue,e._setHoursFromDate=ae,e._positionCalendar=$d,e.changeMonth=qn,e.changeYear=Rr,e.clear=function gi(Nt,Kt){if(void 0===Nt&&(Nt=!0),void 0===Kt&&(Kt=!0),e.input.value="",void 0!==e.altInput&&(e.altInput.value=""),void 0!==e.mobileInput&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,!0===Kt&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),!0===e.config.enableTime){var qi=f2(e.config);oe(qi.hours,qi.minutes,qi.seconds)}e.redraw(),Nt&&Kl("onChange")},e.close=function mn(){e.isOpen=!1,e.isMobile||(void 0!==e.calendarContainer&&e.calendarContainer.classList.remove("open"),void 0!==e._input&&e._input.classList.remove("active")),Kl("onClose")},e.onMouseOver=ui,e._createElement=Jo,e.createDay=vi,e.destroy=function Ti(){void 0!==e.config&&Kl("onDestroy");for(var Nt=e._handlers.length;Nt--;)e._handlers[Nt].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var Kt=e.calendarContainer.parentNode;if(Kt.lastChild&&Kt.removeChild(Kt.lastChild),Kt.parentNode){for(;Kt.firstChild;)Kt.parentNode.insertBefore(Kt.firstChild,Kt);Kt.parentNode.removeChild(Kt)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(qi){try{delete e[qi]}catch{}})},e.isEnabled=_r,e.jumpToDate=ht,e.updateValue=em,e.open=function oo(Nt,Kt){if(void 0===Kt&&(Kt=e._positionElement),!0===e.isMobile){if(Nt){Nt.preventDefault();var qi=Ff(Nt);qi&&qi.blur()}return void 0!==e.mobileInput&&(e.mobileInput.focus(),e.mobileInput.click()),void Kl("onOpen")}if(!e._input.disabled&&!e.config.inline){var Fn=e.isOpen;e.isOpen=!0,Fn||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),Kl("onOpen"),$d(Kt)),!0===e.config.enableTime&&!0===e.config.noCalendar&&!1===e.config.allowInput&&(void 0===Nt||!e.timeContainer.contains(Nt.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}},e.redraw=mv,e.set=function Xm(Nt,Kt){if(null!==Nt&&"object"==typeof Nt)for(var qi in Object.assign(e.config,Nt),Nt)void 0!==of[qi]&&of[qi].forEach(function(Fn){return Fn()});else e.config[Nt]=Kt,void 0!==of[Nt]?of[Nt].forEach(function(Fn){return Fn()}):s2.indexOf(Nt)>-1&&(e.config[Nt]=c2(Kt));e.redraw(),em(!0)},e.setDate=function Wd(Nt,Kt,qi){if(void 0===Kt&&(Kt=!1),void 0===qi&&(qi=e.config.dateFormat),0!==Nt&&!Nt||Nt instanceof Array&&0===Nt.length)return e.clear(Kt);gv(Nt,qi),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),ht(void 0,Kt),ae(),0===e.selectedDates.length&&e.clear(!1),em(Kt),Kt&&Kl("onChange")},e.toggle=function e0(Nt){if(!0===e.isOpen)return e.close();e.open(Nt)};var of={locale:[Lc,Ur],showMonths:[Sr,p,qs],minDate:[ht],maxDate:[ht],positionElement:[Uh],clickOpens:[function(){!0===e.config.clickOpens?(ue(e._input,"focus",e.open),ue(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function gv(Nt,Kt){var qi=[];if(Nt instanceof Array)qi=Nt.map(function(Fn){return e.parseDate(Fn,Kt)});else if(Nt instanceof Date||"number"==typeof Nt)qi=[e.parseDate(Nt,Kt)];else if("string"==typeof Nt)switch(e.config.mode){case"single":case"time":qi=[e.parseDate(Nt,Kt)];break;case"multiple":qi=Nt.split(e.config.conjunction).map(function(Fn){return e.parseDate(Fn,Kt)});break;case"range":qi=Nt.split(e.l10n.rangeSeparator).map(function(Fn){return e.parseDate(Fn,Kt)})}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(Nt)));e.selectedDates=e.config.allowInvalidPreload?qi:qi.filter(function(Fn){return Fn instanceof Date&&_r(Fn,!1)}),"range"===e.config.mode&&e.selectedDates.sort(function(Fn,Or){return Fn.getTime()-Or.getTime()})}function Yf(Nt){return Nt.slice().map(function(Kt){return"string"==typeof Kt||"number"==typeof Kt||Kt instanceof Date?e.parseDate(Kt,void 0,!0):Kt&&"object"==typeof Kt&&Kt.from&&Kt.to?{from:e.parseDate(Kt.from,void 0),to:e.parseDate(Kt.to,void 0)}:Kt}).filter(function(Kt){return Kt})}function Uh(){e._positionElement=e.config.positionElement||e._input}function Kl(Nt,Kt){if(void 0!==e.config){var qi=e.config[Nt];if(void 0!==qi&&qi.length>0)for(var Fn=0;qi[Fn]&&Fn<qi.length;Fn++)qi[Fn](e.selectedDates,e.input.value,e,Kt);"onChange"===Nt&&(e.input.dispatchEvent(Rx("change")),e.input.dispatchEvent(Rx("input")))}}function Rx(Nt){var Kt=document.createEvent("Event");return Kt.initEvent(Nt,!0,!0),Kt}function Ox(Nt){for(var Kt=0;Kt<e.selectedDates.length;Kt++){var qi=e.selectedDates[Kt];if(qi instanceof Date&&0===Bf(qi,Nt))return""+Kt}return!1}function T_(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(Nt,Kt){var qi=new Date(e.currentYear,e.currentMonth,1);qi.setMonth(e.currentMonth+Kt),e.config.showMonths>1||"static"===e.config.monthSelectorType?e.monthElements[Kt].textContent=jb(qi.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=qi.getMonth().toString(),Nt.value=qi.getFullYear().toString()}),e._hidePrevMonthArrow=void 0!==e.config.minDate&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=void 0!==e.config.maxDate&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Wy(Nt){var Kt=Nt||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(qi){return e.formatDate(qi,Kt)}).filter(function(qi,Fn,Or){return"range"!==e.config.mode||e.config.enableTime||Or.indexOf(qi)===Fn}).join("range"!==e.config.mode?e.config.conjunction:e.l10n.rangeSeparator)}function em(Nt){void 0===Nt&&(Nt=!0),void 0!==e.mobileInput&&e.mobileFormatStr&&(e.mobileInput.value=void 0!==e.latestSelectedDateObj?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Wy(e.config.dateFormat),void 0!==e.altInput&&(e.altInput.value=Wy(e.config.altFormat)),!1!==Nt&&Kl("onValueUpdate")}function fE(Nt){var Kt=Ff(Nt),qi=e.prevMonthNav.contains(Kt),Fn=e.nextMonthNav.contains(Kt);qi||Fn?qn(qi?-1:1):e.yearElements.indexOf(Kt)>=0?Kt.select():Kt.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):Kt.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}return function a(){e.element=e.input=n,e.isOpen=!1,function lo(){var Nt=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Kt=yh(yh({},JSON.parse(JSON.stringify(n.dataset||{}))),i),qi={};e.config.parseDate=Kt.parseDate,e.config.formatDate=Kt.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(ws){e.config._enable=Yf(ws)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(ws){e.config._disable=Yf(ws)}});var Fn="time"===Kt.mode;Kt.dateFormat||!Kt.enableTime&&!Fn||(qi.dateFormat=Kt.noCalendar||Fn?"H:i"+(Kt.enableSeconds?":S":""):(Xu.defaultConfig.dateFormat||Dy.dateFormat)+" H:i"+(Kt.enableSeconds?":S":"")),Kt.altInput&&(Kt.enableTime||Fn)&&!Kt.altFormat&&(qi.altFormat=Kt.noCalendar||Fn?"h:i"+(Kt.enableSeconds?":S K":" K"):(Xu.defaultConfig.altFormat||Dy.altFormat)+" h:i"+(Kt.enableSeconds?":S":"")+" K"),Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:$o("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:$o("max")});var js=function(ws){return function(hl){e.config["min"===ws?"_minTime":"_maxTime"]=e.parseDate(hl,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:js("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:js("max")}),"time"===Kt.mode&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,qi,Kt);for(var Da=0;Da<Nt.length;Da++)e.config[Nt[Da]]=!0===e.config[Nt[Da]]||"true"===e.config[Nt[Da]];for(s2.filter(function(ws){return void 0!==e.config[ws]}).forEach(function(ws){e.config[ws]=c2(e.config[ws]||[]).map(d)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&"single"===e.config.mode&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Da=0;Da<e.config.plugins.length;Da++){var $s=e.config.plugins[Da](e)||{};for(var Ea in $s)s2.indexOf(Ea)>-1?e.config[Ea]=c2($s[Ea]).map(d).concat(e.config[Ea]):typeof Kt[Ea]>"u"&&(e.config[Ea]=$s[Ea])}Kt.altInputClass||(e.config.altInputClass=Jr().className+" "+e.config.altInputClass),Kl("onParseConfig")}(),Lc(),function Zc(){e.input=Jr(),e.input?(e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Jo(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Uh()):e.config.errorHandler(new Error("Invalid input element specified"))}(),function io(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var Nt=e.config.defaultDate||("INPUT"!==e.input.nodeName&&"TEXTAREA"!==e.input.nodeName||!e.input.placeholder||e.input.value!==e.input.placeholder?e.input.value:null);Nt&&gv(Nt,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),void 0!==e.config.minTime&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),void 0!==e.config.maxTime&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}(),function r(){e.utils={getDaysInMonth:function(Nt,Kt){return void 0===Nt&&(Nt=e.currentMonth),void 0===Kt&&(Kt=e.currentYear),1===Nt&&(Kt%4==0&&Kt%100!=0||Kt%400==0)?29:e.l10n.daysInMonth[Nt]}}}(),e.isMobile||function zi(){var Nt=window.document.createDocumentFragment();if(e.calendarContainer=Jo("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(Nt.appendChild(function La(){return e.monthNav=Jo("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Jo("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Jo("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Sr(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(Nt){e.__hidePrevMonthArrow!==Nt&&(Hh(e.prevMonthNav,"flatpickr-disabled",Nt),e.__hidePrevMonthArrow=Nt)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(Nt){e.__hideNextMonthArrow!==Nt&&(Hh(e.nextMonthNav,"flatpickr-disabled",Nt),e.__hideNextMonthArrow=Nt)}}),e.currentYearElement=e.yearElements[0],T_(),e.monthNav}()),e.innerContainer=Jo("div","flatpickr-innerContainer"),e.config.weekNumbers){var Kt=function Ca(){e.calendarContainer.classList.add("hasWeeks");var Nt=Jo("div","flatpickr-weekwrapper");Nt.appendChild(Jo("span","flatpickr-weekday",e.l10n.weekAbbreviation));var Kt=Jo("div","flatpickr-weeks");return Nt.appendChild(Kt),{weekWrapper:Nt,weekNumbers:Kt}}(),qi=Kt.weekWrapper,Fn=Kt.weekNumbers;e.innerContainer.appendChild(qi),e.weekNumbers=Fn,e.weekWrapper=qi}e.rContainer=Jo("div","flatpickr-rContainer"),e.rContainer.appendChild(qs()),e.daysContainer||(e.daysContainer=Jo("div","flatpickr-days"),e.daysContainer.tabIndex=-1),Wi(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),Nt.appendChild(e.innerContainer)}e.config.enableTime&&Nt.appendChild(function ma(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var Nt=f2(e.config);e.timeContainer=Jo("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var Kt=Jo("span","flatpickr-time-separator",":"),qi=Ub("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=qi.getElementsByTagName("input")[0];var Fn=Ub("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=Fn.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=sf(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?Nt.hours:function B(Nt){switch(Nt%24){case 0:case 12:return 12;default:return Nt%12}}(Nt.hours)),e.minuteElement.value=sf(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():Nt.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(qi),e.timeContainer.appendChild(Kt),e.timeContainer.appendChild(Fn),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var Or=Ub("flatpickr-second");e.secondElement=Or.getElementsByTagName("input")[0],e.secondElement.value=sf(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():Nt.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Jo("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(Or)}return e.config.time_24hr||(e.amPM=Jo("span","flatpickr-am-pm",e.l10n.amPM[_p((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}()),Hh(e.calendarContainer,"rangeMode","range"===e.config.mode),Hh(e.calendarContainer,"animate",!0===e.config.animate),Hh(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(Nt);var Or=void 0!==e.config.appendTo&&void 0!==e.config.appendTo.nodeType;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!Or&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):void 0!==e.config.appendTo&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var sa=Jo("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(sa,e.element),sa.appendChild(e.element),e.altInput&&sa.appendChild(e.altInput),sa.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(void 0!==e.config.appendTo?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}(),function qe(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(qi){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+qi+"]"),function(Fn){return ue(Fn,"click",e[qi])})}),e.isMobile)!function Du(){var Nt=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Jo("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=Nt,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr="datetime-local"===Nt?"Y-m-d\\TH:i:S":"date"===Nt?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",void 0!==e.altInput&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}ue(e.mobileInput,"change",function(Kt){e.setDate(Ff(Kt).value,!1,e.mobileFormatStr),Kl("onChange"),Kl("onClose")})}();else{var Nt=dD(Qo,50);if(e._debouncedChange=dD(Te,U6),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&ue(e.daysContainer,"mouseover",function(qi){"range"===e.config.mode&&ui(Ff(qi))}),ue(e._input,"keydown",Bs),void 0!==e.calendarContainer&&ue(e.calendarContainer,"keydown",Bs),!e.config.inline&&!e.config.static&&ue(window,"resize",Nt),void 0!==window.ontouchstart?ue(window.document,"touchstart",Yn):ue(window.document,"mousedown",Yn),ue(window.document,"focus",Yn,{capture:!0}),!0===e.config.clickOpens&&(ue(e._input,"focus",e.open),ue(e._input,"click",e.open)),void 0!==e.daysContainer&&(ue(e.monthNav,"click",fE),ue(e.monthNav,["keyup","increment"],ge),ue(e.daysContainer,"click",kh)),void 0!==e.timeContainer&&void 0!==e.minuteElement&&void 0!==e.hourElement){ue(e.timeContainer,["increment"],D),ue(e.timeContainer,"blur",D,{capture:!0}),ue(e.timeContainer,"click",ut),ue([e.hourElement,e.minuteElement],["focus","click"],function(qi){return Ff(qi).select()}),void 0!==e.secondElement&&ue(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),void 0!==e.amPM&&ue(e.amPM,"click",function(qi){D(qi)})}e.config.allowInput&&ue(e._input,"blur",er)}}(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&ae(e.config.noCalendar?e.latestSelectedDateObj:void 0),em(!1)),p();var Nt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&Nt&&$d(),Kl("onReady")}(),e}function Ay(n,i){for(var e=Array.prototype.slice.call(n).filter(function(d){return d instanceof HTMLElement}),r=[],a=0;a<e.length;a++){var o=e[a];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=j6(o,i||{}),r.push(o._flatpickr)}catch(d){console.error(d)}}return 1===r.length?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return Ay(this,n)},HTMLElement.prototype.flatpickr=function(n){return Ay([this],n)});var Xu=function(n,i){return"string"==typeof n?Ay(window.document.querySelectorAll(n),i):n instanceof Node?Ay([n],i):Ay(n,i)};Xu.defaultConfig={},Xu.l10ns={en:yh({},l2),default:yh({},l2)},Xu.localize=function(n){Xu.l10ns.default=yh(yh({},Xu.l10ns.default),n)},Xu.setDefaults=function(n){Xu.defaultConfig=yh(yh({},Xu.defaultConfig),n)},Xu.parseDate=d2({}),Xu.formatDate=fD({}),Xu.compareDates=Bf,typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return Ay(this,n)}),Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof n?parseInt(n,10):n))},typeof window<"u"&&(window.flatpickr=Xu);const $6=Xu;let p2=(()=>{class n{constructor(){this.altFormat="F j, Y",this.altInput=!1,this.altInputClass="",this.allowInput=!1,this.allowInvalidPreload=!1,this.appendTo=void 0,this.ariaDateFormat="F j, Y",this.clickOpens=!0,this.dateFormat="Y-m-d",this.defaultHour=12,this.defaultMinute=0,this.defaultSeconds=0,this.disable=[],this.disableMobile=!1,this.enableTime=!1,this.enableSeconds=!1,this.formatDate=void 0,this.hourIncrement=1,this.inline=!1,this.maxDate=void 0,this.minDate=void 0,this.maxTime=void 0,this.minTime=void 0,this.minuteIncrement=5,this.mode="single",this.nextArrow=">",this.noCalendar=!1,this.now=new Date,this.prevArrow="<",this.shorthandCurrentMonth=!1,this.static=!1,this.time24hr=!1,this.utc=!1,this.weekNumbers=!1,this.wrap=!1,this.plugins=[],this.locale="default",this.convertModelValue=!1,this.showMonths=1,this.monthSelectorType="static",this.ignoredFocusElements=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.wxM({token:n,factory:n.\u0275fac}),n})();const W6={provide:j.Y6,useExisting:(0,t.wd)(()=>$b),multi:!0};let $b=(()=>{class n{constructor(e,r,a){this.elm=e,this.defaults=r,this.renderer=a,this.options={},this.ignoredFocusElements=[],this.flatpickrReady=new t._w7,this.flatpickrChange=new t._w7,this.flatpickrValueUpdate=new t._w7,this.flatpickrOpen=new t._w7,this.flatpickrClose=new t._w7,this.flatpickrMonthChange=new t._w7,this.flatpickrYearChange=new t._w7,this.flatpickrDayCreate=new t._w7,this.isDisabled=!1,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngAfterViewInit(){const e={altFormat:this.altFormat,altInput:this.altInput,altInputClass:this.altInputClass,allowInput:this.allowInput,allowInvalidPreload:this.allowInvalidPreload,appendTo:this.appendTo,ariaDateFormat:this.ariaDateFormat,clickOpens:this.clickOpens,dateFormat:this.dateFormat,defaultHour:this.defaultHour,defaultMinute:this.defaultMinute,defaultSeconds:this.defaultSeconds,disable:this.disable,disableMobile:this.disableMobile,enable:this.enable,enableTime:this.enableTime,enableSeconds:this.enableSeconds,formatDate:this.formatDate,hourIncrement:this.hourIncrement,defaultDate:this.initialValue,inline:this.inline,maxDate:this.maxDate,minDate:this.minDate,maxTime:this.maxTime,minTime:this.minTime,minuteIncrement:this.minuteIncrement,mode:this.mode,nextArrow:this.nextArrow,noCalendar:this.noCalendar,now:this.now,parseDate:this.parseDate,prevArrow:this.prevArrow,shorthandCurrentMonth:this.shorthandCurrentMonth,showMonths:this.showMonths,monthSelectorType:this.monthSelectorType,static:this.static,time24hr:this.time24hr,weekNumbers:this.weekNumbers,getWeek:this.getWeek,wrap:this.wrap,plugins:this.plugins,locale:this.locale,ignoredFocusElements:this.ignoredFocusElements,onChange:(r,a,o)=>{this.flatpickrChange.emit({selectedDates:r,dateString:a,instance:o})},onOpen:(r,a,o)=>{this.flatpickrOpen.emit({selectedDates:r,dateString:a,instance:o})},onClose:(r,a,o)=>{this.flatpickrClose.emit({selectedDates:r,dateString:a,instance:o})},onMonthChange:(r,a,o)=>{this.flatpickrMonthChange.emit({selectedDates:r,dateString:a,instance:o})},onYearChange:(r,a,o)=>{this.flatpickrYearChange.emit({selectedDates:r,dateString:a,instance:o})},onReady:(r,a,o)=>{this.flatpickrReady.emit({selectedDates:r,dateString:a,instance:o})},onValueUpdate:(r,a,o)=>{this.flatpickrValueUpdate.emit({selectedDates:r,dateString:a,instance:o})},onDayCreate:(r,a,o,d)=>{this.flatpickrDayCreate.emit({selectedDates:r,dateString:a,instance:o,dayElement:d})}};Object.keys(e).forEach(r=>{typeof e[r]>"u"&&(e[r]=typeof this.options[r]<"u"?this.options[r]:this.defaults[r])}),e.time_24hr=e.time24hr,e.altInputClass=(e.altInputClass||"")+" "+this.elm.nativeElement.className,e.enable||delete e.enable,this.instance=$6(this.elm.nativeElement,e),this.setDisabledState(this.isDisabled)}ngOnChanges(e){this.instance&&Object.keys(e).forEach(r=>{this.instance.set(r,this[r])})}ngOnDestroy(){this.instance&&this.instance.destroy()}writeValue(e){let r=e;this.convertModelValue&&"range"===this.mode&&e&&(r=[e.from,e.to]),this.instance?this.instance.setDate(r):this.initialValue=r}registerOnChange(e){this.onChangeFn=e}registerOnTouched(e){this.onTouchedFn=e}setDisabledState(e){this.isDisabled=e,this.instance&&(this.isDisabled?this.renderer.setProperty(this.instance._input,"disabled","disabled"):this.renderer.removeAttribute(this.instance._input,"disabled"))}inputChanged(){const e=this.elm.nativeElement.value;if(this.convertModelValue&&"string"==typeof e)switch(this.mode){case"multiple":const r=e.split("; ").map(d=>this.instance.parseDate(d,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn(r);break;case"range":const[a,o]=e.split(this.instance.l10n.rangeSeparator).map(d=>this.instance.parseDate(d,this.instance.config.dateFormat,!this.instance.config.enableTime));this.onChangeFn({from:a,to:o});break;default:this.onChangeFn(this.instance.parseDate(e,this.instance.config.dateFormat,!this.instance.config.enableTime))}else this.onChangeFn(e)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.GMv),t.GI1(p2),t.GI1(t.q87))},n.\u0275dir=t.Sc5({type:n,selectors:[["","mwlFlatpickr",""]],hostBindings:function(e,r){1&e&&t.qCj("blur",function(){return r.onTouchedFn()})("input",function(){return r.inputChanged()})},inputs:{options:"options",altFormat:"altFormat",altInput:"altInput",altInputClass:"altInputClass",allowInput:"allowInput",allowInvalidPreload:"allowInvalidPreload",appendTo:"appendTo",ariaDateFormat:"ariaDateFormat",clickOpens:"clickOpens",dateFormat:"dateFormat",defaultHour:"defaultHour",defaultMinute:"defaultMinute",defaultSeconds:"defaultSeconds",disable:"disable",disableMobile:"disableMobile",enable:"enable",enableTime:"enableTime",enableSeconds:"enableSeconds",formatDate:"formatDate",hourIncrement:"hourIncrement",inline:"inline",maxDate:"maxDate",minDate:"minDate",maxTime:"maxTime",minTime:"minTime",minuteIncrement:"minuteIncrement",mode:"mode",nextArrow:"nextArrow",noCalendar:"noCalendar",now:"now",parseDate:"parseDate",prevArrow:"prevArrow",shorthandCurrentMonth:"shorthandCurrentMonth",showMonths:"showMonths",static:"static",time24hr:"time24hr",weekNumbers:"weekNumbers",getWeek:"getWeek",wrap:"wrap",plugins:"plugins",locale:"locale",convertModelValue:"convertModelValue",monthSelectorType:"monthSelectorType",ignoredFocusElements:"ignoredFocusElements"},outputs:{flatpickrReady:"flatpickrReady",flatpickrChange:"flatpickrChange",flatpickrValueUpdate:"flatpickrValueUpdate",flatpickrOpen:"flatpickrOpen",flatpickrClose:"flatpickrClose",flatpickrMonthChange:"flatpickrMonthChange",flatpickrYearChange:"flatpickrYearChange",flatpickrDayCreate:"flatpickrDayCreate"},exportAs:["mwlFlatpickr"],features:[t.M5G([W6]),t.SYr]}),n})();const mD=new t.UbH("flatpickr defaults");function X6(n){const i=new p2;return Object.assign(i,n),i}let q6=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:mD,useValue:e},{provide:p2,useFactory:X6,deps:[mD]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({}),n})();const Z6=["*"],K6=["rootEl"],Iy=n=>({$implicit:n});function J6(n,i){if(1&n&&(t.I0R(0,"div",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}function Q6(n,i){if(1&n&&(t.I0R(0,"span",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}function ez(n,i){if(1&n&&(t.I0R(0,"a",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}function tz(n,i){if(1&n&&(t.I0R(0,"tr",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}function iz(n,i){if(1&n&&(t.I0R(0,"th",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}function nz(n,i){if(1&n&&(t.I0R(0,"td",1,2),t.C_f(2,3),t.C$Y()),2&n){const e=t.GaO();t.E7m("ngClass",e.elClasses||"")("ngStyle",e.elStyle||null),t.yG2(2),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.S45(4,Iy,e.renderProps))}}const rz=["dayHeaderContent"],az=["dayCellContent"],sz=["weekNumberContent"],oz=["nowIndicatorContent"],lz=["eventContent"],cz=["slotLaneContent"],uz=["slotLabelContent"],dz=["allDayContent"],hz=["moreLinkContent"],fz=["noEventsContent"],pz=["resourceAreaHeaderContent"],mz=["resourceGroupLabelContent"],gz=["resourceLabelContent"],vz=["resourceLaneContent"],_z=["resourceGroupLaneContent"];function yz(n,i){if(1&n&&t.wR5(0,"transport-container",1),2&n){const e=i.$implicit,r=t.GaO();t.E7m("inPlaceOf",e.containerEl)("reportEl",e.reportNewContainerEl)("elTag",e.elTag)("elClasses",e.elClasses)("elStyle",e.elStyle)("elAttrs",e.elAttrs)("template",r.templateMap[e.generatorName])("renderProps",e.renderProps)}}const gD={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},xz=["events","eventSources","resources"],bz=Object.prototype.hasOwnProperty;function Wb(n){return Array.isArray(n)?n.map(Wb):n instanceof Date?new Date(n.valueOf()):"object"==typeof n&&n?vD(n,Wb):n}function vD(n,i){const e={};for(const r in n)bz.call(n,r)&&(e[r]=i(n[r],r));return e}function m2(n,i){if(n===i)return!0;if(n&&i&&"object"==typeof n&&"object"==typeof i){if(n.constructor!==i.constructor)return!1;var e,r,a;if(Array.isArray(n)){if((e=n.length)!=i.length)return!1;for(r=e;0!=r--;)if(!m2(n[r],i[r]))return!1;return!0}if(n.constructor===RegExp)return n.source===i.source&&n.flags===i.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===i.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===i.toString();if((e=(a=Object.keys(n)).length)!==Object.keys(i).length)return!1;for(r=e;0!=r--;)if(!Object.prototype.hasOwnProperty.call(i,a[r]))return!1;for(r=e;0!=r--;){var o=a[r];if(!m2(n[o],i[o]))return!1}return!0}return n!=n&&i!=i}const Xb=typeof document<"u"?document.createDocumentFragment():null;let wz=(()=>{class n{constructor(e){this.element=e}ngAfterViewInit(){Xb&&Xb.appendChild(this.element.nativeElement)}ngOnDestroy(){Xb&&Xb.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.GMv))},n.\u0275cmp=t.In1({type:n,selectors:[["offscreen-fragment"]],ngContentSelectors:Z6,decls:1,vars:0,template:function(e,r){1&e&&(t.kPM(),t._Xx(0))},encapsulation:2}),n})();const My=typeof document<"u"?document.createDocumentFragment():null;let Cz=(()=>{class n{ngAfterViewInit(){const e=this.rootElRef?.nativeElement;_D(e,this.inPlaceOf),g2(e,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(e)}ngOnChanges(e){const r=this.rootElRef?.nativeElement;if(r)if(this.inPlaceOf.parentNode!==My)_D(r,this.inPlaceOf),g2(r,void 0,this.elAttrs),this.reportEl(r);else{const a=e.elAttrs;a&&g2(r,a.previousValue,a.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===My&&My&&My.removeChild(this.inPlaceOf),this.reportEl(null)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.In1({type:n,selectors:[["transport-container"]],viewQuery:function(e,r){if(1&e&&t.CC$(K6,5),2&e){let a;t.wto(a=t.Gqi())&&(r.rootElRef=a.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[t.SYr],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&t.yuY(0,J6,3,6,"ng-template",0)(1,Q6,3,6,"ng-template",0)(2,ez,3,6,"ng-template",0)(3,tz,3,6,"ng-template",0)(4,iz,3,6,"ng-template",0)(5,nz,3,6,"ng-template",0),2&e&&(t.E7m("ngIf","div"==r.elTag),t.yG2(),t.E7m("ngIf","span"==r.elTag),t.yG2(),t.E7m("ngIf","a"==r.elTag),t.yG2(),t.E7m("ngIf","tr"==r.elTag),t.yG2(),t.E7m("ngIf","th"==r.elTag),t.yG2(),t.E7m("ngIf","td"==r.elTag))},dependencies:[Me.u_,Me.QF,Me.Qt,Me.XV],encapsulation:2}),n})();function _D(n,i){i.parentNode?.insertBefore(n,i.nextSibling),My&&My.appendChild(i)}function g2(n,i={},e={}){for(const r in i)r in e||(n[r]=null);for(const r in e)n[r]=e[r]}let Ez=(()=>{class n{constructor(e,r){this.element=e,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const a=new F5;a.subscribe(o=>{this.customRenderingMap=o,this.customRenderingArray=void 0,r.detectChanges()}),this.handleCustomRendering=a.handle.bind(a),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:e}=this,r={...this.options,...this.buildInputOptions()};this.optionSnapshot=vD(r,(p,D)=>e&&gD[D]?Wb(p):p);const a=this.element.nativeElement,o=this.calendar=new VB(a,{...r,...this.buildExtraOptions()}),d=a.closest("ion-content");d&&d.componentOnReady?d.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{o.render()})}):o.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:e,optionSnapshot:r}=this,a={...this.options,...this.buildInputOptions()},o={},d=[];for(const D in a)if(a.hasOwnProperty(D)){let P=a[D];e&&gD[D]?m2(r[D],P)||(r[D]=Wb(P),d.push(D)):r[D]!==P&&(r[D]=P,d.push(D)),o[D]=P}const p=Object.keys(r);for(const D of p)D in a||(delete r[D],d.push(D));d.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...o,...this.buildExtraOptions()},d))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const e={};for(const r of xz){const a=this[r];null!=a&&(e[r]=a)}return e}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplaces:!0}}trackCustomRendering(e,r){return r.id}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.GMv),t.GI1(t.kD9))},n.\u0275cmp=t.In1({type:n,selectors:[["full-calendar"]],contentQueries:function(e,r,a){if(1&e&&(t.szK(a,rz,7),t.szK(a,az,7),t.szK(a,sz,7),t.szK(a,oz,7),t.szK(a,lz,7),t.szK(a,cz,7),t.szK(a,uz,7),t.szK(a,dz,7),t.szK(a,hz,7),t.szK(a,fz,7),t.szK(a,pz,7),t.szK(a,mz,7),t.szK(a,gz,7),t.szK(a,vz,7),t.szK(a,_z,7)),2&e){let o;t.wto(o=t.Gqi())&&(r.dayHeaderContent=o.first),t.wto(o=t.Gqi())&&(r.dayCellContent=o.first),t.wto(o=t.Gqi())&&(r.weekNumberContent=o.first),t.wto(o=t.Gqi())&&(r.nowIndicatorContent=o.first),t.wto(o=t.Gqi())&&(r.eventContent=o.first),t.wto(o=t.Gqi())&&(r.slotLaneContent=o.first),t.wto(o=t.Gqi())&&(r.slotLabelContent=o.first),t.wto(o=t.Gqi())&&(r.allDayContent=o.first),t.wto(o=t.Gqi())&&(r.moreLinkContent=o.first),t.wto(o=t.Gqi())&&(r.noEventsContent=o.first),t.wto(o=t.Gqi())&&(r.resourceAreaHeaderContent=o.first),t.wto(o=t.Gqi())&&(r.resourceGroupLabelContent=o.first),t.wto(o=t.Gqi())&&(r.resourceLabelContent=o.first),t.wto(o=t.Gqi())&&(r.resourceLaneContent=o.first),t.wto(o=t.Gqi())&&(r.resourceGroupLaneContent=o.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(e,r){1&e&&(t.I0R(0,"offscreen-fragment"),t.yuY(1,yz,1,8,"transport-container",0),t.C$Y()),2&e&&(t.yG2(),t.E7m("ngForOf",r.customRenderings)("ngForTrackBy",r.trackCustomRendering))},dependencies:[wz,Cz,Me.ay],encapsulation:2}),n})(),kz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[Me.MD]]}),n})();const Tz=["eventModal"];function Sz(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",35)(1,"a",36),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.showeditEvent())}),t.OEk(2,"Edit"),t.C$Y()()}}function Dz(n,i){if(1&n&&(t.I0R(0,"div",45)(1,"h6",51),t.OEk(2),t.wVc(3,"date"),t.C$Y()()),2&n){const e=t.GaO(2);t.yG2(2),t.oRS(" ",t.g7$(3,1,e.editEvent.start,"dd MMMM,yyyy")," ")}}function Az(n,i){if(1&n&&(t.I0R(0,"h6",52),t.wR5(1,"span",53),t.OEk(2),t.wVc(3,"date"),t.wVc(4,"date"),t.wR5(5,"span",54),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(2),t.CAO(" ",t.g7$(3,2,e.editEvent.start,"h:mm a")," - ",t.g7$(4,5,e.editEvent.end,"h:mm a")," ")}}function Iz(n,i){1&n&&(t.I0R(0,"h6",52),t.wR5(1,"span",53),t.OEk(2," - "),t.wR5(3,"span",54),t.C$Y())}function Mz(n,i){if(1&n&&(t.I0R(0,"h6",52)(1,"span",55),t.OEk(2),t.C$Y()()),2&n){const e=t.GaO(2);t.yG2(2),t.cNF(e.editEvent.extendedProps.totalDuration)}}function Rz(n,i){if(1&n&&t.OEk(0),2&n){const e=t.GaO(2);t.oRS(" ",e.editEvent.extendedProps.checkin_status," ")}}function Oz(n,i){if(1&n&&(t.I0R(0,"div",37)(1,"div",38)(2,"div",39)(3,"div",40),t.wR5(4,"i",41),t.C$Y(),t.yuY(5,Dz,4,4,"div",42),t.C$Y()(),t.I0R(6,"div",43)(7,"div",40),t.wR5(8,"i",44),t.C$Y(),t.I0R(9,"div",45),t.yuY(10,Az,6,8,"h6",46)(11,Iz,4,0),t.C$Y()(),t.I0R(12,"div",43)(13,"div",40),t.wR5(14,"i",47),t.C$Y(),t.I0R(15,"div",45),t.yuY(16,Mz,3,1,"h6",46),t.C$Y()(),t.I0R(17,"div",48)(18,"div",40),t.wR5(19,"i",49),t.C$Y(),t.I0R(20,"div",45)(21,"p",50),t.yuY(22,Rz,1,1),t.OEk(23),t.C$Y()()()()),2&n){const e=t.GaO();t.yG2(5),t.C0Y(5,e.editEvent.start?5:-1),t.yG2(5),t.C0Y(10,e.editEvent.start?10:11),t.yG2(6),t.C0Y(16,e.editEvent.extendedProps?16:-1),t.yG2(5),t.E7m("ngClass","Early"==e.editEvent.extendedProps.checkin_status?"text-warning":e.editEvent.extendedProps.checkin_status?"text-danger":"text-success"),t.yG2(),t.C0Y(22,e.editEvent.extendedProps.checkin_status?22:-1),t.yG2(),t.oRS(" ",e.editEvent.extendedProps.timeDifferencev2," ")}}let Lz=(()=>{class n{constructor(e,r,a,o){this.api=e,this.route=r,this.formBuilder=a,this.location=o,this.spinnerStatus=!1,this.attendanceData=[],this.attendanceDataList=[],this.checkIndetails={},this.urlId=null,this.company_id=null,this.isEditMode=!1,this.submitted=!1,this.calendarOptions={plugins:[YN,z6,mN,k6],headerToolbar:{right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek",center:"title",left:"prev,next today"},initialView:"dayGridMonth",themeSystem:"bootstrap",timeZone:"local",selectable:!0,navLinks:!0,eventResizableFromStart:!0,eventClick:this.handleEventClick.bind(this),events:[],eventContent:function(d){const{extendedProps:p}=d.event;return{html:`\n\n          <div >\n\n           <b>Check-in:</b> ${p.earliestCheckInTime} <br>\n            <b>Check-out:</b> ${p.latestCheckOutTime||"Ongoing"} <br>\n            <b>Total Duration:</b>   ${p.totalDuration}\n\n          </div>\n        `}}}}ngOnInit(){this.formGroup=this.formBuilder.group({check_in_time:["",[j.AQ.required]],check_out_time:["",[j.AQ.required]]}),this.route.params.subscribe(e=>{}),this.route.params.subscribe(e=>{this.urlId=e.id?Number(e.id):null,this.company_id=e.company_id?Number(e.company_id):null}),this.urlId&&this.company_id&&this.getCheckInDetail()}toggleSpinner(e){this.spinnerStatus=e}getCheckInDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`checkInDetailAllDate?emp_id=${this.urlId}&company_id=${this.company_id}`).subscribe(e=>{if(this.toggleSpinner(!1),e&&e.status){this.checkIndetails=e.data;const r=this.checkIndetails.checkInsByDate.flatMap(a=>({title:`${this.formatTime(a.earliestCheckInTime)} - ${this.formatTime(a.latestCheckOutTime)||"Ongoing"}`,start:`${a.date}T${a.earliestCheckInTime}`,end:a.latestCheckOutTime?`${a.date}T${a.latestCheckOutTime}`:null,extendedProps:{earliestCheckInTime:this.formatTime(a.earliestCheckInTime),latestCheckOutTime:this.formatTime(a.latestCheckOutTime),totalDuration:a.total_duration,checkin_status:a.checkin_status,timeDifferencev2:a.timeDifferencev2},className:"bg-warning-subtle"}));this.calendarOptions={...this.calendarOptions,events:r}}else this.checkIndetails=null},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}formatTime(e){if(!e)return"Invalid time";const[r,a,o]=e.split(":");return`${+r%12||12}:${a} ${+r>=12?"PM":"AM"}`}handleEventClick(e){console.log(e),this.isEditMode=!0,this.editEvent=e.event,console.log(this.editEvent),this.eventModal?.show(),setTimeout(()=>{document.querySelector(".event-details").style.display="block",document.querySelector(".event-form").style.display="none",document.getElementById("btn-delete-event")?.classList.remove("d-none"),document.querySelector("#edit-event-btn").innerHTML="edit",document.getElementById("btn-save-event").setAttribute("hidden","true")},100),this.formGroup=this.formBuilder.group({check_in_time:e.event.extendedProps.earliestCheckInTime,check_out_time:e.event.extendedProps.latestCheckOutTime})}showeditEvent(){"cancel"==document.querySelector("#edit-event-btn")?.innerHTML?this.eventModal?.hide():(document.querySelector(".event-details").style.display="none",document.querySelector(".event-form").style.display="block",document.getElementById("btn-save-event").removeAttribute("hidden"),document.querySelector("#btn-save-event").innerHTML="Update Event",document.querySelector("#edit-event-btn").innerHTML="cancel")}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(T.gV),t.GI1(j.im),t.GI1(Me.oB))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-atten-calender"]],viewQuery:function(r,a){if(1&r&&t.CC$(Tz,5),2&r){let o;t.wto(o=t.Gqi())&&(a.eventModal=o.first)}},decls:47,vars:10,consts:[[1,"calendar-wrapper","d-lg-flex","gap-4"],[1,"w-100"],[1,"card","card-h-100"],[1,"d-flex","justify-content-end"],["href","javascript:window.print()",1,"btn","btn-success","me-3","mt-2"],[1,"ri-printer-line","align-bottom","me-1"],[1,"btn","btn-secondary","me-3","mt-2",3,"click"],[1,"mdi","mdi-keyboard-backspace","align-baseline","me-1"],[1,""],["id","calendar"],[3,"options"],["bsModal","","id","event-modal","tabindex","-1",1,"modal","fade"],["eventModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],["id","modal-title",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4"],["name","event-form","id","form-event","novalidate","",1,"needs-validation",3,"formGroup"],["class","text-end"],["class","event-details"],[1,"row","event-form"],["id","event-time",1,"col-12"],[1,"row"],[1,"col-6"],[1,"mb-3"],[1,"form-label"],[1,"input-group"],["id","timepicker1","type","text","mwlFlatpickr","","formControlName","check_in_time","placeholder","Select start time","readonly","",1,"form-control","flatpickr","flatpickr-input",3,"noCalendar","enableTime","dateFormat"],[1,"input-group-text"],[1,"ri-time-line"],["id","timepicker2","type","text","mwlFlatpickr","","formControlName","check_out_time","placeholder","Select end time","readonly","",1,"form-control","flatpickr","flatpickr-input",3,"noCalendar","enableTime","dateFormat"],[1,"hstack","gap-2","justify-content-end"],["type","submit","id","btn-save-event",1,"btn","btn-success"],[1,"text-end"],["href","javascript:void(0);","id","edit-event-btn","role","button",1,"btn","btn-sm","btn-subtle-primary",3,"click"],[1,"event-details"],[1,"d-flex","mb-2"],[1,"flex-grow-1","d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"ri-calendar-event-line","text-muted","fs-lg"],["class","flex-grow-1"],[1,"d-flex","align-items-center","mb-2"],[1,"ri-time-line","text-muted","fs-lg"],[1,"flex-grow-1"],["class","d-block fw-semibold mb-0"],[1,"mdi","mdi-timer-sand-complete","text-muted","fs-lg"],[1,"d-flex","mb-3"],[1,"ri-discuss-line","text-muted","fs-lg"],["id","event-description-tag",1,"d-block","mb-0",3,"ngClass"],["id","event-start-date-tag",1,"d-block","fw-semibold","mb-0"],[1,"d-block","fw-semibold","mb-0"],["id","event-timepicker1-tag"],["id","event-timepicker2-tag"],["id","event-location-tag"]],template:function(r,a){if(1&r){const o=t.KQA();t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),t.wR5(5,"i",5),t.OEk(6," Print"),t.C$Y(),t.I0R(7,"button",6),t.qCj("click",function(){return a.goBack()}),t.wR5(8,"i",7),t.OEk(9," Back "),t.C$Y()(),t.I0R(10,"div",8)(11,"div",9),t.wR5(12,"full-calendar",10),t.C$Y()()()()(),t.I0R(13,"div",11,12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"h5",16),t.OEk(19,"Check In Deatils"),t.C$Y(),t.I0R(20,"button",17),t.qCj("click",function(){t.usT(o);const p=t.Gew(14);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(21,"div",18)(22,"form",19),t.yuY(23,Sz,3,0,"div",20)(24,Oz,24,6,"div",21),t.I0R(25,"div",22)(26,"div",23)(27,"div",24)(28,"div",25)(29,"div",26)(30,"label",27),t.OEk(31,"Start Time"),t.C$Y(),t.I0R(32,"div",28),t.wR5(33,"input",29),t.I0R(34,"span",30),t.wR5(35,"i",31),t.C$Y()()()(),t.I0R(36,"div",25)(37,"div",26)(38,"label",27),t.OEk(39,"End Time"),t.C$Y(),t.I0R(40,"div",28),t.wR5(41,"input",32),t.I0R(42,"span",30),t.wR5(43,"i",31),t.C$Y()()()()()()(),t.I0R(44,"div",33)(45,"button",34),t.OEk(46," Add Event "),t.C$Y()()()()()()()}2&r&&(t.yG2(12),t.E7m("options",a.calendarOptions),t.yG2(10),t.E7m("formGroup",a.formGroup),t.yG2(),t.C0Y(23,a.isEditMode?23:-1),t.yG2(),t.C0Y(24,a.editEvent?24:-1),t.yG2(9),t.E7m("noCalendar",!0)("enableTime",!0)("dateFormat","H:i"),t.yG2(8),t.E7m("noCalendar",!0)("enableTime",!0)("dateFormat","H:i"))},dependencies:[Me.QF,j.sz,j.ot,j.ue,j.u,j.uW,j.Wo,nf.uK,$b,Ez,Me.y]})}return n})();function Pz(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function Fz(n,i){if(1&n&&(t.I0R(0,"span",89),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}function Bz(n,i){if(1&n&&(t.I0R(0,"th",49),t.OEk(1),t.wR5(2,"br"),t.I0R(3,"small"),t.OEk(4),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(),t.oRS(" ",e.date," "),t.yG2(3),t.cNF(e.day)}}function Nz(n,i){if(1&n){const e=t.KQA();t.I0R(0,"td",97),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO().$implicit,d=t.GaO();return t.Gew(113).show(),t.CGJ(d.setModalData(a,o.name,o.image))}),t.I0R(1,"div",98)(2,"div",99)(3,"span",100),t.OEk(4," \u2714 "),t.C$Y()()()()}}function zz(n,i){1&n&&(t.I0R(0,"td")(1,"div",98)(2,"div",99)(3,"span",101),t.OEk(4," L "),t.C$Y()()()())}function Yz(n,i){if(1&n&&(t.I0R(0,"td")(1,"div",98)(2,"div",102)(3,"span",103),t.OEk(4," H "),t.C$Y()()()()),2&n){const e=t.GaO().$implicit;t.yG2(2),t._6D("tooltip",e.holiday_name)}}function Gz(n,i){1&n&&(t.I0R(0,"td")(1,"div",98)(2,"div",99)(3,"span",104),t.OEk(4," \u2717 "),t.C$Y()()()())}function Hz(n,i){if(1&n&&t.yuY(0,Nz,5,0,"td",96)(1,zz,5,0)(2,Yz,5,1)(3,Gz,5,0),2&n){const e=i.$implicit;t.C0Y(0,"Present"==e.attendance_status?0:"Leave"==e.attendance_status?1:"Holiday"==e.attendance_status?2:3)}}const Vz=n=>["/employee-detail",n],Uz=()=>({tab:"personalDetails"});function jz(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td")(2,"div",90)(3,"div",91),t.wR5(4,"img",92),t.C$Y(),t.I0R(5,"div",93)(6,"h5",94)(7,"a",95),t.OEk(8),t.C$Y()(),t.I0R(9,"p",57),t.OEk(10),t.C$Y()()()(),t.c53(11,Hz,4,1,null,null,t.wJt),t.I0R(13,"td")(14,"span",48),t.OEk(15),t.C$Y()(),t.I0R(16,"td")(17,"span",48),t.OEk(18),t.C$Y()(),t.I0R(19,"td")(20,"span",48),t.OEk(21),t.C$Y()(),t.I0R(22,"td")(23,"span",48),t.OEk(24),t.C$Y()()()),2&n){const e=i.$implicit;t.yG2(4),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(3),t.E7m("routerLink",t.S45(9,Vz,e.id))("queryParams",t.q4q(11,Uz)),t.yG2(),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.designation," "),t.yG2(),t.oho(e.attendance),t.yG2(4),t.cNF(e.totals.totalPresent),t.yG2(3),t.cNF(e.totals.totalAbsent),t.yG2(3),t.cNF(e.totals.totalLeave),t.yG2(3),t.cNF(e.totals.totalHolidays)}}function $z(n,i){1&n&&(t.I0R(0,"div",50)(1,"div",105)(2,"span",106),t.OEk(3,"Loading..."),t.C$Y()()())}function Wz(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",107),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredAttendanceData?null:e.filteredAttendanceData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function Xz(n,i){if(1&n&&t.wR5(0,"img",126),2&n){const e=t.GaO(2);t._6D("src",e.timeLineData.userImage,t.K6U)}}function qz(n,i){1&n&&(t.I0R(0,"div",127),t.wR5(1,"img",128),t.C$Y())}function Zz(n,i){if(1&n&&t.OEk(0),2&n){const e=t.GaO(2);t.oRS(" by ",e.timeLineData.timeDifference," ")}}function Kz(n,i){1&n&&t.OEk(0," Not Check-out Yet ")}function Jz(n,i){if(1&n&&t.OEk(0),2&n){const e=t.GaO(2);t.oRS(" ",e.formatTime(e.timeLineData.last_check_out_time)," ")}}function Qz(n,i){if(1&n&&(t.I0R(0,"li")(1,"h6",129),t.OEk(2),t.C$Y(),t.I0R(3,"p",130),t.wR5(4,"i",131),t.OEk(5),t.C$Y()()),2&n){const e=i.$implicit,r=t.GaO(3);t.yG2(2),t.cNF(e.action),t.yG2(3),t.oRS(" ",r.formatTime(e.time)," ")}}function e8(n,i){if(1&n&&t.c53(0,Qz,6,2,"li",null,t.wJt),2&n){const e=t.GaO(2);t.oho(e.timeLineData.timeline)}}function t8(n,i){if(1&n&&(t.I0R(0,"div",2)(1,"div",108)(2,"div",4)(3,"div",109)(4,"h6",7),t.OEk(5,"Timesheet"),t.C$Y(),t.I0R(6,"div",110),t.yuY(7,Xz,1,1,"img",111)(8,qz,2,0),t.I0R(9,"div")(10,"h6",112)(11,"a",113),t.OEk(12),t.C$Y()(),t.I0R(13,"span",114),t.OEk(14),t.wVc(15,"date"),t.C$Y(),t.I0R(16,"span",115),t.OEk(17),t.yuY(18,Zz,1,1),t.C$Y()()()(),t.I0R(19,"div",42)(20,"div",116)(21,"div",117)(22,"div",118)(23,"div",119)(24,"div",120)(25,"p",121),t.OEk(26," Check In at "),t.C$Y(),t.I0R(27,"h6",122),t.OEk(28),t.C$Y()()()()(),t.I0R(29,"div",123)(30,"div",124)(31,"span"),t.OEk(32),t.C$Y()()(),t.I0R(33,"div",117)(34,"div",118)(35,"div",119)(36,"div",120)(37,"p",121),t.OEk(38," Check Out at "),t.C$Y(),t.I0R(39,"h6",122),t.yuY(40,Kz,1,0)(41,Jz,1,1),t.C$Y()()()()()()()()(),t.I0R(42,"div",108)(43,"div",4)(44,"div",109)(45,"h6",7),t.OEk(46,"Activity"),t.C$Y()(),t.I0R(47,"div",42)(48,"ul",125),t.yuY(49,e8,2,0),t.C$Y()()()()()),2&n){const e=t.GaO();t.yG2(7),t.C0Y(7,e.timeLineData.userImage?7:8),t.yG2(5),t.cNF(e.timeLineData.userName),t.yG2(2),t.cNF(t.g7$(15,10,e.timeLineData.date,"EEE, MMM d, y")),t.yG2(2),t.E7m("ngClass","Early"==e.timeLineData.checkin_status?"bg-warning":"Late"==e.timeLineData.checkin_status?"bg-danger":"bg-success"),t.yG2(),t.oRS("",e.timeLineData.checkin_status," "),t.yG2(),t.C0Y(18,"On-Time"!=e.timeLineData.checkin_status?18:-1),t.yG2(10),t.oRS(" ",e.formatTime(e.timeLineData.last_check_in_time)," "),t.yG2(4),t.oRS("",e.timeLineData.totalDuration," hrs"),t.yG2(8),t.C0Y(40,"-"==e.timeLineData.last_check_out_time?40:41),t.yG2(9),t.C0Y(49,e.timeLineData?49:-1)}}let i8=(()=>{class n{constructor(e,r,a,o){this.api=e,this.excelService=r,this.router=a,this.route=o,this.dateChangeSubject=new Hg.E,this.spinnerStatus=!1,this.attendanceMonthyData=[],this.attendanceMonthyDataList=[],this.filteredAttendanceData=[],this.selectedDate=new Date,this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.selectedStatus="",this.departments=[],this.selectedEmp=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.filterCounts={termCount:0,designationCount:0,departmentCount:0,statusCount:0,dateCount:0,empCount:0},this.bsConfig={minMode:"month",dateInputFormat:"MMM , YYYY",showWeekNumbers:!1}}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Attendance",active:!0}],this.selectedDate=new Date;const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedDepartments=r.selectedDepartments?r.selectedDepartments.split(","):[],this.selectedDesignations=r.selectedDesignations?r.selectedDesignations.split(","):[],this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],this.selectedStatus=r.selectedStatus||null,this.selectedDate=r.date?new Date(r.date):new Date,this.formattedDate=this.formatDate(this.selectedDate);const a=new Date,o=a.getFullYear()===this.selectedDate.getFullYear()&&a.getMonth()===this.selectedDate.getMonth();this.filterCounts.dateCount=o?0:1,this.filterdata(),this.updatePaginatedData()}),this.dateChangeSubject.pipe((0,nb.o)(300)).subscribe(r=>{this.handleDateChange(r)}),this.company_id&&(this.getMonthlyCalenderData(),this.getDepartment(),this.getDesignation())}onDateChange(e){this.dateChangeSubject.next(e)}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e);const r=new Date,a=r.getFullYear()===e.getFullYear()&&r.getMonth()===e.getMonth();this.filterCounts.dateCount=a?0:1,this.router.navigate([],{relativeTo:this.route,queryParams:{date:this.formattedDate},queryParamsHandling:"merge"}),this.getMonthlyCalenderData()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}toggleSpinner(e){this.spinnerStatus=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getMonthlyCalenderData(){this.toggleSpinner(!0),this.api.getwithoutid(`getEmployeeMonthlyAttendance?company_id=${this.company_id}&date=${this.formattedDate}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.attendanceMonthyDataList=r.data||[],this.daysInMonth=r.daysInMonth,this.filterdata()):(this.attendanceMonthyData=[],this.attendanceMonthyDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}filterdata(){let e=this.attendanceMonthyDataList;this.filterCounts.termCount=0,this.filterCounts.designationCount=0,this.filterCounts.departmentCount=0,this.filterCounts.statusCount=0,this.filterCounts.empCount=0,this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase())||r.mobile.toLowerCase().includes(this.term.toLowerCase())||r.email.toLowerCase().includes(this.term.toLowerCase())||r.employee_id.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedDepartments.length>0&&(e=e.filter(r=>this.selectedDepartments.map(a=>a.toLowerCase()).includes(r.department.toLowerCase())),this.filterCounts.departmentCount=1),this.selectedDesignations&&this.selectedDesignations.length>0&&(e=e.filter(r=>this.selectedDesignations.map(a=>a.toLowerCase()).includes(r.designation.toLowerCase())),this.filterCounts.designationCount=1),this.selectedStatus&&(e=e.filter(r=>r.checkin_status===this.selectedStatus),this.filterCounts.statusCount=1),this.selectedEmp&&this.selectedEmp.length>0&&(e=e.filter(r=>this.selectedEmp.map(a=>a.toLowerCase()).includes(r.name.toLowerCase())),this.filterCounts.empCount=1),this.filteredAttendanceData=e,(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&0===this.filteredAttendanceData.length&&(this.currentPage=1),this.updatePaginatedData()}updatePaginatedData(){(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredAttendanceData.length&&(this.currentPage=1),this.attendanceMonthyData=(0,$n.cloneDeep)(this.filteredAttendanceData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term,selectedDepartments:this.selectedDepartments.join(","),selectedDesignations:this.selectedDesignations.join(","),selectedEmp:this.selectedEmp.join(","),selectedStatus:this.selectedStatus,date:this.formattedDate},queryParamsHandling:"merge"})}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.attendanceMonthyData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}exportTableToExcel(){const e={SheetNames:[],Sheets:{}},r=new Date(this.selectedDate),d=`Attendance_${r.toLocaleString("default",{month:"long"})}_${r.getFullYear()}.xlsx`,p={};this.attendanceMonthyData.forEach((D,P)=>{const B=[["ID","Name","Mobile","Email","Designation","Employee ID"],[D.id,D.name,D.mobile,D.email,D.designation,D.employee_id],[],["Date","Day","Check-in Status","Attendance Status","Total Duration","Check-in Time","Check-out Time"]];D.attendance.forEach(ge=>{B.push([ge.date,ge.holiday_name?`${ge.day} (${ge.holiday_name})`:ge.day,ge.checkin_status,ge.attendance_status,ge.totalDuration,ge.last_check_in_time,ge.last_check_out_time])});let te=D.name?D.name.replace(/[^a-zA-Z0-9]/g,""):`Employee${P+1}`;p[te]?(p[te]+=1,te+=`_${p[te]}`):p[te]=1;const ae=Kp.aoa_to_sheet(B);ae["!cols"]=[{wch:12},{wch:25},{wch:15},{wch:20},{wch:20},{wch:20},{wch:20}],e.SheetNames.push(te),e.Sheets[te]=ae}),VE(e,d)}setModalData(e,r,a){this.timeLineData={...e,userName:r,userImage:a}}formatTime(e){const[r,a,o]=e.split(":");return`${+r%12||12}:${a} ${+r>=12?"PM":"AM"}`}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}reset(){this.term="",this.selectedDepartments=[],this.selectedDesignations=[],this.selectedStatus="",this.selectedEmp=[],this.attendanceMonthyData=this.attendanceMonthyDataList,this.selectedDate=new Date,this.formattedDate=this.formatDate(this.selectedDate),this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedDepartments:null,selectedDesignations:null,selectedStatus:null,selectedEmp:null,page:1,itemsPerPage:this.currentItemsPerPage,date:this.formattedDate},queryParamsHandling:"merge"}),this.getMonthlyCalenderData()}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.designationCount+this.filterCounts.departmentCount+this.filterCounts.statusCount+this.filterCounts.dateCount+this.filterCounts.empCount}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(KE),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-attendance-monthly"]],decls:165,vars:31,consts:[["title","Attendance",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"d-flex","justify-content-start","my-1"],[1,"my-2"],[1,"text-muted"],[1,"my-2","mx-4"],[1,"flex-shrink-0"],[1,"d-xl-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box","mt-2","mt-xl-0"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"d-flex","mt-2","mt-xl-0"],["type","button","id","download-button",1,"btn","btn-primary","me-2",3,"click"],[1,"ri-file-excel-2-fill","align-bottom","me-1"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"card-body"],[1,"table-responsive","table-card","mt-1"],[1,"table","table-nowrap","table-striped-columns","mb-0","table-fixed","table-bordered"],[1,"table-light","text-center"],["scope","col"],["scope","col bg-white "],[1,"fw-bold","fs-lg"],["scope","col "],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-5","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","","id","myModal","tabindex","-1","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",2,"display","none"],["template","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","myModalLabel",1,"modal-title","fs-lg"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],["class","row"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","id","datepickers","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],["for","datepickers",1,"input-group-text","cursor-pointer"],[1,"search-box"],["bindLabel","name","bindValue","name","name","Employee name","placeholder","Select Employee name",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1","ms-2"],[1,"fs-md"],[1,"text-dark",3,"routerLink","queryParams"],["class","cursor-pointer"],[1,"cursor-pointer",3,"click"],[1,"flex-shrink-0","align-self-center"],[1,"avatar-xs"],[1,"avatar-title","rounded-circle","bg-light","text-success"],[1,"avatar-title","rounded-circle","bg-light","text-warning"],["data-bs-toggle","tooltip","placement","top",1,"avatar-xs","cursor-pointer",3,"tooltip"],[1,"avatar-title","rounded-circle","bg-light","text-primary"],[1,"avatar-title","rounded-circle","bg-light","text-danger"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"],[1,"col-lg-6"],[1,"card-header"],[1,"d-flex","align-items-center","mt-3"],["alt","","class","avatar-sm rounded-circle p-1 img-thumbnail me-2",3,"src"],[1,"mb-0"],[1,"text-reset","products"],[1,"text-mute","me-2"],[1,"badge",3,"ngClass"],[1,"row","g-3"],[1,"col-md-12"],[1,"card","border","shadow-none","mb-0","check-bg"],[1,"card-body","p-2"],[1,"text-center"],[1,"text-muted","text-truncate","mb-2"],[1,"fs-lg"],[1,"punch-info"],[1,"punch-hours"],[1,"acitivity-timeline-2","list-unstyled","mb-0","scroll-timeline"],["alt","",1,"avatar-sm","rounded-circle","p-1","img-thumbnail","me-2",3,"src"],[1,"avatar-sm","bg-light","rounded","p-1","me-2"],["src","assets/images/users/avatar-1.jpg","alt","",1,"img-fluid","d-block"],[1,"fs-sm"],[1,"text-mute"],[1,"bi","bi-clock","align-baseline","me-1"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Attendance "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,Pz,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()(),t.I0R(21,"p",17),t.OEk(22," Showing Result of Month: "),t.I0R(23,"span",18),t.OEk(24),t.wVc(25,"date"),t.C$Y()(),t.I0R(26,"div",19)(27,"h6",20),t.OEk(28," T.P"),t.I0R(29,"small",21),t.OEk(30," (Total Present)"),t.C$Y()(),t.I0R(31,"h6",22),t.OEk(32," T.A"),t.I0R(33,"small",21),t.OEk(34," (Total Absent)"),t.C$Y()(),t.I0R(35,"h6",20),t.OEk(36," T.L"),t.I0R(37,"small",21),t.OEk(38," (Total Leave)"),t.C$Y()(),t.I0R(39,"h6",22),t.OEk(40," T.H"),t.I0R(41,"small",21),t.OEk(42," (Total Hoilday)"),t.C$Y()()()(),t.I0R(43,"div",23)(44,"div",24)(45,"div",25)(46,"div",26)(47,"input",27),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDate,p)||(a.selectedDate=p),p}),t.qCj("bsValueChange",function(p){return a.onDateChange(p)}),t.C$Y(),t.I0R(48,"div",28)(49,"label",29),t.wR5(50,"i",30),t.C$Y()()()(),t.I0R(51,"div",31)(52,"input",32),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(53,"i",33),t.C$Y(),t.I0R(54,"div",34)(55,"button",35),t.qCj("click",function(){return a.exportTableToExcel()}),t.wR5(56,"i",36),t.OEk(57," Download "),t.C$Y(),t.I0R(58,"div",37)(59,"div",38)(60,"div")(61,"button",39),t.qCj("click",function(){return a.openEnd()}),t.wR5(62,"i",40),t.OEk(63," Filter "),t.yuY(64,Fz,2,1,"span",41),t.C$Y()()()()()()()(),t.I0R(65,"div",42)(66,"div",43)(67,"table",44)(68,"thead",45)(69,"tr")(70,"th",46),t.OEk(71,"Name"),t.C$Y(),t.c53(72,Bz,5,2,"th",49,t.wJt),t.I0R(74,"th",47)(75,"span",48),t.OEk(76,"T.P"),t.C$Y()(),t.I0R(77,"th",49)(78,"span",48),t.OEk(79,"T.A"),t.C$Y()(),t.I0R(80,"th",46)(81,"span",48),t.OEk(82,"T.L"),t.C$Y()(),t.I0R(83,"th",46)(84,"span",48),t.OEk(85,"T.H"),t.C$Y()()()(),t.I0R(86,"tbody"),t.c53(87,jz,25,12,"tr",null,t.wJt),t.C$Y(),t.yuY(89,$z,4,0,"div",50),t.C$Y()(),t.I0R(90,"div",51)(91,"div",52)(92,"div",53)(93,"div",54),t.wR5(94,"i",55),t.C$Y()(),t.I0R(95,"h5",56),t.OEk(96,"Sorry! No Result Found"),t.C$Y(),t.I0R(97,"p",57),t.OEk(98),t.C$Y()()(),t.I0R(99,"div",58)(100,"div",59)(101,"div",60),t.OEk(102," Showing "),t.I0R(103,"span",61),t.OEk(104),t.C$Y(),t.OEk(105," of "),t.I0R(106,"span",61),t.OEk(107),t.C$Y(),t.OEk(108," Results "),t.C$Y()(),t.I0R(109,"div",62),t.yuY(110,Wz,1,4,"pagination",63),t.C$Y()()()()()()(),t.I0R(111,"div")(112,"div",64,65)(114,"div",66)(115,"div",67)(116,"div",68)(117,"h5",69),t.OEk(118,"Attendance Info"),t.C$Y(),t.I0R(119,"button",70),t.qCj("click",function(){t.usT(o);const p=t.Gew(113);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(120,"div",71),t.yuY(121,t8,50,13,"div",72),t.C$Y()()()()(),t.I0R(122,"div",73)(123,"div",74)(124,"h5",75),t.OEk(125,"Attendance Filters"),t.C$Y(),t.I0R(126,"button",70),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(127,"div",76)(128,"div",2)(129,"div",3)(130,"div",77)(131,"p",78),t.OEk(132,"Select Month"),t.C$Y(),t.I0R(133,"div",26)(134,"input",79),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDate,p)||(a.selectedDate=p),p}),t.qCj("bsValueChange",function(p){return a.onDateChange(p)}),t.C$Y(),t.I0R(135,"div",28)(136,"label",80),t.wR5(137,"i",30),t.C$Y()()()()(),t.I0R(138,"div",3)(139,"div",77)(140,"p",78),t.OEk(141," Search name, Employee id etc... "),t.C$Y(),t.I0R(142,"div",81)(143,"input",32),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(144,"i",33),t.C$Y()()(),t.I0R(145,"div",3)(146,"div",77)(147,"p",78),t.OEk(148,"Employee Name"),t.C$Y(),t.I0R(149,"ng-select",82),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedEmp,p)||(a.selectedEmp=p),p}),t.C$Y()()(),t.I0R(150,"div",3)(151,"div",77)(152,"p",78),t.OEk(153,"Department"),t.C$Y(),t.I0R(154,"ng-select",83),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDepartments,p)||(a.selectedDepartments=p),p}),t.C$Y()()(),t.I0R(155,"div",3)(156,"div",77)(157,"p",78),t.OEk(158,"Designation"),t.C$Y(),t.I0R(159,"ng-select",84),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDesignations,p)||(a.selectedDesignations=p),p}),t.C$Y()()()()(),t.I0R(160,"div",85)(161,"button",86),t.qCj("click",function(){return a.reset()}),t.wR5(162,"i",87),t.OEk(163," Reset "),t.C$Y()()(),t.I0R(164,"div",88),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.attendanceMonthyData?null:a.attendanceMonthyData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.attendanceMonthyDataList?null:a.attendanceMonthyDataList.length),t.yG2(5),t.oRS(" ",t.g7$(25,28,a.formattedDate," MMM , yyyy"),""),t.yG2(23),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(5),t.OKB("ngModel",a.term),t.yG2(12),t.C0Y(64,a.totalFilterCount>0?64:-1),t.yG2(8),t.oho(a.daysInMonth),t.yG2(15),t.oho(a.attendanceMonthyData),t.yG2(2),t.C0Y(89,a.spinnerStatus?89:-1),t.yG2(9),t.oRS(" We've searched ",null==a.attendanceMonthyDataList?null:a.attendanceMonthyDataList.length," Employee Data. We did not find any Employee for you search. "),t.yG2(6),t.cNF(null==a.attendanceMonthyData?null:a.attendanceMonthyData.length),t.yG2(3),t.cNF(null==a.filteredAttendanceData?null:a.filteredAttendanceData.length),t.yG2(3),t.C0Y(110,null!=a.filteredAttendanceData&&a.filteredAttendanceData.length?110:-1),t.yG2(11),t.C0Y(121,a.timeLineData?121:-1),t.yG2(13),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(9),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("items",a.attendanceMonthyDataList)("multiple",!0),t.OKB("ngModel",a.selectedEmp),t.yG2(5),t.E7m("items",a.departments)("multiple",!0),t.OKB("ngModel",a.selectedDepartments),t.yG2(5),t.E7m("items",a.designations)("multiple",!0),t.OKB("ngModel",a.selectedDesignations))},dependencies:[Me.QF,Me.ay,We.O,T.ER,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,nt.im,nf.uK,my.uM,ev.UT,Vg.em,Vg.U5,Me.y],styles:[".scroll-timeline[_ngcontent-%COMP%]{max-height:400px;overflow:scroll}.punch-info[_ngcontent-%COMP%]{margin:20px 0}.punch-info[_ngcontent-%COMP%]   .punch-hours[_ngcontent-%COMP%]{background-color:#f9f9f9;border:5px solid #e2e4e6;font-size:18px;height:120px;width:120px;margin:0 auto;border-radius:50%;display:flex;align-items:center;-webkit-box-align:center;-ms-flex-align:center;justify-content:center;-webkit-justify-content:center;-ms-flex-pack:center}.check-bg[_ngcontent-%COMP%]{background-color:#f9f9f9}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.table-container[_ngcontent-%COMP%]{overflow:scroll}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;padding:10px 20px;font-family:Arial}@media screen and (min-width: 850px){table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{position:sticky;width:100px;left:0;z-index:10;background:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{position:sticky;right:0;z-index:10;background:#fff!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-last-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(2){position:sticky;right:65px;z-index:10;background:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-last-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(3){position:sticky;right:127px;z-index:10;background:#fff!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-last-child(4), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-last-child(4){position:sticky;right:191px;z-index:10;background:#fff!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:9;background:#fff}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{z-index:11}}"]})}return n})();const n8=["showModal"],r8=["deleteRecordModal"];function a8(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function s8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"ul",106)(1,"li")(2,"a",107),t.wR5(3,"i",108),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",109),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.editList(a))}),t.wR5(7,"i",110),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",111),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.removeItem(a.id))}),t.wR5(11,"i",112),t.OEk(12," Remove"),t.C$Y()()()}}const o8=(n,i)=>({"bg-info-subtle text-info":n,"bg-danger-subtle text-danger":i});function l8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",90)(1,"td")(2,"div",31)(3,"input",91),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",92),t.C$Y()(),t.I0R(5,"td",93)(6,"a",94),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",95),t.OEk(9),t.C$Y(),t.I0R(10,"td",95),t.OEk(11),t.wVc(12,"date"),t.C$Y(),t.I0R(13,"td",96)(14,"div",97)(15,"input",98),t.qCj("change",function(a){const d=t.usT(e).$implicit,p=t.GaO();return t.CGJ(p.setStatus(d,a))}),t.C$Y(),t.I0R(16,"label",99)(17,"span",100),t.OEk(18),t.C$Y()()()(),t.I0R(19,"td",101),t.OEk(20),t.wVc(21,"date"),t.C$Y(),t.I0R(22,"td")(23,"div",102)(24,"button",103),t.wR5(25,"i",104),t.C$Y(),t.yuY(26,s8,13,0,"ul",105),t.C$Y()()()}if(2&n){const e=i.$implicit,r=i.$index;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(2),t.oRS(" ",t.g7$(12,11,e.date,"EEE, dd MMM , yyyy")," "),t.yG2(4),t.E7m("checked","active"===e.status)("id","customSwitchsizemd"+r),t.yG2(),t.E7m("for","customSwitchsizemd"+r),t.yG2(),t.E7m("ngClass",t.IBC(17,o8,"active"===e.status,"inactive"===e.status)),t.yG2(),t.oRS(" ",e.status," "),t.yG2(2),t.oRS(" ",t.g7$(21,14,e.created_at,"dd MMM, YYYY")," ")}}function c8(n,i){1&n&&(t.I0R(0,"div",36)(1,"div",113)(2,"span",114),t.OEk(3,"Loading..."),t.C$Y()()())}function u8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",115),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredHoildayData?null:e.filteredHoildayData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function d8(n,i){1&n&&(t.I0R(0,"div",116),t.OEk(1,"Holiday name is required."),t.C$Y())}function h8(n,i){1&n&&(t.I0R(0,"div",116),t.OEk(1," Holiday name must be at most 45 characters "),t.C$Y())}function f8(n,i){1&n&&(t.I0R(0,"div",116),t.OEk(1,"Date is required."),t.C$Y())}function p8(n,i){1&n&&(t.I0R(0,"div",116),t.OEk(1,"Status is required."),t.C$Y())}let m8=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.holidaysData=[],this.holidaysDataList=[],this.filteredHoildayData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Holiday",active:!0}],this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],date:["",[j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`holidays?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.holidaysDataList=r.data||[],this.filterdata()):(this.holidaysData=[],this.holidaysDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const d={company_id:this.company_id,name:e.name,date:e.date,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("holidays",e.id,d).subscribe(p=>this.handleResponse(p),p=>this.handleError(p))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,date:this.f.date.value,status:this.f.status.value}}add(e){this.api.post("holidays",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("holidays",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add holidays",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",date:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit holidays",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,date:e.date,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("holidays",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("holidays-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.holidaysData.length;o++)1==this.holidaysData[o].states&&r.push(this.holidaysData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.holidaysData=this.holidaysData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.holidaysData.length;o++)1==this.holidaysData[o].states&&r.push(this.holidaysData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.holidaysData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.holidaysData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.holidaysDataList;this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase()))),this.filteredHoildayData=e,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.holidaysData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){this.term&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredHoildayData.length&&(this.currentPage=1),this.holidaysData=(0,$n.cloneDeep)(this.filteredHoildayData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term},queryParamsHandling:"merge"})}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-holidays-list"]],viewQuery:function(r,a){if(1&r&&(t.CC$(n8,5),t.CC$(r8,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:142,vars:19,consts:[["title","Holiday List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-secondary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0","d-md-flex"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Holiday Name",1,"form-control"],["class","invalid-text"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date","placeholder","Enter Date of Birth","value","date",1,"form-control",3,"ngClass"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"discount"],[1,"form-switch","form-switch-md","mb-3"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"form-check-label",3,"for"],[1,"badge","text-capitalize",3,"ngClass"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Holidays "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,a8,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"input",21),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",22),t.C$Y()(),t.I0R(27,"button",23),t.qCj("click",function(){t.usT(o);const p=t.Gew(123);return t.CGJ(p.show())}),t.wR5(28,"i",24),t.C$Y(),t.I0R(29,"button",25),t.qCj("click",function(){return a.onAdd()}),t.wR5(30,"i",26),t.OEk(31," Add Holiday "),t.C$Y()()()(),t.I0R(32,"div",27)(33,"div",28)(34,"table",29)(35,"thead",30)(36,"tr")(37,"th")(38,"div",31)(39,"input",32),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(40,"label",33),t.C$Y()(),t.I0R(41,"th",34),t.qCj("click",function(){return a.onSort("name")}),t.OEk(42," Hoilday Name "),t.C$Y(),t.I0R(43,"th",34),t.qCj("click",function(){return a.onSort("date")}),t.OEk(44," Date "),t.C$Y(),t.I0R(45,"th",34),t.qCj("click",function(){return a.onSort("status")}),t.OEk(46," Status "),t.C$Y(),t.I0R(47,"th",34),t.qCj("click",function(){return a.onSort("created_at")}),t.OEk(48," Created At "),t.C$Y(),t.I0R(49,"th"),t.OEk(50,"Action"),t.C$Y()()(),t.I0R(51,"tbody",35),t.c53(52,l8,27,20,"tr",90,t.wJt),t.C$Y(),t.yuY(54,c8,4,0,"div",36),t.C$Y()(),t.I0R(55,"div",37)(56,"div",38)(57,"div",39)(58,"div",40),t.wR5(59,"i",41),t.C$Y()(),t.I0R(60,"h5",42),t.OEk(61,"Sorry! No Result Found"),t.C$Y(),t.I0R(62,"p",43),t.OEk(63),t.C$Y()()(),t.I0R(64,"div",44)(65,"div",45)(66,"div",46),t.OEk(67," Showing "),t.I0R(68,"span",47),t.OEk(69),t.C$Y(),t.OEk(70," of "),t.I0R(71,"span",47),t.OEk(72),t.C$Y(),t.OEk(73," Results "),t.C$Y()(),t.I0R(74,"div",48),t.yuY(75,u8,1,4,"pagination",49),t.C$Y()()()()()()(),t.I0R(76,"div",50,51),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(78,"div",52)(79,"div",53)(80,"div",54)(81,"h5",55),t.OEk(82,"Add Holiday"),t.C$Y(),t.I0R(83,"button",56),t.qCj("click",function(){t.usT(o);const p=t.Gew(77);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(84,"form",57),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(85,"div",58),t.wR5(86,"div",59),t.I0R(87,"div",60)(88,"label",61),t.OEk(89,"Holiday Name "),t.I0R(90,"span",62),t.OEk(91,"*"),t.C$Y()(),t.wR5(92,"input",63),t.yuY(93,d8,2,0,"div",64)(94,h8,2,0,"div",64),t.C$Y(),t.I0R(95,"div",60)(96,"label",65),t.OEk(97,"Date"),t.I0R(98,"span",62),t.OEk(99,"*"),t.C$Y()(),t.wR5(100,"input",66),t.yuY(101,f8,2,0,"div",64),t.C$Y(),t.I0R(102,"div",60)(103,"label",67),t.OEk(104,"Status "),t.I0R(105,"span",62),t.OEk(106,"*"),t.C$Y()(),t.I0R(107,"select",68)(108,"option",69),t.OEk(109,"Select Status"),t.C$Y(),t.I0R(110,"option",70),t.OEk(111,"Active"),t.C$Y(),t.I0R(112,"option",71),t.OEk(113,"Inactive"),t.C$Y()(),t.yuY(114,p8,2,0,"div",64),t.C$Y()(),t.I0R(115,"div",72)(116,"div",73)(117,"button",74),t.qCj("click",function(){t.usT(o);const p=t.Gew(77);return t.CGJ(p.hide())}),t.wR5(118,"i",75),t.OEk(119," Close "),t.C$Y(),t.I0R(120,"button",76),t.OEk(121," Add "),t.C$Y()()()()()()(),t.I0R(122,"div",77,78)(124,"div",52)(125,"div",53)(126,"div",79)(127,"button",80),t.qCj("click",function(){t.usT(o);const p=t.Gew(123);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(128,"div",81)(129,"div",82)(130,"div",62),t.wR5(131,"i",83),t.C$Y(),t.I0R(132,"div",84)(133,"h3",85),t.OEk(134,"Are you sure ?"),t.C$Y(),t.I0R(135,"p",86),t.OEk(136," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(137,"div",87)(138,"button",88),t.qCj("click",function(){t.usT(o);const p=t.Gew(123);return t.CGJ(p.hide())}),t.OEk(139," Close "),t.C$Y(),t.I0R(140,"button",89),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(141," Yes, Delete It! "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.holidaysData?null:a.holidaysData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.holidaysDataList?null:a.holidaysDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(14),t.OKB("ngModel",a.masterSelected),t.yG2(13),t.oho(a.holidaysData),t.yG2(2),t.C0Y(54,a.spinnerStatus?54:-1),t.yG2(9),t.oRS(" We've searched ",a.holidaysDataList.length," Hoildays We did not find any Holiday for you search. "),t.yG2(6),t.cNF(null==a.holidaysData?null:a.holidaysData.length),t.yG2(3),t.cNF(null==a.filteredHoildayData?null:a.filteredHoildayData.length),t.yG2(3),t.C0Y(75,null!=a.filteredHoildayData&&a.filteredHoildayData.length?75:-1),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(93,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?93:-1),t.yG2(),t.C0Y(94,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?94:-1),t.yG2(6),t.E7m("ngClass",a.f.date&&a.f.date.hasError("required")&&a.f.date.touched?"is-invalid":""),t.yG2(),t.C0Y(101,a.f.date&&a.f.date.hasError("required")&&a.f.date.touched?101:-1),t.yG2(6),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(114,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?114:-1))},dependencies:[Me.QF,Me.ay,We.O,T.ER,Wu.uo,Wu.M3,Wu.mY,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,Me.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();const g8=["showModal"],v8=["deleteRecordModal"];function _8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1,"Total Leave Days is required."),t.C$Y())}function y8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1," Max Carry Forward Leave field is required. "),t.C$Y())}function x8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1," Max Carry Forward Leave cannot be larger than Total Leave Days. "),t.C$Y())}function b8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1,"Carry forward field is required."),t.C$Y())}function w8(n,i){if(1&n&&(t.I0R(0,"option",39),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function C8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"ul",118)(1,"li")(2,"a",119),t.wR5(3,"i",120),t.OEk(4," View"),t.C$Y()(),t.I0R(5,"li")(6,"a",121),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.editList(a))}),t.wR5(7,"i",122),t.OEk(8," Edit"),t.C$Y()(),t.I0R(9,"li")(10,"a",123),t.qCj("click",function(){t.usT(e);const a=t.GaO().$implicit,o=t.GaO();return t.CGJ(o.removeItem(a.id))}),t.wR5(11,"i",124),t.OEk(12," Remove"),t.C$Y()()()}}function E8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",107)(1,"td")(2,"div",55)(3,"input",108),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",109),t.C$Y()(),t.I0R(5,"td",110)(6,"a",111),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",112),t.OEk(9),t.C$Y(),t.I0R(10,"td",112),t.OEk(11),t.C$Y(),t.I0R(12,"td",113),t.OEk(13),t.wVc(14,"date"),t.C$Y(),t.I0R(15,"td")(16,"div",114)(17,"button",115),t.wR5(18,"i",116),t.C$Y(),t.yuY(19,C8,13,0,"ul",117),t.C$Y()()()}if(2&n){const e=i.$implicit;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(6),t.oRS(" ",e.name," "),t.yG2(2),t.oRS(" ",e.total_leave_days," "),t.yG2(2),t.oRS(" ",t.g7$(14,6,e.created_at,"dd MMM, YYYY")," ")}}function k8(n,i){1&n&&(t.I0R(0,"div",60)(1,"div",125)(2,"span",126),t.OEk(3,"Loading..."),t.C$Y()()())}function T8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",127),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredLeaveTypeData?null:e.filteredLeaveTypeData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function S8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1,"Leave Type name is required."),t.C$Y())}function D8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1," Leave Type name must be at most 45 characters "),t.C$Y())}function A8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1,"Number of days is required."),t.C$Y())}function I8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1," Number of days must be at most 45 characters "),t.C$Y())}function M8(n,i){1&n&&(t.I0R(0,"div",106),t.OEk(1," Number of days cannot exceed remaining leave days. "),t.C$Y())}let R8=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveData=[],this.leaveDataList=[],this.filteredLeaveTypeData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.isEditMode=!1,this.previousValue=null,this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Type",active:!0}],this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.formGroup=this.formBuilder.group({name:["",[j.AQ.required,j.AQ.maxLength(45)]],totalLeaveDays:["",[j.AQ.required]],status:[""]}),this.leaveForm=this.formBuilder.group({totalLeave:["",j.AQ.required],carryForward:[!1,j.AQ.required],maxCarryForward:[{value:"",disabled:!0}]}),this.leaveForm.get("carryForward").valueChanges.subscribe(r=>{const a=this.leaveForm.get("maxCarryForward");r?(a.enable(),a.setValidators([j.AQ.required,this.maxCarryForwardValidator()])):(a.disable(),a.clearValidators(),a.reset()),a.updateValueAndValidity()}),this.company_id&&(this.getLeaveType(),this.getLeaveSetting())}maxLeaveDaysValidator(e){return e.value&&e.value>this.fixedremaininggdays?{maxLeaveDaysExceeded:!0}:null}maxCarryForwardValidator(){return e=>{const r=this.leaveForm.get("totalLeave").value;return e.value>r?{maxCarryForwardExceeded:!0}:null}}get f(){return this.formGroup.controls}get l(){return this.leaveForm.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getLeaveType(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveType?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveDataList=r.data||[],this.filterdata()):(this.leaveData=[],this.leaveDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getLeaveSetting(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveSetting?company_id=${this.company_id}`).subscribe(r=>{if(this.toggleSpinner(!1),r&&r.status){const a=r.data[0];a?(this.remaining_leavedays=a.remaining_leavedays,this.fixedremaininggdays=a.remaining_leavedays,this.leaveForm.patchValue({totalLeave:a.totalannual_leavedays??"",carryForward:0!=a.carry_forword_status,maxCarryForward:a.carry_forword_leaves??""})):(this.leaveForm.patchValue({totalLeave:"",carryForward:!1,maxCarryForward:""}),this.handleError("No data found"))}else this.leaveForm.patchValue({totalLeave:"",carryForward:!1,maxCarryForward:""}),this.handleError("Unexpected response format")},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}setStatus(e,r){const d={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("leaveType",e.id,d).subscribe(p=>this.handleResponse(p),p=>this.handleError(p))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,total_leave_days:this.f.totalLeaveDays.value,status:"active"}}add(e){this.api.post("leaveType",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("leaveType",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onSubmitLeaveSetting(){this.leaveForm.valid?(this.toggleSpinner(!0),this.api.post("leaveSetting",{company_id:this.company_id,totalannual_leavedays:this.l.totalLeave.value,carry_forword_status:this.l.carryForward.value,carry_forword_leaves:this.l.maxCarryForward.value}).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))):this.leaveForm.markAllAsTouched()}onAdd(){this.l.totalLeave.value?(this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Leave Type",document.getElementById("add-btn").innerHTML="Add",this.id=null):this.toastService.error("Leave Type cannot be created unless the Total Annual Leave is added.")}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",totalLeaveDays:"",status:""})}editList(e){this.isEditMode=!0,this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Leave Type",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,totalLeaveDays:e.total_leave_days,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("leaveType",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("leaveType-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getLeaveType(),this.getLeaveSetting(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.leaveData.length;o++)1==this.leaveData[o].states&&r.push(this.leaveData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.leaveData=this.leaveData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.leaveData.length;o++)1==this.leaveData[o].states&&r.push(this.leaveData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.leaveData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.leaveDataList;this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase()))),this.filteredLeaveTypeData=e,this.updatePaginatedData()}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){this.term&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredLeaveTypeData.length&&(this.currentPage=1),this.leaveData=(0,$n.cloneDeep)(this.filteredLeaveTypeData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term},queryParamsHandling:"merge"})}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.leaveData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-leave-type"]],viewQuery:function(r,a){if(1&r&&(t.CC$(g8,5),t.CC$(v8,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:174,vars:26,consts:[["title","Leave Type List",3,"breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-lg-4"],[1,"mb-3"],["for","totalLeave",1,"form-label"],[1,"text-danger"],["type","number","id","totalLeave","placeholder","Enter Total Leave Days","formControlName","totalLeave",1,"form-control"],["class","invalid-text"],[1,"col-lg-6"],[1,"row","mb-3"],["for","carryForward",1,"form-label"],[1,"col-2","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","id","carryForwardSwitch","formControlName","carryForward",1,"form-check-input"],["for","carryForwardSwitch",1,"form-check-label"],[1,"col-6"],["type","number","id","maxCarryForward","placeholder","Maximum Leave Days","formControlName","maxCarryForward",1,"form-control"],["class","invalid-text",4,"ngIf"],[1,"col-12"],[1,"hstack","gap-2","justify-content-start","mb-3"],[1,"btn","btn-primary","ng-star-inserted"],["id","productList"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-secondary","add-btn",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["for","product-title-input",1,"form-label"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Leave Type Name",1,"form-control"],["type","number","id","product-title-input","formControlName","totalLeaveDays","placeholder","Enter Number of days",1,"form-control"],["type","text","id","product-title-input","disabled","",1,"form-control",3,"value"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[1,"invalid-text"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"category"],["dropdown","",1,"dropdown"],["dropdownToggle","",1,"btn","btn-subtle-secondary","btn-sm","btn-icon"],[1,"bi","bi-three-dots-vertical"],["class","dropdown-menu dropdown-menu-end",4,"bsDropdownMenu"],[1,"dropdown-menu","dropdown-menu-end"],["routerLink","/ecommerce/product-details","href","javascript:void(0);",1,"dropdown-item"],[1,"ph-eye","align-middle","me-1"],[1,"dropdown-item","edit-item-btn",3,"click"],[1,"ph-pencil","align-middle","me-1"],["href","javascript:void(0);",1,"dropdown-item","remove-item-btn",3,"click"],[1,"ph-trash","align-middle","me-1"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),t.OEk(6,"Leave Settings"),t.C$Y()(),t.I0R(7,"div",6)(8,"form",7),t.qCj("ngSubmit",function(){return a.onSubmitLeaveSetting()}),t.I0R(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),t.OEk(13," Total Annual Leave Days"),t.I0R(14,"span",12),t.OEk(15,"*"),t.C$Y()(),t.wR5(16,"input",13),t.yuY(17,_8,2,0,"div",14),t.C$Y()(),t.I0R(18,"div",15)(19,"div",16)(20,"label",17),t.OEk(21," Carry forward"),t.I0R(22,"span",12),t.OEk(23,"*"),t.C$Y()(),t.I0R(24,"div",18)(25,"div",19),t.wR5(26,"input",20),t.I0R(27,"label",21),t.OEk(28),t.C$Y()()(),t.I0R(29,"div",22),t.wR5(30,"input",23),t.yuY(31,y8,2,0,"div",14)(32,x8,2,0,"div",24),t.C$Y()(),t.yuY(33,b8,2,0,"div",14),t.C$Y(),t.I0R(34,"div",25)(35,"div",26)(36,"button",27),t.OEk(37,"Save"),t.C$Y()()()()()()()()(),t.I0R(38,"div",28)(39,"div",1)(40,"div",2)(41,"div",3)(42,"div",29)(43,"div",30)(44,"h5",5),t.OEk(45," Leave Type "),t.I0R(46,"span",31),t.OEk(47),t.C$Y(),t.I0R(48,"span",32)(49,"div",33)(50,"div",34),t.OEk(51," Items per page : "),t.C$Y(),t.I0R(52,"div",35)(53,"div",36)(54,"select",37),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(55,w8,2,2,"option",38),t.I0R(56,"option",39),t.OEk(57," Show All "),t.C$Y()()()()()()(),t.I0R(58,"p",40),t.OEk(59," Remaining Days : "),t.I0R(60,"span",41),t.OEk(61),t.C$Y()()(),t.I0R(62,"div",42)(63,"div",43)(64,"div",44)(65,"div",45)(66,"input",46),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(67,"i",47),t.C$Y()(),t.I0R(68,"button",48),t.qCj("click",function(){t.usT(o);const p=t.Gew(155);return t.CGJ(p.show())}),t.wR5(69,"i",49),t.C$Y(),t.I0R(70,"button",50),t.qCj("click",function(){return a.onAdd()}),t.wR5(71,"i",51),t.OEk(72," Add Leave Type "),t.C$Y()()()(),t.I0R(73,"div",6)(74,"div",52)(75,"table",53)(76,"thead",54)(77,"tr")(78,"th")(79,"div",55)(80,"input",56),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(81,"label",57),t.C$Y()(),t.I0R(82,"th",58),t.qCj("click",function(){return a.onSort("name")}),t.OEk(83," Leave Type Name "),t.C$Y(),t.I0R(84,"th",58),t.qCj("click",function(){return a.onSort("total_leave_days")}),t.OEk(85," Total Days "),t.C$Y(),t.I0R(86,"th",58),t.qCj("click",function(){return a.onSort("created_at")}),t.OEk(87," Created At "),t.C$Y(),t.I0R(88,"th"),t.OEk(89,"Action"),t.C$Y()()(),t.I0R(90,"tbody",59),t.c53(91,E8,20,9,"tr",107,t.wJt),t.C$Y(),t.yuY(93,k8,4,0,"div",60),t.C$Y()(),t.I0R(94,"div",61)(95,"div",62)(96,"div",63)(97,"div",64),t.wR5(98,"i",65),t.C$Y()(),t.I0R(99,"h5",66),t.OEk(100,"Sorry! No Result Found"),t.C$Y(),t.I0R(101,"p",67),t.OEk(102),t.C$Y()()(),t.I0R(103,"div",68)(104,"div",69)(105,"div",70),t.OEk(106," Showing "),t.I0R(107,"span",71),t.OEk(108),t.C$Y(),t.OEk(109," of "),t.I0R(110,"span",71),t.OEk(111),t.C$Y(),t.OEk(112," Results "),t.C$Y()(),t.I0R(113,"div",72),t.yuY(114,T8,1,4,"pagination",73),t.C$Y()()()()()()(),t.I0R(115,"div",74,75),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(117,"div",76)(118,"div",77)(119,"div",78)(120,"h5",79),t.OEk(121,"Add Leave Type"),t.C$Y(),t.I0R(122,"button",80),t.qCj("click",function(){return t.usT(o),t.Gew(116).hide(),t.CGJ(a.isEditMode=!a.isEditMode)}),t.C$Y()(),t.I0R(123,"form",81),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(124,"div",82),t.wR5(125,"div",83),t.I0R(126,"div",10)(127,"label",84),t.OEk(128,"Leave Type Name "),t.I0R(129,"span",12),t.OEk(130,"*"),t.C$Y()(),t.wR5(131,"input",85),t.yuY(132,S8,2,0,"div",14)(133,D8,2,0,"div",14),t.C$Y(),t.I0R(134,"div",10)(135,"label",84),t.OEk(136,"Number of days "),t.I0R(137,"span",12),t.OEk(138,"*"),t.C$Y()(),t.wR5(139,"input",86),t.yuY(140,A8,2,0,"div",14)(141,I8,2,0,"div",14)(142,M8,2,0,"div",24),t.C$Y(),t.I0R(143,"div",10)(144,"label",84),t.OEk(145,"Remaining days "),t.C$Y(),t.wR5(146,"input",87),t.C$Y()(),t.I0R(147,"div",88)(148,"div",89)(149,"button",90),t.qCj("click",function(){t.usT(o);const p=t.Gew(116);return t.CGJ(p.hide())}),t.wR5(150,"i",91),t.OEk(151," Close "),t.C$Y(),t.I0R(152,"button",92),t.OEk(153," Add "),t.C$Y()()()()()()(),t.I0R(154,"div",93,94)(156,"div",76)(157,"div",77)(158,"div",95)(159,"button",96),t.qCj("click",function(){t.usT(o);const p=t.Gew(155);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(160,"div",97)(161,"div",98)(162,"div",12),t.wR5(163,"i",99),t.C$Y(),t.I0R(164,"div",100)(165,"h3",101),t.OEk(166,"Are you sure ?"),t.C$Y(),t.I0R(167,"p",102),t.OEk(168," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(169,"div",103)(170,"button",104),t.qCj("click",function(){t.usT(o);const p=t.Gew(155);return t.CGJ(p.hide())}),t.OEk(171," Close "),t.C$Y(),t.I0R(172,"button",105),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(173," Yes, Delete It! "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(8),t.E7m("formGroup",a.leaveForm),t.yG2(9),t.C0Y(17,a.l.totalLeave&&a.l.totalLeave.hasError("required")&&a.l.totalLeave.touched?17:-1),t.yG2(11),t.oRS(" ",a.leaveForm.get("carryForward").value?"Yes":"No"," "),t.yG2(3),t.C0Y(31,a.l.maxCarryForward&&a.l.maxCarryForward.hasError("required")&&a.l.maxCarryForward.touched?31:-1),t.yG2(),t.E7m("ngIf",a.leaveForm.get("maxCarryForward").hasError("maxCarryForwardExceeded")&&a.leaveForm.get("maxCarryForward").touched),t.yG2(),t.C0Y(33,a.l.carryForward&&a.l.carryForward.hasError("required")&&a.l.carryForward.touched?33:-1),t.yG2(14),t.cNF(null==a.leaveData?null:a.leaveData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.leaveDataList?null:a.leaveDataList.length),t.yG2(5),t.oRS("",a.fixedremaininggdays," "),t.yG2(5),t.OKB("ngModel",a.term),t.yG2(14),t.OKB("ngModel",a.masterSelected),t.yG2(11),t.oho(a.leaveData),t.yG2(2),t.C0Y(93,a.spinnerStatus?93:-1),t.yG2(9),t.oRS(" We've searched ",a.leaveDataList.length," Leave Type We did not find any Leave Type for you search. "),t.yG2(6),t.cNF(null==a.leaveData?null:a.leaveData.length),t.yG2(3),t.cNF(null==a.filteredLeaveTypeData?null:a.filteredLeaveTypeData.length),t.yG2(3),t.C0Y(114,null!=a.filteredLeaveTypeData&&a.filteredLeaveTypeData.length?114:-1),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(132,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?132:-1),t.yG2(),t.C0Y(133,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?133:-1),t.yG2(7),t.C0Y(140,a.f.totalLeaveDays&&a.f.totalLeaveDays.hasError("required")&&a.f.totalLeaveDays.touched?140:-1),t.yG2(),t.C0Y(141,a.f.totalLeaveDays&&a.f.totalLeaveDays.hasError("maxlength")&&a.f.totalLeaveDays.touched?141:-1),t.yG2(),t.E7m("ngIf",null==a.f.totalLeaveDays.errors?null:a.f.totalLeaveDays.errors.maxLeaveDaysExceeded),t.yG2(4),t.E7m("value",a.remaining_leavedays))},dependencies:[Me.ay,Me.u_,We.O,T.ER,Wu.uo,Wu.M3,Wu.mY,j.sz,j.wd,j.GO,j.ot,j.O4,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,Me.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();const O8=["showModal"],L8=["deleteRecordModal"];function P8(n,i){if(1&n&&(t.I0R(0,"option",35),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function F8(n,i){if(1&n&&(t.I0R(0,"span",123),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}function B8(n,i){if(1&n&&(t.I0R(0,"option",35),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}const N8=()=>["Pending","Approve","Reject"];function z8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"select",141),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO().$implicit;return t.kNx(o.status,a)||(o.status=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO().$implicit,d=t.GaO();return t.CGJ(d.setStatus(o,a))}),t.I0R(1,"option",85),t.OEk(2,"Select Status"),t.C$Y(),t.yuY(3,B8,2,2,"option",34),t.C$Y()}if(2&n){const e=t.GaO().$implicit;t.OKB("ngModel",e.status),t.yG2(3),t.E7m("ngForOf",t.q4q(2,N8))}}function Y8(n,i){1&n&&(t.I0R(0,"button",142),t.wR5(1,"i",143),t.OEk(2," Approved "),t.C$Y())}function G8(n,i){1&n&&(t.I0R(0,"button",144),t.wR5(1,"i",145),t.OEk(2," Expired "),t.C$Y())}function H8(n,i){1&n&&(t.I0R(0,"button",146),t.wR5(1,"i",147),t.OEk(2," Rejected "),t.C$Y())}const V8=n=>["/employee-detail",n],U8=()=>({tab:"personalDetails"});function j8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",124)(1,"td")(2,"div",50)(3,"input",125),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",126),t.C$Y()(),t.I0R(5,"td",127)(6,"a",128),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",129)(9,"div",130)(10,"div",131),t.wR5(11,"img",132),t.C$Y(),t.I0R(12,"div",133)(13,"h5",134)(14,"a",135),t.OEk(15),t.C$Y()(),t.I0R(16,"p",12),t.OEk(17),t.C$Y()()()(),t.I0R(18,"td",129),t.OEk(19),t.C$Y(),t.I0R(20,"td",129),t.OEk(21),t.wVc(22,"date"),t.wVc(23,"date"),t.C$Y(),t.I0R(24,"td",129),t.OEk(25),t.C$Y(),t.I0R(26,"td",129),t.yuY(27,z8,4,3,"select",136)(28,Y8,3,0)(29,G8,3,0)(30,H8,3,0),t.C$Y(),t.I0R(31,"td",137),t.OEk(32),t.wVc(33,"date"),t.C$Y(),t.I0R(34,"td")(35,"ul",138)(36,"li")(37,"a",139),t.wR5(38,"i",140),t.C$Y()()()()()}if(2&n){const e=i.$implicit;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(8),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(3),t.E7m("routerLink",t.S45(26,V8,e.id))("queryParams",t.q4q(28,U8)),t.yG2(),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.designation," "),t.yG2(2),t.oRS(" ",e.leave_type," "),t.yG2(2),t.CAO(" ",t.g7$(22,17,e.from_date,"dd MMM, YYYY")," - ",t.g7$(23,20,e.to_date,"dd MMM, YYYY")," "),t.yG2(4),t.CAO(" ",e.no_of_days," Day",e.no_of_days>1?"s":""," "),t.yG2(2),t.C0Y(27,"Pending"==(null==e?null:e.status)?27:"Approve"==(null==e?null:e.status)?28:"Expired"==(null==e?null:e.status)?29:30),t.yG2(5),t.oRS(" ",t.g7$(33,23,e.created_at,"dd MMM, YYYY")," "),t.yG2(5),t.u6R("routerLink","/leave-detail/",e.id,"/",e.emp_id,"")}}function $8(n,i){1&n&&(t.I0R(0,"div",55)(1,"div",148)(2,"span",149),t.OEk(3,"Loading..."),t.C$Y()()())}function W8(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",150),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredLeaveReqData?null:e.filteredLeaveReqData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function X8(n,i){1&n&&(t.I0R(0,"div",151),t.OEk(1,"Leave Type name is required."),t.C$Y())}function q8(n,i){1&n&&(t.I0R(0,"div",151),t.OEk(1," Leave Type name must be at most 45 characters "),t.C$Y())}function Z8(n,i){1&n&&(t.I0R(0,"div",151),t.OEk(1,"Status is required."),t.C$Y())}const K8=()=>({standalone:!0});let J8=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.selectedDate=null,this.bsConfig={dateInputFormat:"YYYY-MM-DD",rangeInputFormat:"YYYY-MM-DD"},this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveRequestData=[],this.leaveRequestDataList=[],this.filteredLeaveReqData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.selectedStatus="",this.departments=[],this.selectedEmp=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.employeeDataList=[],this.filterCounts={termCount:0,designationCount:0,departmentCount:0,statusCount:0,dateCount:0,empCount:0,selectedDateRangeCount:0},this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Request",active:!0}],this.route.queryParams.subscribe(r=>{if(this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedDepartments=r.selectedDepartments?r.selectedDepartments.split(","):[],this.selectedDesignations=r.selectedDesignations?r.selectedDesignations.split(","):[],this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],this.selectedStatus=r.selectedStatus||null,r.selectedDateRange){const a=r.selectedDateRange.split(",");a.length>0&&(this.selectedDateRange={from:new Date(a[0]),to:a[1]?new Date(a[1]):null})}this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&(this.getLeaveRequest(),this.getDepartment(),this.getDesignation(),this.getemployeeData()),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?this.employeeDataList=r.data||[]:(this.employeeDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getLeaveRequest(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRequest?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveRequestDataList=r.data||[],this.leaveCount=r.leaveCount||[],this.filterdata()):(this.leaveRequestData=[],this.leaveRequestDataList=[],this.leaveCount=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,r){const a=r.target.value,o={status:a};this.toggleSpinner(!0),this.api.put("updateleaveRequestStatus",e.id,o).subscribe(d=>this.handleStatusResponse(a),d=>this.handleError(d))}handleStatusResponse(e){this.toggleSpinner(!1),this.toastService.success("Approve"==e?"Leave Request Approved Successfully!!":"The leave request has been Rejected."),this.getLeaveRequest()}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("leave",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("leave",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add leave",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit leave",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("leave",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("leave-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getLeaveRequest(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.leaveRequestData.length;o++)1==this.leaveRequestData[o].states&&r.push(this.leaveRequestData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.leaveRequestData=this.leaveRequestData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.leaveRequestData.length;o++)1==this.leaveRequestData[o].states&&r.push(this.leaveRequestData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveRequestData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.leaveRequestData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.leaveRequestDataList;if(null==this.selectedStatus&&(this.selectedStatus=""),this.filterCounts.termCount=0,this.filterCounts.designationCount=0,this.filterCounts.departmentCount=0,this.filterCounts.statusCount=0,this.filterCounts.empCount=0,this.filterCounts.selectedDateRangeCount=0,this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase())||r.mobile.toLowerCase().includes(this.term.toLowerCase())||r.email.toLowerCase().includes(this.term.toLowerCase())||r.employee_id.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedDepartments.length>0&&(e=e.filter(r=>this.selectedDepartments.map(a=>a.toLowerCase()).includes(r.department.toLowerCase())),this.filterCounts.departmentCount=1),this.selectedDesignations&&this.selectedDesignations.length>0&&(e=e.filter(r=>this.selectedDesignations.map(a=>a.toLowerCase()).includes(r.designation.toLowerCase())),this.filterCounts.designationCount=1),this.selectedStatus&&(e=e.filter(r=>r.status===this.selectedStatus),this.filterCounts.statusCount=1),this.selectedEmp&&this.selectedEmp.length>0&&(e=e.filter(r=>this.selectedEmp.map(a=>a.toLowerCase()).includes(r.name.toLowerCase())),this.filterCounts.empCount=1),this.selectedDateRange){let r="",a="";this.selectedDateRange.from&&(r=this.formatDateWithoutTime(new Date(this.selectedDateRange.from))),this.selectedDateRange.to&&(a=this.formatDateWithoutTime(new Date(this.selectedDateRange.to))),e=e.filter(o=>{const d=this.formatDateWithoutTime(new Date(o.from_date)),p=this.formatDateWithoutTime(new Date(o.to_date));return r&&!a?d==r:!r||!a||d>=r&&d<=a||p>=r&&p<=a||d<=r&&p>=a}),this.filterCounts.selectedDateRangeCount=1}this.filteredLeaveReqData=e,(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus||this.selectedDateRange)&&0===this.filteredLeaveReqData.length&&(this.currentPage=1),this.updatePaginatedData()}formatDateWithoutTime(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]}updatePaginatedData(){(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus||this.selectedDateRange)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredLeaveReqData.length&&(this.currentPage=1),this.leaveRequestData=(0,$n.cloneDeep)(this.filteredLeaveReqData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage));let d="";this.selectedDateRange&&(d=`${this.formatDateWithoutTime(new Date(this.selectedDateRange.from))},${this.selectedDateRange.to?this.formatDateWithoutTime(new Date(this.selectedDateRange.to)):""}`),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term,selectedDepartments:this.selectedDepartments.join(","),selectedDesignations:this.selectedDesignations.join(","),selectedEmp:this.selectedEmp.join(","),selectedStatus:this.selectedStatus,selectedDateRange:d},queryParamsHandling:"merge"})}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.designationCount+this.filterCounts.departmentCount+this.filterCounts.statusCount+this.filterCounts.dateCount+this.filterCounts.empCount+this.filterCounts.selectedDateRangeCount}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.leaveRequestData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}reset(){this.term="",this.selectedDepartments=[],this.selectedDesignations=[],this.selectedStatus="",this.selectedEmp=[],this.selectedDateRange="",this.leaveRequestData=this.leaveRequestDataList,this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedDepartments:null,selectedDesignations:null,selectedStatus:null,selectedEmp:null,selectedDateRange:null,page:1,itemsPerPage:this.currentItemsPerPage},queryParamsHandling:"merge"}),this.getLeaveRequest()}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-leave-request"]],viewQuery:function(r,a){if(1&r&&(t.CC$(O8,5),t.CC$(L8,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:257,vars:44,consts:[["title","Leave Applications ",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[1,"row","g-4"],[1,"col-lg","col-sm-6","border-end-sm"],[1,"d-flex","align-items-center","gap-2","mb-4"],[1,"avatar-xs","flex-shrink-0"],[1,"avatar-title","bg-body-secondary","border","border-primary-subtle","rounded-circle","text-primary"],[1,"ri-user-line"],[1,"flex-grow-1"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"counter-value",3,"countUp"],[1,"avatar-title","bg-body-secondary","border","border-success-subtle","rounded-circle","text-success"],[1,"ri-check-double-line"],[1,"avatar-title","bg-body-secondary","border","border-danger-subtle","rounded-circle","text-danger"],[1,"ri-close-fill"],[1,"avatar-title","bg-body-secondary","border","border-warning-subtle","rounded-circle","text-warning"],[1,"bx","bx-calendar"],[1,"avatar-title","bg-body-secondary","border","border-dark-subtle","rounded-circle","text-dark"],[1,"bx","bx-calendar-minus"],["id","leave-request"],[1,"col-lg-12"],[1,"card-header","d-lg-flex","align-items-center"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Leave Type Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],["bindLabel","name","bindValue","name","name","Employee name","placeholder","Select Employee name",3,"items","multiple","ngModel","change","ngModelChange"],["type","text","mwlFlatpickr","","mode","range","altFormat","d M, Y","dateFormat","d M, Y",1,"form-control",3,"ngModel","altInput","convertModelValue","ngModelChange"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["value","Approve"],["value","Reject"],["value","Pending"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1","ms-2"],[1,"fs-md"],[1,"text-dark",3,"routerLink","queryParams"],["class","form-control","data-choices","","id","statuss",3,"ngModel"],[1,"category"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"routerLink"],[1,"ph-eye"],["data-choices","","id","statuss",1,"form-control",3,"ngModel","ngModelChange","change"],["type","button",1,"btn","btn-success","btn-label","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-lg","me-2"],["type","button",1,"btn","btn-dark","btn-label","rounded-pill"],[1,"bx","bx-calendar-minus","label-icon","align-middle","rounded-pill","fs-lg","me-2"],["type","button",1,"btn","btn-danger","btn-label","rounded-pill"],[1,"ri-close-fill","label-icon","align-middle","rounded-pill","fs-lg","me-2"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"div",7)(9,"div",8)(10,"div",9),t.wR5(11,"i",10),t.C$Y()(),t.I0R(12,"div",11)(13,"p",12),t.OEk(14,"Total Leave Application"),t.C$Y()()(),t.I0R(15,"h3",13)(16,"span",14),t.OEk(17),t.C$Y()()()(),t.I0R(18,"div",6)(19,"div")(20,"div",7)(21,"div",8)(22,"div",15),t.wR5(23,"i",16),t.C$Y()(),t.I0R(24,"div",11)(25,"p",12),t.OEk(26,"Approved"),t.C$Y()()(),t.I0R(27,"h3",13)(28,"span",14),t.OEk(29),t.C$Y()()()(),t.I0R(30,"div",6)(31,"div")(32,"div",7)(33,"div",8)(34,"div",17),t.wR5(35,"i",18),t.C$Y()(),t.I0R(36,"div",11)(37,"p",12),t.OEk(38,"Rejected"),t.C$Y()()(),t.I0R(39,"h3",13)(40,"span",14),t.OEk(41),t.C$Y()()()(),t.I0R(42,"div",6)(43,"div")(44,"div",7)(45,"div",8)(46,"div",19),t.wR5(47,"i",20),t.C$Y()(),t.I0R(48,"div",11)(49,"p",12),t.OEk(50,"Pending"),t.C$Y()()(),t.I0R(51,"h3",13)(52,"span",14),t.OEk(53),t.C$Y()()()(),t.I0R(54,"div",6)(55,"div")(56,"div",7)(57,"div",8)(58,"div",21),t.wR5(59,"i",22),t.C$Y()(),t.I0R(60,"div",11)(61,"p",12),t.OEk(62,"Expired"),t.C$Y()()(),t.I0R(63,"h3",13)(64,"span",14),t.OEk(65),t.C$Y()()()()()()()()(),t.I0R(66,"div",23)(67,"div",1)(68,"div",24)(69,"div",3)(70,"div",25)(71,"div",11)(72,"h5",26),t.OEk(73," Leave Applications "),t.I0R(74,"span",27),t.OEk(75),t.C$Y(),t.I0R(76,"span",28)(77,"div",29)(78,"div",30),t.OEk(79," Items per page : "),t.C$Y(),t.I0R(80,"div",31)(81,"div",32)(82,"select",33),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(83,P8,2,2,"option",34),t.I0R(84,"option",35),t.OEk(85," Show All "),t.C$Y()()()()()()()(),t.I0R(86,"div",36)(87,"div",37)(88,"div",38)(89,"div",39)(90,"input",40),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(91,"i",41),t.C$Y()(),t.I0R(92,"button",42),t.qCj("click",function(){t.usT(o);const p=t.Gew(186);return t.CGJ(p.show())}),t.wR5(93,"i",43),t.C$Y(),t.I0R(94,"button",44),t.qCj("click",function(){return a.openEnd()}),t.wR5(95,"i",45),t.OEk(96," Filter "),t.yuY(97,F8,2,1,"span",46),t.C$Y()()()(),t.I0R(98,"div",4)(99,"div",47)(100,"table",48)(101,"thead",49)(102,"tr")(103,"th")(104,"div",50)(105,"input",51),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(106,"label",52),t.C$Y()(),t.I0R(107,"th",53),t.qCj("click",function(){return a.onSort("name")}),t.OEk(108," Name "),t.C$Y(),t.I0R(109,"th",53),t.qCj("click",function(){return a.onSort("leave_type")}),t.OEk(110," Leave Type "),t.C$Y(),t.I0R(111,"th",53),t.qCj("click",function(){return a.onSort("from_date")}),t.OEk(112," From - To "),t.C$Y(),t.I0R(113,"th",53),t.qCj("click",function(){return a.onSort("no_of_days")}),t.OEk(114," Applied For "),t.C$Y(),t.I0R(115,"th",53),t.qCj("click",function(){return a.onSort("status")}),t.OEk(116," Status "),t.C$Y(),t.I0R(117,"th",53),t.qCj("click",function(){return a.onSort("created_at")}),t.OEk(118," Created At "),t.C$Y(),t.I0R(119,"th"),t.OEk(120,"Action"),t.C$Y()()(),t.I0R(121,"tbody",54),t.c53(122,j8,39,29,"tr",124,t.wJt),t.C$Y(),t.yuY(124,$8,4,0,"div",55),t.C$Y()(),t.I0R(125,"div",56)(126,"div",57)(127,"div",58)(128,"div",59),t.wR5(129,"i",60),t.C$Y()(),t.I0R(130,"h5",61),t.OEk(131,"Sorry! No Result Found"),t.C$Y(),t.I0R(132,"p",12),t.OEk(133),t.C$Y()()(),t.I0R(134,"div",62)(135,"div",63)(136,"div",64),t.OEk(137," Showing "),t.I0R(138,"span",65),t.OEk(139),t.C$Y(),t.OEk(140," of "),t.I0R(141,"span",65),t.OEk(142),t.C$Y(),t.OEk(143," Results "),t.C$Y()(),t.I0R(144,"div",66),t.yuY(145,W8,1,4,"pagination",67),t.C$Y()()()()()()(),t.I0R(146,"div",68,69),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(148,"div",70)(149,"div",71)(150,"div",72)(151,"h5",73),t.OEk(152,"Add Leave Type"),t.C$Y(),t.I0R(153,"button",74),t.qCj("click",function(){t.usT(o);const p=t.Gew(147);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(154,"form",75),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(155,"div",76),t.wR5(156,"div",77),t.I0R(157,"div",78)(158,"label",79),t.OEk(159,"Leave Type Name "),t.I0R(160,"span",80),t.OEk(161,"*"),t.C$Y()(),t.wR5(162,"input",81),t.yuY(163,X8,2,0,"div",82)(164,q8,2,0,"div",82),t.C$Y(),t.I0R(165,"div",78)(166,"label",83),t.OEk(167,"Status "),t.I0R(168,"span",80),t.OEk(169,"*"),t.C$Y()(),t.I0R(170,"select",84)(171,"option",85),t.OEk(172,"Select Status"),t.C$Y(),t.I0R(173,"option",86),t.OEk(174,"Active"),t.C$Y(),t.I0R(175,"option",87),t.OEk(176,"Inactive"),t.C$Y()(),t.yuY(177,Z8,2,0,"div",82),t.C$Y()(),t.I0R(178,"div",88)(179,"div",89)(180,"button",90),t.qCj("click",function(){t.usT(o);const p=t.Gew(147);return t.CGJ(p.hide())}),t.wR5(181,"i",91),t.OEk(182," Close "),t.C$Y(),t.I0R(183,"button",92),t.OEk(184," Add "),t.C$Y()()()()()()(),t.I0R(185,"div",93,94)(187,"div",70)(188,"div",71)(189,"div",95)(190,"button",96),t.qCj("click",function(){t.usT(o);const p=t.Gew(186);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(191,"div",97)(192,"div",98)(193,"div",80),t.wR5(194,"i",99),t.C$Y(),t.I0R(195,"div",100)(196,"h3",101),t.OEk(197,"Are you sure ?"),t.C$Y(),t.I0R(198,"p",102),t.OEk(199," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(200,"div",103)(201,"button",104),t.qCj("click",function(){t.usT(o);const p=t.Gew(186);return t.CGJ(p.hide())}),t.OEk(202," Close "),t.C$Y(),t.I0R(203,"button",105),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(204," Yes, Delete It! "),t.C$Y()()()()()(),t.I0R(205,"div",106)(206,"div",107)(207,"h5",108),t.OEk(208,"Filters"),t.C$Y(),t.I0R(209,"button",74),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(210,"div",109)(211,"div",1)(212,"div",24)(213,"div",78)(214,"p",110),t.OEk(215," Search name, Employee id etc... "),t.C$Y(),t.I0R(216,"div",39)(217,"input",111),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(218,"i",41),t.C$Y()()(),t.I0R(219,"div",24)(220,"div",78)(221,"p",110),t.OEk(222,"Employee Name"),t.C$Y(),t.I0R(223,"ng-select",112),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedEmp,p)||(a.selectedEmp=p),p}),t.C$Y()()(),t.I0R(224,"div",24)(225,"div",78)(226,"p",110),t.OEk(227,"Date"),t.C$Y(),t.I0R(228,"input",113),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDateRange,p)||(a.selectedDateRange=p),p}),t.qCj("ngModelChange",function(){return a.filterdata()}),t.C$Y()()(),t.I0R(229,"div",24)(230,"div",78)(231,"p",110),t.OEk(232,"Leave Status"),t.C$Y(),t.I0R(233,"select",114),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedStatus,p)||(a.selectedStatus=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(234,"option",85),t.OEk(235,"All"),t.C$Y(),t.I0R(236,"option",115),t.OEk(237,"Approved"),t.C$Y(),t.I0R(238,"option",116),t.OEk(239,"Rejected"),t.C$Y(),t.I0R(240,"option",117),t.OEk(241,"Pending"),t.C$Y()()()(),t.I0R(242,"div",24)(243,"div",78)(244,"p",110),t.OEk(245,"Department"),t.C$Y(),t.I0R(246,"ng-select",118),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDepartments,p)||(a.selectedDepartments=p),p}),t.C$Y()()(),t.I0R(247,"div",24)(248,"div",78)(249,"p",110),t.OEk(250,"Designation"),t.C$Y(),t.I0R(251,"ng-select",119),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDesignations,p)||(a.selectedDesignations=p),p}),t.C$Y()()()()(),t.I0R(252,"div",120)(253,"button",121),t.qCj("click",function(){return a.reset()}),t.wR5(254,"i",91),t.OEk(255," Reset "),t.C$Y()()(),t.I0R(256,"div",122),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(16),t.E7m("countUp",null==a.leaveRequestDataList?null:a.leaveRequestDataList.length),t.yG2(),t.cNF(null==a.leaveRequestDataList?null:a.leaveRequestDataList.length),t.yG2(11),t.E7m("countUp",null==a.leaveCount?null:a.leaveCount.totalApproval),t.yG2(),t.cNF(null==a.leaveCount?null:a.leaveCount.totalApproval),t.yG2(11),t.E7m("countUp",null==a.leaveCount?null:a.leaveCount.totalReject),t.yG2(),t.cNF(null==a.leaveCount?null:a.leaveCount.totalReject),t.yG2(11),t.E7m("countUp",null==a.leaveCount?null:a.leaveCount.totalPending),t.yG2(),t.cNF(null==a.leaveCount?null:a.leaveCount.totalPending),t.yG2(11),t.E7m("countUp",null==a.leaveCount?null:a.leaveCount.totalExpired),t.yG2(),t.cNF(null==a.leaveCount?null:a.leaveCount.totalExpired),t.yG2(10),t.cNF(null==a.leaveRequestData?null:a.leaveRequestData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.leaveRequestDataList?null:a.leaveRequestDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(7),t.C0Y(97,a.totalFilterCount>0?97:-1),t.yG2(8),t.OKB("ngModel",a.masterSelected),t.yG2(17),t.oho(a.leaveRequestData),t.yG2(2),t.C0Y(124,a.spinnerStatus?124:-1),t.yG2(9),t.oRS(" We've searched ",a.leaveRequestDataList.length," Leave Request We did not find any Leave Request for you search. "),t.yG2(6),t.cNF(null==a.leaveRequestData?null:a.leaveRequestData.length),t.yG2(3),t.cNF(null==a.filteredLeaveReqData?null:a.filteredLeaveReqData.length),t.yG2(3),t.C0Y(145,null!=a.filteredLeaveReqData&&a.filteredLeaveReqData.length?145:-1),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(163,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?163:-1),t.yG2(),t.C0Y(164,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?164:-1),t.yG2(6),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(177,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?177:-1),t.yG2(40),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("items",a.employeeDataList)("multiple",!0),t.OKB("ngModel",a.selectedEmp),t.yG2(5),t.OKB("ngModel",a.selectedDateRange),t.E7m("altInput",!0)("convertModelValue",!0),t.yG2(5),t.OKB("ngModel",a.selectedStatus),t.E7m("ngModelOptions",t.q4q(43,K8)),t.yG2(13),t.E7m("items",a.departments)("multiple",!0),t.OKB("ngModel",a.selectedDepartments),t.yG2(5),t.E7m("items",a.designations)("multiple",!0),t.OKB("ngModel",a.selectedDesignations))},dependencies:[Me.QF,Me.ay,We.O,T.ER,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,ik,ev.UT,$b,Me.y]})}return n})();function Q8(n,i){if(1&n&&(t.OEk(0),t.wVc(1,"date"),t.I0R(2,"span",19),t.OEk(3),t.C$Y()),2&n){const e=t.GaO();t.oRS(" ",t.g7$(1,2,null==e.leaveDetailData?null:e.leaveDetailData.recent_leave_date,"EEE dd MMM, YYYY ")," "),t.yG2(3),t.oRS(" (",null==e.leaveDetailData?null:e.leaveDetailData.recent_leave,")")}}function eY(n,i){1&n&&t.OEk(0," - ")}function tY(n,i){if(1&n&&(t.OEk(0),t.wVc(1,"date"),t.I0R(2,"span",19),t.OEk(3),t.C$Y()),2&n){const e=t.GaO();t.oRS(" ",t.g7$(1,2,null==e.leaveDetailData?null:e.leaveDetailData.upcoming_leave_date,"EEE dd MMM, YYYY ")," "),t.yG2(3),t.oRS("(",null==e.leaveDetailData?null:e.leaveDetailData.upcoming_leave,")")}}function iY(n,i){1&n&&t.OEk(0," - ")}function nY(n,i){if(1&n){const e=t.KQA();t.I0R(0,"button",50),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.updateLeaveStatus("Approve"))}),t.wR5(1,"i",51),t.OEk(2," Approve "),t.C$Y(),t.I0R(3,"button",52),t.qCj("click",function(){t.usT(e),t.GaO();const a=t.Gew(141);return t.CGJ(a.show())}),t.wR5(4,"i",53),t.OEk(5," Reject "),t.C$Y()}}function rY(n,i){1&n&&(t.I0R(0,"button",54),t.wR5(1,"i",55),t.OEk(2," Approved "),t.C$Y())}function aY(n,i){1&n&&(t.I0R(0,"button",56),t.wR5(1,"i",57),t.OEk(2," Expired "),t.C$Y())}function sY(n,i){1&n&&(t.I0R(0,"button",58),t.wR5(1,"i",59),t.OEk(2," Rejected "),t.C$Y())}function oY(n,i){if(1&n&&(t.I0R(0,"tr",60)(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td")(4,"span",61),t.OEk(5),t.C$Y()(),t.I0R(6,"td"),t.OEk(7),t.C$Y(),t.I0R(8,"td",62)(9,"span",63),t.OEk(10),t.C$Y()()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(3),t.CAO("",e.no_of_days_taken," day",e.no_of_days_taken>1?"s":"",""),t.yG2(2),t.CAO(" ",e.remaining_leave," day",e.remaining_leave>1?"s":""," "),t.yG2(3),t.CAO("",e.total_leave_days," day",e.total_leave_days>1?"s":"","")}}let lY=(()=>{class n{constructor(e,r,a,o,d){this.route=e,this.api=r,this.router=a,this.toastService=o,this.location=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.leaveTypesData=[],this.reason=""}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management",active:!0},{label:"Leave Detail",active:!0}],this.id=this.route.snapshot.paramMap.get("id"),this.emp_id=this.route.snapshot.paramMap.get("emp_id");const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&(this.leaveDetail(),this.getemployeeData())}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}leaveDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveDetail/${this.id}?company_id=${this.company_id}&emp_id=${this.emp_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveTypesData=r.data,this.leaveDetailData=r.leave_details):this.handleError("Unexpected response format")},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.emp_id).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0]):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}getTotal(e){return this.leaveTypesData.reduce((r,a)=>r+Number(a[e]),0)}updateLeaveStatus(e){const r={status:e,admin_reason:this.reason};this.toggleSpinner(!0),this.api.put("updateleaveRequestStatus",this.id,r).subscribe(a=>this.handleStatusResponse(e),a=>this.handleError(a))}handleStatusResponse(e){this.toggleSpinner(!1),"Approved"==e?this.toastService.success("Leave Request Approved Successfully!!"):this.toastService.error("The leave request has been declined."),this.router.navigate(["leave-requests"])}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(T.gV),t.GI1(He.W),t.GI1(T.E5),t.GI1(Be.SA),t.GI1(Me.oB))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-leave-request-deatil"]],decls:158,vars:32,consts:[["title","Leave Detail",3,"breadcrumbItems"],[1,"row"],[1,"col-xxl-12"],[1,"card"],[1,"row","g-0","product-list"],[1,"col-xl-12","border-end"],[1,"card-header","d-flex","justify-content-between"],[1,"card-title","mb-0"],[1,""],[1,"btn","btn-secondary",3,"click"],[1,"mdi","mdi-keyboard-backspace","align-baseline","me-1"],[1,"card-body"],[1,"d-flex","gap-2","align-items-center","mb-3"],[1,"flex-shrink-0"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1"],[1,"fs-md"],[1,"text-muted","mb-0"],[1,"col-md-6","col-lg-3"],[1,"fw-bold"],[1,"text-danger"],[1,"row","mt-3"],["class","fw-bold"],[1,"col-6"],[1,"text-start","mt-4"],[1,"card-header","d-flex","align-items-center","gap-2"],[1,"card-title","flex-grow-1","mb-0"],[1,"badge","bg-danger-subtle","text-danger"],[1,"table-responsive"],[1,"table","align-middle","table-nowrap","table-borderless","mb-0"],[1,"table-active"],[1,"text-end"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],["bsModal","","id","myModal","tabindex","-1","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",2,"display","none"],["template","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","myModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","VertimeassageInput",1,"form-label"],["id","VertimeassageInput","rows","3","placeholder","Enter your message",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"btn","btn-success","me-1",3,"click"],[1,"bx","bx-check","align-baseline","me-1"],[1,"btn","btn-danger","me-1",3,"click"],[1,"ri-close-line","align-baseline","me-1"],["type","button",1,"btn","btn-success","btn-label","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-lg","me-2"],["type","button",1,"btn","btn-dark","btn-label","rounded-pill"],[1,"bx","bx-calendar-minus","label-icon","align-middle","rounded-pill","fs-lg","me-2"],["type","button",1,"btn","btn-danger","btn-label","rounded-pill"],[1,"ri-close-fill","label-icon","align-middle","rounded-pill","fs-lg","me-2"],[1,"product"],[1,"product-price"],[1,"fw-medium","text-end"],[1,"product-line-price"],["class","product"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"h6",7),t.OEk(9,"Leave Details"),t.C$Y()(),t.I0R(10,"div",8)(11,"button",9),t.qCj("click",function(){return a.goBack()}),t.wR5(12,"i",10),t.OEk(13," Back "),t.C$Y()()(),t.I0R(14,"div",11)(15,"div",12)(16,"div",13),t.wR5(17,"img",14),t.C$Y(),t.I0R(18,"div",15)(19,"h6",16),t.OEk(20),t.C$Y(),t.I0R(21,"p",17),t.OEk(22),t.C$Y()()(),t.I0R(23,"div",1)(24,"div",18)(25,"p")(26,"span",19),t.OEk(27," Leave Type : "),t.C$Y(),t.I0R(28,"span"),t.OEk(29),t.C$Y()()(),t.I0R(30,"div",18)(31,"p")(32,"span",19),t.OEk(33," From : "),t.C$Y(),t.I0R(34,"span"),t.OEk(35),t.wVc(36,"date"),t.C$Y()()(),t.I0R(37,"div",18)(38,"p")(39,"span",19),t.OEk(40," To : "),t.C$Y(),t.I0R(41,"span"),t.OEk(42),t.wVc(43,"date"),t.C$Y()()(),t.I0R(44,"div",18)(45,"p")(46,"span",19),t.OEk(47," Applied For "),t.I0R(48,"span",20),t.OEk(49,"(Exclude Sundays and company holidays.)"),t.C$Y(),t.OEk(50," : "),t.C$Y(),t.I0R(51,"span"),t.OEk(52),t.C$Y()()()(),t.I0R(53,"div",21)(54,"div",18)(55,"p")(56,"span",19),t.OEk(57,"No. of Sunday included In Leaves : "),t.C$Y(),t.I0R(58,"span"),t.OEk(59),t.C$Y()()(),t.I0R(60,"div",18)(61,"p")(62,"span",19),t.OEk(63,"No. of Company Hoilday included In Leaves : "),t.C$Y(),t.I0R(64,"span"),t.OEk(65),t.C$Y()()(),t.I0R(66,"div",18)(67,"p")(68,"span",19),t.OEk(69,"Last Leave On : "),t.C$Y(),t.I0R(70,"span"),t.yuY(71,Q8,4,5,"span",22)(72,eY,1,0),t.C$Y()()(),t.I0R(73,"div",18)(74,"p")(75,"span",19),t.OEk(76,"Upcoming Leave On : "),t.C$Y(),t.I0R(77,"span"),t.yuY(78,tY,4,5,"span",22)(79,iY,1,0),t.C$Y()()()(),t.I0R(80,"div",21)(81,"div",18)(82,"p")(83,"span",19),t.OEk(84,"Applied On : "),t.C$Y(),t.I0R(85,"span"),t.OEk(86),t.wVc(87,"date"),t.C$Y()()(),t.I0R(88,"div",23)(89,"p")(90,"span",19),t.OEk(91,"Reason : "),t.C$Y(),t.I0R(92,"span"),t.OEk(93),t.C$Y()()()(),t.I0R(94,"div",24),t.yuY(95,nY,6,0)(96,rY,3,0)(97,aY,3,0)(98,sY,3,0),t.C$Y()()()()(),t.I0R(99,"div",3)(100,"div",25)(101,"h5",26),t.OEk(102,"Leaves Detail"),t.C$Y(),t.I0R(103,"div",13),t.wR5(104,"span",27),t.C$Y()(),t.I0R(105,"div",11)(106,"div",28)(107,"table",29)(108,"thead",30)(109,"tr")(110,"th"),t.OEk(111,"Leave Name"),t.C$Y(),t.I0R(112,"th"),t.OEk(113,"Allotted Leaves"),t.C$Y(),t.I0R(114,"th"),t.OEk(115,"Balance Leaves"),t.C$Y(),t.I0R(116,"th",31),t.OEk(117,"Total Leaves"),t.C$Y()()(),t.I0R(118,"tbody"),t.c53(119,oY,11,7,"tr",64,t.wJt),t.C$Y()(),t.I0R(121,"div",32)(122,"table",33)(123,"tbody")(124,"tr")(125,"td"),t.OEk(126,"Total Leaves"),t.C$Y(),t.I0R(127,"td",31),t.OEk(128),t.C$Y()(),t.I0R(129,"tr")(130,"td"),t.OEk(131,"Total Allotted Leaves"),t.C$Y(),t.I0R(132,"td",31),t.OEk(133),t.C$Y()(),t.I0R(134,"tr",34)(135,"th",35),t.OEk(136,"Total Balance Leaves"),t.C$Y(),t.I0R(137,"th",31),t.OEk(138),t.C$Y()()()()()()()()()(),t.I0R(139,"div")(140,"div",36,37)(142,"div",38)(143,"div",39)(144,"div",40)(145,"h5",41),t.OEk(146,"Decline Leave Request"),t.C$Y(),t.I0R(147,"button",42),t.qCj("click",function(){t.usT(o);const p=t.Gew(141);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(148,"div",43)(149,"div",44)(150,"label",45),t.OEk(151,"Reason"),t.C$Y(),t.I0R(152,"textarea",46),t.iHE("ngModelChange",function(p){return t.kNx(a.reason,p)||(a.reason=p),p}),t.C$Y()()(),t.I0R(153,"div",47)(154,"button",48),t.qCj("click",function(){t.usT(o);const p=t.Gew(141);return t.CGJ(p.hide())}),t.OEk(155," Close "),t.C$Y(),t.I0R(156,"button",49),t.qCj("click",function(){return a.updateLeaveStatus("Reject")}),t.OEk(157," Reject "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(17),t._6D("src",null==a.employeeDetail?null:a.employeeDetail.image,t.K6U),t.yG2(3),t.cNF(null==a.employeeDetail?null:a.employeeDetail.name),t.yG2(2),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.department_name," "),t.yG2(7),t.cNF(null==a.leaveDetailData?null:a.leaveDetailData.leave_type),t.yG2(6),t.oRS(" ",t.g7$(36,23,null==a.leaveDetailData?null:a.leaveDetailData.from_date,"EEE dd MMM, YYYY"),""),t.yG2(7),t.oRS(" ",t.g7$(43,26,null==a.leaveDetailData?null:a.leaveDetailData.to_date,"EEE dd MMM, YYYY"),""),t.yG2(10),t.CAO(" ",null==a.leaveDetailData?null:a.leaveDetailData.no_of_days," day",(null==a.leaveDetailData?null:a.leaveDetailData.no_of_days)>1?"s":"",""),t.yG2(7),t.oRS(" ",null==a.leaveDetailData?null:a.leaveDetailData.number_of_sundays,""),t.yG2(6),t.oRS(" ",null==a.leaveDetailData?null:a.leaveDetailData.number_of_holidays,""),t.yG2(6),t.C0Y(71,null!=a.leaveDetailData&&a.leaveDetailData.recent_leave?71:72),t.yG2(7),t.C0Y(78,null!=a.leaveDetailData&&a.leaveDetailData.upcoming_leave?78:79),t.yG2(8),t.oRS(" ",t.g7$(87,29,null==a.leaveDetailData?null:a.leaveDetailData.created_at,"EEE dd MMM, YYYY , h:mm a"),""),t.yG2(7),t.oRS(" ",null==a.leaveDetailData?null:a.leaveDetailData.reason,""),t.yG2(2),t.C0Y(95,"Pending"==(null==a.leaveDetailData?null:a.leaveDetailData.status)?95:"Approve"==(null==a.leaveDetailData?null:a.leaveDetailData.status)?96:"Expired"==(null==a.leaveDetailData?null:a.leaveDetailData.status)?97:98),t.yG2(24),t.oho(a.leaveTypesData),t.yG2(9),t.CAO(" ",a.getTotal("total_leave_days")," day",a.getTotal("total_leave_days")>1?"s":""," "),t.yG2(5),t.CAO(" ",a.getTotal("no_of_days_taken")," day",a.getTotal("no_of_days_taken")>1?"s":""," "),t.yG2(5),t.CAO(" ",a.getTotal("remaining_leave")," day",a.getTotal("remaining_leave")>1?"s":""," "),t.yG2(14),t.OKB("ngModel",a.reason))},dependencies:[We.O,j.ot,j.ue,j._G,nf.uK,Me.y]})}return n})();function cY(n,i){if(1&n&&(t.I0R(0,"tr",57),t.wR5(1,"td"),t.I0R(2,"td",58)(3,"a",59),t.OEk(4,"#TB01"),t.C$Y()(),t.I0R(5,"td",60),t.wR5(6,"i",61),t.OEk(7),t.C$Y(),t.I0R(8,"td",62),t.OEk(9),t.C$Y(),t.I0R(10,"td",63),t.OEk(11),t.wVc(12,"date"),t.C$Y(),t.I0R(13,"td")(14,"a",64),t.wR5(15,"i",65),t.C$Y()()()),2&n){const e=i.$implicit;t.CI5("id","p_",i.$index,""),t.yG2(7),t.oRS(" ",e.filename," "),t.yG2(2),t.oRS(" ",e.size," "),t.yG2(2),t.oRS(" ",t.g7$(12,5,e.createdAt,"dd MMM , yyyy, h:mm a")," "),t.yG2(3),t.E7m("href",e.downloadUrl,t.K6U)}}function uY(n,i){1&n&&(t.I0R(0,"div",43)(1,"div",66)(2,"span",67),t.OEk(3,"Loading..."),t.C$Y()()())}let dY=(()=>{class n{constructor(e){this.api=e,this.dateChangeSubject=new Hg.E,this.logsData=[],this.selectedDate=new Date,this.formattedDate="",this.spinnerStatus=!1,this.fileType="admin",this.logsFile="admin",this.direction="asc",this.bsConfig={maxDate:new Date,showWeekNumbers:!1,dateInputFormat:"DD/MM/YYYY"}}ngOnInit(){this.selectedDate=new Date,this.selectedDate&&(this.formattedDate=this.formatDate(this.selectedDate)),this.dateChangeSubject.pipe((0,nb.o)(300)).subscribe(e=>{this.handleDateChange(e)}),this.getLogs()}handleDateChange(e){this.selectedDate=e,this.formattedDate=this.formatDate(e),this.getLogs()}formatDate(e){return e?`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`:""}onDateChange(e){this.dateChangeSubject.next(e)}getLogs(){this.api.getwithoutid(`logs?date=${this.formattedDate}`).subscribe(e=>{this.logsAdminData=e.find(r=>"admin"===r.logType),this.logsFrontData=e.find(r=>"frontend"===r.logType),this.updateTableData()},e=>{console.error("Error fetching logs",e)})}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.logsData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.logsData=r}compare(e,r){return e<r?-1:e>r?1:0}setLogFile(e){this.fileType=e,this.updateTableData()}updateTableData(){"admin"===this.fileType?(this.logsData=this.logsAdminData?.logs||[],this.logDataList=this.logsAdminData?.logs||[]):"frontend"===this.fileType&&(this.logsData=this.logsFrontData?.logs||[],this.logDataList=this.logsFrontData?.logs||[])}filterdata(){this.logsData=this.term?this.logDataList.filter(e=>e.filename.toLowerCase().includes(this.term.toLowerCase())||e.createdAt.toLowerCase().includes(this.term.toLowerCase())):this.logDataList,this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.logsData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){const r=(e.page-1)*e.itemsPerPage;this.endItem=e.page*e.itemsPerPage,this.logsData=this.logDataList.slice(r,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-logs"]],decls:111,vars:21,consts:[["title","Logs List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"text-muted","mb-0","mt-2"],[1,"fw-bold"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"input-group"],["type","text","id","datepicker","showWeekNumbers","false","bsDatepicker","",1,"form-control",3,"bsConfig","ngModel","ngModelChange","bsValueChange"],[1,"input-group-append"],["for","datepicker",1,"input-group-text","cursor-pointer"],[1,"ri-calendar-fill"],[1,"search-box"],["type","text","placeholder","Search name etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"card-body"],[1,"col-lg-3","ng-star-inserted",3,"click"],[1,"card","border","shadow-none"],[1,"card-body","cursor-pointer",3,"ngClass"],[1,"d-flex","gap-3","mb-4"],[1,"avatar-xs"],[1,"avatar-title","bg-transparent","rounded","text-primary","fs-3"],[1,"bi","bi-folder2-open"],["dropdown","",1,"flex-shrink-0","dropdown"],["dropdowntoggle","","href","javascript:void(0);","aria-haspopup","true","aria-expanded","false",1,"text-reset","d-inline-block"],[1,"bi","bi-three-dots-vertical"],["href","javascript:void(0);"],[1,"fs-md","text-truncate"],[1,"list-unstyled","hstack","gap-2","text-muted","mb-0"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","pageChanged"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"bi","bi-file-earmark-text"],[1,"price"],[1,"orders"],["target","_blank",1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"href"],[1,"ph-eye","fs-5","fs-3"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"]],template:function(r,a){1&r&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Logs "),t.I0R(9,"span",8),t.OEk(10),t.C$Y()(),t.I0R(11,"p",9),t.OEk(12," Showing Result of Date: "),t.I0R(13,"span",10),t.OEk(14),t.wVc(15,"date"),t.C$Y()()(),t.I0R(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"input",15),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedDate,d)||(a.selectedDate=d),d}),t.qCj("bsValueChange",function(d){return a.onDateChange(d)}),t.C$Y(),t.I0R(21,"div",16)(22,"label",17),t.wR5(23,"i",18),t.C$Y()()()(),t.I0R(24,"div",19)(25,"input",20),t.iHE("ngModelChange",function(d){return t.kNx(a.term,d)||(a.term=d),d}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",21),t.C$Y()()()(),t.I0R(27,"div",22)(28,"div",2)(29,"div",23),t.qCj("click",function(){return a.setLogFile("admin")}),t.I0R(30,"div",24)(31,"div",25)(32,"div",26)(33,"div",6)(34,"div",27)(35,"div",28),t.wR5(36,"i",29),t.C$Y()()(),t.I0R(37,"div",30)(38,"a",31),t.wR5(39,"i",32),t.C$Y()()(),t.I0R(40,"a",33)(41,"h6",34),t.OEk(42,"Dashboard Api"),t.C$Y()(),t.I0R(43,"ul",35)(44,"li")(45,"b"),t.OEk(46),t.C$Y()(),t.I0R(47,"li")(48,"b"),t.OEk(49),t.C$Y()()()()()(),t.I0R(50,"div",23),t.qCj("click",function(){return a.setLogFile("frontend")}),t.I0R(51,"div",24)(52,"div",25)(53,"div",26)(54,"div",6)(55,"div",27)(56,"div",28),t.wR5(57,"i",29),t.C$Y()()(),t.I0R(58,"div",30)(59,"a",31),t.wR5(60,"i",32),t.C$Y()()(),t.I0R(61,"a",33)(62,"h6",34),t.OEk(63,"Frontend Api"),t.C$Y()(),t.I0R(64,"ul",35)(65,"li")(66,"b"),t.OEk(67),t.C$Y()(),t.I0R(68,"li")(69,"b"),t.OEk(70),t.C$Y()()()()()()(),t.I0R(71,"div",36)(72,"table",37)(73,"thead",38)(74,"tr")(75,"th")(76,"div",39),t.wR5(77,"label",40),t.C$Y()(),t.I0R(78,"th",41),t.qCj("click",function(){return a.onSort("filename")}),t.OEk(79," File Name "),t.C$Y(),t.I0R(80,"th",41),t.qCj("click",function(){return a.onSort("size")}),t.OEk(81," Size "),t.C$Y(),t.I0R(82,"th",41),t.qCj("click",function(){return a.onSort("createdAt")}),t.OEk(83," Created At "),t.C$Y(),t.I0R(84,"th"),t.OEk(85,"Action"),t.C$Y()()(),t.I0R(86,"tbody",42),t.c53(87,cY,16,8,"tr",57,t.wJt),t.C$Y(),t.yuY(89,uY,4,0,"div",43),t.C$Y()(),t.I0R(90,"div",44)(91,"div",45)(92,"div",46)(93,"div",47),t.wR5(94,"i",48),t.C$Y()(),t.I0R(95,"h5",49),t.OEk(96,"Sorry! No Result Found"),t.C$Y(),t.I0R(97,"p",50),t.OEk(98),t.C$Y()()(),t.I0R(99,"div",51)(100,"div",52)(101,"div",53),t.OEk(102," Showing "),t.I0R(103,"span",54),t.OEk(104),t.C$Y(),t.OEk(105," of "),t.I0R(106,"span",54),t.OEk(107),t.C$Y(),t.OEk(108," Results "),t.C$Y()(),t.I0R(109,"div",55)(110,"pagination",56),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()()()),2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.oRS(" ",a.logsData.length," "),t.yG2(4),t.oRS(" ",t.g7$(15,18,a.formattedDate,"EEEE, dd MMM , yyyy"),""),t.yG2(6),t.E7m("bsConfig",a.bsConfig),t.OKB("ngModel",a.selectedDate),t.yG2(5),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("ngClass","admin"===a.fileType?"card-bg-sel":""),t.yG2(15),t.oRS("",null==a.logsAdminData?null:a.logsAdminData.totalFiles," Files"),t.yG2(3),t.cNF(null==a.logsAdminData?null:a.logsAdminData.totalFileSize),t.yG2(3),t.E7m("ngClass","frontend"===a.fileType?"card-bg-sel":""),t.yG2(15),t.oRS("",null==a.logsFrontData?null:a.logsFrontData.totalFiles," Files"),t.yG2(3),t.cNF(null==a.logsFrontData?null:a.logsFrontData.totalFileSize),t.yG2(17),t.oho(a.logsData),t.yG2(2),t.C0Y(89,a.spinnerStatus?89:-1),t.yG2(9),t.oRS(" We've searched ",null==a.logDataList?null:a.logDataList.length," Log . We did not find any Log for you search. "),t.yG2(6),t.cNF(a.logsData.length),t.yG2(3),t.cNF(null==a.logDataList?null:a.logDataList.length),t.yG2(3),t.E7m("totalItems",null==a.logDataList?null:a.logDataList.length)("itemsPerPage",10))},dependencies:[Me.QF,We.O,Wu.mY,j.ot,j.ue,j._G,nt.im,Vg.em,Vg.U5,Me.y],styles:[".card-bg-sel[_ngcontent-%COMP%]{background-color:#dde1ef}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})();function hY(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function fY(n,i){if(1&n&&(t.I0R(0,"span",61),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}function pY(n,i){if(1&n&&(t.OEk(0),t.wVc(1,"date"),t.I0R(2,"span",76),t.OEk(3),t.C$Y()),2&n){const e=t.GaO().$implicit;t.oRS(" ",t.g7$(1,2,e.recent_leaveDate,"dd MMM, YYYY")," "),t.yG2(3),t.oRS("(",e.recent_leave,") ")}}function mY(n,i){1&n&&t.OEk(0," - ")}function gY(n,i){if(1&n&&(t.OEk(0),t.wVc(1,"date"),t.I0R(2,"span",76),t.OEk(3),t.C$Y()),2&n){const e=t.GaO().$implicit;t.oRS(" ",t.g7$(1,2,e.upcoming_leaveDate,"dd MMM, YYYY")," "),t.yG2(3),t.oRS("(",e.upcoming_leave,") ")}}function vY(n,i){1&n&&t.OEk(0," - ")}const _Y=n=>["/employee-detail",n],yY=()=>({tab:"personalDetails"});function xY(n,i){if(1&n&&(t.I0R(0,"tr",62)(1,"td",63)(2,"a",64),t.OEk(3,"#TB01"),t.C$Y()(),t.I0R(4,"td",65)(5,"div",66)(6,"div",67),t.wR5(7,"img",68),t.C$Y(),t.I0R(8,"div",69)(9,"h5",70)(10,"a",71),t.OEk(11),t.C$Y()(),t.I0R(12,"p",39),t.OEk(13),t.C$Y()()()(),t.I0R(14,"td",65),t.yuY(15,pY,4,5,"span",72)(16,mY,1,0),t.C$Y(),t.I0R(17,"td",65),t.yuY(18,gY,4,5,"span",72)(19,vY,1,0),t.C$Y(),t.I0R(20,"td",65),t.OEk(21),t.C$Y(),t.I0R(22,"td")(23,"ul",73)(24,"li")(25,"a",74),t.wR5(26,"i",75),t.C$Y()()()()()),2&n){const e=i.$implicit;t.CI5("id","p_",e._id,""),t.yG2(7),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(3),t.E7m("routerLink",t.S45(10,_Y,e.id))("queryParams",t.q4q(12,yY)),t.yG2(),t.cNF(e.name),t.yG2(2),t.oRS(" ",e.designation," "),t.yG2(2),t.C0Y(15,e.recent_leaveDate?15:16),t.yG2(3),t.C0Y(18,e.upcoming_leaveDate?18:19),t.yG2(3),t.oRS(" ",e.total_leave_taken," "),t.yG2(4),t.CI5("routerLink","/employe-leave-record/",e.id,"")}}function bY(n,i){1&n&&(t.I0R(0,"div",32)(1,"div",77)(2,"span",78),t.OEk(3,"Loading..."),t.C$Y()()())}function wY(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",79),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredLeaveRecordData?null:e.filteredLeaveRecordData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}let CY=(()=>{class n{constructor(e,r,a){this.api=e,this.router=r,this.route=a,this.leaveRecordData=[],this.leaveRecordDataList=[],this.filteredLeaveRecordData=[],this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.currentPage=1,this.selectedStatus="",this.departments=[],this.selectedEmp=[],this.selectedDepartments=[],this.selectedDesignations=[],this.designations=[],this.filterCounts={termCount:0,designationCount:0,departmentCount:0,statusCount:0,dateCount:0,empCount:0},this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Leave Record",active:!0}],this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedDepartments=r.selectedDepartments?r.selectedDepartments.split(","):[],this.selectedDesignations=r.selectedDesignations?r.selectedDesignations.split(","):[],this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],this.selectedStatus=r.selectedStatus||null,this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&(this.getLeaveRecord(),this.getDepartment(),this.getDesignation())}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getLeaveRecord(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRecord?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveRecordDataList=r.data||[],this.filterdata()):(this.leaveRecordData=[],this.leaveRecordDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getDepartment(){this.toggleSpinner(!0),this.api.getwithoutid(`department?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.departments=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getDesignation(){this.toggleSpinner(!0),this.api.getwithoutid(`designation?status=active&company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.designations=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.leaveRecordData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.leaveRecordData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.leaveRecordDataList;this.filterCounts.termCount=0,this.filterCounts.designationCount=0,this.filterCounts.departmentCount=0,this.filterCounts.statusCount=0,this.filterCounts.empCount=0,this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase())||r.employee_id.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedDepartments.length>0&&(e=e.filter(r=>this.selectedDepartments.map(a=>a.toLowerCase()).includes(r.department.toLowerCase())),this.filterCounts.departmentCount=1),this.selectedDesignations&&this.selectedDesignations.length>0&&(e=e.filter(r=>this.selectedDesignations.map(a=>a.toLowerCase()).includes(r.designation.toLowerCase())),this.filterCounts.designationCount=1),this.selectedStatus&&(e=e.filter(r=>r.checkin_status===this.selectedStatus),this.filterCounts.statusCount=1),this.selectedEmp&&this.selectedEmp.length>0&&(e=e.filter(r=>this.selectedEmp.map(a=>a.toLowerCase()).includes(r.name.toLowerCase())),this.filterCounts.empCount=1),this.filteredLeaveRecordData=e,(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&0===this.filteredLeaveRecordData.length&&(this.currentPage=1),this.updatePaginatedData()}updatePaginatedData(){(this.term||this.selectedDepartments.length||this.selectedDesignations.length||this.selectedEmp.length||this.selectedStatus)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredLeaveRecordData.length&&(this.currentPage=1),this.leaveRecordData=(0,$n.cloneDeep)(this.filteredLeaveRecordData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term,selectedDepartments:this.selectedDepartments.join(","),selectedDesignations:this.selectedDesignations.join(","),selectedEmp:this.selectedEmp.join(","),selectedStatus:this.selectedStatus},queryParamsHandling:"merge"})}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.designationCount+this.filterCounts.departmentCount+this.filterCounts.statusCount+this.filterCounts.dateCount+this.filterCounts.empCount}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.leaveRecordData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}reset(){this.term="",this.selectedDepartments=[],this.selectedDesignations=[],this.selectedStatus="",this.selectedEmp=[],this.leaveRecordData=this.leaveRecordDataList,this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedDepartments:null,selectedDesignations:null,selectedStatus:null,selectedEmp:null,page:1,itemsPerPage:this.currentItemsPerPage},queryParamsHandling:"merge"}),this.getLeaveRecord()}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-leave-record"]],decls:105,vars:22,consts:[["title","Leave Record List",3,"breadcrumbItems"],["id","leave-record"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-lg-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex-shrink-0"],[1,"d-flex","flex-wrap","align-items-start","gap-2"],[1,"col-xxl"],[1,"search-box"],["type","text","placeholder","Search name",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0","d-md-flex"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],["type","button",1,"btn-close",3,"click"],[1,"offcanvas-body"],[1,"mb-3"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","placeholder","Search name, Employee id etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],["bindLabel","name","bindValue","name","name","Employee name","placeholder","Select Employee name",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","departments","placeholder","Select departments",3,"items","multiple","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","name","designations","placeholder","Select designations",3,"items","multiple","ngModel","change","ngModelChange"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[3,"id"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1","ms-2"],[1,"fs-md"],[1,"text-dark",3,"routerLink","queryParams"],["class","fw-bold"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-primary","btn-icon","btn-sm",3,"routerLink"],[1,"ph-eye"],[1,"fw-bold"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"]],template:function(r,a){1&r&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Leave Record "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(d){return t.kNx(a.currentItemsPerPage,d)||(a.currentItemsPerPage=d),d}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,hY,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20)(25,"input",21),t.iHE("ngModelChange",function(d){return t.kNx(a.term,d)||(a.term=d),d}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(26,"i",22),t.C$Y()(),t.I0R(27,"button",23),t.qCj("click",function(){return a.openEnd()}),t.wR5(28,"i",24),t.OEk(29," Filter "),t.yuY(30,fY,2,1,"span",25),t.C$Y()()()(),t.I0R(31,"div",26)(32,"div",27)(33,"table",28)(34,"thead",29)(35,"tr")(36,"th",30),t.qCj("click",function(){return a.onSort("name")}),t.OEk(37," Name "),t.C$Y(),t.I0R(38,"th",30),t.qCj("click",function(){return a.onSort("recent_leaveDate")}),t.OEk(39," Last Leave "),t.C$Y(),t.I0R(40,"th",30),t.qCj("click",function(){return a.onSort("upcoming_leaveDate")}),t.OEk(41," Upcoming Leave "),t.C$Y(),t.I0R(42,"th",30),t.qCj("click",function(){return a.onSort("total_leave_taken")}),t.OEk(43," Total Allotted Leave "),t.C$Y(),t.I0R(44,"th"),t.OEk(45,"Action"),t.C$Y()()(),t.I0R(46,"tbody",31),t.c53(47,xY,27,13,"tr",62,t.wJt),t.C$Y(),t.yuY(49,bY,4,0,"div",32),t.C$Y()(),t.I0R(50,"div",33)(51,"div",34)(52,"div",35)(53,"div",36),t.wR5(54,"i",37),t.C$Y()(),t.I0R(55,"h5",38),t.OEk(56,"Sorry! No Result Found"),t.C$Y(),t.I0R(57,"p",39),t.OEk(58),t.C$Y()()(),t.I0R(59,"div",40)(60,"div",41)(61,"div",42),t.OEk(62," Showing "),t.I0R(63,"span",43),t.OEk(64),t.C$Y(),t.OEk(65," of "),t.I0R(66,"span",43),t.OEk(67),t.C$Y(),t.OEk(68," Results "),t.C$Y()(),t.I0R(69,"div",44),t.yuY(70,wY,1,4,"pagination",45),t.C$Y()()()()()()(),t.I0R(71,"div",46)(72,"div",47)(73,"h5",48),t.OEk(74,"Filters"),t.C$Y(),t.I0R(75,"button",49),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(76,"div",50)(77,"div",2)(78,"div",3)(79,"div",51)(80,"p",52),t.OEk(81," Search name, Employee id etc... "),t.C$Y(),t.I0R(82,"div",20)(83,"input",53),t.iHE("ngModelChange",function(d){return t.kNx(a.term,d)||(a.term=d),d}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(84,"i",22),t.C$Y()()(),t.I0R(85,"div",3)(86,"div",51)(87,"p",52),t.OEk(88,"Employee Name"),t.C$Y(),t.I0R(89,"ng-select",54),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedEmp,d)||(a.selectedEmp=d),d}),t.C$Y()()(),t.I0R(90,"div",3)(91,"div",51)(92,"p",52),t.OEk(93,"Department"),t.C$Y(),t.I0R(94,"ng-select",55),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedDepartments,d)||(a.selectedDepartments=d),d}),t.C$Y()()(),t.I0R(95,"div",3)(96,"div",51)(97,"p",52),t.OEk(98,"Designation"),t.C$Y(),t.I0R(99,"ng-select",56),t.qCj("change",function(){return a.filterdata()}),t.iHE("ngModelChange",function(d){return t.kNx(a.selectedDesignations,d)||(a.selectedDesignations=d),d}),t.C$Y()()()()(),t.I0R(100,"div",57)(101,"button",58),t.qCj("click",function(){return a.reset()}),t.wR5(102,"i",59),t.OEk(103," Reset "),t.C$Y()()(),t.I0R(104,"div",60),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()),2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.leaveRecordData?null:a.leaveRecordData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.leaveRecordDataList?null:a.leaveRecordDataList.length),t.yG2(6),t.OKB("ngModel",a.term),t.yG2(5),t.C0Y(30,a.totalFilterCount>0?30:-1),t.yG2(17),t.oho(a.leaveRecordData),t.yG2(2),t.C0Y(49,a.spinnerStatus?49:-1),t.yG2(9),t.oRS(" We've searched ",a.leaveRecordDataList.length," Leave Record We did not find any Leave Record for you search. "),t.yG2(6),t.cNF(null==a.leaveRecordData?null:a.leaveRecordData.length),t.yG2(3),t.cNF(null==a.filteredLeaveRecordData?null:a.filteredLeaveRecordData.length),t.yG2(3),t.C0Y(70,null!=a.filteredLeaveRecordData&&a.filteredLeaveRecordData.length?70:-1),t.yG2(13),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("items",a.leaveRecordDataList)("multiple",!0),t.OKB("ngModel",a.selectedEmp),t.yG2(5),t.E7m("items",a.departments)("multiple",!0),t.OKB("ngModel",a.selectedDepartments),t.yG2(5),t.E7m("items",a.designations)("multiple",!0),t.OKB("ngModel",a.selectedDesignations))},dependencies:[Me.ay,We.O,T.ER,j.wd,j.GO,j.ot,j.GC,j.ue,j._G,nt.im,ev.UT,Me.y]})}return n})();function EY(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.wVc(5,"date"),t.wVc(6,"date"),t.C$Y(),t.I0R(7,"td"),t.OEk(8),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.wVc(11,"date"),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(2),t.CAO(" ",t.g7$(5,6,e.from_date,"dd MMM, YYYY")," - ",t.g7$(6,9,e.to_date,"dd MMM, YYYY")," "),t.yG2(4),t.CAO(" ",e.no_of_days," Day",e.no_of_days>1?"s":""," "),t.yG2(2),t.cNF(t.g7$(11,12,e.created_at,"dd MMM , yyyy"))}}let kY=(()=>{class n{constructor(){this.approveLeave=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10}ngOnInit(){this.approveLeave=this.approveLeaveList}filterdata(){this.approveLeave=this.term?this.approveLeaveList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.approveLeaveList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.approveLeave.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.approveLeaveList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.approveLeave=this.approveLeaveList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-approved-leave"]],inputs:{approveLeaveList:"approveLeaveList"},decls:33,vars:5,consts:[[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"h6",1),t.OEk(2,"Approved Leaves"),t.C$Y()(),t.I0R(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),t.OEk(11,"Leave Type"),t.C$Y(),t.I0R(12,"th",8),t.OEk(13,"From - To"),t.C$Y(),t.I0R(14,"th",8),t.OEk(15,"Applied For"),t.C$Y(),t.I0R(16,"th",8),t.OEk(17,"Applied On"),t.C$Y()()(),t.I0R(18,"tbody"),t.c53(19,EY,12,15,"tr",null,t.wJt),t.C$Y()()(),t.I0R(21,"div",9)(22,"div",10)(23,"div",11),t.OEk(24," Showing "),t.I0R(25,"span",12),t.OEk(26),t.C$Y(),t.OEk(27," of "),t.I0R(28,"span",12),t.OEk(29),t.C$Y(),t.OEk(30," Results "),t.C$Y()(),t.I0R(31,"div",13)(32,"pagination",14),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()),2&r&&(t.yG2(19),t.oho(a.approveLeave),t.yG2(7),t.cNF(null==a.approveLeave?null:a.approveLeave.length),t.yG2(3),t.cNF(null==a.approveLeaveList?null:a.approveLeaveList.length),t.yG2(3),t.E7m("totalItems",null==a.approveLeaveList?null:a.approveLeaveList.length)("itemsPerPage",a.itemsPerPage)("maxSize",5))},dependencies:[nt.im,Me.y]})}return n})();function TY(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.wVc(5,"date"),t.wVc(6,"date"),t.C$Y(),t.I0R(7,"td"),t.OEk(8),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.wVc(11,"date"),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(2),t.CAO(" ",t.g7$(5,6,e.from_date,"dd MMM, YYYY")," - ",t.g7$(6,9,e.to_date,"dd MMM, YYYY")," "),t.yG2(4),t.CAO(" ",e.no_of_days," Day",e.no_of_days>1?"s":""," "),t.yG2(2),t.cNF(t.g7$(11,12,e.created_at,"dd MMM , yyyy"))}}let SY=(()=>{class n{constructor(){this.rejectLeave=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10}ngOnInit(){this.rejectLeave=this.rejectLeaveList}filterdata(){this.rejectLeave=this.term?this.rejectLeaveList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.rejectLeaveList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.rejectLeave.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.rejectLeaveList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.rejectLeave=this.rejectLeaveList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-reject-leave"]],inputs:{rejectLeaveList:"rejectLeaveList"},decls:33,vars:5,consts:[[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"h6",1),t.OEk(2,"Rejected Leaves"),t.C$Y()(),t.I0R(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),t.OEk(11,"Leave Type"),t.C$Y(),t.I0R(12,"th",8),t.OEk(13,"From - To"),t.C$Y(),t.I0R(14,"th",8),t.OEk(15,"Applied For"),t.C$Y(),t.I0R(16,"th",8),t.OEk(17,"Applied On"),t.C$Y()()(),t.I0R(18,"tbody"),t.c53(19,TY,12,15,"tr",null,t.wJt),t.C$Y()()(),t.I0R(21,"div",9)(22,"div",10)(23,"div",11),t.OEk(24," Showing "),t.I0R(25,"span",12),t.OEk(26),t.C$Y(),t.OEk(27," of "),t.I0R(28,"span",12),t.OEk(29),t.C$Y(),t.OEk(30," Results "),t.C$Y()(),t.I0R(31,"div",13)(32,"pagination",14),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()),2&r&&(t.yG2(19),t.oho(a.rejectLeave),t.yG2(7),t.cNF(null==a.rejectLeave?null:a.rejectLeave.length),t.yG2(3),t.cNF(null==a.rejectLeaveList?null:a.rejectLeaveList.length),t.yG2(3),t.E7m("totalItems",null==a.rejectLeaveList?null:a.rejectLeaveList.length)("itemsPerPage",a.itemsPerPage)("maxSize",5))},dependencies:[nt.im,Me.y]})}return n})();function DY(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.wVc(5,"date"),t.wVc(6,"date"),t.C$Y(),t.I0R(7,"td"),t.OEk(8),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.wVc(11,"date"),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(2),t.CAO(" ",t.g7$(5,6,e.from_date,"dd MMM, YYYY")," - ",t.g7$(6,9,e.to_date,"dd MMM, YYYY")," "),t.yG2(4),t.CAO(" ",e.no_of_days," Day",e.no_of_days>1?"s":""," "),t.yG2(2),t.cNF(t.g7$(11,12,e.created_at,"dd MMM , yyyy"))}}let AY=(()=>{class n{constructor(){this.pendingLeave=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10}ngOnInit(){this.pendingLeave=this.pendingLeaveList}filterdata(){this.pendingLeave=this.term?this.pendingLeaveList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.pendingLeaveList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.pendingLeave.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.pendingLeaveList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.pendingLeave=this.pendingLeaveList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-pending-leave"]],inputs:{pendingLeaveList:"pendingLeaveList"},decls:33,vars:5,consts:[[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"h6",1),t.OEk(2,"Pending Leaves"),t.C$Y()(),t.I0R(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),t.OEk(11,"Leave Type"),t.C$Y(),t.I0R(12,"th",8),t.OEk(13,"From - To"),t.C$Y(),t.I0R(14,"th",8),t.OEk(15,"Applied For"),t.C$Y(),t.I0R(16,"th",8),t.OEk(17,"Applied On"),t.C$Y()()(),t.I0R(18,"tbody"),t.c53(19,DY,12,15,"tr",null,t.wJt),t.C$Y()()(),t.I0R(21,"div",9)(22,"div",10)(23,"div",11),t.OEk(24," Showing "),t.I0R(25,"span",12),t.OEk(26),t.C$Y(),t.OEk(27," of "),t.I0R(28,"span",12),t.OEk(29),t.C$Y(),t.OEk(30," Results "),t.C$Y()(),t.I0R(31,"div",13)(32,"pagination",14),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()),2&r&&(t.yG2(19),t.oho(a.pendingLeave),t.yG2(7),t.cNF(null==a.pendingLeave?null:a.pendingLeave.length),t.yG2(3),t.cNF(null==a.pendingLeaveList?null:a.pendingLeaveList.length),t.yG2(3),t.E7m("totalItems",null==a.pendingLeaveList?null:a.pendingLeaveList.length)("itemsPerPage",a.itemsPerPage)("maxSize",5))},dependencies:[nt.im,Me.y]})}return n})();function IY(n,i){if(1&n&&(t.I0R(0,"tr")(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td"),t.OEk(4),t.wVc(5,"date"),t.wVc(6,"date"),t.C$Y(),t.I0R(7,"td"),t.OEk(8),t.C$Y(),t.I0R(9,"td"),t.OEk(10),t.wVc(11,"date"),t.C$Y()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(2),t.CAO(" ",t.g7$(5,6,e.from_date,"dd MMM, YYYY")," - ",t.g7$(6,9,e.to_date,"dd MMM, YYYY")," "),t.yG2(4),t.CAO(" ",e.no_of_days," Day",e.no_of_days>1?"s":""," "),t.yG2(2),t.cNF(t.g7$(11,12,e.created_at,"dd MMM , yyyy"))}}let MY=(()=>{class n{constructor(){this.expiredLeave=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10}ngOnInit(){this.expiredLeave=this.expiredLeaveList}filterdata(){this.expiredLeave=this.term?this.expiredLeaveList.filter(e=>{const r=this.term.toLowerCase();return e.name.toLowerCase().includes(r)||e.employee_id.toLowerCase().includes(r)||e.status.toLowerCase().includes(r)}):this.expiredLeaveList.slice(0,5),this.updateNoResultDisplay()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");this.term&&0===this.expiredLeave.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}pageChanged(e){this.currentPage=e.page,this.updateDisplayedItems()}updatePagination(){this.totalItems=this.expiredLeaveList.length}updateDisplayedItems(){const e=(this.currentPage-1)*this.itemsPerPage;this.endItem=this.currentPage*this.itemsPerPage,this.expiredLeave=this.expiredLeaveList.slice(e,this.endItem)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-expired-leave"]],inputs:{expiredLeaveList:"expiredLeaveList"},decls:33,vars:5,consts:[[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"row"],[1,"col-lg-12"],[1,"table-responsive"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light"],["scope","col"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-2"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"h6",1),t.OEk(2,"Expired Leaves"),t.C$Y()(),t.I0R(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th",8),t.OEk(11,"Leave Type"),t.C$Y(),t.I0R(12,"th",8),t.OEk(13,"From - To"),t.C$Y(),t.I0R(14,"th",8),t.OEk(15,"Applied For"),t.C$Y(),t.I0R(16,"th",8),t.OEk(17,"Applied On"),t.C$Y()()(),t.I0R(18,"tbody"),t.c53(19,IY,12,15,"tr",null,t.wJt),t.C$Y()()(),t.I0R(21,"div",9)(22,"div",10)(23,"div",11),t.OEk(24," Showing "),t.I0R(25,"span",12),t.OEk(26),t.C$Y(),t.OEk(27," of "),t.I0R(28,"span",12),t.OEk(29),t.C$Y(),t.OEk(30," Results "),t.C$Y()(),t.I0R(31,"div",13)(32,"pagination",14),t.qCj("pageChanged",function(d){return a.pageChanged(d)}),t.C$Y()()()()()()),2&r&&(t.yG2(19),t.oho(a.expiredLeave),t.yG2(7),t.cNF(null==a.expiredLeave?null:a.expiredLeave.length),t.yG2(3),t.cNF(null==a.expiredLeaveList?null:a.expiredLeaveList.length),t.yG2(3),t.E7m("totalItems",null==a.expiredLeaveList?null:a.expiredLeaveList.length)("itemsPerPage",a.itemsPerPage)("maxSize",5))},dependencies:[nt.im,Me.y]})}return n})();function RY(n,i){if(1&n&&t.wR5(0,"img",43),2&n){const e=t.GaO();t._6D("src",e.empLeaveRecordData.image,t.K6U)}}function OY(n,i){1&n&&t.wR5(0,"img",44)}function LY(n,i){if(1&n&&(t.I0R(0,"tr",45)(1,"td"),t.OEk(2),t.C$Y(),t.I0R(3,"td")(4,"span",46),t.OEk(5),t.C$Y()(),t.I0R(6,"td"),t.OEk(7),t.C$Y(),t.I0R(8,"td",47)(9,"span",48),t.OEk(10),t.C$Y()()()),2&n){const e=i.$implicit;t.yG2(2),t.oRS(" ",e.name," "),t.yG2(3),t.cNF(e.no_of_days_taken),t.yG2(2),t.oRS(" ",e.remaining_leave," "),t.yG2(3),t.cNF(e.total_leave_days)}}function PY(n,i){if(1&n&&t.wR5(0,"app-approved-leave",36),2&n){const e=t.GaO();t.E7m("approveLeaveList",e.approveLeaveList)}}function FY(n,i){1&n&&(t.I0R(0,"div",26)(1,"h6",27),t.OEk(2,"Approved Leaves"),t.C$Y()(),t.I0R(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),t.wR5(7,"i",53),t.C$Y()(),t.I0R(8,"h5",54),t.OEk(9,"Sorry! No Result Found"),t.C$Y()()())}function BY(n,i){if(1&n&&t.wR5(0,"app-reject-leave",38),2&n){const e=t.GaO();t.E7m("rejectLeaveList",e.rejectLeaveList)}}function NY(n,i){1&n&&(t.I0R(0,"div",26)(1,"h6",27),t.OEk(2,"Rejected Leaves"),t.C$Y()(),t.I0R(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),t.wR5(7,"i",53),t.C$Y()(),t.I0R(8,"h5",54),t.OEk(9,"Sorry! No Result Found"),t.C$Y()()())}function zY(n,i){if(1&n&&t.wR5(0,"app-pending-leave",40),2&n){const e=t.GaO();t.E7m("pendingLeaveList",e.pendingLeaveList)}}function YY(n,i){1&n&&(t.I0R(0,"div",26)(1,"h6",27),t.OEk(2,"Pending Leaves"),t.C$Y()(),t.I0R(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),t.wR5(7,"i",53),t.C$Y()(),t.I0R(8,"h5",54),t.OEk(9,"Sorry! No Result Found"),t.C$Y()()())}function GY(n,i){if(1&n&&t.wR5(0,"app-expired-leave",42),2&n){const e=t.GaO();t.E7m("expiredLeaveList",e.expiredLeaveList)}}function HY(n,i){1&n&&(t.I0R(0,"div",26)(1,"h6",27),t.OEk(2,"Expired Leaves"),t.C$Y()(),t.I0R(3,"div",49)(4,"div",50)(5,"div",51)(6,"div",52),t.wR5(7,"i",53),t.C$Y()(),t.I0R(8,"h5",54),t.OEk(9,"Sorry! No Result Found"),t.C$Y()()())}let VY=(()=>{class n{constructor(e,r,a){this.api=e,this.route=r,this.location=a,this.currentTab="personalDetails",this.leaveTypesData=[],this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.approveLeaveList=[],this.rejectLeaveList=[],this.pendingLeaveList=[],this.expiredLeaveList=[],this.term="",this.currentPage=1,this.currentPagesss=3,this.totalItems=0,this.itemsPerPage=10}ngOnInit(){this.breadCrumbItems=[{label:"Leave Management"},{label:"Employee Leave Detail",active:!0}];const e=localStorage.getItem("currentUser");if(this.id=this.route.snapshot.paramMap.get("emp_id"),e){const r=JSON.parse(e);this.company_id=r.id}this.id&&(this.getEmpRecord(),this.getemployeeData()),this.id&&this.company_id&&this.leaveDetail()}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getEmpRecord(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveRecord?emp_id=${this.id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.empLeaveRecordData=r.data[0]||[]):(this.empLeaveRecordData=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getemployeeData(){this.toggleSpinner(!0),this.api.get("employees",this.id).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.employeeDetail=e.data[0]):this.handleError("Unexpected response format")},e=>{this.handleError(e.message||"An error occurred while fetching data")})}leaveDetail(){this.toggleSpinner(!0),this.api.getwithoutid(`leaveDetail?company_id=${this.company_id}&emp_id=${this.id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.leaveTypesData=r.data,this.approveLeaveList=r.leaveData.approvedLeaves||[],this.rejectLeaveList=r.leaveData.rejectedLeaves||[],this.pendingLeaveList=r.leaveData.pendingLeaves||[],this.expiredLeaveList=r.leaveData.expiredLeaves||[]):(this.approveLeaveList=[],this.rejectLeaveList=[],this.pendingLeaveList=[],this.expiredLeaveList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}handleError(e){this.toggleSpinner(!1)}changeTab(e){this.currentTab=e}getTotal(e){return this.leaveTypesData.reduce((r,a)=>r+Number(a[e]),0)}goBack(){this.location.back()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(T.gV),t.GI1(Me.oB))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-emp-leave"]],decls:136,vars:40,consts:[["title","Leave Record",3,"breadcrumbItems"],[1,"row"],[1,"col-xl-3"],[1,"card"],[1,"card-body"],[1,"text-center","border-bottom","border-dashed","pb-4"],["alt","","class","avatar-lg rounded-circle p-1 img-thumbnail",3,"src"],[1,"mt-3"],[1,"text-muted"],[1,"border-bottom","border-dashed","py-4"],[1,"card-title","mb-3"],[1,"table-responsive"],[1,"table","table-borderless","table-sm","align-middle","mb-0"],["scope","row",1,"ps-0"],[1,"text-muted","text-end"],[1,"col-xxl-9"],[1,"d-flex","align-items-center","flex-wrap","gap-2","mb-4"],["role","tablist",1,"nav","nav-pills","arrow-navtabs","nav-secondary","gap-2","flex-grow-1","order-2","order-lg-1"],["role","presentation",1,"nav-item"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","true",1,"nav-link","active",3,"click"],["data-bs-toggle","tab","href","javascript:void(0);","role","tab","aria-selected","false","tabindex","-1",1,"nav-link",3,"click"],[1,"flex-shrink-0","ms-auto","order-1","order-lg-2"],[1,"btn","btn-secondary",3,"click"],[1,"mdi","mdi-keyboard-backspace","align-baseline","me-1"],[1,"tab-content"],["id","personalDetails","role","tabpanel",1,"tab-pane","active",3,"hidden"],[1,"card-header"],[1,"card-title","mb-0"],[1,"table","align-middle","table-nowrap","table-borderless","mb-0"],[1,"table-active"],[1,"text-end"],["id","products-list-total",1,"border-top","border-top-dashed","mt-2"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"border-top","border-top-dashed","fs-base"],["scope","row"],["id","approvedLeave","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"approveLeaveList"],["id","RejectLeave","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"rejectLeaveList"],["id","pendingLeave","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"pendingLeaveList"],["id","expiredLeave","role","tabpanel",1,"tab-pane","active",3,"hidden"],[3,"expiredLeaveList"],["alt","",1,"avatar-lg","rounded-circle","p-1","img-thumbnail",3,"src"],["src","assets/images/users/avatar-1.jpg","alt","","id","user-img",1,"avatar-lg","rounded-circle","object-fit-cover","border-0","img-thumbnail","user-profile-image"],[1,"product"],[1,"product-price"],[1,"fw-medium","text-end"],[1,"product-line-price"],[1,"noresult"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],["class","product"]],template:function(r,a){1&r&&(t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.yuY(6,RY,1,1,"img",6)(7,OY,1,0),t.I0R(8,"div",7)(9,"h5"),t.OEk(10),t.C$Y(),t.I0R(11,"p",8),t.OEk(12),t.C$Y()()(),t.I0R(13,"div",9)(14,"h5",10),t.OEk(15,"Information"),t.C$Y(),t.I0R(16,"div",11)(17,"table",12)(18,"tbody")(19,"tr")(20,"th",13),t.OEk(21,"Designation"),t.C$Y(),t.I0R(22,"td",14),t.OEk(23),t.C$Y()(),t.I0R(24,"tr")(25,"th",13),t.OEk(26,"Department"),t.C$Y(),t.I0R(27,"td",14),t.OEk(28),t.C$Y()(),t.I0R(29,"tr")(30,"th",13),t.OEk(31,"Phone No"),t.C$Y(),t.I0R(32,"td",14),t.OEk(33),t.C$Y()(),t.I0R(34,"tr")(35,"th",13),t.OEk(36,"Gender"),t.C$Y(),t.I0R(37,"td",14),t.OEk(38),t.C$Y()(),t.I0R(39,"tr")(40,"th",13),t.OEk(41,"Birth of Date"),t.C$Y(),t.I0R(42,"td",14),t.OEk(43),t.wVc(44,"date"),t.C$Y()(),t.I0R(45,"tr")(46,"th",13),t.OEk(47,"Email"),t.C$Y(),t.I0R(48,"td",14),t.OEk(49),t.C$Y()(),t.I0R(50,"tr")(51,"th",13),t.OEk(52,"Address"),t.C$Y(),t.I0R(53,"td",14),t.OEk(54),t.C$Y()(),t.I0R(55,"tr")(56,"th",13),t.OEk(57,"Joining Date"),t.C$Y(),t.I0R(58,"td",14),t.OEk(59),t.wVc(60,"date"),t.C$Y()()()()()()()()(),t.I0R(61,"div",15)(62,"div",16)(63,"ul",17)(64,"li",18)(65,"a",19),t.qCj("click",function(){return a.changeTab("personalDetails")}),t.OEk(66," Leave Details "),t.C$Y()(),t.I0R(67,"li",18)(68,"a",20),t.qCj("click",function(){return a.changeTab("approvedLeave")}),t.OEk(69," Approved Leave "),t.C$Y()(),t.I0R(70,"li",18)(71,"a",20),t.qCj("click",function(){return a.changeTab("RejectLeave")}),t.OEk(72," Rejected Leave "),t.C$Y()(),t.I0R(73,"li",18)(74,"a",20),t.qCj("click",function(){return a.changeTab("pendingLeave")}),t.OEk(75," Pending Leaves "),t.C$Y()(),t.I0R(76,"li",18)(77,"a",20),t.qCj("click",function(){return a.changeTab("expiredLeave")}),t.OEk(78," Expired Leaves "),t.C$Y()()(),t.I0R(79,"div",21)(80,"button",22),t.qCj("click",function(){return a.goBack()}),t.wR5(81,"i",23),t.OEk(82," Back "),t.C$Y()()(),t.I0R(83,"div",3)(84,"div",24)(85,"div",25)(86,"div",3)(87,"div",26)(88,"h6",27),t.OEk(89,"Leave Type Detail"),t.C$Y()(),t.I0R(90,"div",4)(91,"div",11)(92,"table",28)(93,"thead",29)(94,"tr")(95,"th"),t.OEk(96,"Leave Type"),t.C$Y(),t.I0R(97,"th"),t.OEk(98,"Allotted Leaves"),t.C$Y(),t.I0R(99,"th"),t.OEk(100,"Balance Leaves"),t.C$Y(),t.I0R(101,"th",30),t.OEk(102,"Total Leaves"),t.C$Y()()(),t.I0R(103,"tbody"),t.c53(104,LY,11,4,"tr",55,t.wJt),t.C$Y()(),t.I0R(106,"div",31)(107,"table",32)(108,"tbody")(109,"tr")(110,"td"),t.OEk(111,"Total Leaves"),t.C$Y(),t.I0R(112,"td",30),t.OEk(113),t.C$Y()(),t.I0R(114,"tr")(115,"td"),t.OEk(116,"Total Allotted Leaves"),t.C$Y(),t.I0R(117,"td",30),t.OEk(118),t.C$Y()(),t.I0R(119,"tr",33)(120,"th",34),t.OEk(121,"Total Balance Leaves"),t.C$Y(),t.I0R(122,"th",30),t.OEk(123),t.C$Y()()()()()()()()(),t.I0R(124,"div",35),t.yuY(125,PY,1,1,"app-approved-leave",36)(126,FY,10,0),t.C$Y(),t.I0R(127,"div",37),t.yuY(128,BY,1,1,"app-reject-leave",38)(129,NY,10,0),t.C$Y(),t.I0R(130,"div",39),t.yuY(131,zY,1,1,"app-pending-leave",40)(132,YY,10,0),t.C$Y(),t.I0R(133,"div",41),t.yuY(134,GY,1,1,"app-expired-leave",42)(135,HY,10,0),t.C$Y()()()()()),2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(6),t.C0Y(6,null!=a.empLeaveRecordData&&a.empLeaveRecordData.image?6:7),t.yG2(4),t.oRS(" ",null==a.empLeaveRecordData?null:a.empLeaveRecordData.name," "),t.yG2(2),t.cNF(null==a.empLeaveRecordData?null:a.empLeaveRecordData.designation),t.yG2(11),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.designation_name," "),t.yG2(5),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.department_name," "),t.yG2(5),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.mobile," "),t.yG2(5),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.gender," "),t.yG2(5),t.oRS(" ",t.g7$(44,34,null==a.employeeDetail?null:a.employeeDetail.dob,"dd MMM, YYYY")," "),t.yG2(6),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.email," "),t.yG2(5),t.oRS(" ",null==a.employeeDetail?null:a.employeeDetail.address," "),t.yG2(5),t.oRS(" ",t.g7$(60,37,null==a.employeeDetail?null:a.employeeDetail.joining_date,"dd MMM, YYYY")," "),t.yG2(6),t.eAK("active","personalDetails"===a.currentTab),t.yG2(3),t.eAK("active","approvedLeave"===a.currentTab),t.yG2(3),t.eAK("active","RejectLeave"===a.currentTab),t.yG2(3),t.eAK("active","pendingLeave"===a.currentTab),t.yG2(3),t.eAK("active","expiredLeave"===a.currentTab),t.yG2(8),t.E7m("hidden","personalDetails"!==a.currentTab),t.yG2(19),t.oho(a.leaveTypesData),t.yG2(9),t.oRS(" ",a.getTotal("total_leave_days")," "),t.yG2(5),t.oRS(" ",a.getTotal("no_of_days_taken")," "),t.yG2(5),t.oRS(" ",a.getTotal("remaining_leave")," "),t.yG2(),t.E7m("hidden","approvedLeave"!==a.currentTab),t.yG2(),t.C0Y(125,a.approveLeaveList&&a.approveLeaveList.length>0?125:126),t.yG2(2),t.E7m("hidden","RejectLeave"!==a.currentTab),t.yG2(),t.C0Y(128,a.rejectLeaveList&&a.rejectLeaveList.length>0?128:129),t.yG2(2),t.E7m("hidden","pendingLeave"!==a.currentTab),t.yG2(),t.C0Y(131,a.pendingLeaveList&&a.pendingLeaveList.length>0?131:132),t.yG2(2),t.E7m("hidden","expiredLeave"!==a.currentTab),t.yG2(),t.C0Y(134,a.expiredLeaveList&&a.expiredLeaveList.length>0?134:135))},dependencies:[We.O,kY,SY,AY,MY,Me.y]})}return n})();var yD=Zt(3768),UY=Zt(1472),xD=Zt(2164);const jY=["chart"];let bD=(()=>{class n{constructor(e){this.ngZone=e,this.autoUpdateSeries=!0}ngOnChanges(e){UY.u.schedule(()=>{this.autoUpdateSeries&&0===Object.keys(e).filter(r=>"series"!==r).length?this.updateSeries(this.series,!0):this.createElement()})}ngOnDestroy(){this.chartObj&&this.chartObj.destroy()}createElement(){const e={};this.annotations&&(e.annotations=this.annotations),this.chart&&(e.chart=this.chart),this.colors&&(e.colors=this.colors),this.dataLabels&&(e.dataLabels=this.dataLabels),this.series&&(e.series=this.series),this.stroke&&(e.stroke=this.stroke),this.labels&&(e.labels=this.labels),this.legend&&(e.legend=this.legend),this.fill&&(e.fill=this.fill),this.tooltip&&(e.tooltip=this.tooltip),this.plotOptions&&(e.plotOptions=this.plotOptions),this.responsive&&(e.responsive=this.responsive),this.markers&&(e.markers=this.markers),this.noData&&(e.noData=this.noData),this.xaxis&&(e.xaxis=this.xaxis),this.yaxis&&(e.yaxis=this.yaxis),this.forecastDataPoints&&(e.forecastDataPoints=this.forecastDataPoints),this.grid&&(e.grid=this.grid),this.states&&(e.states=this.states),this.title&&(e.title=this.title),this.subtitle&&(e.subtitle=this.subtitle),this.theme&&(e.theme=this.theme),this.chartObj&&this.chartObj.destroy(),this.ngZone.runOutsideAngular(()=>{this.chartObj=new xD(this.chartElement.nativeElement,e)}),this.render()}render(){return this.ngZone.runOutsideAngular(()=>this.chartObj.render())}updateOptions(e,r,a,o){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateOptions(e,r,a,o))}updateSeries(e,r){return this.ngZone.runOutsideAngular(()=>this.chartObj.updateSeries(e,r))}appendSeries(e,r){this.ngZone.runOutsideAngular(()=>this.chartObj.appendSeries(e,r))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartObj.appendData(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartObj.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartObj.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartObj.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartObj.resetSeries())}zoomX(e,r){this.ngZone.runOutsideAngular(()=>this.chartObj.zoomX(e,r))}toggleDataPointSelection(e,r){this.ngZone.runOutsideAngular(()=>this.chartObj.toggleDataPointSelection(e,r))}destroy(){this.chartObj.destroy()}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartObj.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartObj.paper())}addXaxisAnnotation(e,r,a){this.ngZone.runOutsideAngular(()=>this.chartObj.addXaxisAnnotation(e,r,a))}addYaxisAnnotation(e,r,a){this.ngZone.runOutsideAngular(()=>this.chartObj.addYaxisAnnotation(e,r,a))}addPointAnnotation(e,r,a){this.ngZone.runOutsideAngular(()=>this.chartObj.addPointAnnotation(e,r,a))}removeAnnotation(e,r){this.ngZone.runOutsideAngular(()=>this.chartObj.removeAnnotation(e,r))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartObj.clearAnnotations(e))}dataURI(e){return this.chartObj.dataURI(e)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.WW2))},n.\u0275cmp=t.In1({type:n,selectors:[["apx-chart"]],viewQuery:function(e,r){if(1&e&&t.CC$(jY,7),2&e){let a;t.wto(a=t.Gqi())&&(r.chartElement=a.first)}},inputs:{chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",markers:"markers",noData:"noData",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",forecastDataPoints:"forecastDataPoints",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme",autoUpdateSeries:"autoUpdateSeries"},features:[t.SYr],decls:2,vars:0,consts:[["chart",""]],template:function(e,r){1&e&&t.wR5(0,"div",null,0)},encapsulation:2,changeDetection:0}),n})();window.ApexCharts=xD;let $Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({}),n})();function WY(n,i){if(1&n&&(t.wR5(0,"img",80),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t._6D("src",e.image,t.K6U),t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function XY(n,i){if(1&n&&(t.wR5(0,"img",83),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function qY(n,i){if(1&n){const e=t.KQA();t.I0R(0,"li",74),t.qCj("click",function(){const o=t.usT(e).$index,d=t.GaO();return t.CGJ(d.onEmployeeClick(o))}),t.I0R(1,"div",75)(2,"div",76),t.yuY(3,WY,3,2)(4,XY,3,1),t.C$Y(),t.I0R(5,"div")(6,"h6",77)(7,"a",78),t.OEk(8),t.C$Y(),t.wR5(9,"br"),t.C$Y(),t.OEk(10," Check-in at : "),t.wR5(11,"span",79),t.C$Y()()()}if(2&n){const e=i.$implicit,r=i.$index,a=t.GaO();t.E7m("ngClass",r%2==0?"":"bg-light-subtle"),t.yG2(3),t.C0Y(3,e.image?3:4),t.yG2(5),t.cNF(e.name),t.yG2(3),t.E7m("innerHTML",a.formatTime(e.checkInTime),t.E3n)}}function ZY(n,i){1&n&&(t.I0R(0,"div",84),t.wR5(1,"img",85),t.I0R(2,"h6",86),t.OEk(3," No employee have Checked-in yet. "),t.C$Y()())}function KY(n,i){if(1&n&&(t.I0R(0,"li",87)(1,"div",75)(2,"div",7)(3,"div",24)(4,"div",88)(5,"div",63)(6,"h6"),t.OEk(7),t.wVc(8,"date"),t.C$Y(),t.OEk(9),t.wVc(10,"date"),t.C$Y()(),t.I0R(11,"div",89)(12,"h6",90),t.OEk(13),t.C$Y(),t.I0R(14,"small",91),t.OEk(15),t.C$Y()()()()()()),2&n){const e=i.$implicit;t.yG2(7),t.cNF(t.g7$(8,4,e.date,"MMM")),t.yG2(2),t.oRS(" ",t.g7$(10,7,e.date,"dd")," "),t.yG2(4),t.cNF(e.name),t.yG2(2),t.cNF(e.daysUntilHoliday)}}function JY(n,i){if(1&n&&(t.wR5(0,"img",80),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t._6D("src",e.image,t.K6U),t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function QY(n,i){if(1&n&&(t.wR5(0,"img",83),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function e7(n,i){if(1&n&&(t.I0R(0,"tr")(1,"th",92),t.OEk(2),t.C$Y(),t.I0R(3,"td")(4,"div",75)(5,"div",76),t.yuY(6,JY,3,2)(7,QY,3,1),t.C$Y(),t.I0R(8,"div")(9,"h6",77)(10,"a",78),t.OEk(11),t.C$Y()()()()(),t.I0R(12,"td"),t.OEk(13),t.C$Y(),t.wR5(14,"td",93),t.C$Y()),2&n){const e=i.$implicit,r=i.$index,a=t.GaO();t.yG2(2),t.cNF(r+1),t.yG2(4),t.C0Y(6,e.image?6:7),t.yG2(5),t.cNF(e.name),t.yG2(2),t.cNF(e.address),t.yG2(),t.E7m("innerHTML",a.formatTime(e.checkInTime),t.E3n)}}function t7(n,i){1&n&&(t.I0R(0,"h6",86),t.OEk(1," No employee have Checked-in yet. "),t.C$Y())}function n7(n,i){if(1&n&&(t.wR5(0,"img",80),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t._6D("src",e.image,t.K6U),t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function r7(n,i){if(1&n&&(t.wR5(0,"img",83),t.I0R(1,"span",81),t.wR5(2,"span",82),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("ngClass","Check-in"==e.latestCheckStatus?"bg-success":" bg-danger")}}function a7(n,i){if(1&n&&(t.I0R(0,"tr")(1,"th",92),t.OEk(2),t.C$Y(),t.I0R(3,"td")(4,"div",75)(5,"div",76),t.yuY(6,n7,3,2)(7,r7,3,1),t.C$Y(),t.I0R(8,"div")(9,"h6",77)(10,"a",78),t.OEk(11),t.C$Y()()()()(),t.I0R(12,"td"),t.OEk(13),t.C$Y(),t.wR5(14,"td",93),t.C$Y()),2&n){const e=i.$implicit,r=i.$index,a=t.GaO();t.yG2(2),t.cNF(r+1),t.yG2(4),t.C0Y(6,e.image?6:7),t.yG2(5),t.cNF(e.name),t.yG2(2),t.cNF(e.address),t.yG2(),t.E7m("innerHTML",a.formatTime(e.checkOutTime),t.E3n)}}function s7(n,i){1&n&&(t.I0R(0,"h6",86),t.OEk(1," No employee have Checked-Out yet. "),t.C$Y())}function o7(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",94)(1,"button",95),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.sortBy(0,"This week"))}),t.OEk(2," This week "),t.C$Y(),t.I0R(3,"button",95),t.qCj("click",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.sortBy(-1,"Last week"))}),t.OEk(4," Last week "),t.C$Y()()}}let l7=(()=>{class n{constructor(e){this.api=e,this.spinnerStatus=!1,this.upcomingHoliday=[],this.checkIn=[],this.checkOut=[],this.sortValue="This week",this.currentTab="check-in",this.weeklyAttendanceData={present:[],absent:[],onLeave:[]},this.basicChart={series:[],chart:{},dataLabels:{},plotOptions:{},yaxis:{},legend:{},fill:{},stroke:{},tooltip:{},xaxis:{},colors:[]},this.markers=[]}ngOnInit(){const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id,this.company_name=r.name,this.company_logo=r.logo}this.company_id&&(this.getTotalAttendance(),this.getUpcomingHoilday(),this.getCheckInOut(),this.initializeDefaultMap(),this.getWeeklyAttendanceData())}getTotalAttendance(){this.toggleSpinner(!0),this.api.getwithoutid(`getTotalAttendance?company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),e&&e.status?(this.currentDateData=e.currentDate.attendanceCount,this.previousDateData=e.previousDate.attendanceCount):this.currentDateData=[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getWeeklyAttendanceData(e=0){this.toggleSpinner(!0),this.api.getwithoutid(`getWeeklyAttendance?company_id=${this.company_id}&weekOffset=${e}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?(this.weeklyAttendanceData=r.attendanceSeries,this._basicChart('["--tb-success", "--tb-danger", "--tb-warning"]')):this.weeklyAttendanceData={present:[],absent:[],onLeave:[]}},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}initializeDefaultMap(){this.map=new Mc.Map({accessToken:"pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www",container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[78.22773895317802,26.22052522541971],zoom:13}),this.map.addControl(new Mc.NavigationControl)}toggleSpinner(e){this.spinnerStatus=e}getUpcomingHoilday(){this.toggleSpinner(!0),this.api.getwithoutid(`getUpcomingHoliday?company_id=${this.company_id}`).subscribe(e=>{this.toggleSpinner(!1),this.upcomingHoliday=e&&e.status?e.data:[]},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}getCheckInOut(){var e=this;this.toggleSpinner(!0),this.api.getwithoutid(`checkInOut?company_id=${this.company_id}`).subscribe(function(){var r=(0,rb.c)(function*(a){if(e.toggleSpinner(!1),a&&a.status){const[o,d]=yield Promise.all([e.getAddressArray(a.checkInArray,"checkIn"),e.getAddressArray(a.checkOutArray,"checkOut")]);e.checkIn=o,e.checkOut=d,e.addMarkersToMap(e.checkIn)}else e.checkIn=[],e.checkOut=[]});return function(a){return r.apply(this,arguments)}}(),r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getAddressArray(e,r){var a=this;return(0,rb.c)(function*(){return yield Promise.all(e.map(function(){var o=(0,rb.c)(function*(d){const p="checkIn"===r?d.longCheckIn:d.longCheckOut,D="checkIn"===r?d.latCheckIn:d.latCheckOut,P=yield a.geocodeCoordinates(p,D);return{...d,address:P}});return function(d){return o.apply(this,arguments)}}()))})()}geocodeCoordinates(e,r){return fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e},${r}.json?access_token=pk.eyJ1IjoiZ3VyamVldHYyIiwiYSI6ImNseWxiN3o5cDEzd3UyaXM0cmU3cm0zNnMifQ._-UTYeqo8cq1cH8vYy9Www`).then(o=>{if(!o.ok)throw new Error(`Error fetching geocode data: ${o.statusText}`);return o.json()}).then(o=>o.features&&o.features.length>0?o.features[0].place_name:(console.warn("No valid address found for coordinates:",e,r),"")).catch(o=>(console.error("Error fetching address:",o),""))}addMarkersToMap(e){this.clearMarkers(),e.forEach((r,a)=>{console.log(r);const d=this.createMarkerElement(r.image||"assets/images/users/avatar-1.jpg",r.latestCheckStatus),p=new Mc.Marker(d).setLngLat([r.longCheckIn,r.latCheckIn]).addTo(this.map);this.markers.push(p),this.attachPopup(p,`${r.name} <br> Checked in at ${r.checkInTime}`)}),this.fitMapToMarkers()}createMarkerElement(e,r){const a=document.createElement("div");a.className="custom-marker",a.style.width="50px",a.style.height="50px",a.style.borderRadius="50%",a.style.overflow="hidden",a.style.backgroundColor="#ffffff",a.style.border="Check-in"==r?"2px solid rgb(13 169 0)":"2px solid rgb(255 58 0)";const o=document.createElement("img");return o.src=e||"path/to/default-image.jpg",o.alt="Employee Image",o.style.width="100%",o.style.height="100%",o.style.objectFit="cover",a.appendChild(o),a}attachPopup(e,r){const a=new Mc.Popup({offset:25}).setHTML(r);e.setPopup(a)}fitMapToMarkers(){if(0===this.markers.length)return;const e=new Mc.LngLatBounds;this.markers.forEach(r=>{e.extend(r.getLngLat())}),this.map.fitBounds(e,{padding:{top:50,bottom:50,left:50,right:50},maxZoom:15})}clearMarkers(){this.markers.forEach(e=>e.remove()),this.markers=[]}onEmployeeClick(e){const r=this.markers[e];r&&(this.map.flyTo({center:r.getLngLat(),zoom:13}),r.togglePopup())}handleError(e){console.error(e),this.toggleSpinner(!1)}formatTime(e){if(!e)return"Invalid time";const[r,a,o]=e.split(":");return`${+r%12||12}:${a} ${+r>=12?"PM":"AM"}`}getChartColorsArray(e){return(e=JSON.parse(e)).map(function(r){var a=r.replace(" ","");if(-1===a.indexOf(",")){var o=getComputedStyle(document.documentElement).getPropertyValue(a);return o?o=o.replace(" ",""):a}var d=r.split(",");if(2==d.length){var p=getComputedStyle(document.documentElement).getPropertyValue(d[0]);return"rgba("+p+","+d[1]+")"}return a})}_basicChart(e){e=this.getChartColorsArray(e),this.weeklyAttendanceData||(this.weeklyAttendanceData={present:[],absent:[],onLeave:[]}),this.basicChart={series:[{name:"Present",data:this.weeklyAttendanceData.present},{name:"Absent",data:this.weeklyAttendanceData.absent},{name:"On Leave",data:this.weeklyAttendanceData.onLeave}],chart:{height:350,type:"bar",toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},plotOptions:{bar:{horizontal:!1,columnWidth:"45%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},colors:e,xaxis:{categories:["Mon","Tue","Wed","Thur","Fri","Sat","Sun"]},yaxis:{title:{text:"No. of employees"}},grid:{borderColor:"#f1f1f1"},fill:{opacity:1},tooltip:{y:{formatter:function(r){return r+" employees"}}}},setTimeout(()=>{window.dispatchEvent(new Event("resize"))},300)}sortBy(e,r){this.sortValue=r,this.getWeeklyAttendanceData(e)}changeTab(e){this.currentTab=e}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-dashboard"]],decls:178,vars:38,consts:[[1,"row"],[1,"col-xxl","col-sm-6"],[1,"card","bg-primary","overflow-hidden",2,"background-size","100px","background-position","right bottom"],[1,"position-absolute","bottom-0",2,"opacity","0.15"],["src","assets/images/effect-pattern/pattern-2.svg","alt","",1,"img-fluid"],[1,"card-body"],[1,"d-flex","align-items-center","mb-3"],[1,"flex-grow-1"],[1,"avatar-sm"],[1,"avatar-title","bg-success-subtle","fs-xl","rounded","text-success"],[1,"ri-home-8-line"],[1,"flex-shrink-0"],["alt","Company Logo",1,"avatar-sm",3,"src"],[1,"fw-semibold","text-white"],[1,"counter-value"],[1,"fw-medium","mb-0","text-white"],[1,"col-xxl","col-sm-6","h-100"],[1,"card","file-manager-widgets",2,"background-size","50px","background-position","right bottom"],[1,"card-body","h-100"],[1,"avatar-sm","float-end"],[1,"avatar-title","bg-info-subtle","fs-xl","rounded","text-info"],[1,"ri-user-line"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"d-flex"],[1,"text-muted","mb-0"],[1,"badge","bg-success-subtle","text-success"],[1,"text-muted","mb-0","ms-3"],[1,"badge","bg-danger-subtle","text-danger"],[1,"card","overflow-hidden","h-100"],[1,"ri-user-follow-line"],[1,"me-1","badge",3,"ngClass"],[1,"align-middle",3,"ngClass"],[1,"avatar-title","bg-danger-subtle","fs-xl","rounded","text-danger"],[1,"ri-user-unfollow-line"],[1,"align-middle","fs-sm","ri-arrow-right-down-line",3,"ngClass"],[1,"avatar-title","bg-warning-subtle","fs-xl","rounded","text-warning"],[1,"mdi","mdi-account-alert-outline"],[1,"col-xl-12"],[1,"card",2,"max-height","550px"],[1,"card-header","align-items-center","d-flex"],[1,"card-title","mb-0","flex-grow-1"],[1,"col-12","col-lg-9"],["id","map",1,"match-parent","w-100","h-100"],[1,"col-lg-3"],[1,"mb-4"],[1,"text-muted","mb-3","fw-medium","fs-xs","text-uppercase"],[1,"list-unstyled","vstack","gap-2","overflow"],[1,"col-12","col-lg-3"],[1,"card"],["data-simplebar",""],[1,"list-group"],[1,"col-xxl-5","col-lg-6"],[1,"card-header","d-flex","align-items-center"],["id","popularProperty","role","tablist","aria-orientation","vertical",1,"nav","nav-pills","gap-1"],["id","rentProperty","data-bs-toggle","pill","type","button","role","tab","aria-controls","rentPropertyTabs","aria-selected","false","tabindex","-1",1,"btn","btn-ghost-info","btn-sm",3,"click"],["id","saleProperty","data-bs-toggle","pill","type","button","role","tab","aria-controls","salePropertyTabs","aria-selected","true",1,"btn","btn-ghost-danger","btn-sm",3,"click"],[1,"mb-2","mx-n3","px-3",2,"height","330px"],["id","popularPropertyContent",1,"tab-content"],["id","salePropertyTabs",1,"tab-pane","show","active",3,"hidden"],[1,"table-responsive"],[1,"table","mb-0"],["scope","col"],[1,"text-center"],["routerLink","/attendance-list",1,"icon-link"],[1,"bi","bi-arrow-right"],[1,"col-xl-4"],[1,"card-header","d-flex"],["dropdown","",1,"dropdown","card-header-dropdown","sortble-dropdown"],["dropdownToggle","","href","javascript:void(0);",1,"text-reset","dropdown-btn"],[1,"text-muted","dropdown-title"],[1,"mdi","mdi-chevron-down","ms-1"],["class","dropdown-menu dropdown-menu-end",4,"dropdownMenu"],["dir","ltr",3,"series","chart","dataLabels","plotOptions","yaxis","legend","fill","stroke","tooltip","xaxis","colors"],[1,"p-2","rounded",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative","p-1","me-2"],[1,"mb-0"],[1,"text-reset","products"],[1,"",3,"innerHTML"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"position-absolute","top-0","start-100","translate-middle","badge","border","border-2","border-white","rounded-circle","p-1",3,"ngClass"],[1,"visually-hidden"],["alt","","src","assets/images/users/avatar-1.jpg",1,"avatar-sm","rounded"],[1,"d-flex","flex-column","align-items-center","mt-md-4"],["src","assets/images/users/check-in.png","alt","",1,"img-fluid","w-50"],[1,"text-muted","my-3","fw-medium","fs-xs","text-uppercase"],[1,"list-group-item"],[1,"flex-shrink-0","avatar-sm","border-end-sm"],[1,"flex-shrink-0","ms-3"],[1,"fs-md","mb-0"],[1,"text-muted"],["scope","row"],[3,"innerHTML"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","sort",3,"click"],["class","p-2 rounded",3,"ngClass"],["class","d-flex flex-column align-items-center mt-md-4"],["class","list-group-item"],["class","text-muted my-3 fw-medium fs-xs text-uppercase"]],template:function(r,a){1&r&&(t.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.wR5(4,"img",4),t.C$Y(),t.I0R(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),t.wR5(10,"i",10),t.C$Y()()(),t.I0R(11,"div",11),t.wR5(12,"img",12),t.C$Y()(),t.I0R(13,"h4",13)(14,"span",14),t.OEk(15,"Welcome To"),t.C$Y()(),t.I0R(16,"p",15),t.OEk(17),t.C$Y()()()(),t.I0R(18,"div",16)(19,"div",17)(20,"div",18)(21,"div",19)(22,"div",20),t.wR5(23,"i",21),t.C$Y()(),t.I0R(24,"h1",22)(25,"span",14),t.OEk(26),t.C$Y()(),t.I0R(27,"p",23),t.OEk(28,"Total Employee"),t.C$Y(),t.I0R(29,"div",24)(30,"p",25)(31,"span",26),t.OEk(32),t.C$Y()(),t.I0R(33,"p",27)(34,"span",28),t.OEk(35),t.C$Y()()()()()(),t.I0R(36,"div",16)(37,"div",29)(38,"div",18)(39,"div",19)(40,"div",9),t.wR5(41,"i",30),t.C$Y()(),t.I0R(42,"h1")(43,"span",14),t.OEk(44),t.C$Y()(),t.I0R(45,"p",23),t.OEk(46,"Total Present"),t.C$Y(),t.I0R(47,"p",25)(48,"span",31),t.wR5(49,"i",32),t.OEk(50),t.C$Y(),t.OEk(51," Present last day "),t.C$Y()()()(),t.I0R(52,"div",16)(53,"div",29)(54,"div",18)(55,"div",19)(56,"div",33),t.wR5(57,"i",34),t.C$Y()(),t.I0R(58,"h1")(59,"span",14),t.OEk(60),t.C$Y()(),t.I0R(61,"p",23),t.OEk(62,"Total Absent"),t.C$Y(),t.I0R(63,"p",25)(64,"span",31),t.wR5(65,"i",35),t.OEk(66),t.C$Y(),t.OEk(67," Absent last day "),t.C$Y()()()(),t.I0R(68,"div",16)(69,"div",29)(70,"div",18)(71,"div",19)(72,"div",36),t.wR5(73,"i",37),t.C$Y()(),t.I0R(74,"h1")(75,"span",14),t.OEk(76),t.C$Y()(),t.I0R(77,"p",23),t.OEk(78,"Total On Leave"),t.C$Y(),t.I0R(79,"p",25)(80,"span",31),t.wR5(81,"i",35),t.OEk(82),t.C$Y(),t.OEk(83," On leave last day "),t.C$Y()()()()(),t.I0R(84,"div",0)(85,"div",38)(86,"div",39)(87,"div",40)(88,"h4",41),t.OEk(89,"Check In Location"),t.C$Y()(),t.I0R(90,"div",5)(91,"div",0)(92,"div",42),t.wR5(93,"div",43),t.C$Y(),t.I0R(94,"div",44)(95,"div",45)(96,"h6",46),t.OEk(97," Check-In Employee List "),t.C$Y()(),t.I0R(98,"div")(99,"ul",47),t.c53(100,qY,12,4,"li",96,t.wJt,!1,ZY,4,0,"div",97),t.C$Y()()()()()()(),t.I0R(103,"div",48)(104,"div",49)(105,"div",5)(106,"h5",22),t.OEk(107,"Upcoming Holiday"),t.C$Y()(),t.I0R(108,"div",50)(109,"ul",51),t.c53(110,KY,16,10,"li",98,t.wJt),t.C$Y()()()(),t.I0R(112,"div",52)(113,"div",49)(114,"div",53)(115,"h4",41),t.OEk(116,"Who's Check in/Out"),t.C$Y(),t.I0R(117,"div",11)(118,"div",54)(119,"button",55),t.qCj("click",function(){return a.changeTab("check-in")}),t.OEk(120," check-in "),t.C$Y(),t.I0R(121,"button",56),t.qCj("click",function(){return a.changeTab("check-out")}),t.OEk(122," check-out "),t.C$Y()()()(),t.I0R(123,"div",5)(124,"ngx-simplebar",57)(125,"div",58)(126,"div",59)(127,"div",60)(128,"table",61)(129,"thead")(130,"tr")(131,"th",62),t.OEk(132,"#"),t.C$Y(),t.I0R(133,"th",62),t.OEk(134,"Name"),t.C$Y(),t.I0R(135,"th",62),t.OEk(136,"Address"),t.C$Y(),t.I0R(137,"th",62),t.OEk(138,"Time"),t.C$Y()()(),t.I0R(139,"tbody"),t.c53(140,e7,15,5,"tr",null,t.wJt,!1,t7,2,0,"h6",99),t.C$Y()()()(),t.I0R(143,"div",59)(144,"div",60)(145,"table",61)(146,"thead")(147,"tr")(148,"th",62),t.OEk(149,"#"),t.C$Y(),t.I0R(150,"th",62),t.OEk(151,"Name"),t.C$Y(),t.I0R(152,"th",62),t.OEk(153,"Address"),t.C$Y(),t.I0R(154,"th",62),t.OEk(155,"Time"),t.C$Y()()(),t.I0R(156,"tbody"),t.c53(157,a7,15,5,"tr",null,t.wJt,!1,s7,2,0,"h6",99),t.C$Y()()()()()(),t.I0R(160,"div",63)(161,"a",64),t.OEk(162,"View All "),t.wR5(163,"i",65),t.C$Y()()()()(),t.I0R(164,"div",66)(165,"div",49)(166,"div",67)(167,"h5",41),t.OEk(168,"Weekly Attendance Charts"),t.C$Y(),t.I0R(169,"div",11)(170,"div",68)(171,"a",69)(172,"span",70),t.OEk(173),t.C$Y(),t.wR5(174,"i",71),t.C$Y(),t.yuY(175,o7,5,0,"div",72),t.C$Y()()(),t.I0R(176,"div",5),t.wR5(177,"apx-chart",73),t.C$Y()()()()),2&r&&(t.yG2(12),t.CI5("src","https://trackingapi.crrescita.com/",a.company_logo,"",t.K6U),t.yG2(5),t.oRS(" ",a.company_name," "),t.yG2(9),t.cNF(null==a.currentDateData?null:a.currentDateData.totalEmployees),t.yG2(6),t.oRS("",null==a.currentDateData?null:a.currentDateData.totalActive," Active"),t.yG2(3),t.oRS("",null==a.currentDateData?null:a.currentDateData.totalInactive," Inactive"),t.yG2(9),t.cNF(null==a.currentDateData?null:a.currentDateData.totalPresent),t.yG2(4),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalPresent)>=(null==a.currentDateData?null:a.currentDateData.totalPresent)?"text-success bg-success-subtle text-success":"text-danger bg-danger-subtle text-danger"),t.yG2(),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalPresent)>=(null==a.currentDateData?null:a.currentDateData.totalPresent)?"fs-sm ri-arrow-right-up-line":"fs-sm ri-arrow-right-down-line"),t.yG2(),t.oRS(" ",null==a.previousDateData?null:a.previousDateData.totalPresent,""),t.yG2(10),t.cNF(null==a.currentDateData?null:a.currentDateData.totalAbsent),t.yG2(4),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalAbsent)>=(null==a.currentDateData?null:a.currentDateData.totalAbsent)?"text-success bg-success-subtle text-success":"text-danger bg-danger-subtle text-danger"),t.yG2(),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalAbsent)>=(null==a.currentDateData?null:a.currentDateData.totalAbsent)?"fs-sm ri-arrow-right-up-line":"fs-sm ri-arrow-right-down-line"),t.yG2(),t.oRS(" ",null==a.previousDateData?null:a.previousDateData.totalAbsent,""),t.yG2(10),t.cNF(null==a.currentDateData?null:a.currentDateData.totalLeave),t.yG2(4),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalLeave)>=(null==a.currentDateData?null:a.currentDateData.totalLeave)?"text-success bg-success-subtle text-success":"text-danger bg-danger-subtle text-danger"),t.yG2(),t.E7m("ngClass",(null==a.previousDateData?null:a.previousDateData.totalLeave)>=(null==a.currentDateData?null:a.currentDateData.totalLeave)?"fs-sm ri-arrow-right-up-line":"fs-sm ri-arrow-right-down-line"),t.yG2(),t.oRS(" ",null==a.previousDateData?null:a.previousDateData.totalLeave,""),t.yG2(18),t.oho(a.checkIn),t.yG2(10),t.oho(a.upcomingHoliday),t.yG2(9),t.eAK("active","check-in"===a.currentTab),t.yG2(2),t.eAK("active","check-out"===a.currentTab),t.yG2(5),t.E7m("hidden","check-in"!==a.currentTab),t.yG2(14),t.oho(a.checkIn),t.yG2(3),t.E7m("hidden","check-out"!==a.currentTab),t.yG2(14),t.oho(a.checkOut),t.yG2(16),t.cNF(a.sortValue),t.yG2(4),t.E7m("series",a.basicChart.series)("chart",a.basicChart.chart)("dataLabels",a.basicChart.dataLabels)("plotOptions",a.basicChart.plotOptions)("yaxis",a.basicChart.yaxis)("legend",a.basicChart.legend)("fill",a.basicChart.fill)("stroke",a.basicChart.stroke)("tooltip",a.basicChart.tooltip)("xaxis",a.basicChart.xaxis)("colors",a.basicChart.colors))},dependencies:[Me.QF,T.ER,Wu.uo,Wu.M3,Wu.mY,yD.O,my.uM,bD,Me.y],styles:['body[_ngcontent-%COMP%]{margin:0;padding:0}#map[_ngcontent-%COMP%]{position:relative;top:0;bottom:0;width:100%;height:100%}.match-parent[_ngcontent-%COMP%]{height:100%}.overflow[_ngcontent-%COMP%]{overflow-y:auto;height:370px}.custom-map-marker[_ngcontent-%COMP%]{position:relative;width:50px;height:50px}.marker-image[_ngcontent-%COMP%]{width:50px;height:50px;background-size:cover;background-position:center;border-radius:50%;border:3px solid #ff0000}.custom-map-marker[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #ff0000}@media screen and (max-width: 991px){.match-parent[_ngcontent-%COMP%]{height:300px!important}.overflow[_ngcontent-%COMP%]{height:auto;margin-bottom:10px}}']})}return n})();const c7=["showModal"],u7=["deleteRecordModal"];function d7(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function h7(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",78)(1,"td")(2,"div",21)(3,"input",79),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",80),t.C$Y()(),t.I0R(5,"td",81)(6,"a",82),t.OEk(7,"#TB01"),t.C$Y()(),t.I0R(8,"td",83)(9,"div",84)(10,"div",85),t.wR5(11,"img",86),t.C$Y(),t.I0R(12,"div",87)(13,"h5",88)(14,"a",89),t.OEk(15),t.C$Y()()()()(),t.I0R(16,"td",90),t.OEk(17),t.wVc(18,"date"),t.C$Y(),t.I0R(19,"td")(20,"ul",91)(21,"li")(22,"a",92),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.removeItem(o.id))}),t.wR5(23,"i",93),t.C$Y()()()()()}if(2&n){const e=i.$implicit;t.CI5("id","p_",e._id,""),t.yG2(3),t._6D("value",e._id),t.OKB("ngModel",e.states),t.yG2(8),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U),t.yG2(4),t.cNF(e.body),t.yG2(2),t.oRS(" ",t.g7$(18,6,e.timestamp,"dd MMM, YYYY")," ")}}function f7(n,i){1&n&&(t.I0R(0,"div",26)(1,"div",94)(2,"span",95),t.OEk(3,"Loading..."),t.C$Y()()())}function p7(n,i){if(1&n){const e=t.KQA();t.I0R(0,"pagination",96),t.iHE("ngModelChange",function(a){t.usT(e);const o=t.GaO();return t.kNx(o.currentPage,a)||(o.currentPage=a),t.CGJ(a)}),t.qCj("pageChanged",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.pageChanged(a))}),t.C$Y()}if(2&n){const e=t.GaO();t.OKB("ngModel",e.currentPage),t.E7m("totalItems",null==e.filteredDepartmentData?null:e.filteredDepartmentData.length)("itemsPerPage",e.currentItemsPerPage)("maxSize",5)}}function m7(n,i){1&n&&(t.I0R(0,"div",97),t.OEk(1,"Department name is required."),t.C$Y())}function g7(n,i){1&n&&(t.I0R(0,"div",97),t.OEk(1," Department name must be at most 45 characters "),t.C$Y())}function v7(n,i){1&n&&(t.I0R(0,"div",97),t.OEk(1,"Status is required."),t.C$Y())}let _7=(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.submitted=!1,this.spinnerStatus=!1,this.saveButtonActive=!0,this.notificationData=[],this.notificationDataList=[],this.filteredDepartmentData=[],this.id=null,this.checkedValGet=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Notification",active:!0}],this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.filterdata(),this.updatePaginatedData()});const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&this.getDepartment(),this.formGroup=this.formBuilder.group({name:["",[j.AQ.maxLength(45),j.AQ.required]],status:["",[j.AQ.required]]})}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e,this.saveButtonActive=!e,this.submitted=e}getDepartment(){this.toggleSpinner(!0),this.api.get("getNotification",this.company_id).subscribe(e=>{e&&e.status?(this.toggleSpinner(!1),this.notificationDataList=e.data||[],this.filterdata()):(this.notificationData=[],this.notificationDataList=[],this.handleError("Unexpected response format"))},e=>{this.toggleSpinner(!1),this.handleError(e.message||"An error occurred while fetching data")})}setStatus(e,r){const d={name:e.name,status:r.target.checked?"active":"inactive"};this.toggleSpinner(!0),this.api.put("department",e.id,d).subscribe(p=>this.handleResponse(p),p=>this.handleError(p))}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,name:this.f.name.value,status:this.f.status.value}}add(e){this.api.post("department",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("department",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}onAdd(){this.resetForm(),this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Add Department",document.getElementById("add-btn").innerHTML="Add",this.id=null}resetForm(){this.formGroup.reset(),this.formGroup.patchValue({name:"",status:""})}editList(e){this.showModal?.show(),document.querySelector(".modal-title").innerHTML="Edit Department",document.getElementById("add-btn").innerHTML="Update",this.id=e.id,this.formGroup.patchValue({name:e.name,status:e.status})}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("notificationDelete",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("notification-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getDepartment(),this.showModal?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onCheckboxChange(e){for(var r=[],o=0;o<this.notificationData.length;o++)1==this.notificationData[o].states&&r.push(this.notificationData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.notificationData=this.notificationData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.notificationData.length;o++)1==this.notificationData[o].states&&r.push(this.notificationData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.notificationData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.notificationData=r}compare(e,r){return e<r?-1:e>r?1:0}filterdata(){let e=this.notificationDataList;this.term&&(e=e.filter(r=>r.name.toLowerCase().includes(this.term.toLowerCase()))),this.filteredDepartmentData=e,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.notificationData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updatePaginatedData(){this.term&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredDepartmentData.length&&(this.currentPage=1),this.notificationData=(0,$n.cloneDeep)(this.filteredDepartmentData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{page:this.currentPage,itemsPerPage:this.currentItemsPerPage,term:this.term},queryParamsHandling:"merge"})}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-notification"]],viewQuery:function(r,a){if(1&r&&(t.CC$(c7,5),t.CC$(u7,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.showModal=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:120,vars:16,consts:[["title","Notification List",3,"breadcrumbItems"],["id","productList"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-centered","align-middle","table-nowrap","mb-0"],[1,"table-active"],[1,"form-check"],["type","checkbox","value","option","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],[1,"sort","cursor-pointer",3,"click"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","mt-3","align-items-center"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],["class","pagination-wrap hstack gap-2 justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize"],["bsModal","",1,"modal","fade",3,"hidden.bs.modal"],["showModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","px-4","pt-4"],["id","exampleModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body","p-4"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],[1,"mb-3"],["for","product-title-input",1,"form-label"],[1,"text-danger"],["type","text","id","product-title-input","formControlName","name","placeholder","Enter Department Name",1,"form-control"],["class","invalid-text"],["for","statuss",1,"form-label"],["formControlName","status","data-choices","","id","statuss",1,"form-control",3,"ngClass"],["value",""],["value","active"],["value","inactive"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-header"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"id",2,"display","none"],["href","javascript:void(0);",1,"fw-medium","link-primary"],[1,"products"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","position-relative"],["alt","",1,"avatar-sm","rounded",3,"src"],[1,"flex-grow-1","ms-2"],[1,"fs-md"],[1,"text-dark"],[1,"category"],[1,"d-flex","gap-2","list-unstyled","mb-0"],[1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"pagination-wrap","hstack","gap-2","justify-content-center",3,"ngModel","totalItems","itemsPerPage","maxSize","ngModelChange","pageChanged"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t.OEk(8," Notification "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,d7,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20," Show All "),t.C$Y()()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"table",19)(24,"thead",20)(25,"tr")(26,"th")(27,"div",21)(28,"input",22),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(29,"label",23),t.C$Y()(),t.I0R(30,"th",24),t.qCj("click",function(){return a.onSort("body")}),t.OEk(31," Notification "),t.C$Y(),t.I0R(32,"th",24),t.qCj("click",function(){return a.onSort("timestamp")}),t.OEk(33," Created At "),t.C$Y(),t.I0R(34,"th"),t.OEk(35,"Action"),t.C$Y()()(),t.I0R(36,"tbody",25),t.c53(37,h7,24,9,"tr",78,t.wJt),t.C$Y(),t.yuY(39,f7,4,0,"div",26),t.C$Y()(),t.I0R(40,"div",27)(41,"div",28)(42,"div",29)(43,"div",30),t.wR5(44,"i",31),t.C$Y()(),t.I0R(45,"h5",32),t.OEk(46,"Sorry! No Result Found"),t.C$Y(),t.I0R(47,"p",33),t.OEk(48),t.C$Y()()(),t.I0R(49,"div",34)(50,"div",35)(51,"div",36),t.OEk(52," Showing "),t.I0R(53,"span",37),t.OEk(54),t.C$Y(),t.OEk(55," of "),t.I0R(56,"span",37),t.OEk(57),t.C$Y(),t.OEk(58," Results "),t.C$Y()(),t.I0R(59,"div",38),t.yuY(60,p7,1,4,"pagination",39),t.C$Y()()()()()()(),t.I0R(61,"div",40,41),t.qCj("hidden.bs.modal",function(){return a.resetForm()}),t.I0R(63,"div",42)(64,"div",43)(65,"div",44)(66,"h5",45),t.OEk(67,"Add Department"),t.C$Y(),t.I0R(68,"button",46),t.qCj("click",function(){t.usT(o);const p=t.Gew(62);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(69,"form",47),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(70,"div",48),t.wR5(71,"div",49),t.I0R(72,"div",50)(73,"label",51),t.OEk(74,"Department Name "),t.I0R(75,"span",52),t.OEk(76,"*"),t.C$Y()(),t.wR5(77,"input",53),t.yuY(78,m7,2,0,"div",54)(79,g7,2,0,"div",54),t.C$Y(),t.I0R(80,"div",50)(81,"label",55),t.OEk(82,"Status "),t.I0R(83,"span",52),t.OEk(84,"*"),t.C$Y()(),t.I0R(85,"select",56)(86,"option",57),t.OEk(87,"Select Status"),t.C$Y(),t.I0R(88,"option",58),t.OEk(89,"Active"),t.C$Y(),t.I0R(90,"option",59),t.OEk(91,"Inactive"),t.C$Y()(),t.yuY(92,v7,2,0,"div",54),t.C$Y()(),t.I0R(93,"div",60)(94,"div",61)(95,"button",62),t.qCj("click",function(){t.usT(o);const p=t.Gew(62);return t.CGJ(p.hide())}),t.wR5(96,"i",63),t.OEk(97," Close "),t.C$Y(),t.I0R(98,"button",64),t.OEk(99," Add "),t.C$Y()()()()()()(),t.I0R(100,"div",65,66)(102,"div",42)(103,"div",43)(104,"div",67)(105,"button",68),t.qCj("click",function(){t.usT(o);const p=t.Gew(101);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(106,"div",69)(107,"div",70)(108,"div",52),t.wR5(109,"i",71),t.C$Y(),t.I0R(110,"div",72)(111,"h3",73),t.OEk(112,"Are you sure ?"),t.C$Y(),t.I0R(113,"p",74),t.OEk(114," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(115,"div",75)(116,"button",76),t.qCj("click",function(){t.usT(o);const p=t.Gew(101);return t.CGJ(p.hide())}),t.OEk(117," Close "),t.C$Y(),t.I0R(118,"button",77),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(119," Yes, Delete It! "),t.C$Y()()()()()()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.notificationData?null:a.notificationData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.notificationDataList?null:a.notificationDataList.length),t.yG2(9),t.OKB("ngModel",a.masterSelected),t.yG2(9),t.oho(a.notificationData),t.yG2(2),t.C0Y(39,a.spinnerStatus?39:-1),t.yG2(9),t.oRS(" We've searched ",a.notificationDataList.length," Notification We did not find any Notification for you search. "),t.yG2(6),t.cNF(null==a.notificationData?null:a.notificationData.length),t.yG2(3),t.cNF(null==a.filteredDepartmentData?null:a.filteredDepartmentData.length),t.yG2(3),t.C0Y(60,null!=a.filteredDepartmentData&&a.filteredDepartmentData.length?60:-1),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(9),t.C0Y(78,a.f.name&&a.f.name.hasError("required")&&a.f.name.touched?78:-1),t.yG2(),t.C0Y(79,a.f.name&&a.f.name.hasError("maxlength")&&a.f.name.touched?79:-1),t.yG2(6),t.E7m("ngClass",a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?"is-invalid":""),t.yG2(7),t.C0Y(92,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?92:-1))},dependencies:[Me.QF,Me.ay,We.O,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j._G,j.uW,j.Wo,nt.im,nf.uK,Me.y]})}return n})();const y7=["addTickets"],x7=["deleteRecordModal"];function b7(n,i){if(1&n&&(t.I0R(0,"option",16),t.OEk(1),t.C$Y()),2&n){const e=i.$implicit;t.E7m("value",e),t.yG2(),t.oRS(" ",e," ")}}function w7(n,i){if(1&n&&(t.I0R(0,"span",137),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS("",e.totalFilterCount," ")}}function C7(n,i){if(1&n&&(t.I0R(0,"a",158),t.wR5(1,"img",159),t.C$Y()),2&n){const e=i.$implicit;t._6D("tooltip",e.name),t.yG2(),t.E7m("src",e.image?e.image:"assets/images/users/avatar-1.jpg",t.K6U)}}const E7=(n,i,e)=>({"bg-danger":n,"bg-info":i,"bg-success":e}),k7=(n,i,e,r)=>({"bg-primary-subtle text-primary":n,"bg-warning-subtle text-warning":i,"bg-info-subtle text-info":e,"bg-danger-subtle text-danger":r});function T7(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tr",138)(1,"td")(2,"div",36)(3,"input",139),t.iHE("ngModelChange",function(a){const d=t.usT(e).$implicit;return t.kNx(d.states,a)||(d.states=a),t.CGJ(a)}),t.qCj("change",function(a){t.usT(e);const o=t.GaO();return t.CGJ(o.onCheckboxChange(a))}),t.C$Y(),t.wR5(4,"label",140),t.C$Y()(),t.I0R(5,"td",141)(6,"a",142),t.OEk(7),t.C$Y()(),t.I0R(8,"td",143)(9,"div",144),t.c53(10,C7,2,2,"a",160,t.wJt),t.C$Y()(),t.I0R(12,"td",145),t.OEk(13),t.C$Y(),t.I0R(14,"td",146),t.OEk(15),t.wVc(16,"date"),t.C$Y(),t.I0R(17,"td",147),t.OEk(18),t.wVc(19,"date"),t.C$Y(),t.I0R(20,"td",148)(21,"span",149),t.OEk(22),t.C$Y()(),t.I0R(23,"td",150)(24,"span",149),t.OEk(25),t.C$Y()(),t.I0R(26,"td")(27,"ul",151)(28,"li")(29,"a",152),t.wR5(30,"i",153),t.C$Y()(),t.I0R(31,"li")(32,"a",154),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.editList(o))}),t.wR5(33,"i",155),t.C$Y()(),t.I0R(34,"li")(35,"a",156),t.qCj("click",function(){const o=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.removeItem(o.id))}),t.wR5(36,"i",157),t.C$Y()()()()()}if(2&n){const e=i.$implicit;t.CI5("id","l_",e.id,""),t.yG2(3),t._6D("value",e.id),t.OKB("ngModel",e.states),t.yG2(4),t.oRS("#",e.task_id,""),t.yG2(3),t.oho(e.employeeDetails),t.yG2(3),t.cNF(e.task_title),t.yG2(2),t.oRS(" ",t.g7$(16,11,e.start_date,"dd MMM, YYYY")," "),t.yG2(3),t.oRS(" ",t.g7$(19,14,e.end_date,"dd MMM, YYYY")," "),t.yG2(3),t.E7m("ngClass",t.uAc(17,E7,"High"===e.priority,"Medium"===e.priority,"Low"===e.priority)),t.yG2(),t.cNF(e.priority),t.yG2(2),t.E7m("ngClass",t.WuN(21,k7,"Open"===e.status,"Pending"===e.status,"New"===e.status,"Close"===e.status)),t.yG2(),t.cNF(e.status)}}function S7(n,i){1&n&&(t.I0R(0,"div",48)(1,"div",161)(2,"span",162),t.OEk(3,"Loading..."),t.C$Y()()())}function D7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Task Title is required."),t.C$Y())}function A7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1," Task Title must be at most 45 characters "),t.C$Y())}function I7(n,i){1&n&&t.OEk(0),2&n&&t.oRS(" ",i.item.department_name||"Unnamed group"," ")}function M7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1," At least one employee must be assigned. "),t.C$Y())}function R7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Task description is required."),t.C$Y())}function O7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Start date is required."),t.C$Y())}function L7(n,i){1&n&&(t.I0R(0,"div")(1,"p",163),t.OEk(2," Start date cannot be greater than end date. "),t.C$Y()())}function P7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"End date is required."),t.C$Y())}function F7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Priority is required."),t.C$Y())}function B7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Frequency is required."),t.C$Y())}function N7(n,i){1&n&&(t.I0R(0,"div",163),t.OEk(1,"Status is required."),t.C$Y())}const v2=()=>({standalone:!0}),z7=[{path:"company",component:Wt},{path:"add-company",component:pr},{path:"edit-company/:id",component:pr},{path:"logs",component:dY},{path:"dashboard",component:l7},{path:"employee",component:bO},{path:"add-employee",component:ek},{path:"edit-employee/:id",component:ek},{path:"employee-detail/:id",component:UL},{path:"attendance-list",component:rP},{path:"department-list",component:gP},{path:"designation-list",component:SP},{path:"attendance-calender/:id/:company_id",component:Lz},{path:"attendance-monthly",component:i8},{path:"holidays",component:m8},{path:"leave-types",component:R8},{path:"leave-requests",component:J8},{path:"leave-detail/:id/:emp_id",component:lY},{path:"leave-record",component:CY},{path:"employe-leave-record/:emp_id",component:VY},{path:"notification",component:_7},{path:"assign-task",component:(()=>{class n{constructor(e,r,a,o,d){this.api=e,this.toastService=r,this.formBuilder=a,this.router=o,this.route=d,this.taskDataList=[],this.taskData=[],this.spinnerStatus=!1,this.employeeDataList=[],this.currentPage=1,this.currentItemsPerPage=10,this.itemsPerPageOptions=[10,20,30,50],this.checkedValGet=[],this.id=null,this.selectedEmp=[],this.selectedStatus="All",this.selectedFrequency="All",this.selectedPriority="All",this.filterCounts={termCount:0,statusCount:0,frequencyCount:0,priorityCount:0,empCount:0,selectedstartDateCount:0,selectedendDateCount:0},this.direction="asc"}ngOnInit(){this.breadCrumbItems=[{label:"Employee Management"},{label:"Assigned Task",active:!0}];const e=localStorage.getItem("currentUser");if(e){const r=JSON.parse(e);this.company_id=r.id}this.company_id&&(this.getAssignedTask(),this.getemployeeData()),this.formGroup=this.formBuilder.group({task_title:["",[j.AQ.maxLength(45),j.AQ.required]],emp_id:["",[j.AQ.required]],task_description:[""],start_date:["",[j.AQ.required]],end_date:["",[j.AQ.required]],priority:["",[j.AQ.required]],frequency:["",[j.AQ.required]],status:["",[j.AQ.required]]},{validator:this.dateRangeValidator()}),this.route.queryParams.subscribe(r=>{this.currentPage=+r.page||1,this.currentItemsPerPage=+r.itemsPerPage||10,this.term=r.term||"",this.selectedStatus=r.selectedStatus||null,this.selectedFrequency=r.selectedFrequency||null,this.selectedPriority=r.selectedPriority||null,this.selectedEmp=r.selectedEmp?r.selectedEmp.split(","):[],r.date&&(this.selectedDate=new Date(r.date)),r.enddate&&(this.selectedEndDate=new Date(r.enddate)),this.filterdata(),this.updatePaginatedData()})}dateRangeValidator(){return e=>{const r=e.get("start_date")?.value,a=e.get("end_date")?.value;return r&&a&&new Date(r)>new Date(a)?{dateRange:!0}:null}}get f(){return this.formGroup.controls}toggleSpinner(e){this.spinnerStatus=e}getemployeeData(){this.toggleSpinner(!0),this.api.getwithoutid(`employees?company_id=${this.company_id}`).subscribe(r=>{this.toggleSpinner(!1),r&&r.status?this.employeeDataList=r.data||[]:(this.employeeDataList=[],this.toggleSpinner(!1))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}getAssignedTask(){this.toggleSpinner(!0),this.api.getwithoutid(`assignTask?company_id=${this.company_id}`).subscribe(r=>{r&&r.status?(this.toggleSpinner(!1),this.taskDataList=r.data||[],this.filterdata()):(this.taskData=[],this.taskDataList=[],this.handleError("Unexpected response format"))},r=>{this.toggleSpinner(!1),this.handleError(r.message||"An error occurred while fetching data")})}onSubmit(){if(this.formGroup.valid){this.toggleSpinner(!0);const e=this.createFormData();this.id?this.update(e):this.add(e)}else this.formGroup.markAllAsTouched()}createFormData(){return{company_id:this.company_id,emp_id:this.f.emp_id.value.join(","),task_title:this.f.task_title.value,task_description:this.f.task_description.value,start_date:this.f.start_date.value,end_date:this.f.end_date.value,priority:this.f.priority.value,frequency:this.f.frequency.value,status:this.f.status.value}}add(e){this.api.post("assignTask",e).subscribe(r=>this.handleResponse(r),r=>this.handleError(r))}update(e){this.api.put("assignTask",this.id,e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}removeItem(e){this.deleteId=e,this.deleteRecordModal?.show()}deleteData(e){this.toggleSpinner(!0),this.deleteRecordModal?.hide(),e&&this.api.deleteWithId("assignTask",e).subscribe(a=>this.handleResponse(a),a=>this.handleError(a));const r=this.checkedValGet;r&&r.length>0&&this.api.post("assignTask-delete-multiple",{ids:r}).subscribe(a=>this.handleResponse(a),a=>this.handleError(a))}handleResponse(e){this.toggleSpinner(!1),!0===e.status?(this.formGroup.reset(),this.toastService.success("Data Saved Successfully!!"),this.getAssignedTask(),this.addTickets?.hide()):this.toastService.error(e.message)}handleError(e){this.toggleSpinner(!1)}onAdd(){this.formGroup.reset(),this.addTickets?.show(),document.querySelector(".modal-title").innerHTML="Assign Task",document.getElementById("add-btn").innerHTML="Add Task",this.id=null}editList(e){this.addTickets?.show(),document.querySelector(".modal-title").innerHTML="Edit Task",document.getElementById("add-btn").innerHTML="Update",this.id=e.id;const o=e.emp_id.split(",").map(d=>parseInt(d.trim()));this.formGroup.patchValue({task_title:e.task_title,emp_id:o,task_description:e.task_description,start_date:e.start_date,end_date:e.end_date,priority:e.priority,frequency:e.frequency,status:e.status})}filterdata(){let e=this.taskDataList;if(null==this.selectedStatus&&(this.selectedStatus=""),null==this.selectedFrequency&&(this.selectedFrequency=""),null==this.selectedPriority&&(this.selectedPriority=""),this.filterCounts.termCount=0,this.filterCounts.frequencyCount=0,this.filterCounts.priorityCount=0,this.filterCounts.statusCount=0,this.filterCounts.empCount=0,this.filterCounts.selectedstartDateCount=0,this.filterCounts.selectedendDateCount=0,this.term&&(e=e.filter(r=>r.task_id.toLowerCase().includes(this.term.toLowerCase())||r.task_title.toLowerCase().includes(this.term.toLowerCase())||r.priority.toLowerCase().includes(this.term.toLowerCase())||r.frequency.toLowerCase().includes(this.term.toLowerCase())||r.status.toLowerCase().includes(this.term.toLowerCase())),this.filterCounts.termCount=1),this.selectedStatus&&(e=e.filter(r=>r.status===this.selectedStatus),this.filterCounts.statusCount=1),this.selectedFrequency&&(e=e.filter(r=>r.frequency===this.selectedFrequency)),this.selectedPriority&&(e=e.filter(r=>r.priority===this.selectedPriority)),this.selectedDate){let r=this.formatDateWithoutTime(new Date(this.selectedDate));e=e.filter(a=>this.formatDateWithoutTime(new Date(a.start_date))===r),this.filterCounts.selectedstartDateCount=1}if(this.selectedEndDate){let r=this.formatDateWithoutTime(new Date(this.selectedEndDate));e=e.filter(a=>this.formatDateWithoutTime(new Date(a.end_date))===r),this.filterCounts.selectedendDateCount=1}this.filteredTaskData=e,(this.term||this.selectedFrequency||this.selectedPriority||this.selectedEmp.length||this.selectedStatus||this.selectedDate||this.selectedEndDate)&&0===this.filteredTaskData.length&&(this.currentPage=1),this.updatePaginatedData()}formatDateWithoutTime(e){return`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}updatePaginatedData(){(this.term||this.selectedFrequency||this.selectedPriority||this.selectedEmp.length||this.selectedStatus||this.selectedDate||this.selectedEndDate)&&(this.currentPage-1)*this.currentItemsPerPage>=this.filteredTaskData.length&&(this.currentPage=1),this.taskData=(0,$n.cloneDeep)(this.filteredTaskData.slice((this.currentPage-1)*this.currentItemsPerPage,this.currentPage*this.currentItemsPerPage)),this.updateNoResultDisplay(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:this.term,page:this.currentPage,itemsPerPage:this.currentItemsPerPage,selectedFrequency:this.selectedFrequency,selectedPriority:this.selectedPriority,selectedEmp:this.selectedEmp.join(","),date:this.selectedDate?this.formatDateWithoutTime(this.selectedDate):"",enddate:this.selectedEndDate?this.formatDateWithoutTime(this.selectedEndDate):""},queryParamsHandling:"merge"})}onCheckboxChange(e){for(var r=[],o=0;o<this.taskData.length;o++)1==this.taskData[o].states&&r.push(this.taskData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}checkUncheckAll(e){this.taskData=this.taskData.map(d=>({...d,states:e.target.checked}));for(var r=[],o=0;o<this.taskData.length;o++)1==this.taskData[o].states&&r.push(this.taskData[o].id);this.checkedValGet=r,r.length>0?document.getElementById("remove-actions")?.classList.remove("d-none"):document.getElementById("remove-actions")?.classList.add("d-none")}onSort(e){this.direction="asc"==this.direction?"desc":"asc";const r=[...this.taskData];r.sort((a,o)=>{const d=this.compare(a[e],o[e]);return"asc"===this.direction?d:-d}),this.taskData=r}compare(e,r){return e<r?-1:e>r?1:0}onItemsPerPageChange(){this.currentPage=1,this.updatePaginatedData()}pageChanged(e){this.currentPage=e.page,this.updatePaginatedData()}updateNoResultDisplay(){const e=document.querySelector(".noresult"),r=document.getElementById("pagination-element");0===this.taskData.length?(e.style.display="block",r.classList.add("d-none")):(e.style.display="none",r.classList.remove("d-none"))}openEnd(){document.getElementById("courseFilters")?.classList.add("show"),document.querySelector(".backdrop3")?.classList.add("show")}closeoffcanvas(){document.getElementById("courseFilters")?.classList.remove("show"),document.querySelector(".backdrop3")?.classList.remove("show")}get totalFilterCount(){return this.filterCounts.termCount+this.filterCounts.statusCount+this.filterCounts.frequencyCount+this.filterCounts.priorityCount+this.filterCounts.empCount+this.filterCounts.selectedstartDateCount+this.filterCounts.selectedendDateCount}reset(){this.term="",this.selectedStatus="",this.selectedFrequency="",this.selectedPriority="",this.taskData=this.taskDataList,this.selectedEmp=[],this.selectedDate="",this.selectedEndDate="",this.filterdata(),this.router.navigate([],{relativeTo:this.route,queryParams:{term:null,selectedStatus:null,selectedFrequency:null,selectedPriority:null,selectedEmp:null,page:1,itemsPerPage:this.currentItemsPerPage,date:this.selectedDate,enddate:this.selectedEndDate},queryParamsHandling:"merge"}),this.getAssignedTask()}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(He.W),t.GI1(Be.SA),t.GI1(j.im),t.GI1(T.E5),t.GI1(T.gV))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["app-task-list"]],viewQuery:function(r,a){if(1&r&&(t.CC$(y7,5),t.CC$(x7,5)),2&r){let o;t.wto(o=t.Gqi())&&(a.addTickets=o.first),t.wto(o=t.Gqi())&&(a.deleteRecordModal=o.first)}},decls:290,vars:47,consts:[["title","Task List",3,"breadcrumbItems"],["id","ticketsList",1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"row","align-items-center","g-2"],[1,"col-lg-3","me-auto"],[1,"card-title","mb-0"],[1,"badge","bg-dark-subtle","text-dark","ms-1"],[1,"badge","text-dark","ms-1"],[1,"d-flex","me-3","mt-1","justify-content-center","align-items-center"],[1,"text-muted","text-center","text-sm-start","me-2"],[1,""],[1,"input-group","input-group-sm"],["id","itemsPerPage",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-lg-2","col-sm-4"],[1,"search-box"],["type","text","placeholder","Search for Task ID, title, Priority, Status or something...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],[1,"ri-search-line","search-icon"],[1,"col-sm-auto"],[1,"hstack","gap-2"],["id","remove-actions",1,"btn","btn-subtle-danger","d-none",3,"click"],[1,"ri-delete-bin-2-line"],["href","javascript:void(0);",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-plus-circle","align-baseline","me-1"],[1,"col-lg-auto"],[1,"hstack","flex-wrap","gap-2"],["type","button",1,"btn","btn-info","me-1",3,"click"],[1,"bi","bi-funnel","align-baseline","me-1"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"],[1,"card-body","mt-3"],[1,"table-responsive","table-card"],[1,"table","table-centered","align-middle","table-custom-effect","table-nowrap","mb-0"],[1,"table-light"],[1,"form-check"],["type","checkbox","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange","change"],["for","checkAll",1,"form-check-label"],["scope","col","ticketsortable","id",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","assignedto",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","task_title",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","start_date",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","end_date",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","priority",1,"sort","cursor-pointer",3,"click"],["scope","col","ticketsortable","status",1,"sort","cursor-pointer",3,"click"],["scope","col"],[1,"list","form-check-all"],["id","elmLoader"],[1,"noresult",2,"display","none"],[1,"text-center","py-4"],[1,"avatar-md","mx-auto","mb-4"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-4xl"],[1,"bi","bi-search"],[1,"mt-2"],[1,"text-muted","mb-0"],["id","pagination-element",1,"row","align-items-center","mt-4","pt-3"],[1,"col-sm"],[1,"text-muted","text-center","text-sm-start"],[1,"fw-semibold"],[1,"col-sm-auto","mt-3","mt-sm-0"],[1,"pagination-wrap","hstack","justify-content-center","gap-2",3,"totalItems","itemsPerPage","pageChanged"],["bsModal","","id","addTickets",1,"modal","fade"],["addTickets","bs-modal"],[1,"modal-dialog"],[1,"modal-content","border-0"],[1,"modal-header"],["id","addTicketModalLabel",1,"modal-title"],["type","button",1,"btn-close",3,"click"],["novalidate","","autocomplete","off",1,"tablelist-form",3,"formGroup","ngSubmit"],[1,"modal-body"],["id","alert-error-msg",1,"d-none","alert","alert-danger","py-2"],["type","hidden","id","id-field"],[1,"row"],[1,"mb-3"],["for","client-name-input",1,"form-label"],[1,"text-danger"],["type","text","id","client-name-input","formControlName","task_title","placeholder","Enter Task Title ","required","",1,"form-control"],["class","invalid-text"],["bindLabel","name","bindValue","id","groupBy","department_name","formControlName","emp_id","placeholder","Select Employee(s)",3,"items","multiple"],["ng-optgroup-tmp",""],["for","ticket-title-input",1,"form-label"],["type","text","id","ticket-title-input","formControlName","task_description","placeholder","Task description","required","",1,"form-control"],[1,"col-lg-6"],["for","create-date-input",1,"form-label"],["type","text","mwlFlatpickr","","dateFormat","d M,Y","altFormat","d M,Y","formControlName","start_date","id","create-date-input","placeholder","Create date","required","",1,"form-control",3,"altInput","convertModelValue"],[4,"ngIf"],["for","due-date-input",1,"form-label"],["type","text","mwlFlatpickr","","dateFormat","d M,Y","altFormat","d M,Y","formControlName","end_date","id","due-date-input","placeholder","Due date","required","",1,"form-control",3,"altInput","convertModelValue"],["for","priority-input",1,"form-label"],["id","priority-input","formControlName","priority","data-choices","","data-choices-search-false","",1,"form-select"],["value","High"],["value","Medium"],["value","Low"],["for","frequency",1,"form-label"],["id","frequency","formControlName","frequency","data-choices","","data-choices-search-false","",1,"form-select"],["value",""],["value","Daliy"],["value","Weekly"],["value","Monthly"],["for","status-input",1,"form-label"],["id","status-input","formControlName","status","data-choices","","data-choices-search-false","",1,"form-select"],["value","Open"],["value","New"],["value","Pending"],["value","Close"],[1,"modal-footer"],[1,"hstack","gap-2","justify-content-end"],["type","button",1,"btn","btn-ghost-danger",3,"click"],[1,"bi","bi-x-lg","align-baseline","me-1"],["type","submit","id","add-btn",1,"btn","btn-primary"],["id","deleteRecordModal","bsModal","",1,"modal","fade","zoomIn"],["deleteRecordModal","bs-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],["type","button","id","deleteRecord-close",1,"btn-close",3,"click"],[1,"modal-body","p-md-5"],[1,"text-center"],[1,"bi","bi-trash","display-4"],[1,"mt-4"],[1,"mb-2"],[1,"text-muted","fs-lg","mx-3","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button",1,"btn","w-sm","btn-light","btn-hover",3,"click"],["type","button","id","delete-record",1,"btn","w-sm","btn-danger","btn-hover",3,"click"],["id","courseFilters",1,"custom-offcanvas"],[1,"offcanvas-header","border-bottom","p-3"],["id","courseFiltersLabel",1,"offcanvas-title"],[1,"offcanvas-body"],[1,"text-muted","fw-medium","text-uppercase","mb-3"],["type","text","placeholder","  Search Task title, Status, Priority etc...",1,"form-control","search",3,"ngModel","ngModelChange","keyup"],["type","text","mwlFlatpickr","","dateFormat","d M,Y","altFormat","d M,Y","id","Start-date-filter","placeholder","Start date",1,"form-control",3,"altInput","convertModelValue","ngModel","ngModelChange"],["type","text","mwlFlatpickr","","dateFormat","d M,Y","altFormat","d M,Y","id","End-date-filter","placeholder","End date",1,"form-control",3,"altInput","convertModelValue","ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],[1,"offcanvas-header","htsack","gap-2","border-top","p-3"],[1,"btn","btn-subtle-danger","w-100",3,"click"],["id","backdrop",1,"offcanvas-backdrop","fade","backdrop3",3,"click"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-success"],[3,"id"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"tickets_id"],[1,"fw-medium","link-primary"],[1,"assign"],[1,"avatar-group","flex-nowrap"],[1,"ticket_title"],[1,"create_date"],[1,"due_date"],[1,"priority"],[1,"badge",3,"ngClass"],[1,"status"],[1,"d-flex","gap-2","list-unstyled","mb-0"],["routerLink","/tickets/overview",1,"btn","btn-subtle-primary","btn-icon","btn-sm"],[1,"ph-eye"],["href","javascript:void(0);",1,"btn","btn-subtle-secondary","btn-icon","btn-sm","edit-item-btn",3,"click"],[1,"ph-pencil"],["href","javascript:void(0);",1,"btn","btn-subtle-danger","btn-icon","btn-sm","remove-item-btn",3,"click"],[1,"ph-trash"],[1,"avatar-group-item",3,"tooltip"],["alt","",1,"avatar-xxs","rounded-circle",3,"src"],["class","avatar-group-item",3,"tooltip"],["role","status",1,"spinner-border","text-primary","avatar-sm"],[1,"visually-hidden"],[1,"invalid-text"]],template:function(r,a){if(1&r){const o=t.KQA();t.wR5(0,"app-breadcrumbs",0),t.I0R(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6",7),t.OEk(8," Task List "),t.I0R(9,"span",8),t.OEk(10),t.C$Y(),t.I0R(11,"span",9)(12,"div",10)(13,"div",11),t.OEk(14," Items per page : "),t.C$Y(),t.I0R(15,"div",12)(16,"div",13)(17,"select",14),t.iHE("ngModelChange",function(p){return t.kNx(a.currentItemsPerPage,p)||(a.currentItemsPerPage=p),p}),t.qCj("change",function(){return a.onItemsPerPageChange()}),t.yuY(18,b7,2,2,"option",15),t.I0R(19,"option",16),t.OEk(20,"Show All"),t.C$Y()()()()()()()(),t.I0R(21,"div",17)(22,"div",18)(23,"input",19),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(24,"i",20),t.C$Y()(),t.I0R(25,"div",21)(26,"div",22)(27,"button",23),t.qCj("click",function(){t.usT(o);const p=t.Gew(201);return t.CGJ(p.show())}),t.wR5(28,"i",24),t.C$Y(),t.I0R(29,"a",25),t.qCj("click",function(){return a.onAdd()}),t.wR5(30,"i",26),t.OEk(31," Assign Task"),t.C$Y()()(),t.I0R(32,"div",27)(33,"div",28)(34,"div")(35,"button",29),t.qCj("click",function(){return a.openEnd()}),t.wR5(36,"i",30),t.OEk(37," Filter "),t.yuY(38,w7,2,1,"span",31),t.C$Y()()()()()(),t.I0R(39,"div",32)(40,"div",33)(41,"table",34)(42,"thead",35)(43,"tr")(44,"th")(45,"div",36)(46,"input",37),t.iHE("ngModelChange",function(p){return t.kNx(a.masterSelected,p)||(a.masterSelected=p),p}),t.qCj("change",function(p){return a.checkUncheckAll(p)}),t.C$Y(),t.wR5(47,"label",38),t.C$Y()(),t.I0R(48,"th",39),t.qCj("click",function(){return a.onSort("id")}),t.OEk(49," ID "),t.C$Y(),t.I0R(50,"th",40),t.qCj("click",function(){return a.onSort("assignedto")}),t.OEk(51," Assigned To "),t.C$Y(),t.I0R(52,"th",41),t.qCj("click",function(){return a.onSort("task_title")}),t.OEk(53," Task Title "),t.C$Y(),t.I0R(54,"th",42),t.qCj("click",function(){return a.onSort("start_date")}),t.OEk(55," Start Date "),t.C$Y(),t.I0R(56,"th",43),t.qCj("click",function(){return a.onSort("end_date")}),t.OEk(57," End Date "),t.C$Y(),t.I0R(58,"th",44),t.qCj("click",function(){return a.onSort("priority")}),t.OEk(59," Priority "),t.C$Y(),t.I0R(60,"th",45),t.qCj("click",function(){return a.onSort("status")}),t.OEk(61," Status "),t.C$Y(),t.I0R(62,"th",46),t.OEk(63,"Action"),t.C$Y()()(),t.I0R(64,"tbody",47),t.c53(65,T7,37,26,"tr",138,t.wJt),t.C$Y()(),t.yuY(67,S7,4,0,"div",48),t.I0R(68,"div",49)(69,"div",50)(70,"div",51)(71,"div",52),t.wR5(72,"i",53),t.C$Y()(),t.I0R(73,"h5",54),t.OEk(74,"Sorry! No Result Found"),t.C$Y(),t.I0R(75,"p",55),t.OEk(76),t.C$Y()()()(),t.I0R(77,"div",56)(78,"div",57)(79,"div",58),t.OEk(80," Showing "),t.I0R(81,"span",59),t.OEk(82),t.C$Y(),t.OEk(83," of "),t.I0R(84,"span",59),t.OEk(85),t.C$Y(),t.OEk(86," Results "),t.C$Y()(),t.I0R(87,"div",60)(88,"pagination",61),t.qCj("pageChanged",function(p){return a.pageChanged(p)}),t.C$Y()()()()()()(),t.I0R(89,"div",62,63)(91,"div",64)(92,"div",65)(93,"div",66)(94,"h5",67),t.OEk(95,"Assign Task"),t.C$Y(),t.I0R(96,"button",68),t.qCj("click",function(){t.usT(o);const p=t.Gew(90);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(97,"form",69),t.qCj("ngSubmit",function(){return a.onSubmit()}),t.I0R(98,"div",70),t.wR5(99,"div",71)(100,"input",72),t.I0R(101,"div",73)(102,"div",2)(103,"div",74)(104,"label",75),t.OEk(105,"Task Title"),t.I0R(106,"span",76),t.OEk(107,"*"),t.C$Y()(),t.wR5(108,"input",77),t.yuY(109,D7,2,0,"div",78)(110,A7,2,0,"div",78),t.C$Y()(),t.I0R(111,"div",2)(112,"div",74)(113,"label",75),t.OEk(114,"Assigned To"),t.I0R(115,"span",76),t.OEk(116,"*"),t.C$Y()(),t.I0R(117,"ng-select",79),t.yuY(118,I7,1,1,"ng-template",80),t.C$Y(),t.yuY(119,M7,2,0,"div",78),t.C$Y()(),t.I0R(120,"div",2)(121,"div",74)(122,"label",81),t.OEk(123,"Task description"),t.I0R(124,"span",76),t.OEk(125,"*"),t.C$Y()(),t.wR5(126,"input",82),t.yuY(127,R7,2,0,"div",78),t.C$Y()(),t.I0R(128,"div",83)(129,"div",74)(130,"label",84),t.OEk(131,"Start Date"),t.I0R(132,"span",76),t.OEk(133,"*"),t.C$Y()(),t.wR5(134,"input",85),t.yuY(135,O7,2,0,"div",78)(136,L7,3,0,"div",86),t.C$Y()(),t.I0R(137,"div",83)(138,"div",74)(139,"label",87),t.OEk(140,"Due Date"),t.I0R(141,"span",76),t.OEk(142,"*"),t.C$Y()(),t.wR5(143,"input",88),t.yuY(144,P7,2,0,"div",78),t.C$Y()(),t.I0R(145,"div",2)(146,"div",74)(147,"label",89),t.OEk(148,"Priority"),t.I0R(149,"span",76),t.OEk(150,"*"),t.C$Y()(),t.I0R(151,"select",90)(152,"option",91),t.OEk(153,"High"),t.C$Y(),t.I0R(154,"option",92),t.OEk(155,"Medium"),t.C$Y(),t.I0R(156,"option",93),t.OEk(157,"Low"),t.C$Y()(),t.yuY(158,F7,2,0,"div",78),t.C$Y()(),t.I0R(159,"div",2)(160,"div",74)(161,"label",94),t.OEk(162,"Frequency"),t.I0R(163,"span",76),t.OEk(164,"*"),t.C$Y()(),t.I0R(165,"select",95)(166,"option",96),t.OEk(167,"Select frequency"),t.C$Y(),t.I0R(168,"option",97),t.OEk(169,"Daliy"),t.C$Y(),t.I0R(170,"option",98),t.OEk(171,"Weekly"),t.C$Y(),t.I0R(172,"option",99),t.OEk(173,"Monthly"),t.C$Y()(),t.yuY(174,B7,2,0,"div",78),t.C$Y()(),t.I0R(175,"div",2)(176,"div",74)(177,"label",100),t.OEk(178,"Status"),t.I0R(179,"span",76),t.OEk(180,"*"),t.C$Y()(),t.I0R(181,"select",101)(182,"option",96),t.OEk(183,"Select Status"),t.C$Y(),t.I0R(184,"option",102),t.OEk(185,"Open"),t.C$Y(),t.I0R(186,"option",103),t.OEk(187,"New"),t.C$Y(),t.I0R(188,"option",104),t.OEk(189,"Pending"),t.C$Y(),t.I0R(190,"option",105),t.OEk(191,"Close"),t.C$Y()(),t.yuY(192,N7,2,0,"div",78),t.C$Y()()()(),t.I0R(193,"div",106)(194,"div",107)(195,"button",108),t.qCj("click",function(){t.usT(o);const p=t.Gew(90);return t.CGJ(p.hide())}),t.wR5(196,"i",109),t.OEk(197," Close "),t.C$Y(),t.I0R(198,"button",110),t.OEk(199," Add Ticket "),t.C$Y()()()()()()(),t.I0R(200,"div",111,112)(202,"div",113)(203,"div",114)(204,"div",66)(205,"button",115),t.qCj("click",function(){t.usT(o);const p=t.Gew(201);return t.CGJ(p.hide())}),t.C$Y()(),t.I0R(206,"div",116)(207,"div",117)(208,"div",76),t.wR5(209,"i",118),t.C$Y(),t.I0R(210,"div",119)(211,"h3",120),t.OEk(212,"Are you sure ?"),t.C$Y(),t.I0R(213,"p",121),t.OEk(214," Are you sure you want to remove this record ? "),t.C$Y()()(),t.I0R(215,"div",122)(216,"button",123),t.qCj("click",function(){t.usT(o);const p=t.Gew(201);return t.CGJ(p.hide())}),t.OEk(217," Close "),t.C$Y(),t.I0R(218,"button",124),t.qCj("click",function(){return a.deleteData(a.deleteId)}),t.OEk(219," Yes, Delete It! "),t.C$Y()()()()()(),t.I0R(220,"div",125)(221,"div",126)(222,"h5",127),t.OEk(223,"Task Filters"),t.C$Y(),t.I0R(224,"button",68),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()(),t.I0R(225,"div",128)(226,"div",73)(227,"div",2)(228,"div",74)(229,"p",129),t.OEk(230," Search Task ID, title, Status, Priority etc... "),t.C$Y(),t.I0R(231,"div",18)(232,"input",130),t.iHE("ngModelChange",function(p){return t.kNx(a.term,p)||(a.term=p),p}),t.qCj("keyup",function(){return a.filterdata()}),t.C$Y(),t.wR5(233,"i",20),t.C$Y()()(),t.I0R(234,"div",2)(235,"div",74)(236,"p",129),t.OEk(237," Select Start Date "),t.C$Y(),t.I0R(238,"input",131),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedDate,p)||(a.selectedDate=p),p}),t.qCj("ngModelChange",function(){return a.filterdata()}),t.C$Y()()(),t.I0R(239,"div",2)(240,"div",74)(241,"p",129),t.OEk(242," Select End Date "),t.C$Y(),t.I0R(243,"input",132),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedEndDate,p)||(a.selectedEndDate=p),p}),t.qCj("ngModelChange",function(){return a.filterdata()}),t.C$Y()()(),t.I0R(244,"div",2)(245,"div",74)(246,"p",129),t.OEk(247,"Status"),t.C$Y(),t.I0R(248,"select",133),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedStatus,p)||(a.selectedStatus=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(249,"option",96),t.OEk(250,"All"),t.C$Y(),t.I0R(251,"option",102),t.OEk(252,"Open"),t.C$Y(),t.I0R(253,"option",103),t.OEk(254,"New"),t.C$Y(),t.I0R(255,"option",104),t.OEk(256,"Pending"),t.C$Y(),t.I0R(257,"option",105),t.OEk(258,"Close"),t.C$Y()()()(),t.I0R(259,"div",2)(260,"div",74)(261,"p",129),t.OEk(262,"Frequency"),t.C$Y(),t.I0R(263,"select",133),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedFrequency,p)||(a.selectedFrequency=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(264,"option",96),t.OEk(265,"All"),t.C$Y(),t.I0R(266,"option",97),t.OEk(267,"Daliy"),t.C$Y(),t.I0R(268,"option",98),t.OEk(269,"Weekly"),t.C$Y(),t.I0R(270,"option",99),t.OEk(271,"Monthly"),t.C$Y()()()(),t.I0R(272,"div",2)(273,"div",74)(274,"p",129),t.OEk(275,"Priority"),t.C$Y(),t.I0R(276,"select",133),t.iHE("ngModelChange",function(p){return t.kNx(a.selectedPriority,p)||(a.selectedPriority=p),p}),t.qCj("change",function(){return a.filterdata()}),t.I0R(277,"option",96),t.OEk(278,"All"),t.C$Y(),t.I0R(279,"option",91),t.OEk(280,"High"),t.C$Y(),t.I0R(281,"option",92),t.OEk(282,"Medium"),t.C$Y(),t.I0R(283,"option",93),t.OEk(284,"Low"),t.C$Y()()()()()(),t.I0R(285,"div",134)(286,"button",135),t.qCj("click",function(){return a.reset()}),t.wR5(287,"i",109),t.OEk(288," Reset "),t.C$Y()()(),t.I0R(289,"div",136),t.qCj("click",function(){return a.closeoffcanvas()}),t.C$Y()}2&r&&(t.E7m("breadcrumbItems",a.breadCrumbItems),t.yG2(10),t.cNF(null==a.taskData?null:a.taskData.length),t.yG2(7),t.OKB("ngModel",a.currentItemsPerPage),t.yG2(),t.E7m("ngForOf",a.itemsPerPageOptions),t.yG2(),t.E7m("value",null==a.taskDataList?null:a.taskDataList.length),t.yG2(4),t.OKB("ngModel",a.term),t.yG2(15),t.C0Y(38,a.totalFilterCount>0?38:-1),t.yG2(8),t.OKB("ngModel",a.masterSelected),t.yG2(19),t.oho(a.taskData),t.yG2(2),t.C0Y(67,a.spinnerStatus?67:-1),t.yG2(9),t.oRS(" We've searched ",null==a.taskDataList?null:a.taskDataList.length," Task Data. We did not find any Task for you search. "),t.yG2(6),t.cNF(null==a.taskData?null:a.taskData.length),t.yG2(3),t.cNF(null==a.taskDataList?null:a.taskDataList.length),t.yG2(3),t.E7m("totalItems",null==a.taskData?null:a.taskData.legnth)("itemsPerPage",10),t.yG2(9),t.E7m("formGroup",a.formGroup),t.yG2(12),t.C0Y(109,a.f.task_title&&a.f.task_title.hasError("required")&&a.f.task_title.touched?109:-1),t.yG2(),t.C0Y(110,a.f.task_title&&a.f.task_title.hasError("maxlength")&&a.f.task_title.touched?110:-1),t.yG2(7),t.E7m("items",a.employeeDataList)("multiple",!0),t.yG2(2),t.C0Y(119,a.f.emp_id&&a.f.emp_id.hasError("required")&&a.f.emp_id.touched?119:-1),t.yG2(8),t.C0Y(127,a.f.task_description&&a.f.task_description.hasError("required")&&a.f.task_description.touched?127:-1),t.yG2(7),t.E7m("altInput",!0)("convertModelValue",!0),t.yG2(),t.C0Y(135,a.f.start_date&&a.f.start_date.hasError("required")&&a.f.start_date.touched?135:-1),t.yG2(),t.E7m("ngIf",a.formGroup.hasError("dateRange")),t.yG2(7),t.E7m("altInput",!0)("convertModelValue",!0),t.yG2(),t.C0Y(144,a.f.end_date&&a.f.end_date.hasError("required")&&a.f.end_date.touched?144:-1),t.yG2(14),t.C0Y(158,a.f.priority&&a.f.priority.hasError("required")&&a.f.priority.touched?158:-1),t.yG2(16),t.C0Y(174,a.f.frequency&&a.f.frequency.hasError("required")&&a.f.frequency.touched?174:-1),t.yG2(18),t.C0Y(192,a.f.status&&a.f.status.hasError("required")&&a.f.status.touched?192:-1),t.yG2(40),t.OKB("ngModel",a.term),t.yG2(6),t.E7m("altInput",!0)("convertModelValue",!0),t.OKB("ngModel",a.selectedDate),t.yG2(5),t.E7m("altInput",!0)("convertModelValue",!0),t.OKB("ngModel",a.selectedEndDate),t.yG2(5),t.OKB("ngModel",a.selectedStatus),t.E7m("ngModelOptions",t.q4q(44,v2)),t.yG2(15),t.OKB("ngModel",a.selectedFrequency),t.E7m("ngModelOptions",t.q4q(45,v2)),t.yG2(13),t.OKB("ngModel",a.selectedPriority),t.E7m("ngModelOptions",t.q4q(46,v2)))},dependencies:[Me.QF,Me.ay,Me.u_,We.O,T.ER,j.sz,j.wd,j.GO,j.ot,j.SU,j.GC,j.ue,j.u,j.eJ,j._G,j.uW,j.Wo,nt.im,nf.uK,my.uM,ev.UT,ev.GU,$b,Me.y],styles:[".invalid-text[_ngcontent-%COMP%]{color:#ff6c6c;margin-top:4px}.file-invalid[_ngcontent-%COMP%]{border:2px dashed #ff6c6c}a[_ngcontent-%COMP%]{cursor:pointer}"]})}return n})()}];let Y7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[T.qQ.forChild(z7),T.qQ]})}return n})();var G7=Zt(1116),wD=Zt(2700);function xh(n){this.content=n}xh.prototype={constructor:xh,find:function(n){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===n)return i;return-1},get:function(n){var i=this.find(n);return-1==i?void 0:this.content[i+1]},update:function(n,i,e){var r=e&&e!=n?this.remove(e):this,a=r.find(n),o=r.content.slice();return-1==a?o.push(e||n,i):(o[a+1]=i,e&&(o[a]=e)),new xh(o)},remove:function(n){var i=this.find(n);if(-1==i)return this;var e=this.content.slice();return e.splice(i,2),new xh(e)},addToStart:function(n,i){return new xh([n,i].concat(this.remove(n).content))},addToEnd:function(n,i){var e=this.remove(n).content.slice();return e.push(n,i),new xh(e)},addBefore:function(n,i,e){var r=this.remove(i),a=r.content.slice(),o=r.find(n);return a.splice(-1==o?a.length:o,0,i,e),new xh(a)},forEach:function(n){for(var i=0;i<this.content.length;i+=2)n(this.content[i],this.content[i+1])},prepend:function(n){return(n=xh.from(n)).size?new xh(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=xh.from(n)).size?new xh(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var i=this;n=xh.from(n);for(var e=0;e<n.content.length;e+=2)i=i.remove(n.content[e]);return i},toObject:function(){var n={};return this.forEach(function(i,e){n[i]=e}),n},get size(){return this.content.length>>1}},xh.from=function(n){if(n instanceof xh)return n;var i=[];if(n)for(var e in n)i.push(e,n[e]);return new xh(i)};const CD=xh;function ED(n,i,e){for(let r=0;;r++){if(r==n.childCount||r==i.childCount)return n.childCount==i.childCount?null:e;let a=n.child(r),o=i.child(r);if(a!=o){if(!a.sameMarkup(o))return e;if(a.isText&&a.text!=o.text){for(let d=0;a.text[d]==o.text[d];d++)e++;return e}if(a.content.size||o.content.size){let d=ED(a.content,o.content,e+1);if(null!=d)return d}e+=a.nodeSize}else e+=a.nodeSize}}function kD(n,i,e,r){for(let a=n.childCount,o=i.childCount;;){if(0==a||0==o)return a==o?null:{a:e,b:r};let d=n.child(--a),p=i.child(--o),D=d.nodeSize;if(d!=p){if(!d.sameMarkup(p))return{a:e,b:r};if(d.isText&&d.text!=p.text){let P=0,B=Math.min(d.text.length,p.text.length);for(;P<B&&d.text[d.text.length-P-1]==p.text[p.text.length-P-1];)P++,e--,r--;return{a:e,b:r}}if(d.content.size||p.content.size){let P=kD(d.content,p.content,e-1,r-1);if(P)return P}e-=D,r-=D}else e-=D,r-=D}}class Zr{constructor(i,e){if(this.content=i,this.size=e||0,null==e)for(let r=0;r<i.length;r++)this.size+=i[r].nodeSize}nodesBetween(i,e,r,a=0,o){for(let d=0,p=0;p<e;d++){let D=this.content[d],P=p+D.nodeSize;if(P>i&&!1!==r(D,a+p,o||null,d)&&D.content.size){let B=p+1;D.nodesBetween(Math.max(0,i-B),Math.min(D.content.size,e-B),r,a+B)}p=P}}descendants(i){this.nodesBetween(0,this.size,i)}textBetween(i,e,r,a){let o="",d=!0;return this.nodesBetween(i,e,(p,D)=>{p.isText?(o+=p.text.slice(Math.max(i,D)-D,e-D),d=!r):p.isLeaf?(a?o+="function"==typeof a?a(p):a:p.type.spec.leafText&&(o+=p.type.spec.leafText(p)),d=!r):!d&&p.isBlock&&(o+=r,d=!0)},0),o}append(i){if(!i.size)return this;if(!this.size)return i;let e=this.lastChild,r=i.firstChild,a=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(a[a.length-1]=e.withText(e.text+r.text),o=1);o<i.content.length;o++)a.push(i.content[o]);return new Zr(a,this.size+i.size)}cut(i,e=this.size){if(0==i&&e==this.size)return this;let r=[],a=0;if(e>i)for(let o=0,d=0;d<e;o++){let p=this.content[o],D=d+p.nodeSize;D>i&&((d<i||D>e)&&(p=p.isText?p.cut(Math.max(0,i-d),Math.min(p.text.length,e-d)):p.cut(Math.max(0,i-d-1),Math.min(p.content.size,e-d-1))),r.push(p),a+=p.nodeSize),d=D}return new Zr(r,a)}cutByIndex(i,e){return i==e?Zr.empty:0==i&&e==this.content.length?this:new Zr(this.content.slice(i,e))}replaceChild(i,e){let r=this.content[i];if(r==e)return this;let a=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return a[i]=e,new Zr(a,o)}addToStart(i){return new Zr([i].concat(this.content),this.size+i.nodeSize)}addToEnd(i){return new Zr(this.content.concat(i),this.size+i.nodeSize)}eq(i){if(this.content.length!=i.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(i.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(i){let e=this.content[i];if(!e)throw new RangeError("Index "+i+" out of range for "+this);return e}maybeChild(i){return this.content[i]||null}forEach(i){for(let e=0,r=0;e<this.content.length;e++){let a=this.content[e];i(a,r,e),r+=a.nodeSize}}findDiffStart(i,e=0){return ED(this,i,e)}findDiffEnd(i,e=this.size,r=i.size){return kD(this,i,e,r)}findIndex(i,e=-1){if(0==i)return qb(0,i);if(i==this.size)return qb(this.content.length,i);if(i>this.size||i<0)throw new RangeError(`Position ${i} outside of fragment (${this})`);for(let r=0,a=0;;r++){let d=a+this.child(r).nodeSize;if(d>=i)return d==i||e>0?qb(r+1,d):qb(r,a);a=d}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(i=>i.toJSON()):null}static fromJSON(i,e){if(!e)return Zr.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Zr(e.map(i.nodeFromJSON))}static fromArray(i){if(!i.length)return Zr.empty;let e,r=0;for(let a=0;a<i.length;a++){let o=i[a];r+=o.nodeSize,a&&o.isText&&i[a-1].sameMarkup(o)?(e||(e=i.slice(0,a)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Zr(e||i,r)}static from(i){if(!i)return Zr.empty;if(i instanceof Zr)return i;if(Array.isArray(i))return this.fromArray(i);if(i.attrs)return new Zr([i],i.nodeSize);throw new RangeError("Can not convert "+i+" to a Fragment"+(i.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Zr.empty=new Zr([],0);const _2={index:0,offset:0};function qb(n,i){return _2.index=n,_2.offset=i,_2}function Zb(n,i){if(n===i)return!0;if(!n||"object"!=typeof n||!i||"object"!=typeof i)return!1;let e=Array.isArray(n);if(Array.isArray(i)!=e)return!1;if(e){if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++)if(!Zb(n[r],i[r]))return!1}else{for(let r in n)if(!(r in i)||!Zb(n[r],i[r]))return!1;for(let r in i)if(!(r in n))return!1}return!0}let ql=(()=>{class n{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,a=!1;for(let o=0;o<e.length;o++){let d=e[o];if(this.eq(d))return e;if(this.type.excludes(d.type))r||(r=e.slice(0,o));else{if(d.type.excludes(this.type))return e;!a&&d.type.rank>this.type.rank&&(r||(r=e.slice(0,o)),r.push(this),a=!0),r&&r.push(d)}}return r||(r=e.slice()),a||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Zb(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[r.type];if(!a)throw new RangeError(`There is no mark type ${r.type} in this schema`);return a.create(r.attrs)}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(r[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return n.none;if(e instanceof n)return[e];let r=e.slice();return r.sort((a,o)=>a.type.rank-o.type.rank),r}}return n.none=[],n})();class Kb extends Error{}class za{constructor(i,e,r){this.content=i,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(i,e){let r=SD(this.content,i+this.openStart,e);return r&&new za(r,this.openStart,this.openEnd)}removeBetween(i,e){return new za(TD(this.content,i+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(i){return this.content.eq(i.content)&&this.openStart==i.openStart&&this.openEnd==i.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let i={content:this.content.toJSON()};return this.openStart>0&&(i.openStart=this.openStart),this.openEnd>0&&(i.openEnd=this.openEnd),i}static fromJSON(i,e){if(!e)return za.empty;let r=e.openStart||0,a=e.openEnd||0;if("number"!=typeof r||"number"!=typeof a)throw new RangeError("Invalid input for Slice.fromJSON");return new za(Zr.fromJSON(i,e.content),r,a)}static maxOpen(i,e=!0){let r=0,a=0;for(let o=i.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=i.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)a++;return new za(i,r,a)}}function TD(n,i,e){let{index:r,offset:a}=n.findIndex(i),o=n.maybeChild(r),{index:d,offset:p}=n.findIndex(e);if(a==i||o.isText){if(p!=e&&!n.child(d).isText)throw new RangeError("Removing non-flat range");return n.cut(0,i).append(n.cut(e))}if(r!=d)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(TD(o.content,i-a-1,e-a-1)))}function SD(n,i,e,r){let{index:a,offset:o}=n.findIndex(i),d=n.maybeChild(a);if(o==i||d.isText)return r&&!r.canReplace(a,a,e)?null:n.cut(0,i).append(e).append(n.cut(i));let p=SD(d.content,i-o-1,e);return p&&n.replaceChild(a,d.copy(p))}function H7(n,i,e){if(e.openStart>n.depth)throw new Kb("Inserted content deeper than insertion position");if(n.depth-e.openStart!=i.depth-e.openEnd)throw new Kb("Inconsistent open depths");return DD(n,i,e,0)}function DD(n,i,e,r){let a=n.index(r),o=n.node(r);if(a==i.index(r)&&r<n.depth-e.openStart){let d=DD(n,i,e,r+1);return o.copy(o.content.replaceChild(a,d))}if(e.content.size){if(e.openStart||e.openEnd||n.depth!=r||i.depth!=r){let{start:d,end:p}=function V7(n,i){let e=i.depth-n.openStart,a=i.node(e).copy(n.content);for(let o=e-1;o>=0;o--)a=i.node(o).copy(Zr.from(a));return{start:a.resolveNoCache(n.openStart+e),end:a.resolveNoCache(a.content.size-n.openEnd-e)}}(e,n);return y_(o,ID(n,d,p,i,r))}{let d=n.parent,p=d.content;return y_(d,p.cut(0,n.parentOffset).append(e.content).append(p.cut(i.parentOffset)))}}return y_(o,Jb(n,i,r))}function AD(n,i){if(!i.type.compatibleContent(n.type))throw new Kb("Cannot join "+i.type.name+" onto "+n.type.name)}function y2(n,i,e){let r=n.node(e);return AD(r,i.node(e)),r}function __(n,i){let e=i.length-1;e>=0&&n.isText&&n.sameMarkup(i[e])?i[e]=n.withText(i[e].text+n.text):i.push(n)}function fx(n,i,e,r){let a=(i||n).node(e),o=0,d=i?i.index(e):a.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(__(n.nodeAfter,r),o++));for(let p=o;p<d;p++)__(a.child(p),r);i&&i.depth==e&&i.textOffset&&__(i.nodeBefore,r)}function y_(n,i){return n.type.checkContent(i),n.copy(i)}function ID(n,i,e,r,a){let o=n.depth>a&&y2(n,i,a+1),d=r.depth>a&&y2(e,r,a+1),p=[];return fx(null,n,a,p),o&&d&&i.index(a)==e.index(a)?(AD(o,d),__(y_(o,ID(n,i,e,r,a+1)),p)):(o&&__(y_(o,Jb(n,i,a+1)),p),fx(i,e,a,p),d&&__(y_(d,Jb(e,r,a+1)),p)),fx(r,null,a,p),new Zr(p)}function Jb(n,i,e){let r=[];return fx(null,n,e,r),n.depth>e&&__(y_(y2(n,i,e+1),Jb(n,i,e+1)),r),fx(i,null,e,r),new Zr(r)}za.empty=new za(Zr.empty,0,0);class px{constructor(i,e,r){this.pos=i,this.path=e,this.parentOffset=r,this.depth=e.length/3-1}resolveDepth(i){return null==i?this.depth:i<0?this.depth+i:i}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(i){return this.path[3*this.resolveDepth(i)]}index(i){return this.path[3*this.resolveDepth(i)+1]}indexAfter(i){return i=this.resolveDepth(i),this.index(i)+(i!=this.depth||this.textOffset?1:0)}start(i){return 0==(i=this.resolveDepth(i))?0:this.path[3*i-1]+1}end(i){return i=this.resolveDepth(i),this.start(i)+this.node(i).content.size}before(i){if(!(i=this.resolveDepth(i)))throw new RangeError("There is no position before the top-level node");return i==this.depth+1?this.pos:this.path[3*i-1]}after(i){if(!(i=this.resolveDepth(i)))throw new RangeError("There is no position after the top-level node");return i==this.depth+1?this.pos:this.path[3*i-1]+this.path[3*i].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let i=this.parent,e=this.index(this.depth);if(e==i.childCount)return null;let r=this.pos-this.path[this.path.length-1],a=i.child(e);return r?i.child(e).cut(r):a}get nodeBefore(){let i=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(i).cut(0,e):0==i?null:this.parent.child(i-1)}posAtIndex(i,e){e=this.resolveDepth(e);let r=this.path[3*e],a=0==e?0:this.path[3*e-1]+1;for(let o=0;o<i;o++)a+=r.child(o).nodeSize;return a}marks(){let i=this.parent,e=this.index();if(0==i.content.size)return ql.none;if(this.textOffset)return i.child(e).marks;let r=i.maybeChild(e-1),a=i.maybeChild(e);if(!r){let p=r;r=a,a=p}let o=r.marks;for(var d=0;d<o.length;d++)!1===o[d].type.spec.inclusive&&(!a||!o[d].isInSet(a.marks))&&(o=o[d--].removeFromSet(o));return o}marksAcross(i){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let r=e.marks,a=i.parent.maybeChild(i.index());for(var o=0;o<r.length;o++)!1===r[o].type.spec.inclusive&&(!a||!r[o].isInSet(a.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(i){for(let e=this.depth;e>0;e--)if(this.start(e)<=i&&this.end(e)>=i)return e;return 0}blockRange(i=this,e){if(i.pos<this.pos)return i.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==i.pos?1:0);r>=0;r--)if(i.pos<=this.end(r)&&(!e||e(this.node(r))))return new Qb(this,i,r);return null}sameParent(i){return this.pos-this.parentOffset==i.pos-i.parentOffset}max(i){return i.pos>this.pos?i:this}min(i){return i.pos<this.pos?i:this}toString(){let i="";for(let e=1;e<=this.depth;e++)i+=(i?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return i+":"+this.parentOffset}static resolve(i,e){if(!(e>=0&&e<=i.content.size))throw new RangeError("Position "+e+" out of range");let r=[],a=0,o=e;for(let d=i;;){let{index:p,offset:D}=d.content.findIndex(o),P=o-D;if(r.push(d,p,a+D),!P||(d=d.child(p),d.isText))break;o=P-1,a+=D+1}return new px(e,r,o)}static resolveCached(i,e){for(let a=0;a<x2.length;a++){let o=x2[a];if(o.pos==e&&o.doc==i)return o}let r=x2[b2]=px.resolve(i,e);return b2=(b2+1)%U7,r}}let x2=[],b2=0,U7=12;class Qb{constructor(i,e,r){this.$from=i,this.$to=e,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const j7=Object.create(null);class Jg{constructor(i,e,r,a=ql.none){this.type=i,this.attrs=e,this.marks=a,this.content=r||Zr.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(i){return this.content.child(i)}maybeChild(i){return this.content.maybeChild(i)}forEach(i){this.content.forEach(i)}nodesBetween(i,e,r,a=0){this.content.nodesBetween(i,e,r,a,this)}descendants(i){this.nodesBetween(0,this.content.size,i)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(i,e,r,a){return this.content.textBetween(i,e,r,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(i){return this==i||this.sameMarkup(i)&&this.content.eq(i.content)}sameMarkup(i){return this.hasMarkup(i.type,i.attrs,i.marks)}hasMarkup(i,e,r){return this.type==i&&Zb(this.attrs,e||i.defaultAttrs||j7)&&ql.sameSet(this.marks,r||ql.none)}copy(i=null){return i==this.content?this:new Jg(this.type,this.attrs,i,this.marks)}mark(i){return i==this.marks?this:new Jg(this.type,this.attrs,this.content,i)}cut(i,e=this.content.size){return 0==i&&e==this.content.size?this:this.copy(this.content.cut(i,e))}slice(i,e=this.content.size,r=!1){if(i==e)return za.empty;let a=this.resolve(i),o=this.resolve(e),d=r?0:a.sharedDepth(e),p=a.start(d),P=a.node(d).content.cut(a.pos-p,o.pos-p);return new za(P,a.depth-d,o.depth-d)}replace(i,e,r){return H7(this.resolve(i),this.resolve(e),r)}nodeAt(i){for(let e=this;;){let{index:r,offset:a}=e.content.findIndex(i);if(e=e.maybeChild(r),!e)return null;if(a==i||e.isText)return e;i-=a+1}}childAfter(i){let{index:e,offset:r}=this.content.findIndex(i);return{node:this.content.maybeChild(e),index:e,offset:r}}childBefore(i){if(0==i)return{node:null,index:0,offset:0};let{index:e,offset:r}=this.content.findIndex(i);if(r<i)return{node:this.content.child(e),index:e,offset:r};let a=this.content.child(e-1);return{node:a,index:e-1,offset:r-a.nodeSize}}resolve(i){return px.resolveCached(this,i)}resolveNoCache(i){return px.resolve(this,i)}rangeHasMark(i,e,r){let a=!1;return e>i&&this.nodesBetween(i,e,o=>(r.isInSet(o.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let i=this.type.name;return this.content.size&&(i+="("+this.content.toStringInner()+")"),MD(this.marks,i)}contentMatchAt(i){let e=this.type.contentMatch.matchFragment(this.content,0,i);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(i,e,r=Zr.empty,a=0,o=r.childCount){let d=this.contentMatchAt(i).matchFragment(r,a,o),p=d&&d.matchFragment(this.content,e);if(!p||!p.validEnd)return!1;for(let D=a;D<o;D++)if(!this.type.allowsMarks(r.child(D).marks))return!1;return!0}canReplaceWith(i,e,r,a){if(a&&!this.type.allowsMarks(a))return!1;let o=this.contentMatchAt(i).matchType(r),d=o&&o.matchFragment(this.content,e);return!!d&&d.validEnd}canAppend(i){return i.content.size?this.canReplace(this.childCount,this.childCount,i.content):this.type.compatibleContent(i.type)}check(){this.type.checkContent(this.content);let i=ql.none;for(let e=0;e<this.marks.length;e++)i=this.marks[e].addToSet(i);if(!ql.sameSet(i,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let i={type:this.type.name};for(let e in this.attrs){i.attrs=this.attrs;break}return this.content.size&&(i.content=this.content.toJSON()),this.marks.length&&(i.marks=this.marks.map(e=>e.toJSON())),i}static fromJSON(i,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(i.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return i.text(e.text,r)}let a=Zr.fromJSON(i,e.content);return i.nodeType(e.type).create(e.attrs,a,r)}}Jg.prototype.text=void 0;class ew extends Jg{constructor(i,e,r,a){if(super(i,e,null,a),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):MD(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(i,e){return this.text.slice(i,e)}get nodeSize(){return this.text.length}mark(i){return i==this.marks?this:new ew(this.type,this.attrs,this.text,i)}withText(i){return i==this.text?this:new ew(this.type,this.attrs,i,this.marks)}cut(i=0,e=this.text.length){return 0==i&&e==this.text.length?this:this.withText(this.text.slice(i,e))}eq(i){return this.sameMarkup(i)&&this.text==i.text}toJSON(){let i=super.toJSON();return i.text=this.text,i}}function MD(n,i){for(let e=n.length-1;e>=0;e--)i=n[e].type.name+"("+i+")";return i}class x_{constructor(i){this.validEnd=i,this.next=[],this.wrapCache=[]}static parse(i,e){let r=new $7(i,e);if(null==r.next)return x_.empty;let a=RD(r);r.next&&r.err("Unexpected trailing text");let o=function Q7(n){let i=Object.create(null);return function e(r){let a=[];r.forEach(d=>{n[d].forEach(({term:p,to:D})=>{if(!p)return;let P;for(let B=0;B<a.length;B++)a[B][0]==p&&(P=a[B][1]);PD(n,D).forEach(B=>{P||a.push([p,P=[]]),-1==P.indexOf(B)&&P.push(B)})})});let o=i[r.join(",")]=new x_(r.indexOf(n.length-1)>-1);for(let d=0;d<a.length;d++){let p=a[d][1].sort(LD);o.next.push({type:a[d][0],next:i[p.join(",")]||e(p)})}return o}(PD(n,0))}(function J7(n){let i=[[]];return a(function o(d,p){if("choice"==d.type)return d.exprs.reduce((D,P)=>D.concat(o(P,p)),[]);if("seq"!=d.type){if("star"==d.type){let D=e();return r(p,D),a(o(d.expr,D),D),[r(D)]}if("plus"==d.type){let D=e();return a(o(d.expr,p),D),a(o(d.expr,D),D),[r(D)]}if("opt"==d.type)return[r(p)].concat(o(d.expr,p));if("range"==d.type){let D=p;for(let P=0;P<d.min;P++){let B=e();a(o(d.expr,D),B),D=B}if(-1==d.max)a(o(d.expr,D),D);else for(let P=d.min;P<d.max;P++){let B=e();r(D,B),a(o(d.expr,D),B),D=B}return[r(D)]}if("name"==d.type)return[r(p,void 0,d.value)];throw new Error("Unknown expr type")}for(let D=0;;D++){let P=o(d.exprs[D],p);if(D==d.exprs.length-1)return P;a(P,p=e())}}(n,0),e()),i;function e(){return i.push([])-1}function r(d,p,D){let P={term:D,to:p};return i[d].push(P),P}function a(d,p){d.forEach(D=>D.to=p)}}(a));return function eG(n,i){for(let e=0,r=[n];e<r.length;e++){let a=r[e],o=!a.validEnd,d=[];for(let p=0;p<a.next.length;p++){let{type:D,next:P}=a.next[p];d.push(D.name),o&&!(D.isText||D.hasRequiredAttrs())&&(o=!1),-1==r.indexOf(P)&&r.push(P)}o&&i.err("Only non-generatable nodes ("+d.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o}matchType(i){for(let e=0;e<this.next.length;e++)if(this.next[e].type==i)return this.next[e].next;return null}matchFragment(i,e=0,r=i.childCount){let a=this;for(let o=e;a&&o<r;o++)a=a.matchType(i.child(o).type);return a}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let i=0;i<this.next.length;i++){let{type:e}=this.next[i];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(i){for(let e=0;e<this.next.length;e++)for(let r=0;r<i.next.length;r++)if(this.next[e].type==i.next[r].type)return!0;return!1}fillBefore(i,e=!1,r=0){let a=[this];return function o(d,p){let D=d.matchFragment(i,r);if(D&&(!e||D.validEnd))return Zr.from(p.map(P=>P.createAndFill()));for(let P=0;P<d.next.length;P++){let{type:B,next:te}=d.next[P];if(!B.isText&&!B.hasRequiredAttrs()&&-1==a.indexOf(te)){a.push(te);let ae=o(te,p.concat(B));if(ae)return ae}}return null}(this,[])}findWrapping(i){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==i)return this.wrapCache[r+1];let e=this.computeWrapping(i);return this.wrapCache.push(i,e),e}computeWrapping(i){let e=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let a=r.shift(),o=a.match;if(o.matchType(i)){let d=[];for(let p=a;p.type;p=p.via)d.push(p.type);return d.reverse()}for(let d=0;d<o.next.length;d++){let{type:p,next:D}=o.next[d];!p.isLeaf&&!p.hasRequiredAttrs()&&!(p.name in e)&&(!a.type||D.validEnd)&&(r.push({match:p.contentMatch,type:p,via:a}),e[p.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(i){if(i>=this.next.length)throw new RangeError(`There's no ${i}th edge in this content match`);return this.next[i]}toString(){let i=[];return function e(r){i.push(r);for(let a=0;a<r.next.length;a++)-1==i.indexOf(r.next[a].next)&&e(r.next[a].next)}(this),i.map((r,a)=>{let o=a+(r.validEnd?"*":" ")+" ";for(let d=0;d<r.next.length;d++)o+=(d?", ":"")+r.next[d].type.name+"->"+i.indexOf(r.next[d].next);return o}).join("\n")}}x_.empty=new x_(!0);class $7{constructor(i,e){this.string=i,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=i.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(i){return this.next==i&&(this.pos++||!0)}err(i){throw new SyntaxError(i+" (in content expression '"+this.string+"')")}}function RD(n){let i=[];do{i.push(W7(n))}while(n.eat("|"));return 1==i.length?i[0]:{type:"choice",exprs:i}}function W7(n){let i=[];do{i.push(X7(n))}while(n.next&&")"!=n.next&&"|"!=n.next);return 1==i.length?i[0]:{type:"seq",exprs:i}}function X7(n){let i=function K7(n){if(n.eat("(")){let i=RD(n);return n.eat(")")||n.err("Missing closing paren"),i}if(!/\W/.test(n.next)){let i=function Z7(n,i){let e=n.nodeTypes,r=e[i];if(r)return[r];let a=[];for(let o in e){let d=e[o];d.groups.indexOf(i)>-1&&a.push(d)}return 0==a.length&&n.err("No node type or group '"+i+"' found"),a}(n,n.next).map(e=>(null==n.inline?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}n.err("Unexpected token '"+n.next+"'")}(n);for(;;)if(n.eat("+"))i={type:"plus",expr:i};else if(n.eat("*"))i={type:"star",expr:i};else if(n.eat("?"))i={type:"opt",expr:i};else{if(!n.eat("{"))break;i=q7(n,i)}return i}function OD(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let i=Number(n.next);return n.pos++,i}function q7(n,i){let e=OD(n),r=e;return n.eat(",")&&(r="}"!=n.next?OD(n):-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:i}}function LD(n,i){return i-n}function PD(n,i){let e=[];return function r(a){let o=n[a];if(1==o.length&&!o[0].term)return r(o[0].to);e.push(a);for(let d=0;d<o.length;d++){let{term:p,to:D}=o[d];!p&&-1==e.indexOf(D)&&r(D)}}(i),e.sort(LD)}function FD(n){let i=Object.create(null);for(let e in n){let r=n[e];if(!r.hasDefault)return null;i[e]=r.default}return i}function BD(n,i){let e=Object.create(null);for(let r in n){let a=i&&i[r];if(void 0===a){let o=n[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);a=o.default}e[r]=a}return e}function ND(n){let i=Object.create(null);if(n)for(let e in n)i[e]=new tG(n[e]);return i}class tw{constructor(i,e,r){this.name=i,this.schema=e,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ND(r.attrs),this.defaultAttrs=FD(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==i),this.isText="text"==i}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==x_.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let i in this.attrs)if(this.attrs[i].isRequired)return!0;return!1}compatibleContent(i){return this==i||this.contentMatch.compatible(i.contentMatch)}computeAttrs(i){return!i&&this.defaultAttrs?this.defaultAttrs:BD(this.attrs,i)}create(i=null,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jg(this,this.computeAttrs(i),Zr.from(e),ql.setFrom(r))}createChecked(i=null,e,r){return e=Zr.from(e),this.checkContent(e),new Jg(this,this.computeAttrs(i),e,ql.setFrom(r))}createAndFill(i=null,e,r){if(i=this.computeAttrs(i),(e=Zr.from(e)).size){let d=this.contentMatch.fillBefore(e);if(!d)return null;e=d.append(e)}let a=this.contentMatch.matchFragment(e),o=a&&a.fillBefore(Zr.empty,!0);return o?new Jg(this,i,e.append(o),ql.setFrom(r)):null}validContent(i){let e=this.contentMatch.matchFragment(i);if(!e||!e.validEnd)return!1;for(let r=0;r<i.childCount;r++)if(!this.allowsMarks(i.child(r).marks))return!1;return!0}checkContent(i){if(!this.validContent(i))throw new RangeError(`Invalid content for node ${this.name}: ${i.toString().slice(0,50)}`)}allowsMarkType(i){return null==this.markSet||this.markSet.indexOf(i)>-1}allowsMarks(i){if(null==this.markSet)return!0;for(let e=0;e<i.length;e++)if(!this.allowsMarkType(i[e].type))return!1;return!0}allowedMarks(i){if(null==this.markSet)return i;let e;for(let r=0;r<i.length;r++)this.allowsMarkType(i[r].type)?e&&e.push(i[r]):e||(e=i.slice(0,r));return e?e.length?e:ql.none:i}static compile(i,e){let r=Object.create(null);i.forEach((o,d)=>r[o]=new tw(o,e,d));let a=e.spec.topNode||"doc";if(!r[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class tG{constructor(i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default}get isRequired(){return!this.hasDefault}}class iw{constructor(i,e,r,a){this.name=i,this.rank=e,this.schema=r,this.spec=a,this.attrs=ND(a.attrs),this.excluded=null;let o=FD(this.attrs);this.instance=o?new ql(this,o):null}create(i=null){return!i&&this.instance?this.instance:new ql(this,BD(this.attrs,i))}static compile(i,e){let r=Object.create(null),a=0;return i.forEach((o,d)=>r[o]=new iw(o,a++,e,d)),r}removeFromSet(i){for(var e=0;e<i.length;e++)i[e].type==this&&(i=i.slice(0,e).concat(i.slice(e+1)),e--);return i}isInSet(i){for(let e=0;e<i.length;e++)if(i[e].type==this)return i[e]}excludes(i){return this.excluded.indexOf(i)>-1}}function zD(n,i){let e=[];for(let r=0;r<i.length;r++){let a=i[r],o=n.marks[a],d=o;if(o)e.push(o);else for(let p in n.marks){let D=n.marks[p];("_"==a||D.spec.group&&D.spec.group.split(" ").indexOf(a)>-1)&&e.push(d=D)}if(!d)throw new SyntaxError("Unknown mark type: '"+i[r]+"'")}return e}const WD=Math.pow(2,16);function cG(n,i){return n+i*WD}function XD(n){return 65535&n}class E2{constructor(i,e,r){this.pos=i,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Nf{constructor(i,e=!1){if(this.ranges=i,this.inverted=e,!i.length&&Nf.empty)return Nf.empty}recover(i){let e=0,r=XD(i);if(!this.inverted)for(let a=0;a<r;a++)e+=this.ranges[3*a+2]-this.ranges[3*a+1];return this.ranges[3*r]+e+function uG(n){return(n-(65535&n))/WD}(i)}mapResult(i,e=1){return this._map(i,e,!1)}map(i,e=1){return this._map(i,e,!0)}_map(i,e,r){let a=0,o=this.inverted?2:1,d=this.inverted?1:2;for(let p=0;p<this.ranges.length;p+=3){let D=this.ranges[p]-(this.inverted?a:0);if(D>i)break;let P=this.ranges[p+o],B=this.ranges[p+d],te=D+P;if(i<=te){let oe=D+a+((P?i==D?-1:i==te?1:e:e)<0?0:B);if(r)return oe;let ge=i==(e<0?D:te)?null:cG(p/3,i-D),ue=i==D?2:i==te?1:4;return(e<0?i!=D:i!=te)&&(ue|=8),new E2(oe,ue,ge)}a+=B-P}return r?i+a:new E2(i+a,0,null)}touches(i,e){let r=0,a=XD(e),o=this.inverted?2:1,d=this.inverted?1:2;for(let p=0;p<this.ranges.length;p+=3){let D=this.ranges[p]-(this.inverted?r:0);if(D>i)break;let P=this.ranges[p+o];if(i<=D+P&&p==3*a)return!0;r+=this.ranges[p+d]-P}return!1}forEach(i){let e=this.inverted?2:1,r=this.inverted?1:2;for(let a=0,o=0;a<this.ranges.length;a+=3){let d=this.ranges[a],p=d-(this.inverted?o:0),D=d+(this.inverted?0:o),P=this.ranges[a+e],B=this.ranges[a+r];i(p,p+P,D,D+B),o+=B-P}}invert(){return new Nf(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(i){return 0==i?Nf.empty:new Nf(i<0?[0,-i,0]:[0,0,i])}}Nf.empty=new Nf([]);const k2=Object.create(null);class bh{getMap(){return Nf.empty}merge(i){return null}static fromJSON(i,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=k2[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(i,e)}static jsonID(i,e){if(i in k2)throw new RangeError("Duplicate use of step JSON ID "+i);return k2[i]=e,e.prototype.jsonID=i,e}}class qu{constructor(i,e){this.doc=i,this.failed=e}static ok(i){return new qu(i,null)}static fail(i){return new qu(null,i)}static fromReplace(i,e,r,a){try{return qu.ok(i.replace(e,r,a))}catch(o){if(o instanceof Kb)return qu.fail(o.message);throw o}}}function T2(n,i,e){let r=[];for(let a=0;a<n.childCount;a++){let o=n.child(a);o.content.size&&(o=o.copy(T2(o.content,i,o))),o.isInline&&(o=i(o,e,a)),r.push(o)}return Zr.fromArray(r)}class uv extends bh{constructor(i,e,r){super(),this.from=i,this.to=e,this.mark=r}apply(i){let e=i.slice(this.from,this.to),r=i.resolve(this.from),a=r.node(r.sharedDepth(this.to)),o=new za(T2(e.content,(d,p)=>d.isAtom&&p.type.allowsMarkType(this.mark.type)?d.mark(this.mark.addToSet(d.marks)):d,a),e.openStart,e.openEnd);return qu.fromReplace(i,this.from,this.to,o)}invert(){return new $m(this.from,this.to,this.mark)}map(i){let e=i.mapResult(this.from,1),r=i.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new uv(e.pos,r.pos,this.mark)}merge(i){return i instanceof uv&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new uv(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new uv(e.from,e.to,i.markFromJSON(e.mark))}}bh.jsonID("addMark",uv);class $m extends bh{constructor(i,e,r){super(),this.from=i,this.to=e,this.mark=r}apply(i){let e=i.slice(this.from,this.to),r=new za(T2(e.content,a=>a.mark(this.mark.removeFromSet(a.marks)),i),e.openStart,e.openEnd);return qu.fromReplace(i,this.from,this.to,r)}invert(){return new uv(this.from,this.to,this.mark)}map(i){let e=i.mapResult(this.from,1),r=i.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new $m(e.pos,r.pos,this.mark)}merge(i){return i instanceof $m&&i.mark.eq(this.mark)&&this.from<=i.to&&this.to>=i.from?new $m(Math.min(this.from,i.from),Math.max(this.to,i.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new $m(e.from,e.to,i.markFromJSON(e.mark))}}bh.jsonID("removeMark",$m);class dv extends bh{constructor(i,e){super(),this.pos=i,this.mark=e}apply(i){let e=i.nodeAt(this.pos);if(!e)return qu.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return qu.fromReplace(i,this.pos,this.pos+1,new za(Zr.from(r),0,e.isLeaf?0:1))}invert(i){let e=i.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let a=0;a<e.marks.length;a++)if(!e.marks[a].isInSet(r))return new dv(this.pos,e.marks[a]);return new dv(this.pos,this.mark)}}return new Ry(this.pos,this.mark)}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new dv(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(i,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new dv(e.pos,i.markFromJSON(e.mark))}}bh.jsonID("addNodeMark",dv);class Ry extends bh{constructor(i,e){super(),this.pos=i,this.mark=e}apply(i){let e=i.nodeAt(this.pos);if(!e)return qu.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return qu.fromReplace(i,this.pos,this.pos+1,new za(Zr.from(r),0,e.isLeaf?0:1))}invert(i){let e=i.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new dv(this.pos,this.mark):this}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new Ry(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(i,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ry(e.pos,i.markFromJSON(e.mark))}}bh.jsonID("removeNodeMark",Ry);class wh extends bh{constructor(i,e,r,a=!1){super(),this.from=i,this.to=e,this.slice=r,this.structure=a}apply(i){return this.structure&&S2(i,this.from,this.to)?qu.fail("Structure replace would overwrite content"):qu.fromReplace(i,this.from,this.to,this.slice)}getMap(){return new Nf([this.from,this.to-this.from,this.slice.size])}invert(i){return new wh(this.from,this.from+this.slice.size,i.slice(this.from,this.to))}map(i){let e=i.mapResult(this.from,1),r=i.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new wh(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(i){if(!(i instanceof wh)||i.structure||this.structure)return null;if(this.from+this.slice.size!=i.from||this.slice.openEnd||i.slice.openStart){if(i.to!=this.from||this.slice.openStart||i.slice.openEnd)return null;{let e=this.slice.size+i.slice.size==0?za.empty:new za(i.slice.content.append(this.slice.content),i.slice.openStart,this.slice.openEnd);return new wh(i.from,this.to,e,this.structure)}}{let e=this.slice.size+i.slice.size==0?za.empty:new za(this.slice.content.append(i.slice.content),this.slice.openStart,i.slice.openEnd);return new wh(this.from,this.to+(i.to-i.from),e,this.structure)}}toJSON(){let i={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new wh(e.from,e.to,za.fromJSON(i,e.slice),!!e.structure)}}bh.jsonID("replace",wh);class Ch extends bh{constructor(i,e,r,a,o,d,p=!1){super(),this.from=i,this.to=e,this.gapFrom=r,this.gapTo=a,this.slice=o,this.insert=d,this.structure=p}apply(i){if(this.structure&&(S2(i,this.from,this.gapFrom)||S2(i,this.gapTo,this.to)))return qu.fail("Structure gap-replace would overwrite content");let e=i.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return qu.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?qu.fromReplace(i,this.from,this.to,r):qu.fail("Content does not fit in gap")}getMap(){return new Nf([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(i){let e=this.gapTo-this.gapFrom;return new Ch(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,i.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(i){let e=i.mapResult(this.from,1),r=i.mapResult(this.to,-1),a=i.map(this.gapFrom,-1),o=i.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||a<e.pos||o>r.pos?null:new Ch(e.pos,r.pos,a,o,this.slice,this.insert,this.structure)}toJSON(){let i={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(i.slice=this.slice.toJSON()),this.structure&&(i.structure=!0),i}static fromJSON(i,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ch(e.from,e.to,e.gapFrom,e.gapTo,za.fromJSON(i,e.slice),e.insert,!!e.structure)}}function S2(n,i,e){let r=n.resolve(i),a=e-i,o=r.depth;for(;a>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,a--;if(a>0){let d=r.node(o).maybeChild(r.indexAfter(o));for(;a>0;){if(!d||d.isLeaf)return!0;d=d.firstChild,a--}}return!1}function pG(n,i,e){return(0==i||n.canReplace(i,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function _x(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let a=n.$from.node(r),o=n.$from.index(r),d=n.$to.indexAfter(r);if(r<n.depth&&a.canReplace(o,d,e))return r;if(0==r||a.type.spec.isolating||!pG(a,o,d))break}return null}function JD(n,i,e=null,r=n){let a=function gG(n,i){let{parent:e,startIndex:r,endIndex:a}=n,o=e.contentMatchAt(r).findWrapping(i);return o&&e.canReplaceWith(r,a,o.length?o[0]:i)?o:null}(n,i),o=a&&function vG(n,i){let{parent:e,startIndex:r,endIndex:a}=n,o=e.child(r),d=i.contentMatch.findWrapping(o.type);if(!d)return null;let D=(d.length?d[d.length-1]:i).contentMatch;for(let P=r;D&&P<a;P++)D=D.matchType(e.child(P).type);return D&&D.validEnd?d:null}(r,i);return o?a.map(QD).concat({type:i,attrs:e}).concat(o.map(QD)):null}function QD(n){return{type:n,attrs:null}}function yx(n,i,e=1,r){let a=n.resolve(i),o=a.depth-e,d=r&&r[r.length-1]||a.parent;if(o<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!d.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let P=a.depth-1,B=e-2;P>o;P--,B--){let te=a.node(P),ae=a.index(P);if(te.type.spec.isolating)return!1;let oe=te.content.cutByIndex(ae,te.childCount),ge=r&&r[B+1];ge&&(oe=oe.replaceChild(0,ge.type.create(ge.attrs)));let ue=r&&r[B]||te;if(!te.canReplace(ae+1,te.childCount)||!ue.type.validContent(oe))return!1}let p=a.indexAfter(o),D=r&&r[0];return a.node(o).canReplaceWith(p,p,D?D.type:a.node(o+1).type)}function D2(n,i){let e=n.resolve(i),r=e.index();return function eA(n,i){return!(!n||!i||n.isLeaf||!n.canAppend(i))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function A2(n,i,e=i,r=za.empty){if(i==e&&!r.size)return null;let a=n.resolve(i),o=n.resolve(e);return function tA(n,i,e){return!e.openStart&&!e.openEnd&&n.start()==i.start()&&n.parent.canReplace(n.index(),i.index(),e.content)}(a,o,r)?new wh(i,e,r):new kG(a,o,r).fit()}bh.jsonID("replaceAround",Ch);class kG{constructor(i,e,r){this.$from=i,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=Zr.empty;for(let a=0;a<=i.depth;a++){let o=i.node(a);this.frontier.push({type:o.type,match:o.contentMatchAt(i.indexAfter(a))})}for(let a=i.depth;a>0;a--)this.placed=Zr.from(i.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let P=this.findFittable();P?this.placeNodes(P):this.openMore()||this.dropNode()}let i=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,a=this.close(i<0?this.$to:r.doc.resolve(i));if(!a)return null;let o=this.placed,d=r.depth,p=a.depth;for(;d&&p&&1==o.childCount;)o=o.firstChild.content,d--,p--;let D=new za(o,d,p);return i>-1?new Ch(r.pos,i,this.$to.pos,this.$to.end(),D,e):D.size||r.pos!=this.$to.pos?new wh(r.pos,a.pos,D):null}findFittable(){let i=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,a=this.unplaced.openEnd;r<i;r++){let o=e.firstChild;if(e.childCount>1&&(a=0),o.type.spec.isolating&&a<=r){i=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=1==e?i:this.unplaced.openStart;r>=0;r--){let a,o=null;r?(o=I2(this.unplaced.content,r-1).firstChild,a=o.content):a=this.unplaced.content;let d=a.firstChild;for(let p=this.depth;p>=0;p--){let B,{type:D,match:P}=this.frontier[p],te=null;if(1==e&&(d?P.matchType(d.type)||(te=P.fillBefore(Zr.from(d),!1)):o&&D.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:p,parent:o,inject:te};if(2==e&&d&&(B=P.findWrapping(d.type)))return{sliceDepth:r,frontierDepth:p,parent:o,wrap:B};if(o&&P.matchType(o.type))break}}}openMore(){let{content:i,openStart:e,openEnd:r}=this.unplaced,a=I2(i,e);return!(!a.childCount||a.firstChild.isLeaf||(this.unplaced=new za(i,e+1,Math.max(r,a.size+e>=i.size-r?e+1:0)),0))}dropNode(){let{content:i,openStart:e,openEnd:r}=this.unplaced,a=I2(i,e);if(a.childCount<=1&&e>0){let o=i.size-e<=e+a.size;this.unplaced=new za(xx(i,e-1,1),e-1,o?e-1:r)}else this.unplaced=new za(xx(i,e,1),e,r)}placeNodes({sliceDepth:i,frontierDepth:e,parent:r,inject:a,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let ue=0;ue<o.length;ue++)this.openFrontierNode(o[ue]);let d=this.unplaced,p=r?r.content:d.content,D=d.openStart-i,P=0,B=[],{match:te,type:ae}=this.frontier[e];if(a){for(let ue=0;ue<a.childCount;ue++)B.push(a.child(ue));te=te.matchFragment(a)}let oe=p.size+i-(d.content.size-d.openEnd);for(;P<p.childCount;){let ue=p.child(P),Te=te.matchType(ue.type);if(!Te)break;P++,(P>1||0==D||ue.content.size)&&(te=Te,B.push(iA(ue.mark(ae.allowedMarks(ue.marks)),1==P?D:0,P==p.childCount?oe:-1)))}let ge=P==p.childCount;ge||(oe=-1),this.placed=bx(this.placed,e,Zr.from(B)),this.frontier[e].match=te,ge&&oe<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let ue=0,Te=p;ue<oe;ue++){let qe=Te.lastChild;this.frontier.push({type:qe.type,match:qe.contentMatchAt(qe.childCount)}),Te=qe.content}this.unplaced=ge?0==i?za.empty:new za(xx(d.content,i-1,1),i-1,oe<0?d.openEnd:i-1):new za(xx(d.content,i,P),d.openStart,d.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,i=this.frontier[this.depth];if(!i.type.isTextblock||!M2(this.$to,this.$to.depth,i.type,i.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,a=this.$to.after(r);for(;r>1&&a==this.$to.end(--r);)++a;return a}findCloseLevel(i){e:for(let e=Math.min(this.depth,i.depth);e>=0;e--){let{match:r,type:a}=this.frontier[e],o=e<i.depth&&i.end(e+1)==i.pos+(i.depth-(e+1)),d=M2(i,e,a,r,o);if(d){for(let p=e-1;p>=0;p--){let{match:D,type:P}=this.frontier[p],B=M2(i,p,P,D,!0);if(!B||B.childCount)continue e}return{depth:e,fit:d,move:o?i.doc.resolve(i.after(e+1)):i}}}}close(i){let e=this.findCloseLevel(i);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=bx(this.placed,e.depth,e.fit)),i=e.move;for(let r=e.depth+1;r<=i.depth;r++){let a=i.node(r),o=a.type.contentMatch.fillBefore(a.content,!0,i.index(r));this.openFrontierNode(a.type,a.attrs,o)}return i}openFrontierNode(i,e=null,r){let a=this.frontier[this.depth];a.match=a.match.matchType(i),this.placed=bx(this.placed,this.depth,Zr.from(i.create(e,r))),this.frontier.push({type:i,match:i.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Zr.empty,!0);e.childCount&&(this.placed=bx(this.placed,this.frontier.length,e))}}function xx(n,i,e){return 0==i?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(xx(n.firstChild.content,i-1,e)))}function bx(n,i,e){return 0==i?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(bx(n.lastChild.content,i-1,e)))}function I2(n,i){for(let e=0;e<i;e++)n=n.firstChild.content;return n}function iA(n,i,e){if(i<=0)return n;let r=n.content;return i>1&&(r=r.replaceChild(0,iA(r.firstChild,i-1,1==r.childCount?e-1:0))),i>0&&(r=n.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Zr.empty,!0)))),n.copy(r)}function M2(n,i,e,r,a){let o=n.node(i),d=a?n.indexAfter(i):n.index(i);if(d==o.childCount&&!e.compatibleContent(o.type))return null;let p=r.fillBefore(o.content,!0,d);return p&&!function TG(n,i,e){for(let r=e;r<i.childCount;r++)if(!n.allowsMarks(i.child(r).marks))return!0;return!1}(e,o.content,d)?p:null}class Oy extends bh{constructor(i,e,r){super(),this.pos=i,this.attr=e,this.value=r}apply(i){let e=i.nodeAt(this.pos);if(!e)return qu.fail("No node at attribute step's position");let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let a=e.type.create(r,null,e.marks);return qu.fromReplace(i,this.pos,this.pos+1,new za(Zr.from(a),0,e.isLeaf?0:1))}getMap(){return Nf.empty}invert(i){return new Oy(this.pos,this.attr,i.nodeAt(this.pos).attrs[this.attr])}map(i){let e=i.mapResult(this.pos,1);return e.deletedAfter?null:new Oy(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(i,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Oy(e.pos,e.attr,e.value)}}bh.jsonID("attr",Oy);class wx extends bh{constructor(i,e){super(),this.attr=i,this.value=e}apply(i){let e=Object.create(null);for(let a in i.attrs)e[a]=i.attrs[a];e[this.attr]=this.value;let r=i.type.create(e,i.content,i.marks);return qu.ok(r)}getMap(){return Nf.empty}invert(i){return new wx(this.attr,i.attrs[this.attr])}map(i){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(i,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wx(e.attr,e.value)}}bh.jsonID("docAttr",wx);let Ly=class extends Error{};Ly=function n(i){let e=Error.call(this,i);return e.__proto__=n.prototype,e},(Ly.prototype=Object.create(Error.prototype)).constructor=Ly,Ly.prototype.name="TransformError";const R2=Object.create(null);class Oc{constructor(i,e,r){this.$anchor=i,this.$head=e,this.ranges=r||[new RG(i.min(e),i.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let i=this.ranges;for(let e=0;e<i.length;e++)if(i[e].$from.pos!=i[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(i,e=za.empty){let r=e.content.lastChild,a=null;for(let p=0;p<e.openEnd;p++)a=r,r=r.lastChild;let o=i.steps.length,d=this.ranges;for(let p=0;p<d.length;p++){let{$from:D,$to:P}=d[p],B=i.mapping.slice(o);i.replaceRange(B.map(D.pos),B.map(P.pos),p?za.empty:e),0==p&&oA(i,o,(r?r.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(i,e){let r=i.steps.length,a=this.ranges;for(let o=0;o<a.length;o++){let{$from:d,$to:p}=a[o],D=i.mapping.slice(r),P=D.map(d.pos),B=D.map(p.pos);o?i.deleteRange(P,B):(i.replaceRangeWith(P,B,e),oA(i,r,e.isInline?-1:1))}}static findFrom(i,e,r=!1){let a=i.parent.inlineContent?new Vh(i):Py(i.node(0),i.parent,i.pos,i.index(),e,r);if(a)return a;for(let o=i.depth-1;o>=0;o--){let d=e<0?Py(i.node(0),i.node(o),i.before(o+1),i.index(o),e,r):Py(i.node(0),i.node(o),i.after(o+1),i.index(o)+1,e,r);if(d)return d}return null}static near(i,e=1){return this.findFrom(i,e)||this.findFrom(i,-e)||new yp(i.node(0))}static atStart(i){return Py(i,i,0,0,1)||new yp(i)}static atEnd(i){return Py(i,i,i.content.size,i.childCount,-1)||new yp(i)}static fromJSON(i,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=R2[e.type];if(!r)throw new RangeError(`No selection type ${e.type} defined`);return r.fromJSON(i,e)}static jsonID(i,e){if(i in R2)throw new RangeError("Duplicate use of selection JSON ID "+i);return R2[i]=e,e.prototype.jsonID=i,e}getBookmark(){return Vh.between(this.$anchor,this.$head).getBookmark()}}Oc.prototype.visible=!0;class RG{constructor(i,e){this.$from=i,this.$to=e}}let aA=!1;function sA(n){!aA&&!n.parent.inlineContent&&(aA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Vh extends Oc{constructor(i,e=i){sA(i),sA(e),super(i,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(i,e){let r=i.resolve(e.map(this.head));if(!r.parent.inlineContent)return Oc.near(r);let a=i.resolve(e.map(this.anchor));return new Vh(a.parent.inlineContent?a:r,r)}replace(i,e=za.empty){if(super.replace(i,e),e==za.empty){let r=this.$from.marksAcross(this.$to);r&&i.ensureMarks(r)}}eq(i){return i instanceof Vh&&i.anchor==this.anchor&&i.head==this.head}getBookmark(){return new ow(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(i,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Vh(i.resolve(e.anchor),i.resolve(e.head))}static create(i,e,r=e){let a=i.resolve(e);return new this(a,r==e?a:i.resolve(r))}static between(i,e,r){let a=i.pos-e.pos;if((!r||a)&&(r=a>=0?1:-1),!e.parent.inlineContent){let o=Oc.findFrom(e,r,!0)||Oc.findFrom(e,-r,!0);if(!o)return Oc.near(e,r);e=o.$head}return i.parent.inlineContent||(0==a||(i=(Oc.findFrom(i,-r,!0)||Oc.findFrom(i,r,!0)).$anchor).pos<e.pos!=a<0)&&(i=e),new Vh(i,e)}}Oc.jsonID("text",Vh);class ow{constructor(i,e){this.anchor=i,this.head=e}map(i){return new ow(i.map(this.anchor),i.map(this.head))}resolve(i){return Vh.between(i.resolve(this.anchor),i.resolve(this.head))}}class qc extends Oc{constructor(i){let e=i.nodeAfter,r=i.node(0).resolve(i.pos+e.nodeSize);super(i,r),this.node=e}map(i,e){let{deleted:r,pos:a}=e.mapResult(this.anchor),o=i.resolve(a);return r?Oc.near(o):new qc(o)}content(){return new za(Zr.from(this.node),0,0)}eq(i){return i instanceof qc&&i.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new O2(this.anchor)}static fromJSON(i,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qc(i.resolve(e.anchor))}static create(i,e){return new qc(i.resolve(e))}static isSelectable(i){return!i.isText&&!1!==i.type.spec.selectable}}qc.prototype.visible=!1,Oc.jsonID("node",qc);class O2{constructor(i){this.anchor=i}map(i){let{deleted:e,pos:r}=i.mapResult(this.anchor);return e?new ow(r,r):new O2(r)}resolve(i){let e=i.resolve(this.anchor),r=e.nodeAfter;return r&&qc.isSelectable(r)?new qc(e):Oc.near(e)}}class yp extends Oc{constructor(i){super(i.resolve(0),i.resolve(i.content.size))}replace(i,e=za.empty){if(e==za.empty){i.delete(0,i.doc.content.size);let r=Oc.atStart(i.doc);r.eq(i.selection)||i.setSelection(r)}else super.replace(i,e)}toJSON(){return{type:"all"}}static fromJSON(i){return new yp(i)}map(i){return new yp(i)}eq(i){return i instanceof yp}getBookmark(){return OG}}Oc.jsonID("all",yp);const OG={map(){return this},resolve:n=>new yp(n)};function Py(n,i,e,r,a,o=!1){if(i.inlineContent)return Vh.create(n,e);for(let d=r-(a>0?0:1);a>0?d<i.childCount:d>=0;d+=a){let p=i.child(d);if(p.isAtom){if(!o&&qc.isSelectable(p))return qc.create(n,e-(a<0?p.nodeSize:0))}else{let D=Py(n,p,e+a,a<0?p.childCount:0,a,o);if(D)return D}e+=p.nodeSize*a}return null}function oA(n,i,e){let r=n.steps.length-1;if(r<i)return;let d,a=n.steps[r];(a instanceof wh||a instanceof Ch)&&(n.mapping.maps[r].forEach((p,D,P,B)=>{null==d&&(d=B)}),n.setSelection(Oc.near(n.doc.resolve(d),e)))}function uA(n,i){return i&&n?n.bind(i):n}class Cx{constructor(i,e,r){this.name=i,this.init=uA(e.init,r),this.apply=uA(e.apply,r)}}new Cx("doc",{init:n=>n.doc||n.schema.topNodeType.createAndFill(),apply:n=>n.doc}),new Cx("selection",{init:(n,i)=>n.selection||Oc.atStart(i.doc),apply:n=>n.selection}),new Cx("storedMarks",{init:n=>n.storedMarks||null,apply:(n,i,e,r)=>r.selection.$cursor?n.storedMarks:null}),new Cx("scrollToSelection",{init:()=>0,apply:(n,i)=>n.scrolledIntoView?i+1:i});const FG=["ol",0],BG=["ul",0],NG=["li",0],fA={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:n=>({order:n.hasAttribute("start")?+n.getAttribute("start"):1})}],toDOM:n=>1==n.attrs.order?FG:["ol",{start:n.attrs.order},0]};const gA=n=>{const i=(n=>{const i={};return Object.keys(n).forEach(e=>{n[e]&&(i[e]=n[e])}),i})(n);return Object.entries(i).map(([e,r])=>`${(n=>n.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`))(e)}:${r}`).join(";")};Error;const $G={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:n=>({href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")})}],toDOM(n){const{href:i,title:e,target:r}=n.attrs;return["a",{href:i,title:e,target:r},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>"normal"!==n.style.fontWeight&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){const{color:i}=n.attrs;return["span",{style:`color:${i};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){const{backgroundColor:i}=n.attrs;return["span",{style:`background-color:${i};`},0]}}},qG={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(n){const{textAlign:i}=n.style;return{align:n.getAttribute("align")||i||null}}}],toDOM(n){const{align:i}=n.attrs;return["p",{style:gA({textAlign:"left"!==i?i:null})||null},0]}},JG={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){const{textAlign:i}=n.style;return{level:1,align:n.getAttribute("align")||i||null}}},{tag:"h2",getAttrs(n){const{textAlign:i}=n.style;return{level:2,align:n.getAttribute("align")||i||null}}},{tag:"h3",getAttrs(n){const{textAlign:i}=n.style;return{level:3,align:n.getAttribute("align")||i||null}}},{tag:"h4",getAttrs(n){const{textAlign:i}=n.style;return{level:4,align:n.getAttribute("align")||i||null}}},{tag:"h5",getAttrs(n){const{textAlign:i}=n.style;return{level:5,align:n.getAttribute("align")||i||null}}},{tag:"h6",getAttrs(n){const{textAlign:i}=n.style;return{level:6,align:n.getAttribute("align")||i||null}}}],toDOM(n){const{level:i,align:e}=n.attrs;return[`h${i}`,{style:gA({textAlign:"left"!==e?e:null})||null},0]}},tH={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:n=>({src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")})}],toDOM(n){const{src:i,alt:e,title:r,width:a}=n.attrs;return["img",{src:i,alt:e,title:r,width:a}]}},aH={doc:{content:"block+"},text:{group:"inline"},paragraph:qG,blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:JG,hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:tH,list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>NG,defining:!0},content:"paragraph block*"},ordered_list:{...fA,content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>BG},content:"list_item+",group:"block"}},vA=(new class iG{constructor(i){this.cached=Object.create(null);let e=this.spec={};for(let a in i)e[a]=i[a];e.nodes=CD.from(i.nodes),e.marks=CD.from(i.marks||{}),this.nodes=tw.compile(this.spec.nodes,this),this.marks=iw.compile(this.spec.marks,this);let r=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let o=this.nodes[a],d=o.spec.content||"",p=o.spec.marks;o.contentMatch=r[d]||(r[d]=x_.parse(d,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==p?null:p?zD(this,p.split(" ")):""!=p&&o.inlineContent?null:[]}for(let a in this.marks){let o=this.marks[a],d=o.spec.excludes;o.excluded=null==d?[o]:""==d?[]:zD(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(i,e=null,r,a){if("string"==typeof i)i=this.nodeType(i);else{if(!(i instanceof tw))throw new RangeError("Invalid node type: "+i);if(i.schema!=this)throw new RangeError("Node type from different schema used ("+i.name+")")}return i.createChecked(e,r,a)}text(i,e){let r=this.nodes.text;return new ew(r,r.defaultAttrs,i,ql.setFrom(e))}mark(i,e){return"string"==typeof i&&(i=this.marks[i]),i.create(e)}nodeFromJSON(i){return Jg.fromJSON(this,i)}markFromJSON(i){return ql.fromJSON(this,i)}nodeType(i){let e=this.nodes[i];if(!e)throw new RangeError("Unknown node type: "+i);return e}}({marks:$G,nodes:aH}),(n,i)=>!n.selection.empty&&(i&&i(n.tr.deleteSelection().scrollIntoView()),!0));function Fy(n,i,e=!1){for(let r=n;r;r="start"==i?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&1!=r.childCount)return!1}return!1}function B2(n){if(!n.parent.type.spec.isolating)for(let i=n.depth-1;i>=0;i--){if(n.index(i)>0)return n.doc.resolve(n.before(i+1));if(n.node(i).type.spec.isolating)break}return null}function N2(n){if(!n.parent.type.spec.isolating)for(let i=n.depth-1;i>=0;i--){let e=n.node(i);if(n.index(i)+1<e.childCount)return n.doc.resolve(n.after(i+1));if(e.type.spec.isolating)break}return null}function z2(n){for(let i=0;i<n.edgeCount;i++){let{type:e}=n.edge(i);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const bA=function gH(n){return(i,e)=>{let{$from:r,$to:a}=i.selection;if(i.selection instanceof qc&&i.selection.node.isBlock)return!(!r.parentOffset||!yx(i.doc,r.pos)||(e&&e(i.tr.split(r.pos).scrollIntoView()),0));if(!r.parent.isBlock)return!1;if(e){let o=a.parentOffset==a.parent.content.size,d=i.tr;(i.selection instanceof Vh||i.selection instanceof yp)&&d.deleteSelection();let p=0==r.depth?null:z2(r.node(-1).contentMatchAt(r.indexAfter(-1))),D=n&&n(a.parent,o),P=D?[D]:o&&p?[{type:p}]:void 0,B=yx(d.doc,d.mapping.map(r.pos),1,P);if(!P&&!B&&yx(d.doc,d.mapping.map(r.pos),1,p?[{type:p}]:void 0)&&(p&&(P=[{type:p}]),B=!0),B&&(d.split(d.mapping.map(r.pos),1,P),!o&&!r.parentOffset&&r.parent.type!=p)){let te=d.mapping.map(r.before()),ae=d.doc.resolve(te);p&&r.node(-1).canReplaceWith(ae.index(),ae.index()+1,p)&&d.setNodeMarkup(d.mapping.map(r.before()),p)}e(d.scrollIntoView())}return!0}}();function wA(n,i,e){let o,d,r=i.nodeBefore,a=i.nodeAfter;if(r.type.spec.isolating||a.type.spec.isolating)return!1;if(function _H(n,i,e){let r=i.nodeBefore,a=i.nodeAfter,o=i.index();return!(!(r&&a&&r.type.compatibleContent(a.type))||(!r.content.size&&i.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(i.pos-r.nodeSize,i.pos).scrollIntoView()),0):!i.parent.canReplace(o,o+1)||!a.isTextblock&&!D2(n.doc,i.pos)||(e&&e(n.tr.clearIncompatible(i.pos,r.type,r.contentMatchAt(r.childCount)).join(i.pos).scrollIntoView()),0)))}(n,i,e))return!0;let p=i.parent.canReplace(i.index(),i.index()+1);if(p&&(o=(d=r.contentMatchAt(r.childCount)).findWrapping(a.type))&&d.matchType(o[0]||a.type).validEnd){if(e){let te=i.pos+a.nodeSize,ae=Zr.empty;for(let ue=o.length-1;ue>=0;ue--)ae=Zr.from(o[ue].create(null,ae));ae=Zr.from(r.copy(ae));let oe=n.tr.step(new Ch(i.pos-1,te,i.pos,te,new za(ae,1,0),o.length,!0)),ge=te+2*o.length;D2(oe.doc,ge)&&oe.join(ge),e(oe.scrollIntoView())}return!0}let D=Oc.findFrom(i,1),P=D&&D.$from.blockRange(D.$to),B=P&&_x(P);if(null!=B&&B>=i.depth)return e&&e(n.tr.lift(P,B).scrollIntoView()),!0;if(p&&Fy(a,"start",!0)&&Fy(r,"end")){let te=r,ae=[];for(;ae.push(te),!te.isTextblock;)te=te.lastChild;let oe=a,ge=1;for(;!oe.isTextblock;oe=oe.firstChild)ge++;if(te.canReplace(te.childCount,te.childCount,oe.content)){if(e){let ue=Zr.empty;for(let qe=ae.length-1;qe>=0;qe--)ue=Zr.from(ae[qe].copy(ue));e(n.tr.step(new Ch(i.pos-ae.length,i.pos+a.nodeSize,i.pos+ge,i.pos+a.nodeSize-ge,new za(ue,ae.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function CA(n){return function(i,e){let r=i.selection,a=n<0?r.$from:r.$to,o=a.depth;for(;a.node(o).isInline;){if(!o)return!1;o--}return!!a.node(o).isTextblock&&(e&&e(i.tr.setSelection(Vh.create(i.doc,n<0?a.start(o):a.end(o)))),!0)}}const yH=CA(-1),xH=CA(1);function Y2(n,i=null){return function(e,r){let a=!1;for(let o=0;o<e.selection.ranges.length&&!a;o++){let{$from:{pos:d},$to:{pos:p}}=e.selection.ranges[o];e.doc.nodesBetween(d,p,(D,P)=>{if(a)return!1;if(D.isTextblock&&!D.hasMarkup(n,i))if(D.type==n)a=!0;else{let B=e.doc.resolve(P),te=B.index();a=B.parent.canReplaceWith(te,te+1,n)}})}if(!a)return!1;if(r){let o=e.tr;for(let d=0;d<e.selection.ranges.length;d++){let{$from:{pos:p},$to:{pos:D}}=e.selection.ranges[d];o.setBlockType(p,D,n,i)}r(o.scrollIntoView())}return!0}}function EA(n,i=null){return function(e,r){let{empty:a,$cursor:o,ranges:d}=e.selection;if(a&&!o||!function wH(n,i,e){for(let r=0;r<i.length;r++){let{$from:a,$to:o}=i[r],d=0==a.depth&&n.inlineContent&&n.type.allowsMarkType(e);if(n.nodesBetween(a.pos,o.pos,p=>{if(d)return!1;d=p.inlineContent&&p.type.allowsMarkType(e)}),d)return!0}return!1}(e.doc,d,n))return!1;if(r)if(o)n.isInSet(e.storedMarks||o.marks())?r(e.tr.removeStoredMark(n)):r(e.tr.addStoredMark(n.create(i)));else{let p=!1,D=e.tr;for(let P=0;!p&&P<d.length;P++){let{$from:B,$to:te}=d[P];p=e.doc.rangeHasMark(B.pos,te.pos,n)}for(let P=0;P<d.length;P++){let{$from:B,$to:te}=d[P];if(p)D.removeMark(B.pos,te.pos,n);else{let ae=B.pos,oe=te.pos,ge=B.nodeAfter,ue=te.nodeBefore,Te=ge&&ge.isText?/^\s*/.exec(ge.text)[0].length:0,qe=ue&&ue.isText?/\s*$/.exec(ue.text)[0].length:0;ae+Te<oe&&(ae+=Te,oe-=qe),D.addMark(ae,oe,n.create(i))}}r(D.scrollIntoView())}return!0}}function G2(...n){return function(i,e,r){for(let a=0;a<n.length;a++)if(n[a](i,e,r))return!0;return!1}}let H2=G2(vA,(n,i,e)=>{let r=function _A(n,i){let{$cursor:e}=n.selection;return!e||(i?!i.endOfTextblock("backward",n):e.parentOffset>0)?null:e}(n,e);if(!r)return!1;let a=B2(r);if(!a){let d=r.blockRange(),p=d&&_x(d);return null!=p&&(i&&i(n.tr.lift(d,p).scrollIntoView()),!0)}let o=a.nodeBefore;if(!o.type.spec.isolating&&wA(n,a,i))return!0;if(0==r.parent.content.size&&(Fy(o,"end")||qc.isSelectable(o))){let d=A2(n.doc,r.before(),r.after(),za.empty);if(d&&d.slice.size<d.to-d.from){if(i){let p=n.tr.step(d);p.setSelection(Fy(o,"end")?Oc.findFrom(p.doc.resolve(p.mapping.map(a.pos,-1)),-1):qc.create(p.doc,a.pos-o.nodeSize)),i(p.scrollIntoView())}return!0}}return!(!o.isAtom||a.depth!=r.depth-1||(i&&i(n.tr.delete(a.pos-o.nodeSize,a.pos).scrollIntoView()),0))},(n,i,e)=>{let{$head:r,empty:a}=n.selection,o=r;if(!a)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=B2(r)}let d=o&&o.nodeBefore;return!(!d||!qc.isSelectable(d)||(i&&i(n.tr.setSelection(qc.create(n.doc,o.pos-d.nodeSize)).scrollIntoView()),0))}),kA=G2(vA,(n,i,e)=>{let r=function xA(n,i){let{$cursor:e}=n.selection;return!e||(i?!i.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}(n,e);if(!r)return!1;let a=N2(r);if(!a)return!1;let o=a.nodeAfter;if(wA(n,a,i))return!0;if(0==r.parent.content.size&&(Fy(o,"start")||qc.isSelectable(o))){let d=A2(n.doc,r.before(),r.after(),za.empty);if(d&&d.slice.size<d.to-d.from){if(i){let p=n.tr.step(d);p.setSelection(Fy(o,"start")?Oc.findFrom(p.doc.resolve(p.mapping.map(a.pos)),1):qc.create(p.doc,p.mapping.map(a.pos))),i(p.scrollIntoView())}return!0}}return!(!o.isAtom||a.depth!=r.depth-1||(i&&i(n.tr.delete(a.pos,a.pos+o.nodeSize).scrollIntoView()),0))},(n,i,e)=>{let{$head:r,empty:a}=n.selection,o=r;if(!a)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=N2(r)}let d=o&&o.nodeAfter;return!(!d||!qc.isSelectable(d)||(i&&i(n.tr.setSelection(qc.create(n.doc,o.pos)).scrollIntoView()),0))});const hv={Enter:G2((n,i)=>{let{$head:e,$anchor:r}=n.selection;return!(!e.parent.type.spec.code||!e.sameParent(r)||(i&&i(n.tr.insertText("\n").scrollIntoView()),0))},(n,i)=>{let e=n.selection,{$from:r,$to:a}=e;if(e instanceof yp||r.parent.inlineContent||a.parent.inlineContent)return!1;let o=z2(a.parent.contentMatchAt(a.indexAfter()));if(!o||!o.isTextblock)return!1;if(i){let d=(!r.parentOffset&&a.index()<a.parent.childCount?r:a).pos,p=n.tr.insert(d,o.createAndFill());p.setSelection(Vh.create(p.doc,d+1)),i(p.scrollIntoView())}return!0},(n,i)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(yx(n.doc,o))return i&&i(n.tr.split(o).scrollIntoView()),!0}let r=e.blockRange(),a=r&&_x(r);return null!=a&&(i&&i(n.tr.lift(r,a).scrollIntoView()),!0)},bA),"Mod-Enter":(n,i)=>{let{$head:e,$anchor:r}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(r))return!1;let a=e.node(-1),o=e.indexAfter(-1),d=z2(a.contentMatchAt(o));if(!d||!a.canReplaceWith(o,o,d))return!1;if(i){let p=e.after(),D=n.tr.replaceWith(p,p,d.createAndFill());D.setSelection(Oc.near(D.doc.resolve(p),1)),i(D.scrollIntoView())}return!0},Backspace:H2,"Mod-Backspace":H2,"Shift-Backspace":H2,Delete:kA,"Mod-Delete":kA,"Mod-a":(n,i)=>(i&&i(n.tr.setSelection(new yp(n.doc))),!0)},EH={"Ctrl-h":hv.Backspace,"Alt-Backspace":hv["Mod-Backspace"],"Ctrl-d":hv.Delete,"Ctrl-Alt-Backspace":hv["Mod-Delete"],"Alt-Delete":hv["Mod-Delete"],"Alt-d":hv["Mod-Delete"],"Ctrl-a":yH,"Ctrl-e":xH};for(let n in hv)EH[n]=hv[n];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const V2=(n,i)=>{const{from:e,$from:r,to:a,empty:o}=n.selection;return o?!!i.isInSet(n.storedMarks||r.marks()):n.doc.rangeHasMark(e,a,i)},TA=(n,i,e={})=>{const{selection:r}=n,{$from:a,to:o}=r,d=((n,i)=>{for(let e=i.depth;e>0;e-=1)if(i.node(e).type===n)return i.node(e).type;return null})(i,a);return Object.entries(e).length&&d?o<=a.end()&&a.parent.hasMarkup(i,e):!!d},SA=n=>{const i=[],{selection:{from:e,to:r}}=n;return n.doc.nodesBetween(e,r,a=>{i.push(a)}),i},DA=(n,i,e)=>{for(const r of i){const{$from:a,$to:o}=r;let d=0===a.depth&&n.type.allowsMarkType(e);if(n.nodesBetween(a.pos,o.pos,p=>!d&&(d=p.inlineContent&&p.type.allowsMarkType(e),!0)),d)return!0}return!1},AA=(n,i={})=>(e,r)=>{const{tr:a,selection:o}=e,{empty:d,ranges:p,$from:D,$to:P}=o;if(d&&o instanceof Vh){const{$cursor:B}=o;if(!B||!DA(e.doc,p,n)||(a.addStoredMark(n.create(i)),!a.storedMarksSet))return!1;r?.(a)}else{if(a.addMark(D.pos,P.pos,n.create(i)),!a.docChanged)return!1;r?.(a.scrollIntoView())}return!0};var IH=Zt(4476);class By{constructor(i){this.name=i}apply(){return(i,e)=>{const{schema:r}=i,a=r.marks[this.name];return!!a&&AA(a)(i,e)}}toggle(){return(i,e)=>{const{schema:r}=i,a=r.marks[this.name];return!!a&&EA(a)(i,e)}}isActive(i){const{schema:e}=i,r=e.marks[this.name];return!!r&&V2(i,r)}canExecute(i){return this.toggle()(i)}}class cw{constructor(i=!1){this.isBulletList=!1,this.isBulletList=i}getType(i){return this.isBulletList?i.nodes.bullet_list:i.nodes.ordered_list}toggle(){return(i,e)=>{const{schema:r}=i,a=this.getType(r);return!!a&&(this.isActive(i)?function GG(n){return function(i,e){let{$from:r,$to:a}=i.selection,o=r.blockRange(a,d=>d.childCount>0&&d.firstChild.type==n);return!!o&&(!e||(r.node(o.depth-1).type==n?function HG(n,i,e,r){let a=n.tr,o=r.end,d=r.$to.end(r.depth);o<d&&(a.step(new Ch(o-1,d,o,d,new za(Zr.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new Qb(a.doc.resolve(r.$from.pos),a.doc.resolve(d),r.depth));const p=_x(r);if(null==p)return!1;a.lift(r,p);let D=a.mapping.map(o,-1)-1;return D2(a.doc,D)&&a.join(D),i(a.scrollIntoView()),!0}(i,e,n,o):function VG(n,i,e){let r=n.tr,a=e.parent;for(let oe=e.end,ge=e.endIndex-1,ue=e.startIndex;ge>ue;ge--)oe-=a.child(ge).nodeSize,r.delete(oe-1,oe+1);let o=r.doc.resolve(e.start),d=o.nodeAfter;if(r.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let p=0==e.startIndex,D=e.endIndex==a.childCount,P=o.node(-1),B=o.index(-1);if(!P.canReplace(B+(p?0:1),B+1,d.content.append(D?Zr.empty:Zr.from(a))))return!1;let te=o.pos,ae=te+d.nodeSize;return r.step(new Ch(te-(p?1:0),ae+(D?1:0),te+1,ae-1,new za((p?Zr.empty:Zr.from(a.copy(Zr.empty))).append(D?Zr.empty:Zr.from(a.copy(Zr.empty))),p?0:1,D?0:1),p?0:1)),i(r.scrollIntoView()),!0}(i,e,o)))}}(r.nodes.list_item)(i,e):function zG(n,i=null){return function(e,r){let{$from:a,$to:o}=e.selection,d=a.blockRange(o),p=!1,D=d;if(!d)return!1;if(d.depth>=2&&a.node(d.depth-1).type.compatibleContent(n)&&0==d.startIndex){if(0==a.index(d.depth-1))return!1;let B=e.doc.resolve(d.start-2);D=new Qb(B,B,d.depth),d.endIndex<d.parent.childCount&&(d=new Qb(a,e.doc.resolve(o.end(d.depth)),d.depth)),p=!0}let P=JD(D,n,i,d);return!!P&&(r&&r(function YG(n,i,e,r,a){let o=Zr.empty;for(let B=e.length-1;B>=0;B--)o=Zr.from(e[B].type.create(e[B].attrs,o));n.step(new Ch(i.start-(r?2:0),i.end,i.start,i.end,new za(o,0,0),e.length,!0));let d=0;for(let B=0;B<e.length;B++)e[B].type==a&&(d=B+1);let p=e.length-d,D=i.start+e.length-(r?2:0),P=i.parent;for(let B=i.startIndex,te=i.endIndex,ae=!0;B<te;B++,ae=!1)!ae&&yx(n.doc,D,p)&&(n.split(D,p),D+=2*p),D+=P.child(B).nodeSize;return n}(e.tr,d,P,p,n).scrollIntoView()),!0)}}(a)(i,e))}}isActive(i){const{schema:e}=i,r=this.getType(e);return!!r&&TA(i,r)}canExecute(i){return this.toggle()(i)}}class b_{constructor(i){this.level=i}apply(){return(i,e)=>{const{schema:r}=i,a=r.nodes.heading;return!!a&&Y2(a)(i,e)}}toggle(){return(i,e)=>{const{schema:r,selection:a,doc:o}=i,d=r.nodes.heading;if(!d)return!1;const p=a.$from.before(1),P=o.nodeAt(p)?.attrs??{};return this.isActive(i)?Y2(r.nodes.paragraph,P)(i,e):Y2(d,{...P,level:this.level})(i,e)}}isActive(i){const{schema:e}=i,r=SA(i),a=e.nodes.heading;if(!a)return!1;const o=[a,e.nodes.text,e.nodes.blockquote];return!!r.filter(D=>o.includes(D.type)).find(D=>D.attrs.level===this.level)}canExecute(i){return this.toggle()(i)}}class Tx{constructor(i){this.align=i}toggle(){return(i,e)=>{const{doc:r,selection:a,tr:o,schema:d}=i,{from:p,to:D}=a;let P=!1;return r.nodesBetween(p,D,(B,te)=>{const ae=B.type;return[d.nodes.paragraph,d.nodes.heading].includes(ae)&&(P=!0,o.setNodeMarkup(te,ae,{...B.attrs,align:this.align})),!0}),!!P&&(o.docChanged&&e?.(o),!0)}}isActive(i){return!!SA(i).find(a=>a.attrs.align===this.align)}canExecute(i){return this.toggle()(i)}}const u9={strict:!0};let Ny=class{constructor(i,e="color"){this.name=i,this.attrName=e}apply(i){return(e,r)=>{const{schema:a,selection:o,doc:d}=e,p=a.marks[this.name];if(!p)return!1;const{from:D,to:P,empty:B}=o;if(!B&&D+1===P){const te=d.nodeAt(D);if(te?.isAtom&&!te.isText&&te.isLeaf)return!1}return AA(p,i)(e,r)}}isActive(i){const{schema:e}=i,r=e.marks[this.name];return!!r&&V2(i,r)}getActiveColors(i){if(!this.isActive(i))return[];const{schema:e}=i;return(n=>{let i=[];const{selection:e,storedMarks:r}=n,{from:a,to:o,empty:d,$from:p}=e;return d?i=r||p.marks():n.doc.nodesBetween(a,o,D=>{i=[...i,...D.marks]}),i})(i).filter(o=>o.type===e.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(i,e)=>{const{schema:r}=i,a=r.marks[this.name];return!!a&&(n=a,(i,e)=>{const{tr:r,selection:a,storedMarks:o,doc:d}=i,{empty:p,ranges:D}=a;if(p&&a instanceof Vh){const{$cursor:P}=a;if(!P||!DA(i.doc,D,n))return!1;if(n.isInSet(o||P.marks()))return r.removeStoredMark(n),e?.(r),!0}else{for(const P of D){const{$from:B,$to:te}=P;d.rangeHasMark(B.pos,te.pos,n)&&r.removeMark(B.pos,te.pos,n)}if(!r.docChanged)return!1;e?.(r.scrollIntoView())}return!1})(i,e);var n}}canExecute(i){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(i)}};const d9=["link"];new By("strong"),new By("em"),new By("code"),new By("u"),new By("s"),new class l9{toggle(){return(i,e)=>{const{schema:r}=i,a=r.nodes.blockquote;return!!a&&(this.isActive(i)?((n,i)=>{let{$from:e,$to:r}=n.selection,a=e.blockRange(r),o=a&&_x(a);return null!=o&&(i&&i(n.tr.lift(a,o).scrollIntoView()),!0)})(i,e):function bH(n,i=null){return function(e,r){let{$from:a,$to:o}=e.selection,d=a.blockRange(o),p=d&&JD(d,n,i);return!!p&&(r&&r(e.tr.wrap(d,p).scrollIntoView()),!0)}}(a)(i,e))}}isActive(i){const{schema:e}=i,r=e.nodes.blockquote;return!!r&&TA(i,r)}canExecute(i){return this.toggle()(i)}},new class c9{insert(){return(i,e)=>{const{schema:r,tr:a}=i,o=r.nodes.horizontal_rule;return!!o&&(e(a.replaceSelectionWith(o.create()).scrollIntoView()),!0)}}canExecute(i){return((n,i)=>{const{$from:e}=n.selection;for(let r=e.depth;r>=0;r-=1){const a=e.index(r);if(e.node(r).canReplaceWith(a,a,i))return!0}return!1})(i,i.schema.nodes.horizontal_rule)}},new class h9{insert(){return(i,e)=>{const{tr:r}=i,{ranges:a,empty:o}=r.selection;return o||(Object.entries(i.schema.marks).forEach(([d,p])=>{d9.includes(d)||a.forEach(D=>{r.removeMark(D.$from.pos,D.$to.pos,p)})}),e(r)),!0}}canExecute(){return!0}},new cw(!0),new cw(!1),new b_(1),new b_(2),new b_(3),new b_(4),new b_(5),new b_(6),new Tx("left"),new Tx("center"),new Tx("right"),new Tx("justify"),new class{update(i){return(e,r)=>{const{schema:a,selection:o}=e,d=a.marks.link;return!(!d||o.empty)&&EA(d,i)(e,r)}}insert(i,e){return(r,a)=>{const{schema:o,tr:d}=r;if(!o.marks.link)return!1;const P=o.text(i,[o.marks.link.create({href:e.href,title:e.title??i,target:e.target??"_blank"})]);return d.replaceSelectionWith(P,!1).scrollIntoView(),!!d.docChanged&&(a?.(d),!0)}}isActive(i,e=u9){if(e.strict)return!0;const{schema:r}=i,a=r.marks.link;return!!a&&V2(i,a)}remove(i,e){return((n,i)=>{const{doc:e,selection:r,tr:a}=n,{$head:{pos:o},from:d,to:p}=r;if(d===p){const D=e.resolve(o),P=o-D.textOffset,B=P+D.parent.child(D.index()).nodeSize;a.removeMark(P,B)}else a.removeMark(d,p);return!!a.docChanged&&(i?.(a),!0)})(i,e)}canExecute(i){const e={href:""};return this.insert("Exec",e)(i)||this.update(e)(i)}},new class{insert(i,e){return(r,a)=>{const{schema:o,tr:d,selection:p}=r,D=o.nodes.image;if(!D)return!1;const P={width:null,src:i,...e};!P.width&&p instanceof qc&&p.node.type===D&&(P.width=p.node.attrs.width),d.replaceSelectionWith(D.createAndFill(P));const B=d.doc.resolve(d.selection.anchor-d.selection.$anchor.nodeBefore.nodeSize);return d.setSelection(new qc(B)).scrollIntoView(),!!d.docChanged&&(a?.(d),!0)}}isActive(i){const{selection:e}=i;return e instanceof qc&&"image"===e.node.type.name}},new Ny("text_color","color"),new Ny("text_background_color","backgroundColor");const j2={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class O9{constructor(i={}){this.locals=j2,this.get=e=>{const r=this.locals[e];return r?(0,G7.X)(r)?r:(0,wD.of)(r):(0,wD.of)("")},this.locals={...j2,...i}}}const LA={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n',path:"<path></path>"};class iV{static get(i,e="currentColor"){const r=LA[i];return r&&(r.includes("<path")||r.includes("<g"))?`\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 24 24"\n          fill=${e}\n          height=20\n          width=20\n        >\n          ${r}\n        </svg>\n      `:r}}let $2=(()=>{class n{constructor(){this.locals={},this.icons={}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nV=(()=>{class n{constructor(e){this.config=e}get locals(){return new O9(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:iV.get(e)}static#e=this.\u0275fac=function(r){return new(r||n)(t.CoB($2,8))};static#t=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const PA=n=>({locals:n.locals??{},icons:n.icons??{}});let rV=(()=>{class n{constructor(e){this.sanitizer=e}transform(e){return(n=>window.trustedTypes?.isHTML(n)??!1)(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(IH.mI,16))};static#t=this.\u0275pipe=t.UTH({name:"sanitizeHtml",type:n,pure:!0})}return n})(),aV=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({providers:[rV],imports:[Me.MD,j.sl]})}return n})();const uw=new t.UbH("NgxEditorConfig"),FA={locals:j2,icons:LA};let sV=(()=>{class n{static forRoot(e=FA){return{ngModule:n,providers:[{provide:uw,useValue:e},{provide:$2,useFactory:PA,deps:[uw]}]}}static forChild(e=FA){return{ngModule:n,providers:[{provide:uw,useValue:e},{provide:$2,useFactory:PA,deps:[uw]},nV]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[Me.MD,aV]})}return n})();typeof navigator<"u"&&/Mac/.test(navigator.platform);var bV=Zt(6900);Zt(1176),new t.UbH("DROPZONE_CONFIG");let wV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=t.a4G({type:n});static \u0275inj=t.s3X({imports:[Me.MD,Me.MD]})}return n})();var CV=Zt(112),EV=Zt(5448),YA=Zt(7773),kV=Zt(560),SV=Zt(3120);function GA(n,i=CV.M,e){const r=(0,SV.k)(n,i);return function TV(n,i){return(0,EV.i)((e,r)=>{const{leading:a=!0,trailing:o=!1}=i??{};let d=!1,p=null,D=null,P=!1;const B=()=>{D?.unsubscribe(),D=null,o&&(oe(),P&&r.complete())},te=()=>{D=null,P&&r.complete()},ae=ge=>D=(0,kV.Uv)(n(ge)).subscribe((0,YA.e)(r,B,te)),oe=()=>{if(d){d=!1;const ge=p;p=null,r.next(ge),!P&&ae(ge)}};e.subscribe((0,YA.e)(r,ge=>{d=!0,p=ge,(!D||D.closed)&&(a?oe():ae(ge))},()=>{P=!0,(!(o&&d&&D)||D.closed)&&r.complete()}))})}(()=>r,e)}var HA=Zt(9212),VA=Zt(4e3),UA=Zt(6684),zf=typeof window<"u"?window:{screen:{},navigator:{}},zy=(zf.matchMedia||function(){return{matches:!1}}).bind(zf),jA=!1,$A=function(){};zf.addEventListener&&zf.addEventListener("p",$A,{get passive(){return jA=!0}}),zf.removeEventListener&&zf.removeEventListener("p",$A,!1);var WA=jA,W2="ontouchstart"in zf,qA=(W2||"TouchEvent"in zf&&zy("(any-pointer: coarse)"),zf.navigator.userAgent||"");zy("(pointer: coarse)").matches&&/iPad|Macintosh/.test(qA)&&Math.min(zf.screen.width||0,zf.screen.height||0);function OV(n,i){}function LV(n,i){1&n&&t.yuY(0,OV,0,0,"ng-template")}(zy("(pointer: coarse)").matches||!zy("(pointer: fine)").matches&&W2)&&/Windows.*Firefox/.test(qA),zy("(any-pointer: fine)").matches||zy("(any-hover: hover)");const PV=(n,i,e)=>({tooltip:n,placement:i,content:e});function FV(n,i){if(1&n&&(t.SAx(0),t.yuY(1,LV,1,0,null,1),t.k70()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.uAc(2,PV,e.tooltip,e.placement,e.content))}}function BV(n,i){if(1&n&&(t.SAx(0),t.I0R(1,"div",2),t.OEk(2),t.C$Y(),t.k70()),2&n){const e=t.GaO();t.yG2(),t.e48("title",e.tooltip)("data-tooltip-placement",e.placement),t.yG2(),t.oRS(" ",e.content," ")}}const NV=["tooltipTemplate"],zV=["leftOuterSelectionBar"],YV=["rightOuterSelectionBar"],GV=["fullBar"],HV=["selectionBar"],VV=["minHandle"],UV=["maxHandle"],jV=["floorLabel"],$V=["ceilLabel"],WV=["minHandleLabel"],XV=["maxHandleLabel"],qV=["combinedLabel"],ZV=["ticksElement"];function KV(n,i){if(1&n&&t.wR5(0,"ngx-slider-tooltip-wrapper",32),2&n){const e=t.GaO().$implicit,r=t.GaO();t.E7m("template",r.tooltipTemplate)("tooltip",e.valueTooltip)("placement",e.valueTooltipPlacement)("content",e.value)}}function JV(n,i){if(1&n&&t.wR5(0,"span",33),2&n){const e=t.GaO().$implicit;t.E7m("innerText",e.legend)}}function QV(n,i){if(1&n&&t.wR5(0,"span",34),2&n){const e=t.GaO().$implicit;t.E7m("innerHTML",e.legend,t.E3n)}}const eU=n=>({"ngx-slider-selected":n});function tU(n,i){if(1&n&&(t.I0R(0,"span",27),t.wR5(1,"ngx-slider-tooltip-wrapper",28),t.yuY(2,KV,1,4,"ngx-slider-tooltip-wrapper",29)(3,JV,1,1,"span",30)(4,QV,1,1,"span",31),t.C$Y()),2&n){const e=i.$implicit,r=t.GaO();t.E7m("ngClass",t.S45(8,eU,e.selected))("ngStyle",e.style),t.yG2(),t.E7m("template",r.tooltipTemplate)("tooltip",e.tooltip)("placement",e.tooltipPlacement),t.yG2(),t.E7m("ngIf",null!=e.value),t.yG2(),t.E7m("ngIf",null!=e.legend&&!1===r.allowUnsafeHtmlInSlider),t.yG2(),t.E7m("ngIf",null!=e.legend&&(null==r.allowUnsafeHtmlInSlider||r.allowUnsafeHtmlInSlider))}}var Wm=function(n){return n[n.Low=0]="Low",n[n.High=1]="High",n[n.Floor=2]="Floor",n[n.Ceil=3]="Ceil",n[n.TickValue=4]="TickValue",n}(Wm||{});class dw{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1}const JA=new t.UbH("AllowUnsafeHtmlInSlider");var ya=function(n){return n[n.Min=0]="Min",n[n.Max=1]="Max",n}(ya||{});class iU{value;highValue;pointerType}class nr{static isNullOrUndefined(i){return null==i}static areArraysEqual(i,e){if(i.length!==e.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==e[r])return!1;return!0}static linearValueToPosition(i,e,r){return(i-e)/(r-e)}static logValueToPosition(i,e,r){return((i=Math.log(i))-(e=Math.log(e)))/((r=Math.log(r))-e)}static linearPositionToValue(i,e,r){return i*(r-e)+e}static logPositionToValue(i,e,r){return e=Math.log(e),r=Math.log(r),Math.exp(i*(r-e)+e)}static findStepIndex(i,e){const r=e.map(o=>Math.abs(i-o.value));let a=0;for(let o=0;o<e.length;o++)r[o]!==r[a]&&r[o]<r[a]&&(a=o);return a}}class fv{static isTouchEvent(i){return void 0!==window.TouchEvent?i instanceof TouchEvent:void 0!==i.touches}static isResizeObserverAvailable(){return void 0!==window.ResizeObserver}}class Su{static roundToPrecisionLimit(i,e){return+i.toPrecision(e)}static isModuloWithinPrecisionLimit(i,e,r){const a=Math.pow(10,-r);return Math.abs(i%e)<=a||Math.abs(Math.abs(i%e)-e)<=a}static clampToRange(i,e,r){return Math.min(Math.max(i,e),r)}}class QA{eventName=null;events=null;eventsSubscription=null;teardownCallback=null}class eI{renderer;constructor(i){this.renderer=i}attachPassiveEventListener(i,e,r,a){if(!0!==WA)return this.attachEventListener(i,e,r,a);const o=new QA;o.eventName=e,o.events=new Hg.E;const d=p=>{o.events.next(p)};return i.addEventListener(e,d,{passive:!0,capture:!1}),o.teardownCallback=()=>{i.removeEventListener(e,d,{passive:!0,capture:!1})},o.eventsSubscription=o.events.pipe(nr.isNullOrUndefined(a)?(0,HA.y)(()=>{}):GA(a,void 0,{leading:!0,trailing:!0})).subscribe(p=>{r(p)}),o}detachEventListener(i){nr.isNullOrUndefined(i.eventsSubscription)||(i.eventsSubscription.unsubscribe(),i.eventsSubscription=null),nr.isNullOrUndefined(i.events)||(i.events.complete(),i.events=null),nr.isNullOrUndefined(i.teardownCallback)||(i.teardownCallback(),i.teardownCallback=null)}attachEventListener(i,e,r,a){const o=new QA;return o.eventName=e,o.events=new Hg.E,o.teardownCallback=this.renderer.listen(i,e,p=>{o.events.next(p)}),o.eventsSubscription=o.events.pipe(nr.isNullOrUndefined(a)?(0,HA.y)(()=>{}):GA(a,void 0,{leading:!0,trailing:!0})).subscribe(p=>{r(p)}),o}}let pv=(()=>{class n{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(e,r,a){this.elemRef=e,this.renderer=r,this.changeDetectionRef=a,this.eventListenerHelper=new eI(this.renderer)}setAlwaysHide(e){this._alwaysHide=e,this.visibility=e?"hidden":"visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return!this.alwaysHide&&0!==this.opacity}setVertical(e){this._vertical=e,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(e){this._scale=e}setRotate(e){this._rotate=e,this.transform="rotate("+e+"deg)"}getRotate(){return this._rotate}setPosition(e){this._position!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=e,this._vertical?this.bottom=Math.round(e)+"px":this.left=Math.round(e)+"px"}calculateDimension(){const e=this.getBoundingClientRect();this._dimension=this.vertical?(e.bottom-e.top)*this.scale:(e.right-e.left)*this.scale}setDimension(e){this._dimension!==e&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=e,this._vertical?this.height=Math.round(e)+"px":this.width=Math.round(e)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(e,r,a){const o=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,e,r,a);this.eventListeners.push(o)}onPassive(e,r,a){const o=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,e,r,a);this.eventListeners.push(o)}off(e){let r,a;nr.isNullOrUndefined(e)?(r=[],a=this.eventListeners):(r=this.eventListeners.filter(o=>o.eventName!==e),a=this.eventListeners.filter(o=>o.eventName===e));for(const o of a)this.eventListenerHelper.detachEventListener(o);this.eventListeners=r}isRefDestroyed(){return nr.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(r){return new(r||n)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9))};static \u0275dir=t.Sc5({type:n,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(r,a){2&r&&t.m4B("opacity",a.opacity)("visibility",a.visibility)("left",a.left)("bottom",a.bottom)("height",a.height)("width",a.width)("transform",a.transform)}})}return n})(),X2=(()=>{class n extends pv{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}constructor(e,r,a){super(e,r,a)}static \u0275fac=function(r){return new(r||n)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9))};static \u0275dir=t.Sc5({type:n,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(r,a){2&r&&(t.e48("role",a.role)("tabindex",a.tabindex)("aria-orientation",a.ariaOrientation)("aria-label",a.ariaLabel)("aria-labelledby",a.ariaLabelledBy)("aria-valuenow",a.ariaValueNow)("aria-valuetext",a.ariaValueText)("aria-valuemin",a.ariaValueMin)("aria-valuemax",a.ariaValueMax),t.eAK("ngx-slider-active",a.active))},features:[t.eg9]})}return n})(),Yy=(()=>{class n extends pv{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(e,r,a,o){super(e,r,a),this.allowUnsafeHtmlInSlider=o}setValue(e){let r=!1;!this.alwaysHide&&(nr.isNullOrUndefined(this.value)||this.value.length!==e.length||this.value.length>0&&0===this.dimension)&&(r=!0),this._value=e,!1===this.allowUnsafeHtmlInSlider?this.elemRef.nativeElement.innerText=e:this.elemRef.nativeElement.innerHTML=e,r&&this.calculateDimension()}static \u0275fac=function(r){return new(r||n)(t.GI1(t.GMv),t.GI1(t.q87),t.GI1(t.kD9),t.GI1(JA,8))};static \u0275dir=t.Sc5({type:n,selectors:[["","ngxSliderLabel",""]],features:[t.eg9]})}return n})(),nU=(()=>{class n{template;tooltip;placement;content;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=t.In1({type:n,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(r,a){1&r&&t.yuY(0,FV,2,6,"ng-container",0)(1,BV,3,3,"ng-container",0),2&r&&(t.E7m("ngIf",a.template),t.yG2(),t.E7m("ngIf",!a.template))},dependencies:[Me.u_,Me.XV],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return n})();class rU{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null}class tI{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0}class hw{value;highValue;static compare(i,e){return!(nr.isNullOrUndefined(i)&&nr.isNullOrUndefined(e)||nr.isNullOrUndefined(i)!==nr.isNullOrUndefined(e))&&i.value===e.value&&i.highValue===e.highValue}}class iI extends hw{forceChange;static compare(i,e){return!(nr.isNullOrUndefined(i)&&nr.isNullOrUndefined(e)||nr.isNullOrUndefined(i)!==nr.isNullOrUndefined(e))&&i.value===e.value&&i.highValue===e.highValue&&i.forceChange===e.forceChange}}const aU={provide:j.Y6,useExisting:(0,t.wd)(()=>sU),multi:!0};let sU=(()=>{class n{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;value=null;valueChange=new t._w7;highValue=null;highValueChange=new t._w7;options=new dw;userChangeStart=new t._w7;userChange=new t._w7;userChangeEnd=new t._w7;manualRefreshSubscription;set manualRefresh(e){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=e.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(e){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=e.subscribe(r=>{this.focusPointer(r)})}get range(){return!nr.isNullOrUndefined(this.value)&&!nr.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Hg.E;inputModelChangeSubscription=null;outputModelChangeSubject=new Hg.E;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new dw;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new tI;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(e,r,a,o,d){this.renderer=e,this.elementRef=r,this.changeDetectionRef=a,this.zone=o,this.allowUnsafeHtmlInSlider=d,this.eventListenerHelper=new eI(this.renderer)}ngOnInit(){this.viewOptions=new dw,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(e){!nr.isNullOrUndefined(e.options)&&JSON.stringify(e.options.previousValue)!==JSON.stringify(e.options.currentValue)&&this.onChangeOptions(),(!nr.isNullOrUndefined(e.value)||!nr.isNullOrUndefined(e.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(e){e instanceof Array?(this.value=e[0],this.highValue=e[1]):this.value=e,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.viewOptions.disabled=e,this.updateDisabledState()}setAriaLabel(e){this.viewOptions.ariaLabel=e,this.updateAriaLabel()}onResize(e){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe((0,VA.a)(iI.compare),(0,UA.I)(e=>!e.forceChange&&!e.internalChange)).subscribe(e=>this.applyInputModelChange(e))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe((0,VA.a)(iI.compare)).subscribe(e=>this.publishOutputModelChange(e))}subscribeResizeObserver(){fv.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){fv.isResizeObserverAvailable()&&null!==this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){nr.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){nr.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){nr.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){nr.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){nr.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){nr.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(e){return e===ya.Min?this.minHandleElement:e===ya.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===ya.Min?this.viewLowValue:this.currentTrackingPointer===ya.Max?this.viewHighValue:null}modelValueToViewValue(e){return nr.isNullOrUndefined(e)?NaN:nr.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?+e:nr.findStepIndex(+e,this.viewOptions.stepsArray)}viewValueToModelValue(e){return nr.isNullOrUndefined(this.viewOptions.stepsArray)||this.viewOptions.bindIndexForStepsArray?e:this.getStepValue(e)}getStepValue(e){const r=this.viewOptions.stepsArray[e];return nr.isNullOrUndefined(r)?NaN:r.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(e){const r=this.normaliseModelValues(e),a=!hw.compare(e,r);a&&(this.value=r.value,this.highValue=r.highValue),this.viewLowValue=this.modelValueToViewValue(r.value),this.viewHighValue=this.range?this.modelValueToViewValue(r.highValue):null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:r.value,highValue:r.highValue,forceChange:a,userEventInitiated:!1})}publishOutputModelChange(e){const r=()=>{this.valueChange.emit(e.value),this.range&&this.highValueChange.emit(e.highValue),nr.isNullOrUndefined(this.onChangeCallback)||this.onChangeCallback(this.range?[e.value,e.highValue]:e.value),nr.isNullOrUndefined(this.onTouchedCallback)||this.onTouchedCallback(this.range?[e.value,e.highValue]:e.value)};e.userEventInitiated?(r(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{r()})}normaliseModelValues(e){const r=new hw;if(r.value=e.value,r.highValue=e.highValue,!nr.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){const a=nr.findStepIndex(r.value,this.viewOptions.stepsArray);if(r.value=this.viewOptions.stepsArray[a].value,this.range){const o=nr.findStepIndex(r.highValue,this.viewOptions.stepsArray);r.highValue=this.viewOptions.stepsArray[o].value}}return r}if(this.viewOptions.enforceStep&&(r.value=this.roundStep(r.value),this.range&&(r.highValue=this.roundStep(r.highValue))),this.viewOptions.enforceRange&&(r.value=Su.clampToRange(r.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(r.highValue=Su.clampToRange(r.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&e.value>e.highValue))if(this.viewOptions.noSwitching)r.value=r.highValue;else{const a=e.value;r.value=e.highValue,r.highValue=a}return r}renormaliseModelValues(){const e={value:this.value,highValue:this.highValue},r=this.normaliseModelValues(e);hw.compare(r,e)||(this.value=r.value,this.highValue=r.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;const e=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();const r=this.getOptionsInfluencingEventBindings(this.viewOptions),a=!nr.areArraysEqual(e,r);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.viewHighValue=this.range?this.modelValueToViewValue(this.highValue):null,this.resetSlider(a)}applyOptions(){if(this.viewOptions=new dw,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!nr.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!nr.isNullOrUndefined(this.viewOptions.tickStep)||!nr.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),nr.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),nr.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(e,r)=>e+" - "+r),this.viewOptions.logScale&&0===this.viewOptions.floor)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,nr.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(this.viewOptions.bindIndexForStepsArray?this.getStepValue(e):e))}applyFloorCeilOptions(){if(nr.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),nr.isNullOrUndefined(this.viewOptions.ceil)||nr.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,nr.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=e=>String(e))}resetSlider(e=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),e&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions()}focusPointer(e){e!==ya.Min&&e!==ya.Max&&(e=ya.Min),e===ya.Min?this.minHandleElement.focus():this.range&&e===ya.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){nr.isNullOrUndefined(this.currentFocusPointer)||(this.onPointerFocus(this.currentFocusPointer),this.getPointerElement(this.currentFocusPointer).focus())}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);const e=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(e||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(e||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(const e of this.getAllSliderElements())nr.isNullOrUndefined(e)||e.setVertical(this.viewOptions.vertical)}updateScale(){for(const e of this.getAllSliderElements())e.setScale(this.viewOptions.scale)}updateRotate(){for(const e of this.getAllSliderElements())e.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.minHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",nr.isNullOrUndefined(this.viewOptions.ariaLabel)?nr.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.maxHandleElement.tabindex=!this.viewOptions.keyboardSupport||this.viewOptions.readOnly||this.viewOptions.disabled?"":"0",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||0!==this.viewOptions.rotate?"vertical":"horizontal",nr.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?nr.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Wm.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Wm.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){nr.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);const e=this.minHandleElement.dimension;this.handleHalfDimension=e/2,nr.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-e,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass)return void setTimeout(()=>{this.sliderElementWithLegendClass=!1});const e=nr.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,r=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&e.reverse();const a=nr.isNullOrUndefined(this.viewOptions.tickValueStep)?nr.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep;let o=!1;const d=e.map(p=>{let D=this.valueToPosition(p);this.viewOptions.vertical&&(D=this.maxHandlePosition-D);const P=r+"("+Math.round(D)+"px)",B=new rU;B.selected=this.isTickSelected(p),B.style={"-webkit-transform":P,"-moz-transform":P,"-o-transform":P,"-ms-transform":P,transform:P},B.selected&&!nr.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(B.style["background-color"]=this.getSelectionBarColor()),!B.selected&&!nr.isNullOrUndefined(this.viewOptions.getTickColor)&&(B.style["background-color"]=this.getTickColor(p)),nr.isNullOrUndefined(this.viewOptions.ticksTooltip)||(B.tooltip=this.viewOptions.ticksTooltip(p),B.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!nr.isNullOrUndefined(a)&&Su.isModuloWithinPrecisionLimit(p,a,this.viewOptions.precisionLimit)&&(B.value=this.getDisplayValue(p,Wm.TickValue),nr.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(B.valueTooltip=this.viewOptions.ticksValuesTooltip(p),B.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let te=null;if(nr.isNullOrUndefined(this.viewOptions.stepsArray))nr.isNullOrUndefined(this.viewOptions.getLegend)||(te=this.viewOptions.getLegend(p));else{const ae=this.viewOptions.stepsArray[p];nr.isNullOrUndefined(this.viewOptions.getStepLegend)?nr.isNullOrUndefined(ae)||(te=ae.legend):te=this.viewOptions.getStepLegend(ae)}return nr.isNullOrUndefined(te)||(B.legend=te,o=!0),B});if(this.sliderElementWithLegendClass!==o&&setTimeout(()=>{this.sliderElementWithLegendClass=o}),nr.isNullOrUndefined(this.ticks)||this.ticks.length!==d.length)this.ticks=d,this.isRefDestroyed()||this.changeDetectionRef.detectChanges();else for(let p=0;p<d.length;++p)Object.assign(this.ticks[p],d[p])}getTicksArray(){const e=nr.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,r=[],a=1+Math.floor(Su.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/e,this.viewOptions.precisionLimit));for(let o=0;o<a;++o)r.push(Su.roundToPrecisionLimit(this.viewOptions.floor+e*o,this.viewOptions.precisionLimit));return r}isTickSelected(e){if(!this.range)if(nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(e>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&e<=this.viewLowValue)return!0}else{const r=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>r&&e>=r&&e<=this.viewLowValue)return!0;if(this.viewLowValue<r&&e<=r&&e>=this.viewLowValue)return!0}return!!(this.range&&e>=this.viewLowValue&&e<=this.viewHighValue)}updateFloorLabel(){this.floorLabelElement.alwaysHide||(this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Wm.Floor)),this.floorLabelElement.calculateDimension(),this.floorLabelElement.setPosition(this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0))}updateCeilLabel(){this.ceilLabelElement.alwaysHide||(this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Wm.Ceil)),this.ceilLabelElement.calculateDimension(),this.ceilLabelElement.setPosition(this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension))}updateHandles(e,r){e===ya.Min?this.updateLowHandle(r):e===ya.Max&&this.updateHighHandle(r),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(e,r){const a=e===ya.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,o=r-a/2+this.handleHalfDimension,d=this.fullBarElement.dimension-a;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&e===ya.Min||!this.viewOptions.rightToLeft&&e===ya.Max?Math.min(o,d):Math.min(Math.max(o,0),d):o}updateLowHandle(e){this.minHandleElement.setPosition(e),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Wm.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(ya.Min,e)),nr.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(ya.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(e){this.maxHandleElement.setPosition(e),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Wm.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(ya.Max,e)),nr.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(ya.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let e=!1,r=!1;const a=this.isLabelBelowFloorLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.minHandleLabelElement),d=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),p=this.isLabelBelowFloorLabel(this.combinedLabelElement),D=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(a?(e=!0,this.floorLabelElement.hide()):(e=!1,this.floorLabelElement.show()),o?(r=!0,this.ceilLabelElement.hide()):(r=!1,this.ceilLabelElement.show()),this.range){const P=this.combinedLabelElement.isVisible()?D:d,B=this.combinedLabelElement.isVisible()?p:a;P?this.ceilLabelElement.hide():r||this.ceilLabelElement.show(),B?this.floorLabelElement.hide():e||this.floorLabelElement.show()}}isLabelBelowFloorLabel(e){const r=e.position,o=this.floorLabelElement.position;return this.viewOptions.rightToLeft?r+e.dimension>=o-2:r<=o+this.floorLabelElement.dimension+2}isLabelAboveCeilLabel(e){const r=e.position,o=this.ceilLabelElement.position;return this.viewOptions.rightToLeft?r<=o+this.ceilLabelElement.dimension+2:r+e.dimension>=o-2}updateSelectionBar(){let e=0,r=0;const a=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,o=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)r=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),e=o;else if(nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))a?(r=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),e=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(r=this.minHandleElement.position+this.handleHalfDimension,e=0);else{const d=this.viewOptions.showSelectionBarFromValue,p=this.valueToPosition(d);(this.viewOptions.rightToLeft?this.viewLowValue<=d:this.viewLowValue>d)?(r=this.minHandleElement.position-p,e=p+this.handleHalfDimension):(r=p-this.minHandleElement.position,e=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(r),this.selectionBarElement.setPosition(e),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(e),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+r)),this.leftOuterSelectionBarElement.setPosition(e+r)):(this.leftOuterSelectionBarElement.setDimension(e),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(e+r)),this.rightOuterSelectionBarElement.setPosition(e+r))),nr.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!nr.isNullOrUndefined(this.viewOptions.selectionBarGradient)){const d=nr.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),p=d-e>0&&!a||d-e<=0&&a;this.barStyle={backgroundImage:"linear-gradient(to "+(this.viewOptions.vertical?p?"bottom":"top":p?"left":"right")+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(d+r+e+(p?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=d-e+(p?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{const d=this.getSelectionBarColor();this.barStyle={backgroundColor:d}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(e){return this.viewOptions.getPointerColor(e===ya.Max?this.highValue:this.value,e)}getTickColor(e){return this.viewOptions.getTickColor(e)}updateCombinedLabel(){let e=null;if(e=this.viewOptions.rightToLeft?this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,e){const r=this.getDisplayValue(this.viewLowValue,Wm.Low),a=this.getDisplayValue(this.viewHighValue,Wm.High),o=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(a,r):this.viewOptions.combineLabels(r,a);this.combinedLabelElement.setValue(o);const d=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(d),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(e,r){return!nr.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.viewOptions.translate(e,r)}roundStep(e,r){const a=nr.isNullOrUndefined(r)?this.viewOptions.step:r;let o=Su.roundToPrecisionLimit((e-this.viewOptions.floor)/a,this.viewOptions.precisionLimit);return o=Math.round(o)*a,Su.roundToPrecisionLimit(this.viewOptions.floor+o,this.viewOptions.precisionLimit)}valueToPosition(e){let r=nr.linearValueToPosition;nr.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(r=nr.logValueToPosition):r=this.viewOptions.customValueToPosition;let a=r(e=Su.clampToRange(e,this.viewOptions.floor,this.viewOptions.ceil),this.viewOptions.floor,this.viewOptions.ceil);return nr.isNullOrUndefined(a)&&(a=0),this.viewOptions.rightToLeft&&(a=1-a),a*this.maxHandlePosition}positionToValue(e){let r=e/this.maxHandlePosition;this.viewOptions.rightToLeft&&(r=1-r);let a=nr.linearPositionToValue;nr.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(a=nr.logPositionToValue):a=this.viewOptions.customPositionToValue;const o=a(r,this.viewOptions.floor,this.viewOptions.ceil);return nr.isNullOrUndefined(o)?0:o}getEventXY(e,r){if(e instanceof MouseEvent)return this.viewOptions.vertical||0!==this.viewOptions.rotate?e.clientY:e.clientX;let a=0;const o=e.touches;if(!nr.isNullOrUndefined(r))for(let d=0;d<o.length;d++)if(o[d].identifier===r){a=d;break}return this.viewOptions.vertical||0!==this.viewOptions.rotate?o[a].clientY:o[a].clientX}getEventPosition(e,r){const a=this.elementRef.nativeElement.getBoundingClientRect(),o=this.viewOptions.vertical||0!==this.viewOptions.rotate?a.bottom:a.left;let d=0;return d=this.viewOptions.vertical||0!==this.viewOptions.rotate?-this.getEventXY(e,r)+o:this.getEventXY(e,r)-o,d*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(e){if(!this.range)return ya.Min;const r=this.getEventPosition(e),a=Math.abs(r-this.minHandleElement.position),o=Math.abs(r-this.maxHandleElement.position);return a<o?ya.Min:a>o?ya.Max:this.viewOptions.rightToLeft?r>this.minHandleElement.position?ya.Min:ya.Max:r<this.minHandleElement.position?ya.Min:ya.Max}bindEvents(){const e=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",r=>this.onBarStart(null,e,r,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",r=>this.onBarStart(ya.Min,e,r,!0,!0)),this.maxHandleElement.on("mousedown",r=>this.onBarStart(ya.Max,e,r,!0,!0))):(this.minHandleElement.on("mousedown",r=>this.onStart(ya.Min,r,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",r=>this.onStart(ya.Max,r,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",r=>this.onStart(null,r,!0,!0,!0)),this.ticksElement.on("mousedown",r=>this.onStart(null,r,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",r=>this.onBarStart(null,e,r,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",r=>this.onBarStart(ya.Min,e,r,!0,!0)),this.maxHandleElement.onPassive("touchstart",r=>this.onBarStart(ya.Max,e,r,!0,!0))):(this.minHandleElement.onPassive("touchstart",r=>this.onStart(ya.Min,r,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",r=>this.onStart(ya.Max,r,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",r=>this.onStart(null,r,!0,!0,!0)),this.ticksElement.onPassive("touchstart",r=>this.onStart(null,r,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(ya.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(ya.Max)))}getOptionsInfluencingEventBindings(e){return[e.disabled,e.readOnly,e.draggableRange,e.draggableRangeOnly,e.onlyBindHandles,e.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(const e of this.getAllSliderElements())nr.isNullOrUndefined(e)||e.off()}onBarStart(e,r,a,o,d,p,D){r?this.onDragStart(e,a,o,d):this.onStart(e,a,o,d,p,D)}onStart(e,r,a,o,d,p){r.stopPropagation(),!fv.isTouchEvent(r)&&!WA&&r.preventDefault(),this.moving=!1,this.calculateViewDimensions(),nr.isNullOrUndefined(e)&&(e=this.getNearestHandle(r)),this.currentTrackingPointer=e;const D=this.getPointerElement(e);if(D.active=!0,this.viewOptions.keyboardSupport&&D.focus(),a){this.unsubscribeOnMove();const P=B=>this.dragging.active?this.onDragMove(B):this.onMove(B);this.onMoveEventListener=fv.isTouchEvent(r)?this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",P):this.eventListenerHelper.attachEventListener(document,"mousemove",P)}if(o){this.unsubscribeOnEnd();const P=B=>this.onEnd(B);this.onEndEventListener=fv.isTouchEvent(r)?this.eventListenerHelper.attachPassiveEventListener(document,"touchend",P):this.eventListenerHelper.attachEventListener(document,"mouseup",P)}this.userChangeStart.emit(this.getChangeContext()),fv.isTouchEvent(r)&&!nr.isNullOrUndefined(r.changedTouches)&&nr.isNullOrUndefined(this.touchId)&&(this.touchId=r.changedTouches[0].identifier),d&&this.onMove(r,!0),p&&this.onEnd(r)}onMove(e,r){let a=null;if(fv.isTouchEvent(e)){const P=e.changedTouches;for(let B=0;B<P.length;B++)if(P[B].identifier===this.touchId){a=P[B];break}if(nr.isNullOrUndefined(a))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;const o=nr.isNullOrUndefined(a)?this.getEventPosition(e):this.getEventPosition(e,a.identifier);let d;o<=0?d=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor:o>=this.maxHandlePosition?d=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil:(d=this.positionToValue(o),d=r&&!nr.isNullOrUndefined(this.viewOptions.tickStep)?this.roundStep(d,this.viewOptions.tickStep):this.roundStep(d)),this.positionTrackingHandle(d)}onEnd(e){fv.isTouchEvent(e)&&e.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(e){const r=this.getPointerElement(e);r.on("blur",()=>this.onPointerBlur(r)),r.on("keydown",a=>this.onKeyboardEvent(a)),r.on("keyup",()=>this.onKeyUp()),r.active=!0,this.currentTrackingPointer=e,this.currentFocusPointer=e,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(e){e.off("blur"),e.off("keydown"),e.off("keyup"),e.active=!1,nr.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(e){const r=this.viewOptions.ceil-this.viewOptions.floor;let a=e+this.viewOptions.step,o=e-this.viewOptions.step,d=e+r/10,p=e-r/10;this.viewOptions.reversedControls&&(a=e-this.viewOptions.step,o=e+this.viewOptions.step,d=e-r/10,p=e+r/10);const D={UP:a,DOWN:o,LEFT:o,RIGHT:a,PAGEUP:d,PAGEDOWN:p,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(D.LEFT=a,D.RIGHT=o,(this.viewOptions.vertical||0!==this.viewOptions.rotate)&&(D.UP=o,D.DOWN=a)),D}onKeyboardEvent(e){const r=this.getCurrentTrackingValue(),a=nr.isNullOrUndefined(e.keyCode)?e.which:e.keyCode,D=this.getKeyActions(r)[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[a]];if(nr.isNullOrUndefined(D)||nr.isNullOrUndefined(this.currentTrackingPointer))return;e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));const P=Su.clampToRange(D,this.viewOptions.floor,this.viewOptions.ceil),B=this.roundStep(P);if(this.viewOptions.draggableRangeOnly){const te=this.viewHighValue-this.viewLowValue;let ae,oe;this.currentTrackingPointer===ya.Min?(ae=B,oe=B+te,oe>this.viewOptions.ceil&&(oe=this.viewOptions.ceil,ae=oe-te)):this.currentTrackingPointer===ya.Max&&(oe=B,ae=B-te,ae<this.viewOptions.floor&&(ae=this.viewOptions.floor,oe=ae+te)),this.positionTrackingBar(ae,oe)}else this.positionTrackingHandle(B)}onDragStart(e,r,a,o){const d=this.getEventPosition(r);this.dragging=new tI,this.dragging.active=!0,this.dragging.value=this.positionToValue(d),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-d:d-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?d-this.maxHandleElement.position:this.maxHandleElement.position-d,this.onStart(e,r,a,o)}getMinValue(e,r,a){const o=this.viewOptions.rightToLeft;let d=null;return d=r?a?o?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:o?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:this.positionToValue(o?e+this.dragging.lowLimit:e-this.dragging.lowLimit),this.roundStep(d)}getMaxValue(e,r,a){const o=this.viewOptions.rightToLeft;let d=null;return d=r?a?o?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:o?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:o?this.positionToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(d)}onDragMove(e){const r=this.getEventPosition(e);let a,o,d,p;this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0,this.viewOptions.rightToLeft?(a=this.dragging.lowLimit,o=this.dragging.highLimit,d=this.maxHandleElement,p=this.minHandleElement):(a=this.dragging.highLimit,o=this.dragging.lowLimit,d=this.minHandleElement,p=this.maxHandleElement);const P=r>=this.maxHandlePosition-a;let B,te;if(r<=o){if(0===d.position)return;B=this.getMinValue(r,!0,!1),te=this.getMaxValue(r,!0,!1)}else if(P){if(p.position===this.maxHandlePosition)return;te=this.getMaxValue(r,!0,!0),B=this.getMinValue(r,!0,!0)}else B=this.getMinValue(r,!1,!1),te=this.getMaxValue(r,!1,!1);this.positionTrackingBar(B,te)}positionTrackingBar(e,r){!nr.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit&&(r=Su.roundToPrecisionLimit((e=this.viewOptions.minLimit)+this.dragging.difference,this.viewOptions.precisionLimit)),!nr.isNullOrUndefined(this.viewOptions.maxLimit)&&r>this.viewOptions.maxLimit&&(e=Su.roundToPrecisionLimit((r=this.viewOptions.maxLimit)-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=e,this.viewHighValue=r,this.applyViewChange(),this.updateHandles(ya.Min,this.valueToPosition(e)),this.updateHandles(ya.Max,this.valueToPosition(r))}positionTrackingHandle(e){e=this.applyMinMaxLimit(e),this.range&&(this.viewOptions.pushRange?e=this.applyPushRange(e):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===ya.Min&&e>this.viewHighValue?e=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===ya.Max&&e<this.viewLowValue&&(e=this.applyMinMaxRange(this.viewLowValue))),e=this.applyMinMaxRange(e),this.currentTrackingPointer===ya.Min&&e>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(ya.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=ya.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===ya.Max&&e<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(ya.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=ya.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==e&&(this.currentTrackingPointer===ya.Min?(this.viewLowValue=e,this.applyViewChange()):this.currentTrackingPointer===ya.Max&&(this.viewHighValue=e,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(e)),this.updateAriaAttributes())}applyMinMaxLimit(e){return!nr.isNullOrUndefined(this.viewOptions.minLimit)&&e<this.viewOptions.minLimit?this.viewOptions.minLimit:!nr.isNullOrUndefined(this.viewOptions.maxLimit)&&e>this.viewOptions.maxLimit?this.viewOptions.maxLimit:e}applyMinMaxRange(e){const a=Math.abs(e-(this.currentTrackingPointer===ya.Min?this.viewHighValue:this.viewLowValue));if(!nr.isNullOrUndefined(this.viewOptions.minRange)&&a<this.viewOptions.minRange){if(this.currentTrackingPointer===ya.Min)return Su.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===ya.Max)return Su.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!nr.isNullOrUndefined(this.viewOptions.maxRange)&&a>this.viewOptions.maxRange){if(this.currentTrackingPointer===ya.Min)return Su.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===ya.Max)return Su.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return e}applyPushRange(e){const r=this.currentTrackingPointer===ya.Min?this.viewHighValue-e:e-this.viewLowValue,a=nr.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,o=this.viewOptions.maxRange;return r<a?(this.currentTrackingPointer===ya.Min?(this.viewHighValue=Su.roundToPrecisionLimit(Math.min(e+a,this.viewOptions.ceil),this.viewOptions.precisionLimit),e=Su.roundToPrecisionLimit(this.viewHighValue-a,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ya.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===ya.Max&&(this.viewLowValue=Su.roundToPrecisionLimit(Math.max(e-a,this.viewOptions.floor),this.viewOptions.precisionLimit),e=Su.roundToPrecisionLimit(this.viewLowValue+a,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ya.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!nr.isNullOrUndefined(o)&&r>o&&(this.currentTrackingPointer===ya.Min?(this.viewHighValue=Su.roundToPrecisionLimit(e+o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ya.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===ya.Max&&(this.viewLowValue=Su.roundToPrecisionLimit(e-o,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(ya.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),e}getChangeContext(){const e=new iU;return e.pointerType=this.currentTrackingPointer,e.value=+this.value,this.range&&(e.highValue=+this.highValue),e}static \u0275fac=function(r){return new(r||n)(t.GI1(t.q87),t.GI1(t.GMv),t.GI1(t.kD9),t.GI1(t.WW2),t.GI1(JA,8))};static \u0275cmp=t.In1({type:n,selectors:[["ngx-slider"]],contentQueries:function(r,a,o){if(1&r&&t.szK(o,NV,5),2&r){let d;t.wto(d=t.Gqi())&&(a.tooltipTemplate=d.first)}},viewQuery:function(r,a){if(1&r&&(t.CC$(zV,5,pv),t.CC$(YV,5,pv),t.CC$(GV,5,pv),t.CC$(HV,5,pv),t.CC$(VV,5,X2),t.CC$(UV,5,X2),t.CC$(jV,5,Yy),t.CC$($V,5,Yy),t.CC$(WV,5,Yy),t.CC$(XV,5,Yy),t.CC$(qV,5,Yy),t.CC$(ZV,5,pv)),2&r){let o;t.wto(o=t.Gqi())&&(a.leftOuterSelectionBarElement=o.first),t.wto(o=t.Gqi())&&(a.rightOuterSelectionBarElement=o.first),t.wto(o=t.Gqi())&&(a.fullBarElement=o.first),t.wto(o=t.Gqi())&&(a.selectionBarElement=o.first),t.wto(o=t.Gqi())&&(a.minHandleElement=o.first),t.wto(o=t.Gqi())&&(a.maxHandleElement=o.first),t.wto(o=t.Gqi())&&(a.floorLabelElement=o.first),t.wto(o=t.Gqi())&&(a.ceilLabelElement=o.first),t.wto(o=t.Gqi())&&(a.minHandleLabelElement=o.first),t.wto(o=t.Gqi())&&(a.maxHandleLabelElement=o.first),t.wto(o=t.Gqi())&&(a.combinedLabelElement=o.first),t.wto(o=t.Gqi())&&(a.ticksElement=o.first)}},hostAttrs:[1,"ngx-slider"],hostVars:8,hostBindings:function(r,a){1&r&&t.qCj("resize",function(d){return a.onResize(d)},!1,t.MbM),2&r&&(t.e48("disabled",a.sliderElementDisabledAttr)("aria-label",a.sliderElementAriaLabel),t.eAK("vertical",a.sliderElementVerticalClass)("animate",a.sliderElementAnimateClass)("with-legend",a.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[t.M5G([aU]),t.SYr],decls:29,vars:13,consts:[["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],["leftOuterSelectionBar",""],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["rightOuterSelectionBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["fullBar",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],["selectionBar",""],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["minHandle",""],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["maxHandle",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["floorLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ceilLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["minHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["maxHandleLabel",""],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["combinedLabel",""],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["ticksElement",""],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(r,a){1&r&&(t.I0R(0,"span",0,1),t.wR5(2,"span",2),t.C$Y(),t.I0R(3,"span",3,4),t.wR5(5,"span",2),t.C$Y(),t.I0R(6,"span",5,6),t.wR5(8,"span",2),t.C$Y(),t.I0R(9,"span",7,8),t.wR5(11,"span",9),t.C$Y(),t.wR5(12,"span",10,11)(14,"span",12,13)(16,"span",14,15)(18,"span",16,17)(20,"span",18,19)(22,"span",20,21)(24,"span",22,23),t.I0R(26,"span",24,25),t.yuY(28,tU,5,10,"span",26),t.C$Y()),2&r&&(t.yG2(6),t.eAK("ngx-slider-transparent",a.fullBarTransparentClass),t.yG2(3),t.eAK("ngx-slider-draggable",a.selectionBarDraggableClass),t.yG2(2),t.E7m("ngStyle",a.barStyle),t.yG2(),t.E7m("ngStyle",a.minPointerStyle),t.yG2(2),t.m4B("display",a.range?"inherit":"none"),t.E7m("ngStyle",a.maxPointerStyle),t.yG2(12),t.eAK("ngx-slider-ticks-values-under",a.ticksUnderValuesClass),t.E7m("hidden",!a.showTicks),t.yG2(2),t.E7m("ngForOf",a.ticks))},dependencies:[Me.QF,Me.ay,Me.u_,Me.Qt,pv,X2,Yy,nU],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}'],changeDetection:0})}return n})(),oU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=t.a4G({type:n});static \u0275inj=t.s3X({imports:[Me.MD]})}return n})(),lU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=t.a4G({type:n});static \u0275inj=t.s3X({imports:[Me.MD]})}return n})();Zt(9400);var w_=Zt(6764),Gy=Zt(2780);const aI=function hU(n,i){return function(e){return n(i(e))}};aI(Object.getPrototypeOf,Object),Function.prototype.toString.call(Object);const lI=function EU(n,i){return n===i||n!=n&&i!=i},fw=function kU(n,i){for(var e=n.length;e--;)if(lI(n[e][0],i))return e;return-1};var SU=Array.prototype.splice;function Hy(n){var i=-1,e=null==n?0:n.length;for(this.clear();++i<e;){var r=n[i];this.set(r[0],r[1])}}Hy.prototype.clear=function wU(){this.__data__=[],this.size=0},Hy.prototype.delete=function DU(n){var i=this.__data__,e=fw(i,n);return!(e<0||(e==i.length-1?i.pop():SU.call(i,e,1),--this.size,0))},Hy.prototype.get=function IU(n){var i=this.__data__,e=fw(i,n);return e<0?void 0:i[e][1]},Hy.prototype.has=function RU(n){return fw(this.__data__,n)>-1},Hy.prototype.set=function LU(n,i){var e=this.__data__,r=fw(e,n);return r<0?(++this.size,e.push([n,i])):e[r][1]=i,this};const pw=Hy;var Sx=Zt(4556);var n,Qg=Zt(7616),qU=Qg.c["__core-js_shared__"],uI=(n=/[^.]+$/.exec(qU&&qU.keys&&qU.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";var QU=Function.prototype.toString;const C_=function ej(n){if(null!=n){try{return QU.call(n)}catch{}try{return n+""}catch{}}return""};var ij=/^\[object .+?Constructor\]$/,oj=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const cj=function lj(n){return!(!(0,Sx.c)(n)||function ZU(n){return!!uI&&uI in n}(n))&&(function XU(n){if(!(0,Sx.c)(n))return!1;var i=(0,Gy.c)(n);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}(n)?oj:ij).test(C_(n))},E_=function hj(n,i){var e=function uj(n,i){return n?.[i]}(n,i);return cj(e)?e:void 0},Dx=E_(Qg.c,"Map"),Ax=E_(Object,"create");var bj=Object.prototype.hasOwnProperty;var kj=Object.prototype.hasOwnProperty;function Vy(n){var i=-1,e=null==n?0:n.length;for(this.clear();++i<e;){var r=n[i];this.set(r[0],r[1])}}Vy.prototype.clear=function mj(){this.__data__=Ax?Ax(null):{},this.size=0},Vy.prototype.delete=function vj(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i},Vy.prototype.get=function wj(n){var i=this.__data__;if(Ax){var e=i[n];return"__lodash_hash_undefined__"===e?void 0:e}return bj.call(i,n)?i[n]:void 0},Vy.prototype.has=function Tj(n){var i=this.__data__;return Ax?void 0!==i[n]:kj.call(i,n)},Vy.prototype.set=function Aj(n,i){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ax&&void 0===i?"__lodash_hash_undefined__":i,this};const dI=Vy,mw=function Pj(n,i){var e=n.__data__;return function Oj(n){var i=typeof n;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n}(i)?e["string"==typeof i?"string":"hash"]:e.map};function Uy(n){var i=-1,e=null==n?0:n.length;for(this.clear();++i<e;){var r=n[i];this.set(r[0],r[1])}}Uy.prototype.clear=function Mj(){this.size=0,this.__data__={hash:new dI,map:new(Dx||pw),string:new dI}},Uy.prototype.delete=function Fj(n){var i=mw(this,n).delete(n);return this.size-=i?1:0,i},Uy.prototype.get=function Nj(n){return mw(this,n).get(n)},Uy.prototype.has=function Yj(n){return mw(this,n).has(n)},Uy.prototype.set=function Hj(n,i){var e=mw(this,n),r=e.size;return e.set(n,i),this.size+=e.size==r?0:1,this};const Uj=Uy;function jy(n){var i=this.__data__=new pw(n);this.size=i.size}jy.prototype.clear=function FU(){this.__data__=new pw,this.size=0},jy.prototype.delete=function NU(n){var i=this.__data__,e=i.delete(n);return this.size=i.size,e},jy.prototype.get=function YU(n){return this.__data__.get(n)},jy.prototype.has=function HU(n){return this.__data__.has(n)},jy.prototype.set=function $j(n,i){var e=this.__data__;if(e instanceof pw){var r=e.__data__;if(!Dx||r.length<199)return r.push([n,i]),this.size=++e.size,this;e=this.__data__=new Uj(r)}return e.set(n,i),this.size=e.size,this},function(){try{var n=E_(Object,"defineProperty");return n({},"",{}),n}catch{}}();!function s$(n){(0,w_.c)(n)&&(0,Gy.c)(n)}(function(){return arguments}()),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;var _c={};_c["[object Float32Array]"]=_c["[object Float64Array]"]=_c["[object Int8Array]"]=_c["[object Int16Array]"]=_c["[object Int32Array]"]=_c["[object Uint8Array]"]=_c["[object Uint8ClampedArray]"]=_c["[object Uint16Array]"]=_c["[object Uint32Array]"]=!0,_c["[object Arguments]"]=_c["[object Array]"]=_c["[object ArrayBuffer]"]=_c["[object Boolean]"]=_c["[object DataView]"]=_c["[object Date]"]=_c["[object Error]"]=_c["[object Function]"]=_c["[object Map]"]=_c["[object Number]"]=_c["[object Object]"]=_c["[object RegExp]"]=_c["[object Set]"]=_c["[object String]"]=_c["[object WeakMap]"]=!1;const Q2=function q$(n){return function(i){return n(i)}};var Z$=Zt(8616),wI="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ix=wI&&"object"==typeof module&&module&&!module.nodeType&&module,eE=Ix&&Ix.exports===wI&&Z$.c.process;const $y=function(){try{return Ix&&Ix.require&&Ix.require("util").types||eE&&eE.binding&&eE.binding("util")}catch{}}();var CI=$y&&$y.isTypedArray;CI&&Q2(CI),aI(Object.keys,Object),"object"==typeof exports&&exports&&!exports.nodeType&&exports&&"object"==typeof module&&module&&!module.nodeType&&module;const aE=E_(Qg.c,"DataView"),sE=E_(Qg.c,"Promise"),oE=E_(Qg.c,"Set"),lE=E_(Qg.c,"WeakMap");var PI="[object Map]",FI="[object Promise]",BI="[object Set]",NI="[object WeakMap]",zI="[object DataView]",QW=C_(aE),eX=C_(Dx),tX=C_(sE),iX=C_(oE),nX=C_(lE),k_=Gy.c;(aE&&k_(new aE(new ArrayBuffer(1)))!=zI||Dx&&k_(new Dx)!=PI||sE&&k_(sE.resolve())!=FI||oE&&k_(new oE)!=BI||lE&&k_(new lE)!=NI)&&(k_=function(n){var i=(0,Gy.c)(n),e="[object Object]"==i?n.constructor:void 0,r=e?C_(e):"";if(r)switch(r){case QW:return zI;case eX:return PI;case tX:return FI;case iX:return BI;case nX:return NI}return i});Zt(312);var jI=$y&&$y.isMap;jI&&Q2(jI);var $I=$y&&$y.isSet;$I&&Q2($I);var Zl={};Zl["[object Arguments]"]=Zl["[object Array]"]=Zl["[object ArrayBuffer]"]=Zl["[object DataView]"]=Zl["[object Boolean]"]=Zl["[object Date]"]=Zl["[object Float32Array]"]=Zl["[object Float64Array]"]=Zl["[object Int8Array]"]=Zl["[object Int16Array]"]=Zl["[object Int32Array]"]=Zl["[object Map]"]=Zl["[object Number]"]=Zl["[object Object]"]=Zl["[object RegExp]"]=Zl["[object Set]"]=Zl["[object String]"]=Zl["[object Symbol]"]=Zl["[object Uint8Array]"]=Zl["[object Uint8ClampedArray]"]=Zl["[object Uint16Array]"]=Zl["[object Uint32Array]"]=!0,Zl["[object Error]"]=Zl["[object Function]"]=Zl["[object WeakMap]"]=!1,Symbol("MainQueueId"),new Array(256).fill(0).map((n,i)=>("0"+i.toString(16)).slice(-2));let Lq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[j.y,Me.MD]]}),n})();Zt(9216);let Pq=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({})}return n})();var KI=Zt(800),JI=Zt(3616),Fq=Zt(5084),Bq=Zt(4704),Nq=Zt(6700),zq=Zt(7368),Yq=Zt(8716);const _w=()=>{const n=typeof window<"u"?window:void 0;return n&&n.tinymce?n.tinymce:null};let Gq=(()=>{class n{onBeforePaste=new t._w7;onBlur=new t._w7;onClick=new t._w7;onCompositionEnd=new t._w7;onCompositionStart=new t._w7;onCompositionUpdate=new t._w7;onContextMenu=new t._w7;onCopy=new t._w7;onCut=new t._w7;onDblclick=new t._w7;onDrag=new t._w7;onDragDrop=new t._w7;onDragEnd=new t._w7;onDragGesture=new t._w7;onDragOver=new t._w7;onDrop=new t._w7;onFocus=new t._w7;onFocusIn=new t._w7;onFocusOut=new t._w7;onKeyDown=new t._w7;onKeyPress=new t._w7;onKeyUp=new t._w7;onMouseDown=new t._w7;onMouseEnter=new t._w7;onMouseLeave=new t._w7;onMouseMove=new t._w7;onMouseOut=new t._w7;onMouseOver=new t._w7;onMouseUp=new t._w7;onPaste=new t._w7;onSelectionChange=new t._w7;onActivate=new t._w7;onAddUndo=new t._w7;onBeforeAddUndo=new t._w7;onBeforeExecCommand=new t._w7;onBeforeGetContent=new t._w7;onBeforeRenderUI=new t._w7;onBeforeSetContent=new t._w7;onChange=new t._w7;onClearUndos=new t._w7;onDeactivate=new t._w7;onDirty=new t._w7;onExecCommand=new t._w7;onGetContent=new t._w7;onHide=new t._w7;onInit=new t._w7;onInput=new t._w7;onInitNgModel=new t._w7;onLoadContent=new t._w7;onNodeChange=new t._w7;onPostProcess=new t._w7;onPostRender=new t._w7;onPreInit=new t._w7;onPreProcess=new t._w7;onProgressState=new t._w7;onRedo=new t._w7;onRemove=new t._w7;onReset=new t._w7;onResizeEditor=new t._w7;onSaveContent=new t._w7;onSetAttrib=new t._w7;onObjectResizeStart=new t._w7;onObjectResized=new t._w7;onObjectSelected=new t._w7;onSetContent=new t._w7;onShow=new t._w7;onSubmit=new t._w7;onUndo=new t._w7;onVisualAid=new t._w7;static \u0275fac=function(r){return new(r||n)};static \u0275dir=t.Sc5({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onCompositionEnd:"onCompositionEnd",onCompositionStart:"onCompositionStart",onCompositionUpdate:"onCompositionUpdate",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInput:"onInput",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}})}return n})();const QI=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onCompositionEnd","onCompositionStart","onCompositionUpdate","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],yw=(n,i,e)=>(0,KI.w)(n,i).pipe((0,JI.a)(e)),eM=(n,i)=>"string"==typeof n?n.split(",").map(e=>e.trim()):Array.isArray(n)?n:i;let tM=0;const iM=n=>typeof n<"u"&&"textarea"===n.tagName.toLowerCase(),nM=n=>typeof n>"u"||""===n?[]:Array.isArray(n)?n:n.split(" "),jq=(n,i)=>nM(n).concat(nM(i)),$q=()=>{},rM=n=>null==n,qq=(()=>{const n=new Nq.g(null),i=n.pipe((0,UA.I)(Boolean),(0,zq.G)(([e,r])=>{const a=e.createElement("script");return a.referrerPolicy="origin",a.type="application/javascript",a.src=r,e.head.appendChild(a),(0,KI.w)(a,"load").pipe(n=>n.pipe((0,Fq.K)(),(0,Bq.k)(()=>{})))}),(0,Yq.C)({bufferSize:1,refCount:!0}));return{load:(...e)=>(n.getValue()||n.next(e),i),reinitialize:()=>{n.next(null)}}})(),Zq=new t.UbH("TINYMCE_SCRIPT_SRC"),Kq={provide:j.Y6,useExisting:(0,t.wd)(()=>aM),multi:!0};let aM=(()=>{class n extends Gq{cdRef;platformId;tinymceScriptSrc;cloudChannel="7";apiKey="no-api-key";licenseKey;init;id="";initialValue;outputFormat;inline;tagName;plugins;toolbar;modelEvents="change input undo redo";allowedEvents;ignoreEvents;set disabled(e){this._disabled=e,this._editor&&this._editor.initialized&&("function"==typeof this._editor.mode?.set?this._editor.mode.set(e?"readonly":"design"):this._editor.setMode(e?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}ngZone;_elementRef;_element;_disabled;_editor;onTouchedCallback=$q;onChangeCallback;destroy$=new Hg.E;constructor(e,r,a,o,d){super(),this.cdRef=a,this.platformId=o,this.tinymceScriptSrc=d,this._elementRef=e,this.ngZone=r}writeValue(e){this._editor&&this._editor.initialized?this._editor.setContent(rM(e)?"":e):this.initialValue=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}ngAfterViewInit(){(0,Me.c0)(this.platformId)&&(this.id=this.id||(n=>{const e=(new Date).getTime(),r=Math.floor(1e9*Math.random());return tM++,"tiny-angular_"+r+tM+String(e)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!this.init?.inline,this.createElement(),null!==_w()?this.initialise():this._element&&this._element.ownerDocument&&qq.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,JI.a)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==_w()&&_w().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,iM(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise=()=>{const e={...this.init,selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,license_key:this.licenseKey,plugins:jq(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:r=>{this._editor=r,yw(r,"init",this.destroy$).subscribe(()=>{this.initEditor(r)}),((n,i,e)=>{(n=>{const i=eM(n.ignoreEvents,[]);return eM(n.allowedEvents,QI).filter(r=>QI.includes(r)&&!i.includes(r))})(n).forEach(a=>{const o=n[a];yw(i,a.substring(2),e).subscribe(d=>{(n=>n.observed||n.observers?.length>0)(o)&&n.ngZone.run(()=>o.emit({event:d,editor:i}))})})})(this,r,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(r)}};iM(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{_w().init(e)})};getScriptSrc(){return rM(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(e){yw(e,"blur",this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.onTouchedCallback())}),yw(e,this.modelEvents,this.destroy$).subscribe(()=>{this.cdRef.markForCheck(),this.ngZone.run(()=>this.emitOnChange(e))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{e.setContent(this.initialValue),e.getContent()!==this.initialValue&&this.emitOnChange(e),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(e)})}emitOnChange(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}static \u0275fac=function(r){return new(r||n)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(t.kD9),t.GI1(t.AHE),t.GI1(Zq,8))};static \u0275cmp=t.In1({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",licenseKey:"licenseKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},standalone:!0,features:[t.M5G([Kq]),t.eg9,t.UHJ],decls:0,vars:0,template:function(r,a){},dependencies:[Me.MD,j.y],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return n})(),Jq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=t.a4G({type:n});static \u0275inj=t.s3X({imports:[aM]})}return n})();var Qq=Zt(2728);let tZ=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[Me.MD]})}return n})();var iZ=Zt(8987);function nZ(n,i){1&n&&t.OEk(0),2&n&&t.cNF(i.index<i.value?"\u2605":"\u2606")}function rZ(n,i){}const aZ=(n,i)=>({index:n,value:i});function sZ(n,i){if(1&n){const e=t.KQA();t.I0R(0,"span",3),t.OEk(1),t.C$Y(),t.I0R(2,"span",4),t.qCj("mouseenter",function(){const o=t.usT(e).index,d=t.GaO();return t.CGJ(d.enter(o+1))})("click",function(){const o=t.usT(e).index,d=t.GaO();return t.CGJ(d.rate(o+1))}),t.yuY(3,rZ,0,0,"ng-template",5),t.C$Y()}if(2&n){const e=i.$implicit,r=i.index,a=t.GaO(),o=t.Gew(2);t.yG2(),t.oRS("(",r<a.value?"*":" ",")"),t.yG2(),t.m4B("cursor",a.readonly?"default":"pointer"),t.eAK("active",r<a.value),t.E7m("title",e.title),t.yG2(),t.E7m("ngTemplateOutlet",a.customTemplate||o)("ngTemplateOutletContext",t.IBC(8,aZ,r,a.value))}}let oZ=(()=>{class n{constructor(){this.ariaLabel="rating"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lZ={provide:j.Y6,useExisting:(0,t.wd)(()=>cZ),multi:!0};let cZ=(()=>{class n{constructor(e,r){this.changeDetection=e,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new t._w7,this.onLeave=new t._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,r)}onKeydown(e){-1!==[37,38,39,40].indexOf(e.which)&&(e.preventDefault(),e.stopPropagation(),this.rate(this.value+(38===e.which||39===e.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(e){if(e%1!==e)return this.value=Math.round(e),this.preValue=e,void this.changeDetection.markForCheck();this.preValue=e,this.value=e,this.changeDetection.markForCheck()}enter(e){this.readonly||(this.value=e,this.changeDetection.markForCheck(),this.onHover.emit(e))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}rate(e){!this.readonly&&this.range&&e>=0&&e<=this.range.length&&(this.writeValue(e),this.onChange(e))}buildTemplateObjects(e){const r=[];for(let a=0;a<e;a++)r.push({index:a,title:this.titles[a]||a+1});return r}static#e=this.\u0275fac=function(r){return new(r||n)(t.GI1(t.kD9),t.GI1(oZ))};static#t=this.\u0275cmp=t.In1({type:n,selectors:[["rating"]],hostBindings:function(r,a){1&r&&t.qCj("keydown",function(d){return a.onKeydown(d)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[t.M5G([lZ])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,a){1&r&&(t.I0R(0,"span",0),t.qCj("mouseleave",function(){return a.reset()})("keydown",function(d){return a.onKeydown(d)}),t.yuY(1,nZ,1,1,"ng-template",null,1,t.gJz)(3,sZ,4,11,"ng-template",2),t.C$Y()),2&r&&(t.e48("aria-label",a.ariaLabel)("aria-valuemax",a.range.length)("aria-valuenow",a.value),t.yG2(3),t.E7m("ngForOf",a.range))},dependencies:[Me.ay,Me.XV],encapsulation:2,changeDetection:0})}return n})(),uZ=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[Me.MD]})}return n})();var dZ=Zt(6552),hZ=Zt(140);let fZ=(()=>{class n{static forRoot(){return{ngModule:n,providers:[dZ.Sy,hZ.O4]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[Me.MD]})}return n})();var pZ=Zt(136);let mZ=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[Me.MD,bV.k,Y7,Wu.Uf.forRoot(),j.y,j.sl,nt.rO.forRoot(),nf.f8.forRoot(),Qq.C.forRoot(),lU,yD.S,my.as.forRoot(),$Y,$L,tZ.forRoot(),ev.gb,oU,Lq,sV,Jq,Vg.SO.forRoot(),iZ.iU.forRoot(),Pq,uZ.forRoot(),wV,q6.forRoot(),kz,fZ,pZ.eY.forRoot()]})}return n})()},968:(uo,ja,Zt)=>{"use strict";Zt.r(ja),Zt.d(ja,{PagesModule:()=>Me});var T=Zt(1368),xt=Zt(9072),Ze=Zt(4496);const t=[{path:"",loadChildren:()=>Promise.resolve().then(Zt.bind(Zt,2500)).then(We=>We.CustomPagesModule)},{path:"pages",loadChildren:()=>Zt.e(400).then(Zt.bind(Zt,5020)).then(We=>We.ExtrapagesModule)}];let j=(()=>{class We{static#e=this.\u0275fac=function(Ct){return new(Ct||We)};static#t=this.\u0275mod=Ze.a4G({type:We});static#i=this.\u0275inj=Ze.s3X({imports:[xt.qQ.forChild(t),xt.qQ]})}return We})();var He=Zt(6900),Be=Zt(2500);let Me=(()=>{class We{static#e=this.\u0275fac=function(Ct){return new(Ct||We)};static#t=this.\u0275mod=Ze.a4G({type:We});static#i=this.\u0275inj=Ze.s3X({imports:[T.MD,j,He.k,Be.CustomPagesModule]})}return We})()},6708:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{O:()=>Ze});var T=Zt(4496);function xt(t,j){if(1&t&&(T.I0R(0,"li",6),T.OEk(1),T.C$Y()),2&t){const He=j.$implicit;T.yG2(),T.cNF(He.label)}}let Ze=(()=>{class t{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(Be){return new(Be||t)};static#t=this.\u0275cmp=T.In1({type:t,selectors:[["app-breadcrumbs"]],inputs:{title:"title",breadcrumbItems:"breadcrumbItems"},decls:9,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0"],[1,"page-title-right"],[1,"breadcrumb","m-0"],[1,"breadcrumb-item","active"],["class","breadcrumb-item active"]],template:function(Be,Me){1&Be&&(T.I0R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),T.OEk(4),T.C$Y(),T.I0R(5,"div",4)(6,"ol",5),T.c53(7,xt,2,1,"li",7,T.wJt),T.C$Y()()()()()),2&Be&&(T.yG2(4),T.cNF(Me.title),T.yG2(3),T.oho(Me.breadcrumbItems))}})}return t})()},6900:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{k:()=>Ze});var T=Zt(1368),xt=Zt(4496);let Ze=(()=>{class t{static#e=this.\u0275fac=function(Be){return new(Be||t)};static#t=this.\u0275mod=xt.a4G({type:t});static#i=this.\u0275inj=xt.s3X({imports:[T.MD]})}return t})()},2164:(uo,ja,Zt)=>{"use strict";var T;function xt(ve,l){var u=Object.keys(ve);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(ve);l&&(m=m.filter(function(x){return Object.getOwnPropertyDescriptor(ve,x).enumerable})),u.push.apply(u,m)}return u}function Ze(ve){for(var l=1;l<arguments.length;l++){var u=null!=arguments[l]?arguments[l]:{};l%2?xt(Object(u),!0).forEach(function(m){Me(ve,m,u[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(u)):xt(Object(u)).forEach(function(m){Object.defineProperty(ve,m,Object.getOwnPropertyDescriptor(u,m))})}return ve}function t(ve){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(ve)}function j(ve,l){if(!(ve instanceof l))throw new TypeError("Cannot call a class as a function")}function He(ve,l){for(var u=0;u<l.length;u++){var m=l[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(ve,m.key,m)}}function Be(ve,l,u){return l&&He(ve.prototype,l),u&&He(ve,u),ve}function Me(ve,l,u){return l in ve?Object.defineProperty(ve,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):ve[l]=u,ve}function We(ve,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(l&&l.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),l&&at(ve,l)}function nt(ve){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)})(ve)}function at(ve,l){return(at=Object.setPrototypeOf||function(u,m){return u.__proto__=m,u})(ve,l)}function Ct(ve){if(void 0===ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ve}function ot(ve){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var u,m=nt(ve);if(l){var x=nt(this).constructor;u=Reflect.construct(m,arguments,x)}else u=m.apply(this,arguments);return function(w,E){if(E&&("object"==typeof E||"function"==typeof E))return E;if(void 0!==E)throw new TypeError("Derived constructors may only return object or undefined");return Ct(w)}(this,u)}}function Wt(ve,l){return function(u){if(Array.isArray(u))return u}(ve)||function(u,m){var x=null==u?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(null!=x){var w,E,M=[],N=!0,H=!1;try{for(x=x.call(u);!(N=(w=x.next()).done)&&(M.push(w.value),!m||M.length!==m);N=!0);}catch(Z){H=!0,E=Z}finally{try{N||null==x.return||x.return()}finally{if(H)throw E}}return M}}(ve,l)||lt(ve,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(ve){return function(l){if(Array.isArray(l))return gt(l)}(ve)||function(l){if(typeof Symbol<"u"&&null!=l[Symbol.iterator]||null!=l["@@iterator"])return Array.from(l)}(ve)||lt(ve)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(ve,l){if(ve){if("string"==typeof ve)return gt(ve,l);var u=Object.prototype.toString.call(ve).slice(8,-1);return"Object"===u&&ve.constructor&&(u=ve.constructor.name),"Map"===u||"Set"===u?Array.from(ve):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?gt(ve,l):void 0}}function gt(ve,l){(null==l||l>ve.length)&&(l=ve.length);for(var u=0,m=new Array(l);u<l;u++)m[u]=ve[u];return m}function _i(ve,l){var u=typeof Symbol<"u"&&ve[Symbol.iterator]||ve["@@iterator"];if(!u){if(Array.isArray(ve)||(u=lt(ve))||l&&ve&&"number"==typeof ve.length){u&&(ve=u);var m=0,x=function(){};return{s:x,n:function(){return m>=ve.length?{done:!0}:{done:!1,value:ve[m++]}},e:function(N){throw N},f:x}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w,E=!0,M=!1;return{s:function(){u=u.call(ve)},n:function(){var N=u.next();return E=N.done,N},e:function(N){M=!0,w=N},f:function(){try{E||null==u.return||u.return()}finally{if(M)throw w}}}}var tt=function(){function ve(){j(this,ve)}return Be(ve,[{key:"shadeRGBColor",value:function(l,u){var m=u.split(","),x=l<0?0:255,w=l<0?-1*l:l,E=parseInt(m[0].slice(4),10),M=parseInt(m[1],10),N=parseInt(m[2],10);return"rgb("+(Math.round((x-E)*w)+E)+","+(Math.round((x-M)*w)+M)+","+(Math.round((x-N)*w)+N)+")"}},{key:"shadeHexColor",value:function(l,u){var m=parseInt(u.slice(1),16),x=l<0?0:255,w=l<0?-1*l:l,E=m>>16,M=m>>8&255,N=255&m;return"#"+(16777216+65536*(Math.round((x-E)*w)+E)+256*(Math.round((x-M)*w)+M)+(Math.round((x-N)*w)+N)).toString(16).slice(1)}},{key:"shadeColor",value:function(l,u){return ve.isColorHex(u)?this.shadeHexColor(l,u):this.shadeRGBColor(l,u)}}],[{key:"bind",value:function(l,u){return function(){return l.apply(u,arguments)}}},{key:"isObject",value:function(l){return l&&"object"===t(l)&&!Array.isArray(l)&&null!=l}},{key:"is",value:function(l,u){return Object.prototype.toString.call(u)==="[object "+l+"]"}},{key:"listToArray",value:function(l){var u,m=[];for(u=0;u<l.length;u++)m[u]=l[u];return m}},{key:"extend",value:function(l,u){var m=this;"function"!=typeof Object.assign&&(Object.assign=function(w){if(null==w)throw new TypeError("Cannot convert undefined or null to object");for(var E=Object(w),M=1;M<arguments.length;M++){var N=arguments[M];if(null!=N)for(var H in N)N.hasOwnProperty(H)&&(E[H]=N[H])}return E});var x=Object.assign({},l);return this.isObject(l)&&this.isObject(u)&&Object.keys(u).forEach(function(w){m.isObject(u[w])&&w in l?x[w]=m.extend(l[w],u[w]):Object.assign(x,Me({},w,u[w]))}),x}},{key:"extendArray",value:function(l,u){var m=[];return l.map(function(x){m.push(ve.extend(u,x))}),m}},{key:"monthMod",value:function(l){return l%12}},{key:"clone",value:function(l){if(ve.is("Array",l)){for(var u=[],m=0;m<l.length;m++)u[m]=this.clone(l[m]);return u}if(ve.is("Null",l))return null;if(ve.is("Date",l))return l;if("object"===t(l)){var x={};for(var w in l)l.hasOwnProperty(w)&&(x[w]=this.clone(l[w]));return x}return l}},{key:"log10",value:function(l){return Math.log(l)/Math.LN10}},{key:"roundToBase10",value:function(l){return Math.pow(10,Math.floor(Math.log10(l)))}},{key:"roundToBase",value:function(l,u){return Math.pow(u,Math.floor(Math.log(l)/Math.log(u)))}},{key:"parseNumber",value:function(l){return null===l?l:parseFloat(l)}},{key:"stripNumber",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(l)?l:parseFloat(l.toPrecision(u))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(l){var u=String(l).split(/[eE]/);if(1===u.length)return u[0];var m="",x=l<0?"-":"",w=u[0].replace(".",""),E=Number(u[1])+1;if(E<0){for(m=x+"0.";E++;)m+="0";return m+w.replace(/^-/,"")}for(E-=w.length;E--;)m+="0";return w+m}},{key:"getDimensions",value:function(l){var u=getComputedStyle(l,null),m=l.clientHeight,x=l.clientWidth;return m-=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),[x-=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),m]}},{key:"getBoundingClientRect",value:function(l){var u=l.getBoundingClientRect();return{top:u.top,right:u.right,bottom:u.bottom,left:u.left,width:l.clientWidth,height:l.clientHeight,x:u.left,y:u.top}}},{key:"getLargestStringFromArr",value:function(l){return l.reduce(function(u,m){return Array.isArray(m)&&(m=m.reduce(function(x,w){return x.length>w.length?x:w})),u.length>m.length?u:m},0)}},{key:"hexToRgba",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==l.substring(0,1)&&(l="#999999");var m=l.replace("#","");m=m.match(new RegExp("(.{"+m.length/3+"})","g"));for(var x=0;x<m.length;x++)m[x]=parseInt(1===m[x].length?m[x]+m[x]:m[x],16);return void 0!==u&&m.push(u),"rgba("+m.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(l){return parseFloat(l.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(l){return(l=l.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===l.length?"#"+("0"+parseInt(l[1],10).toString(16)).slice(-2)+("0"+parseInt(l[2],10).toString(16)).slice(-2)+("0"+parseInt(l[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(l){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(l)}},{key:"getPolygonPos",value:function(l,u){for(var m=[],x=2*Math.PI/u,w=0;w<u;w++){var E={};E.x=l*Math.sin(w*x),E.y=-l*Math.cos(w*x),m.push(E)}return m}},{key:"polarToCartesian",value:function(l,u,m,x){var w=(x-90)*Math.PI/180;return{x:l+m*Math.cos(w),y:u+m*Math.sin(w)}}},{key:"escapeString",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return l.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,u)}},{key:"negToZero",value:function(l){return l<0?0:l}},{key:"moveIndexInArray",value:function(l,u,m){if(m>=l.length)for(var x=m-l.length+1;x--;)l.push(void 0);return l.splice(m,0,l.splice(u,1)[0]),l}},{key:"extractNumber",value:function(l){return parseFloat(l.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(l,u){for(;(l=l.parentElement)&&!l.classList.contains(u););return l}},{key:"setELstyles",value:function(l,u){for(var m in u)u.hasOwnProperty(m)&&(l.style.key=u[m])}},{key:"isNumber",value:function(l){return!isNaN(l)&&parseFloat(Number(l))===l&&!isNaN(parseInt(l,10))}},{key:"isFloat",value:function(l){return Number(l)===l&&l%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var l=window.navigator.userAgent,u=l.indexOf("MSIE ");if(u>0)return parseInt(l.substring(u+5,l.indexOf(".",u)),10);if(l.indexOf("Trident/")>0){var m=l.indexOf("rv:");return parseInt(l.substring(m+3,l.indexOf(".",m)),10)}var x=l.indexOf("Edge/");return x>0&&parseInt(l.substring(x+5,l.indexOf(".",x)),10)}},{key:"getGCD",value:function(l,u){var x=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(l,u))));for(l=Math.round(Math.abs(l)*x),u=Math.round(Math.abs(u)*x);u;){var w=u;u=l%u,l=w}return l/x}},{key:"getPrimeFactors",value:function(l){for(var u=[],m=2;l>=2;)l%m==0?(u.push(m),l/=m):m++;return u}},{key:"mod",value:function(l,u){var x=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(l,u))));return(l=Math.round(Math.abs(l)*x))%(u=Math.round(Math.abs(u)*x))/x}}]),ve}(),yi=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.setEasingFunctions()}return Be(ve,[{key:"setEasingFunctions",value:function(){var l;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":l="-";break;case"easein":l="<";break;case"easeout":l=">";break;case"easeinout":default:l="<>";break;case"swing":l=function(u){var m=1.70158;return(u-=1)*u*((m+1)*u+m)+1};break;case"bounce":l=function(u){return u<1/2.75?7.5625*u*u:u<2/2.75?7.5625*(u-=1.5/2.75)*u+.75:u<2.5/2.75?7.5625*(u-=2.25/2.75)*u+.9375:7.5625*(u-=2.625/2.75)*u+.984375};break;case"elastic":l=function(u){return u===!!u?u:Math.pow(2,-10*u)*Math.sin((u-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=l}}},{key:"animateLine",value:function(l,u,m,x){l.attr(u).animate(x).attr(m)}},{key:"animateMarker",value:function(l,u,m,x,w,E){u||(u=0),l.attr({r:u,width:u,height:u}).animate(x,w).attr({r:m,width:m.width,height:m.height}).afterAll(function(){E()})}},{key:"animateCircle",value:function(l,u,m,x,w){l.attr({r:u.r,cx:u.cx,cy:u.cy}).animate(x,w).attr({r:m.r,cx:m.cx,cy:m.cy})}},{key:"animateRect",value:function(l,u,m,x,w){l.attr(u).animate(x).attr(m).afterAll(function(){return w()})}},{key:"animatePathsGradually",value:function(l){var Z=this.w,J=0;Z.config.chart.animations.animateGradually.enabled&&(J=Z.config.chart.animations.animateGradually.delay),Z.config.chart.animations.dynamicAnimation.enabled&&Z.globals.dataChanged&&"bar"!==Z.config.chart.type&&(J=0),this.morphSVG(l.el,l.realIndex,l.j,"line"!==Z.config.chart.type||Z.globals.comboCharts?l.fill:"stroke",l.pathFrom,l.pathTo,l.speed,l.delay*J)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(l){var u=l.el;u.classList.remove("apexcharts-element-hidden"),u.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(l){var u=this.w;u.globals.animationEnded||(u.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof u.config.chart.events.animationEnd&&u.config.chart.events.animationEnd(this.ctx,{el:l,w:u}))}},{key:"morphSVG",value:function(l,u,m,x,w,E,M,N){var H=this,Z=this.w;w||(w=l.attr("pathFrom")),E||(E=l.attr("pathTo"));var J=function(ne){return"radar"===Z.config.chart.type&&(M=1),"M 0 ".concat(Z.globals.gridHeight)};(!w||w.indexOf("undefined")>-1||w.indexOf("NaN")>-1)&&(w=J()),(!E||E.indexOf("undefined")>-1||E.indexOf("NaN")>-1)&&(E=J()),Z.globals.shouldAnimate||(M=1),l.plot(w).animate(1,Z.globals.easing,N).plot(w).animate(M,Z.globals.easing,N).plot(E).afterAll(function(){tt.isNumber(m)?m===Z.globals.series[Z.globals.maxValsInArrayIndex].length-2&&Z.globals.shouldAnimate&&H.animationCompleted(l):"none"!==x&&Z.globals.shouldAnimate&&(!Z.globals.comboCharts&&u===Z.globals.series.length-1||Z.globals.comboCharts)&&H.animationCompleted(l),H.showDelayedElements()})}}]),ve}(),Pi=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"getDefaultFilter",value:function(l,u){var m=this.w;l.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==m.config.states.normal.filter?this.applyFilter(l,u,m.config.states.normal.filter.type,m.config.states.normal.filter.value):m.config.chart.dropShadow.enabled&&this.dropShadow(l,m.config.chart.dropShadow,u)}},{key:"addNormalFilter",value:function(l,u){var m=this.w;m.config.chart.dropShadow.enabled&&!l.node.classList.contains("apexcharts-marker")&&this.dropShadow(l,m.config.chart.dropShadow,u)}},{key:"addLightenFilter",value:function(l,u,m){var x=this,w=this.w,E=m.intensity;l.unfilter(!0),new window.SVG.Filter,l.filter(function(M){var N=w.config.chart.dropShadow;(N.enabled?x.addShadow(M,u,N):M).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:E}})}),l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)}},{key:"addDarkenFilter",value:function(l,u,m){var x=this,w=this.w,E=m.intensity;l.unfilter(!0),new window.SVG.Filter,l.filter(function(M){var N=w.config.chart.dropShadow;(N.enabled?x.addShadow(M,u,N):M).componentTransfer({rgb:{type:"linear",slope:E}})}),l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)}},{key:"applyFilter",value:function(l,u,m){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(m){case"none":this.addNormalFilter(l,u);break;case"lighten":this.addLightenFilter(l,u,{intensity:x});break;case"darken":this.addDarkenFilter(l,u,{intensity:x})}}},{key:"addShadow",value:function(l,u,m){var x,w=this.w,E=m.blur,M=m.top,N=m.left,H=m.color,Z=m.opacity;if((null===(x=w.config.chart.dropShadow.enabledOnSeries)||void 0===x?void 0:x.length)>0&&-1===w.config.chart.dropShadow.enabledOnSeries.indexOf(u))return l;var J=l.flood(Array.isArray(H)?H[u]:H,Z).composite(l.sourceAlpha,"in").offset(N,M).gaussianBlur(E).merge(l.source);return l.blend(l.source,J)}},{key:"dropShadow",value:function(l,u){var m,x,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=u.top,M=u.left,N=u.blur,H=u.color,Z=u.opacity,J=u.noUserSpaceOnUse,ne=this.w;return l.unfilter(!0),tt.isIE()&&"radialBar"===ne.config.chart.type||(null===(m=ne.config.chart.dropShadow.enabledOnSeries)||void 0===m?void 0:m.length)>0&&-1===(null===(x=ne.config.chart.dropShadow.enabledOnSeries)||void 0===x?void 0:x.indexOf(w))||(H=Array.isArray(H)?H[w]:H,l.filter(function(fe){var ye;ye=tt.isSafari()||tt.isFirefox()||tt.isIE()?fe.flood(H,Z).composite(fe.sourceAlpha,"in").offset(M,E).gaussianBlur(N):fe.flood(H,Z).composite(fe.sourceAlpha,"in").offset(M,E).gaussianBlur(N).merge(fe.source),fe.blend(fe.source,ye)}),J||l.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(l.filterer.node)),l}},{key:"setSelectionFilter",value:function(l,u,m){var x=this.w;if(void 0!==x.globals.selectedDataPoints[u]&&x.globals.selectedDataPoints[u].indexOf(m)>-1){l.node.setAttribute("selected",!0);var w=x.config.states.active.filter;"none"!==w&&this.applyFilter(l,u,w.type,w.value)}}},{key:"_scaleFilterSize",value:function(l){!function(u){for(var m in u)u.hasOwnProperty(m)&&l.setAttribute(m,u[m])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),ve}(),Dt=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"roundPathCorners",value:function(l,u){function m(mt,$t,Xt){var Li=$t.x-mt.x,Ji=$t.y-mt.y,ln=Math.sqrt(Li*Li+Ji*Ji);return x(mt,$t,Math.min(1,Xt/ln))}function x(mt,$t,Xt){return{x:mt.x+($t.x-mt.x)*Xt,y:mt.y+($t.y-mt.y)*Xt}}function w(mt,$t){mt.length>2&&(mt[mt.length-2]=$t.x,mt[mt.length-1]=$t.y)}function E(mt){return{x:parseFloat(mt[mt.length-2]),y:parseFloat(mt[mt.length-1])}}l.indexOf("NaN")>-1&&(l="");var M=l.split(/[,\s]/).reduce(function(mt,$t){var Xt=$t.match("([a-zA-Z])(.+)");return Xt?(mt.push(Xt[1]),mt.push(Xt[2])):mt.push($t),mt},[]).reduce(function(mt,$t){return parseFloat($t)==$t&&mt.length?mt[mt.length-1].push($t):mt.push([$t]),mt},[]),N=[];if(M.length>1){var H=E(M[0]),Z=null;"Z"==M[M.length-1][0]&&M[0].length>2&&(M[M.length-1]=Z=["L",H.x,H.y]),N.push(M[0]);for(var J=1;J<M.length;J++){var ne=N[N.length-1],fe=M[J],ye=fe==Z?M[1]:M[J+1];if(ye&&ne&&ne.length>2&&"L"==fe[0]&&ye.length>2&&"L"==ye[0]){var De,Pe,Se=E(ne),ze=E(fe),U=E(ye);De=m(ze,Se,u),Pe=m(ze,U,u),w(fe,De),fe.origPoint=ze,N.push(fe);var le=x(De,ze,.5),we=x(ze,Pe,.5),Le=["C",le.x,le.y,we.x,we.y,Pe.x,Pe.y];Le.origPoint=ze,N.push(Le)}else N.push(fe)}if(Z){var $e=E(N[N.length-1]);N.push(["Z"]),w(N[0],$e)}}else N=M;return N.reduce(function(mt,$t){return mt+$t.join(" ")+" "},"")}},{key:"drawLine",value:function(l,u,m,x){var w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,N=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:l,y1:u,x2:m,y2:x,stroke:w,"stroke-dasharray":E,"stroke-width":M,"stroke-linecap":N})}},{key:"drawRect",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,N=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,Z=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,J=this.w.globals.dom.Paper.rect();return J.attr({x:l,y:u,width:m>0?m:0,height:x>0?x:0,rx:w,ry:w,opacity:M,"stroke-width":null!==N?N:0,stroke:null!==H?H:"none","stroke-dasharray":Z}),J.node.setAttribute("fill",E),J}},{key:"drawPolygon",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(l).attr({fill:x,stroke:u,"stroke-width":m})}},{key:"drawCircle",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l<0&&(l=0);var m=this.w.globals.dom.Paper.circle(2*l);return null!==u&&m.attr(u),m}},{key:"drawPath",value:function(l){var u=l.d,m=void 0===u?"":u,x=l.stroke,w=void 0===x?"#a8a8a8":x,E=l.strokeWidth,M=void 0===E?1:E,N=l.fill,H=l.fillOpacity,Z=void 0===H?1:H,J=l.strokeOpacity,ne=void 0===J?1:J,fe=l.classes,ye=l.strokeLinecap,De=void 0===ye?null:ye,Pe=l.strokeDashArray,Se=void 0===Pe?0:Pe,ze=this.w;return null===De&&(De=ze.config.stroke.lineCap),(m.indexOf("undefined")>-1||m.indexOf("NaN")>-1)&&(m="M 0 ".concat(ze.globals.gridHeight)),ze.globals.dom.Paper.path(m).attr({fill:N,"fill-opacity":Z,stroke:w,"stroke-opacity":ne,"stroke-linecap":De,"stroke-width":M,"stroke-dasharray":Se,class:fe})}},{key:"group",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=this.w.globals.dom.Paper.group();return null!==l&&u.attr(l),u}},{key:"move",value:function(l,u){return["M",l,u].join(" ")}},{key:"line",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=null;return null===m?x=[" L",l,u].join(" "):"H"===m?x=[" H",l].join(" "):"V"===m&&(x=[" V",u].join(" ")),x}},{key:"curve",value:function(l,u,m,x,w,E){return["C",l,u,m,x,w,E].join(" ")}},{key:"quadraticCurve",value:function(l,u,m,x){return["Q",l,u,m,x].join(" ")}},{key:"arc",value:function(l,u,m,x,w,E,M){var N="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(N="a"),[N,l,u,m,x,w,E,M].join(" ")}},{key:"renderPaths",value:function(l){var u,m=l.j,x=l.realIndex,w=l.pathFrom,E=l.pathTo,M=l.stroke,N=l.strokeWidth,H=l.strokeLinecap,Z=l.fill,J=l.animationDelay,ne=l.initialSpeed,fe=l.dataChangeSpeed,ye=l.className,De=l.shouldClipToGrid,Pe=void 0===De||De,Se=l.bindEventsOnPaths,ze=void 0===Se||Se,U=l.drawShadow,le=void 0===U||U,we=this.w,Le=new Pi(this.ctx),$e=new yi(this.ctx),mt=this.w.config.chart.animations.enabled,$t=mt&&this.w.config.chart.animations.dynamicAnimation.enabled,Xt=!!(mt&&!we.globals.resized||$t&&we.globals.dataChanged&&we.globals.shouldAnimate);Xt?u=w:(u=E,we.globals.animationEnded=!0);var Ji,Li=we.config.stroke.dashArray;Ji=Array.isArray(Li)?Li[x]:we.config.stroke.dashArray;var ln=this.drawPath({d:u,stroke:M,strokeWidth:N,fill:Z,fillOpacity:1,classes:ye,strokeLinecap:H,strokeDashArray:Ji});ln.attr("index",x),Pe&&ln.attr({"clip-path":"url(#gridRectMask".concat(we.globals.cuid,")")}),"none"!==we.config.states.normal.filter.type?Le.getDefaultFilter(ln,x):we.config.chart.dropShadow.enabled&&le&&Le.dropShadow(ln,we.config.chart.dropShadow,x),ze&&(ln.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,ln)),ln.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,ln)),ln.node.addEventListener("mousedown",this.pathMouseDown.bind(this,ln))),ln.attr({pathTo:E,pathFrom:w});var cr={el:ln,j:m,realIndex:x,pathFrom:w,pathTo:E,fill:Z,strokeWidth:N,delay:J};return!mt||we.globals.resized||we.globals.dataChanged?!we.globals.resized&&we.globals.dataChanged||$e.showDelayedElements():$e.animatePathsGradually(Ze(Ze({},cr),{},{speed:ne})),we.globals.dataChanged&&$t&&Xt&&$e.animatePathsGradually(Ze(Ze({},cr),{},{speed:fe})),ln}},{key:"drawPattern",value:function(l,u,m){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(u,m,function(E){"horizontalLines"===l?E.line(0,0,m,0).stroke({color:x,width:w+1}):"verticalLines"===l?E.line(0,0,0,u).stroke({color:x,width:w+1}):"slantedLines"===l?E.line(0,0,u,m).stroke({color:x,width:w}):"squares"===l?E.rect(u,m).fill("none").stroke({color:x,width:w}):"circles"===l&&E.circle(u).fill("none").stroke({color:x,width:w})})}},{key:"drawGradient",value:function(l,u,m,x,w){var E,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,Z=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,J=this.w;u.length<9&&0===u.indexOf("#")&&(u=tt.hexToRgba(u,x)),m.length<9&&0===m.indexOf("#")&&(m=tt.hexToRgba(m,w));var ne=0,fe=1,ye=1,De=null;null!==N&&(ne=void 0!==N[0]?N[0]/100:0,fe=void 0!==N[1]?N[1]/100:1,ye=void 0!==N[2]?N[2]/100:1,De=void 0!==N[3]?N[3]/100:null);var Pe=!("donut"!==J.config.chart.type&&"pie"!==J.config.chart.type&&"polarArea"!==J.config.chart.type&&"bubble"!==J.config.chart.type);return E=J.globals.dom.Paper.gradient(Pe?"radial":"linear",null===H||0===H.length?function(U){U.at(ne,u,x),U.at(fe,m,w),U.at(ye,m,w),null!==De&&U.at(De,u,x)}:function(U){(Array.isArray(H[Z])?H[Z]:H).forEach(function(le){U.at(le.offset/100,le.color,le.opacity)})}),Pe?E.attr("bubble"!==J.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:J.globals.gridWidth/2,cy:J.globals.gridHeight/2,r:M}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===l?E.from(0,0).to(0,1):"diagonal"===l?E.from(0,0).to(1,1):"horizontal"===l?E.from(0,1).to(1,1):"diagonal2"===l&&E.from(1,0).to(0,1),E}},{key:"getTextBasedOnMaxWidth",value:function(l){var u=l.text,m=l.maxWidth,E=this.getTextRects(u,l.fontSize,l.fontFamily),N=Math.floor(m/(E.width/u.length));return m<E.width?u.slice(0,N-3)+"...":u}},{key:"drawText",value:function(l){var u=this,m=l.x,x=l.y,w=l.text,E=l.textAnchor,M=l.fontSize,N=l.fontFamily,H=l.fontWeight,Z=l.foreColor,J=l.opacity,ne=l.maxWidth,fe=l.cssClass,ye=void 0===fe?"":fe,De=l.isPlainText,Pe=void 0===De||De,Se=l.dominantBaseline,ze=void 0===Se?"auto":Se,U=this.w;void 0===w&&(w="");var le=w;E||(E="start"),Z&&Z.length||(Z=U.config.chart.foreColor),H=H||"regular";var we,Le={maxWidth:ne,fontSize:M=M||"11px",fontFamily:N=N||U.config.chart.fontFamily};return Array.isArray(w)?we=U.globals.dom.Paper.text(function($e){for(var mt=0;mt<w.length;mt++)le=w[mt],ne&&(le=u.getTextBasedOnMaxWidth(Ze({text:w[mt]},Le))),0===mt?$e.tspan(le):$e.tspan(le).newLine()}):(ne&&(le=this.getTextBasedOnMaxWidth(Ze({text:w},Le))),we=Pe?U.globals.dom.Paper.plain(w):U.globals.dom.Paper.text(function($e){return $e.tspan(le)})),we.attr({x:m,y:x,"text-anchor":E,"dominant-baseline":ze,"font-size":M,"font-family":N,"font-weight":H,fill:Z,class:"apexcharts-text "+ye}),we.node.style.fontFamily=N,we.node.style.opacity=J,we}},{key:"createGroupWithAttributes",value:function(l,u,m,x){var w=this.group();return m.forEach(function(E){return w.add(E)}),w.attr({class:x.class?x.class:"",cy:u,cx:l}),w}},{key:"drawPlus",value:function(l,u,m,x){var w=m/2,E=this.drawLine(l,u-w,l,u+w,x.pointStrokeColor,x.pointStrokeDashArray,x.pointStrokeWidth,x.pointStrokeLineCap),M=this.drawLine(l-w,u,l+w,u,x.pointStrokeColor,x.pointStrokeDashArray,x.pointStrokeWidth,x.pointStrokeLineCap);return this.createGroupWithAttributes(l,u,[E,M],x)}},{key:"drawX",value:function(l,u,m,x){var w=m/2,E=this.drawLine(l-w,u-w,l+w,u+w,x.pointStrokeColor,x.pointStrokeDashArray,x.pointStrokeWidth,x.pointStrokeLineCap),M=this.drawLine(l-w,u+w,l+w,u-w,x.pointStrokeColor,x.pointStrokeDashArray,x.pointStrokeWidth,x.pointStrokeLineCap);return this.createGroupWithAttributes(l,u,[E,M],x)}},{key:"drawMarker",value:function(l,u,m){l=l||0;var x=m.pSize||0,w=null;if("X"===m?.shape||"x"===m?.shape)w=this.drawX(l,u,x,m);else if("plus"===m?.shape||"+"===m?.shape)w=this.drawPlus(l,u,x,m);else if("square"===m.shape||"rect"===m.shape){var E=void 0===m.pRadius?x/2:m.pRadius;null!==u&&x||(x=0,E=0);var M=1.2*x+E,N=this.drawRect(M,M,M,M,E);N.attr({x:l-M/2,y:u-M/2,cx:l,cy:u,class:m.class?m.class:"",fill:m.pointFillColor,"fill-opacity":m.pointFillOpacity?m.pointFillOpacity:1,stroke:m.pointStrokeColor,"stroke-width":m.pointStrokeWidth?m.pointStrokeWidth:0,"stroke-opacity":m.pointStrokeOpacity?m.pointStrokeOpacity:1}),w=N}else"circle"!==m.shape&&m.shape||(tt.isNumber(u)||(x=0,u=0),w=this.drawCircle(x,{cx:l,cy:u,class:m.class?m.class:"",stroke:m.pointStrokeColor,fill:m.pointFillColor,"fill-opacity":m.pointFillOpacity?m.pointFillOpacity:1,"stroke-width":m.pointStrokeWidth?m.pointStrokeWidth:0,"stroke-opacity":m.pointStrokeOpacity?m.pointStrokeOpacity:1}));return w}},{key:"pathMouseEnter",value:function(l,u){var m=this.w,x=new Pi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),E=parseInt(l.node.getAttribute("j"),10);if("function"==typeof m.config.chart.events.dataPointMouseEnter&&m.config.chart.events.dataPointMouseEnter(u,this.ctx,{seriesIndex:w,dataPointIndex:E,w:m}),this.ctx.events.fireEvent("dataPointMouseEnter",[u,this.ctx,{seriesIndex:w,dataPointIndex:E,w:m}]),("none"===m.config.states.active.filter.type||"true"!==l.node.getAttribute("selected"))&&"none"!==m.config.states.hover.filter.type&&!m.globals.isTouchDevice){var M=m.config.states.hover.filter;x.applyFilter(l,w,M.type,M.value)}}},{key:"pathMouseLeave",value:function(l,u){var m=this.w,x=new Pi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),E=parseInt(l.node.getAttribute("j"),10);"function"==typeof m.config.chart.events.dataPointMouseLeave&&m.config.chart.events.dataPointMouseLeave(u,this.ctx,{seriesIndex:w,dataPointIndex:E,w:m}),this.ctx.events.fireEvent("dataPointMouseLeave",[u,this.ctx,{seriesIndex:w,dataPointIndex:E,w:m}]),"none"!==m.config.states.active.filter.type&&"true"===l.node.getAttribute("selected")||"none"!==m.config.states.hover.filter.type&&x.getDefaultFilter(l,w)}},{key:"pathMouseDown",value:function(l,u){var m=this.w,x=new Pi(this.ctx),w=parseInt(l.node.getAttribute("index"),10),E=parseInt(l.node.getAttribute("j"),10),M="false";if("true"===l.node.getAttribute("selected")){if(l.node.setAttribute("selected","false"),m.globals.selectedDataPoints[w].indexOf(E)>-1){var N=m.globals.selectedDataPoints[w].indexOf(E);m.globals.selectedDataPoints[w].splice(N,1)}}else{if(!m.config.states.active.allowMultipleDataPointsSelection&&m.globals.selectedDataPoints.length>0){m.globals.selectedDataPoints=[];var H=m.globals.dom.Paper.select(".apexcharts-series path").members,Z=m.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,J=function(ye){Array.prototype.forEach.call(ye,function(De){De.node.setAttribute("selected","false"),x.getDefaultFilter(De,w)})};J(H),J(Z)}l.node.setAttribute("selected","true"),M="true",void 0===m.globals.selectedDataPoints[w]&&(m.globals.selectedDataPoints[w]=[]),m.globals.selectedDataPoints[w].push(E)}if("true"===M){var ne=m.config.states.active.filter;if("none"!==ne)x.applyFilter(l,w,ne.type,ne.value);else if("none"!==m.config.states.hover.filter&&!m.globals.isTouchDevice){var fe=m.config.states.hover.filter;x.applyFilter(l,w,fe.type,fe.value)}}else"none"!==m.config.states.active.filter.type&&("none"===m.config.states.hover.filter.type||m.globals.isTouchDevice?x.getDefaultFilter(l,w):x.applyFilter(l,w,(fe=m.config.states.hover.filter).type,fe.value));"function"==typeof m.config.chart.events.dataPointSelection&&m.config.chart.events.dataPointSelection(u,this.ctx,{selectedDataPoints:m.globals.selectedDataPoints,seriesIndex:w,dataPointIndex:E,w:m}),u&&this.ctx.events.fireEvent("dataPointSelection",[u,this.ctx,{selectedDataPoints:m.globals.selectedDataPoints,seriesIndex:w,dataPointIndex:E,w:m}])}},{key:"rotateAroundCenter",value:function(l){var u={};return l&&"function"==typeof l.getBBox&&(u=l.getBBox()),{x:u.x+u.width/2,y:u.y+u.height/2}}},{key:"getTextRects",value:function(l,u,m,x){var w=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],E=this.w,M=this.drawText({x:-200,y:-200,text:l,textAnchor:"start",fontSize:u,fontFamily:m,foreColor:"#fff",opacity:0});x&&M.attr("transform",x),E.globals.dom.Paper.add(M);var N=M.bbox();return w||(N=M.node.getBoundingClientRect()),M.remove(),{width:N.width,height:N.height}}},{key:"placeTextWithEllipsis",value:function(l,u,m){if("function"==typeof l.getComputedTextLength&&(l.textContent=u,u.length>0&&l.getComputedTextLength()>=m/1.1)){for(var x=u.length-3;x>0;x-=3)if(l.getSubStringLength(0,x)<=m/1.1)return void(l.textContent=u.substring(0,x)+"...");l.textContent="."}}}],[{key:"setAttrs",value:function(l,u){for(var m in u)u.hasOwnProperty(m)&&l.setAttribute(m,u[m])}}]),ve}(),Fi=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"getStackedSeriesTotals",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=this.w,m=[];if(0===u.globals.series.length)return m;for(var x=0;x<u.globals.series[u.globals.maxValsInArrayIndex].length;x++){for(var w=0,E=0;E<u.globals.series.length;E++)void 0!==u.globals.series[E][x]&&-1===l.indexOf(E)&&(w+=u.globals.series[E][x]);m.push(w)}return m}},{key:"getSeriesTotalByIndex",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===l?this.w.config.series.reduce(function(u,m){return u+m},0):this.w.globals.series[l].reduce(function(u,m){return u+m},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var l=this,u=this.w,m=[];return u.globals.seriesGroups.forEach(function(x){var w=[];u.config.series.forEach(function(M,N){x.indexOf(M.name)>-1&&w.push(N)});var E=u.globals.series.map(function(M,N){return-1===w.indexOf(N)?N:-1}).filter(function(M){return-1!==M});m.push(l.getStackedSeriesTotals(E))}),m}},{key:"isSeriesNull",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===l?this.w.config.series.filter(function(u){return null!==u}):this.w.config.series[l].data.filter(function(u){return null!==u})).length}},{key:"seriesHaveSameValues",value:function(l){return this.w.globals.series[l].every(function(u,m,x){return u===x[0]})}},{key:"getCategoryLabels",value:function(l){var u=this.w,m=l.slice();return u.config.xaxis.convertedCatToNumeric&&(m=l.map(function(x,w){return u.config.xaxis.labels.formatter(x-u.globals.minX+1)})),m}},{key:"getLargestSeries",value:function(){var l=this.w;l.globals.maxValsInArrayIndex=l.globals.series.map(function(u){return u.length}).indexOf(Math.max.apply(Math,l.globals.series.map(function(u){return u.length})))}},{key:"getLargestMarkerSize",value:function(){var l=this.w,u=0;return l.globals.markers.size.forEach(function(m){u=Math.max(u,m)}),l.config.markers.discrete&&l.config.markers.discrete.length&&l.config.markers.discrete.forEach(function(m){u=Math.max(u,m.size)}),u>0&&(u+=l.config.markers.hover.sizeOffset+1),l.globals.markers.largestSize=u,u}},{key:"getSeriesTotals",value:function(){var l=this.w;l.globals.seriesTotals=l.globals.series.map(function(u,m){var x=0;if(Array.isArray(u))for(var w=0;w<u.length;w++)x+=u[w];else x+=u;return x})}},{key:"getSeriesTotalsXRange",value:function(l,u){var m=this.w;return m.globals.series.map(function(x,w){for(var E=0,M=0;M<x.length;M++)m.globals.seriesX[w][M]>l&&m.globals.seriesX[w][M]<u&&(E+=x[M]);return E})}},{key:"getPercentSeries",value:function(){var l=this.w;l.globals.seriesPercent=l.globals.series.map(function(u,m){var x=[];if(Array.isArray(u))for(var w=0;w<u.length;w++){var E=l.globals.stackedSeriesTotals[w],M=0;E&&(M=100*u[w]/E),x.push(M)}else{var N=100*u/l.globals.seriesTotals.reduce(function(H,Z){return H+Z},0);x.push(N)}return x})}},{key:"getCalculatedRatios",value:function(){var l,u,m,x=this.w.globals,w=[],E=0,M=[],N=.1,H=0;if(x.yRange=[],x.isMultipleYAxis)for(var Z=0;Z<x.minYArr.length;Z++)x.yRange.push(Math.abs(x.minYArr[Z]-x.maxYArr[Z])),M.push(0);else x.yRange.push(Math.abs(x.minY-x.maxY));x.xRange=Math.abs(x.maxX-x.minX),x.zRange=Math.abs(x.maxZ-x.minZ);for(var J=0;J<x.yRange.length;J++)w.push(x.yRange[J]/x.gridHeight);if(u=x.xRange/x.gridWidth,l=x.yRange/x.gridWidth,m=x.xRange/x.gridHeight,(E=x.zRange/x.gridHeight*16)||(E=1),x.minY!==Number.MIN_VALUE&&0!==Math.abs(x.minY)&&(x.hasNegs=!0),x.isMultipleYAxis){M=[];for(var ne=0;ne<w.length;ne++)M.push(-x.minYArr[ne]/w[ne])}else M.push(-x.minY/w[0]),x.minY!==Number.MIN_VALUE&&0!==Math.abs(x.minY)&&(N=-x.minY/l,H=x.minX/u);return{yRatio:w,invertedYRatio:l,zRatio:E,xRatio:u,invertedXRatio:m,baseLineInvertedY:N,baseLineY:M,baseLineX:H}}},{key:"getLogSeries",value:function(l){var u=this,m=this.w;return m.globals.seriesLog=l.map(function(x,w){return m.config.yaxis[w]&&m.config.yaxis[w].logarithmic?x.map(function(E){return null===E?null:u.getLogVal(m.config.yaxis[w].logBase,E,w)}):x}),m.globals.invalidLogScale?l:m.globals.seriesLog}},{key:"getBaseLog",value:function(l,u){return Math.log(u)/Math.log(l)}},{key:"getLogVal",value:function(l,u,m){if(0===u)return 0;var x=this.w,w=0===x.globals.minYArr[m]?-1:this.getBaseLog(l,x.globals.minYArr[m]),E=(0===x.globals.maxYArr[m]?0:this.getBaseLog(l,x.globals.maxYArr[m]))-w;return u<1?u/E:(this.getBaseLog(l,u)-w)/E}},{key:"getLogYRatios",value:function(l){var u=this,m=this.w,x=this.w.globals;return x.yLogRatio=l.slice(),x.logYRange=x.yRange.map(function(w,E){if(m.config.yaxis[E]&&u.w.config.yaxis[E].logarithmic){var M,N=-Number.MAX_VALUE,H=Number.MIN_VALUE;return x.seriesLog.forEach(function(Z,J){Z.forEach(function(ne){m.config.yaxis[J]&&m.config.yaxis[J].logarithmic&&(N=Math.max(ne,N),H=Math.min(ne,H))})}),M=Math.pow(x.yRange[E],Math.abs(H-N)/x.yRange[E]),x.yLogRatio[E]=M/x.gridHeight,M}}),x.invalidLogScale?l.slice():x.yLogRatio}}],[{key:"checkComboSeries",value:function(l){var u=!1,m=0,x=0;return l.length&&void 0!==l[0].type&&l.forEach(function(w){"bar"!==w.type&&"column"!==w.type&&"candlestick"!==w.type&&"boxPlot"!==w.type||m++,void 0!==w.type&&x++}),x>0&&(u=!0),{comboBarCount:m,comboCharts:u}}},{key:"extendArrayProps",value:function(l,u,m){var x,w,E,M,N,H;return null!==(x=u)&&void 0!==x&&x.yaxis&&(u=l.extendYAxis(u,m)),null!==(w=u)&&void 0!==w&&w.annotations&&(u.annotations.yaxis&&(u=l.extendYAxisAnnotations(u)),null!==(E=u)&&void 0!==E&&null!==(M=E.annotations)&&void 0!==M&&M.xaxis&&(u=l.extendXAxisAnnotations(u)),null!==(N=u)&&void 0!==N&&null!==(H=N.annotations)&&void 0!==H&&H.points&&(u=l.extendPointAnnotations(u))),u}}]),ve}(),xi=function(){function ve(l){j(this,ve),this.w=l.w,this.annoCtx=l}return Be(ve,[{key:"setOrientations",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===l.label.orientation){var w=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==u?u:0,"']"));if(null!==w){var E=w.getBoundingClientRect();w.setAttribute("x",parseFloat(w.getAttribute("x"))-E.height+4),w.setAttribute("y","top"===l.label.position?parseFloat(w.getAttribute("y"))+E.width:parseFloat(w.getAttribute("y"))-E.width);var M=this.annoCtx.graphics.rotateAroundCenter(w),H=M.y;w.setAttribute("transform","rotate(-90 ".concat(M.x," ").concat(H,")"))}}}},{key:"addBackgroundToAnno",value:function(l,u){var m=this.w;if(!l||void 0===u.label.text||void 0!==u.label.text&&!String(u.label.text).trim())return null;var x=m.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),w=l.getBoundingClientRect(),E=u.label.style.padding.left,M=u.label.style.padding.right,N=u.label.style.padding.top,H=u.label.style.padding.bottom;"vertical"===u.label.orientation&&(N=u.label.style.padding.left,H=u.label.style.padding.right,E=u.label.style.padding.top,M=u.label.style.padding.bottom);var ne=this.annoCtx.graphics.drawRect(w.left-x.left-E-m.globals.barPadForNumericAxis,w.top-x.top-N,w.width+E+M,w.height+N+H,u.label.borderRadius,u.label.style.background,1,u.label.borderWidth,u.label.borderColor,0);return u.id&&ne.node.classList.add(u.id),ne}},{key:"annotationsBackground",value:function(){var l=this,u=this.w,m=function(x,w,E){var M=u.globals.dom.baseEl.querySelector(".apexcharts-".concat(E,"-annotations .apexcharts-").concat(E,"-annotation-label[rel='").concat(w,"']"));if(M){var N=M.parentNode,H=l.addBackgroundToAnno(M,x);H&&(N.insertBefore(H.node,M),x.label.mouseEnter&&H.node.addEventListener("mouseenter",x.label.mouseEnter.bind(l,x)),x.label.mouseLeave&&H.node.addEventListener("mouseleave",x.label.mouseLeave.bind(l,x)),x.label.click&&H.node.addEventListener("click",x.label.click.bind(l,x)))}};u.config.annotations.xaxis.map(function(x,w){m(x,w,"xaxis")}),u.config.annotations.yaxis.map(function(x,w){m(x,w,"yaxis")}),u.config.annotations.points.map(function(x,w){m(x,w,"point")})}},{key:"getY1Y2",value:function(l,u){var m,x="y1"===l?u.y:u.y2,w=this.w;if(this.annoCtx.invertAxis){var E=w.globals.labels;w.config.xaxis.convertedCatToNumeric&&(E=w.globals.categoryLabels);var M=E.indexOf(x),N=w.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(M+1)+")");m=N?parseFloat(N.getAttribute("y")):(w.globals.gridHeight/E.length-1)*(M+1)-w.globals.barHeight,void 0!==u.seriesIndex&&w.globals.barHeight&&(m=m-w.globals.barHeight/2*(w.globals.series.length-1)+w.globals.barHeight*u.seriesIndex)}else{var H;H=w.config.yaxis[u.yAxisIndex].logarithmic?(x=new Fi(this.annoCtx.ctx).getLogVal(x,u.yAxisIndex))/w.globals.yLogRatio[u.yAxisIndex]:(x-w.globals.minYArr[u.yAxisIndex])/(w.globals.yRange[u.yAxisIndex]/w.globals.gridHeight),m=w.globals.gridHeight-H,!u.marker||null!=u.y||(m=0),w.config.yaxis[u.yAxisIndex]&&w.config.yaxis[u.yAxisIndex].reversed&&(m=H)}return"string"==typeof x&&x.indexOf("px")>-1&&(m=parseFloat(x)),m}},{key:"getX1X2",value:function(l,u){var m=this.w,x=this.annoCtx.invertAxis?m.globals.minY:m.globals.minX,w=this.annoCtx.invertAxis?m.globals.maxY:m.globals.maxX,E=this.annoCtx.invertAxis?m.globals.yRange[0]:m.globals.xRange,M=(u.x-x)/(E/m.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(M=(w-u.x)/(E/m.globals.gridWidth)),"category"!==m.config.xaxis.type&&!m.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||m.globals.dataFormatXNumeric||(M=this.getStringX(u.x));var N=(u.x2-x)/(E/m.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(N=(w-u.x2)/(E/m.globals.gridWidth)),"category"!==m.config.xaxis.type&&!m.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||m.globals.dataFormatXNumeric||(N=this.getStringX(u.x2)),null!=u.x||!u.marker||(M=m.globals.gridWidth),"x1"===l&&"string"==typeof u.x&&u.x.indexOf("px")>-1&&(M=parseFloat(u.x)),"x2"===l&&"string"==typeof u.x2&&u.x2.indexOf("px")>-1&&(N=parseFloat(u.x2)),void 0!==u.seriesIndex&&m.globals.barWidth&&!this.annoCtx.invertAxis&&(M=M-m.globals.barWidth/2*(m.globals.series.length-1)+m.globals.barWidth*u.seriesIndex),"x1"===l?M:N}},{key:"getStringX",value:function(l){var u=this.w,m=l;u.config.xaxis.convertedCatToNumeric&&u.globals.categoryLabels.length&&(l=u.globals.categoryLabels.indexOf(l)+1);var x=u.globals.labels.indexOf(l),w=u.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(x+1)+")");return w&&(m=parseFloat(w.getAttribute("x"))),m}}]),ve}(),fi=function(){function ve(l){j(this,ve),this.w=l.w,this.annoCtx=l,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new xi(this.annoCtx)}return Be(ve,[{key:"addXaxisAnnotation",value:function(l,u,m){var x,w=this.w,E=this.helpers.getX1X2("x1",l),M=l.label.text,N=l.strokeDashArray;if(tt.isNumber(E)){if(null==l.x2){var H=this.annoCtx.graphics.drawLine(E+l.offsetX,0+l.offsetY,E+l.offsetX,w.globals.gridHeight+l.offsetY,l.borderColor,N,l.borderWidth);u.appendChild(H.node),l.id&&H.node.classList.add(l.id)}else{if((x=this.helpers.getX1X2("x2",l))<E){var Z=E;E=x,x=Z}var J=this.annoCtx.graphics.drawRect(E+l.offsetX,0+l.offsetY,x-E,w.globals.gridHeight+l.offsetY,0,l.fillColor,l.opacity,1,l.borderColor,N);J.node.classList.add("apexcharts-annotation-rect"),J.attr("clip-path","url(#gridRectMask".concat(w.globals.cuid,")")),u.appendChild(J.node),l.id&&J.node.classList.add(l.id)}var ne=this.annoCtx.graphics.getTextRects(M,parseFloat(l.label.style.fontSize)),ye=this.annoCtx.graphics.drawText({x:E+l.label.offsetX,y:("top"===l.label.position?4:"center"===l.label.position?w.globals.gridHeight/2+("vertical"===l.label.orientation?ne.width/2:0):w.globals.gridHeight)+l.label.offsetY-("vertical"===l.label.orientation?"top"===l.label.position?ne.width/2-12:-ne.width/2:0),text:M,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});ye.attr({rel:m}),u.appendChild(ye.node),this.annoCtx.helpers.setOrientations(l,m)}}},{key:"drawXAxisAnnotations",value:function(){var l=this,u=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return u.config.annotations.xaxis.map(function(x,w){l.addXaxisAnnotation(x,m.node,w)}),m}}]),ve}(),It=function(){function ve(l){j(this,ve),this.w=l.w,this.annoCtx=l,this.helpers=new xi(this.annoCtx)}return Be(ve,[{key:"addYaxisAnnotation",value:function(l,u,m){var x,w=this.w,E=l.strokeDashArray,M=this.helpers.getY1Y2("y1",l),N=l.label.text;if(null==l.y2){var H=this.annoCtx.graphics.drawLine(0+l.offsetX,M+l.offsetY,this._getYAxisAnnotationWidth(l),M+l.offsetY,l.borderColor,E,l.borderWidth);u.appendChild(H.node),l.id&&H.node.classList.add(l.id)}else{if((x=this.helpers.getY1Y2("y2",l))>M){var Z=M;M=x,x=Z}var J=this.annoCtx.graphics.drawRect(0+l.offsetX,x+l.offsetY,this._getYAxisAnnotationWidth(l),M-x,0,l.fillColor,l.opacity,1,l.borderColor,E);J.node.classList.add("apexcharts-annotation-rect"),J.attr("clip-path","url(#gridRectMask".concat(w.globals.cuid,")")),u.appendChild(J.node),l.id&&J.node.classList.add(l.id)}var fe=this.annoCtx.graphics.drawText({x:("right"===l.label.position?w.globals.gridWidth:"center"===l.label.position?w.globals.gridWidth/2:0)+l.label.offsetX,y:(x??M)+l.label.offsetY-3,text:N,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});fe.attr({rel:m}),u.appendChild(fe.node)}},{key:"_getYAxisAnnotationWidth",value:function(l){var u=this.w;return(l.width.indexOf("%")>-1?u.globals.gridWidth*parseInt(l.width,10)/100:parseInt(l.width,10))+l.offsetX}},{key:"drawYAxisAnnotations",value:function(){var l=this,u=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return u.config.annotations.yaxis.map(function(x,w){l.addYaxisAnnotation(x,m.node,w)}),m}}]),ve}(),Si=function(){function ve(l){j(this,ve),this.w=l.w,this.annoCtx=l,this.helpers=new xi(this.annoCtx)}return Be(ve,[{key:"addPointAnnotation",value:function(l,u,m){var x=this.helpers.getX1X2("x1",l),w=this.helpers.getY1Y2("y1",l);if(tt.isNumber(x)){var E={pSize:l.marker.size,pointStrokeWidth:l.marker.strokeWidth,pointFillColor:l.marker.fillColor,pointStrokeColor:l.marker.strokeColor,shape:l.marker.shape,pRadius:l.marker.radius,class:"apexcharts-point-annotation-marker ".concat(l.marker.cssClass," ").concat(l.id?l.id:"")},M=this.annoCtx.graphics.drawMarker(x+l.marker.offsetX,w+l.marker.offsetY,E);u.appendChild(M.node);var N=l.label.text?l.label.text:"",H=this.annoCtx.graphics.drawText({x:x+l.label.offsetX,y:w+l.label.offsetY-l.marker.size-parseFloat(l.label.style.fontSize)/1.6,text:N,textAnchor:l.label.textAnchor,fontSize:l.label.style.fontSize,fontFamily:l.label.style.fontFamily,fontWeight:l.label.style.fontWeight,foreColor:l.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(l.label.style.cssClass," ").concat(l.id?l.id:"")});if(H.attr({rel:m}),u.appendChild(H.node),l.customSVG.SVG){var Z=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+l.customSVG.cssClass});Z.attr({transform:"translate(".concat(x+l.customSVG.offsetX,", ").concat(w+l.customSVG.offsetY,")")}),Z.node.innerHTML=l.customSVG.SVG,u.appendChild(Z.node)}if(l.image.path){var J=l.image.width?l.image.width:20,ne=l.image.height?l.image.height:20;M=this.annoCtx.addImage({x:x+l.image.offsetX-J/2,y:w+l.image.offsetY-ne/2,width:J,height:ne,path:l.image.path,appendTo:".apexcharts-point-annotations"})}l.mouseEnter&&M.node.addEventListener("mouseenter",l.mouseEnter.bind(this,l)),l.mouseLeave&&M.node.addEventListener("mouseleave",l.mouseLeave.bind(this,l)),l.click&&M.node.addEventListener("click",l.click.bind(this,l))}}},{key:"drawPointAnnotations",value:function(){var l=this,u=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return u.config.annotations.points.map(function(x,w){l.addPointAnnotation(x,m.node,w)}),m}}]),ve}(),Ni={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Zi=function(){function ve(){j(this,ve),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return Be(ve,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ni],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(l){return new Date(l).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(l){return l}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(l){return l+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(l){return l.globals.seriesTotals.reduce(function(u,m){return u+m},0)/l.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(l){return l},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(l){return l}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(l){return l}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(l){return l.globals.seriesTotals.reduce(function(u,m){return u+m},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(l){return null!==l?l:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(l){return l?l+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),ve}(),Rn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.graphics=new Dt(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new xi(this),this.xAxisAnnotations=new fi(this),this.yAxisAnnotations=new It(this),this.pointsAnnotations=new Si(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return Be(ve,[{key:"drawAxesAnnotations",value:function(){var l=this.w;if(l.globals.axisCharts){for(var u=this.yAxisAnnotations.drawYAxisAnnotations(),m=this.xAxisAnnotations.drawXAxisAnnotations(),x=this.pointsAnnotations.drawPointAnnotations(),w=l.config.chart.animations.enabled,E=[u,m,x],M=[m.node,u.node,x.node],N=0;N<3;N++)l.globals.dom.elGraphical.add(E[N]),!w||l.globals.resized||l.globals.dataChanged||"scatter"!==l.config.chart.type&&"bubble"!==l.config.chart.type&&l.globals.dataPoints>1&&M[N].classList.add("apexcharts-element-hidden"),l.globals.delayedElements.push({el:M[N],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var l=this;this.w.config.annotations.images.map(function(u,m){l.addImage(u,m)})}},{key:"drawTextAnnos",value:function(){var l=this;this.w.config.annotations.texts.map(function(u,m){l.addText(u,m)})}},{key:"addXaxisAnnotation",value:function(l,u,m){this.xAxisAnnotations.addXaxisAnnotation(l,u,m)}},{key:"addYaxisAnnotation",value:function(l,u,m){this.yAxisAnnotations.addYaxisAnnotation(l,u,m)}},{key:"addPointAnnotation",value:function(l,u,m){this.pointsAnnotations.addPointAnnotation(l,u,m)}},{key:"addText",value:function(l,u){var w=l.text,ne=l.backgroundColor,fe=l.borderWidth,ye=l.strokeDashArray,De=l.borderRadius,Pe=l.borderColor,Se=l.appendTo,ze=void 0===Se?".apexcharts-svg":Se,U=l.paddingLeft,le=void 0===U?4:U,we=l.paddingRight,Le=void 0===we?4:we,$e=l.paddingBottom,mt=void 0===$e?2:$e,$t=l.paddingTop,Xt=void 0===$t?2:$t,Li=this.w,Ji=this.graphics.drawText({x:l.x,y:l.y,text:w,textAnchor:l.textAnchor||"start",fontSize:l.fontSize||"12px",fontWeight:l.fontWeight||"regular",fontFamily:l.fontFamily||Li.config.chart.fontFamily,foreColor:l.foreColor||Li.config.chart.foreColor,cssClass:l.cssClass}),ln=Li.globals.dom.baseEl.querySelector(ze);ln&&ln.appendChild(Ji.node);var Un=Ji.bbox();if(w){var cr=this.graphics.drawRect(Un.x-le,Un.y-Xt,Un.width+le+Le,Un.height+mt+Xt,De,ne||"transparent",1,fe,Pe,ye);ln.insertBefore(cr.node,Ji.node)}}},{key:"addImage",value:function(l,u){var m=this.w,w=l.x,E=void 0===w?0:w,M=l.y,N=void 0===M?0:M,H=l.width,Z=void 0===H?20:H,J=l.height,ne=void 0===J?20:J,fe=l.appendTo,ye=void 0===fe?".apexcharts-svg":fe,De=m.globals.dom.Paper.image(l.path);De.size(Z,ne).move(E,N);var Pe=m.globals.dom.baseEl.querySelector(ye);return Pe&&Pe.appendChild(De.node),De}},{key:"addXaxisAnnotationExternal",value:function(l,u,m){return this.addAnnotationExternal({params:l,pushToMemory:u,context:m,type:"xaxis",contextMethod:m.addXaxisAnnotation}),m}},{key:"addYaxisAnnotationExternal",value:function(l,u,m){return this.addAnnotationExternal({params:l,pushToMemory:u,context:m,type:"yaxis",contextMethod:m.addYaxisAnnotation}),m}},{key:"addPointAnnotationExternal",value:function(l,u,m){return void 0===this.invertAxis&&(this.invertAxis=m.w.globals.isBarHorizontal),this.addAnnotationExternal({params:l,pushToMemory:u,context:m,type:"point",contextMethod:m.addPointAnnotation}),m}},{key:"addAnnotationExternal",value:function(l){var u=l.params,m=l.pushToMemory,x=l.context,w=l.type,E=l.contextMethod,M=x,N=M.w,H=N.globals.dom.baseEl.querySelector(".apexcharts-".concat(w,"-annotations")),Z=H.childNodes.length+1,J=new Zi,ne=Object.assign({},"xaxis"===w?J.xAxisAnnotation:"yaxis"===w?J.yAxisAnnotation:J.pointAnnotation),fe=tt.extend(ne,u);switch(w){case"xaxis":this.addXaxisAnnotation(fe,H,Z);break;case"yaxis":this.addYaxisAnnotation(fe,H,Z);break;case"point":this.addPointAnnotation(fe,H,Z)}var ye=N.globals.dom.baseEl.querySelector(".apexcharts-".concat(w,"-annotations .apexcharts-").concat(w,"-annotation-label[rel='").concat(Z,"']")),De=this.helpers.addBackgroundToAnno(ye,fe);return De&&H.insertBefore(De.node,ye),m&&N.globals.memory.methodsToExec.push({context:M,id:fe.id?fe.id:tt.randomId(),method:E,label:"addAnnotation",params:u}),x}},{key:"clearAnnotations",value:function(l){var u=l.w,m=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");u.globals.memory.methodsToExec.map(function(x,w){"addText"!==x.label&&"addAnnotation"!==x.label||u.globals.memory.methodsToExec.splice(w,1)}),m=tt.listToArray(m),Array.prototype.forEach.call(m,function(x){for(;x.firstChild;)x.removeChild(x.firstChild)})}},{key:"removeAnnotation",value:function(l,u){var m=l.w,x=m.globals.dom.baseEl.querySelectorAll(".".concat(u));x&&(m.globals.memory.methodsToExec.map(function(w,E){w.id===u&&m.globals.memory.methodsToExec.splice(E,1)}),Array.prototype.forEach.call(x,function(w){w.parentElement.removeChild(w)}))}}]),ve}(),Ki=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return Be(ve,[{key:"isValidDate",value:function(l){return"number"!=typeof l&&!isNaN(this.parseDate(l))}},{key:"getTimeStamp",value:function(l){return Date.parse(l)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(l).toISOString().substr(0,25)).getTime():new Date(l).getTime():l}},{key:"getDate",value:function(l){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(l).toUTCString()):new Date(l)}},{key:"parseDate",value:function(l){var u=Date.parse(l);if(!isNaN(u))return this.getTimeStamp(l);var m=Date.parse(l.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(m)}},{key:"parseDateWithTimezone",value:function(l){return Date.parse(l.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(l,u){var m=this.w.globals.locale,x=this.w.config.xaxis.labels.datetimeUTC,w=["\0"].concat(et(m.months)),E=["\x01"].concat(et(m.shortMonths)),M=["\x02"].concat(et(m.days)),N=["\x03"].concat(et(m.shortDays));function H(mt,$t){var Xt=mt+"";for($t=$t||2;Xt.length<$t;)Xt="0"+Xt;return Xt}var Z=x?l.getUTCFullYear():l.getFullYear();u=(u=(u=u.replace(/(^|[^\\])yyyy+/g,"$1"+Z)).replace(/(^|[^\\])yy/g,"$1"+Z.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+Z);var J=(x?l.getUTCMonth():l.getMonth())+1;u=(u=(u=(u=u.replace(/(^|[^\\])MMMM+/g,"$1"+w[0])).replace(/(^|[^\\])MMM/g,"$1"+E[0])).replace(/(^|[^\\])MM/g,"$1"+H(J))).replace(/(^|[^\\])M/g,"$1"+J);var ne=x?l.getUTCDate():l.getDate();u=(u=(u=(u=u.replace(/(^|[^\\])dddd+/g,"$1"+M[0])).replace(/(^|[^\\])ddd/g,"$1"+N[0])).replace(/(^|[^\\])dd/g,"$1"+H(ne))).replace(/(^|[^\\])d/g,"$1"+ne);var fe=x?l.getUTCHours():l.getHours(),ye=fe>12?fe-12:0===fe?12:fe;u=(u=(u=(u=u.replace(/(^|[^\\])HH+/g,"$1"+H(fe))).replace(/(^|[^\\])H/g,"$1"+fe)).replace(/(^|[^\\])hh+/g,"$1"+H(ye))).replace(/(^|[^\\])h/g,"$1"+ye);var De=x?l.getUTCMinutes():l.getMinutes();u=(u=u.replace(/(^|[^\\])mm+/g,"$1"+H(De))).replace(/(^|[^\\])m/g,"$1"+De);var Pe=x?l.getUTCSeconds():l.getSeconds();u=(u=u.replace(/(^|[^\\])ss+/g,"$1"+H(Pe))).replace(/(^|[^\\])s/g,"$1"+Pe);var Se=x?l.getUTCMilliseconds():l.getMilliseconds();u=u.replace(/(^|[^\\])fff+/g,"$1"+H(Se,3)),Se=Math.round(Se/10),u=u.replace(/(^|[^\\])ff/g,"$1"+H(Se)),Se=Math.round(Se/10);var ze=fe<12?"AM":"PM";u=(u=(u=u.replace(/(^|[^\\])f/g,"$1"+Se)).replace(/(^|[^\\])TT+/g,"$1"+ze)).replace(/(^|[^\\])T/g,"$1"+ze.charAt(0));var U=ze.toLowerCase();u=(u=u.replace(/(^|[^\\])tt+/g,"$1"+U)).replace(/(^|[^\\])t/g,"$1"+U.charAt(0));var le=-l.getTimezoneOffset(),we=x||!le?"Z":le>0?"+":"-";if(!x){var Le=(le=Math.abs(le))%60;we+=H(Math.floor(le/60))+":"+H(Le)}u=u.replace(/(^|[^\\])K/g,"$1"+we);var $e=(x?l.getUTCDay():l.getDay())+1;return(u=(u=(u=(u=u.replace(new RegExp(M[0],"g"),M[$e])).replace(new RegExp(N[0],"g"),N[$e])).replace(new RegExp(w[0],"g"),w[J])).replace(new RegExp(E[0],"g"),E[J])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(l,u,m){var x=this.w;void 0!==x.config.xaxis.min&&(l=x.config.xaxis.min),void 0!==x.config.xaxis.max&&(u=x.config.xaxis.max);var w=this.getDate(l),E=this.getDate(u),M=this.formatDate(w,"yyyy MM dd HH mm ss fff").split(" "),N=this.formatDate(E,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(M[6],10),maxMillisecond:parseInt(N[6],10),minSecond:parseInt(M[5],10),maxSecond:parseInt(N[5],10),minMinute:parseInt(M[4],10),maxMinute:parseInt(N[4],10),minHour:parseInt(M[3],10),maxHour:parseInt(N[3],10),minDate:parseInt(M[2],10),maxDate:parseInt(N[2],10),minMonth:parseInt(M[1],10)-1,maxMonth:parseInt(N[1],10)-1,minYear:parseInt(M[0],10),maxYear:parseInt(N[0],10)}}},{key:"isLeapYear",value:function(l){return l%4==0&&l%100!=0||l%400==0}},{key:"calculcateLastDaysOfMonth",value:function(l,u,m){return this.determineDaysOfMonths(l,u)-m}},{key:"determineDaysOfYear",value:function(l){var u=365;return this.isLeapYear(l)&&(u=366),u}},{key:"determineRemainingDaysOfYear",value:function(l,u,m){var x=this.daysCntOfYear[u]+m;return u>1&&this.isLeapYear()&&x++,x}},{key:"determineDaysOfMonths",value:function(l,u){var m=30;switch(l=tt.monthMod(l),!0){case this.months30.indexOf(l)>-1:2===l&&(m=this.isLeapYear(u)?29:28);break;case this.months31.indexOf(l)>-1:default:m=31}return m}}]),ve}(),tn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.tooltipKeyFormat="dd MMM"}return Be(ve,[{key:"xLabelFormat",value:function(l,u,m,x){var w=this.w;if("datetime"===w.config.xaxis.type&&void 0===w.config.xaxis.labels.formatter&&void 0===w.config.tooltip.x.formatter){var E=new Ki(this.ctx);return E.formatDate(E.getDate(u),w.config.tooltip.x.format)}return l(u,m,x)}},{key:"defaultGeneralFormatter",value:function(l){return Array.isArray(l)?l.map(function(u){return u}):l}},{key:"defaultYFormatter",value:function(l,u,m){var x=this.w;return tt.isNumber(l)&&(l=l.toFixed(0!==x.globals.yValueDecimal?void 0!==u.decimalsInFloat?u.decimalsInFloat:x.globals.yValueDecimal:x.globals.maxYArr[m]-x.globals.minYArr[m]<5?1:0)),l}},{key:"setLabelFormatters",value:function(){var l=this,u=this.w;return u.globals.xaxisTooltipFormatter=function(m){return l.defaultGeneralFormatter(m)},u.globals.ttKeyFormatter=function(m){return l.defaultGeneralFormatter(m)},u.globals.ttZFormatter=function(m){return m},u.globals.legendFormatter=function(m){return l.defaultGeneralFormatter(m)},u.globals.xLabelFormatter=void 0!==u.config.xaxis.labels.formatter?u.config.xaxis.labels.formatter:function(m){if(tt.isNumber(m)){if(!u.config.xaxis.convertedCatToNumeric&&"numeric"===u.config.xaxis.type){if(tt.isNumber(u.config.xaxis.decimalsInFloat))return m.toFixed(u.config.xaxis.decimalsInFloat);var x=u.globals.maxX-u.globals.minX;return m.toFixed(x>0&&x<100?1:0)}return m.toFixed(u.globals.isBarHorizontal&&u.globals.maxY-u.globals.minYArr<4?1:0)}return m},u.globals.ttKeyFormatter="function"==typeof u.config.tooltip.x.formatter?u.config.tooltip.x.formatter:u.globals.xLabelFormatter,"function"==typeof u.config.xaxis.tooltip.formatter&&(u.globals.xaxisTooltipFormatter=u.config.xaxis.tooltip.formatter),(Array.isArray(u.config.tooltip.y)||void 0!==u.config.tooltip.y.formatter)&&(u.globals.ttVal=u.config.tooltip.y),void 0!==u.config.tooltip.z.formatter&&(u.globals.ttZFormatter=u.config.tooltip.z.formatter),void 0!==u.config.legend.formatter&&(u.globals.legendFormatter=u.config.legend.formatter),u.config.yaxis.forEach(function(m,x){u.globals.yLabelFormatters[x]=void 0!==m.labels.formatter?m.labels.formatter:function(w){return u.globals.xyCharts?Array.isArray(w)?w.map(function(E){return l.defaultYFormatter(E,m,x)}):l.defaultYFormatter(w,m,x):w}}),u.globals}},{key:"heatmapLabelFormatters",value:function(){var l=this.w;if("heatmap"===l.config.chart.type){l.globals.yAxisScale[0].result=l.globals.seriesNames.slice();var u=l.globals.seriesNames.reduce(function(m,x){return m.length>x.length?m:x},0);l.globals.yAxisScale[0].niceMax=u,l.globals.yAxisScale[0].niceMin=u}}}]),ve}(),yn=function(ve){var l,u=ve.isTimeline,m=ve.ctx,x=ve.seriesIndex,w=ve.dataPointIndex,E=ve.y1,M=ve.y2,N=ve.w,H=N.globals.seriesRangeStart[x][w],Z=N.globals.seriesRangeEnd[x][w],J=N.globals.labels[w],ne=N.config.series[x].name?N.config.series[x].name:"",fe=N.globals.ttKeyFormatter,ye=N.config.tooltip.y.title.formatter,De={w:N,seriesIndex:x,dataPointIndex:w,start:H,end:Z};"function"==typeof ye&&(ne=ye(ne,De)),null!==(l=N.config.series[x].data[w])&&void 0!==l&&l.x&&(J=N.config.series[x].data[w].x),u||"datetime"===N.config.xaxis.type&&(J=new tn(m).xLabelFormat(N.globals.ttKeyFormatter,J,J,{i:void 0,dateFormatter:new Ki(m).formatDate,w:N})),"function"==typeof fe&&(J=fe(J,De)),Number.isFinite(E)&&Number.isFinite(M)&&(H=E,Z=M);var Pe="",Se="",ze=N.globals.colors[x];if(void 0===N.config.tooltip.x.formatter)if("datetime"===N.config.xaxis.type){var U=new Ki(m);Pe=U.formatDate(U.getDate(H),N.config.tooltip.x.format),Se=U.formatDate(U.getDate(Z),N.config.tooltip.x.format)}else Pe=H,Se=Z;else Pe=N.config.tooltip.x.formatter(H),Se=N.config.tooltip.x.formatter(Z);return{start:H,end:Z,startVal:Pe,endVal:Se,ylabel:J,color:ze,seriesName:ne}},Nn=function(ve){var l=ve.color,u=ve.seriesName,m=ve.ylabel,x=ve.start,w=ve.end,E=ve.seriesIndex,M=ve.dataPointIndex,N=ve.ctx.tooltip.tooltipLabels.getFormatters(E);x=N.yLbFormatter(x),w=N.yLbFormatter(w);var H=N.yLbFormatter(ve.w.globals.series[E][M]),Z='<span class="value start-value">\n  '.concat(x,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(w,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+l+'">'+(u||"")+'</span></div><div> <span class="category">'+m+": </span> "+(ve.w.globals.comboCharts?"rangeArea"===ve.w.config.series[E].type||"rangeBar"===ve.w.config.series[E].type?Z:"<span>".concat(H,"</span>"):Z)+" </div></div>"},yr=function(){function ve(l){j(this,ve),this.opts=l}return Be(ve,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(l){return this.hideYAxis(),tt.extend(l,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),Ze(Ze({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var l=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(u){return l._getBoxTooltip(u.w,u.seriesIndex,u.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var l=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(u){return l._getBoxTooltip(u.w,u.seriesIndex,u.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(l,u){var m=u.seriesIndex,x=u.dataPointIndex,w=u.w,E=function(){return w.globals.seriesRangeEnd[m][x]-w.globals.seriesRangeStart[m][x]};return w.globals.comboCharts?"rangeBar"===w.config.series[m].type||"rangeArea"===w.config.series[m].type?E():l:E()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(l){return l.w.config.plotOptions&&l.w.config.plotOptions.bar&&l.w.config.plotOptions.bar.horizontal?(x=(m=yn(Ze(Ze({},u=l),{},{isTimeline:!0}))).color,w=m.seriesName,E=m.ylabel,M=m.startVal,N=m.endVal,Nn(Ze(Ze({},u),{},{color:x,seriesName:w,ylabel:E,start:M,end:N}))):function(u){var m=yn(u),x=m.color,w=m.seriesName,E=m.ylabel,M=m.start,N=m.end;return Nn(Ze(Ze({},u),{},{color:x,seriesName:w,ylabel:E,start:M,end:N}))}(l);var u,m,x,w,E,M,N}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(l){var u,m;return null!==(u=l.plotOptions.bar)&&void 0!==u&&u.barHeight||(l.plotOptions.bar.barHeight=2),null!==(m=l.plotOptions.bar)&&void 0!==m&&m.columnWidth||(l.plotOptions.bar.columnWidth=2),l}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(l){return x=(m=yn(u=l)).color,w=m.seriesName,E=m.ylabel,M=m.start,N=m.end,Nn(Ze(Ze({},u),{},{color:x,seriesName:w,ylabel:E,start:M,end:N}));var u,m,x,w,E,M,N}}}}},{key:"brush",value:function(l){return tt.extend(l,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(l){l.dataLabels=l.dataLabels||{},l.dataLabels.formatter=l.dataLabels.formatter||void 0;var u=l.dataLabels.formatter;return l.yaxis.forEach(function(m,x){l.yaxis[x].min=0,l.yaxis[x].max=100}),"bar"===l.chart.type&&(l.dataLabels.formatter=u||function(m){return"number"==typeof m&&m?m.toFixed(0)+"%":m}),l}},{key:"stackedBars",value:function(){var l=this.bar();return Ze(Ze({},l),{},{plotOptions:Ze(Ze({},l.plotOptions),{},{bar:Ze(Ze({},l.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(l){return l.xaxis.convertedCatToNumeric=!0,l}},{key:"convertCatToNumericXaxis",value:function(l,u,m){l.xaxis.type="numeric",l.xaxis.labels=l.xaxis.labels||{},l.xaxis.labels.formatter=l.xaxis.labels.formatter||function(E){return tt.isNumber(E)?Math.floor(E):E};var x=l.xaxis.labels.formatter,w=l.xaxis.categories&&l.xaxis.categories.length?l.xaxis.categories:l.labels;return m&&m.length&&(w=m.map(function(E){return Array.isArray(E)?E:String(E)})),w&&w.length&&(l.xaxis.labels.formatter=function(E){return tt.isNumber(E)?x(w[Math.floor(E)-1]):x(E)}),l.xaxis.categories=[],l.labels=[],l.xaxis.tickAmount=l.xaxis.tickAmount||"dataPoints",l}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(l){return l.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(l){return l},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(l,u,m,x,w){var E=l.globals.seriesCandleO[u][m],M=l.globals.seriesCandleH[u][m],N=l.globals.seriesCandleM[u][m],H=l.globals.seriesCandleL[u][m],Z=l.globals.seriesCandleC[u][m];return l.config.series[u].type&&l.config.series[u].type!==w?'<div class="apexcharts-custom-tooltip">\n          '.concat(l.config.series[u].name?l.config.series[u].name:"series-"+(u+1),": <strong>").concat(l.globals.series[u][m],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(l.config.chart.type,'">')+"<div>".concat(x[0],': <span class="value">')+E+"</span></div>"+"<div>".concat(x[1],': <span class="value">')+M+"</span></div>"+(N?"<div>".concat(x[2],': <span class="value">')+N+"</span></div>":"")+"<div>".concat(x[3],': <span class="value">')+H+"</span></div>"+"<div>".concat(x[4],': <span class="value">')+Z+"</span></div></div>"}}]),ve}(),fr=function(){function ve(l){j(this,ve),this.opts=l}return Be(ve,[{key:"init",value:function(l){var u=l.responsiveOverride,m=this.opts,x=new Zi,w=new yr(m);this.chartType=m.chart.type,m=this.extendYAxis(m),m=this.extendAnnotations(m);var E=x.init(),M={};if(m&&"object"===t(m)){var N,H,Z,J,ne,fe,ye,De,Pe={};Pe=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(m.chart.type)?w[m.chart.type]():w.line(),null!==(N=m.plotOptions)&&void 0!==N&&null!==(H=N.bar)&&void 0!==H&&H.isFunnel&&(Pe=w.funnel()),m.chart.stacked&&"bar"===m.chart.type&&(Pe=w.stackedBars()),null!==(Z=m.chart.brush)&&void 0!==Z&&Z.enabled&&(Pe=w.brush(Pe)),m.chart.stacked&&"100%"===m.chart.stackType&&(m=w.stacked100(m)),null!==(J=m.plotOptions)&&void 0!==J&&null!==(ne=J.bar)&&void 0!==ne&&ne.isDumbbell&&(m=w.dumbbell(m)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(m),m.xaxis=m.xaxis||window.Apex.xaxis||{},u||(m.xaxis.convertedCatToNumeric=!1),(null!==(fe=(m=this.checkForCatToNumericXAxis(this.chartType,Pe,m)).chart.sparkline)&&void 0!==fe&&fe.enabled||null!==(ye=window.Apex.chart)&&void 0!==ye&&null!==(De=ye.sparkline)&&void 0!==De&&De.enabled)&&(Pe=w.sparkline(Pe)),M=tt.extend(E,Pe)}var Se=tt.extend(M,window.Apex);return E=tt.extend(Se,m),this.handleUserInputErrors(E)}},{key:"checkForCatToNumericXAxis",value:function(l,u,m){var x,w,E=new yr(m);return("bar"===l||"boxPlot"===l)&&(null===(x=m.plotOptions)||void 0===x||null===(w=x.bar)||void 0===w?void 0:w.horizontal)||"pie"===l||"polarArea"===l||"donut"===l||"radar"===l||"radialBar"===l||"heatmap"===l||!("datetime"!==m.xaxis.type&&"numeric"!==m.xaxis.type)||"between"===(m.xaxis.tickPlacement?m.xaxis.tickPlacement:u.xaxis&&u.xaxis.tickPlacement)||(m=E.convertCatToNumeric(m)),m}},{key:"extendYAxis",value:function(l,u){var m=new Zi;(void 0===l.yaxis||!l.yaxis||Array.isArray(l.yaxis)&&0===l.yaxis.length)&&(l.yaxis={}),l.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(l.yaxis=tt.extend(l.yaxis,window.Apex.yaxis)),l.yaxis=l.yaxis.constructor!==Array?[tt.extend(m.yAxis,l.yaxis)]:tt.extendArray(l.yaxis,m.yAxis);var x=!1;l.yaxis.forEach(function(E){E.logarithmic&&(x=!0)});var w=l.series;return u&&!w&&(w=u.config.series),x&&w.length!==l.yaxis.length&&w.length&&(l.yaxis=w.map(function(E,M){if(E.name||(w[M].name="series-".concat(M+1)),l.yaxis[M])return l.yaxis[M].seriesName=w[M].name,l.yaxis[M];var N=tt.extend(m.yAxis,l.yaxis[0]);return N.show=!1,N})),x&&w.length>1&&w.length!==l.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),l}},{key:"extendAnnotations",value:function(l){return void 0===l.annotations&&(l.annotations={},l.annotations.yaxis=[],l.annotations.xaxis=[],l.annotations.points=[]),l=this.extendYAxisAnnotations(l),l=this.extendXAxisAnnotations(l),this.extendPointAnnotations(l)}},{key:"extendYAxisAnnotations",value:function(l){var u=new Zi;return l.annotations.yaxis=tt.extendArray(void 0!==l.annotations.yaxis?l.annotations.yaxis:[],u.yAxisAnnotation),l}},{key:"extendXAxisAnnotations",value:function(l){var u=new Zi;return l.annotations.xaxis=tt.extendArray(void 0!==l.annotations.xaxis?l.annotations.xaxis:[],u.xAxisAnnotation),l}},{key:"extendPointAnnotations",value:function(l){var u=new Zi;return l.annotations.points=tt.extendArray(void 0!==l.annotations.points?l.annotations.points:[],u.pointAnnotation),l}},{key:"checkForDarkTheme",value:function(l){l.theme&&"dark"===l.theme.mode&&(l.tooltip||(l.tooltip={}),"light"!==l.tooltip.theme&&(l.tooltip.theme="dark"),l.chart.foreColor||(l.chart.foreColor="#f6f7f8"),l.chart.background||(l.chart.background="#424242"),l.theme.palette||(l.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(l){var u=l;if(u.tooltip.shared&&u.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===u.chart.type&&u.plotOptions.bar.horizontal){if(u.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");u.yaxis[0].reversed&&(u.yaxis[0].opposite=!0),u.xaxis.tooltip.enabled=!1,u.yaxis[0].tooltip.enabled=!1,u.chart.zoom.enabled=!1}return"bar"!==u.chart.type&&"rangeBar"!==u.chart.type||u.tooltip.shared&&"barWidth"===u.xaxis.crosshairs.width&&u.series.length>1&&(u.xaxis.crosshairs.width="tickWidth"),"candlestick"!==u.chart.type&&"boxPlot"!==u.chart.type||u.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(u.chart.type," chart is not supported.")),u.yaxis[0].reversed=!1),u}}]),ve}(),Nr=function(){function ve(){j(this,ve)}return Be(ve,[{key:"initGlobalVars",value:function(l){l.series=[],l.seriesCandleO=[],l.seriesCandleH=[],l.seriesCandleM=[],l.seriesCandleL=[],l.seriesCandleC=[],l.seriesRangeStart=[],l.seriesRangeEnd=[],l.seriesRange=[],l.seriesPercent=[],l.seriesGoals=[],l.seriesX=[],l.seriesZ=[],l.seriesNames=[],l.seriesTotals=[],l.seriesLog=[],l.seriesColors=[],l.stackedSeriesTotals=[],l.seriesXvalues=[],l.seriesYvalues=[],l.labels=[],l.hasXaxisGroups=!1,l.groups=[],l.hasSeriesGroups=!1,l.seriesGroups=[],l.categoryLabels=[],l.timescaleLabels=[],l.noLabelsProvided=!1,l.resizeTimer=null,l.selectionResizeTimer=null,l.delayedElements=[],l.pointsArray=[],l.dataLabelsRects=[],l.isXNumeric=!1,l.skipLastTimelinelabel=!1,l.skipFirstTimelinelabel=!1,l.isDataXYZ=!1,l.isMultiLineX=!1,l.isMultipleYAxis=!1,l.maxY=-Number.MAX_VALUE,l.minY=Number.MIN_VALUE,l.minYArr=[],l.maxYArr=[],l.maxX=-Number.MAX_VALUE,l.minX=Number.MAX_VALUE,l.initialMaxX=-Number.MAX_VALUE,l.initialMinX=Number.MAX_VALUE,l.maxDate=0,l.minDate=Number.MAX_VALUE,l.minZ=Number.MAX_VALUE,l.maxZ=-Number.MAX_VALUE,l.minXDiff=Number.MAX_VALUE,l.yAxisScale=[],l.xAxisScale=null,l.xAxisTicksPositions=[],l.yLabelsCoords=[],l.yTitleCoords=[],l.barPadForNumericAxis=0,l.padHorizontal=0,l.xRange=0,l.yRange=[],l.zRange=0,l.dataPoints=0,l.xTickAmount=0,l.multiAxisTickAmount=0}},{key:"globalVars",value:function(l){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:l.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.zoom&&l.chart.zoom.enabled,panEnabled:"pan"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.pan,selectionEnabled:"selection"===l.chart.toolbar.autoSelected&&l.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(l){var u=this.globalVars(l);return this.initGlobalVars(u),u.initialConfig=tt.extend({},l),u.initialSeries=tt.clone(l.series),u.lastXAxis=tt.clone(u.initialConfig.xaxis),u.lastYAxis=tt.clone(u.initialConfig.yaxis),u}}]),ve}(),Mi=function(){function ve(l){j(this,ve),this.opts=l}return Be(ve,[{key:"init",value:function(){var l=new fr(this.opts).init({responsiveOverride:!1});return{config:l,globals:(new Nr).init(l)}}}]),ve}(),In=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.opts=null,this.seriesIndex=0}return Be(ve,[{key:"clippedImgArea",value:function(l){var u=this.w,m=u.config,x=parseInt(u.globals.gridWidth,10),w=parseInt(u.globals.gridHeight,10),E=x>w?x:w,M=l.image,N=0,H=0;void 0===l.width&&void 0===l.height?void 0!==m.fill.image.width&&void 0!==m.fill.image.height?(N=m.fill.image.width+1,H=m.fill.image.height):(N=E+1,H=E):(N=l.width,H=l.height);var Z=document.createElementNS(u.globals.SVGNS,"pattern");Dt.setAttrs(Z,{id:l.patternID,patternUnits:l.patternUnits?l.patternUnits:"userSpaceOnUse",width:N+"px",height:H+"px"});var J=document.createElementNS(u.globals.SVGNS,"image");Z.appendChild(J),J.setAttributeNS(window.SVG.xlink,"href",M),Dt.setAttrs(J,{x:0,y:0,preserveAspectRatio:"none",width:N+"px",height:H+"px"}),J.style.opacity=l.opacity,u.globals.dom.elDefs.node.appendChild(Z)}},{key:"getSeriesIndex",value:function(l){var u=this.w,m=u.config.chart.type;return this.seriesIndex=("bar"===m||"rangeBar"===m)&&u.config.plotOptions.bar.distributed||"heatmap"===m||"treemap"===m?l.seriesNumber:l.seriesNumber%u.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(l){var u=this.w;this.opts=l;var m,x,w,E=this.w.config;this.seriesIndex=this.getSeriesIndex(l);var M=this.getFillColors()[this.seriesIndex];void 0!==u.globals.seriesColors[this.seriesIndex]&&(M=u.globals.seriesColors[this.seriesIndex]),"function"==typeof M&&(M=M({seriesIndex:this.seriesIndex,dataPointIndex:l.dataPointIndex,value:l.value,w:u}));var N=l.fillType?l.fillType:this.getFillType(this.seriesIndex),H=Array.isArray(E.fill.opacity)?E.fill.opacity[this.seriesIndex]:E.fill.opacity;l.color&&(M=l.color),M||(M="#fff",console.warn("undefined color - ApexCharts"));var Z=M;if(-1===M.indexOf("rgb")?M.length<9&&(Z=tt.hexToRgba(M,H)):M.indexOf("rgba")>-1&&(H=tt.getOpacityFromRGBA(M)),l.opacity&&(H=l.opacity),"pattern"===N&&(x=this.handlePatternFill({fillConfig:l.fillConfig,patternFill:x,fillColor:M,fillOpacity:H,defaultColor:Z})),"gradient"===N&&(w=this.handleGradientFill({fillConfig:l.fillConfig,fillColor:M,fillOpacity:H,i:this.seriesIndex})),"image"===N){var J=E.fill.image.src,ne=l.patternID?l.patternID:"";this.clippedImgArea({opacity:H,image:Array.isArray(J)?l.seriesNumber<J.length?J[l.seriesNumber]:J[0]:J,width:l.width?l.width:void 0,height:l.height?l.height:void 0,patternUnits:l.patternUnits,patternID:"pattern".concat(u.globals.cuid).concat(l.seriesNumber+1).concat(ne)}),m="url(#pattern".concat(u.globals.cuid).concat(l.seriesNumber+1).concat(ne,")")}else m="gradient"===N?w:"pattern"===N?x:Z;return l.solid&&(m=Z),m}},{key:"getFillType",value:function(l){var u=this.w;return Array.isArray(u.config.fill.type)?u.config.fill.type[l]:u.config.fill.type}},{key:"getFillColors",value:function(){var l=this.w,u=l.config,m=this.opts,x=[];return l.globals.comboCharts?"line"===l.config.series[this.seriesIndex].type?Array.isArray(l.globals.stroke.colors)?x=l.globals.stroke.colors:x.push(l.globals.stroke.colors):Array.isArray(l.globals.fill.colors)?x=l.globals.fill.colors:x.push(l.globals.fill.colors):"line"===u.chart.type?Array.isArray(l.globals.stroke.colors)?x=l.globals.stroke.colors:x.push(l.globals.stroke.colors):Array.isArray(l.globals.fill.colors)?x=l.globals.fill.colors:x.push(l.globals.fill.colors),void 0!==m.fillColors&&(x=[],Array.isArray(m.fillColors)?x=m.fillColors.slice():x.push(m.fillColors)),x}},{key:"handlePatternFill",value:function(l){var u=l.fillConfig,x=l.fillColor,w=l.fillOpacity,E=l.defaultColor,M=this.w.config.fill;u&&(M=u);var N=this.opts,H=new Dt(this.ctx),Z=Array.isArray(M.pattern.strokeWidth)?M.pattern.strokeWidth[this.seriesIndex]:M.pattern.strokeWidth,J=x;return Array.isArray(M.pattern.style)?void 0!==M.pattern.style[N.seriesNumber]?H.drawPattern(M.pattern.style[N.seriesNumber],M.pattern.width,M.pattern.height,J,Z,w):E:H.drawPattern(M.pattern.style,M.pattern.width,M.pattern.height,J,Z,w)}},{key:"handleGradientFill",value:function(l){var u=l.fillColor,m=l.fillOpacity,x=l.fillConfig,w=l.i,E=this.w.config.fill;x&&(E=Ze(Ze({},E),x));var M,N=this.opts,H=new Dt(this.ctx),Z=new tt,J=E.gradient.type,ne=u,fe=void 0===E.gradient.opacityFrom?m:Array.isArray(E.gradient.opacityFrom)?E.gradient.opacityFrom[w]:E.gradient.opacityFrom;ne.indexOf("rgba")>-1&&(fe=tt.getOpacityFromRGBA(ne));var ye=void 0===E.gradient.opacityTo?m:Array.isArray(E.gradient.opacityTo)?E.gradient.opacityTo[w]:E.gradient.opacityTo;if(void 0===E.gradient.gradientToColors||0===E.gradient.gradientToColors.length)M=Z.shadeColor("dark"===E.gradient.shade?-1*parseFloat(E.gradient.shadeIntensity):parseFloat(E.gradient.shadeIntensity),u.indexOf("rgb")>-1?tt.rgb2hex(u):u);else if(E.gradient.gradientToColors[N.seriesNumber]){var De=E.gradient.gradientToColors[N.seriesNumber];M=De,De.indexOf("rgba")>-1&&(ye=tt.getOpacityFromRGBA(De))}else M=u;if(E.gradient.gradientFrom&&(ne=E.gradient.gradientFrom),E.gradient.gradientTo&&(M=E.gradient.gradientTo),E.gradient.inverseColors){var Pe=ne;ne=M,M=Pe}return ne.indexOf("rgb")>-1&&(ne=tt.rgb2hex(ne)),M.indexOf("rgb")>-1&&(M=tt.rgb2hex(M)),H.drawGradient(J,ne,M,fe,ye,N.size,E.gradient.stops,E.gradient.colorStops,w)}}]),ve}(),Jn=function(){function ve(l,u){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"setGlobalMarkerSize",value:function(){var l=this.w;if(l.globals.markers.size=Array.isArray(l.config.markers.size)?l.config.markers.size:[l.config.markers.size],l.globals.markers.size.length>0){if(l.globals.markers.size.length<l.globals.series.length+1)for(var u=0;u<=l.globals.series.length;u++)void 0===l.globals.markers.size[u]&&l.globals.markers.size.push(l.globals.markers.size[0])}else l.globals.markers.size=l.config.series.map(function(m){return l.config.markers.size})}},{key:"plotChartMarkers",value:function(l,u,m,x){var w,E=arguments.length>4&&void 0!==arguments[4]&&arguments[4],M=this.w,N=u,H=l,Z=null,J=new Dt(this.ctx),ne=M.config.markers.discrete&&M.config.markers.discrete.length;if((M.globals.markers.size[u]>0||E||ne)&&(Z=J.group({class:E||ne?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(M.globals.cuid,")")),Array.isArray(H.x))for(var fe=0;fe<H.x.length;fe++){var ye=m;1===m&&0===fe&&(ye=0),1===m&&1===fe&&(ye=1);var De="apexcharts-marker";if("line"!==M.config.chart.type&&"area"!==M.config.chart.type||M.globals.comboCharts||M.config.tooltip.intersect||(De+=" no-pointer-events"),(Array.isArray(M.config.markers.size)?M.globals.markers.size[u]>0:M.config.markers.size>0)||E||ne){tt.isNumber(H.y[fe])?De+=" w".concat(tt.randomId()):De="apexcharts-nullpoint";var Pe=this.getMarkerConfig({cssClass:De,seriesIndex:u,dataPointIndex:ye});M.config.series[N].data[ye]&&(M.config.series[N].data[ye].fillColor&&(Pe.pointFillColor=M.config.series[N].data[ye].fillColor),M.config.series[N].data[ye].strokeColor&&(Pe.pointStrokeColor=M.config.series[N].data[ye].strokeColor)),x&&(Pe.pSize=x),(H.x[fe]<0||H.x[fe]>M.globals.gridWidth||H.y[fe]<-M.globals.markers.largestSize||H.y[fe]>M.globals.gridHeight+M.globals.markers.largestSize)&&(Pe.pSize=0),(w=J.drawMarker(H.x[fe],H.y[fe],Pe)).attr("rel",ye),w.attr("j",ye),w.attr("index",u),w.node.setAttribute("default-marker-size",Pe.pSize),new Pi(this.ctx).setSelectionFilter(w,u,ye),this.addEvents(w),Z&&Z.add(w)}else void 0===M.globals.pointsArray[u]&&(M.globals.pointsArray[u]=[]),M.globals.pointsArray[u].push([H.x[fe],H.y[fe]])}return Z}},{key:"getMarkerConfig",value:function(l){var u=l.cssClass,m=l.seriesIndex,x=l.dataPointIndex,w=void 0===x?null:x,E=l.finishRadius,M=void 0===E?null:E,N=this.w,H=this.getMarkerStyle(m),Z=N.globals.markers.size[m],J=N.config.markers;return null!==w&&J.discrete.length&&J.discrete.map(function(ne){ne.seriesIndex===m&&ne.dataPointIndex===w&&(H.pointStrokeColor=ne.strokeColor,H.pointFillColor=ne.fillColor,Z=ne.size,H.pointShape=ne.shape)}),{pSize:null===M?Z:M,pRadius:J.radius,width:Array.isArray(J.width)?J.width[m]:J.width,height:Array.isArray(J.height)?J.height[m]:J.height,pointStrokeWidth:Array.isArray(J.strokeWidth)?J.strokeWidth[m]:J.strokeWidth,pointStrokeColor:H.pointStrokeColor,pointFillColor:H.pointFillColor,shape:H.pointShape||(Array.isArray(J.shape)?J.shape[m]:J.shape),class:u,pointStrokeOpacity:Array.isArray(J.strokeOpacity)?J.strokeOpacity[m]:J.strokeOpacity,pointStrokeDashArray:Array.isArray(J.strokeDashArray)?J.strokeDashArray[m]:J.strokeDashArray,pointFillOpacity:Array.isArray(J.fillOpacity)?J.fillOpacity[m]:J.fillOpacity,seriesIndex:m}}},{key:"addEvents",value:function(l){var u=this.w,m=new Dt(this.ctx);l.node.addEventListener("mouseenter",m.pathMouseEnter.bind(this.ctx,l)),l.node.addEventListener("mouseleave",m.pathMouseLeave.bind(this.ctx,l)),l.node.addEventListener("mousedown",m.pathMouseDown.bind(this.ctx,l)),l.node.addEventListener("click",u.config.markers.onClick),l.node.addEventListener("dblclick",u.config.markers.onDblClick),l.node.addEventListener("touchstart",m.pathMouseDown.bind(this.ctx,l),{passive:!0})}},{key:"getMarkerStyle",value:function(l){var u=this.w,m=u.globals.markers.colors,x=u.config.markers.strokeColor||u.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(x)?x[l]:x,pointFillColor:Array.isArray(m)?m[l]:m}}}]),ve}(),ia=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return Be(ve,[{key:"draw",value:function(l,u,m){var x=this.w,w=new Dt(this.ctx),E=m.realIndex,M=m.pointsPos,N=m.zRatio,H=m.elParent,Z=w.group({class:"apexcharts-series-markers apexcharts-series-".concat(x.config.chart.type)});if(Z.attr("clip-path","url(#gridRectMarkerMask".concat(x.globals.cuid,")")),Array.isArray(M.x))for(var J=0;J<M.x.length;J++){var ne=u+1,fe=!0;0===u&&0===J&&(ne=0),0===u&&1===J&&(ne=1);var ye=0,De=x.globals.markers.size[E];if(N!==1/0){var Pe=x.config.plotOptions.bubble;De=x.globals.seriesZ[E][ne],Pe.zScaling&&(De/=N),Pe.minBubbleRadius&&De<Pe.minBubbleRadius&&(De=Pe.minBubbleRadius),Pe.maxBubbleRadius&&De>Pe.maxBubbleRadius&&(De=Pe.maxBubbleRadius)}x.config.chart.animations.enabled||(ye=De);var ze=M.y[J];if(ye=ye||0,null!==ze&&void 0!==x.globals.series[E][ne]||(fe=!1),fe){var U=this.drawPoint(M.x[J],ze,ye,De,E,ne,u);Z.add(U)}H.add(Z)}}},{key:"drawPoint",value:function(l,u,m,x,w,E,M){var N=this.w,H=w,Z=new yi(this.ctx),J=new Pi(this.ctx),ne=new In(this.ctx),fe=new Jn(this.ctx),ye=new Dt(this.ctx),De=fe.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:H,dataPointIndex:E,finishRadius:"bubble"===N.config.chart.type||N.globals.comboCharts&&N.config.series[w]&&"bubble"===N.config.series[w].type?x:null});x=De.pSize;var Pe,Se=ne.fillPath({seriesNumber:w,dataPointIndex:E,color:De.pointFillColor,patternUnits:"objectBoundingBox",value:N.globals.series[w][M]});if("circle"===De.shape?Pe=ye.drawCircle(m):"square"!==De.shape&&"rect"!==De.shape||(Pe=ye.drawRect(0,0,De.width-De.pointStrokeWidth/2,De.height-De.pointStrokeWidth/2,De.pRadius)),N.config.series[H].data[E]&&N.config.series[H].data[E].fillColor&&(Se=N.config.series[H].data[E].fillColor),Pe.attr({x:l-De.width/2-De.pointStrokeWidth/2,y:u-De.height/2-De.pointStrokeWidth/2,cx:l,cy:u,fill:Se,"fill-opacity":De.pointFillOpacity,stroke:De.pointStrokeColor,r:x,"stroke-width":De.pointStrokeWidth,"stroke-dasharray":De.pointStrokeDashArray,"stroke-opacity":De.pointStrokeOpacity}),N.config.chart.dropShadow.enabled&&J.dropShadow(Pe,N.config.chart.dropShadow,w),!this.initialAnim||N.globals.dataChanged||N.globals.resized?N.globals.animationEnded=!0:Z.animateMarker(Pe,0,"circle"===De.shape?x:{width:De.width,height:De.height},N.config.chart.animations.speed,N.globals.easing,function(){window.setTimeout(function(){Z.animationCompleted(Pe)},100)}),N.globals.dataChanged&&"circle"===De.shape)if(this.dynamicAnim){var le,we,Le,$e,mt=N.config.chart.animations.dynamicAnimation.speed;null!=($e=N.globals.previousPaths[w]&&N.globals.previousPaths[w][M])&&(le=$e.x,we=$e.y,Le=void 0!==$e.r?$e.r:x);for(var $t=0;$t<N.globals.collapsedSeries.length;$t++)N.globals.collapsedSeries[$t].index===w&&(mt=1,x=0);0===l&&0===u&&(x=0),Z.animateCircle(Pe,{cx:le,cy:we,r:Le},{cx:l,cy:u,r:x},mt,N.globals.easing)}else Pe.attr({r:x});return Pe.attr({rel:E,j:E,index:w,"default-marker-size":x}),J.setSelectionFilter(Pe,w,E),fe.addEvents(Pe),Pe.node.classList.add("apexcharts-marker"),Pe}},{key:"centerTextInBubble",value:function(l){return{y:l+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),ve}(),jr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"dataLabelsCorrection",value:function(l,u,m,x,w,E,M){var N=this.w,H=!1,Z=new Dt(this.ctx).getTextRects(m,M),J=Z.width,ne=Z.height;if(u<0&&(u=0),u>N.globals.gridHeight+ne&&(u=N.globals.gridHeight+ne/2),void 0===N.globals.dataLabelsRects[x]&&(N.globals.dataLabelsRects[x]=[]),N.globals.dataLabelsRects[x].push({x:l,y:u,width:J,height:ne}),void 0!==N.globals.dataLabelsRects[x][N.globals.dataLabelsRects[x].length-2]){var De=N.globals.dataLabelsRects[x][void 0!==N.globals.lastDrawnDataLabelsIndexes[x]?N.globals.lastDrawnDataLabelsIndexes[x][N.globals.lastDrawnDataLabelsIndexes[x].length-1]:0];(l>De.x+De.width||u>De.y+De.height||u+ne<De.y||l+J<De.x)&&(H=!0)}return(0===w||E)&&(H=!0),{x:l,y:u,textRects:Z,drawnextLabel:H}}},{key:"drawDataLabel",value:function(l){var u=this,m=l.type,x=l.pos,w=l.i,E=l.j,M=l.isRangeStart,N=l.strokeWidth,H=void 0===N?2:N,Z=this.w,J=new Dt(this.ctx),ne=Z.config.dataLabels,fe=0,ye=0,De=E,Pe=null;if(-1!==Z.globals.collapsedSeriesIndices.indexOf(w)||!ne.enabled||!Array.isArray(x.x))return Pe;Pe=J.group({class:"apexcharts-data-labels"});for(var Se=0;Se<x.x.length;Se++)if(fe=x.x[Se]+ne.offsetX,ye=x.y[Se]+ne.offsetY+H,!isNaN(fe)){1===E&&0===Se&&(De=0),1===E&&1===Se&&(De=1);var ze=Z.globals.series[w][De];"rangeArea"===m&&(ze=M?Z.globals.seriesRangeStart[w][De]:Z.globals.seriesRangeEnd[w][De]);var U="",le=function(we){return Z.config.dataLabels.formatter(we,{ctx:u.ctx,seriesIndex:w,dataPointIndex:De,w:Z})};"bubble"===Z.config.chart.type?(U=le(ze=Z.globals.seriesZ[w][De]),ye=x.y[Se],ye=new ia(this.ctx).centerTextInBubble(ye,w,De).y):void 0!==ze&&(U=le(ze)),this.plotDataLabelsText({x:fe,y:ye,text:U,i:w,j:De,parent:Pe,offsetCorrection:!0,dataLabelsConfig:Z.config.dataLabels})}return Pe}},{key:"plotDataLabelsText",value:function(l){var u=this.w,m=new Dt(this.ctx),x=l.x,w=l.y,E=l.i,M=l.j,N=l.text,H=l.textAnchor,Z=l.fontSize,J=l.parent,ne=l.dataLabelsConfig,fe=l.color,ye=l.alwaysDrawDataLabel,De=l.offsetCorrection;if(!(Array.isArray(u.config.dataLabels.enabledOnSeries)&&u.config.dataLabels.enabledOnSeries.indexOf(E)<0)){var Pe={x,y:w,drawnextLabel:!0,textRects:null};De&&(Pe=this.dataLabelsCorrection(x,w,N,E,M,ye,parseInt(ne.style.fontSize,10))),u.globals.zoomed||(x=Pe.x,w=Pe.y),Pe.textRects&&(x<-20-Pe.textRects.width||x>u.globals.gridWidth+Pe.textRects.width+30)&&(N="");var Se=u.globals.dataLabels.style.colors[E];(("bar"===u.config.chart.type||"rangeBar"===u.config.chart.type)&&u.config.plotOptions.bar.distributed||u.config.dataLabels.distributed)&&(Se=u.globals.dataLabels.style.colors[M]),"function"==typeof Se&&(Se=Se({series:u.globals.series,seriesIndex:E,dataPointIndex:M,w:u})),fe&&(Se=fe);var ze=ne.offsetX,U=ne.offsetY;if("bar"!==u.config.chart.type&&"rangeBar"!==u.config.chart.type||(ze=0,U=0),Pe.drawnextLabel){var le=m.drawText({width:100,height:parseInt(ne.style.fontSize,10),x:x+ze,y:w+U,foreColor:Se,textAnchor:H||ne.textAnchor,text:N,fontSize:Z||ne.style.fontSize,fontFamily:ne.style.fontFamily,fontWeight:ne.style.fontWeight||"normal"});if(le.attr({class:"apexcharts-datalabel",cx:x,cy:w}),ne.dropShadow.enabled){var we=ne.dropShadow;new Pi(this.ctx).dropShadow(le,we)}J.add(le),void 0===u.globals.lastDrawnDataLabelsIndexes[E]&&(u.globals.lastDrawnDataLabelsIndexes[E]=[]),u.globals.lastDrawnDataLabelsIndexes[E].push(M)}}}},{key:"addBackgroundToDataLabel",value:function(l,u){var m=this.w,x=m.config.dataLabels.background,w=x.padding,E=x.padding/2,M=u.width,N=u.height,H=new Dt(this.ctx).drawRect(u.x-w,u.y-E/2,M+2*w,N+E,x.borderRadius,"transparent"===m.config.chart.background?"#fff":m.config.chart.background,x.opacity,x.borderWidth,x.borderColor);return x.dropShadow.enabled&&new Pi(this.ctx).dropShadow(H,x.dropShadow),H}},{key:"dataLabelsBackground",value:function(){var l=this.w;if("bubble"!==l.config.chart.type)for(var u=l.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),m=0;m<u.length;m++){var x=u[m],w=x.getBBox(),E=null;if(w.width&&w.height&&(E=this.addBackgroundToDataLabel(x,w)),E){x.parentNode.insertBefore(E.node,x);var M=x.getAttribute("fill");!l.config.chart.animations.enabled||l.globals.resized||l.globals.dataChanged?E.attr({fill:M}):E.animate().attr({fill:M}),x.setAttribute("fill",l.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var l=this.w,u=l.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),m=l.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),x=0;x<u.length;x++)m&&m.insertBefore(u[x],m.nextSibling)}}]),ve}(),Pr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.legendInactiveClass="legend-mouseover-inactive"}return Be(ve,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(l){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(tt.escapeString(l),"']"))}},{key:"isSeriesHidden",value:function(l){var u=this.getSeriesByName(l),m=parseInt(u.getAttribute("data:realIndex"),10);return{isHidden:u.classList.contains("apexcharts-series-collapsed"),realIndex:m}}},{key:"addCollapsedClassToSeries",value:function(l,u){var m=this.w;function x(w){for(var E=0;E<w.length;E++)w[E].index===u&&l.node.classList.add("apexcharts-series-collapsed")}x(m.globals.collapsedSeries),x(m.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(l){var u=this.isSeriesHidden(l);return this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,u.isHidden),u.isHidden}},{key:"showSeries",value:function(l){var u=this.isSeriesHidden(l);u.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,!0)}},{key:"hideSeries",value:function(l){var u=this.isSeriesHidden(l);u.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(u.realIndex,!1)}},{key:"resetSeries",value:function(){var l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=this.w,w=tt.clone(x.globals.initialSeries);x.globals.previousPaths=[],m?(x.globals.collapsedSeries=[],x.globals.ancillaryCollapsedSeries=[],x.globals.collapsedSeriesIndices=[],x.globals.ancillaryCollapsedSeriesIndices=[]):w=this.emptyCollapsedSeries(w),x.config.series=w,l&&(u&&(x.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(w,x.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(l){for(var u=this.w,m=0;m<l.length;m++)u.globals.collapsedSeriesIndices.indexOf(m)>-1&&(l[m].data=[]);return l}},{key:"toggleSeriesOnHover",value:function(l,u){var m=this.w;u||(u=l.target);var x=m.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===l.type){var w=parseInt(u.getAttribute("rel"),10)-1,E=null,M=null;m.globals.axisCharts||"radialBar"===m.config.chart.type?m.globals.axisCharts?(E=m.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(w,"']")),M=m.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(w,"']"))):E=m.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(w+1,"']")):E=m.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(w+1,"'] path"));for(var N=0;N<x.length;N++)x[N].classList.add(this.legendInactiveClass);null!==E&&(m.globals.axisCharts||E.parentNode.classList.remove(this.legendInactiveClass),E.classList.remove(this.legendInactiveClass),null!==M&&M.classList.remove(this.legendInactiveClass))}else if("mouseout"===l.type)for(var H=0;H<x.length;H++)x[H].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(l,u){var m=this,x=this.w,w=x.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),E=function(N){for(var H=0;H<w.length;H++)w[H].classList[N](m.legendInactiveClass)};if("mousemove"===l.type){var M=parseInt(u.getAttribute("rel"),10)-1;E("add"),function(N){for(var H=0;H<w.length;H++){var Z=parseInt(w[H].getAttribute("val"),10);Z>=N.from&&Z<=N.to&&w[H].classList.remove(m.legendInactiveClass)}}(x.config.plotOptions.heatmap.colorScale.ranges[M])}else"mouseout"===l.type&&E("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],m=this.w,x=0;if(m.config.series.length>1)for(var w=m.config.series.map(function(M,N){return M.data&&M.data.length>0&&-1===m.globals.collapsedSeriesIndices.indexOf(N)&&(!m.globals.comboCharts||0===u.length||u.length&&u.indexOf(m.config.series[N].type)>-1)?N:-1}),E="asc"===l?0:w.length-1;"asc"===l?E<w.length:E>=0;"asc"===l?E++:E--)if(-1!==w[E]){x=w[E];break}return x}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(l,u){return"bar"===l.type||"column"===l.type?u:-1}).filter(function(l){return-1!==l}):this.w.config.series.map(function(l,u){return u})}},{key:"getPreviousPaths",value:function(){var l=this.w;function u(E,M,N){for(var H=E[M].childNodes,Z={type:N,paths:[],realIndex:E[M].getAttribute("data:realIndex")},J=0;J<H.length;J++)if(H[J].hasAttribute("pathTo")){var ne=H[J].getAttribute("pathTo");Z.paths.push({d:ne})}l.globals.previousPaths.push(Z)}l.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(E){for(var N=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(E,"-series .apexcharts-series")),H=0;H<N.length;H++)u(N,H,E)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var m=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l.config.chart.type," .apexcharts-series"));if(m.length>0)for(var x=function(E){for(var M=l.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(E,"'] rect")),N=[],H=function(J){var ne=function(ye){return M[J].getAttribute(ye)},fe={x:parseFloat(ne("x")),y:parseFloat(ne("y")),width:parseFloat(ne("width")),height:parseFloat(ne("height"))};N.push({rect:fe,color:M[J].getAttribute("color")})},Z=0;Z<M.length;Z++)H(Z);l.globals.previousPaths.push(N)},w=0;w<m.length;w++)x(w);l.globals.axisCharts||(l.globals.previousPaths=l.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(l){var u=this.w,m=u.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l,"-series .apexcharts-series"));if(m.length>0)for(var x=0;x<m.length;x++){for(var w=u.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(l,"-series .apexcharts-series[data\\:realIndex='").concat(x,"'] circle")),E=[],M=0;M<w.length;M++)E.push({x:w[M].getAttribute("cx"),y:w[M].getAttribute("cy"),r:w[M].getAttribute("r")});u.globals.previousPaths.push(E)}}},{key:"clearPreviousPaths",value:function(){var l=this.w;l.globals.previousPaths=[],l.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var l=this.w,u=l.config.noData,m=new Dt(this.ctx),x=l.globals.svgWidth/2,w=l.globals.svgHeight/2,E="middle";if(l.globals.noData=!0,l.globals.animationEnded=!0,"left"===u.align?(x=10,E="start"):"right"===u.align&&(x=l.globals.svgWidth-10,E="end"),"top"===u.verticalAlign?w=50:"bottom"===u.verticalAlign&&(w=l.globals.svgHeight-50),x+=u.offsetX,w=w+parseInt(u.style.fontSize,10)+2+u.offsetY,void 0!==u.text&&""!==u.text){var M=m.drawText({x,y:w,text:u.text,textAnchor:E,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,foreColor:u.style.color,opacity:1,class:"apexcharts-text-nodata"});l.globals.dom.Paper.add(M)}}},{key:"setNullSeriesToZeroValues",value:function(l){for(var u=this.w,m=0;m<l.length;m++)if(0===l[m].length)for(var x=0;x<l[u.globals.maxValsInArrayIndex].length;x++)l[m].push(0);return l}},{key:"hasAllSeriesEqualX",value:function(){for(var l=!0,u=this.w,m=this.filteredSeriesX(),x=0;x<m.length-1;x++)if(m[x][0]!==m[x+1][0]){l=!1;break}return u.globals.allSeriesHasEqualX=l,l}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(u){return u.length>0?u:[]})}}]),ve}(),Mn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Fi(this.ctx)}return Be(ve,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var l=this.w.config.series.slice(),u=new Pr(this.ctx);if(this.activeSeriesIndex=u.getActiveConfigSeriesIndex(),void 0!==l[this.activeSeriesIndex].data&&l[this.activeSeriesIndex].data.length>0&&null!==l[this.activeSeriesIndex].data[0]&&void 0!==l[this.activeSeriesIndex].data[0].x&&null!==l[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var l=this.w.config.series.slice(),u=new Pr(this.ctx);if(this.activeSeriesIndex=u.getActiveConfigSeriesIndex(),void 0!==l[this.activeSeriesIndex].data&&l[this.activeSeriesIndex].data.length>0&&null!=l[this.activeSeriesIndex].data[0]&&l[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(l,u){for(var m=this.w.config,x=this.w.globals,w="boxPlot"===m.chart.type||"boxPlot"===m.series[u].type,E=0;E<l[u].data.length;E++)if(void 0!==l[u].data[E][1]&&(Array.isArray(l[u].data[E][1])&&4===l[u].data[E][1].length&&!w?this.twoDSeries.push(tt.parseNumber(l[u].data[E][1][3])):this.twoDSeries.push(tt.parseNumber(l[u].data[E].length>=5?l[u].data[E][4]:l[u].data[E][1])),x.dataFormatXNumeric=!0),"datetime"===m.xaxis.type){var M=new Date(l[u].data[E][0]);M=new Date(M).getTime(),this.twoDSeriesX.push(M)}else this.twoDSeriesX.push(l[u].data[E][0]);for(var N=0;N<l[u].data.length;N++)void 0!==l[u].data[N][2]&&(this.threeDSeries.push(l[u].data[N][2]),x.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(l,u){var m=this.w.config,x=this.w.globals,w=new Ki(this.ctx),E=u;x.collapsedSeriesIndices.indexOf(u)>-1&&(E=this.activeSeriesIndex);for(var M=0;M<l[u].data.length;M++)void 0!==l[u].data[M].y&&(Array.isArray(l[u].data[M].y)?this.twoDSeries.push(tt.parseNumber(l[u].data[M].y[l[u].data[M].y.length-1])):this.twoDSeries.push(tt.parseNumber(l[u].data[M].y))),void 0!==l[u].data[M].goals&&Array.isArray(l[u].data[M].goals)?(void 0===this.seriesGoals[u]&&(this.seriesGoals[u]=[]),this.seriesGoals[u].push(l[u].data[M].goals)):(void 0===this.seriesGoals[u]&&(this.seriesGoals[u]=[]),this.seriesGoals[u].push(null));for(var N=0;N<l[E].data.length;N++){var H="string"==typeof l[E].data[N].x,Z=Array.isArray(l[E].data[N].x),J=!Z&&!!w.isValidDate(l[E].data[N].x);H||J?H||m.xaxis.convertedCatToNumeric?"datetime"!==m.xaxis.type||x.isBarHorizontal&&x.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(l[E].data[N].x),isNaN(l[E].data[N].x)||"category"===this.w.config.xaxis.type||"string"==typeof l[E].data[N].x||(x.isXNumeric=!0)):this.twoDSeriesX.push(w.parseDate(l[E].data[N].x)):"datetime"===m.xaxis.type?this.twoDSeriesX.push(w.parseDate(l[E].data[N].x.toString())):(x.dataFormatXNumeric=!0,x.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(l[E].data[N].x))):Z?(this.fallbackToCategory=!0,this.twoDSeriesX.push(l[E].data[N].x)):(x.isXNumeric=!0,x.dataFormatXNumeric=!0,this.twoDSeriesX.push(l[E].data[N].x))}if(l[u].data[0]&&void 0!==l[u].data[0].z){for(var fe=0;fe<l[u].data.length;fe++)this.threeDSeries.push(l[u].data[fe].z);x.isDataXYZ=!0}}},{key:"handleRangeData",value:function(l,u){var m=this.w.globals,x={};return this.isFormat2DArray()?x=this.handleRangeDataFormat("array",l,u):this.isFormatXY()&&(x=this.handleRangeDataFormat("xy",l,u)),m.seriesRangeStart.push(void 0===x.start?[]:x.start),m.seriesRangeEnd.push(void 0===x.end?[]:x.end),m.seriesRange.push(x.rangeUniques),m.seriesRange.forEach(function(w,E){w&&w.forEach(function(M,N){M.y.forEach(function(H,Z){for(var J=0;J<M.y.length;J++)Z!==J&&H.y1<=M.y[J].y2&&M.y[J].y1<=H.y2&&(M.overlaps.indexOf(H.rangeName)<0&&M.overlaps.push(H.rangeName),M.overlaps.indexOf(M.y[J].rangeName)<0&&M.overlaps.push(M.y[J].rangeName))})})}),x}},{key:"handleCandleStickBoxData",value:function(l,u){var m=this.w.globals,x={};return this.isFormat2DArray()?x=this.handleCandleStickBoxDataFormat("array",l,u):this.isFormatXY()&&(x=this.handleCandleStickBoxDataFormat("xy",l,u)),m.seriesCandleO[u]=x.o,m.seriesCandleH[u]=x.h,m.seriesCandleM[u]=x.m,m.seriesCandleL[u]=x.l,m.seriesCandleC[u]=x.c,x}},{key:"handleRangeDataFormat",value:function(l,u,m){var x=[],w=[],E=u[m].data.filter(function(Z,J,ne){return J===ne.findIndex(function(fe){return fe.x===Z.x})}).map(function(Z,J){return{x:Z.x,overlaps:[],y:[]}});if("array"===l)for(var M=0;M<u[m].data.length;M++)Array.isArray(u[m].data[M])?(x.push(u[m].data[M][1][0]),w.push(u[m].data[M][1][1])):(x.push(u[m].data[M]),w.push(u[m].data[M]));else if("xy"===l)for(var N=function(Z){var J=Array.isArray(u[m].data[Z].y),ne=tt.randomId(),fe=u[m].data[Z].x,ye={y1:J?u[m].data[Z].y[0]:u[m].data[Z].y,y2:J?u[m].data[Z].y[1]:u[m].data[Z].y,rangeName:ne};u[m].data[Z].rangeName=ne;var De=E.findIndex(function(Pe){return Pe.x===fe});E[De].y.push(ye),x.push(ye.y1),w.push(ye.y2)},H=0;H<u[m].data.length;H++)N(H);return{start:x,end:w,rangeUniques:E}}},{key:"handleCandleStickBoxDataFormat",value:function(l,u,m){var x=this.w,w="boxPlot"===x.config.chart.type||"boxPlot"===x.config.series[m].type,E=[],M=[],N=[],H=[],Z=[];if("array"===l)if(w&&6===u[m].data[0].length||!w&&5===u[m].data[0].length)for(var J=0;J<u[m].data.length;J++)E.push(u[m].data[J][1]),M.push(u[m].data[J][2]),w?(N.push(u[m].data[J][3]),H.push(u[m].data[J][4]),Z.push(u[m].data[J][5])):(H.push(u[m].data[J][3]),Z.push(u[m].data[J][4]));else for(var ne=0;ne<u[m].data.length;ne++)Array.isArray(u[m].data[ne][1])&&(E.push(u[m].data[ne][1][0]),M.push(u[m].data[ne][1][1]),w?(N.push(u[m].data[ne][1][2]),H.push(u[m].data[ne][1][3]),Z.push(u[m].data[ne][1][4])):(H.push(u[m].data[ne][1][2]),Z.push(u[m].data[ne][1][3])));else if("xy"===l)for(var fe=0;fe<u[m].data.length;fe++)Array.isArray(u[m].data[fe].y)&&(E.push(u[m].data[fe].y[0]),M.push(u[m].data[fe].y[1]),w?(N.push(u[m].data[fe].y[2]),H.push(u[m].data[fe].y[3]),Z.push(u[m].data[fe].y[4])):(H.push(u[m].data[fe].y[2]),Z.push(u[m].data[fe].y[3])));return{o:E,h:M,m:N,l:H,c:Z}}},{key:"parseDataAxisCharts",value:function(l){var u,m=this,w=this.w.config,E=this.w.globals,M=new Ki(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),N=w.labels.length>0?w.labels.slice():w.xaxis.categories.slice();if(E.isRangeBar="rangeBar"===w.chart.type&&E.isBarHorizontal,E.hasXaxisGroups="category"===w.xaxis.type&&w.xaxis.group.groups.length>0,E.hasXaxisGroups&&(E.groups=w.xaxis.group.groups),E.hasSeriesGroups=null===(u=l[0])||void 0===u?void 0:u.group,E.hasSeriesGroups){var H=[],Z=et(new Set(l.map(function(ye){return ye.group})));l.forEach(function(ye,De){var Pe=Z.indexOf(ye.group);H[Pe]||(H[Pe]=[]),H[Pe].push(ye.name)}),E.seriesGroups=H}for(var J=function(){for(var ye=0;ye<N.length;ye++)if("string"==typeof N[ye]){if(!M.isValidDate(N[ye]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");m.twoDSeriesX.push(M.parseDate(N[ye]))}else m.twoDSeriesX.push(N[ye])},ne=0;ne<l.length;ne++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===l[ne].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==w.chart.type&&"rangeArea"!==w.chart.type&&"rangeBar"!==l[ne].type&&"rangeArea"!==l[ne].type||(E.isRangeData=!0,"rangeBar"!==w.chart.type&&"rangeArea"!==w.chart.type||this.handleRangeData(l,ne)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(l,ne):this.isFormatXY()&&this.handleFormatXY(l,ne),"candlestick"!==w.chart.type&&"candlestick"!==l[ne].type&&"boxPlot"!==w.chart.type&&"boxPlot"!==l[ne].type||this.handleCandleStickBoxData(l,ne),E.series.push(this.twoDSeries),E.labels.push(this.twoDSeriesX),E.seriesX.push(this.twoDSeriesX),E.seriesGoals=this.seriesGoals,ne!==this.activeSeriesIndex||this.fallbackToCategory||(E.isXNumeric=!0);else{"datetime"===w.xaxis.type?(E.isXNumeric=!0,J(),E.seriesX.push(this.twoDSeriesX)):"numeric"===w.xaxis.type&&(E.isXNumeric=!0,N.length>0&&(this.twoDSeriesX=N,E.seriesX.push(this.twoDSeriesX))),E.labels.push(this.twoDSeriesX);var fe=l[ne].data.map(function(ye){return tt.parseNumber(ye)});E.series.push(fe)}E.seriesZ.push(this.threeDSeries),E.seriesNames.push(void 0!==l[ne].name?l[ne].name:"series-"+parseInt(ne+1,10)),E.seriesColors.push(void 0!==l[ne].color?l[ne].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(l){var u=this.w.globals,m=this.w.config;u.series=l.slice(),u.seriesNames=m.labels.slice();for(var x=0;x<u.series.length;x++)void 0===u.seriesNames[x]&&u.seriesNames.push("series-"+(x+1));return this.w}},{key:"handleExternalLabelsData",value:function(l){var u=this.w.config,m=this.w.globals;u.xaxis.categories.length>0?m.labels=u.xaxis.categories:u.labels.length>0?m.labels=u.labels.slice():this.fallbackToCategory?(m.labels=m.labels[0],m.seriesRange.length&&(m.seriesRange.map(function(x){x.forEach(function(w){m.labels.indexOf(w.x)<0&&w.x&&m.labels.push(w.x)})}),m.labels=Array.from(new Set(m.labels.map(JSON.stringify)),JSON.parse)),u.xaxis.convertedCatToNumeric&&(new yr(u).convertCatToNumericXaxis(u,this.ctx,m.seriesX[0]),this._generateExternalLabels(l))):this._generateExternalLabels(l)}},{key:"_generateExternalLabels",value:function(l){var u=this.w.globals,m=this.w.config,x=[];if(u.axisCharts){if(u.series.length>0)if(this.isFormatXY())for(var w=m.series.map(function(J,ne){return J.data.filter(function(fe,ye,De){return De.findIndex(function(Pe){return Pe.x===fe.x})===ye})}),E=w.reduce(function(J,ne,fe,ye){return ye[J].length>ne.length?J:fe},0),M=0;M<w[E].length;M++)x.push(M+1);else for(var N=0;N<u.series[u.maxValsInArrayIndex].length;N++)x.push(N+1);u.seriesX=[];for(var H=0;H<l.length;H++)u.seriesX.push(x);this.w.globals.isBarHorizontal||(u.isXNumeric=!0)}if(0===x.length){x=u.axisCharts?[]:u.series.map(function(J,ne){return ne+1});for(var Z=0;Z<l.length;Z++)u.seriesX.push(x)}u.labels=x,m.xaxis.convertedCatToNumeric&&(u.categoryLabels=x.map(function(J){return m.xaxis.labels.formatter(J)})),u.noLabelsProvided=!0}},{key:"parseData",value:function(l){var u=this.w,m=u.config,x=u.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),x.axisCharts?(this.parseDataAxisCharts(l),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(l),m.chart.stacked){var w=new Pr(this.ctx);x.series=w.setNullSeriesToZeroValues(x.series)}this.coreUtils.getSeriesTotals(),x.axisCharts&&(x.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),x.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),x.dataFormatXNumeric||x.isXNumeric&&("numeric"!==m.xaxis.type||0!==m.labels.length||0!==m.xaxis.categories.length)||this.handleExternalLabelsData(l);for(var E=this.coreUtils.getCategoryLabels(x.labels),M=0;M<E.length;M++)if(Array.isArray(E[M])){x.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var l=this.w,u=[];l.globals.seriesYAxisMap.forEach(function(m,x){var w=0;m.forEach(function(E){-1!==l.globals.collapsedSeriesIndices.indexOf(E)&&w++}),w>0&&w==m.length&&u.push(x)}),l.globals.ignoreYAxisIndexes=u.map(function(m){return m})}}]),ve}(),Ya=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"getLabel",value:function(l,u,m,x){var Pe,Se,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",M=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],N=this.w,H=void 0===l[x]?"":l[x],Z=H,J=N.globals.xLabelFormatter,ne=N.config.xaxis.labels.formatter,fe=!1,ye=new tn(this.ctx);M&&(Z=ye.xLabelFormat(J,H,H,{i:x,dateFormatter:new Ki(this.ctx).formatDate,w:N}),void 0!==ne&&(Z=ne(H,l[x],{i:x,dateFormatter:new Ki(this.ctx).formatDate,w:N}))),u.length>0?(Pe=u[x].unit,Se=null,u.forEach(function(we){"month"===we.unit?Se="year":"day"===we.unit?Se="month":"hour"===we.unit?Se="day":"minute"===we.unit&&(Se="hour")}),fe=Se===Pe,m=u[x].position,Z=u[x].value):"datetime"===N.config.xaxis.type&&void 0===ne&&(Z=""),void 0===Z&&(Z=""),Z=Array.isArray(Z)?Z:Z.toString();var U,ze=new Dt(this.ctx);U=N.globals.rotateXLabels&&M?ze.getTextRects(Z,parseInt(E,10),null,"rotate(".concat(N.config.xaxis.labels.rotate," 0 0)"),!1):ze.getTextRects(Z,parseInt(E,10));var le=!N.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(Z)&&("NaN"===String(Z)||w.indexOf(Z)>=0&&le)&&(Z=""),{x:m,text:Z,textRect:U,isBold:fe}}},{key:"checkLabelBasedOnTickamount",value:function(l,u,m){var x=this.w,w=x.config.xaxis.tickAmount;return"dataPoints"===w&&(w=Math.round(x.globals.gridWidth/120)),w>m||l%Math.round(m/(w+1))==0||(u.text=""),u}},{key:"checkForOverflowingLabels",value:function(l,u,m,x,w){var E=this.w;if(0===l&&E.globals.skipFirstTimelinelabel&&(u.text=""),l===m-1&&E.globals.skipLastTimelinelabel&&(u.text=""),E.config.xaxis.labels.hideOverlappingLabels&&x.length>0){var M=w[w.length-1];u.x<M.textRect.width/(E.globals.rotateXLabels?Math.abs(E.config.xaxis.labels.rotate)/12:1.01)+M.x&&(u.text="")}return u}},{key:"checkForReversedLabels",value:function(l,u){var m=this.w;return m.config.yaxis[l]&&m.config.yaxis[l].reversed&&u.reverse(),u}},{key:"isYAxisHidden",value:function(l){var u=this.w,m=new Fi(this.ctx),x=!u.globals.seriesYAxisMap[l].some(function(w){return-1===u.globals.collapsedSeriesIndices.indexOf(w)});return!u.config.yaxis[l].show||!u.config.yaxis[l].showForNullSeries&&m.isSeriesNull(l)&&x}},{key:"getYAxisForeColor",value:function(l,u){var m=this.w;return Array.isArray(l)&&m.globals.yAxisScale[u]&&this.ctx.theme.pushExtraColors(l,m.globals.yAxisScale[u].result.length,!1),l}},{key:"drawYAxisTicks",value:function(l,u,m,x,w,E,M){var N=this.w,H=new Dt(this.ctx),Z=N.globals.translateY;if(x.show&&u>0){!0===N.config.yaxis[w].opposite&&(l+=x.width);for(var J=u;J>=0;J--){var ne=Z+u/10+N.config.yaxis[w].labels.offsetY-1;N.globals.isBarHorizontal&&(ne=E*J),"heatmap"===N.config.chart.type&&(ne+=E/2);var fe=H.drawLine(l+m.offsetX-x.width+x.offsetX,ne+x.offsetY,l+m.offsetX+x.offsetX,ne+x.offsetY,x.color);M.add(fe),Z+=E}}}}]),ve}(),ka=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"scaleSvgNode",value:function(l,u){var m=parseFloat(l.getAttributeNS(null,"width")),x=parseFloat(l.getAttributeNS(null,"height"));l.setAttributeNS(null,"width",m*u),l.setAttributeNS(null,"height",x*u),l.setAttributeNS(null,"viewBox","0 0 "+m+" "+x)}},{key:"fixSvgStringForIe11",value:function(l){if(!tt.isIE11())return l.replace(/&nbsp;/g,"&#160;");var u=0,m=l.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(x){return 2==++u?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':x});return(m=m.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(l){null==l&&(l=1);var u=this.w.globals.dom.Paper.svg();if(1!==l){var m=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(m,l),u=(new XMLSerializer).serializeToString(m)}return this.fixSvgStringForIe11(u)}},{key:"cleanup",value:function(){var l=this.w,u=l.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),m=l.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),x=l.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(x,function(w){w.setAttribute("width",0)}),u&&u[0]&&(u[0].setAttribute("x",-500),u[0].setAttribute("x1",-500),u[0].setAttribute("x2",-500)),m&&m[0]&&(m[0].setAttribute("y",-100),m[0].setAttribute("y1",-100),m[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var l=this.getSvgString(),u=new Blob([l],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(u)}},{key:"dataURI",value:function(l){var u=this;return new Promise(function(m){var x=u.w,w=l?l.scale||l.width/x.globals.svgWidth:1;u.cleanup();var E=document.createElement("canvas");E.width=x.globals.svgWidth*w,E.height=parseInt(x.globals.dom.elWrap.style.height,10)*w;var M="transparent"===x.config.chart.background?"#fff":x.config.chart.background,N=E.getContext("2d");N.fillStyle=M,N.fillRect(0,0,E.width*w,E.height*w);var H=u.getSvgString(w);if(window.canvg&&tt.isIE11()){var Z=window.canvg.Canvg.fromString(N,H,{ignoreClear:!0,ignoreDimensions:!0});Z.start();var J=E.msToBlob();Z.stop(),m({blob:J})}else{var ne="data:image/svg+xml,"+encodeURIComponent(H),fe=new Image;fe.crossOrigin="anonymous",fe.onload=function(){if(N.drawImage(fe,0,0),E.msToBlob){var ye=E.msToBlob();m({blob:ye})}else{var De=E.toDataURL("image/png");m({imgURI:De})}},fe.src=ne}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var l=this;this.dataURI().then(function(u){var m=u.imgURI,x=u.blob;x?navigator.msSaveOrOpenBlob(x,l.w.globals.chartID+".png"):l.triggerDownload(m,l.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(l){var u=this,m=l.series,x=l.fileName,w=l.columnDelimiter,E=void 0===w?",":w,M=l.lineDelimiter,N=void 0===M?"\n":M,H=this.w;m||(m=H.config.series);var Z,J,ne=[],fe=[],ye="",De=H.globals.series.map(function(Le,$e){return-1===H.globals.collapsedSeriesIndices.indexOf($e)?Le:[]}),Pe=function(Le){return"datetime"===H.config.xaxis.type&&String(Le).length>=10},Se=Math.max.apply(Math,et(m.map(function(Le){return Le.data?Le.data.length:0}))),ze=new Mn(this.ctx),U=new Ya(this.ctx),le=function(Le){var $e="";if(H.globals.axisCharts){if("category"===H.config.xaxis.type||H.config.xaxis.convertedCatToNumeric)if(H.globals.isBarHorizontal){var mt=H.globals.yLabelFormatters[0],$t=new Pr(u.ctx).getActiveConfigSeriesIndex();$e=mt(H.globals.labels[Le],{seriesIndex:$t,dataPointIndex:Le,w:H})}else $e=U.getLabel(H.globals.labels,H.globals.timescaleLabels,0,Le).text;"datetime"===H.config.xaxis.type&&(H.config.xaxis.categories.length?$e=H.config.xaxis.categories[Le]:H.config.labels.length&&($e=H.config.labels[Le]))}else $e=H.config.labels[Le];return Array.isArray($e)&&($e=$e.join(" ")),tt.isNumber($e)?$e:$e.split(E).join("")};ne.push(H.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===H.config.chart.type?(ne.push("minimum"),ne.push("q1"),ne.push("median"),ne.push("q3"),ne.push("maximum")):"candlestick"===H.config.chart.type?(ne.push("open"),ne.push("high"),ne.push("low"),ne.push("close")):"rangeBar"===H.config.chart.type?(ne.push("minimum"),ne.push("maximum")):m.map(function(Le,$e){var mt=(Le.name?Le.name:"series-".concat($e))+"";H.globals.axisCharts&&ne.push(mt.split(E).join("")?mt.split(E).join(""):"series-".concat($e))}),H.globals.axisCharts||(ne.push(H.config.chart.toolbar.export.csv.headerValue),fe.push(ne.join(E))),H.globals.allSeriesHasEqualX||!H.globals.axisCharts||H.config.xaxis.categories.length||H.config.labels.length?m.map(function(Le,$e){H.globals.axisCharts?function(Le,$e){if(ne.length&&0===$e&&fe.push(ne.join(E)),Le.data){Le.data=Le.data.length&&Le.data||et(Array(Se)).map(function(){return""});for(var mt=0;mt<Le.data.length;mt++){ne=[];var $t=le(mt);if($t||(ze.isFormatXY()?$t=m[$e].data[mt].x:ze.isFormat2DArray()&&($t=m[$e].data[mt]?m[$e].data[mt][0]:"")),0===$e){ne.push(Pe($t)?H.config.chart.toolbar.export.csv.dateFormatter($t):tt.isNumber($t)?$t:$t.split(E).join(""));for(var Xt=0;Xt<H.globals.series.length;Xt++){var Li;ze.isFormatXY()?ne.push(null===(Li=m[Xt].data[mt])||void 0===Li?void 0:Li.y):ne.push(De[Xt][mt])}}("candlestick"===H.config.chart.type||Le.type&&"candlestick"===Le.type)&&(ne.pop(),ne.push(H.globals.seriesCandleO[$e][mt]),ne.push(H.globals.seriesCandleH[$e][mt]),ne.push(H.globals.seriesCandleL[$e][mt]),ne.push(H.globals.seriesCandleC[$e][mt])),("boxPlot"===H.config.chart.type||Le.type&&"boxPlot"===Le.type)&&(ne.pop(),ne.push(H.globals.seriesCandleO[$e][mt]),ne.push(H.globals.seriesCandleH[$e][mt]),ne.push(H.globals.seriesCandleM[$e][mt]),ne.push(H.globals.seriesCandleL[$e][mt]),ne.push(H.globals.seriesCandleC[$e][mt])),"rangeBar"===H.config.chart.type&&(ne.pop(),ne.push(H.globals.seriesRangeStart[$e][mt]),ne.push(H.globals.seriesRangeEnd[$e][mt])),ne.length&&fe.push(ne.join(E))}}}(Le,$e):((ne=[]).push(H.globals.labels[$e].split(E).join("")),ne.push(De[$e]),fe.push(ne.join(E)))}):(Z=new Set,J={},m.forEach(function(Le,$e){Le?.data.forEach(function(mt){var $t,Xt;if(ze.isFormatXY())$t=mt.x,Xt=mt.y;else{if(!ze.isFormat2DArray())return;$t=mt[0],Xt=mt[1]}J[$t]||(J[$t]=Array(m.length).fill("")),J[$t][$e]=Xt,Z.add($t)})}),ne.length&&fe.push(ne.join(E)),Array.from(Z).sort().forEach(function(Le){fe.push([Pe(Le)&&"datetime"===H.config.xaxis.type?H.config.chart.toolbar.export.csv.dateFormatter(Le):tt.isNumber(Le)?Le:Le.split(E).join(""),J[Le].join(E)])})),ye+=fe.join(N),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+ye),x||H.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(l,u,m){var x=document.createElement("a");x.href=l,x.download=(u||this.w.globals.chartID)+m,document.body.appendChild(x),x.click(),document.body.removeChild(x)}}]),ve}(),Ma=function(){function ve(l,u){j(this,ve),this.ctx=l,this.elgrid=u,this.w=l.w;var m=this.w;this.axesUtils=new Ya(l),this.xaxisLabels=m.globals.labels.slice(),m.globals.timescaleLabels.length>0&&!m.globals.isBarHorizontal&&(this.xaxisLabels=m.globals.timescaleLabels.slice()),m.config.xaxis.overwriteCategories&&(this.xaxisLabels=m.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===m.config.xaxis.position?0:m.globals.gridHeight+1,this.offY=this.offY+m.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===m.config.chart.type&&m.config.plotOptions.bar.horizontal,this.xaxisFontSize=m.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=m.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=m.config.xaxis.labels.style.colors,this.xaxisBorderWidth=m.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=m.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=this.xaxisBorderWidth.indexOf("%")>-1?m.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=m.config.xaxis.axisBorder.height,this.yaxis=m.config.yaxis[0]}return Be(ve,[{key:"drawXaxis",value:function(){var l=this.w,u=new Dt(this.ctx),m=u.group({class:"apexcharts-xaxis",transform:"translate(".concat(l.config.xaxis.offsetX,", ").concat(l.config.xaxis.offsetY,")")}),x=u.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(l.globals.translateXAxisX,", ").concat(l.globals.translateXAxisY,")")});m.add(x);for(var w=[],E=0;E<this.xaxisLabels.length;E++)w.push(this.xaxisLabels[E]);if(this.drawXAxisLabelAndGroup(!0,u,x,w,l.globals.isXNumeric,function(ye,De){return De}),l.globals.hasXaxisGroups){var M=l.globals.groups;w=[];for(var N=0;N<M.length;N++)w.push(M[N].title);var H={};l.config.xaxis.group.style&&(H.xaxisFontSize=l.config.xaxis.group.style.fontSize,H.xaxisFontFamily=l.config.xaxis.group.style.fontFamily,H.xaxisForeColors=l.config.xaxis.group.style.colors,H.fontWeight=l.config.xaxis.group.style.fontWeight,H.cssClass=l.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,u,x,w,!1,function(ye,De){return M[ye].cols*De},H)}if(void 0!==l.config.xaxis.title.text){var Z=u.group({class:"apexcharts-xaxis-title"}),J=u.drawText({x:l.globals.gridWidth/2+l.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===l.config.xaxis.position?l.globals.xAxisLabelsHeight:-l.globals.xAxisLabelsHeight-10)+l.config.xaxis.title.offsetY,text:l.config.xaxis.title.text,textAnchor:"middle",fontSize:l.config.xaxis.title.style.fontSize,fontFamily:l.config.xaxis.title.style.fontFamily,fontWeight:l.config.xaxis.title.style.fontWeight,foreColor:l.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+l.config.xaxis.title.style.cssClass});Z.add(J),m.add(Z)}if(l.config.xaxis.axisBorder.show){var ne=l.globals.barPadForNumericAxis,fe=u.drawLine(l.globals.padHorizontal+l.config.xaxis.axisBorder.offsetX-ne,this.offY,this.xaxisBorderWidth+ne,this.offY,l.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&l.config.grid.show?this.elgrid.elGridBorders.add(fe):m.add(fe)}return m}},{key:"drawXAxisLabelAndGroup",value:function(l,u,m,x,w,E){var M,N=this,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},Z=[],J=[],ne=this.w,fe=H.xaxisFontSize||this.xaxisFontSize,ye=H.xaxisFontFamily||this.xaxisFontFamily,De=H.xaxisForeColors||this.xaxisForeColors,Pe=H.fontWeight||ne.config.xaxis.labels.style.fontWeight,Se=H.cssClass||ne.config.xaxis.labels.style.cssClass,ze=ne.globals.padHorizontal,U=x.length,le="category"===ne.config.xaxis.type?ne.globals.dataPoints:U;0===le&&U>le&&(le=U),w?(M=ne.globals.gridWidth/Math.min(le>1?le-1:le,U-1),ze=ze+E(0,M)/2+ne.config.xaxis.labels.offsetX):ze=ze+E(0,M=ne.globals.gridWidth/le)+ne.config.xaxis.labels.offsetX;for(var Le=function(mt){var $t=ze-E(mt,M)/2+ne.config.xaxis.labels.offsetX;0===mt&&1===U&&M/2===ze&&1===le&&($t=ne.globals.gridWidth/2);var Xt=N.axesUtils.getLabel(x,ne.globals.timescaleLabels,$t,mt,Z,fe,l),Li=28;if(ne.globals.rotateXLabels&&l&&(Li=22),ne.config.xaxis.title.text&&"top"===ne.config.xaxis.position&&(Li+=parseFloat(ne.config.xaxis.title.style.fontSize)+2),l||(Li=Li+parseFloat(fe)+(ne.globals.xAxisLabelsHeight-ne.globals.xAxisGroupLabelsHeight)+(ne.globals.rotateXLabels?10:0)),Xt=void 0!==ne.config.xaxis.tickAmount&&"dataPoints"!==ne.config.xaxis.tickAmount&&"datetime"!==ne.config.xaxis.type?N.axesUtils.checkLabelBasedOnTickamount(mt,Xt,U):N.axesUtils.checkForOverflowingLabels(mt,Xt,U,Z,J),ne.config.xaxis.labels.show){var Ji=u.drawText({x:Xt.x,y:N.offY+ne.config.xaxis.labels.offsetY+Li-("top"===ne.config.xaxis.position?ne.globals.xAxisHeight+ne.config.xaxis.axisTicks.height-2:0),text:Xt.text,textAnchor:"middle",fontWeight:Xt.isBold?600:Pe,fontSize:fe,fontFamily:ye,foreColor:Array.isArray(De)?l&&ne.config.xaxis.convertedCatToNumeric?De[ne.globals.minX+mt-1]:De[mt]:De,isPlainText:!1,cssClass:(l?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+Se});if(m.add(Ji),Ji.on("click",function(Un){if("function"==typeof ne.config.chart.events.xAxisLabelClick){var cr=Object.assign({},ne,{labelIndex:mt});ne.config.chart.events.xAxisLabelClick(Un,N.ctx,cr)}}),l){var ln=document.createElementNS(ne.globals.SVGNS,"title");ln.textContent=Array.isArray(Xt.text)?Xt.text.join(" "):Xt.text,Ji.node.appendChild(ln),""!==Xt.text&&(Z.push(Xt.text),J.push(Xt))}}mt<U-1&&(ze+=E(mt+1,M))},$e=0;$e<=U-1;$e++)Le($e)}},{key:"drawXaxisInversed",value:function(l){var u,m,x=this,w=this.w,E=new Dt(this.ctx),M=w.config.yaxis[0].opposite?w.globals.translateYAxisX[l]:0,N=E.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:l}),H=E.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+M+", 0)"});N.add(H);var Z=[];if(w.config.yaxis[l].show)for(var J=0;J<this.xaxisLabels.length;J++)Z.push(this.xaxisLabels[J]);m=-(u=w.globals.gridHeight/Z.length)/2.2;var ne=w.globals.yLabelFormatters[0],fe=w.config.yaxis[0].labels;if(fe.show)for(var ye=function(we){var Le=void 0===Z[we]?"":Z[we];Le=ne(Le,{seriesIndex:l,dataPointIndex:we,w});var $e=x.axesUtils.getYAxisForeColor(fe.style.colors,l),mt=0;Array.isArray(Le)&&(mt=Le.length/2*parseInt(fe.style.fontSize,10));var $t=fe.offsetX-15,Xt="end";x.yaxis.opposite&&(Xt="start"),"left"===w.config.yaxis[0].labels.align?($t=fe.offsetX,Xt="start"):"center"===w.config.yaxis[0].labels.align?($t=fe.offsetX,Xt="middle"):"right"===w.config.yaxis[0].labels.align&&(Xt="end");var Li=E.drawText({x:$t,y:m+u+fe.offsetY-mt,text:Le,textAnchor:Xt,foreColor:Array.isArray($e)?$e[we]:$e,fontSize:fe.style.fontSize,fontFamily:fe.style.fontFamily,fontWeight:fe.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+fe.style.cssClass,maxWidth:fe.maxWidth});H.add(Li),Li.on("click",function(Un){if("function"==typeof w.config.chart.events.xAxisLabelClick){var cr=Object.assign({},w,{labelIndex:we});w.config.chart.events.xAxisLabelClick(Un,x.ctx,cr)}});var Ji=document.createElementNS(w.globals.SVGNS,"title");if(Ji.textContent=Array.isArray(Le)?Le.join(" "):Le,Li.node.appendChild(Ji),0!==w.config.yaxis[l].labels.rotate){var ln=E.rotateAroundCenter(Li.node);Li.node.setAttribute("transform","rotate(".concat(w.config.yaxis[l].labels.rotate," 0 ").concat(ln.y,")"))}m+=u},De=0;De<=Z.length-1;De++)ye(De);if(void 0!==w.config.yaxis[0].title.text){var Pe=E.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+M+", 0)"}),Se=E.drawText({x:w.config.yaxis[0].title.offsetX,y:w.globals.gridHeight/2+w.config.yaxis[0].title.offsetY,text:w.config.yaxis[0].title.text,textAnchor:"middle",foreColor:w.config.yaxis[0].title.style.color,fontSize:w.config.yaxis[0].title.style.fontSize,fontWeight:w.config.yaxis[0].title.style.fontWeight,fontFamily:w.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+w.config.yaxis[0].title.style.cssClass});Pe.add(Se),N.add(Pe)}var ze=0;this.isCategoryBarHorizontal&&w.config.yaxis[0].opposite&&(ze=w.globals.gridWidth);var U=w.config.xaxis.axisBorder;if(U.show){var le=E.drawLine(w.globals.padHorizontal+U.offsetX+ze,1+U.offsetY,w.globals.padHorizontal+U.offsetX+ze,w.globals.gridHeight+U.offsetY,U.color,0);this.elgrid&&this.elgrid.elGridBorders&&w.config.grid.show?this.elgrid.elGridBorders.add(le):N.add(le)}return w.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(ze,Z.length,w.config.yaxis[0].axisBorder,w.config.yaxis[0].axisTicks,0,u,N),N}},{key:"drawXaxisTicks",value:function(l,u,m){var x=this.w,w=l;if(!(l<0||l-2>x.globals.gridWidth)){var E=this.offY+x.config.xaxis.axisTicks.offsetY;if(u=u+E+x.config.xaxis.axisTicks.height,"top"===x.config.xaxis.position&&(u=E-x.config.xaxis.axisTicks.height),x.config.xaxis.axisTicks.show){var M=new Dt(this.ctx).drawLine(l+x.config.xaxis.axisTicks.offsetX,E+x.config.xaxis.offsetY,w+x.config.xaxis.axisTicks.offsetX,u+x.config.xaxis.offsetY,x.config.xaxis.axisTicks.color);m.add(M),M.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var l=this.w,u=[],m=this.xaxisLabels.length,x=l.globals.padHorizontal;if(l.globals.timescaleLabels.length>0)for(var w=0;w<m;w++)u.push(x=this.xaxisLabels[w].position);else for(var E=m,M=0;M<E;M++){var N=E;l.globals.isXNumeric&&"bar"!==l.config.chart.type&&(N-=1),u.push(x+=l.globals.gridWidth/N)}return u}},{key:"xAxisLabelCorrections",value:function(){var l=this.w,u=new Dt(this.ctx),m=l.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),x=l.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),w=l.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),E=l.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(l.globals.rotateXLabels||l.config.xaxis.labels.rotateAlways)for(var M=0;M<x.length;M++){var N=u.rotateAroundCenter(x[M]);N.y=N.y-1,N.x=N.x+1,x[M].setAttribute("transform","rotate(".concat(l.config.xaxis.labels.rotate," ").concat(N.x," ").concat(N.y,")")),x[M].setAttribute("text-anchor","end"),m.setAttribute("transform","translate(0, ".concat(-10,")")),l.config.xaxis.labels.trim&&Array.prototype.forEach.call(x[M].childNodes,function(fe){u.placeTextWithEllipsis(fe,fe.textContent,l.globals.xAxisLabelsHeight-("bottom"===l.config.legend.position?20:10))})}else!function(){for(var fe=l.globals.gridWidth/(l.globals.labels.length+1),ye=0;ye<x.length;ye++)l.config.xaxis.labels.trim&&"datetime"!==l.config.xaxis.type&&Array.prototype.forEach.call(x[ye].childNodes,function(Pe){u.placeTextWithEllipsis(Pe,Pe.textContent,fe)})}();if(w.length>0){var Z=w[w.length-1].getBBox(),J=w[0].getBBox();Z.x<-20&&w[w.length-1].parentNode.removeChild(w[w.length-1]),J.x+J.width>l.globals.gridWidth&&!l.globals.isBarHorizontal&&w[0].parentNode.removeChild(w[0]);for(var ne=0;ne<E.length;ne++)u.placeTextWithEllipsis(E[ne],E[ne].textContent,l.config.yaxis[0].labels.maxWidth-(l.config.yaxis[0].title.text?2*parseFloat(l.config.yaxis[0].title.style.fontSize):0)-15)}}}]),ve}(),pr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w;var u=this.w;this.xaxisLabels=u.globals.labels.slice(),this.axesUtils=new Ya(l),this.isRangeBar=u.globals.seriesRange.length&&u.globals.isBarHorizontal,u.globals.timescaleLabels.length>0&&(this.xaxisLabels=u.globals.timescaleLabels.slice())}return Be(ve,[{key:"drawGridArea",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=this.w,m=new Dt(this.ctx);null===l&&(l=m.group({class:"apexcharts-grid"}));var x=m.drawLine(u.globals.padHorizontal,1,u.globals.padHorizontal,u.globals.gridHeight,"transparent"),w=m.drawLine(u.globals.padHorizontal,u.globals.gridHeight,u.globals.gridWidth,u.globals.gridHeight,"transparent");return l.add(w),l.add(x),l}},{key:"drawGrid",value:function(){var l=null;return this.w.globals.axisCharts&&(l=this.renderGrid(),this.drawGridArea(l.el)),l}},{key:"createGridMask",value:function(){var l=this.w,u=l.globals,m=new Dt(this.ctx),x=Array.isArray(l.config.stroke.width)?0:l.config.stroke.width;if(Array.isArray(l.config.stroke.width)){var w=0;l.config.stroke.width.forEach(function(J){w=Math.max(w,J)}),x=w}u.dom.elGridRectMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(u.cuid)),u.dom.elGridRectMarkerMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(u.cuid)),u.dom.elForecastMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elForecastMask.setAttribute("id","forecastMask".concat(u.cuid)),u.dom.elNonForecastMask=document.createElementNS(u.SVGNS,"clipPath"),u.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(u.cuid));var E=l.config.chart.type,M=0,N=0;("bar"===E||"rangeBar"===E||"candlestick"===E||"boxPlot"===E||l.globals.comboBarCount>0)&&l.globals.isXNumeric&&!l.globals.isBarHorizontal&&(N=l.config.grid.padding.right,u.barPadForNumericAxis>(M=l.config.grid.padding.left)&&(M=u.barPadForNumericAxis,N=u.barPadForNumericAxis)),u.dom.elGridRect=m.drawRect(-x-M-2,2*-x-2,u.gridWidth+x+N+M+4,u.gridHeight+4*x+4,0,"#fff");var H=l.globals.markers.largestSize+1;u.dom.elGridRectMarker=m.drawRect(2*-H,2*-H,u.gridWidth+4*H,u.gridHeight+4*H,0,"#fff"),u.dom.elGridRectMask.appendChild(u.dom.elGridRect.node),u.dom.elGridRectMarkerMask.appendChild(u.dom.elGridRectMarker.node);var Z=u.dom.baseEl.querySelector("defs");Z.appendChild(u.dom.elGridRectMask),Z.appendChild(u.dom.elForecastMask),Z.appendChild(u.dom.elNonForecastMask),Z.appendChild(u.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(l){var u=l.i,m=l.x1,M=l.xCount,H=this.w;if(!(0===u&&H.globals.skipFirstTimelinelabel||u===M-1&&H.globals.skipLastTimelinelabel&&!H.config.xaxis.labels.formatter||"radar"===H.config.chart.type)){H.config.grid.xaxis.lines.show&&this._drawGridLine({i:u,x1:m,y1:l.y1,x2:l.x2,y2:l.y2,xCount:M,parent:l.parent});var Z=0;if(H.globals.hasXaxisGroups&&"between"===H.config.xaxis.tickPlacement){var J=H.globals.groups;if(J){for(var ne=0,fe=0;ne<u&&fe<J.length;fe++)ne+=J[fe].cols;ne===u&&(Z=.6*H.globals.xAxisLabelsHeight)}}new Ma(this.ctx).drawXaxisTicks(m,Z,H.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(l){var u=l.i,m=l.x1,x=l.y1,w=l.x2,E=l.y2,M=l.xCount,N=l.parent,H=this.w,Z=!1,J=N.node.classList.contains("apexcharts-gridlines-horizontal"),ne=H.config.grid.strokeDashArray,fe=H.globals.barPadForNumericAxis;(0===x&&0===E||0===m&&0===w)&&(Z=!0),x===H.globals.gridHeight&&E===H.globals.gridHeight&&(Z=!0),!H.globals.isBarHorizontal||0!==u&&u!==M-1||(Z=!0);var ye=new Dt(this).drawLine(m-(J?fe:0),x,w+(J?fe:0),E,H.config.grid.borderColor,ne);ye.node.classList.add("apexcharts-gridline"),Z&&H.config.grid.show?this.elGridBorders.add(ye):N.add(ye)}},{key:"_drawGridBandRect",value:function(l){var u=l.c,m=l.x1,x=l.y1,w=l.x2,E=l.y2,M=l.type,N=this.w,H=new Dt(this.ctx),Z=N.globals.barPadForNumericAxis;if("column"!==M||"datetime"!==N.config.xaxis.type){var ne=H.drawRect(m-("row"===M?Z:0),x,w+("row"===M?2*Z:0),E,0,N.config.grid[M].colors[u],N.config.grid[M].opacity);this.elg.add(ne),ne.attr("clip-path","url(#gridRectMask".concat(N.globals.cuid,")")),ne.node.classList.add("apexcharts-grid-".concat(M))}}},{key:"_drawXYLines",value:function(l){var u=this,m=l.xCount,x=l.tickAmount,w=this.w;if(w.config.grid.xaxis.lines.show||w.config.xaxis.axisTicks.show){var E,M=w.globals.padHorizontal,N=w.globals.gridHeight;w.globals.timescaleLabels.length?function(ye){for(var De=ye.xC,Se=ye.y1,U=ye.y2,le=0;le<De;le++)u._drawGridLines({i:le,x1:u.xaxisLabels[le].position,y1:Se,x2:u.xaxisLabels[le].position,y2:U,xCount:m,parent:u.elgridLinesV})}({xC:m,x1:M,y1:0,x2:E,y2:N}):(w.globals.isXNumeric&&(m=w.globals.xAxisScale.result.length),function(ye){for(var De=ye.xC,Pe=ye.x1,Se=ye.y1,ze=ye.x2,U=ye.y2,le=0;le<De+(w.globals.isXNumeric?0:1);le++)0===le&&1===De&&1===w.globals.dataPoints&&(ze=Pe=w.globals.gridWidth/2),u._drawGridLines({i:le,x1:Pe,y1:Se,x2:ze,y2:U,xCount:m,parent:u.elgridLinesV}),ze=Pe+=w.globals.gridWidth/(w.globals.isXNumeric?De-1:De)}({xC:m,x1:M,y1:0,x2:E,y2:N}))}if(w.config.grid.yaxis.lines.show){var H=0,Z=0,J=w.globals.gridWidth,ne=x+1;this.isRangeBar&&(ne=w.globals.labels.length);for(var fe=0;fe<ne+(this.isRangeBar?1:0);fe++)this._drawGridLine({i:fe,xCount:ne+(this.isRangeBar?1:0),x1:0,y1:H,x2:J,y2:Z,parent:this.elgridLinesH}),Z=H+=w.globals.gridHeight/(this.isRangeBar?ne:x)}}},{key:"_drawInvertedXYLines",value:function(l){var u=l.xCount,m=this.w;if(m.config.grid.xaxis.lines.show||m.config.xaxis.axisTicks.show)for(var x,w=m.globals.padHorizontal,E=m.globals.gridHeight,M=0;M<u+1;M++)m.config.grid.xaxis.lines.show&&this._drawGridLine({i:M,xCount:u+1,x1:w,y1:0,x2:x,y2:E,parent:this.elgridLinesV}),new Ma(this.ctx).drawXaxisTicks(w,0,m.globals.dom.elGraphical),x=w=w+m.globals.gridWidth/u+.3;if(m.config.grid.yaxis.lines.show)for(var N=0,H=0,Z=m.globals.gridWidth,J=0;J<m.globals.dataPoints+1;J++)this._drawGridLine({i:J,xCount:m.globals.dataPoints+1,x1:0,y1:N,x2:Z,y2:H,parent:this.elgridLinesH}),H=N+=m.globals.gridHeight/m.globals.dataPoints}},{key:"renderGrid",value:function(){var l=this.w,u=new Dt(this.ctx);this.elg=u.group({class:"apexcharts-grid"}),this.elgridLinesH=u.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=u.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=u.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),l.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var m=0;m<l.globals.seriesYAxisMap.length&&-1!==l.globals.ignoreYAxisIndexes.indexOf(m);)m++;m===l.globals.seriesYAxisMap.length&&(m=0);var x,E,M,N,w=l.globals.yAxisScale[m].result.length-1;return!l.globals.isBarHorizontal||this.isRangeBar?(x=this.xaxisLabels.length,this.isRangeBar&&(x--,w=l.globals.labels.length,l.config.xaxis.tickAmount&&l.config.xaxis.labels.formatter&&(x=l.config.xaxis.tickAmount),(null===(E=l.globals.yAxisScale)||void 0===E||null===(M=E[m])||void 0===M||null===(N=M.result)||void 0===N?void 0:N.length)>0&&"datetime"!==l.config.xaxis.type&&(x=l.globals.yAxisScale[m].result.length-1)),this._drawXYLines({xCount:x,tickAmount:w})):this._drawInvertedXYLines({xCount:x=w,tickAmount:w=l.globals.xTickAmount}),this.drawGridBands(x,w),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:l.globals.gridWidth/x}}},{key:"drawGridBands",value:function(l,u){var m=this.w;if(void 0!==m.config.grid.row.colors&&m.config.grid.row.colors.length>0)for(var x=0,w=m.globals.gridHeight/u,E=m.globals.gridWidth,M=0,N=0;M<u;M++,N++)N>=m.config.grid.row.colors.length&&(N=0),this._drawGridBandRect({c:N,x1:0,y1:x,x2:E,y2:w,type:"row"}),x+=m.globals.gridHeight/u;if(void 0!==m.config.grid.column.colors&&m.config.grid.column.colors.length>0)for(var H=m.globals.isBarHorizontal||"on"!==m.config.xaxis.tickPlacement||"category"!==m.config.xaxis.type&&!m.config.xaxis.convertedCatToNumeric?l:l-1,Z=m.globals.padHorizontal,J=m.globals.padHorizontal+m.globals.gridWidth/H,ne=m.globals.gridHeight,fe=0,ye=0;fe<l;fe++,ye++)ye>=m.config.grid.column.colors.length&&(ye=0),this._drawGridBandRect({c:ye,x1:Z,y1:0,x2:J,y2:ne,type:"column"}),Z+=m.globals.gridWidth/H}}]),ve}(),$n=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"niceScale",value:function(l,u){var m,x,w,E,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,N=1e-11,H=this.w,Z=H.globals;Z.isBarHorizontal?(m=H.config.xaxis,x=Math.max((Z.svgWidth-100)/25,2)):(m=H.config.yaxis[M],x=Math.max((Z.svgHeight-100)/15,2)),w=null!=m.min,E=void 0!==m.max&&null!==m.min;var J=null!=m.stepSize,ne=null!=m.tickAmount,fe=ne?m.tickAmount:m.forceNiceScale?Z.niceScaleDefaultTicks[Math.min(Math.round(x/2),Z.niceScaleDefaultTicks.length-1)]:10;if(Z.isMultipleYAxis&&!ne&&Z.multiAxisTickAmount>0&&(fe=Z.multiAxisTickAmount,ne=!0),fe="dataPoints"===fe?Z.dataPoints-1:Math.abs(Math.round(fe)),(l===Number.MIN_VALUE&&0===u||!tt.isNumber(l)&&!tt.isNumber(u)||l===Number.MIN_VALUE&&u===-Number.MAX_VALUE)&&(l=0,u=fe,Z.allSeriesCollapsed=!1),l>u){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var ye=u;u=l,l=ye}else l===u&&(l=0===l?0:l-1,u=0===u?2:u+1);var De=[];fe<1&&(fe=1);var Pe=fe,Se=Math.abs(u-l);m.forceNiceScale&&(!w&&l>0&&l/Se<.15&&(l=0,w=!0),!E&&u<0&&-u/Se<.15&&(u=0,E=!0),Se=Math.abs(u-l));var ze=Se/Pe,U=ze,le=Math.floor(Math.log10(U)),we=Math.pow(10,le),Le=Math.ceil(U/we);if(ze=U=(Le=Z.niceScaleAllowedMagMsd[0===Z.yValueDecimal?0:1][Le])*we,Z.isBarHorizontal&&m.stepSize&&"datetime"!==m.type?(ze=m.stepSize,J=!0):J&&(ze=m.stepSize),J&&m.forceNiceScale){var $e=Math.floor(Math.log10(ze));ze*=Math.pow(10,le-$e)}if(w&&E){var mt=Se/Pe;if(ne)if(J)if(0!=tt.mod(Se,ze)){var $t=tt.getGCD(ze,mt);ze=mt/$t<10?$t:mt}else 0==tt.mod(ze,mt)?ze=mt:(mt=ze,ne=!1);else ze=mt;else if(J)0==tt.mod(Se,ze)?mt=ze:ze=mt;else if(0==tt.mod(Se,ze))mt=ze;else{mt=Se/(Pe=Math.ceil(Se/ze));var Xt=tt.getGCD(Se,ze);Se/Xt<x&&(mt=Xt),ze=mt}Pe=Math.round(Se/ze)}else{if(w||E)if(E)if(ne)l=u-ze*Pe;else{var Li=l;l=ze*Math.floor(l/ze),Math.abs(u-l)/tt.getGCD(Se,ze)>x&&(l=u-ze*fe,l+=ze*Math.floor((Li-l)/ze))}else w&&(u=ne?l+ze*Pe:ze*Math.ceil(u/ze));else if(ne){var Ji=ze/(u-l>u?1:2),ln=Ji*Math.floor(l/Ji);Math.abs(ln-l)<=Ji/2?u=(l=ln)+ze*Pe:l=(u=Ji*Math.ceil(u/Ji))-ze*Pe}else l=ze*Math.floor(l/ze),u=ze*Math.ceil(u/ze);Se=Math.abs(u-l),ze=tt.getGCD(Se,ze),Pe=Math.round(Se/ze)}if(ne||w||E||(Pe=Math.ceil((Se-N)/(ze+N)))>16&&tt.getPrimeFactors(Pe).length<2&&Pe++,Z.isMultipleYAxis&&0==Z.multiAxisTickAmount&&(Z.multiAxisTickAmount=Pe),Pe>x&&(!ne&&!J||m.forceNiceScale)){var Un=tt.getPrimeFactors(Pe),cr=Un.length-1,Wr=Pe;e:for(var pa=0;pa<cr;pa++)for(var la=0;la<=cr-pa;la++){for(var Ta=Math.min(la+pa,cr),es=Wr,ms=1,Is=la;Is<=Ta;Is++)ms*=Un[Is];if((es/=ms)<x){Wr=es;break e}}ze=Wr===Pe?Se:Se/Wr}var va=l-ze,Qr=ze*N;do{De.push(tt.stripNumber(va+=ze,7))}while(u-va>Qr);return{result:De,niceMin:De[0],niceMax:De[De.length-1]}}},{key:"linearScale",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,E=Math.abs(u-l);"dataPoints"===(m=this._adjustTicksForSmallRange(m,x,E))&&(m=this.w.globals.dataPoints-1),w||(w=E/m),m===Number.MAX_VALUE&&(m=5,w=1);for(var M=[],N=l;m>=0;)M.push(N),N+=w,m-=1;return{result:M,niceMin:M[0],niceMax:M[M.length-1]}}},{key:"logarithmicScaleNice",value:function(l,u,m){u<=0&&(u=Math.max(l,m)),l<=0&&(l=Math.min(u,m));for(var x=[],w=Math.ceil(Math.log(u)/Math.log(m)+1),E=Math.floor(Math.log(l)/Math.log(m));E<w;E++)x.push(Math.pow(m,E));return{result:x,niceMin:x[0],niceMax:x[x.length-1]}}},{key:"logarithmicScale",value:function(l,u,m){u<=0&&(u=Math.max(l,m)),l<=0&&(l=Math.min(u,m));for(var x=[],w=Math.log(u)/Math.log(m),E=Math.log(l)/Math.log(m),M=w-E,N=Math.round(M),H=M/N,Z=0,J=E;Z<N;Z++,J+=H)x.push(Math.pow(m,J));return x.push(Math.pow(m,w)),{result:x,niceMin:l,niceMax:u}}},{key:"_adjustTicksForSmallRange",value:function(l,u,m){var x=l;if(void 0!==u&&this.w.config.yaxis[u].labels.formatter&&void 0===this.w.config.yaxis[u].tickAmount){var w=Number(this.w.config.yaxis[u].labels.formatter(1));tt.isNumber(w)&&0===this.w.globals.yValueDecimal&&(x=Math.ceil(m))}return x<l?x:l}},{key:"setYScaleForIndex",value:function(l,u,m){var x=this.w.globals,w=this.w.config,E=x.isBarHorizontal?w.xaxis:w.yaxis[l];void 0===x.yAxisScale[l]&&(x.yAxisScale[l]=[]);var M=Math.abs(m-u);E.logarithmic&&M<=5&&(x.invalidLogScale=!0),E.logarithmic&&M>5?(x.allSeriesCollapsed=!1,x.yAxisScale[l]=E.forceNiceScale?this.logarithmicScaleNice(u,m,E.logBase):this.logarithmicScale(u,m,E.logBase)):m!==-Number.MAX_VALUE&&tt.isNumber(m)?(x.allSeriesCollapsed=!1,x.yAxisScale[l]=this.niceScale(u,m,l)):x.yAxisScale[l]=this.linearScale(0,10,10,l,w.yaxis[l].stepSize)}},{key:"setXScale",value:function(l,u){var m=this.w,x=m.globals,w=Math.abs(u-l);return x.xAxisScale=u!==-Number.MAX_VALUE&&tt.isNumber(u)?this.linearScale(l,u,m.config.xaxis.tickAmount?m.config.xaxis.tickAmount:w<10&&w>1?w+1:10,0,m.config.xaxis.stepSize):this.linearScale(0,10,10),x.xAxisScale}},{key:"setMultipleYScales",value:function(){var l=this.w.globals,u=this.w.config,m=l.minYArr,x=l.maxYArr,w=[],E=[],M=[];u.series.forEach(function(ne,fe){M.push(fe),E.push(null)});var N,H=[];u.yaxis.forEach(function(ne,fe){if(ne.seriesName){var ye=[];Array.isArray(ne.seriesName)?ye=ne.seriesName:ye.push(ne.seriesName),w[fe]=[],ye.forEach(function(De){u.series.forEach(function(Pe,Se){if(Pe.name===De){w[fe].push(Se),E[Se]=fe;var ze=M.indexOf(Se);M.splice(ze,1)}})})}else H.push(fe)});for(var Z=0;Z<H.length&&(w[N=H[Z]]=[],M);Z++){var J=M[0];M.shift(),w[N].push(J),E[J]=N}N&&M.forEach(function(ne){w[N].push(ne),E[ne]=N}),l.seriesYAxisMap=w.map(function(ne){return ne}),l.seriesYAxisReverseMap=E.map(function(ne){return ne}),this.sameScaleInMultipleAxes(m,x,w)}},{key:"sameScaleInMultipleAxes",value:function(l,u,m){var x=this,w=this.w.config,E=this.w.globals,M=[];m.forEach(function(H,Z){for(var J=Z+1;J<m.length;J++){var ne,fe=_i(H.values());try{for(fe.s();!(ne=fe.n()).done;){var De=m[J].indexOf(ne.value);-1!==De&&(H.push(J),m[J].splice(De,1))}}catch(Pe){fe.e(Pe)}finally{fe.f()}m[J].length<1&&-1===M.indexOf(J)&&M.push(J)}});for(var N=M.length-1;N>=0;N--)m.splice(M[N],1);m.forEach(function(H,Z){var J=Number.MAX_VALUE,ne=-Number.MAX_VALUE;if(w.chart.stacked){for(var fe=E.seriesX[H[0]].map(function($e){return Number.MIN_VALUE}),ye=E.seriesX[H[0]].map(function($e){return Number.MIN_VALUE}),De=E.seriesX[H[0]].map(function($e){return Number.MIN_VALUE}),Pe=w.series[H[0]].type,Se=0;Se<H.length;Se++){var ze=H[Se];if(-1===E.collapsedSeriesIndices.indexOf(ze))for(var U=0;U<E.series[ze].length;U++){var le=E.series[ze][U];le>=0?ye[U]+=le:De[U]+=le,fe[U]+=le}}"bar"===Pe?(J=Math.min.apply(null,De),ne=Math.max.apply(null,ye)):(J=Math.min.apply(null,fe),ne=Math.max.apply(null,fe))}else{for(var we=0;we<H.length;we++)J=Math.min(J,l[H[we]]);for(var Le=0;Le<H.length;Le++)ne=Math.max(ne,u[H[Le]])}void 0!==w.yaxis[Z].min&&(J="function"==typeof w.yaxis[Z].min?w.yaxis[Z].min(J):w.yaxis[Z].min),void 0!==w.yaxis[Z].max&&(ne="function"==typeof w.yaxis[Z].max?w.yaxis[Z].max(ne):w.yaxis[Z].max),x.setYScaleForIndex(Z,J,ne),H.forEach(function($e){l[$e]=E.yAxisScale[Z].niceMin,u[$e]=E.yAxisScale[Z].niceMax})})}}]),ve}(),ar=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.scales=new $n(l)}return Be(ve,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,w=this.w.config,E=this.w.globals,M=-Number.MAX_VALUE,N=Number.MIN_VALUE;null===x&&(x=l+1);var H=0,Z=0,J=void 0;if(E.seriesX.length>=x){var ne,fe;H=0,Z=(J=et(new Set((ne=[]).concat.apply(ne,et(E.seriesX.slice(l,x)))))).length-1;var ye=null===(fe=E.brushSource)||void 0===fe?void 0:fe.w.config.chart.brush;if(w.chart.zoom.enabled&&w.chart.zoom.autoScaleYaxis||null!=ye&&ye.enabled&&null!=ye&&ye.autoScaleYaxis){if(w.xaxis.min)for(H=0;H<Z&&J[H]<=w.xaxis.min;H++);if(w.xaxis.max)for(;Z>H&&J[Z]>=w.xaxis.max;Z--);}}var De=E.series,Pe=De,Se=De;"candlestick"===w.chart.type?(Pe=E.seriesCandleL,Se=E.seriesCandleH):"boxPlot"===w.chart.type?(Pe=E.seriesCandleO,Se=E.seriesCandleC):E.isRangeData&&(Pe=E.seriesRangeStart,Se=E.seriesRangeEnd);for(var ze=l;ze<x;ze++){E.dataPoints=Math.max(E.dataPoints,De[ze].length);var U=w.series[ze].type;E.categoryLabels.length&&(E.dataPoints=E.categoryLabels.filter(function(Le){return void 0!==Le}).length),E.labels.length&&"datetime"!==w.xaxis.type&&0!==E.series.reduce(function(Le,$e){return Le+$e.length},0)&&(E.dataPoints=Math.max(E.dataPoints,E.labels.length)),J||(H=0,Z=E.series[ze].length);for(var le=H;le<=Z&&le<E.series[ze].length;le++){var we=De[ze][le];if(null!==we&&tt.isNumber(we)){switch(void 0!==Se[ze][le]&&(M=Math.max(M,Se[ze][le]),u=Math.min(u,Se[ze][le])),void 0!==Pe[ze][le]&&(u=Math.min(u,Pe[ze][le]),m=Math.max(m,Pe[ze][le])),U){case"candlestick":void 0!==E.seriesCandleC[ze][le]&&(M=Math.max(M,E.seriesCandleH[ze][le]),u=Math.min(u,E.seriesCandleL[ze][le]));case"boxPlot":void 0!==E.seriesCandleC[ze][le]&&(M=Math.max(M,E.seriesCandleC[ze][le]),u=Math.min(u,E.seriesCandleO[ze][le]))}U&&"candlestick"!==U&&"boxPlot"!==U&&"rangeArea"!==U&&"rangeBar"!==U&&(M=Math.max(M,E.series[ze][le]),u=Math.min(u,E.series[ze][le])),m=M,E.seriesGoals[ze]&&E.seriesGoals[ze][le]&&Array.isArray(E.seriesGoals[ze][le])&&E.seriesGoals[ze][le].forEach(function(Le){N!==Number.MIN_VALUE&&(N=Math.min(N,Le.value),u=N),M=Math.max(M,Le.value),m=M}),tt.isFloat(we)&&(we=tt.noExponents(we),E.yValueDecimal=Math.max(E.yValueDecimal,we.toString().split(".")[1].length)),N>Pe[ze][le]&&Pe[ze][le]<0&&(N=Pe[ze][le])}else E.hasNullValues=!0}"bar"!==U&&"column"!==U||(N<0&&M<0&&(M=0,m=Math.max(m,0)),N===Number.MIN_VALUE&&(N=0,u=Math.min(u,0)))}return"rangeBar"===w.chart.type&&E.seriesRangeStart.length&&E.isBarHorizontal&&(N=u),"bar"===w.chart.type&&(N<0&&M<0&&(M=0),N===Number.MIN_VALUE&&(N=0)),{minY:N,maxY:M,lowestY:u,highestY:m}}},{key:"setYRange",value:function(){var l=this.w.globals,u=this.w.config;l.maxY=-Number.MAX_VALUE,l.minY=Number.MIN_VALUE;var m,x=Number.MAX_VALUE;if(l.isMultipleYAxis){x=Number.MAX_VALUE;for(var w=0;w<l.series.length;w++)m=this.getMinYMaxY(w),l.minYArr[w]=m.lowestY,l.maxYArr[w]=m.highestY,x=Math.min(x,m.lowestY)}return m=this.getMinYMaxY(0,x,null,l.series.length),"bar"===u.chart.type?(l.minY=m.minY,l.maxY=m.maxY):(l.minY=m.lowestY,l.maxY=m.highestY),x=m.lowestY,u.chart.stacked&&this._setStackedMinMax(),"line"===u.chart.type||"area"===u.chart.type||"scatter"===u.chart.type||"candlestick"===u.chart.type||"boxPlot"===u.chart.type||"rangeBar"===u.chart.type&&!l.isBarHorizontal?l.minY===Number.MIN_VALUE&&x!==-Number.MAX_VALUE&&x!==l.maxY&&(l.minY=x):l.minY=m.minY,u.yaxis.forEach(function(E,M){void 0!==E.max&&("number"==typeof E.max?l.maxYArr[M]=E.max:"function"==typeof E.max&&(l.maxYArr[M]=E.max(l.isMultipleYAxis?l.maxYArr[M]:l.maxY)),l.maxY=l.maxYArr[M]),void 0!==E.min&&("number"==typeof E.min?l.minYArr[M]=E.min:"function"==typeof E.min&&(l.minYArr[M]=E.min(l.isMultipleYAxis?l.minYArr[M]===Number.MIN_VALUE?0:l.minYArr[M]:l.minY)),l.minY=l.minYArr[M])}),l.isBarHorizontal&&["min","max"].forEach(function(E){void 0!==u.xaxis[E]&&"number"==typeof u.xaxis[E]&&("min"===E?l.minY=u.xaxis[E]:l.maxY=u.xaxis[E])}),l.isMultipleYAxis?(this.scales.setMultipleYScales(),l.minY=x):(this.scales.setYScaleForIndex(0,l.minY,l.maxY),l.minY=l.yAxisScale[0].niceMin,l.maxY=l.yAxisScale[0].niceMax,l.minYArr[0]=l.yAxisScale[0].niceMin,l.maxYArr[0]=l.yAxisScale[0].niceMax,l.seriesYAxisMap=[l.series.map(function(E,M){return M})],l.seriesYAxisReverseMap=l.series.map(function(E,M){return 0})),{minY:l.minY,maxY:l.maxY,minYArr:l.minYArr,maxYArr:l.maxYArr,yAxisScale:l.yAxisScale}}},{key:"setXRange",value:function(){var l=this.w.globals,u=this.w.config,m="numeric"===u.xaxis.type||"datetime"===u.xaxis.type||"category"===u.xaxis.type&&!l.noLabelsProvided||l.noLabelsProvided||l.isXNumeric;if(l.isXNumeric&&function(){for(var M=0;M<l.series.length;M++)if(l.labels[M])for(var N=0;N<l.labels[M].length;N++)null!==l.labels[M][N]&&tt.isNumber(l.labels[M][N])&&(l.maxX=Math.max(l.maxX,l.labels[M][N]),l.initialMaxX=Math.max(l.maxX,l.labels[M][N]),l.minX=Math.min(l.minX,l.labels[M][N]),l.initialMinX=Math.min(l.minX,l.labels[M][N]))}(),l.noLabelsProvided&&0===u.xaxis.categories.length&&(l.maxX=l.labels[l.labels.length-1],l.initialMaxX=l.labels[l.labels.length-1],l.minX=1,l.initialMinX=1),l.isXNumeric||l.noLabelsProvided||l.dataFormatXNumeric){var x;if(void 0===u.xaxis.tickAmount?(x=Math.round(l.svgWidth/150),"numeric"===u.xaxis.type&&l.dataPoints<30&&(x=l.dataPoints-1),x>l.dataPoints&&0!==l.dataPoints&&(x=l.dataPoints-1)):"dataPoints"===u.xaxis.tickAmount?(l.series.length>1&&(x=l.series[l.maxValsInArrayIndex].length-1),l.isXNumeric&&(x=l.maxX-l.minX-1)):x=u.xaxis.tickAmount,l.xTickAmount=x,void 0!==u.xaxis.max&&"number"==typeof u.xaxis.max&&(l.maxX=u.xaxis.max),void 0!==u.xaxis.min&&"number"==typeof u.xaxis.min&&(l.minX=u.xaxis.min),void 0!==u.xaxis.range&&(l.minX=l.maxX-u.xaxis.range),l.minX!==Number.MAX_VALUE&&l.maxX!==-Number.MAX_VALUE)if(u.xaxis.convertedCatToNumeric&&!l.dataFormatXNumeric){for(var w=[],E=l.minX-1;E<l.maxX;E++)w.push(E+1);l.xAxisScale={result:w,niceMin:w[0],niceMax:w[w.length-1]}}else l.xAxisScale=this.scales.setXScale(l.minX,l.maxX);else l.xAxisScale=this.scales.linearScale(0,x,x,0,u.xaxis.stepSize),l.noLabelsProvided&&l.labels.length>0&&(l.xAxisScale=this.scales.linearScale(1,l.labels.length,x-1,0,u.xaxis.stepSize),l.seriesX=l.labels.slice());m&&(l.labels=l.xAxisScale.result.slice())}return l.isBarHorizontal&&l.labels.length&&(l.xTickAmount=l.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:l.minX,maxX:l.maxX}}},{key:"setZRange",value:function(){var l=this.w.globals;if(l.isDataXYZ)for(var u=0;u<l.series.length;u++)if(void 0!==l.seriesZ[u])for(var m=0;m<l.seriesZ[u].length;m++)null!==l.seriesZ[u][m]&&tt.isNumber(l.seriesZ[u][m])&&(l.maxZ=Math.max(l.maxZ,l.seriesZ[u][m]),l.minZ=Math.min(l.minZ,l.seriesZ[u][m]))}},{key:"_handleSingleDataPoint",value:function(){var l=this.w.globals,u=this.w.config;if(l.minX===l.maxX){var m=new Ki(this.ctx);if("datetime"===u.xaxis.type){var x=m.getDate(l.minX);u.xaxis.labels.datetimeUTC?x.setUTCDate(x.getUTCDate()-2):x.setDate(x.getDate()-2),l.minX=new Date(x).getTime();var w=m.getDate(l.maxX);u.xaxis.labels.datetimeUTC?w.setUTCDate(w.getUTCDate()+2):w.setDate(w.getDate()+2),l.maxX=new Date(w).getTime()}else("numeric"===u.xaxis.type||"category"===u.xaxis.type&&!l.noLabelsProvided)&&(l.minX=l.minX-2,l.initialMinX=l.minX,l.maxX=l.maxX+2,l.initialMaxX=l.maxX)}}},{key:"_getMinXDiff",value:function(){var l=this.w.globals;l.isXNumeric&&l.seriesX.forEach(function(u,m){1===u.length&&u.push(l.seriesX[l.maxValsInArrayIndex][l.seriesX[l.maxValsInArrayIndex].length-1]);var x=u.slice();x.sort(function(w,E){return w-E}),x.forEach(function(w,E){if(E>0){var M=w-x[E-1];M>0&&(l.minXDiff=Math.min(M,l.minXDiff))}}),1!==l.dataPoints&&l.minXDiff!==Number.MAX_VALUE||(l.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var l=this,u=this.w.globals;if(u.series.length){var m=u.seriesGroups;m.length||(m=[this.w.config.series.map(function(E){return E.name})]);var x={},w={};m.forEach(function(E){x[E]=[],w[E]=[],l.w.config.series.map(function(M,N){return E.indexOf(M.name)>-1?N:null}).filter(function(M){return null!==M}).forEach(function(M){for(var N=0;N<u.series[u.maxValsInArrayIndex].length;N++){var H,Z;void 0===x[E][N]&&(x[E][N]=0,w[E][N]=0),(l.w.config.chart.stacked&&!u.comboCharts||l.w.config.chart.stacked&&u.comboCharts&&(!l.w.config.chart.stackOnlyBar||"bar"===(null===(H=l.w.config.series)||void 0===H||null===(Z=H[M])||void 0===Z?void 0:Z.type)))&&null!==u.series[M][N]&&tt.isNumber(u.series[M][N])&&(u.series[M][N]>0?x[E][N]+=parseFloat(u.series[M][N])+1e-4:w[E][N]+=parseFloat(u.series[M][N]))}})}),Object.entries(x).forEach(function(E){var M=Wt(E,1)[0];x[M].forEach(function(N,H){u.maxY=Math.max(u.maxY,x[M][H]),u.minY=Math.min(u.minY,w[M][H])})})}}}]),ve}(),Sn=function(){function ve(l,u){j(this,ve),this.ctx=l,this.elgrid=u,this.w=l.w;var m=this.w;this.xaxisFontSize=m.config.xaxis.labels.style.fontSize,this.axisFontFamily=m.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=m.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===m.config.chart.type&&m.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===m.config.xaxis.position&&(this.xAxisoffX=m.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Ya(l)}return Be(ve,[{key:"drawYaxis",value:function(l){var u=this,m=this.w,x=new Dt(this.ctx),w=m.config.yaxis[l].labels.style,E=w.fontSize,M=w.fontFamily,N=w.fontWeight,H=x.group({class:"apexcharts-yaxis",rel:l,transform:"translate("+m.globals.translateYAxisX[l]+", 0)"});if(this.axesUtils.isYAxisHidden(l))return H;var Z=x.group({class:"apexcharts-yaxis-texts-g"});H.add(Z);var J=m.globals.yAxisScale[l].result.length-1,ne=m.globals.gridHeight/J,fe=m.globals.translateY,ye=m.globals.yLabelFormatters[l],De=m.globals.yAxisScale[l].result.slice();De=this.axesUtils.checkForReversedLabels(l,De);var Pe="";if(m.config.yaxis[l].labels.show)for(var Se=function($t){var Xt=De[$t];Xt=ye(Xt,$t,m);var Li=m.config.yaxis[l].labels.padding;m.config.yaxis[l].opposite&&0!==m.config.yaxis.length&&(Li*=-1);var Ji="end";m.config.yaxis[l].opposite&&(Ji="start"),"left"===m.config.yaxis[l].labels.align?Ji="start":"center"===m.config.yaxis[l].labels.align?Ji="middle":"right"===m.config.yaxis[l].labels.align&&(Ji="end");var ln=u.axesUtils.getYAxisForeColor(w.colors,l),Un=m.config.yaxis[l].labels.offsetY;"heatmap"===m.config.chart.type&&(Un-=(m.globals.gridHeight/m.globals.series.length-1)/2);var cr=x.drawText({x:Li,y:fe+J/10+Un+1,text:Xt,textAnchor:Ji,fontSize:E,fontFamily:M,fontWeight:N,maxWidth:m.config.yaxis[l].labels.maxWidth,foreColor:Array.isArray(ln)?ln[$t]:ln,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+w.cssClass});$t===J&&(Pe=cr),Z.add(cr);var Wr=document.createElementNS(m.globals.SVGNS,"title");if(Wr.textContent=Array.isArray(Xt)?Xt.join(" "):Xt,cr.node.appendChild(Wr),0!==m.config.yaxis[l].labels.rotate){var pa=x.rotateAroundCenter(Pe.node),la=x.rotateAroundCenter(cr.node);cr.node.setAttribute("transform","rotate(".concat(m.config.yaxis[l].labels.rotate," ").concat(pa.x," ").concat(la.y,")"))}fe+=ne},ze=J;ze>=0;ze--)Se(ze);if(void 0!==m.config.yaxis[l].title.text){var U=x.group({class:"apexcharts-yaxis-title"}),le=0;m.config.yaxis[l].opposite&&(le=m.globals.translateYAxisX[l]);var we=x.drawText({x:le,y:m.globals.gridHeight/2+m.globals.translateY+m.config.yaxis[l].title.offsetY,text:m.config.yaxis[l].title.text,textAnchor:"end",foreColor:m.config.yaxis[l].title.style.color,fontSize:m.config.yaxis[l].title.style.fontSize,fontWeight:m.config.yaxis[l].title.style.fontWeight,fontFamily:m.config.yaxis[l].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+m.config.yaxis[l].title.style.cssClass});U.add(we),H.add(U)}var Le=m.config.yaxis[l].axisBorder,$e=31+Le.offsetX;if(m.config.yaxis[l].opposite&&($e=-31-Le.offsetX),Le.show){var mt=x.drawLine($e,m.globals.translateY+Le.offsetY-2,$e,m.globals.gridHeight+m.globals.translateY+Le.offsetY+2,Le.color,0,Le.width);H.add(mt)}return m.config.yaxis[l].axisTicks.show&&this.axesUtils.drawYAxisTicks($e,J,Le,m.config.yaxis[l].axisTicks,l,ne,H),H}},{key:"drawYaxisInversed",value:function(l){var u=this.w,m=new Dt(this.ctx),x=m.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),w=m.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(u.globals.translateXAxisX,", ").concat(u.globals.translateXAxisY,")")});x.add(w);var E=u.globals.yAxisScale[l].result.length-1,M=u.globals.gridWidth/E+.1,N=M+u.config.xaxis.labels.offsetX,H=u.globals.xLabelFormatter,Z=u.globals.yAxisScale[l].result.slice(),J=u.globals.timescaleLabels;J.length>0&&(this.xaxisLabels=J.slice(),E=(Z=J.slice()).length),Z=this.axesUtils.checkForReversedLabels(l,Z);var ne=J.length;if(u.config.xaxis.labels.show)for(var fe=ne?0:E;ne?fe<ne:fe>=0;ne?fe++:fe--){var ye=Z[fe];ye=H(ye,fe,u);var De=u.globals.gridWidth+u.globals.padHorizontal-(N-M+u.config.xaxis.labels.offsetX);if(J.length){var Pe=this.axesUtils.getLabel(Z,J,De,fe,this.drawnLabels,this.xaxisFontSize);De=Pe.x,ye=Pe.text,this.drawnLabels.push(Pe.text),0===fe&&u.globals.skipFirstTimelinelabel&&(ye=""),fe===Z.length-1&&u.globals.skipLastTimelinelabel&&(ye="")}var Se=m.drawText({x:De,y:this.xAxisoffX+u.config.xaxis.labels.offsetY+30-("top"===u.config.xaxis.position?u.globals.xAxisHeight+u.config.xaxis.axisTicks.height-2:0),text:ye,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[l]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:u.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+u.config.xaxis.labels.style.cssClass});w.add(Se),Se.tspan(ye);var ze=document.createElementNS(u.globals.SVGNS,"title");ze.textContent=ye,Se.node.appendChild(ze),N+=M}return this.inversedYAxisTitleText(x),this.inversedYAxisBorder(x),x}},{key:"inversedYAxisBorder",value:function(l){var u=this.w,m=new Dt(this.ctx),x=u.config.xaxis.axisBorder;if(x.show){var w=0;"bar"===u.config.chart.type&&u.globals.isXNumeric&&(w-=15);var E=m.drawLine(u.globals.padHorizontal+w+x.offsetX,this.xAxisoffX,u.globals.gridWidth,this.xAxisoffX,x.color,0,x.height);this.elgrid&&this.elgrid.elGridBorders&&u.config.grid.show?this.elgrid.elGridBorders.add(E):l.add(E)}}},{key:"inversedYAxisTitleText",value:function(l){var u=this.w,m=new Dt(this.ctx);if(void 0!==u.config.xaxis.title.text){var x=m.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),w=m.drawText({x:u.globals.gridWidth/2+u.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(u.config.xaxis.title.style.fontSize)+u.config.xaxis.title.offsetY+20,text:u.config.xaxis.title.text,textAnchor:"middle",fontSize:u.config.xaxis.title.style.fontSize,fontFamily:u.config.xaxis.title.style.fontFamily,fontWeight:u.config.xaxis.title.style.fontWeight,foreColor:u.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+u.config.xaxis.title.style.cssClass});x.add(w),l.add(x)}}},{key:"yAxisTitleRotate",value:function(l,u){var m=this.w,x=new Dt(this.ctx),w={width:0,height:0},E={width:0,height:0},M=m.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-texts-g"));null!==M&&(w=M.getBoundingClientRect());var N=m.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(l,"'] .apexcharts-yaxis-title text"));if(null!==N&&(E=N.getBoundingClientRect()),null!==N){var H=this.xPaddingForYAxisTitle(l,w,E,u);N.setAttribute("x",H.xPos-(u?10:0))}if(null!==N){var Z=x.rotateAroundCenter(N);N.setAttribute("transform","rotate(".concat(u?-1*m.config.yaxis[l].title.rotate:m.config.yaxis[l].title.rotate," ").concat(Z.x," ").concat(Z.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(l,u,m,x){var w=this.w,E=0,M=0,N=10;return void 0===w.config.yaxis[l].title.text||l<0?{xPos:M,padd:0}:(x?(M=u.width+w.config.yaxis[l].title.offsetX+m.width/2+N/2,0===(E+=1)&&(M-=N/2)):(M=-1*u.width+w.config.yaxis[l].title.offsetX+N/2+m.width/2,w.globals.isBarHorizontal&&(M=-1*u.width-w.config.yaxis[l].title.offsetX-(N=25))),{xPos:M,padd:N})}},{key:"setYAxisXPosition",value:function(l,u){var m=this.w,x=0,w=0,E=18,M=1;m.config.yaxis.length>1&&(this.multipleYs=!0),m.config.yaxis.map(function(N,H){var Z=m.globals.ignoreYAxisIndexes.indexOf(H)>-1||!N.show||N.floating||0===l[H].width,J=l[H].width+u[H].width;N.opposite?m.globals.isBarHorizontal?m.globals.translateYAxisX[H]=(w=m.globals.gridWidth+m.globals.translateX-1)-N.labels.offsetX:(w=m.globals.gridWidth+m.globals.translateX+M,Z||(M=M+J+20),m.globals.translateYAxisX[H]=w-N.labels.offsetX+20):(x=m.globals.translateX-E,Z||(E=E+J+20),m.globals.translateYAxisX[H]=x+N.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var l=this.w,u=l.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(u=tt.listToArray(u)).forEach(function(m,x){var w=l.config.yaxis[x];if(w&&!w.floating&&void 0!==w.labels.align){var E=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(x,"'] .apexcharts-yaxis-texts-g")),M=l.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(x,"'] .apexcharts-yaxis-label"));M=tt.listToArray(M);var N=E.getBoundingClientRect();"left"===w.labels.align?(M.forEach(function(H,Z){H.setAttribute("text-anchor","start")}),w.opposite||E.setAttribute("transform","translate(-".concat(N.width,", 0)"))):"center"===w.labels.align?(M.forEach(function(H,Z){H.setAttribute("text-anchor","middle")}),E.setAttribute("transform","translate(".concat(N.width/2*(w.opposite?1:-1),", 0)"))):"right"===w.labels.align&&(M.forEach(function(H,Z){H.setAttribute("text-anchor","end")}),w.opposite&&E.setAttribute("transform","translate(".concat(N.width,", 0)")))}})}}]),ve}(),Dn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.documentEvent=tt.bind(this.documentEvent,this)}return Be(ve,[{key:"addEventListener",value:function(l,u){var m=this.w;m.globals.events.hasOwnProperty(l)?m.globals.events[l].push(u):m.globals.events[l]=[u]}},{key:"removeEventListener",value:function(l,u){var m=this.w;if(m.globals.events.hasOwnProperty(l)){var x=m.globals.events[l].indexOf(u);-1!==x&&m.globals.events[l].splice(x,1)}}},{key:"fireEvent",value:function(l,u){var m=this.w;if(m.globals.events.hasOwnProperty(l)){u&&u.length||(u=[]);for(var x=m.globals.events[l],w=x.length,E=0;E<w;E++)x[E].apply(null,u)}}},{key:"setupEventHandlers",value:function(){var l=this,u=this.w,m=this.ctx,x=u.globals.dom.baseEl.querySelector(u.globals.chartClass);this.ctx.eventList.forEach(function(w){x.addEventListener(w,function(E){var M=Object.assign({},u,{seriesIndex:u.globals.capturedSeriesIndex,dataPointIndex:u.globals.capturedDataPointIndex});"mousemove"===E.type||"touchmove"===E.type?"function"==typeof u.config.chart.events.mouseMove&&u.config.chart.events.mouseMove(E,m,M):"mouseleave"===E.type||"touchleave"===E.type?"function"==typeof u.config.chart.events.mouseLeave&&u.config.chart.events.mouseLeave(E,m,M):("mouseup"===E.type&&1===E.which||"touchend"===E.type)&&("function"==typeof u.config.chart.events.click&&u.config.chart.events.click(E,m,M),m.ctx.events.fireEvent("click",[E,m,M]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(w){u.globals.dom.baseEl.addEventListener(w,l.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(l){var u=this.w,m=l.target.className;if("click"===l.type){var x=u.globals.dom.baseEl.querySelector(".apexcharts-menu");x&&x.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==m&&x.classList.remove("apexcharts-menu-open")}u.globals.clientX="touchmove"===l.type?l.touches[0].clientX:l.clientX,u.globals.clientY="touchmove"===l.type?l.touches[0].clientY:l.clientY}}]),ve}(),Gr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"setCurrentLocaleValues",value:function(l){var u=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(u=this.w.config.chart.locales.concat(window.Apex.chart.locales));var m=u.filter(function(w){return w.name===l})[0];if(!m)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var x=tt.extend(Ni,m);this.w.globals.locale=x.options}}]),ve}(),Vn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"drawAxis",value:function(l,u){var m,x,w=this,E=this.w.globals,M=this.w.config,N=new Ma(this.ctx,u),H=new Sn(this.ctx,u);E.axisCharts&&"radar"!==l&&(E.isBarHorizontal?(x=H.drawYaxisInversed(0),m=N.drawXaxisInversed(0),E.dom.elGraphical.add(m),E.dom.elGraphical.add(x)):(m=N.drawXaxis(),E.dom.elGraphical.add(m),M.yaxis.map(function(Z,J){if(-1===E.ignoreYAxisIndexes.indexOf(J)&&(x=H.drawYaxis(J),E.dom.Paper.add(x),"back"===w.w.config.grid.position)){var ne=E.dom.Paper.children()[1];ne.remove(),E.dom.Paper.add(ne)}})))}}]),ve}(),rn=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"drawXCrosshairs",value:function(){var l=this.w,u=new Dt(this.ctx),m=new Pi(this.ctx),x=l.config.xaxis.crosshairs.fill.gradient,w=l.config.xaxis.crosshairs.dropShadow,ne=w.enabled,fe=w.left,ye=w.top,De=w.blur,Pe=w.color,Se=w.opacity,ze=l.config.xaxis.crosshairs.fill.color;if(l.config.xaxis.crosshairs.show){"gradient"===l.config.xaxis.crosshairs.fill.type&&(ze=u.drawGradient("vertical",x.colorFrom,x.colorTo,x.opacityFrom,x.opacityTo,null,x.stops,null));var U=u.drawRect();1===l.config.xaxis.crosshairs.width&&(U=u.drawLine());var le=l.globals.gridHeight;(!tt.isNumber(le)||le<0)&&(le=0);var we=l.config.xaxis.crosshairs.width;(!tt.isNumber(we)||we<0)&&(we=0),U.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:le,width:we,height:le,fill:ze,filter:"none","fill-opacity":l.config.xaxis.crosshairs.opacity,stroke:l.config.xaxis.crosshairs.stroke.color,"stroke-width":l.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":l.config.xaxis.crosshairs.stroke.dashArray}),ne&&(U=m.dropShadow(U,{left:fe,top:ye,blur:De,color:Pe,opacity:Se})),l.globals.dom.elGraphical.add(U)}}},{key:"drawYCrosshairs",value:function(){var l=this.w,u=new Dt(this.ctx),m=l.config.yaxis[0].crosshairs,x=l.globals.barPadForNumericAxis;if(l.config.yaxis[0].crosshairs.show){var w=u.drawLine(-x,0,l.globals.gridWidth+x,0,m.stroke.color,m.stroke.dashArray,m.stroke.width);w.attr({class:"apexcharts-ycrosshairs"}),l.globals.dom.elGraphical.add(w)}var E=u.drawLine(-x,0,l.globals.gridWidth+x,0,m.stroke.color,0,0);E.attr({class:"apexcharts-ycrosshairs-hidden"}),l.globals.dom.elGraphical.add(E)}}]),ve}(),ur=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"checkResponsiveConfig",value:function(l){var u=this,m=this.w,x=m.config;if(0!==x.responsive.length){var w=x.responsive.slice();w.sort(function(H,Z){return H.breakpoint>Z.breakpoint?1:Z.breakpoint>H.breakpoint?-1:0}).reverse();var E=new fr({}),M=function(){var H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=window.innerWidth>0?window.innerWidth:screen.width;if(J>w[0].breakpoint){var ne=Fi.extendArrayProps(E,m.globals.initialConfig,m);H=tt.extend(ne,H),H=tt.extend(m.config,H),u.overrideResponsiveOptions(H)}else for(var fe=0;fe<w.length;fe++)J<w[fe].breakpoint&&(H=Fi.extendArrayProps(E,w[fe].options,m),H=tt.extend(m.config,H),u.overrideResponsiveOptions(H))};if(l){var N=Fi.extendArrayProps(E,l,m);N=tt.extend(m.config,N),M(N=tt.extend(N,l))}else M({})}}},{key:"overrideResponsiveOptions",value:function(l){var u=new fr(l).init({responsiveOverride:!0});this.w.config=u}}]),ve}(),lr=function(){function ve(l){j(this,ve),this.ctx=l,this.colors=[],this.w=l.w;var u=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===u.config.chart.type&&u.config.plotOptions.treemap.distributed||"heatmap"===u.config.chart.type&&u.config.plotOptions.heatmap.distributed,this.isBarDistributed=u.config.plotOptions.bar.distributed&&("bar"===u.config.chart.type||"rangeBar"===u.config.chart.type)}return Be(ve,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var l,u=this,m=this.w,x=new tt;if(m.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(m.config.theme.mode)),void 0===m.config.colors||0===(null===(l=m.config.colors)||void 0===l?void 0:l.length)?m.globals.colors=this.predefined():(m.globals.colors=m.config.colors,Array.isArray(m.config.colors)&&m.config.colors.length>0&&"function"==typeof m.config.colors[0]&&(m.globals.colors=m.config.series.map(function(ye,De){var Pe=m.config.colors[De];return Pe||(Pe=m.config.colors[0]),"function"==typeof Pe?(u.isColorFn=!0,Pe({value:m.globals.axisCharts?m.globals.series[De][0]?m.globals.series[De][0]:0:m.globals.series[De],seriesIndex:De,dataPointIndex:De,w:m})):Pe}))),m.globals.seriesColors.map(function(ye,De){ye&&(m.globals.colors[De]=ye)}),m.config.theme.monochrome.enabled){var w=[],E=m.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(E=m.globals.series[0].length*m.globals.series.length);for(var M=m.config.theme.monochrome.color,N=1/(E/m.config.theme.monochrome.shadeIntensity),H=m.config.theme.monochrome.shadeTo,Z=0,J=0;J<E;J++){var ne=void 0;"dark"===H?(ne=x.shadeColor(-1*Z,M),Z+=N):(ne=x.shadeColor(Z,M),Z+=N),w.push(ne)}m.globals.colors=w.slice()}var fe=m.globals.colors.slice();this.pushExtraColors(m.globals.colors),["fill","stroke"].forEach(function(ye){m.globals[ye].colors=void 0===m.config[ye].colors?u.isColorFn?m.config.colors:fe:m.config[ye].colors.slice(),u.pushExtraColors(m.globals[ye].colors)}),m.globals.dataLabels.style.colors=void 0===m.config.dataLabels.style.colors?fe:m.config.dataLabels.style.colors.slice(),this.pushExtraColors(m.globals.dataLabels.style.colors,50),m.globals.radarPolygons.fill.colors=void 0===m.config.plotOptions.radar.polygons.fill.colors?["dark"===m.config.theme.mode?"#424242":"none"]:m.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(m.globals.radarPolygons.fill.colors,20),m.globals.markers.colors=void 0===m.config.markers.colors?fe:m.config.markers.colors.slice(),this.pushExtraColors(m.globals.markers.colors)}},{key:"pushExtraColors",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=this.w,w=u||x.globals.series.length;if(null===m&&(m=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===x.config.chart.type&&x.config.plotOptions.heatmap.colorScale.inverse),m&&x.globals.series.length&&(w=x.globals.series[x.globals.maxValsInArrayIndex].length*x.globals.series.length),l.length<w)for(var E=w-l.length,M=0;M<E;M++)l.push(l[M])}},{key:"updateThemeOptions",value:function(l){l.chart=l.chart||{},l.tooltip=l.tooltip||{};var u=l.theme.mode||"light",m=l.theme.palette?l.theme.palette:"dark"===u?"palette4":"palette1",x=l.chart.foreColor?l.chart.foreColor:"dark"===u?"#f6f7f8":"#373d3f";return l.tooltip.theme=u,l.chart.foreColor=x,l.theme.palette=m,l}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),ve}(),Pa=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(l){var u=this.w,m="title"===l?u.config.title:u.config.subtitle,x=u.globals.svgWidth/2,w=m.offsetY,E="middle";if("left"===m.align?(x=10,E="start"):"right"===m.align&&(x=u.globals.svgWidth-10,E="end"),x+=m.offsetX,w=w+parseInt(m.style.fontSize,10)+m.margin/2,void 0!==m.text){var M=new Dt(this.ctx).drawText({x,y:w,text:m.text,textAnchor:E,fontSize:m.style.fontSize,fontFamily:m.style.fontFamily,fontWeight:m.style.fontWeight,foreColor:m.style.color,opacity:1});M.node.setAttribute("class","apexcharts-".concat(l,"-text")),u.globals.dom.Paper.add(M)}}}]),ve}(),Ga=function(){function ve(l){j(this,ve),this.w=l.w,this.dCtx=l}return Be(ve,[{key:"getTitleSubtitleCoords",value:function(l){var u=this.w,m=0,x=0,w="title"===l?u.config.title.floating:u.config.subtitle.floating,E=u.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-text"));if(null!==E&&!w){var M=E.getBoundingClientRect();m=M.width,x=u.globals.axisCharts?M.height+5:M.height}return{width:m,height:x}}},{key:"getLegendsRect",value:function(){var l=this.w,u=l.globals.dom.elLegendWrap;l.config.legend.height||"top"!==l.config.legend.position&&"bottom"!==l.config.legend.position||(u.style.maxHeight=l.globals.svgHeight/2+"px");var m=Object.assign({},tt.getBoundingClientRect(u));return this.dCtx.lgRect=null!==u&&!l.config.legend.floating&&l.config.legend.show?{x:m.x,y:m.y,height:m.height,width:0===m.height?0:m.width}:{x:0,y:0,height:0,width:0},"left"!==l.config.legend.position&&"right"!==l.config.legend.position||1.5*this.dCtx.lgRect.width>l.globals.svgWidth&&(this.dCtx.lgRect.width=l.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(l,u){var m=l;if(this.w.globals.isMultiLineX){var x=u.map(function(E,M){return Array.isArray(E)?E.length:1}),w=Math.max.apply(Math,et(x));m=u[x.indexOf(w)]}return m}}]),ve}(),Ja=function(){function ve(l){j(this,ve),this.w=l.w,this.dCtx=l}return Be(ve,[{key:"getxAxisLabelsCoords",value:function(){var l,u=this.w,m=u.globals.labels.slice();if(u.config.xaxis.convertedCatToNumeric&&0===m.length&&(m=u.globals.categoryLabels),u.globals.timescaleLabels.length>0){var x=this.getxAxisTimeScaleLabelsCoords();l={width:x.width,height:x.height},u.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==u.config.legend.position&&"right"!==u.config.legend.position||u.config.legend.floating?0:this.dCtx.lgRect.width;var w=u.globals.xLabelFormatter,E=tt.getLargestStringFromArr(m),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(E,m);u.globals.isBarHorizontal&&(M=E=u.globals.yAxisScale[0].result.reduce(function(ye,De){return ye.length>De.length?ye:De},0));var N=new tn(this.dCtx.ctx),H=E;E=N.xLabelFormat(w,E,H,{i:void 0,dateFormatter:new Ki(this.dCtx.ctx).formatDate,w:u}),M=N.xLabelFormat(w,M,H,{i:void 0,dateFormatter:new Ki(this.dCtx.ctx).formatDate,w:u}),(u.config.xaxis.convertedCatToNumeric&&void 0===E||""===String(E).trim())&&(M=E="1");var Z=new Dt(this.dCtx.ctx),J=Z.getTextRects(E,u.config.xaxis.labels.style.fontSize),ne=J;if(E!==M&&(ne=Z.getTextRects(M,u.config.xaxis.labels.style.fontSize)),(l={width:J.width>=ne.width?J.width:ne.width,height:J.height>=ne.height?J.height:ne.height}).width*m.length>u.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==u.config.xaxis.labels.rotate||u.config.xaxis.labels.rotateAlways){if(!u.globals.isBarHorizontal){u.globals.rotateXLabels=!0;var fe=function(ye){return Z.getTextRects(ye,u.config.xaxis.labels.style.fontSize,u.config.xaxis.labels.style.fontFamily,"rotate(".concat(u.config.xaxis.labels.rotate," 0 0)"),!1)};J=fe(E),E!==M&&(ne=fe(M)),l.height=(J.height>ne.height?J.height:ne.height)/1.5,l.width=J.width>ne.width?J.width:ne.width}}else u.globals.rotateXLabels=!1}return u.config.xaxis.labels.show||(l={width:0,height:0}),{width:l.width,height:l.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var l,u=this.w;if(!u.globals.hasXaxisGroups)return{width:0,height:0};var m,x=(null===(l=u.config.xaxis.group.style)||void 0===l?void 0:l.fontSize)||u.config.xaxis.labels.style.fontSize,w=u.globals.groups.map(function(J){return J.title}),E=tt.getLargestStringFromArr(w),M=this.dCtx.dimHelpers.getLargestStringFromMultiArr(E,w),N=new Dt(this.dCtx.ctx),H=N.getTextRects(E,x),Z=H;return E!==M&&(Z=N.getTextRects(M,x)),m={width:H.width>=Z.width?H.width:Z.width,height:H.height>=Z.height?H.height:Z.height},u.config.xaxis.labels.show||(m={width:0,height:0}),{width:m.width,height:m.height}}},{key:"getxAxisTitleCoords",value:function(){var l=this.w,u=0,m=0;if(void 0!==l.config.xaxis.title.text){var x=new Dt(this.dCtx.ctx).getTextRects(l.config.xaxis.title.text,l.config.xaxis.title.style.fontSize);u=x.width,m=x.height}return{width:u,height:m}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var l,u=this.w;this.dCtx.timescaleLabels=u.globals.timescaleLabels.slice();var m=this.dCtx.timescaleLabels.map(function(w){return w.value}),x=m.reduce(function(w,E){return void 0===w?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):w.length>E.length?w:E},0);return 1.05*(l=new Dt(this.dCtx.ctx).getTextRects(x,u.config.xaxis.labels.style.fontSize)).width*m.length>u.globals.gridWidth&&0!==u.config.xaxis.labels.rotate&&(u.globals.overlappingXLabels=!0),l}},{key:"additionalPaddingXLabels",value:function(l){var u=this,m=this.w,x=m.globals,w=m.config,E=w.xaxis.type,M=l.width;x.skipLastTimelinelabel=!1,x.skipFirstTimelinelabel=!1;var N=m.config.yaxis[0].opposite&&m.globals.isBarHorizontal;w.yaxis.forEach(function(Z,J){N?(u.dCtx.gridPad.left<M&&(u.dCtx.xPadLeft=M/2+1),u.dCtx.xPadRight=M/2+1):function(Z,J){w.yaxis.length>1&&-1!==x.collapsedSeriesIndices.indexOf(J)||function(ne){if(u.dCtx.timescaleLabels&&u.dCtx.timescaleLabels.length){var De=u.dCtx.timescaleLabels[0].position-M/1.75+u.dCtx.yAxisWidthLeft;u.dCtx.timescaleLabels[u.dCtx.timescaleLabels.length-1].position+M/1.75-u.dCtx.yAxisWidthRight>x.svgWidth-x.translateX-("right"===m.config.legend.position&&u.dCtx.lgRect.width>0?u.dCtx.lgRect.width:0)&&(x.skipLastTimelinelabel=!0),De<-(ne.show&&!ne.floating||"bar"!==w.chart.type&&"candlestick"!==w.chart.type&&"rangeBar"!==w.chart.type&&"boxPlot"!==w.chart.type?10:M/1.75)&&(x.skipFirstTimelinelabel=!0)}else"datetime"===E?u.dCtx.gridPad.right<M&&!x.rotateXLabels&&(x.skipLastTimelinelabel=!0):"datetime"!==E&&u.dCtx.gridPad.right<M/2-u.dCtx.yAxisWidthRight&&!x.rotateXLabels&&!m.config.xaxis.labels.trim&&("between"!==m.config.xaxis.tickPlacement||m.globals.isBarHorizontal)&&(u.dCtx.xPadRight=M/2+1)}(Z)}(Z,J)})}}]),ve}(),Ra=function(){function ve(l){j(this,ve),this.w=l.w,this.dCtx=l}return Be(ve,[{key:"getyAxisLabelsCoords",value:function(){var l=this,u=this.w,m=[],x=10,w=new Ya(this.dCtx.ctx);return u.config.yaxis.map(function(E,M){var N={seriesIndex:M,dataPointIndex:-1,w:u},H=u.globals.yAxisScale[M],Z=0;if(!w.isYAxisHidden(M)&&E.labels.show&&void 0!==E.labels.minWidth&&(Z=E.labels.minWidth),!w.isYAxisHidden(M)&&E.labels.show&&H.result.length){var J=u.globals.yLabelFormatters[M],fe=H.result.reduce(function(le,we){var Le,$e;return(null===(Le=String(J(le,N)))||void 0===Le?void 0:Le.length)>(null===($e=String(J(we,N)))||void 0===$e?void 0:$e.length)?le:we},H.niceMin===Number.MIN_VALUE?0:H.niceMin),ye=fe=J(fe,N);if(void 0!==fe&&0!==fe.length||(fe=H.niceMax),u.globals.isBarHorizontal){x=0;var De=u.globals.labels.slice();fe=tt.getLargestStringFromArr(De),fe=J(fe,{seriesIndex:M,dataPointIndex:-1,w:u}),ye=l.dCtx.dimHelpers.getLargestStringFromMultiArr(fe,De)}var Pe=new Dt(l.dCtx.ctx),Se="rotate(".concat(E.labels.rotate," 0 0)"),ze=Pe.getTextRects(fe,E.labels.style.fontSize,E.labels.style.fontFamily,Se,!1),U=ze;fe!==ye&&(U=Pe.getTextRects(ye,E.labels.style.fontSize,E.labels.style.fontFamily,Se,!1)),m.push({width:(Z>U.width||Z>ze.width?Z:U.width>ze.width?U.width:ze.width)+x,height:U.height>ze.height?U.height:ze.height})}else m.push({width:0,height:0})}),m}},{key:"getyAxisTitleCoords",value:function(){var l=this,m=[];return this.w.config.yaxis.map(function(x,w){if(x.show&&void 0!==x.title.text){var E=new Dt(l.dCtx.ctx),M="rotate(".concat(x.title.rotate," 0 0)"),N=E.getTextRects(x.title.text,x.title.style.fontSize,x.title.style.fontFamily,M,!1);m.push({width:N.width,height:N.height})}else m.push({width:0,height:0})}),m}},{key:"getTotalYAxisWidth",value:function(){var l=this.w,u=0,m=0,x=0,w=l.globals.yAxisScale.length>1?10:0,E=new Ya(this.dCtx.ctx),M=function(N,H){var Z=l.config.yaxis[H].floating,J=0;N.width>0&&!Z?(J=N.width+w,l.globals.ignoreYAxisIndexes.indexOf(H)>-1&&(J=J-N.width-w)):J=Z||E.isYAxisHidden(H)?0:5,l.config.yaxis[H].opposite?x+=J:m+=J,u+=J};return l.globals.yLabelsCoords.map(function(N,H){M(N,H)}),l.globals.yTitleCoords.map(function(N,H){M(N,H)}),l.globals.isBarHorizontal&&!l.config.yaxis[0].floating&&(u=l.globals.yLabelsCoords[0].width+l.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=m,this.dCtx.yAxisWidthRight=x,u}}]),ve}(),ha=function(){function ve(l){j(this,ve),this.w=l.w,this.dCtx=l}return Be(ve,[{key:"gridPadForColumnsInNumericAxis",value:function(l){var u=this.w;if(u.globals.noData||u.globals.allSeriesCollapsed)return 0;var m=function(Z){return"bar"===Z||"rangeBar"===Z||"candlestick"===Z||"boxPlot"===Z},x=u.config.chart.type,w=0,E=m(x)?u.config.series.length:1;if(u.globals.comboBarCount>0&&(E=u.globals.comboBarCount),u.globals.collapsedSeries.forEach(function(Z){m(Z.type)&&(E-=1)}),u.config.chart.stacked&&(E=1),(m(x)||u.globals.comboBarCount>0)&&u.globals.isXNumeric&&!u.globals.isBarHorizontal&&E>0){var M,N,H=Math.abs(u.globals.initialMaxX-u.globals.initialMinX);H<=3&&(H=u.globals.dataPoints),M=H/l,u.globals.minXDiff&&u.globals.minXDiff/M>0&&(N=u.globals.minXDiff/M),N>l/2&&(N/=2),(w=N*parseInt(u.config.plotOptions.bar.columnWidth,10)/100)<1&&(w=1),u.globals.barPadForNumericAxis=w}return w}},{key:"gridPadFortitleSubtitle",value:function(){var l=this,u=this.w,m=u.globals,x=this.dCtx.isSparkline||!u.globals.axisCharts?0:10;["title","subtitle"].forEach(function(M){x+=void 0!==u.config[M].text?u.config[M].margin:l.dCtx.isSparkline||!u.globals.axisCharts?0:5}),!u.config.legend.show||"bottom"!==u.config.legend.position||u.config.legend.floating||u.globals.axisCharts||(x+=10);var w=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),E=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");m.gridHeight=m.gridHeight-w.height-E.height-x,m.translateY=m.translateY+w.height+E.height+x}},{key:"setGridXPosForDualYAxis",value:function(l,u){var m=this.w,x=new Ya(this.dCtx.ctx);m.config.yaxis.map(function(w,E){-1!==m.globals.ignoreYAxisIndexes.indexOf(E)||w.floating||x.isYAxisHidden(E)||(w.opposite&&(m.globals.translateX=m.globals.translateX-(u[E].width+l[E].width)-parseInt(m.config.yaxis[E].labels.style.fontSize,10)/1.2-12),m.globals.translateX<2&&(m.globals.translateX=2))})}}]),ve}(),xr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Ga(this),this.dimYAxis=new Ra(this),this.dimXAxis=new Ja(this),this.dimGrid=new ha(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return Be(ve,[{key:"plotCoords",value:function(){var l=this,u=this.w,m=u.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((u.config.markers.discrete.length>0||u.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(w){var E=Wt(w,2);l.gridPad[E[0]]=Math.max(E[1],l.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(u.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(u.config.stroke.width/2,this.gridPad.bottom)),m.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),m.gridHeight=m.gridHeight-this.gridPad.top-this.gridPad.bottom,m.gridWidth=m.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var x=this.dimGrid.gridPadForColumnsInNumericAxis(m.gridWidth);m.gridWidth=m.gridWidth-2*x,m.translateX=m.translateX+this.gridPad.left+this.xPadLeft+(x>0?x+4:0),m.translateY=m.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var l=this,u=this.w,m=u.globals,x=this.dimYAxis.getyAxisLabelsCoords(),w=this.dimYAxis.getyAxisTitleCoords();u.globals.yLabelsCoords=[],u.globals.yTitleCoords=[],u.config.yaxis.map(function(fe,ye){u.globals.yLabelsCoords.push({width:x[ye].width,index:ye}),u.globals.yTitleCoords.push({width:w[ye].width,index:ye})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var E=this.dimXAxis.getxAxisLabelsCoords(),M=this.dimXAxis.getxAxisGroupLabelsCoords(),N=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(E,N,M),m.translateXAxisY=u.globals.rotateXLabels?this.xAxisHeight/8:-4,m.translateXAxisX=u.globals.rotateXLabels&&u.globals.isXNumeric&&u.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,u.globals.isBarHorizontal&&(m.rotateXLabels=!1,m.translateXAxisY=parseInt(u.config.xaxis.labels.style.fontSize,10)/1.5*-1),m.translateXAxisY=m.translateXAxisY+u.config.xaxis.labels.offsetY,m.translateXAxisX=m.translateXAxisX+u.config.xaxis.labels.offsetX;var H=this.yAxisWidth,Z=this.xAxisHeight;m.xAxisLabelsHeight=this.xAxisHeight-N.height,m.xAxisGroupLabelsHeight=m.xAxisLabelsHeight-E.height,m.xAxisLabelsWidth=this.xAxisWidth,m.xAxisHeight=this.xAxisHeight;var J=10;("radar"===u.config.chart.type||this.isSparkline)&&(H=0,Z=m.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===u.config.chart.type)&&(H=0,Z=0,J=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(E);var ne=function(){m.translateX=H,m.gridHeight=m.svgHeight-l.lgRect.height-Z-(l.isSparkline||"treemap"===u.config.chart.type?0:u.globals.rotateXLabels?10:15),m.gridWidth=m.svgWidth-H};switch("top"===u.config.xaxis.position&&(J=m.xAxisHeight-u.config.xaxis.axisTicks.height-5),u.config.legend.position){case"bottom":m.translateY=J,ne();break;case"top":m.translateY=this.lgRect.height+J,ne();break;case"left":m.translateY=J,m.translateX=this.lgRect.width+H,m.gridHeight=m.svgHeight-Z-12,m.gridWidth=m.svgWidth-this.lgRect.width-H;break;case"right":m.translateY=J,m.translateX=H,m.gridHeight=m.svgHeight-Z-12,m.gridWidth=m.svgWidth-this.lgRect.width-H-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(w,x),new Sn(this.ctx).setYAxisXPosition(x,w)}},{key:"setDimensionsForNonAxisCharts",value:function(){var l=this.w,u=l.globals,m=l.config,x=0;l.config.legend.show&&!l.config.legend.floating&&(x=20);var w="pie"===m.chart.type||"polarArea"===m.chart.type||"donut"===m.chart.type?"pie":"radialBar",E=m.plotOptions[w].offsetY,M=m.plotOptions[w].offsetX;if(!m.legend.show||m.legend.floating)return u.gridHeight=u.svgHeight-m.grid.padding.left+m.grid.padding.right,u.gridWidth=u.gridHeight,u.translateY=E,void(u.translateX=M+(u.svgWidth-u.gridWidth)/2);switch(m.legend.position){case"bottom":u.gridHeight=u.svgHeight-this.lgRect.height-u.goldenPadding,u.gridWidth=u.svgWidth,u.translateY=E-10,u.translateX=M+(u.svgWidth-u.gridWidth)/2;break;case"top":u.gridHeight=u.svgHeight-this.lgRect.height-u.goldenPadding,u.gridWidth=u.svgWidth,u.translateY=this.lgRect.height+E+10,u.translateX=M+(u.svgWidth-u.gridWidth)/2;break;case"left":u.gridWidth=u.svgWidth-this.lgRect.width-x,u.gridHeight="auto"!==m.chart.height?u.svgHeight:u.gridWidth,u.translateY=E,u.translateX=M+this.lgRect.width+x;break;case"right":u.gridWidth=u.svgWidth-this.lgRect.width-x-5,u.gridHeight="auto"!==m.chart.height?u.svgHeight:u.gridWidth,u.translateY=E,u.translateX=M+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(l,u,m){var x=this.w;this.xAxisHeight=(m.height+l.height+u.height)*(x.globals.isMultiLineX?1.2:x.globals.LINE_HEIGHT_RATIO)+(x.globals.hasXaxisGroups?2:1)*(x.globals.rotateXLabels?22:10)+(x.globals.rotateXLabels&&"bottom"===x.config.legend.position?10:0),this.xAxisWidth=l.width,this.xAxisHeight-u.height>x.config.xaxis.labels.maxHeight&&(this.xAxisHeight=x.config.xaxis.labels.maxHeight),x.config.xaxis.labels.minHeight&&this.xAxisHeight<x.config.xaxis.labels.minHeight&&(this.xAxisHeight=x.config.xaxis.labels.minHeight),x.config.xaxis.floating&&(this.xAxisHeight=0);var Z=0,J=0;x.config.yaxis.forEach(function(ne){Z+=ne.labels.minWidth,J+=ne.labels.maxWidth}),this.yAxisWidth<Z&&(this.yAxisWidth=Z),this.yAxisWidth>J&&(this.yAxisWidth=J)}}]),ve}(),da=function(){function ve(l){j(this,ve),this.w=l.w,this.lgCtx=l}return Be(ve,[{key:"getLegendStyles",value:function(){var l,u,m,x=document.createElement("style");x.setAttribute("type","text/css");var w=(null===(l=this.lgCtx.ctx)||void 0===l||null===(u=l.opts)||void 0===u||null===(m=u.chart)||void 0===m?void 0:m.nonce)||this.w.config.chart.nonce;w&&x.setAttribute("nonce",w);var E=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return x.appendChild(E),x}},{key:"getLegendBBox",value:function(){var l=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:l.height,clww:l.width}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(l,u){var m=this,x=this.w;if(x.globals.axisCharts||"radialBar"===x.config.chart.type){x.globals.resized=!0;var w=null,E=null;x.globals.risingSeries=[],x.globals.axisCharts?(w=x.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(l,"']")),E=parseInt(w.getAttribute("data:realIndex"),10)):(w=x.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(l+1,"']")),E=parseInt(w.getAttribute("rel"),10)-1),u?[{cs:x.globals.collapsedSeries,csi:x.globals.collapsedSeriesIndices},{cs:x.globals.ancillaryCollapsedSeries,csi:x.globals.ancillaryCollapsedSeriesIndices}].forEach(function(Z){m.riseCollapsedSeries(Z.cs,Z.csi,E)}):this.hideSeries({seriesEl:w,realIndex:E})}else{var M=x.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(l+1,"'] path")),N=x.config.chart.type;if("pie"===N||"polarArea"===N||"donut"===N){var H=x.config.plotOptions.pie.donut.labels;new Dt(this.lgCtx.ctx).pathMouseDown(M.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(M.members[0].node,H)}M.fire("click")}}},{key:"hideSeries",value:function(l){var u=l.seriesEl,m=l.realIndex,x=this.w,w=tt.clone(x.config.series);if(x.globals.axisCharts){var E=x.config.yaxis[x.globals.seriesYAxisReverseMap[m]];if(E&&E.show&&E.showAlways)x.globals.ancillaryCollapsedSeriesIndices.indexOf(m)<0&&(x.globals.ancillaryCollapsedSeries.push({index:m,data:w[m].data.slice(),type:u.parentNode.className.baseVal.split("-")[1]}),x.globals.ancillaryCollapsedSeriesIndices.push(m));else if(x.globals.collapsedSeriesIndices.indexOf(m)<0){x.globals.collapsedSeries.push({index:m,data:w[m].data.slice(),type:u.parentNode.className.baseVal.split("-")[1]}),x.globals.collapsedSeriesIndices.push(m);var M=x.globals.risingSeries.indexOf(m);x.globals.risingSeries.splice(M,1)}}else x.globals.collapsedSeries.push({index:m,data:w[m]}),x.globals.collapsedSeriesIndices.push(m);for(var N=u.childNodes,H=0;H<N.length;H++)N[H].classList.contains("apexcharts-series-markers-wrap")&&(N[H].classList.contains("apexcharts-hide")?N[H].classList.remove("apexcharts-hide"):N[H].classList.add("apexcharts-hide"));x.globals.allSeriesCollapsed=x.globals.collapsedSeries.length===x.config.series.length,w=this._getSeriesBasedOnCollapsedState(w),this.lgCtx.ctx.updateHelpers._updateSeries(w,x.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(l,u,m){var x=this.w,w=tt.clone(x.config.series);if(l.length>0){for(var E=0;E<l.length;E++)l[E].index===m&&(x.globals.axisCharts?(w[m].data=l[E].data.slice(),l.splice(E,1),u.splice(E,1),x.globals.risingSeries.push(m)):(w[m]=l[E].data,l.splice(E,1),u.splice(E,1),x.globals.risingSeries.push(m)));w=this._getSeriesBasedOnCollapsedState(w),this.lgCtx.ctx.updateHelpers._updateSeries(w,x.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(l){var u=this.w;return l.forEach(u.globals.axisCharts?function(m,x){u.globals.collapsedSeriesIndices.indexOf(x)>-1&&(l[x].data=[])}:function(m,x){u.globals.collapsedSeriesIndices.indexOf(x)>-1&&(l[x]=0)}),l}}]),ve}(),Mr=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new da(this)}return Be(ve,[{key:"init",value:function(){var l=this.w,u=l.globals,m=l.config;if((m.legend.showForSingleSeries&&1===u.series.length||this.isBarsDistributed||u.series.length>1||!u.axisCharts)&&m.legend.show){for(;u.dom.elLegendWrap.firstChild;)u.dom.elLegendWrap.removeChild(u.dom.elLegendWrap.firstChild);this.drawLegends(),tt.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===m.legend.position||"top"===m.legend.position?this.legendAlignHorizontal():"right"!==m.legend.position&&"left"!==m.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var l=this,u=this.w,m=u.config.legend.fontFamily,x=u.globals.seriesNames,w=u.globals.colors.slice();if("heatmap"===u.config.chart.type){var E=u.config.plotOptions.heatmap.colorScale.ranges;x=E.map(function(ln){return ln.name?ln.name:ln.from+" - "+ln.to}),w=E.map(function(ln){return ln.color})}else this.isBarsDistributed&&(x=u.globals.labels.slice());u.config.legend.customLegendItems.length&&(x=u.config.legend.customLegendItems);for(var M=u.globals.legendFormatter,N=u.config.legend.inverseOrder,H=N?x.length-1:0;N?H>=0:H<=x.length-1;N?H--:H++){var Z,J=M(x[H],{seriesIndex:H,w:u}),ne=!1,fe=!1;if(u.globals.collapsedSeries.length>0)for(var ye=0;ye<u.globals.collapsedSeries.length;ye++)u.globals.collapsedSeries[ye].index===H&&(ne=!0);if(u.globals.ancillaryCollapsedSeriesIndices.length>0)for(var De=0;De<u.globals.ancillaryCollapsedSeriesIndices.length;De++)u.globals.ancillaryCollapsedSeriesIndices[De]===H&&(fe=!0);var Pe=document.createElement("span");Pe.classList.add("apexcharts-legend-marker");var Se=u.config.legend.markers.offsetX,ze=u.config.legend.markers.offsetY,U=u.config.legend.markers.height,le=u.config.legend.markers.width,we=u.config.legend.markers.strokeWidth,Le=u.config.legend.markers.strokeColor,$e=u.config.legend.markers.radius,mt=Pe.style;mt.background=w[H],mt.color=w[H],mt.setProperty("background",w[H],"important"),u.config.legend.markers.fillColors&&u.config.legend.markers.fillColors[H]&&(mt.background=u.config.legend.markers.fillColors[H]),void 0!==u.globals.seriesColors[H]&&(mt.background=u.globals.seriesColors[H],mt.color=u.globals.seriesColors[H]),mt.height=Array.isArray(U)?parseFloat(U[H])+"px":parseFloat(U)+"px",mt.width=Array.isArray(le)?parseFloat(le[H])+"px":parseFloat(le)+"px",mt.left=(Array.isArray(Se)?parseFloat(Se[H]):parseFloat(Se))+"px",mt.top=(Array.isArray(ze)?parseFloat(ze[H]):parseFloat(ze))+"px",mt.borderWidth=Array.isArray(we)?we[H]:we,mt.borderColor=Array.isArray(Le)?Le[H]:Le,mt.borderRadius=Array.isArray($e)?parseFloat($e[H])+"px":parseFloat($e)+"px",u.config.legend.markers.customHTML&&(Array.isArray(u.config.legend.markers.customHTML)?u.config.legend.markers.customHTML[H]&&(Pe.innerHTML=u.config.legend.markers.customHTML[H]()):Pe.innerHTML=u.config.legend.markers.customHTML()),Dt.setAttrs(Pe,{rel:H+1,"data:collapsed":ne||fe}),(ne||fe)&&Pe.classList.add("apexcharts-inactive-legend");var $t=document.createElement("div"),Xt=document.createElement("span");Xt.classList.add("apexcharts-legend-text"),Xt.innerHTML=Array.isArray(J)?J.join(" "):J;var Li=u.config.legend.labels.useSeriesColors?u.globals.colors[H]:Array.isArray(u.config.legend.labels.colors)?null===(Z=u.config.legend.labels.colors)||void 0===Z?void 0:Z[H]:u.config.legend.labels.colors;Li||(Li=u.config.chart.foreColor),Xt.style.color=Li,Xt.style.fontSize=parseFloat(u.config.legend.fontSize)+"px",Xt.style.fontWeight=u.config.legend.fontWeight,Xt.style.fontFamily=m||u.config.chart.fontFamily,Dt.setAttrs(Xt,{rel:H+1,i:H,"data:default-text":encodeURIComponent(J),"data:collapsed":ne||fe}),$t.appendChild(Pe),$t.appendChild(Xt);var Ji=new Fi(this.ctx);u.config.legend.showForZeroSeries||0===Ji.getSeriesTotalByIndex(H)&&Ji.seriesHaveSameValues(H)&&!Ji.isSeriesNull(H)&&-1===u.globals.collapsedSeriesIndices.indexOf(H)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(H)&&$t.classList.add("apexcharts-hidden-zero-series"),u.config.legend.showForNullSeries||Ji.isSeriesNull(H)&&-1===u.globals.collapsedSeriesIndices.indexOf(H)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(H)&&$t.classList.add("apexcharts-hidden-null-series"),u.globals.dom.elLegendWrap.appendChild($t),u.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(u.config.legend.horizontalAlign)),u.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+u.config.legend.position),$t.classList.add("apexcharts-legend-series"),$t.style.margin="".concat(u.config.legend.itemMargin.vertical,"px ").concat(u.config.legend.itemMargin.horizontal,"px"),u.globals.dom.elLegendWrap.style.width=u.config.legend.width?u.config.legend.width+"px":"",u.globals.dom.elLegendWrap.style.height=u.config.legend.height?u.config.legend.height+"px":"",Dt.setAttrs($t,{rel:H+1,seriesName:tt.escapeString(x[H]),"data:collapsed":ne||fe}),(ne||fe)&&$t.classList.add("apexcharts-inactive-legend"),u.config.legend.onItemClick.toggleDataSeries||$t.classList.add("apexcharts-no-click")}u.globals.dom.elWrap.addEventListener("click",l.onLegendClick,!0),u.config.legend.onItemHover.highlightDataSeries&&0===u.config.legend.customLegendItems.length&&(u.globals.dom.elWrap.addEventListener("mousemove",l.onLegendHovered,!0),u.globals.dom.elWrap.addEventListener("mouseout",l.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(l,u){var m=this.w,x=m.globals.dom.elLegendWrap,w=x.getBoundingClientRect(),E=0,M=0;if("bottom"===m.config.legend.position)M+=m.globals.svgHeight-w.height/2;else if("top"===m.config.legend.position){var N=new xr(this.ctx),H=N.dimHelpers.getTitleSubtitleCoords("title").height,Z=N.dimHelpers.getTitleSubtitleCoords("subtitle").height;M=M+(H>0?H-10:0)+(Z>0?Z-10:0)}x.style.position="absolute",M=M+u+m.config.legend.offsetY,x.style.left=(E=E+l+m.config.legend.offsetX)+"px",x.style.top=M+"px","bottom"===m.config.legend.position?(x.style.top="auto",x.style.bottom=5-m.config.legend.offsetY+"px"):"right"===m.config.legend.position&&(x.style.left="auto",x.style.right=25+m.config.legend.offsetX+"px"),["width","height"].forEach(function(J){x.style[J]&&(x.style[J]=parseInt(m.config.legend[J],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var l=this.w;l.globals.dom.elLegendWrap.style.right=0;var u=this.legendHelpers.getLegendBBox(),m=new xr(this.ctx),x=m.dimHelpers.getTitleSubtitleCoords("title"),w=m.dimHelpers.getTitleSubtitleCoords("subtitle"),E=0;"bottom"===l.config.legend.position?E=-u.clwh/1.8:"top"===l.config.legend.position&&(E=x.height+w.height+l.config.title.margin+l.config.subtitle.margin-10),this.setLegendWrapXY(20,E)}},{key:"legendAlignVertical",value:function(){var l=this.w,u=this.legendHelpers.getLegendBBox(),m=0;"left"===l.config.legend.position&&(m=20),"right"===l.config.legend.position&&(m=l.globals.svgWidth-u.clww-10),this.setLegendWrapXY(m,20)}},{key:"onLegendHovered",value:function(l){var u=this.w,m=l.target.classList.contains("apexcharts-legend-series")||l.target.classList.contains("apexcharts-legend-text")||l.target.classList.contains("apexcharts-legend-marker");if("heatmap"===u.config.chart.type||this.isBarsDistributed){if(m){var x=parseInt(l.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,x,this.w]),new Pr(this.ctx).highlightRangeInSeries(l,l.target)}}else!l.target.classList.contains("apexcharts-inactive-legend")&&m&&new Pr(this.ctx).toggleSeriesOnHover(l,l.target)}},{key:"onLegendClick",value:function(l){var u=this.w;if(!u.config.legend.customLegendItems.length&&(l.target.classList.contains("apexcharts-legend-series")||l.target.classList.contains("apexcharts-legend-text")||l.target.classList.contains("apexcharts-legend-marker"))){var m=parseInt(l.target.getAttribute("rel"),10)-1,x="true"===l.target.getAttribute("data:collapsed"),w=this.w.config.chart.events.legendClick;"function"==typeof w&&w(this.ctx,m,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,m,this.w]);var E=this.w.config.legend.markers.onClick;"function"==typeof E&&l.target.classList.contains("apexcharts-legend-marker")&&(E(this.ctx,m,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,m,this.w])),"treemap"!==u.config.chart.type&&"heatmap"!==u.config.chart.type&&!this.isBarsDistributed&&u.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(m,x)}}}]),ve}(),go=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w;var u=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=u.globals.minX,this.maxX=u.globals.maxX}return Be(ve,[{key:"createToolbar",value:function(){var l=this,u=this.w,m=function(){return document.createElement("div")},x=m();if(x.setAttribute("class","apexcharts-toolbar"),x.style.top=u.config.chart.toolbar.offsetY+"px",x.style.right=3-u.config.chart.toolbar.offsetX+"px",u.globals.dom.elWrap.appendChild(x),this.elZoom=m(),this.elZoomIn=m(),this.elZoomOut=m(),this.elPan=m(),this.elSelection=m(),this.elZoomReset=m(),this.elMenuIcon=m(),this.elMenu=m(),this.elCustomIcons=[],this.t=u.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var w=0;w<this.t.customIcons.length;w++)this.elCustomIcons.push(m());var E=[],M=function(J,ne,fe){var ye=J.toLowerCase();l.t[ye]&&u.config.chart.zoom.enabled&&E.push({el:ne,icon:"string"==typeof l.t[ye]?l.t[ye]:fe,title:l.localeValues[J],class:"apexcharts-".concat(ye,"-icon")})};M("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),M("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var N=function(J){l.t[J]&&u.config.chart[J].enabled&&E.push({el:"zoom"===J?l.elZoom:l.elSelection,icon:"string"==typeof l.t[J]?l.t[J]:"zoom"===J?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:l.localeValues["zoom"===J?"selectionZoom":"selection"],class:u.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(J,"-icon")})};N("zoom"),N("selection"),this.t.pan&&u.config.chart.zoom.enabled&&E.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:u.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),M("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&E.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var H=0;H<this.elCustomIcons.length;H++)E.push({el:this.elCustomIcons[H],icon:this.t.customIcons[H].icon,title:this.t.customIcons[H].title,index:this.t.customIcons[H].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[H].class});E.forEach(function(J,ne){J.index&&tt.moveIndexInArray(E,ne,J.index)});for(var Z=0;Z<E.length;Z++)Dt.setAttrs(E[Z].el,{class:E[Z].class,title:E[Z].title}),E[Z].el.innerHTML=E[Z].icon,x.appendChild(E[Z].el);this._createHamburgerMenu(x),u.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):u.globals.panEnabled?this.elPan.classList.add(this.selectedClass):u.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(l){this.elMenuItems=[],l.appendChild(this.elMenu),Dt.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var u=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],m=0;m<u.length;m++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[m].innerHTML=u[m].title,Dt.setAttrs(this.elMenuItems[m],{class:"apexcharts-menu-item ".concat(u[m].name),title:u[m].title}),this.elMenu.appendChild(this.elMenuItems[m])}},{key:"addToolbarEventListeners",value:function(){var l=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(m){m.classList.contains("exportSVG")?m.addEventListener("click",l.handleDownload.bind(l,"svg")):m.classList.contains("exportPNG")?m.addEventListener("click",l.handleDownload.bind(l,"png")):m.classList.contains("exportCSV")&&m.addEventListener("click",l.handleDownload.bind(l,"csv"))});for(var u=0;u<this.t.customIcons.length;u++)this.elCustomIcons[u].addEventListener("click",this.t.customIcons[u].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(l){this.ctx.getSyncedCharts().forEach(function(u){u.ctx.toolbar.toggleOtherControls();var m="selection"===l?u.ctx.toolbar.elSelection:u.ctx.toolbar.elZoom,x="selection"===l?"selectionEnabled":"zoomEnabled";u.w.globals[x]=!u.w.globals[x],m.classList.contains(u.ctx.toolbar.selectedClass)?m.classList.remove(u.ctx.toolbar.selectedClass):m.classList.add(u.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var l=this.w;this.elZoom||(this.elZoom=l.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=l.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=l.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(l){this.toggleOtherControls(),"pan"===l?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var u="pan"===l?this.elPan:this.elZoom,m="pan"===l?this.elZoom:this.elPan;u&&u.classList.add(this.selectedClass),m&&m.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(l){l.ctx.toolbar.toggleOtherControls(),l.w.globals.panEnabled=!l.w.globals.panEnabled,l.ctx.toolbar.elPan.classList.contains(l.ctx.toolbar.selectedClass)?l.ctx.toolbar.elPan.classList.remove(l.ctx.toolbar.selectedClass):l.ctx.toolbar.elPan.classList.add(l.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var l=this,u=this.w;u.globals.panEnabled=!1,u.globals.zoomEnabled=!1,u.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(m){m&&m.classList.remove(l.selectedClass)})}},{key:"handleZoomIn",value:function(){var l=this.w;l.globals.isRangeBar&&(this.minX=l.globals.minY,this.maxX=l.globals.maxY);var u=(this.minX+this.maxX)/2,w=this._getNewMinXMaxX((this.minX+u)/2,(this.maxX+u)/2);l.globals.disableZoomIn||this.zoomUpdateOptions(w.minX,w.maxX)}},{key:"handleZoomOut",value:function(){var l=this.w;if(l.globals.isRangeBar&&(this.minX=l.globals.minY,this.maxX=l.globals.maxY),!("datetime"===l.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var u=(this.minX+this.maxX)/2,w=this._getNewMinXMaxX(this.minX-(u-this.minX),this.maxX-(u-this.maxX));l.globals.disableZoomOut||this.zoomUpdateOptions(w.minX,w.maxX)}}},{key:"_getNewMinXMaxX",value:function(l,u){var m=this.w.config.xaxis.convertedCatToNumeric;return{minX:m?Math.floor(l):l,maxX:m?Math.floor(u):u}}},{key:"zoomUpdateOptions",value:function(l,u){var m=this.w;if(void 0!==l||void 0!==u){if(!(m.config.xaxis.convertedCatToNumeric&&(l<1&&(l=1,u=m.globals.dataPoints),u-l<2))){var x={min:l,max:u},w=this.getBeforeZoomRange(x);w&&(x=w.xaxis);var E={xaxis:x},M=tt.clone(m.globals.initialConfig.yaxis);m.config.chart.group||(E.yaxis=M),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(E,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(x,M)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(l,u){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:l,yaxis:u})}},{key:"getBeforeZoomRange",value:function(l,u){var m=null;return"function"==typeof this.ev.beforeZoom&&(m=this.ev.beforeZoom(this,{xaxis:l,yaxis:u})),m}},{key:"toggleMenu",value:function(){var l=this;window.setTimeout(function(){l.elMenu.classList.contains("apexcharts-menu-open")?l.elMenu.classList.remove("apexcharts-menu-open"):l.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(l){var u=this.w,m=new ka(this.ctx);switch(l){case"svg":m.exportToSVG(this.ctx);break;case"png":m.exportToPng(this.ctx);break;case"csv":m.exportToCSV({series:u.config.series,columnDelimiter:u.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(l){this.ctx.getSyncedCharts().forEach(function(u){var m=u.w;if(m.globals.lastXAxis.min=m.globals.initialConfig.xaxis.min,m.globals.lastXAxis.max=m.globals.initialConfig.xaxis.max,u.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof m.config.chart.events.beforeResetZoom){var x=m.config.chart.events.beforeResetZoom(u,m);x&&u.updateHelpers.revertDefaultAxisMinMax(x)}"function"==typeof m.config.chart.events.zoomed&&u.ctx.toolbar.zoomCallback({min:m.config.xaxis.min,max:m.config.xaxis.max}),m.globals.zoomed=!1;var w=u.ctx.series.emptyCollapsedSeries(tt.clone(m.globals.initialSeries));u.updateHelpers._updateSeries(w,m.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),ve}(),Dr=function(ve){We(u,go);var l=ot(u);function u(m){var x;return j(this,u),(x=l.call(this,m)).ctx=m,x.w=m.w,x.dragged=!1,x.graphics=new Dt(x.ctx),x.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],x.clientX=0,x.clientY=0,x.startX=0,x.endX=0,x.dragX=0,x.startY=0,x.endY=0,x.dragY=0,x.moveDirection="none",x}return Be(u,[{key:"init",value:function(m){var x=this,w=m.xyRatios,E=this.w,M=this;this.xyRatios=w,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=E.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),E.globals.dom.elGraphical.add(this.zoomRect),E.globals.dom.elGraphical.add(this.selectionRect),this.slDraggableRect="x"===E.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:E.globals.gridWidth,maxY:E.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===E.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:E.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=E.globals.dom.baseEl.querySelector("".concat(E.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(N){x.hoverArea.addEventListener(N,M.svgMouseEvents.bind(M,w),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(m,x){var w=this.w,E=this,M=this.ctx.toolbar,N=w.globals.zoomEnabled?w.config.chart.zoom.type:w.config.chart.selection.type,H=w.config.chart.toolbar.autoSelected;if(x.shiftKey?(this.shiftWasPressed=!0,M.enableZoomPanFromToolbar("pan"===H?"zoom":"pan")):this.shiftWasPressed&&(M.enableZoomPanFromToolbar(H),this.shiftWasPressed=!1),x.target){var Z,J=x.target.classList;if(x.target.parentNode&&null!==x.target.parentNode&&(Z=x.target.parentNode.classList),!(J.contains("apexcharts-selection-rect")||J.contains("apexcharts-legend-marker")||J.contains("apexcharts-legend-text")||Z&&Z.contains("apexcharts-toolbar"))){if(E.clientX="touchmove"===x.type||"touchstart"===x.type?x.touches[0].clientX:"touchend"===x.type?x.changedTouches[0].clientX:x.clientX,E.clientY="touchmove"===x.type||"touchstart"===x.type?x.touches[0].clientY:"touchend"===x.type?x.changedTouches[0].clientY:x.clientY,("mousedown"===x.type||"touchmove"===x.type)&&1===x.which){var ne=E.gridRect.getBoundingClientRect();E.startX=E.clientX-ne.left,E.startY=E.clientY-ne.top,E.dragged=!1,E.w.globals.mousedown=!0}if("mousemove"===x.type&&1===x.which||"touchmove"===x.type)if(E.dragged=!0,w.globals.panEnabled){if(w.globals.selection=null,E.w.globals.mousedown||"touchmove"===x.type){if("touchmove"===x.type&&!E.w.globals.mousedown){console.warn("me.w.globals.mousedown ",E.w.globals.mousedown);var fe=E.gridRect.getBoundingClientRect();E.startX=E.clientX-fe.left,E.startY=E.clientY-fe.top,E.w.globals.mousedown=!0}E.panDragging({context:E,zoomtype:N,xyRatios:m})}}else{if("touchmove"===x.type){if(!E.w.globals.mousedown){var ye=E.gridRect.getBoundingClientRect();E.startX=E.clientX-ye.left,E.startY=E.clientY-ye.top}E.w.globals.mousedown=!0}(E.w.globals.mousedown&&w.globals.zoomEnabled||E.w.globals.mousedown&&w.globals.selectionEnabled)&&(E.selection=E.selectionDrawing({context:E,zoomtype:N}))}if("mouseup"===x.type||"touchend"===x.type||"mouseleave"===x.type){var De=E.gridRect.getBoundingClientRect();E.w.globals.mousedown&&(E.endX=E.clientX-De.left,E.endY=E.clientY-De.top,E.dragX=Math.abs(E.endX-E.startX),E.dragY=Math.abs(E.endY-E.startY),(w.globals.zoomEnabled||w.globals.selectionEnabled)&&E.selectionDrawn({context:E,zoomtype:N}),w.globals.panEnabled&&w.config.xaxis.convertedCatToNumeric&&E.delayedPanScrolled()),w.globals.zoomEnabled&&E.hideSelectionRect(this.selectionRect),E.dragged=!1,E.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var m=this.w;if(this.selectionRect){var x=this.selectionRect.node.getBoundingClientRect();x.width>0&&x.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:m.globals.gridWidth,maxY:m.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var m=this.w,x=this.xyRatios;if(!m.globals.zoomEnabled)if(null!=m.globals.selection)this.drawSelectionRect(m.globals.selection);else if(void 0!==m.config.chart.selection.xaxis.min&&void 0!==m.config.chart.selection.xaxis.max){var w=(m.config.chart.selection.xaxis.min-m.globals.minX)/x.xRatio,E=m.globals.gridWidth-(m.globals.maxX-m.config.chart.selection.xaxis.max)/x.xRatio-w;m.globals.isRangeBar&&(w=(m.config.chart.selection.xaxis.min-m.globals.yAxisScale[0].niceMin)/x.invertedYRatio,E=(m.config.chart.selection.xaxis.max-m.config.chart.selection.xaxis.min)/x.invertedYRatio),this.drawSelectionRect({x:w,y:0,width:E,height:m.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof m.config.chart.events.selection&&m.config.chart.events.selection(this.ctx,{xaxis:{min:m.config.chart.selection.xaxis.min,max:m.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(m){var x=m.x,w=m.y,E=m.width,M=m.height,N=m.translateX,Z=m.translateY,ne=this.w,fe=this.zoomRect,ye=this.selectionRect;if(this.dragged||null!==ne.globals.selection){var De={transform:"translate("+(void 0===N?0:N)+", "+(void 0===Z?0:Z)+")"};ne.globals.zoomEnabled&&this.dragged&&(E<0&&(E=1),fe.attr({x,y:w,width:E,height:M,fill:ne.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":ne.config.chart.zoom.zoomedArea.fill.opacity,stroke:ne.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":ne.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":ne.config.chart.zoom.zoomedArea.stroke.opacity}),Dt.setAttrs(fe.node,De)),ne.globals.selectionEnabled&&(ye.attr({x,y:w,width:E>0?E:0,height:M>0?M:0,fill:ne.config.chart.selection.fill.color,"fill-opacity":ne.config.chart.selection.fill.opacity,stroke:ne.config.chart.selection.stroke.color,"stroke-width":ne.config.chart.selection.stroke.width,"stroke-dasharray":ne.config.chart.selection.stroke.dashArray,"stroke-opacity":ne.config.chart.selection.stroke.opacity}),Dt.setAttrs(ye.node,De))}}},{key:"hideSelectionRect",value:function(m){m&&m.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(m){var De,w=m.zoomtype,E=this.w,M=m.context,N=this.gridRect.getBoundingClientRect(),H=M.startX-1,Z=M.startY,J=!1,ne=!1,fe=M.clientX-N.left-H,ye=M.clientY-N.top-Z;return Math.abs(fe+H)>E.globals.gridWidth?fe=E.globals.gridWidth-H:M.clientX-N.left<0&&(fe=H),H>M.clientX-N.left&&(J=!0,fe=Math.abs(fe)),Z>M.clientY-N.top&&(ne=!0,ye=Math.abs(ye)),M.drawSelectionRect(De="x"===w?{x:J?H-fe:H,y:0,width:fe,height:E.globals.gridHeight}:"y"===w?{x:0,y:ne?Z-ye:Z,width:E.globals.gridWidth,height:ye}:{x:J?H-fe:H,y:ne?Z-ye:Z,width:fe,height:ye}),M.selectionDragging("resizing"),De}},{key:"selectionDragging",value:function(m,x){var w=this,E=this.w,M=this.xyRatios,N=this.selectionRect,H=0;"resizing"===m&&(H=30);var Z=function(ne){return parseFloat(N.node.getAttribute(ne))},J={x:Z("x"),y:Z("y"),width:Z("width"),height:Z("height")};E.globals.selection=J,"function"==typeof E.config.chart.events.selection&&E.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var ne,fe,ye,De,Pe=w.gridRect.getBoundingClientRect(),Se=N.node.getBoundingClientRect();E.globals.isRangeBar?(ne=E.globals.yAxisScale[0].niceMin+(Se.left-Pe.left)*M.invertedYRatio,fe=E.globals.yAxisScale[0].niceMin+(Se.right-Pe.left)*M.invertedYRatio,ye=0,De=1):(ne=E.globals.xAxisScale.niceMin+(Se.left-Pe.left)*M.xRatio,fe=E.globals.xAxisScale.niceMin+(Se.right-Pe.left)*M.xRatio,ye=E.globals.yAxisScale[0].niceMin+(Pe.bottom-Se.bottom)*M.yRatio[0],De=E.globals.yAxisScale[0].niceMax-(Se.top-Pe.top)*M.yRatio[0]);var ze={xaxis:{min:ne,max:fe},yaxis:{min:ye,max:De}};E.config.chart.events.selection(w.ctx,ze),E.config.chart.brush.enabled&&void 0!==E.config.chart.events.brushScrolled&&E.config.chart.events.brushScrolled(w.ctx,ze)},H))}},{key:"selectionDrawn",value:function(m){var w=m.zoomtype,E=this.w,M=m.context,N=this.xyRatios,H=this.ctx.toolbar;if(M.startX>M.endX){var Z=M.startX;M.startX=M.endX,M.endX=Z}if(M.startY>M.endY){var J=M.startY;M.startY=M.endY,M.endY=J}var ne=void 0,fe=void 0;E.globals.isRangeBar?(ne=E.globals.yAxisScale[0].niceMin+M.startX*N.invertedYRatio,fe=E.globals.yAxisScale[0].niceMin+M.endX*N.invertedYRatio):(ne=E.globals.xAxisScale.niceMin+M.startX*N.xRatio,fe=E.globals.xAxisScale.niceMin+M.endX*N.xRatio);var ye=[],De=[];if(E.config.yaxis.forEach(function(Le,$e){ye.push(E.globals.yAxisScale[$e].niceMax-N.yRatio[$e]*M.startY),De.push(E.globals.yAxisScale[$e].niceMax-N.yRatio[$e]*M.endY)}),M.dragged&&(M.dragX>10||M.dragY>10)&&ne!==fe)if(E.globals.zoomEnabled){var Pe=tt.clone(E.globals.initialConfig.yaxis),Se=tt.clone(E.globals.initialConfig.xaxis);if(E.globals.zoomed=!0,E.config.xaxis.convertedCatToNumeric&&(ne=Math.floor(ne),fe=Math.floor(fe),ne<1&&(ne=1,fe=E.globals.dataPoints),fe-ne<2&&(fe=ne+1)),"xy"!==w&&"x"!==w||(Se={min:ne,max:fe}),"xy"!==w&&"y"!==w||Pe.forEach(function(Le,$e){Pe[$e].min=De[$e],Pe[$e].max=ye[$e]}),H){var ze=H.getBeforeZoomRange(Se,Pe);ze&&(Se=ze.xaxis?ze.xaxis:Se,Pe=ze.yaxis?ze.yaxis:Pe)}var U={xaxis:Se};E.config.chart.group||(U.yaxis=Pe),M.ctx.updateHelpers._updateOptions(U,!1,M.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof E.config.chart.events.zoomed&&H.zoomCallback(Se,Pe)}else if(E.globals.selectionEnabled){var le,we=null;le={min:ne,max:fe},"xy"!==w&&"y"!==w||(we=tt.clone(E.config.yaxis)).forEach(function(Le,$e){we[$e].min=De[$e],we[$e].max=ye[$e]}),E.globals.selection=M.selection,"function"==typeof E.config.chart.events.selection&&E.config.chart.events.selection(M.ctx,{xaxis:le,yaxis:we})}}},{key:"panDragging",value:function(m){var w=this.w,E=m.context;if(void 0!==w.globals.lastClientPosition.x){var M=w.globals.lastClientPosition.x-E.clientX,N=w.globals.lastClientPosition.y-E.clientY;Math.abs(M)>Math.abs(N)&&M>0?this.moveDirection="left":Math.abs(M)>Math.abs(N)&&M<0?this.moveDirection="right":Math.abs(N)>Math.abs(M)&&N>0?this.moveDirection="up":Math.abs(N)>Math.abs(M)&&N<0&&(this.moveDirection="down")}w.globals.lastClientPosition={x:E.clientX,y:E.clientY},w.config.xaxis.convertedCatToNumeric||E.panScrolled(w.globals.isRangeBar?w.globals.minY:w.globals.minX,w.globals.isRangeBar?w.globals.maxY:w.globals.maxX)}},{key:"delayedPanScrolled",value:function(){var m=this.w,x=m.globals.minX,w=m.globals.maxX,E=(m.globals.maxX-m.globals.minX)/2;"left"===this.moveDirection?(x=m.globals.minX+E,w=m.globals.maxX+E):"right"===this.moveDirection&&(x=m.globals.minX-E,w=m.globals.maxX-E),x=Math.floor(x),w=Math.floor(w),this.updateScrolledChart({xaxis:{min:x,max:w}},x,w)}},{key:"panScrolled",value:function(m,x){var w=this.w,E=this.xyRatios,M=tt.clone(w.globals.initialConfig.yaxis),N=E.xRatio,H=w.globals.minX,Z=w.globals.maxX;w.globals.isRangeBar&&(N=E.invertedYRatio,H=w.globals.minY,Z=w.globals.maxY),"left"===this.moveDirection?(m=H+w.globals.gridWidth/15*N,x=Z+w.globals.gridWidth/15*N):"right"===this.moveDirection&&(m=H-w.globals.gridWidth/15*N,x=Z-w.globals.gridWidth/15*N),w.globals.isRangeBar||(m<w.globals.initialMinX||x>w.globals.initialMaxX)&&(m=H,x=Z);var J={xaxis:{min:m,max:x}};w.config.chart.group||(J.yaxis=M),this.updateScrolledChart(J,m,x)}},{key:"updateScrolledChart",value:function(m,x,w){var E=this.w;this.ctx.updateHelpers._updateOptions(m,!1,!1),"function"==typeof E.config.chart.events.scrolled&&E.config.chart.events.scrolled(this.ctx,{xaxis:{min:x,max:w}})}}]),u}(),Aa=function(){function ve(l){j(this,ve),this.w=l.w,this.ttCtx=l,this.ctx=l.ctx}return Be(ve,[{key:"getNearestValues",value:function(l){var u=l.hoverArea,x=l.clientX,w=l.clientY,E=this.w,M=l.elGrid.getBoundingClientRect(),N=M.width,H=M.height,Z=N/(E.globals.dataPoints-1),J=H/E.globals.dataPoints,ne=this.hasBars();!E.globals.comboCharts&&!ne||E.config.xaxis.convertedCatToNumeric||(Z=N/E.globals.dataPoints);var fe=x-M.left-E.globals.barPadForNumericAxis,ye=w-M.top;fe<0||ye<0||fe>N||ye>H?(u.classList.remove("hovering-zoom"),u.classList.remove("hovering-pan")):E.globals.zoomEnabled?(u.classList.remove("hovering-pan"),u.classList.add("hovering-zoom")):E.globals.panEnabled&&(u.classList.remove("hovering-zoom"),u.classList.add("hovering-pan"));var De=Math.round(fe/Z),Pe=Math.floor(ye/J);ne&&!E.config.xaxis.convertedCatToNumeric&&(De=Math.ceil(fe/Z),De-=1);var Se=null,ze=null,U=E.globals.seriesXvalues.map(function(mt){return mt.filter(function($t){return tt.isNumber($t)})}),le=E.globals.seriesYvalues.map(function(mt){return mt.filter(function($t){return tt.isNumber($t)})});if(E.globals.isXNumeric){var we=this.ttCtx.getElGrid().getBoundingClientRect(),Le=fe*(we.width/N);Se=(ze=this.closestInMultiArray(Le,ye*(we.height/H),U,le)).index,De=ze.j,null!==Se&&(De=(ze=this.closestInArray(Le,U=E.globals.seriesXvalues[Se])).index)}return E.globals.capturedSeriesIndex=null===Se?-1:Se,(!De||De<1)&&(De=0),E.globals.capturedDataPointIndex=E.globals.isBarHorizontal?Pe:De,{capturedSeries:Se,j:E.globals.isBarHorizontal?Pe:De,hoverX:fe,hoverY:ye}}},{key:"closestInMultiArray",value:function(l,u,m,x){var E=0,M=null,N=-1;this.w.globals.series.length>1?E=this.getFirstActiveXArray(m):M=0;var Z=Math.abs(l-m[E][0]);if(m.forEach(function(fe){fe.forEach(function(ye,De){var Pe=Math.abs(l-ye);Pe<=Z&&(Z=Pe,N=De)})}),-1!==N){var ne=Math.abs(u-x[E][N]);M=E,x.forEach(function(fe,ye){var De=Math.abs(u-fe[N]);De<=ne&&(ne=De,M=ye)})}return{index:M,j:N}}},{key:"getFirstActiveXArray",value:function(l){for(var u=this.w,m=0,x=l.map(function(E,M){return E.length>0?M:-1}),w=0;w<x.length;w++)if(-1!==x[w]&&-1===u.globals.collapsedSeriesIndices.indexOf(w)&&-1===u.globals.ancillaryCollapsedSeriesIndices.indexOf(w)){m=x[w];break}return m}},{key:"closestInArray",value:function(l,u){for(var x=null,w=Math.abs(l-u[0]),E=0;E<u.length;E++){var M=Math.abs(l-u[E]);M<w&&(w=M,x=E)}return{index:x}}},{key:"isXoverlap",value:function(l){var u=[],m=this.w.globals.seriesX.filter(function(w){return void 0!==w[0]});if(m.length>0)for(var x=0;x<m.length-1;x++)void 0!==m[x][l]&&void 0!==m[x+1][l]&&m[x][l]!==m[x+1][l]&&u.push("unEqual");return 0===u.length}},{key:"isInitialSeriesSameLen",value:function(){for(var l=!0,u=this.w.globals.initialSeries,m=0;m<u.length-1;m++)if(u[m].data.length!==u[m+1].data.length){l=!1;break}return l}},{key:"getBarsHeight",value:function(l){return et(l).reduce(function(u,m){return u+m.getBBox().height},0)}},{key:"getElMarkers",value:function(l){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof l?".apexcharts-series[data\\:realIndex='".concat(l,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var l=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(l=et(l)).sort(function(m,x){var w=Number(m.getAttribute("data:realIndex")),E=Number(x.getAttribute("data:realIndex"));return E<w?1:E>w?-1:0});var u=[];return l.forEach(function(m){u.push(m.querySelector(".apexcharts-marker"))}),u}},{key:"hasMarkers",value:function(l){return this.getElMarkers(l).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(l){var u=this.w,m=u.config.markers.hover.size;return void 0===m&&(m=u.globals.markers.size[l]+u.config.markers.hover.sizeOffset),m}},{key:"toggleAllTooltipSeriesGroups",value:function(l){var u=this.w,m=this.ttCtx;0===m.allTooltipSeriesGroups.length&&(m.allTooltipSeriesGroups=u.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var x=m.allTooltipSeriesGroups,w=0;w<x.length;w++)"enable"===l?(x[w].classList.add("apexcharts-active"),x[w].style.display=u.config.tooltip.items.display):(x[w].classList.remove("apexcharts-active"),x[w].style.display="none")}}]),ve}(),fa=function(){function ve(l){j(this,ve),this.w=l.w,this.ctx=l.ctx,this.ttCtx=l,this.tooltipUtil=new Aa(l)}return Be(ve,[{key:"drawSeriesTexts",value:function(l){var u=l.shared,m=void 0===u||u,x=l.ttItems,w=l.i,E=void 0===w?0:w,M=l.j,N=void 0===M?null:M,J=l.e,ne=this.w;void 0!==ne.config.tooltip.custom?this.handleCustomTooltip({i:E,j:N,y1:l.y1,y2:l.y2,w:ne}):this.toggleActiveInactiveSeries(m);var fe=this.getValuesToPrint({i:E,j:N});this.printLabels({i:E,j:N,values:fe,ttItems:x,shared:m,e:J});var ye=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=ye.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=ye.getBoundingClientRect().height}},{key:"printLabels",value:function(l){var u,m=this,x=l.i,w=l.j,E=l.values,M=l.ttItems,N=l.shared,H=l.e,Z=this.w,J=[],ne=function(we){return Z.globals.seriesGoals[we]&&Z.globals.seriesGoals[we][w]&&Array.isArray(Z.globals.seriesGoals[we][w])},fe=E.xVal,ye=E.zVal,De=E.xAxisTTVal,Pe="",Se=Z.globals.colors[x];null!==w&&Z.config.plotOptions.bar.distributed&&(Se=Z.globals.colors[w]);for(var ze=function(we,Le){var $e=m.getFormatters(x);Pe=m.getSeriesName({fn:$e.yLbTitleFormatter,index:x,seriesIndex:x,j:w}),"treemap"===Z.config.chart.type&&(Pe=$e.yLbTitleFormatter(String(Z.config.series[x].data[w].x),{series:Z.globals.series,seriesIndex:x,dataPointIndex:w,w:Z}));var mt=Z.config.tooltip.inverseOrder?Le:we;if(Z.globals.axisCharts){var $t=function(Ji){var ln,Un,cr,Wr;return Z.globals.isRangeData?$e.yLbFormatter(null===(ln=Z.globals.seriesRangeStart)||void 0===ln||null===(Un=ln[Ji])||void 0===Un?void 0:Un[w],{series:Z.globals.seriesRangeStart,seriesIndex:Ji,dataPointIndex:w,w:Z})+" - "+$e.yLbFormatter(null===(cr=Z.globals.seriesRangeEnd)||void 0===cr||null===(Wr=cr[Ji])||void 0===Wr?void 0:Wr[w],{series:Z.globals.seriesRangeEnd,seriesIndex:Ji,dataPointIndex:w,w:Z}):$e.yLbFormatter(Z.globals.series[Ji][w],{series:Z.globals.series,seriesIndex:Ji,dataPointIndex:w,w:Z})};if(N)$e=m.getFormatters(mt),Pe=m.getSeriesName({fn:$e.yLbTitleFormatter,index:mt,seriesIndex:x,j:w}),Se=Z.globals.colors[mt],u=$t(mt),ne(mt)&&(J=Z.globals.seriesGoals[mt][w].map(function(Ji){return{attrs:Ji,val:$e.yLbFormatter(Ji.value,{seriesIndex:mt,dataPointIndex:w,w:Z})}}));else{var Xt,Li=null==H||null===(Xt=H.target)||void 0===Xt?void 0:Xt.getAttribute("fill");Li&&(Se=-1!==Li.indexOf("url")?document.querySelector(Li.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):Li),u=$t(x),ne(x)&&Array.isArray(Z.globals.seriesGoals[x][w])&&(J=Z.globals.seriesGoals[x][w].map(function(Ji){return{attrs:Ji,val:$e.yLbFormatter(Ji.value,{seriesIndex:x,dataPointIndex:w,w:Z})}}))}}null===w&&(u=$e.yLbFormatter(Z.globals.series[x],Ze(Ze({},Z),{},{seriesIndex:x,dataPointIndex:x}))),m.DOMHandling({i:x,t:mt,j:w,ttItems:M,values:{val:u,goalVals:J,xVal:fe,xAxisTTVal:De,zVal:ye},seriesName:Pe,shared:N,pColor:Se})},U=0,le=Z.globals.series.length-1;U<Z.globals.series.length;U++,le--)ze(U,le)}},{key:"getFormatters",value:function(l){var u,m=this.w,x=m.globals.yLabelFormatters[l];return void 0!==m.globals.ttVal?Array.isArray(m.globals.ttVal)?(x=m.globals.ttVal[l]&&m.globals.ttVal[l].formatter,u=m.globals.ttVal[l]&&m.globals.ttVal[l].title&&m.globals.ttVal[l].title.formatter):(x=m.globals.ttVal.formatter,"function"==typeof m.globals.ttVal.title.formatter&&(u=m.globals.ttVal.title.formatter)):u=m.config.tooltip.y.title.formatter,"function"!=typeof x&&(x=m.globals.yLabelFormatters[0]?m.globals.yLabelFormatters[0]:function(w){return w}),"function"!=typeof u&&(u=function(w){return w}),{yLbFormatter:x,yLbTitleFormatter:u}}},{key:"getSeriesName",value:function(l){var x=l.seriesIndex,w=l.j,E=this.w;return(0,l.fn)(String(E.globals.seriesNames[l.index]),{series:E.globals.series,seriesIndex:x,dataPointIndex:w,w:E})}},{key:"DOMHandling",value:function(l){var u=l.t,m=l.j,x=l.ttItems,w=l.values,E=l.seriesName,M=l.shared,N=l.pColor,H=this.w,Z=this.ttCtx,J=w.val,ne=w.goalVals,fe=w.xVal,ye=w.xAxisTTVal,De=w.zVal,Pe=null;Pe=x[u].children,H.config.tooltip.fillSeriesColor&&(x[u].style.backgroundColor=N,Pe[0].style.display="none"),Z.showTooltipTitle&&(null===Z.tooltipTitle&&(Z.tooltipTitle=H.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),Z.tooltipTitle.innerHTML=fe),Z.isXAxisTooltipEnabled&&(Z.xaxisTooltipText.innerHTML=""!==ye?ye:fe);var Se=x[u].querySelector(".apexcharts-tooltip-text-y-label");Se&&(Se.innerHTML=E||"");var ze=x[u].querySelector(".apexcharts-tooltip-text-y-value");ze&&(ze.innerHTML=void 0!==J?J:""),Pe[0]&&Pe[0].classList.contains("apexcharts-tooltip-marker")&&(H.config.tooltip.marker.fillColors&&Array.isArray(H.config.tooltip.marker.fillColors)&&(N=H.config.tooltip.marker.fillColors[u]),Pe[0].style.backgroundColor=N),H.config.tooltip.marker.show||(Pe[0].style.display="none");var U=x[u].querySelector(".apexcharts-tooltip-text-goals-label"),le=x[u].querySelector(".apexcharts-tooltip-text-goals-value");if(ne.length&&H.globals.seriesGoals[u]){var we=function(){var mt="<div >",$t="<div>";ne.forEach(function(Xt,Li){mt+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Xt.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Xt.attrs.name,"</div>"),$t+="<div>".concat(Xt.val,"</div>")}),U.innerHTML=mt+"</div>",le.innerHTML=$t+"</div>"};M?H.globals.seriesGoals[u][m]&&Array.isArray(H.globals.seriesGoals[u][m])?we():(U.innerHTML="",le.innerHTML=""):we()}else U.innerHTML="",le.innerHTML="";if(null!==De&&(x[u].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=H.config.tooltip.z.title,x[u].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==De?De:""),M&&Pe[0]){if(H.config.tooltip.hideEmptySeries){var Le=x[u].querySelector(".apexcharts-tooltip-marker"),$e=x[u].querySelector(".apexcharts-tooltip-text");0==parseFloat(J)?(Le.style.display="none",$e.style.display="none"):(Le.style.display="block",$e.style.display="block")}Pe[0].parentNode.style.display=null==J||H.globals.ancillaryCollapsedSeriesIndices.indexOf(u)>-1||H.globals.collapsedSeriesIndices.indexOf(u)>-1?"none":H.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(l){var u=this.w;if(l)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var m=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");m&&(m.classList.add("apexcharts-active"),m.style.display=u.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(l){var u=l.i,m=l.j,x=this.w,w=this.ctx.series.filteredSeriesX(),E="",M="",N=null,H=null,Z={series:x.globals.series,seriesIndex:u,dataPointIndex:m,w:x},J=x.globals.ttZFormatter;null===m?H=x.globals.series[u]:x.globals.isXNumeric&&"treemap"!==x.config.chart.type?(E=w[u][m],0===w[u].length&&(E=w[this.tooltipUtil.getFirstActiveXArray(w)][m])):E=void 0!==x.globals.labels[m]?x.globals.labels[m]:"";var ne=E;return E=x.globals.isXNumeric&&"datetime"===x.config.xaxis.type?new tn(this.ctx).xLabelFormat(x.globals.ttKeyFormatter,ne,ne,{i:void 0,dateFormatter:new Ki(this.ctx).formatDate,w:this.w}):x.globals.isBarHorizontal?x.globals.yLabelFormatters[0](ne,Z):x.globals.xLabelFormatter(ne,Z),void 0!==x.config.tooltip.x.formatter&&(E=x.globals.ttKeyFormatter(ne,Z)),x.globals.seriesZ.length>0&&x.globals.seriesZ[u].length>0&&(N=J(x.globals.seriesZ[u][m],x)),M="function"==typeof x.config.xaxis.tooltip.formatter?x.globals.xaxisTooltipFormatter(ne,Z):E,{val:Array.isArray(H)?H.join(" "):H,xVal:Array.isArray(E)?E.join(" "):E,xAxisTTVal:Array.isArray(M)?M.join(" "):M,zVal:N}}},{key:"handleCustomTooltip",value:function(l){var u=l.i,m=l.j,x=l.y1,w=l.y2,E=l.w,M=this.ttCtx.getElTooltip(),N=E.config.tooltip.custom;Array.isArray(N)&&N[u]&&(N=N[u]),M.innerHTML=N({ctx:this.ctx,series:E.globals.series,seriesIndex:u,dataPointIndex:m,y1:x,y2:w,w:E})}}]),ve}(),Ia=function(){function ve(l){j(this,ve),this.ttCtx=l,this.ctx=l.ctx,this.w=l.w}return Be(ve,[{key:"moveXCrosshairs",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=this.ttCtx,x=this.w,w=m.getElXCrosshairs(),E=l-m.xcrosshairsWidth/2,M=x.globals.labels.slice().length;if(null!==u&&(E=x.globals.gridWidth/M*u),null===w||x.globals.isBarHorizontal||(w.setAttribute("x",E),w.setAttribute("x1",E),w.setAttribute("x2",E),w.setAttribute("y2",x.globals.gridHeight),w.classList.add("apexcharts-active")),E<0&&(E=0),E>x.globals.gridWidth&&(E=x.globals.gridWidth),m.isXAxisTooltipEnabled){var N=E;"tickWidth"!==x.config.xaxis.crosshairs.width&&"barWidth"!==x.config.xaxis.crosshairs.width||(N=E+m.xcrosshairsWidth/2),this.moveXAxisTooltip(N)}}},{key:"moveYCrosshairs",value:function(l){var u=this.ttCtx;null!==u.ycrosshairs&&Dt.setAttrs(u.ycrosshairs,{y1:l,y2:l}),null!==u.ycrosshairsHidden&&Dt.setAttrs(u.ycrosshairsHidden,{y1:l,y2:l})}},{key:"moveXAxisTooltip",value:function(l){var u=this.w,m=this.ttCtx;if(null!==m.xaxisTooltip&&0!==m.xcrosshairsWidth){m.xaxisTooltip.classList.add("apexcharts-active");var w,x=m.xaxisOffY+u.config.xaxis.tooltip.offsetY+u.globals.translateY+1+u.config.xaxis.offsetY;l-=m.xaxisTooltip.getBoundingClientRect().width/2,isNaN(l)||(l+=u.globals.translateX,w=new Dt(this.ctx).getTextRects(m.xaxisTooltipText.innerHTML),m.xaxisTooltipText.style.minWidth=w.width+"px",m.xaxisTooltip.style.left=l+"px",m.xaxisTooltip.style.top=x+"px")}}},{key:"moveYAxisTooltip",value:function(l){var u=this.w,m=this.ttCtx;null===m.yaxisTTEls&&(m.yaxisTTEls=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var x=parseInt(m.ycrosshairsHidden.getAttribute("y1"),10),w=u.globals.translateY+x,E=m.yaxisTTEls[l].getBoundingClientRect().height,M=u.globals.translateYAxisX[l]-2;u.config.yaxis[l].opposite&&(M-=26),w-=E/2,-1===u.globals.ignoreYAxisIndexes.indexOf(l)?(m.yaxisTTEls[l].classList.add("apexcharts-active"),m.yaxisTTEls[l].style.top=w+"px",m.yaxisTTEls[l].style.left=M+u.config.yaxis[l].tooltip.offsetX+"px"):m.yaxisTTEls[l].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=this.w,w=this.ttCtx,E=w.getElTooltip(),M=w.tooltipRect,N=null!==m?parseFloat(m):1,H=parseFloat(l)+N+5,Z=parseFloat(u)+N/2;if(H>x.globals.gridWidth/2&&(H=H-M.ttWidth-N-10),H>x.globals.gridWidth-M.ttWidth-10&&(H=x.globals.gridWidth-M.ttWidth),H<-20&&(H=-20),x.config.tooltip.followCursor){var J=w.getElGrid().getBoundingClientRect();(H=w.e.clientX-J.left)>x.globals.gridWidth/2&&(H-=w.tooltipRect.ttWidth),(Z=w.e.clientY+x.globals.translateY-J.top)>x.globals.gridHeight/2&&(Z-=w.tooltipRect.ttHeight)}else x.globals.isBarHorizontal||M.ttHeight/2+Z>x.globals.gridHeight&&(Z=x.globals.gridHeight-M.ttHeight+x.globals.translateY);isNaN(H)||(E.style.left=(H+=x.globals.translateX)+"px",E.style.top=Z+"px")}},{key:"moveMarkers",value:function(l,u){var m=this.w,x=this.ttCtx;if(m.globals.markers.size[l]>0)for(var w=m.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(l,"'] .apexcharts-marker")),E=0;E<w.length;E++)parseInt(w[E].getAttribute("rel"),10)===u&&(x.marker.resetPointsSize(),x.marker.enlargeCurrentPoint(u,w[E]));else x.marker.resetPointsSize(),this.moveDynamicPointOnHover(u,l)}},{key:"moveDynamicPointOnHover",value:function(l,u){var m,x,w=this.w,E=this.ttCtx,M=w.globals.pointsArray,N=E.tooltipUtil.getHoverMarkerSize(u),H=w.config.series[u].type;if(!H||"column"!==H&&"candlestick"!==H&&"boxPlot"!==H){m=M[u][l][0],x=M[u][l][1]?M[u][l][1]:0;var Z=w.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(u,"'] .apexcharts-series-markers circle"));Z&&x<w.globals.gridHeight&&x>0&&(Z.setAttribute("r",N),Z.setAttribute("cx",m),Z.setAttribute("cy",x)),this.moveXCrosshairs(m),E.fixedTooltip||this.moveTooltip(m,x,N)}}},{key:"moveDynamicPointsOnHover",value:function(l){var u,m=this.ttCtx,x=m.w,w=0,E=0,M=x.globals.pointsArray;u=new Pr(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var N=m.tooltipUtil.getHoverMarkerSize(u);M[u]&&(w=M[u][l][0],E=M[u][l][1]);var H=m.tooltipUtil.getAllMarkers();if(null!==H)for(var Z=0;Z<x.globals.series.length;Z++){var J=M[Z];if(x.globals.comboCharts&&void 0===J&&H.splice(Z,0,null),J&&J.length){var ne=M[Z][l][1];H[Z].setAttribute("cx",w),"rangeArea"!==x.config.chart.type||x.globals.comboCharts||(ne-=Math.abs(ne-M[Z][l+x.globals.series[Z].length][1])/2),null!==ne&&!isNaN(ne)&&ne<x.globals.gridHeight+N&&ne+N>0?(H[Z]&&H[Z].setAttribute("r",N),H[Z]&&H[Z].setAttribute("cy",ne)):H[Z]&&H[Z].setAttribute("r",0)}}this.moveXCrosshairs(w),m.fixedTooltip||this.moveTooltip(w,E||x.globals.gridHeight,N)}},{key:"moveStickyTooltipOverBars",value:function(l,u){var m=this.w,x=this.ttCtx,w=m.globals.columnSeries?m.globals.columnSeries.length:m.globals.series.length,E=w>=2&&w%2==0?Math.floor(w/2):Math.floor(w/2)+1;m.globals.isBarHorizontal&&(E=new Pr(this.ctx).getActiveConfigSeriesIndex("desc")+1);var M=m.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(E,"'] path[j='").concat(l,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(E,"'] path[j='").concat(l,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(E,"'] path[j='").concat(l,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(E,"'] path[j='").concat(l,"']"));M||"number"!=typeof u||(M=m.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(u,"'] path[j='").concat(l,"']")));var N=M?parseFloat(M.getAttribute("cx")):0,H=M?parseFloat(M.getAttribute("cy")):0,Z=M?parseFloat(M.getAttribute("barWidth")):0,J=x.getElGrid().getBoundingClientRect(),ne=M&&(M.classList.contains("apexcharts-candlestick-area")||M.classList.contains("apexcharts-boxPlot-area"));m.globals.isXNumeric?(M&&!ne&&(N-=w%2!=0?Z/2:0),M&&ne&&m.globals.comboCharts&&(N-=Z/2)):m.globals.isBarHorizontal||(N=x.xAxisTicksPositions[l-1]+x.dataPointsDividedWidth/2,isNaN(N)&&(N=x.xAxisTicksPositions[l]-x.dataPointsDividedWidth/2)),m.globals.isBarHorizontal?H-=x.tooltipRect.ttHeight:m.config.tooltip.followCursor?H=x.e.clientY-J.top-x.tooltipRect.ttHeight/2:H+x.tooltipRect.ttHeight+15>m.globals.gridHeight&&(H=m.globals.gridHeight),m.globals.isBarHorizontal||this.moveXCrosshairs(N),x.fixedTooltip||this.moveTooltip(N,H||m.globals.gridHeight)}}]),ve}(),Fa=function(){function ve(l){j(this,ve),this.w=l.w,this.ttCtx=l,this.ctx=l.ctx,this.tooltipPosition=new Ia(l)}return Be(ve,[{key:"drawDynamicPoints",value:function(){var l=this.w,u=new Dt(this.ctx),m=new Jn(this.ctx),x=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series");x=et(x),l.config.chart.stacked&&x.sort(function(J,ne){return parseFloat(J.getAttribute("data:realIndex"))-parseFloat(ne.getAttribute("data:realIndex"))});for(var w=0;w<x.length;w++){var E=x[w].querySelector(".apexcharts-series-markers-wrap");if(null!==E){var M=void 0,N="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==l.config.chart.type&&"area"!==l.config.chart.type||l.globals.comboCharts||l.config.tooltip.intersect||(N+=" no-pointer-events");var H=m.getMarkerConfig({cssClass:N,seriesIndex:Number(E.getAttribute("data:realIndex"))});(M=u.drawMarker(0,0,H)).node.setAttribute("default-marker-size",0);var Z=document.createElementNS(l.globals.SVGNS,"g");Z.classList.add("apexcharts-series-markers"),Z.appendChild(M.node),E.appendChild(Z)}}}},{key:"enlargeCurrentPoint",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,w=this.w;"bubble"!==w.config.chart.type&&this.newPointSize(l,u);var E=u.getAttribute("cx"),M=u.getAttribute("cy");if(null!==m&&null!==x&&(E=m,M=x),this.tooltipPosition.moveXCrosshairs(E),!this.fixedTooltip){if("radar"===w.config.chart.type){var N=this.ttCtx.getElGrid().getBoundingClientRect();E=this.ttCtx.e.clientX-N.left}this.tooltipPosition.moveTooltip(E,M,w.config.markers.hover.size)}}},{key:"enlargePoints",value:function(l){for(var u=this.w,m=this,x=this.ttCtx,w=l,E=u.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),M=u.config.markers.hover.size,N=0;N<E.length;N++){var H=E[N].getAttribute("rel"),Z=E[N].getAttribute("index");if(void 0===M&&(M=u.globals.markers.size[Z]+u.config.markers.hover.sizeOffset),w===parseInt(H,10)){m.newPointSize(w,E[N]);var J=E[N].getAttribute("cx"),ne=E[N].getAttribute("cy");m.tooltipPosition.moveXCrosshairs(J),x.fixedTooltip||m.tooltipPosition.moveTooltip(J,ne,M)}else m.oldPointSize(E[N])}}},{key:"newPointSize",value:function(l,u){var m=this.w,x=m.config.markers.hover.size,w=0===l?u.parentNode.firstChild:u.parentNode.lastChild;if("0"!==w.getAttribute("default-marker-size")){var E=parseInt(w.getAttribute("index"),10);void 0===x&&(x=m.globals.markers.size[E]+m.config.markers.hover.sizeOffset),x<0&&(x=0),w.setAttribute("r",x)}}},{key:"oldPointSize",value:function(l){var u=parseFloat(l.getAttribute("default-marker-size"));l.setAttribute("r",u)}},{key:"resetPointsSize",value:function(){for(var l=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),u=0;u<l.length;u++){var m=parseFloat(l[u].getAttribute("default-marker-size"));tt.isNumber(m)&&m>=0?l[u].setAttribute("r",m):l[u].setAttribute("r",0)}}}]),ve}(),Et=function(){function ve(l){j(this,ve),this.w=l.w;var u=this.w;this.ttCtx=l,this.isVerticalGroupedRangeBar=!u.globals.isBarHorizontal&&"rangeBar"===u.config.chart.type&&u.config.plotOptions.bar.rangeBarGroupRows}return Be(ve,[{key:"getAttr",value:function(l,u){return parseFloat(l.target.getAttribute(u))}},{key:"handleHeatTreeTooltip",value:function(l){var u=l.e,m=l.opt,x=l.x,w=l.y,M=this.ttCtx,N=this.w;if(u.target.classList.contains("apexcharts-".concat(l.type,"-rect"))){var H=this.getAttr(u,"i"),Z=this.getAttr(u,"j"),J=this.getAttr(u,"cx"),ne=this.getAttr(u,"cy"),fe=this.getAttr(u,"width"),ye=this.getAttr(u,"height");if(M.tooltipLabels.drawSeriesTexts({ttItems:m.ttItems,i:H,j:Z,shared:!1,e:u}),N.globals.capturedSeriesIndex=H,N.globals.capturedDataPointIndex=Z,x=J+M.tooltipRect.ttWidth/2+fe,w=ne+M.tooltipRect.ttHeight/2-ye/2,M.tooltipPosition.moveXCrosshairs(J+fe/2),x>N.globals.gridWidth/2&&(x=J-M.tooltipRect.ttWidth/2+fe),M.w.config.tooltip.followCursor){var De=N.globals.dom.elWrap.getBoundingClientRect();x=N.globals.clientX-De.left-(x>N.globals.gridWidth/2?M.tooltipRect.ttWidth:0),w=N.globals.clientY-De.top-(w>N.globals.gridHeight/2?M.tooltipRect.ttHeight:0)}}return{x,y:w}}},{key:"handleMarkerTooltip",value:function(l){var u,m,x=l.e,w=l.opt,E=l.x,M=l.y,N=this.w,H=this.ttCtx;if(x.target.classList.contains("apexcharts-marker")){var Z=parseInt(w.paths.getAttribute("cx"),10),J=parseInt(w.paths.getAttribute("cy"),10),ne=parseFloat(w.paths.getAttribute("val"));if(m=parseInt(w.paths.getAttribute("rel"),10),u=parseInt(w.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,H.intersect){var fe=tt.findAncestor(w.paths,"apexcharts-series");fe&&(u=parseInt(fe.getAttribute("data:realIndex"),10))}if(H.tooltipLabels.drawSeriesTexts({ttItems:w.ttItems,i:u,j:m,shared:!H.showOnIntersect&&N.config.tooltip.shared,e:x}),"mouseup"===x.type&&H.markerClick(x,u,m),N.globals.capturedSeriesIndex=u,N.globals.capturedDataPointIndex=m,E=Z,M=J+N.globals.translateY-1.4*H.tooltipRect.ttHeight,H.w.config.tooltip.followCursor){var ye=H.getElGrid().getBoundingClientRect();M=H.e.clientY+N.globals.translateY-ye.top}ne<0&&(M=J),H.marker.enlargeCurrentPoint(m,w.paths,E,M)}return{x:E,y:M}}},{key:"handleBarTooltip",value:function(l){var u,m,x=l.e,w=l.opt,E=this.w,M=this.ttCtx,N=M.getElTooltip(),H=0,Z=0,J=0,ne=this.getBarTooltipXY({e:x,opt:w}),fe=ne.barHeight,ye=ne.j;E.globals.capturedSeriesIndex=u=ne.i,E.globals.capturedDataPointIndex=ye,E.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||!E.config.tooltip.shared?(Z=ne.x,J=ne.y,m=Array.isArray(E.config.stroke.width)?E.config.stroke.width[u]:E.config.stroke.width,H=Z):E.globals.comboCharts||E.config.tooltip.shared||(H/=2),isNaN(J)&&(J=E.globals.svgHeight-M.tooltipRect.ttHeight);var De=parseInt(w.paths.parentNode.getAttribute("data:realIndex"),10),Pe=E.globals.isMultipleYAxis?E.config.yaxis[De]&&E.config.yaxis[De].reversed:E.config.yaxis[0].reversed;if(Z+M.tooltipRect.ttWidth>E.globals.gridWidth&&!Pe?Z-=M.tooltipRect.ttWidth:Z<0&&(Z=0),M.w.config.tooltip.followCursor){var Se=M.getElGrid().getBoundingClientRect();J=M.e.clientY-Se.top}null===M.tooltip&&(M.tooltip=E.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),E.config.tooltip.shared||M.tooltipPosition.moveXCrosshairs(E.globals.comboBarCount>0?H+m/2:H),!M.fixedTooltip&&(!E.config.tooltip.shared||E.globals.isBarHorizontal&&M.tooltipUtil.hasBars())&&(Pe&&(Z-=M.tooltipRect.ttWidth)<0&&(Z=0),!Pe||E.globals.isBarHorizontal&&M.tooltipUtil.hasBars()||(J=J+fe-2*(E.globals.series[u][ye]<0?fe:0)),J=J+E.globals.translateY-M.tooltipRect.ttHeight/2,N.style.left=Z+E.globals.translateX+"px",N.style.top=J+"px")}},{key:"getBarTooltipXY",value:function(l){var u=this,m=l.e,x=l.opt,w=this.w,E=null,M=this.ttCtx,N=0,H=0,Z=0,J=0,ne=0,fe=m.target.classList;if(fe.contains("apexcharts-bar-area")||fe.contains("apexcharts-candlestick-area")||fe.contains("apexcharts-boxPlot-area")||fe.contains("apexcharts-rangebar-area")){var ye=m.target,De=ye.getBoundingClientRect(),Pe=x.elGrid.getBoundingClientRect(),Se=De.height;ne=De.height;var ze=De.width,U=parseInt(ye.getAttribute("cx"),10),le=parseInt(ye.getAttribute("cy"),10);J=parseFloat(ye.getAttribute("barWidth"));var we="touchmove"===m.type?m.touches[0].clientX:m.clientX;E=parseInt(ye.getAttribute("j"),10),N=parseInt(ye.parentNode.getAttribute("rel"),10)-1;var Le=ye.getAttribute("data-range-y1"),$e=ye.getAttribute("data-range-y2");w.globals.comboCharts&&(N=parseInt(ye.parentNode.getAttribute("data:realIndex"),10));var mt=function(Xt){return w.globals.isXNumeric?U-ze/2:u.isVerticalGroupedRangeBar?U+ze/2:U-M.dataPointsDividedWidth+ze/2},$t=function(){return le-M.dataPointsDividedHeight+Se/2-M.tooltipRect.ttHeight/2};M.tooltipLabels.drawSeriesTexts({ttItems:x.ttItems,i:N,j:E,y1:Le?parseInt(Le,10):null,y2:$e?parseInt($e,10):null,shared:!M.showOnIntersect&&w.config.tooltip.shared,e:m}),w.config.tooltip.followCursor?w.globals.isBarHorizontal?(H=we-Pe.left+15,Z=$t()):(H=mt(),Z=m.clientY-Pe.top-M.tooltipRect.ttHeight/2-15):w.globals.isBarHorizontal?((H=U)<M.xyRatios.baseLineInvertedY&&(H=U-M.tooltipRect.ttWidth),Z=$t()):(H=mt(),Z=le)}return{x:H,y:Z,barHeight:ne,barWidth:J,i:N,j:E}}}]),ve}(),je=function(){function ve(l){j(this,ve),this.w=l.w,this.ttCtx=l}return Be(ve,[{key:"drawXaxisTooltip",value:function(){var l=this.w,u=this.ttCtx,m="bottom"===l.config.xaxis.position;u.xaxisOffY=m?l.globals.gridHeight+1:-l.globals.xAxisHeight-l.config.xaxis.axisTicks.height+3;var x=m?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",w=l.globals.dom.elWrap;u.isXAxisTooltipEnabled&&null===l.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(u.xaxisTooltip=document.createElement("div"),u.xaxisTooltip.setAttribute("class",x+" apexcharts-theme-"+l.config.tooltip.theme),w.appendChild(u.xaxisTooltip),u.xaxisTooltipText=document.createElement("div"),u.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),u.xaxisTooltipText.style.fontFamily=l.config.xaxis.tooltip.style.fontFamily||l.config.chart.fontFamily,u.xaxisTooltipText.style.fontSize=l.config.xaxis.tooltip.style.fontSize,u.xaxisTooltip.appendChild(u.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var l=this.w,u=this.ttCtx,m=0;m<l.config.yaxis.length;m++){var x=l.config.yaxis[m].opposite||l.config.yaxis[m].crosshairs.opposite;u.yaxisOffX=x?l.globals.gridWidth+1:1;var w="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(m,x?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),E=l.globals.dom.elWrap;null===l.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(m))&&(u.yaxisTooltip=document.createElement("div"),u.yaxisTooltip.setAttribute("class",w+" apexcharts-theme-"+l.config.tooltip.theme),E.appendChild(u.yaxisTooltip),0===m&&(u.yaxisTooltipText=[]),u.yaxisTooltipText[m]=document.createElement("div"),u.yaxisTooltipText[m].classList.add("apexcharts-yaxistooltip-text"),u.yaxisTooltip.appendChild(u.yaxisTooltipText[m]))}}},{key:"setXCrosshairWidth",value:function(){var l=this.w,u=this.ttCtx,m=u.getElXCrosshairs();if(u.xcrosshairsWidth=parseInt(l.config.xaxis.crosshairs.width,10),l.globals.comboCharts){var x=l.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==x&&"barWidth"===l.config.xaxis.crosshairs.width){var w=parseFloat(x.getAttribute("barWidth"));u.xcrosshairsWidth=w}else"tickWidth"===l.config.xaxis.crosshairs.width&&(u.xcrosshairsWidth=l.globals.gridWidth/l.globals.labels.length)}else if("tickWidth"===l.config.xaxis.crosshairs.width)u.xcrosshairsWidth=l.globals.gridWidth/l.globals.labels.length;else if("barWidth"===l.config.xaxis.crosshairs.width){var N=l.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==N){var H=parseFloat(N.getAttribute("barWidth"));u.xcrosshairsWidth=H}else u.xcrosshairsWidth=1}l.globals.isBarHorizontal&&(u.xcrosshairsWidth=0),null!==m&&u.xcrosshairsWidth>0&&m.setAttribute("width",u.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var l=this.w,u=this.ttCtx;u.ycrosshairs=l.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),u.ycrosshairsHidden=l.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(l,u,m){var x=this.ttCtx,w=this.w,E=w.globals.yLabelFormatters[l];if(x.yaxisTooltips[l]){var M=x.getElGrid().getBoundingClientRect(),Z=w.globals.minYArr[l]+(w.globals.maxYArr[l]-w.globals.minYArr[l]-(u-M.top)*m.yRatio[l]);x.tooltipPosition.moveYCrosshairs(u-M.top),x.yaxisTooltipText[l].innerHTML=E(Z),x.tooltipPosition.moveYAxisTooltip(l)}}}]),ve}(),Je=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w;var u=this.w;this.tConfig=u.config.tooltip,this.tooltipUtil=new Aa(this),this.tooltipLabels=new fa(this),this.tooltipPosition=new Ia(this),this.marker=new Fa(this),this.intersect=new Et(this),this.axesTooltip=new je(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!u.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return Be(ve,[{key:"getElTooltip",value:function(l){return l||(l=this),l.w.globals.dom.baseEl?l.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(l){var u=this.w;this.xyRatios=l,this.isXAxisTooltipEnabled=u.config.xaxis.tooltip.enabled&&u.globals.axisCharts,this.yaxisTooltips=u.config.yaxis.map(function(E,M){return!!(E.show&&E.tooltip.enabled&&u.globals.axisCharts)}),this.allTooltipSeriesGroups=[],u.globals.axisCharts||(this.showTooltipTitle=!1);var m=document.createElement("div");if(m.classList.add("apexcharts-tooltip"),u.config.tooltip.cssClass&&m.classList.add(u.config.tooltip.cssClass),m.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),u.globals.dom.elWrap.appendChild(m),u.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var x=new Ma(this.ctx);this.xAxisTicksPositions=x.getXAxisTicksPositions()}if(!u.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==u.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==u.config.markers.size&&0!==u.globals.markers.largestSize||this.marker.drawDynamicPoints(this),u.globals.collapsedSeries.length!==u.globals.series.length){this.dataPointsDividedHeight=u.globals.gridHeight/u.globals.dataPoints,this.dataPointsDividedWidth=u.globals.gridWidth/u.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||u.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,m.appendChild(this.tooltipTitle));var w=u.globals.series.length;(u.globals.xyCharts||u.globals.comboCharts)&&this.tConfig.shared&&(w=this.showOnIntersect?1:u.globals.series.length),this.legendLabels=u.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(w),this.addSVGEvents()}}},{key:"createTTElements",value:function(l){for(var u=this,m=this.w,x=[],w=this.getElTooltip(),E=function(N){var H=document.createElement("div");H.classList.add("apexcharts-tooltip-series-group"),H.style.order=m.config.tooltip.inverseOrder?l-N:N+1,u.tConfig.shared&&u.tConfig.enabledOnSeries&&Array.isArray(u.tConfig.enabledOnSeries)&&u.tConfig.enabledOnSeries.indexOf(N)<0&&H.classList.add("apexcharts-tooltip-series-group-hidden");var Z=document.createElement("span");Z.classList.add("apexcharts-tooltip-marker"),Z.style.backgroundColor=m.globals.colors[N],H.appendChild(Z);var J=document.createElement("div");J.classList.add("apexcharts-tooltip-text"),J.style.fontFamily=u.tConfig.style.fontFamily||m.config.chart.fontFamily,J.style.fontSize=u.tConfig.style.fontSize,["y","goals","z"].forEach(function(ne){var fe=document.createElement("div");fe.classList.add("apexcharts-tooltip-".concat(ne,"-group"));var ye=document.createElement("span");ye.classList.add("apexcharts-tooltip-text-".concat(ne,"-label")),fe.appendChild(ye);var De=document.createElement("span");De.classList.add("apexcharts-tooltip-text-".concat(ne,"-value")),fe.appendChild(De),J.appendChild(fe)}),H.appendChild(J),w.appendChild(H),x.push(H)},M=0;M<l;M++)E(M);return x}},{key:"addSVGEvents",value:function(){var l=this.w,u=l.config.chart.type,m=this.getElTooltip(),x=!("bar"!==u&&"candlestick"!==u&&"boxPlot"!==u&&"rangeBar"!==u),w="area"===u||"line"===u||"scatter"===u||"bubble"===u||"radar"===u,E=l.globals.dom.Paper.node,M=this.getElGrid();M&&(this.seriesBound=M.getBoundingClientRect());var N,H=[],Z=[],J={hoverArea:E,elGrid:M,tooltipEl:m,tooltipY:H,tooltipX:Z,ttItems:this.ttItems};if(l.globals.axisCharts&&(w?N=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):x?N=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==u&&"treemap"!==u||(N=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),N&&N.length))for(var ne=0;ne<N.length;ne++)H.push(N[ne].getAttribute("cy")),Z.push(N[ne].getAttribute("cx"));if(l.globals.xyCharts&&!this.showOnIntersect||l.globals.comboCharts&&!this.showOnIntersect||x&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([E],J);else if(x&&!l.globals.comboCharts||w&&this.showOnIntersect)this.addDatapointEventsListeners(J);else if(!l.globals.axisCharts||"heatmap"===u||"treemap"===u){var fe=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(fe,J)}if(this.showOnIntersect){var ye=l.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");ye.length>0&&this.addPathsEventListeners(ye,J),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(J)}}},{key:"drawFixedTooltipRect",value:function(){var l=this.w,u=this.getElTooltip(),m=u.getBoundingClientRect(),x=m.width+10,w=m.height+10,E=this.tConfig.fixed.offsetX,M=this.tConfig.fixed.offsetY,N=this.tConfig.fixed.position.toLowerCase();return N.indexOf("right")>-1&&(E=E+l.globals.svgWidth-x+10),N.indexOf("bottom")>-1&&(M=M+l.globals.svgHeight-w-10),u.style.left=E+"px",u.style.top=M+"px",{x:E,y:M,ttWidth:x,ttHeight:w}}},{key:"addDatapointEventsListeners",value:function(l){var u=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(u,l)}},{key:"addPathsEventListeners",value:function(l,u){for(var m=this,x=function(E){var M={paths:l[E],tooltipEl:u.tooltipEl,tooltipY:u.tooltipY,tooltipX:u.tooltipX,elGrid:u.elGrid,hoverArea:u.hoverArea,ttItems:u.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(N){return l[E].addEventListener(N,m.onSeriesHover.bind(m,M),{capture:!1,passive:!0})})},w=0;w<l.length;w++)x(w)}},{key:"onSeriesHover",value:function(l,u){var m=this,x=Date.now()-this.lastHoverTime;x>=100?this.seriesHover(l,u):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){m.seriesHover(l,u)},100-x))}},{key:"seriesHover",value:function(l,u){var m=this;this.lastHoverTime=Date.now();var x=[],w=this.w;w.config.chart.group&&(x=this.ctx.getGroupedCharts()),w.globals.axisCharts&&(w.globals.minX===-1/0&&w.globals.maxX===1/0||0===w.globals.dataPoints)||(x.length?x.forEach(function(E){var M=m.getElTooltip(E);E.w.globals.minX===m.w.globals.minX&&E.w.globals.maxX===m.w.globals.maxX&&E.w.globals.tooltip.seriesHoverByContext({chartCtx:E,ttCtx:E.w.globals.tooltip,opt:{paths:l.paths,tooltipEl:M,tooltipY:l.tooltipY,tooltipX:l.tooltipX,elGrid:l.elGrid,hoverArea:l.hoverArea,ttItems:E.w.globals.tooltip.ttItems},e:u})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:l,e:u}))}},{key:"seriesHoverByContext",value:function(l){var u=l.chartCtx,m=l.ttCtx,x=l.opt,w=l.e,E=u.w,M=this.getElTooltip();M&&(m.tooltipRect={x:0,y:0,ttWidth:M.getBoundingClientRect().width,ttHeight:M.getBoundingClientRect().height},m.e=w,m.tooltipUtil.hasBars()&&!E.globals.comboCharts&&!m.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Pr(u).toggleSeriesOnHover(w,w.target.parentNode),m.fixedTooltip&&m.drawFixedTooltipRect(),E.globals.axisCharts?m.axisChartsTooltips({e:w,opt:x,tooltipRect:m.tooltipRect}):m.nonAxisChartsTooltips({e:w,opt:x,tooltipRect:m.tooltipRect}))}},{key:"axisChartsTooltips",value:function(l){var u,m,x=l.e,w=l.opt,E=this.w,M=w.elGrid.getBoundingClientRect(),N="touchmove"===x.type?x.touches[0].clientX:x.clientX,H="touchmove"===x.type?x.touches[0].clientY:x.clientY;if(this.clientY=H,this.clientX=N,E.globals.capturedSeriesIndex=-1,E.globals.capturedDataPointIndex=-1,H<M.top||H>M.top+M.height)this.handleMouseOut(w);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!E.config.tooltip.shared){var Z=parseInt(w.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(Z)<0)return void this.handleMouseOut(w)}var J=this.getElTooltip(),ne=this.getElXCrosshairs(),fe=E.globals.xyCharts||"bar"===E.config.chart.type&&!E.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||E.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===x.type||"touchmove"===x.type||"mouseup"===x.type){if(E.globals.collapsedSeries.length+E.globals.ancillaryCollapsedSeries.length===E.globals.series.length)return;null!==ne&&ne.classList.add("apexcharts-active");var ye=this.yaxisTooltips.filter(function(Se){return!0===Se});if(null!==this.ycrosshairs&&ye.length&&this.ycrosshairs.classList.add("apexcharts-active"),fe&&!this.showOnIntersect)this.handleStickyTooltip(x,N,H,w);else if("heatmap"===E.config.chart.type||"treemap"===E.config.chart.type){var De=this.intersect.handleHeatTreeTooltip({e:x,opt:w,x:u,y:m,type:E.config.chart.type});m=De.y,J.style.left=(u=De.x)+"px",J.style.top=m+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:x,opt:w}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:x,opt:w,x:u,y:m});if(this.yaxisTooltips.length)for(var Pe=0;Pe<E.config.yaxis.length;Pe++)this.axesTooltip.drawYaxisTooltipText(Pe,H,this.xyRatios);w.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==x.type&&"touchend"!==x.type||this.handleMouseOut(w)}}},{key:"nonAxisChartsTooltips",value:function(l){var u=l.e,m=l.opt,x=l.tooltipRect,w=this.w,E=m.paths.getAttribute("rel"),M=this.getElTooltip(),N=w.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===u.type||"touchmove"===u.type){M.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:m.ttItems,i:parseInt(E,10)-1,shared:!1});var Z=w.globals.clientY-N.top-x.ttHeight-10;if(M.style.left=w.globals.clientX-N.left-x.ttWidth/2+"px",M.style.top=Z+"px",w.config.legend.tooltipHoverFormatter){var J=E-1,ne=(0,w.config.legend.tooltipHoverFormatter)(this.legendLabels[J].getAttribute("data:default-text"),{seriesIndex:J,dataPointIndex:J,w});this.legendLabels[J].innerHTML=ne}}else"mouseout"!==u.type&&"touchend"!==u.type||(M.classList.remove("apexcharts-active"),w.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(fe){var ye=fe.getAttribute("data:default-text");fe.innerHTML=decodeURIComponent(ye)}))}},{key:"handleStickyTooltip",value:function(l,u,m,x){var w=this.w,E=this.tooltipUtil.getNearestValues({context:this,hoverArea:x.hoverArea,elGrid:x.elGrid,clientX:u,clientY:m}),M=E.j,N=E.capturedSeries;w.globals.collapsedSeriesIndices.includes(N)&&(N=null);var H=x.elGrid.getBoundingClientRect();if(E.hoverX<0||E.hoverX>H.width)this.handleMouseOut(x);else if(null!==N)this.handleStickyCapturedSeries(l,N,x,M);else if(this.tooltipUtil.isXoverlap(M)||w.globals.isBarHorizontal){var Z=w.globals.series.findIndex(function(J,ne){return!w.globals.collapsedSeriesIndices.includes(ne)});this.create(l,this,Z,M,x.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(l,u,m,x){var w=this.w;if(this.tConfig.shared||null!==w.globals.series[u][x]){if(void 0!==w.globals.series[u][x])this.tConfig.shared&&this.tooltipUtil.isXoverlap(x)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(l,this,u,x,m.ttItems):this.create(l,this,u,x,m.ttItems,!1);else if(this.tooltipUtil.isXoverlap(x)){var E=w.globals.series.findIndex(function(M,N){return!w.globals.collapsedSeriesIndices.includes(N)});this.create(l,this,E,x,m.ttItems)}}else this.handleMouseOut(m)}},{key:"deactivateHoverFilter",value:function(){for(var l=this.w,u=new Dt(this.ctx),m=l.globals.dom.Paper.select(".apexcharts-bar-area"),x=0;x<m.length;x++)u.pathMouseLeave(m[x])}},{key:"handleMouseOut",value:function(l){var u=this.w,m=this.getElXCrosshairs();if(l.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==u.config.chart.type&&this.marker.resetPointsSize(),null!==m&&m.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=u.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var x=0;x<this.yaxisTTEls.length;x++)this.yaxisTTEls[x].classList.remove("apexcharts-active")}u.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(w){var E=w.getAttribute("data:default-text");w.innerHTML=decodeURIComponent(E)})}},{key:"markerClick",value:function(l,u,m){var x=this.w;"function"==typeof x.config.chart.events.markerClick&&x.config.chart.events.markerClick(l,this.ctx,{seriesIndex:u,dataPointIndex:m,w:x}),this.ctx.events.fireEvent("markerClick",[l,this.ctx,{seriesIndex:u,dataPointIndex:m,w:x}])}},{key:"create",value:function(l,u,m,x,w){var E,M,N,H,Z,J,ne,fe,ye,De,Pe,Se,ze,U,le,we,Le=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,$e=this.w,mt=u;"mouseup"===l.type&&this.markerClick(l,m,x),null===Le&&(Le=this.tConfig.shared);var $t=this.tooltipUtil.hasMarkers(m),Xt=this.tooltipUtil.getElBars();if($e.config.legend.tooltipHoverFormatter){var Li=$e.config.legend.tooltipHoverFormatter,Ji=Array.from(this.legendLabels);Ji.forEach(function(Is){var va=Is.getAttribute("data:default-text");Is.innerHTML=decodeURIComponent(va)});for(var ln=0;ln<Ji.length;ln++){var Un=Ji[ln],cr=parseInt(Un.getAttribute("i"),10),Wr=decodeURIComponent(Un.getAttribute("data:default-text")),pa=Li(Wr,{seriesIndex:Le?cr:m,dataPointIndex:x,w:$e});if(Le)Un.innerHTML=$e.globals.collapsedSeriesIndices.indexOf(cr)<0?pa:Wr;else if(Un.innerHTML=cr===m?pa:Wr,m===cr)break}}var la=Ze(Ze({ttItems:w,i:m,j:x},void 0!==(null===(E=$e.globals.seriesRange)||void 0===E||null===(M=E[m])||void 0===M||null===(N=M[x])||void 0===N||null===(H=N.y[0])||void 0===H?void 0:H.y1)&&{y1:null===(Z=$e.globals.seriesRange)||void 0===Z||null===(J=Z[m])||void 0===J||null===(ne=J[x])||void 0===ne||null===(fe=ne.y[0])||void 0===fe?void 0:fe.y1}),void 0!==(null===(ye=$e.globals.seriesRange)||void 0===ye||null===(De=ye[m])||void 0===De||null===(Pe=De[x])||void 0===Pe||null===(Se=Pe.y[0])||void 0===Se?void 0:Se.y2)&&{y2:null===(ze=$e.globals.seriesRange)||void 0===ze||null===(U=ze[m])||void 0===U||null===(le=U[x])||void 0===le||null===(we=le.y[0])||void 0===we?void 0:we.y2});if(Le){if(mt.tooltipLabels.drawSeriesTexts(Ze(Ze({},la),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),$t)$e.globals.markers.largestSize>0?mt.marker.enlargePoints(x):mt.tooltipPosition.moveDynamicPointsOnHover(x);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(Xt),this.barSeriesHeight>0)){var Ta=new Dt(this.ctx),es=$e.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(x,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(x,m);for(var ms=0;ms<es.length;ms++)Ta.pathMouseEnter(es[ms])}}else mt.tooltipLabels.drawSeriesTexts(Ze({shared:!1},la)),this.tooltipUtil.hasBars()&&mt.tooltipPosition.moveStickyTooltipOverBars(x,m),$t&&mt.tooltipPosition.moveMarkers(m,x)}}]),ve}(),At=function(){function ve(l){j(this,ve),this.w=l.w,this.barCtx=l,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return Be(ve,[{key:"handleBarDataLabels",value:function(l){var u=l.x,m=l.y,x=l.y1,w=l.y2,E=l.i,M=l.j,N=l.realIndex,H=l.groupIndex,Z=l.series,J=l.barHeight,ne=l.barWidth,fe=l.barXPosition,ye=l.barYPosition,De=l.visibleSeries,Pe=l.renderedPath,Se=this.w,ze=new Dt(this.barCtx.ctx),U=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[N]:this.barCtx.strokeWidth,le=u+parseFloat(ne*De),we=m+parseFloat(J*De);Se.globals.isXNumeric&&!Se.globals.isBarHorizontal&&(le=u+parseFloat(ne*(De+1)),we=m+parseFloat(J*(De+1))-U);var Le,Xt,$e=null,mt=u,$t=m,Li=Se.config.dataLabels,Ji=this.barCtx.barOptions.dataLabels,ln=this.barCtx.barOptions.dataLabels.total;void 0!==ye&&this.barCtx.isRangeBar&&(we=ye,$t=ye),void 0!==fe&&this.barCtx.isVerticalGroupedRangeBar&&(le=fe,mt=fe);var Un=Li.offsetX,cr=Li.offsetY,Wr={width:0,height:0};Se.config.dataLabels.enabled&&(Wr=ze.getTextRects(Se.globals.yLabelFormatters[0](this.barCtx.series[E][M]),parseFloat(Li.style.fontSize)));var la={x:u,y:m,i:E,j:M,realIndex:N,groupIndex:H||-1,renderedPath:Pe,bcx:le,bcy:we,barHeight:J,barWidth:ne,textRects:Wr,strokeWidth:U,dataLabelsX:mt,dataLabelsY:$t,dataLabelsConfig:Li,barDataLabelsConfig:Ji,barTotalDataLabelsConfig:ln,offX:Un,offY:cr};return Xt=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(la):this.calculateColumnsDataLabelsPosition(la),Pe.attr({cy:Xt.bcy,cx:Xt.bcx,j:M,val:Z[E][M],barHeight:J,barWidth:ne}),Le=this.drawCalculatedDataLabels({x:Xt.dataLabelsX,y:Xt.dataLabelsY,val:this.barCtx.isRangeBar?[x,w]:Z[E][M],i:N,j:M,barWidth:ne,barHeight:J,textRects:Wr,dataLabelsConfig:Li}),Se.config.chart.stacked&&ln.enabled&&($e=this.drawTotalDataLabels({x:Xt.totalDataLabelsX,y:Xt.totalDataLabelsY,barWidth:ne,barHeight:J,realIndex:N,textAnchor:Xt.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:N,j:M}),dataLabelsConfig:Li,barTotalDataLabelsConfig:ln})),{dataLabels:Le,totalDataLabels:$e}}},{key:"getStackedTotalDataLabel",value:function(l){var u=l.realIndex,m=l.j,x=this.w,w=this.barCtx.stackedSeriesTotals[m];return this.totalFormatter&&(w=this.totalFormatter(w,Ze(Ze({},x),{},{seriesIndex:u,dataPointIndex:m,w:x}))),w}},{key:"calculateColumnsDataLabelsPosition",value:function(l){var u,m,x=this.w,w=l.i,E=l.j,M=l.realIndex,N=l.groupIndex,H=l.y,Z=l.bcx,J=l.barWidth,ne=l.barHeight,fe=l.textRects,ye=l.dataLabelsX,De=l.dataLabelsY,Pe=l.dataLabelsConfig,Se=l.barDataLabelsConfig,ze=l.barTotalDataLabelsConfig,U=l.strokeWidth,le=l.offX,we=l.offY;ne=Math.abs(ne);var Le="vertical"===x.config.plotOptions.bar.dataLabels.orientation,$e=this.barCtx.barHelpers.getZeroValueEncounters({i:w,j:E}).zeroEncounters;Z=Z-U/2+(-1!==N?N*J:0),this.barCtx.isVerticalGroupedRangeBar?ye+=J/2:(ye=x.globals.isXNumeric?Z-J/2+le:Z-x.globals.gridWidth/x.globals.dataPoints+J/2+le,$e>0&&x.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(ye-=J*$e)),Le&&(ye=ye+fe.height/2-U/2-2);var $t=this.barCtx.series[w][E]<0,Xt=H;switch(this.barCtx.isReversed&&(Xt=H-ne+($t?2*ne:0),H-=ne),Se.position){case"center":De=Le?$t?Xt-ne/2+we:Xt+ne/2-we:$t?Xt-ne/2+fe.height/2+we:Xt+ne/2+fe.height/2-we;break;case"bottom":De=Le?$t?Xt-ne+we:Xt+ne-we:$t?Xt-ne+fe.height+U+we:Xt+ne-fe.height/2+U-we;break;case"top":De=Le?$t?Xt+we:Xt-we:$t?Xt-fe.height/2-we:Xt+fe.height+we}if(this.barCtx.lastActiveBarSerieIndex===M&&ze.enabled){var Li=new Dt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:M,j:E}),Pe.fontSize);u=$t?Xt-Li.height/2-we-ze.offsetY+18:Xt+Li.height+we+ze.offsetY-18,m=ye+ze.offsetX}return x.config.chart.stacked||(De<0?De=0+U:De+fe.height/3>x.globals.gridHeight&&(De=x.globals.gridHeight-U)),{bcx:Z,bcy:H,dataLabelsX:ye,dataLabelsY:De,totalDataLabelsX:m,totalDataLabelsY:u,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(l){var u=this.w,m=l.x,x=l.i,w=l.j,E=l.realIndex,M=l.groupIndex,N=l.bcy,H=l.barHeight,Z=l.barWidth,J=l.textRects,ne=l.dataLabelsX,fe=l.strokeWidth,ye=l.dataLabelsConfig,De=l.barDataLabelsConfig,Pe=l.barTotalDataLabelsConfig,Se=l.offX,ze=l.offY,U=u.globals.gridHeight/u.globals.dataPoints;Z=Math.abs(Z);var le,we,Le=(N+=-1!==M?M*H:0)-(this.barCtx.isRangeBar?0:U)+H/2+J.height/2+ze-3,$e="start",mt=this.barCtx.series[x][w]<0,$t=m;switch(this.barCtx.isReversed&&($t=m+Z-(mt?2*Z:0),m=u.globals.gridWidth-Z),De.position){case"center":ne=mt?$t+Z/2-Se:Math.max(J.width/2,$t-Z/2)+Se;break;case"bottom":ne=mt?$t+Z-fe-Math.round(J.width/2)-Se:$t-Z+fe+Math.round(J.width/2)+Se;break;case"top":ne=mt?$t-fe+Math.round(J.width/2)-Se:$t-fe-Math.round(J.width/2)+Se}if(this.barCtx.lastActiveBarSerieIndex===E&&Pe.enabled){var Xt=new Dt(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:E,j:w}),ye.fontSize);mt?(le=$t-fe+Math.round(Xt.width/2)-Se-Pe.offsetX-15,$e="end"):le=$t-fe-Math.round(Xt.width/2)+Se+Pe.offsetX+15,we=Le+Pe.offsetY}return u.config.chart.stacked||(ne<0?ne=ne+J.width+fe:ne+J.width/2>u.globals.gridWidth&&(ne=u.globals.gridWidth-J.width-fe)),{bcx:m,bcy:N,dataLabelsX:ne,dataLabelsY:Le,totalDataLabelsX:le,totalDataLabelsY:we,totalDataLabelsAnchor:$e}}},{key:"drawCalculatedDataLabels",value:function(l){var u=l.x,m=l.y,x=l.val,w=l.i,E=l.j,M=l.textRects,N=l.barHeight,H=l.barWidth,Z=l.dataLabelsConfig,J=this.w,ne="rotate(0)";"vertical"===J.config.plotOptions.bar.dataLabels.orientation&&(ne="rotate(-90, ".concat(u,", ").concat(m,")"));var fe=new jr(this.barCtx.ctx),ye=new Dt(this.barCtx.ctx),De=Z.formatter,Pe=null,Se=J.globals.collapsedSeriesIndices.indexOf(w)>-1;if(Z.enabled&&!Se){Pe=ye.group({class:"apexcharts-data-labels",transform:ne});var ze="";void 0!==x&&(ze=De(x,Ze(Ze({},J),{},{seriesIndex:w,dataPointIndex:E,w:J}))),!x&&J.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(ze="");var U=J.globals.series[w][E]<0,le=J.config.plotOptions.bar.dataLabels.position;"vertical"===J.config.plotOptions.bar.dataLabels.orientation&&("top"===le&&(Z.textAnchor=U?"end":"start"),"center"===le&&(Z.textAnchor="middle"),"bottom"===le&&(Z.textAnchor=U?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&H<ye.getTextRects(ze,parseFloat(Z.style.fontSize)).width&&(ze=""),J.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?M.width/1.6>Math.abs(H)&&(ze=""):M.height/1.6>Math.abs(N)&&(ze=""));var we=Ze({},Z);this.barCtx.isHorizontal&&x<0&&("start"===Z.textAnchor?we.textAnchor="end":"end"===Z.textAnchor&&(we.textAnchor="start")),fe.plotDataLabelsText({x:u,y:m,text:ze,i:w,j:E,parent:Pe,dataLabelsConfig:we,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return Pe}},{key:"drawTotalDataLabels",value:function(l){var u,m=l.x,x=l.y,w=l.val,E=l.barWidth,M=l.barHeight,N=l.realIndex,H=l.textAnchor,Z=l.barTotalDataLabelsConfig,J=this.w,ne=new Dt(this.barCtx.ctx);return Z.enabled&&void 0!==m&&void 0!==x&&this.barCtx.lastActiveBarSerieIndex===N&&(u=ne.drawText({x:m-(!J.globals.isBarHorizontal&&J.globals.seriesGroups.length?E/J.globals.seriesGroups.length:0),y:x-(J.globals.isBarHorizontal&&J.globals.seriesGroups.length?M/J.globals.seriesGroups.length:0),foreColor:Z.style.color,text:w,textAnchor:H,fontFamily:Z.style.fontFamily,fontSize:Z.style.fontSize,fontWeight:Z.style.fontWeight})),u}}]),ve}(),kt=function(){function ve(l){j(this,ve),this.w=l.w,this.barCtx=l}return Be(ve,[{key:"initVariables",value:function(l){var u=this.w;this.barCtx.series=l,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var m=0;m<l.length;m++)if(l[m].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=l[m].length),u.globals.isXNumeric)for(var x=0;x<l[m].length;x++)u.globals.seriesX[m][x]>u.globals.minX&&u.globals.seriesX[m][x]<u.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=u.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],u.globals.comboCharts||this.checkZeroSeries({series:l})}},{key:"initialPositions",value:function(){var l,u,m,x,w,E,M,N,H=this.w,Z=H.globals.dataPoints;this.barCtx.isRangeBar&&(Z=H.globals.labels.length);var J=this.barCtx.seriesLen;if(H.config.plotOptions.bar.rangeBarGroupRows&&(J=1),this.barCtx.isHorizontal)w=(m=H.globals.gridHeight/Z)/J,H.globals.isXNumeric&&(w=(m=H.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),w=w*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(w=parseInt(this.barCtx.barOptions.barHeight,10)),N=this.barCtx.baseLineInvertedY+H.globals.padHorizontal+(this.barCtx.isReversed?H.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(N=H.globals.gridWidth/2),u=(m-w*this.barCtx.seriesLen)/2;else{if(x=H.globals.gridWidth/this.barCtx.visibleItems,H.config.xaxis.convertedCatToNumeric&&(x=H.globals.gridWidth/H.globals.dataPoints),E=x/J*parseInt(this.barCtx.barOptions.columnWidth,10)/100,H.globals.isXNumeric){var ne=this.barCtx.xRatio;H.globals.minXDiff&&.5!==H.globals.minXDiff&&H.globals.minXDiff/ne>0&&(x=H.globals.minXDiff/ne),(E=x/J*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(E=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(E=parseInt(this.barCtx.barOptions.columnWidth,10)),M=H.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?H.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),l=H.globals.padHorizontal+(x-E*this.barCtx.seriesLen)/2}return H.globals.barHeight=w,H.globals.barWidth=E,{x:l,y:u,yDivision:m,xDivision:x,barHeight:w,barWidth:E,zeroH:M,zeroW:N}}},{key:"initializeStackedPrevVars",value:function(l){var u=l.w;u.globals.hasSeriesGroups?u.globals.seriesGroups.forEach(function(m){l[m]||(l[m]={}),l[m].prevY=[],l[m].prevX=[],l[m].prevYF=[],l[m].prevXF=[],l[m].prevYVal=[],l[m].prevXVal=[]}):(l.prevY=[],l.prevX=[],l.prevYF=[],l.prevXF=[],l.prevYVal=[],l.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(l){var u=l.w;u.globals.hasSeriesGroups?u.globals.seriesGroups.forEach(function(m){l[m]||(l[m]={}),l[m].xArrj=[],l[m].xArrjF=[],l[m].xArrjVal=[],l[m].yArrj=[],l[m].yArrjF=[],l[m].yArrjVal=[]}):(l.xArrj=[],l.xArrjF=[],l.xArrjVal=[],l.yArrj=[],l.yArrjF=[],l.yArrjVal=[])}},{key:"getPathFillColor",value:function(l,u,m,x){var w,E,M,N,H=this.w,Z=new In(this.barCtx.ctx),J=null,ne=this.barCtx.barOptions.distributed?m:u;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(fe){l[u][m]>=fe.from&&l[u][m]<=fe.to&&(J=fe.color)}),H.config.series[u].data[m]&&H.config.series[u].data[m].fillColor&&(J=H.config.series[u].data[m].fillColor),Z.fillPath({seriesNumber:this.barCtx.barOptions.distributed?ne:x,dataPointIndex:m,color:J,value:l[u][m],fillConfig:null===(w=H.config.series[u].data[m])||void 0===w?void 0:w.fill,fillType:null!==(E=H.config.series[u].data[m])&&void 0!==E&&null!==(M=E.fill)&&void 0!==M&&M.type?null===(N=H.config.series[u].data[m])||void 0===N?void 0:N.fill.type:Array.isArray(H.config.fill.type)?H.config.fill.type[u]:H.config.fill.type})}},{key:"getStrokeWidth",value:function(l,u,m){var x=0,w=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[l][u],w.config.stroke.show&&(this.barCtx.isNullValue||(x=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[m]:this.barCtx.strokeWidth)),x}},{key:"shouldApplyRadius",value:function(l){var u=this.w,m=!1;return u.config.plotOptions.bar.borderRadius>0&&(u.config.chart.stacked&&"last"===u.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===l&&(m=!0):m=!0),m}},{key:"barBackground",value:function(l){var u=l.j,m=l.i,x=l.x1,w=l.x2,E=l.y1,M=l.y2,N=l.elSeries,H=this.w,Z=new Dt(this.barCtx.ctx),J=new Pr(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&J===m){u>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(u%=this.barCtx.barOptions.colors.backgroundBarColors.length);var fe=Z.drawRect(void 0!==x?x:0,void 0!==E?E:0,void 0!==w?w:H.globals.gridWidth,void 0!==M?M:H.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[u],this.barCtx.barOptions.colors.backgroundBarOpacity);N.add(fe),fe.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(l){var u,m=l.barWidth,x=l.barXPosition,w=l.y1,E=l.y2,M=l.strokeWidth,N=l.seriesGroup,H=l.realIndex,Z=l.i,J=l.j,ne=l.w,fe=new Dt(this.barCtx.ctx);(M=Array.isArray(M)?M[H]:M)||(M=0);var ye=m,De=x;null!==(u=ne.config.series[H].data[J])&&void 0!==u&&u.columnWidthOffset&&(De=x-ne.config.series[H].data[J].columnWidthOffset/2,ye=m+ne.config.series[H].data[J].columnWidthOffset);var Pe=De,Se=De+ye;E+=.001;var ze=fe.move(Pe,w+=.001),U=fe.move(Pe,w),le=fe.line(Se-M,w);if(ne.globals.previousPaths.length>0&&(U=this.barCtx.getPreviousPath(H,J,!1)),ze=ze+fe.line(Pe,E)+fe.line(Se-M,E)+fe.line(Se-M,w)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),U=U+fe.line(Pe,w)+le+le+le+le+le+fe.line(Pe,w)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(H)&&(ze=fe.roundPathCorners(ze,ne.config.plotOptions.bar.borderRadius)),ne.config.chart.stacked){var we=this.barCtx;ne.globals.hasSeriesGroups&&N&&(we=this.barCtx[N]),we.yArrj.push(E),we.yArrjF.push(Math.abs(w-E)),we.yArrjVal.push(this.barCtx.series[Z][J])}return{pathTo:ze,pathFrom:U}}},{key:"getBarpaths",value:function(l){var u,m=l.barYPosition,x=l.barHeight,w=l.x1,E=l.x2,M=l.strokeWidth,N=l.seriesGroup,H=l.realIndex,Z=l.i,J=l.j,ne=l.w,fe=new Dt(this.barCtx.ctx);(M=Array.isArray(M)?M[H]:M)||(M=0);var ye=m,De=x;null!==(u=ne.config.series[H].data[J])&&void 0!==u&&u.barHeightOffset&&(ye=m-ne.config.series[H].data[J].barHeightOffset/2,De=x+ne.config.series[H].data[J].barHeightOffset);var Pe=ye,Se=ye+De;E+=.001;var ze=fe.move(w+=.001,Pe),U=fe.move(w,Pe);ne.globals.previousPaths.length>0&&(U=this.barCtx.getPreviousPath(H,J,!1));var le=fe.line(w,Se-M);if(ze=ze+fe.line(E,Pe)+fe.line(E,Se-M)+le+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),U=U+fe.line(w,Pe)+le+le+le+le+le+fe.line(w,Pe)+("around"===ne.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(H)&&(ze=fe.roundPathCorners(ze,ne.config.plotOptions.bar.borderRadius)),ne.config.chart.stacked){var we=this.barCtx;ne.globals.hasSeriesGroups&&N&&(we=this.barCtx[N]),we.xArrj.push(E),we.xArrjF.push(Math.abs(w-E)),we.xArrjVal.push(this.barCtx.series[Z][J])}return{pathTo:ze,pathFrom:U}}},{key:"checkZeroSeries",value:function(l){for(var u=l.series,m=this.w,x=0;x<u.length;x++){for(var w=0,E=0;E<u[m.globals.maxValsInArrayIndex].length;E++)w+=u[x][E];0===w&&this.barCtx.zeroSerieses.push(x)}}},{key:"getXForValue",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:u;return null!=l&&(m=u+l/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?l/this.barCtx.invertedYRatio:0)),m}},{key:"getYForValue",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:u;return null!=l&&(m=u-l/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?l/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),m}},{key:"getGoalValues",value:function(l,u,m,x,w){var E=this,M=this.w,N=[],H=function(ne,fe){var ye;N.push((Me(ye={},l,"x"===l?E.getXForValue(ne,u,!1):E.getYForValue(ne,m,!1)),Me(ye,"attrs",fe),ye))};if(M.globals.seriesGoals[x]&&M.globals.seriesGoals[x][w]&&Array.isArray(M.globals.seriesGoals[x][w])&&M.globals.seriesGoals[x][w].forEach(function(ne){H(ne.value,ne)}),this.barCtx.barOptions.isDumbbell&&M.globals.seriesRange.length){var Z=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:M.globals.colors,J={strokeHeight:"x"===l?0:M.globals.markers.size[x],strokeWidth:"x"===l?M.globals.markers.size[x]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(Z[x])?Z[x][0]:Z[x]};H(M.globals.seriesRangeStart[x][w],J),H(M.globals.seriesRangeEnd[x][w],Ze(Ze({},J),{},{strokeColor:Array.isArray(Z[x])?Z[x][1]:Z[x]}))}return N}},{key:"drawGoalLine",value:function(l){var u=l.barXPosition,m=l.barYPosition,x=l.goalX,w=l.goalY,E=l.barWidth,M=l.barHeight,N=new Dt(this.barCtx.ctx),H=N.group({className:"apexcharts-bar-goals-groups"});H.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:H.node}),H.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var Z=null;return this.barCtx.isHorizontal?Array.isArray(x)&&x.forEach(function(J){var ne=void 0!==J.attrs.strokeHeight?J.attrs.strokeHeight:M/2,fe=m+ne+M/2;Z=N.drawLine(J.x,fe-2*ne,J.x,fe,J.attrs.strokeColor?J.attrs.strokeColor:void 0,J.attrs.strokeDashArray,J.attrs.strokeWidth?J.attrs.strokeWidth:2,J.attrs.strokeLineCap),H.add(Z)}):Array.isArray(w)&&w.forEach(function(J){var ne=void 0!==J.attrs.strokeWidth?J.attrs.strokeWidth:E/2,fe=u+ne+E/2;Z=N.drawLine(fe-2*ne,J.y,fe,J.y,J.attrs.strokeColor?J.attrs.strokeColor:void 0,J.attrs.strokeDashArray,J.attrs.strokeHeight?J.attrs.strokeHeight:2,J.attrs.strokeLineCap),H.add(Z)}),H}},{key:"drawBarShadow",value:function(l){var u=l.prevPaths,m=l.currPaths,x=l.color,w=this.w,E=u.x,M=u.x1,H=m.x,Z=m.x1,J=m.barYPosition,ne=u.barYPosition+m.barHeight,fe=new Dt(this.barCtx.ctx),ye=new tt,De=fe.move(M,ne)+fe.line(E,ne)+fe.line(H,J)+fe.line(Z,J)+fe.line(M,ne)+("around"===w.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return fe.drawPath({d:De,fill:ye.shadeColor(.5,tt.rgb2hex(x)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(l){var u=l.i,m=l.j,w=0,E=0;return this.w.globals.seriesPercent.forEach(function(M,N){M[m]&&w++,N<u&&0===M[m]&&E++}),{nonZeroColumns:w,zeroEncounters:E}}}]),ve}(),ai=function(){function ve(l,u){j(this,ve),this.ctx=l,this.w=l.w;var m=this.w;this.barOptions=m.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=m.config.stroke.width,this.isNullValue=!1,this.isRangeBar=m.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!m.globals.isBarHorizontal&&m.globals.seriesRange.length&&m.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=u,null!==this.xyRatios&&(this.xRatio=u.xRatio,this.yRatio=u.yRatio,this.invertedXRatio=u.invertedXRatio,this.invertedYRatio=u.invertedYRatio,this.baseLineY=u.baseLineY,this.baseLineInvertedY=u.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var x=new Pr(this.ctx);this.lastActiveBarSerieIndex=x.getActiveConfigSeriesIndex("desc",["bar","column"]);var w=x.getBarSeriesIndices(),E=new Fi(this.ctx);this.stackedSeriesTotals=E.getStackedSeriesTotals(this.w.config.series.map(function(M,N){return-1===w.indexOf(N)?N:-1}).filter(function(M){return-1!==M})),this.barHelpers=new kt(this)}return Be(ve,[{key:"draw",value:function(l,u){var m=this.w,x=new Dt(this.ctx),w=new Fi(this.ctx,m);l=w.getLogSeries(l),this.series=l,this.yRatio=w.getLogYRatios(this.yRatio),this.barHelpers.initVariables(l);var E=x.group({class:"apexcharts-bar-series apexcharts-plot-series"});m.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var M=0,N=0;M<l.length;M++,N++){var H,Z,J,ne,fe=void 0,ye=void 0,De=[],Pe=[],Se=m.globals.comboCharts?u[M]:M,ze=x.group({class:"apexcharts-series",rel:M+1,seriesName:tt.escapeString(m.globals.seriesNames[Se]),"data:realIndex":Se});this.ctx.series.addCollapsedClassToSeries(ze,Se),l[M].length>0&&(this.visibleI=this.visibleI+1);var U=0,le=0;this.yRatio.length>1&&(this.yaxisIndex=Se),this.isReversed=m.config.yaxis[this.yaxisIndex]&&m.config.yaxis[this.yaxisIndex].reversed;var we=this.barHelpers.initialPositions();ye=we.y,U=we.barHeight,Z=we.yDivision,ne=we.zeroW,fe=we.x,le=we.barWidth,H=we.xDivision,J=we.zeroH,this.horizontal||Pe.push(fe+le/2);var Le=x.group({class:"apexcharts-datalabels","data:realIndex":Se});m.globals.delayedElements.push({el:Le.node}),Le.node.classList.add("apexcharts-element-hidden");var $e=x.group({class:"apexcharts-bar-goals-markers"}),mt=x.group({class:"apexcharts-bar-shadows"});m.globals.delayedElements.push({el:mt.node}),mt.node.classList.add("apexcharts-element-hidden");for(var $t=0;$t<l[M].length;$t++){var Xt=this.barHelpers.getStrokeWidth(M,$t,Se),Li=null,Ji={indexes:{i:M,j:$t,realIndex:Se,bc:N},x:fe,y:ye,strokeWidth:Xt,elSeries:ze};this.isHorizontal?(Li=this.drawBarPaths(Ze(Ze({},Ji),{},{barHeight:U,zeroW:ne,yDivision:Z})),le=this.series[M][$t]/this.invertedYRatio):(Li=this.drawColumnPaths(Ze(Ze({},Ji),{},{xDivision:H,barWidth:le,zeroH:J})),U=this.series[M][$t]/this.yRatio[this.yaxisIndex]);var ln=this.barHelpers.getPathFillColor(l,M,$t,Se);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&$t>0){var Un=this.barHelpers.drawBarShadow({color:"string"==typeof ln&&-1===ln?.indexOf("url")?ln:tt.hexToRgba(m.globals.colors[M]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Li});Un&&mt.add(Un)}this.pathArr.push(Li);var cr=this.barHelpers.drawGoalLine({barXPosition:Li.barXPosition,barYPosition:Li.barYPosition,goalX:Li.goalX,goalY:Li.goalY,barHeight:U,barWidth:le});cr&&$e.add(cr),ye=Li.y,fe=Li.x,$t>0&&Pe.push(fe+le/2),De.push(ye),this.renderSeries({realIndex:Se,pathFill:ln,j:$t,i:M,pathFrom:Li.pathFrom,pathTo:Li.pathTo,strokeWidth:Xt,elSeries:ze,x:fe,y:ye,series:l,barHeight:Li.barHeight?Li.barHeight:U,barWidth:Li.barWidth?Li.barWidth:le,elDataLabelsWrap:Le,elGoalsMarkers:$e,elBarShadows:mt,visibleSeries:this.visibleI,type:"bar"})}m.globals.seriesXvalues[Se]=Pe,m.globals.seriesYvalues[Se]=De,E.add(ze)}return E}},{key:"renderSeries",value:function(l){var u=l.realIndex,m=l.pathFill,x=l.lineFill,w=l.j,E=l.i,M=l.groupIndex,N=l.pathFrom,H=l.pathTo,Z=l.strokeWidth,J=l.elSeries,ne=l.x,fe=l.y,ye=l.y1,De=l.y2,Pe=l.series,Se=l.barHeight,ze=l.barWidth,U=l.barXPosition,le=l.barYPosition,we=l.elDataLabelsWrap,Le=l.elGoalsMarkers,$e=l.elBarShadows,mt=l.visibleSeries,$t=l.type,Xt=this.w,Li=new Dt(this.ctx);x||(x=this.barOptions.distributed?Xt.globals.stroke.colors[w]:Xt.globals.stroke.colors[u]),Xt.config.series[E].data[w]&&Xt.config.series[E].data[w].strokeColor&&(x=Xt.config.series[E].data[w].strokeColor),this.isNullValue&&(m="none");var ln=Li.renderPaths({i:E,j:w,realIndex:u,pathFrom:N,pathTo:H,stroke:x,strokeWidth:Z,strokeLineCap:Xt.config.stroke.lineCap,fill:m,animationDelay:w/Xt.config.chart.animations.animateGradually.delay*(Xt.config.chart.animations.speed/Xt.globals.dataPoints)/2.4,initialSpeed:Xt.config.chart.animations.speed,dataChangeSpeed:Xt.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat($t,"-area")});ln.attr("clip-path","url(#gridRectMask".concat(Xt.globals.cuid,")"));var Un=Xt.config.forecastDataPoints;Un.count>0&&w>=Xt.globals.dataPoints-Un.count&&(ln.node.setAttribute("stroke-dasharray",Un.dashArray),ln.node.setAttribute("stroke-width",Un.strokeWidth),ln.node.setAttribute("fill-opacity",Un.fillOpacity)),void 0!==ye&&void 0!==De&&(ln.attr("data-range-y1",ye),ln.attr("data-range-y2",De)),new Pi(this.ctx).setSelectionFilter(ln,u,w),J.add(ln);var cr=new At(this).handleBarDataLabels({x:ne,y:fe,y1:ye,y2:De,i:E,j:w,series:Pe,realIndex:u,groupIndex:M,barHeight:Se,barWidth:ze,barXPosition:U,barYPosition:le,renderedPath:ln,visibleSeries:mt});return null!==cr.dataLabels&&we.add(cr.dataLabels),cr.totalDataLabels&&we.add(cr.totalDataLabels),J.add(we),Le&&J.add(Le),$e&&J.add($e),J}},{key:"drawBarPaths",value:function(l){var u,M,m=l.indexes,x=l.barHeight,w=l.strokeWidth,E=l.zeroW,N=l.y,H=l.yDivision,Z=l.elSeries,J=this.w,ne=m.i,fe=m.j;if(J.globals.isXNumeric)u=(N=(J.globals.seriesX[ne][fe]-J.globals.minX)/this.invertedXRatio-x)+x*this.visibleI;else if(J.config.plotOptions.bar.hideZeroBarsWhenGrouped){var ye=0,De=0;J.globals.seriesPercent.forEach(function(Se,ze){Se[fe]&&ye++,ze<ne&&0===Se[fe]&&De++}),ye>0&&(x=this.seriesLen*x/ye),u=N+x*this.visibleI,u-=x*De}else u=N+x*this.visibleI;this.isFunnel&&(E-=(this.barHelpers.getXForValue(this.series[ne][fe],E)-E)/2),M=this.barHelpers.getXForValue(this.series[ne][fe],E);var Pe=this.barHelpers.getBarpaths({barYPosition:u,barHeight:x,x1:E,x2:M,strokeWidth:w,series:this.series,realIndex:m.realIndex,i:ne,j:fe,w:J});return J.globals.isXNumeric||(N+=H),this.barHelpers.barBackground({j:fe,i:ne,y1:u-x*this.visibleI,y2:x*this.seriesLen,elSeries:Z}),{pathTo:Pe.pathTo,pathFrom:Pe.pathFrom,x1:E,x:M,y:N,goalX:this.barHelpers.getGoalValues("x",E,null,ne,fe),barYPosition:u,barHeight:x}}},{key:"drawColumnPaths",value:function(l){var u,w,m=l.indexes,x=l.x,E=l.xDivision,M=l.barWidth,N=l.zeroH,H=l.strokeWidth,Z=l.elSeries,J=this.w,fe=m.i,ye=m.j,De=m.bc;if(J.globals.isXNumeric){var Pe=this.getBarXForNumericXAxis({x,j:ye,realIndex:m.realIndex,barWidth:M});x=Pe.x,u=Pe.barXPosition}else if(J.config.plotOptions.bar.hideZeroBarsWhenGrouped){var Se=this.barHelpers.getZeroValueEncounters({i:fe,j:ye}),ze=Se.nonZeroColumns;ze>0&&(M=this.seriesLen*M/ze),u=x+M*this.visibleI,u-=M*Se.zeroEncounters}else u=x+M*this.visibleI;w=this.barHelpers.getYForValue(this.series[fe][ye],N);var le=this.barHelpers.getColumnPaths({barXPosition:u,barWidth:M,y1:N,y2:w,strokeWidth:H,series:this.series,realIndex:m.realIndex,i:fe,j:ye,w:J});return J.globals.isXNumeric||(x+=E),this.barHelpers.barBackground({bc:De,j:ye,i:fe,x1:u-H/2-M*this.visibleI,x2:M*this.seriesLen+H/2,elSeries:Z}),{pathTo:le.pathTo,pathFrom:le.pathFrom,x,y:w,goalY:this.barHelpers.getGoalValues("y",null,N,fe,ye),barXPosition:u,barWidth:M}}},{key:"getBarXForNumericXAxis",value:function(l){var u=l.x,m=l.barWidth,x=l.realIndex,w=l.j,E=this.w,M=x;return E.globals.seriesX[x].length||(M=E.globals.maxValsInArrayIndex),E.globals.seriesX[M][w]&&(u=(E.globals.seriesX[M][w]-E.globals.minX)/this.xRatio-m*this.seriesLen/2),{barXPosition:u+m*this.visibleI,x:u}}},{key:"getPreviousPath",value:function(l,u){for(var m,x=this.w,w=0;w<x.globals.previousPaths.length;w++){var E=x.globals.previousPaths[w];E.paths&&E.paths.length>0&&parseInt(E.realIndex,10)===parseInt(l,10)&&void 0!==x.globals.previousPaths[w].paths[u]&&(m=x.globals.previousPaths[w].paths[u].d)}return m}}]),ve}(),Ci=function(ve){We(u,ai);var l=ot(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(m,x){var w=this,E=this.w;this.graphics=new Dt(this.ctx),this.bar=new ai(this.ctx,this.xyRatios);var M=new Fi(this.ctx,E);m=M.getLogSeries(m),this.yRatio=M.getLogYRatios(this.yRatio),this.barHelpers.initVariables(m),"100%"===E.config.chart.stackType&&(m=E.globals.seriesPercent.slice()),this.series=m,this.barHelpers.initializeStackedPrevVars(this);for(var N=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),H=0,Z=0,J=function(ye,De){var Pe=void 0,Se=void 0,ze=void 0,U=void 0,le=-1;w.groupCtx=w,E.globals.seriesGroups.forEach(function(es,ms){es.indexOf(E.config.series[ye].name)>-1&&(le=ms)}),-1!==le&&(w.groupCtx=w[E.globals.seriesGroups[le]]);var we=[],Le=[],$e=E.globals.comboCharts?x[ye]:ye;w.yRatio.length>1&&(w.yaxisIndex=$e),w.isReversed=E.config.yaxis[w.yaxisIndex]&&E.config.yaxis[w.yaxisIndex].reversed;var mt=w.graphics.group({class:"apexcharts-series",seriesName:tt.escapeString(E.globals.seriesNames[$e]),rel:ye+1,"data:realIndex":$e});w.ctx.series.addCollapsedClassToSeries(mt,$e);var $t=w.graphics.group({class:"apexcharts-datalabels","data:realIndex":$e}),Xt=w.graphics.group({class:"apexcharts-bar-goals-markers"}),Li=0,Ji=0,ln=w.initialPositions(H,Z,Pe,Se,ze,U);Z=ln.y,Se=ln.yDivision,U=ln.zeroW,H=ln.x,Ji=ln.barWidth,Pe=ln.xDivision,ze=ln.zeroH,E.globals.barHeight=Li=ln.barHeight,E.globals.barWidth=Ji,w.barHelpers.initializeStackedXYVars(w),1===w.groupCtx.prevY.length&&w.groupCtx.prevY[0].every(function(es){return isNaN(es)})&&(w.groupCtx.prevY[0]=w.groupCtx.prevY[0].map(function(es){return ze}),w.groupCtx.prevYF[0]=w.groupCtx.prevYF[0].map(function(es){return 0}));for(var Un=0;Un<E.globals.dataPoints;Un++){var cr=w.barHelpers.getStrokeWidth(ye,Un,$e),Wr={indexes:{i:ye,j:Un,realIndex:$e,bc:De},strokeWidth:cr,x:H,y:Z,elSeries:mt,groupIndex:le,seriesGroup:E.globals.seriesGroups[le]},pa=null;w.isHorizontal?(pa=w.drawStackedBarPaths(Ze(Ze({},Wr),{},{zeroW:U,barHeight:Li,yDivision:Se})),Ji=w.series[ye][Un]/w.invertedYRatio):(pa=w.drawStackedColumnPaths(Ze(Ze({},Wr),{},{xDivision:Pe,barWidth:Ji,zeroH:ze})),Li=w.series[ye][Un]/w.yRatio[w.yaxisIndex]);var la=w.barHelpers.drawGoalLine({barXPosition:pa.barXPosition,barYPosition:pa.barYPosition,goalX:pa.goalX,goalY:pa.goalY,barHeight:Li,barWidth:Ji});la&&Xt.add(la),Z=pa.y,we.push(H=pa.x),Le.push(Z);var Ta=w.barHelpers.getPathFillColor(m,ye,Un,$e);mt=w.renderSeries({realIndex:$e,pathFill:Ta,j:Un,i:ye,groupIndex:le,pathFrom:pa.pathFrom,pathTo:pa.pathTo,strokeWidth:cr,elSeries:mt,x:H,y:Z,series:m,barHeight:Li,barWidth:Ji,elDataLabelsWrap:$t,elGoalsMarkers:Xt,type:"bar",visibleSeries:0})}E.globals.seriesXvalues[$e]=we,E.globals.seriesYvalues[$e]=Le,w.groupCtx.prevY.push(w.groupCtx.yArrj),w.groupCtx.prevYF.push(w.groupCtx.yArrjF),w.groupCtx.prevYVal.push(w.groupCtx.yArrjVal),w.groupCtx.prevX.push(w.groupCtx.xArrj),w.groupCtx.prevXF.push(w.groupCtx.xArrjF),w.groupCtx.prevXVal.push(w.groupCtx.xArrjVal),N.add(mt)},ne=0,fe=0;ne<m.length;ne++,fe++)J(ne,fe);return N}},{key:"initialPositions",value:function(m,x,w,E,M,N){var H,Z,J,ne,fe=this.w;return this.isHorizontal?(J=(J=E=fe.globals.gridHeight/fe.globals.dataPoints)*parseInt(fe.config.plotOptions.bar.barHeight,10)/100,-1===String(fe.config.plotOptions.bar.barHeight).indexOf("%")&&(J=parseInt(fe.config.plotOptions.bar.barHeight,10)),N=this.baseLineInvertedY+fe.globals.padHorizontal+(this.isReversed?fe.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),x=(E-J)/2):(ne=w=fe.globals.gridWidth/fe.globals.dataPoints,ne=fe.globals.isXNumeric&&fe.globals.dataPoints>1?(w=fe.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:ne*parseInt(fe.config.plotOptions.bar.columnWidth,10)/100,-1===String(fe.config.plotOptions.bar.columnWidth).indexOf("%")&&(ne=parseInt(fe.config.plotOptions.bar.columnWidth,10)),M=fe.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?fe.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),m=fe.globals.padHorizontal+(w-ne)/2),{x:m,y:x,yDivision:E,xDivision:w,barHeight:null!==(H=fe.globals.seriesGroups)&&void 0!==H&&H.length?J/fe.globals.seriesGroups.length:J,barWidth:null!==(Z=fe.globals.seriesGroups)&&void 0!==Z&&Z.length?ne/fe.globals.seriesGroups.length:ne,zeroH:M,zeroW:N}}},{key:"drawStackedBarPaths",value:function(m){for(var x,H,w=m.indexes,E=m.barHeight,M=m.strokeWidth,N=m.zeroW,Z=m.y,J=m.groupIndex,ne=m.seriesGroup,fe=m.yDivision,ye=m.elSeries,De=this.w,Pe=Z+(-1!==J?J*E:0),Se=w.i,ze=w.j,U=0,le=0;le<this.groupCtx.prevXF.length;le++)U+=this.groupCtx.prevXF[le][ze];var we=Se;if(ne&&(we=ne.indexOf(De.config.series[Se].name)),we>0){var Le=N;this.groupCtx.prevXVal[we-1][ze]<0?Le=this.series[Se][ze]>=0?this.groupCtx.prevX[we-1][ze]+U-2*(this.isReversed?U:0):this.groupCtx.prevX[we-1][ze]:this.groupCtx.prevXVal[we-1][ze]>=0&&(Le=this.series[Se][ze]>=0?this.groupCtx.prevX[we-1][ze]:this.groupCtx.prevX[we-1][ze]-U+2*(this.isReversed?U:0)),x=Le}else x=N;var $e=this.barHelpers.getBarpaths({barYPosition:Pe,barHeight:E,x1:x,x2:H=null===this.series[Se][ze]?x:x+this.series[Se][ze]/this.invertedYRatio-2*(this.isReversed?this.series[Se][ze]/this.invertedYRatio:0),strokeWidth:M,series:this.series,realIndex:w.realIndex,seriesGroup:ne,i:Se,j:ze,w:De});return this.barHelpers.barBackground({j:ze,i:Se,y1:Pe,y2:E,elSeries:ye}),Z+=fe,{pathTo:$e.pathTo,pathFrom:$e.pathFrom,goalX:this.barHelpers.getGoalValues("x",N,null,Se,ze),barYPosition:Pe,x:H,y:Z}}},{key:"drawStackedColumnPaths",value:function(m){var E,x=m.indexes,w=m.x,M=m.xDivision,N=m.barWidth,H=m.zeroH,Z=m.groupIndex,J=m.seriesGroup,ne=m.elSeries,fe=this.w,ye=x.i,De=x.j,Pe=x.bc;if(fe.globals.isXNumeric){var Se=fe.globals.seriesX[ye][De];Se||(Se=0),w=(Se-fe.globals.minX)/this.xRatio-N/2,fe.globals.seriesGroups.length&&(w=(Se-fe.globals.minX)/this.xRatio-N/2*fe.globals.seriesGroups.length)}for(var ze,U=w+(-1!==Z?Z*N:0),le=0,we=0;we<this.groupCtx.prevYF.length;we++)le+=isNaN(this.groupCtx.prevYF[we][De])?0:this.groupCtx.prevYF[we][De];var Le=ye;if(J&&(Le=J.indexOf(fe.config.series[ye].name)),Le>0&&!fe.globals.isXNumeric||Le>0&&fe.globals.isXNumeric&&fe.globals.seriesX[ye-1][De]===fe.globals.seriesX[ye][De]){var $e,mt,$t,Xt=Math.min(this.yRatio.length+1,ye+1);if(void 0!==this.groupCtx.prevY[Le-1]&&this.groupCtx.prevY[Le-1].length)for(var Li=1;Li<Xt;Li++){var Ji;if(!isNaN(null===(Ji=this.groupCtx.prevY[Le-Li])||void 0===Ji?void 0:Ji[De])){$t=this.groupCtx.prevY[Le-Li][De];break}}for(var ln=1;ln<Xt;ln++){var Un,cr;if((null===(Un=this.groupCtx.prevYVal[Le-ln])||void 0===Un?void 0:Un[De])<0){mt=this.series[ye][De]>=0?$t-le+2*(this.isReversed?le:0):$t;break}if((null===(cr=this.groupCtx.prevYVal[Le-ln])||void 0===cr?void 0:cr[De])>=0){mt=this.series[ye][De]>=0?$t:$t+le-2*(this.isReversed?le:0);break}}void 0===mt&&(mt=fe.globals.gridHeight),ze=null!==($e=this.groupCtx.prevYF[0])&&void 0!==$e&&$e.every(function(pa){return 0===pa})&&this.groupCtx.prevYF.slice(1,Le).every(function(pa){return pa.every(function(la){return isNaN(la)})})?H:mt}else ze=H;var Wr=this.barHelpers.getColumnPaths({barXPosition:U,barWidth:N,y1:ze,y2:E=this.series[ye][De]?ze-this.series[ye][De]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[ye][De]/this.yRatio[this.yaxisIndex]:0):ze,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:J,realIndex:x.realIndex,i:ye,j:De,w:fe});return this.barHelpers.barBackground({bc:Pe,j:De,i:ye,x1:U,x2:N,elSeries:ne}),w+=M,{pathTo:Wr.pathTo,pathFrom:Wr.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,H,ye,De),barXPosition:U,x:fe.globals.isXNumeric?w-M:w,y:E}}}]),u}(),Ii=function(ve){We(u,ai);var l=ot(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(m,x,w){var E=this,M=this.w,N=new Dt(this.ctx),H=M.globals.comboCharts?x:M.config.chart.type,Z=new In(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=M.config.plotOptions.bar.horizontal;var J=new Fi(this.ctx,M);m=J.getLogSeries(m),this.series=m,this.yRatio=J.getLogYRatios(this.yRatio),this.barHelpers.initVariables(m);for(var ne=N.group({class:"apexcharts-".concat(H,"-series apexcharts-plot-series")}),fe=function(De){E.isBoxPlot="boxPlot"===M.config.chart.type||"boxPlot"===M.config.series[De].type;var Pe,Se,ze,U,Xt,Li,le=void 0,we=void 0,Le=[],$e=[],mt=M.globals.comboCharts?w[De]:De,$t=N.group({class:"apexcharts-series",seriesName:tt.escapeString(M.globals.seriesNames[mt]),rel:De+1,"data:realIndex":mt});E.ctx.series.addCollapsedClassToSeries($t,mt),m[De].length>0&&(E.visibleI=E.visibleI+1),E.yRatio.length>1&&(E.yaxisIndex=mt);var Ji=E.barHelpers.initialPositions();we=Ji.y,Xt=Ji.barHeight,Se=Ji.yDivision,U=Ji.zeroW,Pe=Ji.xDivision,ze=Ji.zeroH,$e.push((le=Ji.x)+(Li=Ji.barWidth)/2);for(var ln=N.group({class:"apexcharts-datalabels","data:realIndex":mt}),Un=function(Wr){var pa=E.barHelpers.getStrokeWidth(De,Wr,mt),la=null,Ta={indexes:{i:De,j:Wr,realIndex:mt},x:le,y:we,strokeWidth:pa,elSeries:$t};la=E.isHorizontal?E.drawHorizontalBoxPaths(Ze(Ze({},Ta),{},{yDivision:Se,barHeight:Xt,zeroW:U})):E.drawVerticalBoxPaths(Ze(Ze({},Ta),{},{xDivision:Pe,barWidth:Li,zeroH:ze})),we=la.y,le=la.x,Wr>0&&$e.push(le+Li/2),Le.push(we),la.pathTo.forEach(function(es,ms){var Is=!E.isBoxPlot&&E.candlestickOptions.wick.useFillColor?la.color[ms]:M.globals.stroke.colors[De],va=Z.fillPath({seriesNumber:mt,dataPointIndex:Wr,color:la.color[ms],value:m[De][Wr]});E.renderSeries({realIndex:mt,pathFill:va,lineFill:Is,j:Wr,i:De,pathFrom:la.pathFrom,pathTo:es,strokeWidth:pa,elSeries:$t,x:le,y:we,series:m,barHeight:Xt,barWidth:Li,elDataLabelsWrap:ln,visibleSeries:E.visibleI,type:M.config.chart.type})})},cr=0;cr<M.globals.dataPoints;cr++)Un(cr);M.globals.seriesXvalues[mt]=$e,M.globals.seriesYvalues[mt]=Le,ne.add($t)},ye=0;ye<m.length;ye++)fe(ye);return ne}},{key:"drawVerticalBoxPaths",value:function(m){var x=m.indexes,w=m.x,E=m.xDivision,M=m.barWidth,N=m.zeroH,H=m.strokeWidth,Z=this.w,J=new Dt(this.ctx),ne=x.i,fe=x.j,ye=!0,De=Z.config.plotOptions.candlestick.colors.upward,Pe=Z.config.plotOptions.candlestick.colors.downward,Se="";this.isBoxPlot&&(Se=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ze=this.yRatio[this.yaxisIndex],U=x.realIndex,le=this.getOHLCValue(U,fe),we=N,Le=N;le.o>le.c&&(ye=!1);var $e=Math.min(le.o,le.c),mt=Math.max(le.o,le.c),$t=le.m;Z.globals.isXNumeric&&(w=(Z.globals.seriesX[U][fe]-Z.globals.minX)/this.xRatio-M/2);var Xt=w+M*this.visibleI;null==this.series[ne][fe]?($e=N,mt=N):($e=N-$e/ze,mt=N-mt/ze,we=N-le.h/ze,Le=N-le.l/ze,$t=N-le.m/ze);var Li=J.move(Xt,N),Ji=J.move(Xt+M/2,$e);return Z.globals.previousPaths.length>0&&(Ji=this.getPreviousPath(U,fe,!0)),Li=this.isBoxPlot?[J.move(Xt,$e)+J.line(Xt+M/2,$e)+J.line(Xt+M/2,we)+J.line(Xt+M/4,we)+J.line(Xt+M-M/4,we)+J.line(Xt+M/2,we)+J.line(Xt+M/2,$e)+J.line(Xt+M,$e)+J.line(Xt+M,$t)+J.line(Xt,$t)+J.line(Xt,$e+H/2),J.move(Xt,$t)+J.line(Xt+M,$t)+J.line(Xt+M,mt)+J.line(Xt+M/2,mt)+J.line(Xt+M/2,Le)+J.line(Xt+M-M/4,Le)+J.line(Xt+M/4,Le)+J.line(Xt+M/2,Le)+J.line(Xt+M/2,mt)+J.line(Xt,mt)+J.line(Xt,$t)+"z"]:[J.move(Xt,mt)+J.line(Xt+M/2,mt)+J.line(Xt+M/2,we)+J.line(Xt+M/2,mt)+J.line(Xt+M,mt)+J.line(Xt+M,$e)+J.line(Xt+M/2,$e)+J.line(Xt+M/2,Le)+J.line(Xt+M/2,$e)+J.line(Xt,$e)+J.line(Xt,mt-H/2)],Ji+=J.move(Xt,$e),Z.globals.isXNumeric||(w+=E),{pathTo:Li,pathFrom:Ji,x:w,y:mt,barXPosition:Xt,color:this.isBoxPlot?Se:ye?[De]:[Pe]}}},{key:"drawHorizontalBoxPaths",value:function(m){var x=m.indexes,w=m.y,E=m.yDivision,M=m.barHeight,N=m.zeroW,H=m.strokeWidth,Z=this.w,J=new Dt(this.ctx),ne=x.i,fe=x.j,ye=this.boxOptions.colors.lower;this.isBoxPlot&&(ye=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var De=this.invertedYRatio,Pe=x.realIndex,Se=this.getOHLCValue(Pe,fe),ze=N,U=N,le=Math.min(Se.o,Se.c),we=Math.max(Se.o,Se.c),Le=Se.m;Z.globals.isXNumeric&&(w=(Z.globals.seriesX[Pe][fe]-Z.globals.minX)/this.invertedXRatio-M/2);var $e=w+M*this.visibleI;null==this.series[ne][fe]?(le=N,we=N):(le=N+le/De,we=N+we/De,ze=N+Se.h/De,U=N+Se.l/De,Le=N+Se.m/De);var mt=J.move(N,$e),$t=J.move(le,$e+M/2);return Z.globals.previousPaths.length>0&&($t=this.getPreviousPath(Pe,fe,!0)),mt=[J.move(le,$e)+J.line(le,$e+M/2)+J.line(ze,$e+M/2)+J.line(ze,$e+M/2-M/4)+J.line(ze,$e+M/2+M/4)+J.line(ze,$e+M/2)+J.line(le,$e+M/2)+J.line(le,$e+M)+J.line(Le,$e+M)+J.line(Le,$e)+J.line(le+H/2,$e),J.move(Le,$e)+J.line(Le,$e+M)+J.line(we,$e+M)+J.line(we,$e+M/2)+J.line(U,$e+M/2)+J.line(U,$e+M-M/4)+J.line(U,$e+M/4)+J.line(U,$e+M/2)+J.line(we,$e+M/2)+J.line(we,$e)+J.line(Le,$e)+"z"],$t+=J.move(le,$e),Z.globals.isXNumeric||(w+=E),{pathTo:mt,pathFrom:$t,x:we,y:w,barYPosition:$e,color:ye}}},{key:"getOHLCValue",value:function(m,x){var w=this.w;return{o:this.isBoxPlot?w.globals.seriesCandleH[m][x]:w.globals.seriesCandleO[m][x],h:this.isBoxPlot?w.globals.seriesCandleO[m][x]:w.globals.seriesCandleH[m][x],m:w.globals.seriesCandleM[m][x],l:this.isBoxPlot?w.globals.seriesCandleC[m][x]:w.globals.seriesCandleL[m][x],c:this.isBoxPlot?w.globals.seriesCandleL[m][x]:w.globals.seriesCandleC[m][x]}}}]),u}(),Mt=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"checkColorRange",value:function(){var l=this.w,u=!1,m=l.config.plotOptions[l.config.chart.type];return m.colorScale.ranges.length>0&&m.colorScale.ranges.map(function(x,w){x.from<=0&&(u=!0)}),u}},{key:"getShadeColor",value:function(l,u,m,x){var w=this.w,E=1,M=w.config.plotOptions[l].shadeIntensity,N=this.determineColor(l,u,m);w.globals.hasNegs||x?E=w.config.plotOptions[l].reverseNegativeShade?N.percent<0?N.percent/100*(1.25*M):1.25*M*(1-N.percent/100):N.percent<=0?1-(1+N.percent/100)*M:(1-N.percent/100)*M:(E=1-N.percent/100,"treemap"===l&&(E=1.25*M*(1-N.percent/100)));var H=N.color,Z=new tt;return w.config.plotOptions[l].enableShades&&(H=tt.hexToRgba(Z.shadeColor("dark"===this.w.config.theme.mode?-1*E:E,N.color),w.config.fill.opacity)),{color:H,colorProps:N}}},{key:"determineColor",value:function(l,u,m){var x=this.w,w=x.globals.series[u][m],E=x.config.plotOptions[l],M=E.colorScale.inverse?m:u;E.distributed&&"treemap"===x.config.chart.type&&(M=m);var N=x.globals.colors[M],H=null,Z=Math.min.apply(Math,et(x.globals.series[u])),J=Math.max.apply(Math,et(x.globals.series[u]));E.distributed||"heatmap"!==l||(Z=x.globals.minY,J=x.globals.maxY),void 0!==E.colorScale.min&&(Z=E.colorScale.min<x.globals.minY?E.colorScale.min:x.globals.minY,J=E.colorScale.max>x.globals.maxY?E.colorScale.max:x.globals.maxY);var ne=Math.abs(J)+Math.abs(Z),fe=100*w/(0===ne?ne-1e-6:ne);return E.colorScale.ranges.length>0&&E.colorScale.ranges.map(function(ye,De){if(w>=ye.from&&w<=ye.to){N=ye.color,H=ye.foreColor?ye.foreColor:null,Z=ye.from,J=ye.to;var Pe=Math.abs(J)+Math.abs(Z);fe=100*w/(0===Pe?Pe-1e-6:Pe)}}),{color:N,foreColor:H,percent:fe}}},{key:"calculateDataLabels",value:function(l){var u=l.text,m=l.x,x=l.y,w=l.i,E=l.j,M=l.colorProps,N=l.fontSize,H=this.w.config.dataLabels,Z=new Dt(this.ctx),J=new jr(this.ctx),ne=null;if(H.enabled){ne=Z.group({class:"apexcharts-data-labels"});var ye=H.offsetY,De=m+H.offsetX,Pe=x+parseFloat(H.style.fontSize)/3+ye;J.plotDataLabelsText({x:De,y:Pe,text:u,i:w,j:E,color:M.foreColor,parent:ne,fontSize:N,dataLabelsConfig:H})}return ne}},{key:"addListeners",value:function(l){var u=new Dt(this.ctx);l.node.addEventListener("mouseenter",u.pathMouseEnter.bind(this,l)),l.node.addEventListener("mouseleave",u.pathMouseLeave.bind(this,l)),l.node.addEventListener("mousedown",u.pathMouseDown.bind(this,l))}}]),ve}(),Bi=function(){function ve(l,u){j(this,ve),this.ctx=l,this.w=l.w,this.xRatio=u.xRatio,this.yRatio=u.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Mt(l),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return Be(ve,[{key:"draw",value:function(l){var u=this.w,m=new Dt(this.ctx),x=m.group({class:"apexcharts-heatmap"});x.attr("clip-path","url(#gridRectMask".concat(u.globals.cuid,")"));var w=u.globals.gridWidth/u.globals.dataPoints,E=u.globals.gridHeight/u.globals.series.length,M=0,N=!1;this.negRange=this.helpers.checkColorRange();var H=l.slice();u.config.yaxis[0].reversed&&(N=!0,H.reverse());for(var Z=N?0:H.length-1;N?Z<H.length:Z>=0;N?Z++:Z--){var J=m.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:tt.escapeString(u.globals.seriesNames[Z]),rel:Z+1,"data:realIndex":Z});if(this.ctx.series.addCollapsedClassToSeries(J,Z),u.config.chart.dropShadow.enabled){var ne=u.config.chart.dropShadow;new Pi(this.ctx).dropShadow(J,ne,Z)}for(var fe=0,ye=u.config.plotOptions.heatmap.shadeIntensity,De=0;De<H[Z].length;De++){var Pe=this.helpers.getShadeColor(u.config.chart.type,Z,De,this.negRange),Se=Pe.color,ze=Pe.colorProps;"image"===u.config.fill.type&&(Se=new In(this.ctx).fillPath({seriesNumber:Z,dataPointIndex:De,opacity:u.globals.hasNegs?ze.percent<0?1-(1+ze.percent/100):ye+ze.percent/100:ze.percent/100,patternID:tt.randomId(),width:u.config.fill.image.width?u.config.fill.image.width:w,height:u.config.fill.image.height?u.config.fill.image.height:E}));var le=m.drawRect(fe,M,w,E,this.rectRadius);if(le.attr({cx:fe,cy:M}),le.node.classList.add("apexcharts-heatmap-rect"),J.add(le),le.attr({fill:Se,i:Z,index:Z,j:De,val:l[Z][De],"stroke-width":this.strokeWidth,stroke:u.config.plotOptions.heatmap.useFillColorAsStroke?Se:u.globals.stroke.colors[0],color:Se}),this.helpers.addListeners(le),u.config.chart.animations.enabled&&!u.globals.dataChanged){var we=1;u.globals.resized||(we=u.config.chart.animations.speed),this.animateHeatMap(le,fe,M,w,E,we)}if(u.globals.dataChanged){var Le=1;if(this.dynamicAnim.enabled&&u.globals.shouldAnimate){Le=this.dynamicAnim.speed;var $e=u.globals.previousPaths[Z]&&u.globals.previousPaths[Z][De]&&u.globals.previousPaths[Z][De].color;$e||($e="rgba(255, 255, 255, 0)"),this.animateHeatColor(le,tt.isColorHex($e)?$e:tt.rgb2hex($e),tt.isColorHex(Se)?Se:tt.rgb2hex(Se),Le)}}var mt=(0,u.config.dataLabels.formatter)(u.globals.series[Z][De],{value:u.globals.series[Z][De],seriesIndex:Z,dataPointIndex:De,w:u}),$t=this.helpers.calculateDataLabels({text:mt,x:fe+w/2,y:M+E/2,i:Z,j:De,colorProps:ze,series:H});null!==$t&&J.add($t),fe+=w}M+=E,x.add(J)}var Xt=u.globals.yAxisScale[0].result.slice();return u.config.yaxis[0].reversed?Xt.unshift(""):Xt.push(""),u.globals.yAxisScale[0].result=Xt,x}},{key:"animateHeatMap",value:function(l,u,m,x,w,E){var M=new yi(this.ctx);M.animateRect(l,{x:u+x/2,y:m+w/2,width:0,height:0},{x:u,y:m,width:x,height:w},E,function(){M.animationCompleted(l)})}},{key:"animateHeatColor",value:function(l,u,m,x){l.attr({fill:u}).animate(x).attr({fill:m})}}]),ve}(),On=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"drawYAxisTexts",value:function(l,u,m,x){var w=this.w,E=w.config.yaxis[0],M=w.globals.yLabelFormatters[0];return new Dt(this.ctx).drawText({x:l+E.labels.offsetX,y:u+E.labels.offsetY,text:M(x,m),textAnchor:"middle",fontSize:E.labels.style.fontSize,fontFamily:E.labels.style.fontFamily,foreColor:Array.isArray(E.labels.style.colors)?E.labels.style.colors[m]:E.labels.style.colors})}}]),ve}(),_n=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w;var u=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==u.globals.stroke.colors?u.globals.stroke.colors:u.globals.colors,this.defaultSize=Math.min(u.globals.gridWidth,u.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=u.globals.gridWidth/2,this.fullAngle="radialBar"===u.config.chart.type?360:Math.abs(u.config.plotOptions.pie.endAngle-u.config.plotOptions.pie.startAngle),this.initialAngle=u.config.plotOptions.pie.startAngle%this.fullAngle,u.globals.radialSize=this.defaultSize/2.05-u.config.stroke.width-(u.config.chart.sparkline.enabled?0:u.config.chart.dropShadow.blur),this.donutSize=u.globals.radialSize*parseInt(u.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return Be(ve,[{key:"draw",value:function(l){var u=this,m=this.w,x=new Dt(this.ctx);if(this.ret=x.group({class:"apexcharts-pie"}),m.globals.noData)return this.ret;for(var w=0,E=0;E<l.length;E++)w+=tt.negToZero(l[E]);var M=[],N=x.group();0===w&&(w=1e-5),l.forEach(function($e){u.maxY=Math.max(u.maxY,$e)}),m.config.yaxis[0].max&&(this.maxY=m.config.yaxis[0].max),"back"===m.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var H=0;H<l.length;H++){var Z=this.fullAngle*tt.negToZero(l[H])/w;M.push(Z),"polarArea"===this.chartType?(M[H]=this.fullAngle/l.length,this.sliceSizes.push(m.globals.radialSize*l[H]/this.maxY)):this.sliceSizes.push(m.globals.radialSize)}if(m.globals.dataChanged){for(var J,ne=0,fe=0;fe<m.globals.previousPaths.length;fe++)ne+=tt.negToZero(m.globals.previousPaths[fe]);for(var ye=0;ye<m.globals.previousPaths.length;ye++)J=this.fullAngle*tt.negToZero(m.globals.previousPaths[ye])/ne,this.prevSectorAngleArr.push(J)}this.donutSize<0&&(this.donutSize=0);var De=m.config.plotOptions.pie.customScale,ze=m.globals.gridWidth/2-m.globals.gridWidth/2*De,U=m.globals.gridHeight/2-m.globals.gridHeight/2*De;if("donut"===this.chartType){var le=x.drawCircle(this.donutSize);le.attr({cx:this.centerX,cy:this.centerY,fill:m.config.plotOptions.pie.donut.background?m.config.plotOptions.pie.donut.background:"transparent"}),N.add(le)}var we=this.drawArcs(M,l);if(this.sliceLabels.forEach(function($e){we.add($e)}),N.attr({transform:"translate(".concat(ze,", ").concat(U,") scale(").concat(De,")")}),N.add(we),this.ret.add(N),this.donutDataLabels.show){var Le=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:ze,translateY:U});this.ret.add(Le)}return"front"===m.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(l,u){var m=this.w,x=new Pi(this.ctx),w=new Dt(this.ctx),E=new In(this.ctx),M=w.group({class:"apexcharts-slices"}),N=this.initialAngle,H=this.initialAngle,Z=this.initialAngle,J=this.initialAngle;this.strokeWidth=m.config.stroke.show?m.config.stroke.width:0;for(var ne=0;ne<l.length;ne++){var fe=w.group({class:"apexcharts-series apexcharts-pie-series",seriesName:tt.escapeString(m.globals.seriesNames[ne]),rel:ne+1,"data:realIndex":ne});M.add(fe),Z=(N=Z)+l[ne],J=(H=J)+this.prevSectorAngleArr[ne];var ye=Z<N?this.fullAngle+Z-N:Z-N,De=E.fillPath({seriesNumber:ne,size:this.sliceSizes[ne],value:u[ne]}),Pe=this.getChangedPath(H,J),Se=w.drawPath({d:Pe,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[ne]:this.lineColorArr,strokeWidth:0,fill:De,fillOpacity:m.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(ne)});Se.attr({index:0,j:ne}),x.setSelectionFilter(Se,0,ne),m.config.chart.dropShadow.enabled&&x.dropShadow(Se,m.config.chart.dropShadow,ne),this.addListeners(Se,this.donutDataLabels),Dt.setAttrs(Se.node,{"data:angle":ye,"data:startAngle":N,"data:strokeWidth":this.strokeWidth,"data:value":u[ne]});var U={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?U=tt.polarToCartesian(this.centerX,this.centerY,m.globals.radialSize/1.25+m.config.plotOptions.pie.dataLabels.offset,(N+ye/2)%this.fullAngle):"donut"===this.chartType&&(U=tt.polarToCartesian(this.centerX,this.centerY,(m.globals.radialSize+this.donutSize)/2+m.config.plotOptions.pie.dataLabels.offset,(N+ye/2)%this.fullAngle)),fe.add(Se);var le=0;if(!this.initialAnim||m.globals.resized||m.globals.dataChanged?this.animBeginArr.push(0):(0==(le=ye/this.fullAngle*m.config.chart.animations.speed)&&(le=1),this.animDur=le+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(Se,this.dynamicAnim&&m.globals.dataChanged?{size:this.sliceSizes[ne],endAngle:Z,startAngle:N,prevStartAngle:H,prevEndAngle:J,animateStartingPos:!0,i:ne,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:m.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[ne],endAngle:Z,startAngle:N,i:ne,totalItems:l.length-1,animBeginArr:this.animBeginArr,dur:le}),m.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&Se.click(this.pieClicked.bind(this,ne)),void 0!==m.globals.selectedDataPoints[0]&&m.globals.selectedDataPoints[0].indexOf(ne)>-1&&this.pieClicked(ne),m.config.dataLabels.enabled){var we=U.x,Le=U.y,$e=100*ye/this.fullAngle+"%";if(0!==ye&&m.config.plotOptions.pie.dataLabels.minAngleToShowLabel<l[ne]){var mt=m.config.dataLabels.formatter;void 0!==mt&&($e=mt(m.globals.seriesPercent[ne][0],{seriesIndex:ne,w:m}));var $t=m.globals.dataLabels.style.colors[ne],Xt=w.group({class:"apexcharts-datalabels"}),Li=w.drawText({x:we,y:Le,text:$e,textAnchor:"middle",fontSize:m.config.dataLabels.style.fontSize,fontFamily:m.config.dataLabels.style.fontFamily,fontWeight:m.config.dataLabels.style.fontWeight,foreColor:$t});Xt.add(Li),m.config.dataLabels.dropShadow.enabled&&x.dropShadow(Li,m.config.dataLabels.dropShadow),Li.node.classList.add("apexcharts-pie-label"),m.config.chart.animations.animate&&!1===m.globals.resized&&(Li.node.classList.add("apexcharts-pie-label-delay"),Li.node.style.animationDelay=m.config.chart.animations.speed/940+"s"),this.sliceLabels.push(Xt)}}}return M}},{key:"addListeners",value:function(l,u){var m=new Dt(this.ctx);l.node.addEventListener("mouseenter",m.pathMouseEnter.bind(this,l)),l.node.addEventListener("mouseleave",m.pathMouseLeave.bind(this,l)),l.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,l.node,u)),l.node.addEventListener("mousedown",m.pathMouseDown.bind(this,l)),this.donutDataLabels.total.showAlways||(l.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,l.node,u)),l.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,l.node,u)))}},{key:"animatePaths",value:function(l,u){var x=u.endAngle<u.startAngle?this.fullAngle+u.endAngle-u.startAngle:u.endAngle-u.startAngle,w=x,E=u.startAngle,M=u.startAngle;void 0!==u.prevStartAngle&&void 0!==u.prevEndAngle&&(E=u.prevEndAngle,w=u.prevEndAngle<u.prevStartAngle?this.fullAngle+u.prevEndAngle-u.prevStartAngle:u.prevEndAngle-u.prevStartAngle),u.i===this.w.config.series.length-1&&(x+M>this.fullAngle?u.endAngle=u.endAngle-(x+M):x+M<this.fullAngle&&(u.endAngle=u.endAngle+(this.fullAngle-(x+M)))),x===this.fullAngle&&(x=this.fullAngle-.01),this.animateArc(l,E,M,x,w,u)}},{key:"animateArc",value:function(l,u,m,x,w,E){var M,N=this,H=this.w,Z=new yi(this.ctx),J=E.size;(isNaN(u)||isNaN(w))&&(u=m,w=x,E.dur=0);var ne=x,fe=m,ye=u<m?this.fullAngle+u-m:u-m;H.globals.dataChanged&&E.shouldSetPrevPaths&&E.prevEndAngle&&(M=N.getPiePath({me:N,startAngle:E.prevStartAngle,angle:E.prevEndAngle<E.prevStartAngle?this.fullAngle+E.prevEndAngle-E.prevStartAngle:E.prevEndAngle-E.prevStartAngle,size:J}),l.attr({d:M})),0!==E.dur?l.animate(E.dur,H.globals.easing,E.animBeginArr[E.i]).afterAll(function(){"pie"!==N.chartType&&"donut"!==N.chartType&&"polarArea"!==N.chartType||this.animate(H.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":N.strokeWidth}),E.i===H.config.series.length-1&&Z.animationCompleted(l)}).during(function(De){ne=ye+(x-ye)*De,E.animateStartingPos&&(ne=w+(x-w)*De,fe=u-w+(m-(u-w))*De),M=N.getPiePath({me:N,startAngle:fe,angle:ne,size:J}),l.node.setAttribute("data:pathOrig",M),l.attr({d:M})}):(M=N.getPiePath({me:N,startAngle:fe,angle:x,size:J}),E.isTrack||(H.globals.animationEnded=!0),l.node.setAttribute("data:pathOrig",M),l.attr({d:M,"stroke-width":N.strokeWidth}))}},{key:"pieClicked",value:function(l){var u,m=this.w,x=this,w=x.sliceSizes[l]+(m.config.plotOptions.pie.expandOnClick?4:0),E=m.globals.dom.Paper.select(".apexcharts-".concat(x.chartType.toLowerCase(),"-slice-").concat(l)).members[0];if("true"!==E.attr("data:pieClicked")){var M=m.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(M,function(J){J.setAttribute("data:pieClicked","false");var ne=J.getAttribute("data:pathOrig");ne&&J.setAttribute("d",ne)}),E.attr("data:pieClicked","true");var N=parseInt(E.attr("data:startAngle"),10),H=parseInt(E.attr("data:angle"),10);u=x.getPiePath({me:x,startAngle:N,angle:H,size:w}),360!==H&&E.plot(u)}else{E.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(E.node,this.donutDataLabels);var Z=E.attr("data:pathOrig");E.attr({d:Z})}}},{key:"getChangedPath",value:function(l,u){var m="";return this.dynamicAnim&&this.w.globals.dataChanged&&(m=this.getPiePath({me:this,startAngle:l,angle:u-l,size:this.size})),m}},{key:"getPiePath",value:function(l){var u,m=l.me,x=l.startAngle,w=l.angle,E=l.size,M=new Dt(this.ctx),N=x,H=Math.PI*(N-90)/180,Z=w+x;Math.ceil(Z)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(Z=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(Z)>this.fullAngle&&(Z-=this.fullAngle);var J=Math.PI*(Z-90)/180,ne=m.centerX+E*Math.cos(H),fe=m.centerY+E*Math.sin(H),ye=m.centerX+E*Math.cos(J),De=m.centerY+E*Math.sin(J),Pe=tt.polarToCartesian(m.centerX,m.centerY,m.donutSize,Z),Se=tt.polarToCartesian(m.centerX,m.centerY,m.donutSize,N),ze=w>180?1:0,U=["M",ne,fe,"A",E,E,0,ze,1,ye,De];return u="donut"===m.chartType?[].concat(U,["L",Pe.x,Pe.y,"A",m.donutSize,m.donutSize,0,ze,0,Se.x,Se.y,"L",ne,fe,"z"]).join(" "):"pie"===m.chartType||"polarArea"===m.chartType?[].concat(U,["L",m.centerX,m.centerY,"L",ne,fe]).join(" "):[].concat(U).join(" "),M.roundPathCorners(u,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(l){var u=this.w,m=new $n(this.ctx),x=new Dt(this.ctx),w=new On(this.ctx),E=x.group(),M=x.group(),N=m.niceScale(0,Math.ceil(this.maxY),0),H=N.result.reverse(),Z=N.result.length;this.maxY=N.niceMax;for(var J=u.globals.radialSize,ne=J/(Z-1),fe=0;fe<Z-1;fe++){var ye=x.drawCircle(J);if(ye.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":u.config.plotOptions.polarArea.rings.strokeWidth,stroke:u.config.plotOptions.polarArea.rings.strokeColor}),u.config.yaxis[0].show){var De=w.drawYAxisTexts(this.centerX,this.centerY-J+parseInt(u.config.yaxis[0].labels.style.fontSize,10)/2,fe,H[fe]);M.add(De)}E.add(ye),J-=ne}this.drawSpokes(l),l.add(E),l.add(M)}},{key:"renderInnerDataLabels",value:function(l,u){var m=this.w,x=new Dt(this.ctx),w=x.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(u.translateX?u.translateX:0,", ").concat(u.translateY?u.translateY:0,") scale(").concat(m.config.plotOptions.pie.customScale,")")}),E=l.total.show;w.node.style.opacity=u.opacity;var M,N,H=u.centerX,Z=u.centerY;M=void 0===l.name.color?m.globals.colors[0]:l.name.color;var J=l.name.fontSize,ne=l.name.fontFamily,fe=l.name.fontWeight;N=void 0===l.value.color?m.config.chart.foreColor:l.value.color;var ye=l.value.formatter,De="",Pe="";if(E?(M=l.total.color,J=l.total.fontSize,ne=l.total.fontFamily,fe=l.total.fontWeight,Pe=l.total.label,De=l.total.formatter(m)):1===m.globals.series.length&&(De=ye(m.globals.series[0],m),Pe=m.globals.seriesNames[0]),Pe&&(Pe=l.name.formatter(Pe,l.total.show,m)),l.name.show){var Se=x.drawText({x:H,y:Z+parseFloat(l.name.offsetY),text:Pe,textAnchor:"middle",foreColor:M,fontSize:J,fontWeight:fe,fontFamily:ne});Se.node.classList.add("apexcharts-datalabel-label"),w.add(Se)}if(l.value.show){var ze=l.name.show?parseFloat(l.value.offsetY)+16:l.value.offsetY,U=x.drawText({x:H,y:Z+ze,text:De,textAnchor:"middle",foreColor:N,fontWeight:l.value.fontWeight,fontSize:l.value.fontSize,fontFamily:l.value.fontFamily});U.node.classList.add("apexcharts-datalabel-value"),w.add(U)}return w}},{key:"printInnerLabels",value:function(l,u,m,x){var w,E=this.w;x?w=void 0===l.name.color?E.globals.colors[parseInt(x.parentNode.getAttribute("rel"),10)-1]:l.name.color:E.globals.series.length>1&&l.total.show&&(w=l.total.color);var M=E.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),N=E.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");m=(0,l.value.formatter)(m,E),x||"function"!=typeof l.total.formatter||(m=l.total.formatter(E)),u=l.name.formatter(u,u===l.total.label,E),null!==M&&(M.textContent=u),null!==N&&(N.textContent=m),null!==M&&(M.style.fill=w)}},{key:"printDataLabelsInner",value:function(l,u){var m=this.w,x=l.getAttribute("data:value"),w=m.globals.seriesNames[parseInt(l.parentNode.getAttribute("rel"),10)-1];m.globals.series.length>1&&this.printInnerLabels(u,w,x,l);var E=m.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==E&&(E.style.opacity=1)}},{key:"drawSpokes",value:function(l){var u=this,m=this.w,x=new Dt(this.ctx),w=m.config.plotOptions.polarArea.spokes;if(0!==w.strokeWidth){for(var E=[],M=360/m.globals.series.length,N=0;N<m.globals.series.length;N++)E.push(tt.polarToCartesian(this.centerX,this.centerY,m.globals.radialSize,m.config.plotOptions.pie.startAngle+M*N));E.forEach(function(H,Z){var J=x.drawLine(H.x,H.y,u.centerX,u.centerY,Array.isArray(w.connectorColors)?w.connectorColors[Z]:w.connectorColors);l.add(J)})}}},{key:"revertDataLabelsInner",value:function(l,u,m){var x=this,w=this.w,E=w.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),M=!1,N=w.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),H=function(ne){var fe=ne.makeSliceOut,ye=ne.printLabel;Array.prototype.forEach.call(N,function(De){"true"===De.getAttribute("data:pieClicked")&&(fe&&(M=!0),ye&&x.printDataLabelsInner(De,u))})};if(H({makeSliceOut:!0,printLabel:!1}),u.total.show&&w.globals.series.length>1)M&&!u.total.showAlways?H({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(u,u.total.label,u.total.formatter(w));else if(H({makeSliceOut:!1,printLabel:!0}),!M)if(w.globals.selectedDataPoints.length&&w.globals.series.length>1)if(w.globals.selectedDataPoints[0].length>0){var Z=w.globals.selectedDataPoints[0],J=w.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(Z));this.printDataLabelsInner(J,u)}else E&&w.globals.selectedDataPoints.length&&0===w.globals.selectedDataPoints[0].length&&(E.style.opacity=0);else E&&w.globals.series.length>1&&(E.style.opacity=0)}}]),ve}(),Vi=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var u=this.w;this.graphics=new Dt(this.ctx),this.lineColorArr=void 0!==u.globals.stroke.colors?u.globals.stroke.colors:u.globals.colors,this.defaultSize=u.globals.svgHeight<u.globals.svgWidth?u.globals.gridHeight+1.5*u.globals.goldenPadding:u.globals.gridWidth,this.isLog=u.config.yaxis[0].logarithmic,this.coreUtils=new Fi(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(u.globals.maxY,0):u.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):u.globals.minY,this.polygons=u.config.plotOptions.radar.polygons,this.strokeWidth=u.config.stroke.show?u.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-u.config.chart.dropShadow.blur,u.config.xaxis.labels.show&&(this.size=this.size-u.globals.xAxisLabelsWidth/1.75),void 0!==u.config.plotOptions.radar.size&&(this.size=u.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return Be(ve,[{key:"draw",value:function(l){var u=this,m=this.w,x=new In(this.ctx),w=[],E=new jr(this.ctx);l.length&&(this.dataPointsLen=l[m.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var Z=m.globals.gridHeight/2+m.config.plotOptions.radar.offsetY,J=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(m.globals.gridWidth/2+m.config.plotOptions.radar.offsetX||0,", ").concat(Z||0,")")}),ne=[],fe=null,ye=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),l.forEach(function(Pe,Se){var ze=Pe.length===m.globals.dataPoints,U=u.graphics.group().attr({class:"apexcharts-series","data:longestSeries":ze,seriesName:tt.escapeString(m.globals.seriesNames[Se]),rel:Se+1,"data:realIndex":Se});u.dataRadiusOfPercent[Se]=[],u.dataRadius[Se]=[],u.angleArr[Se]=[],Pe.forEach(function(ln,Un){var cr=Math.abs(u.maxValue-u.minValue);ln+=Math.abs(u.minValue),u.isLog&&(ln=u.coreUtils.getLogVal(ln,0)),u.dataRadiusOfPercent[Se][Un]=ln/cr,u.dataRadius[Se][Un]=u.dataRadiusOfPercent[Se][Un]*u.size,u.angleArr[Se][Un]=Un*u.disAngle}),ne=u.getDataPointsPos(u.dataRadius[Se],u.angleArr[Se]);var le=u.createPaths(ne,{x:0,y:0});fe=u.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),ye=u.graphics.group({class:"apexcharts-datalabels","data:realIndex":Se}),m.globals.delayedElements.push({el:fe.node,index:Se});var we={i:Se,realIndex:Se,animationDelay:Se,initialSpeed:m.config.chart.animations.speed,dataChangeSpeed:m.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:m.globals.stroke.colors[Se],strokeLineCap:m.config.stroke.lineCap},Le=null;m.globals.previousPaths.length>0&&(Le=u.getPreviousPath(Se));for(var $e=0;$e<le.linePathsTo.length;$e++){var mt=u.graphics.renderPaths(Ze(Ze({},we),{},{pathFrom:null===Le?le.linePathsFrom[$e]:Le,pathTo:le.linePathsTo[$e],strokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[Se]:u.strokeWidth,fill:"none",drawShadow:!1}));U.add(mt);var $t=x.fillPath({seriesNumber:Se}),Xt=u.graphics.renderPaths(Ze(Ze({},we),{},{pathFrom:null===Le?le.areaPathsFrom[$e]:Le,pathTo:le.areaPathsTo[$e],strokeWidth:0,fill:$t,drawShadow:!1}));m.config.chart.dropShadow.enabled&&new Pi(u.ctx).dropShadow(Xt,Object.assign({},m.config.chart.dropShadow,{noUserSpaceOnUse:!0}),Se),U.add(Xt)}Pe.forEach(function(ln,Un){var cr=new Jn(u.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:Se,dataPointIndex:Un}),Wr=u.graphics.drawMarker(ne[Un].x,ne[Un].y,cr);Wr.attr("rel",Un),Wr.attr("j",Un),Wr.attr("index",Se),Wr.node.setAttribute("default-marker-size",cr.pSize);var pa=u.graphics.group({class:"apexcharts-series-markers"});pa&&pa.add(Wr),fe.add(pa),U.add(fe);var la=m.config.dataLabels;if(la.enabled){var Ta=la.formatter(m.globals.series[Se][Un],{seriesIndex:Se,dataPointIndex:Un,w:m});E.plotDataLabelsText({x:ne[Un].x,y:ne[Un].y,text:Ta,textAnchor:"middle",i:Se,j:Se,parent:ye,offsetCorrection:!1,dataLabelsConfig:Ze({},la)})}U.add(ye)}),w.push(U)}),this.drawPolygons({parent:J}),m.config.xaxis.labels.show){var De=this.drawXAxisTexts();J.add(De)}return w.forEach(function(Pe){J.add(Pe)}),J.add(this.yaxisLabels),J}},{key:"drawPolygons",value:function(l){for(var u=this,m=this.w,x=l.parent,w=new On(this.ctx),E=m.globals.yAxisScale[0].result.reverse(),M=E.length,N=[],H=this.size/(M-1),Z=0;Z<M;Z++)N[Z]=H*Z;N.reverse();var J=[],ne=[];N.forEach(function(fe,ye){var De=tt.getPolygonPos(fe,u.dataPointsLen),Pe="";De.forEach(function(Se,ze){if(0===ye){var U=u.graphics.drawLine(Se.x,Se.y,0,0,Array.isArray(u.polygons.connectorColors)?u.polygons.connectorColors[ze]:u.polygons.connectorColors);ne.push(U)}0===ze&&u.yaxisLabelsTextsPos.push({x:Se.x,y:Se.y}),Pe+=Se.x+","+Se.y+" "}),J.push(Pe)}),J.forEach(function(fe,ye){var De=u.polygons.strokeColors,Pe=u.polygons.strokeWidth,Se=u.graphics.drawPolygon(fe,Array.isArray(De)?De[ye]:De,Array.isArray(Pe)?Pe[ye]:Pe,m.globals.radarPolygons.fill.colors[ye]);x.add(Se)}),ne.forEach(function(fe){x.add(fe)}),m.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(fe,ye){var De=w.drawYAxisTexts(fe.x,fe.y,ye,E[ye]);u.yaxisLabels.add(De)})}},{key:"drawXAxisTexts",value:function(){var l=this,u=this.w,m=u.config.xaxis.labels,x=this.graphics.group({class:"apexcharts-xaxis"}),w=tt.getPolygonPos(this.size,this.dataPointsLen);return u.globals.labels.forEach(function(E,M){var N=u.config.xaxis.labels.formatter,H=new jr(l.ctx);if(w[M]){var Z=l.getTextPos(w[M],l.size),J=N(E,{seriesIndex:-1,dataPointIndex:M,w:u});H.plotDataLabelsText({x:Z.newX,y:Z.newY,text:J,textAnchor:Z.textAnchor,i:M,j:M,parent:x,color:Array.isArray(m.style.colors)&&m.style.colors[M]?m.style.colors[M]:"#a8a8a8",dataLabelsConfig:Ze({textAnchor:Z.textAnchor,dropShadow:{enabled:!1}},m),offsetCorrection:!1})}}),x}},{key:"createPaths",value:function(l,u){var m=this,x=[],w=[],E=[],M=[];if(l.length){w=[this.graphics.move(u.x,u.y)],M=[this.graphics.move(u.x,u.y)];var N=this.graphics.move(l[0].x,l[0].y),H=this.graphics.move(l[0].x,l[0].y);l.forEach(function(Z,J){N+=m.graphics.line(Z.x,Z.y),H+=m.graphics.line(Z.x,Z.y),J===l.length-1&&(N+="Z",H+="Z")}),x.push(N),E.push(H)}return{linePathsFrom:w,linePathsTo:x,areaPathsFrom:M,areaPathsTo:E}}},{key:"getTextPos",value:function(l,u){var m="middle",x=l.x,w=l.y;return Math.abs(l.x)>=10?l.x>0?(m="start",x+=10):l.x<0&&(m="end",x-=10):m="middle",Math.abs(l.y)>=u-10&&(l.y<0?w-=10:l.y>0&&(w+=10)),{textAnchor:m,newX:x,newY:w}}},{key:"getPreviousPath",value:function(l){for(var u=this.w,m=null,x=0;x<u.globals.previousPaths.length;x++){var w=u.globals.previousPaths[x];w.paths.length>0&&parseInt(w.realIndex,10)===parseInt(l,10)&&void 0!==u.globals.previousPaths[x].paths[0]&&(m=u.globals.previousPaths[x].paths[0].d)}return m}},{key:"getDataPointsPos",value:function(l,u){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;l=l||[],u=u||[];for(var x=[],w=0;w<m;w++){var E={};E.x=l[w]*Math.sin(u[w]),E.y=-l[w]*Math.cos(u[w]),x.push(E)}return x}}]),ve}(),Qn=function(ve){We(u,_n);var l=ot(u);function u(m){var x;j(this,u),(x=l.call(this,m)).ctx=m,x.w=m.w,x.animBeginArr=[0],x.animDur=0;var w=x.w;return x.startAngle=w.config.plotOptions.radialBar.startAngle,x.endAngle=w.config.plotOptions.radialBar.endAngle,x.totalAngle=Math.abs(w.config.plotOptions.radialBar.endAngle-w.config.plotOptions.radialBar.startAngle),x.trackStartAngle=w.config.plotOptions.radialBar.track.startAngle,x.trackEndAngle=w.config.plotOptions.radialBar.track.endAngle,x.barLabels=x.w.config.plotOptions.radialBar.barLabels,x.donutDataLabels=x.w.config.plotOptions.radialBar.dataLabels,x.radialDataLabels=x.donutDataLabels,x.trackStartAngle||(x.trackStartAngle=x.startAngle),x.trackEndAngle||(x.trackEndAngle=x.endAngle),360===x.endAngle&&(x.endAngle=359.99),x.margin=parseInt(w.config.plotOptions.radialBar.track.margin,10),x.onBarLabelClick=x.onBarLabelClick.bind(Ct(x)),x}return Be(u,[{key:"draw",value:function(m){var x=this.w,w=new Dt(this.ctx),E=w.group({class:"apexcharts-radialbar"});if(x.globals.noData)return E;var M=w.group(),N=this.defaultSize/2,H=x.globals.gridWidth/2,Z=this.defaultSize/2.05;x.config.chart.sparkline.enabled||(Z=Z-x.config.stroke.width-x.config.chart.dropShadow.blur);var J=x.globals.fill.colors;if(x.config.plotOptions.radialBar.track.show){var ne=this.drawTracks({size:Z,centerX:H,centerY:N,colorArr:J,series:m});M.add(ne)}var fe=this.drawArcs({size:Z,centerX:H,centerY:N,colorArr:J,series:m}),ye=360;x.config.plotOptions.radialBar.startAngle<0&&(ye=this.totalAngle);var De=(360-ye)/360;if(x.globals.radialSize=Z-Z*De,this.radialDataLabels.value.show){var Pe=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);x.globals.radialSize+=Pe*De}return M.add(fe.g),"front"===x.config.plotOptions.radialBar.hollow.position&&(fe.g.add(fe.elHollow),fe.dataLabels&&fe.g.add(fe.dataLabels)),E.add(M),E}},{key:"drawTracks",value:function(m){var x=this.w,w=new Dt(this.ctx),E=w.group({class:"apexcharts-tracks"}),M=new Pi(this.ctx),N=new In(this.ctx),H=this.getStrokeWidth(m);m.size=m.size-H/2;for(var Z=0;Z<m.series.length;Z++){var J=w.group({class:"apexcharts-radialbar-track apexcharts-track"});E.add(J),J.attr({rel:Z+1}),m.size=m.size-H-this.margin;var ne=x.config.plotOptions.radialBar.track,fe=N.fillPath({seriesNumber:0,size:m.size,fillColors:Array.isArray(ne.background)?ne.background[Z]:ne.background,solid:!0}),ye=this.trackStartAngle,De=this.trackEndAngle;Math.abs(De)+Math.abs(ye)>=360&&(De=360-Math.abs(this.startAngle)-.1);var Pe=w.drawPath({d:"",stroke:fe,strokeWidth:H*parseInt(ne.strokeWidth,10)/100,fill:"none",strokeOpacity:ne.opacity,classes:"apexcharts-radialbar-area"});ne.dropShadow.enabled&&M.dropShadow(Pe,ne.dropShadow),J.add(Pe),Pe.attr("id","apexcharts-radialbarTrack-"+Z),this.animatePaths(Pe,{centerX:m.centerX,centerY:m.centerY,endAngle:De,startAngle:ye,size:m.size,i:Z,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:x.globals.easing})}return E}},{key:"drawArcs",value:function(m){var x=this.w,w=new Dt(this.ctx),E=new In(this.ctx),M=new Pi(this.ctx),N=w.group(),H=this.getStrokeWidth(m);m.size=m.size-H/2;var Z=x.config.plotOptions.radialBar.hollow.background,J=m.size-H*m.series.length-this.margin*m.series.length-H*parseInt(x.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,ne=J-x.config.plotOptions.radialBar.hollow.margin;void 0!==x.config.plotOptions.radialBar.hollow.image&&(Z=this.drawHollowImage(m,N,J,Z));var fe=this.drawHollow({size:ne,centerX:m.centerX,centerY:m.centerY,fill:Z||"transparent"});x.config.plotOptions.radialBar.hollow.dropShadow.enabled&&M.dropShadow(fe,x.config.plotOptions.radialBar.hollow.dropShadow);var De=1;!this.radialDataLabels.total.show&&x.globals.series.length>1&&(De=0);var Pe=null;this.radialDataLabels.show&&(Pe=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:J,centerX:m.centerX,centerY:m.centerY,opacity:De})),"back"===x.config.plotOptions.radialBar.hollow.position&&(N.add(fe),Pe&&N.add(Pe));var Se=!1;x.config.plotOptions.radialBar.inverseOrder&&(Se=!0);for(var ze=Se?m.series.length-1:0;Se?ze>=0:ze<m.series.length;Se?ze--:ze++){var U=w.group({class:"apexcharts-series apexcharts-radial-series",seriesName:tt.escapeString(x.globals.seriesNames[ze])});N.add(U),U.attr({rel:ze+1,"data:realIndex":ze}),this.ctx.series.addCollapsedClassToSeries(U,ze),m.size=m.size-H-this.margin;var le=E.fillPath({seriesNumber:ze,size:m.size,value:m.series[ze]}),we=this.startAngle,Le=void 0,$e=tt.negToZero(m.series[ze]>100?100:m.series[ze])/100,mt=Math.round(this.totalAngle*$e)+this.startAngle,$t=void 0;x.globals.dataChanged&&(Le=this.startAngle,$t=Math.round(this.totalAngle*tt.negToZero(x.globals.previousPaths[ze])/100)+Le),Math.abs(mt)+Math.abs(we)>=360&&(mt-=.01),Math.abs($t)+Math.abs(Le)>=360&&($t-=.01);var Xt=mt-we,Li=Array.isArray(x.config.stroke.dashArray)?x.config.stroke.dashArray[ze]:x.config.stroke.dashArray,Ji=w.drawPath({d:"",stroke:le,strokeWidth:H,fill:"none",fillOpacity:x.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+ze,strokeDashArray:Li});if(Dt.setAttrs(Ji.node,{"data:angle":Xt,"data:value":m.series[ze]}),x.config.chart.dropShadow.enabled&&M.dropShadow(Ji,x.config.chart.dropShadow,ze),M.setSelectionFilter(Ji,0,ze),this.addListeners(Ji,this.radialDataLabels),U.add(Ji),Ji.attr({index:0,j:ze}),this.barLabels.enabled){var Un=tt.polarToCartesian(m.centerX,m.centerY,m.size,we),cr=this.barLabels.formatter(x.globals.seriesNames[ze],{seriesIndex:ze,w:x}),Wr=["apexcharts-radialbar-label"];this.barLabels.onClick||Wr.push("apexcharts-no-click");var pa=this.barLabels.useSeriesColors?x.globals.colors[ze]:x.config.chart.foreColor;pa||(pa=x.config.chart.foreColor);var la=Un.x-this.barLabels.margin,Ta=Un.y,es=w.drawText({x:la,y:Ta,text:cr,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:pa,cssClass:Wr.join(" ")});es.on("click",this.onBarLabelClick),es.attr({rel:ze+1}),0!==we&&es.attr({"transform-origin":"".concat(la," ").concat(Ta),transform:"rotate(".concat(we," 0 0)")}),U.add(es)}var ms=0;!this.initialAnim||x.globals.resized||x.globals.dataChanged||(ms=x.config.chart.animations.speed),x.globals.dataChanged&&(ms=x.config.chart.animations.dynamicAnimation.speed),this.animDur=ms/(1.2*m.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Ji,{centerX:m.centerX,centerY:m.centerY,endAngle:mt,startAngle:we,prevEndAngle:$t,prevStartAngle:Le,size:m.size,i:ze,totalItems:2,animBeginArr:this.animBeginArr,dur:ms,shouldSetPrevPaths:!0,easing:x.globals.easing})}return{g:N,elHollow:fe,dataLabels:Pe}}},{key:"drawHollow",value:function(m){var x=new Dt(this.ctx).drawCircle(2*m.size);return x.attr({class:"apexcharts-radialbar-hollow",cx:m.centerX,cy:m.centerY,r:m.size,fill:m.fill}),x}},{key:"drawHollowImage",value:function(m,x,w,E){var M=this.w,N=new In(this.ctx),H=tt.randomId(),Z=M.config.plotOptions.radialBar.hollow.image;if(M.config.plotOptions.radialBar.hollow.imageClipped)N.clippedImgArea({width:w,height:w,image:Z,patternID:"pattern".concat(M.globals.cuid).concat(H)}),E="url(#pattern".concat(M.globals.cuid).concat(H,")");else{var J=M.config.plotOptions.radialBar.hollow.imageWidth,ne=M.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===J&&void 0===ne){var fe=M.globals.dom.Paper.image(Z).loaded(function(De){this.move(m.centerX-De.width/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,m.centerY-De.height/2+M.config.plotOptions.radialBar.hollow.imageOffsetY)});x.add(fe)}else{var ye=M.globals.dom.Paper.image(Z).loaded(function(De){this.move(m.centerX-J/2+M.config.plotOptions.radialBar.hollow.imageOffsetX,m.centerY-ne/2+M.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(J,ne)});x.add(ye)}}return E}},{key:"getStrokeWidth",value:function(m){return m.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(m.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(m){var x=parseInt(m.target.getAttribute("rel"),10)-1,w=this.barLabels.onClick,E=this.w;w&&w(E.globals.seriesNames[x],{w:E,seriesIndex:x})}}]),u}(),Yt=function(ve){We(u,ai);var l=ot(u);function u(){return j(this,u),l.apply(this,arguments)}return Be(u,[{key:"draw",value:function(m,x){var w=this.w,E=new Dt(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=m,this.seriesRangeStart=w.globals.seriesRangeStart,this.seriesRangeEnd=w.globals.seriesRangeEnd,this.barHelpers.initVariables(m);for(var M=E.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),N=0;N<m.length;N++){var H,Z,J,ne,fe=void 0,ye=void 0,De=w.globals.comboCharts?x[N]:N,Pe=E.group({class:"apexcharts-series",seriesName:tt.escapeString(w.globals.seriesNames[De]),rel:N+1,"data:realIndex":De});this.ctx.series.addCollapsedClassToSeries(Pe,De),m[N].length>0&&(this.visibleI=this.visibleI+1);var Se=0,ze=0;this.yRatio.length>1&&(this.yaxisIndex=De);var U=this.barHelpers.initialPositions();ye=U.y,ne=U.zeroW,fe=U.x,ze=U.barWidth,Se=U.barHeight,H=U.xDivision,Z=U.yDivision,J=U.zeroH;for(var le=E.group({class:"apexcharts-datalabels","data:realIndex":De}),we=E.group({class:"apexcharts-rangebar-goals-markers"}),Le=0;Le<w.globals.dataPoints;Le++){var $e,mt=this.barHelpers.getStrokeWidth(N,Le,De),$t=this.seriesRangeStart[N][Le],Xt=this.seriesRangeEnd[N][Le],Li=null,Ji=null,ln=null,Un={x:fe,y:ye,strokeWidth:mt,elSeries:Pe},cr=this.seriesLen;if(w.config.plotOptions.bar.rangeBarGroupRows&&(cr=1),void 0===w.config.series[N].data[Le])break;if(this.isHorizontal){if(ln=ye+Se*this.visibleI,w.config.series[N].data[Le].x){var pa=this.detectOverlappingBars({i:N,j:Le,barYPosition:ln,srty:(Z-Se*cr)/2,barHeight:Se,yDivision:Z,initPositions:U});Se=pa.barHeight,ln=pa.barYPosition}ze=(Li=this.drawRangeBarPaths(Ze({indexes:{i:N,j:Le,realIndex:De},barHeight:Se,barYPosition:ln,zeroW:ne,yDivision:Z,y1:$t,y2:Xt},Un))).barWidth}else{if(w.globals.isXNumeric&&(fe=(w.globals.seriesX[N][Le]-w.globals.minX)/this.xRatio-ze/2),Ji=fe+ze*this.visibleI,w.config.series[N].data[Le].x){var Ta=this.detectOverlappingBars({i:N,j:Le,barXPosition:Ji,srtx:(H-ze*cr)/2,barWidth:ze,xDivision:H,initPositions:U});ze=Ta.barWidth,Ji=Ta.barXPosition}Se=(Li=this.drawRangeColumnPaths(Ze({indexes:{i:N,j:Le,realIndex:De},barWidth:ze,barXPosition:Ji,zeroH:J,xDivision:H},Un))).barHeight}var es=this.barHelpers.drawGoalLine({barXPosition:Li.barXPosition,barYPosition:ln,goalX:Li.goalX,goalY:Li.goalY,barHeight:Se,barWidth:ze});es&&we.add(es),ye=Li.y,fe=Li.x;var ms=this.barHelpers.getPathFillColor(m,N,Le,De);this.renderSeries((Me($e={realIndex:De,pathFill:ms,lineFill:w.globals.stroke.colors[De],j:Le,i:N,x:fe,y:ye,y1:$t,y2:Xt,pathFrom:Li.pathFrom,pathTo:Li.pathTo,strokeWidth:mt,elSeries:Pe,series:m,barHeight:Se,barWidth:ze,barXPosition:Ji,barYPosition:ln},"barWidth",ze),Me($e,"elDataLabelsWrap",le),Me($e,"elGoalsMarkers",we),Me($e,"visibleSeries",this.visibleI),Me($e,"type","rangebar"),$e))}M.add(Pe)}return M}},{key:"detectOverlappingBars",value:function(m){var x=m.i,w=m.j,E=m.barYPosition,M=m.barXPosition,N=m.srty,H=m.srtx,Z=m.barHeight,J=m.barWidth,ne=m.yDivision,fe=m.xDivision,ye=m.initPositions,De=this.w,Pe=[],Se=De.config.series[x].data[w].rangeName,ze=De.config.series[x].data[w].x,U=Array.isArray(ze)?ze.join(" "):ze,le=De.globals.labels.map(function(Le){return Array.isArray(Le)?Le.join(" "):Le}).indexOf(U),we=De.globals.seriesRange[x].findIndex(function(Le){return Le.x===U&&Le.overlaps.length>0});return this.isHorizontal?(E=De.config.plotOptions.bar.rangeBarGroupRows?N+ne*le:N+Z*this.visibleI+ne*le,we>-1&&!De.config.plotOptions.bar.rangeBarOverlap&&(Pe=De.globals.seriesRange[x][we].overlaps).indexOf(Se)>-1&&(E=(Z=ye.barHeight/Pe.length)*this.visibleI+ne*(100-parseInt(this.barOptions.barHeight,10))/100/2+Z*(this.visibleI+Pe.indexOf(Se))+ne*le)):(le>-1&&(M=De.config.plotOptions.bar.rangeBarGroupRows?H+fe*le:H+J*this.visibleI+fe*le),we>-1&&!De.config.plotOptions.bar.rangeBarOverlap&&(Pe=De.globals.seriesRange[x][we].overlaps).indexOf(Se)>-1&&(M=(J=ye.barWidth/Pe.length)*this.visibleI+fe*(100-parseInt(this.barOptions.barWidth,10))/100/2+J*(this.visibleI+Pe.indexOf(Se))+fe*le)),{barYPosition:E,barXPosition:M,barHeight:Z,barWidth:J}}},{key:"drawRangeColumnPaths",value:function(m){var x=m.indexes,w=m.x,E=m.xDivision,M=m.barWidth,N=m.barXPosition,H=m.zeroH,Z=this.w,J=x.i,ne=x.j,fe=this.yRatio[this.yaxisIndex],ye=x.realIndex,De=this.getRangeValue(ye,ne),Pe=Math.min(De.start,De.end),Se=Math.max(De.start,De.end);null==this.series[J][ne]?Pe=H:(Pe=H-Pe/fe,Se=H-Se/fe);var ze=Math.abs(Se-Pe),U=this.barHelpers.getColumnPaths({barXPosition:N,barWidth:M,y1:Pe,y2:Se,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:x.realIndex,i:ye,j:ne,w:Z});if(Z.globals.isXNumeric){var le=this.getBarXForNumericXAxis({x:w,j:ne,realIndex:ye,barWidth:M});w=le.x,N=le.barXPosition}else w+=E;return{pathTo:U.pathTo,pathFrom:U.pathFrom,barHeight:ze,x:w,y:Se,goalY:this.barHelpers.getGoalValues("y",null,H,J,ne),barXPosition:N}}},{key:"drawRangeBarPaths",value:function(m){var x=m.indexes,w=m.y,N=m.yDivision,H=m.barHeight,Z=m.barYPosition,J=m.zeroW,ne=this.w,fe=J+m.y1/this.invertedYRatio,ye=J+m.y2/this.invertedYRatio,De=Math.abs(ye-fe),Pe=this.barHelpers.getBarpaths({barYPosition:Z,barHeight:H,x1:fe,x2:ye,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:x.realIndex,realIndex:x.realIndex,j:x.j,w:ne});return ne.globals.isXNumeric||(w+=N),{pathTo:Pe.pathTo,pathFrom:Pe.pathFrom,barWidth:De,x:ye,goalX:this.barHelpers.getGoalValues("x",J,null,x.realIndex,x.j),y:w}}},{key:"getRangeValue",value:function(m,x){var w=this.w;return{start:w.globals.seriesRangeStart[m][x],end:w.globals.seriesRangeEnd[m][x]}}}]),u}(),Ut=function(){function ve(l){j(this,ve),this.w=l.w,this.lineCtx=l}return Be(ve,[{key:"sameValueSeriesFix",value:function(l,u){var m=this.w;if(("gradient"===m.config.fill.type||"gradient"===m.config.fill.type[l])&&new Fi(this.lineCtx.ctx,m).seriesHaveSameValues(l)){var x=u[l].slice();x[x.length-1]=x[x.length-1]+1e-6,u[l]=x}return u}},{key:"calculatePoints",value:function(l){var u=l.series,x=l.x,w=l.y,E=l.i,M=l.j,N=l.prevY,H=this.w,Z=[],J=[];if(0===M){var ne=this.lineCtx.categoryAxisCorrection+H.config.markers.offsetX;H.globals.isXNumeric&&(ne=(H.globals.seriesX[l.realIndex][0]-H.globals.minX)/this.lineCtx.xRatio+H.config.markers.offsetX),Z.push(ne),J.push(tt.isNumber(u[E][0])?N+H.config.markers.offsetY:null),Z.push(x+H.config.markers.offsetX),J.push(tt.isNumber(u[E][M+1])?w+H.config.markers.offsetY:null)}else Z.push(x+H.config.markers.offsetX),J.push(tt.isNumber(u[E][M+1])?w+H.config.markers.offsetY:null);return{x:Z,y:J}}},{key:"checkPreviousPaths",value:function(l){for(var u=l.pathFromLine,m=l.pathFromArea,x=l.realIndex,w=this.w,E=0;E<w.globals.previousPaths.length;E++){var M=w.globals.previousPaths[E];("line"===M.type||"area"===M.type)&&M.paths.length>0&&parseInt(M.realIndex,10)===parseInt(x,10)&&("line"===M.type?(this.lineCtx.appendPathFrom=!1,u=w.globals.previousPaths[E].paths[0].d):"area"===M.type&&(this.lineCtx.appendPathFrom=!1,m=w.globals.previousPaths[E].paths[0].d,w.config.stroke.show&&w.globals.previousPaths[E].paths[1]&&(u=w.globals.previousPaths[E].paths[1].d)))}return{pathFromLine:u,pathFromArea:m}}},{key:"determineFirstPrevY",value:function(l){var u,m,x=l.i,w=l.series,E=l.prevY,M=l.lineYPosition,N=this.w,H=N.config.chart.stacked&&!N.globals.comboCharts||N.config.chart.stacked&&N.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(u=this.w.config.series[x])||void 0===u?void 0:u.type));if(void 0!==(null===(m=w[x])||void 0===m?void 0:m[0]))E=(M=H&&x>0?this.lineCtx.prevSeriesY[x-1][0]:this.lineCtx.zeroY)-w[x][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?w[x][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(H&&x>0&&void 0===w[x][0])for(var Z=x-1;Z>=0;Z--)if(null!=w[Z][0]){E=M=this.lineCtx.prevSeriesY[Z][0];break}return{prevY:E,lineYPosition:M}}}]),ve}(),pt=function(ve){for(var l="",u=0;u<ve.length;u++){var m=ve[u],x=m.length;x>4?(l+="C".concat(m[0],", ").concat(m[1]),l+=", ".concat(m[2],", ").concat(m[3]),l+=", ".concat(m[4],", ").concat(m[5])):x>2&&(l+="S".concat(m[0],", ").concat(m[1]),l+=", ".concat(m[2],", ").concat(m[3]))}return l},Ke=function(ve){var l=function(ve){for(var l,u,m,x,w=function(Z){for(var J=[],ne=Z[0],fe=Z[1],ye=J[0]=rt(ne,fe),De=1,Pe=Z.length-1;De<Pe;De++)J[De]=.5*(ye+(ye=rt(ne=fe,fe=Z[De+1])));return J[De]=ye,J}(ve),E=ve.length-1,M=[],N=0;N<E;N++)m=rt(ve[N],ve[N+1]),Math.abs(m)<1e-6?w[N]=w[N+1]=0:(x=(l=w[N]/m)*l+(u=w[N+1]/m)*u)>9&&(x=3*m/Math.sqrt(x),w[N]=x*l,w[N+1]=x*u);for(var H=0;H<=E;H++)x=(ve[Math.min(E,H+1)][0]-ve[Math.max(0,H-1)][0])/(6*(1+w[H]*w[H])),M.push([x||0,w[H]*x||0]);return M}(ve),u=ve[1],m=ve[0],x=[],w=l[1],E=l[0];x.push(m,[m[0]+E[0],m[1]+E[1],u[0]-w[0],u[1]-w[1],u[0],u[1]]);for(var M=2,N=l.length;M<N;M++){var H=ve[M],Z=l[M];x.push([H[0]-Z[0],H[1]-Z[1],H[0],H[1]])}return x};function rt(ve,l){return(l[1]-ve[1])/(l[0]-ve[0])}var Ot=function(){function ve(l,u,m){j(this,ve),this.ctx=l,this.w=l.w,this.xyRatios=u,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||m,this.scatter=new ia(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Ut(this),this.markers=new Jn(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return Be(ve,[{key:"draw",value:function(l,u,m,x){var w,E=this.w,M=new Dt(this.ctx),N=E.globals.comboCharts?u:E.config.chart.type,H=M.group({class:"apexcharts-".concat(N,"-series apexcharts-plot-series")}),Z=new Fi(this.ctx,E);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,l=Z.getLogSeries(l),this.yRatio=Z.getLogYRatios(this.yRatio);for(var J=[],ne=0;ne<l.length;ne++){l=this.lineHelpers.sameValueSeriesFix(ne,l);var fe=E.globals.comboCharts?m[ne]:ne;this._initSerieVariables(l,ne,fe);var ye=[],De=[],Pe=[],Se=E.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,fe),E.globals.isXNumeric&&E.globals.seriesX.length>0&&(Se=(E.globals.seriesX[fe][0]-E.globals.minX)/this.xRatio),Pe.push(Se);var ze,U=Se,le=void 0,we=U,Le=this.zeroY,$e=this.zeroY;Le=this.lineHelpers.determineFirstPrevY({i:ne,series:l,prevY:Le,lineYPosition:0}).prevY,ye.push("monotonCubic"===E.config.stroke.curve&&null===l[ne][0]?null:Le),ze=Le,"rangeArea"===N&&(le=$e=this.lineHelpers.determineFirstPrevY({i:ne,series:x,prevY:$e,lineYPosition:0}).prevY,De.push($e));var mt={type:N,series:l,realIndex:fe,i:ne,x:Se,y:1,pX:U,pY:ze,pathsFrom:this._calculatePathsFrom({type:N,series:l,i:ne,realIndex:fe,prevX:we,prevY:Le,prevY2:$e}),linePaths:[],areaPaths:[],seriesIndex:m,lineYPosition:0,xArrj:Pe,yArrj:ye,y2Arrj:De,seriesRangeEnd:x},$t=this._iterateOverDataPoints(Ze(Ze({},mt),{},{iterations:"rangeArea"===N?l[ne].length-1:void 0,isRangeStart:!0}));if("rangeArea"===N){var Xt=this._calculatePathsFrom({series:x,i:ne,realIndex:fe,prevX:we,prevY:$e}),Li=this._iterateOverDataPoints(Ze(Ze({},mt),{},{series:x,pY:le,pathsFrom:Xt,iterations:x[ne].length-1,isRangeStart:!1}));$t.linePaths[0]=Li.linePath+$t.linePath,$t.pathFromLine=Li.pathFromLine+$t.pathFromLine}this._handlePaths({type:N,realIndex:fe,i:ne,paths:$t}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),J.push(this.elSeries)}if(void 0!==(null===(w=E.config.series[0])||void 0===w?void 0:w.zIndex)&&J.sort(function(Un,cr){return Number(Un.node.getAttribute("zIndex"))-Number(cr.node.getAttribute("zIndex"))}),E.config.chart.stacked)for(var Ji=J.length;Ji>0;Ji--)H.add(J[Ji-1]);else for(var ln=0;ln<J.length;ln++)H.add(J[ln]);return H}},{key:"_initSerieVariables",value:function(l,u,m){var x=this.w,w=new Dt(this.ctx);this.xDivision=x.globals.gridWidth/(x.globals.dataPoints-("on"===x.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(x.config.stroke.width)?x.config.stroke.width[m]:x.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=m),this.isReversed=x.config.yaxis[this.yaxisIndex]&&x.config.yaxis[this.yaxisIndex].reversed,this.zeroY=x.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?x.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>x.globals.gridHeight||"end"===x.config.plotOptions.area.fillTo)&&(this.areaBottomY=x.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=w.group({class:"apexcharts-series",zIndex:void 0!==x.config.series[m].zIndex?x.config.series[m].zIndex:m,seriesName:tt.escapeString(x.globals.seriesNames[m])}),this.elPointsMain=w.group({class:"apexcharts-series-markers-wrap","data:realIndex":m}),this.elDataLabelsWrap=w.group({class:"apexcharts-datalabels","data:realIndex":m}),this.elSeries.attr({"data:longestSeries":l[u].length===x.globals.dataPoints,rel:u+1,"data:realIndex":m}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(l){var u,m,x,w,E=l.type,M=l.series,N=l.i,H=l.realIndex,Z=l.prevX,J=l.prevY,ne=l.prevY2,fe=this.w,ye=new Dt(this.ctx);if(null===M[N][0]){for(var De=0;De<M[N].length;De++)if(null!==M[N][De]){u=ye.move(Z=this.xDivision*De,J=this.zeroY-M[N][De]/this.yRatio[this.yaxisIndex]),m=ye.move(Z,this.areaBottomY);break}}else u=ye.move(Z,J),"rangeArea"===E&&(u=ye.move(Z,ne)+ye.line(Z,J)),m=ye.move(Z,this.areaBottomY)+ye.line(Z,J);if(x=ye.move(-1,this.zeroY)+ye.line(-1,this.zeroY),w=ye.move(-1,this.zeroY)+ye.line(-1,this.zeroY),fe.globals.previousPaths.length>0){var Pe=this.lineHelpers.checkPreviousPaths({pathFromLine:x,pathFromArea:w,realIndex:H});x=Pe.pathFromLine,w=Pe.pathFromArea}return{prevX:Z,prevY:J,linePath:u,areaPath:m,pathFromLine:x,pathFromArea:w}}},{key:"_handlePaths",value:function(l){var u=l.type,m=l.realIndex,x=l.i,w=l.paths,E=this.w,M=new Dt(this.ctx),N=new In(this.ctx);this.prevSeriesY.push(w.yArrj),E.globals.seriesXvalues[m]=w.xArrj,E.globals.seriesYvalues[m]=w.yArrj;var H=E.config.forecastDataPoints;if(H.count>0&&"rangeArea"!==u){var Z=E.globals.seriesXvalues[m][E.globals.seriesXvalues[m].length-H.count-1],J=M.drawRect(Z,0,E.globals.gridWidth,E.globals.gridHeight,0);E.globals.dom.elForecastMask.appendChild(J.node);var ne=M.drawRect(0,0,Z,E.globals.gridHeight,0);E.globals.dom.elNonForecastMask.appendChild(ne.node)}this.pointsChart||E.globals.delayedElements.push({el:this.elPointsMain.node,index:m});var fe={i:x,realIndex:m,animationDelay:x,initialSpeed:E.config.chart.animations.speed,dataChangeSpeed:E.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(u)};if("area"===u)for(var ye=N.fillPath({seriesNumber:m}),De=0;De<w.areaPaths.length;De++){var Pe=M.renderPaths(Ze(Ze({},fe),{},{pathFrom:w.pathFromArea,pathTo:w.areaPaths[De],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:ye}));this.elSeries.add(Pe)}if(E.config.stroke.show&&!this.pointsChart){var Se=null;if("line"===u)Se=N.fillPath({seriesNumber:m,i:x});else if("solid"===E.config.stroke.fill.type)Se=E.globals.stroke.colors[m];else{var ze=E.config.fill;E.config.fill=E.config.stroke.fill,Se=N.fillPath({seriesNumber:m,i:x}),E.config.fill=ze}for(var U=0;U<w.linePaths.length;U++){var le=Se;"rangeArea"===u&&(le=N.fillPath({seriesNumber:m}));var we=Ze(Ze({},fe),{},{pathFrom:w.pathFromLine,pathTo:w.linePaths[U],stroke:Se,strokeWidth:this.strokeWidth,strokeLineCap:E.config.stroke.lineCap,fill:"rangeArea"===u?le:"none"}),Le=M.renderPaths(we);if(this.elSeries.add(Le),Le.attr("fill-rule","evenodd"),H.count>0&&"rangeArea"!==u){var $e=M.renderPaths(we);$e.node.setAttribute("stroke-dasharray",H.dashArray),H.strokeWidth&&$e.node.setAttribute("stroke-width",H.strokeWidth),this.elSeries.add($e),$e.attr("clip-path","url(#forecastMask".concat(E.globals.cuid,")")),Le.attr("clip-path","url(#nonForecastMask".concat(E.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(l){var u,m=this,x=l.type,w=l.series,E=l.iterations,M=l.realIndex,N=l.i,H=l.x,Z=l.y,J=l.pX,ne=l.pY,fe=l.pathsFrom,ye=l.linePaths,De=l.areaPaths,Pe=l.seriesIndex,Se=l.lineYPosition,ze=l.xArrj,U=l.yArrj,le=l.y2Arrj,we=l.isRangeStart,Le=l.seriesRangeEnd,$e=this.w,mt=new Dt(this.ctx),$t=this.yRatio,Xt=fe.prevY,Li=fe.linePath,Ji=fe.areaPath,ln=fe.pathFromLine,Un=fe.pathFromArea,cr=tt.isNumber($e.globals.minYArr[M])?$e.globals.minYArr[M]:$e.globals.minY;E||(E=$e.globals.dataPoints>1?$e.globals.dataPoints-1:$e.globals.dataPoints);for(var Wr=function(Qr,Ms){return Ms-Qr/$t[m.yaxisIndex]+2*(m.isReversed?Qr/$t[m.yaxisIndex]:0)},pa=Z,la=$e.config.chart.stacked&&!$e.globals.comboCharts||$e.config.chart.stacked&&$e.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(u=this.w.config.series[M])||void 0===u?void 0:u.type)),Ta=0;Ta<E;Ta++){var es=null==w[N][Ta+1];if($e.globals.isXNumeric){var ms=$e.globals.seriesX[M][Ta+1];void 0===$e.globals.seriesX[M][Ta+1]&&(ms=$e.globals.seriesX[M][E-1]),H=(ms-$e.globals.minX)/this.xRatio}else H+=this.xDivision;Se=la&&N>0&&$e.globals.collapsedSeries.length<$e.config.series.length-1?this.prevSeriesY[function(Qr){for(var Ms=Qr,na=0;na<$e.globals.series.length;na++)if($e.globals.collapsedSeriesIndices.indexOf(Qr)>-1){Ms--;break}return Ms>=0?Ms:0}(N-1)][Ta+1]:this.zeroY,es?Z=Wr(cr,Se):(Z=Wr(w[N][Ta+1],Se),"rangeArea"===x&&(pa=Wr(Le[N][Ta+1],Se))),ze.push(H),U.push(es&&"smooth"===$e.config.stroke.curve?null:Z),le.push(pa);var Is=this.lineHelpers.calculatePoints({series:w,x:H,y:Z,realIndex:M,i:N,j:Ta,prevY:Xt}),va=this._createPaths({type:x,series:w,i:N,realIndex:M,j:Ta,x:H,y:Z,y2:pa,xArrj:ze,yArrj:U,y2Arrj:le,pX:J,pY:ne,linePath:Li,areaPath:Ji,linePaths:ye,areaPaths:De,seriesIndex:Pe,isRangeStart:we});De=va.areaPaths,ye=va.linePaths,J=va.pX,ne=va.pY,Ji=va.areaPath,Li=va.linePath,!this.appendPathFrom||"monotoneCubic"===$e.config.stroke.curve&&"rangeArea"===x||(ln+=mt.line(H,this.zeroY),Un+=mt.line(H,this.zeroY)),this.handleNullDataPoints(w,Is,N,Ta,M),this._handleMarkersAndLabels({type:x,pointsPos:Is,i:N,j:Ta,realIndex:M,isRangeStart:we})}return{yArrj:U,xArrj:ze,pathFromArea:Un,areaPaths:De,pathFromLine:ln,linePaths:ye,linePath:Li,areaPath:Ji}}},{key:"_handleMarkersAndLabels",value:function(l){var u=l.type,m=l.pointsPos,x=l.isRangeStart,w=l.i,E=l.j,M=l.realIndex,N=this.w,H=new jr(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,E,{realIndex:M,pointsPos:m,zRatio:this.zRatio,elParent:this.elPointsMain});else{N.globals.series[w].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var Z=this.markers.plotChartMarkers(m,M,E+1);null!==Z&&this.elPointsMain.add(Z)}var J=H.drawDataLabel({type:u,isRangeStart:x,pos:m,i:M,j:E+1});null!==J&&this.elDataLabelsWrap.add(J)}},{key:"_createPaths",value:function(l){var u=l.type,m=l.series,x=l.i,w=l.realIndex,E=l.j,M=l.x,N=l.y,H=l.xArrj,Z=l.yArrj,J=l.y2,ne=l.y2Arrj,fe=l.pX,ye=l.pY,De=l.linePath,Pe=l.areaPath,Se=l.linePaths,ze=l.areaPaths,U=l.seriesIndex,le=l.isRangeStart,we=this.w,Le=new Dt(this.ctx),$e=we.config.stroke.curve,mt=this.areaBottomY;if(Array.isArray(we.config.stroke.curve)&&($e=Array.isArray(U)?we.config.stroke.curve[U[x]]:we.config.stroke.curve[x]),"rangeArea"===u&&(we.globals.hasNullValues||we.config.forecastDataPoints.count>0)&&"monotoneCubic"===$e&&($e="straight"),"monotoneCubic"===$e){var $t="rangeArea"===u?H.length===we.globals.dataPoints:E===m[x].length-2,Xt=H.map(function(la,Ta){return[H[Ta],Z[Ta]]}).filter(function(la){return null!==la[1]});if($t&&Xt.length>1){var Li=Ke(Xt);if(De+=pt(Li),null===m[x][0]?Pe=De:Pe+=pt(Li),"rangeArea"===u&&le){De+=Le.line(H[H.length-1],ne[ne.length-1]);var Ji=H.slice().reverse(),ln=ne.slice().reverse(),Un=Ji.map(function(la,Ta){return[Ji[Ta],ln[Ta]]}),cr=Ke(Un);Pe=De+=pt(cr)}else Pe+=Le.line(Xt[Xt.length-1][0],mt)+Le.line(Xt[0][0],mt)+Le.move(Xt[0][0],Xt[0][1])+"z";Se.push(De),ze.push(Pe)}}else if("smooth"===$e){var Wr=.35*(M-fe);we.globals.hasNullValues?(null!==m[x][E]&&(null!==m[x][E+1]?(De=Le.move(fe,ye)+Le.curve(fe+Wr,ye,M-Wr,N,M+1,N),Pe=Le.move(fe+1,ye)+Le.curve(fe+Wr,ye,M-Wr,N,M+1,N)+Le.line(M,mt)+Le.line(fe,mt)+"z"):(De=Le.move(fe,ye),Pe=Le.move(fe,ye)+"z")),Se.push(De),ze.push(Pe)):(De+=Le.curve(fe+Wr,ye,M-Wr,N,M,N),Pe+=Le.curve(fe+Wr,ye,M-Wr,N,M,N)),fe=M,ye=N,E===m[x].length-2&&(Pe=Pe+Le.curve(fe,ye,M,N,M,mt)+Le.move(M,N)+"z","rangeArea"===u&&le?De=De+Le.curve(fe,ye,M,N,M,J)+Le.move(M,J)+"z":we.globals.hasNullValues||(Se.push(De),ze.push(Pe)))}else null===m[x][E+1]&&(De+=Le.move(M,N),Pe=Pe+Le.line(we.globals.isXNumeric?(we.globals.seriesX[w][E]-we.globals.minX)/this.xRatio:M-this.xDivision,mt)+Le.move(M,N)+"z"),null===m[x][E]&&(De+=Le.move(M,N),Pe+=Le.move(M,mt)),"stepline"===$e?(De=De+Le.line(M,null,"H")+Le.line(null,N,"V"),Pe=Pe+Le.line(M,null,"H")+Le.line(null,N,"V")):"straight"===$e&&(De+=Le.line(M,N),Pe+=Le.line(M,N)),E===m[x].length-2&&(Pe=Pe+Le.line(M,mt)+Le.move(M,N)+"z","rangeArea"===u&&le?De=De+Le.line(M,J)+Le.move(M,J)+"z":(Se.push(De),ze.push(Pe)));return{linePaths:Se,areaPaths:ze,pX:fe,pY:ye,linePath:De,areaPath:Pe}}},{key:"handleNullDataPoints",value:function(l,u,m,x,w){var E=this.w;if(null===l[m][x]&&E.config.markers.showNullDataPoints||1===l[m].length){var M=this.markers.plotChartMarkers(u,w,x+1,this.strokeWidth-E.config.markers.strokeWidth/2,!0);null!==M&&this.elPointsMain.add(M)}}}]),ve}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function ve(M,N,H,Z){this.xoffset=M,this.yoffset=N,this.height=Z,this.width=H,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(J){var ne,fe=[],ye=this.xoffset,De=this.yoffset,Pe=w(J)/this.height,Se=w(J)/this.width;if(this.width>=this.height)for(ne=0;ne<J.length;ne++)fe.push([ye,De,ye+Pe,De+J[ne]/Pe]),De+=J[ne]/Pe;else for(ne=0;ne<J.length;ne++)fe.push([ye,De,ye+J[ne]/Se,De+Se]),ye+=J[ne]/Se;return fe},this.cutArea=function(J){var ne;if(this.width>=this.height){var fe=J/this.height;ne=new ve(this.xoffset+fe,this.yoffset,this.width-fe,this.height)}else{var De=J/this.width;ne=new ve(this.xoffset,this.yoffset+De,this.width,this.height-De)}return ne}}function l(M,N,H,Z,J){return Z=void 0===Z?0:Z,J=void 0===J?0:J,function(fe){var ye,De,Pe=[];for(ye=0;ye<fe.length;ye++)for(De=0;De<fe[ye].length;De++)Pe.push(fe[ye][De]);return Pe}(u(function(fe,ye){var De,Pe=[],Se=ye/w(fe);for(De=0;De<fe.length;De++)Pe[De]=fe[De]*Se;return Pe}(M,N*H),[],new ve(Z,J,N,H),[]))}function u(M,N,H,Z){var J,ne,fe,ye,De,Pe,Se;if(0!==M.length)return J=H.shortestEdge(),De=ne=M[0],Pe=J,0===(ye=N).length||((Se=ye.slice()).push(De),m(ye,Pe)>=m(Se,Pe))?(N.push(ne),u(M.slice(1),N,H,Z)):(fe=H.cutArea(w(N),Z),Z.push(H.getCoordinates(N)),u(M,[],fe,Z)),Z;Z.push(H.getCoordinates(N))}function m(M,N){var H=Math.min.apply(Math,M),Z=Math.max.apply(Math,M),J=w(M);return Math.max(Math.pow(N,2)*Z/Math.pow(J,2),Math.pow(J,2)/(Math.pow(N,2)*H))}function x(M){return M&&M.constructor===Array}function w(M){var N,H=0;for(N=0;N<M.length;N++)H+=M[N];return H}function E(M){var N,H=0;if(x(M[0]))for(N=0;N<M.length;N++)H+=E(M[N]);else H=w(M);return H}return function M(N,H,Z,J,ne){J=void 0===J?0:J,ne=void 0===ne?0:ne;var fe,ye,De=[],Pe=[];if(x(N[0])){for(ye=0;ye<N.length;ye++)De[ye]=E(N[ye]);for(fe=l(De,H,Z,J,ne),ye=0;ye<N.length;ye++)Pe.push(M(N[ye],fe[ye][2]-fe[ye][0],fe[ye][3]-fe[ye][1],fe[ye][0],fe[ye][1]))}else Pe=l(N,H,Z,J,ne);return Pe}}();var ci,en,$i=function(){function ve(l,u){j(this,ve),this.ctx=l,this.w=l.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Mt(l),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return Be(ve,[{key:"draw",value:function(l){var u=this,m=this.w,x=new Dt(this.ctx),w=new In(this.ctx),E=x.group({class:"apexcharts-treemap"});if(m.globals.noData)return E;var M=[];return l.forEach(function(N){var H=N.map(function(Z){return Math.abs(Z)});M.push(H)}),this.negRange=this.helpers.checkColorRange(),m.config.series.forEach(function(N,H){N.data.forEach(function(Z){Array.isArray(u.labels[H])||(u.labels[H]=[]),u.labels[H].push(Z.x)})}),window.TreemapSquared.generate(M,m.globals.gridWidth,m.globals.gridHeight).forEach(function(N,H){var Z=x.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:tt.escapeString(m.globals.seriesNames[H]),rel:H+1,"data:realIndex":H});if(m.config.chart.dropShadow.enabled){var J=m.config.chart.dropShadow;new Pi(u.ctx).dropShadow(E,J,H)}var ne=x.group({class:"apexcharts-data-labels"});N.forEach(function(fe,ye){var De=fe[0],Pe=fe[1],Se=fe[2],ze=fe[3],U=x.drawRect(De,Pe,Se-De,ze-Pe,m.config.plotOptions.treemap.borderRadius,"#fff",1,u.strokeWidth,m.config.plotOptions.treemap.useFillColorAsStroke?we:m.globals.stroke.colors[H]);U.attr({cx:De,cy:Pe,index:H,i:H,j:ye,width:Se-De,height:ze-Pe});var le=u.helpers.getShadeColor(m.config.chart.type,H,ye,u.negRange),we=le.color;void 0!==m.config.series[H].data[ye]&&m.config.series[H].data[ye].fillColor&&(we=m.config.series[H].data[ye].fillColor);var Le=w.fillPath({color:we,seriesNumber:H,dataPointIndex:ye});U.node.classList.add("apexcharts-treemap-rect"),U.attr({fill:Le}),u.helpers.addListeners(U);var $e={x:De+(Se-De)/2,y:Pe+(ze-Pe)/2,width:0,height:0},mt={x:De,y:Pe,width:Se-De,height:ze-Pe};if(m.config.chart.animations.enabled&&!m.globals.dataChanged){var $t=1;m.globals.resized||($t=m.config.chart.animations.speed),u.animateTreemap(U,$e,mt,$t)}m.globals.dataChanged&&u.dynamicAnim.enabled&&m.globals.shouldAnimate&&(m.globals.previousPaths[H]&&m.globals.previousPaths[H][ye]&&m.globals.previousPaths[H][ye].rect&&($e=m.globals.previousPaths[H][ye].rect),u.animateTreemap(U,$e,mt,u.dynamicAnim.speed));var Li=u.getFontSize(fe),Ji=m.config.dataLabels.formatter(u.labels[H][ye],{value:m.globals.series[H][ye],seriesIndex:H,dataPointIndex:ye,w:m});"truncate"===m.config.plotOptions.treemap.dataLabels.format&&(Li=parseInt(m.config.dataLabels.style.fontSize,10),Ji=u.truncateLabels(Ji,Li,De,Pe,Se,ze));var ln=u.helpers.calculateDataLabels({text:Ji,x:(De+Se)/2,y:(Pe+ze)/2+u.strokeWidth/2+Li/3,i:H,j:ye,colorProps:le,fontSize:Li,series:l});m.config.dataLabels.enabled&&ln&&u.rotateToFitLabel(ln,Li,Ji,De,Pe,Se,ze),Z.add(U),null!==ln&&Z.add(ln)}),Z.add(ne),E.add(Z)}),E}},{key:"getFontSize",value:function(l){var E,u=this.w,M=function N(H){var Z,J=0;if(Array.isArray(H[0]))for(Z=0;Z<H.length;Z++)J+=N(H[Z]);else for(Z=0;Z<H.length;Z++)J+=H[Z].length;return J}(this.labels)/function N(H){var Z,J=0;if(Array.isArray(H[0]))for(Z=0;Z<H.length;Z++)J+=N(H[Z]);else for(Z=0;Z<H.length;Z++)J+=1;return J}(this.labels);return E=Math.pow((l[2]-l[0])*(l[3]-l[1]),.5),Math.min(E/M,parseInt(u.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(l,u,m,x,w,E,M){var N=new Dt(this.ctx),H=N.getTextRects(m,u);if(H.width+this.w.config.stroke.width+5>E-x&&H.width<=M-w){var Z=N.rotateAroundCenter(l.node);l.node.setAttribute("transform","rotate(-90 ".concat(Z.x," ").concat(Z.y,") translate(").concat(H.height/3,")"))}}},{key:"truncateLabels",value:function(l,u,m,x,w,E){var M=new Dt(this.ctx),N=M.getTextRects(l,u).width+this.w.config.stroke.width+5>w-m&&E-x>w-m?E-x:w-m,H=M.getTextBasedOnMaxWidth({text:l,maxWidth:N,fontSize:u});return l.length!==H.length&&N/u<5?"":H}},{key:"animateTreemap",value:function(l,u,m,x){var w=new yi(this.ctx);w.animateRect(l,{x:u.x,y:u.y,width:u.width,height:u.height},{x:m.x,y:m.y,width:m.width,height:m.height},x,function(){w.animationCompleted(l)})}}]),ve}(),st=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return Be(ve,[{key:"calculateTimeScaleTicks",value:function(l,u){var m=this,x=this.w;if(x.globals.allSeriesCollapsed)return x.globals.labels=[],x.globals.timescaleLabels=[],[];var w=new Ki(this.ctx),E=(u-l)/864e5;this.determineInterval(E),x.globals.disableZoomIn=!1,x.globals.disableZoomOut=!1,E<.00011574074074074075?x.globals.disableZoomIn=!0:E>5e4&&(x.globals.disableZoomOut=!0);var M=w.getTimeUnitsfromTimestamp(l,u,this.utc),N=x.globals.gridWidth/E,H=N/24,Z=H/60,J=Z/60,ne=Math.floor(24*E),fe=Math.floor(1440*E),ye=Math.floor(86400*E),De=Math.floor(E),Pe=Math.floor(E/30),Se=Math.floor(E/365),ze={minMillisecond:M.minMillisecond,minSecond:M.minSecond,minMinute:M.minMinute,minHour:M.minHour,minDate:M.minDate,minMonth:M.minMonth,minYear:M.minYear},U={firstVal:ze,currentMillisecond:ze.minMillisecond,currentSecond:ze.minSecond,currentMinute:ze.minMinute,currentHour:ze.minHour,currentMonthDate:ze.minDate,currentDate:ze.minDate,currentMonth:ze.minMonth,currentYear:ze.minYear,daysWidthOnXAxis:N,hoursWidthOnXAxis:H,minutesWidthOnXAxis:Z,secondsWidthOnXAxis:J,numberOfSeconds:ye,numberOfMinutes:fe,numberOfHours:ne,numberOfDays:De,numberOfMonths:Pe,numberOfYears:Se};switch(this.tickInterval){case"years":this.generateYearScale(U);break;case"months":case"half_year":this.generateMonthScale(U);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(U);break;case"hours":this.generateHourScale(U);break;case"minutes_fives":case"minutes":this.generateMinuteScale(U);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(U)}var le=this.timeScaleArray.map(function(we){var Le={position:we.position,unit:we.unit,year:we.year,day:we.day?we.day:1,hour:we.hour?we.hour:0,month:we.month+1};return"month"===we.unit?Ze(Ze({},Le),{},{day:1,value:we.value+1}):"day"===we.unit||"hour"===we.unit?Ze(Ze({},Le),{},{value:we.value}):"minute"===we.unit?Ze(Ze({},Le),{},{value:we.value,minute:we.value}):"second"===we.unit?Ze(Ze({},Le),{},{value:we.value,minute:we.minute,second:we.second}):we});return le.filter(function(we){var Le=1,$e=Math.ceil(x.globals.gridWidth/120),mt=we.value;void 0!==x.config.xaxis.tickAmount&&($e=x.config.xaxis.tickAmount),le.length>$e&&(Le=Math.floor(le.length/$e));var $t=!1,Xt=!1;switch(m.tickInterval){case"years":"year"===we.unit&&($t=!0);break;case"half_year":Le=7,"year"===we.unit&&($t=!0);break;case"months":Le=1,"year"===we.unit&&($t=!0);break;case"months_fortnight":Le=15,"year"!==we.unit&&"month"!==we.unit||($t=!0),30===mt&&(Xt=!0);break;case"months_days":Le=10,"month"===we.unit&&($t=!0),30===mt&&(Xt=!0);break;case"week_days":Le=8,"month"===we.unit&&($t=!0);break;case"days":Le=1,"month"===we.unit&&($t=!0);break;case"hours":"day"===we.unit&&($t=!0);break;case"minutes_fives":case"seconds_fives":mt%5!=0&&(Xt=!0);break;case"seconds_tens":mt%10!=0&&(Xt=!0)}if("hours"===m.tickInterval||"minutes_fives"===m.tickInterval||"seconds_tens"===m.tickInterval||"seconds_fives"===m.tickInterval){if(!Xt)return!0}else if((mt%Le==0||$t)&&!Xt)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(l,u){var m=this.w,x=this.formatDates(l),w=this.removeOverlappingTS(x);m.globals.timescaleLabels=w.slice(),new xr(this.ctx).plotCoords()}},{key:"determineInterval",value:function(l){var u=24*l,m=60*u;switch(!0){case l/365>5:this.tickInterval="years";break;case l>800:this.tickInterval="half_year";break;case l>180:this.tickInterval="months";break;case l>90:this.tickInterval="months_fortnight";break;case l>60:this.tickInterval="months_days";break;case l>30:this.tickInterval="week_days";break;case l>2:this.tickInterval="days";break;case u>2.4:this.tickInterval="hours";break;case m>15:this.tickInterval="minutes_fives";break;case m>5:this.tickInterval="minutes";break;case m>1:this.tickInterval="seconds_tens";break;case 60*m>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(l){var u=l.firstVal,m=l.currentMonth,x=l.currentYear,w=l.daysWidthOnXAxis,E=l.numberOfYears,M=u.minYear,N=0,H=new Ki(this.ctx),Z="year";if(u.minDate>1||u.minMonth>0){var J=H.determineRemainingDaysOfYear(u.minYear,u.minMonth,u.minDate);N=(H.determineDaysOfYear(u.minYear)-J+1)*w,this.timeScaleArray.push({position:N,value:M=u.minYear+1,unit:Z,year:M,month:tt.monthMod(m+1)})}else 1===u.minDate&&0===u.minMonth&&this.timeScaleArray.push({position:N,value:M,unit:Z,year:x,month:tt.monthMod(m+1)});for(var ne=M,fe=N,ye=0;ye<E;ye++)ne++,fe=H.determineDaysOfYear(ne-1)*w+fe,this.timeScaleArray.push({position:fe,value:ne,unit:Z,year:ne,month:1})}},{key:"generateMonthScale",value:function(l){var u=l.firstVal,m=l.currentMonthDate,x=l.currentMonth,w=l.currentYear,E=l.daysWidthOnXAxis,M=l.numberOfMonths,N=x,H=0,Z=new Ki(this.ctx),J="month",ne=0;if(u.minDate>1){H=(Z.determineDaysOfMonths(x+1,u.minYear)-m+1)*E,N=tt.monthMod(x+1);var fe=w+ne,ye=tt.monthMod(N),De=N;0===N&&(J="year",De=fe,ye=1,fe+=ne+=1),this.timeScaleArray.push({position:H,value:De,unit:J,year:fe,month:ye})}else this.timeScaleArray.push({position:H,value:N,unit:J,year:w,month:tt.monthMod(x)});for(var Pe=N+1,Se=H,ze=0,U=1;ze<M;ze++,U++){0===(Pe=tt.monthMod(Pe))?(J="year",ne+=1):J="month";var le=this._getYear(w,Pe,ne);Se=Z.determineDaysOfMonths(Pe,le)*E+Se,this.timeScaleArray.push({position:Se,value:0===Pe?le:Pe,unit:J,year:le,month:0===Pe?1:Pe}),Pe++}}},{key:"generateDayScale",value:function(l){var u=l.firstVal,m=l.currentMonth,x=l.currentYear,w=l.hoursWidthOnXAxis,E=l.numberOfDays,M=new Ki(this.ctx),N="day",H=u.minDate+1,Z=H,J=function(U,le,we){return U>M.determineDaysOfMonths(le+1,we)&&(Z=1,N="month",fe=le+=1),le},ne=(24-u.minHour)*w,fe=H,ye=J(Z,m,x);0===u.minHour&&1===u.minDate?(ne=0,fe=tt.monthMod(u.minMonth),N="month",Z=u.minDate):1!==u.minDate&&0===u.minHour&&0===u.minMinute&&(ne=0,fe=H=u.minDate,ye=J(Z=H,m,x)),this.timeScaleArray.push({position:ne,value:fe,unit:N,year:this._getYear(x,ye,0),month:tt.monthMod(ye),day:Z});for(var De=ne,Pe=0;Pe<E;Pe++){N="day",ye=J(Z+=1,ye,this._getYear(x,ye,0));var Se=this._getYear(x,ye,0);De=24*w+De;var ze=1===Z?tt.monthMod(ye):Z;this.timeScaleArray.push({position:De,value:ze,unit:N,year:Se,month:tt.monthMod(ye),day:ze})}}},{key:"generateHourScale",value:function(l){var u=l.firstVal,m=l.currentDate,x=l.currentMonth,w=l.currentYear,E=l.minutesWidthOnXAxis,M=l.numberOfHours,N=new Ki(this.ctx),H="hour",Z=function(Le,$e){return Le>N.determineDaysOfMonths($e+1,w)&&(Pe=1,$e+=1),{month:$e,date:Pe}},J=function(Le,$e){return Le>N.determineDaysOfMonths($e+1,w)?$e+=1:$e},ne=60-(u.minMinute+u.minSecond/60),fe=ne*E,ye=u.minHour+1,De=ye;60===ne&&(fe=0,De=ye=u.minHour);var Pe=m;De>=24&&(De=0,Pe+=1,H="day");var Se=Z(Pe,x).month;Se=J(Pe,Se),this.timeScaleArray.push({position:fe,value:ye,unit:H,day:Pe,hour:De,year:w,month:tt.monthMod(Se)}),De++;for(var ze=fe,U=0;U<M;U++){H="hour",De>=24&&(De=0,H="day",Se=Z(Pe+=1,Se).month,Se=J(Pe,Se));var le=this._getYear(w,Se,0);this.timeScaleArray.push({position:ze=60*E+ze,value:0===De?Pe:De,unit:H,hour:De,day:Pe,year:le,month:tt.monthMod(Se)}),De++}}},{key:"generateMinuteScale",value:function(l){for(var H=l.minutesWidthOnXAxis,J=l.numberOfMinutes,ne=l.currentMinute+1,fe=l.currentDate,ye=l.currentMonth,De=l.currentYear,Pe=l.currentHour,Se=(60-l.currentSecond-l.currentMillisecond/1e3)*l.secondsWidthOnXAxis,ze=0;ze<J;ze++)ne>=60&&(ne=0,24===(Pe+=1)&&(Pe=0)),this.timeScaleArray.push({position:Se,value:ne,unit:"minute",hour:Pe,minute:ne,day:fe,year:this._getYear(De,ye,0),month:tt.monthMod(ye)}),Se+=H,ne++}},{key:"generateSecondScale",value:function(l){for(var H=l.secondsWidthOnXAxis,Z=l.numberOfSeconds,J=l.currentSecond+1,ne=l.currentMinute,fe=l.currentDate,ye=l.currentMonth,De=l.currentYear,Pe=l.currentHour,Se=(1e3-l.currentMillisecond)/1e3*H,ze=0;ze<Z;ze++)J>=60&&(J=0,++ne>=60&&(ne=0,24==++Pe&&(Pe=0))),this.timeScaleArray.push({position:Se,value:J,unit:"second",hour:Pe,minute:ne,second:J,day:fe,year:this._getYear(De,ye,0),month:tt.monthMod(ye)}),Se+=H,J++}},{key:"createRawDateString",value:function(l,u){var m=l.year;return 0===l.month&&(l.month=1),m+="-"+("0"+l.month.toString()).slice(-2),m+="day"===l.unit?"day"===l.unit?"-"+("0"+u).slice(-2):"-01":"-"+("0"+(l.day?l.day:"1")).slice(-2),m+="hour"===l.unit?"hour"===l.unit?"T"+("0"+u).slice(-2):"T00":"T"+("0"+(l.hour?l.hour:"0")).slice(-2),m+="minute"===l.unit?":"+("0"+u).slice(-2):":"+(l.minute?("0"+l.minute).slice(-2):"00"),m+="second"===l.unit?":"+("0"+u).slice(-2):":00",this.utc&&(m+=".000Z"),m}},{key:"formatDates",value:function(l){var u=this,m=this.w;return l.map(function(x){var w=x.value.toString(),E=new Ki(u.ctx),M=u.createRawDateString(x,w),N=E.getDate(E.parseDate(M));if(u.utc||(N=E.getDate(E.parseDateWithTimezone(M))),void 0===m.config.xaxis.labels.format){var H="dd MMM",Z=m.config.xaxis.labels.datetimeFormatter;"year"===x.unit&&(H=Z.year),"month"===x.unit&&(H=Z.month),"day"===x.unit&&(H=Z.day),"hour"===x.unit&&(H=Z.hour),"minute"===x.unit&&(H=Z.minute),"second"===x.unit&&(H=Z.second),w=E.formatDate(N,H)}else w=E.formatDate(N,m.config.xaxis.labels.format);return{dateString:M,position:x.position,value:w,unit:x.unit,year:x.year,month:x.month}})}},{key:"removeOverlappingTS",value:function(l){var u,m=this,x=new Dt(this.ctx),w=!1;l.length>0&&l[0].value&&l.every(function(N){return N.value.length===l[0].value.length})&&(w=!0,u=x.getTextRects(l[0].value).width);var E=0;return l.map(function(N,H){if(H>0&&m.w.config.xaxis.labels.hideOverlappingLabels){var Z=w?u:x.getTextRects(l[E].value).width;return N.position>l[E].position+Z+10?(E=H,N):null}return N}).filter(function(N){return null!==N})}},{key:"_getYear",value:function(l,u,m){return l+Math.floor(u/12)+m}}]),ve}(),Bt=function(){function ve(l,u){j(this,ve),this.ctx=u,this.w=u.w,this.el=l}return Be(ve,[{key:"setupElements",value:function(){var l=this.w.globals,u=this.w.config,m=u.chart.type;l.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(m)>-1,l.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(m)>-1,l.isBarHorizontal=("bar"===u.chart.type||"rangeBar"===u.chart.type||"boxPlot"===u.chart.type)&&u.plotOptions.bar.horizontal,l.chartClass=".apexcharts"+l.chartID,l.dom.baseEl=this.el,l.dom.elWrap=document.createElement("div"),Dt.setAttrs(l.dom.elWrap,{id:l.chartClass.substring(1),class:"apexcharts-canvas "+l.chartClass.substring(1)}),this.el.appendChild(l.dom.elWrap),l.dom.Paper=new window.SVG.Doc(l.dom.elWrap),l.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(u.chart.offsetX,", ").concat(u.chart.offsetY,")")}),l.dom.Paper.node.style.background="dark"!==u.theme.mode||u.chart.background?u.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),l.dom.elLegendForeign=document.createElementNS(l.SVGNS,"foreignObject"),Dt.setAttrs(l.dom.elLegendForeign,{x:0,y:0,width:l.svgWidth,height:l.svgHeight}),l.dom.elLegendWrap=document.createElement("div"),l.dom.elLegendWrap.classList.add("apexcharts-legend"),l.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),l.dom.elLegendForeign.appendChild(l.dom.elLegendWrap),l.dom.Paper.node.appendChild(l.dom.elLegendForeign),l.dom.elGraphical=l.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),l.dom.elDefs=l.dom.Paper.defs(),l.dom.Paper.add(l.dom.elGraphical),l.dom.elGraphical.add(l.dom.elDefs)}},{key:"plotChartType",value:function(l,u){var m=this.w,x=m.config,w=m.globals,E={series:[],i:[]},M={series:[],i:[]},N={series:[],i:[]},H={series:[],i:[]},Z={series:[],i:[]},J={series:[],i:[]},ne={series:[],i:[]},fe={series:[],i:[]},ye={series:[],seriesRangeEnd:[],i:[]};w.series.map(function($e,mt){var $t=0;void 0!==l[mt].type?("column"===l[mt].type||"bar"===l[mt].type?(w.series.length>1&&x.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),Z.series.push($e),Z.i.push(mt),$t++,m.globals.columnSeries=Z.series):"area"===l[mt].type?(M.series.push($e),M.i.push(mt),$t++):"line"===l[mt].type?(E.series.push($e),E.i.push(mt),$t++):"scatter"===l[mt].type?(N.series.push($e),N.i.push(mt)):"bubble"===l[mt].type?(H.series.push($e),H.i.push(mt),$t++):"candlestick"===l[mt].type?(J.series.push($e),J.i.push(mt),$t++):"boxPlot"===l[mt].type?(ne.series.push($e),ne.i.push(mt),$t++):"rangeBar"===l[mt].type?(fe.series.push($e),fe.i.push(mt),$t++):"rangeArea"===l[mt].type?(ye.series.push(w.seriesRangeStart[mt]),ye.seriesRangeEnd.push(w.seriesRangeEnd[mt]),ye.i.push(mt),$t++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),$t>1&&(w.comboCharts=!0)):(E.series.push($e),E.i.push(mt))});var De=new Ot(this.ctx,u),Pe=new Ii(this.ctx,u);this.ctx.pie=new _n(this.ctx);var Se=new Qn(this.ctx);this.ctx.rangeBar=new Yt(this.ctx,u);var ze=new Vi(this.ctx),U=[];if(w.comboCharts){if(M.series.length>0&&U.push(De.draw(M.series,"area",M.i)),Z.series.length>0)if(m.config.chart.stacked){var le=new Ci(this.ctx,u);U.push(le.draw(Z.series,Z.i))}else this.ctx.bar=new ai(this.ctx,u),U.push(this.ctx.bar.draw(Z.series,Z.i));if(ye.series.length>0&&U.push(De.draw(ye.series,"rangeArea",ye.i,ye.seriesRangeEnd)),E.series.length>0&&U.push(De.draw(E.series,"line",E.i)),J.series.length>0&&U.push(Pe.draw(J.series,"candlestick",J.i)),ne.series.length>0&&U.push(Pe.draw(ne.series,"boxPlot",ne.i)),fe.series.length>0&&U.push(this.ctx.rangeBar.draw(fe.series,fe.i)),N.series.length>0){var we=new Ot(this.ctx,u,!0);U.push(we.draw(N.series,"scatter",N.i))}if(H.series.length>0){var Le=new Ot(this.ctx,u,!0);U.push(Le.draw(H.series,"bubble",H.i))}}else switch(x.chart.type){case"line":U=De.draw(w.series,"line");break;case"area":U=De.draw(w.series,"area");break;case"bar":x.chart.stacked?U=new Ci(this.ctx,u).draw(w.series):(this.ctx.bar=new ai(this.ctx,u),U=this.ctx.bar.draw(w.series));break;case"candlestick":U=new Ii(this.ctx,u).draw(w.series,"candlestick");break;case"boxPlot":U=new Ii(this.ctx,u).draw(w.series,x.chart.type);break;case"rangeBar":U=this.ctx.rangeBar.draw(w.series);break;case"rangeArea":U=De.draw(w.seriesRangeStart,"rangeArea",void 0,w.seriesRangeEnd);break;case"heatmap":U=new Bi(this.ctx,u).draw(w.series);break;case"treemap":U=new $i(this.ctx,u).draw(w.series);break;case"pie":case"donut":case"polarArea":U=this.ctx.pie.draw(w.series);break;case"radialBar":U=Se.draw(w.series);break;case"radar":U=ze.draw(w.series);break;default:U=De.draw(w.series)}return U}},{key:"setSVGDimensions",value:function(){var l=this.w.globals,u=this.w.config;l.svgWidth=u.chart.width,l.svgHeight=u.chart.height;var m=tt.getDimensions(this.el),x=u.chart.width.toString().split(/[0-9]+/g).pop();"%"===x?tt.isNumber(m[0])&&(0===m[0].width&&(m=tt.getDimensions(this.el.parentNode)),l.svgWidth=m[0]*parseInt(u.chart.width,10)/100):"px"!==x&&""!==x||(l.svgWidth=parseInt(u.chart.width,10));var w=u.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==l.svgHeight&&""!==l.svgHeight)if("%"===w){var E=tt.getDimensions(this.el.parentNode);l.svgHeight=E[1]*parseInt(u.chart.height,10)/100}else l.svgHeight=parseInt(u.chart.height,10);else l.svgHeight=l.axisCharts?l.svgWidth/1.61:l.svgWidth/1.2;l.svgWidth<0&&(l.svgWidth=0),l.svgHeight<0&&(l.svgHeight=0),Dt.setAttrs(l.dom.Paper.node,{width:l.svgWidth,height:l.svgHeight}),"%"!==w&&(l.dom.Paper.node.parentNode.parentNode.style.minHeight=l.svgHeight+(u.chart.sparkline.enabled?0:l.axisCharts?u.chart.parentHeightOffset:0)+"px"),l.dom.elWrap.style.width=l.svgWidth+"px",l.dom.elWrap.style.height=l.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var l=this.w.globals;Dt.setAttrs(l.dom.elGraphical.node,{transform:"translate("+l.translateX+", "+l.translateY+")"})}},{key:"resizeNonAxisCharts",value:function(){var l=this.w,u=l.globals,m=0,x=l.config.chart.sparkline.enabled?1:15;x+=l.config.grid.padding.bottom,"top"!==l.config.legend.position&&"bottom"!==l.config.legend.position||!l.config.legend.show||l.config.legend.floating||(m=new Mr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var w=l.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),E=2.05*l.globals.radialSize;if(w&&!l.config.chart.sparkline.enabled&&0!==l.config.plotOptions.radialBar.startAngle){var M=tt.getBoundingClientRect(w);E=M.bottom,E=Math.max(2.05*l.globals.radialSize,M.bottom-M.top)}var H=E+u.translateY+m+x;u.dom.elLegendForeign&&u.dom.elLegendForeign.setAttribute("height",H),l.config.chart.height&&String(l.config.chart.height).indexOf("%")>0||(u.dom.elWrap.style.height=H+"px",Dt.setAttrs(u.dom.Paper.node,{height:H}),u.dom.Paper.node.parentNode.parentNode.style.minHeight=H+"px")}},{key:"coreCalculations",value:function(){new ar(this.ctx).init()}},{key:"resetGlobals",value:function(){var l=this,u=function(){return l.w.config.series.map(function(w){return[]})},m=new Nr,x=this.w.globals;m.initGlobalVars(x),x.seriesXvalues=u(),x.seriesYvalues=u()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var l=null,u=this.w;if(u.globals.axisCharts){if("back"===u.config.xaxis.crosshairs.position&&new rn(this.ctx).drawXCrosshairs(),"back"===u.config.yaxis[0].crosshairs.position&&new rn(this.ctx).drawYCrosshairs(),"datetime"===u.config.xaxis.type&&void 0===u.config.xaxis.labels.formatter){this.ctx.timeScale=new st(this.ctx);var m=[];isFinite(u.globals.minX)&&isFinite(u.globals.maxX)&&!u.globals.isBarHorizontal?m=this.ctx.timeScale.calculateTimeScaleTicks(u.globals.minX,u.globals.maxX):u.globals.isBarHorizontal&&(m=this.ctx.timeScale.calculateTimeScaleTicks(u.globals.minY,u.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(m)}l=new Fi(this.ctx).getCalculatedRatios()}return l}},{key:"updateSourceChart",value:function(l){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:l.w.globals.minX,max:l.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var l=this,u=this.w;if(u.config.chart.brush.enabled&&"function"!=typeof u.config.chart.events.selection){var m=Array.isArray(u.config.chart.brush.targets)?u.config.chart.brush.targets:[u.config.chart.brush.target];m.forEach(function(x){var w=ApexCharts.getChartByID(x);w.w.globals.brushSource=l.ctx,"function"!=typeof w.w.config.chart.events.zoomed&&(w.w.config.chart.events.zoomed=function(){l.updateSourceChart(w)}),"function"!=typeof w.w.config.chart.events.scrolled&&(w.w.config.chart.events.scrolled=function(){l.updateSourceChart(w)})}),u.config.chart.events.selection=function(x,w){m.forEach(function(E){ApexCharts.getChartByID(E).ctx.updateHelpers._updateOptions({xaxis:{min:w.xaxis.min,max:w.xaxis.max}},!1,!1,!1,!1)})}}}}]),ve}(),ke=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"_updateOptions",value:function(l){var u=this,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],w=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(M){var N=[u.ctx];w&&(N=u.ctx.getSyncedCharts()),u.ctx.w.globals.isExecCalled&&(N=[u.ctx],u.ctx.w.globals.isExecCalled=!1),N.forEach(function(H,Z){var J=H.w;if(J.globals.shouldAnimate=x,m||(J.globals.resized=!0,J.globals.dataChanged=!0,x&&H.series.getPreviousPaths()),l&&"object"===t(l)&&(H.config=new fr(l),l=Fi.extendArrayProps(H.config,l,J),H.w.globals.chartID!==u.ctx.w.globals.chartID&&delete l.series,J.config=tt.extend(J.config,l),E&&(J.globals.lastXAxis=l.xaxis?tt.clone(l.xaxis):[],J.globals.lastYAxis=l.yaxis?tt.clone(l.yaxis):[],J.globals.initialConfig=tt.extend({},J.config),J.globals.initialSeries=tt.clone(J.config.series),l.series))){for(var ne=0;ne<J.globals.collapsedSeriesIndices.length;ne++){var fe=J.config.series[J.globals.collapsedSeriesIndices[ne]];J.globals.collapsedSeries[ne].data=J.globals.axisCharts?fe.data.slice():fe}for(var ye=0;ye<J.globals.ancillaryCollapsedSeriesIndices.length;ye++){var De=J.config.series[J.globals.ancillaryCollapsedSeriesIndices[ye]];J.globals.ancillaryCollapsedSeries[ye].data=J.globals.axisCharts?De.data.slice():De}H.series.emptyCollapsedSeries(J.config.series)}return H.update(l).then(function(){Z===N.length-1&&M(H)})})})}},{key:"_updateSeries",value:function(l,u){var m=this,x=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(w){var E,M=m.w;return M.globals.shouldAnimate=u,M.globals.dataChanged=!0,u&&m.ctx.series.getPreviousPaths(),M.globals.axisCharts?(0===(E=l.map(function(N,H){return m._extendSeries(N,H)})).length&&(E=[{data:[]}]),M.config.series=E):M.config.series=l.slice(),x&&(M.globals.initialConfig.series=tt.clone(M.config.series),M.globals.initialSeries=tt.clone(M.config.series)),m.ctx.update().then(function(){w(m.ctx)})})}},{key:"_extendSeries",value:function(l,u){var m=this.w,x=m.config.series[u];return Ze(Ze({},m.config.series[u]),{},{name:l.name?l.name:x?.name,color:l.color?l.color:x?.color,type:l.type?l.type:x?.type,group:l.group?l.group:x?.group,data:l.data?l.data:x?.data,zIndex:void 0!==l.zIndex?l.zIndex:u})}},{key:"toggleDataPointSelection",value:function(l,u){var m=this.w,x=null,w=".apexcharts-series[data\\:realIndex='".concat(l,"']");return m.globals.axisCharts?x=m.globals.dom.Paper.select("".concat(w," path[j='").concat(u,"'], ").concat(w," circle[j='").concat(u,"'], ").concat(w," rect[j='").concat(u,"']")).members[0]:void 0===u&&(x=m.globals.dom.Paper.select("".concat(w," path[j='").concat(l,"']")).members[0],"pie"!==m.config.chart.type&&"polarArea"!==m.config.chart.type&&"donut"!==m.config.chart.type||this.ctx.pie.pieClicked(l)),x?(new Dt(this.ctx).pathMouseDown(x,null),x.node?x.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(l){var u=this.w;if(["min","max"].forEach(function(x){void 0!==l.xaxis[x]&&(u.config.xaxis[x]=l.xaxis[x],u.globals.lastXAxis[x]=l.xaxis[x])}),l.xaxis.categories&&l.xaxis.categories.length&&(u.config.xaxis.categories=l.xaxis.categories),u.config.xaxis.convertedCatToNumeric){var m=new yr(l);l=m.convertCatToNumericXaxis(l,this.ctx)}return l}},{key:"forceYAxisUpdate",value:function(l){return l.chart&&l.chart.stacked&&"100%"===l.chart.stackType&&(Array.isArray(l.yaxis)?l.yaxis.forEach(function(u,m){l.yaxis[m].min=0,l.yaxis[m].max=100}):(l.yaxis.min=0,l.yaxis.max=100)),l}},{key:"revertDefaultAxisMinMax",value:function(l){var u=this,m=this.w,x=m.globals.lastXAxis,w=m.globals.lastYAxis;l&&l.xaxis&&(x=l.xaxis),l&&l.yaxis&&(w=l.yaxis),m.config.xaxis.min=x.min,m.config.xaxis.max=x.max,m.config.yaxis.map(function(M,N){m.globals.zoomed||void 0!==w[N]?function(M){void 0!==w[M]&&(m.config.yaxis[M].min=w[M].min,m.config.yaxis[M].max=w[M].max)}(N):void 0!==u.ctx.opts.yaxis[N]&&(M.min=u.ctx.opts.yaxis[N].min,M.max=u.ctx.opts.yaxis[N].max)})}}]),ve}();ci=typeof window<"u"?window:void 0,en=function(ve,l){var u=(void 0!==this?this:ve).SVG=function(U){if(u.supported)return U=new u.Doc(U),u.parser.draw||u.prepare(),U};if(u.ns="http://www.w3.org/2000/svg",u.xmlns="http://www.w3.org/2000/xmlns/",u.xlink="http://www.w3.org/1999/xlink",u.svgjs="http://svgjs.dev",u.supported=!0,!u.supported)return!1;u.did=1e3,u.eid=function(U){return"Svgjs"+Z(U)+u.did++},u.create=function(U){var le=l.createElementNS(this.ns,U);return le.setAttribute("id",this.eid(U)),le},u.extend=function(){var U,le;le=(U=[].slice.call(arguments)).pop();for(var we=U.length-1;we>=0;we--)if(U[we])for(var Le in le)U[we].prototype[Le]=le[Le];u.Set&&u.Set.inherit&&u.Set.inherit()},u.invent=function(U){var le="function"==typeof U.create?U.create:function(){this.constructor.call(this,u.create(U.create))};return U.inherit&&(le.prototype=new U.inherit),U.extend&&u.extend(le,U.extend),U.construct&&u.extend(U.parent||u.Container,U.construct),le},u.adopt=function(U){return U?U.instance?U.instance:((le="svg"==U.nodeName?U.parentNode instanceof ve.SVGElement?new u.Nested:new u.Doc:"linearGradient"==U.nodeName?new u.Gradient("linear"):"radialGradient"==U.nodeName?new u.Gradient("radial"):u[Z(U.nodeName)]?new(u[Z(U.nodeName)]):new u.Element(U)).type=U.nodeName,le.node=U,U.instance=le,le instanceof u.Doc&&le.namespace().defs(),le.setData(JSON.parse(U.getAttribute("svgjs:data"))||{}),le):null;var le},u.prepare=function(){var U=l.getElementsByTagName("body")[0],le=(U?new u.Doc(U):u.adopt(l.documentElement).nested()).size(2,0);u.parser={body:U||l.documentElement,draw:le.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:le.polyline().node,path:le.path().node,native:u.create("svg")}},u.parser={native:u.create("svg")},l.addEventListener("DOMContentLoaded",function(){u.parser.draw||u.prepare()},!1),u.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},u.utils={map:function(U,le){for(var we=U.length,Le=[],$e=0;$e<we;$e++)Le.push(le(U[$e]));return Le},filter:function(U,le){for(var we=U.length,Le=[],$e=0;$e<we;$e++)le(U[$e])&&Le.push(U[$e]);return Le},filterSVGElements:function(U){return this.filter(U,function(le){return le instanceof ve.SVGElement})}},u.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},u.Color=function(U){var le,we;this.r=0,this.g=0,this.b=0,U&&("string"==typeof U?u.regex.isRgb.test(U)?(le=u.regex.rgb.exec(U.replace(u.regex.whitespace,"")),this.r=parseInt(le[1]),this.g=parseInt(le[2]),this.b=parseInt(le[3])):u.regex.isHex.test(U)&&(le=u.regex.hex.exec(4==(we=U).length?["#",we.substring(1,2),we.substring(1,2),we.substring(2,3),we.substring(2,3),we.substring(3,4),we.substring(3,4)].join(""):we),this.r=parseInt(le[1],16),this.g=parseInt(le[2],16),this.b=parseInt(le[3],16)):"object"===t(U)&&(this.r=U.r,this.g=U.g,this.b=U.b))},u.extend(u.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+J(this.r)+J(this.g)+J(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(U){return this.destination=new u.Color(U),this},at:function(U){return this.destination?new u.Color({r:~~(this.r+(this.destination.r-this.r)*(U=U<0?0:U>1?1:U)),g:~~(this.g+(this.destination.g-this.g)*U),b:~~(this.b+(this.destination.b-this.b)*U)}):this}}),u.Color.test=function(U){return u.regex.isHex.test(U+="")||u.regex.isRgb.test(U)},u.Color.isRgb=function(U){return U&&"number"==typeof U.r&&"number"==typeof U.g&&"number"==typeof U.b},u.Color.isColor=function(U){return u.Color.isRgb(U)||u.Color.test(U)},u.Array=function(U,le){0==(U=(U||[]).valueOf()).length&&le&&(U=le.valueOf()),this.value=this.parse(U)},u.extend(u.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(U){return U=U.valueOf(),Array.isArray(U)?U:this.split(U)}}),u.PointArray=function(U,le){u.Array.call(this,U,le||[[0,0]])},u.PointArray.prototype=new u.Array,u.PointArray.prototype.constructor=u.PointArray;for(var m={M:function(U,le,we){return le.x=we.x=U[0],le.y=we.y=U[1],["M",le.x,le.y]},L:function(U,le){return le.x=U[0],le.y=U[1],["L",U[0],U[1]]},H:function(U,le){return le.x=U[0],["H",U[0]]},V:function(U,le){return le.y=U[0],["V",U[0]]},C:function(U,le){return le.x=U[4],le.y=U[5],["C",U[0],U[1],U[2],U[3],U[4],U[5]]},Q:function(U,le){return le.x=U[2],le.y=U[3],["Q",U[0],U[1],U[2],U[3]]},S:function(U,le){return le.x=U[2],le.y=U[3],["S",U[0],U[1],U[2],U[3]]},Z:function(U,le,we){return le.x=we.x,le.y=we.y,["Z"]}},x="mlhvqtcsaz".split(""),w=0,E=x.length;w<E;++w)m[x[w]]=function(U){return function(le,we,Le){if("H"==U)le[0]=le[0]+we.x;else if("V"==U)le[0]=le[0]+we.y;else if("A"==U)le[5]=le[5]+we.x,le[6]=le[6]+we.y;else for(var $e=0,mt=le.length;$e<mt;++$e)le[$e]=le[$e]+($e%2?we.y:we.x);if(m&&"function"==typeof m[U])return m[U](le,we,Le)}}(x[w].toUpperCase());u.PathArray=function(U,le){u.Array.call(this,U,le||[["M",0,0]])},u.PathArray.prototype=new u.Array,u.PathArray.prototype.constructor=u.PathArray,u.extend(u.PathArray,{toString:function(){return function(U){for(var le=0,we=U.length,Le="";le<we;le++)Le+=U[le][0],null!=U[le][1]&&(Le+=U[le][1],null!=U[le][2]&&(Le+=" ",Le+=U[le][2],null!=U[le][3]&&(Le+=" ",Le+=U[le][3],Le+=" ",Le+=U[le][4],null!=U[le][5]&&(Le+=" ",Le+=U[le][5],Le+=" ",Le+=U[le][6],null!=U[le][7]&&(Le+=" ",Le+=U[le][7])))));return Le+" "}(this.value)},move:function(U,le){return this.bbox(),this},at:function(U){if(!this.destination)return this;for(var le=this.value,we=this.destination.value,Le=[],$e=new u.PathArray,mt=0,$t=le.length;mt<$t;mt++){Le[mt]=[le[mt][0]];for(var Xt=1,Li=le[mt].length;Xt<Li;Xt++)Le[mt][Xt]=le[mt][Xt]+(we[mt][Xt]-le[mt][Xt])*U;"A"===Le[mt][0]&&(Le[mt][4]=+(0!=Le[mt][4]),Le[mt][5]=+(0!=Le[mt][5]))}return $e.value=Le,$e},parse:function(U){if(U instanceof u.PathArray)return U.valueOf();var le,we={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};U="string"==typeof U?U.replace(u.regex.numbersWithDots,N).replace(u.regex.pathLetters," $& ").replace(u.regex.hyphen,"$1 -").trim().split(u.regex.delimiter):U.reduce(function(Li,Ji){return[].concat.call(Li,Ji)},[]);var Le=[],$e=new u.Point,mt=new u.Point,$t=0,Xt=U.length;do{u.regex.isPathLetter.test(U[$t])?(le=U[$t],++$t):"M"==le?le="L":"m"==le&&(le="l"),Le.push(m[le].call(null,U.slice($t,$t+=we[le.toUpperCase()]).map(parseFloat),$e,mt))}while(Xt>$t);return Le},bbox:function(){return u.parser.draw||u.prepare(),u.parser.path.setAttribute("d",this.toString()),u.parser.path.getBBox()}}),u.Number=u.invent({create:function(U,le){this.value=0,this.unit=le||"","number"==typeof U?this.value=isNaN(U)?0:isFinite(U)?U:U<0?-34e37:34e37:"string"==typeof U?(le=U.match(u.regex.numberAndUnit))&&(this.value=parseFloat(le[1]),"%"==le[5]?this.value/=100:"s"==le[5]&&(this.value*=1e3),this.unit=le[5]):U instanceof u.Number&&(this.value=U.valueOf(),this.unit=U.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(U){return U=new u.Number(U),new u.Number(this+U,this.unit||U.unit)},minus:function(U){return U=new u.Number(U),new u.Number(this-U,this.unit||U.unit)},times:function(U){return U=new u.Number(U),new u.Number(this*U,this.unit||U.unit)},divide:function(U){return U=new u.Number(U),new u.Number(this/U,this.unit||U.unit)},to:function(U){var le=new u.Number(this);return"string"==typeof U&&(le.unit=U),le},morph:function(U){return this.destination=new u.Number(U),U.relative&&(this.destination.value+=this.value),this},at:function(U){return this.destination?new u.Number(this.destination).minus(this).times(U).plus(this):this}}}),u.Element=u.invent({create:function(U){this._stroke=u.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=U)&&(this.type=U.nodeName,this.node.instance=this,this._stroke=U.getAttribute("stroke")||this._stroke)},extend:{x:function(U){return this.attr("x",U)},y:function(U){return this.attr("y",U)},cx:function(U){return null==U?this.x()+this.width()/2:this.x(U-this.width()/2)},cy:function(U){return null==U?this.y()+this.height()/2:this.y(U-this.height()/2)},move:function(U,le){return this.x(U).y(le)},center:function(U,le){return this.cx(U).cy(le)},width:function(U){return this.attr("width",U)},height:function(U){return this.attr("height",U)},size:function(U,le){var we=ne(this,U,le);return this.width(new u.Number(we.width)).height(new u.Number(we.height))},clone:function(U){this.writeDataToDom();var le=De(this.node.cloneNode(!0));return U?U.add(le):this.after(le),le},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(U){return this.after(U).remove(),U},addTo:function(U){return U.put(this)},putIn:function(U){return U.add(this)},id:function(U){return this.attr("id",U)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var U=this.attr("class");return null==U?[]:U.trim().split(u.regex.delimiter)},hasClass:function(U){return-1!=this.classes().indexOf(U)},addClass:function(U){if(!this.hasClass(U)){var le=this.classes();le.push(U),this.attr("class",le.join(" "))}return this},removeClass:function(U){return this.hasClass(U)&&this.attr("class",this.classes().filter(function(le){return le!=U}).join(" ")),this},toggleClass:function(U){return this.hasClass(U)?this.removeClass(U):this.addClass(U)},reference:function(U){return u.get(this.attr(U))},parent:function(U){var le=this;if(!le.node.parentNode)return null;if(le=u.adopt(le.node.parentNode),!U)return le;for(;le&&le.node instanceof ve.SVGElement;){if("string"==typeof U?le.matches(U):le instanceof U)return le;if(!le.node.parentNode||"#document"==le.node.parentNode.nodeName)return null;le=u.adopt(le.node.parentNode)}},doc:function(){return this instanceof u.Doc?this:this.parent(u.Doc)},parents:function(U){var le=[],we=this;do{if(!(we=we.parent(U))||!we.node)break;le.push(we)}while(we.parent);return le},matches:function(U){return((le=this.node).matches||le.matchesSelector||le.msMatchesSelector||le.mozMatchesSelector||le.webkitMatchesSelector||le.oMatchesSelector).call(le,U);var le},native:function(){return this.node},svg:function(U){var le=l.createElement("svg");if(!(U&&this instanceof u.Parent))return le.appendChild(U=l.createElement("svg")),this.writeDataToDom(),U.appendChild(this.node.cloneNode(!0)),le.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");le.innerHTML="<svg>"+U.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var we=0,Le=le.firstChild.childNodes.length;we<Le;we++)this.node.appendChild(le.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(U){return this.dom=U,this},is:function(U){return this instanceof U}}}),u.easing={"-":function(U){return U},"<>":function(U){return-Math.cos(U*Math.PI)/2+.5},">":function(U){return Math.sin(U*Math.PI/2)},"<":function(U){return 1-Math.cos(U*Math.PI/2)}},u.morph=function(U){return function(le,we){return new u.MorphObj(le,we).at(U)}},u.Situation=u.invent({create:function(U){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new u.Number(U.duration).valueOf(),this.delay=new u.Number(U.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=U.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),u.FX=u.invent({create:function(U){this._target=U,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(U,le,we){"object"===t(U)&&(le=U.ease,we=U.delay,U=U.duration);var Le=new u.Situation({duration:U||1e3,delay:we||0,ease:u.easing[le||"-"]||le});return this.queue(Le),this},target:function(U){return U&&U instanceof u.Element?(this._target=U,this):this._target},timeToAbsPos:function(U){return(U-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(U){return this.situation.duration/this._speed*U+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ve.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ve.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(U){return("function"==typeof U||U instanceof u.Situation)&&this.situations.push(U),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof u.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var U,le=this.situation;if(le.init)return this;for(var we in le.animations){U=this.target()[we](),Array.isArray(U)||(U=[U]),Array.isArray(le.animations[we])||(le.animations[we]=[le.animations[we]]);for(var Le=U.length;Le--;)le.animations[we][Le]instanceof u.Number&&(U[Le]=new u.Number(U[Le])),le.animations[we][Le]=U[Le].morph(le.animations[we][Le])}for(var we in le.attrs)le.attrs[we]=new u.MorphObj(this.target().attr(we),le.attrs[we]);for(var we in le.styles)le.styles[we]=new u.MorphObj(this.target().style(we),le.styles[we]);return le.initialTransformation=this.target().matrixify(),le.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(U,le){var we=this.active;return this.active=!1,le&&this.clearQueue(),U&&this.situation&&(!we&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(U){var le=this.last();return this.target().on("finished.fx",function we(Le){Le.detail.situation==le&&(U.call(this,le),this.off("finished.fx",we))}),this._callStart()},during:function(U){var le=this.last(),we=function(Le){Le.detail.situation==le&&U.call(this,Le.detail.pos,u.morph(Le.detail.pos),Le.detail.eased,le)};return this.target().off("during.fx",we).on("during.fx",we),this.after(function(){this.off("during.fx",we)}),this._callStart()},afterAll:function(U){var le=function we(Le){U.call(this),this.off("allfinished.fx",we)};return this.target().off("allfinished.fx",le).on("allfinished.fx",le),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(U,le,we){return this.last()[we||"animations"][U]=le,this._callStart()},step:function(U){var le,we,Le;U||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(le=Math.max(this.absPos,0),we=Math.floor(le),!0===this.situation.loops||we<this.situation.loops?(this.pos=le-we,Le=this.situation.loop,this.situation.loop=we):(this.absPos=this.situation.loops,this.pos=1,Le=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-Le)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var $e=this.situation.ease(this.pos);for(var mt in this.situation.once)mt>this.lastPos&&mt<=$e&&(this.situation.once[mt].call(this.target(),this.pos,$e),delete this.situation.once[mt]);return this.active&&this.target().fire("during",{pos:this.pos,eased:$e,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=$e,this):this},eachAt:function(){var U,le=this,we=this.target(),Le=this.situation;for(var $e in Le.animations)U=[].concat(Le.animations[$e]).map(function(Xt){return"string"!=typeof Xt&&Xt.at?Xt.at(Le.ease(le.pos),le.pos):Xt}),we[$e].apply(we,U);for(var $e in Le.attrs)U=[$e].concat(Le.attrs[$e]).map(function(Li){return"string"!=typeof Li&&Li.at?Li.at(Le.ease(le.pos),le.pos):Li}),we.attr.apply(we,U);for(var $e in Le.styles)U=[$e].concat(Le.styles[$e]).map(function(Li){return"string"!=typeof Li&&Li.at?Li.at(Le.ease(le.pos),le.pos):Li}),we.style.apply(we,U);if(Le.transforms.length){U=Le.initialTransformation,$e=0;for(var mt=Le.transforms.length;$e<mt;$e++){var $t=Le.transforms[$e];$t instanceof u.Matrix?U=$t.relative?U.multiply((new u.Matrix).morph($t).at(Le.ease(this.pos))):U.morph($t).at(Le.ease(this.pos)):($t.relative||$t.undo(U.extract()),U=U.multiply($t.at(Le.ease(this.pos))))}we.matrix(U)}return this},once:function(U,le,we){var Le=this.last();return we||(U=Le.ease(U)),Le.once[U]=le,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:u.Element,construct:{animate:function(U,le,we){return(this.fx||(this.fx=new u.FX(this))).animate(U,le,we)},delay:function(U){return(this.fx||(this.fx=new u.FX(this))).delay(U)},stop:function(U,le){return this.fx&&this.fx.stop(U,le),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),u.MorphObj=u.invent({create:function(U,le){return u.Color.isColor(le)?new u.Color(U).morph(le):u.regex.delimiter.test(U)?u.regex.pathLetters.test(U)?new u.PathArray(U).morph(le):new u.Array(U).morph(le):u.regex.numberAndUnit.test(le)?new u.Number(U).morph(le):(this.value=U,void(this.destination=le))},extend:{at:function(U,le){return le<1?this.value:this.destination},valueOf:function(){return this.value}}}),u.extend(u.FX,{attr:function(U,le,we){if("object"===t(U))for(var Le in U)this.attr(Le,U[Le]);else this.add(U,le,"attrs");return this},plot:function(U,le,we,Le){return 4==arguments.length?this.plot([U,le,we,Le]):this.add("plot",new(this.target().morphArray)(U))}}),u.Box=u.invent({create:function(U,le,we,Le){if(!("object"!==t(U)||U instanceof u.Element))return u.Box.call(this,null!=U.left?U.left:U.x,null!=U.top?U.top:U.y,U.width,U.height);var $e;4==arguments.length&&(this.x=U,this.y=le,this.width=we,this.height=Le),null==($e=this).x&&($e.x=0,$e.y=0,$e.width=0,$e.height=0),$e.w=$e.width,$e.h=$e.height,$e.x2=$e.x+$e.width,$e.y2=$e.y+$e.height,$e.cx=$e.x+$e.width/2,$e.cy=$e.y+$e.height/2}}),u.BBox=u.invent({create:function(U){if(u.Box.apply(this,[].slice.call(arguments)),U instanceof u.Element){var le;try{if(!l.documentElement.contains){for(var we=U.node;we.parentNode;)we=we.parentNode;if(we!=l)throw new Error("Element not in the dom")}le=U.node.getBBox()}catch{if(U instanceof u.Shape){u.parser.draw||u.prepare();var Le=U.clone(u.parser.draw.instance).show();Le&&Le.node&&"function"==typeof Le.node.getBBox&&(le=Le.node.getBBox()),Le&&"function"==typeof Le.remove&&Le.remove()}else le={x:U.node.clientLeft,y:U.node.clientTop,width:U.node.clientWidth,height:U.node.clientHeight}}u.Box.call(this,le)}},inherit:u.Box,parent:u.Element,construct:{bbox:function(){return new u.BBox(this)}}}),u.BBox.prototype.constructor=u.BBox,u.Matrix=u.invent({create:function(U){var le=ye([1,0,0,1,0,0]);U=null===U?le:U instanceof u.Element?U.matrixify():"string"==typeof U?ye(U.split(u.regex.delimiter).map(parseFloat)):6==arguments.length?ye([].slice.call(arguments)):Array.isArray(U)?ye(U):U&&"object"===t(U)?U:le;for(var we=Se.length-1;we>=0;--we)this[Se[we]]=null!=U[Se[we]]?U[Se[we]]:le[Se[we]]},extend:{extract:function(){var U=fe(this,0,1);fe(this,1,0);var le=180/Math.PI*Math.atan2(U.y,U.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(le*Math.PI/180)+this.f*Math.sin(le*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(le*Math.PI/180)+this.e*Math.sin(-le*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:le,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new u.Matrix(this)}},clone:function(){return new u.Matrix(this)},morph:function(U){return this.destination=new u.Matrix(U),this},multiply:function(U){return new u.Matrix(this.native().multiply((le=U,le instanceof u.Matrix||(le=new u.Matrix(le)),le).native()));var le},inverse:function(){return new u.Matrix(this.native().inverse())},translate:function(U,le){return new u.Matrix(this.native().translate(U||0,le||0))},native:function(){for(var U=u.parser.native.createSVGMatrix(),le=Se.length-1;le>=0;le--)U[Se[le]]=this[Se[le]];return U},toString:function(){return"matrix("+Pe(this.a)+","+Pe(this.b)+","+Pe(this.c)+","+Pe(this.d)+","+Pe(this.e)+","+Pe(this.f)+")"}},parent:u.Element,construct:{ctm:function(){return new u.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof u.Nested){var U=this.rect(1,1),le=U.node.getScreenCTM();return U.remove(),new u.Matrix(le)}return new u.Matrix(this.node.getScreenCTM())}}}),u.Point=u.invent({create:function(U,le){var we;we=Array.isArray(U)?{x:U[0],y:U[1]}:"object"===t(U)?{x:U.x,y:U.y}:null!=U?{x:U,y:le??U}:{x:0,y:0},this.x=we.x,this.y=we.y},extend:{clone:function(){return new u.Point(this)},morph:function(U,le){return this.destination=new u.Point(U,le),this}}}),u.extend(u.Element,{point:function(U,le){return new u.Point(U,le).transform(this.screenCTM().inverse())}}),u.extend(u.Element,{attr:function(U,le,we){if(null==U){for(U={},we=(le=this.node.attributes).length-1;we>=0;we--)U[le[we].nodeName]=u.regex.isNumber.test(le[we].nodeValue)?parseFloat(le[we].nodeValue):le[we].nodeValue;return U}if("object"===t(U))for(var Le in U)this.attr(Le,U[Le]);else if(null===le)this.node.removeAttribute(U);else{if(null==le)return null==(le=this.node.getAttribute(U))?u.defaults.attrs[U]:u.regex.isNumber.test(le)?parseFloat(le):le;"stroke-width"==U?this.attr("stroke",parseFloat(le)>0?this._stroke:null):"stroke"==U&&(this._stroke=le),"fill"!=U&&"stroke"!=U||(u.regex.isImage.test(le)&&(le=this.doc().defs().image(le,0,0)),le instanceof u.Image&&(le=this.doc().defs().pattern(0,0,function(){this.add(le)}))),"number"==typeof le?le=new u.Number(le):u.Color.isColor(le)?le=new u.Color(le):Array.isArray(le)&&(le=new u.Array(le)),"leading"==U?this.leading&&this.leading(le):"string"==typeof we?this.node.setAttributeNS(we,U,le.toString()):this.node.setAttribute(U,le.toString()),!this.rebuild||"font-size"!=U&&"x"!=U||this.rebuild(U,le)}return this}}),u.extend(u.Element,{transform:function(U,le){var we;return"object"!==t(U)?(we=new u.Matrix(this).extract(),"string"==typeof U?we[U]:we):(we=new u.Matrix(this),le=!!le||!!U.relative,null!=U.a&&(we=le?we.multiply(new u.Matrix(U)):new u.Matrix(U)),this.attr("transform",we))}}),u.extend(u.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(u.regex.transforms).slice(0,-1).map(function(U){var le=U.trim().split("(");return[le[0],le[1].split(u.regex.delimiter).map(function(we){return parseFloat(we)})]}).reduce(function(U,le){return"matrix"==le[0]?U.multiply(ye(le[1])):U[le[0]].apply(U,le[1])},new u.Matrix)},toParent:function(U){if(this==U)return this;var le=this.screenCTM(),we=U.screenCTM().inverse();return this.addTo(U).untransform().transform(we.multiply(le)),this},toDoc:function(){return this.toParent(this.doc())}}),u.Transformation=u.invent({create:function(U,le){if(arguments.length>1&&"boolean"!=typeof le)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(U))for(var we=0,Le=this.arguments.length;we<Le;++we)this[this.arguments[we]]=U[we];else if(U&&"object"===t(U))for(we=0,Le=this.arguments.length;we<Le;++we)this[this.arguments[we]]=U[this.arguments[we]];this.inversed=!1,!0===le&&(this.inversed=!0)}}),u.Translate=u.invent({parent:u.Matrix,inherit:u.Transformation,create:function(U,le){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),u.extend(u.Element,{style:function(U,le){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===t(U))for(var we in U)this.style(we,U[we]);else{if(!u.regex.isCss.test(U))return this.node.style[H(U)];for(U=U.split(/\s*;\s*/).filter(function(Le){return!!Le}).map(function(Le){return Le.split(/\s*:\s*/)});le=U.pop();)this.style(le[0],le[1])}else this.node.style[H(U)]=null===le||u.regex.isBlank.test(le)?"":le;return this}}),u.Parent=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Element,extend:{children:function(){return u.utils.map(u.utils.filterSVGElements(this.node.childNodes),function(U){return u.adopt(U)})},add:function(U,le){return null==le?this.node.appendChild(U.node):U.node!=this.node.childNodes[le]&&this.node.insertBefore(U.node,this.node.childNodes[le]),this},put:function(U,le){return this.add(U,le),U},has:function(U){return this.index(U)>=0},index:function(U){return[].slice.call(this.node.childNodes).indexOf(U.node)},get:function(U){return u.adopt(this.node.childNodes[U])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(U,le){for(var we=this.children(),Le=0,$e=we.length;Le<$e;Le++)we[Le]instanceof u.Element&&U.apply(we[Le],[Le,we]),le&&we[Le]instanceof u.Container&&we[Le].each(U,le);return this},removeElement:function(U){return this.node.removeChild(U.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),u.extend(u.Parent,{ungroup:function(U,le){return 0===le||this instanceof u.Defs||this.node==u.parser.draw||(U=U||(this instanceof u.Doc?this:this.parent(u.Parent)),le=le||1/0,this.each(function(){return this instanceof u.Defs?this:this instanceof u.Parent?this.ungroup(U,le-1):this.toParent(U)}),this.node.firstChild||this.remove()),this},flatten:function(U,le){return this.ungroup(U,le)}}),u.Container=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Parent}),u.ViewBox=u.invent({parent:u.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(U){u.Element.prototype[U]=function(le){return u.on(this.node,U,le),this}}),u.listeners=[],u.handlerMap=[],u.listenerId=0,u.on=function(U,le,we,Le,$e){var mt=we.bind(Le||U.instance||U),$t=(u.handlerMap.indexOf(U)+1||u.handlerMap.push(U))-1,Xt=le.split(".")[0],Li=le.split(".")[1]||"*";u.listeners[$t]=u.listeners[$t]||{},u.listeners[$t][Xt]=u.listeners[$t][Xt]||{},u.listeners[$t][Xt][Li]=u.listeners[$t][Xt][Li]||{},we._svgjsListenerId||(we._svgjsListenerId=++u.listenerId),u.listeners[$t][Xt][Li][we._svgjsListenerId]=mt,U.addEventListener(Xt,mt,$e||{passive:!1})},u.off=function(U,le,we){var Le=u.handlerMap.indexOf(U),$e=le&&le.split(".")[0],mt=le&&le.split(".")[1],$t="";if(-1!=Le)if(we){if("function"==typeof we&&(we=we._svgjsListenerId),!we)return;u.listeners[Le][$e]&&u.listeners[Le][$e][mt||"*"]&&(U.removeEventListener($e,u.listeners[Le][$e][mt||"*"][we],!1),delete u.listeners[Le][$e][mt||"*"][we])}else if(mt&&$e){if(u.listeners[Le][$e]&&u.listeners[Le][$e][mt]){for(var Xt in u.listeners[Le][$e][mt])u.off(U,[$e,mt].join("."),Xt);delete u.listeners[Le][$e][mt]}}else if(mt)for(var Li in u.listeners[Le])for(var $t in u.listeners[Le][Li])mt===$t&&u.off(U,[Li,mt].join("."));else if($e){if(u.listeners[Le][$e]){for(var $t in u.listeners[Le][$e])u.off(U,[$e,$t].join("."));delete u.listeners[Le][$e]}}else{for(var Li in u.listeners[Le])u.off(U,Li);delete u.listeners[Le],delete u.handlerMap[Le]}},u.extend(u.Element,{on:function(U,le,we,Le){return u.on(this.node,U,le,we,Le),this},off:function(U,le){return u.off(this.node,U,le),this},fire:function(U,le){return this.node.dispatchEvent(U instanceof ve.Event?U:U=new u.CustomEvent(U,{detail:le,cancelable:!0})),this._event=U,this},event:function(){return this._event}}),u.Defs=u.invent({create:"defs",inherit:u.Container}),u.G=u.invent({create:"g",inherit:u.Container,extend:{x:function(U){return null==U?this.transform("x"):this.transform({x:U-this.x()},!0)}},construct:{group:function(){return this.put(new u.G)}}}),u.Doc=u.invent({create:function(U){U&&("svg"==(U="string"==typeof U?l.getElementById(U):U).nodeName?this.constructor.call(this,U):(this.constructor.call(this,u.create("svg")),U.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:u.Container,extend:{namespace:function(){return this.attr({xmlns:u.ns,version:"1.1"}).attr("xmlns:xlink",u.xlink,u.xmlns).attr("xmlns:svgjs",u.svgjs,u.xmlns)},defs:function(){var U;return this._defs||(this._defs=(U=this.node.getElementsByTagName("defs")[0])?u.adopt(U):new u.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,u.parser.draw&&!u.parser.draw.parentNode&&this.node.appendChild(u.parser.draw),this},clone:function(U){this.writeDataToDom();var le=this.node,we=De(le.cloneNode(!0));return U?(U.node||U).appendChild(we.node):le.parentNode.insertBefore(we.node,le.nextSibling),we}}}),u.extend(u.Element,{}),u.Gradient=u.invent({create:function(U){this.constructor.call(this,u.create(U+"Gradient")),this.type=U},inherit:u.Container,extend:{at:function(U,le,we){return this.put(new u.Stop).update(U,le,we)},update:function(U){return this.clear(),"function"==typeof U&&U.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(U,le,we){return"transform"==U&&(U="gradientTransform"),u.Container.prototype.attr.call(this,U,le,we)}},construct:{gradient:function(U,le){return this.defs().gradient(U,le)}}}),u.extend(u.Gradient,u.FX,{from:function(U,le){return this.attr("radial"==(this._target||this).type?{fx:new u.Number(U),fy:new u.Number(le)}:{x1:new u.Number(U),y1:new u.Number(le)})},to:function(U,le){return this.attr("radial"==(this._target||this).type?{cx:new u.Number(U),cy:new u.Number(le)}:{x2:new u.Number(U),y2:new u.Number(le)})}}),u.extend(u.Defs,{gradient:function(U,le){return this.put(new u.Gradient(U)).update(le)}}),u.Stop=u.invent({create:"stop",inherit:u.Element,extend:{update:function(U){return("number"==typeof U||U instanceof u.Number)&&(U={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=U.opacity&&this.attr("stop-opacity",U.opacity),null!=U.color&&this.attr("stop-color",U.color),null!=U.offset&&this.attr("offset",new u.Number(U.offset)),this}}}),u.Pattern=u.invent({create:"pattern",inherit:u.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(U){return this.clear(),"function"==typeof U&&U.call(this,this),this},toString:function(){return this.fill()},attr:function(U,le,we){return"transform"==U&&(U="patternTransform"),u.Container.prototype.attr.call(this,U,le,we)}},construct:{pattern:function(U,le,we){return this.defs().pattern(U,le,we)}}}),u.extend(u.Defs,{pattern:function(U,le,we){return this.put(new u.Pattern).update(we).attr({x:0,y:0,width:U,height:le,patternUnits:"userSpaceOnUse"})}}),u.Shape=u.invent({create:function(U){this.constructor.call(this,U)},inherit:u.Element}),u.Symbol=u.invent({create:"symbol",inherit:u.Container,construct:{symbol:function(){return this.put(new u.Symbol)}}}),u.Use=u.invent({create:"use",inherit:u.Shape,extend:{element:function(U,le){return this.attr("href",(le||"")+"#"+U,u.xlink)}},construct:{use:function(U,le){return this.put(new u.Use).element(U,le)}}}),u.Rect=u.invent({create:"rect",inherit:u.Shape,construct:{rect:function(U,le){return this.put(new u.Rect).size(U,le)}}}),u.Circle=u.invent({create:"circle",inherit:u.Shape,construct:{circle:function(U){return this.put(new u.Circle).rx(new u.Number(U).divide(2)).move(0,0)}}}),u.extend(u.Circle,u.FX,{rx:function(U){return this.attr("r",U)},ry:function(U){return this.rx(U)}}),u.Ellipse=u.invent({create:"ellipse",inherit:u.Shape,construct:{ellipse:function(U,le){return this.put(new u.Ellipse).size(U,le).move(0,0)}}}),u.extend(u.Ellipse,u.Rect,u.FX,{rx:function(U){return this.attr("rx",U)},ry:function(U){return this.attr("ry",U)}}),u.extend(u.Circle,u.Ellipse,{x:function(U){return null==U?this.cx()-this.rx():this.cx(U+this.rx())},y:function(U){return null==U?this.cy()-this.ry():this.cy(U+this.ry())},cx:function(U){return null==U?this.attr("cx"):this.attr("cx",U)},cy:function(U){return null==U?this.attr("cy"):this.attr("cy",U)},width:function(U){return null==U?2*this.rx():this.rx(new u.Number(U).divide(2))},height:function(U){return null==U?2*this.ry():this.ry(new u.Number(U).divide(2))},size:function(U,le){var we=ne(this,U,le);return this.rx(new u.Number(we.width).divide(2)).ry(new u.Number(we.height).divide(2))}}),u.Line=u.invent({create:"line",inherit:u.Shape,extend:{array:function(){return new u.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(U,le,we,Le){return null==U?this.array():(U=void 0!==le?{x1:U,y1:le,x2:we,y2:Le}:new u.PointArray(U).toLine(),this.attr(U))},move:function(U,le){return this.attr(this.array().move(U,le).toLine())},size:function(U,le){var we=ne(this,U,le);return this.attr(this.array().size(we.width,we.height).toLine())}},construct:{line:function(U,le,we,Le){return u.Line.prototype.plot.apply(this.put(new u.Line),null!=U?[U,le,we,Le]:[0,0,0,0])}}}),u.Polyline=u.invent({create:"polyline",inherit:u.Shape,construct:{polyline:function(U){return this.put(new u.Polyline).plot(U||new u.PointArray)}}}),u.Polygon=u.invent({create:"polygon",inherit:u.Shape,construct:{polygon:function(U){return this.put(new u.Polygon).plot(U||new u.PointArray)}}}),u.extend(u.Polyline,u.Polygon,{array:function(){return this._array||(this._array=new u.PointArray(this.attr("points")))},plot:function(U){return null==U?this.array():this.clear().attr("points","string"==typeof U?U:this._array=new u.PointArray(U))},clear:function(){return delete this._array,this},move:function(U,le){return this.attr("points",this.array().move(U,le))},size:function(U,le){var we=ne(this,U,le);return this.attr("points",this.array().size(we.width,we.height))}}),u.extend(u.Line,u.Polyline,u.Polygon,{morphArray:u.PointArray,x:function(U){return null==U?this.bbox().x:this.move(U,this.bbox().y)},y:function(U){return null==U?this.bbox().y:this.move(this.bbox().x,U)},width:function(U){var le=this.bbox();return null==U?le.width:this.size(U,le.height)},height:function(U){var le=this.bbox();return null==U?le.height:this.size(le.width,U)}}),u.Path=u.invent({create:"path",inherit:u.Shape,extend:{morphArray:u.PathArray,array:function(){return this._array||(this._array=new u.PathArray(this.attr("d")))},plot:function(U){return null==U?this.array():this.clear().attr("d","string"==typeof U?U:this._array=new u.PathArray(U))},clear:function(){return delete this._array,this}},construct:{path:function(U){return this.put(new u.Path).plot(U||new u.PathArray)}}}),u.Image=u.invent({create:"image",inherit:u.Shape,extend:{load:function(U){if(!U)return this;var le=this,we=new ve.Image;return u.on(we,"load",function(){u.off(we);var Le=le.parent(u.Pattern);null!==Le&&(0==le.width()&&0==le.height()&&le.size(we.width,we.height),Le&&0==Le.width()&&0==Le.height()&&Le.size(le.width(),le.height()),"function"==typeof le._loaded&&le._loaded.call(le,{width:we.width,height:we.height,ratio:we.width/we.height,url:U}))}),u.on(we,"error",function(Le){u.off(we),"function"==typeof le._error&&le._error.call(le,Le)}),this.attr("href",we.src=this.src=U,u.xlink)},loaded:function(U){return this._loaded=U,this},error:function(U){return this._error=U,this}},construct:{image:function(U,le,we){return this.put(new u.Image).load(U).size(le||0,we||le||0)}}}),u.Text=u.invent({create:function(){this.constructor.call(this,u.create("text")),this.dom.leading=new u.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",u.defaults.attrs["font-family"])},inherit:u.Shape,extend:{x:function(U){return null==U?this.attr("x"):this.attr("x",U)},text:function(U){if(void 0===U){U="";for(var le=this.node.childNodes,we=0,Le=le.length;we<Le;++we)0!=we&&3!=le[we].nodeType&&1==u.adopt(le[we]).dom.newLined&&(U+="\n"),U+=le[we].textContent;return U}if(this.clear().build(!0),"function"==typeof U)U.call(this,this);else{we=0;for(var $e=(U=U.split("\n")).length;we<$e;we++)this.tspan(U[we]).newLine()}return this.build(!1).rebuild()},size:function(U){return this.attr("font-size",U).rebuild()},leading:function(U){return null==U?this.dom.leading:(this.dom.leading=new u.Number(U),this.rebuild())},lines:function(){var U=(this.textPath&&this.textPath()||this).node,le=u.utils.map(u.utils.filterSVGElements(U.childNodes),function(we){return u.adopt(we)});return new u.Set(le)},rebuild:function(U){if("boolean"==typeof U&&(this._rebuild=U),this._rebuild){var le=this,we=0,Le=this.dom.leading*new u.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(le.textPath()||this.attr("x",le.attr("x")),"\n"==this.text()?we+=Le:(this.attr("dy",Le+we),we=0))}),this.fire("rebuild")}return this},build:function(U){return this._build=!!U,this},setData:function(U){return this.dom=U,this.dom.leading=new u.Number(U.leading||1.3),this}},construct:{text:function(U){return this.put(new u.Text).text(U)},plain:function(U){return this.put(new u.Text).plain(U)}}}),u.Tspan=u.invent({create:"tspan",inherit:u.Shape,extend:{text:function(U){return null==U?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof U?U.call(this,this):this.plain(U),this)},dx:function(U){return this.attr("dx",U)},dy:function(U){return this.attr("dy",U)},newLine:function(){var U=this.parent(u.Text);return this.dom.newLined=!0,this.dy(U.dom.leading*U.attr("font-size")).attr("x",U.x())}}}),u.extend(u.Text,u.Tspan,{plain:function(U){return!1===this._build&&this.clear(),this.node.appendChild(l.createTextNode(U)),this},tspan:function(U){var le=(this.textPath&&this.textPath()||this).node,we=new u.Tspan;return!1===this._build&&this.clear(),le.appendChild(we.node),we.text(U)},clear:function(){for(var U=(this.textPath&&this.textPath()||this).node;U.hasChildNodes();)U.removeChild(U.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),u.TextPath=u.invent({create:"textPath",inherit:u.Parent,parent:u.Text,construct:{morphArray:u.PathArray,array:function(){var U=this.track();return U?U.array():null},plot:function(U){var le=this.track(),we=null;return le&&(we=le.plot(U)),null==U?we:this},track:function(){var U=this.textPath();if(U)return U.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return u.adopt(this.node.firstChild)}}}),u.Nested=u.invent({create:function(){this.constructor.call(this,u.create("svg")),this.style("overflow","visible")},inherit:u.Container,construct:{nested:function(){return this.put(new u.Nested)}}});var M={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(U,le){return"color"==le?U:U+"-"+le}};function N(U,le,we,Le){return we+Le.replace(u.regex.dots," .")}function H(U){return U.toLowerCase().replace(/-(.)/g,function(le,we){return we.toUpperCase()})}function Z(U){return U.charAt(0).toUpperCase()+U.slice(1)}function J(U){var le=U.toString(16);return 1==le.length?"0"+le:le}function ne(U,le,we){if(null==le||null==we){var Le=U.bbox();null==le?le=Le.width/Le.height*we:null==we&&(we=Le.height/Le.width*le)}return{width:le,height:we}}function fe(U,le,we){return{x:le*U.a+we*U.c+0,y:le*U.b+we*U.d+0}}function ye(U){return{a:U[0],b:U[1],c:U[2],d:U[3],e:U[4],f:U[5]}}function De(U){for(var le=U.childNodes.length-1;le>=0;le--)U.childNodes[le]instanceof ve.SVGElement&&De(U.childNodes[le]);return u.adopt(U).id(u.eid(U.nodeName))}function Pe(U){return Math.abs(U)>1e-37?U:0}["fill","stroke"].forEach(function(U){var le={};le[U]=function(we){if(void 0===we)return this;if("string"==typeof we||u.Color.isRgb(we)||we&&"function"==typeof we.fill)this.attr(U,we);else for(var Le=M[U].length-1;Le>=0;Le--)null!=we[M[U][Le]]&&this.attr(M.prefix(U,M[U][Le]),we[M[U][Le]]);return this},u.extend(u.Element,u.FX,le)}),u.extend(u.Element,u.FX,{translate:function(U,le){return this.transform({x:U,y:le})},matrix:function(U){return this.attr("transform",new u.Matrix(6==arguments.length?[].slice.call(arguments):U))},opacity:function(U){return this.attr("opacity",U)},dx:function(U){return this.x(new u.Number(U).plus(this instanceof u.FX?0:this.x()),!0)},dy:function(U){return this.y(new u.Number(U).plus(this instanceof u.FX?0:this.y()),!0)}}),u.extend(u.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(U){return this.node.getPointAtLength(U)}}),u.Set=u.invent({create:function(U){Array.isArray(U)?this.members=U:this.clear()},extend:{add:function(){for(var U=[].slice.call(arguments),le=0,we=U.length;le<we;le++)this.members.push(U[le]);return this},remove:function(U){var le=this.index(U);return le>-1&&this.members.splice(le,1),this},each:function(U){for(var le=0,we=this.members.length;le<we;le++)U.apply(this.members[le],[le,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(U){return this.index(U)>=0},index:function(U){return this.members.indexOf(U)},get:function(U){return this.members[U]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(U){return new u.Set(U)}}}),u.FX.Set=u.invent({create:function(U){this.set=U}}),u.Set.inherit=function(){var U=[];for(var le in u.Shape.prototype)"function"==typeof u.Shape.prototype[le]&&"function"!=typeof u.Set.prototype[le]&&U.push(le);for(var le in U.forEach(function(Le){u.Set.prototype[Le]=function(){for(var $e=0,mt=this.members.length;$e<mt;$e++)this.members[$e]&&"function"==typeof this.members[$e][Le]&&this.members[$e][Le].apply(this.members[$e],arguments);return"animate"==Le?this.fx||(this.fx=new u.FX.Set(this)):this}}),U=[],u.FX.prototype)"function"==typeof u.FX.prototype[le]&&"function"!=typeof u.FX.Set.prototype[le]&&U.push(le);U.forEach(function(we){u.FX.Set.prototype[we]=function(){for(var Le=0,$e=this.set.members.length;Le<$e;Le++)this.set.members[Le].fx[we].apply(this.set.members[Le].fx,arguments);return this}})},u.extend(u.Element,{}),u.extend(u.Element,{remember:function(U,le){if("object"===t(arguments[0]))for(var we in U)this.remember(we,U[we]);else{if(1==arguments.length)return this.memory()[U];this.memory()[U]=le}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var U=arguments.length-1;U>=0;U--)delete this.memory()[arguments[U]];return this},memory:function(){return this._memory||(this._memory={})}}),u.get=function(U){var le=l.getElementById(function(we){var Le=(we||"").toString().match(u.regex.reference);if(Le)return Le[1]}(U)||U);return u.adopt(le)},u.select=function(U,le){return new u.Set(u.utils.map((le||l).querySelectorAll(U),function(we){return u.adopt(we)}))},u.extend(u.Parent,{select:function(U){return u.select(U,this.node)}});var Se="abcdef".split("");if("function"!=typeof ve.CustomEvent){var ze=function(U,le){le=le||{bubbles:!1,cancelable:!1,detail:void 0};var we=l.createEvent("CustomEvent");return we.initCustomEvent(U,le.bubbles,le.cancelable,le.detail),we};ze.prototype=ve.Event.prototype,u.CustomEvent=ze}else u.CustomEvent=ve.CustomEvent;return u},void 0!==(T=function(){return en(ci,ci.document)}.call(ja,Zt,ja,uo))&&(uo.exports=T),
/*! svg.filter.js - v2.0.2 - 2016-02-24
      * https://github.com/wout/svg.filter.js
      * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(E,M){return this.add(E,M),!E.attr("in")&&this.autoSetIn&&E.attr("in",this.source),E.attr("result")||E.attr("result",E),E},blend:function(E,M,N){return this.put(new SVG.BlendEffect(E,M,N))},colorMatrix:function(E,M){return this.put(new SVG.ColorMatrixEffect(E,M))},convolveMatrix:function(E){return this.put(new SVG.ConvolveMatrixEffect(E))},componentTransfer:function(E){return this.put(new SVG.ComponentTransferEffect(E))},composite:function(E,M,N){return this.put(new SVG.CompositeEffect(E,M,N))},flood:function(E,M){return this.put(new SVG.FloodEffect(E,M))},offset:function(E,M){return this.put(new SVG.OffsetEffect(E,M))},image:function(E){return this.put(new SVG.ImageEffect(E))},merge:function(){var E=[void 0];for(var M in arguments)E.push(arguments[M]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,E)))},gaussianBlur:function(E,M){return this.put(new SVG.GaussianBlurEffect(E,M))},morphology:function(E,M){return this.put(new SVG.MorphologyEffect(E,M))},diffuseLighting:function(E,M,N){return this.put(new SVG.DiffuseLightingEffect(E,M,N))},displacementMap:function(E,M,N,H,Z){return this.put(new SVG.DisplacementMapEffect(E,M,N,H,Z))},specularLighting:function(E,M,N,H){return this.put(new SVG.SpecularLightingEffect(E,M,N,H))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(E,M,N,H,Z){return this.put(new SVG.TurbulenceEffect(E,M,N,H,Z))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(E){var M=this.put(new SVG.Filter);return"function"==typeof E&&E.call(M,M),M}}),SVG.extend(SVG.Container,{filter:function(E){return this.defs().filter(E)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(E){return this.filterer=E instanceof SVG.Element?E:this.doc().filter(E),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(E){return this.filterer&&!0===E&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(E){return null==E?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",E)},result:function(E){return null==E?this.attr("result"):this.attr("result",E)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(E){return null==E?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",E)},result:function(E){return null==E?this.attr("result"):this.attr("result",E)},toString:function(){return this.result()}}});var ve={blend:function(E,M){return this.parent()&&this.parent().blend(this,E,M)},colorMatrix:function(E,M){return this.parent()&&this.parent().colorMatrix(E,M).in(this)},convolveMatrix:function(E){return this.parent()&&this.parent().convolveMatrix(E).in(this)},componentTransfer:function(E){return this.parent()&&this.parent().componentTransfer(E).in(this)},composite:function(E,M){return this.parent()&&this.parent().composite(this,E,M)},flood:function(E,M){return this.parent()&&this.parent().flood(E,M)},offset:function(E,M){return this.parent()&&this.parent().offset(E,M).in(this)},image:function(E){return this.parent()&&this.parent().image(E)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(E,M){return this.parent()&&this.parent().gaussianBlur(E,M).in(this)},morphology:function(E,M){return this.parent()&&this.parent().morphology(E,M).in(this)},diffuseLighting:function(E,M,N){return this.parent()&&this.parent().diffuseLighting(E,M,N).in(this)},displacementMap:function(E,M,N,H){return this.parent()&&this.parent().displacementMap(this,E,M,N,H)},specularLighting:function(E,M,N,H){return this.parent()&&this.parent().specularLighting(E,M,N,H).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(E,M,N,H,Z){return this.parent()&&this.parent().turbulence(E,M,N,H,Z).in(this)}};SVG.extend(SVG.Effect,ve),SVG.extend(SVG.ParentEffect,ve),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(E){this.attr("in",E)}}});var l={blend:function(E,M,N){this.attr({in:E,in2:M,mode:N||"normal"})},colorMatrix:function(E,M){"matrix"==E&&(M=x(M)),this.attr({type:E,values:void 0===M?null:M})},convolveMatrix:function(E){E=x(E),this.attr({order:Math.sqrt(E.split(" ").length),kernelMatrix:E})},composite:function(E,M,N){this.attr({in:E,in2:M,operator:N})},flood:function(E,M){this.attr("flood-color",E),null!=M&&this.attr("flood-opacity",M)},offset:function(E,M){this.attr({dx:E,dy:M})},image:function(E){this.attr("href",E,SVG.xlink)},displacementMap:function(E,M,N,H,Z){this.attr({in:E,in2:M,scale:N,xChannelSelector:H,yChannelSelector:Z})},gaussianBlur:function(E,M){this.attr("stdDeviation",null!=E||null!=M?function(N){if(!Array.isArray(N))return N;for(var H=0,Z=N.length,J=[];H<Z;H++)J.push(N[H]);return J.join(" ")}(Array.prototype.slice.call(arguments)):"0 0")},morphology:function(E,M){this.attr({operator:E,radius:M})},tile:function(){},turbulence:function(E,M,N,H,Z){this.attr({numOctaves:M,seed:N,stitchTiles:H,baseFrequency:E,type:Z})}},u={merge:function(){var E;if(arguments[0]instanceof SVG.Set){var M=this;arguments[0].each(function(H){this instanceof SVG.MergeNode?M.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&M.put(new SVG.MergeNode(this))})}else{E=Array.isArray(arguments[0])?arguments[0]:arguments;for(var N=0;N<E.length;N++)E[N]instanceof SVG.MergeNode?this.put(E[N]):this.put(new SVG.MergeNode(E[N]))}},componentTransfer:function(E){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(N){this[N]=new(SVG["Func"+N.toUpperCase()])("identity"),this.rgb.add(this[N]),this.node.appendChild(this[N].node)}.bind(this)),E)for(var M in E.rgb&&(["r","g","b"].forEach(function(N){this[N].attr(E.rgb)}.bind(this)),delete E.rgb),E)this[M].attr(E[M])},diffuseLighting:function(E,M,N){this.attr({surfaceScale:E,diffuseConstant:M,kernelUnitLength:N})},specularLighting:function(E,M,N,H){this.attr({surfaceScale:E,diffuseConstant:M,specularExponent:N,kernelUnitLength:H})}},m={distantLight:function(E,M){this.attr({azimuth:E,elevation:M})},pointLight:function(E,M,N){this.attr({x:E,y:M,z:N})},spotLight:function(E,M,N,H,Z,J){this.attr({x:E,y:M,z:N,pointsAtX:H,pointsAtY:Z,pointsAtZ:J})},mergeNode:function(E){this.attr("in",E)}};function x(E){return Array.isArray(E)&&(E=new SVG.Array(E)),E.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function w(){var E=function(){};for(var M in"function"==typeof arguments[arguments.length-1]&&(E=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var N in arguments[M])E(arguments[M][N],N,arguments[M])}["r","g","b","a"].forEach(function(E){m["Func"+E.toUpperCase()]=function(M){switch(this.attr("type",M),M){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),w(l,function(E,M){var N=M.charAt(0).toUpperCase()+M.slice(1);SVG[N+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+N)),E.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),w(u,function(E,M){var N=M.charAt(0).toUpperCase()+M.slice(1);SVG[N+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+N)),E.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),w(m,function(E,M){var N=M.charAt(0).toUpperCase()+M.slice(1);SVG[N]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+N)),E.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(E){return E instanceof SVG.MergeNode?this.add(E,0):this.add(new SVG.MergeNode(E),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(E){return null==E?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",E)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function ve(w,E,M,N,H,Z,J){for(var ne=w.slice(E,M||J),fe=N.slice(H,Z||J),ye=0,De={pos:[0,0],start:[0,0]},Pe={pos:[0,0],start:[0,0]};ne[ye]=l.call(De,ne[ye]),fe[ye]=l.call(Pe,fe[ye]),ne[ye][0]!=fe[ye][0]||"M"==ne[ye][0]||"A"==ne[ye][0]&&(ne[ye][4]!=fe[ye][4]||ne[ye][5]!=fe[ye][5])?(Array.prototype.splice.apply(ne,[ye,1].concat(m.call(De,ne[ye]))),Array.prototype.splice.apply(fe,[ye,1].concat(m.call(Pe,fe[ye])))):(ne[ye]=u.call(De,ne[ye]),fe[ye]=u.call(Pe,fe[ye])),++ye!=ne.length||ye!=fe.length;)ye==ne.length&&ne.push(["C",De.pos[0],De.pos[1],De.pos[0],De.pos[1],De.pos[0],De.pos[1]]),ye==fe.length&&fe.push(["C",Pe.pos[0],Pe.pos[1],Pe.pos[0],Pe.pos[1],Pe.pos[0],Pe.pos[1]]);return{start:ne,dest:fe}}function l(w){switch(w[0]){case"z":case"Z":w[0]="L",w[1]=this.start[0],w[2]=this.start[1];break;case"H":w[0]="L",w[2]=this.pos[1];break;case"V":w[0]="L",w[2]=w[1],w[1]=this.pos[0];break;case"T":w[0]="Q",w[3]=w[1],w[4]=w[2],w[1]=this.reflection[1],w[2]=this.reflection[0];break;case"S":w[0]="C",w[6]=w[4],w[5]=w[3],w[4]=w[2],w[3]=w[1],w[2]=this.reflection[1],w[1]=this.reflection[0]}return w}function u(w){var E=w.length;return this.pos=[w[E-2],w[E-1]],-1!="SCQT".indexOf(w[0])&&(this.reflection=[2*this.pos[0]-w[E-4],2*this.pos[1]-w[E-3]]),w}function m(w){var E=[w];switch(w[0]){case"M":return this.pos=this.start=[w[1],w[2]],E;case"L":w[5]=w[3]=w[1],w[6]=w[4]=w[2],w[1]=this.pos[0],w[2]=this.pos[1];break;case"Q":w[6]=w[4],w[5]=w[3],w[4]=1*w[4]/3+2*w[2]/3,w[3]=1*w[3]/3+2*w[1]/3,w[2]=1*this.pos[1]/3+2*w[2]/3,w[1]=1*this.pos[0]/3+2*w[1]/3;break;case"A":w=(E=function(M,N){var H,Z,J,ne,fe,ye,De,Pe,Se,ze,U,le,we,Le,$e,mt,$t,Xt,Li,Ji,ln,Un,cr,Wr,pa,la,Ta=Math.abs(N[1]),es=Math.abs(N[2]),ms=N[3]%360,Is=N[4],va=N[5],Qr=N[6],Ms=N[7],na=new SVG.Point(M),Ns=new SVG.Point(Qr,Ms),Ku=[];if(0===Ta||0===es||na.x===Ns.x&&na.y===Ns.y)return[["C",na.x,na.y,Ns.x,Ns.y,Ns.x,Ns.y]];for((Z=(H=new SVG.Point((na.x-Ns.x)/2,(na.y-Ns.y)/2).transform((new SVG.Matrix).rotate(ms))).x*H.x/(Ta*Ta)+H.y*H.y/(es*es))>1&&(Ta*=Z=Math.sqrt(Z),es*=Z),J=(new SVG.Matrix).rotate(ms).scale(1/Ta,1/es).rotate(-ms),na=na.transform(J),ye=(ne=[(Ns=Ns.transform(J)).x-na.x,Ns.y-na.y])[0]*ne[0]+ne[1]*ne[1],fe=Math.sqrt(ye),ne[0]/=fe,ne[1]/=fe,De=ye<4?Math.sqrt(1-ye/4):0,Is===va&&(De*=-1),Pe=new SVG.Point((Ns.x+na.x)/2+De*-ne[1],(Ns.y+na.y)/2+De*ne[0]),Se=new SVG.Point(na.x-Pe.x,na.y-Pe.y),ze=new SVG.Point(Ns.x-Pe.x,Ns.y-Pe.y),U=Math.acos(Se.x/Math.sqrt(Se.x*Se.x+Se.y*Se.y)),Se.y<0&&(U*=-1),le=Math.acos(ze.x/Math.sqrt(ze.x*ze.x+ze.y*ze.y)),ze.y<0&&(le*=-1),va&&U>le&&(le+=2*Math.PI),!va&&U<le&&(le-=2*Math.PI),mt=[],$t=U,we=(le-U)/(Le=Math.ceil(2*Math.abs(U-le)/Math.PI)),$e=4*Math.tan(we/4)/3,ln=0;ln<=Le;ln++)Li=Math.cos($t),Xt=Math.sin($t),Ji=new SVG.Point(Pe.x+Li,Pe.y+Xt),mt[ln]=[new SVG.Point(Ji.x+$e*Xt,Ji.y-$e*Li),Ji,new SVG.Point(Ji.x-$e*Xt,Ji.y+$e*Li)],$t+=we;for(mt[0][0]=mt[0][1].clone(),mt[mt.length-1][2]=mt[mt.length-1][1].clone(),J=(new SVG.Matrix).rotate(ms).scale(Ta,es).rotate(-ms),ln=0,Un=mt.length;ln<Un;ln++)mt[ln][0]=mt[ln][0].transform(J),mt[ln][1]=mt[ln][1].transform(J),mt[ln][2]=mt[ln][2].transform(J);for(ln=1,Un=mt.length;ln<Un;ln++)cr=(Ji=mt[ln-1][2]).x,Wr=Ji.y,pa=(Ji=mt[ln][0]).x,la=Ji.y,Qr=(Ji=mt[ln][1]).x,Ku.push(["C",cr,Wr,pa,la,Qr,Ms=Ji.y]);return Ku}(this.pos,w))[0]}return w[0]="C",this.pos=[w[5],w[6]],this.reflection=[2*w[5]-w[3],2*w[6]-w[4]],E}function x(w,E){if(!1===E)return!1;for(var M=E,N=w.length;M<N;++M)if("M"==w[M][0])return M;return!1}SVG.extend(SVG.PathArray,{morph:function(w){for(var E=this.value,M=this.parse(w),N=0,H=0,Z=!1,J=!1;!1!==N||!1!==H;){var ne;Z=x(E,!1!==N&&N+1),J=x(M,!1!==H&&H+1),!1===N&&(N=0==(ne=new SVG.PathArray(fe.start).bbox()).height||0==ne.width?E.push(E[0])-1:E.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1),!1===H&&(H=0==(ne=new SVG.PathArray(fe.dest).bbox()).height||0==ne.width?M.push(M[0])-1:M.push(["M",ne.x+ne.width/2,ne.y+ne.height/2])-1);var fe=ve(E,N,Z,M,H,J);E=E.slice(0,N).concat(fe.start,!1===Z?[]:E.slice(Z)),M=M.slice(0,H).concat(fe.dest,!1===J?[]:M.slice(J)),N=!1!==Z&&N+fe.start.length,H=!1!==J&&H+fe.dest.length}return this.value=E,this.destination=new SVG.PathArray,this.destination.value=M,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
      * https://github.com/svgdotjs/svg.draggable.js
      * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function ve(l){l.remember("_draggable",this),this.el=l}ve.prototype.init=function(l,u){var m=this;this.constraint=l,this.value=u,this.el.on("mousedown.drag",function(x){m.start(x)}),this.el.on("touchstart.drag",function(x){m.start(x)})},ve.prototype.transformPoint=function(l,u){var m=(l=l||window.event).changedTouches&&l.changedTouches[0]||l;return this.p.x=m.clientX-(u||0),this.p.y=m.clientY,this.p.matrixTransform(this.m)},ve.prototype.getBBox=function(){var l=this.el.bbox();return this.el instanceof SVG.Nested&&(l=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(l.x=this.el.x(),l.y=this.el.y()),l},ve.prototype.start=function(l){if("click"!=l.type&&"mousedown"!=l.type&&"mousemove"!=l.type||1==(l.which||l.buttons)){var u=this;if(this.el.fire("beforedrag",{event:l,handler:this}),!this.el.event().defaultPrevented){l.preventDefault(),l.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var m,x=this.getBBox();if(this.el instanceof SVG.Text)switch(m=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":m/=2;break;case"start":m=0}this.startPoints={point:this.transformPoint(l,m),box:x,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(w){u.drag(w)}),SVG.on(window,"touchmove.drag",function(w){u.drag(w)}),SVG.on(window,"mouseup.drag",function(w){u.end(w)}),SVG.on(window,"touchend.drag",function(w){u.end(w)}),this.el.fire("dragstart",{event:l,p:this.startPoints.point,m:this.m,handler:this})}}},ve.prototype.drag=function(l){var u=this.getBBox(),m=this.transformPoint(l),x=this.startPoints.box.x+m.x-this.startPoints.point.x,w=this.startPoints.box.y+m.y-this.startPoints.point.y,E=this.constraint,M=m.x-this.startPoints.point.x,N=m.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:l,p:m,m:this.m,handler:this}),this.el.event().defaultPrevented)return m;if("function"==typeof E){var H=E.call(this.el,x,w,this.m);"boolean"==typeof H&&(H={x:H,y:H}),!0===H.x?this.el.x(x):!1!==H.x&&this.el.x(H.x),!0===H.y?this.el.y(w):!1!==H.y&&this.el.y(H.y)}else"object"==typeof E&&(null!=E.minX&&x<E.minX?M=(x=E.minX)-this.startPoints.box.x:null!=E.maxX&&x>E.maxX-u.width&&(M=(x=E.maxX-u.width)-this.startPoints.box.x),null!=E.minY&&w<E.minY?N=(w=E.minY)-this.startPoints.box.y:null!=E.maxY&&w>E.maxY-u.height&&(N=(w=E.maxY-u.height)-this.startPoints.box.y),null!=E.snapToGrid&&(x-=x%E.snapToGrid,w-=w%E.snapToGrid,M-=M%E.snapToGrid,N-=N%E.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:M,y:N},!0):this.el.move(x,w));return m},ve.prototype.end=function(l){var u=this.drag(l);this.el.fire("dragend",{event:l,p:u,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(l,u){"function"!=typeof l&&"object"!=typeof l||(u=l,l=!0);var m=this.remember("_draggable")||new ve(this);return(l=void 0===l||l)?m.init(u||{},l):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function ve(l){this.el=l,l.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(u,m,x){var w="string"!=typeof u?u:m[u];return x?w/2:w},this.pointCoords=function(u,m){var x=this.pointsList[u];return{x:this.pointCoord(x[0],m,"t"===u||"b"===u),y:this.pointCoord(x[1],m,"r"===u||"l"===u)}}}ve.prototype.init=function(l,u){var m=this.el.bbox();this.options={};var x=this.el.selectize.defaults.points;for(var w in this.el.selectize.defaults)this.options[w]=this.el.selectize.defaults[w],void 0!==u[w]&&(this.options[w]=u[w]);var E=["points","pointsExclude"];for(var w in E){var M=this.options[E[w]];"string"==typeof M?M=M.length>0?M.split(/\s*,\s*/i):[]:"boolean"==typeof M&&"points"===E[w]&&(M=M?x:[]),this.options[E[w]]=M}this.options.points=[x,this.options.points].reduce(function(N,H){return N.filter(function(Z){return H.indexOf(Z)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(N,H){return N.filter(function(Z){return H.indexOf(Z)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(m.x,m.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(l):this.selectRect(l),this.observe(),this.cleanup()},ve.prototype.selectPoints=function(l){return this.pointSelection.isSelected=l,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},ve.prototype.getPointArray=function(){var l=this.el.bbox();return this.el.array().valueOf().map(function(u){return[u[0]-l.x,u[1]-l.y]})},ve.prototype.drawPoints=function(){for(var l=this,u=this.getPointArray(),m=0,x=u.length;m<x;++m){var w=function(M){return function(N){(N=N||window.event).preventDefault?N.preventDefault():N.returnValue=!1,N.stopPropagation(),l.el.fire("point",{x:N.pageX||N.touches[0].pageX,y:N.pageY||N.touches[0].pageY,i:M,event:N})}}(m),E=this.drawPoint(u[m][0],u[m][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",w).on("mousedown",w);this.pointSelection.set.add(E)}},ve.prototype.drawPoint=function(l,u){var m=this.options.pointType;switch(m){case"circle":return this.drawCircle(l,u);case"rect":return this.drawRect(l,u);default:if("function"==typeof m)return m.call(this,l,u);throw new Error("Unknown "+m+" point type!")}},ve.prototype.drawCircle=function(l,u){return this.nested.circle(this.options.pointSize).center(l,u)},ve.prototype.drawRect=function(l,u){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(l,u)},ve.prototype.updatePointSelection=function(){var l=this.getPointArray();this.pointSelection.set.each(function(u){this.cx()===l[u][0]&&this.cy()===l[u][1]||this.center(l[u][0],l[u][1])})},ve.prototype.updateRectSelection=function(){var l=this,u=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:u.width,height:u.height}),this.options.points.length&&this.options.points.map(function(x,w){var E=l.pointCoords(x,u);l.rectSelection.set.get(w+1).center(E.x,E.y)}),this.options.rotationPoint){var m=this.rectSelection.set.length();this.rectSelection.set.get(m-1).center(u.width/2,20)}},ve.prototype.selectRect=function(l){var u=this,m=this.el.bbox();function x(M){return function(N){(N=N||window.event).preventDefault?N.preventDefault():N.returnValue=!1,N.stopPropagation(),u.el.fire(M,{x:N.pageX||N.touches[0].pageX,y:N.pageY||N.touches[0].pageY,event:N})}}if(this.rectSelection.isSelected=l,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(m.width,m.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(M,N){var H=u.pointCoords(M,m),Z=u.drawPoint(H.x,H.y).attr("class",u.options.classPoints+"_"+M).on("mousedown",x(M)).on("touchstart",x(M));u.rectSelection.set.add(Z)}),this.rectSelection.set.each(function(){this.addClass(u.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var w=function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation(),u.el.fire("rot",{x:M.pageX||M.touches[0].pageX,y:M.pageY||M.touches[0].pageY,event:M})},E=this.drawPoint(m.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",w).on("mousedown",w);this.rectSelection.set.add(E)}},ve.prototype.handler=function(){var l=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(l.x,l.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},ve.prototype.observe=function(){var l=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){l.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){l.handler()})},ve.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(l,u){return"object"==typeof l&&(u=l,l=!0),(this.remember("_selectHandler")||new ve(this)).init(void 0===l||l,u||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function ve(l){l.remember("_resizeHandler",this),this.el=l,this.parameters={},this.lastUpdateCall=null,this.p=l.doc().node.createSVGPoint()}ve.prototype.transformPoint=function(l,u,m){return this.p.x=l-(this.offset.x-window.pageXOffset),this.p.y=u-(this.offset.y-window.pageYOffset),this.p.matrixTransform(m||this.m)},ve.prototype._extractPosition=function(l){return{x:null!=l.clientX?l.clientX:l.touches[0].clientX,y:null!=l.clientY?l.clientY:l.touches[0].clientY}},ve.prototype.init=function(l){var u=this;if(this.stop(),"stop"!==l){for(var m in this.options={},this.el.resize.defaults)this.options[m]=this.el.resize.defaults[m],void 0!==l[m]&&(this.options[m]=l[m]);this.el.on("lt.resize",function(x){u.resize(x||window.event)}),this.el.on("rt.resize",function(x){u.resize(x||window.event)}),this.el.on("rb.resize",function(x){u.resize(x||window.event)}),this.el.on("lb.resize",function(x){u.resize(x||window.event)}),this.el.on("t.resize",function(x){u.resize(x||window.event)}),this.el.on("r.resize",function(x){u.resize(x||window.event)}),this.el.on("b.resize",function(x){u.resize(x||window.event)}),this.el.on("l.resize",function(x){u.resize(x||window.event)}),this.el.on("rot.resize",function(x){u.resize(x||window.event)}),this.el.on("point.resize",function(x){u.resize(x||window.event)}),this.update()}},ve.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},ve.prototype.resize=function(l){var u=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var m=this._extractPosition(l.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(m.x,m.y),x:l.detail.x,y:l.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==l.detail.i){var x=this.el.array().valueOf();this.parameters.i=l.detail.i,this.parameters.pointCoords=[x[l.detail.i][0],x[l.detail.i][1]]}switch(l.type){case"lt":this.calc=function(w,E){var M=this.snapToGrid(w,E);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y+M[1]).size(this.parameters.box.width-M[0],this.parameters.box.height-M[1])}};break;case"rt":this.calc=function(w,E){var M=this.snapToGrid(w,E,2);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).size(this.parameters.box.width+M[0],this.parameters.box.height-M[1])}};break;case"rb":this.calc=function(w,E){var M=this.snapToGrid(w,E,0);if(this.parameters.box.width+M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+M[0]);M=this.checkAspectRatio(M),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+M[0],this.parameters.box.height+M[1])}};break;case"lb":this.calc=function(w,E){var M=this.snapToGrid(w,E,1);if(this.parameters.box.width-M[0]>0&&this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+M[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-M[0]);M=this.checkAspectRatio(M,!0),this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).size(this.parameters.box.width-M[0],this.parameters.box.height+M[1])}};break;case"t":this.calc=function(w,E){var M=this.snapToGrid(w,E,2);if(this.parameters.box.height-M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+M[1]).height(this.parameters.box.height-M[1])}};break;case"r":this.calc=function(w,E){var M=this.snapToGrid(w,E,0);if(this.parameters.box.width+M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+M[0])}};break;case"b":this.calc=function(w,E){var M=this.snapToGrid(w,E,0);if(this.parameters.box.height+M[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+M[1])}};break;case"l":this.calc=function(w,E){var M=this.snapToGrid(w,E,1);if(this.parameters.box.width-M[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+M[0],this.parameters.box.y).width(this.parameters.box.width-M[0])}};break;case"rot":this.calc=function(w,E){var M=w+this.parameters.p.x,N=E+this.parameters.p.y,H=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),Z=Math.atan2(N-this.parameters.box.y-this.parameters.box.height/2,M-this.parameters.box.x-this.parameters.box.width/2),J=this.parameters.rotation+180*(Z-H)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(J-J%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(w,E){var M=this.snapToGrid(w,E,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),N=this.el.array().valueOf();N[this.parameters.i][0]=this.parameters.pointCoords[0]+M[0],N[this.parameters.i][1]=this.parameters.pointCoords[1]+M[1],this.el.plot(N)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:l}),SVG.on(window,"touchmove.resize",function(w){u.update(w||window.event)}),SVG.on(window,"touchend.resize",function(){u.done()}),SVG.on(window,"mousemove.resize",function(w){u.update(w||window.event)}),SVG.on(window,"mouseup.resize",function(){u.done()})},ve.prototype.update=function(l){if(l){var u=this._extractPosition(l),m=this.transformPoint(u.x,u.y),x=m.x-this.parameters.p.x,w=m.y-this.parameters.p.y;this.lastUpdateCall=[x,w],this.calc(x,w),this.el.fire("resizing",{dx:x,dy:w,event:l})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},ve.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},ve.prototype.snapToGrid=function(l,u,m,x){var w;return w=void 0!==x?[(m+l)%this.options.snapToGrid,(x+u)%this.options.snapToGrid]:[(this.parameters.box.x+l+(1&(m=m??3)?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+u+(2&m?0:this.parameters.box.height))%this.options.snapToGrid],l<0&&(w[0]-=this.options.snapToGrid),u<0&&(w[1]-=this.options.snapToGrid),l-=Math.abs(w[0])<this.options.snapToGrid/2?w[0]:w[0]-(l<0?-this.options.snapToGrid:this.options.snapToGrid),u-=Math.abs(w[1])<this.options.snapToGrid/2?w[1]:w[1]-(u<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(l,u,m,x)},ve.prototype.constraintToBox=function(l,u,m,x){var w,E,M=this.options.constraint||{};return void 0!==x?(w=m,E=x):(w=this.parameters.box.x+(1&m?0:this.parameters.box.width),E=this.parameters.box.y+(2&m?0:this.parameters.box.height)),void 0!==M.minX&&w+l<M.minX&&(l=M.minX-w),void 0!==M.maxX&&w+l>M.maxX&&(l=M.maxX-w),void 0!==M.minY&&E+u<M.minY&&(u=M.minY-E),void 0!==M.maxY&&E+u>M.maxY&&(u=M.maxY-E),[l,u]},ve.prototype.checkAspectRatio=function(l,u){if(!this.options.saveAspectRatio)return l;var m=l.slice(),x=this.parameters.box.width/this.parameters.box.height,w=this.parameters.box.width+l[0],E=this.parameters.box.height-l[1],M=w/E;return M<x?(m[1]=w/x-this.parameters.box.height,u&&(m[1]=-m[1])):M>x&&(m[0]=this.parameters.box.width-E*x,u&&(m[0]=-m[0])),m},SVG.extend(SVG.Element,{resize:function(l){return(this.remember("_resizeHandler")||new ve(this)).init(l||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var wt=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new yi(this.ctx),this.ctx.axes=new Vn(this.ctx),this.ctx.core=new Bt(this.ctx.el,this.ctx),this.ctx.config=new fr({}),this.ctx.data=new Mn(this.ctx),this.ctx.grid=new pr(this.ctx),this.ctx.graphics=new Dt(this.ctx),this.ctx.coreUtils=new Fi(this.ctx),this.ctx.crosshairs=new rn(this.ctx),this.ctx.events=new Dn(this.ctx),this.ctx.exports=new ka(this.ctx),this.ctx.localization=new Gr(this.ctx),this.ctx.options=new Zi,this.ctx.responsive=new ur(this.ctx),this.ctx.series=new Pr(this.ctx),this.ctx.theme=new lr(this.ctx),this.ctx.formatters=new tn(this.ctx),this.ctx.titleSubtitle=new Pa(this.ctx),this.ctx.legend=new Mr(this.ctx),this.ctx.toolbar=new go(this.ctx),this.ctx.tooltip=new Je(this.ctx),this.ctx.dimensions=new xr(this.ctx),this.ctx.updateHelpers=new ke(this.ctx),this.ctx.zoomPanSelection=new Dr(this.ctx),this.ctx.w.globals.tooltip=new Je(this.ctx)}}]),ve}(),jt=function(){function ve(l){j(this,ve),this.ctx=l,this.w=l.w}return Be(ve,[{key:"clear",value:function(l){var u=l.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:u})}},{key:"killSVG",value:function(l){l.each(function(u,m){this.removeClass("*"),this.off(),this.stop()},!0),l.ungroup(),l.clear()}},{key:"clearDomElements",value:function(l){var u=this,x=this.w.globals.dom.Paper.node;x.parentNode&&x.parentNode.parentNode&&!l.isUpdating&&(x.parentNode.parentNode.style.minHeight="unset");var w=this.w.globals.dom.baseEl;w&&this.ctx.eventList.forEach(function(M){w.removeEventListener(M,u.ctx.events.documentEvent)});var E=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(E.Paper),E.Paper.remove(),E.elWrap=null,E.elGraphical=null,E.elLegendWrap=null,E.elLegendForeign=null,E.baseEl=null,E.elGridRect=null,E.elGridRectMask=null,E.elGridRectMarkerMask=null,E.elForecastMask=null,E.elNonForecastMask=null,E.elDefs=null}}]),ve}(),Xe=new WeakMap,Qt=function(){function ve(l,u){j(this,ve),this.opts=u,this.ctx=this,this.w=new Mi(u).init(),this.el=l,this.w.globals.cuid=tt.randomId(),this.w.globals.chartID=this.w.config.chart.id?tt.escapeString(this.w.config.chart.id):this.w.globals.cuid,new wt(this).initModules(),this.create=tt.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return Be(ve,[{key:"render",value:function(){var l=this;return new Promise(function(u,m){if(null!==l.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),l.w.config.chart.id&&Apex._chartInstances.push({id:l.w.globals.chartID,group:l.w.config.chart.group,chart:l}),l.setLocale(l.w.config.chart.defaultLocale);var x=l.w.config.chart.events.beforeMount;if("function"==typeof x&&x(l,l.w),l.events.fireEvent("beforeMount",[l,l.w]),window.addEventListener("resize",l.windowResizeHandler),function(ne,fe){var ye=!1;if(ne.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var De=ne.getBoundingClientRect();"none"!==ne.style.display&&0!==De.width||(ye=!0)}var Pe=new ResizeObserver(function(Se){ye&&fe.call(ne,Se),ye=!0});ne.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(ne.children).forEach(function(Se){return Pe.observe(Se)}):Pe.observe(ne),Xe.set(fe,Pe)}(l.el.parentNode,l.parentResizeHandler),!l.css){var w=l.el.getRootNode&&l.el.getRootNode(),E=tt.is("ShadowRoot",w),M=l.el.ownerDocument,N=M.getElementById("apexcharts-css");if(E||!N){var H;l.css=document.createElement("style"),l.css.id="apexcharts-css",l.css.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var Z=(null===(H=l.opts.chart)||void 0===H?void 0:H.nonce)||l.w.config.chart.nonce;Z&&l.css.setAttribute("nonce",Z),E?w.prepend(l.css):M.head.appendChild(l.css)}}var J=l.create(l.w.config.series,{});if(!J)return u(l);l.mount(J).then(function(){"function"==typeof l.w.config.chart.events.mounted&&l.w.config.chart.events.mounted(l,l.w),l.events.fireEvent("mounted",[l,l.w]),u(J)}).catch(function(ne){m(ne)})}else m(new Error("Element not found"))})}},{key:"create",value:function(l,u){var m=this.w;new wt(this).initModules();var x=this.w.globals;if(x.noData=!1,x.animationEnded=!1,this.responsive.checkResponsiveConfig(u),m.config.xaxis.convertedCatToNumeric&&new yr(m.config).convertCatToNumericXaxis(m.config,this.ctx),null===this.el||(this.core.setupElements(),"treemap"===m.config.chart.type&&(m.config.grid.show=!1,m.config.yaxis[0].show=!1),0===x.svgWidth))return x.animationEnded=!0,null;var w=Fi.checkComboSeries(l);x.comboCharts=w.comboCharts,x.comboBarCount=w.comboBarCount;var E=l.every(function(Z){return Z.data&&0===Z.data.length});(0===l.length||E)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(l),this.theme.init(),new Jn(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),x.noData&&x.collapsedSeries.length!==x.series.length&&!m.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),x.axisCharts&&(this.core.coreCalculations(),"category"!==m.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=m.globals.minX,this.ctx.toolbar.maxX=m.globals.maxX),this.formatters.heatmapLabelFormatters(),new Fi(this).getLargestMarkerSize(),this.dimensions.plotCoords();var M=this.core.xySettings();this.grid.createGridMask();var N=this.core.plotChartType(l,M),H=new jr(this);return H.bringForward(),m.config.dataLabels.background.enabled&&H.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:N,xyRatios:M,dimensions:{plot:{left:m.globals.translateX,top:m.globals.translateY,width:m.globals.gridWidth,height:m.globals.gridHeight}}}}},{key:"mount",value:function(){var l=this,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,m=this,x=m.w;return new Promise(function(w,E){if(null===m.el)return E(new Error("Not enough data to display or target element not found"));(null===u||x.globals.allSeriesCollapsed)&&m.series.handleNoData(),m.grid=new pr(m);var M,N,H=m.grid.drawGrid();if(m.annotations=new Rn(m),m.annotations.drawImageAnnos(),m.annotations.drawTextAnnos(),"back"===x.config.grid.position&&(H&&x.globals.dom.elGraphical.add(H.el),null!=H&&null!==(M=H.elGridBorders)&&void 0!==M&&M.node&&x.globals.dom.elGraphical.add(H.elGridBorders)),Array.isArray(u.elGraph))for(var Z=0;Z<u.elGraph.length;Z++)x.globals.dom.elGraphical.add(u.elGraph[Z]);else x.globals.dom.elGraphical.add(u.elGraph);"front"===x.config.grid.position&&(H&&x.globals.dom.elGraphical.add(H.el),null!=H&&null!==(N=H.elGridBorders)&&void 0!==N&&N.node&&x.globals.dom.elGraphical.add(H.elGridBorders)),"front"===x.config.xaxis.crosshairs.position&&m.crosshairs.drawXCrosshairs(),"front"===x.config.yaxis[0].crosshairs.position&&m.crosshairs.drawYCrosshairs(),"treemap"!==x.config.chart.type&&m.axes.drawAxis(x.config.chart.type,H);var J=new Ma(l.ctx,H),ne=new Sn(l.ctx,H);if(null!==H&&(J.xAxisLabelCorrections(H.xAxisTickWidth),ne.setYAxisTextAlignments(),x.config.yaxis.map(function(ye,De){-1===x.globals.ignoreYAxisIndexes.indexOf(De)&&ne.yAxisTitleRotate(De,ye.opposite)})),m.annotations.drawAxesAnnotations(),!x.globals.noData){if(x.config.tooltip.enabled&&!x.globals.noData&&m.w.globals.tooltip.drawTooltip(u.xyRatios),x.globals.axisCharts&&(x.globals.isXNumeric||x.config.xaxis.convertedCatToNumeric||x.globals.isRangeBar))(x.config.chart.zoom.enabled||x.config.chart.selection&&x.config.chart.selection.enabled||x.config.chart.pan&&x.config.chart.pan.enabled)&&m.zoomPanSelection.init({xyRatios:u.xyRatios});else{var fe=x.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(ye){fe[ye]=!1})}x.config.chart.toolbar.show&&!x.globals.allSeriesCollapsed&&m.toolbar.createToolbar()}x.globals.memory.methodsToExec.length>0&&x.globals.memory.methodsToExec.forEach(function(ye){ye.method(ye.params,!1,ye.context)}),x.globals.axisCharts||x.globals.noData||m.core.resizeNonAxisCharts(),w(m)})}},{key:"destroy",value:function(){var l,u;window.removeEventListener("resize",this.windowResizeHandler),(u=Xe.get(l=this.parentResizeHandler))&&(u.disconnect(),Xe.delete(l));var m=this.w.config.chart.id;m&&Apex._chartInstances.forEach(function(x,w){x.id===tt.escapeString(m)&&Apex._chartInstances.splice(w,1)}),new jt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(l){var u=this,m=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],w=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],M=this.w;return M.globals.selection=void 0,l.series&&(this.series.resetSeries(!1,!0,!1),l.series.length&&l.series[0].data&&(l.series=l.series.map(function(N,H){return u.updateHelpers._extendSeries(N,H)})),this.updateHelpers.revertDefaultAxisMinMax()),l.xaxis&&(l=this.updateHelpers.forceXAxisUpdate(l)),l.yaxis&&(l=this.updateHelpers.forceYAxisUpdate(l)),M.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),l.theme&&(l=this.theme.updateThemeOptions(l)),this.updateHelpers._updateOptions(l,m,x,w,E)}},{key:"updateSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(l,u,m)}},{key:"appendSeries",value:function(l){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],x=this.w.config.series.slice();return x.push(l),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(x,u,m)}},{key:"appendData",value:function(l){var u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this;m.w.globals.dataChanged=!0,m.series.getPreviousPaths();for(var x=m.w.config.series.slice(),w=0;w<x.length;w++)if(null!=l[w])for(var E=0;E<l[w].data.length;E++)x[w].data.push(l[w].data[E]);return m.w.config.series=x,u&&(m.w.globals.initialSeries=tt.clone(m.w.config.series)),this.update()}},{key:"update",value:function(l){var u=this;return new Promise(function(m,x){new jt(u.ctx).clear({isUpdating:!0});var w=u.create(u.w.config.series,l);if(!w)return m(u);u.mount(w).then(function(){"function"==typeof u.w.config.chart.events.updated&&u.w.config.chart.events.updated(u,u.w),u.events.fireEvent("updated",[u,u.w]),u.w.globals.isDirty=!0,m(u)}).catch(function(E){x(E)})})}},{key:"getSyncedCharts",value:function(){var l=this.getGroupedCharts(),u=[this];return l.length&&(u=[],l.forEach(function(m){u.push(m)})),u}},{key:"getGroupedCharts",value:function(){var l=this;return Apex._chartInstances.filter(function(u){if(u.group)return!0}).map(function(u){return l.w.config.chart.group===u.group?u.chart:l})}},{key:"toggleSeries",value:function(l){return this.series.toggleSeries(l)}},{key:"highlightSeriesOnLegendHover",value:function(l,u){return this.series.toggleSeriesOnHover(l,u)}},{key:"showSeries",value:function(l){this.series.showSeries(l)}},{key:"hideSeries",value:function(l){this.series.hideSeries(l)}},{key:"isSeriesHidden",value:function(l){this.series.isSeriesHidden(l)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(l,u){this.events.addEventListener(l,u)}},{key:"removeEventListener",value:function(l,u){this.events.removeEventListener(l,u)}},{key:"addXaxisAnnotation",value:function(l){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,x=this;m&&(x=m),x.annotations.addXaxisAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],x)}},{key:"addYaxisAnnotation",value:function(l){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,x=this;m&&(x=m),x.annotations.addYaxisAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],x)}},{key:"addPointAnnotation",value:function(l){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,x=this;m&&(x=m),x.annotations.addPointAnnotationExternal(l,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],x)}},{key:"clearAnnotations",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,u=this;l&&(u=l),u.annotations.clearAnnotations(u)}},{key:"removeAnnotation",value:function(l){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,m=this;u&&(m=u),m.annotations.removeAnnotation(m,l)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(l,u){return this.coreUtils.getSeriesTotalsXRange(l,u)}},{key:"getHighestValueInSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ar(this.ctx).getMinYMaxY(l).highestY}},{key:"getLowestValueInSeries",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ar(this.ctx).getMinYMaxY(l).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(l,u){return this.updateHelpers.toggleDataPointSelection(l,u)}},{key:"zoomX",value:function(l,u){this.ctx.toolbar.zoomUpdateOptions(l,u)}},{key:"setLocale",value:function(l){this.localization.setCurrentLocaleValues(l)}},{key:"dataURI",value:function(l){return new ka(this.ctx).dataURI(l)}},{key:"exportToCSV",value:function(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ka(this.ctx).exportToCSV(l)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var l=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){l.w.globals.resized=!0,l.w.globals.dataChanged=!1,l.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var l=this.w.config.chart.redrawOnWindowResize;"function"==typeof l&&(l=l()),l&&this._windowResize()}}],[{key:"getChartByID",value:function(l){var u=tt.escapeString(l);if(Apex._chartInstances){var m=Apex._chartInstances.filter(function(x){return x.id===u})[0];return m&&m.chart}}},{key:"initOnLoad",value:function(){for(var l=document.querySelectorAll("[data-apexcharts]"),u=0;u<l.length;u++)new ve(l[u],JSON.parse(l[u].getAttribute("data-options"))).render()}},{key:"exec",value:function(l,u){var m=this.getChartByID(l);if(m){m.w.globals.isExecCalled=!0;var x=null;if(-1!==m.publicMethods.indexOf(u)){for(var w=arguments.length,E=new Array(w>2?w-2:0),M=2;M<w;M++)E[M-2]=arguments[M];x=m[u].apply(m,E)}return x}}},{key:"merge",value:function(l,u){return tt.extend(l,u)}}]),ve}();uo.exports=Qt},1176:uo=>{self,uo.exports=function(){var ja={3099:function(Ze){Ze.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:function(Ze,t,j){var He=j(111);Ze.exports=function(Be){if(!He(Be)&&null!==Be)throw TypeError("Can't set "+String(Be)+" as a prototype");return Be}},1223:function(Ze,t,j){var He=j(5112),Be=j(30),Me=j(3070),We=He("unscopables"),nt=Array.prototype;null==nt[We]&&Me.f(nt,We,{configurable:!0,value:Be(null)}),Ze.exports=function(at){nt[We][at]=!0}},1530:function(Ze,t,j){"use strict";var He=j(8710).charAt;Ze.exports=function(Be,Me,We){return Me+(We?He(Be,Me).length:1)}},5787:function(Ze){Ze.exports=function(t,j,He){if(!(t instanceof j))throw TypeError("Incorrect "+(He?He+" ":"")+"invocation");return t}},9670:function(Ze,t,j){var He=j(111);Ze.exports=function(Be){if(!He(Be))throw TypeError(String(Be)+" is not an object");return Be}},4019:function(Ze){Ze.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(Ze,t,j){"use strict";var Ki,He=j(4019),Be=j(9781),Me=j(7854),We=j(111),nt=j(6656),at=j(648),Ct=j(8880),ot=j(1320),Wt=j(3070).f,et=j(9518),lt=j(7674),gt=j(5112),_i=j(9711),tt=Me.Int8Array,yi=tt&&tt.prototype,Pi=Me.Uint8ClampedArray,Dt=Pi&&Pi.prototype,Fi=tt&&et(tt),xi=yi&&et(yi),fi=Object.prototype,It=fi.isPrototypeOf,Si=gt("toStringTag"),Ni=_i("TYPED_ARRAY_TAG"),Zi=He&&!!lt&&"Opera"!==at(Me.opera),Rn=!1,tn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},yn={BigInt64Array:8,BigUint64Array:8},yr=function(Jn){if(!We(Jn))return!1;var ia=at(Jn);return nt(tn,ia)||nt(yn,ia)};for(Ki in tn)Me[Ki]||(Zi=!1);if((!Zi||"function"!=typeof Fi||Fi===Function.prototype)&&(Fi=function(){throw TypeError("Incorrect invocation")},Zi))for(Ki in tn)Me[Ki]&&lt(Me[Ki],Fi);if((!Zi||!xi||xi===fi)&&(xi=Fi.prototype,Zi))for(Ki in tn)Me[Ki]&&lt(Me[Ki].prototype,xi);if(Zi&&et(Dt)!==xi&&lt(Dt,xi),Be&&!nt(xi,Si))for(Ki in Rn=!0,Wt(xi,Si,{get:function(){return We(this)?this[Ni]:void 0}}),tn)Me[Ki]&&Ct(Me[Ki],Ni,Ki);Ze.exports={NATIVE_ARRAY_BUFFER_VIEWS:Zi,TYPED_ARRAY_TAG:Rn&&Ni,aTypedArray:function(Jn){if(yr(Jn))return Jn;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Jn){if(lt){if(It.call(Fi,Jn))return Jn}else for(var ia in tn)if(nt(tn,Ki)){var jr=Me[ia];if(jr&&(Jn===jr||It.call(jr,Jn)))return Jn}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Jn,ia,jr){if(Be){if(jr)for(var Pr in tn){var Mn=Me[Pr];Mn&&nt(Mn.prototype,Jn)&&delete Mn.prototype[Jn]}(!xi[Jn]||jr)&&ot(xi,Jn,jr?ia:Zi&&yi[Jn]||ia)}},exportTypedArrayStaticMethod:function(Jn,ia,jr){var Pr,Mn;if(Be){if(lt){if(jr)for(Pr in tn)(Mn=Me[Pr])&&nt(Mn,Jn)&&delete Mn[Jn];if(Fi[Jn]&&!jr)return;try{return ot(Fi,Jn,jr?ia:Zi&&tt[Jn]||ia)}catch{}}for(Pr in tn)(Mn=Me[Pr])&&(!Mn[Jn]||jr)&&ot(Mn,Jn,ia)}},isView:function(ia){if(!We(ia))return!1;var jr=at(ia);return"DataView"===jr||nt(tn,jr)||nt(yn,jr)},isTypedArray:yr,TypedArray:Fi,TypedArrayPrototype:xi}},3331:function(Ze,t,j){"use strict";var He=j(7854),Be=j(9781),Me=j(4019),We=j(8880),nt=j(2248),at=j(7293),Ct=j(5787),ot=j(9958),Wt=j(7466),et=j(7067),lt=j(1179),gt=j(9518),_i=j(7674),tt=j(8006).f,yi=j(3070).f,Pi=j(1285),Dt=j(8003),Fi=j(9909),xi=Fi.get,fi=Fi.set,It="ArrayBuffer",Si="DataView",Ni="prototype",Rn="Wrong index",Ki=He[It],tn=Ki,yn=He[Si],Nn=yn&&yn[Ni],yr=Object.prototype,fr=He.RangeError,Nr=lt.pack,Mi=lt.unpack,In=function(Vn){return[255&Vn]},Jn=function(Vn){return[255&Vn,Vn>>8&255]},ia=function(Vn){return[255&Vn,Vn>>8&255,Vn>>16&255,Vn>>24&255]},jr=function(Vn){return Vn[3]<<24|Vn[2]<<16|Vn[1]<<8|Vn[0]},Pr=function(Vn){return Nr(Vn,23,4)},Mn=function(Vn){return Nr(Vn,52,8)},Ya=function(Vn,rn){yi(Vn[Ni],rn,{get:function(){return xi(this)[rn]}})},ka=function(Vn,rn,ur,lr){var Pa=et(ur),Ga=xi(Vn);if(Pa+rn>Ga.byteLength)throw fr(Rn);var Ja=xi(Ga.buffer).bytes,Ra=Pa+Ga.byteOffset,ha=Ja.slice(Ra,Ra+rn);return lr?ha:ha.reverse()},Ma=function(Vn,rn,ur,lr,Pa,Ga){var Ja=et(ur),Ra=xi(Vn);if(Ja+rn>Ra.byteLength)throw fr(Rn);for(var ha=xi(Ra.buffer).bytes,xr=Ja+Ra.byteOffset,da=lr(+Pa),Mr=0;Mr<rn;Mr++)ha[xr+Mr]=da[Ga?Mr:rn-Mr-1]};if(Me){if(!at(function(){Ki(1)})||!at(function(){new Ki(-1)})||at(function(){return new Ki,new Ki(1.5),new Ki(NaN),Ki.name!=It})){for(var Sn,pr=(tn=function(rn){return Ct(this,tn),new Ki(et(rn))})[Ni]=Ki[Ni],$n=tt(Ki),ar=0;$n.length>ar;)(Sn=$n[ar++])in tn||We(tn,Sn,Ki[Sn]);pr.constructor=tn}_i&&gt(Nn)!==yr&&_i(Nn,yr);var Dn=new yn(new tn(2)),Gr=Nn.setInt8;Dn.setInt8(0,2147483648),Dn.setInt8(1,2147483649),(Dn.getInt8(0)||!Dn.getInt8(1))&&nt(Nn,{setInt8:function(rn,ur){Gr.call(this,rn,ur<<24>>24)},setUint8:function(rn,ur){Gr.call(this,rn,ur<<24>>24)}},{unsafe:!0})}else tn=function(rn){Ct(this,tn,It);var ur=et(rn);fi(this,{bytes:Pi.call(new Array(ur),0),byteLength:ur}),Be||(this.byteLength=ur)},yn=function(rn,ur,lr){Ct(this,yn,Si),Ct(rn,tn,Si);var Pa=xi(rn).byteLength,Ga=ot(ur);if(Ga<0||Ga>Pa)throw fr("Wrong offset");if(Ga+(lr=void 0===lr?Pa-Ga:Wt(lr))>Pa)throw fr("Wrong length");fi(this,{buffer:rn,byteLength:lr,byteOffset:Ga}),Be||(this.buffer=rn,this.byteLength=lr,this.byteOffset=Ga)},Be&&(Ya(tn,"byteLength"),Ya(yn,"buffer"),Ya(yn,"byteLength"),Ya(yn,"byteOffset")),nt(yn[Ni],{getInt8:function(rn){return ka(this,1,rn)[0]<<24>>24},getUint8:function(rn){return ka(this,1,rn)[0]},getInt16:function(rn){var ur=ka(this,2,rn,arguments.length>1?arguments[1]:void 0);return(ur[1]<<8|ur[0])<<16>>16},getUint16:function(rn){var ur=ka(this,2,rn,arguments.length>1?arguments[1]:void 0);return ur[1]<<8|ur[0]},getInt32:function(rn){return jr(ka(this,4,rn,arguments.length>1?arguments[1]:void 0))},getUint32:function(rn){return jr(ka(this,4,rn,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(rn){return Mi(ka(this,4,rn,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(rn){return Mi(ka(this,8,rn,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(rn,ur){Ma(this,1,rn,In,ur)},setUint8:function(rn,ur){Ma(this,1,rn,In,ur)},setInt16:function(rn,ur){Ma(this,2,rn,Jn,ur,arguments.length>2?arguments[2]:void 0)},setUint16:function(rn,ur){Ma(this,2,rn,Jn,ur,arguments.length>2?arguments[2]:void 0)},setInt32:function(rn,ur){Ma(this,4,rn,ia,ur,arguments.length>2?arguments[2]:void 0)},setUint32:function(rn,ur){Ma(this,4,rn,ia,ur,arguments.length>2?arguments[2]:void 0)},setFloat32:function(rn,ur){Ma(this,4,rn,Pr,ur,arguments.length>2?arguments[2]:void 0)},setFloat64:function(rn,ur){Ma(this,8,rn,Mn,ur,arguments.length>2?arguments[2]:void 0)}});Dt(tn,It),Dt(yn,Si),Ze.exports={ArrayBuffer:tn,DataView:yn}},1048:function(Ze,t,j){"use strict";var He=j(7908),Be=j(1400),Me=j(7466),We=Math.min;Ze.exports=[].copyWithin||function(at,Ct){var ot=He(this),Wt=Me(ot.length),et=Be(at,Wt),lt=Be(Ct,Wt),gt=arguments.length>2?arguments[2]:void 0,_i=We((void 0===gt?Wt:Be(gt,Wt))-lt,Wt-et),tt=1;for(lt<et&&et<lt+_i&&(tt=-1,lt+=_i-1,et+=_i-1);_i-- >0;)lt in ot?ot[et]=ot[lt]:delete ot[et],et+=tt,lt+=tt;return ot}},1285:function(Ze,t,j){"use strict";var He=j(7908),Be=j(1400),Me=j(7466);Ze.exports=function(nt){for(var at=He(this),Ct=Me(at.length),ot=arguments.length,Wt=Be(ot>1?arguments[1]:void 0,Ct),et=ot>2?arguments[2]:void 0,lt=void 0===et?Ct:Be(et,Ct);lt>Wt;)at[Wt++]=nt;return at}},8533:function(Ze,t,j){"use strict";var He=j(2092).forEach,Me=j(9341)("forEach");Ze.exports=Me?[].forEach:function(nt){return He(this,nt,arguments.length>1?arguments[1]:void 0)}},8457:function(Ze,t,j){"use strict";var He=j(9974),Be=j(7908),Me=j(3411),We=j(7659),nt=j(7466),at=j(6135),Ct=j(1246);Ze.exports=function(Wt){var Dt,Fi,xi,fi,It,Si,et=Be(Wt),lt="function"==typeof this?this:Array,gt=arguments.length,_i=gt>1?arguments[1]:void 0,tt=void 0!==_i,yi=Ct(et),Pi=0;if(tt&&(_i=He(_i,gt>2?arguments[2]:void 0,2)),null==yi||lt==Array&&We(yi))for(Fi=new lt(Dt=nt(et.length));Dt>Pi;Pi++)Si=tt?_i(et[Pi],Pi):et[Pi],at(Fi,Pi,Si);else for(It=(fi=yi.call(et)).next,Fi=new lt;!(xi=It.call(fi)).done;Pi++)Si=tt?Me(fi,_i,[xi.value,Pi],!0):xi.value,at(Fi,Pi,Si);return Fi.length=Pi,Fi}},1318:function(Ze,t,j){var He=j(5656),Be=j(7466),Me=j(1400),We=function(nt){return function(at,Ct,ot){var gt,Wt=He(at),et=Be(Wt.length),lt=Me(ot,et);if(nt&&Ct!=Ct){for(;et>lt;)if((gt=Wt[lt++])!=gt)return!0}else for(;et>lt;lt++)if((nt||lt in Wt)&&Wt[lt]===Ct)return nt||lt||0;return!nt&&-1}};Ze.exports={includes:We(!0),indexOf:We(!1)}},2092:function(Ze,t,j){var He=j(9974),Be=j(8361),Me=j(7908),We=j(7466),nt=j(5417),at=[].push,Ct=function(ot){var Wt=1==ot,et=2==ot,lt=3==ot,gt=4==ot,_i=6==ot,tt=7==ot,yi=5==ot||_i;return function(Pi,Dt,Fi,xi){for(var tn,yn,fi=Me(Pi),It=Be(fi),Si=He(Dt,Fi,3),Ni=We(It.length),Zi=0,Rn=xi||nt,Ki=Wt?Rn(Pi,Ni):et||tt?Rn(Pi,0):void 0;Ni>Zi;Zi++)if((yi||Zi in It)&&(yn=Si(tn=It[Zi],Zi,fi),ot))if(Wt)Ki[Zi]=yn;else if(yn)switch(ot){case 3:return!0;case 5:return tn;case 6:return Zi;case 2:at.call(Ki,tn)}else switch(ot){case 4:return!1;case 7:at.call(Ki,tn)}return _i?-1:lt||gt?gt:Ki}};Ze.exports={forEach:Ct(0),map:Ct(1),filter:Ct(2),some:Ct(3),every:Ct(4),find:Ct(5),findIndex:Ct(6),filterOut:Ct(7)}},6583:function(Ze,t,j){"use strict";var He=j(5656),Be=j(9958),Me=j(7466),We=j(9341),nt=Math.min,at=[].lastIndexOf,Ct=!!at&&1/[1].lastIndexOf(1,-0)<0,ot=We("lastIndexOf");Ze.exports=Ct||!ot?function(lt){if(Ct)return at.apply(this,arguments)||0;var gt=He(this),_i=Me(gt.length),tt=_i-1;for(arguments.length>1&&(tt=nt(tt,Be(arguments[1]))),tt<0&&(tt=_i+tt);tt>=0;tt--)if(tt in gt&&gt[tt]===lt)return tt||0;return-1}:at},1194:function(Ze,t,j){var He=j(7293),Be=j(5112),Me=j(7392),We=Be("species");Ze.exports=function(nt){return Me>=51||!He(function(){var at=[];return(at.constructor={})[We]=function(){return{foo:1}},1!==at[nt](Boolean).foo})}},9341:function(Ze,t,j){"use strict";var He=j(7293);Ze.exports=function(Be,Me){var We=[][Be];return!!We&&He(function(){We.call(null,Me||function(){throw 1},1)})}},3671:function(Ze,t,j){var He=j(3099),Be=j(7908),Me=j(8361),We=j(7466),nt=function(at){return function(Ct,ot,Wt,et){He(ot);var lt=Be(Ct),gt=Me(lt),_i=We(lt.length),tt=at?_i-1:0,yi=at?-1:1;if(Wt<2)for(;;){if(tt in gt){et=gt[tt],tt+=yi;break}if(tt+=yi,at?tt<0:_i<=tt)throw TypeError("Reduce of empty array with no initial value")}for(;at?tt>=0:_i>tt;tt+=yi)tt in gt&&(et=ot(et,gt[tt],tt,lt));return et}};Ze.exports={left:nt(!1),right:nt(!0)}},5417:function(Ze,t,j){var He=j(111),Be=j(3157),We=j(5112)("species");Ze.exports=function(nt,at){var Ct;return Be(nt)&&("function"!=typeof(Ct=nt.constructor)||Ct!==Array&&!Be(Ct.prototype)?He(Ct)&&null===(Ct=Ct[We])&&(Ct=void 0):Ct=void 0),new(void 0===Ct?Array:Ct)(0===at?0:at)}},3411:function(Ze,t,j){var He=j(9670),Be=j(9212);Ze.exports=function(Me,We,nt,at){try{return at?We(He(nt)[0],nt[1]):We(nt)}catch(Ct){throw Be(Me),Ct}}},7072:function(Ze,t,j){var Be=j(5112)("iterator"),Me=!1;try{var We=0,nt={next:function(){return{done:!!We++}},return:function(){Me=!0}};nt[Be]=function(){return this},Array.from(nt,function(){throw 2})}catch{}Ze.exports=function(at,Ct){if(!Ct&&!Me)return!1;var ot=!1;try{var Wt={};Wt[Be]=function(){return{next:function(){return{done:ot=!0}}}},at(Wt)}catch{}return ot}},4326:function(Ze){var t={}.toString;Ze.exports=function(j){return t.call(j).slice(8,-1)}},648:function(Ze,t,j){var He=j(1694),Be=j(4326),We=j(5112)("toStringTag"),nt="Arguments"==Be(function(){return arguments}());Ze.exports=He?Be:function(Ct){var ot,Wt,et;return void 0===Ct?"Undefined":null===Ct?"Null":"string"==typeof(Wt=function(Ct,ot){try{return Ct[ot]}catch{}}(ot=Object(Ct),We))?Wt:nt?Be(ot):"Object"==(et=Be(ot))&&"function"==typeof ot.callee?"Arguments":et}},9920:function(Ze,t,j){var He=j(6656),Be=j(3887),Me=j(1236),We=j(3070);Ze.exports=function(nt,at){for(var Ct=Be(at),ot=We.f,Wt=Me.f,et=0;et<Ct.length;et++){var lt=Ct[et];He(nt,lt)||ot(nt,lt,Wt(at,lt))}}},8544:function(Ze,t,j){var He=j(7293);Ze.exports=!He(function(){function Be(){}return Be.prototype.constructor=null,Object.getPrototypeOf(new Be)!==Be.prototype})},4994:function(Ze,t,j){"use strict";var He=j(3383).IteratorPrototype,Be=j(30),Me=j(9114),We=j(8003),nt=j(7497),at=function(){return this};Ze.exports=function(Ct,ot,Wt){var et=ot+" Iterator";return Ct.prototype=Be(He,{next:Me(1,Wt)}),We(Ct,et,!1,!0),nt[et]=at,Ct}},8880:function(Ze,t,j){var He=j(9781),Be=j(3070),Me=j(9114);Ze.exports=He?function(We,nt,at){return Be.f(We,nt,Me(1,at))}:function(We,nt,at){return We[nt]=at,We}},9114:function(Ze){Ze.exports=function(t,j){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:j}}},6135:function(Ze,t,j){"use strict";var He=j(7593),Be=j(3070),Me=j(9114);Ze.exports=function(We,nt,at){var Ct=He(nt);Ct in We?Be.f(We,Ct,Me(0,at)):We[Ct]=at}},654:function(Ze,t,j){"use strict";var He=j(2109),Be=j(4994),Me=j(9518),We=j(7674),nt=j(8003),at=j(8880),Ct=j(1320),ot=j(5112),Wt=j(1913),et=j(7497),lt=j(3383),gt=lt.IteratorPrototype,_i=lt.BUGGY_SAFARI_ITERATORS,tt=ot("iterator"),Pi="values",Dt="entries",Fi=function(){return this};Ze.exports=function(xi,fi,It,Si,Ni,Zi,Rn){Be(It,fi,Si);var Mi,In,Jn,Ki=function(ia){if(ia===Ni&&fr)return fr;if(!_i&&ia in Nn)return Nn[ia];switch(ia){case"keys":case Pi:case Dt:return function(){return new It(this,ia)}}return function(){return new It(this)}},tn=fi+" Iterator",yn=!1,Nn=xi.prototype,yr=Nn[tt]||Nn["@@iterator"]||Ni&&Nn[Ni],fr=!_i&&yr||Ki(Ni),Nr="Array"==fi&&Nn.entries||yr;if(Nr&&(Mi=Me(Nr.call(new xi)),gt!==Object.prototype&&Mi.next&&(!Wt&&Me(Mi)!==gt&&(We?We(Mi,gt):"function"!=typeof Mi[tt]&&at(Mi,tt,Fi)),nt(Mi,tn,!0,!0),Wt&&(et[tn]=Fi))),Ni==Pi&&yr&&yr.name!==Pi&&(yn=!0,fr=function(){return yr.call(this)}),(!Wt||Rn)&&Nn[tt]!==fr&&at(Nn,tt,fr),et[fi]=fr,Ni)if(In={values:Ki(Pi),keys:Zi?fr:Ki("keys"),entries:Ki(Dt)},Rn)for(Jn in In)(_i||yn||!(Jn in Nn))&&Ct(Nn,Jn,In[Jn]);else He({target:fi,proto:!0,forced:_i||yn},In);return In}},9781:function(Ze,t,j){var He=j(7293);Ze.exports=!He(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(Ze,t,j){var He=j(7854),Be=j(111),Me=He.document,We=Be(Me)&&Be(Me.createElement);Ze.exports=function(nt){return We?Me.createElement(nt):{}}},8324:function(Ze){Ze.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(Ze,t,j){var He=j(5005);Ze.exports=He("navigator","userAgent")||""},7392:function(Ze,t,j){var at,Ct,He=j(7854),Be=j(8113),Me=He.process,We=Me&&Me.versions,nt=We&&We.v8;nt?Ct=(at=nt.split("."))[0]+at[1]:Be&&(!(at=Be.match(/Edge\/(\d+)/))||at[1]>=74)&&(at=Be.match(/Chrome\/(\d+)/))&&(Ct=at[1]),Ze.exports=Ct&&+Ct},748:function(Ze){Ze.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(Ze,t,j){var He=j(7854),Be=j(1236).f,Me=j(8880),We=j(1320),nt=j(3505),at=j(9920),Ct=j(4705);Ze.exports=function(ot,Wt){var tt,yi,Pi,Dt,Fi,et=ot.target,lt=ot.global,gt=ot.stat;if(tt=lt?He:gt?He[et]||nt(et,{}):(He[et]||{}).prototype)for(yi in Wt){if(Dt=Wt[yi],Pi=ot.noTargetGet?(Fi=Be(tt,yi))&&Fi.value:tt[yi],!Ct(lt?yi:et+(gt?".":"#")+yi,ot.forced)&&void 0!==Pi){if(typeof Dt==typeof Pi)continue;at(Dt,Pi)}(ot.sham||Pi&&Pi.sham)&&Me(Dt,"sham",!0),We(tt,yi,Dt,ot)}}},7293:function(Ze){Ze.exports=function(t){try{return!!t()}catch{return!0}}},7007:function(Ze,t,j){"use strict";j(4916);var He=j(1320),Be=j(7293),Me=j(5112),We=j(2261),nt=j(8880),at=Me("species"),Ct=!Be(function(){var gt=/./;return gt.exec=function(){var _i=[];return _i.groups={a:"7"},_i},"7"!=="".replace(gt,"$<a>")}),ot="$0"==="a".replace(/./,"$0"),Wt=Me("replace"),et=!!/./[Wt]&&""===/./[Wt]("a","$0"),lt=!Be(function(){var gt=/(?:)/,_i=gt.exec;gt.exec=function(){return _i.apply(this,arguments)};var tt="ab".split(gt);return 2!==tt.length||"a"!==tt[0]||"b"!==tt[1]});Ze.exports=function(gt,_i,tt,yi){var Pi=Me(gt),Dt=!Be(function(){var Ni={};return Ni[Pi]=function(){return 7},7!=""[gt](Ni)}),Fi=Dt&&!Be(function(){var Ni=!1,Zi=/a/;return"split"===gt&&((Zi={}).constructor={},Zi.constructor[at]=function(){return Zi},Zi.flags="",Zi[Pi]=/./[Pi]),Zi.exec=function(){return Ni=!0,null},Zi[Pi](""),!Ni});if(!Dt||!Fi||"replace"===gt&&(!Ct||!ot||et)||"split"===gt&&!lt){var xi=/./[Pi],fi=tt(Pi,""[gt],function(Ni,Zi,Rn,Ki,tn){return Zi.exec===We?Dt&&!tn?{done:!0,value:xi.call(Zi,Rn,Ki)}:{done:!0,value:Ni.call(Rn,Zi,Ki)}:{done:!1}},{REPLACE_KEEPS_$0:ot,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:et}),Si=fi[1];He(String.prototype,gt,fi[0]),He(RegExp.prototype,Pi,2==_i?function(Ni,Zi){return Si.call(Ni,this,Zi)}:function(Ni){return Si.call(Ni,this)})}yi&&nt(RegExp.prototype[Pi],"sham",!0)}},9974:function(Ze,t,j){var He=j(3099);Ze.exports=function(Be,Me,We){if(He(Be),void 0===Me)return Be;switch(We){case 0:return function(){return Be.call(Me)};case 1:return function(nt){return Be.call(Me,nt)};case 2:return function(nt,at){return Be.call(Me,nt,at)};case 3:return function(nt,at,Ct){return Be.call(Me,nt,at,Ct)}}return function(){return Be.apply(Me,arguments)}}},5005:function(Ze,t,j){var He=j(857),Be=j(7854),Me=function(We){return"function"==typeof We?We:void 0};Ze.exports=function(We,nt){return arguments.length<2?Me(He[We])||Me(Be[We]):He[We]&&He[We][nt]||Be[We]&&Be[We][nt]}},1246:function(Ze,t,j){var He=j(648),Be=j(7497),We=j(5112)("iterator");Ze.exports=function(nt){if(null!=nt)return nt[We]||nt["@@iterator"]||Be[He(nt)]}},8554:function(Ze,t,j){var He=j(9670),Be=j(1246);Ze.exports=function(Me){var We=Be(Me);if("function"!=typeof We)throw TypeError(String(Me)+" is not iterable");return He(We.call(Me))}},647:function(Ze,t,j){var He=j(7908),Be=Math.floor,Me="".replace,We=/\$([$&'`]|\d\d?|<[^>]*>)/g,nt=/\$([$&'`]|\d\d?)/g;Ze.exports=function(at,Ct,ot,Wt,et,lt){var gt=ot+at.length,_i=Wt.length,tt=nt;return void 0!==et&&(et=He(et),tt=We),Me.call(lt,tt,function(yi,Pi){var Dt;switch(Pi.charAt(0)){case"$":return"$";case"&":return at;case"`":return Ct.slice(0,ot);case"'":return Ct.slice(gt);case"<":Dt=et[Pi.slice(1,-1)];break;default:var Fi=+Pi;if(0===Fi)return yi;if(Fi>_i){var xi=Be(Fi/10);return 0===xi?yi:xi<=_i?void 0===Wt[xi-1]?Pi.charAt(1):Wt[xi-1]+Pi.charAt(1):yi}Dt=Wt[Fi-1]}return void 0===Dt?"":Dt})}},7854:function(Ze,t,j){var He=function(Be){return Be&&Be.Math==Math&&Be};Ze.exports=He("object"==typeof globalThis&&globalThis)||He("object"==typeof window&&window)||He("object"==typeof self&&self)||He("object"==typeof j.g&&j.g)||function(){return this}()||Function("return this")()},6656:function(Ze){var t={}.hasOwnProperty;Ze.exports=function(j,He){return t.call(j,He)}},3501:function(Ze){Ze.exports={}},490:function(Ze,t,j){var He=j(5005);Ze.exports=He("document","documentElement")},4664:function(Ze,t,j){var He=j(9781),Be=j(7293),Me=j(317);Ze.exports=!He&&!Be(function(){return 7!=Object.defineProperty(Me("div"),"a",{get:function(){return 7}}).a})},1179:function(Ze){var t=Math.abs,j=Math.pow,He=Math.floor,Be=Math.log,Me=Math.LN2;Ze.exports={pack:function(at,Ct,ot){var Pi,Dt,Fi,Wt=new Array(ot),et=8*ot-Ct-1,lt=(1<<et)-1,gt=lt>>1,_i=23===Ct?j(2,-24)-j(2,-77):0,tt=at<0||0===at&&1/at<0?1:0,yi=0;for((at=t(at))!=at||at===1/0?(Dt=at!=at?1:0,Pi=lt):(Pi=He(Be(at)/Me),at*(Fi=j(2,-Pi))<1&&(Pi--,Fi*=2),(at+=Pi+gt>=1?_i/Fi:_i*j(2,1-gt))*Fi>=2&&(Pi++,Fi/=2),Pi+gt>=lt?(Dt=0,Pi=lt):Pi+gt>=1?(Dt=(at*Fi-1)*j(2,Ct),Pi+=gt):(Dt=at*j(2,gt-1)*j(2,Ct),Pi=0));Ct>=8;Wt[yi++]=255&Dt,Dt/=256,Ct-=8);for(Pi=Pi<<Ct|Dt,et+=Ct;et>0;Wt[yi++]=255&Pi,Pi/=256,et-=8);return Wt[--yi]|=128*tt,Wt},unpack:function(at,Ct){var Pi,ot=at.length,Wt=8*ot-Ct-1,et=(1<<Wt)-1,lt=et>>1,gt=Wt-7,_i=ot-1,tt=at[_i--],yi=127&tt;for(tt>>=7;gt>0;yi=256*yi+at[_i],_i--,gt-=8);for(Pi=yi&(1<<-gt)-1,yi>>=-gt,gt+=Ct;gt>0;Pi=256*Pi+at[_i],_i--,gt-=8);if(0===yi)yi=1-lt;else{if(yi===et)return Pi?NaN:tt?-1/0:1/0;Pi+=j(2,Ct),yi-=lt}return(tt?-1:1)*Pi*j(2,yi-Ct)}}},8361:function(Ze,t,j){var He=j(7293),Be=j(4326),Me="".split;Ze.exports=He(function(){return!Object("z").propertyIsEnumerable(0)})?function(We){return"String"==Be(We)?Me.call(We,""):Object(We)}:Object},9587:function(Ze,t,j){var He=j(111),Be=j(7674);Ze.exports=function(Me,We,nt){var at,Ct;return Be&&"function"==typeof(at=We.constructor)&&at!==nt&&He(Ct=at.prototype)&&Ct!==nt.prototype&&Be(Me,Ct),Me}},2788:function(Ze,t,j){var He=j(5465),Be=Function.toString;"function"!=typeof He.inspectSource&&(He.inspectSource=function(Me){return Be.call(Me)}),Ze.exports=He.inspectSource},9909:function(Ze,t,j){var et,lt,gt,He=j(8536),Be=j(7854),Me=j(111),We=j(8880),nt=j(6656),at=j(5465),Ct=j(6200),ot=j(3501);if(He){var yi=at.state||(at.state=new(0,Be.WeakMap)),Pi=yi.get,Dt=yi.has,Fi=yi.set;et=function(fi,It){return It.facade=fi,Fi.call(yi,fi,It),It},lt=function(fi){return Pi.call(yi,fi)||{}},gt=function(fi){return Dt.call(yi,fi)}}else{var xi=Ct("state");ot[xi]=!0,et=function(fi,It){return It.facade=fi,We(fi,xi,It),It},lt=function(fi){return nt(fi,xi)?fi[xi]:{}},gt=function(fi){return nt(fi,xi)}}Ze.exports={set:et,get:lt,has:gt,enforce:function(fi){return gt(fi)?lt(fi):et(fi,{})},getterFor:function(fi){return function(It){var Si;if(!Me(It)||(Si=lt(It)).type!==fi)throw TypeError("Incompatible receiver, "+fi+" required");return Si}}}},7659:function(Ze,t,j){var He=j(5112),Be=j(7497),Me=He("iterator"),We=Array.prototype;Ze.exports=function(nt){return void 0!==nt&&(Be.Array===nt||We[Me]===nt)}},3157:function(Ze,t,j){var He=j(4326);Ze.exports=Array.isArray||function(Me){return"Array"==He(Me)}},4705:function(Ze,t,j){var He=j(7293),Be=/#|\.prototype\./,Me=function(ot,Wt){var et=nt[We(ot)];return et==Ct||et!=at&&("function"==typeof Wt?He(Wt):!!Wt)},We=Me.normalize=function(ot){return String(ot).replace(Be,".").toLowerCase()},nt=Me.data={},at=Me.NATIVE="N",Ct=Me.POLYFILL="P";Ze.exports=Me},111:function(Ze){Ze.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:function(Ze){Ze.exports=!1},7850:function(Ze,t,j){var He=j(111),Be=j(4326),We=j(5112)("match");Ze.exports=function(nt){var at;return He(nt)&&(void 0!==(at=nt[We])?!!at:"RegExp"==Be(nt))}},9212:function(Ze,t,j){var He=j(9670);Ze.exports=function(Be){var Me=Be.return;if(void 0!==Me)return He(Me.call(Be)).value}},3383:function(Ze,t,j){"use strict";var et,lt,gt,He=j(7293),Be=j(9518),Me=j(8880),We=j(6656),nt=j(5112),at=j(1913),Ct=nt("iterator"),ot=!1;[].keys&&("next"in(gt=[].keys())?(lt=Be(Be(gt)))!==Object.prototype&&(et=lt):ot=!0);var _i=null==et||He(function(){var tt={};return et[Ct].call(tt)!==tt});_i&&(et={}),(!at||_i)&&!We(et,Ct)&&Me(et,Ct,function(){return this}),Ze.exports={IteratorPrototype:et,BUGGY_SAFARI_ITERATORS:ot}},7497:function(Ze){Ze.exports={}},133:function(Ze,t,j){var He=j(7293);Ze.exports=!!Object.getOwnPropertySymbols&&!He(function(){return!String(Symbol())})},590:function(Ze,t,j){var He=j(7293),Be=j(5112),Me=j(1913),We=Be("iterator");Ze.exports=!He(function(){var nt=new URL("b?a=1&b=2&c=3","http://a"),at=nt.searchParams,Ct="";return nt.pathname="c%20d",at.forEach(function(ot,Wt){at.delete("b"),Ct+=Wt+ot}),Me&&!nt.toJSON||!at.sort||"http://a/c%20d?a=1&c=3"!==nt.href||"3"!==at.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!at[We]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==Ct||"x"!==new URL("http://x",void 0).host})},8536:function(Ze,t,j){var He=j(7854),Be=j(2788),Me=He.WeakMap;Ze.exports="function"==typeof Me&&/native code/.test(Be(Me))},1574:function(Ze,t,j){"use strict";var He=j(9781),Be=j(7293),Me=j(1956),We=j(5181),nt=j(5296),at=j(7908),Ct=j(8361),ot=Object.assign,Wt=Object.defineProperty;Ze.exports=!ot||Be(function(){if(He&&1!==ot({b:1},ot(Wt({},"a",{enumerable:!0,get:function(){Wt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var et={},lt={},gt=Symbol(),_i="abcdefghijklmnopqrst";return et[gt]=7,_i.split("").forEach(function(tt){lt[tt]=tt}),7!=ot({},et)[gt]||Me(ot({},lt)).join("")!=_i})?function(lt,gt){for(var _i=at(lt),tt=arguments.length,yi=1,Pi=We.f,Dt=nt.f;tt>yi;)for(var Si,Fi=Ct(arguments[yi++]),xi=Pi?Me(Fi).concat(Pi(Fi)):Me(Fi),fi=xi.length,It=0;fi>It;)Si=xi[It++],(!He||Dt.call(Fi,Si))&&(_i[Si]=Fi[Si]);return _i}:ot},30:function(Ze,t,j){var Dt,He=j(9670),Be=j(6048),Me=j(748),We=j(3501),nt=j(490),at=j(317),Ct=j(6200),et="prototype",lt="script",gt=Ct("IE_PROTO"),_i=function(){},tt=function(xi){return"<script>"+xi+"</"+lt+">"},Fi=function(){try{Dt=document.domain&&new ActiveXObject("htmlfile")}catch{}Fi=Dt?function(xi){xi.write(tt("")),xi.close();var fi=xi.parentWindow.Object;return xi=null,fi}(Dt):function(){var It,xi=at("iframe");return xi.style.display="none",nt.appendChild(xi),xi.src=String("javascript:"),(It=xi.contentWindow.document).open(),It.write(tt("document.F=Object")),It.close(),It.F}();for(var xi=Me.length;xi--;)delete Fi[et][Me[xi]];return Fi()};We[gt]=!0,Ze.exports=Object.create||function(fi,It){var Si;return null!==fi?(_i[et]=He(fi),Si=new _i,_i[et]=null,Si[gt]=fi):Si=Fi(),void 0===It?Si:Be(Si,It)}},6048:function(Ze,t,j){var He=j(9781),Be=j(3070),Me=j(9670),We=j(1956);Ze.exports=He?Object.defineProperties:function(at,Ct){Me(at);for(var lt,ot=We(Ct),Wt=ot.length,et=0;Wt>et;)Be.f(at,lt=ot[et++],Ct[lt]);return at}},3070:function(Ze,t,j){var He=j(9781),Be=j(4664),Me=j(9670),We=j(7593),nt=Object.defineProperty;t.f=He?nt:function(Ct,ot,Wt){if(Me(Ct),ot=We(ot,!0),Me(Wt),Be)try{return nt(Ct,ot,Wt)}catch{}if("get"in Wt||"set"in Wt)throw TypeError("Accessors not supported");return"value"in Wt&&(Ct[ot]=Wt.value),Ct}},1236:function(Ze,t,j){var He=j(9781),Be=j(5296),Me=j(9114),We=j(5656),nt=j(7593),at=j(6656),Ct=j(4664),ot=Object.getOwnPropertyDescriptor;t.f=He?ot:function(et,lt){if(et=We(et),lt=nt(lt,!0),Ct)try{return ot(et,lt)}catch{}if(at(et,lt))return Me(!Be.f.call(et,lt),et[lt])}},8006:function(Ze,t,j){var He=j(6324),Me=j(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(nt){return He(nt,Me)}},5181:function(Ze,t){t.f=Object.getOwnPropertySymbols},9518:function(Ze,t,j){var He=j(6656),Be=j(7908),Me=j(6200),We=j(8544),nt=Me("IE_PROTO"),at=Object.prototype;Ze.exports=We?Object.getPrototypeOf:function(Ct){return Ct=Be(Ct),He(Ct,nt)?Ct[nt]:"function"==typeof Ct.constructor&&Ct instanceof Ct.constructor?Ct.constructor.prototype:Ct instanceof Object?at:null}},6324:function(Ze,t,j){var He=j(6656),Be=j(5656),Me=j(1318).indexOf,We=j(3501);Ze.exports=function(nt,at){var et,Ct=Be(nt),ot=0,Wt=[];for(et in Ct)!He(We,et)&&He(Ct,et)&&Wt.push(et);for(;at.length>ot;)He(Ct,et=at[ot++])&&(~Me(Wt,et)||Wt.push(et));return Wt}},1956:function(Ze,t,j){var He=j(6324),Be=j(748);Ze.exports=Object.keys||function(We){return He(We,Be)}},5296:function(Ze,t){"use strict";var j={}.propertyIsEnumerable,He=Object.getOwnPropertyDescriptor,Be=He&&!j.call({1:2},1);t.f=Be?function(We){var nt=He(this,We);return!!nt&&nt.enumerable}:j},7674:function(Ze,t,j){var He=j(9670),Be=j(6077);Ze.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var nt,Me=!1,We={};try{(nt=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(We,[]),Me=We instanceof Array}catch{}return function(Ct,ot){return He(Ct),Be(ot),Me?nt.call(Ct,ot):Ct.__proto__=ot,Ct}}():void 0)},288:function(Ze,t,j){"use strict";var He=j(1694),Be=j(648);Ze.exports=He?{}.toString:function(){return"[object "+Be(this)+"]"}},3887:function(Ze,t,j){var He=j(5005),Be=j(8006),Me=j(5181),We=j(9670);Ze.exports=He("Reflect","ownKeys")||function(at){var Ct=Be.f(We(at)),ot=Me.f;return ot?Ct.concat(ot(at)):Ct}},857:function(Ze,t,j){var He=j(7854);Ze.exports=He},2248:function(Ze,t,j){var He=j(1320);Ze.exports=function(Be,Me,We){for(var nt in Me)He(Be,nt,Me[nt],We);return Be}},1320:function(Ze,t,j){var He=j(7854),Be=j(8880),Me=j(6656),We=j(3505),nt=j(2788),at=j(9909),Ct=at.get,ot=at.enforce,Wt=String(String).split("String");(Ze.exports=function(et,lt,gt,_i){var Dt,tt=!!_i&&!!_i.unsafe,yi=!!_i&&!!_i.enumerable,Pi=!!_i&&!!_i.noTargetGet;"function"==typeof gt&&("string"==typeof lt&&!Me(gt,"name")&&Be(gt,"name",lt),(Dt=ot(gt)).source||(Dt.source=Wt.join("string"==typeof lt?lt:""))),et!==He?(tt?!Pi&&et[lt]&&(yi=!0):delete et[lt],yi?et[lt]=gt:Be(et,lt,gt)):yi?et[lt]=gt:We(lt,gt)})(Function.prototype,"toString",function(){return"function"==typeof this&&Ct(this).source||nt(this)})},7651:function(Ze,t,j){var He=j(4326),Be=j(2261);Ze.exports=function(Me,We){var nt=Me.exec;if("function"==typeof nt){var at=nt.call(Me,We);if("object"!=typeof at)throw TypeError("RegExp exec method returned something other than an Object or null");return at}if("RegExp"!==He(Me))throw TypeError("RegExp#exec called on incompatible receiver");return Be.call(Me,We)}},2261:function(Ze,t,j){"use strict";var et,lt,He=j(7066),Be=j(2999),Me=RegExp.prototype.exec,We=String.prototype.replace,nt=Me,at=(lt=/b*/g,Me.call(et=/a/,"a"),Me.call(lt,"a"),0!==et.lastIndex||0!==lt.lastIndex),Ct=Be.UNSUPPORTED_Y||Be.BROKEN_CARET,ot=void 0!==/()??/.exec("")[1];(at||ot||Ct)&&(nt=function(lt){var _i,tt,yi,Pi,gt=this,Dt=Ct&&gt.sticky,Fi=He.call(gt),xi=gt.source,fi=0,It=lt;return Dt&&(-1===(Fi=Fi.replace("y","")).indexOf("g")&&(Fi+="g"),It=String(lt).slice(gt.lastIndex),gt.lastIndex>0&&(!gt.multiline||gt.multiline&&"\n"!==lt[gt.lastIndex-1])&&(xi="(?: "+xi+")",It=" "+It,fi++),tt=new RegExp("^(?:"+xi+")",Fi)),ot&&(tt=new RegExp("^"+xi+"$(?!\\s)",Fi)),at&&(_i=gt.lastIndex),yi=Me.call(Dt?tt:gt,It),Dt?yi?(yi.input=yi.input.slice(fi),yi[0]=yi[0].slice(fi),yi.index=gt.lastIndex,gt.lastIndex+=yi[0].length):gt.lastIndex=0:at&&yi&&(gt.lastIndex=gt.global?yi.index+yi[0].length:_i),ot&&yi&&yi.length>1&&We.call(yi[0],tt,function(){for(Pi=1;Pi<arguments.length-2;Pi++)void 0===arguments[Pi]&&(yi[Pi]=void 0)}),yi}),Ze.exports=nt},7066:function(Ze,t,j){"use strict";var He=j(9670);Ze.exports=function(){var Be=He(this),Me="";return Be.global&&(Me+="g"),Be.ignoreCase&&(Me+="i"),Be.multiline&&(Me+="m"),Be.dotAll&&(Me+="s"),Be.unicode&&(Me+="u"),Be.sticky&&(Me+="y"),Me}},2999:function(Ze,t,j){"use strict";var He=j(7293);function Be(Me,We){return RegExp(Me,We)}t.UNSUPPORTED_Y=He(function(){var Me=Be("a","y");return Me.lastIndex=2,null!=Me.exec("abcd")}),t.BROKEN_CARET=He(function(){var Me=Be("^r","gy");return Me.lastIndex=2,null!=Me.exec("str")})},4488:function(Ze){Ze.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(Ze,t,j){var He=j(7854),Be=j(8880);Ze.exports=function(Me,We){try{Be(He,Me,We)}catch{He[Me]=We}return We}},6340:function(Ze,t,j){"use strict";var He=j(5005),Be=j(3070),Me=j(5112),We=j(9781),nt=Me("species");Ze.exports=function(at){var Ct=He(at);We&&Ct&&!Ct[nt]&&(0,Be.f)(Ct,nt,{configurable:!0,get:function(){return this}})}},8003:function(Ze,t,j){var He=j(3070).f,Be=j(6656),We=j(5112)("toStringTag");Ze.exports=function(nt,at,Ct){nt&&!Be(nt=Ct?nt:nt.prototype,We)&&He(nt,We,{configurable:!0,value:at})}},6200:function(Ze,t,j){var He=j(2309),Be=j(9711),Me=He("keys");Ze.exports=function(We){return Me[We]||(Me[We]=Be(We))}},5465:function(Ze,t,j){var He=j(7854),Be=j(3505),Me="__core-js_shared__",We=He[Me]||Be(Me,{});Ze.exports=We},2309:function(Ze,t,j){var He=j(1913),Be=j(5465);(Ze.exports=function(Me,We){return Be[Me]||(Be[Me]=void 0!==We?We:{})})("versions",[]).push({version:"3.9.0",mode:He?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(Ze,t,j){var He=j(9670),Be=j(3099),We=j(5112)("species");Ze.exports=function(nt,at){var ot,Ct=He(nt).constructor;return void 0===Ct||null==(ot=He(Ct)[We])?at:Be(ot)}},8710:function(Ze,t,j){var He=j(9958),Be=j(4488),Me=function(We){return function(nt,at){var et,lt,Ct=String(Be(nt)),ot=He(at),Wt=Ct.length;return ot<0||ot>=Wt?We?"":void 0:(et=Ct.charCodeAt(ot))<55296||et>56319||ot+1===Wt||(lt=Ct.charCodeAt(ot+1))<56320||lt>57343?We?Ct.charAt(ot):et:We?Ct.slice(ot,ot+2):lt-56320+(et-55296<<10)+65536}};Ze.exports={codeAt:Me(!1),charAt:Me(!0)}},3197:function(Ze){"use strict";var t=2147483647,ot=/[^\0-\u007E]/,Wt=/[.\u3002\uFF0E\uFF61]/g,et="Overflow: input needs wider integers to process",gt=Math.floor,_i=String.fromCharCode,yi=function(Fi){return Fi+22+75*(Fi<26)},Pi=function(Fi,xi,fi){var It=0;for(Fi=fi?gt(Fi/700):Fi>>1,Fi+=gt(Fi/xi);Fi>455;It+=36)Fi=gt(Fi/35);return gt(It+36*Fi/(Fi+38))},Dt=function(Fi){var Zi,Rn,xi=[],fi=(Fi=function(Fi){for(var xi=[],fi=0,It=Fi.length;fi<It;){var Si=Fi.charCodeAt(fi++);if(Si>=55296&&Si<=56319&&fi<It){var Ni=Fi.charCodeAt(fi++);56320==(64512&Ni)?xi.push(((1023&Si)<<10)+(1023&Ni)+65536):(xi.push(Si),fi--)}else xi.push(Si)}return xi}(Fi)).length,It=128,Si=0,Ni=72;for(Zi=0;Zi<Fi.length;Zi++)(Rn=Fi[Zi])<128&&xi.push(_i(Rn));var Ki=xi.length,tn=Ki;for(Ki&&xi.push("-");tn<fi;){var yn=t;for(Zi=0;Zi<Fi.length;Zi++)(Rn=Fi[Zi])>=It&&Rn<yn&&(yn=Rn);var Nn=tn+1;if(yn-It>gt((t-Si)/Nn))throw RangeError(et);for(Si+=(yn-It)*Nn,It=yn,Zi=0;Zi<Fi.length;Zi++){if((Rn=Fi[Zi])<It&&++Si>t)throw RangeError(et);if(Rn==It){for(var yr=Si,fr=36;;fr+=36){var Nr=fr<=Ni?1:fr>=Ni+26?26:fr-Ni;if(yr<Nr)break;var Mi=yr-Nr,In=36-Nr;xi.push(_i(yi(Nr+Mi%In))),yr=gt(Mi/In)}xi.push(_i(yi(yr))),Ni=Pi(Si,Nn,tn==Ki),Si=0,++tn}}++Si,++It}return xi.join("")};Ze.exports=function(Fi){var It,Si,xi=[],fi=Fi.toLowerCase().replace(Wt,".").split(".");for(It=0;It<fi.length;It++)xi.push(ot.test(Si=fi[It])?"xn--"+Dt(Si):Si);return xi.join(".")}},6091:function(Ze,t,j){var He=j(7293),Be=j(1361);Ze.exports=function(We){return He(function(){return!!Be[We]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[We]()||Be[We].name!==We})}},3111:function(Ze,t,j){var He=j(4488),Me="["+j(1361)+"]",We=RegExp("^"+Me+Me+"*"),nt=RegExp(Me+Me+"*$"),at=function(Ct){return function(ot){var Wt=String(He(ot));return 1&Ct&&(Wt=Wt.replace(We,"")),2&Ct&&(Wt=Wt.replace(nt,"")),Wt}};Ze.exports={start:at(1),end:at(2),trim:at(3)}},1400:function(Ze,t,j){var He=j(9958),Be=Math.max,Me=Math.min;Ze.exports=function(We,nt){var at=He(We);return at<0?Be(at+nt,0):Me(at,nt)}},7067:function(Ze,t,j){var He=j(9958),Be=j(7466);Ze.exports=function(Me){if(void 0===Me)return 0;var We=He(Me),nt=Be(We);if(We!==nt)throw RangeError("Wrong length or index");return nt}},5656:function(Ze,t,j){var He=j(8361),Be=j(4488);Ze.exports=function(Me){return He(Be(Me))}},9958:function(Ze){var t=Math.ceil,j=Math.floor;Ze.exports=function(He){return isNaN(He=+He)?0:(He>0?j:t)(He)}},7466:function(Ze,t,j){var He=j(9958),Be=Math.min;Ze.exports=function(Me){return Me>0?Be(He(Me),9007199254740991):0}},7908:function(Ze,t,j){var He=j(4488);Ze.exports=function(Be){return Object(He(Be))}},4590:function(Ze,t,j){var He=j(3002);Ze.exports=function(Be,Me){var We=He(Be);if(We%Me)throw RangeError("Wrong offset");return We}},3002:function(Ze,t,j){var He=j(9958);Ze.exports=function(Be){var Me=He(Be);if(Me<0)throw RangeError("The argument can't be less than 0");return Me}},7593:function(Ze,t,j){var He=j(111);Ze.exports=function(Be,Me){if(!He(Be))return Be;var We,nt;if(Me&&"function"==typeof(We=Be.toString)&&!He(nt=We.call(Be))||"function"==typeof(We=Be.valueOf)&&!He(nt=We.call(Be))||!Me&&"function"==typeof(We=Be.toString)&&!He(nt=We.call(Be)))return nt;throw TypeError("Can't convert object to primitive value")}},1694:function(Ze,t,j){var Me={};Me[j(5112)("toStringTag")]="z",Ze.exports="[object z]"===String(Me)},9843:function(Ze,t,j){"use strict";var He=j(2109),Be=j(7854),Me=j(9781),We=j(3832),nt=j(260),at=j(3331),Ct=j(5787),ot=j(9114),Wt=j(8880),et=j(7466),lt=j(7067),gt=j(4590),_i=j(7593),tt=j(6656),yi=j(648),Pi=j(111),Dt=j(30),Fi=j(7674),xi=j(8006).f,fi=j(7321),It=j(2092).forEach,Si=j(6340),Ni=j(3070),Zi=j(1236),Rn=j(9909),Ki=j(9587),tn=Rn.get,yn=Rn.set,Nn=Ni.f,yr=Zi.f,fr=Math.round,Nr=Be.RangeError,Mi=at.ArrayBuffer,In=at.DataView,Jn=nt.NATIVE_ARRAY_BUFFER_VIEWS,ia=nt.TYPED_ARRAY_TAG,jr=nt.TypedArray,Pr=nt.TypedArrayPrototype,Mn=nt.aTypedArrayConstructor,Ya=nt.isTypedArray,ka="BYTES_PER_ELEMENT",Ma="Wrong length",pr=function(Vn,rn){for(var ur=0,lr=rn.length,Pa=new(Mn(Vn))(lr);lr>ur;)Pa[ur]=rn[ur++];return Pa},$n=function(Vn,rn){Nn(Vn,rn,{get:function(){return tn(this)[rn]}})},ar=function(Vn){var rn;return Vn instanceof Mi||"ArrayBuffer"==(rn=yi(Vn))||"SharedArrayBuffer"==rn},Sn=function(Vn,rn){return Ya(Vn)&&"symbol"!=typeof rn&&rn in Vn&&String(+rn)==String(rn)},Dn=function(rn,ur){return Sn(rn,ur=_i(ur,!0))?ot(2,rn[ur]):yr(rn,ur)},Gr=function(rn,ur,lr){return!(Sn(rn,ur=_i(ur,!0))&&Pi(lr)&&tt(lr,"value"))||tt(lr,"get")||tt(lr,"set")||lr.configurable||tt(lr,"writable")&&!lr.writable||tt(lr,"enumerable")&&!lr.enumerable?Nn(rn,ur,lr):(rn[ur]=lr.value,rn)};Me?(Jn||(Zi.f=Dn,Ni.f=Gr,$n(Pr,"buffer"),$n(Pr,"byteOffset"),$n(Pr,"byteLength"),$n(Pr,"length")),He({target:"Object",stat:!0,forced:!Jn},{getOwnPropertyDescriptor:Dn,defineProperty:Gr}),Ze.exports=function(Vn,rn,ur){var lr=Vn.match(/\d+$/)[0]/8,Pa=Vn+(ur?"Clamped":"")+"Array",Ga="get"+Vn,Ja="set"+Vn,Ra=Be[Pa],ha=Ra,xr=ha&&ha.prototype,da={},Dr=function(Aa,fa){Nn(Aa,fa,{get:function(){return function(Aa,fa){var Ia=tn(Aa);return Ia.view[Ga](fa*lr+Ia.byteOffset,!0)}(this,fa)},set:function(Ia){return function(Aa,fa,Ia){var Fa=tn(Aa);ur&&(Ia=(Ia=fr(Ia))<0?0:Ia>255?255:255&Ia),Fa.view[Ja](fa*lr+Fa.byteOffset,Ia,!0)}(this,fa,Ia)},enumerable:!0})};Jn?We&&(ha=rn(function(Aa,fa,Ia,Fa){return Ct(Aa,ha,Pa),Ki(Pi(fa)?ar(fa)?void 0!==Fa?new Ra(fa,gt(Ia,lr),Fa):void 0!==Ia?new Ra(fa,gt(Ia,lr)):new Ra(fa):Ya(fa)?pr(ha,fa):fi.call(ha,fa):new Ra(lt(fa)),Aa,ha)}),Fi&&Fi(ha,jr),It(xi(Ra),function(Aa){Aa in ha||Wt(ha,Aa,Ra[Aa])}),ha.prototype=xr):(ha=rn(function(Aa,fa,Ia,Fa){Ct(Aa,ha,Pa);var Je,At,kt,Et=0,je=0;if(Pi(fa)){if(!ar(fa))return Ya(fa)?pr(ha,fa):fi.call(ha,fa);Je=fa,je=gt(Ia,lr);var ai=fa.byteLength;if(void 0===Fa){if(ai%lr||(At=ai-je)<0)throw Nr(Ma)}else if((At=et(Fa)*lr)+je>ai)throw Nr(Ma);kt=At/lr}else kt=lt(fa),Je=new Mi(At=kt*lr);for(yn(Aa,{buffer:Je,byteOffset:je,byteLength:At,length:kt,view:new In(Je)});Et<kt;)Dr(Aa,Et++)}),Fi&&Fi(ha,jr),xr=ha.prototype=Dt(Pr)),xr.constructor!==ha&&Wt(xr,"constructor",ha),ia&&Wt(xr,ia,Pa),da[Pa]=ha,He({global:!0,forced:ha!=Ra,sham:!Jn},da),ka in ha||Wt(ha,ka,lr),ka in xr||Wt(xr,ka,lr),Si(Pa)}):Ze.exports=function(){}},3832:function(Ze,t,j){var He=j(7854),Be=j(7293),Me=j(7072),We=j(260).NATIVE_ARRAY_BUFFER_VIEWS,nt=He.ArrayBuffer,at=He.Int8Array;Ze.exports=!We||!Be(function(){at(1)})||!Be(function(){new at(-1)})||!Me(function(Ct){new at,new at(null),new at(1.5),new at(Ct)},!0)||Be(function(){return 1!==new at(new nt(2),1,void 0).length})},3074:function(Ze,t,j){var He=j(260).aTypedArrayConstructor,Be=j(6707);Ze.exports=function(Me,We){for(var nt=Be(Me,Me.constructor),at=0,Ct=We.length,ot=new(He(nt))(Ct);Ct>at;)ot[at]=We[at++];return ot}},7321:function(Ze,t,j){var He=j(7908),Be=j(7466),Me=j(1246),We=j(7659),nt=j(9974),at=j(260).aTypedArrayConstructor;Ze.exports=function(ot){var tt,yi,Pi,Dt,Fi,xi,Wt=He(ot),et=arguments.length,lt=et>1?arguments[1]:void 0,gt=void 0!==lt,_i=Me(Wt);if(null!=_i&&!We(_i))for(xi=(Fi=_i.call(Wt)).next,Wt=[];!(Dt=xi.call(Fi)).done;)Wt.push(Dt.value);for(gt&&et>2&&(lt=nt(lt,arguments[2],2)),yi=Be(Wt.length),Pi=new(at(this))(yi),tt=0;yi>tt;tt++)Pi[tt]=gt?lt(Wt[tt],tt):Wt[tt];return Pi}},9711:function(Ze){var t=0,j=Math.random();Ze.exports=function(He){return"Symbol("+String(void 0===He?"":He)+")_"+(++t+j).toString(36)}},3307:function(Ze,t,j){var He=j(133);Ze.exports=He&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(Ze,t,j){var He=j(7854),Be=j(2309),Me=j(6656),We=j(9711),nt=j(133),at=j(3307),Ct=Be("wks"),ot=He.Symbol,Wt=at?ot:ot&&ot.withoutSetter||We;Ze.exports=function(et){return Me(Ct,et)||(Ct[et]=nt&&Me(ot,et)?ot[et]:Wt("Symbol."+et)),Ct[et]}},1361:function(Ze){Ze.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(Ze,t,j){"use strict";var He=j(2109),Be=j(7854),Me=j(3331),We=j(6340),nt="ArrayBuffer",at=Me[nt];He({global:!0,forced:Be[nt]!==at},{ArrayBuffer:at}),We(nt)},2222:function(Ze,t,j){"use strict";var He=j(2109),Be=j(7293),Me=j(3157),We=j(111),nt=j(7908),at=j(7466),Ct=j(6135),ot=j(5417),Wt=j(1194),et=j(5112),lt=j(7392),gt=et("isConcatSpreadable"),_i=9007199254740991,tt="Maximum allowed index exceeded",yi=lt>=51||!Be(function(){var xi=[];return xi[gt]=!1,xi.concat()[0]!==xi}),Pi=Wt("concat"),Dt=function(xi){if(!We(xi))return!1;var fi=xi[gt];return void 0!==fi?!!fi:Me(xi)};He({target:"Array",proto:!0,forced:!yi||!Pi},{concat:function(fi){var Zi,Rn,Ki,tn,yn,It=nt(this),Si=ot(It,0),Ni=0;for(Zi=-1,Ki=arguments.length;Zi<Ki;Zi++)if(Dt(yn=-1===Zi?It:arguments[Zi])){if(Ni+(tn=at(yn.length))>_i)throw TypeError(tt);for(Rn=0;Rn<tn;Rn++,Ni++)Rn in yn&&Ct(Si,Ni,yn[Rn])}else{if(Ni>=_i)throw TypeError(tt);Ct(Si,Ni++,yn)}return Si.length=Ni,Si}})},7327:function(Ze,t,j){"use strict";var He=j(2109),Be=j(2092).filter;He({target:"Array",proto:!0,forced:!j(1194)("filter")},{filter:function(at){return Be(this,at,arguments.length>1?arguments[1]:void 0)}})},2772:function(Ze,t,j){"use strict";var He=j(2109),Be=j(1318).indexOf,Me=j(9341),We=[].indexOf,nt=!!We&&1/[1].indexOf(1,-0)<0,at=Me("indexOf");He({target:"Array",proto:!0,forced:nt||!at},{indexOf:function(ot){return nt?We.apply(this,arguments)||0:Be(this,ot,arguments.length>1?arguments[1]:void 0)}})},6992:function(Ze,t,j){"use strict";var He=j(5656),Be=j(1223),Me=j(7497),We=j(9909),nt=j(654),at="Array Iterator",Ct=We.set,ot=We.getterFor(at);Ze.exports=nt(Array,"Array",function(Wt,et){Ct(this,{type:at,target:He(Wt),index:0,kind:et})},function(){var Wt=ot(this),et=Wt.target,lt=Wt.kind,gt=Wt.index++;return!et||gt>=et.length?(Wt.target=void 0,{value:void 0,done:!0}):"keys"==lt?{value:gt,done:!1}:"values"==lt?{value:et[gt],done:!1}:{value:[gt,et[gt]],done:!1}},"values"),Me.Arguments=Me.Array,Be("keys"),Be("values"),Be("entries")},1249:function(Ze,t,j){"use strict";var He=j(2109),Be=j(2092).map;He({target:"Array",proto:!0,forced:!j(1194)("map")},{map:function(at){return Be(this,at,arguments.length>1?arguments[1]:void 0)}})},7042:function(Ze,t,j){"use strict";var He=j(2109),Be=j(111),Me=j(3157),We=j(1400),nt=j(7466),at=j(5656),Ct=j(6135),ot=j(5112),et=j(1194)("slice"),lt=ot("species"),gt=[].slice,_i=Math.max;He({target:"Array",proto:!0,forced:!et},{slice:function(yi,Pi){var It,Si,Ni,Dt=at(this),Fi=nt(Dt.length),xi=We(yi,Fi),fi=We(void 0===Pi?Fi:Pi,Fi);if(Me(Dt)&&("function"!=typeof(It=Dt.constructor)||It!==Array&&!Me(It.prototype)?Be(It)&&null===(It=It[lt])&&(It=void 0):It=void 0,It===Array||void 0===It))return gt.call(Dt,xi,fi);for(Si=new(void 0===It?Array:It)(_i(fi-xi,0)),Ni=0;xi<fi;xi++,Ni++)xi in Dt&&Ct(Si,Ni,Dt[xi]);return Si.length=Ni,Si}})},561:function(Ze,t,j){"use strict";var He=j(2109),Be=j(1400),Me=j(9958),We=j(7466),nt=j(7908),at=j(5417),Ct=j(6135),Wt=j(1194)("splice"),et=Math.max,lt=Math.min;He({target:"Array",proto:!0,forced:!Wt},{splice:function(yi,Pi){var It,Si,Ni,Zi,Rn,Ki,Dt=nt(this),Fi=We(Dt.length),xi=Be(yi,Fi),fi=arguments.length;if(0===fi?It=Si=0:1===fi?(It=0,Si=Fi-xi):(It=fi-2,Si=lt(et(Me(Pi),0),Fi-xi)),Fi+It-Si>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(Ni=at(Dt,Si),Zi=0;Zi<Si;Zi++)(Rn=xi+Zi)in Dt&&Ct(Ni,Zi,Dt[Rn]);if(Ni.length=Si,It<Si){for(Zi=xi;Zi<Fi-Si;Zi++)Ki=Zi+It,(Rn=Zi+Si)in Dt?Dt[Ki]=Dt[Rn]:delete Dt[Ki];for(Zi=Fi;Zi>Fi-Si+It;Zi--)delete Dt[Zi-1]}else if(It>Si)for(Zi=Fi-Si;Zi>xi;Zi--)Ki=Zi+It-1,(Rn=Zi+Si-1)in Dt?Dt[Ki]=Dt[Rn]:delete Dt[Ki];for(Zi=0;Zi<It;Zi++)Dt[Zi+xi]=arguments[Zi+2];return Dt.length=Fi-Si+It,Ni}})},8309:function(Ze,t,j){var He=j(9781),Be=j(3070).f,Me=Function.prototype,We=Me.toString,nt=/^\s*function ([^ (]*)/;He&&!("name"in Me)&&Be(Me,"name",{configurable:!0,get:function(){try{return We.call(this).match(nt)[1]}catch{return""}}})},489:function(Ze,t,j){var He=j(2109),Be=j(7293),Me=j(7908),We=j(9518),nt=j(8544);He({target:"Object",stat:!0,forced:Be(function(){We(1)}),sham:!nt},{getPrototypeOf:function(ot){return We(Me(ot))}})},1539:function(Ze,t,j){var He=j(1694),Be=j(1320),Me=j(288);He||Be(Object.prototype,"toString",Me,{unsafe:!0})},4916:function(Ze,t,j){"use strict";var He=j(2109),Be=j(2261);He({target:"RegExp",proto:!0,forced:/./.exec!==Be},{exec:Be})},9714:function(Ze,t,j){"use strict";var He=j(1320),Be=j(9670),Me=j(7293),We=j(7066),nt="toString",at=RegExp.prototype,Ct=at[nt];(Me(function(){return"/a/b"!=Ct.call({source:"a",flags:"b"})})||Ct.name!=nt)&&He(RegExp.prototype,nt,function(){var lt=Be(this),gt=String(lt.source),_i=lt.flags;return"/"+gt+"/"+String(void 0===_i&&lt instanceof RegExp&&!("flags"in at)?We.call(lt):_i)},{unsafe:!0})},8783:function(Ze,t,j){"use strict";var He=j(8710).charAt,Be=j(9909),Me=j(654),We="String Iterator",nt=Be.set,at=Be.getterFor(We);Me(String,"String",function(Ct){nt(this,{type:We,string:String(Ct),index:0})},function(){var lt,ot=at(this),Wt=ot.string,et=ot.index;return et>=Wt.length?{value:void 0,done:!0}:(lt=He(Wt,et),ot.index+=lt.length,{value:lt,done:!1})})},4723:function(Ze,t,j){"use strict";var He=j(7007),Be=j(9670),Me=j(7466),We=j(4488),nt=j(1530),at=j(7651);He("match",1,function(Ct,ot,Wt){return[function(lt){var gt=We(this),_i=lt?.[Ct];return void 0!==_i?_i.call(lt,gt):new RegExp(lt)[Ct](String(gt))},function(et){var lt=Wt(ot,et,this);if(lt.done)return lt.value;var gt=Be(et),_i=String(this);if(!gt.global)return at(gt,_i);var tt=gt.unicode;gt.lastIndex=0;for(var Dt,yi=[],Pi=0;null!==(Dt=at(gt,_i));){var Fi=String(Dt[0]);yi[Pi]=Fi,""===Fi&&(gt.lastIndex=nt(_i,Me(gt.lastIndex),tt)),Pi++}return 0===Pi?null:yi}]})},5306:function(Ze,t,j){"use strict";var He=j(7007),Be=j(9670),Me=j(7466),We=j(9958),nt=j(4488),at=j(1530),Ct=j(647),ot=j(7651),Wt=Math.max,et=Math.min,lt=function(gt){return void 0===gt?gt:String(gt)};He("replace",2,function(gt,_i,tt,yi){var Pi=yi.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Dt=yi.REPLACE_KEEPS_$0,Fi=Pi?"$":"$0";return[function(fi,It){var Si=nt(this),Ni=fi?.[gt];return void 0!==Ni?Ni.call(fi,Si,It):_i.call(String(Si),fi,It)},function(xi,fi){if(!Pi&&Dt||"string"==typeof fi&&-1===fi.indexOf(Fi)){var It=tt(_i,xi,this,fi);if(It.done)return It.value}var Si=Be(xi),Ni=String(this),Zi="function"==typeof fi;Zi||(fi=String(fi));var Rn=Si.global;if(Rn){var Ki=Si.unicode;Si.lastIndex=0}for(var tn=[];;){var yn=ot(Si,Ni);if(null===yn||(tn.push(yn),!Rn))break;""===String(yn[0])&&(Si.lastIndex=at(Ni,Me(Si.lastIndex),Ki))}for(var yr="",fr=0,Nr=0;Nr<tn.length;Nr++){yn=tn[Nr];for(var Mi=String(yn[0]),In=Wt(et(We(yn.index),Ni.length),0),Jn=[],ia=1;ia<yn.length;ia++)Jn.push(lt(yn[ia]));var jr=yn.groups;if(Zi){var Pr=[Mi].concat(Jn,In,Ni);void 0!==jr&&Pr.push(jr);var Mn=String(fi.apply(void 0,Pr))}else Mn=Ct(Mi,Ni,In,Jn,jr,fi);In>=fr&&(yr+=Ni.slice(fr,In)+Mn,fr=In+Mi.length)}return yr+Ni.slice(fr)}]})},3123:function(Ze,t,j){"use strict";var He=j(7007),Be=j(7850),Me=j(9670),We=j(4488),nt=j(6707),at=j(1530),Ct=j(7466),ot=j(7651),Wt=j(2261),et=j(7293),lt=[].push,gt=Math.min,_i=4294967295,tt=!et(function(){return!RegExp(_i,"y")});He("split",2,function(yi,Pi,Dt){var Fi;return Fi="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(xi,fi){var It=String(We(this)),Si=void 0===fi?_i:fi>>>0;if(0===Si)return[];if(void 0===xi)return[It];if(!Be(xi))return Pi.call(It,xi,Si);for(var tn,yn,Nn,Ni=[],Rn=0,Ki=new RegExp(xi.source,(xi.ignoreCase?"i":"")+(xi.multiline?"m":"")+(xi.unicode?"u":"")+(xi.sticky?"y":"")+"g");(tn=Wt.call(Ki,It))&&!((yn=Ki.lastIndex)>Rn&&(Ni.push(It.slice(Rn,tn.index)),tn.length>1&&tn.index<It.length&&lt.apply(Ni,tn.slice(1)),Nn=tn[0].length,Rn=yn,Ni.length>=Si));)Ki.lastIndex===tn.index&&Ki.lastIndex++;return Rn===It.length?(Nn||!Ki.test(""))&&Ni.push(""):Ni.push(It.slice(Rn)),Ni.length>Si?Ni.slice(0,Si):Ni}:"0".split(void 0,0).length?function(xi,fi){return void 0===xi&&0===fi?[]:Pi.call(this,xi,fi)}:Pi,[function(fi,It){var Si=We(this),Ni=fi?.[yi];return void 0!==Ni?Ni.call(fi,Si,It):Fi.call(String(Si),fi,It)},function(xi,fi){var It=Dt(Fi,xi,this,fi,Fi!==Pi);if(It.done)return It.value;var Si=Me(xi),Ni=String(this),Zi=nt(Si,RegExp),Rn=Si.unicode,tn=new Zi(tt?Si:"^(?:"+Si.source+")",(Si.ignoreCase?"i":"")+(Si.multiline?"m":"")+(Si.unicode?"u":"")+(tt?"y":"g")),yn=void 0===fi?_i:fi>>>0;if(0===yn)return[];if(0===Ni.length)return null===ot(tn,Ni)?[Ni]:[];for(var Nn=0,yr=0,fr=[];yr<Ni.length;){tn.lastIndex=tt?yr:0;var Mi,Nr=ot(tn,tt?Ni:Ni.slice(yr));if(null===Nr||(Mi=gt(Ct(tn.lastIndex+(tt?0:yr)),Ni.length))===Nn)yr=at(Ni,yr,Rn);else{if(fr.push(Ni.slice(Nn,yr)),fr.length===yn)return fr;for(var In=1;In<=Nr.length-1;In++)if(fr.push(Nr[In]),fr.length===yn)return fr;yr=Nn=Mi}}return fr.push(Ni.slice(Nn)),fr}]},!tt)},3210:function(Ze,t,j){"use strict";var He=j(2109),Be=j(3111).trim;He({target:"String",proto:!0,forced:j(6091)("trim")},{trim:function(){return Be(this)}})},2990:function(Ze,t,j){"use strict";var He=j(260),Be=j(1048),Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("copyWithin",function(at,Ct){return Be.call(Me(this),at,Ct,arguments.length>2?arguments[2]:void 0)})},8927:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).every,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("every",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},3105:function(Ze,t,j){"use strict";var He=j(260),Be=j(1285),Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("fill",function(at){return Be.apply(Me(this),arguments)})},5035:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).filter,Me=j(3074),We=He.aTypedArray;(0,He.exportTypedArrayMethod)("filter",function(Ct){var ot=Be(We(this),Ct,arguments.length>1?arguments[1]:void 0);return Me(this,ot)})},7174:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).findIndex,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("findIndex",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},4345:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).find,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("find",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},2846:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).forEach,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("forEach",function(at){Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},4731:function(Ze,t,j){"use strict";var He=j(260),Be=j(1318).includes,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("includes",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},7209:function(Ze,t,j){"use strict";var He=j(260),Be=j(1318).indexOf,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("indexOf",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},6319:function(Ze,t,j){"use strict";var He=j(7854),Be=j(260),Me=j(6992),nt=j(5112)("iterator"),at=He.Uint8Array,Ct=Me.values,ot=Me.keys,Wt=Me.entries,et=Be.aTypedArray,lt=Be.exportTypedArrayMethod,gt=at&&at.prototype[nt],_i=!!gt&&("values"==gt.name||null==gt.name),tt=function(){return Ct.call(et(this))};lt("entries",function(){return Wt.call(et(this))}),lt("keys",function(){return ot.call(et(this))}),lt("values",tt,!_i),lt(nt,tt,!_i)},8867:function(Ze,t,j){"use strict";var He=j(260),Be=He.aTypedArray,We=[].join;(0,He.exportTypedArrayMethod)("join",function(at){return We.apply(Be(this),arguments)})},7789:function(Ze,t,j){"use strict";var He=j(260),Be=j(6583),Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("lastIndexOf",function(at){return Be.apply(Me(this),arguments)})},3739:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).map,Me=j(6707),We=He.aTypedArray,nt=He.aTypedArrayConstructor;(0,He.exportTypedArrayMethod)("map",function(ot){return Be(We(this),ot,arguments.length>1?arguments[1]:void 0,function(Wt,et){return new(nt(Me(Wt,Wt.constructor)))(et)})})},4483:function(Ze,t,j){"use strict";var He=j(260),Be=j(3671).right,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("reduceRight",function(at){return Be(Me(this),at,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(Ze,t,j){"use strict";var He=j(260),Be=j(3671).left,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("reduce",function(at){return Be(Me(this),at,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(Ze,t,j){"use strict";var He=j(260),Be=He.aTypedArray,We=Math.floor;(0,He.exportTypedArrayMethod)("reverse",function(){for(var et,at=this,Ct=Be(at).length,ot=We(Ct/2),Wt=0;Wt<ot;)et=at[Wt],at[Wt++]=at[--Ct],at[Ct]=et;return at})},3462:function(Ze,t,j){"use strict";var He=j(260),Be=j(7466),Me=j(4590),We=j(7908),nt=j(7293),at=He.aTypedArray;(0,He.exportTypedArrayMethod)("set",function(et){at(this);var lt=Me(arguments.length>1?arguments[1]:void 0,1),gt=this.length,_i=We(et),tt=Be(_i.length),yi=0;if(tt+lt>gt)throw RangeError("Wrong length");for(;yi<tt;)this[lt+yi]=_i[yi++]},nt(function(){new Int8Array(1).set({})}))},678:function(Ze,t,j){"use strict";var He=j(260),Be=j(6707),Me=j(7293),We=He.aTypedArray,nt=He.aTypedArrayConstructor,Ct=[].slice;(0,He.exportTypedArrayMethod)("slice",function(et,lt){for(var gt=Ct.call(We(this),et,lt),_i=Be(this,this.constructor),tt=0,yi=gt.length,Pi=new(nt(_i))(yi);yi>tt;)Pi[tt]=gt[tt++];return Pi},Me(function(){new Int8Array(1).slice()}))},7462:function(Ze,t,j){"use strict";var He=j(260),Be=j(2092).some,Me=He.aTypedArray;(0,He.exportTypedArrayMethod)("some",function(at){return Be(Me(this),at,arguments.length>1?arguments[1]:void 0)})},3824:function(Ze,t,j){"use strict";var He=j(260),Be=He.aTypedArray,We=[].sort;(0,He.exportTypedArrayMethod)("sort",function(at){return We.call(Be(this),at)})},5021:function(Ze,t,j){"use strict";var He=j(260),Be=j(7466),Me=j(1400),We=j(6707),nt=He.aTypedArray;(0,He.exportTypedArrayMethod)("subarray",function(ot,Wt){var et=nt(this),lt=et.length,gt=Me(ot,lt);return new(We(et,et.constructor))(et.buffer,et.byteOffset+gt*et.BYTES_PER_ELEMENT,Be((void 0===Wt?lt:Me(Wt,lt))-gt))})},2974:function(Ze,t,j){"use strict";var He=j(7854),Be=j(260),Me=j(7293),We=He.Int8Array,nt=Be.aTypedArray,at=Be.exportTypedArrayMethod,Ct=[].toLocaleString,ot=[].slice,Wt=!!We&&Me(function(){Ct.call(new We(1))});at("toLocaleString",function(){return Ct.apply(Wt?ot.call(nt(this)):nt(this),arguments)},Me(function(){return[1,2].toLocaleString()!=new We([1,2]).toLocaleString()})||!Me(function(){We.prototype.toLocaleString.call([1,2])}))},5016:function(Ze,t,j){"use strict";var He=j(260).exportTypedArrayMethod,Be=j(7293),We=j(7854).Uint8Array,nt=We&&We.prototype||{},at=[].toString,Ct=[].join;Be(function(){at.call({})})&&(at=function(){return Ct.call(this)}),He("toString",at,nt.toString!=at)},2472:function(Ze,t,j){j(9843)("Uint8",function(Be){return function(We,nt,at){return Be(this,We,nt,at)}})},4747:function(Ze,t,j){var He=j(7854),Be=j(8324),Me=j(8533),We=j(8880);for(var nt in Be){var at=He[nt],Ct=at&&at.prototype;if(Ct&&Ct.forEach!==Me)try{We(Ct,"forEach",Me)}catch{Ct.forEach=Me}}},3948:function(Ze,t,j){var He=j(7854),Be=j(8324),Me=j(6992),We=j(8880),nt=j(5112),at=nt("iterator"),Ct=nt("toStringTag"),ot=Me.values;for(var Wt in Be){var et=He[Wt],lt=et&&et.prototype;if(lt){if(lt[at]!==ot)try{We(lt,at,ot)}catch{lt[at]=ot}if(lt[Ct]||We(lt,Ct,Wt),Be[Wt])for(var gt in Me)if(lt[gt]!==Me[gt])try{We(lt,gt,Me[gt])}catch{lt[gt]=Me[gt]}}}},1637:function(Ze,t,j){"use strict";j(6992);var He=j(2109),Be=j(5005),Me=j(590),We=j(1320),nt=j(2248),at=j(8003),Ct=j(4994),ot=j(9909),Wt=j(5787),et=j(6656),lt=j(9974),gt=j(648),_i=j(9670),tt=j(111),yi=j(30),Pi=j(9114),Dt=j(8554),Fi=j(1246),xi=j(5112),fi=Be("fetch"),It=Be("Headers"),Si=xi("iterator"),Ni="URLSearchParams",Zi=Ni+"Iterator",Rn=ot.set,Ki=ot.getterFor(Ni),tn=ot.getterFor(Zi),yn=/\+/g,Nn=Array(4),yr=function(pr){return Nn[pr-1]||(Nn[pr-1]=RegExp("((?:%[\\da-f]{2}){"+pr+"})","gi"))},fr=function(pr){try{return decodeURIComponent(pr)}catch{return pr}},Nr=function(pr){var $n=pr.replace(yn," "),ar=4;try{return decodeURIComponent($n)}catch{for(;ar;)$n=$n.replace(yr(ar--),fr);return $n}},Mi=/[!'()~]|%20/g,In={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Jn=function(pr){return In[pr]},ia=function(pr){return encodeURIComponent(pr).replace(Mi,Jn)},jr=function(pr,$n){if($n)for(var Dn,Gr,ar=$n.split("&"),Sn=0;Sn<ar.length;)(Dn=ar[Sn++]).length&&(Gr=Dn.split("="),pr.push({key:Nr(Gr.shift()),value:Nr(Gr.join("="))}))},Pr=function(pr){this.entries.length=0,jr(this.entries,pr)},Mn=function(pr,$n){if(pr<$n)throw TypeError("Not enough arguments")},Ya=Ct(function($n,ar){Rn(this,{type:Zi,iterator:Dt(Ki($n).entries),kind:ar})},"Iterator",function(){var $n=tn(this),ar=$n.kind,Sn=$n.iterator.next(),Dn=Sn.value;return Sn.done||(Sn.value="keys"===ar?Dn.key:"values"===ar?Dn.value:[Dn.key,Dn.value]),Sn}),ka=function(){Wt(this,ka,Ni);var Dn,Gr,Vn,rn,ur,lr,Pa,Ga,Ja,$n=arguments.length>0?arguments[0]:void 0,Sn=[];if(Rn(this,{type:Ni,entries:Sn,updateURL:function(){},updateSearchParams:Pr}),void 0!==$n)if(tt($n))if("function"==typeof(Dn=Fi($n)))for(Vn=(Gr=Dn.call($n)).next;!(rn=Vn.call(Gr)).done;){if((Pa=(lr=(ur=Dt(_i(rn.value))).next).call(ur)).done||(Ga=lr.call(ur)).done||!lr.call(ur).done)throw TypeError("Expected sequence with length 2");Sn.push({key:Pa.value+"",value:Ga.value+""})}else for(Ja in $n)et($n,Ja)&&Sn.push({key:Ja,value:$n[Ja]+""});else jr(Sn,"string"==typeof $n?"?"===$n.charAt(0)?$n.slice(1):$n:$n+"")},Ma=ka.prototype;nt(Ma,{append:function($n,ar){Mn(arguments.length,2);var Sn=Ki(this);Sn.entries.push({key:$n+"",value:ar+""}),Sn.updateURL()},delete:function(pr){Mn(arguments.length,1);for(var $n=Ki(this),ar=$n.entries,Sn=pr+"",Dn=0;Dn<ar.length;)ar[Dn].key===Sn?ar.splice(Dn,1):Dn++;$n.updateURL()},get:function($n){Mn(arguments.length,1);for(var ar=Ki(this).entries,Sn=$n+"",Dn=0;Dn<ar.length;Dn++)if(ar[Dn].key===Sn)return ar[Dn].value;return null},getAll:function($n){Mn(arguments.length,1);for(var ar=Ki(this).entries,Sn=$n+"",Dn=[],Gr=0;Gr<ar.length;Gr++)ar[Gr].key===Sn&&Dn.push(ar[Gr].value);return Dn},has:function($n){Mn(arguments.length,1);for(var ar=Ki(this).entries,Sn=$n+"",Dn=0;Dn<ar.length;)if(ar[Dn++].key===Sn)return!0;return!1},set:function($n,ar){Mn(arguments.length,1);for(var lr,Sn=Ki(this),Dn=Sn.entries,Gr=!1,Vn=$n+"",rn=ar+"",ur=0;ur<Dn.length;ur++)(lr=Dn[ur]).key===Vn&&(Gr?Dn.splice(ur--,1):(Gr=!0,lr.value=rn));Gr||Dn.push({key:Vn,value:rn}),Sn.updateURL()},sort:function(){var Dn,Gr,Vn,$n=Ki(this),ar=$n.entries,Sn=ar.slice();for(ar.length=0,Vn=0;Vn<Sn.length;Vn++){for(Dn=Sn[Vn],Gr=0;Gr<Vn;Gr++)if(ar[Gr].key>Dn.key){ar.splice(Gr,0,Dn);break}Gr===Vn&&ar.push(Dn)}$n.updateURL()},forEach:function($n){for(var Gr,ar=Ki(this).entries,Sn=lt($n,arguments.length>1?arguments[1]:void 0,3),Dn=0;Dn<ar.length;)Sn((Gr=ar[Dn++]).value,Gr.key,this)},keys:function(){return new Ya(this,"keys")},values:function(){return new Ya(this,"values")},entries:function(){return new Ya(this,"entries")}},{enumerable:!0}),We(Ma,Si,Ma.entries),We(Ma,"toString",function(){for(var Dn,$n=Ki(this).entries,ar=[],Sn=0;Sn<$n.length;)Dn=$n[Sn++],ar.push(ia(Dn.key)+"="+ia(Dn.value));return ar.join("&")},{enumerable:!0}),at(ka,Ni),He({global:!0,forced:!Me},{URLSearchParams:ka}),!Me&&"function"==typeof fi&&"function"==typeof It&&He({global:!0,enumerable:!0,forced:!0},{fetch:function($n){var Sn,Dn,Gr,ar=[$n];return arguments.length>1&&(tt(Sn=arguments[1])&&gt(Dn=Sn.body)===Ni&&((Gr=Sn.headers?new It(Sn.headers):new It).has("content-type")||Gr.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Sn=yi(Sn,{body:Pi(0,String(Dn)),headers:Pi(0,Gr)})),ar.push(Sn)),fi.apply(this,ar)}}),Ze.exports={URLSearchParams:ka,getState:Ki}},285:function(Ze,t,j){"use strict";j(8783);var Pr,He=j(2109),Be=j(9781),Me=j(590),We=j(7854),nt=j(6048),at=j(1320),Ct=j(5787),ot=j(6656),Wt=j(1574),et=j(8457),lt=j(8710).codeAt,gt=j(3197),_i=j(8003),tt=j(1637),yi=j(9909),Pi=We.URL,Dt=tt.URLSearchParams,Fi=tt.getState,xi=yi.set,fi=yi.getterFor("URL"),It=Math.floor,Si=Math.pow,Zi="Invalid scheme",Rn="Invalid host",Ki="Invalid port",tn=/[A-Za-z]/,yn=/[\d+-.A-Za-z]/,Nn=/\d/,yr=/^(0x|0X)/,fr=/^[0-7]+$/,Nr=/^\d+$/,Mi=/^[\dA-Fa-f]+$/,In=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,Jn=/[\u0000\t\u000A\u000D #/:?@[\\]]/,ia=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,jr=/[\t\u000A\u000D]/g,Mn=function(Xe,Qt){var ve,l,u;if("["==Qt.charAt(0)){if("]"!=Qt.charAt(Qt.length-1)||!(ve=ka(Qt.slice(1,-1))))return Rn;Xe.host=ve}else if(rn(Xe)){if(Qt=gt(Qt),In.test(Qt)||null===(ve=Ya(Qt)))return Rn;Xe.host=ve}else{if(Jn.test(Qt))return Rn;for(ve="",l=et(Qt),u=0;u<l.length;u++)ve+=Gr(l[u],$n);Xe.host=ve}},Ya=function(Xe){var ve,l,u,m,x,w,E,Qt=Xe.split(".");if(Qt.length&&""==Qt[Qt.length-1]&&Qt.pop(),(ve=Qt.length)>4)return Xe;for(l=[],u=0;u<ve;u++){if(""==(m=Qt[u]))return Xe;if(x=10,m.length>1&&"0"==m.charAt(0)&&(x=yr.test(m)?16:8,m=m.slice(8==x?1:2)),""===m)w=0;else{if(!(10==x?Nr:8==x?fr:Mi).test(m))return Xe;w=parseInt(m,x)}l.push(w)}for(u=0;u<ve;u++)if(w=l[u],u==ve-1){if(w>=Si(256,5-ve))return null}else if(w>255)return null;for(E=l.pop(),u=0;u<l.length;u++)E+=l[u]*Si(256,3-u);return E},ka=function(Xe){var m,x,w,E,M,N,H,Qt=[0,0,0,0,0,0,0,0],ve=0,l=null,u=0,Z=function(){return Xe.charAt(u)};if(":"==Z()){if(":"!=Xe.charAt(1))return;u+=2,l=++ve}for(;Z();){if(8==ve)return;if(":"!=Z()){for(m=x=0;x<4&&Mi.test(Z());)m=16*m+parseInt(Z(),16),u++,x++;if("."==Z()){if(0==x||(u-=x,ve>6))return;for(w=0;Z();){if(E=null,w>0){if(!("."==Z()&&w<4))return;u++}if(!Nn.test(Z()))return;for(;Nn.test(Z());){if(M=parseInt(Z(),10),null===E)E=M;else{if(0==E)return;E=10*E+M}if(E>255)return;u++}Qt[ve]=256*Qt[ve]+E,(2==++w||4==w)&&ve++}if(4!=w)return;break}if(":"==Z()){if(u++,!Z())return}else if(Z())return;Qt[ve++]=m}else{if(null!==l)return;u++,l=++ve}}if(null!==l)for(N=ve-l,ve=7;0!=ve&&N>0;)H=Qt[ve],Qt[ve--]=Qt[l+N-1],Qt[l+--N]=H;else if(8!=ve)return;return Qt},pr=function(Xe){var Qt,ve,l,u;if("number"==typeof Xe){for(Qt=[],ve=0;ve<4;ve++)Qt.unshift(Xe%256),Xe=It(Xe/256);return Qt.join(".")}if("object"==typeof Xe){for(Qt="",l=function(Xe){for(var Qt=null,ve=1,l=null,u=0,m=0;m<8;m++)0!==Xe[m]?(u>ve&&(Qt=l,ve=u),l=null,u=0):(null===l&&(l=m),++u);return u>ve&&(Qt=l,ve=u),Qt}(Xe),ve=0;ve<8;ve++)u&&0===Xe[ve]||(u&&(u=!1),l===ve?(Qt+=ve?":":"::",u=!0):(Qt+=Xe[ve].toString(16),ve<7&&(Qt+=":")));return"["+Qt+"]"}return Xe},$n={},ar=Wt({},$n,{" ":1,'"':1,"<":1,">":1,"`":1}),Sn=Wt({},ar,{"#":1,"?":1,"{":1,"}":1}),Dn=Wt({},Sn,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Gr=function(Xe,Qt){var ve=lt(Xe,0);return ve>32&&ve<127&&!ot(Qt,Xe)?Xe:encodeURIComponent(Xe)},Vn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},rn=function(Xe){return ot(Vn,Xe.scheme)},ur=function(Xe){return""!=Xe.username||""!=Xe.password},lr=function(Xe){return!Xe.host||Xe.cannotBeABaseURL||"file"==Xe.scheme},Pa=function(Xe,Qt){var ve;return 2==Xe.length&&tn.test(Xe.charAt(0))&&(":"==(ve=Xe.charAt(1))||!Qt&&"|"==ve)},Ga=function(Xe){var Qt;return Xe.length>1&&Pa(Xe.slice(0,2))&&(2==Xe.length||"/"===(Qt=Xe.charAt(2))||"\\"===Qt||"?"===Qt||"#"===Qt)},Ja=function(Xe){var Qt=Xe.path,ve=Qt.length;ve&&("file"!=Xe.scheme||1!=ve||!Pa(Qt[0],!0))&&Qt.pop()},Ra=function(Xe){return"."===Xe||"%2e"===Xe.toLowerCase()},ha=function(Xe){return".."===(Xe=Xe.toLowerCase())||"%2e."===Xe||".%2e"===Xe||"%2e%2e"===Xe},xr={},da={},Mr={},go={},Dr={},Aa={},fa={},Ia={},Fa={},Et={},je={},Je={},At={},kt={},ai={},Ci={},Ii={},Mt={},Bi={},On={},_n={},Vi=function(Xe,Qt,ve,l){var N,H,Z,J,u=ve||xr,m=0,x="",w=!1,E=!1,M=!1;for(ve||(Xe.scheme="",Xe.username="",Xe.password="",Xe.host=null,Xe.port=null,Xe.path=[],Xe.query=null,Xe.fragment=null,Xe.cannotBeABaseURL=!1,Qt=Qt.replace(ia,"")),Qt=Qt.replace(jr,""),N=et(Qt);m<=N.length;){switch(H=N[m],u){case xr:if(!H||!tn.test(H)){if(ve)return Zi;u=Mr;continue}x+=H.toLowerCase(),u=da;break;case da:if(H&&(yn.test(H)||"+"==H||"-"==H||"."==H))x+=H.toLowerCase();else{if(":"!=H){if(ve)return Zi;x="",u=Mr,m=0;continue}if(ve&&(rn(Xe)!=ot(Vn,x)||"file"==x&&(ur(Xe)||null!==Xe.port)||"file"==Xe.scheme&&!Xe.host))return;if(Xe.scheme=x,ve)return void(rn(Xe)&&Vn[Xe.scheme]==Xe.port&&(Xe.port=null));x="","file"==Xe.scheme?u=kt:rn(Xe)&&l&&l.scheme==Xe.scheme?u=go:rn(Xe)?u=Ia:"/"==N[m+1]?(u=Dr,m++):(Xe.cannotBeABaseURL=!0,Xe.path.push(""),u=Bi)}break;case Mr:if(!l||l.cannotBeABaseURL&&"#"!=H)return Zi;if(l.cannotBeABaseURL&&"#"==H){Xe.scheme=l.scheme,Xe.path=l.path.slice(),Xe.query=l.query,Xe.fragment="",Xe.cannotBeABaseURL=!0,u=_n;break}u="file"==l.scheme?kt:Aa;continue;case go:if("/"!=H||"/"!=N[m+1]){u=Aa;continue}u=Fa,m++;break;case Dr:if("/"==H){u=Et;break}u=Mt;continue;case Aa:if(Xe.scheme=l.scheme,H==Pr)Xe.username=l.username,Xe.password=l.password,Xe.host=l.host,Xe.port=l.port,Xe.path=l.path.slice(),Xe.query=l.query;else if("/"==H||"\\"==H&&rn(Xe))u=fa;else if("?"==H)Xe.username=l.username,Xe.password=l.password,Xe.host=l.host,Xe.port=l.port,Xe.path=l.path.slice(),Xe.query="",u=On;else{if("#"!=H){Xe.username=l.username,Xe.password=l.password,Xe.host=l.host,Xe.port=l.port,Xe.path=l.path.slice(),Xe.path.pop(),u=Mt;continue}Xe.username=l.username,Xe.password=l.password,Xe.host=l.host,Xe.port=l.port,Xe.path=l.path.slice(),Xe.query=l.query,Xe.fragment="",u=_n}break;case fa:if(!rn(Xe)||"/"!=H&&"\\"!=H){if("/"!=H){Xe.username=l.username,Xe.password=l.password,Xe.host=l.host,Xe.port=l.port,u=Mt;continue}u=Et}else u=Fa;break;case Ia:if(u=Fa,"/"!=H||"/"!=x.charAt(m+1))continue;m++;break;case Fa:if("/"!=H&&"\\"!=H){u=Et;continue}break;case Et:if("@"==H){w&&(x="%40"+x),w=!0,Z=et(x);for(var ne=0;ne<Z.length;ne++){var fe=Z[ne];if(":"!=fe||M){var ye=Gr(fe,Dn);M?Xe.password+=ye:Xe.username+=ye}else M=!0}x=""}else if(H==Pr||"/"==H||"?"==H||"#"==H||"\\"==H&&rn(Xe)){if(w&&""==x)return"Invalid authority";m-=et(x).length+1,x="",u=je}else x+=H;break;case je:case Je:if(ve&&"file"==Xe.scheme){u=Ci;continue}if(":"!=H||E){if(H==Pr||"/"==H||"?"==H||"#"==H||"\\"==H&&rn(Xe)){if(rn(Xe)&&""==x)return Rn;if(ve&&""==x&&(ur(Xe)||null!==Xe.port))return;if(J=Mn(Xe,x))return J;if(x="",u=Ii,ve)return;continue}"["==H?E=!0:"]"==H&&(E=!1),x+=H}else{if(""==x)return Rn;if(J=Mn(Xe,x))return J;if(x="",u=At,ve==Je)return}break;case At:if(!Nn.test(H)){if(H==Pr||"/"==H||"?"==H||"#"==H||"\\"==H&&rn(Xe)||ve){if(""!=x){var De=parseInt(x,10);if(De>65535)return Ki;Xe.port=rn(Xe)&&De===Vn[Xe.scheme]?null:De,x=""}if(ve)return;u=Ii;continue}return Ki}x+=H;break;case kt:if(Xe.scheme="file","/"==H||"\\"==H)u=ai;else{if(!l||"file"!=l.scheme){u=Mt;continue}if(H==Pr)Xe.host=l.host,Xe.path=l.path.slice(),Xe.query=l.query;else if("?"==H)Xe.host=l.host,Xe.path=l.path.slice(),Xe.query="",u=On;else{if("#"!=H){Ga(N.slice(m).join(""))||(Xe.host=l.host,Xe.path=l.path.slice(),Ja(Xe)),u=Mt;continue}Xe.host=l.host,Xe.path=l.path.slice(),Xe.query=l.query,Xe.fragment="",u=_n}}break;case ai:if("/"==H||"\\"==H){u=Ci;break}l&&"file"==l.scheme&&!Ga(N.slice(m).join(""))&&(Pa(l.path[0],!0)?Xe.path.push(l.path[0]):Xe.host=l.host),u=Mt;continue;case Ci:if(H==Pr||"/"==H||"\\"==H||"?"==H||"#"==H){if(!ve&&Pa(x))u=Mt;else if(""==x){if(Xe.host="",ve)return;u=Ii}else{if(J=Mn(Xe,x))return J;if("localhost"==Xe.host&&(Xe.host=""),ve)return;x="",u=Ii}continue}x+=H;break;case Ii:if(rn(Xe)){if(u=Mt,"/"!=H&&"\\"!=H)continue}else if(ve||"?"!=H)if(ve||"#"!=H){if(H!=Pr&&(u=Mt,"/"!=H))continue}else Xe.fragment="",u=_n;else Xe.query="",u=On;break;case Mt:if(H==Pr||"/"==H||"\\"==H&&rn(Xe)||!ve&&("?"==H||"#"==H)){if(ha(x)?(Ja(Xe),"/"!=H&&!("\\"==H&&rn(Xe))&&Xe.path.push("")):Ra(x)?"/"!=H&&!("\\"==H&&rn(Xe))&&Xe.path.push(""):("file"==Xe.scheme&&!Xe.path.length&&Pa(x)&&(Xe.host&&(Xe.host=""),x=x.charAt(0)+":"),Xe.path.push(x)),x="","file"==Xe.scheme&&(H==Pr||"?"==H||"#"==H))for(;Xe.path.length>1&&""===Xe.path[0];)Xe.path.shift();"?"==H?(Xe.query="",u=On):"#"==H&&(Xe.fragment="",u=_n)}else x+=Gr(H,Sn);break;case Bi:"?"==H?(Xe.query="",u=On):"#"==H?(Xe.fragment="",u=_n):H!=Pr&&(Xe.path[0]+=Gr(H,$n));break;case On:ve||"#"!=H?H!=Pr&&("'"==H&&rn(Xe)?Xe.query+="%27":Xe.query+="#"==H?"%23":Gr(H,$n)):(Xe.fragment="",u=_n);break;case _n:H!=Pr&&(Xe.fragment+=Gr(H,ar))}m++}},Qn=function(Qt){var x,w,ve=Ct(this,Qn,"URL"),l=arguments.length>1?arguments[1]:void 0,u=String(Qt),m=xi(ve,{type:"URL"});if(void 0!==l)if(l instanceof Qn)x=fi(l);else if(w=Vi(x={},String(l)))throw TypeError(w);if(w=Vi(m,u,null,x))throw TypeError(w);var E=m.searchParams=new Dt,M=Fi(E);M.updateSearchParams(m.query),M.updateURL=function(){m.query=String(E)||null},Be||(ve.href=Ut.call(ve),ve.origin=vt.call(ve),ve.protocol=pt.call(ve),ve.username=Ke.call(ve),ve.password=rt.call(ve),ve.host=Ot.call(ve),ve.hostname=ci.call(ve),ve.port=en.call(ve),ve.pathname=$i.call(ve),ve.search=En.call(ve),ve.searchParams=st.call(ve),ve.hash=Bt.call(ve))},Yt=Qn.prototype,Ut=function(){var Xe=fi(this),Qt=Xe.scheme,ve=Xe.username,l=Xe.password,u=Xe.host,m=Xe.port,x=Xe.path,w=Xe.query,E=Xe.fragment,M=Qt+":";return null!==u?(M+="//",ur(Xe)&&(M+=ve+(l?":"+l:"")+"@"),M+=pr(u),null!==m&&(M+=":"+m)):"file"==Qt&&(M+="//"),M+=Xe.cannotBeABaseURL?x[0]:x.length?"/"+x.join("/"):"",null!==w&&(M+="?"+w),null!==E&&(M+="#"+E),M},vt=function(){var Xe=fi(this),Qt=Xe.scheme,ve=Xe.port;if("blob"==Qt)try{return new URL(Qt.path[0]).origin}catch{return"null"}return"file"!=Qt&&rn(Xe)?Qt+"://"+pr(Xe.host)+(null!==ve?":"+ve:""):"null"},pt=function(){return fi(this).scheme+":"},Ke=function(){return fi(this).username},rt=function(){return fi(this).password},Ot=function(){var Xe=fi(this),Qt=Xe.host,ve=Xe.port;return null===Qt?"":null===ve?pr(Qt):pr(Qt)+":"+ve},ci=function(){var Xe=fi(this).host;return null===Xe?"":pr(Xe)},en=function(){var Xe=fi(this).port;return null===Xe?"":String(Xe)},$i=function(){var Xe=fi(this),Qt=Xe.path;return Xe.cannotBeABaseURL?Qt[0]:Qt.length?"/"+Qt.join("/"):""},En=function(){var Xe=fi(this).query;return Xe?"?"+Xe:""},st=function(){return fi(this).searchParams},Bt=function(){var Xe=fi(this).fragment;return Xe?"#"+Xe:""},ke=function(Xe,Qt){return{get:Xe,set:Qt,configurable:!0,enumerable:!0}};if(Be&&nt(Yt,{href:ke(Ut,function(Xe){var Qt=fi(this),ve=String(Xe),l=Vi(Qt,ve);if(l)throw TypeError(l);Fi(Qt.searchParams).updateSearchParams(Qt.query)}),origin:ke(vt),protocol:ke(pt,function(Xe){var Qt=fi(this);Vi(Qt,String(Xe)+":",xr)}),username:ke(Ke,function(Xe){var Qt=fi(this),ve=et(String(Xe));if(!lr(Qt)){Qt.username="";for(var l=0;l<ve.length;l++)Qt.username+=Gr(ve[l],Dn)}}),password:ke(rt,function(Xe){var Qt=fi(this),ve=et(String(Xe));if(!lr(Qt)){Qt.password="";for(var l=0;l<ve.length;l++)Qt.password+=Gr(ve[l],Dn)}}),host:ke(Ot,function(Xe){var Qt=fi(this);Qt.cannotBeABaseURL||Vi(Qt,String(Xe),je)}),hostname:ke(ci,function(Xe){var Qt=fi(this);Qt.cannotBeABaseURL||Vi(Qt,String(Xe),Je)}),port:ke(en,function(Xe){var Qt=fi(this);lr(Qt)||(""==(Xe=String(Xe))?Qt.port=null:Vi(Qt,Xe,At))}),pathname:ke($i,function(Xe){var Qt=fi(this);Qt.cannotBeABaseURL||(Qt.path=[],Vi(Qt,Xe+"",Ii))}),search:ke(En,function(Xe){var Qt=fi(this);""==(Xe=String(Xe))?Qt.query=null:("?"==Xe.charAt(0)&&(Xe=Xe.slice(1)),Qt.query="",Vi(Qt,Xe,On)),Fi(Qt.searchParams).updateSearchParams(Qt.query)}),searchParams:ke(st),hash:ke(Bt,function(Xe){var Qt=fi(this);""!=(Xe=String(Xe))?("#"==Xe.charAt(0)&&(Xe=Xe.slice(1)),Qt.fragment="",Vi(Qt,Xe,_n)):Qt.fragment=null})}),at(Yt,"toJSON",function(){return Ut.call(this)},{enumerable:!0}),at(Yt,"toString",function(){return Ut.call(this)},{enumerable:!0}),Pi){var wt=Pi.createObjectURL,jt=Pi.revokeObjectURL;wt&&at(Qn,"createObjectURL",function(Qt){return wt.apply(Pi,arguments)}),jt&&at(Qn,"revokeObjectURL",function(Qt){return jt.apply(Pi,arguments)})}_i(Qn,"URL"),He({global:!0,forced:!Me,sham:!Be},{URL:Qn})}},Zt={};function T(Ze){if(Zt[Ze])return Zt[Ze].exports;var t=Zt[Ze]={exports:{}};return ja[Ze](t,t.exports,T),t.exports}T.d=function(Ze,t){for(var j in t)T.o(t,j)&&!T.o(Ze,j)&&Object.defineProperty(Ze,j,{enumerable:!0,get:t[j]})},T.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),T.o=function(Ze,t){return Object.prototype.hasOwnProperty.call(Ze,t)},T.r=function(Ze){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ze,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ze,"__esModule",{value:!0})};var xt={};return function(){"use strict";function pr(Yt,Ut){var vt;if(typeof Symbol>"u"||null==Yt[Symbol.iterator]){if(Array.isArray(Yt)||(vt=function $n(Yt,Ut){if(Yt){if("string"==typeof Yt)return ar(Yt,Ut);var vt=Object.prototype.toString.call(Yt).slice(8,-1);if("Object"===vt&&Yt.constructor&&(vt=Yt.constructor.name),"Map"===vt||"Set"===vt)return Array.from(Yt);if("Arguments"===vt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt))return ar(Yt,Ut)}}(Yt))||Ut&&Yt&&"number"==typeof Yt.length){vt&&(Yt=vt);var pt=0,Ke=function(){};return{s:Ke,n:function(){return pt>=Yt.length?{done:!0}:{done:!1,value:Yt[pt++]}},e:function($i){throw $i},f:Ke}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ci,rt=!0,Ot=!1;return{s:function(){vt=Yt[Symbol.iterator]()},n:function(){var $i=vt.next();return rt=$i.done,$i},e:function($i){Ot=!0,ci=$i},f:function(){try{!rt&&null!=vt.return&&vt.return()}finally{if(Ot)throw ci}}}}function ar(Yt,Ut){(null==Ut||Ut>Yt.length)&&(Ut=Yt.length);for(var vt=0,pt=new Array(Ut);vt<Ut;vt++)pt[vt]=Yt[vt];return pt}function Dn(Yt,Ut){for(var vt=0;vt<Ut.length;vt++){var pt=Ut[vt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(Yt,pt.key,pt)}}T.r(xt),T.d(xt,{Dropzone:function(){return kt},default:function(){return Qn}}),T(2222),T(7327),T(2772),T(6992),T(1249),T(7042),T(561),T(8264),T(8309),T(489),T(1539),T(4916),T(9714),T(8783),T(4723),T(5306),T(3123),T(3210),T(2472),T(2990),T(8927),T(3105),T(5035),T(4345),T(7174),T(2846),T(4731),T(7209),T(6319),T(8867),T(7789),T(3739),T(9368),T(4483),T(2056),T(3462),T(678),T(7462),T(3824),T(5021),T(2974),T(5016),T(4747),T(3948),T(285);var Vn=function(){function Yt(){!function Sn(Yt,Ut){if(!(Yt instanceof Ut))throw new TypeError("Cannot call a class as a function")}(this,Yt)}return function Gr(Yt,Ut,vt){return Ut&&Dn(Yt.prototype,Ut),vt&&Dn(Yt,vt),Yt}(Yt,[{key:"on",value:function(vt,pt){return this._callbacks=this._callbacks||{},this._callbacks[vt]||(this._callbacks[vt]=[]),this._callbacks[vt].push(pt),this}},{key:"emit",value:function(vt){this._callbacks=this._callbacks||{};for(var pt=this._callbacks[vt],Ke=arguments.length,rt=new Array(Ke>1?Ke-1:0),Ot=1;Ot<Ke;Ot++)rt[Ot-1]=arguments[Ot];if(pt){var en,ci=pr(pt,!0);try{for(ci.s();!(en=ci.n()).done;)en.value.apply(this,rt)}catch(En){ci.e(En)}finally{ci.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+vt,{args:rt})),this}},{key:"makeEvent",value:function(vt,pt){var Ke={bubbles:!0,cancelable:!0,detail:pt};if("function"==typeof window.CustomEvent)return new CustomEvent(vt,Ke);var rt=document.createEvent("CustomEvent");return rt.initCustomEvent(vt,Ke.bubbles,Ke.cancelable,Ke.detail),rt}},{key:"off",value:function(vt,pt){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var Ke=this._callbacks[vt];if(!Ke)return this;if(1===arguments.length)return delete this._callbacks[vt],this;for(var rt=0;rt<Ke.length;rt++)if(Ke[rt]===pt){Ke.splice(rt,1);break}return this}}]),Yt}();function lr(Yt,Ut){var vt;if(typeof Symbol>"u"||null==Yt[Symbol.iterator]){if(Array.isArray(Yt)||(vt=function Pa(Yt,Ut){if(Yt){if("string"==typeof Yt)return Ga(Yt,Ut);var vt=Object.prototype.toString.call(Yt).slice(8,-1);if("Object"===vt&&Yt.constructor&&(vt=Yt.constructor.name),"Map"===vt||"Set"===vt)return Array.from(Yt);if("Arguments"===vt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt))return Ga(Yt,Ut)}}(Yt))||Ut&&Yt&&"number"==typeof Yt.length){vt&&(Yt=vt);var pt=0,Ke=function(){};return{s:Ke,n:function(){return pt>=Yt.length?{done:!0}:{done:!1,value:Yt[pt++]}},e:function($i){throw $i},f:Ke}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ci,rt=!0,Ot=!1;return{s:function(){vt=Yt[Symbol.iterator]()},n:function(){var $i=vt.next();return rt=$i.done,$i},e:function($i){Ot=!0,ci=$i},f:function(){try{!rt&&null!=vt.return&&vt.return()}finally{if(Ot)throw ci}}}}function Ga(Yt,Ut){(null==Ut||Ut>Yt.length)&&(Ut=Yt.length);for(var vt=0,pt=new Array(Ut);vt<Ut;vt++)pt[vt]=Yt[vt];return pt}var Ra={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(Ut,vt,pt){if(pt)return{dzuuid:pt.file.upload.uuid,dzchunkindex:pt.index,dztotalfilesize:pt.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:pt.file.upload.totalChunkCount,dzchunkbyteoffset:pt.index*this.options.chunkSize}},accept:function(Ut,vt){return vt()},chunksUploaded:function(Ut,vt){vt()},fallback:function(){var Ut;this.element.className="".concat(this.element.className," dz-browser-not-supported");var pt,vt=lr(this.element.getElementsByTagName("div"),!0);try{for(vt.s();!(pt=vt.n()).done;){var Ke=pt.value;if(/(^| )dz-message($| )/.test(Ke.className)){Ut=Ke,Ke.className="dz-message";break}}}catch(Ot){vt.e(Ot)}finally{vt.f()}Ut||(Ut=kt.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(Ut));var rt=Ut.getElementsByTagName("span")[0];return rt&&(null!=rt.textContent?rt.textContent=this.options.dictFallbackMessage:null!=rt.innerText&&(rt.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(Ut,vt,pt,Ke){var rt={srcX:0,srcY:0,srcWidth:Ut.width,srcHeight:Ut.height},Ot=Ut.width/Ut.height;null==vt&&null==pt?(vt=rt.srcWidth,pt=rt.srcHeight):null==vt?vt=pt*Ot:null==pt&&(pt=vt/Ot);var ci=(vt=Math.min(vt,rt.srcWidth))/(pt=Math.min(pt,rt.srcHeight));if(rt.srcWidth>vt||rt.srcHeight>pt)if("crop"===Ke)Ot>ci?(rt.srcHeight=Ut.height,rt.srcWidth=rt.srcHeight*ci):(rt.srcWidth=Ut.width,rt.srcHeight=rt.srcWidth/ci);else{if("contain"!==Ke)throw new Error("Unknown resizeMethod '".concat(Ke,"'"));Ot>ci?pt=vt/Ot:vt=pt*Ot}return rt.srcX=(Ut.width-rt.srcWidth)/2,rt.srcY=(Ut.height-rt.srcHeight)/2,rt.trgWidth=vt,rt.trgHeight=pt,rt},transformFile:function(Ut,vt){return(this.options.resizeWidth||this.options.resizeHeight)&&Ut.type.match(/image.*/)?this.resizeImage(Ut,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,vt):vt(Ut)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(Ut){return this.element.classList.remove("dz-drag-hover")},dragstart:function(Ut){},dragend:function(Ut){return this.element.classList.remove("dz-drag-hover")},dragenter:function(Ut){return this.element.classList.add("dz-drag-hover")},dragover:function(Ut){return this.element.classList.add("dz-drag-hover")},dragleave:function(Ut){return this.element.classList.remove("dz-drag-hover")},paste:function(Ut){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(Ut){var vt=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){Ut.previewElement=kt.createElement(this.options.previewTemplate.trim()),Ut.previewTemplate=Ut.previewElement,this.previewsContainer.appendChild(Ut.previewElement);var Ke,pt=lr(Ut.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(pt.s();!(Ke=pt.n()).done;){var rt=Ke.value;rt.textContent=Ut.name}}catch(Bt){pt.e(Bt)}finally{pt.f()}var ci,Ot=lr(Ut.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(Ot.s();!(ci=Ot.n()).done;)(rt=ci.value).innerHTML=this.filesize(Ut.size)}catch(Bt){Ot.e(Bt)}finally{Ot.f()}this.options.addRemoveLinks&&(Ut._removeLink=kt.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),Ut.previewElement.appendChild(Ut._removeLink));var En,en=function(ke){return ke.preventDefault(),ke.stopPropagation(),Ut.status===kt.UPLOADING?kt.confirm(vt.options.dictCancelUploadConfirmation,function(){return vt.removeFile(Ut)}):vt.options.dictRemoveFileConfirmation?kt.confirm(vt.options.dictRemoveFileConfirmation,function(){return vt.removeFile(Ut)}):vt.removeFile(Ut)},$i=lr(Ut.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for($i.s();!(En=$i.n()).done;)En.value.addEventListener("click",en)}catch(Bt){$i.e(Bt)}finally{$i.f()}}},removedfile:function(Ut){return null!=Ut.previewElement&&null!=Ut.previewElement.parentNode&&Ut.previewElement.parentNode.removeChild(Ut.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(Ut,vt){if(Ut.previewElement){Ut.previewElement.classList.remove("dz-file-preview");var Ke,pt=lr(Ut.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(pt.s();!(Ke=pt.n()).done;){var rt=Ke.value;rt.alt=Ut.name,rt.src=vt}}catch(Ot){pt.e(Ot)}finally{pt.f()}return setTimeout(function(){return Ut.previewElement.classList.add("dz-image-preview")},1)}},error:function(Ut,vt){if(Ut.previewElement){Ut.previewElement.classList.add("dz-error"),"string"!=typeof vt&&vt.error&&(vt=vt.error);var Ke,pt=lr(Ut.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(pt.s();!(Ke=pt.n()).done;)Ke.value.textContent=vt}catch(Ot){pt.e(Ot)}finally{pt.f()}}},errormultiple:function(){},processing:function(Ut){if(Ut.previewElement&&(Ut.previewElement.classList.add("dz-processing"),Ut._removeLink))return Ut._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(Ut,vt,pt){if(Ut.previewElement){var rt,Ke=lr(Ut.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(Ke.s();!(rt=Ke.n()).done;){var Ot=rt.value;"PROGRESS"===Ot.nodeName?Ot.value=vt:Ot.style.width="".concat(vt,"%")}}catch(ci){Ke.e(ci)}finally{Ke.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(Ut){if(Ut.previewElement)return Ut.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(Ut){return this.emit("error",Ut,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(Ut){if(Ut._removeLink&&(Ut._removeLink.innerHTML=this.options.dictRemoveFile),Ut.previewElement)return Ut.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function ha(Yt){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(vt){return typeof vt}:function(vt){return vt&&"function"==typeof Symbol&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt})(Yt)}function xr(Yt,Ut){var vt;if(typeof Symbol>"u"||null==Yt[Symbol.iterator]){if(Array.isArray(Yt)||(vt=function da(Yt,Ut){if(Yt){if("string"==typeof Yt)return Mr(Yt,Ut);var vt=Object.prototype.toString.call(Yt).slice(8,-1);if("Object"===vt&&Yt.constructor&&(vt=Yt.constructor.name),"Map"===vt||"Set"===vt)return Array.from(Yt);if("Arguments"===vt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt))return Mr(Yt,Ut)}}(Yt))||Ut&&Yt&&"number"==typeof Yt.length){vt&&(Yt=vt);var pt=0,Ke=function(){};return{s:Ke,n:function(){return pt>=Yt.length?{done:!0}:{done:!1,value:Yt[pt++]}},e:function($i){throw $i},f:Ke}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ci,rt=!0,Ot=!1;return{s:function(){vt=Yt[Symbol.iterator]()},n:function(){var $i=vt.next();return rt=$i.done,$i},e:function($i){Ot=!0,ci=$i},f:function(){try{!rt&&null!=vt.return&&vt.return()}finally{if(Ot)throw ci}}}}function Mr(Yt,Ut){(null==Ut||Ut>Yt.length)&&(Ut=Yt.length);for(var vt=0,pt=new Array(Ut);vt<Ut;vt++)pt[vt]=Yt[vt];return pt}function go(Yt,Ut){if(!(Yt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Dr(Yt,Ut){for(var vt=0;vt<Ut.length;vt++){var pt=Ut[vt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(Yt,pt.key,pt)}}function Aa(Yt,Ut,vt){return Ut&&Dr(Yt.prototype,Ut),vt&&Dr(Yt,vt),Yt}function fa(Yt,Ut){if("function"!=typeof Ut&&null!==Ut)throw new TypeError("Super expression must either be null or a function");Yt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Yt,writable:!0,configurable:!0}}),Ut&&Ia(Yt,Ut)}function Ia(Yt,Ut){return(Ia=Object.setPrototypeOf||function(pt,Ke){return pt.__proto__=Ke,pt})(Yt,Ut)}function Fa(Yt){var Ut=function Je(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var Ke,pt=At(Yt);if(Ut){var rt=At(this).constructor;Ke=Reflect.construct(pt,arguments,rt)}else Ke=pt.apply(this,arguments);return Et(this,Ke)}}function Et(Yt,Ut){return!Ut||"object"!==ha(Ut)&&"function"!=typeof Ut?je(Yt):Ut}function je(Yt){if(void 0===Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt}function At(Yt){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(vt){return vt.__proto__||Object.getPrototypeOf(vt)})(Yt)}var kt=function(Yt){fa(vt,Yt);var Ut=Fa(vt);function vt(pt,Ke){var rt,Ot,ci;if(go(this,vt),(rt=Ut.call(this)).element=pt,rt.version=vt.version,rt.clickableElements=[],rt.listeners=[],rt.files=[],"string"==typeof rt.element&&(rt.element=document.querySelector(rt.element)),!rt.element||null==rt.element.nodeType)throw new Error("Invalid dropzone element.");if(rt.element.dropzone)throw new Error("Dropzone already attached.");vt.instances.push(je(rt)),rt.element.dropzone=je(rt);var en=null!=(ci=vt.optionsForElement(rt.element))?ci:{};if(rt.options=vt.extend({},Ra,en,Ke??{}),rt.options.previewTemplate=rt.options.previewTemplate.replace(/\n*/g,""),rt.options.forceFallback||!vt.isBrowserSupported())return Et(rt,rt.options.fallback.call(je(rt)));if(null==rt.options.url&&(rt.options.url=rt.element.getAttribute("action")),!rt.options.url)throw new Error("No URL provided.");if(rt.options.acceptedFiles&&rt.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(rt.options.uploadMultiple&&rt.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return rt.options.acceptedMimeTypes&&(rt.options.acceptedFiles=rt.options.acceptedMimeTypes,delete rt.options.acceptedMimeTypes),null!=rt.options.renameFilename&&(rt.options.renameFile=function($i){return rt.options.renameFilename.call(je(rt),$i.name,$i)}),"string"==typeof rt.options.method&&(rt.options.method=rt.options.method.toUpperCase()),(Ot=rt.getExistingFallback())&&Ot.parentNode&&Ot.parentNode.removeChild(Ot),!1!==rt.options.previewsContainer&&(rt.previewsContainer=rt.options.previewsContainer?vt.getElement(rt.options.previewsContainer,"previewsContainer"):rt.element),rt.options.clickable&&(rt.clickableElements=!0===rt.options.clickable?[rt.element]:vt.getElements(rt.options.clickable,"clickable")),rt.init(),rt}return Aa(vt,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(Ke){return Ke.accepted}).map(function(Ke){return Ke})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(Ke){return!Ke.accepted}).map(function(Ke){return Ke})}},{key:"getFilesWithStatus",value:function(Ke){return this.files.filter(function(rt){return rt.status===Ke}).map(function(rt){return rt})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(vt.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(vt.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(vt.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(Ke){return Ke.status===vt.UPLOADING||Ke.status===vt.QUEUED}).map(function(Ke){return Ke})}},{key:"init",value:function(){var Ke=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(vt.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function st(){Ke.hiddenFileInput&&Ke.hiddenFileInput.parentNode.removeChild(Ke.hiddenFileInput),Ke.hiddenFileInput=document.createElement("input"),Ke.hiddenFileInput.setAttribute("type","file"),(null===Ke.options.maxFiles||Ke.options.maxFiles>1)&&Ke.hiddenFileInput.setAttribute("multiple","multiple"),Ke.hiddenFileInput.className="dz-hidden-input",null!==Ke.options.acceptedFiles&&Ke.hiddenFileInput.setAttribute("accept",Ke.options.acceptedFiles),null!==Ke.options.capture&&Ke.hiddenFileInput.setAttribute("capture",Ke.options.capture),Ke.hiddenFileInput.setAttribute("tabindex","-1"),Ke.hiddenFileInput.style.visibility="hidden",Ke.hiddenFileInput.style.position="absolute",Ke.hiddenFileInput.style.top="0",Ke.hiddenFileInput.style.left="0",Ke.hiddenFileInput.style.height="0",Ke.hiddenFileInput.style.width="0",vt.getElement(Ke.options.hiddenInputContainer,"hiddenInputContainer").appendChild(Ke.hiddenFileInput),Ke.hiddenFileInput.addEventListener("change",function(){var Bt=Ke.hiddenFileInput.files;if(Bt.length){var wt,ke=xr(Bt,!0);try{for(ke.s();!(wt=ke.n()).done;)Ke.addFile(wt.value)}catch(Xe){ke.e(Xe)}finally{ke.f()}}Ke.emit("addedfiles",Bt),st()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var ci,Ot=xr(this.events,!0);try{for(Ot.s();!(ci=Ot.n()).done;){var en=ci.value;this.on(en,this.options[en])}}catch(st){Ot.e(st)}finally{Ot.f()}this.on("uploadprogress",function(){return Ke.updateTotalUploadProgress()}),this.on("removedfile",function(){return Ke.updateTotalUploadProgress()}),this.on("canceled",function(st){return Ke.emit("complete",st)}),this.on("complete",function(st){if(0===Ke.getAddedFiles().length&&0===Ke.getUploadingFiles().length&&0===Ke.getQueuedFiles().length)return setTimeout(function(){return Ke.emit("queuecomplete")},0)});var En=function(Bt){if(function(Bt){if(Bt.dataTransfer.types)for(var ke=0;ke<Bt.dataTransfer.types.length;ke++)if("Files"===Bt.dataTransfer.types[ke])return!0;return!1}(Bt))return Bt.stopPropagation(),Bt.preventDefault?Bt.preventDefault():Bt.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Bt){return Ke.emit("dragstart",Bt)},dragenter:function(Bt){return En(Bt),Ke.emit("dragenter",Bt)},dragover:function(Bt){var ke;try{ke=Bt.dataTransfer.effectAllowed}catch{}return Bt.dataTransfer.dropEffect="move"===ke||"linkMove"===ke?"move":"copy",En(Bt),Ke.emit("dragover",Bt)},dragleave:function(Bt){return Ke.emit("dragleave",Bt)},drop:function(Bt){return En(Bt),Ke.drop(Bt)},dragend:function(Bt){return Ke.emit("dragend",Bt)}}}],this.clickableElements.forEach(function(st){return Ke.listeners.push({element:st,events:{click:function(ke){return(st!==Ke.element||ke.target===Ke.element||vt.elementInside(ke.target,Ke.element.querySelector(".dz-message")))&&Ke.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,vt.instances.splice(vt.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var Ke,rt=0,Ot=0;if(this.getActiveFiles().length){var $i,en=xr(this.getActiveFiles(),!0);try{for(en.s();!($i=en.n()).done;){var En=$i.value;rt+=En.upload.bytesSent,Ot+=En.upload.total}}catch(st){en.e(st)}finally{en.f()}Ke=100*rt/Ot}else Ke=100;return this.emit("totaluploadprogress",Ke,Ot,rt)}},{key:"_getParamName",value:function(Ke){return"function"==typeof this.options.paramName?this.options.paramName(Ke):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(Ke,"]"):"")}},{key:"_renameFile",value:function(Ke){return"function"!=typeof this.options.renameFile?Ke.name:this.options.renameFile(Ke)}},{key:"getFallbackForm",value:function(){var Ke,rt;if(Ke=this.getExistingFallback())return Ke;var Ot='<div class="dz-fallback">';this.options.dictFallbackText&&(Ot+="<p>".concat(this.options.dictFallbackText,"</p>")),Ot+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var ci=vt.createElement(Ot);return"FORM"!==this.element.tagName?(rt=vt.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(ci):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),rt??ci}},{key:"getExistingFallback",value:function(){for(var Ke=function(En){var Bt,st=xr(En,!0);try{for(st.s();!(Bt=st.n()).done;){var ke=Bt.value;if(/(^| )fallback($| )/.test(ke.className))return ke}}catch(wt){st.e(wt)}finally{st.f()}},rt=0,Ot=["div","form"];rt<Ot.length;rt++){var en;if(en=Ke(this.element.getElementsByTagName(Ot[rt])))return en}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(Ke){return function(){var rt=[];for(var Ot in Ke.events)rt.push(Ke.element.addEventListener(Ot,Ke.events[Ot],!1));return rt}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(Ke){return function(){var rt=[];for(var Ot in Ke.events)rt.push(Ke.element.removeEventListener(Ot,Ke.events[Ot],!1));return rt}()})}},{key:"disable",value:function(){var Ke=this;return this.clickableElements.forEach(function(rt){return rt.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(rt){return Ke.cancelUpload(rt)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(Ke){return Ke.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(Ke){var rt=0,Ot="b";if(Ke>0){for(var ci=["tb","gb","mb","kb","b"],en=0;en<ci.length;en++){var $i=ci[en];if(Ke>=Math.pow(this.options.filesizeBase,4-en)/10){rt=Ke/Math.pow(this.options.filesizeBase,4-en),Ot=$i;break}}rt=Math.round(10*rt)/10}return"<strong>".concat(rt,"</strong> ").concat(this.options.dictFileSizeUnits[Ot])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(Ke){if(Ke.dataTransfer){this.emit("drop",Ke);for(var rt=[],Ot=0;Ot<Ke.dataTransfer.files.length;Ot++)rt[Ot]=Ke.dataTransfer.files[Ot];if(rt.length){var ci=Ke.dataTransfer.items;ci&&ci.length&&null!=ci[0].webkitGetAsEntry?this._addFilesFromItems(ci):this.handleFiles(rt)}this.emit("addedfiles",rt)}}},{key:"paste",value:function(Ke){if(null!=function _n(Yt,Ut){return typeof Yt<"u"&&null!==Yt?Ut(Yt):void 0}(Ke?.clipboardData,function(Ot){return Ot.items})){this.emit("paste",Ke);var rt=Ke.clipboardData.items;if(rt.length)return this._addFilesFromItems(rt)}}},{key:"handleFiles",value:function(Ke){var Ot,rt=xr(Ke,!0);try{for(rt.s();!(Ot=rt.n()).done;)this.addFile(Ot.value)}catch(en){rt.e(en)}finally{rt.f()}}},{key:"_addFilesFromItems",value:function(Ke){var rt=this;return function(){var en,Ot=[],ci=xr(Ke,!0);try{for(ci.s();!(en=ci.n()).done;){var En,$i=en.value;null!=$i.webkitGetAsEntry&&(En=$i.webkitGetAsEntry())?Ot.push(En.isFile?rt.addFile($i.getAsFile()):En.isDirectory?rt._addFilesFromDirectory(En,En.name):void 0):Ot.push(null==$i.getAsFile||null!=$i.kind&&"file"!==$i.kind?void 0:rt.addFile($i.getAsFile()))}}catch(st){ci.e(st)}finally{ci.f()}return Ot}()}},{key:"_addFilesFromDirectory",value:function(Ke,rt){var Ot=this,ci=Ke.createReader(),en=function(st){return function Vi(Yt,Ut,vt){if(typeof Yt<"u"&&null!==Yt&&"function"==typeof Yt[Ut])return vt(Yt,Ut)}(console,"log",function(Bt){return Bt.log(st)})};return function En(){return ci.readEntries(function(st){if(st.length>0){var ke,Bt=xr(st,!0);try{for(Bt.s();!(ke=Bt.n()).done;){var wt=ke.value;wt.isFile?wt.file(function(jt){if(!Ot.options.ignoreHiddenFiles||"."!==jt.name.substring(0,1))return jt.fullPath="".concat(rt,"/").concat(jt.name),Ot.addFile(jt)}):wt.isDirectory&&Ot._addFilesFromDirectory(wt,"".concat(rt,"/").concat(wt.name))}}catch(jt){Bt.e(jt)}finally{Bt.f()}En()}return null},en)}()}},{key:"accept",value:function(Ke,rt){this.options.maxFilesize&&Ke.size>1024*this.options.maxFilesize*1024?rt(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(Ke.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):vt.isValidFile(Ke,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(rt(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",Ke)):this.options.accept.call(this,Ke,rt):rt(this.options.dictInvalidFileType)}},{key:"addFile",value:function(Ke){var rt=this;Ke.upload={uuid:vt.uuidv4(),progress:0,total:Ke.size,bytesSent:0,filename:this._renameFile(Ke)},this.files.push(Ke),Ke.status=vt.ADDED,this.emit("addedfile",Ke),this._enqueueThumbnail(Ke),this.accept(Ke,function(Ot){Ot?(Ke.accepted=!1,rt._errorProcessing([Ke],Ot)):(Ke.accepted=!0,rt.options.autoQueue&&rt.enqueueFile(Ke)),rt._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(Ke){var Ot,rt=xr(Ke,!0);try{for(rt.s();!(Ot=rt.n()).done;)this.enqueueFile(Ot.value)}catch(en){rt.e(en)}finally{rt.f()}return null}},{key:"enqueueFile",value:function(Ke){var rt=this;if(Ke.status!==vt.ADDED||!0!==Ke.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(Ke.status=vt.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return rt.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(Ke){var rt=this;if(this.options.createImageThumbnails&&Ke.type.match(/image.*/)&&Ke.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(Ke),setTimeout(function(){return rt._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var Ke=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var rt=this._thumbnailQueue.shift();return this.createThumbnail(rt,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(Ot){return Ke.emit("thumbnail",rt,Ot),Ke._processingThumbnail=!1,Ke._processThumbnailQueue()})}}},{key:"removeFile",value:function(Ke){if(Ke.status===vt.UPLOADING&&this.cancelUpload(Ke),this.files=ai(this.files,Ke),this.emit("removedfile",Ke),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(Ke){null==Ke&&(Ke=!1);var Ot,rt=xr(this.files.slice(),!0);try{for(rt.s();!(Ot=rt.n()).done;){var ci=Ot.value;(ci.status!==vt.UPLOADING||Ke)&&this.removeFile(ci)}}catch(en){rt.e(en)}finally{rt.f()}return null}},{key:"resizeImage",value:function(Ke,rt,Ot,ci,en){var $i=this;return this.createThumbnail(Ke,rt,Ot,ci,!0,function(En,st){if(null==st)return en(Ke);var Bt=$i.options.resizeMimeType;null==Bt&&(Bt=Ke.type);var ke=st.toDataURL(Bt,$i.options.resizeQuality);return("image/jpeg"===Bt||"image/jpg"===Bt)&&(ke=Bi.restore(Ke.dataURL,ke)),en(vt.dataURItoBlob(ke))})}},{key:"createThumbnail",value:function(Ke,rt,Ot,ci,en,$i){var En=this,st=new FileReader;st.onload=function(){Ke.dataURL=st.result,"image/svg+xml"!==Ke.type?En.createThumbnailFromUrl(Ke,rt,Ot,ci,en,$i):$i?.(st.result)},st.readAsDataURL(Ke)}},{key:"displayExistingFile",value:function(Ke,rt,Ot,ci){var en=this,$i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",Ke),this.emit("complete",Ke),$i){Ke.dataURL=rt,this.createThumbnailFromUrl(Ke,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(Bt){en.emit("thumbnail",Ke,Bt),Ot&&Ot()},ci)}else this.emit("thumbnail",Ke,rt),Ot&&Ot()}},{key:"createThumbnailFromUrl",value:function(Ke,rt,Ot,ci,en,$i,En){var st=this,Bt=document.createElement("img");return En&&(Bt.crossOrigin=En),en="from-image"!=getComputedStyle(document.body).imageOrientation&&en,Bt.onload=function(){var ke=function(jt){return jt(1)};return typeof EXIF<"u"&&null!==EXIF&&en&&(ke=function(jt){return EXIF.getData(Bt,function(){return jt(EXIF.getTag(this,"Orientation"))})}),ke(function(wt){Ke.width=Bt.width,Ke.height=Bt.height;var jt=st.options.resize.call(st,Ke,rt,Ot,ci),Xe=document.createElement("canvas"),Qt=Xe.getContext("2d");switch(Xe.width=jt.trgWidth,Xe.height=jt.trgHeight,wt>4&&(Xe.width=jt.trgHeight,Xe.height=jt.trgWidth),wt){case 2:Qt.translate(Xe.width,0),Qt.scale(-1,1);break;case 3:Qt.translate(Xe.width,Xe.height),Qt.rotate(Math.PI);break;case 4:Qt.translate(0,Xe.height),Qt.scale(1,-1);break;case 5:Qt.rotate(.5*Math.PI),Qt.scale(1,-1);break;case 6:Qt.rotate(.5*Math.PI),Qt.translate(0,-Xe.width);break;case 7:Qt.rotate(.5*Math.PI),Qt.translate(Xe.height,-Xe.width),Qt.scale(-1,1);break;case 8:Qt.rotate(-.5*Math.PI),Qt.translate(-Xe.height,0)}Mt(Qt,Bt,null!=jt.srcX?jt.srcX:0,null!=jt.srcY?jt.srcY:0,jt.srcWidth,jt.srcHeight,null!=jt.trgX?jt.trgX:0,null!=jt.trgY?jt.trgY:0,jt.trgWidth,jt.trgHeight);var ve=Xe.toDataURL("image/png");if(null!=$i)return $i(ve,Xe)})},null!=$i&&(Bt.onerror=$i),Bt.src=Ke.dataURL}},{key:"processQueue",value:function(){var Ke=this.options.parallelUploads,rt=this.getUploadingFiles().length,Ot=rt;if(!(rt>=Ke)){var ci=this.getQueuedFiles();if(ci.length>0){if(this.options.uploadMultiple)return this.processFiles(ci.slice(0,Ke-rt));for(;Ot<Ke;){if(!ci.length)return;this.processFile(ci.shift()),Ot++}}}}},{key:"processFile",value:function(Ke){return this.processFiles([Ke])}},{key:"processFiles",value:function(Ke){var Ot,rt=xr(Ke,!0);try{for(rt.s();!(Ot=rt.n()).done;){var ci=Ot.value;ci.processing=!0,ci.status=vt.UPLOADING,this.emit("processing",ci)}}catch(en){rt.e(en)}finally{rt.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",Ke),this.uploadFiles(Ke)}},{key:"_getFilesWithXhr",value:function(Ke){return this.files.filter(function(Ot){return Ot.xhr===Ke}).map(function(Ot){return Ot})}},{key:"cancelUpload",value:function(Ke){if(Ke.status===vt.UPLOADING){var ci,rt=this._getFilesWithXhr(Ke.xhr),Ot=xr(rt,!0);try{for(Ot.s();!(ci=Ot.n()).done;)ci.value.status=vt.CANCELED}catch(Bt){Ot.e(Bt)}finally{Ot.f()}typeof Ke.xhr<"u"&&Ke.xhr.abort();var En,$i=xr(rt,!0);try{for($i.s();!(En=$i.n()).done;)this.emit("canceled",En.value)}catch(Bt){$i.e(Bt)}finally{$i.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",rt)}else(Ke.status===vt.ADDED||Ke.status===vt.QUEUED)&&(Ke.status=vt.CANCELED,this.emit("canceled",Ke),this.options.uploadMultiple&&this.emit("canceledmultiple",[Ke]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(Ke){if("function"==typeof Ke){for(var rt=arguments.length,Ot=new Array(rt>1?rt-1:0),ci=1;ci<rt;ci++)Ot[ci-1]=arguments[ci];return Ke.apply(this,Ot)}return Ke}},{key:"uploadFile",value:function(Ke){return this.uploadFiles([Ke])}},{key:"uploadFiles",value:function(Ke){var rt=this;this._transformFiles(Ke,function(Ot){if(rt.options.chunking){var ci=Ot[0];Ke[0].upload.chunked=rt.options.chunking&&(rt.options.forceChunking||ci.size>rt.options.chunkSize),Ke[0].upload.totalChunkCount=Math.ceil(ci.size/rt.options.chunkSize)}if(Ke[0].upload.chunked){var en=Ke[0],$i=Ot[0];en.upload.chunks=[];var st=function(){for(var Xe=0;void 0!==en.upload.chunks[Xe];)Xe++;if(!(Xe>=en.upload.totalChunkCount)){var Qt=Xe*rt.options.chunkSize,ve=Math.min(Qt+rt.options.chunkSize,$i.size),l={name:rt._getParamName(0),data:$i.webkitSlice?$i.webkitSlice(Qt,ve):$i.slice(Qt,ve),filename:en.upload.filename,chunkIndex:Xe};en.upload.chunks[Xe]={file:en,index:Xe,dataBlock:l,status:vt.UPLOADING,progress:0,retries:0},rt._uploadData(Ke,[l])}};if(en.upload.finishedChunkUpload=function(jt,Xe){var Qt=!0;jt.status=vt.SUCCESS,jt.dataBlock=null,jt.xhr=null;for(var ve=0;ve<en.upload.totalChunkCount;ve++){if(void 0===en.upload.chunks[ve])return st();en.upload.chunks[ve].status!==vt.SUCCESS&&(Qt=!1)}Qt&&rt.options.chunksUploaded(en,function(){rt._finished(Ke,Xe,null)})},rt.options.parallelChunkUploads)for(var Bt=0;Bt<en.upload.totalChunkCount;Bt++)st();else st()}else{for(var ke=[],wt=0;wt<Ke.length;wt++)ke[wt]={name:rt._getParamName(wt),data:Ot[wt],filename:Ke[wt].upload.filename};rt._uploadData(Ke,ke)}})}},{key:"_getChunk",value:function(Ke,rt){for(var Ot=0;Ot<Ke.upload.totalChunkCount;Ot++)if(void 0!==Ke.upload.chunks[Ot]&&Ke.upload.chunks[Ot].xhr===rt)return Ke.upload.chunks[Ot]}},{key:"_uploadData",value:function(Ke,rt){var $i,Ot=this,ci=new XMLHttpRequest,en=xr(Ke,!0);try{for(en.s();!($i=en.n()).done;)$i.value.xhr=ci}catch(Z){en.e(Z)}finally{en.f()}Ke[0].upload.chunked&&(Ke[0].upload.chunks[rt[0].chunkIndex].xhr=ci);var st=this.resolveOption(this.options.method,Ke),Bt=this.resolveOption(this.options.url,Ke);ci.open(st,Bt,!0),this.resolveOption(this.options.timeout,Ke)&&(ci.timeout=this.resolveOption(this.options.timeout,Ke)),ci.withCredentials=!!this.options.withCredentials,ci.onload=function(Z){Ot._finishedUploading(Ke,ci,Z)},ci.ontimeout=function(){Ot._handleUploadError(Ke,ci,"Request timedout after ".concat(Ot.options.timeout/1e3," seconds"))},ci.onerror=function(){Ot._handleUploadError(Ke,ci)},(null!=ci.upload?ci.upload:ci).onprogress=function(Z){return Ot._updateFilesUploadProgress(Ke,ci,Z)};var jt={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Xe in this.options.headers&&vt.extend(jt,this.options.headers),jt){var Qt=jt[Xe];Qt&&ci.setRequestHeader(Xe,Qt)}var ve=new FormData;if(this.options.params){var l=this.options.params;for(var u in"function"==typeof l&&(l=l.call(this,Ke,ci,Ke[0].upload.chunked?this._getChunk(Ke[0],ci):null)),l){var m=l[u];if(Array.isArray(m))for(var x=0;x<m.length;x++)ve.append(u,m[x]);else ve.append(u,m)}}var E,w=xr(Ke,!0);try{for(w.s();!(E=w.n()).done;)this.emit("sending",E.value,ci,ve)}catch(Z){w.e(Z)}finally{w.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",Ke,ci,ve),this._addFormElementData(ve);for(var N=0;N<rt.length;N++){var H=rt[N];ve.append(H.name,H.data,H.filename)}this.submitRequest(ci,ve,Ke)}},{key:"_transformFiles",value:function(Ke,rt){for(var Ot=this,ci=[],en=0,$i=function(Bt){Ot.options.transformFile.call(Ot,Ke[Bt],function(ke){ci[Bt]=ke,++en===Ke.length&&rt(ci)})},En=0;En<Ke.length;En++)$i(En)}},{key:"_addFormElementData",value:function(Ke){if("FORM"===this.element.tagName){var Ot,rt=xr(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(rt.s();!(Ot=rt.n()).done;){var ci=Ot.value,en=ci.getAttribute("name"),$i=ci.getAttribute("type");if($i&&($i=$i.toLowerCase()),!(typeof en>"u"||null===en))if("SELECT"===ci.tagName&&ci.hasAttribute("multiple")){var st,En=xr(ci.options,!0);try{for(En.s();!(st=En.n()).done;){var Bt=st.value;Bt.selected&&Ke.append(en,Bt.value)}}catch(ke){En.e(ke)}finally{En.f()}}else(!$i||"checkbox"!==$i&&"radio"!==$i||ci.checked)&&Ke.append(en,ci.value)}}catch(ke){rt.e(ke)}finally{rt.f()}}}},{key:"_updateFilesUploadProgress",value:function(Ke,rt,Ot){if(Ke[0].upload.chunked){var En=Ke[0],st=this._getChunk(En,rt);Ot?(st.progress=100*Ot.loaded/Ot.total,st.total=Ot.total,st.bytesSent=Ot.loaded):(st.progress=100,st.bytesSent=st.total),En.upload.progress=0,En.upload.total=0,En.upload.bytesSent=0;for(var Bt=0;Bt<En.upload.totalChunkCount;Bt++)En.upload.chunks[Bt]&&typeof En.upload.chunks[Bt].progress<"u"&&(En.upload.progress+=En.upload.chunks[Bt].progress,En.upload.total+=En.upload.chunks[Bt].total,En.upload.bytesSent+=En.upload.chunks[Bt].bytesSent);En.upload.progress=En.upload.progress/En.upload.totalChunkCount,this.emit("uploadprogress",En,En.upload.progress,En.upload.bytesSent)}else{var en,ci=xr(Ke,!0);try{for(ci.s();!(en=ci.n()).done;){var $i=en.value;$i.upload.total&&$i.upload.bytesSent&&$i.upload.bytesSent==$i.upload.total||(Ot?($i.upload.progress=100*Ot.loaded/Ot.total,$i.upload.total=Ot.total,$i.upload.bytesSent=Ot.loaded):($i.upload.progress=100,$i.upload.bytesSent=$i.upload.total),this.emit("uploadprogress",$i,$i.upload.progress,$i.upload.bytesSent))}}catch(ke){ci.e(ke)}finally{ci.f()}}}},{key:"_finishedUploading",value:function(Ke,rt,Ot){var ci;if(Ke[0].status!==vt.CANCELED&&4===rt.readyState){if("arraybuffer"!==rt.responseType&&"blob"!==rt.responseType&&(ci=rt.responseText,rt.getResponseHeader("content-type")&&~rt.getResponseHeader("content-type").indexOf("application/json")))try{ci=JSON.parse(ci)}catch(en){Ot=en,ci="Invalid JSON response from server."}this._updateFilesUploadProgress(Ke,rt),200<=rt.status&&rt.status<300?Ke[0].upload.chunked?Ke[0].upload.finishedChunkUpload(this._getChunk(Ke[0],rt),ci):this._finished(Ke,ci,Ot):this._handleUploadError(Ke,rt,ci)}}},{key:"_handleUploadError",value:function(Ke,rt,Ot){if(Ke[0].status!==vt.CANCELED){if(Ke[0].upload.chunked&&this.options.retryChunks){var ci=this._getChunk(Ke[0],rt);if(ci.retries++<this.options.retryChunksLimit)return void this._uploadData(Ke,[ci.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(Ke,Ot||this.options.dictResponseError.replace("{{statusCode}}",rt.status),rt)}}},{key:"submitRequest",value:function(Ke,rt,Ot){1==Ke.readyState?Ke.send(rt):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(Ke,rt,Ot){var en,ci=xr(Ke,!0);try{for(ci.s();!(en=ci.n()).done;){var $i=en.value;$i.status=vt.SUCCESS,this.emit("success",$i,rt,Ot),this.emit("complete",$i)}}catch(En){ci.e(En)}finally{ci.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",Ke,rt,Ot),this.emit("completemultiple",Ke)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(Ke,rt,Ot){var en,ci=xr(Ke,!0);try{for(ci.s();!(en=ci.n()).done;){var $i=en.value;$i.status=vt.ERROR,this.emit("error",$i,rt,Ot),this.emit("complete",$i)}}catch(En){ci.e(En)}finally{ci.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",Ke,rt,Ot),this.emit("completemultiple",Ke)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=Vn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(Ke){for(var rt=arguments.length,Ot=new Array(rt>1?rt-1:0),ci=1;ci<rt;ci++)Ot[ci-1]=arguments[ci];for(var en=0,$i=Ot;en<$i.length;en++){var En=$i[en];for(var st in En)Ke[st]=En[st]}return Ke}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ke){var rt=16*Math.random()|0;return("x"===Ke?rt:3&rt|8).toString(16)})}}]),vt}(Vn);kt.initClass(),kt.version="5.9.3",kt.options={},kt.optionsForElement=function(Yt){if(Yt.getAttribute("id"))return kt.options[Ci(Yt.getAttribute("id"))]},kt.instances=[],kt.forElement=function(Yt){if("string"==typeof Yt&&(Yt=document.querySelector(Yt)),null==Yt?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return Yt.dropzone},kt.autoDiscover=!0,kt.discover=function(){var Yt;if(document.querySelectorAll)Yt=document.querySelectorAll(".dropzone");else{Yt=[];var Ut=function(pt){return function(){var Ot,Ke=[],rt=xr(pt,!0);try{for(rt.s();!(Ot=rt.n()).done;){var ci=Ot.value;/(^| )dropzone($| )/.test(ci.className)?Ke.push(Yt.push(ci)):Ke.push(void 0)}}catch(en){rt.e(en)}finally{rt.f()}return Ke}()};Ut(document.getElementsByTagName("div")),Ut(document.getElementsByTagName("form"))}return function(){var Ke,vt=[],pt=xr(Yt,!0);try{for(pt.s();!(Ke=pt.n()).done;){var rt=Ke.value;!1!==kt.optionsForElement(rt)?vt.push(new kt(rt)):vt.push(void 0)}}catch(Ot){pt.e(Ot)}finally{pt.f()}return vt}()},kt.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],kt.isBrowserSupported=function(){var Yt=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==kt.blacklistedBrowsers&&(kt.blockedBrowsers=kt.blacklistedBrowsers);var vt,Ut=xr(kt.blockedBrowsers,!0);try{for(Ut.s();!(vt=Ut.n()).done;)vt.value.test(navigator.userAgent)&&(Yt=!1)}catch(Ke){Ut.e(Ke)}finally{Ut.f()}}else Yt=!1;else Yt=!1;return Yt},kt.dataURItoBlob=function(Yt){for(var Ut=atob(Yt.split(",")[1]),vt=Yt.split(",")[0].split(":")[1].split(";")[0],pt=new ArrayBuffer(Ut.length),Ke=new Uint8Array(pt),rt=0,Ot=Ut.length,ci=0<=Ot;ci?rt<=Ot:rt>=Ot;ci?rt++:rt--)Ke[rt]=Ut.charCodeAt(rt);return new Blob([pt],{type:vt})};var ai=function(Ut,vt){return Ut.filter(function(pt){return pt!==vt}).map(function(pt){return pt})},Ci=function(Ut){return Ut.replace(/[\-_](\w)/g,function(vt){return vt.charAt(1).toUpperCase()})};kt.createElement=function(Yt){var Ut=document.createElement("div");return Ut.innerHTML=Yt,Ut.childNodes[0]},kt.elementInside=function(Yt,Ut){if(Yt===Ut)return!0;for(;Yt=Yt.parentNode;)if(Yt===Ut)return!0;return!1},kt.getElement=function(Yt,Ut){var vt;if("string"==typeof Yt?vt=document.querySelector(Yt):null!=Yt.nodeType&&(vt=Yt),null==vt)throw new Error("Invalid `".concat(Ut,"` option provided. Please provide a CSS selector or a plain HTML element."));return vt},kt.getElements=function(Yt,Ut){var pt;if(Yt instanceof Array){pt=[];try{var rt,Ke=xr(Yt,!0);try{for(Ke.s();!(rt=Ke.n()).done;)pt.push(this.getElement(rt.value,Ut))}catch(en){Ke.e(en)}finally{Ke.f()}}catch{pt=null}}else if("string"==typeof Yt){pt=[];var ci,Ot=xr(document.querySelectorAll(Yt),!0);try{for(Ot.s();!(ci=Ot.n()).done;)pt.push(ci.value)}catch(en){Ot.e(en)}finally{Ot.f()}}else null!=Yt.nodeType&&(pt=[Yt]);if(null==pt||!pt.length)throw new Error("Invalid `".concat(Ut,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return pt},kt.confirm=function(Yt,Ut,vt){return window.confirm(Yt)?Ut():null!=vt?vt():void 0},kt.isValidFile=function(Yt,Ut){if(!Ut)return!0;Ut=Ut.split(",");var rt,vt=Yt.type,pt=vt.replace(/\/.*$/,""),Ke=xr(Ut,!0);try{for(Ke.s();!(rt=Ke.n()).done;){var Ot=rt.value;if("."===(Ot=Ot.trim()).charAt(0)){if(-1!==Yt.name.toLowerCase().indexOf(Ot.toLowerCase(),Yt.name.length-Ot.length))return!0}else if(/\/\*$/.test(Ot)){if(pt===Ot.replace(/\/.*$/,""))return!0}else if(vt===Ot)return!0}}catch(ci){Ke.e(ci)}finally{Ke.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(Yt){return this.each(function(){return new kt(this,Yt)})}),kt.ADDED="added",kt.QUEUED="queued",kt.ACCEPTED=kt.QUEUED,kt.UPLOADING="uploading",kt.PROCESSING=kt.UPLOADING,kt.CANCELED="canceled",kt.ERROR="error",kt.SUCCESS="success";var Mt=function(Ut,vt,pt,Ke,rt,Ot,ci,en,$i,En){var st=function(Ut){var pt=Ut.naturalHeight,Ke=document.createElement("canvas");Ke.width=1,Ke.height=pt;var rt=Ke.getContext("2d");rt.drawImage(Ut,0,0);for(var ci=rt.getImageData(1,0,1,pt).data,en=0,$i=pt,En=pt;En>en;)0===ci[4*(En-1)+3]?$i=En:en=En,En=$i+en>>1;var Bt=En/pt;return 0===Bt?1:Bt}(vt);return Ut.drawImage(vt,pt,Ke,rt,Ot,ci,en,$i,En/st)},Bi=function(){function Yt(){go(this,Yt)}return Aa(Yt,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(vt){for(var pt="",Ke=void 0,rt=void 0,Ot="",ci=void 0,en=void 0,$i=void 0,En="",st=0;ci=(Ke=vt[st++])>>2,en=(3&Ke)<<4|(rt=vt[st++])>>4,$i=(15&rt)<<2|(Ot=vt[st++])>>6,En=63&Ot,isNaN(rt)?$i=En=64:isNaN(Ot)&&(En=64),pt=pt+this.KEY_STR.charAt(ci)+this.KEY_STR.charAt(en)+this.KEY_STR.charAt($i)+this.KEY_STR.charAt(En),Ke=rt=Ot="",ci=en=$i=En="",st<vt.length;);return pt}},{key:"restore",value:function(vt,pt){if(!vt.match("data:image/jpeg;base64,"))return pt;var Ke=this.decode64(vt.replace("data:image/jpeg;base64,","")),rt=this.slice2Segments(Ke),Ot=this.exifManipulation(pt,rt);return"data:image/jpeg;base64,".concat(this.encode64(Ot))}},{key:"exifManipulation",value:function(vt,pt){var Ke=this.getExifArray(pt),rt=this.insertExif(vt,Ke);return new Uint8Array(rt)}},{key:"getExifArray",value:function(vt){for(var pt=void 0,Ke=0;Ke<vt.length;){if(255===(pt=vt[Ke])[0]&225===pt[1])return pt;Ke++}return[]}},{key:"insertExif",value:function(vt,pt){var Ke=vt.replace("data:image/jpeg;base64,",""),rt=this.decode64(Ke),Ot=rt.indexOf(255,3),ci=rt.slice(0,Ot),en=rt.slice(Ot),$i=ci;return($i=$i.concat(pt)).concat(en)}},{key:"slice2Segments",value:function(vt){for(var pt=0,Ke=[];!(255===vt[pt]&218===vt[pt+1]);){if(255===vt[pt]&216===vt[pt+1])pt+=2;else{var Ot=pt+(256*vt[pt+2]+vt[pt+3])+2,ci=vt.slice(pt,Ot);Ke.push(ci),pt=Ot}if(pt>vt.length)break}return Ke}},{key:"decode64",value:function(vt){var rt=void 0,Ot="",ci=void 0,en=void 0,$i=void 0,En="",st=0,Bt=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(vt)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),vt=vt.replace(/[^A-Za-z0-9\+\/\=]/g,"");ci=this.KEY_STR.indexOf(vt.charAt(st++)),rt=(15&(en=this.KEY_STR.indexOf(vt.charAt(st++))))<<4|($i=this.KEY_STR.indexOf(vt.charAt(st++)))>>2,Ot=(3&$i)<<6|(En=this.KEY_STR.indexOf(vt.charAt(st++))),Bt.push(ci<<2|en>>4),64!==$i&&Bt.push(rt),64!==En&&Bt.push(Ot),rt=Ot="",ci=en=$i=En="",st<vt.length;);return Bt}}]),Yt}();Bi.initClass();kt._autoDiscoverFunction=function(){if(kt.autoDiscover)return kt.discover()},function(Ut,vt){var pt=!1,Ke=!0,rt=Ut.document,Ot=rt.documentElement,ci=rt.addEventListener?"addEventListener":"attachEvent",en=rt.addEventListener?"removeEventListener":"detachEvent",$i=rt.addEventListener?"":"on",En=function Bt(ke){if(("readystatechange"!==ke.type||"complete"===rt.readyState)&&(("load"===ke.type?Ut:rt)[en]($i+ke.type,Bt,!1),!pt&&(pt=!0)))return vt.call(Ut,ke.type||ke)};if("complete"!==rt.readyState){if(rt.createEventObject&&Ot.doScroll){try{Ke=!Ut.frameElement}catch{}Ke&&function Bt(){try{Ot.doScroll("left")}catch{return void setTimeout(Bt,50)}return En("poll")}()}rt[ci]($i+"DOMContentLoaded",En,!1),rt[ci]($i+"readystatechange",En,!1),Ut[ci]($i+"load",En,!1)}}(window,kt._autoDiscoverFunction),window.Dropzone=kt;var Qn=kt}(),xt}()},2880:function(uo,ja){var Zt,xt;void 0!==(xt="function"==typeof(Zt=function(){"use strict";function t(nt,at,Ct){var ot=new XMLHttpRequest;ot.open("GET",nt),ot.responseType="blob",ot.onload=function(){We(ot.response,at,Ct)},ot.onerror=function(){console.error("could not download file")},ot.send()}function j(nt){var at=new XMLHttpRequest;at.open("HEAD",nt,!1);try{at.send()}catch{}return 200<=at.status&&299>=at.status}function He(nt){try{nt.dispatchEvent(new MouseEvent("click"))}catch{var at=document.createEvent("MouseEvents");at.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),nt.dispatchEvent(at)}}var Be="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Me=Be.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),We=Be.saveAs||("object"!=typeof window||window!==Be?function(){}:"download"in HTMLAnchorElement.prototype&&!Me?function(nt,at,Ct){var ot=Be.URL||Be.webkitURL,Wt=document.createElement("a");Wt.download=at=at||nt.name||"download",Wt.rel="noopener","string"==typeof nt?(Wt.href=nt,Wt.origin===location.origin?He(Wt):j(Wt.href)?t(nt,at,Ct):He(Wt,Wt.target="_blank")):(Wt.href=ot.createObjectURL(nt),setTimeout(function(){ot.revokeObjectURL(Wt.href)},4e4),setTimeout(function(){He(Wt)},0))}:"msSaveOrOpenBlob"in navigator?function(nt,at,Ct){if(at=at||nt.name||"download","string"!=typeof nt)navigator.msSaveOrOpenBlob(function Ze(nt,at){return typeof at>"u"?at={autoBom:!1}:"object"!=typeof at&&(console.warn("Deprecated: Expected third argument to be a object"),at={autoBom:!at}),at.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(nt.type)?new Blob(["\ufeff",nt],{type:nt.type}):nt}(nt,Ct),at);else if(j(nt))t(nt,at,Ct);else{var ot=document.createElement("a");ot.href=nt,ot.target="_blank",setTimeout(function(){He(ot)})}}:function(nt,at,Ct,ot){if((ot=ot||open("","_blank"))&&(ot.document.title=ot.document.body.innerText="downloading..."),"string"==typeof nt)return t(nt,at,Ct);var Wt="application/octet-stream"===nt.type,et=/constructor/i.test(Be.HTMLElement)||Be.safari,lt=/CriOS\/[\d]+/.test(navigator.userAgent);if((lt||Wt&&et||Me)&&typeof FileReader<"u"){var gt=new FileReader;gt.onloadend=function(){var yi=gt.result;yi=lt?yi:yi.replace(/^data:[^;]*;/,"data:attachment/file;"),ot?ot.location.href=yi:location=yi,ot=null},gt.readAsDataURL(nt)}else{var _i=Be.URL||Be.webkitURL,tt=_i.createObjectURL(nt);ot?ot.location=tt:location.href=tt,ot=null,setTimeout(function(){_i.revokeObjectURL(tt)},4e4)}});Be.saveAs=We.saveAs=We,uo.exports=We})?Zt.apply(ja,[]):Zt)&&(uo.exports=xt)},9280:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(uo){for(var ja=[],Zt=1;Zt<arguments.length;Zt++)ja[Zt-1]=arguments[Zt];if(!uo)throw TypeError("Cannot convert undefined or null to object");for(var T=function(j){j&&Object.keys(j).forEach(function(He){return uo[He]=j[He]})},xt=0,Ze=ja;xt<Ze.length;xt++)T(Ze[xt]);return uo})},9216:function(uo,ja){!function(Zt){"use strict";function xt(v){var O,W,he,Ie;for(W=1,he=arguments.length;W<he;W++)for(O in Ie=arguments[W])v[O]=Ie[O];return v}var Ze=Object.create||function(){function v(){}return function(O){return v.prototype=O,new v}}();function t(v,O){var W=Array.prototype.slice;if(v.bind)return v.bind.apply(v,W.call(arguments,1));var he=W.call(arguments,2);return function(){return v.apply(O,he.length?he.concat(W.call(arguments)):arguments)}}var j=0;function He(v){return"_leaflet_id"in v||(v._leaflet_id=++j),v._leaflet_id}function Be(v,O,W){var he,Ie,Ye,ni;return ni=function(){he=!1,Ie&&(Ye.apply(W,Ie),Ie=!1)},Ye=function(){he?Ie=arguments:(v.apply(W,arguments),setTimeout(ni,O),he=!0)},Ye}function Me(v,O,W){var he=O[1],Ie=O[0],Ye=he-Ie;return v===he&&W?v:((v-Ie)%Ye+Ye)%Ye+Ie}function We(){return!1}function nt(v,O){if(!1===O)return v;var W=Math.pow(10,void 0===O?6:O);return Math.round(v*W)/W}function at(v){return v.trim?v.trim():v.replace(/^\s+|\s+$/g,"")}function Ct(v){return at(v).split(/\s+/)}function ot(v,O){for(var W in Object.prototype.hasOwnProperty.call(v,"options")||(v.options=v.options?Ze(v.options):{}),O)v.options[W]=O[W];return v.options}function Wt(v,O,W){var he=[];for(var Ie in v)he.push(encodeURIComponent(W?Ie.toUpperCase():Ie)+"="+encodeURIComponent(v[Ie]));return(O&&-1!==O.indexOf("?")?"&":"?")+he.join("&")}var et=/\{ *([\w_ -]+) *\}/g;function lt(v,O){return v.replace(et,function(W,he){var Ie=O[he];if(void 0===Ie)throw new Error("No value provided for variable "+W);return"function"==typeof Ie&&(Ie=Ie(O)),Ie})}var gt=Array.isArray||function(v){return"[object Array]"===Object.prototype.toString.call(v)};function _i(v,O){for(var W=0;W<v.length;W++)if(v[W]===O)return W;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function yi(v){return window["webkit"+v]||window["moz"+v]||window["ms"+v]}var Pi=0;function Dt(v){var O=+new Date,W=Math.max(0,16-(O-Pi));return Pi=O+W,window.setTimeout(v,W)}var Fi=window.requestAnimationFrame||yi("RequestAnimationFrame")||Dt,xi=window.cancelAnimationFrame||yi("CancelAnimationFrame")||yi("CancelRequestAnimationFrame")||function(v){window.clearTimeout(v)};function fi(v,O,W){if(!W||Fi!==Dt)return Fi.call(window,t(v,O));v.call(O)}function It(v){v&&xi.call(window,v)}var Si={__proto__:null,extend:xt,create:Ze,bind:t,get lastId(){return j},stamp:He,throttle:Be,wrapNum:Me,falseFn:We,formatNum:nt,trim:at,splitWords:Ct,setOptions:ot,getParamString:Wt,template:lt,isArray:gt,indexOf:_i,emptyImageUrl:tt,requestFn:Fi,cancelFn:xi,requestAnimFrame:fi,cancelAnimFrame:It};function Ni(){}Ni.extend=function(v){var O=function(){ot(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},W=O.__super__=this.prototype,he=Ze(W);for(var Ie in he.constructor=O,O.prototype=he,this)Object.prototype.hasOwnProperty.call(this,Ie)&&"prototype"!==Ie&&"__super__"!==Ie&&(O[Ie]=this[Ie]);return v.statics&&xt(O,v.statics),v.includes&&(function Zi(v){if(!(typeof L>"u")&&L&&L.Mixin){v=gt(v)?v:[v];for(var O=0;O<v.length;O++)v[O]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(v.includes),xt.apply(null,[he].concat(v.includes))),xt(he,v),delete he.statics,delete he.includes,he.options&&(he.options=W.options?Ze(W.options):{},xt(he.options,v.options)),he._initHooks=[],he.callInitHooks=function(){if(!this._initHooksCalled){W.callInitHooks&&W.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ye=0,ni=he._initHooks.length;Ye<ni;Ye++)he._initHooks[Ye].call(this)}},O},Ni.include=function(v){var O=this.prototype.options;return xt(this.prototype,v),v.options&&(this.prototype.options=O,this.mergeOptions(v.options)),this},Ni.mergeOptions=function(v){return xt(this.prototype.options,v),this},Ni.addInitHook=function(v){var O=Array.prototype.slice.call(arguments,1),W="function"==typeof v?v:function(){this[v].apply(this,O)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(W),this};var Rn={on:function(v,O,W){if("object"==typeof v)for(var he in v)this._on(he,v[he],O);else for(var Ie=0,Ye=(v=Ct(v)).length;Ie<Ye;Ie++)this._on(v[Ie],O,W);return this},off:function(v,O,W){if(arguments.length)if("object"==typeof v)for(var he in v)this._off(he,v[he],O);else{v=Ct(v);for(var Ie=1===arguments.length,Ye=0,ni=v.length;Ye<ni;Ye++)Ie?this._off(v[Ye]):this._off(v[Ye],O,W)}else delete this._events;return this},_on:function(v,O,W,he){if("function"==typeof O){if(!1===this._listens(v,O,W)){W===this&&(W=void 0);var Ie={fn:O,ctx:W};he&&(Ie.once=!0),this._events=this._events||{},this._events[v]=this._events[v]||[],this._events[v].push(Ie)}}else console.warn("wrong listener type: "+typeof O)},_off:function(v,O,W){var he,Ie,Ye;if(this._events&&(he=this._events[v])){if(1===arguments.length){if(this._firingCount)for(Ie=0,Ye=he.length;Ie<Ye;Ie++)he[Ie].fn=We;return void delete this._events[v]}if("function"!=typeof O)return void console.warn("wrong listener type: "+typeof O);var ni=this._listens(v,O,W);!1!==ni&&(this._firingCount&&(he[ni].fn=We,this._events[v]=he=he.slice()),he.splice(ni,1))}},fire:function(v,O,W){if(!this.listens(v,W))return this;var he=xt({},O,{type:v,target:this,sourceTarget:O&&O.sourceTarget||this});if(this._events){var Ie=this._events[v];if(Ie){this._firingCount=this._firingCount+1||1;for(var Ye=0,ni=Ie.length;Ye<ni;Ye++){var Ri=Ie[Ye],on=Ri.fn;Ri.once&&this.off(v,on,Ri.ctx),on.call(Ri.ctx||this,he)}this._firingCount--}}return W&&this._propagateEvent(he),this},listens:function(v,O,W,he){"string"!=typeof v&&console.warn('"string" type argument expected');var Ie=O;"function"!=typeof O&&(he=!!O,Ie=void 0,W=void 0);var Ye=this._events&&this._events[v];if(Ye&&Ye.length&&!1!==this._listens(v,Ie,W))return!0;if(he)for(var ni in this._eventParents)if(this._eventParents[ni].listens(v,O,W,he))return!0;return!1},_listens:function(v,O,W){if(!this._events)return!1;var he=this._events[v]||[];if(!O)return!!he.length;W===this&&(W=void 0);for(var Ie=0,Ye=he.length;Ie<Ye;Ie++)if(he[Ie].fn===O&&he[Ie].ctx===W)return Ie;return!1},once:function(v,O,W){if("object"==typeof v)for(var he in v)this._on(he,v[he],O,!0);else for(var Ie=0,Ye=(v=Ct(v)).length;Ie<Ye;Ie++)this._on(v[Ie],O,W,!0);return this},addEventParent:function(v){return this._eventParents=this._eventParents||{},this._eventParents[He(v)]=v,this},removeEventParent:function(v){return this._eventParents&&delete this._eventParents[He(v)],this},_propagateEvent:function(v){for(var O in this._eventParents)this._eventParents[O].fire(v.type,xt({layer:v.target,propagatedFrom:v.target},v),!0)}};Rn.addEventListener=Rn.on,Rn.removeEventListener=Rn.clearAllEventListeners=Rn.off,Rn.addOneTimeEventListener=Rn.once,Rn.fireEvent=Rn.fire,Rn.hasEventListeners=Rn.listens;var Ki=Ni.extend(Rn);function tn(v,O,W){this.x=W?Math.round(v):v,this.y=W?Math.round(O):O}var yn=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};function Nn(v,O,W){return v instanceof tn?v:gt(v)?new tn(v[0],v[1]):null==v?v:"object"==typeof v&&"x"in v&&"y"in v?new tn(v.x,v.y):new tn(v,O,W)}function yr(v,O){if(v)for(var W=O?[v,O]:v,he=0,Ie=W.length;he<Ie;he++)this.extend(W[he])}function fr(v,O){return!v||v instanceof yr?v:new yr(v,O)}function Nr(v,O){if(v)for(var W=O?[v,O]:v,he=0,Ie=W.length;he<Ie;he++)this.extend(W[he])}function Mi(v,O){return v instanceof Nr?v:new Nr(v,O)}function In(v,O,W){if(isNaN(v)||isNaN(O))throw new Error("Invalid LatLng object: ("+v+", "+O+")");this.lat=+v,this.lng=+O,void 0!==W&&(this.alt=+W)}function Jn(v,O,W){return v instanceof In?v:gt(v)&&"object"!=typeof v[0]?3===v.length?new In(v[0],v[1],v[2]):2===v.length?new In(v[0],v[1]):null:null==v?v:"object"==typeof v&&"lat"in v?new In(v.lat,"lng"in v?v.lng:v.lon,v.alt):void 0===O?null:new In(v,O,W)}tn.prototype={clone:function(){return new tn(this.x,this.y)},add:function(v){return this.clone()._add(Nn(v))},_add:function(v){return this.x+=v.x,this.y+=v.y,this},subtract:function(v){return this.clone()._subtract(Nn(v))},_subtract:function(v){return this.x-=v.x,this.y-=v.y,this},divideBy:function(v){return this.clone()._divideBy(v)},_divideBy:function(v){return this.x/=v,this.y/=v,this},multiplyBy:function(v){return this.clone()._multiplyBy(v)},_multiplyBy:function(v){return this.x*=v,this.y*=v,this},scaleBy:function(v){return new tn(this.x*v.x,this.y*v.y)},unscaleBy:function(v){return new tn(this.x/v.x,this.y/v.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=yn(this.x),this.y=yn(this.y),this},distanceTo:function(v){var O=(v=Nn(v)).x-this.x,W=v.y-this.y;return Math.sqrt(O*O+W*W)},equals:function(v){return(v=Nn(v)).x===this.x&&v.y===this.y},contains:function(v){return v=Nn(v),Math.abs(v.x)<=Math.abs(this.x)&&Math.abs(v.y)<=Math.abs(this.y)},toString:function(){return"Point("+nt(this.x)+", "+nt(this.y)+")"}},yr.prototype={extend:function(v){var O,W;if(!v)return this;if(v instanceof tn||"number"==typeof v[0]||"x"in v)O=W=Nn(v);else if(W=(v=fr(v)).max,!(O=v.min)||!W)return this;return this.min||this.max?(this.min.x=Math.min(O.x,this.min.x),this.max.x=Math.max(W.x,this.max.x),this.min.y=Math.min(O.y,this.min.y),this.max.y=Math.max(W.y,this.max.y)):(this.min=O.clone(),this.max=W.clone()),this},getCenter:function(v){return Nn((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,v)},getBottomLeft:function(){return Nn(this.min.x,this.max.y)},getTopRight:function(){return Nn(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(v){var O,W;return(v="number"==typeof v[0]||v instanceof tn?Nn(v):fr(v))instanceof yr?(O=v.min,W=v.max):O=W=v,O.x>=this.min.x&&W.x<=this.max.x&&O.y>=this.min.y&&W.y<=this.max.y},intersects:function(v){v=fr(v);var O=this.min,W=this.max,he=v.min,Ie=v.max;return Ie.x>=O.x&&he.x<=W.x&&Ie.y>=O.y&&he.y<=W.y},overlaps:function(v){v=fr(v);var O=this.min,W=this.max,he=v.min,Ie=v.max;return Ie.x>O.x&&he.x<W.x&&Ie.y>O.y&&he.y<W.y},isValid:function(){return!(!this.min||!this.max)},pad:function(v){var O=this.min,W=this.max,he=Math.abs(O.x-W.x)*v,Ie=Math.abs(O.y-W.y)*v;return fr(Nn(O.x-he,O.y-Ie),Nn(W.x+he,W.y+Ie))},equals:function(v){return!!v&&(v=fr(v),this.min.equals(v.getTopLeft())&&this.max.equals(v.getBottomRight()))}},Nr.prototype={extend:function(v){var he,Ie,O=this._southWest,W=this._northEast;if(v instanceof In)he=v,Ie=v;else{if(!(v instanceof Nr))return v?this.extend(Jn(v)||Mi(v)):this;if(Ie=v._northEast,!(he=v._southWest)||!Ie)return this}return O||W?(O.lat=Math.min(he.lat,O.lat),O.lng=Math.min(he.lng,O.lng),W.lat=Math.max(Ie.lat,W.lat),W.lng=Math.max(Ie.lng,W.lng)):(this._southWest=new In(he.lat,he.lng),this._northEast=new In(Ie.lat,Ie.lng)),this},pad:function(v){var O=this._southWest,W=this._northEast,he=Math.abs(O.lat-W.lat)*v,Ie=Math.abs(O.lng-W.lng)*v;return new Nr(new In(O.lat-he,O.lng-Ie),new In(W.lat+he,W.lng+Ie))},getCenter:function(){return new In((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new In(this.getNorth(),this.getWest())},getSouthEast:function(){return new In(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(v){v="number"==typeof v[0]||v instanceof In||"lat"in v?Jn(v):Mi(v);var he,Ie,O=this._southWest,W=this._northEast;return v instanceof Nr?(he=v.getSouthWest(),Ie=v.getNorthEast()):he=Ie=v,he.lat>=O.lat&&Ie.lat<=W.lat&&he.lng>=O.lng&&Ie.lng<=W.lng},intersects:function(v){v=Mi(v);var O=this._southWest,W=this._northEast,he=v.getSouthWest(),Ie=v.getNorthEast();return Ie.lat>=O.lat&&he.lat<=W.lat&&Ie.lng>=O.lng&&he.lng<=W.lng},overlaps:function(v){v=Mi(v);var O=this._southWest,W=this._northEast,he=v.getSouthWest(),Ie=v.getNorthEast();return Ie.lat>O.lat&&he.lat<W.lat&&Ie.lng>O.lng&&he.lng<W.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(v,O){return!!v&&(v=Mi(v),this._southWest.equals(v.getSouthWest(),O)&&this._northEast.equals(v.getNorthEast(),O))},isValid:function(){return!(!this._southWest||!this._northEast)}},In.prototype={equals:function(v,O){return!!v&&(v=Jn(v),Math.max(Math.abs(this.lat-v.lat),Math.abs(this.lng-v.lng))<=(void 0===O?1e-9:O))},toString:function(v){return"LatLng("+nt(this.lat,v)+", "+nt(this.lng,v)+")"},distanceTo:function(v){return jr.distance(this,Jn(v))},wrap:function(){return jr.wrapLatLng(this)},toBounds:function(v){var O=180*v/40075017,W=O/Math.cos(Math.PI/180*this.lat);return Mi([this.lat-O,this.lng-W],[this.lat+O,this.lng+W])},clone:function(){return new In(this.lat,this.lng,this.alt)}};var v,ia={latLngToPoint:function(v,O){var W=this.projection.project(v),he=this.scale(O);return this.transformation._transform(W,he)},pointToLatLng:function(v,O){var W=this.scale(O),he=this.transformation.untransform(v,W);return this.projection.unproject(he)},project:function(v){return this.projection.project(v)},unproject:function(v){return this.projection.unproject(v)},scale:function(v){return 256*Math.pow(2,v)},zoom:function(v){return Math.log(v/256)/Math.LN2},getProjectedBounds:function(v){if(this.infinite)return null;var O=this.projection.bounds,W=this.scale(v);return new yr(this.transformation.transform(O.min,W),this.transformation.transform(O.max,W))},infinite:!1,wrapLatLng:function(v){var O=this.wrapLng?Me(v.lng,this.wrapLng,!0):v.lng;return new In(this.wrapLat?Me(v.lat,this.wrapLat,!0):v.lat,O,v.alt)},wrapLatLngBounds:function(v){var O=v.getCenter(),W=this.wrapLatLng(O),he=O.lat-W.lat,Ie=O.lng-W.lng;if(0===he&&0===Ie)return v;var Ye=v.getSouthWest(),ni=v.getNorthEast();return new Nr(new In(Ye.lat-he,Ye.lng-Ie),new In(ni.lat-he,ni.lng-Ie))}},jr=xt({},ia,{wrapLng:[-180,180],R:6371e3,distance:function(v,O){var W=Math.PI/180,he=v.lat*W,Ie=O.lat*W,Ye=Math.sin((O.lat-v.lat)*W/2),ni=Math.sin((O.lng-v.lng)*W/2),Ri=Ye*Ye+Math.cos(he)*Math.cos(Ie)*ni*ni,on=2*Math.atan2(Math.sqrt(Ri),Math.sqrt(1-Ri));return this.R*on}}),Mn={R:6378137,MAX_LATITUDE:85.0511287798,project:function(v){var O=Math.PI/180,W=this.MAX_LATITUDE,he=Math.max(Math.min(W,v.lat),-W),Ie=Math.sin(he*O);return new tn(this.R*v.lng*O,this.R*Math.log((1+Ie)/(1-Ie))/2)},unproject:function(v){var O=180/Math.PI;return new In((2*Math.atan(Math.exp(v.y/this.R))-Math.PI/2)*O,v.x*O/this.R)},bounds:(v=6378137*Math.PI,new yr([-v,-v],[v,v]))};function Ya(v,O,W,he){if(gt(v))return this._a=v[0],this._b=v[1],this._c=v[2],void(this._d=v[3]);this._a=v,this._b=O,this._c=W,this._d=he}function ka(v,O,W,he){return new Ya(v,O,W,he)}Ya.prototype={transform:function(v,O){return this._transform(v.clone(),O)},_transform:function(v,O){return v.x=(O=O||1)*(this._a*v.x+this._b),v.y=O*(this._c*v.y+this._d),v},untransform:function(v,O){return new tn((v.x/(O=O||1)-this._b)/this._a,(v.y/O-this._d)/this._c)}};var Ma=xt({},jr,{code:"EPSG:3857",projection:Mn,transformation:function(){var v=.5/(Math.PI*Mn.R);return ka(v,.5,-v,.5)}()}),pr=xt({},Ma,{code:"EPSG:900913"});function $n(v){return document.createElementNS("http://www.w3.org/2000/svg",v)}function ar(v,O){var he,Ie,Ye,ni,Ri,on,W="";for(he=0,Ye=v.length;he<Ye;he++){for(Ie=0,ni=(Ri=v[he]).length;Ie<ni;Ie++)W+=(Ie?"L":"M")+(on=Ri[Ie]).x+" "+on.y;W+=O?pt.svg?"z":"x":""}return W||"M0 0"}var Sn=document.documentElement.style,Dn="ActiveXObject"in window,Gr=Dn&&!document.addEventListener,Vn="msLaunchUri"in navigator&&!("documentMode"in document),rn=vt("webkit"),ur=vt("android"),lr=vt("android 2")||vt("android 3"),Pa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ga=ur&&vt("Google")&&Pa<537&&!("AudioNode"in window),Ja=!!window.opera,Ra=!Vn&&vt("chrome"),ha=vt("gecko")&&!rn&&!Ja&&!Dn,xr=!Ra&&vt("safari"),da=vt("phantom"),Mr="OTransition"in Sn,go=0===navigator.platform.indexOf("Win"),Dr=Dn&&"transition"in Sn,Aa="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lr,fa="MozPerspective"in Sn,Ia=!window.L_DISABLE_3D&&(Dr||Aa||fa)&&!Mr&&!da,Fa=typeof orientation<"u"||vt("mobile"),Et=Fa&&rn,je=Fa&&Aa,Je=!window.PointerEvent&&window.MSPointerEvent,At=!(!window.PointerEvent&&!Je),kt="ontouchstart"in window||!!window.TouchEvent,ai=!window.L_NO_TOUCH&&(kt||At),Ci=Fa&&Ja,Ii=Fa&&ha,Mt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bi=function(){var v=!1;try{var O=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("testPassiveEventSupport",We,O),window.removeEventListener("testPassiveEventSupport",We,O)}catch{}return v}(),On=!!document.createElement("canvas").getContext,_n=!(!document.createElementNS||!$n("svg").createSVGRect),Vi=!!_n&&function(){var v=document.createElement("div");return v.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(v.firstChild&&v.firstChild.namespaceURI)}(),Qn=!_n&&function(){try{var v=document.createElement("div");v.innerHTML='<v:shape adj="1"/>';var O=v.firstChild;return O.style.behavior="url(#default#VML)",O&&"object"==typeof O.adj}catch{return!1}}();function vt(v){return navigator.userAgent.toLowerCase().indexOf(v)>=0}var pt={ie:Dn,ielt9:Gr,edge:Vn,webkit:rn,android:ur,android23:lr,androidStock:Ga,opera:Ja,chrome:Ra,gecko:ha,safari:xr,phantom:da,opera12:Mr,win:go,ie3d:Dr,webkit3d:Aa,gecko3d:fa,any3d:Ia,mobile:Fa,mobileWebkit:Et,mobileWebkit3d:je,msPointer:Je,pointer:At,touch:ai,touchNative:kt,mobileOpera:Ci,mobileGecko:Ii,retina:Mt,passiveEvents:Bi,canvas:On,svg:_n,vml:Qn,inlineSvg:Vi,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Ke=pt.msPointer?"MSPointerDown":"pointerdown",rt=pt.msPointer?"MSPointerMove":"pointermove",Ot=pt.msPointer?"MSPointerUp":"pointerup",ci=pt.msPointer?"MSPointerCancel":"pointercancel",en={touchstart:Ke,touchmove:rt,touchend:Ot,touchcancel:ci},$i={touchstart:function l(v,O){O.MSPOINTER_TYPE_TOUCH&&O.pointerType===O.MSPOINTER_TYPE_TOUCH&&fs(O),ve(v,O)},touchmove:ve,touchend:ve,touchcancel:ve},En={},st=!1;function Bt(v,O,W){return"touchstart"===O&&function Qt(){st||(document.addEventListener(Ke,wt,!0),document.addEventListener(rt,jt,!0),document.addEventListener(Ot,Xe,!0),document.addEventListener(ci,Xe,!0),st=!0)}(),$i[O]?(W=$i[O].bind(this,W),v.addEventListener(en[O],W,!1),W):(console.warn("wrong event specified:",O),We)}function wt(v){En[v.pointerId]=v}function jt(v){En[v.pointerId]&&(En[v.pointerId]=v)}function Xe(v){delete En[v.pointerId]}function ve(v,O){if(O.pointerType!==(O.MSPOINTER_TYPE_MOUSE||"mouse")){for(var W in O.touches=[],En)O.touches.push(En[W]);O.changedTouches=[O],v(O)}}var m=200;var Li,Ji,ln,pa,la,E=$e(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),M=$e(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),N="webkitTransition"===M||"OTransition"===M?M+"End":"transitionend";function H(v){return"string"==typeof v?document.getElementById(v):v}function Z(v,O){var W=v.style[O]||v.currentStyle&&v.currentStyle[O];if((!W||"auto"===W)&&document.defaultView){var he=document.defaultView.getComputedStyle(v,null);W=he?he[O]:null}return"auto"===W?null:W}function J(v,O,W){var he=document.createElement(v);return he.className=O||"",W&&W.appendChild(he),he}function ne(v){var O=v.parentNode;O&&O.removeChild(v)}function fe(v){for(;v.firstChild;)v.removeChild(v.firstChild)}function ye(v){var O=v.parentNode;O&&O.lastChild!==v&&O.appendChild(v)}function De(v){var O=v.parentNode;O&&O.firstChild!==v&&O.insertBefore(v,O.firstChild)}function Pe(v,O){if(void 0!==v.classList)return v.classList.contains(O);var W=le(v);return W.length>0&&new RegExp("(^|\\s)"+O+"(\\s|$)").test(W)}function Se(v,O){if(void 0!==v.classList)for(var W=Ct(O),he=0,Ie=W.length;he<Ie;he++)v.classList.add(W[he]);else if(!Pe(v,O)){var Ye=le(v);U(v,(Ye?Ye+" ":"")+O)}}function ze(v,O){void 0!==v.classList?v.classList.remove(O):U(v,at((" "+le(v)+" ").replace(" "+O+" "," ")))}function U(v,O){void 0===v.className.baseVal?v.className=O:v.className.baseVal=O}function le(v){return v.correspondingElement&&(v=v.correspondingElement),void 0===v.className.baseVal?v.className:v.className.baseVal}function we(v,O){"opacity"in v.style?v.style.opacity=O:"filter"in v.style&&function Le(v,O){var W=!1,he="DXImageTransform.Microsoft.Alpha";try{W=v.filters.item(he)}catch{if(1===O)return}O=Math.round(100*O),W?(W.Enabled=100!==O,W.Opacity=O):v.style.filter+=" progid:"+he+"(opacity="+O+")"}(v,O)}function $e(v){for(var O=document.documentElement.style,W=0;W<v.length;W++)if(v[W]in O)return v[W];return!1}function mt(v,O,W){var he=O||new tn(0,0);v.style[E]=(pt.ie3d?"translate("+he.x+"px,"+he.y+"px)":"translate3d("+he.x+"px,"+he.y+"px,0)")+(W?" scale("+W+")":"")}function $t(v,O){v._leaflet_pos=O,pt.any3d?mt(v,O):(v.style.left=O.x+"px",v.style.top=O.y+"px")}function Xt(v){return v._leaflet_pos||new tn(0,0)}if("onselectstart"in document)Li=function(){Qr(window,"selectstart",fs)},Ji=function(){na(window,"selectstart",fs)};else{var Un=$e(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Li=function(){if(Un){var v=document.documentElement.style;ln=v[Un],v[Un]="none"}},Ji=function(){Un&&(document.documentElement.style[Un]=ln,ln=void 0)}}function cr(){Qr(window,"dragstart",fs)}function Wr(){na(window,"dragstart",fs)}function Ta(v){for(;-1===v.tabIndex;)v=v.parentNode;v.style&&(es(),pa=v,la=v.style.outlineStyle,v.style.outlineStyle="none",Qr(window,"keydown",es))}function es(){pa&&(pa.style.outlineStyle=la,pa=void 0,la=void 0,na(window,"keydown",es))}function ms(v){do{v=v.parentNode}while(!(v.offsetWidth&&v.offsetHeight||v===document.body));return v}function Is(v){var O=v.getBoundingClientRect();return{x:O.width/v.offsetWidth||1,y:O.height/v.offsetHeight||1,boundingClientRect:O}}var va={__proto__:null,TRANSFORM:E,TRANSITION:M,TRANSITION_END:N,get:H,getStyle:Z,create:J,remove:ne,empty:fe,toFront:ye,toBack:De,hasClass:Pe,addClass:Se,removeClass:ze,setClass:U,getClass:le,setOpacity:we,testProp:$e,setTransform:mt,setPosition:$t,getPosition:Xt,get disableTextSelection(){return Li},get enableTextSelection(){return Ji},disableImageDrag:cr,enableImageDrag:Wr,preventOutline:Ta,restoreOutline:es,getSizedParentNode:ms,getScale:Is};function Qr(v,O,W,he){if(O&&"object"==typeof O)for(var Ie in O)Pc(v,Ie,O[Ie],W);else for(var Ye=0,ni=(O=Ct(O)).length;Ye<ni;Ye++)Pc(v,O[Ye],W,he);return this}var Ms="_leaflet_events";function na(v,O,W,he){if(1===arguments.length)Ns(v),delete v[Ms];else if(O&&"object"==typeof O)for(var Ie in O)Ws(v,Ie,O[Ie],W);else if(O=Ct(O),2===arguments.length)Ns(v,function(Ri){return-1!==_i(O,Ri)});else for(var Ye=0,ni=O.length;Ye<ni;Ye++)Ws(v,O[Ye],W,he);return this}function Ns(v,O){for(var W in v[Ms]){var he=W.split(/\d/)[0];(!O||O(he))&&Ws(v,he,null,null,W)}}var Ku={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pc(v,O,W,he){var Ie=O+He(W)+(he?"_"+He(he):"");if(v[Ms]&&v[Ms][Ie])return this;var Ye=function(Ri){return W.call(he||v,Ri||window.event)},ni=Ye;!pt.touchNative&&pt.pointer&&0===O.indexOf("touch")?Ye=Bt(v,O,Ye):pt.touch&&"dblclick"===O?Ye=function x(v,O){v.addEventListener("dblclick",O);var he,W=0;function Ie(Ye){if(1===Ye.detail){if("mouse"!==Ye.pointerType&&(!Ye.sourceCapabilities||Ye.sourceCapabilities.firesTouchEvents)){var ni=Zs(Ye);if(!ni.some(function(on){return on instanceof HTMLLabelElement&&on.attributes.for})||ni.some(function(on){return on instanceof HTMLInputElement||on instanceof HTMLSelectElement})){var Ri=Date.now();Ri-W<=m?2==++he&&O(function u(v){var W,he,O={};for(he in v)O[he]=(W=v[he])&&W.bind?W.bind(v):W;return v=O,O.type="dblclick",O.detail=2,O.isTrusted=!1,O._simulated=!0,O}(Ye)):he=1,W=Ri}}}else he=Ye.detail}return v.addEventListener("click",Ie),{dblclick:O,simDblclick:Ie}}(v,Ye):"addEventListener"in v?"touchstart"===O||"touchmove"===O||"wheel"===O||"mousewheel"===O?v.addEventListener(Ku[O]||O,Ye,!!pt.passiveEvents&&{passive:!1}):"mouseenter"===O||"mouseleave"===O?v.addEventListener(Ku[O],Ye=function(Ri){Ri=Ri||window.event,Xd(v,Ri)&&ni(Ri)},!1):v.addEventListener(O,ni,!1):v.attachEvent("on"+O,Ye),v[Ms]=v[Ms]||{},v[Ms][Ie]=Ye}function Ws(v,O,W,he,Ie){Ie=Ie||O+He(W)+(he?"_"+He(he):"");var Ye=v[Ms]&&v[Ms][Ie];if(!Ye)return this;!pt.touchNative&&pt.pointer&&0===O.indexOf("touch")?function ke(v,O,W){en[O]?v.removeEventListener(en[O],W,!1):console.warn("wrong event specified:",O)}(v,O,Ye):pt.touch&&"dblclick"===O?function w(v,O){v.removeEventListener("dblclick",O.dblclick),v.removeEventListener("click",O.simDblclick)}(v,Ye):"removeEventListener"in v?v.removeEventListener(Ku[O]||O,Ye,!1):v.detachEvent("on"+O,Ye),v[Ms][Ie]=null}function xc(v){return v.stopPropagation?v.stopPropagation():v.originalEvent?v.originalEvent._stopped=!0:v.cancelBubble=!0,this}function Rd(v){return Pc(v,"wheel",xc),this}function $r(v){return Qr(v,"mousedown touchstart dblclick contextmenu",xc),v._leaflet_disable_click=!0,this}function fs(v){return v.preventDefault?v.preventDefault():v.returnValue=!1,this}function Rl(v){return fs(v),xc(v),this}function Zs(v){if(v.composedPath)return v.composedPath();for(var O=[],W=v.target;W;)O.push(W),W=W.parentNode;return O}function gs(v,O){if(!O)return new tn(v.clientX,v.clientY);var W=Is(O),he=W.boundingClientRect;return new tn((v.clientX-he.left)/W.x-O.clientLeft,(v.clientY-he.top)/W.y-O.clientTop)}var Fc=pt.linux&&pt.chrome?window.devicePixelRatio:pt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function no(v){return pt.edge?v.wheelDeltaY/2:v.deltaY&&0===v.deltaMode?-v.deltaY/Fc:v.deltaY&&1===v.deltaMode?20*-v.deltaY:v.deltaY&&2===v.deltaMode?60*-v.deltaY:v.deltaX||v.deltaZ?0:v.wheelDelta?(v.wheelDeltaY||v.wheelDelta)/2:v.detail&&Math.abs(v.detail)<32765?20*-v.detail:v.detail?v.detail/-32765*60:0}function Xd(v,O){var W=O.relatedTarget;if(!W)return!0;try{for(;W&&W!==v;)W=W.parentNode}catch{return!1}return W!==v}var Od={__proto__:null,on:Qr,off:na,stopPropagation:xc,disableScrollPropagation:Rd,disableClickPropagation:$r,preventDefault:fs,stop:Rl,getPropagationPath:Zs,getMousePosition:gs,getWheelDelta:no,isExternalTarget:Xd,addListener:Qr,removeListener:na},uu=Ki.extend({run:function(v,O,W,he){this.stop(),this._el=v,this._inProgress=!0,this._duration=W||.25,this._easeOutPower=1/Math.max(he||.5,.2),this._startPos=Xt(v),this._offset=O.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=fi(this._animate,this),this._step()},_step:function(v){var O=+new Date-this._startTime,W=1e3*this._duration;O<W?this._runFrame(this._easeOut(O/W),v):(this._runFrame(1),this._complete())},_runFrame:function(v,O){var W=this._startPos.add(this._offset.multiplyBy(v));O&&W._round(),$t(this._el,W),this.fire("step")},_complete:function(){It(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(v){return 1-Math.pow(1-v,this._easeOutPower)}}),Xa=Ki.extend({options:{crs:Ma,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(v,O){O=ot(this,O),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(v),this._initLayout(),this._onResize=t(this._onResize,this),this._initEvents(),O.maxBounds&&this.setMaxBounds(O.maxBounds),void 0!==O.zoom&&(this._zoom=this._limitZoom(O.zoom)),O.center&&void 0!==O.zoom&&this.setView(Jn(O.center),O.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=M&&pt.any3d&&!pt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qr(this._proxy,N,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(v,O,W){return O=void 0===O?this._zoom:this._limitZoom(O),v=this._limitCenter(Jn(v),O,this.options.maxBounds),W=W||{},this._stop(),this._loaded&&!W.reset&&!0!==W&&(void 0!==W.animate&&(W.zoom=xt({animate:W.animate},W.zoom),W.pan=xt({animate:W.animate,duration:W.duration},W.pan)),this._zoom!==O?this._tryAnimatedZoom&&this._tryAnimatedZoom(v,O,W.zoom):this._tryAnimatedPan(v,W.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(v,O,W.pan&&W.pan.noMoveStart),this)},setZoom:function(v,O){return this._loaded?this.setView(this.getCenter(),v,{zoom:O}):(this._zoom=v,this)},zoomIn:function(v,O){return this.setZoom(this._zoom+(v=v||(pt.any3d?this.options.zoomDelta:1)),O)},zoomOut:function(v,O){return this.setZoom(this._zoom-(v=v||(pt.any3d?this.options.zoomDelta:1)),O)},setZoomAround:function(v,O,W){var he=this.getZoomScale(O),Ie=this.getSize().divideBy(2),ni=(v instanceof tn?v:this.latLngToContainerPoint(v)).subtract(Ie).multiplyBy(1-1/he),Ri=this.containerPointToLatLng(Ie.add(ni));return this.setView(Ri,O,{zoom:W})},_getBoundsCenterZoom:function(v,O){O=O||{},v=v.getBounds?v.getBounds():Mi(v);var W=Nn(O.paddingTopLeft||O.padding||[0,0]),he=Nn(O.paddingBottomRight||O.padding||[0,0]),Ie=this.getBoundsZoom(v,!1,W.add(he));if((Ie="number"==typeof O.maxZoom?Math.min(O.maxZoom,Ie):Ie)===1/0)return{center:v.getCenter(),zoom:Ie};var Ye=he.subtract(W).divideBy(2),ni=this.project(v.getSouthWest(),Ie),Ri=this.project(v.getNorthEast(),Ie);return{center:this.unproject(ni.add(Ri).divideBy(2).add(Ye),Ie),zoom:Ie}},fitBounds:function(v,O){if(!(v=Mi(v)).isValid())throw new Error("Bounds are not valid.");var W=this._getBoundsCenterZoom(v,O);return this.setView(W.center,W.zoom,O)},fitWorld:function(v){return this.fitBounds([[-90,-180],[90,180]],v)},panTo:function(v,O){return this.setView(v,this._zoom,{pan:O})},panBy:function(v,O){if(O=O||{},!(v=Nn(v).round()).x&&!v.y)return this.fire("moveend");if(!0!==O.animate&&!this.getSize().contains(v))return this._resetView(this.unproject(this.project(this.getCenter()).add(v)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new uu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),O.noMoveStart||this.fire("movestart"),!1!==O.animate){Se(this._mapPane,"leaflet-pan-anim");var W=this._getMapPanePos().subtract(v).round();this._panAnim.run(this._mapPane,W,O.duration||.25,O.easeLinearity)}else this._rawPanBy(v),this.fire("move").fire("moveend");return this},flyTo:function(v,O,W){if(!1===(W=W||{}).animate||!pt.any3d)return this.setView(v,O,W);this._stop();var he=this.project(this.getCenter()),Ie=this.project(v),Ye=this.getSize(),ni=this._zoom;v=Jn(v),O=void 0===O?ni:O;var Ri=Math.max(Ye.x,Ye.y),on=Ri*this.getZoomScale(ni,O),Zn=Ie.distanceTo(he)||1,Ar=1.42,gr=Ar*Ar;function Ha(Ge){var xn=(on*on-Ri*Ri+(Ge?-1:1)*gr*gr*Zn*Zn)/(2*(Ge?on:Ri)*gr*Zn),vr=Math.sqrt(xn*xn+1)-xn;return vr<1e-9?-18:Math.log(vr)}function is(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function xo(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}var To=Ha(0);function Hc(Ge){return Ri*(xo(To)*function Va(Ge){return is(Ge)/xo(Ge)}(To+Ar*Ge)-is(To))/gr}var xa=Date.now(),Go=(Ha(1)-To)/Ar,ba=W.duration?1e3*W.duration:1e3*Go*.8;return this._moveStart(!0,W.noMoveStart),function ls(){var Ge=(Date.now()-xa)/ba,se=function Qa(Ge){return 1-Math.pow(1-Ge,1.5)}(Ge)*Go;Ge<=1?(this._flyToFrame=fi(ls,this),this._move(this.unproject(he.add(Ie.subtract(he).multiplyBy(Hc(se)/Zn)),ni),this.getScaleZoom(Ri/function Hl(Ge){return Ri*(xo(To)/xo(To+Ar*Ge))}(se),ni),{flyTo:!0})):this._move(v,O)._moveEnd(!0)}.call(this),this},flyToBounds:function(v,O){var W=this._getBoundsCenterZoom(v,O);return this.flyTo(W.center,W.zoom,O)},setMaxBounds:function(v){return v=Mi(v),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),v.isValid()?(this.options.maxBounds=v,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(v){var O=this.options.minZoom;return this.options.minZoom=v,this._loaded&&O!==v&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(v):this},setMaxZoom:function(v){var O=this.options.maxZoom;return this.options.maxZoom=v,this._loaded&&O!==v&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(v):this},panInsideBounds:function(v,O){this._enforcingBounds=!0;var W=this.getCenter(),he=this._limitCenter(W,this._zoom,Mi(v));return W.equals(he)||this.panTo(he,O),this._enforcingBounds=!1,this},panInside:function(v,O){var W=Nn((O=O||{}).paddingTopLeft||O.padding||[0,0]),he=Nn(O.paddingBottomRight||O.padding||[0,0]),Ie=this.project(this.getCenter()),Ye=this.project(v),ni=this.getPixelBounds(),Ri=fr([ni.min.add(W),ni.max.subtract(he)]),on=Ri.getSize();if(!Ri.contains(Ye)){this._enforcingBounds=!0;var Zn=Ye.subtract(Ri.getCenter()),Ar=Ri.extend(Ye).getSize().subtract(on);Ie.x+=Zn.x<0?-Ar.x:Ar.x,Ie.y+=Zn.y<0?-Ar.y:Ar.y,this.panTo(this.unproject(Ie),O),this._enforcingBounds=!1}return this},invalidateSize:function(v){if(!this._loaded)return this;v=xt({animate:!1,pan:!0},!0===v?{animate:!0}:v);var O=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var W=this.getSize(),he=O.divideBy(2).round(),Ie=W.divideBy(2).round(),Ye=he.subtract(Ie);return Ye.x||Ye.y?(v.animate&&v.pan?this.panBy(Ye):(v.pan&&this._rawPanBy(Ye),this.fire("move"),v.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(t(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:O,newSize:W})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(v){if(v=this._locateOptions=xt({timeout:1e4,watch:!1},v),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var O=t(this._handleGeolocationResponse,this),W=t(this._handleGeolocationError,this);return v.watch?this._locationWatchId=navigator.geolocation.watchPosition(O,W,v):navigator.geolocation.getCurrentPosition(O,W,v),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(v){if(this._container._leaflet_id){var O=v.code,W=v.message||(1===O?"permission denied":2===O?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:O,message:"Geolocation error: "+W+"."})}},_handleGeolocationResponse:function(v){if(this._container._leaflet_id){var he=new In(v.coords.latitude,v.coords.longitude),Ie=he.toBounds(2*v.coords.accuracy),Ye=this._locateOptions;if(Ye.setView){var ni=this.getBoundsZoom(Ie);this.setView(he,Ye.maxZoom?Math.min(ni,Ye.maxZoom):ni)}var Ri={latlng:he,bounds:Ie,timestamp:v.timestamp};for(var on in v.coords)"number"==typeof v.coords[on]&&(Ri[on]=v.coords[on]);this.fire("locationfound",Ri)}},addHandler:function(v,O){if(!O)return this;var W=this[v]=new O(this);return this._handlers.push(W),this.options[v]&&W.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var v;for(v in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(It(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[v].remove();for(v in this._panes)ne(this._panes[v]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(v,O){var he=J("div","leaflet-pane"+(v?" leaflet-"+v.replace("Pane","")+"-pane":""),O||this._mapPane);return v&&(this._panes[v]=he),he},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var v=this.getPixelBounds();return new Nr(this.unproject(v.getBottomLeft()),this.unproject(v.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(v,O,W){v=Mi(v),W=Nn(W||[0,0]);var he=this.getZoom()||0,Ie=this.getMinZoom(),Ye=this.getMaxZoom(),ni=v.getNorthWest(),Ri=v.getSouthEast(),on=this.getSize().subtract(W),Zn=fr(this.project(Ri,he),this.project(ni,he)).getSize(),Ar=pt.any3d?this.options.zoomSnap:1,gr=on.x/Zn.x,Ha=on.y/Zn.y,is=O?Math.max(gr,Ha):Math.min(gr,Ha);return he=this.getScaleZoom(is,he),Ar&&(he=Math.round(he/(Ar/100))*(Ar/100),he=O?Math.ceil(he/Ar)*Ar:Math.floor(he/Ar)*Ar),Math.max(Ie,Math.min(Ye,he))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new tn(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(v,O){var W=this._getTopLeftPoint(v,O);return new yr(W,W.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(v){return this.options.crs.getProjectedBounds(void 0===v?this.getZoom():v)},getPane:function(v){return"string"==typeof v?this._panes[v]:v},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(v,O){var W=this.options.crs;return O=void 0===O?this._zoom:O,W.scale(v)/W.scale(O)},getScaleZoom:function(v,O){var W=this.options.crs,he=W.zoom(v*W.scale(O=void 0===O?this._zoom:O));return isNaN(he)?1/0:he},project:function(v,O){return O=void 0===O?this._zoom:O,this.options.crs.latLngToPoint(Jn(v),O)},unproject:function(v,O){return O=void 0===O?this._zoom:O,this.options.crs.pointToLatLng(Nn(v),O)},layerPointToLatLng:function(v){var O=Nn(v).add(this.getPixelOrigin());return this.unproject(O)},latLngToLayerPoint:function(v){return this.project(Jn(v))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(v){return this.options.crs.wrapLatLng(Jn(v))},wrapLatLngBounds:function(v){return this.options.crs.wrapLatLngBounds(Mi(v))},distance:function(v,O){return this.options.crs.distance(Jn(v),Jn(O))},containerPointToLayerPoint:function(v){return Nn(v).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(v){return Nn(v).add(this._getMapPanePos())},containerPointToLatLng:function(v){var O=this.containerPointToLayerPoint(Nn(v));return this.layerPointToLatLng(O)},latLngToContainerPoint:function(v){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Jn(v)))},mouseEventToContainerPoint:function(v){return gs(v,this._container)},mouseEventToLayerPoint:function(v){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(v))},mouseEventToLatLng:function(v){return this.layerPointToLatLng(this.mouseEventToLayerPoint(v))},_initContainer:function(v){var O=this._container=H(v);if(!O)throw new Error("Map container not found.");if(O._leaflet_id)throw new Error("Map container is already initialized.");Qr(O,"scroll",this._onScroll,this),this._containerId=He(O)},_initLayout:function(){var v=this._container;this._fadeAnimated=this.options.fadeAnimation&&pt.any3d,Se(v,"leaflet-container"+(pt.touch?" leaflet-touch":"")+(pt.retina?" leaflet-retina":"")+(pt.ielt9?" leaflet-oldie":"")+(pt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var O=Z(v,"position");"absolute"!==O&&"relative"!==O&&"fixed"!==O&&"sticky"!==O&&(v.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var v=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$t(this._mapPane,new tn(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(v.markerPane,"leaflet-zoom-hide"),Se(v.shadowPane,"leaflet-zoom-hide"))},_resetView:function(v,O,W){$t(this._mapPane,new tn(0,0));var he=!this._loaded;this._loaded=!0,O=this._limitZoom(O),this.fire("viewprereset");var Ie=this._zoom!==O;this._moveStart(Ie,W)._move(v,O)._moveEnd(Ie),this.fire("viewreset"),he&&this.fire("load")},_moveStart:function(v,O){return v&&this.fire("zoomstart"),O||this.fire("movestart"),this},_move:function(v,O,W,he){void 0===O&&(O=this._zoom);var Ie=this._zoom!==O;return this._zoom=O,this._lastCenter=v,this._pixelOrigin=this._getNewPixelOrigin(v),he?W&&W.pinch&&this.fire("zoom",W):((Ie||W&&W.pinch)&&this.fire("zoom",W),this.fire("move",W)),this},_moveEnd:function(v){return v&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return It(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(v){$t(this._mapPane,this._getMapPanePos().subtract(v))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(v){this._targets={},this._targets[He(this._container)]=this;var O=v?na:Qr;O(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&O(window,"resize",this._onResize,this),pt.any3d&&this.options.transform3DLimit&&(v?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){It(this._resizeRequest),this._resizeRequest=fi(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var v=this._getMapPanePos();Math.max(Math.abs(v.x),Math.abs(v.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(v,O){for(var he,W=[],Ie="mouseout"===O||"mouseover"===O,Ye=v.target||v.srcElement,ni=!1;Ye;){if((he=this._targets[He(Ye)])&&("click"===O||"preclick"===O)&&this._draggableMoved(he)){ni=!0;break}if(he&&he.listens(O,!0)&&(Ie&&!Xd(Ye,v)||(W.push(he),Ie))||Ye===this._container)break;Ye=Ye.parentNode}return!W.length&&!ni&&!Ie&&this.listens(O,!0)&&(W=[this]),W},_isClickDisabled:function(v){for(;v&&v!==this._container;){if(v._leaflet_disable_click)return!0;v=v.parentNode}},_handleDOMEvent:function(v){var O=v.target||v.srcElement;if(!(!this._loaded||O._leaflet_disable_events||"click"===v.type&&this._isClickDisabled(O))){var W=v.type;"mousedown"===W&&Ta(O),this._fireDOMEvent(v,W)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(v,O,W){if("click"===v.type){var he=xt({},v);he.type="preclick",this._fireDOMEvent(he,he.type,W)}var Ie=this._findEventTargets(v,O);if(W){for(var Ye=[],ni=0;ni<W.length;ni++)W[ni].listens(O,!0)&&Ye.push(W[ni]);Ie=Ye.concat(Ie)}if(Ie.length){"contextmenu"===O&&fs(v);var Ri=Ie[0],on={originalEvent:v};if("keypress"!==v.type&&"keydown"!==v.type&&"keyup"!==v.type){var Zn=Ri.getLatLng&&(!Ri._radius||Ri._radius<=10);on.containerPoint=Zn?this.latLngToContainerPoint(Ri.getLatLng()):this.mouseEventToContainerPoint(v),on.layerPoint=this.containerPointToLayerPoint(on.containerPoint),on.latlng=Zn?Ri.getLatLng():this.layerPointToLatLng(on.layerPoint)}for(ni=0;ni<Ie.length;ni++)if(Ie[ni].fire(O,on,!0),on.originalEvent._stopped||!1===Ie[ni].options.bubblingMouseEvents&&-1!==_i(this._mouseEvents,O))return}},_draggableMoved:function(v){return(v=v.dragging&&v.dragging.enabled()?v:this).dragging&&v.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var v=0,O=this._handlers.length;v<O;v++)this._handlers[v].disable()},whenReady:function(v,O){return this._loaded?v.call(O||this,{target:this}):this.on("load",v,O),this},_getMapPanePos:function(){return Xt(this._mapPane)||new tn(0,0)},_moved:function(){var v=this._getMapPanePos();return v&&!v.equals([0,0])},_getTopLeftPoint:function(v,O){return(v&&void 0!==O?this._getNewPixelOrigin(v,O):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(v,O){var W=this.getSize()._divideBy(2);return this.project(v,O)._subtract(W)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(v,O,W){var he=this._getNewPixelOrigin(W,O);return this.project(v,O)._subtract(he)},_latLngBoundsToNewLayerBounds:function(v,O,W){var he=this._getNewPixelOrigin(W,O);return fr([this.project(v.getSouthWest(),O)._subtract(he),this.project(v.getNorthWest(),O)._subtract(he),this.project(v.getSouthEast(),O)._subtract(he),this.project(v.getNorthEast(),O)._subtract(he)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(v){return this.latLngToLayerPoint(v).subtract(this._getCenterLayerPoint())},_limitCenter:function(v,O,W){if(!W)return v;var he=this.project(v,O),Ie=this.getSize().divideBy(2),Ye=new yr(he.subtract(Ie),he.add(Ie)),ni=this._getBoundsOffset(Ye,W,O);return Math.abs(ni.x)<=1&&Math.abs(ni.y)<=1?v:this.unproject(he.add(ni),O)},_limitOffset:function(v,O){if(!O)return v;var W=this.getPixelBounds(),he=new yr(W.min.add(v),W.max.add(v));return v.add(this._getBoundsOffset(he,O))},_getBoundsOffset:function(v,O,W){var he=fr(this.project(O.getNorthEast(),W),this.project(O.getSouthWest(),W)),Ie=he.min.subtract(v.min),Ye=he.max.subtract(v.max);return new tn(this._rebound(Ie.x,-Ye.x),this._rebound(Ie.y,-Ye.y))},_rebound:function(v,O){return v+O>0?Math.round(v-O)/2:Math.max(0,Math.ceil(v))-Math.max(0,Math.floor(O))},_limitZoom:function(v){var O=this.getMinZoom(),W=this.getMaxZoom(),he=pt.any3d?this.options.zoomSnap:1;return he&&(v=Math.round(v/he)*he),Math.max(O,Math.min(W,v))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(v,O){var W=this._getCenterOffset(v)._trunc();return!(!0!==(O&&O.animate)&&!this.getSize().contains(W)||(this.panBy(W,O),0))},_createAnimProxy:function(){var v=this._proxy=J("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(v),this.on("zoomanim",function(O){var W=E,he=this._proxy.style[W];mt(this._proxy,this.project(O.center,O.zoom),this.getZoomScale(O.zoom,1)),he===this._proxy.style[W]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var v=this.getCenter(),O=this.getZoom();mt(this._proxy,this.project(v,O),this.getZoomScale(O,1))},_catchTransitionEnd:function(v){this._animatingZoom&&v.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(v,O,W){if(this._animatingZoom)return!0;if(W=W||{},!this._zoomAnimated||!1===W.animate||this._nothingToAnimate()||Math.abs(O-this._zoom)>this.options.zoomAnimationThreshold)return!1;var he=this.getZoomScale(O),Ie=this._getCenterOffset(v)._divideBy(1-1/he);return!(!0!==W.animate&&!this.getSize().contains(Ie)||(fi(function(){this._moveStart(!0,W.noMoveStart||!1)._animateZoom(v,O,!0)},this),0))},_animateZoom:function(v,O,W,he){this._mapPane&&(W&&(this._animatingZoom=!0,this._animateToCenter=v,this._animateToZoom=O,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:v,zoom:O,noUpdate:he}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(t(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Es=Ni.extend({options:{position:"topright"},initialize:function(v){ot(this,v)},getPosition:function(){return this.options.position},setPosition:function(v){var O=this._map;return O&&O.removeControl(this),this.options.position=v,O&&O.addControl(this),this},getContainer:function(){return this._container},addTo:function(v){this.remove(),this._map=v;var O=this._container=this.onAdd(v),W=this.getPosition(),he=v._controlCorners[W];return Se(O,"leaflet-control"),-1!==W.indexOf("bottom")?he.insertBefore(O,he.firstChild):he.appendChild(O),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(v){this._map&&v&&v.screenX>0&&v.screenY>0&&this._map.getContainer().focus()}}),ks=function(v){return new Es(v)};Xa.include({addControl:function(v){return v.addTo(this),this},removeControl:function(v){return v.remove(),this},_initControlPos:function(){var v=this._controlCorners={},O="leaflet-",W=this._controlContainer=J("div",O+"control-container",this._container);function he(Ie,Ye){v[Ie+Ye]=J("div",O+Ie+" "+O+Ye,W)}he("top","left"),he("top","right"),he("bottom","left"),he("bottom","right")},_clearControlPos:function(){for(var v in this._controlCorners)ne(this._controlCorners[v]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gd=Es.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(v,O,W,he){return W<he?-1:he<W?1:0}},initialize:function(v,O,W){for(var he in ot(this,W),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,v)this._addLayer(v[he],he);for(he in O)this._addLayer(O[he],he,!0)},onAdd:function(v){this._initLayout(),this._update(),this._map=v,v.on("zoomend",this._checkDisabledLayers,this);for(var O=0;O<this._layers.length;O++)this._layers[O].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(v){return Es.prototype.addTo.call(this,v),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(v,O){return this._addLayer(v,O),this._map?this._update():this},addOverlay:function(v,O){return this._addLayer(v,O,!0),this._map?this._update():this},removeLayer:function(v){v.off("add remove",this._onLayerChange,this);var O=this._getLayer(He(v));return O&&this._layers.splice(this._layers.indexOf(O),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var v=this._map.getSize().y-(this._container.offsetTop+50);return v<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=v+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var v="leaflet-control-layers",O=this._container=J("div",v),W=this.options.collapsed;O.setAttribute("aria-haspopup",!0),$r(O),Rd(O);var he=this._section=J("section",v+"-list");W&&(this._map.on("click",this.collapse,this),Qr(O,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ie=this._layersLink=J("a",v+"-toggle",O);Ie.href="#",Ie.title="Layers",Ie.setAttribute("role","button"),Qr(Ie,{keydown:function(Ye){13===Ye.keyCode&&this._expandSafely()},click:function(Ye){fs(Ye),this._expandSafely()}},this),W||this.expand(),this._baseLayersList=J("div",v+"-base",he),this._separator=J("div",v+"-separator",he),this._overlaysList=J("div",v+"-overlays",he),O.appendChild(he)},_getLayer:function(v){for(var O=0;O<this._layers.length;O++)if(this._layers[O]&&He(this._layers[O].layer)===v)return this._layers[O]},_addLayer:function(v,O,W){this._map&&v.on("add remove",this._onLayerChange,this),this._layers.push({layer:v,name:O,overlay:W}),this.options.sortLayers&&this._layers.sort(t(function(he,Ie){return this.options.sortFunction(he.layer,Ie.layer,he.name,Ie.name)},this)),this.options.autoZIndex&&v.setZIndex&&(this._lastZIndex++,v.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fe(this._baseLayersList),fe(this._overlaysList),this._layerControlInputs=[];var v,O,W,he,Ie=0;for(W=0;W<this._layers.length;W++)this._addItem(he=this._layers[W]),O=O||he.overlay,v=v||!he.overlay,Ie+=he.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(v=v&&Ie>1)?"":"none"),this._separator.style.display=O&&v?"":"none",this},_onLayerChange:function(v){this._handlingClick||this._update();var O=this._getLayer(He(v.target)),W=O.overlay?"add"===v.type?"overlayadd":"overlayremove":"add"===v.type?"baselayerchange":null;W&&this._map.fire(W,O)},_createRadioElement:function(v,O){var W='<input type="radio" class="leaflet-control-layers-selector" name="'+v+'"'+(O?' checked="checked"':"")+"/>",he=document.createElement("div");return he.innerHTML=W,he.firstChild},_addItem:function(v){var he,O=document.createElement("label"),W=this._map.hasLayer(v.layer);v.overlay?((he=document.createElement("input")).type="checkbox",he.className="leaflet-control-layers-selector",he.defaultChecked=W):he=this._createRadioElement("leaflet-base-layers_"+He(this),W),this._layerControlInputs.push(he),he.layerId=He(v.layer),Qr(he,"click",this._onInputClick,this);var Ie=document.createElement("span");Ie.innerHTML=" "+v.name;var Ye=document.createElement("span");return O.appendChild(Ye),Ye.appendChild(he),Ye.appendChild(Ie),(v.overlay?this._overlaysList:this._baseLayersList).appendChild(O),this._checkDisabledLayers(),O},_onInputClick:function(){if(!this._preventClick){var O,W,v=this._layerControlInputs,he=[],Ie=[];this._handlingClick=!0;for(var Ye=v.length-1;Ye>=0;Ye--)W=this._getLayer((O=v[Ye]).layerId).layer,O.checked?he.push(W):O.checked||Ie.push(W);for(Ye=0;Ye<Ie.length;Ye++)this._map.hasLayer(Ie[Ye])&&this._map.removeLayer(Ie[Ye]);for(Ye=0;Ye<he.length;Ye++)this._map.hasLayer(he[Ye])||this._map.addLayer(he[Ye]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var O,W,v=this._layerControlInputs,he=this._map.getZoom(),Ie=v.length-1;Ie>=0;Ie--)W=this._getLayer((O=v[Ie]).layerId).layer,O.disabled=void 0!==W.options.minZoom&&he<W.options.minZoom||void 0!==W.options.maxZoom&&he>W.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var v=this._section;this._preventClick=!0,Qr(v,"click",fs),this.expand();var O=this;setTimeout(function(){na(v,"click",fs),O._preventClick=!1})}}),Bc=Es.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(v){var O="leaflet-control-zoom",W=J("div",O+" leaflet-bar"),he=this.options;return this._zoomInButton=this._createButton(he.zoomInText,he.zoomInTitle,O+"-in",W,this._zoomIn),this._zoomOutButton=this._createButton(he.zoomOutText,he.zoomOutTitle,O+"-out",W,this._zoomOut),this._updateDisabled(),v.on("zoomend zoomlevelschange",this._updateDisabled,this),W},onRemove:function(v){v.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(v){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(v.shiftKey?3:1))},_zoomOut:function(v){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(v.shiftKey?3:1))},_createButton:function(v,O,W,he,Ie){var Ye=J("a",W,he);return Ye.innerHTML=v,Ye.href="#",Ye.title=O,Ye.setAttribute("role","button"),Ye.setAttribute("aria-label",O),$r(Ye),Qr(Ye,"click",Rl),Qr(Ye,"click",Ie,this),Qr(Ye,"click",this._refocusOnMap,this),Ye},_updateDisabled:function(){var v=this._map,O="leaflet-disabled";ze(this._zoomInButton,O),ze(this._zoomOutButton,O),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||v._zoom===v.getMinZoom())&&(Se(this._zoomOutButton,O),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||v._zoom===v.getMaxZoom())&&(Se(this._zoomInButton,O),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xa.mergeOptions({zoomControl:!0}),Xa.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Bc,this.addControl(this.zoomControl))});var No=Es.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(v){var O="leaflet-control-scale",W=J("div",O),he=this.options;return this._addScales(he,O+"-line",W),v.on(he.updateWhenIdle?"moveend":"move",this._update,this),v.whenReady(this._update,this),W},onRemove:function(v){v.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(v,O,W){v.metric&&(this._mScale=J("div",O,W)),v.imperial&&(this._iScale=J("div",O,W))},_update:function(){var v=this._map,O=v.getSize().y/2,W=v.distance(v.containerPointToLatLng([0,O]),v.containerPointToLatLng([this.options.maxWidth,O]));this._updateScales(W)},_updateScales:function(v){this.options.metric&&v&&this._updateMetric(v),this.options.imperial&&v&&this._updateImperial(v)},_updateMetric:function(v){var O=this._getRoundNum(v);this._updateScale(this._mScale,O<1e3?O+" m":O/1e3+" km",O/v)},_updateImperial:function(v){var W,he,Ie,O=3.2808399*v;O>5280?(he=this._getRoundNum(W=O/5280),this._updateScale(this._iScale,he+" mi",he/W)):(Ie=this._getRoundNum(O),this._updateScale(this._iScale,Ie+" ft",Ie/O))},_updateScale:function(v,O,W){v.style.width=Math.round(this.options.maxWidth*W)+"px",v.innerHTML=O},_getRoundNum:function(v){var O=Math.pow(10,(Math.floor(v)+"").length-1),W=v/O;return O*(W>=10?10:W>=5?5:W>=3?3:W>=2?2:1)}}),Cs=Es.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(pt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(v){ot(this,v),this._attributions={}},onAdd:function(v){for(var O in v.attributionControl=this,this._container=J("div","leaflet-control-attribution"),$r(this._container),v._layers)v._layers[O].getAttribution&&this.addAttribution(v._layers[O].getAttribution());return this._update(),v.on("layeradd",this._addAttribution,this),this._container},onRemove:function(v){v.off("layeradd",this._addAttribution,this)},_addAttribution:function(v){v.layer.getAttribution&&(this.addAttribution(v.layer.getAttribution()),v.layer.once("remove",function(){this.removeAttribution(v.layer.getAttribution())},this))},setPrefix:function(v){return this.options.prefix=v,this._update(),this},addAttribution:function(v){return v?(this._attributions[v]||(this._attributions[v]=0),this._attributions[v]++,this._update(),this):this},removeAttribution:function(v){return v?(this._attributions[v]&&(this._attributions[v]--,this._update()),this):this},_update:function(){if(this._map){var v=[];for(var O in this._attributions)this._attributions[O]&&v.push(O);var W=[];this.options.prefix&&W.push(this.options.prefix),v.length&&W.push(v.join(", ")),this._container.innerHTML=W.join(' <span aria-hidden="true">|</span> ')}}});Xa.mergeOptions({attributionControl:!0}),Xa.addInitHook(function(){this.options.attributionControl&&(new Cs).addTo(this)});Es.Layers=gd,Es.Zoom=Bc,Es.Scale=No,Es.Attribution=Cs,ks.layers=function(v,O,W){return new gd(v,O,W)},ks.zoom=function(v){return new Bc(v)},ks.scale=function(v){return new No(v)},ks.attribution=function(v){return new Cs(v)};var ts=Ni.extend({initialize:function(v){this._map=v},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ts.addTo=function(v,O){return v.addHandler(O,this),this};var ra={Events:Rn},bo=pt.touch?"touchstart mousedown":"mousedown",du=Ki.extend({options:{clickTolerance:3},initialize:function(v,O,W,he){ot(this,he),this._element=v,this._dragStartTarget=O||v,this._preventOutline=W},enable:function(){this._enabled||(Qr(this._dragStartTarget,bo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(du._dragging===this&&this.finishDrag(!0),na(this._dragStartTarget,bo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(v){if(this._enabled&&(this._moved=!1,!Pe(this._element,"leaflet-zoom-anim"))){if(v.touches&&1!==v.touches.length)return void(du._dragging===this&&this.finishDrag());if(!(du._dragging||v.shiftKey||1!==v.which&&1!==v.button&&!v.touches||(du._dragging=this,this._preventOutline&&Ta(this._element),cr(),Li(),this._moving))){this.fire("down");var O=v.touches?v.touches[0]:v,W=ms(this._element);this._startPoint=new tn(O.clientX,O.clientY),this._startPos=Xt(this._element),this._parentScale=Is(W);var he="mousedown"===v.type;Qr(document,he?"mousemove":"touchmove",this._onMove,this),Qr(document,he?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(v){if(this._enabled){if(v.touches&&v.touches.length>1)return void(this._moved=!0);var O=v.touches&&1===v.touches.length?v.touches[0]:v,W=new tn(O.clientX,O.clientY)._subtract(this._startPoint);!W.x&&!W.y||Math.abs(W.x)+Math.abs(W.y)<this.options.clickTolerance||(W.x/=this._parentScale.x,W.y/=this._parentScale.y,fs(v),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=v.target||v.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(W),this._moving=!0,this._lastEvent=v,this._updatePosition())}},_updatePosition:function(){var v={originalEvent:this._lastEvent};this.fire("predrag",v),$t(this._element,this._newPos),this.fire("drag",v)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(v){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),na(document,"mousemove touchmove",this._onMove,this),na(document,"mouseup touchend touchcancel",this._onUp,this),Wr(),Ji();var O=this._moved&&this._moving;this._moving=!1,du._dragging=!1,O&&this.fire("dragend",{noInertia:v,distance:this._newPos.distanceTo(this._startPos)})}});function zo(v,O,W){var he,Ye,ni,Ri,on,Zn,Ar,gr,Ha,Ie=[1,4,2,8];for(Ye=0,Ar=v.length;Ye<Ar;Ye++)v[Ye]._code=Js(v[Ye],O);for(Ri=0;Ri<4;Ri++){for(gr=Ie[Ri],he=[],Ye=0,ni=(Ar=v.length)-1;Ye<Ar;ni=Ye++)Zn=v[ni],(on=v[Ye])._code&gr?Zn._code&gr||((Ha=ed(Zn,on,gr,O,W))._code=Js(Ha,O),he.push(Ha)):(Zn._code&gr&&((Ha=ed(Zn,on,gr,O,W))._code=Js(Ha,O),he.push(Ha)),he.push(on));v=he}return v}function Zd(v,O){var W,he,Ie,Ye,ni,Ri,on,Zn;if(!v||0===v.length)throw new Error("latlngs not passed");wo(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var gr=Jn([0,0]),Ha=Mi(v);Ha.getNorthWest().distanceTo(Ha.getSouthWest())*Ha.getNorthEast().distanceTo(Ha.getNorthWest())<1700&&(gr=Ql(v));var xo=v.length,Va=[];for(W=0;W<xo;W++){var To=Jn(v[W]);Va.push(O.project(Jn([To.lat-gr.lat,To.lng-gr.lng])))}for(Ri=on=Zn=0,W=0,he=xo-1;W<xo;he=W++)on+=((Ie=Va[W]).x+(Ye=Va[he]).x)*(ni=Ie.y*Ye.x-Ye.y*Ie.x),Zn+=(Ie.y+Ye.y)*ni,Ri+=3*ni;var Hl=O.unproject(Nn(0===Ri?Va[0]:[on/Ri,Zn/Ri]));return Jn([Hl.lat+gr.lat,Hl.lng+gr.lng])}function Ql(v){for(var O=0,W=0,he=0,Ie=0;Ie<v.length;Ie++){var Ye=Jn(v[Ie]);O+=Ye.lat,W+=Ye.lng,he++}return Jn([O/he,W/he])}var ec,Ks={__proto__:null,clipPolygon:zo,polygonCenter:Zd,centroid:Ql};function wl(v,O){if(!O||!v.length)return v.slice();var W=O*O;return function Ts(v,O){var W=v.length,Ie=new(typeof Uint8Array<"u"?Uint8Array:Array)(W);Ie[0]=Ie[W-1]=1,vo(v,Ie,O,0,W-1);var Ye,ni=[];for(Ye=0;Ye<W;Ye++)Ie[Ye]&&ni.push(v[Ye]);return ni}(v=function Qu(v,O){for(var W=[v[0]],he=1,Ie=0,Ye=v.length;he<Ye;he++)Iu(v[he],v[Ie])>O&&(W.push(v[he]),Ie=he);return Ie<Ye-1&&W.push(v[Ye-1]),W}(v,W),W)}function co(v,O,W){return Math.sqrt(Ys(v,O,W,!0))}function vo(v,O,W,he,Ie){var ni,Ri,on,Ye=0;for(Ri=he+1;Ri<=Ie-1;Ri++)(on=Ys(v[Ri],v[he],v[Ie],!0))>Ye&&(ni=Ri,Ye=on);Ye>W&&(O[ni]=1,vo(v,O,W,he,ni),vo(v,O,W,ni,Ie))}function Oa(v,O,W,he,Ie){var Ri,on,Zn,Ye=he?ec:Js(v,W),ni=Js(O,W);for(ec=ni;;){if(!(Ye|ni))return[v,O];if(Ye&ni)return!1;Zn=Js(on=ed(v,O,Ri=Ye||ni,W,Ie),W),Ri===Ye?(v=on,Ye=Zn):(O=on,ni=Zn)}}function ed(v,O,W,he,Ie){var Zn,Ar,Ye=O.x-v.x,ni=O.y-v.y,Ri=he.min,on=he.max;return 8&W?(Zn=v.x+Ye*(on.y-v.y)/ni,Ar=on.y):4&W?(Zn=v.x+Ye*(Ri.y-v.y)/ni,Ar=Ri.y):2&W?(Zn=on.x,Ar=v.y+ni*(on.x-v.x)/Ye):1&W&&(Zn=Ri.x,Ar=v.y+ni*(Ri.x-v.x)/Ye),new tn(Zn,Ar,Ie)}function Js(v,O){var W=0;return v.x<O.min.x?W|=1:v.x>O.max.x&&(W|=2),v.y<O.min.y?W|=4:v.y>O.max.y&&(W|=8),W}function Iu(v,O){var W=O.x-v.x,he=O.y-v.y;return W*W+he*he}function Ys(v,O,W,he){var Zn,Ie=O.x,Ye=O.y,ni=W.x-Ie,Ri=W.y-Ye,on=ni*ni+Ri*Ri;return on>0&&((Zn=((v.x-Ie)*ni+(v.y-Ye)*Ri)/on)>1?(Ie=W.x,Ye=W.y):Zn>0&&(Ie+=ni*Zn,Ye+=Ri*Zn)),ni=v.x-Ie,Ri=v.y-Ye,he?ni*ni+Ri*Ri:new tn(Ie,Ye)}function wo(v){return!gt(v[0])||"object"!=typeof v[0][0]&&typeof v[0][0]<"u"}function ps(v){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wo(v)}function td(v,O){var W,he,Ie,Ye,ni,Ri,on,Zn;if(!v||0===v.length)throw new Error("latlngs not passed");wo(v)||(console.warn("latlngs are not flat! Only the first ring will be used"),v=v[0]);var Ar=Jn([0,0]),gr=Mi(v);gr.getNorthWest().distanceTo(gr.getSouthWest())*gr.getNorthEast().distanceTo(gr.getNorthWest())<1700&&(Ar=Ql(v));var is=v.length,xo=[];for(W=0;W<is;W++){var Va=Jn(v[W]);xo.push(O.project(Jn([Va.lat-Ar.lat,Va.lng-Ar.lng])))}for(W=0,he=0;W<is-1;W++)he+=xo[W].distanceTo(xo[W+1])/2;if(0===he)Zn=xo[0];else for(W=0,Ye=0;W<is-1;W++)if((Ye+=Ie=(ni=xo[W]).distanceTo(Ri=xo[W+1]))>he){Zn=[Ri.x-(on=(Ye-he)/Ie)*(Ri.x-ni.x),Ri.y-on*(Ri.y-ni.y)];break}var To=O.unproject(Nn(Zn));return Jn([To.lat+Ar.lat,To.lng+Ar.lng])}var Wo={__proto__:null,simplify:wl,pointToSegmentDistance:co,closestPointOnSegment:function zs(v,O,W){return Ys(v,O,W)},clipSegment:Oa,_getEdgeIntersection:ed,_getBitCode:Js,_sqClosestPointOnSegment:Ys,isFlat:wo,_flat:ps,polylineCenter:td},id={project:function(v){return new tn(v.lng,v.lat)},unproject:function(v){return new In(v.y,v.x)},bounds:new yr([-180,-90],[180,90])},Mu={R:6378137,R_MINOR:6356752.314245179,bounds:new yr([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(v){var O=Math.PI/180,W=this.R,he=v.lat*O,Ie=this.R_MINOR/W,Ye=Math.sqrt(1-Ie*Ie),ni=Ye*Math.sin(he),Ri=Math.tan(Math.PI/4-he/2)/Math.pow((1-ni)/(1+ni),Ye/2);return he=-W*Math.log(Math.max(Ri,1e-10)),new tn(v.lng*O*W,he)},unproject:function(v){for(var Zn,O=180/Math.PI,W=this.R,he=this.R_MINOR/W,Ie=Math.sqrt(1-he*he),Ye=Math.exp(-v.y/W),ni=Math.PI/2-2*Math.atan(Ye),Ri=0,on=.1;Ri<15&&Math.abs(on)>1e-7;Ri++)Zn=Ie*Math.sin(ni),Zn=Math.pow((1-Zn)/(1+Zn),Ie/2),ni+=on=Math.PI/2-2*Math.atan(Ye*Zn)-ni;return new In(ni*O,v.x*O/W)}},oa={__proto__:null,LonLat:id,Mercator:Mu,SphericalMercator:Mn},ko=xt({},jr,{code:"EPSG:3395",projection:Mu,transformation:function(){var v=.5/(Math.PI*Mu.R);return ka(v,.5,-v,.5)}()}),Ol=xt({},jr,{code:"EPSG:4326",projection:id,transformation:ka(1/180,1,-1/180,.5)}),Ld=xt({},ia,{projection:id,transformation:ka(1,0,-1,0),scale:function(v){return Math.pow(2,v)},zoom:function(v){return Math.log(v)/Math.LN2},distance:function(v,O){var W=O.lng-v.lng,he=O.lat-v.lat;return Math.sqrt(W*W+he*he)},infinite:!0});ia.Earth=jr,ia.EPSG3395=ko,ia.EPSG3857=Ma,ia.EPSG900913=pr,ia.EPSG4326=Ol,ia.Simple=Ld;var qa=Ki.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(v){return v.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(v){return v&&v.removeLayer(this),this},getPane:function(v){return this._map.getPane(v?this.options[v]||v:this.options.pane)},addInteractiveTarget:function(v){return this._map._targets[He(v)]=this,this},removeInteractiveTarget:function(v){return delete this._map._targets[He(v)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(v){var O=v.target;if(O.hasLayer(this)){if(this._map=O,this._zoomAnimated=O._zoomAnimated,this.getEvents){var W=this.getEvents();O.on(W,this),this.once("remove",function(){O.off(W,this)},this)}this.onAdd(O),this.fire("add"),O.fire("layeradd",{layer:this})}}});Xa.include({addLayer:function(v){if(!v._layerAdd)throw new Error("The provided object is not a Layer.");var O=He(v);return this._layers[O]||(this._layers[O]=v,v._mapToAdd=this,v.beforeAdd&&v.beforeAdd(this),this.whenReady(v._layerAdd,v)),this},removeLayer:function(v){var O=He(v);return this._layers[O]?(this._loaded&&v.onRemove(this),delete this._layers[O],this._loaded&&(this.fire("layerremove",{layer:v}),v.fire("remove")),v._map=v._mapToAdd=null,this):this},hasLayer:function(v){return He(v)in this._layers},eachLayer:function(v,O){for(var W in this._layers)v.call(O,this._layers[W]);return this},_addLayers:function(v){for(var O=0,W=(v=v?gt(v)?v:[v]:[]).length;O<W;O++)this.addLayer(v[O])},_addZoomLimit:function(v){(!isNaN(v.options.maxZoom)||!isNaN(v.options.minZoom))&&(this._zoomBoundLayers[He(v)]=v,this._updateZoomLevels())},_removeZoomLimit:function(v){var O=He(v);this._zoomBoundLayers[O]&&(delete this._zoomBoundLayers[O],this._updateZoomLevels())},_updateZoomLevels:function(){var v=1/0,O=-1/0,W=this._getZoomSpan();for(var he in this._zoomBoundLayers){var Ie=this._zoomBoundLayers[he].options;v=void 0===Ie.minZoom?v:Math.min(v,Ie.minZoom),O=void 0===Ie.maxZoom?O:Math.max(O,Ie.maxZoom)}this._layersMaxZoom=O===-1/0?void 0:O,this._layersMinZoom=v===1/0?void 0:v,W!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Nc=qa.extend({initialize:function(v,O){var W,he;if(ot(this,O),this._layers={},v)for(W=0,he=v.length;W<he;W++)this.addLayer(v[W])},addLayer:function(v){var O=this.getLayerId(v);return this._layers[O]=v,this._map&&this._map.addLayer(v),this},removeLayer:function(v){var O=v in this._layers?v:this.getLayerId(v);return this._map&&this._layers[O]&&this._map.removeLayer(this._layers[O]),delete this._layers[O],this},hasLayer:function(v){return("number"==typeof v?v:this.getLayerId(v))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(v){var W,he,O=Array.prototype.slice.call(arguments,1);for(W in this._layers)(he=this._layers[W])[v]&&he[v].apply(he,O);return this},onAdd:function(v){this.eachLayer(v.addLayer,v)},onRemove:function(v){this.eachLayer(v.removeLayer,v)},eachLayer:function(v,O){for(var W in this._layers)v.call(O,this._layers[W]);return this},getLayer:function(v){return this._layers[v]},getLayers:function(){var v=[];return this.eachLayer(v.push,v),v},setZIndex:function(v){return this.invoke("setZIndex",v)},getLayerId:function(v){return He(v)}}),$a=Nc.extend({addLayer:function(v){return this.hasLayer(v)?this:(v.addEventParent(this),Nc.prototype.addLayer.call(this,v),this.fire("layeradd",{layer:v}))},removeLayer:function(v){return this.hasLayer(v)?(v in this._layers&&(v=this._layers[v]),v.removeEventParent(this),Nc.prototype.removeLayer.call(this,v),this.fire("layerremove",{layer:v})):this},setStyle:function(v){return this.invoke("setStyle",v)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var v=new Nr;for(var O in this._layers){var W=this._layers[O];v.extend(W.getBounds?W.getBounds():W.getLatLng())}return v}}),bc=Ni.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(v){ot(this,v)},createIcon:function(v){return this._createIcon("icon",v)},createShadow:function(v){return this._createIcon("shadow",v)},_createIcon:function(v,O){var W=this._getIconUrl(v);if(!W){if("icon"===v)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var he=this._createImg(W,O&&"IMG"===O.tagName?O:null);return this._setIconStyles(he,v),(this.options.crossOrigin||""===this.options.crossOrigin)&&(he.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),he},_setIconStyles:function(v,O){var W=this.options,he=W[O+"Size"];"number"==typeof he&&(he=[he,he]);var Ie=Nn(he),Ye=Nn("shadow"===O&&W.shadowAnchor||W.iconAnchor||Ie&&Ie.divideBy(2,!0));v.className="leaflet-marker-"+O+" "+(W.className||""),Ye&&(v.style.marginLeft=-Ye.x+"px",v.style.marginTop=-Ye.y+"px"),Ie&&(v.style.width=Ie.x+"px",v.style.height=Ie.y+"px")},_createImg:function(v,O){return(O=O||document.createElement("img")).src=v,O},_getIconUrl:function(v){return pt.retina&&this.options[v+"RetinaUrl"]||this.options[v+"Url"]}});var Ru=bc.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(v){return"string"!=typeof Ru.imagePath&&(Ru.imagePath=this._detectIconPath()),(this.options.imagePath||Ru.imagePath)+bc.prototype._getIconUrl.call(this,v)},_stripUrl:function(v){var O=function(W,he,Ie){var Ye=he.exec(W);return Ye&&Ye[Ie]};return(v=O(v,/^url\((['"])?(.+)\1\)$/,2))&&O(v,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var v=J("div","leaflet-default-icon-path",document.body),O=Z(v,"background-image")||Z(v,"backgroundImage");if(document.body.removeChild(v),O=this._stripUrl(O))return O;var W=document.querySelector('link[href$="leaflet.css"]');return W?W.href.substring(0,W.href.length-11-1):""}}),nd=ts.extend({initialize:function(v){this._marker=v},addHooks:function(){var v=this._marker._icon;this._draggable||(this._draggable=new du(v,v,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(v,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(v){var O=this._marker,W=O._map,he=this._marker.options.autoPanSpeed,Ie=this._marker.options.autoPanPadding,Ye=Xt(O._icon),ni=W.getPixelBounds(),Ri=W.getPixelOrigin(),on=fr(ni.min._subtract(Ri).add(Ie),ni.max._subtract(Ri).subtract(Ie));if(!on.contains(Ye)){var Zn=Nn((Math.max(on.max.x,Ye.x)-on.max.x)/(ni.max.x-on.max.x)-(Math.min(on.min.x,Ye.x)-on.min.x)/(ni.min.x-on.min.x),(Math.max(on.max.y,Ye.y)-on.max.y)/(ni.max.y-on.max.y)-(Math.min(on.min.y,Ye.y)-on.min.y)/(ni.min.y-on.min.y)).multiplyBy(he);W.panBy(Zn,{animate:!1}),this._draggable._newPos._add(Zn),this._draggable._startPos._add(Zn),$t(O._icon,this._draggable._newPos),this._onDrag(v),this._panRequest=fi(this._adjustPan.bind(this,v))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(v){this._marker.options.autoPan&&(It(this._panRequest),this._panRequest=fi(this._adjustPan.bind(this,v)))},_onDrag:function(v){var O=this._marker,W=O._shadow,he=Xt(O._icon),Ie=O._map.layerPointToLatLng(he);W&&$t(W,he),O._latlng=Ie,v.latlng=Ie,v.oldLatLng=this._oldLatLng,O.fire("move",v).fire("drag",v)},_onDragEnd:function(v){It(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",v)}}),Qc=qa.extend({options:{icon:new Ru,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(v,O){ot(this,O),this._latlng=Jn(v)},onAdd:function(v){this._zoomAnimated=this._zoomAnimated&&v.options.markerZoomAnimation,this._zoomAnimated&&v.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(v){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&v.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(v){var O=this._latlng;return this._latlng=Jn(v),this.update(),this.fire("move",{oldLatLng:O,latlng:this._latlng})},setZIndexOffset:function(v){return this.options.zIndexOffset=v,this.update()},getIcon:function(){return this.options.icon},setIcon:function(v){return this.options.icon=v,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var v=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(v)}return this},_initIcon:function(){var v=this.options,O="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),W=v.icon.createIcon(this._icon),he=!1;W!==this._icon&&(this._icon&&this._removeIcon(),he=!0,v.title&&(W.title=v.title),"IMG"===W.tagName&&(W.alt=v.alt||"")),Se(W,O),v.keyboard&&(W.tabIndex="0",W.setAttribute("role","button")),this._icon=W,v.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qr(W,"focus",this._panOnFocus,this);var Ie=v.icon.createShadow(this._shadow),Ye=!1;Ie!==this._shadow&&(this._removeShadow(),Ye=!0),Ie&&(Se(Ie,O),Ie.alt=""),this._shadow=Ie,v.opacity<1&&this._updateOpacity(),he&&this.getPane().appendChild(this._icon),this._initInteraction(),Ie&&Ye&&this.getPane(v.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&na(this._icon,"focus",this._panOnFocus,this),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(v){this._icon&&$t(this._icon,v),this._shadow&&$t(this._shadow,v),this._zIndex=v.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(v){this._icon&&(this._icon.style.zIndex=this._zIndex+v)},_animateZoom:function(v){var O=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center).round();this._setPos(O)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nd)){var v=this.options.draggable;this.dragging&&(v=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nd(this),v&&this.dragging.enable()}},setOpacity:function(v){return this.options.opacity=v,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var v=this.options.opacity;this._icon&&we(this._icon,v),this._shadow&&we(this._shadow,v)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var v=this._map;if(v){var O=this.options.icon.options,W=O.iconSize?Nn(O.iconSize):Nn(0,0),he=O.iconAnchor?Nn(O.iconAnchor):Nn(0,0);v.panInside(this._latlng,{paddingTopLeft:he,paddingBottomRight:W.subtract(he)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var el=qa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(v){this._renderer=v.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(v){return ot(this,v),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&v&&Object.prototype.hasOwnProperty.call(v,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cl=el.extend({options:{fill:!0,radius:10},initialize:function(v,O){ot(this,O),this._latlng=Jn(v),this._radius=this.options.radius},setLatLng:function(v){var O=this._latlng;return this._latlng=Jn(v),this.redraw(),this.fire("move",{oldLatLng:O,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(v){return this.options.radius=this._radius=v,this.redraw()},getRadius:function(){return this._radius},setStyle:function(v){var O=v&&v.radius||this._radius;return el.prototype.setStyle.call(this,v),this.setRadius(O),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var v=this._radius,O=this._radiusY||v,W=this._clickTolerance(),he=[v+W,O+W];this._pxBounds=new yr(this._point.subtract(he),this._point.add(he))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(v){return v.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var eu=Cl.extend({initialize:function(v,O,W){if("number"==typeof O&&(O=xt({},W,{radius:O})),ot(this,O),this._latlng=Jn(v),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(v){return this._mRadius=v,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var v=[this._radius,this._radiusY||this._radius];return new Nr(this._map.layerPointToLatLng(this._point.subtract(v)),this._map.layerPointToLatLng(this._point.add(v)))},setStyle:el.prototype.setStyle,_project:function(){var v=this._latlng.lng,O=this._latlng.lat,W=this._map,he=W.options.crs;if(he.distance===jr.distance){var Ie=Math.PI/180,Ye=this._mRadius/jr.R/Ie,ni=W.project([O+Ye,v]),Ri=W.project([O-Ye,v]),on=ni.add(Ri).divideBy(2),Zn=W.unproject(on).lat,Ar=Math.acos((Math.cos(Ye*Ie)-Math.sin(O*Ie)*Math.sin(Zn*Ie))/(Math.cos(O*Ie)*Math.cos(Zn*Ie)))/Ie;(isNaN(Ar)||0===Ar)&&(Ar=Ye/Math.cos(Math.PI/180*O)),this._point=on.subtract(W.getPixelOrigin()),this._radius=isNaN(Ar)?0:on.x-W.project([Zn,v-Ar]).x,this._radiusY=on.y-ni.y}else{var gr=he.unproject(he.project(this._latlng).subtract([this._mRadius,0]));this._point=W.latLngToLayerPoint(this._latlng),this._radius=this._point.x-W.latLngToLayerPoint(gr).x}this._updateBounds()}});var _o=el.extend({options:{smoothFactor:1,noClip:!1},initialize:function(v,O){ot(this,O),this._setLatLngs(v)},getLatLngs:function(){return this._latlngs},setLatLngs:function(v){return this._setLatLngs(v),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(v){for(var Ie,Ye,O=1/0,W=null,he=Ys,ni=0,Ri=this._parts.length;ni<Ri;ni++)for(var on=this._parts[ni],Zn=1,Ar=on.length;Zn<Ar;Zn++){var gr=he(v,Ie=on[Zn-1],Ye=on[Zn],!0);gr<O&&(O=gr,W=he(v,Ie,Ye))}return W&&(W.distance=Math.sqrt(O)),W},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return td(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(v,O){return O=O||this._defaultShape(),v=Jn(v),O.push(v),this._bounds.extend(v),this.redraw()},_setLatLngs:function(v){this._bounds=new Nr,this._latlngs=this._convertLatLngs(v)},_defaultShape:function(){return wo(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(v){for(var O=[],W=wo(v),he=0,Ie=v.length;he<Ie;he++)W?(O[he]=Jn(v[he]),this._bounds.extend(O[he])):O[he]=this._convertLatLngs(v[he]);return O},_project:function(){var v=new yr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,v),this._bounds.isValid()&&v.isValid()&&(this._rawPxBounds=v,this._updateBounds())},_updateBounds:function(){var v=this._clickTolerance(),O=new tn(v,v);this._rawPxBounds&&(this._pxBounds=new yr([this._rawPxBounds.min.subtract(O),this._rawPxBounds.max.add(O)]))},_projectLatlngs:function(v,O,W){var Ye,ni,Ie=v.length;if(v[0]instanceof In){for(ni=[],Ye=0;Ye<Ie;Ye++)ni[Ye]=this._map.latLngToLayerPoint(v[Ye]),W.extend(ni[Ye]);O.push(ni)}else for(Ye=0;Ye<Ie;Ye++)this._projectLatlngs(v[Ye],O,W)},_clipPoints:function(){var v=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(v)){if(this.options.noClip)return void(this._parts=this._rings);var W,he,Ie,Ye,ni,Ri,on,O=this._parts;for(W=0,Ie=0,Ye=this._rings.length;W<Ye;W++)for(he=0,ni=(on=this._rings[W]).length;he<ni-1;he++)(Ri=Oa(on[he],on[he+1],v,he,!0))&&(O[Ie]=O[Ie]||[],O[Ie].push(Ri[0]),(Ri[1]!==on[he+1]||he===ni-2)&&(O[Ie].push(Ri[1]),Ie++))}},_simplifyPoints:function(){for(var v=this._parts,O=this.options.smoothFactor,W=0,he=v.length;W<he;W++)v[W]=wl(v[W],O)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(v,O){var W,he,Ie,Ye,ni,Ri,on=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(W=0,Ye=this._parts.length;W<Ye;W++)for(he=0,Ie=(ni=(Ri=this._parts[W]).length)-1;he<ni;Ie=he++)if((O||0!==he)&&co(v,Ri[Ie],Ri[he])<=on)return!0;return!1}});_o._flat=ps;var sl=_o.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(v){var O=_o.prototype._convertLatLngs.call(this,v),W=O.length;return W>=2&&O[0]instanceof In&&O[0].equals(O[W-1])&&O.pop(),O},_setLatLngs:function(v){_o.prototype._setLatLngs.call(this,v),wo(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wo(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var v=this._renderer._bounds,O=this.options.weight,W=new tn(O,O);if(v=new yr(v.min.subtract(W),v.max.add(W)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(v)){if(this.options.noClip)return void(this._parts=this._rings);for(var Ye,he=0,Ie=this._rings.length;he<Ie;he++)(Ye=zo(this._rings[he],v,!0)).length&&this._parts.push(Ye)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(v){var W,he,Ie,Ye,ni,Ri,on,Zn,O=!1;if(!this._pxBounds||!this._pxBounds.contains(v))return!1;for(Ye=0,on=this._parts.length;Ye<on;Ye++)for(ni=0,Ri=(Zn=(W=this._parts[Ye]).length)-1;ni<Zn;Ri=ni++)(he=W[ni]).y>v.y!=(Ie=W[Ri]).y>v.y&&v.x<(Ie.x-he.x)*(v.y-he.y)/(Ie.y-he.y)+he.x&&(O=!O);return O||_o.prototype._containsPoint.call(this,v,!0)}});var zc=$a.extend({initialize:function(v,O){ot(this,O),this._layers={},v&&this.addData(v)},addData:function(v){var W,he,Ie,O=gt(v)?v:v.features;if(O){for(W=0,he=O.length;W<he;W++)((Ie=O[W]).geometries||Ie.geometry||Ie.features||Ie.coordinates)&&this.addData(Ie);return this}var Ye=this.options;if(Ye.filter&&!Ye.filter(v))return this;var ni=rd(v,Ye);return ni?(ni.feature=Ou(v),ni.defaultOptions=ni.options,this.resetStyle(ni),Ye.onEachFeature&&Ye.onEachFeature(v,ni),this.addLayer(ni)):this},resetStyle:function(v){return void 0===v?this.eachLayer(this.resetStyle,this):(v.options=xt({},v.defaultOptions),this._setLayerStyle(v,this.options.style),this)},setStyle:function(v){return this.eachLayer(function(O){this._setLayerStyle(O,v)},this)},_setLayerStyle:function(v,O){v.setStyle&&("function"==typeof O&&(O=O(v.feature)),v.setStyle(O))}});function rd(v,O){var Ri,on,Zn,Ar,W="Feature"===v.type?v.geometry:v,he=W?W.coordinates:null,Ie=[],Ye=O&&O.pointToLayer,ni=O&&O.coordsToLatLng||pl;if(!he&&!W)return null;switch(W.type){case"Point":return Fl(Ye,v,Ri=ni(he),O);case"MultiPoint":for(Zn=0,Ar=he.length;Zn<Ar;Zn++)Ri=ni(he[Zn]),Ie.push(Fl(Ye,v,Ri,O));return new $a(Ie);case"LineString":case"MultiLineString":return on=Ss(he,"LineString"===W.type?0:1,ni),new _o(on,O);case"Polygon":case"MultiPolygon":return on=Ss(he,"Polygon"===W.type?1:2,ni),new sl(on,O);case"GeometryCollection":for(Zn=0,Ar=W.geometries.length;Zn<Ar;Zn++){var gr=rd({geometry:W.geometries[Zn],type:"Feature",properties:v.properties},O);gr&&Ie.push(gr)}return new $a(Ie);case"FeatureCollection":for(Zn=0,Ar=W.features.length;Zn<Ar;Zn++){var Ha=rd(W.features[Zn],O);Ha&&Ie.push(Ha)}return new $a(Ie);default:throw new Error("Invalid GeoJSON object.")}}function Fl(v,O,W,he){return v?v(O,W):new Qc(W,he&&he.markersInheritOptions&&he)}function pl(v){return new In(v[1],v[0],v[2])}function Ss(v,O,W){for(var ni,he=[],Ie=0,Ye=v.length;Ie<Ye;Ie++)ni=O?Ss(v[Ie],O-1,W):(W||pl)(v[Ie]),he.push(ni);return he}function ad(v,O){return void 0!==(v=Jn(v)).alt?[nt(v.lng,O),nt(v.lat,O),nt(v.alt,O)]:[nt(v.lng,O),nt(v.lat,O)]}function or(v,O,W,he){for(var Ie=[],Ye=0,ni=v.length;Ye<ni;Ye++)Ie.push(O?or(v[Ye],wo(v[Ye])?0:O-1,W,he):ad(v[Ye],he));return!O&&W&&Ie.length>0&&Ie.push(Ie[0].slice()),Ie}function Bl(v,O){return v.feature?xt({},v.feature,{geometry:O}):Ou(O)}function Ou(v){return"Feature"===v.type||"FeatureCollection"===v.type?v:{type:"Feature",properties:{},geometry:v}}var hu={toGeoJSON:function(v){return Bl(this,{type:"Point",coordinates:ad(this.getLatLng(),v)})}};function Cc(v,O){return new zc(v,O)}Qc.include(hu),eu.include(hu),Cl.include(hu),_o.include({toGeoJSON:function(v){var O=!wo(this._latlngs);return Bl(this,{type:(O?"Multi":"")+"LineString",coordinates:or(this._latlngs,O?1:0,!1,v)})}}),sl.include({toGeoJSON:function(v){var O=!wo(this._latlngs),W=O&&!wo(this._latlngs[0]),he=or(this._latlngs,W?2:O?1:0,!0,v);return O||(he=[he]),Bl(this,{type:(W?"Multi":"")+"Polygon",coordinates:he})}}),Nc.include({toMultiPoint:function(v){var O=[];return this.eachLayer(function(W){O.push(W.toGeoJSON(v).geometry.coordinates)}),Bl(this,{type:"MultiPoint",coordinates:O})},toGeoJSON:function(v){var O=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===O)return this.toMultiPoint(v);var W="GeometryCollection"===O,he=[];return this.eachLayer(function(Ie){if(Ie.toGeoJSON){var Ye=Ie.toGeoJSON(v);if(W)he.push(Ye.geometry);else{var ni=Ou(Ye);"FeatureCollection"===ni.type?he.push.apply(he,ni.features):he.push(ni)}}}),W?Bl(this,{geometries:he,type:"GeometryCollection"}):{type:"FeatureCollection",features:he}}});var Ei=Cc,pn=qa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(v,O,W){this._url=v,this._bounds=Mi(O),ot(this,W)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(v){return this.options.opacity=v,this._image&&this._updateOpacity(),this},setStyle:function(v){return v.opacity&&this.setOpacity(v.opacity),this},bringToFront:function(){return this._map&&ye(this._image),this},bringToBack:function(){return this._map&&De(this._image),this},setUrl:function(v){return this._url=v,this._image&&(this._image.src=v),this},setBounds:function(v){return this._bounds=Mi(v),this._map&&this._reset(),this},getEvents:function(){var v={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var v="IMG"===this._url.tagName,O=this._image=v?this._url:J("img");Se(O,"leaflet-image-layer"),this._zoomAnimated&&Se(O,"leaflet-zoom-animated"),this.options.className&&Se(O,this.options.className),O.onselectstart=We,O.onmousemove=We,O.onload=t(this.fire,this,"load"),O.onerror=t(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(O.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),v?this._url=O.src:(O.src=this._url,O.alt=this.options.alt)},_animateZoom:function(v){var O=this._map.getZoomScale(v.zoom),W=this._map._latLngBoundsToNewLayerBounds(this._bounds,v.zoom,v.center).min;mt(this._image,W,O)},_reset:function(){var v=this._image,O=new yr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),W=O.getSize();$t(v,O.min),v.style.width=W.x+"px",v.style.height=W.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var v=this.options.errorOverlayUrl;v&&this._url!==v&&(this._url=v,this._image.src=v)},getCenter:function(){return this._bounds.getCenter()}}),Fr=pn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var v="VIDEO"===this._url.tagName,O=this._image=v?this._url:J("video");if(Se(O,"leaflet-image-layer"),this._zoomAnimated&&Se(O,"leaflet-zoom-animated"),this.options.className&&Se(O,this.options.className),O.onselectstart=We,O.onmousemove=We,O.onloadeddata=t(this.fire,this,"load"),v){for(var W=O.getElementsByTagName("source"),he=[],Ie=0;Ie<W.length;Ie++)he.push(W[Ie].src);this._url=W.length>0?he:[O.src]}else{gt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(O.style,"objectFit")&&(O.style.objectFit="fill"),O.autoplay=!!this.options.autoplay,O.loop=!!this.options.loop,O.muted=!!this.options.muted,O.playsInline=!!this.options.playsInline;for(var Ye=0;Ye<this._url.length;Ye++){var ni=J("source");ni.src=this._url[Ye],O.appendChild(ni)}}}});var Os=pn.extend({_initImage:function(){var v=this._image=this._url;Se(v,"leaflet-image-layer"),this._zoomAnimated&&Se(v,"leaflet-zoom-animated"),this.options.className&&Se(v,this.options.className),v.onselectstart=We,v.onmousemove=We}});var vs=qa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(v,O){v&&(v instanceof In||gt(v))?(this._latlng=Jn(v),ot(this,O)):(ot(this,v),this._source=O),this.options.content&&(this._content=this.options.content)},openOn:function(v){return(v=arguments.length?v:this._source._map).hasLayer(this)||v.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(v){return this._map?this.close():(arguments.length?this._source=v:v=this._source,this._prepareOpen(),this.openOn(v._map)),this},onAdd:function(v){this._zoomAnimated=v._zoomAnimated,this._container||this._initLayout(),v._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),v._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(v){v._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(t(ne,void 0,this._container),200)):ne(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(v){return this._latlng=Jn(v),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(v){return this._content=v,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var v={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ye(this._container),this},bringToBack:function(){return this._map&&De(this._container),this},_prepareOpen:function(v){var O=this._source;if(!O._map)return!1;if(O instanceof $a){O=null;var W=this._source._layers;for(var he in W)if(W[he]._map){O=W[he];break}if(!O)return!1;this._source=O}if(!v)if(O.getCenter)v=O.getCenter();else if(O.getLatLng)v=O.getLatLng();else{if(!O.getBounds)throw new Error("Unable to get source layer LatLng.");v=O.getBounds().getCenter()}return this.setLatLng(v),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var v=this._contentNode,O="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof O)v.innerHTML=O;else{for(;v.hasChildNodes();)v.removeChild(v.firstChild);v.appendChild(O)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var v=this._map.latLngToLayerPoint(this._latlng),O=Nn(this.options.offset),W=this._getAnchor();this._zoomAnimated?$t(this._container,v.add(W)):O=O.add(v).add(W);var he=this._containerBottom=-O.y,Ie=this._containerLeft=-Math.round(this._containerWidth/2)+O.x;this._container.style.bottom=he+"px",this._container.style.left=Ie+"px"}},_getAnchor:function(){return[0,0]}});Xa.include({_initOverlay:function(v,O,W,he){var Ie=O;return Ie instanceof v||(Ie=new v(he).setContent(O)),W&&Ie.setLatLng(W),Ie}}),qa.include({_initOverlay:function(v,O,W,he){var Ie=W;return Ie instanceof v?(ot(Ie,he),Ie._source=this):(Ie=O&&!he?O:new v(he,this)).setContent(W),Ie}});var El=vs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(v){return!(v=arguments.length?v:this._source._map).hasLayer(this)&&v._popup&&v._popup.options.autoClose&&v.removeLayer(v._popup),v._popup=this,vs.prototype.openOn.call(this,v)},onAdd:function(v){vs.prototype.onAdd.call(this,v),v.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof el||this._source.on("preclick",xc))},onRemove:function(v){vs.prototype.onRemove.call(this,v),v.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof el||this._source.off("preclick",xc))},getEvents:function(){var v=vs.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(v.preclick=this.close),this.options.keepInView&&(v.moveend=this._adjustPan),v},_initLayout:function(){var v="leaflet-popup",O=this._container=J("div",v+" "+(this.options.className||"")+" leaflet-zoom-animated"),W=this._wrapper=J("div",v+"-content-wrapper",O);if(this._contentNode=J("div",v+"-content",W),$r(O),Rd(this._contentNode),Qr(O,"contextmenu",xc),this._tipContainer=J("div",v+"-tip-container",O),this._tip=J("div",v+"-tip",this._tipContainer),this.options.closeButton){var he=this._closeButton=J("a",v+"-close-button",O);he.setAttribute("role","button"),he.setAttribute("aria-label","Close popup"),he.href="#close",he.innerHTML='<span aria-hidden="true">&#215;</span>',Qr(he,"click",function(Ie){fs(Ie),this.close()},this)}},_updateLayout:function(){var v=this._contentNode,O=v.style;O.width="",O.whiteSpace="nowrap";var W=v.offsetWidth;W=Math.min(W,this.options.maxWidth),W=Math.max(W,this.options.minWidth),O.width=W+1+"px",O.whiteSpace="",O.height="";var Ie=this.options.maxHeight,Ye="leaflet-popup-scrolled";Ie&&v.offsetHeight>Ie?(O.height=Ie+"px",Se(v,Ye)):ze(v,Ye),this._containerWidth=this._container.offsetWidth},_animateZoom:function(v){var O=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center),W=this._getAnchor();$t(this._container,O.add(W))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var v=this._map,O=parseInt(Z(this._container,"marginBottom"),10)||0,W=this._container.offsetHeight+O,he=this._containerWidth,Ie=new tn(this._containerLeft,-W-this._containerBottom);Ie._add(Xt(this._container));var Ye=v.layerPointToContainerPoint(Ie),ni=Nn(this.options.autoPanPadding),Ri=Nn(this.options.autoPanPaddingTopLeft||ni),on=Nn(this.options.autoPanPaddingBottomRight||ni),Zn=v.getSize(),Ar=0,gr=0;Ye.x+he+on.x>Zn.x&&(Ar=Ye.x+he-Zn.x+on.x),Ye.x-Ar-Ri.x<0&&(Ar=Ye.x-Ri.x),Ye.y+W+on.y>Zn.y&&(gr=Ye.y+W-Zn.y+on.y),Ye.y-gr-Ri.y<0&&(gr=Ye.y-Ri.y),(Ar||gr)&&(this.options.keepInView&&(this._autopanning=!0),v.fire("autopanstart").panBy([Ar,gr]))}},_getAnchor:function(){return Nn(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Xa.mergeOptions({closePopupOnClick:!0}),Xa.include({openPopup:function(v,O,W){return this._initOverlay(El,v,O,W).openOn(this),this},closePopup:function(v){return(v=arguments.length?v:this._popup)&&v.close(),this}}),qa.include({bindPopup:function(v,O){return this._popup=this._initOverlay(El,this._popup,v,O),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(v){return this._popup&&(this instanceof $a||(this._popup._source=this),this._popup._prepareOpen(v||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(v){return this._popup&&this._popup.setContent(v),this},getPopup:function(){return this._popup},_openPopup:function(v){if(this._popup&&this._map){Rl(v);var O=v.layer||v.target;if(this._popup._source===O&&!(O instanceof el))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(v.latlng));this._popup._source=O,this.openPopup(v.latlng)}},_movePopup:function(v){this._popup.setLatLng(v.latlng)},_onKeyPress:function(v){13===v.originalEvent.keyCode&&this._openPopup(v)}});var ol=vs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(v){vs.prototype.onAdd.call(this,v),this.setOpacity(this.options.opacity),v.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(v){vs.prototype.onRemove.call(this,v),v.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var v=vs.prototype.getEvents.call(this);return this.options.permanent||(v.preclick=this.close),v},_initLayout:function(){this._contentNode=this._container=J("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+He(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(v){var O,W,he=this._map,Ie=this._container,Ye=he.latLngToContainerPoint(he.getCenter()),ni=he.layerPointToContainerPoint(v),Ri=this.options.direction,on=Ie.offsetWidth,Zn=Ie.offsetHeight,Ar=Nn(this.options.offset),gr=this._getAnchor();"top"===Ri?(O=on/2,W=Zn):"bottom"===Ri?(O=on/2,W=0):"center"===Ri?(O=on/2,W=Zn/2):"right"===Ri?(O=0,W=Zn/2):"left"===Ri?(O=on,W=Zn/2):ni.x<Ye.x?(Ri="right",O=0,W=Zn/2):(Ri="left",O=on+2*(Ar.x+gr.x),W=Zn/2),v=v.subtract(Nn(O,W,!0)).add(Ar).add(gr),ze(Ie,"leaflet-tooltip-right"),ze(Ie,"leaflet-tooltip-left"),ze(Ie,"leaflet-tooltip-top"),ze(Ie,"leaflet-tooltip-bottom"),Se(Ie,"leaflet-tooltip-"+Ri),$t(Ie,v)},_updatePosition:function(){var v=this._map.latLngToLayerPoint(this._latlng);this._setPosition(v)},setOpacity:function(v){this.options.opacity=v,this._container&&we(this._container,v)},_animateZoom:function(v){var O=this._map._latLngToNewLayerPoint(this._latlng,v.zoom,v.center);this._setPosition(O)},_getAnchor:function(){return Nn(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Xa.include({openTooltip:function(v,O,W){return this._initOverlay(ol,v,O,W).openOn(this),this},closeTooltip:function(v){return v.close(),this}}),qa.include({bindTooltip:function(v,O){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ol,this._tooltip,v,O),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(v){if(v||!this._tooltipHandlersAdded){var O=v?"off":"on",W={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?W.add=this._openTooltip:(W.mouseover=this._openTooltip,W.mouseout=this.closeTooltip,W.click=this._openTooltip,this._map?this._addFocusListeners():W.add=this._addFocusListeners),this._tooltip.options.sticky&&(W.mousemove=this._moveTooltip),this[O](W),this._tooltipHandlersAdded=!v}},openTooltip:function(v){return this._tooltip&&(this instanceof $a||(this._tooltip._source=this),this._tooltip._prepareOpen(v)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(v){return this._tooltip&&this._tooltip.setContent(v),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(v){var O="function"==typeof v.getElement&&v.getElement();O&&(Qr(O,"focus",function(){this._tooltip._source=v,this.openTooltip()},this),Qr(O,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(v){var O="function"==typeof v.getElement&&v.getElement();O&&O.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(v){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var O=this;return void this._map.once("moveend",function(){O._openOnceFlag=!1,O._openTooltip(v)})}this._tooltip._source=v.layer||v.target,this.openTooltip(this._tooltip.options.sticky?v.latlng:void 0)}},_moveTooltip:function(v){var W,he,O=v.latlng;this._tooltip.options.sticky&&v.originalEvent&&(W=this._map.mouseEventToContainerPoint(v.originalEvent),he=this._map.containerPointToLayerPoint(W),O=this._map.layerPointToLatLng(he)),this._tooltip.setLatLng(O)}});var ml=bc.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(v){var O=v&&"DIV"===v.tagName?v:document.createElement("div"),W=this.options;if(W.html instanceof Element?(fe(O),O.appendChild(W.html)):O.innerHTML=!1!==W.html?W.html:"",W.bgPos){var he=Nn(W.bgPos);O.style.backgroundPosition=-he.x+"px "+-he.y+"px"}return this._setIconStyles(O,"icon"),O},createShadow:function(){return null}});bc.Default=Ru;var Hs=qa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:pt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(v){ot(this,v)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(v){v._addZoomLimit(this)},onRemove:function(v){this._removeAllTiles(),ne(this._container),v._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ye(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(De(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(v){return this.options.opacity=v,this._updateOpacity(),this},setZIndex:function(v){return this.options.zIndex=v,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var v=this._clampZoom(this._map.getZoom());v!==this._tileZoom&&(this._tileZoom=v,this._updateLevels()),this._update()}return this},getEvents:function(){var v={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Be(this._onMoveEnd,this.options.updateInterval,this)),v.move=this._onMove),this._zoomAnimated&&(v.zoomanim=this._animateZoom),v},createTile:function(){return document.createElement("div")},getTileSize:function(){var v=this.options.tileSize;return v instanceof tn?v:new tn(v,v)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(v){for(var Ye,O=this.getPane().children,W=-v(-1/0,1/0),he=0,Ie=O.length;he<Ie;he++)Ye=O[he].style.zIndex,O[he]!==this._container&&Ye&&(W=v(W,+Ye));isFinite(W)&&(this.options.zIndex=W+v(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!pt.ielt9){we(this._container,this.options.opacity);var v=+new Date,O=!1,W=!1;for(var he in this._tiles){var Ie=this._tiles[he];if(Ie.current&&Ie.loaded){var Ye=Math.min(1,(v-Ie.loaded)/200);we(Ie.el,Ye),Ye<1?O=!0:(Ie.active?W=!0:this._onOpaqueTile(Ie),Ie.active=!0)}}W&&!this._noPrune&&this._pruneTiles(),O&&(It(this._fadeFrame),this._fadeFrame=fi(this._updateOpacity,this))}},_onOpaqueTile:We,_initContainer:function(){this._container||(this._container=J("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var v=this._tileZoom,O=this.options.maxZoom;if(void 0!==v){for(var W in this._levels)W=Number(W),this._levels[W].el.children.length||W===v?(this._levels[W].el.style.zIndex=O-Math.abs(v-W),this._onUpdateLevel(W)):(ne(this._levels[W].el),this._removeTilesAtZoom(W),this._onRemoveLevel(W),delete this._levels[W]);var he=this._levels[v],Ie=this._map;return he||((he=this._levels[v]={}).el=J("div","leaflet-tile-container leaflet-zoom-animated",this._container),he.el.style.zIndex=O,he.origin=Ie.project(Ie.unproject(Ie.getPixelOrigin()),v).round(),he.zoom=v,this._setZoomTransform(he,Ie.getCenter(),Ie.getZoom()),this._onCreateLevel(he)),this._level=he,he}},_onUpdateLevel:We,_onRemoveLevel:We,_onCreateLevel:We,_pruneTiles:function(){if(this._map){var v,O,W=this._map.getZoom();if(W>this.options.maxZoom||W<this.options.minZoom)return void this._removeAllTiles();for(v in this._tiles)(O=this._tiles[v]).retain=O.current;for(v in this._tiles)if((O=this._tiles[v]).current&&!O.active){var he=O.coords;this._retainParent(he.x,he.y,he.z,he.z-5)||this._retainChildren(he.x,he.y,he.z,he.z+2)}for(v in this._tiles)this._tiles[v].retain||this._removeTile(v)}},_removeTilesAtZoom:function(v){for(var O in this._tiles)this._tiles[O].coords.z===v&&this._removeTile(O)},_removeAllTiles:function(){for(var v in this._tiles)this._removeTile(v)},_invalidateAll:function(){for(var v in this._levels)ne(this._levels[v].el),this._onRemoveLevel(Number(v)),delete this._levels[v];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(v,O,W,he){var Ie=Math.floor(v/2),Ye=Math.floor(O/2),ni=W-1,Ri=new tn(+Ie,+Ye);Ri.z=+ni;var on=this._tileCoordsToKey(Ri),Zn=this._tiles[on];return Zn&&Zn.active?(Zn.retain=!0,!0):(Zn&&Zn.loaded&&(Zn.retain=!0),ni>he&&this._retainParent(Ie,Ye,ni,he))},_retainChildren:function(v,O,W,he){for(var Ie=2*v;Ie<2*v+2;Ie++)for(var Ye=2*O;Ye<2*O+2;Ye++){var ni=new tn(Ie,Ye);ni.z=W+1;var Ri=this._tileCoordsToKey(ni),on=this._tiles[Ri];on&&on.active?on.retain=!0:(on&&on.loaded&&(on.retain=!0),W+1<he&&this._retainChildren(Ie,Ye,W+1,he))}},_resetView:function(v){var O=v&&(v.pinch||v.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),O,O)},_animateZoom:function(v){this._setView(v.center,v.zoom,!0,v.noUpdate)},_clampZoom:function(v){var O=this.options;return void 0!==O.minNativeZoom&&v<O.minNativeZoom?O.minNativeZoom:void 0!==O.maxNativeZoom&&O.maxNativeZoom<v?O.maxNativeZoom:v},_setView:function(v,O,W,he){var Ie=Math.round(O);Ie=void 0!==this.options.maxZoom&&Ie>this.options.maxZoom||void 0!==this.options.minZoom&&Ie<this.options.minZoom?void 0:this._clampZoom(Ie),(!he||this.options.updateWhenZooming&&Ie!==this._tileZoom)&&(this._tileZoom=Ie,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==Ie&&this._update(v),W||this._pruneTiles(),this._noPrune=!!W),this._setZoomTransforms(v,O)},_setZoomTransforms:function(v,O){for(var W in this._levels)this._setZoomTransform(this._levels[W],v,O)},_setZoomTransform:function(v,O,W){var he=this._map.getZoomScale(W,v.zoom),Ie=v.origin.multiplyBy(he).subtract(this._map._getNewPixelOrigin(O,W)).round();pt.any3d?mt(v.el,Ie,he):$t(v.el,Ie)},_resetGrid:function(){var v=this._map,O=v.options.crs,W=this._tileSize=this.getTileSize(),he=this._tileZoom,Ie=this._map.getPixelWorldBounds(this._tileZoom);Ie&&(this._globalTileRange=this._pxBoundsToTileRange(Ie)),this._wrapX=O.wrapLng&&!this.options.noWrap&&[Math.floor(v.project([0,O.wrapLng[0]],he).x/W.x),Math.ceil(v.project([0,O.wrapLng[1]],he).x/W.y)],this._wrapY=O.wrapLat&&!this.options.noWrap&&[Math.floor(v.project([O.wrapLat[0],0],he).y/W.x),Math.ceil(v.project([O.wrapLat[1],0],he).y/W.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(v){var O=this._map,W=O._animatingZoom?Math.max(O._animateToZoom,O.getZoom()):O.getZoom(),he=O.getZoomScale(W,this._tileZoom),Ie=O.project(v,this._tileZoom).floor(),Ye=O.getSize().divideBy(2*he);return new yr(Ie.subtract(Ye),Ie.add(Ye))},_update:function(v){var O=this._map;if(O){var W=this._clampZoom(O.getZoom());if(void 0===v&&(v=O.getCenter()),void 0!==this._tileZoom){var he=this._getTiledPixelBounds(v),Ie=this._pxBoundsToTileRange(he),Ye=Ie.getCenter(),ni=[],Ri=this.options.keepBuffer,on=new yr(Ie.getBottomLeft().subtract([Ri,-Ri]),Ie.getTopRight().add([Ri,-Ri]));if(!(isFinite(Ie.min.x)&&isFinite(Ie.min.y)&&isFinite(Ie.max.x)&&isFinite(Ie.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Zn in this._tiles){var Ar=this._tiles[Zn].coords;(Ar.z!==this._tileZoom||!on.contains(new tn(Ar.x,Ar.y)))&&(this._tiles[Zn].current=!1)}if(Math.abs(W-this._tileZoom)>1)return void this._setView(v,W);for(var gr=Ie.min.y;gr<=Ie.max.y;gr++)for(var Ha=Ie.min.x;Ha<=Ie.max.x;Ha++){var is=new tn(Ha,gr);if(is.z=this._tileZoom,this._isValidTile(is)){var xo=this._tiles[this._tileCoordsToKey(is)];xo?xo.current=!0:ni.push(is)}}if(ni.sort(function(To,Hl){return To.distanceTo(Ye)-Hl.distanceTo(Ye)}),0!==ni.length){this._loading||(this._loading=!0,this.fire("loading"));var Va=document.createDocumentFragment();for(Ha=0;Ha<ni.length;Ha++)this._addTile(ni[Ha],Va);this._level.el.appendChild(Va)}}}},_isValidTile:function(v){var O=this._map.options.crs;if(!O.infinite){var W=this._globalTileRange;if(!O.wrapLng&&(v.x<W.min.x||v.x>W.max.x)||!O.wrapLat&&(v.y<W.min.y||v.y>W.max.y))return!1}if(!this.options.bounds)return!0;var he=this._tileCoordsToBounds(v);return Mi(this.options.bounds).overlaps(he)},_keyToBounds:function(v){return this._tileCoordsToBounds(this._keyToTileCoords(v))},_tileCoordsToNwSe:function(v){var O=this._map,W=this.getTileSize(),he=v.scaleBy(W),Ie=he.add(W);return[O.unproject(he,v.z),O.unproject(Ie,v.z)]},_tileCoordsToBounds:function(v){var O=this._tileCoordsToNwSe(v),W=new Nr(O[0],O[1]);return this.options.noWrap||(W=this._map.wrapLatLngBounds(W)),W},_tileCoordsToKey:function(v){return v.x+":"+v.y+":"+v.z},_keyToTileCoords:function(v){var O=v.split(":"),W=new tn(+O[0],+O[1]);return W.z=+O[2],W},_removeTile:function(v){var O=this._tiles[v];O&&(ne(O.el),delete this._tiles[v],this.fire("tileunload",{tile:O.el,coords:this._keyToTileCoords(v)}))},_initTile:function(v){Se(v,"leaflet-tile");var O=this.getTileSize();v.style.width=O.x+"px",v.style.height=O.y+"px",v.onselectstart=We,v.onmousemove=We,pt.ielt9&&this.options.opacity<1&&we(v,this.options.opacity)},_addTile:function(v,O){var W=this._getTilePos(v),he=this._tileCoordsToKey(v),Ie=this.createTile(this._wrapCoords(v),t(this._tileReady,this,v));this._initTile(Ie),this.createTile.length<2&&fi(t(this._tileReady,this,v,null,Ie)),$t(Ie,W),this._tiles[he]={el:Ie,coords:v,current:!0},O.appendChild(Ie),this.fire("tileloadstart",{tile:Ie,coords:v})},_tileReady:function(v,O,W){O&&this.fire("tileerror",{error:O,tile:W,coords:v});var he=this._tileCoordsToKey(v);(W=this._tiles[he])&&(W.loaded=+new Date,this._map._fadeAnimated?(we(W.el,0),It(this._fadeFrame),this._fadeFrame=fi(this._updateOpacity,this)):(W.active=!0,this._pruneTiles()),O||(Se(W.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:W.el,coords:v})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),pt.ielt9||!this._map._fadeAnimated?fi(this._pruneTiles,this):setTimeout(t(this._pruneTiles,this),250)))},_getTilePos:function(v){return v.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(v){var O=new tn(this._wrapX?Me(v.x,this._wrapX):v.x,this._wrapY?Me(v.y,this._wrapY):v.y);return O.z=v.z,O},_pxBoundsToTileRange:function(v){var O=this.getTileSize();return new yr(v.min.unscaleBy(O).floor(),v.max.unscaleBy(O).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var v in this._tiles)if(!this._tiles[v].loaded)return!1;return!0}});var xs=Hs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(v,O){this._url=v,(O=ot(this,O)).detectRetina&&pt.retina&&O.maxZoom>0?(O.tileSize=Math.floor(O.tileSize/2),O.zoomReverse?(O.zoomOffset--,O.minZoom=Math.min(O.maxZoom,O.minZoom+1)):(O.zoomOffset++,O.maxZoom=Math.max(O.minZoom,O.maxZoom-1)),O.minZoom=Math.max(0,O.minZoom)):O.zoomReverse?O.minZoom=Math.min(O.maxZoom,O.minZoom):O.maxZoom=Math.max(O.minZoom,O.maxZoom),"string"==typeof O.subdomains&&(O.subdomains=O.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(v,O){return this._url===v&&void 0===O&&(O=!0),this._url=v,O||this.redraw(),this},createTile:function(v,O){var W=document.createElement("img");return Qr(W,"load",t(this._tileOnLoad,this,O,W)),Qr(W,"error",t(this._tileOnError,this,O,W)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(W.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(W.referrerPolicy=this.options.referrerPolicy),W.alt="",W.src=this.getTileUrl(v),W},getTileUrl:function(v){var O={r:pt.retina?"@2x":"",s:this._getSubdomain(v),x:v.x,y:v.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var W=this._globalTileRange.max.y-v.y;this.options.tms&&(O.y=W),O["-y"]=W}return lt(this._url,xt(O,this.options))},_tileOnLoad:function(v,O){pt.ielt9?setTimeout(t(v,this,null,O),0):v(null,O)},_tileOnError:function(v,O,W){var he=this.options.errorTileUrl;he&&O.getAttribute("src")!==he&&(O.src=he),v(W,O)},_onTileRemove:function(v){v.tile.onload=null},_getZoomForUrl:function(){var v=this._tileZoom;return this.options.zoomReverse&&(v=this.options.maxZoom-v),v+this.options.zoomOffset},_getSubdomain:function(v){var O=Math.abs(v.x+v.y)%this.options.subdomains.length;return this.options.subdomains[O]},_abortLoading:function(){var v,O;for(v in this._tiles)if(this._tiles[v].coords.z!==this._tileZoom&&((O=this._tiles[v].el).onload=We,O.onerror=We,!O.complete)){O.src=tt;var W=this._tiles[v].coords;ne(O),delete this._tiles[v],this.fire("tileabort",{tile:O,coords:W})}},_removeTile:function(v){var O=this._tiles[v];if(O)return O.el.setAttribute("src",tt),Hs.prototype._removeTile.call(this,v)},_tileReady:function(v,O,W){if(this._map&&(!W||W.getAttribute("src")!==tt))return Hs.prototype._tileReady.call(this,v,O,W)}});function Lu(v,O){return new xs(v,O)}var gl=xs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(v,O){this._url=v;var W=xt({},this.defaultWmsParams);for(var he in O)he in this.options||(W[he]=O[he]);var Ie=(O=ot(this,O)).detectRetina&&pt.retina?2:1,Ye=this.getTileSize();W.width=Ye.x*Ie,W.height=Ye.y*Ie,this.wmsParams=W},onAdd:function(v){this._crs=this.options.crs||v.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,xs.prototype.onAdd.call(this,v)},getTileUrl:function(v){var O=this._tileCoordsToNwSe(v),W=this._crs,he=fr(W.project(O[0]),W.project(O[1])),Ie=he.min,Ye=he.max,ni=(this._wmsVersion>=1.3&&this._crs===Ol?[Ie.y,Ie.x,Ye.y,Ye.x]:[Ie.x,Ie.y,Ye.x,Ye.y]).join(","),Ri=xs.prototype.getTileUrl.call(this,v);return Ri+Wt(this.wmsParams,Ri,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ni},setParams:function(v,O){return xt(this.wmsParams,v),O||this.redraw(),this}});xs.WMS=gl,Lu.wms=function Pu(v,O){return new gl(v,O)};var ic=qa.extend({options:{padding:.1},initialize:function(v){ot(this,v),He(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var v={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(v.zoomanim=this._onAnimZoom),v},_onAnimZoom:function(v){this._updateTransform(v.center,v.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(v,O){var W=this._map.getZoomScale(O,this._zoom),he=this._map.getSize().multiplyBy(.5+this.options.padding),Ie=this._map.project(this._center,O),Ye=he.multiplyBy(-W).add(Ie).subtract(this._map._getNewPixelOrigin(v,O));pt.any3d?mt(this._container,Ye,W):$t(this._container,Ye)},_reset:function(){for(var v in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[v]._reset()},_onZoomEnd:function(){for(var v in this._layers)this._layers[v]._project()},_updatePaths:function(){for(var v in this._layers)this._layers[v]._update()},_update:function(){var v=this.options.padding,O=this._map.getSize(),W=this._map.containerPointToLayerPoint(O.multiplyBy(-v)).round();this._bounds=new yr(W,W.add(O.multiplyBy(1+2*v)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bs=ic.extend({options:{tolerance:0},getEvents:function(){var v=ic.prototype.getEvents.call(this);return v.viewprereset=this._onViewPreReset,v},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ic.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var v=this._container=document.createElement("canvas");Qr(v,"mousemove",this._onMouseMove,this),Qr(v,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qr(v,"mouseout",this._handleMouseOut,this),v._leaflet_disable_events=!0,this._ctx=v.getContext("2d")},_destroyContainer:function(){It(this._redrawRequest),delete this._ctx,ne(this._container),na(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var O in this._redrawBounds=null,this._layers)this._layers[O]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ic.prototype._update.call(this);var v=this._bounds,O=this._container,W=v.getSize(),he=pt.retina?2:1;$t(O,v.min),O.width=he*W.x,O.height=he*W.y,O.style.width=W.x+"px",O.style.height=W.y+"px",pt.retina&&this._ctx.scale(2,2),this._ctx.translate(-v.min.x,-v.min.y),this.fire("update")}},_reset:function(){ic.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(v){this._updateDashArray(v),this._layers[He(v)]=v;var O=v._order={layer:v,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=O),this._drawLast=O,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(v){this._requestRedraw(v)},_removePath:function(v){var O=v._order,W=O.next,he=O.prev;W?W.prev=he:this._drawLast=he,he?he.next=W:this._drawFirst=W,delete v._order,delete this._layers[He(v)],this._requestRedraw(v)},_updatePath:function(v){this._extendRedrawBounds(v),v._project(),v._update(),this._requestRedraw(v)},_updateStyle:function(v){this._updateDashArray(v),this._requestRedraw(v)},_updateDashArray:function(v){if("string"==typeof v.options.dashArray){var he,Ie,O=v.options.dashArray.split(/[, ]+/),W=[];for(Ie=0;Ie<O.length;Ie++){if(he=Number(O[Ie]),isNaN(he))return;W.push(he)}v.options._dashArray=W}else v.options._dashArray=v.options.dashArray},_requestRedraw:function(v){this._map&&(this._extendRedrawBounds(v),this._redrawRequest=this._redrawRequest||fi(this._redraw,this))},_extendRedrawBounds:function(v){if(v._pxBounds){var O=(v.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new yr,this._redrawBounds.extend(v._pxBounds.min.subtract([O,O])),this._redrawBounds.extend(v._pxBounds.max.add([O,O]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var v=this._redrawBounds;if(v){var O=v.getSize();this._ctx.clearRect(v.min.x,v.min.y,O.x,O.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var v,O=this._redrawBounds;if(this._ctx.save(),O){var W=O.getSize();this._ctx.beginPath(),this._ctx.rect(O.min.x,O.min.y,W.x,W.y),this._ctx.clip()}this._drawing=!0;for(var he=this._drawFirst;he;he=he.next)v=he.layer,(!O||v._pxBounds&&v._pxBounds.intersects(O))&&v._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(v,O){if(this._drawing){var W,he,Ie,Ye,ni=v._parts,Ri=ni.length,on=this._ctx;if(Ri){for(on.beginPath(),W=0;W<Ri;W++){for(he=0,Ie=ni[W].length;he<Ie;he++)on[he?"lineTo":"moveTo"]((Ye=ni[W][he]).x,Ye.y);O&&on.closePath()}this._fillStroke(on,v)}}},_updateCircle:function(v){if(this._drawing&&!v._empty()){var O=v._point,W=this._ctx,he=Math.max(Math.round(v._radius),1),Ie=(Math.max(Math.round(v._radiusY),1)||he)/he;1!==Ie&&(W.save(),W.scale(1,Ie)),W.beginPath(),W.arc(O.x,O.y/Ie,he,0,2*Math.PI,!1),1!==Ie&&W.restore(),this._fillStroke(W,v)}},_fillStroke:function(v,O){var W=O.options;W.fill&&(v.globalAlpha=W.fillOpacity,v.fillStyle=W.fillColor||W.color,v.fill(W.fillRule||"evenodd")),W.stroke&&0!==W.weight&&(v.setLineDash&&v.setLineDash(O.options&&O.options._dashArray||[]),v.globalAlpha=W.opacity,v.lineWidth=W.weight,v.strokeStyle=W.color,v.lineCap=W.lineCap,v.lineJoin=W.lineJoin,v.stroke())},_onClick:function(v){for(var W,he,O=this._map.mouseEventToLayerPoint(v),Ie=this._drawFirst;Ie;Ie=Ie.next)(W=Ie.layer).options.interactive&&W._containsPoint(O)&&("click"!==v.type&&"preclick"!==v.type||!this._map._draggableMoved(W))&&(he=W);this._fireEvent(!!he&&[he],v)},_onMouseMove:function(v){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var O=this._map.mouseEventToLayerPoint(v);this._handleMouseHover(v,O)}},_handleMouseOut:function(v){var O=this._hoveredLayer;O&&(ze(this._container,"leaflet-interactive"),this._fireEvent([O],v,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(v,O){if(!this._mouseHoverThrottled){for(var W,he,Ie=this._drawFirst;Ie;Ie=Ie.next)(W=Ie.layer).options.interactive&&W._containsPoint(O)&&(he=W);he!==this._hoveredLayer&&(this._handleMouseOut(v),he&&(Se(this._container,"leaflet-interactive"),this._fireEvent([he],v,"mouseover"),this._hoveredLayer=he)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],v),this._mouseHoverThrottled=!0,setTimeout(t(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(v,O,W){this._map._fireDOMEvent(O,W||O.type,v)},_bringToFront:function(v){var O=v._order;if(O){var W=O.next,he=O.prev;if(!W)return;W.prev=he,he?he.next=W:W&&(this._drawFirst=W),O.prev=this._drawLast,this._drawLast.next=O,O.next=null,this._drawLast=O,this._requestRedraw(v)}},_bringToBack:function(v){var O=v._order;if(O){var W=O.next,he=O.prev;if(!he)return;he.next=W,W?W.prev=he:he&&(this._drawLast=he),O.prev=null,O.next=this._drawFirst,this._drawFirst.prev=O,this._drawFirst=O,this._requestRedraw(v)}}});function Fu(v){return pt.canvas?new bs(v):null}var Yc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(v){return document.createElement("<lvml:"+v+' class="lvml">')}}catch{}return function(v){return document.createElement("<"+v+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),il={_initContainer:function(){this._container=J("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ic.prototype._update.call(this),this.fire("update"))},_initPath:function(v){var O=v._container=Yc("shape");Se(O,"leaflet-vml-shape "+(this.options.className||"")),O.coordsize="1 1",v._path=Yc("path"),O.appendChild(v._path),this._updateStyle(v),this._layers[He(v)]=v},_addPath:function(v){var O=v._container;this._container.appendChild(O),v.options.interactive&&v.addInteractiveTarget(O)},_removePath:function(v){var O=v._container;ne(O),v.removeInteractiveTarget(O),delete this._layers[He(v)]},_updateStyle:function(v){var O=v._stroke,W=v._fill,he=v.options,Ie=v._container;Ie.stroked=!!he.stroke,Ie.filled=!!he.fill,he.stroke?(O||(O=v._stroke=Yc("stroke")),Ie.appendChild(O),O.weight=he.weight+"px",O.color=he.color,O.opacity=he.opacity,O.dashStyle=he.dashArray?gt(he.dashArray)?he.dashArray.join(" "):he.dashArray.replace(/( *, *)/g," "):"",O.endcap=he.lineCap.replace("butt","flat"),O.joinstyle=he.lineJoin):O&&(Ie.removeChild(O),v._stroke=null),he.fill?(W||(W=v._fill=Yc("fill")),Ie.appendChild(W),W.color=he.fillColor||he.color,W.opacity=he.fillOpacity):W&&(Ie.removeChild(W),v._fill=null)},_updateCircle:function(v){var O=v._point.round(),W=Math.round(v._radius),he=Math.round(v._radiusY||W);this._setPath(v,v._empty()?"M0 0":"AL "+O.x+","+O.y+" "+W+","+he+" 0,23592600")},_setPath:function(v,O){v._path.v=O},_bringToFront:function(v){ye(v._container)},_bringToBack:function(v){De(v._container)}},Nl=pt.vml?Yc:$n,zl=ic.extend({_initContainer:function(){this._container=Nl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Nl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),na(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ic.prototype._update.call(this);var v=this._bounds,O=v.getSize(),W=this._container;(!this._svgSize||!this._svgSize.equals(O))&&(this._svgSize=O,W.setAttribute("width",O.x),W.setAttribute("height",O.y)),$t(W,v.min),W.setAttribute("viewBox",[v.min.x,v.min.y,O.x,O.y].join(" ")),this.fire("update")}},_initPath:function(v){var O=v._path=Nl("path");v.options.className&&Se(O,v.options.className),v.options.interactive&&Se(O,"leaflet-interactive"),this._updateStyle(v),this._layers[He(v)]=v},_addPath:function(v){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(v._path),v.addInteractiveTarget(v._path)},_removePath:function(v){ne(v._path),v.removeInteractiveTarget(v._path),delete this._layers[He(v)]},_updatePath:function(v){v._project(),v._update()},_updateStyle:function(v){var O=v._path,W=v.options;O&&(W.stroke?(O.setAttribute("stroke",W.color),O.setAttribute("stroke-opacity",W.opacity),O.setAttribute("stroke-width",W.weight),O.setAttribute("stroke-linecap",W.lineCap),O.setAttribute("stroke-linejoin",W.lineJoin),W.dashArray?O.setAttribute("stroke-dasharray",W.dashArray):O.removeAttribute("stroke-dasharray"),W.dashOffset?O.setAttribute("stroke-dashoffset",W.dashOffset):O.removeAttribute("stroke-dashoffset")):O.setAttribute("stroke","none"),W.fill?(O.setAttribute("fill",W.fillColor||W.color),O.setAttribute("fill-opacity",W.fillOpacity),O.setAttribute("fill-rule",W.fillRule||"evenodd")):O.setAttribute("fill","none"))},_updatePoly:function(v,O){this._setPath(v,ar(v._parts,O))},_updateCircle:function(v){var O=v._point,W=Math.max(Math.round(v._radius),1),Ie="a"+W+","+(Math.max(Math.round(v._radiusY),1)||W)+" 0 1,0 ",Ye=v._empty()?"M0 0":"M"+(O.x-W)+","+O.y+Ie+2*W+",0 "+Ie+2*-W+",0 ";this._setPath(v,Ye)},_setPath:function(v,O){v._path.setAttribute("d",O)},_bringToFront:function(v){ye(v._path)},_bringToBack:function(v){De(v._path)}});function Yl(v){return pt.svg||pt.vml?new zl(v):null}pt.vml&&zl.include(il),Xa.include({getRenderer:function(v){var O=v.options.renderer||this._getPaneRenderer(v.options.pane)||this.options.renderer||this._renderer;return O||(O=this._renderer=this._createRenderer()),this.hasLayer(O)||this.addLayer(O),O},_getPaneRenderer:function(v){if("overlayPane"===v||void 0===v)return!1;var O=this._paneRenderers[v];return void 0===O&&(O=this._createRenderer({pane:v}),this._paneRenderers[v]=O),O},_createRenderer:function(v){return this.options.preferCanvas&&Fu(v)||Yl(v)}});var Xo=sl.extend({initialize:function(v,O){sl.prototype.initialize.call(this,this._boundsToLatLngs(v),O)},setBounds:function(v){return this.setLatLngs(this._boundsToLatLngs(v))},_boundsToLatLngs:function(v){return[(v=Mi(v)).getSouthWest(),v.getNorthWest(),v.getNorthEast(),v.getSouthEast()]}});zl.create=Nl,zl.pointsToPath=ar,zc.geometryToLayer=rd,zc.coordsToLatLng=pl,zc.coordsToLatLngs=Ss,zc.latLngToCoords=ad,zc.latLngsToCoords=or,zc.getFeature=Bl,zc.asFeature=Ou,Xa.mergeOptions({boxZoom:!0});var ho=ts.extend({initialize:function(v){this._map=v,this._container=v._container,this._pane=v._panes.overlayPane,this._resetStateTimeout=0,v.on("unload",this._destroy,this)},addHooks:function(){Qr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){na(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(v){if(!v.shiftKey||1!==v.which&&1!==v.button)return!1;this._clearDeferredResetState(),this._resetState(),Li(),cr(),this._startPoint=this._map.mouseEventToContainerPoint(v),Qr(document,{contextmenu:Rl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(v){this._moved||(this._moved=!0,this._box=J("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(v);var O=new yr(this._point,this._startPoint),W=O.getSize();$t(this._box,O.min),this._box.style.width=W.x+"px",this._box.style.height=W.y+"px"},_finish:function(){this._moved&&(ne(this._box),ze(this._container,"leaflet-crosshair")),Ji(),Wr(),na(document,{contextmenu:Rl,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(v){if((1===v.which||1===v.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(t(this._resetState,this),0);var O=new Nr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(O).fire("boxzoomend",{boxZoomBounds:O})}},_onKeyDown:function(v){27===v.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xa.addInitHook("addHandler","boxZoom",ho),Xa.mergeOptions({doubleClickZoom:!0});var kl=ts.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(v){var O=this._map,W=O.getZoom(),he=O.options.zoomDelta,Ie=v.originalEvent.shiftKey?W-he:W+he;"center"===O.options.doubleClickZoom?O.setZoom(Ie):O.setZoomAround(v.containerPoint,Ie)}});Xa.addInitHook("addHandler","doubleClickZoom",kl),Xa.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Gc=ts.extend({addHooks:function(){if(!this._draggable){var v=this._map;this._draggable=new du(v._mapPane,v._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),v.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),v.on("zoomend",this._onZoomEnd,this),v.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var v=this._map;if(v._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var O=Mi(this._map.options.maxBounds);this._offsetLimit=fr(this._map.latLngToContainerPoint(O.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(O.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;v.fire("movestart").fire("dragstart"),v.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(v){if(this._map.options.inertia){var O=this._lastTime=+new Date,W=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(W),this._times.push(O),this._prunePositions(O)}this._map.fire("move",v).fire("drag",v)},_prunePositions:function(v){for(;this._positions.length>1&&v-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var v=this._map.getSize().divideBy(2),O=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=O.subtract(v).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(v,O){return v-(v-O)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var v=this._draggable._newPos.subtract(this._draggable._startPos),O=this._offsetLimit;v.x<O.min.x&&(v.x=this._viscousLimit(v.x,O.min.x)),v.y<O.min.y&&(v.y=this._viscousLimit(v.y,O.min.y)),v.x>O.max.x&&(v.x=this._viscousLimit(v.x,O.max.x)),v.y>O.max.y&&(v.y=this._viscousLimit(v.y,O.max.y)),this._draggable._newPos=this._draggable._startPos.add(v)}},_onPreDragWrap:function(){var v=this._worldWidth,O=Math.round(v/2),W=this._initialWorldOffset,he=this._draggable._newPos.x,Ie=(he-O+W)%v+O-W,Ye=(he+O+W)%v-O-W,ni=Math.abs(Ie+W)<Math.abs(Ye+W)?Ie:Ye;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ni},_onDragEnd:function(v){var O=this._map,W=O.options,he=!W.inertia||v.noInertia||this._times.length<2;if(O.fire("dragend",v),he)O.fire("moveend");else{this._prunePositions(+new Date);var Ie=this._lastPos.subtract(this._positions[0]),ni=W.easeLinearity,Ri=Ie.multiplyBy(ni/((this._lastTime-this._times[0])/1e3)),on=Ri.distanceTo([0,0]),Zn=Math.min(W.inertiaMaxSpeed,on),Ar=Ri.multiplyBy(Zn/on),gr=Zn/(W.inertiaDeceleration*ni),Ha=Ar.multiplyBy(-gr/2).round();Ha.x||Ha.y?(Ha=O._limitOffset(Ha,O.options.maxBounds),fi(function(){O.panBy(Ha,{duration:gr,easeLinearity:ni,noMoveStart:!0,animate:!0})})):O.fire("moveend")}}});Xa.addInitHook("addHandler","dragging",Gc),Xa.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Gl=ts.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(v){this._map=v,this._setPanDelta(v.options.keyboardPanDelta),this._setZoomDelta(v.options.zoomDelta)},addHooks:function(){var v=this._map._container;v.tabIndex<=0&&(v.tabIndex="0"),Qr(v,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),na(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var v=document.body,O=document.documentElement,W=v.scrollTop||O.scrollTop,he=v.scrollLeft||O.scrollLeft;this._map._container.focus(),window.scrollTo(he,W)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(v){var he,Ie,O=this._panKeys={},W=this.keyCodes;for(he=0,Ie=W.left.length;he<Ie;he++)O[W.left[he]]=[-1*v,0];for(he=0,Ie=W.right.length;he<Ie;he++)O[W.right[he]]=[v,0];for(he=0,Ie=W.down.length;he<Ie;he++)O[W.down[he]]=[0,v];for(he=0,Ie=W.up.length;he<Ie;he++)O[W.up[he]]=[0,-1*v]},_setZoomDelta:function(v){var he,Ie,O=this._zoomKeys={},W=this.keyCodes;for(he=0,Ie=W.zoomIn.length;he<Ie;he++)O[W.zoomIn[he]]=v;for(he=0,Ie=W.zoomOut.length;he<Ie;he++)O[W.zoomOut[he]]=-v},_addHooks:function(){Qr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){na(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(v){if(!(v.altKey||v.ctrlKey||v.metaKey)){var he,O=v.keyCode,W=this._map;if(O in this._panKeys){if(!W._panAnim||!W._panAnim._inProgress)if(he=this._panKeys[O],v.shiftKey&&(he=Nn(he).multiplyBy(3)),W.options.maxBounds&&(he=W._limitOffset(Nn(he),W.options.maxBounds)),W.options.worldCopyJump){var Ie=W.wrapLatLng(W.unproject(W.project(W.getCenter()).add(he)));W.panTo(Ie)}else W.panBy(he)}else if(O in this._zoomKeys)W.setZoom(W.getZoom()+(v.shiftKey?3:1)*this._zoomKeys[O]);else{if(27!==O||!W._popup||!W._popup.options.closeOnEscapeKey)return;W.closePopup()}Rl(v)}}});Xa.addInitHook("addHandler","keyboard",Gl),Xa.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fu=ts.extend({addHooks:function(){Qr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){na(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(v){var O=no(v),W=this._map.options.wheelDebounceTime;this._delta+=O,this._lastMousePos=this._map.mouseEventToContainerPoint(v),this._startTime||(this._startTime=+new Date);var he=Math.max(W-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(t(this._performZoom,this),he),Rl(v)},_performZoom:function(){var v=this._map,O=v.getZoom(),W=this._map.options.zoomSnap||0;v._stop();var Ie=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,Ye=W?Math.ceil(Ie/W)*W:Ie,ni=v._limitZoom(O+(this._delta>0?Ye:-Ye))-O;this._delta=0,this._startTime=null,ni&&("center"===v.options.scrollWheelZoom?v.setZoom(O+ni):v.setZoomAround(this._lastMousePos,O+ni))}});Xa.addInitHook("addHandler","scrollWheelZoom",fu);Xa.mergeOptions({tapHold:pt.touchNative&&pt.safari&&pt.mobile,tapTolerance:15});var pu=ts.extend({addHooks:function(){Qr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){na(this._map._container,"touchstart",this._onDown,this)},_onDown:function(v){if(clearTimeout(this._holdTimeout),1===v.touches.length){var O=v.touches[0];this._startPos=this._newPos=new tn(O.clientX,O.clientY),this._holdTimeout=setTimeout(t(function(){this._cancel(),this._isTapValid()&&(Qr(document,"touchend",fs),Qr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",O))},this),600),Qr(document,"touchend touchcancel contextmenu",this._cancel,this),Qr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function v(){na(document,"touchend",fs),na(document,"touchend touchcancel",v)},_cancel:function(){clearTimeout(this._holdTimeout),na(document,"touchend touchcancel contextmenu",this._cancel,this),na(document,"touchmove",this._onMove,this)},_onMove:function(v){var O=v.touches[0];this._newPos=new tn(O.clientX,O.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(v,O){var W=new MouseEvent(v,{bubbles:!0,cancelable:!0,view:window,screenX:O.screenX,screenY:O.screenY,clientX:O.clientX,clientY:O.clientY});W._simulated=!0,O.target.dispatchEvent(W)}});Xa.addInitHook("addHandler","tapHold",pu),Xa.mergeOptions({touchZoom:pt.touch,bounceAtZoomLimits:!0});var yo=ts.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),Qr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),na(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(v){var O=this._map;if(v.touches&&2===v.touches.length&&!O._animatingZoom&&!this._zooming){var W=O.mouseEventToContainerPoint(v.touches[0]),he=O.mouseEventToContainerPoint(v.touches[1]);this._centerPoint=O.getSize()._divideBy(2),this._startLatLng=O.containerPointToLatLng(this._centerPoint),"center"!==O.options.touchZoom&&(this._pinchStartLatLng=O.containerPointToLatLng(W.add(he)._divideBy(2))),this._startDist=W.distanceTo(he),this._startZoom=O.getZoom(),this._moved=!1,this._zooming=!0,O._stop(),Qr(document,"touchmove",this._onTouchMove,this),Qr(document,"touchend touchcancel",this._onTouchEnd,this),fs(v)}},_onTouchMove:function(v){if(v.touches&&2===v.touches.length&&this._zooming){var O=this._map,W=O.mouseEventToContainerPoint(v.touches[0]),he=O.mouseEventToContainerPoint(v.touches[1]),Ie=W.distanceTo(he)/this._startDist;if(this._zoom=O.getScaleZoom(Ie,this._startZoom),!O.options.bounceAtZoomLimits&&(this._zoom<O.getMinZoom()&&Ie<1||this._zoom>O.getMaxZoom()&&Ie>1)&&(this._zoom=O._limitZoom(this._zoom)),"center"===O.options.touchZoom){if(this._center=this._startLatLng,1===Ie)return}else{var Ye=W._add(he)._divideBy(2)._subtract(this._centerPoint);if(1===Ie&&0===Ye.x&&0===Ye.y)return;this._center=O.unproject(O.project(this._pinchStartLatLng,this._zoom).subtract(Ye),this._zoom)}this._moved||(O._moveStart(!0,!1),this._moved=!0),It(this._animRequest);var ni=t(O._move,O,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=fi(ni,this,!0),fs(v)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,It(this._animRequest),na(document,"touchmove",this._onTouchMove,this),na(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Xa.addInitHook("addHandler","touchZoom",yo),Xa.BoxZoom=ho,Xa.DoubleClickZoom=kl,Xa.Drag=Gc,Xa.Keyboard=Gl,Xa.ScrollWheelZoom=fu,Xa.TapHold=pu,Xa.TouchZoom=yo,Zt.Bounds=yr,Zt.Browser=pt,Zt.CRS=ia,Zt.Canvas=bs,Zt.Circle=eu,Zt.CircleMarker=Cl,Zt.Class=Ni,Zt.Control=Es,Zt.DivIcon=ml,Zt.DivOverlay=vs,Zt.DomEvent=Od,Zt.DomUtil=va,Zt.Draggable=du,Zt.Evented=Ki,Zt.FeatureGroup=$a,Zt.GeoJSON=zc,Zt.GridLayer=Hs,Zt.Handler=ts,Zt.Icon=bc,Zt.ImageOverlay=pn,Zt.LatLng=In,Zt.LatLngBounds=Nr,Zt.Layer=qa,Zt.LayerGroup=Nc,Zt.LineUtil=Wo,Zt.Map=Xa,Zt.Marker=Qc,Zt.Mixin=ra,Zt.Path=el,Zt.Point=tn,Zt.PolyUtil=Ks,Zt.Polygon=sl,Zt.Polyline=_o,Zt.Popup=El,Zt.PosAnimation=uu,Zt.Projection=oa,Zt.Rectangle=Xo,Zt.Renderer=ic,Zt.SVG=zl,Zt.SVGOverlay=Os,Zt.TileLayer=xs,Zt.Tooltip=ol,Zt.Transformation=Ya,Zt.Util=Si,Zt.VideoOverlay=Fr,Zt.bind=t,Zt.bounds=fr,Zt.canvas=Fu,Zt.circle=function Rs(v,O,W){return new eu(v,O,W)},Zt.circleMarker=function wc(v,O){return new Cl(v,O)},Zt.control=ks,Zt.divIcon=function tc(v){return new ml(v)},Zt.extend=xt,Zt.featureGroup=function(v,O){return new $a(v,O)},Zt.geoJSON=Cc,Zt.geoJson=Ei,Zt.gridLayer=function tl(v){return new Hs(v)},Zt.icon=function Jc(v){return new bc(v)},Zt.imageOverlay=function(v,O,W){return new pn(v,O,W)},Zt.latLng=Jn,Zt.latLngBounds=Mi,Zt.layerGroup=function(v,O){return new Nc(v,O)},Zt.map=function Ju(v,O){return new Xa(v,O)},Zt.marker=function Qs(v,O){return new Qc(v,O)},Zt.point=Nn,Zt.polygon=function cf(v,O){return new sl(v,O)},Zt.polyline=function Pl(v,O){return new _o(v,O)},Zt.popup=function(v,O){return new El(v,O)},Zt.rectangle=function nc(v,O){return new Xo(v,O)},Zt.setOptions=ot,Zt.stamp=He,Zt.svg=Yl,Zt.svgOverlay=function Yo(v,O,W){return new Os(v,O,W)},Zt.tileLayer=Lu,Zt.tooltip=function(v,O){return new ol(v,O)},Zt.transformation=ka,Zt.version="1.9.4",Zt.videoOverlay=function Wa(v,O,W){return new Fr(v,O,W)};var dr=window.L;Zt.noConflict=function(){return window.L=dr,this},window.L=Zt}(ja)},4940:function(uo,ja,Zt){var T;uo=Zt.nmd(uo),function(){var xt,He="Expected a function",Me="__lodash_hash_undefined__",nt="__lodash_placeholder__",yn=1/0,Nn=9007199254740991,Nr=4294967295,Jn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ia="[object Arguments]",jr="[object Array]",Mn="[object Boolean]",Ya="[object Date]",Ma="[object Error]",pr="[object Function]",$n="[object GeneratorFunction]",ar="[object Map]",Sn="[object Number]",Gr="[object Object]",Vn="[object Promise]",ur="[object RegExp]",lr="[object Set]",Pa="[object String]",Ga="[object Symbol]",Ra="[object WeakMap]",xr="[object ArrayBuffer]",da="[object DataView]",Mr="[object Float32Array]",go="[object Float64Array]",Dr="[object Int8Array]",Aa="[object Int16Array]",fa="[object Int32Array]",Ia="[object Uint8Array]",Fa="[object Uint8ClampedArray]",Et="[object Uint16Array]",je="[object Uint32Array]",Je=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ai=/&(?:amp|lt|gt|quot|#39);/g,Ci=/[&<>"']/g,Ii=RegExp(ai.source),Mt=RegExp(Ci.source),Bi=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,_n=/<%=([\s\S]+?)%>/g,Vi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qn=/^\w*$/,Yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ut=/[\\^$.*+?()[\]{}|]/g,vt=RegExp(Ut.source),pt=/^\s+/,Ke=/\s/,rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ot=/\{\n\/\* \[wrapped with (.+)\] \*/,ci=/,? & /,en=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$i=/[()=,{}\[\]\/\s]/,En=/\\(\\)?/g,st=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bt=/\w*$/,ke=/^[-+]0x[0-9a-f]+$/i,wt=/^0b[01]+$/i,jt=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Qt=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,l=/($^)/,u=/['\n\r\u2028\u2029\\]/g,m="\\ud800-\\udfff",M="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",N="\\u2700-\\u27bf",H="a-z\\xdf-\\xf6\\xf8-\\xff",ye="A-Z\\xc0-\\xd6\\xd8-\\xde",De="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ze="["+m+"]",U="["+Pe+"]",le="["+M+"]",we="\\d+",Le="["+N+"]",$e="["+H+"]",mt="[^"+m+Pe+we+N+H+ye+"]",$t="\\ud83c[\\udffb-\\udfff]",Li="[^"+m+"]",Ji="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",Un="["+ye+"]",Wr="(?:"+$e+"|"+mt+")",pa="(?:"+Un+"|"+mt+")",la="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ta="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",es="(?:"+le+"|"+$t+")?",ms="["+De+"]?",Ms=ms+es+"(?:\\u200d(?:"+[Li,Ji,ln].join("|")+")"+ms+es+")*",na="(?:"+[Le,Ji,ln].join("|")+")"+Ms,Ns="(?:"+[Li+le+"?",le,Ji,ln,ze].join("|")+")",Ku=RegExp("['\u2019]","g"),Pc=RegExp(le,"g"),Ws=RegExp($t+"(?="+$t+")|"+Ns+Ms,"g"),xc=RegExp([Un+"?"+$e+"+"+la+"(?="+[U,Un,"$"].join("|")+")",pa+"+"+Ta+"(?="+[U,Un+Wr,"$"].join("|")+")",Un+"?"+Wr+"+"+la,Un+"+"+Ta,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",we,na].join("|"),"g"),Rd=RegExp("[\\u200d"+m+M+De+"]"),$r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rl=-1,Zs={};Zs[Mr]=Zs[go]=Zs[Dr]=Zs[Aa]=Zs[fa]=Zs[Ia]=Zs[Fa]=Zs[Et]=Zs[je]=!0,Zs[ia]=Zs[jr]=Zs[xr]=Zs[Mn]=Zs[da]=Zs[Ya]=Zs[Ma]=Zs[pr]=Zs[ar]=Zs[Sn]=Zs[Gr]=Zs[ur]=Zs[lr]=Zs[Pa]=Zs[Ra]=!1;var gs={};gs[ia]=gs[jr]=gs[xr]=gs[da]=gs[Mn]=gs[Ya]=gs[Mr]=gs[go]=gs[Dr]=gs[Aa]=gs[fa]=gs[ar]=gs[Sn]=gs[Gr]=gs[ur]=gs[lr]=gs[Pa]=gs[Ga]=gs[Ia]=gs[Fa]=gs[Et]=gs[je]=!0,gs[Ma]=gs[pr]=gs[Ra]=!1;var Od={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uu=parseFloat,Xa=parseInt,Ju="object"==typeof global&&global&&global.Object===Object&&global,Es="object"==typeof self&&self&&self.Object===Object&&self,ks=Ju||Es||Function("return this")(),gd=ja&&!ja.nodeType&&ja,fl=gd&&uo&&!uo.nodeType&&uo,Bc=fl&&fl.exports===gd,Au=Bc&&Ju.process,No=function(){try{return fl&&fl.require&&fl.require("util").types||Au&&Au.binding&&Au.binding("util")}catch{}}(),qd=No&&No.isArrayBuffer,vd=No&&No.isDate,Cs=No&&No.isMap,Jl=No&&No.isRegExp,ts=No&&No.isSet,ra=No&&No.isTypedArray;function bo(Ei,pn,nn){switch(nn.length){case 0:return Ei.call(pn);case 1:return Ei.call(pn,nn[0]);case 2:return Ei.call(pn,nn[0],nn[1]);case 3:return Ei.call(pn,nn[0],nn[1],nn[2])}return Ei.apply(pn,nn)}function du(Ei,pn,nn,Fr){for(var Wa=-1,Os=null==Ei?0:Ei.length;++Wa<Os;){var Yo=Ei[Wa];pn(Fr,Yo,nn(Yo),Ei)}return Fr}function zo(Ei,pn){for(var nn=-1,Fr=null==Ei?0:Ei.length;++nn<Fr&&!1!==pn(Ei[nn],nn,Ei););return Ei}function Zd(Ei,pn){for(var nn=null==Ei?0:Ei.length;nn--&&!1!==pn(Ei[nn],nn,Ei););return Ei}function Ql(Ei,pn){for(var nn=-1,Fr=null==Ei?0:Ei.length;++nn<Fr;)if(!pn(Ei[nn],nn,Ei))return!1;return!0}function Ks(Ei,pn){for(var nn=-1,Fr=null==Ei?0:Ei.length,Wa=0,Os=[];++nn<Fr;){var Yo=Ei[nn];pn(Yo,nn,Ei)&&(Os[Wa++]=Yo)}return Os}function wl(Ei,pn){return!(null==Ei||!Ei.length)&&wo(Ei,pn,0)>-1}function co(Ei,pn,nn){for(var Fr=-1,Wa=null==Ei?0:Ei.length;++Fr<Wa;)if(nn(pn,Ei[Fr]))return!0;return!1}function zs(Ei,pn){for(var nn=-1,Fr=null==Ei?0:Ei.length,Wa=Array(Fr);++nn<Fr;)Wa[nn]=pn(Ei[nn],nn,Ei);return Wa}function Ts(Ei,pn){for(var nn=-1,Fr=pn.length,Wa=Ei.length;++nn<Fr;)Ei[Wa+nn]=pn[nn];return Ei}function vo(Ei,pn,nn,Fr){var Wa=-1,Os=null==Ei?0:Ei.length;for(Fr&&Os&&(nn=Ei[++Wa]);++Wa<Os;)nn=pn(nn,Ei[Wa],Wa,Ei);return nn}function Qu(Ei,pn,nn,Fr){var Wa=null==Ei?0:Ei.length;for(Fr&&Wa&&(nn=Ei[--Wa]);Wa--;)nn=pn(nn,Ei[Wa],Wa,Ei);return nn}function ec(Ei,pn){for(var nn=-1,Fr=null==Ei?0:Ei.length;++nn<Fr;)if(pn(Ei[nn],nn,Ei))return!0;return!1}var Oa=id("length");function Iu(Ei,pn,nn){var Fr;return nn(Ei,function(Wa,Os,Yo){if(pn(Wa,Os,Yo))return Fr=Os,!1}),Fr}function Ys(Ei,pn,nn,Fr){for(var Wa=Ei.length,Os=nn+(Fr?1:-1);Fr?Os--:++Os<Wa;)if(pn(Ei[Os],Os,Ei))return Os;return-1}function wo(Ei,pn,nn){return pn==pn?function zc(Ei,pn,nn){for(var Fr=nn-1,Wa=Ei.length;++Fr<Wa;)if(Ei[Fr]===pn)return Fr;return-1}(Ei,pn,nn):Ys(Ei,td,nn)}function ps(Ei,pn,nn,Fr){for(var Wa=nn-1,Os=Ei.length;++Wa<Os;)if(Fr(Ei[Wa],pn))return Wa;return-1}function td(Ei){return Ei!=Ei}function Wo(Ei,pn){var nn=null==Ei?0:Ei.length;return nn?Ol(Ei,pn)/nn:NaN}function id(Ei){return function(pn){return null==pn?xt:pn[Ei]}}function Mu(Ei){return function(pn){return null==Ei?xt:Ei[pn]}}function oa(Ei,pn,nn,Fr,Wa){return Wa(Ei,function(Os,Yo,vs){nn=Fr?(Fr=!1,Os):pn(nn,Os,Yo,vs)}),nn}function Ol(Ei,pn){for(var nn,Fr=-1,Wa=Ei.length;++Fr<Wa;){var Os=pn(Ei[Fr]);Os!==xt&&(nn=nn===xt?Os:nn+Os)}return nn}function Ld(Ei,pn){for(var nn=-1,Fr=Array(Ei);++nn<Ei;)Fr[nn]=pn(nn);return Fr}function Nc(Ei){return Ei&&Ei.slice(0,Ss(Ei)+1).replace(pt,"")}function Ll(Ei){return function(pn){return Ei(pn)}}function $a(Ei,pn){return zs(pn,function(nn){return Ei[nn]})}function Kc(Ei,pn){return Ei.has(pn)}function bc(Ei,pn){for(var nn=-1,Fr=Ei.length;++nn<Fr&&wo(pn,Ei[nn],0)>-1;);return nn}function Jc(Ei,pn){for(var nn=Ei.length;nn--&&wo(pn,Ei[nn],0)>-1;);return nn}var nd=Mu({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Qc=Mu({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qs(Ei){return"\\"+Od[Ei]}function Cl(Ei){return Rd.test(Ei)}function Rs(Ei){var pn=-1,nn=Array(Ei.size);return Ei.forEach(function(Fr,Wa){nn[++pn]=[Wa,Fr]}),nn}function _o(Ei,pn){return function(nn){return Ei(pn(nn))}}function Pl(Ei,pn){for(var nn=-1,Fr=Ei.length,Wa=0,Os=[];++nn<Fr;){var Yo=Ei[nn];(Yo===pn||Yo===nt)&&(Ei[nn]=nt,Os[Wa++]=nn)}return Os}function sl(Ei){var pn=-1,nn=Array(Ei.size);return Ei.forEach(function(Fr){nn[++pn]=Fr}),nn}function Fl(Ei){return Cl(Ei)?function or(Ei){for(var pn=Ws.lastIndex=0;Ws.test(Ei);)++pn;return pn}(Ei):Oa(Ei)}function pl(Ei){return Cl(Ei)?function Bl(Ei){return Ei.match(Ws)||[]}(Ei):function ed(Ei){return Ei.split("")}(Ei)}function Ss(Ei){for(var pn=Ei.length;pn--&&Ke.test(Ei.charAt(pn)););return pn}var ad=Mu({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Cc=function Ei(pn){var C,nn=(pn=null==pn?ks:Cc.defaults(ks.Object(),pn,Cc.pick(ks,fs))).Array,Fr=pn.Date,Wa=pn.Error,Os=pn.Function,Yo=pn.Math,vs=pn.Object,El=pn.RegExp,sd=pn.String,ol=pn.TypeError,tu=nn.prototype,tc=vs.prototype,Hs=pn["__core-js_shared__"],tl=Os.prototype.toString,xs=tc.hasOwnProperty,Lu=0,gl=(C=/[^.]+$/.exec(Hs&&Hs.keys&&Hs.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",Pu=tc.toString,ic=tl.call(vs),bs=ks._,Fu=El("^"+tl.call(xs).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yc=Bc?pn.Buffer:xt,il=pn.Symbol,Nl=pn.Uint8Array,zl=Yc?Yc.allocUnsafe:xt,Yl=_o(vs.getPrototypeOf,vs),Xo=vs.create,nc=tc.propertyIsEnumerable,ho=tu.splice,kl=il?il.isConcatSpreadable:xt,Gc=il?il.iterator:xt,Gl=il?il.toStringTag:xt,fu=function(){try{var C=Rh(vs,"defineProperty");return C({},"",{}),C}catch{}}(),Kd=pn.clearTimeout!==ks.clearTimeout&&pn.clearTimeout,pu=Fr&&Fr.now!==ks.Date.now&&Fr.now,yo=pn.setTimeout!==ks.setTimeout&&pn.setTimeout,dr=Yo.ceil,v=Yo.floor,O=vs.getOwnPropertySymbols,W=Yc?Yc.isBuffer:xt,he=pn.isFinite,Ie=tu.join,Ye=_o(vs.keys,vs),ni=Yo.max,Ri=Yo.min,on=Fr.now,Zn=pn.parseInt,Ar=Yo.random,gr=tu.reverse,Ha=Rh(pn,"DataView"),is=Rh(pn,"Map"),xo=Rh(pn,"Promise"),Va=Rh(pn,"Set"),To=Rh(pn,"WeakMap"),Hl=Rh(vs,"create"),Hc=To&&new To,Qa={},xa=Wh(Ha),Go=Wh(is),ba=Wh(xo),ls=Wh(Va),Ge=Wh(To),se=il?il.prototype:xt,me=se?se.valueOf:xt,Ve=se?se.toString:xt;function Ee(C){if(Xl(C)&&!cs(C)&&!(C instanceof hr)){if(C instanceof Xr)return C;if(xs.call(C,"__wrapped__"))return ao(C)}return new Xr(C)}var xn=function(){function C(){}return function(F){if(!Al(F))return{};if(Xo)return Xo(F);C.prototype=F;var ee=new C;return C.prototype=xt,ee}}();function vr(){}function Xr(C,F){this.__wrapped__=C,this.__actions__=[],this.__chain__=!!F,this.__index__=0,this.__values__=xt}function hr(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nr,this.__views__=[]}function Jd(C){var F=-1,ee=null==C?0:C.length;for(this.clear();++F<ee;){var Ce=C[F];this.set(Ce[0],Ce[1])}}function Ho(C){var F=-1,ee=null==C?0:C.length;for(this.clear();++F<ee;){var Ce=C[F];this.set(Ce[0],Ce[1])}}function Bu(C){var F=-1,ee=null==C?0:C.length;for(this.clear();++F<ee;){var Ce=C[F];this.set(Ce[0],Ce[1])}}function gu(C){var F=-1,ee=null==C?0:C.length;for(this.__data__=new Bu;++F<ee;)this.add(C[F])}function oc(C){var F=this.__data__=new Ho(C);this.size=F.size}function jh(C,F){var ee=cs(C),Ce=!ee&&Bh(C),Qe=!ee&&!Ce&&Af(C),St=!ee&&!Ce&&!Qe&&hh(C),oi=ee||Ce||Qe||St,Di=oi?Ld(C.length,sd):[],ji=Di.length;for(var Wn in C)(F||xs.call(C,Wn))&&(!oi||!("length"==Wn||Qe&&("offset"==Wn||"parent"==Wn)||St&&("buffer"==Wn||"byteLength"==Wn||"byteOffset"==Wn)||cd(Wn,ji)))&&Di.push(Wn);return Di}function k(C){var F=C.length;return F?C[th(0,F-1)]:xt}function f(C,F){return ym(nu(C),Fe(F,0,C.length))}function _(C){return ym(nu(C))}function I(C,F,ee){(ee!==xt&&!Dd(C[F],ee)||ee===xt&&!(F in C))&&be(C,F,ee)}function Y(C,F,ee){var Ce=C[F];(!xs.call(C,F)||!Dd(Ce,ee)||ee===xt&&!(F in C))&&be(C,F,ee)}function V(C,F){for(var ee=C.length;ee--;)if(Dd(C[ee][0],F))return ee;return-1}function Q(C,F,ee,Ce){return Ne(C,function(Qe,St,oi){F(Ce,Qe,ee(Qe),oi)}),Ce}function re(C,F){return C&&_l(F,Ic(F),C)}function be(C,F,ee){"__proto__"==F&&fu?fu(C,F,{configurable:!0,enumerable:!0,value:ee,writable:!0}):C[F]=ee}function xe(C,F){for(var ee=-1,Ce=F.length,Qe=nn(Ce),St=null==C;++ee<Ce;)Qe[ee]=St?xt:xl(C,F[ee]);return Qe}function Fe(C,F,ee){return C==C&&(ee!==xt&&(C=C<=ee?C:ee),F!==xt&&(C=C>=F?C:F)),C}function it(C,F,ee,Ce,Qe,St){var oi,Di=1&F,ji=2&F,Wn=4&F;if(ee&&(oi=Qe?ee(C,Ce,Qe,St):ee(C)),oi!==xt)return oi;if(!Al(C))return C;var Xn=cs(C);if(Xn){if(oi=function mf(C){var F=C.length,ee=new C.constructor(F);return F&&"string"==typeof C[0]&&xs.call(C,"index")&&(ee.index=C.index,ee.input=C.input),ee}(C),!Di)return nu(C,oi)}else{var rr=Tc(C),Hr=rr==pr||rr==$n;if(Af(C))return jf(C,Di);if(rr==Gr||rr==ia||Hr&&!Qe){if(oi=ji||Hr?{}:qf(C),!Di)return ji?function ru(C,F){return _l(C,jc(C),F)}(C,function de(C,F){return C&&_l(F,Eu(F),C)}(oi,C)):function om(C,F){return _l(C,Xf(C),F)}(C,re(oi,C))}else{if(!gs[rr])return Qe?C:{};oi=function kd(C,F,ee){var Ce=C.constructor;switch(F){case xr:return Ul(C);case Mn:case Ya:return new Ce(+C);case da:return function eg(C,F){var ee=F?Ul(C.buffer):C.buffer;return new C.constructor(ee,C.byteOffset,C.byteLength)}(C,ee);case Mr:case go:case Dr:case Aa:case fa:case Ia:case Fa:case Et:case je:return zr(C,ee);case ar:return new Ce;case Sn:case Pa:return new Ce(C);case ur:return function a0(C){var F=new C.constructor(C.source,Bt.exec(C));return F.lastIndex=C.lastIndex,F}(C);case lr:return new Ce;case Ga:return function nl(C){return me?vs(me.call(C)):{}}(C)}}(C,rr,Di)}}St||(St=new oc);var _a=St.get(C);if(_a)return _a;St.set(C,oi),Ag(C)?C.forEach(function(Ka){oi.add(it(Ka,F,ee,Ka,C,St))}):F_(C)&&C.forEach(function(Ka,ys){oi.set(ys,it(Ka,F,ee,ys,C,St))});var Fs=Xn?xt:(Wn?ji?hm:dm:ji?Eu:Ic)(C);return zo(Fs||C,function(Ka,ys){Fs&&(Ka=C[ys=Ka]),Y(oi,ys,it(Ka,F,ee,ys,C,St))}),oi}function yt(C,F,ee){var Ce=ee.length;if(null==C)return!Ce;for(C=vs(C);Ce--;){var Qe=ee[Ce],oi=C[Qe];if(oi===xt&&!(Qe in C)||!(0,F[Qe])(oi))return!1}return!0}function bt(C,F,ee){if("function"!=typeof C)throw new ol(He);return lh(function(){C.apply(xt,ee)},F)}function Tt(C,F,ee,Ce){var Qe=-1,St=wl,oi=!0,Di=C.length,ji=[],Wn=F.length;if(!Di)return ji;ee&&(F=zs(F,Ll(ee))),Ce?(St=co,oi=!1):F.length>=200&&(St=Kc,oi=!1,F=new gu(F));e:for(;++Qe<Di;){var Xn=C[Qe],rr=null==ee?Xn:ee(Xn);if(Xn=Ce||0!==Xn?Xn:0,oi&&rr==rr){for(var Hr=Wn;Hr--;)if(F[Hr]===rr)continue e;ji.push(Xn)}else St(F,rr,Ce)||ji.push(Xn)}return ji}Ee.templateSettings={escape:Bi,evaluate:On,interpolate:_n,variable:"",imports:{_:Ee}},(Ee.prototype=vr.prototype).constructor=Ee,(Xr.prototype=xn(vr.prototype)).constructor=Xr,(hr.prototype=xn(vr.prototype)).constructor=hr,Jd.prototype.clear=function n0(){this.__data__=Hl?Hl(null):{},this.size=0},Jd.prototype.delete=function tm(C){var F=this.has(C)&&delete this.__data__[C];return this.size-=F?1:0,F},Jd.prototype.get=function qo(C){var F=this.__data__;if(Hl){var ee=F[C];return ee===Me?xt:ee}return xs.call(F,C)?F[C]:xt},Jd.prototype.has=function Th(C){var F=this.__data__;return Hl?F[C]!==xt:xs.call(F,C)},Jd.prototype.set=function rc(C,F){var ee=this.__data__;return this.size+=this.has(C)?0:1,ee[C]=Hl&&F===xt?Me:F,this},Ho.prototype.clear=function mu(){this.__data__=[],this.size=0},Ho.prototype.delete=function Qd(C){var F=this.__data__,ee=V(F,C);return!(ee<0||(ee==F.length-1?F.pop():ho.call(F,ee,1),--this.size,0))},Ho.prototype.get=function ac(C){var F=this.__data__,ee=V(F,C);return ee<0?xt:F[ee][1]},Ho.prototype.has=function Tr(C){return V(this.__data__,C)>-1},Ho.prototype.set=function im(C,F){var ee=this.__data__,Ce=V(ee,C);return Ce<0?(++this.size,ee.push([C,F])):ee[Ce][1]=F,this},Bu.prototype.clear=function Pd(){this.size=0,this.__data__={hash:new Jd,map:new(is||Ho),string:new Jd}},Bu.prototype.delete=function Fd(C){var F=Ip(this,C).delete(C);return this.size-=F?1:0,F},Bu.prototype.get=function mr(C){return Ip(this,C).get(C)},Bu.prototype.has=function uf(C){return Ip(this,C).has(C)},Bu.prototype.set=function r0(C,F){var ee=Ip(this,C),Ce=ee.size;return ee.set(C,F),this.size+=ee.size==Ce?0:1,this},gu.prototype.add=gu.prototype.push=function eh(C){return this.__data__.set(C,Me),this},gu.prototype.has=function sc(C){return this.__data__.has(C)},oc.prototype.clear=function qm(){this.__data__=new Ho,this.size=0},oc.prototype.delete=function Vc(C){var F=this.__data__,ee=F.delete(C);return this.size=F.size,ee},oc.prototype.get=function Vf(C){return this.__data__.get(C)},oc.prototype.has=function nm(C){return this.__data__.has(C)},oc.prototype.set=function Cp(C,F){var ee=this.__data__;if(ee instanceof Ho){var Ce=ee.__data__;if(!is||Ce.length<199)return Ce.push([C,F]),this.size=++ee.size,this;ee=this.__data__=new Bu(Ce)}return ee.set(C,F),this.size=ee.size,this};var Ne=lm(Gi),_t=lm(Gn,!0);function zt(C,F){var ee=!0;return Ne(C,function(Ce,Qe,St){return ee=!!F(Ce,Qe,St)}),ee}function Gt(C,F,ee){for(var Ce=-1,Qe=C.length;++Ce<Qe;){var St=C[Ce],oi=F(St);if(null!=oi&&(Di===xt?oi==oi&&!Ud(oi):ee(oi,Di)))var Di=oi,ji=St}return ji}function hi(C,F){var ee=[];return Ne(C,function(Ce,Qe,St){F(Ce,Qe,St)&&ee.push(Ce)}),ee}function ri(C,F,ee,Ce,Qe){var St=-1,oi=C.length;for(ee||(ee=yv),Qe||(Qe=[]);++St<oi;){var Di=C[St];F>0&&ee(Di)?F>1?ri(Di,F-1,ee,Ce,Qe):Ts(Qe,Di):Ce||(Qe[Qe.length]=Di)}return Qe}var Oi=Dp(),Ai=Dp(!0);function Gi(C,F){return C&&Oi(C,F,Ic)}function Gn(C,F){return C&&Ai(C,F,Ic)}function Hi(C,F){return Ks(F,function(ee){return ef(C[ee])})}function un(C,F){for(var ee=0,Ce=(F=bd(F,C)).length;null!=C&&ee<Ce;)C=C[zu(F[ee++])];return ee&&ee==Ce?C:xt}function ki(C,F,ee){var Ce=F(C);return cs(C)?Ce:Ts(Ce,ee(C))}function An(C){return null==C?C===xt?"[object Undefined]":"[object Null]":Gl&&Gl in vs(C)?function rg(C){var F=xs.call(C,Gl),ee=C[Gl];try{C[Gl]=xt;var Ce=!0}catch{}var Qe=Pu.call(C);return Ce&&(F?C[Gl]=ee:delete C[Gl]),Qe}(C):function Mp(C){return Pu.call(C)}(C)}function Ui(C,F){return C>F}function cn(C,F){return null!=C&&xs.call(C,F)}function bn(C,F){return null!=C&&F in vs(C)}function Hn(C,F,ee){for(var Ce=ee?co:wl,Qe=C[0].length,St=C.length,oi=St,Di=nn(St),ji=1/0,Wn=[];oi--;){var Xn=C[oi];oi&&F&&(Xn=zs(Xn,Ll(F))),ji=Ri(Xn.length,ji),Di[oi]=!ee&&(F||Qe>=120&&Xn.length>=120)?new gu(oi&&Xn):xt}Xn=C[0];var rr=-1,Hr=Di[0];e:for(;++rr<Qe&&Wn.length<ji;){var _a=Xn[rr],Za=F?F(_a):_a;if(_a=ee||0!==_a?_a:0,!(Hr?Kc(Hr,Za):Ce(Wn,Za,ee))){for(oi=St;--oi;){var Fs=Di[oi];if(!(Fs?Kc(Fs,Za):Ce(C[oi],Za,ee)))continue e}Hr&&Hr.push(Za),Wn.push(_a)}}return Wn}function wa(C,F,ee){var Ce=null==(C=og(C,F=bd(F,C)))?C:C[zu(uc(F))];return null==Ce?xt:bo(Ce,C,ee)}function Ir(C){return Xl(C)&&An(C)==ia}function qr(C,F,ee,Ce,Qe){return C===F||(null==C||null==F||!Xl(C)&&!Xl(F)?C!=C&&F!=F:function ta(C,F,ee,Ce,Qe,St){var oi=cs(C),Di=cs(F),ji=oi?jr:Tc(C),Wn=Di?jr:Tc(F),Xn=(ji=ji==ia?Gr:ji)==Gr,rr=(Wn=Wn==ia?Gr:Wn)==Gr,Hr=ji==Wn;if(Hr&&Af(C)){if(!Af(F))return!1;oi=!0,Xn=!1}if(Hr&&!Xn)return St||(St=new oc),oi||hh(C)?ng(C,F,ee,Ce,Qe,St):function o0(C,F,ee,Ce,Qe,St,oi){switch(ee){case da:if(C.byteLength!=F.byteLength||C.byteOffset!=F.byteOffset)return!1;C=C.buffer,F=F.buffer;case xr:return!(C.byteLength!=F.byteLength||!St(new Nl(C),new Nl(F)));case Mn:case Ya:case Sn:return Dd(+C,+F);case Ma:return C.name==F.name&&C.message==F.message;case ur:case Pa:return C==F+"";case ar:var Di=Rs;case lr:if(Di||(Di=sl),C.size!=F.size&&!(1&Ce))return!1;var Wn=oi.get(C);if(Wn)return Wn==F;Ce|=2,oi.set(C,F);var Xn=ng(Di(C),Di(F),Ce,Qe,St,oi);return oi.delete(C),Xn;case Ga:if(me)return me.call(C)==me.call(F)}return!1}(C,F,ji,ee,Ce,Qe,St);if(!(1&ee)){var _a=Xn&&xs.call(C,"__wrapped__"),Za=rr&&xs.call(F,"__wrapped__");if(_a||Za){var Fs=_a?C.value():C,Ka=Za?F.value():F;return St||(St=new oc),Qe(Fs,Ka,ee,Ce,St)}}return!!Hr&&(St||(St=new oc),function ff(C,F,ee,Ce,Qe,St){var oi=1&ee,Di=dm(C),ji=Di.length;if(ji!=dm(F).length&&!oi)return!1;for(var rr=ji;rr--;){var Hr=Di[rr];if(!(oi?Hr in F:xs.call(F,Hr)))return!1}var _a=St.get(C),Za=St.get(F);if(_a&&Za)return _a==F&&Za==C;var Fs=!0;St.set(C,F),St.set(F,C);for(var Ka=oi;++rr<ji;){var ys=C[Hr=Di[rr]],eo=F[Hr];if(Ce)var jd=oi?Ce(eo,ys,Hr,F,C,St):Ce(ys,eo,Hr,C,F,St);if(!(jd===xt?ys===eo||Qe(ys,eo,ee,Ce,St):jd)){Fs=!1;break}Ka||(Ka="constructor"==Hr)}if(Fs&&!Ka){var md=C.constructor,Uu=F.constructor;md!=Uu&&"constructor"in C&&"constructor"in F&&!("function"==typeof md&&md instanceof md&&"function"==typeof Uu&&Uu instanceof Uu)&&(Fs=!1)}return St.delete(C),St.delete(F),Fs}(C,F,ee,Ce,Qe,St))}(C,F,ee,Ce,qr,Qe))}function Xs(C,F,ee,Ce){var Qe=ee.length,St=Qe,oi=!Ce;if(null==C)return!St;for(C=vs(C);Qe--;){var Di=ee[Qe];if(oi&&Di[2]?Di[1]!==C[Di[0]]:!(Di[0]in C))return!1}for(;++Qe<St;){var ji=(Di=ee[Qe])[0],Wn=C[ji],Xn=Di[1];if(oi&&Di[2]){if(Wn===xt&&!(ji in C))return!1}else{var rr=new oc;if(Ce)var Hr=Ce(Wn,Xn,ji,C,F,rr);if(!(Hr===xt?qr(Xn,Wn,3,Ce,rr):Hr))return!1}}return!0}function ro(C){return!(!Al(C)||function gf(C){return!!gl&&gl in C}(C))&&(ef(C)?Fu:jt).test(Wh(C))}function Uc(C){return"function"==typeof C?C:null==C?ku:"object"==typeof C?cs(C)?lc(C[0],C[1]):fo(C):V0(C)}function Nu(C){if(!vf(C))return Ye(C);var F=[];for(var ee in vs(C))xs.call(C,ee)&&"constructor"!=ee&&F.push(ee);return F}function Ds(C,F){return C<F}function Ls(C,F){var ee=-1,Ce=fd(C)?nn(C.length):[];return Ne(C,function(Qe,St,oi){Ce[++ee]=F(Qe,St,oi)}),Ce}function fo(C){var F=pf(C);return 1==F.length&&F[0][2]?Zf(F[0][0],F[0][1]):function(ee){return ee===C||Xs(ee,C,F)}}function lc(C,F){return ag(C)&&d0(F)?Zf(zu(C),F):function(ee){var Ce=xl(ee,C);return Ce===xt&&Ce===F?Hu(ee,C):qr(F,Ce,3)}}function po(C,F,ee,Ce,Qe){C!==F&&Oi(F,function(St,oi){if(Qe||(Qe=new oc),Al(St))!function vu(C,F,ee,Ce,Qe,St,oi){var Di=gm(C,ee),ji=gm(F,ee),Wn=oi.get(ji);if(Wn)I(C,ee,Wn);else{var Xn=St?St(Di,ji,ee+"",C,F,oi):xt,rr=Xn===xt;if(rr){var Hr=cs(ji),_a=!Hr&&Af(ji),Za=!Hr&&!_a&&hh(ji);Xn=ji,Hr||_a||Za?cs(Di)?Xn=Di:Wl(Di)?Xn=nu(Di):_a?(rr=!1,Xn=jf(ji,!0)):Za?(rr=!1,Xn=zr(ji,!0)):Xn=[]:tf(ji)||Bh(ji)?(Xn=Di,Bh(Di)?Xn=z_(Di):(!Al(Di)||ef(Di))&&(Xn=qf(ji))):rr=!1}rr&&(oi.set(ji,Xn),Qe(Xn,ji,Ce,St,oi),oi.delete(ji)),I(C,ee,Xn)}}(C,F,oi,ee,po,Ce,Qe);else{var Di=Ce?Ce(gm(C,oi),St,oi+"",C,F,Qe):xt;Di===xt&&(Di=St),I(C,oi,Di)}},Eu)}function Sh(C,F){var ee=C.length;if(ee)return cd(F+=F<0?ee:0,ee)?C[F]:xt}function iu(C,F,ee){F=F.length?zs(F,function(St){return cs(St)?function(oi){return un(oi,1===St.length?St[0]:St)}:St}):[ku];var Ce=-1;return F=zs(F,Ll(Ba())),function ko(Ei,pn){var nn=Ei.length;for(Ei.sort(pn);nn--;)Ei[nn]=Ei[nn].value;return Ei}(Ls(C,function(St,oi,Di){return{criteria:zs(F,function(Wn){return Wn(St)}),index:++Ce,value:St}}),function(St,oi){return function oh(C,F,ee){for(var Ce=-1,Qe=C.criteria,St=F.criteria,oi=Qe.length,Di=ee.length;++Ce<oi;){var ji=sh(Qe[Ce],St[Ce]);if(ji)return Ce>=Di?ji:ji*("desc"==ee[Ce]?-1:1)}return C.index-F.index}(St,oi,ee)})}function od(C,F,ee){for(var Ce=-1,Qe=F.length,St={};++Ce<Qe;){var oi=F[Ce],Di=un(C,oi);ee(Di,oi)&&Ah(St,bd(oi,C),Di)}return St}function xd(C,F,ee,Ce){var Qe=Ce?ps:wo,St=-1,oi=F.length,Di=C;for(C===F&&(F=nu(F)),ee&&(Di=zs(C,Ll(ee)));++St<oi;)for(var ji=0,Wn=F[St],Xn=ee?ee(Wn):Wn;(ji=Qe(Di,Xn,ji,Ce))>-1;)Di!==C&&ho.call(Di,ji,1),ho.call(C,ji,1);return C}function Dh(C,F){for(var ee=C?F.length:0,Ce=ee-1;ee--;){var Qe=F[ee];if(ee==Ce||Qe!==St){var St=Qe;cd(Qe)?ho.call(C,Qe,1):df(C,Qe)}}return C}function th(C,F){return C+v(Ar()*(F-C+1))}function Zo(C,F){var ee="";if(!C||F<1||F>Nn)return ee;do{F%2&&(ee+=C),(F=v(F/2))&&(C+=C)}while(F);return ee}function As(C,F){return vm(Rp(C,F,ku),C+"")}function vv(C){return k(Hp(C))}function rm(C,F){var ee=Hp(C);return ym(ee,Fe(F,0,ee.length))}function Ah(C,F,ee,Ce){if(!Al(C))return C;for(var Qe=-1,St=(F=bd(F,C)).length,oi=St-1,Di=C;null!=Di&&++Qe<St;){var ji=zu(F[Qe]),Wn=ee;if("__proto__"===ji||"constructor"===ji||"prototype"===ji)return C;if(Qe!=oi){var Xn=Di[ji];(Wn=Ce?Ce(Xn,ji,Di):xt)===xt&&(Wn=Al(Xn)?Xn:cd(F[Qe+1])?[]:{})}Y(Di,ji,Wn),Di=Di[ji]}return C}var Zm=Hc?function(C,F){return Hc.set(C,F),C}:ku,Uf=fu?function(C,F){return fu(C,"toString",{configurable:!0,enumerable:!1,value:jp(F),writable:!0})}:ku;function Ep(C){return ym(Hp(C))}function Tl(C,F,ee){var Ce=-1,Qe=C.length;F<0&&(F=-F>Qe?0:Qe+F),(ee=ee>Qe?Qe:ee)<0&&(ee+=Qe),Qe=F>ee?0:ee-F>>>0,F>>>=0;for(var St=nn(Qe);++Ce<Qe;)St[Ce]=C[Ce+F];return St}function kp(C,F){var ee;return Ne(C,function(Ce,Qe,St){return!(ee=F(Ce,Qe,St))}),!!ee}function Tp(C,F,ee){var Ce=0,Qe=null==C?Ce:C.length;if("number"==typeof F&&F==F&&Qe<=2147483647){for(;Ce<Qe;){var St=Ce+Qe>>>1,oi=C[St];null!==oi&&!Ud(oi)&&(ee?oi<=F:oi<F)?Ce=St+1:Qe=St}return Qe}return Sp(C,F,ku,ee)}function Sp(C,F,ee,Ce){var Qe=0,St=null==C?0:C.length;if(0===St)return 0;for(var oi=(F=ee(F))!=F,Di=null===F,ji=Ud(F),Wn=F===xt;Qe<St;){var Xn=v((Qe+St)/2),rr=ee(C[Xn]),Hr=rr!==xt,_a=null===rr,Za=rr==rr,Fs=Ud(rr);if(oi)var Ka=Ce||Za;else Ka=Wn?Za&&(Ce||Hr):Di?Za&&Hr&&(Ce||!_a):ji?Za&&Hr&&!_a&&(Ce||!Fs):!_a&&!Fs&&(Ce?rr<=F:rr<F);Ka?Qe=Xn+1:St=Xn}return Ri(St,4294967294)}function Km(C,F){for(var ee=-1,Ce=C.length,Qe=0,St=[];++ee<Ce;){var oi=C[ee],Di=F?F(oi):oi;if(!ee||!Dd(Di,ji)){var ji=Di;St[Qe++]=0===oi?0:oi}}return St}function Jm(C){return"number"==typeof C?C:Ud(C)?NaN:+C}function Vl(C){if("string"==typeof C)return C;if(cs(C))return zs(C,Vl)+"";if(Ud(C))return Ve?Ve.call(C):"";var F=C+"";return"0"==F&&1/C==-yn?"-0":F}function ih(C,F,ee){var Ce=-1,Qe=wl,St=C.length,oi=!0,Di=[],ji=Di;if(ee)oi=!1,Qe=co;else if(St>=200){var Wn=F?null:rl(C);if(Wn)return sl(Wn);oi=!1,Qe=Kc,ji=new gu}else ji=F?[]:Di;e:for(;++Ce<St;){var Xn=C[Ce],rr=F?F(Xn):Xn;if(Xn=ee||0!==Xn?Xn:0,oi&&rr==rr){for(var Hr=ji.length;Hr--;)if(ji[Hr]===rr)continue e;F&&ji.push(rr),Di.push(Xn)}else Qe(ji,rr,ee)||(ji!==Di&&ji.push(rr),Di.push(Xn))}return Di}function df(C,F){return null==(C=og(C,F=bd(F,C)))||delete C[zu(uc(F))]}function Lo(C,F,ee,Ce){return Ah(C,F,ee(un(C,F)),Ce)}function Vo(C,F,ee,Ce){for(var Qe=C.length,St=Ce?Qe:-1;(Ce?St--:++St<Qe)&&F(C[St],St,C););return ee?Tl(C,Ce?0:St,Ce?St+1:Qe):Tl(C,Ce?St+1:0,Ce?Qe:St)}function Ps(C,F){var ee=C;return ee instanceof hr&&(ee=ee.value()),vo(F,function(Ce,Qe){return Qe.func.apply(Qe.thisArg,Ts([Ce],Qe.args))},ee)}function Sl(C,F,ee){var Ce=C.length;if(Ce<2)return Ce?ih(C[0]):[];for(var Qe=-1,St=nn(Ce);++Qe<Ce;)for(var oi=C[Qe],Di=-1;++Di<Ce;)Di!=Qe&&(St[Qe]=Tt(St[Qe]||oi,C[Di],F,ee));return ih(ri(St,1),F,ee)}function nh(C,F,ee){for(var Ce=-1,Qe=C.length,St=F.length,oi={};++Ce<Qe;)ee(oi,C[Ce],Ce<St?F[Ce]:xt);return oi}function rh(C){return Wl(C)?C:[]}function am(C){return"function"==typeof C?C:ku}function bd(C,F){return cs(C)?C:ag(C,F)?[C]:h0(Io(C))}var Qm=As;function ah(C,F,ee){var Ce=C.length;return ee=ee===xt?Ce:ee,!F&&ee>=Ce?C:Tl(C,F,ee)}var _u=Kd||function(C){return ks.clearTimeout(C)};function jf(C,F){if(F)return C.slice();var ee=C.length,Ce=zl?zl(ee):new C.constructor(ee);return C.copy(Ce),Ce}function Ul(C){var F=new C.constructor(C.byteLength);return new Nl(F).set(new Nl(C)),F}function zr(C,F){var ee=F?Ul(C.buffer):C.buffer;return new C.constructor(ee,C.byteOffset,C.length)}function sh(C,F){if(C!==F){var ee=C!==xt,Ce=null===C,Qe=C==C,St=Ud(C),oi=F!==xt,Di=null===F,ji=F==F,Wn=Ud(F);if(!Di&&!Wn&&!St&&C>F||St&&oi&&ji&&!Di&&!Wn||Ce&&oi&&ji||!ee&&ji||!Qe)return 1;if(!Ce&&!St&&!Wn&&C<F||Wn&&ee&&Qe&&!Ce&&!St||Di&&ee&&Qe||!oi&&Qe||!ji)return-1}return 0}function kc(C,F,ee,Ce){for(var Qe=-1,St=C.length,oi=ee.length,Di=-1,ji=F.length,Wn=ni(St-oi,0),Xn=nn(ji+Wn),rr=!Ce;++Di<ji;)Xn[Di]=F[Di];for(;++Qe<oi;)(rr||Qe<St)&&(Xn[ee[Qe]]=C[Qe]);for(;Wn--;)Xn[Di++]=C[Qe++];return Xn}function sm(C,F,ee,Ce){for(var Qe=-1,St=C.length,oi=-1,Di=ee.length,ji=-1,Wn=F.length,Xn=ni(St-Di,0),rr=nn(Xn+Wn),Hr=!Ce;++Qe<Xn;)rr[Qe]=C[Qe];for(var _a=Qe;++ji<Wn;)rr[_a+ji]=F[ji];for(;++oi<Di;)(Hr||Qe<St)&&(rr[_a+ee[oi]]=C[Qe++]);return rr}function nu(C,F){var ee=-1,Ce=C.length;for(F||(F=nn(Ce));++ee<Ce;)F[ee]=C[ee];return F}function _l(C,F,ee,Ce){var Qe=!ee;ee||(ee={});for(var St=-1,oi=F.length;++St<oi;){var Di=F[St],ji=Ce?Ce(ee[Di],C[Di],Di,ee,C):xt;ji===xt&&(ji=C[Di]),Qe?be(ee,Di,ji):Y(ee,Di,ji)}return ee}function yu(C,F){return function(ee,Ce){var Qe=cs(ee)?du:Q,St=F?F():{};return Qe(ee,C,Ba(Ce,2),St)}}function xu(C){return As(function(F,ee){var Ce=-1,Qe=ee.length,St=Qe>1?ee[Qe-1]:xt,oi=Qe>2?ee[2]:xt;for(St=C.length>3&&"function"==typeof St?(Qe--,St):xt,oi&&su(ee[0],ee[1],oi)&&(St=Qe<3?xt:St,Qe=1),F=vs(F);++Ce<Qe;){var Di=ee[Ce];Di&&C(F,Di,Ce,St)}return F})}function lm(C,F){return function(ee,Ce){if(null==ee)return ee;if(!fd(ee))return C(ee,Ce);for(var Qe=ee.length,St=F?Qe:-1,oi=vs(ee);(F?St--:++St<Qe)&&!1!==Ce(oi[St],St,oi););return ee}}function Dp(C){return function(F,ee,Ce){for(var Qe=-1,St=vs(F),oi=Ce(F),Di=oi.length;Di--;){var ji=oi[C?Di:++Qe];if(!1===ee(St[ji],ji,St))break}return F}}function cm(C){return function(F){var ee=Cl(F=Io(F))?pl(F):xt,Ce=ee?ee[0]:F.charAt(0),Qe=ee?ah(ee,1).join(""):F.slice(1);return Ce[C]()+Qe}}function Ih(C){return function(F){return vo(e_(Vp(F).replace(Ku,"")),C,"")}}function Mh(C){return function(){var F=arguments;switch(F.length){case 0:return new C;case 1:return new C(F[0]);case 2:return new C(F[0],F[1]);case 3:return new C(F[0],F[1],F[2]);case 4:return new C(F[0],F[1],F[2],F[3]);case 5:return new C(F[0],F[1],F[2],F[3],F[4]);case 6:return new C(F[0],F[1],F[2],F[3],F[4],F[5]);case 7:return new C(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}var ee=xn(C.prototype),Ce=C.apply(ee,F);return Al(Ce)?Ce:ee}}function hf(C){return function(F,ee,Ce){var Qe=vs(F);if(!fd(F)){var St=Ba(ee,3);F=Ic(F),ee=function(Di){return St(Qe[Di],Di,Qe)}}var oi=C(F,ee,Ce);return oi>-1?Qe[St?F[oi]:oi]:xt}}function Bd(C){return zd(function(F){var ee=F.length,Ce=ee,Qe=Xr.prototype.thru;for(C&&F.reverse();Ce--;){var St=F[Ce];if("function"!=typeof St)throw new ol(He);if(Qe&&!oi&&"wrapper"==pm(St))var oi=new Xr([],!0)}for(Ce=oi?Ce:ee;++Ce<ee;){var Di=pm(St=F[Ce]),ji="wrapper"==Di?fm(St):xt;oi=ji&&Sd(ji[0])&&424==ji[1]&&!ji[4].length&&1==ji[9]?oi[pm(ji[0])].apply(oi,ji[3]):1==St.length&&Sd(St)?oi[Di]():oi.thru(St)}return function(){var Wn=arguments,Xn=Wn[0];if(oi&&1==Wn.length&&cs(Xn))return oi.plant(Xn).value();for(var rr=0,Hr=ee?F[rr].apply(this,Wn):Xn;++rr<ee;)Hr=F[rr].call(this,Hr);return Hr}})}function wd(C,F,ee,Ce,Qe,St,oi,Di,ji,Wn){var Xn=128&F,rr=1&F,Hr=2&F,_a=24&F,Za=512&F,Fs=Hr?xt:Mh(C);return function Ka(){for(var ys=arguments.length,eo=nn(ys),jd=ys;jd--;)eo[jd]=arguments[jd];if(_a)var md=Wf(Ka),Uu=function Ru(Ei,pn){for(var nn=Ei.length,Fr=0;nn--;)Ei[nn]===pn&&++Fr;return Fr}(eo,md);if(Ce&&(eo=kc(eo,Ce,Qe,_a)),St&&(eo=sm(eo,St,oi,_a)),ys-=Uu,_a&&ys<Wn){var dc=Pl(eo,md);return bu(C,F,wd,Ka.placeholder,ee,eo,dc,Di,ji,Wn-ys)}var ju=rr?ee:this,Yh=Hr?ju[C]:C;return ys=eo.length,Di?eo=function Kf(C,F){for(var ee=C.length,Ce=Ri(F.length,ee),Qe=nu(C);Ce--;){var St=F[Ce];C[Ce]=cd(St,ee)?Qe[St]:xt}return C}(eo,Di):Za&&ys>1&&eo.reverse(),Xn&&ji<ys&&(eo.length=ji),this&&this!==ks&&this instanceof Ka&&(Yh=Fs||Mh(Yh)),Yh.apply(ju,eo)}}function $f(C,F){return function(ee,Ce){return function ea(C,F,ee,Ce){return Gi(C,function(Qe,St,oi){F(Ce,ee(Qe),St,oi)}),Ce}(ee,C,F(Ce),{})}}function jl(C,F){return function(ee,Ce){var Qe;if(ee===xt&&Ce===xt)return F;if(ee!==xt&&(Qe=ee),Ce!==xt){if(Qe===xt)return Ce;"string"==typeof ee||"string"==typeof Ce?(ee=Vl(ee),Ce=Vl(Ce)):(ee=Jm(ee),Ce=Jm(Ce)),Qe=C(ee,Ce)}return Qe}}function cc(C){return zd(function(F){return F=zs(F,Ll(Ba())),As(function(ee){var Ce=this;return C(F,function(Qe){return bo(Qe,Ce,ee)})})})}function Nd(C,F){var ee=(F=F===xt?" ":Vl(F)).length;if(ee<2)return ee?Zo(F,C):F;var Ce=Zo(F,dr(C/Fl(F)));return Cl(F)?ah(pl(Ce),0,C).join(""):Ce.slice(0,C)}function Cd(C){return function(F,ee,Ce){return Ce&&"number"!=typeof Ce&&su(F,ee,Ce)&&(ee=Ce=xt),F=Cu(F),ee===xt?(ee=F,F=0):ee=Cu(ee),function $h(C,F,ee,Ce){for(var Qe=-1,St=ni(dr((F-C)/(ee||1)),0),oi=nn(St);St--;)oi[Ce?St:++Qe]=C,C+=ee;return oi}(F,ee,Ce=Ce===xt?F<ee?1:-1:Cu(Ce),C)}}function $l(C){return function(F,ee){return"string"==typeof F&&"string"==typeof ee||(F=fh(F),ee=fh(ee)),C(F,ee)}}function bu(C,F,ee,Ce,Qe,St,oi,Di,ji,Wn){var Xn=8&F;F|=Xn?32:64,4&(F&=~(Xn?64:32))||(F&=-4);var Fs=[C,F,Qe,Xn?St:xt,Xn?oi:xt,Xn?xt:St,Xn?xt:oi,Di,ji,Wn],Ka=ee.apply(xt,Fs);return Sd(C)&&lg(Ka,Fs),Ka.placeholder=Ce,_m(Ka,C,F)}function Ap(C){var F=Yo[C];return function(ee,Ce){if(ee=fh(ee),(Ce=null==Ce?0:Ri(_s(Ce),292))&&he(ee)){var Qe=(Io(ee)+"e").split("e");return+((Qe=(Io(F(Qe[0]+"e"+(+Qe[1]+Ce)))+"e").split("e"))[0]+"e"+(+Qe[1]-Ce))}return F(ee)}}var rl=Va&&1/sl(new Va([,-0]))[1]==yn?function(C){return new Va(C)}:Wp;function ig(C){return function(F){var ee=Tc(F);return ee==ar?Rs(F):ee==lr?function cf(Ei){var pn=-1,nn=Array(Ei.size);return Ei.forEach(function(Fr){nn[++pn]=[Fr,Fr]}),nn}(F):function qa(Ei,pn){return zs(pn,function(nn){return[nn,Ei[nn]]})}(F,C(F))}}function ld(C,F,ee,Ce,Qe,St,oi,Di){var ji=2&F;if(!ji&&"function"!=typeof C)throw new ol(He);var Wn=Ce?Ce.length:0;if(Wn||(F&=-97,Ce=Qe=xt),oi=oi===xt?oi:ni(_s(oi),0),Di=Di===xt?Di:_s(Di),Wn-=Qe?Qe.length:0,64&F){var Xn=Ce,rr=Qe;Ce=Qe=xt}var Hr=ji?xt:fm(C),_a=[C,F,ee,Ce,Qe,Xn,rr,St,oi,Di];if(Hr&&function _f(C,F){var ee=C[1],Ce=F[1],Qe=ee|Ce;if(!(Qe<131)&&!(128==Ce&&8==ee||128==Ce&&256==ee&&C[7].length<=F[8]||384==Ce&&F[7].length<=F[8]&&8==ee))return C;1&Ce&&(C[2]=F[2],Qe|=1&ee?0:4);var Di=F[3];if(Di){var ji=C[3];C[3]=ji?kc(ji,Di,F[4]):Di,C[4]=ji?Pl(C[3],nt):F[4]}(Di=F[5])&&(C[5]=(ji=C[5])?sm(ji,Di,F[6]):Di,C[6]=ji?Pl(C[5],nt):F[6]),(Di=F[7])&&(C[7]=Di),128&Ce&&(C[8]=null==C[8]?F[8]:Ri(C[8],F[8])),null==C[9]&&(C[9]=F[9]),C[0]=F[0],C[1]=Qe}(_a,Hr),C=_a[0],F=_a[1],ee=_a[2],Ce=_a[3],Qe=_a[4],!(Di=_a[9]=_a[9]===xt?ji?0:C.length:ni(_a[9]-Wn,0))&&24&F&&(F&=-25),F&&1!=F)Za=8==F||16==F?function um(C,F,ee){var Ce=Mh(C);return function Qe(){for(var St=arguments.length,oi=nn(St),Di=St,ji=Wf(Qe);Di--;)oi[Di]=arguments[Di];var Wn=St<3&&oi[0]!==ji&&oi[St-1]!==ji?[]:Pl(oi,ji);return(St-=Wn.length)<ee?bu(C,F,wd,Qe.placeholder,xt,oi,Wn,xt,xt,ee-St):bo(this&&this!==ks&&this instanceof Qe?Ce:C,this,oi)}}(C,F,Di):32!=F&&33!=F||Qe.length?wd.apply(xt,_a):function au(C,F,ee,Ce){var Qe=1&F,St=Mh(C);return function oi(){for(var Di=-1,ji=arguments.length,Wn=-1,Xn=Ce.length,rr=nn(Xn+ji),Hr=this&&this!==ks&&this instanceof oi?St:C;++Wn<Xn;)rr[Wn]=Ce[Wn];for(;ji--;)rr[Wn++]=arguments[++Di];return bo(Hr,Qe?ee:this,rr)}}(C,F,ee,Ce);else var Za=function tg(C,F,ee){var Ce=1&F,Qe=Mh(C);return function St(){return(this&&this!==ks&&this instanceof St?Qe:C).apply(Ce?ee:this,arguments)}}(C,F,ee);return _m((Hr?Zm:lg)(Za,_a),C,F)}function Ed(C,F,ee,Ce){return C===xt||Dd(C,tc[ee])&&!xs.call(Ce,ee)?F:C}function s0(C,F,ee,Ce,Qe,St){return Al(C)&&Al(F)&&(St.set(F,C),po(C,F,xt,s0,St),St.delete(F)),C}function _v(C){return tf(C)?xt:C}function ng(C,F,ee,Ce,Qe,St){var oi=1&ee,Di=C.length,ji=F.length;if(Di!=ji&&!(oi&&ji>Di))return!1;var Wn=St.get(C),Xn=St.get(F);if(Wn&&Xn)return Wn==F&&Xn==C;var rr=-1,Hr=!0,_a=2&ee?new gu:xt;for(St.set(C,F),St.set(F,C);++rr<Di;){var Za=C[rr],Fs=F[rr];if(Ce)var Ka=oi?Ce(Fs,Za,rr,F,C,St):Ce(Za,Fs,rr,C,F,St);if(Ka!==xt){if(Ka)continue;Hr=!1;break}if(_a){if(!ec(F,function(ys,eo){if(!Kc(_a,eo)&&(Za===ys||Qe(Za,ys,ee,Ce,St)))return _a.push(eo)})){Hr=!1;break}}else if(Za!==Fs&&!Qe(Za,Fs,ee,Ce,St)){Hr=!1;break}}return St.delete(C),St.delete(F),Hr}function zd(C){return vm(Rp(C,xt,p0),C+"")}function dm(C){return ki(C,Ic,Xf)}function hm(C){return ki(C,Eu,jc)}var fm=Hc?function(C){return Hc.get(C)}:Wp;function pm(C){for(var F=C.name+"",ee=Qa[F],Ce=xs.call(Qa,F)?ee.length:0;Ce--;){var Qe=ee[Ce],St=Qe.func;if(null==St||St==C)return Qe.name}return F}function Wf(C){return(xs.call(Ee,"placeholder")?Ee:C).placeholder}function Ba(){var C=Ee.iteratee||t_;return C=C===t_?Uc:C,arguments.length?C(arguments[0],arguments[1]):C}function Ip(C,F){var ee=C.__data__;return function mm(C){var F=typeof C;return"string"==F||"number"==F||"symbol"==F||"boolean"==F?"__proto__"!==C:null===C}(F)?ee["string"==typeof F?"string":"hash"]:ee.map}function pf(C){for(var F=Ic(C),ee=F.length;ee--;){var Ce=F[ee],Qe=C[Ce];F[ee]=[Ce,Qe,d0(Qe)]}return F}function Rh(C,F){var ee=function el(Ei,pn){return null==Ei?xt:Ei[pn]}(C,F);return ro(ee)?ee:xt}var Xf=O?function(C){return null==C?[]:(C=vs(C),Ks(O(C),function(F){return nc.call(C,F)}))}:Bm,jc=O?function(C){for(var F=[];C;)Ts(F,Xf(C)),C=Yl(C);return F}:Bm,Tc=An;function c0(C,F,ee){for(var Ce=-1,Qe=(F=bd(F,C)).length,St=!1;++Ce<Qe;){var oi=zu(F[Ce]);if(!(St=null!=C&&ee(C,oi)))break;C=C[oi]}return St||++Ce!=Qe?St:!!(Qe=null==C?0:C.length)&&A0(Qe)&&cd(oi,Qe)&&(cs(C)||Bh(C))}function qf(C){return"function"!=typeof C.constructor||vf(C)?{}:xn(Yl(C))}function yv(C){return cs(C)||Bh(C)||!!(kl&&C&&C[kl])}function cd(C,F){var ee=typeof C;return!!(F=F??Nn)&&("number"==ee||"symbol"!=ee&&Qt.test(C))&&C>-1&&C%1==0&&C<F}function su(C,F,ee){if(!Al(ee))return!1;var Ce=typeof F;return!!("number"==Ce?fd(ee)&&cd(F,ee.length):"string"==Ce&&F in ee)&&Dd(ee[F],C)}function ag(C,F){if(cs(C))return!1;var ee=typeof C;return!("number"!=ee&&"symbol"!=ee&&"boolean"!=ee&&null!=C&&!Ud(C))||Qn.test(C)||!Vi.test(C)||null!=F&&C in vs(F)}function Sd(C){var F=pm(C),ee=Ee[F];if("function"!=typeof ee||!(F in hr.prototype))return!1;if(C===ee)return!0;var Ce=fm(ee);return!!Ce&&C===Ce[0]}(Ha&&Tc(new Ha(new ArrayBuffer(1)))!=da||is&&Tc(new is)!=ar||xo&&Tc(xo.resolve())!=Vn||Va&&Tc(new Va)!=lr||To&&Tc(new To)!=Ra)&&(Tc=function(C){var F=An(C),ee=F==Gr?C.constructor:xt,Ce=ee?Wh(ee):"";if(Ce)switch(Ce){case xa:return da;case Go:return ar;case ba:return Vn;case ls:return lr;case Ge:return Ra}return F});var u0=Hs?ef:Nm;function vf(C){var F=C&&C.constructor;return C===("function"==typeof F&&F.prototype||tc)}function d0(C){return C==C&&!Al(C)}function Zf(C,F){return function(ee){return null!=ee&&ee[C]===F&&(F!==xt||C in vs(ee))}}function Rp(C,F,ee){return F=ni(F===xt?C.length-1:F,0),function(){for(var Ce=arguments,Qe=-1,St=ni(Ce.length-F,0),oi=nn(St);++Qe<St;)oi[Qe]=Ce[F+Qe];Qe=-1;for(var Di=nn(F+1);++Qe<F;)Di[Qe]=Ce[Qe];return Di[F]=ee(oi),bo(C,this,Di)}}function og(C,F){return F.length<2?C:un(C,Tl(F,0,-1))}function gm(C,F){if(("constructor"!==F||"function"!=typeof C[F])&&"__proto__"!=F)return C[F]}var lg=cg(Zm),lh=yo||function(C,F){return ks.setTimeout(C,F)},vm=cg(Uf);function _m(C,F,ee){var Ce=F+"";return vm(C,function Td(C,F){var ee=F.length;if(!ee)return C;var Ce=ee-1;return F[Ce]=(ee>1?"& ":"")+F[Ce],F=F.join(ee>2?", ":" "),C.replace(rt,"{\n/* [wrapped with "+F+"] */\n")}(Ce,function Xh(C,F){return zo(Jn,function(ee){var Ce="_."+ee[0];F&ee[1]&&!wl(C,Ce)&&C.push(Ce)}),C.sort()}(function Yd(C){var F=C.match(Ot);return F?F[1].split(ci):[]}(Ce),ee)))}function cg(C){var F=0,ee=0;return function(){var Ce=on(),Qe=16-(Ce-ee);if(ee=Ce,Qe>0){if(++F>=800)return arguments[0]}else F=0;return C.apply(xt,arguments)}}function ym(C,F){var ee=-1,Ce=C.length,Qe=Ce-1;for(F=F===xt?Ce:F;++ee<F;){var St=th(ee,Qe),oi=C[St];C[St]=C[ee],C[ee]=oi}return C.length=F,C}var h0=function sg(C){var F=an(C,function(Ce){return 500===ee.size&&ee.clear(),Ce}),ee=F.cache;return F}(function(C){var F=[];return 46===C.charCodeAt(0)&&F.push(""),C.replace(Yt,function(ee,Ce,Qe,St){F.push(Qe?St.replace(En,"$1"):Ce||ee)}),F});function zu(C){if("string"==typeof C||Ud(C))return C;var F=C+"";return"0"==F&&1/C==-yn?"-0":F}function Wh(C){if(null!=C){try{return tl.call(C)}catch{}try{return C+""}catch{}}return""}function ao(C){if(C instanceof hr)return C.clone();var F=new Xr(C.__wrapped__,C.__chain__);return F.__actions__=nu(C.__actions__),F.__index__=C.__index__,F.__values__=C.__values__,F}var Gd=As(function(C,F){return Wl(C)?Tt(C,ri(F,1,Wl,!0)):[]}),ud=As(function(C,F){var ee=uc(F);return Wl(ee)&&(ee=xt),Wl(C)?Tt(C,ri(F,1,Wl,!0),Ba(ee,2)):[]}),Sc=As(function(C,F){var ee=uc(F);return Wl(ee)&&(ee=xt),Wl(C)?Tt(C,ri(F,1,Wl,!0),xt,ee):[]});function fg(C,F,ee){var Ce=null==C?0:C.length;if(!Ce)return-1;var Qe=null==ee?0:_s(ee);return Qe<0&&(Qe=ni(Ce+Qe,0)),Ys(C,Ba(F,3),Qe)}function xm(C,F,ee){var Ce=null==C?0:C.length;if(!Ce)return-1;var Qe=Ce-1;return ee!==xt&&(Qe=_s(ee),Qe=ee<0?ni(Ce+Qe,0):Ri(Qe,Ce-1)),Ys(C,Ba(F,3),Qe,!0)}function p0(C){return null!=C&&C.length?ri(C,1):[]}function Oh(C){return C&&C.length?C[0]:xt}var Lp=As(function(C){var F=zs(C,rh);return F.length&&F[0]===C[0]?Hn(F):[]}),bm=As(function(C){var F=uc(C),ee=zs(C,rh);return F===uc(ee)?F=xt:ee.pop(),ee.length&&ee[0]===C[0]?Hn(ee,Ba(F,2)):[]}),Dl=As(function(C){var F=uc(C),ee=zs(C,rh);return(F="function"==typeof F?F:xt)&&ee.pop(),ee.length&&ee[0]===C[0]?Hn(ee,xt,F):[]});function uc(C){var F=null==C?0:C.length;return F?C[F-1]:xt}var bv=As(Lh);function Lh(C,F){return C&&C.length&&F&&F.length?xd(C,F):C}var xf=zd(function(C,F){var ee=null==C?0:C.length,Ce=xe(C,F);return Dh(C,zs(F,function(Qe){return cd(Qe,ee)?+Qe:Qe}).sort(sh)),Ce});function bf(C){return null==C?C:gr.call(C)}var xg=As(function(C){return ih(ri(C,1,Wl,!0))}),dh=As(function(C){var F=uc(C);return Wl(F)&&(F=xt),ih(ri(C,1,Wl,!0),Ba(F,2))}),cl=As(function(C){var F=uc(C);return F="function"==typeof F?F:xt,ih(ri(C,1,Wl,!0),xt,F)});function Sm(C){if(!C||!C.length)return[];var F=0;return C=Ks(C,function(ee){if(Wl(ee))return F=ni(ee.length,F),!0}),Ld(F,function(ee){return zs(C,id(ee))})}function C0(C,F){if(!C||!C.length)return[];var ee=Sm(C);return null==F?ee:zs(ee,function(Ce){return bo(F,xt,Ce)})}var Pp=As(function(C,F){return Wl(C)?Tt(C,F):[]}),wf=As(function(C){return Sl(Ks(C,Wl))}),ep=As(function(C){var F=uc(C);return Wl(F)&&(F=xt),Sl(Ks(C,Wl),Ba(F,2))}),Kh=As(function(C){var F=uc(C);return F="function"==typeof F?F:xt,Sl(Ks(C,Wl),xt,F)}),Fp=As(Sm),kv=As(function(C){var F=C.length,ee=F>1?C[F-1]:xt;return ee="function"==typeof ee?(C.pop(),ee):xt,C0(C,ee)});function k0(C){var F=Ee(C);return F.__chain__=!0,F}function tp(C,F){return F(C)}var Tv=zd(function(C){var F=C.length,ee=F?C[0]:0,Ce=this.__wrapped__,Qe=function(St){return xe(St,C)};return!(F>1||this.__actions__.length)&&Ce instanceof hr&&cd(ee)?((Ce=Ce.slice(ee,+ee+(F?1:0))).__actions__.push({func:tp,args:[Qe],thisArg:xt}),new Xr(Ce,this.__chain__).thru(function(St){return F&&!St.length&&St.push(xt),St})):this.thru(Qe)}),Jh=yu(function(C,F,ee){xs.call(C,ee)?++C[ee]:be(C,ee,1)}),Cg=hf(fg),T0=hf(xm);function Fh(C,F){return(cs(C)?zo:Ne)(C,Ba(F,3))}function rp(C,F){return(cs(C)?Zd:_t)(C,Ba(F,3))}var zp=yu(function(C,F,ee){xs.call(C,ee)?C[ee].push(F):be(C,ee,[F])}),hd=As(function(C,F,ee){var Ce=-1,Qe="function"==typeof F,St=fd(C)?nn(C.length):[];return Ne(C,function(oi){St[++Ce]=Qe?bo(F,oi,ee):wa(oi,F,ee)}),St}),Dm=yu(function(C,F,ee){be(C,ee,F)});function Am(C,F){return(cs(C)?zs:Ls)(C,Ba(F,3))}var Tf=yu(function(C,F,ee){C[ee?0:1].push(F)},function(){return[[],[]]}),Qh=As(function(C,F){if(null==C)return[];var ee=F.length;return ee>1&&su(C,F[0],F[1])?F=[]:ee>2&&su(F[0],F[1],F[2])&&(F=[F[0]]),iu(C,ri(F,1),[])}),Yp=pu||function(){return ks.Date.now()};function kg(C,F,ee){return F=ee?xt:F,ld(C,128,xt,xt,xt,xt,F=C&&null==F?C.length:F)}function Tg(C,F){var ee;if("function"!=typeof F)throw new ol(He);return C=_s(C),function(){return--C>0&&(ee=F.apply(this,arguments)),C<=1&&(F=xt),ee}}var Sg=As(function(C,F,ee){var Ce=1;if(ee.length){var Qe=Pl(ee,Wf(Sg));Ce|=32}return ld(C,Ce,F,ee,Qe)}),b=As(function(C,F,ee){var Ce=3;if(ee.length){var Qe=Pl(ee,Wf(b));Ce|=32}return ld(F,Ce,C,ee,Qe)});function q(C,F,ee){var Ce,Qe,St,oi,Di,ji,Wn=0,Xn=!1,rr=!1,Hr=!0;if("function"!=typeof C)throw new ol(He);function _a(dc){var ju=Ce,Yh=Qe;return Ce=Qe=xt,Wn=dc,oi=C.apply(Yh,ju)}function Ka(dc){var ju=dc-ji;return ji===xt||ju>=F||ju<0||rr&&dc-Wn>=St}function ys(){var dc=Yp();if(Ka(dc))return eo(dc);Di=lh(ys,function Fs(dc){var q0=F-(dc-ji);return rr?Ri(q0,St-(dc-Wn)):q0}(dc))}function eo(dc){return Di=xt,Hr&&Ce?_a(dc):(Ce=Qe=xt,oi)}function Uu(){var dc=Yp(),ju=Ka(dc);if(Ce=arguments,Qe=this,ji=dc,ju){if(Di===xt)return function Za(dc){return Wn=dc,Di=lh(ys,F),Xn?_a(dc):oi}(ji);if(rr)return _u(Di),Di=lh(ys,F),_a(ji)}return Di===xt&&(Di=lh(ys,F)),oi}return F=fh(F)||0,Al(ee)&&(Xn=!!ee.leading,St=(rr="maxWait"in ee)?ni(fh(ee.maxWait)||0,F):St,Hr="trailing"in ee?!!ee.trailing:Hr),Uu.cancel=function jd(){Di!==xt&&_u(Di),Wn=0,Ce=ji=Qe=Di=xt},Uu.flush=function md(){return Di===xt?oi:eo(Yp())},Uu}var ie=As(function(C,F){return bt(C,1,F)}),Re=As(function(C,F,ee){return bt(C,fh(F)||0,ee)});function an(C,F){if("function"!=typeof C||null!=F&&"function"!=typeof F)throw new ol(He);var ee=function(){var Ce=arguments,Qe=F?F.apply(this,Ce):Ce[0],St=ee.cache;if(St.has(Qe))return St.get(Qe);var oi=C.apply(this,Ce);return ee.cache=St.set(Qe,oi)||St,oi};return ee.cache=new(an.Cache||Bu),ee}function sr(C){if("function"!=typeof C)throw new ol(He);return function(){var F=arguments;switch(F.length){case 0:return!C.call(this);case 1:return!C.call(this,F[0]);case 2:return!C.call(this,F[0],F[1]);case 3:return!C.call(this,F[0],F[1],F[2])}return!C.apply(this,F)}}an.Cache=Bu;var Co=Qm(function(C,F){var ee=(F=1==F.length&&cs(F[0])?zs(F[0],Ll(Ba())):zs(ri(F,1),Ll(Ba()))).length;return As(function(Ce){for(var Qe=-1,St=Ri(Ce.length,ee);++Qe<St;)Ce[Qe]=F[Qe].call(this,Ce[Qe]);return bo(C,this,Ce)})}),yl=As(function(C,F){var ee=Pl(F,Wf(yl));return ld(C,32,xt,F,ee)}),$c=As(function(C,F){var ee=Pl(F,Wf($c));return ld(C,64,xt,F,ee)}),Df=zd(function(C,F){return ld(C,256,xt,xt,xt,F)});function Dd(C,F){return C===F||C!=C&&F!=F}var L_=$l(Ui),Yu=$l(function(C,F){return C>=F}),Bh=Ir(function(){return arguments}())?Ir:function(C){return Xl(C)&&xs.call(C,"callee")&&!nc.call(C,"callee")},cs=nn.isArray,Dg=qd?Ll(qd):function ca(C){return Xl(C)&&An(C)==xr};function fd(C){return null!=C&&A0(C.length)&&!ef(C)}function Wl(C){return Xl(C)&&fd(C)}var Af=W||Nm,Ov=vd?Ll(vd):function Ua(C){return Xl(C)&&An(C)==Ya};function Lv(C){if(!Xl(C))return!1;var F=An(C);return F==Ma||"[object DOMException]"==F||"string"==typeof C.message&&"string"==typeof C.name&&!tf(C)}function ef(C){if(!Al(C))return!1;var F=An(C);return F==pr||F==$n||"[object AsyncFunction]"==F||"[object Proxy]"==F}function Pv(C){return"number"==typeof C&&C==_s(C)}function A0(C){return"number"==typeof C&&C>-1&&C%1==0&&C<=Nn}function Al(C){var F=typeof C;return null!=C&&("object"==F||"function"==F)}function Xl(C){return null!=C&&"object"==typeof C}var F_=Cs?Ll(Cs):function ns(C){return Xl(C)&&Tc(C)==ar};function Mm(C){return"number"==typeof C||Xl(C)&&An(C)==Sn}function tf(C){if(!Xl(C)||An(C)!=Gr)return!1;var F=Yl(C);if(null===F)return!0;var ee=xs.call(F,"constructor")&&F.constructor;return"function"==typeof ee&&ee instanceof ee&&tl.call(ee)==ic}var Bv=Jl?Ll(Jl):function Vs(C){return Xl(C)&&An(C)==ur},Ag=ts?Ll(ts):function Ec(C){return Xl(C)&&Tc(C)==lr};function I0(C){return"string"==typeof C||!cs(C)&&Xl(C)&&An(C)==Pa}function Ud(C){return"symbol"==typeof C||Xl(C)&&An(C)==Ga}var hh=ra?Ll(ra):function vl(C){return Xl(C)&&A0(C.length)&&!!Zs[An(C)]},M0=$l(Ds),N_=$l(function(C,F){return C<=F});function Yv(C){if(!C)return[];if(fd(C))return I0(C)?pl(C):nu(C);if(Gc&&C[Gc])return function eu(Ei){for(var pn,nn=[];!(pn=Ei.next()).done;)nn.push(pn.value);return nn}(C[Gc]());var F=Tc(C);return(F==ar?Rs:F==lr?sl:Hp)(C)}function Cu(C){return C?(C=fh(C))===yn||C===-yn?17976931348623157e292*(C<0?-1:1):C==C?C:0:0===C?C:0}function _s(C){var F=Cu(C),ee=F%1;return F==F?ee?F-ee:F:0}function Gv(C){return C?Fe(_s(C),0,Nr):0}function fh(C){if("number"==typeof C)return C;if(Ud(C))return NaN;if(Al(C)){var F="function"==typeof C.valueOf?C.valueOf():C;C=Al(F)?F+"":F}if("string"!=typeof C)return 0===C?C:+C;C=Nc(C);var ee=wt.test(C);return ee||Xe.test(C)?Xa(C.slice(2),ee?2:8):ke.test(C)?NaN:+C}function z_(C){return _l(C,Eu(C))}function Io(C){return null==C?"":Vl(C)}var a1=xu(function(C,F){if(vf(F)||fd(F))_l(F,Ic(F),C);else for(var ee in F)xs.call(F,ee)&&Y(C,ee,F[ee])}),Y_=xu(function(C,F){_l(F,Eu(F),C)}),R0=xu(function(C,F,ee,Ce){_l(F,Eu(F),C,Ce)}),s1=xu(function(C,F,ee,Ce){_l(F,Ic(F),C,Ce)}),G_=zd(xe),Rm=As(function(C,F){C=vs(C);var ee=-1,Ce=F.length,Qe=Ce>2?F[2]:xt;for(Qe&&su(F[0],F[1],Qe)&&(Ce=1);++ee<Ce;)for(var St=F[ee],oi=Eu(St),Di=-1,ji=oi.length;++Di<ji;){var Wn=oi[Di],Xn=C[Wn];(Xn===xt||Dd(Xn,tc[Wn])&&!xs.call(C,Wn))&&(C[Wn]=St[Wn])}return C}),H_=As(function(C){return C.push(xt,s0),bo(W_,xt,C)});function xl(C,F,ee){var Ce=null==C?xt:un(C,F);return Ce===xt?ee:Ce}function Hu(C,F){return null!=C&&c0(C,F,bn)}var jv=$f(function(C,F,ee){null!=F&&"function"!=typeof F.toString&&(F=Pu.call(F)),C[F]=ee},jp(ku)),Ig=$f(function(C,F,ee){null!=F&&"function"!=typeof F.toString&&(F=Pu.call(F)),xs.call(C,F)?C[F].push(ee):C[F]=[ee]},Ba),Gp=As(wa);function Ic(C){return fd(C)?jh(C):Nu(C)}function Eu(C){return fd(C)?jh(C,!0):function Do(C){if(!Al(C))return function yf(C){var F=[];if(null!=C)for(var ee in vs(C))F.push(ee);return F}(C);var F=vf(C),ee=[];for(var Ce in C)"constructor"==Ce&&(F||!xs.call(C,Ce))||ee.push(Ce);return ee}(C)}var $_=xu(function(C,F,ee){po(C,F,ee)}),W_=xu(function(C,F,ee,Ce){po(C,F,ee,Ce)}),X_=zd(function(C,F){var ee={};if(null==C)return ee;var Ce=!1;F=zs(F,function(St){return St=bd(St,C),Ce||(Ce=St.length>1),St}),_l(C,hm(C),ee),Ce&&(ee=it(ee,7,_v));for(var Qe=F.length;Qe--;)df(ee,F[Qe]);return ee}),$v=zd(function(C,F){return null==C?{}:function _d(C,F){return od(C,F,function(ee,Ce){return Hu(C,Ce)})}(C,F)});function Wv(C,F){if(null==C)return{};var ee=zs(hm(C),function(Ce){return[Ce]});return F=Ba(F),od(C,ee,function(Ce,Qe){return F(Ce,Qe[0])})}var Xv=ig(Ic),qv=ig(Eu);function Hp(C){return null==C?[]:$a(C,Ic(C))}var zh=Ih(function(C,F,ee){return F=F.toLowerCase(),C+(ee?P0(F):F)});function P0(C){return Qv(Io(C).toLowerCase())}function Vp(C){return(C=Io(C))&&C.replace(ve,nd).replace(Pc,"")}var ny=Ih(function(C,F,ee){return C+(ee?"-":"")+F.toLowerCase()}),B0=Ih(function(C,F,ee){return C+(ee?" ":"")+F.toLowerCase()}),N0=cm("toLowerCase"),Pm=Ih(function(C,F,ee){return C+(ee?"_":"")+F.toLowerCase()}),m1=Ih(function(C,F,ee){return C+(ee?" ":"")+Qv(F)}),Y0=Ih(function(C,F,ee){return C+(ee?" ":"")+F.toUpperCase()}),Qv=cm("toUpperCase");function e_(C,F,ee){return C=Io(C),(F=ee?xt:F)===xt?function wc(Ei){return $r.test(Ei)}(C)?function Ou(Ei){return Ei.match(xc)||[]}(C):function Js(Ei){return Ei.match(en)||[]}(C):C.match(F)||[]}var up=As(function(C,F){try{return bo(C,xt,F)}catch(ee){return Lv(ee)?ee:new Wa(ee)}}),v1=zd(function(C,F){return zo(F,function(ee){ee=zu(ee),be(C,ee,Sg(C[ee],C))}),C});function jp(C){return function(){return C}}var Lg=Bd(),Pg=Bd(!0);function ku(C){return C}function t_(C){return Uc("function"==typeof C?C:it(C,1))}var G0=As(function(C,F){return function(ee){return wa(ee,C,F)}}),x1=As(function(C,F){return function(ee){return wa(C,ee,F)}});function H0(C,F,ee){var Ce=Ic(F),Qe=Hi(F,Ce);null==ee&&(!Al(F)||!Qe.length&&Ce.length)&&(ee=F,F=C,C=this,Qe=Hi(F,Ic(F)));var St=!(Al(ee)&&"chain"in ee&&!ee.chain),oi=ef(C);return zo(Qe,function(Di){var ji=F[Di];C[Di]=ji,oi&&(C.prototype[Di]=function(){var Wn=this.__chain__;if(St||Wn){var Xn=C(this.__wrapped__);return(Xn.__actions__=nu(this.__actions__)).push({func:ji,args:arguments,thisArg:C}),Xn.__chain__=Wn,Xn}return ji.apply(C,Ts([this.value()],arguments))})}),C}function Wp(){}var b1=cc(zs),ly=cc(Ql),cy=cc(ec);function V0(C){return ag(C)?id(zu(C)):function yd(C){return function(F){return un(F,C)}}(C)}var w1=Cd(),U0=Cd(!0);function Bm(){return[]}function Nm(){return!1}var Bg=jl(function(C,F){return C+F},0),$0=Ap("ceil"),E1=jl(function(C,F){return C/F},1),k1=Ap("floor"),Ng=jl(function(C,F){return C*F},1),qp=Ap("round"),zg=jl(function(C,F){return C-F},0);return Ee.after=function op(C,F){if("function"!=typeof F)throw new ol(He);return C=_s(C),function(){if(--C<1)return F.apply(this,arguments)}},Ee.ary=kg,Ee.assign=a1,Ee.assignIn=Y_,Ee.assignInWith=R0,Ee.assignWith=s1,Ee.at=G_,Ee.before=Tg,Ee.bind=Sg,Ee.bindAll=v1,Ee.bindKey=b,Ee.castArray=function I_(){if(!arguments.length)return[];var C=arguments[0];return cs(C)?C:[C]},Ee.chain=k0,Ee.chunk=function ug(C,F,ee){F=(ee?su(C,F,ee):F===xt)?1:ni(_s(F),0);var Ce=null==C?0:C.length;if(!Ce||F<1)return[];for(var Qe=0,St=0,oi=nn(dr(Ce/F));Qe<Ce;)oi[St++]=Tl(C,Qe,Qe+=F);return oi},Ee.compact=function ch(C){for(var F=-1,ee=null==C?0:C.length,Ce=0,Qe=[];++F<ee;){var St=C[F];St&&(Qe[Ce++]=St)}return Qe},Ee.concat=function uh(){var C=arguments.length;if(!C)return[];for(var F=nn(C-1),ee=arguments[0],Ce=C;Ce--;)F[Ce-1]=arguments[Ce];return Ts(cs(ee)?nu(ee):[ee],ri(F,1))},Ee.cond=function dp(C){var F=null==C?0:C.length,ee=Ba();return C=F?zs(C,function(Ce){if("function"!=typeof Ce[1])throw new ol(He);return[ee(Ce[0]),Ce[1]]}):[],As(function(Ce){for(var Qe=-1;++Qe<F;){var St=C[Qe];if(bo(St[0],this,Ce))return bo(St[1],this,Ce)}})},Ee.conforms=function _1(C){return function ft(C){var F=Ic(C);return function(ee){return yt(ee,C,F)}}(it(C,1))},Ee.constant=jp,Ee.countBy=Jh,Ee.create=function O0(C,F){var ee=xn(C);return null==F?ee:re(ee,F)},Ee.curry=function z(C,F,ee){var Ce=ld(C,8,xt,xt,xt,xt,xt,F=ee?xt:F);return Ce.placeholder=z.placeholder,Ce},Ee.curryRight=function A(C,F,ee){var Ce=ld(C,16,xt,xt,xt,xt,xt,F=ee?xt:F);return Ce.placeholder=A.placeholder,Ce},Ee.debounce=q,Ee.defaults=Rm,Ee.defaultsDeep=H_,Ee.defer=ie,Ee.delay=Re,Ee.difference=Gd,Ee.differenceBy=ud,Ee.differenceWith=Sc,Ee.drop=function dg(C,F,ee){var Ce=null==C?0:C.length;return Ce?Tl(C,(F=ee||F===xt?1:_s(F))<0?0:F,Ce):[]},Ee.dropRight=function Dc(C,F,ee){var Ce=null==C?0:C.length;return Ce?Tl(C,0,(F=Ce-(F=ee||F===xt?1:_s(F)))<0?0:F):[]},Ee.dropRightWhile=function f0(C,F){return C&&C.length?Vo(C,Ba(F,3),!0,!0):[]},Ee.dropWhile=function Jf(C,F){return C&&C.length?Vo(C,Ba(F,3),!0):[]},Ee.fill=function hg(C,F,ee,Ce){var Qe=null==C?0:C.length;return Qe?(ee&&"number"!=typeof ee&&su(C,F,ee)&&(ee=0,Ce=Qe),function pi(C,F,ee,Ce){var Qe=C.length;for((ee=_s(ee))<0&&(ee=-ee>Qe?0:Qe+ee),(Ce=Ce===xt||Ce>Qe?Qe:_s(Ce))<0&&(Ce+=Qe),Ce=ee>Ce?0:Gv(Ce);ee<Ce;)C[ee++]=F;return C}(C,F,ee,Ce)):[]},Ee.filter=function dd(C,F){return(cs(C)?Ks:hi)(C,Ba(F,3))},Ee.flatMap=function Ef(C,F){return ri(Am(C,F),1)},Ee.flatMapDeep=function Ac(C,F){return ri(Am(C,F),yn)},Ee.flatMapDepth=function Ph(C,F,ee){return ee=ee===xt?1:_s(ee),ri(Am(C,F),ee)},Ee.flatten=p0,Ee.flattenDeep=function pg(C){return null!=C&&C.length?ri(C,yn):[]},Ee.flattenDepth=function m0(C,F){return null!=C&&C.length?ri(C,F=F===xt?1:_s(F)):[]},Ee.flip=function Ft(C){return ld(C,512)},Ee.flow=Lg,Ee.flowRight=Pg,Ee.fromPairs=function xv(C){for(var F=-1,ee=null==C?0:C.length,Ce={};++F<ee;){var Qe=C[F];Ce[Qe[0]]=Qe[1]}return Ce},Ee.functions=function Uv(C){return null==C?[]:Hi(C,Ic(C))},Ee.functionsIn=function Gu(C){return null==C?[]:Hi(C,Eu(C))},Ee.groupBy=zp,Ee.initial=function Op(C){return null!=C&&C.length?Tl(C,0,-1):[]},Ee.intersection=Lp,Ee.intersectionBy=bm,Ee.intersectionWith=Dl,Ee.invert=jv,Ee.invertBy=Ig,Ee.invokeMap=hd,Ee.iteratee=t_,Ee.keyBy=Dm,Ee.keys=Ic,Ee.keysIn=Eu,Ee.map=Am,Ee.mapKeys=function o1(C,F){var ee={};return F=Ba(F,3),Gi(C,function(Ce,Qe,St){be(ee,F(Ce,Qe,St),Ce)}),ee},Ee.mapValues=function j_(C,F){var ee={};return F=Ba(F,3),Gi(C,function(Ce,Qe,St){be(ee,Qe,F(Ce,Qe,St))}),ee},Ee.matches=function y1(C){return fo(it(C,1))},Ee.matchesProperty=function $p(C,F){return lc(C,it(F,1))},Ee.memoize=an,Ee.merge=$_,Ee.mergeWith=W_,Ee.method=G0,Ee.methodOf=x1,Ee.mixin=H0,Ee.negate=sr,Ee.nthArg=function oy(C){return C=_s(C),As(function(F){return Sh(F,C)})},Ee.omit=X_,Ee.omitBy=function q_(C,F){return Wv(C,sr(Ba(F)))},Ee.once=function Us(C){return Tg(2,C)},Ee.orderBy=function ap(C,F,ee,Ce){return null==C?[]:(cs(F)||(F=null==F?[]:[F]),cs(ee=Ce?xt:ee)||(ee=null==ee?[]:[ee]),iu(C,F,ee))},Ee.over=b1,Ee.overArgs=Co,Ee.overEvery=ly,Ee.overSome=cy,Ee.partial=yl,Ee.partialRight=$c,Ee.partition=Tf,Ee.pick=$v,Ee.pickBy=Wv,Ee.property=V0,Ee.propertyOf=function Vu(C){return function(F){return null==C?xt:un(C,F)}},Ee.pull=bv,Ee.pullAll=Lh,Ee.pullAllBy=function mg(C,F,ee){return C&&C.length&&F&&F.length?xd(C,F,Ba(ee,2)):C},Ee.pullAllWith=function qh(C,F,ee){return C&&C.length&&F&&F.length?xd(C,F,xt,ee):C},Ee.pullAt=xf,Ee.range=w1,Ee.rangeRight=U0,Ee.rearg=Df,Ee.reject=function D_(C,F){return(cs(C)?Ks:hi)(C,sr(Ba(F,3)))},Ee.remove=function Em(C,F){var ee=[];if(!C||!C.length)return ee;var Ce=-1,Qe=[],St=C.length;for(F=Ba(F,3);++Ce<St;){var oi=C[Ce];F(oi,Ce,C)&&(ee.push(oi),Qe.push(Ce))}return Dh(C,Qe),ee},Ee.rest=function S0(C,F){if("function"!=typeof C)throw new ol(He);return As(C,F=F===xt?F:_s(F))},Ee.reverse=bf,Ee.sampleSize=function Iv(C,F,ee){return F=(ee?su(C,F,ee):F===xt)?1:_s(F),(cs(C)?f:rm)(C,F)},Ee.set=function K_(C,F,ee){return null==C?C:Ah(C,F,ee)},Ee.setWith=function Mf(C,F,ee,Ce){return Ce="function"==typeof Ce?Ce:xt,null==C?C:Ah(C,F,ee,Ce)},Ee.shuffle=function Mv(C){return(cs(C)?_:Ep)(C)},Ee.slice=function Zh(C,F,ee){var Ce=null==C?0:C.length;return Ce?(ee&&"number"!=typeof ee&&su(C,F,ee)?(F=0,ee=Ce):(F=null==F?0:_s(F),ee=ee===xt?Ce:_s(ee)),Tl(C,F,ee)):[]},Ee.sortBy=Qh,Ee.sortedUniq=function y0(C){return C&&C.length?Km(C):[]},Ee.sortedUniqBy=function _g(C,F){return C&&C.length?Km(C,Ba(F,2)):[]},Ee.split=function Kv(C,F,ee){return ee&&"number"!=typeof ee&&su(C,F,ee)&&(F=ee=xt),(ee=ee===xt?Nr:ee>>>0)?(C=Io(C))&&("string"==typeof F||null!=F&&!Bv(F))&&!(F=Vl(F))&&Cl(C)?ah(pl(C),0,ee):C.split(F,ee):[]},Ee.spread=function Rv(C,F){if("function"!=typeof C)throw new ol(He);return F=null==F?0:ni(_s(F),0),As(function(ee){var Ce=ee[F],Qe=ah(ee,0,F);return Ce&&Ts(Qe,Ce),bo(C,this,Qe)})},Ee.tail=function Tm(C){var F=null==C?0:C.length;return F?Tl(C,1,F):[]},Ee.take=function yg(C,F,ee){return C&&C.length?Tl(C,0,(F=ee||F===xt?1:_s(F))<0?0:F):[]},Ee.takeRight=function x0(C,F,ee){var Ce=null==C?0:C.length;return Ce?Tl(C,(F=Ce-(F=ee||F===xt?1:_s(F)))<0?0:F,Ce):[]},Ee.takeRightWhile=function b0(C,F){return C&&C.length?Vo(C,Ba(F,3),!1,!0):[]},Ee.takeWhile=function w0(C,F){return C&&C.length?Vo(C,Ba(F,3)):[]},Ee.tap=function Bp(C,F){return F(C),C},Ee.throttle=function Hd(C,F,ee){var Ce=!0,Qe=!0;if("function"!=typeof C)throw new ol(He);return Al(ee)&&(Ce="leading"in ee?!!ee.leading:Ce,Qe="trailing"in ee?!!ee.trailing:Qe),q(C,F,{leading:Ce,maxWait:F,trailing:Qe})},Ee.thru=tp,Ee.toArray=Yv,Ee.toPairs=Xv,Ee.toPairsIn=qv,Ee.toPath=function j0(C){return cs(C)?zs(C,zu):Ud(C)?[C]:nu(h0(Io(C)))},Ee.toPlainObject=z_,Ee.transform=function J_(C,F,ee){var Ce=cs(C),Qe=Ce||Af(C)||hh(C);if(F=Ba(F,4),null==ee){var St=C&&C.constructor;ee=Qe?Ce?new St:[]:Al(C)&&ef(St)?xn(Yl(C)):{}}return(Qe?zo:Gi)(C,function(oi,Di,ji){return F(ee,oi,Di,ji)}),ee},Ee.unary=function Vd(C){return kg(C,1)},Ee.union=xg,Ee.unionBy=dh,Ee.unionWith=cl,Ee.uniq=function wv(C){return C&&C.length?ih(C):[]},Ee.uniqBy=function bg(C,F){return C&&C.length?ih(C,Ba(F,2)):[]},Ee.uniqWith=function Cv(C,F){return F="function"==typeof F?F:xt,C&&C.length?ih(C,xt,F):[]},Ee.unset=function Zv(C,F){return null==C||df(C,F)},Ee.unzip=Sm,Ee.unzipWith=C0,Ee.update=function l1(C,F,ee){return null==C?C:Lo(C,F,am(ee))},Ee.updateWith=function c1(C,F,ee,Ce){return Ce="function"==typeof Ce?Ce:xt,null==C?C:Lo(C,F,am(ee),Ce)},Ee.values=Hp,Ee.valuesIn=function Q_(C){return null==C?[]:$a(C,Eu(C))},Ee.without=Pp,Ee.words=e_,Ee.wrap=function Im(C,F){return yl(am(F),C)},Ee.xor=wf,Ee.xorBy=ep,Ee.xorWith=Kh,Ee.zip=Fp,Ee.zipObject=function E0(C,F){return nh(C||[],F||[],Y)},Ee.zipObjectDeep=function Ev(C,F){return nh(C||[],F||[],Ah)},Ee.zipWith=kv,Ee.entries=Xv,Ee.entriesIn=qv,Ee.extend=Y_,Ee.extendWith=R0,H0(Ee,Ee),Ee.add=Bg,Ee.attempt=up,Ee.camelCase=zh,Ee.capitalize=P0,Ee.ceil=$0,Ee.clamp=function Mg(C,F,ee){return ee===xt&&(ee=F,F=xt),ee!==xt&&(ee=(ee=fh(ee))==ee?ee:0),F!==xt&&(F=(F=fh(F))==F?F:0),Fe(fh(C),F,ee)},Ee.clone=function M_(C){return it(C,4)},Ee.cloneDeep=function qy(C){return it(C,5)},Ee.cloneDeepWith=function Fx(C,F){return it(C,5,F="function"==typeof F?F:xt)},Ee.cloneWith=function R_(C,F){return it(C,4,F="function"==typeof F?F:xt)},Ee.conformsTo=function O_(C,F){return null==F||yt(C,F,Ic(F))},Ee.deburr=Vp,Ee.defaultTo=function Og(C,F){return null==C||C!=C?F:C},Ee.divide=E1,Ee.endsWith=function Om(C,F,ee){C=Io(C),F=Vl(F);var Ce=C.length,Qe=ee=ee===xt?Ce:Fe(_s(ee),0,Ce);return(ee-=F.length)>=0&&C.slice(ee,Qe)==F},Ee.eq=Dd,Ee.escape=function iy(C){return(C=Io(C))&&Mt.test(C)?C.replace(Ci,Qc):C},Ee.escapeRegExp=function F0(C){return(C=Io(C))&&vt.test(C)?C.replace(Ut,"\\$&"):C},Ee.every=function Np(C,F,ee){var Ce=cs(C)?Ql:zt;return ee&&su(C,F,ee)&&(F=xt),Ce(C,Ba(F,3))},Ee.find=Cg,Ee.findIndex=fg,Ee.findKey=function L0(C,F){return Iu(C,Ba(F,3),Gi)},Ee.findLast=T0,Ee.findLastIndex=xm,Ee.findLastKey=function lp(C,F){return Iu(C,Ba(F,3),Gn)},Ee.floor=k1,Ee.forEach=Fh,Ee.forEachRight=rp,Ee.forIn=function Hv(C,F){return null==C?C:Oi(C,Ba(F,3),Eu)},Ee.forInRight=function Vv(C,F){return null==C?C:Ai(C,Ba(F,3),Eu)},Ee.forOwn=function V_(C,F){return C&&Gi(C,Ba(F,3))},Ee.forOwnRight=function U_(C,F){return C&&Gn(C,Ba(F,3))},Ee.get=xl,Ee.gt=L_,Ee.gte=Yu,Ee.has=function If(C,F){return null!=C&&c0(C,F,cn)},Ee.hasIn=Hu,Ee.head=Oh,Ee.identity=ku,Ee.includes=function kf(C,F,ee,Ce){C=fd(C)?C:Hp(C),ee=ee&&!Ce?_s(ee):0;var Qe=C.length;return ee<0&&(ee=ni(Qe+ee,0)),I0(C)?ee<=Qe&&C.indexOf(F,ee)>-1:!!Qe&&wo(C,F,ee)>-1},Ee.indexOf=function wu(C,F,ee){var Ce=null==C?0:C.length;if(!Ce)return-1;var Qe=null==ee?0:_s(ee);return Qe<0&&(Qe=ni(Ce+Qe,0)),wo(C,F,Qe)},Ee.inRange=function ey(C,F,ee){return F=Cu(F),ee===xt?(ee=F,F=0):ee=Cu(ee),function Bn(C,F,ee){return C>=Ri(F,ee)&&C<ni(F,ee)}(C=fh(C),F,ee)},Ee.invoke=Gp,Ee.isArguments=Bh,Ee.isArray=cs,Ee.isArrayBuffer=Dg,Ee.isArrayLike=fd,Ee.isArrayLikeObject=Wl,Ee.isBoolean=function Zy(C){return!0===C||!1===C||Xl(C)&&An(C)==Mn},Ee.isBuffer=Af,Ee.isDate=Ov,Ee.isElement=function Ky(C){return Xl(C)&&1===C.nodeType&&!tf(C)},Ee.isEmpty=function Jy(C){if(null==C)return!0;if(fd(C)&&(cs(C)||"string"==typeof C||"function"==typeof C.splice||Af(C)||hh(C)||Bh(C)))return!C.length;var F=Tc(C);if(F==ar||F==lr)return!C.size;if(vf(C))return!Nu(C).length;for(var ee in C)if(xs.call(C,ee))return!1;return!0},Ee.isEqual=function Qy(C,F){return qr(C,F)},Ee.isEqualWith=function D0(C,F,ee){var Ce=(ee="function"==typeof ee?ee:xt)?ee(C,F):xt;return Ce===xt?qr(C,F,xt,ee):!!Ce},Ee.isError=Lv,Ee.isFinite=function P_(C){return"number"==typeof C&&he(C)},Ee.isFunction=ef,Ee.isInteger=Pv,Ee.isLength=A0,Ee.isMap=F_,Ee.isMatch=function e1(C,F){return C===F||Xs(C,F,pf(F))},Ee.isMatchWith=function B_(C,F,ee){return ee="function"==typeof ee?ee:xt,Xs(C,F,pf(F),ee)},Ee.isNaN=function t1(C){return Mm(C)&&C!=+C},Ee.isNative=function Wc(C){if(u0(C))throw new Wa("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ro(C)},Ee.isNil=function Fv(C){return null==C},Ee.isNull=function Nh(C){return null===C},Ee.isNumber=Mm,Ee.isObject=Al,Ee.isObjectLike=Xl,Ee.isPlainObject=tf,Ee.isRegExp=Bv,Ee.isSafeInteger=function n1(C){return Pv(C)&&C>=-Nn&&C<=Nn},Ee.isSet=Ag,Ee.isString=I0,Ee.isSymbol=Ud,Ee.isTypedArray=hh,Ee.isUndefined=function Nv(C){return C===xt},Ee.isWeakMap=function zv(C){return Xl(C)&&Tc(C)==Ra},Ee.isWeakSet=function Eo(C){return Xl(C)&&"[object WeakSet]"==An(C)},Ee.join=function wm(C,F){return null==C?"":Ie.call(C,F)},Ee.kebabCase=ny,Ee.last=uc,Ee.lastIndexOf=function g0(C,F,ee){var Ce=null==C?0:C.length;if(!Ce)return-1;var Qe=Ce;return ee!==xt&&(Qe=(Qe=_s(ee))<0?ni(Ce+Qe,0):Ri(Qe,Ce-1)),F==F?function rd(Ei,pn,nn){for(var Fr=nn+1;Fr--;)if(Ei[Fr]===pn)return Fr;return Fr}(C,F,Qe):Ys(C,td,Qe,!0)},Ee.lowerCase=B0,Ee.lowerFirst=N0,Ee.lt=M0,Ee.lte=N_,Ee.max=function uy(C){return C&&C.length?Gt(C,ku,Ui):xt},Ee.maxBy=function T1(C,F){return C&&C.length?Gt(C,Ba(F,2),Ui):xt},Ee.mean=function W0(C){return Wo(C,ku)},Ee.meanBy=function S1(C,F){return Wo(C,Ba(F,2))},Ee.min=function Xp(C){return C&&C.length?Gt(C,ku,Ds):xt},Ee.minBy=function D1(C,F){return C&&C.length?Gt(C,Ba(F,2),Ds):xt},Ee.stubArray=Bm,Ee.stubFalse=Nm,Ee.stubObject=function C1(){return{}},Ee.stubString=function i_(){return""},Ee.stubTrue=function Fg(){return!0},Ee.multiply=Ng,Ee.nth=function Cm(C,F){return C&&C.length?Sh(C,_s(F)):xt},Ee.noConflict=function Fm(){return ks._===this&&(ks._=bs),this},Ee.noop=Wp,Ee.now=Yp,Ee.pad=function u1(C,F,ee){C=Io(C);var Ce=(F=_s(F))?Fl(C):0;if(!F||Ce>=F)return C;var Qe=(F-Ce)/2;return Nd(v(Qe),ee)+C+Nd(dr(Qe),ee)},Ee.padEnd=function d1(C,F,ee){C=Io(C);var Ce=(F=_s(F))?Fl(C):0;return F&&Ce<F?C+Nd(F-Ce,ee):C},Ee.padStart=function h1(C,F,ee){C=Io(C);var Ce=(F=_s(F))?Fl(C):0;return F&&Ce<F?Nd(F-Ce,ee)+C:C},Ee.parseInt=function f1(C,F,ee){return ee||null==F?F=0:F&&(F=+F),Zn(Io(C).replace(pt,""),F||0)},Ee.random=function ty(C,F,ee){if(ee&&"boolean"!=typeof ee&&su(C,F,ee)&&(F=ee=xt),ee===xt&&("boolean"==typeof F?(ee=F,F=xt):"boolean"==typeof C&&(ee=C,C=xt)),C===xt&&F===xt?(C=0,F=1):(C=Cu(C),F===xt?(F=C,C=0):F=Cu(F)),C>F){var Ce=C;C=F,F=Ce}if(ee||C%1||F%1){var Qe=Ar();return Ri(C+Qe*(F-C+uu("1e-"+((Qe+"").length-1))),F)}return th(C,F)},Ee.reduce=function Eg(C,F,ee){var Ce=cs(C)?vo:oa,Qe=arguments.length<3;return Ce(C,Ba(F,4),ee,Qe,Ne)},Ee.reduceRight=function Av(C,F,ee){var Ce=cs(C)?Qu:oa,Qe=arguments.length<3;return Ce(C,Ba(F,4),ee,Qe,_t)},Ee.repeat=function p1(C,F,ee){return F=(ee?su(C,F,ee):F===xt)?1:_s(F),Zo(Io(C),F)},Ee.replace=function Lm(){var C=arguments,F=Io(C[0]);return C.length<3?F:F.replace(C[1],C[2])},Ee.result=function Z_(C,F,ee){var Ce=-1,Qe=(F=bd(F,C)).length;for(Qe||(Qe=1,C=xt);++Ce<Qe;){var St=null==C?xt:C[zu(F[Ce])];St===xt&&(Ce=Qe,St=ee),C=ef(St)?St.call(C):St}return C},Ee.round=qp,Ee.runInContext=Ei,Ee.sample=function A_(C){return(cs(C)?k:vv)(C)},Ee.size=function sp(C){if(null==C)return 0;if(fd(C))return I0(C)?Fl(C):C.length;var F=Tc(C);return F==ar||F==lr?C.size:Nu(C).length},Ee.snakeCase=Pm,Ee.some=function Sf(C,F,ee){var Ce=cs(C)?ec:kp;return ee&&su(C,F,ee)&&(F=xt),Ce(C,Ba(F,3))},Ee.sortedIndex=function Qf(C,F){return Tp(C,F)},Ee.sortedIndexBy=function gg(C,F,ee){return Sp(C,F,Ba(ee,2))},Ee.sortedIndexOf=function km(C,F){var ee=null==C?0:C.length;if(ee){var Ce=Tp(C,F);if(Ce<ee&&Dd(C[Ce],F))return Ce}return-1},Ee.sortedLastIndex=function v0(C,F){return Tp(C,F,!0)},Ee.sortedLastIndexBy=function _0(C,F,ee){return Sp(C,F,Ba(ee,2),!0)},Ee.sortedLastIndexOf=function vg(C,F){if(null!=C&&C.length){var Ce=Tp(C,F,!0)-1;if(Dd(C[Ce],F))return Ce}return-1},Ee.startCase=m1,Ee.startsWith=function ry(C,F,ee){return C=Io(C),ee=null==ee?0:Fe(_s(ee),0,C.length),F=Vl(F),C.slice(ee,ee+F.length)==F},Ee.subtract=zg,Ee.sum=function X0(C){return C&&C.length?Ol(C,ku):0},Ee.sumBy=function pd(C,F){return C&&C.length?Ol(C,Ba(F,2)):0},Ee.template=function g1(C,F,ee){var Ce=Ee.templateSettings;ee&&su(C,F,ee)&&(F=xt),C=Io(C),F=R0({},F,Ce,Ed);var Di,ji,Qe=R0({},F.imports,Ce.imports,Ed),St=Ic(Qe),oi=$a(Qe,St),Wn=0,Xn=F.interpolate||l,rr="__p += '",Hr=El((F.escape||l).source+"|"+Xn.source+"|"+(Xn===_n?st:l).source+"|"+(F.evaluate||l).source+"|$","g"),_a="//# sourceURL="+(xs.call(F,"sourceURL")?(F.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rl+"]")+"\n";C.replace(Hr,function(Ka,ys,eo,jd,md,Uu){return eo||(eo=jd),rr+=C.slice(Wn,Uu).replace(u,Qs),ys&&(Di=!0,rr+="' +\n__e("+ys+") +\n'"),md&&(ji=!0,rr+="';\n"+md+";\n__p += '"),eo&&(rr+="' +\n((__t = ("+eo+")) == null ? '' : __t) +\n'"),Wn=Uu+Ka.length,Ka}),rr+="';\n";var Za=xs.call(F,"variable")&&F.variable;if(Za){if($i.test(Za))throw new Wa("Invalid `variable` option passed into `_.template`")}else rr="with (obj) {\n"+rr+"\n}\n";rr=(ji?rr.replace(Je,""):rr).replace(At,"$1").replace(kt,"$1;"),rr="function("+(Za||"obj")+") {\n"+(Za?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Di?", __e = _.escape":"")+(ji?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+rr+"return __p\n}";var Fs=up(function(){return Os(St,_a+"return "+rr).apply(xt,oi)});if(Fs.source=rr,Lv(Fs))throw Fs;return Fs},Ee.times=function hp(C,F){if((C=_s(C))<1||C>Nn)return[];var ee=Nr,Ce=Ri(C,Nr);F=Ba(F),C-=Nr;for(var Qe=Ld(Ce,F);++ee<C;)F(ee);return Qe},Ee.toFinite=Cu,Ee.toInteger=_s,Ee.toLength=Gv,Ee.toLower=function Jv(C){return Io(C).toLowerCase()},Ee.toNumber=fh,Ee.toSafeInteger=function r1(C){return C?Fe(_s(C),-Nn,Nn):0===C?C:0},Ee.toString=Io,Ee.toUpper=function Rg(C){return Io(C).toUpperCase()},Ee.trim=function Up(C,F,ee){if((C=Io(C))&&(ee||F===xt))return Nc(C);if(!C||!(F=Vl(F)))return C;var Ce=pl(C),Qe=pl(F);return ah(Ce,bc(Ce,Qe),Jc(Ce,Qe)+1).join("")},Ee.trimEnd=function cp(C,F,ee){if((C=Io(C))&&(ee||F===xt))return C.slice(0,Ss(C)+1);if(!C||!(F=Vl(F)))return C;var Ce=pl(C);return ah(Ce,0,Jc(Ce,pl(F))+1).join("")},Ee.trimStart=function ay(C,F,ee){if((C=Io(C))&&(ee||F===xt))return C.replace(pt,"");if(!C||!(F=Vl(F)))return C;var Ce=pl(C);return ah(Ce,bc(Ce,pl(F))).join("")},Ee.truncate=function sy(C,F){var ee=30,Ce="...";if(Al(F)){var Qe="separator"in F?F.separator:Qe;ee="length"in F?_s(F.length):ee,Ce="omission"in F?Vl(F.omission):Ce}var St=(C=Io(C)).length;if(Cl(C)){var oi=pl(C);St=oi.length}if(ee>=St)return C;var Di=ee-Fl(Ce);if(Di<1)return Ce;var ji=oi?ah(oi,0,Di).join(""):C.slice(0,Di);if(Qe===xt)return ji+Ce;if(oi&&(Di+=ji.length-Di),Bv(Qe)){if(C.slice(Di).search(Qe)){var Wn,Xn=ji;for(Qe.global||(Qe=El(Qe.source,Io(Bt.exec(Qe))+"g")),Qe.lastIndex=0;Wn=Qe.exec(Xn);)var rr=Wn.index;ji=ji.slice(0,rr===xt?Di:rr)}}else if(C.indexOf(Vl(Qe),Di)!=Di){var Hr=ji.lastIndexOf(Qe);Hr>-1&&(ji=ji.slice(0,Hr))}return ji+Ce},Ee.unescape=function z0(C){return(C=Io(C))&&Ii.test(C)?C.replace(ai,ad):C},Ee.uniqueId=function n_(C){var F=++Lu;return Io(C)+F},Ee.upperCase=Y0,Ee.upperFirst=Qv,Ee.each=Fh,Ee.eachRight=rp,Ee.first=Oh,H0(Ee,function(){var C={};return Gi(Ee,function(F,ee){xs.call(Ee.prototype,ee)||(C[ee]=F)}),C}(),{chain:!1}),Ee.VERSION="4.17.21",zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(C){Ee[C].placeholder=Ee}),zo(["drop","take"],function(C,F){hr.prototype[C]=function(ee){ee=ee===xt?1:ni(_s(ee),0);var Ce=this.__filtered__&&!F?new hr(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Ri(ee,Ce.__takeCount__):Ce.__views__.push({size:Ri(ee,Nr),type:C+(Ce.__dir__<0?"Right":"")}),Ce},hr.prototype[C+"Right"]=function(ee){return this.reverse()[C](ee).reverse()}}),zo(["filter","map","takeWhile"],function(C,F){var ee=F+1,Ce=1==ee||3==ee;hr.prototype[C]=function(Qe){var St=this.clone();return St.__iteratees__.push({iteratee:Ba(Qe,3),type:ee}),St.__filtered__=St.__filtered__||Ce,St}}),zo(["head","last"],function(C,F){var ee="take"+(F?"Right":"");hr.prototype[C]=function(){return this[ee](1).value()[0]}}),zo(["initial","tail"],function(C,F){var ee="drop"+(F?"":"Right");hr.prototype[C]=function(){return this.__filtered__?new hr(this):this[ee](1)}}),hr.prototype.compact=function(){return this.filter(ku)},hr.prototype.find=function(C){return this.filter(C).head()},hr.prototype.findLast=function(C){return this.reverse().find(C)},hr.prototype.invokeMap=As(function(C,F){return"function"==typeof C?new hr(this):this.map(function(ee){return wa(ee,C,F)})}),hr.prototype.reject=function(C){return this.filter(sr(Ba(C)))},hr.prototype.slice=function(C,F){C=_s(C);var ee=this;return ee.__filtered__&&(C>0||F<0)?new hr(ee):(C<0?ee=ee.takeRight(-C):C&&(ee=ee.drop(C)),F!==xt&&(ee=(F=_s(F))<0?ee.dropRight(-F):ee.take(F-C)),ee)},hr.prototype.takeRightWhile=function(C){return this.reverse().takeWhile(C).reverse()},hr.prototype.toArray=function(){return this.take(Nr)},Gi(hr.prototype,function(C,F){var ee=/^(?:filter|find|map|reject)|While$/.test(F),Ce=/^(?:head|last)$/.test(F),Qe=Ee[Ce?"take"+("last"==F?"Right":""):F],St=Ce||/^find/.test(F);Qe&&(Ee.prototype[F]=function(){var oi=this.__wrapped__,Di=Ce?[1]:arguments,ji=oi instanceof hr,Wn=Di[0],Xn=ji||cs(oi),rr=function(ys){var eo=Qe.apply(Ee,Ts([ys],Di));return Ce&&Hr?eo[0]:eo};Xn&&ee&&"function"==typeof Wn&&1!=Wn.length&&(ji=Xn=!1);var Hr=this.__chain__,Za=St&&!Hr,Fs=ji&&!this.__actions__.length;if(!St&&Xn){oi=Fs?oi:new hr(this);var Ka=C.apply(oi,Di);return Ka.__actions__.push({func:tp,args:[rr],thisArg:xt}),new Xr(Ka,Hr)}return Za&&Fs?C.apply(this,Di):(Ka=this.thru(rr),Za?Ce?Ka.value()[0]:Ka.value():Ka)})}),zo(["pop","push","shift","sort","splice","unshift"],function(C){var F=tu[C],ee=/^(?:push|sort|unshift)$/.test(C)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(C);Ee.prototype[C]=function(){var Qe=arguments;if(Ce&&!this.__chain__){var St=this.value();return F.apply(cs(St)?St:[],Qe)}return this[ee](function(oi){return F.apply(cs(oi)?oi:[],Qe)})}}),Gi(hr.prototype,function(C,F){var ee=Ee[F];if(ee){var Ce=ee.name+"";xs.call(Qa,Ce)||(Qa[Ce]=[]),Qa[Ce].push({name:F,func:ee})}}),Qa[wd(xt,2).name]=[{name:"wrapper",func:xt}],hr.prototype.clone=function So(){var C=new hr(this.__wrapped__);return C.__actions__=nu(this.__actions__),C.__dir__=this.__dir__,C.__filtered__=this.__filtered__,C.__iteratees__=nu(this.__iteratees__),C.__takeCount__=this.__takeCount__,C.__views__=nu(this.__views__),C},hr.prototype.reverse=function ll(){if(this.__filtered__){var C=new hr(this);C.__dir__=-1,C.__filtered__=!0}else(C=this.clone()).__dir__*=-1;return C},hr.prototype.value=function Hf(){var C=this.__wrapped__.value(),F=this.__dir__,ee=cs(C),Ce=F<0,Qe=ee?C.length:0,St=function l0(C,F,ee){for(var Ce=-1,Qe=ee.length;++Ce<Qe;){var St=ee[Ce],oi=St.size;switch(St.type){case"drop":C+=oi;break;case"dropRight":F-=oi;break;case"take":F=Ri(F,C+oi);break;case"takeRight":C=ni(C,F-oi)}}return{start:C,end:F}}(0,Qe,this.__views__),oi=St.start,Di=St.end,ji=Di-oi,Wn=Ce?Di:oi-1,Xn=this.__iteratees__,rr=Xn.length,Hr=0,_a=Ri(ji,this.__takeCount__);if(!ee||!Ce&&Qe==ji&&_a==ji)return Ps(C,this.__actions__);var Za=[];e:for(;ji--&&Hr<_a;){for(var Fs=-1,Ka=C[Wn+=F];++Fs<rr;){var ys=Xn[Fs],jd=ys.type,md=(0,ys.iteratee)(Ka);if(2==jd)Ka=md;else if(!md){if(1==jd)continue e;break e}}Za[Hr++]=Ka}return Za},Ee.prototype.at=Tv,Ee.prototype.chain=function wg(){return k0(this)},Ee.prototype.commit=function Sv(){return new Xr(this.value(),this.__chain__)},Ee.prototype.next=function ip(){this.__values__===xt&&(this.__values__=Yv(this.value()));var C=this.__index__>=this.__values__.length;return{done:C,value:C?xt:this.__values__[this.__index__++]}},Ee.prototype.plant=function Ao(C){for(var F,ee=this;ee instanceof vr;){var Ce=ao(ee);Ce.__index__=0,Ce.__values__=xt,F?Qe.__wrapped__=Ce:F=Ce;var Qe=Ce;ee=ee.__wrapped__}return Qe.__wrapped__=C,F},Ee.prototype.reverse=function np(){var C=this.__wrapped__;if(C instanceof hr){var F=C;return this.__actions__.length&&(F=new hr(this)),(F=F.reverse()).__actions__.push({func:tp,args:[bf],thisArg:xt}),new Xr(F,this.__chain__)}return this.thru(bf)},Ee.prototype.toJSON=Ee.prototype.valueOf=Ee.prototype.value=function Cf(){return Ps(this.__wrapped__,this.__actions__)},Ee.prototype.first=Ee.prototype.head,Gc&&(Ee.prototype[Gc]=function Dv(){return this}),Ee}();ks._=Cc,(T=function(){return Cc}.call(ja,Zt,ja,uo))!==xt&&(uo.exports=T)}.call(this)},4448:function(uo){uo.exports=function(){"use strict";var ja,Zt,T;function xt(t,j){if(ja)if(Zt){var He="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+ja+")(sharedChunk); ("+Zt+")(sharedChunk); self.onerror = null;",Be={};ja(Be),T=j(Be),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(T.workerUrl=window.URL.createObjectURL(new Blob([He],{type:"text/javascript"})))}else Zt=j;else ja=j}return xt(0,function(t){var j=typeof self<"u"?self:{},He="2.15.0";let Be;const Me={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Be){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Be=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):c}catch{Be=c}}return Be},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Me.API_URL)return null;try{const c=new URL(Me.API_URL);return"api.mapbox.cn"===c.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===c.hostname?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},We={supported:!1,testSupport:function(c){!Ct&&at&&(ot?Wt(c):nt=c)}};let nt,at,Ct=!1,ot=!1;function Wt(c){const s=c.createTexture();c.bindTexture(c.TEXTURE_2D,s);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,at),c.isContextLost())return;We.supported=!0}catch{}c.deleteTexture(s),Ct=!0}j.document&&(at=j.document.createElement("img"),at.onload=function(){nt&&Wt(nt),nt=null,ot=!0},at.onerror=function(){Ct=!0,nt=null},at.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const et="01";function lt(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var gt=_i;function _i(c,s,h,g){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=g}_i.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(void 0===s&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,g=0;g<8;g++){var y=this.sampleCurveX(h)-c;if(Math.abs(y)<s)return h;var S=this.sampleCurveDerivativeX(h);if(Math.abs(S)<1e-6)break;h-=y/S}var R=0,G=1;for(h=c,g=0;g<20&&(y=this.sampleCurveX(h),!(Math.abs(y-c)<s));g++)c>y?R=h:G=h,h=.5*(G-R)+R;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var tt=lt(gt),yi=Pi;function Pi(c,s){this.x=c,this.y=s}Pi.prototype={clone:function(){return new Pi(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),g=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=g,this},_rotateAround:function(c,s){var h=Math.cos(c),g=Math.sin(c),y=s.y+g*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-g*(this.y-s.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Pi.convert=function(c){return c instanceof Pi?c:Array.isArray(c)?new Pi(c[0],c[1]):c};var Dt=lt(yi);const Fi=Math.PI/180,xi=180/Math.PI;function fi(c){return c*Fi}function It(c){return c*xi}const Si=[[0,0],[1,0],[1,1],[0,1]];function Ni(c){if(c<=0)return 0;if(c>=1)return 1;const s=c*c,h=s*c;return 4*(c<.5?h:3*(c-s)+h-.75)}function Zi(c,s,h,g){const y=new tt(c,s,h,g);return function(S){return y.solve(S)}}const Rn=Zi(.25,.1,.25,1);function Ki(c,s,h){return Math.min(h,Math.max(s,c))}function tn(c,s,h){return(h=Ki((h-c)/(s-c),0,1))*h*(3-2*h)}function yn(c,s,h){const g=h-s,y=((c-s)%g+g)%g+s;return y===s?h:y}function Nn(c,s,h){if(!c.length)return h(null,[]);let g=c.length;const y=new Array(c.length);let S=null;c.forEach((R,G)=>{s(R,(X,K)=>{X&&(S=X),y[G]=K,0==--g&&h(S,y)})})}function yr(c){const s=[];for(const h in c)s.push(c[h]);return s}function fr(c,...s){for(const h of s)for(const g in h)c[g]=h[g];return c}let Nr=1;function Mi(){return Nr++}function In(){return function c(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()}function Jn(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function ia(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function jr(c,s){c.forEach(h=>{s[h]&&(s[h]=s[h].bind(s))})}function Pr(c,s){return-1!==c.indexOf(s,c.length-s.length)}function Mn(c,s,h){const g={};for(const y in c)g[y]=s.call(h||this,c[y],y,c);return g}function Ya(c,s,h){const g={};for(const y in c)s.call(h||this,c[y],y,c)&&(g[y]=c[y]);return g}function ka(c){return Array.isArray(c)?c.map(ka):"object"==typeof c&&c?Mn(c,ka):c}const Ma={};function pr(c){Ma[c]||(typeof console<"u"&&console.warn(c),Ma[c]=!0)}function $n(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function ar(c){let s=0;for(let h,g,y=0,S=c.length,R=S-1;y<S;R=y++)h=c[y],g=c[R],s+=(g.x-h.x)*(h.y+g.y);return s}function Sn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Dn(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,g,y,S)=>{const R=y||S;return s[g]=!R||R.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s}let Gr=null;function Vn(c){if(null==Gr){const s=c.navigator?c.navigator.userAgent:null;Gr=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Gr}function rn(c){try{const s=j[c];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}}function ur(c,s){return[c[4*s],c[4*s+1],c[4*s+2],c[4*s+3]]}const lr="mapbox-tiles";let Ja,Ra,Pa=500,Ga=50;function ha(){try{return j.caches}catch{}}function xr(){ha()&&!Ja&&(Ja=j.caches.open(lr))}function da(c){const s=c.indexOf("?");if(s<0)return c;const g=function(y){const S=y.indexOf("?");return S>0?y.slice(S+1).split("&"):[]}(c).filter(y=>{const S=y.split("=");return"language"===S[0]||"worldview"===S[0]});return g.length?`${c.slice(0,s)}?${g.join("&")}`:c.slice(0,s)}let Mr=1/0;const go={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(go);class Dr extends Error{constructor(s,h,g){401===h&&Ci(g)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=h,this.url=g}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Aa=Sn()?()=>self.worker&&self.worker.referrer:()=>("blob:"===j.location.protocol?j.parent:j).location.href,fa=function(c,s){if(!(/^file:/.test(h=c.url)||/^file:/.test(Aa())&&!/^\w+:/.test(h))){if(j.fetch&&j.Request&&j.AbortController&&j.Request.prototype.hasOwnProperty("signal"))return function(g,y){const S=new j.AbortController,R=new j.Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,referrer:Aa(),referrerPolicy:g.referrerPolicy,signal:S.signal});let G=!1,X=!1;const K=(ce=R.url).indexOf("sku=")>0&&Ci(ce);var ce;"json"===g.type&&R.headers.set("Accept","application/json");const pe=(Ae,Oe,Ue)=>{if(X)return;if(Ae&&"SecurityError"!==Ae.message&&pr(Ae.toString()),Oe&&Ue)return _e(Oe);const dt=Date.now();j.fetch(R).then(Rt=>{if(Rt.ok){const ii=K?Rt.clone():null;return _e(Rt,ii,dt)}return y(new Dr(Rt.statusText,Rt.status,g.url))}).catch(Rt=>{"AbortError"!==Rt.name&&y(new Error(`${Rt.message} ${g.url}`))})},_e=(Ae,Oe,Ue)=>{("arrayBuffer"===g.type?Ae.arrayBuffer():"json"===g.type?Ae.json():Ae.text()).then(dt=>{X||(Oe&&Ue&&function(Rt,ii,Lt){if(xr(),!Ja)return;const Jt={status:ii.status,statusText:ii.statusText,headers:new j.Headers};ii.headers.forEach((Qi,Xi)=>Jt.headers.set(Xi,Qi));const di=Dn(ii.headers.get("Cache-Control")||"");if(di["no-store"])return;di["max-age"]&&Jt.headers.set("Expires",new Date(Lt+1e3*di["max-age"]).toUTCString());const li=Jt.headers.get("Expires");li&&(new Date(li).getTime()-Lt<42e4||function(Qi,Xi){if(void 0===Ra)try{new Response(new ReadableStream),Ra=!0}catch{Ra=!1}Ra?Xi(Qi.body):Qi.blob().then(Xi)}(ii,Qi=>{const Xi=new j.Response(Qi,Jt);xr(),Ja&&Ja.then(kn=>kn.put(da(Rt.url),Xi)).catch(kn=>pr(kn.message))}))}(R,Oe,Ue),G=!0,y(null,dt,Ae.headers.get("Cache-Control"),Ae.headers.get("Expires")))}).catch(dt=>{X||y(new Error(dt.message))})};return K?function(Ae,Oe){if(xr(),!Ja)return Oe(null);const Ue=da(Ae.url);Ja.then(dt=>{dt.match(Ue).then(Rt=>{const ii=function(Lt){if(!Lt)return!1;const Jt=new Date(Lt.headers.get("Expires")||0),di=Dn(Lt.headers.get("Cache-Control")||"");return Jt>Date.now()&&!di["no-cache"]}(Rt);dt.delete(Ue),ii&&dt.put(Ue,Rt.clone()),Oe(null,Rt,ii)}).catch(Oe)}).catch(Oe)}(R,pe):pe(null,null),{cancel:()=>{X=!0,G||S.abort()}}}(c,s);if(Sn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var h;return function(g,y){const S=new j.XMLHttpRequest;S.open(g.method||"GET",g.url,!0),"arrayBuffer"===g.type&&(S.responseType="arraybuffer");for(const R in g.headers)S.setRequestHeader(R,g.headers[R]);return"json"===g.type&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials="include"===g.credentials,S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||0===S.status)&&null!==S.response){let R=S.response;if("json"===g.type)try{R=JSON.parse(S.response)}catch(G){return y(G)}y(null,R,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else y(new Dr(S.statusText,S.status,g.url))},S.send(g.body),{cancel:()=>S.abort()}}(c,s)},Ia=function(c,s){return fa(fr(c,{type:"arrayBuffer"}),s)};function Fa(c){const s=j.document.createElement("a");return s.href=c,s.protocol===j.document.location.protocol&&s.host===j.document.location.host}const Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let je,Je;je=[],Je=0;const At=function(c,s){if(We.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Je>=Me.MAX_PARALLEL_IMAGE_REQUESTS){const S={requestParameters:c,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return je.push(S),S}Je++;let h=!1;const g=()=>{if(!h)for(h=!0,Je--;je.length&&Je<Me.MAX_PARALLEL_IMAGE_REQUESTS;){const S=je.shift(),{requestParameters:R,callback:G,cancelled:X}=S;X||(S.cancel=At(R,G).cancel)}},y=Ia(c,(S,R,G,X)=>{g(),S?s(S):R&&(j.createImageBitmap?function(K,ce){const pe=new j.Blob([new Uint8Array(K)],{type:"image/png"});j.createImageBitmap(pe).then(_e=>{ce(null,_e)}).catch(_e=>{ce(new Error(`Could not load image because of ${_e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(R,(K,ce)=>s(K,ce,G,X)):function(K,ce){const pe=new j.Image,_e=j.URL;pe.onload=()=>{ce(null,pe),_e.revokeObjectURL(pe.src),pe.onload=null,j.requestAnimationFrame(()=>{pe.src=Et})},pe.onerror=()=>ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ae=new j.Blob([new Uint8Array(K)],{type:"image/png"});pe.src=K.byteLength?_e.createObjectURL(Ae):Et}(R,(K,ce)=>s(K,ce,G,X)))});return{cancel:()=>{y.cancel(),g()}}},kt="NO_ACCESS_TOKEN";function ai(c){return 0===c.indexOf("mapbox:")}function Ci(c){return Me.API_URL_REGEX.test(c)}function Ii(c){return Me.API_CDN_URL_REGEX.test(c)}function Mt(c){return Me.API_STYLE_REGEX.test(c)&&!Bi(c)}function Bi(c){return Me.API_SPRITE_REGEX.test(c)}const On=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _n(c){const s=c.match(On);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Vi(c){const s=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${s}`}const Qn="mapbox.eventData";function Yt(c){if(!c)return null;const s=c.split(".");if(!s||3!==s.length)return null;try{return JSON.parse(decodeURIComponent(j.atob(s[1]).split("").map(h=>"%"+("00"+h.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Ut{constructor(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(s){const h=Yt(Me.ACCESS_TOKEN);let g="";return g=h&&h.u?j.btoa(encodeURIComponent(h.u).replace(/%([0-9A-F]{2})/g,(y,S)=>String.fromCharCode(+("0x"+S)))):Me.ACCESS_TOKEN||"",s?`${Qn}.${s}:${g}`:`${Qn}:${g}`}fetchEventData(){const s=rn("localStorage"),h=this.getStorageKey(),g=this.getStorageKey("uuid");if(s)try{const y=j.localStorage.getItem(h);y&&(this.eventData=JSON.parse(y));const S=j.localStorage.getItem(g);S&&(this.anonId=S)}catch{pr("Unable to read from LocalStorage")}}saveEventData(){const s=rn("localStorage"),h=this.getStorageKey(),g=this.getStorageKey("uuid");if(s)try{j.localStorage.setItem(g,this.anonId),Object.keys(this.eventData).length>=1&&j.localStorage.setItem(h,JSON.stringify(this.eventData))}catch{pr("Unable to write to LocalStorage")}}processRequests(s){}postEvent(s,h,g,y){if(!Me.EVENTS_URL)return;const S=_n(Me.EVENTS_URL);S.params.push(`access_token=${y||Me.ACCESS_TOKEN||""}`);const R={event:this.type,created:new Date(s).toISOString()},G=h?fr(R,h):R,X={url:Vi(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([G])};var ce;this.pendingRequest=(ce=K=>{this.pendingRequest=null,g(K),this.saveEventData(),this.processRequests(y)},fa(fr(X,{method:"POST"}),ce))}queueRequest(s,h){this.queue.push(s),this.processRequests(h)}}const vt=new class extends Ut{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,s){Me.EVENTS_URL&&Me.ACCESS_TOKEN&&Array.isArray(c)&&c.some(h=>ai(h)||Ci(h))&&this.queueRequest(Date.now(),s)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const s=Yt(Me.ACCESS_TOKEN),h=s?s.u:Me.ACCESS_TOKEN;let g=h!==this.eventData.tokenU;ia(this.anonId)||(this.anonId=In(),g=!0);const y=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),R=new Date(y),G=(y-this.eventData.lastSuccess)/864e5;g=g||G>=1||G<-1||S.getDate()!==R.getDate()}else g=!0;g?this.postEvent(y,{sdkIdentifier:"mapbox-gl-js",sdkVersion:He,skuId:et,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=y,this.eventData.tokenU=h)},c):this.processRequests()}},pt=vt.postTurnstileEvent.bind(vt),Ke=new class extends Ut{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,s,h,g){this.skuToken=s,this.errorCb=g,Me.EVENTS_URL&&(h||Me.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},h):this.errorCb(new Error(kt)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:h}=this.queue.shift();s&&this.success[s]||(this.anonId||this.fetchEventData(),ia(this.anonId)||(this.anonId=In()),this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:He,skuId:et,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):s&&(this.success[s]=!0)},c))}},rt=Ke.postMapLoadEvent.bind(Ke),Ot=new class extends Ut{constructor(){super("gljs.performance")}postPerformanceEvent(c,s){Me.EVENTS_URL&&(c||Me.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:s},c)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:s,performanceData:h}=this.queue.shift(),g=function(y){const S=j.performance.getEntriesByType("resource"),R=j.performance.getEntriesByType("mark"),G=function(_e){const Ae={};if(_e)for(const Oe in _e)if("other"!==Oe)for(const Ue of _e[Oe]){const dt=`${Oe}ResolveRangeMin`,Rt=`${Oe}ResolveRangeMax`,ii=`${Oe}RequestCount`,Lt=`${Oe}RequestCachedCount`;Ae[dt]=Math.min(Ae[dt]||1/0,Ue.startTime),Ae[Rt]=Math.max(Ae[Rt]||-1/0,Ue.responseEnd);const Jt=di=>{void 0===Ae[di]&&(Ae[di]=0),++Ae[di]};void 0!==Ue.transferSize&&0===Ue.transferSize&&Jt(Lt),Jt(ii)}return Ae}(function(_e,Ae){const Oe={};if(_e)for(const Ue of _e){const dt=Ae(Ue);void 0===Oe[dt]&&(Oe[dt]=[]),Oe[dt].push(Ue)}return Oe}(S,ke)),X=j.devicePixelRatio,K=j.navigator.connection||j.navigator.mozConnection||j.navigator.webkitConnection,ce={counters:[],metadata:[],attributes:[]},pe=(_e,Ae,Oe)=>{null!=Oe&&_e.push({name:Ae,value:Oe.toString()})};for(const _e in G)pe(ce.counters,_e,G[_e]);if(y.interactionRange[0]!==1/0&&y.interactionRange[1]!==-1/0&&(pe(ce.counters,"interactionRangeMin",y.interactionRange[0]),pe(ce.counters,"interactionRangeMax",y.interactionRange[1])),R)for(const _e of Object.keys(st)){const Ae=st[_e],Oe=R.find(Ue=>Ue.name===Ae);Oe&&pe(ce.counters,Ae,Oe.startTime)}return pe(ce.counters,"visibilityHidden",y.visibilityHidden),pe(ce.attributes,"style",function(_e){if(_e)for(const Ae of _e){const Oe=Ae.name.split("?")[0];if(Mt(Oe)){const Ue=Oe.split("/").slice(-2);if(2===Ue.length)return`mapbox://styles/${Ue[0]}/${Ue[1]}`}}}(S)),pe(ce.attributes,"terrainEnabled",y.terrainEnabled?"true":"false"),pe(ce.attributes,"fogEnabled",y.fogEnabled?"true":"false"),pe(ce.attributes,"projection",y.projection),pe(ce.attributes,"zoom",y.zoom),pe(ce.metadata,"devicePixelRatio",X),pe(ce.metadata,"connectionEffectiveType",K?K.effectiveType:void 0),pe(ce.metadata,"navigatorUserAgent",j.navigator.userAgent),pe(ce.metadata,"screenWidth",j.screen.width),pe(ce.metadata,"screenHeight",j.screen.height),pe(ce.metadata,"windowWidth",j.innerWidth),pe(ce.metadata,"windowHeight",j.innerHeight),pe(ce.metadata,"mapWidth",y.width/X),pe(ce.metadata,"mapHeight",y.height/X),pe(ce.metadata,"webglRenderer",y.renderer),pe(ce.metadata,"webglVendor",y.vendor),pe(ce.metadata,"sdkVersion",He),pe(ce.metadata,"sdkIdentifier","mapbox-gl-js"),ce}(h);for(const y of g.metadata);for(const y of g.counters);for(const y of g.attributes);this.postEvent(s,g,()=>{},c)}},ci=Ot.postPerformanceEvent.bind(Ot),en=new class extends Ut{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,s,h,g){if(!Me.API_URL||!Me.SESSION_PATH)return;const y=_n(Me.API_URL+Me.SESSION_PATH);y.params.push(`sku=${s||""}`),y.params.push(`access_token=${g||Me.ACCESS_TOKEN||""}`);const S={url:Vi(y),headers:{"Content-Type":"text/plain"}};var G;this.pendingRequest=(G=R=>{this.pendingRequest=null,h(R),this.saveEventData(),this.processRequests(g)},fa(fr(S,{method:"GET"}),G))}getSessionAPI(c,s,h,g){this.skuToken=s,this.errorCb=g,Me.SESSION_PATH&&Me.API_URL&&(h||Me.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},h):this.errorCb(new Error(kt)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:s,timestamp:h}=this.queue.shift();s&&this.success[s]||this.getSession(h,this.skuToken,g=>{g?this.errorCb(g):s&&(this.success[s]=!0)},c)}},$i=en.getSessionAPI.bind(en),En=new Set,st={create:"create",load:"load",fullLoad:"fullLoad"},Bt={mark(c){j.performance.mark(c)},measure(c,s,h){j.performance.measure(c,s,h)}};function ke(c){const s=c.name.split("?")[0];return Ii(s)&&s.includes("mapbox-gl.js")?"javascript":Ii(s)&&s.includes("mapbox-gl.css")?"css":Me.API_FONTS_REGEX.test(s)?"fontRange":Bi(s)?"sprite":Mt(s)?"style":Me.API_TILEJSON_REGEX.test(s)?"tilejson":"other"}const wt=j.performance;function jt(c){const s=c?c.url.toString():void 0;return wt.getEntriesByName(s)}let Xe,Qt,ve,l;const u={now:()=>void 0!==ve?ve:j.performance.now(),setNow(c){ve=c},restoreNow(){ve=void 0},frame(c){const s=j.requestAnimationFrame(c);return{cancel:()=>j.cancelAnimationFrame(s)}},getImageData(c,s=0){const{width:h,height:g}=c;l||(l=j.document.createElement("canvas"));const y=l.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(h>l.width||g>l.height)&&(l.width=h,l.height=g),y.clearRect(-s,-s,h+2*s,g+2*s),y.drawImage(c,0,0,h,g),y.getImageData(-s,-s,h+2*s,g+2*s)},resolveURL:c=>(Xe||(Xe=j.document.createElement("a")),Xe.href=c,Xe.href),get devicePixelRatio(){return j.devicePixelRatio},get prefersReducedMotion(){return!!j.matchMedia&&(null==Qt&&(Qt=j.matchMedia("(prefers-reduced-motion: reduce)")),Qt.matches)}};function m(c,s,h){h[c]&&-1!==h[c].indexOf(s)||(h[c]=h[c]||[],h[c].push(s))}function x(c,s,h){if(h&&h[c]){const g=h[c].indexOf(s);-1!==g&&h[c].splice(g,1)}}class w{constructor(s,h={}){fr(this,h),this.type=s}}class E extends w{constructor(s,h={}){super("error",fr({error:s},h))}}class M{on(s,h){return this._listeners=this._listeners||{},m(s,h,this._listeners),this}off(s,h){return x(s,h,this._listeners),x(s,h,this._oneTimeListeners),this}once(s,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},m(s,h,this._oneTimeListeners),this):new Promise(g=>this.once(s,g))}fire(s,h){"string"==typeof s&&(s=new w(s,h||{}));const g=s.type;if(this.listens(g)){s.target=this;const y=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const G of y)G.call(this,s);const S=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const G of S)x(g,G,this._oneTimeListeners),G.call(this,s);const R=this._eventedParent;R&&(fr(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),R.fire(s))}else s instanceof E&&console.error(s.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var N=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function H(c,...s){for(const h of s)for(const g in h)c[g]=h[g];return c}function Z(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function J(c){if(Array.isArray(c))return c.map(J);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=J(c[h]);return s}return Z(c)}class ne extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}var fe=ne;class ye{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[g,y]of h)this.bindings[g]=y}concat(s){return new ye(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}var De=ye;const Pe={kind:"null"},Se={kind:"number"},ze={kind:"string"},U={kind:"boolean"},le={kind:"color"},we={kind:"object"},Le={kind:"value"},$e={kind:"collator"},mt={kind:"formatted"},$t={kind:"resolvedImage"};function Xt(c,s){return{kind:"array",itemType:c,N:s}}function Li(c){if("array"===c.kind){const s=Li(c.itemType);return"number"==typeof c.N?`array<${s}, ${c.N}>`:"value"===c.itemType.kind?"array":`array<${s}>`}return c.kind}const Ji=[Pe,Se,ze,U,le,mt,we,Xt(Le),$t];function ln(c,s){if("error"===s.kind)return null;if("array"===c.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!ln(c.itemType,s.itemType))&&("number"!=typeof c.N||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if("value"===c.kind)for(const h of Ji)if(!ln(h,s))return null}return`Expected ${Li(c)} but found ${Li(s)} instead.`}function Un(c,s){return s.some(h=>h.kind===c.kind)}function cr(c,s){return s.some(h=>"null"===h?null===c:"array"===h?Array.isArray(c):"object"===h?c&&!Array.isArray(c)&&"object"==typeof c:h===typeof c)}var Wr,pa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function la(c){return(c=Math.round(c))<0?0:c>255?255:c}function Ta(c){return la("%"===c[c.length-1]?parseFloat(c)/100*255:parseInt(c))}function es(c){return(s="%"===c[c.length-1]?parseFloat(c)/100:parseFloat(c))<0?0:s>1?1:s;var s}function ms(c,s,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?c+(s-c)*h*6:2*h<1?s:3*h<2?c+(s-c)*(2/3-h)*6:c}try{Wr={}.parseCSSColor=function(c){var s,h=c.replace(/ /g,"").toLowerCase();if(h in pa)return pa[h].slice();if("#"===h[0])return 4===h.length?(s=parseInt(h.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:7===h.length&&(s=parseInt(h.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var g=h.indexOf("("),y=h.indexOf(")");if(-1!==g&&y+1===h.length){var S=h.substr(0,g),R=h.substr(g+1,y-(g+1)).split(","),G=1;switch(S){case"rgba":if(4!==R.length)return null;G=es(R.pop());case"rgb":return 3!==R.length?null:[Ta(R[0]),Ta(R[1]),Ta(R[2]),G];case"hsla":if(4!==R.length)return null;G=es(R.pop());case"hsl":if(3!==R.length)return null;var X=(parseFloat(R[0])%360+360)%360/360,K=es(R[1]),ce=es(R[2]),pe=ce<=.5?ce*(K+1):ce+K-ce*K,_e=2*ce-pe;return[la(255*ms(_e,pe,X+1/3)),la(255*ms(_e,pe,X)),la(255*ms(_e,pe,X-1/3)),G];default:return null}}return null}}catch{}class Is{constructor(s,h,g,y=1){this.r=s,this.g=h,this.b=g,this.a=y}static parse(s){if(!s)return;if(s instanceof Is)return s;if("string"!=typeof s)return;const h=Wr(s);return h?new Is(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[s,h,g,y]=this.toArray();return`rgba(${Math.round(s)},${Math.round(h)},${Math.round(g)},${y})`}toArray(){const{r:s,g:h,b:g,a:y}=this;return 0===y?[0,0,0,0]:[255*s/y,255*h/y,255*g/y,y]}toArray01(){const{r:s,g:h,b:g,a:y}=this;return 0===y?[0,0,0,0]:[s/y,h/y,g/y,y]}toArray01PremultipliedAlpha(){const{r:s,g:h,b:g,a:y}=this;return[s,h,g,y]}}Is.black=new Is(0,0,0,1),Is.white=new Is(1,1,1,1),Is.transparent=new Is(0,0,0,0),Is.red=new Is(1,0,0,1),Is.blue=new Is(0,0,1,1);var va=Is;class Qr{constructor(s,h,g){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ms{constructor(s,h,g,y,S){this.text=s.normalize?s.normalize():s,this.image=h,this.scale=g,this.fontStack=y,this.textColor=S}}class na{constructor(s){this.sections=s}static fromString(s){return new na([new Ms(s,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof na?s:na.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const h of this.sections){if(h.image){s.push(["image",h.image.name]);continue}s.push(h.text);const g={};h.fontStack&&(g["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(g["font-scale"]=h.scale),h.textColor&&(g["text-color"]=["rgba"].concat(h.textColor.toArray())),s.push(g)}return s}}class Ns{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Ns({name:s,available:!1}):null}serialize(){return["image",this.name]}}function Ku(c,s,h,g){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof h&&h>=0&&h<=255?void 0===g||"number"==typeof g&&g>=0&&g<=1?null:`Invalid rgba value [${[c,s,h,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof g?[c,s,h,g]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pc(c){if(null===c||"string"==typeof c||"boolean"==typeof c||"number"==typeof c||c instanceof va||c instanceof Qr||c instanceof na||c instanceof Ns)return!0;if(Array.isArray(c)){for(const s of c)if(!Pc(s))return!1;return!0}if("object"==typeof c){for(const s in c)if(!Pc(c[s]))return!1;return!0}return!1}function Ws(c){if(null===c)return Pe;if("string"==typeof c)return ze;if("boolean"==typeof c)return U;if("number"==typeof c)return Se;if(c instanceof va)return le;if(c instanceof Qr)return $e;if(c instanceof na)return mt;if(c instanceof Ns)return $t;if(Array.isArray(c)){const s=c.length;let h;for(const g of c){const y=Ws(g);if(h){if(h===y)continue;h=Le;break}h=y}return Xt(h||Le,s)}return we}function xc(c){const s=typeof c;return null===c?"":"string"===s||"number"===s||"boolean"===s?String(c):c instanceof va||c instanceof na||c instanceof Ns?c.toString():JSON.stringify(c)}class Rd{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(2!==s.length)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Pc(s[1]))return h.error("invalid value");const g=s[1];let y=Ws(g);const S=h.expectedType;return"array"!==y.kind||0!==y.N||!S||"array"!==S.kind||"number"==typeof S.N&&0!==S.N||(y=S),new Rd(y,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof va?["rgba"].concat(this.value.toArray()):this.value instanceof na?this.value.serialize():this.value}}var $r=Rd,fs=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const Rl={string:ze,number:Se,boolean:U,object:we};class Zs{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let g,y=1;const S=s[0];if("array"===S){let G,X;if(s.length>2){const K=s[1];if("string"!=typeof K||!(K in Rl)||"object"===K)return h.error('The item type argument of "array" must be one of string, number, boolean',1);G=Rl[K],y++}else G=Le;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);X=s[2],y++}g=Xt(G,X)}else g=Rl[S];const R=[];for(;y<s.length;y++){const G=h.parse(s[y],y,Le);if(!G)return null;R.push(G)}return new Zs(g,R)}evaluate(s){for(let h=0;h<this.args.length;h++){const g=this.args[h].evaluate(s);if(!ln(this.type,Ws(g)))return g;if(h===this.args.length-1)throw new fs(`Expected value to be of type ${Li(this.type)}, but found ${Li(Ws(g))} instead.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,h=[s.kind];if("array"===s.kind){const g=s.itemType;if("string"===g.kind||"number"===g.kind||"boolean"===g.kind){h.push(g.kind);const y=s.N;("number"==typeof y||this.args.length>1)&&h.push(y)}}return h.concat(this.args.map(g=>g.serialize()))}}var gs=Zs;class Fc{constructor(s){this.type=mt,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const g=s[1];if(!Array.isArray(g)&&"object"==typeof g)return h.error("First argument must be an image or text section.");const y=[];let S=!1;for(let R=1;R<=s.length-1;++R){const G=s[R];if(S&&"object"==typeof G&&!Array.isArray(G)){S=!1;let X=null;if(G["font-scale"]&&(X=h.parse(G["font-scale"],1,Se),!X))return null;let K=null;if(G["text-font"]&&(K=h.parse(G["text-font"],1,Xt(ze)),!K))return null;let ce=null;if(G["text-color"]&&(ce=h.parse(G["text-color"],1,le),!ce))return null;const pe=y[y.length-1];pe.scale=X,pe.font=K,pe.textColor=ce}else{const X=h.parse(s[R],1,Le);if(!X)return null;const K=X.type.kind;if("string"!==K&&"value"!==K&&"null"!==K&&"resolvedImage"!==K)return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,y.push({content:X,scale:null,font:null,textColor:null})}}return new Fc(y)}evaluate(s){return new na(this.sections.map(h=>{const g=h.content.evaluate(s);return Ws(g)===$t?new Ms("",g,null,null,null):new Ms(xc(g),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const h of this.sections){s.push(h.content.serialize());const g={};h.scale&&(g["font-scale"]=h.scale.serialize()),h.font&&(g["text-font"]=h.font.serialize()),h.textColor&&(g["text-color"]=h.textColor.serialize()),s.push(g)}return s}}class no{constructor(s){this.type=$t,this.input=s}static parse(s,h){if(2!==s.length)return h.error("Expected two arguments.");const g=h.parse(s[1],1,ze);return g?new no(g):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),g=Ns.fromString(h);return g&&s.availableImages&&(g.available=s.availableImages.indexOf(h)>-1),g}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xd={"to-boolean":U,"to-color":le,"to-number":Se,"to-string":ze};class Od{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const g=s[0];if(("to-boolean"===g||"to-string"===g)&&2!==s.length)return h.error("Expected one argument.");const y=Xd[g],S=[];for(let R=1;R<s.length;R++){const G=h.parse(s[R],R,Le);if(!G)return null;S.push(G)}return new Od(y,S)}evaluate(s){if("boolean"===this.type.kind)return!!this.args[0].evaluate(s);if("color"===this.type.kind){let h,g;for(const y of this.args){if(h=y.evaluate(s),g=null,h instanceof va)return h;if("string"==typeof h){const S=s.parseColor(h);if(S)return S}else if(Array.isArray(h)&&(g=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Ku(h[0],h[1],h[2],h[3]),!g))return new va(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new fs(g||`Could not parse color from value '${"string"==typeof h?h:String(JSON.stringify(h))}'`)}if("number"===this.type.kind){let h=null;for(const g of this.args){if(h=g.evaluate(s),null===h)return 0;const y=Number(h);if(!isNaN(y))return y}throw new fs(`Could not convert ${JSON.stringify(h)} to number.`)}return"formatted"===this.type.kind?na.fromString(xc(this.args[0].evaluate(s))):"resolvedImage"===this.type.kind?Ns.fromString(xc(this.args[0].evaluate(s))):xc(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Fc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new no(this.args[0]).serialize();const s=[`to-${this.type.kind}`];return this.eachChild(h=>{s.push(h.serialize())}),s}}var uu=Od;const Xa=["Unknown","Point","LineString","Polygon"];var Ju=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Xa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*s-c[0])+this.featureDistanceData.bearing[1]*(g*s-c[1])}return 0}parseColor(c){let s=this._parseColorCache[c];return s||(s=this._parseColorCache[c]=va.parse(c)),s}};class Es{constructor(s,h,g,y){this.name=s,this.type=h,this._evaluate=g,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,h){const g=s[0],y=Es.definitions[g];if(!y)return h.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(y)?y[0]:y.type,R=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,G=R.filter(([K])=>!Array.isArray(K)||K.length===s.length-1);let X=null;for(const[K,ce]of G){X=new ed(h.registry,h.path,null,h.scope);const pe=[];let _e=!1;for(let Ae=1;Ae<s.length;Ae++){const Oe=s[Ae],Ue=Array.isArray(K)?K[Ae-1]:K.type,dt=X.parse(Oe,1+pe.length,Ue);if(!dt){_e=!0;break}pe.push(dt)}if(!_e)if(Array.isArray(K)&&K.length!==pe.length)X.error(`Expected ${K.length} arguments, but found ${pe.length} instead.`);else{for(let Ae=0;Ae<pe.length;Ae++){const Oe=Array.isArray(K)?K[Ae]:K.type,Ue=pe[Ae];X.concat(Ae+1).checkSubtype(Oe,Ue.type)}if(0===X.errors.length)return new Es(g,S,ce,pe)}}if(1===G.length)h.errors.push(...X.errors);else{const K=(G.length?G:R).map(([pe])=>{return _e=pe,Array.isArray(_e)?`(${_e.map(Li).join(", ")})`:`(${Li(_e.type)}...)`;var _e}).join(" | "),ce=[];for(let pe=1;pe<s.length;pe++){const _e=h.parse(s[pe],1+ce.length);if(!_e)return null;ce.push(Li(_e.type))}h.error(`Expected arguments of type ${K}, but found (${ce.join(", ")}) instead.`)}return null}static register(s,h){Es.definitions=h;for(const g in h)s[g]=Es}}var ks=Es;class gd{constructor(s,h,g){this.type=$e,this.locale=g,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(2!==s.length)return h.error("Expected one argument.");const g=s[1];if("object"!=typeof g||Array.isArray(g))return h.error("Collator options argument must be an object.");const y=h.parse(void 0!==g["case-sensitive"]&&g["case-sensitive"],1,U);if(!y)return null;const S=h.parse(void 0!==g["diacritic-sensitive"]&&g["diacritic-sensitive"],1,U);if(!S)return null;let R=null;return g.locale&&(R=h.parse(g.locale,1,ze),!R)?null:new gd(y,S,R)}evaluate(s){return new Qr(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}const fl=8192;function Bc(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Au(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function No(c,s){const h=(180+c[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(h*y*fl),Math.round(g*y*fl)]}function qd(c,s,h){const g=c[0]-s[0],y=c[1]-s[1],S=c[0]-h[0],R=c[1]-h[1];return g*R-S*y==0&&g*S<=0&&y*R<=0}function vd(c,s){let h=!1;for(let R=0,G=s.length;R<G;R++){const X=s[R];for(let K=0,ce=X.length;K<ce-1;K++){if(qd(c,X[K],X[K+1]))return!1;(y=X[K])[1]>(g=c)[1]!=(S=X[K+1])[1]>g[1]&&g[0]<(S[0]-y[0])*(g[1]-y[1])/(S[1]-y[1])+y[0]&&(h=!h)}}var g,y,S;return h}function Cs(c,s){for(let h=0;h<s.length;h++)if(vd(c,s[h]))return!0;return!1}function Jl(c,s,h,g){const y=g[0]-h[0],S=g[1]-h[1],R=(c[0]-h[0])*S-y*(c[1]-h[1]),G=(s[0]-h[0])*S-y*(s[1]-h[1]);return R>0&&G<0||R<0&&G>0}function ts(c,s,h){for(const K of h)for(let ce=0;ce<K.length-1;++ce)if((G=[(R=K[ce+1])[0]-(S=K[ce])[0],R[1]-S[1]])[0]*(X=[(y=s)[0]-(g=c)[0],y[1]-g[1]])[1]-G[1]*X[0]!=0&&Jl(g,y,S,R)&&Jl(S,R,g,y))return!0;var g,y,S,R,G,X;return!1}function ra(c,s){for(let h=0;h<c.length;++h)if(!vd(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(ts(c[h],c[h+1],s))return!1;return!0}function bo(c,s){for(let h=0;h<s.length;h++)if(ra(c,s[h]))return!0;return!1}function du(c,s,h){const g=[];for(let y=0;y<c.length;y++){const S=[];for(let R=0;R<c[y].length;R++){const G=No(c[y][R],h);Bc(s,G),S.push(G)}g.push(S)}return g}function zo(c,s,h){const g=[];for(let y=0;y<c.length;y++){const S=du(c[y],s,h);g.push(S)}return g}function Zd(c,s,h,g){if(c[0]<h[0]||c[0]>h[2]){const y=.5*g;let S=c[0]-h[0]>y?-g:h[0]-c[0]>y?g:0;0===S&&(S=c[0]-h[2]>y?-g:h[2]-c[0]>y?g:0),c[0]+=S}Bc(s,c)}function Ql(c,s,h,g){const y=Math.pow(2,g.z)*fl,S=[g.x*fl,g.y*fl],R=[];if(!c)return R;for(const G of c)for(const X of G){const K=[X.x+S[0],X.y+S[1]];Zd(K,s,h,y),R.push(K)}return R}function Ks(c,s,h,g){const y=Math.pow(2,g.z)*fl,S=[g.x*fl,g.y*fl],R=[];if(!c)return R;for(const X of c){const K=[];for(const ce of X){const pe=[ce.x+S[0],ce.y+S[1]];Bc(s,pe),K.push(pe)}R.push(K)}if(s[2]-s[0]<=y/2){(G=s)[0]=G[1]=1/0,G[2]=G[3]=-1/0;for(const X of R)for(const K of X)Zd(K,s,h,y)}var G;return R}class wl{constructor(s,h){this.type=U,this.geojson=s,this.geometries=h}static parse(s,h){if(2!==s.length)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Pc(s[1])){const g=s[1];if("FeatureCollection"===g.type)for(let y=0;y<g.features.length;++y){const S=g.features[y].geometry.type;if("Polygon"===S||"MultiPolygon"===S)return new wl(g,g.features[y].geometry)}else if("Feature"===g.type){const y=g.geometry.type;if("Polygon"===y||"MultiPolygon"===y)return new wl(g,g.geometry)}else if("Polygon"===g.type||"MultiPolygon"===g.type)return new wl(g,g)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(h,g){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],R=h.canonicalID();if(!R)return!1;if("Polygon"===g.type){const G=du(g.coordinates,S,R),X=Ql(h.geometry(),y,S,R);if(!Au(y,S))return!1;for(const K of X)if(!vd(K,G))return!1}if("MultiPolygon"===g.type){const G=zo(g.coordinates,S,R),X=Ql(h.geometry(),y,S,R);if(!Au(y,S))return!1;for(const K of X)if(!Cs(K,G))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(h,g){const y=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],R=h.canonicalID();if(!R)return!1;if("Polygon"===g.type){const G=du(g.coordinates,S,R),X=Ks(h.geometry(),y,S,R);if(!Au(y,S))return!1;for(const K of X)if(!ra(K,G))return!1}if("MultiPolygon"===g.type){const G=zo(g.coordinates,S,R),X=Ks(h.geometry(),y,S,R);if(!Au(y,S))return!1;for(const K of X)if(!bo(K,G))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var co=wl;function zs(c){if(c instanceof ks&&("get"===c.name&&1===c.args.length||"feature-state"===c.name||"has"===c.name&&1===c.args.length||"properties"===c.name||"geometry-type"===c.name||"id"===c.name||/^filter-/.test(c.name))||c instanceof co)return!1;let s=!0;return c.eachChild(h=>{s&&!zs(h)&&(s=!1)}),s}function Ts(c){if(c instanceof ks&&"feature-state"===c.name)return!1;let s=!0;return c.eachChild(h=>{s&&!Ts(h)&&(s=!1)}),s}function vo(c,s){if(c instanceof ks&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(g=>{h&&!vo(g,s)&&(h=!1)}),h}class Qu{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(2!==s.length||"string"!=typeof s[1])return h.error("'var' expression requires exactly one string literal argument.");const g=s[1];return h.scope.has(g)?new Qu(g,h.scope.get(g)):h.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ec=Qu;class Oa{constructor(s,h=[],g,y=new De,S=[]){this.registry=s,this.path=h,this.key=h.map(R=>`[${R}]`).join(""),this.scope=y,this.errors=S,this.expectedType=g}parse(s,h,g,y,S={}){return h?this.concat(h,g,y)._parse(s,S):this._parse(s,S)}_parse(s,h){function g(y,S,R){return"assert"===R?new gs(S,[y]):"coerce"===R?new uu(S,[y]):y}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=s[0];if("string"!=typeof y)return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[y];if(S){let R=S.parse(s,this);if(!R)return null;if(this.expectedType){const G=this.expectedType,X=R.type;if("string"!==G.kind&&"number"!==G.kind&&"boolean"!==G.kind&&"object"!==G.kind&&"array"!==G.kind||"value"!==X.kind)if("color"!==G.kind&&"formatted"!==G.kind&&"resolvedImage"!==G.kind||"value"!==X.kind&&"string"!==X.kind){if(this.checkSubtype(G,X))return null}else R=g(R,G,h.typeAnnotation||"coerce");else R=g(R,G,h.typeAnnotation||"assert")}if(!(R instanceof $r)&&"resolvedImage"!==R.type.kind&&Js(R)){const G=new Ju;try{R=new $r(R.type,R.evaluate(G))}catch(X){return this.error(X.message),null}}return R}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,g){const y="number"==typeof s?this.path.concat(s):this.path,S=g?this.scope.concat(g):this.scope;return new Oa(this.registry,y,h||null,S,this.errors)}error(s,...h){const g=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new fe(g,s))}checkSubtype(s,h){const g=ln(s,h);return g&&this.error(g),g}}var ed=Oa;function Js(c){if(c instanceof ec)return Js(c.boundExpression);if(c instanceof ks&&"error"===c.name||c instanceof gd||c instanceof co)return!1;const s=c instanceof uu||c instanceof gs;let h=!0;return c.eachChild(g=>{h=s?h&&Js(g):h&&g instanceof $r}),!!h&&zs(c)&&vo(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Iu(c,s){const h=c.length-1;let g,y,S=0,R=h,G=0;for(;S<=R;)if(G=Math.floor((S+R)/2),g=c[G],y=c[G+1],g<=s){if(G===h||s<y)return G;S=G+1}else{if(!(g>s))throw new fs("Input is not a number.");R=G-1}return 0}class Ys{constructor(s,h,g){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[y,S]of g)this.labels.push(y),this.outputs.push(S)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const g=h.parse(s[1],1,Se);if(!g)return null;const y=[];let S=null;h.expectedType&&"value"!==h.expectedType.kind&&(S=h.expectedType);for(let R=1;R<s.length;R+=2){const G=1===R?-1/0:s[R],X=s[R+1],K=R,ce=R+1;if("number"!=typeof G)return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(y.length&&y[y.length-1][0]>=G)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',K);const pe=h.parse(X,ce,S);if(!pe)return null;S=S||pe.type,y.push([G,pe])}return new Ys(S,g,y)}evaluate(s){const h=this.labels,g=this.outputs;if(1===h.length)return g[0].evaluate(s);const y=this.input.evaluate(s);if(y<=h[0])return g[0].evaluate(s);const S=h.length;return y>=h[S-1]?g[S-1].evaluate(s):g[Iu(h,y)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let h=0;h<this.labels.length;h++)h>0&&s.push(this.labels[h]),s.push(this.outputs[h].serialize());return s}}var wo=Ys;function ps(c,s,h){return c*(1-h)+s*h}var td=Object.freeze({__proto__:null,array:function(c,s,h){return c.map((g,y)=>ps(g,s[y],h))},color:function(c,s,h){return new va(ps(c.r,s.r,h),ps(c.g,s.g,h),ps(c.b,s.b,h),ps(c.a,s.a,h))},number:ps});const Mu=4/29,oa=6/29,ko=3*oa*oa,Ol=oa*oa*oa,Ld=Math.PI/180,qa=180/Math.PI;function Nc(c){return c>Ol?Math.pow(c,1/3):c/ko+Mu}function Ll(c){return c>oa?c*c*c:ko*(c-Mu)}function $a(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Kc(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function bc(c){const s=Kc(c.r),h=Kc(c.g),g=Kc(c.b),y=Nc((.4124564*s+.3575761*h+.1804375*g)/.95047),S=Nc((.2126729*s+.7151522*h+.072175*g)/1);return{l:116*S-16,a:500*(y-S),b:200*(S-Nc((.0193339*s+.119192*h+.9503041*g)/1.08883)),alpha:c.a}}function Jc(c){let s=(c.l+16)/116,h=isNaN(c.a)?s:s+c.a/500,g=isNaN(c.b)?s:s-c.b/200;return s=1*Ll(s),h=.95047*Ll(h),g=1.08883*Ll(g),new va($a(3.2404542*h-1.5371385*s-.4985314*g),$a(-.969266*h+1.8760108*s+.041556*g),$a(.0556434*h-.2040259*s+1.0572252*g),c.alpha)}function Ru(c,s,h){const g=s-c;return c+h*(g>180||g<-180?g-360*Math.round(g/360):g)}const nd={forward:bc,reverse:Jc,interpolate:function(c,s,h){return{l:ps(c.l,s.l,h),a:ps(c.a,s.a,h),b:ps(c.b,s.b,h),alpha:ps(c.alpha,s.alpha,h)}}},Qc={forward:function(c){const{l:s,a:h,b:g}=bc(c),y=Math.atan2(g,h)*qa;return{h:y<0?y+360:y,c:Math.sqrt(h*h+g*g),l:s,alpha:c.a}},reverse:function(c){const s=c.h*Ld,h=c.c;return Jc({l:c.l,a:Math.cos(s)*h,b:Math.sin(s)*h,alpha:c.alpha})},interpolate:function(c,s,h){return{h:Ru(c.h,s.h,h),c:ps(c.c,s.c,h),l:ps(c.l,s.l,h),alpha:ps(c.alpha,s.alpha,h)}}};var Qs=Object.freeze({__proto__:null,hcl:Qc,lab:nd});class el{constructor(s,h,g,y,S){this.type=s,this.operator=h,this.interpolation=g,this.input=y,this.labels=[],this.outputs=[];for(const[R,G]of S)this.labels.push(R),this.outputs.push(G)}static interpolationFactor(s,h,g,y){let S=0;if("exponential"===s.name)S=Cl(h,s.base,g,y);else if("linear"===s.name)S=Cl(h,1,g,y);else if("cubic-bezier"===s.name){const R=s.controlPoints;S=new tt(R[0],R[1],R[2],R[3]).solve(Cl(h,1,g,y))}return S}static parse(s,h){let[g,y,S,...R]=s;if(!Array.isArray(y)||0===y.length)return h.error("Expected an interpolation type expression.",1);if("linear"===y[0])y={name:"linear"};else if("exponential"===y[0]){const K=y[1];if("number"!=typeof K)return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:K}}else{if("cubic-bezier"!==y[0])return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const K=y.slice(1);if(4!==K.length||K.some(ce=>"number"!=typeof ce||ce<0||ce>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:K}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(S=h.parse(S,2,Se),!S)return null;const G=[];let X=null;"interpolate-hcl"===g||"interpolate-lab"===g?X=le:h.expectedType&&"value"!==h.expectedType.kind&&(X=h.expectedType);for(let K=0;K<R.length;K+=2){const ce=R[K],pe=R[K+1],_e=K+3,Ae=K+4;if("number"!=typeof ce)return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(G.length&&G[G.length-1][0]>=ce)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const Oe=h.parse(pe,Ae,X);if(!Oe)return null;X=X||Oe.type,G.push([ce,Oe])}return"number"===X.kind||"color"===X.kind||"array"===X.kind&&"number"===X.itemType.kind&&"number"==typeof X.N?new el(X,g,y,S,G):h.error(`Type ${Li(X)} is not interpolatable.`)}evaluate(s){const h=this.labels,g=this.outputs;if(1===h.length)return g[0].evaluate(s);const y=this.input.evaluate(s);if(y<=h[0])return g[0].evaluate(s);const S=h.length;if(y>=h[S-1])return g[S-1].evaluate(s);const R=Iu(h,y),G=el.interpolationFactor(this.interpolation,y,h[R],h[R+1]),X=g[R].evaluate(s),K=g[R+1].evaluate(s);return"interpolate"===this.operator?td[this.type.kind.toLowerCase()](X,K,G):"interpolate-hcl"===this.operator?Qc.reverse(Qc.interpolate(Qc.forward(X),Qc.forward(K),G)):nd.reverse(nd.interpolate(nd.forward(X),nd.forward(K),G))}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const h=[this.operator,s,this.input.serialize()];for(let g=0;g<this.labels.length;g++)h.push(this.labels[g],this.outputs[g].serialize());return h}}function Cl(c,s,h,g){const y=g-h,S=c-h;return 0===y?0:1===s?S/y:(Math.pow(s,S)-1)/(Math.pow(s,y)-1)}var wc=el;class eu{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let g=null;const y=h.expectedType;y&&"value"!==y.kind&&(g=y);const S=[];for(const G of s.slice(1)){const X=h.parse(G,1+S.length,g,void 0,{typeAnnotation:"omit"});if(!X)return null;g=g||X.type,S.push(X)}const R=y&&S.some(G=>ln(y,G.type));return new eu(R?Le:g,S)}evaluate(s){let h,g=null,y=0;for(const S of this.args){if(y++,g=S.evaluate(s),g&&g instanceof Ns&&!g.available&&(h||(h=g),g=null,y===this.args.length))return h;if(null!==g)break}return g}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(h=>{s.push(h.serialize())}),s}}var Rs=eu;class _o{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const g=[];for(let S=1;S<s.length-1;S+=2){const R=s[S];if("string"!=typeof R)return h.error(`Expected string, but found ${typeof R} instead.`,S);if(/[^a-zA-Z0-9_]/.test(R))return h.error("Variable names must contain only alphanumeric characters or '_'.",S);const G=h.parse(s[S+1],S+1);if(!G)return null;g.push([R,G])}const y=h.parse(s[s.length-1],s.length-1,h.expectedType,g);return y?new _o(g,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[h,g]of this.bindings)s.push(h,g.serialize());return s.push(this.result.serialize()),s}}var Pl=_o;class sl{constructor(s,h,g){this.type=s,this.index=h,this.input=g}static parse(s,h){if(3!==s.length)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const g=h.parse(s[1],1,Se),y=h.parse(s[2],2,Xt(h.expectedType||Le));return g&&y?new sl(y.type.itemType,g,y):null}evaluate(s){const h=this.index.evaluate(s),g=this.input.evaluate(s);if(h<0)throw new fs(`Array index out of bounds: ${h} < 0.`);if(h>=g.length)throw new fs(`Array index out of bounds: ${h} > ${g.length-1}.`);if(h!==Math.floor(h))throw new fs(`Array index must be an integer, but found ${h} instead.`);return g[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var cf=sl;class zc{constructor(s,h){this.type=U,this.needle=s,this.haystack=h}static parse(s,h){if(3!==s.length)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const g=h.parse(s[1],1,Le),y=h.parse(s[2],2,Le);return g&&y?Un(g.type,[U,ze,Se,Pe,Le])?new zc(g,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Li(g.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),g=this.haystack.evaluate(s);if(null==g)return!1;if(!cr(h,["boolean","string","number","null"]))throw new fs(`Expected first argument to be of type boolean, string, number or null, but found ${Li(Ws(h))} instead.`);if(!cr(g,["string","array"]))throw new fs(`Expected second argument to be of type array or string, but found ${Li(Ws(g))} instead.`);return g.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var rd=zc;class Fl{constructor(s,h,g){this.type=Se,this.needle=s,this.haystack=h,this.fromIndex=g}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const g=h.parse(s[1],1,Le),y=h.parse(s[2],2,Le);if(!g||!y)return null;if(!Un(g.type,[U,ze,Se,Pe,Le]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Li(g.type)} instead`);if(4===s.length){const S=h.parse(s[3],3,Se);return S?new Fl(g,y,S):null}return new Fl(g,y)}evaluate(s){const h=this.needle.evaluate(s),g=this.haystack.evaluate(s);if(!cr(h,["boolean","string","number","null"]))throw new fs(`Expected first argument to be of type boolean, string, number or null, but found ${Li(Ws(h))} instead.`);if(!cr(g,["string","array"]))throw new fs(`Expected second argument to be of type array or string, but found ${Li(Ws(g))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(s);return g.indexOf(h,y)}return g.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var pl=Fl;class Ss{constructor(s,h,g,y,S,R){this.inputType=s,this.type=h,this.input=g,this.cases=y,this.outputs=S,this.otherwise=R}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let g,y;h.expectedType&&"value"!==h.expectedType.kind&&(y=h.expectedType);const S={},R=[];for(let K=2;K<s.length-1;K+=2){let ce=s[K];const pe=s[K+1];Array.isArray(ce)||(ce=[ce]);const _e=h.concat(K);if(0===ce.length)return _e.error("Expected at least one branch label.");for(const Oe of ce){if("number"!=typeof Oe&&"string"!=typeof Oe)return _e.error("Branch labels must be numbers or strings.");if("number"==typeof Oe&&Math.abs(Oe)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Oe&&Math.floor(Oe)!==Oe)return _e.error("Numeric branch labels must be integer values.");if(g){if(_e.checkSubtype(g,Ws(Oe)))return null}else g=Ws(Oe);if(void 0!==S[String(Oe)])return _e.error("Branch labels must be unique.");S[String(Oe)]=R.length}const Ae=h.parse(pe,K,y);if(!Ae)return null;y=y||Ae.type,R.push(Ae)}const G=h.parse(s[1],1,Le);if(!G)return null;const X=h.parse(s[s.length-1],s.length-1,y);return X?"value"!==G.type.kind&&h.concat(1).checkSubtype(g,G.type)?null:new Ss(g,y,G,S,R,X):null}evaluate(s){const h=this.input.evaluate(s);return(Ws(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],h=Object.keys(this.cases).sort(),g=[],y={};for(const R of h){const G=y[this.cases[R]];void 0===G?(y[this.cases[R]]=g.length,g.push([this.cases[R],[R]])):g[G][1].push(R)}const S=R=>"number"===this.inputType.kind?Number(R):R;for(const[R,G]of g)s.push(1===G.length?S(G[0]):G.map(S)),s.push(this.outputs[R].serialize());return s.push(this.otherwise.serialize()),s}}var ad=Ss;class or{constructor(s,h,g){this.type=s,this.branches=h,this.otherwise=g}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let g;h.expectedType&&"value"!==h.expectedType.kind&&(g=h.expectedType);const y=[];for(let R=1;R<s.length-1;R+=2){const G=h.parse(s[R],R,U);if(!G)return null;const X=h.parse(s[R+1],R+1,g);if(!X)return null;y.push([G,X]),g=g||X.type}const S=h.parse(s[s.length-1],s.length-1,g);return S?new or(g,y,S):null}evaluate(s){for(const[h,g]of this.branches)if(h.evaluate(s))return g.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,g]of this.branches)s(h),s(g);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(h=>{s.push(h.serialize())}),s}}var Bl=or;class Ou{constructor(s,h,g,y){this.type=s,this.input=h,this.beginIndex=g,this.endIndex=y}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const g=h.parse(s[1],1,Le),y=h.parse(s[2],2,Se);if(!g||!y)return null;if(!Un(g.type,[Xt(Le),ze,Le]))return h.error(`Expected first argument to be of type array or string, but found ${Li(g.type)} instead`);if(4===s.length){const S=h.parse(s[3],3,Se);return S?new Ou(g.type,g,y,S):null}return new Ou(g.type,g,y)}evaluate(s){const h=this.input.evaluate(s),g=this.beginIndex.evaluate(s);if(!cr(h,["string","array"]))throw new fs(`Expected first argument to be of type array or string, but found ${Li(Ws(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(s);return h.slice(g,y)}return h.slice(g)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var hu=Ou;function Cc(c,s){return"=="===c||"!="===c?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function Ei(c,s,h,g){return 0===g.compare(s,h)}function pn(c,s,h){const g="=="!==c&&"!="!==c;return class sM{constructor(S,R,G){this.type=U,this.lhs=S,this.rhs=R,this.collator=G,this.hasUntypedArgument="value"===S.type.kind||"value"===R.type.kind}static parse(S,R){if(3!==S.length&&4!==S.length)return R.error("Expected two or three arguments.");const G=S[0];let X=R.parse(S[1],1,Le);if(!X)return null;if(!Cc(G,X.type))return R.concat(1).error(`"${G}" comparisons are not supported for type '${Li(X.type)}'.`);let K=R.parse(S[2],2,Le);if(!K)return null;if(!Cc(G,K.type))return R.concat(2).error(`"${G}" comparisons are not supported for type '${Li(K.type)}'.`);if(X.type.kind!==K.type.kind&&"value"!==X.type.kind&&"value"!==K.type.kind)return R.error(`Cannot compare types '${Li(X.type)}' and '${Li(K.type)}'.`);g&&("value"===X.type.kind&&"value"!==K.type.kind?X=new gs(K.type,[X]):"value"!==X.type.kind&&"value"===K.type.kind&&(K=new gs(X.type,[K])));let ce=null;if(4===S.length){if("string"!==X.type.kind&&"string"!==K.type.kind&&"value"!==X.type.kind&&"value"!==K.type.kind)return R.error("Cannot use collator to compare non-string types.");if(ce=R.parse(S[3],3,$e),!ce)return null}return new sM(X,K,ce)}evaluate(S){const R=this.lhs.evaluate(S),G=this.rhs.evaluate(S);if(g&&this.hasUntypedArgument){const X=Ws(R),K=Ws(G);if(X.kind!==K.kind||"string"!==X.kind&&"number"!==X.kind)throw new fs(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${X.kind}, ${K.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const X=Ws(R),K=Ws(G);if("string"!==X.kind||"string"!==K.kind)return s(S,R,G)}return this.collator?h(S,R,G,this.collator.evaluate(S)):s(S,R,G)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}serialize(){const S=[c];return this.eachChild(R=>{S.push(R.serialize())}),S}}}const nn=pn("==",function(c,s,h){return s===h},Ei),Fr=pn("!=",function(c,s,h){return s!==h},function(c,s,h,g){return!Ei(0,s,h,g)}),Wa=pn("<",function(c,s,h){return s<h},function(c,s,h,g){return g.compare(s,h)<0}),Os=pn(">",function(c,s,h){return s>h},function(c,s,h,g){return g.compare(s,h)>0}),Yo=pn("<=",function(c,s,h){return s<=h},function(c,s,h,g){return g.compare(s,h)<=0}),vs=pn(">=",function(c,s,h){return s>=h},function(c,s,h,g){return g.compare(s,h)>=0});class El{constructor(s,h,g,y,S,R){this.type=ze,this.number=s,this.locale=h,this.currency=g,this.unit=y,this.minFractionDigits=S,this.maxFractionDigits=R}static parse(s,h){if(3!==s.length)return h.error("Expected two arguments.");const g=h.parse(s[1],1,Se);if(!g)return null;const y=s[2];if("object"!=typeof y||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let S=null;if(y.locale&&(S=h.parse(y.locale,1,ze),!S))return null;let R=null;if(y.currency&&(R=h.parse(y.currency,1,ze),!R))return null;let G=null;if(y.unit&&(G=h.parse(y.unit,1,ze),!G))return null;let X=null;if(y["min-fraction-digits"]&&(X=h.parse(y["min-fraction-digits"],1,Se),!X))return null;let K=null;return y["max-fraction-digits"]&&(K=h.parse(y["max-fraction-digits"],1,Se),!K)?null:new El(g,S,R,G,X,K)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class sd{constructor(s){this.type=Se,this.input=s}static parse(s,h){if(2!==s.length)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const g=h.parse(s[1],1);return g?"array"!==g.type.kind&&"string"!==g.type.kind&&"value"!==g.type.kind?h.error(`Expected argument of type string or array, but found ${Li(g.type)} instead.`):new sd(g):null}evaluate(s){const h=this.input.evaluate(s);if("string"==typeof h||Array.isArray(h))return h.length;throw new fs(`Expected value to be of type string or array, but found ${Li(Ws(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(h=>{s.push(h.serialize())}),s}}const ol={"==":nn,"!=":Fr,">":Os,"<":Wa,">=":vs,"<=":Yo,array:gs,at:cf,boolean:gs,case:Bl,coalesce:Rs,collator:gd,format:Fc,image:no,in:rd,"index-of":pl,interpolate:wc,"interpolate-hcl":wc,"interpolate-lab":wc,length:sd,let:Pl,literal:$r,match:ad,number:gs,"number-format":El,object:gs,slice:hu,step:wo,string:gs,"to-boolean":uu,"to-color":uu,"to-number":uu,"to-string":uu,var:ec,within:co};function tu(c,[s,h,g,y]){s=s.evaluate(c),h=h.evaluate(c),g=g.evaluate(c);const S=y?y.evaluate(c):1,R=Ku(s,h,g,S);if(R)throw new fs(R);return new va(s/255*S,h/255*S,g/255*S,S)}function ml(c,s){return c in s}function tc(c,s){const h=s[c];return void 0===h?null:h}function Hs(c){return{type:c}}ks.register(ol,{error:[{kind:"error"},[ze],(c,[s])=>{throw new fs(s.evaluate(c))}],typeof:[ze,[Le],(c,[s])=>Li(Ws(s.evaluate(c)))],"to-rgba":[Xt(Se,4),[le],(c,[s])=>s.evaluate(c).toArray()],rgb:[le,[Se,Se,Se],tu],rgba:[le,[Se,Se,Se,Se],tu],has:{type:U,overloads:[[[ze],(c,[s])=>ml(s.evaluate(c),c.properties())],[[ze,we],(c,[s,h])=>ml(s.evaluate(c),h.evaluate(c))]]},get:{type:Le,overloads:[[[ze],(c,[s])=>tc(s.evaluate(c),c.properties())],[[ze,we],(c,[s,h])=>tc(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Le,[ze],(c,[s])=>tc(s.evaluate(c),c.featureState||{})],properties:[we,[],c=>c.properties()],"geometry-type":[ze,[],c=>c.geometryType()],id:[Le,[],c=>c.id()],zoom:[Se,[],c=>c.globals.zoom],pitch:[Se,[],c=>c.globals.pitch||0],"distance-from-center":[Se,[],c=>c.distanceFromCenter()],"heatmap-density":[Se,[],c=>c.globals.heatmapDensity||0],"line-progress":[Se,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[Se,[],c=>c.globals.skyRadialProgress||0],accumulated:[Le,[],c=>void 0===c.globals.accumulated?null:c.globals.accumulated],"+":[Se,Hs(Se),(c,s)=>{let h=0;for(const g of s)h+=g.evaluate(c);return h}],"*":[Se,Hs(Se),(c,s)=>{let h=1;for(const g of s)h*=g.evaluate(c);return h}],"-":{type:Se,overloads:[[[Se,Se],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[Se],(c,[s])=>-s.evaluate(c)]]},"/":[Se,[Se,Se],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[Se,[Se,Se],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[Se,[],()=>Math.LN2],pi:[Se,[],()=>Math.PI],e:[Se,[],()=>Math.E],"^":[Se,[Se,Se],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[Se,[Se],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Se,[Se],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Se,[Se],(c,[s])=>Math.log(s.evaluate(c))],log2:[Se,[Se],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Se,[Se],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Se,[Se],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Se,[Se],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Se,[Se],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Se,[Se],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Se,[Se],(c,[s])=>Math.atan(s.evaluate(c))],min:[Se,Hs(Se),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[Se,Hs(Se),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[Se,[Se],(c,[s])=>Math.abs(s.evaluate(c))],round:[Se,[Se],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Se,[Se],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Se,[Se],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[U,[ze,Le],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[U,[Le],(c,[s])=>c.id()===s.value],"filter-type-==":[U,[ze],(c,[s])=>c.geometryType()===s.value],"filter-<":[U,[ze,Le],(c,[s,h])=>{const g=c.properties()[s.value],y=h.value;return typeof g==typeof y&&g<y}],"filter-id-<":[U,[Le],(c,[s])=>{const h=c.id(),g=s.value;return typeof h==typeof g&&h<g}],"filter->":[U,[ze,Le],(c,[s,h])=>{const g=c.properties()[s.value],y=h.value;return typeof g==typeof y&&g>y}],"filter-id->":[U,[Le],(c,[s])=>{const h=c.id(),g=s.value;return typeof h==typeof g&&h>g}],"filter-<=":[U,[ze,Le],(c,[s,h])=>{const g=c.properties()[s.value],y=h.value;return typeof g==typeof y&&g<=y}],"filter-id-<=":[U,[Le],(c,[s])=>{const h=c.id(),g=s.value;return typeof h==typeof g&&h<=g}],"filter->=":[U,[ze,Le],(c,[s,h])=>{const g=c.properties()[s.value],y=h.value;return typeof g==typeof y&&g>=y}],"filter-id->=":[U,[Le],(c,[s])=>{const h=c.id(),g=s.value;return typeof h==typeof g&&h>=g}],"filter-has":[U,[Le],(c,[s])=>s.value in c.properties()],"filter-has-id":[U,[],c=>null!==c.id()&&void 0!==c.id()],"filter-type-in":[U,[Xt(ze)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[U,[Xt(Le)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[U,[ze,Xt(Le)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[U,[ze,Xt(Le)],(c,[s,h])=>function(g,y,S,R){for(;S<=R;){const G=S+R>>1;if(y[G]===g)return!0;y[G]>g?R=G-1:S=G+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:U,overloads:[[[U,U],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[Hs(U),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:U,overloads:[[[U,U],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[Hs(U),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[U,[U],(c,[s])=>!s.evaluate(c)],"is-supported-script":[U,[ze],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[ze,[ze],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[ze,[ze],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[ze,Hs(Le),(c,s)=>s.map(h=>xc(h.evaluate(c))).join("")],"resolved-locale":[ze,[$e],(c,[s])=>s.evaluate(c).resolvedLocale()]});var tl=ol;function xs(c){return{result:"success",value:c}}function Lu(c){return{result:"error",value:c}}function gl(c){return"data-driven"===c["property-type"]}function Pu(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function ic(c){return!!c.expression&&c.expression.interpolated}function bs(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":null===c?"null":typeof c}function Fu(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}function Yc(c){return c}function il(c,s){const h="color"===s.type,g=c.stops&&"object"==typeof c.stops[0][0],y=g||!(g||void 0!==c.property),S=c.type||(ic(s)?"exponential":"interval");if(h&&((c=H({},c)).stops&&(c.stops=c.stops.map(K=>[K[0],va.parse(K[1])])),c.default=va.parse(c.default?c.default:s.default)),c.colorSpace&&"rgb"!==c.colorSpace&&!Qs[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let R,G,X;if("exponential"===S)R=Xo;else if("interval"===S)R=Yl;else if("categorical"===S){R=zl,G=Object.create(null);for(const K of c.stops)G[K[0]]=K[1];X=typeof c.stops[0][0]}else{if("identity"!==S)throw new Error(`Unknown function type "${S}"`);R=nc}if(g){const K={},ce=[];for(let Ae=0;Ae<c.stops.length;Ae++){const Oe=c.stops[Ae],Ue=Oe[0].zoom;void 0===K[Ue]&&(K[Ue]={zoom:Ue,type:c.type,property:c.property,default:c.default,stops:[]},ce.push(Ue)),K[Ue].stops.push([Oe[0].value,Oe[1]])}const pe=[];for(const Ae of ce)pe.push([K[Ae].zoom,il(K[Ae],s)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:wc.interpolationFactor.bind(void 0,_e),zoomStops:pe.map(Ae=>Ae[0]),evaluate:({zoom:Ae},Oe)=>Xo({stops:pe,base:c.base},s,Ae).evaluate(Ae,Oe)}}if(y){const K="exponential"===S?{name:"exponential",base:void 0!==c.base?c.base:1}:null;return{kind:"camera",interpolationType:K,interpolationFactor:wc.interpolationFactor.bind(void 0,K),zoomStops:c.stops.map(ce=>ce[0]),evaluate:({zoom:ce})=>R(c,s,ce,G,X)}}return{kind:"source",evaluate(K,ce){const pe=ce&&ce.properties?ce.properties[c.property]:void 0;return void 0===pe?Nl(c.default,s.default):R(c,s,pe,G,X)}}}function Nl(c,s,h){return void 0!==c?c:void 0!==s?s:void 0!==h?h:void 0}function zl(c,s,h,g,y){return Nl(typeof h===y?g[h]:void 0,c.default,s.default)}function Yl(c,s,h){if("number"!==bs(h))return Nl(c.default,s.default);const g=c.stops.length;if(1===g||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[g-1][0])return c.stops[g-1][1];const y=Iu(c.stops.map(S=>S[0]),h);return c.stops[y][1]}function Xo(c,s,h){const g=void 0!==c.base?c.base:1;if("number"!==bs(h))return Nl(c.default,s.default);const y=c.stops.length;if(1===y||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[y-1][0])return c.stops[y-1][1];const S=Iu(c.stops.map(ce=>ce[0]),h),R=function(ce,pe,_e,Ae){const Oe=Ae-_e,Ue=ce-_e;return 0===Oe?0:1===pe?Ue/Oe:(Math.pow(pe,Ue)-1)/(Math.pow(pe,Oe)-1)}(h,g,c.stops[S][0],c.stops[S+1][0]),G=c.stops[S][1],X=c.stops[S+1][1];let K=td[s.type]||Yc;if(c.colorSpace&&"rgb"!==c.colorSpace){const ce=Qs[c.colorSpace];K=(pe,_e)=>ce.reverse(ce.interpolate(ce.forward(pe),ce.forward(_e),R))}return"function"==typeof G.evaluate?{evaluate(...ce){const pe=G.evaluate.apply(void 0,ce),_e=X.evaluate.apply(void 0,ce);if(void 0!==pe&&void 0!==_e)return K(pe,_e,R)}}:K(G,X,R)}function nc(c,s,h){return"color"===s.type?h=va.parse(h):"formatted"===s.type?h=na.fromString(h.toString()):"resolvedImage"===s.type?h=Ns.fromString(h.toString()):bs(h)===s.type||"enum"===s.type&&s.values[h]||(h=void 0),Nl(h,c.default,s.default)}class ho{constructor(s,h){var g;this.expression=s,this._warningHistory={},this._evaluator=new Ju,this._defaultValue=h?"color"===(g=h).type&&(Fu(g.default)||Array.isArray(g.default))?new va(0,0,0,0):"color"===g.type?va.parse(g.default)||null:void 0===g.default?null:g.default:null,this._enumValues=h&&"enum"===h.type?h.values:null}evaluateWithoutErrorHandling(s,h,g,y,S,R,G,X){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=g,this._evaluator.canonical=y||null,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=R,this._evaluator.featureTileCoord=G||null,this._evaluator.featureDistanceData=X||null,this.expression.evaluate(this._evaluator)}evaluate(s,h,g,y,S,R,G,X){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=g||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=R||null,this._evaluator.featureTileCoord=G||null,this._evaluator.featureDistanceData=X||null;try{const K=this.expression.evaluate(this._evaluator);if(null==K||"number"==typeof K&&K!=K)return this._defaultValue;if(this._enumValues&&!(K in this._enumValues))throw new fs(`Expected value to be one of ${Object.keys(this._enumValues).map(ce=>JSON.stringify(ce)).join(", ")}, but found ${JSON.stringify(K)} instead.`);return K}catch(K){return this._warningHistory[K.message]||(this._warningHistory[K.message]=!0,typeof console<"u"&&console.warn(K.message)),this._defaultValue}}}function kl(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in tl}function Gc(c,s){const h=new ed(tl,[],s?function(y){const S={color:le,string:ze,number:Se,enum:ze,boolean:U,formatted:mt,resolvedImage:$t};return"array"===y.type?Xt(S[y.value]||Le,y.length):S[y.type]}(s):void 0),g=h.parse(c,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return g?xs(new ho(g,s)):Lu(h.errors)}class Gl{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent="constant"!==s&&!Ts(h.expression)}evaluateWithoutErrorHandling(s,h,g,y,S,R){return this._styleExpression.evaluateWithoutErrorHandling(s,h,g,y,S,R)}evaluate(s,h,g,y,S,R){return this._styleExpression.evaluate(s,h,g,y,S,R)}}class fu{constructor(s,h,g,y){this.kind=s,this.zoomStops=g,this._styleExpression=h,this.isStateDependent="camera"!==s&&!Ts(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,h,g,y,S,R){return this._styleExpression.evaluateWithoutErrorHandling(s,h,g,y,S,R)}evaluate(s,h,g,y,S,R){return this._styleExpression.evaluate(s,h,g,y,S,R)}interpolationFactor(s,h,g){return this.interpolationType?wc.interpolationFactor(this.interpolationType,s,h,g):0}}function Kd(c,s){if("error"===(c=Gc(c,s)).result)return c;const h=c.value.expression,g=zs(h);if(!g&&!gl(s))return Lu([new fe("","data expressions not supported")]);const y=vo(h,["zoom","pitch","distance-from-center"]);if(!y&&!Pu(s))return Lu([new fe("","zoom expressions not supported")]);const S=yo(h);return S||y?S instanceof fe?Lu([S]):S instanceof wc&&!ic(s)?Lu([new fe("",'"interpolate" expressions cannot be used with this property')]):xs(S?new fu(g?"camera":"composite",c.value,S.labels,S instanceof wc?S.interpolation:void 0):new Gl(g?"constant":"source",c.value)):Lu([new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class pu{constructor(s,h){this._parameters=s,this._specification=h,H(this,il(this._parameters,this._specification))}static deserialize(s){return new pu(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function yo(c){let s=null;if(c instanceof Pl)s=yo(c.result);else if(c instanceof Rs){for(const h of c.args)if(s=yo(h),s)break}else(c instanceof wo||c instanceof wc)&&c.input instanceof ks&&"zoom"===c.input.name&&(s=c);return s instanceof fe||c.eachChild(h=>{const g=yo(h);g instanceof fe?s=g:!s&&g?s=new fe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&g&&s!==g&&(s=new fe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}class dr{constructor(s,h,g,y){this.message=(s?`${s}: `:"")+g,y&&(this.identifier=y),null!=h&&h.__line__&&(this.line=h.__line__)}}function v(c){const s=c.key,h=c.value,g=c.valueSpec||{},y=c.objectElementValidators||{},S=c.style,R=c.styleSpec;let G=[];const X=bs(h);if("object"!==X)return[new dr(s,h,`object expected, ${X} found`)];for(const K in h){const ce=K.split(".")[0];let pe;y[ce]?pe=y[ce]:g[ce]?pe=ll:y["*"]?pe=y["*"]:g["*"]&&(pe=ll),pe?G=G.concat(pe({key:(s&&`${s}.`)+K,value:h[K],valueSpec:g[ce]||g["*"],style:S,styleSpec:R,object:h,objectKey:K},h)):G.push(new dr(s,h[K],`unknown property "${K}"`))}for(const K in g)y[K]||g[K].required&&void 0===g[K].default&&void 0===h[K]&&G.push(new dr(s,h,`missing required property "${K}"`));return G}function O(c){const s=c.value,h=c.valueSpec,g=c.style,y=c.styleSpec,S=c.key,R=c.arrayElementValidator||ll;if("array"!==bs(s))return[new dr(S,s,`array expected, ${bs(s)} found`)];if(h.length&&s.length!==h.length)return[new dr(S,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new dr(S,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let G={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};y.$version<7&&(G.function=h.function),"object"===bs(h.value)&&(G=h.value);let X=[];for(let K=0;K<s.length;K++)X=X.concat(R({array:s,arrayIndex:K,value:s[K],valueSpec:G,style:g,styleSpec:y,key:`${S}[${K}]`}));return X}function W(c){const s=c.key,h=c.value,g=c.valueSpec;let y=bs(h);if("number"===y&&h!=h&&(y="NaN"),"number"!==y)return[new dr(s,h,`number expected, ${y} found`)];if("minimum"in g){let S=g.minimum;if("array"===bs(g.minimum)&&(S=g.minimum[c.arrayIndex]),h<S)return[new dr(s,h,`${h} is less than the minimum value ${S}`)]}if("maximum"in g){let S=g.maximum;if("array"===bs(g.maximum)&&(S=g.maximum[c.arrayIndex]),h>S)return[new dr(s,h,`${h} is greater than the maximum value ${S}`)]}return[]}function he(c){const s=c.valueSpec,h=Z(c.value.type);let g,y,S,R={};const G="categorical"!==h&&void 0===c.value.property,X=!G,K="array"===bs(c.value.stops)&&"array"===bs(c.value.stops[0])&&"object"===bs(c.value.stops[0][0]),ce=v({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Ae){if("identity"===h)return[new dr(Ae.key,Ae.value,'identity function may not have a "stops" property')];let Oe=[];const Ue=Ae.value;return Oe=Oe.concat(O({key:Ae.key,value:Ue,valueSpec:Ae.valueSpec,style:Ae.style,styleSpec:Ae.styleSpec,arrayElementValidator:pe})),"array"===bs(Ue)&&0===Ue.length&&Oe.push(new dr(Ae.key,Ue,"array must have at least one stop")),Oe},default:function(Ae){return ll({key:Ae.key,value:Ae.value,valueSpec:s,style:Ae.style,styleSpec:Ae.styleSpec})}}});return"identity"===h&&G&&ce.push(new dr(c.key,c.value,'missing required property "property"')),"identity"===h||c.value.stops||ce.push(new dr(c.key,c.value,'missing required property "stops"')),"exponential"===h&&c.valueSpec.expression&&!ic(c.valueSpec)&&ce.push(new dr(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(X&&!gl(c.valueSpec)?ce.push(new dr(c.key,c.value,"property functions not supported")):G&&!Pu(c.valueSpec)&&ce.push(new dr(c.key,c.value,"zoom functions not supported"))),"categorical"!==h&&!K||void 0!==c.value.property||ce.push(new dr(c.key,c.value,'"property" property is required')),ce;function pe(Ae){let Oe=[];const Ue=Ae.value,dt=Ae.key;if("array"!==bs(Ue))return[new dr(dt,Ue,`array expected, ${bs(Ue)} found`)];if(2!==Ue.length)return[new dr(dt,Ue,`array length 2 expected, length ${Ue.length} found`)];if(K){if("object"!==bs(Ue[0]))return[new dr(dt,Ue,`object expected, ${bs(Ue[0])} found`)];if(void 0===Ue[0].zoom)return[new dr(dt,Ue,"object stop key must have zoom")];if(void 0===Ue[0].value)return[new dr(dt,Ue,"object stop key must have value")];const Rt=Z(Ue[0].zoom);if("number"!=typeof Rt)return[new dr(dt,Ue[0].zoom,"stop zoom values must be numbers")];if(S&&S>Rt)return[new dr(dt,Ue[0].zoom,"stop zoom values must appear in ascending order")];Rt!==S&&(S=Rt,y=void 0,R={}),Oe=Oe.concat(v({key:`${dt}[0]`,value:Ue[0],valueSpec:{zoom:{}},style:Ae.style,styleSpec:Ae.styleSpec,objectElementValidators:{zoom:W,value:_e}}))}else Oe=Oe.concat(_e({key:`${dt}[0]`,value:Ue[0],valueSpec:{},style:Ae.style,styleSpec:Ae.styleSpec},Ue));return kl(J(Ue[1]))?Oe.concat([new dr(`${dt}[1]`,Ue[1],"expressions are not allowed in function stops.")]):Oe.concat(ll({key:`${dt}[1]`,value:Ue[1],valueSpec:s,style:Ae.style,styleSpec:Ae.styleSpec}))}function _e(Ae,Oe){const Ue=bs(Ae.value),dt=Z(Ae.value),Rt=null!==Ae.value?Ae.value:Oe;if(g){if(Ue!==g)return[new dr(Ae.key,Rt,`${Ue} stop domain type must match previous stop domain type ${g}`)]}else g=Ue;if("number"!==Ue&&"string"!==Ue&&"boolean"!==Ue&&"number"!=typeof dt&&"string"!=typeof dt&&"boolean"!=typeof dt)return[new dr(Ae.key,Rt,"stop domain value must be a number, string, or boolean")];if("number"!==Ue&&"categorical"!==h){let ii=`number expected, ${Ue} found`;return gl(s)&&void 0===h&&(ii+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dr(Ae.key,Rt,ii)]}return"categorical"!==h||"number"!==Ue||"number"==typeof dt&&isFinite(dt)&&Math.floor(dt)===dt?"categorical"!==h&&"number"===Ue&&"number"==typeof dt&&"number"==typeof y&&void 0!==y&&dt<y?[new dr(Ae.key,Rt,"stop domain values must appear in ascending order")]:(y=dt,"categorical"===h&&dt in R?[new dr(Ae.key,Rt,"stop domain values must be unique")]:(R[dt]=!0,[])):[new dr(Ae.key,Rt,`integer expected, found ${String(dt)}`)]}}function Ie(c){const s=("property"===c.expressionContext?Kd:Gc)(J(c.value),c.valueSpec);if("error"===s.result)return s.value.map(g=>new dr(`${c.key}${g.key}`,c.value,g.message));const h=s.value.expression||s.value._styleExpression.expression;if("property"===c.expressionContext&&"text-font"===c.propertyKey&&!h.outputDefined())return[new dr(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===c.expressionContext&&"layout"===c.propertyType&&!Ts(h))return[new dr(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===c.expressionContext)return Ye(h,c);if(c.expressionContext&&0===c.expressionContext.indexOf("cluster")){if(!vo(h,["zoom","feature-state"]))return[new dr(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===c.expressionContext&&!zs(h))return[new dr(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ye(c,s){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(s.valueSpec&&s.valueSpec.expression)for(const y of s.valueSpec.expression.parameters)h.delete(y);if(0===h.size)return[];const g=[];return c instanceof ks&&h.has(c.name)?[new dr(s.key,s.value,`["${c.name}"] expression is not supported in a filter for a ${s.object.type} layer with id: ${s.object.id}`)]:(c.eachChild(y=>{g.push(...Ye(y,s))}),g)}function ni(c){const s=c.key,h=c.value,g=c.valueSpec,y=[];return Array.isArray(g.values)?-1===g.values.indexOf(Z(h))&&y.push(new dr(s,h,`expected one of [${g.values.join(", ")}], ${JSON.stringify(h)} found`)):-1===Object.keys(g.values).indexOf(Z(h))&&y.push(new dr(s,h,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function Ri(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!Ri(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}function on(c,s="fill"){if(null==c)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ri(c)||(c=Va(c));const h=c;let g=!0;try{g=function(K){if(!gr(K))return K;let ce=J(K);return Ar(ce),ce=Zn(ce),ce}(h)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(h,null,2)}\n        `)}const y=N[`filter_${s}`],S=Gc(g,y);let R=null;if("error"===S.result)throw new Error(S.value.map(K=>`${K.key}: ${K.message}`).join(", "));R=(K,ce,pe)=>S.value.evaluate(K,ce,{},pe);let G=null,X=null;if(g!==h){const K=Gc(h,y);if("error"===K.result)throw new Error(K.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));G=(ce,pe,_e,Ae,Oe)=>K.value.evaluate(ce,pe,{},_e,void 0,void 0,Ae,Oe),X=!zs(K.value.expression)}return{filter:R,dynamicFilter:G||void 0,needGeometry:xo(g),needFeature:!!X}}function Zn(c){if(!Array.isArray(c))return c;const s=function(h){if(Ha.has(h[0]))for(let g=1;g<h.length;g++)if(gr(h[g]))return!0;return h}(c);return!0===s?s:s.map(h=>Zn(h))}function Ar(c){let s=!1;const h=[];if("case"===c[0]){for(let g=1;g<c.length-1;g+=2)s=s||gr(c[g]),h.push(c[g+1]);h.push(c[c.length-1])}else if("match"===c[0]){s=s||gr(c[1]);for(let g=2;g<c.length-1;g+=2)h.push(c[g+1]);h.push(c[c.length-1])}else if("step"===c[0]){s=s||gr(c[1]);for(let g=1;g<c.length-1;g+=2)h.push(c[g+1])}s&&(c.length=0,c.push("any",...h));for(let g=1;g<c.length;g++)Ar(c[g])}function gr(c){if(!Array.isArray(c))return!1;if("pitch"===(s=c[0])||"distance-from-center"===s)return!0;var s;for(let h=1;h<c.length;h++)if(gr(c[h]))return!0;return!1}const Ha=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function is(c,s){return c<s?-1:c>s?1:0}function xo(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(let s=1;s<c.length;s++)if(xo(c[s]))return!0;return!1}function Va(c){if(!c)return!0;const s=c[0];return c.length<=1?"any"!==s:"=="===s?To(c[1],c[2],"=="):"!="===s?Qa(To(c[1],c[2],"==")):"<"===s||">"===s||"<="===s||">="===s?To(c[1],c[2],s):"any"===s?(h=c.slice(1),["any"].concat(h.map(Va))):"all"===s?["all"].concat(c.slice(1).map(Va)):"none"===s?["all"].concat(c.slice(1).map(Va).map(Qa)):"in"===s?Hl(c[1],c.slice(2)):"!in"===s?Qa(Hl(c[1],c.slice(2))):"has"===s?Hc(c[1]):"!has"===s?Qa(Hc(c[1])):"within"!==s||c;var h}function To(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function Hl(c,s){if(0===s.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(is)]]:["filter-in-small",c,["literal",s]]}}function Hc(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Qa(c){return["!",c]}function xa(c){return Ri(J(c.value))?Ie(H({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):Go(c)}function Go(c){const s=c.value,h=c.key;if("array"!==bs(s))return[new dr(h,s,`array expected, ${bs(s)} found`)];const g=c.styleSpec;let y,S=[];if(s.length<1)return[new dr(h,s,"filter array must have at least 1 element")];switch(S=S.concat(ni({key:`${h}[0]`,value:s[0],valueSpec:g.filter_operator,style:c.style,styleSpec:c.styleSpec})),Z(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===Z(s[1])&&S.push(new dr(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&S.push(new dr(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=bs(s[1]),"string"!==y&&S.push(new dr(`${h}[1]`,s[1],`string expected, ${y} found`)));for(let R=2;R<s.length;R++)y=bs(s[R]),"$type"===Z(s[1])?S=S.concat(ni({key:`${h}[${R}]`,value:s[R],valueSpec:g.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==y&&"number"!==y&&"boolean"!==y&&S.push(new dr(`${h}[${R}]`,s[R],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let R=1;R<s.length;R++)S=S.concat(Go({key:`${h}[${R}]`,value:s[R],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":y=bs(s[1]),2!==s.length?S.push(new dr(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==y&&S.push(new dr(`${h}[1]`,s[1],`string expected, ${y} found`));break;case"within":y=bs(s[1]),2!==s.length?S.push(new dr(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):"object"!==y&&S.push(new dr(`${h}[1]`,s[1],`object expected, ${y} found`))}return S}function ba(c,s){const h=c.key,g=c.style,y=c.styleSpec,S=c.value,R=c.objectKey,G=y[`${s}_${c.layerType}`];if(!G)return[];const X=R.match(/^(.*)-transition$/);if("paint"===s&&X&&G[X[1]]&&G[X[1]].transition)return ll({key:h,value:S,valueSpec:y.transition,style:g,styleSpec:y});const K=c.valueSpec||G[R];if(!K)return[new dr(h,S,`unknown property "${R}"`)];let ce;if("string"===bs(S)&&gl(K)&&!K.tokens&&(ce=/^{([^}]+)}$/.exec(S))){const _e=`\`{ "type": "identity", "property": ${ce?JSON.stringify(ce[1]):'"_"'} }\``;return[new dr(h,S,`"${R}" does not support interpolation syntax\nUse an identity property function instead: ${_e}.`)]}const pe=[];return"symbol"===c.layerType&&("text-field"===R&&g&&!g.glyphs&&pe.push(new dr(h,S,'use of "text-field" requires a style "glyphs" property')),"text-font"===R&&Fu(J(S))&&"identity"===Z(S.type)&&pe.push(new dr(h,S,'"text-font" does not support identity functions'))),pe.concat(ll({key:c.key,value:S,valueSpec:K,style:g,styleSpec:y,expressionContext:"property",propertyType:s,propertyKey:R}))}function ls(c){return ba(c,"paint")}function Ge(c){return ba(c,"layout")}function se(c){let s=[];const h=c.value,g=c.key,y=c.style,S=c.styleSpec;h.type||h.ref||s.push(new dr(g,h,'either "type" or "ref" is required'));let R=Z(h.type);const G=Z(h.ref);if(h.id){const X=Z(h.id);for(let K=0;K<c.arrayIndex;K++){const ce=y.layers[K];Z(ce.id)===X&&s.push(new dr(g,h.id,`duplicate layer id "${h.id}", previously used at line ${ce.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(K=>{K in h&&s.push(new dr(g,h[K],`"${K}" is prohibited for ref layers`))}),y.layers.forEach(K=>{Z(K.id)===G&&(X=K)}),X?X.ref?s.push(new dr(g,h.ref,"ref cannot reference another ref layer")):R=Z(X.type):"string"==typeof G&&s.push(new dr(g,h.ref,`ref layer "${G}" not found`))}else if("background"!==R&&"sky"!==R)if(h.source){const X=y.sources&&y.sources[h.source],K=X&&Z(X.type);X?"vector"===K&&"raster"===R?s.push(new dr(g,h.source,`layer "${h.id}" requires a raster source`)):"raster"===K&&"raster"!==R?s.push(new dr(g,h.source,`layer "${h.id}" requires a vector source`)):"vector"!==K||h["source-layer"]?"raster-dem"===K&&"hillshade"!==R?s.push(new dr(g,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==R||!h.paint||!h.paint["line-gradient"]&&!h.paint["line-trim-offset"]||"geojson"===K&&X.lineMetrics||s.push(new dr(g,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new dr(g,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new dr(g,h.source,`source "${h.source}" not found`))}else s.push(new dr(g,h,'missing required property "source"'));return s=s.concat(v({key:g,value:h,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ll({key:`${g}.type`,value:h.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,object:h,objectKey:"type"}),filter:X=>xa(H({layerType:R},X)),layout:X=>v({layer:h,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":K=>Ge(H({layerType:R},K))}}),paint:X=>v({layer:h,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":K=>ls(H({layerType:R},K))}})}})),s}function me(c){const s=c.value,h=c.key,g=bs(s);return"string"!==g?[new dr(h,s,`string expected, ${g} found`)]:[]}const Ve={promoteId:function({key:c,value:s}){if("string"===bs(s))return me({key:c,value:s});{const h=[];for(const g in s)h.push(...me({key:`${c}.${g}`,value:s[g]}));return h}}};function Ee(c){const s=c.value,h=c.key,g=c.styleSpec,y=c.style;if(!s.type)return[new dr(h,s,'"type" is required')];const S=Z(s.type);let R;switch(S){case"vector":case"raster":case"raster-dem":return R=v({key:h,value:s,valueSpec:g[`source_${S.replace("-","_")}`],style:c.style,styleSpec:g,objectElementValidators:Ve}),R;case"geojson":if(R=v({key:h,value:s,valueSpec:g.source_geojson,style:y,styleSpec:g,objectElementValidators:Ve}),s.cluster)for(const G in s.clusterProperties){const[X,K]=s.clusterProperties[G],ce="string"==typeof X?[X,["accumulated"],["get",G]]:X;R.push(...Ie({key:`${h}.${G}.map`,value:K,expressionContext:"cluster-map"})),R.push(...Ie({key:`${h}.${G}.reduce`,value:ce,expressionContext:"cluster-reduce"}))}return R;case"video":return v({key:h,value:s,valueSpec:g.source_video,style:y,styleSpec:g});case"image":return v({key:h,value:s,valueSpec:g.source_image,style:y,styleSpec:g});case"canvas":return[new dr(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ni({key:`${h}.type`,value:s.type,valueSpec:{values:xn(g)},style:y,styleSpec:g})}}function xn(c){return c.source.reduce((s,h)=>{const g=c[h];return"enum"===g.type.type&&(s=s.concat(Object.keys(g.type.values))),s},[])}function vr(c){const s=c.value,h=c.styleSpec,g=h.light,y=c.style;let S=[];const R=bs(s);if(void 0===s)return S;if("object"!==R)return S=S.concat([new dr("light",s,`object expected, ${R} found`)]),S;for(const G in s){const X=G.match(/^(.*)-transition$/);S=S.concat(X&&g[X[1]]&&g[X[1]].transition?ll({key:G,value:s[G],valueSpec:h.transition,style:y,styleSpec:h}):g[G]?ll({key:G,value:s[G],valueSpec:g[G],style:y,styleSpec:h}):[new dr(G,s[G],`unknown property "${G}"`)])}return S}function Xr(c){const s=c.value,h=c.key,g=c.style,y=c.styleSpec,S=y.terrain;let R=[];const G=bs(s);if(void 0===s)return R;if("object"!==G)return R=R.concat([new dr("terrain",s,`object expected, ${G} found`)]),R;for(const X in s){const K=X.match(/^(.*)-transition$/);R=R.concat(K&&S[K[1]]&&S[K[1]].transition?ll({key:X,value:s[X],valueSpec:y.transition,style:g,styleSpec:y}):S[X]?ll({key:X,value:s[X],valueSpec:S[X],style:g,styleSpec:y}):[new dr(X,s[X],`unknown property "${X}"`)])}if(s.source){const X=g.sources&&g.sources[s.source],K=X&&Z(X.type);X?"raster-dem"!==K&&R.push(new dr(h,s.source,`terrain cannot be used with a source of type ${String(K)}, it only be used with a "raster-dem" source type`)):R.push(new dr(h,s.source,`source "${s.source}" not found`))}else R.push(new dr(h,s,'terrain is missing required property "source"'));return R}function hr(c){const s=c.value,h=c.style,g=c.styleSpec,y=g.fog;let S=[];const R=bs(s);if(void 0===s)return S;if("object"!==R)return S=S.concat([new dr("fog",s,`object expected, ${R} found`)]),S;for(const G in s){const X=G.match(/^(.*)-transition$/);S=S.concat(X&&y[X[1]]&&y[X[1]].transition?ll({key:G,value:s[G],valueSpec:g.transition,style:h,styleSpec:g}):y[G]?ll({key:G,value:s[G],valueSpec:y[G],style:h,styleSpec:g}):[new dr(G,s[G],`unknown property "${G}"`)])}return S}const So={"*":()=>[],array:O,boolean:function(c){const s=c.value,h=c.key,g=bs(s);return"boolean"!==g?[new dr(h,s,`boolean expected, ${g} found`)]:[]},number:W,color:function(c){const s=c.key,h=c.value,g=bs(h);return"string"!==g?[new dr(s,h,`color expected, ${g} found`)]:null===Wr(h)?[new dr(s,h,`color expected, "${h}" found`)]:[]},enum:ni,filter:xa,function:he,layer:se,object:v,source:Ee,light:vr,terrain:Xr,fog:hr,string:me,formatted:function(c){return 0===me(c).length?[]:Ie(c)},resolvedImage:function(c){return 0===me(c).length?[]:Ie(c)},projection:function(c){const s=c.value,h=c.styleSpec,g=h.projection,y=c.style;let S=[];const R=bs(s);if("object"===R)for(const G in s)S=S.concat(ll({key:G,value:s[G],valueSpec:g[G],style:y,styleSpec:h}));else"string"!==R&&(S=S.concat([new dr("projection",s,`object or string expected, ${R} found`)]));return S}};function ll(c){const s=c.value,h=c.valueSpec,g=c.styleSpec;return h.expression&&Fu(Z(s))?he(c):h.expression&&kl(J(s))?Ie(c):h.type&&So[h.type]?So[h.type](c):v(H({},c,{valueSpec:h.type?g[h.type]:h}))}function Hf(c){const s=c.value,h=c.key,g=me(c);return g.length||(-1===s.indexOf("{fontstack}")&&g.push(new dr(h,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&g.push(new dr(h,s,'"glyphs" url must include a "{range}" token'))),g}function Jd(c,s=N){return qo(ll({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,objectElementValidators:{glyphs:Hf,"*":()=>[]}}))}const n0=c=>qo(ls(c)),tm=c=>qo(Ge(c));function qo(c){return c.slice().sort((s,h)=>s.line&&h.line?s.line-h.line:0)}function Th(c,s){let h=!1;if(s&&s.length)for(const g of s)c.fire(new E(new Error(g.message))),h=!0;return h}var rc=mu,Ho=3;function mu(c,s,h){var g=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var y=new Int32Array(this.arrayBuffer);c=y[0],this.d=(s=y[1])+2*(h=y[2]);for(var S=0;S<this.d*this.d;S++){var R=y[Ho+S],G=y[Ho+S+1];g.push(R===G?null:y.subarray(R,G))}var X=y[Ho+g.length+1];this.keys=y.subarray(y[Ho+g.length],X),this.bboxes=y.subarray(X),this.insert=this._insertReadonly}else{this.d=s+2*h;for(var K=0;K<this.d*this.d;K++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=c,this.padding=h,this.scale=s/c,this.uid=0;var ce=h/s*c;this.min=-ce,this.max=c+ce}mu.prototype.insert=function(c,s,h,g,y){this._forEachCell(s,h,g,y,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(y)},mu.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},mu.prototype._insertCell=function(c,s,h,g,y,S){this.cells[y].push(S)},mu.prototype.query=function(c,s,h,g,y){var S=this.min,R=this.max;if(c<=S&&s<=S&&R<=h&&R<=g&&!y)return Array.prototype.slice.call(this.keys);var G=[];return this._forEachCell(c,s,h,g,this._queryCell,G,{},y),G},mu.prototype._queryCell=function(c,s,h,g,y,S,R,G){var X=this.cells[y];if(null!==X)for(var K=this.keys,ce=this.bboxes,pe=0;pe<X.length;pe++){var _e=X[pe];if(void 0===R[_e]){var Ae=4*_e;(G?G(ce[Ae+0],ce[Ae+1],ce[Ae+2],ce[Ae+3]):c<=ce[Ae+2]&&s<=ce[Ae+3]&&h>=ce[Ae+0]&&g>=ce[Ae+1])?(R[_e]=!0,S.push(K[_e])):R[_e]=!1}}},mu.prototype._forEachCell=function(c,s,h,g,y,S,R,G){for(var X=this._convertToCellCoord(c),K=this._convertToCellCoord(s),ce=this._convertToCellCoord(h),pe=this._convertToCellCoord(g),_e=X;_e<=ce;_e++)for(var Ae=K;Ae<=pe;Ae++){var Oe=this.d*Ae+_e;if((!G||G(this._convertFromCellCoord(_e),this._convertFromCellCoord(Ae),this._convertFromCellCoord(_e+1),this._convertFromCellCoord(Ae+1)))&&y.call(this,c,s,h,g,Oe,S,R,G))return}},mu.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},mu.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},mu.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,s=Ho+this.cells.length+1+1,h=0,g=0;g<this.cells.length;g++)h+=this.cells[g].length;var y=new Int32Array(s+h+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;for(var S=s,R=0;R<c.length;R++){var G=c[R];y[Ho+R]=S,y.set(G,S),S+=G.length}return y[Ho+c.length]=S,y.set(this.keys,S),y[Ho+c.length+1]=S+=this.keys.length,y.set(this.bboxes,S),S+=this.bboxes.length,y.buffer};var Qd=lt(rc);const ac={};function Tr(c,s,h={}){Object.defineProperty(c,"_classRegistryKey",{value:s,writeable:!1}),ac[s]={klass:c,omit:h.omit||[]}}Tr(Object,"Object"),Qd.serialize=function(c,s){const h=c.toArrayBuffer();return s&&s.push(h),{buffer:h}},Qd.deserialize=function(c){return new Qd(c.buffer)},Object.defineProperty(Qd,"name",{value:"Grid"}),Tr(Qd,"Grid"),Tr(va,"Color"),Tr(Error,"Error"),Tr(Dr,"AJAXError"),Tr(Ns,"ResolvedImage"),Tr(pu,"StylePropertyFunction"),Tr(ho,"StyleExpression",{omit:["_evaluator"]}),Tr(fu,"ZoomDependentExpression"),Tr(Gl,"ZoomConstantExpression"),Tr(ks,"CompoundExpression",{omit:["_evaluate"]});for(const c in tl)ac[tl[c]._classRegistryKey]||Tr(tl[c],`Expression${c}`);function im(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&"ArrayBuffer"===c.constructor.name)}function Bu(c){return j.ImageBitmap&&c instanceof j.ImageBitmap}function Pd(c,s){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(im(c)||Bu(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof j.ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const g of c)h.push(Pd(g,s));return h}if("object"==typeof c){const h=c.constructor,g=h._classRegistryKey;if(!g)throw new Error(`can't serialize object of unregistered class ${g}`);const y=h.serialize?h.serialize(c,s):{};if(!h.serialize){for(const S in c)c.hasOwnProperty(S)&&(ac[g].omit.indexOf(S)>=0||(y[S]=Pd(c[S],s)));c instanceof Error&&(y.message=c.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==g&&(y.$name=g),y}throw new Error("can't serialize object of type "+typeof c)}function Fd(c){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||im(c)||Bu(c)||ArrayBuffer.isView(c)||c instanceof j.ImageData)return c;if(Array.isArray(c))return c.map(Fd);if("object"==typeof c){const s=c.$name||"Object",{klass:h}=ac[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const g=Object.create(h.prototype);for(const y of Object.keys(c))"$name"!==y&&(g[y]=Fd(c[y]));return g}throw new Error("can't deserialize object of type "+typeof c)}const mr={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function uf(c){for(const s of c)if(eh(s.charCodeAt(0)))return!0;return!1}function r0(c){for(const s of c)if(!gu(s.charCodeAt(0)))return!1;return!0}function gu(c){return!(mr.Arabic(c)||mr["Arabic Supplement"](c)||mr["Arabic Extended-A"](c)||mr["Arabic Presentation Forms-A"](c)||mr["Arabic Presentation Forms-B"](c))}function eh(c){return!(746!==c&&747!==c&&(c<4352||!(mr["Bopomofo Extended"](c)||mr.Bopomofo(c)||mr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||mr["CJK Compatibility Ideographs"](c)||mr["CJK Compatibility"](c)||mr["CJK Radicals Supplement"](c)||mr["CJK Strokes"](c)||!(!mr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||12336===c)||mr["CJK Unified Ideographs Extension A"](c)||mr["CJK Unified Ideographs"](c)||mr["Enclosed CJK Letters and Months"](c)||mr["Hangul Compatibility Jamo"](c)||mr["Hangul Jamo Extended-A"](c)||mr["Hangul Jamo Extended-B"](c)||mr["Hangul Jamo"](c)||mr["Hangul Syllables"](c)||mr.Hiragana(c)||mr["Ideographic Description Characters"](c)||mr.Kanbun(c)||mr["Kangxi Radicals"](c)||mr["Katakana Phonetic Extensions"](c)||mr.Katakana(c)&&12540!==c||!(!mr["Halfwidth and Fullwidth Forms"](c)||65288===c||65289===c||65293===c||c>=65306&&c<=65310||65339===c||65341===c||65343===c||c>=65371&&c<=65503||65507===c||c>=65512&&c<=65519)||!(!mr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||mr["Unified Canadian Aboriginal Syllabics"](c)||mr["Unified Canadian Aboriginal Syllabics Extended"](c)||mr["Vertical Forms"](c)||mr["Yijing Hexagram Symbols"](c)||mr["Yi Syllables"](c)||mr["Yi Radicals"](c))))}function sc(c){return!(eh(c)||(s=c,mr["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||mr["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||mr["Letterlike Symbols"](s)||mr["Number Forms"](s)||mr["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||mr["Control Pictures"](s)&&9251!==s||mr["Optical Character Recognition"](s)||mr["Enclosed Alphanumerics"](s)||mr["Geometric Shapes"](s)||mr["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||mr["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||mr["CJK Symbols and Punctuation"](s)||mr.Katakana(s)||mr["Private Use Area"](s)||mr["CJK Compatibility Forms"](s)||mr["Small Form Variants"](s)||mr["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}function oc(c){return c>=1424&&c<=2303||mr["Arabic Presentation Forms-A"](c)||mr["Arabic Presentation Forms-B"](c)}function qm(c,s){return!(!s&&oc(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||mr.Khmer(c))}function Vc(c){for(const s of c)if(oc(s.charCodeAt(0)))return!0;return!1}const Vf="deferred",nm="loading",Cp="loaded";let jh=null,k="unavailable",f=null;const _=function(c){c&&"string"==typeof c&&c.indexOf("NetworkError")>-1&&(k="error"),jh&&jh(c)};function I(){Y.fire(new w("pluginStateChange",{pluginStatus:k,pluginURL:f}))}const Y=new M,V=function(){return k},Q=function(){if(k!==Vf||!f)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");k=nm,I(),f&&Ia({url:f},c=>{c?_(c):(k=Cp,I())})},re={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>k===Cp||null!=re.applyArabicShaping,isLoading:()=>k===nm,setState(c){k=c.pluginStatus,f=c.pluginURL},isParsed:()=>null!=re.applyArabicShaping&&null!=re.processBidirectionalText&&null!=re.processStyledBidirectionalText,getPluginURL:()=>f};class de{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.transition=h.transition,this.pitch=h.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(s){return function(h,g){for(const y of h)if(!qm(y.charCodeAt(0),g))return!1;return!0}(s,re.isLoaded())}}class be{constructor(s,h){this.property=s,this.value=h,this.expression=function(g,y){if(Fu(g))return new pu(g,y);if(kl(g)){const S=Kd(g,y);if("error"===S.result)throw new Error(S.value.map(R=>`${R.key}: ${R.message}`).join(", "));return S.value}{let S=g;return"string"==typeof g&&"color"===y.type&&(S=va.parse(g)),{kind:"constant",evaluate:()=>S}}}(void 0===h?s.specification.default:h,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(s,h,g){return this.property.possiblyEvaluate(this,s,h,g)}}class xe{constructor(s){this.property=s,this.value=new be(s,void 0)}transitioned(s,h){return new it(this.property,this.value,h,fr({},s.transition,this.transition),s.now)}untransitioned(){return new it(this.property,this.value,null,{},0)}}class Fe{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ka(this._values[s].value.value)}setValue(s,h){this._values.hasOwnProperty(s)||(this._values[s]=new xe(this._values[s].property)),this._values[s].value=new be(this._values[s].property,null===h?void 0:ka(h))}getTransition(s){return ka(this._values[s].transition)}setTransition(s,h){this._values.hasOwnProperty(s)||(this._values[s]=new xe(this._values[s].property)),this._values[s].transition=ka(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const g=this.getValue(h);void 0!==g&&(s[h]=g);const y=this.getTransition(h);void 0!==y&&(s[`${h}-transition`]=y)}return s}transitioned(s,h){const g=new ft(this._properties);for(const y of Object.keys(this._values))g._values[y]=this._values[y].transitioned(s,h._values[y]);return g}untransitioned(){const s=new ft(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class it{constructor(s,h,g,y,S){const R=y.delay||0,G=y.duration||0;S=S||0,this.property=s,this.value=h,this.begin=S+R,this.end=this.begin+G,s.specification.transition&&(y.delay||y.duration)&&(this.prior=g)}possiblyEvaluate(s,h,g){const y=s.now||0,S=this.value.possiblyEvaluate(s,h,g),R=this.prior;if(R){if(y>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(y<this.begin)return R.possiblyEvaluate(s,h,g);{const G=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(R.possiblyEvaluate(s,h,g),S,Ni(G))}}return S}}class ft{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,g){const y=new Tt(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,h,g);return y}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class yt{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return ka(this._values[s].value)}setValue(s,h){this._values[s]=new be(this._values[s].property,null===h?void 0:ka(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const g=this.getValue(h);void 0!==g&&(s[h]=g)}return s}possiblyEvaluate(s,h,g){const y=new Tt(this._properties);for(const S of Object.keys(this._values))y._values[S]=this._values[S].possiblyEvaluate(s,h,g);return y}}class bt{constructor(s,h,g){this.property=s,this.value=h,this.parameters=g}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,h,g,y){return this.property.evaluate(this.value,this.parameters,s,h,g,y)}}class Tt{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Ne{constructor(s){this.specification=s}possiblyEvaluate(s,h){return s.expression.evaluate(h)}interpolate(s,h,g){const y=td[this.specification.type];return y?y(s,h,g):s}}class _t{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,g,y){return new bt(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(h,null,{},g,y)}:s.expression,h)}interpolate(s,h,g){if("constant"!==s.value.kind||"constant"!==h.value.kind)return s;if(void 0===s.value.value||void 0===h.value.value)return new bt(this,{kind:"constant",value:void 0},s.parameters);const y=td[this.specification.type];return y?new bt(this,{kind:"constant",value:y(s.value.value,h.value.value,g)},s.parameters):s}evaluate(s,h,g,y,S,R){return"constant"===s.kind?s.value:s.evaluate(h,g,y,S,R)}}class zt{constructor(s){this.specification=s}possiblyEvaluate(s,h,g,y){return!!s.expression.evaluate(h,null,{},g,y)}interpolate(){return!1}}class Gt{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const h=new de(0,{});for(const g in s){const y=s[g];y.specification.overridable&&this.overridableProperties.push(g);const S=this.defaultPropertyValues[g]=new be(y,void 0),R=this.defaultTransitionablePropertyValues[g]=new xe(y);this.defaultTransitioningPropertyValues[g]=R.untransitioned(),this.defaultPossiblyEvaluatedValues[g]=S.possiblyEvaluate(h)}}}function pi(c,s){return 256*(c=Ki(Math.floor(c),0,255))+Ki(Math.floor(s),0,255)}Tr(_t,"DataDrivenProperty"),Tr(Ne,"DataConstantProperty"),Tr(zt,"ColorRampProperty");const hi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ri{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Oi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ai(c,s=1){let h=0,g=0;return{members:c.map(y=>{const S=hi[y.type].BYTES_PER_ELEMENT,R=h=Gi(h,Math.max(s,S)),G=y.components||1;return g=Math.max(g,S),h+=S*G,{name:y.name,type:y.type,components:G,offset:R}}),size:Gi(h,Math.max(g,s)),alignment:s}}function Gi(c,s){return Math.ceil(c/s)*s}class Gn extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,h)}emplace(s,h,g){const y=2*s;return this.int16[y+0]=h,this.int16[y+1]=g,s}}Gn.prototype.bytesPerElement=4,Tr(Gn,"StructArrayLayout2i4");class Hi extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,s,h,g)}emplace(s,h,g,y){const S=3*s;return this.int16[S+0]=h,this.int16[S+1]=g,this.int16[S+2]=y,s}}Hi.prototype.bytesPerElement=6,Tr(Hi,"StructArrayLayout3i6");class un extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,g,y){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,g,y)}emplace(s,h,g,y,S){const R=4*s;return this.int16[R+0]=h,this.int16[R+1]=g,this.int16[R+2]=y,this.int16[R+3]=S,s}}un.prototype.bytesPerElement=8,Tr(un,"StructArrayLayout4i8");class ki extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G){const X=this.length;return this.resize(X+1),this.emplace(X,s,h,g,y,S,R,G)}emplace(s,h,g,y,S,R,G,X){const K=6*s,ce=12*s,pe=3*s;return this.int16[K+0]=h,this.int16[K+1]=g,this.uint8[ce+4]=y,this.uint8[ce+5]=S,this.uint8[ce+6]=R,this.uint8[ce+7]=G,this.float32[pe+2]=X,s}}ki.prototype.bytesPerElement=12,Tr(ki,"StructArrayLayout2i4ub1f12");class An extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,g,y)}emplace(s,h,g,y,S){const R=4*s;return this.float32[R+0]=h,this.float32[R+1]=g,this.float32[R+2]=y,this.float32[R+3]=S,s}}An.prototype.bytesPerElement=16,Tr(An,"StructArrayLayout4f16");class Ui extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S){const R=this.length;return this.resize(R+1),this.emplace(R,s,h,g,y,S)}emplace(s,h,g,y,S,R){const G=6*s,X=3*s;return this.uint16[G+0]=h,this.uint16[G+1]=g,this.uint16[G+2]=y,this.uint16[G+3]=S,this.float32[X+2]=R,s}}Ui.prototype.bytesPerElement=12,Tr(Ui,"StructArrayLayout4ui1f12");class cn extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,g,y){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,g,y)}emplace(s,h,g,y,S){const R=4*s;return this.uint16[R+0]=h,this.uint16[R+1]=g,this.uint16[R+2]=y,this.uint16[R+3]=S,s}}cn.prototype.bytesPerElement=8,Tr(cn,"StructArrayLayout4ui8");class bn extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R){const G=this.length;return this.resize(G+1),this.emplace(G,s,h,g,y,S,R)}emplace(s,h,g,y,S,R,G){const X=6*s;return this.int16[X+0]=h,this.int16[X+1]=g,this.int16[X+2]=y,this.int16[X+3]=S,this.int16[X+4]=R,this.int16[X+5]=G,s}}bn.prototype.bytesPerElement=12,Tr(bn,"StructArrayLayout6i12");class Bn extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G,X,K,ce,pe,_e){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,s,h,g,y,S,R,G,X,K,ce,pe,_e)}emplace(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae){const Oe=12*s;return this.int16[Oe+0]=h,this.int16[Oe+1]=g,this.int16[Oe+2]=y,this.int16[Oe+3]=S,this.uint16[Oe+4]=R,this.uint16[Oe+5]=G,this.uint16[Oe+6]=X,this.uint16[Oe+7]=K,this.int16[Oe+8]=ce,this.int16[Oe+9]=pe,this.int16[Oe+10]=_e,this.int16[Oe+11]=Ae,s}}Bn.prototype.bytesPerElement=24,Tr(Bn,"StructArrayLayout4i4ui4i24");class Hn extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R){const G=this.length;return this.resize(G+1),this.emplace(G,s,h,g,y,S,R)}emplace(s,h,g,y,S,R,G){const X=10*s,K=5*s;return this.int16[X+0]=h,this.int16[X+1]=g,this.int16[X+2]=y,this.float32[K+2]=S,this.float32[K+3]=R,this.float32[K+4]=G,s}}Hn.prototype.bytesPerElement=20,Tr(Hn,"StructArrayLayout3i3f20");class ea extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}ea.prototype.bytesPerElement=4,Tr(ea,"StructArrayLayout1ul4");class wa extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae)}emplace(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe){const Ue=20*s,dt=10*s;return this.int16[Ue+0]=h,this.int16[Ue+1]=g,this.int16[Ue+2]=y,this.int16[Ue+3]=S,this.int16[Ue+4]=R,this.float32[dt+3]=G,this.float32[dt+4]=X,this.float32[dt+5]=K,this.float32[dt+6]=ce,this.int16[Ue+14]=pe,this.uint32[dt+8]=_e,this.uint16[Ue+18]=Ae,this.uint16[Ue+19]=Oe,s}}wa.prototype.bytesPerElement=40,Tr(wa,"StructArrayLayout5i4f1i1ul2ui40");class Ir extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G){const X=this.length;return this.resize(X+1),this.emplace(X,s,h,g,y,S,R,G)}emplace(s,h,g,y,S,R,G,X){const K=8*s;return this.int16[K+0]=h,this.int16[K+1]=g,this.int16[K+2]=y,this.int16[K+4]=S,this.int16[K+5]=R,this.int16[K+6]=G,this.int16[K+7]=X,s}}Ir.prototype.bytesPerElement=16,Tr(Ir,"StructArrayLayout3i2i2i16");class ca extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S){const R=this.length;return this.resize(R+1),this.emplace(R,s,h,g,y,S)}emplace(s,h,g,y,S,R){const G=4*s,X=8*s;return this.float32[G+0]=h,this.float32[G+1]=g,this.float32[G+2]=y,this.int16[X+6]=S,this.int16[X+7]=R,s}}ca.prototype.bytesPerElement=16,Tr(ca,"StructArrayLayout2f1f2i16");class Ua extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,g,y)}emplace(s,h,g,y,S){const R=12*s,G=3*s;return this.uint8[R+0]=h,this.uint8[R+1]=g,this.float32[G+1]=y,this.float32[G+2]=S,s}}Ua.prototype.bytesPerElement=12,Tr(Ua,"StructArrayLayout2ub2f12");class qr extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,s,h,g)}emplace(s,h,g,y){const S=3*s;return this.float32[S+0]=h,this.float32[S+1]=g,this.float32[S+2]=y,s}}qr.prototype.bytesPerElement=12,Tr(qr,"StructArrayLayout3f12");class ta extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,s,h,g)}emplace(s,h,g,y){const S=3*s;return this.uint16[S+0]=h,this.uint16[S+1]=g,this.uint16[S+2]=y,s}}ta.prototype.bytesPerElement=6,Tr(ta,"StructArrayLayout3ui6");class ns extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di){const li=this.length;return this.resize(li+1),this.emplace(li,s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di)}emplace(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di,li){const Qi=30*s,Xi=15*s,kn=60*s;return this.int16[Qi+0]=h,this.int16[Qi+1]=g,this.int16[Qi+2]=y,this.float32[Xi+2]=S,this.float32[Xi+3]=R,this.uint16[Qi+8]=G,this.uint16[Qi+9]=X,this.uint32[Xi+5]=K,this.uint32[Xi+6]=ce,this.uint32[Xi+7]=pe,this.uint16[Qi+16]=_e,this.uint16[Qi+17]=Ae,this.uint16[Qi+18]=Oe,this.float32[Xi+10]=Ue,this.float32[Xi+11]=dt,this.uint8[kn+48]=Rt,this.uint8[kn+49]=ii,this.uint8[kn+50]=Lt,this.uint32[Xi+13]=Jt,this.int16[Qi+28]=di,this.uint8[kn+58]=li,s}}ns.prototype.bytesPerElement=60,Tr(ns,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Xs extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di,li,Qi,Xi,kn,Kn,sn,Ln,Pn,jn){const tr=this.length;return this.resize(tr+1),this.emplace(tr,s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di,li,Qi,Xi,kn,Kn,sn,Ln,Pn,jn)}emplace(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt,Rt,ii,Lt,Jt,di,li,Qi,Xi,kn,Kn,sn,Ln,Pn,jn,tr){const vn=38*s,wr=19*s;return this.int16[vn+0]=h,this.int16[vn+1]=g,this.int16[vn+2]=y,this.float32[wr+2]=S,this.float32[wr+3]=R,this.int16[vn+8]=G,this.int16[vn+9]=X,this.int16[vn+10]=K,this.int16[vn+11]=ce,this.int16[vn+12]=pe,this.int16[vn+13]=_e,this.uint16[vn+14]=Ae,this.uint16[vn+15]=Oe,this.uint16[vn+16]=Ue,this.uint16[vn+17]=dt,this.uint16[vn+18]=Rt,this.uint16[vn+19]=ii,this.uint16[vn+20]=Lt,this.uint16[vn+21]=Jt,this.uint16[vn+22]=di,this.uint16[vn+23]=li,this.uint16[vn+24]=Qi,this.uint16[vn+25]=Xi,this.uint16[vn+26]=kn,this.uint16[vn+27]=Kn,this.uint16[vn+28]=sn,this.uint32[wr+15]=Ln,this.float32[wr+16]=Pn,this.float32[wr+17]=jn,this.float32[wr+18]=tr,s}}Xs.prototype.bytesPerElement=76,Tr(Xs,"StructArrayLayout3i2f6i15ui1ul3f76");class ro extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}ro.prototype.bytesPerElement=4,Tr(ro,"StructArrayLayout1f4");class Vs extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,g,y,S){const R=this.length;return this.resize(R+1),this.emplace(R,s,h,g,y,S)}emplace(s,h,g,y,S,R){const G=5*s;return this.float32[G+0]=h,this.float32[G+1]=g,this.float32[G+2]=y,this.float32[G+3]=S,this.float32[G+4]=R,s}}Vs.prototype.bytesPerElement=20,Tr(Vs,"StructArrayLayout5f20");class Ec extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,g,y){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,g,y)}emplace(s,h,g,y,S){const R=6*s;return this.uint32[3*s+0]=h,this.uint16[R+2]=g,this.uint16[R+3]=y,this.uint16[R+4]=S,s}}Ec.prototype.bytesPerElement=12,Tr(Ec,"StructArrayLayout1ul3ui12");class vl extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,h)}emplace(s,h,g){const y=2*s;return this.uint16[y+0]=h,this.uint16[y+1]=g,s}}vl.prototype.bytesPerElement=4,Tr(vl,"StructArrayLayout2ui4");class Uc extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}Uc.prototype.bytesPerElement=2,Tr(Uc,"StructArrayLayout1ui2");class Nu extends Oi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,h)}emplace(s,h,g){const y=2*s;return this.float32[y+0]=h,this.float32[y+1]=g,s}}Nu.prototype.bytesPerElement=8,Tr(Nu,"StructArrayLayout2f8");class Do extends ri{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Do.prototype.size=40;class Ds extends wa{get(s){return new Do(this,s)}}Tr(Ds,"CollisionBoxArray");class Ls extends ri{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Ls.prototype.size=60;class fo extends ns{get(s){return new Ls(this,s)}}Tr(fo,"PlacedSymbolArray");class lc extends ri{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(s){this._structArray.uint32[this._pos4+15]=s}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}lc.prototype.size=76;class po extends Xs{get(s){return new lc(this,s)}}Tr(po,"SymbolInstanceArray");class vu extends ro{getoffsetX(s){return this.float32[1*s+0]}}Tr(vu,"GlyphOffsetArray");class Sh extends Gn{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}Tr(Sh,"SymbolLineVertexArray");class iu extends ri{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}iu.prototype.size=12;class _d extends Ec{get(s){return new iu(this,s)}}Tr(_d,"FeatureIndexArray");class od extends vl{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}Tr(od,"FillExtrusionCentroidArray");const yd=Ai([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),xd=Ai([{name:"a_dash",components:4,type:"Uint16"}]);var Dh={exports:{}},As=function(c,s){var h,g,y,S,R,G,X,K;for(g=c.length-(h=3&c.length),y=s,R=3432918353,G=461845907,K=0;K<g;)X=255&c.charCodeAt(K)|(255&c.charCodeAt(++K))<<8|(255&c.charCodeAt(++K))<<16|(255&c.charCodeAt(++K))<<24,++K,y=27492+(65535&(S=5*(65535&(y=(y^=X=(65535&(X=(X=(65535&X)*R+(((X>>>16)*R&65535)<<16)&4294967295)<<15|X>>>17))*G+(((X>>>16)*G&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(X=0,h){case 3:X^=(255&c.charCodeAt(K+2))<<16;case 2:X^=(255&c.charCodeAt(K+1))<<8;case 1:y^=X=(65535&(X=(X=(65535&(X^=255&c.charCodeAt(K)))*R+(((X>>>16)*R&65535)<<16)&4294967295)<<15|X>>>17))*G+(((X>>>16)*G&65535)<<16)&4294967295}return y^=c.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0},vv=function(c,s){for(var h,g=c.length,y=s^g,S=0;g>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++S;switch(g){case 3:y^=(255&c.charCodeAt(S+2))<<16;case 2:y^=(255&c.charCodeAt(S+1))<<8;case 1:y=1540483477*(65535&(y^=255&c.charCodeAt(S)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};Dh.exports=As,Dh.exports.murmur3=As,Dh.exports.murmur2=vv;var rm=lt(Dh.exports);class Ah{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,g,y){this.ids.push(Zm(s)),this.positions.push(h,g,y)}getPositions(s){const h=Zm(s);let g=0,y=this.ids.length-1;for(;g<y;){const R=g+y>>1;this.ids[R]>=h?y=R:g=R+1}const S=[];for(;this.ids[g]===h;)S.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return S}static serialize(s,h){const g=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Uf(g,y,0,g.length-1),h&&h.push(g.buffer,y.buffer),{ids:g,positions:y}}static deserialize(s){const h=new Ah;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function Zm(c){const s=+c;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:rm(String(c))}function Uf(c,s,h,g){for(;h<g;){const y=c[h+g>>1];let S=h-1,R=g+1;for(;;){do{S++}while(c[S]<y);do{R--}while(c[R]>y);if(S>=R)break;Ep(c,S,R),Ep(s,3*S,3*R),Ep(s,3*S+1,3*R+1),Ep(s,3*S+2,3*R+2)}R-h<g-R?(Uf(c,s,h,R),h=R+1):(Uf(c,s,R+1,g),g=R)}}function Ep(c,s,h){const g=c[s];c[s]=c[h],c[h]=g}Tr(Ah,"FeaturePositionMap");class Tl{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,h){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,h),this.initialized=!0),!!this.location}}class kp extends Tl{constructor(s){super(s),this.current=0}set(s,h,g){this.fetchUniformLocation(s,h)&&this.current!==g&&(this.current=g,this.gl.uniform1f(this.location,g))}}class Tp extends Tl{constructor(s){super(s),this.current=[0,0,0,0]}set(s,h,g){this.fetchUniformLocation(s,h)&&(g[0]===this.current[0]&&g[1]===this.current[1]&&g[2]===this.current[2]&&g[3]===this.current[3]||(this.current=g,this.gl.uniform4f(this.location,g[0],g[1],g[2],g[3])))}}class Sp extends Tl{constructor(s){super(s),this.current=va.transparent}set(s,h,g){this.fetchUniformLocation(s,h)&&(g.r===this.current.r&&g.g===this.current.g&&g.b===this.current.b&&g.a===this.current.a||(this.current=g,this.gl.uniform4f(this.location,g.r,g.g,g.b,g.a)))}}const Km=new Float32Array(16),Jm=new Float32Array(9),Vl=new Float32Array(4);function ih(c){return[pi(255*c.r,255*c.g),pi(255*c.b,255*c.a)]}class df{constructor(s,h,g){this.value=s,this.uniformNames=h.map(y=>`u_${y}`),this.type=g}setUniform(s,h,g,y,S){h.set(s,S,y.constantOr(this.value))}getBinding(s,h){return"color"===this.type?new Sp(s):new kp(s)}}class Lo{constructor(s,h){this.uniformNames=h.map(g=>`u_${g}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,h,g,y,S){const R="u_pattern"===S||"u_dash"===S?this.pattern:"u_pixel_ratio"===S?this.pixelRatio:null;R&&h.set(s,S,R)}getBinding(s,h){return"u_pattern"===h||"u_dash"===h?new Tp(s):new kp(s)}}class Vo{constructor(s,h,g,y){this.expression=s,this.type=g,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:"color"===g?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,h,g,y,S,R){const G=this.paintVertexArray.length,X=this.expression.evaluate(new de(0),h,{},S,y,R);this.paintVertexArray.resize(s),this._setPaintValue(G,s,X)}updatePaintArray(s,h,g,y,S){const R=this.expression.evaluate({zoom:0},g,y,void 0,S);this._setPaintValue(s,h,R)}_setPaintValue(s,h,g){if("color"===this.type){const y=ih(g);for(let S=s;S<h;S++)this.paintVertexArray.emplace(S,y[0],y[1])}else{for(let y=s;y<h;y++)this.paintVertexArray.emplace(y,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ps{constructor(s,h,g,y,S,R){this.expression=s,this.uniformNames=h.map(G=>`u_${G}_t`),this.type=g,this.useIntegerZoom=y,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=h.map(G=>({name:`a_${G}`,type:"Float32",components:"color"===g?4:2,offset:0})),this.paintVertexArray=new R}populatePaintArray(s,h,g,y,S,R){const G=this.expression.evaluate(new de(this.zoom),h,{},S,y,R),X=this.expression.evaluate(new de(this.zoom+1),h,{},S,y,R),K=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(K,s,G,X)}updatePaintArray(s,h,g,y,S){const R=this.expression.evaluate({zoom:this.zoom},g,y,void 0,S),G=this.expression.evaluate({zoom:this.zoom+1},g,y,void 0,S);this._setPaintValue(s,h,R,G)}_setPaintValue(s,h,g,y){if("color"===this.type){const S=ih(g),R=ih(y);for(let G=s;G<h;G++)this.paintVertexArray.emplace(G,S[0],S[1],R[0],R[1])}else{for(let S=s;S<h;S++)this.paintVertexArray.emplace(S,g,y);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h,g,y,S){const R=this.useIntegerZoom?Math.floor(g.zoom):g.zoom,G=Ki(this.expression.interpolationFactor(R,this.zoom,this.zoom+1),0,1);h.set(s,S,G)}getBinding(s,h){return new kp(s)}}class Sl{constructor(s,h,g,y,S){this.expression=s,this.layerId=S,this.paintVertexAttributes=("array"===g?xd:yd).members;for(let R=0;R<h.length;++R);this.paintVertexArray=new y}populatePaintArray(s,h,g){const y=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(y,s,h.patterns&&h.patterns[this.layerId],g)}updatePaintArray(s,h,g,y,S,R){this._setPaintValues(s,h,g.patterns&&g.patterns[this.layerId],R)}_setPaintValues(s,h,g,y){if(!y||!g)return;const S=y[g];if(!S)return;const{tl:R,br:G,pixelRatio:X}=S;for(let K=s;K<h;K++)this.paintVertexArray.emplace(K,R[0],R[1],G[0],G[1],X)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nh{constructor(s,h,g=(()=>!0)){this.binders={},this._buffers=[];const y=[];for(const S in s.paint._values){if(!g(S))continue;const R=s.paint.get(S);if(!(R instanceof bt&&gl(R.property.specification)))continue;const G=bd(S,s.type),X=R.value,K=R.property.specification.type,ce=!!R.property.useIntegerZoom,pe="line-dasharray"===S||S.endsWith("pattern"),_e="line-dasharray"===S&&"constant"!==s.layout.get("line-cap").value.kind;if("constant"!==X.kind||_e)if("source"===X.kind||_e||pe){const Ae=_u(S,K,"source");this.binders[S]=pe?new Sl(X,G,K,Ae,s.id):new Vo(X,G,K,Ae),y.push(`/a_${S}`)}else{const Ae=_u(S,K,"composite");this.binders[S]=new Ps(X,G,K,ce,h,Ae),y.push(`/z_${S}`)}else this.binders[S]=pe?new Lo(X.value,G):new df(X.value,G,K),y.push(`/u_${S}`)}this.cacheKey=y.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof Vo||h instanceof Ps?h.maxValue:0}populatePaintArrays(s,h,g,y,S,R){for(const G in this.binders){const X=this.binders[G];(X instanceof Vo||X instanceof Ps||X instanceof Sl)&&X.populatePaintArray(s,h,g,y,S,R)}}setConstantPatternPositions(s){for(const h in this.binders){const g=this.binders[h];g instanceof Lo&&g.setConstantPatternPositions(s)}}updatePaintArrays(s,h,g,y,S,R){let G=!1;for(const X in s){const K=h.getPositions(X);for(const ce of K){const pe=g.feature(ce.index);for(const _e in this.binders){const Ae=this.binders[_e];if((Ae instanceof Vo||Ae instanceof Ps||Ae instanceof Sl)&&!0===Ae.expression.isStateDependent){const Oe=y.paint.get(_e);Ae.expression=Oe.value,Ae.updatePaintArray(ce.start,ce.end,pe,s[X],S,R),G=!0}}}}return G}defines(){const s=[];for(const h in this.binders){const g=this.binders[h];(g instanceof df||g instanceof Lo)&&s.push(...g.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Vo||g instanceof Ps||g instanceof Sl)for(let y=0;y<g.paintVertexAttributes.length;y++)s.push(g.paintVertexAttributes[y].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof df||g instanceof Lo||g instanceof Ps)for(const y of g.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const h=[];for(const g in this.binders){const y=this.binders[g];if(y instanceof df||y instanceof Lo||y instanceof Ps)for(const S of y.uniformNames)h.push({name:S,property:g,binding:y.getBinding(s,S)})}return h}setUniforms(s,h,g,y,S){for(const{name:R,property:G,binding:X}of g)this.binders[G].setUniform(s,X,S,y.get(G),R)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Vo||h instanceof Ps||h instanceof Sl)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(s){for(const h in this.binders){const g=this.binders[h];(g instanceof Vo||g instanceof Ps||g instanceof Sl)&&g.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof Vo||h instanceof Ps||h instanceof Sl)&&h.destroy()}}}class rh{constructor(s,h,g=(()=>!0)){this.programConfigurations={};for(const y of s)this.programConfigurations[y.id]=new nh(y,h,g);this.needsUpload=!1,this._featureMap=new Ah,this._bufferOffset=0}populatePaintArrays(s,h,g,y,S,R,G){for(const X in this.programConfigurations)this.programConfigurations[X].populatePaintArrays(s,h,y,S,R,G);void 0!==h.id&&this._featureMap.add(h.id,g,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,g,y,S){for(const R of g)this.needsUpload=this.programConfigurations[R.id].updatePaintArrays(s,this._featureMap,h,R,y,S)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const am={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function bd(c,s){return am[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}const Qm={"line-pattern":{source:Ui,composite:Ui},"fill-pattern":{source:Ui,composite:Ui},"fill-extrusion-pattern":{source:Ui,composite:Ui},"line-dasharray":{source:cn,composite:cn}},ah={color:{source:Nu,composite:An},number:{source:ro,composite:Nu}};function _u(c,s,h){const g=Qm[c];return g&&g[h]||ah[s][h]}Tr(df,"ConstantBinder"),Tr(Lo,"PatternConstantBinder"),Tr(Vo,"SourceExpressionBinder"),Tr(Sl,"PatternCompositeBinder"),Tr(Ps,"CompositeExpressionBinder"),Tr(nh,"ProgramConfiguration",{omit:["_buffers"]}),Tr(rh,"ProgramConfigurationSet");const jf="-transition";class Ul extends M{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&"sky"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new yt(h.layout)),h.paint)){this._transitionablePaint=new Fe(h.paint);for(const g in s.paint)this.setPaintProperty(g,s.paint[g],{validate:!1});for(const g in s.layout)this.setLayoutProperty(g,s.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tt(h.paint)}}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,g={}){null!=h&&this._validate(tm,`layers.${this.id}.layout.${s}`,s,h,g)||("visibility"!==s?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return Pr(s,jf)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,g={}){if(null!=h&&this._validate(n0,`layers.${this.id}.paint.${s}`,s,h,g))return!1;if(Pr(s,jf))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;{const y=this._transitionablePaint._values[s],S=y.value.isDataDriven(),R=y.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const G=this._transitionablePaint._values[s].value,X=G.isDataDriven(),K=Pr(s,"pattern")||"line-dasharray"===s;return X||S||K||this._handleOverridablePaintPropertyUpdate(s,R,G)}}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getProgramConfiguration(s){return null}_handleOverridablePaintPropertyUpdate(s,h,g){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Ya(s,(h,g)=>!(void 0===h||"layout"===g&&!Object.keys(h).length||"paint"===g&&!Object.keys(h).length))}_validate(s,h,g,y,S={}){return(!S||!1!==S.validate)&&Th(this,s.call(Jd,{key:h,layerType:this.type,objectKey:g,value:y,styleSpec:N,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof bt&&gl(h.property.specification)&&("source"===h.value.kind||"composite"===h.value.kind)&&h.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=on(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const eg=Ai([{name:"a_pos",components:2,type:"Int16"}],4),a0=Ai([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class nl{constructor(s=[]){this.segments=s}prepareSegment(s,h,g,y){let S=this.segments[this.segments.length-1];return s>nl.MAX_VERTEX_ARRAY_LENGTH&&pr(`Max vertices per segment is ${nl.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!S||S.vertexLength+s>nl.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==y)&&(S={vertexOffset:h.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},void 0!==y&&(S.sortKey=y),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,g,y){return new nl([{vertexOffset:s,primitiveOffset:h,vertexLength:g,primitiveLength:y,vaos:{},sortKey:0}])}}nl.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tr(nl,"SegmentVector");var zr=8192;class sh{constructor(s,h){s&&(h?this.setSouthWest(s).setNorthEast(h):4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof ao?new ao(s.lng,s.lat):ao.convert(s),this}setSouthWest(s){return this._sw=s instanceof ao?new ao(s.lng,s.lat):ao.convert(s),this}extend(s){const h=this._sw,g=this._ne;let y,S;if(s instanceof ao)y=s,S=s;else{if(!(s instanceof sh))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(sh.convert(s)):this.extend(ao.convert(s)):"object"==typeof s&&null!==s&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(ao.convert(s)):this;if(y=s._sw,S=s._ne,!y||!S)return this}return h||g?(h.lng=Math.min(y.lng,h.lng),h.lat=Math.min(y.lat,h.lat),g.lng=Math.max(S.lng,g.lng),g.lat=Math.max(S.lat,g.lat)):(this._sw=new ao(y.lng,y.lat),this._ne=new ao(S.lng,S.lat)),this}getCenter(){return new ao((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ao(this.getWest(),this.getNorth())}getSouthEast(){return new ao(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:h,lat:g}=ao.convert(s);let y=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(s){return!s||s instanceof sh?s:new sh(s)}}var oh=1e-6,kc=typeof Float32Array<"u"?Float32Array:Array;function sm(){var c=new kc(9);return kc!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function nu(c,s,h){var g=s[0],y=s[1],S=s[2],R=s[3],G=s[4],X=s[5],K=s[6],ce=s[7],pe=s[8],_e=h[0],Ae=h[1],Oe=h[2],Ue=h[3],dt=h[4],Rt=h[5],ii=h[6],Lt=h[7],Jt=h[8];return c[0]=_e*g+Ae*R+Oe*K,c[1]=_e*y+Ae*G+Oe*ce,c[2]=_e*S+Ae*X+Oe*pe,c[3]=Ue*g+dt*R+Rt*K,c[4]=Ue*y+dt*G+Rt*ce,c[5]=Ue*S+dt*X+Rt*pe,c[6]=ii*g+Lt*R+Jt*K,c[7]=ii*y+Lt*G+Jt*ce,c[8]=ii*S+Lt*X+Jt*pe,c}function _l(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function om(c,s){var h=s[0],g=s[1],y=s[2],S=s[3],R=s[4],G=s[5],X=s[6],K=s[7],ce=s[8],pe=s[9],_e=s[10],Ae=s[11],Oe=s[12],Ue=s[13],dt=s[14],Rt=s[15],ii=h*G-g*R,Lt=h*X-y*R,Jt=h*K-S*R,di=g*X-y*G,li=g*K-S*G,Qi=y*K-S*X,Xi=ce*Ue-pe*Oe,kn=ce*dt-_e*Oe,Kn=ce*Rt-Ae*Oe,sn=pe*dt-_e*Ue,Ln=pe*Rt-Ae*Ue,Pn=_e*Rt-Ae*dt,jn=ii*Pn-Lt*Ln+Jt*sn+di*Kn-li*kn+Qi*Xi;return jn?(c[0]=(G*Pn-X*Ln+K*sn)*(jn=1/jn),c[1]=(y*Ln-g*Pn-S*sn)*jn,c[2]=(Ue*Qi-dt*li+Rt*di)*jn,c[3]=(_e*li-pe*Qi-Ae*di)*jn,c[4]=(X*Kn-R*Pn-K*kn)*jn,c[5]=(h*Pn-y*Kn+S*kn)*jn,c[6]=(dt*Jt-Oe*Qi-Rt*Lt)*jn,c[7]=(ce*Qi-_e*Jt+Ae*Lt)*jn,c[8]=(R*Ln-G*Kn+K*Xi)*jn,c[9]=(g*Kn-h*Ln-S*Xi)*jn,c[10]=(Oe*li-Ue*Jt+Rt*ii)*jn,c[11]=(pe*Jt-ce*li-Ae*ii)*jn,c[12]=(G*kn-R*sn-X*Xi)*jn,c[13]=(h*sn-g*kn+y*Xi)*jn,c[14]=(Ue*Lt-Oe*di-dt*ii)*jn,c[15]=(ce*di-pe*Lt+_e*ii)*jn,c):null}function ru(c,s,h){var g=s[0],y=s[1],S=s[2],R=s[3],G=s[4],X=s[5],K=s[6],ce=s[7],pe=s[8],_e=s[9],Ae=s[10],Oe=s[11],Ue=s[12],dt=s[13],Rt=s[14],ii=s[15],Lt=h[0],Jt=h[1],di=h[2],li=h[3];return c[0]=Lt*g+Jt*G+di*pe+li*Ue,c[1]=Lt*y+Jt*X+di*_e+li*dt,c[2]=Lt*S+Jt*K+di*Ae+li*Rt,c[3]=Lt*R+Jt*ce+di*Oe+li*ii,c[4]=(Lt=h[4])*g+(Jt=h[5])*G+(di=h[6])*pe+(li=h[7])*Ue,c[5]=Lt*y+Jt*X+di*_e+li*dt,c[6]=Lt*S+Jt*K+di*Ae+li*Rt,c[7]=Lt*R+Jt*ce+di*Oe+li*ii,c[8]=(Lt=h[8])*g+(Jt=h[9])*G+(di=h[10])*pe+(li=h[11])*Ue,c[9]=Lt*y+Jt*X+di*_e+li*dt,c[10]=Lt*S+Jt*K+di*Ae+li*Rt,c[11]=Lt*R+Jt*ce+di*Oe+li*ii,c[12]=(Lt=h[12])*g+(Jt=h[13])*G+(di=h[14])*pe+(li=h[15])*Ue,c[13]=Lt*y+Jt*X+di*_e+li*dt,c[14]=Lt*S+Jt*K+di*Ae+li*Rt,c[15]=Lt*R+Jt*ce+di*Oe+li*ii,c}function yu(c,s,h){var g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue=h[0],dt=h[1],Rt=h[2];return s===c?(c[12]=s[0]*Ue+s[4]*dt+s[8]*Rt+s[12],c[13]=s[1]*Ue+s[5]*dt+s[9]*Rt+s[13],c[14]=s[2]*Ue+s[6]*dt+s[10]*Rt+s[14],c[15]=s[3]*Ue+s[7]*dt+s[11]*Rt+s[15]):(y=s[1],S=s[2],R=s[3],G=s[4],X=s[5],K=s[6],ce=s[7],pe=s[8],_e=s[9],Ae=s[10],Oe=s[11],c[0]=g=s[0],c[1]=y,c[2]=S,c[3]=R,c[4]=G,c[5]=X,c[6]=K,c[7]=ce,c[8]=pe,c[9]=_e,c[10]=Ae,c[11]=Oe,c[12]=g*Ue+G*dt+pe*Rt+s[12],c[13]=y*Ue+X*dt+_e*Rt+s[13],c[14]=S*Ue+K*dt+Ae*Rt+s[14],c[15]=R*Ue+ce*dt+Oe*Rt+s[15]),c}function xu(c,s,h){var g=h[0],y=h[1],S=h[2];return c[0]=s[0]*g,c[1]=s[1]*g,c[2]=s[2]*g,c[3]=s[3]*g,c[4]=s[4]*y,c[5]=s[5]*y,c[6]=s[6]*y,c[7]=s[7]*y,c[8]=s[8]*S,c[9]=s[9]*S,c[10]=s[10]*S,c[11]=s[11]*S,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c}function lm(c,s,h){var g=Math.sin(h),y=Math.cos(h),S=s[4],R=s[5],G=s[6],X=s[7],K=s[8],ce=s[9],pe=s[10],_e=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=S*y+K*g,c[5]=R*y+ce*g,c[6]=G*y+pe*g,c[7]=X*y+_e*g,c[8]=K*y-S*g,c[9]=ce*y-R*g,c[10]=pe*y-G*g,c[11]=_e*y-X*g,c}function Dp(c,s,h){var g=Math.sin(h),y=Math.cos(h),S=s[0],R=s[1],G=s[2],X=s[3],K=s[8],ce=s[9],pe=s[10],_e=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y-K*g,c[1]=R*y-ce*g,c[2]=G*y-pe*g,c[3]=X*y-_e*g,c[8]=S*g+K*y,c[9]=R*g+ce*y,c[10]=G*g+pe*y,c[11]=X*g+_e*y,c}function tg(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function cm(c,s,h){var g,y,S,R=h[0],G=h[1],X=h[2],K=Math.hypot(R,G,X);return K<oh?null:(R*=K=1/K,G*=K,X*=K,g=Math.sin(s),y=Math.cos(s),c[0]=R*R*(S=1-y)+y,c[1]=G*R*S+X*g,c[2]=X*R*S-G*g,c[3]=0,c[4]=R*G*S-X*g,c[5]=G*G*S+y,c[6]=X*G*S+R*g,c[7]=0,c[8]=R*X*S+G*g,c[9]=G*X*S-R*g,c[10]=X*X*S+y,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Ih=ru;function Mh(){var c=new kc(3);return kc!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function um(c){var s=new kc(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s}function hf(c){return Math.hypot(c[0],c[1],c[2])}function Bd(c,s,h){var g=new kc(3);return g[0]=c,g[1]=s,g[2]=h,g}function wd(c,s,h){return c[0]=s[0]+h[0],c[1]=s[1]+h[1],c[2]=s[2]+h[2],c}function $f(c,s,h){return c[0]=s[0]-h[0],c[1]=s[1]-h[1],c[2]=s[2]-h[2],c}function jl(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c}function cc(c,s,h){return c[0]=Math.min(s[0],h[0]),c[1]=Math.min(s[1],h[1]),c[2]=Math.min(s[2],h[2]),c}function Nd(c,s,h){return c[0]=Math.max(s[0],h[0]),c[1]=Math.max(s[1],h[1]),c[2]=Math.max(s[2],h[2]),c}function au(c,s,h){return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c}function Cd(c,s,h,g){return c[0]=s[0]+h[0]*g,c[1]=s[1]+h[1]*g,c[2]=s[2]+h[2]*g,c}function $l(c,s){var h=s[0],g=s[1],y=s[2],S=h*h+g*g+y*y;return S>0&&(S=1/Math.sqrt(S)),c[0]=s[0]*S,c[1]=s[1]*S,c[2]=s[2]*S,c}function bu(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]}function Ap(c,s,h){var g=s[0],y=s[1],S=s[2],R=h[0],G=h[1],X=h[2];return c[0]=y*X-S*G,c[1]=S*R-g*X,c[2]=g*G-y*R,c}function rl(c,s,h){var g=s[0],y=s[1],S=s[2],R=h[3]*g+h[7]*y+h[11]*S+h[15];return c[0]=(h[0]*g+h[4]*y+h[8]*S+h[12])/(R=R||1),c[1]=(h[1]*g+h[5]*y+h[9]*S+h[13])/R,c[2]=(h[2]*g+h[6]*y+h[10]*S+h[14])/R,c}function ig(c,s,h){var g=h[0],y=h[1],S=h[2],R=s[0],G=s[1],X=s[2],K=y*X-S*G,ce=S*R-g*X,pe=g*G-y*R,_e=y*pe-S*ce,Ae=S*K-g*pe,Oe=g*ce-y*K,Ue=2*h[3];return ce*=Ue,pe*=Ue,Ae*=2,Oe*=2,c[0]=R+(K*=Ue)+(_e*=2),c[1]=G+ce+Ae,c[2]=X+pe+Oe,c}var ld,Ed=$f,s0=jl,_v=hf;function ng(c,s,h){return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c[3]=s[3]*h,c}function o0(c,s){var h=s[0],g=s[1],y=s[2],S=s[3],R=h*h+g*g+y*y+S*S;return R>0&&(R=1/Math.sqrt(R)),c[0]=h*R,c[1]=g*R,c[2]=y*R,c[3]=S*R,c}function ff(c,s,h){var g=s[0],y=s[1],S=s[2],R=s[3];return c[0]=h[0]*g+h[4]*y+h[8]*S+h[12]*R,c[1]=h[1]*g+h[5]*y+h[9]*S+h[13]*R,c[2]=h[2]*g+h[6]*y+h[10]*S+h[14]*R,c[3]=h[3]*g+h[7]*y+h[11]*S+h[15]*R,c}function zd(){var c=new kc(4);return kc!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function dm(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function hm(c,s,h){h*=.5;var g=s[0],y=s[1],S=s[2],R=s[3],G=Math.sin(h),X=Math.cos(h);return c[0]=g*X+R*G,c[1]=y*X+S*G,c[2]=S*X-y*G,c[3]=R*X-g*G,c}function fm(c,s,h){h*=.5;var g=s[0],y=s[1],S=s[2],R=s[3],G=Math.sin(h),X=Math.cos(h);return c[0]=g*X-S*G,c[1]=y*X+R*G,c[2]=S*X+g*G,c[3]=R*X-y*G,c}Mh(),ld=new kc(4),kc!=Float32Array&&(ld[0]=0,ld[1]=0,ld[2]=0,ld[3]=0);var pm=o0;Mh(),Bd(1,0,0),Bd(0,1,0),zd(),zd(),sm();const Wf=Ai([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ba}=Wf,Ip=Ai([{name:"a_pos_3",components:3,type:"Int16"}]);var pf=Ai([{name:"a_pos",type:"Int16",components:2}]);class Rh{constructor(s,h){this.pos=s,this.dir=h}intersectsPlane(s,h,g){const y=bu(h,this.dir);if(Math.abs(y)<1e-6)return!1;const S=((s[0]-this.pos[0])*h[0]+(s[1]-this.pos[1])*h[1]+(s[2]-this.pos[2])*h[2])/y;return g[0]=this.pos[0]+this.dir[0]*S,g[1]=this.pos[1]+this.dir[1]*S,g[2]=this.pos[2]+this.dir[2]*S,!0}closestPointOnSphere(s,h,g){if(Ue=(Ae=this.pos)[0],dt=Ae[1],Rt=Ae[2],ii=(Oe=s)[0],Lt=Oe[1],Jt=Oe[2],Math.abs(Ue-ii)<=oh*Math.max(1,Math.abs(Ue),Math.abs(ii))&&Math.abs(dt-Lt)<=oh*Math.max(1,Math.abs(dt),Math.abs(Lt))&&Math.abs(Rt-Jt)<=oh*Math.max(1,Math.abs(Rt),Math.abs(Jt))||0===h)return g[0]=g[1]=g[2]=0,!1;var Ae,Oe,Ue,dt,Rt,ii,Lt,Jt;const[y,S,R]=this.dir,G=this.pos[0]-s[0],X=this.pos[1]-s[1],K=this.pos[2]-s[2],ce=y*y+S*S+R*R,pe=2*(G*y+X*S+K*R),_e=pe*pe-4*ce*(G*G+X*X+K*K-h*h);if(_e<0){const Ae=Math.max(-pe/2,0),Oe=G+y*Ae,Ue=X+S*Ae,dt=K+R*Ae,Rt=Math.hypot(Oe,Ue,dt);return g[0]=Oe*h/Rt,g[1]=Ue*h/Rt,g[2]=dt*h/Rt,!1}{const Ae=(-pe-Math.sqrt(_e))/(2*ce);if(Ae<0){const Oe=Math.hypot(G,X,K);return g[0]=G*h/Oe,g[1]=X*h/Oe,g[2]=K*h/Oe,!1}return g[0]=G+y*Ae,g[1]=X+S*Ae,g[2]=K+R*Ae,!0}}}class rg{constructor(s,h,g,y,S){this.TL=s,this.TR=h,this.BR=g,this.BL=y,this.horizon=S}static fromInvProjectionMatrix(s,h,g){const y=[-1,1,1],S=[1,1,1],R=[1,-1,1],G=[-1,-1,1],X=rl(y,y,s),K=rl(S,S,s),ce=rl(R,R,s),pe=rl(G,G,s);return new rg(X,K,ce,pe,h/g)}}class Xf{constructor(s,h){this.points=s,this.planes=h}static fromInvProjectionMatrix(s,h,g,y){const S=Math.pow(2,g),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(X=>{const K=ff([],X,s),ce=1/K[3]/h*S;return(pe=K)[0]=(_e=K)[0]*(Ae=[ce,ce,y?1/K[3]:ce,ce])[0],pe[1]=_e[1]*Ae[1],pe[2]=_e[2]*Ae[2],pe[3]=_e[3]*Ae[3],pe;var pe,_e,Ae}),G=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(X=>{const K=$l([],Ap([],Ed([],R[X[0]],R[X[1]]),Ed([],R[X[2]],R[X[1]]))),ce=-bu(K,R[X[1]]);return K.concat(ce)});return new Xf(R,G)}}class jc{static fromPoints(s){const h=[1/0,1/0,1/0],g=[-1/0,-1/0,-1/0];for(const y of s)cc(h,h,y),Nd(g,g,y);return new jc(h,g)}static applyTransform(s,h){const g=s.getCorners();for(let y=0;y<g.length;++y)rl(g[y],g[y],h);return jc.fromPoints(g)}constructor(s,h){this.min=s,this.max=h,this.center=au([],wd([],this.min,this.max),.5)}quadrant(s){const h=[s%2==0,s<2],g=um(this.min),y=um(this.max);for(let S=0;S<h.length;S++)g[S]=h[S]?this.min[S]:this.center[S],y[S]=h[S]?this.center[S]:this.max[S];return y[2]=this.max[2],new jc(g,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,h=this.max;return[[s[0],s[1],s[2]],[h[0],s[1],s[2]],[h[0],h[1],s[2]],[s[0],h[1],s[2]],[s[0],s[1],h[2]],[h[0],s[1],h[2]],[h[0],h[1],h[2]],[s[0],h[1],h[2]]]}intersects(s){const h=this.getCorners();let g=!0;for(let y=0;y<s.planes.length;y++){const S=s.planes[y];let R=0;for(let G=0;G<h.length;G++)R+=bu(S,h[G])+S[3]>=0;if(0===R)return 0;R!==h.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let S=Number.MAX_VALUE,R=-Number.MAX_VALUE;for(let G=0;G<s.points.length;G++){const X=s.points[G][y]-this.min[y];S=Math.min(S,X),R=Math.max(R,X)}if(R<0||S>this.max[y]-this.min[y])return 0}return 1}}const Tc=5,l0=6,Yd=zr/Math.PI/2,c0=16383,qf=[64,32,16],kd=-Yd,Td=Yd,yv=[new jc([kd,kd,kd],[Td,Td,Td]),new jc([kd,kd,kd],[0,0,Td]),new jc([0,kd,kd],[Td,0,Td]),new jc([kd,0,kd],[0,Td,Td]),new jc([0,0,kd],[Td,Td,Td])];function cd(c){return c*Yd/zu}function su(c,s,h,g=!0){const y=au([],c._camera.position,c.worldSize),S=[s,h,1,1];ff(S,S,c.pixelMatrixInverse),ng(S,S,1/S[3]);const R=$l([],Ed([],S,y)),G=c.globeMatrix,X=[G[12],G[13],G[14]],K=Ed([],X,y),ce=hf(K),pe=$l([],K),_e=c.worldSize/(2*Math.PI),Ae=bu(pe,R),Oe=Math.asin(_e/ce);if(Oe<Math.acos(Ae)){if(!g)return null;const Kn=[],sn=[];au(Kn,R,ce/Ae),$l(sn,Ed(sn,Kn,K)),$l(R,wd(R,K,au(R,sn,Math.tan(Oe)*ce)))}const Ue=[];new Rh(y,R).closestPointOnSphere(X,_e,Ue);const dt=$l([],ur(G,0)),Rt=$l([],ur(G,1)),ii=$l([],ur(G,2)),Lt=bu(dt,Ue),Jt=bu(Rt,Ue),di=bu(ii,Ue),li=It(Math.asin(-Jt/_e));let Qi=It(Math.atan2(Lt,di));Qi=c.center.lng+function(Kn,sn){const Ln=(sn-Kn+180)%360-180;return Ln<-180?Ln+360:Ln}(c.center.lng,Qi);const Xi=ch(Qi),kn=Ki(uh(li),0,1);return new Jf(Xi,kn)}class ag{constructor(s,h,g){this.a=Ed([],s,g),this.b=Ed([],h,g),this.center=g;const y=$l([],this.a),S=$l([],this.b);this.angle=Math.acos(bu(y,S))}}function mm(c,s){if(0===c.angle)return null;let h;return h=0===c.a[s]?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[s]/c.a[s]/Math.sin(c.angle)-1/Math.tan(c.angle)),h<0||h>1?null:function(g,y,S,R){const G=Math.sin(S);return g*(Math.sin((1-R)*S)/G)+y*(Math.sin(R*S)/G)}(c.a[s],c.b[s],c.angle,Ki(h,0,1))+c.center[s]}function Sd(c){if(c.z<=1)return yv[c.z+2*c.y+c.x];const s=sg(Zf(c));return jc.fromPoints(s)}function gf(c,s,h){return au(c,c,1-h),Cd(c,c,s,h)}function u0(c,s){const h=lh(s.zoom);if(0===h)return Sd(c);const g=Zf(c),y=sg(g),S=ch(g.getWest())*s.worldSize,R=ch(g.getEast())*s.worldSize,G=uh(g.getNorth())*s.worldSize,X=uh(g.getSouth())*s.worldSize,K=[S,G,0],ce=[R,G,0],pe=[S,X,0],_e=[R,X,0],Ae=om([],s.globeMatrix);return rl(K,K,Ae),rl(ce,ce,Ae),rl(pe,pe,Ae),rl(_e,_e,Ae),y[0]=gf(y[0],pe,h),y[1]=gf(y[1],_e,h),y[2]=gf(y[2],ce,h),y[3]=gf(y[3],K,h),jc.fromPoints(y)}function vf(c,s,h){for(const g of c)rl(g,g,s),au(g,g,h)}function Zf({x:c,y:s,z:h}){const g=1/(1<<h),y=new ao(ud(c*g),Sc((s+1)*g)),S=new ao(ud((c+1)*g),Sc(s*g));return new sh(y,S)}function sg(c){const s=fi(c.getNorth()),h=fi(c.getSouth()),g=Math.cos(s),y=Math.cos(h),S=Math.sin(s),R=Math.sin(h),G=c.getWest(),X=c.getEast();return[_f(y,R,G),_f(y,R,X),_f(g,S,X),_f(g,S,G)]}function _f(c,s,h,g=Yd){return h=fi(h),[c*Math.sin(h)*g,-s*g,c*Math.cos(h)*g]}function yf(c,s,h){return _f(Math.cos(fi(c)),Math.sin(fi(c)),s,h)}function Mp(c,s,h,g){const y=1<<h.z,S=(c/zr+h.x)/y;return yf(Sc((s/zr+h.y)/y),ud(S),g)}function Rp({min:c,max:s}){return c0/Math.max(s[0]-c[0],s[1]-c[1],s[2]-c[2])}const og=new Float64Array(16);function Kf(c){const s=Rp(c),h=tg(og,[s,s,s]);return yu(h,h,((g=[])[0]=-(y=c.min)[0],g[1]=-y[1],g[2]=-y[2],g));var g,y}function gm(c){const s=(g=c.min,(h=og)[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=g[0],h[13]=g[1],h[14]=g[2],h[15]=1,h);var h,g;const y=1/Rp(c);return xu(s,s,[y,y,y])}function lg(c,s,h,g,y){const S=function(X){const K=zr/(2*Math.PI);return X/(2*Math.PI)/K}(h),R=[c,s,-h/(2*Math.PI)],G=_l(new Float64Array(16));return yu(G,G,R),xu(G,G,[S,S,S]),lm(G,G,fi(-y)),Dp(G,G,fi(-g)),G}function lh(c){return tn(Tc,l0,c)}function vm(c,s){const h=yf(s.lat,s.lng);return R=(y=$f([],function(Oe){const Ue=yf(Oe._center.lat,Oe._center.lng);let dt=Ap([],Bd(0,1,0),Ue);const Rt=cm([],-Oe.angle,Ue);dt=rl(dt,dt,Rt),cm(Rt,-Oe._pitch,dt);const ii=$l([],Ue);return au(ii,ii,cd(Oe.cameraToCenterDistance/Oe.pixelsPerMeter)),rl(ii,ii,Rt),wd([],Ue,ii)}(c),h))[0],G=y[1],X=y[2],K=(S=h)[0],ce=S[1],pe=S[2],Ae=(_e=Math.sqrt(R*R+G*G+X*X)*Math.sqrt(K*K+ce*ce+pe*pe))&&bu(y,S)/_e,Math.acos(Math.min(Math.max(Ae,-1),1));var y,S,R,G,X,K,ce,pe,_e,Ae}function _m(c,s){return vm(c,s)>Math.PI/2*1.01}const cg=fi(85),ym=Math.cos(cg),h0=Math.sin(cg),zu=6371008.8,Wh=2*Math.PI*zu;class Xh{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xh(yn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,g=this.lat*h,y=s.lat*h,S=Math.sin(g)*Math.sin(y)+Math.cos(g)*Math.cos(y)*Math.cos((s.lng-this.lng)*h);return zu*Math.acos(Math.min(S,1))}toBounds(s=0){const h=360*s/40075017,g=h/Math.cos(Math.PI/180*this.lat);return new sh(new Xh(this.lng-g,this.lat-h),new Xh(this.lng+g,this.lat+h))}toEcef(s){const h=cd(s);return yf(this.lat,this.lng,Yd+h)}static convert(s){if(s instanceof Xh)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new Xh(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new Xh(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ao=Xh;function ug(c){return Wh*Math.cos(c*Math.PI/180)}function ch(c){return(180+c)/360}function uh(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Gd(c,s){return c/ug(s)}function ud(c){return 360*c-180}function Sc(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function dg(c,s){return c*ug(Sc(s))}const Dc=85.051129;function f0(c){return 1/Math.cos(c*Math.PI/180)}class Jf{constructor(s,h,g=0){this.x=+s,this.y=+h,this.z=+g}static fromLngLat(s,h=0){const g=ao.convert(s);return new Jf(ch(g.lng),uh(g.lat),Gd(h,g.lat))}toLngLat(){return new ao(ud(this.x),Sc(this.y))}toAltitude(){return dg(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Wh*f0(Sc(this.y))}}function hg(c,s,h,g,y,S,R,G,X){const K=(s+g)/2,ce=(h+y)/2,pe=new Dt(K,ce);G(pe),function(_e,Ae,Oe,Ue,dt,Rt){const ii=Oe-dt,Lt=Ue-Rt;return Math.abs((Ue-Ae)*ii-(Oe-_e)*Lt)/Math.hypot(ii,Lt)}(pe.x,pe.y,S.x,S.y,R.x,R.y)>=X?(hg(c,s,h,K,ce,S,pe,G,X),hg(c,K,ce,g,y,pe,R,G,X)):c.push(R)}function fg(c,s,h){let g=c[0],y=g.x,S=g.y;s(g);const R=[g];for(let G=1;G<c.length;G++){const X=c[G],{x:K,y:ce}=X;s(X),hg(R,y,S,K,ce,g,X,s,h),y=K,S=ce,g=X}return R}function xm(c,s,h,g){if(g(s,h)){const y=s.add(h)._mult(.5);xm(c,s,y,g),xm(c,y,h,g)}else c.push(h)}function p0(c,s){let h=c[0];const g=[h];for(let y=1;y<c.length;y++){const S=c[y];xm(g,h,S,s),h=S}return g}const pg=Math.pow(2,14)-1,m0=-pg-1;function xv(c,s){const h=Math.round(c.x*s),g=Math.round(c.y*s);return c.x=Ki(h,m0,pg),c.y=Ki(g,m0,pg),(h<c.x||h>c.x+1||g<c.y||g>c.y+1)&&pr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function Oh(c,s,h){const g=c.loadGeometry(),y=c.extent,S=zr/y;if(s&&h&&h.projection.isReprojectedInTileSpace){const R=1<<s.z,{scale:G,x:X,y:K,projection:ce}=h,pe=_e=>{const Ae=ud((s.x+_e.x/y)/R),Oe=Sc((s.y+_e.y/y)/R),Ue=ce.project(Ae,Oe);_e.x=(Ue.x*G-X)*y,_e.y=(Ue.y*G-K)*y};for(let _e=0;_e<g.length;_e++)if(1!==c.type)g[_e]=fg(g[_e],pe,1);else{const Ae=[];for(const Oe of g[_e])Oe.x<0||Oe.x>=y||Oe.y<0||Oe.y>=y||(pe(Oe),Ae.push(Oe));g[_e]=Ae}}for(const R of g)for(const G of R)xv(G,S);return g}function wu(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Oh(c):[]}}function Op(c,s,h,g,y){c.emplaceBack(2*s+(g+1)/2,2*h+(y+1)/2)}function Lp(c,s,h){c.emplaceBack(s.x,s.y,s.z,16384*h[0],16384*h[1],16384*h[2])}class bm{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new Gn,this.indexArray=new ta,this.segments=new nl,this.programConfigurations=new rh(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,g,y){const S=this.layers[0],R=[];let G=null;"circle"===S.type&&(G=S.layout.get("circle-sort-key"));for(const{feature:K,id:ce,index:pe,sourceLayerIndex:_e}of s){const Ae=this.layers[0]._featureFilter.needGeometry,Oe=wu(K,Ae);if(!this.layers[0]._featureFilter.filter(new de(this.zoom),Oe,g))continue;const Ue=G?G.evaluate(Oe,{},g):void 0,dt={id:ce,properties:K.properties,type:K.type,sourceLayerIndex:_e,index:pe,geometry:Ae?Oe.geometry:Oh(K,g,y),patterns:{},sortKey:Ue};R.push(dt)}G&&R.sort((K,ce)=>K.sortKey-ce.sortKey);let X=null;"globe"===y.projection.name&&(this.globeExtVertexArray=new bn,X=y.projection);for(const K of R){const{geometry:ce,index:pe,sourceLayerIndex:_e}=K,Ae=s[pe].feature;this.addFeature(K,ce,pe,h.availableImages,g,X),h.featureIndex.insert(Ae,ce,pe,_e,this.index)}}update(s,h,g,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,g,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,eg.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,a0.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,h,g,y,S,R){for(const G of h)for(const X of G){const K=X.x,ce=X.y;if(K<0||K>=zr||ce<0||ce>=zr)continue;if(R){const Ae=R.projectTilePoint(K,ce,S),Oe=R.upVector(S,K,ce),Ue=this.globeExtVertexArray;Lp(Ue,Ae,Oe),Lp(Ue,Ae,Oe),Lp(Ue,Ae,Oe),Lp(Ue,Ae,Oe)}const pe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),_e=pe.vertexLength;Op(this.layoutVertexArray,K,ce,-1,-1),Op(this.layoutVertexArray,K,ce,1,-1),Op(this.layoutVertexArray,K,ce,1,1),Op(this.layoutVertexArray,K,ce,-1,1),this.indexArray.emplaceBack(_e,_e+1,_e+2),this.indexArray.emplaceBack(_e,_e+2,_e+3),pe.vertexLength+=4,pe.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,{},y,S)}}function Dl(c,s){for(let h=0;h<c.length;h++)if(xf(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(xf(c,s[h]))return!0;return!!Cm(c,s)}function wm(c,s,h){return!!xf(c,s)||!!Lh(s,c,h)}function uc(c,s){if(1===c.length)return qh(s,c[0]);for(let h=0;h<s.length;h++){const g=s[h];for(let y=0;y<g.length;y++)if(xf(c,g[y]))return!0}for(let h=0;h<c.length;h++)if(qh(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(Cm(c,s[h]))return!0;return!1}function g0(c,s,h){if(c.length>1){if(Cm(c,s))return!0;for(let g=0;g<s.length;g++)if(Lh(s[g],c,h))return!0}for(let g=0;g<c.length;g++)if(Lh(c[g],s,h))return!0;return!1}function Cm(c,s){if(0===c.length||0===s.length)return!1;for(let h=0;h<c.length-1;h++){const g=c[h],y=c[h+1];for(let S=0;S<s.length-1;S++)if(bv(g,y,s[S],s[S+1]))return!0}return!1}function bv(c,s,h,g){return $n(c,h,g)!==$n(s,h,g)&&$n(c,s,h)!==$n(c,s,g)}function Lh(c,s,h){const g=h*h;if(1===s.length)return c.distSqr(s[0])<g;for(let y=1;y<s.length;y++)if(mg(c,s[y-1],s[y])<g)return!0;return!1}function mg(c,s,h){const g=s.distSqr(h);if(0===g)return c.distSqr(s);const y=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/g;return c.distSqr(y<0?s:y>1?h:h.sub(s)._mult(y)._add(s))}function qh(c,s){let h,g,y,S=!1;for(let R=0;R<c.length;R++){h=c[R];for(let G=0,X=h.length-1;G<h.length;X=G++)g=h[G],y=h[X],g.y>s.y!=y.y>s.y&&s.x<(y.x-g.x)*(s.y-g.y)/(y.y-g.y)+g.x&&(S=!S)}return S}function xf(c,s){let h=!1;for(let g=0,y=c.length-1;g<c.length;y=g++){const S=c[g],R=c[y];S.y>s.y!=R.y>s.y&&s.x<(R.x-S.x)*(s.y-S.y)/(R.y-S.y)+S.x&&(h=!h)}return h}function Em(c,s,h,g,y){for(const R of c)if(s<=R.x&&h<=R.y&&g>=R.x&&y>=R.y)return!0;const S=[new Dt(s,h),new Dt(s,y),new Dt(g,y),new Dt(g,h)];if(c.length>2)for(const R of S)if(xf(c,R))return!0;for(let R=0;R<c.length-1;R++)if(bf(c[R],c[R+1],S))return!0;return!1}function bf(c,s,h){const g=h[0],y=h[2];if(c.x<g.x&&s.x<g.x||c.x>y.x&&s.x>y.x||c.y<g.y&&s.y<g.y||c.y>y.y&&s.y>y.y)return!1;const S=$n(c,s,h[0]);return S!==$n(c,s,h[1])||S!==$n(c,s,h[2])||S!==$n(c,s,h[3])}function Zh(c,s,h){const g=s.paint.get(c).value;return"constant"===g.kind?g.value:h.programConfigurations.get(s.id).getMaxValue(c)}function Qf(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function gg(c,s,h,g,y){if(!s[0]&&!s[1])return c;const S=Dt.convert(s)._mult(y);"viewport"===h&&S._rotate(-g);const R=[];for(let G=0;G<c.length;G++)R.push(c[G].sub(S));return R}function km(c,s,h,g){const y=Dt.convert(c)._mult(g);return"viewport"===s&&y._rotate(-h),y}Tr(bm,"CircleBucket",{omit:["layers"]});const v0=new Gt({"circle-sort-key":new _t(N.layout_circle["circle-sort-key"])});var _0={paint:new Gt({"circle-radius":new _t(N.paint_circle["circle-radius"]),"circle-color":new _t(N.paint_circle["circle-color"]),"circle-blur":new _t(N.paint_circle["circle-blur"]),"circle-opacity":new _t(N.paint_circle["circle-opacity"]),"circle-translate":new Ne(N.paint_circle["circle-translate"]),"circle-translate-anchor":new Ne(N.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ne(N.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ne(N.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _t(N.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _t(N.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _t(N.paint_circle["circle-stroke-opacity"])}),layout:v0};function vg(c,s,h,g,y,S,R,G,X){if(S&&c.queryGeometry.isAboveHorizon)return!1;S&&(X*=c.pixelToTileUnitsFactor);const K=c.tileID.canonical,ce=h.projection.upVectorScale(K,h.center.lat,h.worldSize).metersToTile;for(const pe of s)for(const _e of pe){const Ae=_e.add(G),Oe=y&&h.elevation?h.elevation.exaggeration()*y.getElevationAt(Ae.x,Ae.y,!0):0,Ue=h.projection.projectTilePoint(Ae.x,Ae.y,K);if(Oe>0){const Lt=h.projection.upVector(K,Ae.x,Ae.y);Ue.x+=Lt[0]*ce*Oe,Ue.y+=Lt[1]*ce*Oe,Ue.z+=Lt[2]*ce*Oe}const dt=S?Ae:y0(Ue.x,Ue.y,Ue.z,g),Rt=S?c.tilespaceRays.map(Lt=>yg(Lt,Oe)):c.queryGeometry.screenGeometry,ii=ff([],[Ue.x,Ue.y,Ue.z,1],g);if(!R&&S?X*=ii[3]/h.cameraToCenterDistance:R&&!S&&(X*=h.cameraToCenterDistance/ii[3]),S){const Lt=Sc((_e.y/zr+K.y)/(1<<K.z));X/=h.projection.pixelsPerMeter(Lt,1)/Gd(1,Lt)}if(wm(Rt,dt,X))return!0}return!1}function y0(c,s,h,g){const y=ff([],[c,s,h,1],g);return new Dt(y[0]/y[3],y[1]/y[3])}const _g=Bd(0,0,0),Tm=Bd(0,0,1);function yg(c,s){const h=Mh();return _g[2]=s,c.intersectsPlane(_g,Tm,h),new Dt(h[0],h[1])}class x0 extends bm{}function b0(c,{width:s,height:h},g,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*h*g)throw new RangeError("mismatched image size")}else y=new Uint8Array(s*h*g);return c.width=s,c.height=h,c.data=y,c}function w0(c,s,h){const{width:g,height:y}=s;g===c.width&&y===c.height||(xg(c,s,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,g),height:Math.min(c.height,y)},h),c.width=g,c.height=y,c.data=s.data)}function xg(c,s,h,g,y,S){if(0===y.width||0===y.height)return s;if(y.width>c.width||y.height>c.height||h.x>c.width-y.width||h.y>c.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||g.x>s.width-y.width||g.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const R=c.data,G=s.data;for(let X=0;X<y.height;X++){const K=((h.y+X)*c.width+h.x)*S,ce=((g.y+X)*s.width+g.x)*S;for(let pe=0;pe<y.width*S;pe++)G[ce+pe]=R[K+pe]}return s}Tr(x0,"HeatmapBucket",{omit:["layers"]});class dh{constructor(s,h){b0(this,s,1,h)}resize(s){w0(this,new dh(s),1)}clone(){return new dh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,g,y,S){xg(s,h,g,y,S,1)}}class cl{constructor(s,h){b0(this,s,4,h)}resize(s){w0(this,new cl(s),4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new cl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,g,y,S){xg(s,h,g,y,S,4)}}Tr(dh,"AlphaImage"),Tr(cl,"RGBAImage");var wv={paint:new Gt({"heatmap-radius":new _t(N.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _t(N.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ne(N.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zt(N.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ne(N.paint_heatmap["heatmap-opacity"])})};function bg(c){const s={},h=c.resolution||256,g=c.clips?c.clips.length:1,y=c.image||new cl({width:h,height:g}),S=(R,G,X)=>{s[c.evaluationKey]=X;const K=c.expression.evaluate(s);y.data[R+G+0]=Math.floor(255*K.r/K.a),y.data[R+G+1]=Math.floor(255*K.g/K.a),y.data[R+G+2]=Math.floor(255*K.b/K.a),y.data[R+G+3]=Math.floor(255*K.a)};if(c.clips)for(let R=0,G=0;R<g;++R,G+=4*h)for(let X=0,K=0;X<h;X++,K+=4){const ce=X/(h-1),{start:pe,end:_e}=c.clips[R];S(G,K,pe*(1-ce)+_e*ce)}else for(let R=0,G=0;R<h;R++,G+=4)S(0,G,R/(h-1));return y}var Cv={paint:new Gt({"hillshade-illumination-direction":new Ne(N.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ne(N.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ne(N.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ne(N.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ne(N.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ne(N.paint_hillshade["hillshade-accent-color"])})};const Sm=Ai([{name:"a_pos",components:2,type:"Int16"}],4),{members:C0}=Sm;var Pp={exports:{}};function wf(c,s,h){h=h||2;var g,y,S,R,G,X,K,ce=s&&s.length,pe=ce?s[0]*h:c.length,_e=ep(c,0,pe,h,!0),Ae=[];if(!_e||_e.next===_e.prev)return Ae;if(ce&&(_e=function(Ue,dt,Rt,ii){var Lt,Jt,di,li=[];for(Lt=0,Jt=dt.length;Lt<Jt;Lt++)(di=ep(Ue,dt[Lt]*ii,Lt<Jt-1?dt[Lt+1]*ii:Ue.length,ii,!1))===di.next&&(di.steiner=!0),li.push(Sv(di));for(li.sort(Bp),Lt=0;Lt<li.length;Lt++)Rt=tp(li[Lt],Rt);return Rt}(c,s,_e,h)),c.length>80*h){g=S=c[0],y=R=c[1];for(var Oe=h;Oe<pe;Oe+=h)(G=c[Oe])<g&&(g=G),(X=c[Oe+1])<y&&(y=X),G>S&&(S=G),X>R&&(R=X);K=0!==(K=Math.max(S-g,R-y))?32767/K:0}return Fp(_e,Ae,h,g,y,K,0),Ae}function ep(c,s,h,g,y){var S,R;if(y===Ph(c,s,h,g)>0)for(S=s;S<h;S+=g)R=T0(S,c[S],c[S+1],R);else for(S=h-g;S>=s;S-=g)R=T0(S,c[S],c[S+1],R);return R&&np(R,R.next)&&(Ef(R),R=R.next),R}function Kh(c,s){if(!c)return c;s||(s=c);var h,g=c;do{if(h=!1,g.steiner||!np(g,g.next)&&0!==Ao(g.prev,g,g.next))g=g.next;else{if(Ef(g),(g=s=g.prev)===g.next)break;h=!0}}while(h||g!==s);return s}function Fp(c,s,h,g,y,S,R){if(c){!R&&S&&function(ce,pe,_e,Ae){var Oe=ce;do{0===Oe.z&&(Oe.z=wg(Oe.x,Oe.y,pe,_e,Ae)),Oe.prevZ=Oe.prev,Oe.nextZ=Oe.next,Oe=Oe.next}while(Oe!==ce);Oe.prevZ.nextZ=null,Oe.prevZ=null,function(Ue){var dt,Rt,ii,Lt,Jt,di,li,Qi,Xi=1;do{for(Rt=Ue,Ue=null,Jt=null,di=0;Rt;){for(di++,ii=Rt,li=0,dt=0;dt<Xi&&(li++,ii=ii.nextZ);dt++);for(Qi=Xi;li>0||Qi>0&&ii;)0!==li&&(0===Qi||!ii||Rt.z<=ii.z)?(Lt=Rt,Rt=Rt.nextZ,li--):(Lt=ii,ii=ii.nextZ,Qi--),Jt?Jt.nextZ=Lt:Ue=Lt,Lt.prevZ=Jt,Jt=Lt;Rt=ii}Jt.nextZ=null,Xi*=2}while(di>1)}(Oe)}(c,g,y,S);for(var G,X,K=c;c.prev!==c.next;)if(G=c.prev,X=c.next,S?Ev(c,g,y,S):E0(c))s.push(G.i/h|0),s.push(c.i/h|0),s.push(X.i/h|0),Ef(c),c=X.next,K=X.next;else if((c=X)===K){R?1===R?Fp(c=kv(Kh(c),s,h),s,h,g,y,S,2):2===R&&k0(c,s,h,g,y,S):Fp(Kh(c),s,h,g,y,S,1);break}}}function E0(c){var s=c.prev,h=c,g=c.next;if(Ao(s,h,g)>=0)return!1;for(var y=s.x,S=h.x,R=g.x,G=s.y,X=h.y,K=g.y,ce=y<S?y<R?y:R:S<R?S:R,pe=G<X?G<K?G:K:X<K?X:K,_e=y>S?y>R?y:R:S>R?S:R,Ae=G>X?G>K?G:K:X>K?X:K,Oe=g.next;Oe!==s;){if(Oe.x>=ce&&Oe.x<=_e&&Oe.y>=pe&&Oe.y<=Ae&&ip(y,G,S,X,R,K,Oe.x,Oe.y)&&Ao(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.next}return!0}function Ev(c,s,h,g){var y=c.prev,S=c,R=c.next;if(Ao(y,S,R)>=0)return!1;for(var G=y.x,X=S.x,K=R.x,ce=y.y,pe=S.y,_e=R.y,Ae=G<X?G<K?G:K:X<K?X:K,Oe=ce<pe?ce<_e?ce:_e:pe<_e?pe:_e,Ue=G>X?G>K?G:K:X>K?X:K,dt=ce>pe?ce>_e?ce:_e:pe>_e?pe:_e,Rt=wg(Ae,Oe,s,h,g),ii=wg(Ue,dt,s,h,g),Lt=c.prevZ,Jt=c.nextZ;Lt&&Lt.z>=Rt&&Jt&&Jt.z<=ii;){if(Lt.x>=Ae&&Lt.x<=Ue&&Lt.y>=Oe&&Lt.y<=dt&&Lt!==y&&Lt!==R&&ip(G,ce,X,pe,K,_e,Lt.x,Lt.y)&&Ao(Lt.prev,Lt,Lt.next)>=0||(Lt=Lt.prevZ,Jt.x>=Ae&&Jt.x<=Ue&&Jt.y>=Oe&&Jt.y<=dt&&Jt!==y&&Jt!==R&&ip(G,ce,X,pe,K,_e,Jt.x,Jt.y)&&Ao(Jt.prev,Jt,Jt.next)>=0))return!1;Jt=Jt.nextZ}for(;Lt&&Lt.z>=Rt;){if(Lt.x>=Ae&&Lt.x<=Ue&&Lt.y>=Oe&&Lt.y<=dt&&Lt!==y&&Lt!==R&&ip(G,ce,X,pe,K,_e,Lt.x,Lt.y)&&Ao(Lt.prev,Lt,Lt.next)>=0)return!1;Lt=Lt.prevZ}for(;Jt&&Jt.z<=ii;){if(Jt.x>=Ae&&Jt.x<=Ue&&Jt.y>=Oe&&Jt.y<=dt&&Jt!==y&&Jt!==R&&ip(G,ce,X,pe,K,_e,Jt.x,Jt.y)&&Ao(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.nextZ}return!0}function kv(c,s,h){var g=c;do{var y=g.prev,S=g.next.next;!np(y,S)&&Cf(y,g,g.next,S)&&dd(y,S)&&dd(S,y)&&(s.push(y.i/h|0),s.push(g.i/h|0),s.push(S.i/h|0),Ef(g),Ef(g.next),g=c=S),g=g.next}while(g!==c);return Kh(g)}function k0(c,s,h,g,y,S){var R=c;do{for(var G=R.next.next;G!==R.prev;){if(R.i!==G.i&&Dv(R,G)){var X=Cg(R,G);return R=Kh(R,R.next),X=Kh(X,X.next),Fp(R,s,h,g,y,S,0),void Fp(X,s,h,g,y,S,0)}G=G.next}R=R.next}while(R!==c)}function Bp(c,s){return c.x-s.x}function tp(c,s){var h=function(y,S){var R,G=S,X=y.x,K=y.y,ce=-1/0;do{if(K<=G.y&&K>=G.next.y&&G.next.y!==G.y){var pe=G.x+(K-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(pe<=X&&pe>ce&&(ce=pe,R=G.x<G.next.x?G:G.next,pe===X))return R}G=G.next}while(G!==S);if(!R)return null;var _e,Ae=R,Oe=R.x,Ue=R.y,dt=1/0;G=R;do{X>=G.x&&G.x>=Oe&&X!==G.x&&ip(K<Ue?X:ce,K,Oe,Ue,K<Ue?ce:X,K,G.x,G.y)&&(_e=Math.abs(K-G.y)/(X-G.x),dd(G,y)&&(_e<dt||_e===dt&&(G.x>R.x||G.x===R.x&&Tv(R,G)))&&(R=G,dt=_e)),G=G.next}while(G!==Ae);return R}(c,s);if(!h)return s;var g=Cg(h,c);return Kh(g,g.next),Kh(h,h.next)}function Tv(c,s){return Ao(c.prev,c,s.prev)<0&&Ao(s.next,c,c.next)<0}function wg(c,s,h,g,y){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-g)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Sv(c){var s=c,h=c;do{(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next}while(s!==c);return h}function ip(c,s,h,g,y,S,R,G){return(y-R)*(s-G)>=(c-R)*(S-G)&&(c-R)*(g-G)>=(h-R)*(s-G)&&(h-R)*(S-G)>=(y-R)*(g-G)}function Dv(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,g){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==g.i&&y.next.i!==g.i&&Cf(y,y.next,h,g))return!0;y=y.next}while(y!==h);return!1}(c,s)&&(dd(c,s)&&dd(s,c)&&function(h,g){var y=h,S=!1,R=(h.x+g.x)/2,G=(h.y+g.y)/2;do{y.y>G!=y.next.y>G&&y.next.y!==y.y&&R<(y.next.x-y.x)*(G-y.y)/(y.next.y-y.y)+y.x&&(S=!S),y=y.next}while(y!==h);return S}(c,s)&&(Ao(c.prev,c,s.prev)||Ao(c,s.prev,s))||np(c,s)&&Ao(c.prev,c,c.next)>0&&Ao(s.prev,s,s.next)>0)}function Ao(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function np(c,s){return c.x===s.x&&c.y===s.y}function Cf(c,s,h,g){var y=Np(Ao(c,s,h)),S=Np(Ao(c,s,g)),R=Np(Ao(h,g,c)),G=Np(Ao(h,g,s));return y!==S&&R!==G||!(0!==y||!Jh(c,h,s))||!(0!==S||!Jh(c,g,s))||!(0!==R||!Jh(h,c,g))||!(0!==G||!Jh(h,s,g))}function Jh(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function Np(c){return c>0?1:c<0?-1:0}function dd(c,s){return Ao(c.prev,c,c.next)<0?Ao(c,s,c.next)>=0&&Ao(c,c.prev,s)>=0:Ao(c,s,c.prev)<0||Ao(c,c.next,s)<0}function Cg(c,s){var h=new Ac(c.i,c.x,c.y),g=new Ac(s.i,s.x,s.y),y=c.next,S=s.prev;return c.next=s,s.prev=c,h.next=y,y.prev=h,g.next=h,h.prev=g,S.next=g,g.prev=S,g}function T0(c,s,h,g){var y=new Ac(c,s,h);return g?(y.next=g.next,y.prev=g,g.next.prev=y,g.next=y):(y.prev=y,y.next=y),y}function Ef(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Ac(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ph(c,s,h,g){for(var y=0,S=s,R=h-g;S<h;S+=g)y+=(c[R]-c[S])*(c[S+1]+c[R+1]),R=S;return y}Pp.exports=wf,Pp.exports.default=wf,wf.deviation=function(c,s,h,g){var y=s&&s.length,S=Math.abs(Ph(c,0,y?s[0]*h:c.length,h));if(y)for(var R=0,G=s.length;R<G;R++)S-=Math.abs(Ph(c,s[R]*h,R<G-1?s[R+1]*h:c.length,h));var X=0;for(R=0;R<g.length;R+=3){var K=g[R]*h,ce=g[R+1]*h,pe=g[R+2]*h;X+=Math.abs((c[K]-c[pe])*(c[ce+1]-c[K+1])-(c[K]-c[ce])*(c[pe+1]-c[K+1]))}return 0===S&&0===X?0:Math.abs((X-S)/S)},wf.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},g=0,y=0;y<c.length;y++){for(var S=0;S<c[y].length;S++)for(var R=0;R<s;R++)h.vertices.push(c[y][S][R]);y>0&&h.holes.push(g+=c[y-1].length)}return h};var Fh=lt(Pp.exports);function rp(c,s,h,g,y){zp(c,s,h||0,g||c.length-1,y||hd)}function zp(c,s,h,g,y){for(;g>h;){if(g-h>600){var S=g-h+1,R=s-h+1,G=Math.log(S),X=.5*Math.exp(2*G/3),K=.5*Math.sqrt(G*X*(S-X)/S)*(R-S/2<0?-1:1);zp(c,s,Math.max(h,Math.floor(s-R*X/S+K)),Math.min(g,Math.floor(s+(S-R)*X/S+K)),y)}var ce=c[s],pe=h,_e=g;for(kf(c,h,s),y(c[g],ce)>0&&kf(c,h,g);pe<_e;){for(kf(c,pe,_e),pe++,_e--;y(c[pe],ce)<0;)pe++;for(;y(c[_e],ce)>0;)_e--}0===y(c[h],ce)?kf(c,h,_e):kf(c,++_e,g),_e<=s&&(h=_e+1),s<=_e&&(g=_e-1)}}function kf(c,s,h){var g=c[s];c[s]=c[h],c[h]=g}function hd(c,s){return c<s?-1:c>s?1:0}function Dm(c,s){const h=c.length;if(h<=1)return[c];const g=[];let y,S;for(let R=0;R<h;R++){const G=ar(c[R]);0!==G&&(c[R].area=Math.abs(G),void 0===S&&(S=G<0),S===G<0?(y&&g.push(y),y=[c[R]]):y.push(c[R]))}if(y&&g.push(y),s>1)for(let R=0;R<g.length;R++)g[R].length<=s||(rp(g[R],s,1,g[R].length-1,Am),g[R]=g[R].slice(0,s));return g}function Am(c,s){return s.area-c.area}function ap(c,s,h){const g=h.patternDependencies;let y=!1;for(const S of s){const R=S.paint.get(`${c}-pattern`);R.isConstant()||(y=!0);const G=R.constantOr(null);G&&(y=!0,g[G]=!0)}return y}function Tf(c,s,h,g,y){const S=y.patternDependencies;for(const R of s){const G=R.paint.get(`${c}-pattern`).value;if("constant"!==G.kind){let X=G.evaluate({zoom:g},h,{},y.availableImages);X=X&&X.name?X.name:X,S[X]=!0,h.patterns[R.id]=X}}return h}class Eg{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gn,this.indexArray=new ta,this.indexArray2=new vl,this.programConfigurations=new rh(s.layers,s.zoom),this.segments=new nl,this.segments2=new nl,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.projection=s.projection}populate(s,h,g,y){this.hasPattern=ap("fill",this.layers,h);const S=this.layers[0].layout.get("fill-sort-key"),R=[];for(const{feature:G,id:X,index:K,sourceLayerIndex:ce}of s){const pe=this.layers[0]._featureFilter.needGeometry,_e=wu(G,pe);if(!this.layers[0]._featureFilter.filter(new de(this.zoom),_e,g))continue;const Ae=S?S.evaluate(_e,{},g,h.availableImages):void 0,Oe={id:X,properties:G.properties,type:G.type,sourceLayerIndex:ce,index:K,geometry:pe?_e.geometry:Oh(G,g,y),patterns:{},sortKey:Ae};R.push(Oe)}S&&R.sort((G,X)=>G.sortKey-X.sortKey);for(const G of R){const{geometry:X,index:K,sourceLayerIndex:ce}=G;if(this.hasPattern){const pe=Tf("fill",this.layers,G,this.zoom,h);this.patternFeatures.push(pe)}else this.addFeature(G,X,K,g,{},h.availableImages);h.featureIndex.insert(s[K].feature,X,K,ce,this.index)}}update(s,h,g,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,g,y)}addFeatures(s,h,g,y,S){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,h,g,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,C0),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,g,y,S,R=[]){for(const G of Dm(h,500)){let X=0;for(const Oe of G)X+=Oe.length;const K=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray),ce=K.vertexLength,pe=[],_e=[];for(const Oe of G){if(0===Oe.length)continue;Oe!==G[0]&&_e.push(pe.length/2);const Ue=this.segments2.prepareSegment(Oe.length,this.layoutVertexArray,this.indexArray2),dt=Ue.vertexLength;this.layoutVertexArray.emplaceBack(Oe[0].x,Oe[0].y),this.indexArray2.emplaceBack(dt+Oe.length-1,dt),pe.push(Oe[0].x),pe.push(Oe[0].y);for(let Rt=1;Rt<Oe.length;Rt++)this.layoutVertexArray.emplaceBack(Oe[Rt].x,Oe[Rt].y),this.indexArray2.emplaceBack(dt+Rt-1,dt+Rt),pe.push(Oe[Rt].x),pe.push(Oe[Rt].y);Ue.vertexLength+=Oe.length,Ue.primitiveLength+=Oe.length}const Ae=Fh(pe,_e);for(let Oe=0;Oe<Ae.length;Oe+=3)this.indexArray.emplaceBack(ce+Ae[Oe],ce+Ae[Oe+1],ce+Ae[Oe+2]);K.vertexLength+=X,K.primitiveLength+=Ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,S,R,y)}}Tr(Eg,"FillBucket",{omit:["layers","patternFeatures"]});const Av=new Gt({"fill-sort-key":new _t(N.layout_fill["fill-sort-key"])});var D_={paint:new Gt({"fill-antialias":new Ne(N.paint_fill["fill-antialias"]),"fill-opacity":new _t(N.paint_fill["fill-opacity"]),"fill-color":new _t(N.paint_fill["fill-color"]),"fill-outline-color":new _t(N.paint_fill["fill-outline-color"]),"fill-translate":new Ne(N.paint_fill["fill-translate"]),"fill-translate-anchor":new Ne(N.paint_fill["fill-translate-anchor"]),"fill-pattern":new _t(N.paint_fill["fill-pattern"])}),layout:Av};const A_=Ai([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Iv=Ai([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Mv=Ai([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:sp}=A_;var Sf={},Qh=yi,Yp=op;function op(c,s,h,g,y){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=g,this._values=y,c.readFields(kg,this,s)}function kg(c,s,h){1==c?s.id=h.readVarint():2==c?function(g,y){for(var S=g.readVarint()+g.pos;g.pos<S;){var R=y._keys[g.readVarint()],G=y._values[g.readVarint()];y.properties[R]=G}}(h,s):3==c?s.type=h.readVarint():4==c&&(s._geometry=h.pos)}function Tg(c){for(var s,h,g=0,y=0,S=c.length,R=S-1;y<S;R=y++)g+=((h=c[R]).x-(s=c[y]).x)*(s.y+h.y);return g}op.types=["Unknown","Point","LineString","Polygon"],op.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,g=1,y=0,S=0,R=0,G=[];c.pos<h;){if(y<=0){var X=c.readVarint();g=7&X,y=X>>3}if(y--,1===g||2===g)S+=c.readSVarint(),R+=c.readSVarint(),1===g&&(s&&G.push(s),s=[]),s.push(new Qh(S,R));else{if(7!==g)throw new Error("unknown command "+g);s&&s.push(s[0].clone())}}return s&&G.push(s),G},op.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,g=0,y=0,S=0,R=1/0,G=-1/0,X=1/0,K=-1/0;c.pos<s;){if(g<=0){var ce=c.readVarint();h=7&ce,g=ce>>3}if(g--,1===h||2===h)(y+=c.readSVarint())<R&&(R=y),y>G&&(G=y),(S+=c.readSVarint())<X&&(X=S),S>K&&(K=S);else if(7!==h)throw new Error("unknown command "+h)}return[R,X,G,K]},op.prototype.toGeoJSON=function(c,s,h){var g,y,S=this.extent*Math.pow(2,h),R=this.extent*c,G=this.extent*s,X=this.loadGeometry(),K=op.types[this.type];function ce(Ae){for(var Oe=0;Oe<Ae.length;Oe++){var Ue=Ae[Oe];Ae[Oe]=[360*(Ue.x+R)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ue.y+G)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var pe=[];for(g=0;g<X.length;g++)pe[g]=X[g][0];ce(X=pe);break;case 2:for(g=0;g<X.length;g++)ce(X[g]);break;case 3:for(X=function(Ae){var Oe=Ae.length;if(Oe<=1)return[Ae];for(var Ue,dt,Rt=[],ii=0;ii<Oe;ii++){var Lt=Tg(Ae[ii]);0!==Lt&&(void 0===dt&&(dt=Lt<0),dt===Lt<0?(Ue&&Rt.push(Ue),Ue=[Ae[ii]]):Ue.push(Ae[ii]))}return Ue&&Rt.push(Ue),Rt}(X),g=0;g<X.length;g++)for(y=0;y<X[g].length;y++)ce(X[g][y])}1===X.length?X=X[0]:K="Multi"+K;var _e={type:"Feature",geometry:{type:K,coordinates:X},properties:this.properties};return"id"in this&&(_e.id=this.id),_e};var Sg=Yp,b=z;function z(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(A,this,s),this.length=this._features.length}function A(c,s,h){15===c?s.version=h.readVarint():1===c?s.name=h.readString():5===c?s.extent=h.readVarint():2===c?s._features.push(h.pos):3===c?s._keys.push(h.readString()):4===c&&s._values.push(function(g){for(var y=null,S=g.readVarint()+g.pos;g.pos<S;){var R=g.readVarint()>>3;y=1===R?g.readString():2===R?g.readFloat():3===R?g.readDouble():4===R?g.readVarint64():5===R?g.readVarint():6===R?g.readSVarint():7===R?g.readBoolean():null}return y}(h))}z.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new Sg(this._pbf,s,this.extent,this._keys,this._values)};var q=b;function ie(c,s,h){if(3===c){var g=new q(h,h.readVarint()+h.pos);g.length&&(s[g.name]=g)}}var Re=Sf.VectorTile=function(c,s){this.layers=c.readFields(ie,{},s)},Ft=Sf.VectorTileFeature=Yp;function an(c,s,h,g){const y=[],S=0===g?(R,G,X,K,ce,pe)=>{R.push(new Dt(pe,X+(pe-G)/(K-G)*(ce-X)))}:(R,G,X,K,ce,pe)=>{R.push(new Dt(G+(pe-X)/(ce-X)*(K-G),pe))};for(const R of c){const G=[];for(const X of R){if(X.length<=2)continue;const K=[];for(let _e=0;_e<X.length-1;_e++){const Ae=X[_e].x,Oe=X[_e].y,Ue=X[_e+1].x,dt=X[_e+1].y,Rt=0===g?Ae:Oe,ii=0===g?Ue:dt;Rt<s?ii>s&&S(K,Ae,Oe,Ue,dt,s):Rt>h?ii<h&&S(K,Ae,Oe,Ue,dt,h):K.push(X[_e]),ii<s&&Rt>=s&&S(K,Ae,Oe,Ue,dt,s),ii>h&&Rt<=h&&S(K,Ae,Oe,Ue,dt,h)}let ce=X[X.length-1];const pe=0===g?ce.x:ce.y;pe>=s&&pe<=h&&K.push(ce),K.length&&(ce=K[K.length-1],K[0].x===ce.x&&K[0].y===ce.y||K.push(K[0]),G.push(K))}G.length&&y.push(G)}return y}Sf.VectorTileLayer=b;const sr=Ft.types,Us=Math.pow(2,13);function Co(c,s,h,g,y,S,R,G){c.emplaceBack((s<<1)+R,(h<<1)+S,(Math.floor(g*Us)<<1)+y,Math.round(G))}function yl(c,s,h){c.emplaceBack(s.x,s.y,s.z,16384*h[0],16384*h[1],16384*h[2])}class $c{constructor(){this.acc=new Dt(0,0),this.polyCount=[]}startRing(s){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Dt(s.x,s.y),this.max=new Dt(s.x,s.y))}append(s,h){this.currentPolyCount.edges++,this.acc._add(s);const g=this.min,y=this.max;s.x<g.x?g.x=s.x:s.x>y.x&&(y.x=s.x),s.y<g.y?g.y=s.y:s.y>y.y&&(y.y=s.y),((0===s.x||s.x===zr)&&s.x===h.x)!=((0===s.y||s.y===zr)&&s.y===h.y)&&this.processBorderOverlap(s,h),h.x<0!=s.x<0&&this.addBorderIntersection(0,ps(h.y,s.y,(0-h.x)/(s.x-h.x))),h.x>zr!=s.x>zr&&this.addBorderIntersection(1,ps(h.y,s.y,(zr-h.x)/(s.x-h.x))),h.y<0!=s.y<0&&this.addBorderIntersection(2,ps(h.x,s.x,(0-h.y)/(s.y-h.y))),h.y>zr!=s.y>zr&&this.addBorderIntersection(3,ps(h.x,s.x,(zr-h.y)/(s.y-h.y)))}addBorderIntersection(s,h){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const g=this.borders[s];h<g[0]&&(g[0]=h),h>g[1]&&(g[1]=h)}processBorderOverlap(s,h){if(s.x===h.x){if(s.y===h.y)return;const g=0===s.x?0:1;this.addBorderIntersection(g,h.y),this.addBorderIntersection(g,s.y)}else{const g=0===s.y?2:3;this.addBorderIntersection(g,h.x),this.addBorderIntersection(g,s.x)}}centroid(){const s=this.polyCount.reduce((h,g)=>h+g.edges,0);return 0!==s?this.acc.div(s)._round():new Dt(0,0)}span(){return new Dt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((s,h)=>s+ +(h[0]!==Number.MAX_VALUE),0)}}class Df{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.layoutVertexArray=new un,this.centroidVertexArray=new od,this.indexArray=new ta,this.programConfigurations=new rh(s.layers,s.zoom),this.segments=new nl,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.enableTerrain=s.enableTerrain}populate(s,h,g,y){this.features=[],this.hasPattern=ap("fill-extrusion",this.layers,h),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(S){const R=Math.exp(Math.PI*(1-S.y/(1<<S.z)*2));return 80150034*R/(R*R+1)/zr/(1<<S.z)}(g),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:S,id:R,index:G,sourceLayerIndex:X}of s){const K=this.layers[0]._featureFilter.needGeometry,ce=wu(S,K);if(!this.layers[0]._featureFilter.filter(new de(this.zoom),ce,g))continue;const pe={id:R,sourceLayerIndex:X,index:G,geometry:K?ce.geometry:Oh(S,g,y),properties:S.properties,type:S.type,patterns:{}},_e=this.layoutVertexArray.length;this.hasPattern?this.features.push(Tf("fill-extrusion",this.layers,pe,this.zoom,h)):this.addFeature(pe,pe.geometry,G,g,{},h.availableImages,y),h.featureIndex.insert(S,pe.geometry,G,X,this.index,_e)}this.sortBorders()}addFeatures(s,h,g,y,S){for(const R of this.features){const{geometry:G}=R;this.addFeature(R,G,R.index,h,g,y,S)}this.sortBorders()}update(s,h,g,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,g,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sp),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,Mv.members,!0))),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Iv.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,g,y,S,R,G){const X=[new Dt(0,0),new Dt(zr,zr)],K=G.projection,ce="globe"===K.name,pe=this.enableTerrain&&!ce?new $c:null,_e="Polygon"===sr[s.type];ce&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new bn);const Ae=Dm(h,500);for(let Rt=Ae.length-1;Rt>=0;Rt--){const ii=Ae[Rt];(0===ii.length||(Oe=ii[0]).every(Lt=>Lt.x<=0)||Oe.every(Lt=>Lt.x>=zr)||Oe.every(Lt=>Lt.y<=0)||Oe.every(Lt=>Lt.y>=zr))&&Ae.splice(Rt,1)}var Oe;let Ue;if(ce)Ue=R_(Ae,X,y);else{Ue=[];for(const Rt of Ae)Ue.push({polygon:Rt,bounds:X})}const dt=_e?this.edgeRadius:0;for(const{polygon:Rt,bounds:ii}of Ue){let Lt=0,Jt=0;for(const li of Rt)_e&&!li[0].equals(li[li.length-1])&&li.push(li[0]),Jt+=_e?li.length-1:li.length;const di=this.segments.prepareSegment((_e?5:4)*Jt,this.layoutVertexArray,this.indexArray);if(_e){const li=[],Qi=[];Lt=di.vertexLength;for(const kn of Rt){let Kn,sn;kn.length&&kn!==Rt[0]&&Qi.push(li.length/2),Kn=kn[1].sub(kn[0])._perp()._unit();for(let Ln=1;Ln<kn.length;Ln++){const Pn=kn[Ln],jn=kn[Ln===kn.length-1?1:Ln+1];let{x:tr,y:vn}=Pn;if(dt){sn=jn.sub(Pn)._perp()._unit();const wr=Kn.add(sn)._unit(),Vr=dt*Math.min(4,1/(Kn.x*wr.x+Kn.y*wr.y));tr+=Vr*wr.x,vn+=Vr*wr.y,Kn=sn}Co(this.layoutVertexArray,tr,vn,0,0,1,1,0),di.vertexLength++,li.push(Pn.x,Pn.y),ce&&yl(this.layoutVertexExtArray,K.projectTilePoint(tr,vn,y),K.upVector(y,tr,vn))}}const Xi=Fh(li,Qi);for(let kn=0;kn<Xi.length;kn+=3)this.indexArray.emplaceBack(Lt+Xi[kn],Lt+Xi[kn+2],Lt+Xi[kn+1]),di.primitiveLength++}for(const li of Rt){pe&&li.length&&pe.startRing(li[0]);let Qi,Xi,kn,Kn=li.length>4&&Im(li[li.length-2],li[0],li[1]),sn=dt?Rv(li[li.length-2],li[0],li[1],dt):0;Xi=li[1].sub(li[0])._perp()._unit();let Ln=!0;for(let Pn=1,jn=0;Pn<li.length;Pn++){let tr=li[Pn-1],vn=li[Pn];const wr=li[Pn===li.length-1?1:Pn+1];if(pe&&_e&&pe.currentPolyCount.top++,Vd(vn,tr,ii)){dt&&(Xi=wr.sub(vn)._perp()._unit(),Ln=!Ln);continue}pe&&pe.append(vn,tr);const Vr=vn.sub(tr)._perp(),Er=Vr.x/(Math.abs(Vr.x)+Math.abs(Vr.y)),rs=Vr.y>0?1:0,ir=tr.dist(vn);if(jn+ir>32768&&(jn=0),dt){kn=wr.sub(vn)._perp()._unit();let ss=Hd(tr,vn,wr,S0(Xi,kn),dt);isNaN(ss)&&(ss=0);const Sa=vn.sub(tr)._unit();tr=tr.add(Sa.mult(sn))._round(),vn=vn.add(Sa.mult(-ss))._round(),sn=ss,Xi=kn}const ua=di.vertexLength,as=li.length>4&&Im(tr,vn,wr);let to=I_(jn,Kn,Ln);if(Co(this.layoutVertexArray,tr.x,tr.y,Er,rs,0,0,to),Co(this.layoutVertexArray,tr.x,tr.y,Er,rs,0,1,to),jn+=ir,to=I_(jn,as,!Ln),Kn=as,Co(this.layoutVertexArray,vn.x,vn.y,Er,rs,0,0,to),Co(this.layoutVertexArray,vn.x,vn.y,Er,rs,0,1,to),di.vertexLength+=4,this.indexArray.emplaceBack(ua+0,ua+1,ua+2),this.indexArray.emplaceBack(ua+1,ua+3,ua+2),di.primitiveLength+=2,dt){const ss=Lt+(1===Pn?li.length-2:Pn-2),Sa=1===Pn?Lt:ss+1;if(this.indexArray.emplaceBack(ua+1,ss,ua+3),this.indexArray.emplaceBack(ss,Sa,ua+3),di.primitiveLength+=2,void 0===Qi&&(Qi=ua),!Vd(wr,li[Pn],ii)){const Uo=Pn===li.length-1?Qi:di.vertexLength;this.indexArray.emplaceBack(ua+2,ua+3,Uo),this.indexArray.emplaceBack(ua+3,Uo+1,Uo),this.indexArray.emplaceBack(ua+3,Sa,Uo+1),di.primitiveLength+=3}Ln=!Ln}if(ce){const ss=this.layoutVertexExtArray,Sa=K.projectTilePoint(tr.x,tr.y,y),Uo=K.projectTilePoint(vn.x,vn.y,y),us=K.upVector(y,tr.x,tr.y),ds=K.upVector(y,vn.x,vn.y);yl(ss,Sa,us),yl(ss,Sa,us),yl(ss,Uo,ds),yl(ss,Uo,ds)}}_e&&(Lt+=li.length-1)}}if(pe&&pe.polyCount.length>0){if(pe.borders){pe.vertexArrayOffset=this.centroidVertexArray.length;const Rt=pe.borders,ii=this.featuresOnBorder.push(pe)-1;for(let Lt=0;Lt<4;Lt++)Rt[Lt][0]!==Number.MAX_VALUE&&this.borders[Lt].push(ii)}this.encodeCentroid(pe.borders?void 0:pe.centroid(),pe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,S,R,y)}sortBorders(){for(let s=0;s<4;s++)this.borders[s].sort((h,g)=>this.featuresOnBorder[h].borders[s][0]-this.featuresOnBorder[g].borders[s][0])}encodeCentroid(s,h,g=!0){let y,S;if(s)if(0!==s.y){const G=h.span()._mult(this.tileToMeter);y=(Math.max(s.x,1)<<3)+Math.min(7,Math.round(G.x/10)),S=(Math.max(s.y,1)<<3)+Math.min(7,Math.round(G.y/10))}else y=Math.ceil(7*(s.x+450)),S=0;else y=0,S=+g;let R=g?this.centroidVertexArray.length:h.vertexArrayOffset;for(const G of h.polyCount){g&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*G.edges+G.top);for(let X=0;X<G.top;X++)this.centroidVertexArray.emplace(R++,y,S);for(let X=0;X<2*G.edges;X++)this.centroidVertexArray.emplace(R++,0,S),this.centroidVertexArray.emplace(R++,y,S)}}}function S0(c,s){const h=c.add(s)._unit();return c.x*h.x+c.y*h.y}function Rv(c,s,h,g){const y=s.sub(c)._perp()._unit(),S=h.sub(s)._perp()._unit();return Hd(c,s,h,S0(y,S),g)}function Hd(c,s,h,g,y){const S=Math.sqrt(1-g*g);return Math.min(c.dist(s)/3,s.dist(h)/3,y*S/g)}function Vd(c,s,h){return c.x<h[0].x&&s.x<h[0].x||c.x>h[1].x&&s.x>h[1].x||c.y<h[0].y&&s.y<h[0].y||c.y>h[1].y&&s.y>h[1].y}function Im(c,s,h){if(c.x<0||c.x>=zr||s.x<0||s.x>=zr||h.x<0||h.x>=zr)return!1;const g=h.sub(s),y=g.perp(),S=c.sub(s);return(g.x*S.x+g.y*S.y)/Math.sqrt((g.x*g.x+g.y*g.y)*(S.x*S.x+S.y*S.y))>-.866&&y.x*S.x+y.y*S.y<0}function I_(c,s,h){const g=s?2|c:-3&c;return h?1|g:-2&g}function M_(){const c=Math.PI/32,s=Math.tan(c),h=zu;return h*Math.sqrt(1+2*s*s)-h}function R_(c,s,h){const g=1<<h.z,y=ud(h.x/g),S=ud((h.x+1)/g),R=Sc(h.y/g),G=Sc((h.y+1)/g);return function(X,K,ce,pe,_e=0,Ae){const Oe=[];if(!X.length||!ce||!pe)return Oe;const Ue=(li,Qi)=>{for(const Xi of li)Oe.push({polygon:Xi,bounds:Qi})},dt=Math.ceil(Math.log2(ce)),Rt=Math.ceil(Math.log2(pe)),ii=dt-Rt,Lt=[];for(let li=0;li<Math.abs(ii);li++)Lt.push(ii>0?0:1);for(let li=0;li<Math.min(dt,Rt);li++)Lt.push(0),Lt.push(1);let Jt=X;if(Jt=an(Jt,K[0].y-_e,K[1].y+_e,1),Jt=an(Jt,K[0].x-_e,K[1].x+_e,0),!Jt.length)return Oe;const di=[];for(Lt.length?di.push({polygons:Jt,bounds:K,depth:0}):Ue(Jt,K);di.length;){const li=di.pop(),Qi=li.depth,Xi=Lt[Qi],kn=li.bounds[0],Kn=li.bounds[1],sn=0===Xi?kn.x:kn.y,Ln=0===Xi?Kn.x:Kn.y,Pn=Ae?Ae(Xi,sn,Ln):.5*(sn+Ln),jn=an(li.polygons,sn-_e,Pn+_e,Xi),tr=an(li.polygons,Pn-_e,Ln+_e,Xi);if(jn.length){const vn=[kn,new Dt(0===Xi?Pn:Kn.x,1===Xi?Pn:Kn.y)];Lt.length>Qi+1?di.push({polygons:jn,bounds:vn,depth:Qi+1}):Ue(jn,vn)}if(tr.length){const vn=[new Dt(0===Xi?Pn:kn.x,1===Xi?Pn:kn.y),Kn];Lt.length>Qi+1?di.push({polygons:tr,bounds:vn,depth:Qi+1}):Ue(tr,vn)}}return Oe}(c,s,Math.ceil((S-y)/11.25),Math.ceil((R-G)/11.25),1,(X,K,ce)=>{if(0===X)return.5*(K+ce);{const pe=Sc((h.y+K/zr)/g);return(uh(.5*(Sc((h.y+ce/zr)/g)+pe))*g-h.y)*zr}})}Tr(Df,"FillExtrusionBucket",{omit:["layers","features"]}),Tr($c,"PartMetadata");const qy=new Gt({"fill-extrusion-edge-radius":new Ne(N["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Fx={paint:new Gt({"fill-extrusion-opacity":new Ne(N["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _t(N["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ne(N["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ne(N["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _t(N["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _t(N["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _t(N["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ne(N["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ne(N["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ne(N["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ne(N["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:qy};function O_(c,s,h){var g=2*Math.PI*6378137/256/Math.pow(2,h);return[c*g-2*Math.PI*6378137/2,s*g-2*Math.PI*6378137/2]}class Dd{constructor(s,h,g){this.z=s,this.x=h,this.y=g,this.key=Bh(0,s,s,h,g)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h){const g=(R=this.y,G=this.z,X=O_(256*(S=this.x),256*(R=Math.pow(2,G)-R-1),G),K=O_(256*(S+1),256*(R+1),G),X[0]+","+X[1]+","+K[0]+","+K[1]),y=function(S,R,G){let X,K="";for(let ce=S;ce>0;ce--)X=1<<ce-1,K+=(R&X?1:0)+(G&X?2:0);return K}(this.z,this.x,this.y);var S,R,G,X,K;return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",g)}toString(){return`${this.z}/${this.x}/${this.y}`}}class L_{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Bh(s,h.z,h.z,h.x,h.y)}}class Yu{constructor(s,h,g,y,S){this.overscaledZ=s,this.wrap=h,this.canonical=new Dd(g,+y,+S),this.key=0===h&&s===g?this.canonical.key:Bh(h,s,g,y,S)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const h=this.canonical.z-s;return s>this.canonical.z?new Yu(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yu(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h=!0){if(this.overscaledZ===s&&h)return this.key;if(s>this.canonical.z)return Bh(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y);{const g=this.canonical.z-s;return Bh(this.wrap*+h,s,s,this.canonical.x>>g,this.canonical.y>>g)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new Yu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,g=2*this.canonical.x,y=2*this.canonical.y;return[new Yu(h,this.wrap,h,g,y),new Yu(h,this.wrap,h,g+1,y),new Yu(h,this.wrap,h,g,y+1),new Yu(h,this.wrap,h,g+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Yu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Yu(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new L_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Bh(c,s,h,g,y){const S=1<<Math.min(h,22);let R=S*(y%S)+g%S;return c&&h<22&&(R+=S*S*((c<0?-2*c-1:2*c)%(1<<2*(22-h)))),16*(32*R+h)+(s-h)}Tr(Dd,"CanonicalTileID"),Tr(Yu,"OverscaledTileID",{omit:["projMatrix"]});class cs extends Dt{constructor(s,h,g){super(s,h),this.z=g}}function Dg(c,s){return c.x*s.x+c.y*s.y}function fd(c,s){if(1===c.length){let h=0;const g=s[h++];let y;for(;!y||g.equals(y);)if(y=s[h++],!y)return 1/0;for(;h<s.length;h++){const S=s[h],R=c[0],G=y.sub(g),X=S.sub(g),K=R.sub(g),ce=Dg(G,G),pe=Dg(G,X),_e=Dg(X,X),Ae=Dg(K,G),Oe=Dg(K,X),Ue=ce*_e-pe*pe,dt=(_e*Ae-pe*Oe)/Ue,Rt=(ce*Oe-pe*Ae)/Ue,ii=g.z*(1-dt-Rt)+y.z*dt+S.z*Rt;if(isFinite(ii))return ii}return 1/0}{let h=1/0;for(const g of s)h=Math.min(h,g.z);return h}}function Wl(c,s,h,g,y,S,R,G){const X=R*y.getElevationAt(c,s,!0,!0),K=0!==S[0],ce=K?0===S[1]?R*(S[0]/7-450):R*function(pe,_e,Ae){const Oe=Math.floor(_e[0]/8),Ue=Math.floor(_e[1]/8),dt=10*(_e[0]-8*Oe),Rt=10*(_e[1]-8*Ue),ii=pe.getElevationAt(Oe,Ue,!0,!0),Lt=pe.getMeterToDEM(Ae),Jt=Math.floor(.5*(dt*Lt-1)),di=Math.floor(.5*(Rt*Lt-1)),li=pe.tileCoordToPixel(Oe,Ue),Qi=2*Jt+1,Xi=2*di+1,kn=(Vr=Qi,Er=Xi,[(tr=pe).getElevationAtPixel(vn=li.x-Jt,wr=li.y-di,!0),tr.getElevationAtPixel(vn+Er,wr,!0),tr.getElevationAtPixel(vn,wr+Er,!0),tr.getElevationAtPixel(vn+Vr,wr+Er,!0)]),Kn=Math.abs(kn[0]-kn[1]),sn=Math.abs(kn[2]-kn[3]),Ln=Math.abs(kn[0]-kn[2])+Math.abs(kn[1]-kn[3]),Pn=Math.min(.25,.5*Lt*(Kn+sn)/Qi),jn=Math.min(.25,.5*Lt*Ln/Xi);var tr,vn,wr,Vr,Er;return ii+Math.max(Pn*dt,jn*Rt)}(y,S,G):X;return{base:X+(0===h)?-1:h,top:K?Math.max(ce+g,X+h+2):X+g}}const Zy=Ai([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Af}=Zy,Ov=Ai([{name:"a_packed",components:4,type:"Float32"}]),{members:Ky}=Ov,Jy=Ft.types,Qy=Math.cos(Math.PI/180*37.5);class D0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new ki,this.layoutVertexArray2=new An,this.indexArray=new ta,this.programConfigurations=new rh(s.layers,s.zoom),this.segments=new nl,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,g,y){this.hasPattern=ap("line",this.layers,h);const S=this.layers[0].layout.get("line-sort-key"),R=[];for(const{feature:ce,id:pe,index:_e,sourceLayerIndex:Ae}of s){const Oe=this.layers[0]._featureFilter.needGeometry,Ue=wu(ce,Oe);if(!this.layers[0]._featureFilter.filter(new de(this.zoom),Ue,g))continue;const dt=S?S.evaluate(Ue,{},g):void 0,Rt={id:pe,properties:ce.properties,type:ce.type,sourceLayerIndex:Ae,index:_e,geometry:Oe?Ue.geometry:Oh(ce,g,y),patterns:{},sortKey:dt};R.push(Rt)}S&&R.sort((ce,pe)=>ce.sortKey-pe.sortKey);const{lineAtlas:G,featureIndex:X}=h,K=this.addConstantDashes(G);for(const ce of R){const{geometry:pe,index:_e,sourceLayerIndex:Ae}=ce;if(K&&this.addFeatureDashes(ce,G),this.hasPattern){const Oe=Tf("line",this.layers,ce,this.zoom,h);this.patternFeatures.push(Oe)}else this.addFeature(ce,pe,_e,g,G.positions,h.availableImages);X.insert(s[_e].feature,pe,_e,Ae,this.index)}}addConstantDashes(s){let h=!1;for(const g of this.layers){const y=g.paint.get("line-dasharray").value,S=g.layout.get("line-cap").value;if("constant"!==y.kind||"constant"!==S.kind)h=!0;else{const R=S.value,G=y.value;if(!G)continue;s.addDash(G,R)}}return h}addFeatureDashes(s,h){const g=this.zoom;for(const y of this.layers){const S=y.paint.get("line-dasharray").value,R=y.layout.get("line-cap").value;if("constant"===S.kind&&"constant"===R.kind)continue;let G,X;if("constant"===S.kind){if(G=S.value,!G)continue}else G=S.evaluate({zoom:g},s);X="constant"===R.kind?R.value:R.evaluate({zoom:g},s),h.addDash(G,X),s.patterns[y.id]=h.getKey(G,X)}}update(s,h,g,y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,g,y)}addFeatures(s,h,g,y,S){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,h,g,y)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Ky)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,g,y,S,R){const G=this.layers[0].layout,X=G.get("line-join").evaluate(s,{}),K=G.get("line-cap").evaluate(s,{}),ce=G.get("line-miter-limit"),pe=G.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const _e of h)this.addLine(_e,s,X,K,ce,pe);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,g,S,R,y)}addLine(s,h,g,y,S,R){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Rt=0;Rt<s.length-1;Rt++)this.totalDistance+=s[Rt].dist(s[Rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const G="Polygon"===Jy[h.type];let X=s.length;for(;X>=2&&s[X-1].equals(s[X-2]);)X--;let K=0;for(;K<X-1&&s[K].equals(s[K+1]);)K++;if(X<(G?3:2))return;"bevel"===g&&(S=1.05);const ce=this.overscaling<=16?15*zr/(512*this.overscaling):0,pe=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let _e,Ae,Oe,Ue,dt;this.e1=this.e2=-1,G&&(_e=s[X-2],dt=s[K].sub(_e)._unit()._perp());for(let Rt=K;Rt<X;Rt++){if(Oe=Rt===X-1?G?s[K+1]:void 0:s[Rt+1],Oe&&s[Rt].equals(Oe))continue;dt&&(Ue=dt),_e&&(Ae=_e),_e=s[Rt],dt=Oe?Oe.sub(_e)._unit()._perp():Ue,Ue=Ue||dt;let ii=Ue.add(dt);0===ii.x&&0===ii.y||ii._unit();const Lt=Ue.x*dt.x+Ue.y*dt.y,Jt=ii.x*dt.x+ii.y*dt.y,di=0!==Jt?1/Jt:1/0,li=2*Math.sqrt(2-2*Jt),Qi=Jt<Qy&&Ae&&Oe,Xi=Ue.x*dt.y-Ue.y*dt.x>0;if(Qi&&Rt>K){const sn=_e.dist(Ae);if(sn>2*ce){const Ln=_e.sub(_e.sub(Ae)._mult(ce/sn)._round());this.updateDistance(Ae,Ln),this.addCurrentVertex(Ln,Ue,0,0,pe),Ae=Ln}}const kn=Ae&&Oe;let Kn=kn?g:G?"butt":y;if(kn&&"round"===Kn&&(di<R?Kn="miter":di<=2&&(Kn="fakeround")),"miter"===Kn&&di>S&&(Kn="bevel"),"bevel"===Kn&&(di>2&&(Kn="flipbevel"),di<S&&(Kn="miter")),Ae&&this.updateDistance(Ae,_e),"miter"===Kn)ii._mult(di),this.addCurrentVertex(_e,ii,0,0,pe);else if("flipbevel"===Kn){if(di>100)ii=dt.mult(-1);else{const sn=di*Ue.add(dt).mag()/Ue.sub(dt).mag();ii._perp()._mult(sn*(Xi?-1:1))}this.addCurrentVertex(_e,ii,0,0,pe),this.addCurrentVertex(_e,ii.mult(-1),0,0,pe)}else if("bevel"===Kn||"fakeround"===Kn){const sn=-Math.sqrt(di*di-1),Ln=Xi?sn:0,Pn=Xi?0:sn;if(Ae&&this.addCurrentVertex(_e,Ue,Ln,Pn,pe),"fakeround"===Kn){const jn=Math.round(180*li/Math.PI/20);for(let tr=1;tr<jn;tr++){let vn=tr/jn;if(.5!==vn){const Vr=vn-.5;vn+=vn*Vr*(vn-1)*((1.0904+Lt*(Lt*(3.55645-1.43519*Lt)-3.2452))*Vr*Vr+(.848013+Lt*(.215638*Lt-1.06021)))}const wr=dt.sub(Ue)._mult(vn)._add(Ue)._unit()._mult(Xi?-1:1);this.addHalfVertex(_e,wr.x,wr.y,!1,Xi,0,pe)}}Oe&&this.addCurrentVertex(_e,dt,-Ln,-Pn,pe)}else if("butt"===Kn)this.addCurrentVertex(_e,ii,0,0,pe);else if("square"===Kn){const sn=Ae?1:-1;Ae||this.addCurrentVertex(_e,ii,sn,sn,pe),this.addCurrentVertex(_e,ii,0,0,pe),Ae&&this.addCurrentVertex(_e,ii,sn,sn,pe)}else"round"===Kn&&(Ae&&(this.addCurrentVertex(_e,Ue,0,0,pe),this.addCurrentVertex(_e,Ue,1,1,pe,!0)),Oe&&(this.addCurrentVertex(_e,dt,-1,-1,pe,!0),this.addCurrentVertex(_e,dt,0,0,pe)));if(Qi&&Rt<X-1){const sn=_e.dist(Oe);if(sn>2*ce){const Ln=_e.add(Oe.sub(_e)._mult(ce/sn)._round());this.updateDistance(_e,Ln),this.addCurrentVertex(Ln,dt,0,0,pe),_e=Ln}}}}addCurrentVertex(s,h,g,y,S,R=!1){const G=h.y*y-h.x,X=-h.y-h.x*y;this.addHalfVertex(s,h.x+h.y*g,h.y-h.x*g,R,!1,g,S),this.addHalfVertex(s,G,X,R,!0,-y,S)}addHalfVertex({x:s,y:h},g,y,S,R,G,X){this.layoutVertexArray.emplaceBack((s<<1)+(S?1:0),(h<<1)+(R?1:0),Math.round(63*g)+128,Math.round(63*y)+128,1+(0===G?0:G<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const K=X.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,K),X.primitiveLength++),R?this.e2=K:this.e1=K}updateScaledDistance(){if(this.lineClips){const s=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=s*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}Tr(D0,"LineBucket",{omit:["layers","patternFeatures"]});const Lv=new Gt({"line-cap":new _t(N.layout_line["line-cap"]),"line-join":new _t(N.layout_line["line-join"]),"line-miter-limit":new Ne(N.layout_line["line-miter-limit"]),"line-round-limit":new Ne(N.layout_line["line-round-limit"]),"line-sort-key":new _t(N.layout_line["line-sort-key"])});var P_={paint:new Gt({"line-opacity":new _t(N.paint_line["line-opacity"]),"line-color":new _t(N.paint_line["line-color"]),"line-translate":new Ne(N.paint_line["line-translate"]),"line-translate-anchor":new Ne(N.paint_line["line-translate-anchor"]),"line-width":new _t(N.paint_line["line-width"]),"line-gap-width":new _t(N.paint_line["line-gap-width"]),"line-offset":new _t(N.paint_line["line-offset"]),"line-blur":new _t(N.paint_line["line-blur"]),"line-dasharray":new _t(N.paint_line["line-dasharray"]),"line-pattern":new _t(N.paint_line["line-pattern"]),"line-gradient":new zt(N.paint_line["line-gradient"]),"line-trim-offset":new Ne(N.paint_line["line-trim-offset"])}),layout:Lv};const ef=new class extends _t{possiblyEvaluate(c,s){return s=new de(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(c,s)}evaluate(c,s,h,g){return s=fr({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(c,s,h,g)}}(P_.paint.properties["line-width"].specification);function Pv(c,s){return s>0?s+2*c:c}ef.useIntegerZoom=!0;const A0=Ai([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Al=Ai([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Xl=Ai([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ai([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const F_=Ai([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),e1=Ai([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ai([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const B_=Ai([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),t1=Ai([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ai([{name:"triangle",components:3,type:"Uint16"}]),Ai([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ai([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ai([{type:"Float32",name:"offsetX"}]),Ai([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Wc=24;const Nh=128;function Fv(c,s){const{expression:h}=s;if("constant"===h.kind)return{kind:"constant",layoutSize:h.evaluate(new de(c+1))};if("source"===h.kind)return{kind:"source"};{const{zoomStops:g,interpolationType:y}=h;let S=0;for(;S<g.length&&g[S]<=c;)S++;S=Math.max(0,S-1);let R=S;for(;R<g.length&&g[R]<c+1;)R++;R=Math.min(g.length-1,R);const G=g[S],X=g[R];return"composite"===h.kind?{kind:"composite",minZoom:G,maxZoom:X,interpolationType:y}:{kind:"camera",minZoom:G,maxZoom:X,minSize:h.evaluate(new de(G)),maxSize:h.evaluate(new de(X)),interpolationType:y}}}function Mm(c,{uSize:s,uSizeT:h},{lowerSize:g,upperSize:y}){return"source"===c.kind?g/Nh:"composite"===c.kind?ps(g/Nh,y/Nh,h):s}function tf(c,s){let h=0,g=0;if("constant"===c.kind)g=c.layoutSize;else if("source"!==c.kind){const{interpolationType:y,minZoom:S,maxZoom:R}=c,G=y?Ki(wc.interpolationFactor(y,s,S,R),0,1):0;"camera"===c.kind?g=ps(c.minSize,c.maxSize,G):h=G}return{uSizeT:h,uSize:g}}var Bv=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Nh,evaluateSizeForFeature:Mm,evaluateSizeForZoom:tf,getSizeData:Fv});function n1(c,s,h){return c.sections.forEach(g=>{g.text=function(y,S,R){const G=S.layout.get("text-transform").evaluate(R,{});return"uppercase"===G?y=y.toLocaleUpperCase():"lowercase"===G&&(y=y.toLocaleLowerCase()),re.applyArabicShaping&&(y=re.applyArabicShaping(y)),y}(g.text,s,h)}),c}const Ag={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function I0(c){return"\ufe36"===c||"\ufe48"===c||"\ufe38"===c||"\ufe44"===c||"\ufe42"===c||"\ufe3e"===c||"\ufe3c"===c||"\ufe3a"===c||"\ufe18"===c||"\ufe40"===c||"\ufe10"===c||"\ufe13"===c||"\ufe14"===c||"\uff40"===c||"\uffe3"===c||"\ufe11"===c||"\ufe12"===c}function Ud(c){return"\ufe35"===c||"\ufe47"===c||"\ufe37"===c||"\ufe43"===c||"\ufe41"===c||"\ufe3d"===c||"\ufe3b"===c||"\ufe39"===c||"\ufe17"===c||"\ufe3f"===c}var hh=Eo,Nv=function(c,s,h,g,y){var S,R,G=8*y-g-1,X=(1<<G)-1,K=X>>1,ce=-7,pe=h?y-1:0,_e=h?-1:1,Ae=c[s+pe];for(pe+=_e,S=Ae&(1<<-ce)-1,Ae>>=-ce,ce+=G;ce>0;S=256*S+c[s+pe],pe+=_e,ce-=8);for(R=S&(1<<-ce)-1,S>>=-ce,ce+=g;ce>0;R=256*R+c[s+pe],pe+=_e,ce-=8);if(0===S)S=1-K;else{if(S===X)return R?NaN:1/0*(Ae?-1:1);R+=Math.pow(2,g),S-=K}return(Ae?-1:1)*R*Math.pow(2,S-g)},zv=function(c,s,h,g,y,S){var R,G,X,K=8*S-y-1,ce=(1<<K)-1,pe=ce>>1,_e=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,Ae=g?0:S-1,Oe=g?1:-1,Ue=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(G=isNaN(s)?1:0,R=ce):(R=Math.floor(Math.log(s)/Math.LN2),s*(X=Math.pow(2,-R))<1&&(R--,X*=2),(s+=R+pe>=1?_e/X:_e*Math.pow(2,1-pe))*X>=2&&(R++,X/=2),R+pe>=ce?(G=0,R=ce):R+pe>=1?(G=(s*X-1)*Math.pow(2,y),R+=pe):(G=s*Math.pow(2,pe-1)*Math.pow(2,y),R=0));y>=8;c[h+Ae]=255&G,Ae+=Oe,G/=256,y-=8);for(R=R<<y|G,K+=y;K>0;c[h+Ae]=255&R,Ae+=Oe,R/=256,K-=8);c[h+Ae-Oe]|=128*Ue};function Eo(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Eo.Varint=0,Eo.Fixed64=1,Eo.Bytes=2,Eo.Fixed32=5;var M0=4294967296,N_=1/M0,Yv=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cu(c){return c.type===Eo.Bytes?c.readVarint()+c.pos:c.pos+1}function Gv(c,s,h){var g=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(g);for(var y=h.pos-1;y>=c;y--)h.buf[y+g]=h.buf[y]}function fh(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function z_(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function r1(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function Io(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function a1(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function Y_(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function R0(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function s1(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function G_(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function O0(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Rm(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function H_(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}Eo.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var g=this.readVarint(),y=g>>3,S=this.pos;this.type=7&g,c(y,s,this),this.pos===S&&this.skip(g)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=O0(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=H_(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=O0(this.buf,this.pos)+O0(this.buf,this.pos+4)*M0;return this.pos+=8,c},readSFixed64:function(){var c=O0(this.buf,this.pos)+H_(this.buf,this.pos+4)*M0;return this.pos+=8,c},readFloat:function(){var c=Nv(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Nv(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,g=this.buf;return s=127&(h=g[this.pos++]),h<128?s:(s|=(127&(h=g[this.pos++]))<<7,h<128?s:(s|=(127&(h=g[this.pos++]))<<14,h<128?s:(s|=(127&(h=g[this.pos++]))<<21,h<128?s:function(y,S,R){var G,X,K=R.buf;if(G=(112&(X=K[R.pos++]))>>4,X<128||(G|=(127&(X=K[R.pos++]))<<3,X<128)||(G|=(127&(X=K[R.pos++]))<<10,X<128)||(G|=(127&(X=K[R.pos++]))<<17,X<128)||(G|=(127&(X=K[R.pos++]))<<24,X<128)||(G|=(1&(X=K[R.pos++]))<<31,X<128))return function _s(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}(y,G,S);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=g[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&Yv?Yv.decode(this.buf.subarray(s,c)):function(h,g,y){for(var S="",R=g;R<y;){var G,X,K,ce=h[R],pe=null,_e=ce>239?4:ce>223?3:ce>191?2:1;if(R+_e>y)break;1===_e?ce<128&&(pe=ce):2===_e?128==(192&(G=h[R+1]))&&(pe=(31&ce)<<6|63&G)<=127&&(pe=null):3===_e?(X=h[R+2],128==(192&(G=h[R+1]))&&128==(192&X)&&((pe=(15&ce)<<12|(63&G)<<6|63&X)<=2047||pe>=55296&&pe<=57343)&&(pe=null)):4===_e&&(X=h[R+2],K=h[R+3],128==(192&(G=h[R+1]))&&128==(192&X)&&128==(192&K)&&((pe=(15&ce)<<18|(63&G)<<12|(63&X)<<6|63&K)<=65535||pe>=1114112)&&(pe=null)),null===pe?(pe=65533,_e=1):pe>65535&&(pe-=65536,S+=String.fromCharCode(pe>>>10&1023|55296),pe=56320|1023&pe),S+=String.fromCharCode(pe),R+=_e}return S}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==Eo.Bytes)return c.push(this.readVarint(s));var h=Cu(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==Eo.Bytes)return c.push(this.readSVarint());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Eo.Bytes)return c.push(this.readBoolean());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Eo.Bytes)return c.push(this.readFloat());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Eo.Bytes)return c.push(this.readDouble());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Eo.Bytes)return c.push(this.readFixed32());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Eo.Bytes)return c.push(this.readSFixed32());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Eo.Bytes)return c.push(this.readFixed64());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Eo.Bytes)return c.push(this.readSFixed64());var s=Cu(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===Eo.Varint)for(;this.buf[this.pos++]>127;);else if(s===Eo.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Eo.Fixed32)this.pos+=4;else{if(s!==Eo.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Rm(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Rm(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Rm(this.buf,-1&c,this.pos),Rm(this.buf,Math.floor(c*N_),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Rm(this.buf,-1&c,this.pos),Rm(this.buf,Math.floor(c*N_),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var g,y,S,G;if(s>=0?(g=s%4294967296|0,y=s/4294967296|0):(y=~(-s/4294967296),4294967295^(g=~(-s%4294967296))?g=g+1|0:(g=0,y=y+1|0)),s>=0x10000000000000000||s<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),S=g,(G=h).buf[G.pos++]=127&S|128,S>>>=7,G.buf[G.pos++]=127&S|128,S>>>=7,G.buf[G.pos++]=127&S|128,S>>>=7,G.buf[G.pos++]=127&S|128,G.buf[G.pos]=127&(S>>>=7),function(S,R){var G=(7&S)<<4;R.buf[R.pos++]|=G|((S>>>=3)?128:0),S&&(R.buf[R.pos++]=127&S|((S>>>=7)?128:0),S&&(R.buf[R.pos++]=127&S|((S>>>=7)?128:0),S&&(R.buf[R.pos++]=127&S|((S>>>=7)?128:0),S&&(R.buf[R.pos++]=127&S|((S>>>=7)?128:0),S&&(R.buf[R.pos++]=127&S)))))}(y,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(g,y,S){for(var R,G,X=0;X<y.length;X++){if((R=y.charCodeAt(X))>55295&&R<57344){if(!G){R>56319||X+1===y.length?(g[S++]=239,g[S++]=191,g[S++]=189):G=R;continue}if(R<56320){g[S++]=239,g[S++]=191,g[S++]=189,G=R;continue}R=G-55296<<10|R-56320|65536,G=null}else G&&(g[S++]=239,g[S++]=191,g[S++]=189,G=null);R<128?g[S++]=R:(R<2048?g[S++]=R>>6|192:(R<65536?g[S++]=R>>12|224:(g[S++]=R>>18|240,g[S++]=R>>12&63|128),g[S++]=R>>6&63|128),g[S++]=63&R|128)}return S}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&Gv(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),zv(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),zv(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var g=this.pos-h;g>=128&&Gv(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g},writeMessage:function(c,s,h){this.writeTag(c,Eo.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,fh,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,z_,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,a1,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,r1,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,Io,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,Y_,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,R0,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,s1,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,G_,s)},writeBytesField:function(c,s){this.writeTag(c,Eo.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,Eo.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,Eo.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,Eo.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,Eo.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,Eo.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,Eo.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,Eo.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,Eo.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,Eo.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var L0=lt(hh);const lp=3;function Hv(c,s,h){s.glyphs=[],1===c&&h.readMessage(Vv,s)}function Vv(c,s,h){if(3===c){const{id:g,bitmap:y,width:S,height:R,left:G,top:X,advance:K}=h.readMessage(V_,{});s.glyphs.push({id:g,bitmap:new dh({width:S+2*lp,height:R+2*lp},y),metrics:{width:S,height:R,left:G,top:X,advance:K}})}else 4===c?s.ascender=h.readSVarint():5===c&&(s.descender=h.readSVarint())}function V_(c,s,h){1===c?s.id=h.readVarint():2===c?s.bitmap=h.readBytes():3===c?s.width=h.readVarint():4===c?s.height=h.readVarint():5===c?s.left=h.readSVarint():6===c?s.top=h.readSVarint():7===c&&(s.advance=h.readVarint())}const U_=lp;function Uv(c){let s=0,h=0;for(const R of c)s+=R.w*R.h,h=Math.max(h,R.w);c.sort((R,G)=>G.h-R.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let y=0,S=0;for(const R of c)for(let G=g.length-1;G>=0;G--){const X=g[G];if(!(R.w>X.w||R.h>X.h)){if(R.x=X.x,R.y=X.y,S=Math.max(S,R.y+R.h),y=Math.max(y,R.x+R.w),R.w===X.w&&R.h===X.h){const K=g.pop();G<g.length&&(g[G]=K)}else R.h===X.h?(X.x+=R.w,X.w-=R.w):R.w===X.w?(X.y+=R.h,X.h-=R.h):(g.push({x:X.x+R.w,y:X.y,w:X.w-R.w,h:R.h}),X.y+=R.h,X.h-=R.h);break}}return{w:y,h:S,fill:s/(y*S)||0}}const Gu=1;class xl{constructor(s,{pixelRatio:h,version:g,stretchX:y,stretchY:S,content:R}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=y,this.stretchY=S,this.content=R,this.version=g}get tl(){return[this.paddedRect.x+Gu,this.paddedRect.y+Gu]}get br(){return[this.paddedRect.x+this.paddedRect.w-Gu,this.paddedRect.y+this.paddedRect.h-Gu]}get displaySize(){return[(this.paddedRect.w-2*Gu)/this.pixelRatio,(this.paddedRect.h-2*Gu)/this.pixelRatio]}}class If{constructor(s,h){const g={},y={};this.haveRenderCallbacks=[];const S=[];this.addImages(s,g,S),this.addImages(h,y,S);const{w:R,h:G}=Uv(S),X=new cl({width:R||1,height:G||1});for(const K in s){const ce=s[K],pe=g[K].paddedRect;cl.copy(ce.data,X,{x:0,y:0},{x:pe.x+Gu,y:pe.y+Gu},ce.data)}for(const K in h){const ce=h[K],pe=y[K].paddedRect,_e=pe.x+Gu,Ae=pe.y+Gu,Oe=ce.data.width,Ue=ce.data.height;cl.copy(ce.data,X,{x:0,y:0},{x:_e,y:Ae},ce.data),cl.copy(ce.data,X,{x:0,y:Ue-1},{x:_e,y:Ae-1},{width:Oe,height:1}),cl.copy(ce.data,X,{x:0,y:0},{x:_e,y:Ae+Ue},{width:Oe,height:1}),cl.copy(ce.data,X,{x:Oe-1,y:0},{x:_e-1,y:Ae},{width:1,height:Ue}),cl.copy(ce.data,X,{x:0,y:0},{x:_e+Oe,y:Ae},{width:1,height:Ue})}this.image=X,this.iconPositions=g,this.patternPositions=y}addImages(s,h,g){for(const y in s){const S=s[y],R={x:0,y:0,w:S.data.width+2*Gu,h:S.data.height+2*Gu};g.push(R),h[y]=new xl(R,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>s.hasImage(g)),s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in s.updatedImages)this.patchUpdatedImage(this.iconPositions[g],s.getImage(g),h),this.patchUpdatedImage(this.patternPositions[g],s.getImage(g),h)}patchUpdatedImage(s,h,g){if(!s||!h||s.version===h.version)return;s.version=h.version;const[y,S]=s.tl;g.update(h.data,void 0,{x:y,y:S})}}Tr(xl,"ImagePosition"),Tr(If,"ImageAtlas");const Hu={horizontal:1,vertical:2,horizontalOnly:3},jv=-17;class Ig{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const g=new Ig;return g.scale=s||1,g.fontStack=h,g}static forImage(s){const h=new Ig;return h.imageName=s,h}}class Gp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const g=new Gp;for(let y=0;y<s.sections.length;y++){const S=s.sections[y];S.image?g.addImageSection(S):g.addTextSection(S,h)}return g}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(s){this.text=function(h,g){let y="";for(let S=0;S<h.length;S++){const R=h.charCodeAt(S+1)||null,G=h.charCodeAt(S-1)||null;y+=!g&&(R&&sc(R)&&!Ag[h[S+1]]||G&&sc(G)&&!Ag[h[S-1]])||!Ag[h[S]]?h[S]:Ag[h[S]]}return y}(this.text,s)}trim(){let s=0;for(let g=0;g<this.text.length&&Eu[this.text.charCodeAt(g)];g++)s++;let h=this.text.length;for(let g=this.text.length-1;g>=0&&g>=s&&Eu[this.text.charCodeAt(g)];g--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const g=new Gp;return g.text=this.text.substring(s,h),g.sectionIndex=this.sectionIndex.slice(s,h),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(Ig.forText(s.scale,s.fontStack||h));const g=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(g)}addImageSection(s){const h=s.image?s.image.name:"";if(0===h.length)return void pr("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Ig.forImage(h)),this.sectionIndex.push(this.sections.length-1)):pr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ic(c,s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe){const Ue=Gp.fromFeature(c,y);pe===Hu.vertical&&Ue.verticalizePunctuation(_e);let dt=[];const Rt=function(li,Qi,Xi,kn,Kn,sn){if(!li)return[];const Ln=[],Pn=function(wr,Vr,Er,rs,ir,ua){let as=0;for(let to=0;to<wr.length();to++){const ss=wr.getSection(to);as+=j_(wr.getCharCode(to),ss,rs,ir,Vr,ua)}return as/Math.max(1,Math.ceil(as/Er))}(li,Qi,Xi,kn,Kn,sn),jn=li.text.indexOf("\u200b")>=0;let tr=0;for(let wr=0;wr<li.length();wr++){const Vr=li.getSection(wr),Er=li.getCharCode(wr);if(Eu[Er]||(tr+=j_(Er,Vr,kn,Kn,Qi,sn)),wr<li.length()-1){const rs=!((vn=Er)<11904||!(mr["Bopomofo Extended"](vn)||mr.Bopomofo(vn)||mr["CJK Compatibility Forms"](vn)||mr["CJK Compatibility Ideographs"](vn)||mr["CJK Compatibility"](vn)||mr["CJK Radicals Supplement"](vn)||mr["CJK Strokes"](vn)||mr["CJK Symbols and Punctuation"](vn)||mr["CJK Unified Ideographs Extension A"](vn)||mr["CJK Unified Ideographs"](vn)||mr["Enclosed CJK Letters and Months"](vn)||mr["Halfwidth and Fullwidth Forms"](vn)||mr.Hiragana(vn)||mr["Ideographic Description Characters"](vn)||mr["Kangxi Radicals"](vn)||mr["Katakana Phonetic Extensions"](vn)||mr.Katakana(vn)||mr["Vertical Forms"](vn)||mr["Yi Radicals"](vn)||mr["Yi Syllables"](vn)));(o1[Er]||rs||Vr.imageName)&&Ln.push(X_(wr+1,tr,Pn,Ln,W_(Er,li.getCharCode(wr+1),rs&&jn),!1))}}var vn;return q_(X_(li.length(),tr,Pn,Ln,0,!0))}(Ue,K,S,s,g,Ae),{processBidirectionalText:ii,processStyledBidirectionalText:Lt}=re;if(ii&&1===Ue.sections.length){const li=ii(Ue.toString(),Rt);for(const Qi of li){const Xi=new Gp;Xi.text=Qi,Xi.sections=Ue.sections;for(let kn=0;kn<Qi.length;kn++)Xi.sectionIndex.push(0);dt.push(Xi)}}else if(Lt){const li=Lt(Ue.text,Ue.sectionIndex,Rt);for(const Qi of li){const Xi=new Gp;Xi.text=Qi[0],Xi.sectionIndex=Qi[1],Xi.sections=Ue.sections,dt.push(Xi)}}else dt=function(li,Qi){const Xi=[],kn=li.text;let Kn=0;for(const sn of Qi)Xi.push(li.substring(Kn,sn)),Kn=sn;return Kn<kn.length&&Xi.push(li.substring(Kn,kn.length)),Xi}(Ue,Rt);const Jt=[],di={positionedLines:Jt,text:Ue.toString(),top:ce[1],bottom:ce[1],left:ce[0],right:ce[0],writingMode:pe,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(li,Qi,Xi,kn,Kn,sn,Ln,Pn,jn,tr,vn,wr){let Vr=0,Er=0,rs=0;const ir="right"===Pn?1:"left"===Pn?0:.5;let ua=!1;for(const us of Kn){const ds=us.getSections();for(const Mo of ds){if(Mo.imageName)continue;const Po=Qi[Mo.fontStack];if(Po&&(ua=void 0!==Po.ascender&&void 0!==Po.descender,!ua))break}if(!ua)break}let as=0;for(const us of Kn){us.trim();const ds=us.getMaxScale(),Mo=(ds-1)*Wc,Po={positionedGlyphs:[],lineOffset:0};li.positionedLines[as]=Po;const Fo=Po.positionedGlyphs;let Ro=0;if(!us.length()){Er+=sn,++as;continue}let ul=0,Il=0;for(let Oo=0;Oo<us.length();Oo++){const Xc=us.getSection(Oo),fc=us.getSectionIndex(Oo),bl=us.getCharCode(Oo);let so=Xc.scale,pc=null,Bo=null,Ad=null,mc=Wc,Tu=0;const ou=!(jn===Hu.horizontal||!vn&&!eh(bl)||vn&&(Eu[bl]||(to=bl,mr.Arabic(to)||mr["Arabic Supplement"](to)||mr["Arabic Extended-A"](to)||mr["Arabic Presentation Forms-A"](to)||mr["Arabic Presentation Forms-B"](to))));if(Xc.imageName){const $u=kn[Xc.imageName];if(!$u)continue;Ad=Xc.imageName,li.iconsInText=li.iconsInText||!0,Bo=$u.paddedRect;const lu=$u.displaySize;so=so*Wc/wr,pc={width:lu[0],height:lu[1],left:Gu,top:-U_,advance:ou?lu[1]:lu[0],localGlyph:!1},Tu=ua?-pc.height*so:jv+ds*Wc-lu[1]*so,mc=pc.advance;const Of=(ou?lu[0]:lu[1])*so-Wc*ds;Of>0&&Of>Ro&&(Ro=Of)}else{const $u=Xi[Xc.fontStack];if(!$u)continue;$u[bl]&&(Bo=$u[bl]);const lu=Qi[Xc.fontStack];if(!lu)continue;const Of=lu.glyphs[bl];if(!Of)continue;if(pc=Of.metrics,mc=8203!==bl?Wc:0,ua){const Z0=void 0!==lu.ascender?Math.abs(lu.ascender):0,K0=void 0!==lu.descender?Math.abs(lu.descender):0,J0=(Z0+K0)*so;ul<J0&&(ul=J0,Il=(Z0-K0)/2*so),Tu=-Z0*so}else Tu=jv+(ds-so)*Wc}ou?(li.verticalizable=!0,Fo.push({glyph:bl,imageName:Ad,x:Vr,y:Er+Tu,vertical:ou,scale:so,localGlyph:pc.localGlyph,fontStack:Xc.fontStack,sectionIndex:fc,metrics:pc,rect:Bo}),Vr+=mc*so+tr):(Fo.push({glyph:bl,imageName:Ad,x:Vr,y:Er+Tu,vertical:ou,scale:so,localGlyph:pc.localGlyph,fontStack:Xc.fontStack,sectionIndex:fc,metrics:pc,rect:Bo}),Vr+=pc.advance*so+tr)}0!==Fo.length&&(rs=Math.max(Vr-tr,rs),ua?Wv(Fo,ir,Ro,Il,sn*ds/2):Wv(Fo,ir,Ro,0,sn/2)),Vr=0;const hc=sn*ds+Ro;Po.lineOffset=Math.max(Ro,Mo),Er+=hc,++as}var to;const ss=Er,{horizontalAlign:Sa,verticalAlign:Uo}=$v(Ln);(function(us,ds,Mo,Po,Fo,Ro){const ul=(ds-Mo)*Fo,Il=-Ro*Po;for(const hc of us)for(const Oo of hc.positionedGlyphs)Oo.x+=ul,Oo.y+=Il})(li.positionedLines,ir,Sa,Uo,rs,ss),li.top+=-Uo*ss,li.bottom=li.top+ss,li.left+=-Sa*rs,li.right=li.left+rs,li.hasBaseline=ua}(di,s,h,g,dt,R,G,X,pe,K,_e,Oe),!function(li){for(const Qi of li)if(0!==Qi.positionedGlyphs.length)return!1;return!0}(Jt)&&di}const Eu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},o1={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function j_(c,s,h,g,y,S){if(s.imageName){const R=g[s.imageName];return R?R.displaySize[0]*s.scale*Wc/S+y:0}{const R=h[s.fontStack],G=R&&R.glyphs[c];return G?G.metrics.advance*s.scale+y:0}}function $_(c,s,h,g){const y=Math.pow(c-s,2);return g?c<s?y/2:2*y:y+Math.abs(h)*h}function W_(c,s,h){let g=0;return 10===c&&(g-=1e4),h&&(g+=150),40!==c&&65288!==c||(g+=50),41!==s&&65289!==s||(g+=50),g}function X_(c,s,h,g,y,S){let R=null,G=$_(s,h,y,S);for(const X of g){const K=$_(s-X.x,h,y,S)+X.badness;K<=G&&(R=X,G=K)}return{index:c,x:s,priorBreak:R,badness:G}}function q_(c){return c?q_(c.priorBreak).concat(c.index):[]}function $v(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function Wv(c,s,h,g,y){if(!(s||h||g||y))return;const S=c.length-1,R=c[S],G=(R.x+R.metrics.advance*R.scale)*s;for(let X=0;X<=S;X++)c[X].x-=G,c[X].y+=h+g+y}function Z_(c,s,h){const{horizontalAlign:g,verticalAlign:y}=$v(h),S=s[0]-c.displaySize[0]*g,R=s[1]-c.displaySize[1]*y;return{image:c,top:R,bottom:R+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function K_(c,s,h,g,y,S){const R=c.image;let G;if(R.content){const dt=R.content,Rt=R.pixelRatio||1;G=[dt[0]/Rt,dt[1]/Rt,R.displaySize[0]-dt[2]/Rt,R.displaySize[1]-dt[3]/Rt]}const X=s.left*S,K=s.right*S;let ce,pe,_e,Ae;"width"===h||"both"===h?(Ae=y[0]+X-g[3],pe=y[0]+K+g[1]):(Ae=y[0]+(X+K-R.displaySize[0])/2,pe=Ae+R.displaySize[0]);const Oe=s.top*S,Ue=s.bottom*S;return"height"===h||"both"===h?(ce=y[1]+Oe-g[0],_e=y[1]+Ue+g[2]):(ce=y[1]+(Oe+Ue-R.displaySize[1])/2,_e=ce+R.displaySize[1]),{image:R,top:ce,right:pe,bottom:_e,left:Ae,collisionPadding:G}}class Mf extends Dt{constructor(s,h,g,y,S){super(s,h),this.angle=y,this.z=g,void 0!==S&&(this.segment=S)}clone(){return new Mf(this.x,this.y,this.z,this.angle,this.segment)}}function Xv(c,s,h,g,y){if(void 0===s.segment)return!0;let S=s,R=s.segment+1,G=0;for(;G>-h/2;){if(R--,R<0)return!1;G-=c[R].dist(S),S=c[R]}G+=c[R].dist(c[R+1]),R++;const X=[];let K=0;for(;G<h/2;){const ce=c[R],pe=c[R+1];if(!pe)return!1;let _e=c[R-1].angleTo(ce)-ce.angleTo(pe);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:G,angleDelta:_e}),K+=_e;G-X[0].distance>g;)K-=X.shift().angleDelta;if(K>y)return!1;R++,G+=ce.dist(pe)}return!0}function qv(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function J_(c,s,h){return c?.6*s*h:0}function Zv(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function l1(c,s,h,g,y,S){const R=J_(h,y,S),G=Zv(h,g)*S;let X=0;const K=qv(c)/2;for(let ce=0;ce<c.length-1;ce++){const pe=c[ce],_e=c[ce+1],Ae=pe.dist(_e);if(X+Ae>K){const Oe=(K-X)/Ae,Ue=ps(pe.x,_e.x,Oe),dt=ps(pe.y,_e.y,Oe),Rt=new Mf(Ue,dt,0,_e.angleTo(pe),ce);return!R||Xv(c,Rt,G,R,s)?Rt:void 0}X+=Ae}}function c1(c,s,h,g,y,S,R,G,X){const K=J_(g,S,R),ce=Zv(g,y),pe=ce*R,_e=0===c[0].x||c[0].x===X||0===c[0].y||c[0].y===X;return s-pe<s/4&&(s=pe+s/4),Hp(c,_e?s/2*G%s:(ce/2+2*S)*R*G%s,s,K,h,pe,_e,!1,X)}function Hp(c,s,h,g,y,S,R,G,X){const K=S/2,ce=qv(c);let pe=0,_e=s-h,Ae=[];for(let Oe=0;Oe<c.length-1;Oe++){const Ue=c[Oe],dt=c[Oe+1],Rt=Ue.dist(dt),ii=dt.angleTo(Ue);for(;_e+h<pe+Rt;){_e+=h;const Lt=(_e-pe)/Rt,Jt=ps(Ue.x,dt.x,Lt),di=ps(Ue.y,dt.y,Lt);if(Jt>=0&&Jt<X&&di>=0&&di<X&&_e-K>=0&&_e+K<=ce){const li=new Mf(Jt,di,0,ii,Oe);li._round(),g&&!Xv(c,li,S,g,y)||Ae.push(li)}}pe+=Rt}return G||Ae.length||R||(Ae=Hp(c,pe/2,h,g,y,S,R,!0,X)),Ae}function Q_(c,s,h,g,y){const S=[];for(let R=0;R<c.length;R++){const G=c[R];let X;for(let K=0;K<G.length-1;K++){let ce=G[K],pe=G[K+1];ce.x<s&&pe.x<s||(ce.x<s?ce=new Dt(s,ce.y+(s-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round():pe.x<s&&(pe=new Dt(s,ce.y+(s-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round()),ce.y<h&&pe.y<h||(ce.y<h?ce=new Dt(ce.x+(h-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),h)._round():pe.y<h&&(pe=new Dt(ce.x+(h-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),h)._round()),ce.x>=g&&pe.x>=g||(ce.x>=g?ce=new Dt(g,ce.y+(g-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round():pe.x>=g&&(pe=new Dt(g,ce.y+(g-ce.x)/(pe.x-ce.x)*(pe.y-ce.y))._round()),ce.y>=y&&pe.y>=y||(ce.y>=y?ce=new Dt(ce.x+(y-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),y)._round():pe.y>=y&&(pe=new Dt(ce.x+(y-ce.y)/(pe.y-ce.y)*(pe.x-ce.x),y)._round()),X&&ce.equals(X[X.length-1])||(X=[ce],S.push(X)),X.push(pe)))))}}return S}Tr(Mf,"Anchor");const Mg=1e20;function ey(c,s,h,g,y,S,R,G,X){for(let K=s;K<s+g;K++)ty(c,h*S+K,S,y,R,G,X);for(let K=h;K<h+y;K++)ty(c,K*S+s,1,g,R,G,X)}function ty(c,s,h,g,y,S,R){S[0]=0,R[0]=-Mg,R[1]=Mg,y[0]=c[s];for(let G=1,X=0,K=0;G<g;G++){y[G]=c[s+G*h];const ce=G*G;do{const pe=S[X];K=(y[G]-y[pe]+ce-pe*pe)/(G-pe)/2}while(K<=R[X]&&--X>-1);X++,S[X]=G,R[X]=K,R[X+1]=Mg}for(let G=0,X=0;G<g;G++){for(;R[X+1]<G;)X++;const K=S[X],ce=G-K;c[s+G*h]=y[K]+ce*ce}}const zh=2,P0={none:0,ideographs:1,all:2};class Vp{constructor(s,h,g){this.requestManager=s,this.localGlyphMode=h,this.localFontFamily=g,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s){this.url=s}getGlyphs(s,h){const g=[];for(const y in s)for(const S of s[y])g.push({stack:y,id:S});Nn(g,({stack:y,id:S},R)=>{let G=this.entries[y];G||(G=this.entries[y]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let X=G.glyphs[S];if(void 0!==X)return void R(null,{stack:y,id:S,glyph:X});if(X=this._tinySDF(G,y,S),X)return G.glyphs[S]=X,void R(null,{stack:y,id:S,glyph:X});const K=Math.floor(S/256);if(256*K>65535)return void R(new Error("glyphs > 65535 not supported"));if(G.ranges[K])return void R(null,{stack:y,id:S,glyph:X});let ce=G.requests[K];ce||(ce=G.requests[K]=[],Vp.loadGlyphRange(y,K,this.url,this.requestManager,(pe,_e)=>{if(_e){G.ascender=_e.ascender,G.descender=_e.descender;for(const Ae in _e.glyphs)this._doesCharSupportLocalGlyph(+Ae)||(G.glyphs[+Ae]=_e.glyphs[+Ae]);G.ranges[K]=!0}for(const Ae of ce)Ae(pe,_e);delete G.requests[K]})),ce.push((pe,_e)=>{pe?R(pe):_e&&R(null,{stack:y,id:S,glyph:_e.glyphs[S]||null})})},(y,S)=>{if(y)h(y);else if(S){const R={};for(const{stack:G,id:X,glyph:K}of S)void 0===R[G]&&(R[G]={}),void 0===R[G].glyphs&&(R[G].glyphs={}),R[G].glyphs[X]=K&&{id:K.id,bitmap:K.bitmap.clone(),metrics:K.metrics},R[G].ascender=this.entries[G].ascender,R[G].descender=this.entries[G].descender;h(null,R)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==P0.none&&(this.localGlyphMode===P0.all?!!this.localFontFamily:!!this.localFontFamily&&(mr["CJK Unified Ideographs"](s)||mr["Hangul Syllables"](s)||mr.Hiragana(s)||mr.Katakana(s)||mr["CJK Symbols and Punctuation"](s)))}_tinySDF(s,h,g){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let S=s.tinySDF;if(!S){let Ue="400";/bold/i.test(h)?Ue="900":/medium/i.test(h)?Ue="500":/light/i.test(h)&&(Ue="200"),S=s.tinySDF=new Vp.TinySDF({fontFamily:y,fontWeight:Ue,fontSize:24*zh,buffer:3*zh,radius:8*zh}),S.fontWeight=Ue}if(this.localGlyphs[S.fontWeight][g])return this.localGlyphs[S.fontWeight][g];const R=String.fromCharCode(g),{data:G,width:X,height:K,glyphWidth:ce,glyphHeight:pe,glyphLeft:_e,glyphTop:Ae,glyphAdvance:Oe}=S.draw(R);return this.localGlyphs[S.fontWeight][g]={id:g,bitmap:new dh({width:X,height:K},G),metrics:{width:ce/zh,height:pe/zh,left:_e/zh,top:Ae/zh-27,advance:Oe/zh,localGlyph:!0}}}}Vp.loadGlyphRange=function(c,s,h,g,y){const S=256*s,R=S+255,G=g.transformRequest(g.normalizeGlyphsURL(h).replace("{fontstack}",c).replace("{range}",`${S}-${R}`),go.Glyphs);Ia(G,(X,K)=>{if(X)y(X);else if(K){const ce={},pe=new L0(K).readFields(Hv,{});for(const _e of pe.glyphs)ce[_e.id]=_e;y(null,{glyphs:ce,ascender:pe.ascender,descender:pe.descender})}})},Vp.TinySDF=class{constructor({fontSize:c=24,buffer:s=3,radius:h=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:S="normal",fontStyle:R="normal"}={}){this.buffer=s,this.cutoff=g,this.radius=h;const G=this.size=c+4*s,X=this._createCanvas(G),K=this.ctx=X.getContext("2d",{willReadFrequently:!0});K.font=`${R} ${S} ${c}px ${y}`,K.textBaseline="alphabetic",K.textAlign="left",K.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(c){const s=document.createElement("canvas");return s.width=s.height=c,s}draw(c){const{width:s,actualBoundingBoxAscent:h,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:S}=this.ctx.measureText(c),R=Math.ceil(h),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(S-y))),X=Math.min(this.size-this.buffer,R+Math.ceil(g)),K=G+2*this.buffer,ce=X+2*this.buffer,pe=Math.max(K*ce,0),_e=new Uint8ClampedArray(pe),Ae={data:_e,width:K,height:ce,glyphWidth:G,glyphHeight:X,glyphTop:R,glyphLeft:0,glyphAdvance:s};if(0===G||0===X)return Ae;const{ctx:Oe,buffer:Ue,gridInner:dt,gridOuter:Rt}=this;Oe.clearRect(Ue,Ue,G,X),Oe.fillText(c,Ue,Ue+R);const ii=Oe.getImageData(Ue,Ue,G,X);Rt.fill(Mg,0,pe),dt.fill(0,0,pe);for(let Lt=0;Lt<X;Lt++)for(let Jt=0;Jt<G;Jt++){const di=ii.data[4*(Lt*G+Jt)+3]/255;if(0===di)continue;const li=(Lt+Ue)*K+Jt+Ue;if(1===di)Rt[li]=0,dt[li]=Mg;else{const Qi=.5-di;Rt[li]=Qi>0?Qi*Qi:0,dt[li]=Qi<0?Qi*Qi:0}}ey(Rt,0,0,K,ce,K,this.f,this.v,this.z),ey(dt,Ue,Ue,G,X,K,this.f,this.v,this.z);for(let Lt=0;Lt<pe;Lt++){const Jt=Math.sqrt(Rt[Lt])-Math.sqrt(dt[Lt]);_e[Lt]=Math.round(255-255*(Jt/this.radius+this.cutoff))}return Ae}};const Om=Gu;function iy(c,s,h,g){const y=[],S=c.image,R=S.pixelRatio,G=S.paddedRect.w-2*Om,X=S.paddedRect.h-2*Om,K=c.right-c.left,ce=c.bottom-c.top,pe=S.stretchX||[[0,G]],_e=S.stretchY||[[0,X]],Ae=(sn,Ln)=>sn+Ln[1]-Ln[0],Oe=pe.reduce(Ae,0),Ue=_e.reduce(Ae,0),dt=G-Oe,Rt=X-Ue;let ii=0,Lt=Oe,Jt=0,di=Ue,li=0,Qi=dt,Xi=0,kn=Rt;if(S.content&&g){const sn=S.content;ii=F0(pe,0,sn[0]),Jt=F0(_e,0,sn[1]),Lt=F0(pe,sn[0],sn[2]),di=F0(_e,sn[1],sn[3]),li=sn[0]-ii,Xi=sn[1]-Jt,Qi=sn[2]-sn[0]-Lt,kn=sn[3]-sn[1]-di}const Kn=(sn,Ln,Pn,jn)=>{const tr=B0(sn.stretch-ii,Lt,K,c.left),vn=N0(sn.fixed-li,Qi,sn.stretch,Oe),wr=B0(Ln.stretch-Jt,di,ce,c.top),Vr=N0(Ln.fixed-Xi,kn,Ln.stretch,Ue),Er=B0(Pn.stretch-ii,Lt,K,c.left),rs=N0(Pn.fixed-li,Qi,Pn.stretch,Oe),ir=B0(jn.stretch-Jt,di,ce,c.top),ua=N0(jn.fixed-Xi,kn,jn.stretch,Ue),as=new Dt(tr,wr),to=new Dt(Er,wr),ss=new Dt(Er,ir),Sa=new Dt(tr,ir),Uo=new Dt(vn/R,Vr/R),us=new Dt(rs/R,ua/R),ds=s*Math.PI/180;if(ds){const Fo=Math.sin(ds),Ro=Math.cos(ds),ul=[Ro,-Fo,Fo,Ro];as._matMult(ul),to._matMult(ul),Sa._matMult(ul),ss._matMult(ul)}const Mo=sn.stretch+sn.fixed,Po=Ln.stretch+Ln.fixed;return{tl:as,tr:to,bl:Sa,br:ss,tex:{x:S.paddedRect.x+Om+Mo,y:S.paddedRect.y+Om+Po,w:Pn.stretch+Pn.fixed-Mo,h:jn.stretch+jn.fixed-Po},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Uo,pixelOffsetBR:us,minFontScaleX:Qi/R/K,minFontScaleY:kn/R/ce,isSDF:h}};if(g&&(S.stretchX||S.stretchY)){const sn=ny(pe,dt,Oe),Ln=ny(_e,Rt,Ue);for(let Pn=0;Pn<sn.length-1;Pn++){const jn=sn[Pn],tr=sn[Pn+1];for(let vn=0;vn<Ln.length-1;vn++)y.push(Kn(jn,Ln[vn],tr,Ln[vn+1]))}}else y.push(Kn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:G+1},{fixed:0,stretch:X+1}));return y}function F0(c,s,h){let g=0;for(const y of c)g+=Math.max(s,Math.min(h,y[1]))-Math.max(s,Math.min(h,y[0]));return g}function ny(c,s,h){const g=[{fixed:-Om,stretch:0}];for(const[y,S]of c){const R=g[g.length-1];g.push({fixed:y-R.stretch,stretch:R.stretch}),g.push({fixed:y-R.stretch,stretch:R.stretch+(S-y)})}return g.push({fixed:s+Om,stretch:h}),g}function B0(c,s,h,g){return c/s*h+g}function N0(c,s,h,g){return c-s*h/g}function u1(c,s,h,g){const y=s+c.positionedLines[g].lineOffset;return 0===g?h+y/2:h+(y+(s+c.positionedLines[g-1].lineOffset))/2}class d1{constructor(s=[],h=h1){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:g}=this,y=h[s];for(;s>0;){const S=s-1>>1,R=h[S];if(g(y,R)>=0)break;h[s]=R,s=S}h[s]=y}_down(s){const{data:h,compare:g}=this,y=this.length>>1,S=h[s];for(;s<y;){let R=1+(s<<1),G=h[R];const X=R+1;if(X<this.length&&g(h[X],G)<0&&(R=X,G=h[X]),g(G,S)>=0)break;h[s]=G,s=R}h[s]=S}}function h1(c,s){return c<s?-1:c>s?1:0}function f1(c,s=1,h=!1){let g=1/0,y=1/0,S=-1/0,R=-1/0;const G=c[0];for(let Ae=0;Ae<G.length;Ae++){const Oe=G[Ae];(!Ae||Oe.x<g)&&(g=Oe.x),(!Ae||Oe.y<y)&&(y=Oe.y),(!Ae||Oe.x>S)&&(S=Oe.x),(!Ae||Oe.y>R)&&(R=Oe.y)}const X=Math.min(S-g,R-y);let K=X/2;const ce=new d1([],p1);if(0===X)return new Dt(g,y);for(let Ae=g;Ae<S;Ae+=X)for(let Oe=y;Oe<R;Oe+=X)ce.push(new Lm(Ae+K,Oe+K,K,c));let pe=function(Ae){let Oe=0,Ue=0,dt=0;const Rt=Ae[0];for(let ii=0,Lt=Rt.length,Jt=Lt-1;ii<Lt;Jt=ii++){const di=Rt[ii],li=Rt[Jt],Qi=di.x*li.y-li.x*di.y;Ue+=(di.x+li.x)*Qi,dt+=(di.y+li.y)*Qi,Oe+=3*Qi}return new Lm(Ue/Oe,dt/Oe,0,Ae)}(c),_e=ce.length;for(;ce.length;){const Ae=ce.pop();(Ae.d>pe.d||!pe.d)&&(pe=Ae,h&&console.log("found best %d after %d probes",Math.round(1e4*Ae.d)/1e4,_e)),Ae.max-pe.d<=s||(K=Ae.h/2,ce.push(new Lm(Ae.p.x-K,Ae.p.y-K,K,c)),ce.push(new Lm(Ae.p.x+K,Ae.p.y-K,K,c)),ce.push(new Lm(Ae.p.x-K,Ae.p.y+K,K,c)),ce.push(new Lm(Ae.p.x+K,Ae.p.y+K,K,c)),_e+=4)}return h&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${pe.d}`)),pe.p}function p1(c,s){return s.max-c.max}class Lm{constructor(s,h,g,y){this.p=new Dt(s,h),this.h=g,this.d=function(S,R){let G=!1,X=1/0;for(let K=0;K<R.length;K++){const ce=R[K];for(let pe=0,_e=ce.length,Ae=_e-1;pe<_e;Ae=pe++){const Oe=ce[pe],Ue=ce[Ae];Oe.y>S.y!=Ue.y>S.y&&S.x<(Ue.x-Oe.x)*(S.y-Oe.y)/(Ue.y-Oe.y)+Oe.x&&(G=!G),X=Math.min(X,mg(S,Oe,Ue))}}return(G?1:-1)*Math.sqrt(X)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const Pm=7,Kv=Number.POSITIVE_INFINITY,m1=Math.sqrt(2);function ry(c,[s,h]){let g=0,y=0;if(h===Kv){s<0&&(s=0);const S=s/m1;switch(c){case"top-right":case"top-left":y=S-Pm;break;case"bottom-right":case"bottom-left":y=-S+Pm;break;case"bottom":y=-s+Pm;break;case"top":y=s-Pm}switch(c){case"top-right":case"bottom-right":g=-S;break;case"top-left":case"bottom-left":g=S;break;case"left":g=s;break;case"right":g=-s}}else{switch(s=Math.abs(s),h=Math.abs(h),c){case"top-right":case"top-left":case"top":y=h-Pm;break;case"bottom-right":case"bottom-left":case"bottom":y=-h+Pm}switch(c){case"top-right":case"bottom-right":case"right":g=-s;break;case"top-left":case"bottom-left":case"left":g=s}}return[g,y]}function g1(c,s,h,g,y,S,R,G,X,K){c.createArrays(),c.tilePixelRatio=zr/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const ce=c.layers[0].layout,pe=c.layers[0]._unevaluatedLayout._values,_e={};if("composite"===c.textSizeData.kind){const{minZoom:Ue,maxZoom:dt}=c.textSizeData;_e.compositeTextSizes=[pe["text-size"].possiblyEvaluate(new de(Ue),G),pe["text-size"].possiblyEvaluate(new de(dt),G)]}if("composite"===c.iconSizeData.kind){const{minZoom:Ue,maxZoom:dt}=c.iconSizeData;_e.compositeIconSizes=[pe["icon-size"].possiblyEvaluate(new de(Ue),G),pe["icon-size"].possiblyEvaluate(new de(dt),G)]}_e.layoutTextSize=pe["text-size"].possiblyEvaluate(new de(X+1),G),_e.layoutIconSize=pe["icon-size"].possiblyEvaluate(new de(X+1),G),_e.textMaxSize=pe["text-size"].possiblyEvaluate(new de(18),G);const Ae="map"===ce.get("text-rotation-alignment")&&"point"!==ce.get("symbol-placement"),Oe=ce.get("text-size");for(const Ue of c.features){const dt=ce.get("text-font").evaluate(Ue,{},G).join(","),Rt=Oe.evaluate(Ue,{},G),ii=_e.layoutTextSize.evaluate(Ue,{},G),Lt=(_e.layoutIconSize.evaluate(Ue,{},G),{horizontal:{},vertical:void 0}),Jt=Ue.text;let di,li=[0,0];if(Jt){const kn=Jt.toString(),Kn=ce.get("text-letter-spacing").evaluate(Ue,{},G)*Wc,sn=ce.get("text-line-height").evaluate(Ue,{},G)*Wc,Ln=r0(kn)?Kn:0,Pn=ce.get("text-anchor").evaluate(Ue,{},G),jn=ce.get("text-variable-anchor");if(!jn){const Er=ce.get("text-radial-offset").evaluate(Ue,{},G);li=Er?ry(Pn,[Er*Wc,Kv]):ce.get("text-offset").evaluate(Ue,{},G).map(rs=>rs*Wc)}let tr=Ae?"center":ce.get("text-justify").evaluate(Ue,{},G);const vn="point"===ce.get("symbol-placement"),wr=vn?ce.get("text-max-width").evaluate(Ue,{},G)*Wc:1/0,Vr=Er=>{c.allowVerticalPlacement&&uf(kn)&&(Lt.vertical=Ic(Jt,s,h,y,dt,wr,sn,Pn,Er,Ln,li,Hu.vertical,!0,ii,Rt))};if(!Ae&&jn){const Er="auto"===tr?jn.map(ir=>Jv(ir)):[tr];let rs=!1;for(let ir=0;ir<Er.length;ir++){const ua=Er[ir];if(!Lt.horizontal[ua])if(rs)Lt.horizontal[ua]=Lt.horizontal[0];else{const as=Ic(Jt,s,h,y,dt,wr,sn,"center",ua,Ln,li,Hu.horizontal,!1,ii,Rt);as&&(Lt.horizontal[ua]=as,rs=1===as.positionedLines.length)}}Vr("left")}else{if("auto"===tr&&(tr=Jv(Pn)),vn||ce.get("text-writing-mode").indexOf("horizontal")>=0||!uf(kn)){const Er=Ic(Jt,s,h,y,dt,wr,sn,Pn,tr,Ln,li,Hu.horizontal,!1,ii,Rt);Er&&(Lt.horizontal[tr]=Er)}Vr(vn?"left":tr)}}let Qi=!1;if(Ue.icon&&Ue.icon.name){const kn=g[Ue.icon.name];kn&&(di=Z_(y[Ue.icon.name],ce.get("icon-offset").evaluate(Ue,{},G),ce.get("icon-anchor").evaluate(Ue,{},G)),Qi=kn.sdf,void 0===c.sdfIcons?c.sdfIcons=kn.sdf:c.sdfIcons!==kn.sdf&&pr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(kn.pixelRatio!==c.pixelRatio||0!==ce.get("icon-rotate").constantOr(1))&&(c.iconsNeedLinear=!0))}const Xi=sy(Lt.horizontal)||Lt.vertical;c.iconsInText||(c.iconsInText=!!Xi&&Xi.iconsInText),(Xi||di)&&Rg(c,Ue,Lt,di,g,_e,ii,0,li,Qi,R,G,K)}S&&c.generateCollisionDebugBuffers(X,c.collisionBoxArray)}function Jv(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rg(c,s,h,g,y,S,R,G,X,K,ce,pe,_e){let Ae=S.textMaxSize.evaluate(s,{},pe);void 0===Ae&&(Ae=R);const Oe=c.layers[0].layout,Ue=Oe.get("icon-offset").evaluate(s,{},pe),dt=sy(h.horizontal)||h.vertical,Rt="globe"===_e.name,ii=Wc,Lt=R/ii,Jt=c.tilePixelRatio*Ae/ii,di=(Pn=c.overscaling,c.zoom>18&&Pn>2&&(Pn>>=1),Math.max(zr/(512*Pn),1)*Oe.get("symbol-spacing")),li=Oe.get("text-padding")*c.tilePixelRatio,Qi=Oe.get("icon-padding")*c.tilePixelRatio,Xi=fi(Oe.get("text-max-angle")),kn="map"===Oe.get("text-rotation-alignment")&&"point"!==Oe.get("symbol-placement"),Kn="map"===Oe.get("icon-rotation-alignment")&&"point"!==Oe.get("symbol-placement"),sn=Oe.get("symbol-placement"),Ln=di/2;var Pn;const jn=Oe.get("icon-text-fit");let tr;g&&"none"!==jn&&(c.allowVerticalPlacement&&h.vertical&&(tr=K_(g,h.vertical,jn,Oe.get("icon-text-fit-padding"),Ue,Lt)),dt&&(g=K_(g,dt,jn,Oe.get("icon-text-fit-padding"),Ue,Lt)));const vn=(wr,Vr,Er)=>{if(Vr.x<0||Vr.x>=zr||Vr.y<0||Vr.y>=zr)return;let rs=null;if(Rt){const{x:ir,y:ua,z:as}=_e.projectTilePoint(Vr.x,Vr.y,Er);rs={anchor:new Mf(ir,ua,as,0,void 0),up:_e.upVector(Er,Vr.x,Vr.y)}}!function(ir,ua,as,to,ss,Sa,Uo,us,ds,Mo,Po,Fo,Ro,ul,Il,hc,Oo,Xc,fc,bl,so,pc,Bo,Ad,mc){const Tu=ir.addToLineVertexArray(ua,to);let ou,$u,lu,Of,Z0,K0,J0,F1=0,Xx=0,qx=0,B1=0,N1=-1,hy=-1;const pp={};let Zx=rm("");const zm=as?as.anchor:ua;let z1=0,Y1=0;if(void 0===ds._unevaluatedLayout.getValue("text-radial-offset")?[z1,Y1]=ds.layout.get("text-offset").evaluate(so,{},mc).map(ph=>ph*Wc):(z1=ds.layout.get("text-radial-offset").evaluate(so,{},mc)*Wc,Y1=Kv),ir.allowVerticalPlacement&&ss.vertical){const ph=ss.vertical;if(Il)K0=Y0(ph),us&&(J0=Y0(us));else{const mh=ds.layout.get("text-rotate").evaluate(so,{},mc)+90;lu=z0(Mo,zm,ua,Po,Fo,Ro,ph,ul,mh,hc),us&&(Of=z0(Mo,zm,ua,Po,Fo,Ro,us,Xc,mh))}}if(Sa){const ph=ds.layout.get("icon-rotate").evaluate(so,{},mc),mh="none"!==ds.layout.get("icon-text-fit"),s_=iy(Sa,ph,Bo,mh),H1=us?iy(us,ph,Bo,mh):void 0;$u=z0(Mo,zm,ua,Po,Fo,Ro,Sa,Xc,ph),F1=4*s_.length;const Kx=ir.iconSizeData;let Gg=null;"source"===Kx.kind?(Gg=[Nh*ds.layout.get("icon-size").evaluate(so,{},mc)],Gg[0]>cp&&pr(`${ir.layerIds[0]}: Value for "icon-size" is >= ${Up}. Reduce your "icon-size".`)):"composite"===Kx.kind&&(Gg=[Nh*pc.compositeIconSizes[0].evaluate(so,{},mc),Nh*pc.compositeIconSizes[1].evaluate(so,{},mc)],(Gg[0]>cp||Gg[1]>cp)&&pr(`${ir.layerIds[0]}: Value for "icon-size" is >= ${Up}. Reduce your "icon-size".`)),ir.addSymbols(ir.icon,s_,Gg,bl,fc,so,!1,as,ua,Tu.lineStartIndex,Tu.lineLength,-1,Ad,mc),N1=ir.icon.placedSymbolArray.length-1,H1&&(Xx=4*H1.length,ir.addSymbols(ir.icon,H1,Gg,bl,fc,so,Hu.vertical,as,ua,Tu.lineStartIndex,Tu.lineLength,-1,Ad,mc),hy=ir.icon.placedSymbolArray.length-1)}for(const ph in ss.horizontal){const mh=ss.horizontal[ph];ou||(Zx=rm(mh.text),Il?Z0=Y0(mh):ou=z0(Mo,zm,ua,Po,Fo,Ro,mh,ul,ds.layout.get("text-rotate").evaluate(so,{},mc),hc));const s_=1===mh.positionedLines.length;if(qx+=ay(ir,as,ua,mh,Uo,ds,Il,so,hc,Tu,ss.vertical?Hu.horizontal:Hu.horizontalOnly,s_?Object.keys(ss.horizontal):[ph],pp,N1,pc,Ad,mc),s_)break}ss.vertical&&(B1+=ay(ir,as,ua,ss.vertical,Uo,ds,Il,so,hc,Tu,Hu.vertical,["vertical"],pp,hy,pc,Ad,mc));let Ym=-1;const G1=(ph,mh)=>ph?Math.max(ph,mh):mh;Ym=G1(Z0,Ym),Ym=G1(K0,Ym),Ym=G1(J0,Ym);const Cw=Ym>-1?1:0;ir.glyphOffsetArray.length>=hp.MAX_GLYPHS&&pr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==so.sortKey&&ir.addToSortKeyRanges(ir.symbolInstances.length,so.sortKey),ir.symbolInstances.emplaceBack(zm.x,zm.y,zm.z,ua.x,ua.y,pp.right>=0?pp.right:-1,pp.center>=0?pp.center:-1,pp.left>=0?pp.left:-1,pp.vertical>=0?pp.vertical:-1,N1,hy,Zx,void 0!==ou?ou:ir.collisionBoxArray.length,void 0!==ou?ou+1:ir.collisionBoxArray.length,void 0!==lu?lu:ir.collisionBoxArray.length,void 0!==lu?lu+1:ir.collisionBoxArray.length,void 0!==$u?$u:ir.collisionBoxArray.length,void 0!==$u?$u+1:ir.collisionBoxArray.length,Of||ir.collisionBoxArray.length,Of?Of+1:ir.collisionBoxArray.length,Po,qx,B1,F1,Xx,Cw,0,z1,Y1,Ym)}(c,Vr,rs,wr,h,g,y,tr,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,li,kn,X,0,Qi,Kn,Ue,s,S,K,ce,pe)};if("line"===sn)for(const wr of Q_(s.geometry,0,0,zr,zr)){const Vr=c1(wr,di,Xi,h.vertical||dt,g,ii,Jt,c.overscaling,zr);for(const Er of Vr)dt&&Qv(c,dt.text,Ln,Er)||vn(wr,Er,pe)}else if("line-center"===sn){for(const wr of s.geometry)if(wr.length>1){const Vr=l1(wr,Xi,h.vertical||dt,g,ii,Jt);Vr&&vn(wr,Vr,pe)}}else if("Polygon"===s.type)for(const wr of Dm(s.geometry,0)){const Vr=f1(wr,16);vn(wr[0],new Mf(Vr.x,Vr.y,0,0,void 0),pe)}else if("LineString"===s.type)for(const wr of s.geometry)vn(wr,new Mf(wr[0].x,wr[0].y,0,0,void 0),pe);else if("Point"===s.type)for(const wr of s.geometry)for(const Vr of wr)vn([Vr],new Mf(Vr.x,Vr.y,0,0,void 0),pe)}const Up=255,cp=Up*Nh;function ay(c,s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe,Ue,dt){const Rt=function(Jt,di,li,Qi,Xi,kn,Kn,sn){const Ln=[];if(0===di.positionedLines.length)return Ln;const Pn=Qi.layout.get("text-rotate").evaluate(kn,{})*Math.PI/180,jn=function(Er){const rs=Er[0],ir=Er[1],ua=rs*ir;return ua>0?[rs,-ir]:ua<0?[-rs,ir]:0===rs?[ir,rs]:[ir,-rs]}(li);let tr=Math.abs(di.top-di.bottom);for(const Er of di.positionedLines)tr-=Er.lineOffset;const vn=di.positionedLines.length,wr=tr/vn;let Vr=di.top-li[1];for(let Er=0;Er<vn;++Er){const rs=di.positionedLines[Er];Vr=u1(di,wr,Vr,Er);for(const ir of rs.positionedGlyphs){if(!ir.rect)continue;const ua=ir.rect||{};let as=U_+1,to=!0,ss=1,Sa=0;if(ir.imageName){const Bo=Kn[ir.imageName];if(!Bo)continue;if(Bo.sdf){pr("SDF images are not supported in formatted text and will be ignored.");continue}to=!1,ss=Bo.pixelRatio,as=Gu/ss}const Uo=(Xi||sn)&&ir.vertical,us=ir.metrics.advance*ir.scale/2,ds=ir.metrics,Mo=ir.rect;if(null===Mo)continue;sn&&di.verticalizable&&(Sa=ir.imageName?us-ir.metrics.width*ir.scale/2:0);const Po=Xi?[ir.x+us,ir.y]:[0,0];let Fo=[0,0],Ro=[0,0],ul=!1;Xi||(Uo?(Ro=[ir.x+us+jn[0],ir.y+jn[1]-Sa],ul=!0):Fo=[ir.x+us+li[0],ir.y+li[1]-Sa]);const Il=Mo.w*ir.scale/(ss*(ir.localGlyph?zh:1)),hc=Mo.h*ir.scale/(ss*(ir.localGlyph?zh:1));let Oo,Xc,fc,bl;if(Uo){const Bo=ir.y-Vr,Ad=new Dt(-us,us-Bo),mc=-Math.PI/2,Tu=new Dt(...Ro);Oo=new Dt(-us+Fo[0],Fo[1]),Oo._rotateAround(mc,Ad)._add(Tu),Oo.x+=-Bo+us,Oo.y-=(ds.left-as)*ir.scale;const ou=ir.imageName?ds.advance*ir.scale:Wc*ir.scale,$u=String.fromCharCode(ir.glyph);I0($u)?Oo.x+=(1-as)*ir.scale:Ud($u)?Oo.x+=ou-ds.height*ir.scale+(-as-1)*ir.scale:Oo.x+=ir.imageName||ds.width+2*as===Mo.w&&ds.height+2*as===Mo.h?(ou-hc)/2:(ou-(ds.height+2*as)*ir.scale)/2,Xc=new Dt(Oo.x,Oo.y-Il),fc=new Dt(Oo.x+hc,Oo.y),bl=new Dt(Oo.x+hc,Oo.y-Il)}else{const Bo=(ds.left-as)*ir.scale-us+Fo[0],Ad=(-ds.top-as)*ir.scale+Fo[1],mc=Bo+Il,Tu=Ad+hc;Oo=new Dt(Bo,Ad),Xc=new Dt(mc,Ad),fc=new Dt(Bo,Tu),bl=new Dt(mc,Tu)}if(Pn){let Bo;Bo=Xi?new Dt(0,0):ul?new Dt(jn[0],jn[1]):new Dt(li[0],li[1]),Oo._rotateAround(Pn,Bo),Xc._rotateAround(Pn,Bo),fc._rotateAround(Pn,Bo),bl._rotateAround(Pn,Bo)}const so=new Dt(0,0),pc=new Dt(0,0);Ln.push({tl:Oo,tr:Xc,bl:fc,br:bl,tex:ua,writingMode:di.writingMode,glyphOffset:Po,sectionIndex:ir.sectionIndex,isSDF:to,pixelOffsetTL:so,pixelOffsetBR:pc,minFontScaleX:0,minFontScaleY:0})}}return Ln}(0,g,X,S,R,G,y,c.allowVerticalPlacement),ii=c.textSizeData;let Lt=null;"source"===ii.kind?(Lt=[Nh*S.layout.get("text-size").evaluate(G,{},dt)],Lt[0]>cp&&pr(`${c.layerIds[0]}: Value for "text-size" is >= ${Up}. Reduce your "text-size".`)):"composite"===ii.kind&&(Lt=[Nh*Oe.compositeTextSizes[0].evaluate(G,{},dt),Nh*Oe.compositeTextSizes[1].evaluate(G,{},dt)],(Lt[0]>cp||Lt[1]>cp)&&pr(`${c.layerIds[0]}: Value for "text-size" is >= ${Up}. Reduce your "text-size".`)),c.addSymbols(c.text,Rt,Lt,X,R,G,ce,s,h,K.lineStartIndex,K.lineLength,Ae,Ue,dt);for(const Jt of pe)_e[Jt]=c.text.placedSymbolArray.length-1;return 4*Rt.length}function sy(c){for(const s in c)return c[s];return null}function z0(c,s,h,g,y,S,R,G,X,K){let ce=R.top,pe=R.bottom,_e=R.left,Ae=R.right;const Oe=R.collisionPadding;if(Oe&&(_e-=Oe[0],ce-=Oe[1],Ae+=Oe[2],pe+=Oe[3]),X){const Ue=new Dt(_e,ce),dt=new Dt(Ae,ce),Rt=new Dt(_e,pe),ii=new Dt(Ae,pe),Lt=fi(X);let Jt=new Dt(0,0);K&&(Jt=new Dt(K[0],K[1])),Ue._rotateAround(Lt,Jt),dt._rotateAround(Lt,Jt),Rt._rotateAround(Lt,Jt),ii._rotateAround(Lt,Jt),_e=Math.min(Ue.x,dt.x,Rt.x,ii.x),Ae=Math.max(Ue.x,dt.x,Rt.x,ii.x),ce=Math.min(Ue.y,dt.y,Rt.y,ii.y),pe=Math.max(Ue.y,dt.y,Rt.y,ii.y)}return c.emplaceBack(s.x,s.y,s.z,h.x,h.y,_e,ce,Ae,pe,G,g,y,S),c.length-1}function Y0(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const s=c.bottom-c.top;return s>0?Math.max(10,s):null}function Qv(c,s,h,g){const y=c.compareText;if(s in y){const S=y[s];for(let R=S.length-1;R>=0;R--)if(g.dist(S[R])<h)return!0}else y[s]=[];return y[s].push(g),!1}function e_(c,s){const h=c.fovAboveCenter,g=c.elevation?c.elevation.getMinElevationBelowMSL()*s:0,y=(c._camera.position[2]*c.worldSize-g)/Math.cos(c._pitch),S=Math.sin(h)*y/Math.sin(Math.max(Math.PI/2-c._pitch-h,.01)),R=Math.sin(c._pitch)*S+y;return Math.min(1.01*R,y*(1/c._horizonShift))}function up(c,s){if(!s.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:s};const h=Math.pow(2,-c.z),g=c.x*h,y=(c.x+1)*h,S=c.y*h,R=(c.y+1)*h,G=ud(g),X=ud(y),K=Sc(S),ce=Sc(R),pe=s.project(G,K),_e=s.project(X,K),Ae=s.project(X,ce),Oe=s.project(G,ce);let Ue=Math.min(pe.x,_e.x,Ae.x,Oe.x),dt=Math.min(pe.y,_e.y,Ae.y,Oe.y),Rt=Math.max(pe.x,_e.x,Ae.x,Oe.x),ii=Math.max(pe.y,_e.y,Ae.y,Oe.y);const Lt=h/16;function Jt(li,Qi,Xi,kn,Kn,sn){const Ln=(Xi+Kn)/2,Pn=(kn+sn)/2,jn=s.project(ud(Ln),Sc(Pn)),tr=Math.max(0,Ue-jn.x,dt-jn.y,jn.x-Rt,jn.y-ii);Ue=Math.min(Ue,jn.x),Rt=Math.max(Rt,jn.x),dt=Math.min(dt,jn.y),ii=Math.max(ii,jn.y),tr>Lt&&(Jt(li,jn,Xi,kn,Ln,Pn),Jt(jn,Qi,Ln,Pn,Kn,sn))}Jt(pe,_e,g,S,y,S),Jt(_e,Ae,y,S,y,R),Jt(Ae,Oe,y,R,g,R),Jt(Oe,pe,g,R,g,S),Ue-=Lt,dt-=Lt,Rt+=Lt,ii+=Lt;const di=1/Math.max(Rt-Ue,ii-dt);return{scale:di,x:Ue*di,y:dt*di,x2:Rt*di,y2:ii*di,projection:s}}const v1=_l(new Float32Array(16));class dp{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,h){return{x:0,y:0,z:0}}unproject(s,h){return new ao(0,0)}projectTilePoint(s,h,g){return{x:s,y:h,z:0}}locationPoint(s,h,g=!0){return s._coordinatePoint(s.locationCoordinate(h),g)}pixelsPerMeter(s,h){return Gd(1,s)*h}pixelSpaceConversion(s,h,g){return 1}farthestPixelDistance(s){return e_(s,s.pixelsPerMeter)}pointCoordinate(s,h,g,y){const S=s.horizonLineFromTop(!1),R=new Dt(h,Math.max(S,g));return s.rayIntersectionCoordinate(s.pointRayIntersection(R,y))}pointCoordinate3D(s,h,g){const y=new Dt(h,g);if(s.elevation)return s.elevation.pointCoordinate(y);{const S=this.pointCoordinate(s,y.x,y.y,0);return[S.x,S.y,S.z]}}isPointAboveHorizon(s,h){if(s.elevation)return!this.pointCoordinate3D(s,h.x,h.y);const g=s.horizonLineFromTop();return h.y<g}createInversionMatrix(s,h){return v1}createTileMatrix(s,h,g){let y,S,R;const G=g.canonical,X=_l(new Float64Array(16));if(this.isReprojectedInTileSpace){const K=up(G,this);y=1,S=K.x+g.wrap*K.scale,R=K.y,xu(X,X,[y/K.scale,y/K.scale,s.pixelsPerMeter/h])}else y=h/s.zoomScale(G.z),S=(G.x+Math.pow(2,G.z)*g.wrap)*y,R=G.y*y;return yu(X,X,[S,R,0]),xu(X,X,[y/zr,y/zr,1]),X}upVector(s,h,g){return[0,0,1]}upVectorScale(s,h,g){return{metersToTile:1}}}class _1 extends dp{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[h,g]=this.parallels=s.parallels||[29.5,45.5],y=Math.sin(fi(h));this.n=(y+Math.sin(fi(g)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(s,h){const{n:g,c:y,r0:S}=this,R=fi(s-this.center[0]),G=fi(h),X=Math.sqrt(y-2*g*Math.sin(G))/g;return{x:X*Math.sin(R*g),y:X*Math.cos(R*g)-S,z:0}}unproject(s,h){const{n:g,c:y,r0:S}=this,R=S+h;let G=Math.atan2(s,Math.abs(R))*Math.sign(R);R*g<0&&(G-=Math.PI*Math.sign(s)*Math.sign(R));const X=fi(this.center[0])*g;G=yn(G,-Math.PI-X,Math.PI-X);const K=Ki(It(G/g)+this.center[0],-180,180),ce=Math.asin(Ki((y-(s*s+R*R)*g*g)/(2*g),-1,1)),pe=Ki(It(ce),-Dc,Dc);return new ao(K,pe)}}const jp=1.340264,Og=-.081106,Lg=893e-6,Pg=.003796,ku=Math.sqrt(3)/2;class t_ extends dp{project(s,h){h=h/180*Math.PI,s=s/180*Math.PI;const g=Math.asin(ku*Math.sin(h)),y=g*g,S=y*y*y;return{x:.5*(s*Math.cos(g)/(ku*(jp+3*Og*y+S*(7*Lg+9*Pg*y)))/Math.PI+.5),y:1-.5*(g*(jp+Og*y+S*(Lg+Pg*y))/Math.PI+1),z:0}}unproject(s,h){s=(2*s-.5)*Math.PI;let g=h=(2*(1-h)-1)*Math.PI,y=g*g,S=y*y*y;for(let ce,pe,_e,Ae=0;Ae<12&&(pe=g*(jp+Og*y+S*(Lg+Pg*y))-h,_e=jp+3*Og*y+S*(7*Lg+9*Pg*y),ce=pe/_e,g=Ki(g-ce,-Math.PI/3,Math.PI/3),y=g*g,S=y*y*y,!(Math.abs(ce)<1e-12));++Ae);const R=ku*s*(jp+3*Og*y+S*(7*Lg+9*Pg*y))/Math.cos(g),G=Math.asin(Math.sin(g)/ku),X=Ki(180*R/Math.PI,-180,180),K=Ki(180*G/Math.PI,-Dc,Dc);return new ao(X,K)}}class y1 extends dp{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,h){return{x:.5+s/360,y:.5-h/360,z:0}}unproject(s,h){const g=360*(s-.5),y=Ki(360*(.5-h),-Dc,Dc);return new ao(g,y)}}const $p=Math.PI/2;function G0(c){return Math.tan(($p+c)/2)}class x1 extends dp{constructor(s){super(s),this.center=s.center||[0,30];const[h,g]=this.parallels=s.parallels||[30,30];let y=fi(h),S=fi(g);this.southernCenter=y+S<0,this.southernCenter&&(y=-y,S=-S);const R=Math.cos(y),G=G0(y);this.n=y===S?Math.sin(y):Math.log(R/Math.cos(S))/Math.log(G0(S)/G),this.f=R*Math.pow(G0(y),this.n)/this.n}project(s,h){h=fi(h),this.southernCenter&&(h=-h),s=fi(s-this.center[0]);const g=1e-6,{n:y,f:S}=this;S>0?h<-$p+g&&(h=-$p+g):h>$p-g&&(h=$p-g);const R=S/Math.pow(G0(h),y);let G=R*Math.sin(y*s),X=S-R*Math.cos(y*s);return G=.5*(G/Math.PI+.5),X=.5*(X/Math.PI+.5),{x:G,y:this.southernCenter?X:1-X,z:0}}unproject(s,h){s=(2*s-.5)*Math.PI,this.southernCenter&&(h=1-h),h=(2*(1-h)-.5)*Math.PI;const{n:g,f:y}=this,S=y-h,R=Math.sign(S),G=Math.sign(g)*Math.sqrt(s*s+S*S);let X=Math.atan2(s,Math.abs(S))*R;S*g<0&&(X-=Math.PI*Math.sign(s)*R);const K=Ki(It(X/g)+this.center[0],-180,180),ce=Ki(It(2*Math.atan(Math.pow(y/G,1/g))-$p),-Dc,Dc);return new ao(K,this.southernCenter?-ce:ce)}}class H0 extends dp{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,h){return{x:ch(s),y:uh(h),z:0}}unproject(s,h){const g=ud(s),y=Sc(h);return new ao(g,y)}}const Fm=fi(Dc);class Wp extends dp{project(s,h){const g=(h=fi(h))*h,y=g*g;return{x:.5*((s=fi(s))*(.8707-.131979*g+y*(y*(.003971*g-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(h*(1.007226+g*(.015085+y*(.028874*g-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(s,h){s=(2*s-.5)*Math.PI;let g=h=(2*(1-h)-1)*Math.PI,y=25,S=0,R=g*g;do{R=g*g;const K=R*R;S=(g*(1.007226+R*(.015085+K*(.028874*R-.044475-.005916*K)))-h)/(1.007226+R*(.045255+K*(.259866*R-.311325-.005916*11*K))),g=Ki(g-S,-Fm,Fm)}while(Math.abs(S)>1e-6&&--y>0);R=g*g;const G=Ki(It(s/(.8707+R*(R*(R*R*R*(.003971-.001529*R)-.013791)-.131979))),-180,180),X=It(g);return new ao(G,X)}}const oy=fi(Dc);class b1 extends dp{project(s,h){h=fi(h),s=fi(s);const g=Math.cos(h),y=2/Math.PI,S=Math.acos(g*Math.cos(s/2)),R=Math.sin(S)/S,G=.5*(s*y+2*g*Math.sin(s/2)/R)||0,X=.5*(h+Math.sin(h)/R)||0;return{x:.5*(G/Math.PI+.5),y:1-.5*(X/Math.PI+1),z:0}}unproject(s,h){let g=s=(2*s-.5)*Math.PI,y=h=(2*(1-h)-1)*Math.PI,S=25;const R=1e-6;let G=0,X=0;do{const K=Math.cos(y),ce=Math.sin(y),pe=2*ce*K,_e=ce*ce,Ae=K*K,Oe=Math.cos(g/2),Ue=Math.sin(g/2),dt=2*Oe*Ue,Rt=Ue*Ue,ii=1-Ae*Oe*Oe,Lt=ii?1/ii:0,Jt=ii?Math.acos(K*Oe)*Math.sqrt(1/ii):0,di=.5*(2*Jt*K*Ue+2*g/Math.PI)-s,li=.5*(Jt*ce+y)-h,Qi=.5*Lt*(Ae*Rt+Jt*K*Oe*_e)+1/Math.PI,Xi=Lt*(dt*pe/4-Jt*ce*Ue),kn=.125*Lt*(pe*Ue-Jt*ce*Ae*dt),Kn=.5*Lt*(_e*Oe+Jt*Rt*K)+.5,sn=Xi*kn-Kn*Qi;G=(li*Xi-di*Kn)/sn,X=(di*kn-li*Qi)/sn,g=Ki(g-G,-Math.PI,Math.PI),y=Ki(y-X,-oy,oy)}while((Math.abs(G)>R||Math.abs(X)>R)&&--S>0);return new ao(It(g),It(y))}}class ly extends dp{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(fi(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,h){const{scale:g,cosPhi:y}=this;return{x:fi(s)*y*g+.5,y:-Math.sin(fi(h))/y*g+.5,z:0}}unproject(s,h){const{scale:g,cosPhi:y}=this,S=-(h-.5)/g,R=Ki(It((s-.5)/g)/y,-180,180),G=Math.asin(Ki(S*y,-1,1)),X=Ki(It(G),-Dc,Dc);return new ao(R,X)}}class cy extends H0{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,h,g){const y=Mp(s,h,g);return rl(y,y,Kf(Sd(g))),{x:y[0],y:y[1],z:y[2]}}locationPoint(s,h){const g=yf(h.lat,h.lng),y=$l([],g),S=s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(h),s._centerAltitude):s._centerAltitude;Cd(g,g,y,Gd(1,0)*zr*S);const R=_l(new Float64Array(16));return ru(R,s.pixelMatrix,s.globeMatrix),rl(g,g,R),new Dt(g[0],g[1])}pixelsPerMeter(s,h){return Gd(1,0)*h}pixelSpaceConversion(s,h,g){const y=Gd(1,s)*h,S=ps(Gd(1,45)*h,y,g);return this.pixelsPerMeter(s,h)/S}createTileMatrix(s,h,g){const y=gm(Sd(g.canonical));return ru(new Float64Array(16),s.globeMatrix,y)}createInversionMatrix(s,h){const{center:g}=s,y=Kf(Sd(h));return Dp(y,y,fi(g.lng)),lm(y,y,fi(g.lat)),xu(y,y,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(s,h,g,y){return su(s,h,g,!0)||new Jf(0,0)}pointCoordinate3D(s,h,g){const y=this.pointCoordinate(s,h,g,0);return[y.x,y.y,y.z]}isPointAboveHorizon(s,h){return!su(s,h.x,h.y,!1)}farthestPixelDistance(s){const h=function(y,S){const R=y.cameraToCenterDistance,G=y._centerAltitude*S,X=y._camera,K=y._camera.forward(),ce=wd([],au([],K,-R),[0,0,G]),pe=y.worldSize/(2*Math.PI),_e=[0,0,-pe],Ae=y.width/y.height,Oe=Math.tan(y.fovAboveCenter),Ue=au([],X.up(),Oe),dt=au([],X.right(),Oe*Ae),Rt=$l([],wd([],wd([],K,Ue),dt)),ii=[];let Lt;if(new Rh(ce,Rt).closestPointOnSphere(_e,pe,ii)){const Jt=wd([],ii,_e),di=Ed([],Jt,ce);Lt=Math.cos(y.fovAboveCenter)*hf(di)}else{const Jt=Ed([],ce,_e),di=Ed([],_e,ce);$l(di,di);const li=hf(Jt)-pe;Lt=Math.sqrt(li*(li+2*pe));const Qi=Math.acos(Lt/(pe+li))-Math.acos(bu(K,di));Lt*=Math.cos(Qi)}return 1.01*Lt}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),g=lh(s.zoom);if(g>0){const y=e_(s,Gd(1,s.center.lat)*s.worldSize),S=s.worldSize/(2*Math.PI),R=Math.max(s.width,s.height)/s.worldSize*Math.PI;return ps(h,y+S*(1-Math.cos(R)),Math.pow(g,10))}return h}upVector(s,h,g){return Mp(h,g,s,1)}upVectorScale(s){return{metersToTile:cd(Rp(Sd(s)))}}}function V0(c){const s=c.parallels,h=!!s&&Math.abs(s[0]+s[1])<.01;switch(c.name){case"mercator":return new H0(c);case"equirectangular":return new y1(c);case"naturalEarth":return new Wp(c);case"equalEarth":return new t_(c);case"winkelTripel":return new b1(c);case"albers":return h?new ly(c):new _1(c);case"lambertConformalConic":return h?new ly(c):new x1(c);case"globe":return new cy(c)}throw new Error(`Invalid projection name: ${c.name}`)}const Vu=Ft.types,w1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function U0(c,s,h,g,y,S,R,G,X,K,ce,pe,_e){const Ae=G?Math.min(cp,Math.round(G[0])):0,Oe=G?Math.min(cp,Math.round(G[1])):0;c.emplaceBack(s,h,Math.round(32*g),Math.round(32*y),S,R,(Ae<<1)+(X?1:0),Oe,16*K,16*ce,256*pe,256*_e)}function Bm(c,s,h,g,y,S,R){c.emplaceBack(s,h,g,y,S,R)}function Nm(c,s,h,g,y){c.emplaceBack(s,h,g,y),c.emplaceBack(s,h,g,y),c.emplaceBack(s,h,g,y),c.emplaceBack(s,h,g,y)}function C1(c){for(const s of c.sections)if(Vc(s.text))return!0;return!1}class i_{constructor(s){this.layoutVertexArray=new Bn,this.indexArray=new ta,this.programConfigurations=s,this.segments=new nl,this.dynamicLayoutVertexArray=new An,this.opacityVertexArray=new ea,this.placedSymbolArray=new fo,this.globeExtVertexArray=new Hn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,h,g,y){this.isEmpty()||(g&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,A0.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Xl.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,w1,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,Al.members,!0)),this.opacityVertexBuffer.itemSize=1),(g||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Tr(i_,"SymbolBuffers");class Fg{constructor(s,h,g){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new g,this.segments=new nl,this.collisionVertexArray=new Ua,this.collisionVertexArrayExt=new qr}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,F_.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,e1.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Tr(Fg,"CollisionBuffers");class hp{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(R=>R.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_l([]),this.placementViewportMatrix=_l([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fv(this.zoom,h["text-size"]),this.iconSizeData=Fv(this.zoom,h["icon-size"]);const g=this.layers[0].layout,y=g.get("symbol-sort-key"),S=g.get("symbol-z-order");this.canOverlap=g.get("text-allow-overlap")||g.get("icon-allow-overlap")||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==S&&void 0!==y.constantOr(1),this.sortFeaturesByY=("viewport-y"===S||"auto"===S&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=g.get("text-writing-mode").map(R=>Hu[R]),this.stateDependentLayerIds=this.layers.filter(R=>R.isStateDependent()).map(R=>R.id),this.sourceID=s.sourceID,this.projection=s.projection}createArrays(){this.text=new i_(new rh(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new i_(new rh(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new vu,this.lineVertexArray=new Sh,this.symbolInstances=new po}calculateGlyphDependencies(s,h,g,y,S){for(let R=0;R<s.length;R++)if(h[s.charCodeAt(R)]=!0,y&&S){const G=Ag[s.charAt(R)];G&&(h[G.charCodeAt(0)]=!0)}}populate(s,h,g,y){const S=this.layers[0],R=S.layout,G="globe"===this.projection.name,X=R.get("text-font"),K=R.get("text-field"),ce=R.get("icon-image"),pe=("constant"!==K.value.kind||K.value.value instanceof na&&!K.value.value.isEmpty()||K.value.value.toString().length>0)&&("constant"!==X.value.kind||X.value.value.length>0),_e="constant"!==ce.value.kind||!!ce.value.value||Object.keys(ce.parameters).length>0,Ae=R.get("symbol-sort-key");if(this.features=[],!pe&&!_e)return;const Oe=h.iconDependencies,Ue=h.glyphDependencies,dt=h.availableImages,Rt=new de(this.zoom);for(const{feature:ii,id:Lt,index:Jt,sourceLayerIndex:di}of s){const li=S._featureFilter.needGeometry,Qi=wu(ii,li);if(!S._featureFilter.filter(Rt,Qi,g))continue;if(li||(Qi.geometry=Oh(ii,g,y)),G&&1!==ii.type&&g.z<=5){const sn=Qi.geometry,Ln=.98078528056,Pn=(jn,tr)=>bu(Mp(jn.x,jn.y,g,1),Mp(tr.x,tr.y,g,1))<Ln;for(let jn=0;jn<sn.length;jn++)sn[jn]=p0(sn[jn],Pn)}let Xi,kn;if(pe){const sn=S.getValueAndResolveTokens("text-field",Qi,g,dt),Ln=na.factory(sn);C1(Ln)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===V()||this.hasRTLText&&re.isParsed())&&(Xi=n1(Ln,S,Qi))}if(_e){const sn=S.getValueAndResolveTokens("icon-image",Qi,g,dt);kn=sn instanceof Ns?sn:Ns.fromString(sn)}if(!Xi&&!kn)continue;const Kn=this.sortFeaturesByKey?Ae.evaluate(Qi,{},g):void 0;if(this.features.push({id:Lt,text:Xi,icon:kn,index:Jt,sourceLayerIndex:di,geometry:Qi.geometry,properties:ii.properties,type:Vu[ii.type],sortKey:Kn}),kn&&(Oe[kn.name]=!0),Xi){const sn=X.evaluate(Qi,{},g).join(","),Ln="map"===R.get("text-rotation-alignment")&&"point"!==R.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Hu.vertical)>=0;for(const Pn of Xi.sections)if(Pn.image)Oe[Pn.image.name]=!0;else{const jn=uf(Xi.toString()),tr=Pn.fontStack||sn,vn=Ue[tr]=Ue[tr]||{};this.calculateGlyphDependencies(Pn.text,vn,Ln,this.allowVerticalPlacement,jn)}}}"line"===R.get("symbol-placement")&&(this.features=function(ii){const Lt={},Jt={},di=[];let li=0;function Qi(sn){di.push(ii[sn]),li++}function Xi(sn,Ln,Pn){const jn=Jt[sn];return delete Jt[sn],Jt[Ln]=jn,di[jn].geometry[0].pop(),di[jn].geometry[0]=di[jn].geometry[0].concat(Pn[0]),jn}function kn(sn,Ln,Pn){const jn=Lt[Ln];return delete Lt[Ln],Lt[sn]=jn,di[jn].geometry[0].shift(),di[jn].geometry[0]=Pn[0].concat(di[jn].geometry[0]),jn}function Kn(sn,Ln,Pn){const jn=Pn?Ln[0][Ln[0].length-1]:Ln[0][0];return`${sn}:${jn.x}:${jn.y}`}for(let sn=0;sn<ii.length;sn++){const Ln=ii[sn],Pn=Ln.geometry,jn=Ln.text?Ln.text.toString():null;if(!jn){Qi(sn);continue}const tr=Kn(jn,Pn),vn=Kn(jn,Pn,!0);if(tr in Jt&&vn in Lt&&Jt[tr]!==Lt[vn]){const wr=kn(tr,vn,Pn),Vr=Xi(tr,vn,di[wr].geometry);delete Lt[tr],delete Jt[vn],Jt[Kn(jn,di[Vr].geometry,!0)]=Vr,di[wr].geometry=null}else tr in Jt?Xi(tr,vn,Pn):vn in Lt?kn(tr,vn,Pn):(Qi(sn),Lt[tr]=li-1,Jt[vn]=li-1)}return di.filter(sn=>sn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ii,Lt)=>ii.sortKey-Lt.sortKey)}update(s,h,g,y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,g,y),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,g,y))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=V0(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const g=this.lineVertexArray.length;if(void 0!==s.segment)for(const{x:y,y:S}of h)this.lineVertexArray.emplaceBack(y,S);return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(s,h,g,y,S,R,G,X,K,ce,pe,_e,Ae,Oe){const Ue=s.indexArray,dt=s.layoutVertexArray,Rt=s.globeExtVertexArray,ii=s.segments.prepareSegment(4*h.length,dt,Ue,this.canOverlap?R.sortKey:void 0),Lt=this.glyphOffsetArray.length,Jt=ii.vertexLength,di=this.allowVerticalPlacement&&G===Hu.vertical?Math.PI/2:0,li=R.text&&R.text.sections;for(let Xi=0;Xi<h.length;Xi++){const{tl:kn,tr:Kn,bl:sn,br:Ln,tex:Pn,pixelOffsetTL:jn,pixelOffsetBR:tr,minFontScaleX:vn,minFontScaleY:wr,glyphOffset:Vr,isSDF:Er,sectionIndex:rs}=h[Xi],ir=ii.vertexLength,ua=Vr[1];if(U0(dt,K.x,K.y,kn.x,ua+kn.y,Pn.x,Pn.y,g,Er,jn.x,jn.y,vn,wr),U0(dt,K.x,K.y,Kn.x,ua+Kn.y,Pn.x+Pn.w,Pn.y,g,Er,tr.x,jn.y,vn,wr),U0(dt,K.x,K.y,sn.x,ua+sn.y,Pn.x,Pn.y+Pn.h,g,Er,jn.x,tr.y,vn,wr),U0(dt,K.x,K.y,Ln.x,ua+Ln.y,Pn.x+Pn.w,Pn.y+Pn.h,g,Er,tr.x,tr.y,vn,wr),X){const{x:as,y:to,z:ss}=X.anchor,[Sa,Uo,us]=X.up;Bm(Rt,as,to,ss,Sa,Uo,us),Bm(Rt,as,to,ss,Sa,Uo,us),Bm(Rt,as,to,ss,Sa,Uo,us),Bm(Rt,as,to,ss,Sa,Uo,us),Nm(s.dynamicLayoutVertexArray,as,to,ss,di)}else Nm(s.dynamicLayoutVertexArray,K.x,K.y,K.z,di);Ue.emplaceBack(ir,ir+1,ir+2),Ue.emplaceBack(ir+1,ir+2,ir+3),ii.vertexLength+=4,ii.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vr[0]),Xi!==h.length-1&&rs===h[Xi+1].sectionIndex||s.programConfigurations.populatePaintArrays(dt.length,R,R.index,{},Ae,Oe,li&&li[rs])}const Qi=X?X.anchor:K;s.placedSymbolArray.emplaceBack(Qi.x,Qi.y,Qi.z,K.x,K.y,Lt,this.glyphOffsetArray.length-Lt,Jt,ce,pe,K.segment,g?g[0]:0,g?g[1]:0,y[0],y[1],G,0,!1,0,_e,0)}_commitLayoutVertex(s,h,g,y,S,R,G){s.emplaceBack(h,g,y,S,R,Math.round(G.x),Math.round(G.y))}_addCollisionDebugVertices(s,h,g,y,S,R,G){const X=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),K=X.vertexLength,ce=G.tileAnchorX,pe=G.tileAnchorY;for(let Ae=0;Ae<4;Ae++)g.collisionVertexArray.emplaceBack(0,0,0,0);g.collisionVertexArrayExt.emplaceBack(h,-s.padding,-s.padding),g.collisionVertexArrayExt.emplaceBack(h,s.padding,-s.padding),g.collisionVertexArrayExt.emplaceBack(h,s.padding,s.padding),g.collisionVertexArrayExt.emplaceBack(h,-s.padding,s.padding),this._commitLayoutVertex(g.layoutVertexArray,y,S,R,ce,pe,new Dt(s.x1,s.y1)),this._commitLayoutVertex(g.layoutVertexArray,y,S,R,ce,pe,new Dt(s.x2,s.y1)),this._commitLayoutVertex(g.layoutVertexArray,y,S,R,ce,pe,new Dt(s.x2,s.y2)),this._commitLayoutVertex(g.layoutVertexArray,y,S,R,ce,pe,new Dt(s.x1,s.y2)),X.vertexLength+=4;const _e=g.indexArray;_e.emplaceBack(K,K+1),_e.emplaceBack(K+1,K+2),_e.emplaceBack(K+2,K+3),_e.emplaceBack(K+3,K),X.primitiveLength+=4}_addTextDebugCollisionBoxes(s,h,g,y,S,R){for(let G=y;G<S;G++){const X=g.get(G),K=this.getSymbolInstanceTextSize(s,R,h,G);this._addCollisionDebugVertices(X,K,this.textCollisionBox,X.projectedAnchorX,X.projectedAnchorY,X.projectedAnchorZ,R)}}_addIconDebugCollisionBoxes(s,h,g,y,S,R){for(let G=y;G<S;G++){const X=g.get(G),K=this.getSymbolInstanceIconSize(s,h,R.placedIconSymbolIndex);this._addCollisionDebugVertices(X,K,this.iconCollisionBox,X.projectedAnchorX,X.projectedAnchorY,X.projectedAnchorZ,R)}}generateCollisionDebugBuffers(s,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fg(Ir,B_.members,vl),this.iconCollisionBox=new Fg(Ir,B_.members,vl);const g=tf(this.iconSizeData,s),y=tf(this.textSizeData,s);for(let S=0;S<this.symbolInstances.length;S++){const R=this.symbolInstances.get(S);this._addTextDebugCollisionBoxes(y,s,h,R.textBoxStartIndex,R.textBoxEndIndex,R),this._addTextDebugCollisionBoxes(y,s,h,R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R),this._addIconDebugCollisionBoxes(g,s,h,R.iconBoxStartIndex,R.iconBoxEndIndex,R),this._addIconDebugCollisionBoxes(g,s,h,R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R)}}getSymbolInstanceTextSize(s,h,g,y){const S=this.text.placedSymbolArray.get(h.rightJustifiedTextSymbolIndex>=0?h.rightJustifiedTextSymbolIndex:h.centerJustifiedTextSymbolIndex>=0?h.centerJustifiedTextSymbolIndex:h.leftJustifiedTextSymbolIndex>=0?h.leftJustifiedTextSymbolIndex:h.verticalPlacedTextSymbolIndex>=0?h.verticalPlacedTextSymbolIndex:y),R=Mm(this.textSizeData,s,S)/Wc;return this.tilePixelRatio*R}getSymbolInstanceIconSize(s,h,g){const y=this.icon.placedSymbolArray.get(g),S=Mm(this.iconSizeData,s,y);return this.tilePixelRatio*S}_commitDebugCollisionVertexUpdate(s,h,g){s.emplaceBack(h,-g,-g),s.emplaceBack(h,g,-g),s.emplaceBack(h,g,g),s.emplaceBack(h,-g,g)}_updateTextDebugCollisionBoxes(s,h,g,y,S,R){for(let G=y;G<S;G++){const X=g.get(G),K=this.getSymbolInstanceTextSize(s,R,h,G);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,K,X.padding)}}_updateIconDebugCollisionBoxes(s,h,g,y,S,R){for(let G=y;G<S;G++){const X=g.get(G),K=this.getSymbolInstanceIconSize(s,h,R);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,K,X.padding)}}updateCollisionDebugBuffers(s,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const g=tf(this.iconSizeData,s),y=tf(this.textSizeData,s);for(let S=0;S<this.symbolInstances.length;S++){const R=this.symbolInstances.get(S);this._updateTextDebugCollisionBoxes(y,s,h,R.textBoxStartIndex,R.textBoxEndIndex,R),this._updateTextDebugCollisionBoxes(y,s,h,R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R),this._updateIconDebugCollisionBoxes(g,s,h,R.iconBoxStartIndex,R.iconBoxEndIndex,R.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(g,s,h,R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,h,g,y,S,R,G,X,K){const ce={};if(h<g){const{x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt,featureIndex:di}=s.get(h);ce.textBox={x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt},ce.textFeatureIndex=di}if(y<S){const{x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt,featureIndex:di}=s.get(y);ce.verticalTextBox={x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt},ce.verticalTextFeatureIndex=di}if(R<G){const{x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt,featureIndex:di}=s.get(R);ce.iconBox={x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt},ce.iconFeatureIndex=di}if(X<K){const{x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt,featureIndex:di}=s.get(X);ce.verticalIconBox={x1:pe,y1:_e,x2:Ae,y2:Oe,padding:Ue,projectedAnchorX:dt,projectedAnchorY:Rt,projectedAnchorZ:ii,tileAnchorX:Lt,tileAnchorY:Jt},ce.verticalIconFeatureIndex=di}return ce}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const g=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const g=s.placedSymbolArray.get(h),y=g.vertexStartIndex+4*g.numGlyphs;for(let S=g.vertexStartIndex;S<y;S+=4)s.indexArray.emplaceBack(S,S+1,S+2),s.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const h=Math.sin(s),g=Math.cos(s),y=[],S=[],R=[];for(let G=0;G<this.symbolInstances.length;++G){R.push(G);const X=this.symbolInstances.get(G);y.push(0|Math.round(h*X.tileAnchorX+g*X.tileAnchorY)),S.push(X.featureIndex)}return R.sort((G,X)=>y[G]-y[X]||S[X]-S[G]),R}addToSortKeyRanges(s,h){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===h?g.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const g=this.symbolInstances.get(h);this.featureSortOrder.push(g.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:S,leftJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:G,placedIconSymbolIndex:X,verticalPlacedIconSymbolIndex:K}=g;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),S>=0&&S!==y&&this.addIndicesForPlacedSymbol(this.text,S),R>=0&&R!==S&&R!==y&&this.addIndicesForPlacedSymbol(this.text,R),G>=0&&this.addIndicesForPlacedSymbol(this.text,G),X>=0&&this.addIndicesForPlacedSymbol(this.icon,X),K>=0&&this.addIndicesForPlacedSymbol(this.icon,K)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tr(hp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),hp.MAX_GLYPHS=65535,hp.addDynamicAttributes=Nm;const j0=new Gt({"symbol-placement":new Ne(N.layout_symbol["symbol-placement"]),"symbol-spacing":new Ne(N.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ne(N.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _t(N.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ne(N.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ne(N.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ne(N.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ne(N.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ne(N.layout_symbol["icon-rotation-alignment"]),"icon-size":new _t(N.layout_symbol["icon-size"]),"icon-text-fit":new Ne(N.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ne(N.layout_symbol["icon-text-fit-padding"]),"icon-image":new _t(N.layout_symbol["icon-image"]),"icon-rotate":new _t(N.layout_symbol["icon-rotate"]),"icon-padding":new Ne(N.layout_symbol["icon-padding"]),"icon-keep-upright":new Ne(N.layout_symbol["icon-keep-upright"]),"icon-offset":new _t(N.layout_symbol["icon-offset"]),"icon-anchor":new _t(N.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ne(N.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ne(N.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ne(N.layout_symbol["text-rotation-alignment"]),"text-field":new _t(N.layout_symbol["text-field"]),"text-font":new _t(N.layout_symbol["text-font"]),"text-size":new _t(N.layout_symbol["text-size"]),"text-max-width":new _t(N.layout_symbol["text-max-width"]),"text-line-height":new _t(N.layout_symbol["text-line-height"]),"text-letter-spacing":new _t(N.layout_symbol["text-letter-spacing"]),"text-justify":new _t(N.layout_symbol["text-justify"]),"text-radial-offset":new _t(N.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ne(N.layout_symbol["text-variable-anchor"]),"text-anchor":new _t(N.layout_symbol["text-anchor"]),"text-max-angle":new Ne(N.layout_symbol["text-max-angle"]),"text-writing-mode":new Ne(N.layout_symbol["text-writing-mode"]),"text-rotate":new _t(N.layout_symbol["text-rotate"]),"text-padding":new Ne(N.layout_symbol["text-padding"]),"text-keep-upright":new Ne(N.layout_symbol["text-keep-upright"]),"text-transform":new _t(N.layout_symbol["text-transform"]),"text-offset":new _t(N.layout_symbol["text-offset"]),"text-allow-overlap":new Ne(N.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ne(N.layout_symbol["text-ignore-placement"]),"text-optional":new Ne(N.layout_symbol["text-optional"])});var n_={paint:new Gt({"icon-opacity":new _t(N.paint_symbol["icon-opacity"]),"icon-color":new _t(N.paint_symbol["icon-color"]),"icon-halo-color":new _t(N.paint_symbol["icon-halo-color"]),"icon-halo-width":new _t(N.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _t(N.paint_symbol["icon-halo-blur"]),"icon-translate":new Ne(N.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ne(N.paint_symbol["icon-translate-anchor"]),"text-opacity":new _t(N.paint_symbol["text-opacity"]),"text-color":new _t(N.paint_symbol["text-color"],{runtimeType:le,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new _t(N.paint_symbol["text-halo-color"]),"text-halo-width":new _t(N.paint_symbol["text-halo-width"]),"text-halo-blur":new _t(N.paint_symbol["text-halo-blur"]),"text-translate":new Ne(N.paint_symbol["text-translate"]),"text-translate-anchor":new Ne(N.paint_symbol["text-translate-anchor"])}),layout:j0};class Bg{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:Pe,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tr(Bg,"FormatSectionOverride",{omit:["defaultValue"]});class $0 extends Ul{constructor(s){super(s,n_)}recalculate(s,h){super.recalculate(s,h),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const g=this.layout.get("text-writing-mode");if(g){const y=[];for(const S of g)y.indexOf(S)<0&&y.push(S);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(s,h,g,y){const S=this.layout.get(s).evaluate(h,{},g,y),R=this._unevaluatedLayout._values[s];return R.isDataDriven()||kl(R.value)||!S?S:(G=h.properties,S.replace(/{([^{}]+)}/g,(K,ce)=>ce in G?String(G[ce]):""));var G}createBucket(s){return new hp(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of n_.paint.overridableProperties){if(!$0.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),g=new Bg(h),y=new ho(g,h.property.specification);let S=null;S="constant"===h.value.kind||"source"===h.value.kind?new Gl("source",y):new fu("composite",y,h.value.zoomStops,h.value._interpolationType),this.paint._values[s]=new bt(h.property,S,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,g){return!(!this.layout||h.isDataDriven()||g.isDataDriven())&&$0.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const g=s.get("text-field"),y=n_.paint.properties[h];let S=!1;const R=G=>{for(const X of G)if(y.overrides&&y.overrides.hasOverride(X))return void(S=!0)};if("constant"===g.value.kind&&g.value.value instanceof na)R(g.value.value.sections);else if("source"===g.value.kind){const G=K=>{S||(K instanceof $r&&Ws(K.value)===mt?R(K.value.sections):K instanceof Fc?R(K.sections):K.eachChild(G))},X=g.value;X._styleExpression&&G(X._styleExpression.expression)}return S}getProgramConfiguration(s){return new nh(this,s)}}var E1={paint:new Gt({"background-color":new Ne(N.paint_background["background-color"]),"background-pattern":new Ne(N.paint_background["background-pattern"]),"background-opacity":new Ne(N.paint_background["background-opacity"])})},k1={paint:new Gt({"raster-opacity":new Ne(N.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ne(N.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ne(N.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ne(N.paint_raster["raster-brightness-max"]),"raster-saturation":new Ne(N.paint_raster["raster-saturation"]),"raster-contrast":new Ne(N.paint_raster["raster-contrast"]),"raster-resampling":new Ne(N.paint_raster["raster-resampling"]),"raster-fade-duration":new Ne(N.paint_raster["raster-fade-duration"])})};class uy extends Ul{constructor(s){super(s,{}),this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}var T1={paint:new Gt({"sky-type":new Ne(N.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ne(N.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ne(N.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ne(N.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ne(N.paint_sky["sky-gradient-radius"]),"sky-gradient":new zt(N.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ne(N.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ne(N.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ne(N.paint_sky["sky-opacity"])})};function W0(c,s,h){const g=[0,0,1],y=dm([]);return fm(y,y,h?-fi(c)+Math.PI:fi(c)),hm(y,y,-fi(s)),ig(g,g,y),$l(g,g)}const S1={circle:class extends Ul{constructor(c){super(c,_0)}createBucket(c){return new bm(c)}queryRadius(c){const s=c;return Zh("circle-radius",this,s)+Zh("circle-stroke-width",this,s)+Qf(this.paint.get("circle-translate"))}queryIntersectsFeature(c,s,h,g,y,S,R,G){const X=km(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,c.pixelToTileUnitsFactor),K=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h);return vg(c,g,S,R,G,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),X,K)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new nh(this,c)}},heatmap:class extends Ul{createBucket(c){return new x0(c)}constructor(c){super(c,wv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"heatmap-color"===c&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return Zh("heatmap-radius",this,c)}queryIntersectsFeature(c,s,h,g,y,S,R,G){const X=this.paint.get("heatmap-radius").evaluate(s,h);return vg(c,g,S,R,G,!0,!0,new Dt(0,0),X)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new nh(this,c)}},hillshade:class extends Ul{constructor(c){super(c,Cv)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ul{constructor(c){super(c,D_)}getProgramIds(){const c=this.paint.get("fill-pattern"),s=c&&c.constantOr(1),h=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&h.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),h}getProgramConfiguration(c){return new nh(this,c)}recalculate(c,s){super.recalculate(c,s);const h=this.paint._values["fill-outline-color"];"constant"===h.value.kind&&void 0===h.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Eg(c)}queryRadius(){return Qf(this.paint.get("fill-translate"))}queryIntersectsFeature(c,s,h,g,y,S){return!c.queryGeometry.isAboveHorizon&&uc(gg(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,c.pixelToTileUnitsFactor),g)}isTileClipped(){return!0}},"fill-extrusion":class extends Ul{constructor(c){super(c,Fx)}createBucket(c){return new Df(c)}queryRadius(){return Qf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new nh(this,c)}queryIntersectsFeature(c,s,h,g,y,S,R,G,X){const K=km(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,c.pixelToTileUnitsFactor),ce=this.paint.get("fill-extrusion-height").evaluate(s,h),pe=this.paint.get("fill-extrusion-base").evaluate(s,h),_e=[0,0],Ae=G&&S.elevation,Oe=S.elevation?S.elevation.exaggeration():1,Ue=c.tile.getBucket(this);if(Ae&&Ue instanceof Df){const Jt=Ue.centroidVertexArray,di=X+1;di<Jt.length&&(_e[0]=Jt.geta_centroid_pos0(di),_e[1]=Jt.geta_centroid_pos1(di))}if(0===_e[0]&&1===_e[1])return!1;"globe"===S.projection.name&&(g=R_([g],[new Dt(0,0),new Dt(zr,zr)],c.tileID.canonical).map(Jt=>Jt.polygon).flat());const dt=Ae?G:null,[Rt,ii]=(di=g,li=pe,Qi=ce,Xi=K,kn=R,Kn=dt,sn=_e,Ln=Oe,Pn=S.center.lat,"globe"===(Jt=S).projection.name?function(tr,vn,wr,Vr,Er,rs,ir,ua,as,to,ss){const Sa=[],Uo=[],us=tr.projection.upVectorScale(ss,tr.center.lat,tr.worldSize).metersToTile,ds=[0,0,0,1],Mo=[0,0,0,1],Po=(Ro,ul,Il,hc)=>{Ro[0]=ul,Ro[1]=Il,Ro[2]=hc,Ro[3]=1},Fo=M_();wr>0&&(wr+=Fo),Vr+=Fo;for(const Ro of vn){const ul=[],Il=[];for(const hc of Ro){const Oo=hc.x+Er.x,Xc=hc.y+Er.y,fc=tr.projection.projectTilePoint(Oo,Xc,ss),bl=tr.projection.upVector(ss,hc.x,hc.y);let so=wr,pc=Vr;if(ir){const Bo=Wl(Oo,Xc,wr,Vr,ir,ua,as,to);so+=Bo.base,pc+=Bo.top}0!==wr?Po(ds,fc.x+bl[0]*us*so,fc.y+bl[1]*us*so,fc.z+bl[2]*us*so):Po(ds,fc.x,fc.y,fc.z),Po(Mo,fc.x+bl[0]*us*pc,fc.y+bl[1]*us*pc,fc.z+bl[2]*us*pc),rl(ds,ds,rs),rl(Mo,Mo,rs),ul.push(new cs(ds[0],ds[1],ds[2])),Il.push(new cs(Mo[0],Mo[1],Mo[2]))}Sa.push(ul),Uo.push(Il)}return[Sa,Uo]}(Jt,di,li,Qi,Xi,kn,Kn,sn,Ln,Pn,c.tileID.canonical):Kn?function(tr,vn,wr,Vr,Er,rs,ir,ua,as){const to=[],ss=[],Sa=[0,0,0,1];for(const Uo of tr){const us=[],ds=[];for(const Mo of Uo){const Po=Mo.x+Vr.x,Fo=Mo.y+Vr.y,Ro=Wl(Po,Fo,vn,wr,rs,ir,ua,as);Sa[0]=Po,Sa[1]=Fo,Sa[2]=Ro.base,Sa[3]=1,ff(Sa,Sa,Er),Sa[3]=Math.max(Sa[3],1e-5);const ul=new cs(Sa[0]/Sa[3],Sa[1]/Sa[3],Sa[2]/Sa[3]);Sa[0]=Po,Sa[1]=Fo,Sa[2]=Ro.top,Sa[3]=1,ff(Sa,Sa,Er),Sa[3]=Math.max(Sa[3],1e-5);const Il=new cs(Sa[0]/Sa[3],Sa[1]/Sa[3],Sa[2]/Sa[3]);us.push(ul),ds.push(Il)}to.push(us),ss.push(ds)}return[to,ss]}(di,li,Qi,Xi,kn,Kn,sn,Ln,Pn):function(tr,vn,wr,Vr,Er){const rs=[],ir=[],ua=Er[8]*vn,as=Er[9]*vn,to=Er[10]*vn,ss=Er[11]*vn,Sa=Er[8]*wr,Uo=Er[9]*wr,us=Er[10]*wr,ds=Er[11]*wr;for(const Mo of tr){const Po=[],Fo=[];for(const Ro of Mo){const ul=Ro.x+Vr.x,Il=Ro.y+Vr.y,hc=Er[0]*ul+Er[4]*Il+Er[12],Oo=Er[1]*ul+Er[5]*Il+Er[13],Xc=Er[2]*ul+Er[6]*Il+Er[14],fc=Er[3]*ul+Er[7]*Il+Er[15],bl=hc+ua,so=Oo+as,pc=Xc+to,Bo=Math.max(fc+ss,1e-5),Ad=hc+Sa,mc=Oo+Uo,Tu=Xc+us,ou=Math.max(fc+ds,1e-5);Po.push(new cs(bl/Bo,so/Bo,pc/Bo)),Fo.push(new cs(Ad/ou,mc/ou,Tu/ou))}rs.push(Po),ir.push(Fo)}return[rs,ir]}(di,li,Qi,Xi,kn)),Lt=c.queryGeometry;var Jt,di,li,Qi,Xi,kn,Kn,sn,Ln,Pn;return function(Jt,di,li){let Qi=1/0;uc(li,di)&&(Qi=fd(li,di[0]));for(let Xi=0;Xi<di.length;Xi++){const kn=di[Xi],Kn=Jt[Xi];for(let sn=0;sn<kn.length-1;sn++){const Ln=kn[sn],Pn=[Ln,kn[sn+1],Kn[sn+1],Kn[sn],Ln];Dl(li,Pn)&&(Qi=Math.min(Qi,fd(li,Pn)))}}return Qi!==1/0&&Qi}(Rt,ii,Lt.isPointQuery()?Lt.screenBounds:Lt.screenGeometry)}},line:class extends Ul{constructor(c){super(c,P_),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if("line-gradient"===c){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof wo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,s){super.recalculate(c,s),this.paint._values["line-floorwidth"]=ef.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new D0(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new nh(this,c)}queryRadius(c){const s=c,h=Pv(Zh("line-width",this,s),Zh("line-gap-width",this,s)),g=Zh("line-offset",this,s);return h/2+Math.abs(g)+Qf(this.paint.get("line-translate"))}queryIntersectsFeature(c,s,h,g,y,S){if(c.queryGeometry.isAboveHorizon)return!1;const R=gg(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,c.pixelToTileUnitsFactor),G=c.pixelToTileUnitsFactor/2*Pv(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),X=this.paint.get("line-offset").evaluate(s,h);return X&&(g=function(K,ce){const pe=[],_e=new Dt(0,0);for(let Ae=0;Ae<K.length;Ae++){const Oe=K[Ae],Ue=[];for(let dt=0;dt<Oe.length;dt++){const Rt=Oe[dt],ii=Oe[dt+1],Lt=0===dt?_e:Rt.sub(Oe[dt-1])._unit()._perp(),Jt=dt===Oe.length-1?_e:ii.sub(Rt)._unit()._perp(),di=Lt._add(Jt)._unit();di._mult(1/(di.x*Jt.x+di.y*Jt.y)),Ue.push(di._mult(ce)._add(Rt))}pe.push(Ue)}return pe}(g,X*c.pixelToTileUnitsFactor)),function(K,ce,pe){for(let _e=0;_e<ce.length;_e++){const Ae=ce[_e];if(K.length>=3)for(let Oe=0;Oe<Ae.length;Oe++)if(xf(K,Ae[Oe]))return!0;if(g0(K,Ae,pe))return!0}return!1}(R,g,G)}isTileClipped(){return!0}},symbol:$0,background:class extends Ul{constructor(c){super(c,E1)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ul{constructor(c){super(c,k1)}getProgramIds(){return["raster"]}},sky:class extends Ul{constructor(c){super(c,T1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"sky-gradient"===c?this._updateColorRamp():"sky-atmosphere-sun"!==c&&"sky-atmosphere-halo-color"!==c&&"sky-atmosphere-color"!==c&&"sky-atmosphere-sun-intensity"!==c||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=bg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(c,s){if("atmosphere"===this.paint.get("sky-type")){const g=this.paint.get("sky-atmosphere-sun"),y=!g,S=c.style.light,R=S.properties.get("position");return y&&"viewport"===S.properties.get("anchor")&&pr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?W0(R.azimuthal,90-R.polar,s):W0(g[0],90-g[1],s)}const h=this.paint.get("sky-gradient-center");return W0(h[0],90-h[1],s)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return"atmosphere"===c?["skyboxCapture","skybox"]:"gradient"===c?["skyboxGradient"]:null}}};class Xp{constructor(s,h,g,y){this.context=s,this.format=g,this.texture=s.gl.createTexture(),this.update(h,y)}update(s,h,g){const{width:y,height:S}=s,{context:R}=this,{gl:G}=R,{HTMLImageElement:X,HTMLCanvasElement:K,HTMLVideoElement:ce,ImageData:pe,ImageBitmap:_e}=j;if(G.bindTexture(G.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===G.RGBA&&(!h||!1!==h.premultiply)),g||this.size&&this.size[0]===y&&this.size[1]===S){const{x:Ae,y:Oe}=g||{x:0,y:0};s instanceof X||s instanceof K||s instanceof ce||s instanceof pe||_e&&s instanceof _e?G.texSubImage2D(G.TEXTURE_2D,0,Ae,Oe,G.RGBA,G.UNSIGNED_BYTE,s):G.texSubImage2D(G.TEXTURE_2D,0,Ae,Oe,y,S,G.RGBA,G.UNSIGNED_BYTE,s.data)}else this.size=[y,S],s instanceof X||s instanceof K||s instanceof ce||s instanceof pe||_e&&s instanceof _e?G.texImage2D(G.TEXTURE_2D,0,this.format,this.format,G.UNSIGNED_BYTE,s):G.texImage2D(G.TEXTURE_2D,0,this.format,y,S,0,this.format,G.UNSIGNED_BYTE,s.data);this.useMipmap=!!(h&&h.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&G.generateMipmap(G.TEXTURE_2D)}bind(s,h){const{context:g}=this,{gl:y}=g;y.bindTexture(y.TEXTURE_2D,this.texture),s!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap?s===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_NEAREST:s),this.filter=s),h!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,h),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class D1{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ng{constructor(){this.tasks={},this.taskQueue=[],jr(["process"],this),this.invoker=new D1(this.process),this.nextId=0}add(s,h){const g=this.nextId++,y=function({type:S,isSymbolTile:R,zoom:G}){return G=G||0,"message"===S?0:"maybePrepare"!==S||R?"parseTile"!==S||R?"parseTile"===S&&R?300-G:"maybePrepare"===S&&R?400-G:500:200-G:100-G}(h);if(0===y){Sn();try{s()}finally{}return{cancel:()=>{}}}return this.tasks[g]={fn:s,metadata:h,priority:y,id:g},this.taskQueue.push(g),this.invoker.trigger(),{cancel:()=>{delete this.tasks[g]}}}process(){Sn();try{if(this.taskQueue=this.taskQueue.filter(g=>!!this.tasks[g]),!this.taskQueue.length)return;const s=this.pick();if(null===s)return;const h=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!h)return;h.fn()}finally{}}pick(){let s=null,h=1/0;for(let y=0;y<this.taskQueue.length;y++){const S=this.tasks[this.taskQueue[y]];S.priority<h&&(h=S.priority,s=y)}if(null===s)return null;const g=this.taskQueue[s];return this.taskQueue.splice(s,1),g}remove(){this.invoker.remove()}}class qp{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const g=s[h];this._stringToNumber[g]=h,this._numberToString[h]=g}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const zg=["tile","layer","source","sourceLayer","state"];class X0{constructor(s,h,g,y,S){this.type="Feature",this._vectorTileFeature=s,this._z=h,this._x=g,this._y=y,this.properties=s.properties,this.id=S}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(s.id=this.id);for(const h of zg)void 0!==this[h]&&(s[h]=this[h]);return s}}const C=33,F=new Uint16Array(8184);for(let c=0;c<2046;c++){let s=c+2,h=0,g=0,y=0,S=0,R=0,G=0;for(1&s?y=S=R=32:h=g=G=32;(s>>=1)>1;){const K=h+y>>1,ce=g+S>>1;1&s?(y=h,S=g,h=R,g=G):(h=y,g=S,y=R,S=G),R=K,G=ce}const X=4*c;F[X+0]=h,F[X+1]=g,F[X+2]=y,F[X+3]=S}const ee=new Uint16Array(2178),Ce=new Uint8Array(1089),Qe=new Uint16Array(1089);function St(c){return 0===c?-.03125:32===c?.03125:0}var oi=Ai([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Di={type:2,extent:zr,loadGeometry:()=>[[new Dt(0,0),new Dt(zr+1,0),new Dt(zr+1,zr+1),new Dt(0,zr+1),new Dt(0,0)]]};class ji{constructor(s,h,g,y,S){this.tileID=s,this.uid=Mi(),this.uses=0,this.tileSize=h,this.tileZoom=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,this.expiredRequestCount=0,this.state="loading",y&&y.transform&&(this.projection=y.transform.projection)}registerFadeDuration(s){const h=s+this.timeAdded;h<u.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=up(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(s,h,g){if(this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,S){const R={};if(!S)return R;for(const G of y){const X=G.layerIds.map(K=>S.getLayer(K)).filter(Boolean);if(0!==X.length){G.layers=X,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(K=>X.filter(ce=>ce.id===K)[0]));for(const K of X)R[K.id]=G}}return R}(s.buckets,h.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const S=this.buckets[y];if(S instanceof hp){if(this.hasSymbolBuckets=!0,!g)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const S=this.buckets[y];if(S instanceof hp&&S.hasRTLText){this.hasRTLText=!0,re.isLoading()||re.isLoaded()||"deferred"!==V()||Q();break}}this.queryPadding=0;for(const y in this.buckets){const S=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(y).queryRadius(S))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),s.lineAtlas&&(this.lineAtlas=s.lineAtlas)}else this.collisionBoxArray=new Ds}unloadVectorData(){if(this.hasData()){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(s){return this.buckets[s.id]}upload(s){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(s)}const h=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xp(s,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xp(s,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Xp(s,this.lineAtlas.image,h.ALPHA),this.lineAtlas.uploaded=!0)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,h,g,y,S,R,G,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:y,pixelPosMatrix:G,transform:R,params:S,tileTransform:this.tileTransform},s,h,g):{}}querySourceFeatures(s,h){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),S=h?h.sourceLayer:"",R=y._geojsonTileLayer||y[S];if(!R)return;const G=on(h&&h.filter),{z:X,x:K,y:ce}=this.tileID.canonical,pe={z:X,x:K,y:ce};for(let _e=0;_e<R.length;_e++){const Ae=R.feature(_e);if(G.needGeometry){const dt=wu(Ae,!0);if(!G.filter(new de(this.tileID.overscaledZ),dt,this.tileID.canonical))continue}else if(!G.filter(new de(this.tileID.overscaledZ),Ae))continue;const Oe=g.getId(Ae,S),Ue=new X0(Ae,X,K,ce,Oe);Ue.tile=pe,s.push(Ue)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const h=this.expirationTime;if(s.cacheControl){const g=Dn(s.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(h)if(this.expirationTime<h)y=!0;else{const S=this.expirationTime-h;S?this.expirationTime=g+Math.max(S,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length||!h)return;const g=this.latestFeatureIndex.loadVTLayers(),y=h.style.listImages();for(const S in this.buckets){if(!h.style.hasLayer(S))continue;const R=this.buckets[S],G=R.layers[0].sourceLayer||"_geojsonTileLayer",X=g[G],K=s[G];if(!X||!K||0===Object.keys(K).length)continue;if(R.update(K,X,y,this.imageAtlas&&this.imageAtlas.patternPositions||{}),R instanceof D0||R instanceof Eg){const pe=h.style._getSourceCache(R.layers[0].source);h._terrain&&h._terrain.enabled&&pe&&R.programConfigurations.needsUpload&&h._terrain._clearRenderCacheForTile(pe.id,this.tileID)}const ce=h&&h.style&&h.style.getLayer(S);ce&&(this.queryPadding=Math.max(this.queryPadding,ce.queryRadius(R)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=u.now()+s}setTexture(s,h){const g=h.context,y=g.gl;this.texture=this.texture||h.getTileTexture(s.width),this.texture?this.texture.update(s,{useMipmap:!0}):(this.texture=new Xp(g,s,y.RGBA,{useMipmap:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE))}setDependencies(s,h){const g={};for(const y of h)g[y]=!0;this.dependencies[s]=g}hasDependency(s,h){for(const g of s){const y=this.dependencies[g];if(y)for(const S of h)if(y[S])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(s,h){if(!h||"mercator"===h.name||this._tileDebugBuffer)return;const g=Oh(Di,this.tileID.canonical,this.tileTransform)[0],y=new Gn,S=new Uc;for(let R=0;R<g.length;R++){const{x:G,y:X}=g[R];y.emplaceBack(G,X),S.emplaceBack(R)}S.emplaceBack(0),this._tileDebugIndexBuffer=s.createIndexBuffer(S),this._tileDebugBuffer=s.createVertexBuffer(y,pf.members),this._tileDebugSegments=nl.simpleSegment(0,0,y.length,S.length)}_makeTileBoundsBuffers(s,h){if(this._tileBoundsBuffer||!h||"mercator"===h.name)return;const g=Oh(Di,this.tileID.canonical,this.tileTransform)[0];let y,S;if(this.isRaster){const R=function(G,X){const K=up(G,X),ce=Math.pow(2,G.z);for(let dt=0;dt<C;dt++)for(let Rt=0;Rt<C;Rt++){const ii=ud((G.x+(Rt+St(Rt))/32)/ce),Lt=Sc((G.y+(dt+St(dt))/32)/ce),Jt=X.project(ii,Lt),di=dt*C+Rt;ee[2*di+0]=Math.round((Jt.x*K.scale-K.x)*zr),ee[2*di+1]=Math.round((Jt.y*K.scale-K.y)*zr)}Ce.fill(0),Qe.fill(0);for(let dt=2045;dt>=0;dt--){const Rt=4*dt,ii=F[Rt+0],Lt=F[Rt+1],Jt=F[Rt+2],di=F[Rt+3],li=ii+Jt>>1,Qi=Lt+di>>1,Xi=li+Qi-Lt,kn=Qi+ii-li,Kn=Lt*C+ii,sn=di*C+Jt,Ln=Qi*C+li,Pn=Math.hypot((ee[2*Kn+0]+ee[2*sn+0])/2-ee[2*Ln+0],(ee[2*Kn+1]+ee[2*sn+1])/2-ee[2*Ln+1])>=16;Ce[Ln]=Ce[Ln]||(Pn?1:0),dt<1022&&(Ce[Ln]=Ce[Ln]||Ce[(Lt+kn>>1)*C+(ii+Xi>>1)]||Ce[(di+kn>>1)*C+(Jt+Xi>>1)])}const pe=new un,_e=new ta;let Ae=0;function Oe(dt,Rt){const ii=Rt*C+dt;return 0===Qe[ii]&&(pe.emplaceBack(ee[2*ii+0],ee[2*ii+1],dt*zr/32,Rt*zr/32),Qe[ii]=++Ae),Qe[ii]-1}function Ue(dt,Rt,ii,Lt,Jt,di){const li=dt+ii>>1,Qi=Rt+Lt>>1;if(Math.abs(dt-Jt)+Math.abs(Rt-di)>1&&Ce[Qi*C+li])Ue(Jt,di,dt,Rt,li,Qi),Ue(ii,Lt,Jt,di,li,Qi);else{const Xi=Oe(dt,Rt),kn=Oe(ii,Lt),Kn=Oe(Jt,di);_e.emplaceBack(Xi,kn,Kn)}}return Ue(0,0,32,32,32,0),Ue(32,32,0,0,0,32),{vertices:pe,indices:_e}}(this.tileID.canonical,h);y=R.vertices,S=R.indices}else{y=new un,S=new ta;for(const{x:G,y:X}of g)y.emplaceBack(G,X,0,0);const R=Fh(y.int16,void 0,4);for(let G=0;G<R.length;G+=3)S.emplaceBack(R[G],R[G+1],R[G+2])}this._tileBoundsBuffer=s.createVertexBuffer(y,oi.members),this._tileBoundsIndexBuffer=s.createIndexBuffer(S),this._tileBoundsSegments=nl.simpleSegment(0,0,y.length,S.length)}_makeGlobeTileDebugBuffers(s,h){const g=h.projection;if(!g||"globe"!==g.name||h.freezeTileCoverage)return;const y=this.tileID.canonical,S=Kf(u0(y,h)),R=lh(h.zoom);let G;R>0&&(G=om(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(s,y,h,S,G,R),this._makeGlobeTileDebugTextBuffer(s,y,h,S,G,R)}_globePoint(s,h,g,y,S,R,G){let X=Mp(s,h,g);if(R){const K=1<<g.z,ce=ch(y.center.lng),pe=uh(y.center.lat),_e=(g.x+.5)/K-ce;let Ae=0;_e>.5?Ae=-1:_e<-.5&&(Ae=1);let Oe=(s/zr+g.x)/K+Ae,Ue=(h/zr+g.y)/K;Oe=(Oe-ce)*y._pixelsPerMercatorPixel+ce,Ue=(Ue-pe)*y._pixelsPerMercatorPixel+pe;const dt=[Oe*y.worldSize,Ue*y.worldSize,0];rl(dt,dt,R),X=gf(X,dt,G)}return rl(X,X,S)}_makeGlobeTileDebugBorderBuffer(s,h,g,y,S,R){const G=new Gn,X=new Uc,K=new Hi,ce=(_e,Ae,Oe,Ue,dt)=>{const Rt=(Oe-_e)/(dt-1),ii=(Ue-Ae)/(dt-1),Lt=G.length;for(let Jt=0;Jt<dt;Jt++){const di=_e+Jt*Rt,li=Ae+Jt*ii;G.emplaceBack(di,li);const Qi=this._globePoint(di,li,h,g,y,S,R);K.emplaceBack(Qi[0],Qi[1],Qi[2]),X.emplaceBack(Lt+Jt)}},pe=zr;ce(0,0,pe,0,16),ce(pe,0,pe,pe,16),ce(pe,pe,0,pe,16),ce(0,pe,0,0,16),this._tileDebugIndexBuffer=s.createIndexBuffer(X),this._tileDebugBuffer=s.createVertexBuffer(G,pf.members),this._globeTileDebugBorderBuffer=s.createVertexBuffer(K,Ip.members),this._tileDebugSegments=nl.simpleSegment(0,0,G.length,X.length)}_makeGlobeTileDebugTextBuffer(s,h,g,y,S,R){const G=zr/4,X=new Gn,K=new ta,ce=new Hi;K.reserve(32),X.reserve(25),ce.reserve(25);const _e=(Ae,Oe)=>25*Ae+Oe;for(let Ae=0;Ae<25;Ae++){const Oe=Ae*G;for(let Ue=0;Ue<25;Ue++){const dt=Ue*G;X.emplaceBack(dt,Oe);const Rt=this._globePoint(dt,Oe,h,g,y,S,R);ce.emplaceBack(Rt[0],Rt[1],Rt[2])}}for(let Ae=0;Ae<4;Ae++)for(let Oe=0;Oe<4;Oe++){const Ue=_e(Ae,Oe),dt=_e(Ae,Oe+1),Rt=_e(Ae+1,Oe),ii=_e(Ae+1,Oe+1);K.emplaceBack(Ue,dt,Rt),K.emplaceBack(Rt,dt,ii)}this._tileDebugTextIndexBuffer=s.createIndexBuffer(K),this._tileDebugTextBuffer=s.createVertexBuffer(X,pf.members),this._globeTileDebugTextBuffer=s.createVertexBuffer(ce,Ip.members),this._tileDebugTextSegments=nl.simpleSegment(0,0,25,32)}}class Wn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,h,g){const y=String(h);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},fr(this.stateChanges[s][y],g),null===this.deletedStates[s]){this.deletedStates[s]={};for(const S in this.state[s])S!==y&&(this.deletedStates[s][S]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][y]){this.deletedStates[s][y]={};for(const S in this.state[s][y])g[S]||(this.deletedStates[s][y][S]=null)}else for(const S in g)this.deletedStates[s]&&this.deletedStates[s][y]&&null===this.deletedStates[s][y][S]&&delete this.deletedStates[s][y][S]}removeFeatureState(s,h,g){if(null===this.deletedStates[s])return;const y=String(h);if(this.deletedStates[s]=this.deletedStates[s]||{},g&&void 0!==h)null!==this.deletedStates[s][y]&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][g]=null);else if(void 0!==h)if(this.stateChanges[s]&&this.stateChanges[s][y])for(g in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][g]=null;else this.deletedStates[s][y]=null;else this.deletedStates[s]=null}getState(s,h){const g=String(h),y=fr({},(this.state[s]||{})[g],(this.stateChanges[s]||{})[g]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const S=this.deletedStates[s][h];if(null===S)return{};for(const R in S)delete y[R]}return y}initializeTileState(s,h){s.setFeatureState(this.state,h)}coalesceChanges(s,h){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const S={};for(const R in this.stateChanges[y])this.state[y][R]||(this.state[y][R]={}),fr(this.state[y][R],this.stateChanges[y][R]),S[R]=this.state[y][R];g[y]=S}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const S={};if(null===this.deletedStates[y])for(const R in this.state[y])S[R]={},this.state[y][R]={};else for(const R in this.deletedStates[y]){if(null===this.deletedStates[y][R])this.state[y][R]={};else if(this.state[y][R])for(const G of Object.keys(this.deletedStates[y][R]))delete this.state[y][R][G];S[R]=this.state[y][R]}g[y]=g[y]||{},fr(g[y],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(g).length)for(const y in s)s[y].setFeatureState(g,h)}}class Xn{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,h){const g=this.toIdx(s,h);return{min:this.minimums[g],max:this.maximums[g]}}isLeaf(s,h){return this.leaves[this.toIdx(s,h)]}toIdx(s,h){return h*this.size+s}}function rr(c,s,h,g){let y=0,S=Number.MAX_VALUE;for(let R=0;R<3;R++)if(Math.abs(g[R])<1e-15){if(h[R]<c[R]||h[R]>s[R])return null}else{const G=1/g[R];let X=(c[R]-h[R])*G,K=(s[R]-h[R])*G;if(X>K){const ce=X;X=K,K=ce}if(X>y&&(y=X),K<S&&(S=K),y>S)return null}return y}function Hr(c,s,h,g,y,S,R,G,X,K,ce){const pe=g-c,_e=y-s,Ae=S-h,Oe=R-c,Ue=G-s,dt=X-h,Rt=ce[1]*dt-ce[2]*Ue,ii=ce[2]*Oe-ce[0]*dt,Lt=ce[0]*Ue-ce[1]*Oe,Jt=pe*Rt+_e*ii+Ae*Lt;if(Math.abs(Jt)<1e-15)return null;const di=1/Jt,li=K[0]-c,Qi=K[1]-s,Xi=K[2]-h,kn=(li*Rt+Qi*ii+Xi*Lt)*di;if(kn<0||kn>1)return null;const Kn=Qi*Ae-Xi*_e,sn=Xi*pe-li*Ae,Ln=li*_e-Qi*pe,Pn=(ce[0]*Kn+ce[1]*sn+ce[2]*Ln)*di;return Pn<0||kn+Pn>1?null:(Oe*Kn+Ue*sn+dt*Ln)*di}function _a(c,s,h){return(c-s)/(h-s)}function Za(c,s,h,g,y,S,R,G,X){const K=1<<h,ce=S-g,pe=R-y,_e=(c+1)/K*ce+g,Ae=(s+0)/K*pe+y,Oe=(s+1)/K*pe+y;G[0]=(c+0)/K*ce+g,G[1]=Ae,X[0]=_e,X[1]=Oe}class Fs{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const h=function(S){const R=Math.ceil(Math.log2(S.dim/8)),G=[];let X=Math.ceil(Math.pow(2,R));const K=1/X,ce=(Ae,Oe,Ue,dt,Rt)=>{const ii=dt?1:0,Lt=(Ae+1)*Ue-ii,Jt=Oe*Ue,di=(Oe+1)*Ue-ii;Rt[0]=Ae*Ue,Rt[1]=Jt,Rt[2]=Lt,Rt[3]=di};let pe=new Xn(X);const _e=[];for(let Ae=0;Ae<X*X;Ae++){ce(Ae%X,Math.floor(Ae/X),K,!1,_e);const Oe=ys(_e[0],_e[1],S),Ue=ys(_e[2],_e[1],S),dt=ys(_e[2],_e[3],S),Rt=ys(_e[0],_e[3],S);pe.minimums.push(Math.min(Oe,Ue,dt,Rt)),pe.maximums.push(Math.max(Oe,Ue,dt,Rt)),pe.leaves.push(1)}for(G.push(pe),X/=2;X>=1;X/=2){const Ae=G[G.length-1];pe=new Xn(X);for(let Oe=0;Oe<X*X;Oe++){ce(Oe%X,Math.floor(Oe/X),2,!0,_e);const Ue=Ae.getElevation(_e[0],_e[1]),dt=Ae.getElevation(_e[2],_e[1]),Rt=Ae.getElevation(_e[2],_e[3]),ii=Ae.getElevation(_e[0],_e[3]),Lt=Ae.isLeaf(_e[0],_e[1]),Jt=Ae.isLeaf(_e[2],_e[1]),di=Ae.isLeaf(_e[2],_e[3]),li=Ae.isLeaf(_e[0],_e[3]),Qi=Math.min(Ue.min,dt.min,Rt.min,ii.min),Xi=Math.max(Ue.max,dt.max,Rt.max,ii.max),kn=Lt&&Jt&&di&&li;pe.maximums.push(Xi),pe.minimums.push(Qi),pe.leaves.push(Xi-Qi<=5&&kn?1:0)}G.push(pe)}return G}(this.dem),g=h.length-1,y=h[g];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(h,0,0,g,0)}raycastRoot(s,h,g,y,S,R,G=1){return rr([s,h,-100],[g,y,this.maximums[0]*G],S,R)}raycast(s,h,g,y,S,R,G=1){if(!this.nodeCount)return null;const X=this.raycastRoot(s,h,g,y,S,R,G);if(null==X)return null;const K=[],ce=[],pe=[],_e=[],Ae=[{idx:0,t:X,nodex:0,nodey:0,depth:0}];for(;Ae.length>0;){const{idx:Oe,t:Ue,nodex:dt,nodey:Rt,depth:ii}=Ae.pop();if(this.leaves[Oe]){Za(dt,Rt,ii,s,h,g,y,pe,_e);const Jt=1<<ii,di=(dt+0)/Jt,li=(dt+1)/Jt,Qi=(Rt+0)/Jt,Xi=(Rt+1)/Jt,kn=ys(di,Qi,this.dem)*G,Kn=ys(li,Qi,this.dem)*G,sn=ys(li,Xi,this.dem)*G,Ln=ys(di,Xi,this.dem)*G,Pn=Hr(pe[0],pe[1],kn,_e[0],pe[1],Kn,_e[0],_e[1],sn,S,R),jn=Hr(_e[0],_e[1],sn,pe[0],_e[1],Ln,pe[0],pe[1],kn,S,R),tr=Math.min(null!==Pn?Pn:Number.MAX_VALUE,null!==jn?jn:Number.MAX_VALUE);if(tr!==Number.MAX_VALUE)return tr;{const vn=Cd([],S,R,Ue);if(Ka(kn,Kn,Ln,sn,_a(vn[0],pe[0],_e[0]),_a(vn[1],pe[1],_e[1]))>=vn[2])return Ue}continue}let Lt=0;for(let Jt=0;Jt<this._siblingOffset.length;Jt++){Za((dt<<1)+this._siblingOffset[Jt][0],(Rt<<1)+this._siblingOffset[Jt][1],ii+1,s,h,g,y,pe,_e),pe[2]=-100,_e[2]=this.maximums[this.childOffsets[Oe]+Jt]*G;const di=rr(pe,_e,S,R);if(null!=di){const li=di;K[Jt]=li;let Qi=!1;for(let Xi=0;Xi<Lt&&!Qi;Xi++)li>=K[ce[Xi]]&&(ce.splice(Xi,0,Jt),Qi=!0);Qi||(ce[Lt]=Jt),Lt++}}for(let Jt=0;Jt<Lt;Jt++){const di=ce[Jt];Ae.push({idx:this.childOffsets[Oe]+di,t:K[di],nodex:(dt<<1)+this._siblingOffset[di][0],nodey:(Rt<<1)+this._siblingOffset[di][1],depth:ii+1})}}return null}_addNode(s,h,g){return this.minimums.push(s),this.maximums.push(h),this.leaves.push(g),this.childOffsets.push(0),this.nodeCount++}_construct(s,h,g,y,S){if(1===s[y].isLeaf(h,g))return;this.childOffsets[S]||(this.childOffsets[S]=this.nodeCount);const R=y-1,G=s[R];let X=0,K=0;for(let ce=0;ce<this._siblingOffset.length;ce++){const pe=2*h+this._siblingOffset[ce][0],_e=2*g+this._siblingOffset[ce][1],Ae=G.getElevation(pe,_e),Oe=G.isLeaf(pe,_e),Ue=this._addNode(Ae.min,Ae.max,Oe);Oe&&(X|=1<<ce),K||(K=Ue)}for(let ce=0;ce<this._siblingOffset.length;ce++)X&1<<ce||this._construct(s,2*h+this._siblingOffset[ce][0],2*g+this._siblingOffset[ce][1],R,K+ce)}}function Ka(c,s,h,g,y,S){return ps(ps(c,h,S),ps(s,g,S),y)}function ys(c,s,h){const g=h.dim,y=Ki(c*g-.5,0,g-1),S=Ki(s*g-.5,0,g-1),R=Math.floor(y),G=Math.floor(S),X=Math.min(R+1,g-1),K=Math.min(G+1,g-1);return Ka(h.get(R,G),h.get(X,G),h.get(R,K),h.get(X,K),y-R,S-G)}const eo={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function jd(c,s,h){return(256*c*256+256*s+h)/10-1e4}function md(c,s,h){return 256*c+s+h/256-32768}class Uu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,h,g,y=!1,S=!1){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(g&&"mapbox"!==g&&"terrarium"!==g)return pr(`"${g}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const R=this.dim=h.height-2,G=new Uint32Array(h.data.buffer);if(this.pixels=new Uint8Array(h.data.buffer),this.encoding=g||"mapbox",this.borderReady=y,!y){for(let X=0;X<R;X++)G[this._idx(-1,X)]=G[this._idx(0,X)],G[this._idx(R,X)]=G[this._idx(R-1,X)],G[this._idx(X,-1)]=G[this._idx(X,0)],G[this._idx(X,R)]=G[this._idx(X,R-1)];G[this._idx(-1,-1)]=G[this._idx(0,0)],G[this._idx(R,-1)]=G[this._idx(R-1,0)],G[this._idx(-1,R)]=G[this._idx(0,R-1)],G[this._idx(R,R)]=G[this._idx(R-1,R-1)],S&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Fs(this)}get(s,h,g=!1){g&&(s=Ki(s,-1,this.dim),h=Ki(h,-1,this.dim));const y=4*this._idx(s,h);return("terrarium"===this.encoding?md:jd)(this.pixels[y],this.pixels[y+1],this.pixels[y+2])}static getUnpackVector(s){return eo[s]}get unpackVector(){return eo[this.encoding]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}static pack(s,h){const g=[0,0,0,0],y=Uu.getUnpackVector(h);let S=Math.floor((s+y[3])/y[2]);return g[2]=S%256,S=Math.floor(S/256),g[1]=S%256,S=Math.floor(S/256),g[0]=S,g}getPixels(){return new cl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,h,g){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,S=h*this.dim+this.dim,R=g*this.dim,G=g*this.dim+this.dim;switch(h){case-1:y=S-1;break;case 1:S=y+1}switch(g){case-1:R=G-1;break;case 1:G=R+1}const X=-h*this.dim,K=-g*this.dim;for(let ce=R;ce<G;ce++)for(let pe=y;pe<S;pe++){const _e=4*this._idx(pe,ce),Ae=4*this._idx(pe+X,ce+K);this.pixels[_e+0]=s.pixels[Ae+0],this.pixels[_e+1]=s.pixels[Ae+1],this.pixels[_e+2]=s.pixels[Ae+2],this.pixels[_e+3]=s.pixels[Ae+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Tr(Uu,"DEMData"),Tr(Fs,"DemMinMaxQuadTree",{omit:["dem"]});class dc{constructor(s,h){this.max=s,this.onRemove=h,this.reset()}reset(){for(const s in this.data)for(const h of this.data[s])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(s,h,g){const y=s.wrapped().key;void 0===this.data[y]&&(this.data[y]=[]);const S={value:h,timeout:void 0};if(void 0!==g&&(S.timeout=setTimeout(()=>{this.remove(s,S)},g)),this.data[y].push(S),this.order.push(y),this.order.length>this.max){const R=this._getAndRemoveByKey(this.order[0]);R&&this.onRemove(R)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const h=this.data[s].shift();return h.timeout&&clearTimeout(h.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),h.value}getByKey(s){const h=this.data[s];return h?h[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,h){if(!this.has(s))return this;const g=s.wrapped().key,y=void 0===h?0:this.data[g].indexOf(h),S=this.data[g][y];return this.data[g].splice(y,1),S.timeout&&clearTimeout(S.timeout),0===this.data[g].length&&delete this.data[g],this.onRemove(S.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(s){const h=[];for(const g in this.data)for(const y of this.data[g])s(y.value)||h.push(y);for(const g of h)this.remove(g.value.tileID,g)}}class ju{constructor(s,h,g){this.func=s,this.mask=h,this.range=g}}ju.ReadOnly=!1,ju.ReadWrite=!0,ju.disabled=new ju(519,ju.ReadOnly,[0,1]);class q0{constructor(s,h,g,y,S,R){this.test=s,this.ref=h,this.mask=g,this.fail=y,this.depthFail=S,this.pass=R}}q0.disabled=new q0({func:519,mask:0},0,0,7680,7680,7680);class fp{constructor(s,h,g){this.blendFunction=s,this.blendColor=h,this.mask=g}}fp.Replace=[1,0],fp.disabled=new fp(fp.Replace,va.transparent,[!1,!1,!1,!1]),fp.unblended=new fp(fp.Replace,va.transparent,[!0,!0,!0,!0]),fp.alphaBlended=new fp([1,771],va.transparent,[!0,!0,!0,!0]);class Rf{constructor(s,h,g){this.enable=s,this.mode=h,this.frontFace=g}}Rf.disabled=new Rf(!1,1029,2305),Rf.backCCW=new Rf(!0,1029,2305),Rf.backCW=new Rf(!0,1029,2304),Rf.frontCW=new Rf(!0,1028,2304),Rf.frontCCW=new Rf(!0,1028,2305);class Yg extends M{constructor(s,h,g){super(),this.id=s,this._onlySymbols=g,h.on("data",y=>{"source"===y.dataType&&"metadata"===y.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===y.dataType&&"content"===y.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new dc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Wn,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(s){this.map=s,this._minTileCacheSize=void 0===this._minTileCacheSize&&s?s._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&s?s._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const h=this._tiles[s];if("loaded"!==h.state&&"errored"!==h.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(s,h){return s.isSymbolTile=this._onlySymbols,this._source.loadTile(s,h)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){if(this._source.abortTile)return this._source.abortTile(s,()=>{})}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const g=this._tiles[h];g.upload(s),g.prepare(this.map.style.imageManager)}}getIds(){return yr(this._tiles).map(s=>s.tileID).sort(Bx).map(s=>s.key)}getRenderableIds(s){const h=[];for(const g in this._tiles)this._isIdRenderable(+g,s)&&h.push(this._tiles[g]);return s?h.sort((g,y)=>{const S=g.tileID,R=y.tileID,G=new Dt(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),X=new Dt(R.canonical.x,R.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-R.overscaledZ||X.y-G.y||X.x-G.x}).map(g=>g.tileID.key):h.map(g=>g.tileID).sort(Bx).map(g=>g.key)}hasRenderableParent(s){const h=this.findLoadedParent(s,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(s,h){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(h||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(+s,"reloading")}}_reloadTile(s,h){const g=this._tiles[s];g&&("loading"!==g.state&&(g.state=h),this._loadTile(g,this._tileLoaded.bind(this,g,s,h)))}_tileLoaded(s,h,g,y){if(y)if(s.state="errored",404!==y.status)this._source.fire(new E(y,{tile:s}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform);else s.timeAdded=u.now(),"expired"===g&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(h,s),"raster-dem"===this._source.type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),this._source.fire(new w("data",{dataType:"source",tile:s,coord:s.tileID,sourceCacheId:this.id}))}_backfillDEM(s){const h=this.getRenderableIds();for(let y=0;y<h.length;y++){const S=h[y];if(s.neighboringTiles&&s.neighboringTiles[S]){const R=this.getTileByID(S);g(s,R),g(R,s)}}function g(y,S){if(!y.dem||y.dem.borderReady)return;y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0;let R=S.tileID.canonical.x-y.tileID.canonical.x;const G=S.tileID.canonical.y-y.tileID.canonical.y,X=Math.pow(2,y.tileID.canonical.z),K=S.tileID.key;0===R&&0===G||Math.abs(G)>1||(Math.abs(R)>1&&(1===Math.abs(R+X)?R+=X:1===Math.abs(R-X)&&(R-=X)),S.dem&&y.dem&&(y.dem.backfillBorder(S.dem,R,G),y.neighboringTiles&&y.neighboringTiles[K]&&(y.neighboringTiles[K].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,h,g,y){for(const S in this._tiles){let R=this._tiles[S];if(y[S]||!R.hasData()||R.tileID.overscaledZ<=h||R.tileID.overscaledZ>g)continue;let G=R.tileID;for(;R&&R.tileID.overscaledZ>h+1;){const K=R.tileID.scaledTo(R.tileID.overscaledZ-1);R=this._tiles[K.key],R&&R.hasData()&&(G=K)}let X=G;for(;X.overscaledZ>h;)if(X=X.scaledTo(X.overscaledZ-1),s[X.key]){y[G.key]=G;break}}}findLoadedParent(s,h){if(s.key in this._loadedParentTiles){const g=this._loadedParentTiles[s.key];return g&&g.tileID.overscaledZ>=h?g:null}for(let g=s.overscaledZ-1;g>=h;g--){const y=s.scaledTo(g),S=this._getLoadedTile(y);if(S)return S}}_getLoadedTile(s){const h=this._tiles[s.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?s.wrapped().key:s.canonical.key)}updateCacheSize(s,h){h=h||this._source.tileSize;const g=Math.ceil(s.width/h)+1,y=Math.ceil(s.height/h)+1,S=Math.floor(g*y*5),R="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,S):S,G="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,R):R;this._cache.setMaxSize(G)}handleWrapJump(s){const h=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,h){const g={};for(const y in this._tiles){const S=this._tiles[y];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+h),g[S.tileID.key]=S}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(+y,this._tiles[y])}}update(s,h,g){if(this.transform=s,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!g)return;let y;this.updateCacheSize(s,h),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new Yu(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(y=s.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(y=y.filter(G=>this._source.hasTile(G)))):y=[];const S=this._updateRetainedTiles(y);if(Nx(this._source.type)&&0!==y.length){const G={},X={},K=Object.keys(S);for(const pe of K){const _e=S[pe],Ae=this._tiles[pe];if(!Ae||Ae.fadeEndTime&&Ae.fadeEndTime<=u.now())continue;const Oe=this.findLoadedParent(_e,Math.max(_e.overscaledZ-Yg.maxOverzooming,this._source.minzoom));Oe&&(this._addTile(Oe.tileID),G[Oe.tileID.key]=Oe.tileID),X[pe]=_e}const ce=y[y.length-1].overscaledZ;for(const pe in this._tiles){const _e=this._tiles[pe];if(S[pe]||!_e.hasData())continue;let Ae=_e.tileID;for(;Ae.overscaledZ>ce;){Ae=Ae.scaledTo(Ae.overscaledZ-1);const Oe=this._tiles[Ae.key];if(Oe&&Oe.hasData()&&X[Ae.key]){S[pe]=_e.tileID;break}}}for(const pe in G)S[pe]||(this._coveredTiles[pe]=!0,S[pe]=G[pe])}for(const G in S)this._tiles[G].clearFadeHold();const R=function(G,X){const K=[];for(const ce in G)ce in X||K.push(ce);return K}(this._tiles,S);for(const G of R){const X=this._tiles[G];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(+G)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(+s)}_updateRetainedTiles(s){const h={};if(0===s.length)return h;const g={},y=s.reduce((K,ce)=>Math.min(K,ce.overscaledZ),1/0),S=s[0].overscaledZ,R=Math.max(S-Yg.maxOverzooming,this._source.minzoom),G=Math.max(S+Yg.maxUnderzooming,this._source.minzoom),X={};for(const K of s){const ce=this._addTile(K);h[K.key]=K,ce.hasData()||y<this._source.maxzoom&&(X[K.key]=K)}this._retainLoadedChildren(X,y,G,h);for(const K of s){let ce=this._tiles[K.key];if(ce.hasData())continue;if(K.canonical.z>=this._source.maxzoom){const _e=K.children(this._source.maxzoom)[0],Ae=this.getTile(_e);if(Ae&&Ae.hasData()){h[_e.key]=_e;continue}}else{const _e=K.children(this._source.maxzoom);if(h[_e[0].key]&&h[_e[1].key]&&h[_e[2].key]&&h[_e[3].key])continue}let pe=ce.wasRequested();for(let _e=K.overscaledZ-1;_e>=R;--_e){const Ae=K.scaledTo(_e);if(g[Ae.key]||(g[Ae.key]=!0,ce=this.getTile(Ae),!ce&&pe&&(ce=this._addTile(Ae)),ce&&(h[Ae.key]=Ae,pe=ce.wasRequested(),ce.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const h=[];let g,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}h.push(y.key);const S=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(S),g)break;y=S}for(const S of h)this._loadedParentTiles[S]=g}}_addTile(s){let h=this._tiles[s.key];if(h)return h;h=this._cache.getAndRemove(s),h&&(this._setTileReloadTimer(s.key,h),h.tileID=s,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,h)));const g=!!h;if(!g){const y=this.map?this.map.painter:null;h=new ji(s,this._source.tileSize*s.overscaleFactor(),this.transform.tileZoom,y,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,s.key,h.state))}return h?(h.uses++,this._tiles[s.key]=h,g||this._source.fire(new w("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null}_setTileReloadTimer(s,h){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const g=h.getExpiryTimeout();g&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},g))}_removeTile(s){const h=this._tiles[s];h&&(h.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),h.uses>0||(h.hasData()&&"reloading"!==h.state?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(+s);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(s,h,g){const y=[],S=this.transform;if(!S)return y;const R="globe"===S.projection.name,G=ch(S.center.lng);for(const X in this._tiles){const K=this._tiles[X];if(g&&K.clearQueryDebugViz(),K.holdingForFade())continue;let ce;if(R){const pe=K.tileID.canonical;if(0===pe.z){const _e=[Math.abs(Ki(G,...r_(pe,-1))-G),Math.abs(Ki(G,...r_(pe,1))-G)];ce=[0,2*_e.indexOf(Math.min(..._e))-1]}else{const _e=[Math.abs(Ki(G,...r_(pe,-1))-G),Math.abs(Ki(G,...r_(pe,0))-G),Math.abs(Ki(G,...r_(pe,1))-G)];ce=[_e.indexOf(Math.min(..._e))-1]}}else ce=[0];for(const pe of ce){const _e=s.containsTile(K,S,h,pe);_e&&y.push(_e)}}return y}getVisibleCoordinates(s){const h=this.getRenderableIds(s).map(g=>this._tiles[g].tileID);for(const g of h)g.projMatrix=this.transform.calculateProjMatrix(g.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(Nx(this._source.type))for(const s in this._tiles){const h=this._tiles[s];if(void 0!==h.fadeEndTime&&h.fadeEndTime>=u.now())return!0}return!1}setFeatureState(s,h,g){this._state.updateState(s=s||"_geojsonTileLayer",h,g)}removeFeatureState(s,h,g){this._state.removeFeatureState(s=s||"_geojsonTileLayer",h,g)}getFeatureState(s,h){return this._state.getState(s=s||"_geojsonTileLayer",h)}setDependencies(s,h,g){const y=this._tiles[s];y&&y.setDependencies(h,g)}reloadTilesForDependencies(s,h){for(const g in this._tiles)this._tiles[g].hasDependency(s,h)&&this._reloadTile(+g,"reloading");this._cache.filter(g=>!g.hasDependency(s,h))}_preloadTiles(s,h){if(!this._sourceLoaded){const G=()=>{this._sourceLoaded&&(this._source.off("data",G),this._preloadTiles(s,h))};return void this._source.on("data",G)}const g=new Map,y=Array.isArray(s)?s:[s],S=this.map.painter.terrain,R=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const G of y){const X=G.coveringTiles({tileSize:R,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const K of X)g.set(K.key,K);this.usedForTerrain&&G.updateElevation(!1)}Nn(Array.from(g.values()),(G,X)=>{const K=new ji(G,this._source.tileSize*G.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(K,ce=>{"raster-dem"===this._source.type&&K.dem&&this._backfillDEM(K),X(ce,K)})},h)}}function Bx(c,s){const h=Math.abs(2*c.wrap)-+(c.wrap<0),g=Math.abs(2*s.wrap)-+(s.wrap<0);return c.overscaledZ-s.overscaledZ||g-h||s.canonical.y-c.canonical.y||s.canonical.x-c.canonical.x}function Nx(c){return"raster"===c||"image"===c||"video"===c||"custom"===c}function r_(c,s){const h=1<<c.z;return[c.x/h+s,(c.x+1)/h+s]}Yg.maxOverzooming=10,Yg.maxUnderzooming=3;class dy{constructor(s,h,g){this._demTile=s,this._dem=this._demTile.dem,this._scale=h,this._offset=g}static create(s,h,g){const y=g||s.findDEMTileFor(h);if(!y||!y.dem)return;const S=y.dem,R=y.tileID,G=1<<h.canonical.z-R.canonical.z;return new dy(y,y.tileSize/zr/G,[(h.canonical.x/G-R.canonical.x)*S.dim,(h.canonical.y/G-R.canonical.y)*S.dim])}tileCoordToPixel(s,h){const g=h*this._scale+this._offset[1],y=Math.floor(s*this._scale+this._offset[0]),S=Math.floor(g);return new Dt(y,S)}getElevationAt(s,h,g,y){const S=s*this._scale+this._offset[0],R=h*this._scale+this._offset[1],G=Math.floor(S),X=Math.floor(R),K=this._dem;return y=!!y,g?ps(ps(K.get(G,X,y),K.get(G,X+1,y),R-X),ps(K.get(G+1,X,y),K.get(G+1,X+1,y),R-X),S-G):K.get(G,X,y)}getElevationAtPixel(s,h,g){return this._dem.get(s,h,!!g)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*Gd(1,s)*this._dem.stride}}class zx{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Qd(zr,16,0),this.featureIndexArray=new _d,this.promoteId=h}insert(s,h,g,y,S,R=0){const G=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,y,S,R);const X=this.grid;for(let K=0;K<h.length;K++){const ce=h[K],pe=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ce.length;_e++){const Ae=ce[_e];pe[0]=Math.min(pe[0],Ae.x),pe[1]=Math.min(pe[1],Ae.y),pe[2]=Math.max(pe[2],Ae.x),pe[3]=Math.max(pe[3],Ae.y)}pe[0]<zr&&pe[1]<zr&&pe[2]>=0&&pe[3]>=0&&X.insert(G,pe[0],pe[1],pe[2],pe[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Re(new L0(this.rawTileData)).layers,this.sourceLayerCoder=new qp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,h,g,y){this.loadVTLayers();const S=s.params||{},R=on(S.filter),G=s.tileResult,X=s.transform,K=G.bufferedTilespaceBounds,ce=this.grid.query(K.min.x,K.min.y,K.max.x,K.max.y,(Oe,Ue,dt,Rt)=>Em(G.bufferedTilespaceGeometry,Oe,Ue,dt,Rt));ce.sort(bw);let pe=null;X.elevation&&ce.length>0&&(pe=dy.create(X.elevation,this.tileID));const _e={};let Ae;for(let Oe=0;Oe<ce.length;Oe++){const Ue=ce[Oe];if(Ue===Ae)continue;Ae=Ue;const dt=this.featureIndexArray.get(Ue);let Rt=null;this.loadMatchingFeature(_e,dt,R,S.layers,S.availableImages,h,g,y,(ii,Lt,Jt,di=0)=>(Rt||(Rt=Oh(ii,this.tileID.canonical,s.tileTransform)),Lt.queryIntersectsFeature(G,ii,Jt,Rt,this.z,s.transform,s.pixelPosMatrix,pe,di)))}return _e}loadMatchingFeature(s,h,g,y,S,R,G,X,K){const{featureIndex:ce,bucketIndex:pe,sourceLayerIndex:_e,layoutVertexArrayOffset:Ae}=h,Oe=this.bucketLayerIDs[pe];if(y&&!function(ii,Lt){for(let Jt=0;Jt<ii.length;Jt++)if(Lt.indexOf(ii[Jt])>=0)return!0;return!1}(y,Oe))return;const Ue=this.sourceLayerCoder.decode(_e),dt=this.vtLayers[Ue].feature(ce);if(g.needGeometry){const ii=wu(dt,!0);if(!g.filter(new de(this.tileID.overscaledZ),ii,this.tileID.canonical))return}else if(!g.filter(new de(this.tileID.overscaledZ),dt))return;const Rt=this.getId(dt,Ue);for(let ii=0;ii<Oe.length;ii++){const Lt=Oe[ii];if(y&&y.indexOf(Lt)<0)continue;const Jt=R[Lt];if(!Jt)continue;let di={};void 0!==Rt&&X&&(di=X.getState(Jt.sourceLayer||"_geojsonTileLayer",Rt));const li=fr({},G[Lt]);li.paint=M1(li.paint,Jt.paint,dt,di,S),li.layout=M1(li.layout,Jt.layout,dt,di,S);const Qi=!K||K(dt,Jt,di,Ae);if(!Qi)continue;const Xi=new X0(dt,this.z,this.x,this.y,Rt);Xi.layer=li;let kn=s[Lt];void 0===kn&&(kn=s[Lt]=[]),kn.push({featureIndex:ce,feature:Xi,intersectionZ:Qi})}}lookupSymbolFeatures(s,h,g,y,S,R,G,X){const K={};this.loadVTLayers();const ce=on(S);for(const pe of s)this.loadMatchingFeature(K,{bucketIndex:g,sourceLayerIndex:y,featureIndex:pe,layoutVertexArrayOffset:0},ce,R,G,X,h);return K}loadFeature(s){const{featureIndex:h,sourceLayerIndex:g}=s;this.loadVTLayers();const y=this.sourceLayerCoder.decode(g),S=this.vtFeatures[y];if(S[h])return S[h];const R=this.vtLayers[y].feature(h);return S[h]=R,R}hasLayer(s){for(const h of this.bucketLayerIDs)for(const g of h)if(s===g)return!0;return!1}getId(s,h){let g=s.id;if(this.promoteId){const y="string"==typeof this.promoteId?this.promoteId:this.promoteId[h];null!=y&&(g=s.properties[y]),"boolean"==typeof g&&(g=Number(g))}return g}}function M1(c,s,h,g,y){return Mn(c,(S,R)=>{const G=s instanceof Tt?s.get(R):null;return G&&G.evaluate?G.evaluate(h,g,y):G})}function bw(c,s){return s-c}Tr(zx,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Yx{constructor(s,h){this.width=s,this.height=h,this.nextRow=0,this.image=new dh({width:s,height:h}),this.positions={},this.uploaded=!1}getDash(s,h){const g=this.getKey(s,h);return this.positions[g]}trim(){const s=this.width,h=this.height=Jn(this.nextRow);this.image.resize({width:s,height:h})}getKey(s,h){return s.join(",")+h}getDashRanges(s,h,g){const y=[];let S=s.length%2==1?-s[s.length-1]*g:0,R=s[0]*g,G=!0;y.push({left:S,right:R,isDash:G,zeroLength:0===s[0]});let X=s[0];for(let K=1;K<s.length;K++){G=!G;const ce=s[K];S=X*g,X+=ce,R=X*g,y.push({left:S,right:R,isDash:G,zeroLength:0===ce})}return y}addRoundDash(s,h,g){const y=h/2;for(let S=-g;S<=g;S++){const R=this.width*(this.nextRow+g+S);let G=0,X=s[G];for(let K=0;K<this.width;K++){K/X.right>1&&(X=s[++G]);const ce=Math.abs(K-X.left),pe=Math.abs(K-X.right),_e=Math.min(ce,pe);let Ae;const Oe=S/g*(y+1);if(X.isDash){const Ue=y-Math.abs(Oe);Ae=Math.sqrt(_e*_e+Ue*Ue)}else Ae=y-Math.sqrt(_e*_e+Oe*Oe);this.image.data[R+K]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(s,h){for(let X=s.length-1;X>=0;--X){const K=s[X],ce=s[X+1];K.zeroLength?s.splice(X,1):ce&&ce.isDash===K.isDash&&(ce.left=K.left,s.splice(X,1))}const g=s[0],y=s[s.length-1];g.isDash===y.isDash&&(g.left=y.left-this.width,y.right=g.right+this.width);const S=this.width*this.nextRow;let R=0,G=s[R];for(let X=0;X<this.width;X++){X/G.right>1&&(G=s[++R]);const K=Math.abs(X-G.left),ce=Math.abs(X-G.right),pe=Math.min(K,ce);this.image.data[S+X]=Math.max(0,Math.min(255,(G.isDash?pe:-pe)+h+128))}}addDash(s,h){const g=this.getKey(s,h);if(this.positions[g])return this.positions[g];const y="round"===h,S=y?7:0,R=2*S+1;if(this.nextRow+R>this.height)return pr("LineAtlas out of space"),null;0===s.length&&s.push(1);let G=0;for(let ce=0;ce<s.length;ce++)s[ce]<0&&(pr("Negative value is found in line dasharray, replacing values with 0"),s[ce]=0),G+=s[ce];if(0!==G){const ce=this.width/G,pe=this.getDashRanges(s,this.width,ce);y?this.addRoundDash(pe,ce,S):this.addRegularDash(pe,"square"===h?.5*ce:0)}const X=this.nextRow+S;this.nextRow+=R;const K={tl:[X,S],br:[G,0]};return this.positions[g]=K,K}}Tr(Yx,"LineAtlas");const Gx=1*zh;class Hx{constructor(s){const h={},g=[];for(const G in s){const X=s[G],K=h[G]={};for(const ce in X.glyphs){const pe=X.glyphs[+ce];if(!pe||0===pe.bitmap.width||0===pe.bitmap.height)continue;const _e=pe.metrics.localGlyph?Gx:1,Ae={x:0,y:0,w:pe.bitmap.width+2*_e,h:pe.bitmap.height+2*_e};g.push(Ae),K[ce]=Ae}}const{w:y,h:S}=Uv(g),R=new dh({width:y||1,height:S||1});for(const G in s){const X=s[G];for(const K in X.glyphs){const ce=X.glyphs[+K];if(!ce||0===ce.bitmap.width||0===ce.bitmap.height)continue;const pe=h[G][K],_e=ce.metrics.localGlyph?Gx:1;dh.copy(ce.bitmap,R,{x:0,y:0},{x:pe.x+_e,y:pe.y+_e},ce.bitmap)}}this.image=R,this.positions=h}}Tr(Hx,"GlyphAtlas");class ww{constructor(s){this.tileID=new Yu(s.tileID.overscaledZ,s.tileID.wrap,s.tileID.canonical.z,s.tileID.canonical.x,s.tileID.canonical.y),this.tileZoom=s.tileZoom,this.uid=s.uid,this.zoom=s.zoom,this.canonical=s.tileID.canonical,this.pixelRatio=s.pixelRatio,this.tileSize=s.tileSize,this.source=s.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=s.showCollisionBoxes,this.collectResourceTiming=!!s.collectResourceTiming,this.returnDependencies=!!s.returnDependencies,this.promoteId=s.promoteId,this.enableTerrain=!!s.enableTerrain,this.isSymbolTile=s.isSymbolTile,this.tileTransform=up(s.tileID.canonical,s.projection),this.projection=s.projection}parse(s,h,g,y,S){this.status="parsing",this.data=s,this.collisionBoxArray=new Ds;const R=new qp(Object.keys(s.layers).sort()),G=new zx(this.tileID,this.promoteId);G.bucketLayerIDs=[];const X={},K=new Yx(256,256),ce={featureIndex:G,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:K,availableImages:g},pe=h.familiesBySource[this.source];for(const di in pe){const li=s.layers[di];if(!li)continue;let Qi=!1,Xi=!1;for(const sn of pe[di])"symbol"===sn[0].type?Qi=!0:Xi=!0;if(!0===this.isSymbolTile&&!Qi||!1===this.isSymbolTile&&!Xi)continue;1===li.version&&pr(`Vector tile source "${this.source}" layer "${di}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const kn=R.encode(di),Kn=[];for(let sn=0;sn<li.length;sn++){const Ln=li.feature(sn),Pn=G.getId(Ln,di);Kn.push({feature:Ln,id:Pn,index:sn,sourceLayerIndex:kn})}for(const sn of pe[di]){const Ln=sn[0];void 0!==this.isSymbolTile&&"symbol"===Ln.type!==this.isSymbolTile||Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||"none"!==Ln.visibility&&(R1(sn,this.zoom,g),(X[Ln.id]=Ln.createBucket({index:G.bucketLayerIDs.length,layers:sn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:kn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:g})).populate(Kn,ce,this.tileID.canonical,this.tileTransform),G.bucketLayerIDs.push(sn.map(Pn=>Pn.id)))}}let _e,Ae,Oe,Ue;K.trim();const dt={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Rt=()=>{if(_e)return S(_e);if(Ae&&Oe&&Ue){const di=new Hx(Ae),li=new If(Oe,Ue);for(const Qi in X){const Xi=X[Qi];Xi instanceof hp?(R1(Xi.layers,this.zoom,g),g1(Xi,Ae,di.positions,Oe,li.iconPositions,this.showCollisionBoxes,g,this.tileID.canonical,this.tileZoom,this.projection)):Xi.hasPattern&&(Xi instanceof D0||Xi instanceof Eg||Xi instanceof Df)&&(R1(Xi.layers,this.zoom,g),Xi.addFeatures(ce,this.tileID.canonical,li.patternPositions,g,this.tileTransform))}this.status="done",S(null,{buckets:yr(X).filter(Qi=>!Qi.isEmpty()),featureIndex:G,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:di.image,lineAtlas:K,imageAtlas:li,glyphMap:this.returnDependencies?Ae:null,iconMap:this.returnDependencies?Oe:null,glyphPositions:this.returnDependencies?di.positions:null})}},ii=Mn(ce.glyphDependencies,di=>Object.keys(di).map(Number));Object.keys(ii).length?y.send("getGlyphs",{uid:this.uid,stacks:ii},(di,li)=>{_e||(_e=di,Ae=li,Rt())},void 0,!1,dt):Ae={};const Lt=Object.keys(ce.iconDependencies);Lt.length?y.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"icons"},(di,li)=>{_e||(_e=di,Oe=li,Rt())},void 0,!1,dt):Oe={};const Jt=Object.keys(ce.patternDependencies);Jt.length?y.send("getImages",{icons:Jt,source:this.source,tileID:this.tileID,type:"patterns"},(di,li)=>{_e||(_e=di,Ue=li,Rt())},void 0,!1,dt):Ue={},Rt()}}function R1(c,s,h){const g=new de(s);for(const y of c)y.recalculate(g,h)}class Vx{constructor(s){this.entries={},this.scheduler=s}request(s,h,g,y){const S=this.entries[s]=this.entries[s]||{callbacks:[]};if(S.result){const[R,G]=S.result;return this.scheduler?this.scheduler.add(()=>{y(R,G)},h):y(R,G),()=>{}}return S.callbacks.push(y),S.cancel||(S.cancel=g((R,G)=>{S.result=[R,G];for(const X of S.callbacks)this.scheduler?this.scheduler.add(()=>{X(R,G)},h):X(R,G);setTimeout(()=>delete this.entries[s],3e3)})),()=>{S.result||(S.callbacks=S.callbacks.filter(R=>R!==y),S.callbacks.length||(S.cancel(),delete this.entries[s]))}}}function Ux(c,s,h){const g=JSON.stringify(c.request);return c.data&&(this.deduped.entries[g]={result:[null,c.data]}),this.deduped.request(g,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},y=>{const S=Ia(c.request,(R,G,X,K)=>{R?y(R):G&&y(null,{vectorTile:h?void 0:new Re(new L0(G)),rawData:G,cacheControl:X,expires:K})});return()=>{S.cancel(),y()}},s)}const jx=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class O1{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,g]=new Uint8Array(s,0,2);if(219!==h)throw new Error("Data does not appear to be in a KDBush format.");const y=g>>4;if(1!==y)throw new Error(`Got v${y} data when expected v1.`);const S=jx[15&g];if(!S)throw new Error("Unrecognized array type.");const[R]=new Uint16Array(s,2,1),[G]=new Uint32Array(s,4,1);return new O1(G,R,S,s)}constructor(s,h=64,g=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=g,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const S=jx.indexOf(this.ArrayType),R=2*s*this.ArrayType.BYTES_PER_ELEMENT,G=s*this.IndexArrayType.BYTES_PER_ELEMENT,X=(8-G%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${g}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+G+X,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+R+G+X),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+G+X,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=s)}add(s,h){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=s,this.coords[this._pos++]=h,g}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return L1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,h,g,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:R,nodeSize:G}=this,X=[0,S.length-1,0],K=[];for(;X.length;){const ce=X.pop()||0,pe=X.pop()||0,_e=X.pop()||0;if(pe-_e<=G){for(let dt=_e;dt<=pe;dt++){const Rt=R[2*dt],ii=R[2*dt+1];Rt>=s&&Rt<=g&&ii>=h&&ii<=y&&K.push(S[dt])}continue}const Ae=_e+pe>>1,Oe=R[2*Ae],Ue=R[2*Ae+1];Oe>=s&&Oe<=g&&Ue>=h&&Ue<=y&&K.push(S[Ae]),(0===ce?s<=Oe:h<=Ue)&&(X.push(_e),X.push(Ae-1),X.push(1-ce)),(0===ce?g>=Oe:y>=Ue)&&(X.push(Ae+1),X.push(pe),X.push(1-ce))}return K}within(s,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:S,nodeSize:R}=this,G=[0,y.length-1,0],X=[],K=g*g;for(;G.length;){const ce=G.pop()||0,pe=G.pop()||0,_e=G.pop()||0;if(pe-_e<=R){for(let dt=_e;dt<=pe;dt++)Wx(S[2*dt],S[2*dt+1],s,h)<=K&&X.push(y[dt]);continue}const Ae=_e+pe>>1,Oe=S[2*Ae],Ue=S[2*Ae+1];Wx(Oe,Ue,s,h)<=K&&X.push(y[Ae]),(0===ce?s-g<=Oe:h-g<=Ue)&&(G.push(_e),G.push(Ae-1),G.push(1-ce)),(0===ce?s+g>=Oe:h+g>=Ue)&&(G.push(Ae+1),G.push(pe),G.push(1-ce))}return X}}function L1(c,s,h,g,y,S){if(y-g<=h)return;const R=g+y>>1;$x(c,s,R,g,y,S),L1(c,s,h,g,R-1,1-S),L1(c,s,h,R+1,y,1-S)}function $x(c,s,h,g,y,S){for(;y>g;){if(y-g>600){const K=y-g+1,ce=h-g+1,pe=Math.log(K),_e=.5*Math.exp(2*pe/3),Ae=.5*Math.sqrt(pe*_e*(K-_e)/K)*(ce-K/2<0?-1:1);$x(c,s,h,Math.max(g,Math.floor(h-ce*_e/K+Ae)),Math.min(y,Math.floor(h+(K-ce)*_e/K+Ae)),S)}const R=s[2*h+S];let G=g,X=y;for(a_(c,s,g,h),s[2*y+S]>R&&a_(c,s,g,y);G<X;){for(a_(c,s,G,X),G++,X--;s[2*G+S]<R;)G++;for(;s[2*X+S]>R;)X--}s[2*g+S]===R?a_(c,s,g,X):(X++,a_(c,s,X,y)),X<=h&&(g=X+1),h<=X&&(y=X-1)}}function a_(c,s,h,g){P1(c,h,g),P1(s,2*h,2*g),P1(s,2*h+1,2*g+1)}function P1(c,s,h){const g=c[s];c[s]=c[h],c[h]=g}function Wx(c,s,h,g){const y=c-h,S=s-g;return y*y+S*S}t.ARRAY_TYPE=kc,t.AUTH_ERR_MSG=kt,t.Aabb=jc,t.Actor=class{constructor(c,s,h){this.target=c,this.parent=s,this.mapId=h,this.callbacks={},this.cancelCallbacks={},jr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Sn()?c:j,this.scheduler=new Ng}send(c,s,h,g,y=!1,S){const R=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=S,this.callbacks[R]=h);const G=Vn(this.globalScope)?void 0:[];return this.target.postMessage({id:R,type:c,hasCallback:!!h,targetMapId:g,mustQueue:y,sourceMapId:this.mapId,data:Pd(s,G)},G),{cancel:()=>{h&&delete this.callbacks[R],this.target.postMessage({id:R,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(c){const s=c.data,h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if("<cancel>"===s.type){const g=this.cancelCallbacks[h];delete this.cancelCallbacks[h],g&&g.cancel()}else if(s.mustQueue||Sn()){const g=this.callbacks[h];this.cancelCallbacks[h]=this.scheduler.add(()=>this.processTask(h,s),g&&g.metadata||{type:"message"})}else this.processTask(h,s)}processTask(c,s){if("<response>"===s.type){const h=this.callbacks[c];delete this.callbacks[c],h&&(s.error?h(Fd(s.error)):h(null,Fd(s.data)))}else{const h=Vn(this.globalScope)?void 0:[],g=s.hasCallback?(S,R)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:S?Pd(S):null,data:Pd(R,h)},h)}:S=>{},y=Fd(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,y,g);else if(this.parent.getWorkerSource){const S=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,S[0],y.source)[S[1]](y,g)}else g(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=Dd,t.Color=va,t.ColorMode=fp,t.CullFaceMode=Rf,t.DEMData=Uu,t.DataConstantProperty=Ne,t.DedupedRequest=Vx,t.DepthMode=ju,t.EXTENT=zr,t.Elevation=class{isDataAvailableAtPoint(c){const s=this._source();if(this.isUsingMockSource()||!s||c.y<0||c.y>1)return!1;const h=s.getSource().maxzoom,g=1<<h,y=Math.floor(c.x),S=Math.floor((c.x-y)*g),R=Math.floor(c.y*g),G=this.findDEMTileFor(new Yu(h,y,h,S,R));return!(!G||!G.dem)}getAtPointOrZero(c,s=0){return this.getAtPoint(c,s)||0}getAtPoint(c,s,h=!0){if(this.isUsingMockSource())return null;null==s&&(s=null);const g=this._source();if(!g||c.y<0||c.y>1)return s;const y=g.getSource().maxzoom,S=1<<y,R=Math.floor(c.x),G=c.x-R,X=new Yu(y,R,y,Math.floor(G*S),Math.floor(c.y*S)),K=this.findDEMTileFor(X);if(!K||!K.dem)return s;const ce=K.dem,pe=1<<K.tileID.canonical.z,_e=(G*pe-K.tileID.canonical.x)*ce.dim,Ae=(c.y*pe-K.tileID.canonical.y)*ce.dim,Oe=Math.floor(_e),Ue=Math.floor(Ae);return(h?this.exaggeration():1)*ps(ps(ce.get(Oe,Ue),ce.get(Oe,Ue+1),Ae-Ue),ps(ce.get(Oe+1,Ue),ce.get(Oe+1,Ue+1),Ae-Ue),_e-Oe)}getAtTileOffset(c,s,h){const g=1<<c.canonical.z;return this.getAtPointOrZero(new Jf(c.wrap+(c.canonical.x+s/zr)/g,(c.canonical.y+h/zr)/g))}getAtTileOffsetFunc(c,s,h,g){return y=>{const S=this.getAtTileOffset(c,y.x,y.y),R=g.upVector(c.canonical,y.x,y.y);return au(R,R,S*g.upVectorScale(c.canonical,s,h).metersToTile),R}}getForTilePoints(c,s,h,g){if(this.isUsingMockSource())return!1;const y=dy.create(this,c,g);return!!y&&(s.forEach(S=>{S[2]=this.exaggeration()*y.getElevationAt(S[0],S[1],h)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(c);if(!s||!s.dem)return null;const h=s.dem.tree,g=s.tileID,y=1<<c.canonical.z-g.canonical.z;let S=c.canonical.x/y-g.canonical.x,R=c.canonical.y/y-g.canonical.y,G=0;for(let X=0;X<c.canonical.z-g.canonical.z&&!h.leaves[G];X++){S*=2,R*=2;const K=2*Math.floor(R)+Math.floor(S);G=h.childOffsets[G]+K,S%=1,R%=1}return{min:this.exaggeration()*h.minimums[G],max:this.exaggeration()*h.maximums[G]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,s,h){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=E,t.EvaluationParameters=de,t.Event=w,t.Evented=M,t.FillExtrusionBucket=Df,t.Frustum=Xf,t.FrustumCorners=rg,t.GLOBE_RADIUS=Yd,t.GLOBE_SCALE_MATCH_LATITUDE=45,t.GLOBE_ZOOM_THRESHOLD_MAX=l0,t.GLOBE_ZOOM_THRESHOLD_MIN=Tc,t.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,s){const h=new Gn,g=new ta,y=[],S=c+1+2,R=s[0]+1,G=s[0]+1+(1+s.length),X=(K,ce,pe)=>{let _e=K===S-1?K-2:0===K?K:K-1;return _e+=pe?24575:0,[_e,ce]};for(let K=0;K<S;++K)h.emplaceBack(...X(K,0,!0));for(let K=0;K<R;++K)for(let ce=0;ce<S;++ce)h.emplaceBack(...X(ce,K,(0===ce||ce===S-1)&&!0));for(let K=0;K<s.length;++K){const ce=s[K];for(let pe=0;pe<S;++pe)h.emplaceBack(...X(pe,ce,!0))}for(let K=0;K<s.length;++K){const ce=g.length,pe=s[K]+1+2,_e=new ta;for(let Ue=0;Ue<pe-1;Ue++){const dt=Ue===pe-2,Rt=dt?S*(G-s.length+K-Ue):S;for(let ii=0;ii<S-1;ii++){const Lt=Ue*S+ii;0===Ue||dt||0===ii||ii===S-2?(_e.emplaceBack(Lt+1,Lt,Lt+Rt),_e.emplaceBack(Lt+Rt,Lt+Rt+1,Lt+1)):(g.emplaceBack(Lt+1,Lt,Lt+Rt),g.emplaceBack(Lt+Rt,Lt+Rt+1,Lt+1))}}const Ae=nl.simpleSegment(0,ce,h.length,g.length-ce);for(let Ue=0;Ue<_e.uint16.length;Ue+=3)g.emplaceBack(_e.uint16[Ue],_e.uint16[Ue+1],_e.uint16[Ue+2]);const Oe=nl.simpleSegment(0,ce,h.length,g.length-ce);y.push({withoutSkirts:Ae,withSkirts:Oe})}return{vertices:h,indices:g,segments:y}}_createGrid(c){const s=this._fillGridMeshWithLods(64,qf);this._gridSegments=s.segments,this._gridBuffer=c.createVertexBuffer(s.vertices,pf.members),this._gridIndexBuffer=c.createIndexBuffer(s.indices,!0)}_createPoles(c){const s=new ta;for(let y=0;y<=64;y++)s.emplaceBack(0,y+1,y+2);this._poleIndexBuffer=c.createIndexBuffer(s,!0);const h=new Vs,g=new Vs;this._poleSegments=[];for(let y=0,S=0;y<Tc;y++){const R=360/(1<<y);h.emplaceBack(0,-Yd,0,.5,0),g.emplaceBack(0,-Yd,0,.5,1);for(let G=0;G<=64;G++){const X=G/64,K=ps(0,R,X),[ce,pe,_e]=_f(ym,h0,K,Yd);h.emplaceBack(ce,pe,_e,X,0),g.emplaceBack(ce,pe,_e,X,1)}this._poleSegments.push(nl.simpleSegment(S,0,66,64)),S+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(h,Ba,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(g,Ba,!1)}getGridBuffers(c,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,s){if(!this._wireframeSegments){const h=new vl,g=64,y=g+1+2,S=1;this._wireframeSegments=[];for(let R=0,G=0;R<qf.length;R++){const X=qf[R];for(let ce=S;ce<X+S;ce++)for(let pe=S;pe<g+S;pe++){const _e=ce*y+pe;h.emplaceBack(_e,_e+1),h.emplaceBack(_e,_e+y),h.emplaceBack(_e,_e+y+1)}const K=X*g*3;this._wireframeSegments.push(nl.simpleSegment(0,G,(X+1)*y,K)),G+=K}this._wireframeIndexBuffer=c.createIndexBuffer(h)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[s]]}},t.GlyphManager=Vp,t.ImagePosition=xl,t.KDBush=O1,t.LivePerformanceUtils=Bt,t.LngLat=ao,t.LngLatBounds=sh,t.LocalGlyphMode=P0,t.MAX_MERCATOR_LATITUDE=Dc,t.MercatorCoordinate=Jf,t.ONE_EM=Wc,t.OverscaledTileID=Yu,t.PerformanceMarkers=st,t.Point=Dt,t.Properties=Gt,t.RGBAImage=cl,t.Ray=Rh,t.RequestManager=class{constructor(c,s,h){this._transformRequestFn=c,this._customAccessToken=s,this._silenceAuthErrors=!!h,this._createSkuToken()}_createSkuToken(){const c=function(){let s="";for(let h=0;h<10;h++)s+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",et,s].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,s){return this._transformRequestFn&&this._transformRequestFn(c,s)||{url:c}}normalizeStyleURL(c,s){if(!ai(c))return c;const h=_n(c);return h.path=`/styles/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||s)}normalizeGlyphsURL(c,s){if(!ai(c))return c;const h=_n(c);return h.path=`/fonts/v1${h.path}`,this._makeAPIURL(h,this._customAccessToken||s)}normalizeSourceURL(c,s,h,g){if(!ai(c))return c;const y=_n(c);return y.path=`/v4/${y.authority}.json`,y.params.push("secure"),h&&y.params.push(`language=${h}`),g&&y.params.push(`worldview=${g}`),this._makeAPIURL(y,this._customAccessToken||s)}normalizeSpriteURL(c,s,h,g){const y=_n(c);return ai(c)?(y.path=`/styles/v1${y.path}/sprite${s}${h}`,this._makeAPIURL(y,this._customAccessToken||g)):(y.path+=`${s}${h}`,Vi(y))}normalizeTileURL(c,s,h){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!ai(c))return c;const g=_n(c);g.path=g.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${s||h&&"raster"!==g.authority&&512===h?"@2x":""}${We.supported?".webp":"$1"}`),"raster"===g.authority?g.path=`/${Me.RASTER_URL_PREFIX}${g.path}`:(g.path=g.path.replace(/^.+\/v4\//,"/"),g.path=`/${Me.TILE_URL_VERSION}${g.path}`);const y=this._customAccessToken||function(S){for(const R of S){const G=R.match(/^access_token=(.*)$/);if(G)return G[1]}return null}(g.params)||Me.ACCESS_TOKEN;return Me.REQUIRE_ACCESS_TOKEN&&y&&this._skuToken&&g.params.push(`sku=${this._skuToken}`),this._makeAPIURL(g,y)}canonicalizeTileURL(c,s){const h=_n(c);if(!h.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!h.path.match(/\.[\w]+$/))return c;let g="mapbox://";h.path.match(/^\/raster\/v1\//)?g+=`raster/${h.path.replace(`/${Me.RASTER_URL_PREFIX}/`,"")}`:g+=`tiles/${h.path.replace(`/${Me.TILE_URL_VERSION}/`,"")}`;let y=h.params;return s&&(y=y.filter(S=>!S.match(/^access_token=/))),y.length&&(g+=`?${y.join("&")}`),g}canonicalizeTileset(c,s){const h=!!s&&ai(s),g=[];for(const y of c.tiles||[])Ci(y)?g.push(this.canonicalizeTileURL(y,h)):g.push(y);return g}_makeAPIURL(c,s){const h="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",g=_n(Me.API_URL);if(c.protocol=g.protocol,c.authority=g.authority,"http"===c.protocol){const y=c.params.indexOf("secure");y>=0&&c.params.splice(y,1)}if("/"!==g.path&&(c.path=`${g.path}${c.path}`),!Me.REQUIRE_ACCESS_TOKEN)return Vi(c);if(s=s||Me.ACCESS_TOKEN,!this._silenceAuthErrors){if(!s)throw new Error(`An API access token is required to use Mapbox GL. ${h}`);if("s"===s[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${h}`)}return c.params=c.params.filter(y=>-1===y.indexOf("access_token")),c.params.push(`access_token=${s||""}`),Vi(c)}},t.ResourceType=go,t.SegmentVector=nl,t.SourceCache=Yg,t.StencilMode=q0,t.StructArrayLayout1ui2=Uc,t.StructArrayLayout2f1f2i16=ca,t.StructArrayLayout2i4=Gn,t.StructArrayLayout2ui4=vl,t.StructArrayLayout3f12=qr,t.StructArrayLayout3ui6=ta,t.StructArrayLayout4i8=un,t.StructArrayLayout5f20=Vs,t.Texture=Xp,t.Tile=ji,t.Transitionable=Fe,t.Uniform1f=kp,t.Uniform1i=class extends Tl{constructor(c){super(c),this.current=0}set(c,s,h){this.fetchUniformLocation(c,s)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},t.Uniform2f=class extends Tl{constructor(c){super(c),this.current=[0,0]}set(c,s,h){this.fetchUniformLocation(c,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}},t.Uniform3f=class extends Tl{constructor(c){super(c),this.current=[0,0,0]}set(c,s,h){this.fetchUniformLocation(c,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}},t.Uniform4f=Tp,t.UniformColor=Sp,t.UniformMatrix2f=class extends Tl{constructor(c){super(c),this.current=Vl}set(c,s,h){if(this.fetchUniformLocation(c,s))for(let g=0;g<4;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}},t.UniformMatrix3f=class extends Tl{constructor(c){super(c),this.current=Jm}set(c,s,h){if(this.fetchUniformLocation(c,s))for(let g=0;g<9;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix3fv(this.location,!1,h);break}}},t.UniformMatrix4f=class extends Tl{constructor(c){super(c),this.current=Km}set(c,s,h){if(this.fetchUniformLocation(c,s)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let g=1;g<16;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}},t.UnwrappedTileID=L_,t.ValidationError=dr,t.VectorTileFeature=Ft,t.VectorTileWorkerSource=class extends M{constructor(c,s,h,g,y){super(),this.actor=c,this.layerIndex=s,this.availableImages=h,this.loadVectorData=y||Ux,this.loading={},this.loaded={},this.deduped=new Vx(c.scheduler),this.isSpriteLoaded=g,this.scheduler=c.scheduler}loadTile(c,s){const h=c.uid,g=c&&c.request,y=g&&g.collectResourceTiming,S=this.loading[h]=new ww(c);S.abort=this.loadVectorData(c,(R,G)=>{const X=!this.loading[h];if(delete this.loading[h],X||R||!G)return S.status="done",X||(this.loaded[h]=S),s(R);const K=G.rawData,ce={};G.expires&&(ce.expires=G.expires),G.cacheControl&&(ce.cacheControl=G.cacheControl),S.vectorTile=G.vectorTile||new Re(new L0(K));const pe=()=>{S.parse(S.vectorTile,this.layerIndex,this.availableImages,this.actor,(_e,Ae)=>{if(_e||!Ae)return s(_e);const Oe={};if(y){const Ue=jt(g);Ue.length>0&&(Oe.resourceTiming=JSON.parse(JSON.stringify(Ue)))}s(null,fr({rawTileData:K.slice(0)},Ae,ce,Oe))})};this.isSpriteLoaded?pe():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(pe,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):pe()}),this.loaded=this.loaded||{},this.loaded[h]=S})}reloadTile(c,s){const h=this.loaded,g=c.uid,y=this;if(h&&h[g]){const S=h[g];S.showCollisionBoxes=c.showCollisionBoxes,S.enableTerrain=!!c.enableTerrain,S.projection=c.projection,S.tileTransform=up(c.tileID.canonical,c.projection);const R=(G,X)=>{const K=S.reloadCallback;K&&(delete S.reloadCallback,S.parse(S.vectorTile,y.layerIndex,this.availableImages,y.actor,K)),s(G,X)};"parsing"===S.status?S.reloadCallback=R:"done"===S.status&&(S.vectorTile?S.parse(S.vectorTile,this.layerIndex,this.availableImages,this.actor,R):R())}}abortTile(c,s){const h=c.uid,g=this.loading[h];g&&(g.abort&&g.abort(),delete this.loading[h]),s()}removeTile(c,s){const h=this.loaded,g=c.uid;h&&h[g]&&delete h[g],s()}},t.WritingMode=Hu,t.ZoomDependentExpression=fu,t.add=wd,t.addDynamicAttributes=Nm,t.adjoint=function(c,s){var h=s[0],g=s[1],y=s[2],S=s[3],R=s[4],G=s[5],X=s[6],K=s[7],ce=s[8];return c[0]=R*ce-G*K,c[1]=y*K-g*ce,c[2]=g*G-y*R,c[3]=G*X-S*ce,c[4]=h*ce-y*X,c[5]=y*S-h*G,c[6]=S*K-R*X,c[7]=g*X-h*K,c[8]=h*R-g*S,c},t.asyncAll=Nn,t.bezier=Zi,t.bindAll=jr,t.boundsAttributes=oi,t.bufferConvexPolygon=function(c,s){const h=[];for(let g=0;g<c.length;g++){const y=yn(g-1,-1,c.length-1),S=yn(g+1,-1,c.length-1),R=c[g],G=c[S],X=c[y].sub(R).unit(),K=G.sub(R).unit(),ce=K.angleWithSep(X.x,X.y),pe=X.add(K).unit().mult(-1*s/Math.sin(ce/2));h.push(R.add(pe))}return h},t.cacheEntryPossiblyAdded=function(c){Mr++,Mr>Ga&&(c.getActor().send("enforceCacheSizeLimit",Pa),Mr=0)},t.calculateGlobeLabelMatrix=function(c,s){const{x:h,y:g}=c.point,y=lg(h,g,c.worldSize/c._pixelsPerMercatorPixel,0,0);return ru(y,y,gm(Sd(s)))},t.calculateGlobeMatrix=function(c){const{x:s,y:h}=c.point,{lng:g,lat:y}=c._center;return lg(s,h,c.worldSize,g,y)},t.calculateGlobeMercatorMatrix=function(c){const s=c.pixelsPerMeter,h=s/Gd(1,c.center.lat),g=_l(new Float64Array(16));return yu(g,g,[c.point.x,c.point.y,0]),xu(g,g,[h,h,s]),Float32Array.from(g)},t.circumferenceAtLatitude=ug,t.clamp=Ki,t.clearTileCache=function(c){if(!ha())return;const s=j.caches.delete(lr);c&&s.catch(c).then(()=>c())},t.clipLine=Q_,t.clone=function(c){var s=new kc(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},t.clone$1=ka,t.collisionCircleLayout=t1,t.config=Me,t.conjugate=function(c,s){return c[0]=-s[0],c[1]=-s[1],c[2]=-s[2],c[3]=s[3],c},t.create=function(){var c=new kc(16);return kc!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},t.create$1=sm,t.createExpression=Gc,t.createLayout=Ai,t.createStyleLayer=function(c){return"custom"===c.type?new uy(c):new S1[c.type](c)},t.cross=Ap,t.degToRad=fi,t.distance=function(c,s){return Math.hypot(s[0]-c[0],s[1]-c[1],s[2]-c[2])},t.div=function(c,s,h){return c[0]=s[0]/h[0],c[1]=s[1]/h[1],c[2]=s[2]/h[2],c},t.dot=bu,t.earthRadius=zu,t.ease=Rn,t.easeCubicInOut=Ni,t.ecefToLatLng=function([c,s,h]){const g=Math.hypot(c,s,h),y=Math.atan2(c,h),S=.5*Math.PI-Math.acos(-s/g);return new ao(It(y),It(S))},t.emitValidationErrors=Th,t.endsWith=Pr,t.enforceCacheSizeLimit=function(c){xr(),Ja&&Ja.then(s=>{s.keys().then(h=>{for(let g=0;g<h.length-c;g++)s.delete(h[g])})})},t.evaluateSizeForFeature=Mm,t.evaluateSizeForZoom=tf,t.evaluateVariableOffset=ry,t.evented=Y,t.exactEquals=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]},t.exactEquals$1=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]},t.exported=u,t.exported$1=We,t.extend=fr,t.extend$1=H,t.fillExtrusionHeightLift=M_,t.filterObject=Ya,t.fromMat4=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[4],c[4]=s[5],c[5]=s[6],c[6]=s[8],c[7]=s[9],c[8]=s[10],c},t.fromQuat=function(c,s){var h=s[0],g=s[1],y=s[2],S=s[3],R=h+h,G=g+g,X=y+y,K=h*R,ce=g*R,pe=g*G,_e=y*R,Ae=y*G,Oe=y*X,Ue=S*R,dt=S*G,Rt=S*X;return c[0]=1-pe-Oe,c[1]=ce+Rt,c[2]=_e-dt,c[3]=0,c[4]=ce-Rt,c[5]=1-K-Oe,c[6]=Ae+Ue,c[7]=0,c[8]=_e+dt,c[9]=Ae-Ue,c[10]=1-K-pe,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},t.fromRotation=function(c,s){var h=Math.sin(s),g=Math.cos(s);return c[0]=g,c[1]=h,c[2]=0,c[3]=-h,c[4]=g,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},t.fromScaling=tg,t.furthestTileCorner=function(c){const s=Math.round((c+45+360)%360/90)%4;return Si[s]},t.getAABBPointSquareDist=function(c,s,h){let g=0;for(let y=0;y<2;++y){const S=h?h[y]:0;c[y]>S&&(g+=(c[y]-S)*(c[y]-S)),s[y]<S&&(g+=(S-s[y])*(S-s[y]))}return g},t.getAnchorAlignment=$v,t.getAnchorJustification=Jv,t.getBounds=function(c){let s=1/0,h=1/0,g=-1/0,y=-1/0;for(const S of c)s=Math.min(s,S.x),h=Math.min(h,S.y),g=Math.max(g,S.x),y=Math.max(y,S.y);return{min:new Dt(s,h),max:new Dt(g,y)}},t.getColumn=ur,t.getDefaultExportFromCjs=lt,t.getGridMatrix=function(c,s,h,g){const y=s.getNorth(),S=s.getSouth(),R=s.getWest(),G=s.getEast(),X=1<<c.z,K=G-R,ce=y-S,pe=K/64,_e=-ce/qf[h],Ae=[0,pe,0,_e,0,0,y,R,0];if(c.z>0){const Oe=180/g;nu(Ae,Ae,[Oe/K+1,0,0,0,Oe/ce+1,0,-.5*Oe/pe,.5*Oe/_e,1])}return Ae[2]=X,Ae[5]=c.x,Ae[8]=c.y,Ae},t.getImage=At,t.getJSON=function(c,s){return fa(fr(c,{type:"json"}),s)},t.getLatitudinalLod=function(c){const s=Dc-5;c=Ki(c,-s,s)/s*90;const h=Math.pow(Math.abs(Math.sin(fi(c))),3);return Math.round(h*(qf.length-1))},t.getMapSessionAPI=$i,t.getPerformanceMeasurement=jt,t.getProjection=V0,t.getRTLTextPluginStatus=V,t.getReferrer=Aa,t.getTilePoint=function(c,{x:s,y:h},g=0){return new Dt(((s-g)*c.scale-c.x)*zr,(h*c.scale-c.y)*zr)},t.getTileVec3=function(c,s,h=0){return Bd(((s.x-h)*c.scale-c.x)*zr,(s.y*c.scale-c.y)*zr,dg(s.z,s.y))},t.getVideo=function(c,s){const h=j.document.createElement("video");h.muted=!0,h.onloadstart=function(){s(null,h)};for(let g=0;g<c.length;g++){const y=j.document.createElement("source");Fa(c[g])||(h.crossOrigin="Anonymous"),y.src=c[g],h.appendChild(y)}return{cancel:()=>{}}},t.globeCenterToScreenPoint=function(c){const s=[0,0,0],h=_l(new Float64Array(16));return ru(h,c.pixelMatrix,c.globeMatrix),rl(s,s,h),new Dt(s[0],s[1])},t.globeDenormalizeECEF=gm,t.globeECEFOrigin=function(c,s){const h=[0,0,0];return rl(h,h,Kf(Sd(s.canonical))),rl(h,h,c),h},t.globeMetersToEcef=cd,t.globeNormalizeECEF=Kf,t.globePixelsToTileUnits=function(c,s){return zr/(512*Math.pow(2,c))*Rp(Sd(s))},t.globePoleMatrixForTile=function(c,s,h){const g=_l(new Float64Array(16)),y=(s/(1<<c)-.5)*Math.PI*2;return Dp(g,h.globeMatrix,y),Float32Array.from(g)},t.globeTileBounds=Sd,t.globeTiltAtLngLat=vm,t.globeToMercatorTransition=lh,t.globeUseCustomAntiAliasing=function(c,s,h){const g=lh(h.zoom),y=c.style.map._antialias,S=!!s.extStandardDerivatives,R=s.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return 0===g&&!y&&!R&&S},t.identity=_l,t.identity$1=dm,t.invert=om,t.isFullscreen=function(){return!!j.document.fullscreenElement||!!j.document.webkitFullscreenElement},t.isLngLatBehindGlobe=_m,t.isMapAuthenticated=function(c){return En.has(c)},t.isMapboxURL=ai,t.isSafariWithAntialiasingBug=function(c){const s=c.navigator?c.navigator.userAgent:null;return!!Vn(c)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},t.latFromMercatorY=Sc,t.latLngToECEF=yf,t.len=_v,t.length=hf,t.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},t.lngFromMercatorX=ud,t.loadVectorTile=Ux,t.makeRequest=fa,t.mapValue=function(c,s,h,g,y){return Ki((c-s)/(h-s)*(y-g)+g,g,y)},t.mercatorScale=f0,t.mercatorXfromLng=ch,t.mercatorYfromLat=uh,t.mercatorZfromAltitude=Gd,t.mul=Ih,t.mul$1=s0,t.multiply=ru,t.multiply$1=nu,t.multiply$2=jl,t.nextPowerOfTwo=Jn,t.normalize=$l,t.normalize$1=pm,t.normalize$2=o0,t.number=ps,t.ortho=function(c,s,h,g,y,S,R){var G=1/(s-h),X=1/(g-y),K=1/(S-R);return c[0]=-2*G,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*X,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*K,c[11]=0,c[12]=(s+h)*G,c[13]=(y+g)*X,c[14]=(R+S)*K,c[15]=1,c},t.pbf=hh,t.perspective=function(c,s,h,g,y){var S,R=1/Math.tan(s/2);return c[0]=R/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=R,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,null!=y&&y!==1/0?(c[10]=(y+g)*(S=1/(g-y)),c[14]=2*y*g*S):(c[10]=-1,c[14]=-2*g),c},t.pick=function(c,s){const h={};for(let g=0;g<s.length;g++){const y=s[g];y in c&&(h[y]=c[y])}return h},t.plugin=re,t.pointGeometry=yi,t.polesInViewport=function(c){const s=_l(new Float64Array(16));ru(s,c.pixelMatrix,c.globeMatrix);const h=[0,kd,0],g=[0,Td,0];return rl(h,h,s),rl(g,g,s),[h[0]>0&&h[0]<=c.width&&h[1]>0&&h[1]<=c.height&&!_m(c,new ao(c.center.lat,90)),g[0]>0&&g[0]<=c.width&&g[1]>0&&g[1]<=c.height&&!_m(c,new ao(c.center.lat,-90))]},t.polygonContainsPoint=xf,t.polygonIntersectsBox=Em,t.polygonIntersectsPolygon=Dl,t.polygonizeBounds=function(c,s,h=0,g=!0){const y=new Dt(h,h),S=c.sub(y),R=s.add(y),G=[S,new Dt(R.x,S.y),R,new Dt(S.x,R.y)];return g&&G.push(S.clone()),G},t.posAttributes=pf,t.postMapLoadEvent=rt,t.postPerformanceEvent=ci,t.postTurnstileEvent=pt,t.potpack=Uv,t.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},t.radToDeg=It,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(c){return c({pluginStatus:k,pluginURL:f}),Y.on("pluginStateChange",c),c},t.removeAuthState=function(c){En.delete(c)},t.renderColorRamp=bg,t.resample=fg,t.rotateX=lm,t.rotateX$1=hm,t.rotateY=Dp,t.rotateY$1=fm,t.rotateZ=function(c,s,h){var g=Math.sin(h),y=Math.cos(h),S=s[0],R=s[1],G=s[2],X=s[3],K=s[4],ce=s[5],pe=s[6],_e=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=S*y+K*g,c[1]=R*y+ce*g,c[2]=G*y+pe*g,c[3]=X*y+_e*g,c[4]=K*y-S*g,c[5]=ce*y-R*g,c[6]=pe*y-G*g,c[7]=_e*y-X*g,c},t.rotateZ$1=function(c,s,h){h*=.5;var g=s[0],y=s[1],S=s[2],R=s[3],G=Math.sin(h),X=Math.cos(h);return c[0]=g*X+y*G,c[1]=y*X-g*G,c[2]=S*X+R*G,c[3]=R*X-S*G,c},t.scale=xu,t.scale$1=ng,t.scale$2=au,t.scaleAndAdd=Cd,t.set=function(c,s,h,g){return c[0]=s,c[1]=h,c[2]=g,c},t.setCacheLimits=function(c,s){Pa=c,Ga=s},t.setColumn=function(c,s,h){c[4*s+0]=h[0],c[4*s+1]=h[1],c[4*s+2]=h[2],c[4*s+3]=h[3]},t.setRTLTextPlugin=function(c,s,h=!1){if(k===Vf||k===nm||k===Cp)throw new Error("setRTLTextPlugin cannot be called multiple times.");f=u.resolveURL(c),k=Vf,jh=s,I(),h||Q()},t.smoothstep=tn,t.spec=N,t.squaredLength=function(c){var s=c[0],h=c[1],g=c[2];return s*s+h*h+g*g},t.storeAuthState=function(c,s){s?En.add(c):En.delete(c)},t.sub=Ed,t.subtract=$f,t.symbolSize=Bv,t.tileAABB=function(c,s,h,g,y,S,R,G,X){if("globe"===X.name)return function d0(c,s,h){const g=s/c.worldSize,y=c.globeMatrix;if(h.z<=1){const Xi=Sd(h).getCorners();return vf(Xi,y,g),jc.fromPoints(Xi)}const S=Zf(h),R=sg(S);vf(R,y,g);const G=Number.MAX_VALUE,X=[-G,-G,-G],K=[G,G,G];if(S.contains(c.center)){for(const Kn of R)cc(K,K,Kn),Nd(X,X,Kn);X[2]=0;const Xi=c.point,kn=[Xi.x*g,Xi.y*g,0];return cc(K,K,kn),Nd(X,X,kn),new jc(K,X)}const ce=[y[12]*g,y[13]*g,y[14]*g],pe=S.getCenter(),_e=Ki(c.center.lat,-Dc,Dc),Ae=Ki(pe.lat,-Dc,Dc),Oe=ch(c.center.lng),Ue=uh(_e);let dt=Oe-ch(pe.lng);const Rt=Ue-uh(Ae);dt>.5?dt-=1:dt<-.5&&(dt+=1);let ii=0;Math.abs(dt)>Math.abs(Rt)?ii=dt>=0?1:3:(ii=Rt>=0?0:2,Cd(ce,ce,[y[4]*g,y[5]*g,y[6]*g],-Math.sin(fi(Rt>=0?S.getSouth():S.getNorth()))*Yd));const Lt=R[ii],Jt=R[(ii+1)%4],di=new ag(Lt,Jt,ce),li=[mm(di,0)||Lt[0],mm(di,1)||Lt[1],mm(di,2)||Lt[2]],Qi=lh(c.zoom);if(Qi>0){const Xi=function({x:Kn,y:sn,z:Ln},Pn,jn,tr,vn){const wr=1/(1<<Ln);let Vr=Kn*wr,Er=Vr+wr,rs=sn*wr,ir=rs+wr,ua=0;const as=(Vr+Er)/2-tr;return as>.5?ua=-1:as<-.5&&(ua=1),Vr=((Vr+ua)*Pn-(tr*=Pn))*jn+tr,Er=((Er+ua)*Pn-tr)*jn+tr,rs=(rs*Pn-(vn*=Pn))*jn+vn,ir=(ir*Pn-vn)*jn+vn,[[Vr,ir,0],[Er,ir,0],[Er,rs,0],[Vr,rs,0]]}(h,s,c._pixelsPerMercatorPixel,Oe,Ue);for(let Kn=0;Kn<R.length;Kn++)gf(R[Kn],Xi[Kn],Qi);const kn=wd([],Xi[ii],Xi[(ii+1)%4]);au(kn,kn,.5),gf(li,kn,Qi)}for(const Xi of R)cc(K,K,Xi),Nd(X,X,Xi);return K[2]=Math.min(Lt[2],Jt[2]),cc(K,K,li),Nd(X,X,li),new jc(K,X)}(c,s,new Dd(h,g,y));const K=up({z:h,x:g,y},X);return new jc([(S+K.x/K.scale)*s,s*(K.y/K.scale),R],[(S+K.x2/K.scale)*s,s*(K.y2/K.scale),G])},t.tileCornersToBounds=Zf,t.tileTransform=up,t.transformMat3=function(c,s,h){var g=s[0],y=s[1],S=s[2];return c[0]=g*h[0]+y*h[3]+S*h[6],c[1]=g*h[1]+y*h[4]+S*h[7],c[2]=g*h[2]+y*h[5]+S*h[8],c},t.transformMat4=rl,t.transformMat4$1=ff,t.transformQuat=ig,t.transitionTileAABBinECEF=u0,t.translate=yu,t.transpose=function(c,s){if(c===s){var h=s[1],g=s[2],y=s[5];c[1]=s[3],c[2]=s[6],c[3]=h,c[5]=s[7],c[6]=g,c[7]=y}else c[0]=s[0],c[1]=s[3],c[2]=s[6],c[3]=s[1],c[4]=s[4],c[5]=s[7],c[6]=s[2],c[7]=s[5],c[8]=s[8];return c},t.triggerPluginCompletionEvent=_,t.uniqueId=Mi,t.updateGlobeVertexNormal=function(c,s,h,g,y){const S=5*s+2;c.float32[S+0]=h,c.float32[S+1]=g,c.float32[S+2]=y},t.validateCustomStyleLayer=function(c){const s=[],h=c.id;return void 0===h&&s.push({message:`layers.${h}: missing required property "id"`}),void 0===c.render&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&"2d"!==c.renderingMode&&"3d"!==c.renderingMode&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},t.validateFilter=c=>qo(xa(c)),t.validateFog=c=>qo(hr(c)),t.validateLayer=c=>qo(se(c)),t.validateLight=c=>qo(vr(c)),t.validateSource=c=>qo(Ee(c)),t.validateStyle=Jd,t.validateTerrain=c=>qo(Xr(c)),t.values=yr,t.vectorTile=Sf,t.version=He,t.warnOnce=pr,t.window=j,t.wrap=yn}),xt(0,function(t){function j(Et){if("number"==typeof Et||"boolean"==typeof Et||"string"==typeof Et||null==Et)return JSON.stringify(Et);if(Array.isArray(Et)){let Je="[";for(const At of Et)Je+=`${j(At)},`;return`${Je}]`}let je="{";for(const Je of Object.keys(Et).sort())je+=`${Je}:${j(Et[Je])},`;return`${je}}`}function He(Et){let je="";for(const Je of t.refProperties)je+=`/${j(Et[Je])}`;return je}class Be{constructor(je){this.keyCache={},je&&this.replace(je)}replace(je){this._layerConfigs={},this._layers={},this.update(je,[])}update(je,Je){for(const kt of je)this._layerConfigs[kt.id]=kt,(this._layers[kt.id]=t.createStyleLayer(kt)).compileFilter(),this.keyCache[kt.id]&&delete this.keyCache[kt.id];for(const kt of Je)delete this.keyCache[kt],delete this._layerConfigs[kt],delete this._layers[kt];this.familiesBySource={};const At=function(kt,ai){const Ci={};for(let Mt=0;Mt<kt.length;Mt++){const Bi=ai&&ai[kt[Mt].id]||He(kt[Mt]);ai&&(ai[kt[Mt].id]=Bi);let On=Ci[Bi];On||(On=Ci[Bi]=[]),On.push(kt[Mt])}const Ii=[];for(const Mt in Ci)Ii.push(Ci[Mt]);return Ii}(t.values(this._layerConfigs),this.keyCache);for(const kt of At){const ai=kt.map(_n=>this._layers[_n.id]),Ci=ai[0];if("none"===Ci.visibility)continue;const Ii=Ci.source||"";let Mt=this.familiesBySource[Ii];Mt||(Mt=this.familiesBySource[Ii]={});const Bi=Ci.sourceLayer||"_geojsonTileLayer";let On=Mt[Bi];On||(On=Mt[Bi]=[]),On.push(ai)}}}class Me{loadTile(je,Je){const{uid:At,encoding:kt,rawImageData:ai,padding:Ci,buildQuadTree:Ii}=je,Mt=t.window.ImageBitmap&&ai instanceof t.window.ImageBitmap?this.getImageData(ai,Ci):ai;Je(null,new t.DEMData(At,Mt,kt,Ci<1,Ii))}getImageData(je,Je){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(je.width,je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=je.width,this.offscreenCanvas.height=je.height,this.offscreenCanvasContext.drawImage(je,0,0,je.width,je.height);const At=this.offscreenCanvasContext.getImageData(-Je,-Je,je.width+2*Je,je.height+2*Je);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),At}}function We(Et,je){if(0!==Et.length){nt(Et[0],je);for(var Je=1;Je<Et.length;Je++)nt(Et[Je],!je)}}function nt(Et,je){for(var Je=0,At=0,kt=0,ai=Et.length,Ci=ai-1;kt<ai;Ci=kt++){var Ii=(Et[kt][0]-Et[Ci][0])*(Et[Ci][1]+Et[kt][1]),Mt=Je+Ii;At+=Math.abs(Je)>=Math.abs(Ii)?Je-Mt+Ii:Ii-Mt+Je,Je=Mt}Je+At>=0!=!!je&&Et.reverse()}var at=t.getDefaultExportFromCjs(function Et(je,Je){var At,kt=je&&je.type;if("FeatureCollection"===kt)for(At=0;At<je.features.length;At++)Et(je.features[At],Je);else if("GeometryCollection"===kt)for(At=0;At<je.geometries.length;At++)Et(je.geometries[At],Je);else if("Feature"===kt)Et(je.geometry,Je);else if("Polygon"===kt)We(je.coordinates,Je);else if("MultiPolygon"===kt)for(At=0;At<je.coordinates.length;At++)We(je.coordinates[At],Je);return je});const Ct=t.VectorTileFeature.prototype.toGeoJSON;var ot={exports:{}},Wt=t.pointGeometry,et=t.vectorTile.VectorTileFeature,lt=gt;function gt(Et,je){this.options=je||{},this.features=Et,this.length=Et.length}function _i(Et,je){this.id="number"==typeof Et.id?Et.id:void 0,this.type=Et.type,this.rawGeometry=1===Et.type?[Et.geometry]:Et.geometry,this.properties=Et.tags,this.extent=je||4096}gt.prototype.feature=function(Et){return new _i(this.features[Et],this.options.extent)},_i.prototype.loadGeometry=function(){var Et=this.rawGeometry;this.geometry=[];for(var je=0;je<Et.length;je++){for(var Je=Et[je],At=[],kt=0;kt<Je.length;kt++)At.push(new Wt(Je[kt][0],Je[kt][1]));this.geometry.push(At)}return this.geometry},_i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Et=this.geometry,je=1/0,Je=-1/0,At=1/0,kt=-1/0,ai=0;ai<Et.length;ai++)for(var Ci=Et[ai],Ii=0;Ii<Ci.length;Ii++){var Mt=Ci[Ii];je=Math.min(je,Mt.x),Je=Math.max(Je,Mt.x),At=Math.min(At,Mt.y),kt=Math.max(kt,Mt.y)}return[je,At,Je,kt]},_i.prototype.toGeoJSON=et.prototype.toGeoJSON;var tt=t.pbf,yi=lt;function Pi(Et){var je=new tt;return function(Je,At){for(var kt in Je.layers)At.writeMessage(3,Dt,Je.layers[kt])}(Et,je),je.finish()}function Dt(Et,je){var Je;je.writeVarintField(15,Et.version||1),je.writeStringField(1,Et.name||""),je.writeVarintField(5,Et.extent||4096);var At={keys:[],values:[],keycache:{},valuecache:{}};for(Je=0;Je<Et.length;Je++)At.feature=Et.feature(Je),je.writeMessage(2,Fi,At);var kt=At.keys;for(Je=0;Je<kt.length;Je++)je.writeStringField(3,kt[Je]);var ai=At.values;for(Je=0;Je<ai.length;Je++)je.writeMessage(4,Ni,ai[Je])}function Fi(Et,je){var Je=Et.feature;void 0!==Je.id&&je.writeVarintField(1,Je.id),je.writeMessage(2,xi,Et),je.writeVarintField(3,Je.type),je.writeMessage(4,Si,Je)}function xi(Et,je){var Je=Et.feature,At=Et.keys,kt=Et.values,ai=Et.keycache,Ci=Et.valuecache;for(var Ii in Je.properties){var Mt=Je.properties[Ii],Bi=ai[Ii];if(null!==Mt){void 0===Bi&&(At.push(Ii),ai[Ii]=Bi=At.length-1),je.writeVarint(Bi);var On=typeof Mt;"string"!==On&&"boolean"!==On&&"number"!==On&&(Mt=JSON.stringify(Mt));var _n=On+":"+Mt,Vi=Ci[_n];void 0===Vi&&(kt.push(Mt),Ci[_n]=Vi=kt.length-1),je.writeVarint(Vi)}}}function fi(Et,je){return(je<<3)+(7&Et)}function It(Et){return Et<<1^Et>>31}function Si(Et,je){for(var Je=Et.loadGeometry(),At=Et.type,kt=0,ai=0,Ci=Je.length,Ii=0;Ii<Ci;Ii++){var Mt=Je[Ii],Bi=1;1===At&&(Bi=Mt.length),je.writeVarint(fi(1,Bi));for(var On=3===At?Mt.length-1:Mt.length,_n=0;_n<On;_n++){1===_n&&1!==At&&je.writeVarint(fi(2,On-1));var Vi=Mt[_n].x-kt,Qn=Mt[_n].y-ai;je.writeVarint(It(Vi)),je.writeVarint(It(Qn)),kt+=Vi,ai+=Qn}3===At&&je.writeVarint(fi(7,1))}}function Ni(Et,je){var Je=typeof Et;"string"===Je?je.writeStringField(1,Et):"boolean"===Je?je.writeBooleanField(7,Et):"number"===Je&&(Et%1!=0?je.writeDoubleField(3,Et):Et<0?je.writeSVarintField(6,Et):je.writeVarintField(5,Et))}ot.exports=Pi,ot.exports.fromVectorTileJs=Pi,ot.exports.fromGeojsonVt=function(Et,je){je=je||{};var Je={};for(var At in Et)Je[At]=new yi(Et[At].features,je),Je[At].name=At,Je[At].version=je.version,Je[At].extent=je.extent;return Pi({layers:Je})},ot.exports.GeoJSONWrapper=yi;var Zi=t.getDefaultExportFromCjs(ot.exports);const Rn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Et=>Et},Ki=Math.fround||(tn=new Float32Array(1),Et=>(tn[0]=+Et,tn[0]));var tn;const yn=3,Nn=5,yr=6;class fr{constructor(je){this.options=Object.assign(Object.create(Rn),je),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(je){const{log:Je,minZoom:At,maxZoom:kt}=this.options;Je&&console.time("total time");const ai=`prepare ${je.length} points`;Je&&console.time(ai),this.points=je;const Ci=[];for(let Mt=0;Mt<je.length;Mt++){const Bi=je[Mt];if(!Bi.geometry)continue;const[On,_n]=Bi.geometry.coordinates,Vi=Ki(In(On)),Qn=Ki(Jn(_n));Ci.push(Vi,Qn,1/0,Mt,-1,1),this.options.reduce&&Ci.push(0)}let Ii=this.trees[kt+1]=this._createTree(Ci);Je&&console.timeEnd(ai);for(let Mt=kt;Mt>=At;Mt--){const Bi=+Date.now();Ii=this.trees[Mt]=this._createTree(this._cluster(Ii,Mt)),Je&&console.log("z%d: %d clusters in %dms",Mt,Ii.numItems,+Date.now()-Bi)}return Je&&console.timeEnd("total time"),this}getClusters(je,Je){let At=((je[0]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,je[1]));let ai=180===je[2]?180:((je[2]+180)%360+360)%360-180;const Ci=Math.max(-90,Math.min(90,je[3]));if(je[2]-je[0]>=360)At=-180,ai=180;else if(At>ai){const _n=this.getClusters([At,kt,180,Ci],Je),Vi=this.getClusters([-180,kt,ai,Ci],Je);return _n.concat(Vi)}const Ii=this.trees[this._limitZoom(Je)],Mt=Ii.range(In(At),Jn(Ci),In(ai),Jn(kt)),Bi=Ii.data,On=[];for(const _n of Mt){const Vi=this.stride*_n;On.push(Bi[Vi+Nn]>1?Nr(Bi,Vi,this.clusterProps):this.points[Bi[Vi+yn]])}return On}getChildren(je){const Je=this._getOriginId(je),At=this._getOriginZoom(je),kt="No cluster with the specified id.",ai=this.trees[At];if(!ai)throw new Error(kt);const Ci=ai.data;if(Je*this.stride>=Ci.length)throw new Error(kt);const Ii=this.options.radius/(this.options.extent*Math.pow(2,At-1)),Mt=ai.within(Ci[Je*this.stride],Ci[Je*this.stride+1],Ii),Bi=[];for(const On of Mt){const _n=On*this.stride;Ci[_n+4]===je&&Bi.push(Ci[_n+Nn]>1?Nr(Ci,_n,this.clusterProps):this.points[Ci[_n+yn]])}if(0===Bi.length)throw new Error(kt);return Bi}getLeaves(je,Je,At){const kt=[];return this._appendLeaves(kt,je,Je=Je||10,At=At||0,0),kt}getTile(je,Je,At){const kt=this.trees[this._limitZoom(je)],ai=Math.pow(2,je),{extent:Ci,radius:Ii}=this.options,Mt=Ii/Ci,Bi=(At-Mt)/ai,On=(At+1+Mt)/ai,_n={features:[]};return this._addTileFeatures(kt.range((Je-Mt)/ai,Bi,(Je+1+Mt)/ai,On),kt.data,Je,At,ai,_n),0===Je&&this._addTileFeatures(kt.range(1-Mt/ai,Bi,1,On),kt.data,ai,At,ai,_n),Je===ai-1&&this._addTileFeatures(kt.range(0,Bi,Mt/ai,On),kt.data,-1,At,ai,_n),_n.features.length?_n:null}getClusterExpansionZoom(je){let Je=this._getOriginZoom(je)-1;for(;Je<=this.options.maxZoom;){const At=this.getChildren(je);if(Je++,1!==At.length)break;je=At[0].properties.cluster_id}return Je}_appendLeaves(je,Je,At,kt,ai){const Ci=this.getChildren(Je);for(const Ii of Ci){const Mt=Ii.properties;if(Mt&&Mt.cluster?ai+Mt.point_count<=kt?ai+=Mt.point_count:ai=this._appendLeaves(je,Mt.cluster_id,At,kt,ai):ai<kt?ai++:je.push(Ii),je.length===At)break}return ai}_createTree(je){const Je=new t.KDBush(je.length/this.stride|0,this.options.nodeSize,Float32Array);for(let At=0;At<je.length;At+=this.stride)Je.add(je[At],je[At+1]);return Je.finish(),Je.data=je,Je}_addTileFeatures(je,Je,At,kt,ai,Ci){for(const Ii of je){const Mt=Ii*this.stride,Bi=Je[Mt+Nn]>1;let On,_n,Vi;if(Bi)On=Mi(Je,Mt,this.clusterProps),_n=Je[Mt],Vi=Je[Mt+1];else{const Ut=this.points[Je[Mt+yn]];On=Ut.properties;const[vt,pt]=Ut.geometry.coordinates;_n=In(vt),Vi=Jn(pt)}const Qn={type:1,geometry:[[Math.round(this.options.extent*(_n*ai-At)),Math.round(this.options.extent*(Vi*ai-kt))]],tags:On};let Yt;Yt=Bi||this.options.generateId?Je[Mt+yn]:this.points[Je[Mt+yn]].id,void 0!==Yt&&(Qn.id=Yt),Ci.features.push(Qn)}}_limitZoom(je){return Math.max(this.options.minZoom,Math.min(Math.floor(+je),this.options.maxZoom+1))}_cluster(je,Je){const{radius:At,extent:kt,reduce:ai,minPoints:Ci}=this.options,Ii=At/(kt*Math.pow(2,Je)),Mt=je.data,Bi=[],On=this.stride;for(let _n=0;_n<Mt.length;_n+=On){if(Mt[_n+2]<=Je)continue;Mt[_n+2]=Je;const Vi=Mt[_n],Qn=Mt[_n+1],Yt=je.within(Mt[_n],Mt[_n+1],Ii),Ut=Mt[_n+Nn];let vt=Ut;for(const pt of Yt){const Ke=pt*On;Mt[Ke+2]>Je&&(vt+=Mt[Ke+Nn])}if(vt>Ut&&vt>=Ci){let pt,Ke=Vi*Ut,rt=Qn*Ut,Ot=-1;const ci=((_n/On|0)<<5)+(Je+1)+this.points.length;for(const en of Yt){const $i=en*On;if(Mt[$i+2]<=Je)continue;Mt[$i+2]=Je;const En=Mt[$i+Nn];Ke+=Mt[$i]*En,rt+=Mt[$i+1]*En,Mt[$i+4]=ci,ai&&(pt||(pt=this._map(Mt,_n,!0),Ot=this.clusterProps.length,this.clusterProps.push(pt)),ai(pt,this._map(Mt,$i)))}Mt[_n+4]=ci,Bi.push(Ke/vt,rt/vt,1/0,ci,-1,vt),ai&&Bi.push(Ot)}else{for(let pt=0;pt<On;pt++)Bi.push(Mt[_n+pt]);if(vt>1)for(const pt of Yt){const Ke=pt*On;if(!(Mt[Ke+2]<=Je)){Mt[Ke+2]=Je;for(let rt=0;rt<On;rt++)Bi.push(Mt[Ke+rt])}}}}return Bi}_getOriginId(je){return je-this.points.length>>5}_getOriginZoom(je){return(je-this.points.length)%32}_map(je,Je,At){if(je[Je+Nn]>1){const Ci=this.clusterProps[je[Je+yr]];return At?Object.assign({},Ci):Ci}const kt=this.points[je[Je+yn]].properties,ai=this.options.map(kt);return At&&ai===kt?Object.assign({},ai):ai}}function Nr(Et,je,Je){return{type:"Feature",id:Et[je+yn],properties:Mi(Et,je,Je),geometry:{type:"Point",coordinates:[(At=Et[je],360*(At-.5)),ia(Et[je+1])]}};var At}function Mi(Et,je,Je){const At=Et[je+Nn],kt=At>=1e4?`${Math.round(At/1e3)}k`:At>=1e3?Math.round(At/100)/10+"k":At,ai=Et[je+yr],Ci=-1===ai?{}:Object.assign({},Je[ai]);return Object.assign(Ci,{cluster:!0,cluster_id:Et[je+yn],point_count:At,point_count_abbreviated:kt})}function In(Et){return Et/360+.5}function Jn(Et){const je=Math.sin(Et*Math.PI/180),Je=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return Je<0?0:Je>1?1:Je}function ia(Et){const je=(180-360*Et)*Math.PI/180;return 360*Math.atan(Math.exp(je))/Math.PI-90}function jr(Et,je,Je,At){for(var kt,ai=At,Ci=Je-je>>1,Ii=Je-je,Mt=Et[je],Bi=Et[je+1],On=Et[Je],_n=Et[Je+1],Vi=je+3;Vi<Je;Vi+=3){var Qn=Pr(Et[Vi],Et[Vi+1],Mt,Bi,On,_n);if(Qn>ai)kt=Vi,ai=Qn;else if(Qn===ai){var Yt=Math.abs(Vi-Ci);Yt<Ii&&(kt=Vi,Ii=Yt)}}ai>At&&(kt-je>3&&jr(Et,je,kt,At),Et[kt+2]=ai,Je-kt>3&&jr(Et,kt,Je,At))}function Pr(Et,je,Je,At,kt,ai){var Ci=kt-Je,Ii=ai-At;if(0!==Ci||0!==Ii){var Mt=((Et-Je)*Ci+(je-At)*Ii)/(Ci*Ci+Ii*Ii);Mt>1?(Je=kt,At=ai):Mt>0&&(Je+=Ci*Mt,At+=Ii*Mt)}return(Ci=Et-Je)*Ci+(Ii=je-At)*Ii}function Mn(Et,je,Je,At){var kt={id:void 0===Et?null:Et,type:je,geometry:Je,tags:At,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ai){var Ci=ai.geometry,Ii=ai.type;if("Point"===Ii||"MultiPoint"===Ii||"LineString"===Ii)Ya(ai,Ci);else if("Polygon"===Ii||"MultiLineString"===Ii)for(var Mt=0;Mt<Ci.length;Mt++)Ya(ai,Ci[Mt]);else if("MultiPolygon"===Ii)for(Mt=0;Mt<Ci.length;Mt++)for(var Bi=0;Bi<Ci[Mt].length;Bi++)Ya(ai,Ci[Mt][Bi])}(kt),kt}function Ya(Et,je){for(var Je=0;Je<je.length;Je+=3)Et.minX=Math.min(Et.minX,je[Je]),Et.minY=Math.min(Et.minY,je[Je+1]),Et.maxX=Math.max(Et.maxX,je[Je]),Et.maxY=Math.max(Et.maxY,je[Je+1])}function ka(Et,je,Je,At){if(je.geometry){var kt=je.geometry.coordinates,ai=je.geometry.type,Ci=Math.pow(Je.tolerance/((1<<Je.maxZoom)*Je.extent),2),Ii=[],Mt=je.id;if(Je.promoteId?Mt=je.properties[Je.promoteId]:Je.generateId&&(Mt=At||0),"Point"===ai)Ma(kt,Ii);else if("MultiPoint"===ai)for(var Bi=0;Bi<kt.length;Bi++)Ma(kt[Bi],Ii);else if("LineString"===ai)pr(kt,Ii,Ci,!1);else if("MultiLineString"===ai){if(Je.lineMetrics){for(Bi=0;Bi<kt.length;Bi++)pr(kt[Bi],Ii=[],Ci,!1),Et.push(Mn(Mt,"LineString",Ii,je.properties));return}$n(kt,Ii,Ci,!1)}else if("Polygon"===ai)$n(kt,Ii,Ci,!0);else{if("MultiPolygon"!==ai){if("GeometryCollection"===ai){for(Bi=0;Bi<je.geometry.geometries.length;Bi++)ka(Et,{id:Mt,geometry:je.geometry.geometries[Bi],properties:je.properties},Je,At);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Bi=0;Bi<kt.length;Bi++){var On=[];$n(kt[Bi],On,Ci,!0),Ii.push(On)}}Et.push(Mn(Mt,ai,Ii,je.properties))}}function Ma(Et,je){je.push(ar(Et[0])),je.push(Sn(Et[1])),je.push(0)}function pr(Et,je,Je,At){for(var kt,ai,Ci=0,Ii=0;Ii<Et.length;Ii++){var Mt=ar(Et[Ii][0]),Bi=Sn(Et[Ii][1]);je.push(Mt),je.push(Bi),je.push(0),Ii>0&&(Ci+=At?(kt*Bi-Mt*ai)/2:Math.sqrt(Math.pow(Mt-kt,2)+Math.pow(Bi-ai,2))),kt=Mt,ai=Bi}var On=je.length-3;je[2]=1,jr(je,0,On,Je),je[On+2]=1,je.size=Math.abs(Ci),je.start=0,je.end=je.size}function $n(Et,je,Je,At){for(var kt=0;kt<Et.length;kt++){var ai=[];pr(Et[kt],ai,Je,At),je.push(ai)}}function ar(Et){return Et/360+.5}function Sn(Et){var je=Math.sin(Et*Math.PI/180),Je=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return Je<0?0:Je>1?1:Je}function Dn(Et,je,Je,At,kt,ai,Ci,Ii){if(At/=je,ai>=(Je/=je)&&Ci<At)return Et;if(Ci<Je||ai>=At)return null;for(var Mt=[],Bi=0;Bi<Et.length;Bi++){var On=Et[Bi],_n=On.geometry,Vi=On.type,Qn=0===kt?On.minX:On.minY,Yt=0===kt?On.maxX:On.maxY;if(Qn>=Je&&Yt<At)Mt.push(On);else if(!(Yt<Je||Qn>=At)){var Ut=[];if("Point"===Vi||"MultiPoint"===Vi)Gr(_n,Ut,Je,At,kt);else if("LineString"===Vi)Vn(_n,Ut,Je,At,kt,!1,Ii.lineMetrics);else if("MultiLineString"===Vi)ur(_n,Ut,Je,At,kt,!1);else if("Polygon"===Vi)ur(_n,Ut,Je,At,kt,!0);else if("MultiPolygon"===Vi)for(var vt=0;vt<_n.length;vt++){var pt=[];ur(_n[vt],pt,Je,At,kt,!0),pt.length&&Ut.push(pt)}if(Ut.length){if(Ii.lineMetrics&&"LineString"===Vi){for(vt=0;vt<Ut.length;vt++)Mt.push(Mn(On.id,Vi,Ut[vt],On.tags));continue}"LineString"!==Vi&&"MultiLineString"!==Vi||(1===Ut.length?(Vi="LineString",Ut=Ut[0]):Vi="MultiLineString"),"Point"!==Vi&&"MultiPoint"!==Vi||(Vi=3===Ut.length?"Point":"MultiPoint"),Mt.push(Mn(On.id,Vi,Ut,On.tags))}}}return Mt.length?Mt:null}function Gr(Et,je,Je,At,kt){for(var ai=0;ai<Et.length;ai+=3){var Ci=Et[ai+kt];Ci>=Je&&Ci<=At&&(je.push(Et[ai]),je.push(Et[ai+1]),je.push(Et[ai+2]))}}function Vn(Et,je,Je,At,kt,ai,Ci){for(var Ii,Mt,Bi=rn(Et),On=0===kt?Pa:Ga,_n=Et.start,Vi=0;Vi<Et.length-3;Vi+=3){var Qn=Et[Vi],Yt=Et[Vi+1],Ut=Et[Vi+2],vt=Et[Vi+3],pt=Et[Vi+4],Ke=0===kt?Qn:Yt,rt=0===kt?vt:pt,Ot=!1;Ci&&(Ii=Math.sqrt(Math.pow(Qn-vt,2)+Math.pow(Yt-pt,2))),Ke<Je?rt>Je&&(Mt=On(Bi,Qn,Yt,vt,pt,Je),Ci&&(Bi.start=_n+Ii*Mt)):Ke>At?rt<At&&(Mt=On(Bi,Qn,Yt,vt,pt,At),Ci&&(Bi.start=_n+Ii*Mt)):lr(Bi,Qn,Yt,Ut),rt<Je&&Ke>=Je&&(Mt=On(Bi,Qn,Yt,vt,pt,Je),Ot=!0),rt>At&&Ke<=At&&(Mt=On(Bi,Qn,Yt,vt,pt,At),Ot=!0),!ai&&Ot&&(Ci&&(Bi.end=_n+Ii*Mt),je.push(Bi),Bi=rn(Et)),Ci&&(_n+=Ii)}var ci=Et.length-3;Qn=Et[ci],Yt=Et[ci+1],Ut=Et[ci+2],(Ke=0===kt?Qn:Yt)>=Je&&Ke<=At&&lr(Bi,Qn,Yt,Ut),ci=Bi.length-3,ai&&ci>=3&&(Bi[ci]!==Bi[0]||Bi[ci+1]!==Bi[1])&&lr(Bi,Bi[0],Bi[1],Bi[2]),Bi.length&&je.push(Bi)}function rn(Et){var je=[];return je.size=Et.size,je.start=Et.start,je.end=Et.end,je}function ur(Et,je,Je,At,kt,ai){for(var Ci=0;Ci<Et.length;Ci++)Vn(Et[Ci],je,Je,At,kt,ai,!1)}function lr(Et,je,Je,At){Et.push(je),Et.push(Je),Et.push(At)}function Pa(Et,je,Je,At,kt,ai){var Ci=(ai-je)/(At-je);return Et.push(ai),Et.push(Je+(kt-Je)*Ci),Et.push(1),Ci}function Ga(Et,je,Je,At,kt,ai){var Ci=(ai-Je)/(kt-Je);return Et.push(je+(At-je)*Ci),Et.push(ai),Et.push(1),Ci}function Ja(Et,je){for(var Je=[],At=0;At<Et.length;At++){var kt,ai=Et[At],Ci=ai.type;if("Point"===Ci||"MultiPoint"===Ci||"LineString"===Ci)kt=Ra(ai.geometry,je);else if("MultiLineString"===Ci||"Polygon"===Ci){kt=[];for(var Ii=0;Ii<ai.geometry.length;Ii++)kt.push(Ra(ai.geometry[Ii],je))}else if("MultiPolygon"===Ci)for(kt=[],Ii=0;Ii<ai.geometry.length;Ii++){for(var Mt=[],Bi=0;Bi<ai.geometry[Ii].length;Bi++)Mt.push(Ra(ai.geometry[Ii][Bi],je));kt.push(Mt)}Je.push(Mn(ai.id,Ci,kt,ai.tags))}return Je}function Ra(Et,je){var Je=[];Je.size=Et.size,void 0!==Et.start&&(Je.start=Et.start,Je.end=Et.end);for(var At=0;At<Et.length;At+=3)Je.push(Et[At]+je,Et[At+1],Et[At+2]);return Je}function ha(Et,je){if(Et.transformed)return Et;var Je,At,kt,ai=1<<Et.z,Ci=Et.x,Ii=Et.y;for(Je=0;Je<Et.features.length;Je++){var Mt=Et.features[Je],Bi=Mt.geometry,On=Mt.type;if(Mt.geometry=[],1===On)for(At=0;At<Bi.length;At+=2)Mt.geometry.push(xr(Bi[At],Bi[At+1],je,ai,Ci,Ii));else for(At=0;At<Bi.length;At++){var _n=[];for(kt=0;kt<Bi[At].length;kt+=2)_n.push(xr(Bi[At][kt],Bi[At][kt+1],je,ai,Ci,Ii));Mt.geometry.push(_n)}}return Et.transformed=!0,Et}function xr(Et,je,Je,At,kt,ai){return[Math.round(Je*(Et*At-kt)),Math.round(Je*(je*At-ai))]}function da(Et,je,Je,At,kt){for(var ai=je===kt.maxZoom?0:kt.tolerance/((1<<je)*kt.extent),Ci={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Je,y:At,z:je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ii=0;Ii<Et.length;Ii++){Ci.numFeatures++,Mr(Ci,Et[Ii],ai,kt);var Mt=Et[Ii].minX,Bi=Et[Ii].minY,On=Et[Ii].maxX,_n=Et[Ii].maxY;Mt<Ci.minX&&(Ci.minX=Mt),Bi<Ci.minY&&(Ci.minY=Bi),On>Ci.maxX&&(Ci.maxX=On),_n>Ci.maxY&&(Ci.maxY=_n)}return Ci}function Mr(Et,je,Je,At){var kt=je.geometry,ai=je.type,Ci=[];if("Point"===ai||"MultiPoint"===ai)for(var Ii=0;Ii<kt.length;Ii+=3)Ci.push(kt[Ii]),Ci.push(kt[Ii+1]),Et.numPoints++,Et.numSimplified++;else if("LineString"===ai)go(Ci,kt,Et,Je,!1,!1);else if("MultiLineString"===ai||"Polygon"===ai)for(Ii=0;Ii<kt.length;Ii++)go(Ci,kt[Ii],Et,Je,"Polygon"===ai,0===Ii);else if("MultiPolygon"===ai)for(var Mt=0;Mt<kt.length;Mt++){var Bi=kt[Mt];for(Ii=0;Ii<Bi.length;Ii++)go(Ci,Bi[Ii],Et,Je,!0,0===Ii)}if(Ci.length){var On=je.tags||null;if("LineString"===ai&&At.lineMetrics){for(var _n in On={},je.tags)On[_n]=je.tags[_n];On.mapbox_clip_start=kt.start/kt.size,On.mapbox_clip_end=kt.end/kt.size}var Vi={geometry:Ci,type:"Polygon"===ai||"MultiPolygon"===ai?3:"LineString"===ai||"MultiLineString"===ai?2:1,tags:On};null!==je.id&&(Vi.id=je.id),Et.features.push(Vi)}}function go(Et,je,Je,At,kt,ai){var Ci=At*At;if(At>0&&je.size<(kt?Ci:At))Je.numPoints+=je.length/3;else{for(var Ii=[],Mt=0;Mt<je.length;Mt+=3)(0===At||je[Mt+2]>Ci)&&(Je.numSimplified++,Ii.push(je[Mt]),Ii.push(je[Mt+1])),Je.numPoints++;kt&&function(Bi,On){for(var _n=0,Vi=0,Qn=Bi.length,Yt=Qn-2;Vi<Qn;Yt=Vi,Vi+=2)_n+=(Bi[Vi]-Bi[Yt])*(Bi[Vi+1]+Bi[Yt+1]);if(_n>0===On)for(Vi=0,Qn=Bi.length;Vi<Qn/2;Vi+=2){var Ut=Bi[Vi],vt=Bi[Vi+1];Bi[Vi]=Bi[Qn-2-Vi],Bi[Vi+1]=Bi[Qn-1-Vi],Bi[Qn-2-Vi]=Ut,Bi[Qn-1-Vi]=vt}}(Ii,ai),Et.push(Ii)}}function Dr(Et,je){var Je=(je=this.options=function(kt,ai){for(var Ci in ai)kt[Ci]=ai[Ci];return kt}(Object.create(this.options),je)).debug;if(Je&&console.time("preprocess data"),je.maxZoom<0||je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(je.promoteId&&je.generateId)throw new Error("promoteId and generateId cannot be used together.");var kt,ai,Ci,Ii,Mt,Bi,At=function(kt,ai){var Ci=[];if("FeatureCollection"===kt.type)for(var Ii=0;Ii<kt.features.length;Ii++)ka(Ci,kt.features[Ii],ai,Ii);else ka(Ci,"Feature"===kt.type?kt:{geometry:kt},ai);return Ci}(Et,je);this.tiles={},this.tileCoords=[],Je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",je.indexMaxZoom,je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ii=kt=At,Mt=Dn(kt,1,-1-(Ci=(ai=je).buffer/ai.extent),Ci,0,-1,2,ai),Bi=Dn(kt,1,1-Ci,2+Ci,0,-1,2,ai),(Mt||Bi)&&(Ii=Dn(kt,1,-Ci,1+Ci,0,-1,2,ai)||[],Mt&&(Ii=Ja(Mt,1).concat(Ii)),Bi&&(Ii=Ii.concat(Ja(Bi,-1)))),(At=Ii).length&&this.splitTile(At,0,0,0),Je&&(At.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Aa(Et,je,Je){return 32*((1<<Et)*Je+je)+Et}function fa(Et,je){const Je=Et.tileID.canonical;if(!this._geoJSONIndex)return je(null,null);const At=this._geoJSONIndex.getTile(Je.z,Je.x,Je.y);if(!At)return je(null,null);const kt=new class{constructor(Ci){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Ci.length,this._features=Ci}feature(Ci){return new class{constructor(Ii){this._feature=Ii,this.extent=t.EXTENT,this.type=Ii.type,this.properties=Ii.tags,"id"in Ii&&!isNaN(Ii.id)&&(this.id=parseInt(Ii.id,10))}loadGeometry(){if(1===this._feature.type){const Ii=[];for(const Mt of this._feature.geometry)Ii.push([new t.Point(Mt[0],Mt[1])]);return Ii}{const Ii=[];for(const Mt of this._feature.geometry){const Bi=[];for(const On of Mt)Bi.push(new t.Point(On[0],On[1]));Ii.push(Bi)}return Ii}}toGeoJSON(Ii,Mt,Bi){return Ct.call(this,Ii,Mt,Bi)}}(this._features[Ci])}}(At.features);let ai=Zi(kt);0===ai.byteOffset&&ai.byteLength===ai.buffer.byteLength||(ai=new Uint8Array(ai)),je(null,{vectorTile:kt,rawData:ai.buffer})}Dr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Dr.prototype.splitTile=function(Et,je,Je,At,kt,ai,Ci){for(var Ii=[Et,je,Je,At],Mt=this.options,Bi=Mt.debug;Ii.length;){At=Ii.pop(),Je=Ii.pop(),je=Ii.pop(),Et=Ii.pop();var On=1<<je,_n=Aa(je,Je,At),Vi=this.tiles[_n];if(!Vi&&(Bi>1&&console.time("creation"),Vi=this.tiles[_n]=da(Et,je,Je,At,Mt),this.tileCoords.push({z:je,x:Je,y:At}),Bi)){Bi>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",je,Je,At,Vi.numFeatures,Vi.numPoints,Vi.numSimplified),console.timeEnd("creation"));var Qn="z"+je;this.stats[Qn]=(this.stats[Qn]||0)+1,this.total++}if(Vi.source=Et,kt){if(je===Mt.maxZoom||je===kt)continue;var Yt=1<<kt-je;if(Je!==Math.floor(ai/Yt)||At!==Math.floor(Ci/Yt))continue}else if(je===Mt.indexMaxZoom||Vi.numPoints<=Mt.indexMaxPoints)continue;if(Vi.source=null,0!==Et.length){Bi>1&&console.time("clipping");var Ut,vt,pt,Ke,rt,Ot,ci=.5*Mt.buffer/Mt.extent,en=.5-ci,$i=.5+ci,En=1+ci;Ut=vt=pt=Ke=null,rt=Dn(Et,On,Je-ci,Je+$i,0,Vi.minX,Vi.maxX,Mt),Ot=Dn(Et,On,Je+en,Je+En,0,Vi.minX,Vi.maxX,Mt),Et=null,rt&&(Ut=Dn(rt,On,At-ci,At+$i,1,Vi.minY,Vi.maxY,Mt),vt=Dn(rt,On,At+en,At+En,1,Vi.minY,Vi.maxY,Mt),rt=null),Ot&&(pt=Dn(Ot,On,At-ci,At+$i,1,Vi.minY,Vi.maxY,Mt),Ke=Dn(Ot,On,At+en,At+En,1,Vi.minY,Vi.maxY,Mt),Ot=null),Bi>1&&console.timeEnd("clipping"),Ii.push(Ut||[],je+1,2*Je,2*At),Ii.push(vt||[],je+1,2*Je,2*At+1),Ii.push(pt||[],je+1,2*Je+1,2*At),Ii.push(Ke||[],je+1,2*Je+1,2*At+1)}}},Dr.prototype.getTile=function(Et,je,Je){var At=this.options,kt=At.extent,ai=At.debug;if(Et<0||Et>24)return null;var Ci=1<<Et,Ii=Aa(Et,je=(je%Ci+Ci)%Ci,Je);if(this.tiles[Ii])return ha(this.tiles[Ii],kt);ai>1&&console.log("drilling down to z%d-%d-%d",Et,je,Je);for(var Mt,Bi=Et,On=je,_n=Je;!Mt&&Bi>0;)Bi--,On=Math.floor(On/2),_n=Math.floor(_n/2),Mt=this.tiles[Aa(Bi,On,_n)];return Mt&&Mt.source?(ai>1&&console.log("found parent tile z%d-%d-%d",Bi,On,_n),ai>1&&console.time("drilling down"),this.splitTile(Mt.source,Bi,On,_n,Et,je,Je),ai>1&&console.timeEnd("drilling down"),this.tiles[Ii]?ha(this.tiles[Ii],kt):null):null};class Ia extends t.VectorTileWorkerSource{constructor(je,Je,At,kt,ai){super(je,Je,At,kt,fa),ai&&(this.loadGeoJSON=ai)}loadData(je,Je){const At=je&&je.request,kt=At&&At.collectResourceTiming;this.loadGeoJSON(je,(ai,Ci)=>{if(ai||!Ci)return Je(ai);if("object"!=typeof Ci)return Je(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`));{at(Ci,!0);try{if(je.filter){const Mt=t.createExpression(je.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Mt.result)throw new Error(Mt.value.map(On=>`${On.key}: ${On.message}`).join(", "));Ci={type:"FeatureCollection",features:Ci.features.filter(On=>Mt.value.evaluate({zoom:0},On))}}this._geoJSONIndex=je.cluster?new fr(function({superclusterOptions:Mt,clusterProperties:Bi}){if(!Bi||!Mt)return Mt;const On={},_n={},Vi={accumulated:null,zoom:0},Qn={properties:null},Yt=Object.keys(Bi);for(const Ut of Yt){const[vt,pt]=Bi[Ut],Ke=t.createExpression(pt),rt=t.createExpression("string"==typeof vt?[vt,["accumulated"],["get",Ut]]:vt);On[Ut]=Ke.value,_n[Ut]=rt.value}return Mt.map=Ut=>{Qn.properties=Ut;const vt={};for(const pt of Yt)vt[pt]=On[pt].evaluate(Vi,Qn);return vt},Mt.reduce=(Ut,vt)=>{Qn.properties=vt;for(const pt of Yt)Vi.accumulated=Ut[pt],Ut[pt]=_n[pt].evaluate(Vi,Qn)},Mt}(je)).load(Ci.features):new Dr(Mt=Ci,je.geojsonVtOptions)}catch(Mt){return Je(Mt)}this.loaded={};const Ii={};if(kt){const Mt=t.getPerformanceMeasurement(At);Mt&&(Ii.resourceTiming={},Ii.resourceTiming[je.source]=JSON.parse(JSON.stringify(Mt)))}Je(null,Ii)}var Mt})}reloadTile(je,Je){const At=this.loaded;return At&&At[je.uid]?super.reloadTile(je,Je):this.loadTile(je,Je)}loadGeoJSON(je,Je){if(je.request)t.getJSON(je.request,Je);else{if("string"!=typeof je.data)return Je(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`));try{return Je(null,JSON.parse(je.data))}catch{return Je(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(je,Je){try{Je(null,this._geoJSONIndex.getClusterExpansionZoom(je.clusterId))}catch(At){Je(At)}}getClusterChildren(je,Je){try{Je(null,this._geoJSONIndex.getChildren(je.clusterId))}catch(At){Je(At)}}getClusterLeaves(je,Je){try{Je(null,this._geoJSONIndex.getLeaves(je.clusterId,je.limit,je.offset))}catch(At){Je(At)}}}class Fa{constructor(je){this.self=je,this.actor=new t.Actor(je,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:Ia},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Je,At)=>{if(this.workerSourceTypes[Je])throw new Error(`Worker source with name "${Je}" already registered.`);this.workerSourceTypes[Je]=At},this.self.registerRTLTextPlugin=Je=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Je.applyArabicShaping,t.plugin.processBidirectionalText=Je.processBidirectionalText,t.plugin.processStyledBidirectionalText=Je.processStyledBidirectionalText}}clearCaches(je,Je,At){delete this.layerIndexes[je],delete this.availableImages[je],delete this.workerSources[je],delete this.demWorkerSources[je],At()}checkIfReady(je,Je,At){At()}setReferrer(je,Je){this.referrer=Je}spriteLoaded(je,Je){this.isSpriteLoaded[je]=Je;for(const At in this.workerSources[je]){const kt=this.workerSources[je][At];for(const ai in kt)kt[ai]instanceof t.VectorTileWorkerSource&&(kt[ai].isSpriteLoaded=Je,kt[ai].fire(new t.Event("isSpriteLoaded")))}}setImages(je,Je,At){this.availableImages[je]=Je;for(const kt in this.workerSources[je]){const ai=this.workerSources[je][kt];for(const Ci in ai)ai[Ci].availableImages=Je}At()}enableTerrain(je,Je,At){this.terrain=Je,At()}setProjection(je,Je){this.projections[je]=t.getProjection(Je)}setLayers(je,Je,At){this.getLayerIndex(je).replace(Je),At()}updateLayers(je,Je,At){this.getLayerIndex(je).update(Je.layers,Je.removedIds),At()}loadTile(je,Je,At){const kt=this.enableTerrain?t.extend({enableTerrain:this.terrain},Je):Je;kt.projection=this.projections[je]||this.defaultProjection,this.getWorkerSource(je,Je.type,Je.source).loadTile(kt,At)}loadDEMTile(je,Je,At){const kt=this.enableTerrain?t.extend({buildQuadTree:this.terrain},Je):Je;this.getDEMWorkerSource(je,Je.source).loadTile(kt,At)}reloadTile(je,Je,At){const kt=this.enableTerrain?t.extend({enableTerrain:this.terrain},Je):Je;kt.projection=this.projections[je]||this.defaultProjection,this.getWorkerSource(je,Je.type,Je.source).reloadTile(kt,At)}abortTile(je,Je,At){this.getWorkerSource(je,Je.type,Je.source).abortTile(Je,At)}removeTile(je,Je,At){this.getWorkerSource(je,Je.type,Je.source).removeTile(Je,At)}removeSource(je,Je,At){if(!this.workerSources[je]||!this.workerSources[je][Je.type]||!this.workerSources[je][Je.type][Je.source])return;const kt=this.workerSources[je][Je.type][Je.source];delete this.workerSources[je][Je.type][Je.source],void 0!==kt.removeSource?kt.removeSource(Je,At):At()}loadWorkerSource(je,Je,At){try{this.self.importScripts(Je.url),At()}catch(kt){At(kt.toString())}}syncRTLPluginState(je,Je,At){try{t.plugin.setState(Je);const kt=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=kt){this.self.importScripts(kt);const ai=t.plugin.isParsed();At(ai?void 0:new Error(`RTL Text Plugin failed to import scripts from ${kt}`),ai)}}catch(kt){At(kt.toString())}}getAvailableImages(je){let Je=this.availableImages[je];return Je||(Je=[]),Je}getLayerIndex(je){let Je=this.layerIndexes[je];return Je||(Je=this.layerIndexes[je]=new Be),Je}getWorkerSource(je,Je,At){return this.workerSources[je]||(this.workerSources[je]={}),this.workerSources[je][Je]||(this.workerSources[je][Je]={}),this.workerSources[je][Je][At]||(this.workerSources[je][Je][At]=new this.workerSourceTypes[Je]({send:(ai,Ci,Ii,Mt,Bi,On)=>{this.actor.send(ai,Ci,Ii,je,Bi,On)},scheduler:this.actor.scheduler},this.getLayerIndex(je),this.getAvailableImages(je),this.isSpriteLoaded[je])),this.workerSources[je][Je][At]}getDEMWorkerSource(je,Je){return this.demWorkerSources[je]||(this.demWorkerSources[je]={}),this.demWorkerSources[je][Je]||(this.demWorkerSources[je][Je]=new Me),this.demWorkerSources[je][Je]}enforceCacheSizeLimit(je,Je){t.enforceCacheSizeLimit(Je)}getWorkerPerformanceMetrics(je,Je,At){At(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Fa(self)),Fa}),xt(0,function(t){function j(k,f){if(Array.isArray(k)){if(!Array.isArray(f)||k.length!==f.length)return!1;for(let _=0;_<k.length;_++)if(!j(k[_],f[_]))return!1;return!0}if("object"==typeof k&&null!==k&&null!==f){if("object"!=typeof f||Object.keys(k).length!==Object.keys(f).length)return!1;for(const _ in k)if(!j(k[_],f[_]))return!1;return!0}return k===f}var He=Be;function Be(k){return f=k,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var I,Y,V=new Blob([""],{type:"text/javascript"}),Q=URL.createObjectURL(V);try{Y=new Worker(Q),I=!0}catch{I=!1}return Y&&Y.terminate(),URL.revokeObjectURL(Q),I}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var I=document.createElement("canvas");I.width=I.height=1;var Y=I.getContext("2d");if(!Y)return!1;var V=Y.getImageData(0,0,1,1);return V&&V.width===I.width}()||(void 0===Me[_=f&&f.failIfMajorPerformanceCaveat]&&(Me[_]=function(I){var Y,Q,re,de,V=(Q=I,re=document.createElement("canvas"),(de=Object.create(Be.webGLContextAttributes)).failIfMajorPerformanceCaveat=Q,re.getContext("webgl",de)||re.getContext("experimental-webgl",de));if(!V)return!1;try{Y=V.createShader(V.VERTEX_SHADER)}catch{return!1}return!(!Y||V.isContextLost())&&(V.shaderSource(Y,"void main() {}"),V.compileShader(Y),!0===V.getShaderParameter(Y,V.COMPILE_STATUS))}(_)),!Me[_]||document.documentMode));var f,_}var Me={};function We(k,f,_){const I=t.window.document.createElement(k);return void 0!==f&&(I.className=f),_&&_.appendChild(I),I}function nt(k,f,_){const I=t.window.document.createElementNS("http://www.w3.org/2000/svg",k);for(const Y of Object.keys(f))I.setAttributeNS(null,Y,f[Y]);return _&&_.appendChild(I),I}Be.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const at=t.window.document&&t.window.document.documentElement.style,Ct=at&&void 0!==at.userSelect?"userSelect":"WebkitUserSelect";let ot;function Wt(){at&&Ct&&(ot=at[Ct],at[Ct]="none")}function et(){at&&Ct&&(at[Ct]=ot)}function lt(k){k.preventDefault(),k.stopPropagation(),t.window.removeEventListener("click",lt,!0)}function gt(){t.window.addEventListener("click",lt,!0),t.window.setTimeout(()=>{t.window.removeEventListener("click",lt,!0)},0)}function _i(k,f){const _=k.getBoundingClientRect();return Pi(k,_,f)}function tt(k,f){const _=k.getBoundingClientRect(),I=[];for(let Y=0;Y<f.length;Y++)I.push(Pi(k,_,f[Y]));return I}function yi(k){return void 0!==t.window.InstallTrigger&&2===k.button&&k.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:k.button}function Pi(k,f,_){const I=k.offsetWidth===f.width?1:k.offsetWidth/f.width;return new t.Point((_.clientX-f.left)*I,(_.clientY-f.top)*I)}function Dt(k,f){var _=f[0],I=f[1],Y=f[2],V=f[3],Q=_*V-Y*I;return Q?(k[0]=V*(Q=1/Q),k[1]=-I*Q,k[2]=-Y*Q,k[3]=_*Q,k):null}function Fi(k){const{userImage:f}=k;return!!(f&&f.render&&f.render())&&(k.data.replace(new Uint8Array(f.data.buffer)),!0)}class xi extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(f){if(this.loaded!==f&&(this.loaded=f,f)){for(const{ids:_,callback:I}of this.requestors)this._notify(_,I);this.requestors=[]}}hasImage(f){return!!this.getImage(f)}getImage(f){return this.images[f]}addImage(f,_){this._validate(f,_)&&(this.images[f]=_)}_validate(f,_){let I=!0;return this._validateStretch(_.stretchX,_.data&&_.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${f}" has invalid "stretchX" value`))),I=!1),this._validateStretch(_.stretchY,_.data&&_.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${f}" has invalid "stretchY" value`))),I=!1),this._validateContent(_.content,_)||(this.fire(new t.ErrorEvent(new Error(`Image "${f}" has invalid "content" value`))),I=!1),I}_validateStretch(f,_){if(!f)return!0;let I=0;for(const Y of f){if(Y[0]<I||Y[1]<Y[0]||_<Y[1])return!1;I=Y[1]}return!0}_validateContent(f,_){return!(f&&(4!==f.length||f[0]<0||_.data.width<f[0]||f[1]<0||_.data.height<f[1]||f[2]<0||_.data.width<f[2]||f[3]<0||_.data.height<f[3]||f[2]<f[0]||f[3]<f[1]))}updateImage(f,_){_.version=this.images[f].version+1,this.images[f]=_,this.updatedImages[f]=!0}removeImage(f){const _=this.images[f];delete this.images[f],delete this.patterns[f],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(f,_){let I=!0;if(!this.isLoaded())for(const Y of f)this.images[Y]||(I=!1);this.isLoaded()||I?this._notify(f,_):this.requestors.push({ids:f,callback:_})}_notify(f,_){const I={};for(const Y of f){this.images[Y]||this.fire(new t.Event("styleimagemissing",{id:Y}));const V=this.images[Y];V?I[Y]={data:V.data.clone(),pixelRatio:V.pixelRatio,sdf:V.sdf,version:V.version,stretchX:V.stretchX,stretchY:V.stretchY,content:V.content,hasRenderCallback:!(!V.userImage||!V.userImage.render)}:t.warnOnce(`Image "${Y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,I)}getPixelSize(){const{width:f,height:_}=this.atlasImage;return{width:f,height:_}}getPattern(f){const _=this.patterns[f],I=this.getImage(f);if(!I)return null;if(_&&_.position.version===I.version)return _.position;if(_)_.position.version=I.version;else{const Y={w:I.data.width+2,h:I.data.height+2,x:0,y:0},V=new t.ImagePosition(Y,I);this.patterns[f]={bin:Y,position:V}}return this._updatePatternAtlas(),this.patterns[f].position}bind(f){const _=f.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(f,this.atlasImage,_.RGBA),this.atlasTexture&&this.atlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(){const f=[];for(const V in this.patterns)f.push(this.patterns[V].bin);const{w:_,h:I}=t.potpack(f),Y=this.atlasImage;Y.resize({width:_||1,height:I||1});for(const V in this.patterns){const{bin:Q}=this.patterns[V],re=Q.x+1,de=Q.y+1,be=this.images[V].data,xe=be.width,Fe=be.height;t.RGBAImage.copy(be,Y,{x:0,y:0},{x:re,y:de},{width:xe,height:Fe}),t.RGBAImage.copy(be,Y,{x:0,y:Fe-1},{x:re,y:de-1},{width:xe,height:1}),t.RGBAImage.copy(be,Y,{x:0,y:0},{x:re,y:de+Fe},{width:xe,height:1}),t.RGBAImage.copy(be,Y,{x:xe-1,y:0},{x:re-1,y:de},{width:1,height:Fe}),t.RGBAImage.copy(be,Y,{x:0,y:0},{x:re+xe,y:de},{width:1,height:Fe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(f){for(const _ of f){if(this.callbackDispatchedThisFrame[_])continue;this.callbackDispatchedThisFrame[_]=!0;const I=this.images[_];Fi(I)&&this.updateImage(_,I)}}}const fi=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(k,f){return function([_,I,Y]){const V=t.degToRad(I+90),Q=t.degToRad(Y);return{x:_*Math.cos(V)*Math.sin(Q),y:_*Math.sin(V)*Math.sin(Q),z:_*Math.cos(Q),azimuthal:I,polar:Y}}(k.expression.evaluate(f))}interpolate(k,f,_){return{x:t.number(k.x,f.x,_),y:t.number(k.y,f.y,_),z:t.number(k.z,f.z,_),azimuthal:t.number(k.azimuthal,f.azimuthal,_),polar:t.number(k.polar,f.polar,_)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)});class It extends t.Evented{constructor(f){super(),this._transitionable=new t.Transitionable(fi),this.setLight(f),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(f,_={}){if(!this._validate(t.validateLight,f,_))for(const I in f){const Y=f[I];t.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),Y):this._transitionable.setValue(I,Y)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,_,I){return(!I||!1!==I.validate)&&t.emitValidationErrors(this,f.call(t.validateStyle,t.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const Si=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)});let Ni=class extends t.Evented{constructor(k,f){super(),this._transitionable=new t.Transitionable(Si),this.set(k),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(k){for(const f in k){const _=k[f];t.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),_):this._transitionable.setValue(f,_)}}updateTransitions(k){this._transitioning=this._transitionable.transitioned(k,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(k){this.properties=this._transitioning.possiblyEvaluate(k)}};function Zi(k,f,_,I){const Y=t.smoothstep(45,65,_),[V,Q]=Rn(k,I),re=t.length(f);let de=1-Math.min(1,Math.exp((re-V)/(Q-V)*-6));return de*=de*de,de=Math.min(1,1.00747*de),de*Y*k.alpha}function Rn(k,f){const _=.5/Math.tan(.5*f);return[k.range[0]+_,k.range[1]+_]}const Ki=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"high-color":new t.DataConstantProperty(t.spec.fog["high-color"]),"space-color":new t.DataConstantProperty(t.spec.fog["space-color"]),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"]),"star-intensity":new t.DataConstantProperty(t.spec.fog["star-intensity"])});class tn extends t.Evented{constructor(f,_){super(),this._transitionable=new t.Transitionable(Ki),this.set(f),this._transitioning=this._transitionable.untransitioned(),this._transform=_}get state(){const f=this._transform,_="globe"===f.projection.name,I=t.globeToMercatorTransition(f.zoom),Y=this.properties.get("range"),V=[.5,3];return{range:_?[t.number(V[0],Y[0],I),t.number(V[1],Y[1],I)]:Y,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(f,_={}){if(!this._validate(t.validateFog,f,_)){for(const I of Object.keys(t.spec.fog))f&&void 0===f[I]&&(f[I]=t.spec.fog[I].default);for(const I in f){const Y=f[I];t.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),Y):this._transitionable.setValue(I,Y)}}}getOpacity(f){if(!this._transform.projection.supportsFog)return 0;const _=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:t.smoothstep(45,65,f))*_.a}getOpacityAtLatLng(f,_){return this._transform.projection.supportsFog?function(I,Y,V){const Q=t.MercatorCoordinate.fromLngLat(Y),re=V.elevation?V.elevation.getAtPointOrZero(Q):0,de=[Q.x,Q.y,re];return t.transformMat4(de,de,V.mercatorFogMatrix),Zi(I,de,V.pitch,V._fov)}(this.state,f,_):0}getFovAdjustedRange(f){return this._transform.projection.supportsFog?Rn(this.state,f):[0,1]}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}_validate(f,_,I){return(!I||!1!==I.validate)&&t.emitValidationErrors(this,f.call(t.validateStyle,t.extend({value:_,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class yn{constructor(f,_){this.workerPool=f,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const I=this.workerPool.acquire(this.id);for(let Y=0;Y<I.length;Y++){const V=new yn.Actor(I[Y],_,this.id);V.name=`Worker ${Y}`,this.actors.push(V)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(f,_,I){t.asyncAll(this.actors,(Y,V)=>{Y.send(f,_,V)},I=I||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(f=>{f.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Nn(k,f,_){return f*(t.EXTENT/(k.tileSize*Math.pow(2,_-k.tileID.overscaledZ)))}yn.Actor=t.Actor;class yr{constructor(f,_,I,Y){this.screenBounds=f,this.cameraPoint=_,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=I,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Y)}static createFromScreenPoints(f,_){let I,Y;if(f instanceof t.Point||"number"==typeof f[0]){const V=t.Point.convert(f);I=[V],Y=_.isPointAboveHorizon(V)}else{const V=t.Point.convert(f[0]),Q=t.Point.convert(f[1]);I=[V,Q],Y=t.polygonizeBounds(V,Q).every(re=>_.isPointAboveHorizon(re))}return new yr(I,_.getCameraPoint(),Y,_)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(f){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],f)}bufferedCameraGeometry(f){const _=this.screenBounds[0],I=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],Y=t.polygonizeBounds(_,I,0,!1);return this.cameraPoint.y>I.y&&(this.cameraPoint.x>_.x&&this.cameraPoint.x<I.x?Y.splice(3,0,this.cameraPoint):this.cameraPoint.x>=I.x?Y[2]=this.cameraPoint:this.cameraPoint.x<=_.x&&(Y[3]=this.cameraPoint)),t.bufferConvexPolygon(Y,f)}bufferedCameraGeometryGlobe(f){const _=this.screenBounds[0],I=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],Y=t.polygonizeBounds(_,I,f),V=this.cameraPoint.clone();switch(3*((V.y>_.y)+(V.y>I.y))+((V.x>_.x)+(V.x>I.x))){case 0:Y[0]=V,Y[4]=V.clone();break;case 1:Y.splice(1,0,V);break;case 2:Y[1]=V;break;case 3:Y.splice(4,0,V);break;case 5:Y.splice(2,0,V);break;case 6:Y[3]=V;break;case 7:Y.splice(3,0,V);break;case 8:Y[2]=V}return Y}containsTile(f,_,I,Y=0){const V=f.queryPadding/_._pixelsPerMercatorPixel+1,Q=I?this._bufferedCameraMercator(V,_):this._bufferedScreenMercator(V,_);let re=f.tileID.wrap+(Q.unwrapped?Y:0);const de=Q.polygon.map(Tt=>t.getTilePoint(f.tileTransform,Tt,re));if(!t.polygonIntersectsBox(de,0,0,t.EXTENT,t.EXTENT))return;re=f.tileID.wrap+(this.screenGeometryMercator.unwrapped?Y:0);const be=this.screenGeometryMercator.polygon.map(Tt=>t.getTileVec3(f.tileTransform,Tt,re)),xe=be.map(Tt=>new t.Point(Tt[0],Tt[1])),Fe=_.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),it=t.getTileVec3(f.tileTransform,Fe,re),ft=be.map(Tt=>{const Ne=t.sub(Tt,Tt,it);return t.normalize(Ne,Ne),new t.Ray(it,Ne)}),yt=Nn(f,1,_.zoom)*_._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:xe,tilespaceRays:ft,bufferedTilespaceGeometry:de,bufferedTilespaceBounds:(bt=t.getBounds(de),bt.min.x=t.clamp(bt.min.x,0,t.EXTENT),bt.min.y=t.clamp(bt.min.y,0,t.EXTENT),bt.max.x=t.clamp(bt.max.x,0,t.EXTENT),bt.max.y=t.clamp(bt.max.y,0,t.EXTENT),bt),tile:f,tileID:f.tileID,pixelToTileUnitsFactor:yt};var bt}_bufferedScreenMercator(f,_){const I=Mi(f);if(this._screenRaycastCache[I])return this._screenRaycastCache[I];{let Y;return Y="globe"===_.projection.name?this._projectAndResample(this.bufferedScreenGeometry(f),_):{polygon:this.bufferedScreenGeometry(f).map(V=>_.pointCoordinate3D(V)),unwrapped:!0},this._screenRaycastCache[I]=Y,Y}}_bufferedCameraMercator(f,_){const I=Mi(f);if(this._cameraRaycastCache[I])return this._cameraRaycastCache[I];{let Y;return Y="globe"===_.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(f),_):{polygon:this.bufferedCameraGeometry(f).map(V=>_.pointCoordinate3D(V)),unwrapped:!0},this._cameraRaycastCache[I]=Y,Y}}_projectAndResample(f,_){const I=function(V,Q){const re=t.multiply([],Q.pixelMatrix,Q.globeMatrix),de=[0,-t.GLOBE_RADIUS,0,1],be=[0,t.GLOBE_RADIUS,0,1],xe=[0,0,0,1];t.transformMat4$1(de,de,re),t.transformMat4$1(be,be,re),t.transformMat4$1(xe,xe,re);const Fe=new t.Point(de[0]/de[3],de[1]/de[3]),it=new t.Point(be[0]/be[3],be[1]/be[3]),ft=t.polygonContainsPoint(V,Fe)&&de[3]<xe[3],yt=t.polygonContainsPoint(V,it)&&be[3]<xe[3];if(!ft&&!yt)return null;const bt=function(ri,Oi,Ai){for(let Gi=1;Gi<ri.length;Gi++){const Gn=Nr(Oi.pointCoordinate3D(ri[Gi-1]).x),Hi=Nr(Oi.pointCoordinate3D(ri[Gi]).x);if(Ai<0){if(Gn<Hi)return{idx:Gi,t:-Gn/(Hi-1-Gn)}}else if(Hi<Gn)return{idx:Gi,t:(1-Gn)/(Hi+1-Gn)}}return null}(V,Q,ft?-1:1);if(!bt)return null;const{idx:Tt,t:Ne}=bt;let _t=Tt>1?fr(V.slice(0,Tt),Q):[],zt=Tt<V.length?fr(V.slice(Tt),Q):[];_t=_t.map(ri=>new t.Point(Nr(ri.x),ri.y)),zt=zt.map(ri=>new t.Point(Nr(ri.x),ri.y));const Gt=[..._t];0===Gt.length&&Gt.push(zt[zt.length-1]);const pi=t.number(Gt[Gt.length-1].y,(0===zt.length?_t[0]:zt[0]).y,Ne);let hi;return hi=ft?[new t.Point(0,pi),new t.Point(0,0),new t.Point(1,0),new t.Point(1,pi)]:[new t.Point(1,pi),new t.Point(1,1),new t.Point(0,1),new t.Point(0,pi)],Gt.push(...hi),0===zt.length?Gt.push(_t[0]):Gt.push(...zt),{polygon:Gt.map(ri=>new t.MercatorCoordinate(ri.x,ri.y)),unwrapped:!1}}(f,_);if(I)return I;const Y=function(V,Q){let re=!1,de=-1/0,be=0;for(let Fe=0;Fe<V.length-1;Fe++)V[Fe].x>de&&(de=V[Fe].x,be=Fe);for(let Fe=0;Fe<V.length-1;Fe++){const it=(be+Fe)%(V.length-1),ft=V[it],yt=V[it+1];Math.abs(ft.x-yt.x)>.5&&(ft.x<yt.x?(ft.x+=1,0===it&&(V[V.length-1].x+=1)):(yt.x+=1,it+1===V.length-1&&(V[0].x+=1)),re=!0)}const xe=t.mercatorXfromLng(Q.center.lng);return re&&xe<Math.abs(xe-1)&&V.forEach(Fe=>{Fe.x-=1}),{polygon:V,unwrapped:re}}(fr(f,_).map(V=>new t.Point(Nr(V.x),V.y)),_);return{polygon:Y.polygon.map(V=>new t.MercatorCoordinate(V.x,V.y)),unwrapped:Y.unwrapped}}}function fr(k,f){return t.resample(k,_=>{const I=f.pointCoordinate3D(_);_.x=I.x,_.y=I.y},1/256)}function Nr(k){return k<0?1+k%1:k%1}function Mi(k){return 100*k|0}function In(k,f,_,I,Y){const V=function(Q,re){if(Q)return Y(Q);if(re){k.url&&re.tiles&&k.tiles&&delete k.tiles;const de=t.pick(t.extend(re,k),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);re.vector_layers&&(de.vectorLayers=re.vector_layers,de.vectorLayerIds=de.vectorLayers.map(be=>be.id)),de.tiles=f.canonicalizeTileset(de,k.url),Y(null,de)}};return k.url?t.getJSON(f.transformRequest(f.normalizeSourceURL(k.url,null,_,I),t.ResourceType.Source),V):t.exported.frame(()=>V(null,k))}class Jn{constructor(f,_,I){this.bounds=t.LngLatBounds.convert(this.validateBounds(f)),this.minzoom=_||0,this.maxzoom=I||24}validateBounds(f){return Array.isArray(f)&&4===f.length?[Math.max(-180,f[0]),Math.max(-90,f[1]),Math.min(180,f[2]),Math.min(90,f[3])]:[-180,-90,180,90]}contains(f){const _=Math.pow(2,f.z),I=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*_),Y=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*_),V=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*_),Q=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*_);return f.x>=I&&f.x<V&&f.y>=Y&&f.y<Q}}class ia{constructor(f,_,I){this.context=f;const Y=f.gl;this.buffer=Y.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),f.bindElementBuffer.set(this.buffer),Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),this.dynamicDraw||_.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(f){const _=this.context.gl;this.context.unbindVAO(),this.bind(),_.bufferSubData(_.ELEMENT_ARRAY_BUFFER,0,f.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const jr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pr{constructor(f,_,I,Y){this.length=_.length,this.attributes=I,this.itemSize=_.bytesPerElement,this.dynamicDraw=Y,this.context=f;const V=f.gl;this.buffer=V.createBuffer(),f.bindVertexBuffer.set(this.buffer),V.bufferData(V.ARRAY_BUFFER,_.arrayBuffer,this.dynamicDraw?V.DYNAMIC_DRAW:V.STATIC_DRAW),this.dynamicDraw||_.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(f){const _=this.context.gl;this.bind(),_.bufferSubData(_.ARRAY_BUFFER,0,f.arrayBuffer)}enableAttributes(f,_){for(let I=0;I<this.attributes.length;I++){const Y=_.attributes[this.attributes[I].name];void 0!==Y&&f.enableVertexAttribArray(Y)}}setVertexAttribPointers(f,_,I){for(let Y=0;Y<this.attributes.length;Y++){const V=this.attributes[Y],Q=_.attributes[V.name];void 0!==Q&&f.vertexAttribPointer(Q,V.components,f[jr[V.type]],!1,this.itemSize,V.offset+this.itemSize*(I||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(f){this.gl=f.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(f){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ya extends Mn{getDefault(){return t.Color.transparent}set(f){const _=this.current;(f.r!==_.r||f.g!==_.g||f.b!==_.b||f.a!==_.a||this.dirty)&&(this.gl.clearColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class ka extends Mn{getDefault(){return 1}set(f){(f!==this.current||this.dirty)&&(this.gl.clearDepth(f),this.current=f,this.dirty=!1)}}class Ma extends Mn{getDefault(){return 0}set(f){(f!==this.current||this.dirty)&&(this.gl.clearStencil(f),this.current=f,this.dirty=!1)}}class pr extends Mn{getDefault(){return[!0,!0,!0,!0]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||f[3]!==_[3]||this.dirty)&&(this.gl.colorMask(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class $n extends Mn{getDefault(){return!0}set(f){(f!==this.current||this.dirty)&&(this.gl.depthMask(f),this.current=f,this.dirty=!1)}}class ar extends Mn{getDefault(){return 255}set(f){(f!==this.current||this.dirty)&&(this.gl.stencilMask(f),this.current=f,this.dirty=!1)}}class Sn extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(f){const _=this.current;(f.func!==_.func||f.ref!==_.ref||f.mask!==_.mask||this.dirty)&&(this.gl.stencilFunc(f.func,f.ref,f.mask),this.current=f,this.dirty=!1)}}class Dn extends Mn{getDefault(){const f=this.gl;return[f.KEEP,f.KEEP,f.KEEP]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||this.dirty)&&(this.gl.stencilOp(f[0],f[1],f[2]),this.current=f,this.dirty=!1)}}class Gr extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.STENCIL_TEST):_.disable(_.STENCIL_TEST),this.current=f,this.dirty=!1}}class Vn extends Mn{getDefault(){return[0,1]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||this.dirty)&&(this.gl.depthRange(f[0],f[1]),this.current=f,this.dirty=!1)}}class rn extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.DEPTH_TEST):_.disable(_.DEPTH_TEST),this.current=f,this.dirty=!1}}class ur extends Mn{getDefault(){return this.gl.LESS}set(f){(f!==this.current||this.dirty)&&(this.gl.depthFunc(f),this.current=f,this.dirty=!1)}}class lr extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.BLEND):_.disable(_.BLEND),this.current=f,this.dirty=!1}}class Pa extends Mn{getDefault(){const f=this.gl;return[f.ONE,f.ZERO]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||this.dirty)&&(this.gl.blendFunc(f[0],f[1]),this.current=f,this.dirty=!1)}}class Ga extends Mn{getDefault(){return t.Color.transparent}set(f){const _=this.current;(f.r!==_.r||f.g!==_.g||f.b!==_.b||f.a!==_.a||this.dirty)&&(this.gl.blendColor(f.r,f.g,f.b,f.a),this.current=f,this.dirty=!1)}}class Ja extends Mn{getDefault(){return this.gl.FUNC_ADD}set(f){(f!==this.current||this.dirty)&&(this.gl.blendEquation(f),this.current=f,this.dirty=!1)}}class Ra extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;f?_.enable(_.CULL_FACE):_.disable(_.CULL_FACE),this.current=f,this.dirty=!1}}class ha extends Mn{getDefault(){return this.gl.BACK}set(f){(f!==this.current||this.dirty)&&(this.gl.cullFace(f),this.current=f,this.dirty=!1)}}class xr extends Mn{getDefault(){return this.gl.CCW}set(f){(f!==this.current||this.dirty)&&(this.gl.frontFace(f),this.current=f,this.dirty=!1)}}let da,Mr=class extends Mn{getDefault(){return null}set(k){(k!==this.current||this.dirty)&&(this.gl.useProgram(k),this.current=k,this.dirty=!1)}};class go extends Mn{getDefault(){return this.gl.TEXTURE0}set(f){(f!==this.current||this.dirty)&&(this.gl.activeTexture(f),this.current=f,this.dirty=!1)}}class Dr extends Mn{getDefault(){const f=this.gl;return[0,0,f.drawingBufferWidth,f.drawingBufferHeight]}set(f){const _=this.current;(f[0]!==_[0]||f[1]!==_[1]||f[2]!==_[2]||f[3]!==_[3]||this.dirty)&&(this.gl.viewport(f[0],f[1],f[2],f[3]),this.current=f,this.dirty=!1)}}class Aa extends Mn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,f),this.current=f,this.dirty=!1}}class fa extends Mn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindRenderbuffer(_.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Ia extends Mn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindTexture(_.TEXTURE_2D,f),this.current=f,this.dirty=!1}}class Fa extends Mn{getDefault(){return null}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.bindBuffer(_.ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class Et extends Mn{getDefault(){return null}set(f){const _=this.gl;_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,f),this.current=f,this.dirty=!1}}class je extends Mn{constructor(f){super(f),this.vao=f.extVertexArrayObject}getDefault(){return null}set(f){this.vao&&(f!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(f),this.current=f,this.dirty=!1)}}class Je extends Mn{getDefault(){return 4}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_ALIGNMENT,f),this.current=f,this.dirty=!1}}class At extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,f),this.current=f,this.dirty=!1}}class kt extends Mn{getDefault(){return!1}set(f){if(f===this.current&&!this.dirty)return;const _=this.gl;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,f),this.current=f,this.dirty=!1}}class ai extends Mn{constructor(f,_){super(f),this.context=f,this.parent=_}getDefault(){return null}}class Ci extends ai{setDirty(){this.dirty=!0}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,f,0),this.current=f,this.dirty=!1}}class Ii extends ai{attachment(){return this.gl.DEPTH_ATTACHMENT}set(f){if(f===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const _=this.gl;_.framebufferRenderbuffer(_.FRAMEBUFFER,this.attachment(),_.RENDERBUFFER,f),this.current=f,this.dirty=!1}}class Mt extends Ii{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Bi{constructor(f,_,I,Y){this.context=f,this.width=_,this.height=I;const V=this.framebuffer=f.gl.createFramebuffer();this.colorAttachment=new Ci(f,V),Y&&(this.depthAttachment=new Ii(f,V))}destroy(){const f=this.context.gl,_=this.colorAttachment.get();if(_&&f.deleteTexture(_),this.depthAttachment){const I=this.depthAttachment.get();I&&f.deleteRenderbuffer(I)}f.deleteFramebuffer(this.framebuffer)}}class On{constructor(f,_=!1){if(this.gl=f,this.isWebGL2=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),_){const I=f;this.extVertexArrayObject={createVertexArrayOES:I.createVertexArray.bind(f),deleteVertexArrayOES:I.deleteVertexArray.bind(f),bindVertexArrayOES:I.bindVertexArray.bind(f)}}this.clearColor=new Ya(this),this.clearDepth=new ka(this),this.clearStencil=new Ma(this),this.colorMask=new pr(this),this.depthMask=new $n(this),this.stencilMask=new ar(this),this.stencilFunc=new Sn(this),this.stencilOp=new Dn(this),this.stencilTest=new Gr(this),this.depthRange=new Vn(this),this.depthTest=new rn(this),this.depthFunc=new ur(this),this.blend=new lr(this),this.blendFunc=new Pa(this),this.blendColor=new Ga(this),this.blendEquation=new Ja(this),this.cullFace=new Ra(this),this.cullFaceSide=new ha(this),this.frontFace=new xr(this),this.program=new Mr(this),this.activeTexture=new go(this),this.viewport=new Dr(this),this.bindFramebuffer=new Aa(this),this.bindRenderbuffer=new fa(this),this.bindTexture=new Ia(this),this.bindVertexBuffer=new Fa(this),this.bindElementBuffer=new Et(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new je(this),this.pixelStoreUnpack=new Je(this),this.pixelStoreUnpackPremultiplyAlpha=new At(this),this.pixelStoreUnpackFlipY=new kt(this),this.extTextureFilterAnisotropic=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("MOZ_EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=f.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=f.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=f.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=f.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),_||(this.extTextureHalfFloat=f.getExtension("OES_texture_half_float")),(_||this.extTextureHalfFloat&&f.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=f.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=_||f.getExtension("OES_standard_derivatives"),this.extTimerQuery=f.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=f.getParameter(f.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(f,_){return new ia(this,f,_)}createVertexBuffer(f,_,I){return new Pr(this,f,_,I)}createRenderbuffer(f,_,I){const Y=this.gl,V=Y.createRenderbuffer();return this.bindRenderbuffer.set(V),Y.renderbufferStorage(Y.RENDERBUFFER,f,_,I),this.bindRenderbuffer.set(null),V}createFramebuffer(f,_,I){return new Bi(this,f,_,I)}clear({color:f,depth:_,stencil:I}){const Y=this.gl;let V=0;f&&(V|=Y.COLOR_BUFFER_BIT,this.clearColor.set(f),this.colorMask.set([!0,!0,!0,!0])),void 0!==_&&(V|=Y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(_),this.depthMask.set(!0)),void 0!==I&&(V|=Y.STENCIL_BUFFER_BIT,this.clearStencil.set(I),this.stencilMask.set(255)),Y.clear(V)}setCullFace(f){!1===f.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(f.mode),this.frontFace.set(f.frontFace))}setDepthMode(f){f.func!==this.gl.ALWAYS||f.mask?(this.depthTest.set(!0),this.depthFunc.set(f.func),this.depthMask.set(f.mask),this.depthRange.set(f.range)):this.depthTest.set(!1)}setStencilMode(f){f.test.func!==this.gl.ALWAYS||f.mask?(this.stencilTest.set(!0),this.stencilMask.set(f.mask),this.stencilOp.set([f.fail,f.depthFail,f.pass]),this.stencilFunc.set({func:f.test.func,ref:f.ref,mask:f.test.mask})):this.stencilTest.set(!1)}setColorMode(f){j(f.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(f.blendFunction),this.blendColor.set(f.blendColor)),this.colorMask.set(f.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class _n extends t.Evented{constructor(f,_,I,Y){if(super(),this.id=f,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(_,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Y),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(f){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"}));const _=Array.isArray(this.map._language)?this.map._language.join():this.map._language,I=this.map._worldview;this._tileJSONRequest=In(this._options,this.map._requestManager,_,I,(Y,V)=>{this._tileJSONRequest=null,this._loaded=!0,Y?(_&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${_}`),I&&2!==I.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${I}`),this.fire(new t.ErrorEvent(Y))):V&&(t.extend(this,V),V.bounds&&(this.tileBounds=new Jn(V.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(V.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),f&&f(Y)})}loaded(){return this._loaded}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}loadTile(f,_){const I=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme)),Y={request:this.map._requestManager.transformRequest(I,t.ResourceType.Tile),data:void 0,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,tileSize:this.tileSize*f.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:f.isSymbolTile};if(Y.request.collectResourceTiming=this._collectResourceTiming,f.actor&&"expired"!==f.state)"loading"===f.state?f.reloadCallback=_:f.request=f.actor.send("reloadTile",Y,V.bind(this));else if(f.actor=this._tileWorkers[I]=this._tileWorkers[I]||this.dispatcher.getActor(),this.dispatcher.ready)f.request=f.actor.send("loadTile",Y,V.bind(this),void 0,!0);else{const Q=t.loadVectorTile.call({deduped:this._deduped},Y,(re,de)=>{re||!de?V.call(this,re):(Y.data={cacheControl:de.cacheControl,expires:de.expires,rawData:de.rawData.slice(0)},f.actor&&f.actor.send("loadTile",Y,V.bind(this),void 0,!0))},!0);f.request={cancel:Q}}function V(Q,re){return delete f.request,f.aborted?_(null):Q&&404!==Q.status?_(Q):(re&&re.resourceTiming&&(f.resourceTiming=re.resourceTiming),this.map._refreshExpiredTiles&&re&&f.setExpiryData(re),f.loadVectorData(re,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),_(null),void(f.reloadCallback&&(this.loadTile(f,f.reloadCallback),f.reloadCallback=null)))}}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.actor&&f.actor.send("abortTile",{uid:f.uid,type:this.type,source:this.id})}unloadTile(f){f.unloadVectorData(),f.actor&&f.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Vi extends t.Evented{constructor(f,_,I,Y){super(),this.id=f,this.dispatcher=I,this.setEventedParent(Y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},_),t.extend(this,t.pick(_,["url","scheme","tileSize"]))}load(f){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=In(this._options,this.map._requestManager,null,null,(_,I)=>{this._tileJSONRequest=null,this._loaded=!0,_?this.fire(new t.ErrorEvent(_)):I&&(t.extend(this,I),I.bounds&&(this.tileBounds=new Jn(I.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(I.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))),f&&f(_)})}loaded(){return this._loaded}onAdd(f){this.map=f,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(f){return this._options.tiles=f,this.reload(),this}setUrl(f){return this.url=f,this._options.url=f,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return t.extend({},this._options)}hasTile(f){return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,_){const I=t.exported.devicePixelRatio>=2,Y=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),I,this.tileSize);f.request=t.getImage(this.map._requestManager.transformRequest(Y,t.ResourceType.Tile),(V,Q,re,de)=>(delete f.request,f.aborted?(f.state="unloaded",_(null)):V?(f.state="errored",_(V)):Q?(this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:re,expires:de}),f.setTexture(Q,this.map.painter),f.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),void _(null)):_(null)))}static loadTileData(f,_,I){f.setTexture(_,I)}static unloadTileData(f,_){f.texture&&_.saveTileTexture(f.texture)}abortTile(f,_){f.request&&(f.request.cancel(),delete f.request),_()}unloadTile(f,_){f.texture&&this.map.painter.saveTileTexture(f.texture),_()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Qn(k,f,_,I,Y,V,Q,re){const de=[k,_,Y,f,I,V,1,1,1],be=[Q,re,1],xe=t.adjoint([],de),[Fe,it,ft]=t.transformMat3(be,be,t.transpose(xe,xe));return t.multiply$1(de,[Fe,0,0,0,it,0,0,0,ft],de)}class Yt extends t.Evented{constructor(f,_,I,Y){super(),this.id=f,this.dispatcher=I,this.coordinates=_.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Y),this.options=_,this._dirty=!1}load(f,_){this._loaded=_||!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(I,Y)=>{if(this._imageRequest=null,this._loaded=!0,I)this.fire(new t.ErrorEvent(I));else if(Y){const{HTMLImageElement:V}=t.window;this.image=Y instanceof V?t.exported.getImageData(Y):Y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,f&&(this.coordinates=f),this._finishLoading()}})}loaded(){return this._loaded}updateImage(f){return this.image&&f.url?(this._imageRequest&&f.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=f.url,this.load(f.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(f){this.map=f,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(f){this.coordinates=f,this._boundsArray=void 0;const _=f.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(I){let Y=1/0,V=1/0,Q=-1/0,re=-1/0;for(const Fe of I)Y=Math.min(Y,Fe.x),V=Math.min(V,Fe.y),Q=Math.max(Q,Fe.x),re=Math.max(re,Fe.y);const de=Math.max(Q-Y,re-V),be=Math.max(0,Math.floor(-Math.log(de)/Math.LN2)),xe=Math.pow(2,be);return new t.CanonicalTileID(be,Math.floor((Y+Q)/2*xe),Math.floor((V+re)/2*xe))}(_),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(f){for(const de in this.tiles){const be=this.tiles[de];"loaded"!==be.state&&(be.state="loaded",be.texture=this.texture)}if(this._boundsArray)return;const _=t.tileTransform(this.tileID,this.map.transform.projection),[I,Y,V,Q]=this.coordinates.map(de=>{const be=_.projection.project(de[0],de[1]);return t.getTilePoint(_,be)._round()});this.perspectiveTransform=function(de,be,xe,Fe,it,ft,yt,bt,Tt,Ne){const _t=Qn(0,0,de,0,0,be,de,be),zt=Qn(xe,Fe,it,ft,yt,bt,Tt,Ne);return t.multiply$1(zt,t.adjoint(_t,_t),zt),[zt[6]/zt[8]*de/t.EXTENT,zt[7]/zt[8]*be/t.EXTENT]}(this.width,this.height,I.x,I.y,Y.x,Y.y,Q.x,Q.y,V.x,V.y);const re=this._boundsArray=new t.StructArrayLayout4i8;re.emplaceBack(I.x,I.y,0,0),re.emplaceBack(Y.x,Y.y,t.EXTENT,0),re.emplaceBack(Q.x,Q.y,0,t.EXTENT),re.emplaceBack(V.x,V.y,t.EXTENT,t.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=f.createVertexBuffer(re,t.boundsAttributes.members),this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const f=this.map.painter.context,_=f.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new t.Texture(f,this.image,_.RGBA),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(f)}loadTile(f,_){this.tileID&&this.tileID.equals(f.tileID.canonical)?(this.tiles[String(f.tileID.wrap)]=f,f.buckets={},_(null)):(f.state="errored",_(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ut={vector:_n,raster:Vi,"raster-dem":class extends Vi{constructor(k,f,_,I){super(k,f,_,I),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}loadTile(k,f){const _=this.map._requestManager.normalizeTileURL(k.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function I(Y,V){Y&&(k.state="errored",f(Y)),V&&(k.dem=V,k.dem.onDeserialize(),k.needsHillshadePrepare=!0,k.needsDEMTextureUpload=!0,k.state="loaded",f(null))}k.request=t.getImage(this.map._requestManager.transformRequest(_,t.ResourceType.Tile),function(Y,V,Q,re){if(delete k.request,k.aborted)k.state="unloaded",f(null);else if(Y)k.state="errored",f(Y);else if(V){this.map._refreshExpiredTiles&&k.setExpiryData({cacheControl:Q,expires:re});const de=t.window.ImageBitmap&&V instanceof t.window.ImageBitmap&&(null==da&&(da=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),da),be=1-(V.width-t.prevPowerOfTwo(V.width))/2;be<1||k.neighboringTiles||(k.neighboringTiles=this._getNeighboringTiles(k.tileID));const xe=de?V:t.exported.getImageData(V,be),Fe={uid:k.uid,coord:k.tileID,source:this.id,rawImageData:xe,encoding:this.encoding,padding:be};k.actor&&"expired"!==k.state||(k.actor=this.dispatcher.getActor(),k.actor.send("loadDEMTile",Fe,I.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(k){const f=k.canonical,_=Math.pow(2,f.z),I=(f.x-1+_)%_,Y=0===f.x?k.wrap-1:k.wrap,V=(f.x+1+_)%_,Q=f.x+1===_?k.wrap+1:k.wrap,re={};return re[new t.OverscaledTileID(k.overscaledZ,Y,f.z,I,f.y).key]={backfilled:!1},re[new t.OverscaledTileID(k.overscaledZ,Q,f.z,V,f.y).key]={backfilled:!1},f.y>0&&(re[new t.OverscaledTileID(k.overscaledZ,Y,f.z,I,f.y-1).key]={backfilled:!1},re[new t.OverscaledTileID(k.overscaledZ,k.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},re[new t.OverscaledTileID(k.overscaledZ,Q,f.z,V,f.y-1).key]={backfilled:!1}),f.y+1<_&&(re[new t.OverscaledTileID(k.overscaledZ,Y,f.z,I,f.y+1).key]={backfilled:!1},re[new t.OverscaledTileID(k.overscaledZ,k.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},re[new t.OverscaledTileID(k.overscaledZ,Q,f.z,V,f.y+1).key]={backfilled:!1}),re}unloadTile(k){k.demTexture&&this.map.painter.saveTileTexture(k.demTexture),k.fbo&&(k.fbo.destroy(),delete k.fbo),k.dem&&delete k.dem,delete k.neighboringTiles,k.state="unloaded"}},geojson:class extends t.Evented{constructor(k,f,_,I){super(),this.id=k,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(I),this._data=f.data,this._options=t.extend({},f),this._collectResourceTiming=f.collectResourceTiming,void 0!==f.maxzoom&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;const Y=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(void 0!==f.buffer?f.buffer:128)*Y,tolerance:(void 0!==f.tolerance?f.tolerance:.375)*Y,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:void 0!==f.clusterMaxZoom?f.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==f.clusterRadius?f.clusterRadius:50)*Y,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}onAdd(k){this.map=k,this.setData(this._data)}setData(k){return this._data=k,this._updateWorkerData(),this}getClusterExpansionZoom(k,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:k,source:this.id},f),this}getClusterChildren(k,f){return this.actor.send("geojson.getClusterChildren",{clusterId:k,source:this.id},f),this}getClusterLeaves(k,f,_,I){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:k,limit:f,offset:_},I),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const k=t.extend({},this.workerOptions),f=this._data;"string"==typeof f?(k.request=this.map._requestManager.transformRequest(t.exported.resolveURL(f),t.ResourceType.Source),k.request.collectResourceTiming=this._collectResourceTiming):k.data=JSON.stringify(f),this._pendingLoad=this.actor.send(`${this.type}.loadData`,k,(_,I)=>{if(this._loaded=!0,this._pendingLoad=null,_)this.fire(new t.ErrorEvent(_));else{const Y={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&I&&I.resourceTiming&&I.resourceTiming[this.id]&&(Y.resourceTiming=I.resourceTiming[this.id]),this.fire(new t.Event("data",Y)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(k,f){const _=k.actor?"reloadTile":"loadTile";k.actor=this.actor,k.request=this.actor.send(_,{type:this.type,uid:k.uid,tileID:k.tileID,tileZoom:k.tileZoom,zoom:k.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(I,Y)=>(delete k.request,k.unloadVectorData(),k.aborted?f(null):I?f(I):(k.loadVectorData(Y,this.map.painter,"reloadTile"===_),f(null))),void 0,"loadTile"===_)}abortTile(k){k.request&&(k.request.cancel(),delete k.request),k.aborted=!0}unloadTile(k){k.unloadVectorData(),this.actor.send("removeTile",{uid:k.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Yt{constructor(k,f,_,I){super(k,f,_,I),this.roundZoom=!0,this.type="video",this.options=f}load(){this._loaded=!1;const k=this.options;this.urls=[];for(const f of k.urls)this.urls.push(this.map._requestManager.transformRequest(f,t.ResourceType.Source).url);t.getVideo(this.urls,(f,_)=>{this._loaded=!0,f?this.fire(new t.ErrorEvent(f)):_&&(this.video=_,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(k){if(this.video){const f=this.video.seekable;k<f.start(0)||k>f.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=k}}getVideo(){return this.video}onAdd(k){this.map||(this.map=k,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const k=this.map.painter.context,f=k.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(k,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(k)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Yt,canvas:class extends Yt{constructor(k,f,_,I){super(k,f,_,I),f.coordinates?Array.isArray(f.coordinates)&&4===f.coordinates.length&&!f.coordinates.some(Y=>!Array.isArray(Y)||2!==Y.length||Y.some(V=>"number"!=typeof V))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${k}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${k}`,null,'missing required property "coordinates"'))),f.animate&&"boolean"!=typeof f.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${k}`,null,'optional "animate" property must be a boolean value'))),f.canvas?"string"==typeof f.canvas||f.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${k}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${k}`,null,'missing required property "canvas"'))),this.options=f,this.animate=void 0===f.animate||f.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(k){this.map=k,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let k=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,k=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,k=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const f=this.map.painter.context;this.texture?(k||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(f,this.canvas,f.gl.RGBA,{premultiply:!0}),this._prepareData(f)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const k of[this.canvas.width,this.canvas.height])if(isNaN(k)||k<=0)return!0;return!1}},custom:class extends t.Evented{constructor(k,f,_,I){super(),this.id=k,this.type="custom",this._dataType="raster",this._dispatcher=_,this._implementation=f,this.setEventedParent(I),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new t.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new t.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Jn(this._implementation.bounds,this.minzoom,this.maxzoom)),f.update=this._update.bind(this),f.clearTiles=this._clearTiles.bind(this),f.coveringTiles=this._coveringTiles.bind(this),t.extend(this,t.pick(f,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return t.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(k){this._map=k,this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(k),this.load()}onRemove(k){this._implementation.onRemove&&this._implementation.onRemove(k)}hasTile(k){if(this._implementation.hasTile){const{x:f,y:_,z:I}=k.canonical;return this._implementation.hasTile({x:f,y:_,z:I})}return!this.tileBounds||this.tileBounds.contains(k.canonical)}loadTile(k,f){const{x:_,y:I,z:Y}=k.tileID.canonical,V=new t.window.AbortController;k.request=Promise.resolve(this._implementation.loadTile({x:_,y:I,z:Y},{signal:V.signal})).then(function(Q){return delete k.request,k.aborted?(k.state="unloaded",f(null)):void 0===Q?(k.state="errored",f(null)):null===Q?(this.loadTileData(k,{width:this.tileSize,height:this.tileSize,data:null}),k.state="loaded",f(null)):(re=Q)instanceof t.window.ImageData||re instanceof t.window.HTMLCanvasElement||re instanceof t.window.ImageBitmap||re instanceof t.window.HTMLImageElement?(this.loadTileData(k,Q),k.state="loaded",void f(null)):(k.state="errored",f(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var re}.bind(this)).catch(Q=>{20!==Q.code&&(k.state="errored",f(Q))}),k.request.cancel=()=>V.abort()}loadTileData(k,f){Vi.loadTileData(k,f,this._map.painter)}unloadTileData(k){Vi.unloadTileData(k,this._map.painter)}unloadTile(k,f){if(this.unloadTileData(k),this._implementation.unloadTile){const{x:_,y:I,z:Y}=k.tileID.canonical;this._implementation.unloadTile({x:_,y:I,z:Y})}f()}abortTile(k,f){k.request&&k.request.cancel&&(k.request.cancel(),delete k.request),f()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(k=>({x:k.canonical.x,y:k.canonical.y,z:k.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"}))}}},vt=function(k,f,_,I){const Y=new Ut[f.type](k,f,_,I);if(Y.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${Y.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],Y),Y};function pt(k,f){const _=t.identity([]);return t.scale(_,_,[.5*k.width,.5*-k.height,1]),t.translate(_,_,[1,-1,0]),t.multiply(_,_,k.calculateProjMatrix(f.toUnwrapped())),Float32Array.from(_)}function Ke(k,f,_,I,Y,V,Q,re=!1){const de=k.tilesIn(I,Q,re);de.sort(Ot);const be=[];for(const Fe of de)be.push({wrappedTileID:Fe.tile.tileID.wrapped().key,queryResults:Fe.tile.queryRenderedFeatures(f,_,k._state,Fe,Y,V,pt(k.transform,Fe.tile.tileID),re)});const xe=function(Fe){const it={},ft={};for(const yt of Fe){const bt=yt.queryResults,Tt=yt.wrappedTileID,Ne=ft[Tt]=ft[Tt]||{};for(const _t in bt){const zt=bt[_t],Gt=Ne[_t]=Ne[_t]||{},pi=it[_t]=it[_t]||[];for(const hi of zt)Gt[hi.featureIndex]||(Gt[hi.featureIndex]=!0,pi.push(hi))}}return it}(be);for(const Fe in xe)xe[Fe].forEach(it=>{const ft=it.feature,yt=ft.layer;yt&&"background"!==yt.type&&"sky"!==yt.type&&(ft.source=yt.source,yt["source-layer"]&&(ft.sourceLayer=yt["source-layer"]),ft.state=void 0!==ft.id?k.getFeatureState(yt["source-layer"],ft.id):{})});return xe}function rt(k,f){const _=k.getRenderableIds().map(V=>k.getTileByID(V)),I=[],Y={};for(let V=0;V<_.length;V++){const Q=_[V],re=Q.tileID.canonical.key;Y[re]||(Y[re]=!0,Q.querySourceFeatures(I,f))}return I}function Ot(k,f){const _=k.tileID,I=f.tileID;return _.overscaledZ-I.overscaledZ||_.canonical.y-I.canonical.y||_.wrap-I.wrap||_.canonical.x-I.canonical.x}function ci(){return null!=jh.workerClass?new jh.workerClass:new t.window.Worker(jh.workerUrl)}const en="mapboxgl_preloaded_worker_pool";class $i{constructor(){this.active={}}acquire(f){if(!this.workers)for(this.workers=[];this.workers.length<$i.workerCount;)this.workers.push(new ci);return this.active[f]=!0,this.workers.slice()}release(f){delete this.active[f],0===this.numActive()&&(this.workers.forEach(_=>{_.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[en]}numActive(){return Object.keys(this.active).length}}let En;function st(){return En||(En=new $i),En}function Bt(k,f){const _={};for(const I in k)"ref"!==I&&(_[I]=k[I]);return t.refProperties.forEach(I=>{I in f&&(_[I]=f[I])}),_}function ke(k){k=k.slice();const f=Object.create(null);for(let _=0;_<k.length;_++)f[k[_].id]=k[_];for(let _=0;_<k.length;_++)"ref"in k[_]&&(k[_]=Bt(k[_],f[k[_].ref]));return k}$i.workerCount=2;const wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function jt(k,f,_){_.push({command:wt.addSource,args:[k,f[k]]})}function Xe(k,f,_){f.push({command:wt.removeSource,args:[k]}),_[k]=!0}function Qt(k,f,_,I){Xe(k,_,I),jt(k,f,_)}function ve(k,f,_){let I;for(I in k[_])if(k[_].hasOwnProperty(I)&&"data"!==I&&!j(k[_][I],f[_][I]))return!1;for(I in f[_])if(f[_].hasOwnProperty(I)&&"data"!==I&&!j(k[_][I],f[_][I]))return!1;return!0}function l(k,f,_,I,Y,V){let Q;for(Q in f=f||{},k=k||{})k.hasOwnProperty(Q)&&(j(k[Q],f[Q])||_.push({command:V,args:[I,Q,f[Q],Y]}));for(Q in f)f.hasOwnProperty(Q)&&!k.hasOwnProperty(Q)&&(j(k[Q],f[Q])||_.push({command:V,args:[I,Q,f[Q],Y]}))}function u(k){return k.id}function m(k,f){return k[f.id]=f,k}class x{constructor(f,_){this.reset(f,_)}reset(f,_){this.points=f||[],this._distances=[0];for(let I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(_||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(f){if(1===this.points.length)return this.points[0];f=t.clamp(f,0,1);let _=1,I=this._distances[_];const Y=f*this.paddedLength+this.padding;for(;I<Y&&_<this._distances.length;)I=this._distances[++_];const V=_-1,Q=this._distances[V],re=I-Q,de=re>0?(Y-Q)/re:0;return this.points[V].mult(1-de).add(this.points[_].mult(de))}}class w{constructor(f,_,I){const Y=this.boxCells=[],V=this.circleCells=[];this.xCellCount=Math.ceil(f/I),this.yCellCount=Math.ceil(_/I);for(let Q=0;Q<this.xCellCount*this.yCellCount;Q++)Y.push([]),V.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=f,this.height=_,this.xScale=this.xCellCount/f,this.yScale=this.yCellCount/_,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(f,_,I,Y,V){this._forEachCell(_,I,Y,V,this._insertBoxCell,this.boxUid++),this.boxKeys.push(f),this.bboxes.push(_),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(V)}insertCircle(f,_,I,Y){this._forEachCell(_-Y,I-Y,_+Y,I+Y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(f),this.circles.push(_),this.circles.push(I),this.circles.push(Y)}_insertBoxCell(f,_,I,Y,V,Q){this.boxCells[V].push(Q)}_insertCircleCell(f,_,I,Y,V,Q){this.circleCells[V].push(Q)}_query(f,_,I,Y,V,Q){if(I<0||f>this.width||Y<0||_>this.height)return!V&&[];const re=[];if(f<=0&&_<=0&&this.width<=I&&this.height<=Y){if(V)return!0;for(let de=0;de<this.boxKeys.length;de++)re.push({key:this.boxKeys[de],x1:this.bboxes[4*de],y1:this.bboxes[4*de+1],x2:this.bboxes[4*de+2],y2:this.bboxes[4*de+3]});for(let de=0;de<this.circleKeys.length;de++){const be=this.circles[3*de],xe=this.circles[3*de+1],Fe=this.circles[3*de+2];re.push({key:this.circleKeys[de],x1:be-Fe,y1:xe-Fe,x2:be+Fe,y2:xe+Fe})}return Q?re.filter(Q):re}return this._forEachCell(f,_,I,Y,this._queryCell,re,{hitTest:V,seenUids:{box:{},circle:{}}},Q),V?re.length>0:re}_queryCircle(f,_,I,Y,V){const Q=f-I,re=f+I,de=_-I,be=_+I;if(re<0||Q>this.width||be<0||de>this.height)return!Y&&[];const xe=[];return this._forEachCell(Q,de,re,be,this._queryCellCircle,xe,{hitTest:Y,circle:{x:f,y:_,radius:I},seenUids:{box:{},circle:{}}},V),Y?xe.length>0:xe}query(f,_,I,Y,V){return this._query(f,_,I,Y,!1,V)}hitTest(f,_,I,Y,V){return this._query(f,_,I,Y,!0,V)}hitTestCircle(f,_,I,Y){return this._queryCircle(f,_,I,!0,Y)}_queryCell(f,_,I,Y,V,Q,re,de){const be=re.seenUids,xe=this.boxCells[V];if(null!==xe){const it=this.bboxes;for(const ft of xe)if(!be.box[ft]){be.box[ft]=!0;const yt=4*ft;if(f<=it[yt+2]&&_<=it[yt+3]&&I>=it[yt+0]&&Y>=it[yt+1]&&(!de||de(this.boxKeys[ft]))){if(re.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[ft],x1:it[yt],y1:it[yt+1],x2:it[yt+2],y2:it[yt+3]})}}}const Fe=this.circleCells[V];if(null!==Fe){const it=this.circles;for(const ft of Fe)if(!be.circle[ft]){be.circle[ft]=!0;const yt=3*ft;if(this._circleAndRectCollide(it[yt],it[yt+1],it[yt+2],f,_,I,Y)&&(!de||de(this.circleKeys[ft]))){if(re.hitTest)return Q.push(!0),!0;{const bt=it[yt],Tt=it[yt+1],Ne=it[yt+2];Q.push({key:this.circleKeys[ft],x1:bt-Ne,y1:Tt-Ne,x2:bt+Ne,y2:Tt+Ne})}}}}}_queryCellCircle(f,_,I,Y,V,Q,re,de){const be=re.circle,xe=re.seenUids,Fe=this.boxCells[V];if(null!==Fe){const ft=this.bboxes;for(const yt of Fe)if(!xe.box[yt]){xe.box[yt]=!0;const bt=4*yt;if(this._circleAndRectCollide(be.x,be.y,be.radius,ft[bt+0],ft[bt+1],ft[bt+2],ft[bt+3])&&(!de||de(this.boxKeys[yt])))return Q.push(!0),!0}}const it=this.circleCells[V];if(null!==it){const ft=this.circles;for(const yt of it)if(!xe.circle[yt]){xe.circle[yt]=!0;const bt=3*yt;if(this._circlesCollide(ft[bt],ft[bt+1],ft[bt+2],be.x,be.y,be.radius)&&(!de||de(this.circleKeys[yt])))return Q.push(!0),!0}}}_forEachCell(f,_,I,Y,V,Q,re,de){const be=this._convertToXCellCoord(f),xe=this._convertToYCellCoord(_),Fe=this._convertToXCellCoord(I),it=this._convertToYCellCoord(Y);for(let ft=be;ft<=Fe;ft++)for(let yt=xe;yt<=it;yt++)if(V.call(this,f,_,I,Y,this.xCellCount*yt+ft,Q,re,de))return}_convertToXCellCoord(f){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(f*this.xScale)))}_convertToYCellCoord(f){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(f*this.yScale)))}_circlesCollide(f,_,I,Y,V,Q){const re=Y-f,de=V-_,be=I+Q;return be*be>re*re+de*de}_circleAndRectCollide(f,_,I,Y,V,Q,re){const de=(Q-Y)/2,be=Math.abs(f-(Y+de));if(be>de+I)return!1;const xe=(re-V)/2,Fe=Math.abs(_-(V+xe));if(Fe>xe+I)return!1;if(be<=de||Fe<=xe)return!0;const it=be-de,ft=Fe-xe;return it*it+ft*ft<=I*I}}const E={unknown:0,flipRequired:1,flipNotRequired:2},M=Math.tan(85*Math.PI/180);function N(k,f,_,I,Y,V,Q){const re=t.create();if(_)if("globe"===V.name){const de=t.calculateGlobeLabelMatrix(Y,f);t.multiply(re,re,de)}else{const de=Dt([],Q);re[0]=de[0],re[1]=de[1],re[4]=de[2],re[5]=de[3],I||t.rotateZ(re,re,Y.angle)}else t.multiply(re,Y.labelPlaneMatrix,k);return re}function H(k,f,_,I,Y,V,Q){const re=N(k,f,_,I,Y,V,Q);return"globe"===V.name&&_||(re[2]=re[6]=re[10]=re[14]=0),re}function Z(k,f,_,I,Y,V,Q){if(_){if("globe"===V.name){const re=N(k,f,_,I,Y,V,Q);return t.invert(re,re),t.multiply(re,k,re),re}{const re=t.clone(k),de=t.identity([]);return de[0]=Q[0],de[1]=Q[1],de[4]=Q[2],de[5]=Q[3],t.multiply(re,re,de),I||t.rotateZ(re,re,-Y.angle),re}}return Y.glCoordMatrix}function J(k,f,_,I){const Y=[k,f,_,1];_?t.transformMat4$1(Y,Y,I):Le(Y,Y,I);const V=Y[3];return Y[0]/=V,Y[1]/=V,Y[2]/=V,Y}function ne(k,f){return Math.min(.5+k/f*.5,1.5)}function fe(k,f){const _=k[0]/k[3],I=k[1]/k[3];return _>=-f[0]&&_<=f[0]&&I>=-f[1]&&I<=f[1]}function ye(k,f,_,I,Y,V,Q,re,de,be){const xe=_.transform,Fe=I?k.textSizeData:k.iconSizeData,it=t.evaluateSizeForZoom(Fe,_.transform.zoom),ft="globe"===xe.projection.name,yt=[256/_.width*2+1,256/_.height*2+1],bt=I?k.text.dynamicLayoutVertexArray:k.icon.dynamicLayoutVertexArray;bt.clear();let Tt=null;ft&&(Tt=I?k.text.globeExtVertexArray:k.icon.globeExtVertexArray);const Ne=k.lineVertexArray,_t=I?k.text.placedSymbolArray:k.icon.placedSymbolArray,zt=_.transform.width/_.transform.height;let Gt,pi=!1;for(let hi=0;hi<_t.length;hi++){const ri=_t.get(hi),{numGlyphs:Oi,writingMode:Ai}=ri;if(Ai!==t.WritingMode.vertical||pi||Gt===t.WritingMode.horizontal||(pi=!0),Gt=Ai,(ri.hidden||Ai===t.WritingMode.vertical)&&!pi){we(Oi,bt);continue}pi=!1;const Gi=new t.Point(ri.tileAnchorX,ri.tileAnchorY);let{x:Gn,y:Hi,z:un}=xe.projection.projectTilePoint(Gi.x,Gi.y,be.canonical);if(de){const[wa,Ir,ca]=de(Gi);Gn+=wa,Hi+=Ir,un+=ca}const ki=[Gn,Hi,un,1];if(t.transformMat4$1(ki,ki,f),!fe(ki,yt)){we(Oi,bt);continue}const An=ne(_.transform.cameraToCenterDistance,ki[3]),Ui=t.evaluateSizeForFeature(Fe,it,ri),cn=Q?Ui/An:Ui*An,bn=J(Gn,Hi,un,Y);if(bn[3]<=0){we(Oi,bt);continue}let Bn={};const Hn=Q?null:de,ea=Se(ri,cn,!1,re,f,Y,V,k.glyphOffsetArray,Ne,bt,Tt,bn,Gi,Bn,zt,Hn,xe.projection,be,Q);pi=ea.useVertical,Hn&&ea.needsFlipping&&(Bn={}),(ea.notEnoughRoom||pi||ea.needsFlipping&&Se(ri,cn,!0,re,f,Y,V,k.glyphOffsetArray,Ne,bt,Tt,bn,Gi,Bn,zt,Hn,xe.projection,be,Q).notEnoughRoom)&&we(Oi,bt)}I?(k.text.dynamicLayoutVertexBuffer.updateData(bt),Tt&&k.text.globeExtVertexBuffer.updateData(Tt)):(k.icon.dynamicLayoutVertexBuffer.updateData(bt),Tt&&k.icon.globeExtVertexBuffer.updateData(Tt))}function De(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt){const{lineStartIndex:Tt,glyphStartIndex:Ne,segment:_t}=re,zt=Ne+re.numGlyphs,Gt=Tt+re.lineLength,pi=f.getoffsetX(Ne),hi=f.getoffsetX(zt-1),ri=le(k*pi,_,I,Y,V,Q,_t,Tt,Gt,de,be,xe,Fe,it,!0,ft,yt,bt);if(!ri)return null;const Oi=le(k*hi,_,I,Y,V,Q,_t,Tt,Gt,de,be,xe,Fe,it,!0,ft,yt,bt);return Oi?{first:ri,last:Oi}:null}function Pe(k,f,_,I){return k===t.WritingMode.horizontal&&Math.abs(I)>Math.abs(_)?{useVertical:!0}:k===t.WritingMode.vertical?I>0?{needsFlipping:!0}:null:f!==E.unknown&&(0===(Y=_)||Math.abs(I/Y)>M)?f===E.flipRequired?{needsFlipping:!0}:null:_<0?{needsFlipping:!0}:null;var Y}function Se(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt,Tt,Ne,_t){const zt=f/24,Gt=k.lineOffsetX*zt,pi=k.lineOffsetY*zt,{lineStartIndex:hi,glyphStartIndex:ri,numGlyphs:Oi,segment:Ai,writingMode:Gi,flipState:Gn}=k,Hi=hi+k.lineLength,un=ki=>{if(xe){const[bn,Bn,Hn]=ki.up,ea=be.length;t.updateGlobeVertexNormal(xe,ea+0,bn,Bn,Hn),t.updateGlobeVertexNormal(xe,ea+1,bn,Bn,Hn),t.updateGlobeVertexNormal(xe,ea+2,bn,Bn,Hn),t.updateGlobeVertexNormal(xe,ea+3,bn,Bn,Hn)}const[An,Ui,cn]=ki.point;t.addDynamicAttributes(be,An,Ui,cn,ki.angle)};if(Oi>1){const ki=De(zt,re,Gt,pi,_,Fe,it,k,de,V,ft,bt,!1,Tt,Ne,_t);if(!ki)return{notEnoughRoom:!0};if(I&&!_){let[An,Ui,cn]=ki.first.point,[bn,Bn,Hn]=ki.last.point;[An,Ui]=J(An,Ui,cn,Q),[bn,Bn]=J(bn,Bn,Hn,Q);const ea=Pe(Gi,Gn,(bn-An)*yt,Bn-Ui);if(k.flipState=ea&&ea.needsFlipping?E.flipRequired:E.flipNotRequired,ea)return ea}un(ki.first);for(let An=ri+1;An<ri+Oi-1;An++){const Ui=le(zt*re.getoffsetX(An),Gt,pi,_,Fe,it,Ai,hi,Hi,de,V,ft,bt,!1,!1,Tt,Ne,_t);if(!Ui)return be.length-=4*(An-ri),{notEnoughRoom:!0};un(Ui)}un(ki.last)}else{if(I&&!_){const An=J(it.x,it.y,0,Y),Ui=hi+Ai+1,cn=new t.Point(de.getx(Ui),de.gety(Ui)),bn=J(cn.x,cn.y,0,Y),Bn=bn[3]>0?bn:U(it,cn,An,1,Y,void 0,Tt,Ne.canonical),Hn=Pe(Gi,Gn,(Bn[0]-An[0])*yt,Bn[1]-An[1]);if(k.flipState=Hn&&Hn.needsFlipping?E.flipRequired:E.flipNotRequired,Hn)return Hn}const ki=le(zt*re.getoffsetX(ri),Gt,pi,_,Fe,it,Ai,hi,Hi,de,V,ft,bt,!1,!1,Tt,Ne,_t);if(!ki)return{notEnoughRoom:!0};un(ki)}return{}}function ze(k,f,_,I,Y){const{x:V,y:Q,z:re}=I.projectTilePoint(k.x,k.y,f);if(!Y)return J(V,Q,re,_);const[de,be,xe]=Y(k);return J(V+de,Q+be,re+xe,_)}function U(k,f,_,I,Y,V,Q,re){const de=ze(k.sub(f)._unit()._add(k),re,Y,Q,V);return t.sub(de,_,de),t.normalize(de,de),t.scaleAndAdd(de,_,de,I)}function le(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt,Tt,Ne){const _t=I?k-f:k+f;let zt=_t>0?1:-1,Gt=0;I&&(zt*=-1,Gt=Math.PI),zt<0&&(Gt+=Math.PI);let pi=re+Q+(zt>0?0:1)|0,hi=Y,ri=Y,Oi=0,Ai=0;const Gi=Math.abs(_t),Gn=[],Hi=[];let un=V,ki=un;const An=()=>U(ki,un,ri,Gi-Oi+1,xe,it,bt,Tt.canonical);for(;Oi+Ai<=Gi;){if(pi+=zt,pi<re||pi>=de)return null;if(ri=hi,ki=un,Gn.push(ri),ft&&Hi.push(ki),un=new t.Point(be.getx(pi),be.gety(pi)),hi=Fe[pi],!hi){const ca=ze(un,Tt.canonical,xe,bt,it);hi=ca[3]>0?Fe[pi]=ca:An()}Oi+=Ai,Ai=t.distance(ri,hi)}yt&&it&&(Fe[pi]&&(hi=An(),Ai=t.distance(ri,hi)),Fe[pi]=hi);const Ui=(Gi-Oi)/Ai,cn=un.sub(ki)._mult(Ui)._add(ki),bn=t.sub([],hi,ri),Bn=t.scaleAndAdd([],ri,bn,Ui);let Hn=[0,0,1],ea=bn[0],wa=bn[1];if(Ne&&(Hn=bt.upVector(Tt.canonical,cn.x,cn.y),0!==Hn[0]||0!==Hn[1]||1!==Hn[2])){const ca=[Hn[2],0,-Hn[0]],Ua=t.cross([],Hn,ca);t.normalize(ca,ca),t.normalize(Ua,Ua),ea=t.dot(bn,ca),wa=t.dot(bn,Ua)}if(_){const ca=t.cross([],Hn,bn);t.normalize(ca,ca),t.scaleAndAdd(Bn,Bn,ca,_*zt)}const Ir=Gt+Math.atan2(wa,ea);return Gn.push(Bn),ft&&Hi.push(cn),{point:Bn,angle:Ir,path:Gn,tilePath:Hi,up:Hn}}function we(k,f){const _=f.length,I=_+4*k;f.resize(I),f.float32.fill(-1/0,4*_,4*I)}function Le(k,f,_){const I=f[0],Y=f[1];return k[0]=_[0]*I+_[4]*Y+_[12],k[1]=_[1]*I+_[5]*Y+_[13],k[3]=_[3]*I+_[7]*Y+_[15],k}const $e=100;class mt{constructor(f,_,I=new w(f.width+200,f.height+200,25),Y=new w(f.width+200,f.height+200,25)){this.transform=f,this.grid=I,this.ignoredGrid=Y,this.pitchfactor=Math.cos(f._pitch)*f.cameraToCenterDistance,this.screenRightBoundary=f.width+$e,this.screenBottomBoundary=f.height+$e,this.gridRightBoundary=f.width+200,this.gridBottomBoundary=f.height+200,this.fogState=_}placeCollisionBox(f,_,I,Y,V,Q,re,de){let be=I.projectedAnchorX,xe=I.projectedAnchorY,Fe=I.projectedAnchorZ;const it=I.elevation,ft=I.tileID,yt=f.getProjection();if(it&&ft){const[hi,ri,Oi]=yt.upVector(ft.canonical,I.tileAnchorX,I.tileAnchorY),Ai=yt.upVectorScale(ft.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;be+=hi*it*Ai,xe+=ri*it*Ai,Fe+=Oi*it*Ai}const bt=this.projectAndGetPerspectiveRatio(re,be,xe,Fe,I.tileID,"globe"===yt.name||!!it||this.transform.pitch>0,yt),Tt=Q*bt.perspectiveRatio,Ne=(I.x1*_+Y.x-I.padding)*Tt+bt.point.x,_t=(I.y1*_+Y.y-I.padding)*Tt+bt.point.y,zt=(I.x2*_+Y.x+I.padding)*Tt+bt.point.x,Gt=(I.y2*_+Y.y+I.padding)*Tt+bt.point.y,pi=bt.perspectiveRatio<=.55||bt.occluded;return!this.isInsideGrid(Ne,_t,zt,Gt)||!V&&this.grid.hitTest(Ne,_t,zt,Gt,de)||pi?{box:[],offscreen:!1,occluded:bt.occluded}:{box:[Ne,_t,zt,Gt],offscreen:this.isOffscreen(Ne,_t,zt,Gt),occluded:!1}}placeCollisionCircles(f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt){const Tt=[],Ne=this.transform.elevation,_t=f.getProjection(),zt=Ne?Ne.getAtTileOffsetFunc(bt,this.transform.center.lat,this.transform.worldSize,_t):null,Gt=new t.Point(I.tileAnchorX,I.tileAnchorY);let{x:pi,y:hi,z:ri}=_t.projectTilePoint(Gt.x,Gt.y,bt.canonical);if(zt){const[cn,bn,Bn]=zt(Gt);pi+=cn,hi+=bn,ri+=Bn}const Oi="globe"===_t.name,Ai=this.projectAndGetPerspectiveRatio(re,pi,hi,ri,bt,Oi||!!Ne||this.transform.pitch>0,_t),{perspectiveRatio:Gi}=Ai,Gn=(Fe?Q/Gi:Q*Gi)/t.ONE_EM,Hi=J(pi,hi,ri,de),un=Ai.signedDistanceFromCamera>0?De(Gn,V,I.lineOffsetX*Gn,I.lineOffsetY*Gn,!1,Hi,Gt,I,Y,de,{},Ne&&!Fe?zt:null,Fe&&!!Ne,_t,bt,Fe):null;let ki=!1,An=!1,Ui=!0;if(un&&!Ai.occluded){const cn=.5*ft*Gi+yt,bn=new t.Point(-100,-100),Bn=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Hn=new x,{first:ea,last:wa}=un,Ir=ea.path.length;let ca=[];for(let ta=Ir-1;ta>=1;ta--)ca.push(ea.path[ta]);for(let ta=1;ta<wa.path.length;ta++)ca.push(wa.path[ta]);const Ua=2.5*cn;be&&(ca=ca.map(([ta,ns,Xs],ro)=>(zt&&!Oi&&(Xs=zt(ro<Ir-1?ea.tilePath[Ir-1-ro]:wa.tilePath[ro-Ir+2])[2]),J(ta,ns,Xs,be))),ca.some(ta=>ta[3]<=0)&&(ca=[]));let qr=[];if(ca.length>0){let ta=1/0,ns=-1/0,Xs=1/0,ro=-1/0;for(const Vs of ca)ta=Math.min(ta,Vs[0]),Xs=Math.min(Xs,Vs[1]),ns=Math.max(ns,Vs[0]),ro=Math.max(ro,Vs[1]);ns>=bn.x&&ta<=Bn.x&&ro>=bn.y&&Xs<=Bn.y&&(qr=[ca.map(Vs=>new t.Point(Vs[0],Vs[1]))],(ta<bn.x||ns>Bn.x||Xs<bn.y||ro>Bn.y)&&(qr=t.clipLine(qr,bn.x,bn.y,Bn.x,Bn.y)))}for(const ta of qr){Hn.reset(ta,.25*cn);let ns=0;ns=Hn.length<=.5*cn?1:Math.ceil(Hn.paddedLength/Ua)+1;for(let Xs=0;Xs<ns;Xs++){const ro=Xs/Math.max(ns-1,1),Vs=Hn.lerp(ro),Ec=Vs.x+$e,vl=Vs.y+$e;Tt.push(Ec,vl,cn,0);const Uc=Ec-cn,Nu=vl-cn,Do=Ec+cn,Ds=vl+cn;if(Ui=Ui&&this.isOffscreen(Uc,Nu,Do,Ds),An=An||this.isInsideGrid(Uc,Nu,Do,Ds),!_&&this.grid.hitTestCircle(Ec,vl,cn,it)&&(ki=!0,!xe))return{circles:[],offscreen:!1,collisionDetected:ki,occluded:!1}}}}return{circles:!xe&&ki||!An?[]:Tt,offscreen:Ui,collisionDetected:ki,occluded:Ai.occluded}}queryRenderedSymbols(f){if(0===f.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const _=[];let I=1/0,Y=1/0,V=-1/0,Q=-1/0;for(const xe of f){const Fe=new t.Point(xe.x+$e,xe.y+$e);I=Math.min(I,Fe.x),Y=Math.min(Y,Fe.y),V=Math.max(V,Fe.x),Q=Math.max(Q,Fe.y),_.push(Fe)}const re=this.grid.query(I,Y,V,Q).concat(this.ignoredGrid.query(I,Y,V,Q)),de={},be={};for(const xe of re){const Fe=xe.key;if(void 0===de[Fe.bucketInstanceId]&&(de[Fe.bucketInstanceId]={}),de[Fe.bucketInstanceId][Fe.featureIndex])continue;const it=[new t.Point(xe.x1,xe.y1),new t.Point(xe.x2,xe.y1),new t.Point(xe.x2,xe.y2),new t.Point(xe.x1,xe.y2)];t.polygonIntersectsPolygon(_,it)&&(de[Fe.bucketInstanceId][Fe.featureIndex]=!0,void 0===be[Fe.bucketInstanceId]&&(be[Fe.bucketInstanceId]=[]),be[Fe.bucketInstanceId].push(Fe.featureIndex))}return be}insertCollisionBox(f,_,I,Y,V){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:Y,collisionGroupID:V},f[0],f[1],f[2],f[3])}insertCollisionCircles(f,_,I,Y,V){const Q=_?this.ignoredGrid:this.grid,re={bucketInstanceId:I,featureIndex:Y,collisionGroupID:V};for(let de=0;de<f.length;de+=4)Q.insertCircle(re,f[de],f[de+1],f[de+2])}projectAndGetPerspectiveRatio(f,_,I,Y,V,Q,re){const de=[_,I,Y,1];let be=!1;Y||this.transform.pitch>0?(t.transformMat4$1(de,de,f),this.fogState&&V&&"globe"!==re.name&&(be=function(it,ft,yt,bt,Tt,Ne){const _t=Ne.calculateFogTileMatrix(Tt),zt=[ft,yt,bt];return t.transformMat4(zt,zt,_t),Zi(it,zt,Ne.pitch,Ne._fov)}(this.fogState,_,I,Y,V.toUnwrapped(),this.transform)>.9)):Le(de,de,f);const xe=de[3];return{point:new t.Point((de[0]/xe+1)/2*this.transform.width+$e,(-de[1]/xe+1)/2*this.transform.height+$e),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(re)/xe*.5,1.5),signedDistanceFromCamera:xe,occluded:Q&&de[2]>xe||be}}isOffscreen(f,_,I,Y){return I<$e||f>=this.screenRightBoundary||Y<$e||_>this.screenBottomBoundary}isInsideGrid(f,_,I,Y){return I>=0&&f<this.gridRightBoundary&&Y>=0&&_<this.gridBottomBoundary}getViewportMatrix(){const f=t.identity([]);return t.translate(f,f,[-100,-100,0]),f}}function $t(k,f,_){const I=f.createTileMatrix(k,k.worldSize,_.toUnwrapped());return t.multiply(new Float32Array(16),k.projMatrix,I)}function Xt(k,f,_){if(f.projection.name===_.projection.name)return k.projMatrix;const I=_.clone();return I.setProjection(f.projection),$t(I,f.getProjection(),k)}function Li(k,f,_){return f.name===_.projection.name?k.projMatrix:$t(_,f,k)}class Ji{constructor(f,_,I,Y){this.opacity=f?Math.max(0,Math.min(1,f.opacity+(f.placed?_:-_))):Y&&I?1:0,this.placed=I}isHidden(){return 0===this.opacity&&!this.placed}}class ln{constructor(f,_,I,Y,V,Q=!1){this.text=new Ji(f?f.text:null,_,I,V),this.icon=new Ji(f?f.icon:null,_,Y,V),this.clipped=Q}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Un{constructor(f,_,I,Y=!1){this.text=f,this.icon=_,this.skipFade=I,this.clipped=Y}}class cr{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Wr{constructor(f,_,I,Y,V){this.bucketInstanceId=f,this.featureIndex=_,this.sourceLayerIndex=I,this.bucketIndex=Y,this.tileID=V}}class pa{constructor(f){this.crossSourceCollisions=f,this.maxGroupID=0,this.collisionGroups={}}get(f){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[f]){const _=++this.maxGroupID;this.collisionGroups[f]={ID:_,predicate:I=>I.collisionGroupID===_}}return this.collisionGroups[f]}}function la(k,f,_,I,Y){const{horizontalAlign:V,verticalAlign:Q}=t.getAnchorAlignment(k),re=-(V-.5)*f,de=-(Q-.5)*_,be=t.evaluateVariableOffset(k,I);return new t.Point(re+be[0]*Y,de+be[1]*Y)}function Ta(k,f,_,I,Y){const V=new t.Point(k,f);return _&&V._rotate(I?Y:-Y),V}class es{constructor(f,_,I,Y,V){this.transform=f.clone(),this.projection=f.projection.name,this.collisionIndex=new mt(this.transform,V),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new pa(I),this.collisionCircleArrays={},this.prevPlacement=Y,Y&&(Y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(f,_,I,Y){const V=I.getBucket(_),Q=I.latestFeatureIndex;if(!V||!Q||_.id!==V.layerIds[0])return;const re=V.layers[0].layout,de=I.collisionBoxArray,be=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),xe=I.tileSize/t.EXTENT,Fe=I.tileID.toUnwrapped();this.transform.setProjection(V.projection);const it=(ft=I.tileID,yt=V.getProjection(),bt=this.transform,yt.name===this.projection?bt.calculateProjMatrix(ft.toUnwrapped()):$t(bt,yt,ft));var ft,yt,bt;const Tt="map"===re.get("text-pitch-alignment"),Ne="map"===re.get("text-rotation-alignment");_.compileFilter();const _t=_.dynamicFilter(),zt=_.dynamicFilterNeedsFeature(),Gt=this.transform.calculatePixelsToTileUnitsMatrix(I),pi=H(it,I.tileID.canonical,Tt,Ne,this.transform,V.getProjection(),Gt);let hi=null;if(Tt){const Ai=Z(it,I.tileID.canonical,Tt,Ne,this.transform,V.getProjection(),Gt);hi=t.multiply([],this.transform.labelPlaneMatrix,Ai)}let ri=null;_t&&I.latestFeatureIndex&&(ri={unwrappedTileID:Fe,dynamicFilter:_t,dynamicFilterNeedsFeature:zt,featureIndex:I.latestFeatureIndex}),this.retainedQueryData[V.bucketInstanceId]=new Wr(V.bucketInstanceId,Q,V.sourceLayerIndex,V.index,I.tileID);const Oi={bucket:V,layout:re,posMatrix:it,textLabelPlaneMatrix:pi,labelToScreenMatrix:hi,clippingData:ri,scale:be,textPixelRatio:xe,holdingForFade:I.holdingForFade(),collisionBoxArray:de,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(V.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(V.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(V.sourceID)};if(Y)for(const Ai of V.sortKeyRanges){const{sortKey:Gi,symbolInstanceStart:Gn,symbolInstanceEnd:Hi}=Ai;f.push({sortKey:Gi,symbolInstanceStart:Gn,symbolInstanceEnd:Hi,parameters:Oi})}else f.push({symbolInstanceStart:0,symbolInstanceEnd:V.symbolInstances.length,parameters:Oi})}attemptAnchorPlacement(f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt,Tt,Ne,_t){const{textOffset0:zt,textOffset1:Gt,crossTileID:pi}=it,hi=[zt,Gt],ri=la(f,I,Y,hi,V),Oi=this.collisionIndex.placeCollisionBox(yt,V,_,Ta(ri.x,ri.y,Q,re,this.transform.angle),Fe,de,be,xe.predicate);if(Tt){const Ai=yt.getSymbolInstanceIconSize(_t,this.transform.zoom,it.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(yt,Ai,Tt,Ta(ri.x,ri.y,Q,re,this.transform.angle),Fe,de,be,xe.predicate).box.length)return}if(Oi.box.length>0){let Ai;return this.prevPlacement&&this.prevPlacement.variableOffsets[pi]&&this.prevPlacement.placements[pi]&&this.prevPlacement.placements[pi].text&&(Ai=this.prevPlacement.variableOffsets[pi].anchor),this.variableOffsets[pi]={textOffset:hi,width:I,height:Y,anchor:f,textScale:V,prevAnchor:Ai},this.markUsedJustification(yt,f,it,bt),yt.allowVerticalPlacement&&(this.markUsedOrientation(yt,bt,it),this.placedOrientations[pi]=bt),{shift:ri,placedGlyphBoxes:Oi}}}placeLayerBucketPart(f,_,I,Y){const{bucket:V,layout:Q,posMatrix:re,textLabelPlaneMatrix:de,labelToScreenMatrix:be,clippingData:xe,textPixelRatio:Fe,holdingForFade:it,collisionBoxArray:ft,partiallyEvaluatedTextSize:yt,partiallyEvaluatedIconSize:bt,collisionGroup:Tt}=f.parameters,Ne=Q.get("text-optional"),_t=Q.get("icon-optional"),zt=Q.get("text-allow-overlap"),Gt=Q.get("icon-allow-overlap"),pi="map"===Q.get("text-rotation-alignment"),hi="map"===Q.get("text-pitch-alignment"),ri="none"!==Q.get("icon-text-fit"),Oi="viewport-y"===Q.get("symbol-z-order");this.transform.setProjection(V.projection);let Ai=zt&&(Gt||!V.hasIconData()||_t),Gi=Gt&&(zt||!V.hasTextData()||Ne);!V.collisionArrays&&ft&&V.deserializeCollisionBoxes(ft),I&&Y&&V.updateCollisionDebugBuffers(this.transform.zoom,ft);const Gn=(Hi,un,ki)=>{const{crossTileID:An,numVerticalGlyphVertices:Ui}=Hi;if(xe){const Do={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ds=null;if(xe.dynamicFilterNeedsFeature){const Ls=this.retainedQueryData[V.bucketInstanceId];Ds=xe.featureIndex.loadFeature({featureIndex:Hi.featureIndex,bucketIndex:Ls.bucketIndex,sourceLayerIndex:Ls.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,xe.dynamicFilter)(Do,Ds,this.retainedQueryData[V.bucketInstanceId].tileID.canonical,new t.Point(Hi.tileAnchorX,Hi.tileAnchorY),this.transform.calculateDistanceTileData(xe.unwrappedTileID)))return this.placements[An]=new Un(!1,!1,!1,!0),void _.add(An)}if(_.has(An))return;if(it)return void(this.placements[An]=new Un(!1,!1,!1));let cn=!1,bn=!1,Bn=!0,Hn=!1,ea=!1,wa=null,Ir={box:null,offscreen:null,occluded:null},ca={box:null,offscreen:null,occluded:null},Ua=null,qr=null,ta=null,ns=0,Xs=0,ro=0;ki.textFeatureIndex?ns=ki.textFeatureIndex:Hi.useRuntimeCollisionCircles&&(ns=Hi.featureIndex),ki.verticalTextFeatureIndex&&(Xs=ki.verticalTextFeatureIndex);const Vs=Do=>{Do.tileID=this.retainedQueryData[V.bucketInstanceId].tileID;const Ds=this.transform.elevation;(Ds||Do.elevation)&&(Do.elevation=Ds?Ds.getAtTileOffset(Do.tileID,Do.tileAnchorX,Do.tileAnchorY):0)},Ec=ki.textBox;if(Ec){Vs(Ec);const Do=Ls=>{let fo=t.WritingMode.horizontal;if(V.allowVerticalPlacement&&!Ls&&this.prevPlacement){const lc=this.prevPlacement.placedOrientations[An];lc&&(this.placedOrientations[An]=lc,fo=lc,this.markUsedOrientation(V,fo,Hi))}return fo},Ds=(Ls,fo)=>{if(V.allowVerticalPlacement&&Ui>0&&ki.verticalTextBox){for(const lc of V.writingModes)if(lc===t.WritingMode.vertical?(Ir=fo(),ca=Ir):Ir=Ls(),Ir&&Ir.box&&Ir.box.length)break}else Ir=Ls()};if(Q.get("text-variable-anchor")){let Ls=Q.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[An]){const po=this.prevPlacement.variableOffsets[An];Ls.indexOf(po.anchor)>0&&(Ls=Ls.filter(vu=>vu!==po.anchor),Ls.unshift(po.anchor))}const fo=(po,vu,Sh)=>{const iu=V.getSymbolInstanceTextSize(yt,Hi,this.transform.zoom,un),_d=(po.x2-po.x1)*iu+2*po.padding,od=(po.y2-po.y1)*iu+2*po.padding,yd=ri&&!Gt?vu:null;yd&&Vs(yd);let xd={box:[],offscreen:!1,occluded:!1};const Dh=zt?2*Ls.length:Ls.length;for(let th=0;th<Dh;++th){const $h=this.attemptAnchorPlacement(Ls[th%Ls.length],po,_d,od,iu,pi,hi,Fe,re,Tt,th>=Ls.length,Hi,un,V,Sh,yd,yt,bt);if($h&&(xd=$h.placedGlyphBoxes,xd&&xd.box&&xd.box.length)){cn=!0,wa=$h.shift;break}}return xd};Ds(()=>fo(Ec,ki.iconBox,t.WritingMode.horizontal),()=>{const po=ki.verticalTextBox;return po&&Vs(po),V.allowVerticalPlacement&&!(Ir&&Ir.box&&Ir.box.length)&&Ui>0&&po?fo(po,ki.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ir&&(cn=Ir.box,Bn=Ir.offscreen,Hn=Ir.occluded);const lc=Do(!(!Ir||!Ir.box));if(!cn&&this.prevPlacement){const po=this.prevPlacement.variableOffsets[An];po&&(this.variableOffsets[An]=po,this.markUsedJustification(V,po.anchor,Hi,lc))}}else{const Ls=(fo,lc)=>{const po=V.getSymbolInstanceTextSize(yt,Hi,this.transform.zoom,un),vu=this.collisionIndex.placeCollisionBox(V,po,fo,new t.Point(0,0),zt,Fe,re,Tt.predicate);return vu&&vu.box&&vu.box.length&&(this.markUsedOrientation(V,lc,Hi),this.placedOrientations[An]=lc),vu};Ds(()=>Ls(Ec,t.WritingMode.horizontal),()=>{const fo=ki.verticalTextBox;return V.allowVerticalPlacement&&Ui>0&&fo?(Vs(fo),Ls(fo,t.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Do(!!(Ir&&Ir.box&&Ir.box.length))}}if(Ua=Ir,cn=Ua&&Ua.box&&Ua.box.length>0,Bn=Ua&&Ua.offscreen,Hn=Ua&&Ua.occluded,Hi.useRuntimeCollisionCircles){const Do=V.text.placedSymbolArray.get(Hi.centerJustifiedTextSymbolIndex>=0?Hi.centerJustifiedTextSymbolIndex:Hi.verticalPlacedTextSymbolIndex),Ds=t.evaluateSizeForFeature(V.textSizeData,yt,Do),Ls=Q.get("text-padding");qr=this.collisionIndex.placeCollisionCircles(V,zt,Do,V.lineVertexArray,V.glyphOffsetArray,Ds,re,de,be,I,hi,Tt.predicate,Hi.collisionCircleDiameter*Ds/t.ONE_EM,Ls,this.retainedQueryData[V.bucketInstanceId].tileID),cn=zt||qr.circles.length>0&&!qr.collisionDetected,Bn=Bn&&qr.offscreen,Hn=qr.occluded}if(ki.iconFeatureIndex&&(ro=ki.iconFeatureIndex),ki.iconBox){const Do=Ds=>{Vs(Ds);const Ls=ri&&wa?Ta(wa.x,wa.y,pi,hi,this.transform.angle):new t.Point(0,0),fo=V.getSymbolInstanceIconSize(bt,this.transform.zoom,Hi.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(V,fo,Ds,Ls,Gt,Fe,re,Tt.predicate)};ca&&ca.box&&ca.box.length&&ki.verticalIconBox?(ta=Do(ki.verticalIconBox),bn=ta.box.length>0):(ta=Do(ki.iconBox),bn=ta.box.length>0),Bn=Bn&&ta.offscreen,ea=ta.occluded}const vl=Ne||0===Hi.numHorizontalGlyphVertices&&0===Ui,Uc=_t||0===Hi.numIconVertices;if(vl||Uc?Uc?vl||(bn=bn&&cn):cn=bn&&cn:bn=cn=bn&&cn,cn&&Ua&&Ua.box&&this.collisionIndex.insertCollisionBox(Ua.box,Q.get("text-ignore-placement"),V.bucketInstanceId,ca&&ca.box&&Xs?Xs:ns,Tt.ID),bn&&ta&&this.collisionIndex.insertCollisionBox(ta.box,Q.get("icon-ignore-placement"),V.bucketInstanceId,ro,Tt.ID),qr&&(cn&&this.collisionIndex.insertCollisionCircles(qr.circles,Q.get("text-ignore-placement"),V.bucketInstanceId,ns,Tt.ID),I)){const Do=V.bucketInstanceId;let Ds=this.collisionCircleArrays[Do];void 0===Ds&&(Ds=this.collisionCircleArrays[Do]=new cr);for(let Ls=0;Ls<qr.circles.length;Ls+=4)Ds.circles.push(qr.circles[Ls+0]),Ds.circles.push(qr.circles[Ls+1]),Ds.circles.push(qr.circles[Ls+2]),Ds.circles.push(qr.collisionDetected?1:0)}const Nu="globe"!==V.projection.name;Ai=Ai&&(Nu||!Hn),Gi=Gi&&(Nu||!ea),this.placements[An]=new Un(cn||Ai,bn||Gi,Bn||V.justReloaded),_.add(An)};if(Oi){const Hi=V.getSortedSymbolIndexes(this.transform.angle);for(let un=Hi.length-1;un>=0;--un){const ki=Hi[un];Gn(V.symbolInstances.get(ki),ki,V.collisionArrays[ki])}}else for(let Hi=f.symbolInstanceStart;Hi<f.symbolInstanceEnd;Hi++)Gn(V.symbolInstances.get(Hi),Hi,V.collisionArrays[Hi]);if(I&&V.bucketInstanceId in this.collisionCircleArrays){const Hi=this.collisionCircleArrays[V.bucketInstanceId];t.invert(Hi.invProjMatrix,re),Hi.viewportMatrix=this.collisionIndex.getViewportMatrix()}V.justReloaded=!1}markUsedJustification(f,_,I,Y){const{leftJustifiedTextSymbolIndex:V,centerJustifiedTextSymbolIndex:Q,rightJustifiedTextSymbolIndex:re,verticalPlacedTextSymbolIndex:de,crossTileID:be}=I,xe=t.getAnchorJustification(_),Fe=Y===t.WritingMode.vertical?de:"left"===xe?V:"center"===xe?Q:"right"===xe?re:-1;V>=0&&(f.text.placedSymbolArray.get(V).crossTileID=Fe>=0&&V!==Fe?0:be),Q>=0&&(f.text.placedSymbolArray.get(Q).crossTileID=Fe>=0&&Q!==Fe?0:be),re>=0&&(f.text.placedSymbolArray.get(re).crossTileID=Fe>=0&&re!==Fe?0:be),de>=0&&(f.text.placedSymbolArray.get(de).crossTileID=Fe>=0&&de!==Fe?0:be)}markUsedOrientation(f,_,I){const Y=_===t.WritingMode.horizontal||_===t.WritingMode.horizontalOnly?_:0,V=_===t.WritingMode.vertical?_:0,{leftJustifiedTextSymbolIndex:Q,centerJustifiedTextSymbolIndex:re,rightJustifiedTextSymbolIndex:de,verticalPlacedTextSymbolIndex:be}=I,xe=f.text.placedSymbolArray;Q>=0&&(xe.get(Q).placedOrientation=Y),re>=0&&(xe.get(re).placedOrientation=Y),de>=0&&(xe.get(de).placedOrientation=Y),be>=0&&(xe.get(be).placedOrientation=V)}commit(f){this.commitTime=f,this.zoomAtLastRecencyCheck=this.transform.zoom;const _=this.prevPlacement;let I=!1;this.prevZoomAdjustment=_?_.zoomAdjustment(this.transform.zoom):0;const Y=_?_.symbolFadeChange(f):1,V=_?_.opacities:{},Q=_?_.variableOffsets:{},re=_?_.placedOrientations:{};for(const de in this.placements){const be=this.placements[de],xe=V[de];xe?(this.opacities[de]=new ln(xe,Y,be.text,be.icon,null,be.clipped),I=I||be.text!==xe.text.placed||be.icon!==xe.icon.placed):(this.opacities[de]=new ln(null,Y,be.text,be.icon,be.skipFade,be.clipped),I=I||be.text||be.icon)}for(const de in V){const be=V[de];if(!this.opacities[de]){const xe=new ln(be,Y,!1,!1);xe.isHidden()||(this.opacities[de]=xe,I=I||be.text.placed||be.icon.placed)}}for(const de in Q)this.variableOffsets[de]||!this.opacities[de]||this.opacities[de].isHidden()||(this.variableOffsets[de]=Q[de]);for(const de in re)this.placedOrientations[de]||!this.opacities[de]||this.opacities[de].isHidden()||(this.placedOrientations[de]=re[de]);I?this.lastPlacementChangeTime=f:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=_?_.lastPlacementChangeTime:f)}updateLayerOpacities(f,_){const I=new Set;for(const Y of _){const V=Y.getBucket(f);V&&Y.latestFeatureIndex&&f.id===V.layerIds[0]&&this.updateBucketOpacities(V,I,Y.collisionBoxArray)}}updateBucketOpacities(f,_,I){f.hasTextData()&&f.text.opacityVertexArray.clear(),f.hasIconData()&&f.icon.opacityVertexArray.clear(),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexArray.clear(),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexArray.clear();const Y=f.layers[0].layout,V=!!f.layers[0].dynamicFilter(),Q=new ln(null,0,!1,!1,!0),re=Y.get("text-allow-overlap"),de=Y.get("icon-allow-overlap"),be=Y.get("text-variable-anchor"),xe="map"===Y.get("text-rotation-alignment"),Fe="map"===Y.get("text-pitch-alignment"),it="none"!==Y.get("icon-text-fit"),ft=new ln(null,0,re&&(de||!f.hasIconData()||Y.get("icon-optional")),de&&(re||!f.hasTextData()||Y.get("text-optional")),!0);!f.collisionArrays&&I&&(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData())&&f.deserializeCollisionBoxes(I);const yt=(Tt,Ne,_t)=>{for(let zt=0;zt<Ne/4;zt++)Tt.opacityVertexArray.emplaceBack(_t)};let bt=0;for(let Tt=0;Tt<f.symbolInstances.length;Tt++){const Ne=f.symbolInstances.get(Tt),{numHorizontalGlyphVertices:_t,numVerticalGlyphVertices:zt,crossTileID:Gt,numIconVertices:pi}=Ne,hi=_.has(Gt);let ri=this.opacities[Gt];hi?ri=Q:ri||(ri=ft,this.opacities[Gt]=ri),_.add(Gt);const Oi=_t>0||zt>0,Ai=pi>0,Gi=this.placedOrientations[Gt],Gn=Gi===t.WritingMode.vertical,Hi=Gi===t.WritingMode.horizontal||Gi===t.WritingMode.horizontalOnly;if(!Oi&&!Ai||ri.isHidden()||bt++,Oi){const un=Pc(ri.text);yt(f.text,_t,Gn?Ws:un),yt(f.text,zt,Hi?Ws:un);const ki=ri.text.isHidden(),{leftJustifiedTextSymbolIndex:An,centerJustifiedTextSymbolIndex:Ui,rightJustifiedTextSymbolIndex:cn,verticalPlacedTextSymbolIndex:bn}=Ne,Bn=f.text.placedSymbolArray,Hn=ki||Gn?1:0;An>=0&&(Bn.get(An).hidden=Hn),Ui>=0&&(Bn.get(Ui).hidden=Hn),cn>=0&&(Bn.get(cn).hidden=Hn),bn>=0&&(Bn.get(bn).hidden=ki||Hi?1:0);const ea=this.variableOffsets[Gt];ea&&this.markUsedJustification(f,ea.anchor,Ne,Gi);const wa=this.placedOrientations[Gt];wa&&(this.markUsedJustification(f,"left",Ne,wa),this.markUsedOrientation(f,wa,Ne))}if(Ai){const un=Pc(ri.icon),{placedIconSymbolIndex:ki,verticalPlacedIconSymbolIndex:An}=Ne,Ui=f.icon.placedSymbolArray,cn=ri.icon.isHidden()?1:0;ki>=0&&(yt(f.icon,pi,Gn?Ws:un),Ui.get(ki).hidden=cn),An>=0&&(yt(f.icon,Ne.numVerticalIconVertices,Hi?Ws:un),Ui.get(An).hidden=cn)}if(f.hasIconCollisionBoxData()||f.hasTextCollisionBoxData()){const un=f.collisionArrays[Tt];if(un){let ki=new t.Point(0,0),An=!0;if(un.textBox||un.verticalTextBox){if(be){const cn=this.variableOffsets[Gt];cn?(ki=la(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textScale),xe&&ki._rotate(Fe?this.transform.angle:-this.transform.angle)):An=!1}V&&(An=!ri.clipped),un.textBox&&ms(f.textCollisionBox.collisionVertexArray,ri.text.placed,!An||Gn,ki.x,ki.y),un.verticalTextBox&&ms(f.textCollisionBox.collisionVertexArray,ri.text.placed,!An||Hi,ki.x,ki.y)}const Ui=An&&!(Hi||!un.verticalIconBox);un.iconBox&&ms(f.iconCollisionBox.collisionVertexArray,ri.icon.placed,Ui,it?ki.x:0,it?ki.y:0),un.verticalIconBox&&ms(f.iconCollisionBox.collisionVertexArray,ri.icon.placed,!Ui,it?ki.x:0,it?ki.y:0)}}}if(f.fullyClipped=0===bt,f.sortFeatures(this.transform.angle),this.retainedQueryData[f.bucketInstanceId]&&(this.retainedQueryData[f.bucketInstanceId].featureSortOrder=f.featureSortOrder),f.hasTextData()&&f.text.opacityVertexBuffer&&f.text.opacityVertexBuffer.updateData(f.text.opacityVertexArray),f.hasIconData()&&f.icon.opacityVertexBuffer&&f.icon.opacityVertexBuffer.updateData(f.icon.opacityVertexArray),f.hasIconCollisionBoxData()&&f.iconCollisionBox.collisionVertexBuffer&&f.iconCollisionBox.collisionVertexBuffer.updateData(f.iconCollisionBox.collisionVertexArray),f.hasTextCollisionBoxData()&&f.textCollisionBox.collisionVertexBuffer&&f.textCollisionBox.collisionVertexBuffer.updateData(f.textCollisionBox.collisionVertexArray),f.bucketInstanceId in this.collisionCircleArrays){const Tt=this.collisionCircleArrays[f.bucketInstanceId];f.placementInvProjMatrix=Tt.invProjMatrix,f.placementViewportMatrix=Tt.viewportMatrix,f.collisionCircleArray=Tt.circles,delete this.collisionCircleArrays[f.bucketInstanceId]}}symbolFadeChange(f){return 0===this.fadeDuration?1:(f-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(f){return Math.max(0,(this.transform.zoom-f)/1.5)}hasTransitions(f){return this.stale||f-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(f,_){const I=this.zoomAtLastRecencyCheck===_?1-this.zoomAdjustment(_):1;return this.zoomAtLastRecencyCheck=_,this.commitTime+this.fadeDuration*I>f}setStale(){this.stale=!0}}function ms(k,f,_,I,Y){k.emplaceBack(f?1:0,_?1:0,I||0,Y||0),k.emplaceBack(f?1:0,_?1:0,I||0,Y||0),k.emplaceBack(f?1:0,_?1:0,I||0,Y||0),k.emplaceBack(f?1:0,_?1:0,I||0,Y||0)}const Is=Math.pow(2,25),va=Math.pow(2,24),Qr=Math.pow(2,17),Ms=Math.pow(2,16),na=Math.pow(2,9),Ns=Math.pow(2,8),Ku=Math.pow(2,1);function Pc(k){if(0===k.opacity&&!k.placed)return 0;if(1===k.opacity&&k.placed)return 4294967295;const f=k.placed?1:0,_=Math.floor(127*k.opacity);return _*Is+f*va+_*Qr+f*Ms+_*na+f*Ns+_*Ku+f}const Ws=0;class xc{constructor(f){this._sortAcrossTiles="viewport-y"!==f.layout.get("symbol-z-order")&&void 0!==f.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(f,_,I,Y,V){const Q=this._bucketParts;for(;this._currentTileIndex<f.length;)if(_.getBucketParts(Q,Y,f[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,V())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort((re,de)=>re.sortKey-de.sortKey));this._currentPartIndex<Q.length;){const re=Q[this._currentPartIndex];if(_.placeLayerBucketPart(re,this._seenCrossTileIDs,I,0===re.symbolInstanceStart),this._currentPartIndex++,V())return!0}return!1}}class Rd{constructor(f,_,I,Y,V,Q,re,de){this.placement=new es(f,V,Q,re,de),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=Y,this._done=!1}isDone(){return this._done}continuePlacement(f,_,I){const Y=t.exported.now(),V=()=>{const Q=t.exported.now()-Y;return!this._forceFullPlacement&&Q>2};for(;this._currentPlacementIndex>=0;){const Q=_[f[this._currentPlacementIndex]],re=this.placement.collisionIndex.transform.zoom;if("symbol"===Q.type&&(!Q.minzoom||Q.minzoom<=re)&&(!Q.maxzoom||Q.maxzoom>re)){if(this._inProgressLayer||(this._inProgressLayer=new xc(Q)),this._inProgressLayer.continuePlacement(I[Q.source],this.placement,this._showCollisionBoxes,Q,V))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(f){return this.placement.commit(f),this.placement}}const $r=512/t.EXTENT/2;class fs{constructor(f,_,I){this.tileID=f,this.bucketInstanceId=I,this.index=new t.KDBush(_.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const Y=f.canonical.x*t.EXTENT,V=f.canonical.y*t.EXTENT;for(let Q=0;Q<_.length;Q++){const{key:re,crossTileID:de,tileAnchorX:be,tileAnchorY:xe}=_.get(Q),Fe=Math.floor((Y+be)*$r),it=Math.floor((V+xe)*$r);this.index.add(Fe,it),this.keys.push(re),this.crossTileIDs.push(de)}this.index.finish()}findMatches(f,_,I){const Y=this.tileID.canonical.z<_.canonical.z?1:Math.pow(2,this.tileID.canonical.z-_.canonical.z),V=$r/Math.pow(2,_.canonical.z-this.tileID.canonical.z),Q=_.canonical.x*t.EXTENT,re=_.canonical.y*t.EXTENT;for(let de=0;de<f.length;de++){const be=f.get(de);if(be.crossTileID)continue;const{key:xe,tileAnchorX:Fe,tileAnchorY:it}=be,ft=Math.floor((Q+Fe)*V),yt=Math.floor((re+it)*V),bt=this.index.range(ft-Y,yt-Y,ft+Y,yt+Y);for(const Tt of bt){const Ne=this.crossTileIDs[Tt];if(this.keys[Tt]===xe&&!I.has(Ne)){I.add(Ne),be.crossTileID=Ne;break}}}}}class Rl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(f){const _=Math.round((f-this.lng)/360);if(0!==_)for(const I in this.indexes){const Y=this.indexes[I],V={};for(const Q in Y){const re=Y[Q];re.tileID=re.tileID.unwrapTo(re.tileID.wrap+_),V[re.tileID.key]=re}this.indexes[I]=V}this.lng=f}addBucket(f,_,I){if(this.indexes[f.overscaledZ]&&this.indexes[f.overscaledZ][f.key]){if(this.indexes[f.overscaledZ][f.key].bucketInstanceId===_.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(f.overscaledZ,this.indexes[f.overscaledZ][f.key])}for(let V=0;V<_.symbolInstances.length;V++)_.symbolInstances.get(V).crossTileID=0;this.usedCrossTileIDs[f.overscaledZ]||(this.usedCrossTileIDs[f.overscaledZ]=new Set);const Y=this.usedCrossTileIDs[f.overscaledZ];for(const V in this.indexes){const Q=this.indexes[V];if(Number(V)>f.overscaledZ)for(const re in Q){const de=Q[re];de.tileID.isChildOf(f)&&de.findMatches(_.symbolInstances,f,Y)}else{const re=Q[f.scaledTo(Number(V)).key];re&&re.findMatches(_.symbolInstances,f,Y)}}for(let V=0;V<_.symbolInstances.length;V++){const Q=_.symbolInstances.get(V);Q.crossTileID||(Q.crossTileID=I.generate(),Y.add(Q.crossTileID))}return void 0===this.indexes[f.overscaledZ]&&(this.indexes[f.overscaledZ]={}),this.indexes[f.overscaledZ][f.key]=new fs(f,_.symbolInstances,_.bucketInstanceId),!0}removeBucketCrossTileIDs(f,_){for(const I of _.crossTileIDs)this.usedCrossTileIDs[f].delete(I)}removeStaleBuckets(f){let _=!1;for(const I in this.indexes){const Y=this.indexes[I];for(const V in Y)f[Y[V].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,Y[V]),delete Y[V],_=!0)}return _}}class gs{constructor(){this.layerIndexes={},this.crossTileIDs=new Rl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(f,_,I,Y){let V=this.layerIndexes[f.id];void 0===V&&(V=this.layerIndexes[f.id]=new Zs);let Q=!1;const re={};"globe"!==Y.name&&V.handleWrapJump(I);for(const de of _){const be=de.getBucket(f);be&&f.id===be.layerIds[0]&&(be.bucketInstanceId||(be.bucketInstanceId=++this.maxBucketInstanceId),V.addBucket(de.tileID,be,this.crossTileIDs)&&(Q=!0),re[be.bucketInstanceId]=!0)}return V.removeStaleBuckets(re)&&(Q=!0),Q}pruneUnusedLayers(f){const _={};f.forEach(I=>{_[I]=!0});for(const I in this.layerIndexes)_[I]||delete this.layerIndexes[I]}}const Fc=(k,f)=>t.emitValidationErrors(k,f&&f.filter(_=>"source.canvas"!==_.identifier)),no=t.pick(wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Xd=t.pick(wt,["setCenter","setZoom","setBearing","setPitch"]),Od={version:8,layers:[],sources:{}},uu={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Xa extends t.Evented{constructor(f,_={}){super(),this.map=f,this.dispatcher=new yn(st(),this),this.imageManager=new xi,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(f._requestManager,_.localFontFamily?t.LocalGlyphMode.all:_.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,_.localFontFamily||_.localIdeographFontFamily),this.crossTileSymbolIndex=new gs,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const I=this;this._rtlTextPluginCallback=Xa.registerForPluginStateChange(Y=>{I.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Y.pluginStatus,pluginURL:Y.pluginURL},(V,Q)=>{if(t.triggerPluginCompletionEvent(V),Q&&Q.every(re=>re))for(const re in I._sourceCaches){const de=I._sourceCaches[re],be=de.getSource().type;"vector"!==be&&"geojson"!==be||de.reload()}})}),this.on("data",Y=>{if("source"!==Y.dataType||"metadata"!==Y.sourceDataType)return;const V=this.getSource(Y.sourceId);if(V&&V.vectorLayerIds)for(const Q in this._layers){const re=this._layers[Q];re.source===V.id&&this._validateLayer(re)}})}loadURL(f,_={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const I="boolean"==typeof _.validate?_.validate:!t.isMapboxURL(f);f=this.map._requestManager.normalizeStyleURL(f,_.accessToken);const Y=this.map._requestManager.transformRequest(f,t.ResourceType.Style);this._request=t.getJSON(Y,(V,Q)=>{this._request=null,V?this.fire(new t.ErrorEvent(V)):Q&&this._load(Q,I)})}loadJSON(f,_={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame(()=>{this._request=null,this._load(f,!1!==_.validate)})}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Od,!1)}_updateLayerCount(f,_){const I=_?1:-1;f.is3D()&&(this._num3DLayers+=I),"circle"===f.type&&(this._numCircleLayers+=I),"symbol"===f.type&&(this._numSymbolLayers+=I)}_load(f,_){if(_&&Fc(this,t.validateStyle(f)))return;this._loaded=!0,this.stylesheet=t.clone$1(f),this._updateMapProjection();for(const Y in f.sources)this.addSource(Y,f.sources[Y],{validate:!1});this._changed=!1,f.sprite?this._loadSprite(f.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(f.glyphs);const I=ke(this.stylesheet.layers);this._order=I.map(Y=>Y.id),this._layers={},this._serializedLayers={};for(const Y of I){const V=t.createStyleLayer(Y);V.setEventedParent(this,{layer:{id:V.id}}),this._layers[V.id]=V,this._serializedLayers[V.id]=V.serialize(),this._updateLayerCount(V,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new It(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(f){f?this.stylesheet.projection=f:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(f){this._spriteRequest=function(_,I,Y){let V,Q,re;const de=t.exported.devicePixelRatio>1?"@2x":"";let be=t.getJSON(I.transformRequest(I.normalizeSpriteURL(_,de,".json"),t.ResourceType.SpriteJSON),(it,ft)=>{be=null,re||(re=it,V=ft,Fe())}),xe=t.getImage(I.transformRequest(I.normalizeSpriteURL(_,de,".png"),t.ResourceType.SpriteImage),(it,ft)=>{xe=null,re||(re=it,Q=ft,Fe())});function Fe(){if(re)Y(re);else if(V&&Q){const it=t.exported.getImageData(Q),ft={};for(const yt in V){const{width:bt,height:Tt,x:Ne,y:_t,sdf:zt,pixelRatio:Gt,stretchX:pi,stretchY:hi,content:ri}=V[yt],Oi=new t.RGBAImage({width:bt,height:Tt});t.RGBAImage.copy(it,Oi,{x:Ne,y:_t},{x:0,y:0},{width:bt,height:Tt}),ft[yt]={data:Oi,pixelRatio:Gt,sdf:zt,stretchX:pi,stretchY:hi,content:ri}}Y(null,ft)}}return{cancel(){be&&(be.cancel(),be=null),xe&&(xe.cancel(),xe=null)}}}(f,this.map._requestManager,(_,I)=>{if(this._spriteRequest=null,_)this.fire(new t.ErrorEvent(_));else if(I)for(const Y in I)this.imageManager.addImage(Y,I[Y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))})}_validateLayer(f){const _=this.getSource(f.source);if(!_)return;const I=f.sourceLayer;I&&("geojson"===_.type||_.vectorLayerIds&&-1===_.vectorLayerIds.indexOf(I))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${I}" does not exist on source "${_.id}" as specified by style layer "${f.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const f in this._sourceCaches)if(!this._sourceCaches[f].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(f){const _=[];for(const I of f){const Y=this._layers[I];"custom"!==Y.type&&_.push(Y.serialize())}return _}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const f in this._sourceCaches)if(this._sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(f){return!!this.terrain&&("function"==typeof f.isLayerDraped?f.isLayerDraped():uu[f.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(f){if(!this._loaded)return;const _=this._changed;if(this._changed){const Y=Object.keys(this._updatedLayers),V=Object.keys(this._removedLayers);(Y.length||V.length)&&this._updateWorkerLayers(Y,V);for(const Q in this._updatedSources){const re=this._updatedSources[Q];"reload"===re?this._reloadSource(Q):"clear"===re&&this._clearSource(Q)}this._updateTilesForChangedImages();for(const Q in this._updatedPaintProps)this._layers[Q].updateTransitions(f);this.light.updateTransitions(f),this.fog&&this.fog.updateTransitions(f),this._resetUpdates()}const I={};for(const Y in this._sourceCaches){const V=this._sourceCaches[Y];I[Y]=V.used,V.used=!1}for(const Y of this._order){const V=this._layers[Y];if(V.recalculate(f,this._availableImages),!V.isHidden(f.zoom)){const re=this._getLayerSourceCache(V);re&&(re.used=!0)}const Q=this.map.painter;if(Q){const re=V.getProgramIds();if(!re)continue;const de=V.getProgramConfiguration(f.zoom);for(const be of re)Q.useProgram(be,de)}}for(const Y in I){const V=this._sourceCaches[Y];I[Y]!==V.used&&V.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:V.getSource().id}))}this.light.recalculate(f),this.terrain&&this.terrain.recalculate(f),this.fog&&this.fog.recalculate(f),this.z=f.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),_&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const f=Object.keys(this._changedImages);if(f.length){for(const _ in this._sourceCaches)this._sourceCaches[_].reloadTilesForDependencies(["icons","patterns"],f);this._changedImages={}}}_updateWorkerLayers(f,_){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(f),removedIds:_})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(f){if(this._checkLoaded(),Fc(this,t.validateStyle(f)))return!1;(f=t.clone$1(f)).layers=ke(f.layers);const _=function(Y,V){if(!Y)return[{command:wt.setStyle,args:[V]}];let Q=[];try{if(!j(Y.version,V.version))return[{command:wt.setStyle,args:[V]}];j(Y.center,V.center)||Q.push({command:wt.setCenter,args:[V.center]}),j(Y.zoom,V.zoom)||Q.push({command:wt.setZoom,args:[V.zoom]}),j(Y.bearing,V.bearing)||Q.push({command:wt.setBearing,args:[V.bearing]}),j(Y.pitch,V.pitch)||Q.push({command:wt.setPitch,args:[V.pitch]}),j(Y.sprite,V.sprite)||Q.push({command:wt.setSprite,args:[V.sprite]}),j(Y.glyphs,V.glyphs)||Q.push({command:wt.setGlyphs,args:[V.glyphs]}),j(Y.transition,V.transition)||Q.push({command:wt.setTransition,args:[V.transition]}),j(Y.light,V.light)||Q.push({command:wt.setLight,args:[V.light]}),j(Y.fog,V.fog)||Q.push({command:wt.setFog,args:[V.fog]}),j(Y.projection,V.projection)||Q.push({command:wt.setProjection,args:[V.projection]});const re={},de=[];!function(Fe,it,ft,yt){let bt;for(bt in it=it||{},Fe=Fe||{})Fe.hasOwnProperty(bt)&&(it.hasOwnProperty(bt)||Xe(bt,ft,yt));for(bt in it){if(!it.hasOwnProperty(bt))continue;const Tt=it[bt];Fe.hasOwnProperty(bt)?j(Fe[bt],Tt)||("geojson"===Fe[bt].type&&"geojson"===Tt.type&&ve(Fe,it,bt)?ft.push({command:wt.setGeoJSONSourceData,args:[bt,Tt.data]}):Qt(bt,it,ft,yt)):jt(bt,it,ft)}}(Y.sources,V.sources,de,re);const be=[];Y.layers&&Y.layers.forEach(Fe=>{Fe.source&&re[Fe.source]?Q.push({command:wt.removeLayer,args:[Fe.id]}):be.push(Fe)});let xe=Y.terrain;xe&&re[xe.source]&&(Q.push({command:wt.setTerrain,args:[void 0]}),xe=void 0),Q=Q.concat(de),j(xe,V.terrain)||Q.push({command:wt.setTerrain,args:[V.terrain]}),function(Fe,it,ft){it=it||[];const yt=(Fe=Fe||[]).map(u),bt=it.map(u),Tt=Fe.reduce(m,{}),Ne=it.reduce(m,{}),_t=yt.slice(),zt=Object.create(null);let Gt,pi,hi,ri,Oi,Ai,Gi;for(Gt=0,pi=0;Gt<yt.length;Gt++)hi=yt[Gt],Ne.hasOwnProperty(hi)?pi++:(ft.push({command:wt.removeLayer,args:[hi]}),_t.splice(_t.indexOf(hi,pi),1));for(Gt=0,pi=0;Gt<bt.length;Gt++)hi=bt[bt.length-1-Gt],_t[_t.length-1-Gt]!==hi&&(Tt.hasOwnProperty(hi)?(ft.push({command:wt.removeLayer,args:[hi]}),_t.splice(_t.lastIndexOf(hi,_t.length-pi),1)):pi++,Ai=_t[_t.length-Gt],ft.push({command:wt.addLayer,args:[Ne[hi],Ai]}),_t.splice(_t.length-Gt,0,hi),zt[hi]=!0);for(Gt=0;Gt<bt.length;Gt++)if(hi=bt[Gt],ri=Tt[hi],Oi=Ne[hi],!zt[hi]&&!j(ri,Oi))if(j(ri.source,Oi.source)&&j(ri["source-layer"],Oi["source-layer"])&&j(ri.type,Oi.type)){for(Gi in l(ri.layout,Oi.layout,ft,hi,null,wt.setLayoutProperty),l(ri.paint,Oi.paint,ft,hi,null,wt.setPaintProperty),j(ri.filter,Oi.filter)||ft.push({command:wt.setFilter,args:[hi,Oi.filter]}),j(ri.minzoom,Oi.minzoom)&&j(ri.maxzoom,Oi.maxzoom)||ft.push({command:wt.setLayerZoomRange,args:[hi,Oi.minzoom,Oi.maxzoom]}),ri)ri.hasOwnProperty(Gi)&&"layout"!==Gi&&"paint"!==Gi&&"filter"!==Gi&&"metadata"!==Gi&&"minzoom"!==Gi&&"maxzoom"!==Gi&&(0===Gi.indexOf("paint.")?l(ri[Gi],Oi[Gi],ft,hi,Gi.slice(6),wt.setPaintProperty):j(ri[Gi],Oi[Gi])||ft.push({command:wt.setLayerProperty,args:[hi,Gi,Oi[Gi]]}));for(Gi in Oi)Oi.hasOwnProperty(Gi)&&!ri.hasOwnProperty(Gi)&&"layout"!==Gi&&"paint"!==Gi&&"filter"!==Gi&&"metadata"!==Gi&&"minzoom"!==Gi&&"maxzoom"!==Gi&&(0===Gi.indexOf("paint.")?l(ri[Gi],Oi[Gi],ft,hi,Gi.slice(6),wt.setPaintProperty):j(ri[Gi],Oi[Gi])||ft.push({command:wt.setLayerProperty,args:[hi,Gi,Oi[Gi]]}))}else ft.push({command:wt.removeLayer,args:[hi]}),Ai=_t[_t.lastIndexOf(hi)+1],ft.push({command:wt.addLayer,args:[Oi,Ai]})}(be,V.layers,Q)}catch(re){console.warn("Unable to compute style diff:",re),Q=[{command:wt.setStyle,args:[V]}]}return Q}(this.serialize(),f).filter(Y=>!(Y.command in Xd));if(0===_.length)return!1;const I=_.filter(Y=>!(Y.command in no));if(I.length>0)throw new Error(`Unimplemented: ${I.map(Y=>Y.command).join(", ")}.`);return _.forEach(Y=>{"setTransition"!==Y.command&&"setProjection"!==Y.command&&this[Y.command].apply(this,Y.args)}),this.stylesheet=f,this._updateMapProjection(),!0}addImage(f,_){return this.getImage(f)?this.fire(new t.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(f,_),this._afterImageUpdated(f),this)}updateImage(f,_){this.imageManager.updateImage(f,_)}getImage(f){return this.imageManager.getImage(f)}removeImage(f){return this.getImage(f)?(this.imageManager.removeImage(f),this._afterImageUpdated(f),this):this.fire(new t.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(f){this._availableImages=this.imageManager.listImages(),this._changedImages[f]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(f,_,I={}){if(this._checkLoaded(),void 0!==this.getSource(f))throw new Error("There is already a source with this ID");if(!_.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(_).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(_.type)>=0&&this._validate(t.validateSource,`sources.${f}`,_,null,I))return;this.map&&this.map._collectResourceTiming&&(_.collectResourceTiming=!0);const Y=vt(f,_,this.dispatcher,this);Y.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(f),source:Y.serialize(),sourceId:f}));const V=Q=>{const re=(Q?"symbol:":"other:")+f,de=this._sourceCaches[re]=new t.SourceCache(re,Y,Q);(Q?this._symbolSourceCaches:this._otherSourceCaches)[f]=de,de.style=this,de.onAdd(this.map)};V(!1),"vector"!==_.type&&"geojson"!==_.type||V(!0),Y.onAdd&&Y.onAdd(this.map),this._changed=!0}removeSource(f){this._checkLoaded();const _=this.getSource(f);if(!_)throw new Error("There is no source with this ID");for(const Y in this._layers)if(this._layers[Y].source===f)return this.fire(new t.ErrorEvent(new Error(`Source "${f}" cannot be removed while layer "${Y}" is using it.`)));if(this.terrain&&this.terrain.get().source===f)return this.fire(new t.ErrorEvent(new Error(`Source "${f}" cannot be removed while terrain is using it.`)));const I=this._getSourceCaches(f);for(const Y of I)delete this._sourceCaches[Y.id],delete this._updatedSources[Y.id],Y.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Y.getSource().id})),Y.setEventedParent(null),Y.clearTiles();return delete this._otherSourceCaches[f],delete this._symbolSourceCaches[f],_.setEventedParent(null),_.onRemove&&_.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(f,_){this._checkLoaded(),this.getSource(f).setData(_),this._changed=!0}getSource(f){const _=this._getSourceCache(f);return _&&_.getSource()}_getSources(){const f=[];for(const _ in this._otherSourceCaches){const I=this._getSourceCache(_);I&&f.push(I.getSource())}return f}addLayer(f,_,I={}){this._checkLoaded();const Y=f.id;if(this.getLayer(Y))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${Y}" already exists on this map`)));let V;if("custom"===f.type){if(Fc(this,t.validateCustomStyleLayer(f)))return;V=t.createStyleLayer(f)}else{if("object"==typeof f.source&&(this.addSource(Y,f.source),f=t.clone$1(f),f=t.extend(f,{source:Y})),this._validate(t.validateLayer,`layers.${Y}`,f,{arrayIndex:-1},I))return;V=t.createStyleLayer(f),this._validateLayer(V),V.setEventedParent(this,{layer:{id:Y}}),this._serializedLayers[V.id]=V.serialize(),this._updateLayerCount(V,!0)}const Q=_?this._order.indexOf(_):this._order.length;if(_&&-1===Q)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${_}" does not exist on this map.`)));this._order.splice(Q,0,Y),this._layerOrderChanged=!0,this._layers[Y]=V;const re=this._getLayerSourceCache(V);if(this._removedLayers[Y]&&V.source&&re&&"custom"!==V.type){const de=this._removedLayers[Y];delete this._removedLayers[Y],de.type!==V.type?this._updatedSources[V.source]="clear":(this._updatedSources[V.source]="reload",re.pause())}this._updateLayer(V),V.onAdd&&V.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(f,_){if(this._checkLoaded(),this._changed=!0,!this._layers[f])return void this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be moved.`)));if(f===_)return;const I=this._order.indexOf(f);this._order.splice(I,1);const Y=_?this._order.indexOf(_):this._order.length;_&&-1===Y?this.fire(new t.ErrorEvent(new Error(`Layer with id "${_}" does not exist on this map.`))):(this._order.splice(Y,0,f),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(f){this._checkLoaded();const _=this._layers[f];if(!_)return void this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be removed.`)));_.setEventedParent(null),this._updateLayerCount(_,!1);const I=this._order.indexOf(f);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[f]=_,delete this._layers[f],delete this._serializedLayers[f],delete this._updatedLayers[f],delete this._updatedPaintProps[f],_.onRemove&&_.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(f){return this._layers[f]}hasLayer(f){return f in this._layers}hasLayerType(f){for(const _ in this._layers)if(this._layers[_].type===f)return!0;return!1}setLayerZoomRange(f,_,I){this._checkLoaded();const Y=this.getLayer(f);Y?Y.minzoom===_&&Y.maxzoom===I||(null!=_&&(Y.minzoom=_),null!=I&&(Y.maxzoom=I),this._updateLayer(Y)):this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(f,_,I={}){this._checkLoaded();const Y=this.getLayer(f);if(Y){if(!j(Y.filter,_))return null==_?(Y.filter=void 0,void this._updateLayer(Y)):void(this._validate(t.validateFilter,`layers.${Y.id}.filter`,_,{layerType:Y.type},I)||(Y.filter=t.clone$1(_),this._updateLayer(Y)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be filtered.`)))}getFilter(f){const _=this.getLayer(f);return _&&t.clone$1(_.filter)}setLayoutProperty(f,_,I,Y={}){this._checkLoaded();const V=this.getLayer(f);V?j(V.getLayoutProperty(_),I)||(V.setLayoutProperty(_,I,Y),this._updateLayer(V)):this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(f,_){const I=this.getLayer(f);if(I)return I.getLayoutProperty(_);this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style.`)))}setPaintProperty(f,_,I,Y={}){this._checkLoaded();const V=this.getLayer(f);V?j(V.getPaintProperty(_),I)||(V.setPaintProperty(_,I,Y)&&this._updateLayer(V),this._changed=!0,this._updatedPaintProps[f]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${f}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(f,_){const I=this.getLayer(f);return I&&I.getPaintProperty(_)}setFeatureState(f,_){this._checkLoaded();const I=f.source,Y=f.sourceLayer,V=this.getSource(I);if(!V)return void this.fire(new t.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const Q=V.type;if("geojson"===Q&&Y)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===Q&&!Y)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===f.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const re=this._getSourceCaches(I);for(const de of re)de.setFeatureState(Y,f.id,_)}removeFeatureState(f,_){this._checkLoaded();const I=f.source,Y=this.getSource(I);if(!Y)return void this.fire(new t.ErrorEvent(new Error(`The source '${I}' does not exist in the map's style.`)));const V=Y.type,Q="vector"===V?f.sourceLayer:void 0;if("vector"===V&&!Q)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(_&&"string"!=typeof f.id&&"number"!=typeof f.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const re=this._getSourceCaches(I);for(const de of re)de.removeFeatureState(Q,f.id,_)}getFeatureState(f){this._checkLoaded();const _=f.source,I=f.sourceLayer,Y=this.getSource(_);if(Y){if("vector"!==Y.type||I)return void 0===f.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(_)[0].getFeatureState(I,f.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const f={};for(const _ in this._sourceCaches){const I=this._sourceCaches[_].getSource();f[I.id]||(f[I.id]=I.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:f,layers:this._serializeLayers(this._order)},_=>void 0!==_)}_updateLayer(f){this._updatedLayers[f.id]=!0;const _=this._getLayerSourceCache(f);f.source&&!this._updatedSources[f.source]&&_&&"raster"!==_.getSource().type&&(this._updatedSources[f.source]="reload",_.pause()),this._changed=!0,f.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(f){const _=Q=>"fill-extrusion"===this._layers[Q].type,I={},Y=[];for(let Q=this._order.length-1;Q>=0;Q--){const re=this._order[Q];if(_(re)){I[re]=Q;for(const de of f){const be=de[re];if(be)for(const xe of be)Y.push(xe)}}}Y.sort((Q,re)=>re.intersectionZ-Q.intersectionZ);const V=[];for(let Q=this._order.length-1;Q>=0;Q--){const re=this._order[Q];if(_(re))for(let de=Y.length-1;de>=0;de--){const be=Y[de].feature;if(I[be.layer.id]<Q)break;V.push(be),Y.pop()}else for(const de of f){const be=de[re];if(be)for(const xe of be)V.push(xe.feature)}}return V}queryRenderedFeatures(f,_,I){_&&_.filter&&this._validate(t.validateFilter,"queryRenderedFeatures.filter",_.filter,null,_);const Y={};if(_&&_.layers){if(!Array.isArray(_.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const de of _.layers){const be=this._layers[de];if(!be)return this.fire(new t.ErrorEvent(new Error(`The layer '${de}' does not exist in the map's style and cannot be queried for features.`))),[];Y[be.source]=!0}}const V=[];_.availableImages=this._availableImages;const Q=_&&_.layers?_.layers.some(de=>{const be=this.getLayer(de);return be&&be.is3D()}):this.has3DLayers(),re=yr.createFromScreenPoints(f,I);for(const de in this._sourceCaches){const be=this._sourceCaches[de].getSource().id;_.layers&&!Y[be]||V.push(Ke(this._sourceCaches[de],this._layers,this._serializedLayers,re,_,I,Q,!!this.map._showQueryGeometry))}return this.placement&&V.push(function(de,be,xe,Fe,it,ft,yt){const bt={},Tt=ft.queryRenderedSymbols(Fe),Ne=[];for(const _t of Object.keys(Tt).map(Number))Ne.push(yt[_t]);Ne.sort(Ot);for(const _t of Ne){const zt=_t.featureIndex.lookupSymbolFeatures(Tt[_t.bucketInstanceId],be,_t.bucketIndex,_t.sourceLayerIndex,it.filter,it.layers,it.availableImages,de);for(const Gt in zt){const pi=bt[Gt]=bt[Gt]||[],hi=zt[Gt];hi.sort((ri,Oi)=>{const Ai=_t.featureSortOrder;if(Ai){const Gi=Ai.indexOf(ri.featureIndex);return Ai.indexOf(Oi.featureIndex)-Gi}return Oi.featureIndex-ri.featureIndex});for(const ri of hi)pi.push(ri)}}for(const _t in bt)bt[_t].forEach(zt=>{const Gt=zt.feature,pi=xe(de[_t]);if(!pi)return;const hi=pi.getFeatureState(Gt.layer["source-layer"],Gt.id);Gt.source=Gt.layer.source,Gt.layer["source-layer"]&&(Gt.sourceLayer=Gt.layer["source-layer"]),Gt.state=hi});return bt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),re.screenGeometry,_,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(V)}querySourceFeatures(f,_){_&&_.filter&&this._validate(t.validateFilter,"querySourceFeatures.filter",_.filter,null,_);const I=this._getSourceCaches(f);let Y=[];for(const V of I)Y=Y.concat(rt(V,_));return Y}addSourceType(f,_,I){return Xa.getSourceType(f)?I(new Error(`A source type called "${f}" already exists.`)):(Xa.setSourceType(f,_),_.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:f,url:_.workerSourceURL},I):I(null,null))}getLight(){return this.light.getLight()}setLight(f,_={}){this._checkLoaded();const I=this.light.getLight();let Y=!1;for(const Q in f)if(!j(f[Q],I[Q])){Y=!0;break}if(!Y)return;const V=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(f,_),this.light.updateTransitions(V)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(f,_=1){if(this._checkLoaded(),!f)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let I=f;if(1===_){if("object"==typeof I.source){const Y="terrain-dem-src";this.addSource(Y,I.source),I=t.clone$1(I),I=t.extend(I,{source:Y})}if(this._validate(t.validateTerrain,"terrain",I))return}if(!this.terrain||this.terrain&&_!==this.terrain.drapeRenderMode){if(!I)return;this._createTerrain(I,_)}else{const Y=this.terrain,V=Y.get();for(const Q of Object.keys(t.spec.terrain))!I.hasOwnProperty(Q)&&t.spec.terrain[Q].default&&(I[Q]=t.spec.terrain[Q].default);for(const Q in I)if(!j(I[Q],V[Q])){Y.set(I),this.stylesheet.terrain=I;const re=this._setTransitionParameters({duration:0});Y.updateTransitions(re);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(f){const _=this.fog=new tn(f,this.map.transform);this.stylesheet.fog=f;const I=this._setTransitionParameters({duration:0});_.updateTransitions(I)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const f of this.map._markers)f._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(f){if(this._checkLoaded(),!f)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const _=this.fog,I=_.get();0===Object.keys(f).length&&_.set(f);for(const Y in f)if(!j(f[Y],I[Y])){_.set(f),this.stylesheet.fog=f;const V=this._setTransitionParameters({duration:0});_.updateTransitions(V);break}}else this._createFog(f);this._markersNeedUpdate=!0}_setTransitionParameters(f){return{now:t.exported.now(),transition:t.extend(f,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const f=this._order.filter(I=>this.isLayerDraped(this._layers[I])),_=this._order.filter(I=>!this.isLayerDraped(this._layers[I]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...f),this._drapedFirstOrder.push(..._)}_createTerrain(f,_){const I=this.terrain=new Ni(f,_);this.stylesheet.terrain=f,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Y=this._setTransitionParameters({duration:0});I.updateTransitions(Y)}_force3DLayerUpdate(){for(const f in this._layers){const _=this._layers[f];"fill-extrusion"===_.type&&this._updateLayer(_)}}_forceSymbolLayerUpdate(){for(const f in this._layers){const _=this._layers[f];"symbol"===_.type&&this._updateLayer(_)}}_validate(f,_,I,Y,V={}){return(!V||!1!==V.validate)&&Fc(this,f.call(t.validateStyle,t.extend({key:_,style:this.serialize(),value:I,styleSpec:t.spec},Y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this._sourceCaches)this._sourceCaches[f].clearTiles(),this._sourceCaches[f].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(f){const _=this._getSourceCaches(f);for(const I of _)I.clearTiles()}_reloadSource(f){const _=this._getSourceCaches(f);for(const I of _)I.resume(),I.reload()}_reloadSources(){for(const f of this._getSources())f.reload&&f.reload()}_updateSources(f){for(const _ in this._sourceCaches)this._sourceCaches[_].update(f)}_generateCollisionBoxes(){for(const f in this._sourceCaches){const _=this._sourceCaches[f];_.resume(),_.reload()}}_updatePlacement(f,_,I,Y,V=!1){let Q=!1,re=!1;const de={};for(const be of this._order){const xe=this._layers[be];if("symbol"!==xe.type)continue;if(!de[xe.source]){const it=this._getLayerSourceCache(xe);if(!it)continue;de[xe.source]=it.getRenderableIds(!0).map(ft=>it.getTileByID(ft)).sort((ft,yt)=>yt.tileID.overscaledZ-ft.tileID.overscaledZ||(ft.tileID.isLessThan(yt.tileID)?-1:1))}const Fe=this.crossTileSymbolIndex.addLayer(xe,de[xe.source],f.center.lng,f.projection);Q=Q||Fe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),V=V||this._layerOrderChanged||0===I,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(V||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),f.zoom))&&(this.pauseablePlacement=new Rd(f,this._order,V,_,I,Y,this.placement,this.fog&&f.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,de),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),re=!0),Q&&this.pauseablePlacement.placement.setStale()),re||Q)for(const be of this._order){const xe=this._layers[be];"symbol"===xe.type&&this.placement.updateLayerOpacities(xe,de[xe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const f in this._sourceCaches)this._sourceCaches[f].releaseSymbolFadeTiles()}getImages(f,_,I){this.imageManager.getImages(_.icons,I),this._updateTilesForChangedImages();const Y=V=>{V&&V.setDependencies(_.tileID.key,_.type,_.icons)};Y(this._otherSourceCaches[_.source]),Y(this._symbolSourceCaches[_.source])}getGlyphs(f,_,I){this.glyphManager.getGlyphs(_.stacks,I)}getResource(f,_,I){return t.makeRequest(_,I)}_getSourceCache(f){return this._otherSourceCaches[f]}_getLayerSourceCache(f){return"symbol"===f.type?this._symbolSourceCaches[f.source]:this._otherSourceCaches[f.source]}_getSourceCaches(f){const _=[];return this._otherSourceCaches[f]&&_.push(this._otherSourceCaches[f]),this._symbolSourceCaches[f]&&_.push(this._symbolSourceCaches[f]),_}_isSourceCacheLoaded(f){const _=this._getSourceCaches(f);return 0===_.length?(this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${f}'`))),!1):_.every(I=>I.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Xa.getSourceType=function(k){return Ut[k]},Xa.setSourceType=function(k,f){Ut[k]=f},Xa.registerForPluginStateChange=t.registerForPluginStateChange;var Ju="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Es="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ks="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",gd="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",fl="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Bc={},Au={};const No=[];ts(Ju,No),ts(ks,No),ts(gd,No),ts(fl,No),Bc=ra("",ks),Au=ra(fl,gd);const qd=ra("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),vd=Ju,Cs="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Jl={background:ra("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:ra("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:ra("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:ra("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ra("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:ra("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:ra("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ra("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ra("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:ra("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:ra("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:ra("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:ra("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:ra("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:ra("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:ra("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ra("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:ra("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:ra("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:ra("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:ra("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:ra("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:ra("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:ra("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:ra("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:ra("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Es),skyboxGradient:ra("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Es),skyboxCapture:ra("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:ra("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:ra("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function ts(k,f){const _=k.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let I of _)if(I=I.trim(),"#"===I[0]&&I.includes("if")&&!I.includes("endif")){I=I.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Y=I.split(" ");for(const V of Y)f.includes(V)||f.push(V)}}function ra(k,f){const _=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=f.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Y={},V=[...No];return ts(k,V),ts(f,V),{fragmentSource:k=k.replace(_,(Q,re,de,be,xe)=>(Y[xe]=!0,"define"===re?`\n#ifndef HAS_UNIFORM_u_${xe}\nvarying ${de} ${be} ${xe};\n#else\nuniform ${de} ${be} u_${xe};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${xe}\n    ${de} ${be} ${xe} = u_${xe};\n#endif\n`)),vertexSource:f=f.replace(_,(Q,re,de,be,xe)=>{const Fe="float"===be?"vec2":"vec4",it=xe.match(/color/)?"color":Fe;return Y[xe]?"define"===re?`\n#ifndef HAS_UNIFORM_u_${xe}\nuniform lowp float u_${xe}_t;\nattribute ${de} ${Fe} a_${xe};\nvarying ${de} ${be} ${xe};\n#else\nuniform ${de} ${be} u_${xe};\n#endif\n`:"vec4"===it?`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${xe} = a_${xe};\n#else\n    ${de} ${be} ${xe} = u_${xe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${xe} = unpack_mix_${it}(a_${xe}, u_${xe}_t);\n#else\n    ${de} ${be} ${xe} = u_${xe};\n#endif\n`:"define"===re?`\n#ifndef HAS_UNIFORM_u_${xe}\nuniform lowp float u_${xe}_t;\nattribute ${de} ${Fe} a_${xe};\n#else\nuniform ${de} ${be} u_${xe};\n#endif\n`:"vec4"===it?`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${de} ${be} ${xe} = a_${xe};\n#else\n    ${de} ${be} ${xe} = u_${xe};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${xe}\n    ${de} ${be} ${xe} = unpack_mix_${it}(a_${xe}, u_${xe}_t);\n#else\n    ${de} ${be} ${xe} = u_${xe};\n#endif\n`}),staticAttributes:I,usedDefines:V}}class bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(f,_,I,Y,V,Q,re){this.context=f;let de=this.boundPaintVertexBuffers.length!==Y.length;for(let xe=0;!de&&xe<Y.length;xe++)this.boundPaintVertexBuffers[xe]!==Y[xe]&&(de=!0);let be=this.boundDynamicVertexBuffers.length!==re.length;for(let xe=0;!be&&xe<re.length;xe++)this.boundDynamicVertexBuffers[xe]!==re[xe]&&(be=!0);if(!f.extVertexArrayObject||!this.vao||this.boundProgram!==_||this.boundLayoutVertexBuffer!==I||de||be||this.boundIndexBuffer!==V||this.boundVertexOffset!==Q)this.freshBind(_,I,Y,V,Q,re);else{f.bindVertexArrayOES.set(this.vao);for(const xe of re)xe&&xe.bind();V&&V.dynamicDraw&&V.bind()}}freshBind(f,_,I,Y,V,Q){let re;const de=f.numAttributes,be=this.context,xe=be.gl;if(be.extVertexArrayObject)this.vao&&this.destroy(),this.vao=be.extVertexArrayObject.createVertexArrayOES(),be.bindVertexArrayOES.set(this.vao),re=0,this.boundProgram=f,this.boundLayoutVertexBuffer=_,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=Y,this.boundVertexOffset=V,this.boundDynamicVertexBuffers=Q;else{re=be.currentNumAttributes||0;for(let Fe=de;Fe<re;Fe++)xe.disableVertexAttribArray(Fe)}_.enableAttributes(xe,f),_.bind(),_.setVertexAttribPointers(xe,f,V);for(const Fe of I)Fe.enableAttributes(xe,f),Fe.bind(),Fe.setVertexAttribPointers(xe,f,V);for(const Fe of Q)Fe&&(Fe.enableAttributes(xe,f),Fe.bind(),Fe.setVertexAttribPointers(xe,f,V));Y&&Y.bind(),be.currentNumAttributes=de}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function du(k,f){const _=Math.pow(2,f.canonical.z),I=f.canonical.y;return[new t.MercatorCoordinate(0,I/_).toLngLat().lat,new t.MercatorCoordinate(0,(I+1)/_).toLngLat().lat]}function zo(k,f,_,I,Y,V,Q){const re=k.context,de=re.gl,be=_.fbo;if(!be)return;k.prepareDrawTile();const xe=k.useProgram("hillshade");re.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,be.colorAttachment.get());const Fe=((bt,Tt,Ne,_t)=>{const zt=Ne.paint.get("hillshade-shadow-color"),Gt=Ne.paint.get("hillshade-highlight-color"),pi=Ne.paint.get("hillshade-accent-color");let hi=Ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ne.paint.get("hillshade-illumination-anchor")&&(hi-=bt.transform.angle);const ri=!bt.options.moving;return{u_matrix:_t||bt.transform.calculateProjMatrix(Tt.tileID.toUnwrapped(),ri),u_image:0,u_latrange:du(0,Tt.tileID),u_light:[Ne.paint.get("hillshade-exaggeration"),hi],u_shadow:zt,u_highlight:Gt,u_accent:pi}})(k,_,I,k.terrain?f.projMatrix:null);k.prepareDrawProgram(re,xe,f.toUnwrapped());const{tileBoundsBuffer:it,tileBoundsIndexBuffer:ft,tileBoundsSegments:yt}=k.getTileBoundsBuffers(_);xe.draw(re,de.TRIANGLES,Y,V,Q,t.CullFaceMode.disabled,Fe,I.id,it,ft,yt)}function Zd(k,f,_){if(!f.needsDEMTextureUpload)return;const I=k.context,Y=I.gl;I.pixelStoreUnpackPremultiplyAlpha.set(!1),f.demTexture=f.demTexture||k.getTileTexture(_.stride);const V=_.getPixels();f.demTexture?f.demTexture.update(V,{premultiply:!1}):f.demTexture=new t.Texture(I,V,Y.RGBA,{premultiply:!1}),f.needsDEMTextureUpload=!1}function Ql(k,f,_,I,Y,V){const Q=k.context,re=Q.gl;if(!f.dem)return;const de=f.dem;if(Q.activeTexture.set(re.TEXTURE1),Zd(k,f,de),!f.demTexture)return;f.demTexture.bind(re.NEAREST,re.CLAMP_TO_EDGE);const be=de.dim;Q.activeTexture.set(re.TEXTURE0);let xe=f.fbo;if(!xe){const yt=new t.Texture(Q,{width:be,height:be,data:null},re.RGBA);yt.bind(re.LINEAR,re.CLAMP_TO_EDGE),xe=f.fbo=Q.createFramebuffer(be,be,!0),xe.colorAttachment.set(yt.texture)}Q.bindFramebuffer.set(xe.framebuffer),Q.viewport.set([0,0,be,be]);const{tileBoundsBuffer:Fe,tileBoundsIndexBuffer:it,tileBoundsSegments:ft}=k.getMercatorTileBoundsBuffers();k.useProgram("hillshadePrepare").draw(Q,re.TRIANGLES,I,Y,V,t.CullFaceMode.disabled,((yt,bt)=>{const Tt=bt.stride,Ne=t.create();return t.ortho(Ne,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(Ne,Ne,[0,-t.EXTENT,0]),{u_matrix:Ne,u_image:1,u_dimension:[Tt,Tt],u_zoom:yt.overscaledZ,u_unpack:bt.unpackVector}})(f.tileID,de),_.id,Fe,it,ft),f.needsHillshadePrepare=!1}const Ks=k=>({u_matrix:new t.UniformMatrix4f(k),u_image0:new t.Uniform1i(k),u_skirt_height:new t.Uniform1f(k)}),wl=(k,f)=>({u_matrix:k,u_image0:0,u_skirt_height:f}),co=(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt)=>({u_proj_matrix:Float32Array.from(k),u_globe_matrix:f,u_normalize_matrix:Float32Array.from(I),u_merc_matrix:_,u_zoom_transition:Y,u_merc_center:V,u_image0:0,u_frustum_tl:Q,u_frustum_tr:re,u_frustum_br:de,u_frustum_bl:be,u_globe_pos:xe,u_globe_radius:Fe,u_viewport:it,u_grid_matrix:yt?Float32Array.from(yt):new Float32Array(9),u_skirt_height:ft});function zs(k,f){return null!=k&&null!=f&&!(!k.hasData()||!f.hasData())&&null!=k.demTexture&&null!=f.demTexture&&k.tileID.key!==f.tileID.key}const Ts=new class{constructor(){this.operations={}}newMorphing(k,f,_,I,Y){if(k in this.operations){const V=this.operations[k];V.to.tileID.key!==_.tileID.key&&(V.queued=_)}else this.operations[k]={startTime:I,phase:0,duration:Y,from:f,to:_,queued:null}}getMorphValuesForProxy(k){if(!(k in this.operations))return null;const f=this.operations[k];return{from:f.from,to:f.to,phase:f.phase}}update(k){for(const f in this.operations){const _=this.operations[f];for(_.phase=(k-_.startTime)/_.duration;_.phase>=1||!this._validOp(_);)if(!this._nextOp(_,k)){delete this.operations[f];break}}}_nextOp(k,f){return!!k.queued&&(k.from=k.to,k.to=k.queued,k.queued=null,k.phase=0,k.startTime=f,!0)}_validOp(k){return k.from.hasData()&&k.to.hasData()}},vo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Qu(k){return 6*Math.pow(1.5,22-k)}function ec(k,f){const _=1<<k.z;return!f&&(0===k.x||k.x===_-1)||0===k.y||k.y===_-1}const Oa=k=>({u_matrix:k});function ed(k,f,_,I,Y){if(Y>0){const V=t.exported.now(),Q=(V-k.timeAdded)/Y,re=f?(V-f.timeAdded)/Y:-1,de=_.getSource(),be=I.coveringZoomLevel({tileSize:de.tileSize,roundZoom:de.roundZoom}),xe=!f||Math.abs(f.tileID.overscaledZ-be)>Math.abs(k.tileID.overscaledZ-be),Fe=xe&&k.refreshedUponExpiration?1:t.clamp(xe?Q:1-re,0,1);return k.refreshedUponExpiration&&Q>=1&&(k.refreshedUponExpiration=!1),f?{opacity:1,mix:1-Fe}:{opacity:Fe,mix:0}}return{opacity:1,mix:0}}class Js extends t.SourceCache{constructor(f){const _={type:"raster-dem",maxzoom:f.transform.maxZoom},I=new yn(st(),null),Y=vt("mock-dem",_,I,f.style);super("mock-dem",Y,!1),Y.setEventedParent(this),this._sourceLoaded=!0}_loadTile(f,_){f.state="loaded",_(null)}}class Iu extends t.SourceCache{constructor(f){const _=vt("proxy",{type:"geojson",maxzoom:f.transform.maxZoom},new yn(st(),null),f.style);super("proxy",_,!1),_.setEventedParent(this),this.map=this.getSource().map=f,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(f,_,I){if(f.freezeTileCoverage)return;this.transform=f;const Y=f.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((V,Q)=>{if(V[Q.key]="",!this._tiles[Q.key]){const re=new t.Tile(Q,this._source.tileSize*Q.overscaleFactor(),f.tileZoom);re.state="loaded",this._tiles[Q.key]=re}return V},{});for(const V in this._tiles)V in Y||(this.freeFBO(V),this._tiles[V].unloadVectorData(),delete this._tiles[V])}freeFBO(f){const _=this.proxyCachedFBO[f];if(void 0!==_){const I=Object.values(_);this.renderCachePool.push(...I),delete this.proxyCachedFBO[f]}}deallocRenderCache(){this.renderCache.forEach(f=>f.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ys extends t.OverscaledTileID{constructor(f,_,I){super(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y),this.proxyTileKey=_,this.projMatrix=I}}class wo extends t.Elevation{constructor(f,_){super(),this.painter=f,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[I,Y,V]=function(de){const be=new t.StructArrayLayout2i4,xe=new t.StructArrayLayout3ui6;be.reserve(17161),xe.reserve(33800);const it=t.EXTENT/128,ft=t.EXTENT+it/2,yt=ft+it;for(let Tt=-it;Tt<yt;Tt+=it)for(let Ne=-it;Ne<yt;Ne+=it){const _t=Ne<0||Ne>ft||Tt<0||Tt>ft?24575:0,zt=t.clamp(Math.round(Ne),0,t.EXTENT),Gt=t.clamp(Math.round(Tt),0,t.EXTENT);be.emplaceBack(zt+_t,Gt)}const bt=(Tt,Ne)=>{const _t=131*Ne+Tt;xe.emplaceBack(_t+1,_t,_t+131),xe.emplaceBack(_t+131,_t+131+1,_t+1)};for(let Tt=1;Tt<129;Tt++)for(let Ne=1;Ne<129;Ne++)bt(Ne,Tt);return[0,129].forEach(Tt=>{for(let Ne=0;Ne<130;Ne++)bt(Ne,Tt),bt(Tt,Ne)}),[be,xe,32768]}(),Q=f.context;this.gridBuffer=Q.createVertexBuffer(I,t.posAttributes.members),this.gridIndexBuffer=Q.createIndexBuffer(Y),this.gridSegments=t.SegmentVector.simpleSegment(0,0,I.length,Y.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,I.length,V),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Iu(_.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,t.EXTENT,0,t.EXTENT,0,1);const re=Q.gl;this._overlapStencilMode=new t.StencilMode({func:re.GEQUAL,mask:255},0,255,re.KEEP,re.KEEP,re.REPLACE),this._previousZoom=f.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=_,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Js(_.map)}set style(f){f.on("data",this._onStyleDataEvent.bind(this)),f.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=f,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(f,_,I){if(f&&f.terrain){this._style!==f&&(this.style=f),this.enabled=!0;const Y=f.terrain.properties;this.sourceCache=0===f.terrain.drapeRenderMode?this._mockSourceCache:f._getSourceCache(Y.get("source")),this._exaggeration=Y.get("exaggeration");const V=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Q=this.getScaledDemTileSize();this.sourceCache.update(_,Q,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,V(),this._initializing=!0),V(),_.updateElevation(!0,I),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(_),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(f){this._findCoveringTileCache[f]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const f=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==f.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${f.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${f.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(f){f.coord&&"source"===f.dataType?this._clearRenderCacheForTile(f.sourceCacheId,f.coord):"style"===f.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const f in this._style._sourceCaches)this._style._sourceCaches[f].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(f=>f.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const f=2*this.proxySourceCache.getSource().tileSize;return[f,f]}set useVertexMorphing(f){this._useVertexMorphing=f}updateTileBinding(f){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const _=this.proxySourceCache,I=this.painter.transform;this._initializing&&(this._initializing=0===I._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(I.center),-1),this._emptyDEMTextureDirty=!this._initializing);const Y=this.proxyCoords=_.getIds().map(de=>{const be=_.getTileByID(de).tileID;return be.projMatrix=I.calculateProjMatrix(be.toUnwrapped()),be});(function(de,be){const xe=be.transform.pointCoordinate(be.transform.getCameraPoint()),Fe=new t.Point(xe.x,xe.y);de.sort((it,ft)=>{if(ft.overscaledZ-it.overscaledZ)return ft.overscaledZ-it.overscaledZ;const yt=new t.Point(it.canonical.x+(1<<it.canonical.z)*it.wrap,it.canonical.y),bt=new t.Point(ft.canonical.x+(1<<ft.canonical.z)*ft.wrap,ft.canonical.y),Tt=Fe.mult(1<<it.canonical.z);return Tt.x-=.5,Tt.y-=.5,Tt.distSqr(yt)-Tt.distSqr(bt)})})(Y,this.painter),this._previousZoom=I.zoom;const V=this.proxyToSource||{};this.proxyToSource={},Y.forEach(de=>{this.proxyToSource[de.key]={}}),this.terrainTileForTile={};const Q=this._style._sourceCaches;for(const de in Q){const be=Q[de];if(!be.used||(be!==this.sourceCache&&this.resetTileLookupCache(be.id),this._setupProxiedCoordsForOrtho(be,f[de],V),be.usedForTerrain))continue;const xe=f[de];be.getSource().reparseOverscaled&&this._assignTerrainTiles(xe)}this.proxiedCoords[_.id]=Y.map(de=>new Ys(de,de.key,this.orthoMatrix)),this._assignTerrainTiles(Y),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(V),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const re={};this._visibleDemTiles=[];for(const de of this.proxyCoords){const be=this.terrainTileForTile[de.key];if(!be)continue;const xe=be.tileID.key;xe in re||(this._visibleDemTiles.push(be),re[xe]=xe)}}_assignTerrainTiles(f){this._initializing||f.forEach(_=>{if(this.terrainTileForTile[_.key])return;const I=this._findTileCoveringTileID(_,this.sourceCache);I&&(this.terrainTileForTile[_.key]=I)})}_prepareDEMTextures(){const f=this.painter.context,_=f.gl;for(const I in this.terrainTileForTile){const Y=this.terrainTileForTile[I],V=Y.dem;!V||Y.demTexture&&!Y.needsDEMTextureUpload||(f.activeTexture.set(_.TEXTURE1),Zd(this.painter,Y,V))}}_prepareDemTileUniforms(f,_,I,Y){if(!_||null==_.demTexture)return!1;const V=f.tileID.canonical,Q=Math.pow(2,_.tileID.canonical.z-V.z),re=Y||"";return I[`u_dem_tl${re}`]=[V.x*Q%1,V.y*Q%1],I[`u_dem_scale${re}`]=Q,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const f=this.painter.context,_=f.gl;if(!this._emptyDepthBufferTexture){const I=new t.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new t.Texture(f,I,_.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let f=0;const _=this._visibleDemTiles.reduce((I,Y)=>{if(!Y.dem)return I;const V=Y.dem.tree.minimums[0];return V>0&&f++,I+V},0);return f?_/f:0}_updateEmptyDEMTexture(){const f=this.painter.context,_=f.gl;f.activeTexture.set(_.TEXTURE2);const I=this._getLoadedAreaMinimum(),Y=new t.RGBAImage({width:1,height:1},new Uint8Array(t.DEMData.pack(I,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let V=this._emptyDEMTexture;return V?V.update(Y,{premultiply:!1}):V=this._emptyDEMTexture=new t.Texture(f,Y,_.RGBA,{premultiply:!1}),V}setupElevationDraw(f,_,I){const Y=this.painter.context,V=Y.gl,Q=(re=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(re),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var re;Q.u_dem_size=this.sourceCache.getSource().tileSize,Q.u_exaggeration=this.exaggeration();let de=null,be=null,xe=1;if(I&&I.morphing&&this._useVertexMorphing){const Fe=I.morphing.srcDemTile,it=I.morphing.dstDemTile;xe=I.morphing.phase,Fe&&it&&(this._prepareDemTileUniforms(f,Fe,Q,"_prev")&&(be=Fe),this._prepareDemTileUniforms(f,it,Q)&&(de=it))}if(be&&de?(Y.activeTexture.set(V.TEXTURE2),de.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE,V.NEAREST),Y.activeTexture.set(V.TEXTURE4),be.demTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE,V.NEAREST),Q.u_dem_lerp=xe):(de=this.terrainTileForTile[f.tileID.key],Y.activeTexture.set(V.TEXTURE2),(this._prepareDemTileUniforms(f,de,Q)?de.demTexture:this.emptyDEMTexture).bind(V.NEAREST,V.CLAMP_TO_EDGE)),Y.activeTexture.set(V.TEXTURE3),I&&I.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE),this._depthFBO&&(Q.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(V.NEAREST,V.CLAMP_TO_EDGE),Q.u_depth_size_inv=[1,1]),I&&I.useMeterToDem&&de){const Fe=(1<<de.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Q.u_meter_to_dem=Fe}if(I&&I.labelPlaneMatrixInv&&(Q.u_label_plane_matrix_inv=I.labelPlaneMatrixInv),_.setTerrainUniformValues(Y,Q),"globe"===this.painter.transform.projection.name){const Fe=this.globeUniformValues(this.painter.transform,f.tileID.canonical,I&&I.useDenormalizedUpVectorScale);_.setGlobeUniformValues(Y,Fe)}}globeUniformValues(f,_,I){const Y=f.projection;return{u_tile_tl_up:Y.upVector(_,0,0),u_tile_tr_up:Y.upVector(_,t.EXTENT,0),u_tile_br_up:Y.upVector(_,t.EXTENT,t.EXTENT),u_tile_bl_up:Y.upVector(_,0,t.EXTENT),u_tile_up_scale:I?t.globeMetersToEcef(1):Y.upVectorScale(_,f.center.lat,f.worldSize).metersToTile}}renderToBackBuffer(f){const _=this.painter,I=this.painter.context;0!==f.length&&(I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height]),_.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Y,V,Q,re,de){if("globe"===Y.transform.projection.name)!function(be,xe,Fe,it,ft){const yt=be.context,bt=yt.gl;let Tt,Ne;const _t=be.options.showTerrainWireframe?2:0,zt=be.transform,Gt=t.globeUseCustomAntiAliasing(be,yt,zt),pi=(An,Ui)=>{if(Ne===An)return;const cn=[vo[An],"PROJECTION_GLOBE_VIEW"];Gt&&cn.push("CUSTOM_ANTIALIASING"),Ui&&cn.push(vo[_t]),Tt=be.useProgram("globeRaster",null,cn),Ne=An},hi=be.colorModeForRenderPass(),ri=new t.DepthMode(bt.LEQUAL,t.DepthMode.ReadWrite,be.depthRangeFor3D);Ts.update(ft);const Oi=t.calculateGlobeMercatorMatrix(zt),Ai=[t.mercatorXfromLng(zt.center.lng),t.mercatorYfromLat(zt.center.lat)],Gi=_t?[!1,!0]:[!1],Gn=be.globeSharedBuffers,Hi=[zt.width*t.exported.devicePixelRatio,zt.height*t.exported.devicePixelRatio],un=Float32Array.from(zt.globeMatrix),ki={useDenormalizedUpVectorScale:!0};if(Gi.forEach(An=>{const Ui=be.transform,cn=Qu(Ui.zoom)*xe.exaggeration();Ne=-1;const bn=An?bt.LINES:bt.TRIANGLES;for(const Bn of it){const Hn=Fe.getTile(Bn),ea=t.StencilMode.disabled,wa=xe.prevTerrainTileForTile[Bn.key],Ir=xe.terrainTileForTile[Bn.key];zs(wa,Ir)&&Ts.newMorphing(Bn.key,wa,Ir,ft,250),yt.activeTexture.set(bt.TEXTURE0),Hn.texture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE);const ca=Ts.getMorphValuesForProxy(Bn.key),Ua=ca?1:0;ca&&t.extend$1(ki,{morphing:{srcDemTile:ca.from,dstDemTile:ca.to,phase:t.easeCubicInOut(ca.phase)}});const qr=t.tileCornersToBounds(Bn.canonical),ta=t.getLatitudinalLod(qr.getCenter().lat),ns=t.getGridMatrix(Bn.canonical,qr,ta,Ui.worldSize/Ui._pixelsPerMercatorPixel),Xs=t.globeNormalizeECEF(t.globeTileBounds(Bn.canonical)),ro=co(Ui.projMatrix,un,Oi,Xs,t.globeToMercatorTransition(Ui.zoom),Ai,Ui.frustumCorners.TL,Ui.frustumCorners.TR,Ui.frustumCorners.BR,Ui.frustumCorners.BL,Ui.globeCenterInViewSpace,Ui.globeRadius,Hi,cn,ns);if(pi(Ua,An),xe.setupElevationDraw(Hn,Tt,ki),be.prepareDrawProgram(yt,Tt,Bn.toUnwrapped()),Gn){const[Vs,Ec,vl]=An?Gn.getWirefameBuffers(be.context,ta):Gn.getGridBuffers(ta,0!==cn);Tt.draw(yt,bn,ri,ea,hi,t.CullFaceMode.backCCW,ro,"globe_raster",Vs,Ec,vl)}}}),Gn){const An=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Gt&&An.push("CUSTOM_ANTIALIASING"),Tt=be.useProgram("globeRaster",null,An);for(const Ui of it){const{x:cn,y:bn,z:Bn}=Ui.canonical,Hn=0===bn,ea=bn===(1<<Bn)-1,[wa,Ir,ca,Ua]=Gn.getPoleBuffers(Bn);if(Ua&&(Hn||ea)){const qr=Fe.getTile(Ui);yt.activeTexture.set(bt.TEXTURE0),qr.texture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE);let ta=t.globePoleMatrixForTile(Bn,cn,zt);const ns=t.globeNormalizeECEF(t.globeTileBounds(Ui.canonical)),Xs=(ro,Vs)=>ro.draw(yt,bt.TRIANGLES,ri,t.StencilMode.disabled,hi,t.CullFaceMode.disabled,co(zt.projMatrix,ta,ta,ns,0,Ai,zt.frustumCorners.TL,zt.frustumCorners.TR,zt.frustumCorners.BR,zt.frustumCorners.BL,zt.globeCenterInViewSpace,zt.globeRadius,Hi,0),"globe_pole_raster",Vs,ca,Ua);xe.setupElevationDraw(qr,Tt,ki),be.prepareDrawProgram(yt,Tt,Ui.toUnwrapped()),Hn&&Xs(Tt,wa),ea&&(ta=t.scale(t.create(),ta,[1,-1,1]),Xs(Tt,Ir))}}}}(Y,V,Q,re,de);else{const be=Y.context,xe=be.gl;let Fe,it;const ft=Y.options.showTerrainWireframe?2:0,yt=(zt,Gt)=>{if(it===zt)return;const pi=[vo[zt]];Gt&&pi.push(vo[ft]),Fe=Y.useProgram("terrainRaster",null,pi),it=zt},bt=Y.colorModeForRenderPass(),Tt=new t.DepthMode(xe.LEQUAL,t.DepthMode.ReadWrite,Y.depthRangeFor3D);Ts.update(de);const Ne=Y.transform,_t=Qu(Ne.zoom)*V.exaggeration();(ft?[!1,!0]:[!1]).forEach(zt=>{it=-1;const Gt=zt?xe.LINES:xe.TRIANGLES,[pi,hi]=zt?V.getWirefameBuffer():[V.gridIndexBuffer,V.gridSegments];for(const ri of re){const Oi=Q.getTile(ri),Ai=t.StencilMode.disabled,Gi=V.prevTerrainTileForTile[ri.key],Gn=V.terrainTileForTile[ri.key];zs(Gi,Gn)&&Ts.newMorphing(ri.key,Gi,Gn,de,250),be.activeTexture.set(xe.TEXTURE0),Oi.texture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE,xe.LINEAR_MIPMAP_NEAREST);const Hi=Ts.getMorphValuesForProxy(ri.key),un=Hi?1:0;let ki;Hi&&(ki={morphing:{srcDemTile:Hi.from,dstDemTile:Hi.to,phase:t.easeCubicInOut(Hi.phase)}});const An=wl(ri.projMatrix,ec(ri.canonical,Ne.renderWorldCopies)?_t/10:_t);yt(un,zt),V.setupElevationDraw(Oi,Fe,ki),Y.prepareDrawProgram(be,Fe,ri.toUnwrapped()),Fe.draw(be,Gt,Tt,Ai,bt,t.CullFaceMode.backCCW,An,"terrain_raster",V.gridBuffer,pi,hi)}})}}(_,this,this.proxySourceCache,f,this._updateTimestamp),this.renderingToTexture=!0,_.gpuTimingDeferredRenderEnd(),f.splice(0,f.length))}renderBatch(f){if(0===this._drapedRenderBatches.length)return f+1;this.renderingToTexture=!0;const _=this.painter,I=this.painter.context,Y=this.proxySourceCache,V=this.proxiedCoords[Y.id],Q=this._drapedRenderBatches.shift(),re=[],de=_.style.order;let be=0;for(const xe of V){const Fe=Y.getTileByID(xe.proxyTileKey),it=Y.proxyCachedFBO[xe.key]?Y.proxyCachedFBO[xe.key][f]:void 0,ft=void 0!==it?Y.renderCache[it]:this.pool[be++],yt=void 0!==it;if(Fe.texture=ft.tex,yt&&!ft.dirty){re.push(Fe.tileID);continue}let bt;I.bindFramebuffer.set(ft.fb.framebuffer),this.renderedToTile=!1,ft.dirty&&(I.clear({color:t.Color.transparent,stencil:0}),ft.dirty=!1);for(let Tt=Q.start;Tt<=Q.end;++Tt){const Ne=_.style._layers[de[Tt]];if(Ne.isHidden(_.transform.zoom))continue;const _t=_.style._getLayerSourceCache(Ne),zt=_t?this.proxyToSource[xe.key][_t.id]:[xe];if(!zt)continue;const Gt=zt;I.viewport.set([0,0,ft.fb.width,ft.fb.height]),bt!==(_t?_t.id:null)&&(this._setupStencil(ft,zt,Ne,_t),bt=_t?_t.id:null),_.renderLayer(_,_t,Ne,Gt)}this.renderedToTile?(ft.dirty=!0,re.push(Fe.tileID)):yt||--be,5===be&&(be=0,this.renderToBackBuffer(re))}return this.renderToBackBuffer(re),this.renderingToTexture=!1,I.bindFramebuffer.set(null),I.viewport.set([0,0,_.width,_.height]),Q.end+1}postRender(){}renderCacheEfficiency(f){const _=f.order.length;if(0===_)return{efficiency:100};let I,Y=0,V=0,Q=!1;for(let re=0;re<_;++re){const de=f._layers[f.order[re]];this._style.isLayerDraped(de)?(Q&&++Y,++V):Q||(Q=!0,I=de.id)}return 0===V?{efficiency:100}:{efficiency:100*(1-Y/V),firstUndrapedLayer:I}}getMinElevationBelowMSL(){let f=0;return this._visibleDemTiles.filter(_=>_.dem).forEach(_=>{f=Math.min(f,_.dem.tree.minimums[0])}),0===f?f:(f-30)*this._exaggeration}raycast(f,_,I){if(!this._visibleDemTiles)return null;const Y=this._visibleDemTiles.filter(V=>V.dem).map(V=>{const Q=V.tileID,re=1<<Q.overscaledZ,{x:de,y:be}=Q.canonical,xe=de/re,Fe=(de+1)/re,it=be/re,ft=(be+1)/re;return{minx:xe,miny:it,maxx:Fe,maxy:ft,t:V.dem.tree.raycastRoot(xe,it,Fe,ft,f,_,I),tile:V}});Y.sort((V,Q)=>(null!==V.t?V.t:Number.MAX_VALUE)-(null!==Q.t?Q.t:Number.MAX_VALUE));for(const V of Y){if(null==V.t)return null;const Q=V.tile.dem.tree.raycast(V.minx,V.miny,V.maxx,V.maxy,f,_,I);if(null!=Q)return Q}return null}_createFBO(){const f=this.painter.context,_=f.gl,I=this.drapeBufferSize;f.activeTexture.set(_.TEXTURE0);const Y=new t.Texture(f,{width:I[0],height:I[1],data:null},_.RGBA);Y.bind(_.LINEAR,_.CLAMP_TO_EDGE);const V=f.createFramebuffer(I[0],I[1],!1);return V.colorAttachment.set(Y.texture),V.depthAttachment=new Mt(f,V.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=f.createRenderbuffer(f.gl.DEPTH_STENCIL,I[0],I[1]),this._stencilRef=0,V.depthAttachment.set(this._sharedDepthStencil),f.clear({stencil:0})):V.depthAttachment.set(this._sharedDepthStencil),f.extTextureFilterAnisotropic&&!f.extTextureFilterAnisotropicForceOff&&_.texParameterf(_.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax),{fb:V,tex:Y,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f].hasTransition())return!0;return this._style.order.some(f=>{const _=this._style._layers[f],I=_.isHidden(this.painter.transform.zoom);return"custom"===_.type?!I&&_.shouldRedrape():!I&&_.hasTransition()})}_clearLineLayersFromRenderCache(){let f=!1;for(const I of this._style._getSources())if(I instanceof _n){f=!0;break}if(!f)return;const _={};for(let I=0;I<this._style.order.length;++I){const Y=this._style._layers[this._style.order[I]],V=this._style._getLayerSourceCache(Y);if(V&&!_[V.id]&&!Y.isHidden(this.painter.transform.zoom)&&"line"===Y.type&&Y.widthExpression()instanceof t.ZoomDependentExpression){_[V.id]=!0;for(const Q of this.proxyCoords){const re=this.proxyToSource[Q.key][V.id];if(re)for(const de of re)this._clearRenderCacheForTile(V.id,de)}}}}_clearRasterLayersFromRenderCache(){let f=!1;for(const I in this._style._sourceCaches)if(this._style._sourceCaches[I]._source instanceof Vi){f=!0;break}if(!f)return;const _={};for(let I=0;I<this._style.order.length;++I){const Y=this._style._layers[this._style.order[I]],V=this._style._getLayerSourceCache(Y);if(!V||_[V.id]||Y.isHidden(this.painter.transform.zoom)||"raster"!==Y.type)continue;const Q=Y.paint.get("raster-fade-duration");for(const re of this.proxyCoords){const de=this.proxyToSource[re.key][V.id];if(de)for(const be of de){const xe=ed(V.getTile(be),V.findLoadedParent(be,0),V,this.painter.transform,Q);(1!==xe.opacity||0!==xe.mix)&&this._clearRenderCacheForTile(V.id,be)}}}}_setupDrapedRenderBatches(){const f=this._style.order,_=f.length;if(0===_)return;const I=[];let Y,V=0,Q=this._style._layers[f[V]];for(;!this._style.isLayerDraped(Q)&&Q.isHidden(this.painter.transform.zoom)&&++V<_;)Q=this._style._layers[f[V]];for(;V<_;++V){const re=this._style._layers[f[V]];re.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(re)?void 0===Y&&(Y=V):void 0!==Y&&(I.push({start:Y,end:V-1}),Y=void 0))}void 0!==Y&&I.push({start:Y,end:V-1}),this._drapedRenderBatches=I}_setupRenderCache(f){const _=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,_.renderCache.length>_.renderCachePool.length){const Q=Object.values(_.proxyCachedFBO);_.proxyCachedFBO={};for(let re=0;re<Q.length;++re){const de=Object.values(Q[re]);_.renderCachePool.push(...de)}}return}this._clearRasterLayersFromRenderCache();const I=this.proxyCoords,Y=this._tilesDirty;for(let Q=I.length-1;Q>=0;Q--){const re=I[Q];if(_.getTileByID(re.key),void 0!==_.proxyCachedFBO[re.key]){const de=f[re.key],be=this.proxyToSource[re.key];let xe=0;for(const Fe in be){const it=be[Fe],ft=de[Fe];if(!ft||ft.length!==it.length||it.some((yt,bt)=>yt!==ft[bt]||Y[Fe]&&Y[Fe].hasOwnProperty(yt.key))){xe=-1;break}++xe}for(const Fe in _.proxyCachedFBO[re.key])_.renderCache[_.proxyCachedFBO[re.key][Fe]].dirty=xe<0||xe!==Object.values(de).length}}const V=[...this._drapedRenderBatches];V.sort((Q,re)=>re.end-re.start-(Q.end-Q.start));for(const Q of V)for(const re of I){if(_.proxyCachedFBO[re.key])continue;let de=_.renderCachePool.pop();void 0===de&&_.renderCache.length<50&&(de=_.renderCache.length,_.renderCache.push(this._createFBO())),void 0!==de&&(_.proxyCachedFBO[re.key]={},_.proxyCachedFBO[re.key][Q.start]=de,_.renderCache[de].dirty=!0)}this._tilesDirty={}}_setupStencil(f,_,I,Y){if(!Y||!this._sourceTilesOverlap[Y.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const V=this.painter.context,Q=V.gl;if(_.length<=1)return void(this._overlapStencilType=!1);let re;if(I.isTileClipped())re=_.length,this._overlapStencilMode.test={func:Q.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(_[0].overscaledZ>_[_.length-1].overscaledZ))return void(this._overlapStencilType=!1);re=1,this._overlapStencilMode.test={func:Q.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+re>255&&(V.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=re,this._overlapStencilMode.ref=this._stencilRef,I.isTileClipped()&&this._renderTileClippingMasks(_,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(f){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[f.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(f,_){const I=this.painter,Y=this.painter.context,V=Y.gl;I._tileClippingMaskIDs={},Y.setColorMode(t.ColorMode.disabled),Y.setDepthMode(t.DepthMode.disabled);const Q=I.useProgram("clippingMask");for(const re of f){const de=I._tileClippingMaskIDs[re.key]=--_;Q.draw(Y,V.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:V.ALWAYS,mask:0},de,255,V.KEEP,V.KEEP,V.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Oa(re.projMatrix),"$clipping",I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}pointCoordinate(f){const _=this.painter.transform;if(f.x<0||f.x>_.width||f.y<0||f.y>_.height)return null;const I=[f.x,f.y,1,1];t.transformMat4$1(I,I,_.pixelMatrixInverse),t.scale$1(I,I,1/I[3]),I[0]/=_.worldSize,I[1]/=_.worldSize;const Y=_._camera.position,V=t.mercatorZfromAltitude(1,_.center.lat),Q=[Y[0],Y[1],Y[2]/V,0],re=t.subtract([],I.slice(0,3),Q);t.normalize(re,re);const de=this.raycast(Q,re,this._exaggeration);return null!==de&&de?(t.scaleAndAdd(Q,Q,re,de),Q[3]=Q[2],Q[2]*=V,Q):null}drawDepth(){const f=this.painter,_=f.context,I=this.proxySourceCache,Y=Math.ceil(f.width),V=Math.ceil(f.height);if(!this._depthFBO||this._depthFBO.width===Y&&this._depthFBO.height===V||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Q=_.gl,re=_.createFramebuffer(Y,V,!0);_.activeTexture.set(Q.TEXTURE0);const de=new t.Texture(_,{width:Y,height:V,data:null},Q.RGBA);de.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),re.colorAttachment.set(de.texture);const be=_.createRenderbuffer(_.gl.DEPTH_COMPONENT16,Y,V);re.depthAttachment.set(be),this._depthFBO=re,this._depthTexture=de}_.bindFramebuffer.set(this._depthFBO.framebuffer),_.viewport.set([0,0,Y,V]),function(Q,re,de,be){if("globe"===Q.transform.projection.name)return;const xe=Q.context,Fe=xe.gl;xe.clear({depth:1});const it=Q.useProgram("terrainDepth"),ft=new t.DepthMode(Fe.LESS,t.DepthMode.ReadWrite,Q.depthRangeFor3D);for(const yt of be){const bt=de.getTile(yt),Tt=wl(yt.projMatrix,0);re.setupElevationDraw(bt,it),it.draw(xe,Fe.TRIANGLES,ft,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,Tt,"terrain_depth",re.gridBuffer,re.gridIndexBuffer,re.gridNoSkirtSegments)}}(f,this,I,this.proxyCoords)}_setupProxiedCoordsForOrtho(f,_,I){if(f.getSource()instanceof Yt)return this._setupProxiedCoordsForImageSource(f,_,I);this._findCoveringTileCache[f.id]=this._findCoveringTileCache[f.id]||{};const Y=this.proxiedCoords[f.id]=[],V=this.proxyCoords;for(let re=0;re<V.length;re++){const de=V[re],be=this._findTileCoveringTileID(de,f);if(be){const xe=this._createProxiedId(de,be,I[de.key]&&I[de.key][f.id]);Y.push(xe),this.proxyToSource[de.key][f.id]=[xe]}}let Q=!1;for(let re=0;re<_.length;re++){const de=f.getTile(_[re]);if(!de||!de.hasData())continue;const be=this._findTileCoveringTileID(de.tileID,this.proxySourceCache);if(be&&be.tileID.canonical.z!==de.tileID.canonical.z){const xe=this.proxyToSource[be.tileID.key][f.id],Fe=this._createProxiedId(be.tileID,de,I[be.tileID.key]&&I[be.tileID.key][f.id]);xe?xe.splice(xe.length-1,0,Fe):this.proxyToSource[be.tileID.key][f.id]=[Fe],Y.push(Fe),Q=!0}}this._sourceTilesOverlap[f.id]=Q}_setupProxiedCoordsForImageSource(f,_,I){if(!f.getSource().loaded())return;const Y=this.proxiedCoords[f.id]=[],V=this.proxyCoords,Q=f.getSource(),re=new t.Point(Q.tileID.x,Q.tileID.y)._div(1<<Q.tileID.z),de=Q.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce((xe,Fe)=>(xe.min.x=Math.min(xe.min.x,Fe.x-re.x),xe.min.y=Math.min(xe.min.y,Fe.y-re.y),xe.max.x=Math.max(xe.max.x,Fe.x-re.x),xe.max.y=Math.max(xe.max.y,Fe.y-re.y),xe),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),be=(xe,Fe)=>{const it=xe.wrap+xe.canonical.x/(1<<xe.canonical.z),ft=xe.canonical.y/(1<<xe.canonical.z),yt=t.EXTENT/(1<<xe.canonical.z),bt=Fe.wrap+Fe.canonical.x/(1<<Fe.canonical.z),Tt=Fe.canonical.y/(1<<Fe.canonical.z);return it+yt<bt+de.min.x||it>bt+de.max.x||ft+yt<Tt+de.min.y||ft>Tt+de.max.y};for(let xe=0;xe<V.length;xe++){const Fe=V[xe];for(let it=0;it<_.length;it++){const ft=f.getTile(_[it]);if(!ft||!ft.hasData()||be(Fe,ft.tileID))continue;const yt=this._createProxiedId(Fe,ft,I[Fe.key]&&I[Fe.key][f.id]),bt=this.proxyToSource[Fe.key][f.id];bt?bt.push(yt):this.proxyToSource[Fe.key][f.id]=[yt],Y.push(yt)}}}_createProxiedId(f,_,I){let Y=this.orthoMatrix;if(I){const V=I.find(Q=>Q.key===_.tileID.key);if(V)return V}if(_.tileID.key!==f.key){const V=f.canonical.z-_.tileID.canonical.z;let Q,re,de;Y=t.create();const be=_.tileID.wrap-f.wrap<<f.overscaledZ;V>0?(Q=t.EXTENT>>V,re=Q*((_.tileID.canonical.x<<V)-f.canonical.x+be),de=Q*((_.tileID.canonical.y<<V)-f.canonical.y)):(Q=t.EXTENT<<-V,re=t.EXTENT*(_.tileID.canonical.x-(f.canonical.x+be<<-V)),de=t.EXTENT*(_.tileID.canonical.y-(f.canonical.y<<-V))),t.ortho(Y,0,Q,0,Q,0,1),t.translate(Y,Y,[re,de,0])}return new Ys(_.tileID,f.key,Y)}_findTileCoveringTileID(f,_){let I=_.getTile(f);if(I&&I.hasData())return I;const Y=this._findCoveringTileCache[_.id],V=Y[f.key];if(I=V?_.getTileByID(V):null,I&&I.hasData()||null===V)return I;let Q=I?I.tileID:f,re=Q.overscaledZ;const de=_.getSource().minzoom,be=[];if(!V){const Fe=_.getSource().maxzoom;if(f.canonical.z>=Fe){const it=f.canonical.z-Fe;_.getSource().reparseOverscaled?(re=Math.max(f.canonical.z+2,_.transform.tileZoom),Q=new t.OverscaledTileID(re,f.wrap,Fe,f.canonical.x>>it,f.canonical.y>>it)):0!==it&&(re=Fe,Q=new t.OverscaledTileID(re,f.wrap,Fe,f.canonical.x>>it,f.canonical.y>>it))}Q.key!==f.key&&(be.push(Q.key),I=_.getTile(Q))}const xe=Fe=>{be.forEach(it=>{Y[it]=Fe}),be.length=0};for(re-=1;re>=de&&(!I||!I.hasData());re--){I&&xe(I.tileID.key);const Fe=Q.calculateScaledKey(re);if(I=_.getTileByID(Fe),I&&I.hasData())break;const it=Y[Fe];if(null===it)break;void 0===it?be.push(Fe):I=_.getTileByID(it)}return xe(I?I.tileID.key:null),I&&I.hasData()?I:null}findDEMTileFor(f){return this.enabled?this._findTileCoveringTileID(f,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(f,_){let I=this._tilesDirty[f];I||(I=this._tilesDirty[f]={}),I[_.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const f=function(_){let I=0;const Y=new t.StructArrayLayout2ui4,V=131;for(let Q=1;Q<129;Q++){for(let re=1;re<129;re++)I=Q*V+re,Y.emplaceBack(I,I+1),Y.emplaceBack(I,I+V),Y.emplaceBack(I+1,I+V),128===Q&&Y.emplaceBack(I+V,I+V+1);Y.emplaceBack(I+1,I+1+V)}return Y}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(f),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,f.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class ps{static cacheKey(f,_,I,Y){let V=`${_}${Y?Y.cacheKey:""}`;for(const Q of I)f.usedDefines.includes(Q)&&(V+=`/${Q}`);return V}constructor(f,_,I,Y,V,Q){const re=f.gl;this.program=re.createProgram();const de=function(Ne){const _t=[];for(let zt=0;zt<Ne.length;zt++){if(null===Ne[zt])continue;const Gt=Ne[zt].split(" ");_t.push(Gt.pop())}return _t}(I.staticAttributes),be=Y?Y.getBinderAttributes():[],xe=de.concat(be);let Fe=Y?Y.defines():[];Fe=Fe.concat(Q.map(Ne=>`#define ${Ne}`));const it=f.isWebGL2?"#version 300 es\n":"",ft=it+Fe.concat(f.extStandardDerivatives&&0===it.length?"#extension GL_OES_standard_derivatives : enable\n".concat(Cs):Cs,Cs,vd,qd.fragmentSource,Au.fragmentSource,I.fragmentSource).join("\n"),yt=it+Fe.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",vd,qd.vertexSource,Au.vertexSource,Bc.vertexSource,I.vertexSource).join("\n"),bt=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);re.shaderSource(bt,ft),re.compileShader(bt),re.attachShader(this.program,bt);const Tt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())this.failedToCreate=!0;else{re.shaderSource(Tt,yt),re.compileShader(Tt),re.attachShader(this.program,Tt),this.attributes={},this.numAttributes=xe.length;for(let Ne=0;Ne<this.numAttributes;Ne++)xe[Ne]&&(re.bindAttribLocation(this.program,Ne,xe[Ne]),this.attributes[xe[Ne]]=Ne);re.linkProgram(this.program),re.deleteShader(Tt),re.deleteShader(bt),this.fixedUniforms=V(f),this.binderUniforms=Y?Y.getUniforms(f):[],Q.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new t.Uniform1i(Ne=f),u_dem_prev:new t.Uniform1i(Ne),u_dem_unpack:new t.Uniform4f(Ne),u_dem_tl:new t.Uniform2f(Ne),u_dem_scale:new t.Uniform1f(Ne),u_dem_tl_prev:new t.Uniform2f(Ne),u_dem_scale_prev:new t.Uniform1f(Ne),u_dem_size:new t.Uniform1f(Ne),u_dem_lerp:new t.Uniform1f(Ne),u_exaggeration:new t.Uniform1f(Ne),u_depth:new t.Uniform1i(Ne),u_depth_size_inv:new t.Uniform2f(Ne),u_meter_to_dem:new t.Uniform1f(Ne),u_label_plane_matrix_inv:new t.UniformMatrix4f(Ne)}),Q.includes("GLOBE")&&(this.globeUniforms=(Ne=>({u_tile_tl_up:new t.Uniform3f(Ne),u_tile_tr_up:new t.Uniform3f(Ne),u_tile_br_up:new t.Uniform3f(Ne),u_tile_bl_up:new t.Uniform3f(Ne),u_tile_up_scale:new t.Uniform1f(Ne)}))(f)),Q.includes("FOG")&&(this.fogUniforms=(Ne=>({u_fog_matrix:new t.UniformMatrix4f(Ne),u_fog_range:new t.Uniform2f(Ne),u_fog_color:new t.Uniform4f(Ne),u_fog_horizon_blend:new t.Uniform1f(Ne),u_fog_temporal_offset:new t.Uniform1f(Ne),u_frustum_tl:new t.Uniform3f(Ne),u_frustum_tr:new t.Uniform3f(Ne),u_frustum_br:new t.Uniform3f(Ne),u_frustum_bl:new t.Uniform3f(Ne),u_globe_pos:new t.Uniform3f(Ne),u_globe_radius:new t.Uniform1f(Ne),u_globe_transition:new t.Uniform1f(Ne),u_is_globe:new t.Uniform1i(Ne),u_viewport:new t.Uniform2f(Ne)}))(f))}var Ne}setTerrainUniformValues(f,_){if(!this.terrainUniforms)return;const I=this.terrainUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const Y in _)I[Y]&&I[Y].set(this.program,Y,_[Y])}}setGlobeUniformValues(f,_){if(!this.globeUniforms)return;const I=this.globeUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const Y in _)I[Y]&&I[Y].set(this.program,Y,_[Y])}}setFogUniformValues(f,_){if(!this.fogUniforms)return;const I=this.fogUniforms;if(!this.failedToCreate){f.program.set(this.program);for(const Y in _)I[Y].set(this.program,Y,_[Y])}}draw(f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt){const Tt=f.gl;if(this.failedToCreate)return;f.program.set(this.program),f.setDepthMode(I),f.setStencilMode(Y),f.setColorMode(V),f.setCullFace(Q);for(const _t of Object.keys(this.fixedUniforms))this.fixedUniforms[_t].set(this.program,_t,re[_t]);yt&&yt.setUniforms(this.program,f,this.binderUniforms,it,{zoom:ft});const Ne={[Tt.LINES]:2,[Tt.TRIANGLES]:3,[Tt.LINE_STRIP]:1}[_];for(const _t of Fe.get()){const zt=_t.vaos||(_t.vaos={});(zt[de]||(zt[de]=new bo)).bind(f,this,be,yt?yt.getPaintVertexBuffers():[],xe,_t.vertexOffset,bt||[]),Tt.drawElements(_,_t.primitiveLength*Ne,Tt.UNSIGNED_SHORT,_t.primitiveOffset*Ne*2)}}}function td(k,f){const _=Math.pow(2,f.tileID.overscaledZ),I=f.tileSize*Math.pow(2,k.transform.tileZoom)/_,Y=I*(f.tileID.canonical.x+f.tileID.wrap*_),V=I*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_tile_units_to_pixels:1/Nn(f,1,k.transform.tileZoom),u_pixel_coord_upper:[Y>>16,V>>16],u_pixel_coord_lower:[65535&Y,65535&V]}}const Wo=t.create(),id=(k,f,_,I,Y,V,Q,re,de,be,xe)=>{const Fe=f.style.light,it=Fe.properties.get("position"),ft=[it.x,it.y,it.z],yt=t.create$1();"viewport"===Fe.properties.get("anchor")&&(t.fromRotation(yt,-f.transform.angle),t.transformMat3(ft,ft,yt));const bt=Fe.properties.get("color"),Tt=f.transform,Ne={u_matrix:k,u_lightpos:ft,u_lightintensity:Fe.properties.get("intensity"),u_lightcolor:[bt.r,bt.g,bt.b],u_vertical_gradient:+_,u_opacity:I,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Wo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Y,u_edge_radius:V};return"globe"===Tt.projection.name&&(Ne.u_tile_id=[Q.canonical.x,Q.canonical.y,1<<Q.canonical.z],Ne.u_zoom_transition=de,Ne.u_inv_rot_matrix=xe,Ne.u_merc_center=be,Ne.u_up_dir=Tt.projection.upVector(new t.CanonicalTileID(0,0,0),be[0]*t.EXTENT,be[1]*t.EXTENT),Ne.u_height_lift=re),Ne},Mu=(k,f,_,I,Y,V,Q,re,de,be,xe,Fe)=>{const it=id(k,f,_,I,Y,V,Q,de,be,xe,Fe),ft={u_height_factor:-Math.pow(2,Q.overscaledZ)/re.tileSize/8};return t.extend(it,td(f,re),ft)},oa=k=>({u_matrix:k}),ko=(k,f,_)=>t.extend(oa(k),td(f,_)),Ol=(k,f)=>({u_matrix:k,u_world:f}),Ld=(k,f,_,I)=>t.extend(ko(k,f,_),{u_world:I}),qa=t.create(),Nc=(k,f,_,I,Y,V)=>{const Q=k.transform,re="globe"===Q.projection.name;let de;if("map"===V.paint.get("circle-pitch-alignment"))if(re){const xe=t.globePixelsToTileUnits(Q.zoom,f.canonical)*Q._pixelsPerMercatorPixel;de=Float32Array.from([xe,0,0,xe])}else de=Q.calculatePixelsToTileUnitsMatrix(_);else de=new Float32Array([Q.pixelsToGLUnits[0],0,0,Q.pixelsToGLUnits[1]]);const be={u_camera_to_center_distance:Q.cameraToCenterDistance,u_matrix:k.translatePosMatrix(f.projMatrix,_,V.paint.get("circle-translate"),V.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:de,u_inv_rot_matrix:qa,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(re){be.u_inv_rot_matrix=I,be.u_merc_center=Y,be.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],be.u_zoom_transition=t.globeToMercatorTransition(Q.zoom);const xe=Y[0]*t.EXTENT,Fe=Y[1]*t.EXTENT;be.u_up_dir=Q.projection.upVector(new t.CanonicalTileID(0,0,0),xe,Fe)}return be},Ll=k=>{const f=[];return"map"===k.paint.get("circle-pitch-alignment")&&f.push("PITCH_WITH_MAP"),"map"===k.paint.get("circle-pitch-scale")&&f.push("SCALE_WITH_MAP"),f},$a=(k,f,_,I)=>{const Y=t.EXTENT/_.tileSize;return{u_matrix:k,u_camera_to_center_distance:f.getCameraToCenterDistance(I),u_extrude_scale:[f.pixelsToGLUnits[0]/Y,f.pixelsToGLUnits[1]/Y]}},Kc=(k,f,_=1)=>({u_matrix:k,u_color:f,u_overlay:0,u_overlay_scale:_}),bc=t.create(),Jc=(k,f,_,I,Y,V,Q)=>{const re=k.transform,de="globe"===re.projection.name,be=de?t.globePixelsToTileUnits(re.zoom,f.canonical)*re._pixelsPerMercatorPixel:Nn(_,1,V),xe={u_matrix:f.projMatrix,u_extrude_scale:be,u_intensity:Q,u_inv_rot_matrix:bc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(de){xe.u_inv_rot_matrix=I,xe.u_merc_center=Y,xe.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],xe.u_zoom_transition=t.globeToMercatorTransition(re.zoom);const Fe=Y[0]*t.EXTENT,it=Y[1]*t.EXTENT;xe.u_up_dir=re.projection.upVector(new t.CanonicalTileID(0,0,0),Fe,it)}return xe},Ru=(k,f,_,I,Y,V,Q)=>{const re=k.transform,de=re.calculatePixelsToTileUnitsMatrix(f);return{u_matrix:Qs(k,f,_,I),u_pixels_to_tile_units:de,u_device_pixel_ratio:V,u_units_to_pixels:[1/re.pixelsToGLUnits[0],1/re.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Y,u_texsize:el(_)?f.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Qc(f,k.transform),u_alpha_discard_threshold:0,u_trim_offset:Q}},nd=(k,f,_,I,Y)=>{const V=k.transform;return{u_matrix:Qs(k,f,_,I),u_texsize:f.imageAtlasTexture.size,u_pixels_to_tile_units:V.calculatePixelsToTileUnitsMatrix(f),u_device_pixel_ratio:Y,u_image:0,u_tile_units_to_pixels:Qc(f,V),u_units_to_pixels:[1/V.pixelsToGLUnits[0],1/V.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Qc(k,f){return 1/Nn(k,1,f.tileZoom)}function Qs(k,f,_,I){return k.translatePosMatrix(I||f.tileID.projMatrix,f,_.paint.get("line-translate"),_.paint.get("line-translate-anchor"))}function el(k){const f=k.paint.get("line-dasharray").value;return f.value||"constant"!==f.kind}const Cl=(k,f,_,I,Y,V)=>{return{u_matrix:k,u_tl_parent:f,u_scale_parent:_,u_fade_t:I.mix,u_opacity:I.opacity*Y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Y.paint.get("raster-brightness-min"),u_brightness_high:Y.paint.get("raster-brightness-max"),u_saturation_factor:(re=Y.paint.get("raster-saturation"),re>0?1-1/(1.001-re):-re),u_contrast_factor:(Q=Y.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:wc(Y.paint.get("raster-hue-rotate")),u_perspective_transform:V};var Q,re};function wc(k){k*=Math.PI/180;const f=Math.sin(k),_=Math.cos(k);return[(2*_+1)/3,(-Math.sqrt(3)*f-_+1)/3,(Math.sqrt(3)*f-_+1)/3]}const eu=t.create(),Rs=(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt)=>{const Tt=Y.transform,Ne={u_is_size_zoom_constant:+("constant"===k||"source"===k),u_is_size_feature_constant:+("constant"===k||"camera"===k),u_size_t:f?f.uSizeT:0,u_size:f?f.uSize:0,u_camera_to_center_distance:Tt.cameraToCenterDistance,u_rotate_symbol:+_,u_aspect_ratio:Tt.width/Tt.height,u_fade_change:Y.options.fadeDuration?Y.symbolFadeChange:1,u_matrix:V,u_label_plane_matrix:Q,u_coord_matrix:re,u_is_text:+de,u_pitch_with_map:+I,u_texsize:be,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:eu,u_up_vector:[0,-1,0]};return"globe"===bt.name&&(Ne.u_tile_id=[xe.canonical.x,xe.canonical.y,1<<xe.canonical.z],Ne.u_zoom_transition=Fe,Ne.u_inv_rot_matrix=ft,Ne.u_merc_center=it,Ne.u_camera_forward=Tt._camera.forward(),Ne.u_ecef_origin=t.globeECEFOrigin(Tt.globeMatrix,xe.toUnwrapped()),Ne.u_tile_matrix=Float32Array.from(Tt.globeMatrix),Ne.u_up_vector=yt),Ne},_o=(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt,Tt)=>t.extend(Rs(k,f,_,I,Y,V,Q,re,de,be,Fe,it,ft,yt,bt,Tt),{u_gamma_scale:I?Y.transform.cameraToCenterDistance*Math.cos(Y.terrain?0:Y.transform._pitch):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+xe}),Pl=(k,f,_,I,Y,V,Q,re,de,be,xe,Fe,it,ft,yt,bt)=>t.extend(_o(k,f,_,I,Y,V,Q,re,!0,de,!0,xe,Fe,it,ft,yt,bt),{u_texsize_icon:be,u_texture_icon:1}),sl=(k,f,_)=>({u_matrix:k,u_opacity:f,u_color:_}),cf=(k,f,_,I,Y)=>t.extend(function(V,Q,re){const de=Q.imageManager.getPattern(V.toString()),{width:be,height:xe}=Q.imageManager.getPixelSize(),Fe=Math.pow(2,re.tileID.overscaledZ),it=re.tileSize*Math.pow(2,Q.transform.tileZoom)/Fe,ft=it*(re.tileID.canonical.x+re.tileID.wrap*Fe),yt=it*re.tileID.canonical.y;return{u_image:0,u_pattern_tl:de.tl,u_pattern_br:de.br,u_texsize:[be,xe],u_pattern_size:de.displaySize,u_tile_units_to_pixels:1/Nn(re,1,Q.transform.tileZoom),u_pixel_coord_upper:[ft>>16,yt>>16],u_pixel_coord_lower:[65535&ft,65535&yt]}}(I,_,Y),{u_matrix:k,u_opacity:f}),zc={fillExtrusion:k=>({u_matrix:new t.UniformMatrix4f(k),u_lightpos:new t.Uniform3f(k),u_lightintensity:new t.Uniform1f(k),u_lightcolor:new t.Uniform3f(k),u_vertical_gradient:new t.Uniform1f(k),u_opacity:new t.Uniform1f(k),u_edge_radius:new t.Uniform1f(k),u_ao:new t.Uniform2f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_up_dir:new t.Uniform3f(k),u_height_lift:new t.Uniform1f(k)}),fillExtrusionPattern:k=>({u_matrix:new t.UniformMatrix4f(k),u_lightpos:new t.Uniform3f(k),u_lightintensity:new t.Uniform1f(k),u_lightcolor:new t.Uniform3f(k),u_vertical_gradient:new t.Uniform1f(k),u_height_factor:new t.Uniform1f(k),u_edge_radius:new t.Uniform1f(k),u_ao:new t.Uniform2f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_up_dir:new t.Uniform3f(k),u_height_lift:new t.Uniform1f(k),u_image:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_pixel_coord_upper:new t.Uniform2f(k),u_pixel_coord_lower:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k),u_opacity:new t.Uniform1f(k)}),fill:k=>({u_matrix:new t.UniformMatrix4f(k)}),fillPattern:k=>({u_matrix:new t.UniformMatrix4f(k),u_image:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_pixel_coord_upper:new t.Uniform2f(k),u_pixel_coord_lower:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k)}),fillOutline:k=>({u_matrix:new t.UniformMatrix4f(k),u_world:new t.Uniform2f(k)}),fillOutlinePattern:k=>({u_matrix:new t.UniformMatrix4f(k),u_world:new t.Uniform2f(k),u_image:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_pixel_coord_upper:new t.Uniform2f(k),u_pixel_coord_lower:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k)}),circle:k=>({u_camera_to_center_distance:new t.Uniform1f(k),u_extrude_scale:new t.UniformMatrix2f(k),u_device_pixel_ratio:new t.Uniform1f(k),u_matrix:new t.UniformMatrix4f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_up_dir:new t.Uniform3f(k)}),collisionBox:k=>({u_matrix:new t.UniformMatrix4f(k),u_camera_to_center_distance:new t.Uniform1f(k),u_extrude_scale:new t.Uniform2f(k)}),collisionCircle:k=>({u_matrix:new t.UniformMatrix4f(k),u_inv_matrix:new t.UniformMatrix4f(k),u_camera_to_center_distance:new t.Uniform1f(k),u_viewport_size:new t.Uniform2f(k)}),debug:k=>({u_color:new t.UniformColor(k),u_matrix:new t.UniformMatrix4f(k),u_overlay:new t.Uniform1i(k),u_overlay_scale:new t.Uniform1f(k)}),clippingMask:k=>({u_matrix:new t.UniformMatrix4f(k)}),heatmap:k=>({u_extrude_scale:new t.Uniform1f(k),u_intensity:new t.Uniform1f(k),u_matrix:new t.UniformMatrix4f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_up_dir:new t.Uniform3f(k)}),heatmapTexture:k=>({u_image:new t.Uniform1i(k),u_color_ramp:new t.Uniform1i(k),u_opacity:new t.Uniform1f(k)}),hillshade:k=>({u_matrix:new t.UniformMatrix4f(k),u_image:new t.Uniform1i(k),u_latrange:new t.Uniform2f(k),u_light:new t.Uniform2f(k),u_shadow:new t.UniformColor(k),u_highlight:new t.UniformColor(k),u_accent:new t.UniformColor(k)}),hillshadePrepare:k=>({u_matrix:new t.UniformMatrix4f(k),u_image:new t.Uniform1i(k),u_dimension:new t.Uniform2f(k),u_zoom:new t.Uniform1f(k),u_unpack:new t.Uniform4f(k)}),line:k=>({u_matrix:new t.UniformMatrix4f(k),u_pixels_to_tile_units:new t.UniformMatrix2f(k),u_device_pixel_ratio:new t.Uniform1f(k),u_units_to_pixels:new t.Uniform2f(k),u_dash_image:new t.Uniform1i(k),u_gradient_image:new t.Uniform1i(k),u_image_height:new t.Uniform1f(k),u_texsize:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k),u_alpha_discard_threshold:new t.Uniform1f(k),u_trim_offset:new t.Uniform2f(k)}),linePattern:k=>({u_matrix:new t.UniformMatrix4f(k),u_texsize:new t.Uniform2f(k),u_pixels_to_tile_units:new t.UniformMatrix2f(k),u_device_pixel_ratio:new t.Uniform1f(k),u_image:new t.Uniform1i(k),u_units_to_pixels:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k),u_alpha_discard_threshold:new t.Uniform1f(k)}),raster:k=>({u_matrix:new t.UniformMatrix4f(k),u_tl_parent:new t.Uniform2f(k),u_scale_parent:new t.Uniform1f(k),u_fade_t:new t.Uniform1f(k),u_opacity:new t.Uniform1f(k),u_image0:new t.Uniform1i(k),u_image1:new t.Uniform1i(k),u_brightness_low:new t.Uniform1f(k),u_brightness_high:new t.Uniform1f(k),u_saturation_factor:new t.Uniform1f(k),u_contrast_factor:new t.Uniform1f(k),u_spin_weights:new t.Uniform3f(k),u_perspective_transform:new t.Uniform2f(k)}),symbolIcon:k=>({u_is_size_zoom_constant:new t.Uniform1i(k),u_is_size_feature_constant:new t.Uniform1i(k),u_size_t:new t.Uniform1f(k),u_size:new t.Uniform1f(k),u_camera_to_center_distance:new t.Uniform1f(k),u_rotate_symbol:new t.Uniform1i(k),u_aspect_ratio:new t.Uniform1f(k),u_fade_change:new t.Uniform1f(k),u_matrix:new t.UniformMatrix4f(k),u_label_plane_matrix:new t.UniformMatrix4f(k),u_coord_matrix:new t.UniformMatrix4f(k),u_is_text:new t.Uniform1i(k),u_pitch_with_map:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_camera_forward:new t.Uniform3f(k),u_tile_matrix:new t.UniformMatrix4f(k),u_up_vector:new t.Uniform3f(k),u_ecef_origin:new t.Uniform3f(k),u_texture:new t.Uniform1i(k)}),symbolSDF:k=>({u_is_size_zoom_constant:new t.Uniform1i(k),u_is_size_feature_constant:new t.Uniform1i(k),u_size_t:new t.Uniform1f(k),u_size:new t.Uniform1f(k),u_camera_to_center_distance:new t.Uniform1f(k),u_rotate_symbol:new t.Uniform1i(k),u_aspect_ratio:new t.Uniform1f(k),u_fade_change:new t.Uniform1f(k),u_matrix:new t.UniformMatrix4f(k),u_label_plane_matrix:new t.UniformMatrix4f(k),u_coord_matrix:new t.UniformMatrix4f(k),u_is_text:new t.Uniform1i(k),u_pitch_with_map:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_texture:new t.Uniform1i(k),u_gamma_scale:new t.Uniform1f(k),u_device_pixel_ratio:new t.Uniform1f(k),u_tile_id:new t.Uniform3f(k),u_zoom_transition:new t.Uniform1f(k),u_inv_rot_matrix:new t.UniformMatrix4f(k),u_merc_center:new t.Uniform2f(k),u_camera_forward:new t.Uniform3f(k),u_tile_matrix:new t.UniformMatrix4f(k),u_up_vector:new t.Uniform3f(k),u_ecef_origin:new t.Uniform3f(k),u_is_halo:new t.Uniform1i(k)}),symbolTextAndIcon:k=>({u_is_size_zoom_constant:new t.Uniform1i(k),u_is_size_feature_constant:new t.Uniform1i(k),u_size_t:new t.Uniform1f(k),u_size:new t.Uniform1f(k),u_camera_to_center_distance:new t.Uniform1f(k),u_rotate_symbol:new t.Uniform1i(k),u_aspect_ratio:new t.Uniform1f(k),u_fade_change:new t.Uniform1f(k),u_matrix:new t.UniformMatrix4f(k),u_label_plane_matrix:new t.UniformMatrix4f(k),u_coord_matrix:new t.UniformMatrix4f(k),u_is_text:new t.Uniform1i(k),u_pitch_with_map:new t.Uniform1i(k),u_texsize:new t.Uniform2f(k),u_texsize_icon:new t.Uniform2f(k),u_texture:new t.Uniform1i(k),u_texture_icon:new t.Uniform1i(k),u_gamma_scale:new t.Uniform1f(k),u_device_pixel_ratio:new t.Uniform1f(k),u_is_halo:new t.Uniform1i(k)}),background:k=>({u_matrix:new t.UniformMatrix4f(k),u_opacity:new t.Uniform1f(k),u_color:new t.UniformColor(k)}),backgroundPattern:k=>({u_matrix:new t.UniformMatrix4f(k),u_opacity:new t.Uniform1f(k),u_image:new t.Uniform1i(k),u_pattern_tl:new t.Uniform2f(k),u_pattern_br:new t.Uniform2f(k),u_texsize:new t.Uniform2f(k),u_pattern_size:new t.Uniform2f(k),u_pixel_coord_upper:new t.Uniform2f(k),u_pixel_coord_lower:new t.Uniform2f(k),u_tile_units_to_pixels:new t.Uniform1f(k)}),terrainRaster:Ks,terrainDepth:Ks,skybox:k=>({u_matrix:new t.UniformMatrix4f(k),u_sun_direction:new t.Uniform3f(k),u_cubemap:new t.Uniform1i(k),u_opacity:new t.Uniform1f(k),u_temporal_offset:new t.Uniform1f(k)}),skyboxGradient:k=>({u_matrix:new t.UniformMatrix4f(k),u_color_ramp:new t.Uniform1i(k),u_center_direction:new t.Uniform3f(k),u_radius:new t.Uniform1f(k),u_opacity:new t.Uniform1f(k),u_temporal_offset:new t.Uniform1f(k)}),skyboxCapture:k=>({u_matrix_3f:new t.UniformMatrix3f(k),u_sun_direction:new t.Uniform3f(k),u_sun_intensity:new t.Uniform1f(k),u_color_tint_r:new t.Uniform4f(k),u_color_tint_m:new t.Uniform4f(k),u_luminance:new t.Uniform1f(k)}),globeRaster:k=>({u_proj_matrix:new t.UniformMatrix4f(k),u_globe_matrix:new t.UniformMatrix4f(k),u_normalize_matrix:new t.UniformMatrix4f(k),u_merc_matrix:new t.UniformMatrix4f(k),u_zoom_transition:new t.Uniform1f(k),u_merc_center:new t.Uniform2f(k),u_image0:new t.Uniform1i(k),u_grid_matrix:new t.UniformMatrix3f(k),u_skirt_height:new t.Uniform1f(k),u_frustum_tl:new t.Uniform3f(k),u_frustum_tr:new t.Uniform3f(k),u_frustum_br:new t.Uniform3f(k),u_frustum_bl:new t.Uniform3f(k),u_globe_pos:new t.Uniform3f(k),u_globe_radius:new t.Uniform1f(k),u_viewport:new t.Uniform2f(k)}),globeAtmosphere:k=>({u_frustum_tl:new t.Uniform3f(k),u_frustum_tr:new t.Uniform3f(k),u_frustum_br:new t.Uniform3f(k),u_frustum_bl:new t.Uniform3f(k),u_horizon:new t.Uniform1f(k),u_transition:new t.Uniform1f(k),u_fadeout_range:new t.Uniform1f(k),u_color:new t.Uniform4f(k),u_high_color:new t.Uniform4f(k),u_space_color:new t.Uniform4f(k),u_star_intensity:new t.Uniform1f(k),u_star_density:new t.Uniform1f(k),u_star_size:new t.Uniform1f(k),u_temporal_offset:new t.Uniform1f(k),u_horizon_angle:new t.Uniform1f(k),u_rotation_matrix:new t.UniformMatrix4f(k)})};let rd;function Fl(k,f,_,I,Y,V,Q){const re=k.context,de=re.gl,be=k.transform,xe=k.useProgram("collisionBox"),Fe=[];let it=0,ft=0;for(let Gt=0;Gt<I.length;Gt++){const pi=I[Gt],hi=f.getTile(pi),ri=hi.getBucket(_);if(!ri)continue;const Oi=Xt(pi,ri,be);let Ai=Oi;0===Y[0]&&0===Y[1]||(Ai=k.translatePosMatrix(Oi,hi,Y,V));const Gi=Q?ri.textCollisionBox:ri.iconCollisionBox,Gn=ri.collisionCircleArray;if(Gn.length>0){const Hi=t.create(),un=Ai;t.mul(Hi,ri.placementInvProjMatrix,be.glCoordMatrix),t.mul(Hi,Hi,ri.placementViewportMatrix),Fe.push({circleArray:Gn,circleOffset:ft,transform:un,invTransform:Hi,projection:ri.getProjection()}),it+=Gn.length/4,ft=it}Gi&&(k.terrain&&k.terrain.setupElevationDraw(hi,xe),xe.draw(re,de.LINES,t.DepthMode.disabled,t.StencilMode.disabled,k.colorModeForRenderPass(),t.CullFaceMode.disabled,$a(Ai,be,hi,ri.getProjection()),_.id,Gi.layoutVertexBuffer,Gi.indexBuffer,Gi.segments,null,be.zoom,null,[Gi.collisionVertexBuffer,Gi.collisionVertexBufferExt]))}if(!Q||!Fe.length)return;const yt=k.useProgram("collisionCircle"),bt=new t.StructArrayLayout2f1f2i16;bt.resize(4*it),bt._trim();let Tt=0;for(const Gt of Fe)for(let pi=0;pi<Gt.circleArray.length/4;pi++){const hi=4*pi,ri=Gt.circleArray[hi+0],Oi=Gt.circleArray[hi+1],Ai=Gt.circleArray[hi+2],Gi=Gt.circleArray[hi+3];bt.emplace(Tt++,ri,Oi,Ai,Gi,0),bt.emplace(Tt++,ri,Oi,Ai,Gi,1),bt.emplace(Tt++,ri,Oi,Ai,Gi,2),bt.emplace(Tt++,ri,Oi,Ai,Gi,3)}(!rd||rd.length<2*it)&&(rd=function(Gt){const pi=2*Gt,hi=new t.StructArrayLayout3ui6;hi.resize(pi),hi._trim();for(let ri=0;ri<pi;ri++){const Oi=6*ri;hi.uint16[Oi+0]=4*ri+0,hi.uint16[Oi+1]=4*ri+1,hi.uint16[Oi+2]=4*ri+2,hi.uint16[Oi+3]=4*ri+2,hi.uint16[Oi+4]=4*ri+3,hi.uint16[Oi+5]=4*ri+0}return hi}(it));const Ne=re.createIndexBuffer(rd,!0),_t=re.createVertexBuffer(bt,t.collisionCircleLayout.members,!0);for(const Gt of Fe){const pi={u_matrix:Gt.transform,u_inv_matrix:Gt.invTransform,u_camera_to_center_distance:(zt=be).getCameraToCenterDistance(Gt.projection),u_viewport_size:[zt.width,zt.height]};yt.draw(re,de.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,k.colorModeForRenderPass(),t.CullFaceMode.disabled,pi,_.id,_t,Ne,t.SegmentVector.simpleSegment(0,2*Gt.circleOffset,Gt.circleArray.length,Gt.circleArray.length/2),null,be.zoom)}var zt;_t.destroy(),Ne.destroy()}const pl=t.create();function Ss({width:k,height:f,anchor:_,textOffset:I,textScale:Y},V){const{horizontalAlign:Q,verticalAlign:re}=t.getAnchorAlignment(_),de=-(Q-.5)*k,be=-(re-.5)*f,xe=t.evaluateVariableOffset(_,I);return new t.Point((de/Y+xe[0])*V,(be/Y+xe[1])*V)}function ad(k,f,_,I,Y,V,Q,re,de,be,xe){const Fe=k.text.placedSymbolArray,it=k.text.dynamicLayoutVertexArray,ft=k.icon.dynamicLayoutVertexArray,yt={},bt=k.getProjection(),Tt=Li(re,bt,V),Ne=V.elevation,_t=bt.upVectorScale(re.canonical,V.center.lat,V.worldSize).metersToTile;it.clear();for(let zt=0;zt<Fe.length;zt++){const Gt=Fe.get(zt),{tileAnchorX:pi,tileAnchorY:hi,numGlyphs:ri}=Gt,Oi=Gt.hidden||!Gt.crossTileID||k.allowVerticalPlacement&&!Gt.placedOrientation?null:I[Gt.crossTileID];if(Oi){let Ai=0,Gi=0,Gn=0;if(Ne){const Hn=Ne?Ne.getAtTileOffset(re,pi,hi):0,[ea,wa,Ir]=bt.upVector(re.canonical,pi,hi);Ai=Hn*ea*_t,Gi=Hn*wa*_t,Gn=Hn*Ir*_t}let[Hi,un,ki,An]=J(Gt.projectedAnchorX+Ai,Gt.projectedAnchorY+Gi,Gt.projectedAnchorZ+Gn,_?Tt:Q);const Ui=ne(V.getCameraToCenterDistance(bt),An);let cn=Y.evaluateSizeForFeature(k.textSizeData,be,Gt)*Ui/t.ONE_EM;_&&(cn*=k.tilePixelRatio/de);const bn=Ss(Oi,cn);_?(({x:Hi,y:un,z:ki}=bt.projectTilePoint(pi+bn.x,hi+bn.y,re.canonical)),[Hi,un,ki]=J(Hi+Ai,un+Gi,ki+Gn,Q)):(f&&bn._rotate(-V.angle),Hi+=bn.x,un+=bn.y,ki=0);const Bn=k.allowVerticalPlacement&&Gt.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let Hn=0;Hn<ri;Hn++)t.addDynamicAttributes(it,Hi,un,ki,Bn);xe&&Gt.associatedIconIndex>=0&&(yt[Gt.associatedIconIndex]={x:Hi,y:un,z:ki,angle:Bn})}else we(ri,it)}if(xe){ft.clear();const zt=k.icon.placedSymbolArray;for(let Gt=0;Gt<zt.length;Gt++){const pi=zt.get(Gt),{numGlyphs:hi}=pi,ri=yt[Gt];if(pi.hidden||!ri)we(hi,ft);else{const{x:Oi,y:Ai,z:Gi,angle:Gn}=ri;for(let Hi=0;Hi<hi;Hi++)t.addDynamicAttributes(ft,Oi,Ai,Gi,Gn)}}k.icon.dynamicLayoutVertexBuffer.updateData(ft)}k.text.dynamicLayoutVertexBuffer.updateData(it)}function or(k,f,_){return _.iconsInText&&f?"symbolTextAndIcon":k?"symbolSDF":"symbolIcon"}function Bl(k,f,_,I,Y,V,Q,re,de,be,xe,Fe){const it=k.context,ft=it.gl,yt=k.transform,bt="map"===re,Tt="map"===de,Ne=bt&&"point"!==_.layout.get("symbol-placement"),_t=bt&&!Tt&&!Ne,zt=void 0!==_.layout.get("symbol-sort-key").constantOr(1);let Gt=!1;const pi=k.depthModeForSublayer(0,t.DepthMode.ReadOnly),hi=[t.mercatorXfromLng(yt.center.lng),t.mercatorYfromLat(yt.center.lat)],ri=_.layout.get("text-variable-anchor"),Oi="globe"===yt.projection.name,Ai=[],Gi=[0,-1,0];let Gn=Gi;!Oi&&!yt.mercatorFromTransition||bt||(Gn=function(Hi){const un=Hi._camera.getWorldToCamera(Hi.worldSize,1),ki=t.multiply([],un,Hi.globeMatrix);t.invert(ki,ki);const An=[0,0,0],Ui=[0,1,0,0];return t.transformMat4$1(Ui,Ui,ki),An[0]=Ui[0],An[1]=Ui[1],An[2]=Ui[2],t.normalize(An,An),An}(yt));for(const Hi of I){const un=f.getTile(Hi),ki=un.getBucket(_);if(!ki||"mercator"===ki.projection.name&&Oi)continue;const An=Y?ki.text:ki.icon;if(!An||ki.fullyClipped||!An.segments.get().length)continue;const Ui=An.programConfigurations.get(_.id),cn=Y||ki.sdfIcons,bn=Y?ki.textSizeData:ki.iconSizeData,Bn=Tt||0!==yt.pitch,Hn=t.evaluateSizeForZoom(bn,yt.zoom);let ea,wa,Ir,ca,Ua=[0,0],qr=null;if(Y)wa=un.glyphAtlasTexture,Ir=ft.LINEAR,ea=un.glyphAtlasTexture.size,ki.iconsInText&&(Ua=un.imageAtlasTexture.size,qr=un.imageAtlasTexture,ca=Bn||k.options.rotating||k.options.zooming||"composite"===bn.kind||"camera"===bn.kind?ft.LINEAR:ft.NEAREST);else{const od=1!==_.layout.get("icon-size").constantOr(0)||ki.iconsNeedLinear;wa=un.imageAtlasTexture,Ir=cn||k.options.rotating||k.options.zooming||od||Bn?ft.LINEAR:ft.NEAREST,ea=un.imageAtlasTexture.size}const ta="globe"===ki.projection.name,ns=ta?Gn:Gi,Xs=ta?t.globeToMercatorTransition(yt.zoom):0,ro=Li(Hi,ki.getProjection(),yt),Vs=yt.calculatePixelsToTileUnitsMatrix(un),Ec=N(ro,un.tileID.canonical,Tt,bt,yt,ki.getProjection(),Vs),vl=k.terrain&&Tt&&Ne?t.invert(t.create(),Ec):pl,Uc=Z(ro,un.tileID.canonical,Tt,bt,yt,ki.getProjection(),Vs),Nu=ri&&ki.hasTextData(),Do="none"!==_.layout.get("icon-text-fit")&&Nu&&ki.hasIconData();if(Ne){const od=yt.elevation,yd=od?od.getAtTileOffsetFunc(Hi,yt.center.lat,yt.worldSize,ki.getProjection()):null,xd=H(ro,un.tileID.canonical,Tt,bt,yt,ki.getProjection(),Vs);ye(ki,ro,k,Y,xd,Uc,Tt,be,yd,Hi)}const Ds=Ne||Y&&ri||Do,Ls=k.translatePosMatrix(ro,un,V,Q),fo=Ds?pl:Ec,lc=k.translatePosMatrix(Uc,un,V,Q,!0),po=ki.getProjection().createInversionMatrix(yt,Hi.canonical),vu=[];k.terrainRenderModeElevated()&&Tt&&vu.push("PITCH_WITH_MAP_TERRAIN"),ta&&vu.push("PROJECTION_GLOBE_VIEW"),Ds&&vu.push("PROJECTED_POS_ON_VIEWPORT");const Sh=cn&&0!==_.paint.get(Y?"text-halo-width":"icon-halo-width").constantOr(1);let iu;iu=cn?ki.iconsInText?Pl(bn.kind,Hn,_t,Tt,k,Ls,fo,lc,ea,Ua,Hi,Xs,hi,po,ns,ki.getProjection()):_o(bn.kind,Hn,_t,Tt,k,Ls,fo,lc,Y,ea,!0,Hi,Xs,hi,po,ns,ki.getProjection()):Rs(bn.kind,Hn,_t,Tt,k,Ls,fo,lc,Y,ea,Hi,Xs,hi,po,ns,ki.getProjection());const _d={program:k.useProgram(or(cn,Y,ki),Ui,vu),buffers:An,uniformValues:iu,atlasTexture:wa,atlasTextureIcon:qr,atlasInterpolation:Ir,atlasInterpolationIcon:ca,isSDF:cn,hasHalo:Sh,tile:un,labelPlaneMatrixInv:vl};if(zt&&ki.canOverlap){Gt=!0;const od=An.segments.get();for(const yd of od)Ai.push({segments:new t.SegmentVector([yd]),sortKey:yd.sortKey,state:_d})}else Ai.push({segments:An.segments,sortKey:0,state:_d})}Gt&&Ai.sort((Hi,un)=>Hi.sortKey-un.sortKey);for(const Hi of Ai){const un=Hi.state;if(k.terrain&&k.terrain.setupElevationDraw(un.tile,un.program,{useDepthForOcclusion:!Oi,labelPlaneMatrixInv:un.labelPlaneMatrixInv}),it.activeTexture.set(ft.TEXTURE0),un.atlasTexture.bind(un.atlasInterpolation,ft.CLAMP_TO_EDGE),un.atlasTextureIcon&&(it.activeTexture.set(ft.TEXTURE1),un.atlasTextureIcon&&un.atlasTextureIcon.bind(un.atlasInterpolationIcon,ft.CLAMP_TO_EDGE)),un.isSDF){const ki=un.uniformValues;un.hasHalo&&(ki.u_is_halo=1,Ou(un.buffers,Hi.segments,_,k,un.program,pi,xe,Fe,ki)),ki.u_is_halo=0}Ou(un.buffers,Hi.segments,_,k,un.program,pi,xe,Fe,un.uniformValues)}}function Ou(k,f,_,I,Y,V,Q,re,de){const be=I.context,xe=[k.dynamicLayoutVertexBuffer,k.opacityVertexBuffer,k.globeExtVertexBuffer];Y.draw(be,be.gl.TRIANGLES,V,Q,re,t.CullFaceMode.disabled,de,_.id,k.layoutVertexBuffer,k.indexBuffer,f,_.paint,I.transform.zoom,k.programConfigurations.get(_.id),xe)}function hu(k,f,_,I,Y,V,Q){const re=k.context.gl,de=_.paint.get("fill-pattern"),be=de&&de.constantOr(1);let xe,Fe,it,ft,yt;Q?(Fe=be&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=re.LINES):(Fe=be?"fillPattern":"fill",xe=re.TRIANGLES);for(const bt of I){const Tt=f.getTile(bt);if(be&&!Tt.patternsLoaded())continue;const Ne=Tt.getBucket(_);if(!Ne)continue;k.prepareDrawTile();const _t=Ne.programConfigurations.get(_.id),zt=k.useProgram(Fe,_t);be&&(k.context.activeTexture.set(re.TEXTURE0),Tt.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),_t.updatePaintBuffers());const Gt=de.constantOr(null);if(Gt&&Tt.imageAtlas){const hi=Tt.imageAtlas.patternPositions[Gt.toString()];hi&&_t.setConstantPatternPositions(hi)}const pi=k.translatePosMatrix(bt.projMatrix,Tt,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(Q){ft=Ne.indexBuffer2,yt=Ne.segments2;const hi=k.terrain&&k.terrain.renderingToTexture?k.terrain.drapeBufferSize:[re.drawingBufferWidth,re.drawingBufferHeight];it="fillOutlinePattern"===Fe&&be?Ld(pi,k,Tt,hi):Ol(pi,hi)}else ft=Ne.indexBuffer,yt=Ne.segments,it=be?ko(pi,k,Tt):oa(pi);k.prepareDrawProgram(k.context,zt,bt.toUnwrapped()),zt.draw(k.context,xe,Y,k.stencilModeForClipping(bt),V,t.CullFaceMode.disabled,it,_.id,Ne.layoutVertexBuffer,ft,yt,_.paint,k.transform.zoom,_t)}}function Cc(k,f,_,I,Y,V,Q){const re=k.context,de=re.gl,be=k.transform,xe=_.paint.get("fill-extrusion-pattern"),Fe=xe.constantOr(1),it=_.paint.get("fill-extrusion-opacity"),ft=[_.paint.get("fill-extrusion-ambient-occlusion-intensity"),_.paint.get("fill-extrusion-ambient-occlusion-radius")],yt=_.layout.get("fill-extrusion-edge-radius"),bt=yt>0&&!_.paint.get("fill-extrusion-rounded-roof"),Tt=bt?0:yt,Ne="globe"===be.projection.name?t.fillExtrusionHeightLift():0,_t="globe"===be.projection.name,zt=_t?t.globeToMercatorTransition(be.zoom):0,Gt=[t.mercatorXfromLng(be.center.lng),t.mercatorYfromLat(be.center.lat)],pi=[];_t&&pi.push("PROJECTION_GLOBE_VIEW"),ft[0]>0&&pi.push("FAUX_AO"),bt&&pi.push("ZERO_ROOF_RADIUS");for(const hi of I){const ri=f.getTile(hi),Oi=ri.getBucket(_);if(!Oi||Oi.projection.name!==be.projection.name)continue;const Ai=Oi.programConfigurations.get(_.id),Gi=k.useProgram(Fe?"fillExtrusionPattern":"fillExtrusion",Ai,pi);if(k.terrain){const cn=k.terrain;if(k.style.terrainSetForDrapingOnly())cn.setupElevationDraw(ri,Gi,{useMeterToDem:!0});else{if(!Oi.enableTerrain)continue;if(cn.setupElevationDraw(ri,Gi,{useMeterToDem:!0}),Ei(re,f,hi,Oi,_,cn),!Oi.centroidVertexBuffer){const bn=Gi.attributes.a_centroid_pos;void 0!==bn&&de.vertexAttrib2f(bn,0,0)}}}Fe&&(k.context.activeTexture.set(de.TEXTURE0),ri.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ai.updatePaintBuffers());const Gn=xe.constantOr(null);if(Gn&&ri.imageAtlas){const cn=ri.imageAtlas.patternPositions[Gn.toString()];cn&&Ai.setConstantPatternPositions(cn)}const Hi=k.translatePosMatrix(hi.projMatrix,ri,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),un=be.projection.createInversionMatrix(be,hi.canonical),ki=_.paint.get("fill-extrusion-vertical-gradient"),An=Fe?Mu(Hi,k,ki,it,ft,Tt,hi,ri,Ne,zt,Gt,un):id(Hi,k,ki,it,ft,Tt,hi,Ne,zt,Gt,un);k.prepareDrawProgram(re,Gi,hi.toUnwrapped());const Ui=[];k.terrain&&Ui.push(Oi.centroidVertexBuffer),_t&&Ui.push(Oi.layoutVertexExtBuffer),Gi.draw(re,re.gl.TRIANGLES,Y,V,Q,t.CullFaceMode.backCCW,An,_.id,Oi.layoutVertexBuffer,Oi.indexBuffer,Oi.segments,_.paint,k.transform.zoom,Ai,Ui)}}function Ei(k,f,_,I,Y,V){const Q=[Ne=>{let _t=Ne.canonical.x-1,zt=Ne.wrap;return _t<0&&(_t=(1<<Ne.canonical.z)-1,zt--),new t.OverscaledTileID(Ne.overscaledZ,zt,Ne.canonical.z,_t,Ne.canonical.y)},Ne=>{let _t=Ne.canonical.x+1,zt=Ne.wrap;return _t===1<<Ne.canonical.z&&(_t=0,zt++),new t.OverscaledTileID(Ne.overscaledZ,zt,Ne.canonical.z,_t,Ne.canonical.y)},Ne=>new t.OverscaledTileID(Ne.overscaledZ,Ne.wrap,Ne.canonical.z,Ne.canonical.x,(0===Ne.canonical.y?1<<Ne.canonical.z:Ne.canonical.y)-1),Ne=>new t.OverscaledTileID(Ne.overscaledZ,Ne.wrap,Ne.canonical.z,Ne.canonical.x,Ne.canonical.y===(1<<Ne.canonical.z)-1?0:Ne.canonical.y+1)],re=Ne=>{const _t=f.getSource().minzoom,zt=pi=>{const hi=f.getTileByID(pi);if(hi&&hi.hasData())return hi.getBucket(Y)},Gt=[0,-1,1];for(const pi of Gt){if(Ne.overscaledZ+pi<_t)continue;const hi=zt(Ne.calculateScaledKey(Ne.overscaledZ+pi));if(hi)return hi}},de=[0,0,0],be=(Ne,_t)=>(de[0]=Math.min(Ne.min.y,_t.min.y),de[1]=Math.max(Ne.max.y,_t.max.y),de[2]=t.EXTENT-_t.min.x>Ne.max.x?_t.min.x-t.EXTENT:Ne.max.x,de),xe=(Ne,_t)=>(de[0]=Math.min(Ne.min.x,_t.min.x),de[1]=Math.max(Ne.max.x,_t.max.x),de[2]=t.EXTENT-_t.min.y>Ne.max.y?_t.min.y-t.EXTENT:Ne.max.y,de),Fe=[(Ne,_t)=>be(Ne,_t),(Ne,_t)=>be(_t,Ne),(Ne,_t)=>xe(Ne,_t),(Ne,_t)=>xe(_t,Ne)],it=new t.Point(0,0);let ft,yt,bt;const Tt=(Ne,_t,zt,Gt,pi)=>{const hi=[[Gt?zt:Ne,Gt?Ne:zt,0],[Gt?zt:_t,Gt?_t:zt,0]],ri=pi<0?t.EXTENT+pi:pi,Oi=[Gt?ri:(Ne+_t)/2,Gt?(Ne+_t)/2:ri,0];return 0===zt&&pi<0||0!==zt&&pi>0?V.getForTilePoints(bt,[Oi],!0,yt):hi.push(Oi),V.getForTilePoints(_,hi,!0,ft),Math.max(hi[0][2],hi[1][2],Oi[2])/V.exaggeration()};for(let Ne=0;Ne<4;Ne++){const _t=(Ne<2?1:5)-Ne,zt=I.borders[Ne];if(0===zt.length)continue;const Gt=bt=Q[Ne](_),pi=re(Gt);if(!(pi&&pi instanceof t.FillExtrusionBucket&&pi.enableTerrain)||I.borderDoneWithNeighborZ[Ne]===pi.canonical.z&&pi.borderDoneWithNeighborZ[_t]===I.canonical.z||(yt=V.findDEMTileFor(Gt),!yt||!yt.dem))continue;if(!ft){const Ai=V.findDEMTileFor(_);if(!Ai||!Ai.dem)return;ft=Ai}const hi=pi.borders[_t];let ri=0;const Oi=pi.borderDoneWithNeighborZ[_t]!==I.canonical.z;if(I.canonical.z===pi.canonical.z){for(let Ai=0;Ai<zt.length;Ai++){const Gi=I.featuresOnBorder[zt[Ai]],Gn=Gi.borders[Ne];let Hi;for(;ri<hi.length&&(Hi=pi.featuresOnBorder[hi[ri]],!(Hi.borders[_t][1]>Gn[0]+3));)Oi&&pi.encodeCentroid(void 0,Hi,!1),ri++;if(Hi&&ri<hi.length){const un=ri;let ki=0;for(;!(Hi.borders[_t][0]>Gn[1]-3)&&(ki++,++ri!==hi.length);)Hi=pi.featuresOnBorder[hi[ri]];if(Hi=pi.featuresOnBorder[hi[un]],Gi.intersectsCount()>1||Hi.intersectsCount()>1||1!==ki){1!==ki&&(ri=un),I.encodeCentroid(void 0,Gi,!1),Oi&&pi.encodeCentroid(void 0,Hi,!1);continue}const An=Fe[Ne](Gi,Hi),Ui=Ne%2?t.EXTENT-1:0;it.x=Tt(An[0],Math.min(t.EXTENT-1,An[1]),Ui,Ne<2,An[2]),it.y=0,I.encodeCentroid(it,Gi,!1),Oi&&pi.encodeCentroid(it,Hi,!1)}else I.encodeCentroid(void 0,Gi,!1)}I.borderDoneWithNeighborZ[Ne]=pi.canonical.z,I.needsCentroidUpdate=!0,Oi&&(pi.borderDoneWithNeighborZ[_t]=I.canonical.z,pi.needsCentroidUpdate=!0)}else{for(const Ai of zt)I.encodeCentroid(void 0,I.featuresOnBorder[Ai],!1);if(Oi){for(const Ai of hi)pi.encodeCentroid(void 0,pi.featuresOnBorder[Ai],!1);pi.borderDoneWithNeighborZ[_t]=I.canonical.z,pi.needsCentroidUpdate=!0}I.borderDoneWithNeighborZ[Ne]=pi.canonical.z,I.needsCentroidUpdate=!0}}(I.needsCentroidUpdate||!I.centroidVertexBuffer&&0!==I.centroidVertexArray.length)&&I.uploadCentroid(k)}const pn=new t.Color(1,0,0,1),nn=new t.Color(0,1,0,1),Fr=new t.Color(0,0,1,1),Wa=new t.Color(1,0,1,1),Os=new t.Color(0,1,1,1);function Yo(k,f,_){const I=k.context,Y=k.transform,V=I.gl,Q="globe"===Y.projection.name,re=Q?["PROJECTION_GLOBE_VIEW"]:null;let de=_.projMatrix;if(Q&&t.globeToMercatorTransition(Y.zoom)>0){const Gi=t.transitionTileAABBinECEF(_.canonical,Y),Gn=t.globeDenormalizeECEF(Gi);de=t.multiply(new Float32Array(16),Y.globeMatrix,Gn),t.multiply(de,Y.projMatrix,de)}const be=k.useProgram("debug",null,re),xe=f.getTileByID(_.key);k.terrain&&k.terrain.setupElevationDraw(xe,be);const Fe=t.DepthMode.disabled,it=t.StencilMode.disabled,ft=k.colorModeForRenderPass();I.activeTexture.set(V.TEXTURE0),k.emptyTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Q?xe._makeGlobeTileDebugBuffers(k.context,Y):xe._makeDebugTileBoundsBuffers(k.context,Y.projection);const bt=xe._tileDebugBuffer||k.debugBuffer,Tt=xe._tileDebugIndexBuffer||k.debugIndexBuffer,Ne=xe._tileDebugSegments||k.debugSegments;be.draw(I,V.LINE_STRIP,Fe,it,ft,t.CullFaceMode.disabled,Kc(de,t.Color.red),"$debug",bt,Tt,Ne,null,null,null,[xe._globeTileDebugBorderBuffer]);const _t=xe.latestRawTileData,zt=Math.floor((_t&&_t.byteLength||0)/1024),Gt=f.getTile(_).tileSize,pi=512/Math.min(Gt,512)*(_.overscaledZ/Y.zoom)*.5;let hi=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(hi+=` => ${_.overscaledZ}`),hi+=` ${zt}kb`,function(Gi,Gn){Gi.initDebugOverlayCanvas();const Hi=Gi.debugOverlayCanvas,un=Gi.context.gl,ki=Gi.debugOverlayCanvas.getContext("2d");ki.clearRect(0,0,Hi.width,Hi.height),ki.shadowColor="white",ki.shadowBlur=2,ki.lineWidth=1.5,ki.strokeStyle="white",ki.textBaseline="top",ki.font="bold 36px Open Sans, sans-serif",ki.fillText(Gn,5,5),ki.strokeText(Gn,5,5),Gi.debugOverlayTexture.update(Hi),Gi.debugOverlayTexture.bind(un.LINEAR,un.CLAMP_TO_EDGE)}(k,hi);const ri=xe._tileDebugTextBuffer||k.debugBuffer,Oi=xe._tileDebugTextIndexBuffer||k.quadTriangleIndexBuffer,Ai=xe._tileDebugTextSegments||k.debugSegments;be.draw(I,V.TRIANGLES,Fe,it,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Kc(de,t.Color.transparent,pi),"$debug",ri,Oi,Ai,null,null,null,[xe._globeTileDebugTextBuffer])}function vs(k,f,_,I){sd(k,0,f+_/2,k.transform.width,_,I)}function El(k,f,_,I){sd(k,f-_/2,0,_,k.transform.height,I)}function sd(k,f,_,I,Y,V){const Q=k.context,re=Q.gl;re.enable(re.SCISSOR_TEST),re.scissor(f*t.exported.devicePixelRatio,_*t.exported.devicePixelRatio,I*t.exported.devicePixelRatio,Y*t.exported.devicePixelRatio),Q.clear({color:V}),re.disable(re.SCISSOR_TEST)}const ol=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:tu}=ol;function ml(k,f,_,I){k.emplaceBack(f,_,I)}class tc{constructor(f){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,ml(this.vertexArray,-1,-1,1),ml(this.vertexArray,1,-1,1),ml(this.vertexArray,-1,1,1),ml(this.vertexArray,1,1,1),ml(this.vertexArray,-1,-1,-1),ml(this.vertexArray,1,-1,-1),ml(this.vertexArray,-1,1,-1),ml(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=f.createVertexBuffer(this.vertexArray,tu),this.indexBuffer=f.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Hs(k,f,_,I,Y,V){const Q=k.gl,re=f.paint.get("sky-atmosphere-color"),de=f.paint.get("sky-atmosphere-halo-color"),be=f.paint.get("sky-atmosphere-sun-intensity"),xe={u_matrix_3f:t.fromMat4(t.create$1(),I),u_sun_direction:Y,u_sun_intensity:be,u_color_tint_r:[(yt=re).r,yt.g,yt.b,yt.a],u_color_tint_m:[(bt=de).r,bt.g,bt.b,bt.a],u_luminance:5e-5};var yt,bt;Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+V,f.skyboxTexture,0),_.draw(k,Q.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,xe,"skyboxCapture",f.skyboxGeometry.vertexBuffer,f.skyboxGeometry.indexBuffer,f.skyboxGeometry.segment)}const tl=t.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class xs{constructor(f){const _=new t.StructArrayLayout5f20;_.emplaceBack(-1,1,1,0,0),_.emplaceBack(1,1,1,1,0),_.emplaceBack(1,-1,1,1,1),_.emplaceBack(-1,-1,1,0,1);const I=new t.StructArrayLayout3ui6;I.emplaceBack(0,1,2),I.emplaceBack(2,3,0),this.vertexBuffer=f.createVertexBuffer(_,tl.members),this.indexBuffer=f.createIndexBuffer(I),this.segments=t.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Lu={symbol:function(k,f,_,I,Y){if("translucent"!==k.renderPass)return;const V=t.StencilMode.disabled,Q=k.colorModeForRenderPass();_.layout.get("text-variable-anchor")&&function(re,de,be,xe,Fe,it,ft){const yt=de.transform,bt="map"===Fe,Tt="map"===it;for(const Ne of re){const _t=xe.getTile(Ne),zt=_t.getBucket(be);if(!zt||!zt.text||!zt.text.segments.get().length)continue;const Gt=t.evaluateSizeForZoom(zt.textSizeData,yt.zoom),pi=Li(Ne,zt.getProjection(),yt),hi=yt.calculatePixelsToTileUnitsMatrix(_t),ri=N(pi,_t.tileID.canonical,Tt,bt,yt,zt.getProjection(),hi),Oi="none"!==be.layout.get("icon-text-fit")&&zt.hasIconData();if(Gt){const Ai=Math.pow(2,yt.zoom-_t.tileID.overscaledZ);ad(zt,bt,Tt,ft,t.symbolSize,yt,ri,Ne,Ai,Gt,Oi)}}}(I,k,_,f,_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),Y),0!==_.paint.get("icon-opacity").constantOr(1)&&Bl(k,f,_,I,!1,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),_.layout.get("icon-rotation-alignment"),_.layout.get("icon-pitch-alignment"),_.layout.get("icon-keep-upright"),V,Q),0!==_.paint.get("text-opacity").constantOr(1)&&Bl(k,f,_,I,!0,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),_.layout.get("text-rotation-alignment"),_.layout.get("text-pitch-alignment"),_.layout.get("text-keep-upright"),V,Q),f.map.showCollisionBoxes&&(Fl(k,f,_,I,_.paint.get("text-translate"),_.paint.get("text-translate-anchor"),!0),Fl(k,f,_,I,_.paint.get("icon-translate"),_.paint.get("icon-translate-anchor"),!1))},circle:function(k,f,_,I){if("translucent"!==k.renderPass)return;const Y=_.paint.get("circle-opacity"),V=_.paint.get("circle-stroke-width"),Q=_.paint.get("circle-stroke-opacity"),re=void 0!==_.layout.get("circle-sort-key").constantOr(1);if(0===Y.constantOr(1)&&(0===V.constantOr(1)||0===Q.constantOr(1)))return;const de=k.context,be=de.gl,xe=k.transform,Fe=k.depthModeForSublayer(0,t.DepthMode.ReadOnly),it=t.StencilMode.disabled,ft=k.colorModeForRenderPass(),yt="globe"===xe.projection.name,bt=[t.mercatorXfromLng(xe.center.lng),t.mercatorYfromLat(xe.center.lat)],Tt=[];for(let _t=0;_t<I.length;_t++){const zt=I[_t],Gt=f.getTile(zt),pi=Gt.getBucket(_);if(!pi||pi.projection.name!==xe.projection.name)continue;const hi=pi.programConfigurations.get(_.id),ri=Ll(_);yt&&ri.push("PROJECTION_GLOBE_VIEW");const Oi=k.useProgram("circle",hi,ri),Ai=pi.layoutVertexBuffer,Gi=pi.globeExtVertexBuffer,Gn=pi.indexBuffer,Hi=xe.projection.createInversionMatrix(xe,zt.canonical),un={programConfiguration:hi,program:Oi,layoutVertexBuffer:Ai,globeExtVertexBuffer:Gi,indexBuffer:Gn,uniformValues:Nc(k,zt,Gt,Hi,bt,_),tile:Gt};if(re){const ki=pi.segments.get();for(const An of ki)Tt.push({segments:new t.SegmentVector([An]),sortKey:An.sortKey,state:un})}else Tt.push({segments:pi.segments,sortKey:0,state:un})}re&&Tt.sort((_t,zt)=>_t.sortKey-zt.sortKey);const Ne={useDepthForOcclusion:!yt};for(const _t of Tt){const{programConfiguration:zt,program:Gt,layoutVertexBuffer:pi,globeExtVertexBuffer:hi,indexBuffer:ri,uniformValues:Oi,tile:Ai}=_t.state,Gi=_t.segments;k.terrain&&k.terrain.setupElevationDraw(Ai,Gt,Ne),k.prepareDrawProgram(de,Gt,Ai.tileID.toUnwrapped()),Gt.draw(de,be.TRIANGLES,Fe,it,ft,t.CullFaceMode.disabled,Oi,_.id,pi,ri,Gi,_.paint,xe.zoom,zt,[hi])}},heatmap:function(k,f,_,I){if(0!==_.paint.get("heatmap-opacity"))if("offscreen"===k.renderPass){const Y=k.context,V=Y.gl,Q=t.StencilMode.disabled,re=new t.ColorMode([V.ONE,V.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(ft,yt,bt,Tt){const Ne=ft.gl,_t=yt.width*Tt,zt=yt.height*Tt;ft.activeTexture.set(Ne.TEXTURE1),ft.viewport.set([0,0,_t,zt]);let Gt=bt.heatmapFbo;if(!Gt||Gt&&(Gt.width!==_t||Gt.height!==zt)){Gt&&Gt.destroy();const pi=Ne.createTexture();Ne.bindTexture(Ne.TEXTURE_2D,pi),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_MIN_FILTER,Ne.LINEAR),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_MAG_FILTER,Ne.LINEAR),Gt=bt.heatmapFbo=ft.createFramebuffer(_t,zt,!1),function(hi,ri,Oi,Ai,Gi,Gn){const Hi=hi.gl;Hi.texImage2D(Hi.TEXTURE_2D,0,hi.isWebGL2&&hi.extRenderToTextureHalfFloat?Hi.RGBA16F:Hi.RGBA,Gi,Gn,0,Hi.RGBA,hi.extRenderToTextureHalfFloat?hi.isWebGL2?Hi.HALF_FLOAT:hi.extTextureHalfFloat.HALF_FLOAT_OES:Hi.UNSIGNED_BYTE,null),Ai.colorAttachment.set(Oi)}(ft,0,pi,Gt,_t,zt)}else Ne.bindTexture(Ne.TEXTURE_2D,Gt.colorAttachment.get()),ft.bindFramebuffer.set(Gt.framebuffer)})(Y,k,_,"globe"===k.transform.projection.name?.5:.25),Y.clear({color:t.Color.transparent});const de=k.transform,be="globe"===de.projection.name,xe=be?["PROJECTION_GLOBE_VIEW"]:null,Fe=be?t.CullFaceMode.frontCCW:t.CullFaceMode.disabled,it=[t.mercatorXfromLng(de.center.lng),t.mercatorYfromLat(de.center.lat)];for(let ft=0;ft<I.length;ft++){const yt=I[ft];if(f.hasRenderableParent(yt))continue;const bt=f.getTile(yt),Tt=bt.getBucket(_);if(!Tt||Tt.projection.name!==de.projection.name)continue;const Ne=Tt.programConfigurations.get(_.id),_t=k.useProgram("heatmap",Ne,xe),{zoom:zt}=k.transform;k.terrain&&k.terrain.setupElevationDraw(bt,_t),k.prepareDrawProgram(Y,_t,yt.toUnwrapped());const Gt=de.projection.createInversionMatrix(de,yt.canonical);_t.draw(Y,V.TRIANGLES,t.DepthMode.disabled,Q,re,Fe,Jc(k,yt,bt,Gt,it,zt,_.paint.get("heatmap-intensity")),_.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,_.paint,k.transform.zoom,Ne,be?[Tt.globeExtVertexBuffer]:null)}Y.viewport.set([0,0,k.width,k.height])}else"translucent"===k.renderPass&&(k.context.setColorMode(k.colorModeForRenderPass()),function(Y,V){const Q=Y.context,re=Q.gl,de=V.heatmapFbo;if(!de)return;Q.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,de.colorAttachment.get()),Q.activeTexture.set(re.TEXTURE1);let be=V.colorRampTexture;be||(be=V.colorRampTexture=new t.Texture(Q,V.colorRamp,re.RGBA)),be.bind(re.LINEAR,re.CLAMP_TO_EDGE),Y.useProgram("heatmapTexture").draw(Q,re.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,Y.colorModeForRenderPass(),t.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")},V.id,Y.viewportBuffer,Y.quadTriangleIndexBuffer,Y.viewportSegments,V.paint,Y.transform.zoom)}(k,_))},line:function(k,f,_,I){if("translucent"!==k.renderPass)return;const Y=_.paint.get("line-opacity"),V=_.paint.get("line-width");if(0===Y.constantOr(1)||0===V.constantOr(1))return;const Q=k.depthModeForSublayer(0,t.DepthMode.ReadOnly),re=k.colorModeForRenderPass(),de=k.terrain&&k.terrain.renderingToTexture?1:t.exported.devicePixelRatio,be=_.paint.get("line-dasharray"),xe=be.constantOr(1),Fe=_.layout.get("line-cap"),it=_.paint.get("line-pattern"),ft=it.constantOr(1),yt=_.paint.get("line-gradient"),bt=ft?"linePattern":"line",Tt=k.context,Ne=Tt.gl,_t=(Gt=>{const pi=[];el(Gt)&&pi.push("RENDER_LINE_DASH"),Gt.paint.get("line-gradient")&&pi.push("RENDER_LINE_GRADIENT");const hi=Gt.paint.get("line-trim-offset");0===hi[0]&&0===hi[1]||pi.push("RENDER_LINE_TRIM_OFFSET");const ri=Gt.paint.get("line-pattern").constantOr(1),Oi=1!==Gt.paint.get("line-opacity").constantOr(1);return!ri&&Oi&&pi.push("RENDER_LINE_ALPHA_DISCARD"),pi})(_);let zt=_t.includes("RENDER_LINE_ALPHA_DISCARD");k.terrain&&k.terrain.clipOrMaskOverlapStencilType()&&(zt=!1);for(const Gt of I){const pi=f.getTile(Gt);if(ft&&!pi.patternsLoaded())continue;const hi=pi.getBucket(_);if(!hi)continue;k.prepareDrawTile();const ri=hi.programConfigurations.get(_.id),Oi=k.useProgram(bt,ri,_t),Ai=it.constantOr(null);if(Ai&&pi.imageAtlas){const cn=pi.imageAtlas.patternPositions[Ai.toString()];cn&&ri.setConstantPatternPositions(cn)}const Gi=be.constantOr(null),Gn=Fe.constantOr(null);if(!ft&&Gi&&Gn&&pi.lineAtlas){const cn=pi.lineAtlas.getDash(Gi,Gn);cn&&ri.setConstantPatternPositions(cn)}let[Hi,un]=_.paint.get("line-trim-offset");("round"===Gn||"square"===Gn)&&Hi!==un&&(0===Hi&&(Hi-=1),1===un&&(un+=1));const ki=k.terrain?Gt.projMatrix:null,An=ft?nd(k,pi,_,ki,de):Ru(k,pi,_,ki,hi.lineClipsArray.length,de,[Hi,un]);if(yt){const cn=hi.gradients[_.id];let bn=cn.texture;if(_.gradientVersion!==cn.version){let Bn=256;if(_.stepInterpolant){const Hn=f.getSource().maxzoom,ea=Gt.canonical.z===Hn?Math.ceil(1<<k.transform.maxZoom-Gt.canonical.z):1;Bn=t.clamp(t.nextPowerOfTwo(hi.maxLineLength/t.EXTENT*1024*ea),256,Tt.maxTextureSize)}cn.gradient=t.renderColorRamp({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:Bn,image:cn.gradient||void 0,clips:hi.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new t.Texture(Tt,cn.gradient,Ne.RGBA),cn.version=_.gradientVersion,bn=cn.texture}Tt.activeTexture.set(Ne.TEXTURE1),bn.bind(_.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}xe&&(Tt.activeTexture.set(Ne.TEXTURE0),pi.lineAtlasTexture.bind(Ne.LINEAR,Ne.REPEAT),ri.updatePaintBuffers()),ft&&(Tt.activeTexture.set(Ne.TEXTURE0),pi.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),ri.updatePaintBuffers()),k.prepareDrawProgram(Tt,Oi,Gt.toUnwrapped());const Ui=cn=>{Oi.draw(Tt,Ne.TRIANGLES,Q,cn,re,t.CullFaceMode.disabled,An,_.id,hi.layoutVertexBuffer,hi.indexBuffer,hi.segments,_.paint,k.transform.zoom,ri,[hi.layoutVertexBuffer2])};if(zt){const cn=k.stencilModeForClipping(Gt).ref;0===cn&&k.terrain&&Tt.clear({stencil:0});const bn={func:Ne.EQUAL,mask:255};An.u_alpha_discard_threshold=.8,Ui(new t.StencilMode(bn,cn,255,Ne.KEEP,Ne.KEEP,Ne.INVERT)),An.u_alpha_discard_threshold=0,Ui(new t.StencilMode(bn,cn,255,Ne.KEEP,Ne.KEEP,Ne.KEEP))}else Ui(k.stencilModeForClipping(Gt))}zt&&(k.resetStencilClippingMasks(),k.terrain&&Tt.clear({stencil:0}))},fill:function(k,f,_,I){const Y=_.paint.get("fill-color"),V=_.paint.get("fill-opacity");if(0===V.constantOr(1))return;const Q=k.colorModeForRenderPass(),re=_.paint.get("fill-pattern"),de=k.opaquePassEnabledForLayer()&&!re.constantOr(1)&&1===Y.constantOr(t.Color.transparent).a&&1===V.constantOr(0)?"opaque":"translucent";if(k.renderPass===de){const be=k.depthModeForSublayer(1,"opaque"===k.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);hu(k,f,_,I,be,Q,!1)}if("translucent"===k.renderPass&&_.paint.get("fill-antialias")){const be=k.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);hu(k,f,_,I,be,Q,!0)}},"fill-extrusion":function(k,f,_,I){const Y=_.paint.get("fill-extrusion-opacity");if(0!==Y&&"translucent"===k.renderPass){const V=new t.DepthMode(k.context.gl.LEQUAL,t.DepthMode.ReadWrite,k.depthRangeFor3D);if(1!==Y||_.paint.get("fill-extrusion-pattern").constantOr(1))Cc(k,f,_,I,V,t.StencilMode.disabled,t.ColorMode.disabled),Cc(k,f,_,I,V,k.stencilModeFor3D(),k.colorModeForRenderPass()),k.resetStencilClippingMasks();else{const Q=k.colorModeForRenderPass();Cc(k,f,_,I,V,t.StencilMode.disabled,Q)}}},hillshade:function(k,f,_,I){if("offscreen"!==k.renderPass&&"translucent"!==k.renderPass)return;const Y=k.context,V=k.depthModeForSublayer(0,t.DepthMode.ReadOnly),Q=k.colorModeForRenderPass(),re=k.terrain&&k.terrain.renderingToTexture,[de,be]="translucent"!==k.renderPass||re?[{},I]:k.stencilConfigForOverlap(I);for(const xe of be){const Fe=f.getTile(xe);if(Fe.needsHillshadePrepare&&"offscreen"===k.renderPass)Ql(k,Fe,_,V,t.StencilMode.disabled,Q);else if("translucent"===k.renderPass){const it=re&&k.terrain?k.terrain.stencilModeForRTTOverlap(xe):de[xe.overscaledZ];zo(k,xe,Fe,_,V,it,Q)}}Y.viewport.set([0,0,k.width,k.height]),k.resetStencilClippingMasks()},raster:function(k,f,_,I,Y,V){if("translucent"!==k.renderPass||0===_.paint.get("raster-opacity")||!I.length)return;const Q=k.context,re=Q.gl,de=f.getSource(),be=k.useProgram("raster"),xe=k.colorModeForRenderPass(),Fe=k.terrain&&k.terrain.renderingToTexture,[it,ft]=de instanceof Yt||Fe?[{},I]:k.stencilConfigForOverlap(I),yt=ft[ft.length-1].overscaledZ,bt=!k.options.moving;for(const Tt of ft){const Ne=Fe?t.DepthMode.disabled:k.depthModeForSublayer(Tt.overscaledZ-yt,1===_.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,re.LESS),_t=Tt.toUnwrapped(),zt=f.getTile(Tt);if(Fe&&(!zt||!zt.hasData()))continue;const Gt=Fe?Tt.projMatrix:k.transform.calculateProjMatrix(_t,bt),pi=k.terrain&&Fe?k.terrain.stencilModeForRTTOverlap(Tt):it[Tt.overscaledZ],hi=V?0:_.paint.get("raster-fade-duration");zt.registerFadeDuration(hi);const ri=f.findLoadedParent(Tt,0),Oi=ed(zt,ri,f,k.transform,hi);let Ai,Gi;k.terrain&&k.terrain.prepareDrawTile();const Gn="nearest"===_.paint.get("raster-resampling")?re.NEAREST:re.LINEAR;Q.activeTexture.set(re.TEXTURE0),zt.texture.bind(Gn,re.CLAMP_TO_EDGE),Q.activeTexture.set(re.TEXTURE1),ri?(ri.texture.bind(Gn,re.CLAMP_TO_EDGE),Ai=Math.pow(2,ri.tileID.overscaledZ-zt.tileID.overscaledZ),Gi=[zt.tileID.canonical.x*Ai%1,zt.tileID.canonical.y*Ai%1]):zt.texture.bind(Gn,re.CLAMP_TO_EDGE),zt.texture.useMipmap&&Q.extTextureFilterAnisotropic&&k.transform.pitch>20&&re.texParameterf(re.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax);const Hi=Cl(Gt,Gi||[0,0],Ai||1,Oi,_,de instanceof Yt?de.perspectiveTransform:[0,0]);if(k.prepareDrawProgram(Q,be,_t),de instanceof Yt)de.boundsBuffer&&de.boundsSegments&&be.draw(Q,re.TRIANGLES,Ne,t.StencilMode.disabled,xe,t.CullFaceMode.disabled,Hi,_.id,de.boundsBuffer,k.quadTriangleIndexBuffer,de.boundsSegments);else{const{tileBoundsBuffer:un,tileBoundsIndexBuffer:ki,tileBoundsSegments:An}=k.getTileBoundsBuffers(zt);be.draw(Q,re.TRIANGLES,Ne,pi,xe,t.CullFaceMode.disabled,Hi,_.id,un,ki,An)}}k.resetStencilClippingMasks()},background:function(k,f,_,I){const Y=_.paint.get("background-color"),V=_.paint.get("background-opacity");if(0===V)return;const Q=k.context,re=Q.gl,de=k.transform,be=de.tileSize,xe=_.paint.get("background-pattern");if(k.isPatternMissing(xe))return;const Fe=!xe&&1===Y.a&&1===V&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Fe)return;const it=t.StencilMode.disabled,ft=k.depthModeForSublayer(0,"opaque"===Fe?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),yt=k.colorModeForRenderPass(),bt=k.useProgram(xe?"backgroundPattern":"background");let Tt,Ne=I;Ne||(Tt=k.getBackgroundTiles(),Ne=Object.values(Tt).map(_t=>_t.tileID)),xe&&(Q.activeTexture.set(re.TEXTURE0),k.imageManager.bind(k.context));for(const _t of Ne){const zt=_t.toUnwrapped(),Gt=I?_t.projMatrix:k.transform.calculateProjMatrix(zt);k.prepareDrawTile();const pi=f?f.getTile(_t):Tt?Tt[_t.key]:new t.Tile(_t,be,de.zoom,k),hi=xe?cf(Gt,V,k,xe,{tileID:_t,tileSize:be}):sl(Gt,V,Y);k.prepareDrawProgram(Q,bt,zt);const{tileBoundsBuffer:ri,tileBoundsIndexBuffer:Oi,tileBoundsSegments:Ai}=k.getTileBoundsBuffers(pi);bt.draw(Q,re.TRIANGLES,ft,it,yt,t.CullFaceMode.disabled,hi,_.id,ri,Oi,Ai)}},sky:function(k,f,_){const I=k.transform,Y="mercator"===I.projection.name||"globe"===I.projection.name?1:t.smoothstep(7,8,I.zoom),V=_.paint.get("sky-opacity")*Y;if(0===V)return;const Q=k.context,re=_.paint.get("sky-type"),de=new t.DepthMode(Q.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),be=k.frameCounter/1e3%1;"atmosphere"===re?"offscreen"===k.renderPass?_.needsSkyboxCapture(k)&&(function(xe,Fe,it,ft){const yt=xe.context,bt=yt.gl;let Tt=Fe.skyboxFbo;if(!Tt){Tt=Fe.skyboxFbo=yt.createFramebuffer(32,32,!1),Fe.skyboxGeometry=new tc(yt),Fe.skyboxTexture=yt.gl.createTexture(),bt.bindTexture(bt.TEXTURE_CUBE_MAP,Fe.skyboxTexture),bt.texParameteri(bt.TEXTURE_CUBE_MAP,bt.TEXTURE_WRAP_S,bt.CLAMP_TO_EDGE),bt.texParameteri(bt.TEXTURE_CUBE_MAP,bt.TEXTURE_WRAP_T,bt.CLAMP_TO_EDGE),bt.texParameteri(bt.TEXTURE_CUBE_MAP,bt.TEXTURE_MIN_FILTER,bt.LINEAR),bt.texParameteri(bt.TEXTURE_CUBE_MAP,bt.TEXTURE_MAG_FILTER,bt.LINEAR);for(let Gt=0;Gt<6;++Gt)bt.texImage2D(bt.TEXTURE_CUBE_MAP_POSITIVE_X+Gt,0,bt.RGBA,32,32,0,bt.RGBA,bt.UNSIGNED_BYTE,null)}yt.bindFramebuffer.set(Tt.framebuffer),yt.viewport.set([0,0,32,32]);const Ne=Fe.getCenter(xe,!0),_t=xe.useProgram("skyboxCapture"),zt=new Float64Array(16);t.identity(zt),t.rotateY(zt,zt,.5*-Math.PI),Hs(yt,Fe,_t,zt,Ne,0),t.identity(zt),t.rotateY(zt,zt,.5*Math.PI),Hs(yt,Fe,_t,zt,Ne,1),t.identity(zt),t.rotateX(zt,zt,.5*-Math.PI),Hs(yt,Fe,_t,zt,Ne,2),t.identity(zt),t.rotateX(zt,zt,.5*Math.PI),Hs(yt,Fe,_t,zt,Ne,3),t.identity(zt),Hs(yt,Fe,_t,zt,Ne,4),t.identity(zt),t.rotateY(zt,zt,Math.PI),Hs(yt,Fe,_t,zt,Ne,5),yt.viewport.set([0,0,xe.width,xe.height])}(k,_),_.markSkyboxValid(k)):"sky"===k.renderPass&&function(xe,Fe,it,ft,yt){const bt=xe.context,Tt=bt.gl,Ne=xe.transform,_t=xe.useProgram("skybox");bt.activeTexture.set(Tt.TEXTURE0),Tt.bindTexture(Tt.TEXTURE_CUBE_MAP,Fe.skyboxTexture);const zt=((Gt,pi,hi,ri,Oi)=>({u_matrix:Gt,u_sun_direction:pi,u_cubemap:0,u_opacity:ri,u_temporal_offset:Oi}))(Ne.skyboxMatrix,Fe.getCenter(xe,!1),0,ft,yt);xe.prepareDrawProgram(bt,_t),_t.draw(bt,Tt.TRIANGLES,it,t.StencilMode.disabled,xe.colorModeForRenderPass(),t.CullFaceMode.backCW,zt,"skybox",Fe.skyboxGeometry.vertexBuffer,Fe.skyboxGeometry.indexBuffer,Fe.skyboxGeometry.segment)}(k,_,de,V,be):"gradient"===re&&"sky"===k.renderPass&&function(xe,Fe,it,ft,yt){const bt=xe.context,Tt=bt.gl,Ne=xe.transform,_t=xe.useProgram("skyboxGradient");Fe.skyboxGeometry||(Fe.skyboxGeometry=new tc(bt)),bt.activeTexture.set(Tt.TEXTURE0);let zt=Fe.colorRampTexture;zt||(zt=Fe.colorRampTexture=new t.Texture(bt,Fe.colorRamp,Tt.RGBA)),zt.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);const Gt=(pi=Ne.skyboxMatrix,hi=Fe.getCenter(xe,!1),ri=Fe.paint.get("sky-gradient-radius"),Oi=ft,Ai=yt,{u_matrix:pi,u_color_ramp:0,u_center_direction:hi,u_radius:t.degToRad(ri),u_opacity:Oi,u_temporal_offset:Ai});var pi,hi,ri,Oi,Ai;xe.prepareDrawProgram(bt,_t),_t.draw(bt,Tt.TRIANGLES,it,t.StencilMode.disabled,xe.colorModeForRenderPass(),t.CullFaceMode.backCW,Gt,"skyboxGradient",Fe.skyboxGeometry.vertexBuffer,Fe.skyboxGeometry.indexBuffer,Fe.skyboxGeometry.segment)}(k,_,de,V,be)},debug:function(k,f,_){for(let I=0;I<_.length;I++)Yo(k,f,_[I])},custom:function(k,f,_,I){const Y=k.context,V=_.implementation;if(!k.transform.projection.unsupportedLayers||!k.transform.projection.unsupportedLayers.includes("custom")||k.terrain&&(k.terrain.renderingToTexture||"offscreen"===k.renderPass)&&_.isLayerDraped()){if("offscreen"===k.renderPass){const Q=V.prerender;if(Q){if(k.setCustomLayerDefaults(),Y.setColorMode(k.colorModeForRenderPass()),"globe"===k.transform.projection.name){const re=k.transform.pointMerc;Q.call(V,Y.gl,k.transform.customLayerMatrix(),k.transform.getProjection(),k.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(k.transform.zoom),[re.x,re.y],k.transform.pixelsPerMeterRatio)}else Q.call(V,Y.gl,k.transform.customLayerMatrix());Y.setDirty(),k.setBaseState()}}else if("translucent"===k.renderPass){if(k.terrain&&k.terrain.renderingToTexture){const re=V.renderToTile;if(re){const de=I[0].canonical,be=new t.MercatorCoordinate(de.x+I[0].wrap*(1<<de.z),de.y,de.z);Y.setDepthMode(t.DepthMode.disabled),Y.setStencilMode(t.StencilMode.disabled),Y.setColorMode(k.colorModeForRenderPass()),k.setCustomLayerDefaults(),re.call(V,Y.gl,be),Y.setDirty(),k.setBaseState()}return}k.setCustomLayerDefaults(),Y.setColorMode(k.colorModeForRenderPass()),Y.setStencilMode(t.StencilMode.disabled);const Q="3d"===V.renderingMode?new t.DepthMode(k.context.gl.LEQUAL,t.DepthMode.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,t.DepthMode.ReadOnly);if(Y.setDepthMode(Q),"globe"===k.transform.projection.name){const re=k.transform.pointMerc;V.render(Y.gl,k.transform.customLayerMatrix(),k.transform.getProjection(),k.transform.globeToMercatorMatrix(),t.globeToMercatorTransition(k.transform.zoom),[re.x,re.y],k.transform.pixelsPerMeterRatio)}else V.render(Y.gl,k.transform.customLayerMatrix());Y.setDirty(),k.setBaseState(),Y.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class gl{constructor(f,_,I=!1){this.context=new On(f,I),this.transform=_,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(f,_){const I=!!f&&!!f.terrain&&this.transform.projection.supportsTerrain;if(!(I||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new wo(this,f));const Y=this._terrain;this.transform.elevation=I?Y:null,Y.update(f,this.transform,_)}_updateFog(f){const _=f.fog;if(!_||"globe"===this.transform.projection.name||_.getOpacity(this.transform.pitch)<1||_.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[I,Y]=_.getFovAdjustedRange(this.transform._fov);if(I>Y)return void(this.transform.fogCullDistSq=null);const V=I+.78*(Y-I);this.transform.fogCullDistSq=V*V}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(f,_){if(this.width=f*t.exported.devicePixelRatio,this.height=_*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style.order)this.style._layers[I].resize()}setup(){const f=this.context,_=new t.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(t.EXTENT,0),_.emplaceBack(0,t.EXTENT),_.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=f.createVertexBuffer(_,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=f.createVertexBuffer(I,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const Y=new t.StructArrayLayout2i4;Y.emplaceBack(-1,-1),Y.emplaceBack(1,-1),Y.emplaceBack(-1,1),Y.emplaceBack(1,1),this.viewportBuffer=f.createVertexBuffer(Y,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const V=new t.StructArrayLayout4i8;V.emplaceBack(0,0,0,0),V.emplaceBack(t.EXTENT,0,t.EXTENT,0),V.emplaceBack(0,t.EXTENT,0,t.EXTENT),V.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=f.createVertexBuffer(V,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const Q=new t.StructArrayLayout3ui6;Q.emplaceBack(0,1,2),Q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=f.createIndexBuffer(Q);const re=new t.StructArrayLayout1ui2;for(const be of[0,1,3,2,0])re.emplaceBack(be);this.debugIndexBuffer=f.createIndexBuffer(re),this.emptyTexture=new t.Texture(f,new t.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),f.gl.RGBA),this.identityMat=t.create();const de=this.context.gl;this.stencilClearMode=new t.StencilMode({func:de.ALWAYS,mask:0},0,255,de.ZERO,de.ZERO,de.ZERO),this.loadTimeStamps.push(t.window.performance.now()),this.atmosphereBuffer=new xs(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(f){return f._makeTileBoundsBuffers(this.context,this.transform.projection),f._tileBoundsBuffer?{tileBoundsBuffer:f._tileBoundsBuffer,tileBoundsIndexBuffer:f._tileBoundsIndexBuffer,tileBoundsSegments:f._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const f=this.context,_=f.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(f,_.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Oa(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(f,_,I){if(!_||this.currentStencilSource===_.id||!f.isTileClipped()||!I||0===I.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let re=!1;for(const de of I)if(void 0===this._tileClippingMaskIDs[de.key]){re=!0;break}if(!re)return}this.currentStencilSource=_.id;const Y=this.context,V=Y.gl;this.nextStencilID+I.length>256&&this.clearStencil(),Y.setColorMode(t.ColorMode.disabled),Y.setDepthMode(t.DepthMode.disabled);const Q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const re of I){const de=_.getTile(re),be=this._tileClippingMaskIDs[re.key]=this.nextStencilID++,{tileBoundsBuffer:xe,tileBoundsIndexBuffer:Fe,tileBoundsSegments:it}=this.getTileBoundsBuffers(de);Q.draw(Y,V.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:V.ALWAYS,mask:0},be,255,V.KEEP,V.KEEP,V.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Oa(re.projMatrix),"$clipping",xe,Fe,it)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const f=this.nextStencilID++,_=this.context.gl;return new t.StencilMode({func:_.NOTEQUAL,mask:255},f,255,_.KEEP,_.KEEP,_.REPLACE)}stencilModeForClipping(f){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(f);const _=this.context.gl;return new t.StencilMode({func:_.EQUAL,mask:255},this._tileClippingMaskIDs[f.key],0,_.KEEP,_.KEEP,_.REPLACE)}stencilConfigForOverlap(f){const _=this.context.gl,I=f.sort((Q,re)=>re.overscaledZ-Q.overscaledZ),Y=I[I.length-1].overscaledZ,V=I[0].overscaledZ-Y+1;if(V>1){this.currentStencilSource=void 0,this.nextStencilID+V>256&&this.clearStencil();const Q={};for(let re=0;re<V;re++)Q[re+Y]=new t.StencilMode({func:_.GEQUAL,mask:255},re+this.nextStencilID,255,_.KEEP,_.KEEP,_.REPLACE);return this.nextStencilID+=V,[Q,I]}return[{[Y]:t.StencilMode.disabled},I]}colorModeForRenderPass(){const f=this.context.gl;return this._showOverdrawInspector?new t.ColorMode([f.CONSTANT_COLOR,f.ONE],new t.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(f,_,I){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const Y=1-((1+this.currentLayer)*this.numSublayers+f)*this.depthEpsilon;return new t.DepthMode(I||this.context.gl.LEQUAL,_,[Y,Y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(f,_){this.style=f,this.options=_,this.imageManager=f.imageManager,this.glyphManager=f.glyphManager,this.symbolFadeChange=f.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const I=this.style.order,Y=this.style._sourceCaches;for(const be in Y){const xe=Y[be];xe.used&&xe.prepare(this.context)}const V={},Q={},re={};for(const be in Y){const xe=Y[be];V[be]=xe.getVisibleCoordinates(),Q[be]=V[be].slice().reverse(),re[be]=xe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let be=0;be<I.length;be++)if(this.style._layers[I[be]].is3D()){this.opaquePassCutoff=be;break}if(this.terrain&&(this.terrain.updateTileBinding(re),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new t.GlobeSharedBuffers(this.context)),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const be of I){const xe=this.style._layers[be],Fe=f._getLayerSourceCache(xe);if(!xe.hasOffscreenPass()||xe.isHidden(this.transform.zoom))continue;const it=Fe?Q[Fe.id]:void 0;("custom"===xe.type||xe.isSky()||it&&it.length)&&this.renderLayer(this,Fe,xe,it)}this.depthRangeFor3D=[0,1-(f.order.length+2)*this.numSublayers*this.depthEpsilon];const de=this.terrain;if(de&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&de.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:_.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=_.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const be=this.style._layers[I[this.currentLayer]],xe=f._getLayerSourceCache(be);if(be.isSky())continue;const Fe=xe?Q[xe.id]:void 0;this._renderTileClippingMasks(be,xe,Fe),this.renderLayer(this,xe,be,Fe)}if(this.style.fog&&this.transform.projection.supportsFog&&function(be,xe){const Fe=be.context,it=Fe.gl,ft=be.transform,yt=new t.DepthMode(it.LEQUAL,t.DepthMode.ReadOnly,[0,1]),bt=be.useProgram("globeAtmosphere",null,"globe"===ft.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Tt=t.globeToMercatorTransition(ft.zoom),Ne=xe.properties.get("color").toArray01(),_t=xe.properties.get("high-color").toArray01(),zt=xe.properties.get("space-color").toArray01PremultipliedAlpha(),Gt=t.identity$1([]);t.rotateY$1(Gt,Gt,-t.degToRad(ft._center.lng)),t.rotateX$1(Gt,Gt,t.degToRad(ft._center.lat)),t.rotateZ$1(Gt,Gt,ft.angle),t.rotateX$1(Gt,Gt,-ft._pitch);const pi=t.fromQuat(new Float32Array(16),Gt),hi=t.mapValue(xe.properties.get("star-intensity"),0,1,0,.25),Oi=t.mapValue(xe.properties.get("horizon-blend"),0,1,5e-4,.25),Ai=t.globeUseCustomAntiAliasing(be,Fe,ft)&&5e-4===Oi?ft.worldSize/(2*Math.PI*1.025)-1:ft.globeRadius,Gi=be.frameCounter/1e3%1,Gn=t.length(ft.globeCenterInViewSpace),Hi=Math.sqrt(Math.pow(Gn,2)-Math.pow(Ai,2)),un=Math.acos(Hi/Gn),ki={u_frustum_tl:ft.frustumCorners.TL,u_frustum_tr:ft.frustumCorners.TR,u_frustum_br:ft.frustumCorners.BR,u_frustum_bl:ft.frustumCorners.BL,u_horizon:ft.frustumCorners.horizon,u_transition:Tt,u_fadeout_range:Oi,u_color:Ne,u_high_color:_t,u_space_color:zt,u_star_intensity:hi,u_star_size:5*t.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Gi,u_horizon_angle:un,u_rotation_matrix:pi};be.prepareDrawProgram(Fe,bt);const An=be.atmosphereBuffer;An&&bt.draw(Fe,it.TRIANGLES,yt,t.StencilMode.disabled,t.ColorMode.alphaBlended,t.CullFaceMode.backCW,ki,"skybox",An.vertexBuffer,An.indexBuffer,An.segments)}(this,this.style.fog),this.renderPass="sky",(t.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const be=this.style._layers[I[this.currentLayer]],xe=f._getLayerSourceCache(be);be.isSky()&&this.renderLayer(this,xe,be,xe?Q[xe.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<I.length;){const be=this.style._layers[I[this.currentLayer]],xe=f._getLayerSourceCache(be);if(be.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(be)){if(be.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Fe=xe?("symbol"===be.type?re:Q)[xe.id]:void 0;this._renderTileClippingMasks(be,xe,xe?V[xe.id]:void 0),this.renderLayer(this,xe,be,Fe),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let be=null;t.values(this.style._layers).forEach(xe=>{const Fe=f._getLayerSourceCache(xe);Fe&&!xe.isHidden(this.transform.zoom)&&(!be||be.getSource().maxzoom<Fe.getSource().maxzoom)&&(be=Fe)}),be&&this.options.showTileBoundaries&&Lu.debug(this,be,be.getVisibleCoordinates())}this.options.showPadding&&function(be){const xe=be.transform.padding;vs(be,be.transform.height-(xe.top||0),3,pn),vs(be,xe.bottom||0,3,nn),El(be,xe.left||0,3,Fr),El(be,be.transform.width-(xe.right||0),3,Wa);const Fe=be.transform.centerPoint;var it,ft,yt,bt;sd(it=be,(ft=Fe.x)-1,(yt=be.transform.height-Fe.y)-10,2,20,bt=Os),sd(it,ft-10,yt-1,20,2,bt)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(f,_,I,Y){I.isHidden(this.transform.zoom)||("background"===I.type||"sky"===I.type||"custom"===I.type||Y&&Y.length)&&(this.id=I.id,this.gpuTimingStart(I),(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes(I.type)||f.terrain&&"custom"===I.type)&&Lu[I.type](f,_,I,Y,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(f){if(!this.options.gpuTiming)return;const _=this.context.extTimerQuery;let I=this.gpuTimers[f.id];I||(I=this.gpuTimers[f.id]={calls:0,cpuTime:0,query:_.createQueryEXT()}),I.calls++,_.beginQueryEXT(_.TIME_ELAPSED_EXT,I.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const f=this.context.extTimerQuery,_=f.createQueryEXT();this.deferredRenderGpuTimeQueries.push(_),f.beginQueryEXT(f.TIME_ELAPSED_EXT,_)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;f.endQueryEXT(f.TIME_ELAPSED_EXT)}collectGpuTimers(){const f=this.gpuTimers;return this.gpuTimers={},f}collectDeferredRenderGpuQueries(){const f=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],f}queryGpuTimers(f){const _={};for(const I in f){const Y=f[I],V=this.context.extTimerQuery,Q=V.getQueryObjectEXT(Y.query,V.QUERY_RESULT_EXT)/1e6;V.deleteQueryEXT(Y.query),_[I]=Q}return _}queryGpuTimeDeferredRender(f){if(!this.options.gpuTimingDeferredRender)return 0;const _=this.context.extTimerQuery;let I=0;for(const Y of f)I+=_.getQueryObjectEXT(Y,_.QUERY_RESULT_EXT)/1e6,_.deleteQueryEXT(Y);return I}translatePosMatrix(f,_,I,Y,V){if(!I[0]&&!I[1])return f;const Q=V?"map"===Y?this.transform.angle:0:"viewport"===Y?-this.transform.angle:0;if(Q){const be=Math.sin(Q),xe=Math.cos(Q);I=[I[0]*xe-I[1]*be,I[0]*be+I[1]*xe]}const re=[V?I[0]:Nn(_,I[0],this.transform.zoom),V?I[1]:Nn(_,I[1],this.transform.zoom),0],de=new Float32Array(16);return t.translate(de,f,re),de}saveTileTexture(f){const _=this._tileTextures[f.size[0]];_?_.push(f):this._tileTextures[f.size[0]]=[f]}getTileTexture(f){const _=this._tileTextures[f];return _&&_.length>0?_.pop():null}isPatternMissing(f){return null===f||void 0!==f&&!this.imageManager.getPattern(f.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const f=this.terrain&&this.terrain.renderingToTexture,_=this.terrain&&0===this.terrain.exaggeration(),I=this.style&&this.style.fog,Y=[];return this.terrainRenderModeElevated()&&Y.push("TERRAIN"),"globe"===this.transform.projection.name&&Y.push("GLOBE"),_&&Y.push("ZERO_EXAGGERATION"),I&&!f&&0!==I.getOpacity(this.transform.pitch)&&Y.push("FOG"),f&&Y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&Y.push("OVERDRAW_INSPECTOR"),Y}useProgram(f,_,I){this.cache=this.cache||{};const Y=I||[],V=this.currentGlobalDefines().concat(Y),Q=ps.cacheKey(Jl[f],f,V,_);return this.cache[Q]||(this.cache[Q]=new ps(this.context,f,Jl[f],_,zc[f],V)),this.cache[Q]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const f=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(f.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(f,_,I){if(this.terrain&&this.terrain.renderingToTexture)return;const Y=this.style.fog;if(Y){const V=Y.getOpacity(this.transform.pitch),Q=((re,de,be,xe,Fe,it,ft,yt,bt,Tt,Ne)=>{const _t=re.transform,zt=de.properties.get("color").toArray01();zt[3]=xe;const Gt=re.frameCounter/1e3%1;return{u_fog_matrix:be?_t.calculateFogTileMatrix(be):re.identityMat,u_fog_range:de.getFovAdjustedRange(_t._fov),u_fog_color:zt,u_fog_horizon_blend:de.properties.get("horizon-blend"),u_fog_temporal_offset:Gt,u_frustum_tl:Fe,u_frustum_tr:it,u_frustum_br:ft,u_frustum_bl:yt,u_globe_pos:bt,u_globe_radius:Tt,u_viewport:Ne,u_globe_transition:t.globeToMercatorTransition(_t.zoom),u_is_globe:+("globe"===_t.projection.name)}})(this,Y,I,V,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*t.exported.devicePixelRatio,this.transform.height*t.exported.devicePixelRatio]);_.setFogUniformValues(f,Q)}}setTileLoadedFlag(f){this.tileLoaded=f}saveCanvasCopy(){const f=this.canvasCopy();f&&(this.frameCopies.push(f),this.tileLoaded=!1)}canvasCopy(){const f=this.context.gl,_=f.createTexture();return f.bindTexture(f.TEXTURE_2D,_),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,0,0,f.drawingBufferWidth,f.drawingBufferHeight,0),_}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const f=this.style&&this.style.fog;return!!f&&0!==f.getOpacity(this.transform.pitch)}getBackgroundTiles(){const f=this._backgroundTiles,_=this._backgroundTiles={},I=this.transform.coveringTiles({tileSize:512});for(const Y of I)_[Y.key]=f[Y.key]||new t.Tile(Y,512,this.transform.tileZoom,this);return _}clearBackgroundTiles(){this._backgroundTiles={}}}class Pu{constructor(f=0,_=0,I=0,Y=0){if(isNaN(f)||f<0||isNaN(_)||_<0||isNaN(I)||I<0||isNaN(Y)||Y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=f,this.bottom=_,this.left=I,this.right=Y}interpolate(f,_,I){return null!=_.top&&null!=f.top&&(this.top=t.number(f.top,_.top,I)),null!=_.bottom&&null!=f.bottom&&(this.bottom=t.number(f.bottom,_.bottom,I)),null!=_.left&&null!=f.left&&(this.left=t.number(f.left,_.left,I)),null!=_.right&&null!=f.right&&(this.right=t.number(f.right,_.right,I)),this}getCenter(f,_){const I=t.clamp((this.left+f-this.right)/2,0,f),Y=t.clamp((this.top+_-this.bottom)/2,0,_);return new t.Point(I,Y)}equals(f){return this.top===f.top&&this.bottom===f.bottom&&this.left===f.left&&this.right===f.right}clone(){return new Pu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ic(k,f){const _=t.getColumn(k,3);t.fromQuat(k,f),t.setColumn(k,3,_)}function bs(k,f){const _=t.identity$1([]);return t.rotateZ$1(_,_,-f),t.rotateX$1(_,_,-k),_}function Fu(k,f){const _=[k[0],k[1],0],I=[f[0],f[1],0];if(t.length(_)>=1e-15){const Q=t.normalize([],_);t.scale$2(I,Q,t.dot(I,Q)),f[0]=I[0],f[1]=I[1]}const Y=t.cross([],f,k);if(t.len(Y)<1e-15)return null;const V=Math.atan2(-Y[1],Y[0]);return bs(Math.atan2(Math.sqrt(k[0]*k[0]+k[1]*k[1]),-k[2]),V)}class Yc{constructor(f,_){this.position=f,this.orientation=_}get position(){return this._position}set position(f){if(f){const _=f instanceof t.MercatorCoordinate?f:new t.MercatorCoordinate(f[0],f[1],f[2]);this._renderWorldCopies&&(_.x=t.wrap(_.x,0,1)),this._position=_}else this._position=null}lookAtPoint(f,_){if(this.orientation=null,!this.position)return;const I=this.position,Y=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(f)):0,V=t.MercatorCoordinate.fromLngLat(f,Y),Q=[V.x-I.x,V.y-I.y,V.z-I.z];_||(_=[0,0,1]),_[2]=Math.abs(_[2]),this.orientation=Fu(Q,_)}setPitchBearing(f,_){this.orientation=bs(t.degToRad(f),t.degToRad(-_))}}class il{constructor(f,_){this._transform=t.identity([]),this.orientation=_,this.position=f}get mercatorPosition(){const f=this.position;return new t.MercatorCoordinate(f[0],f[1],f[2])}get position(){const f=t.getColumn(this._transform,3);return[f[0],f[1],f[2]]}set position(f){var _;f&&t.setColumn(this._transform,3,[(_=f)[0],_[1],_[2],1])}get orientation(){return this._orientation}set orientation(f){this._orientation=f||t.identity$1([]),f&&ic(this._transform,this._orientation)}getPitchBearing(){const f=this.forward(),_=this.right();return{bearing:Math.atan2(-_[1],_[0]),pitch:Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2])}}setPitchBearing(f,_){this._orientation=bs(f,_),ic(this._transform,this._orientation)}forward(){const f=t.getColumn(this._transform,2);return[-f[0],-f[1],-f[2]]}up(){const f=t.getColumn(this._transform,1);return[-f[0],-f[1],-f[2]]}right(){const f=t.getColumn(this._transform,0);return[f[0],f[1],f[2]]}getCameraToWorld(f,_){const I=new Float64Array(16);return t.invert(I,this.getWorldToCamera(f,_)),I}getWorldToCameraPosition(f,_,I){const Y=this.position;t.scale$2(Y,Y,-f);const V=new Float64Array(16);return t.fromScaling(V,[I,I,I]),t.translate(V,V,Y),V[10]*=_,V}getWorldToCamera(f,_){const I=new Float64Array(16),Y=new Float64Array(4),V=this.position;return t.conjugate(Y,this._orientation),t.scale$2(V,V,-f),t.fromQuat(I,Y),t.translate(I,I,V),I[1]*=-1,I[5]*=-1,I[9]*=-1,I[13]*=-1,I[8]*=_,I[9]*=_,I[10]*=_,I[11]*=_,I}getCameraToClipPerspective(f,_,I,Y){const V=new Float64Array(16);return t.perspective(V,f,_,I,Y),V}getDistanceToElevation(f,_=!1){const I=0===f?0:t.mercatorZfromAltitude(f,_?t.latFromMercatorY(this.position[1]):this.position[1]),Y=this.forward();return(I-this.position[2])/Y[2]}clone(){return new il([...this.position],[...this.orientation])}}function Nl(k,f){const _=Yl(k.projection,k.zoom,k.width,k.height),I=function(V,Q,re,de,be){const xe=new t.LngLat(re.lng-180*Xo,re.lat),Fe=new t.LngLat(re.lng+180*Xo,re.lat),it=V.project(xe.lng,xe.lat),ft=V.project(Fe.lng,Fe.lat),yt=-Math.atan2(ft.y-it.y,ft.x-it.x),bt=t.MercatorCoordinate.fromLngLat(re);bt.y=t.clamp(bt.y,-1+Xo,1-Xo);const Tt=bt.toLngLat(),Ne=V.project(Tt.lng,Tt.lat),_t=t.MercatorCoordinate.fromLngLat(Tt);_t.x+=Xo;const zt=_t.toLngLat(),Gt=V.project(zt.lng,zt.lat),pi=ho(Gt.x-Ne.x,Gt.y-Ne.y,yt),hi=t.MercatorCoordinate.fromLngLat(Tt);hi.y+=Xo;const ri=hi.toLngLat(),Oi=V.project(ri.lng,ri.lat),Ai=ho(Oi.x-Ne.x,Oi.y-Ne.y,yt),Gi=Math.abs(pi.x)/Math.abs(Ai.y),Gn=t.identity([]);t.rotateZ(Gn,Gn,-yt*(1-(be?0:de)));const Hi=t.identity([]);return t.scale(Hi,Hi,[1,1-(1-Gi)*de,1]),Hi[4]=-Ai.x/Ai.y*de,t.rotateZ(Hi,Hi,yt),t.multiply(Hi,Gn,Hi),Hi}(k.projection,0,k.center,_,f),Y=zl(k);return t.scale(I,I,[Y,Y,1]),I}function zl(k){const f=k.projection,_=Yl(k.projection,k.zoom,k.width,k.height),I=nc(f,k.center),Y=nc(f,t.LngLat.convert(f.center));return Math.pow(2,I*_+(1-_)*Y)}function Yl(k,f,_,I,Y=1/0){const V=k.range;if(!V)return 0;const Q=Math.min(Y,Math.max(_,I)),re=Math.log(Q/1024)/Math.LN2;return t.smoothstep(V[0]+re,V[1]+re,f)}const Xo=1/4e4;function nc(k,f){const _=t.clamp(f.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),I=new t.LngLat(f.lng-180*Xo,_),Y=new t.LngLat(f.lng+180*Xo,_),V=k.project(I.lng,_),Q=k.project(Y.lng,_),re=t.MercatorCoordinate.fromLngLat(I),de=t.MercatorCoordinate.fromLngLat(Y),be=Q.x-V.x,xe=Q.y-V.y,Fe=de.x-re.x,it=de.y-re.y,ft=Math.sqrt((Fe*Fe+it*it)/(be*be+xe*xe));return Math.log(ft)/Math.LN2}function ho(k,f,_){const I=Math.cos(_),Y=Math.sin(_);return{x:k*I-f*Y,y:k*Y+f*I}}class kl{constructor(f,_,I,Y,V,Q,re){this.tileSize=512,this._renderWorldCopies=void 0===V||V,this._minZoom=f||0,this._maxZoom=_||22,this._minPitch=I??0,this._maxPitch=Y??60,this.setProjection(Q),this.setMaxBounds(re),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Pu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new il,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const f=new kl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return f._elevation=this._elevation,f._centerAltitude=this._centerAltitude,f._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,f.tileSize=this.tileSize,f.mercatorFromTransition=this.mercatorFromTransition,f.width=this.width,f.height=this.height,f.cameraElevationReference=this.cameraElevationReference,f._center=this._center,f._setZoom(this.zoom),f._seaLevelZoom=this._seaLevelZoom,f.angle=this.angle,f._fov=this._fov,f._pitch=this._pitch,f._nearZ=this._nearZ,f._farZ=this._farZ,f._averageElevation=this._averageElevation,f._unmodified=this._unmodified,f._edgeInsets=this._edgeInsets.clone(),f._camera=this._camera.clone(),f._calcMatrices(),f.freezeTileCoverage=this.freezeTileCoverage,f.frustumCorners=this.frustumCorners,f}get elevation(){return this._elevation}set elevation(f){this._elevation!==f&&(this._elevation=f,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(f,_=!1){const I=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||I)&&this._updateCameraOnTerrain(),(f||I)&&this._constrainCamera(_),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(f){this.projectionOptions=f||{name:"mercator"};const _=this.projection?this.getProjection():void 0;this.projection=t.getProjection(this.projectionOptions);const I=!j(_,this.getProjection());return I&&this._calcMatrices(),this.mercatorFromTransition=!1,I}setMercatorFromTransition(){const f=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=t.getProjection({name:"mercator"});const _=f!==this.projection.name;return _&&this._calcMatrices(),_}get minZoom(){return this._minZoom}set minZoom(f){this._minZoom!==f&&(this._minZoom=f,this.zoom=Math.max(this.zoom,f))}get maxZoom(){return this._maxZoom}set maxZoom(f){this._maxZoom!==f&&(this._maxZoom=f,this.zoom=Math.min(this.zoom,f))}get minPitch(){return this._minPitch}set minPitch(f){this._minPitch!==f&&(this._minPitch=f,this.pitch=Math.max(this.pitch,f))}get maxPitch(){return this._maxPitch}set maxPitch(f){this._maxPitch!==f&&(this._maxPitch=f,this.pitch=Math.min(this.pitch,f))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(f){void 0===f?f=!0:null===f&&(f=!1),this._renderWorldCopies=f}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get cameraWorldSize(){const f=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(f))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(f){this.rotation=f}get rotation(){return-this.angle/Math.PI*180}set rotation(f){const _=-f*Math.PI/180;var I,Y,V,Q,re,de,be,xe,Fe,it;this.angle!==_&&(this._unmodified=!1,this.angle=_,this._calcMatrices(),this.rotationMatrix=(I=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(I[1]=0,I[2]=0),I[0]=1,I[3]=1,I),Y=this.rotationMatrix,Q=this.angle,re=(V=this.rotationMatrix)[0],de=V[1],be=V[2],xe=V[3],Fe=Math.sin(Q),it=Math.cos(Q),Y[0]=re*it+be*Fe,Y[1]=de*it+xe*Fe,Y[2]=re*-Fe+be*it,Y[3]=de*-Fe+xe*it)}get pitch(){return this._pitch/Math.PI*180}set pitch(f){const _=t.clamp(f,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==_&&(this._unmodified=!1,this._pitch=_,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const f=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/f)}set fov(f){f=Math.max(.01,Math.min(60,f)),this._fov!==f&&(this._unmodified=!1,this._fov=t.degToRad(f),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(f){this._averageElevation=f,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(f){const _=Math.min(Math.max(f,this.minZoom),this.maxZoom);this._zoom!==_&&(this._unmodified=!1,this._setZoom(_),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(f){this._zoom=f,this.scale=this.zoomScale(f),this.tileZoom=Math.floor(f),this.zoomFraction=f-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const f=this._elevation;this._centerAltitude=f.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=f.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const f=this._elevation,_=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],I=this.horizonLineFromTop();let Y=0,V=0;for(let Q=0;Q<_.length;Q++){const re=new t.Point(_[Q][0]*this.width,I+_[Q][1]*(this.height-I)),de=f.pointCoordinate(re);if(!de)continue;const be=1/Math.hypot(de[0]-this._camera.position[0],de[1]-this._camera.position[1]);Y+=de[3]*be,V+=be}return 0===V?NaN:Y/V}get center(){return this._center}set center(f){f.lat===this._center.lat&&f.lng===this._center.lng||(this._unmodified=!1,this._center=f,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const f=this._seaLevelZoom,_=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),I=this.pixelsPerMeter/this.worldSize*_,Y=this._mercatorZfromZoom(f),V=this._mercatorZfromZoom(this._maxZoom),Q=Math.max(Y-I,V);this._setZoom(this._zoomFromMercatorZ(Q))}get padding(){return this._edgeInsets.toJSON()}set padding(f){this._edgeInsets.equals(f)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,f,1),this._calcMatrices())}computeZoomRelativeTo(f){const _=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,f.toAltitude()));let I;I=f.z<this._camera.position[2]?[_.x,_.y,_.z]:[f.x,f.y,f.z];const Y=t.length(t.sub([],this._camera.position,I));return t.clamp(this._zoomFromMercatorZ(Y),this._minZoom,this._maxZoom)}setFreeCameraOptions(f){if(!this.height||!f.position&&!f.orientation)return;this._updateCameraState();let _=!1;if(f.orientation&&!t.exactEquals(f.orientation,this._camera.orientation)&&(_=this._setCameraOrientation(f.orientation)),f.position){const I=[f.position.x,f.position.y,f.position.z];t.exactEquals$1(I,this._camera.position)||(this._setCameraPosition(I),_=!0)}_&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const f=this._camera.position,_=new Yc;return _.position=new t.MercatorCoordinate(f[0],f[1],f[2]),_.orientation=this._camera.orientation,_._elevation=this.elevation,_._renderWorldCopies=this.renderWorldCopies,_}_setCameraOrientation(f){if(!t.length$1(f))return!1;t.normalize$1(f,f);const _=t.transformQuat([],[0,0,-1],f),I=t.transformQuat([],[0,-1,0],f);if(I[2]<0)return!1;const Y=Fu(_,I);return!!Y&&(this._camera.orientation=Y,!0)}_setCameraPosition(f){const _=this.zoomScale(this.minZoom)*this.tileSize,I=this.zoomScale(this.maxZoom)*this.tileSize,Y=this.cameraToCenterDistance;f[2]=t.clamp(f[2],Y/I,Y/_),this._camera.position=f}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(f){return this._edgeInsets.equals(f)}interpolatePadding(f,_,I){this._unmodified=!1,this._edgeInsets.interpolate(f,_,I),this._constrain(),this._calcMatrices()}coveringZoomLevel(f){const _=(f.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/f.tileSize));return Math.max(0,_)}getVisibleUnwrappedCoordinates(f){const _=[new t.UnwrappedTileID(0,f)];if(this.renderWorldCopies){const I=this.pointCoordinate(new t.Point(0,0)),Y=this.pointCoordinate(new t.Point(this.width,0)),V=this.pointCoordinate(new t.Point(this.width,this.height)),Q=this.pointCoordinate(new t.Point(0,this.height)),re=Math.floor(Math.min(I.x,Y.x,V.x,Q.x)),de=Math.floor(Math.max(I.x,Y.x,V.x,Q.x)),be=1;for(let xe=re-be;xe<=de+be;xe++)0!==xe&&_.push(new t.UnwrappedTileID(xe,f))}return _}coveringTiles(f){let _=this.coveringZoomLevel(f);const I=_,Y=this.elevation&&!f.isTerrainDEM,V="mercator"===this.projection.name;if(void 0!==f.minzoom&&_<f.minzoom)return[];void 0!==f.maxzoom&&_>f.maxzoom&&(_=f.maxzoom);const Q=this.locationCoordinate(this.center),re=this.center.lat,de=1<<_,be=[de*Q.x,de*Q.y,0],xe="globe"===this.projection.name,Fe=!xe,it=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,_,Fe),ft=xe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),yt=de*t.mercatorZfromAltitude(1,this.center.lat),bt=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),Tt=[de*ft.x,de*ft.y,bt*(Fe?1:yt)],Ne=this.cameraToCenterDistance/f.tileSize*(f.roundZoom?1:.502),_t=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?_:0,zt=f.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Gt=f.isTerrainDEM?-zt:this._elevation?this._elevation.getMinElevationBelowMSL():0,pi=this.projection.isReprojectedInTileSpace?zl(this):1,hi=Ui=>{const bn=new t.MercatorCoordinate(Ui.x+25e-6,Ui.y,Ui.z),Bn=new t.MercatorCoordinate(Ui.x,Ui.y+25e-6,Ui.z),Hn=Ui.toLngLat(),ea=bn.toLngLat(),wa=Bn.toLngLat(),Ir=this.locationCoordinate(Hn),ca=this.locationCoordinate(ea),Ua=this.locationCoordinate(wa),qr=Math.hypot(ca.x-Ir.x,ca.y-Ir.y),ta=Math.hypot(Ua.x-Ir.x,Ua.y-Ir.y);return Math.sqrt(qr*ta)*pi/25e-6},ri=Ui=>{const cn=zt,bn=Gt;return{aabb:t.tileAABB(this,de,0,0,0,Ui,bn,cn,this.projection),zoom:0,x:0,y:0,minZ:bn,maxZ:cn,wrap:Ui,fullyVisible:!1}},Oi=[];let Ai=[];const Gi=_,Gn=f.reparseOverscaled?I:_,Hi=Ui=>Ui*Ui,un=Hi((bt-this._centerAltitude)*yt),ki=Ui=>{if(!this._elevation||!Ui.tileID||!V)return;const cn=this._elevation.getMinMaxForTile(Ui.tileID),bn=Ui.aabb;cn?(bn.min[2]=cn.min,bn.max[2]=cn.max,bn.center[2]=(bn.min[2]+bn.max[2])/2):(Ui.shouldSplit=An(Ui),Ui.shouldSplit||(bn.min[2]=bn.max[2]=bn.center[2]=this._centerAltitude))},An=Ui=>{if(Ui.zoom<_t)return!0;if(Ui.zoom===Gi)return!1;if(null!=Ui.shouldSplit)return Ui.shouldSplit;const cn=Ui.aabb.distanceX(Tt),bn=Ui.aabb.distanceY(Tt);let Bn=un,Hn=1;if(xe){Bn=Hi(Ui.aabb.distanceZ(Tt));const Ir=Math.pow(2,Ui.zoom),ca=t.latFromMercatorY((Ui.y+1)/Ir),Ua=t.latFromMercatorY(Ui.y/Ir),qr=Math.min(Math.max(re,ca),Ua),ta=t.circumferenceAtLatitude(qr)/t.circumferenceAtLatitude(re);if(Hn=qr===re?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ta/this._mercatorScaleRatio),this.zoom<=t.GLOBE_ZOOM_THRESHOLD_MIN&&Ui.zoom===Gi-1&&ta>=.9)return!0}else if(Y&&(Bn=Hi(Ui.aabb.distanceZ(Tt)*yt)),this.projection.isReprojectedInTileSpace&&I<=5){const Ir=Math.pow(2,Ui.zoom),ca=hi(new t.MercatorCoordinate((Ui.x+.5)/Ir,(Ui.y+.5)/Ir));Hn=ca>.85?1:ca}const ea=cn*cn+bn*bn+Bn;return ea<Hi((1<<Gi-Ui.zoom)*Ne*Hn*((Ir,ca)=>{if(ca*Hi(.707)<Ir)return 1;const Ua=Math.sqrt(ca/Ir);return Ua/(1.4144271570014144+(Math.pow(1.1,Ua-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Bn,un),ea))};if(this.renderWorldCopies)for(let Ui=1;Ui<=3;Ui++)Oi.push(ri(-Ui)),Oi.push(ri(Ui));for(Oi.push(ri(0));Oi.length>0;){const Ui=Oi.pop(),cn=Ui.x,bn=Ui.y;let Bn=Ui.fullyVisible;if(!Bn){const Hn=Ui.aabb.intersects(it);if(0===Hn)continue;Bn=2===Hn}if(Ui.zoom!==Gi&&An(Ui))for(let Hn=0;Hn<4;Hn++){const ea=(cn<<1)+Hn%2,wa=(bn<<1)+(Hn>>1),Ir={aabb:V?Ui.aabb.quadrant(Hn):t.tileAABB(this,de,Ui.zoom+1,ea,wa,Ui.wrap,Ui.minZ,Ui.maxZ,this.projection),zoom:Ui.zoom+1,x:ea,y:wa,wrap:Ui.wrap,fullyVisible:Bn,tileID:void 0,shouldSplit:void 0,minZ:Ui.minZ,maxZ:Ui.maxZ};Y&&!xe&&(Ir.tileID=new t.OverscaledTileID(Ui.zoom+1===Gi?Gn:Ui.zoom+1,Ui.wrap,Ui.zoom+1,ea,wa),ki(Ir)),Oi.push(Ir)}else{const Hn=Ui.zoom===Gi?Gn:Ui.zoom;if(f.minzoom&&f.minzoom>Hn)continue;const ea=be[0]-(.5+cn+(Ui.wrap<<Ui.zoom))*(1<<_-Ui.zoom),wa=be[1]-.5-bn,Ir=Ui.tileID?Ui.tileID:new t.OverscaledTileID(Hn,Ui.wrap,Ui.zoom,cn,bn);Ai.push({tileID:Ir,distanceSq:ea*ea+wa*wa})}}if(this.fogCullDistSq){const Ui=this.fogCullDistSq,cn=this.horizonLineFromTop();Ai=Ai.filter(bn=>{const Bn=[0,0,0,1],Hn=[t.EXTENT,t.EXTENT,0,1],ea=this.calculateFogTileMatrix(bn.tileID.toUnwrapped());t.transformMat4$1(Bn,Bn,ea),t.transformMat4$1(Hn,Hn,ea);const wa=t.getAABBPointSquareDist(Bn,Hn);if(0===wa)return!0;let Ir=!1;const ca=this._elevation;if(ca&&wa>Ui&&0!==cn){const Ua=this.calculateProjMatrix(bn.tileID.toUnwrapped());let qr;f.isTerrainDEM||(qr=ca.getMinMaxForTile(bn.tileID)),qr||(qr={min:Gt,max:zt});const ta=t.furthestTileCorner(this.rotation),ns=[ta[0]*t.EXTENT,ta[1]*t.EXTENT,qr.max];t.transformMat4(ns,ns,Ua),Ir=(1-ns[1])*this.height*.5<cn}return wa<Ui||Ir})}return Ai.sort((Ui,cn)=>Ui.distanceSq-cn.distanceSq).map(Ui=>Ui.tileID)}resize(f,_){this.width=f,this.height=_,this.pixelsToGLUnits=[2/f,-2/_],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(f){return Math.pow(2,f)}scaleZoom(f){return Math.log(f)/Math.LN2}project(f){const _=t.clamp(f.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),I=this.projection.project(f.lng,_);return new t.Point(I.x*this.worldSize,I.y*this.worldSize)}unproject(f){return this.projection.unproject(f.x/this.worldSize,f.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/t.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(f,_){let I,Y;const V=this.centerPoint;if("globe"===this.projection.name){const re=this.worldSize;I=(_.x-V.x)/re,Y=(_.y-V.y)/re}else{const re=this.pointCoordinate(_),de=this.pointCoordinate(V);I=re.x-de.x,Y=re.y-de.y}const Q=this.locationCoordinate(f);this.setLocation(new t.MercatorCoordinate(Q.x-I,Q.y-Y))}setLocation(f){this.center=this.coordinateLocation(f),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(f){return this.projection.locationPoint(this,f)}locationPoint3D(f){return this.projection.locationPoint(this,f,!0)}pointLocation(f){return this.coordinateLocation(this.pointCoordinate(f))}pointLocation3D(f){return this.coordinateLocation(this.pointCoordinate3D(f))}locationCoordinate(f,_){const I=_?t.mercatorZfromAltitude(_,f.lat):void 0,Y=this.projection.project(f.lng,f.lat);return new t.MercatorCoordinate(Y.x,Y.y,I)}coordinateLocation(f){return this.projection.unproject(f.x,f.y)}pointRayIntersection(f,_){const I=_??this._centerAltitude,Y=[f.x,f.y,0,1],V=[f.x,f.y,1,1];t.transformMat4$1(Y,Y,this.pixelMatrixInverse),t.transformMat4$1(V,V,this.pixelMatrixInverse);const Q=V[3];t.scale$1(Y,Y,1/Y[3]),t.scale$1(V,V,1/Q);const re=Y[2],de=V[2];return{p0:Y,p1:V,t:re===de?0:(I-re)/(de-re)}}screenPointToMercatorRay(f){const _=[f.x,f.y,0,1],I=[f.x,f.y,1,1];return t.transformMat4$1(_,_,this.pixelMatrixInverse),t.transformMat4$1(I,I,this.pixelMatrixInverse),t.scale$1(_,_,1/_[3]),t.scale$1(I,I,1/I[3]),_[2]=t.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,I[2]=t.mercatorZfromAltitude(I[2],this._center.lat)*this.worldSize,t.scale$1(_,_,1/this.worldSize),t.scale$1(I,I,1/this.worldSize),new t.Ray([_[0],_[1],_[2]],t.normalize([],t.sub([],I,_)))}rayIntersectionCoordinate(f){const{p0:_,p1:I,t:Y}=f,V=t.mercatorZfromAltitude(_[2],this._center.lat),Q=t.mercatorZfromAltitude(I[2],this._center.lat);return new t.MercatorCoordinate(t.number(_[0],I[0],Y)/this.worldSize,t.number(_[1],I[1],Y)/this.worldSize,t.number(V,Q,Y))}pointCoordinate(f,_=this._centerAltitude){return this.projection.pointCoordinate(this,f.x,f.y,_)}pointCoordinate3D(f){if(!this.elevation)return this.pointCoordinate(f);let _=this.projection.pointCoordinate3D(this,f.x,f.y);if(_)return new t.MercatorCoordinate(_[0],_[1],_[2]);let I=0,Y=this.horizonLineFromTop();if(f.y>Y)return this.pointCoordinate(f);const V=.02*Y,Q=f.clone();for(let re=0;re<10&&Y-I>V;re++){Q.y=t.number(I,Y,.66);const de=this.projection.pointCoordinate3D(this,Q.x,Q.y);de?(Y=Q.y,_=de):I=Q.y}return _?new t.MercatorCoordinate(_[0],_[1],_[2]):this.pointCoordinate(f)}isPointAboveHorizon(f){return this.projection.isPointAboveHorizon(this,f)}isPointOnSurface(f){if(f.y<0||f.y>this.height||f.x<0||f.x>this.width)return!1;if(this.elevation||this.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(f);const _=this.pointCoordinate(f);return _.y>=0&&_.y<=1}_coordinatePoint(f,_){const I=_&&this.elevation?this.elevation.getAtPointOrZero(f,this._centerAltitude):this._centerAltitude,Y=[f.x*this.worldSize,f.y*this.worldSize,I+f.toAltitude(),1];return t.transformMat4$1(Y,Y,this.pixelMatrix),Y[3]>0?new t.Point(Y[0]/Y[3],Y[1]/Y[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:f,left:_}=this._edgeInsets,I=this.height-this._edgeInsets.bottom,Y=this.width-this._edgeInsets.right,V=this.pointLocation3D(new t.Point(_,f)),Q=this.pointLocation3D(new t.Point(Y,f)),re=this.pointLocation3D(new t.Point(Y,I)),de=this.pointLocation3D(new t.Point(_,I));let be=Math.min(V.lng,Q.lng,re.lng,de.lng),xe=Math.max(V.lng,Q.lng,re.lng,de.lng),Fe=Math.min(V.lat,Q.lat,re.lat,de.lat),it=Math.max(V.lat,Q.lat,re.lat,de.lat);const ft=Math.pow(2,-this.zoom)/16*270,yt="globe"===this.projection.name?1:4,bt=(Tt,Ne,_t,zt,Gt)=>{const pi=(Tt+_t)/2,hi=(Ne+zt)/2,ri=new t.Point(pi,hi),{lng:Oi,lat:Ai}=this.pointLocation3D(ri),Gi=Math.max(0,be-Oi,Fe-Ai,Oi-xe,Ai-it);be=Math.min(be,Oi),xe=Math.max(xe,Oi),Fe=Math.min(Fe,Ai),it=Math.max(it,Ai),(Gt<yt||Gi>ft)&&(bt(Tt,Ne,pi,hi,Gt+1),bt(pi,hi,_t,zt,Gt+1))};if(bt(_,f,Y,f,1),bt(Y,f,Y,I,1),bt(Y,I,_,I,1),bt(_,I,_,f,1),"globe"===this.projection.name){const[Tt,Ne]=t.polesInViewport(this);Tt?(it=90,xe=180,be=-180):Ne&&(Fe=-90,xe=180,be=-180)}return new t.LngLatBounds(new t.LngLat(be,Fe),new t.LngLat(xe,it))}_getBoundsRectangular(f,_){const{top:I,left:Y}=this._edgeInsets,V=this.height-this._edgeInsets.bottom,Q=this.width-this._edgeInsets.right,re=new t.Point(Y,I),de=new t.Point(Q,I),be=new t.Point(Q,V),xe=new t.Point(Y,V);let Fe=this.pointCoordinate(re,f),it=this.pointCoordinate(de,f);const ft=this.pointCoordinate(be,_),yt=this.pointCoordinate(xe,_),bt=(Tt,Ne)=>(Ne.y-Tt.y)/(Ne.x-Tt.x);return Fe.y>1&&it.y>=0?Fe=new t.MercatorCoordinate((1-yt.y)/bt(yt,Fe)+yt.x,1):Fe.y<0&&it.y<=1&&(Fe=new t.MercatorCoordinate(-yt.y/bt(yt,Fe)+yt.x,0)),it.y>1&&Fe.y>=0?it=new t.MercatorCoordinate((1-ft.y)/bt(ft,it)+ft.x,1):it.y<0&&Fe.y<=1&&(it=new t.MercatorCoordinate(-ft.y/bt(ft,it)+ft.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(Fe)).extend(this.coordinateLocation(it)).extend(this.coordinateLocation(yt)).extend(this.coordinateLocation(ft))}_getBoundsRectangularTerrain(){const f=this.elevation;if(!f.visibleDemTiles.length||f.isUsingMockSource())return this._getBoundsRectangular(0,0);const _=f.visibleDemTiles.reduce((I,Y)=>{if(Y.dem){const V=Y.dem.tree;I.min=Math.min(I.min,V.minimums[0]),I.max=Math.max(I.max,V.maximums[0])}return I},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(_.min*f.exaggeration(),_.max*f.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(f=!0){const _=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,I=this.height/2-_*(1-this._horizonShift);return f?Math.max(0,I):I}getMaxBounds(){return this.maxBounds}setMaxBounds(f){this.maxBounds=f,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,f&&(this.minLat=f.getSouth(),this.maxLat=f.getNorth(),this.minLng=f.getWest(),this.maxLng=f.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(f,_){return this.projection.createTileMatrix(this,_,f)}calculateDistanceTileData(f){const _=f.key,I=this._distanceTileDataCache;if(I[_])return I[_];const Y=f.canonical,V=1/this.height,Q=this.cameraWorldSize,re=Q/this.zoomScale(Y.z),de=(Y.x+Math.pow(2,Y.z)*f.wrap)*re,be=Y.y*re,xe=this.point;xe.x*=Q/this.worldSize,xe.y*=Q/this.worldSize;const Fe=this.angle,it=Math.sin(-Fe),ft=-Math.cos(-Fe);return I[_]={bearing:[it,ft],center:[(xe.x-de)*V,(xe.y-be)*V],scale:re/t.EXTENT*V},I[_]}calculateFogTileMatrix(f){const _=f.key,I=this._fogTileMatrixCache;if(I[_])return I[_];const Y=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,f);return t.multiply(Y,this.worldToFogMatrix,Y),I[_]=new Float32Array(Y),I[_]}calculateProjMatrix(f,_=!1){const I=f.key,Y=_?this._alignedProjMatrixCache:this._projMatrixCache;if(Y[I])return Y[I];const V=this.calculatePosMatrix(f,this.worldSize);return t.multiply(V,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:_?this.alignedProjMatrix:this.projMatrix,V),Y[I]=new Float32Array(V),Y[I]}calculatePixelsToTileUnitsMatrix(f){const _=f.tileID.key,I=this._pixelsToTileUnitsCache;if(I[_])return I[_];const Y=function(V,Q){const{scale:re}=V.tileTransform,de=re*t.EXTENT/(V.tileSize*Math.pow(2,Q.zoom-V.tileID.overscaledZ+V.tileID.canonical.z));return be=new Float32Array(4),it=(xe=Q.inverseAdjustmentMatrix)[1],ft=xe[2],yt=xe[3],Tt=(Fe=[de,de])[1],be[0]=xe[0]*(bt=Fe[0]),be[1]=it*bt,be[2]=ft*Tt,be[3]=yt*Tt,be;var be,xe,Fe,it,ft,yt,bt,Tt}(f,this);return I[_]=Y,I[_]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const f=1/this.worldSize,_=t.fromScaling([],[f,f,f]);return t.multiply(_,_,this.globeMatrix),_}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const f=this._elevation;this._updateCameraState();const _=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,I=this._computeCameraPosition(_),Y=this._camera.forward(),V=t.mercatorZfromAltitude(1,this._center.lat);I[2]/=V,Y[2]/=V,t.normalize(Y,Y);const Q=f.raycast(I,Y,f.exaggeration());if(Q){const re=t.scaleAndAdd([],I,Y,Q),de=new t.MercatorCoordinate(re[0],re[1],t.mercatorZfromAltitude(re[2],t.latFromMercatorY(re[1]))),be=(de.z+t.length([de.x-I[0],de.y-I[1],de.z-I[2]*V]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(be),this._centerAltitude=de.toAltitude(),this._center=this.coordinateLocation(de),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(f=!1){if(!this._elevation)return;const _=this._elevation,I=t.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,Y=this._computeCameraPosition(I),V=_.getAtPointOrZero(new t.MercatorCoordinate(...Y)),Q=this.pixelsPerMeter/this.worldSize*V,re=this._minimumHeightOverTerrain(),de=Y[2]-Q;if(de<=re)if(de<0||f){const be=this.locationCoordinate(this._center,this._centerAltitude),xe=[Y[0],Y[1],be.z-Y[2]],Fe=t.length(xe);xe[2]-=(re-de)/this._pixelsPerMercatorPixel;const it=t.length(xe);if(0===it)return;t.scale$2(xe,xe,Fe/it*this._pixelsPerMercatorPixel),this._camera.position=[Y[0],Y[1],be.z*this._pixelsPerMercatorPixel-xe[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const f="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||f){const it=this.center;return it.lat=t.clamp(it.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!f)&&(it.lng=t.clamp(it.lng,this.minLng,this.maxLng)),this.center=it,void(this._constraining=!1)}const _=this._unmodified,{x:I,y:Y}=this.point;let V=0,Q=I,re=Y;const de=this.width/2,be=this.height/2,xe=this.worldMinY*this.scale,Fe=this.worldMaxY*this.scale;if(Y-be<xe&&(re=xe+be),Y+be>Fe&&(re=Fe-be),Fe-xe<this.height&&(V=Math.max(V,this.height/(Fe-xe)),re=(Fe+xe)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const it=this.worldMinX*this.scale,ft=this.worldMaxX*this.scale,yt=this.worldSize/2-(it+ft)/2;Q=(I+yt+this.worldSize)%this.worldSize-yt,Q-de<it&&(Q=it+de),Q+de>ft&&(Q=ft-de),ft-it<this.width&&(V=Math.max(V,this.width/(ft-it)),Q=(ft+it)/2)}Q===I&&re===Y||(this.center=this.unproject(new t.Point(Q,re))),V&&(this.zoom+=this.scaleZoom(V)),this._constrainCamera(),this._unmodified=_,this._constraining=!1}_minZoomForBounds(){let f=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(f=Math.max(f,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),f}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const f=this.centerOffset,_=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=t.mercatorZfromAltitude(1,this.center.lat)/t.mercatorZfromAltitude(1,t.GLOBE_SCALE_MATCH_LATITUDE));const I=Yl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,I),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Y="meters"===this.projection.zAxisUnit?_:1,V=this._camera.getWorldToCamera(this.worldSize,Y),Q=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Q[8]=2*-f.x/this.width,Q[9]=2*f.y/this.height;let re=t.mul([],Q,V);if(this.projection.isReprojectedInTileSpace){const hi=this.locationCoordinate(this.center),ri=t.identity([]);t.translate(ri,ri,[hi.x*this.worldSize,hi.y*this.worldSize,0]),t.multiply(ri,ri,Nl(this)),t.translate(ri,ri,[-hi.x*this.worldSize,-hi.y*this.worldSize,0]),t.multiply(re,re,ri),this.inverseAdjustmentMatrix=function(Oi){const Ai=Nl(Oi,!0);return Dt([],[Ai[0],Ai[1],Ai[4],Ai[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale([],re,[this.worldSize,this.worldSize,this.worldSize/Y,1]),this.projMatrix=re,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const de=t.invert([],Q);this.frustumCorners=t.FrustumCorners.fromInvProjectionMatrix(de,this.horizonLineFromTop(),this.height);const be=new Float32Array(16);t.identity(be),t.scale(be,be,[1,-1,1]),t.rotateX(be,be,this._pitch),t.rotateZ(be,be,this.angle);const xe=t.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Fe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;xe[8]=2*-f.x/this.width,xe[9]=2*(f.y+Fe)/this.height,this.skyboxMatrix=t.multiply(be,xe,be);const it=this.point,ft=it.x,yt=it.y,bt=this.width%2/2,Tt=this.height%2/2,Ne=Math.cos(this.angle),_t=Math.sin(this.angle),zt=ft-Math.round(ft)+Ne*bt+_t*Tt,Gt=yt-Math.round(yt)+Ne*Tt+_t*bt,pi=new Float64Array(re);if(t.translate(pi,pi,[zt>.5?zt-1:zt,Gt>.5?Gt-1:Gt,0]),this.alignedProjMatrix=pi,re=t.create(),t.scale(re,re,[this.width/2,-this.height/2,1]),t.translate(re,re,[1,-1,0]),this.labelPlaneMatrix=re,re=t.create(),t.scale(re,re,[1,-1,1]),t.translate(re,re,[-1,-1,0]),t.scale(re,re,[2/this.width,2/this.height,1]),this.glCoordMatrix=re,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},re=t.invert(new Float64Array(16),this.pixelMatrix),!re)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=re,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=t.calculateGlobeMatrix(this);const hi=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=t.transformMat4(hi,hi,V),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=re;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const f=this.cameraWorldSizeForFog,_=this.cameraPixelsPerMeter,I=this._camera.position,Y=1/this.height/this._pixelsPerMercatorPixel,V=[f,f,_];t.scale$2(V,V,Y),t.scale$2(I,I,-1),t.multiply$2(I,I,V);const Q=t.create();t.translate(Q,Q,I),t.scale(Q,Q,V),this.mercatorFogMatrix=Q,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(f,_,Y)}_computeCameraPosition(f){const _=(f=f||this.pixelsPerMeter)/this.pixelsPerMeter,I=this._camera.forward(),Y=this.point,V=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*_-f/this.worldSize*this._centerAltitude;return[Y.x/this.worldSize-I[0]*V,Y.y/this.worldSize-I[1]*V,f/this.worldSize*this._centerAltitude-I[2]*V]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(f){const _=this._maxCameraBoundsDistance()*Math.cos(this._pitch),I=this._camera.position[2],Y=f[2];let V=1;this.projection.wrap&&(this.center=this.center.wrap()),Y>0&&(V=Math.min((_-I)/Y,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,f,V),this._updateStateFromCamera()}_updateStateFromCamera(){const f=this._camera.position,_=this._camera.forward(),{pitch:I,bearing:Y}=this._camera.getPitchBearing(),V=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Q=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),re=Math.max((f[2]-V)/Math.cos(I),Q),de=this._zoomFromMercatorZ(re);t.scaleAndAdd(f,f,_,re),this._pitch=t.clamp(I,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(Y,-Math.PI,Math.PI),this._setZoom(t.clamp(de,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new t.MercatorCoordinate(f[0],f[1],f[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(f){return Math.pow(2,f)*this.tileSize}_mercatorZfromZoom(f){return this.cameraToCenterDistance/this._worldSizeFromZoom(f)}_minimumHeightOverTerrain(){const f=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(f)}_zoomFromMercatorZ(f){return this.scaleZoom(this.cameraToCenterDistance/(f*this.tileSize))}zoomFromMercatorZAdjusted(f){let _=0,I=t.GLOBE_ZOOM_THRESHOLD_MAX,Y=0,V=1/0;for(;I-_>1e-6&&I>_;){const Q=_+.5*(I-_),re=this.tileSize*Math.pow(2,Q),de=this.getCameraToCenterDistance(this.projection,Q,re),be=this.scaleZoom(de/(f*this.tileSize)),xe=Math.abs(Q-be);xe<V&&(V=xe,Y=Q),Q<be?_=Q:I=Q}return Y}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(f,_){const I=Math.min(f.x,_.x),Y=Math.max(f.x,_.x),V=Math.min(f.y,_.y),Q=Math.max(f.y,_.y);if(V<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const re=[new t.Point(I,V),new t.Point(Y,Q),new t.Point(I,Q),new t.Point(Y,V)],de=this.renderWorldCopies?-3:0,be=this.renderWorldCopies?4:1;for(const xe of re){const Fe=this.pointRayIntersection(xe);if(Fe.t<0)return!0;const it=this.rayIntersectionCoordinate(Fe);if(it.x<de||it.y<0||it.x>be||it.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(f,_){const I=t.length(t.sub([],this._camera.position,f)),Y=this._zoomFromMercatorZ(I)+_;return I-this._mercatorZfromZoom(Y)}getCameraPoint(){if("globe"===this.projection.name){const f=function([_,I,Y],V){const Q=[_,I,Y,1];t.transformMat4$1(Q,Q,V);const re=Q[3]=Math.max(Q[3],1e-6);return Q[0]/=re,Q[1]/=re,Q[2]/=re,Q}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new t.Point(f[0],f[1])}{const f=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,f))}}getCameraToCenterDistance(f,_=this.zoom,I=this.worldSize){const Y=Yl(f,_,this.width,this.height,1024),V=f.pixelSpaceConversion(this.center.lat,I,Y);return.5/Math.tan(.5*this._fov)*this.height*V}getWorldToCameraMatrix(){const f=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&t.multiply(f,f,this.globeMatrix),f}}function Gc(k,f){let _=!1,I=null;const Y=()=>{I=null,_&&(k(),I=setTimeout(Y,f),_=!1)};return()=>(_=!0,I||Y(),I)}class Gl{constructor(f){this._hashName=f&&encodeURIComponent(f),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Gc(this._updateHashUnthrottled.bind(this),300)}addTo(f){return this._map=f,t.window.addEventListener("hashchange",this._onHashChange,!1),f.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),t.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const f=this._map;if(!f)return"";const _=fu(f);if(this._hashName){const I=this._hashName;let Y=!1;const V=t.window.location.hash.slice(1).split("&").map(Q=>{const re=Q.split("=")[0];return re===I?(Y=!0,`${re}=${_}`):Q}).filter(Q=>Q);return Y||V.push(`${I}=${_}`),`#${V.join("&")}`}return`#${_}`}_getCurrentHash(){const f=t.window.location.hash.replace("#","");if(this._hashName){let _;return f.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(_=I)}),(_&&_[1]||"").split("/")}return f.split("/")}_onHashChange(){const f=this._map;if(!f)return!1;const _=this._getCurrentHash();if(_.length>=3&&!_.some(I=>isNaN(I))){const I=f.dragRotate.isEnabled()&&f.touchZoomRotate.isEnabled()?+(_[3]||0):f.getBearing();return f.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:I,pitch:+(_[4]||0)}),!0}return!1}_updateHashUnthrottled(){const f=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,f)}}function fu(k,f){const _=k.getCenter(),I=Math.round(100*k.getZoom())/100,Y=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),V=Math.pow(10,Y),Q=Math.round(_.lng*V)/V,re=Math.round(_.lat*V)/V,de=k.getBearing(),be=k.getPitch();let xe=f?`/${Q}/${re}/${I}`:`${I}/${re}/${Q}`;return(de||be)&&(xe+="/"+Math.round(10*de)/10),be&&(xe+=`/${Math.round(be)}`),xe}const Kd={linearity:.3,easing:t.bezier(0,0,.3,1)},pu=t.extend({deceleration:2500,maxSpeed:1400},Kd),yo=t.extend({deceleration:20,maxSpeed:1400},Kd),dr=t.extend({deceleration:1e3,maxSpeed:360},Kd),v=t.extend({deceleration:1e3,maxSpeed:90},Kd);class O{constructor(f){this._map=f,this.clear()}clear(){this._inertiaBuffer=[]}record(f){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:f})}_drainInertiaBuffer(){const f=this._inertiaBuffer,_=t.exported.now();for(;f.length>0&&_-f[0].time>160;)f.shift()}_onMoveEnd(f){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const _={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:V}of this._inertiaBuffer)_.zoom+=V.zoomDelta||0,_.bearing+=V.bearingDelta||0,_.pitch+=V.pitchDelta||0,V.panDelta&&_.pan._add(V.panDelta),V.around&&(_.around=V.around),V.pinchAround&&(_.pinchAround=V.pinchAround);const I=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Y={};if(_.pan.mag()){const V=he(_.pan.mag(),I,t.extend({},pu,f||{}));Y.offset=_.pan.mult(V.amount/_.pan.mag()),Y.center=this._map.transform.center,W(Y,V)}if(_.zoom){const V=he(_.zoom,I,yo);Y.zoom=this._map.transform.zoom+V.amount,W(Y,V)}if(_.bearing){const V=he(_.bearing,I,dr);Y.bearing=this._map.transform.bearing+t.clamp(V.amount,-179,179),W(Y,V)}if(_.pitch){const V=he(_.pitch,I,v);Y.pitch=this._map.transform.pitch+V.amount,W(Y,V)}if(Y.zoom||Y.bearing){const V=void 0===_.pinchAround?_.around:_.pinchAround;Y.around=V?this._map.unproject(V):this._map.getCenter()}return this.clear(),Y.noMoveStart=!0,Y}}function W(k,f){(!k.duration||k.duration<f.duration)&&(k.duration=f.duration,k.easing=f.easing)}function he(k,f,_){const{maxSpeed:I,linearity:Y,deceleration:V}=_,Q=t.clamp(k*Y/(f/1e3),-I,I),re=Math.abs(Q)/(V*Y);return{easing:_.easing,duration:1e3*re,amount:Q*(re/2)}}class Ie extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,I,Y={}){const V=_i(_.getCanvasContainer(),I),Q=_.unproject(V);super(f,t.extend({point:V,lngLat:Q,originalEvent:I},Y)),this._defaultPrevented=!1,this.target=_}}class Ye extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,I){const Y="touchend"===f?I.changedTouches:I.touches,V=tt(_.getCanvasContainer(),Y),Q=V.map(de=>_.unproject(de)),re=V.reduce((de,be,xe,Fe)=>de.add(be.div(Fe.length)),new t.Point(0,0));super(f,{points:V,point:re,lngLats:Q,lngLat:_.unproject(re),originalEvent:I}),this._defaultPrevented=!1}}class ni extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(f,_,I){super(f,{originalEvent:I}),this._defaultPrevented=!1}}class Ri{constructor(f,_){this._map=f,this._clickTolerance=_.clickTolerance}reset(){this._mousedownPos=void 0}wheel(f){return this._firePreventable(new ni(f.type,this._map,f))}mousedown(f,_){return this._mousedownPos=_,this._firePreventable(new Ie(f.type,this._map,f))}mouseup(f){this._map.fire(new Ie(f.type,this._map,f))}preclick(f){const _=t.extend({},f);_.type="preclick",this._map.fire(new Ie(_.type,this._map,_))}click(f,_){this._mousedownPos&&this._mousedownPos.dist(_)>=this._clickTolerance||(this.preclick(f),this._map.fire(new Ie(f.type,this._map,f)))}dblclick(f){return this._firePreventable(new Ie(f.type,this._map,f))}mouseover(f){this._map.fire(new Ie(f.type,this._map,f))}mouseout(f){this._map.fire(new Ie(f.type,this._map,f))}touchstart(f){return this._firePreventable(new Ye(f.type,this._map,f))}touchmove(f){this._map.fire(new Ye(f.type,this._map,f))}touchend(f){this._map.fire(new Ye(f.type,this._map,f))}touchcancel(f){this._map.fire(new Ye(f.type,this._map,f))}_firePreventable(f){if(this._map.fire(f),f.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class on{constructor(f){this._map=f}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(f){this._map.fire(new Ie(f.type,this._map,f))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ie("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(f){this._delayContextMenu?this._contextMenuEvent=f:this._map.fire(new Ie(f.type,this._map,f)),this._map.listens("contextmenu")&&f.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zn{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._container=f.getContainer(),this._clickTolerance=_.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(f,_){this.isEnabled()&&f.shiftKey&&0===f.button&&(Wt(),this._startPos=this._lastPos=_,this._active=!0)}mousemoveWindow(f,_){if(!this._active)return;const I=_,Y=this._startPos,V=this._lastPos;if(!Y||!V||V.equals(I)||!this._box&&I.dist(Y)<this._clickTolerance)return;this._lastPos=I,this._box||(this._box=We("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",f));const Q=Math.min(Y.x,I.x),re=Math.max(Y.x,I.x),de=Math.min(Y.y,I.y),be=Math.max(Y.y,I.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Q}px,${de}px)`,this._box.style.width=re-Q+"px",this._box.style.height=be-de+"px")})}mouseupWindow(f,_){if(!this._active)return;const I=this._startPos,Y=_;if(I&&0===f.button){if(this.reset(),gt(),I.x!==Y.x||I.y!==Y.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:f})),{cameraAnimation:V=>V.fitScreenCoordinates(I,Y,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",f)}}keydown(f){this._active&&27===f.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",f))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),et(),delete this._startPos,delete this._lastPos}_fireEvent(f,_){return this._map.fire(new t.Event(f,{originalEvent:_}))}}function Ar(k,f){const _={};for(let I=0;I<k.length;I++)_[k[I].identifier]=f[I];return _}class gr{constructor(f){this.reset(),this.numTouches=f.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(f,_,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=f.timeStamp),I.length===this.numTouches&&(this.centroid=function(Y){const V=new t.Point(0,0);for(const Q of Y)V._add(Q);return V.div(Y.length)}(_),this.touches=Ar(I,_)))}touchmove(f,_,I){if(this.aborted||!this.centroid)return;const Y=Ar(I,_);for(const V in this.touches){const Q=Y[V];(!Q||Q.dist(this.touches[V])>30)&&(this.aborted=!0)}}touchend(f,_,I){if((!this.centroid||f.timeStamp-this.startTime>500)&&(this.aborted=!0),0===I.length){const Y=!this.aborted&&this.centroid;if(this.reset(),Y)return Y}}}class Ha{constructor(f){this.singleTap=new gr(f),this.numTaps=f.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(f,_,I){this.singleTap.touchstart(f,_,I)}touchmove(f,_,I){this.singleTap.touchmove(f,_,I)}touchend(f,_,I){const Y=this.singleTap.touchend(f,_,I);if(Y){const V=f.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(Y)<30;if(V&&Q||this.reset(),this.count++,this.lastTime=f.timeStamp,this.lastTap=Y,this.count===this.numTaps)return this.reset(),Y}}}class is{constructor(){this._zoomIn=new Ha({numTouches:1,numTaps:2}),this._zoomOut=new Ha({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(f,_,I){this._zoomIn.touchstart(f,_,I),this._zoomOut.touchstart(f,_,I)}touchmove(f,_,I){this._zoomIn.touchmove(f,_,I),this._zoomOut.touchmove(f,_,I)}touchend(f,_,I){const Y=this._zoomIn.touchend(f,_,I),V=this._zoomOut.touchend(f,_,I);return Y?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()+1,around:Q.unproject(Y)},{originalEvent:f})}):V?(this._active=!0,f.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Q=>Q.easeTo({duration:300,zoom:Q.getZoom()-1,around:Q.unproject(V)},{originalEvent:f})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xo={0:1,2:2};class Va{constructor(f){this.reset(),this._clickTolerance=f.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(f,_){return!1}_move(f,_){return{}}mousedown(f,_){if(this._lastPoint)return;const I=yi(f);this._correctButton(f,I)&&(this._lastPoint=_,this._eventButton=I)}mousemoveWindow(f,_){const I=this._lastPoint;if(I)if(f.preventDefault(),null!=this._eventButton&&function(Y,V){const Q=xo[V];return void 0===Y.buttons||(Y.buttons&Q)!==Q}(f,this._eventButton))this.reset();else if(this._moved||!(_.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=_,this._move(I,_)}mouseupWindow(f){this._lastPoint&&yi(f)===this._eventButton&&(this._moved&&gt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class To extends Va{mousedown(f,_){super.mousedown(f,_),this._lastPoint&&(this._active=!0)}_correctButton(f,_){return 0===_&&!f.ctrlKey}_move(f,_){return{around:_,panDelta:_.sub(f)}}}class Hl extends Va{_correctButton(f,_){return 0===_&&f.ctrlKey||2===_}_move(f,_){const I=.8*(_.x-f.x);if(I)return this._active=!0,{bearingDelta:I}}contextmenu(f){f.preventDefault()}}class Hc extends Va{_correctButton(f,_){return 0===_&&f.ctrlKey||2===_}_move(f,_){const I=-.5*(_.y-f.y);if(I)return this._active=!0,{pitchDelta:I}}contextmenu(f){f.preventDefault()}}class Qa{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(f,_,I){return this._calculateTransform(f,_,I)}touchmove(f,_,I){if(this._active&&!(I.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===I.length&&!t.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return f.cancelable&&f.preventDefault(),this._calculateTransform(f,_,I)}}touchend(f,_,I){this._calculateTransform(f,_,I),this._active&&I.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(f,_,I){I.length>0&&(this._active=!0);const Y=Ar(I,_),V=new t.Point(0,0),Q=new t.Point(0,0);let re=0;for(const be in Y){const xe=Y[be],Fe=this._touches[be];Fe&&(V._add(xe),Q._add(xe.sub(Fe)),re++,Y[be]=xe)}if(this._touches=Y,re<this._minTouches||!Q.mag())return;const de=Q.div(re);return this._sum._add(de),this._sum.mag()<this._clickTolerance?void 0:{around:V.div(re),panDelta:de}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=We("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class xa{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(f){}_move(f,_,I){return{}}touchstart(f,_,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([_[0],_[1]]))}touchmove(f,_,I){const Y=this._firstTwoTouches;if(!Y)return;f.preventDefault();const[V,Q]=Y,re=Go(I,_,V),de=Go(I,_,Q);if(!re||!de)return;const be=this._aroundCenter?null:re.add(de).div(2);return this._move([re,de],be,f)}touchend(f,_,I){if(!this._firstTwoTouches)return;const[Y,V]=this._firstTwoTouches,Q=Go(I,_,Y),re=Go(I,_,V);Q&&re||(this._active&&gt(),this.reset())}touchcancel(){this.reset()}enable(f){this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Go(k,f,_){for(let I=0;I<k.length;I++)if(k[I].identifier===_)return f[I]}function ba(k,f){return Math.log(k/f)/Math.LN2}class ls extends xa{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(f){this._startDistance=this._distance=f[0].dist(f[1])}_move(f,_){const I=this._distance;if(this._distance=f[0].dist(f[1]),this._active||!(Math.abs(ba(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ba(this._distance,I),pinchAround:_}}}function Ge(k,f){return 180*k.angleWith(f)/Math.PI}class se extends xa{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(f){this._startVector=this._vector=f[0].sub(f[1]),this._minDiameter=f[0].dist(f[1])}_move(f,_){const I=this._vector;if(this._vector=f[0].sub(f[1]),I&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ge(this._vector,I),pinchAround:_}}_isBelowThreshold(f){this._minDiameter=Math.min(this._minDiameter,f.mag());const _=25/(Math.PI*this._minDiameter)*360,I=this._startVector;if(!I)return!1;const Y=Ge(f,I);return Math.abs(Y)<_}}function me(k){return Math.abs(k.y)>Math.abs(k.x)}class Ve extends xa{constructor(f){super(),this._map=f}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(f){this._lastPoints=f,me(f[0].sub(f[1]))&&(this._valid=!1)}_move(f,_,I){const Y=this._lastPoints;if(!Y)return;const V=f[0].sub(Y[0]),Q=f[1].sub(Y[1]);return this._map._cooperativeGestures&&!t.isFullscreen()&&I.touches.length<3||(this._valid=this.gestureBeginsVertically(V,Q,I.timeStamp),!this._valid)?void 0:(this._lastPoints=f,this._active=!0,{pitchDelta:(V.y+Q.y)/2*-.5})}gestureBeginsVertically(f,_,I){if(void 0!==this._valid)return this._valid;const Y=f.mag()>=2,V=_.mag()>=2;if(!Y&&!V)return;if(!Y||!V)return null==this._firstMove&&(this._firstMove=I),I-this._firstMove<100&&void 0;const Q=f.y>0==_.y>0;return me(f)&&me(_)&&Q}}const Ee={panStep:100,bearingStep:15,pitchStep:10};class xn{constructor(){const f=Ee;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(f){if(f.altKey||f.ctrlKey||f.metaKey)return;let _=0,I=0,Y=0,V=0,Q=0;switch(f.keyCode){case 61:case 107:case 171:case 187:_=1;break;case 189:case 109:case 173:_=-1;break;case 37:f.shiftKey?I=-1:(f.preventDefault(),V=-1);break;case 39:f.shiftKey?I=1:(f.preventDefault(),V=1);break;case 38:f.shiftKey?Y=1:(f.preventDefault(),Q=-1);break;case 40:f.shiftKey?Y=-1:(f.preventDefault(),Q=1);break;default:return}return this._rotationDisabled&&(I=0,Y=0),{cameraAnimation:re=>{const de=re.getZoom();re.easeTo({duration:300,easeId:"keyboardHandler",easing:vr,zoom:_?Math.round(de)+_*(f.shiftKey?2:1):de,bearing:re.getBearing()+I*this._bearingStep,pitch:re.getPitch()+Y*this._pitchStep,offset:[-V*this._panStep,-Q*this._panStep],center:re.getCenter()},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function vr(k){return k*(2-k)}const Xr=4.000244140625;class hr{constructor(f,_){this._map=f,this._el=f.getCanvasContainer(),this._handler=_,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(f){this._defaultZoomRate=f}setWheelZoomRate(f){this._wheelZoomRate=f}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(f){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!f&&"center"===f.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(f){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(f.ctrlKey||f.metaKey||this.isZooming()||t.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let _=f.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*f.deltaY:f.deltaY;const I=t.exported.now(),Y=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,0!==_&&_%Xr==0?this._type="wheel":0!==_&&Math.abs(_)<4?this._type="trackpad":Y>400?(this._type=null,this._lastValue=_,this._timeout=setTimeout(this._onTimeout,40,f)):this._type||(this._type=Math.abs(Y*_)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,_+=this._lastValue)),f.shiftKey&&_&&(_/=4),this._type&&(this._lastWheelEvent=f,this._delta-=_,this._active||this._start(f)),f.preventDefault()}_onTimeout(f){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)}_start(f){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const _=_i(this._el,f);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:_,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const f=this._map.transform;"wheel"===this._type&&f.projection.wrap&&(f._center.lng>=180||f._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const _=()=>f._terrainEnabled()&&this._aroundCoord?f.computeZoomRelativeTo(this._aroundCoord):f.zoom;if(0!==this._delta){const de="wheel"===this._type&&Math.abs(this._delta)>Xr?this._wheelZoomRate:this._defaultZoomRate;let be=2/(1+Math.exp(-Math.abs(this._delta*de)));this._delta<0&&0!==be&&(be=1/be);const xe=_(),Fe=Math.pow(2,xe),it="number"==typeof this._targetZoom?f.zoomScale(this._targetZoom):Fe;this._targetZoom=Math.min(f.maxZoom,Math.max(f.minZoom,f.scaleZoom(it*be))),"wheel"===this._type&&(this._startZoom=xe,this._easing=this._smoothOutEasing(200)),this._delta=0}const I="number"==typeof this._targetZoom?this._targetZoom:_(),Y=this._startZoom,V=this._easing;let Q,re=!1;if("wheel"===this._type&&Y&&V){const de=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),be=V(de);Q=t.number(Y,I,be),de<1?this._frameId||(this._frameId=!0):re=!0}else Q=I,re=!0;return this._active=!0,re&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!re,zoomDelta:Q-_(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(f){let _=t.ease;if(this._prevEase){const I=this._prevEase,Y=(t.exported.now()-I.start)/I.duration,V=I.easing(Y+.01)-I.easing(Y),Q=.27/Math.sqrt(V*V+1e-4)*.01,re=Math.sqrt(.0729-Q*Q);_=t.bezier(Q,re,.25,1)}return this._prevEase={start:t.exported.now(),duration:f,easing:_},_}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=We("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class So{constructor(f,_){this._clickZoom=f,this._tapZoom=_}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ll{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(f,_){return f.preventDefault(),{cameraAnimation:I=>{I.easeTo({duration:300,zoom:I.getZoom()+(f.shiftKey?-1:1),around:I.unproject(_)},{originalEvent:f})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hf{constructor(){this._tap=new Ha({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(f,_,I){this._swipePoint||(this._tapTime&&f.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=_[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(f,_,I))}touchmove(f,_,I){if(this._tapTime){if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;const Y=_[0],V=Y.y-this._swipePoint.y;return this._swipePoint=Y,f.preventDefault(),this._active=!0,{zoomDelta:V/128}}}else this._tap.touchmove(f,_,I)}touchend(f,_,I){this._tapTime?this._swipePoint&&0===I.length&&this.reset():this._tap.touchend(f,_,I)&&(this._tapTime=f.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jd{constructor(f,_,I){this._el=f,this._mousePan=_,this._touchPan=I}enable(f){this._inertiaOptions=f||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class n0{constructor(f,_,I){this._pitchWithRotate=f.pitchWithRotate,this._mouseRotate=_,this._mousePitch=I}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class tm{constructor(f,_,I,Y){this._el=f,this._touchZoom=_,this._touchRotate=I,this._tapDragZoom=Y,this._rotationDisabled=!1,this._enabled=!0}enable(f){this._touchZoom.enable(f),this._rotationDisabled||this._touchRotate.enable(f),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qo=k=>k.zoom||k.drag||k.pitch||k.rotate;class Th extends t.Event{}class rc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(f,_){const I=t.sub([],_,f);this.radius=t.length(I[2]<0?t.div([],I,this.constants):[I[0],I[1],0])}projectRay(f){t.div(f,f,this.constants),t.normalize(f,f),t.mul$1(f,f,this.constants);const _=t.scale$2([],f,this.radius);if(_[2]>0){const I=t.scale$2([],[0,0,1],t.dot(_,[0,0,1])),Y=t.scale$2([],t.normalize([],[_[0],_[1],0]),this.radius),V=t.add([],_,t.scale$2([],t.sub([],t.add([],Y,I),_),2));_[0]=V[0],_[1]=V[1]}return _}}function Ho(k){return k.panDelta&&k.panDelta.mag()||k.zoomDelta||k.bearingDelta||k.pitchDelta}class mu{constructor(f,_){this._map=f,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new O(f),this._bearingSnap=_.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new rc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(_),t.bindAll(["handleEvent","handleWindowEvent"],this);const I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[Y,V,Q]of this._listeners)Y.addEventListener(V,Y===t.window.document?this.handleWindowEvent:this.handleEvent,Q)}destroy(){for(const[f,_,I]of this._listeners)f.removeEventListener(_,f===t.window.document?this.handleWindowEvent:this.handleEvent,I)}_addDefaultHandlers(f){const _=this._map,I=_.getCanvasContainer();this._add("mapEvent",new Ri(_,f));const Y=_.boxZoom=new Zn(_,f);this._add("boxZoom",Y);const V=new is,Q=new ll;_.doubleClickZoom=new So(Q,V),this._add("tapZoom",V),this._add("clickZoom",Q);const re=new Hf;this._add("tapDragZoom",re);const de=_.touchPitch=new Ve(_);this._add("touchPitch",de);const be=new Hl(f),xe=new Hc(f);_.dragRotate=new n0(f,be,xe),this._add("mouseRotate",be,["mousePitch"]),this._add("mousePitch",xe,["mouseRotate"]);const Fe=new To(f),it=new Qa(_,f);_.dragPan=new Jd(I,Fe,it),this._add("mousePan",Fe),this._add("touchPan",it,["touchZoom","touchRotate"]);const ft=new se,yt=new ls;_.touchZoomRotate=new tm(I,yt,ft,re),this._add("touchRotate",ft,["touchPan","touchZoom"]),this._add("touchZoom",yt,["touchPan","touchRotate"]),this._add("blockableMapEvent",new on(_));const bt=_.scrollZoom=new hr(_,this);this._add("scrollZoom",bt,["mousePan"]);const Tt=_.keyboard=new xn;this._add("keyboard",Tt);for(const Ne of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])f.interactive&&f[Ne]&&_[Ne].enable(f[Ne])}_add(f,_,I){this._handlers.push({handlerName:f,handler:_,allowed:I}),this._handlersById[f]=_}stop(f){if(!this._updatingCamera){for(const{handler:_}of this._handlers)_.reset();this._inertia.clear(),this._fireEvents({},{},f),this._changes=[]}}isActive(){for(const{handler:f}of this._handlers)if(f.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(f,_,I){for(const Y in f)if(Y!==I&&(!_||_.indexOf(Y)<0))return!0;return!1}handleWindowEvent(f){this.handleEvent(f,`${f.type}Window`)}_getMapTouches(f){const _=[];for(const I of f)this._el.contains(I.target)&&_.push(I);return _}handleEvent(f,_){this._updatingCamera=!0;const I="renderFrame"===f.type,Y=I?void 0:f,V={needsRenderFrame:!1},Q={},re={},de=f.touches?this._getMapTouches(f.touches):void 0,be=de?tt(this._el,de):I?void 0:_i(this._el,f);for(const{handlerName:it,handler:ft,allowed:yt}of this._handlers){if(!ft.isEnabled())continue;let bt;this._blockedByActive(re,yt,it)?ft.reset():ft[_||f.type]&&(bt=ft[_||f.type](f,be,de),this.mergeHandlerResult(V,Q,bt,it,Y),bt&&bt.needsRenderFrame&&this._triggerRenderFrame()),(bt||ft.isActive())&&(re[it]=ft)}const xe={};for(const it in this._previousActiveHandlers)re[it]||(xe[it]=Y);this._previousActiveHandlers=re,(Object.keys(xe).length||Ho(V))&&(this._changes.push([V,Q,xe]),this._triggerRenderFrame()),(Object.keys(re).length||Ho(V))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Fe}=V;Fe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Fe(this._map))}mergeHandlerResult(f,_,I,Y,V){if(!I)return;t.extend(f,I);const Q={handlerName:Y,originalEvent:I.originalEvent||V};void 0!==I.zoomDelta&&(_.zoom=Q),void 0!==I.panDelta&&(_.drag=Q),void 0!==I.pitchDelta&&(_.pitch=Q),void 0!==I.bearingDelta&&(_.rotate=Q)}_applyChanges(){const f={},_={},I={};for(const[Y,V,Q]of this._changes)Y.panDelta&&(f.panDelta=(f.panDelta||new t.Point(0,0))._add(Y.panDelta)),Y.zoomDelta&&(f.zoomDelta=(f.zoomDelta||0)+Y.zoomDelta),Y.bearingDelta&&(f.bearingDelta=(f.bearingDelta||0)+Y.bearingDelta),Y.pitchDelta&&(f.pitchDelta=(f.pitchDelta||0)+Y.pitchDelta),void 0!==Y.around&&(f.around=Y.around),void 0!==Y.aroundCoord&&(f.aroundCoord=Y.aroundCoord),void 0!==Y.pinchAround&&(f.pinchAround=Y.pinchAround),Y.noInertia&&(f.noInertia=Y.noInertia),t.extend(_,V),t.extend(I,Q);this._updateMapTransform(f,_,I),this._changes=[]}_updateMapTransform(f,_,I){const Y=this._map,V=Y.transform,Q=_t=>[_t.x,_t.y,_t.z];if((_t=>{const zt=this._eventsInProgress.drag;return zt&&!this._handlersById[zt.handlerName].isActive()})()&&!Ho(f)){const _t=V.zoom;V.cameraElevationReference="sea",V.recenterOnTerrain(),V.cameraElevationReference="ground",_t!==V.zoom&&this._map._update(!0)}if(V._isCameraConstrained&&Y._stop(!0),!Ho(f))return void this._fireEvents(_,I,!0);let{panDelta:re,zoomDelta:de,bearingDelta:be,pitchDelta:xe,around:Fe,aroundCoord:it,pinchAround:ft}=f;V._isCameraConstrained&&(de>0&&(de=0),V._isCameraConstrained=!1),void 0!==ft&&(Fe=ft),(de||(_t=>_.drag&&!this._eventsInProgress.drag)())&&Fe&&(this._dragOrigin=Q(V.pointCoordinate3D(Fe)),this._trackingEllipsoid.setup(V._camera.position,this._dragOrigin)),V.cameraElevationReference="sea",Y._stop(!0),Fe=Fe||Y.transform.centerPoint,be&&(V.bearing+=be),xe&&(V.pitch+=xe),V._updateCameraState();const yt=[0,0,0];if(re)if("mercator"===V.projection.name){const _t=this._trackingEllipsoid.projectRay(V.screenPointToMercatorRay(Fe).dir),zt=this._trackingEllipsoid.projectRay(V.screenPointToMercatorRay(Fe.sub(re)).dir);yt[0]=zt[0]-_t[0],yt[1]=zt[1]-_t[1]}else{const _t=V.pointCoordinate(Fe);if("globe"===V.projection.name){re=re.rotate(-V.angle);const zt=V._pixelsPerMercatorPixel/V.worldSize;yt[0]=-re.x*t.mercatorScale(t.latFromMercatorY(_t.y))*zt,yt[1]=-re.y*t.mercatorScale(V.center.lat)*zt}else{const zt=V.pointCoordinate(Fe.sub(re));_t&&zt&&(yt[0]=zt.x-_t.x,yt[1]=zt.y-_t.y)}}const bt=V.zoom,Tt=[0,0,0];if(de){const _t=Q(it||V.pointCoordinate3D(Fe)),zt={dir:t.normalize([],t.sub([],_t,V._camera.position))};if(zt.dir[2]<0){const Gt=V.zoomDeltaToMovement(_t,de);t.scale$2(Tt,zt.dir,Gt)}}const Ne=t.add(yt,yt,Tt);V._translateCameraConstrained(Ne),de&&Math.abs(V.zoom-bt)>1e-4&&V.recenterOnTerrain(),V.cameraElevationReference="ground",this._map._update(),f.noInertia||this._inertia.record(f),this._fireEvents(_,I,!0)}_fireEvents(f,_,I){const Y=qo(this._eventsInProgress),V=qo(f),Q={};for(const xe in f){const{originalEvent:Fe}=f[xe];this._eventsInProgress[xe]||(Q[`${xe}start`]=Fe),this._eventsInProgress[xe]=f[xe]}!Y&&V&&this._fireEvent("movestart",V.originalEvent);for(const xe in Q)this._fireEvent(xe,Q[xe]);V&&this._fireEvent("move",V.originalEvent);for(const xe in f){const{originalEvent:Fe}=f[xe];this._fireEvent(xe,Fe)}const re={};let de;for(const xe in this._eventsInProgress){const{handlerName:Fe,originalEvent:it}=this._eventsInProgress[xe];this._handlersById[Fe].isActive()||(delete this._eventsInProgress[xe],de=_[Fe]||it,re[`${xe}end`]=de)}for(const xe in re)this._fireEvent(xe,re[xe]);const be=qo(this._eventsInProgress);if(I&&(Y||V)&&!be){this._updatingCamera=!0;const xe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Fe=it=>0!==it&&-this._bearingSnap<it&&it<this._bearingSnap;xe?(Fe(xe.bearing||this._map.getBearing())&&(xe.bearing=0),this._map.easeTo(xe,{originalEvent:de})):(this._map.fire(new t.Event("moveend",{originalEvent:de})),Fe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(f,_){this._map.fire(new t.Event(f,_?{originalEvent:_}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(f=>{this._frameId=void 0,this.handleEvent(new Th("renderFrame",{timeStamp:f})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Qd="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ac extends t.Evented{constructor(f,_){super(),this._moving=!1,this._zooming=!1,this.transform=f,this._bearingSnap=_.bearingSnap,this._respectPrefersReducedMotion=!1!==_.respectPrefersReducedMotion,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(f,_){return this.jumpTo({center:f},_)}panBy(f,_,I){return f=t.Point.convert(f).mult(-1),this.panTo(this.transform.center,t.extend({offset:f},_),I)}panTo(f,_,I){return this.easeTo(t.extend({center:f},_),I)}getZoom(){return this.transform.zoom}setZoom(f,_){return this.jumpTo({zoom:f},_),this}zoomTo(f,_,I){return this.easeTo(t.extend({zoom:f},_),I)}zoomIn(f,_){return this.zoomTo(this.getZoom()+1,f,_),this}zoomOut(f,_){return this.zoomTo(this.getZoom()-1,f,_),this}getBearing(){return this.transform.bearing}setBearing(f,_){return this.jumpTo({bearing:f},_),this}getPadding(){return this.transform.padding}setPadding(f,_){return this.jumpTo({padding:f},_),this}rotateTo(f,_,I){return this.easeTo(t.extend({bearing:f},_),I)}resetNorth(f,_){return this.rotateTo(0,t.extend({duration:1e3},f),_),this}resetNorthPitch(f,_){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},f),_),this}snapToNorth(f,_){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(f,_):this}getPitch(){return this.transform.pitch}setPitch(f,_){return this.jumpTo({pitch:f},_),this}cameraForBounds(f,_){f=t.LngLatBounds.convert(f);const I=_&&_.bearing||0,Y=_&&_.pitch||0,V=f.getNorthWest(),Q=f.getSouthEast();return this._cameraForBounds(this.transform,V,Q,I,Y,_)}_extendCameraOptions(f){const _={top:0,bottom:0,right:0,left:0};if("number"==typeof(f=t.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding){const I=f.padding;f.padding={top:I,bottom:I,right:I,left:I}}return f.padding=t.extend(_,f.padding),f}_minimumAABBFrustumDistance(f,_){const I=_.max[0]-_.min[0],Y=_.max[1]-_.min[1];return I/Y>f.aspect?I/(2*Math.tan(.5*f.fovX)*f.aspect):Y/(2*Math.tan(.5*f.fovY)*f.aspect)}_cameraForBoundsOnGlobe(f,_,I,Y,V,Q){const re=f.clone(),de=this._extendCameraOptions(Q);re.bearing=Y,re.pitch=V;const be=t.LngLat.convert(_),xe=t.LngLat.convert(I),Fe=.5*(be.lat+xe.lat),it=.5*(be.lng+xe.lng),ft=t.latLngToECEF(Fe,it),yt=t.normalize([],ft),bt=t.normalize([],t.cross([],yt,[0,1,0])),Tt=t.cross([],bt,yt),Ne=[bt[0],bt[1],bt[2],0,Tt[0],Tt[1],Tt[2],0,yt[0],yt[1],yt[2],0,0,0,0,1],_t=[ft,t.latLngToECEF(be.lat,be.lng),t.latLngToECEF(xe.lat,be.lng),t.latLngToECEF(xe.lat,xe.lng),t.latLngToECEF(be.lat,xe.lng),t.latLngToECEF(Fe,be.lng),t.latLngToECEF(Fe,xe.lng),t.latLngToECEF(be.lat,it),t.latLngToECEF(xe.lat,it)];let zt=t.Aabb.fromPoints(_t.map(Bn=>[t.dot(bt,Bn),t.dot(Tt,Bn),t.dot(yt,Bn)]));const Gt=t.transformMat4([],zt.center,Ne);0===t.squaredLength(Gt)&&t.set(Gt,0,0,1),t.normalize(Gt,Gt),t.scale$2(Gt,Gt,t.GLOBE_RADIUS),re.center=t.ecefToLatLng(Gt);const pi=re.getWorldToCameraMatrix(),hi=t.invert(new Float64Array(16),pi);zt=t.Aabb.applyTransform(zt,t.multiply([],pi,Ne)),t.transformMat4(Gt,Gt,pi);const ri=.5*(zt.max[2]-zt.min[2]),Oi=this._minimumAABBFrustumDistance(re,zt),Ai=t.scale$2([],[0,0,1],ri),Gi=t.add(Ai,Gt,Ai),Gn=Oi+(0===re.pitch?0:t.distance(Gt,Gi)),Hi=re.globeCenterInViewSpace,un=t.sub([],Gt,[Hi[0],Hi[1],Hi[2]]);t.normalize(un,un),t.scale$2(un,un,Gn);const ki=t.add([],Gt,un);t.transformMat4(ki,ki,hi);const An=t.earthRadius/t.GLOBE_RADIUS,Ui=t.length(ki),cn=t.mercatorZfromAltitude(Math.max(Ui*An-t.earthRadius,Number.EPSILON),0),bn=Math.min(re.zoomFromMercatorZAdjusted(cn),de.maxZoom);return bn>.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(re.setProjection({name:"mercator"}),re.zoom=bn,this._cameraForBounds(re,_,I,Y,V,Q)):{center:re.center,zoom:bn,bearing:Y,pitch:V}}queryTerrainElevation(f,_){const I=this.transform.elevation;return I?(_=t.extend({},{exaggerated:!0},_),I.getAtPoint(t.MercatorCoordinate.fromLngLat(f),null,_.exaggerated)):null}_cameraForBounds(f,_,I,Y,V,Q){if("globe"===f.projection.name)return this._cameraForBoundsOnGlobe(f,_,I,Y,V,Q);const re=f.clone(),de=this._extendCameraOptions(Q),be=re.padding;re.bearing=Y,re.pitch=V;const xe=t.LngLat.convert(_),Fe=t.LngLat.convert(I),it=new t.LngLat(xe.lng,Fe.lat),ft=new t.LngLat(Fe.lng,xe.lat),yt=re.project(xe),bt=re.project(Fe),Tt=this.queryTerrainElevation(xe),Ne=this.queryTerrainElevation(Fe),_t=this.queryTerrainElevation(it),zt=this.queryTerrainElevation(ft),Gt=[[yt.x,yt.y,Math.min(Tt||0,Ne||0,_t||0,zt||0)],[bt.x,bt.y,Math.max(Tt||0,Ne||0,_t||0,zt||0)]];let pi=t.Aabb.fromPoints(Gt);const hi=re.getWorldToCameraMatrix(),ri=t.invert(new Float64Array(16),hi);pi=t.Aabb.applyTransform(pi,hi);const Oi=t.sub([],pi.max,pi.min),Ai=be.left||0,Gi=be.right||0,Gn=be.bottom||0,Hi=be.top||0,{left:un,right:ki,top:An,bottom:Ui}=de.padding,cn=.5*(Ai+Gi),bn=.5*(Hi+Gn),Bn=Math.min(re.scaleZoom(re.scale*Math.min((re.width-(Ai+Gi+un+ki))/Oi[0],(re.height-(Gn+Hi+Ui+An))/Oi[1])),de.maxZoom),Hn=re.scale/re.zoomScale(Bn);pi=new t.Aabb([pi.min[0]-(un+cn)*Hn,pi.min[1]-(Ui+bn)*Hn,pi.min[2]],[pi.max[0]+(ki+cn)*Hn,pi.max[1]+(An+bn)*Hn,pi.max[2]]);const ea=.5*Oi[2],wa=this._minimumAABBFrustumDistance(re,pi),Ir=[0,0,1,0];t.transformMat4$1(Ir,Ir,hi),t.normalize$2(Ir,Ir);const ca=t.scale$2([],Ir,wa+ea),Ua=t.add([],pi.center,ca),qr=("number"==typeof de.offset.x&&"number"==typeof de.offset.y?new t.Point(de.offset.x,de.offset.y):t.Point.convert(de.offset)).rotate(-t.degToRad(Y));pi.center[0]-=qr.x*Hn,pi.center[1]+=qr.y*Hn,t.transformMat4(pi.center,pi.center,ri),t.transformMat4(Ua,Ua,ri);const ta=[pi.center[0],pi.center[1],Ua[2]*re.pixelsPerMeter];t.scale$2(ta,ta,1/re.worldSize);const ns=t.lngFromMercatorX(ta[0]),Xs=t.latFromMercatorY(ta[1]),ro=Math.min(re._zoomFromMercatorZ(ta[2]),de.maxZoom),Vs=new t.LngLat(ns,Xs);return re.mercatorFromTransition&&ro<.5*(t.GLOBE_ZOOM_THRESHOLD_MIN+t.GLOBE_ZOOM_THRESHOLD_MAX)?(re.setProjection({name:"globe"}),re.zoom=ro,this._cameraForBounds(re,_,I,Y,V,Q)):{center:Vs,zoom:ro,bearing:Y,pitch:V}}fitBounds(f,_,I){const Y=this.cameraForBounds(f,_);return this._fitInternal(Y,_,I)}fitScreenCoordinates(f,_,I,Y,V){const Q=t.Point.convert(f),re=t.Point.convert(_),de=new t.Point(Math.min(Q.x,re.x),Math.min(Q.y,re.y)),be=new t.Point(Math.max(Q.x,re.x),Math.max(Q.y,re.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(Q,re))return this;const xe=this.transform.pointLocation3D(de),Fe=this.transform.pointLocation3D(be),it=this.transform.pointLocation3D(new t.Point(de.x,be.y)),ft=this.transform.pointLocation3D(new t.Point(be.x,de.y)),yt=[Math.min(xe.lng,Fe.lng,it.lng,ft.lng),Math.min(xe.lat,Fe.lat,it.lat,ft.lat)],bt=[Math.max(xe.lng,Fe.lng,it.lng,ft.lng),Math.max(xe.lat,Fe.lat,it.lat,ft.lat)],Tt=Y&&Y.pitch?Y.pitch:this.getPitch(),Ne=this._cameraForBounds(this.transform,yt,bt,I,Tt,Y);return this._fitInternal(Ne,Y,V)}_fitInternal(f,_,I){return f?(delete(_=t.extend(f,_)).padding,_.linear?this.easeTo(_,I):this.flyTo(_,I)):this}jumpTo(f,_){this.stop();const I=f.preloadOnly?this.transform.clone():this.transform;let Y=!1,V=!1,Q=!1;return"zoom"in f&&I.zoom!==+f.zoom&&(Y=!0,I.zoom=+f.zoom),void 0!==f.center&&(I.center=t.LngLat.convert(f.center)),"bearing"in f&&I.bearing!==+f.bearing&&(V=!0,I.bearing=+f.bearing),"pitch"in f&&I.pitch!==+f.pitch&&(Q=!0,I.pitch=+f.pitch),null==f.padding||I.isPaddingEqual(f.padding)||(I.padding=f.padding),f.preloadOnly?(this._preloadTiles(I),this):(this.fire(new t.Event("movestart",_)).fire(new t.Event("move",_)),Y&&this.fire(new t.Event("zoomstart",_)).fire(new t.Event("zoom",_)).fire(new t.Event("zoomend",_)),V&&this.fire(new t.Event("rotatestart",_)).fire(new t.Event("rotate",_)).fire(new t.Event("rotateend",_)),Q&&this.fire(new t.Event("pitchstart",_)).fire(new t.Event("pitch",_)).fire(new t.Event("pitchend",_)),this.fire(new t.Event("moveend",_)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||t.warnOnce(Qd),this.transform.getFreeCameraOptions()}setFreeCameraOptions(f,_){const I=this.transform;if(!I.projection.supportsFreeCamera)return t.warnOnce(Qd),this;this.stop();const Y=I.zoom,V=I.pitch,Q=I.bearing;I.setFreeCameraOptions(f);const re=Y!==I.zoom,de=V!==I.pitch,be=Q!==I.bearing;return this.fire(new t.Event("movestart",_)).fire(new t.Event("move",_)),re&&this.fire(new t.Event("zoomstart",_)).fire(new t.Event("zoom",_)).fire(new t.Event("zoomend",_)),be&&this.fire(new t.Event("rotatestart",_)).fire(new t.Event("rotate",_)).fire(new t.Event("rotateend",_)),de&&this.fire(new t.Event("pitchstart",_)).fire(new t.Event("pitch",_)).fire(new t.Event("pitchend",_)),this.fire(new t.Event("moveend",_)),this}easeTo(f,_){this._stop(!1,f.easeId),(!1===(f=t.extend({offset:[0,0],duration:500,easing:t.ease},f)).animate||this._prefersReducedMotion(f))&&(f.duration=0);const I=this.transform,Y=this.getZoom(),V=this.getBearing(),Q=this.getPitch(),re=this.getPadding(),de="zoom"in f?+f.zoom:Y,be="bearing"in f?this._normalizeBearing(f.bearing,V):V,xe="pitch"in f?+f.pitch:Q,Fe="padding"in f?f.padding:I.padding,it=t.Point.convert(f.offset);let ft,yt,bt;if("globe"===I.projection.name){const Ai=t.MercatorCoordinate.fromLngLat(I.center),Gi=it.rotate(-I.angle);Ai.x+=Gi.x/I.worldSize,Ai.y+=Gi.y/I.worldSize;const Gn=Ai.toLngLat(),Hi=t.LngLat.convert(f.center||Gn);this._normalizeCenter(Hi),ft=I.centerPoint.add(Gi),yt=new t.Point(Ai.x,Ai.y).mult(I.worldSize),bt=new t.Point(t.mercatorXfromLng(Hi.lng),t.mercatorYfromLat(Hi.lat)).mult(I.worldSize).sub(yt)}else{ft=I.centerPoint.add(it);const Ai=I.pointLocation(ft),Gi=t.LngLat.convert(f.center||Ai);this._normalizeCenter(Gi),yt=I.project(Ai),bt=I.project(Gi).sub(yt)}const Tt=I.zoomScale(de-Y);let Ne,_t;f.around&&(Ne=t.LngLat.convert(f.around),_t=I.locationPoint(Ne));const zt=this._zooming||de!==Y,Gt=this._rotating||V!==be,pi=this._pitching||xe!==Q,hi=!I.isPaddingEqual(Fe),ri=Ai=>Gi=>{if(zt&&(Ai.zoom=t.number(Y,de,Gi)),Gt&&(Ai.bearing=t.number(V,be,Gi)),pi&&(Ai.pitch=t.number(Q,xe,Gi)),hi&&(Ai.interpolatePadding(re,Fe,Gi),ft=Ai.centerPoint.add(it)),Ne)Ai.setLocationAtPoint(Ne,_t);else{const Gn=Ai.zoomScale(Ai.zoom-Y),Hi=de>Y?Math.min(2,Tt):Math.max(.5,Tt),un=Math.pow(Hi,1-Gi),ki=Ai.unproject(yt.add(bt.mult(Gi*un)).mult(Gn));Ai.setLocationAtPoint(Ai.renderWorldCopies?ki.wrap():ki,ft)}return f.preloadOnly||this._fireMoveEvents(_),Ai};if(f.preloadOnly){const Ai=this._emulate(ri,f.duration,I);return this._preloadTiles(Ai),this}const Oi={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=zt,this._rotating=Gt,this._pitching=pi,this._padding=hi,this._easeId=f.easeId,this._prepareEase(_,f.noMoveStart,Oi),this._ease(ri(I),Ai=>{I.recenterOnTerrain(),this._afterEase(_,Ai)},f),this}_prepareEase(f,_,I={}){this._moving=!0,this.transform.cameraElevationReference="sea",_||I.moving||this.fire(new t.Event("movestart",f)),this._zooming&&!I.zooming&&this.fire(new t.Event("zoomstart",f)),this._rotating&&!I.rotating&&this.fire(new t.Event("rotatestart",f)),this._pitching&&!I.pitching&&this.fire(new t.Event("pitchstart",f))}_fireMoveEvents(f){this.fire(new t.Event("move",f)),this._zooming&&this.fire(new t.Event("zoom",f)),this._rotating&&this.fire(new t.Event("rotate",f)),this._pitching&&this.fire(new t.Event("pitch",f))}_afterEase(f,_){if(this._easeId&&_&&this._easeId===_)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const I=this._zooming,Y=this._rotating,V=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new t.Event("zoomend",f)),Y&&this.fire(new t.Event("rotateend",f)),V&&this.fire(new t.Event("pitchend",f)),this.fire(new t.Event("moveend",f))}flyTo(f,_){if(this._prefersReducedMotion(f)){const Bn=t.pick(f,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bn,_)}this.stop(),f=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},f);const I=this.transform,Y=this.getZoom(),V=this.getBearing(),Q=this.getPitch(),re=this.getPadding(),de="zoom"in f?t.clamp(+f.zoom,I.minZoom,I.maxZoom):Y,be="bearing"in f?this._normalizeBearing(f.bearing,V):V,xe="pitch"in f?+f.pitch:Q,Fe="padding"in f?f.padding:I.padding,it=I.zoomScale(de-Y),ft=t.Point.convert(f.offset);let yt=I.centerPoint.add(ft);const bt=I.pointLocation(yt),Tt=t.LngLat.convert(f.center||bt);this._normalizeCenter(Tt);const Ne=I.project(bt),_t=I.project(Tt).sub(Ne);let zt=f.curve;const Gt=Math.max(I.width,I.height),pi=Gt/it,hi=_t.mag();if("minZoom"in f){const Bn=t.clamp(Math.min(f.minZoom,Y,de),I.minZoom,I.maxZoom),Hn=Gt/I.zoomScale(Bn-Y);zt=Math.sqrt(Hn/hi*2)}const ri=zt*zt;function Oi(Bn){const Hn=(pi*pi-Gt*Gt+(Bn?-1:1)*ri*ri*hi*hi)/(2*(Bn?pi:Gt)*ri*hi);return Math.log(Math.sqrt(Hn*Hn+1)-Hn)}function Ai(Bn){return(Math.exp(Bn)-Math.exp(-Bn))/2}function Gi(Bn){return(Math.exp(Bn)+Math.exp(-Bn))/2}const Gn=Oi(0);let Hi=function(Bn){return Gi(Gn)/Gi(Gn+zt*Bn)},un=function(Bn){return Gt*((Gi(Gn)*(Ai(Hn=Gn+zt*Bn)/Gi(Hn))-Ai(Gn))/ri)/hi;var Hn},ki=(Oi(1)-Gn)/zt;if(Math.abs(hi)<1e-6||!isFinite(ki)){if(Math.abs(Gt-pi)<1e-6)return this.easeTo(f,_);const Bn=pi<Gt?-1:1;ki=Math.abs(Math.log(pi/Gt))/zt,un=function(){return 0},Hi=function(Hn){return Math.exp(Bn*zt*Hn)}}f.duration="duration"in f?+f.duration:1e3*ki/("screenSpeed"in f?+f.screenSpeed/zt:+f.speed),f.maxDuration&&f.duration>f.maxDuration&&(f.duration=0);const An=V!==be,Ui=xe!==Q,cn=!I.isPaddingEqual(Fe),bn=Bn=>Hn=>{const ea=Hn*ki,wa=1/Hi(ea);Bn.zoom=1===Hn?de:Y+Bn.scaleZoom(wa),An&&(Bn.bearing=t.number(V,be,Hn)),Ui&&(Bn.pitch=t.number(Q,xe,Hn)),cn&&(Bn.interpolatePadding(re,Fe,Hn),yt=Bn.centerPoint.add(ft));const Ir=1===Hn?Tt:Bn.unproject(Ne.add(_t.mult(un(ea))).mult(wa));return Bn.setLocationAtPoint(Bn.renderWorldCopies?Ir.wrap():Ir,yt),Bn._updateCameraOnTerrain(),f.preloadOnly||this._fireMoveEvents(_),Bn};if(f.preloadOnly){const Bn=this._emulate(bn,f.duration,I);return this._preloadTiles(Bn),this}return this._zooming=!0,this._rotating=An,this._pitching=Ui,this._padding=cn,this._prepareEase(_,!1),this._ease(bn(I),()=>this._afterEase(_),f),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(f,_){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const I=this._onEaseEnd;this._onEaseEnd=void 0,I.call(this,_)}if(!f){const I=this.handlers;I&&I.stop(!1)}return this}_ease(f,_,I){!1===I.animate||0===I.duration?(f(1),_()):(this._easeStart=t.exported.now(),this._easeOptions=I,this._onEaseFrame=f,this._onEaseEnd=_,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const f=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1),_=this._onEaseFrame;_&&_(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(f,_){f=t.wrap(f,-180,180);const I=Math.abs(f-_);return Math.abs(f-360-_)<I&&(f-=360),Math.abs(f+360-_)<I&&(f+=360),f}_normalizeCenter(f){const _=this.transform;if(!_.renderWorldCopies||_.maxBounds)return;const I=f.lng-_.center.lng;f.lng+=I>180?-360:I<-180?360:0}_prefersReducedMotion(f){return this._respectPrefersReducedMotion&&t.exported.prefersReducedMotion&&!(f&&f.essential)}_emulate(f,_,I){const Y=Math.ceil(15*_/1e3),V=[],Q=f(I.clone());for(let re=0;re<=Y;re++){const de=Q(re/Y);V.push(de.clone())}return V}}class Tr{constructor(f={}){this.options=f,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(f){const _=this.options&&this.options.compact;return this._map=f,this._container=We("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=We("button","mapboxgl-ctrl-attrib-button",this._container),We("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=We("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),_&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===_&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(f,_){const I=this._map._getUIString(`AttributionControl.${_}`);f.setAttribute("aria-label",I),f.removeAttribute("title"),f.firstElementChild&&f.firstElementChild.setAttribute("title",I)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let f=this._editLink;f||(f=this._editLink=this._container.querySelector(".mapbox-improve-map"));const _=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(f){const I=_.reduce((Y,V,Q)=>(V.value&&(Y+=`${V.key}=${V.value}${Q<_.length-1?"&":""}`),Y),"?");f.href=`${t.config.FEEDBACK_URL}/${I}#${fu(this._map,!0)}`,f.rel="noopener nofollow",this._setElementTitle(f,"MapFeedback")}}_updateData(f){!f||"metadata"!==f.sourceDataType&&"visibility"!==f.sourceDataType&&"style"!==f.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let f=[];if(this._map.style.stylesheet){const Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}const _=this._map.style._sourceCaches;for(const Y in _){const V=_[Y];if(V.used){const Q=V.getSource();Q.attribution&&f.indexOf(Q.attribution)<0&&f.push(Q.attribution)}}f.sort((Y,V)=>Y.length-V.length),f=f.filter((Y,V)=>{for(let Q=V+1;Q<f.length;Q++)if(f[Q].indexOf(Y)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?f=[...this.options.customAttribution,...f]:f.unshift(this.options.customAttribution));const I=f.join(" | ");I!==this._attribHTML&&(this._attribHTML=I,f.length?(this._innerContainer.innerHTML=I,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class im{constructor(){t.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(f){this._map=f,this._container=We("div","mapboxgl-ctrl");const _=We("a","mapboxgl-ctrl-logo");return _.target="_blank",_.rel="noopener nofollow",_.href="https://www.mapbox.com/",_.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),_.setAttribute("rel","noopener nofollow"),this._container.appendChild(_),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(f){f&&"metadata"!==f.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const f=this._map.style._sourceCaches;if(0===Object.entries(f).length)return!0;for(const _ in f){const I=f[_].getSource();if(I.hasOwnProperty("mapbox_logo")&&!I.mapbox_logo)return!1}return!0}_updateCompact(){const f=this._container.children;if(f.length){const _=f[0];this._map.getCanvasContainer().offsetWidth<250?_.classList.add("mapboxgl-compact"):_.classList.remove("mapboxgl-compact")}}}class Bu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(f){const _=++this._id;return this._queue.push({callback:f,id:_,cancelled:!1}),_}remove(f){const _=this._currentlyRunning,I=_?this._queue.concat(_):this._queue;for(const Y of I)if(Y.id===f)return void(Y.cancelled=!0)}run(f=0){const _=this._currentlyRunning=this._queue;this._queue=[];for(const I of _)if(!I.cancelled&&(I.callback(f),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Pd(k,f,_){if(k=new t.LngLat(k.lng,k.lat),f){const I=new t.LngLat(k.lng-360,k.lat),Y=new t.LngLat(k.lng+360,k.lat),V=360*Math.ceil(Math.abs(k.lng-_.center.lng)/360),Q=_.locationPoint(k).distSqr(f),re=f.x<0||f.y<0||f.x>_.width||f.y>_.height;_.locationPoint(I).distSqr(f)<Q&&(re||Math.abs(I.lng-_.center.lng)<V)?k=I:_.locationPoint(Y).distSqr(f)<Q&&(re||Math.abs(Y.lng-_.center.lng)<V)&&(k=Y)}for(;Math.abs(k.lng-_.center.lng)>180;){const I=_.locationPoint(k);if(I.x>=0&&I.y>=0&&I.x<=_.width&&I.y<=_.height)break;k.lng>_.center.lng?k.lng-=360:k.lng+=360}return k}const Fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class mr extends t.Evented{constructor(f,_){if(super(),(f instanceof t.window.HTMLElement||_)&&(f=t.extend({element:f},_)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=f&&f.anchor||"center",this._color=f&&f.color||"#3FB1CE",this._scale=f&&f.scale||1,this._draggable=f&&f.draggable||!1,this._clickTolerance=f&&f.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=f&&f.rotation||0,this._rotationAlignment=f&&f.rotationAlignment||"auto",this._pitchAlignment=f&&f.pitchAlignment&&f.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=f&&f.occludedOpacity||.2,f&&f.element)this._element=f.element,this._offset=t.Point.convert(f&&f.offset||[0,0]);else{this._defaultMarker=!0,this._element=We("div");const Y=41,V=27,Q=nt("svg",{display:"block",height:Y*this._scale+"px",width:V*this._scale+"px",viewBox:`0 0 ${V} ${Y}`},this._element),re=nt("radialGradient",{id:"shadowGradient"},nt("defs",{},Q));nt("stop",{offset:"10%","stop-opacity":.4},re),nt("stop",{offset:"100%","stop-opacity":.05},re),nt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Q),nt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Q),nt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Q),nt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Q),this._offset=t.Point.convert(f&&f.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Y=>{Y.preventDefault()}),this._element.addEventListener("mousedown",Y=>{Y.preventDefault()});const I=this._element.classList;for(const Y in Fd)I.remove(`mapboxgl-marker-anchor-${Y}`);I.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(f){return f===this._map||(this.remove(),this._map=f,f.getCanvasContainer().appendChild(this._element),f.on("move",this._updateMoving),f.on("moveend",this._update),f.on("remove",this._clearFadeTimer),f._addMarker(this),this.setDraggable(this._draggable),this._update(),f.on("click",this._onMapClick)),this}remove(){const f=this._map;return f&&(f.off("click",this._onMapClick),f.off("move",this._updateMoving),f.off("moveend",this._update),f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler),f.off("mouseup",this._onUp),f.off("touchend",this._onUp),f.off("mousemove",this._onMove),f.off("touchmove",this._onMove),f.off("remove",this._clearFadeTimer),f._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=t.LngLat.convert(f),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(f){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),f){if(!("offset"in f.options)){const Y=Math.sqrt(Math.pow(13.5,2)/2);f.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Y,-1*(24.6+Y)],"bottom-right":[-Y,-1*(24.6+Y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=f,f._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(f){const _=f.code,I=f.charCode||f.keyCode;"Space"!==_&&"Enter"!==_&&32!==I&&13!==I||this.togglePopup()}_onMapClick(f){const _=f.originalEvent.target,I=this._element;this._popup&&(_===I||I.contains(_))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const f=this._popup;return f?(f.isOpen()?(f.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(f.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const f=this._map,_=this._pos;if(!f||!_)return!1;const I=f.unproject(_),Y=f.getFreeCameraOptions();if(!Y.position)return!1;const V=Y.position.toLngLat();return V.distanceTo(I)<.9*V.distanceTo(this._lngLat)}_evaluateOpacity(){const f=this._map;if(!f)return;const _=this._pos;if(!_||_.x<0||_.x>f.transform.width||_.y<0||_.y>f.transform.height)return void this._clearFadeTimer();const I=f.unproject(_);let Y;f._showingGlobe()&&t.isLngLatBehindGlobe(f.transform,this._lngLat)?Y=0:(Y=1-f._queryFogOpacity(I),f.transform._terrainEnabled()&&f.getTerrain()&&this._behindTerrain()&&(Y*=this._occludedOpacity)),this._element.style.opacity=`${Y}`,this._element.style.pointerEvents=Y>0?"auto":"none",this._popup&&this._popup._setOpacity(Y),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const f=this._pos;if(!f||!this._map)return;const _=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${f.x}px,${f.y}px)\n            ${Fd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${_.x}px,${_.y}px)\n        `}_calculateXYTransform(){const f=this._pos,_=this._map,I=this.getPitchAlignment();if(!_||!f||"map"!==I)return"";if(!_._showingGlobe()){const de=_.getPitch();return de?`rotateX(${de}deg)`:""}const Y=t.radToDeg(t.globeTiltAtLngLat(_.transform,this._lngLat)),V=f.sub(t.globeCenterToScreenPoint(_.transform)),Q=Math.abs(V.x)+Math.abs(V.y);if(0===Q)return"";const re=Y/Q;return`rotateX(${-V.y*re}deg) rotateY(${V.x*re}deg)`}_calculateZTransform(){const f=this._pos,_=this._map;if(!_||!f)return"";let I=0;const Y=this.getRotationAlignment();if("map"===Y)if(_._showingGlobe()){const V=_.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Q=_.project(new t.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(V);I=t.radToDeg(Math.atan2(Q.y,Q.x))-90}else I=-_.getBearing();else if("horizon"===Y){const V=t.smoothstep(4,6,_.getZoom()),Q=t.globeCenterToScreenPoint(_.transform);Q.y+=V*_.transform.height;const re=f.sub(Q),de=t.radToDeg(Math.atan2(re.y,re.x));I=(de>90?de-270:de+90)*(1-V)}return I+=this._rotation,I?`rotateZ(${I}deg)`:""}_update(f){t.window.cancelAnimationFrame(this._updateFrameId);const _=this._map;_&&(_.transform.renderWorldCopies&&(this._lngLat=Pd(this._lngLat,this._pos,_.transform)),this._pos=_.project(this._lngLat),!0===f?this._updateFrameId=t.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),_._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(_._showingGlobe()||_.getTerrain()||_.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(f){return this._offset=t.Point.convert(f),this._update(),this}_onMove(f){const _=this._map;if(!_)return;const I=this._pointerdownPos,Y=this._positionDelta;if(I&&Y){if(!this._isDragging){const V=this._clickTolerance||_._clickTolerance;if(f.point.dist(I)<V)return;this._isDragging=!0}this._pos=f.point.sub(Y),this._lngLat=_.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const f=this._map;f&&(f.off("mousemove",this._onMove),f.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(f){const _=this._map,I=this._pos;_&&I&&this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(I),this._pointerdownPos=f.point,this._state="pending",_.on("mousemove",this._onMove),_.on("touchmove",this._onMove),_.once("mouseup",this._onUp),_.once("touchend",this._onUp))}setDraggable(f){this._draggable=!!f;const _=this._map;return _&&(f?(_.on("mousedown",this._addDragHandler),_.on("touchstart",this._addDragHandler)):(_.off("mousedown",this._addDragHandler),_.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(f){return this._rotation=f||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(f){return this._rotationAlignment=f||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(f){return this._pitchAlignment=f||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(f){return this._occludedOpacity=f||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const uf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},r0=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function gu(k=new t.Point(0,0),f="bottom"){if("number"==typeof k){const _=Math.round(Math.sqrt(.5*Math.pow(k,2)));switch(f){case"top":return new t.Point(0,k);case"top-left":return new t.Point(_,_);case"top-right":return new t.Point(-_,_);case"bottom":return new t.Point(0,-k);case"bottom-left":return new t.Point(_,-_);case"bottom-right":return new t.Point(-_,-_);case"left":return new t.Point(k,0);case"right":return new t.Point(-k,0)}return new t.Point(0,0)}return k instanceof t.Point||Array.isArray(k)?t.Point.convert(k):t.Point.convert(k[f]||[0,0])}class eh{constructor(f){this.jumpTo(f)}getValue(f){if(f<=this._startTime)return this._start;if(f>=this._endTime)return this._end;const _=t.easeCubicInOut((f-this._startTime)/(this._endTime-this._startTime));return this._start*(1-_)+this._end*_}isEasing(f){return f>=this._startTime&&f<=this._endTime}jumpTo(f){this._startTime=-1/0,this._endTime=-1/0,this._start=f,this._end=f}easeTo(f,_,I){this._start=this.getValue(_),this._end=f,this._startTime=_,this._endTime=_+I}}const sc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},oc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},qm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vc{constructor(f,_,I=!1){this._clickTolerance=10,this.element=_,this.mouseRotate=new Hl({clickTolerance:f.dragRotate._mouseRotate._clickTolerance}),this.map=f,I&&(this.mousePitch=new Hc({clickTolerance:f.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener("mousedown",this.mousedown),_.addEventListener("touchstart",this.touchstart,{passive:!1}),_.addEventListener("touchmove",this.touchmove),_.addEventListener("touchend",this.touchend),_.addEventListener("touchcancel",this.reset)}down(f,_){this.mouseRotate.mousedown(f,_),this.mousePitch&&this.mousePitch.mousedown(f,_),Wt()}move(f,_){const I=this.map,Y=this.mouseRotate.mousemoveWindow(f,_),V=Y&&Y.bearingDelta;if(V&&I.setBearing(I.getBearing()+V),this.mousePitch){const Q=this.mousePitch.mousemoveWindow(f,_),re=Q&&Q.pitchDelta;re&&I.setPitch(I.getPitch()+re)}}off(){const f=this.element;f.removeEventListener("mousedown",this.mousedown),f.removeEventListener("touchstart",this.touchstart,{passive:!1}),f.removeEventListener("touchmove",this.touchmove),f.removeEventListener("touchend",this.touchend),f.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){et(),t.window.removeEventListener("mousemove",this.mousemove),t.window.removeEventListener("mouseup",this.mouseup)}mousedown(f){this.down(t.extend({},f,{ctrlKey:!0,preventDefault:()=>f.preventDefault()}),_i(this.element,f)),t.window.addEventListener("mousemove",this.mousemove),t.window.addEventListener("mouseup",this.mouseup)}mousemove(f){this.move(f,_i(this.element,f))}mouseup(f){this.mouseRotate.mouseupWindow(f),this.mousePitch&&this.mousePitch.mouseupWindow(f),this.offTemp()}touchstart(f){1!==f.targetTouches.length?this.reset():(this._startPos=this._lastPos=tt(this.element,f.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>f.preventDefault()},this._startPos))}touchmove(f){1!==f.targetTouches.length?this.reset():(this._lastPos=tt(this.element,f.targetTouches)[0],this.move({preventDefault:()=>f.preventDefault()},this._lastPos))}touchend(f){0===f.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Vf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},nm={maxWidth:100,unit:"metric"},Cp={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},jh={version:t.version,supported:He,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends ac{constructor(k){if(t.LivePerformanceUtils.mark(t.PerformanceMarkers.create),null!=(k=t.extend({},oc,k)).minZoom&&null!=k.maxZoom&&k.minZoom>k.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=k.minPitch&&null!=k.maxPitch&&k.minPitch>k.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=k.minPitch&&k.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=k.maxPitch&&k.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(k.antialias&&t.isSafariWithAntialiasingBug(t.window)&&(k.antialias=!1,t.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new kl(k.minZoom,k.maxZoom,k.minPitch,k.maxPitch,k.renderWorldCopies),k),this._interactive=k.interactive,this._minTileCacheSize=k.minTileCacheSize,this._maxTileCacheSize=k.maxTileCacheSize,this._failIfMajorPerformanceCaveat=k.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=k.preserveDrawingBuffer,this._antialias=k.antialias,this._useWebGL2=k.useWebGL2,this._trackResize=k.trackResize,this._bearingSnap=k.bearingSnap,this._refreshExpiredTiles=k.refreshExpiredTiles,this._fadeDuration=k.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=k.crossSourceCollisions,this._collectResourceTiming=k.collectResourceTiming,this._optimizeForTerrain=k.optimizeForTerrain,this._language=this._parseLanguage(k.language),this._worldview=k.worldview,this._renderTaskQueue=new Bu,this._domRenderTaskQueue=new Bu,this._controls=[],this._markers=[],this._popups=[],this._mapId=t.uniqueId(),this._locale=t.extend({},sc,k.locale),this._clickTolerance=k.clickTolerance,this._cooperativeGestures=k.cooperativeGestures,this._performanceMetricsCollection=k.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new eh(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new t.RequestManager(k.transformRequest,k.accessToken,k.testMode),this._silenceAuthErrors=!!k.testMode,"string"==typeof k.container){if(this._container=t.window.document.getElementById(k.container),!this._container)throw new Error(`Container '${k.container}' not found.`)}else{if(!(k.container instanceof t.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=k.container}if(this._container.childNodes.length>0&&t.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),k.maxBounds&&this.setMaxBounds(k.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new mu(this,k),this._localFontFamily=k.localFontFamily,this._localIdeographFontFamily=k.localIdeographFontFamily,k.style&&this.setStyle(k.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),k.projection&&this.setProjection(k.projection),this._hash=k.hash&&new Gl("string"==typeof k.hash&&k.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}),k.bounds&&(this.resize(),this.fitBounds(k.bounds,t.extend({},k.fitBoundsOptions,{duration:0})))),this.resize(),k.attributionControl&&this.addControl(new Tr({customAttribution:k.customAttribution})),this._logoControl=new im,this.addControl(this._logoControl,k.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",f=>{this._update("style"===f.dataType),this.fire(new t.Event(`${f.dataType}data`,f))}),this.on("dataloading",f=>{this.fire(new t.Event(`${f.dataType}dataloading`,f))})}_getMapId(){return this._mapId}addControl(k,f){if(void 0===f&&(f=k.getDefaultPosition?k.getDefaultPosition():"top-right"),!k||!k.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const _=k.onAdd(this);this._controls.push(k);const I=this._controlPositions[f];return-1!==f.indexOf("bottom")?I.insertBefore(_,I.firstChild):I.appendChild(_),this}removeControl(k){if(!k||!k.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const f=this._controls.indexOf(k);return f>-1&&this._controls.splice(f,1),k.onRemove(this),this}hasControl(k){return this._controls.indexOf(k)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(k){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const f=!this._moving;return f&&this.fire(new t.Event("movestart",k)).fire(new t.Event("move",k)),this.fire(new t.Event("resize",k)),f&&this.fire(new t.Event("moveend",k)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(k){return this.transform.setMaxBounds(t.LngLatBounds.convert(k)),this._update()}setMinZoom(k){if((k=k??-2)>=-2&&k<=this.transform.maxZoom)return this.transform.minZoom=k,this._update(),this.getZoom()<k?this.setZoom(k):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(k){if((k=k??22)>=this.transform.minZoom)return this.transform.maxZoom=k,this._update(),this.getZoom()>k?this.setZoom(k):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(k){if((k=k??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(k>=0&&k<=this.transform.maxPitch)return this.transform.minPitch=k,this._update(),this.getPitch()<k?this.setPitch(k):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(k){if((k=k??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(k>=this.transform.minPitch)return this.transform.maxPitch=k,this._update(),this.getPitch()>k?this.setPitch(k):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(k){return this.transform.renderWorldCopies=k,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(k){return"auto"===k?t.window.navigator.language:Array.isArray(k)?0===k.length?void 0:k.map(f=>"auto"===f?t.window.navigator.language:f):k}setLanguage(k){const f=this._parseLanguage(k);if(!this.style||f===this._language)return this;this._language=f,this.style._reloadSources();for(const _ of this._controls)_._setLanguage&&_._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(k){return this.style&&k!==this._worldview?(this._worldview=k,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(k){return this._lazyInitEmptyStyle(),k?"string"==typeof k&&(k={name:k}):k=null,this._useExplicitProjection=!!k,this._prioritizeAndUpdateProjection(k,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const k=this.transform,f=k.projection.name;let _;"globe"===f&&k.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?(k.setMercatorFromTransition(),_=!0):"mercator"===f&&k.zoom<t.GLOBE_ZOOM_THRESHOLD_MAX&&(k.setProjection({name:"globe"}),_=!0),_&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(k,f){return this._updateProjection(k||f||{name:"mercator"})}_updateProjection(k){let f;if(f="globe"===k.name&&this.transform.zoom>=t.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(k),this.style.applyProjectionUpdate(),f){this.painter.clearBackgroundTiles();for(const _ in this.style._sourceCaches)this.style._sourceCaches[_].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(k){return this.transform.locationPoint3D(t.LngLat.convert(k))}unproject(k){return this.transform.pointLocation3D(t.Point.convert(k))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(k,f,_){if("mouseenter"===k||"mouseover"===k){let I=!1;const Y=Q=>{const re=f.filter(be=>this.getLayer(be)),de=re.length?this.queryRenderedFeatures(Q.point,{layers:re}):[];de.length?I||(I=!0,_.call(this,new Ie(k,this,Q.originalEvent,{features:de}))):I=!1},V=()=>{I=!1};return{layers:new Set(f),listener:_,delegates:{mousemove:Y,mouseout:V}}}if("mouseleave"===k||"mouseout"===k){let I=!1;const Y=Q=>{const re=f.filter(de=>this.getLayer(de));(re.length?this.queryRenderedFeatures(Q.point,{layers:re}):[]).length?I=!0:I&&(I=!1,_.call(this,new Ie(k,this,Q.originalEvent)))},V=Q=>{I&&(I=!1,_.call(this,new Ie(k,this,Q.originalEvent)))};return{layers:new Set(f),listener:_,delegates:{mousemove:Y,mouseout:V}}}{const I=Y=>{const V=f.filter(re=>this.getLayer(re)),Q=V.length?this.queryRenderedFeatures(Y.point,{layers:V}):[];Q.length&&(Y.features=Q,_.call(this,Y),delete Y.features)};return{layers:new Set(f),listener:_,delegates:{[k]:I}}}}on(k,f,_){if(void 0===_)return super.on(k,f);Array.isArray(f)||(f=[f]);const I=this._createDelegatedListener(k,f,_);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[k]=this._delegatedListeners[k]||[],this._delegatedListeners[k].push(I);for(const Y in I.delegates)this.on(Y,I.delegates[Y]);return this}once(k,f,_){if(void 0===_)return super.once(k,f);Array.isArray(f)||(f=[f]);const I=this._createDelegatedListener(k,f,_);for(const Y in I.delegates)this.once(Y,I.delegates[Y]);return this}off(k,f,_){if(void 0===_)return super.off(k,f);f=new Set(Array.isArray(f)?f:[f]);const I=(V,Q)=>{if(V.size!==Q.size)return!1;for(const re of V)if(!Q.has(re))return!1;return!0},Y=this._delegatedListeners?this._delegatedListeners[k]:void 0;return Y&&(V=>{for(let Q=0;Q<V.length;Q++){const re=V[Q];if(re.listener===_&&I(re.layers,f)){for(const de in re.delegates)this.off(de,re.delegates[de]);return V.splice(Q,1),this}}})(Y),this}queryRenderedFeatures(k,f){return this.style?(void 0!==f||void 0===k||k instanceof t.Point||Array.isArray(k)||(f=k,k=void 0),this.style.queryRenderedFeatures(k=k||[[0,0],[this.transform.width,this.transform.height]],f=f||{},this.transform)):[]}querySourceFeatures(k,f){return this.style.querySourceFeatures(k,f)}isPointOnSurface(k){const{name:f}=this.transform.projection;return"globe"!==f&&"mercator"!==f&&t.warnOnce(`${f} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(t.Point.convert(k))}setStyle(k,f){return!1!==(f=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},f)).diff&&f.localIdeographFontFamily===this._localIdeographFontFamily&&f.localFontFamily===this._localFontFamily&&this.style&&k?(this._diffStyle(k,f),this):(this._localIdeographFontFamily=f.localIdeographFontFamily,this._localFontFamily=f.localFontFamily,this._updateStyle(k,f))}_getUIString(k){const f=this._locale[k];if(null==f)throw new Error(`Missing UI string '${k}'`);return f}_updateStyle(k,f){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),k&&(this.style=new Xa(this,f||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof k?this.style.loadURL(k):this.style.loadJSON(k)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Xa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(k,f){if("string"==typeof k){const _=this._requestManager.normalizeStyleURL(k),I=this._requestManager.transformRequest(_,t.ResourceType.Style);t.getJSON(I,(Y,V)=>{Y?this.fire(new t.ErrorEvent(Y)):V&&this._updateDiff(V,f)})}else"object"==typeof k&&this._updateDiff(k,f)}_updateDiff(k,f){try{this.style.setState(k)&&this._update(!0)}catch(_){t.warnOnce(`Unable to perform style diff: ${_.message||_.error||_}.  Rebuilding the style from scratch.`),this._updateStyle(k,f)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(t.warnOnce("There is no style added to the map."),!1)}addSource(k,f){return this._lazyInitEmptyStyle(),this.style.addSource(k,f),this._update(!0)}isSourceLoaded(k){return!!this.style&&this.style._isSourceCacheLoaded(k)}areTilesLoaded(){const k=this.style&&this.style._sourceCaches;for(const f in k){const _=k[f]._tiles;for(const I in _){const Y=_[I];if("loaded"!==Y.state&&"errored"!==Y.state)return!1}}return!0}addSourceType(k,f,_){this._lazyInitEmptyStyle(),this.style.addSourceType(k,f,_)}removeSource(k){return this.style.removeSource(k),this._updateTerrain(),this._update(!0)}getSource(k){return this.style.getSource(k)}addImage(k,f,{pixelRatio:_=1,sdf:I=!1,stretchX:Y,stretchY:V,content:Q}={}){if(this._lazyInitEmptyStyle(),f instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&f instanceof t.window.ImageBitmap){const{width:re,height:de,data:be}=t.exported.getImageData(f);this.style.addImage(k,{data:new t.RGBAImage({width:re,height:de},be),pixelRatio:_,stretchX:Y,stretchY:V,content:Q,sdf:I,version:0})}else if(void 0===f.width||void 0===f.height)this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:re,height:de}=f,be=f;this.style.addImage(k,{data:new t.RGBAImage({width:re,height:de},new Uint8Array(be.data)),pixelRatio:_,stretchX:Y,stretchY:V,content:Q,sdf:I,version:0,userImage:be}),be.onAdd&&be.onAdd(this,k)}}updateImage(k,f){const _=this.style.getImage(k);if(!_)return void this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const I=f instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&f instanceof t.window.ImageBitmap?t.exported.getImageData(f):f,{width:Y,height:V}=I;void 0!==Y&&void 0!==V?Y===_.data.width&&V===_.data.height?(_.data.replace(I.data,!(f instanceof t.window.HTMLImageElement||t.window.ImageBitmap&&f instanceof t.window.ImageBitmap)),this.style.updateImage(k,_)):this.fire(new t.ErrorEvent(new Error(`The width and height of the updated image (${Y}, ${V})\n                must be that same as the previous version of the image\n                (${_.data.width}, ${_.data.height})`))):this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(k){return k?!!this.style.getImage(k):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(k){this.style.removeImage(k)}loadImage(k,f){t.getImage(this._requestManager.transformRequest(k,t.ResourceType.Image),(_,I)=>{f(_,I instanceof t.window.HTMLImageElement?t.exported.getImageData(I):I)})}listImages(){return this.style.listImages()}addLayer(k,f){return this._lazyInitEmptyStyle(),this.style.addLayer(k,f),this._update(!0)}moveLayer(k,f){return this.style.moveLayer(k,f),this._update(!0)}removeLayer(k){return this.style.removeLayer(k),this._update(!0)}getLayer(k){return this.style.getLayer(k)}setLayerZoomRange(k,f,_){return this.style.setLayerZoomRange(k,f,_),this._update(!0)}setFilter(k,f,_={}){return this.style.setFilter(k,f,_),this._update(!0)}getFilter(k){return this.style.getFilter(k)}setPaintProperty(k,f,_,I={}){return this.style.setPaintProperty(k,f,_,I),this._update(!0)}getPaintProperty(k,f){return this.style.getPaintProperty(k,f)}setLayoutProperty(k,f,_,I={}){return this.style.setLayoutProperty(k,f,_,I),this._update(!0)}getLayoutProperty(k,f){return this.style.getLayoutProperty(k,f)}setLight(k,f={}){return this._lazyInitEmptyStyle(),this.style.setLight(k,f),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(k){return this._lazyInitEmptyStyle(),!k&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(k),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(k){return this._lazyInitEmptyStyle(),this.style.setFog(k),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(k){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(k),this.transform):0}setFeatureState(k,f){return this.style.setFeatureState(k,f),this._update()}removeFeatureState(k,f){return this.style.removeFeatureState(k,f),this._update()}getFeatureState(k){return this.style.getFeatureState(k)}_updateContainerDimensions(){if(!this._container)return;const k=this._container.getBoundingClientRect().width||400,f=this._container.getBoundingClientRect().height||300;let _,I,Y,V=this._container;for(;V&&(!I||!Y);){const Q=t.window.getComputedStyle(V).transform;Q&&"none"!==Q&&(_=Q.match(/matrix.*\((.+)\)/)[1].split(", "),_[0]&&"0"!==_[0]&&"1"!==_[0]&&(I=_[0]),_[3]&&"0"!==_[3]&&"1"!==_[3]&&(Y=_[3])),V=V.parentElement}this._containerWidth=I?Math.abs(k/I):k,this._containerHeight=Y?Math.abs(f/Y):f}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const k=this._container;k.classList.add("mapboxgl-map"),(this._missingCSSCanary=We("div","mapboxgl-canary",k)).style.visibility="hidden",this._detectMissingCSS();const f=this._canvasContainer=We("div","mapboxgl-canvas-container",k);this._interactive&&f.classList.add("mapboxgl-interactive"),this._canvas=We("canvas","mapboxgl-canvas",f),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const _=this._controlContainer=We("div","mapboxgl-control-container",k),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Y=>{I[Y]=We("div",`mapboxgl-ctrl-${Y}`,_)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(k,f){const _=t.exported.devicePixelRatio||1;this._canvas.width=_*Math.ceil(k),this._canvas.height=_*Math.ceil(f),this._canvas.style.width=`${k}px`,this._canvas.style.height=`${f}px`}_addMarker(k){this._markers.push(k)}_removeMarker(k){const f=this._markers.indexOf(k);-1!==f&&this._markers.splice(f,1)}_addPopup(k){this._popups.push(k)}_removePopup(k){const f=this._popups.indexOf(k);-1!==f&&this._popups.splice(f,1)}_setupPainter(){const k=t.extend({},He.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),f=this._useWebGL2&&this._canvas.getContext("webgl2",k),_=f||this._canvas.getContext("webgl",k)||this._canvas.getContext("experimental-webgl",k);_?(this._useWebGL2&&!f&&t.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),t.storeAuthState(_,!0),this.painter=new gl(_,this.transform,!!f),this.on("data",I=>{"source"===I.dataType&&this.painter.setTileLoadedFlag(!0)}),t.exported$1.testSupport(_)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(k){k.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:k}))}_contextRestored(k){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:k}))}_onMapScroll(k){if(k.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(k){return this.style?(this._styleDirty=this._styleDirty||k,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(k){return this._update(),this._renderTaskQueue.add(k)}_cancelRenderFrame(k){this._renderTaskQueue.remove(k)}_requestDomTask(k){!this.loaded()||this.loaded()&&!this.isMoving()?k():this._domRenderTaskQueue.add(k)}_render(k){let f;const _=this.painter.context.extTimerQuery,I=t.exported.now();if(this.listens("gpu-timing-frame")&&(f=_.createQueryEXT(),_.beginQueryEXT(_.TIME_ELAPSED_EXT,f)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],t.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],t.window.performance.now())),this._renderTaskQueue.run(k),this._domRenderTaskQueue.run(k),this._removed)return;this._updateProjectionTransition();const Y=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,de=this.transform.pitch,be=t.exported.now(),xe=new t.EvaluationParameters(re,{now:be,fadeDuration:Y,pitch:de,transition:this.style.getTransition()});this.style.update(xe)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let V=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),V=this._updateAverageElevation(I),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):V=this._updateAverageElevation(I),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Y,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Y,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),f){const re=t.exported.now()-I;_.endQueryEXT(_.TIME_ELAPSED_EXT,f),setTimeout(()=>{const de=_.getQueryObjectEXT(f,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(f),this.fire(new t.Event("gpu-timing-frame",{cpuTime:re,gpuTime:de})),t.window.performance.mark("frame-gpu",{startTime:I,detail:{gpuTime:de}})},50)}if(this.listens("gpu-timing-layer")){const re=this.painter.collectGpuTimers();setTimeout(()=>{const de=this.painter.queryGpuTimers(re);this.fire(new t.Event("gpu-timing-layer",{layerTimes:de}))},50)}if(this.listens("gpu-timing-deferred-render")){const re=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const de=this.painter.queryGpuTimeDeferredRender(re);this.fire(new t.Event("gpu-timing-deferred-render",{gpuTime:de}))},50)}const Q=this._sourcesDirty||this._styleDirty||this._placementDirty||V;if(Q||this._repaint)this.triggerRepaint();else{const re=!this.isMoving()&&this.loaded();if(re&&(V=this._updateAverageElevation(I,!0)),V)this.triggerRepaint();else if(this._triggerFrame(!1),re&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const de=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:de})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0,t.LivePerformanceUtils.mark(t.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&t.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(k){for(const f of this._markers)k&&!this.getRenderWorldCopies()&&(f._lngLat=f._lngLat.wrap()),f._update();for(const f of this._popups)!k||this.getRenderWorldCopies()||f._trackPointer||(f._lngLat=f._lngLat.wrap()),f._update()}_updateAverageElevation(k,f=!1){const _=I=>(this.transform.averageElevation=I,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&_(0);if((f||k-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(k)){const I=this.transform.averageElevation;let Y=this.transform.sampleAverageElevation(),V=!1;this.transform.elevation&&(V=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Y)?Y=0:this._averageElevationLastSampledAt=k;const Q=Math.abs(I-Y);if(Q>1){if(this._isInitialLoad||V)return this._averageElevation.jumpTo(Y),_(Y);this._averageElevation.easeTo(Y,k,300)}else if(Q>1e-4)return this._averageElevation.jumpTo(Y),_(Y)}return!!this._averageElevation.isEasing(k)&&_(this._averageElevation.getValue(k))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,k=>{if(k&&(k.message===t.AUTH_ERR_MSG||401===k.status)){const f=this.painter.context.gl;t.storeAuthState(f,!1),this._logoControl instanceof im&&this._logoControl._updateLogo(),f&&f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT|f.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const k=this._isDragging();this.painter.updateTerrain(this.style,k)}_calculateSpeedIndex(){const k=this.painter.canvasCopy(),f=this.painter.getCanvasCopiesAndTimestamps();f.timeStamps.push(performance.now());const _=this.painter.context.gl,I=_.createFramebuffer();function Y(V){_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,V,0);const Q=new Uint8Array(_.drawingBufferWidth*_.drawingBufferHeight*4);return _.readPixels(0,0,_.drawingBufferWidth,_.drawingBufferHeight,_.RGBA,_.UNSIGNED_BYTE,Q),Q}return _.bindFramebuffer(_.FRAMEBUFFER,I),this._canvasPixelComparison(Y(k),f.canvasCopies.map(Y),f.timeStamps)}_canvasPixelComparison(k,f,_){let I=_[1]-_[0];const Y=k.length/4;for(let V=0;V<f.length;V++){const Q=f[V];let re=0;for(let de=0;de<Q.length;de+=4)Q[de]===k[de]&&Q[de+1]===k[de+1]&&Q[de+2]===k[de+2]&&Q[de+3]===k[de+3]&&(re+=1);I+=(_[V+2]-_[V+1])*(1-re/Y)}return I}remove(){this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1),t.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const k=this.painter.context.gl.getExtension("WEBGL_lose_context");k&&k.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(k){this._renderNextFrame=this._renderNextFrame||k,this.style&&!this._frame&&(this._frame=t.exported.frame(f=>{const _=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,_&&this._render(f)}))}_preloadTiles(k){const f=this.style?Object.values(this.style._sourceCaches):[];return t.asyncAll(f,(_,I)=>_._preloadTiles(k,I),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(k){this._trackResize&&this.resize({originalEvent:k})._update()}_onVisibilityChange(){"hidden"===t.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(k){this._showTileBoundaries!==k&&(this._showTileBoundaries=k,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(k){this._showTerrainWireframe!==k&&(this._showTerrainWireframe=k,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(k){this._speedIndexTiming!==k&&(this._speedIndexTiming=k,this._update())}get showPadding(){return!!this._showPadding}set showPadding(k){this._showPadding!==k&&(this._showPadding=k,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(k){this._showCollisionBoxes!==k&&(this._showCollisionBoxes=k,k?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(k){this._showOverdrawInspector!==k&&(this._showOverdrawInspector=k,this._update())}get repaint(){return!!this._repaint}set repaint(k){this._repaint!==k&&(this._repaint=k,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(k){this._vertices=k,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(k){this._showTileAABBs!==k&&(this._showTileAABBs=k,k&&this._update())}_setCacheLimits(k,f){t.setCacheLimits(k,f)}get version(){return t.version}},NavigationControl:class{constructor(k){this.options=t.extend({},qm,k),this._container=We("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",f=>f.preventDefault()),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",f=>{this._map&&this._map.zoomIn({},{originalEvent:f})}),We("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",f=>{this._map&&this._map.zoomOut({},{originalEvent:f})}),We("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",f=>{const _=this._map;_&&(this.options.visualizePitch?_.resetNorthPitch({},{originalEvent:f}):_.resetNorth({},{originalEvent:f}))}),this._compassIcon=We("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const k=this._map;if(!k)return;const f=k.getZoom(),_=f===k.getMaxZoom(),I=f===k.getMinZoom();this._zoomInButton.disabled=_,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",_.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())}_rotateCompassArrow(){const k=this._map;if(!k)return;const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(k.transform.pitch*(Math.PI/180)),.5)}) rotateX(${k.transform.pitch}deg) rotateZ(${k.transform.angle*(180/Math.PI)}deg)`:`rotate(${k.transform.angle*(180/Math.PI)}deg)`;k._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=f)})}onAdd(k){return this._map=k,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),k.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&k.on("pitch",this._rotateCompassArrow),k.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vc(k,this._compass,this.options.visualizePitch)),this._container}onRemove(){const k=this._map;k&&(this._container.remove(),this.options.showZoom&&k.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&k.off("pitch",this._rotateCompassArrow),k.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(k,f){const _=We("button",k,this._container);return _.type="button",_.addEventListener("click",f),_}_setButtonTitle(k,f){if(!this._map)return;const _=this._map._getUIString(`NavigationControl.${f}`);k.setAttribute("aria-label",_),k.firstElementChild&&k.firstElementChild.setAttribute("title",_)}},GeolocateControl:class extends t.Evented{constructor(k){super(),this.options=t.extend({geolocation:t.window.navigator.geolocation},Vf,k),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Gc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(k){return this._map=k,this._container=We("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(k){const f=(_=!!this.options.geolocation)=>{this._supportsGeolocation=_,k(_)};void 0!==this._supportsGeolocation?k(this._supportsGeolocation):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(_=>f("denied"!==_.state)).catch(()=>f()):f()}_isOutOfMapMaxBounds(k){const f=this._map.getMaxBounds(),_=k.coords;return!!f&&(_.longitude<f.getWest()||_.longitude>f.getEast()||_.latitude<f.getSouth()||_.latitude>f.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(k){if(this._map){if(this._isOutOfMapMaxBounds(k))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",k)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=k,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(k),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(k),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",k)),this._finish()}}_updateCamera(k){const f=new t.LngLat(k.coords.longitude,k.coords.latitude),_=k.coords.accuracy,I=this._map.getBearing(),Y=t.extend({bearing:I},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(_),Y,{geolocateSource:!0})}_updateMarker(k){if(k){const f=new t.LngLat(k.coords.longitude,k.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=k.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const k=this._map.transform,f=t.mercatorZfromAltitude(1,k._center.lat)*k.worldSize,_=Math.ceil(2*this._accuracy*f);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(k){if(this._map){if(this.options.trackUserLocation)if(1===k.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===k.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",k)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(k){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",f=>f.preventDefault()),this._geolocateButton=We("button","mapboxgl-ctrl-geolocate",this._container),We("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===k){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",f),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=We("div","mapboxgl-user-location"),this._dotElement.appendChild(We("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(We("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new mr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=We("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new mr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{f.geolocateSource||"ACTIVE_LOCK"!==this._watchState||f.originalEvent&&"resize"===f.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))})}}_onDeviceOrientation(k){this._userLocationDotMarker&&(k.webkitCompassHeading?this._heading=k.webkitCompassHeading:!0===k.absolute&&(this._heading=-1*k.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let k;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(k={maximumAge:6e5,timeout:0},this._noTimeout=!0):(k=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,k),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const k=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(f=>{"granted"===f&&k()}).catch(console.error):k()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientation),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Tr,ScaleControl:class{constructor(k){this.options=t.extend({},nm,k),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),t.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const k=this.options.maxWidth||100,f=this._map,_=f._containerHeight/2,I=f._containerWidth/2-k/2,Y=f.unproject([I,_]),V=f.unproject([I+k,_]),Q=Y.distanceTo(V);if("imperial"===this.options.unit){const re=3.2808*Q;re>5280?this._setScale(k,re/5280,"mile"):this._setScale(k,re,"foot")}else"nautical"===this.options.unit?this._setScale(k,Q/1852,"nautical-mile"):Q>=1e3?this._setScale(k,Q/1e3,"kilometer"):this._setScale(k,Q,"meter")}_setScale(k,f,_){this._map._requestDomTask(()=>{const I=function(V){const Q=Math.pow(10,`${Math.floor(V)}`.length-1);let re=V/Q;return re=re>=10?10:re>=5?5:re>=3?3:re>=2?2:re>=1?1:function(de){const be=Math.pow(10,Math.ceil(-Math.log(de)/Math.LN10));return Math.round(de*be)/be}(re),Q*re}(f),Y=I/f;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==_?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:_}).format(I):`${I}&nbsp;${Cp[_]}`,this._container.style.width=k*Y+"px"})}onAdd(k){return this._map=k,this._language=k.getLanguage(),this._container=We("div","mapboxgl-ctrl mapboxgl-ctrl-scale",k.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(k){this._language=k,this._update()}setUnit(k){this.options.unit=k,this._update()}},FullscreenControl:class{constructor(k){this._fullscreen=!1,k&&k.container&&(k.container instanceof t.window.HTMLElement?this._container=k.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(k){return this._map=k,this._container||(this._container=this._map.getContainer()),this._controlContainer=We("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const k=this._fullscreenButton=We("button","mapboxgl-ctrl-fullscreen",this._controlContainer);We("span","mapboxgl-ctrl-icon",k).setAttribute("aria-hidden","true"),k.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const k=this._getTitle();this._fullscreenButton.setAttribute("aria-label",k),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",k)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(k){super(),this.options=t.extend(Object.create(uf),k),t.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(k&&k.className?k.className.trim().split(/\s+/):[])}addTo(k){return this._map&&this.remove(),this._map=k,this.options.closeOnClick&&k.on("preclick",this._onClose),this.options.closeOnMove&&k.on("move",this._onClose),k.on("remove",this.remove),this._update(),k._addPopup(this),this._focusFirstElement(),this._trackPointer?(k.on("mousemove",this._onMouseEvent),k.on("mouseup",this._onMouseEvent),k._canvasContainer.classList.add("mapboxgl-track-pointer")):k.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const k=this._map;return k&&(k.off("move",this._update),k.off("move",this._onClose),k.off("preclick",this._onClose),k.off("click",this._onClose),k.off("remove",this.remove),k.off("mousemove",this._onMouseEvent),k.off("mouseup",this._onMouseEvent),k.off("drag",this._onMouseEvent),k._canvasContainer&&k._canvasContainer.classList.remove("mapboxgl-track-pointer"),k._removePopup(this),this._map=void 0),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(k){this._lngLat=t.LngLat.convert(k),this._pos=null,this._trackPointer=!1,this._update();const f=this._map;return f&&(f.on("move",this._update),f.off("mousemove",this._onMouseEvent),f._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const k=this._map;return k&&(k.off("move",this._update),k.on("mousemove",this._onMouseEvent),k.on("drag",this._onMouseEvent),k._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(k){return this.setDOMContent(t.window.document.createTextNode(k))}setHTML(k){const f=t.window.document.createDocumentFragment(),_=t.window.document.createElement("body");let I;for(_.innerHTML=k;I=_.firstChild,I;)f.appendChild(I);return this.setDOMContent(f)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(k){return this.options.maxWidth=k,this._update(),this}setDOMContent(k){let f=this._content;if(f)for(;f.hasChildNodes();)f.firstChild&&f.removeChild(f.firstChild);else f=this._content=We("div","mapboxgl-popup-content",this._container||void 0);if(f.appendChild(k),this.options.closeButton){const _=this._closeButton=We("button","mapboxgl-popup-close-button",f);_.type="button",_.setAttribute("aria-label","Close popup"),_.setAttribute("aria-hidden","true"),_.innerHTML="&#215;",_.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(k){return this._classList.add(k),this._updateClassList(),this}removeClassName(k){return this._classList.delete(k),this._updateClassList(),this}setOffset(k){return this.options.offset=k,this._update(),this}toggleClassName(k){let f;return this._classList.delete(k)?f=!1:(this._classList.add(k),f=!0),this._updateClassList(),f}_onMouseEvent(k){this._update(k.point)}_getAnchor(k){if(this.options.anchor)return this.options.anchor;const f=this._map,_=this._container,I=this._pos;if(!f||!_||!I)return"bottom";const Y=_.offsetWidth,V=_.offsetHeight,Q=I.x<Y/2,re=I.x>f.transform.width-Y/2;if(I.y+k<V)return Q?"top-left":re?"top-right":"top";if(I.y>f.transform.height-V){if(Q)return"bottom-left";if(re)return"bottom-right"}return Q?"left":re?"right":"bottom"}_updateClassList(){const k=this._container;if(!k)return;const f=[...this._classList];f.push("mapboxgl-popup"),this._anchor&&f.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&f.push("mapboxgl-popup-track-pointer"),k.className=f.join(" ")}_update(k){const f=this._map,_=this._content;if(!f||!this._lngLat&&!this._trackPointer||!_)return;let I=this._container;if(I||(I=this._container=We("div","mapboxgl-popup",f.getContainer()),this._tip=We("div","mapboxgl-popup-tip",I),I.appendChild(_)),this.options.maxWidth&&I.style.maxWidth!==this.options.maxWidth&&(I.style.maxWidth=this.options.maxWidth),f.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pd(this._lngLat,this._pos,f.transform)),!this._trackPointer||k){const Y=this._pos=this._trackPointer&&k?k:f.project(this._lngLat),V=gu(this.options.offset),Q=this._anchor=this._getAnchor(V.y),re=gu(this.options.offset,Q),de=Y.add(re).round();f._requestDomTask(()=>{this._container&&Q&&(this._container.style.transform=`${Fd[Q]} translate(${de.x}px,${de.y}px)`)})}if(!this._marker&&f._showingGlobe()){const Y=t.isLngLatBehindGlobe(f.transform,this._lngLat)?0:1;this._setOpacity(Y)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const k=this._container.querySelector(r0);k&&k.focus()}_onClose(){this.remove()}_setOpacity(k){this._container&&(this._container.style.opacity=`${k}`),this._content&&(this._content.style.pointerEvents=k?"auto":"none")}},Marker:mr,Style:Xa,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Yc,Evented:t.Evented,config:t.config,prewarm:function(){st().acquire(en)},clearPrewarmedResources:function(){const k=En;k&&(k.isPreloaded()&&1===k.numActive()?(k.release(en),En=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(k){t.config.ACCESS_TOKEN=k},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(k){t.config.API_URL=k},get workerCount(){return $i.workerCount},set workerCount(k){$i.workerCount=k},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(k){t.config.MAX_PARALLEL_IMAGE_REQUESTS=k},clearStorage(k){t.clearTileCache(k)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return jh}),T}()},1472:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{u:()=>Wt});var T=Zt(1364);let Ze,xt=1;const t={};function j(lt){return lt in t&&(delete t[lt],!0)}const He={setImmediate(lt){const gt=xt++;return t[gt]=!0,Ze||(Ze=Promise.resolve()),Ze.then(()=>j(gt)&&lt()),gt},clearImmediate(lt){j(lt)}},{setImmediate:Me,clearImmediate:We}=He,nt={setImmediate(...lt){const{delegate:gt}=nt;return(gt?.setImmediate||Me)(...lt)},clearImmediate(lt){const{delegate:gt}=nt;return(gt?.clearImmediate||We)(lt)},delegate:void 0};var Ct=Zt(9816);const Wt=new class ot extends Ct.k{flush(gt){this._active=!0;const _i=this._scheduled;this._scheduled=void 0;const{actions:tt}=this;let yi;gt=gt||tt.shift();do{if(yi=gt.execute(gt.state,gt.delay))break}while((gt=tt[0])&&gt.id===_i&&tt.shift());if(this._active=!1,yi){for(;(gt=tt[0])&&gt.id===_i&&tt.shift();)gt.unsubscribe();throw yi}}}(class at extends T.m{constructor(gt,_i){super(gt,_i),this.scheduler=gt,this.work=_i}requestAsyncId(gt,_i,tt=0){return null!==tt&&tt>0?super.requestAsyncId(gt,_i,tt):(gt.actions.push(this),gt._scheduled||(gt._scheduled=nt.setImmediate(gt.flush.bind(gt,void 0))))}recycleAsyncId(gt,_i,tt=0){var yi;if(null!=tt?tt>0:this.delay>0)return super.recycleAsyncId(gt,_i,tt);const{actions:Pi}=gt;null!=_i&&(null===(yi=Pi[Pi.length-1])||void 0===yi?void 0:yi.id)!==_i&&(nt.clearImmediate(_i),gt._scheduled===_i&&(gt._scheduled=void 0))}})},3756:function(uo){uo.exports=function(){"use strict";function ja(Ge,se,me){return se=nt(se),function ot(Ge,se){if(se&&("object"==typeof se||"function"==typeof se))return se;if(void 0!==se)throw new TypeError("Derived constructors may only return object or undefined");return function Ct(Ge){if(void 0===Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge}(Ge)}(Ge,T()?Reflect.construct(se,me||[],nt(Ge).constructor):se.apply(Ge,me))}function T(){try{var Ge=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!Ge})()}function t(Ge){var se=function Ze(Ge,se){if("object"!=typeof Ge||!Ge)return Ge;var me=Ge[Symbol.toPrimitive];if(void 0!==me){var Ve=me.call(Ge,se||"default");if("object"!=typeof Ve)return Ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===se?String:Number)(Ge)}(Ge,"string");return"symbol"==typeof se?se:String(se)}function j(Ge){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(se){return typeof se}:function(se){return se&&"function"==typeof Symbol&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se})(Ge)}function He(Ge,se){if(!(Ge instanceof se))throw new TypeError("Cannot call a class as a function")}function Be(Ge,se){for(var me=0;me<se.length;me++){var Ve=se[me];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(Ge,t(Ve.key),Ve)}}function Me(Ge,se,me){return se&&Be(Ge.prototype,se),me&&Be(Ge,me),Object.defineProperty(Ge,"prototype",{writable:!1}),Ge}function nt(Ge){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(me){return me.__proto__||Object.getPrototypeOf(me)})(Ge)}function at(Ge,se){return(at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ve,Ee){return Ve.__proto__=Ee,Ve})(Ge,se)}function et(){return et=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(se,me,Ve){var Ee=function Wt(Ge,se){for(;!Object.prototype.hasOwnProperty.call(Ge,se)&&null!==(Ge=nt(Ge)););return Ge}(se,me);if(Ee){var xn=Object.getOwnPropertyDescriptor(Ee,me);return xn.get?xn.get.call(arguments.length<3?se:Ve):xn.value}},et.apply(this,arguments)}function lt(Ge,se){return function tt(Ge){if(Array.isArray(Ge))return Ge}(Ge)||function xt(Ge,se){var me=null==Ge?null:typeof Symbol<"u"&&Ge[Symbol.iterator]||Ge["@@iterator"];if(null!=me){var Ve,Ee,xn,vr,Xr=[],hr=!0,So=!1;try{if(xn=(me=me.call(Ge)).next,0===se){if(Object(me)!==me)return;hr=!1}else for(;!(hr=(Ve=xn.call(me)).done)&&(Xr.push(Ve.value),Xr.length!==se);hr=!0);}catch(ll){So=!0,Ee=ll}finally{try{if(!hr&&null!=me.return&&(vr=me.return(),Object(vr)!==vr))return}finally{if(So)throw Ee}}return Xr}}(Ge,se)||Pi(Ge,se)||function xi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(Ge){return function _i(Ge){if(Array.isArray(Ge))return Dt(Ge)}(Ge)||function yi(Ge){if(typeof Symbol<"u"&&null!=Ge[Symbol.iterator]||null!=Ge["@@iterator"])return Array.from(Ge)}(Ge)||Pi(Ge)||function Fi(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(Ge,se){if(Ge){if("string"==typeof Ge)return Dt(Ge,se);var me=Object.prototype.toString.call(Ge).slice(8,-1);if("Object"===me&&Ge.constructor&&(me=Ge.constructor.name),"Map"===me||"Set"===me)return Array.from(Ge);if("Arguments"===me||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(me))return Dt(Ge,se)}}function Dt(Ge,se){(null==se||se>Ge.length)&&(se=Ge.length);for(var me=0,Ve=new Array(se);me<se;me++)Ve[me]=Ge[me];return Ve}function fi(Ge,se){return function Ni(Ge,se){return se.get?se.get.call(Ge):se.value}(Ge,Si(Ge,se,"get"))}function It(Ge,se,me){return function Zi(Ge,se,me){if(se.set)se.set.call(Ge,me);else{if(!se.writable)throw new TypeError("attempted to set read only private field");se.value=me}}(Ge,Si(Ge,se,"set"),me),me}function Si(Ge,se,me){if(!se.has(Ge))throw new TypeError("attempted to "+me+" private field on non-instance");return se.get(Ge)}function Ki(Ge,se,me){(function Rn(Ge,se){if(se.has(Ge))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Ge,se),se.set(Ge,me)}var yn={},yr=function(se){return new Promise(function(me){if(!se)return me();var Ve=window.scrollX,Ee=window.scrollY;yn.restoreFocusTimeout=setTimeout(function(){yn.previousActiveElement instanceof HTMLElement?(yn.previousActiveElement.focus(),yn.previousActiveElement=null):document.body&&document.body.focus(),me()},100),window.scrollTo(Ve,Ee)})},Mi=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(function(Ge,se){return Ge[se]="swal2-"+se,Ge},{}),Jn=["success","warning","info","question","error"].reduce(function(Ge,se){return Ge[se]="swal2-"+se,Ge},{}),ia="SweetAlert2:",jr=function(se){return se.charAt(0).toUpperCase()+se.slice(1)},Pr=function(se){console.warn("".concat(ia," ").concat("object"===j(se)?se.join(" "):se))},Mn=function(se){console.error("".concat(ia," ").concat(se))},Ya=[],Ma=function(se,me){!function(se){Ya.includes(se)||(Ya.push(se),Pr(se))}('"'.concat(se,'" is deprecated and will be removed in the next major release. Please use "').concat(me,'" instead.'))},pr=function(se){return"function"==typeof se?se():se},$n=function(se){return se&&"function"==typeof se.toPromise},ar=function(se){return $n(se)?se.toPromise():Promise.resolve(se)},Sn=function(se){return se&&Promise.resolve(se)===se},Dn=function(){return document.body.querySelector(".".concat(Mi.container))},Gr=function(se){var me=Dn();return me?me.querySelector(se):null},Vn=function(se){return Gr(".".concat(se))},rn=function(){return Vn(Mi.popup)},ur=function(){return Vn(Mi.icon)},Pa=function(){return Vn(Mi.title)},Ga=function(){return Vn(Mi["html-container"])},Ja=function(){return Vn(Mi.image)},Ra=function(){return Vn(Mi["progress-steps"])},ha=function(){return Vn(Mi["validation-message"])},xr=function(){return Gr(".".concat(Mi.actions," .").concat(Mi.confirm))},da=function(){return Gr(".".concat(Mi.actions," .").concat(Mi.cancel))},Mr=function(){return Gr(".".concat(Mi.actions," .").concat(Mi.deny))},Dr=function(){return Gr(".".concat(Mi.loader))},Aa=function(){return Vn(Mi.actions)},fa=function(){return Vn(Mi.footer)},Ia=function(){return Vn(Mi["timer-progress-bar"])},Fa=function(){return Vn(Mi.close)},je=function(){var se=rn();if(!se)return[];var me=se.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),Ve=Array.from(me).sort(function(vr,Xr){var hr=parseInt(vr.getAttribute("tabindex")||"0"),So=parseInt(Xr.getAttribute("tabindex")||"0");return hr>So?1:hr<So?-1:0}),Ee=se.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),xn=Array.from(Ee).filter(function(vr){return"-1"!==vr.getAttribute("tabindex")});return gt(new Set(Ve.concat(xn))).filter(function(vr){return ci(vr)})},Je=function(){return Ci(document.body,Mi.shown)&&!Ci(document.body,Mi["toast-shown"])&&!Ci(document.body,Mi["no-backdrop"])},At=function(){var se=rn();return!!se&&Ci(se,Mi.toast)},ai=function(se,me){if(se.textContent="",me){var Ee=(new DOMParser).parseFromString(me,"text/html"),xn=Ee.querySelector("head");xn&&Array.from(xn.childNodes).forEach(function(Xr){se.appendChild(Xr)});var vr=Ee.querySelector("body");vr&&Array.from(vr.childNodes).forEach(function(Xr){Xr instanceof HTMLVideoElement||Xr instanceof HTMLAudioElement?se.appendChild(Xr.cloneNode(!0)):se.appendChild(Xr)})}},Ci=function(se,me){if(!me)return!1;for(var Ve=me.split(/\s+/),Ee=0;Ee<Ve.length;Ee++)if(!se.classList.contains(Ve[Ee]))return!1;return!0},Mt=function(se,me,Ve){if(function(se,me){Array.from(se.classList).forEach(function(Ve){!Object.values(Mi).includes(Ve)&&!Object.values(Jn).includes(Ve)&&!Object.values(me.showClass||{}).includes(Ve)&&se.classList.remove(Ve)})}(se,me),me.customClass&&me.customClass[Ve]){if("string"!=typeof me.customClass[Ve]&&!me.customClass[Ve].forEach)return void Pr("Invalid type of customClass.".concat(Ve,'! Expected string or iterable object, got "').concat(j(me.customClass[Ve]),'"'));Vi(se,me.customClass[Ve])}},Bi=function(se,me){if(!me)return null;switch(me){case"select":case"textarea":case"file":return se.querySelector(".".concat(Mi.popup," > .").concat(Mi[me]));case"checkbox":return se.querySelector(".".concat(Mi.popup," > .").concat(Mi.checkbox," input"));case"radio":return se.querySelector(".".concat(Mi.popup," > .").concat(Mi.radio," input:checked"))||se.querySelector(".".concat(Mi.popup," > .").concat(Mi.radio," input:first-child"));case"range":return se.querySelector(".".concat(Mi.popup," > .").concat(Mi.range," input"));default:return se.querySelector(".".concat(Mi.popup," > .").concat(Mi.input))}},On=function(se){if(se.focus(),"file"!==se.type){var me=se.value;se.value="",se.value=me}},_n=function(se,me,Ve){!se||!me||("string"==typeof me&&(me=me.split(/\s+/).filter(Boolean)),me.forEach(function(Ee){Array.isArray(se)?se.forEach(function(xn){Ve?xn.classList.add(Ee):xn.classList.remove(Ee)}):Ve?se.classList.add(Ee):se.classList.remove(Ee)}))},Vi=function(se,me){_n(se,me,!0)},Qn=function(se,me){_n(se,me,!1)},Yt=function(se,me){for(var Ve=Array.from(se.children),Ee=0;Ee<Ve.length;Ee++){var xn=Ve[Ee];if(xn instanceof HTMLElement&&Ci(xn,me))return xn}},Ut=function(se,me,Ve){Ve==="".concat(parseInt(Ve))&&(Ve=parseInt(Ve)),Ve||0===parseInt(Ve)?se.style.setProperty(me,"number"==typeof Ve?"".concat(Ve,"px"):Ve):se.style.removeProperty(me)},vt=function(se){se&&(se.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},pt=function(se){se&&(se.style.display="none")},Ke=function(se){var me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";se&&new MutationObserver(function(){Ot(se,se.innerHTML,me)}).observe(se,{childList:!0,subtree:!0})},rt=function(se,me,Ve,Ee){var xn=se.querySelector(me);xn&&xn.style.setProperty(Ve,Ee)},Ot=function(se,me){me?vt(se,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):pt(se)},ci=function(se){return!(!se||!(se.offsetWidth||se.offsetHeight||se.getClientRects().length))},$i=function(se){return se.scrollHeight>se.clientHeight},En=function(se){var me=window.getComputedStyle(se),Ve=parseFloat(me.getPropertyValue("animation-duration")||"0"),Ee=parseFloat(me.getPropertyValue("transition-duration")||"0");return Ve>0||Ee>0},st=function(se){var me=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Ve=Ia();Ve&&ci(Ve)&&(me&&(Ve.style.transition="none",Ve.style.width="100%"),setTimeout(function(){Ve.style.transition="width ".concat(se/1e3,"s linear"),Ve.style.width="0%"},10))},ke=function(){return typeof window>"u"||typeof document>"u"},wt='\n <div aria-labelledby="'.concat(Mi.title,'" aria-describedby="').concat(Mi["html-container"],'" class="').concat(Mi.popup,'" tabindex="-1">\n   <button type="button" class="').concat(Mi.close,'"></button>\n   <ul class="').concat(Mi["progress-steps"],'"></ul>\n   <div class="').concat(Mi.icon,'"></div>\n   <img class="').concat(Mi.image,'" />\n   <h2 class="').concat(Mi.title,'" id="').concat(Mi.title,'"></h2>\n   <div class="').concat(Mi["html-container"],'" id="').concat(Mi["html-container"],'"></div>\n   <input class="').concat(Mi.input,'" id="').concat(Mi.input,'" />\n   <input type="file" class="').concat(Mi.file,'" />\n   <div class="').concat(Mi.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(Mi.select,'" id="').concat(Mi.select,'"></select>\n   <div class="').concat(Mi.radio,'"></div>\n   <label class="').concat(Mi.checkbox,'">\n     <input type="checkbox" id="').concat(Mi.checkbox,'" />\n     <span class="').concat(Mi.label,'"></span>\n   </label>\n   <textarea class="').concat(Mi.textarea,'" id="').concat(Mi.textarea,'"></textarea>\n   <div class="').concat(Mi["validation-message"],'" id="').concat(Mi["validation-message"],'"></div>\n   <div class="').concat(Mi.actions,'">\n     <div class="').concat(Mi.loader,'"></div>\n     <button type="button" class="').concat(Mi.confirm,'"></button>\n     <button type="button" class="').concat(Mi.deny,'"></button>\n     <button type="button" class="').concat(Mi.cancel,'"></button>\n   </div>\n   <div class="').concat(Mi.footer,'"></div>\n   <div class="').concat(Mi["timer-progress-bar-container"],'">\n     <div class="').concat(Mi["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Xe=function(){yn.currentInstance.resetValidationMessage()},m=function(se){var me=function(){var se=Dn();return!!se&&(se.remove(),Qn([document.documentElement,document.body],[Mi["no-backdrop"],Mi["toast-shown"],Mi["has-column"]]),!0)}();if(ke())Mn("SweetAlert2 requires document to initialize");else{var Ve=document.createElement("div");Ve.className=Mi.container,me&&Vi(Ve,Mi["no-transition"]),ai(Ve,wt);var Ee=function(se){return"string"==typeof se?document.querySelector(se):se}(se.target);Ee.appendChild(Ve),function(se){var me=rn();me.setAttribute("role",se.toast?"alert":"dialog"),me.setAttribute("aria-live",se.toast?"polite":"assertive"),se.toast||me.setAttribute("aria-modal","true")}(se),function(se){"rtl"===window.getComputedStyle(se).direction&&Vi(Dn(),Mi.rtl)}(Ee),function(){var se=rn(),me=Yt(se,Mi.input),Ve=Yt(se,Mi.file),Ee=se.querySelector(".".concat(Mi.range," input")),xn=se.querySelector(".".concat(Mi.range," output")),vr=Yt(se,Mi.select),Xr=se.querySelector(".".concat(Mi.checkbox," input")),hr=Yt(se,Mi.textarea);me.oninput=Xe,Ve.onchange=Xe,vr.onchange=Xe,Xr.onchange=Xe,hr.oninput=Xe,Ee.oninput=function(){Xe(),xn.value=Ee.value},Ee.onchange=function(){Xe(),xn.value=Ee.value}}()}},x=function(se,me){se instanceof HTMLElement?me.appendChild(se):"object"===j(se)?w(se,me):se&&ai(me,se)},w=function(se,me){se.jquery?E(me,se):ai(me,se.toString())},E=function(se,me){if(se.textContent="",0 in me)for(var Ve=0;Ve in me;Ve++)se.appendChild(me[Ve].cloneNode(!0));else se.appendChild(me.cloneNode(!0))},M=function(){if(ke())return!1;var Ge=document.createElement("div");return typeof Ge.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof Ge.style.animation<"u"&&"animationend"}(),N=function(se,me){var Ve=Aa(),Ee=Dr();!Ve||!Ee||(me.showConfirmButton||me.showDenyButton||me.showCancelButton?vt(Ve):pt(Ve),Mt(Ve,me,"actions"),function H(Ge,se,me){var Ve=xr(),Ee=Mr(),xn=da();!Ve||!Ee||!xn||(J(Ve,"confirm",me),J(Ee,"deny",me),J(xn,"cancel",me),function Z(Ge,se,me,Ve){Ve.buttonsStyling?(Vi([Ge,se,me],Mi.styled),Ve.confirmButtonColor&&(Ge.style.backgroundColor=Ve.confirmButtonColor,Vi(Ge,Mi["default-outline"])),Ve.denyButtonColor&&(se.style.backgroundColor=Ve.denyButtonColor,Vi(se,Mi["default-outline"])),Ve.cancelButtonColor&&(me.style.backgroundColor=Ve.cancelButtonColor,Vi(me,Mi["default-outline"]))):Qn([Ge,se,me],Mi.styled)}(Ve,Ee,xn,me),me.reverseButtons&&(me.toast?(Ge.insertBefore(xn,Ve),Ge.insertBefore(Ee,Ve)):(Ge.insertBefore(xn,se),Ge.insertBefore(Ee,se),Ge.insertBefore(Ve,se))))}(Ve,Ee,me),ai(Ee,me.loaderHtml||""),Mt(Ee,me,"loader"))};function J(Ge,se,me){var Ve=jr(se);Ot(Ge,me["show".concat(Ve,"Button")],"inline-block"),ai(Ge,me["".concat(se,"ButtonText")]||""),Ge.setAttribute("aria-label",me["".concat(se,"ButtonAriaLabel")]||""),Ge.className=Mi[se],Mt(Ge,me,"".concat(se,"Button"))}var fe=function(se,me){var Ve=Dn();Ve&&(function ye(Ge,se){"string"==typeof se?Ge.style.background=se:se||Vi([document.documentElement,document.body],Mi["no-backdrop"])}(Ve,me.backdrop),function De(Ge,se){se&&(se in Mi?Vi(Ge,Mi[se]):(Pr('The "position" parameter is not valid, defaulting to "center"'),Vi(Ge,Mi.center)))}(Ve,me.position),function Pe(Ge,se){se&&Vi(Ge,Mi["grow-".concat(se)])}(Ve,me.grow),Mt(Ve,me,"container"))};var Se={innerParams:new WeakMap,domCache:new WeakMap},ze=["input","file","range","select","radio","checkbox","textarea"],le=function(se){if(se.input){if(!Ji[se.input])return void Mn("Unexpected type of input! Expected ".concat(Object.keys(Ji).join(" | "),', got "').concat(se.input,'"'));var me=Xt(se.input),Ve=Ji[se.input](me,se);vt(me),se.inputAutoFocus&&setTimeout(function(){On(Ve)})}},Le=function(se,me){var Ve=Bi(rn(),se);if(Ve)for(var Ee in function(se){for(var me=0;me<se.attributes.length;me++){var Ve=se.attributes[me].name;["id","type","value","style"].includes(Ve)||se.removeAttribute(Ve)}}(Ve),me)Ve.setAttribute(Ee,me[Ee])},$e=function(se){var me=Xt(se.input);"object"===j(se.customClass)&&Vi(me,se.customClass.input)},mt=function(se,me){(!se.placeholder||me.inputPlaceholder)&&(se.placeholder=me.inputPlaceholder)},$t=function(se,me,Ve){if(Ve.inputLabel){var Ee=document.createElement("label"),xn=Mi["input-label"];Ee.setAttribute("for",se.id),Ee.className=xn,"object"===j(Ve.customClass)&&Vi(Ee,Ve.customClass.inputLabel),Ee.innerText=Ve.inputLabel,me.insertAdjacentElement("beforebegin",Ee)}},Xt=function(se){return Yt(rn(),Mi[se]||Mi.input)},Li=function(se,me){["string","number"].includes(j(me))?se.value="".concat(me):Sn(me)||Pr('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(j(me),'"'))},Ji={};Ji.text=Ji.email=Ji.password=Ji.number=Ji.tel=Ji.url=Ji.search=Ji.date=Ji["datetime-local"]=Ji.time=Ji.week=Ji.month=function(Ge,se){return Li(Ge,se.inputValue),$t(Ge,Ge,se),mt(Ge,se),Ge.type=se.input,Ge},Ji.file=function(Ge,se){return $t(Ge,Ge,se),mt(Ge,se),Ge},Ji.range=function(Ge,se){var me=Ge.querySelector("input"),Ve=Ge.querySelector("output");return Li(me,se.inputValue),me.type=se.input,Li(Ve,se.inputValue),$t(me,Ge,se),Ge},Ji.select=function(Ge,se){if(Ge.textContent="",se.inputPlaceholder){var me=document.createElement("option");ai(me,se.inputPlaceholder),me.value="",me.disabled=!0,me.selected=!0,Ge.appendChild(me)}return $t(Ge,Ge,se),Ge},Ji.radio=function(Ge){return Ge.textContent="",Ge},Ji.checkbox=function(Ge,se){var me=Bi(rn(),"checkbox");me.value="1",me.checked=!!se.inputValue;var Ve=Ge.querySelector("span");return ai(Ve,se.inputPlaceholder),me},Ji.textarea=function(Ge,se){Li(Ge,se.inputValue),mt(Ge,se),$t(Ge,Ge,se);return setTimeout(function(){if("MutationObserver"in window){var Ve=parseInt(window.getComputedStyle(rn()).width);new MutationObserver(function(){if(document.body.contains(Ge)){var vr=Ge.offsetWidth+(Ee=Ge,parseInt(window.getComputedStyle(Ee).marginLeft)+parseInt(window.getComputedStyle(Ee).marginRight));vr>Ve?rn().style.width="".concat(vr,"px"):Ut(rn(),"width",se.width)}var Ee}).observe(Ge,{attributes:!0,attributeFilter:["style"]})}}),Ge};var ln=function(se,me){var Ve=Ga();Ve&&(Ke(Ve),Mt(Ve,me,"htmlContainer"),me.html?(x(me.html,Ve),vt(Ve,"block")):me.text?(Ve.textContent=me.text,vt(Ve,"block")):pt(Ve),function(se,me){var Ve=rn();if(Ve){var Ee=Se.innerParams.get(se),xn=!Ee||me.input!==Ee.input;ze.forEach(function(vr){var Xr=Yt(Ve,Mi[vr]);Xr&&(Le(vr,me.inputAttributes),Xr.className=Mi[vr],xn&&pt(Xr))}),me.input&&(xn&&le(me),$e(me))}}(se,me))},Wr=function(se,me){for(var Ve=0,Ee=Object.entries(Jn);Ve<Ee.length;Ve++){var xn=lt(Ee[Ve],2);me.icon!==xn[0]&&Qn(se,xn[1])}Vi(se,me.icon&&Jn[me.icon]),ms(se,me),pa(),Mt(se,me,"icon")},pa=function(){var se=rn();if(se)for(var me=window.getComputedStyle(se).getPropertyValue("background-color"),Ve=se.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Ee=0;Ee<Ve.length;Ee++)Ve[Ee].style.backgroundColor=me},es=function(se,me){if(me.icon||me.iconHtml){var Ve=se.innerHTML,Ee="";me.iconHtml?Ee=Is(me.iconHtml):"success"===me.icon?(Ee='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Ve=Ve.replace(/ style=".*?"/g,"")):"error"===me.icon?Ee='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':me.icon&&(Ee=Is({question:"?",warning:"!",info:"i"}[me.icon])),Ve.trim()!==Ee.trim()&&ai(se,Ee)}},ms=function(se,me){if(me.iconColor){se.style.color=me.iconColor,se.style.borderColor=me.iconColor;for(var Ve=0,Ee=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];Ve<Ee.length;Ve++)rt(se,Ee[Ve],"background-color",me.iconColor);rt(se,".swal2-success-ring","border-color",me.iconColor)}},Is=function(se){return'<div class="'.concat(Mi["icon-content"],'">').concat(se,"</div>")},Ms=function(se,me){var Ve=me.showClass||{};se.className="".concat(Mi.popup," ").concat(ci(se)?Ve.popup:""),me.toast?(Vi([document.documentElement,document.body],Mi["toast-shown"]),Vi(se,Mi.toast)):Vi(se,Mi.modal),Mt(se,me,"popup"),"string"==typeof me.customClass&&Vi(se,me.customClass),me.icon&&Vi(se,Mi["icon-".concat(me.icon)])},Ns=function(se){var me=document.createElement("li");return Vi(me,Mi["progress-step"]),ai(me,se),me},Ku=function(se){var me=document.createElement("li");return Vi(me,Mi["progress-step-line"]),se.progressStepsDistance&&Ut(me,"width",se.progressStepsDistance),me},Ws=function(se,me){(function(se,me){var Ve=Dn(),Ee=rn();if(Ve&&Ee){if(me.toast){Ut(Ve,"width",me.width),Ee.style.width="100%";var xn=Dr();xn&&Ee.insertBefore(xn,ur())}else Ut(Ee,"width",me.width);Ut(Ee,"padding",me.padding),me.color&&(Ee.style.color=me.color),me.background&&(Ee.style.background=me.background),pt(ha()),Ms(Ee,me)}})(0,me),fe(0,me),function(se,me){var Ve=Ra();if(Ve){var Ee=me.progressSteps,xn=me.currentProgressStep;if(!Ee||0===Ee.length||void 0===xn)return void pt(Ve);vt(Ve),Ve.textContent="",xn>=Ee.length&&Pr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Ee.forEach(function(vr,Xr){var hr=Ns(vr);if(Ve.appendChild(hr),Xr===xn&&Vi(hr,Mi["active-progress-step"]),Xr!==Ee.length-1){var So=Ku(me);Ve.appendChild(So)}})}}(0,me),function(se,me){var Ve=Se.innerParams.get(se),Ee=ur();if(Ee){if(Ve&&me.icon===Ve.icon)return es(Ee,me),void Wr(Ee,me);if(!me.icon&&!me.iconHtml)return void pt(Ee);if(me.icon&&-1===Object.keys(Jn).indexOf(me.icon))return Mn('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(me.icon,'"')),void pt(Ee);vt(Ee),es(Ee,me),Wr(Ee,me),Vi(Ee,me.showClass&&me.showClass.icon)}}(se,me),function(se,me){var Ve=Ja();if(Ve){if(!me.imageUrl)return void pt(Ve);vt(Ve,""),Ve.setAttribute("src",me.imageUrl),Ve.setAttribute("alt",me.imageAlt||""),Ut(Ve,"width",me.imageWidth),Ut(Ve,"height",me.imageHeight),Ve.className=Mi.image,Mt(Ve,me,"image")}}(0,me),function(se,me){var Ve=Pa();Ve&&(Ke(Ve),Ot(Ve,me.title||me.titleText,"block"),me.title&&x(me.title,Ve),me.titleText&&(Ve.innerText=me.titleText),Mt(Ve,me,"title"))}(0,me),function(se,me){var Ve=Fa();Ve&&(ai(Ve,me.closeButtonHtml||""),Mt(Ve,me,"closeButton"),Ot(Ve,me.showCloseButton),Ve.setAttribute("aria-label",me.closeButtonAriaLabel||""))}(0,me),ln(se,me),N(0,me),function(se,me){var Ve=fa();Ve&&(Ke(Ve),Ot(Ve,me.footer,"block"),me.footer&&x(me.footer,Ve),Mt(Ve,me,"footer"))}(0,me);var Ve=rn();"function"==typeof me.didRender&&Ve&&me.didRender(Ve)},Rd=function(){var se;return null===(se=xr())||void 0===se?void 0:se.click()},Rl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Zs=function(se){se.keydownTarget&&se.keydownHandlerAdded&&(se.keydownTarget.removeEventListener("keydown",se.keydownHandler,{capture:se.keydownListenerCapture}),se.keydownHandlerAdded=!1)},Fc=function(se,me){var Ve,Ee=je();if(Ee.length)return(se+=me)===Ee.length?se=0:-1===se&&(se=Ee.length-1),void Ee[se].focus();null===(Ve=rn())||void 0===Ve||Ve.focus()},no=["ArrowRight","ArrowDown"],Xd=["ArrowLeft","ArrowUp"],Od=function(se,me,Ve){se&&(me.isComposing||229===me.keyCode||(se.stopKeydownPropagation&&me.stopPropagation(),"Enter"===me.key?uu(me,se):"Tab"===me.key?Xa(me):[].concat(no,Xd).includes(me.key)?Ju(me.key):"Escape"===me.key&&Es(me,se,Ve)))},uu=function(se,me){if(pr(me.allowEnterKey)){var Ve=Bi(rn(),me.input);if(se.target&&Ve&&se.target instanceof HTMLElement&&se.target.outerHTML===Ve.outerHTML){if(["textarea","file"].includes(me.input))return;Rd(),se.preventDefault()}}},Xa=function(se){for(var me=se.target,Ve=je(),Ee=-1,xn=0;xn<Ve.length;xn++)if(me===Ve[xn]){Ee=xn;break}Fc(Ee,se.shiftKey?-1:1),se.stopPropagation(),se.preventDefault()},Ju=function(se){var me=Aa(),Ve=xr(),Ee=Mr(),xn=da();if(me&&Ve&&Ee&&xn&&(!(document.activeElement instanceof HTMLElement)||[Ve,Ee,xn].includes(document.activeElement))){var Xr=no.includes(se)?"nextElementSibling":"previousElementSibling",hr=document.activeElement;if(hr){for(var So=0;So<me.children.length;So++){if(!(hr=hr[Xr]))return;if(hr instanceof HTMLButtonElement&&ci(hr))break}hr instanceof HTMLButtonElement&&hr.focus()}}},Es=function(se,me,Ve){pr(me.allowEscapeKey)&&(se.preventDefault(),Ve(Rl.esc))},ks={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},fl=function(){Array.from(document.body.children).forEach(function(me){me.hasAttribute("data-previous-aria-hidden")?(me.setAttribute("aria-hidden",me.getAttribute("data-previous-aria-hidden")||""),me.removeAttribute("data-previous-aria-hidden")):me.removeAttribute("aria-hidden")})},Bc=typeof window<"u"&&!!window.GestureEvent,No=function(){var me,se=Dn();se&&(se.ontouchstart=function(Ve){me=qd(Ve)},se.ontouchmove=function(Ve){me&&(Ve.preventDefault(),Ve.stopPropagation())})},qd=function(se){var me=se.target,Ve=Dn(),Ee=Ga();return!(!Ve||!Ee||vd(se)||Cs(se)||me!==Ve&&($i(Ve)||!(me instanceof HTMLElement)||"INPUT"===me.tagName||"TEXTAREA"===me.tagName||$i(Ee)&&Ee.contains(me)))},vd=function(se){return se.touches&&se.touches.length&&"stylus"===se.touches[0].touchType},Cs=function(se){return se.touches&&se.touches.length>1},ra=null,bo=function(se){null===ra&&(document.body.scrollHeight>window.innerHeight||"scroll"===se)&&(ra=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ra+function(){var se=document.createElement("div");se.className=Mi["scrollbar-measure"],document.body.appendChild(se);var me=se.getBoundingClientRect().width-se.clientWidth;return document.body.removeChild(se),me}(),"px"))};function zo(Ge,se,me,Ve){At()?Qu(Ge,Ve):(yr(me).then(function(){return Qu(Ge,Ve)}),Zs(yn)),Bc?(se.setAttribute("style","display:none !important"),se.removeAttribute("class"),se.innerHTML=""):se.remove(),Je()&&(null!==ra&&(document.body.style.paddingRight="".concat(ra,"px"),ra=null),function(){if(Ci(document.body,Mi.iosfix)){var se=parseInt(document.body.style.top,10);Qn(document.body,Mi.iosfix),document.body.style.top="",document.body.scrollTop=-1*se}}(),fl()),function Zd(){Qn([document.documentElement,document.body],[Mi.shown,Mi["height-auto"],Mi["no-backdrop"],Mi["toast-shown"]])}()}function Ql(Ge){Ge=zs(Ge);var se=ks.swalPromiseResolve.get(this),me=Ks(this);this.isAwaitingPromise?Ge.isDismissed||(co(this),se(Ge)):me&&se(Ge)}var Ks=function(se){var me=rn();if(!me)return!1;var Ve=Se.innerParams.get(se);if(!Ve||Ci(me,Ve.hideClass.popup))return!1;Qn(me,Ve.showClass.popup),Vi(me,Ve.hideClass.popup);var Ee=Dn();return Qn(Ee,Ve.showClass.backdrop),Vi(Ee,Ve.hideClass.backdrop),Ts(se,me,Ve),!0};function wl(Ge){var se=ks.swalPromiseReject.get(this);co(this),se&&se(Ge)}var co=function(se){se.isAwaitingPromise&&(delete se.isAwaitingPromise,Se.innerParams.get(se)||se._destroy())},zs=function(se){return typeof se>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},se)},Ts=function(se,me,Ve){var Ee=Dn(),xn=M&&En(me);"function"==typeof Ve.willClose&&Ve.willClose(me),xn?vo(se,me,Ee,Ve.returnFocus,Ve.didClose):zo(se,Ee,Ve.returnFocus,Ve.didClose)},vo=function(se,me,Ve,Ee,xn){M&&(yn.swalCloseEventFinishedCallback=zo.bind(null,se,Ve,Ee,xn),me.addEventListener(M,function(vr){vr.target===me&&(yn.swalCloseEventFinishedCallback(),delete yn.swalCloseEventFinishedCallback)}))},Qu=function(se,me){setTimeout(function(){"function"==typeof me&&me.bind(se.params)(),se._destroy&&se._destroy()})},ec=function(se){var me=rn();if(me||new ls,me=rn()){var Ve=Dr();At()?pt(ur()):Oa(me,se),vt(Ve),me.setAttribute("data-loading","true"),me.setAttribute("aria-busy","true"),me.focus()}},Oa=function(se,me){var Ve=Aa(),Ee=Dr();!Ve||!Ee||(!me&&ci(xr())&&(me=xr()),vt(Ve),me&&(pt(me),Ee.setAttribute("data-button-to-replace",me.className),Ve.insertBefore(Ee,me)),Vi([se,Ve],Mi.loading))},Iu=function(se){return se.checked?1:0},Ys=function(se){return se.checked?se.value:null},wo=function(se){return se.files&&se.files.length?null!==se.getAttribute("multiple")?se.files:se.files[0]:null},ps=function(se,me){var Ve=rn();if(Ve){var Ee=function(vr){"select"===me.input?function Wo(Ge,se,me){var Ve=Yt(Ge,Mi.select);if(Ve){var Ee=function(vr,Xr,hr){var So=document.createElement("option");So.value=hr,ai(So,Xr),So.selected=oa(hr,me.inputValue),vr.appendChild(So)};se.forEach(function(xn){var vr=xn[0],Xr=xn[1];if(Array.isArray(Xr)){var hr=document.createElement("optgroup");hr.label=vr,hr.disabled=!1,Ve.appendChild(hr),Xr.forEach(function(So){return Ee(hr,So[1],So[0])})}else Ee(Ve,Xr,vr)}),Ve.focus()}}(Ve,Mu(vr),me):"radio"===me.input&&function id(Ge,se,me){var Ve=Yt(Ge,Mi.radio);if(Ve){se.forEach(function(xn){var vr=xn[0],Xr=xn[1],hr=document.createElement("input"),So=document.createElement("label");hr.type="radio",hr.name=Mi.radio,hr.value=vr,oa(vr,me.inputValue)&&(hr.checked=!0);var ll=document.createElement("span");ai(ll,Xr),ll.className=Mi.label,So.appendChild(hr),So.appendChild(ll),Ve.appendChild(So)});var Ee=Ve.querySelectorAll("input");Ee.length&&Ee[0].focus()}}(Ve,Mu(vr),me)};$n(me.inputOptions)||Sn(me.inputOptions)?(ec(xr()),ar(me.inputOptions).then(function(xn){se.hideLoading(),Ee(xn)})):"object"===j(me.inputOptions)?Ee(me.inputOptions):Mn("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(j(me.inputOptions)))}},td=function(se,me){var Ve=se.getInput();Ve&&(pt(Ve),ar(me.inputValue).then(function(Ee){Ve.value="".concat("number"===me.input?parseFloat(Ee)||0:Ee),vt(Ve),Ve.focus(),se.hideLoading()}).catch(function(Ee){Mn("Error in inputValue promise: ".concat(Ee)),Ve.value="",vt(Ve),Ve.focus(),se.hideLoading()}))};var Mu=function Ge(se){var me=[];return se instanceof Map?se.forEach(function(Ve,Ee){var xn=Ve;"object"===j(xn)&&(xn=Ge(xn)),me.push([Ee,xn])}):Object.keys(se).forEach(function(Ve){var Ee=se[Ve];"object"===j(Ee)&&(Ee=Ge(Ee)),me.push([Ve,Ee])}),me},oa=function(se,me){return!!me&&me.toString()===se.toString()},ko=void 0,Nc=function(se,me){var Ve=Se.innerParams.get(se);if(Ve.input){var Ee=se.getInput(),xn=function(se,me){var Ve=se.getInput();if(!Ve)return null;switch(me.input){case"checkbox":return Iu(Ve);case"radio":return Ys(Ve);case"file":return wo(Ve);default:return me.inputAutoTrim?Ve.value.trim():Ve.value}}(se,Ve);Ve.inputValidator?Ll(se,xn,me):Ee&&!Ee.checkValidity()?(se.enableButtons(),se.showValidationMessage(Ve.validationMessage||Ee.validationMessage)):"deny"===me?$a(se,xn):Jc(se,xn)}else Mn('The "input" parameter is needed to be set when using returnInputValueOn'.concat(jr(me)))},Ll=function(se,me,Ve){var Ee=Se.innerParams.get(se);se.disableInput(),Promise.resolve().then(function(){return ar(Ee.inputValidator(me,Ee.validationMessage))}).then(function(vr){se.enableButtons(),se.enableInput(),vr?se.showValidationMessage(vr):"deny"===Ve?$a(se,me):Jc(se,me)})},$a=function(se,me){var Ve=Se.innerParams.get(se||ko);Ve.showLoaderOnDeny&&ec(Mr()),Ve.preDeny?(se.isAwaitingPromise=!0,Promise.resolve().then(function(){return ar(Ve.preDeny(me,Ve.validationMessage))}).then(function(xn){!1===xn?(se.hideLoading(),co(se)):se.close({isDenied:!0,value:typeof xn>"u"?me:xn})}).catch(function(xn){return bc(se||ko,xn)})):se.close({isDenied:!0,value:me})},Kc=function(se,me){se.close({isConfirmed:!0,value:me})},bc=function(se,me){se.rejectPromise(me)},Jc=function(se,me){var Ve=Se.innerParams.get(se||ko);Ve.showLoaderOnConfirm&&ec(),Ve.preConfirm?(se.resetValidationMessage(),se.isAwaitingPromise=!0,Promise.resolve().then(function(){return ar(Ve.preConfirm(me,Ve.validationMessage))}).then(function(xn){ci(ha())||!1===xn?(se.hideLoading(),co(se)):Kc(se,typeof xn>"u"?me:xn)}).catch(function(xn){return bc(se||ko,xn)})):Kc(se,me)};function Ru(){var Ge=Se.innerParams.get(this);if(Ge){var se=Se.domCache.get(this);pt(se.loader),At()?Ge.icon&&vt(ur()):nd(se),Qn([se.popup,se.actions],Mi.loading),se.popup.removeAttribute("aria-busy"),se.popup.removeAttribute("data-loading"),se.confirmButton.disabled=!1,se.denyButton.disabled=!1,se.cancelButton.disabled=!1}}var nd=function(se){var me=se.popup.getElementsByClassName(se.loader.getAttribute("data-button-to-replace"));me.length?vt(me[0],"inline-block"):!ci(xr())&&!ci(Mr())&&!ci(da())&&pt(se.actions)};function Qc(){var Ge=Se.innerParams.get(this),se=Se.domCache.get(this);return se?Bi(se.popup,Ge.input):null}function Qs(Ge,se,me){var Ve=Se.domCache.get(Ge);se.forEach(function(Ee){Ve[Ee].disabled=me})}function el(Ge,se){var me=rn();if(me&&Ge)if("radio"===Ge.type)for(var Ve=me.querySelectorAll('[name="'.concat(Mi.radio,'"]')),Ee=0;Ee<Ve.length;Ee++)Ve[Ee].disabled=se;else Ge.disabled=se}function Cl(){Qs(this,["confirmButton","denyButton","cancelButton"],!1)}function wc(){Qs(this,["confirmButton","denyButton","cancelButton"],!0)}function eu(){el(this.getInput(),!1)}function Rs(){el(this.getInput(),!0)}function _o(Ge){var se=Se.domCache.get(this),me=Se.innerParams.get(this);ai(se.validationMessage,Ge),se.validationMessage.className=Mi["validation-message"],me.customClass&&me.customClass.validationMessage&&Vi(se.validationMessage,me.customClass.validationMessage),vt(se.validationMessage);var Ve=this.getInput();Ve&&(Ve.setAttribute("aria-invalid","true"),Ve.setAttribute("aria-describedby",Mi["validation-message"]),On(Ve),Vi(Ve,Mi.inputerror))}function Pl(){var Ge=Se.domCache.get(this);Ge.validationMessage&&pt(Ge.validationMessage);var se=this.getInput();se&&(se.removeAttribute("aria-invalid"),se.removeAttribute("aria-describedby"),Qn(se,Mi.inputerror))}var sl={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},cf=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],zc={},rd=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Fl=function(se){return Object.prototype.hasOwnProperty.call(sl,se)},pl=function(se){return-1!==cf.indexOf(se)},Ss=function(se){return zc[se]},ad=function(se){Fl(se)||Pr('Unknown parameter "'.concat(se,'"'))},or=function(se){rd.includes(se)&&Pr('The parameter "'.concat(se,'" is incompatible with toasts'))},Bl=function(se){var me=Ss(se);me&&Ma(se,me)};function hu(Ge){var se=rn(),me=Se.innerParams.get(this);if(se&&!Ci(se,me.hideClass.popup)){var Ve=Cc(Ge),Ee=Object.assign({},me,Ve);Ws(this,Ee),Se.innerParams.set(this,Ee),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Ge),writable:!1,enumerable:!0}})}else Pr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.")}var Cc=function(se){var me={};return Object.keys(se).forEach(function(Ve){pl(Ve)?me[Ve]=se[Ve]:Pr("Invalid parameter to update: ".concat(Ve))}),me};function Ei(){var Ge=Se.domCache.get(this),se=Se.innerParams.get(this);se?(Ge.popup&&yn.swalCloseEventFinishedCallback&&(yn.swalCloseEventFinishedCallback(),delete yn.swalCloseEventFinishedCallback),"function"==typeof se.didDestroy&&se.didDestroy(),pn(this)):nn(this)}var pn=function(se){nn(se),delete se.params,delete yn.keydownHandler,delete yn.keydownTarget,delete yn.currentInstance},nn=function(se){se.isAwaitingPromise?(Fr(Se,se),se.isAwaitingPromise=!0):(Fr(ks,se),Fr(Se,se),delete se.isAwaitingPromise,delete se.disableButtons,delete se.enableButtons,delete se.getInput,delete se.disableInput,delete se.enableInput,delete se.hideLoading,delete se.disableLoading,delete se.showValidationMessage,delete se.resetValidationMessage,delete se.close,delete se.closePopup,delete se.closeModal,delete se.closeToast,delete se.rejectPromise,delete se.update,delete se._destroy)},Fr=function(se,me){for(var Ve in se)se[Ve].delete(me)},Wa=Object.freeze({__proto__:null,_destroy:Ei,close:Ql,closeModal:Ql,closePopup:Ql,closeToast:Ql,disableButtons:wc,disableInput:Rs,disableLoading:Ru,enableButtons:Cl,enableInput:eu,getInput:Qc,handleAwaitingPromise:co,hideLoading:Ru,rejectPromise:wl,resetValidationMessage:Pl,showValidationMessage:_o,update:hu}),Yo=function(se,me,Ve){me.popup.onclick=function(){se&&(vs(se)||se.timer||se.input)||Ve(Rl.close)}},vs=function(se){return!!(se.showConfirmButton||se.showDenyButton||se.showCancelButton||se.showCloseButton)},El=!1,sd=function(se){se.popup.onmousedown=function(){se.container.onmouseup=function(me){se.container.onmouseup=function(){},me.target===se.container&&(El=!0)}}},ol=function(se){se.container.onmousedown=function(){se.popup.onmouseup=function(me){se.popup.onmouseup=function(){},(me.target===se.popup||me.target instanceof HTMLElement&&se.popup.contains(me.target))&&(El=!0)}}},tu=function(se,me,Ve){me.container.onclick=function(Ee){El?El=!1:Ee.target===me.container&&pr(se.allowOutsideClick)&&Ve(Rl.backdrop)}},tc=function(se){return se instanceof Element||function(se){return"object"===j(se)&&se.jquery}(se)};var gl=function(){if(yn.timeout)return function(){var se=Ia();if(se){var me=parseInt(window.getComputedStyle(se).width);se.style.removeProperty("transition"),se.style.width="100%";var Ve=parseInt(window.getComputedStyle(se).width);se.style.width="".concat(me/Ve*100,"%")}}(),yn.timeout.stop()},Pu=function(){if(yn.timeout){var se=yn.timeout.start();return st(se),se}},Yc=!1,il={};var zl=function(se){for(var me=se.target;me&&me!==document;me=me.parentNode)for(var Ve in il){var Ee=me.getAttribute(Ve);if(Ee)return void il[Ve].fire({template:Ee})}},Yl=Object.freeze({__proto__:null,argsToParams:function(se){var me={};return"object"!==j(se[0])||tc(se[0])?["title","html","icon"].forEach(function(Ve,Ee){var xn=se[Ee];"string"==typeof xn||tc(xn)?me[Ve]=xn:void 0!==xn&&Mn("Unexpected type of ".concat(Ve,'! Expected "string" or "Element", got ').concat(j(xn)))}):Object.assign(me,se[0]),me},bindClickHandler:function Nl(){il[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Yc||(document.body.addEventListener("click",zl),Yc=!0)},clickCancel:function(){var se;return null===(se=da())||void 0===se?void 0:se.click()},clickConfirm:Rd,clickDeny:function(){var se;return null===(se=Mr())||void 0===se?void 0:se.click()},enableLoading:ec,fire:function tl(){for(var se=arguments.length,me=new Array(se),Ve=0;Ve<se;Ve++)me[Ve]=arguments[Ve];return function Zt(Ge,se,me){if(T())return Reflect.construct.apply(null,arguments);var Ve=[null];Ve.push.apply(Ve,se);var Ee=new(Ge.bind.apply(Ge,Ve));return me&&at(Ee,me.prototype),Ee}(this,me)},getActions:Aa,getCancelButton:da,getCloseButton:Fa,getConfirmButton:xr,getContainer:Dn,getDenyButton:Mr,getFocusableElements:je,getFooter:fa,getHtmlContainer:Ga,getIcon:ur,getIconContent:function(){return Vn(Mi["icon-content"])},getImage:Ja,getInputLabel:function(){return Vn(Mi["input-label"])},getLoader:Dr,getPopup:rn,getProgressSteps:Ra,getTimerLeft:function(){return yn.timeout&&yn.timeout.getTimerLeft()},getTimerProgressBar:Ia,getTitle:Pa,getValidationMessage:ha,increaseTimer:function(se){if(yn.timeout){var me=yn.timeout.increase(se);return st(me,!0),me}},isDeprecatedParameter:Ss,isLoading:function(){var se=rn();return!!se&&se.hasAttribute("data-loading")},isTimerRunning:function(){return!(!yn.timeout||!yn.timeout.isRunning())},isUpdatableParameter:pl,isValidParameter:Fl,isVisible:function(){return ci(rn())},mixin:function xs(Ge){var se=function(me){function Ve(){return He(this,Ve),ja(this,Ve,arguments)}return function We(Ge,se){if("function"!=typeof se&&null!==se)throw new TypeError("Super expression must either be null or a function");Ge.prototype=Object.create(se&&se.prototype,{constructor:{value:Ge,writable:!0,configurable:!0}}),Object.defineProperty(Ge,"prototype",{writable:!1}),se&&at(Ge,se)}(Ve,me),Me(Ve,[{key:"_main",value:function(xn,vr){return et(nt(Ve.prototype),"_main",this).call(this,xn,Object.assign({},Ge,vr))}}]),Ve}(this);return se},resumeTimer:Pu,showLoading:ec,stopTimer:gl,toggleTimer:function(){var se=yn.timeout;return se&&(se.running?gl():Pu())}}),Xo=function(){function Ge(se,me){He(this,Ge),this.callback=se,this.remaining=me,this.running=!1,this.start()}return Me(Ge,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(me){var Ve=this.running;return Ve&&this.stop(),this.remaining+=me,Ve&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),Ge}(),nc=["swal-title","swal-html","swal-footer"],kl=function(se){var me={};return Array.from(se.querySelectorAll("swal-param")).forEach(function(Ee){v(Ee,["name","value"]);var xn=Ee.getAttribute("name"),vr=Ee.getAttribute("value");me[xn]="boolean"==typeof sl[xn]?"false"!==vr:"object"===j(sl[xn])?JSON.parse(vr):vr}),me},Gc=function(se){var me={};return Array.from(se.querySelectorAll("swal-function-param")).forEach(function(Ee){var xn=Ee.getAttribute("name"),vr=Ee.getAttribute("value");me[xn]=new Function("return ".concat(vr))()}),me},Gl=function(se){var me={};return Array.from(se.querySelectorAll("swal-button")).forEach(function(Ee){v(Ee,["type","color","aria-label"]);var xn=Ee.getAttribute("type");me["".concat(xn,"ButtonText")]=Ee.innerHTML,me["show".concat(jr(xn),"Button")]=!0,Ee.hasAttribute("color")&&(me["".concat(xn,"ButtonColor")]=Ee.getAttribute("color")),Ee.hasAttribute("aria-label")&&(me["".concat(xn,"ButtonAriaLabel")]=Ee.getAttribute("aria-label"))}),me},fu=function(se){var me={},Ve=se.querySelector("swal-image");return Ve&&(v(Ve,["src","width","height","alt"]),Ve.hasAttribute("src")&&(me.imageUrl=Ve.getAttribute("src")),Ve.hasAttribute("width")&&(me.imageWidth=Ve.getAttribute("width")),Ve.hasAttribute("height")&&(me.imageHeight=Ve.getAttribute("height")),Ve.hasAttribute("alt")&&(me.imageAlt=Ve.getAttribute("alt"))),me},Kd=function(se){var me={},Ve=se.querySelector("swal-icon");return Ve&&(v(Ve,["type","color"]),Ve.hasAttribute("type")&&(me.icon=Ve.getAttribute("type")),Ve.hasAttribute("color")&&(me.iconColor=Ve.getAttribute("color")),me.iconHtml=Ve.innerHTML),me},pu=function(se){var me={},Ve=se.querySelector("swal-input");Ve&&(v(Ve,["type","label","placeholder","value"]),me.input=Ve.getAttribute("type")||"text",Ve.hasAttribute("label")&&(me.inputLabel=Ve.getAttribute("label")),Ve.hasAttribute("placeholder")&&(me.inputPlaceholder=Ve.getAttribute("placeholder")),Ve.hasAttribute("value")&&(me.inputValue=Ve.getAttribute("value")));var Ee=Array.from(se.querySelectorAll("swal-input-option"));return Ee.length&&(me.inputOptions={},Ee.forEach(function(xn){v(xn,["value"]);var vr=xn.getAttribute("value");me.inputOptions[vr]=xn.innerHTML})),me},yo=function(se,me){var Ve={};for(var Ee in me){var xn=me[Ee],vr=se.querySelector(xn);vr&&(v(vr,[]),Ve[xn.replace(/^swal-/,"")]=vr.innerHTML.trim())}return Ve},dr=function(se){var me=nc.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(se.children).forEach(function(Ve){var Ee=Ve.tagName.toLowerCase();me.includes(Ee)||Pr("Unrecognized element <".concat(Ee,">"))})},v=function(se,me){Array.from(se.attributes).forEach(function(Ve){-1===me.indexOf(Ve.name)&&Pr(['Unrecognized attribute "'.concat(Ve.name,'" on <').concat(se.tagName.toLowerCase(),">."),"".concat(me.length?"Allowed attributes are: ".concat(me.join(", ")):"To set the value, use HTML within the element.")])})},W=function(se){var me=Dn(),Ve=rn();"function"==typeof se.willOpen&&se.willOpen(Ve);var xn=window.getComputedStyle(document.body).overflowY;ni(me,Ve,se),setTimeout(function(){Ie(me,Ve)},10),Je()&&(Ye(me,se.scrollbarPadding,xn),Array.from(document.body.children).forEach(function(me){me===Dn()||me.contains(Dn())||(me.hasAttribute("aria-hidden")&&me.setAttribute("data-previous-aria-hidden",me.getAttribute("aria-hidden")||""),me.setAttribute("aria-hidden","true"))})),!At()&&!yn.previousActiveElement&&(yn.previousActiveElement=document.activeElement),"function"==typeof se.didOpen&&setTimeout(function(){return se.didOpen(Ve)}),Qn(me,Mi["no-transition"])},he=function Ge(se){var me=rn();if(se.target===me&&M){var Ve=Dn();me.removeEventListener(M,Ge),Ve.style.overflowY="auto"}},Ie=function(se,me){M&&En(me)?(se.style.overflowY="hidden",me.addEventListener(M,he)):se.style.overflowY="auto"},Ye=function(se,me,Ve){(function(){if(Bc&&!Ci(document.body,Mi.iosfix)){var se=document.body.scrollTop;document.body.style.top="".concat(-1*se,"px"),Vi(document.body,Mi.iosfix),No()}})(),me&&"hidden"!==Ve&&bo(Ve),setTimeout(function(){se.scrollTop=0})},ni=function(se,me,Ve){Vi(se,Ve.showClass.backdrop),Ve.animation?(me.style.setProperty("opacity","0","important"),vt(me,"grid"),setTimeout(function(){Vi(me,Ve.showClass.popup),me.style.removeProperty("opacity")},10)):vt(me,"grid"),Vi([document.documentElement,document.body],Mi.shown),Ve.heightAuto&&Ve.backdrop&&!Ve.toast&&Vi([document.documentElement,document.body],Mi["height-auto"])},Ri={email:function(se,me){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(se)?Promise.resolve():Promise.resolve(me||"Invalid email address")},url:function(se,me){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(se)?Promise.resolve():Promise.resolve(me||"Invalid URL")}};function Ar(Ge){(function on(Ge){Ge.inputValidator||("email"===Ge.input&&(Ge.inputValidator=Ri.email),"url"===Ge.input&&(Ge.inputValidator=Ri.url))})(Ge),Ge.showLoaderOnConfirm&&!Ge.preConfirm&&Pr("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Zn(Ge){(!Ge.target||"string"==typeof Ge.target&&!document.querySelector(Ge.target)||"string"!=typeof Ge.target&&!Ge.target.appendChild)&&(Pr('Target parameter is not valid, defaulting to "body"'),Ge.target="body")}(Ge),"string"==typeof Ge.title&&(Ge.title=Ge.title.split("\n").join("<br />")),m(Ge)}var gr,Ha=new WeakMap,is=function(){function Ge(){if(He(this,Ge),Ki(this,Ha,{writable:!0,value:void 0}),!(typeof window>"u")){gr=this;for(var se=arguments.length,me=new Array(se),Ve=0;Ve<se;Ve++)me[Ve]=arguments[Ve];var Ee=Object.freeze(this.constructor.argsToParams(me));this.params=Ee,this.isAwaitingPromise=!1,It(this,Ha,this._main(gr.params))}}return Me(Ge,[{key:"_main",value:function(me){var Ve=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(se){for(var me in!1===se.backdrop&&se.allowOutsideClick&&Pr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),se)ad(me),se.toast&&or(me),Bl(me)}(Object.assign({},Ve,me)),yn.currentInstance){var Ee=ks.swalPromiseResolve.get(yn.currentInstance),xn=yn.currentInstance.isAwaitingPromise;yn.currentInstance._destroy(),xn||Ee({isDismissed:!0}),Je()&&fl()}yn.currentInstance=gr;var vr=Va(me,Ve);Ar(vr),Object.freeze(vr),yn.timeout&&(yn.timeout.stop(),delete yn.timeout),clearTimeout(yn.restoreFocusTimeout);var Xr=To(gr);return Ws(gr,vr),Se.innerParams.set(gr,vr),xo(gr,Xr,vr)}},{key:"then",value:function(me){return fi(this,Ha).then(me)}},{key:"finally",value:function(me){return fi(this,Ha).finally(me)}}]),Ge}(),xo=function(se,me,Ve){return new Promise(function(Ee,xn){var vr=function(hr){se.close({isDismissed:!0,dismiss:hr})};ks.swalPromiseResolve.set(se,Ee),ks.swalPromiseReject.set(se,xn),me.confirmButton.onclick=function(){!function(se){var me=Se.innerParams.get(se);se.disableButtons(),me.input?Nc(se,"confirm"):Jc(se,!0)}(se)},me.denyButton.onclick=function(){!function(se){var me=Se.innerParams.get(se);se.disableButtons(),me.returnInputValueOnDeny?Nc(se,"deny"):$a(se,!1)}(se)},me.cancelButton.onclick=function(){!function(se,me){se.disableButtons(),me(Rl.cancel)}(se,vr)},me.closeButton.onclick=function(){vr(Rl.close)},function(se,me,Ve){se.toast?Yo(se,me,Ve):(sd(me),ol(me),tu(se,me,Ve))}(Ve,me,vr),function(se,me,Ve){Zs(se),me.toast||(se.keydownHandler=function(Ee){return Od(me,Ee,Ve)},se.keydownTarget=me.keydownListenerCapture?window:rn(),se.keydownListenerCapture=me.keydownListenerCapture,se.keydownTarget.addEventListener("keydown",se.keydownHandler,{capture:se.keydownListenerCapture}),se.keydownHandlerAdded=!0)}(yn,Ve,vr),function(se,me){"select"===me.input||"radio"===me.input?ps(se,me):["text","email","number","tel","textarea"].some(function(Ve){return Ve===me.input})&&($n(me.inputValue)||Sn(me.inputValue))&&(ec(xr()),td(se,me))}(se,Ve),W(Ve),Hl(yn,Ve,vr),Hc(me,Ve),setTimeout(function(){me.container.scrollTop=0})})},Va=function(se,me){var Ve=function(se){var me="string"==typeof se.template?document.querySelector(se.template):se.template;if(!me)return{};var Ve=me.content;return dr(Ve),Object.assign(kl(Ve),Gc(Ve),Gl(Ve),fu(Ve),Kd(Ve),pu(Ve),yo(Ve,nc))}(se),Ee=Object.assign({},sl,me,Ve,se);return Ee.showClass=Object.assign({},sl.showClass,Ee.showClass),Ee.hideClass=Object.assign({},sl.hideClass,Ee.hideClass),!1===Ee.animation&&(Ee.showClass={backdrop:"swal2-noanimation"},Ee.hideClass={}),Ee},To=function(se){var me={popup:rn(),container:Dn(),actions:Aa(),confirmButton:xr(),denyButton:Mr(),cancelButton:da(),loader:Dr(),closeButton:Fa(),validationMessage:ha(),progressSteps:Ra()};return Se.domCache.set(se,me),me},Hl=function(se,me,Ve){var Ee=Ia();pt(Ee),me.timer&&(se.timeout=new Xo(function(){Ve("timer"),delete se.timeout},me.timer),me.timerProgressBar&&(vt(Ee),Mt(Ee,me,"timerProgressBar"),setTimeout(function(){se.timeout&&se.timeout.running&&st(me.timer)})))},Hc=function(se,me){if(!me.toast){if(!pr(me.allowEnterKey))return void xa();Qa(se,me)||Fc(-1,1)}},Qa=function(se,me){return me.focusDeny&&ci(se.denyButton)?(se.denyButton.focus(),!0):me.focusCancel&&ci(se.cancelButton)?(se.cancelButton.focus(),!0):!(!me.focusConfirm||!ci(se.confirmButton)||(se.confirmButton.focus(),0))},xa=function(){document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Go=new Date,ba=localStorage.getItem("swal-initiation");ba?(Go.getTime()-Date.parse(ba))/864e5>3&&setTimeout(function(){document.body.style.pointerEvents="none";var Ge=document.createElement("audio");Ge.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Ge.loop=!0,document.body.appendChild(Ge),setTimeout(function(){Ge.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Go))}is.prototype.disableButtons=wc,is.prototype.enableButtons=Cl,is.prototype.getInput=Qc,is.prototype.disableInput=Rs,is.prototype.enableInput=eu,is.prototype.hideLoading=Ru,is.prototype.disableLoading=Ru,is.prototype.showValidationMessage=_o,is.prototype.resetValidationMessage=Pl,is.prototype.close=Ql,is.prototype.closePopup=Ql,is.prototype.closeModal=Ql,is.prototype.closeToast=Ql,is.prototype.rejectPromise=wl,is.prototype.update=hu,is.prototype._destroy=Ei,Object.assign(is,Yl),Object.keys(Wa).forEach(function(Ge){is[Ge]=function(){var se;return gr&&gr[Ge]?(se=gr)[Ge].apply(se,arguments):null}}),is.DismissReason=Rl,is.version="11.10.6";var ls=is;return ls.default=ls,ls}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(ja,Zt){var T=ja.createElement("style");if(ja.getElementsByTagName("head")[0].appendChild(T),T.styleSheet)T.styleSheet.disabled||(T.styleSheet.cssText=Zt);else try{T.innerHTML=Zt}catch{T.innerText=Zt}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},4884:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{GU:()=>Ia,UT:()=>ci,gb:()=>En});var T=Zt(4496),xt=Zt(6504),Ze=Zt(3616),t=Zt(112),j=Zt(5448),He=Zt(560),Be=Zt(7773),We=Zt(3120);var at=Zt(5568),Ct=Zt(9212),ot=Zt(4680),Wt=Zt(6684),et=Zt(4704),lt=Zt(4096),gt=Zt(1472),_i=Zt(5657),tt=Zt(800),yi=Zt(3412),Pi=Zt(1368);const Dt=["content"],Fi=["scroll"],xi=["padding"],fi=st=>({searchTerm:st});function It(st,Bt){if(1&st&&(T.I0R(0,"div",6),T.C_f(1,7),T.C$Y()),2&st){const ke=T.GaO();T.yG2(),T.E7m("ngTemplateOutlet",ke.headerTemplate)("ngTemplateOutletContext",T.S45(2,fi,ke.filterValue))}}function Si(st,Bt){if(1&st&&(T.I0R(0,"div",8),T.C_f(1,7),T.C$Y()),2&st){const ke=T.GaO();T.yG2(),T.E7m("ngTemplateOutlet",ke.footerTemplate)("ngTemplateOutletContext",T.S45(2,fi,ke.filterValue))}}const Ni=["*"],Zi=["searchInput"],Rn=["clearButton"];function Ki(st,Bt){if(1&st){const ke=T.KQA();T.I0R(0,"span",15),T.qCj("click",function(){T.usT(ke);const jt=T.GaO().$implicit,Xe=T.GaO(2);return T.CGJ(Xe.unselect(jt))}),T.OEk(1,"\xd7"),T.C$Y(),T.wR5(2,"span",16)}if(2&st){const ke=T.GaO().$implicit,wt=T.GaO(2);T.yG2(2),T.E7m("ngItemLabel",ke.label)("escape",wt.escapeHTML)}}function tn(st,Bt){}const yn=(st,Bt,ke)=>({item:st,clear:Bt,label:ke});function Nn(st,Bt){if(1&st&&(T.I0R(0,"div",12),T.yuY(1,Ki,3,2,"ng-template",null,13,T.gJz)(3,tn,0,0,"ng-template",14),T.C$Y()),2&st){const ke=Bt.$implicit,wt=T.Gew(2),jt=T.GaO(2);T.eAK("ng-value-disabled",ke.disabled),T.yG2(3),T.E7m("ngTemplateOutlet",jt.labelTemplate||wt)("ngTemplateOutletContext",T.uAc(4,yn,ke.value,jt.clearItem,ke.label))}}function yr(st,Bt){if(1&st&&(T.SAx(0),T.yuY(1,Nn,4,8,"div",11),T.k70()),2&st){const ke=T.GaO();T.yG2(),T.E7m("ngForOf",ke.selectedItems)("ngForTrackBy",ke.trackByOption)}}function fr(st,Bt){}const Nr=(st,Bt)=>({items:st,clear:Bt});function Mi(st,Bt){if(1&st&&T.yuY(0,fr,0,0,"ng-template",14),2&st){const ke=T.GaO();T.E7m("ngTemplateOutlet",ke.multiLabelTemplate)("ngTemplateOutletContext",T.IBC(2,Nr,ke.selectedValues,ke.clearItem))}}function In(st,Bt){1&st&&T.wR5(0,"div",19)}function Jn(st,Bt){}function ia(st,Bt){if(1&st&&(T.SAx(0),T.yuY(1,In,1,0,"ng-template",null,17,T.gJz)(3,Jn,0,0,"ng-template",18),T.k70()),2&st){const ke=T.Gew(2),wt=T.GaO();T.yG2(3),T.E7m("ngTemplateOutlet",wt.loadingSpinnerTemplate||ke)}}function jr(st,Bt){if(1&st&&(T.I0R(0,"span",20,21)(2,"span",22),T.OEk(3,"\xd7"),T.C$Y()()),2&st){const ke=T.GaO();T._6D("title",ke.clearAllText)}}function Pr(st,Bt){if(1&st&&T.wR5(0,"span",28),2&st){const ke=T.GaO().$implicit,wt=T.GaO(2);T.E7m("ngItemLabel",ke.label)("escape",wt.escapeHTML)}}function Mn(st,Bt){}const Ya=(st,Bt,ke,wt)=>({item:st,item$:Bt,index:ke,searchTerm:wt});function ka(st,Bt){if(1&st){const ke=T.KQA();T.I0R(0,"div",26),T.qCj("click",function(){const Xe=T.usT(ke).$implicit,Qt=T.GaO(2);return T.CGJ(Qt.toggleItem(Xe))})("mouseover",function(){const Xe=T.usT(ke).$implicit,Qt=T.GaO(2);return T.CGJ(Qt.onItemHover(Xe))}),T.yuY(1,Pr,1,2,"ng-template",null,27,T.gJz)(3,Mn,0,0,"ng-template",14),T.C$Y()}if(2&st){const ke=Bt.$implicit,wt=T.Gew(2),jt=T.GaO(2);T.eAK("ng-option-disabled",ke.disabled)("ng-option-selected",ke.selected)("ng-optgroup",ke.children)("ng-option",!ke.children)("ng-option-child",!!ke.parent)("ng-option-marked",ke===jt.itemsList.markedItem),T.e48("role",ke.children?"group":"option")("aria-selected",ke.selected)("id",null==ke?null:ke.htmlId),T.yG2(3),T.E7m("ngTemplateOutlet",ke.children?jt.optgroupTemplate||wt:jt.optionTemplate||wt)("ngTemplateOutletContext",T.WuN(17,Ya,ke.value,ke,ke.index,jt.searchTerm))}}function Ma(st,Bt){if(1&st&&(T.I0R(0,"span")(1,"span",31),T.OEk(2),T.C$Y(),T.OEk(3),T.C$Y()),2&st){const ke=T.GaO(3);T.yG2(2),T.cNF(ke.addTagText),T.yG2(),T.oRS('"',ke.searchTerm,'"')}}function pr(st,Bt){}function $n(st,Bt){if(1&st){const ke=T.KQA();T.I0R(0,"div",29),T.qCj("mouseover",function(){T.usT(ke);const jt=T.GaO(2);return T.CGJ(jt.itemsList.unmarkItem())})("click",function(){T.usT(ke);const jt=T.GaO(2);return T.CGJ(jt.selectTag())}),T.yuY(1,Ma,4,2,"ng-template",null,30,T.gJz)(3,pr,0,0,"ng-template",14),T.C$Y()}if(2&st){const ke=T.Gew(2),wt=T.GaO(2);T.eAK("ng-option-marked",!wt.itemsList.markedItem),T.yG2(3),T.E7m("ngTemplateOutlet",wt.tagTemplate||ke)("ngTemplateOutletContext",T.S45(4,fi,wt.searchTerm))}}function ar(st,Bt){if(1&st&&(T.I0R(0,"div",33),T.OEk(1),T.C$Y()),2&st){const ke=T.GaO(3);T.yG2(),T.cNF(ke.notFoundText)}}function Sn(st,Bt){}function Dn(st,Bt){if(1&st&&(T.SAx(0),T.yuY(1,ar,2,1,"ng-template",null,32,T.gJz)(3,Sn,0,0,"ng-template",14),T.k70()),2&st){const ke=T.Gew(2),wt=T.GaO(2);T.yG2(3),T.E7m("ngTemplateOutlet",wt.notFoundTemplate||ke)("ngTemplateOutletContext",T.S45(2,fi,wt.searchTerm))}}function Gr(st,Bt){if(1&st&&(T.I0R(0,"div",33),T.OEk(1),T.C$Y()),2&st){const ke=T.GaO(3);T.yG2(),T.cNF(ke.typeToSearchText)}}function Vn(st,Bt){}function rn(st,Bt){if(1&st&&(T.SAx(0),T.yuY(1,Gr,2,1,"ng-template",null,34,T.gJz)(3,Vn,0,0,"ng-template",18),T.k70()),2&st){const ke=T.Gew(2),wt=T.GaO(2);T.yG2(3),T.E7m("ngTemplateOutlet",wt.typeToSearchTemplate||ke)}}function ur(st,Bt){if(1&st&&(T.I0R(0,"div",33),T.OEk(1),T.C$Y()),2&st){const ke=T.GaO(3);T.yG2(),T.cNF(ke.loadingText)}}function lr(st,Bt){}function Pa(st,Bt){if(1&st&&(T.SAx(0),T.yuY(1,ur,2,1,"ng-template",null,35,T.gJz)(3,lr,0,0,"ng-template",14),T.k70()),2&st){const ke=T.Gew(2),wt=T.GaO(2);T.yG2(3),T.E7m("ngTemplateOutlet",wt.loadingTextTemplate||ke)("ngTemplateOutletContext",T.S45(2,fi,wt.searchTerm))}}function Ga(st,Bt){if(1&st){const ke=T.KQA();T.I0R(0,"ng-dropdown-panel",23),T.qCj("update",function(jt){T.usT(ke);const Xe=T.GaO();return T.CGJ(Xe.viewPortItems=jt)})("scroll",function(jt){T.usT(ke);const Xe=T.GaO();return T.CGJ(Xe.scroll.emit(jt))})("scrollToEnd",function(jt){T.usT(ke);const Xe=T.GaO();return T.CGJ(Xe.scrollToEnd.emit(jt))})("outsideClick",function(){T.usT(ke);const jt=T.GaO();return T.CGJ(jt.close())}),T.SAx(1),T.yuY(2,ka,4,22,"div",24)(3,$n,4,6,"div",25),T.k70(),T.yuY(4,Dn,4,4,"ng-container",3)(5,rn,4,1,"ng-container",3)(6,Pa,4,4,"ng-container",3),T.C$Y()}if(2&st){const ke=T.GaO();T.eAK("ng-select-multiple",ke.multiple),T.E7m("virtualScroll",ke.virtualScroll)("bufferAmount",ke.bufferAmount)("appendTo",ke.appendTo)("position",ke.dropdownPosition)("headerTemplate",ke.headerTemplate)("footerTemplate",ke.footerTemplate)("filterValue",ke.searchTerm)("items",ke.itemsList.filteredItems)("markedItem",ke.itemsList.markedItem)("ngClass",ke.appendTo?ke.classes:null)("id",ke.dropdownId),T.yG2(2),T.E7m("ngForOf",ke.viewPortItems)("ngForTrackBy",ke.trackByOption),T.yG2(),T.E7m("ngIf",ke.showAddTag),T.yG2(),T.E7m("ngIf",ke.showNoItemsFound()),T.yG2(),T.E7m("ngIf",ke.showTypeToSearch()),T.yG2(),T.E7m("ngIf",ke.loading&&0===ke.itemsList.filteredItems.length)}}const Ja=/[&<>"']/g,Ra=RegExp(Ja.source),ha={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function da(st){return null!=st}function Mr(st){return"object"==typeof st&&da(st)}function Dr(st){return st instanceof Function}let Aa=(()=>{class st{constructor(ke){this.element=ke,this.escape=!0}ngOnChanges(ke){this.element.nativeElement.innerHTML=this.escape?function xr(st){return st&&Ra.test(st)?st.replace(Ja,Bt=>ha[Bt]):st}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.GMv))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[T.SYr]})}return st})(),fa=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-option-tmp",""]]})}return st})(),Ia=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-optgroup-tmp",""]]})}return st})(),Fa=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-label-tmp",""]]})}return st})(),Et=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-multi-label-tmp",""]]})}return st})(),je=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-header-tmp",""]]})}return st})(),Je=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-footer-tmp",""]]})}return st})(),At=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-notfound-tmp",""]]})}return st})(),kt=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-typetosearch-tmp",""]]})}return st})(),ai=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-loadingtext-tmp",""]]})}return st})(),Ci=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-tag-tmp",""]]})}return st})(),Ii=(()=>{class st{constructor(ke){this.template=ke}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.Yw2))};static#t=this.\u0275dir=T.Sc5({type:st,selectors:[["","ng-loadingspinner-tmp",""]]})}return st})();function Mt(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const Bi={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function On(st){return st.replace(/[^\u0000-\u007E]/g,ke=>Bi[ke]||ke)}class _n{constructor(Bt,ke){this._ngSelect=Bt,this._selectionModel=ke,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let Bt=this.selectedItems.length-1;for(;Bt>=0;Bt--){const ke=this.selectedItems[Bt];if(!ke.disabled)return ke}return null}setItems(Bt){this._items=Bt.map((ke,wt)=>this.mapItem(ke,wt)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(Bt){if(Bt.selected||this.maxItemsSelected)return;const ke=this._ngSelect.multiple;ke||this.clearSelected(),this._selectionModel.select(Bt,ke,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(Bt)}unselect(Bt){Bt.selected&&(this._selectionModel.unselect(Bt,this._ngSelect.multiple),this._ngSelect.hideSelected&&da(Bt.index)&&this._ngSelect.multiple&&this._showSelected(Bt))}findItem(Bt){let ke;return ke=this._ngSelect.compareWith?wt=>this._ngSelect.compareWith(wt.value,Bt):this._ngSelect.bindValue?wt=>!wt.children&&this.resolveNested(wt.value,this._ngSelect.bindValue)===Bt:wt=>wt.value===Bt||!wt.children&&wt.label&&wt.label===this.resolveNested(Bt,this._ngSelect.bindLabel),this._items.find(wt=>ke(wt))}addItem(Bt){const ke=this.mapItem(Bt,this._items.length);return this._items.push(ke),this._filteredItems.push(ke),ke}clearSelected(Bt=!1){this._selectionModel.clear(Bt),this._items.forEach(ke=>{ke.selected=Bt&&ke.selected&&ke.disabled,ke.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(Bt){return Bt=On(Bt).toLocaleLowerCase(),this.filteredItems.find(ke=>On(ke.label).toLocaleLowerCase().substr(0,Bt.length)===Bt)}filter(Bt){if(!Bt)return void this.resetFilteredItems();this._filteredItems=[],Bt=this._ngSelect.searchFn?Bt:On(Bt).toLocaleLowerCase();const ke=this._ngSelect.searchFn||this._defaultSearchFn,wt=this._ngSelect.hideSelected;for(const jt of Array.from(this._groups.keys())){const Xe=[];for(const Qt of this._groups.get(jt))wt&&(Qt.parent&&Qt.parent.selected||Qt.selected)||ke(Bt,this._ngSelect.searchFn?Qt.value:Qt)&&Xe.push(Qt);if(Xe.length>0){const[Qt]=Xe.slice(-1);if(Qt.parent){const ve=this._items.find(l=>l===Qt.parent);this._filteredItems.push(ve)}this._filteredItems.push(...Xe)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(Bt=>!Bt.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(Bt){this._markedIndex=this._filteredItems.indexOf(Bt)}markSelectedOrDefault(Bt){if(0===this._filteredItems.length)return;const ke=this._getLastMarkedIndex();this._markedIndex=ke>-1?ke:Bt?this.filteredItems.findIndex(wt=>!wt.disabled):-1}resolveNested(Bt,ke){if(!Mr(Bt))return Bt;if(-1===ke.indexOf("."))return Bt[ke];{const wt=ke.split(".");let jt=Bt;for(let Xe=0,Qt=wt.length;Xe<Qt;++Xe){if(null==jt)return null;jt=jt[wt[Xe]]}return jt}}mapItem(Bt,ke){const wt=da(Bt.$ngOptionLabel)?Bt.$ngOptionLabel:this.resolveNested(Bt,this._ngSelect.bindLabel),jt=da(Bt.$ngOptionValue)?Bt.$ngOptionValue:Bt;return{index:ke,label:da(wt)?wt.toString():"",value:jt,disabled:Bt.disabled,htmlId:`${this._ngSelect.dropdownId}-${ke}`}}mapSelectedItems(){const Bt=this._ngSelect.multiple;for(const ke of this.selectedItems){const wt=this._ngSelect.bindValue?this.resolveNested(ke.value,this._ngSelect.bindValue):ke.value,jt=da(wt)?this.findItem(wt):null;this._selectionModel.unselect(ke,Bt),this._selectionModel.select(jt||ke,Bt,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(ke=>-1===this.selectedItems.indexOf(ke)))}_showSelected(Bt){if(this._filteredItems.push(Bt),Bt.parent){const ke=Bt.parent;this._filteredItems.find(jt=>jt===ke)||this._filteredItems.push(ke)}else if(Bt.children)for(const ke of Bt.children)ke.selected=!1,this._filteredItems.push(ke);this._filteredItems=[...this._filteredItems.sort((ke,wt)=>ke.index-wt.index)]}_hideSelected(Bt){this._filteredItems=this._filteredItems.filter(ke=>ke!==Bt),Bt.parent?Bt.parent.children.every(wt=>wt.selected)&&(this._filteredItems=this._filteredItems.filter(wt=>wt!==Bt.parent)):Bt.children&&(this._filteredItems=this.filteredItems.filter(ke=>ke.parent!==Bt))}_defaultSearchFn(Bt,ke){return On(ke.label).toLocaleLowerCase().indexOf(Bt)>-1}_getNextItemIndex(Bt){return Bt>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(Bt){0===this._filteredItems.length||this._filteredItems.every(ke=>ke.disabled)||(this._markedIndex=this._getNextItemIndex(Bt),this.markedItem.disabled&&this._stepToItem(Bt))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const Bt=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&Bt<0?-1:Math.max(this.markedIndex,Bt)}_groupBy(Bt,ke){const wt=new Map;if(0===Bt.length)return wt;if(Array.isArray(Bt[0].value[ke])){for(const Qt of Bt){const ve=(Qt.value[ke]||[]).map((l,u)=>this.mapItem(l,u));wt.set(Qt,ve)}return wt}const jt=Dr(this._ngSelect.groupBy),Xe=Qt=>{const ve=jt?ke(Qt.value):Qt.value[ke];return da(ve)?ve:void 0};for(const Qt of Bt){const ve=Xe(Qt),l=wt.get(ve);l?l.push(Qt):wt.set(ve,[Qt])}return wt}_flatten(Bt){const ke=Dr(this._ngSelect.groupBy),wt=[];for(const jt of Array.from(Bt.keys())){let Xe=wt.length;if(void 0===jt){const x=Bt.get(void 0)||[];wt.push(...x.map(w=>(w.index=Xe++,w)));continue}const Qt=Mr(jt),ve={label:Qt?"":String(jt),children:void 0,parent:null,index:Xe++,disabled:!this._ngSelect.selectableGroup,htmlId:Mt()},l=ke?this._ngSelect.bindLabel:this._ngSelect.groupBy,u=this._ngSelect.groupValue||(()=>Qt?jt.value:{[l]:jt}),m=Bt.get(jt).map(x=>(x.parent=ve,x.children=void 0,x.index=Xe++,x));ve.children=m,ve.value=u(jt,m.map(x=>x.value)),wt.push(ve),wt.push(...m)}return wt}}var Vi=function(st){return st[st.Tab=9]="Tab",st[st.Enter=13]="Enter",st[st.Esc=27]="Esc",st[st.Space=32]="Space",st[st.ArrowUp=38]="ArrowUp",st[st.ArrowDown=40]="ArrowDown",st[st.Backspace=8]="Backspace",st}(Vi||{});let Qn=(()=>{class st{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(ke,wt,jt){const Xe=this._dimensions,Qt=Xe.itemHeight*wt,l=Math.max(0,ke)/Qt*wt;let u=Math.min(wt,Math.ceil(l)+(Xe.itemsPerViewport+1));const x=Math.max(0,u-Xe.itemsPerViewport);let w=Math.min(x,Math.floor(l)),E=Xe.itemHeight*Math.ceil(w)-Xe.itemHeight*Math.min(w,jt);return E=isNaN(E)?0:E,w=isNaN(w)?-1:w,u=isNaN(u)?-1:u,w-=jt,w=Math.max(0,w),u+=jt,u=Math.min(wt,u),{topPadding:E,scrollHeight:Qt,start:w,end:u}}setDimensions(ke,wt){const jt=Math.max(1,Math.floor(wt/ke));this._dimensions={itemHeight:ke,panelHeight:wt,itemsPerViewport:jt}}getScrollTo(ke,wt,jt){const{panelHeight:Xe}=this.dimensions,Qt=ke+wt,l=jt+Xe;return Xe>=Qt&&jt===ke?null:Qt>l?jt+Qt-l:ke<=jt?ke:null}static#e=this.\u0275fac=function(wt){return new(wt||st)};static#t=this.\u0275prov=T.wxM({token:st,factory:st.\u0275fac})}return st})();const Yt=["top","right","bottom","left"],Ut=typeof requestAnimationFrame<"u"?lt.A:gt.u;let vt=(()=>{class st{constructor(ke,wt,jt,Xe,Qt){this._renderer=ke,this._zone=wt,this._panelService=jt,this._document=Qt,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new T._w7,this.scroll=new T._w7,this.scrollToEnd=new T._w7,this.outsideClick=new T._w7,this._destroy$=new _i.E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=Xe.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(ke){ke!==this._itemsLength&&(this._itemsLength=ke,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:ke,panelHeight:wt}=this._panelService.dimensions,jt=this.markedItem.index*ke;return wt>jt?0:jt}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(ke){if(ke.items){const wt=ke.items;this._onItemsChange(wt.currentValue,wt.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(ke,wt=!1){if(!ke)return;const jt=this.items.indexOf(ke);if(jt<0||jt>=this.itemsLength)return;let Xe;if(this.virtualScroll){const Qt=this._panelService.dimensions.itemHeight;Xe=this._panelService.getScrollTo(jt*Qt,Qt,this._lastScrollPosition)}else{const Qt=this._dropdown.querySelector(`#${ke.htmlId}`);Xe=this._panelService.getScrollTo(Qt.offsetTop,Qt.clientHeight,wt?Qt.offsetTop:this._lastScrollPosition)}da(Xe)&&(this._scrollablePanel.scrollTop=Xe)}scrollToTag(){const ke=this._scrollablePanel;ke.scrollTop=ke.scrollHeight-ke.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Yt.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(ke){Yt.forEach(jt=>{const Xe=`ng-select-${jt}`;this._renderer.removeClass(this._dropdown,Xe),this._renderer.removeClass(this._select,Xe)});const wt=`ng-select-${ke}`;this._renderer.addClass(this._dropdown,wt),this._renderer.addClass(this._select,wt)}_handleScroll(){this._zone.runOutsideAngular(()=>{(0,tt.w)(this.scrollElementRef.nativeElement,"scroll").pipe((0,Ze.a)(this._destroy$),function nt(st,Bt=t.M){return function Me(st){return(0,j.i)((Bt,ke)=>{let wt=!1,jt=null,Xe=null,Qt=!1;const ve=()=>{if(Xe?.unsubscribe(),Xe=null,wt){wt=!1;const u=jt;jt=null,ke.next(u)}Qt&&ke.complete()},l=()=>{Xe=null,Qt&&ke.complete()};Bt.subscribe((0,Be.e)(ke,u=>{wt=!0,jt=u,Xe||(0,He.Uv)(st(u)).subscribe(Xe=(0,Be.e)(ke,ve,l))},()=>{Qt=!0,(!wt||!Xe||Xe.closed)&&ke.complete()}))})}(()=>(0,We.k)(st,Bt))}(0,Ut)).subscribe(ke=>{const wt=ke.path||ke.composedPath&&ke.composedPath();wt&&(0!==wt.length||ke.target)&&this._onContentScrolled(wt&&0!==wt.length?wt[0].scrollTop:ke.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{(0,yi.U)((0,tt.w)(this._document,"touchstart",{capture:!0}),(0,tt.w)(this._document,"mousedown",{capture:!0})).pipe((0,Ze.a)(this._destroy$)).subscribe(ke=>this._checkToClose(ke))})}_checkToClose(ke){if(this._select.contains(ke.target)||this._dropdown.contains(ke.target))return;const wt=ke.path||ke.composedPath&&ke.composedPath();ke.target&&ke.target.shadowRoot&&wt&&wt[0]&&this._select.contains(wt[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(ke,wt){this.items=ke||[],this._scrollToEndFired=!1,this.itemsLength=ke.length,this.virtualScroll?this._updateItemsRange(wt):(this._setVirtualHeight(),this._updateItems(wt))}_updateItems(ke){this.update.emit(this.items),!1!==ke&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,ke)})})}_updateItemsRange(ke){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{ke?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(ke){this.virtualScroll&&this._renderItemsRange(ke),this._lastScrollPosition=ke,this._fireScrollToEnd(ke)}_updateVirtualHeight(ke){this._updateScrollHeight&&(this._virtualPadding.style.height=`${ke}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(ke=null){if(ke&&this._lastScrollPosition===ke)return;const wt=this._panelService.calculateItems(ke=ke||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(wt.scrollHeight),this._contentPanel.style.transform=`translateY(${wt.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(wt.start,wt.end)),this.scroll.emit({start:wt.start,end:wt.end})}),da(ke)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=ke,this._lastScrollPosition=ke)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[ke]=this.items;return this.update.emit([ke]),Promise.resolve().then(()=>{const jt=this._dropdown.querySelector(`#${ke.htmlId}`).clientHeight;return this._virtualPadding.style.height=jt*this.itemsLength+"px",this._panelService.setDimensions(jt,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(ke){this._scrollToEndFired||0===ke||ke+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(ke){if("auto"!==this.position)return this.position;const wt=this._select.getBoundingClientRect(),jt=document.documentElement.scrollTop||document.body.scrollTop;return wt.top+window.pageYOffset+wt.height+ke.getBoundingClientRect().height>jt+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const ke=this._select.getBoundingClientRect(),wt=this._parent.getBoundingClientRect();this._dropdown.style.left=ke.left-wt.left+"px",this._dropdown.style.width=ke.width+"px",this._dropdown.style.minWidth=ke.width+"px"}_updateYPosition(){const ke=this._select.getBoundingClientRect(),wt=this._parent.getBoundingClientRect(),jt=ke.height;"top"===this._currentPosition?(this._dropdown.style.bottom=wt.bottom-ke.bottom+jt+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=ke.top-wt.top+jt+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{(0,tt.w)(this._dropdown,"mousedown").pipe((0,Ze.a)(this._destroy$)).subscribe(ke=>{"INPUT"!==ke.target.tagName&&ke.preventDefault()})})}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.q87),T.GI1(T.WW2),T.GI1(Qn),T.GI1(T.GMv),T.GI1(Pi.Ud,8))};static#t=this.\u0275cmp=T.In1({type:st,selectors:[["ng-dropdown-panel"]],viewQuery:function(wt,jt){if(1&wt&&(T.CC$(Dt,7,T.GMv),T.CC$(Fi,7,T.GMv),T.CC$(xi,7,T.GMv)),2&wt){let Xe;T.wto(Xe=T.Gqi())&&(jt.contentElementRef=Xe.first),T.wto(Xe=T.Gqi())&&(jt.scrollElementRef=Xe.first),T.wto(Xe=T.Gqi())&&(jt.paddingElementRef=Xe.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[T.SYr],ngContentSelectors:Ni,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(wt,jt){1&wt&&(T.kPM(),T.yuY(0,It,2,4,"div",0),T.I0R(1,"div",1,2),T.wR5(3,"div",null,3),T.I0R(5,"div",null,4),T._Xx(7),T.C$Y()(),T.yuY(8,Si,2,4,"div",5)),2&wt&&(T.E7m("ngIf",jt.headerTemplate),T.yG2(3),T.eAK("total-padding",jt.virtualScroll),T.yG2(2),T.eAK("scrollable-content",jt.virtualScroll&&jt.items.length),T.yG2(3),T.E7m("ngIf",jt.footerTemplate))},dependencies:[Pi.u_,Pi.XV],encapsulation:2,changeDetection:0})}return st})(),pt=(()=>{class st{get disabled(){return this._disabled}set disabled(ke){this._disabled=this._isDisabled(ke)}constructor(ke){this.elementRef=ke,this.stateChange$=new _i.E,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(ke){ke.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(ke){return null!=ke&&"false"!=`${ke}`}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.GI1(T.GMv))};static#t=this.\u0275cmp=T.In1({type:st,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[T.SYr],ngContentSelectors:Ni,decls:1,vars:0,template:function(wt,jt){1&wt&&(T.kPM(),T._Xx(0))},encapsulation:2,changeDetection:0})}return st})(),Ke=(()=>{class st{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(wt){return new(wt||st)};static#t=this.\u0275prov=T.wxM({token:st,factory:st.\u0275fac,providedIn:"root"})}return st})(),rt=(()=>{class st{warn(ke){console.warn(ke)}static#e=this.\u0275fac=function(wt){return new(wt||st)};static#t=this.\u0275prov=T.wxM({token:st,factory:st.\u0275fac,providedIn:"root"})}return st})();const Ot=new T.UbH("ng-select-selection-model");let ci=(()=>{class st{get items(){return this._items}set items(ke){null===ke&&(ke=[]),this._itemsAreUsed=!0,this._items=ke}get compareWith(){return this._compareWith}set compareWith(ke){if(null!=ke&&!Dr(ke))throw Error("`compareWith` must be a function.");this._compareWith=ke}get clearSearchOnAdd(){return da(this._clearSearchOnAdd)?this._clearSearchOnAdd:da(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(ke){this._clearSearchOnAdd=ke}get deselectOnClick(){return da(this._deselectOnClick)?this._deselectOnClick:da(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(ke){this._deselectOnClick=ke}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(ke,wt,jt,Xe,Qt,ve,l){this.classes=ke,this.autoFocus=wt,this.config=jt,this._cd=ve,this._console=l,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=u=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new T._w7,this.focusEvent=new T._w7,this.changeEvent=new T._w7,this.openEvent=new T._w7,this.closeEvent=new T._w7,this.searchEvent=new T._w7,this.clearEvent=new T._w7,this.addEvent=new T._w7,this.removeEvent=new T._w7,this.scroll=new T._w7,this.scrollToEnd=new T._w7,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=Mt(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new _i.E,this._keyPress$=new _i.E,this._onChange=u=>{},this._onTouched=()=>{},this.clearItem=u=>{const m=this.selectedItems.find(x=>x.value===u);this.unselect(m)},this.trackByOption=(u,m)=>this.trackByFn?this.trackByFn(m.value):m,this._mergeGlobalConfig(jt),this.itemsList=new _n(this,Xe()),this.element=Qt.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(ke=>ke.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(ke){ke.multiple&&this.itemsList.clearSelected(),ke.items&&this._setItems(ke.items.currentValue||[]),ke.isOpen&&(this._manualOpen=da(ke.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),da(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(ke){if(Vi[ke.which]){if(!1===this.keyDownFn(ke))return;this.handleKeyCode(ke)}else ke.key&&1===ke.key.length&&this._keyPress$.next(ke.key.toLocaleLowerCase())}handleKeyCode(ke){this.clearButton&&this.clearButton.nativeElement===ke.target?this.handleKeyCodeClear(ke):this.handleKeyCodeInput(ke)}handleKeyCodeInput(ke){switch(ke.which){case Vi.ArrowDown:this._handleArrowDown(ke);break;case Vi.ArrowUp:this._handleArrowUp(ke);break;case Vi.Space:this._handleSpace(ke);break;case Vi.Enter:this._handleEnter(ke);break;case Vi.Tab:this._handleTab(ke);break;case Vi.Esc:this.close(),ke.preventDefault();break;case Vi.Backspace:this._handleBackspace()}}handleKeyCodeClear(ke){ke.which===Vi.Enter&&(this.handleClearClick(),ke.preventDefault())}handleMousedown(ke){const wt=ke.target;"INPUT"!==wt.tagName&&ke.preventDefault(),wt.classList.contains("ng-clear-wrapper")?this.handleClearClick():wt.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():wt.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(ke){this.itemsList.clearSelected(),this._handleWriteValue(ke),this._cd.markForCheck()}registerOnChange(ke){this._onChange=ke}registerOnTouched(ke){this._onTouched=ke}setDisabledState(ke){this._disabled=ke,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(ke){!ke||ke.disabled||this.disabled||(this.deselectOnClick&&ke.selected?this.unselect(ke):this.select(ke),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(ke){ke.selected||(this.itemsList.select(ke),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(ke.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(ke){ke&&(this.itemsList.unselect(ke),this.focus(),this._updateNgModel(),this.removeEvent.emit(ke.value))}selectTag(){let ke;ke=Dr(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const wt=jt=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(jt,null):this.itemsList.addItem(jt);!function go(st){return st instanceof Promise}(ke)?ke&&this.select(wt(ke)):ke.then(jt=>this.select(wt(jt))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;const ke=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(wt=>wt.label.toLowerCase()===ke)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(wt=>wt.label.toLowerCase()===ke))&&!this.loading}showNoItemsFound(){const ke=0===this.itemsList.filteredItems.length;return(ke&&!this._isTypeahead&&!this.loading||ke&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(ke){this._isComposing=!1,!this.searchWhileComposing&&this.filter(ke)}filter(ke){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=ke,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(ke),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:ke,items:this.itemsList.filteredItems.map(wt=>wt.value)}),this.open())}onInputFocus(ke){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(ke),this.focused=!0)}onInputBlur(ke){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(ke),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(ke){ke.disabled||this.itemsList.markItem(ke)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const ke=this.selectedItems&&this.selectedItems[0];this.searchTerm=ke&&ke.label||null}_setItems(ke){const wt=ke[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=da(wt)?!Mr(wt):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(ke),ke.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&da(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const ke=jt=>{this.items=jt.map(Xe=>({$ngOptionValue:Xe.value,$ngOptionLabel:Xe.elementRef.nativeElement.innerHTML,disabled:Xe.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},wt=()=>{const jt=(0,yi.U)(this.ngOptions.changes,this._destroy$);(0,yi.U)(...this.ngOptions.map(Xe=>Xe.stateChange$)).pipe((0,Ze.a)(jt)).subscribe(Xe=>{const Qt=this.itemsList.findItem(Xe.value);Qt.disabled=Xe.disabled,Qt.label=Xe.label||Qt.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe((0,at.W)(this.ngOptions),(0,Ze.a)(this._destroy$)).subscribe(jt=>{this.bindLabel=this._defaultLabel,ke(jt),wt()})}_isValidWriteValue(ke){if(!da(ke)||this.multiple&&""===ke||Array.isArray(ke)&&0===ke.length)return!1;const wt=jt=>!(!da(this.compareWith)&&Mr(jt)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(jt)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(ke)?ke.every(jt=>wt(jt)):(this._console.warn("Multiple select ngModel should be array."),!1):wt(ke)}_handleWriteValue(ke){if(!this._isValidWriteValue(ke))return;const wt=jt=>{let Xe=this.itemsList.findItem(jt);if(Xe)this.itemsList.select(Xe);else{const Qt=Mr(jt);Qt||!Qt&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(jt,null)):this.bindValue&&(Xe={[this.bindLabel]:null,[this.bindValue]:jt},this.itemsList.select(this.itemsList.mapItem(Xe,null)))}};this.multiple?ke.forEach(jt=>wt(jt)):wt(ke)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe((0,Ze.a)(this._destroy$),(0,Ct.y)(ke=>this._pressedKeys.push(ke)),(0,ot.o)(200),(0,Wt.I)(()=>this._pressedKeys.length>0),(0,et.k)(()=>this._pressedKeys.join(""))).subscribe(ke=>{const wt=this.itemsList.findByLabel(ke);wt&&(this.isOpen?(this.itemsList.markItem(wt),this._scrollToMarked(),this._cd.markForCheck()):this.select(wt)),this._pressedKeys=[]})}_setInputAttributes(){const ke=this.searchInput.nativeElement,wt={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const jt of Object.keys(wt))ke.setAttribute(jt,wt[jt])}_updateNgModel(){const ke=[];for(const jt of this.selectedItems)if(this.bindValue){let Xe=null;Xe=jt.children?jt.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(jt.value,this.bindValue),ke.push(Xe)}else ke.push(jt.value);const wt=this.selectedItems.map(jt=>jt.value);this.multiple?(this._onChange(ke),this.changeEvent.emit(wt)):(this._onChange(da(ke[0])?ke[0]:null),this.changeEvent.emit(wt[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(ke){this.searchTerm=ke,this._isTypeahead&&this.typeahead.next(ke)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(ke){if(!1===this.isOpen)if(this.showClear())this.focusOnClear(),ke.preventDefault();else if(!this.addTag)return;this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),ke.preventDefault()):this.showAddTag?(this.selectTag(),ke.preventDefault()):this.close():this.close()}_handleEnter(ke){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}ke.preventDefault()}_handleSpace(ke){this.isOpen||this._manualOpen||(this.open(),ke.preventDefault())}_handleArrowDown(ke){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),ke.preventDefault()}_handleArrowUp(ke){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),ke.preventDefault())}_nextItemIsTag(ke){const wt=this.itemsList.markedIndex+ke;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(wt<0||wt===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const ke=this.searchTerm&&this.searchTerm.trim();return ke&&ke.length>=this.minTermLength}_mergeGlobalConfig(ke){this.placeholder=this.placeholder||ke.placeholder,this.notFoundText=this.notFoundText||ke.notFoundText,this.typeToSearchText=this.typeToSearchText||ke.typeToSearchText,this.addTagText=this.addTagText||ke.addTagText,this.loadingText=this.loadingText||ke.loadingText,this.clearAllText=this.clearAllText||ke.clearAllText,this.virtualScroll=da(this.virtualScroll)?this.virtualScroll:!!da(ke.disableVirtualScroll)&&!ke.disableVirtualScroll,this.openOnEnter=da(this.openOnEnter)?this.openOnEnter:ke.openOnEnter,this.appendTo=this.appendTo||ke.appendTo,this.bindValue=this.bindValue||ke.bindValue,this.bindLabel=this.bindLabel||ke.bindLabel,this.appearance=this.appearance||ke.appearance}static#e=this.\u0275fac=function(wt){return new(wt||st)(T.gJ8("class"),T.gJ8("autofocus"),T.GI1(Ke),T.GI1(Ot),T.GI1(T.GMv),T.GI1(T.kD9),T.GI1(rt))};static#t=this.\u0275cmp=T.In1({type:st,selectors:[["ng-select"]],contentQueries:function(wt,jt,Xe){if(1&wt&&(T.szK(Xe,fa,5,T.Yw2),T.szK(Xe,Ia,5,T.Yw2),T.szK(Xe,Fa,5,T.Yw2),T.szK(Xe,Et,5,T.Yw2),T.szK(Xe,je,5,T.Yw2),T.szK(Xe,Je,5,T.Yw2),T.szK(Xe,At,5,T.Yw2),T.szK(Xe,kt,5,T.Yw2),T.szK(Xe,ai,5,T.Yw2),T.szK(Xe,Ci,5,T.Yw2),T.szK(Xe,Ii,5,T.Yw2),T.szK(Xe,pt,5)),2&wt){let Qt;T.wto(Qt=T.Gqi())&&(jt.optionTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.optgroupTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.labelTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.multiLabelTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.headerTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.footerTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.notFoundTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.typeToSearchTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.loadingTextTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.tagTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.loadingSpinnerTemplate=Qt.first),T.wto(Qt=T.Gqi())&&(jt.ngOptions=Qt)}},viewQuery:function(wt,jt){if(1&wt&&(T.CC$(vt,5),T.CC$(Zi,7),T.CC$(Rn,5)),2&wt){let Xe;T.wto(Xe=T.Gqi())&&(jt.dropdownPanel=Xe.first),T.wto(Xe=T.Gqi())&&(jt.searchInput=Xe.first),T.wto(Xe=T.Gqi())&&(jt.clearButton=Xe.first)}},hostVars:20,hostBindings:function(wt,jt){1&wt&&T.qCj("keydown",function(Qt){return jt.handleKeyDown(Qt)}),2&wt&&T.eAK("ng-select-typeahead",jt.typeahead)("ng-select-multiple",jt.multiple)("ng-select-taggable",jt.addTag)("ng-select-searchable",jt.searchable)("ng-select-clearable",jt.clearable)("ng-select-opened",jt.isOpen)("ng-select",jt.useDefaultClass)("ng-select-disabled",jt.disabled)("ng-select-filtered",jt.filtered)("ng-select-single",jt.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[T.M5G([{provide:xt.Y6,useExisting:(0,T.wd)(()=>st),multi:!0},Qn]),T.SYr],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper","tabindex","0",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],["clearButton",""],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(wt,jt){if(1&wt){const Xe=T.KQA();T.I0R(0,"div",0),T.qCj("mousedown",function(ve){return jt.handleMousedown(ve)}),T.I0R(1,"div",1)(2,"div",2),T.OEk(3),T.C$Y(),T.yuY(4,yr,2,2,"ng-container",3)(5,Mi,1,5,null,3),T.I0R(6,"div",4)(7,"input",5,6),T.qCj("input",function(){T.usT(Xe);const ve=T.Gew(8);return T.CGJ(jt.filter(ve.value))})("compositionstart",function(){return jt.onCompositionStart()})("compositionend",function(){T.usT(Xe);const ve=T.Gew(8);return T.CGJ(jt.onCompositionEnd(ve.value))})("focus",function(ve){return jt.onInputFocus(ve)})("blur",function(ve){return jt.onInputBlur(ve)})("change",function(ve){return ve.stopPropagation()}),T.C$Y()()(),T.yuY(9,ia,4,1,"ng-container",3)(10,jr,4,1,"span",7),T.I0R(11,"span",8),T.wR5(12,"span",9),T.C$Y()(),T.yuY(13,Ga,7,19,"ng-dropdown-panel",10)}2&wt&&(T.eAK("ng-appearance-outline","outline"===jt.appearance)("ng-has-value",jt.hasValue),T.yG2(3),T.cNF(jt.placeholder),T.yG2(),T.E7m("ngIf",(!jt.multiLabelTemplate||!jt.multiple)&&jt.selectedItems.length>0),T.yG2(),T.E7m("ngIf",jt.multiple&&jt.multiLabelTemplate&&jt.selectedValues.length>0),T.yG2(),T.e48("aria-expanded",jt.isOpen)("aria-owns",jt.isOpen?jt.dropdownId:null),T.yG2(),T.E7m("readOnly",!jt.searchable||jt.itemsList.maxItemsSelected)("disabled",jt.disabled)("value",jt.searchTerm?jt.searchTerm:""),T.e48("id",jt.labelForId)("tabindex",jt.tabIndex)("aria-activedescendant",jt.isOpen?null==jt.itemsList||null==jt.itemsList.markedItem?null:jt.itemsList.markedItem.htmlId:null)("aria-controls",jt.isOpen?jt.dropdownId:null),T.yG2(2),T.E7m("ngIf",jt.loading),T.yG2(),T.E7m("ngIf",jt.showClear()),T.yG2(3),T.E7m("ngIf",jt.isOpen))},dependencies:[Pi.QF,Pi.ay,Pi.u_,Pi.XV,vt,Aa],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return st})();function en(){return new $i}class $i{constructor(){this._selected=[]}get value(){return this._selected}select(Bt,ke,wt){if(Bt.selected=!0,(!Bt.children||!ke&&wt)&&this._selected.push(Bt),ke)if(Bt.parent){const jt=Bt.parent.children.length,Xe=Bt.parent.children.filter(Qt=>Qt.selected).length;Bt.parent.selected=jt===Xe}else Bt.children&&(this._setChildrenSelectedState(Bt.children,!0),this._removeChildren(Bt),this._selected=wt&&this._activeChildren(Bt)?[...this._selected.filter(jt=>jt.parent!==Bt),Bt]:[...this._selected,...Bt.children.filter(jt=>!jt.disabled)])}unselect(Bt,ke){if(this._selected=this._selected.filter(wt=>wt!==Bt),Bt.selected=!1,ke)if(Bt.parent&&Bt.parent.selected){const wt=Bt.parent.children;this._removeParent(Bt.parent),this._removeChildren(Bt.parent),this._selected.push(...wt.filter(jt=>jt!==Bt&&!jt.disabled)),Bt.parent.selected=!1}else Bt.children&&(this._setChildrenSelectedState(Bt.children,!1),this._removeChildren(Bt))}clear(Bt){this._selected=Bt?this._selected.filter(ke=>ke.disabled):[]}_setChildrenSelectedState(Bt,ke){for(const wt of Bt)wt.disabled||(wt.selected=ke)}_removeChildren(Bt){this._selected=[...this._selected.filter(ke=>ke.parent!==Bt),...Bt.children.filter(ke=>ke.parent===Bt&&ke.disabled&&ke.selected)]}_removeParent(Bt){this._selected=this._selected.filter(ke=>ke!==Bt)}_activeChildren(Bt){return Bt.children.every(ke=>!ke.disabled||ke.selected)}}let En=(()=>{class st{static#e=this.\u0275fac=function(wt){return new(wt||st)};static#t=this.\u0275mod=T.a4G({type:st});static#i=this.\u0275inj=T.s3X({providers:[{provide:Ot,useValue:en}],imports:[Pi.MD]})}return st})()},2728:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{C:()=>Ct,Wz:()=>nt,gD:()=>at});var T=Zt(4496),xt=Zt(1368),Ze=Zt(4984);const t=["*"],j=ot=>({"text-muted":ot});function He(ot,Wt){if(1&ot&&(T.I0R(0,"button",7),T.OEk(1),T.C$Y()),2&ot){const et=T.GaO();T.E7m("ngClass",T.S45(2,j,et.isDisabled)),T.yG2(),T.oRS(" ",et.heading," ")}}const Be=[[["","accordion-heading",""]],"*"],Me=["[accordion-heading]","*"];let We=(()=>{class ot{constructor(){this.closeOthers=!1,this.isAnimated=!1}static#e=this.\u0275fac=function(lt){return new(lt||ot)};static#t=this.\u0275prov=T.wxM({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})(),nt=(()=>{class ot{constructor(et){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,et)}closeOtherPanels(et){this.closeOthers&&this.groups.forEach(lt=>{lt!==et&&(lt.isOpen=!1)})}addGroup(et){et.isAnimated=this.isAnimated,this.groups.push(et)}removeGroup(et){const lt=this.groups.indexOf(et);-1!==lt&&this.groups.splice(lt,1)}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(We))};static#t=this.\u0275cmp=T.In1({type:ot,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(lt,gt){2&lt&&T.e48("aria-multiselectable",gt.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:t,decls:1,vars:0,template:function(lt,gt){1&lt&&(T.kPM(),T._Xx(0))},encapsulation:2})}return ot})(),at=(()=>{class ot{get isOpen(){return this._isOpen}set isOpen(et){et!==this.isOpen&&(et&&this.accordion.closeOtherPanels(this),this._isOpen=et,Promise.resolve(null).then(()=>{this.isOpenChange.emit(et)}))}constructor(et){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new T._w7,this._isOpen=!1,this.accordion=et}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(nt))};static#t=this.\u0275cmp=T.In1({type:ot,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(lt,gt){2&lt&&T.eAK("panel-open",gt.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:Me,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(lt,gt){1&lt&&(T.kPM(Be),T.I0R(0,"div",0)(1,"div",1),T.qCj("click",function(){return gt.toggleOpen()}),T.I0R(2,"div",2)(3,"div",3),T.yuY(4,He,2,4,"button",4),T._Xx(5),T.C$Y()()(),T.I0R(6,"div",5)(7,"div",6),T._Xx(8,1),T.C$Y()()()),2&lt&&(T.E7m("ngClass",gt.panelClass),T.yG2(),T.E7m("ngClass",gt.isDisabled?"panel-disabled":"panel-enabled"),T.yG2(2),T.e48("aria-expanded",gt.isOpen),T.yG2(),T.E7m("ngIf",gt.heading),T.yG2(2),T.E7m("collapse",!gt.isOpen)("isAnimated",gt.isAnimated))},dependencies:[xt.QF,xt.u_,Ze.m],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}return ot})(),Ct=(()=>{class ot{static forRoot(){return{ngModule:ot,providers:[]}}static#e=this.\u0275fac=function(lt){return new(lt||ot)};static#t=this.\u0275mod=T.a4G({type:ot});static#i=this.\u0275inj=T.s3X({imports:[xt.MD,Ze.a]})}return ot})()},3304:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{em:()=>Dm,U5:()=>sp,SO:()=>Sg});var T=Zt(4496),xt=Zt(6684),Ze=Zt(4704),t=Zt(3992),j=Zt(3616),He=Zt(4e3);function Me(b){return b<0?Math.ceil(b)||0:Math.floor(b)}function We(b){return"string"==typeof b}function nt(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function Ct(b){return b&&b.getTime&&!isNaN(b.getTime())}function ot(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b)}function Wt(b){return"number"==typeof b||"[object Number]"===Object.prototype.toString.call(b)}function et(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b)}function lt(b,z){return Object.prototype.hasOwnProperty.call(b,z)}function gt(b){return null!=b&&"[object Object]"===Object.prototype.toString.call(b)}function tt(b){return void 0===b}function yi(b){const z=+b;let A=0;return 0!==z&&isFinite(z)&&(A=Me(z)),A}const Pi={},Dt={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Fi(b,z){const A=b.toLowerCase();let q=b;A in Dt&&(q=Dt[A]),Pi[A]=Pi[`${A}s`]=Pi[z]=q}function xi(b){return We(b)?Pi[b]||Pi[b.toLowerCase()]:void 0}const It=0,Si=1,Ni=2,Zi=3,Rn=4,Ki=5,tn=6,yn=7,Nn=8;function yr(b,z,A){const q=`${Math.abs(b)}`;return(b>=0?A?"+":"":"-")+Math.pow(10,Math.max(0,z-q.length)).toString().substr(1)+q}const fr={},Nr={},Mi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function In(b,z,A,q){b&&(Nr[b]=q),z&&(Nr[z[0]]=function(){return yr(q.apply(null,arguments),z[1],z[2])}),A&&(Nr[A]=function(ie,Re){return Re.locale.ordinal(q.apply(null,arguments),b)})}function ia(b){return b.match(/\[[\s\S]/)?b.replace(/^\[|\]$/g,""):b.replace(/\\/g,"")}function jr(b,z,A){const q=new Date(Date.UTC.apply(null,arguments));return b<100&&b>=0&&isFinite(q.getUTCFullYear())&&q.setUTCFullYear(b),q}function Pr(b,z=0,A=1,q=0,ie=0,Re=0,Ft=0){const an=new Date(b,z,A,q,ie,Re,Ft);return b<100&&b>=0&&isFinite(an.getFullYear())&&an.setFullYear(b),an}function Mn(b,z=!1){return z?b.getUTCHours():b.getHours()}function Ya(b,z=!1){return z?b.getUTCMinutes():b.getMinutes()}function ka(b,z=!1){return z?b.getUTCSeconds():b.getSeconds()}function Ma(b,z=!1){return z?b.getUTCMilliseconds():b.getMilliseconds()}function $n(b,z=!1){return z?b.getUTCDay():b.getDay()}function ar(b,z=!1){return z?b.getUTCDate():b.getDate()}function Sn(b,z=!1){return z?b.getUTCMonth():b.getMonth()}function Dn(b,z=!1){return z?b.getUTCFullYear():b.getFullYear()}function Ga(b,z){return!(!b||!z)&&Ja(b,z)&&Sn(b)===Sn(z)}function Ja(b,z){return!(!b||!z)&&Dn(b)===Dn(z)}function Ra(b,z){return!(!b||!z)&&Ja(b,z)&&Ga(b,z)&&ar(b)===ar(z)}const ha=/\d/,xr=/\d\d/,da=/\d{3}/,Mr=/\d{4}/,go=/[+-]?\d{6}/,Dr=/\d\d?/,Aa=/\d\d\d\d?/,fa=/\d\d\d\d\d\d?/,Ia=/\d{1,3}/,Fa=/\d{1,4}/,Et=/[+-]?\d{1,6}/,je=/\d+/,Je=/[+-]?\d+/,kt=/Z|[+-]\d\d(?::?\d\d)?/gi,ai=/[+-]?\d+(\.\d{1,3})?/,Ci=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ii={};function Mt(b,z,A){Ii[b]=ot(z)?z:function(q,ie){return q&&A?A:z}}function Bi(b,z){return lt(Ii,b)?Ii[b](!1,z):new RegExp(function On(b){return _n(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(z,A,q,ie,Re)=>A||q||ie||Re))}(b))}function _n(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const Vi={};function Qn(b,z){const A=We(b)?[b]:b;let q=z;if(Wt(z)&&(q=function(ie,Re,Ft){return Re[z]=yi(ie),Ft}),et(A)&&ot(q)){let ie;for(ie=0;ie<A.length;ie++)Vi[A[ie]]=q}}function Yt(b,z){Qn(b,function(A,q,ie,Re){return ie._w=ie._w||{},z(A,ie._w,ie,Re)})}function Ut(b,z,A){return null!=z&&lt(Vi,b)&&Vi[b](z,A._a,A,b),A}const vt={};function pt(b,z){vt[b]=z}function Ot(b){return null==b._pf&&(b._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),b._pf}function ci(b,z){return z.locale.getFullYear?z.locale.getFullYear(b,z.isUTC).toString():Dn(b,z.isUTC).toString()}function $i(b){return yi(b)+(yi(b)>68?1900:2e3)}function En(b){return st(b)?366:365}function st(b){return b%4==0&&b%100!=0||b%400==0}function Bt(b,z){if(isNaN(b)||isNaN(z))return NaN;const A=function Be(b,z){return(b%z+z)%z}(z,12);return 1===A?st(b+(z-A)/12)?29:28:31-A%7%2}const wt={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function jt(b,z){const A=Object.assign({},wt,z),q=b.getFullYear()+(A.year||0),ie=b.getMonth()+(A.month||0);let Re=b.getDate()+(A.day||0);return A.month&&!A.day&&(Re=Math.min(Re,Bt(q,ie))),Pr(q,ie,Re,b.getHours()+(A.hour||0),b.getMinutes()+(A.minute||0),b.getSeconds()+(A.seconds||0))}function Qt(b,z){return Wt(z)?z:b}function l(b,z,A){const q=Math.min(ar(b),Bt(Dn(b),z));return A?b.setUTCMonth(z,q):b.setMonth(z,q),b}function M(b,z,A){return A?b.setUTCDate(z):b.setDate(z),b}function H(b){return new Date(b.getTime())}function Z(b,z,A){const q=H(b);switch(z){case"year":l(q,0,A);case"quarter":case"month":M(q,1,A);case"week":case"isoWeek":case"day":case"date":!function m(b,z,A){A?b.setUTCHours(z):b.setHours(z)}(q,0,A);case"hours":!function x(b,z,A){A?b.setUTCMinutes(z):b.setMinutes(z)}(q,0,A);case"minutes":!function w(b,z,A){A?b.setUTCSeconds(z):b.setSeconds(z)}(q,0,A);case"seconds":!function E(b,z,A){A?b.setUTCMilliseconds(z):b.setMilliseconds(z)}(q,0,A)}return"week"===z&&function v(b,z,A={}){nc(b,z-dr(b,A.locale,A.isUTC),"day")}(q,0,{isUTC:A}),"isoWeek"===z&&function W(b,z,A={}){const q=function fu(b,z=Js()){return We(b)?z.weekdaysParse(b)%7||7:Wt(b)&&isNaN(b)?null:b}(z,A.locale);pu(b,function yo(b,z){return $n(b,z)}(b)%7?q:q-7)}(q,1),"quarter"===z&&l(q,3*Math.floor(Sn(q,A)/3),A),q}function J(b,z,A){let q=z;return"date"===q&&(q="day"),function ho(b,z,A,q){return kl(b,il(z,A),-1,q)}(nc(Z(b,q,A),1,"isoWeek"===q?"week":q,A),1,"milliseconds",A)}function fe(b,z){const A=+Z(b,"day",z),q=+Z(b,"year",z);return Math.round((A-q)/864e5)+1}function De(b,z,A){const q=z-A+7;return-(jr(b,0,q).getUTCDay()-z+7)%7+q-1}function Se(b,z,A,q){const ie=De(Dn(b,q),z,A),Re=Math.floor((fe(b,q)-ie-1)/7)+1;let Ft,an;return Re<1?(an=Dn(b,q)-1,Ft=Re+ze(an,z,A)):Re>ze(Dn(b,q),z,A)?(Ft=Re-ze(Dn(b,q),z,A),an=Dn(b,q)+1):(an=Dn(b,q),Ft=Re),{week:Ft,year:an}}function ze(b,z,A){const q=De(b,z,A),ie=De(b+1,z,A);return(En(b)-q+ie)/7}const U=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),we="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Le="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),mt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ji=Ci,ln=Ci;class Un{constructor(z){z&&this.set(z)}set(z){let A;for(A in z){if(!z.hasOwnProperty(A))continue;const q=z[A];this[ot(q)?A:`_${A}`]=q}this._config=z}calendar(z,A,q){const ie=this._calendar[z]||this._calendar.sameElse;return ot(ie)?ie.call(null,A,q):ie}longDateFormat(z){const A=this._longDateFormat[z],q=this._longDateFormat[z.toUpperCase()];return A||!q?A:(this._longDateFormat[z]=q.replace(/MMMM|MM|DD|dddd/g,function(ie){return ie.slice(1)}),this._longDateFormat[z])}get invalidDate(){return this._invalidDate}set invalidDate(z){this._invalidDate=z}ordinal(z,A){return this._ordinal.replace("%d",z.toString(10))}preparse(z,A){return z}getFullYear(z,A=!1){return Dn(z,A)}postformat(z){return z}relativeTime(z,A,q,ie){const Re=this._relativeTime[q];return ot(Re)?Re(z,A,q,ie):Re.replace(/%d/i,z.toString(10))}pastFuture(z,A){const q=this._relativeTime[z>0?"future":"past"];return ot(q)?q(A):q.replace(/%s/i,A)}months(z,A,q=!1){if(!z)return et(this._months)?this._months:this._months.standalone;if(et(this._months))return this._months[Sn(z,q)];const ie=(this._months.isFormat||U).test(A)?"format":"standalone";return this._months[ie][Sn(z,q)]}monthsShort(z,A,q=!1){if(!z)return et(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(et(this._monthsShort))return this._monthsShort[Sn(z,q)];const ie=U.test(A)?"format":"standalone";return this._monthsShort[ie][Sn(z,q)]}monthsParse(z,A,q){let ie,Re,Ft;if(this._monthsParseExact)return this.handleMonthStrictParse(z,A,q);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),Ft=0;Ft<12;Ft++){if(ie=new Date(Date.UTC(2e3,Ft)),q&&!this._longMonthsParse[Ft]){const an=this.months(ie,"",!0).replace(".",""),sr=this.monthsShort(ie,"",!0).replace(".","");this._longMonthsParse[Ft]=new RegExp(`^${an}$`,"i"),this._shortMonthsParse[Ft]=new RegExp(`^${sr}$`,"i")}if(!q&&!this._monthsParse[Ft]&&(Re=`^${this.months(ie,"",!0)}|^${this.monthsShort(ie,"",!0)}`,this._monthsParse[Ft]=new RegExp(Re.replace(".",""),"i")),q&&"MMMM"===A&&this._longMonthsParse[Ft].test(z)||q&&"MMM"===A&&this._shortMonthsParse[Ft].test(z)||!q&&this._monthsParse[Ft].test(z))return Ft}}monthsRegex(z){return this._monthsParseExact?(lt(this,"_monthsRegex")||this.computeMonthsParse(),z?this._monthsStrictRegex:this._monthsRegex):(lt(this,"_monthsRegex")||(this._monthsRegex=ln),this._monthsStrictRegex&&z?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(z){return this._monthsParseExact?(lt(this,"_monthsRegex")||this.computeMonthsParse(),z?this._monthsShortStrictRegex:this._monthsShortRegex):(lt(this,"_monthsShortRegex")||(this._monthsShortRegex=Ji),this._monthsShortStrictRegex&&z?this._monthsShortStrictRegex:this._monthsShortRegex)}week(z,A){return Se(z,this._week.dow,this._week.doy,A).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(z,A,q){if(!z)return et(this._weekdays)?this._weekdays:this._weekdays.standalone;if(et(this._weekdays))return this._weekdays[$n(z,q)];const ie=this._weekdays.isFormat.test(A)?"format":"standalone";return this._weekdays[ie][$n(z,q)]}weekdaysMin(z,A,q){return z?this._weekdaysMin[$n(z,q)]:this._weekdaysMin}weekdaysShort(z,A,q){return z?this._weekdaysShort[$n(z,q)]:this._weekdaysShort}weekdaysParse(z,A,q){let ie,Re;if(this._weekdaysParseExact)return this.handleWeekStrictParse(z,A,q);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),ie=0;ie<7;ie++){const Ft=pu(new Date(Date.UTC(2e3,1)),ie,null,!0);if(q&&!this._fullWeekdaysParse[ie]&&(this._fullWeekdaysParse[ie]=new RegExp(`^${this.weekdays(Ft,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[ie]=new RegExp(`^${this.weekdaysShort(Ft,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[ie]=new RegExp(`^${this.weekdaysMin(Ft,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[ie]||(Re=`^${this.weekdays(Ft,"",!0)}|^${this.weekdaysShort(Ft,"",!0)}|^${this.weekdaysMin(Ft,"",!0)}`,this._weekdaysParse[ie]=new RegExp(Re.replace(".",""),"i")),!(et(this._fullWeekdaysParse)&&et(this._shortWeekdaysParse)&&et(this._minWeekdaysParse)&&et(this._weekdaysParse)))return;if(q&&"dddd"===A&&this._fullWeekdaysParse[ie].test(z))return ie;if(q&&"ddd"===A&&this._shortWeekdaysParse[ie].test(z))return ie;if(q&&"dd"===A&&this._minWeekdaysParse[ie].test(z))return ie;if(!q&&this._weekdaysParse[ie].test(z))return ie}}weekdaysRegex(z){return this._weekdaysParseExact?(lt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),z?this._weekdaysStrictRegex:this._weekdaysRegex):(lt(this,"_weekdaysRegex")||(this._weekdaysRegex=Ci),this._weekdaysStrictRegex&&z?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(z){return this._weekdaysParseExact?(lt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),z?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(lt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ci),this._weekdaysShortStrictRegex&&z?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(z){return this._weekdaysParseExact?(lt(this,"_weekdaysRegex")||this.computeWeekdaysParse(),z?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(lt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ci),this._weekdaysMinStrictRegex&&z?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(z){return"p"===z.toLowerCase().charAt(0)}meridiem(z,A,q){return z>11?q?"pm":"PM":q?"am":"AM"}formatLongDate(z){this._longDateFormat=this._longDateFormat?this._longDateFormat:$t;const A=this._longDateFormat[z],q=this._longDateFormat[z.toUpperCase()];return A||!q?A:(this._longDateFormat[z]=q.replace(/MMMM|MM|DD|dddd/g,ie=>ie.slice(1)),this._longDateFormat[z])}handleMonthStrictParse(z,A,q){const ie=z.toLocaleLowerCase();let Re,Ft,an;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],Re=0;Re<12;++Re)an=new Date(2e3,Re),this._shortMonthsParse[Re]=this.monthsShort(an,"").toLocaleLowerCase(),this._longMonthsParse[Re]=this.months(an,"").toLocaleLowerCase();return q?"MMM"===A?(Ft=this._shortMonthsParse.indexOf(ie),-1!==Ft?Ft:null):(Ft=this._longMonthsParse.indexOf(ie),-1!==Ft?Ft:null):"MMM"===A?(Ft=this._shortMonthsParse.indexOf(ie),-1!==Ft?Ft:(Ft=this._longMonthsParse.indexOf(ie),-1!==Ft?Ft:null)):(Ft=this._longMonthsParse.indexOf(ie),-1!==Ft?Ft:(Ft=this._shortMonthsParse.indexOf(ie),-1!==Ft?Ft:null))}handleWeekStrictParse(z,A,q){let ie;const Re=z.toLocaleLowerCase();if(!this._weekdaysParse){let Ft;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],Ft=0;Ft<7;++Ft){const an=pu(new Date(Date.UTC(2e3,1)),Ft,null,!0);this._minWeekdaysParse[Ft]=this.weekdaysMin(an).toLocaleLowerCase(),this._shortWeekdaysParse[Ft]=this.weekdaysShort(an).toLocaleLowerCase(),this._weekdaysParse[Ft]=this.weekdays(an,"").toLocaleLowerCase()}}if(et(this._weekdaysParse)&&et(this._shortWeekdaysParse)&&et(this._minWeekdaysParse))return q?"dddd"===A?(ie=this._weekdaysParse.indexOf(Re),-1!==ie?ie:null):"ddd"===A?(ie=this._shortWeekdaysParse.indexOf(Re),-1!==ie?ie:null):(ie=this._minWeekdaysParse.indexOf(Re),-1!==ie?ie:null):"dddd"===A?(ie=this._weekdaysParse.indexOf(Re),-1!==ie||(ie=this._shortWeekdaysParse.indexOf(Re),-1!==ie)?ie:(ie=this._minWeekdaysParse.indexOf(Re),-1!==ie?ie:null)):"ddd"===A?(ie=this._shortWeekdaysParse.indexOf(Re),-1!==ie||(ie=this._weekdaysParse.indexOf(Re),-1!==ie)?ie:(ie=this._minWeekdaysParse.indexOf(Re),-1!==ie?ie:null)):(ie=this._minWeekdaysParse.indexOf(Re),-1!==ie||(ie=this._weekdaysParse.indexOf(Re),-1!==ie)?ie:(ie=this._shortWeekdaysParse.indexOf(Re),-1!==ie?ie:null))}computeMonthsParse(){const z=[],A=[],q=[];let ie,Re;for(Re=0;Re<12;Re++)ie=new Date(2e3,Re),z.push(this.monthsShort(ie,"")),A.push(this.months(ie,"")),q.push(this.months(ie,"")),q.push(this.monthsShort(ie,""));for(z.sort(cr),A.sort(cr),q.sort(cr),Re=0;Re<12;Re++)z[Re]=_n(z[Re]),A[Re]=_n(A[Re]);for(Re=0;Re<24;Re++)q[Re]=_n(q[Re]);this._monthsRegex=new RegExp(`^(${q.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${A.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${z.join("|")})`,"i")}computeWeekdaysParse(){const z=[],A=[],q=[],ie=[];let Re;for(Re=0;Re<7;Re++){const Ft=pu(new Date(Date.UTC(2e3,1)),Re,null,!0),an=this.weekdaysMin(Ft),sr=this.weekdaysShort(Ft),Us=this.weekdays(Ft);z.push(an),A.push(sr),q.push(Us),ie.push(an),ie.push(sr),ie.push(Us)}for(z.sort(cr),A.sort(cr),q.sort(cr),ie.sort(cr),Re=0;Re<7;Re++)A[Re]=_n(A[Re]),q[Re]=_n(q[Re]),ie[Re]=_n(ie[Re]);this._weekdaysRegex=new RegExp(`^(${ie.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${q.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${A.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${z.join("|")})`,"i")}}function cr(b,z){return z.length-b.length}const ms={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:$t,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:le,monthsShort:we,week:{dow:0,doy:6},weekdays:Le,weekdaysMin:mt,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i};function Is(b,z,A){const q=Math.min(b.length,z.length),ie=Math.abs(b.length-z.length);let Ft,Re=0;for(Ft=0;Ft<q;Ft++)(A&&b[Ft]!==z[Ft]||!A&&yi(b[Ft])!==yi(z[Ft]))&&Re++;return Re+ie}function Pc(b,z){In(null,[b,b.length,!1],null,z)}function Ws(b,z){return $r(b,z.locale).toString()}function xc(b){return Rl(b).toString()}function $r(b,z=Js(),A){return Se(b,z.firstDayOfWeek(),z.firstDayOfYear(),A).year}function Rl(b,z){return Se(b,1,4,z).year}function fl(b,z){In(b,null,null,function(A,q){let ie=function Cs(b,z={}){return z._isUTC?z._offset||0:function vd(b){return 15*-Math.round(b.getTimezoneOffset()/15)}(b)}(A,{_isUTC:q.isUTC,_offset:q.offset}),Re="+";return ie<0&&(ie=-ie,Re="-"),Re+yr(~~(ie/60),2)+z+yr(~~ie%60,2)})}const Au=/([\+\-]|\d\d)/gi;const Ks={},wl={};let co;function zs(b){return b&&b.toLowerCase().replace("_","-")}function Qu(b){return Ks[b]||console.error(`Khronos locale error: please load locale "${b}" before using it`),Ks[b]}function ec(b,z){let A;return b&&(tt(z)?A=Js(b):We(b)&&(A=Oa(b,z)),A&&(co=A)),co&&co._abbr}function Oa(b,z){if(null===z)return delete Ks[b],co=Js("en"),null;if(!z)return;let A=ms;if(z.abbr=b,null!=z.parentLocale){if(null==Ks[z.parentLocale])return wl[z.parentLocale]||(wl[z.parentLocale]=[]),wl[z.parentLocale].push({name:b,config:z}),null;A=Ks[z.parentLocale]._config}return Ks[b]=new Un(function vo(b,z){const A=Object.assign({},b);for(const q in z)lt(z,q)&&(gt(b[q])&&gt(z[q])?(A[q]={},Object.assign(A[q],b[q]),Object.assign(A[q],z[q])):null!=z[q]?A[q]=z[q]:delete A[q]);for(const q in b)lt(b,q)&&!lt(z,q)&&gt(b[q])&&(A[q]=Object.assign({},A[q]));return A}(A,z)),wl[b]&&wl[b].forEach(function(q){Oa(q.name,q.config)}),ec(b),Ks[b]}function Js(b){return function Ys(){Ks.en||(ec("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(b){const z=b%10;return b+(1===yi(b%100/10)?"th":1===z?"st":2===z?"nd":3===z?"rd":"th")}}),function va(){In("w",["ww",2,!1],"wo",function(b,z){return function Ms(b,z=Js(),A){return z.week(b,A)}(b,z.locale).toString(10)}),In("W",["WW",2,!1],"Wo",function(b){return function Ns(b,z){return Se(b,1,4,z).week}(b).toString(10)}),Fi("week","w"),Fi("isoWeek","W"),pt("week",5),pt("isoWeek",5),Mt("w",Dr),Mt("ww",Dr,xr),Mt("W",Dr),Mt("WW",Dr,xr),Yt(["w","ww","W","WW"],function(b,z,A,q){return z[q.substr(0,1)]=yi(b),A})}(),function Ku(){In(null,["gg",2,!1],null,function(b,z){return($r(b,z.locale)%100).toString()}),In(null,["GG",2,!1],null,function(b){return(Rl(b)%100).toString()}),Pc("gggg",Ws),Pc("ggggg",Ws),Pc("GGGG",xc),Pc("GGGGG",xc),Fi("weekYear","gg"),Fi("isoWeekYear","GG"),pt("weekYear",1),pt("isoWeekYear",1),Mt("G",Je),Mt("g",Je),Mt("GG",Dr,xr),Mt("gg",Dr,xr),Mt("GGGG",Fa,Mr),Mt("gggg",Fa,Mr),Mt("GGGGG",Et,go),Mt("ggggg",Et,go),Yt(["gggg","ggggg","GGGG","GGGGG"],function(b,z,A,q){return z[q.substr(0,2)]=yi(b),A}),Yt(["gg","GG"],function(b,z,A,q){return z[q]=$i(b),A})}(),function en(){In("Y",null,null,function(b,z){const A=Dn(b,z.isUTC);return A<=9999?A.toString(10):`+${A}`}),In(null,["YY",2,!1],null,function(b,z){return(Dn(b,z.isUTC)%100).toString(10)}),In(null,["YYYY",4,!1],null,ci),In(null,["YYYYY",5,!1],null,ci),In(null,["YYYYYY",6,!0],null,ci),Fi("year","y"),pt("year",1),Mt("Y",Je),Mt("YY",Dr,xr),Mt("YYYY",Fa,Mr),Mt("YYYYY",Et,go),Mt("YYYYYY",Et,go),Qn(["YYYYY","YYYYYY"],It),Qn("YYYY",function(b,z,A){return z[It]=2===b.length?$i(b):yi(b),A}),Qn("YY",function(b,z,A){return z[It]=$i(b),A}),Qn("Y",function(b,z,A){return z[It]=parseInt(b,10),A})}(),function Xd(){In("z",null,null,function(b,z){return z.isUTC?"UTC":""}),In("zz",null,null,function(b,z){return z.isUTC?"Coordinated Universal Time":""})}(),function Xa(){In("X",null,null,function(b){return function Vn(b){return Math.floor(b.valueOf()/1e3)}(b).toString(10)}),In("x",null,null,function(b){return b.valueOf().toString(10)}),Mt("x",Je),Mt("X",ai),Qn("X",function(b,z,A){return A._d=new Date(1e3*parseFloat(b)),A}),Qn("x",function(b,z,A){return A._d=new Date(yi(b)),A})}(),function Ju(){In("s",["ss",2,!1],null,function(b,z){return ka(b,z.isUTC).toString(10)}),Fi("second","s"),pt("second",15),Mt("s",Dr),Mt("ss",Dr,xr),Qn(["s","ss"],Ki)}(),function Es(){In("Q",null,"Qo",function(b,z){return function ks(b,z=!1){return Math.ceil((Sn(b,z)+1)/3)}(b,z.isUTC).toString(10)}),Fi("quarter","Q"),pt("quarter",7),Mt("Q",ha),Qn("Q",function(b,z,A){return z[Si]=3*(yi(b)-1),A})}(),function Bc(){fl("Z",":"),fl("ZZ",""),Mt("Z",kt),Mt("ZZ",kt),Qn(["Z","ZZ"],function(b,z,A){return A._useUTC=!0,A._tzm=function No(b,z){const A=(z||"").match(b);if(null===A)return null;const ie=A[A.length-1].match(Au)||["-","0","0"],Re=60*parseInt(ie[1],10)+yi(ie[2]);return 0===Re?0:"+"===ie[0]?Re:-Re}(kt,b),A})}(),function ke(){In("M",["MM",2,!1],"Mo",function(b,z){return(Sn(b,z.isUTC)+1).toString(10)}),In("MMM",null,null,function(b,z){return z.locale.monthsShort(b,z.format,z.isUTC)}),In("MMMM",null,null,function(b,z){return z.locale.months(b,z.format,z.isUTC)}),Fi("month","M"),pt("month",8),Mt("M",Dr),Mt("MM",Dr,xr),Mt("MMM",function(b,z){return z.monthsShortRegex(b)}),Mt("MMMM",function(b,z){return z.monthsRegex(b)}),Qn(["M","MM"],function(b,z,A){return z[Si]=yi(b)-1,A}),Qn(["MMM","MMMM"],function(b,z,A,q){const ie=A._locale.monthsParse(b,q,A._strict);return null!=ie?z[Si]=ie:Ot(A).invalidMonth=!!b,A})}(),function zo(){In("m",["mm",2,!1],null,function(b,z){return Ya(b,z.isUTC).toString(10)}),Fi("minute","m"),pt("minute",14),Mt("m",Dr),Mt("mm",Dr,xr),Qn(["m","mm"],Rn)}(),function Zd(){let b;for(In("S",null,null,function(A,q){return(~~(Ma(A,q.isUTC)/100)).toString(10)}),In(null,["SS",2,!1],null,function(A,q){return(~~(Ma(A,q.isUTC)/10)).toString(10)}),In(null,["SSS",3,!1],null,function(A,q){return Ma(A,q.isUTC).toString(10)}),In(null,["SSSS",4,!1],null,function(A,q){return(10*Ma(A,q.isUTC)).toString(10)}),In(null,["SSSSS",5,!1],null,function(A,q){return(100*Ma(A,q.isUTC)).toString(10)}),In(null,["SSSSSS",6,!1],null,function(A,q){return(1e3*Ma(A,q.isUTC)).toString(10)}),In(null,["SSSSSSS",7,!1],null,function(A,q){return(1e4*Ma(A,q.isUTC)).toString(10)}),In(null,["SSSSSSSS",8,!1],null,function(A,q){return(1e5*Ma(A,q.isUTC)).toString(10)}),In(null,["SSSSSSSSS",9,!1],null,function(A,q){return(1e6*Ma(A,q.isUTC)).toString(10)}),Fi("millisecond","ms"),pt("millisecond",16),Mt("S",Ia,ha),Mt("SS",Ia,xr),Mt("SSS",Ia,da),b="SSSS";b.length<=9;b+="S")Mt(b,je);function z(A,q,ie){return q[tn]=yi(1e3*parseFloat(`0.${A}`)),ie}for(b="S";b.length<=9;b+="S")Qn(b,z)}(),function Ql(){function b(ie,Re){return Mn(ie,Re)%12||12}function A(ie,Re){In(ie,null,null,function(Ft,an){return an.locale.meridiem(Mn(Ft,an.isUTC),Ya(Ft,an.isUTC),Re)})}function q(ie,Re){return Re._meridiemParse}In("H",["HH",2,!1],null,function(ie,Re){return Mn(ie,Re.isUTC).toString(10)}),In("h",["hh",2,!1],null,function(ie,Re){return b(ie,Re.isUTC).toString(10)}),In("k",["kk",2,!1],null,function(ie,Re){return function z(ie,Re){return Mn(ie,Re)||24}(ie,Re.isUTC).toString(10)}),In("hmm",null,null,function(ie,Re){return`${b(ie,Re.isUTC)}${yr(Ya(ie,Re.isUTC),2)}`}),In("hmmss",null,null,function(ie,Re){return`${b(ie,Re.isUTC)}${yr(Ya(ie,Re.isUTC),2)}${yr(ka(ie,Re.isUTC),2)}`}),In("Hmm",null,null,function(ie,Re){return`${Mn(ie,Re.isUTC)}${yr(Ya(ie,Re.isUTC),2)}`}),In("Hmmss",null,null,function(ie,Re){return`${Mn(ie,Re.isUTC)}${yr(Ya(ie,Re.isUTC),2)}${yr(ka(ie,Re.isUTC),2)}`}),A("a",!0),A("A",!1),Fi("hour","h"),pt("hour",13),Mt("a",q),Mt("A",q),Mt("H",Dr),Mt("h",Dr),Mt("k",Dr),Mt("HH",Dr,xr),Mt("hh",Dr,xr),Mt("kk",Dr,xr),Mt("hmm",Aa),Mt("hmmss",fa),Mt("Hmm",Aa),Mt("Hmmss",fa),Qn(["H","HH"],Zi),Qn(["k","kk"],function(ie,Re,Ft){const an=yi(ie);return Re[Zi]=24===an?0:an,Ft}),Qn(["a","A"],function(ie,Re,Ft){return Ft._isPm=Ft._locale.isPM(ie),Ft._meridiem=ie,Ft}),Qn(["h","hh"],function(ie,Re,Ft){return Re[Zi]=yi(ie),Ot(Ft).bigHour=!0,Ft}),Qn("hmm",function(ie,Re,Ft){const an=ie.length-2;return Re[Zi]=yi(ie.substr(0,an)),Re[Rn]=yi(ie.substr(an)),Ot(Ft).bigHour=!0,Ft}),Qn("hmmss",function(ie,Re,Ft){const an=ie.length-4,sr=ie.length-2;return Re[Zi]=yi(ie.substr(0,an)),Re[Rn]=yi(ie.substr(an,2)),Re[Ki]=yi(ie.substr(sr)),Ot(Ft).bigHour=!0,Ft}),Qn("Hmm",function(ie,Re,Ft){const an=ie.length-2;return Re[Zi]=yi(ie.substr(0,an)),Re[Rn]=yi(ie.substr(an)),Ft}),Qn("Hmmss",function(ie,Re,Ft){const an=ie.length-4,sr=ie.length-2;return Re[Zi]=yi(ie.substr(0,an)),Re[Rn]=yi(ie.substr(an,2)),Re[Ki]=yi(ie.substr(sr)),Ft})}(),function ne(){In("DDD",["DDDD",3,!1],"DDDo",function(b){return fe(b).toString(10)}),Fi("dayOfYear","DDD"),pt("dayOfYear",4),Mt("DDD",Ia),Mt("DDDD",da),Qn(["DDD","DDDD"],function(b,z,A){return A._dayOfYear=yi(b),A})}(),function Gc(){In("d",null,"do",function(b,z){return $n(b,z.isUTC).toString(10)}),In("dd",null,null,function(b,z){return z.locale.weekdaysMin(b,z.format,z.isUTC)}),In("ddd",null,null,function(b,z){return z.locale.weekdaysShort(b,z.format,z.isUTC)}),In("dddd",null,null,function(b,z){return z.locale.weekdays(b,z.format,z.isUTC)}),In("e",null,null,function(b,z){return dr(b,z.locale,z.isUTC).toString(10)}),In("E",null,null,function(b,z){return function O(b,z){return $n(b,z)||7}(b,z.isUTC).toString(10)}),Fi("day","d"),Fi("weekday","e"),Fi("isoWeekday","E"),pt("day",11),pt("weekday",11),pt("isoWeekday",11),Mt("d",Dr),Mt("e",Dr),Mt("E",Dr),Mt("dd",function(b,z){return z.weekdaysMinRegex(b)}),Mt("ddd",function(b,z){return z.weekdaysShortRegex(b)}),Mt("dddd",function(b,z){return z.weekdaysRegex(b)}),Yt(["dd","ddd","dddd"],function(b,z,A,q){const ie=A._locale.weekdaysParse(b,q,A._strict);return null!=ie?z.d=ie:Ot(A).invalidWeekday=!!b,A}),Yt(["d","e","E"],function(b,z,A,q){return z[q]=yi(b),A})}(),function Ke(){In("D",["DD",2,!1],"Do",function(b,z){return ar(b,z.isUTC).toString(10)}),Fi("date","D"),pt("date",9),Mt("D",Dr),Mt("DD",Dr,xr),Mt("Do",function(b,z){return z._dayOfMonthOrdinalParse||z._ordinalParse}),Qn(["D","DD"],Ni),Qn("Do",function(b,z,A){return z[Ni]=yi(b.match(Dr)[0]),A})}())}(),b?function Ts(b){let z,A,q=0;for(;q<b.length;){const ie=zs(b[q]).split("-");let Re=ie.length;for(z=zs(b[q+1]),z=z?z.split("-"):null;Re>0;){if(A=Qu(ie.slice(0,Re).join("-")),A)return A;if(z&&z.length>=Re&&Is(ie,z,!0)>=Re-1)break;Re--}q++}return null}(et(b)?b:[b]):co}const wo=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],ps=wo.reduce((b,z)=>(b[z]=!0,b),{});function Wo(b){return b<0?Math.floor(b):Math.ceil(b)}function Mu(b){return 4800*b/146097}function oa(b){return 146097*b/4800}let ko=Math.round;const Ol_ss=44,Ol_s=45,Ol_m=45,Ol_h=22,Ol_d=26,Ol_M=11;function Ld(b,z,A,q,ie){return ie.relativeTime(z||1,!!A,b,q)}class $a{constructor(z,A={}){this._data={},this._locale=Js(),this._locale=A&&A._locale||Js();const ie=z.year||0,Re=z.quarter||0,Ft=z.month||0,an=z.week||0,sr=z.day||0,Us=z.hours||0,Co=z.minutes||0,yl=z.seconds||0,$c=z.milliseconds||0;return this._isValid=function td(b){if(Object.keys(b).some(q=>q in ps&&null===b[q]||isNaN(b[q])))return!1;let A=!1;for(let q=0;q<wo.length;++q)if(b[wo[q]]){if(A)return!1;b[wo[q]]!==yi(b[wo[q]])&&(A=!0)}return!0}(z),this._milliseconds=+$c+1e3*yl+60*Co*1e3+1e3*Us*60*60,this._days=+sr+7*an,this._months=+Ft+3*Re+12*ie,function id(b){let z=b._milliseconds,A=b._days,q=b._months;const ie=b._data;z>=0&&A>=0&&q>=0||z<=0&&A<=0&&q<=0||(z+=864e5*Wo(oa(q)+A),A=0,q=0),ie.milliseconds=z%1e3;const Re=Me(z/1e3);ie.seconds=Re%60;const Ft=Me(Re/60);ie.minutes=Ft%60;const an=Me(Ft/60);ie.hours=an%24,A+=Me(an/24);const sr=Me(Mu(A));q+=sr,A-=Wo(oa(sr));const Us=Me(q/12);return q%=12,ie.day=A,ie.month=q,ie.year=Us,b}(this)}isValid(){return this._isValid}humanize(z){if(!this.isValid())return this.localeData().invalidDate;const A=this.localeData();let q=function qa(b,z,A){const q=il(b).abs(),ie=ko(q.as("s")),Re=ko(q.as("m")),Ft=ko(q.as("h")),an=ko(q.as("d")),sr=ko(q.as("M")),Us=ko(q.as("y")),Co=ie<=Ol_ss&&["s",ie]||ie<Ol_s&&["ss",ie]||Re<=1&&["m"]||Re<Ol_m&&["mm",Re]||Ft<=1&&["h"]||Ft<Ol_h&&["hh",Ft]||an<=1&&["d"]||an<Ol_d&&["dd",an]||sr<=1&&["M"]||sr<Ol_M&&["MM",sr]||Us<=1&&["y"]||["yy",Us];return Ld.apply(null,[Co[0],Co[1],z,+b>0,A])}(this,!z,A);return z&&(q=A.pastFuture(+this,q)),A.postformat(q)}localeData(){return this._locale}locale(z){return z?(this._locale=Js(z)||this._locale,this):this._locale._abbr}abs(){const z=Math.abs,A=this._data;return this._milliseconds=z(this._milliseconds),this._days=z(this._days),this._months=z(this._months),A.milliseconds=z(A.milliseconds),A.seconds=z(A.seconds),A.minutes=z(A.minutes),A.hours=z(A.hours),A.month=z(A.month),A.year=z(A.year),this}as(z){if(!this.isValid())return NaN;let A,q;const ie=this._milliseconds,Re=xi(z);if("month"===Re||"year"===Re)return A=this._days+ie/864e5,q=this._months+Mu(A),"month"===Re?q:q/12;switch(A=this._days+Math.round(oa(this._months)),Re){case"week":return A/7+ie/6048e5;case"day":return A+ie/864e5;case"hours":return 24*A+ie/36e5;case"minutes":return 1440*A+ie/6e4;case"seconds":return 86400*A+ie/1e3;case"milliseconds":return Math.floor(864e5*A)+ie;default:throw new Error(`Unknown unit ${Re}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*yi(this._months/12):NaN}}function bc(b){if(null==b._isValid){const z=Ot(b),A=Array.prototype.some.call(z.parsedDateParts,function(ie){return null!=ie});let q=!isNaN(b._d&&b._d.getTime())&&z.overflow<0&&!z.empty&&!z.invalidMonth&&!z.invalidWeekday&&!z.weekdayMismatch&&!z.nullInput&&!z.invalidFormat&&!z.userInvalidated&&(!z.meridiem||z.meridiem&&A);if(b._strict&&(q=q&&0===z.charsLeftOver&&0===z.unusedTokens.length&&void 0===z.bigHour),null!=Object.isFrozen&&Object.isFrozen(b))return q;b._isValid=q}return b._isValid}function Jc(b,z){return b._d=new Date(NaN),Object.assign(Ot(b),z||{userInvalidated:!0}),b}const nd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Qs=/Z|[+-]\d\d(?::?\d\d)?/,el=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],Cl=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wc=/^\/?Date\((\-?\d+)/i,eu={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Rs=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function _o(b){if(!We(b._i))return b;const z=b._i,A=nd.exec(z)||Qc.exec(z);let q,ie,Re,Ft,an,sr;if(!A)return b._isValid=!1,b;for(an=0,sr=el.length;an<sr;an++)if(el[an][1].exec(A[1])){ie=el[an][0],q=!1!==el[an][2];break}if(null==ie)return b._isValid=!1,b;if(A[3]){for(an=0,sr=Cl.length;an<sr;an++)if(Cl[an][1].exec(A[3])){Re=(A[2]||" ")+Cl[an][0];break}if(null==Re)return b._isValid=!1,b}if(!q&&null!=Re)return b._isValid=!1,b;if(A[4]){if(!Qs.exec(A[4]))return b._isValid=!1,b;Ft="Z"}return b._f=ie+(Re||"")+(Ft||""),Fr(b)}function sl(b){const z=parseInt(b,10);return z<=49?z+2e3:z}function Fl(b){if(!We(b._i))return b;const z=Rs.exec(function cf(b){return b.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(b._i));if(!z)return function Ru(b){return b._isValid=!1,b}(b);const A=function Pl(b,z,A,q,ie,Re){const Ft=[sl(b),we.indexOf(z),parseInt(A,10),parseInt(q,10),parseInt(ie,10)];return Re&&Ft.push(parseInt(Re,10)),Ft}(z[4],z[3],z[2],z[5],z[6],z[7]);return function zc(b,z,A){return!b||$e.indexOf(b)===new Date(z[0],z[1],z[2]).getDay()||(Ot(A).weekdayMismatch=!0,A._isValid=!1,!1)}(z[1],A,b)&&(b._a=A,b._tzm=function rd(b,z,A){if(b)return eu[b];if(z)return 0;{const q=parseInt(A,10),ie=q%100;return(q-ie)/100*60+ie}}(z[8],z[9],z[10]),b._d=jr.apply(null,b._a),b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),Ot(b).rfc2822=!0),b}function Ss(b,z,A,q,ie=0){const Re=Js(A||"en");if(!Re)throw new Error(`Locale "${A}" is not defined, please add it with "defineLocale(...)"`);const an=function ad(b,z,A,q,ie=0){if(!Ct(b))return A.invalidDate;const Re=or(z,A);return fr[Re]=fr[Re]||function Jn(b){const z=b.match(Mi),A=z.length,q=new Array(A);for(let ie=0;ie<A;ie++)q[ie]=Nr[z[ie]]?Nr[z[ie]]:ia(z[ie]);return function(ie,Re,Ft,an=0){let sr="";for(let Us=0;Us<A;Us++)sr+=ot(q[Us])?q[Us].call(null,ie,{format:b,locale:Re,isUTC:Ft,offset:an}):q[Us];return sr}}(Re),fr[Re](b,A,q,ie)}(b,z||(q?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),Re,q,ie);return an&&Re.postformat(an)}function or(b,z){let A=b,q=5;const ie=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Re=Ft=>z.formatLongDate(Ft)||Ft;for(ie.lastIndex=0;q>=0&&ie.test(A);)A=A.replace(ie,Re),ie.lastIndex=0,q-=1;return A}function Bl(b,z,A){return b??z??A}function hu(b){const z=[];let A,q,ie;if(b._d)return b;const Re=function Ou(b){const z=new Date;return b._useUTC?[z.getUTCFullYear(),z.getUTCMonth(),z.getUTCDate()]:[z.getFullYear(),z.getMonth(),z.getDate()]}(b);for(b._w&&null==b._a[Ni]&&null==b._a[Si]&&function Cc(b){let z,A,q,ie,Re,Ft,an;const sr=b._w;if(null!=sr.GG||null!=sr.W||null!=sr.E)ie=1,Re=4,z=Bl(sr.GG,b._a[It],Se(new Date,1,4).year),A=Bl(sr.W,1),q=Bl(sr.E,1),(q<1||q>7)&&(an=!0);else{ie=b._locale._week.dow,Re=b._locale._week.doy;const Us=Se(new Date,ie,Re);z=Bl(sr.gg,b._a[It],Us.year),A=Bl(sr.w,Us.week),null!=sr.d?(q=sr.d,(q<0||q>6)&&(an=!0)):null!=sr.e?(q=sr.e+ie,(sr.e<0||sr.e>6)&&(an=!0)):q=ie}A<1||A>ze(z,ie,Re)?Ot(b)._overflowWeeks=!0:null!=an?Ot(b)._overflowWeekday=!0:(Ft=function Pe(b,z,A,q,ie){const an=1+7*(z-1)+(7+A-q)%7+De(b,q,ie);let sr,Us;return an<=0?(sr=b-1,Us=En(sr)+an):an>En(b)?(sr=b+1,Us=an-En(b)):(sr=b,Us=an),{year:sr,dayOfYear:Us}}(z,A,q,ie,Re),b._a[It]=Ft.year,b._dayOfYear=Ft.dayOfYear)}(b),null!=b._dayOfYear&&(ie=Bl(b._a[It],Re[It]),(b._dayOfYear>En(ie)||0===b._dayOfYear)&&(Ot(b)._overflowDayOfYear=!0),q=new Date(Date.UTC(ie,0,b._dayOfYear)),b._a[Si]=q.getUTCMonth(),b._a[Ni]=q.getUTCDate()),A=0;A<3&&null==b._a[A];++A)b._a[A]=z[A]=Re[A];for(;A<7;A++)b._a[A]=z[A]=null==b._a[A]?2===A?1:0:b._a[A];24===b._a[Zi]&&0===b._a[Rn]&&0===b._a[Ki]&&0===b._a[tn]&&(b._nextDay=!0,b._a[Zi]=0),b._d=(b._useUTC?jr:Pr).apply(null,z);const Ft=b._useUTC?b._d.getUTCDay():b._d.getDay();return null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),b._nextDay&&(b._a[Zi]=24),b._w&&typeof b._w.d<"u"&&b._w.d!==Ft&&(Ot(b).weekdayMismatch=!0),b}function Ei(b){let z;const A=b._a;return A&&-2===Ot(b).overflow&&(z=A[Si]<0||A[Si]>11?Si:A[Ni]<1||A[Ni]>Bt(A[It],A[Si])?Ni:A[Zi]<0||A[Zi]>24||24===A[Zi]&&(0!==A[Rn]||0!==A[Ki]||0!==A[tn])?Zi:A[Rn]<0||A[Rn]>59?Rn:A[Ki]<0||A[Ki]>59?Ki:A[tn]<0||A[tn]>999?tn:-1,Ot(b)._overflowDayOfYear&&(z<It||z>Ni)&&(z=Ni),Ot(b)._overflowWeeks&&-1===z&&(z=yn),Ot(b)._overflowWeekday&&-1===z&&(z=Nn),Ot(b).overflow=z),b}const pn="ISO_8601",nn="RFC_2822";function Fr(b){if(b._f===pn)return _o(b);if(b._f===nn)return Fl(b);if(b._a=[],Ot(b).empty=!0,et(b._f)||!b._i&&0!==b._i)return b;let z=b._i.toString(),A=0;const q=z.length,ie=or(b._f,b._locale).match(Mi)||[];let Re,Ft,an,sr;for(Re=0;Re<ie.length;Re++)Ft=ie[Re],an=(z.match(Bi(Ft,b._locale))||[])[0],an&&(sr=z.substr(0,z.indexOf(an)),sr.length>0&&Ot(b).unusedInput.push(sr),z=z.slice(z.indexOf(an)+an.length),A+=an.length),Nr[Ft]?(an?Ot(b).empty=!1:Ot(b).unusedTokens.push(Ft),Ut(Ft,an,b)):b._strict&&!an&&Ot(b).unusedTokens.push(Ft);return Ot(b).charsLeftOver=q-A,z.length>0&&Ot(b).unusedInput.push(z),b._a[Zi]<=12&&!0===Ot(b).bigHour&&b._a[Zi]>0&&(Ot(b).bigHour=void 0),Ot(b).parsedDateParts=b._a.slice(0),Ot(b).meridiem=b._meridiem,b._a[Zi]=function Wa(b,z,A){let q=z;if(null==A)return q;if(null!=b.meridiemHour)return b.meridiemHour(q,A);if(null==b.isPM)return q;const ie=b.isPM(A);return ie&&q<12&&(q+=12),!ie&&12===q&&(q=0),q}(b._locale,b._a[Zi],b._meridiem),hu(b),Ei(b)}function vs(b){const z=Ei(function El(b){let z=b._i;const A=b._f;return b._locale=b._locale||Js(b._l),null===z||void 0===A&&""===z?Jc(b,{nullInput:!0}):(We(z)&&(b._i=z=b._locale.preparse(z,A)),nt(z)?(b._d=H(z),b):(et(A)?function Os(b){let z,A,q,ie,Re;if(!b._f||0===b._f.length)return Ot(b).invalidFormat=!0,Jc(b);for(Re=0;Re<b._f.length;Re++)ie=0,z=Object.assign({},b),null!=b._useUTC&&(z._useUTC=b._useUTC),z._f=b._f[Re],Fr(z),bc(z)&&(ie+=Ot(z).charsLeftOver,ie+=10*Ot(z).unusedTokens.length,Ot(z).score=ie,(null==q||ie<q)&&(q=ie,A=z));Object.assign(b,A||z)}(b):A?Fr(b):function sd(b){const z=b._i;if(tt(z))b._d=new Date;else if(nt(z))b._d=H(z);else if(We(z))!function pl(b){if(!We(b._i))return b;const z=wc.exec(b._i);null!==z?b._d=new Date(+z[1]):(_o(b),!1!==b._isValid||(delete b._isValid,Fl(b),!1!==b._isValid||(delete b._isValid,Jc(b))))}(b);else if(et(z)&&z.length){const A=z.slice(0);b._a=A.map(q=>We(q)?parseInt(q,10):q),hu(b)}else if(gt(z))!function Yo(b){if(b._d)return b;const z=b._i;if(gt(z)){const A=function fi(b){const z={};let A,q;for(q in b)lt(b,q)&&(A=xi(q),A&&(z[A]=b[q]));return z}(z);b._a=[A.year,A.month,A.day,A.hours,A.minutes,A.seconds,A.milliseconds].map(q=>We(q)?parseInt(q,10):q)}return hu(b)}(b);else{if(!Wt(z))return Jc(b);b._d=new Date(z)}}(b),bc(b)||(b._d=null),b))}(b));return z._d=new Date(null!=z._d?z._d.getTime():NaN),bc(Object.assign({},z,{_isValid:null}))||(z._d=new Date(NaN)),z}function tu(b,z,A,q,ie){return nt(b)?b:function ol(b,z,A,q,ie){const Re={};let Ft=b;return(gt(Ft)&&function _i(b){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(b).length;let z;for(z in b)if(b.hasOwnProperty(z))return!1;return!0}(Ft)||et(Ft)&&0===Ft.length)&&(Ft=void 0),Re._useUTC=Re._isUTC=ie,Re._l=A,Re._i=Ft,Re._f=z,Re._strict=q,vs(Re)}(b,z,A,q,ie)._d}function ml(b){return b instanceof Date?new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()):null}function tc(b){return b<0?-1*Math.round(-1*b):Math.round(b)}function Hs(b,z,A="milliseconds"){return!(!b||!z)&&("milliseconds"===A?b.valueOf()>z.valueOf():z.valueOf()<Z(b,A).valueOf())}function tl(b,z,A="milliseconds"){return!(!b||!z)&&("milliseconds"===A?b.valueOf()<z.valueOf():J(b,A).valueOf()<z.valueOf())}function gl(b,z,A="milliseconds"){if(!b||!z)return!1;if("milliseconds"===A)return b.valueOf()===z.valueOf();const q=z.valueOf();return Z(b,A).valueOf()<=q&&q<=J(b,A).valueOf()}const Fu=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Yc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function il(b,z,A={}){const q=function Nl(b,z){if(null==b)return{};if(function Kc(b){return b instanceof $a}(b))return{milliseconds:b._milliseconds,day:b._days,month:b._months};if(Wt(b))return z?{[z]:b}:{milliseconds:b};if(We(b)){let A=Fu.exec(b);if(A){const q="-"===A[1]?-1:1;return{year:0,day:yi(A[Ni])*q,hours:yi(A[Zi])*q,minutes:yi(A[Rn])*q,seconds:yi(A[Ki])*q,milliseconds:yi(tc(1e3*yi(A[tn])))*q}}if(A=Yc.exec(b),A){const q="-"===A[1]?-1:1;return{year:zl(A[2],q),month:zl(A[3],q),week:zl(A[4],q),day:zl(A[5],q),hours:zl(A[6],q),minutes:zl(A[7],q),seconds:zl(A[8],q)}}}if(gt(b)&&("from"in b||"to"in b)){const A=function Xo(b,z){if(!Ct(b)||!Ct(z))return{milliseconds:0,months:0};let A;const q=function qd(b,z,A={}){if(!A._isUTC)return b;const q=H(z),ie=6e4*(A._offset||0),Re=b.valueOf()-q.valueOf()+ie;return q.setTime(q.valueOf()+Re),q}(z,b,{_offset:b.getTimezoneOffset()});return tl(b,q)?A=Yl(b,q):(A=Yl(q,b),A.milliseconds=-A.milliseconds,A.months=-A.months),A}(tu(b.from),tu(b.to));return{milliseconds:A.milliseconds,month:A.months}}return b}(b,z);return new $a(q,A)}function zl(b,z){const A=b&&parseFloat(b.replace(",","."));return(isNaN(A)?0:A)*z}function Yl(b,z){const A={milliseconds:0,months:0};return A.months=Sn(z)-Sn(b)+12*(Dn(z)-Dn(b)),Hs(nc(H(b),A.months,"month"),z)&&--A.months,A.milliseconds=+z-+nc(H(b),A.months,"month"),A}function nc(b,z,A,q){return kl(b,il(z,A),1,q)}function kl(b,z,A,q){const ie=z._milliseconds,Re=tc(z._days),Ft=tc(z._months);return Ft&&l(b,Sn(b,q)+Ft*A,q),Re&&M(b,ar(b,q)+Re*A,q),ie&&function N(b,z){b.setTime(z)}(b,function pr(b){return b.getTime()}(b)+ie*A),H(b)}function pu(b,z,A=Js(),q){const ie=$n(b,q),Re=function Gl(b,z){if(!We(b))return b;const A=parseInt(b,10);if(!isNaN(A))return A;const q=z.weekdaysParse(b);return Wt(q)?q:null}(z,A);return nc(b,Re-ie,"day")}function dr(b,z=Js(),A){return($n(b,A)+7-z.firstDayOfWeek())%7}const Ye=function(b){return 0===b?0:1===b?1:2===b?2:b%100>=3&&b%100<=10?3:b%100>=11?4:5},ni={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},Ri=function(b){return function(z,A){const q=Ye(z);let ie=ni[b][Ye(z)];return 2===q&&(ie=ie[A?0:1]),ie.replace(/%d/i,z.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),Ri("s"),Ri("s"),Ri("m"),Ri("m"),Ri("h"),Ri("h"),Ri("d"),Ri("d"),Ri("M"),Ri("M"),Ri("y"),Ri("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const To="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),Hl="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(b,z){let A,q=[];for(A=0;A<12;A++)q[A]=new RegExp("^"+b[A]+"$|^"+z[A]+"$","i")})(To,Hl),function(b){let z,A=[];for(z=0;z<12;z++)A[z]=new RegExp("^"+b[z]+"$","i")}(Hl),function(b){let z,A=[];for(z=0;z<12;z++)A[z]=new RegExp("^"+b[z]+"$","i")}(To),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const vl={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:b=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===b,meridiem:(b,z,A)=>b<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(b,z){const A=vl.longDateFormat[z]?vl.longDateFormat[z]:z;return-1!==A.indexOf("YYYY",A.length-4)?b.substr(0,b.length-4)+(parseInt(b.substr(b.length-4),10)-543):b},getFullYear:(b,z=!1)=>543+(z?b.getUTCFullYear():b.getFullYear())};function fo(b){return function(z){return b+"\u043e"+(11===Mn(z)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),fo("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),fo("[\u0417\u0430\u0432\u0442\u0440\u0430 "),fo("[\u0412\u0447\u043e\u0440\u0430 "),fo("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");var Sh=Zt(140),iu=Zt(6504),_d=Zt(6700),od=Zt(756),yd=Zt(3252),xd=Zt(3920),Dh=Zt(208);class th extends _d.g{constructor(z,A,q){super(z),A.pipe((0,xd.y)(od.M)).pipe((0,Dh.K)((Ft,an)=>an?q(Ft,an):Ft,z)).subscribe(Ft=>this.next(Ft))}}class $h extends yd._{constructor(z,A,q){super(),this._dispatcher=z,this._reducer=A,this.source=q}select(z){return(this.source?.pipe((0,Ze.k)(z))||(new yd._).pipe((0,Ze.k)(z))).pipe((0,He.a)())}lift(z){const A=new $h(this._dispatcher,this._reducer,this);return A.operator=z,A}dispatch(z){this._dispatcher.next(z)}next(z){this._dispatcher.next(z)}error(z){this._dispatcher.error(z)}complete(){}}var Zo=Zt(1368);function As(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0\xa0\xa0"),T.C$Y())}function vv(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td")(1,"a",1),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeMinutes(ie.minuteStep))}),T.wR5(2,"span",2),T.C$Y()()}if(2&b){const A=T.GaO();T.yG2(),T.eAK("disabled",!A.canIncrementMinutes||!A.isEditable)}}function rm(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0"),T.C$Y())}function Ah(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td")(1,"a",1),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeSeconds(ie.secondsStep))}),T.wR5(2,"span",2),T.C$Y()()}if(2&b){const A=T.GaO();T.yG2(),T.eAK("disabled",!A.canIncrementSeconds||!A.isEditable)}}function Zm(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0\xa0\xa0"),T.C$Y())}function Uf(b,z){1&b&&T.wR5(0,"td")}function Ep(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0:\xa0"),T.C$Y())}function Tl(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td",4)(1,"input",5),T.qCj("wheel",function(ie){T.usT(A);const Re=T.GaO();return Re.prevDef(ie),T.CGJ(Re.changeMinutes(Re.minuteStep*Re.wheelSign(ie),"wheel"))})("keydown.ArrowUp",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeMinutes(ie.minuteStep,"key"))})("keydown.ArrowDown",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeMinutes(-ie.minuteStep,"key"))})("change",function(ie){T.usT(A);const Re=T.GaO();return T.CGJ(Re.updateMinutes(ie.target))}),T.C$Y()()}if(2&b){const A=T.GaO();T.eAK("has-error",A.invalidMinutes),T.yG2(),T.eAK("is-invalid",A.invalidMinutes),T.E7m("placeholder",A.minutesPlaceholder)("readonly",A.readonlyInput)("disabled",A.disabled)("value",A.minutes),T.e48("aria-label",A.labelMinutes)}}function kp(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0:\xa0"),T.C$Y())}function Tp(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td",4)(1,"input",5),T.qCj("wheel",function(ie){T.usT(A);const Re=T.GaO();return Re.prevDef(ie),T.CGJ(Re.changeSeconds(Re.secondsStep*Re.wheelSign(ie),"wheel"))})("keydown.ArrowUp",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeSeconds(ie.secondsStep,"key"))})("keydown.ArrowDown",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeSeconds(-ie.secondsStep,"key"))})("change",function(ie){T.usT(A);const Re=T.GaO();return T.CGJ(Re.updateSeconds(ie.target))}),T.C$Y()()}if(2&b){const A=T.GaO();T.eAK("has-error",A.invalidSeconds),T.yG2(),T.eAK("is-invalid",A.invalidSeconds),T.E7m("placeholder",A.secondsPlaceholder)("readonly",A.readonlyInput)("disabled",A.disabled)("value",A.seconds),T.e48("aria-label",A.labelSeconds)}}function Sp(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0\xa0\xa0"),T.C$Y())}function Km(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td")(1,"button",8),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.toggleMeridian())}),T.OEk(2),T.C$Y()()}if(2&b){const A=T.GaO();T.yG2(),T.eAK("disabled",!A.isEditable||!A.canToggleMeridian),T.E7m("disabled",!A.isEditable||!A.canToggleMeridian),T.yG2(),T.oRS("",A.meridian," ")}}function Jm(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0\xa0\xa0"),T.C$Y())}function Vl(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td")(1,"a",1),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeMinutes(-ie.minuteStep))}),T.wR5(2,"span",7),T.C$Y()()}if(2&b){const A=T.GaO();T.yG2(),T.eAK("disabled",!A.canDecrementMinutes||!A.isEditable)}}function ih(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0"),T.C$Y())}function df(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td")(1,"a",1),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.changeSeconds(-ie.secondsStep))}),T.wR5(2,"span",7),T.C$Y()()}if(2&b){const A=T.GaO();T.yG2(),T.eAK("disabled",!A.canDecrementSeconds||!A.isEditable)}}function Lo(b,z){1&b&&(T.I0R(0,"td"),T.OEk(1,"\xa0\xa0\xa0"),T.C$Y())}function Vo(b,z){1&b&&T.wR5(0,"td")}let Ps=(()=>{class b{static#e=this.WRITE_VALUE="[timepicker] write value from ng model";static#t=this.CHANGE_HOURS="[timepicker] change hours";static#i=this.CHANGE_MINUTES="[timepicker] change minutes";static#n=this.CHANGE_SECONDS="[timepicker] change seconds";static#r=this.SET_TIME_UNIT="[timepicker] set time unit";static#a=this.UPDATE_CONTROLS="[timepicker] update controls";writeValue(A){return{type:b.WRITE_VALUE,payload:A}}changeHours(A){return{type:b.CHANGE_HOURS,payload:A}}changeMinutes(A){return{type:b.CHANGE_MINUTES,payload:A}}changeSeconds(A){return{type:b.CHANGE_SECONDS,payload:A}}setTime(A){return{type:b.SET_TIME_UNIT,payload:A}}updateControls(A){return{type:b.UPDATE_CONTROLS,payload:A}}static#s=this.\u0275fac=function(q){return new(q||b)};static#o=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const Sl=10,nh=24,rh=12,am=60,bd=60;function Qm(b){return!(!b||b instanceof Date&&isNaN(b.getHours()))&&("string"!=typeof b||Qm(new Date(b)))}function ah(b,z){return!(b.min&&z<b.min||b.max&&z>b.max)}function _u(b){return typeof b>"u"?NaN:"number"==typeof b?b:parseInt(b,Sl)}function Ul(b,z=!1){const A=_u(b);return isNaN(A)||A<0||A>(z?rh:nh)?NaN:A}function eg(b){const z=_u(b);return isNaN(z)||z<0||z>am?NaN:z}function a0(b){const z=_u(b);return isNaN(z)||z<0||z>bd?NaN:z}function nl(b){return"string"==typeof b?new Date(b):b}function zr(b,z){if(!b)return zr(oh(new Date,0,0,0),z);if(!z)return b;let A=b.getHours(),q=b.getMinutes(),ie=b.getSeconds();return z.hour&&(A+=_u(z.hour)),z.minute&&(q+=_u(z.minute)),z.seconds&&(ie+=_u(z.seconds)),oh(b,A,q,ie)}function sh(b,z){let A=Ul(z.hour);const q=eg(z.minute),ie=a0(z.seconds)||0;return z.isPM&&12!==A&&(A+=rh),b?isNaN(A)||isNaN(q)?b:oh(b,A,q,ie):isNaN(A)||isNaN(q)?b:oh(new Date,A,q,ie)}function oh(b,z,A,q){const ie=new Date(b.getFullYear(),b.getMonth(),b.getDate(),z,A,q,b.getMilliseconds());return ie.setFullYear(b.getFullYear()),ie.setMonth(b.getMonth()),ie.setDate(b.getDate()),ie}function kc(b){const z=b.toString();return z.length>1?z:`0${z}`}function sm(b,z){return!isNaN(Ul(b,z))}function nu(b){return!isNaN(eg(b))}function _l(b){return!isNaN(a0(b))}function yu(b,z="0",A="0",q){return sm(b,q)&&nu(z)&&_l(A)}function xu(b,z){return!(b.readonlyInput||b.disabled||z&&("wheel"===z.source&&!b.mousewheel||"key"===z.source&&!b.arrowkeys))}function cm(b){const{hourStep:z,minuteStep:A,secondsStep:q,readonlyInput:ie,disabled:Re,mousewheel:Ft,arrowkeys:an,showSpinners:sr,showMeridian:Us,showSeconds:Co,meridians:yl,min:$c,max:Df}=b;return{hourStep:z,minuteStep:A,secondsStep:q,readonlyInput:ie,disabled:Re,mousewheel:Ft,arrowkeys:an,showSpinners:sr,showMeridian:Us,showSeconds:Co,meridians:yl,min:$c,max:Df}}let Mh=(()=>{class b{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const um={value:void 0,config:new Mh,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function hf(b=um,z){switch(z.type){case Ps.WRITE_VALUE:return Object.assign({},b,{value:z.payload});case Ps.CHANGE_HOURS:{if(!xu(b.config,z.payload)||!function lm(b,z){return!(!b.step||b.step>0&&!z.canIncrementHours||b.step<0&&!z.canDecrementHours)}(z.payload,b.controls))return b;const A=zr(b.value,{hour:z.payload.step});return!b.config.max&&!b.config.min||ah(b.config,A)?Object.assign({},b,{value:A}):b}case Ps.CHANGE_MINUTES:{if(!xu(b.config,z.payload)||!function Dp(b,z){return!(!b.step||b.step>0&&!z.canIncrementMinutes||b.step<0&&!z.canDecrementMinutes)}(z.payload,b.controls))return b;const A=zr(b.value,{minute:z.payload.step});return!b.config.max&&!b.config.min||ah(b.config,A)?Object.assign({},b,{value:A}):b}case Ps.CHANGE_SECONDS:{if(!xu(b.config,z.payload)||!function tg(b,z){return!(!b.step||b.step>0&&!z.canIncrementSeconds||b.step<0&&!z.canDecrementSeconds)}(z.payload,b.controls))return b;const A=zr(b.value,{seconds:z.payload.step});return!b.config.max&&!b.config.min||ah(b.config,A)?Object.assign({},b,{value:A}):b}case Ps.SET_TIME_UNIT:{if(!xu(b.config))return b;const A=sh(b.value,z.payload);return Object.assign({},b,{value:A})}case Ps.UPDATE_CONTROLS:{const A=function Ih(b,z){const{min:ie,max:Re,hourStep:Ft,minuteStep:an,secondsStep:sr,showSeconds:Us}=z,Co={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!b)return Co;if(Re){const yl=zr(b,{hour:Ft});if(Co.canIncrementHours=Re>yl&&b.getHours()+Ft<24,!Co.canIncrementHours){const $c=zr(b,{minute:an});Co.canIncrementMinutes=Us?Re>$c:Re>=$c}if(!Co.canIncrementMinutes){const $c=zr(b,{seconds:sr});Co.canIncrementSeconds=Re>=$c}b.getHours()<12&&(Co.canToggleMeridian=zr(b,{hour:12})<Re)}if(ie){const yl=zr(b,{hour:-Ft});if(Co.canDecrementHours=ie<yl,!Co.canDecrementHours){const $c=zr(b,{minute:-an});Co.canDecrementMinutes=Us?ie<$c:ie<=$c}if(!Co.canDecrementMinutes){const $c=zr(b,{seconds:-sr});Co.canDecrementSeconds=ie<=$c}b.getHours()>=12&&(Co.canToggleMeridian=zr(b,{hour:-12})>ie)}return Co}(b.value,z.payload),q={value:b.value,config:z.payload,controls:A};return b.config.showMeridian!==q.config.showMeridian&&b.value&&(q.value=new Date(b.value)),Object.assign({},b,q)}default:return b}}let Bd=(()=>{class b extends $h{constructor(){const A=new _d.g({type:"[mini-ngrx] dispatcher init"});super(A,hf,new th(um,A,hf))}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const wd={provide:iu.Y6,useExisting:(0,T.wd)(()=>$f),multi:!0};let $f=(()=>{class b{constructor(A,q,ie,Re){this._cd=q,this._store=ie,this._timepickerActions=Re,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new T._w7,this.meridianChange=new T._w7,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=A,Object.assign(this,this.config),this.timepickerSub=ie.select(Ft=>Ft.value).subscribe(Ft=>{this._renderTime(Ft),this.onChange(Ft),this._store.dispatch(this._timepickerActions.updateControls(cm(this)))}),ie.select(Ft=>Ft.controls).subscribe(Ft=>{const an=yu(this.hours,this.minutes,this.seconds,this.isPM()),sr=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||an;this.isValid.emit(sr),Object.assign(this,Ft),q.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(A){A.preventDefault()}wheelSign(A){return-1*Math.sign(A.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(cm(this)))}changeHours(A,q=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:A,source:q}))}changeMinutes(A,q=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:A,source:q}))}changeSeconds(A,q=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:A,source:q}))}updateHours(A){this.resetValidation(),this.hours=A.value;const q=sm(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||q))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(A){this.resetValidation(),this.minutes=A.value;const q=nu(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||q))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(A){this.resetValidation(),this.seconds=A.value;const q=_l(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||q))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function om(b,z,A){const q=sh(new Date,b);return!(!q||z&&q>z||A&&q<A)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function ru(b,z,A){return 0===b.length||0===z.length||0===A.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const ie=yu(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||ie))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(A){Qm(A)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(nl(A)))):null==A&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(A){this.onChange=A}registerOnTouched(A){this.onTouched=A}setDisabledState(A){this.disabled=A,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(A){if(!A||!Qm(A))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const q=nl(A);if(!q)return;let Re=q.getHours();this.showMeridian&&(this.meridian=this.meridians[Re>=12?1:0],this.meridianChange.emit(this.meridian),Re%=12,0===Re&&(Re=12)),this.hours=kc(Re),this.minutes=kc(q.getMinutes()),this.seconds=kc(q.getUTCSeconds())}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(Mh),T.GI1(T.kD9),T.GI1(Bd),T.GI1(Ps))};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[T.M5G([wd,Bd]),T.SYr],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(q,ie){1&q&&(T.I0R(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),T.qCj("click",function(){return ie.changeHours(ie.hourStep)}),T.wR5(5,"span",2),T.C$Y()(),T.yuY(6,As,2,0,"td",3)(7,vv,3,2,"td",3)(8,rm,2,0,"td",3)(9,Ah,3,2,"td",3)(10,Zm,2,0,"td",3)(11,Uf,1,0,"td",3),T.C$Y(),T.I0R(12,"tr")(13,"td",4)(14,"input",5),T.qCj("wheel",function(Ft){return ie.prevDef(Ft),ie.changeHours(ie.hourStep*ie.wheelSign(Ft),"wheel")})("keydown.ArrowUp",function(){return ie.changeHours(ie.hourStep,"key")})("keydown.ArrowDown",function(){return ie.changeHours(-ie.hourStep,"key")})("change",function(Ft){return ie.updateHours(Ft.target)}),T.C$Y()(),T.yuY(15,Ep,2,0,"td",3)(16,Tl,2,9,"td",6)(17,kp,2,0,"td",3)(18,Tp,2,9,"td",6)(19,Sp,2,0,"td",3)(20,Km,3,4,"td",3),T.C$Y(),T.I0R(21,"tr",0)(22,"td")(23,"a",1),T.qCj("click",function(){return ie.changeHours(-ie.hourStep)}),T.wR5(24,"span",7),T.C$Y()(),T.yuY(25,Jm,2,0,"td",3)(26,Vl,3,2,"td",3)(27,ih,2,0,"td",3)(28,df,3,2,"td",3)(29,Lo,2,0,"td",3)(30,Vo,1,0,"td",3),T.C$Y()()()),2&q&&(T.yG2(2),T.E7m("hidden",!ie.showSpinners),T.yG2(2),T.eAK("disabled",!ie.canIncrementHours||!ie.isEditable),T.yG2(2),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showMeridian),T.yG2(),T.E7m("ngIf",ie.showMeridian),T.yG2(2),T.eAK("has-error",ie.invalidHours),T.yG2(),T.eAK("is-invalid",ie.invalidHours),T.E7m("placeholder",ie.hoursPlaceholder)("readonly",ie.readonlyInput)("disabled",ie.disabled)("value",ie.hours),T.e48("aria-label",ie.labelHours),T.yG2(),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showMeridian),T.yG2(),T.E7m("ngIf",ie.showMeridian),T.yG2(),T.E7m("hidden",!ie.showSpinners),T.yG2(2),T.eAK("disabled",!ie.canDecrementHours||!ie.isEditable),T.yG2(2),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showMinutes),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showSeconds),T.yG2(),T.E7m("ngIf",ie.showMeridian),T.yG2(),T.E7m("ngIf",ie.showMeridian))},dependencies:[Zo.u_],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0})}return b})(),jl=(()=>{class b{static forRoot(){return{ngModule:b,providers:[Ps,Bd]}}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275mod=T.a4G({type:b});static#i=this.\u0275inj=T.s3X({providers:[Bd],imports:[Zo.MD]})}return b})();var cc=Zt(9684),Nd=Zt(6928),au=Zt(6040),Cd=Zt(5657),$l=Zt(7995),bu=Zt(6552);function Ap(b,z){if(1&b){const A=T.KQA();T.I0R(0,"button",2),T.qCj("click",function(){const Re=T.usT(A).$implicit,Ft=T.GaO();return T.CGJ(Ft.selectFromRanges(Re))}),T.OEk(1),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO();T.eAK("selected",A.value===q.selectedRange),T.yG2(),T.oRS(" ",A.label," ")}}function rl(b,z){1&b&&T.wR5(0,"bs-current-date",4)}function ig(b,z){1&b&&T.wR5(0,"bs-timepicker")}const ld=[[["bs-datepicker-navigation-view"]],"*"],Ed=["bs-datepicker-navigation-view","*"],s0=["bsDatepickerDayDecorator",""];function _v(b,z){if(1&b){const A=T.KQA();T.SAx(0),T.OEk(1," \u200b "),T.I0R(2,"button",2),T.qCj("click",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.view("month"))}),T.I0R(3,"span"),T.OEk(4),T.C$Y()(),T.k70()}if(2&b){const A=T.GaO();T.yG2(2),T.E7m("disabled",A.isDisabled),T.yG2(2),T.cNF(A.calendar.monthTitle)}}function ng(b,z){1&b&&T.wR5(0,"th")}function o0(b,z){if(1&b&&(T.I0R(0,"th",5),T.OEk(1),T.C$Y()),2&b){const A=z.index,q=T.GaO();T.yG2(),T.oRS("",q.calendar.weekdays[A]," ")}}function ff(b,z){if(1&b){const A=T.KQA();T.I0R(0,"span",11),T.qCj("click",function(){T.usT(A);const ie=T.GaO(2).$implicit,Re=T.GaO();return T.CGJ(Re.selectWeek(ie))}),T.OEk(1),T.C$Y()}if(2&b){const A=T.GaO(2).index,q=T.GaO();T.yG2(),T.cNF(q.calendar.weekNumbers[A])}}function zd(b,z){if(1&b){const A=T.KQA();T.I0R(0,"span",12),T.qCj("click",function(){T.usT(A);const ie=T.GaO(2).$implicit,Re=T.GaO();return T.CGJ(Re.selectWeek(ie))})("mouseenter",function(){T.usT(A);const ie=T.GaO(2).$implicit,Re=T.GaO();return T.CGJ(Re.weekHoverHandler(ie,!0))})("mouseleave",function(){T.usT(A);const ie=T.GaO(2).$implicit,Re=T.GaO();return T.CGJ(Re.weekHoverHandler(ie,!1))}),T.OEk(1),T.C$Y()}if(2&b){const A=T.GaO(2).index,q=T.GaO();T.yG2(),T.cNF(q.calendar.weekNumbers[A])}}function dm(b,z){if(1&b&&(T.I0R(0,"td",8),T.yuY(1,ff,2,1,"span",9)(2,zd,2,1,"span",10),T.C$Y()),2&b){const A=T.GaO(2);T.eAK("active-week",A.isWeekHovered),T.yG2(),T.E7m("ngIf",A.isiOS),T.yG2(),T.E7m("ngIf",!A.isiOS)}}function hm(b,z){if(1&b){const A=T.KQA();T.I0R(0,"span",17),T.qCj("click",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.selectDay(ie))})("mouseenter",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.hoverDay(ie,!0))})("mouseleave",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.hoverDay(ie,!1))}),T.OEk(1),T.C$Y()}if(2&b){const A=T.GaO().$implicit;T._6D("tooltip",A.tooltipText),T.E7m("day",A),T.yG2(),T.oRS("",A.label," 3")}}function fm(b,z){if(1&b){const A=T.KQA();T.I0R(0,"span",18),T.qCj("click",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.selectDay(ie))})("mouseenter",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.hoverDay(ie,!0))})("mouseleave",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.hoverDay(ie,!1))}),T.OEk(1),T.C$Y()}if(2&b){const A=T.GaO().$implicit;T.E7m("day",A),T.yG2(),T.oRS("",A.label," 2")}}function pm(b,z){if(1&b){const A=T.KQA();T.I0R(0,"span",19),T.qCj("click",function(){T.usT(A);const ie=T.GaO().$implicit,Re=T.GaO(2);return T.CGJ(Re.selectDay(ie))}),T.OEk(1),T.C$Y()}if(2&b){const A=T.GaO().$implicit;T.E7m("day",A),T.yG2(),T.oRS("",A.label," 1")}}function Wf(b,z){if(1&b&&(T.I0R(0,"td",13),T.yuY(1,hm,2,3,"span",14)(2,fm,2,2,"span",15)(3,pm,2,2,"span",16),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngIf",!A.isiOS&&A.isShowTooltip),T.yG2(),T.E7m("ngIf",!A.isiOS&&!A.isShowTooltip),T.yG2(),T.E7m("ngIf",A.isiOS)}}function Ba(b,z){if(1&b&&(T.I0R(0,"tr"),T.yuY(1,dm,3,4,"td",6)(2,Wf,4,3,"td",7),T.C$Y()),2&b){const A=z.$implicit,q=T.GaO();T.yG2(),T.E7m("ngIf",q.options&&q.options.showWeekNumbers),T.yG2(),T.E7m("ngForOf",A.days)}}function Ip(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td",4),T.qCj("click",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.viewMonth(Re))})("mouseenter",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.hoverMonth(Re,!0))})("mouseleave",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.hoverMonth(Re,!1))}),T.I0R(1,"span"),T.OEk(2),T.C$Y()()}if(2&b){const A=z.$implicit;T.eAK("disabled",A.isDisabled)("is-highlighted",A.isHovered),T.yG2(),T.eAK("selected",A.isSelected),T.yG2(),T.cNF(A.label)}}function pf(b,z){if(1&b&&(T.I0R(0,"tr"),T.yuY(1,Ip,3,7,"td",3),T.C$Y()),2&b){const A=z.$implicit;T.yG2(),T.E7m("ngForOf",A)}}function Rh(b,z){if(1&b){const A=T.KQA();T.I0R(0,"td",4),T.qCj("click",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.viewYear(Re))})("mouseenter",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.hoverYear(Re,!0))})("mouseleave",function(){const Re=T.usT(A).$implicit,Ft=T.GaO(2);return T.CGJ(Ft.hoverYear(Re,!1))}),T.I0R(1,"span"),T.OEk(2),T.C$Y()()}if(2&b){const A=z.$implicit;T.eAK("disabled",A.isDisabled)("is-highlighted",A.isHovered),T.yG2(),T.eAK("selected",A.isSelected),T.yG2(),T.cNF(A.label)}}function rg(b,z){if(1&b&&(T.I0R(0,"tr"),T.yuY(1,Rh,3,7,"td",3),T.C$Y()),2&b){const A=z.$implicit;T.yG2(),T.E7m("ngForOf",A)}}const Xf=["startTP"];function jc(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-days-calendar-view",11),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.dayHoverHandler(ie))})("onHoverWeek",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.weekHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.daySelectHandler(ie))}),T.wVc(1,"async"),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)("isDisabled",q.isDatePickerDisabled)("options",T.kDX(1,5,q.options$))}}function Tc(b,z){if(1&b&&T.wR5(0,"timepicker",13,16),2&b){const A=T.GaO(4);T.E7m("disabled",A.isDatePickerDisabled)}}function l0(b,z){if(1&b&&(T.I0R(0,"div",12),T.wR5(1,"timepicker",13,14),T.yuY(3,Tc,2,1,"timepicker",15),T.C$Y()),2&b){const A=T.GaO(3);T.yG2(),T.E7m("disabled",A.isDatePickerDisabled),T.yG2(2),T.E7m("ngIf",A.isRangePicker)}}function Yd(b,z){if(1&b&&(T.SAx(0),T.I0R(1,"div",8),T.yuY(2,jc,2,7,"bs-days-calendar-view",9),T.wVc(3,"async"),T.C$Y(),T.yuY(4,l0,4,2,"div",10),T.k70()),2&b){const A=T.GaO(2);T.yG2(2),T.E7m("ngForOf",T.kDX(3,2,A.daysCalendar$)),T.yG2(2),T.E7m("ngIf",A.withTimepicker)}}function c0(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-month-calendar-view",18),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.monthHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.monthSelectHandler(ie))}),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)}}function mf(b,z){if(1&b&&(T.I0R(0,"div",8),T.yuY(1,c0,1,3,"bs-month-calendar-view",17),T.wVc(2,"async"),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngForOf",T.kDX(2,1,A.monthsCalendar))}}function qf(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-years-calendar-view",18),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.yearHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.yearSelectHandler(ie))}),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)}}function kd(b,z){if(1&b&&(T.I0R(0,"div",8),T.yuY(1,qf,1,3,"bs-years-calendar-view",17),T.wVc(2,"async"),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngForOf",T.kDX(2,1,A.yearsCalendar))}}function Td(b,z){1&b&&(T.I0R(0,"div",19)(1,"button",20),T.OEk(2,"Apply"),T.C$Y(),T.I0R(3,"button",21),T.OEk(4,"Cancel"),T.C$Y()())}function yv(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",24)(1,"button",25),T.qCj("click",function(){T.usT(A);const ie=T.GaO(3);return T.CGJ(ie.setToday())}),T.OEk(2),T.C$Y()()}if(2&b){const A=T.GaO(3);T.eAK("today-left","left"===A.todayPos)("today-right","right"===A.todayPos)("today-center","center"===A.todayPos),T.yG2(2),T.cNF(A.todayBtnLbl)}}function cd(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",26)(1,"button",25),T.qCj("click",function(){T.usT(A);const ie=T.GaO(3);return T.CGJ(ie.clearDate())}),T.OEk(2),T.C$Y()()}if(2&b){const A=T.GaO(3);T.eAK("clear-left","left"===A.clearPos)("clear-right","right"===A.clearPos)("clear-center","center"===A.clearPos),T.yG2(2),T.cNF(A.clearBtnLbl)}}function su(b,z){if(1&b&&(T.I0R(0,"div",19),T.yuY(1,yv,3,7,"div",22)(2,cd,3,7,"div",23),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngIf",A.showTodayBtn),T.yG2(),T.E7m("ngIf",A.showClearBtn)}}function ag(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",27)(1,"bs-custom-date-view",28),T.qCj("onSelect",function(ie){T.usT(A);const Re=T.GaO(2);return T.CGJ(Re.setRangeOnCalendar(ie))}),T.C$Y()()}if(2&b){const A=T.GaO(2);T.yG2(),T.E7m("selectedRange",A.chosenRange)("ranges",A.customRanges)("customRangeLabel",A.customRangeBtnLbl)}}function mm(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",1)(1,"div",2),T.qCj("@datepickerAnimation.done",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.positionServiceEnable())}),T.I0R(2,"div",3),T.wVc(3,"async"),T.yuY(4,Yd,5,4,"ng-container",4)(5,mf,3,3,"div",5)(6,kd,3,3,"div",5),T.C$Y(),T.yuY(7,Td,5,0,"div",6)(8,su,3,2,"div",6),T.C$Y(),T.yuY(9,ag,2,3,"div",7),T.C$Y()}if(2&b){const A=T.GaO();T.E7m("ngClass",A.containerClass),T.yG2(),T.E7m("@datepickerAnimation",A.animationState),T.yG2(),T.E7m("ngSwitch",T.kDX(3,9,A.viewMode)),T.yG2(2),T.E7m("ngSwitchCase","day"),T.yG2(),T.E7m("ngSwitchCase","month"),T.yG2(),T.E7m("ngSwitchCase","year"),T.yG2(),T.E7m("ngIf",!1),T.yG2(),T.E7m("ngIf",A.showTodayBtn||A.showClearBtn),T.yG2(),T.E7m("ngIf",A.customRanges&&A.customRanges.length>0)}}const lg=["endTP"];function lh(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-days-calendar-view",11),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.dayHoverHandler(ie))})("onHoverWeek",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.weekHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.daySelectHandler(ie))}),T.wVc(1,"async"),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)("isDisabled",q.isDatePickerDisabled)("options",T.kDX(1,5,q.options$))}}function vm(b,z){if(1&b&&T.wR5(0,"timepicker",13,16),2&b){const A=T.GaO(4);T.E7m("disabled",A.isDatePickerDisabled)}}function _m(b,z){if(1&b&&(T.I0R(0,"div",12),T.wR5(1,"timepicker",13,14),T.yuY(3,vm,2,1,"timepicker",15),T.C$Y()),2&b){const A=T.GaO(3);T.yG2(),T.E7m("disabled",A.isDatePickerDisabled),T.yG2(2),T.E7m("ngIf",A.isRangePicker)}}function cg(b,z){if(1&b&&(T.SAx(0),T.I0R(1,"div",8),T.yuY(2,lh,2,7,"bs-days-calendar-view",9),T.wVc(3,"async"),T.C$Y(),T.yuY(4,_m,4,2,"div",10),T.k70()),2&b){const A=T.GaO(2);T.yG2(2),T.E7m("ngForOf",T.kDX(3,2,A.daysCalendar$)),T.yG2(2),T.E7m("ngIf",A.withTimepicker)}}function ym(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-month-calendar-view",18),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.monthHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.monthSelectHandler(ie))}),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)}}function h0(b,z){if(1&b&&(T.I0R(0,"div",8),T.yuY(1,ym,1,3,"bs-month-calendar-view",17),T.wVc(2,"async"),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngForOf",T.kDX(2,1,A.monthsCalendar))}}function zu(b,z){if(1&b){const A=T.KQA();T.I0R(0,"bs-years-calendar-view",18),T.qCj("onNavigate",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.navigateTo(ie))})("onViewMode",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.setViewMode(ie))})("onHover",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.yearHoverHandler(ie))})("onSelect",function(ie){T.usT(A);const Re=T.GaO(3);return T.CGJ(Re.yearSelectHandler(ie))}),T.C$Y()}if(2&b){const A=z.$implicit,q=T.GaO(3);T.eAK("bs-datepicker-multiple",q.multipleCalendars),T.E7m("calendar",A)}}function Wh(b,z){if(1&b&&(T.I0R(0,"div",8),T.yuY(1,zu,1,3,"bs-years-calendar-view",17),T.wVc(2,"async"),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngForOf",T.kDX(2,1,A.yearsCalendar))}}function Xh(b,z){1&b&&(T.I0R(0,"div",19)(1,"button",20),T.OEk(2,"Apply"),T.C$Y(),T.I0R(3,"button",21),T.OEk(4,"Cancel"),T.C$Y()())}function ao(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",24)(1,"button",25),T.qCj("click",function(){T.usT(A);const ie=T.GaO(3);return T.CGJ(ie.setToday())}),T.OEk(2),T.C$Y()()}if(2&b){const A=T.GaO(3);T.eAK("today-left","left"===A.todayPos)("today-right","right"===A.todayPos)("today-center","center"===A.todayPos),T.yG2(2),T.cNF(A.todayBtnLbl)}}function ug(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",26)(1,"button",25),T.qCj("click",function(){T.usT(A);const ie=T.GaO(3);return T.CGJ(ie.clearDate())}),T.OEk(2),T.C$Y()()}if(2&b){const A=T.GaO(3);T.eAK("clear-left","left"===A.clearPos)("clear-right","right"===A.clearPos)("clear-center","center"===A.clearPos),T.yG2(2),T.cNF(A.clearBtnLbl)}}function ch(b,z){if(1&b&&(T.I0R(0,"div",19),T.yuY(1,ao,3,7,"div",22)(2,ug,3,7,"div",23),T.C$Y()),2&b){const A=T.GaO(2);T.yG2(),T.E7m("ngIf",A.showTodayBtn),T.yG2(),T.E7m("ngIf",A.showClearBtn)}}function uh(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",27)(1,"bs-custom-date-view",28),T.qCj("onSelect",function(ie){T.usT(A);const Re=T.GaO(2);return T.CGJ(Re.setRangeOnCalendar(ie))}),T.C$Y()()}if(2&b){const A=T.GaO(2);T.yG2(),T.E7m("selectedRange",A.chosenRange)("ranges",A.customRanges)("customRangeLabel",A.customRangeBtnLbl)}}function Gd(b,z){if(1&b){const A=T.KQA();T.I0R(0,"div",1)(1,"div",2),T.qCj("@datepickerAnimation.done",function(){T.usT(A);const ie=T.GaO();return T.CGJ(ie.positionServiceEnable())}),T.I0R(2,"div",3),T.wVc(3,"async"),T.yuY(4,cg,5,4,"ng-container",4)(5,h0,3,3,"div",5)(6,Wh,3,3,"div",5),T.C$Y(),T.yuY(7,Xh,5,0,"div",6)(8,ch,3,2,"div",6),T.C$Y(),T.yuY(9,uh,2,3,"div",7),T.C$Y()}if(2&b){const A=T.GaO();T.E7m("ngClass",A.containerClass),T.yG2(),T.E7m("@datepickerAnimation",A.animationState),T.yG2(),T.E7m("ngSwitch",T.kDX(3,9,A.viewMode)),T.yG2(2),T.E7m("ngSwitchCase","day"),T.yG2(),T.E7m("ngSwitchCase","month"),T.yG2(),T.E7m("ngSwitchCase","year"),T.yG2(),T.E7m("ngIf",!1),T.yG2(),T.E7m("ngIf",A.showTodayBtn||A.showClearBtn),T.yG2(),T.E7m("ngIf",A.customRanges&&A.customRanges.length>0)}}let wu=(()=>{class b{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1,this.keepDatesOutOfRules=!1}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})();const Op="220ms cubic-bezier(0, 0, 0.2, 1)",Lp=(0,cc.gV)("datepickerAnimation",[(0,cc.K2)("animated-down",(0,cc.wb)({height:"*",overflow:"hidden"})),(0,cc.aK)("* => animated-down",[(0,cc.wb)({height:0,overflow:"hidden"}),(0,cc.Cs)(Op)]),(0,cc.K2)("animated-up",(0,cc.wb)({height:"*",overflow:"hidden"})),(0,cc.aK)("* => animated-up",[(0,cc.wb)({height:"*",overflow:"hidden"}),(0,cc.Cs)(Op)]),(0,cc.aK)("* => unanimated",(0,cc.Cs)("0s"))]);class bm{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Nd.wH,this.selectedTimeSub=new Nd.wH}set minDate(z){this._effects?.setMinDate(z)}set maxDate(z){this._effects?.setMaxDate(z)}set daysDisabled(z){this._effects?.setDaysDisabled(z)}set datesDisabled(z){this._effects?.setDatesDisabled(z)}set datesEnabled(z){this._effects?.setDatesEnabled(z)}set isDisabled(z){this._effects?.setDisabled(z)}set dateCustomClasses(z){this._effects?.setDateCustomClasses(z)}set dateTooltipTexts(z){this._effects?.setDateTooltipTexts(z)}set daysCalendar$(z){this._daysCalendar$=z,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(A=>{this.multipleCalendars=!!A&&A.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(z){}navigateTo(z){}dayHoverHandler(z){}weekHoverHandler(z){}monthHoverHandler(z){}yearHoverHandler(z){}timeSelectHandler(z,A){}daySelectHandler(z){}monthSelectHandler(z){}yearSelectHandler(z){}setRangeOnCalendar(z){}setToday(){}clearDate(){}_stopPropagation(z){z.stopPropagation()}}let Dl=(()=>{class b{static#e=this.CALCULATE="[datepicker] calculate dates matrix";static#t=this.FORMAT="[datepicker] format datepicker values";static#i=this.FLAG="[datepicker] set flags";static#n=this.SELECT="[datepicker] select date";static#r=this.NAVIGATE_OFFSET="[datepicker] shift view date";static#a=this.NAVIGATE_TO="[datepicker] change view date";static#s=this.SET_OPTIONS="[datepicker] update render options";static#o=this.HOVER="[datepicker] hover date";static#l=this.CHANGE_VIEWMODE="[datepicker] switch view mode";static#c=this.SET_MIN_DATE="[datepicker] set min date";static#u=this.SET_MAX_DATE="[datepicker] set max date";static#d=this.SET_DAYSDISABLED="[datepicker] set days disabled";static#h=this.SET_DATESDISABLED="[datepicker] set dates disabled";static#f=this.SET_DATESENABLED="[datepicker] set dates enabled";static#p=this.SET_IS_DISABLED="[datepicker] set is disabled";static#m=this.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes";static#g=this.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts";static#v=this.SET_LOCALE="[datepicker] set datepicker locale";static#_=this.SELECT_TIME="[datepicker] select time";static#y=this.SELECT_RANGE="[daterangepicker] select dates range";calculate(){return{type:b.CALCULATE}}format(){return{type:b.FORMAT}}flag(){return{type:b.FLAG}}select(A){return{type:b.SELECT,payload:A}}selectTime(A,q){return{type:b.SELECT_TIME,payload:{date:A,index:q}}}changeViewMode(A){return{type:b.CHANGE_VIEWMODE,payload:A}}navigateTo(A){return{type:b.NAVIGATE_TO,payload:A}}navigateStep(A){return{type:b.NAVIGATE_OFFSET,payload:A}}setOptions(A){return{type:b.SET_OPTIONS,payload:A}}selectRange(A){return{type:b.SELECT_RANGE,payload:A}}hoverDay(A){return{type:b.HOVER,payload:A.isHovered?A.cell.date:null}}minDate(A){return{type:b.SET_MIN_DATE,payload:A}}maxDate(A){return{type:b.SET_MAX_DATE,payload:A}}daysDisabled(A){return{type:b.SET_DAYSDISABLED,payload:A}}datesDisabled(A){return{type:b.SET_DATESDISABLED,payload:A}}datesEnabled(A){return{type:b.SET_DATESENABLED,payload:A}}isDisabled(A){return{type:b.SET_IS_DISABLED,payload:A}}setDateCustomClasses(A){return{type:b.SET_DATE_CUSTOM_CLASSES,payload:A}}setDateTooltipTexts(A){return{type:b.SET_DATE_TOOLTIP_TEXTS,payload:A}}setLocale(A){return{type:b.SET_LOCALE,payload:A}}static#x=this.\u0275fac=function(q){return new(q||b)};static#b=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),wm=(()=>{class b{constructor(){this._defaultLocale="en",this._locale=new _d.g(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(A){A!==this.currentLocale&&this._locale.next(A)}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),uc=(()=>{class b{constructor(A,q){this._actions=A,this._localeService=q,this._subs=[]}init(A){return this._store=A,this}setValue(A){this._store?.dispatch(this._actions.select(A))}setRangeValue(A){this._store?.dispatch(this._actions.selectRange(A))}setMinDate(A){return this._store?.dispatch(this._actions.minDate(A)),this}setMaxDate(A){return this._store?.dispatch(this._actions.maxDate(A)),this}setDaysDisabled(A){return this._store?.dispatch(this._actions.daysDisabled(A)),this}setDatesDisabled(A){return this._store?.dispatch(this._actions.datesDisabled(A)),this}setDatesEnabled(A){return this._store?.dispatch(this._actions.datesEnabled(A)),this}setDisabled(A){return this._store?.dispatch(this._actions.isDisabled(A)),this}setDateCustomClasses(A){return this._store?.dispatch(this._actions.setDateCustomClasses(A)),this}setDateTooltipTexts(A){return this._store?.dispatch(this._actions.setDateTooltipTexts(A)),this}setOptions(A){const q=Object.assign({locale:this._localeService.currentLocale},A);return this._store?.dispatch(this._actions.setOptions(q)),this}setBindings(A){return this._store?(A.selectedTime=this._store.select(q=>q.selectedTime).pipe((0,xt.I)(q=>!!q)),A.daysCalendar$=this._store.select(q=>q.flaggedMonths).pipe((0,xt.I)(q=>!!q)),A.monthsCalendar=this._store.select(q=>q.flaggedMonthsCalendar).pipe((0,xt.I)(q=>!!q)),A.yearsCalendar=this._store.select(q=>q.yearsCalendarFlagged).pipe((0,xt.I)(q=>!!q)),A.viewMode=this._store.select(q=>q.view?.mode),A.options$=(0,au.E)([this._store.select(q=>q.showWeekNumbers),this._store.select(q=>q.displayMonths)]).pipe((0,Ze.k)(q=>({showWeekNumbers:q[0],displayMonths:q[1]}))),this):this}setEventHandlers(A){return A.setViewMode=q=>{this._store?.dispatch(this._actions.changeViewMode(q))},A.navigateTo=q=>{this._store?.dispatch(this._actions.navigateStep(q.step))},A.dayHoverHandler=q=>{const ie=q.cell;ie.isOtherMonth||ie.isDisabled||(this._store?.dispatch(this._actions.hoverDay(q)),ie.isHovered=q.isHovered)},A.monthHoverHandler=q=>{q.cell.isHovered=q.isHovered},A.yearHoverHandler=q=>{q.cell.isHovered=q.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(A=>A.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(A=>A.monthsModel).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(A=>A.formattedMonths).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.selectedDate).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.selectedRange).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.yearsCalendarModel).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.hoveredDate).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.dateCustomClasses).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(A=>A.dateTooltipTexts).pipe((0,xt.I)(A=>!!A)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(A=>this._store?.dispatch(this._actions.setLocale(A)))),this):this}destroy(){for(const A of this._subs)A.unsubscribe()}static#e=this.\u0275fac=function(q){return new(q||b)(T.CoB(Dl),T.CoB(wm))};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})();const Lh={date:new Date,mode:"day"},mg=Object.assign(new wu,{locale:"en",view:Lh,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function Em(b,z,A){const q=z&&tl(J(b,"month"),z,"day"),ie=A&&Hs(Z(b,"month"),A,"day");return q||ie||!1}function bf(b,z,A){const q=z&&tl(J(b,"year"),z,"day"),ie=A&&Hs(Z(b,"year"),A,"day");return q||ie||!1}function Zh(b,z,A){return!!(z&&et(z)&&z.length)&&(A&&"year"===A&&!z[0].getDate()?z.some(q=>gl(b,q,"year")):z.some(q=>gl(b,q,"date")))}function Qf(b,z,A){return!!(z&&et(z)&&z.length)&&!z.some(q=>gl(b,q,A||"date"))}function gg(b,z=0){const A=b&&b.yearsCalendarModel&&b.yearsCalendarModel[z];return A?.years[0]&&A.years[0][0]&&A.years[0][0].date}function km(b,z){return!b||!z||!b.length&&!b[0].value||b.forEach(A=>(!A||!A.value||A.value instanceof Date||!(A.value instanceof Array&&A.value.length)||(A.value=_0(A.value,z)),b)),b}function v0(b,z){return!b||!z||b instanceof Array&&!b.length||b instanceof Date?b:_0(b,z)}function _0(b,z){return b instanceof Array?b.map(q=>q&&(Hs(q,z,"date")&&(q=z),q)):b}function vg(b){return b&&_g(b)}function y0(b){return b?.length&&b.map(z=>z&&_g(z)),b}function _g(b){const z=new Date;return b.setMilliseconds(z.getMilliseconds()),b.setSeconds(z.getSeconds()),b.setMinutes(z.getMinutes()),b.setHours(z.getHours()),b}function Tm(b,z){let A=b.initialDate;const q=new Array(b.height);for(let ie=0;ie<b.height;ie++){q[ie]=new Array(b.width);for(let Re=0;Re<b.width;Re++)q[ie][Re]=z(A),A=jt(A,b.shift)}return q}function yg(b,z){const A=function rn(b){return Pr(b.getFullYear(),b.getMonth(),1,b.getHours(),b.getMinutes(),b.getSeconds())}(b),q=function qh(b,z){if(function Pa(b,z){return b.getDay()===Number(z)}(b,z.firstDayOfWeek))return b;const q=function xf(b,z){const A=Number(z);if(isNaN(A))return 0;if(0===A)return b;const q=b-A%7;return q<0?q+7:q}($n(b),z.firstDayOfWeek);return jt(b,{day:-q})}(A,z);return{daysMatrix:Tm({width:z.width||0,height:z.height||0,initialDate:q,shift:{day:1}},Ft=>Ft),month:A}}function b0(b,z,A){return b.map(q=>q[0]?Ss(q[0],z,A):"")}function w0(b){const z=Js(b),A=z.weekdaysShort(),q=z.firstDayOfWeek();return[...A.slice(q),...A.slice(0,q)]}function cl(b,z){return!z||b>=z}const wv=4,bg=3,Cv={month:1};function Sm(b,z){const A=Z(b,"year");return{months:Tm({width:bg,height:wv,initialDate:A,shift:Cv},Re=>({date:Re,label:Ss(Re,z.monthLabel,z.locale)})),monthTitle:"",yearTitle:Ss(b,z.yearTitle,z.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const Pp=4,wf=4,ep=Pp*wf,Kh=-1*(Math.floor(ep/2)-1),Fp={year:1};function E0(b,z,A){const q=function Ev(b,z){return z&&b.getFullYear()>=z.getFullYear()&&b.getFullYear()<z.getFullYear()+ep?z:jt(b,{year:Kh})}(b,A),Re=Tm({width:wf,height:Pp,initialDate:q,shift:Fp},an=>({date:an,label:Ss(an,z.yearLabel,z.locale)})),Ft=function kv(b,z){return`${Ss(b[0][0].date,z.yearTitle,z.locale)} - ${Ss(b[Pp-1][wf-1].date,z.yearTitle,z.locale)}`}(Re,z);return{years:Re,monthTitle:"",yearTitle:Ft,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function Bp(b,z){!b||!isNaN(b.getTime())||(b.setHours(z.getHours()),b.setMinutes(z.getMinutes()),b.setSeconds(z.getSeconds()),b.setMilliseconds(z.getMilliseconds()))}function tp(b=mg,z){switch(z.type){case Dl.CALCULATE:return function Tv(b){if(!b.view)return b;let z;z=b.displayOneMonthRange&&Cf(b.view.date,b.minDate,b.maxDate)?1:b.displayMonths||1;let A=b.view.date;if("day"===b.view.mode&&b.monthViewOptions){b.showPreviousMonth&&b.selectedRange&&0===b.selectedRange.length&&(A=jt(A,{month:-1})),b.monthViewOptions.firstDayOfWeek=Js(b.locale).firstDayOfWeek();let q=new Array(z);for(let ie=0;ie<z;ie++)q[ie]=yg(A,b.monthViewOptions),A=jt(A,{month:1});if(b.preventChangeToNextMonth&&b.flaggedMonths&&b.hoveredDate){const ie=yg(b.view.date,b.monthViewOptions);b.flaggedMonths.length&&b.flaggedMonths[1].month.getMonth()===ie.month.getMonth()&&(q=b.flaggedMonths.map(Re=>b.monthViewOptions?yg(Re.month,b.monthViewOptions):null).filter(Re=>null!==Re))}return Object.assign({},b,{monthsModel:q})}if("month"===b.view.mode){const q=new Array(z);for(let ie=0;ie<z;ie++)q[ie]=Sm(A,Ao(b)),A=jt(A,{year:1});return Object.assign({},b,{monthsCalendar:q})}if("year"===b.view.mode){const q=new Array(z);for(let ie=0;ie<z;ie++)q[ie]=E0(A,Ao(b),"year"===b.minMode?gg(b,ie):void 0),A=jt(A,{year:ep});return Object.assign({},b,{yearsCalendarModel:q})}return b}(b);case Dl.FORMAT:return function wg(b){if(!b.view)return b;if("day"===b.view.mode&&b.monthsModel){const q=b.monthsModel.map((ie,Re)=>function x0(b,z,A){return{month:b.month,monthTitle:Ss(b.month,z.monthTitle,z.locale),yearTitle:Ss(b.month,z.yearTitle,z.locale),weekNumbers:b0(b.daysMatrix,z.weekNumbers,z.locale),weekdays:w0(z.locale),weeks:b.daysMatrix.map((q,ie)=>({days:q.map((Re,Ft)=>({date:Re,label:Ss(Re,z.dayLabel,z.locale),monthIndex:A,weekIndex:ie,dayIndex:Ft}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(ie,Ao(b),Re));return Object.assign({},b,{formattedMonths:q})}const z=b.displayMonths||1;let A=b.view.date;if("month"===b.view.mode){const q=new Array(z);for(let ie=0;ie<z;ie++)q[ie]=Sm(A,Ao(b)),A=jt(A,{year:1});return Object.assign({},b,{monthsCalendar:q})}if("year"===b.view.mode){const q=new Array(z);for(let ie=0;ie<z;ie++)q[ie]=E0(A,Ao(b)),A=jt(A,{year:16});return Object.assign({},b,{yearsCalendarModel:q})}return b}(b);case Dl.FLAG:return function Sv(b){if(!b.view)return b;const z=Cf(b.view.date,b.minDate,b.maxDate)?1:b.displayMonths;if(b.formattedMonths&&"day"===b.view.mode){const A=b.formattedMonths.map((q,ie)=>function xg(b,z){return b.weeks.forEach(A=>{A.days.forEach((q,ie)=>{const Re=!Ga(q.date,b.month),Ft=!Re&&Ra(q.date,z.hoveredDate),an=!Re&&z.selectedRange&&Ra(q.date,z.selectedRange[0]),sr=!Re&&z.selectedRange&&Ra(q.date,z.selectedRange[1]),Us=!Re&&Ra(q.date,z.selectedDate)||an||sr,Co=!Re&&z.selectedRange&&function dh(b,z,A){return!!(b&&z&&z[0])&&(z[1]?b>z[0]&&b<=z[1]:!!A&&b>z[0]&&b<=A)}(q.date,z.selectedRange,z.hoveredDate),yl=z.isDisabled||tl(q.date,z.minDate,"day")||Hs(q.date,z.maxDate,"day")||function xs(b,z){return!(typeof z>"u"||!z||!z.length)&&z.some(A=>A===b.getDay())}(q.date,z.daysDisabled)||Zh(q.date,z.datesDisabled)||Qf(q.date,z.datesEnabled),Df=!Re&&Ra(q.date,new Date),S0=z.dateCustomClasses&&z.dateCustomClasses.map(Vd=>Ra(q.date,Vd.date)?Vd.classes:[]).reduce((Vd,Im)=>Vd.concat(Im),[]).join(" ")||"",Rv=z.dateTooltipTexts&&z.dateTooltipTexts.map(Vd=>Ra(q.date,Vd.date)?Vd.tooltipText:"").reduce((Vd,Im)=>(Vd.push(Im),Vd),[]).join(" ")||"",Hd=Object.assign({},q,{isOtherMonth:Re,isHovered:Ft,isSelected:Us,isSelectionStart:an,isSelectionEnd:sr,isInRange:Co,isDisabled:yl,isToday:Df,customClasses:S0,tooltipText:Rv});(q.isOtherMonth!==Hd.isOtherMonth||q.isHovered!==Hd.isHovered||q.isSelected!==Hd.isSelected||q.isSelectionStart!==Hd.isSelectionStart||q.isSelectionEnd!==Hd.isSelectionEnd||q.isDisabled!==Hd.isDisabled||q.isInRange!==Hd.isInRange||q.customClasses!==Hd.customClasses||q.tooltipText!==Hd.tooltipText)&&(A.days[ie]=Hd)})}),b.hideLeftArrow=z.isDisabled||!!z.monthIndex&&z.monthIndex>0&&z.monthIndex!==z.displayMonths,b.hideRightArrow=z.isDisabled||(!!z.monthIndex||0===z.monthIndex)&&!!z.displayMonths&&z.monthIndex<z.displayMonths&&z.monthIndex+1!==z.displayMonths,b.disableLeftArrow=Em(jt(b.month,{month:-1}),z.minDate,z.maxDate),b.disableRightArrow=Em(jt(b.month,{month:1}),z.minDate,z.maxDate),b}(q,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,daysDisabled:b.daysDisabled,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,hoveredDate:b.hoveredDate,selectedDate:b.selectedDate,selectedRange:b.selectedRange,displayMonths:z,dateCustomClasses:b.dateCustomClasses,dateTooltipTexts:b.dateTooltipTexts,monthIndex:ie}));return Object.assign({},b,{flaggedMonths:A})}if("month"===b.view.mode&&b.monthsCalendar){const A=b.monthsCalendar.map((q,ie)=>function C0(b,z){return b.months.forEach((A,q)=>{A.forEach((ie,Re)=>{let Ft;const an=Ga(ie.date,z.hoveredMonth),sr=z.isDisabled||Zh(ie.date,z.datesDisabled)||Qf(ie.date,z.datesEnabled,"month")||Em(ie.date,z.minDate,z.maxDate);!z.selectedDate&&z.selectedRange?(Ft=Ga(ie.date,z.selectedRange[0]),Ft||(Ft=Ga(ie.date,z.selectedRange[1]))):Ft=Ga(ie.date,z.selectedDate);const Us=Object.assign(ie,{isHovered:an,isDisabled:sr,isSelected:Ft});(ie.isHovered!==Us.isHovered||ie.isDisabled!==Us.isDisabled||ie.isSelected!==Us.isSelected)&&(b.months[q][Re]=Us)})}),b.hideLeftArrow=!!z.monthIndex&&z.monthIndex>0&&z.monthIndex!==z.displayMonths,b.hideRightArrow=(!!z.monthIndex||0===z.monthIndex)&&(!!z.displayMonths||0===z.displayMonths)&&z.monthIndex<z.displayMonths&&z.monthIndex+1!==z.displayMonths,b.disableLeftArrow=bf(jt(b.months[0][0].date,{year:-1}),z.minDate,z.maxDate),b.disableRightArrow=bf(jt(b.months[0][0].date,{year:1}),z.minDate,z.maxDate),b}(q,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,hoveredMonth:b.hoveredMonth,selectedDate:b.selectedDate,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,selectedRange:b.selectedRange,displayMonths:z,monthIndex:ie}));return Object.assign({},b,{flaggedMonthsCalendar:A})}if("year"===b.view.mode&&b.yearsCalendarModel){const A=b.yearsCalendarModel.map((q,ie)=>function k0(b,z){b.years.forEach((ie,Re)=>{ie.forEach((Ft,an)=>{let sr;const Us=Ja(Ft.date,z.hoveredYear),Co=z.isDisabled||Zh(Ft.date,z.datesDisabled,"year")||Qf(Ft.date,z.datesEnabled,"year")||bf(Ft.date,z.minDate,z.maxDate);!z.selectedDate&&z.selectedRange?(sr=Ja(Ft.date,z.selectedRange[0]),sr||(sr=Ja(Ft.date,z.selectedRange[1]))):sr=Ja(Ft.date,z.selectedDate);const yl=Object.assign(Ft,{isHovered:Us,isDisabled:Co,isSelected:sr});(Ft.isHovered!==yl.isHovered||Ft.isDisabled!==yl.isDisabled||Ft.isSelected!==yl.isSelected)&&(b.years[Re][an]=yl)})}),b.hideLeftArrow=!!z.yearIndex&&z.yearIndex>0&&z.yearIndex!==z.displayMonths,b.hideRightArrow=!!z.yearIndex&&!!z.displayMonths&&z.yearIndex<z.displayMonths&&z.yearIndex+1!==z.displayMonths,b.disableLeftArrow=bf(jt(b.years[0][0].date,{year:-1}),z.minDate,z.maxDate);const A=b.years.length-1;return b.disableRightArrow=bf(jt(b.years[A][b.years[A].length-1].date,{year:1}),z.minDate,z.maxDate),b}(q,{isDisabled:b.isDisabled,minDate:b.minDate,maxDate:b.maxDate,hoveredYear:b.hoveredYear,selectedDate:b.selectedDate,datesDisabled:b.datesDisabled,datesEnabled:b.datesEnabled,selectedRange:b.selectedRange,displayMonths:z,yearIndex:ie}));return Object.assign({},b,{yearsCalendarFlagged:A})}return b}(b);case Dl.NAVIGATE_OFFSET:return function ip(b,z){if(!b.view)return b;const A=function Dv(b,z){if(b.view){if("year"===b.view.mode&&"year"===b.minMode){const A=gg(b,0);if(A){const q=jt(A,{year:-Kh});return jt(q,z.payload)}}return jt(Z(b.view.date,"month"),z.payload)}}(b,z);if(!A)return b;return Object.assign({},b,{view:{mode:b.view.mode,date:A}})}(b,z);case Dl.NAVIGATE_TO:{const A=z.payload;if(!b.view||!A.unit)return b;const q=function Xe(b,z){return Pr(Qt(b.getFullYear(),z.year),Qt(b.getMonth(),z.month),1,Qt(b.getHours(),z.hour),Qt(b.getMinutes(),z.minute),Qt(b.getSeconds(),z.seconds),Qt(b.getMilliseconds(),z.milliseconds))}(b.view.date,A.unit);let ie,Re;return cl(A.viewMode,b.minMode)?(Re=A.viewMode,ie={view:{date:q,mode:Re}}):(Re=b.view.mode,ie={selectedDate:q,view:{date:q,mode:Re}}),Object.assign({},b,ie)}case Dl.CHANGE_VIEWMODE:return cl(z.payload,b.minMode)&&b.view?Object.assign({},b,{view:{date:b.view.date,mode:z.payload}}):b;case Dl.HOVER:return Object.assign({},b,{hoveredDate:z.payload});case Dl.SELECT:{if(!b.view)return b;const A={selectedDate:z.payload,view:b.view};if(Array.isArray(b.selectedTime)){const Ft=b.selectedTime[0];A.selectedDate&&Ft&&Bp(A.selectedDate,Ft)}const q=b.view.mode,Re=np(z.payload||b.view.date,b.minDate,b.maxDate);return A.view={mode:q,date:Re},Object.assign({},b,A)}case Dl.SELECT_TIME:{const{date:A,index:q}=z.payload,ie=b.selectedTime?[...b.selectedTime]:[];return ie[q]=A,Object.assign({},b,{selectedTime:ie})}case Dl.SET_OPTIONS:{if(!b.view)return b;const A=z.payload,q=A.minMode?A.minMode:b.view.mode,Re=np(Ct(A.value)&&A.value||et(A.value)&&Ct(A.value[0])&&A.value[0]||b.view.date,A.minDate,A.maxDate);return A.view={mode:q,date:Re},A.value&&(et(A.value)&&(A.selectedRange=A.value,A.selectedTime=A.value.map(Ft=>Ft)),A.value instanceof Date&&(A.selectedDate=A.value,A.selectedTime=[A.value])),Object.assign({},b,A)}case Dl.SELECT_RANGE:{if(!b.view)return b;const A={selectedRange:z.payload,view:b.view};A.selectedRange?.forEach((Ft,an)=>{if(Array.isArray(b.selectedTime)){const sr=b.selectedTime[an];sr&&Bp(Ft,sr)}});const q=b.view.mode,Re=np(z.payload&&z.payload[0]||b.view.date,b.minDate,b.maxDate);return A.view={mode:q,date:Re},Object.assign({},b,A)}case Dl.SET_MIN_DATE:return Object.assign({},b,{minDate:z.payload});case Dl.SET_MAX_DATE:return Object.assign({},b,{maxDate:z.payload});case Dl.SET_IS_DISABLED:return Object.assign({},b,{isDisabled:z.payload});case Dl.SET_DATE_CUSTOM_CLASSES:return Object.assign({},b,{dateCustomClasses:z.payload});case Dl.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},b,{dateTooltipTexts:z.payload});default:return b}}function Ao(b){return{locale:b.locale,monthTitle:b.monthTitle,yearTitle:b.yearTitle,dayLabel:b.dayLabel,monthLabel:b.monthLabel,yearLabel:b.yearLabel,weekNumbers:b.weekNumbers}}function np(b,z,A){const q=Array.isArray(b)?b[0]:b;return z&&Hs(z,q,"day")?z:A&&tl(A,q,"day")?A:q}function Cf(b,z,A){return!(!A||!gl(A,b,"day"))||z&&A&&z.getMonth()===A.getMonth()}let Jh=(()=>{class b extends $h{constructor(){const A=new _d.g({type:"[datepicker] dispatcher init"});super(A,tp,new th(mg,A,tp))}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"platform"})}return b})(),Np=(()=>{class b{constructor(){this.onSelect=new T._w7}selectFromRanges(A){this.onSelect.emit(A)}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(q,ie){1&q&&(T.I0R(0,"div",0),T.yuY(1,Ap,2,3,"button",1),T.C$Y()),2&q&&(T.yG2(),T.E7m("ngForOf",ie.ranges))},dependencies:[Zo.ay],encapsulation:2,changeDetection:0})}return b})();var dd=function(b){return b[b.UP=0]="UP",b[b.DOWN=1]="DOWN",b}(dd||{});let hd,Cg=(()=>{class b{static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(q,ie){1&q&&(T.I0R(0,"div",0)(1,"span"),T.OEk(2),T.C$Y()()),2&q&&(T.yG2(2),T.cNF(ie.title))},encapsulation:2})}return b})(),T0=(()=>{class b{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(q,ie){1&q&&(T.I0R(0,"div",0)(1,"div",1)(2,"button",2),T.OEk(3,"-"),T.C$Y(),T.wR5(4,"input",3),T.I0R(5,"button",4),T.OEk(6,"+"),T.C$Y()(),T.I0R(7,"div",1)(8,"button",2),T.OEk(9,"-"),T.C$Y(),T.wR5(10,"input",3),T.I0R(11,"button",4),T.OEk(12,"+"),T.C$Y()(),T.I0R(13,"button",5),T.OEk(14),T.wR5(15,"img",6),T.C$Y()()),2&q&&(T.yG2(4),T.E7m("value",ie.hours),T.yG2(6),T.E7m("value",ie.minutes),T.yG2(4),T.oRS("",ie.ampm," "))},encapsulation:2})}return b})(),Ef=(()=>{class b{static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-calendar-layout"]],ngContentSelectors:Ed,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(q,ie){1&q&&(T.kPM(ld),T.yuY(0,rl,1,0,"bs-current-date",0),T.I0R(1,"div",1),T._Xx(2),T.C$Y(),T.I0R(3,"div",2),T._Xx(4,1),T.C$Y(),T.yuY(5,ig,1,0,"bs-timepicker",3)),2&q&&(T.E7m("ngIf",!1),T.yG2(5),T.E7m("ngIf",!1))},dependencies:[Zo.u_,Cg,T0],encapsulation:2})}return b})(),Ac=(()=>{class b{constructor(A,q,ie){this._config=A,this._elRef=q,this._renderer=ie,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(A=>A).forEach(A=>{this._renderer.addClass(this._elRef.nativeElement,A)})}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(wu),T.GI1(T.GMv),T.GI1(T.q87))};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(q,ie){2&q&&T.eAK("disabled",ie.day.isDisabled)("is-highlighted",ie.day.isHovered)("is-other-month",ie.day.isOtherMonth)("is-active-other-month",ie.day.isOtherMonthHovered)("in-range",ie.day.isInRange)("select-start",ie.day.isSelectionStart)("select-end",ie.day.isSelectionEnd)("selected",ie.day.isSelected)},inputs:{day:"day"},attrs:s0,decls:1,vars:1,template:function(q,ie){1&q&&T.OEk(0),2&q&&T.cNF(ie.day&&ie.day.label||"")},encapsulation:2,changeDetection:0})}return b})(),Ph=(()=>{class b{constructor(){this.isDisabled=!1,this.onNavigate=new T._w7,this.onViewMode=new T._w7}navTo(A){this.onNavigate.emit(A?dd.DOWN:dd.UP)}view(A){this.isDisabled||this.onViewMode.emit(A)}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(q,ie){1&q&&(T.I0R(0,"button",0),T.qCj("click",function(){return ie.navTo(!0)}),T.I0R(1,"span"),T.OEk(2,"\u2039"),T.C$Y()(),T.yuY(3,_v,5,2,"ng-container",1),T.OEk(4," \u200b "),T.I0R(5,"button",2),T.qCj("click",function(){return ie.view("year")}),T.I0R(6,"span"),T.OEk(7),T.C$Y()(),T.OEk(8," \u200b "),T.I0R(9,"button",3),T.qCj("click",function(){return ie.navTo(!1)}),T.I0R(10,"span"),T.OEk(11,"\u203a"),T.C$Y()()),2&q&&(T.m4B("visibility",ie.calendar.hideLeftArrow?"hidden":"visible"),T.E7m("disabled",ie.calendar.disableLeftArrow),T.yG2(3),T.E7m("ngIf",ie.calendar&&ie.calendar.monthTitle),T.yG2(2),T.E7m("disabled",ie.isDisabled),T.yG2(2),T.cNF(ie.calendar.yearTitle),T.yG2(2),T.m4B("visibility",ie.calendar.hideRightArrow?"hidden":"visible"),T.E7m("disabled",ie.calendar.disableRightArrow))},dependencies:[Zo.u_],encapsulation:2,changeDetection:0})}return b})(),Fh=(()=>{class b{constructor(A){this._config=A,this.onNavigate=new T._w7,this.onViewMode=new T._w7,this.onSelect=new T._w7,this.onHover=new T._w7,this.onHoverWeek=new T._w7,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(A){this.onNavigate.emit({step:{month:dd.DOWN===A?-1:1}})}changeViewMode(A){this.onViewMode.emit(A)}selectDay(A){this.onSelect.emit(A)}selectWeek(A){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===A.days.length)return;if(this._config.selectWeek&&A.days[0]&&!A.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(A.days[0]);const q=A.days.find(ie=>(this._config.selectFromOtherMonth||!ie.isOtherMonth)&&!ie.isDisabled);if(this.onSelect.emit(q),this._config.selectWeekDateRange){const Re=A.days.slice(0).reverse().find(Ft=>(this._config.selectFromOtherMonth||!Ft.isOtherMonth)&&!Ft.isDisabled);this.onSelect.emit(Re)}}weekHoverHandler(A,q){(this._config.selectWeek||this._config.selectWeekDateRange)&&A.days.find(Re=>(this._config.selectFromOtherMonth||!Re.isOtherMonth)&&!Re.isDisabled)&&(A.isHovered=q,this.isWeekHovered=q,this.onHoverWeek.emit(A))}hoverDay(A,q){this._config.selectFromOtherMonth&&A.isOtherMonth&&(A.isOtherMonthHovered=q),this._config.dateTooltipTexts&&(A.tooltipText="",this._config.dateTooltipTexts.forEach(ie=>{Ra(ie.date,A.date)&&(A.tooltipText=ie.tooltipText)})),this.onHover.emit({cell:A,isHovered:q})}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(wu))};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(q,ie){1&q&&(T.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),T.qCj("onNavigate",function(Ft){return ie.navigateTo(Ft)})("onViewMode",function(Ft){return ie.changeViewMode(Ft)}),T.C$Y(),T.I0R(2,"table",1)(3,"thead")(4,"tr"),T.yuY(5,ng,1,0,"th",2)(6,o0,2,1,"th",3),T.C$Y()(),T.I0R(7,"tbody"),T.yuY(8,Ba,3,2,"tr",4),T.C$Y()()()),2&q&&(T.yG2(),T.E7m("calendar",ie.calendar)("isDisabled",!!ie.isDisabled),T.yG2(4),T.E7m("ngIf",ie.options&&ie.options.showWeekNumbers),T.yG2(),T.E7m("ngForOf",ie.calendar.weekdays),T.yG2(2),T.E7m("ngForOf",ie.calendar.weeks))},dependencies:[Zo.ay,Zo.u_,$l.uM,Ef,Ac,Ph],encapsulation:2})}return b})(),rp=(()=>{class b{constructor(){this.onNavigate=new T._w7,this.onViewMode=new T._w7,this.onSelect=new T._w7,this.onHover=new T._w7}navigateTo(A){this.onNavigate.emit({step:{year:dd.DOWN===A?-1:1}})}viewMonth(A){this.onSelect.emit(A)}hoverMonth(A,q){this.onHover.emit({cell:A,isHovered:q})}changeViewMode(A){this.onViewMode.emit(A)}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(q,ie){1&q&&(T.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),T.qCj("onNavigate",function(Ft){return ie.navigateTo(Ft)})("onViewMode",function(Ft){return ie.changeViewMode(Ft)}),T.C$Y(),T.I0R(2,"table",1)(3,"tbody"),T.yuY(4,pf,2,1,"tr",2),T.C$Y()()()),2&q&&(T.yG2(),T.E7m("calendar",ie.calendar),T.yG2(3),T.E7m("ngForOf",null==ie.calendar?null:ie.calendar.months))},dependencies:[Zo.ay,Ef,Ph],encapsulation:2})}return b})(),zp=(()=>{class b{constructor(){this.onNavigate=new T._w7,this.onViewMode=new T._w7,this.onSelect=new T._w7,this.onHover=new T._w7}navigateTo(A){this.onNavigate.emit({step:{year:(dd.DOWN===A?-1:1)*ep}})}viewYear(A){this.onSelect.emit(A)}hoverYear(A,q){this.onHover.emit({cell:A,isHovered:q})}changeViewMode(A){this.onViewMode.emit(A)}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(q,ie){1&q&&(T.I0R(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),T.qCj("onNavigate",function(Ft){return ie.navigateTo(Ft)})("onViewMode",function(Ft){return ie.changeViewMode(Ft)}),T.C$Y(),T.I0R(2,"table",1)(3,"tbody"),T.yuY(4,rg,2,1,"tr",2),T.C$Y()()()),2&q&&(T.yG2(),T.E7m("calendar",ie.calendar),T.yG2(3),T.E7m("ngForOf",null==ie.calendar?null:ie.calendar.years))},dependencies:[Zo.ay,Ef,Ph],encapsulation:2})}return b})(),kf=(()=>{class b extends bm{set value(A){this._effects?.setValue(A)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(A,q,ie,Re,Ft,an,sr){super(),this._config=q,this._store=ie,this._element=Re,this._actions=Ft,this._positionService=sr,this.valueChange=new T._w7,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=an,A.setStyle(Re.nativeElement,"display","block"),A.setStyle(Re.nativeElement,"position","absolute")}ngOnInit(){let A;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,t.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(q=>q.selectedDate).subscribe(q=>{A=q,this.valueChange.emit(q)})),this._subs.push(this._store.select(q=>q.selectedTime).subscribe(q=>{!q[0]||!(q[0]instanceof Date)||q[0]===A||this.valueChange.emit(q[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(A=>{Array.isArray(A)&&A.length>=1&&this.startTimepicker?.writeValue(A[0])})),this.startTimepicker?.registerOnChange(A=>{this.timeSelectHandler(A,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(A,q){this._store.dispatch(this._actions.selectTime(A,q))}daySelectHandler(A){!A||(this.isOtherMonthsActive?A.isDisabled:A.isOtherMonth||A.isDisabled)||this._store.dispatch(this._actions.select(A.date))}monthSelectHandler(A){!A||A.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:Sn(A.date),year:Dn(A.date)},viewMode:"day"}))}yearSelectHandler(A){!A||A.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:Dn(A.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const A of this._subs)A.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(T.q87),T.GI1(wu),T.GI1(Jh),T.GI1(T.GMv),T.GI1(Dl),T.GI1(uc),T.GI1(Sh.O4))};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-datepicker-container"]],viewQuery:function(q,ie){if(1&q&&T.CC$(Xf,5),2&q){let Re;T.wto(Re=T.Gqi())&&(ie.startTimepicker=Re.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(q,ie){1&q&&T.qCj("click",function(Ft){return ie._stopPropagation(Ft)}),2&q&&T.e48("disabled",ie.isDatepickerDisabled)("readonly",ie.isDatepickerReadonly)},features:[T.M5G([Jh,uc]),T.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(q,ie){1&q&&(T.yuY(0,mm,10,11,"div",0),T.wVc(1,"async")),2&q&&T.E7m("ngIf",T.kDX(1,1,ie.viewMode))},dependencies:[Zo.QF,Zo.ay,Zo.u_,Zo.Ko,Zo.Wm,$f,Np,Fh,rp,zp,Zo.a],encapsulation:2,data:{animation:[Lp]}})}return b})(),Dm=(()=>{class b{get readonlyValue(){return this.isDisabled?"":null}constructor(A,q,ie,Re,Ft){this._config=A,this._elementRef=q,this._renderer=ie,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Cd.E,this.isDisabled=!1,this.bsValueChange=new T._w7,this._subs=[],this._dateInputFormat$=new Cd.E,Object.assign(this,this._config),this._datepicker=Ft.createLoader(q,Re,ie),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new _d.g(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(A){this.isOpen$.next(A)}set bsValue(A){this._bsValue&&A&&this._bsValue.getTime()===A.getTime()||(!this._bsValue&&A&&!this._config.withTimepicker&&Bp(A,new Date),A&&this.bsConfig?.initCurrentTime&&(A=vg(A)),this.initPreviousValue(),this._bsValue=A,this.bsValueChange.emit(A))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){hd=this._bsValue}ngOnChanges(A){A.bsConfig&&(A.bsConfig.currentValue?.initCurrentTime&&A.bsConfig.currentValue?.initCurrentTime!==A.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=vg(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(A.minDate&&(this._datepickerRef.instance.minDate=this.minDate),A.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),A.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),A.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),A.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),A.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),A.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),A.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(A=>{this._datepickerRef&&(this._datepickerRef.instance.value=A)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(A=>{this.initPreviousValue(),this.bsValue=A,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(hd&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return hd instanceof Date&&this._bsValue?.getDate()===hd?.getDate()&&this._bsValue?.getMonth()===hd?.getMonth()&&this._bsValue?.getFullYear()===hd?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe((0,xt.I)(A=>A!==this.isOpen),(0,j.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:wu,useValue:this._config}).attach(kf).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const A of this._subs)A.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this._config.keepDatesOutOfRules?this._bsValue:v0(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(A=>A.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(wu),T.GI1(T.GMv),T.GI1(T.q87),T.GI1(T.y8U),T.GI1(bu.Sy))};static#t=this.\u0275dir=T.Sc5({type:b,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(q,ie){2&q&&T.e48("readonly",ie.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[T.SYr]})}return b})(),Av=(()=>{class b extends bm{set value(A){this._effects?.setRangeValue(A)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}constructor(A,q,ie,Re,Ft,an,sr){super(),this._config=q,this._store=ie,this._element=Re,this._actions=Ft,this._positionService=sr,this.valueChange=new T._w7,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=an,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,A.setStyle(Re.nativeElement,"display","block"),A.setStyle(Re.nativeElement,"position","absolute")}ngOnInit(){let A;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe((0,t.U)(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(q=>q.selectedRange).subscribe(q=>{A=q,this.valueChange.emit(q),this.chosenRange=q||[]})),this._subs.push(this._store.select(q=>q.selectedTime).subscribe(q=>{!q[0]||!q[1]||!(q[0]instanceof Date)||!(q[1]instanceof Date)||A&&q[0]===A[0]&&q[1]===A[1]||(this.valueChange.emit(q),this.chosenRange=q||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(A=>{Array.isArray(A)&&A.length>=2&&(this.startTimepicker?.writeValue(A[0]),this.endTimepicker?.writeValue(A[1]))})),this.startTimepicker?.registerOnChange(A=>{this.timeSelectHandler(A,0)}),this.endTimepicker?.registerOnChange(A=>{this.timeSelectHandler(A,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(A,q){this._store.dispatch(this._actions.selectTime(A,q))}daySelectHandler(A){!A||(this.isOtherMonthsActive?A.isDisabled:A.isOtherMonth||A.isDisabled)||this.rangesProcessing(A)}monthSelectHandler(A){if(A&&!A.isDisabled){if(A.isSelected=!0,"month"!==this._config.minMode){if(A.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:Sn(A.date),year:Dn(A.date)},viewMode:"day"}))}this.rangesProcessing(A)}}yearSelectHandler(A){if(A&&!A.isDisabled){if(A.isSelected=!0,"year"!==this._config.minMode){if(A.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:Dn(A.date)},viewMode:"month"}))}this.rangesProcessing(A)}}rangesProcessing(A){1===this._rangeStack.length&&(this._rangeStack=A.date>=this._rangeStack[0]?[this._rangeStack[0],A.date]:[A.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(A.date),0===this._rangeStack.length&&(this._rangeStack=[A.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(A.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const A of this._subs)A.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(A){A&&(this._rangeStack=A.value instanceof Date?[A.value]:A.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(A){let q=new Date(A);if(this._config.maxDate){const ie=this._config.maxDate.getTime(),Re=A.getTime()+864e5*(this._config.maxDateRange||0);q=Re>ie?new Date(this._config.maxDate):new Date(Re)}else q.setDate(A.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(q)}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(T.q87),T.GI1(wu),T.GI1(Jh),T.GI1(T.GMv),T.GI1(Dl),T.GI1(uc),T.GI1(Sh.O4))};static#t=this.\u0275cmp=T.In1({type:b,selectors:[["bs-daterangepicker-container"]],viewQuery:function(q,ie){if(1&q&&(T.CC$(Xf,5),T.CC$(lg,5)),2&q){let Re;T.wto(Re=T.Gqi())&&(ie.startTimepicker=Re.first),T.wto(Re=T.Gqi())&&(ie.endTimepicker=Re.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(q,ie){1&q&&T.qCj("click",function(Ft){return ie._stopPropagation(Ft)}),2&q&&T.e48("disabled",ie.isDatepickerDisabled)("readonly",ie.isDatepickerReadonly)},features:[T.M5G([Jh,uc]),T.eg9],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(q,ie){1&q&&(T.yuY(0,Gd,10,11,"div",0),T.wVc(1,"async")),2&q&&T.E7m("ngIf",T.kDX(1,1,ie.viewMode))},dependencies:[Zo.QF,Zo.ay,Zo.u_,Zo.Ko,Zo.Wm,$f,Np,Fh,rp,zp,Zo.a],encapsulation:2,data:{animation:[Lp]}})}return b})();const Iv={provide:iu.Y6,useExisting:(0,T.wd)(()=>sp),multi:!0},Mv={provide:iu.WM,useExisting:(0,T.wd)(()=>sp),multi:!0};let Qh,sp=(()=>{class b{constructor(A,q,ie,Re,Ft){this._picker=A,this._localeService=q,this._renderer=ie,this._elRef=Re,this.changeDetection=Ft,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Nd.wH}ngOnInit(){const A=q=>{this._setInputValue(q),this._value!==q&&(this._value=q,this._onChange(q),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&A(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(A)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe((0,He.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(A){(13===A.keyCode||"Enter"===A.code)&&this.hide()}_setInputValue(A){const q=A?Ss(A,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",q)}onChange(A){this.writeValue(A.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(A){const q=A.value;if(null==q||""===q)return null;if(nt(q)){if(!Ct(q))return{bsDate:{invalid:q}};if(this._picker&&this._picker.minDate&&tl(q,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&Hs(q,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(A){this._validatorChange=A}writeValue(A){if(A){const q=this._localeService.currentLocale;if(!Js(q))throw new Error(`Locale "${q}" is not defined, please add it with "defineLocale(...)"`);this._value=tu(A,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=ml(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(A){this._picker.isDisabled=A,A?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(A){this._onChange=A}registerOnTouched(A){this._onTouched=A}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(Dm,1),T.GI1(wm),T.GI1(T.q87),T.GI1(T.GMv),T.GI1(T.kD9))};static#t=this.\u0275dir=T.Sc5({type:b,selectors:[["input","bsDatepicker",""]],hostBindings:function(q,ie){1&q&&T.qCj("change",function(Ft){return ie.onChange(Ft)})("keyup.esc",function(){return ie.hide()})("keydown",function(Ft){return ie.onKeydownEvent(Ft)})("blur",function(){return ie.onBlur()})},features:[T.M5G([Iv,Mv])]})}return b})(),Sf=(()=>{class b extends wu{constructor(){super(...arguments),this.displayMonths=2}static#e=this.\u0275fac=(()=>{let A;return function(ie){return(A||(A=T.otF(b)))(ie||b)}})();static#t=this.\u0275prov=T.wxM({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),Yp=(()=>{class b{get isOpen(){return this._datepicker.isShown}set isOpen(A){this.isOpen$.next(A)}set bsValue(A){this._bsValue!==A&&(A&&this.bsConfig?.initCurrentTime&&(A=y0(A)),this.initPreviousValue(),this._bsValue=A,this.bsValueChange.emit(A))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}constructor(A,q,ie,Re,Ft){this._config=A,this._elementRef=q,this._renderer=ie,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new Cd.E,this.isDisabled=!1,this.bsValueChange=new T._w7,this._subs=[],this._rangeInputFormat$=new Cd.E,this._datepicker=Ft.createLoader(q,Re,ie),Object.assign(this,A),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new _d.g(this.isOpen)}ngOnInit(){this.isDestroy$=new Cd.E,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(A){A.bsConfig&&(A.bsConfig.currentValue?.initCurrentTime&&A.bsConfig.currentValue?.initCurrentTime!==A.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=y0(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(A.bsConfig.currentValue&&A.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(A.minDate&&(this._datepickerRef.instance.minDate=this.minDate),A.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),A.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),A.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),A.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),A.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),A.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe((0,xt.I)(A=>A!==this.isOpen),(0,j.a)(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:wu,useValue:this._config}).attach(Av).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(A=>{this._datepickerRef&&(this._datepickerRef.instance.value=A)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe((0,xt.I)(A=>A&&A[0]&&!!A[1])).subscribe(A=>{this.initPreviousValue(),this.bsValue=A,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){Qh=this._bsValue}keepDatepickerModalOpened(){return!!(Qh&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===Qh?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===Qh?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===Qh?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===Qh?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===Qh?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===Qh?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:this.bsConfig?.keepDatesOutOfRules?this._bsValue:v0(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:km(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened,keepDatesOutOfRules:this.bsConfig?.keepDatesOutOfRules})}hide(){this.isOpen&&this._datepicker.hide();for(const A of this._subs)A.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(A=>A.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(Sf),T.GI1(T.GMv),T.GI1(T.q87),T.GI1(T.y8U),T.GI1(bu.Sy))};static#t=this.\u0275dir=T.Sc5({type:b,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(q,ie){2&q&&T.e48("readonly",ie.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[T.SYr]})}return b})();const op={provide:iu.Y6,useExisting:(0,T.wd)(()=>Tg),multi:!0},kg={provide:iu.WM,useExisting:(0,T.wd)(()=>Tg),multi:!0};let Tg=(()=>{class b{constructor(A,q,ie,Re,Ft){this._picker=A,this._localeService=q,this._renderer=ie,this._elRef=Re,this.changeDetection=Ft,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Nd.wH}ngOnInit(){this._picker._bsValue&&(q=>{this._setInputValue(q),this._value!==q&&(this._value=q,this._onChange(q),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(q=>{this._setInputValue(q),this._value!==q&&(this._value=q,this._onChange(q),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe((0,He.a)()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(A){(13===A.keyCode||"Enter"===A.code)&&this.hide()}_setInputValue(A){let q="";if(A){const ie=A[0]?Ss(A[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",Re=A[1]?Ss(A[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";q=ie&&Re?ie+this._picker._config.rangeSeparator+Re:""}this._renderer.setProperty(this._elRef.nativeElement,"value",q)}onChange(A){this.writeValue(A.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(A){let q=A.value;const ie=[];if(null==q||!et(q))return null;q=q.slice().sort((an,sr)=>an.getTime()-sr.getTime());const Re=Ct(q[0]),Ft=Ct(q[1]);return Re?Ft?(this._picker&&this._picker.minDate&&tl(q[0],this._picker.minDate,"date")&&(q[0]=this._picker.minDate,ie.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&Hs(q[1],this._picker.maxDate,"date")&&(q[1]=this._picker.maxDate,ie.push({bsDate:{maxDate:this._picker.maxDate}})),ie.length>0?(this.writeValue(q),ie):null):{bsDate:{invalid:q[1]}}:{bsDate:{invalid:q[0]}}}registerOnValidatorChange(A){this._validatorChange=A}writeValue(A){if(A){const q=this._localeService.currentLocale;if(!Js(q))throw new Error(`Locale "${q}" is not defined, please add it with "defineLocale(...)"`);let Re=[];if("string"==typeof A){const Ft=this._picker._config.rangeSeparator.trim();Re=A.replace(/[^-]/g,"").length>1?A.split(this._picker._config.rangeSeparator):A.split(Ft.length>0?Ft:this._picker._config.rangeSeparator).map(an=>an.trim())}Array.isArray(A)&&(Re=A),this._value=Re.map(Ft=>this._picker._config.useUtc?ml(tu(Ft,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):tu(Ft,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(Ft=>isNaN(Ft.valueOf())?void 0:Ft)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(A){this._picker.isDisabled=A,A?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(A){this._onChange=A}registerOnTouched(A){this._onTouched=A}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}static#e=this.\u0275fac=function(q){return new(q||b)(T.GI1(Yp,1),T.GI1(wm),T.GI1(T.q87),T.GI1(T.GMv),T.GI1(T.kD9))};static#t=this.\u0275dir=T.Sc5({type:b,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(q,ie){1&q&&T.qCj("change",function(Ft){return ie.onChange(Ft)})("keyup.esc",function(){return ie.hide()})("keydown",function(Ft){return ie.onKeydownEvent(Ft)})("blur",function(){return ie.onBlur()})},features:[T.M5G([op,kg])]})}return b})(),Sg=(()=>{class b{static forRoot(){return{ngModule:b,providers:[bu.Sy,Sh.O4,Jh,Dl,uc,wm,Ps]}}static#e=this.\u0275fac=function(q){return new(q||b)};static#t=this.\u0275mod=T.a4G({type:b});static#i=this.\u0275inj=T.s3X({imports:[Zo.MD,$l.as,jl]})}return b})()},8216:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{im:()=>Dt,rO:()=>Fi});var T=Zt(4496),xt=Zt(6504),Ze=Zt(1368);const t=(xi,fi)=>({"pull-left":xi,"float-left":fi}),j=(xi,fi)=>({"pull-right":xi,"float-right":fi}),He=(xi,fi)=>({disabled:xi,currentPage:fi});function Be(xi,fi){if(1&xi){const It=T.KQA();T.I0R(0,"li",11)(1,"a",12),T.qCj("click",function(Ni){T.usT(It);const Zi=T.GaO();return T.CGJ(Zi.selectPage(1,Ni))}),T.C_f(2,13),T.C$Y()()}if(2&xi){const It=T.GaO(),Si=T.Gew(13);T.eAK("disabled",It.noPrevious()||It.disabled),T.yG2(2),T.E7m("ngTemplateOutlet",It.customFirstTemplate||Si)("ngTemplateOutletContext",T.IBC(4,He,It.noPrevious()||It.disabled,It.page))}}function Me(xi,fi){if(1&xi){const It=T.KQA();T.I0R(0,"li",14)(1,"a",12),T.qCj("click",function(Ni){T.usT(It);const Zi=T.GaO();return T.CGJ(Zi.selectPage(Zi.page-1,Ni))}),T.C_f(2,13),T.C$Y()()}if(2&xi){const It=T.GaO(),Si=T.Gew(11);T.eAK("disabled",It.noPrevious()||It.disabled),T.yG2(2),T.E7m("ngTemplateOutlet",It.customPreviousTemplate||Si)("ngTemplateOutletContext",T.IBC(4,He,It.noPrevious()||It.disabled,It.page))}}const We=(xi,fi,It)=>({disabled:xi,$implicit:fi,currentPage:It});function nt(xi,fi){if(1&xi){const It=T.KQA();T.I0R(0,"li",15)(1,"a",12),T.qCj("click",function(Ni){const Rn=T.usT(It).$implicit,Ki=T.GaO();return T.CGJ(Ki.selectPage(Rn.number,Ni))}),T.C_f(2,13),T.C$Y()()}if(2&xi){const It=fi.$implicit,Si=T.GaO(),Ni=T.Gew(7);T.eAK("active",It.active)("disabled",Si.disabled&&!It.active),T.yG2(2),T.E7m("ngTemplateOutlet",Si.customPageTemplate||Ni)("ngTemplateOutletContext",T.uAc(6,We,Si.disabled,It,Si.page))}}function at(xi,fi){if(1&xi){const It=T.KQA();T.I0R(0,"li",16)(1,"a",12),T.qCj("click",function(Ni){T.usT(It);const Zi=T.GaO();return T.CGJ(Zi.selectPage(Zi.page+1,Ni))}),T.C_f(2,13),T.C$Y()()}if(2&xi){const It=T.GaO(),Si=T.Gew(9);T.eAK("disabled",It.noNext()||It.disabled),T.yG2(2),T.E7m("ngTemplateOutlet",It.customNextTemplate||Si)("ngTemplateOutletContext",T.IBC(4,He,It.noNext()||It.disabled,It.page))}}function Ct(xi,fi){if(1&xi){const It=T.KQA();T.I0R(0,"li",17)(1,"a",12),T.qCj("click",function(Ni){T.usT(It);const Zi=T.GaO();return T.CGJ(Zi.selectPage(Zi.totalPages,Ni))}),T.C_f(2,13),T.C$Y()()}if(2&xi){const It=T.GaO(),Si=T.Gew(15);T.eAK("disabled",It.noNext()||It.disabled),T.yG2(2),T.E7m("ngTemplateOutlet",It.customLastTemplate||Si)("ngTemplateOutletContext",T.IBC(4,He,It.noNext()||It.disabled,It.page))}}function ot(xi,fi){1&xi&&T.OEk(0),2&xi&&T.cNF(fi.$implicit.text)}function Wt(xi,fi){if(1&xi&&T.OEk(0),2&xi){const It=T.GaO();T.cNF(It.getText("next"))}}function et(xi,fi){if(1&xi&&T.OEk(0),2&xi){const It=T.GaO();T.cNF(It.getText("previous"))}}function lt(xi,fi){if(1&xi&&T.OEk(0),2&xi){const It=T.GaO();T.cNF(It.getText("first"))}}function gt(xi,fi){if(1&xi&&T.OEk(0),2&xi){const It=T.GaO();T.cNF(It.getText("last"))}}let _i=(()=>{class xi{constructor(){this.main={itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",pageBtnClass:"",rotate:!0},this.pager={itemsPerPage:15,previousText:"\xab Previous",nextText:"Next \xbb",pageBtnClass:"",align:!0}}static#e=this.\u0275fac=function(Si){return new(Si||xi)};static#t=this.\u0275prov=T.wxM({token:xi,factory:xi.\u0275fac,providedIn:"root"})}return xi})();const tt={provide:xt.Y6,useExisting:(0,T.wd)(()=>yi),multi:!0};let yi=(()=>{class xi{constructor(It,Si,Ni){this.elementRef=It,this.changeDetection=Ni,this.align=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.firstText="First",this.previousText="\xab Previous",this.nextText="Next \xbb",this.lastText="Last",this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new T._w7,this.pageChanged=new T._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=15,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=It,this.config||this.configureOptions(Object.assign({},Si.main,Si.pager))}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(It){this._itemsPerPage=It,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(It){this._totalItems=It,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(It){this._totalPages=It,this.numPages.emit(It),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(It){const Si=this._page;this._page=It>this.totalPages?this.totalPages:It||1,this.changeDetection.markForCheck(),!(Si===this._page||typeof Si>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(It){this.config=Object.assign({},It)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(It){this.page=It,this.pages=this.getPages(this.page,this.totalPages)}getText(It){return this[`${It}Text`]||this.config[`${It}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(It){this.onChange=It}registerOnTouched(It){this.onTouched=It}selectPage(It,Si){Si&&Si.preventDefault(),this.disabled||(Si&&Si.target&&Si.target.blur(),this.writeValue(It),this.onChange(this.page))}makePage(It,Si,Ni){return{text:Si,number:It,active:Ni}}getPages(It,Si){const Ni=[];let Zi=1,Rn=Si;const Ki=typeof this.maxSize<"u"&&this.maxSize<Si;Ki&&this.maxSize&&(this.rotate?(Zi=Math.max(It-Math.floor(this.maxSize/2),1),Rn=Zi+this.maxSize-1,Rn>Si&&(Rn=Si,Zi=Rn-this.maxSize+1)):(Zi=(Math.ceil(It/this.maxSize)-1)*this.maxSize+1,Rn=Math.min(Zi+this.maxSize-1,Si)));for(let tn=Zi;tn<=Rn;tn++){const yn=this.makePage(tn,tn.toString(),tn===It);Ni.push(yn)}if(Ki&&!this.rotate){if(Zi>1){const tn=this.makePage(Zi-1,"...",!1);Ni.unshift(tn)}if(Rn<Si){const tn=this.makePage(Rn+1,"...",!1);Ni.push(tn)}}return Ni}calculateTotalPages(){const It=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(It||0,1)}static#e=this.\u0275fac=function(Si){return new(Si||xi)(T.GI1(T.GMv),T.GI1(_i),T.GI1(T.kD9))};static#t=this.\u0275cmp=T.In1({type:xi,selectors:[["pager"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[T.M5G([tt])],decls:7,vars:24,consts:[[1,"pager"],[3,"ngClass"],["href","",3,"click"]],template:function(Si,Ni){1&Si&&(T.I0R(0,"ul",0)(1,"li",1)(2,"a",2),T.qCj("click",function(Rn){return Ni.selectPage(Ni.page-1,Rn)}),T.OEk(3),T.C$Y()(),T.I0R(4,"li",1)(5,"a",2),T.qCj("click",function(Rn){return Ni.selectPage(Ni.page+1,Rn)}),T.OEk(6),T.C$Y()()()),2&Si&&(T.yG2(),T.m8U(Ni.pageBtnClass),T.eAK("disabled",Ni.noPrevious())("previous",Ni.align),T.E7m("ngClass",T.IBC(18,t,Ni.align,Ni.align)),T.yG2(2),T.cNF(Ni.getText("previous")),T.yG2(),T.m8U(Ni.pageBtnClass),T.eAK("disabled",Ni.noNext())("next",Ni.align),T.E7m("ngClass",T.IBC(21,j,Ni.align,Ni.align)),T.yG2(2),T.cNF(Ni.getText("next")))},dependencies:[Ze.QF],encapsulation:2})}return xi})();const Pi={provide:xt.Y6,useExisting:(0,T.wd)(()=>Dt),multi:!0};let Dt=(()=>{class xi{constructor(It,Si,Ni){this.elementRef=It,this.changeDetection=Ni,this.align=!0,this.boundaryLinks=!1,this.directionLinks=!0,this.rotate=!0,this.pageBtnClass="",this.disabled=!1,this.numPages=new T._w7,this.pageChanged=new T._w7,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.classMap="",this.inited=!1,this._itemsPerPage=10,this._totalItems=0,this._totalPages=0,this._page=1,this.elementRef=It,this.config||this.configureOptions(Si.main)}get itemsPerPage(){return this._itemsPerPage}set itemsPerPage(It){this._itemsPerPage=It,this.totalPages=this.calculateTotalPages()}get totalItems(){return this._totalItems}set totalItems(It){this._totalItems=It,this.totalPages=this.calculateTotalPages()}get totalPages(){return this._totalPages}set totalPages(It){this._totalPages=It,this.numPages.emit(It),this.inited&&this.selectPage(this.page)}get page(){return this._page}set page(It){const Si=this._page;this._page=It>this.totalPages?this.totalPages:It||1,this.changeDetection.markForCheck(),!(Si===this._page||typeof Si>"u")&&this.pageChanged.emit({page:this._page,itemsPerPage:this.itemsPerPage})}configureOptions(It){this.config=Object.assign({},It)}ngOnInit(){typeof window<"u"&&(this.classMap=this.elementRef.nativeElement.getAttribute("class")||""),typeof this.maxSize>"u"&&(this.maxSize=this.config?.maxSize||0),typeof this.rotate>"u"&&(this.rotate=!!this.config?.rotate),typeof this.boundaryLinks>"u"&&(this.boundaryLinks=!!this.config?.boundaryLinks),typeof this.directionLinks>"u"&&(this.directionLinks=!!this.config?.directionLinks),typeof this.pageBtnClass>"u"&&(this.pageBtnClass=this.config?.pageBtnClass||""),typeof this.itemsPerPage>"u"&&(this.itemsPerPage=this.config?.itemsPerPage||0),this.totalPages=this.calculateTotalPages(),this.pages=this.getPages(this.page,this.totalPages),this.inited=!0}writeValue(It){this.page=It,this.pages=this.getPages(this.page,this.totalPages)}getText(It){return this[`${It}Text`]||this.config[`${It}Text`]}noPrevious(){return 1===this.page}noNext(){return this.page===this.totalPages}registerOnChange(It){this.onChange=It}registerOnTouched(It){this.onTouched=It}selectPage(It,Si){Si&&Si.preventDefault(),this.disabled||(Si&&Si.target&&Si.target.blur(),this.writeValue(It),this.onChange(this.page))}makePage(It,Si,Ni){return{text:Si,number:It,active:Ni}}getPages(It,Si){const Ni=[];let Zi=1,Rn=Si;const Ki=typeof this.maxSize<"u"&&this.maxSize<Si;Ki&&this.maxSize&&(this.rotate?(Zi=Math.max(It-Math.floor(this.maxSize/2),1),Rn=Zi+this.maxSize-1,Rn>Si&&(Rn=Si,Zi=Rn-this.maxSize+1)):(Zi=(Math.ceil(It/this.maxSize)-1)*this.maxSize+1,Rn=Math.min(Zi+this.maxSize-1,Si)));for(let tn=Zi;tn<=Rn;tn++){const yn=this.makePage(tn,tn.toString(),tn===It);Ni.push(yn)}if(Ki&&!this.rotate){if(Zi>1){const tn=this.makePage(Zi-1,"...",!1);Ni.unshift(tn)}if(Rn<Si){const tn=this.makePage(Rn+1,"...",!1);Ni.push(tn)}}return Ni}calculateTotalPages(){const It=this.itemsPerPage<1?1:Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(It||0,1)}static#e=this.\u0275fac=function(Si){return new(Si||xi)(T.GI1(T.GMv),T.GI1(_i),T.GI1(T.kD9))};static#t=this.\u0275cmp=T.In1({type:xi,selectors:[["pagination"]],inputs:{align:"align",maxSize:"maxSize",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",firstText:"firstText",previousText:"previousText",nextText:"nextText",lastText:"lastText",rotate:"rotate",pageBtnClass:"pageBtnClass",disabled:"disabled",customPageTemplate:"customPageTemplate",customNextTemplate:"customNextTemplate",customPreviousTemplate:"customPreviousTemplate",customFirstTemplate:"customFirstTemplate",customLastTemplate:"customLastTemplate",itemsPerPage:"itemsPerPage",totalItems:"totalItems"},outputs:{numPages:"numPages",pageChanged:"pageChanged"},features:[T.M5G([Pi])],decls:16,vars:6,consts:[[1,"pagination",3,"ngClass"],["class","pagination-first page-item",3,"disabled",4,"ngIf"],["class","pagination-prev page-item",3,"disabled",4,"ngIf"],["class","pagination-page page-item",3,"active","disabled",4,"ngFor","ngForOf"],["class","pagination-next page-item",3,"disabled",4,"ngIf"],["class","pagination-last page-item",3,"disabled",4,"ngIf"],["defaultPageTemplate",""],["defaultNextTemplate",""],["defaultPreviousTemplate",""],["defaultFirstTemplate",""],["defaultLastTemplate",""],[1,"pagination-first","page-item"],["href","",1,"page-link",3,"click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"pagination-prev","page-item"],[1,"pagination-page","page-item"],[1,"pagination-next","page-item"],[1,"pagination-last","page-item"]],template:function(Si,Ni){1&Si&&(T.I0R(0,"ul",0),T.yuY(1,Be,3,7,"li",1)(2,Me,3,7,"li",2)(3,nt,3,10,"li",3)(4,at,3,7,"li",4)(5,Ct,3,7,"li",5),T.C$Y(),T.yuY(6,ot,1,1,"ng-template",null,6,T.gJz)(8,Wt,1,1,"ng-template",null,7,T.gJz)(10,et,1,1,"ng-template",null,8,T.gJz)(12,lt,1,1,"ng-template",null,9,T.gJz)(14,gt,1,1,"ng-template",null,10,T.gJz)),2&Si&&(T.E7m("ngClass",Ni.classMap),T.yG2(),T.E7m("ngIf",Ni.boundaryLinks),T.yG2(),T.E7m("ngIf",Ni.directionLinks),T.yG2(),T.E7m("ngForOf",Ni.pages),T.yG2(),T.E7m("ngIf",Ni.directionLinks),T.yG2(),T.E7m("ngIf",Ni.boundaryLinks))},dependencies:[Ze.QF,Ze.ay,Ze.u_,Ze.XV],encapsulation:2})}return xi})(),Fi=(()=>{class xi{static forRoot(){return{ngModule:xi,providers:[]}}static#e=this.\u0275fac=function(Si){return new(Si||xi)};static#t=this.\u0275mod=T.a4G({type:xi});static#i=this.\u0275inj=T.s3X({imports:[Ze.MD]})}return xi})()},8987:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{iU:()=>at});var T=Zt(4496),xt=Zt(1368);let at=(()=>{class Ct{static forRoot(){return{ngModule:Ct,providers:[]}}static#e=this.\u0275fac=function(et){return new(et||Ct)};static#t=this.\u0275mod=T.a4G({type:Ct});static#i=this.\u0275inj=T.s3X({imports:[xt.MD]})}return Ct})()},136:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{Q5:()=>at,eY:()=>Ct,oL:()=>We,wv:()=>nt});var T=Zt(4496),xt=Zt(1368);function Ze(ot,Wt){if(1&ot){const et=T.KQA();T.I0R(0,"span",7),T.qCj("click",function(gt){T.usT(et);const _i=T.GaO().$implicit,tt=T.GaO();return gt.preventDefault(),T.CGJ(tt.removeTab(_i))}),T.OEk(1," \u274c"),T.C$Y()}}const t=ot=>["nav-item",ot];function j(ot,Wt){if(1&ot){const et=T.KQA();T.I0R(0,"li",3),T.qCj("keydown",function(gt){const tt=T.usT(et).index,yi=T.GaO();return T.CGJ(yi.keyNavActions(gt,tt))}),T.I0R(1,"a",4),T.qCj("click",function(){const _i=T.usT(et).$implicit;return T.CGJ(_i.active=!0)}),T.I0R(2,"span",5),T.OEk(3),T.C$Y(),T.yuY(4,Ze,2,0,"span",6),T.C$Y()()}if(2&ot){const et=Wt.$implicit;T.eAK("active",et.active)("disabled",et.disabled),T.E7m("ngClass",T.S45(15,t,et.customClass||"")),T.yG2(),T.eAK("active",et.active)("disabled",et.disabled),T.e48("aria-controls",et.id?et.id:"")("aria-selected",!!et.active)("id",et.id?et.id+"-link":""),T.yG2(),T.E7m("ngTransclude",et.headingRef),T.yG2(),T.cNF(et.heading),T.yG2(),T.E7m("ngIf",et.removable)}}const He=["*"];let Be=(()=>{class ot{set ngTransclude(et){this._ngTransclude=et,et&&this.viewRef.createEmbeddedView(et)}get ngTransclude(){return this._ngTransclude}constructor(et){this.viewRef=et}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(T.y8U))};static#t=this.\u0275dir=T.Sc5({type:ot,selectors:[["","ngTransclude",""]],inputs:{ngTransclude:"ngTransclude"}})}return ot})(),Me=(()=>{class ot{constructor(){this.type="tabs",this.isKeysAllowed=!0,this.ariaLabel="Tabs"}static#e=this.\u0275fac=function(lt){return new(lt||ot)};static#t=this.\u0275prov=T.wxM({token:ot,factory:ot.\u0275fac,providedIn:"root"})}return ot})(),We=(()=>{class ot{get vertical(){return this._vertical}set vertical(et){this._vertical=et,this.setClassMap()}get justified(){return this._justified}set justified(et){this._justified=et,this.setClassMap()}get type(){return this._type}set type(et){this._type=et,this.setClassMap()}get isKeysAllowed(){return this._isKeysAllowed}set isKeysAllowed(et){this._isKeysAllowed=et}constructor(et,lt,gt){this.renderer=lt,this.elementRef=gt,this.clazz=!0,this.tabs=[],this.classMap={},this.ariaLabel="Tabs",this.isDestroyed=!1,this._vertical=!1,this._justified=!1,this._type="tabs",this._isKeysAllowed=!0,Object.assign(this,et)}ngOnDestroy(){this.isDestroyed=!0}addTab(et){this.tabs.push(et),et.active=1===this.tabs.length&&!et.active}removeTab(et,lt={reselect:!0,emit:!0}){const gt=this.tabs.indexOf(et);if(-1!==gt&&!this.isDestroyed){if(lt.reselect&&et.active&&this.hasAvailableTabs(gt)){const _i=this.getClosestTabIndex(gt);this.tabs[_i].active=!0}lt.emit&&et.removed.emit(et),this.tabs.splice(gt,1),et.elementRef.nativeElement.parentNode&&this.renderer.removeChild(et.elementRef.nativeElement.parentNode,et.elementRef.nativeElement)}}keyNavActions(et,lt){if(!this.isKeysAllowed)return;const gt=Array.from(this.elementRef.nativeElement.querySelectorAll(".nav-link"));if(13===et.keyCode||"Enter"===et.key||32===et.keyCode||"Space"===et.key)return et.preventDefault(),void gt[lt%gt.length].click();if(39!==et.keyCode&&"RightArrow"!==et.key)if(37!==et.keyCode&&"LeftArrow"!==et.key)if(36!==et.keyCode&&"Home"!==et.key)if(35!==et.keyCode&&"End"!==et.key){if((46===et.keyCode||"Delete"===et.key)&&this.tabs[lt].removable){if(this.removeTab(this.tabs[lt]),gt[lt+1])return void gt[(lt+1)%gt.length].focus();gt[gt.length-1]&&gt[0].focus()}}else{et.preventDefault();let _i,tt=1,yi=lt;do{yi-tt<0?(yi=gt.length-1,_i=gt[yi],tt=0):_i=gt[yi-tt],tt++}while(_i.classList.contains("disabled"));_i.focus()}else{et.preventDefault();let _i,tt=0;do{_i=gt[tt%gt.length],tt++}while(_i.classList.contains("disabled"));_i.focus()}else{let _i,tt=1,yi=lt;do{yi-tt<0?(yi=gt.length-1,_i=gt[yi],tt=0):_i=gt[yi-tt],tt++}while(_i.classList.contains("disabled"));_i.focus()}else{let _i,tt=1;do{_i=gt[(lt+tt)%gt.length],tt++}while(_i.classList.contains("disabled"));_i.focus()}}getClosestTabIndex(et){const lt=this.tabs.length;if(!lt)return-1;for(let gt=1;gt<=lt;gt+=1){const _i=et-gt,tt=et+gt;if(this.tabs[_i]&&!this.tabs[_i].disabled)return _i;if(this.tabs[tt]&&!this.tabs[tt].disabled)return tt}return-1}hasAvailableTabs(et){const lt=this.tabs.length;if(!lt)return!1;for(let gt=0;gt<lt;gt+=1)if(!this.tabs[gt].disabled&&gt!==et)return!0;return!1}setClassMap(){this.classMap={"nav-stacked":this.vertical,"flex-column":this.vertical,"nav-justified":this.justified,[`nav-${this.type}`]:!0}}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(Me),T.GI1(T.q87),T.GI1(T.GMv))};static#t=this.\u0275cmp=T.In1({type:ot,selectors:[["tabset"]],hostVars:2,hostBindings:function(lt,gt){2&lt&&T.eAK("tab-container",gt.clazz)},inputs:{vertical:"vertical",justified:"justified",type:"type"},ngContentSelectors:He,decls:4,vars:3,consts:[["role","tablist",1,"nav",3,"ngClass","click"],[3,"ngClass","active","disabled","keydown",4,"ngFor","ngForOf"],[1,"tab-content"],[3,"ngClass","keydown"],["href","javascript:void(0);","role","tab",1,"nav-link",3,"click"],[3,"ngTransclude"],["class","bs-remove-tab",3,"click",4,"ngIf"],[1,"bs-remove-tab",3,"click"]],template:function(lt,gt){1&lt&&(T.kPM(),T.I0R(0,"ul",0),T.qCj("click",function(tt){return tt.preventDefault()}),T.yuY(1,j,5,17,"li",1),T.C$Y(),T.I0R(2,"div",2),T._Xx(3),T.C$Y()),2&lt&&(T.E7m("ngClass",gt.classMap),T.e48("aria-label",gt.ariaLabel),T.yG2(),T.E7m("ngForOf",gt.tabs))},dependencies:[xt.QF,xt.ay,xt.u_,Be],styles:["[_nghost-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.disabled[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{cursor:default}"]})}return ot})(),nt=(()=>{class ot{get customClass(){return this._customClass}set customClass(et){this.customClass&&this.customClass.split(" ").forEach(lt=>{this.renderer.removeClass(this.elementRef.nativeElement,lt)}),this._customClass=et?et.trim():"",this.customClass&&this.customClass.split(" ").forEach(lt=>{this.renderer.addClass(this.elementRef.nativeElement,lt)})}get active(){return this._active}set active(et){if(this._active!==et){if(this.disabled&&et||!et)return void(this._active&&!et&&(this.deselect.emit(this),this._active=et));this._active=et,this.selectTab.emit(this),this.tabset.tabs.forEach(lt=>{lt!==this&&(lt.active=!1)})}}get ariaLabelledby(){return this.id?`${this.id}-link`:""}constructor(et,lt,gt){this.elementRef=lt,this.renderer=gt,this.disabled=!1,this.removable=!1,this.selectTab=new T._w7,this.deselect=new T._w7,this.removed=new T._w7,this.addClass=!0,this.role="tabpanel",this._active=!1,this._customClass="",this.tabset=et,this.tabset.addTab(this)}ngOnInit(){this.removable=!!this.removable}ngOnDestroy(){this.tabset.removeTab(this,{reselect:!1,emit:!1})}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(We),T.GI1(T.GMv),T.GI1(T.q87))};static#t=this.\u0275dir=T.Sc5({type:ot,selectors:[["tab"],["","tab",""]],hostVars:7,hostBindings:function(lt,gt){2&lt&&(T.e48("id",gt.id)("role",gt.role)("aria-labelledby",gt.ariaLabelledby),T.eAK("active",gt.active)("tab-pane",gt.addClass))},inputs:{heading:"heading",id:"id",disabled:"disabled",removable:"removable",customClass:"customClass",active:"active"},outputs:{selectTab:"selectTab",deselect:"deselect",removed:"removed"},exportAs:["tab"]})}return ot})(),at=(()=>{class ot{constructor(et,lt){lt.headingRef=et}static#e=this.\u0275fac=function(lt){return new(lt||ot)(T.GI1(T.Yw2),T.GI1(nt))};static#t=this.\u0275dir=T.Sc5({type:ot,selectors:[["","tabHeading",""]]})}return ot})(),Ct=(()=>{class ot{static forRoot(){return{ngModule:ot,providers:[]}}static#e=this.\u0275fac=function(lt){return new(lt||ot)};static#t=this.\u0275mod=T.a4G({type:ot});static#i=this.\u0275inj=T.s3X({imports:[xt.MD]})}return ot})()},7995:(uo,ja,Zt)=>{"use strict";Zt.d(ja,{as:()=>ot,uM:()=>Ct});var T=Zt(4496),xt=Zt(3676),Ze=Zt(140),t=Zt(1316),j=Zt(6552),He=Zt(3120),Be=Zt(1368);const Me=["*"];let We=(()=>{class Wt{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}static#e=this.\u0275fac=function(gt){return new(gt||Wt)};static#t=this.\u0275prov=T.wxM({token:Wt,factory:Wt.\u0275fac,providedIn:"root"})}return Wt})(),nt=(()=>{class Wt{get _bsVersions(){return(0,xt.w3)()}constructor(lt){Object.assign(this,lt)}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Ze.Ly[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}static#e=this.\u0275fac=function(gt){return new(gt||Wt)(T.GI1(We))};static#t=this.\u0275cmp=T.In1({type:Wt,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(gt,_i){2&gt&&(T.e48("id",_i.id),T.m8U("show tooltip in tooltip-"+_i.placement+" bs-tooltip-"+_i.placement+" "+_i.placement+" "+_i.containerClass))},ngContentSelectors:Me,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(gt,_i){1&gt&&(T.kPM(),T.wR5(0,"div",0),T.I0R(1,"div",1),T._Xx(2),T.C$Y())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none;position:absolute}.tooltip[_nghost-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0})}return Wt})(),at=0,Ct=(()=>{class Wt{get isOpen(){return this._tooltip.isShown}set isOpen(lt){lt?this.show():this.hide()}set htmlContent(lt){(0,xt.eG)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=lt}set _placement(lt){(0,xt.eG)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=lt}set _isOpen(lt){(0,xt.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=lt}get _isOpen(){return(0,xt.eG)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(lt){(0,xt.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!lt}get _enable(){return(0,xt.eG)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(lt){(0,xt.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=lt?"body":this.container}get _appendToBody(){return(0,xt.eG)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(lt){(0,xt.eG)("tooltipClass deprecated")}set _tooltipContext(lt){(0,xt.eG)("tooltipContext deprecated")}set _tooltipPopupDelay(lt){(0,xt.eG)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=lt}get _tooltipTrigger(){return(0,xt.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(lt){(0,xt.eG)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(lt||"").toString()}constructor(lt,gt,_i,tt,yi,Pi){this._elementRef=tt,this._renderer=yi,this._positionService=Pi,this.tooltipId=at++,this.adaptivePosition=!0,this.tooltipChange=new T._w7,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new T._w7,this._tooltip=gt.createLoader(this._elementRef,lt,this._renderer).provide({provide:We,useValue:_i}),Object.assign(this,_i),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(lt=>{lt||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const lt=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(nt).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},gt=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,He.k)(this.delay).subscribe(()=>{lt(),gt()}),this.triggers&&(0,xt.GY)(this.triggers).forEach(_i=>{_i.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,_i.close,()=>{this._delaySubscription?.unsubscribe(),gt()}))})):lt()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}static#e=this.\u0275fac=function(gt){return new(gt||Wt)(T.GI1(T.y8U),T.GI1(j.Sy),T.GI1(We),T.GI1(T.GMv),T.GI1(T.q87),T.GI1(Ze.O4))};static#t=this.\u0275dir=T.Sc5({type:Wt,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:[T.Wk5.None,"tooltipHtml","htmlContent"],_placement:[T.Wk5.None,"tooltipPlacement","_placement"],_isOpen:[T.Wk5.None,"tooltipIsOpen","_isOpen"],_enable:[T.Wk5.None,"tooltipEnable","_enable"],_appendToBody:[T.Wk5.None,"tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:[T.Wk5.None,"tooltipClass","_popupClass"],_tooltipContext:[T.Wk5.None,"tooltipContext","_tooltipContext"],_tooltipPopupDelay:[T.Wk5.None,"tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:[T.Wk5.None,"tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]})}return(0,t.UN)([(0,xt.s9)(),(0,t.YR)("design:type",Object)],Wt.prototype,"tooltip",void 0),Wt})(),ot=(()=>{class Wt{static forRoot(){return{ngModule:Wt,providers:[j.Sy,Ze.O4]}}static#e=this.\u0275fac=function(gt){return new(gt||Wt)};static#t=this.\u0275mod=T.a4G({type:Wt});static#i=this.\u0275inj=T.s3X({imports:[Be.MD]})}return Wt})()}}]);